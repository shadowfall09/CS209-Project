{"items":[{"tags":["java","tesseract","sikuli","tess4j","sikuli-x"],"owner":{"account_id":29356502,"reputation":9,"user_id":22492314,"display_name":"mbambosibu23"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":61,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":0,"score":0,"last_activity_date":1695020192,"creation_date":1693819994,"question_id":77036595,"body_markdown":"\r\nThe challenge is I have to take a screenshot every second and the BufferedImage\r\nis slowing my program considerably and stopping it with “full memory exception”.\r\n\r\nI try to use the flush() method to flush the BufferedImage but I still get the same problem.\r\n\r\nI now use SikuliXapi Version-2.0.5 for Windows. I use these methods “region.text()” and or “region.textLine()” and the slowing down of the program has improved considerably and it almost gone to the point that I decided to use Sikuli alone. \r\n\r\nThe challenge now is that the results I get from Sikuli are about 70 % and based on my program I need the results to be 100 % all the time.\r\n\r\nNow my question is using Sikuli and looking at my below code, how can I add the &quot;CHANGE IMAGE BACKGROUND AND TEXT&quot; and &quot;REMOVING STRIPES ON AN IMAGE&quot; to my sikuli code so I can get the 100 % resuls? Is there a way to do this kind of modification in Sikuli?\r\n\r\nMY CODE:\r\n\r\n\r\n\r\n``` \r\n\r\n\r\n\r\n//METHOD START\r\nprivate static void readValue() throws IOException, AWTException, InterruptedException {\r\n\r\nTesseract tessEndValue = new Tesseract();\r\ntessEndValue.setDatapath(&quot;C:\\\\Tess4J\\\\tessdata&quot;);\r\ntessEndValue.setTessVariable(&quot;user_defined_dpi&quot;, &quot;300&quot;);\r\n\r\nRectangle regionEndValue = new Rectangle(150,180,200,300);\r\nBufferedImage readEndValueimage = robot.createScreenCapture(regionEndValue);\r\n\r\n```\r\n\r\n\r\n\r\nThank you!\r\n\r\n\r\n","title":"How can I modify the read() and or readLine() method in Sikuli?","body":"<p>The challenge is I have to take a screenshot every second and the BufferedImage\nis slowing my program considerably and stopping it with “full memory exception”.</p>\n<p>I try to use the flush() method to flush the BufferedImage but I still get the same problem.</p>\n<p>I now use SikuliXapi Version-2.0.5 for Windows. I use these methods “region.text()” and or “region.textLine()” and the slowing down of the program has improved considerably and it almost gone to the point that I decided to use Sikuli alone.</p>\n<p>The challenge now is that the results I get from Sikuli are about 70 % and based on my program I need the results to be 100 % all the time.</p>\n<p>Now my question is using Sikuli and looking at my below code, how can I add the &quot;CHANGE IMAGE BACKGROUND AND TEXT&quot; and &quot;REMOVING STRIPES ON AN IMAGE&quot; to my sikuli code so I can get the 100 % resuls? Is there a way to do this kind of modification in Sikuli?</p>\n<p>MY CODE:</p>\n<pre><code>\n\n\n//METHOD START\nprivate static void readValue() throws IOException, AWTException, InterruptedException {\n\nTesseract tessEndValue = new Tesseract();\ntessEndValue.setDatapath(&quot;C:\\\\Tess4J\\\\tessdata&quot;);\ntessEndValue.setTessVariable(&quot;user_defined_dpi&quot;, &quot;300&quot;);\n\nRectangle regionEndValue = new Rectangle(150,180,200,300);\nBufferedImage readEndValueimage = robot.createScreenCapture(regionEndValue);\n\n</code></pre>\n<p>Thank you!</p>\n"},{"tags":["java","spring-boot","spring-data-jpa","h2"],"comments":[{"owner":{"account_id":4647011,"reputation":41835,"user_id":3764965,"accept_rate":94,"display_name":"Nikolas Charalambidis"},"score":1,"creation_date":1695019313,"post_id":77124983,"comment_id":135962714,"body_markdown":"Omit the `ID` that is autogenerated, so handled automatically.","body":"Omit the <code>ID</code> that is autogenerated, so handled automatically."},{"owner":{"account_id":2067336,"reputation":2848,"user_id":1842599,"display_name":"Andrej Istomin"},"score":1,"creation_date":1695019500,"post_id":77124983,"comment_id":135962743,"body_markdown":"maybe a stupid idea, but easy to try: what if you write your SQL in one line? I have a feeling that it doesn&#39;t recognise the second line as a part of the query.","body":"maybe a stupid idea, but easy to try: what if you write your SQL in one line? I have a feeling that it doesn&#39;t recognise the second line as a part of the query."},{"owner":{"account_id":9505356,"reputation":1019,"user_id":11225028,"display_name":"Luk"},"score":0,"creation_date":1695021497,"post_id":77124983,"comment_id":135963102,"body_markdown":"Allright, thx for your help, guys! @AndrejIstomin it&#39;s my formatter that puts the VALUES part of my query into the next line. The issue, however, seems to be a missing semicolon at the end of each statement. I am pretty sure I had tried this out before, but it is working now.","body":"Allright, thx for your help, guys! @AndrejIstomin it&#39;s my formatter that puts the VALUES part of my query into the next line. The issue, however, seems to be a missing semicolon at the end of each statement. I am pretty sure I had tried this out before, but it is working now."}],"answers":[{"tags":[],"owner":{"account_id":29214968,"reputation":186,"user_id":22381995,"display_name":"cant-code"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1695019659,"creation_date":1695019659,"answer_id":77125062,"question_id":77124983,"body_markdown":"Add a ; to the end of the sql file. That should fix your issue.","title":"Initializing H2 database in a Spring Boot application fails","body":"<p>Add a ; to the end of the sql file. That should fix your issue.</p>\n"}],"owner":{"account_id":9505356,"reputation":1019,"user_id":11225028,"display_name":"Luk"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":77,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"accepted_answer_id":77125062,"answer_count":1,"score":-1,"last_activity_date":1695019659,"creation_date":1695018734,"question_id":77124983,"body_markdown":"Consider the following JPA entity:\r\n\r\n    @Entity\r\n    @Table(name = &quot;addresses&quot;)\r\n    @Getter\r\n    @Setter\r\n    @NoArgsConstructor\r\n    public class AddressEntity {\r\n    \r\n      @Id\r\n      @GeneratedValue\r\n      private Long id;\r\n    \r\n      private String city;\r\n      private String postalCode;\r\n      private String street;\r\n      private String houseNumber;\r\n    \r\n    }\r\n\r\nI have created a Spring Boot application, which should create this table inside an H2 database and initialize it with some values. To achieve this, I have configured the application in the following way:\r\n\r\n    spring:\r\n      h2:\r\n        console:\r\n          enabled: true\r\n          path: /h2\r\n      datasource:\r\n        url: jdbc:h2:mem:/testdB\r\n        username: sa\r\n        password:\r\n        driverClassName: org.h2.Driver\r\n      jpa:\r\n        hibernate:\r\n          ddl-auto: none\r\n        generate-ddl: true\r\n        defer-datasource-initialization: true\r\n        database-platform: org.hibernate.dialect.H2Dialect\r\n      sql:\r\n        init:\r\n          data-locations:\r\n            - classpath:addresses.sql\r\n\r\nMy addresses.sql looks like this:\r\n\r\n    INSERT INTO ADDRESSES (ID, CITY, POSTAL_CODE, STREET, HOUSE_NUMBER)\r\n    VALUES (0, &#39;NYC&#39;, &#39;10020&#39;, &#39;Main Street&#39;, &#39;32 A&#39;)\r\n\r\nWhen starting my app, I run into a `org.h2.jdbc.JdbcSQLSyntaxErrorException`. It says \r\n\r\n`expected &quot;DIRECT, SORTED, DEFAULT, VALUES, SET, (, WITH, SELECT, TABLE, VALUES&quot;;`. \r\n\r\nI am at the end of my knowledge here. The syntax seems correct to me. When starting the app without initializing the tables, the tables are created. I can write data into my addresses table inside the H2 console using the exact same sql script I am using to initialize the table. Can anyone help me out? \r\n\r\n","title":"Initializing H2 database in a Spring Boot application fails","body":"<p>Consider the following JPA entity:</p>\n<pre><code>@Entity\n@Table(name = &quot;addresses&quot;)\n@Getter\n@Setter\n@NoArgsConstructor\npublic class AddressEntity {\n\n  @Id\n  @GeneratedValue\n  private Long id;\n\n  private String city;\n  private String postalCode;\n  private String street;\n  private String houseNumber;\n\n}\n</code></pre>\n<p>I have created a Spring Boot application, which should create this table inside an H2 database and initialize it with some values. To achieve this, I have configured the application in the following way:</p>\n<pre><code>spring:\n  h2:\n    console:\n      enabled: true\n      path: /h2\n  datasource:\n    url: jdbc:h2:mem:/testdB\n    username: sa\n    password:\n    driverClassName: org.h2.Driver\n  jpa:\n    hibernate:\n      ddl-auto: none\n    generate-ddl: true\n    defer-datasource-initialization: true\n    database-platform: org.hibernate.dialect.H2Dialect\n  sql:\n    init:\n      data-locations:\n        - classpath:addresses.sql\n</code></pre>\n<p>My addresses.sql looks like this:</p>\n<pre><code>INSERT INTO ADDRESSES (ID, CITY, POSTAL_CODE, STREET, HOUSE_NUMBER)\nVALUES (0, 'NYC', '10020', 'Main Street', '32 A')\n</code></pre>\n<p>When starting my app, I run into a <code>org.h2.jdbc.JdbcSQLSyntaxErrorException</code>. It says</p>\n<p><code>expected &quot;DIRECT, SORTED, DEFAULT, VALUES, SET, (, WITH, SELECT, TABLE, VALUES&quot;;</code>.</p>\n<p>I am at the end of my knowledge here. The syntax seems correct to me. When starting the app without initializing the tables, the tables are created. I can write data into my addresses table inside the H2 console using the exact same sql script I am using to initialize the table. Can anyone help me out?</p>\n"},{"tags":["java","spring","spring-boot"],"answers":[{"tags":[],"owner":{"account_id":20499100,"reputation":377,"user_id":15043397,"display_name":"yuri777"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1652981515,"creation_date":1652814398,"answer_id":72279442,"question_id":72276929,"body_markdown":"Change the type of parameters\r\n\r\n            parameters = {\r\n                     @StoredProcedureParameter(mode = ParameterMode.IN, name = &quot;id&quot;, type = Integer.class),\r\n                     @StoredProcedureParameter(mode = ParameterMode.IN, name = &quot;firstName&quot;, type = String.class),\r\n                     @StoredProcedureParameter(mode = ParameterMode.IN, name = &quot;lastName&quot;, type = String.class)\r\n            }\r\n\r\nChange method getEntity\r\n\r\n    @Override\r\n    public Test getEntity(Integer id, String firstName, String lastName) {\r\n        List&lt;Test&gt; list = springTestRepository.getEntity(id, firstName, lastName);\r\n        for (Test test : list) {\r\n            System.out.println(test.getId()+&quot; &quot;+test.getFirstName()+&quot; &quot;+test.getLastName());\r\n        }\r\n        return list.get(2);//springTestRepository.getEntity(id, firstName, lastName);\r\n    }","title":"Spring Data JPA get multiple result set","body":"<p>Change the type of parameters</p>\n<pre><code>        parameters = {\n                 @StoredProcedureParameter(mode = ParameterMode.IN, name = &quot;id&quot;, type = Integer.class),\n                 @StoredProcedureParameter(mode = ParameterMode.IN, name = &quot;firstName&quot;, type = String.class),\n                 @StoredProcedureParameter(mode = ParameterMode.IN, name = &quot;lastName&quot;, type = String.class)\n        }\n</code></pre>\n<p>Change method getEntity</p>\n<pre><code>@Override\npublic Test getEntity(Integer id, String firstName, String lastName) {\n    List&lt;Test&gt; list = springTestRepository.getEntity(id, firstName, lastName);\n    for (Test test : list) {\n        System.out.println(test.getId()+&quot; &quot;+test.getFirstName()+&quot; &quot;+test.getLastName());\n    }\n    return list.get(2);//springTestRepository.getEntity(id, firstName, lastName);\n}\n</code></pre>\n"}],"owner":{"account_id":25315565,"reputation":1,"user_id":19137732,"display_name":"Bo0lean"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":1039,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1695019299,"creation_date":1652801797,"question_id":72276929,"body_markdown":"I try to get the return value using JPA. \r\nBut my database Procedure returns multiple results, and JPA only gets the first return value. as the picture shows. \r\nThe result I want is the third one, but I only get the first one.\r\nHow to get the third one? Thanks.\r\n\r\n\r\n\r\n[Java Result][1]\r\n[Database Result][2]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/nWfs6.png\r\n  [2]: https://i.stack.imgur.com/Nlubt.png\r\n\r\n**Entity.java**\r\n   \r\n\r\n    @Entity\r\n    @NamedStoredProcedureQueries(\r\n            {\r\n                    @NamedStoredProcedureQuery(\r\n                            name = &quot;SpringTestProcedure&quot;,\r\n                            procedureName = &quot;SpringTestProcedure&quot;,\r\n                            parameters = {\r\n                                    @StoredProcedureParameter(mode = ParameterMode.IN, name = &quot;id&quot;, type = Test.class),\r\n                                    @StoredProcedureParameter(mode = ParameterMode.IN, name = &quot;firstName&quot;, type = Test.class),\r\n                                    @StoredProcedureParameter(mode = ParameterMode.IN, name = &quot;lastName&quot;, type = Test.class)\r\n                            }\r\n                    )\r\n            }\r\n    )\r\n    \r\n    @Table(name = &quot;Users&quot;)\r\n    public class Test {\r\n\r\n    public Test() {\r\n    }\r\n\r\n    public Test(Integer id, String firstName, String lastName) {\r\n        this.id = id;\r\n        this.firstName = firstName;\r\n        this.lastName = lastName;\r\n    }\r\n\r\n    @Id\r\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\r\n    @Column(name = &quot;id&quot;)\r\n    private Integer id;\r\n\r\n    @Column(name = &quot;firstName&quot;)\r\n    private String firstName;\r\n\r\n    @Column(name = &quot;lastName&quot;)\r\n    private String lastName;\r\n\r\n    public Integer getId() {\r\n        return id;\r\n    }\r\n\r\n    public void setId(Integer id) {\r\n        this.id = id;\r\n    }\r\n\r\n    public String getFirstName() {\r\n        return firstName;\r\n    }\r\n\r\n    public void setFirstName(String firstName) {\r\n        this.firstName = firstName;\r\n    }\r\n\r\n    public String getLastName() {\r\n        return lastName;\r\n    }\r\n\r\n    public void setLastName(String lastName) {\r\n        this.lastName = lastName;\r\n    }\r\n}\r\n\r\n**Repository.java**\r\n\r\n   \r\n\r\n     @Repository\r\n    public interface SpringTestRepository extends JpaRepository&lt;Test, Integer&gt; {\r\n    \r\n        @Procedure(procedureName = &quot;SpringTestProcedure&quot;)\r\n        public List&lt;Object[]&gt; getEntity(@Param(&quot;id&quot;) Integer id,\r\n                                        @Param(&quot;firstName&quot;) String firstName,\r\n                                        @Param(&quot;lastName&quot;) String lastName);\r\n    \r\n    }\r\n\r\n**ServiceImpl.java**\r\n\r\n    @Service\r\n    public class SpringTestServiceImpl implements SpringTestService {\r\n    \r\n        @Autowired\r\n        private SpringTestRepository springTestRepository;\r\n    \r\n        @Override\r\n        public Test getEntity(Integer id, String firstName, String lastName) {\r\n            List&lt;Object[]&gt; list = springTestRepository.getEntity(id, firstName, lastName);\r\n            for (Object[] object : list) {\r\n                System.out.println(Arrays.toString(object));\r\n            }\r\n            return null;//springTestRepository.getEntity(id, firstName, lastName);\r\n        }\r\n    }","title":"Spring Data JPA get multiple result set","body":"<p>I try to get the return value using JPA.\nBut my database Procedure returns multiple results, and JPA only gets the first return value. as the picture shows.\nThe result I want is the third one, but I only get the first one.\nHow to get the third one? Thanks.</p>\n<p><a href=\"https://i.stack.imgur.com/nWfs6.png\" rel=\"nofollow noreferrer\">Java Result</a>\n<a href=\"https://i.stack.imgur.com/Nlubt.png\" rel=\"nofollow noreferrer\">Database Result</a></p>\n<p><strong>Entity.java</strong></p>\n<pre><code>@Entity\n@NamedStoredProcedureQueries(\n        {\n                @NamedStoredProcedureQuery(\n                        name = &quot;SpringTestProcedure&quot;,\n                        procedureName = &quot;SpringTestProcedure&quot;,\n                        parameters = {\n                                @StoredProcedureParameter(mode = ParameterMode.IN, name = &quot;id&quot;, type = Test.class),\n                                @StoredProcedureParameter(mode = ParameterMode.IN, name = &quot;firstName&quot;, type = Test.class),\n                                @StoredProcedureParameter(mode = ParameterMode.IN, name = &quot;lastName&quot;, type = Test.class)\n                        }\n                )\n        }\n)\n\n@Table(name = &quot;Users&quot;)\npublic class Test {\n\npublic Test() {\n}\n\npublic Test(Integer id, String firstName, String lastName) {\n    this.id = id;\n    this.firstName = firstName;\n    this.lastName = lastName;\n}\n\n@Id\n@GeneratedValue(strategy = GenerationType.IDENTITY)\n@Column(name = &quot;id&quot;)\nprivate Integer id;\n\n@Column(name = &quot;firstName&quot;)\nprivate String firstName;\n\n@Column(name = &quot;lastName&quot;)\nprivate String lastName;\n\npublic Integer getId() {\n    return id;\n}\n\npublic void setId(Integer id) {\n    this.id = id;\n}\n\npublic String getFirstName() {\n    return firstName;\n}\n\npublic void setFirstName(String firstName) {\n    this.firstName = firstName;\n}\n\npublic String getLastName() {\n    return lastName;\n}\n\npublic void setLastName(String lastName) {\n    this.lastName = lastName;\n}\n</code></pre>\n<p>}</p>\n<p><strong>Repository.java</strong></p>\n<pre><code> @Repository\npublic interface SpringTestRepository extends JpaRepository&lt;Test, Integer&gt; {\n\n    @Procedure(procedureName = &quot;SpringTestProcedure&quot;)\n    public List&lt;Object[]&gt; getEntity(@Param(&quot;id&quot;) Integer id,\n                                    @Param(&quot;firstName&quot;) String firstName,\n                                    @Param(&quot;lastName&quot;) String lastName);\n\n}\n</code></pre>\n<p><strong>ServiceImpl.java</strong></p>\n<pre><code>@Service\npublic class SpringTestServiceImpl implements SpringTestService {\n\n    @Autowired\n    private SpringTestRepository springTestRepository;\n\n    @Override\n    public Test getEntity(Integer id, String firstName, String lastName) {\n        List&lt;Object[]&gt; list = springTestRepository.getEntity(id, firstName, lastName);\n        for (Object[] object : list) {\n            System.out.println(Arrays.toString(object));\n        }\n        return null;//springTestRepository.getEntity(id, firstName, lastName);\n    }\n}\n</code></pre>\n"},{"tags":["javascript","java","angular","spring-boot","security"],"answers":[{"tags":[],"owner":{"account_id":1731741,"reputation":1982,"user_id":1585218,"accept_rate":83,"display_name":"Krenom"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695019222,"creation_date":1695019222,"answer_id":77125017,"question_id":77117885,"body_markdown":"Simplest answer, but not necessarily the simplest implementation would be to implement your own kind of login wrapper.\r\n\r\nAssuming your user has logged in and you have a shiny token that passes all validation, you could use that as your apps own login credentials (stick with me).\r\n\r\nUsing JWT or cookies or sessions or &lt;insert any number of server/ui secure comms words you want&gt; you can set up your own system that doesn&#39;t actually use the 3rd party token at all.\r\n\r\nI personally use JWTs - that would work well for this; if you really wanted, you could include the 3rd party token as an extra claim in the JWT payload if you have need of using it in the future.\r\n\r\nTo be honest, though, once a 3rd party has said the user has successfully logged in, there&#39;s no reason to worry about using that token in the rest of your app unless you plan on using it to do other things with that 3rd party on the users behalf.\r\n\r\nThus, use the token - rather than the users direct credentials - as proof of login and go ahead and populate your own JWT (or something else) and use that.\r\n\r\n\r\nAlternatively, do it yourself and generate some signed value that you attach and check in your headers when communicating based on the token. If the claims have been altered, the signature won&#39;t pass validation and you know it&#39;s been tampered with. (This is, essentially, what JWT is/does - a data set that&#39;s been signed so you know if any of the values have been modified).","title":"Retrieving roles from back-end without jwt","body":"<p>Simplest answer, but not necessarily the simplest implementation would be to implement your own kind of login wrapper.</p>\n<p>Assuming your user has logged in and you have a shiny token that passes all validation, you could use that as your apps own login credentials (stick with me).</p>\n<p>Using JWT or cookies or sessions or &lt;insert any number of server/ui secure comms words you want&gt; you can set up your own system that doesn't actually use the 3rd party token at all.</p>\n<p>I personally use JWTs - that would work well for this; if you really wanted, you could include the 3rd party token as an extra claim in the JWT payload if you have need of using it in the future.</p>\n<p>To be honest, though, once a 3rd party has said the user has successfully logged in, there's no reason to worry about using that token in the rest of your app unless you plan on using it to do other things with that 3rd party on the users behalf.</p>\n<p>Thus, use the token - rather than the users direct credentials - as proof of login and go ahead and populate your own JWT (or something else) and use that.</p>\n<p>Alternatively, do it yourself and generate some signed value that you attach and check in your headers when communicating based on the token. If the claims have been altered, the signature won't pass validation and you know it's been tampered with. (This is, essentially, what JWT is/does - a data set that's been signed so you know if any of the values have been modified).</p>\n"}],"owner":{"account_id":28041596,"reputation":19,"user_id":21419073,"display_name":"ELMOURABIT OJ"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":30,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1695019222,"creation_date":1694869443,"question_id":77117885,"body_markdown":"My goal is to provide the user roles from the backend ,for example if the user wants to see my ressources in my backend he can login with google and the angular app takes the access token retrieved from google authorization server and send it back to my ressource server and the backend checks the token but the problem is the access token of provided by google doesn&#39;t claims named roles so basically I should retrieve roles from the database and then send it back to the front end ,my problem is on the front side because even I secured the backend by modifying the security context authoroties I still have problem in the front because it&#39;s not secure if someone modified the reponse ha can change his roles what should I do\r\n\r\n    package com.example.ressource_server.config;\r\n    \r\n    import org.springframework.context.annotation.Bean;\r\n    import org.springframework.context.annotation.Configuration;\r\n    import org.springframework.security.config.annotation.web.builders.HttpSecurity;\r\n    import org.springframework.security.config.annotation.web.configuration.EnableWebSecurity;\r\n    import org.springframework.security.web.SecurityFilterChain;\r\n    \r\n    @Configuration\r\n    @EnableWebSecurity\r\n    public class SecurityConfig {\r\n        @Bean\r\n        public SecurityFilterChain securityFilterChain(HttpSecurity httpSecurity) throws Exception{\r\n            httpSecurity.oauth2ResourceServer( r-&gt; r.jwt(jwtConfigurer -&gt; jwtConfigurer.jwkSetUri(&quot;https://www.googleapis.com/oauth2/v3/certs&quot;)));\r\n            httpSecurity.authorizeHttpRequests(auth -&gt; auth.anyRequest().authenticated());\r\n            return httpSecurity.build();\r\n        }\r\n    }\r\n\r\n","title":"Retrieving roles from back-end without jwt","body":"<p>My goal is to provide the user roles from the backend ,for example if the user wants to see my ressources in my backend he can login with google and the angular app takes the access token retrieved from google authorization server and send it back to my ressource server and the backend checks the token but the problem is the access token of provided by google doesn't claims named roles so basically I should retrieve roles from the database and then send it back to the front end ,my problem is on the front side because even I secured the backend by modifying the security context authoroties I still have problem in the front because it's not secure if someone modified the reponse ha can change his roles what should I do</p>\n<pre><code>package com.example.ressource_server.config;\n\nimport org.springframework.context.annotation.Bean;\nimport org.springframework.context.annotation.Configuration;\nimport org.springframework.security.config.annotation.web.builders.HttpSecurity;\nimport org.springframework.security.config.annotation.web.configuration.EnableWebSecurity;\nimport org.springframework.security.web.SecurityFilterChain;\n\n@Configuration\n@EnableWebSecurity\npublic class SecurityConfig {\n    @Bean\n    public SecurityFilterChain securityFilterChain(HttpSecurity httpSecurity) throws Exception{\n        httpSecurity.oauth2ResourceServer( r-&gt; r.jwt(jwtConfigurer -&gt; jwtConfigurer.jwkSetUri(&quot;https://www.googleapis.com/oauth2/v3/certs&quot;)));\n        httpSecurity.authorizeHttpRequests(auth -&gt; auth.anyRequest().authenticated());\n        return httpSecurity.build();\n    }\n}\n</code></pre>\n"},{"tags":["java","postgresql","enums","annotations","hibernate-mapping"],"comments":[{"owner":{"account_id":20707,"reputation":30822,"user_id":49746,"display_name":"Todd"},"score":12,"creation_date":1420566038,"post_id":27804069,"comment_id":44017146,"body_markdown":"This is a very well written question. I wish more questions would clearly state the problem, show relevant code, and show attempts at resolution. Well done.","body":"This is a very well written question. I wish more questions would clearly state the problem, show relevant code, and show attempts at resolution. Well done."},{"owner":{"account_id":5354120,"reputation":257,"user_id":4310259,"accept_rate":100,"display_name":"bretmattingly"},"score":0,"creation_date":1487095662,"post_id":27804069,"comment_id":71625996,"body_markdown":"As of 14 Feb 2017, @cslotty&#39;s link is dead.","body":"As of 14 Feb 2017, @cslotty&#39;s link is dead."},{"owner":{"account_id":7753338,"reputation":1218,"user_id":5985343,"display_name":"jmizv"},"score":1,"creation_date":1683201381,"post_id":27804069,"comment_id":134331981,"body_markdown":"I second Todd&#39;s comment and will also add a helpful link to medium where I got my solution from: https://prateek-ashtikar512.medium.com/how-to-map-java-enum-to-postgresql-enum-type-fcb3f81a7c42. There I didn&#39;t need to add Hypersistence Util, but only a `package-info.java`.","body":"I second Todd&#39;s comment and will also add a helpful link to medium where I got my solution from: <a href=\"https://prateek-ashtikar512.medium.com/how-to-map-java-enum-to-postgresql-enum-type-fcb3f81a7c42\" rel=\"nofollow noreferrer\">prateek-ashtikar512.medium.com/&hellip;</a>. There I didn&#39;t need to add Hypersistence Util, but only a <code>package-info.java</code>."}],"answers":[{"tags":[],"owner":{"account_id":1097106,"reputation":1744,"user_id":1090474,"accept_rate":100,"display_name":"Kenny Linsky"},"down_vote_count":1,"up_vote_count":10,"is_accepted":true,"score":9,"last_activity_date":1424808148,"creation_date":1420580951,"answer_id":27807765,"question_id":27804069,"body_markdown":"##HQL\r\nAliasing correctly and using the *qualified property name* was the first part of the solution.\r\n\r\n\t&lt;query name=&quot;getAllMoves&quot;&gt;\r\n   \t\t&lt;![CDATA[\r\n   \t\t\tfrom Move as move\r\n   \t\t\twhere move.directionToMove = :direction\r\n   \t\t]]&gt;\r\n\t&lt;/query&gt;\r\n\r\n##Hibernate mapping\r\n`@Enumerated(EnumType.STRING)` still didn&#39;t work, so a custom `UserType` was necessary. The key was to correctly override `nullSafeSet` like in this answer https://stackoverflow.com/a/7614642/1090474 and [similar](https://anismiles.wordpress.com/2010/08/04/postgres-enum-with-hibernate/) [implementations](https://github.com/JadiraOrg/jadira/issues/14) from the web.\r\n\r\n\t@Override\r\n    public void nullSafeSet(PreparedStatement st, Object value, int index, SessionImplementor session) throws HibernateException, SQLException {\r\n        if (value == null) {\r\n            st.setNull(index, Types.VARCHAR);\r\n        }\r\n        else {\r\n            st.setObject(index, ((Enum) value).name(), Types.OTHER);\r\n        }\r\n    }\r\n\r\n##Detour\r\n`implements ParameterizedType` wasn&#39;t cooperating:\r\n\r\n    org.hibernate.MappingException: type is not parameterized: full.path.to.PGEnumUserType\r\n    \r\nso I wasn&#39;t able to annotate the enum property like this:\r\n\r\n\t@Type(type = &quot;full.path.to.PGEnumUserType&quot;,\r\n\t\t\tparameters = {\r\n\t\t\t\t\t@Parameter(name = &quot;enumClass&quot;, value = &quot;full.path.to.Move$Direction&quot;)\r\n\t\t\t}\r\n\t)\r\n\r\nInstead, I declared the class like so:\r\n\r\n    public class PGEnumUserType&lt;E extends Enum&lt;E&gt;&gt; implements UserType\r\n\r\nwith a constructor:\r\n\r\n\tpublic PGEnumUserType(Class&lt;E&gt; enumClass) {\r\n    \tthis.enumClass = enumClass;\r\n    }\r\n    \r\nwhich, unfortunately, means any other enum property similarly mapped will need a class like this:\r\n\r\n\tpublic class HibernateDirectionUserType extends PGEnumUserType&lt;Direction&gt; {\r\n\t\tpublic HibernateDirectionUserType() {\r\n\t\t\tsuper(Direction.class);\r\n\t\t}\r\n\t}\r\n\r\n##Annotation\r\nAnnotate the property and you&#39;re done.\r\n\r\n\t@Column(name = &quot;directiontomove&quot;, nullable = false)\r\n\t@Type(type = &quot;full.path.to.HibernateDirectionUserType&quot;)\r\n    private Direction directionToMove;\r\n\r\n##Other notes\r\n* `EnhancedUserType` and the three methods it wants implemented\r\n\r\n\t\tpublic String objectToSQLString(Object value)\r\n\t\tpublic String toXMLString(Object value)\r\n\t\tpublic String objectToSQLString(Object value)\r\n\t\r\n\tdidn&#39;t make any difference I could see, so I stuck with `implements UserType`.\r\n* Depending on how you&#39;re using the class, it might not be strictly necessary to make it postgres-specific by overriding `nullSafeGet` in the way the two linked solutions did.\r\n* If you&#39;re willing to give up the postgres enum, you can make the column `text` and the original code will work without extra work.","title":"Hibernate mapping between PostgreSQL enum and Java enum","body":"<h2>HQL</h2>\n\n<p>Aliasing correctly and using the <em>qualified property name</em> was the first part of the solution.</p>\n\n<pre><code>&lt;query name=\"getAllMoves\"&gt;\n    &lt;![CDATA[\n        from Move as move\n        where move.directionToMove = :direction\n    ]]&gt;\n&lt;/query&gt;\n</code></pre>\n\n<h2>Hibernate mapping</h2>\n\n<p><code>@Enumerated(EnumType.STRING)</code> still didn't work, so a custom <code>UserType</code> was necessary. The key was to correctly override <code>nullSafeSet</code> like in this answer <a href=\"https://stackoverflow.com/a/7614642/1090474\">https://stackoverflow.com/a/7614642/1090474</a> and <a href=\"https://anismiles.wordpress.com/2010/08/04/postgres-enum-with-hibernate/\" rel=\"nofollow noreferrer\">similar</a> <a href=\"https://github.com/JadiraOrg/jadira/issues/14\" rel=\"nofollow noreferrer\">implementations</a> from the web.</p>\n\n<pre><code>@Override\npublic void nullSafeSet(PreparedStatement st, Object value, int index, SessionImplementor session) throws HibernateException, SQLException {\n    if (value == null) {\n        st.setNull(index, Types.VARCHAR);\n    }\n    else {\n        st.setObject(index, ((Enum) value).name(), Types.OTHER);\n    }\n}\n</code></pre>\n\n<h2>Detour</h2>\n\n<p><code>implements ParameterizedType</code> wasn't cooperating:</p>\n\n<pre><code>org.hibernate.MappingException: type is not parameterized: full.path.to.PGEnumUserType\n</code></pre>\n\n<p>so I wasn't able to annotate the enum property like this:</p>\n\n<pre><code>@Type(type = \"full.path.to.PGEnumUserType\",\n        parameters = {\n                @Parameter(name = \"enumClass\", value = \"full.path.to.Move$Direction\")\n        }\n)\n</code></pre>\n\n<p>Instead, I declared the class like so:</p>\n\n<pre><code>public class PGEnumUserType&lt;E extends Enum&lt;E&gt;&gt; implements UserType\n</code></pre>\n\n<p>with a constructor:</p>\n\n<pre><code>public PGEnumUserType(Class&lt;E&gt; enumClass) {\n    this.enumClass = enumClass;\n}\n</code></pre>\n\n<p>which, unfortunately, means any other enum property similarly mapped will need a class like this:</p>\n\n<pre><code>public class HibernateDirectionUserType extends PGEnumUserType&lt;Direction&gt; {\n    public HibernateDirectionUserType() {\n        super(Direction.class);\n    }\n}\n</code></pre>\n\n<h2>Annotation</h2>\n\n<p>Annotate the property and you're done.</p>\n\n<pre><code>@Column(name = \"directiontomove\", nullable = false)\n@Type(type = \"full.path.to.HibernateDirectionUserType\")\nprivate Direction directionToMove;\n</code></pre>\n\n<h2>Other notes</h2>\n\n<ul>\n<li><p><code>EnhancedUserType</code> and the three methods it wants implemented</p>\n\n<pre><code>public String objectToSQLString(Object value)\npublic String toXMLString(Object value)\npublic String objectToSQLString(Object value)\n</code></pre>\n\n<p>didn't make any difference I could see, so I stuck with <code>implements UserType</code>.</p></li>\n<li>Depending on how you're using the class, it might not be strictly necessary to make it postgres-specific by overriding <code>nullSafeGet</code> in the way the two linked solutions did.</li>\n<li>If you're willing to give up the postgres enum, you can make the column <code>text</code> and the original code will work without extra work.</li>\n</ul>\n"},{"tags":[],"owner":{"account_id":970256,"reputation":892,"user_id":992940,"accept_rate":67,"display_name":"Dmitrii Bocharov"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1422305002,"creation_date":1422305002,"answer_id":28158395,"question_id":27804069,"body_markdown":"As said in [8.7.3. Type Safety of Postgres Docs][1]:\r\n\r\n&gt; If you really need to do something like that, you can either write a custom operator or add explicit casts to your query:\r\n\r\nso if you want a quick and simple workaround, do like this:\r\n\r\n    &lt;query name=&quot;getAllMoves&quot;&gt;\r\n    &lt;![CDATA[\r\n        select move from Move move\r\n        where cast(directiontomove as text) = cast(:directionToMove as text)\r\n    ]]&gt;\r\n    &lt;/query&gt;\r\n\r\nUnfortunately, [you can&#39;t do it simply with two colons][2]: \r\n\r\n\r\n  [1]: http://www.postgresql.org/docs/9.2/static/datatype-enum.html\r\n  [2]: https://stackoverflow.com/questions/7475876/using-hibernate-query-colon-gets-treated-as-parameter-escaping-colon","title":"Hibernate mapping between PostgreSQL enum and Java enum","body":"<p>As said in <a href=\"http://www.postgresql.org/docs/9.2/static/datatype-enum.html\" rel=\"nofollow noreferrer\">8.7.3. Type Safety of Postgres Docs</a>:</p>\n\n<blockquote>\n  <p>If you really need to do something like that, you can either write a custom operator or add explicit casts to your query:</p>\n</blockquote>\n\n<p>so if you want a quick and simple workaround, do like this:</p>\n\n<pre><code>&lt;query name=\"getAllMoves\"&gt;\n&lt;![CDATA[\n    select move from Move move\n    where cast(directiontomove as text) = cast(:directionToMove as text)\n]]&gt;\n&lt;/query&gt;\n</code></pre>\n\n<p>Unfortunately, <a href=\"https://stackoverflow.com/questions/7475876/using-hibernate-query-colon-gets-treated-as-parameter-escaping-colon\">you can't do it simply with two colons</a>: </p>\n"},{"tags":[],"owner":{"account_id":3055283,"reputation":54,"user_id":2589062,"display_name":"lew"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1582702073,"creation_date":1430245714,"answer_id":29927156,"question_id":27804069,"body_markdown":"Let me start off saying I was able to do this using Hibernate 4.3.x and Postgres 9.x.\r\n\r\nI based my solution off something similar to what you did.  I believe if you combine\r\n\r\n    @Type(type = &quot;org.hibernate.type.EnumType&quot;,\r\n    parameters = {\r\n            @Parameter(name  = &quot;enumClass&quot;, value = &quot;full.path.to.Move$Direction&quot;),\r\n            @Parameter(name = &quot;type&quot;, value = &quot;12&quot;),\r\n            @Parameter(name = &quot;useNamed&quot;, value = &quot;true&quot;)\r\n    })\r\n\r\nand this\r\n\r\n    @Override\r\n    public void nullSafeSet(PreparedStatement st, Object value, int index, SessionImplementor session) throws HibernateException, SQLException {\r\n      if (value == null) {\r\n        st.setNull(index, Types.VARCHAR);\r\n      }\r\n      else {\r\n        st.setObject(index, ((Enum) value).name(), Types.OTHER);\r\n      }\r\n    }\r\n\r\nYou should be able to get something along the lines of this, without having to make either above change.\r\n\r\n    @Type(type = &quot;org.hibernate.type.EnumType&quot;,\r\n    parameters = {\r\n            @Parameter(name  = &quot;enumClass&quot;, value = &quot;full.path.to.Move$Direction&quot;),\r\n            @Parameter(name = &quot;type&quot;, value = &quot;1111&quot;),\r\n            @Parameter(name = &quot;useNamed&quot;, value = &quot;true&quot;)\r\n    })\r\n\r\nI believe that this works since you&#39;re essentially telling Hibernate to map the enum to a type of other (```Types.OTHER == 1111```).  It may be a slightly brittle solution since the value of ```Types.OTHER``` could change.  However, this would provide significantly less code overall.","title":"Hibernate mapping between PostgreSQL enum and Java enum","body":"<p>Let me start off saying I was able to do this using Hibernate 4.3.x and Postgres 9.x.</p>\n\n<p>I based my solution off something similar to what you did.  I believe if you combine</p>\n\n<pre><code>@Type(type = \"org.hibernate.type.EnumType\",\nparameters = {\n        @Parameter(name  = \"enumClass\", value = \"full.path.to.Move$Direction\"),\n        @Parameter(name = \"type\", value = \"12\"),\n        @Parameter(name = \"useNamed\", value = \"true\")\n})\n</code></pre>\n\n<p>and this</p>\n\n<pre><code>@Override\npublic void nullSafeSet(PreparedStatement st, Object value, int index, SessionImplementor session) throws HibernateException, SQLException {\n  if (value == null) {\n    st.setNull(index, Types.VARCHAR);\n  }\n  else {\n    st.setObject(index, ((Enum) value).name(), Types.OTHER);\n  }\n}\n</code></pre>\n\n<p>You should be able to get something along the lines of this, without having to make either above change.</p>\n\n<pre><code>@Type(type = \"org.hibernate.type.EnumType\",\nparameters = {\n        @Parameter(name  = \"enumClass\", value = \"full.path.to.Move$Direction\"),\n        @Parameter(name = \"type\", value = \"1111\"),\n        @Parameter(name = \"useNamed\", value = \"true\")\n})\n</code></pre>\n\n<p>I believe that this works since you're essentially telling Hibernate to map the enum to a type of other (<code>Types.OTHER == 1111</code>).  It may be a slightly brittle solution since the value of <code>Types.OTHER</code> could change.  However, this would provide significantly less code overall.</p>\n"},{"tags":[],"owner":{"account_id":1012936,"reputation":145168,"user_id":1025118,"accept_rate":100,"display_name":"Vlad Mihalcea"},"down_vote_count":1,"up_vote_count":67,"is_accepted":false,"score":66,"last_activity_date":1695019218,"creation_date":1505831348,"answer_id":46303099,"question_id":27804069,"body_markdown":"You can simply get these types via Maven Central using the [Hypersistence Util](https://github.com/vladmihalcea/hypersistence-utils) dependency:\r\n\r\n    &lt;dependency&gt;\r\n        &lt;groupId&gt;io.hypersistence&lt;/groupId&gt;\r\n        &lt;artifactId&gt;hypersistence-utils-hibernate-55&lt;/artifactId&gt;\r\n        &lt;version&gt;${hibernate-types.version}&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n\r\nNext, you need to annotate the field with the Hibernate `@Type` annotation, as illustrated in the following examples.\r\n\r\nHibernate 6\r\n-----------\r\n\r\nIf you&#39;re using Hibernate 6, map it like this:\r\n\r\n    @Entity(name = &quot;Post&quot;)\r\n    @Table(name = &quot;post&quot;)\r\n    public static class Post {\r\n     \r\n        @Id\r\n        private Long id;\r\n     \r\n        private String title;\r\n     \r\n        @Enumerated(EnumType.STRING)\r\n        @Column(columnDefinition = &quot;post_status_info&quot;)\r\n        @Type(PostgreSQLEnumType.class)\r\n        private PostStatus status;\r\n     \r\n        //Getters and setters omitted for brevity\r\n    }\r\n\r\nHere&#39;s [an example on GitHub](https://github.com/vladmihalcea/hypersistence-utils/blob/9a397d939d3034c992e999a56eb8f893d1ce35e5/hypersistence-utils-hibernate-62/src/test/java/io/hypersistence/utils/hibernate/type/basic/PostgreSQLEnumTest.java#L36) that shows how it works with Hibernate 6.2.\r\n\r\nHibernate 5\r\n-----------\r\n\r\nIf you&#39;re using Hibernate 5, map it like this:\r\n\r\n    @Entity(name = &quot;Post&quot;)\r\n    @Table(name = &quot;post&quot;)\r\n    @TypeDef(\r\n        name = &quot;pgsql_enum&quot;,\r\n        typeClass = PostgreSQLEnumType.class\r\n    )\r\n    public static class Post {\r\n     \r\n        @Id\r\n        private Long id;\r\n     \r\n        private String title;\r\n     \r\n        @Enumerated(EnumType.STRING)\r\n        @Column(columnDefinition = &quot;post_status_info&quot;)\r\n        @Type(type = &quot;pgsql_enum&quot;)\r\n        private PostStatus status;\r\n     \r\n        //Getters and setters omitted for brevity\r\n    }\r\n\r\nHere&#39;s [an example on GitHub](https://github.com/vladmihalcea/hypersistence-utils/blob/9a397d939d3034c992e999a56eb8f893d1ce35e5/hypersistence-utils-hibernate-55/src/test/java/io/hypersistence/utils/hibernate/type/basic/PostgreSQLEnumTest.java#L121) that shows how it works with Hibernate 5.6.\r\n\r\nThis mapping assumes you have the `post_status_info` enum type in PostgreSQL:\r\n\r\n    CREATE TYPE post_status_info AS ENUM (\r\n        &#39;PENDING&#39;, \r\n        &#39;APPROVED&#39;, \r\n        &#39;SPAM&#39;\r\n    )\r\n\r\nThat&#39;s it.","title":"Hibernate mapping between PostgreSQL enum and Java enum","body":"<p>You can simply get these types via Maven Central using the <a href=\"https://github.com/vladmihalcea/hypersistence-utils\" rel=\"noreferrer\">Hypersistence Util</a> dependency:</p>\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;io.hypersistence&lt;/groupId&gt;\n    &lt;artifactId&gt;hypersistence-utils-hibernate-55&lt;/artifactId&gt;\n    &lt;version&gt;${hibernate-types.version}&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n<p>Next, you need to annotate the field with the Hibernate <code>@Type</code> annotation, as illustrated in the following examples.</p>\n<h2>Hibernate 6</h2>\n<p>If you're using Hibernate 6, map it like this:</p>\n<pre><code>@Entity(name = &quot;Post&quot;)\n@Table(name = &quot;post&quot;)\npublic static class Post {\n \n    @Id\n    private Long id;\n \n    private String title;\n \n    @Enumerated(EnumType.STRING)\n    @Column(columnDefinition = &quot;post_status_info&quot;)\n    @Type(PostgreSQLEnumType.class)\n    private PostStatus status;\n \n    //Getters and setters omitted for brevity\n}\n</code></pre>\n<p>Here's <a href=\"https://github.com/vladmihalcea/hypersistence-utils/blob/9a397d939d3034c992e999a56eb8f893d1ce35e5/hypersistence-utils-hibernate-62/src/test/java/io/hypersistence/utils/hibernate/type/basic/PostgreSQLEnumTest.java#L36\" rel=\"noreferrer\">an example on GitHub</a> that shows how it works with Hibernate 6.2.</p>\n<h2>Hibernate 5</h2>\n<p>If you're using Hibernate 5, map it like this:</p>\n<pre><code>@Entity(name = &quot;Post&quot;)\n@Table(name = &quot;post&quot;)\n@TypeDef(\n    name = &quot;pgsql_enum&quot;,\n    typeClass = PostgreSQLEnumType.class\n)\npublic static class Post {\n \n    @Id\n    private Long id;\n \n    private String title;\n \n    @Enumerated(EnumType.STRING)\n    @Column(columnDefinition = &quot;post_status_info&quot;)\n    @Type(type = &quot;pgsql_enum&quot;)\n    private PostStatus status;\n \n    //Getters and setters omitted for brevity\n}\n</code></pre>\n<p>Here's <a href=\"https://github.com/vladmihalcea/hypersistence-utils/blob/9a397d939d3034c992e999a56eb8f893d1ce35e5/hypersistence-utils-hibernate-55/src/test/java/io/hypersistence/utils/hibernate/type/basic/PostgreSQLEnumTest.java#L121\" rel=\"noreferrer\">an example on GitHub</a> that shows how it works with Hibernate 5.6.</p>\n<p>This mapping assumes you have the <code>post_status_info</code> enum type in PostgreSQL:</p>\n<pre><code>CREATE TYPE post_status_info AS ENUM (\n    'PENDING', \n    'APPROVED', \n    'SPAM'\n)\n</code></pre>\n<p>That's it.</p>\n"},{"tags":[],"owner":{"account_id":981832,"reputation":480,"user_id":1635535,"accept_rate":67,"display_name":"Marko Novakovic"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1635598060,"creation_date":1533223966,"answer_id":51657399,"question_id":27804069,"body_markdown":"I have another approach with a persistence converter:\r\n\r\n    import javax.persistence.Column;\r\n    import javax.persistence.Convert;\r\n    \r\n    @Column(name = &quot;direction&quot;, nullable = false)\r\n    @Convert(converter = DirectionConverter.class)\r\n    private Direction directionToMove;\r\n\r\nThis is a converter definition:\r\n\r\n    import javax.persistence.AttributeConverter;\r\n    import javax.persistence.Converter;\r\n    \r\n    @Converter\r\n    public class DirectionConverter implements AttributeConverter&lt;Direction, String&gt; {\r\n        @Override\r\n        public String convertToDatabaseColumn(Direction direction) {\r\n            return direction.name();\r\n        }\r\n    \r\n        @Override\r\n        public Direction convertToEntityAttribute(String string) {\r\n            return Diretion.valueOf(string);\r\n        }\r\n    }\r\n\r\nIt does not resolve mapping to psql enum type, but it can simulate @Enumerated(EnumType.STRING) or @Enumerated(EnumType.ORDINAL) in a good way.\r\n\r\nFor ordinal use direction.ordinal() and Direction.values()[number].","title":"Hibernate mapping between PostgreSQL enum and Java enum","body":"<p>I have another approach with a persistence converter:</p>\n<pre><code>import javax.persistence.Column;\nimport javax.persistence.Convert;\n\n@Column(name = &quot;direction&quot;, nullable = false)\n@Convert(converter = DirectionConverter.class)\nprivate Direction directionToMove;\n</code></pre>\n<p>This is a converter definition:</p>\n<pre><code>import javax.persistence.AttributeConverter;\nimport javax.persistence.Converter;\n\n@Converter\npublic class DirectionConverter implements AttributeConverter&lt;Direction, String&gt; {\n    @Override\n    public String convertToDatabaseColumn(Direction direction) {\n        return direction.name();\n    }\n\n    @Override\n    public Direction convertToEntityAttribute(String string) {\n        return Diretion.valueOf(string);\n    }\n}\n</code></pre>\n<p>It does not resolve mapping to psql enum type, but it can simulate @Enumerated(EnumType.STRING) or @Enumerated(EnumType.ORDINAL) in a good way.</p>\n<p>For ordinal use direction.ordinal() and Direction.values()[number].</p>\n"},{"tags":[],"owner":{"account_id":7714704,"reputation":11,"user_id":5842884,"display_name":"vvserdiuk"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1694009494,"creation_date":1694009494,"answer_id":77052732,"question_id":27804069,"body_markdown":"**Hibernate &lt; 6.3 version**\r\n\r\n    @Enumerated(EnumType.STRING)\r\n    @ColumnTransformer(write = &quot;?::yours_enum_type&quot;)\r\n    private YoursEnumType enumType;\r\n\r\n**Hibernate 6.3**\r\n\r\nLooks like it&#39;s supported out of the box since 6.3.0.\r\nhttps://hibernate.atlassian.net/browse/HHH-16125","title":"Hibernate mapping between PostgreSQL enum and Java enum","body":"<p><strong>Hibernate &lt; 6.3 version</strong></p>\n<pre><code>@Enumerated(EnumType.STRING)\n@ColumnTransformer(write = &quot;?::yours_enum_type&quot;)\nprivate YoursEnumType enumType;\n</code></pre>\n<p><strong>Hibernate 6.3</strong></p>\n<p>Looks like it's supported out of the box since 6.3.0.\n<a href=\"https://hibernate.atlassian.net/browse/HHH-16125\" rel=\"nofollow noreferrer\">https://hibernate.atlassian.net/browse/HHH-16125</a></p>\n"}],"owner":{"account_id":1097106,"reputation":1744,"user_id":1090474,"accept_rate":100,"display_name":"Kenny Linsky"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":33716,"favorite_count":0,"down_vote_count":0,"up_vote_count":46,"accepted_answer_id":27807765,"answer_count":6,"score":46,"last_activity_date":1695019218,"creation_date":1420565802,"question_id":27804069,"body_markdown":"##Background\r\n* Spring 3.x, JPA 2.0, Hibernate 4.x, Postgresql 9.x.\r\n* Working on a Hibernate mapped class with an enum property that I want to map to a Postgresql enum.\r\n\r\n##Problem\r\nQuerying with a where clause on the enum column throws an exception.\r\n\r\n    org.hibernate.exception.SQLGrammarException: could not extract ResultSet\r\n    ...\t\r\n    Caused by: org.postgresql.util.PSQLException: ERROR: operator does not exist: movedirection = bytea\r\n      Hint: No operator matches the given name and argument type(s). You might need to add explicit type casts.\r\n\r\n##Code (heavily simplified)\r\n\r\nSQL:\r\n\r\n    create type movedirection as enum (\r\n    \t&#39;FORWARD&#39;, &#39;LEFT&#39;\r\n    );\r\n    \r\n    CREATE TABLE move\r\n    (\r\n    \tid serial NOT NULL PRIMARY KEY,\r\n    \tdirectiontomove movedirection NOT NULL\r\n    );\r\n\r\nHibernate mapped class:\r\n\r\n    @Entity\r\n    @Table(name = &quot;move&quot;)\r\n    public class Move {\r\n\r\n        public enum Direction {\r\n    \t\tFORWARD, LEFT;\r\n    \t}\r\n    \r\n    \t@Id\r\n    \t@Column(name = &quot;id&quot;)\r\n    \t@GeneratedValue(generator = &quot;sequenceGenerator&quot;, strategy=GenerationType.SEQUENCE)\r\n    \t@SequenceGenerator(name = &quot;sequenceGenerator&quot;, sequenceName = &quot;move_id_seq&quot;)\r\n    \tprivate long id;\r\n    \r\n    \t@Column(name = &quot;directiontomove&quot;, nullable = false)\r\n        @Enumerated(EnumType.STRING)\r\n    \tprivate Direction directionToMove;\r\n        ...\r\n\t\t// getters and setters\r\n    }\r\n\r\nJava that calls the query:\r\n\r\n    public List&lt;Move&gt; getMoves(Direction directionToMove) {\r\n    \treturn (List&lt;Direction&gt;) sessionFactory.getCurrentSession()\r\n    \t\t\t.getNamedQuery(&quot;getAllMoves&quot;)\r\n    \t\t\t.setParameter(&quot;directionToMove&quot;, directionToMove)\r\n    \t\t\t.list();\r\n    }\r\n\r\nHibernate xml query:\r\n\r\n    &lt;query name=&quot;getAllMoves&quot;&gt;\r\n   \t\t&lt;![CDATA[\r\n   \t\t\tselect move from Move move\r\n   \t\t\twhere directiontomove = :directionToMove\r\n   \t\t]]&gt;\r\n\t&lt;/query&gt;\r\n\r\n##Troubleshooting\r\n* Querying by `id` instead of the enum works as expected.\r\n* Java without database interaction works fine:\r\n\r\n        public List&lt;Move&gt; getMoves(Direction directionToMove) {\r\n\t\t\tList&lt;Move&gt; moves = new ArrayList&lt;&gt;();\r\n\t\t\tMove move1 = new Move();\r\n\t\t\tmove1.setDirection(directionToMove);\r\n\t\t\tmoves.add(move1);\r\n\t\t\treturn moves;\r\n\t\t}\r\n* `createQuery` instead of having the query in XML, similar to the `findByRating` example in [Apache&#39;s JPA and Enums via @Enumerated documentation](http://tomee.apache.org/examples-trunk/jpa-enumerated/README.html) gave the same exception.\r\n* Querying in psql with `select * from move where direction = &#39;LEFT&#39;;` works as expected.\r\n* **Hardcoding `where direction = &#39;FORWARD&#39;` in the query in the XML works.**\r\n* `.setParameter(&quot;direction&quot;, direction.name())` does not, same with `.setString()` and `.setText()`, exception changes to:\r\n\r\n        Caused by: org.postgresql.util.PSQLException: ERROR: operator does not exist: movedirection = character varying\r\n\r\n\r\n##Attempts at resolution\r\n* Custom `UserType` as suggested by this accepted answer https://stackoverflow.com/a/1594020/1090474 along with:\r\n    \r\n        @Column(name = &quot;direction&quot;, nullable = false)\r\n        @Enumerated(EnumType.STRING) // tried with and without this line\r\n        @Type(type = &quot;full.path.to.HibernateMoveDirectionUserType&quot;)\r\n        private Direction directionToMove;\r\n* Mapping with Hibernate&#39;s `EnumType` as suggested by a higher rated but not accepted answer https://stackoverflow.com/a/1604286/1090474 from the same question as above, along with:\r\n\r\n        @Type(type = &quot;org.hibernate.type.EnumType&quot;,\r\n\t\t\tparameters = {\r\n\t\t\t\t\t@Parameter(name  = &quot;enumClass&quot;, value = &quot;full.path.to.Move$Direction&quot;),\r\n\t\t\t\t\t@Parameter(name = &quot;type&quot;, value = &quot;12&quot;),\r\n\t\t\t\t\t@Parameter(name = &quot;useNamed&quot;, value = &quot;true&quot;)\r\n\t\t\t})\r\n    With and without the two second parameters, after seeing https://stackoverflow.com/a/13241410/1090474\r\n* Tried annotating the getter and setter like in this answer https://stackoverflow.com/a/20252215/1090474.\r\n* Haven&#39;t tried `EnumType.ORDINAL` because I want to stick with `EnumType.STRING`, which is less brittle and more flexible.\r\n\r\n##Other notes\r\nA JPA 2.1 Type Converter shouldn&#39;t be necessary, but isn&#39;t an option regardless, since I&#39;m on JPA 2.0 for now.","title":"Hibernate mapping between PostgreSQL enum and Java enum","body":"<h2>Background</h2>\n\n<ul>\n<li>Spring 3.x, JPA 2.0, Hibernate 4.x, Postgresql 9.x.</li>\n<li>Working on a Hibernate mapped class with an enum property that I want to map to a Postgresql enum.</li>\n</ul>\n\n<h2>Problem</h2>\n\n<p>Querying with a where clause on the enum column throws an exception.</p>\n\n<pre><code>org.hibernate.exception.SQLGrammarException: could not extract ResultSet\n... \nCaused by: org.postgresql.util.PSQLException: ERROR: operator does not exist: movedirection = bytea\n  Hint: No operator matches the given name and argument type(s). You might need to add explicit type casts.\n</code></pre>\n\n<h2>Code (heavily simplified)</h2>\n\n<p>SQL:</p>\n\n<pre><code>create type movedirection as enum (\n    'FORWARD', 'LEFT'\n);\n\nCREATE TABLE move\n(\n    id serial NOT NULL PRIMARY KEY,\n    directiontomove movedirection NOT NULL\n);\n</code></pre>\n\n<p>Hibernate mapped class:</p>\n\n<pre><code>@Entity\n@Table(name = \"move\")\npublic class Move {\n\n    public enum Direction {\n        FORWARD, LEFT;\n    }\n\n    @Id\n    @Column(name = \"id\")\n    @GeneratedValue(generator = \"sequenceGenerator\", strategy=GenerationType.SEQUENCE)\n    @SequenceGenerator(name = \"sequenceGenerator\", sequenceName = \"move_id_seq\")\n    private long id;\n\n    @Column(name = \"directiontomove\", nullable = false)\n    @Enumerated(EnumType.STRING)\n    private Direction directionToMove;\n    ...\n    // getters and setters\n}\n</code></pre>\n\n<p>Java that calls the query:</p>\n\n<pre><code>public List&lt;Move&gt; getMoves(Direction directionToMove) {\n    return (List&lt;Direction&gt;) sessionFactory.getCurrentSession()\n            .getNamedQuery(\"getAllMoves\")\n            .setParameter(\"directionToMove\", directionToMove)\n            .list();\n}\n</code></pre>\n\n<p>Hibernate xml query:</p>\n\n<pre><code>&lt;query name=\"getAllMoves\"&gt;\n    &lt;![CDATA[\n        select move from Move move\n        where directiontomove = :directionToMove\n    ]]&gt;\n&lt;/query&gt;\n</code></pre>\n\n<h2>Troubleshooting</h2>\n\n<ul>\n<li>Querying by <code>id</code> instead of the enum works as expected.</li>\n<li><p>Java without database interaction works fine:</p>\n\n<pre><code>public List&lt;Move&gt; getMoves(Direction directionToMove) {\n    List&lt;Move&gt; moves = new ArrayList&lt;&gt;();\n    Move move1 = new Move();\n    move1.setDirection(directionToMove);\n    moves.add(move1);\n    return moves;\n}\n</code></pre></li>\n<li><code>createQuery</code> instead of having the query in XML, similar to the <code>findByRating</code> example in <a href=\"http://tomee.apache.org/examples-trunk/jpa-enumerated/README.html\" rel=\"noreferrer\">Apache's JPA and Enums via @Enumerated documentation</a> gave the same exception.</li>\n<li>Querying in psql with <code>select * from move where direction = 'LEFT';</code> works as expected.</li>\n<li><strong>Hardcoding <code>where direction = 'FORWARD'</code> in the query in the XML works.</strong></li>\n<li><p><code>.setParameter(\"direction\", direction.name())</code> does not, same with <code>.setString()</code> and <code>.setText()</code>, exception changes to:</p>\n\n<pre><code>Caused by: org.postgresql.util.PSQLException: ERROR: operator does not exist: movedirection = character varying\n</code></pre></li>\n</ul>\n\n<h2>Attempts at resolution</h2>\n\n<ul>\n<li><p>Custom <code>UserType</code> as suggested by this accepted answer <a href=\"https://stackoverflow.com/a/1594020/1090474\">https://stackoverflow.com/a/1594020/1090474</a> along with:</p>\n\n<pre><code>@Column(name = \"direction\", nullable = false)\n@Enumerated(EnumType.STRING) // tried with and without this line\n@Type(type = \"full.path.to.HibernateMoveDirectionUserType\")\nprivate Direction directionToMove;\n</code></pre></li>\n<li><p>Mapping with Hibernate's <code>EnumType</code> as suggested by a higher rated but not accepted answer <a href=\"https://stackoverflow.com/a/1604286/1090474\">https://stackoverflow.com/a/1604286/1090474</a> from the same question as above, along with:</p>\n\n<pre><code>@Type(type = \"org.hibernate.type.EnumType\",\n    parameters = {\n            @Parameter(name  = \"enumClass\", value = \"full.path.to.Move$Direction\"),\n            @Parameter(name = \"type\", value = \"12\"),\n            @Parameter(name = \"useNamed\", value = \"true\")\n    })\n</code></pre>\n\n<p>With and without the two second parameters, after seeing <a href=\"https://stackoverflow.com/a/13241410/1090474\">https://stackoverflow.com/a/13241410/1090474</a></p></li>\n<li>Tried annotating the getter and setter like in this answer <a href=\"https://stackoverflow.com/a/20252215/1090474\">https://stackoverflow.com/a/20252215/1090474</a>.</li>\n<li>Haven't tried <code>EnumType.ORDINAL</code> because I want to stick with <code>EnumType.STRING</code>, which is less brittle and more flexible.</li>\n</ul>\n\n<h2>Other notes</h2>\n\n<p>A JPA 2.1 Type Converter shouldn't be necessary, but isn't an option regardless, since I'm on JPA 2.0 for now.</p>\n"},{"tags":["java","spring-boot","spring-batch","batch-processing"],"comments":[{"owner":{"account_id":25046168,"reputation":335,"user_id":18902563,"display_name":"skillup"},"score":0,"creation_date":1694809932,"post_id":77115002,"comment_id":135945090,"body_markdown":"You shoud use an ItemProcessorListener so you can create a class that implement the interface ItemProcessorListener  and after you can define your implementation ( beforeProcess &amp; afterProcess ). But in you code i see that you want to use beforeStep &amp; AfterStep in the class of your processor.","body":"You shoud use an ItemProcessorListener so you can create a class that implement the interface ItemProcessorListener  and after you can define your implementation ( beforeProcess &amp; afterProcess ). But in you code i see that you want to use beforeStep &amp; AfterStep in the class of your processor."},{"owner":{"account_id":9057139,"reputation":107,"user_id":6745028,"display_name":"Ramkumar S"},"score":0,"creation_date":1701998592,"post_id":77115002,"comment_id":136847082,"body_markdown":"I couldn&#39;t spring batch call the other &#39;processors&#39; before/after step. The above composite one it calls only the main processors and not the sub ones... So I re-wrote using single processor and delegated some of the work to other utility/processor helpers for now. Thanks for your response!","body":"I couldn&#39;t spring batch call the other &#39;processors&#39; before/after step. The above composite one it calls only the main processors and not the sub ones... So I re-wrote using single processor and delegated some of the work to other utility/processor helpers for now. Thanks for your response!"}],"answers":[{"tags":[],"owner":{"account_id":6482932,"reputation":29552,"user_id":5019386,"display_name":"Mahmoud Ben Hassine"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1695019186,"creation_date":1695019186,"answer_id":77125016,"question_id":77115002,"body_markdown":"This is because you are using a composite processor. You can only register one item processor in a step. As you can see, those methods were called for the composite.\r\n\r\nSo you either need to make your composite call those methods for the delegate processors, or manually register the delegate processors as listeners in the step.","title":"Before / After steps not called in Item processors of ClassifierCompositeItemProcessor","body":"<p>This is because you are using a composite processor. You can only register one item processor in a step. As you can see, those methods were called for the composite.</p>\n<p>So you either need to make your composite call those methods for the delegate processors, or manually register the delegate processors as listeners in the step.</p>\n"}],"owner":{"account_id":9057139,"reputation":107,"user_id":6745028,"display_name":"Ramkumar S"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":32,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1695019186,"creation_date":1694807212,"question_id":77115002,"body_markdown":"Here is the sample code block (I remove our stuff and kept only the skeleton code)\r\n\r\n```\r\npublic class ItemProcessor1 implements ItemProcessor{\r\n\r\n    private StepExecution stepExecution;\r\n\t\t\r\n    @BeforeStep **// Not called.**\r\n    public void beforeStep(final StepExecution stepExecution) {\r\n        this.stepExecution = stepExecution;\r\n    }\r\n\r\n    @AfterStep  **// Not called.**\r\n    public ExitStatus afterStep() {\r\n       return ExitStatus.COMPLETED;\r\n    }\r\n\r\n    @Override\r\n    public Record process(Record rec) throws Exception {\r\n\t    return super.process(rec);\r\n    }\r\n}\r\n\r\npublic class ItemProcessor2 implements ItemProcessor{\r\n\r\n    private StepExecution stepExecution;\r\n\t\t\r\n    @BeforeStep  **// Not called**.\r\n    public void beforeStep(final StepExecution stepExecution) {\r\n\t    this.stepExecution = stepExecution;\r\n    }\r\n\r\n    @AfterStep  **// Not called.**\r\n    public ExitStatus afterStep() {\r\n\t    return ExitStatus.COMPLETED;\r\n    }\r\n\r\n    @Override\r\n    public Record process(Record rec) throws Exception {\r\n\t    return super.process(rec);\r\n    }\r\n}\r\n\r\n@RequiredArgsConstructor\r\npublic class ItemProcessorRecordClassifier\r\n                            implements Classifier {\r\n\r\n    private final ItemProcessor1 itemProcessor1;\r\n    private final ItemProcessor2 itemProcessor2;\r\n    public ItemProcessor classify(Record record) {\r\n\t    return (record.getRowNum()%2==0) ? itemProcessor1 : itemProcessor2\r\n    }\r\n\r\n}\r\n\r\npublic class RecordClassifierCompositeItemProcessor extends ClassifierCompositeItemProcessor {\r\n\r\n    private StepExecution stepExecution;\r\n\t\t\r\n    @BeforeStep  // Called.\r\n    public void beforeStep(final StepExecution stepExecution) {\r\n\t    this.stepExecution = stepExecution;\r\n    }\r\n\r\n    @AfterStep  // Called.\r\n    public ExitStatus afterStep() {\r\n        return ExitStatus.COMPLETED;\r\n    }\r\n\r\n    @Override\r\n    public Record process(Record rec) throws Exception {\r\n\t    return super.process(rec);\r\n    }\r\n}\r\n\r\n//Config\r\n\r\n@Bean\r\n// @StepScope\r\npublic ItemProcessor1 itemProcessor1() {\r\n\treturn new ItemProcessor1();\r\n}\r\n\r\n@Bean\r\n// @StepScope\r\npublic ItemProcessor2 itemProcessor2() {\r\n\treturn new ItemProcessor2();\r\n}\r\n\r\n@Bean\r\npublic ItemProcessorRecordClassifier itemProcessorRecordClassifier(\r\n\tfinal ItemProcessor1 itemProcessor1,\r\n\tfinal ItemProcessor2 itemProcessor2) {\r\n\treturn new ItemProcessorRecordClassifier(itemProcessor1, itemProcessor2);\r\n}\r\n\r\n@Bean\r\n@StepScope\r\npublic RecordClassifierCompositeItemProcessor processor(final ItemProcessorRecordClassifier itemProcessorRecordClassifier) {\r\n\tRecordClassifierCompositeItemProcessor compositeProcessor = new RecordClassifierCompositeItemProcessor();\r\n\t\tcompositeProcessor.setClassifier(itemProcessorRecordClassifier);\r\n\t\treturn compositeProcessor;\r\n}\r\n```\r\n\r\n\r\nI was expecting to do some before / after processing in each of the item processors specific to the record... But, Spring batch isn&#39;t calling the item processor&#39;s before / after step. I also tried with &#39;StepScope&#39; for the two item processors to no avail. Is it normal for spring batch to not called the before/after step of item processors of classifier composite ones?\r\n","title":"Before / After steps not called in Item processors of ClassifierCompositeItemProcessor","body":"<p>Here is the sample code block (I remove our stuff and kept only the skeleton code)</p>\n<pre><code>public class ItemProcessor1 implements ItemProcessor{\n\n    private StepExecution stepExecution;\n        \n    @BeforeStep **// Not called.**\n    public void beforeStep(final StepExecution stepExecution) {\n        this.stepExecution = stepExecution;\n    }\n\n    @AfterStep  **// Not called.**\n    public ExitStatus afterStep() {\n       return ExitStatus.COMPLETED;\n    }\n\n    @Override\n    public Record process(Record rec) throws Exception {\n        return super.process(rec);\n    }\n}\n\npublic class ItemProcessor2 implements ItemProcessor{\n\n    private StepExecution stepExecution;\n        \n    @BeforeStep  **// Not called**.\n    public void beforeStep(final StepExecution stepExecution) {\n        this.stepExecution = stepExecution;\n    }\n\n    @AfterStep  **// Not called.**\n    public ExitStatus afterStep() {\n        return ExitStatus.COMPLETED;\n    }\n\n    @Override\n    public Record process(Record rec) throws Exception {\n        return super.process(rec);\n    }\n}\n\n@RequiredArgsConstructor\npublic class ItemProcessorRecordClassifier\n                            implements Classifier {\n\n    private final ItemProcessor1 itemProcessor1;\n    private final ItemProcessor2 itemProcessor2;\n    public ItemProcessor classify(Record record) {\n        return (record.getRowNum()%2==0) ? itemProcessor1 : itemProcessor2\n    }\n\n}\n\npublic class RecordClassifierCompositeItemProcessor extends ClassifierCompositeItemProcessor {\n\n    private StepExecution stepExecution;\n        \n    @BeforeStep  // Called.\n    public void beforeStep(final StepExecution stepExecution) {\n        this.stepExecution = stepExecution;\n    }\n\n    @AfterStep  // Called.\n    public ExitStatus afterStep() {\n        return ExitStatus.COMPLETED;\n    }\n\n    @Override\n    public Record process(Record rec) throws Exception {\n        return super.process(rec);\n    }\n}\n\n//Config\n\n@Bean\n// @StepScope\npublic ItemProcessor1 itemProcessor1() {\n    return new ItemProcessor1();\n}\n\n@Bean\n// @StepScope\npublic ItemProcessor2 itemProcessor2() {\n    return new ItemProcessor2();\n}\n\n@Bean\npublic ItemProcessorRecordClassifier itemProcessorRecordClassifier(\n    final ItemProcessor1 itemProcessor1,\n    final ItemProcessor2 itemProcessor2) {\n    return new ItemProcessorRecordClassifier(itemProcessor1, itemProcessor2);\n}\n\n@Bean\n@StepScope\npublic RecordClassifierCompositeItemProcessor processor(final ItemProcessorRecordClassifier itemProcessorRecordClassifier) {\n    RecordClassifierCompositeItemProcessor compositeProcessor = new RecordClassifierCompositeItemProcessor();\n        compositeProcessor.setClassifier(itemProcessorRecordClassifier);\n        return compositeProcessor;\n}\n</code></pre>\n<p>I was expecting to do some before / after processing in each of the item processors specific to the record... But, Spring batch isn't calling the item processor's before / after step. I also tried with 'StepScope' for the two item processors to no avail. Is it normal for spring batch to not called the before/after step of item processors of classifier composite ones?</p>\n"},{"tags":["java","spring-boot","spring-batch","batch-processing"],"answers":[{"tags":[],"owner":{"account_id":6482932,"reputation":29552,"user_id":5019386,"display_name":"Mahmoud Ben Hassine"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1695019022,"creation_date":1695019022,"answer_id":77125002,"question_id":77119953,"body_markdown":"With Spring Boot 3, if you use `@EnableBatchProcessing`, the batch auto-configuration (including the automatic job execution at startup) is disabled.\r\n\r\nIn your case, you should remove that annotation and it should work.","title":"First Spring Batch implementation, not executing Reader, Processor and Writer","body":"<p>With Spring Boot 3, if you use <code>@EnableBatchProcessing</code>, the batch auto-configuration (including the automatic job execution at startup) is disabled.</p>\n<p>In your case, you should remove that annotation and it should work.</p>\n"}],"owner":{"account_id":18044315,"reputation":1227,"user_id":13115701,"display_name":"Paul Marcelin Bejan"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":84,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":77125002,"answer_count":1,"score":0,"last_activity_date":1695019022,"creation_date":1694906528,"question_id":77119953,"body_markdown":"I&#39;m currently trying to learn spring batch, I did a first implementation, but the code inside Reader, Processor and Writer is not executed. Any advice?\r\n\r\n**JustBatchApplication :**\r\n\r\n    @SpringBootApplication\r\n    public class JustBatchApplication {\r\n    \r\n    \tpublic static void main(String[] args) {\r\n    \t\tSpringApplication.run(JustBatchApplication.class, args);\r\n    \t}\r\n    \r\n    }\r\n\r\n**BatchConfiguration :**\r\n\r\n    @Slf4j\r\n    @Configuration\r\n    @EnableBatchProcessing\r\n    @RequiredArgsConstructor\r\n    public class BatchConfiguration {\r\n    \t\r\n    \tprivate final EmployeeReader employeeReader;\r\n    \t\r\n    \tprivate final EmployeeProcessor employeeProcessor;\r\n    \t\r\n    \tprivate final EmployeeWriter employeeWriter;\r\n    \t\r\n    \t@Bean\r\n    \tpublic Job employeeJob(JobRepository jobRepository, JobExecutionListener listener, Step step1) {\r\n    \t\treturn new JobBuilder(&quot;employeeJob&quot;, jobRepository)\r\n    \t\t\t\t.incrementer(new RunIdIncrementer())\r\n    \t\t\t\t.listener(listener)\r\n    \t\t\t\t.flow(step1)\r\n    \t\t\t\t.end()\r\n    \t\t\t\t.build();\r\n    \t}\r\n    \r\n    \t@Bean\r\n    \tpublic Step step1(JobRepository jobRepository, PlatformTransactionManager transactionManager) {\r\n    \t\treturn new StepBuilder(&quot;step1&quot;, jobRepository)\r\n    \t\t\t\t.&lt;Employee, Employee&gt;chunk(10, transactionManager)\r\n    \t\t\t\t.reader(employeeReader)\r\n    \t\t\t\t.processor(employeeProcessor)\r\n    \t\t\t\t.writer(employeeWriter)\r\n    \t\t\t\t.build();\r\n    \t}\r\n    \r\n    }\r\n\r\n**EmployeeJobListener :**\r\n\r\n    @Slf4j\r\n    @Component\r\n    @RequiredArgsConstructor\r\n    public class EmployeeJobListener implements JobExecutionListener {\r\n    \t\r\n    \tprivate final EmployeeReader employeeReader;\r\n    \t\r\n    \t@Override\r\n    \tpublic void beforeJob(JobExecution jobExecution) {\r\n    \t\tlog.info(&quot;############## JOB STARTING ############## &quot;);\r\n    \t}\r\n    \r\n    \t@Override\r\n    \tpublic void afterJob(JobExecution jobExecution) {\r\n    \t\tif (jobExecution.getStatus() == BatchStatus.COMPLETED) {\r\n    \t\t\tlog.info(&quot;############## JOB COMPLETED ############## &quot;);\r\n    \t\t\temployeeReader.closeIterator();\r\n    \t\t}\r\n    \t}\r\n    \r\n    }\r\n\r\n**EmployeeReader :**\r\nHere I use an already implemented CsvUtils to map each line of the CSV to the Employee class, I already checked and it is working perfectly fine. So there aren&#39;t issues with reading the file.\r\n\r\n    @Slf4j\r\n    @Component\r\n    public class EmployeeReader implements ItemReader&lt;Employee&gt; {\r\n    \r\n    \tpublic EmployeeReader() {\r\n    \t\tCsvUtils&lt;Employee&gt; csvEmployee = new CsvUtils&lt;&gt;(Employee.class);\r\n    \t\ttry {\r\n    \t\t\titerator = csvEmployee.iterator(new FileInfo(DirectoryPath.SRC_MAIN_RESOURCES.value, &quot;employees&quot;));\r\n    \t\t} catch (IOException e) {\r\n    \t\t\tthrow new RuntimeException(&quot;IOException while reading employees file!&quot;, e);\r\n    \t\t}\r\n    \t}\r\n    \t\r\n    \tprivate MappingIterator&lt;Employee&gt; iterator;\r\n    \t\r\n    \t@Override\r\n    \tpublic Employee read() {\r\n    \t\t    \t\t\r\n    \t\tif (iterator.hasNext()) {\r\n    \t\t\t\r\n    \t\t\tEmployee employee = iterator.next();\r\n    \r\n    \t\t\tlog.info(&quot;Reading item: {}&quot;, employee);\r\n    \t\t\t\r\n    \t\t\treturn employee;\r\n    \t\t\t\r\n    \t\t} else {\r\n    \t\t\t\r\n    \t\t\treturn null;\r\n    \t\t\t\r\n    \t\t}\r\n    \t\t\r\n    \t}\r\n    \t\r\n    \tpublic void closeIterator() {\r\n    \t\ttry {\r\n    \t\t\titerator.close();\r\n    \t\t} catch (IOException e) {\r\n    \t\t\tlog.warn(&quot;IOException while trying to close the iterator!&quot;);\r\n    \t\t\te.printStackTrace();\r\n    \t\t}\r\n    \t}\r\n    \r\n    }\r\n\r\n**EmployeeProcessor :**\r\n\r\n    @Slf4j\r\n    @Component\r\n    public class EmployeeProcessor implements ItemProcessor&lt;Employee, Employee&gt; {\r\n    \r\n    \t@Override\r\n    \tpublic Employee process(Employee employee) {\r\n    \t\tlog.info(&quot;Processing employee: {}&quot;, employee);\r\n    \t\treturn employee;\r\n    \t}\r\n    \r\n    }\r\n\r\n**EmployeeWriter :**\r\n\r\n    @Slf4j\r\n    @Component\r\n    public class EmployeeWriter implements ItemWriter&lt;Employee&gt; {\r\n    \t\r\n    \t@Override\r\n    \tpublic void write(Chunk&lt;? extends Employee&gt; chunk) throws Exception {\r\n    \t\tfor ( Employee employee : chunk ) {\r\n    \t\t\tlog.info(&quot;Writing to console : &quot; + employee );\r\n    \t\t}\r\n    \t}\r\n    \t\r\n    }\r\n\r\n**application.yaml :**\r\n\r\n    spring:\r\n      application:\r\n        name: batch\r\n        version: 1.0.0\r\n      banner:\r\n        location: classpath:banner.txt\r\n      datasource:\r\n        url: jdbc:postgresql://localhost:5432/BatchDB\r\n        driverClassName: org.postgresql.Driver\r\n        username: &quot;userbatch&quot;\r\n        password: &quot;passwordbatch&quot;\r\n      jpa:\r\n        properties:\r\n          hibernate:\r\n            dialect: org.hibernate.dialect.PostgreSQLDialect\r\n        database-platform: org.postgresql.Driver\r\n        show-sql: &#39;true&#39;\r\n        hibernate:\r\n          ddl-auto: update\r\n      batch:\r\n        job:\r\n          enabled: true\r\n    server:\r\n      port: &#39;9999&#39;\r\n\r\n**Console:**\r\n\r\n\r\n    ________       _____      ______  \r\n    ___  __ )_____ __  /_________  /_ \r\n    __  __  |  __ `/  __/  ___/_  __ \\\r\n    _  /_/ // /_/ // /_ / /__ _  / / /\r\n    /_____/ \\__,_/ \\__/ \\___/ /_/ /_/ \r\n                                      \r\n     \r\n    Powered by Spring Boot 3.1.2\r\n    \r\n    2023-09-17T01:09:40.442+02:00  INFO 44199 --- [           main] c.p.b.JustBatchApplication               : Starting JustBatchApplication using Java 17.0.5 with PID 44199 (/Users/xyz/Develop/Personal/projects/Training/batch/target/classes started by xyz in /Users/xyz/Develop/Personal/projects/Training/batch)\r\n    2023-09-17T01:09:40.443+02:00  INFO 44199 --- [           main] c.p.b.JustBatchApplication               : No active profile set, falling back to 1 default profile: &quot;default&quot;\r\n    2023-09-17T01:09:40.585+02:00  INFO 44199 --- [           main] o.s.b.c.c.a.BatchRegistrar               : Finished Spring Batch infrastructure beans configuration in 2 ms.\r\n    2023-09-17T01:09:40.632+02:00  INFO 44199 --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Multiple Spring Data modules found, entering strict repository configuration mode\r\n    2023-09-17T01:09:40.633+02:00  INFO 44199 --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JDBC repositories in DEFAULT mode.\r\n    2023-09-17T01:09:40.640+02:00  INFO 44199 --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 5 ms. Found 0 JDBC repository interfaces.\r\n    2023-09-17T01:09:40.647+02:00  INFO 44199 --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Multiple Spring Data modules found, entering strict repository configuration mode\r\n    2023-09-17T01:09:40.648+02:00  INFO 44199 --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.\r\n    2023-09-17T01:09:40.650+02:00  INFO 44199 --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 1 ms. Found 0 JPA repository interfaces.\r\n    2023-09-17T01:09:40.772+02:00  INFO 44199 --- [           main] o.h.j.i.u.LogHelper                      : HHH000204: Processing PersistenceUnitInfo [name: default]\r\n    2023-09-17T01:09:40.794+02:00  INFO 44199 --- [           main] o.h.Version                              : HHH000412: Hibernate ORM core version 6.2.6.Final\r\n    2023-09-17T01:09:40.796+02:00  INFO 44199 --- [           main] o.h.c.Environment                        : HHH000406: Using bytecode reflection optimizer\r\n    2023-09-17T01:09:40.851+02:00  INFO 44199 --- [           main] o.h.b.i.BytecodeProviderInitiator        : HHH000021: Bytecode provider name : bytebuddy\r\n    2023-09-17T01:09:40.907+02:00  INFO 44199 --- [           main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer\r\n    [main] INFO com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...\r\n    [main] INFO com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection org.postgresql.jdbc.PgConnection@204d9edf\r\n    [main] INFO com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.\r\n    2023-09-17T01:09:41.124+02:00  INFO 44199 --- [           main] o.h.b.i.BytecodeProviderInitiator        : HHH000021: Bytecode provider name : bytebuddy\r\n    2023-09-17T01:09:41.361+02:00  INFO 44199 --- [           main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]\r\n    2023-09-17T01:09:41.391+02:00  INFO 44199 --- [           main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit &#39;default&#39;\r\n    2023-09-17T01:09:41.436+02:00  INFO 44199 --- [           main] o.s.b.c.r.s.JobRepositoryFactoryBean     : No database type set, using meta data indicating: POSTGRES\r\n    2023-09-17T01:09:41.453+02:00  INFO 44199 --- [           main] .c.a.BatchObservabilityBeanPostProcessor : No Micrometer observation registry found, defaulting to ObservationRegistry.NOOP\r\n    2023-09-17T01:09:41.457+02:00  INFO 44199 --- [           main] .c.a.BatchObservabilityBeanPostProcessor : No Micrometer observation registry found, defaulting to ObservationRegistry.NOOP\r\n    2023-09-17T01:09:41.459+02:00  INFO 44199 --- [           main] o.s.b.c.l.s.SimpleJobLauncher            : No TaskExecutor has been set, defaulting to synchronous executor.\r\n    2023-09-17T01:09:41.552+02:00  INFO 44199 --- [           main] c.p.b.JustBatchApplication               : Started JustBatchApplication in 1.286 seconds (process running for 1.637)\r\n    2023-09-17T01:09:41.554+02:00  INFO 44199 --- [ionShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit &#39;default&#39;\r\n    [SpringApplicationShutdownHook] INFO com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...\r\n    [SpringApplicationShutdownHook] INFO com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.\r\n\r\n\r\nI have also checked the connection to PostgresSQL by saving an employee.\r\n\r\n","title":"First Spring Batch implementation, not executing Reader, Processor and Writer","body":"<p>I'm currently trying to learn spring batch, I did a first implementation, but the code inside Reader, Processor and Writer is not executed. Any advice?</p>\n<p><strong>JustBatchApplication :</strong></p>\n<pre><code>@SpringBootApplication\npublic class JustBatchApplication {\n\n    public static void main(String[] args) {\n        SpringApplication.run(JustBatchApplication.class, args);\n    }\n\n}\n</code></pre>\n<p><strong>BatchConfiguration :</strong></p>\n<pre><code>@Slf4j\n@Configuration\n@EnableBatchProcessing\n@RequiredArgsConstructor\npublic class BatchConfiguration {\n    \n    private final EmployeeReader employeeReader;\n    \n    private final EmployeeProcessor employeeProcessor;\n    \n    private final EmployeeWriter employeeWriter;\n    \n    @Bean\n    public Job employeeJob(JobRepository jobRepository, JobExecutionListener listener, Step step1) {\n        return new JobBuilder(&quot;employeeJob&quot;, jobRepository)\n                .incrementer(new RunIdIncrementer())\n                .listener(listener)\n                .flow(step1)\n                .end()\n                .build();\n    }\n\n    @Bean\n    public Step step1(JobRepository jobRepository, PlatformTransactionManager transactionManager) {\n        return new StepBuilder(&quot;step1&quot;, jobRepository)\n                .&lt;Employee, Employee&gt;chunk(10, transactionManager)\n                .reader(employeeReader)\n                .processor(employeeProcessor)\n                .writer(employeeWriter)\n                .build();\n    }\n\n}\n</code></pre>\n<p><strong>EmployeeJobListener :</strong></p>\n<pre><code>@Slf4j\n@Component\n@RequiredArgsConstructor\npublic class EmployeeJobListener implements JobExecutionListener {\n    \n    private final EmployeeReader employeeReader;\n    \n    @Override\n    public void beforeJob(JobExecution jobExecution) {\n        log.info(&quot;############## JOB STARTING ############## &quot;);\n    }\n\n    @Override\n    public void afterJob(JobExecution jobExecution) {\n        if (jobExecution.getStatus() == BatchStatus.COMPLETED) {\n            log.info(&quot;############## JOB COMPLETED ############## &quot;);\n            employeeReader.closeIterator();\n        }\n    }\n\n}\n</code></pre>\n<p><strong>EmployeeReader :</strong>\nHere I use an already implemented CsvUtils to map each line of the CSV to the Employee class, I already checked and it is working perfectly fine. So there aren't issues with reading the file.</p>\n<pre><code>@Slf4j\n@Component\npublic class EmployeeReader implements ItemReader&lt;Employee&gt; {\n\n    public EmployeeReader() {\n        CsvUtils&lt;Employee&gt; csvEmployee = new CsvUtils&lt;&gt;(Employee.class);\n        try {\n            iterator = csvEmployee.iterator(new FileInfo(DirectoryPath.SRC_MAIN_RESOURCES.value, &quot;employees&quot;));\n        } catch (IOException e) {\n            throw new RuntimeException(&quot;IOException while reading employees file!&quot;, e);\n        }\n    }\n    \n    private MappingIterator&lt;Employee&gt; iterator;\n    \n    @Override\n    public Employee read() {\n                    \n        if (iterator.hasNext()) {\n            \n            Employee employee = iterator.next();\n\n            log.info(&quot;Reading item: {}&quot;, employee);\n            \n            return employee;\n            \n        } else {\n            \n            return null;\n            \n        }\n        \n    }\n    \n    public void closeIterator() {\n        try {\n            iterator.close();\n        } catch (IOException e) {\n            log.warn(&quot;IOException while trying to close the iterator!&quot;);\n            e.printStackTrace();\n        }\n    }\n\n}\n</code></pre>\n<p><strong>EmployeeProcessor :</strong></p>\n<pre><code>@Slf4j\n@Component\npublic class EmployeeProcessor implements ItemProcessor&lt;Employee, Employee&gt; {\n\n    @Override\n    public Employee process(Employee employee) {\n        log.info(&quot;Processing employee: {}&quot;, employee);\n        return employee;\n    }\n\n}\n</code></pre>\n<p><strong>EmployeeWriter :</strong></p>\n<pre><code>@Slf4j\n@Component\npublic class EmployeeWriter implements ItemWriter&lt;Employee&gt; {\n    \n    @Override\n    public void write(Chunk&lt;? extends Employee&gt; chunk) throws Exception {\n        for ( Employee employee : chunk ) {\n            log.info(&quot;Writing to console : &quot; + employee );\n        }\n    }\n    \n}\n</code></pre>\n<p><strong>application.yaml :</strong></p>\n<pre><code>spring:\n  application:\n    name: batch\n    version: 1.0.0\n  banner:\n    location: classpath:banner.txt\n  datasource:\n    url: jdbc:postgresql://localhost:5432/BatchDB\n    driverClassName: org.postgresql.Driver\n    username: &quot;userbatch&quot;\n    password: &quot;passwordbatch&quot;\n  jpa:\n    properties:\n      hibernate:\n        dialect: org.hibernate.dialect.PostgreSQLDialect\n    database-platform: org.postgresql.Driver\n    show-sql: 'true'\n    hibernate:\n      ddl-auto: update\n  batch:\n    job:\n      enabled: true\nserver:\n  port: '9999'\n</code></pre>\n<p><strong>Console:</strong></p>\n<pre><code>________       _____      ______  \n___  __ )_____ __  /_________  /_ \n__  __  |  __ `/  __/  ___/_  __ \\\n_  /_/ // /_/ // /_ / /__ _  / / /\n/_____/ \\__,_/ \\__/ \\___/ /_/ /_/ \n                                  \n \nPowered by Spring Boot 3.1.2\n\n2023-09-17T01:09:40.442+02:00  INFO 44199 --- [           main] c.p.b.JustBatchApplication               : Starting JustBatchApplication using Java 17.0.5 with PID 44199 (/Users/xyz/Develop/Personal/projects/Training/batch/target/classes started by xyz in /Users/xyz/Develop/Personal/projects/Training/batch)\n2023-09-17T01:09:40.443+02:00  INFO 44199 --- [           main] c.p.b.JustBatchApplication               : No active profile set, falling back to 1 default profile: &quot;default&quot;\n2023-09-17T01:09:40.585+02:00  INFO 44199 --- [           main] o.s.b.c.c.a.BatchRegistrar               : Finished Spring Batch infrastructure beans configuration in 2 ms.\n2023-09-17T01:09:40.632+02:00  INFO 44199 --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Multiple Spring Data modules found, entering strict repository configuration mode\n2023-09-17T01:09:40.633+02:00  INFO 44199 --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JDBC repositories in DEFAULT mode.\n2023-09-17T01:09:40.640+02:00  INFO 44199 --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 5 ms. Found 0 JDBC repository interfaces.\n2023-09-17T01:09:40.647+02:00  INFO 44199 --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Multiple Spring Data modules found, entering strict repository configuration mode\n2023-09-17T01:09:40.648+02:00  INFO 44199 --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.\n2023-09-17T01:09:40.650+02:00  INFO 44199 --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 1 ms. Found 0 JPA repository interfaces.\n2023-09-17T01:09:40.772+02:00  INFO 44199 --- [           main] o.h.j.i.u.LogHelper                      : HHH000204: Processing PersistenceUnitInfo [name: default]\n2023-09-17T01:09:40.794+02:00  INFO 44199 --- [           main] o.h.Version                              : HHH000412: Hibernate ORM core version 6.2.6.Final\n2023-09-17T01:09:40.796+02:00  INFO 44199 --- [           main] o.h.c.Environment                        : HHH000406: Using bytecode reflection optimizer\n2023-09-17T01:09:40.851+02:00  INFO 44199 --- [           main] o.h.b.i.BytecodeProviderInitiator        : HHH000021: Bytecode provider name : bytebuddy\n2023-09-17T01:09:40.907+02:00  INFO 44199 --- [           main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer\n[main] INFO com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...\n[main] INFO com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection org.postgresql.jdbc.PgConnection@204d9edf\n[main] INFO com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.\n2023-09-17T01:09:41.124+02:00  INFO 44199 --- [           main] o.h.b.i.BytecodeProviderInitiator        : HHH000021: Bytecode provider name : bytebuddy\n2023-09-17T01:09:41.361+02:00  INFO 44199 --- [           main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]\n2023-09-17T01:09:41.391+02:00  INFO 44199 --- [           main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'\n2023-09-17T01:09:41.436+02:00  INFO 44199 --- [           main] o.s.b.c.r.s.JobRepositoryFactoryBean     : No database type set, using meta data indicating: POSTGRES\n2023-09-17T01:09:41.453+02:00  INFO 44199 --- [           main] .c.a.BatchObservabilityBeanPostProcessor : No Micrometer observation registry found, defaulting to ObservationRegistry.NOOP\n2023-09-17T01:09:41.457+02:00  INFO 44199 --- [           main] .c.a.BatchObservabilityBeanPostProcessor : No Micrometer observation registry found, defaulting to ObservationRegistry.NOOP\n2023-09-17T01:09:41.459+02:00  INFO 44199 --- [           main] o.s.b.c.l.s.SimpleJobLauncher            : No TaskExecutor has been set, defaulting to synchronous executor.\n2023-09-17T01:09:41.552+02:00  INFO 44199 --- [           main] c.p.b.JustBatchApplication               : Started JustBatchApplication in 1.286 seconds (process running for 1.637)\n2023-09-17T01:09:41.554+02:00  INFO 44199 --- [ionShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'\n[SpringApplicationShutdownHook] INFO com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...\n[SpringApplicationShutdownHook] INFO com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.\n</code></pre>\n<p>I have also checked the connection to PostgresSQL by saving an employee.</p>\n"},{"tags":["java","json","constructor","gson"],"owner":{"account_id":6549439,"reputation":1624,"user_id":5064324,"display_name":"Eggcellentos"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":178,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1695018866,"creation_date":1451413984,"question_id":34516926,"body_markdown":"I am parsing a JSON file using `Gson.fromjson`\r\n\r\nThe Java Object which I am reading into is structured as follows:\r\n\r\n    int amount;\r\n    String name;\r\n    HashMap&lt;String,Integer&gt; someMap;\r\n    OtherDataObject[] data;\r\n\r\nThe json file however has only the int &amp; String values.\r\nThe result is that my HashMap and OtherDataObjects in the &#39;data&#39; array are not initialized. \r\n\r\nIs there a way to invoke the constructor during this process?\r\n\r\nIf I can invoke the constructor I can also initialize the array and HashMap.\r\n\r\nIs it conceptually wrong to initialize objects from a JSON file/string that contains only part of the members? Would it be better practice to parse into a Pojo made specifically for the JSON being read and use that to compose a larger object(with the Pojo as a member)? ","title":"How to invoke constructor when processing .json object","body":"<p>I am parsing a JSON file using <code>Gson.fromjson</code></p>\n\n<p>The Java Object which I am reading into is structured as follows:</p>\n\n<pre><code>int amount;\nString name;\nHashMap&lt;String,Integer&gt; someMap;\nOtherDataObject[] data;\n</code></pre>\n\n<p>The json file however has only the int &amp; String values.\nThe result is that my HashMap and OtherDataObjects in the 'data' array are not initialized. </p>\n\n<p>Is there a way to invoke the constructor during this process?</p>\n\n<p>If I can invoke the constructor I can also initialize the array and HashMap.</p>\n\n<p>Is it conceptually wrong to initialize objects from a JSON file/string that contains only part of the members? Would it be better practice to parse into a Pojo made specifically for the JSON being read and use that to compose a larger object(with the Pojo as a member)? </p>\n"},{"tags":["java","spring","spring-boot","microservices","spring-batch"],"answers":[{"tags":[],"owner":{"account_id":6482932,"reputation":29552,"user_id":5019386,"display_name":"Mahmoud Ben Hassine"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695018662,"creation_date":1695018662,"answer_id":77124979,"question_id":77120679,"body_markdown":"You seem to be writing invalid records in a component other than a `SkipListener`. The behaviour you are describing should not happen if you use a `SkipListener` in which you write invalid records to a file.","title":"Sprint batch fault tolerance issue","body":"<p>You seem to be writing invalid records in a component other than a <code>SkipListener</code>. The behaviour you are describing should not happen if you use a <code>SkipListener</code> in which you write invalid records to a file.</p>\n"}],"owner":{"account_id":22894340,"reputation":17,"user_id":17034062,"display_name":"tarun singh"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":43,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1695018662,"creation_date":1694930881,"question_id":77120679,"body_markdown":"I&#39;m using spring batch for my project, my requirement is to write the error record in a file.\r\nI used spring batch fault tolerant and skip policy like any exception can be skippable. What my issue is i have only 1 record in file and it is failing so i&#39;m expecting only 1 record to be written in error file but i&#39;m getting 2(same) records in error file. When i googled it is known that when you configure fault tolerant in spring batch when error occurs it will retry the error record again. How to stop this behaviour and to write only 1 record in error file.\r\n\r\nEx: Step configuration of spring batch(below is just the raw code)\r\n\r\n        public Step mainstep()\r\n        {\r\n         stepbuilder.get(&quot;step&quot;).&lt;Employee,Employee&gt;chunk(2)\r\n    .reader()\r\n    .processor()\r\n    .writer()\r\n    .faulttolerant()\r\n    .skippolicy(new AlwaysskipItemskippolicy())\r\n    .build;\r\n        }\r\n\r\ni&#39;m writting error file try catch block in reader class. Using file output stream i&#39;m writing. I have only 1 record to process in file, but when i see the error file i&#39;m getting the same records writing twice.\r\n","title":"Sprint batch fault tolerance issue","body":"<p>I'm using spring batch for my project, my requirement is to write the error record in a file.\nI used spring batch fault tolerant and skip policy like any exception can be skippable. What my issue is i have only 1 record in file and it is failing so i'm expecting only 1 record to be written in error file but i'm getting 2(same) records in error file. When i googled it is known that when you configure fault tolerant in spring batch when error occurs it will retry the error record again. How to stop this behaviour and to write only 1 record in error file.</p>\n<p>Ex: Step configuration of spring batch(below is just the raw code)</p>\n<pre><code>    public Step mainstep()\n    {\n     stepbuilder.get(&quot;step&quot;).&lt;Employee,Employee&gt;chunk(2)\n.reader()\n.processor()\n.writer()\n.faulttolerant()\n.skippolicy(new AlwaysskipItemskippolicy())\n.build;\n    }\n</code></pre>\n<p>i'm writting error file try catch block in reader class. Using file output stream i'm writing. I have only 1 record to process in file, but when i see the error file i'm getting the same records writing twice.</p>\n"},{"tags":["java","spring-boot","maven"],"comments":[{"owner":{"account_id":6520,"reputation":10523,"user_id":11002,"accept_rate":75,"display_name":"tgdavies"},"score":0,"creation_date":1695020260,"post_id":77124915,"comment_id":135962878,"body_markdown":"What&#39;s the full stack trace?","body":"What&#39;s the full stack trace?"},{"owner":{"account_id":17026188,"reputation":1142,"user_id":12317368,"display_name":"Ro.oT"},"score":0,"creation_date":1695397048,"post_id":77124915,"comment_id":136023563,"body_markdown":"Please include the complete error traceback.","body":"Please include the complete error traceback."}],"owner":{"account_id":21687948,"reputation":11,"user_id":16003067,"display_name":"Rochit Aggarwal"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":30,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":0,"score":0,"last_activity_date":1695018032,"creation_date":1695018032,"question_id":77124915,"body_markdown":"I&#39;m using spring boot 2.3.0 version and Java 11. I&#39;m using com.github.eirslett.frontend-maven-plugin.1.6 for my project for react stuff. But now from some time I&#39;m not able to build my project and getting some build errors which I&#39;ve mentioned below.\r\n\r\nError: \r\n\r\n```670020 [ERROR] Failed to execute goal com.github.eirslett:frontend-maven-plugin:1.6:yarn (yarn run build) on &lt;project&gt;: Failed to run task: &#39;yarn run build&#39; failed. org.apache.commons.exec.ExecuteException: Process exited with an error: 1 (Exit value: 1) -&gt; [Help 1]\r\norg.apache.maven.lifecycle.LifecycleExecutionException: Failed to execute goal com.github.eirslett:frontend-maven-plugin:1.6:yarn (yarn run build) on &lt;project&gt;: Failed to run task\r\n    at org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:215)\r\n```\r\n\r\nMy pom.xml looks like this\r\n\r\n```\r\n           &lt;plugin&gt;\r\n                &lt;groupId&gt;com.github.eirslett&lt;/groupId&gt;\r\n                &lt;artifactId&gt;frontend-maven-plugin&lt;/artifactId&gt;\r\n                &lt;version&gt;1.6&lt;/version&gt;\r\n                &lt;configuration&gt;\r\n                    &lt;workingDirectory&gt;frontend&lt;/workingDirectory&gt;\r\n                    &lt;installDirectory&gt;target&lt;/installDirectory&gt;\r\n                &lt;/configuration&gt;\r\n                &lt;executions&gt;\r\n                    &lt;execution&gt;\r\n                        &lt;id&gt;install node and yarn&lt;/id&gt;\r\n                        &lt;goals&gt;\r\n                            &lt;goal&gt;install-node-and-yarn&lt;/goal&gt;\r\n                        &lt;/goals&gt;\r\n                        &lt;configuration&gt;\r\n\t\t\t            \t&lt;nodeVersion&gt;v16.12.0&lt;/nodeVersion&gt;\r\n\t\t\t            \t&lt;yarnVersion&gt;v1.22.19&lt;/yarnVersion&gt;\r\n                        &lt;/configuration&gt;\r\n                    &lt;/execution&gt;\r\n                    &lt;execution&gt;\r\n                        &lt;id&gt;yarn install&lt;/id&gt;\r\n                        &lt;goals&gt;\r\n                            &lt;goal&gt;yarn&lt;/goal&gt;\r\n                        &lt;/goals&gt;\r\n                        &lt;configuration&gt;\r\n                            &lt;arguments&gt;install&lt;/arguments&gt;\r\n                        &lt;/configuration&gt;\r\n                    &lt;/execution&gt;\r\n                    &lt;execution&gt;\r\n                        &lt;id&gt;yarn run build&lt;/id&gt;\r\n                        &lt;goals&gt;\r\n                            &lt;goal&gt;yarn&lt;/goal&gt;\r\n                        &lt;/goals&gt;\r\n&lt;!--\t\t\t\t\t\t&lt;phase&gt;prepare-package&lt;/phase&gt;--&gt;\r\n\t\t\t\t\t\t&lt;configuration&gt;\r\n                            &lt;arguments&gt;run build&lt;/arguments&gt;\r\n                        &lt;/configuration&gt;\r\n                    &lt;/execution&gt;\r\n                &lt;/executions&gt;\r\n            &lt;/plugin&gt;\r\n```\r\n\r\nI&#39;ve tried many ways but I&#39;m not able to fix this. Please provide me any soluition regarding this.","title":"spring boot project not build due to frontend-maven-plugin","body":"<p>I'm using spring boot 2.3.0 version and Java 11. I'm using com.github.eirslett.frontend-maven-plugin.1.6 for my project for react stuff. But now from some time I'm not able to build my project and getting some build errors which I've mentioned below.</p>\n<p>Error:</p>\n<pre><code>org.apache.maven.lifecycle.LifecycleExecutionException: Failed to execute goal com.github.eirslett:frontend-maven-plugin:1.6:yarn (yarn run build) on &lt;project&gt;: Failed to run task\n    at org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:215)\n</code></pre>\n<p>My pom.xml looks like this</p>\n<pre><code>           &lt;plugin&gt;\n                &lt;groupId&gt;com.github.eirslett&lt;/groupId&gt;\n                &lt;artifactId&gt;frontend-maven-plugin&lt;/artifactId&gt;\n                &lt;version&gt;1.6&lt;/version&gt;\n                &lt;configuration&gt;\n                    &lt;workingDirectory&gt;frontend&lt;/workingDirectory&gt;\n                    &lt;installDirectory&gt;target&lt;/installDirectory&gt;\n                &lt;/configuration&gt;\n                &lt;executions&gt;\n                    &lt;execution&gt;\n                        &lt;id&gt;install node and yarn&lt;/id&gt;\n                        &lt;goals&gt;\n                            &lt;goal&gt;install-node-and-yarn&lt;/goal&gt;\n                        &lt;/goals&gt;\n                        &lt;configuration&gt;\n                            &lt;nodeVersion&gt;v16.12.0&lt;/nodeVersion&gt;\n                            &lt;yarnVersion&gt;v1.22.19&lt;/yarnVersion&gt;\n                        &lt;/configuration&gt;\n                    &lt;/execution&gt;\n                    &lt;execution&gt;\n                        &lt;id&gt;yarn install&lt;/id&gt;\n                        &lt;goals&gt;\n                            &lt;goal&gt;yarn&lt;/goal&gt;\n                        &lt;/goals&gt;\n                        &lt;configuration&gt;\n                            &lt;arguments&gt;install&lt;/arguments&gt;\n                        &lt;/configuration&gt;\n                    &lt;/execution&gt;\n                    &lt;execution&gt;\n                        &lt;id&gt;yarn run build&lt;/id&gt;\n                        &lt;goals&gt;\n                            &lt;goal&gt;yarn&lt;/goal&gt;\n                        &lt;/goals&gt;\n&lt;!--                        &lt;phase&gt;prepare-package&lt;/phase&gt;--&gt;\n                        &lt;configuration&gt;\n                            &lt;arguments&gt;run build&lt;/arguments&gt;\n                        &lt;/configuration&gt;\n                    &lt;/execution&gt;\n                &lt;/executions&gt;\n            &lt;/plugin&gt;\n</code></pre>\n<p>I've tried many ways but I'm not able to fix this. Please provide me any soluition regarding this.</p>\n"},{"tags":["java","flutter"],"comments":[{"owner":{"account_id":12649853,"reputation":862,"user_id":9248277,"display_name":"Lucas Aschenbach"},"score":0,"creation_date":1676665100,"post_id":51281702,"comment_id":133190346,"body_markdown":"This GitHub-issue response solved it for me: https://github.com/flutter/flutter/issues/118502#issuecomment-1383215722","body":"This GitHub-issue response solved it for me: <a href=\"https://github.com/flutter/flutter/issues/118502#issuecomment-1383215722\" rel=\"nofollow noreferrer\">github.com/flutter/flutter/issues/&hellip;</a>"}],"answers":[{"tags":[],"owner":{"account_id":968470,"reputation":5711,"user_id":991479,"display_name":"Ewald"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1531316276,"creation_date":1531316276,"answer_id":51286951,"question_id":51281702,"body_markdown":"Please ensure Java is in your PATH and that JAVA_HOME is defined and pointing to the JDK.  I&#39;ve had Windows put the JRE in the path instead of the JDK, which leads to all kinds of issues.\r\n\r\nPlease take a look at your PATH environment variable and remove everything Java related that does not point to the JDK folder.\r\n\r\nOracle has some documentation on how to do this here : [Installing Java and setting JAVA_HOME][1]\r\n\r\n\r\n  [1]: https://docs.oracle.com/cd/E19182-01/821-0917/inst_jdk_javahome_t/index.html","title":"Unable to find bundled Java version on Flutter","body":"<p>Please ensure Java is in your PATH and that JAVA_HOME is defined and pointing to the JDK.  I've had Windows put the JRE in the path instead of the JDK, which leads to all kinds of issues.</p>\n\n<p>Please take a look at your PATH environment variable and remove everything Java related that does not point to the JDK folder.</p>\n\n<p>Oracle has some documentation on how to do this here : <a href=\"https://docs.oracle.com/cd/E19182-01/821-0917/inst_jdk_javahome_t/index.html\" rel=\"nofollow noreferrer\">Installing Java and setting JAVA_HOME</a></p>\n"},{"tags":[],"owner":{"account_id":18264213,"reputation":1,"user_id":13296344,"display_name":"Yash Doshi"},"down_vote_count":6,"up_vote_count":1,"is_accepted":false,"score":-5,"last_activity_date":1617978078,"creation_date":1594021224,"answer_id":62751373,"question_id":51281702,"body_markdown":"![enter image description here][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/HJ1xu.png\r\n\r\nI was getting this error when I run `flutter doctor`.\r\n\r\nSolution: \r\n\r\n- Go to the file &quot;java&quot; following the path where Error is shown.\r\n- Then right click on the file and go to Properties.\r\n- Then Go to permissions and **Check** the box &quot;**Allow executing file as program**&quot;.\r\n- Finally, run `flutter doctor` to see `No issues found!`.","title":"Unable to find bundled Java version on Flutter","body":"<p><img src=\"https://i.stack.imgur.com/HJ1xu.png\" alt=\"enter image description here\" /></p>\n<p>I was getting this error when I run <code>flutter doctor</code>.</p>\n<p>Solution:</p>\n<ul>\n<li>Go to the file &quot;java&quot; following the path where Error is shown.</li>\n<li>Then right click on the file and go to Properties.</li>\n<li>Then Go to permissions and <strong>Check</strong> the box &quot;<strong>Allow executing file as program</strong>&quot;.</li>\n<li>Finally, run <code>flutter doctor</code> to see <code>No issues found!</code>.</li>\n</ul>\n"},{"tags":[],"owner":{"account_id":2862531,"reputation":1705,"user_id":2457493,"accept_rate":0,"display_name":"samridhgupta"},"down_vote_count":1,"up_vote_count":6,"is_accepted":false,"score":5,"last_activity_date":1622860110,"creation_date":1622860110,"answer_id":67845759,"question_id":51281702,"body_markdown":"Had this issue of ```✗ Unable to find bundled Java version.```\r\nSeems like the issue was with **Android Studio (Beta Version)**\r\n\r\nChanged my **Android Studio (Stable Version)** to solve the issue\r\n\r\nHere are the ```flutter doctor -v``` details for each  **Android Studio**\r\n\r\n**Beta Android Studio**\r\n```\r\n[!] Android Studio\r\n    • Android Studio at /Applications/Android Studio Preview.app/Contents\r\n    • Flutter plugin can be installed from:\r\n      &#128296; https://plugins.jetbrains.com/plugin/9212-flutter\r\n    • Dart plugin can be installed from:\r\n      &#128296; https://plugins.jetbrains.com/plugin/6351-dart\r\n    ✗ Unable to find bundled Java version.\r\n    • Try updating or re-installing Android Studio.\r\n```\r\n\r\n**Stable Android Studio**\r\n```\r\n[✓] Android Studio (version 4.2)\r\n    • Android Studio at /Applications/Android Studio.app/Contents\r\n    • Flutter plugin can be installed from:\r\n      &#128296; https://plugins.jetbrains.com/plugin/9212-flutter\r\n    • Dart plugin can be installed from:\r\n      &#128296; https://plugins.jetbrains.com/plugin/6351-dart\r\n    • Java version OpenJDK Runtime Environment (build 11.0.8+10-b944.6916264)\r\n```\r\n\r\nEven after this issue persist then \r\n\r\n- Check for Java \r\n`java -version`\r\n`which java`\r\n\r\n- double-check that these are present in your .bashrc or .bash_profile or .zshrc \r\n```\r\nexport PATH=&quot;$PATH:/usr/bin/java&quot;\r\nexport JAVA_HOME=$(/usr/libexec/java_home)\r\n```\r\n","title":"Unable to find bundled Java version on Flutter","body":"<p>Had this issue of <code>✗ Unable to find bundled Java version.</code>\nSeems like the issue was with <strong>Android Studio (Beta Version)</strong></p>\n<p>Changed my <strong>Android Studio (Stable Version)</strong> to solve the issue</p>\n<p>Here are the <code>flutter doctor -v</code> details for each  <strong>Android Studio</strong></p>\n<p><strong>Beta Android Studio</strong></p>\n<pre><code>[!] Android Studio\n    • Android Studio at /Applications/Android Studio Preview.app/Contents\n    • Flutter plugin can be installed from:\n      🔨 https://plugins.jetbrains.com/plugin/9212-flutter\n    • Dart plugin can be installed from:\n      🔨 https://plugins.jetbrains.com/plugin/6351-dart\n    ✗ Unable to find bundled Java version.\n    • Try updating or re-installing Android Studio.\n</code></pre>\n<p><strong>Stable Android Studio</strong></p>\n<pre><code>[✓] Android Studio (version 4.2)\n    • Android Studio at /Applications/Android Studio.app/Contents\n    • Flutter plugin can be installed from:\n      🔨 https://plugins.jetbrains.com/plugin/9212-flutter\n    • Dart plugin can be installed from:\n      🔨 https://plugins.jetbrains.com/plugin/6351-dart\n    • Java version OpenJDK Runtime Environment (build 11.0.8+10-b944.6916264)\n</code></pre>\n<p>Even after this issue persist then</p>\n<ul>\n<li><p>Check for Java\n<code>java -version</code>\n<code>which java</code></p>\n</li>\n<li><p>double-check that these are present in your .bashrc or .bash_profile or .zshrc</p>\n</li>\n</ul>\n<pre><code>export PATH=&quot;$PATH:/usr/bin/java&quot;\nexport JAVA_HOME=$(/usr/libexec/java_home)\n</code></pre>\n"},{"tags":[],"owner":{"account_id":11800987,"reputation":886,"user_id":11534117,"display_name":"BabaVarma"},"down_vote_count":0,"up_vote_count":76,"is_accepted":false,"score":76,"last_activity_date":1651490102,"creation_date":1623833749,"answer_id":67999421,"question_id":51281702,"body_markdown":"**For Windows:**\r\nIf you are using windows go to this directory C:\\Program Files\\Android\\Android Studio and check older Android Studio folders are exist if exist  delete those. it will work. ","title":"Unable to find bundled Java version on Flutter","body":"<p><strong>For Windows:</strong>\nIf you are using windows go to this directory C:\\Program Files\\Android\\Android Studio and check older Android Studio folders are exist if exist  delete those. it will work.</p>\n"},{"tags":[],"owner":{"account_id":18782460,"reputation":372,"user_id":13696786,"display_name":"Andre Sampaio"},"down_vote_count":1,"up_vote_count":6,"is_accepted":false,"score":5,"last_activity_date":1625700157,"creation_date":1625700157,"answer_id":68293939,"question_id":51281702,"body_markdown":"Double check the path, solved my problem wrapping the path with quotation marks...\r\n\r\n**Before**:\r\n\r\n[![enter image description here][1]][1]\r\n\r\n**After**:\r\n\r\n[![enter image description here][2]][2]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/WX8ds.png\r\n  [2]: https://i.stack.imgur.com/ODXSV.png","title":"Unable to find bundled Java version on Flutter","body":"<p>Double check the path, solved my problem wrapping the path with quotation marks...</p>\n<p><strong>Before</strong>:</p>\n<p><a href=\"https://i.stack.imgur.com/WX8ds.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/WX8ds.png\" alt=\"enter image description here\" /></a></p>\n<p><strong>After</strong>:</p>\n<p><a href=\"https://i.stack.imgur.com/ODXSV.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/ODXSV.png\" alt=\"enter image description here\" /></a></p>\n"},{"tags":[],"owner":{"account_id":22049649,"reputation":11,"user_id":16314131,"display_name":"Yerkebulan Gaziz"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1627544702,"creation_date":1627544702,"answer_id":68572043,"question_id":51281702,"body_markdown":"I get this error this morning, when updated ANDROID STUDIO to new version, so to solve this problem you need to find previous version from https://developer.android.com/studio/archive and setup, it works for me! (sorry, if exists grammatical errors)","title":"Unable to find bundled Java version on Flutter","body":"<p>I get this error this morning, when updated ANDROID STUDIO to new version, so to solve this problem you need to find previous version from <a href=\"https://developer.android.com/studio/archive\" rel=\"nofollow noreferrer\">https://developer.android.com/studio/archive</a> and setup, it works for me! (sorry, if exists grammatical errors)</p>\n"},{"tags":[],"owner":{"account_id":7727516,"reputation":4695,"user_id":5851694,"accept_rate":0,"display_name":"Nalawala Murtaza"},"down_vote_count":6,"up_vote_count":416,"is_accepted":false,"score":410,"last_activity_date":1680796210,"creation_date":1627561796,"answer_id":68575967,"question_id":51281702,"body_markdown":"## For **Mac** Users:\r\n\r\nSet the `JAVA_HOME` path by following [this article][1] and then  apply the following commands:\r\n\r\n### For the JetBrains Runtime &quot;Android Studio Electric Eel&quot;\r\n\r\n    cd /Applications/Android\\ Studio.app/Contents/jbr\r\n    ln -s ../jbr jdk\r\n    ln -s &quot;/Library/Internet Plug-Ins/JavaAppletPlugin.plugin&quot; jdk\r\n\r\nThen go to the *Finder* and search for *Android Studio*:\r\n1. Right click -&gt; *Show Package Contents*\r\n2. Open the *contents* folder, then create new folder called `jre`\r\n3. Copy the contents of the JetBrainsRuntime folder and paste it into the `jre` folder\r\n\r\n`flutter doctor -v` should work now!\r\n\r\n### Other versions\r\n\r\n    cd /Applications/Android\\ Studio.app/Contents/jre\r\n    ln -s ../jre jdk\r\n    ln -s &quot;/Library/Internet Plug-Ins/JavaAppletPlugin.plugin&quot; jdk\r\n\r\nThen you can run `flutter doctor -v`\r\n\r\n\r\n----------\r\n\r\n## For Mac users who are using the `JetBrains Toolbox`:\r\n\r\nSet the `JAVA_HOME` path following [the article][1].\r\n\r\nAfter that, change `username` to your macOS username and run:\r\n\r\n    cd /Users/username/Library/Application Support/JetBrains/Toolbox/apps/AndroidStudio/ch-0/203.7583922/Android Studio.app/Contents/jre\r\n    ln -s ../jre jdk\r\n    ln -s &quot;/Library/Internet Plug-Ins/JavaAppletPlugin.plugin&quot; jdk\r\n\r\n    flutter doctor -v\r\n\r\nIf you&#39;re still facing the issue, you can try this workaround:\r\n\r\n    cd /Applications/Android\\ Studio.app/Contents\r\n    ln -s jbr jre\r\n\r\n\r\n  [1]: https://mkyong.com/java/how-to-set-java_home-environment-variable-on-mac-os-x/#what-is-usrlibexecjava-home","title":"Unable to find bundled Java version on Flutter","body":"<h2>For <strong>Mac</strong> Users:</h2>\n<p>Set the <code>JAVA_HOME</code> path by following <a href=\"https://mkyong.com/java/how-to-set-java_home-environment-variable-on-mac-os-x/#what-is-usrlibexecjava-home\" rel=\"noreferrer\">this article</a> and then  apply the following commands:</p>\n<h3>For the JetBrains Runtime &quot;Android Studio Electric Eel&quot;</h3>\n<pre><code>cd /Applications/Android\\ Studio.app/Contents/jbr\nln -s ../jbr jdk\nln -s &quot;/Library/Internet Plug-Ins/JavaAppletPlugin.plugin&quot; jdk\n</code></pre>\n<p>Then go to the <em>Finder</em> and search for <em>Android Studio</em>:</p>\n<ol>\n<li>Right click -&gt; <em>Show Package Contents</em></li>\n<li>Open the <em>contents</em> folder, then create new folder called <code>jre</code></li>\n<li>Copy the contents of the JetBrainsRuntime folder and paste it into the <code>jre</code> folder</li>\n</ol>\n<p><code>flutter doctor -v</code> should work now!</p>\n<h3>Other versions</h3>\n<pre><code>cd /Applications/Android\\ Studio.app/Contents/jre\nln -s ../jre jdk\nln -s &quot;/Library/Internet Plug-Ins/JavaAppletPlugin.plugin&quot; jdk\n</code></pre>\n<p>Then you can run <code>flutter doctor -v</code></p>\n<hr />\n<h2>For Mac users who are using the <code>JetBrains Toolbox</code>:</h2>\n<p>Set the <code>JAVA_HOME</code> path following <a href=\"https://mkyong.com/java/how-to-set-java_home-environment-variable-on-mac-os-x/#what-is-usrlibexecjava-home\" rel=\"noreferrer\">the article</a>.</p>\n<p>After that, change <code>username</code> to your macOS username and run:</p>\n<pre><code>cd /Users/username/Library/Application Support/JetBrains/Toolbox/apps/AndroidStudio/ch-0/203.7583922/Android Studio.app/Contents/jre\nln -s ../jre jdk\nln -s &quot;/Library/Internet Plug-Ins/JavaAppletPlugin.plugin&quot; jdk\n\nflutter doctor -v\n</code></pre>\n<p>If you're still facing the issue, you can try this workaround:</p>\n<pre><code>cd /Applications/Android\\ Studio.app/Contents\nln -s jbr jre\n</code></pre>\n"},{"tags":[],"owner":{"account_id":22184910,"reputation":11,"user_id":16427978,"display_name":"Hồ Duy Quốc Bảo"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1675699934,"creation_date":1627941947,"answer_id":68628394,"question_id":51281702,"body_markdown":"I use macos big sur 11.5.1 also have the above situation and have successfully fixed the error:\r\n&gt; Unable to find bundled Java version on Flutter &amp;&amp;\r\n! Some Android licenses are not accepted. To resolve this, run: flutter doctor --android-licenses\r\n\r\nCH-0 / 203.7678000 is the version you installed if you have to fix it\r\n\r\n```\r\ncd ~/Library/Application\\ Support/JetBrains/Toolbox/apps/AndroidStudio/ch-0/203.7678000/Android\\ Studio.app/Contents/jre \r\n\r\nsudo ln -s ../jre jdk\r\n\r\nsudo ln -s &quot;/Library/Internet Plug-Ins/JavaAppletPlugin.plugin&quot; jdk\r\n\r\nflutter doctor --android-licenses\r\n\r\nflutter doctor -v\r\n```\r\n","title":"Unable to find bundled Java version on Flutter","body":"<p>I use macos big sur 11.5.1 also have the above situation and have successfully fixed the error:</p>\n<blockquote>\n<p>Unable to find bundled Java version on Flutter &amp;&amp;\n! Some Android licenses are not accepted. To resolve this, run: flutter doctor --android-licenses</p>\n</blockquote>\n<p>CH-0 / 203.7678000 is the version you installed if you have to fix it</p>\n<pre><code>cd ~/Library/Application\\ Support/JetBrains/Toolbox/apps/AndroidStudio/ch-0/203.7678000/Android\\ Studio.app/Contents/jre \n\nsudo ln -s ../jre jdk\n\nsudo ln -s &quot;/Library/Internet Plug-Ins/JavaAppletPlugin.plugin&quot; jdk\n\nflutter doctor --android-licenses\n\nflutter doctor -v\n</code></pre>\n"},{"tags":[],"owner":{"account_id":18556826,"reputation":41,"user_id":13521698,"display_name":"Jake Woodruff"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1628927262,"creation_date":1628924594,"answer_id":68781084,"question_id":51281702,"body_markdown":"**Apple Silicon Users Problem Solved!**\r\n\r\nFirst do this: https://stackoverflow.com/questions/64708446/flutter-doctor-android-licenses-exception-in-thread-main-java-lang-noclass\r\n\r\nThen:\r\n1. Make Sure to set Java_Home path in .zshrc using same article already listed here. He explains using the .zshenv but we will edit .zshrc file. \r\n\r\nhttps://mkyong.com/java/how-to-set-java_home-environment-variable-on-mac-os-x/#what-is-usrlibexecjava-home\r\n\r\n2. Uninstall Java from your system \r\n3. Re-install the M1 Specific Version from Azul. Choose Java 16. Choose ARM 64 bit https://www.azul.com/downloads/?package=jdk\r\n\r\n  **Here&#39;s Where I Was Stuck But Finally Found The Fix** \r\n\r\nRun these commands:\r\n\r\n4. cd /Applications/Android\\ Studio.app/Contents/jre\r\n5. ln -s /Library/Java/JavaVirtualMachines/zulu-16.jdk jdk\r\n6. flutter doctor -v","title":"Unable to find bundled Java version on Flutter","body":"<p><strong>Apple Silicon Users Problem Solved!</strong></p>\n<p>First do this: <a href=\"https://stackoverflow.com/questions/64708446/flutter-doctor-android-licenses-exception-in-thread-main-java-lang-noclass\">Flutter Doctor --android-licenses : Exception in thread &quot;main&quot; java.lang.NoClassDefFoundError</a></p>\n<p>Then:</p>\n<ol>\n<li>Make Sure to set Java_Home path in .zshrc using same article already listed here. He explains using the .zshenv but we will edit .zshrc file.</li>\n</ol>\n<p><a href=\"https://mkyong.com/java/how-to-set-java_home-environment-variable-on-mac-os-x/#what-is-usrlibexecjava-home\" rel=\"nofollow noreferrer\">https://mkyong.com/java/how-to-set-java_home-environment-variable-on-mac-os-x/#what-is-usrlibexecjava-home</a></p>\n<ol start=\"2\">\n<li>Uninstall Java from your system</li>\n<li>Re-install the M1 Specific Version from Azul. Choose Java 16. Choose ARM 64 bit <a href=\"https://www.azul.com/downloads/?package=jdk\" rel=\"nofollow noreferrer\">https://www.azul.com/downloads/?package=jdk</a></li>\n</ol>\n<p><strong>Here's Where I Was Stuck But Finally Found The Fix</strong></p>\n<p>Run these commands:</p>\n<ol start=\"4\">\n<li>cd /Applications/Android\\ Studio.app/Contents/jre</li>\n<li>ln -s /Library/Java/JavaVirtualMachines/zulu-16.jdk jdk</li>\n<li>flutter doctor -v</li>\n</ol>\n"},{"tags":[],"owner":{"account_id":17949568,"reputation":1,"user_id":13042994,"display_name":"D M"},"down_vote_count":2,"up_vote_count":0,"is_accepted":false,"score":-2,"last_activity_date":1629106115,"creation_date":1629106115,"answer_id":68800353,"question_id":51281702,"body_markdown":"1.Write the path in quotes i.e flutter config --android-studio-dir &quot;C:\\Program Files\\Android\\Android Studio&quot;.\r\n\r\n2.Please check the correct path of android Studio.\r\n\r\n3.Do the 1st step and run flutter doctor .","title":"Unable to find bundled Java version on Flutter","body":"<p>1.Write the path in quotes i.e flutter config --android-studio-dir &quot;C:\\Program Files\\Android\\Android Studio&quot;.</p>\n<p>2.Please check the correct path of android Studio.</p>\n<p>3.Do the 1st step and run flutter doctor .</p>\n"},{"tags":[],"owner":{"account_id":13886006,"reputation":155,"user_id":10025125,"display_name":"Casareafer"},"down_vote_count":2,"up_vote_count":0,"is_accepted":false,"score":-2,"last_activity_date":1630379888,"creation_date":1630379888,"answer_id":68992448,"question_id":51281702,"body_markdown":"In my case, I recently bought an M1 Macbook and then installed Android Studio with the Jetbrains Toolbox but \r\n\r\nThis folder doesn&#39;t exist \r\n\r\n    /Users/username/Library/Application Support/JetBrains/Toolbox/apps/AndroidStudio/ch-0/203.7583922/Android Studio.app/Contents/jre\r\n\r\n\r\nSo I follow what this comment say and now is working just fine\r\nhttps://github.com/flutter/flutter/issues/76215#issuecomment-893512809\r\n\r\n\r\n1.- Go to Applications folder then right click on your android studio app\r\n2.- click on Show package contents\r\n3.- open a terminal inside jre folder then create the new jdk folder\r\n\r\n    mkdir jdk\r\n\r\n4.- move the folder Contents into jdk\r\n\r\n    mv Contents jdk\r\n\r\n\r\nAfter refreshing my terminal, flutter doctor works just fine!\r\n","title":"Unable to find bundled Java version on Flutter","body":"<p>In my case, I recently bought an M1 Macbook and then installed Android Studio with the Jetbrains Toolbox but</p>\n<p>This folder doesn't exist</p>\n<pre><code>/Users/username/Library/Application Support/JetBrains/Toolbox/apps/AndroidStudio/ch-0/203.7583922/Android Studio.app/Contents/jre\n</code></pre>\n<p>So I follow what this comment say and now is working just fine\n<a href=\"https://github.com/flutter/flutter/issues/76215#issuecomment-893512809\" rel=\"nofollow noreferrer\">https://github.com/flutter/flutter/issues/76215#issuecomment-893512809</a></p>\n<p>1.- Go to Applications folder then right click on your android studio app\n2.- click on Show package contents\n3.- open a terminal inside jre folder then create the new jdk folder</p>\n<pre><code>mkdir jdk\n</code></pre>\n<p>4.- move the folder Contents into jdk</p>\n<pre><code>mv Contents jdk\n</code></pre>\n<p>After refreshing my terminal, flutter doctor works just fine!</p>\n"},{"tags":[],"owner":{"account_id":4413716,"reputation":171,"user_id":4458597,"display_name":"Zain"},"down_vote_count":0,"up_vote_count":17,"is_accepted":false,"score":17,"last_activity_date":1631409759,"creation_date":1631341470,"answer_id":69140582,"question_id":51281702,"body_markdown":"I have recently encountered the same issue on Ubuntu 20.04 LTS.\r\n\r\nAfter searching a lot I have fixed this issue by removing the Android Studio path from the Flutter config by running below mention command.\r\n\r\n    flutter config --android-studio-dir=   \r\n\r\nSolution:\r\n\r\n![Solution ][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/DTOWP.png","title":"Unable to find bundled Java version on Flutter","body":"<p>I have recently encountered the same issue on Ubuntu 20.04 LTS.</p>\n<p>After searching a lot I have fixed this issue by removing the Android Studio path from the Flutter config by running below mention command.</p>\n<pre><code>flutter config --android-studio-dir=   \n</code></pre>\n<p>Solution:</p>\n<p><img src=\"https://i.stack.imgur.com/DTOWP.png\" alt=\"Solution \" /></p>\n"},{"tags":[],"owner":{"account_id":8805769,"reputation":692,"user_id":6580519,"display_name":"Mohammed Salim Al-Othman"},"down_vote_count":2,"up_vote_count":35,"is_accepted":false,"score":33,"last_activity_date":1684788013,"creation_date":1632036636,"answer_id":69241218,"question_id":51281702,"body_markdown":"In my case, I am using macOS, there was a copy of Android Studio Preview in my Downloads folder. I just deleted that Android Studio Preview file and the error was gone.","title":"Unable to find bundled Java version on Flutter","body":"<p>In my case, I am using macOS, there was a copy of Android Studio Preview in my Downloads folder. I just deleted that Android Studio Preview file and the error was gone.</p>\n"},{"tags":[],"owner":{"account_id":14335940,"reputation":487,"user_id":16878175,"display_name":"Bonny James"},"down_vote_count":1,"up_vote_count":27,"is_accepted":false,"score":26,"last_activity_date":1636109283,"creation_date":1636109283,"answer_id":69852062,"question_id":51281702,"body_markdown":"Those on the Beta Versions of MAC OS Beta, Xcode Beta, Android Studio Preview.\r\n\r\nJust ensure your path ways are correct to the Applications files for Flutter.\r\n\r\n\r\nTo fix JAVA Bundle for Android Studio Preview do this:\r\n\r\n    cd /Applications/Android\\ Studio\\ Preview.app/Contents/jre\r\n    \r\n    ln -s ../jre jdk\r\n    \r\n    ln -s &quot;/Library/Internet Plug-Ins/JavaAppletPlugin.plugin&quot; jdk\r\n    \r\n    flutter doctor -v","title":"Unable to find bundled Java version on Flutter","body":"<p>Those on the Beta Versions of MAC OS Beta, Xcode Beta, Android Studio Preview.</p>\n<p>Just ensure your path ways are correct to the Applications files for Flutter.</p>\n<p>To fix JAVA Bundle for Android Studio Preview do this:</p>\n<pre><code>cd /Applications/Android\\ Studio\\ Preview.app/Contents/jre\n\nln -s ../jre jdk\n\nln -s &quot;/Library/Internet Plug-Ins/JavaAppletPlugin.plugin&quot; jdk\n\nflutter doctor -v\n</code></pre>\n"},{"tags":[],"owner":{"account_id":13996900,"reputation":161,"user_id":10109457,"display_name":"Yogesh Alai"},"down_vote_count":2,"up_vote_count":0,"is_accepted":false,"score":-2,"last_activity_date":1643710578,"creation_date":1643710578,"answer_id":70938810,"question_id":51281702,"body_markdown":"Uninstall Android Studio...\r\n\r\nDelete folder $/Program Files/Android\r\n\r\nInstall Android studio...\r\n\r\n$flutter doctor","title":"Unable to find bundled Java version on Flutter","body":"<p>Uninstall Android Studio...</p>\n<p>Delete folder $/Program Files/Android</p>\n<p>Install Android studio...</p>\n<p>$flutter doctor</p>\n"},{"tags":[],"owner":{"account_id":20619305,"reputation":328,"user_id":15167772,"display_name":"Java Boss"},"down_vote_count":1,"up_vote_count":18,"is_accepted":false,"score":17,"last_activity_date":1644366133,"creation_date":1644366133,"answer_id":71042563,"question_id":51281702,"body_markdown":"I was getting error as below,\r\n\r\n[![enter image description here][1]][1]\r\n\r\nExecute below steps to resolve this issue,\r\n\r\n 1. Visit Google folder in user directory\r\n[![enter image description here][2]][2]\r\n 2. Delete the AndroidStudio4.1 directory ( For which I was getting error )\r\n[![enter image description here][3]][3]\r\n\r\nRun &quot;flutter doctor&quot; again. My problem was fixed\r\n\r\n  [1]: https://i.stack.imgur.com/pVulg.png\r\n  [2]: https://i.stack.imgur.com/HJ2ZJ.png\r\n  [3]: https://i.stack.imgur.com/HWFhD.png","title":"Unable to find bundled Java version on Flutter","body":"<p>I was getting error as below,</p>\n<p><a href=\"https://i.stack.imgur.com/pVulg.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/pVulg.png\" alt=\"enter image description here\" /></a></p>\n<p>Execute below steps to resolve this issue,</p>\n<ol>\n<li>Visit Google folder in user directory\n<a href=\"https://i.stack.imgur.com/HJ2ZJ.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/HJ2ZJ.png\" alt=\"enter image description here\" /></a></li>\n<li>Delete the AndroidStudio4.1 directory ( For which I was getting error )\n<a href=\"https://i.stack.imgur.com/HWFhD.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/HWFhD.png\" alt=\"enter image description here\" /></a></li>\n</ol>\n<p>Run &quot;flutter doctor&quot; again. My problem was fixed</p>\n"},{"tags":[],"owner":{"account_id":2011273,"reputation":102,"user_id":1799634,"display_name":"Abhi R"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1644941596,"creation_date":1644941596,"answer_id":71129776,"question_id":51281702,"body_markdown":"In my case, there were two &quot;Android Studio&quot; folders. One was &quot;Android Studio&quot; and another was &quot;Android Studio1&quot;, the &quot;Android Studio1&quot; had the actual app installed and the &quot;Android Studio&quot; folder was empty. Deleting the empty folder and renaming the &quot;Android Studio1&quot; to &quot;Android Studio&quot; fixed the issue. ","title":"Unable to find bundled Java version on Flutter","body":"<p>In my case, there were two &quot;Android Studio&quot; folders. One was &quot;Android Studio&quot; and another was &quot;Android Studio1&quot;, the &quot;Android Studio1&quot; had the actual app installed and the &quot;Android Studio&quot; folder was empty. Deleting the empty folder and renaming the &quot;Android Studio1&quot; to &quot;Android Studio&quot; fixed the issue.</p>\n"},{"tags":[],"owner":{"account_id":9816142,"reputation":111,"user_id":7272590,"display_name":"Abdulrahman Osama"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1663565588,"creation_date":1663565588,"answer_id":73768876,"question_id":51281702,"body_markdown":"If it&#39;s not related to JAVA_HOME path, then try the following:\r\n- go to path: `C:\\Users\\Administrator\\AppData\\Local\\Google`\r\nand delete the old version of AndroidStudioXXX.X folder\r\n- now run `flutter doctor` again.\r\nit fixes mine.","title":"Unable to find bundled Java version on Flutter","body":"<p>If it's not related to JAVA_HOME path, then try the following:</p>\n<ul>\n<li>go to path: <code>C:\\Users\\Administrator\\AppData\\Local\\Google</code>\nand delete the old version of AndroidStudioXXX.X folder</li>\n<li>now run <code>flutter doctor</code> again.\nit fixes mine.</li>\n</ul>\n"},{"tags":[],"owner":{"account_id":3730822,"reputation":1034,"user_id":3165630,"accept_rate":50,"display_name":"kennytilton"},"down_vote_count":2,"up_vote_count":0,"is_accepted":false,"score":-2,"last_activity_date":1668244827,"creation_date":1668244827,"answer_id":74411728,"question_id":51281702,"body_markdown":"FYI; This is on an M1 Mac.\r\n\r\n0. The summary error just says:\r\n```\r\n[!] Android Studio\r\n    ✗ Unable to find bundled Java version.\r\n```\r\n\r\n1. The summary also suggested `flutter doctor -v` to get more details. Now I see:\r\n```\r\n[!] Android Studio\r\n    • Android Studio at /Applications/Android Studio 4.2 Preview.app/Contents\r\n    • Flutter plugin can be installed from:\r\n      &#128296; https://plugins.jetbrains.com/plugin/9212-flutter\r\n    • Dart plugin can be installed from:\r\n      &#128296; https://plugins.jetbrains.com/plugin/6351-dart\r\n    ✗ Unable to find bundled Java version.\r\n    • Try updating or re-installing Android Studio.\r\n\r\n[✓] Android Studio (version 2021.3)\r\n    • Android Studio at /Applications/Android Studio.app/Contents\r\n    • Flutter plugin can be installed from:\r\n      &#128296; https://plugins.jetbrains.com/plugin/9212-flutter\r\n    • Dart plugin can be installed from:\r\n      &#128296; https://plugins.jetbrains.com/plugin/6351-dart\r\n    • Java version OpenJDK Runtime Environment (build 11.0.13+0-b1751.21-8125866)\r\n```\r\n2. I used Finder to delete `Android Studio 4.2 Preview.app`.\r\n3. `flutter doctor` now happy.\r\n\r\nHCI suggestion to `flutter doctor` maintainers: default to &quot;full details&quot; when reporting errors.\r\n\r\n","title":"Unable to find bundled Java version on Flutter","body":"<p>FYI; This is on an M1 Mac.</p>\n<ol start=\"0\">\n<li>The summary error just says:</li>\n</ol>\n<pre><code>[!] Android Studio\n    ✗ Unable to find bundled Java version.\n</code></pre>\n<ol>\n<li>The summary also suggested <code>flutter doctor -v</code> to get more details. Now I see:</li>\n</ol>\n<pre><code>[!] Android Studio\n    • Android Studio at /Applications/Android Studio 4.2 Preview.app/Contents\n    • Flutter plugin can be installed from:\n      🔨 https://plugins.jetbrains.com/plugin/9212-flutter\n    • Dart plugin can be installed from:\n      🔨 https://plugins.jetbrains.com/plugin/6351-dart\n    ✗ Unable to find bundled Java version.\n    • Try updating or re-installing Android Studio.\n\n[✓] Android Studio (version 2021.3)\n    • Android Studio at /Applications/Android Studio.app/Contents\n    • Flutter plugin can be installed from:\n      🔨 https://plugins.jetbrains.com/plugin/9212-flutter\n    • Dart plugin can be installed from:\n      🔨 https://plugins.jetbrains.com/plugin/6351-dart\n    • Java version OpenJDK Runtime Environment (build 11.0.13+0-b1751.21-8125866)\n</code></pre>\n<ol start=\"2\">\n<li>I used Finder to delete <code>Android Studio 4.2 Preview.app</code>.</li>\n<li><code>flutter doctor</code> now happy.</li>\n</ol>\n<p>HCI suggestion to <code>flutter doctor</code> maintainers: default to &quot;full details&quot; when reporting errors.</p>\n"},{"tags":[],"owner":{"account_id":14206364,"reputation":363,"user_id":10262757,"display_name":"Tina Lu"},"down_vote_count":0,"up_vote_count":11,"is_accepted":false,"score":11,"last_activity_date":1671105050,"creation_date":1671103450,"answer_id":74810760,"question_id":51281702,"body_markdown":"**For Android Studio Preview**\r\n\r\nI already install \r\n- Android Studio Preview\r\n- JDK via Android Studio Preview\r\n- Xcode v12 on MacOS 10.15\r\n\r\nHere is what I faced `[!] Android Studio: Unable to find bundled Java version.`\r\n\r\nSolution:\r\n1. Find out JDK PATH. Check [this](https://mkyong.com/java/how-to-set-java_home-environment-variable-on-mac-os-x/#what-is-usrlibexecjava-home)\r\n```\r\n#check bash or zsh\r\n\r\n$ echo $SHELL\r\n/bin/bash\r\n\r\n#return the path of java_home \r\n$ /usr/libexec/java_home\r\n```\r\n2.Add JAVA_HOME in .bash_profile for bash or .zshenv for zsh\r\n```\r\n$ nano ~/.bash_profile\r\nexport JAVA_HOME=$(/usr/libexec/java_home)\r\n$ source ~/.bash_profile\r\n```\r\n\r\n3.Link JDK path to Android Studio Preview\r\n```\r\n$ cd /Applications/Android\\ Studio\\ Preview.app/Contents\r\n\r\n# flutter doctor check if Contents/jre exist, link jbr with jre\r\n$ ln -s jbr jre\r\n\r\n$ cd jbr\r\n$ ln -s ../jbr jdk\r\n$ ln -s &quot;/Library/Internet Plug-Ins/JavaAppletPlugin.plugin&quot; jdk\r\n``` \r\n\r\n4.[Optional] if you have Android Studio at the same time, you could follow @Nalawala Murtuza solution. It is permitted for `Android Studio` and `Android Studio Preview` at the same time during check from flutter doctor. Doesn&#39;t need to delete Android Studio Preview.\r\n\r\n[![enter image description here][1]][1]\r\n\r\n5.Use `flutter doctor -v` to check \r\n\r\n\r\n  [1]: https://i.stack.imgur.com/93Kc4.png","title":"Unable to find bundled Java version on Flutter","body":"<p><strong>For Android Studio Preview</strong></p>\n<p>I already install</p>\n<ul>\n<li>Android Studio Preview</li>\n<li>JDK via Android Studio Preview</li>\n<li>Xcode v12 on MacOS 10.15</li>\n</ul>\n<p>Here is what I faced <code>[!] Android Studio: Unable to find bundled Java version.</code></p>\n<p>Solution:</p>\n<ol>\n<li>Find out JDK PATH. Check <a href=\"https://mkyong.com/java/how-to-set-java_home-environment-variable-on-mac-os-x/#what-is-usrlibexecjava-home\" rel=\"noreferrer\">this</a></li>\n</ol>\n<pre><code>#check bash or zsh\n\n$ echo $SHELL\n/bin/bash\n\n#return the path of java_home \n$ /usr/libexec/java_home\n</code></pre>\n<p>2.Add JAVA_HOME in .bash_profile for bash or .zshenv for zsh</p>\n<pre><code>$ nano ~/.bash_profile\nexport JAVA_HOME=$(/usr/libexec/java_home)\n$ source ~/.bash_profile\n</code></pre>\n<p>3.Link JDK path to Android Studio Preview</p>\n<pre><code>$ cd /Applications/Android\\ Studio\\ Preview.app/Contents\n\n# flutter doctor check if Contents/jre exist, link jbr with jre\n$ ln -s jbr jre\n\n$ cd jbr\n$ ln -s ../jbr jdk\n$ ln -s &quot;/Library/Internet Plug-Ins/JavaAppletPlugin.plugin&quot; jdk\n</code></pre>\n<p>4.[Optional] if you have Android Studio at the same time, you could follow @Nalawala Murtuza solution. It is permitted for <code>Android Studio</code> and <code>Android Studio Preview</code> at the same time during check from flutter doctor. Doesn't need to delete Android Studio Preview.</p>\n<p><a href=\"https://i.stack.imgur.com/93Kc4.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/93Kc4.png\" alt=\"enter image description here\" /></a></p>\n<p>5.Use <code>flutter doctor -v</code> to check</p>\n"},{"tags":[],"owner":{"account_id":1309929,"reputation":4821,"user_id":1258130,"accept_rate":60,"display_name":"eja"},"down_vote_count":1,"up_vote_count":385,"is_accepted":false,"score":384,"last_activity_date":1695017973,"creation_date":1673712508,"answer_id":75119315,"question_id":51281702,"body_markdown":"**Right approach**\r\n\r\nIn short and simple, the best approach to fix this issue is by upgrading your Android Studio and Flutter to latest versions, in order to avoid any potential issues (e.g. patching) in future.\r\n\r\n**Original answer**\r\n\r\nFor those having these issues with the latest Android Studio - Electric Eel version, and other canaries and preview releases, note that the bundled `jre` directory in the Android Studio installation folder is now renamed to `jbr`\r\n\r\nTo resolve this, just create a sym link `jre` -&gt; `jbr` and Flutter won&#39;t complain.\r\n\r\nOn Linux\r\n```\r\ncd ~/android-studio/ &amp;&amp; ln -s jbr jre\r\n```\r\n\r\nWindows (check installation folder)\r\n```\r\ncd C:\\Program Files\\Android\\Android Studio\r\nmklink /D &quot;jre&quot; &quot;jbr&quot;\r\n```\r\n\r\nor \r\n```\r\nNew-Item -ItemType SymbolicLink -Path .\\jre -Target .\\jbr\r\n```\r\n\r\nMac OS\r\n```\r\ncd /Applications/Android\\ Studio.app/Contents\r\nln -s jbr jre\r\n```\r\n\r\n---\r\n\r\nNote that if you are running a preview release, and depending on your OS, the default installation directory might be different, e.g. on Linux it would be \r\n```\r\n~/android-studio-preview/\r\n```\r\n\r\nIn either case, you can check the installation directory by running\r\n```\r\nflutter doctor -v\r\n```\r\n\r\n---\r\n\r\nAlso, in case if you run with permissions issues, you can try running the command with admin privileges, depending on your OS.\r\n\r\nFor example on Mac/Linux, you can just run the same command with `sudo` and it should work, additionally on Mac, you&#39;ll have to configure the **Disk Access** permissions, depends on your version, but most probably can be found under:\r\n\r\n`Settings - Privacy &amp; Security - Full Disk Access - Terminal`\r\n","title":"Unable to find bundled Java version on Flutter","body":"<p><strong>Right approach</strong></p>\n<p>In short and simple, the best approach to fix this issue is by upgrading your Android Studio and Flutter to latest versions, in order to avoid any potential issues (e.g. patching) in future.</p>\n<p><strong>Original answer</strong></p>\n<p>For those having these issues with the latest Android Studio - Electric Eel version, and other canaries and preview releases, note that the bundled <code>jre</code> directory in the Android Studio installation folder is now renamed to <code>jbr</code></p>\n<p>To resolve this, just create a sym link <code>jre</code> -&gt; <code>jbr</code> and Flutter won't complain.</p>\n<p>On Linux</p>\n<pre><code>cd ~/android-studio/ &amp;&amp; ln -s jbr jre\n</code></pre>\n<p>Windows (check installation folder)</p>\n<pre><code>cd C:\\Program Files\\Android\\Android Studio\nmklink /D &quot;jre&quot; &quot;jbr&quot;\n</code></pre>\n<p>or</p>\n<pre><code>New-Item -ItemType SymbolicLink -Path .\\jre -Target .\\jbr\n</code></pre>\n<p>Mac OS</p>\n<pre><code>cd /Applications/Android\\ Studio.app/Contents\nln -s jbr jre\n</code></pre>\n<hr />\n<p>Note that if you are running a preview release, and depending on your OS, the default installation directory might be different, e.g. on Linux it would be</p>\n<pre><code>~/android-studio-preview/\n</code></pre>\n<p>In either case, you can check the installation directory by running</p>\n<pre><code>flutter doctor -v\n</code></pre>\n<hr />\n<p>Also, in case if you run with permissions issues, you can try running the command with admin privileges, depending on your OS.</p>\n<p>For example on Mac/Linux, you can just run the same command with <code>sudo</code> and it should work, additionally on Mac, you'll have to configure the <strong>Disk Access</strong> permissions, depends on your version, but most probably can be found under:</p>\n<p><code>Settings - Privacy &amp; Security - Full Disk Access - Terminal</code></p>\n"},{"tags":[],"owner":{"account_id":23477001,"reputation":121,"user_id":17529670,"display_name":"Bhavesh Gujar"},"down_vote_count":0,"up_vote_count":9,"is_accepted":false,"score":9,"last_activity_date":1675699951,"creation_date":1673804879,"answer_id":75127145,"question_id":51281702,"body_markdown":"**For Windows**\r\nGo To android studio directory (Default C:\\Program Files\\Android\\Android Studio)\r\nremove jre folder\r\nrun cmd as administrator\r\n\r\n    cd C:\\Program Files\\Android\\Android Studio\r\n\r\n    mklink /D &quot;jre&quot; &quot;jbr&quot;","title":"Unable to find bundled Java version on Flutter","body":"<p><strong>For Windows</strong>\nGo To android studio directory (Default C:\\Program Files\\Android\\Android Studio)\nremove jre folder\nrun cmd as administrator</p>\n<pre><code>cd C:\\Program Files\\Android\\Android Studio\n\nmklink /D &quot;jre&quot; &quot;jbr&quot;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":14380790,"reputation":1309,"user_id":10388076,"display_name":"Boanerges"},"down_vote_count":0,"up_vote_count":56,"is_accepted":false,"score":56,"last_activity_date":1676110541,"creation_date":1673873431,"answer_id":75134478,"question_id":51281702,"body_markdown":"**For Mac Users**\r\n\r\nMake sure you have installed java and set the java_home path, you can use homebrew for that.\r\n\r\n\r\nIf you installed **Android Studio Electric Eel** Follow the following step\r\n\r\n 1. Go to your Applications folder. \r\n 2. Search for Android Studio.app. (`flutter doctor -v` also has an `Android Studio` entry which will show you the app location)\r\n 3. Right click and select Show Package Content.\r\n 4. Navigate into the Content Folder that opens.\r\n 5. Use your terminal to cd into that folder and then enter the command below and everything should be solved\r\n\r\n```\r\nln -s jbr jre\r\n```\r\nThe command above creates a symbolic link\r\n\r\n\r\nThe symbolic link also works on Ubuntu.","title":"Unable to find bundled Java version on Flutter","body":"<p><strong>For Mac Users</strong></p>\n<p>Make sure you have installed java and set the java_home path, you can use homebrew for that.</p>\n<p>If you installed <strong>Android Studio Electric Eel</strong> Follow the following step</p>\n<ol>\n<li>Go to your Applications folder.</li>\n<li>Search for Android Studio.app. (<code>flutter doctor -v</code> also has an <code>Android Studio</code> entry which will show you the app location)</li>\n<li>Right click and select Show Package Content.</li>\n<li>Navigate into the Content Folder that opens.</li>\n<li>Use your terminal to cd into that folder and then enter the command below and everything should be solved</li>\n</ol>\n<pre><code>ln -s jbr jre\n</code></pre>\n<p>The command above creates a symbolic link</p>\n<p>The symbolic link also works on Ubuntu.</p>\n"},{"tags":[],"owner":{"account_id":6799242,"reputation":2362,"user_id":5233189,"display_name":"GAYTH BACCARI"},"down_vote_count":0,"up_vote_count":187,"is_accepted":false,"score":187,"last_activity_date":1684787200,"creation_date":1673957070,"answer_id":75146150,"question_id":51281702,"body_markdown":"For Windows users:\r\n\r\nGo to `C:\\Program Files\\Android\\Android Studio`, then copy the contents of **jbr** and paste the contents into the **jre** folder.\r\n\r\nRun `flutter doctor` again and it will solve the problem.\r\n\r\n(I&#39;m running Android studio 2022.1)","title":"Unable to find bundled Java version on Flutter","body":"<p>For Windows users:</p>\n<p>Go to <code>C:\\Program Files\\Android\\Android Studio</code>, then copy the contents of <strong>jbr</strong> and paste the contents into the <strong>jre</strong> folder.</p>\n<p>Run <code>flutter doctor</code> again and it will solve the problem.</p>\n<p>(I'm running Android studio 2022.1)</p>\n"},{"tags":[],"owner":{"account_id":21648085,"reputation":207,"user_id":15969113,"display_name":"Shahed Oali Noor"},"down_vote_count":2,"up_vote_count":8,"is_accepted":false,"score":6,"last_activity_date":1684787868,"creation_date":1674049316,"answer_id":75160155,"question_id":51281702,"body_markdown":"Go to Finder &gt; Applications &gt; Android Studio:\r\n\r\n1. Right click and click &quot;Show package contents&quot;\r\n2. Create a new folder called `jre`\r\n3. Copy the contents of the `jbr` folder and paste them into the `jre` folder","title":"Unable to find bundled Java version on Flutter","body":"<p>Go to Finder &gt; Applications &gt; Android Studio:</p>\n<ol>\n<li>Right click and click &quot;Show package contents&quot;</li>\n<li>Create a new folder called <code>jre</code></li>\n<li>Copy the contents of the <code>jbr</code> folder and paste them into the <code>jre</code> folder</li>\n</ol>\n"},{"tags":[],"owner":{"account_id":19345709,"reputation":205,"user_id":14144329,"display_name":"K D"},"down_vote_count":2,"up_vote_count":0,"is_accepted":false,"score":-2,"last_activity_date":1676838735,"creation_date":1674087378,"answer_id":75166586,"question_id":51281702,"body_markdown":"WINDOWS SOLVED (Android studio 2022.1.1)\r\n\r\nGo to &quot;C:\\Users\\user\\AppData\\Local\\JetBrains\\Toolbox\\apps\\AndroidStudio\\ch-0\\221.6008.13.2211.9477386\\&quot; then **copy** the content of jbr and paste the content into jre folder\r\n\r\nrun doctor again and problem solved\r\n\r\nAdd Path to enviroment variables if nessary \r\nC:\\Users\\user\\AppData\\Local\\JetBrains\\Toolbox\\apps\\AndroidStudio\\ch-0\\221.6008.13.2211.9477386\\jre\\bin\r\n\r\nAnswer based on GAYTH BACCARI post. Thanks\r\n\r\nCheck if path in the enviorment variables are added for JAVA\r\n","title":"Unable to find bundled Java version on Flutter","body":"<p>WINDOWS SOLVED (Android studio 2022.1.1)</p>\n<p>Go to &quot;C:\\Users\\user\\AppData\\Local\\JetBrains\\Toolbox\\apps\\AndroidStudio\\ch-0\\221.6008.13.2211.9477386&quot; then <strong>copy</strong> the content of jbr and paste the content into jre folder</p>\n<p>run doctor again and problem solved</p>\n<p>Add Path to enviroment variables if nessary\nC:\\Users\\user\\AppData\\Local\\JetBrains\\Toolbox\\apps\\AndroidStudio\\ch-0\\221.6008.13.2211.9477386\\jre\\bin</p>\n<p>Answer based on GAYTH BACCARI post. Thanks</p>\n<p>Check if path in the enviorment variables are added for JAVA</p>\n"},{"tags":[],"owner":{"account_id":1207503,"reputation":1577,"user_id":1176769,"display_name":"S Gupta"},"down_vote_count":0,"up_vote_count":12,"is_accepted":false,"score":12,"last_activity_date":1674256306,"creation_date":1674256306,"answer_id":75190139,"question_id":51281702,"body_markdown":"In latest version of Flutter for Mac, you won&#39;t find jre folder under `/Applications/Android Studio.app/Contents`\r\n\r\nTherefore, you can start Terminal and run following commands to fix the issue:\r\n\r\n`cd /Applications/Android Studio.app/Contents`\r\n\r\n`ln -s jbr jre` (creates a symbolic link (shortcut) named `jre` pointing to `jbr`)\r\n\r\nIf you&#39;re on latest version of Mac, you might see error while trying to make changes under Applications folder using Terminal, resolve it by adding `sudo`, like this:\r\n\r\n`sudo ln -s jbr jre` (runs the above command as admin, it will ask you for Mac password)\r\n\r\nYou might still see security alert, then you must go to `System Settings &gt; Privacy &amp; Security &gt; App Management` and `Terminal` as in the list of apps allowed to make changes under Applications folder.\r\n\r\n","title":"Unable to find bundled Java version on Flutter","body":"<p>In latest version of Flutter for Mac, you won't find jre folder under <code>/Applications/Android Studio.app/Contents</code></p>\n<p>Therefore, you can start Terminal and run following commands to fix the issue:</p>\n<p><code>cd /Applications/Android Studio.app/Contents</code></p>\n<p><code>ln -s jbr jre</code> (creates a symbolic link (shortcut) named <code>jre</code> pointing to <code>jbr</code>)</p>\n<p>If you're on latest version of Mac, you might see error while trying to make changes under Applications folder using Terminal, resolve it by adding <code>sudo</code>, like this:</p>\n<p><code>sudo ln -s jbr jre</code> (runs the above command as admin, it will ask you for Mac password)</p>\n<p>You might still see security alert, then you must go to <code>System Settings &gt; Privacy &amp; Security &gt; App Management</code> and <code>Terminal</code> as in the list of apps allowed to make changes under Applications folder.</p>\n"},{"tags":[],"owner":{"account_id":5445664,"reputation":4925,"user_id":4332316,"accept_rate":20,"display_name":"Ali Akram"},"down_vote_count":2,"up_vote_count":0,"is_accepted":false,"score":-2,"last_activity_date":1675583219,"creation_date":1675583219,"answer_id":75350778,"question_id":51281702,"body_markdown":"**Solution for Mac**\r\n\r\n\r\nGo to finder and find Android studio:\r\n\r\n - right click and click show package contents \r\n - Create a new folder called jre  \r\n - copy the contents of the jbr folder and paste them into jre folder  \r\n - reload your terminal and type flutter doctor\r\n\r\nChill Pill :)","title":"Unable to find bundled Java version on Flutter","body":"<p><strong>Solution for Mac</strong></p>\n<p>Go to finder and find Android studio:</p>\n<ul>\n<li>right click and click show package contents</li>\n<li>Create a new folder called jre</li>\n<li>copy the contents of the jbr folder and paste them into jre folder</li>\n<li>reload your terminal and type flutter doctor</li>\n</ul>\n<p>Chill Pill :)</p>\n"},{"tags":[],"owner":{"account_id":18643295,"reputation":91,"user_id":15523520,"display_name":"Mohamed Ali"},"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1675620673,"creation_date":1675620673,"answer_id":75354431,"question_id":51281702,"body_markdown":"for Ubuntu 22.04 and android sturdio 2022.1.1 \r\n\r\n`cd path/to/android-studio`\r\n\r\nJust copy jbr directory to jre directory\r\n\r\n`cp -r jbr/ jre`\r\n\r\nand it will work \r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/xaiDb.png","title":"Unable to find bundled Java version on Flutter","body":"<p>for Ubuntu 22.04 and android sturdio 2022.1.1</p>\n<p><code>cd path/to/android-studio</code></p>\n<p>Just copy jbr directory to jre directory</p>\n<p><code>cp -r jbr/ jre</code></p>\n<p>and it will work</p>\n<p><a href=\"https://i.stack.imgur.com/xaiDb.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/xaiDb.png\" alt=\"enter image description here\" /></a></p>\n"},{"tags":[],"owner":{"account_id":6576070,"reputation":533,"user_id":5082063,"display_name":"Shahadat Hossain"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1681719004,"creation_date":1681719004,"answer_id":76032969,"question_id":51281702,"body_markdown":"If you are using Ubuntu and used JetBrains Toolbox then just do one thing: Go to the Android Studio directory `/home/shahadat/.local/share/JetBrains/Toolbox/apps/AndroidStudio/ch-0/222.4459.24.2221.9862592` address path will look like this.\r\n\r\nif you do not know how to find out the Android studio path from the JetBrains toolbox or anything else then type `flutter doctor -v` and then check Android Studio Section (Version 2022.2) - The version can vary. \r\n\r\nThen just copy the `jbr` directory and rename the directory/folder as `jre`.\r\n\r\nNow run `flutter doctor -v`\r\n\r\nThis works for me.","title":"Unable to find bundled Java version on Flutter","body":"<p>If you are using Ubuntu and used JetBrains Toolbox then just do one thing: Go to the Android Studio directory <code>/home/shahadat/.local/share/JetBrains/Toolbox/apps/AndroidStudio/ch-0/222.4459.24.2221.9862592</code> address path will look like this.</p>\n<p>if you do not know how to find out the Android studio path from the JetBrains toolbox or anything else then type <code>flutter doctor -v</code> and then check Android Studio Section (Version 2022.2) - The version can vary.</p>\n<p>Then just copy the <code>jbr</code> directory and rename the directory/folder as <code>jre</code>.</p>\n<p>Now run <code>flutter doctor -v</code></p>\n<p>This works for me.</p>\n"}],"owner":{"account_id":10414302,"reputation":3075,"user_id":7678862,"display_name":"shariful hasnine"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":326070,"favorite_count":0,"down_vote_count":0,"up_vote_count":308,"answer_count":30,"score":308,"last_activity_date":1695017973,"creation_date":1531300700,"question_id":51281702,"body_markdown":"I have `Android Studio version 3.0`. When I use the command `flutter doctor` it shows me the following: \r\n\r\n&gt; Unable to find bundled Java version\r\n\r\nMy current Java version is `(build 1.8.0_131-b11)` on Windows 10.\r\n\r\nI don&#39;t have any older versions of Android Studio on my computer. ","title":"Unable to find bundled Java version on Flutter","body":"<p>I have <code>Android Studio version 3.0</code>. When I use the command <code>flutter doctor</code> it shows me the following:</p>\n<blockquote>\n<p>Unable to find bundled Java version</p>\n</blockquote>\n<p>My current Java version is <code>(build 1.8.0_131-b11)</code> on Windows 10.</p>\n<p>I don't have any older versions of Android Studio on my computer.</p>\n"},{"tags":["java","android","intellij-idea","stripe-payments","androidx"],"comments":[{"owner":{"account_id":14752891,"reputation":2853,"user_id":10654456,"display_name":"hmunoz"},"score":0,"creation_date":1626296392,"post_id":68357851,"comment_id":120858350,"body_markdown":"what version of Stripe Terminal Android SDK are you using?","body":"what version of Stripe Terminal Android SDK are you using?"},{"owner":{"account_id":14752891,"reputation":2853,"user_id":10654456,"display_name":"hmunoz"},"score":0,"creation_date":1626296556,"post_id":68357851,"comment_id":120858397,"body_markdown":"ah looks like v2.0.0 ... any particular beta version of v2.0.0 you&#39;re on?","body":"ah looks like v2.0.0 ... any particular beta version of v2.0.0 you&#39;re on?"},{"owner":{"account_id":6984717,"reputation":2516,"user_id":6791222,"display_name":"Feroz Khan"},"score":0,"creation_date":1626325994,"post_id":68357851,"comment_id":120863843,"body_markdown":"It&#39;s `implementation &quot;com.stripe:stripeterminal:2.0.0&quot;`","body":"It&#39;s <code>implementation &quot;com.stripe:stripeterminal:2.0.0&quot;</code>"},{"owner":{"account_id":2253536,"reputation":2612,"user_id":1985257,"accept_rate":63,"display_name":"George B"},"score":0,"creation_date":1640026337,"post_id":68357851,"comment_id":124492873,"body_markdown":"I am having the same issue. Did you ever resolve this? I&#39;ve followed the stripe docs to a T.... or so I thought","body":"I am having the same issue. Did you ever resolve this? I&#39;ve followed the stripe docs to a T.... or so I thought"}],"answers":[{"tags":[],"owner":{"account_id":5569841,"reputation":3750,"user_id":4415625,"display_name":"dani-vta"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1694339662,"creation_date":1694339662,"answer_id":77075600,"question_id":68357851,"body_markdown":"I&#39;m posting this now since I&#39;ve just found myself in the same predicament with no answer to this post that keeps coming up.\r\n\r\nThe error `Usage of Kotlin internal declaration from different module` is actually an Intellij&#39;s inspection set with level `Error`. The code is fine; it&#39;s the inspection level that is preventing you from running the code.\r\n\r\nTo execute your application, you can either lower the severity of the inspection or disable it altogether.\r\n\r\nhttps://youtrack.jetbrains.com/issue/KTIJ-12493/Usage-of-Kotlin-internal-declaration-from-different-module-more...","title":"Usage of Kotlin internal declaration from different module while integrating Stripe in Android","body":"<p>I'm posting this now since I've just found myself in the same predicament with no answer to this post that keeps coming up.</p>\n<p>The error <code>Usage of Kotlin internal declaration from different module</code> is actually an Intellij's inspection set with level <code>Error</code>. The code is fine; it's the inspection level that is preventing you from running the code.</p>\n<p>To execute your application, you can either lower the severity of the inspection or disable it altogether.</p>\n<p><a href=\"https://youtrack.jetbrains.com/issue/KTIJ-12493/Usage-of-Kotlin-internal-declaration-from-different-module-more..\" rel=\"nofollow noreferrer\">https://youtrack.jetbrains.com/issue/KTIJ-12493/Usage-of-Kotlin-internal-declaration-from-different-module-more..</a>.</p>\n"}],"owner":{"account_id":6984717,"reputation":2516,"user_id":6791222,"display_name":"Feroz Khan"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":5457,"favorite_count":0,"down_vote_count":0,"up_vote_count":6,"answer_count":1,"score":6,"last_activity_date":1695017204,"creation_date":1626159571,"question_id":68357851,"body_markdown":"Following the [guidline][1], I&#39;m integrating Stripe in Android. In the step 4 they use `TerminalLifecycleObserver` in Application class. I&#39;ve followed all the steps above and also tried more brief guidline from their GitHub [repository][2]. But after all still getting the error **Usage of Kotlin internal declaration from different module** on `TerminalLifecycleObserver` in my Application class. Here&#39;s the screenshot showing the error and exception logs.\r\n[![enter image description here][3]][3]\r\n\r\n\r\n  [1]: https://stripe.com/docs/terminal/sdk/android\r\n  [2]: https://github.com/stripe/stripe-terminal-android\r\n  [3]: https://i.stack.imgur.com/TifgX.png","title":"Usage of Kotlin internal declaration from different module while integrating Stripe in Android","body":"<p>Following the <a href=\"https://stripe.com/docs/terminal/sdk/android\" rel=\"nofollow noreferrer\">guidline</a>, I'm integrating Stripe in Android. In the step 4 they use <code>TerminalLifecycleObserver</code> in Application class. I've followed all the steps above and also tried more brief guidline from their GitHub <a href=\"https://github.com/stripe/stripe-terminal-android\" rel=\"nofollow noreferrer\">repository</a>. But after all still getting the error <strong>Usage of Kotlin internal declaration from different module</strong> on <code>TerminalLifecycleObserver</code> in my Application class. Here's the screenshot showing the error and exception logs.\n<a href=\"https://i.stack.imgur.com/TifgX.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/TifgX.png\" alt=\"enter image description here\" /></a></p>\n"},{"tags":["java","ubuntu","ant"],"comments":[{"owner":{"account_id":21724606,"reputation":722,"user_id":16034206,"display_name":"experiment unit 1998X"},"score":0,"creation_date":1695016751,"post_id":77124690,"comment_id":135962399,"body_markdown":"maybe share the steps of your installation for debugging purposes?","body":"maybe share the steps of your installation for debugging purposes?"},{"owner":{"account_id":17717155,"reputation":527,"user_id":12863192,"display_name":"Ishan"},"score":2,"creation_date":1695016906,"post_id":77124690,"comment_id":135962409,"body_markdown":"What is the value of `JAVA_HOME`? `java -version` works, so that means, `PATH` is pointing to the correct directory. `JAVA_HOME` should point to the parent directory of the `bin/` directory in which the `java` binary exists. This path that it tries to run `java` from is really weird `/usr/lib/jvm/jdk-20/bin/java/bin/java`. If `/usr/lib/jvm/jdk-20/bin/java` is the java binary, then `JAVA_HOME` should be `/usr/lib/jvm/jdk-20`","body":"What is the value of <code>JAVA_HOME</code>? <code>java -version</code> works, so that means, <code>PATH</code> is pointing to the correct directory. <code>JAVA_HOME</code> should point to the parent directory of the <code>bin&#47;</code> directory in which the <code>java</code> binary exists. This path that it tries to run <code>java</code> from is really weird <code>&#47;usr&#47;lib&#47;jvm&#47;jdk-20&#47;bin&#47;java&#47;bin&#47;java</code>. If <code>&#47;usr&#47;lib&#47;jvm&#47;jdk-20&#47;bin&#47;java</code> is the java binary, then <code>JAVA_HOME</code> should be <code>&#47;usr&#47;lib&#47;jvm&#47;jdk-20</code>"},{"owner":{"account_id":213468,"reputation":103494,"user_id":466862,"display_name":"Mark Rotteveel"},"score":0,"creation_date":1695021182,"post_id":77124690,"comment_id":135963036,"body_markdown":"The error suggests that you have set `JAVA_HOME` to `/usr/lib/jvm/jdk-20/bin/java`, it should be `/usr/lib/jvm/jdk-20`.","body":"The error suggests that you have set <code>JAVA_HOME</code> to <code>&#47;usr&#47;lib&#47;jvm&#47;jdk-20&#47;bin&#47;java</code>, it should be <code>&#47;usr&#47;lib&#47;jvm&#47;jdk-20</code>."},{"owner":{"account_id":350117,"reputation":8653,"user_id":685806,"accept_rate":44,"display_name":"Pino"},"score":0,"creation_date":1695026065,"post_id":77124690,"comment_id":135963928,"body_markdown":"Please, do not post multiple questions about the same problem.  You should merge this post and the one at https://stackoverflow.com/questions/77124545/installing-ant-is-overriding-java-installation that contains other useful info.","body":"Please, do not post multiple questions about the same problem.  You should merge this post and the one at <a href=\"https://stackoverflow.com/questions/77124545/installing-ant-is-overriding-java-installation\" title=\"installing ant is overriding java installation\">stackoverflow.com/questions/77124545/&hellip;</a> that contains other useful info."}],"owner":{"account_id":1660953,"reputation":9180,"user_id":1529267,"accept_rate":51,"display_name":"Max"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":33,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1695013698,"creation_date":1695013698,"question_id":77124690,"body_markdown":"I have Java installed correctly. \r\n\r\n    pc19@-H110:~$  java -version\r\n    java version &quot;20.0.2&quot; 2023-07-18\r\n    Java(TM) SE Runtime Environment (build 20.0.2+9-78)\r\n    Java HotSpot(TM) 64-Bit Server VM (build 20.0.2+9-78, mixed mode, sharing)\r\n\r\nbut when I run by ant script. I get the following error\r\n\r\n    pc19@-H110:~/Documents/workspace/DCS$ ant all\r\n    \r\n    We cannot run Java, please ensure you have Java installed.\r\n      We have tried to execute /usr/lib/jvm/jdk-20/bin/java/bin/java but failed.\r\n    If you have installed Java in a unusual place you can set JAVA_HOME\r\n    to the directory containing the Java installation.\r\n\r\n","title":"JAVA_HOME, JAVA and ANT inconsistency","body":"<p>I have Java installed correctly.</p>\n<pre><code>pc19@-H110:~$  java -version\njava version &quot;20.0.2&quot; 2023-07-18\nJava(TM) SE Runtime Environment (build 20.0.2+9-78)\nJava HotSpot(TM) 64-Bit Server VM (build 20.0.2+9-78, mixed mode, sharing)\n</code></pre>\n<p>but when I run by ant script. I get the following error</p>\n<pre><code>pc19@-H110:~/Documents/workspace/DCS$ ant all\n\nWe cannot run Java, please ensure you have Java installed.\n  We have tried to execute /usr/lib/jvm/jdk-20/bin/java/bin/java but failed.\nIf you have installed Java in a unusual place you can set JAVA_HOME\nto the directory containing the Java installation.\n</code></pre>\n"},{"tags":["java","ant","sap-commerce-cloud"],"comments":[{"owner":{"account_id":5879019,"reputation":1195,"user_id":4629025,"display_name":"Raushan Kumar"},"score":0,"creation_date":1643979916,"post_id":70986256,"comment_id":125489191,"body_markdown":"the issue with the java version only please use answer given by @mkysoft","body":"the issue with the java version only please use answer given by @mkysoft"},{"owner":{"account_id":347033,"reputation":67162,"user_id":680920,"accept_rate":85,"display_name":"quickshiftin"},"score":0,"creation_date":1659647729,"post_id":70986256,"comment_id":129350703,"body_markdown":"FWIW - I&#39;m using `sapmachine:18` via Docker on `2205` (per link from @mkysoft) and still get a similar error message...","body":"FWIW - I&#39;m using <code>sapmachine:18</code> via Docker on <code>2205</code> (per link from @mkysoft) and still get a similar error message..."},{"owner":{"account_id":7959893,"reputation":427,"user_id":6008020,"accept_rate":14,"display_name":"Dmytro Lysak"},"score":0,"creation_date":1665489654,"post_id":70986256,"comment_id":130707921,"body_markdown":"Same, using sapmachine 2205 with recommended jdk17.0 and am getting same error.","body":"Same, using sapmachine 2205 with recommended jdk17.0 and am getting same error."},{"owner":{"account_id":7959893,"reputation":427,"user_id":6008020,"accept_rate":14,"display_name":"Dmytro Lysak"},"score":1,"creation_date":1665495830,"post_id":70986256,"comment_id":130710582,"body_markdown":"Managed to fix it I think, at least I can progress. Issue was with deperecation, moving from jdk 11 to jdk 17 probably caused some; adding in the option &quot;--add-opens &lt;thing&gt;&quot; into JDK_JAVA_OPTIONS environment variable fixed it, in my case it would be \n&quot;--add-opens java.xml/com.sun.org.apache.xpath.internal=ALL_UNNAMED&quot;\n\nGot it from:\nhttps://blogs.oracle.com/javamagazine/post/its-time-to-move-your-applications-to-java-17-heres-why-and-heres-how","body":"Managed to fix it I think, at least I can progress. Issue was with deperecation, moving from jdk 11 to jdk 17 probably caused some; adding in the option &quot;--add-opens &lt;thing&gt;&quot; into JDK_JAVA_OPTIONS environment variable fixed it, in my case it would be  &quot;--add-opens java.xml/com.sun.org.apache.xpath.internal=ALL_UNNAMED&quot;  Got it from: <a href=\"https://blogs.oracle.com/javamagazine/post/its-time-to-move-your-applications-to-java-17-heres-why-and-heres-how\" rel=\"nofollow noreferrer\">blogs.oracle.com/javamagazine/post/&hellip;</a>"},{"owner":{"account_id":2248300,"reputation":104,"user_id":2007077,"accept_rate":75,"display_name":"Alexey"},"score":0,"creation_date":1666622066,"post_id":70986256,"comment_id":130974666,"body_markdown":"For 2205 you have to run .setantenv before the build","body":"For 2205 you have to run .setantenv before the build"}],"answers":[{"tags":[],"owner":{"account_id":3392662,"reputation":5537,"user_id":2847159,"display_name":"mkysoft"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1643978000,"creation_date":1643978000,"answer_id":70986457,"question_id":70986256,"body_markdown":"You need to use SAP Machine 11.0 as JDK for version 2105.\r\nFull system requirements by versions are [here](https://gunce.mkysoft.com/hybris-requirements/).","title":"java.lang.IllegalAccessError while ant build in SAP Hybris/Commerce version 2105","body":"<p>You need to use SAP Machine 11.0 as JDK for version 2105.\nFull system requirements by versions are <a href=\"https://gunce.mkysoft.com/hybris-requirements/\" rel=\"nofollow noreferrer\">here</a>.</p>\n"},{"tags":[],"owner":{"account_id":6376478,"reputation":1021,"user_id":4947234,"display_name":"Timothy.Li"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1649639835,"creation_date":1649639835,"answer_id":71821791,"question_id":70986256,"body_markdown":"SAP Machine JDK 17 is too **high** for SAP commerce cloud 2105. &lt;br&gt;\r\nPlease use SAP Machine JDK 11 instead.&lt;br&gt;\r\n[Here][1] is SAP official guide for SAP commerce cloud installation.\r\n\r\n\r\n[![enter image description here][2]][2]\r\n\r\n\r\n  [1]: https://help.sap.com/docs/SAP_COMMERCE/a74589c3a81a4a95bf51d87258c0ab15/8c71300f866910149b40c88dfc0de431.html\r\n  [2]: https://i.stack.imgur.com/dFyF6.png","title":"java.lang.IllegalAccessError while ant build in SAP Hybris/Commerce version 2105","body":"<p>SAP Machine JDK 17 is too <strong>high</strong> for SAP commerce cloud 2105. <br>\nPlease use SAP Machine JDK 11 instead.<br>\n<a href=\"https://help.sap.com/docs/SAP_COMMERCE/a74589c3a81a4a95bf51d87258c0ab15/8c71300f866910149b40c88dfc0de431.html\" rel=\"nofollow noreferrer\">Here</a> is SAP official guide for SAP commerce cloud installation.</p>\n<p><a href=\"https://i.stack.imgur.com/dFyF6.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/dFyF6.png\" alt=\"enter image description here\" /></a></p>\n"},{"tags":[],"owner":{"account_id":347033,"reputation":67162,"user_id":680920,"accept_rate":85,"display_name":"quickshiftin"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1660147137,"creation_date":1660147137,"answer_id":73309364,"question_id":70986256,"body_markdown":"For Docker users make sure to use the appropriate [sapmachine image](https://hub.docker.com/_/sapmachine) based on your version of SAP Commerce, as mentioned by @mkysoft above.\r\n\r\nAlso note for newer versions (2205) you do need version 17.","title":"java.lang.IllegalAccessError while ant build in SAP Hybris/Commerce version 2105","body":"<p>For Docker users make sure to use the appropriate <a href=\"https://hub.docker.com/_/sapmachine\" rel=\"nofollow noreferrer\">sapmachine image</a> based on your version of SAP Commerce, as mentioned by @mkysoft above.</p>\n<p>Also note for newer versions (2205) you do need version 17.</p>\n"},{"tags":[],"owner":{"account_id":20975094,"reputation":21,"user_id":15411310,"display_name":"scrum"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1666112684,"creation_date":1666112047,"answer_id":74114685,"question_id":70986256,"body_markdown":"Unable to add a comment to original question. The solution proposed by [@dmytrolysak][1] worked for me. I had to add the option `&quot;--add-opens java.xml/com.sun.org.apache.xpath.internal=ALL-UNNAMED&quot;` in my setantenv.sh for ANT_OPTS.\r\n\r\nThis is for hybris version 2205 and Java version is sapMachine 17.x.\r\n\r\n\r\n  [1]: https://stackoverflow.com/users/6008020/dmytro-lysak","title":"java.lang.IllegalAccessError while ant build in SAP Hybris/Commerce version 2105","body":"<p>Unable to add a comment to original question. The solution proposed by <a href=\"https://stackoverflow.com/users/6008020/dmytro-lysak\">@dmytrolysak</a> worked for me. I had to add the option <code>&quot;--add-opens java.xml/com.sun.org.apache.xpath.internal=ALL-UNNAMED&quot;</code> in my setantenv.sh for ANT_OPTS.</p>\n<p>This is for hybris version 2205 and Java version is sapMachine 17.x.</p>\n"},{"tags":[],"owner":{"account_id":4284001,"reputation":183,"user_id":3502456,"display_name":"Kashif Ibrahim"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1672870024,"creation_date":1672870024,"answer_id":75011860,"question_id":70986256,"body_markdown":"You should be using the correct Java version, better use the **SAPMachine** instead of Java for no-nonsense compatibility issues: https://github.com/SAP/SapMachine\r\n\r\n**2105 requires Version 11, and 2205 needs 17**\r\n\r\nAlso, add these exports to your **setantenv**:\r\n\r\n    export ANT_OPTS=&quot;-Xmx2g -Dfile.encoding=UTF-8 \\\r\n    --add-exports java.xml/com.sun.org.apache.xpath.internal=ALL-UNNAMED \\\r\n    --add-exports java.xml/com.sun.org.apache.xpath.internal.objects=ALL-UNNAMED&quot;\r\n\r\n","title":"java.lang.IllegalAccessError while ant build in SAP Hybris/Commerce version 2105","body":"<p>You should be using the correct Java version, better use the <strong>SAPMachine</strong> instead of Java for no-nonsense compatibility issues: <a href=\"https://github.com/SAP/SapMachine\" rel=\"nofollow noreferrer\">https://github.com/SAP/SapMachine</a></p>\n<p><strong>2105 requires Version 11, and 2205 needs 17</strong></p>\n<p>Also, add these exports to your <strong>setantenv</strong>:</p>\n<pre><code>export ANT_OPTS=&quot;-Xmx2g -Dfile.encoding=UTF-8 \\\n--add-exports java.xml/com.sun.org.apache.xpath.internal=ALL-UNNAMED \\\n--add-exports java.xml/com.sun.org.apache.xpath.internal.objects=ALL-UNNAMED&quot;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2654765,"reputation":2027,"user_id":2295692,"display_name":"Stephen"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1686231936,"creation_date":1686153656,"answer_id":76425172,"question_id":70986256,"body_markdown":"I came across this error in my Azure pipeline build after upgrading from SAP Commerce 2105 to 2211:\r\n\r\n    java.lang.IllegalAccessError: class \r\n    com.oopsconsultancy.xmltask.jdk15.XPathAnalyser15 (in unnamed module \r\n    @0x4b5a078a) cannot access class com.sun.org.apache.xpath.internal.XPathAPI (in \r\n    module java.xml) \r\n    because module java.xml does not export com.sun.org.apache.xpath.internal to \r\n    unnamed module @0x4b5a078a\r\n\r\nThe pipeline build was getting that error when trying to run the following scriptlet from my azure-pipelines.yml file:\r\n\r\n    - task: Ant@1\r\n      inputs:\r\n        buildFile: &#39;$(workspace)/hybris/bin/platform&#39;\r\n        options: &#39;addoninstall -DaddonStorefront.yacceleratorstorefront=mystorefront -Daddonnames=&quot;b2bacceleratoraddon,commerceorgaddon,assistedservicestorefront,smarteditaddon,sapcoreaddon,b2bpunchoutaddon,myraddon,b2boccaddon&quot;&#39;\r\n        javaHomeOption: &#39;JDKVersion&#39;\r\n        jdkVersionOption: &#39;1.17&#39;\r\n        publishJUnitResults: false\r\n      displayName: ANT - install add-ons\r\n\r\nIn upgrading from 2105 to 2211, we upgraded java from 11 to 17. The first problem that I had to get past was using the correct the java version. I had to include the following scriptlet towards the beginning my azure-pipelines.yml file to make sure I was using java 17:\r\n\r\n    - task: JavaToolInstaller@0\r\n      inputs:\r\n        versionSpec: &#39;17&#39;\r\n        jdkArchitectureOption: &#39;x64&#39;\r\n        jdkSourceOption: &#39;PreInstalled&#39;\r\n      displayName: &#39;Installing Java 17&#39;\r\n\r\nBefore I did this, I found that azure pipelines was using the operating system installed version of java, which was version 11. After I added the above scriptlet, that took care of that problem, but I was still getting the IllegalAccessError. \r\n\r\nI played around with the ANT_OPTS variable with the &quot;--add-opens java.xml/com.sun.org.apache.xpath.internal=ALL-UNNAMED&quot; option, but that didn&#39;t fix anything for me. While working with the environment variables, I discovered that the version of ant being used was the operating system installed version and not the version included with SAP Commerce. I had been running the setantenv.sh command in a \r\nseparate scriptlet, thinking that this would properly set the ANT_HOME variable to point to the correct location, and I guess this was being lost once that scriptlet finished and the next one was being run.\r\n\r\nWhat fixed the problem for me was not using the &#39;ANT - install add-ons&#39; scriptlet mentioned above in lieu of replacing it with a &#39;script&#39; type scriptlet where I run the baseline configuration, addoninstall, and clean all commands in the same scriptlet:\r\n\r\n    - script: |\r\n        cd $(workspace)/hybris/bin/platform\r\n        . ./setantenv.sh\r\n\r\n        echo &quot;JAVA_HOME = $JAVA_HOME&quot;\r\n        echo &quot;ANT_HOME = $ANT_HOME&quot;\r\n        echo &quot;ANT_OPTS = $ANT_OPTS&quot;\r\n\r\n        $(ANT_HOME)/bin/ant clean all -Dinput.template=develop\r\n\r\n        /usr/bin/cp -r $(workspace)/hybris/bin/custom/core-customize/config/. $(workspace)/hybris/config\r\n        rc=$?\r\n        if [ x&quot;$rc&quot; != x&quot;0&quot; ]; then \r\n            exit -1\r\n        fi\r\n\r\n        $(ANT_HOME)/bin/ant addoninstall -DaddonStorefront.yacceleratorstorefront=graybarstorefront -Daddonnames=&quot;b2bacceleratoraddon,commerceorgaddon,assistedservicestorefront,smarteditaddon,sapcoreaddon,b2bpunchoutaddon,graybaraddon,b2boccaddon&quot;\r\n        rc=$?\r\n        if [ x&quot;$rc&quot; != x&quot;0&quot; ]; then \r\n            exit -1\r\n        fi\r\n\r\n        $(ANT_HOME)/bin/ant clean all\r\n        rc=$?\r\n        if [ x&quot;$rc&quot; != x&quot;0&quot; ]; then \r\n            exit -1\r\n        fi\r\n\r\n      displayName: Running the ANT commands\r\n  \r\nNow the azure pipeline build is working correctly for me.","title":"java.lang.IllegalAccessError while ant build in SAP Hybris/Commerce version 2105","body":"<p>I came across this error in my Azure pipeline build after upgrading from SAP Commerce 2105 to 2211:</p>\n<pre><code>java.lang.IllegalAccessError: class \ncom.oopsconsultancy.xmltask.jdk15.XPathAnalyser15 (in unnamed module \n@0x4b5a078a) cannot access class com.sun.org.apache.xpath.internal.XPathAPI (in \nmodule java.xml) \nbecause module java.xml does not export com.sun.org.apache.xpath.internal to \nunnamed module @0x4b5a078a\n</code></pre>\n<p>The pipeline build was getting that error when trying to run the following scriptlet from my azure-pipelines.yml file:</p>\n<pre><code>- task: Ant@1\n  inputs:\n    buildFile: '$(workspace)/hybris/bin/platform'\n    options: 'addoninstall -DaddonStorefront.yacceleratorstorefront=mystorefront -Daddonnames=&quot;b2bacceleratoraddon,commerceorgaddon,assistedservicestorefront,smarteditaddon,sapcoreaddon,b2bpunchoutaddon,myraddon,b2boccaddon&quot;'\n    javaHomeOption: 'JDKVersion'\n    jdkVersionOption: '1.17'\n    publishJUnitResults: false\n  displayName: ANT - install add-ons\n</code></pre>\n<p>In upgrading from 2105 to 2211, we upgraded java from 11 to 17. The first problem that I had to get past was using the correct the java version. I had to include the following scriptlet towards the beginning my azure-pipelines.yml file to make sure I was using java 17:</p>\n<pre><code>- task: JavaToolInstaller@0\n  inputs:\n    versionSpec: '17'\n    jdkArchitectureOption: 'x64'\n    jdkSourceOption: 'PreInstalled'\n  displayName: 'Installing Java 17'\n</code></pre>\n<p>Before I did this, I found that azure pipelines was using the operating system installed version of java, which was version 11. After I added the above scriptlet, that took care of that problem, but I was still getting the IllegalAccessError.</p>\n<p>I played around with the ANT_OPTS variable with the &quot;--add-opens java.xml/com.sun.org.apache.xpath.internal=ALL-UNNAMED&quot; option, but that didn't fix anything for me. While working with the environment variables, I discovered that the version of ant being used was the operating system installed version and not the version included with SAP Commerce. I had been running the setantenv.sh command in a\nseparate scriptlet, thinking that this would properly set the ANT_HOME variable to point to the correct location, and I guess this was being lost once that scriptlet finished and the next one was being run.</p>\n<p>What fixed the problem for me was not using the 'ANT - install add-ons' scriptlet mentioned above in lieu of replacing it with a 'script' type scriptlet where I run the baseline configuration, addoninstall, and clean all commands in the same scriptlet:</p>\n<pre><code>- script: |\n    cd $(workspace)/hybris/bin/platform\n    . ./setantenv.sh\n\n    echo &quot;JAVA_HOME = $JAVA_HOME&quot;\n    echo &quot;ANT_HOME = $ANT_HOME&quot;\n    echo &quot;ANT_OPTS = $ANT_OPTS&quot;\n\n    $(ANT_HOME)/bin/ant clean all -Dinput.template=develop\n\n    /usr/bin/cp -r $(workspace)/hybris/bin/custom/core-customize/config/. $(workspace)/hybris/config\n    rc=$?\n    if [ x&quot;$rc&quot; != x&quot;0&quot; ]; then \n        exit -1\n    fi\n\n    $(ANT_HOME)/bin/ant addoninstall -DaddonStorefront.yacceleratorstorefront=graybarstorefront -Daddonnames=&quot;b2bacceleratoraddon,commerceorgaddon,assistedservicestorefront,smarteditaddon,sapcoreaddon,b2bpunchoutaddon,graybaraddon,b2boccaddon&quot;\n    rc=$?\n    if [ x&quot;$rc&quot; != x&quot;0&quot; ]; then \n        exit -1\n    fi\n\n    $(ANT_HOME)/bin/ant clean all\n    rc=$?\n    if [ x&quot;$rc&quot; != x&quot;0&quot; ]; then \n        exit -1\n    fi\n\n  displayName: Running the ANT commands\n</code></pre>\n<p>Now the azure pipeline build is working correctly for me.</p>\n"},{"tags":[],"owner":{"account_id":11445284,"reputation":631,"user_id":8389388,"display_name":"Pines Tran"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695013051,"creation_date":1695013051,"answer_id":77124645,"question_id":70986256,"body_markdown":"We can use any JDK (from Oracle or SAP). **This seems that the ANT was not set properly**.\r\nIn the platform folder, just executed: \r\n\r\n    \\hybris\\bin\\platform&gt; setantenv.bat","title":"java.lang.IllegalAccessError while ant build in SAP Hybris/Commerce version 2105","body":"<p>We can use any JDK (from Oracle or SAP). <strong>This seems that the ANT was not set properly</strong>.\nIn the platform folder, just executed:</p>\n<pre><code>\\hybris\\bin\\platform&gt; setantenv.bat\n</code></pre>\n"}],"owner":{"account_id":24108753,"reputation":33,"user_id":18079592,"display_name":"Swathi"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":8385,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"answer_count":7,"score":3,"last_activity_date":1695013051,"creation_date":1643976986,"question_id":70986256,"body_markdown":"I am new to Hybris and trying to setup the Hybris latest version, I am trying to build it using ant clean all and getting the below error. I am using SAP Machine JDK 17 and also set it&#39;s path in Environment variables. Please help how to solve this!\r\n\r\n```\r\n** Java version **\r\nC:\\CXCOMM210500P_5-70005661\\hybris\\bin\\platform&gt;java -version\r\nPicked up JAVA_TOOL_OPTIONS: -Djava.vendor=&quot;Sun Microsystems Inc.&quot;\r\nopenjdk version &quot;17.0.1&quot; 2021-10-19 LTS\r\nOpenJDK Runtime Environment SapMachine (build 17.0.1+12-LTS)\r\nOpenJDK 64-Bit Server VM SapMachine (build 17.0.1+12-LTS, mixed mode, sharing)\r\n\r\n** Error logs **\r\n\r\nC:\\CXCOMM210500P_5-70005661\\hybris\\bin\\platform\\resources\\ant\\mavenTasks.xml:201: java.lang.IllegalAccessError: class com.oopsconsultancy.xmltask.jdk15.XPathAnalyser15 (in unnamed module @0x2f9f7dcf) cannot access class com.sun.org.apache.xpath.internal.XPathAPI (in module java.xml) because module java.xml does not export com.sun.org.apache.xpath.internal to unnamed module @0x2f9f7dcf\r\n        at com.oopsconsultancy.xmltask.jdk15.XPathAnalyser15.analyse(XPathAnalyser15.java:28)\r\n        at com.oopsconsultancy.xmltask.XmlReplace.apply(XmlReplace.java:72)\r\n        at com.oopsconsultancy.xmltask.XmlReplacement.apply(XmlReplacement.java:61)\r\n        at com.oopsconsultancy.xmltask.ant.XmlTask.processDoc(XmlTask.java:692)\r\n        at com.oopsconsultancy.xmltask.ant.XmlTask.execute(XmlTask.java:661)\r\n        at org.apache.tools.ant.UnknownElement.execute(UnknownElement.java:299)\r\n        at jdk.internal.reflect.GeneratedMethodAccessor4.invoke(Unknown Source)\r\n        at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n     \r\n````","title":"java.lang.IllegalAccessError while ant build in SAP Hybris/Commerce version 2105","body":"<p>I am new to Hybris and trying to setup the Hybris latest version, I am trying to build it using ant clean all and getting the below error. I am using SAP Machine JDK 17 and also set it's path in Environment variables. Please help how to solve this!</p>\n<pre><code>** Java version **\nC:\\CXCOMM210500P_5-70005661\\hybris\\bin\\platform&gt;java -version\nPicked up JAVA_TOOL_OPTIONS: -Djava.vendor=&quot;Sun Microsystems Inc.&quot;\nopenjdk version &quot;17.0.1&quot; 2021-10-19 LTS\nOpenJDK Runtime Environment SapMachine (build 17.0.1+12-LTS)\nOpenJDK 64-Bit Server VM SapMachine (build 17.0.1+12-LTS, mixed mode, sharing)\n\n** Error logs **\n\nC:\\CXCOMM210500P_5-70005661\\hybris\\bin\\platform\\resources\\ant\\mavenTasks.xml:201: java.lang.IllegalAccessError: class com.oopsconsultancy.xmltask.jdk15.XPathAnalyser15 (in unnamed module @0x2f9f7dcf) cannot access class com.sun.org.apache.xpath.internal.XPathAPI (in module java.xml) because module java.xml does not export com.sun.org.apache.xpath.internal to unnamed module @0x2f9f7dcf\n        at com.oopsconsultancy.xmltask.jdk15.XPathAnalyser15.analyse(XPathAnalyser15.java:28)\n        at com.oopsconsultancy.xmltask.XmlReplace.apply(XmlReplace.java:72)\n        at com.oopsconsultancy.xmltask.XmlReplacement.apply(XmlReplacement.java:61)\n        at com.oopsconsultancy.xmltask.ant.XmlTask.processDoc(XmlTask.java:692)\n        at com.oopsconsultancy.xmltask.ant.XmlTask.execute(XmlTask.java:661)\n        at org.apache.tools.ant.UnknownElement.execute(UnknownElement.java:299)\n        at jdk.internal.reflect.GeneratedMethodAccessor4.invoke(Unknown Source)\n        at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n     \n</code></pre>\n"},{"tags":["javascript","java","nashorn","transpiler"],"answers":[{"tags":[],"owner":{"account_id":2971110,"reputation":14744,"user_id":2523147,"accept_rate":38,"display_name":"prime"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1497122638,"creation_date":1497122638,"answer_id":44477226,"question_id":43406743,"body_markdown":"What is the script engine you used ?\r\n\r\nAnyway that is because some javaScript engines does not recognize `const` keyword. (ex: Nashorn does not recognize it).\r\n\r\nIn this [book][1] it says something like,\r\n&quot;This option is available if a script uses the const keyword, which is not recognized by Nashorn.&quot;\r\n\r\nAnd it has some existing bugs filed,\r\n\r\n - https://netbeans.org/bugzilla/show_bug.cgi?id=226477\r\n - https://bugs.openjdk.java.net/browse/JDK-8024712\r\n\r\n  [1]: https://books.google.lk/books?id=qF8nCgAAQBAJ&amp;pg=PA296&amp;lpg=PA296&amp;dq=Nashorn%20does%20not%20recognize%20const%20keyword&amp;source=bl&amp;ots=bLHdlJGisW&amp;sig=Uib_oI5Qi5tfyFw9-FxBI1b9YZI&amp;hl=en&amp;sa=X&amp;ved=0ahUKEwjHw8rQ_rPUAhWHPo8KHZiDCkoQ6AEIPjAE#v=onepage&amp;q=Nashorn%20does%20not%20recognize%20const%20keyword&amp;f=false","title":"Call javascript that contains &#39;const&#39; from java?","body":"<p>What is the script engine you used ?</p>\n\n<p>Anyway that is because some javaScript engines does not recognize <code>const</code> keyword. (ex: Nashorn does not recognize it).</p>\n\n<p>In this <a href=\"https://books.google.lk/books?id=qF8nCgAAQBAJ&amp;pg=PA296&amp;lpg=PA296&amp;dq=Nashorn%20does%20not%20recognize%20const%20keyword&amp;source=bl&amp;ots=bLHdlJGisW&amp;sig=Uib_oI5Qi5tfyFw9-FxBI1b9YZI&amp;hl=en&amp;sa=X&amp;ved=0ahUKEwjHw8rQ_rPUAhWHPo8KHZiDCkoQ6AEIPjAE#v=onepage&amp;q=Nashorn%20does%20not%20recognize%20const%20keyword&amp;f=false\" rel=\"nofollow noreferrer\">book</a> it says something like,\n\"This option is available if a script uses the const keyword, which is not recognized by Nashorn.\"</p>\n\n<p>And it has some existing bugs filed,</p>\n\n<ul>\n<li><a href=\"https://netbeans.org/bugzilla/show_bug.cgi?id=226477\" rel=\"nofollow noreferrer\">https://netbeans.org/bugzilla/show_bug.cgi?id=226477</a></li>\n<li><a href=\"https://bugs.openjdk.java.net/browse/JDK-8024712\" rel=\"nofollow noreferrer\">https://bugs.openjdk.java.net/browse/JDK-8024712</a></li>\n</ul>\n"},{"tags":[],"owner":{"account_id":3848680,"reputation":4287,"user_id":3189360,"display_name":"A. Sundararajan"},"down_vote_count":0,"up_vote_count":8,"is_accepted":false,"score":8,"last_activity_date":1497153392,"creation_date":1497153392,"answer_id":44480223,"question_id":43406743,"body_markdown":"With --language=es6 option, nashorn supports &quot;const&quot; keyword.\r\n\r\n    $ jjs --language=es6 \r\n    jjs&gt; const x = 44\r\n\r\nIf you&#39;re programmatically creating Nashorn script engine, you can still pass options to Nashorn using &quot;nashorn.args&quot; System property. \r\n\r\nFile Main.java:\r\n\r\n    import javax.script.*;\r\n    \r\n    public class Main {\r\n        public static void main(String[] args) throws Exception {\r\n            ScriptEngineManager m = new ScriptEngineManager();\r\n            ScriptEngine e = m.getEngineByName(&quot;nashorn&quot;);\r\n            e.eval(&quot;const X = 44; print(X)&quot;);\r\n        }\r\n    }\r\n\r\n\r\n    $ javac Main.java\r\n    \r\n    $ java Main\r\n\r\n    Exception in thread &quot;main&quot; javax.script.ScriptException: &lt;eval&gt;:1:0 Expected an operand but found const\r\n    const X = 44; print(X)\r\n    ^ in &lt;eval&gt; at line number 1 at column number 0\r\n    \tat jdk.nashorn.api.scripting.NashornScriptEngine.throwAsScriptException(NashornScriptEngine.java:470)\r\n    \tat jdk.nashorn.api.scripting.NashornScriptEngine.compileImpl(NashornScriptEngine.java:537)\r\n    \tat jdk.nashorn.api.scripting.NashornScriptEngine.compileImpl(NashornScriptEngine.java:524)\r\n    \tat jdk.nashorn.api.scripting.NashornScriptEngine.evalImpl(NashornScriptEngine.java:402)\r\n    \tat jdk.nashorn.api.scripting.NashornScriptEngine.eval(NashornScriptEngine.java:155)\r\n    \tat javax.script.AbstractScriptEngine.eval(AbstractScriptEngine.java:264)\r\n    \tat Main.main(Main.java:7)\r\n\r\n    $ java -Dnashorn.args=--language=es6 Main\r\n    44\r\n\r\nSee here -&gt; https://wiki.openjdk.java.net/display/Nashorn/Nashorn+jsr223+engine+notes\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n","title":"Call javascript that contains &#39;const&#39; from java?","body":"<p>With --language=es6 option, nashorn supports \"const\" keyword.</p>\n\n<pre><code>$ jjs --language=es6 \njjs&gt; const x = 44\n</code></pre>\n\n<p>If you're programmatically creating Nashorn script engine, you can still pass options to Nashorn using \"nashorn.args\" System property. </p>\n\n<p>File Main.java:</p>\n\n<pre><code>import javax.script.*;\n\npublic class Main {\n    public static void main(String[] args) throws Exception {\n        ScriptEngineManager m = new ScriptEngineManager();\n        ScriptEngine e = m.getEngineByName(\"nashorn\");\n        e.eval(\"const X = 44; print(X)\");\n    }\n}\n\n\n$ javac Main.java\n\n$ java Main\n\nException in thread \"main\" javax.script.ScriptException: &lt;eval&gt;:1:0 Expected an operand but found const\nconst X = 44; print(X)\n^ in &lt;eval&gt; at line number 1 at column number 0\n    at jdk.nashorn.api.scripting.NashornScriptEngine.throwAsScriptException(NashornScriptEngine.java:470)\n    at jdk.nashorn.api.scripting.NashornScriptEngine.compileImpl(NashornScriptEngine.java:537)\n    at jdk.nashorn.api.scripting.NashornScriptEngine.compileImpl(NashornScriptEngine.java:524)\n    at jdk.nashorn.api.scripting.NashornScriptEngine.evalImpl(NashornScriptEngine.java:402)\n    at jdk.nashorn.api.scripting.NashornScriptEngine.eval(NashornScriptEngine.java:155)\n    at javax.script.AbstractScriptEngine.eval(AbstractScriptEngine.java:264)\n    at Main.main(Main.java:7)\n\n$ java -Dnashorn.args=--language=es6 Main\n44\n</code></pre>\n\n<p>See here -> <a href=\"https://wiki.openjdk.java.net/display/Nashorn/Nashorn+jsr223+engine+notes\" rel=\"noreferrer\">https://wiki.openjdk.java.net/display/Nashorn/Nashorn+jsr223+engine+notes</a></p>\n"},{"tags":[],"owner":{"account_id":17512303,"reputation":329,"user_id":12700084,"display_name":"omar mahameed"},"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1695011269,"creation_date":1694642144,"answer_id":77100718,"question_id":43406743,"body_markdown":"Use this VM option\r\n```none\r\n-Dnashorn.args=--language=es6\r\n```","title":"Call javascript that contains &#39;const&#39; from java?","body":"<p>Use this VM option</p>\n<pre class=\"lang-none prettyprint-override\"><code>-Dnashorn.args=--language=es6\n</code></pre>\n"}],"owner":{"account_id":1074313,"reputation":69,"user_id":1072784,"display_name":"Saumitra Kamath"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":13307,"favorite_count":0,"down_vote_count":1,"up_vote_count":7,"answer_count":3,"score":6,"last_activity_date":1695011269,"creation_date":1492153209,"question_id":43406743,"body_markdown":"I am trying to use a transpiling tool that has been developed in js and was available in GitHub. This transpiler is capable to convert the javascript code to java. \r\n\r\nI want to call the tool via java code so that I could read js files in java and process them using the transpiler developed in JS. The tool is using &#39;const&#39; as part of its code. While using ScriptEngine it gives me an exception. Please help!!\r\n\r\nSample Code:\r\n\r\n    public static void main(String[] args) {\r\n\r\n\t\tScriptEngineManager manager = null;\r\n\t\tScriptEngine engine = null;\r\n\t\tFile folder = null;\r\n\r\n\t\ttry {\r\n\r\n\t\t\tmanager = new ScriptEngineManager();\r\n\t\t\tengine = manager.getEngineByName(&quot;nashorn&quot;);\r\n\t\t\tString testConst1 = (String) &quot;const pi = 3.14;&quot;;\r\n\t\t\tString testPrint1 = (String) &quot;function hello(name) {print (&#39;Hello, &#39; + name +&#39; = &#39;+ pi);}&quot;;\r\n\t\t\tengine.eval(testConst1);\r\n\t\t\tengine.eval(testPrint1);\r\n\r\n\t\t\tInvocable inv = (Invocable) engine;\r\n\t\t\tinv.invokeFunction(&quot;hello&quot;, &quot;pi&quot;);\r\n\t\t\t// System.out.println(); //This one works.\r\n\r\n\t\t} catch (Exception e) {\r\n\t\t\te.printStackTrace();\r\n\t\t}\r\n\t}\r\n\r\nThis piece of code gives me below stack trace.\r\n\r\n    javax.script.ScriptException: &lt;eval&gt;:1:0 Expected an operand but found const\r\n    const pi = 3.14;\r\n    ^ in &lt;eval&gt; at line number 1 at column number 0\r\n    at jdk.nashorn.api.scripting.NashornScriptEngine.throwAsScriptException(NashornScriptEngine.java:455)\r\n    at jdk.nashorn.api.scripting.NashornScriptEngine.compileImpl(NashornScriptEngine.java:522)\r\n    at jdk.nashorn.api.scripting.NashornScriptEngine.compileImpl(NashornScriptEngine.java:509)\r\n    at jdk.nashorn.api.scripting.NashornScriptEngine.evalImpl(NashornScriptEngine.java:397)\r\n    at jdk.nashorn.api.scripting.NashornScriptEngine.eval(NashornScriptEngine.java:152)\r\n    at javax.script.AbstractScriptEngine.eval(Unknown Source)\r\n    \r\n\tCaused by: jdk.nashorn.internal.runtime.ParserException: &lt;eval&gt;:1:0 Expected an operand but found const\r\n    const pi = 3.14;\r\n    ^\r\n    at jdk.nashorn.internal.parser.AbstractParser.error(AbstractParser.java:292)\r\n    at jdk.nashorn.internal.parser.AbstractParser.error(AbstractParser.java:277)\r\n    at jdk.nashorn.internal.parser.Parser.unaryExpression(Parser.java:3175)\r\n    at jdk.nashorn.internal.parser.Parser.expression(Parser.java:3275)\r\n    at jdk.nashorn.internal.parser.Parser.expressionStatement(Parser.java:1152)\r\n    at jdk.nashorn.internal.parser.Parser.statement(Parser.java:969)\r\n    at jdk.nashorn.internal.parser.Parser.sourceElements(Parser.java:775)\r\n    at jdk.nashorn.internal.parser.Parser.program(Parser.java:711)\r\n    at jdk.nashorn.internal.parser.Parser.parse(Parser.java:284)\r\n    at jdk.nashorn.internal.parser.Parser.parse(Parser.java:250)\r\n    at jdk.nashorn.internal.runtime.Context.compile(Context.java:1207)\r\n    at jdk.nashorn.internal.runtime.Context.compileScript(Context.java:1179)\r\n    at jdk.nashorn.internal.runtime.Context.compileScript(Context.java:594)\r\n    at jdk.nashorn.api.scripting.NashornScriptEngine.compileImpl(NashornScriptEngine.java:520)\r\n    ... 5 more\r\n","title":"Call javascript that contains &#39;const&#39; from java?","body":"<p>I am trying to use a transpiling tool that has been developed in js and was available in GitHub. This transpiler is capable to convert the javascript code to java.</p>\n<p>I want to call the tool via java code so that I could read js files in java and process them using the transpiler developed in JS. The tool is using 'const' as part of its code. While using ScriptEngine it gives me an exception. Please help!!</p>\n<p>Sample Code:</p>\n<pre><code>public static void main(String[] args) {\n\n    ScriptEngineManager manager = null;\n    ScriptEngine engine = null;\n    File folder = null;\n\n    try {\n\n        manager = new ScriptEngineManager();\n        engine = manager.getEngineByName(&quot;nashorn&quot;);\n        String testConst1 = (String) &quot;const pi = 3.14;&quot;;\n        String testPrint1 = (String) &quot;function hello(name) {print ('Hello, ' + name +' = '+ pi);}&quot;;\n        engine.eval(testConst1);\n        engine.eval(testPrint1);\n\n        Invocable inv = (Invocable) engine;\n        inv.invokeFunction(&quot;hello&quot;, &quot;pi&quot;);\n        // System.out.println(); //This one works.\n\n    } catch (Exception e) {\n        e.printStackTrace();\n    }\n}\n</code></pre>\n<p>This piece of code gives me below stack trace.</p>\n<pre><code>javax.script.ScriptException: &lt;eval&gt;:1:0 Expected an operand but found const\nconst pi = 3.14;\n^ in &lt;eval&gt; at line number 1 at column number 0\nat jdk.nashorn.api.scripting.NashornScriptEngine.throwAsScriptException(NashornScriptEngine.java:455)\nat jdk.nashorn.api.scripting.NashornScriptEngine.compileImpl(NashornScriptEngine.java:522)\nat jdk.nashorn.api.scripting.NashornScriptEngine.compileImpl(NashornScriptEngine.java:509)\nat jdk.nashorn.api.scripting.NashornScriptEngine.evalImpl(NashornScriptEngine.java:397)\nat jdk.nashorn.api.scripting.NashornScriptEngine.eval(NashornScriptEngine.java:152)\nat javax.script.AbstractScriptEngine.eval(Unknown Source)\n\nCaused by: jdk.nashorn.internal.runtime.ParserException: &lt;eval&gt;:1:0 Expected an operand but found const\nconst pi = 3.14;\n^\nat jdk.nashorn.internal.parser.AbstractParser.error(AbstractParser.java:292)\nat jdk.nashorn.internal.parser.AbstractParser.error(AbstractParser.java:277)\nat jdk.nashorn.internal.parser.Parser.unaryExpression(Parser.java:3175)\nat jdk.nashorn.internal.parser.Parser.expression(Parser.java:3275)\nat jdk.nashorn.internal.parser.Parser.expressionStatement(Parser.java:1152)\nat jdk.nashorn.internal.parser.Parser.statement(Parser.java:969)\nat jdk.nashorn.internal.parser.Parser.sourceElements(Parser.java:775)\nat jdk.nashorn.internal.parser.Parser.program(Parser.java:711)\nat jdk.nashorn.internal.parser.Parser.parse(Parser.java:284)\nat jdk.nashorn.internal.parser.Parser.parse(Parser.java:250)\nat jdk.nashorn.internal.runtime.Context.compile(Context.java:1207)\nat jdk.nashorn.internal.runtime.Context.compileScript(Context.java:1179)\nat jdk.nashorn.internal.runtime.Context.compileScript(Context.java:594)\nat jdk.nashorn.api.scripting.NashornScriptEngine.compileImpl(NashornScriptEngine.java:520)\n... 5 more\n</code></pre>\n"},{"tags":["java","ubuntu","ant"],"comments":[{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1695024571,"post_id":77124545,"comment_id":135963650,"body_markdown":"*usr/lib/jvm/jdk-20/bin/java* You set JAVA_HOME wrong. Should finish with jdk-20","body":"<i>usr/lib/jvm/jdk-20/bin/java</i> You set JAVA_HOME wrong. Should finish with jdk-20"}],"owner":{"account_id":1660953,"reputation":9180,"user_id":1529267,"accept_rate":51,"display_name":"Max"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":22,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1695010888,"creation_date":1695010888,"question_id":77124545,"body_markdown":"I am trying to install ANT after installing java. My java in Sun Java.\r\n\r\n    pc19@pc19-H110:~$  java -version\r\n    java version &quot;20.0.2&quot; 2023-07-18\r\n    Java(TM) SE Runtime Environment (build 20.0.2+9-78)\r\n    Java HotSpot(TM) 64-Bit Server VM (build 20.0.2+9-78, mixed mode, sharing)\r\n-------------------------------------------------------------------------------------\r\n    pc19@-H110:~$ echo $JAVA_HOME\r\n    /usr/lib/jvm/jdk-20/bin/java\r\n-----------------------------------------------------------------\r\n\r\n    pc19@pc19-H110:~$ whereis java\r\n    java: /usr/bin/java /usr/share/java /usr/lib/jvm/jdk-20/bin/java\r\n------------------------------------------------------------------\r\n\r\n    pc19@-H110:~$ sudo apt-get install ant\r\n\r\n------------------------------------------------------------------\r\n\r\n    pc19@-H110:~$ java -version\r\n    openjdk version &quot;11.0.20.1&quot; 2023-08-24\r\n    OpenJDK Runtime Environment (build 11.0.20.1+1-post-Ubuntu-0ubuntu120.04)\r\n    OpenJDK 64-Bit Server VM (build 11.0.20.1+1-post-Ubuntu-0ubuntu120.04, mixed mode, sharing)\r\n\r\n\r\nWhen I install ANT using `sudo apt get install ant`, it is overring the Sun Java insallation with OpenJdk installation. Does anybody know the workaround for it? \r\n\r\nWhy is ant installation overriding java? How do I stop it?\r\n\r\n\r\n","title":"Installing Ant is overriding Java Installation","body":"<p>I am trying to install ANT after installing java. My java in Sun Java.</p>\n<pre><code>pc19@pc19-H110:~$  java -version\njava version &quot;20.0.2&quot; 2023-07-18\nJava(TM) SE Runtime Environment (build 20.0.2+9-78)\nJava HotSpot(TM) 64-Bit Server VM (build 20.0.2+9-78, mixed mode, sharing)\n</code></pre>\n<hr />\n<pre><code>pc19@-H110:~$ echo $JAVA_HOME\n/usr/lib/jvm/jdk-20/bin/java\n</code></pre>\n<hr />\n<pre><code>pc19@pc19-H110:~$ whereis java\njava: /usr/bin/java /usr/share/java /usr/lib/jvm/jdk-20/bin/java\n</code></pre>\n<hr />\n<pre><code>pc19@-H110:~$ sudo apt-get install ant\n</code></pre>\n<hr />\n<pre><code>pc19@-H110:~$ java -version\nopenjdk version &quot;11.0.20.1&quot; 2023-08-24\nOpenJDK Runtime Environment (build 11.0.20.1+1-post-Ubuntu-0ubuntu120.04)\nOpenJDK 64-Bit Server VM (build 11.0.20.1+1-post-Ubuntu-0ubuntu120.04, mixed mode, sharing)\n</code></pre>\n<p>When I install ANT using <code>sudo apt get install ant</code>, it is overring the Sun Java insallation with OpenJdk installation. Does anybody know the workaround for it?</p>\n<p>Why is ant installation overriding java? How do I stop it?</p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":44195,"reputation":269033,"user_id":129570,"accept_rate":79,"display_name":"Oliver Charlesworth"},"score":2,"creation_date":1332187989,"post_id":9777184,"comment_id":12444324,"body_markdown":"I have no idea what this question is about.","body":"I have no idea what this question is about."},{"owner":{"account_id":368385,"reputation":13915,"user_id":715171,"accept_rate":95,"display_name":"talnicolas"},"score":0,"creation_date":1332188148,"post_id":9777184,"comment_id":12444396,"body_markdown":"how can you expect `1` when `teaParty(5, 9)`?","body":"how can you expect <code>1</code> when <code>teaParty(5, 9)</code>?"},{"owner":{"account_id":145725,"reputation":6069,"user_id":355724,"accept_rate":86,"display_name":"VeeArr"},"score":0,"creation_date":1332188397,"post_id":9777184,"comment_id":12444483,"body_markdown":"I&#39;m not sure exactly what you&#39;re asking, but I am suspect of your second `if` statement. Only calls where exactly one of the values is 5 (but not both) will ever get past that statement, which doesn&#39;t seem to be your intent.","body":"I&#39;m not sure exactly what you&#39;re asking, but I am suspect of your second <code>if</code> statement. Only calls where exactly one of the values is 5 (but not both) will ever get past that statement, which doesn&#39;t seem to be your intent."},{"owner":{"account_id":1095084,"reputation":2277,"user_id":1088846,"accept_rate":100,"display_name":"Jochen"},"score":0,"creation_date":1332188474,"post_id":9777184,"comment_id":12444510,"body_markdown":"You should actually ask a question. That includes clearly describing what you are trying to achieve.","body":"You should actually ask a question. That includes clearly describing what you are trying to achieve."},{"owner":{"account_id":1336920,"reputation":21,"user_id":1279448,"display_name":"Chilley8121"},"score":0,"creation_date":1332188739,"post_id":9777184,"comment_id":12444613,"body_markdown":"I have added the question to the updated post.","body":"I have added the question to the updated post."},{"owner":{"account_id":309779,"reputation":1227,"user_id":622412,"accept_rate":79,"display_name":"Trasvi"},"score":0,"creation_date":1367989666,"post_id":9777184,"comment_id":23567322,"body_markdown":"What does the teaParty method have to do with the InOrderEquals question? They seem very unrelated to each other.","body":"What does the teaParty method have to do with the InOrderEquals question? They seem very unrelated to each other."}],"answers":[{"tags":[],"owner":{"account_id":130645,"reputation":81695,"user_id":330057,"accept_rate":77,"display_name":"corsiKa"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1332188464,"creation_date":1332188464,"answer_id":9777330,"question_id":9777184,"body_markdown":"    teaParty(20, 6) → 2 1   X       \r\n    teaParty(12, 6) → 2 1   X  \r\n\r\nThese two are firing as 1 because neither equals 5. They are triggered by\r\n\r\n    if(tea != 5 &amp;&amp; candy != 5)\r\n         return 1;\r\n\r\nAs for\r\n\r\n    teaParty(5, 9) → 1  2   X   \r\n\r\nThat is firing because it passes the &quot;five checks&quot; that return 1, and candy * 2 (which is 10) is greater than tea (which is 9), so it hits\r\n\r\n     if(candy * 2 &gt;= tea)\r\n         return 2;\r\n\r\nHowever, you don&#39;t really have a question to ask here. What is your objective? Can you provide more context? Perhaps we can use that to find the true error, not just the symptoms.","title":"Java CodingBat Logic teaParty?","body":"<pre><code>teaParty(20, 6) → 2 1   X       \nteaParty(12, 6) → 2 1   X  \n</code></pre>\n\n<p>These two are firing as 1 because neither equals 5. They are triggered by</p>\n\n<pre><code>if(tea != 5 &amp;&amp; candy != 5)\n     return 1;\n</code></pre>\n\n<p>As for</p>\n\n<pre><code>teaParty(5, 9) → 1  2   X   \n</code></pre>\n\n<p>That is firing because it passes the \"five checks\" that return 1, and candy * 2 (which is 10) is greater than tea (which is 9), so it hits</p>\n\n<pre><code> if(candy * 2 &gt;= tea)\n     return 2;\n</code></pre>\n\n<p>However, you don't really have a question to ask here. What is your objective? Can you provide more context? Perhaps we can use that to find the true error, not just the symptoms.</p>\n"},{"tags":[],"owner":{"account_id":1273026,"reputation":5676,"user_id":1228887,"display_name":"twain249"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1332188512,"creation_date":1332188512,"answer_id":9777344,"question_id":9777184,"body_markdown":"I can explain why you are getting the output you are but I don&#39;t know what you want it to be.\r\n\r\n    if(tea != 5 &amp;&amp; candy != 5)\r\n     return 1;\r\n\r\nThis if statement means that if both tea and candy are not 5 then return 1. This is the 3rd if statement you have so to get here you need to pass these 2\r\n \r\n    if(tea &lt; 5 || candy &lt; 5)\r\n         return 0;\r\n    \r\n      if(tea == 5 &amp;&amp; candy == 5)\r\n         return 1;\r\n\r\nSo if tea and candy are both greater than or equal to 5 it will fail the first one and if either tea or candy isn&#39;t 5 it will fail the second.\r\n\r\nin these cases\r\n\r\n    teaParty(20, 6) → 2 1   X       \r\n    teaParty(12, 6) → 2 1   X \r\n    teaParty(10, 20) → 2 1   X      \r\n\r\ntea = 20, 12, 10 all greater than 5 and not 5\r\ncandy = 6, 20 all greater than 5 and not 5\r\nso you get the 3rd if\r\n\r\nthis case\r\n\r\n    teaParty(5, 9) → 1  2   X  \r\n\r\ntea = 5\r\ncandy = 9\r\n\r\nso you get the 4th if \r\n\r\n      if(candy * 2 &gt;= tea) (9*2 &gt;= 5) true\r\n         return 2;\r\n\r\n\r\n","title":"Java CodingBat Logic teaParty?","body":"<p>I can explain why you are getting the output you are but I don't know what you want it to be.</p>\n\n<pre><code>if(tea != 5 &amp;&amp; candy != 5)\n return 1;\n</code></pre>\n\n<p>This if statement means that if both tea and candy are not 5 then return 1. This is the 3rd if statement you have so to get here you need to pass these 2</p>\n\n<pre><code>if(tea &lt; 5 || candy &lt; 5)\n     return 0;\n\n  if(tea == 5 &amp;&amp; candy == 5)\n     return 1;\n</code></pre>\n\n<p>So if tea and candy are both greater than or equal to 5 it will fail the first one and if either tea or candy isn't 5 it will fail the second.</p>\n\n<p>in these cases</p>\n\n<pre><code>teaParty(20, 6) → 2 1   X       \nteaParty(12, 6) → 2 1   X \nteaParty(10, 20) → 2 1   X      \n</code></pre>\n\n<p>tea = 20, 12, 10 all greater than 5 and not 5\ncandy = 6, 20 all greater than 5 and not 5\nso you get the 3rd if</p>\n\n<p>this case</p>\n\n<pre><code>teaParty(5, 9) → 1  2   X  \n</code></pre>\n\n<p>tea = 5\ncandy = 9</p>\n\n<p>so you get the 4th if </p>\n\n<pre><code>  if(candy * 2 &gt;= tea) (9*2 &gt;= 5) true\n     return 2;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":368385,"reputation":13915,"user_id":715171,"accept_rate":95,"display_name":"talnicolas"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1332188586,"creation_date":1332188586,"answer_id":9777365,"question_id":9777184,"body_markdown":"`if(tea != 5 &amp;&amp; candy != 5)` is executed before all your tests to check if one is the double (at least) of the other. Either remove that `if` statement or move it so you can get your double checks to work. Something like :\r\n\r\n    if(tea &lt; 5 || candy &lt; 5)\r\n        return 0;\r\n\r\n    if(tea == 5 &amp;&amp; candy == 5)\r\n        return 1;\r\n\r\n    if(tea != 5 &amp;&amp; candy != 5)\r\n    {\r\n        if((candy * 2 &gt;= tea) || (tea * 2 &gt;= candy))\r\n             return 2;\r\n\r\n        return 1;\r\n    }\r\n","title":"Java CodingBat Logic teaParty?","body":"<p><code>if(tea != 5 &amp;&amp; candy != 5)</code> is executed before all your tests to check if one is the double (at least) of the other. Either remove that <code>if</code> statement or move it so you can get your double checks to work. Something like :</p>\n\n<pre><code>if(tea &lt; 5 || candy &lt; 5)\n    return 0;\n\nif(tea == 5 &amp;&amp; candy == 5)\n    return 1;\n\nif(tea != 5 &amp;&amp; candy != 5)\n{\n    if((candy * 2 &gt;= tea) || (tea * 2 &gt;= candy))\n         return 2;\n\n    return 1;\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1433328,"reputation":11556,"user_id":1355221,"accept_rate":100,"display_name":"dansalmo"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1387410938,"creation_date":1387410012,"answer_id":20670800,"question_id":9777184,"body_markdown":"You have some redundant and incorrect cases.  Here is a simpler version:\r\n\r\n    public int teaParty(int tea, int candy) {\r\n      if(tea &lt; 5 || candy &lt; 5)  // your first case was correct\r\n         return 0;\r\n    \r\n      if(candy * 2 &lt;= tea || tea * 2 &lt;= candy)  // must be &lt;= not &gt;=\r\n         return 2;\r\n         \r\n      return 1;  // after you handle the first two cases, just return 1\r\n    }","title":"Java CodingBat Logic teaParty?","body":"<p>You have some redundant and incorrect cases.  Here is a simpler version:</p>\n\n<pre><code>public int teaParty(int tea, int candy) {\n  if(tea &lt; 5 || candy &lt; 5)  // your first case was correct\n     return 0;\n\n  if(candy * 2 &lt;= tea || tea * 2 &lt;= candy)  // must be &lt;= not &gt;=\n     return 2;\n\n  return 1;  // after you handle the first two cases, just return 1\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3157727,"reputation":2306,"user_id":2669716,"accept_rate":97,"display_name":"Anirudh"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1414418488,"creation_date":1414418488,"answer_id":26589283,"question_id":9777184,"body_markdown":"Below is the code if you would like a simple compact one line solution without using Ifs and in your code some conditions checked are redundant which might be causing the errors\r\n\r\n     public int teaParty(int tea, int candy)\r\n     {\r\n        return (tea &lt; 5 || candy &lt; 5) ? 0: (tea &gt;= 2 * candy || candy &gt;= 2 * tea) ? 2 : 1;\r\n     }","title":"Java CodingBat Logic teaParty?","body":"<p>Below is the code if you would like a simple compact one line solution without using Ifs and in your code some conditions checked are redundant which might be causing the errors</p>\n\n<pre><code> public int teaParty(int tea, int candy)\n {\n    return (tea &lt; 5 || candy &lt; 5) ? 0: (tea &gt;= 2 * candy || candy &gt;= 2 * tea) ? 2 : 1;\n }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":4010024,"reputation":31,"user_id":3303700,"display_name":"Shogo Warrior"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1414660991,"creation_date":1414660991,"answer_id":26649160,"question_id":9777184,"body_markdown":"    public int teaParty(int tea, int candy) {\r\n      \r\n      if (tea&gt;=5 &amp;&amp; candy&gt;=5) {\r\n        if (tea&gt;=candy*2 || candy&gt;=tea*2) { return 2; }\r\n        else { return 1; }\r\n      }\r\n      return 0;\r\n    }\r\n\r\nHope this helps. Clearer logic.","title":"Java CodingBat Logic teaParty?","body":"<pre><code>public int teaParty(int tea, int candy) {\n\n  if (tea&gt;=5 &amp;&amp; candy&gt;=5) {\n    if (tea&gt;=candy*2 || candy&gt;=tea*2) { return 2; }\n    else { return 1; }\n  }\n  return 0;\n}\n</code></pre>\n\n<p>Hope this helps. Clearer logic.</p>\n"},{"tags":[],"owner":{"account_id":8860724,"reputation":1,"user_id":6617011,"display_name":"HT. Viet"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1470135205,"creation_date":1470135205,"answer_id":38718456,"question_id":9777184,"body_markdown":"    public int teaParty(int tea, int candy) {\r\n      if (tea &gt;= 5 &amp;&amp; candy &gt;=5) {\r\n        if (tea / candy &gt;= 2 || candy / tea &gt;= 2) {\r\n          return 2;\r\n        }\r\n        return 1;\r\n      }\r\n      return 0;\r\n    }\r\n","title":"Java CodingBat Logic teaParty?","body":"<pre><code>public int teaParty(int tea, int candy) {\n  if (tea &gt;= 5 &amp;&amp; candy &gt;=5) {\n    if (tea / candy &gt;= 2 || candy / tea &gt;= 2) {\n      return 2;\n    }\n    return 1;\n  }\n  return 0;\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":29468868,"reputation":1,"user_id":22581849,"display_name":"Justin"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695010399,"creation_date":1694995881,"answer_id":77124021,"question_id":9777184,"body_markdown":"    if ( tea &lt; 5 || candy &lt; 5 )\r\n        return 0;\r\n    if ( tea &gt;= candy * 2 || candy &gt;= tea * 2 )\r\n        return 2;\r\n    if ( tea &gt;= 5 &amp;&amp; candy &gt;= 5 )\r\n        return 1;\r\n    else return 0;","title":"Java CodingBat Logic teaParty?","body":"<pre><code>if ( tea &lt; 5 || candy &lt; 5 )\n    return 0;\nif ( tea &gt;= candy * 2 || candy &gt;= tea * 2 )\n    return 2;\nif ( tea &gt;= 5 &amp;&amp; candy &gt;= 5 )\n    return 1;\nelse return 0;\n</code></pre>\n"}],"owner":{"account_id":1336920,"reputation":21,"user_id":1279448,"display_name":"Chilley8121"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":5090,"favorite_count":0,"down_vote_count":2,"up_vote_count":2,"answer_count":8,"score":0,"last_activity_date":1695010399,"creation_date":1332187916,"question_id":9777184,"body_markdown":"I am obviously missing an &quot;if&quot; statement but I am not sure how to cover if tea or candy is not double of each other: \r\n\r\n[Java &gt; Logic-1 &gt; teaParty][1]\r\n\r\nWe are having a party with amounts of tea and candy. Return the int outcome of the party encoded as 0=bad, 1=good, or 2=great. A party is good (1) if both tea and candy are at least 5. However, if either tea or candy is at least double the amount of the other one, the party is great (2). However, in all cases, if either tea or candy is less than 5, the party is always bad (0). \r\n\r\n    teaParty(6, 8) → 1\r\n    teaParty(3, 8) → 0\r\n    teaParty(20, 6) → 2\r\n\r\nHere is the code I have so far:\r\n\r\n    public int teaParty(int tea, int candy) {\r\n    \r\n      if(tea &lt; 5 || candy &lt; 5)\r\n         return 0;\r\n      \r\n      if(tea == 5 &amp;&amp; candy == 5)\r\n         return 1;\r\n         \r\n      if(tea != 5 &amp;&amp; candy != 5)\r\n         return 1;\r\n         \r\n      if(candy * 2 &gt;= tea)\r\n         return 2;\r\n         \r\n      if(tea * 2 &gt;= candy)\r\n         return 2;\r\n        \r\n      \r\n    return 0;\r\n    }\r\n\r\nThese are the errors I am receiving:\r\n\r\n    Expected\tThis Run\t\t\r\n    teaParty(6, 8) → 1\t1\tOK\t    \r\n    teaParty(3, 8) → 0\t0\tOK\t    \r\n    teaParty(20, 6) → 2\t1\tX\t    \r\n    teaParty(12, 6) → 2\t1\tX\t    \r\n    teaParty(11, 6) → 1\t1\tOK\t    \r\n    teaParty(11, 4) → 0\t0\tOK\t    \r\n    teaParty(4, 5) → 0\t0\tOK\t    \r\n    teaParty(5, 5) → 1\t1\tOK\t    \r\n    teaParty(6, 6) → 1\t1\tOK\t    \r\n    teaParty(5, 10) → 2\t2\tOK\t    \r\n    teaParty(5, 9) → 1\t2\tX\t    \r\n    teaParty(10, 4) → 0\t0\tOK\t    \r\n    teaParty(10, 20) → 2\t1\tX\t    \r\n    other tests\r\n    X\t    \r\n\r\n\r\n  [1]: http://codingbat.com/prob/p177181","title":"Java CodingBat Logic teaParty?","body":"<p>I am obviously missing an \"if\" statement but I am not sure how to cover if tea or candy is not double of each other: </p>\n\n<p><a href=\"http://codingbat.com/prob/p177181\" rel=\"nofollow\">Java > Logic-1 > teaParty</a></p>\n\n<p>We are having a party with amounts of tea and candy. Return the int outcome of the party encoded as 0=bad, 1=good, or 2=great. A party is good (1) if both tea and candy are at least 5. However, if either tea or candy is at least double the amount of the other one, the party is great (2). However, in all cases, if either tea or candy is less than 5, the party is always bad (0). </p>\n\n<pre><code>teaParty(6, 8) → 1\nteaParty(3, 8) → 0\nteaParty(20, 6) → 2\n</code></pre>\n\n<p>Here is the code I have so far:</p>\n\n<pre><code>public int teaParty(int tea, int candy) {\n\n  if(tea &lt; 5 || candy &lt; 5)\n     return 0;\n\n  if(tea == 5 &amp;&amp; candy == 5)\n     return 1;\n\n  if(tea != 5 &amp;&amp; candy != 5)\n     return 1;\n\n  if(candy * 2 &gt;= tea)\n     return 2;\n\n  if(tea * 2 &gt;= candy)\n     return 2;\n\n\nreturn 0;\n}\n</code></pre>\n\n<p>These are the errors I am receiving:</p>\n\n<pre><code>Expected    This Run        \nteaParty(6, 8) → 1  1   OK      \nteaParty(3, 8) → 0  0   OK      \nteaParty(20, 6) → 2 1   X       \nteaParty(12, 6) → 2 1   X       \nteaParty(11, 6) → 1 1   OK      \nteaParty(11, 4) → 0 0   OK      \nteaParty(4, 5) → 0  0   OK      \nteaParty(5, 5) → 1  1   OK      \nteaParty(6, 6) → 1  1   OK      \nteaParty(5, 10) → 2 2   OK      \nteaParty(5, 9) → 1  2   X       \nteaParty(10, 4) → 0 0   OK      \nteaParty(10, 20) → 2    1   X       \nother tests\nX       \n</code></pre>\n"},{"tags":["java","xml"],"comments":[{"owner":{"account_id":37136,"reputation":57812,"user_id":106104,"accept_rate":62,"display_name":"user253751"},"score":1,"creation_date":1406512816,"post_id":24987535,"comment_id":38847046,"body_markdown":"Is your document using UTF-8?","body":"Is your document using UTF-8?"},{"owner":{"account_id":284109,"reputation":47153,"user_id":581994,"accept_rate":57,"display_name":"Hot Licks"},"score":2,"creation_date":1406513116,"post_id":24987535,"comment_id":38847085,"body_markdown":"I&#39;m guessing there was a bad byte in a UTF8 sequence.","body":"I&#39;m guessing there was a bad byte in a UTF8 sequence."},{"owner":{"account_id":284109,"reputation":47153,"user_id":581994,"accept_rate":57,"display_name":"Hot Licks"},"score":0,"creation_date":1406513161,"post_id":24987535,"comment_id":38847094,"body_markdown":"(You can Google UTF8, you know.)","body":"(You can Google UTF8, you know.)"},{"owner":{"account_id":265649,"reputation":53086,"user_id":552759,"display_name":"jtahlborn"},"score":0,"creation_date":1406515651,"post_id":24987535,"comment_id":38847518,"body_markdown":"do you check the return code to see if you could have gotten an error?","body":"do you check the return code to see if you could have gotten an error?"},{"owner":{"account_id":290683,"reputation":12512,"user_id":592355,"display_name":"xerx593"},"score":0,"creation_date":1621724990,"post_id":24987535,"comment_id":119582988,"body_markdown":"&quot;bad UTF8&quot; is also referred to as &quot;windows UTF8&quot; or &quot;UTF8+BOM&quot; ;)","body":"&quot;bad UTF8&quot; is also referred to as &quot;windows UTF8&quot; or &quot;UTF8+BOM&quot; ;)"}],"answers":[{"tags":[],"owner":{"account_id":9760,"reputation":85859,"user_id":18157,"accept_rate":100,"display_name":"Jim Garrison"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1406564706,"creation_date":1406518039,"answer_id":24988048,"question_id":24987535,"body_markdown":"The most likely case is that you are attempting to parse, as UTF-8, a document that is encoded with some other character set such as ISO-8859-1.  The parser encountered an ISO-8859-1 character with a value that is not allowed to occur by itself in UTF-8.\r\n\r\nTo solve the problem you will need to determine the _actual_ encoding of the document and then create your own `InputStreamReader` from the return value of `connection.getInputStream()`, specifying the correct encoding. Then create an `InputSource` from the reader and pass _that_ to `docBuilder.parse()`.\r\n\r\nFurther Research:\r\n\r\nI ran your code in Eclipse (JDK 7) and was able to reproduce the error.  I then set Exception breakpoints in Eclipse on both `MalformedByteSequenceException` exceptions, and it DID NOT fail.  Tracing into the code, I was able to see, one time only, the invalid characters in the input buffer.  This indicates to me there&#39;s a race condition bug somewhere in the Xerces parser.\r\n\r\nYou may have to file a bug with Oracle.","title":"MalformedByteSequenceException Invalid byte 1 of 1-byte UTF-8 sequence","body":"<p>The most likely case is that you are attempting to parse, as UTF-8, a document that is encoded with some other character set such as ISO-8859-1.  The parser encountered an ISO-8859-1 character with a value that is not allowed to occur by itself in UTF-8.</p>\n\n<p>To solve the problem you will need to determine the <em>actual</em> encoding of the document and then create your own <code>InputStreamReader</code> from the return value of <code>connection.getInputStream()</code>, specifying the correct encoding. Then create an <code>InputSource</code> from the reader and pass <em>that</em> to <code>docBuilder.parse()</code>.</p>\n\n<p>Further Research:</p>\n\n<p>I ran your code in Eclipse (JDK 7) and was able to reproduce the error.  I then set Exception breakpoints in Eclipse on both <code>MalformedByteSequenceException</code> exceptions, and it DID NOT fail.  Tracing into the code, I was able to see, one time only, the invalid characters in the input buffer.  This indicates to me there's a race condition bug somewhere in the Xerces parser.</p>\n\n<p>You may have to file a bug with Oracle.</p>\n"}],"owner":{"account_id":2662945,"reputation":43,"user_id":2302190,"accept_rate":75,"display_name":"Ufuk Garip"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":8190,"favorite_count":0,"down_vote_count":1,"up_vote_count":2,"answer_count":1,"score":1,"last_activity_date":1695010036,"creation_date":1406512670,"question_id":24987535,"body_markdown":"I am coding an *XML* parser class and when I run it sometimes it works fine but another time it doesn&#39;t work and throws this exception:\r\n\r\n&gt; MalformedByteSequenceException Invalid byte 1 of 1-byte UTF-8 sequence\r\n\r\nCan anyone provide some information as to why?\r\n\r\nHere is my code:\r\n\r\n    package TRT;\r\n    \r\n    \r\n    \r\n    import java.math.BigInteger;\r\n    import java.net.URL;\r\n    import java.net.URLConnection;\r\n    \r\n    import javax.xml.parsers.DocumentBuilder;\r\n    import javax.xml.parsers.DocumentBuilderFactory;\r\n    \r\n    import org.w3c.dom.Document;\r\n    import org.w3c.dom.Element;\r\n    import org.w3c.dom.Node;\r\n    import org.w3c.dom.NodeList;\r\n    \r\n    public class Gundem {\r\n    \r\n    \t\r\n    \tpublic static void main(String[] args) {\r\n    \t\t// TODO Auto-generated method stub\r\n    \r\n    \t\tGundem gundem=new Gundem();\r\n    \t\ttry {\r\n    \t\t\tURL url=new URL(&quot;http://www.trt.net.tr/rss/gundem.rss&quot;);\r\n    \t\t\tURLConnection connection=url.openConnection();\r\n    \t\t\t\r\n    \t\t\tDocumentBuilderFactory builderFactory=DocumentBuilderFactory.newInstance();\r\n    \t\t\tDocumentBuilder docBuilder=builderFactory.newDocumentBuilder();\r\n    \t\t\tDocument document=docBuilder.parse(connection.getInputStream());\r\n    \t\t\t\r\n    \t\t\tElement element=document.getDocumentElement();\r\n    \t\t\t\r\n    \t\t\tNode node=(Node)element.getChildNodes();\r\n    \t\t\tSystem.out.println(node.getNodeName());\r\n    \t\t\t\r\n    \t\t\t\r\n    \t\t\tNodeList nodeList=node.getChildNodes();\r\n    \t\t\tNode channelNode=(Node)nodeList.item(0);\r\n    \t\t\tSystem.out.println(channelNode.getNodeName());\r\n    \t\t\t\r\n    \t\t\tNodeList childNodeListOfChannelNode=channelNode.getChildNodes();\r\n    \t\t\t\r\n    \t\t\tfor(int i=0;i&lt;childNodeListOfChannelNode.getLength();i++){\r\n    \t\t\t\tNode childNodesOfChannelNode=(Node)childNodeListOfChannelNode.item(i);\r\n    \t\t\t\tSystem.out.println(childNodesOfChannelNode.getNodeName());\r\n    \t\t\t\t\r\n    \t\t\t\tif(childNodesOfChannelNode.getNodeName().equals(Constants.ITEM)){\r\n    \t\t\t\t\tItem item=new Item();\r\n    \t\t\t\t\tNodeList itemList=childNodesOfChannelNode.getChildNodes();\r\n    \t\t\t\t\tfor(int j=0;j&lt;itemList.getLength();j++){\r\n    \t\t\t\t\t\tNode childNodeOfItem=itemList.item(j);\r\n    \t\t\t\t\t\tif(childNodeOfItem.getNodeName().equals(Constants.TITLE)){\r\n    \t\t\t\t\t\t\titem.setTitle(childNodeOfItem.getTextContent());\r\n    \t\t\t\t\t\t\tSystem.out.println(item.getTitle());\r\n    \t\t\t\t\t\t\tSystem.out.println(gundem.dumpingInputAsHex(item.getTitle()));\r\n    \t\t\t\t\t\t}\r\n    \t\t\t\t\t\telse       if(childNodeOfItem.getNodeName().equals(Constants.DESCRIPTION)){\r\n    \t\t\t\t\t\t\titem.setDescription(childNodeOfItem.getTextContent());\r\n    \t\t\t\t\t\t\tSystem.out.println(item.getDescription());\r\n    \t\t\t\t\t\t}\r\n    \t\t\t\t\t\t\r\n    \t\t\t\t\t}\r\n    \t\t\t\t\t\r\n    \t\t\t\t}\r\n    \t\t\t\t\r\n    \t\t\t}\r\n    \t\t\t\r\n    \t\t} catch (Exception e) {\r\n    \t\t\t// TODO Auto-generated catch block\r\n    \t\t\te.printStackTrace();\r\n    \t\t}\r\n    \t\t\r\n    \r\n        \r\n    \t\tSystem.exit(0);  //\tthis line is for solving that problem; JDWP Unable to get JNI 1.2 environment, jvm-&gt;GetEnv() return code = -2\r\n    \r\n    \t\t\r\n    \t\t}\r\n    \t\r\n    \tpublic String dumpingInputAsHex(String input){\r\n    \t\treturn String.format(&quot;%40x&quot;,new BigInteger(1,input.getBytes()));\r\n    \t}\r\n    \r\n    }\r\n\r\n","title":"MalformedByteSequenceException Invalid byte 1 of 1-byte UTF-8 sequence","body":"<p>I am coding an <em>XML</em> parser class and when I run it sometimes it works fine but another time it doesn't work and throws this exception:</p>\n\n<blockquote>\n  <p>MalformedByteSequenceException Invalid byte 1 of 1-byte UTF-8 sequence</p>\n</blockquote>\n\n<p>Can anyone provide some information as to why?</p>\n\n<p>Here is my code:</p>\n\n<pre><code>package TRT;\n\n\n\nimport java.math.BigInteger;\nimport java.net.URL;\nimport java.net.URLConnection;\n\nimport javax.xml.parsers.DocumentBuilder;\nimport javax.xml.parsers.DocumentBuilderFactory;\n\nimport org.w3c.dom.Document;\nimport org.w3c.dom.Element;\nimport org.w3c.dom.Node;\nimport org.w3c.dom.NodeList;\n\npublic class Gundem {\n\n\n    public static void main(String[] args) {\n        // TODO Auto-generated method stub\n\n        Gundem gundem=new Gundem();\n        try {\n            URL url=new URL(\"http://www.trt.net.tr/rss/gundem.rss\");\n            URLConnection connection=url.openConnection();\n\n            DocumentBuilderFactory builderFactory=DocumentBuilderFactory.newInstance();\n            DocumentBuilder docBuilder=builderFactory.newDocumentBuilder();\n            Document document=docBuilder.parse(connection.getInputStream());\n\n            Element element=document.getDocumentElement();\n\n            Node node=(Node)element.getChildNodes();\n            System.out.println(node.getNodeName());\n\n\n            NodeList nodeList=node.getChildNodes();\n            Node channelNode=(Node)nodeList.item(0);\n            System.out.println(channelNode.getNodeName());\n\n            NodeList childNodeListOfChannelNode=channelNode.getChildNodes();\n\n            for(int i=0;i&lt;childNodeListOfChannelNode.getLength();i++){\n                Node childNodesOfChannelNode=(Node)childNodeListOfChannelNode.item(i);\n                System.out.println(childNodesOfChannelNode.getNodeName());\n\n                if(childNodesOfChannelNode.getNodeName().equals(Constants.ITEM)){\n                    Item item=new Item();\n                    NodeList itemList=childNodesOfChannelNode.getChildNodes();\n                    for(int j=0;j&lt;itemList.getLength();j++){\n                        Node childNodeOfItem=itemList.item(j);\n                        if(childNodeOfItem.getNodeName().equals(Constants.TITLE)){\n                            item.setTitle(childNodeOfItem.getTextContent());\n                            System.out.println(item.getTitle());\n                            System.out.println(gundem.dumpingInputAsHex(item.getTitle()));\n                        }\n                        else       if(childNodeOfItem.getNodeName().equals(Constants.DESCRIPTION)){\n                            item.setDescription(childNodeOfItem.getTextContent());\n                            System.out.println(item.getDescription());\n                        }\n\n                    }\n\n                }\n\n            }\n\n        } catch (Exception e) {\n            // TODO Auto-generated catch block\n            e.printStackTrace();\n        }\n\n\n\n        System.exit(0);  // this line is for solving that problem; JDWP Unable to get JNI 1.2 environment, jvm-&gt;GetEnv() return code = -2\n\n\n        }\n\n    public String dumpingInputAsHex(String input){\n        return String.format(\"%40x\",new BigInteger(1,input.getBytes()));\n    }\n\n}\n</code></pre>\n"},{"tags":["java","spring","graalvm","graalvm-native-image","spring-native"],"comments":[{"owner":{"account_id":5281408,"reputation":18797,"user_id":4216641,"display_name":"Turing85"},"score":0,"creation_date":1694990308,"post_id":77123837,"comment_id":135960561,"body_markdown":"A quick search resulted in, for example [this file (`github.com`)](https://github.com/spring-projects/spring-framework/blob/HEAD/spring-core/src/main/java/org/springframework/aot/nativex/feature/PreComputeFieldFeature.java#L23) that uses `org.graalvm.nativeimage.hosted.Feature`.","body":"A quick search resulted in, for example <a href=\"https://github.com/spring-projects/spring-framework/blob/HEAD/spring-core/src/main/java/org/springframework/aot/nativex/feature/PreComputeFieldFeature.java#L23\" rel=\"nofollow noreferrer\">this file (<code>github.com</code>)</a> that uses <code>org.graalvm.nativeimage.hosted.Feature</code>."}],"owner":{"account_id":111563,"reputation":13269,"user_id":294657,"accept_rate":85,"display_name":"kaqqao"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":42,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1695009774,"creation_date":1694989882,"question_id":77123837,"body_markdown":"When I search through Spring&#39;s entire repository, there are pretty much no references to [`ImageSingletons`](https://www.graalvm.org/sdk/javadoc/org/graalvm/nativeimage/ImageSingletons.html), [`Feature`](https://www.graalvm.org/sdk/javadoc/org/graalvm/nativeimage/hosted/Feature.html), \r\n[`@AutomaticFeature`](https://www.graalvm.org/sdk/javadoc/com/oracle/svm/core/annotate/AutomaticFeature.html), or anything else I&#39;d expect to see from something targeting GraalVM.\r\n\r\nSo how does Spring AOT actually work? Can I still add `Feature`s myself? Can I expect Graal&#39;s APIs like `ImageSingletons` to work?","title":"How is Spring AOT implemented?","body":"<p>When I search through Spring's entire repository, there are pretty much no references to <a href=\"https://www.graalvm.org/sdk/javadoc/org/graalvm/nativeimage/ImageSingletons.html\" rel=\"nofollow noreferrer\"><code>ImageSingletons</code></a>, <a href=\"https://www.graalvm.org/sdk/javadoc/org/graalvm/nativeimage/hosted/Feature.html\" rel=\"nofollow noreferrer\"><code>Feature</code></a>,\n<a href=\"https://www.graalvm.org/sdk/javadoc/com/oracle/svm/core/annotate/AutomaticFeature.html\" rel=\"nofollow noreferrer\"><code>@AutomaticFeature</code></a>, or anything else I'd expect to see from something targeting GraalVM.</p>\n<p>So how does Spring AOT actually work? Can I still add <code>Feature</code>s myself? Can I expect Graal's APIs like <code>ImageSingletons</code> to work?</p>\n"},{"tags":["java","groovy","spock"],"answers":[{"tags":[],"owner":{"account_id":1658807,"reputation":31819,"user_id":1527544,"accept_rate":54,"display_name":"Antoniossss"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1694671910,"creation_date":1694671910,"answer_id":77102200,"question_id":77102101,"body_markdown":"As usual, after some try and error (and googling and checking out github spock issues) I have found satisfying solution.\r\n\r\n\r\n    then: \r\n       1 * this.&quot;$handler&quot;.handle(_)\r\n       0 * _ //no other calls\r\n    where:\r\n    input | handler\r\n    &quot;A&quot; | &quot;ahandler&quot;\r\n    &quot;B&quot; | &quot;bhandler&quot;","title":"How to specify dynamic invocation target assertion in Spock","body":"<p>As usual, after some try and error (and googling and checking out github spock issues) I have found satisfying solution.</p>\n<pre><code>then: \n   1 * this.&quot;$handler&quot;.handle(_)\n   0 * _ //no other calls\nwhere:\ninput | handler\n&quot;A&quot; | &quot;ahandler&quot;\n&quot;B&quot; | &quot;bhandler&quot;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1087271,"reputation":64101,"user_id":1082681,"accept_rate":90,"display_name":"kriegaex"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1695009588,"creation_date":1694739209,"answer_id":77109068,"question_id":77102101,"body_markdown":"While your own solution works after fixing your faulty and fragmentary sample code, I do not think that this over-engineered solution is very nice.\r\n\r\n## Antonio&#39;s solution\r\n\r\nFirst, your original code assumes that you have methods `AHandler.handle(String)`, but `BHandler.handler(String)` with an &quot;r&quot; at the end of the method name. The Spock spec assumes the same. Then, in your own answer you switched to a uniform `handle(String)` method for both handler classes, which probably makes more sense, but would have been impossible to solve like that, given your question.\r\n\r\nIt is also quite ugly that we need the explicit leading `this.` in `this.&quot;$handler&quot;.handle(_)`. This solution also breaks down, as soon as you move the mock definitions from fields to local variables in the feature method. Therefore, the solution is brittle. Anyway, here is an [MCVE](https://stackoverflow.com/help/mcve) reproducing both your problem and your solution:\r\n\r\n```java\r\nclass AHandler {\r\n  void handle(String s) {}\r\n}\r\n```\r\n\r\n```java\r\nclass BHandler {\r\n  void handle(String s) {}\r\n}\r\n```\r\n\r\n```java\r\nclass Foo {\r\n  private AHandler aHandler\r\n  private BHandler bHandler\r\n\r\n  Foo(AHandler aHandler, BHandler bHandler) {\r\n    this.aHandler = aHandler\r\n    this.bHandler = bHandler\r\n  }\r\n\r\n  void handle(String what) {\r\n    if (what.equals(&quot;A&quot;))\r\n      aHandler.handle(what)\r\n    else if (what.equals(&quot;B&quot;))\r\n      bHandler.handle(what)\r\n    else\r\n      throw new RuntimeException()\r\n  }\r\n}\r\n```\r\n\r\n```java\r\nimport spock.lang.Specification\r\n\r\nclass DynamicInvocationTargetTest extends Specification {\r\n  def aHandler = Mock(AHandler)\r\n  def bHandler = Mock(BHandler)\r\n  def service = new Foo(aHandler, bHandler)\r\n\r\n  def test() {\r\n    when:\r\n    service.handle(input)\r\n\r\n    then:\r\n    1 * this.&quot;$handler&quot;.handle(input)\r\n    0 * _  // no other calls\r\n\r\n    where:\r\n    input | handler\r\n    &#39;A&#39;   | &#39;aHandler&#39;\r\n    &#39;B&#39;   | &#39;bHandler&#39;\r\n  }\r\n}\r\n```\r\n\r\n## Somewhat more elegant solution\r\n\r\nInstead, you could do this and even use local variables for mocks:\r\n\r\n```java\r\nimport spock.lang.Specification\r\n\r\nclass DynamicInvocationTargetTest extends Specification {\r\n  def test() {\r\n    given:\r\n    def handlers = [ A: Mock(AHandler), B: Mock(BHandler)]\r\n    def service = new Foo(handlers[&#39;A&#39;], handlers[&#39;B&#39;])\r\n\r\n    when:\r\n    service.handle(input)\r\n\r\n    then:\r\n    1 * handlers[input].handle(input)\r\n    0 * _  // no other calls\r\n\r\n    where:\r\n    input &lt;&lt; [&#39;A&#39;, &#39;B&#39;]\r\n  }\r\n}\r\n```\r\n\r\nOr, assuming that both handler classes implement a common interface, we can devise a more type-safe solution:\r\n\r\n```java\r\ninterface MyHandler {\r\n  void handle(String s)\r\n}\r\n```\r\n\r\n```java\r\nclass AHandler implements MyHandler {\r\n  @Override\r\n  void handle(String s) {}\r\n}\r\n```\r\n\r\n```java\r\nclass BHandler {\r\n  @Override\r\n  void handle(String s) {}\r\n}\r\n```\r\n\r\nNow, my IDE automatically interprets `def handlers` as `Map&lt;String, MyHandler&gt; handlers`, and the warning for the unknown invocation target for `.handle(input)` call goes away.\r\n\r\nOf course, if the field definitions in `Foo` would have type `MyHandler` instead of `AHandler` and `BHandler`, some more warnings could be removed from the Spock spec, but that is out of scope, and maybe you need the exact types there anyway. I am aware of the fact that your code is just sample code. I just wanted to point out ways to solve this problem without parsing strings to resolve method names.\r\n\r\nTry it in the [Groovy Web Console](https://gwc-experiment.appspot.com/?g=groovy_2_5&amp;codez=eJytU01P4zAQvedXjLg0WUWh5YKEuohG7Go5VEjADVXIdSaphWMH201BqP99bSdOCt3lsNqb7ffefLwZN4Q-kwqhwExTta2faqINqkwbC8gWVcnlLns5P59Nz2bTWRSxupHKgG4kfc44EVV23yBlJaPEMCmiiHKiNVy_CVIzeiNa2QEPRFVoHlAbwFeDotDwQQjvEdgqSjCWEif-ClCxFsWFPzpsQ0TBUWn4Do-wuIClLSJe_OpekxTy_ikPTysvPT1dkmZ-bxQTVQrLtx69_Nd4rhSNqmUUrVLgDn5KGYdgj5PFZJXCeM0nqyTywt0mdNPLs44VM9FsTU8yA2kG38YwnrL6JHCsqWU9uSZBSJBWrYASzvWQUmEXzmtgPgdXYQquLvu-j_ZhaLYL73ujWEsMQnACSH84wIIlsA6YBZ0NR6L0mBvGazZMZ4FnrTzI04PrEVyP4N4layUrenvibra2WWJCbFZC7O4ZvmwJ1_HJ4iTpDIMhT3DT6zyGXOOxNB-l6y-lPclslNz5xbjbCsNq_PFKsXFrHifBcibsPyuJXaFhIX3lf2hLJ-OMBnvtR-RYozD6U4CrW_ttFSvwb8Hg_WDm-f-K9xvoeVw1).\r\n\r\n## Cosmetic variations on my solution\r\n\r\n**Update:** I revisited this code, because I was toying with another problem, wondering if we could do without the map and without repeating the `&#39;A&#39;` and `&#39;B&#39;` literals all over the place in a DRY way. This is one of them:\r\n\r\n```java\r\nclass DynamicInvocationTargetTest extends Specification {\r\n  def test() {\r\n    given:\r\n    def handlers = [Mock(AHandler), Mock(BHandler)]\r\n    def service = new Foo(*handlers)\r\n\r\n    when:\r\n    service.handle(input)\r\n\r\n    then:\r\n    1 * handlers[index].handle(input)\r\n    0 * _  // no other calls\r\n\r\n    where:\r\n    index | input\r\n    0     | &#39;A&#39;\r\n    1     | &#39;B&#39;\r\n  }\r\n}\r\n```\r\n\r\nSomewhat more esoteric, avoiding the `index` data variable and exploiting the Spock 2.0 `iterationIndex`. I am not recommending this variant, merely mentioning it for completeness&#39;s sake:\r\n\r\n```java\r\nclass DynamicInvocationTargetTest extends Specification {\r\n  def test() {\r\n    given:\r\n    def handlers = [Mock(AHandler), Mock(BHandler)]\r\n    def service = new Foo(*handlers)\r\n\r\n    when:\r\n    service.handle(input)\r\n\r\n    then:\r\n    1 * handlers[specificationContext.currentIteration.iterationIndex].handle(input)\r\n    0 * _  // no other calls\r\n\r\n    where:\r\n    input &lt;&lt; [&#39;A&#39;, &#39;B&#39;]\r\n  }\r\n}\r\n```\r\n\r\nPlease note how both solutions use the spread operator for calling the constructor `new Foo(*handlers)`. Now that we have an ordered list of mocks rather than an unordered map, using the spread operator is safe.","title":"How to specify dynamic invocation target assertion in Spock","body":"<p>While your own solution works after fixing your faulty and fragmentary sample code, I do not think that this over-engineered solution is very nice.</p>\n<h2>Antonio's solution</h2>\n<p>First, your original code assumes that you have methods <code>AHandler.handle(String)</code>, but <code>BHandler.handler(String)</code> with an &quot;r&quot; at the end of the method name. The Spock spec assumes the same. Then, in your own answer you switched to a uniform <code>handle(String)</code> method for both handler classes, which probably makes more sense, but would have been impossible to solve like that, given your question.</p>\n<p>It is also quite ugly that we need the explicit leading <code>this.</code> in <code>this.&quot;$handler&quot;.handle(_)</code>. This solution also breaks down, as soon as you move the mock definitions from fields to local variables in the feature method. Therefore, the solution is brittle. Anyway, here is an <a href=\"https://stackoverflow.com/help/mcve\">MCVE</a> reproducing both your problem and your solution:</p>\n<pre class=\"lang-java prettyprint-override\"><code>class AHandler {\n  void handle(String s) {}\n}\n</code></pre>\n<pre class=\"lang-java prettyprint-override\"><code>class BHandler {\n  void handle(String s) {}\n}\n</code></pre>\n<pre class=\"lang-java prettyprint-override\"><code>class Foo {\n  private AHandler aHandler\n  private BHandler bHandler\n\n  Foo(AHandler aHandler, BHandler bHandler) {\n    this.aHandler = aHandler\n    this.bHandler = bHandler\n  }\n\n  void handle(String what) {\n    if (what.equals(&quot;A&quot;))\n      aHandler.handle(what)\n    else if (what.equals(&quot;B&quot;))\n      bHandler.handle(what)\n    else\n      throw new RuntimeException()\n  }\n}\n</code></pre>\n<pre class=\"lang-java prettyprint-override\"><code>import spock.lang.Specification\n\nclass DynamicInvocationTargetTest extends Specification {\n  def aHandler = Mock(AHandler)\n  def bHandler = Mock(BHandler)\n  def service = new Foo(aHandler, bHandler)\n\n  def test() {\n    when:\n    service.handle(input)\n\n    then:\n    1 * this.&quot;$handler&quot;.handle(input)\n    0 * _  // no other calls\n\n    where:\n    input | handler\n    'A'   | 'aHandler'\n    'B'   | 'bHandler'\n  }\n}\n</code></pre>\n<h2>Somewhat more elegant solution</h2>\n<p>Instead, you could do this and even use local variables for mocks:</p>\n<pre class=\"lang-java prettyprint-override\"><code>import spock.lang.Specification\n\nclass DynamicInvocationTargetTest extends Specification {\n  def test() {\n    given:\n    def handlers = [ A: Mock(AHandler), B: Mock(BHandler)]\n    def service = new Foo(handlers['A'], handlers['B'])\n\n    when:\n    service.handle(input)\n\n    then:\n    1 * handlers[input].handle(input)\n    0 * _  // no other calls\n\n    where:\n    input &lt;&lt; ['A', 'B']\n  }\n}\n</code></pre>\n<p>Or, assuming that both handler classes implement a common interface, we can devise a more type-safe solution:</p>\n<pre class=\"lang-java prettyprint-override\"><code>interface MyHandler {\n  void handle(String s)\n}\n</code></pre>\n<pre class=\"lang-java prettyprint-override\"><code>class AHandler implements MyHandler {\n  @Override\n  void handle(String s) {}\n}\n</code></pre>\n<pre class=\"lang-java prettyprint-override\"><code>class BHandler {\n  @Override\n  void handle(String s) {}\n}\n</code></pre>\n<p>Now, my IDE automatically interprets <code>def handlers</code> as <code>Map&lt;String, MyHandler&gt; handlers</code>, and the warning for the unknown invocation target for <code>.handle(input)</code> call goes away.</p>\n<p>Of course, if the field definitions in <code>Foo</code> would have type <code>MyHandler</code> instead of <code>AHandler</code> and <code>BHandler</code>, some more warnings could be removed from the Spock spec, but that is out of scope, and maybe you need the exact types there anyway. I am aware of the fact that your code is just sample code. I just wanted to point out ways to solve this problem without parsing strings to resolve method names.</p>\n<p>Try it in the <a href=\"https://gwc-experiment.appspot.com/?g=groovy_2_5&amp;codez=eJytU01P4zAQvedXjLg0WUWh5YKEuohG7Go5VEjADVXIdSaphWMH201BqP99bSdOCt3lsNqb7ffefLwZN4Q-kwqhwExTta2faqINqkwbC8gWVcnlLns5P59Nz2bTWRSxupHKgG4kfc44EVV23yBlJaPEMCmiiHKiNVy_CVIzeiNa2QEPRFVoHlAbwFeDotDwQQjvEdgqSjCWEif-ClCxFsWFPzpsQ0TBUWn4Do-wuIClLSJe_OpekxTy_ikPTysvPT1dkmZ-bxQTVQrLtx69_Nd4rhSNqmUUrVLgDn5KGYdgj5PFZJXCeM0nqyTywt0mdNPLs44VM9FsTU8yA2kG38YwnrL6JHCsqWU9uSZBSJBWrYASzvWQUmEXzmtgPgdXYQquLvu-j_ZhaLYL73ujWEsMQnACSH84wIIlsA6YBZ0NR6L0mBvGazZMZ4FnrTzI04PrEVyP4N4layUrenvibra2WWJCbFZC7O4ZvmwJ1_HJ4iTpDIMhT3DT6zyGXOOxNB-l6y-lPclslNz5xbjbCsNq_PFKsXFrHifBcibsPyuJXaFhIX3lf2hLJ-OMBnvtR-RYozD6U4CrW_ttFSvwb8Hg_WDm-f-K9xvoeVw1\" rel=\"nofollow noreferrer\">Groovy Web Console</a>.</p>\n<h2>Cosmetic variations on my solution</h2>\n<p><strong>Update:</strong> I revisited this code, because I was toying with another problem, wondering if we could do without the map and without repeating the <code>'A'</code> and <code>'B'</code> literals all over the place in a DRY way. This is one of them:</p>\n<pre class=\"lang-java prettyprint-override\"><code>class DynamicInvocationTargetTest extends Specification {\n  def test() {\n    given:\n    def handlers = [Mock(AHandler), Mock(BHandler)]\n    def service = new Foo(*handlers)\n\n    when:\n    service.handle(input)\n\n    then:\n    1 * handlers[index].handle(input)\n    0 * _  // no other calls\n\n    where:\n    index | input\n    0     | 'A'\n    1     | 'B'\n  }\n}\n</code></pre>\n<p>Somewhat more esoteric, avoiding the <code>index</code> data variable and exploiting the Spock 2.0 <code>iterationIndex</code>. I am not recommending this variant, merely mentioning it for completeness's sake:</p>\n<pre class=\"lang-java prettyprint-override\"><code>class DynamicInvocationTargetTest extends Specification {\n  def test() {\n    given:\n    def handlers = [Mock(AHandler), Mock(BHandler)]\n    def service = new Foo(*handlers)\n\n    when:\n    service.handle(input)\n\n    then:\n    1 * handlers[specificationContext.currentIteration.iterationIndex].handle(input)\n    0 * _  // no other calls\n\n    where:\n    input &lt;&lt; ['A', 'B']\n  }\n}\n</code></pre>\n<p>Please note how both solutions use the spread operator for calling the constructor <code>new Foo(*handlers)</code>. Now that we have an ordered list of mocks rather than an unordered map, using the spread operator is safe.</p>\n"}],"owner":{"account_id":1658807,"reputation":31819,"user_id":1527544,"accept_rate":54,"display_name":"Antoniossss"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":44,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1695009588,"creation_date":1694670670,"question_id":77102101,"body_markdown":"Consider this example\r\n\r\n\r\n    @AllArgsConstructor\r\n    class Foo{\r\n      private AHandler ahandler;\r\n      private BHandler bhandler;\r\n    \r\n    \r\n      public void handle(String what){\r\n    \r\n         if(what.equals(&quot;A&quot;)){\r\n              ahandler.handle(what);\r\n         }else if(what.equals(&quot;B&quot;){\r\n           bhandler.handle(what)\r\n         }else throw new RuntimeException();\r\n      }\r\n    }\r\n\r\n\r\nNow I try to test if-logic where given input proper handler must be called and nothing else, however I don&#39;t know how to specify assertion dynamically. Following does not work (but I think shows the intention)\r\n\r\n\r\n    def ahandler=Mock(AHandler);\r\n    def bhandler=Mock(BHandler);\r\n    def service=new Foo(ahandler,bhandler);\r\n    \r\n    when:\r\n       service.handle(input);\r\n    then: \r\n       1 * expectedCalls\r\n       0 * _ //no other calls\r\n    where:\r\n    input | expectedCalls\r\n    &quot;A&quot; | ahandler.handle(&quot;A&quot;)\r\n    &quot;B&quot; | bhandler.handle(&quot;B&quot;)\r\n\r\n\r\nIs it possible to do such thing with Spock? \r\n\r\n","title":"How to specify dynamic invocation target assertion in Spock","body":"<p>Consider this example</p>\n<pre><code>@AllArgsConstructor\nclass Foo{\n  private AHandler ahandler;\n  private BHandler bhandler;\n\n\n  public void handle(String what){\n\n     if(what.equals(&quot;A&quot;)){\n          ahandler.handle(what);\n     }else if(what.equals(&quot;B&quot;){\n       bhandler.handle(what)\n     }else throw new RuntimeException();\n  }\n}\n</code></pre>\n<p>Now I try to test if-logic where given input proper handler must be called and nothing else, however I don't know how to specify assertion dynamically. Following does not work (but I think shows the intention)</p>\n<pre><code>def ahandler=Mock(AHandler);\ndef bhandler=Mock(BHandler);\ndef service=new Foo(ahandler,bhandler);\n\nwhen:\n   service.handle(input);\nthen: \n   1 * expectedCalls\n   0 * _ //no other calls\nwhere:\ninput | expectedCalls\n&quot;A&quot; | ahandler.handle(&quot;A&quot;)\n&quot;B&quot; | bhandler.handle(&quot;B&quot;)\n</code></pre>\n<p>Is it possible to do such thing with Spock?</p>\n"},{"tags":["java","time-complexity","big-o"],"answers":[{"tags":[],"owner":{"account_id":8764366,"reputation":27474,"user_id":6553328,"display_name":"Emma"},"down_vote_count":0,"up_vote_count":5,"is_accepted":true,"score":5,"last_activity_date":1595902524,"creation_date":1593635623,"answer_id":62684925,"question_id":62684771,"body_markdown":"I guess your time complexity would be `O(N ^ 2)`: \r\n\r\n- `O(N)` for the loop\r\n    - `O(N)` for the `Math.max()`\r\n\r\nI may be wrong though. \r\n\r\n------------\r\n\r\nWe can use `TreeMap`, which has an `O(Log N)` get method and reduce the time complexity to O(N Log N) and the memory complexity would be `O(N)`: \r\n\r\n```\r\nclass Solution {\r\n    public boolean carPooling(int[][] trips, int capacity) {\r\n        TreeMap&lt;Integer, Integer&gt; treemap = new TreeMap&lt;&gt;();\r\n\r\n        for (int[] trip : trips) {\r\n            treemap.put(trip[1], treemap.getOrDefault(trip[1], 0) + trip[0]);\r\n            treemap.put(trip[2], treemap.getOrDefault(trip[2], 0) - trip[0]);\r\n        }\r\n\r\n        for (int passenger : treemap.values()) {\r\n            capacity -= passenger;\r\n\r\n            if (capacity &lt; 0) {\r\n                return false;\r\n            }\r\n        }\r\n\r\n        return true;\r\n    }\r\n}\r\n\r\n```\r\n\r\nAsymptotically, it does not matter if you would loop through your array once or a billion times, both are order of N time complexity:\r\n\r\n```\r\nO(10 * e9 N) == O(N)\r\n```  \r\n\r\n-------------------\r\n\r\nYour code looks pretty good, not bad at all. Just make sure to: \r\n - Keep your spacing consistent \r\n - Write everything in a separate line\r\n - Always add `{}`, even if it is not required for single line `if` or `for`. \r\n\r\n```\r\nclass Solution {\r\n    public boolean carPooling(int[][] trips, int capacity) {\r\n        HashMap&lt;Integer, List&lt;Integer&gt;&gt; dropOff = new HashMap&lt;&gt;();\r\n        HashMap&lt;Integer, List&lt;Integer&gt;&gt; pickUp = new HashMap&lt;&gt;();\r\n\r\n        int endLocation = 0;\r\n\r\n        for (int i = 0; i &lt; trips.length; i++) {\r\n            int peopleToAdd = trips[i][0];\r\n\r\n            //get current values from map\r\n            List&lt;Integer&gt; peopleToGet = pickUp.getOrDefault(trips[i][1], new ArrayList&lt;&gt;());\r\n            List&lt;Integer&gt; peopleToDrop = dropOff.getOrDefault(trips[i][2], new ArrayList&lt;&gt;());\r\n\r\n            //add group to list of people being dropped/added at a stop\r\n            peopleToGet.add(peopleToAdd);\r\n            peopleToDrop.add(peopleToAdd);\r\n            pickUp.put(trips[i][1], peopleToGet);\r\n            dropOff.put(trips[i][2], peopleToDrop);\r\n            endLocation = Math.max(endLocation, trips[i][2]);\r\n        }\r\n\r\n        int currentCapacity = 0;\r\n\r\n        for (int i = 1; i &lt;= endLocation; i++) {\r\n            if (pickUp.containsKey(i)) {\r\n                List&lt;Integer&gt; key = pickUp.get(i);\r\n\r\n                for (int temp : key) {\r\n                    currentCapacity += temp;\r\n                }\r\n            }\r\n\r\n            if (dropOff.containsKey(i)) {\r\n                List&lt;Integer&gt; key = dropOff.get(i);\r\n\r\n                for (int temp : key) {\r\n                    currentCapacity -= temp;\r\n                }\r\n            }\r\n\r\n            if (currentCapacity &gt; capacity) {\r\n                return false;\r\n            }\r\n        }\r\n\r\n        return true;\r\n\r\n    }\r\n}\r\n```\r\n\r\n### Good luck in your interviews!!\r\n\r\n-------------\r\n\r\n## References\r\n\r\n- For additional details, you can see the [Discussion Board](https://leetcode.com/problems/car-pooling/discuss/). There are plenty of accepted solutions, explanations, efficient algorithms with a variety of languages, and time/space complexity analysis in there.\r\n","title":"LeetCode 1094. Car Pooling. What is Time Complexity?","body":"<p>I guess your time complexity would be <code>O(N ^ 2)</code>:</p>\n<ul>\n<li><code>O(N)</code> for the loop\n<ul>\n<li><code>O(N)</code> for the <code>Math.max()</code></li>\n</ul>\n</li>\n</ul>\n<p>I may be wrong though.</p>\n<hr />\n<p>We can use <code>TreeMap</code>, which has an <code>O(Log N)</code> get method and reduce the time complexity to O(N Log N) and the memory complexity would be <code>O(N)</code>:</p>\n<pre><code>class Solution {\n    public boolean carPooling(int[][] trips, int capacity) {\n        TreeMap&lt;Integer, Integer&gt; treemap = new TreeMap&lt;&gt;();\n\n        for (int[] trip : trips) {\n            treemap.put(trip[1], treemap.getOrDefault(trip[1], 0) + trip[0]);\n            treemap.put(trip[2], treemap.getOrDefault(trip[2], 0) - trip[0]);\n        }\n\n        for (int passenger : treemap.values()) {\n            capacity -= passenger;\n\n            if (capacity &lt; 0) {\n                return false;\n            }\n        }\n\n        return true;\n    }\n}\n\n</code></pre>\n<p>Asymptotically, it does not matter if you would loop through your array once or a billion times, both are order of N time complexity:</p>\n<pre><code>O(10 * e9 N) == O(N)\n</code></pre>\n<hr />\n<p>Your code looks pretty good, not bad at all. Just make sure to:</p>\n<ul>\n<li>Keep your spacing consistent</li>\n<li>Write everything in a separate line</li>\n<li>Always add <code>{}</code>, even if it is not required for single line <code>if</code> or <code>for</code>.</li>\n</ul>\n<pre><code>class Solution {\n    public boolean carPooling(int[][] trips, int capacity) {\n        HashMap&lt;Integer, List&lt;Integer&gt;&gt; dropOff = new HashMap&lt;&gt;();\n        HashMap&lt;Integer, List&lt;Integer&gt;&gt; pickUp = new HashMap&lt;&gt;();\n\n        int endLocation = 0;\n\n        for (int i = 0; i &lt; trips.length; i++) {\n            int peopleToAdd = trips[i][0];\n\n            //get current values from map\n            List&lt;Integer&gt; peopleToGet = pickUp.getOrDefault(trips[i][1], new ArrayList&lt;&gt;());\n            List&lt;Integer&gt; peopleToDrop = dropOff.getOrDefault(trips[i][2], new ArrayList&lt;&gt;());\n\n            //add group to list of people being dropped/added at a stop\n            peopleToGet.add(peopleToAdd);\n            peopleToDrop.add(peopleToAdd);\n            pickUp.put(trips[i][1], peopleToGet);\n            dropOff.put(trips[i][2], peopleToDrop);\n            endLocation = Math.max(endLocation, trips[i][2]);\n        }\n\n        int currentCapacity = 0;\n\n        for (int i = 1; i &lt;= endLocation; i++) {\n            if (pickUp.containsKey(i)) {\n                List&lt;Integer&gt; key = pickUp.get(i);\n\n                for (int temp : key) {\n                    currentCapacity += temp;\n                }\n            }\n\n            if (dropOff.containsKey(i)) {\n                List&lt;Integer&gt; key = dropOff.get(i);\n\n                for (int temp : key) {\n                    currentCapacity -= temp;\n                }\n            }\n\n            if (currentCapacity &gt; capacity) {\n                return false;\n            }\n        }\n\n        return true;\n\n    }\n}\n</code></pre>\n<h3>Good luck in your interviews!!</h3>\n<hr />\n<h2>References</h2>\n<ul>\n<li>For additional details, you can see the <a href=\"https://leetcode.com/problems/car-pooling/discuss/\" rel=\"nofollow noreferrer\">Discussion Board</a>. There are plenty of accepted solutions, explanations, efficient algorithms with a variety of languages, and time/space complexity analysis in there.</li>\n</ul>\n"},{"tags":[],"owner":{"account_id":29226848,"reputation":1,"user_id":22391347,"display_name":"Divith Raju"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695009023,"creation_date":1695009023,"answer_id":77124467,"question_id":62684771,"body_markdown":"    class Solution {\r\n        public boolean carPooling(int[][] trips, int capacity) {\r\n             TreeMap&lt;Integer, Integer&gt; treemap = new TreeMap&lt;&gt;();\r\n\r\n             for (int[] trip : trips) {\r\n                 treemap.put(trip[1], treemap.getOrDefault(trip[1], 0) + trip[0]);\r\n                 treemap.put(trip[2], treemap.getOrDefault(trip[2], 0) - trip[0]);\r\n             }\r\n\r\n             for (int passenger : treemap.values()) {\r\n                 capacity -= passenger;\r\n\r\n                 if (capacity &lt; 0) {\r\n                     return false;\r\n                 }\r\n             }\r\n\r\n             return true;\r\n        }\r\n    }\r\nTry this code using Java format you will pass..","title":"LeetCode 1094. Car Pooling. What is Time Complexity?","body":"<pre><code>class Solution {\n    public boolean carPooling(int[][] trips, int capacity) {\n         TreeMap&lt;Integer, Integer&gt; treemap = new TreeMap&lt;&gt;();\n\n         for (int[] trip : trips) {\n             treemap.put(trip[1], treemap.getOrDefault(trip[1], 0) + trip[0]);\n             treemap.put(trip[2], treemap.getOrDefault(trip[2], 0) - trip[0]);\n         }\n\n         for (int passenger : treemap.values()) {\n             capacity -= passenger;\n\n             if (capacity &lt; 0) {\n                 return false;\n             }\n         }\n\n         return true;\n    }\n}\n</code></pre>\n<p>Try this code using Java format you will pass..</p>\n"}],"owner":{"account_id":18840627,"reputation":63,"user_id":13742194,"display_name":"bh13"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":387,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":62684925,"answer_count":2,"score":1,"last_activity_date":1695009023,"creation_date":1593634929,"question_id":62684771,"body_markdown":"I&#39;m in my interview prep cycle currently and have been ramping up lately. Here&#39;s the problem: \r\n\r\n[LeetCode 1094](https://leetcode.com/problems/car-pooling/)\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/kybqf.png\r\n\r\nI&#39;m having trouble understanding the time complexity of this question. here&#39;s my code:\r\n```\r\nclass Solution {\r\n    public boolean carPooling(int[][] trips, int capacity) {\r\n        HashMap&lt;Integer, List&lt;Integer&gt;&gt; dropOff = new HashMap&lt;&gt;();\r\n        HashMap&lt;Integer, List&lt;Integer&gt;&gt; pickUp = new HashMap&lt;&gt;();\r\n        \r\n        int endLocation = 0;\r\n        for (int i = 0; i &lt; trips.length; i++) {\r\n            int peopleToAdd = trips[i][0];\r\n            \r\n            //get current values from map\r\n            List&lt;Integer&gt; peopleToGet=pickUp.getOrDefault(trips[i][1], new ArrayList&lt;&gt;());\r\n            List&lt;Integer&gt; peopleToDrop=dropOff.getOrDefault(trips[i][2],new ArrayList&lt;&gt;());\r\n            \r\n            //add group to list of people being dropped/added at a stop\r\n            peopleToGet.add(peopleToAdd);\r\n            peopleToDrop.add(peopleToAdd)\r\n            ;\r\n            pickUp.put(trips[i][1], peopleToGet);\r\n            dropOff.put(trips[i][2], peopleToDrop);\r\n            endLocation = Math.max(endLocation, trips[i][2]);\r\n        }\r\n        \r\n        int currentCapacity = 0;\r\n        for (int i = 1; i &lt;= endLocation; i++) {\r\n            if (pickUp.containsKey(i)) {\r\n                List&lt;Integer&gt; key = pickUp.get(i);\r\n                for (int temp : key) {\r\n                    currentCapacity += temp;\r\n                }\r\n            }\r\n            if (dropOff.containsKey(i)) {\r\n                List&lt;Integer&gt; key = dropOff.get(i);\r\n                for (int temp : key) {\r\n                    currentCapacity -= temp;\r\n                }\r\n            }\r\n            \r\n            if (currentCapacity &gt; capacity) return false;\r\n        }\r\n        \r\n        return true;\r\n        \r\n        \r\n    }\r\n}\r\n```\r\nthe nested for-lop always makes me think n^2, but if you think about the question, each cohort has a pickup and a drop-off. so, You&#39;re really making 2N computations where N is the number of cohorts. You&#39;re also iterating through all potential stops.\r\n\r\nThanks.","title":"LeetCode 1094. Car Pooling. What is Time Complexity?","body":"<p>I'm in my interview prep cycle currently and have been ramping up lately. Here's the problem:</p>\n<p><a href=\"https://leetcode.com/problems/car-pooling/\" rel=\"nofollow noreferrer\">LeetCode 1094</a></p>\n<p><a href=\"https://i.stack.imgur.com/kybqf.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/kybqf.png\" alt=\"enter image description here\" /></a></p>\n<p>I'm having trouble understanding the time complexity of this question. here's my code:</p>\n<pre><code>class Solution {\n    public boolean carPooling(int[][] trips, int capacity) {\n        HashMap&lt;Integer, List&lt;Integer&gt;&gt; dropOff = new HashMap&lt;&gt;();\n        HashMap&lt;Integer, List&lt;Integer&gt;&gt; pickUp = new HashMap&lt;&gt;();\n        \n        int endLocation = 0;\n        for (int i = 0; i &lt; trips.length; i++) {\n            int peopleToAdd = trips[i][0];\n            \n            //get current values from map\n            List&lt;Integer&gt; peopleToGet=pickUp.getOrDefault(trips[i][1], new ArrayList&lt;&gt;());\n            List&lt;Integer&gt; peopleToDrop=dropOff.getOrDefault(trips[i][2],new ArrayList&lt;&gt;());\n            \n            //add group to list of people being dropped/added at a stop\n            peopleToGet.add(peopleToAdd);\n            peopleToDrop.add(peopleToAdd)\n            ;\n            pickUp.put(trips[i][1], peopleToGet);\n            dropOff.put(trips[i][2], peopleToDrop);\n            endLocation = Math.max(endLocation, trips[i][2]);\n        }\n        \n        int currentCapacity = 0;\n        for (int i = 1; i &lt;= endLocation; i++) {\n            if (pickUp.containsKey(i)) {\n                List&lt;Integer&gt; key = pickUp.get(i);\n                for (int temp : key) {\n                    currentCapacity += temp;\n                }\n            }\n            if (dropOff.containsKey(i)) {\n                List&lt;Integer&gt; key = dropOff.get(i);\n                for (int temp : key) {\n                    currentCapacity -= temp;\n                }\n            }\n            \n            if (currentCapacity &gt; capacity) return false;\n        }\n        \n        return true;\n        \n        \n    }\n}\n</code></pre>\n<p>the nested for-lop always makes me think n^2, but if you think about the question, each cohort has a pickup and a drop-off. so, You're really making 2N computations where N is the number of cohorts. You're also iterating through all potential stops.</p>\n<p>Thanks.</p>\n"},{"tags":["java","apache-spark"],"comments":[{"owner":{"account_id":1879420,"reputation":5451,"user_id":1699956,"accept_rate":83,"display_name":"Mangat Rai Modi"},"score":0,"creation_date":1455182096,"post_id":35333252,"comment_id":58377745,"body_markdown":"Could somebody tell what is wrong with the question? Why the close vote?","body":"Could somebody tell what is wrong with the question? Why the close vote?"}],"answers":[{"tags":[],"owner":{"account_id":7231036,"reputation":388,"user_id":5517872,"accept_rate":38,"display_name":"Jonathan"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1455183437,"creation_date":1455183437,"answer_id":35335516,"question_id":35333252,"body_markdown":"In Spark the [`SparkContext`][1] is usually used to read in data in a distributed way and Spark should handle the deserialization for you. Particularly the method [`objectFile`][2] looks like it could be of help.\r\n\r\nWriting a file in HDFS is explained [here][3].\r\n\r\n\r\n  [1]: https://spark.apache.org/docs/latest/api/java/org/apache/spark/SparkContext.html\r\n  [2]: https://spark.apache.org/docs/latest/api/java/org/apache/spark/SparkContext.html#objectFile(java.lang.String,%20int,%20scala.reflect.ClassTag)\r\n  [3]: https://stackoverflow.com/questions/16000840/write-a-file-in-hdfs-with-java","title":"Spark: How to serialize/deserialize java objects and distribute them in nodes","body":"<p>In Spark the <a href=\"https://spark.apache.org/docs/latest/api/java/org/apache/spark/SparkContext.html\" rel=\"nofollow noreferrer\"><code>SparkContext</code></a> is usually used to read in data in a distributed way and Spark should handle the deserialization for you. Particularly the method <a href=\"https://spark.apache.org/docs/latest/api/java/org/apache/spark/SparkContext.html#objectFile(java.lang.String,%20int,%20scala.reflect.ClassTag)\" rel=\"nofollow noreferrer\"><code>objectFile</code></a> looks like it could be of help.</p>\n\n<p>Writing a file in HDFS is explained <a href=\"https://stackoverflow.com/questions/16000840/write-a-file-in-hdfs-with-java\">here</a>.</p>\n"},{"tags":[],"owner":{"account_id":11488461,"reputation":11,"user_id":8420285,"display_name":"Fei YuanXing"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695008194,"creation_date":1695008194,"answer_id":77124435,"question_id":35333252,"body_markdown":"in spark ,use deserializeobject  ,let text to clickhouse","title":"Spark: How to serialize/deserialize java objects and distribute them in nodes","body":"<p>in spark ,use deserializeobject  ,let text to clickhouse</p>\n"}],"owner":{"account_id":1879420,"reputation":5451,"user_id":1699956,"accept_rate":83,"display_name":"Mangat Rai Modi"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":2082,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":2,"score":-1,"last_activity_date":1695008194,"creation_date":1455175982,"question_id":35333252,"body_markdown":"I have some java objects saved on HDFS to be used by various spark jobs. I know that for local filesystem we can deserialize using `ObjectInputStream` class. But till now I am unable to find any way to do it on remote file systems (HDFS?) using spark.\r\n\r\n**Update**: spark context has an api: `objectFile` to get an object. Object could be collected as:-\r\n\r\n    JavaRDD&lt;Map&lt;Long, BloomFilter&gt;&gt; obj = context.objectFile(&quot;/user/hdfs/path&quot;);\r\n    dat = obj.collect().get(0);\r\n\r\nBut now I ran into related problem. `dat` object will be populated only by the node to receive the RDD. But this data needs to be used by all the nodes in spark. I know there is a `Broadcast` function but that means shipping my data to all the nodes and data being very big in size will defeat the purpose of map reduce. Is there any better way to deserialize and distribute objects in a spark environment.","title":"Spark: How to serialize/deserialize java objects and distribute them in nodes","body":"<p>I have some java objects saved on HDFS to be used by various spark jobs. I know that for local filesystem we can deserialize using <code>ObjectInputStream</code> class. But till now I am unable to find any way to do it on remote file systems (HDFS?) using spark.</p>\n\n<p><strong>Update</strong>: spark context has an api: <code>objectFile</code> to get an object. Object could be collected as:-</p>\n\n<pre><code>JavaRDD&lt;Map&lt;Long, BloomFilter&gt;&gt; obj = context.objectFile(\"/user/hdfs/path\");\ndat = obj.collect().get(0);\n</code></pre>\n\n<p>But now I ran into related problem. <code>dat</code> object will be populated only by the node to receive the RDD. But this data needs to be used by all the nodes in spark. I know there is a <code>Broadcast</code> function but that means shipping my data to all the nodes and data being very big in size will defeat the purpose of map reduce. Is there any better way to deserialize and distribute objects in a spark environment.</p>\n"},{"tags":["java","weblogic-10.x","jrockit"],"comments":[{"owner":{"account_id":8415430,"reputation":2566,"user_id":6316044,"display_name":"Emmanuel Collin"},"score":0,"creation_date":1500570096,"post_id":45219464,"comment_id":77408222,"body_markdown":"A stuck thread does not always mean that the thread is waiting for something. It can simply takes a long time to execute the request. One thread dump is not enough to analyze the problem. Take several thread dumps to check what threads are doing.","body":"A stuck thread does not always mean that the thread is waiting for something. It can simply takes a long time to execute the request. One thread dump is not enough to analyze the problem. Take several thread dumps to check what threads are doing."},{"owner":{"account_id":16878,"reputation":306133,"user_id":37213,"accept_rate":81,"display_name":"duffymo"},"score":0,"creation_date":1500576938,"post_id":45219464,"comment_id":77412286,"body_markdown":"only you can tell that with a profiler.  you should also see which thread is consuming the most cpu: http://code.nomad-labs.com/2010/11/18/identifying-which-java-thread-is-consuming-most-cpu/","body":"only you can tell that with a profiler.  you should also see which thread is consuming the most cpu: <a href=\"http://code.nomad-labs.com/2010/11/18/identifying-which-java-thread-is-consuming-most-cpu/\" rel=\"nofollow noreferrer\">code.nomad-labs.com/2010/11/18/&hellip;</a>"},{"owner":{"account_id":11374656,"reputation":1,"user_id":8339342,"display_name":"Groo"},"score":0,"creation_date":1500578360,"post_id":45219464,"comment_id":77413142,"body_markdown":"Thanks, next time this happens I&#39;ll take a few dumps and see if get more information as to what they are doing. I didn&#39;t see any activity at the Oracle database level (no locks or active sessions). These threads were running for 24 hours before I finally restarted the system, I&#39;m pretty confident that they were never going to complete.\n\nExecute Thread 1 and 3 were consuming %100 CPU each, for a total of %200.\n\nThanks duffymo for that website, I think that will prove useful.","body":"Thanks, next time this happens I&#39;ll take a few dumps and see if get more information as to what they are doing. I didn&#39;t see any activity at the Oracle database level (no locks or active sessions). These threads were running for 24 hours before I finally restarted the system, I&#39;m pretty confident that they were never going to complete.  Execute Thread 1 and 3 were consuming %100 CPU each, for a total of %200.  Thanks duffymo for that website, I think that will prove useful."}],"owner":{"account_id":11374656,"reputation":1,"user_id":8339342,"display_name":"Groo"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":2264,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1695007550,"creation_date":1500565455,"question_id":45219464,"body_markdown":"I have a J2EE application running in Weblogic 10.3.6  that seems to randomly get 2 stuck threads and I was wondering if anyone can point me in the right direction as to what the struck threads might be waiting on. Here is the thread dump:\r\n\r\n    &quot;Main Thread&quot; id=1 idx=0x4 tid=12639 prio=5 alive, waiting, native_blocked\r\n          \r\n                -- Waiting for notification on: weblogic/t3/srvr/T3Srvr@0x92af6588[fat lock]\r\n          \r\n                at jrockit/vm/Threads.waitForNotifySignal(JLjava/lang/Object;)Z(Native Method)\r\n          \r\n                at java/lang/Object.wait(J)V(Native Method)\r\n          \r\n                at java/lang/Object.wait(Object.java:485)\r\n          \r\n                at weblogic/t3/srvr/T3Srvr.waitForDeath(T3Srvr.java:981)\r\n          \r\n                ^-- Lock released while waiting: weblogic/t3/srvr/T3Srvr@0x92af6588[fat lock]\r\n          \r\n                at weblogic/t3/srvr/T3Srvr.run(T3Srvr.java:490)\r\n          \r\n                at weblogic/Server.main(Server.java:71)\r\n          \r\n                at jrockit/vm/RNI.c2java(JJJJJ)V(Native Method)\r\n          \r\n                -- end of trace\r\n          \r\n            &quot;(Signal Handler)&quot; id=2 idx=0x8 tid=12640 prio=5 alive, native_blocked, daemon\r\n          \r\n            &quot;(OC Main Thread)&quot; id=3 idx=0xc tid=12641 prio=5 alive, native_waiting, daemon\r\n          \r\n            &quot;(GC Worker Thread 1)&quot; id=? idx=0x10 tid=12642 prio=5 alive, daemon\r\n          \r\n            &quot;(GC Worker Thread 2)&quot; id=? idx=0x14 tid=12643 prio=5 alive, daemon\r\n          \r\n            &quot;(GC Worker Thread 3)&quot; id=? idx=0x18 tid=12644 prio=5 alive, daemon\r\n          \r\n\r\n          \r\n            &quot;(Code Generation Thread 1)&quot; id=4 idx=0x60 tid=12662 prio=5 alive, native_waiting, daemon\r\n          \r\n            &quot;(Code Optimization Thread 1)&quot; id=5 idx=0x64 tid=12663 prio=5 alive, native_waiting, daemon\r\n          \r\n            &quot;(VM Periodic Task)&quot; id=6 idx=0x68 tid=12664 prio=10 alive, native_blocked, daemon\r\n          \r\n            &quot;Finalizer&quot; id=7 idx=0x6c tid=12665 prio=8 alive, native_waiting, daemon\r\n          \r\n                at jrockit/memory/Finalizer.waitForFinalizees(J[Ljava/lang/Object;)I(Native Method)\r\n          \r\n                at jrockit/memory/Finalizer.access$700(Finalizer.java:12)\r\n          \r\n                at jrockit/memory/Finalizer$4.run(Finalizer.java:189)\r\n          \r\n                at java/lang/Thread.run(Thread.java:619)\r\n          \r\n                at jrockit/vm/RNI.c2java(JJJJJ)V(Native Method)\r\n          \r\n                -- end of trace\r\n          \r\n            &quot;Reference Handler&quot; id=8 idx=0x70 tid=12666 prio=10 alive, native_waiting, daemon\r\n          \r\n                at java/lang/ref/Reference.waitForActivatedQueue(J)Ljava/lang/ref/Reference;(Native Method)\r\n          \r\n                at java/lang/ref/Reference.access$100(Reference.java:11)\r\n          \r\n                at java/lang/ref/Reference$ReferenceHandler.run(Reference.java:82)\r\n          \r\n                at jrockit/vm/RNI.c2java(JJJJJ)V(Native Method)\r\n          \r\n                -- end of trace\r\n          \r\n            &quot;(Sensor Event Thread)&quot; id=9 idx=0x74 tid=12667 prio=5 alive, native_blocked, daemon\r\n          \r\n            &quot;VM JFR Buffer Thread&quot; id=10 idx=0x78 tid=12668 prio=5 alive, in native, daemon\r\n          \r\n            &quot;Timer-0&quot; id=14 idx=0x80 tid=12671 prio=5 alive, waiting, native_blocked, daemon\r\n          \r\n                -- Waiting for notification on: java/util/TaskQueue@0x92b0ad40[fat lock]\r\n          \r\n                at jrockit/vm/Threads.waitForNotifySignal(JLjava/lang/Object;)Z(Native Method)\r\n          \r\n                at java/lang/Object.wait(J)V(Native Method)\r\n          \r\n                at java/util/TimerThread.mainLoop(Timer.java:509)\r\n          \r\n                ^-- Lock released while waiting: java/util/TaskQueue@0x92b0ad40[fat lock]\r\n          \r\n                at java/util/TimerThread.run(Timer.java:462)\r\n          \r\n                at jrockit/vm/RNI.c2java(JJJJJ)V(Native Method)\r\n          \r\n                -- end of trace\r\n          \r\n            &quot;[STUCK] ExecuteThread: &#39;0&#39; for queue: &#39;weblogic.kernel.Default (self-tuning)&#39;&quot; id=15 idx=0x84 tid=12672 prio=1 alive, native_blocked, daemon\r\n          \r\n                at java/util/AbstractCollection.toArray(AbstractCollection.java:119)[optimized]\r\n          \r\n                at java/util/ArrayList.&lt;init&gt;(ArrayList.java:131)[inlined]\r\n          \r\n                at javax/faces/component/UIComponentBase$FacetsMap.keySetIterator(UIComponentBase.java:2228)[inlined]\r\n          \r\n                at javax/faces/component/UIComponentBase$FacetsMapValuesIterator.&lt;init&gt;(UIComponentBase.java:2583)[inlined]\r\n          \r\n                at javax/faces/component/UIComponentBase$FacetsMapValues.iterator(UIComponentBase.java:2567)[optimized]\r\n          \r\n                at org/ajax4jsf/component/UIDataAdaptorBase.restoreChildState(UIDataAdaptorBase.java:1006)[optimized]\r\n          \r\n                at org/ajax4jsf/component/UIDataAdaptorBase.restoreChildState(UIDataAdaptorBase.java:1004)[inlined]\r\n          \r\n     \r\n          \r\n                at org/apache/el/MethodExpressionImpl.invoke(MethodExpressionImpl.java:276)\r\n          \r\n                at com/sun/facelets/el/TagMethodExpression.invoke(TagMethodExpression.java:68)\r\n          \r\n                at javax/faces/component/MethodBindingMethodExpressionAdapter.invoke(MethodBindingMethodExpressionAdapter.java:88)\r\n          \r\n                at com/sun/faces/application/ActionListenerImpl.processAction(ActionListenerImpl.java:102)\r\n          \r\n                at com/CompName/AppName/core/web/CustomActionListener.processAction(CustomActionListener.java:51)\r\n          \r\n                at javax/faces/component/UICommand.broadcast(UICommand.java:387)\r\n          \r\n                at org/ajax4jsf/component/AjaxActionComponent.broadcast(AjaxActionComponent.java:55)\r\n          \r\n                at org/ajax4jsf/component/AjaxViewRoot.processEvents(AjaxViewRoot.java:329)\r\n          \r\n                at org/ajax4jsf/component/AjaxViewRoot$$com_CompName_AppName_validation_web_ProxyViewRootInterceptor.CGLIB$processEvents$12(Ljavax/faces/context/FacesContext;Lorg/ajax4jsf/event/EventsQueue;Z)V(&lt;generated&gt;)[inlined]\r\n        \r\n                at weblogic/security/service/SecurityManager.runAs(SecurityManager.java:120)\r\n          \r\n                at weblogic/servlet/internal/WebAppServletContext.securedExecute(WebAppServletContext.java:2273)\r\n          \r\n                at weblogic/servlet/internal/WebAppServletContext.execute(WebAppServletContext.java:2179)\r\n          \r\n                at weblogic/servlet/internal/ServletRequestImpl.run(ServletRequestImpl.java:1490)\r\n          \r\n                at weblogic/work/ExecuteThread.execute(ExecuteThread.java:256)[optimized]\r\n          \r\n                at weblogic/work/ExecuteThread.run(ExecuteThread.java:221)\r\n          \r\n                at jrockit/vm/RNI.c2java(JJJJJ)V(Native Method)\r\n          \r\n                -- end of trace\r\n          \r\n            &quot;JFR request timer&quot; id=16 idx=0x88 tid=12673 prio=5 alive, waiting, native_blocked, daemon\r\n          \r\n                -- Waiting for notification on: java/util/TaskQueue@0x92b0adc0[fat lock]\r\n          \r\n                at jrockit/vm/Threads.waitForNotifySignal(JLjava/lang/Object;)Z(Native Method)\r\n          \r\n                at java/lang/Object.wait(J)V(Native Method)\r\n          \r\n                at java/lang/Object.wait(Object.java:485)\r\n          \r\n                at java/util/TimerThread.mainLoop(Timer.java:483)\r\n          \r\n                ^-- Lock released while waiting: java/util/TaskQueue@0x92b0adc0[fat lock]\r\n          \r\n                at java/util/TimerThread.run(Timer.java:462)\r\n          \r\n                at jrockit/vm/RNI.c2java(JJJJJ)V(Native Method)\r\n          \r\n                -- end of trace\r\n          \r\n            &quot;weblogic.time.TimeEventGenerator&quot; id=18 idx=0x8c tid=12674 prio=9 alive, waiting, native_blocked, daemon\r\n          \r\n                -- Waiting for notification on: weblogic/time/common/internal/TimeTable@0x92b0c1d0[fat lock]\r\n          \r\n                at jrockit/vm/Threads.waitForNotifySignal(JLjava/lang/Object;)Z(Native Method)\r\n          \r\n                at java/lang/Object.wait(J)V(Native Method)\r\n          \r\n                at weblogic/time/common/internal/TimeTable.snooze(TimeTable.java:286)\r\n          \r\n                ^-- Lock released while waiting: weblogic/time/common/internal/TimeTable@0x92b0c1d0[fat lock]\r\n          \r\n                at weblogic/time/common/internal/TimeEventGenerator.run(TimeEventGenerator.java:117)\r\n          \r\n                at java/lang/Thread.run(Thread.java:619)\r\n          \r\n                at jrockit/vm/RNI.c2java(JJJJJ)V(Native Method)\r\n          \r\n                -- end of trace\r\n          \r\n            &quot;JMAPI event thread&quot; id=19 idx=0x90 tid=12675 prio=5 alive, in native, daemon\r\n          \r\n            &quot;weblogic.timers.TimerThread&quot; id=20 idx=0x94 tid=12676 prio=9 alive, waiting, native_blocked, daemon\r\n          \r\n                -- Waiting for notification on: weblogic/timers/internal/TimerThread@0x92b0aec8[fat lock]\r\n          \r\n                at jrockit/vm/Threads.waitForNotifySignal(JLjava/lang/Object;)Z(Native Method)\r\n          \r\n                at java/lang/Object.wait(J)V(Native Method)\r\n          \r\n                at weblogic/timers/internal/TimerThread$Thread.run(TimerThread.java:262)\r\n          \r\n                ^-- Lock released while waiting: weblogic/timers/internal/TimerThread@0x92b0aec8[fat lock]\r\n          \r\n                at jrockit/vm/RNI.c2java(JJJJJ)V(Native Method)\r\n          \r\n                -- end of trace\r\n          \r\n            &quot;[STUCK] ExecuteThread: &#39;1&#39; for queue: &#39;weblogic.kernel.Default (self-tuning)&#39;&quot; id=21 idx=0x98 tid=12677 prio=1 alive, native_blocked, daemon\r\n          \r\n                at com/sun/faces/config/ConfigureListener.attributeRemoved(ConfigureListener.java:321)[optimized]\r\n          \r\n                at weblogic/servlet/internal/EventsManager.notifyRequestAttributeEvent(EventsManager.java:352)[inlined]\r\n          \r\n                at weblogic/servlet/internal/RequestEventsFilter$EventsRequestWrapper.removeAttribute(RequestEventsFilter.java:58)[optimized]\r\n          \r\n                at com/sun/faces/context/RequestMap.remove(ExternalContextImpl.java:1096)[optimized]\r\n          \r\n                at org/ajax4jsf/component/UIDataAdaptorBase.removeVariable(UIDataAdaptorBase.java:583)[inlined]\r\n          \r\n                at org/ajax4jsf/component/UIDataAdaptorBase.setupVariable(UIDataAdaptorBase.java:559)[inlined]\r\n          \r\n                at org/richfaces/component/UITree.setupVariable(UITree.java:360)[optimized]\r\n          \r\n                at org/ajax4jsf/component/UIDataAdaptorBase.setRowKey(UIDataAdaptorBase.java:357)[optimized]\r\n          \r\n                at org/ajax4jsf/component/UIDataAdaptorBase.setRowKey(UIDataAdaptorBase.java:324)[inlined]\r\n          \r\n                at org/richfaces/component/state/TreeState.expandNode(TreeState.java:233)[inlined]\r\n          \r\n                at com/CompName/AppName/application/group/tree/AppNameTree.expandNode(AppNameTree.java:311)[optimized]\r\n          \r\n          \r\n                at org/ajax4jsf/component/AjaxViewRoot$$com_CompName_AppName_validation_web_ProxyViewRootInterceptor.CGLIB$processPhase$9(Ljavax/faces/context/FacesContext;Ljavax/faces/event/PhaseId;Lorg/ajax4jsf/context/InvokerCallback;)V(&lt;generated&gt;)[inlined]\r\n          \r\n                at org/ajax4jsf/component/AjaxViewRoot$$com_CompName_AppName_validation_web_ProxyViewRootInterceptor$$FastClassByCGLIB$$b62d5b05.invoke(ILjava/lang/Object;[Ljava/lang/Object;)Ljava/lang/Object;(&lt;generated&gt;)[optimized]\r\n          \r\n                at net/sf/cglib/proxy/MethodProxy.invokeSuper(MethodProxy.java:167)[inlined]\r\n          \r\n                at com/CompName/AppName/validation/web/ProxyViewRootInterceptor.intercept(ProxyViewRootInterceptor.java:172)[optimized]\r\n          \r\n      \r\n                at weblogic/servlet/internal/RequestDispatcherImpl.invokeServlet(RequestDispatcherImpl.java:527)\r\n          \r\n                at weblogic/servlet/internal/RequestDispatcherImpl.forward(RequestDispatcherImpl.java:253)\r\n          \r\n                at com/CompName/AppName/core/web/CustomFilter.processRequest(CustomFilter.java:281)[inlined]\r\n          \r\n                at com/CompName/AppName/core/web/conversation/ConversationFilter.doFilter(ConversationFilter.java:97)[optimized]\r\n          \r\n                at weblogic/servlet/internal/FilterChainImpl.doFilter(FilterChainImpl.java:56)[optimized]\r\n          \r\n                at com/CompName/AppName/application/AuthenticationFilter.doFilter(AuthenticationFilter.java:84)\r\n          \r\n                at weblogic/servlet/internal/FilterChainImpl.doFilter(FilterChainImpl.java:56)[optimized]\r\n          \r\n                at weblogic/servlet/internal/RequestEventsFilter.doFilter(RequestEventsFilter.java:27)\r\n          \r\n                at weblogic/servlet/internal/FilterChainImpl.doFilter(FilterChainImpl.java:56)[optimized]\r\n          \r\n                at weblogic/servlet/internal/WebAppServletContext$ServletInvocationAction.wrapRun(WebAppServletContext.java:3730)\r\n          \r\n                at weblogic/servlet/internal/WebAppServletContext$ServletInvocationAction.run(WebAppServletContext.java:3696)\r\n          \r\n                at weblogic/security/acl/internal/AuthenticatedSubject.doAs(AuthenticatedSubject.java:321)\r\n          \r\n                at weblogic/security/service/SecurityManager.runAs(SecurityManager.java:120)\r\n          \r\n                at weblogic/servlet/internal/WebAppServletContext.securedExecute(WebAppServletContext.java:2273)\r\n          \r\n                at weblogic/servlet/internal/WebAppServletContext.execute(WebAppServletContext.java:2179)\r\n          \r\n                at weblogic/servlet/internal/ServletRequestImpl.run(ServletRequestImpl.java:1490)\r\n          \r\n                at weblogic/work/ExecuteThread.execute(ExecuteThread.java:256)[optimized]\r\n          \r\n                at weblogic/work/ExecuteThread.run(ExecuteThread.java:221)\r\n          \r\n                at jrockit/vm/RNI.c2java(JJJJJ)V(Native Method)\r\n          \r\n                -- end of trace\r\n          \r\n            &quot;ExecuteThread: &#39;0&#39; for queue: &#39;weblogic.socket.Muxer&#39;&quot; id=24 idx=0x9c tid=12678 prio=5 alive, blocked, native_blocked, daemon\r\n          \r\n                -- Blocked trying to get lock: java/lang/String@0x92a32e70[fat lock]\r\n          \r\n                at jrockit/vm/Threads.waitForUnblockSignal()V(Native Method)\r\n          \r\n                at jrockit/vm/Locks.fatLockBlockOrSpin(Locks.java:1402)[optimized]\r\n          \r\n                at jrockit/vm/Locks.lockFat(Locks.java:1503)[optimized]\r\n          \r\n                at jrockit/vm/Locks.monitorEnterSecondStageHard(Locks.java:1045)[optimized]\r\n          \r\n                at jrockit/vm/Locks.monitorEnterSecondStage(Locks.java:996)[optimized]\r\n          \r\n                at jrockit/vm/Locks.monitorEnter(Locks.java:2170)[optimized]\r\n          \r\n                at weblogic/socket/EPollSocketMuxer.processSockets(EPollSocketMuxer.java:153)\r\n          \r\n                at weblogic/socket/SocketReaderRequest.run(SocketReaderRequest.java:29)\r\n          \r\n                at weblogic/socket/SocketReaderRequest.execute(SocketReaderRequest.java:42)\r\n          \r\n                at weblogic/kernel/ExecuteThread.execute(ExecuteThread.java:145)\r\n          \r\n                at weblogic/kernel/ExecuteThread.run(ExecuteThread.java:117)\r\n          \r\n                at jrockit/vm/RNI.c2java(JJJJJ)V(Native Method)\r\n          \r\n                -- end of trace\r\n          \r\n            &quot;ExecuteThread: &#39;1&#39; for queue: &#39;weblogic.socket.Muxer&#39;&quot; id=25 idx=0xa0 tid=12679 prio=5 alive, blocked, native_blocked, daemon\r\n          \r\n                -- Blocked trying to get lock: java/lang/String@0x92a32e70[fat lock]\r\n          \r\n                at jrockit/vm/Threads.waitForUnblockSignal()V(Native Method)\r\n          \r\n                at jrockit/vm/Locks.fatLockBlockOrSpin(Locks.java:1402)[optimized]\r\n          \r\n                at jrockit/vm/Locks.lockFat(Locks.java:1503)[optimized]\r\n          \r\n                at jrockit/vm/Locks.monitorEnterSecondStageHard(Locks.java:1045)[optimized]\r\n          \r\n                at jrockit/vm/Locks.monitorEnterSecondStage(Locks.java:996)[optimized]\r\n          \r\n                at jrockit/vm/Locks.monitorEnter(Locks.java:2170)[optimized]\r\n          \r\n                at weblogic/socket/EPollSocketMuxer.processSockets(EPollSocketMuxer.java:153)\r\n          \r\n                at weblogic/socket/SocketReaderRequest.run(SocketReaderRequest.java:29)\r\n          \r\n                at weblogic/socket/SocketReaderRequest.execute(SocketReaderRequest.java:42)\r\n          \r\n                at weblogic/kernel/ExecuteThread.execute(ExecuteThread.java:145)\r\n          \r\n                at weblogic/kernel/ExecuteThread.run(ExecuteThread.java:117)\r\n          \r\n                at jrockit/vm/RNI.c2java(JJJJJ)V(Native Method)\r\n          \r\n                -- end of trace\r\n          \r\n            &quot;ExecuteThread: &#39;2&#39; for queue: &#39;weblogic.socket.Muxer&#39;&quot; id=26 idx=0xa4 tid=12680 prio=5 alive, in native, daemon\r\n          \r\n                at jrockit/ext/epoll/EPoll.epollWait0(ILjava/nio/ByteBuffer;II)I(Native Method)\r\n          \r\n                at jrockit/ext/epoll/EPoll.epollWait(EPoll.java:115)\r\n          \r\n                at weblogic/socket/EPollSocketMuxer.processSockets(EPollSocketMuxer.java:156)\r\n          \r\n                ^-- Holding lock: java/lang/String@0x92a32e70[fat lock]\r\n          \r\n                at weblogic/socket/SocketReaderRequest.run(SocketReaderRequest.java:29)\r\n          \r\n                at weblogic/socket/SocketReaderRequest.execute(SocketReaderRequest.java:42)\r\n          \r\n                at weblogic/kernel/ExecuteThread.execute(ExecuteThread.java:145)\r\n          \r\n                at weblogic/kernel/ExecuteThread.run(ExecuteThread.java:117)\r\n          \r\n                at jrockit/vm/RNI.c2java(JJJJJ)V(Native Method)\r\n          \r\n                -- end of trace\r\n          \r\n            &quot;ExecuteThread: &#39;3&#39; for queue: &#39;weblogic.socket.Muxer&#39;&quot; id=27 idx=0xa8 tid=12681 prio=5 alive, blocked, native_blocked, daemon\r\n          \r\n                -- Blocked trying to get lock: java/lang/String@0x92a32e70[fat lock]\r\n          \r\n                at jrockit/vm/Threads.waitForUnblockSignal()V(Native Method)\r\n          \r\n                at jrockit/vm/Locks.fatLockBlockOrSpin(Locks.java:1402)[optimized]\r\n          \r\n                at jrockit/vm/Locks.lockFat(Locks.java:1503)[optimized]\r\n          \r\n                at jrockit/vm/Locks.monitorEnterSecondStageHard(Locks.java:1045)[optimized]\r\n          \r\n                at jrockit/vm/Locks.monitorEnterSecondStage(Locks.java:996)[optimized]\r\n          \r\n                at jrockit/vm/Locks.monitorEnter(Locks.java:2170)[optimized]\r\n          \r\n                at weblogic/socket/EPollSocketMuxer.processSockets(EPollSocketMuxer.java:153)\r\n          \r\n                at weblogic/socket/SocketReaderRequest.run(SocketReaderRequest.java:29)\r\n          \r\n                at weblogic/socket/SocketReaderRequest.execute(SocketReaderRequest.java:42)\r\n          \r\n                at weblogic/kernel/ExecuteThread.execute(ExecuteThread.java:145)\r\n          \r\n                at weblogic/kernel/ExecuteThread.run(ExecuteThread.java:117)\r\n          \r\n                at jrockit/vm/RNI.c2java(JJJJJ)V(Native Method)\r\n          \r\n                -- end of trace\r\n          \r\n            &quot;Timer-1&quot; id=28 idx=0xac tid=12683 prio=5 alive, waiting, native_blocked, daemon\r\n          \r\n                -- Waiting for notification on: java/util/TaskQueue@0x92b0c9b0[fat lock]\r\n          \r\n                at jrockit/vm/Threads.waitForNotifySignal(JLjava/lang/Object;)Z(Native Method)\r\n          \r\n                at java/lang/Object.wait(J)V(Native Method)\r\n          \r\n                at java/lang/Object.wait(Object.java:485)\r\n          \r\n                at java/util/TimerThread.mainLoop(Timer.java:483)\r\n          \r\n                ^-- Lock released while waiting: java/util/TaskQueue@0x92b0c9b0[fat lock]\r\n          \r\n                at java/util/TimerThread.run(Timer.java:462)\r\n          \r\n                at jrockit/vm/RNI.c2java(JJJJJ)V(Native Method)\r\n          \r\n                -- end of trace\r\n          \r\n            &quot;VDE Transaction Processor Thread&quot; id=31 idx=0xb0 tid=12684 prio=2 alive, waiting, native_blocked, daemon\r\n          \r\n                -- Waiting for notification on: com/octetstring/vde/backend/standard/TransactionProcessor@0x92b0ba48[fat lock]\r\n          \r\n                at jrockit/vm/Threads.waitForNotifySignal(JLjava/lang/Object;)Z(Native Method)\r\n          \r\n                at java/lang/Object.wait(J)V(Native Method)\r\n          \r\n                at java/lang/Object.wait(Object.java:485)\r\n          \r\n                at com/octetstring/vde/backend/standard/TransactionProcessor.waitChange(TransactionProcessor.java:367)\r\n          \r\n                ^-- Lock released while waiting: com/octetstring/vde/backend/standard/TransactionProcessor@0x92b0ba48[fat lock]\r\n          \r\n                at com/octetstring/vde/backend/standard/TransactionProcessor.run(TransactionProcessor.java:212)\r\n          \r\n                at jrockit/vm/RNI.c2java(JJJJJ)V(Native Method)\r\n          \r\n                -- end of trace\r\n          \r\n            &quot;DoSManager&quot; id=34 idx=0xb8 tid=12686 prio=6 alive, sleeping, native_waiting, daemon\r\n          \r\n                at java/lang/Thread.sleep(J)V(Native Method)\r\n          \r\n                at com/octetstring/vde/DoSManager.run(DoSManager.java:433)\r\n          \r\n                at jrockit/vm/RNI.c2java(JJJJJ)V(Native Method)\r\n          \r\n                -- end of trace\r\n          \r\n            &quot;Timer-2&quot; id=35 idx=0xbc tid=12687 prio=5 alive, waiting, native_blocked, daemon\r\n          \r\n                -- Waiting for notification on: java/util/TaskQueue@0x92b0ce80[fat lock]\r\n          \r\n                at jrockit/vm/Threads.waitForNotifySignal(JLjava/lang/Object;)Z(Native Method)\r\n          \r\n                at java/lang/Object.wait(J)V(Native Method)\r\n          \r\n                at java/util/TimerThread.mainLoop(Timer.java:509)\r\n          \r\n                ^-- Lock released while waiting: java/util/TaskQueue@0x92b0ce80[fat lock]\r\n          \r\n                at java/util/TimerThread.run(Timer.java:462)\r\n          \r\n                at jrockit/vm/RNI.c2java(JJJJJ)V(Native Method)\r\n          \r\n                -- end of trace\r\n         \r\n          \r\n            &quot;[STANDBY] ExecuteThread: &#39;2&#39; for queue: &#39;weblogic.kernel.Default (self-tuning)&#39;&quot; id=37 idx=0xc4 tid=13075 prio=5 alive, waiting, native_blocked, daemon\r\n          \r\n                -- Waiting for notification on: weblogic/work/ExecuteThread@0x872bbdf0[fat lock]\r\n          \r\n                at jrockit/vm/Threads.waitForNotifySignal(JLjava/lang/Object;)Z(Native Method)\r\n          \r\n                at jrockit/vm/Locks.wait(Locks.java:1964)[inlined]\r\n          \r\n                at java/lang/Object.wait(Object.java:485)[inlined]\r\n          \r\n                at weblogic/work/ExecuteThread.waitForRequest(ExecuteThread.java:205)[optimized]\r\n          \r\n                ^-- Lock released while waiting: weblogic/work/ExecuteThread@0x872bbdf0[fat lock]\r\n          \r\n                at weblogic/work/ExecuteThread.run(ExecuteThread.java:226)\r\n          \r\n                at jrockit/vm/RNI.c2java(JJJJJ)V(Native Method)\r\n          \r\n                -- end of trace\r\n          \r\n            &quot;[STANDBY] ExecuteThread: &#39;3&#39; for queue: &#39;weblogic.kernel.Default (self-tuning)&#39;&quot; id=38 idx=0xc8 tid=13076 prio=5 alive, waiting, native_blocked, daemon\r\n          \r\n                -- Waiting for notification on: weblogic/work/ExecuteThread@0x872e99f8[fat lock]\r\n          \r\n                at jrockit/vm/Threads.waitForNotifySignal(JLjava/lang/Object;)Z(Native Method)\r\n          \r\n                at jrockit/vm/Locks.wait(Locks.java:1964)[inlined]\r\n          \r\n                at java/lang/Object.wait(Object.java:485)[inlined]\r\n          \r\n                at weblogic/work/ExecuteThread.waitForRequest(ExecuteThread.java:205)[optimized]\r\n          \r\n                ^-- Lock released while waiting: weblogic/work/ExecuteThread@0x872e99f8[fat lock]\r\n          \r\n                at weblogic/work/ExecuteThread.run(ExecuteThread.java:226)\r\n          \r\n                at jrockit/vm/RNI.c2java(JJJJJ)V(Native Method)\r\n          \r\n                -- end of trace\r\n          \r\n            &quot;ConversationReaper&quot; id=44 idx=0xe0 tid=13104 prio=5 alive, sleeping, native_waiting, daemon\r\n          \r\n                at java/lang/Thread.sleep(J)V(Native Method)\r\n          \r\n                at com/CompName/AppName/core/web/conversation/ConversationManager$ConversationReaper.run(ConversationManager.java:405)\r\n          \r\n                at jrockit/vm/RNI.c2java(JJJJJ)V(Native Method)\r\n          \r\n                -- end of trace\r\n                     \r\n          \r\n            &quot;DynamicListenThread[Default]&quot; id=47 idx=0xe8 tid=13106 prio=9 alive, in native, daemon\r\n          \r\n                at java/net/PlainSocketImpl.socketAccept(Ljava/net/SocketImpl;)V(Native Method)\r\n          \r\n                at java/net/PlainSocketImpl.accept(PlainSocketImpl.java:390)\r\n          \r\n                ^-- Holding lock: java/net/SocksSocketImpl@0x9224b198[biased lock]\r\n          \r\n                at java/net/ServerSocket.implAccept(ServerSocket.java:453)\r\n          \r\n                at java/net/ServerSocket.accept(ServerSocket.java:421)\r\n          \r\n                at weblogic/socket/WeblogicServerSocket.accept(WeblogicServerSocket.java:38)\r\n          \r\n                at weblogic/server/channels/DynamicListenThread$SocketAccepter.accept(DynamicListenThread.java:535)\r\n          \r\n                at weblogic/server/channels/DynamicListenThread$SocketAccepter.access$200(DynamicListenThread.java:417)\r\n          \r\n                at weblogic/server/channels/DynamicListenThread.run(DynamicListenThread.java:173)\r\n          \r\n                at java/lang/Thread.run(Thread.java:619)\r\n          \r\n                at jrockit/vm/RNI.c2java(JJJJJ)V(Native Method)\r\n          \r\n                -- end of trace\r\n          \r\n            &quot;DynamicListenThread[Default[1]]&quot; id=48 idx=0xec tid=13107 prio=9 alive, in native, daemon\r\n          \r\n                at java/net/PlainSocketImpl.socketAccept(Ljava/net/SocketImpl;)V(Native Method)\r\n          \r\n                at java/net/PlainSocketImpl.accept(PlainSocketImpl.java:390)\r\n          \r\n                ^-- Holding lock: java/net/SocksSocketImpl@0x922a64b0[biased lock]\r\n          \r\n                at java/net/ServerSocket.implAccept(ServerSocket.java:453)\r\n          \r\n                at java/net/ServerSocket.accept(ServerSocket.java:421)\r\n          \r\n                at weblogic/socket/WeblogicServerSocket.accept(WeblogicServerSocket.java:38)\r\n          \r\n                at weblogic/server/channels/DynamicListenThread$SocketAccepter.accept(DynamicListenThread.java:535)\r\n          \r\n                at weblogic/server/channels/DynamicListenThread$SocketAccepter.access$200(DynamicListenThread.java:417)\r\n          \r\n                at weblogic/server/channels/DynamicListenThread.run(DynamicListenThread.java:173)\r\n          \r\n                at java/lang/Thread.run(Thread.java:619)\r\n          \r\n                at jrockit/vm/RNI.c2java(JJJJJ)V(Native Method)\r\n          \r\n                -- end of trace\r\n              \r\n           \r\n          \r\n            Blocked lock chains\r\n          \r\n            ===================\r\n          \r\n            Chain 2:\r\n          \r\n            &quot;ExecuteThread: &#39;1&#39; for queue: &#39;weblogic.socket.Muxer&#39;&quot; id=25 idx=0xa0 tid=12679 waiting for java/lang/String@0x92a32e70 held by:\r\n          \r\n            &quot;ExecuteThread: &#39;2&#39; for queue: &#39;weblogic.socket.Muxer&#39;&quot; id=26 idx=0xa4 tid=12680 in chain 1\r\n          \r\n            Chain 3:\r\n          \r\n            &quot;ExecuteThread: &#39;3&#39; for queue: &#39;weblogic.socket.Muxer&#39;&quot; id=27 idx=0xa8 tid=12681 waiting for java/lang/String@0x92a32e70 held by:\r\n          \r\n            &quot;ExecuteThread: &#39;2&#39; for queue: &#39;weblogic.socket.Muxer&#39;&quot; id=26 idx=0xa4 tid=12680 in chain 1\r\n          \r\n            Open lock chains\r\n          \r\n            ================\r\n          \r\n            Chain 1:\r\n          \r\n            &quot;ExecuteThread: &#39;0&#39; for queue: &#39;weblogic.socket.Muxer&#39;&quot; id=24 idx=0x9c tid=12678 waiting for java/lang/String@0x92a32e70 held by:\r\n          \r\n            &quot;ExecuteThread: &#39;2&#39; for queue: &#39;weblogic.socket.Muxer&#39;&quot; id=26 idx=0xa4 tid=12680 (active)\r\n          \r\n\r\n          ","title":"Weblogic Java thread getting stuck","body":"<p>I have a J2EE application running in Weblogic 10.3.6  that seems to randomly get 2 stuck threads and I was wondering if anyone can point me in the right direction as to what the struck threads might be waiting on. Here is the thread dump:</p>\n\n<pre><code>\"Main Thread\" id=1 idx=0x4 tid=12639 prio=5 alive, waiting, native_blocked\n\n            -- Waiting for notification on: weblogic/t3/srvr/T3Srvr@0x92af6588[fat lock]\n\n            at jrockit/vm/Threads.waitForNotifySignal(JLjava/lang/Object;)Z(Native Method)\n\n            at java/lang/Object.wait(J)V(Native Method)\n\n            at java/lang/Object.wait(Object.java:485)\n\n            at weblogic/t3/srvr/T3Srvr.waitForDeath(T3Srvr.java:981)\n\n            ^-- Lock released while waiting: weblogic/t3/srvr/T3Srvr@0x92af6588[fat lock]\n\n            at weblogic/t3/srvr/T3Srvr.run(T3Srvr.java:490)\n\n            at weblogic/Server.main(Server.java:71)\n\n            at jrockit/vm/RNI.c2java(JJJJJ)V(Native Method)\n\n            -- end of trace\n\n        \"(Signal Handler)\" id=2 idx=0x8 tid=12640 prio=5 alive, native_blocked, daemon\n\n        \"(OC Main Thread)\" id=3 idx=0xc tid=12641 prio=5 alive, native_waiting, daemon\n\n        \"(GC Worker Thread 1)\" id=? idx=0x10 tid=12642 prio=5 alive, daemon\n\n        \"(GC Worker Thread 2)\" id=? idx=0x14 tid=12643 prio=5 alive, daemon\n\n        \"(GC Worker Thread 3)\" id=? idx=0x18 tid=12644 prio=5 alive, daemon\n\n\n\n        \"(Code Generation Thread 1)\" id=4 idx=0x60 tid=12662 prio=5 alive, native_waiting, daemon\n\n        \"(Code Optimization Thread 1)\" id=5 idx=0x64 tid=12663 prio=5 alive, native_waiting, daemon\n\n        \"(VM Periodic Task)\" id=6 idx=0x68 tid=12664 prio=10 alive, native_blocked, daemon\n\n        \"Finalizer\" id=7 idx=0x6c tid=12665 prio=8 alive, native_waiting, daemon\n\n            at jrockit/memory/Finalizer.waitForFinalizees(J[Ljava/lang/Object;)I(Native Method)\n\n            at jrockit/memory/Finalizer.access$700(Finalizer.java:12)\n\n            at jrockit/memory/Finalizer$4.run(Finalizer.java:189)\n\n            at java/lang/Thread.run(Thread.java:619)\n\n            at jrockit/vm/RNI.c2java(JJJJJ)V(Native Method)\n\n            -- end of trace\n\n        \"Reference Handler\" id=8 idx=0x70 tid=12666 prio=10 alive, native_waiting, daemon\n\n            at java/lang/ref/Reference.waitForActivatedQueue(J)Ljava/lang/ref/Reference;(Native Method)\n\n            at java/lang/ref/Reference.access$100(Reference.java:11)\n\n            at java/lang/ref/Reference$ReferenceHandler.run(Reference.java:82)\n\n            at jrockit/vm/RNI.c2java(JJJJJ)V(Native Method)\n\n            -- end of trace\n\n        \"(Sensor Event Thread)\" id=9 idx=0x74 tid=12667 prio=5 alive, native_blocked, daemon\n\n        \"VM JFR Buffer Thread\" id=10 idx=0x78 tid=12668 prio=5 alive, in native, daemon\n\n        \"Timer-0\" id=14 idx=0x80 tid=12671 prio=5 alive, waiting, native_blocked, daemon\n\n            -- Waiting for notification on: java/util/TaskQueue@0x92b0ad40[fat lock]\n\n            at jrockit/vm/Threads.waitForNotifySignal(JLjava/lang/Object;)Z(Native Method)\n\n            at java/lang/Object.wait(J)V(Native Method)\n\n            at java/util/TimerThread.mainLoop(Timer.java:509)\n\n            ^-- Lock released while waiting: java/util/TaskQueue@0x92b0ad40[fat lock]\n\n            at java/util/TimerThread.run(Timer.java:462)\n\n            at jrockit/vm/RNI.c2java(JJJJJ)V(Native Method)\n\n            -- end of trace\n\n        \"[STUCK] ExecuteThread: '0' for queue: 'weblogic.kernel.Default (self-tuning)'\" id=15 idx=0x84 tid=12672 prio=1 alive, native_blocked, daemon\n\n            at java/util/AbstractCollection.toArray(AbstractCollection.java:119)[optimized]\n\n            at java/util/ArrayList.&lt;init&gt;(ArrayList.java:131)[inlined]\n\n            at javax/faces/component/UIComponentBase$FacetsMap.keySetIterator(UIComponentBase.java:2228)[inlined]\n\n            at javax/faces/component/UIComponentBase$FacetsMapValuesIterator.&lt;init&gt;(UIComponentBase.java:2583)[inlined]\n\n            at javax/faces/component/UIComponentBase$FacetsMapValues.iterator(UIComponentBase.java:2567)[optimized]\n\n            at org/ajax4jsf/component/UIDataAdaptorBase.restoreChildState(UIDataAdaptorBase.java:1006)[optimized]\n\n            at org/ajax4jsf/component/UIDataAdaptorBase.restoreChildState(UIDataAdaptorBase.java:1004)[inlined]\n\n\n\n            at org/apache/el/MethodExpressionImpl.invoke(MethodExpressionImpl.java:276)\n\n            at com/sun/facelets/el/TagMethodExpression.invoke(TagMethodExpression.java:68)\n\n            at javax/faces/component/MethodBindingMethodExpressionAdapter.invoke(MethodBindingMethodExpressionAdapter.java:88)\n\n            at com/sun/faces/application/ActionListenerImpl.processAction(ActionListenerImpl.java:102)\n\n            at com/CompName/AppName/core/web/CustomActionListener.processAction(CustomActionListener.java:51)\n\n            at javax/faces/component/UICommand.broadcast(UICommand.java:387)\n\n            at org/ajax4jsf/component/AjaxActionComponent.broadcast(AjaxActionComponent.java:55)\n\n            at org/ajax4jsf/component/AjaxViewRoot.processEvents(AjaxViewRoot.java:329)\n\n            at org/ajax4jsf/component/AjaxViewRoot$$com_CompName_AppName_validation_web_ProxyViewRootInterceptor.CGLIB$processEvents$12(Ljavax/faces/context/FacesContext;Lorg/ajax4jsf/event/EventsQueue;Z)V(&lt;generated&gt;)[inlined]\n\n            at weblogic/security/service/SecurityManager.runAs(SecurityManager.java:120)\n\n            at weblogic/servlet/internal/WebAppServletContext.securedExecute(WebAppServletContext.java:2273)\n\n            at weblogic/servlet/internal/WebAppServletContext.execute(WebAppServletContext.java:2179)\n\n            at weblogic/servlet/internal/ServletRequestImpl.run(ServletRequestImpl.java:1490)\n\n            at weblogic/work/ExecuteThread.execute(ExecuteThread.java:256)[optimized]\n\n            at weblogic/work/ExecuteThread.run(ExecuteThread.java:221)\n\n            at jrockit/vm/RNI.c2java(JJJJJ)V(Native Method)\n\n            -- end of trace\n\n        \"JFR request timer\" id=16 idx=0x88 tid=12673 prio=5 alive, waiting, native_blocked, daemon\n\n            -- Waiting for notification on: java/util/TaskQueue@0x92b0adc0[fat lock]\n\n            at jrockit/vm/Threads.waitForNotifySignal(JLjava/lang/Object;)Z(Native Method)\n\n            at java/lang/Object.wait(J)V(Native Method)\n\n            at java/lang/Object.wait(Object.java:485)\n\n            at java/util/TimerThread.mainLoop(Timer.java:483)\n\n            ^-- Lock released while waiting: java/util/TaskQueue@0x92b0adc0[fat lock]\n\n            at java/util/TimerThread.run(Timer.java:462)\n\n            at jrockit/vm/RNI.c2java(JJJJJ)V(Native Method)\n\n            -- end of trace\n\n        \"weblogic.time.TimeEventGenerator\" id=18 idx=0x8c tid=12674 prio=9 alive, waiting, native_blocked, daemon\n\n            -- Waiting for notification on: weblogic/time/common/internal/TimeTable@0x92b0c1d0[fat lock]\n\n            at jrockit/vm/Threads.waitForNotifySignal(JLjava/lang/Object;)Z(Native Method)\n\n            at java/lang/Object.wait(J)V(Native Method)\n\n            at weblogic/time/common/internal/TimeTable.snooze(TimeTable.java:286)\n\n            ^-- Lock released while waiting: weblogic/time/common/internal/TimeTable@0x92b0c1d0[fat lock]\n\n            at weblogic/time/common/internal/TimeEventGenerator.run(TimeEventGenerator.java:117)\n\n            at java/lang/Thread.run(Thread.java:619)\n\n            at jrockit/vm/RNI.c2java(JJJJJ)V(Native Method)\n\n            -- end of trace\n\n        \"JMAPI event thread\" id=19 idx=0x90 tid=12675 prio=5 alive, in native, daemon\n\n        \"weblogic.timers.TimerThread\" id=20 idx=0x94 tid=12676 prio=9 alive, waiting, native_blocked, daemon\n\n            -- Waiting for notification on: weblogic/timers/internal/TimerThread@0x92b0aec8[fat lock]\n\n            at jrockit/vm/Threads.waitForNotifySignal(JLjava/lang/Object;)Z(Native Method)\n\n            at java/lang/Object.wait(J)V(Native Method)\n\n            at weblogic/timers/internal/TimerThread$Thread.run(TimerThread.java:262)\n\n            ^-- Lock released while waiting: weblogic/timers/internal/TimerThread@0x92b0aec8[fat lock]\n\n            at jrockit/vm/RNI.c2java(JJJJJ)V(Native Method)\n\n            -- end of trace\n\n        \"[STUCK] ExecuteThread: '1' for queue: 'weblogic.kernel.Default (self-tuning)'\" id=21 idx=0x98 tid=12677 prio=1 alive, native_blocked, daemon\n\n            at com/sun/faces/config/ConfigureListener.attributeRemoved(ConfigureListener.java:321)[optimized]\n\n            at weblogic/servlet/internal/EventsManager.notifyRequestAttributeEvent(EventsManager.java:352)[inlined]\n\n            at weblogic/servlet/internal/RequestEventsFilter$EventsRequestWrapper.removeAttribute(RequestEventsFilter.java:58)[optimized]\n\n            at com/sun/faces/context/RequestMap.remove(ExternalContextImpl.java:1096)[optimized]\n\n            at org/ajax4jsf/component/UIDataAdaptorBase.removeVariable(UIDataAdaptorBase.java:583)[inlined]\n\n            at org/ajax4jsf/component/UIDataAdaptorBase.setupVariable(UIDataAdaptorBase.java:559)[inlined]\n\n            at org/richfaces/component/UITree.setupVariable(UITree.java:360)[optimized]\n\n            at org/ajax4jsf/component/UIDataAdaptorBase.setRowKey(UIDataAdaptorBase.java:357)[optimized]\n\n            at org/ajax4jsf/component/UIDataAdaptorBase.setRowKey(UIDataAdaptorBase.java:324)[inlined]\n\n            at org/richfaces/component/state/TreeState.expandNode(TreeState.java:233)[inlined]\n\n            at com/CompName/AppName/application/group/tree/AppNameTree.expandNode(AppNameTree.java:311)[optimized]\n\n\n            at org/ajax4jsf/component/AjaxViewRoot$$com_CompName_AppName_validation_web_ProxyViewRootInterceptor.CGLIB$processPhase$9(Ljavax/faces/context/FacesContext;Ljavax/faces/event/PhaseId;Lorg/ajax4jsf/context/InvokerCallback;)V(&lt;generated&gt;)[inlined]\n\n            at org/ajax4jsf/component/AjaxViewRoot$$com_CompName_AppName_validation_web_ProxyViewRootInterceptor$$FastClassByCGLIB$$b62d5b05.invoke(ILjava/lang/Object;[Ljava/lang/Object;)Ljava/lang/Object;(&lt;generated&gt;)[optimized]\n\n            at net/sf/cglib/proxy/MethodProxy.invokeSuper(MethodProxy.java:167)[inlined]\n\n            at com/CompName/AppName/validation/web/ProxyViewRootInterceptor.intercept(ProxyViewRootInterceptor.java:172)[optimized]\n\n\n            at weblogic/servlet/internal/RequestDispatcherImpl.invokeServlet(RequestDispatcherImpl.java:527)\n\n            at weblogic/servlet/internal/RequestDispatcherImpl.forward(RequestDispatcherImpl.java:253)\n\n            at com/CompName/AppName/core/web/CustomFilter.processRequest(CustomFilter.java:281)[inlined]\n\n            at com/CompName/AppName/core/web/conversation/ConversationFilter.doFilter(ConversationFilter.java:97)[optimized]\n\n            at weblogic/servlet/internal/FilterChainImpl.doFilter(FilterChainImpl.java:56)[optimized]\n\n            at com/CompName/AppName/application/AuthenticationFilter.doFilter(AuthenticationFilter.java:84)\n\n            at weblogic/servlet/internal/FilterChainImpl.doFilter(FilterChainImpl.java:56)[optimized]\n\n            at weblogic/servlet/internal/RequestEventsFilter.doFilter(RequestEventsFilter.java:27)\n\n            at weblogic/servlet/internal/FilterChainImpl.doFilter(FilterChainImpl.java:56)[optimized]\n\n            at weblogic/servlet/internal/WebAppServletContext$ServletInvocationAction.wrapRun(WebAppServletContext.java:3730)\n\n            at weblogic/servlet/internal/WebAppServletContext$ServletInvocationAction.run(WebAppServletContext.java:3696)\n\n            at weblogic/security/acl/internal/AuthenticatedSubject.doAs(AuthenticatedSubject.java:321)\n\n            at weblogic/security/service/SecurityManager.runAs(SecurityManager.java:120)\n\n            at weblogic/servlet/internal/WebAppServletContext.securedExecute(WebAppServletContext.java:2273)\n\n            at weblogic/servlet/internal/WebAppServletContext.execute(WebAppServletContext.java:2179)\n\n            at weblogic/servlet/internal/ServletRequestImpl.run(ServletRequestImpl.java:1490)\n\n            at weblogic/work/ExecuteThread.execute(ExecuteThread.java:256)[optimized]\n\n            at weblogic/work/ExecuteThread.run(ExecuteThread.java:221)\n\n            at jrockit/vm/RNI.c2java(JJJJJ)V(Native Method)\n\n            -- end of trace\n\n        \"ExecuteThread: '0' for queue: 'weblogic.socket.Muxer'\" id=24 idx=0x9c tid=12678 prio=5 alive, blocked, native_blocked, daemon\n\n            -- Blocked trying to get lock: java/lang/String@0x92a32e70[fat lock]\n\n            at jrockit/vm/Threads.waitForUnblockSignal()V(Native Method)\n\n            at jrockit/vm/Locks.fatLockBlockOrSpin(Locks.java:1402)[optimized]\n\n            at jrockit/vm/Locks.lockFat(Locks.java:1503)[optimized]\n\n            at jrockit/vm/Locks.monitorEnterSecondStageHard(Locks.java:1045)[optimized]\n\n            at jrockit/vm/Locks.monitorEnterSecondStage(Locks.java:996)[optimized]\n\n            at jrockit/vm/Locks.monitorEnter(Locks.java:2170)[optimized]\n\n            at weblogic/socket/EPollSocketMuxer.processSockets(EPollSocketMuxer.java:153)\n\n            at weblogic/socket/SocketReaderRequest.run(SocketReaderRequest.java:29)\n\n            at weblogic/socket/SocketReaderRequest.execute(SocketReaderRequest.java:42)\n\n            at weblogic/kernel/ExecuteThread.execute(ExecuteThread.java:145)\n\n            at weblogic/kernel/ExecuteThread.run(ExecuteThread.java:117)\n\n            at jrockit/vm/RNI.c2java(JJJJJ)V(Native Method)\n\n            -- end of trace\n\n        \"ExecuteThread: '1' for queue: 'weblogic.socket.Muxer'\" id=25 idx=0xa0 tid=12679 prio=5 alive, blocked, native_blocked, daemon\n\n            -- Blocked trying to get lock: java/lang/String@0x92a32e70[fat lock]\n\n            at jrockit/vm/Threads.waitForUnblockSignal()V(Native Method)\n\n            at jrockit/vm/Locks.fatLockBlockOrSpin(Locks.java:1402)[optimized]\n\n            at jrockit/vm/Locks.lockFat(Locks.java:1503)[optimized]\n\n            at jrockit/vm/Locks.monitorEnterSecondStageHard(Locks.java:1045)[optimized]\n\n            at jrockit/vm/Locks.monitorEnterSecondStage(Locks.java:996)[optimized]\n\n            at jrockit/vm/Locks.monitorEnter(Locks.java:2170)[optimized]\n\n            at weblogic/socket/EPollSocketMuxer.processSockets(EPollSocketMuxer.java:153)\n\n            at weblogic/socket/SocketReaderRequest.run(SocketReaderRequest.java:29)\n\n            at weblogic/socket/SocketReaderRequest.execute(SocketReaderRequest.java:42)\n\n            at weblogic/kernel/ExecuteThread.execute(ExecuteThread.java:145)\n\n            at weblogic/kernel/ExecuteThread.run(ExecuteThread.java:117)\n\n            at jrockit/vm/RNI.c2java(JJJJJ)V(Native Method)\n\n            -- end of trace\n\n        \"ExecuteThread: '2' for queue: 'weblogic.socket.Muxer'\" id=26 idx=0xa4 tid=12680 prio=5 alive, in native, daemon\n\n            at jrockit/ext/epoll/EPoll.epollWait0(ILjava/nio/ByteBuffer;II)I(Native Method)\n\n            at jrockit/ext/epoll/EPoll.epollWait(EPoll.java:115)\n\n            at weblogic/socket/EPollSocketMuxer.processSockets(EPollSocketMuxer.java:156)\n\n            ^-- Holding lock: java/lang/String@0x92a32e70[fat lock]\n\n            at weblogic/socket/SocketReaderRequest.run(SocketReaderRequest.java:29)\n\n            at weblogic/socket/SocketReaderRequest.execute(SocketReaderRequest.java:42)\n\n            at weblogic/kernel/ExecuteThread.execute(ExecuteThread.java:145)\n\n            at weblogic/kernel/ExecuteThread.run(ExecuteThread.java:117)\n\n            at jrockit/vm/RNI.c2java(JJJJJ)V(Native Method)\n\n            -- end of trace\n\n        \"ExecuteThread: '3' for queue: 'weblogic.socket.Muxer'\" id=27 idx=0xa8 tid=12681 prio=5 alive, blocked, native_blocked, daemon\n\n            -- Blocked trying to get lock: java/lang/String@0x92a32e70[fat lock]\n\n            at jrockit/vm/Threads.waitForUnblockSignal()V(Native Method)\n\n            at jrockit/vm/Locks.fatLockBlockOrSpin(Locks.java:1402)[optimized]\n\n            at jrockit/vm/Locks.lockFat(Locks.java:1503)[optimized]\n\n            at jrockit/vm/Locks.monitorEnterSecondStageHard(Locks.java:1045)[optimized]\n\n            at jrockit/vm/Locks.monitorEnterSecondStage(Locks.java:996)[optimized]\n\n            at jrockit/vm/Locks.monitorEnter(Locks.java:2170)[optimized]\n\n            at weblogic/socket/EPollSocketMuxer.processSockets(EPollSocketMuxer.java:153)\n\n            at weblogic/socket/SocketReaderRequest.run(SocketReaderRequest.java:29)\n\n            at weblogic/socket/SocketReaderRequest.execute(SocketReaderRequest.java:42)\n\n            at weblogic/kernel/ExecuteThread.execute(ExecuteThread.java:145)\n\n            at weblogic/kernel/ExecuteThread.run(ExecuteThread.java:117)\n\n            at jrockit/vm/RNI.c2java(JJJJJ)V(Native Method)\n\n            -- end of trace\n\n        \"Timer-1\" id=28 idx=0xac tid=12683 prio=5 alive, waiting, native_blocked, daemon\n\n            -- Waiting for notification on: java/util/TaskQueue@0x92b0c9b0[fat lock]\n\n            at jrockit/vm/Threads.waitForNotifySignal(JLjava/lang/Object;)Z(Native Method)\n\n            at java/lang/Object.wait(J)V(Native Method)\n\n            at java/lang/Object.wait(Object.java:485)\n\n            at java/util/TimerThread.mainLoop(Timer.java:483)\n\n            ^-- Lock released while waiting: java/util/TaskQueue@0x92b0c9b0[fat lock]\n\n            at java/util/TimerThread.run(Timer.java:462)\n\n            at jrockit/vm/RNI.c2java(JJJJJ)V(Native Method)\n\n            -- end of trace\n\n        \"VDE Transaction Processor Thread\" id=31 idx=0xb0 tid=12684 prio=2 alive, waiting, native_blocked, daemon\n\n            -- Waiting for notification on: com/octetstring/vde/backend/standard/TransactionProcessor@0x92b0ba48[fat lock]\n\n            at jrockit/vm/Threads.waitForNotifySignal(JLjava/lang/Object;)Z(Native Method)\n\n            at java/lang/Object.wait(J)V(Native Method)\n\n            at java/lang/Object.wait(Object.java:485)\n\n            at com/octetstring/vde/backend/standard/TransactionProcessor.waitChange(TransactionProcessor.java:367)\n\n            ^-- Lock released while waiting: com/octetstring/vde/backend/standard/TransactionProcessor@0x92b0ba48[fat lock]\n\n            at com/octetstring/vde/backend/standard/TransactionProcessor.run(TransactionProcessor.java:212)\n\n            at jrockit/vm/RNI.c2java(JJJJJ)V(Native Method)\n\n            -- end of trace\n\n        \"DoSManager\" id=34 idx=0xb8 tid=12686 prio=6 alive, sleeping, native_waiting, daemon\n\n            at java/lang/Thread.sleep(J)V(Native Method)\n\n            at com/octetstring/vde/DoSManager.run(DoSManager.java:433)\n\n            at jrockit/vm/RNI.c2java(JJJJJ)V(Native Method)\n\n            -- end of trace\n\n        \"Timer-2\" id=35 idx=0xbc tid=12687 prio=5 alive, waiting, native_blocked, daemon\n\n            -- Waiting for notification on: java/util/TaskQueue@0x92b0ce80[fat lock]\n\n            at jrockit/vm/Threads.waitForNotifySignal(JLjava/lang/Object;)Z(Native Method)\n\n            at java/lang/Object.wait(J)V(Native Method)\n\n            at java/util/TimerThread.mainLoop(Timer.java:509)\n\n            ^-- Lock released while waiting: java/util/TaskQueue@0x92b0ce80[fat lock]\n\n            at java/util/TimerThread.run(Timer.java:462)\n\n            at jrockit/vm/RNI.c2java(JJJJJ)V(Native Method)\n\n            -- end of trace\n\n\n        \"[STANDBY] ExecuteThread: '2' for queue: 'weblogic.kernel.Default (self-tuning)'\" id=37 idx=0xc4 tid=13075 prio=5 alive, waiting, native_blocked, daemon\n\n            -- Waiting for notification on: weblogic/work/ExecuteThread@0x872bbdf0[fat lock]\n\n            at jrockit/vm/Threads.waitForNotifySignal(JLjava/lang/Object;)Z(Native Method)\n\n            at jrockit/vm/Locks.wait(Locks.java:1964)[inlined]\n\n            at java/lang/Object.wait(Object.java:485)[inlined]\n\n            at weblogic/work/ExecuteThread.waitForRequest(ExecuteThread.java:205)[optimized]\n\n            ^-- Lock released while waiting: weblogic/work/ExecuteThread@0x872bbdf0[fat lock]\n\n            at weblogic/work/ExecuteThread.run(ExecuteThread.java:226)\n\n            at jrockit/vm/RNI.c2java(JJJJJ)V(Native Method)\n\n            -- end of trace\n\n        \"[STANDBY] ExecuteThread: '3' for queue: 'weblogic.kernel.Default (self-tuning)'\" id=38 idx=0xc8 tid=13076 prio=5 alive, waiting, native_blocked, daemon\n\n            -- Waiting for notification on: weblogic/work/ExecuteThread@0x872e99f8[fat lock]\n\n            at jrockit/vm/Threads.waitForNotifySignal(JLjava/lang/Object;)Z(Native Method)\n\n            at jrockit/vm/Locks.wait(Locks.java:1964)[inlined]\n\n            at java/lang/Object.wait(Object.java:485)[inlined]\n\n            at weblogic/work/ExecuteThread.waitForRequest(ExecuteThread.java:205)[optimized]\n\n            ^-- Lock released while waiting: weblogic/work/ExecuteThread@0x872e99f8[fat lock]\n\n            at weblogic/work/ExecuteThread.run(ExecuteThread.java:226)\n\n            at jrockit/vm/RNI.c2java(JJJJJ)V(Native Method)\n\n            -- end of trace\n\n        \"ConversationReaper\" id=44 idx=0xe0 tid=13104 prio=5 alive, sleeping, native_waiting, daemon\n\n            at java/lang/Thread.sleep(J)V(Native Method)\n\n            at com/CompName/AppName/core/web/conversation/ConversationManager$ConversationReaper.run(ConversationManager.java:405)\n\n            at jrockit/vm/RNI.c2java(JJJJJ)V(Native Method)\n\n            -- end of trace\n\n\n        \"DynamicListenThread[Default]\" id=47 idx=0xe8 tid=13106 prio=9 alive, in native, daemon\n\n            at java/net/PlainSocketImpl.socketAccept(Ljava/net/SocketImpl;)V(Native Method)\n\n            at java/net/PlainSocketImpl.accept(PlainSocketImpl.java:390)\n\n            ^-- Holding lock: java/net/SocksSocketImpl@0x9224b198[biased lock]\n\n            at java/net/ServerSocket.implAccept(ServerSocket.java:453)\n\n            at java/net/ServerSocket.accept(ServerSocket.java:421)\n\n            at weblogic/socket/WeblogicServerSocket.accept(WeblogicServerSocket.java:38)\n\n            at weblogic/server/channels/DynamicListenThread$SocketAccepter.accept(DynamicListenThread.java:535)\n\n            at weblogic/server/channels/DynamicListenThread$SocketAccepter.access$200(DynamicListenThread.java:417)\n\n            at weblogic/server/channels/DynamicListenThread.run(DynamicListenThread.java:173)\n\n            at java/lang/Thread.run(Thread.java:619)\n\n            at jrockit/vm/RNI.c2java(JJJJJ)V(Native Method)\n\n            -- end of trace\n\n        \"DynamicListenThread[Default[1]]\" id=48 idx=0xec tid=13107 prio=9 alive, in native, daemon\n\n            at java/net/PlainSocketImpl.socketAccept(Ljava/net/SocketImpl;)V(Native Method)\n\n            at java/net/PlainSocketImpl.accept(PlainSocketImpl.java:390)\n\n            ^-- Holding lock: java/net/SocksSocketImpl@0x922a64b0[biased lock]\n\n            at java/net/ServerSocket.implAccept(ServerSocket.java:453)\n\n            at java/net/ServerSocket.accept(ServerSocket.java:421)\n\n            at weblogic/socket/WeblogicServerSocket.accept(WeblogicServerSocket.java:38)\n\n            at weblogic/server/channels/DynamicListenThread$SocketAccepter.accept(DynamicListenThread.java:535)\n\n            at weblogic/server/channels/DynamicListenThread$SocketAccepter.access$200(DynamicListenThread.java:417)\n\n            at weblogic/server/channels/DynamicListenThread.run(DynamicListenThread.java:173)\n\n            at java/lang/Thread.run(Thread.java:619)\n\n            at jrockit/vm/RNI.c2java(JJJJJ)V(Native Method)\n\n            -- end of trace\n\n\n\n        Blocked lock chains\n\n        ===================\n\n        Chain 2:\n\n        \"ExecuteThread: '1' for queue: 'weblogic.socket.Muxer'\" id=25 idx=0xa0 tid=12679 waiting for java/lang/String@0x92a32e70 held by:\n\n        \"ExecuteThread: '2' for queue: 'weblogic.socket.Muxer'\" id=26 idx=0xa4 tid=12680 in chain 1\n\n        Chain 3:\n\n        \"ExecuteThread: '3' for queue: 'weblogic.socket.Muxer'\" id=27 idx=0xa8 tid=12681 waiting for java/lang/String@0x92a32e70 held by:\n\n        \"ExecuteThread: '2' for queue: 'weblogic.socket.Muxer'\" id=26 idx=0xa4 tid=12680 in chain 1\n\n        Open lock chains\n\n        ================\n\n        Chain 1:\n\n        \"ExecuteThread: '0' for queue: 'weblogic.socket.Muxer'\" id=24 idx=0x9c tid=12678 waiting for java/lang/String@0x92a32e70 held by:\n\n        \"ExecuteThread: '2' for queue: 'weblogic.socket.Muxer'\" id=26 idx=0xa4 tid=12680 (active)\n</code></pre>\n"},{"tags":["java","scala","google-cloud-platform","google-cloud-pubsub"],"answers":[{"tags":[],"owner":{"account_id":1055293,"reputation":1513,"user_id":5115898,"display_name":"Tobi"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695006735,"creation_date":1695006735,"answer_id":77124379,"question_id":44536853,"body_markdown":"The [Google Cloud Pub/Sub docs mention][1] that Java and C# client libraries do not automatically connect to the emulator host via `PUBSUB_EMULATOR_HOST`.\r\n\r\nInstead, you should do the following (extracted from the docs):\r\n\r\n```java\r\nString hostport = System.getenv(&quot;PUBSUB_EMULATOR_HOST&quot;);\r\nManagedChannel channel = ManagedChannelBuilder.forTarget(hostport).usePlaintext().build();\r\nCredentialsProvider credentialsProvider = NoCredentialsProvider.create();\r\n\r\n// Publisher that connects to the emulator\r\nTopicName topicName = TopicName.of(&quot;my-project-id&quot;, &quot;my-topic-id&quot;);\r\n\r\n// Set the channel and credentials provider when creating a `Publisher`.\r\n// Similarly for Subscriber\r\nPublisher publisher =\r\n    Publisher.newBuilder(topicName)\r\n        .setChannelProvider(channelProvider)\r\n        .setCredentialsProvider(credentialsProvider)\r\n        .build();\r\n``` \r\nYou may want to check if `PUBSUB_EMULATOR_HOST` is set and only then set `NoCredentialsProvider` and the custom `ManagedChannel` on the builder.\r\n\r\n  [1]: https://cloud.google.com/pubsub/docs/emulator#accessing_environment_variables","title":"Google Cloud Pub/Sub client library for Java not using local emulator","body":"<p>The <a href=\"https://cloud.google.com/pubsub/docs/emulator#accessing_environment_variables\" rel=\"nofollow noreferrer\">Google Cloud Pub/Sub docs mention</a> that Java and C# client libraries do not automatically connect to the emulator host via <code>PUBSUB_EMULATOR_HOST</code>.</p>\n<p>Instead, you should do the following (extracted from the docs):</p>\n<pre class=\"lang-java prettyprint-override\"><code>String hostport = System.getenv(&quot;PUBSUB_EMULATOR_HOST&quot;);\nManagedChannel channel = ManagedChannelBuilder.forTarget(hostport).usePlaintext().build();\nCredentialsProvider credentialsProvider = NoCredentialsProvider.create();\n\n// Publisher that connects to the emulator\nTopicName topicName = TopicName.of(&quot;my-project-id&quot;, &quot;my-topic-id&quot;);\n\n// Set the channel and credentials provider when creating a `Publisher`.\n// Similarly for Subscriber\nPublisher publisher =\n    Publisher.newBuilder(topicName)\n        .setChannelProvider(channelProvider)\n        .setCredentialsProvider(credentialsProvider)\n        .build();\n</code></pre>\n<p>You may want to check if <code>PUBSUB_EMULATOR_HOST</code> is set and only then set <code>NoCredentialsProvider</code> and the custom <code>ManagedChannel</code> on the builder.</p>\n"}],"owner":{"account_id":4572694,"reputation":1461,"user_id":3711976,"accept_rate":54,"display_name":"Kakaji"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":1055,"favorite_count":0,"down_vote_count":0,"up_vote_count":5,"answer_count":1,"score":5,"last_activity_date":1695006735,"creation_date":1497420909,"question_id":44536853,"body_markdown":"I am trying to use Google cloud Pub/Sub emulator for testing my scala app. [Documentation][1] states the following -\r\n\r\n&gt; Run the env-init command to determine and set the environment variables used by the emulator. Note that after following these instructions, the Google Cloud Pub/Sub client libraries in your code call the API running in the local instance instead of the production API.\r\n\r\nBut when I publish a message or create a topic it gets executed in the cloud and not on my local emulator. I have confirmed that the environment variable is set correctly using `println(s&quot;ENV: ${sys.env(&quot;PUBSUB_EMULATOR_HOST&quot;)}&quot;)` which prints `ENV: localhost:8085`. \r\n\r\nI tried forcing the library to use my local setup as follows \r\n\r\n    val settings = TopicAdminSettings.defaultBuilder()\r\n      .setChannelProvider(InstantiatingChannelProvider.newBuilder()\r\n        .setEndpoint(&quot;localhost:8085&quot;)\r\n          .setCredentialsProvider(TopicAdminSettings.defaultCredentialsProviderBuilder().build())\r\n        .build())\r\n      .build()\r\n\r\n    val topicAdminClient = TopicAdminClient.create(settings)\r\n    topicAdminClient.createTopic(topicName)\r\n\r\nThis way I succeed to send a request to my local setup but that results in the following error -\r\n\r\n    [pubsub] 6 14, 2017 2:49:11 午後 io.gapi.emulators.grpc.GrpcServer$3 operationComplete\r\n    [pubsub] INFO: Adding handler(s) to newly registered Channel.\r\n    [pubsub] 6 14, 2017 2:49:11 午後io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\n    [pubsub] INFO: Detected non-HTTP/2 connection.\r\n    [pubsub] 6 14, 2017 2:49:11 午後 io.gapi.emulators.netty.NotFoundHandler handleRequest\r\n    [pubsub] INFO: Unknown request URI: /bad-request\r\n    [pubsub] 6 14, 2017 2:49:35 午後 io.gapi.emulators.grpc.GrpcServer$3 operationComplete\r\n    [pubsub] INFO: Adding handler(s) to newly registered Channel.\r\n    [pubsub] 6 14, 2017 2:49:35 午後 io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\r\n    [pubsub] INFO: Detected non-HTTP/2 connection.\r\n    [pubsub] 6 14, 2017 2:49:35 午後 io.gapi.emulators.netty.NotFoundHandler handleRequest\r\n    [pubsub] INFO: Unknown request URI: /bad-request\r\n\r\nI started the emulator as follows -\r\n\r\n    PC-12041:random kakaji$ sudo gcloud beta emulators pubsub start\r\n    Password:\r\n    Executing: /usr/local/google-cloud-sdk/platform/pubsub-emulator/bin/cloud-pubsub-emulator --host=localhost --port=8085\r\n    [pubsub] This is the Google Pub/Sub fake.\r\n    [pubsub] Implementation may be incomplete or differ from the real system.\r\n    [pubsub] 6 14, 2017 2:59:21 午後 com.google.cloud.pubsub.testing.v1.Main main\r\n    [pubsub] INFO: IAM integration is disabled. IAM policy methods and ACL checks are not supported\r\n    [pubsub] 6 14, 2017 2:59:21 午後 io.grpc.internal.ManagedChannelImpl &lt;init&gt;\r\n    [pubsub] INFO: [ManagedChannelImpl@77b52d12] Created with target localhost:8085\r\n    [pubsub] 6 14, 2017 2:59:21 午後 io.gapi.emulators.netty.NettyUtil applyJava7LongHostnameWorkaround\r\n    [pubsub] INFO: Unable to apply Java 7 long hostname workaround.\r\n    [pubsub] 6 14, 2017 2:59:21 午後 com.google.cloud.pubsub.testing.v1.Main main\r\n    [pubsub] INFO: Server started, listening on 8085\r\n\r\n  [1]: https://cloud.google.com/pubsub/docs/emulator","title":"Google Cloud Pub/Sub client library for Java not using local emulator","body":"<p>I am trying to use Google cloud Pub/Sub emulator for testing my scala app. <a href=\"https://cloud.google.com/pubsub/docs/emulator\" rel=\"noreferrer\">Documentation</a> states the following -</p>\n\n<blockquote>\n  <p>Run the env-init command to determine and set the environment variables used by the emulator. Note that after following these instructions, the Google Cloud Pub/Sub client libraries in your code call the API running in the local instance instead of the production API.</p>\n</blockquote>\n\n<p>But when I publish a message or create a topic it gets executed in the cloud and not on my local emulator. I have confirmed that the environment variable is set correctly using <code>println(s\"ENV: ${sys.env(\"PUBSUB_EMULATOR_HOST\")}\")</code> which prints <code>ENV: localhost:8085</code>. </p>\n\n<p>I tried forcing the library to use my local setup as follows </p>\n\n<pre><code>val settings = TopicAdminSettings.defaultBuilder()\n  .setChannelProvider(InstantiatingChannelProvider.newBuilder()\n    .setEndpoint(\"localhost:8085\")\n      .setCredentialsProvider(TopicAdminSettings.defaultCredentialsProviderBuilder().build())\n    .build())\n  .build()\n\nval topicAdminClient = TopicAdminClient.create(settings)\ntopicAdminClient.createTopic(topicName)\n</code></pre>\n\n<p>This way I succeed to send a request to my local setup but that results in the following error -</p>\n\n<pre><code>[pubsub] 6 14, 2017 2:49:11 午後 io.gapi.emulators.grpc.GrpcServer$3 operationComplete\n[pubsub] INFO: Adding handler(s) to newly registered Channel.\n[pubsub] 6 14, 2017 2:49:11 午後io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\n[pubsub] INFO: Detected non-HTTP/2 connection.\n[pubsub] 6 14, 2017 2:49:11 午後 io.gapi.emulators.netty.NotFoundHandler handleRequest\n[pubsub] INFO: Unknown request URI: /bad-request\n[pubsub] 6 14, 2017 2:49:35 午後 io.gapi.emulators.grpc.GrpcServer$3 operationComplete\n[pubsub] INFO: Adding handler(s) to newly registered Channel.\n[pubsub] 6 14, 2017 2:49:35 午後 io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\n[pubsub] INFO: Detected non-HTTP/2 connection.\n[pubsub] 6 14, 2017 2:49:35 午後 io.gapi.emulators.netty.NotFoundHandler handleRequest\n[pubsub] INFO: Unknown request URI: /bad-request\n</code></pre>\n\n<p>I started the emulator as follows -</p>\n\n<pre><code>PC-12041:random kakaji$ sudo gcloud beta emulators pubsub start\nPassword:\nExecuting: /usr/local/google-cloud-sdk/platform/pubsub-emulator/bin/cloud-pubsub-emulator --host=localhost --port=8085\n[pubsub] This is the Google Pub/Sub fake.\n[pubsub] Implementation may be incomplete or differ from the real system.\n[pubsub] 6 14, 2017 2:59:21 午後 com.google.cloud.pubsub.testing.v1.Main main\n[pubsub] INFO: IAM integration is disabled. IAM policy methods and ACL checks are not supported\n[pubsub] 6 14, 2017 2:59:21 午後 io.grpc.internal.ManagedChannelImpl &lt;init&gt;\n[pubsub] INFO: [ManagedChannelImpl@77b52d12] Created with target localhost:8085\n[pubsub] 6 14, 2017 2:59:21 午後 io.gapi.emulators.netty.NettyUtil applyJava7LongHostnameWorkaround\n[pubsub] INFO: Unable to apply Java 7 long hostname workaround.\n[pubsub] 6 14, 2017 2:59:21 午後 com.google.cloud.pubsub.testing.v1.Main main\n[pubsub] INFO: Server started, listening on 8085\n</code></pre>\n"},{"tags":["java","serialization","spigot"],"comments":[{"owner":{"account_id":6520,"reputation":10523,"user_id":11002,"accept_rate":75,"display_name":"tgdavies"},"score":2,"creation_date":1695006310,"post_id":77124331,"comment_id":135961633,"body_markdown":"Only the fields need to be serializable.","body":"Only the fields need to be serializable."}],"answers":[{"tags":[],"owner":{"account_id":14883843,"reputation":193,"user_id":12280406,"display_name":"solitude"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1695006286,"creation_date":1695006286,"answer_id":77124359,"question_id":77124331,"body_markdown":"Yes you can. \r\n\r\nSerialize is only concerned with the state of an object, which is determined by the instance varibles and not by its methods.\r\n\r\nTo use non-serializable objects within the Serializable class without affecting serializabilty of the class itself like in your case; your `Player` obj will only used within the scope of the `addPlayer` method. Its not stored as an instance variable on your `Town` class so it does not really affect the serializabilty of your `Town` class. So yes you can use your `addPlayer(Player p)` method as is. The only thing that gets serialized are the fields of your Town class such as `(name, color, mayors, cabinet, citizens)`. So no need to worry about your `Player` not being serializable.","title":"Java can an object be serialized if it uses non-serializable data in a method?","body":"<p>Yes you can.</p>\n<p>Serialize is only concerned with the state of an object, which is determined by the instance varibles and not by its methods.</p>\n<p>To use non-serializable objects within the Serializable class without affecting serializabilty of the class itself like in your case; your <code>Player</code> obj will only used within the scope of the <code>addPlayer</code> method. Its not stored as an instance variable on your <code>Town</code> class so it does not really affect the serializabilty of your <code>Town</code> class. So yes you can use your <code>addPlayer(Player p)</code> method as is. The only thing that gets serialized are the fields of your Town class such as <code>(name, color, mayors, cabinet, citizens)</code>. So no need to worry about your <code>Player</code> not being serializable.</p>\n"}],"owner":{"account_id":13578540,"reputation":11,"user_id":10913812,"display_name":"Bionicle Kolacz"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":38,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"accepted_answer_id":77124359,"answer_count":1,"score":-1,"last_activity_date":1695006286,"creation_date":1695005478,"question_id":77124331,"body_markdown":"I have the following class:\r\n\r\n```\r\npublic class Town implements Serializable {\r\n    public String name = &quot;Town&quot;;\r\n    public String color = &quot;White&quot;;\r\n    public ArrayList&lt;UUID&gt; mayors = new ArrayList&lt;&gt;();\r\n    public ArrayList&lt;UUID&gt; cabinet = new ArrayList&lt;&gt;();\r\n    public ArrayList&lt;UUID&gt; citizens = new ArrayList&lt;&gt;();\r\n\r\n}\r\n```\r\nI want to add an &quot;addPlayer&quot; void, that adds the UUID of a player, (working on a spigot/minecraft plugin) obtained from Player.getUniqueID()  (returns a UUID object), I&#39;m wondering if my method could look like this:\r\n\r\n```\r\npublic void addPlayer (Player p){\r\n    citizens.add(p.getUniqueID());\r\n}\r\n```\r\nor if since the Player object is not serializable if I would need to just have the method take a UUID instead of a player?\r\n\r\nSimply put, can non-serializable objects be used within the scope of functions since they aren&#39;t being used as field variables? \r\n\r\n\r\n\r\n\r\nI know it&#39;d be super easy to just put in a UUID instead of player object if necessary, but knowing whether or not I can do this will help me a lot with some other things I have planned for the project","title":"Java can an object be serialized if it uses non-serializable data in a method?","body":"<p>I have the following class:</p>\n<pre><code>public class Town implements Serializable {\n    public String name = &quot;Town&quot;;\n    public String color = &quot;White&quot;;\n    public ArrayList&lt;UUID&gt; mayors = new ArrayList&lt;&gt;();\n    public ArrayList&lt;UUID&gt; cabinet = new ArrayList&lt;&gt;();\n    public ArrayList&lt;UUID&gt; citizens = new ArrayList&lt;&gt;();\n\n}\n</code></pre>\n<p>I want to add an &quot;addPlayer&quot; void, that adds the UUID of a player, (working on a spigot/minecraft plugin) obtained from Player.getUniqueID()  (returns a UUID object), I'm wondering if my method could look like this:</p>\n<pre><code>public void addPlayer (Player p){\n    citizens.add(p.getUniqueID());\n}\n</code></pre>\n<p>or if since the Player object is not serializable if I would need to just have the method take a UUID instead of a player?</p>\n<p>Simply put, can non-serializable objects be used within the scope of functions since they aren't being used as field variables?</p>\n<p>I know it'd be super easy to just put in a UUID instead of player object if necessary, but knowing whether or not I can do this will help me a lot with some other things I have planned for the project</p>\n"},{"tags":["java","mocking","mockito","powermockito","java-sealed-type"],"comments":[{"owner":{"account_id":3116234,"reputation":9296,"user_id":2636929,"display_name":"Stultuske"},"score":0,"creation_date":1626675556,"post_id":68435772,"comment_id":120946772,"body_markdown":"I assume you could add a MockImpl to the permits list","body":"I assume you could add a MockImpl to the permits list"},{"owner":{"account_id":319873,"reputation":87612,"user_id":637853,"accept_rate":50,"display_name":"Thomas"},"score":1,"creation_date":1626675942,"post_id":68435772,"comment_id":120946867,"body_markdown":"From what I know about sealed classes so far, your mocks would also have to be part of the same module and, as Stultuske said, they probably need to be part of the permits list. This might not be practical and I assume new approaches of dealing with sealed classes will emerge, e.g. sealing them after they&#39;ve been tested, e.g. in some production build.","body":"From what I know about sealed classes so far, your mocks would also have to be part of the same module and, as Stultuske said, they probably need to be part of the permits list. This might not be practical and I assume new approaches of dealing with sealed classes will emerge, e.g. sealing them after they&#39;ve been tested, e.g. in some production build."},{"owner":{"account_id":2649619,"reputation":61,"user_id":2291640,"display_name":"Curious"},"score":1,"creation_date":1626677176,"post_id":68435772,"comment_id":120947208,"body_markdown":"@Stultuske I thought about this, and thought it could be viable, but then I started to think about how that would affect the enhanced switch statements.  But more to the point, this would create another implementation and not a mock.","body":"@Stultuske I thought about this, and thought it could be viable, but then I started to think about how that would affect the enhanced switch statements.  But more to the point, this would create another implementation and not a mock."}],"answers":[{"tags":[],"owner":{"account_id":208696,"reputation":2360,"user_id":459347,"accept_rate":100,"display_name":"lscoughlin"},"down_vote_count":4,"up_vote_count":3,"is_accepted":false,"score":-1,"last_activity_date":1626764038,"creation_date":1626676071,"answer_id":68435990,"question_id":68435772,"body_markdown":"It is not possible to mock a sealed class.\r\n\r\nIf you find yourself in the position of having to do so, you should be question whether or not you should be using a sealed class at all.\r\n\r\nThe actual set of use cases for sealed classes is _really small_ and you probably don&#39;t need them.\r\n\r\n---- original answer ---- \r\n\r\nOh look, you found one of the various reasons that sealed classes are a thing that you should probably never use without a Very Good Reason (tm).\r\n\r\nSealed classes should _always_ be abstract.\r\n\r\nMock one of its known implementations, not the the sealed class.\r\n\r\nIf it&#39;s not your code, find a new library.","title":"Is there any way to mock a sealed interface?","body":"<p>It is not possible to mock a sealed class.</p>\n<p>If you find yourself in the position of having to do so, you should be question whether or not you should be using a sealed class at all.</p>\n<p>The actual set of use cases for sealed classes is <em>really small</em> and you probably don't need them.</p>\n<p>---- original answer ----</p>\n<p>Oh look, you found one of the various reasons that sealed classes are a thing that you should probably never use without a Very Good Reason (tm).</p>\n<p>Sealed classes should <em>always</em> be abstract.</p>\n<p>Mock one of its known implementations, not the the sealed class.</p>\n<p>If it's not your code, find a new library.</p>\n"},{"tags":[],"owner":{"account_id":119737,"reputation":29617,"user_id":311660,"accept_rate":92,"display_name":"ocodo"},"down_vote_count":2,"up_vote_count":2,"is_accepted":false,"score":0,"last_activity_date":1695006078,"creation_date":1695006078,"answer_id":77124353,"question_id":68435772,"body_markdown":"Since the answer with caveats was downvoted.  Here&#39;s the headline.\r\n\r\n# No\r\n\r\n\r\n","title":"Is there any way to mock a sealed interface?","body":"<p>Since the answer with caveats was downvoted.  Here's the headline.</p>\n<h1>No</h1>\n"}],"owner":{"account_id":2649619,"reputation":61,"user_id":2291640,"display_name":"Curious"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":3911,"favorite_count":0,"down_vote_count":0,"up_vote_count":6,"answer_count":2,"score":6,"last_activity_date":1695006078,"creation_date":1626674816,"question_id":68435772,"body_markdown":"Today I created a small test project for java 16 preview.  I created a sealed interface and a final implementation.\r\n\r\nI want to know if there is anyway to be able to mock the sealed interface so that I can test implementations that use the sealed interface.\r\n\r\n```\r\npackage gluestick;\r\n\r\npublic sealed interface Test permits TestImpl {\r\n    int doIt();\r\n}\r\n```\r\n```\r\npackage gluestick;\r\n\r\npublic final class TestImpl implements Test {\r\n    @Override\r\n    public int doIt() {\r\n        return 0;\r\n    }\r\n}\r\n```\r\n```\r\nimport org.junit.jupiter.api.Test;\r\nimport org.mockito.Mockito;\r\n\r\npublic class MyTest {\r\n\r\n    @Test\r\n    public void test() {\r\n        Mockito.mock(gluestick.Test.class);\r\n    }\r\n}\r\n```\r\n\r\nThis all amounts however to creating a java.lang.IncompatibleClassChangeError since the sealed class cannot be implemented.\r\n\r\n```\r\norg.mockito.exceptions.base.MockitoException: \r\nMockito cannot mock this class: interface gluestick.Test.\r\n\r\nMockito can only mock non-private &amp; non-final classes.\r\nIf you&#39;re not sure why you&#39;re getting this error, please report to the mailing list.\r\n\r\n\r\nJava               : 16\r\nJVM vendor name    : Oracle Corporation\r\nJVM vendor version : 16.0.1+9-24\r\nJVM name           : OpenJDK 64-Bit Server VM\r\nJVM version        : 16.0.1+9-24\r\nJVM info           : mixed mode, sharing\r\nOS name            : Windows 10\r\nOS version         : 10.0\r\n\r\n\r\nUnderlying exception : java.lang.IllegalStateException: Error invoking (accessor)::defineClass\r\n\r\n\tat MyTest.test(MyTest.java:8)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:78)\r\n\tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:567)\r\n\tat org.junit.platform.commons.util.ReflectionUtils.invokeMethod(ReflectionUtils.java:688)\r\n\tat org.junit.jupiter.engine.execution.MethodInvocation.proceed(MethodInvocation.java:60)\r\n\tat org.junit.jupiter.engine.execution.InvocationInterceptorChain$ValidatingInvocation.proceed(InvocationInterceptorChain.java:131)\r\n\tat org.junit.jupiter.engine.extension.TimeoutExtension.intercept(TimeoutExtension.java:149)\r\n\tat org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestableMethod(TimeoutExtension.java:140)\r\n\tat org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestMethod(TimeoutExtension.java:84)\r\n\tat org.junit.jupiter.engine.execution.ExecutableInvoker$ReflectiveInterceptorCall.lambda$ofVoidMethod$0(ExecutableInvoker.java:115)\r\n\tat org.junit.jupiter.engine.execution.ExecutableInvoker.lambda$invoke$0(ExecutableInvoker.java:105)\r\n\tat org.junit.jupiter.engine.execution.InvocationInterceptorChain$InterceptedInvocation.proceed(InvocationInterceptorChain.java:106)\r\n\tat org.junit.jupiter.engine.execution.InvocationInterceptorChain.proceed(InvocationInterceptorChain.java:64)\r\n\tat org.junit.jupiter.engine.execution.InvocationInterceptorChain.chainAndInvoke(InvocationInterceptorChain.java:45)\r\n\tat org.junit.jupiter.engine.execution.InvocationInterceptorChain.invoke(InvocationInterceptorChain.java:37)\r\n\tat org.junit.jupiter.engine.execution.ExecutableInvoker.invoke(ExecutableInvoker.java:104)\r\n\tat org.junit.jupiter.engine.execution.ExecutableInvoker.invoke(ExecutableInvoker.java:98)\r\n\tat org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeTestMethod$6(TestMethodTestDescriptor.java:210)\r\n\tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n\tat org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.invokeTestMethod(TestMethodTestDescriptor.java:206)\r\n\tat org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:131)\r\n\tat org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:65)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$5(NodeTestTask.java:139)\r\n\tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$7(NodeTestTask.java:129)\r\n\tat org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:127)\r\n\tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:126)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:84)\r\n\tat java.base/java.util.ArrayList.forEach(ArrayList.java:1511)\r\n\tat org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:38)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$5(NodeTestTask.java:143)\r\n\tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$7(NodeTestTask.java:129)\r\n\tat org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:127)\r\n\tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:126)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:84)\r\n\tat java.base/java.util.ArrayList.forEach(ArrayList.java:1511)\r\n\tat org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:38)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$5(NodeTestTask.java:143)\r\n\tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$7(NodeTestTask.java:129)\r\n\tat org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:127)\r\n\tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:126)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:84)\r\n\tat org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:32)\r\n\tat org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)\r\n\tat org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:51)\r\n\tat org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:108)\r\n\tat org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:88)\r\n\tat org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:54)\r\n\tat org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:67)\r\n\tat org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:52)\r\n\tat org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:96)\r\n\tat org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:75)\r\n\tat com.intellij.junit5.JUnit5IdeaTestRunner.startRunnerWithArgs(JUnit5IdeaTestRunner.java:71)\r\n\tat com.intellij.rt.junit.IdeaTestRunner$Repeater.startRunnerWithArgs(IdeaTestRunner.java:33)\r\n\tat com.intellij.rt.junit.JUnitStarter.prepareStreamsAndStart(JUnitStarter.java:221)\r\n\tat com.intellij.rt.junit.JUnitStarter.main(JUnitStarter.java:54)\r\nCaused by: java.lang.IllegalStateException: Error invoking (accessor)::defineClass\r\n\tat net.bytebuddy.dynamic.loading.ClassInjector$UsingReflection$Dispatcher$UsingUnsafeInjection.defineClass(ClassInjector.java:1002)\r\n\tat net.bytebuddy.dynamic.loading.ClassInjector$UsingReflection.injectRaw(ClassInjector.java:254)\r\n\tat net.bytebuddy.dynamic.loading.ClassInjector$AbstractBase.inject(ClassInjector.java:113)\r\n\tat net.bytebuddy.dynamic.loading.ClassLoadingStrategy$Default$InjectionDispatcher.load(ClassLoadingStrategy.java:233)\r\n\tat net.bytebuddy.dynamic.TypeResolutionStrategy$Passive.initialize(TypeResolutionStrategy.java:100)\r\n\tat net.bytebuddy.dynamic.DynamicType$Default$Unloaded.load(DynamicType.java:6147)\r\n\tat org.mockito.internal.creation.bytebuddy.SubclassBytecodeGenerator.mockClass(SubclassBytecodeGenerator.java:268)\r\n\tat org.mockito.internal.creation.bytebuddy.TypeCachingBytecodeGenerator.lambda$mockClass$0(TypeCachingBytecodeGenerator.java:47)\r\n\tat net.bytebuddy.TypeCache.findOrInsert(TypeCache.java:153)\r\n\tat net.bytebuddy.TypeCache$WithInlineExpunction.findOrInsert(TypeCache.java:366)\r\n\tat net.bytebuddy.TypeCache.findOrInsert(TypeCache.java:175)\r\n\tat net.bytebuddy.TypeCache$WithInlineExpunction.findOrInsert(TypeCache.java:377)\r\n\tat org.mockito.internal.creation.bytebuddy.TypeCachingBytecodeGenerator.mockClass(TypeCachingBytecodeGenerator.java:40)\r\n\tat org.mockito.internal.creation.bytebuddy.SubclassByteBuddyMockMaker.createMockType(SubclassByteBuddyMockMaker.java:77)\r\n\tat org.mockito.internal.creation.bytebuddy.SubclassByteBuddyMockMaker.createMock(SubclassByteBuddyMockMaker.java:43)\r\n\tat org.mockito.internal.creation.bytebuddy.ByteBuddyMockMaker.createMock(ByteBuddyMockMaker.java:43)\r\n\tat org.mockito.internal.util.MockUtil.createMock(MockUtil.java:53)\r\n\tat org.mockito.internal.MockitoCore.mock(MockitoCore.java:84)\r\n\tat org.mockito.Mockito.mock(Mockito.java:1954)\r\n\tat org.mockito.Mockito.mock(Mockito.java:1865)\r\n\t... 66 more\r\nCaused by: java.lang.IncompatibleClassChangeError: class gluestick.Test$MockitoMock$1535486471 cannot implement sealed interface gluestick.Test\r\n\tat java.base/java.lang.ClassLoader.defineClass1(Native Method)\r\n\tat java.base/java.lang.ClassLoader.defineClass(ClassLoader.java:1010)\r\n\tat java.base/java.lang.ClassLoader$ByteBuddyAccessor$teEoQ54g.defineClass(Unknown Source)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:78)\r\n\tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:567)\r\n\tat net.bytebuddy.dynamic.loading.ClassInjector$UsingReflection$Dispatcher$UsingUnsafeInjection.defineClass(ClassInjector.java:998)\r\n\t... 85 more\r\n\r\n\r\nProcess finished with exit code -1\r\n```\r\n\r\n**Is there any way to mock a sealed interface?**\r\n\r\n","title":"Is there any way to mock a sealed interface?","body":"<p>Today I created a small test project for java 16 preview.  I created a sealed interface and a final implementation.</p>\n<p>I want to know if there is anyway to be able to mock the sealed interface so that I can test implementations that use the sealed interface.</p>\n<pre><code>package gluestick;\n\npublic sealed interface Test permits TestImpl {\n    int doIt();\n}\n</code></pre>\n<pre><code>package gluestick;\n\npublic final class TestImpl implements Test {\n    @Override\n    public int doIt() {\n        return 0;\n    }\n}\n</code></pre>\n<pre><code>import org.junit.jupiter.api.Test;\nimport org.mockito.Mockito;\n\npublic class MyTest {\n\n    @Test\n    public void test() {\n        Mockito.mock(gluestick.Test.class);\n    }\n}\n</code></pre>\n<p>This all amounts however to creating a java.lang.IncompatibleClassChangeError since the sealed class cannot be implemented.</p>\n<pre><code>org.mockito.exceptions.base.MockitoException: \nMockito cannot mock this class: interface gluestick.Test.\n\nMockito can only mock non-private &amp; non-final classes.\nIf you're not sure why you're getting this error, please report to the mailing list.\n\n\nJava               : 16\nJVM vendor name    : Oracle Corporation\nJVM vendor version : 16.0.1+9-24\nJVM name           : OpenJDK 64-Bit Server VM\nJVM version        : 16.0.1+9-24\nJVM info           : mixed mode, sharing\nOS name            : Windows 10\nOS version         : 10.0\n\n\nUnderlying exception : java.lang.IllegalStateException: Error invoking (accessor)::defineClass\n\n    at MyTest.test(MyTest.java:8)\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:78)\n    at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n    at java.base/java.lang.reflect.Method.invoke(Method.java:567)\n    at org.junit.platform.commons.util.ReflectionUtils.invokeMethod(ReflectionUtils.java:688)\n    at org.junit.jupiter.engine.execution.MethodInvocation.proceed(MethodInvocation.java:60)\n    at org.junit.jupiter.engine.execution.InvocationInterceptorChain$ValidatingInvocation.proceed(InvocationInterceptorChain.java:131)\n    at org.junit.jupiter.engine.extension.TimeoutExtension.intercept(TimeoutExtension.java:149)\n    at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestableMethod(TimeoutExtension.java:140)\n    at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestMethod(TimeoutExtension.java:84)\n    at org.junit.jupiter.engine.execution.ExecutableInvoker$ReflectiveInterceptorCall.lambda$ofVoidMethod$0(ExecutableInvoker.java:115)\n    at org.junit.jupiter.engine.execution.ExecutableInvoker.lambda$invoke$0(ExecutableInvoker.java:105)\n    at org.junit.jupiter.engine.execution.InvocationInterceptorChain$InterceptedInvocation.proceed(InvocationInterceptorChain.java:106)\n    at org.junit.jupiter.engine.execution.InvocationInterceptorChain.proceed(InvocationInterceptorChain.java:64)\n    at org.junit.jupiter.engine.execution.InvocationInterceptorChain.chainAndInvoke(InvocationInterceptorChain.java:45)\n    at org.junit.jupiter.engine.execution.InvocationInterceptorChain.invoke(InvocationInterceptorChain.java:37)\n    at org.junit.jupiter.engine.execution.ExecutableInvoker.invoke(ExecutableInvoker.java:104)\n    at org.junit.jupiter.engine.execution.ExecutableInvoker.invoke(ExecutableInvoker.java:98)\n    at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeTestMethod$6(TestMethodTestDescriptor.java:210)\n    at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\n    at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.invokeTestMethod(TestMethodTestDescriptor.java:206)\n    at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:131)\n    at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:65)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$5(NodeTestTask.java:139)\n    at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$7(NodeTestTask.java:129)\n    at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:127)\n    at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:126)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:84)\n    at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)\n    at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:38)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$5(NodeTestTask.java:143)\n    at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$7(NodeTestTask.java:129)\n    at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:127)\n    at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:126)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:84)\n    at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)\n    at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:38)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$5(NodeTestTask.java:143)\n    at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$7(NodeTestTask.java:129)\n    at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:127)\n    at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:126)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:84)\n    at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:32)\n    at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)\n    at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:51)\n    at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:108)\n    at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:88)\n    at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:54)\n    at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:67)\n    at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:52)\n    at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:96)\n    at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:75)\n    at com.intellij.junit5.JUnit5IdeaTestRunner.startRunnerWithArgs(JUnit5IdeaTestRunner.java:71)\n    at com.intellij.rt.junit.IdeaTestRunner$Repeater.startRunnerWithArgs(IdeaTestRunner.java:33)\n    at com.intellij.rt.junit.JUnitStarter.prepareStreamsAndStart(JUnitStarter.java:221)\n    at com.intellij.rt.junit.JUnitStarter.main(JUnitStarter.java:54)\nCaused by: java.lang.IllegalStateException: Error invoking (accessor)::defineClass\n    at net.bytebuddy.dynamic.loading.ClassInjector$UsingReflection$Dispatcher$UsingUnsafeInjection.defineClass(ClassInjector.java:1002)\n    at net.bytebuddy.dynamic.loading.ClassInjector$UsingReflection.injectRaw(ClassInjector.java:254)\n    at net.bytebuddy.dynamic.loading.ClassInjector$AbstractBase.inject(ClassInjector.java:113)\n    at net.bytebuddy.dynamic.loading.ClassLoadingStrategy$Default$InjectionDispatcher.load(ClassLoadingStrategy.java:233)\n    at net.bytebuddy.dynamic.TypeResolutionStrategy$Passive.initialize(TypeResolutionStrategy.java:100)\n    at net.bytebuddy.dynamic.DynamicType$Default$Unloaded.load(DynamicType.java:6147)\n    at org.mockito.internal.creation.bytebuddy.SubclassBytecodeGenerator.mockClass(SubclassBytecodeGenerator.java:268)\n    at org.mockito.internal.creation.bytebuddy.TypeCachingBytecodeGenerator.lambda$mockClass$0(TypeCachingBytecodeGenerator.java:47)\n    at net.bytebuddy.TypeCache.findOrInsert(TypeCache.java:153)\n    at net.bytebuddy.TypeCache$WithInlineExpunction.findOrInsert(TypeCache.java:366)\n    at net.bytebuddy.TypeCache.findOrInsert(TypeCache.java:175)\n    at net.bytebuddy.TypeCache$WithInlineExpunction.findOrInsert(TypeCache.java:377)\n    at org.mockito.internal.creation.bytebuddy.TypeCachingBytecodeGenerator.mockClass(TypeCachingBytecodeGenerator.java:40)\n    at org.mockito.internal.creation.bytebuddy.SubclassByteBuddyMockMaker.createMockType(SubclassByteBuddyMockMaker.java:77)\n    at org.mockito.internal.creation.bytebuddy.SubclassByteBuddyMockMaker.createMock(SubclassByteBuddyMockMaker.java:43)\n    at org.mockito.internal.creation.bytebuddy.ByteBuddyMockMaker.createMock(ByteBuddyMockMaker.java:43)\n    at org.mockito.internal.util.MockUtil.createMock(MockUtil.java:53)\n    at org.mockito.internal.MockitoCore.mock(MockitoCore.java:84)\n    at org.mockito.Mockito.mock(Mockito.java:1954)\n    at org.mockito.Mockito.mock(Mockito.java:1865)\n    ... 66 more\nCaused by: java.lang.IncompatibleClassChangeError: class gluestick.Test$MockitoMock$1535486471 cannot implement sealed interface gluestick.Test\n    at java.base/java.lang.ClassLoader.defineClass1(Native Method)\n    at java.base/java.lang.ClassLoader.defineClass(ClassLoader.java:1010)\n    at java.base/java.lang.ClassLoader$ByteBuddyAccessor$teEoQ54g.defineClass(Unknown Source)\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:78)\n    at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n    at java.base/java.lang.reflect.Method.invoke(Method.java:567)\n    at net.bytebuddy.dynamic.loading.ClassInjector$UsingReflection$Dispatcher$UsingUnsafeInjection.defineClass(ClassInjector.java:998)\n    ... 85 more\n\n\nProcess finished with exit code -1\n</code></pre>\n<p><strong>Is there any way to mock a sealed interface?</strong></p>\n"},{"tags":["java","if-statement","error-handling"],"comments":[{"owner":{"account_id":3557625,"reputation":198996,"user_id":2970947,"display_name":"Elliott Frisch"},"score":2,"creation_date":1694961248,"post_id":77122243,"comment_id":135957335,"body_markdown":"`if (! wordRandom.contains(choice1)) { /* The random word does not contain choice1 */ } else { /* It does. */ }`","body":"<code>if (! wordRandom.contains(choice1)) { &#47;* The random word does not contain choice1 *&#47; } else { &#47;* It does. *&#47; }</code>"},{"owner":{"account_id":29463452,"reputation":15,"user_id":22577682,"display_name":"Piolo Pascual Besinga"},"score":0,"creation_date":1694961371,"post_id":77122243,"comment_id":135957354,"body_markdown":"okay I&#39;ll try this","body":"okay I&#39;ll try this"},{"owner":{"account_id":29463452,"reputation":15,"user_id":22577682,"display_name":"Piolo Pascual Besinga"},"score":0,"creation_date":1694961688,"post_id":77122243,"comment_id":135957397,"body_markdown":"it was fixed but the miss counter didn&#39;t increment","body":"it was fixed but the miss counter didn&#39;t increment"},{"owner":{"account_id":3557625,"reputation":198996,"user_id":2970947,"display_name":"Elliott Frisch"},"score":1,"creation_date":1694962365,"post_id":77122243,"comment_id":135957495,"body_markdown":"&quot;the miss counter&quot; only exists in the scope of `ErrorHandling`. Your code could use refactoring.","body":"&quot;the miss counter&quot; only exists in the scope of <code>ErrorHandling</code>. Your code could use refactoring."}],"answers":[{"tags":[],"owner":{"account_id":3557625,"reputation":198996,"user_id":2970947,"display_name":"Elliott Frisch"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1695004756,"creation_date":1694964506,"answer_id":77122483,"question_id":77122243,"body_markdown":"I would *refactor* your code, reviewing what you have posted I would start by moving the call to `ErrorHandling` before `CharacterSearch` and I would make it return a `boolean` so I could count the `miss`(es) in one place. I would remove the methods that don&#39;t add aid clarity, and align the variable names to be consistent. I would also recommend you follow Java naming guidelines and make the method names indicate what they do. `CharacterSearch` *really* is for updating `muted`. And `ErrorHandling` checks if the `word` has the character (or has already been chosen). I would make it something like,\r\n\r\n\tpublic static void main(String[] args) {\r\n\t\tString[] words = { &quot;giraffe&quot;, &quot;hippopotamus&quot;, &quot;gorilla&quot;, &quot;peacock&quot;, \r\n\t\t\t\t&quot;armadillo&quot;, &quot;rhinoceros&quot;, &quot;alligator&quot;,\r\n\t\t\t\t&quot;tamaraw&quot;, &quot;chinchilla&quot;, &quot;salamander&quot; };\r\n\r\n\t\tScanner input = new Scanner(System.in);\r\n\t\tSystem.out.println(&quot;Welcome to Hangman&quot;);\r\n\t\tSystem.out.println(&quot;[1]START\\n[0]EXIT&quot;);\r\n\t\tSystem.out.print(&quot;Please input your choice: &quot;);\r\n\t\tint choice = input.nextInt();\r\n\t\tinput.nextLine();\r\n\t\tSystem.out.println();\r\n\t\tdo {\r\n\t\t\tint miss = 0;\r\n\t\t\tif (choice == 1) {\r\n\t\t\t\tString wordRandom = words[ThreadLocalRandom.current().nextInt(words.length)];\r\n\t\t\t\tString mute = &quot;*&quot;.repeat(wordRandom.length());\r\n\t\t\t\tSystem.out.println(wordRandom);\r\n\t\t\t\tSystem.out.println(&quot;Note: use only small character/s\\nHint: Animals&quot;);\r\n\r\n\t\t\t\twhile (!mute.equals(wordRandom)) {\r\n\t\t\t\t\tSystem.out.print(&quot;(Guess) Enter a letter in word &quot; + mute + &quot; &gt; &quot;);\r\n\t\t\t\t\tString choice1 = input.nextLine();\r\n\r\n\t\t\t\t\tif (!wordHasCharacter(wordRandom, mute, choice1)) {\r\n\t\t\t\t\t\tmiss++;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tmute = updateMuted(wordRandom, mute, choice1);\r\n\t\t\t\t}\r\n\t\t\t\tSystem.out.println(&quot;The word is &quot; + wordRandom + &quot;.&quot; + &quot; You missed &quot; + miss + &quot; time.&quot;);\r\n\t\t\t}\r\n\t\t\tSystem.out.println();\r\n\t\t\tSystem.out.println(&quot;Do you want to guess another word? Enter [1]Yes or [0]No&quot;);\r\n\t\t\tSystem.out.print(&quot;Please input your choice: &quot;);\r\n\t\t\tchoice = input.nextInt();\r\n\t\t\tinput.nextLine();\r\n\t\t\tSystem.out.println();\r\n\t\t} while (choice != 0);\r\n\t\tSystem.out.println(&quot;Thank you!!&quot;);\t\t\t}\r\n\r\n\tpublic static boolean wordHasCharacter(String word, String muted, String key) {\r\n\t\tif (word.indexOf(key.charAt(0)) &lt; 0) {\r\n\t\t\tSystem.out.println(key + &quot; is not in the word.&quot;);\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\tif (muted.indexOf(key.charAt(0)) &gt;= 0) {\r\n\t\t\tSystem.out.println(key + &quot; is already in the word.&quot;);\r\n\t\t}\r\n\t\treturn true;\r\n\t}\r\n\r\n\tpublic static String updateMuted(String word, String muted, String key) {\r\n\t\tStringBuilder update = new StringBuilder(muted);\r\n\t\tfor (int i = 0; i &lt; word.length(); i++) {\r\n\t\t\tif (word.charAt(i) == key.charAt(0)) {\r\n\t\t\t\tupdate.setCharAt(i, key.charAt(0));\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn update.toString();\r\n\t}","title":"Knowing when the letter is in the word or not","body":"<p>I would <em>refactor</em> your code, reviewing what you have posted I would start by moving the call to <code>ErrorHandling</code> before <code>CharacterSearch</code> and I would make it return a <code>boolean</code> so I could count the <code>miss</code>(es) in one place. I would remove the methods that don't add aid clarity, and align the variable names to be consistent. I would also recommend you follow Java naming guidelines and make the method names indicate what they do. <code>CharacterSearch</code> <em>really</em> is for updating <code>muted</code>. And <code>ErrorHandling</code> checks if the <code>word</code> has the character (or has already been chosen). I would make it something like,</p>\n<pre><code>public static void main(String[] args) {\n    String[] words = { &quot;giraffe&quot;, &quot;hippopotamus&quot;, &quot;gorilla&quot;, &quot;peacock&quot;, \n            &quot;armadillo&quot;, &quot;rhinoceros&quot;, &quot;alligator&quot;,\n            &quot;tamaraw&quot;, &quot;chinchilla&quot;, &quot;salamander&quot; };\n\n    Scanner input = new Scanner(System.in);\n    System.out.println(&quot;Welcome to Hangman&quot;);\n    System.out.println(&quot;[1]START\\n[0]EXIT&quot;);\n    System.out.print(&quot;Please input your choice: &quot;);\n    int choice = input.nextInt();\n    input.nextLine();\n    System.out.println();\n    do {\n        int miss = 0;\n        if (choice == 1) {\n            String wordRandom = words[ThreadLocalRandom.current().nextInt(words.length)];\n            String mute = &quot;*&quot;.repeat(wordRandom.length());\n            System.out.println(wordRandom);\n            System.out.println(&quot;Note: use only small character/s\\nHint: Animals&quot;);\n\n            while (!mute.equals(wordRandom)) {\n                System.out.print(&quot;(Guess) Enter a letter in word &quot; + mute + &quot; &gt; &quot;);\n                String choice1 = input.nextLine();\n\n                if (!wordHasCharacter(wordRandom, mute, choice1)) {\n                    miss++;\n                }\n                mute = updateMuted(wordRandom, mute, choice1);\n            }\n            System.out.println(&quot;The word is &quot; + wordRandom + &quot;.&quot; + &quot; You missed &quot; + miss + &quot; time.&quot;);\n        }\n        System.out.println();\n        System.out.println(&quot;Do you want to guess another word? Enter [1]Yes or [0]No&quot;);\n        System.out.print(&quot;Please input your choice: &quot;);\n        choice = input.nextInt();\n        input.nextLine();\n        System.out.println();\n    } while (choice != 0);\n    System.out.println(&quot;Thank you!!&quot;);          }\n\npublic static boolean wordHasCharacter(String word, String muted, String key) {\n    if (word.indexOf(key.charAt(0)) &lt; 0) {\n        System.out.println(key + &quot; is not in the word.&quot;);\n        return false;\n    }\n    if (muted.indexOf(key.charAt(0)) &gt;= 0) {\n        System.out.println(key + &quot; is already in the word.&quot;);\n    }\n    return true;\n}\n\npublic static String updateMuted(String word, String muted, String key) {\n    StringBuilder update = new StringBuilder(muted);\n    for (int i = 0; i &lt; word.length(); i++) {\n        if (word.charAt(i) == key.charAt(0)) {\n            update.setCharAt(i, key.charAt(0));\n        }\n    }\n    return update.toString();\n}\n</code></pre>\n"}],"owner":{"account_id":29463452,"reputation":15,"user_id":22577682,"display_name":"Piolo Pascual Besinga"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":44,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":77122483,"answer_count":1,"score":0,"last_activity_date":1695004756,"creation_date":1694961022,"question_id":77122243,"body_markdown":"I want to know if the letter in my hangman game is in the word or not but I kept bumping into the wrong output. Anyways here is my code, this is the same one that I posted a question.\r\n\r\n\r\n```\r\npackage besingaPi_LE_3_2;\r\n\r\nimport java.util.Scanner;\r\n\r\npublic class GameHangman {\r\n\r\n\tpublic static void main(String[] args) {\r\n\t\tScanner input = new Scanner(System.in);\r\n\t\tint miss = 0; \r\n\t\tString choice1;\r\n\t\tString temp;\r\n\t\t\r\n\t\tString[] words = {&quot;giraffe&quot;, &quot;hippopotamus&quot;, &quot;gorilla&quot;, &quot;peacock&quot;, &quot;armadillo&quot;, &quot;rhinoceros&quot;, &quot;alligator&quot;, &quot;tamaraw&quot;, &quot;chinchilla&quot;, &quot;salamander&quot;};\r\n\r\n\t\tint choice;\r\n\t\tint choice2;\r\n\t\tmainMenu();\r\n\t\tchoice = input.nextInt();\r\n\t\tinput.nextLine();\r\n\t\tSystem.out.println();\r\n\t\tdo {\r\n\t\t\tif(choice == 1){\r\n\t\t\t\t\r\n\t\t\t\tString wordRandom = Randomizer(words);\r\n\t\t\t\tString mute  = secretWord(wordRandom);\r\n\t\t\t\ttemp = mute;\r\n\r\n\t\t\t\tSystem.out.println(wordRandom);\r\n\t\t\t\tSystem.out.println(&quot;Note: use only small character/s\\nHint: Animals&quot;);\r\n\t\t\t\t\r\n\t\t\t\twhile(!mute.equals(wordRandom)) {\r\n\t\t\t\t\tSystem.out.print(&quot;(Guess) Enter a letter in word &quot; + mute + &quot; &gt; &quot;); \t\t\r\n\t\t\t\t\tchoice1 = input.nextLine();\r\n\t\t\t\t\t\r\n\t\t\t\t\tmute = CharacterSearch(wordRandom, mute, choice1);\r\n\t\t\t\t\t\r\n\t\t\t\t\tErrorHandling(temp, mute, choice1);\r\n\t\t\r\n\t\t\t\t\ttemp = mute;\r\n\t\r\n\t\t\t\t}\r\n\t\t\t\tSystem.out.println(&quot;The word is &quot; + wordRandom + &quot;.&quot; + &quot; You missed &quot; + miss + &quot; time.&quot;);\r\n\t\t\t\tSystem.out.println(&quot;\\nDo you want to guess another word? Enter [1]Yes or [0]No&quot;);\r\n\t\t\t\tSystem.out.print(&quot;Please input your choice: &quot;);\r\n\t\t\t\tchoice2 = input.nextInt();\r\n\t\t\t\tinput.nextLine();\r\n\t\t\t\tSystem.out.println();\r\n\t\t\t\tif(choice2 == 1) {\r\n\t\t\t\t\tcontinue;\r\n\t\t\t\t}\r\n\t\t\t\telse if(choice2 == 0) {\r\n\t\t\t\t\tSystem.out.println(&quot;Thank you!!&quot;);\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\t\t\telse if (choice == 0) {\r\n\t\t\t\tSystem.out.println(&quot;Thank you!!&quot;);\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t}while(choice != 0);\r\n\r\n\t}\r\n\tpublic static void mainMenu() {\r\n\t\tSystem.out.println(&quot;Welcome to Hangman&quot;);  \r\n\t\tSystem.out.println(&quot;[1]START\\n[0]EXIT&quot;); \r\n\t\tSystem.out.print(&quot;Please input your choice: &quot;);\r\n\t\treturn;\t\r\n\t}\r\n\t\r\n\tpublic static void ErrorHandling(String first, String second, String choice1) {\r\n\t\tint miss = 0;\r\n\t\tif(first.equals(second)) {\r\n\t\t\tfor(int i = 0; i &lt; second.length(); i++) {\r\n\t\t\t\tif(choice1.charAt(0) == second.charAt(i)){\r\n\t\t\t\t\tSystem.out.println( choice1 + &quot; is already in the word.&quot;);\r\n\t\t\t\t\tcontinue;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tSystem.out.println( choice1 + &quot; is not in the word.&quot;);\r\n\t\t\tmiss++;\r\n\t\t}\r\n\r\n\t\t\r\n\t}\r\n\t\r\n\tpublic static String CharacterSearch(String word, String muted, String key) {\r\n\t\tStringBuilder update = new StringBuilder(muted);\r\n\t\tint i;\r\n\t\tfor(i = 0; i &lt; word.length(); i++) {\r\n\t\t\tif(word.charAt(i)  == key.charAt(0)) {\r\n\t\t\t\tupdate.setCharAt(i,key.charAt(0));\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\tmuted = update.toString();\r\n\t\treturn muted;\r\n\t}\r\n\t\r\n\tpublic static String secretWord(String word) {\r\n\t\tString temp = &quot;&quot;;\r\n\t\tfor(int i = 0; i &lt; word.length(); i++) {\r\n\t\t\ttemp = temp + &quot;*&quot;;\r\n\t\t}\r\n\t\treturn temp;\r\n\t}\r\n\t\r\n\tpublic static String Randomizer(String[] words) {\r\n\t\tint rand = (int)(Math.random() * words.length);\r\n\t\tString word = words[rand];\r\n\t\treturn word;\r\n\t}\r\n}\r\n\r\n```\r\n\r\n\r\nIf I output twice, let&#39;s say the word is &quot;alligator&quot;, first input: a, it&#39;s okay the second input says &quot;h is already in the word.&quot; &amp; &quot;h is not in the word.&quot; how to fix this? It is in the method ErrorHandling().","title":"Knowing when the letter is in the word or not","body":"<p>I want to know if the letter in my hangman game is in the word or not but I kept bumping into the wrong output. Anyways here is my code, this is the same one that I posted a question.</p>\n<pre><code>package besingaPi_LE_3_2;\n\nimport java.util.Scanner;\n\npublic class GameHangman {\n\n    public static void main(String[] args) {\n        Scanner input = new Scanner(System.in);\n        int miss = 0; \n        String choice1;\n        String temp;\n        \n        String[] words = {&quot;giraffe&quot;, &quot;hippopotamus&quot;, &quot;gorilla&quot;, &quot;peacock&quot;, &quot;armadillo&quot;, &quot;rhinoceros&quot;, &quot;alligator&quot;, &quot;tamaraw&quot;, &quot;chinchilla&quot;, &quot;salamander&quot;};\n\n        int choice;\n        int choice2;\n        mainMenu();\n        choice = input.nextInt();\n        input.nextLine();\n        System.out.println();\n        do {\n            if(choice == 1){\n                \n                String wordRandom = Randomizer(words);\n                String mute  = secretWord(wordRandom);\n                temp = mute;\n\n                System.out.println(wordRandom);\n                System.out.println(&quot;Note: use only small character/s\\nHint: Animals&quot;);\n                \n                while(!mute.equals(wordRandom)) {\n                    System.out.print(&quot;(Guess) Enter a letter in word &quot; + mute + &quot; &gt; &quot;);         \n                    choice1 = input.nextLine();\n                    \n                    mute = CharacterSearch(wordRandom, mute, choice1);\n                    \n                    ErrorHandling(temp, mute, choice1);\n        \n                    temp = mute;\n    \n                }\n                System.out.println(&quot;The word is &quot; + wordRandom + &quot;.&quot; + &quot; You missed &quot; + miss + &quot; time.&quot;);\n                System.out.println(&quot;\\nDo you want to guess another word? Enter [1]Yes or [0]No&quot;);\n                System.out.print(&quot;Please input your choice: &quot;);\n                choice2 = input.nextInt();\n                input.nextLine();\n                System.out.println();\n                if(choice2 == 1) {\n                    continue;\n                }\n                else if(choice2 == 0) {\n                    System.out.println(&quot;Thank you!!&quot;);\n                    return;\n                }\n\n            }\n            else if (choice == 0) {\n                System.out.println(&quot;Thank you!!&quot;);\n                return;\n            }\n        }while(choice != 0);\n\n    }\n    public static void mainMenu() {\n        System.out.println(&quot;Welcome to Hangman&quot;);  \n        System.out.println(&quot;[1]START\\n[0]EXIT&quot;); \n        System.out.print(&quot;Please input your choice: &quot;);\n        return; \n    }\n    \n    public static void ErrorHandling(String first, String second, String choice1) {\n        int miss = 0;\n        if(first.equals(second)) {\n            for(int i = 0; i &lt; second.length(); i++) {\n                if(choice1.charAt(0) == second.charAt(i)){\n                    System.out.println( choice1 + &quot; is already in the word.&quot;);\n                    continue;\n                }\n            }\n            System.out.println( choice1 + &quot; is not in the word.&quot;);\n            miss++;\n        }\n\n        \n    }\n    \n    public static String CharacterSearch(String word, String muted, String key) {\n        StringBuilder update = new StringBuilder(muted);\n        int i;\n        for(i = 0; i &lt; word.length(); i++) {\n            if(word.charAt(i)  == key.charAt(0)) {\n                update.setCharAt(i,key.charAt(0));\n            }\n        }\n        \n        muted = update.toString();\n        return muted;\n    }\n    \n    public static String secretWord(String word) {\n        String temp = &quot;&quot;;\n        for(int i = 0; i &lt; word.length(); i++) {\n            temp = temp + &quot;*&quot;;\n        }\n        return temp;\n    }\n    \n    public static String Randomizer(String[] words) {\n        int rand = (int)(Math.random() * words.length);\n        String word = words[rand];\n        return word;\n    }\n}\n\n</code></pre>\n<p>If I output twice, let's say the word is &quot;alligator&quot;, first input: a, it's okay the second input says &quot;h is already in the word.&quot; &amp; &quot;h is not in the word.&quot; how to fix this? It is in the method ErrorHandling().</p>\n"},{"tags":["java","spring","rest","soap","dto"],"comments":[{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1695092533,"post_id":77122244,"comment_id":135974565,"body_markdown":"Please provide enough code so others can better understand or reproduce the problem.","body":"Please provide enough code so others can better understand or reproduce the problem."}],"answers":[{"tags":[],"owner":{"account_id":10395976,"reputation":169,"user_id":7665726,"display_name":"Sann Tran"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695004194,"creation_date":1695004194,"answer_id":77124282,"question_id":77122244,"body_markdown":"I&#39;m understanding that you have 2 DTO: RestDto for rest api and SoapDto for soap Api, and you want to convert from RestDto to SoapDto\r\n\r\nWhy not use the SoapDto for rest api? With this way, you don&#39;t have to create rest dto and don&#39;t have to map.\r\n\r\nIf you don&#39;t prefer it, you can choose some library that helps you map automatically, ex MapStruct or DozerBean mapper...","title":"Converting a DTO to a REST request in a SOAP stub","body":"<p>I'm understanding that you have 2 DTO: RestDto for rest api and SoapDto for soap Api, and you want to convert from RestDto to SoapDto</p>\n<p>Why not use the SoapDto for rest api? With this way, you don't have to create rest dto and don't have to map.</p>\n<p>If you don't prefer it, you can choose some library that helps you map automatically, ex MapStruct or DozerBean mapper...</p>\n"}],"owner":{"account_id":29466253,"reputation":1,"user_id":22579843,"display_name":"Gerardo Donnarumma"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":51,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1695004194,"creation_date":1694961031,"question_id":77122244,"body_markdown":"Realising an automatic mapping of DTO input to an API Rest a Stub XML to invoke a SOAP call in Spring Boot 2.5.\r\n\r\nIn Spring Boot, I am realising an &#39;Adapter&#39; microservice which interfaces with a REST microservice and a legacy SOAP service. From the WSDL I have generated any stubs to make the SOAP request. My microservice exposes a REST API that takes a DTO as input. I should create a mapper between the DTO it receives from the REST call in the XML stub. How could I do this? Is there a way to generate DTOs from the XML stub in order to have an automatic mapping? ","title":"Converting a DTO to a REST request in a SOAP stub","body":"<p>Realising an automatic mapping of DTO input to an API Rest a Stub XML to invoke a SOAP call in Spring Boot 2.5.</p>\n<p>In Spring Boot, I am realising an 'Adapter' microservice which interfaces with a REST microservice and a legacy SOAP service. From the WSDL I have generated any stubs to make the SOAP request. My microservice exposes a REST API that takes a DTO as input. I should create a mapper between the DTO it receives from the REST call in the XML stub. How could I do this? Is there a way to generate DTOs from the XML stub in order to have an automatic mapping?</p>\n"},{"tags":["java","kettle"],"comments":[{"owner":{"account_id":1149847,"reputation":3845,"user_id":1131789,"accept_rate":85,"display_name":"Rishu S"},"score":0,"creation_date":1694823518,"post_id":77110632,"comment_id":135946419,"body_markdown":"Which version of pentaho are you using? Also, is there a dependency between the two parallel jobs. It seems by your question, either one of the job is dependent on the other (hence working sequentially) and not in parallel. I would suggest debugging the code on step at a time.","body":"Which version of pentaho are you using? Also, is there a dependency between the two parallel jobs. It seems by your question, either one of the job is dependent on the other (hence working sequentially) and not in parallel. I would suggest debugging the code on step at a time."},{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1694962356,"post_id":77110632,"comment_id":135957494,"body_markdown":"Please provide enough code so others can better understand or reproduce the problem.","body":"Please provide enough code so others can better understand or reproduce the problem."},{"owner":{"account_id":29264857,"reputation":11,"user_id":22420861,"display_name":"bigdou"},"score":0,"creation_date":1695002185,"post_id":77110632,"comment_id":135961390,"body_markdown":"pentaho-version：8.3.0.0-371，Multiple work nodes are parallelized after a conversion node. There is no dependency between each work node, but the variables in the conversion node will be obtained. Multiple work nodes are executed to the success node and end. The process can be viewed by clicking &quot;Click to view kettle job&quot;","body":"pentaho-version：8.3.0.0-371，Multiple work nodes are parallelized after a conversion node. There is no dependency between each work node, but the variables in the conversion node will be obtained. Multiple work nodes are executed to the success node and end. The process can be viewed by clicking &quot;Click to view kettle job&quot;"},{"owner":{"account_id":6514367,"reputation":1462,"user_id":5040684,"display_name":"Ana GH"},"score":0,"creation_date":1695137059,"post_id":77110632,"comment_id":135982297,"body_markdown":"It could be that you are running out of memory when you launch so many transformations at the same time, you could monitor resources in your server/machine when you launch the job, and if not enough memory is the answer, you can either give more memory to the machine executing the transformations, or break the job in two or three so you have enough memory. I have broken a job into fewer parallel executions executing transformations serially when I have run into this problem, even if all the transformations could be executed in parallel theorically.","body":"It could be that you are running out of memory when you launch so many transformations at the same time, you could monitor resources in your server/machine when you launch the job, and if not enough memory is the answer, you can either give more memory to the machine executing the transformations, or break the job in two or three so you have enough memory. I have broken a job into fewer parallel executions executing transformations serially when I have run into this problem, even if all the transformations could be executed in parallel theorically."}],"owner":{"account_id":29264857,"reputation":11,"user_id":22420861,"display_name":"bigdou"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":55,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1695003292,"creation_date":1694764874,"question_id":77110632,"body_markdown":"pentaho-version: 8.3.0.0-371\r\n\r\nThere is a probability of a null pointer problem during the parallel execution of jobs with Kettle, leading to process exit.\r\nThis problem occurs when kettle executes the job in parallel, but there is no problem when executing the job serially.\r\n\r\nJob description：Multiple work nodes are parallelized after a conversion node. There is no dependency between each work node, but the variables in the conversion node will be obtained. Multiple work nodes are executed to the success node and end. The process can be viewed by clicking &quot;Click to view kettle job&quot;\r\n\r\n[Click to view kettle job][1]\r\n\r\n```\r\nCaused by: org.pentaho.di.core.exception.KettleException: \r\nUnexpected error occurred while launching entry [成功.0]\r\n at java.lang.Thread.run (Thread.java:748)\r\n at org.pentaho.di.job.Job$1.run (Job.java:804)\r\n at org.pentaho.di.job.Job.access$000 (Job.java:121)\r\n at org.pentaho.di.job.Job.execute (Job.java:827)\r\n at org.pentaho.di.job.Job.execute (Job.java:632)\r\n at org.pentaho.di.base.AbstractMeta.disposeEmbeddedMetastoreProvider (AbstractMeta.java:2054)\r\n at org.pentaho.di.core.vfs.KettleVFS.closeEmbeddedFileSystem (KettleVFS.java:545)\r\n at org.pentaho.di.core.vfs.ConcurrentFileSystemManager.closeEmbeddedFileSystem (ConcurrentFileSystemManager.java:192)\r\n at org.pentaho.big.data.impl.vfs.hdfs.nc.NamedClusterProvider.closeFileSystem (NamedClusterProvider.java:196)\r\n at Proxyc5a58d92_3c85_4859_80e8_ab5b48556ae0.getExplicitMetastore (null:-1)\r\n at Proxyf7ed1ece_9270_4b74_90cb_3dc57fc39287.getExplicitMetastore (null:-1)\r\n at org.pentaho.osgi.metastore.locator.api.impl.MetastoreLocatorImpl.getExplicitMetastore (MetastoreLocatorImpl.java:39)\r\n at org.pentaho.osgi.blueprint.collection.utils.ServiceMap.getItem (ServiceMap.java:35)\r\n\tat org.pentaho.di.job.Job.execute(Job.java:830)\r\n\tat org.pentaho.di.job.Job.access$000(Job.java:121)\r\n\tat org.pentaho.di.job.Job$1.run(Job.java:804)\r\n\t... 1 more\r\nCaused by: java.lang.NullPointerException\r\n\tat org.pentaho.osgi.blueprint.collection.utils.ServiceMap.getItem(ServiceMap.java:35)\r\n\tat org.pentaho.osgi.metastore.locator.api.impl.MetastoreLocatorImpl.getExplicitMetastore(MetastoreLocatorImpl.java:39)\r\n\tat Proxyf7ed1ece_9270_4b74_90cb_3dc57fc39287.getExplicitMetastore(Unknown Source)\r\n\tat Proxyc5a58d92_3c85_4859_80e8_ab5b48556ae0.getExplicitMetastore(Unknown Source)\r\n\tat org.pentaho.big.data.impl.vfs.hdfs.nc.NamedClusterProvider.closeFileSystem(NamedClusterProvider.java:196)\r\n\tat org.pentaho.di.core.vfs.ConcurrentFileSystemManager.closeEmbeddedFileSystem(ConcurrentFileSystemManager.java:192)\r\n\tat org.pentaho.di.core.vfs.KettleVFS.closeEmbeddedFileSystem(KettleVFS.java:545)\r\n\tat org.pentaho.di.base.AbstractMeta.disposeEmbeddedMetastoreProvider(AbstractMeta.java:2054)\r\n\tat org.pentaho.di.job.Job.execute(Job.java:632)\r\n\tat org.pentaho.di.job.Job.execute(Job.java:827)\r\n\t... 3 more\r\n2023/09/10 14:03:29 - Kitchen - Finished!\r\n2023/09/10 14:03:29 - Kitchen - ERROR (version 8.3.0.0-371, build 8.3.0.0-371 from 2019-06-11 11.09.08 by buildguy) : Finished with errors\r\n2023/09/10 14:03:29 - Kitchen - Start=2023/08/31 09:55:14.915, Stop=2023/09/10 14:03:29.946\r\n2023/09/10 14:03:29 - Kitchen - Processing ended after 10 days, 4 hours, 8 minutes and 15 seconds (878895 seconds total).\r\n```\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/oeN2F.png","title":"Null pointer exception occasionally occurs when kettle executes jobs concurrently","body":"<p>pentaho-version: 8.3.0.0-371</p>\n<p>There is a probability of a null pointer problem during the parallel execution of jobs with Kettle, leading to process exit.\nThis problem occurs when kettle executes the job in parallel, but there is no problem when executing the job serially.</p>\n<p>Job description：Multiple work nodes are parallelized after a conversion node. There is no dependency between each work node, but the variables in the conversion node will be obtained. Multiple work nodes are executed to the success node and end. The process can be viewed by clicking &quot;Click to view kettle job&quot;</p>\n<p><a href=\"https://i.stack.imgur.com/oeN2F.png\" rel=\"nofollow noreferrer\">Click to view kettle job</a></p>\n<pre><code>Caused by: org.pentaho.di.core.exception.KettleException: \nUnexpected error occurred while launching entry [成功.0]\n at java.lang.Thread.run (Thread.java:748)\n at org.pentaho.di.job.Job$1.run (Job.java:804)\n at org.pentaho.di.job.Job.access$000 (Job.java:121)\n at org.pentaho.di.job.Job.execute (Job.java:827)\n at org.pentaho.di.job.Job.execute (Job.java:632)\n at org.pentaho.di.base.AbstractMeta.disposeEmbeddedMetastoreProvider (AbstractMeta.java:2054)\n at org.pentaho.di.core.vfs.KettleVFS.closeEmbeddedFileSystem (KettleVFS.java:545)\n at org.pentaho.di.core.vfs.ConcurrentFileSystemManager.closeEmbeddedFileSystem (ConcurrentFileSystemManager.java:192)\n at org.pentaho.big.data.impl.vfs.hdfs.nc.NamedClusterProvider.closeFileSystem (NamedClusterProvider.java:196)\n at Proxyc5a58d92_3c85_4859_80e8_ab5b48556ae0.getExplicitMetastore (null:-1)\n at Proxyf7ed1ece_9270_4b74_90cb_3dc57fc39287.getExplicitMetastore (null:-1)\n at org.pentaho.osgi.metastore.locator.api.impl.MetastoreLocatorImpl.getExplicitMetastore (MetastoreLocatorImpl.java:39)\n at org.pentaho.osgi.blueprint.collection.utils.ServiceMap.getItem (ServiceMap.java:35)\n    at org.pentaho.di.job.Job.execute(Job.java:830)\n    at org.pentaho.di.job.Job.access$000(Job.java:121)\n    at org.pentaho.di.job.Job$1.run(Job.java:804)\n    ... 1 more\nCaused by: java.lang.NullPointerException\n    at org.pentaho.osgi.blueprint.collection.utils.ServiceMap.getItem(ServiceMap.java:35)\n    at org.pentaho.osgi.metastore.locator.api.impl.MetastoreLocatorImpl.getExplicitMetastore(MetastoreLocatorImpl.java:39)\n    at Proxyf7ed1ece_9270_4b74_90cb_3dc57fc39287.getExplicitMetastore(Unknown Source)\n    at Proxyc5a58d92_3c85_4859_80e8_ab5b48556ae0.getExplicitMetastore(Unknown Source)\n    at org.pentaho.big.data.impl.vfs.hdfs.nc.NamedClusterProvider.closeFileSystem(NamedClusterProvider.java:196)\n    at org.pentaho.di.core.vfs.ConcurrentFileSystemManager.closeEmbeddedFileSystem(ConcurrentFileSystemManager.java:192)\n    at org.pentaho.di.core.vfs.KettleVFS.closeEmbeddedFileSystem(KettleVFS.java:545)\n    at org.pentaho.di.base.AbstractMeta.disposeEmbeddedMetastoreProvider(AbstractMeta.java:2054)\n    at org.pentaho.di.job.Job.execute(Job.java:632)\n    at org.pentaho.di.job.Job.execute(Job.java:827)\n    ... 3 more\n2023/09/10 14:03:29 - Kitchen - Finished!\n2023/09/10 14:03:29 - Kitchen - ERROR (version 8.3.0.0-371, build 8.3.0.0-371 from 2019-06-11 11.09.08 by buildguy) : Finished with errors\n2023/09/10 14:03:29 - Kitchen - Start=2023/08/31 09:55:14.915, Stop=2023/09/10 14:03:29.946\n2023/09/10 14:03:29 - Kitchen - Processing ended after 10 days, 4 hours, 8 minutes and 15 seconds (878895 seconds total).\n</code></pre>\n"},{"tags":["java","spring-boot","stripe-payments","webhooks","payment"],"answers":[{"tags":[],"owner":{"account_id":29251325,"reputation":1013,"user_id":22410625,"display_name":"Lucky2501"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1694935209,"creation_date":1694933416,"answer_id":77120773,"question_id":77120578,"body_markdown":"I think the duplicate scenario you’re referring to is related to the quirk you reported here:  \r\nhttps://stackoverflow.com/questions/76894907/why-stripe-first-send-invoice-payment-failed-webhook/76934138?noredirect=1#comment135634061_76934138\r\n\r\nThe invoice.payment_failed event can trigger from a payment requiring actions, which might be completed automatically and result in a invoice.payment_succeeded instants later.\r\n\r\nThis quirk should only happen for the first invoice of a Subscription, when the customer is on session and can authenticate immediately after the requires action issue.\r\n\r\nGoing back to your db issue, what I would do is ignore the invoice.payment_failed event conditionally:  \r\n-ignore if invoice.billing_reason == subscription_create.  \r\nAfter all, if the Invoice payment fails at the start of the Subscription, I don’t see much point in storing the Subscription yet.\r\n\r\n-ignore if invoice.charge is null.  \r\nThis refers to the quirk outlined above, though it would also apply to an invoice payment that fails because the Customer has no default payment method to charge.\r\n\r\n-listen to payment_intent-level and charge-level events instead, as they don’t have the above quirk. But they won’t contain the Subscription, you’d need to retrieve and expand resources to get it.  \r\nhttps://stripe.com/docs/api/expanding_objects\r\n\r\n--EDIT--\r\nI think you might have changed this sentence of your post:  \r\n&gt;Stripe sends both webhook events *consecutively* during a single subscription payment.\r\n\r\nSo maybe it&#39;s not just the quirk above, but also cases like a customer failing a payment, then submitting it again successfully.  \r\nThe first solution (ignore invoice.payment_failed and invoice.billing_reason==subscription_create) would still work here I think.\r\n\r\nAlternatively, you can implement a queue on your handler that keeps events in the order they generate (as per their `created` timestamp), and submitting them to your db according to it&#39;s read limit.  \r\nThis is a good practice regardless, since Stripe can send the same event twice occasionally:  \r\nhttps://stripe.com/docs/webhooks#handle-duplicate-events","title":"Prevent save duplicate entry in our local database during stripe webhook","body":"<p>I think the duplicate scenario you’re referring to is related to the quirk you reported here:<br />\n<a href=\"https://stackoverflow.com/questions/76894907/why-stripe-first-send-invoice-payment-failed-webhook/76934138?noredirect=1#comment135634061_76934138\">Why stripe first send invoice.payment_failed webhook</a></p>\n<p>The invoice.payment_failed event can trigger from a payment requiring actions, which might be completed automatically and result in a invoice.payment_succeeded instants later.</p>\n<p>This quirk should only happen for the first invoice of a Subscription, when the customer is on session and can authenticate immediately after the requires action issue.</p>\n<p>Going back to your db issue, what I would do is ignore the invoice.payment_failed event conditionally:<br />\n-ignore if invoice.billing_reason == subscription_create.<br />\nAfter all, if the Invoice payment fails at the start of the Subscription, I don’t see much point in storing the Subscription yet.</p>\n<p>-ignore if invoice.charge is null.<br />\nThis refers to the quirk outlined above, though it would also apply to an invoice payment that fails because the Customer has no default payment method to charge.</p>\n<p>-listen to payment_intent-level and charge-level events instead, as they don’t have the above quirk. But they won’t contain the Subscription, you’d need to retrieve and expand resources to get it.<br />\n<a href=\"https://stripe.com/docs/api/expanding_objects\" rel=\"nofollow noreferrer\">https://stripe.com/docs/api/expanding_objects</a></p>\n<p>--EDIT--\nI think you might have changed this sentence of your post:</p>\n<blockquote>\n<p>Stripe sends both webhook events <em>consecutively</em> during a single subscription payment.</p>\n</blockquote>\n<p>So maybe it's not just the quirk above, but also cases like a customer failing a payment, then submitting it again successfully.<br />\nThe first solution (ignore invoice.payment_failed and invoice.billing_reason==subscription_create) would still work here I think.</p>\n<p>Alternatively, you can implement a queue on your handler that keeps events in the order they generate (as per their <code>created</code> timestamp), and submitting them to your db according to it's read limit.<br />\nThis is a good practice regardless, since Stripe can send the same event twice occasionally:<br />\n<a href=\"https://stripe.com/docs/webhooks#handle-duplicate-events\" rel=\"nofollow noreferrer\">https://stripe.com/docs/webhooks#handle-duplicate-events</a></p>\n"},{"tags":[],"owner":{"account_id":132746,"reputation":1266,"user_id":333638,"display_name":"qichuan"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695002607,"creation_date":1695002607,"answer_id":77124230,"question_id":77120578,"body_markdown":"When a subscription payment fails, Stripe will perform smart retries to recover it. Therefore, it&#39;s totally possible to receive a `invoice.paid` followed by a `invoice.payment_failed` when the card finally has sufficient funds to pay the invoice when retried.\r\n\r\nPlease also note that the subscription status will only change when all retries failed, and the status that the subscription will transition to is determined by your [settings][1]. I don&#39;t have the details of your backend logic, but I&#39;d like to suggest reconsidering updating your internal subscription status based on `invoice.payment_failed` because this can be ephemeral. If you want to mirror the Stripe subscription status and update your DB when a Stripe subscription status changes, you can subscribe to `customer.subscription.updated`.\r\n\r\n\r\n  [1]: https://stripe.com/docs/billing/subscriptions/overview#settings","title":"Prevent save duplicate entry in our local database during stripe webhook","body":"<p>When a subscription payment fails, Stripe will perform smart retries to recover it. Therefore, it's totally possible to receive a <code>invoice.paid</code> followed by a <code>invoice.payment_failed</code> when the card finally has sufficient funds to pay the invoice when retried.</p>\n<p>Please also note that the subscription status will only change when all retries failed, and the status that the subscription will transition to is determined by your <a href=\"https://stripe.com/docs/billing/subscriptions/overview#settings\" rel=\"nofollow noreferrer\">settings</a>. I don't have the details of your backend logic, but I'd like to suggest reconsidering updating your internal subscription status based on <code>invoice.payment_failed</code> because this can be ephemeral. If you want to mirror the Stripe subscription status and update your DB when a Stripe subscription status changes, you can subscribe to <code>customer.subscription.updated</code>.</p>\n"}],"owner":{"account_id":29218316,"reputation":13,"user_id":22384611,"display_name":"JAY"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":135,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":2,"score":-1,"last_activity_date":1695002607,"creation_date":1694928142,"question_id":77120578,"body_markdown":"In my Spring Boot application, I&#39;m listening to webhook events from Stripe, specifically &quot;invoice.payment_failed&quot; and &quot;invoice.payment_succeeded.&quot; I&#39;ve implemented the following logic to manage subscription details in my local database:\r\n\r\nFor &quot;invoice.payment_failed&quot; events, I retrieve the subscription details from Stripe, check if it exists in my local database, and if it does, I update it with the latest Stripe subscription details. If not, I save the subscription in my local database.\r\n\r\nSimilarly, for &quot;invoice.payment_succeeded&quot; events, I follow the same logic of checking and updating or saving subscriptions in my local database.\r\n\r\nThe challenge arises when Stripe sends both webhook events consecutively during a single subscription payment. Each event is considered a new request, and Spring Boot handles them in a request pool. Occasionally, both requests execute simultaneously, and if the subscription is not found in my database, it can lead to duplicate entries.\r\n\r\nSo how to solve that problem. Pls guide me \r\n\r\nTry to guide and solve that type of scenarios during stripe webhook.\r\n\r\nFor that type of scenarios I have one approach\r\n\r\n1) lock database row\r\n\r\nBut that is not best practices for big level so provide some best practices to resolving that type of scenarios.\r\n\r\n\r\n\r\nHow to solving that type of scenarios Pls guide me","title":"Prevent save duplicate entry in our local database during stripe webhook","body":"<p>In my Spring Boot application, I'm listening to webhook events from Stripe, specifically &quot;invoice.payment_failed&quot; and &quot;invoice.payment_succeeded.&quot; I've implemented the following logic to manage subscription details in my local database:</p>\n<p>For &quot;invoice.payment_failed&quot; events, I retrieve the subscription details from Stripe, check if it exists in my local database, and if it does, I update it with the latest Stripe subscription details. If not, I save the subscription in my local database.</p>\n<p>Similarly, for &quot;invoice.payment_succeeded&quot; events, I follow the same logic of checking and updating or saving subscriptions in my local database.</p>\n<p>The challenge arises when Stripe sends both webhook events consecutively during a single subscription payment. Each event is considered a new request, and Spring Boot handles them in a request pool. Occasionally, both requests execute simultaneously, and if the subscription is not found in my database, it can lead to duplicate entries.</p>\n<p>So how to solve that problem. Pls guide me</p>\n<p>Try to guide and solve that type of scenarios during stripe webhook.</p>\n<p>For that type of scenarios I have one approach</p>\n<ol>\n<li>lock database row</li>\n</ol>\n<p>But that is not best practices for big level so provide some best practices to resolving that type of scenarios.</p>\n<p>How to solving that type of scenarios Pls guide me</p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":15047867,"reputation":2292,"user_id":10860403,"display_name":"ewokx"},"score":4,"creation_date":1694995515,"post_id":77124003,"comment_id":135960916,"body_markdown":"Where exactly was this ```case String...``` part?  You mean the ```case character c``` part, right?  What is the compiler error?","body":"Where exactly was this <code>case String...</code> part?  You mean the <code>case character c</code> part, right?  What is the compiler error?"},{"owner":{"account_id":247613,"reputation":284089,"user_id":522444,"accept_rate":100,"display_name":"Hovercraft Full Of Eels"},"score":6,"creation_date":1694995597,"post_id":77124003,"comment_id":135960919,"body_markdown":"Always post the full error message with your question. Always.","body":"Always post the full error message with your question. Always."},{"owner":{"account_id":6520,"reputation":10523,"user_id":11002,"accept_rate":75,"display_name":"tgdavies"},"score":0,"creation_date":1694997085,"post_id":77124003,"comment_id":135960995,"body_markdown":"Falling through from one case to the next doesn&#39;t make sense once patters are used -- what would the value of `i` be? Why do you want to execute the `Integer` case every time the `Character` case matches?","body":"Falling through from one case to the next doesn&#39;t make sense once patters are used -- what would the value of <code>i</code> be? Why do you want to execute the <code>Integer</code> case every time the <code>Character</code> case matches?"},{"owner":{"account_id":322981,"reputation":310745,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"score":1,"creation_date":1694998927,"post_id":77124003,"comment_id":135961111,"body_markdown":"To avoid more down-votes, edit your Question to include exact error message.","body":"To avoid more down-votes, edit your Question to include exact error message."}],"answers":[{"tags":[],"owner":{"account_id":322981,"reputation":310745,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695001655,"creation_date":1694997746,"answer_id":77124074,"question_id":77124003,"body_markdown":"## tl;dr\r\n\r\nIn Java 21 and later:\r\n\r\n```java\r\n    switch ( obj )\r\n    {\r\n        case Character c -&gt; System.out.println ( &quot;Is Character: &quot; + c );\r\n        case Integer i -&gt; System.out.println ( &quot;Is Integer: &quot; + i );\r\n        default -&gt; System.out.println ( &quot;Some other class: &quot; + obj.getClass ( ).getCanonicalName ( ) );\r\n    }\r\n```\r\n\r\nIn earlier Java, add `break` statements.\r\n\r\n\r\n## `break` halts fall-through\r\n\r\nI am guessing the error you mention (but neglected to document) was &quot;Illegal fall-through to a pattern&quot;. Your `switch` is trying to continue on through all the cases. But given the different class types of each case, that makes no sense. Hence that error (or so I am guessing).\r\n\r\nThe immediate fix is to add `break;` statements to stop the case-fall-through.\r\n\r\n```java\r\nstatic void test ( Object obj )\r\n{\r\n    switch ( obj )\r\n    {\r\n        case Character c:\r\n            if ( c.charValue ( ) == 7 )\r\n            {\r\n                System.out.print ( &quot;Ding &quot; );\r\n            }\r\n            if ( c.charValue ( ) == 9 )\r\n            {\r\n                System.out.print ( &quot;Tab &quot; );\r\n            }\r\n            System.out.println ( &quot;character&quot; );\r\n            break;  // &lt;----------\r\n        case Integer i:  \r\n            System.out.println ( &quot;An integer &quot; + i );\r\n            break;  // &lt;----------\r\n        default:\r\n            System.out.println ( &quot;Neither character nor integer&quot; );\r\n    }\r\n}\r\n```\r\n\r\nTry it.\r\n\r\n```java\r\nApp.test ( &#39;x&#39; );\r\nApp.test ( 42 );\r\nApp.test ( &quot;whatever&quot; );\r\n```\r\n\r\nResults:\r\n\r\n```none\r\ncharacter\r\nAn integer 42\r\nNeither character nor integer\r\n```\r\n\r\n## Simplify your code\r\n\r\nYour IDE might suggest some improvements to your code.\r\n\r\nOne is replacing the unnecessary explicit unboxing of `.charValue`. Java will do that for you, auto-boxing.\r\n\r\n```java\r\n        if ( c == 7 )\r\n        {\r\n            System.out.print ( &quot;Ding &quot; );\r\n        }\r\n        if ( c == 9 )\r\n        {\r\n            System.out.print ( &quot;Tab &quot; );\r\n        }\r\n```\r\n\r\nAnd really, this code does not help your demonstration. So let&#39;s stick to simple `println`.\r\n\r\n```java\r\nstatic void test ( Object obj )\r\n{\r\n    switch ( obj )\r\n    {\r\n        case Character c:\r\n            System.out.println ( &quot;Is Character: &quot; + c );\r\n            break;\r\n        case Integer i:         \r\n            System.out.println ( &quot;Is Integer: &quot; + i );\r\n            break;\r\n        default:\r\n            System.out.println ( &quot;Some other class: &quot; + obj.getClass ( ).getCanonicalName ( ) );\r\n    }\r\n}\r\n```\r\n\r\nWhen run:\r\n\r\n```none\r\nIs Character: x\r\nIs Integer: 42\r\nSome other class: java.lang.String\r\n```\r\n\r\n## Java 21: Pattern Matching for `switch`\r\n\r\nJava 21 brings more pattern matching. See [*JEP 441: Pattern Matching for switch*](https://openjdk.org/jeps/441). \r\n\r\nWe can use the arrow operator `-&gt;` to execute code for that case. This syntax eliminates case-fall-through, so no `break` needed.\r\n\r\n\r\n```java\r\nstatic void test ( Object obj )\r\n{\r\n    switch ( obj )\r\n    {\r\n        case Character c -&gt; System.out.println ( &quot;Is Character: &quot; + c );\r\n        case Integer i -&gt; System.out.println ( &quot;Is Integer: &quot; + i );\r\n        default -&gt; System.out.println ( &quot;Some other class: &quot; + obj.getClass ( ).getCanonicalName ( ) );\r\n    }\r\n}\r\n```\r\n\r\nSimpler code, same results.\r\n\r\n```none\r\nIs Character: x\r\nIs Integer: 42\r\nSome other class: java.lang.String\r\n```\r\n\r\nFor more info on pattern matching, see some good talks on YouTube etc., and read the Java JEPs. \r\n\r\n----------\r\n\r\nBy the way… avoid using `char`/`Character`. That type has been essentially broken since Java 2, and legacy since Java 5. As a 16-bit value, `char` is physically incapable of representing most characters. Instead, make a habit of using Unicode [code point][1] integer numbers to work with individual characters. \r\n\r\n\r\n  [1]: https://en.wikipedia.org/wiki/Code_point","title":"Why do this code have a compile error in switch","body":"<h2>tl;dr</h2>\n<p>In Java 21 and later:</p>\n<pre class=\"lang-java prettyprint-override\"><code>    switch ( obj )\n    {\n        case Character c -&gt; System.out.println ( &quot;Is Character: &quot; + c );\n        case Integer i -&gt; System.out.println ( &quot;Is Integer: &quot; + i );\n        default -&gt; System.out.println ( &quot;Some other class: &quot; + obj.getClass ( ).getCanonicalName ( ) );\n    }\n</code></pre>\n<p>In earlier Java, add <code>break</code> statements.</p>\n<h2><code>break</code> halts fall-through</h2>\n<p>I am guessing the error you mention (but neglected to document) was &quot;Illegal fall-through to a pattern&quot;. Your <code>switch</code> is trying to continue on through all the cases. But given the different class types of each case, that makes no sense. Hence that error (or so I am guessing).</p>\n<p>The immediate fix is to add <code>break;</code> statements to stop the case-fall-through.</p>\n<pre class=\"lang-java prettyprint-override\"><code>static void test ( Object obj )\n{\n    switch ( obj )\n    {\n        case Character c:\n            if ( c.charValue ( ) == 7 )\n            {\n                System.out.print ( &quot;Ding &quot; );\n            }\n            if ( c.charValue ( ) == 9 )\n            {\n                System.out.print ( &quot;Tab &quot; );\n            }\n            System.out.println ( &quot;character&quot; );\n            break;  // &lt;----------\n        case Integer i:  \n            System.out.println ( &quot;An integer &quot; + i );\n            break;  // &lt;----------\n        default:\n            System.out.println ( &quot;Neither character nor integer&quot; );\n    }\n}\n</code></pre>\n<p>Try it.</p>\n<pre class=\"lang-java prettyprint-override\"><code>App.test ( 'x' );\nApp.test ( 42 );\nApp.test ( &quot;whatever&quot; );\n</code></pre>\n<p>Results:</p>\n<pre class=\"lang-none prettyprint-override\"><code>character\nAn integer 42\nNeither character nor integer\n</code></pre>\n<h2>Simplify your code</h2>\n<p>Your IDE might suggest some improvements to your code.</p>\n<p>One is replacing the unnecessary explicit unboxing of <code>.charValue</code>. Java will do that for you, auto-boxing.</p>\n<pre class=\"lang-java prettyprint-override\"><code>        if ( c == 7 )\n        {\n            System.out.print ( &quot;Ding &quot; );\n        }\n        if ( c == 9 )\n        {\n            System.out.print ( &quot;Tab &quot; );\n        }\n</code></pre>\n<p>And really, this code does not help your demonstration. So let's stick to simple <code>println</code>.</p>\n<pre class=\"lang-java prettyprint-override\"><code>static void test ( Object obj )\n{\n    switch ( obj )\n    {\n        case Character c:\n            System.out.println ( &quot;Is Character: &quot; + c );\n            break;\n        case Integer i:         \n            System.out.println ( &quot;Is Integer: &quot; + i );\n            break;\n        default:\n            System.out.println ( &quot;Some other class: &quot; + obj.getClass ( ).getCanonicalName ( ) );\n    }\n}\n</code></pre>\n<p>When run:</p>\n<pre class=\"lang-none prettyprint-override\"><code>Is Character: x\nIs Integer: 42\nSome other class: java.lang.String\n</code></pre>\n<h2>Java 21: Pattern Matching for <code>switch</code></h2>\n<p>Java 21 brings more pattern matching. See <a href=\"https://openjdk.org/jeps/441\" rel=\"nofollow noreferrer\"><em>JEP 441: Pattern Matching for switch</em></a>.</p>\n<p>We can use the arrow operator <code>-&gt;</code> to execute code for that case. This syntax eliminates case-fall-through, so no <code>break</code> needed.</p>\n<pre class=\"lang-java prettyprint-override\"><code>static void test ( Object obj )\n{\n    switch ( obj )\n    {\n        case Character c -&gt; System.out.println ( &quot;Is Character: &quot; + c );\n        case Integer i -&gt; System.out.println ( &quot;Is Integer: &quot; + i );\n        default -&gt; System.out.println ( &quot;Some other class: &quot; + obj.getClass ( ).getCanonicalName ( ) );\n    }\n}\n</code></pre>\n<p>Simpler code, same results.</p>\n<pre class=\"lang-none prettyprint-override\"><code>Is Character: x\nIs Integer: 42\nSome other class: java.lang.String\n</code></pre>\n<p>For more info on pattern matching, see some good talks on YouTube etc., and read the Java JEPs.</p>\n<hr />\n<p>By the way… avoid using <code>char</code>/<code>Character</code>. That type has been essentially broken since Java 2, and legacy since Java 5. As a 16-bit value, <code>char</code> is physically incapable of representing most characters. Instead, make a habit of using Unicode <a href=\"https://en.wikipedia.org/wiki/Code_point\" rel=\"nofollow noreferrer\">code point</a> integer numbers to work with individual characters.</p>\n"}],"owner":{"account_id":23190679,"reputation":5,"user_id":17287096,"display_name":"kk k"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":69,"favorite_count":0,"down_vote_count":3,"up_vote_count":0,"answer_count":1,"score":-3,"last_activity_date":1695001655,"creation_date":1694995328,"question_id":77124003,"body_markdown":"I don&#39;t understand. that why have a error.\r\nI want to know why this code have a error.\r\n```\r\nstatic void test(Object obj) {\r\n        switch (obj) {\r\n            case Character c:\r\n                if (c.charValue() == 7) {\r\n                    System.out.print(&quot;Ding &quot;);\r\n                }\r\n                if (c.charValue() == 9) {\r\n                    System.out.print(&quot;Tab &quot;);\r\n                }\r\n                System.out.println(&quot;character&quot;);\r\n            case Integer i:                 // Compile-time error\r\n                System.out.println(&quot;An integer &quot; + i);\r\n            default:\r\n                System.out.println(&quot;Neither character nor integer&quot;);\r\n        }\r\n    }\r\n```\r\n\r\nif I remove &quot;case String..&quot;. it does not have a error\r\n```\r\nstatic void test(Object obj) {\r\n        switch (obj) {\r\n            case Integer i:                 // Compile-time error\r\n                System.out.println(&quot;An integer &quot; + i);\r\n            default:\r\n                System.out.println(&quot;Neither character nor integer&quot;);\r\n        }\r\n    }\r\n```","title":"Why do this code have a compile error in switch","body":"<p>I don't understand. that why have a error.\nI want to know why this code have a error.</p>\n<pre><code>static void test(Object obj) {\n        switch (obj) {\n            case Character c:\n                if (c.charValue() == 7) {\n                    System.out.print(&quot;Ding &quot;);\n                }\n                if (c.charValue() == 9) {\n                    System.out.print(&quot;Tab &quot;);\n                }\n                System.out.println(&quot;character&quot;);\n            case Integer i:                 // Compile-time error\n                System.out.println(&quot;An integer &quot; + i);\n            default:\n                System.out.println(&quot;Neither character nor integer&quot;);\n        }\n    }\n</code></pre>\n<p>if I remove &quot;case String..&quot;. it does not have a error</p>\n<pre><code>static void test(Object obj) {\n        switch (obj) {\n            case Integer i:                 // Compile-time error\n                System.out.println(&quot;An integer &quot; + i);\n            default:\n                System.out.println(&quot;Neither character nor integer&quot;);\n        }\n    }\n</code></pre>\n"},{"tags":["java","ejb","weblogic"],"comments":[{"owner":{"account_id":2392858,"reputation":6207,"user_id":2092358,"display_name":"Display Name is missing"},"score":1,"creation_date":1398802896,"post_id":23357350,"comment_id":35805266,"body_markdown":"Are you using autodeploy like that link mentioned? If you&#39;re not - you need to open the weblogic admin console and removed your old deployment. See some info here: http://stackoverflow.com/questions/22049332/weblogic-new-deployment-reverting-to-old-code/22052585#22052585","body":"Are you using autodeploy like that link mentioned? If you&#39;re not - you need to open the weblogic admin console and removed your old deployment. See some info here: <a href=\"http://stackoverflow.com/questions/22049332/weblogic-new-deployment-reverting-to-old-code/22052585#22052585\" title=\"weblogic new deployment reverting to old code\">stackoverflow.com/questions/22049332/&hellip;</a>"},{"owner":{"account_id":4230332,"reputation":161,"user_id":3462765,"accept_rate":21,"display_name":"Developer"},"score":0,"creation_date":1398828072,"post_id":23357350,"comment_id":35813671,"body_markdown":"Yes I deleted all the previous Deployments and \nnow it&#39;s running fine; but I guess its not a solution because what if I want to run two programs concurrently.","body":"Yes I deleted all the previous Deployments and  now it&#39;s running fine; but I guess its not a solution because what if I want to run two programs concurrently."},{"owner":{"account_id":2392858,"reputation":6207,"user_id":2092358,"display_name":"Display Name is missing"},"score":1,"creation_date":1398872681,"post_id":23357350,"comment_id":35837914,"body_markdown":"You can&#39;t have them with the exact same name OR you can create 2 managed servers and run one program on each. There are many options there but naming them differently is probably the easiest","body":"You can&#39;t have them with the exact same name OR you can create 2 managed servers and run one program on each. There are many options there but naming them differently is probably the easiest"},{"owner":{"account_id":4230332,"reputation":161,"user_id":3462765,"accept_rate":21,"display_name":"Developer"},"score":0,"creation_date":1399001809,"post_id":23357350,"comment_id":35890528,"body_markdown":"Yes obviously sir; \nbut actually I did not give the same name to two or more programs; and that is why  I don&#39;t know what went wrong and the exception...;\nMay be I made some mistake..\nThank u so much JAZAKALLAH Khair! \nResponse was very helpful!","body":"Yes obviously sir;  but actually I did not give the same name to two or more programs; and that is why  I don&#39;t know what went wrong and the exception...; May be I made some mistake.. Thank u so much JAZAKALLAH Khair!  Response was very helpful!"}],"answers":[{"tags":[],"owner":{"account_id":2464549,"reputation":33,"user_id":2147947,"accept_rate":25,"display_name":"Gaurav"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1692388813,"creation_date":1416926265,"answer_id":27129488,"question_id":23357350,"body_markdown":"`ModuleException` come due to improper Build.\r\nGo through step by step.\r\n\r\n - Update project\r\n - Restart your eclipse\r\n - Remove project from server\r\n - clean server and redeploy your project\r\n\r\n\r\nNow publish it, I hope now it will work.\r\n \r\n\r\n   ","title":"How to resolve exception &quot;weblogic.application.ModuleException: Context path &#39;&#39; is already in use by the module: / application&quot;?","body":"<p><code>ModuleException</code> come due to improper Build.\nGo through step by step.</p>\n<ul>\n<li>Update project</li>\n<li>Restart your eclipse</li>\n<li>Remove project from server</li>\n<li>clean server and redeploy your project</li>\n</ul>\n<p>Now publish it, I hope now it will work.</p>\n"},{"tags":[],"owner":{"account_id":57405,"reputation":3587,"user_id":171956,"accept_rate":19,"display_name":"99Sono"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1454000072,"creation_date":1453999098,"answer_id":35067006,"question_id":23357350,"body_markdown":"Yup. Try to deploy from Netbeans.\r\n\r\nThe Weblogic eclipse plugin is, in my experience, the worst deployment plugin I&#39;ve ever seen. If you are using a patched weblogic - such as 12.1.2 with Patch Set Update 6 - your deployment from eclipse might miraculously not work with such an error.\r\n\r\nIf you are able to deploy the WAR file without IDE by going to the deploy view, I recommend that you try using Netbeans to deploy and see how it goes.\r\n\r\nNotice as well that the outcome of trying to deploy from eclipse as exploded war or as virtual application is not the same. Typically both do not work with different exceptions, depending on the patches you are using.\r\n\r\nIn my case, I have two local installations of weblogic 12.1.2. One with the patch set update and another one without. From eclipse, It is only possible to deploy to the one without. From Netbeans, deployment works regardless of the instance.\r\n","title":"How to resolve exception &quot;weblogic.application.ModuleException: Context path &#39;&#39; is already in use by the module: / application&quot;?","body":"<p>Yup. Try to deploy from Netbeans.</p>\n\n<p>The Weblogic eclipse plugin is, in my experience, the worst deployment plugin I've ever seen. If you are using a patched weblogic - such as 12.1.2 with Patch Set Update 6 - your deployment from eclipse might miraculously not work with such an error.</p>\n\n<p>If you are able to deploy the WAR file without IDE by going to the deploy view, I recommend that you try using Netbeans to deploy and see how it goes.</p>\n\n<p>Notice as well that the outcome of trying to deploy from eclipse as exploded war or as virtual application is not the same. Typically both do not work with different exceptions, depending on the patches you are using.</p>\n\n<p>In my case, I have two local installations of weblogic 12.1.2. One with the patch set update and another one without. From eclipse, It is only possible to deploy to the one without. From Netbeans, deployment works regardless of the instance.</p>\n"}],"owner":{"account_id":4230332,"reputation":161,"user_id":3462765,"accept_rate":21,"display_name":"Developer"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":18934,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":2,"score":1,"last_activity_date":1694998855,"creation_date":1398753803,"question_id":23357350,"body_markdown":" I have gone through the Question:\r\n[https://stackoverflow.com/questions/16033609/weblogic-application-moduleexception-context-path-is-already-in-use-by-the-m][1]\r\nand followed as answer of the question says; but still getting the same exception:   \r\n\r\n    **&gt; Deployment failed. The message was:  \r\n&gt; weblogic.application.ModuleException: Context path\r\n&gt; &#39;/socketss-war&#39; is already in use by the module:\r\n&gt; /Socketss-war application: Socketss\r\n&gt; D:\\NetBeansProjects\\Socketss\\Socketss-war\\nbproject\\build-impl.xml:1056:\r\n&gt; The module has not been deployed. See the server log for details.**\r\n\r\nAny guidance or suggestion would be highly appreciable.&lt;br&gt;\r\nThank you!","title":"How to resolve exception &quot;weblogic.application.ModuleException: Context path &#39;&#39; is already in use by the module: / application&quot;?","body":"<p>I have gone through the Question:\n[<a href=\"https://stackoverflow.com/questions/16033609/weblogic-application-moduleexception-context-path-is-already-in-use-by-the-m][1]\">weblogic.application.ModuleException: Context path &#39;&#39; is already in use by the module: / application:</a>\nand followed as answer of the question says; but still getting the same exception:   </p>\n\n<pre><code>**&gt; Deployment failed. The message was:  \n</code></pre>\n\n<blockquote>\n  <p>weblogic.application.ModuleException: Context path\n  '/socketss-war' is already in use by the module:\n  /Socketss-war application: Socketss\n  D:\\NetBeansProjects\\Socketss\\Socketss-war\\nbproject\\build-impl.xml:1056:\n  The module has not been deployed. See the server log for details.**</p>\n</blockquote>\n\n<p>Any guidance or suggestion would be highly appreciable.<br>\nThank you!</p>\n"},{"tags":["java","eclipse","exception","java-3d","unsatisfiedlinkerror"],"comments":[{"owner":{"account_id":2197867,"reputation":4633,"user_id":1943093,"accept_rate":54,"display_name":"imrichardcole"},"score":0,"creation_date":1359925733,"post_id":14677079,"comment_id":20518485,"body_markdown":"Looks like a duplicate [post][1], came up as top result in google\r\n\r\n\r\n  [1]: http://stackoverflow.com/questions/4098161/problems-with-java3d-lib-configuration","body":"Looks like a duplicate [post][1], came up as top result in google        [1]: <a href=\"http://stackoverflow.com/questions/4098161/problems-with-java3d-lib-configuration\" title=\"problems with java3d lib configuration\">stackoverflow.com/questions/4098161/&hellip;</a>"},{"owner":{"account_id":1790270,"reputation":65,"user_id":1630850,"display_name":"user1630850"},"score":0,"creation_date":1359928159,"post_id":14677079,"comment_id":20519149,"body_markdown":"that one isnt mine but thank you, i actually did see this before","body":"that one isnt mine but thank you, i actually did see this before"},{"owner":{"account_id":207965,"reputation":3704,"user_id":458157,"accept_rate":75,"display_name":"gouessej"},"score":0,"creation_date":1438884038,"post_id":14677079,"comment_id":51644597,"body_markdown":"Java3D 1.5.2 is obsolete, rather use Java3D 1.6.0. See my comment below.","body":"Java3D 1.5.2 is obsolete, rather use Java3D 1.6.0. See my comment below."}],"answers":[{"tags":[],"owner":{"account_id":18159848,"reputation":1,"user_id":13211375,"display_name":"Raphael"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1585919386,"creation_date":1585919386,"answer_id":61012653,"question_id":14677079,"body_markdown":"If I set \r\n    export LD_LIBRARY_PATH=$LD_LIBRARY_PATH:/usr/lib/jni \r\nit works.","title":"UnsatisfiedLinkError: no j3dcore-ogl in java.library.path","body":"<p>If I set \n    export LD_LIBRARY_PATH=$LD_LIBRARY_PATH:/usr/lib/jni \nit works.</p>\n"}],"owner":{"account_id":1790270,"reputation":65,"user_id":1630850,"display_name":"user1630850"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":13074,"favorite_count":0,"down_vote_count":0,"up_vote_count":5,"answer_count":1,"score":5,"last_activity_date":1694998855,"creation_date":1359924165,"question_id":14677079,"body_markdown":"I have a project in eclipse, runs perfectly fine in the ide when I click run, but I need to export it into a runnable jar file which also works fine. But when I try to run it it throws an exception:\r\n\r\n\tException in thread &quot;main&quot; java.lang.UnsatisfiedLinkError: no j3dcore-ogl in java.library.path\r\n\t\tat java.lang.ClassLoader.loadLibrary(ClassLoader.java:1856)\r\n\t\tat java.lang.Runtime.loadLibrary0(Runtime.java:845)\r\n\t\tat java.lang.System.loadLibrary(System.java:1084)\r\n\t\tat javax.media.j3d.NativePipeline$1.run(NativePipeline.java:231)\r\n\t\tat java.security.AccessController.doPrivileged(Native Method)\r\n\t\tat javax.media.j3d.NativePipeline.loadLibrary(NativePipeline.java:200)\r\n\t\tat javax.media.j3d.NativePipeline.loadLibraries(NativePipeline.java:157)\r\n\t\tat javax.media.j3d.MasterControl.loadLibraries(MasterControl.java:987)\r\n\t\tat javax.media.j3d.VirtualUniverse.&lt;clinit&gt;(VirtualUniverse.java:299)\r\n\t\tat javax.media.j3d.GraphicsConfigTemplate3D.getBestConfiguration(GraphicsConfigTemplate3D.java:321)\r\n\t\tat java.awt.GraphicsDevice.getBestConfiguration(GraphicsDevice.java:207)\r\n\t\tat com.sun.j3d.exp.swing.JCanvas3D.&lt;init&gt;(JCanvas3D.java:228)\r\n\t\tat com.sun.j3d.exp.swing.JCanvas3D.&lt;init&gt;(JCanvas3D.java:178)\r\n\t\tat mainproject.MainPanel.&lt;init&gt;(MainPanel.java:72)\r\n\t\tat mainproject.MainWindow.&lt;init&gt;(MainWindow.java:42)\r\n\t\tat mainproject.MainWindow.main(MainWindow.java:23)\r\n\r\nI have been googling it for 2 days now, tons of results, none helpful.\r\nI export it by going to `file-&gt;export-&gt;java-&gt;Runnable jar file-&gt;i bubble extract required libraries into generated jar`, choose the correct configuration, save the file in a specified folder, then it saves just fine. Or at least so I think. The `java.library.path` goes to the `jre lib folder`, but when i run it in eclipse it goes to the .so for j3d, i tried changing it using `System.setProperty` but to no success. I have a feeling that is the problem, but when I tried to fix it nothing happened. I&#39;m using the most up to date `java3d library (1.5.2 I believe)`. \r\n\r\nAny suggestions?","title":"UnsatisfiedLinkError: no j3dcore-ogl in java.library.path","body":"<p>I have a project in eclipse, runs perfectly fine in the ide when I click run, but I need to export it into a runnable jar file which also works fine. But when I try to run it it throws an exception:</p>\n\n<pre><code>Exception in thread \"main\" java.lang.UnsatisfiedLinkError: no j3dcore-ogl in java.library.path\n    at java.lang.ClassLoader.loadLibrary(ClassLoader.java:1856)\n    at java.lang.Runtime.loadLibrary0(Runtime.java:845)\n    at java.lang.System.loadLibrary(System.java:1084)\n    at javax.media.j3d.NativePipeline$1.run(NativePipeline.java:231)\n    at java.security.AccessController.doPrivileged(Native Method)\n    at javax.media.j3d.NativePipeline.loadLibrary(NativePipeline.java:200)\n    at javax.media.j3d.NativePipeline.loadLibraries(NativePipeline.java:157)\n    at javax.media.j3d.MasterControl.loadLibraries(MasterControl.java:987)\n    at javax.media.j3d.VirtualUniverse.&lt;clinit&gt;(VirtualUniverse.java:299)\n    at javax.media.j3d.GraphicsConfigTemplate3D.getBestConfiguration(GraphicsConfigTemplate3D.java:321)\n    at java.awt.GraphicsDevice.getBestConfiguration(GraphicsDevice.java:207)\n    at com.sun.j3d.exp.swing.JCanvas3D.&lt;init&gt;(JCanvas3D.java:228)\n    at com.sun.j3d.exp.swing.JCanvas3D.&lt;init&gt;(JCanvas3D.java:178)\n    at mainproject.MainPanel.&lt;init&gt;(MainPanel.java:72)\n    at mainproject.MainWindow.&lt;init&gt;(MainWindow.java:42)\n    at mainproject.MainWindow.main(MainWindow.java:23)\n</code></pre>\n\n<p>I have been googling it for 2 days now, tons of results, none helpful.\nI export it by going to <code>file-&gt;export-&gt;java-&gt;Runnable jar file-&gt;i bubble extract required libraries into generated jar</code>, choose the correct configuration, save the file in a specified folder, then it saves just fine. Or at least so I think. The <code>java.library.path</code> goes to the <code>jre lib folder</code>, but when i run it in eclipse it goes to the .so for j3d, i tried changing it using <code>System.setProperty</code> but to no success. I have a feeling that is the problem, but when I tried to fix it nothing happened. I'm using the most up to date <code>java3d library (1.5.2 I believe)</code>. </p>\n\n<p>Any suggestions?</p>\n"},{"tags":["java","xml","sockets","jaxb","bufferedreader"],"comments":[{"owner":{"account_id":2835128,"reputation":11494,"user_id":2435872,"accept_rate":83,"display_name":"jboi"},"score":0,"creation_date":1385623664,"post_id":20259849,"comment_id":30220771,"body_markdown":"What you say is merely true for HTTP POST requests. Plain sockets have a straight forward behavior.","body":"What you say is merely true for HTTP POST requests. Plain sockets have a straight forward behavior."},{"owner":{"account_id":28104689,"reputation":512,"user_id":21473475,"display_name":"Arfur Narf"},"score":0,"creation_date":1695002641,"post_id":20259849,"comment_id":135961412,"body_markdown":"Your code suffers from the common misunderstanding that there are &#39;messages&#39; in TCP. There are not - there is just a stream of bytes. Thus there&#39;s no clear way for the recipient of your write-to-socket to know when it&#39;s received the last byte intended (unless it&#39;s parsing as it goes, so it can delay until it has got the `&lt;/estel&gt;` that matches the initial `&lt;estel&gt;`, but I doubt you&#39;re doing that). If you want messages, you have to invent a protocol to delimit them. Ending the output stream after the write (before awaiting the response) would be one way.","body":"Your code suffers from the common misunderstanding that there are &#39;messages&#39; in TCP. There are not - there is just a stream of bytes. Thus there&#39;s no clear way for the recipient of your write-to-socket to know when it&#39;s received the last byte intended (unless it&#39;s parsing as it goes, so it can delay until it has got the <code>&lt;&#47;estel&gt;</code> that matches the initial <code>&lt;estel&gt;</code>, but I doubt you&#39;re doing that). If you want messages, you have to invent a protocol to delimit them. Ending the output stream after the write (before awaiting the response) would be one way."}],"answers":[{"tags":[],"owner":{"account_id":2835128,"reputation":11494,"user_id":2435872,"accept_rate":83,"display_name":"jboi"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1385624399,"creation_date":1385624399,"answer_id":20260325,"question_id":20259849,"body_markdown":"You send the XML over the socket but the server side does not answer. To be 100% sure what happens, we would need the server code and server error messages. So far I see two things, you could do:\r\n\r\n  1. When writing and flushing the XML, you can call `socket.shutdownOutput()`. This sends an EOF to the server, indicating that there&#39;s nothing more to read. Latest than the server should know, that it has to work on the XML and produce the result.\r\n\r\n  2. You send a String of `char` over a Stream of `byte`. Hopefully the server understands that in the same way as the client sends it. As hope is not really helpful in programming, you should wrap the output stream like this: `Writer writer = new OutputStreamWriter(socket.shutdownOutput(), &quot;UTF-8&quot;);` and do the write and the flush with the writer. Notice that you need to do the same on the server side for the input stream (wrap as Reader with &quot;UTF-8&quot;)\r\n\r\n","title":"what is the best way to send xml string over java Sockets?","body":"<p>You send the XML over the socket but the server side does not answer. To be 100% sure what happens, we would need the server code and server error messages. So far I see two things, you could do:</p>\n\n<ol>\n<li><p>When writing and flushing the XML, you can call <code>socket.shutdownOutput()</code>. This sends an EOF to the server, indicating that there's nothing more to read. Latest than the server should know, that it has to work on the XML and produce the result.</p></li>\n<li><p>You send a String of <code>char</code> over a Stream of <code>byte</code>. Hopefully the server understands that in the same way as the client sends it. As hope is not really helpful in programming, you should wrap the output stream like this: <code>Writer writer = new OutputStreamWriter(socket.shutdownOutput(), \"UTF-8\");</code> and do the write and the flush with the writer. Notice that you need to do the same on the server side for the input stream (wrap as Reader with \"UTF-8\")</p></li>\n</ol>\n"},{"tags":[],"owner":{"account_id":1292873,"reputation":3582,"user_id":1244610,"display_name":"Matthias"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1385624499,"creation_date":1385624499,"answer_id":20260355,"question_id":20259849,"body_markdown":"Please reduce your issue to a running piece of code that shows the error. Posting some code that does not even compile, does not really help in understanding the problem you have. Even after fitting this code in a method and importing java.io stuff, there is 4 (!) undeclared variables: `hd, rq, out and rd`.\r\n\r\nTo help with your problem and answer your questions:\r\n\r\n1. You do not need to use a buffered writer, you just have to make sure you write everything you want to write (and flush or close the stream afterwards). The client (receiver) of course has to read from that stream as long as bytes are available before he tries to interpret the data.\r\n\r\n2. If you want to implement a different protocol, you of course have to read / write until a certain marker or whatever indicates that your transmission is finished. For this question however I assume you only want to transmit one set of XML data.\r\n\r\nFor writing you can simply write the String in one go using a simple `OutputStream`.\r\nCode like this would do the job:\r\n\r\n    StringBuilder sb = new StringBuilder();\r\n    //...\r\n    Socket socket = new Socket(&quot;41.206.23.21&quot;, 7101);\r\n    OutputStream os = socket.getOutputStream();\r\n    os.write(sb.toString().getBytes());\r\n    os.flush();\r\n\r\nReading that, you can also use a simple `InputStream`. To make sure you get everything, you should usually read the data and write it all to an intermediate byte array which you then can transform back into your String. A generic method for doing that, could be like this:\r\n\r\n      String read(InputStream in) throws IOException {\r\n        byte[] buffer = new byte[8192];\r\n        ByteArrayOutputStream out = new ByteArrayOutputStream();\r\n        int got;\r\n        while ((got = in.read(buffer)) &gt; -1) {\r\n          out.write(buffer, 0, got);\r\n        }\r\n        byte[] data = out.toByteArray();\r\n        String result = new String(data);\r\n        return result;\r\n      }\r\n\r\nKeep in mind that this method neither closes the stream, nor handles exceptions.","title":"what is the best way to send xml string over java Sockets?","body":"<p>Please reduce your issue to a running piece of code that shows the error. Posting some code that does not even compile, does not really help in understanding the problem you have. Even after fitting this code in a method and importing java.io stuff, there is 4 (!) undeclared variables: <code>hd, rq, out and rd</code>.</p>\n\n<p>To help with your problem and answer your questions:</p>\n\n<ol>\n<li><p>You do not need to use a buffered writer, you just have to make sure you write everything you want to write (and flush or close the stream afterwards). The client (receiver) of course has to read from that stream as long as bytes are available before he tries to interpret the data.</p></li>\n<li><p>If you want to implement a different protocol, you of course have to read / write until a certain marker or whatever indicates that your transmission is finished. For this question however I assume you only want to transmit one set of XML data.</p></li>\n</ol>\n\n<p>For writing you can simply write the String in one go using a simple <code>OutputStream</code>.\nCode like this would do the job:</p>\n\n<pre><code>StringBuilder sb = new StringBuilder();\n//...\nSocket socket = new Socket(\"41.206.23.21\", 7101);\nOutputStream os = socket.getOutputStream();\nos.write(sb.toString().getBytes());\nos.flush();\n</code></pre>\n\n<p>Reading that, you can also use a simple <code>InputStream</code>. To make sure you get everything, you should usually read the data and write it all to an intermediate byte array which you then can transform back into your String. A generic method for doing that, could be like this:</p>\n\n<pre><code>  String read(InputStream in) throws IOException {\n    byte[] buffer = new byte[8192];\n    ByteArrayOutputStream out = new ByteArrayOutputStream();\n    int got;\n    while ((got = in.read(buffer)) &gt; -1) {\n      out.write(buffer, 0, got);\n    }\n    byte[] data = out.toByteArray();\n    String result = new String(data);\n    return result;\n  }\n</code></pre>\n\n<p>Keep in mind that this method neither closes the stream, nor handles exceptions.</p>\n"}],"owner":{"account_id":1676276,"reputation":752,"user_id":1541771,"display_name":"Ayobami Opeyemi"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":8769,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":2,"score":0,"last_activity_date":1694995340,"creation_date":1385622698,"question_id":20259849,"body_markdown":"I tried this, but somewhere along the line I can&#39;t read the response from the server. (The response is in XML). \r\n\r\nI have read that writing over sockets requires buffering due to the string breakage. Somehow I discovered this is true when I used a jaxb unmarshaller and it reported a SAX EOF exception, meaning the xml been read was not complete. \r\n\r\nPlease how do I buffer write and buffer read properly?\r\n\r\n\r\n    StringBuilder sb = new StringBuilder();\r\n    sb.append(&quot;&lt;estel&gt;&quot;);\r\n    sb.append(&quot;&lt;header&gt;&lt;requesttype&gt;&quot;).append(hd.getRequestType()).append(&quot;&lt;/requesttype&gt;&lt;/header&gt;&quot;);\r\n    sb.append(&quot;&lt;request&gt;&quot;);\r\n    sb.append(&quot;&lt;agentcode&gt;&quot;).append(rq.getAgentCode()).append(&quot;&lt;/agentcode&gt;&quot;);\r\n    sb.append(&quot;&lt;pin&gt;&quot;).append(rq.getPin()).append(&quot;&lt;/pin&gt;&quot;);\r\n    sb.append(&quot;&lt;destination&gt;&quot;).append(rq.getDestination()).append(&quot;&lt;/destination&gt;&quot;);\r\n    sb.append(&quot;&lt;agenttransid&gt;&quot;).append(rq.getAgentTransId()).append(&quot;&lt;/agenttransid&gt;&quot;);\r\n    sb.append(&quot;&lt;vendorcode&gt;&quot;).append(rq.getVendorCode()).append(&quot;&lt;/vendorcode&gt;&quot;);\r\n    sb.append(&quot;&lt;amount&gt;&quot;).append(rq.getAmount()).append(&quot;&lt;/amount&gt;&quot;);\r\n        sb.append(&quot;&lt;productcode&gt;&quot;).append(rq.getProductCode()).append(&quot;&lt;/productcode&gt;&quot;);\r\n        sb.append(&quot;&lt;comments&gt;&quot;).append(rq.getComments()).append(&quot;&lt;/comments&gt;&quot;);\r\n        sb.append(&quot;&lt;clienttype&gt;&quot;).append(rq.getClientType()).append(&quot;&lt;/clienttype&gt;&quot;);\r\n    sb.append(&quot;&lt;/request&gt;&lt;/estel&gt;&quot;);\r\n\r\n\r\n        Socket socket = new Socket(&quot;41.206.23.21&quot;,7101);\r\n        OutputStream os = socket.getOutputStream();\r\n        InputStream in = socket.getInputStream();\r\n        \r\n        OutputStream buf = new BufferedOutputStream(os);    \r\n        out = new OutputStreamWriter(buf);\r\n        \r\n        System.out.printf(&quot;\\nxml is %s&quot;,sb.toString());   \r\n       System.out.print(&quot;\\n--------writing--to--socket-----&quot;);\r\n        out.write(sb.toString());\r\n        out.flush();\r\n\r\n        //read response\r\n        InputStream bui = new BufferedInputStream(in);\r\n      rd = new InputStreamReader(bui);\r\n       System.out.print(&quot;\\nxml response&quot;+rd.toString());\r\n\r\n       in.close();\r\n       out.close();\r\n       socket.close();\r\n","title":"what is the best way to send xml string over java Sockets?","body":"<p>I tried this, but somewhere along the line I can't read the response from the server. (The response is in XML). </p>\n\n<p>I have read that writing over sockets requires buffering due to the string breakage. Somehow I discovered this is true when I used a jaxb unmarshaller and it reported a SAX EOF exception, meaning the xml been read was not complete. </p>\n\n<p>Please how do I buffer write and buffer read properly?</p>\n\n<pre><code>StringBuilder sb = new StringBuilder();\nsb.append(\"&lt;estel&gt;\");\nsb.append(\"&lt;header&gt;&lt;requesttype&gt;\").append(hd.getRequestType()).append(\"&lt;/requesttype&gt;&lt;/header&gt;\");\nsb.append(\"&lt;request&gt;\");\nsb.append(\"&lt;agentcode&gt;\").append(rq.getAgentCode()).append(\"&lt;/agentcode&gt;\");\nsb.append(\"&lt;pin&gt;\").append(rq.getPin()).append(\"&lt;/pin&gt;\");\nsb.append(\"&lt;destination&gt;\").append(rq.getDestination()).append(\"&lt;/destination&gt;\");\nsb.append(\"&lt;agenttransid&gt;\").append(rq.getAgentTransId()).append(\"&lt;/agenttransid&gt;\");\nsb.append(\"&lt;vendorcode&gt;\").append(rq.getVendorCode()).append(\"&lt;/vendorcode&gt;\");\nsb.append(\"&lt;amount&gt;\").append(rq.getAmount()).append(\"&lt;/amount&gt;\");\n    sb.append(\"&lt;productcode&gt;\").append(rq.getProductCode()).append(\"&lt;/productcode&gt;\");\n    sb.append(\"&lt;comments&gt;\").append(rq.getComments()).append(\"&lt;/comments&gt;\");\n    sb.append(\"&lt;clienttype&gt;\").append(rq.getClientType()).append(\"&lt;/clienttype&gt;\");\nsb.append(\"&lt;/request&gt;&lt;/estel&gt;\");\n\n\n    Socket socket = new Socket(\"41.206.23.21\",7101);\n    OutputStream os = socket.getOutputStream();\n    InputStream in = socket.getInputStream();\n\n    OutputStream buf = new BufferedOutputStream(os);    \n    out = new OutputStreamWriter(buf);\n\n    System.out.printf(\"\\nxml is %s\",sb.toString());   \n   System.out.print(\"\\n--------writing--to--socket-----\");\n    out.write(sb.toString());\n    out.flush();\n\n    //read response\n    InputStream bui = new BufferedInputStream(in);\n  rd = new InputStreamReader(bui);\n   System.out.print(\"\\nxml response\"+rd.toString());\n\n   in.close();\n   out.close();\n   socket.close();\n</code></pre>\n"},{"tags":["java","web-services","spring","jackson","resttemplate"],"comments":[{"owner":{"account_id":232642,"reputation":723,"user_id":497623,"accept_rate":78,"display_name":"hectorg87"},"score":1,"creation_date":1371564122,"post_id":14491309,"comment_id":24860900,"body_markdown":"you should answer your own question with the &quot;Update edit&quot; of the question.","body":"you should answer your own question with the &quot;Update edit&quot; of the question."},{"owner":{"account_id":268400,"reputation":624,"user_id":557143,"display_name":"Hemant Nagpal"},"score":1,"creation_date":1595955723,"post_id":14491309,"comment_id":111651113,"body_markdown":"You are awesome, your update resolved the issue.","body":"You are awesome, your update resolved the issue."}],"answers":[{"tags":[],"owner":{"account_id":1434521,"reputation":290,"user_id":1356208,"display_name":"Uttesh Kumar"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1387539524,"creation_date":1387539524,"answer_id":20702828,"question_id":14491309,"body_markdown":"Use the  @JsonSerialize(using = JsonDateSerializer.class) or  @JsonDeserialize(using = JsonDateDeSerializer.class) annotations of org.codehaus.jackson.map.JsonDeserializer; it will solve the issue or user ObjectMapper(org.codehaus.jackson.map.ObjectMapper) to convert to Json String.\r\n\r\nobjectMapper.writeValueAsString(Object); // this will give json string","title":"Deserializing Nested objects using RestTemplate","body":"<p>Use the  @JsonSerialize(using = JsonDateSerializer.class) or  @JsonDeserialize(using = JsonDateDeSerializer.class) annotations of org.codehaus.jackson.map.JsonDeserializer; it will solve the issue or user ObjectMapper(org.codehaus.jackson.map.ObjectMapper) to convert to Json String.</p>\n\n<p>objectMapper.writeValueAsString(Object); // this will give json string</p>\n"}],"owner":{"account_id":236361,"reputation":14191,"user_id":503804,"accept_rate":70,"display_name":"nilesh"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":11627,"favorite_count":0,"down_vote_count":0,"up_vote_count":12,"answer_count":1,"score":12,"last_activity_date":1694995340,"creation_date":1358983647,"question_id":14491309,"body_markdown":"I am using RestTemplate and having issues deserializing an object. Here is what I am doing. The JSON response looks like,\r\n\r\n```lang-java\r\n{\r\n    &quot;response&quot;: {\r\n        &quot;Time&quot;: &quot;Wed 2013.01.23 at 03:35:25 PM UTC&quot;,\r\n        &quot;Total_Input_Records&quot;: 5,\r\n    },-\r\n    &quot;message&quot;: &quot;Succeeded&quot;,\r\n    &quot;code&quot;: &quot;200&quot;\r\n}\r\n```\r\n\r\nConverted this Json payload into a POJO using [jsonschema2pojo][1]\r\n\r\n\r\n    public class MyClass {\r\n        @JsonProperty(&quot;response&quot;)\r\n        private Response response;\r\n        @JsonProperty(&quot;message&quot;)\r\n        private Object message;\r\n        @JsonProperty(&quot;code&quot;)\r\n        private Object code;\r\n        private Map&lt;String, Object&gt; additionalProperties = new HashMap&lt;String, Object&gt;();\r\n        //bunch of getters and setters here\r\n    }\r\n    public class Response {\r\n        @JsonProperty(&quot;Time&quot;)\r\n        private Date Time;\r\n        @JsonProperty(&quot;Total_Input_Records&quot;)\r\n        private Object Total_Input_Records;\r\n        private Map&lt;String, Object&gt; additionalProperties = new HashMap&lt;String, Object&gt;();\r\n    //bunch of getters and setters here\r\n    }\r\n\r\nHere is the request processing where I am getting the exception,\r\n\r\n    String url = &quot;http://example.com/someparams&quot;;\r\n    RestTemplate template = new RestTemplate(\r\n    \t\t\t\tnew HttpComponentsClientHttpRequestFactory());\r\n    FormHttpMessageConverter converter = new FormHttpMessageConverter();\r\n    List&lt;MediaType&gt; mediaTypes = new ArrayList&lt;MediaType&gt;();\r\n    mediaTypes.add(new MediaType(&quot;application&quot;, &quot;x-www-form-urlencoded&quot;));\r\n    converter.setSupportedMediaTypes(mediaTypes);\r\n    template.getMessageConverters().add(converter);\r\n    MyClass\tupload = template.postForObject(url, null, MyClass.class);\r\n\r\nHere is the frustrating part, exception (deliberately trimmed, not full). Anything I am missing?\r\n\r\n    org.springframework.http.converter.HttpMessageNotReadableException: Could not read JSON: Unrecognized field &quot;Time&quot; (Class com.temp.pointtests.Response), not marked as ignorable\r\n     at [Source: org.apache.http.conn.EofSensorInputStream@340ae1cf; line: 1, column: 22  (through reference chain: com.temp.pointtests.MyClass[&quot;response&quot;]-&gt;com.temp.pointtests.Response[&quot;Time&quot;]);] \r\n\r\n  [1]: http://code.google.com/p/jsonschema2pojo\r\n\r\n**+++++Update Solved++++++**\r\n\r\nI saw Spring added MappingJackson2HttpMessageConverter which uses Jackson 2. Because MappingJacksonHttpMessageConverter in my code above uses Jackson Pre2.0 versions and it doesn&#39;t work. It works for Jackson 2.0 however.  With MappingJackson2HttpMessageConverter available now, I can now add it to my RestTemplate and everything works fine :-). Here is the code for people who have the same issue,\r\n\r\n    String url = &quot;http://example.com/someparams&quot;;\r\n    RestTemplate template = new RestTemplate();\r\n    HttpHeaders headers = new HttpHeaders();\r\n    headers.setContentType(MediaType.APPLICATION_FORM_URLENCODED);\t\r\n    HttpEntity request = new HttpEntity(headers);\r\n    List&lt;HttpMessageConverter&lt;?&gt;&gt; messageConverters = new ArrayList&lt;HttpMessageConverter&lt;?&gt;&gt;();\r\n    MappingJackson2HttpMessageConverter map = new MappingJackson2HttpMessageConverter();\r\n    messageConverters.add(map);\r\n    messageConverters.add(new FormHttpMessageConverter());\r\n    template.setMessageConverters(messageConverters);\r\n    MyClass msg = template.postForObject(url, request, MyClass.class);","title":"Deserializing Nested objects using RestTemplate","body":"<p>I am using RestTemplate and having issues deserializing an object. Here is what I am doing. The JSON response looks like,</p>\n<pre class=\"lang-java prettyprint-override\"><code>{\n    &quot;response&quot;: {\n        &quot;Time&quot;: &quot;Wed 2013.01.23 at 03:35:25 PM UTC&quot;,\n        &quot;Total_Input_Records&quot;: 5,\n    },-\n    &quot;message&quot;: &quot;Succeeded&quot;,\n    &quot;code&quot;: &quot;200&quot;\n}\n</code></pre>\n<p>Converted this Json payload into a POJO using <a href=\"http://code.google.com/p/jsonschema2pojo\" rel=\"nofollow noreferrer\">jsonschema2pojo</a></p>\n<pre><code>public class MyClass {\n    @JsonProperty(&quot;response&quot;)\n    private Response response;\n    @JsonProperty(&quot;message&quot;)\n    private Object message;\n    @JsonProperty(&quot;code&quot;)\n    private Object code;\n    private Map&lt;String, Object&gt; additionalProperties = new HashMap&lt;String, Object&gt;();\n    //bunch of getters and setters here\n}\npublic class Response {\n    @JsonProperty(&quot;Time&quot;)\n    private Date Time;\n    @JsonProperty(&quot;Total_Input_Records&quot;)\n    private Object Total_Input_Records;\n    private Map&lt;String, Object&gt; additionalProperties = new HashMap&lt;String, Object&gt;();\n//bunch of getters and setters here\n}\n</code></pre>\n<p>Here is the request processing where I am getting the exception,</p>\n<pre><code>String url = &quot;http://example.com/someparams&quot;;\nRestTemplate template = new RestTemplate(\n                new HttpComponentsClientHttpRequestFactory());\nFormHttpMessageConverter converter = new FormHttpMessageConverter();\nList&lt;MediaType&gt; mediaTypes = new ArrayList&lt;MediaType&gt;();\nmediaTypes.add(new MediaType(&quot;application&quot;, &quot;x-www-form-urlencoded&quot;));\nconverter.setSupportedMediaTypes(mediaTypes);\ntemplate.getMessageConverters().add(converter);\nMyClass upload = template.postForObject(url, null, MyClass.class);\n</code></pre>\n<p>Here is the frustrating part, exception (deliberately trimmed, not full). Anything I am missing?</p>\n<pre><code>org.springframework.http.converter.HttpMessageNotReadableException: Could not read JSON: Unrecognized field &quot;Time&quot; (Class com.temp.pointtests.Response), not marked as ignorable\n at [Source: org.apache.http.conn.EofSensorInputStream@340ae1cf; line: 1, column: 22  (through reference chain: com.temp.pointtests.MyClass[&quot;response&quot;]-&gt;com.temp.pointtests.Response[&quot;Time&quot;]);] \n</code></pre>\n<p><strong>+++++Update Solved++++++</strong></p>\n<p>I saw Spring added MappingJackson2HttpMessageConverter which uses Jackson 2. Because MappingJacksonHttpMessageConverter in my code above uses Jackson Pre2.0 versions and it doesn't work. It works for Jackson 2.0 however.  With MappingJackson2HttpMessageConverter available now, I can now add it to my RestTemplate and everything works fine :-). Here is the code for people who have the same issue,</p>\n<pre><code>String url = &quot;http://example.com/someparams&quot;;\nRestTemplate template = new RestTemplate();\nHttpHeaders headers = new HttpHeaders();\nheaders.setContentType(MediaType.APPLICATION_FORM_URLENCODED);  \nHttpEntity request = new HttpEntity(headers);\nList&lt;HttpMessageConverter&lt;?&gt;&gt; messageConverters = new ArrayList&lt;HttpMessageConverter&lt;?&gt;&gt;();\nMappingJackson2HttpMessageConverter map = new MappingJackson2HttpMessageConverter();\nmessageConverters.add(map);\nmessageConverters.add(new FormHttpMessageConverter());\ntemplate.setMessageConverters(messageConverters);\nMyClass msg = template.postForObject(url, request, MyClass.class);\n</code></pre>\n"},{"tags":["java","android","android-intent","sharedpreferences","onclicklistener"],"comments":[{"owner":{"account_id":39846,"reputation":991133,"user_id":115145,"accept_rate":84,"display_name":"CommonsWare"},"score":1,"creation_date":1694993615,"post_id":77123962,"comment_id":135960794,"body_markdown":"&quot;App in Android Studio keeps crashing&quot; -- use Logcat to examine the stack trace associated with your crash: https://commonsware.com/Jetpack/pages/chap-debug-001.html","body":"&quot;App in Android Studio keeps crashing&quot; -- use Logcat to examine the stack trace associated with your crash: <a href=\"https://commonsware.com/Jetpack/pages/chap-debug-001.html\" rel=\"nofollow noreferrer\">commonsware.com/Jetpack/pages/chap-debug-001.html</a>"},{"owner":{"account_id":29462969,"reputation":1,"user_id":22577332,"display_name":"Megan "},"score":0,"creation_date":1694993938,"post_id":77123962,"comment_id":135960819,"body_markdown":"@CommonsWare I didn&#39;t include the Logcat code in the body because of length issues, but it says: Name :  + editTextText2\n2023-09-17 19:01:24.061  6128-6128  AndroidRuntime          com.example.personalprofile          E  FATAL EXCEPTION: main                                                                                                   java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example.personalprofile/com.example.personalprofile.Screen2Activity}: android.content.res.Resources$NotFoundException: String resource ID #0x1","body":"@CommonsWare I didn&#39;t include the Logcat code in the body because of length issues, but it says: Name :  + editTextText2 2023-09-17 19:01:24.061  6128-6128  AndroidRuntime          com.example.personalprofile          E  FATAL EXCEPTION: main                                                                                                   java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example.personalprofile/com.example.person&zwnj;&#8203;alprofile.Screen2Act&zwnj;&#8203;ivity}: android.content.res.Resources$NotFoundException: String resource ID #0x1"},{"owner":{"account_id":402229,"reputation":93994,"user_id":769265,"display_name":"David Wasser"},"score":0,"creation_date":1695219649,"post_id":77123962,"comment_id":135995476,"body_markdown":"Not sure what you are trying to do here. You need to give more information. Screenshots or a mockup or something. Why are you appending stuff to the `EditText` fields like that? That is going to be a real mess...","body":"Not sure what you are trying to do here. You need to give more information. Screenshots or a mockup or something. Why are you appending stuff to the <code>EditText</code> fields like that? That is going to be a real mess..."}],"answers":[{"tags":[],"owner":{"account_id":39846,"reputation":991133,"user_id":115145,"accept_rate":84,"display_name":"CommonsWare"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1694994608,"creation_date":1694994608,"answer_id":77123989,"question_id":77123962,"body_markdown":"Start by replacing:\r\n\r\n```java\r\n            textName.setText(Log.d(&quot;Screen2Activity&quot;, &quot;Name :  + editTextText2&quot;));\r\n            textAge.setText(Log.d(&quot;Screen2Activity&quot;, &quot;Age :  + editTextText3&quot;));\r\n            textBirthplace.setText(Log.d(&quot;Screen2Activity&quot;, &quot;Birthplace :  + editTextText4&quot;));\r\n            textHobbies.setText(Log.d(&quot;Screen2Activity&quot;, &quot;Hobbies :  + selectedhobby&quot;));\r\n            textGender.setText(Log.d(&quot;Screen2Activity&quot;, &quot;Gender :  + gendertext&quot;));\r\n```\r\n\r\nwith:\r\n\r\n```java\r\n            Log.d(&quot;Screen2Activity&quot;, &quot;Name :  + editTextText2&quot;);\r\n            Log.d(&quot;Screen2Activity&quot;, &quot;Age :  + editTextText3&quot;);\r\n            Log.d(&quot;Screen2Activity&quot;, &quot;Birthplace :  + editTextText4&quot;);\r\n            Log.d(&quot;Screen2Activity&quot;, &quot;Hobbies :  + selectedhobby&quot;);\r\n            Log.d(&quot;Screen2Activity&quot;, &quot;Gender :  + gendertext&quot;);\r\n```\r\n\r\nDo not attempt to use the output of `Log.d()`. Just look in Logcat to see what the `Log.d()` call emits in the logging.\r\n","title":"App in Android Studio keeps crashing upon clicking submit when trying to share data using Intent and onClickListener","body":"<p>Start by replacing:</p>\n<pre class=\"lang-java prettyprint-override\"><code>            textName.setText(Log.d(&quot;Screen2Activity&quot;, &quot;Name :  + editTextText2&quot;));\n            textAge.setText(Log.d(&quot;Screen2Activity&quot;, &quot;Age :  + editTextText3&quot;));\n            textBirthplace.setText(Log.d(&quot;Screen2Activity&quot;, &quot;Birthplace :  + editTextText4&quot;));\n            textHobbies.setText(Log.d(&quot;Screen2Activity&quot;, &quot;Hobbies :  + selectedhobby&quot;));\n            textGender.setText(Log.d(&quot;Screen2Activity&quot;, &quot;Gender :  + gendertext&quot;));\n</code></pre>\n<p>with:</p>\n<pre class=\"lang-java prettyprint-override\"><code>            Log.d(&quot;Screen2Activity&quot;, &quot;Name :  + editTextText2&quot;);\n            Log.d(&quot;Screen2Activity&quot;, &quot;Age :  + editTextText3&quot;);\n            Log.d(&quot;Screen2Activity&quot;, &quot;Birthplace :  + editTextText4&quot;);\n            Log.d(&quot;Screen2Activity&quot;, &quot;Hobbies :  + selectedhobby&quot;);\n            Log.d(&quot;Screen2Activity&quot;, &quot;Gender :  + gendertext&quot;);\n</code></pre>\n<p>Do not attempt to use the output of <code>Log.d()</code>. Just look in Logcat to see what the <code>Log.d()</code> call emits in the logging.</p>\n"}],"owner":{"account_id":29462969,"reputation":1,"user_id":22577332,"display_name":"Megan "},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":28,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1694994608,"creation_date":1694993574,"question_id":77123962,"body_markdown":"The app is a general profile app to get familiar with the program since this is my first time using it and I don&#39;t have much experience with Java. The main activity has two radio buttons, a radio group, six checkboxes, five textviews (three labels and two to show results) and three edittexts. When you click apply the results from the radio buttons and the checkboxes will show a textview assigned to them. Clicking submit is supposed to move to the next screen that shows the information typed into the EditTexts and selected with the checkboxes and radiobuttons. \r\n\r\n**The Main activity java file:** \r\n```\r\npublic class MainActivity extends AppCompatActivity {\r\n    @SuppressLint(&quot;SetTextI18n&quot;)\r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        setContentView(R.layout.activity_main);\r\n\r\n        applyButton.setOnClickListener(new View.OnClickListener()\r\n        {\r\n            @Override\r\n            public void onClick(View view) {\r\n                if (cookingbox.isChecked()) {\r\n                    selectedhobby.setText(selectedhobby.getText().toString() + &quot; &quot; + cookingbox.getText().toString());\r\n                }\r\n                if (sportsbox.isChecked()) {\r\n                    selectedhobby.setText(selectedhobby.getText().toString() + &quot; &quot; + sportsbox.getText().toString());\r\n                }\r\n                if (craftbox.isChecked()) {\r\n                    selectedhobby.setText(selectedhobby.getText().toString() + &quot; &quot; + craftbox.getText().toString());\r\n                }\r\n                if (gamebox.isChecked()) {\r\n                    selectedhobby.setText(selectedhobby.getText().toString() + &quot; &quot; + gamebox.getText().toString());\r\n                }\r\n                if (bookbox.isChecked()) {\r\n                    selectedhobby.setText(selectedhobby.getText().toString() + &quot; &quot; + bookbox.getText().toString());\r\n                }\r\n                if (otherbox.isChecked()) {\r\n                    selectedhobby.setText(selectedhobby.getText().toString() + &quot; &quot; + otherbox.getText().toString());\r\n                }\r\n                if (malebutton.isChecked()) {\r\n                    gendertext.setText(malebutton.getText().toString());\r\n                } else if (femalebutton.isChecked()) {\r\n                    gendertext.setText(femalebutton.getText().toString());\r\n                }\r\n            }\r\n        });\r\n        submitButton.setOnClickListener(new View.OnClickListener()\r\n        {\r\n            @Override\r\n            public void onClick(View view)\r\n            {\r\n                Intent Intent;\r\n                Intent = new Intent(MainActivity.this, Screen2Activity.class);\r\n                Intent.putExtra(&quot;selectedhobby&quot;, &quot;&quot;);\r\n                Intent.putExtra(&quot;editTextText2&quot;, &quot;&quot;);\r\n                Intent.putExtra(&quot;editTextText4&quot;, &quot;&quot;);\r\n                Intent.putExtra(&quot;editTextText3&quot;, &quot;&quot;);\r\n                Intent.putExtra(&quot;gendertext&quot;, &quot;&quot;);\r\n                startActivity(Intent);\r\n                setContentView(R.layout.screen2);\r\n            }\r\n        });\r\n    }\r\n}\r\n```\r\n**Screen2 Java File:** \r\n```\r\nimport androidx.appcompat.app.AppCompatActivity;\r\n\r\npublic class Screen2Activity extends AppCompatActivity {\r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        setContentView(R.layout.screen2);\r\n        ;\r\n        textName = findViewById(R.id.textName);\r\n        textAge = findViewById(R.id.textAge);\r\n        textBirthplace = findViewById(R.id.textBirthplace);\r\n        textHobbies = findViewById(R.id.textHobbies);\r\n        textGender = findViewById(R.id.textGender);\r\n\r\n        Intent Intent = getIntent();\r\n        if (Intent != null)\r\n        {\r\n            String editTextText2 = Intent.getStringExtra(&quot;editTextText2&quot;);\r\n            String editTextText4 = Intent.getStringExtra(&quot;editTextText4&quot;);\r\n            String selectedhobby = Intent.getStringExtra(&quot;selectedhobby&quot;);\r\n            String gendertext = Intent.getStringExtra(&quot;gendertext&quot;);\r\n            Integer editTextText3 = Intent.getIntExtra(&quot;editTextText3&quot;, -1);\r\n            textName.setText(Log.d(&quot;Screen2Activity&quot;, &quot;Name :  + editTextText2&quot;));\r\n            textAge.setText(Log.d(&quot;Screen2Activity&quot;, &quot;Age :  + editTextText3&quot;));\r\n            textBirthplace.setText(Log.d(&quot;Screen2Activity&quot;, &quot;Birthplace :  + editTextText4&quot;));\r\n            textHobbies.setText(Log.d(&quot;Screen2Activity&quot;, &quot;Hobbies :  + selectedhobby&quot;));\r\n            textGender.setText(Log.d(&quot;Screen2Activity&quot;, &quot;Gender :  + gendertext&quot;));\r\n        }\r\n```\r\n\r\nI couldn&#39;t get the information from the EditText fields to move to the second activity screen. When I went back into the main activity java file to try to fix the intent errors, I guess I messed up the code for the submit button as well and now neither will work. ","title":"App in Android Studio keeps crashing upon clicking submit when trying to share data using Intent and onClickListener","body":"<p>The app is a general profile app to get familiar with the program since this is my first time using it and I don't have much experience with Java. The main activity has two radio buttons, a radio group, six checkboxes, five textviews (three labels and two to show results) and three edittexts. When you click apply the results from the radio buttons and the checkboxes will show a textview assigned to them. Clicking submit is supposed to move to the next screen that shows the information typed into the EditTexts and selected with the checkboxes and radiobuttons.</p>\n<p><strong>The Main activity java file:</strong></p>\n<pre><code>public class MainActivity extends AppCompatActivity {\n    @SuppressLint(&quot;SetTextI18n&quot;)\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.activity_main);\n\n        applyButton.setOnClickListener(new View.OnClickListener()\n        {\n            @Override\n            public void onClick(View view) {\n                if (cookingbox.isChecked()) {\n                    selectedhobby.setText(selectedhobby.getText().toString() + &quot; &quot; + cookingbox.getText().toString());\n                }\n                if (sportsbox.isChecked()) {\n                    selectedhobby.setText(selectedhobby.getText().toString() + &quot; &quot; + sportsbox.getText().toString());\n                }\n                if (craftbox.isChecked()) {\n                    selectedhobby.setText(selectedhobby.getText().toString() + &quot; &quot; + craftbox.getText().toString());\n                }\n                if (gamebox.isChecked()) {\n                    selectedhobby.setText(selectedhobby.getText().toString() + &quot; &quot; + gamebox.getText().toString());\n                }\n                if (bookbox.isChecked()) {\n                    selectedhobby.setText(selectedhobby.getText().toString() + &quot; &quot; + bookbox.getText().toString());\n                }\n                if (otherbox.isChecked()) {\n                    selectedhobby.setText(selectedhobby.getText().toString() + &quot; &quot; + otherbox.getText().toString());\n                }\n                if (malebutton.isChecked()) {\n                    gendertext.setText(malebutton.getText().toString());\n                } else if (femalebutton.isChecked()) {\n                    gendertext.setText(femalebutton.getText().toString());\n                }\n            }\n        });\n        submitButton.setOnClickListener(new View.OnClickListener()\n        {\n            @Override\n            public void onClick(View view)\n            {\n                Intent Intent;\n                Intent = new Intent(MainActivity.this, Screen2Activity.class);\n                Intent.putExtra(&quot;selectedhobby&quot;, &quot;&quot;);\n                Intent.putExtra(&quot;editTextText2&quot;, &quot;&quot;);\n                Intent.putExtra(&quot;editTextText4&quot;, &quot;&quot;);\n                Intent.putExtra(&quot;editTextText3&quot;, &quot;&quot;);\n                Intent.putExtra(&quot;gendertext&quot;, &quot;&quot;);\n                startActivity(Intent);\n                setContentView(R.layout.screen2);\n            }\n        });\n    }\n}\n</code></pre>\n<p><strong>Screen2 Java File:</strong></p>\n<pre><code>import androidx.appcompat.app.AppCompatActivity;\n\npublic class Screen2Activity extends AppCompatActivity {\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.screen2);\n        ;\n        textName = findViewById(R.id.textName);\n        textAge = findViewById(R.id.textAge);\n        textBirthplace = findViewById(R.id.textBirthplace);\n        textHobbies = findViewById(R.id.textHobbies);\n        textGender = findViewById(R.id.textGender);\n\n        Intent Intent = getIntent();\n        if (Intent != null)\n        {\n            String editTextText2 = Intent.getStringExtra(&quot;editTextText2&quot;);\n            String editTextText4 = Intent.getStringExtra(&quot;editTextText4&quot;);\n            String selectedhobby = Intent.getStringExtra(&quot;selectedhobby&quot;);\n            String gendertext = Intent.getStringExtra(&quot;gendertext&quot;);\n            Integer editTextText3 = Intent.getIntExtra(&quot;editTextText3&quot;, -1);\n            textName.setText(Log.d(&quot;Screen2Activity&quot;, &quot;Name :  + editTextText2&quot;));\n            textAge.setText(Log.d(&quot;Screen2Activity&quot;, &quot;Age :  + editTextText3&quot;));\n            textBirthplace.setText(Log.d(&quot;Screen2Activity&quot;, &quot;Birthplace :  + editTextText4&quot;));\n            textHobbies.setText(Log.d(&quot;Screen2Activity&quot;, &quot;Hobbies :  + selectedhobby&quot;));\n            textGender.setText(Log.d(&quot;Screen2Activity&quot;, &quot;Gender :  + gendertext&quot;));\n        }\n</code></pre>\n<p>I couldn't get the information from the EditText fields to move to the second activity screen. When I went back into the main activity java file to try to fix the intent errors, I guess I messed up the code for the submit button as well and now neither will work.</p>\n"},{"tags":["java","android","xml","material-design","materialbutton"],"comments":[{"owner":{"account_id":4192472,"reputation":1728,"user_id":3434763,"display_name":"TheLibrarian"},"score":2,"creation_date":1694984467,"post_id":77123580,"comment_id":135960042,"body_markdown":"&quot;MaterialButton&#39;s width is set to fill the entire screen&quot; - where?","body":"&quot;MaterialButton&#39;s width is set to fill the entire screen&quot; - where?"},{"owner":{"account_id":10814854,"reputation":4137,"user_id":7954210,"accept_rate":73,"display_name":"Mouaad Abdelghafour AITALI"},"score":0,"creation_date":1694984653,"post_id":77123580,"comment_id":135960059,"body_markdown":"@TheLibrarian Thank you for your comment. My apologies for writing it incorrectly. What I meant was that I set `wrap_content`, which means the width will take its content&#39;s width.","body":"@TheLibrarian Thank you for your comment. My apologies for writing it incorrectly. What I meant was that I set <code>wrap_content</code>, which means the width will take its content&#39;s width."},{"owner":{"account_id":4192472,"reputation":1728,"user_id":3434763,"display_name":"TheLibrarian"},"score":1,"creation_date":1694984715,"post_id":77123580,"comment_id":135960065,"body_markdown":"Have you tried &quot;android:maxLines=&quot;1&quot;?","body":"Have you tried &quot;android:maxLines=&quot;1&quot;?"},{"owner":{"account_id":10814854,"reputation":4137,"user_id":7954210,"accept_rate":73,"display_name":"Mouaad Abdelghafour AITALI"},"score":0,"creation_date":1694984793,"post_id":77123580,"comment_id":135960073,"body_markdown":"Yes, `android:maxLines=&quot;1&quot;` is cutting the word gallery","body":"Yes, <code>android:maxLines=&quot;1&quot;</code> is cutting the word gallery"},{"owner":{"account_id":4192472,"reputation":1728,"user_id":3434763,"display_name":"TheLibrarian"},"score":0,"creation_date":1694984930,"post_id":77123580,"comment_id":135960091,"body_markdown":"So wouldn&#39;t that mean that there is not enough space there for it? Also from UX standpoint - I think the word &quot;Open&quot; is sort of redundant, &quot;Galery&quot; in clickable widget already tells you what is going to happen when you click on it.","body":"So wouldn&#39;t that mean that there is not enough space there for it? Also from UX standpoint - I think the word &quot;Open&quot; is sort of redundant, &quot;Galery&quot; in clickable widget already tells you what is going to happen when you click on it."},{"owner":{"account_id":10814854,"reputation":4137,"user_id":7954210,"accept_rate":73,"display_name":"Mouaad Abdelghafour AITALI"},"score":0,"creation_date":1694985135,"post_id":77123580,"comment_id":135960120,"body_markdown":"I don&#39;t have only that button; I have others. There&#39;s ample space for the button width to stretch. But still it&#39;s break the text and takes small width","body":"I don&#39;t have only that button; I have others. There&#39;s ample space for the button width to stretch. But still it&#39;s break the text and takes small width"},{"owner":{"account_id":180055,"reputation":75792,"user_id":413127,"accept_rate":96,"display_name":"Blundell"},"score":1,"creation_date":1694985400,"post_id":77123580,"comment_id":135960147,"body_markdown":"fun side note about `maxLines`:  https://stackoverflow.com/a/45377396/413127 (`maxLines` is the answer btw). If the text is then cut, thats a different layout problem now that this is fixed.","body":"fun side note about <code>maxLines</code>:  <a href=\"https://stackoverflow.com/a/45377396/413127\">stackoverflow.com/a/45377396/413127</a> (<code>maxLines</code> is the answer btw). If the text is then cut, thats a different layout problem now that this is fixed."}],"answers":[{"tags":[],"owner":{"account_id":2182429,"reputation":1068,"user_id":1931595,"display_name":"Saty"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1694993023,"creation_date":1694993023,"answer_id":77123951,"question_id":77123580,"body_markdown":"Your text is overflowing to the next line because you just don&#39;t have enough space. So the only option it got is either overflow to the next line or get truncated when maxLines is set to 1. It would be helpful if you could also paste the parent of this material button to give more insights.","title":"Why does the MaterialButton display text in two lines instead of one?","body":"<p>Your text is overflowing to the next line because you just don't have enough space. So the only option it got is either overflow to the next line or get truncated when maxLines is set to 1. It would be helpful if you could also paste the parent of this material button to give more insights.</p>\n"}],"owner":{"account_id":10814854,"reputation":4137,"user_id":7954210,"accept_rate":73,"display_name":"Mouaad Abdelghafour AITALI"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":32,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1694993023,"creation_date":1694984179,"question_id":77123580,"body_markdown":"I&#39;m using `com.google.android.material.button.MaterialButton` as a button :\r\n\r\n\r\n     &lt;com.google.android.material.button.MaterialButton\r\n                android:id=&quot;@+id/openGallery&quot;\r\n                android:layout_width=&quot;wrap_content&quot;\r\n                android:layout_height=&quot;wrap_content&quot;\r\n                android:gravity=&quot;center&quot;\r\n                android:text=&quot;@string/open_gallery&quot;\r\n                android:textAllCaps=&quot;true&quot;\r\n                android:textColor=&quot;@color/dark_pink&quot;\r\n                android:textSize=&quot;32sp&quot;\r\n                android:textStyle=&quot;bold&quot;\r\n                app:backgroundTint=&quot;@null&quot;\r\n                app:icon=&quot;@drawable/ic_gallery&quot;\r\n                app:iconSize=&quot;64sp&quot;\r\n                app:iconTint=&quot;@color/dark_pink&quot;\r\n                app:shapeAppearance=&quot;@style/CutTopLeftBottomRight&quot;\r\n                app:strokeColor=&quot;@color/dark_pink&quot;\r\n                app:strokeWidth=&quot;6dp&quot; /&gt;\r\n\r\nAs you can see, **OPEN GALLERY** is breaking into two lines instead of staying on a single line. The `MaterialButton&#39;s` width is set to fit the text content, but it doesn&#39;t seem to be considering this.\r\n\r\n\r\n[![enter image description here][1]][1]\r\n\r\nHow to fix this issue without using `android:layout_width=&quot;match_parent&quot;`\r\n\r\nWhat I want : \r\n\r\n[![enter image description here][2]][2]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/ZhiI7.png\r\n  [2]: https://i.stack.imgur.com/8Gg85.png","title":"Why does the MaterialButton display text in two lines instead of one?","body":"<p>I'm using <code>com.google.android.material.button.MaterialButton</code> as a button :</p>\n<pre><code> &lt;com.google.android.material.button.MaterialButton\n            android:id=&quot;@+id/openGallery&quot;\n            android:layout_width=&quot;wrap_content&quot;\n            android:layout_height=&quot;wrap_content&quot;\n            android:gravity=&quot;center&quot;\n            android:text=&quot;@string/open_gallery&quot;\n            android:textAllCaps=&quot;true&quot;\n            android:textColor=&quot;@color/dark_pink&quot;\n            android:textSize=&quot;32sp&quot;\n            android:textStyle=&quot;bold&quot;\n            app:backgroundTint=&quot;@null&quot;\n            app:icon=&quot;@drawable/ic_gallery&quot;\n            app:iconSize=&quot;64sp&quot;\n            app:iconTint=&quot;@color/dark_pink&quot;\n            app:shapeAppearance=&quot;@style/CutTopLeftBottomRight&quot;\n            app:strokeColor=&quot;@color/dark_pink&quot;\n            app:strokeWidth=&quot;6dp&quot; /&gt;\n</code></pre>\n<p>As you can see, <strong>OPEN GALLERY</strong> is breaking into two lines instead of staying on a single line. The <code>MaterialButton's</code> width is set to fit the text content, but it doesn't seem to be considering this.</p>\n<p><a href=\"https://i.stack.imgur.com/ZhiI7.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/ZhiI7.png\" alt=\"enter image description here\" /></a></p>\n<p>How to fix this issue without using <code>android:layout_width=&quot;match_parent&quot;</code></p>\n<p>What I want :</p>\n<p><a href=\"https://i.stack.imgur.com/8Gg85.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/8Gg85.png\" alt=\"enter image description here\" /></a></p>\n"},{"tags":["java","spring","spring-boot","spring-data-jpa","nullpointerexception"],"comments":[{"owner":{"account_id":39208,"reputation":251240,"user_id":112968,"accept_rate":68,"display_name":"knittl"},"score":0,"creation_date":1694980237,"post_id":77123326,"comment_id":135959553,"body_markdown":"Does this answer your question? [What is a NullPointerException, and how do I fix it?](https://stackoverflow.com/questions/218384/what-is-a-nullpointerexception-and-how-do-i-fix-it)","body":"Does this answer your question? <a href=\"https://stackoverflow.com/questions/218384/what-is-a-nullpointerexception-and-how-do-i-fix-it\">What is a NullPointerException, and how do I fix it?</a>"},{"owner":{"account_id":29467820,"reputation":1,"user_id":22581054,"display_name":"l1rik"},"score":0,"creation_date":1694980486,"post_id":77123326,"comment_id":135959586,"body_markdown":"Nope, this answer is not working for my qustion","body":"Nope, this answer is not working for my qustion"},{"owner":{"account_id":794766,"reputation":158675,"user_id":871026,"accept_rate":76,"display_name":"Reimeus"},"score":0,"creation_date":1694981966,"post_id":77123326,"comment_id":135959773,"body_markdown":"How is `UserPostController` created?","body":"How is <code>UserPostController</code> created?"},{"owner":{"account_id":29467820,"reputation":1,"user_id":22581054,"display_name":"l1rik"},"score":0,"creation_date":1694982454,"post_id":77123326,"comment_id":135959827,"body_markdown":"Right click on package in IDEA -&gt; Java Class -&gt; set name class","body":"Right click on package in IDEA -&gt; Java Class -&gt; set name class"},{"owner":{"account_id":24440940,"reputation":3122,"user_id":18364656,"display_name":"Andrei Lisa"},"score":0,"creation_date":1695027615,"post_id":77123326,"comment_id":135964196,"body_markdown":"rename the `repository` names from `public interface usersRepository` to `public interface UsersRepository` and also from `public interface postsRepository ` to `public interface PostsRepository ` it is going to fix the problem.","body":"rename the <code>repository</code> names from <code>public interface usersRepository</code> to <code>public interface UsersRepository</code> and also from <code>public interface postsRepository </code> to <code>public interface PostsRepository </code> it is going to fix the problem."},{"owner":{"account_id":29467820,"reputation":1,"user_id":22581054,"display_name":"l1rik"},"score":0,"creation_date":1695049985,"post_id":77123326,"comment_id":135968910,"body_markdown":"Rename names repositories didn&#39;t fix the problem","body":"Rename names repositories didn&#39;t fix the problem"},{"owner":{"account_id":24440940,"reputation":3122,"user_id":18364656,"display_name":"Andrei Lisa"},"score":0,"creation_date":1695062903,"post_id":77123326,"comment_id":135971330,"body_markdown":"please follow [Naming Convention](https://www.oracle.com/java/technologies/javase/codeconventions-namingconventions.html) and all will work great and also [Bean Naming Convention](https://docs.spring.io/spring-framework/docs/5.2.3.RELEASE/spring-framework-reference/core.html#beans-beanname)","body":"please follow <a href=\"https://www.oracle.com/java/technologies/javase/codeconventions-namingconventions.html\" rel=\"nofollow noreferrer\">Naming Convention</a> and all will work great and also <a href=\"https://docs.spring.io/spring-framework/docs/5.2.3.RELEASE/spring-framework-reference/core.html#beans-beanname\" rel=\"nofollow noreferrer\">Bean Naming Convention</a>"}],"owner":{"account_id":29467820,"reputation":1,"user_id":22581054,"display_name":"l1rik"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":72,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1694991980,"creation_date":1694979259,"question_id":77123326,"body_markdown":"Its controller for CRUD-operation with Many-To-Many table, I have project where code look like this, but I change JPARepositories and Models for this controller, which he need.\r\n\r\nI try open this controller, which use JPARepositories usersRepository and postsRepository\r\n\r\n\r\n```\r\npackage com.example.lab3.controllers;\r\n\r\nimport com.example.lab3.models.posts;\r\nimport com.example.lab3.models.roleEnum;\r\nimport com.example.lab3.models.users;\r\nimport com.example.lab3.repositories.postsRepository;\r\nimport com.example.lab3.repositories.usersRepository;\r\nimport org.springframework.beans.factory.annotation.Autowired;\r\nimport org.springframework.security.access.prepost.PreAuthorize;\r\nimport org.springframework.stereotype.Controller;\r\nimport org.springframework.ui.Model;\r\nimport org.springframework.web.bind.annotation.*;\r\n\r\nimport java.util.ArrayList;\r\nimport java.util.Collections;\r\nimport java.util.List;\r\n\r\n@Controller\r\n@RequestMapping(&quot;/admin/employee&quot;)\r\n@PreAuthorize(&quot;hasAnyAuthority(&#39;ADMIN&#39;, &#39;EMPLOYEE&#39;)&quot;)\r\npublic class UserPostController {\r\n    @Autowired\r\n    private final usersRepository repository;\r\n    @Autowired\r\n    private final postsRepository repositoryPosts;\r\n    @Autowired\r\n    public UserPostController(usersRepository repository, postsRepository repositoryPosts){\r\n        this.repository = repository;\r\n        this.repositoryPosts = repositoryPosts;\r\n    }\r\n\r\n    @GetMapping(&quot;/user/post/add&quot;)\r\n    private String Main(Model model){\r\n        List&lt;users&gt; usersCheck = repository.findAll();\r\n        List&lt;users&gt; employees  = new ArrayList&lt;users&gt;();\r\n\r\n        for (users item: usersCheck) {\r\n            if(item.getRoles().equals(Collections.singleton(roleEnum.EMPLOYEE))){\r\n                employees.add(item);\r\n            }\r\n        }\r\n\r\n        Iterable&lt;users&gt; users = employees;\r\n        model.addAttribute(&quot;users&quot;, users);\r\n        Iterable&lt;posts&gt; posts = repositoryPosts.findAll();\r\n        model.addAttribute(&quot;posts&quot;, posts);\r\n        return &quot;user_post_add&quot;;\r\n    }\r\n\r\n    @PostMapping(&quot;/user/post/add&quot;)\r\n    public String blogPostAdd(@RequestParam Long user, @RequestParam Long post, Model model)\r\n    {\r\n        users user2 = repository.findById(user).orElseThrow();\r\n        posts posts2 = repositoryPosts.findById(post).orElseThrow();\r\n        user2.getPosts().add(posts2);\r\n        repository.save(user2);\r\n        List&lt;users&gt; usersCheck = repository.findAll();\r\n        List&lt;users&gt; employees  = new ArrayList&lt;users&gt;();\r\n\r\n        for (users item: usersCheck) {\r\n            if(item.getRoles().equals(Collections.singleton(roleEnum.EMPLOYEE))){\r\n                employees.add(item);\r\n            }\r\n        }\r\n\r\n        Iterable&lt;users&gt; users = employees;\r\n        model.addAttribute(&quot;users&quot;, users);\r\n        return &quot;redirect:/users&quot;;\r\n    }\r\n\r\n    @GetMapping(&quot;/user/{id_user}/{id_post}/remove&quot;)\r\n    public  String employeeDelete(@PathVariable(value = &quot;id_user&quot;) long id_user, @PathVariable(value = &quot;id_post&quot;) Long id_post, Model model)\r\n    {\r\n        users user = repository.findById(id_user).orElseThrow();\r\n        posts post = repositoryPosts.findById(id_post).orElseThrow();\r\n        user.getPosts().remove(post);\r\n        repository.save(user);\r\n        model.addAttribute(&quot;users&quot;, repository.findAll());\r\n        return &quot;redirect:/users&quot;;\r\n    }\r\n}\r\n```\r\nHow you can see, I use annotaion @Autowired on class constructor, but I also get NULL-exception\r\n\r\n\r\n```\r\nCannot invoke &quot;com.example.lab3.repositories.usersRepository.findAll()&quot; because &quot;this.repository&quot; is null\r\n\tat com.example.lab3.controllers.UserPostController.Main(UserPostController.java:34) ~[classes/:na]\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77) ~[na:na]\r\n\tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:568) ~[na:na]\r\n\tat org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:197) ~[spring-web-5.3.9.jar:5.3.9]\r\n\tat org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:141) ~[spring-web-5.3.9.jar:5.3.9]\r\n\tat org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:106) ~[spring-webmvc-5.3.9.jar:5.3.9]\r\n\tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895) ~[spring-webmvc-5.3.9.jar:5.3.9]\r\n\tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808) ~[spring-webmvc-5.3.9.jar:5.3.9]\r\n\tat org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-5.3.9.jar:5.3.9]\r\n\tat org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1064) ~[spring-webmvc-5.3.9.jar:5.3.9]\r\n\tat org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:963) ~[spring-webmvc-5.3.9.jar:5.3.9]\r\n\tat org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006) ~[spring-webmvc-5.3.9.jar:5.3.9]\r\n\tat org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:898) ~[spring-webmvc-5.3.9.jar:5.3.9]\r\n\tat javax.servlet.http.HttpServlet.service(HttpServlet.java:655) ~[tomcat-embed-core-9.0.52.jar:4.0.FR]\r\n\tat org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883) ~[spring-webmvc-5.3.9.jar:5.3.9]\r\n\tat javax.servlet.http.HttpServlet.service(HttpServlet.java:764) ~[tomcat-embed-core-9.0.52.jar:4.0.FR]\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:227) ~[tomcat-embed-core-9.0.52.jar:9.0.52]\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-9.0.52.jar:9.0.52]\r\n\tat org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53) ~[tomcat-embed-websocket-9.0.52.jar:9.0.52]\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) ~[tomcat-embed-core-9.0.52.jar:9.0.52]\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-9.0.52.jar:9.0.52]\r\n\tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:327) ~[spring-security-web-5.5.2.jar:5.5.2]\r\n\tat org.springframework.security.web.access.intercept.FilterSecurityInterceptor.invoke(FilterSecurityInterceptor.java:115) ~[spring-security-web-5.5.2.jar:5.5.2]\r\n\tat org.springframework.security.web.access.intercept.FilterSecurityInterceptor.doFilter(FilterSecurityInterceptor.java:81) ~[spring-security-web-5.5.2.jar:5.5.2]\r\n\tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) ~[spring-security-web-5.5.2.jar:5.5.2]\r\n\tat org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:121) ~[spring-security-web-5.5.2.jar:5.5.2]\r\n\tat org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:115) ~[spring-security-web-5.5.2.jar:5.5.2]\r\n\tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) ~[spring-security-web-5.5.2.jar:5.5.2]\r\n\tat org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:126) ~[spring-security-web-5.5.2.jar:5.5.2]\r\n\tat org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:81) ~[spring-security-web-5.5.2.jar:5.5.2]\r\n\tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) ~[spring-security-web-5.5.2.jar:5.5.2]\r\n\tat org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:105) ~[spring-security-web-5.5.2.jar:5.5.2]\r\n\tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) ~[spring-security-web-5.5.2.jar:5.5.2]\r\n\tat org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:149) ~[spring-security-web-5.5.2.jar:5.5.2]\r\n\tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) ~[spring-security-web-5.5.2.jar:5.5.2]\r\n\tat org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63) ~[spring-security-web-5.5.2.jar:5.5.2]\r\n\tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) ~[spring-security-web-5.5.2.jar:5.5.2]\r\n\tat org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:218) ~[spring-security-web-5.5.2.jar:5.5.2]\r\n\tat org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:212) ~[spring-security-web-5.5.2.jar:5.5.2]\r\n\tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) ~[spring-security-web-5.5.2.jar:5.5.2]\r\n\tat org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:103) ~[spring-security-web-5.5.2.jar:5.5.2]\r\n\tat org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:89) ~[spring-security-web-5.5.2.jar:5.5.2]\r\n\tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) ~[spring-security-web-5.5.2.jar:5.5.2]\r\n\tat org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90) ~[spring-security-web-5.5.2.jar:5.5.2]\r\n\tat org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75) ~[spring-security-web-5.5.2.jar:5.5.2]\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119) ~[spring-web-5.3.9.jar:5.3.9]\r\n\tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) ~[spring-security-web-5.5.2.jar:5.5.2]\r\n\tat org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:110) ~[spring-security-web-5.5.2.jar:5.5.2]\r\n\tat org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:80) ~[spring-security-web-5.5.2.jar:5.5.2]\r\n\tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) ~[spring-security-web-5.5.2.jar:5.5.2]\r\n\tat org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:55) ~[spring-security-web-5.5.2.jar:5.5.2]\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119) ~[spring-web-5.3.9.jar:5.3.9]\r\n\tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) ~[spring-security-web-5.5.2.jar:5.5.2]\r\n\tat org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:211) ~[spring-security-web-5.5.2.jar:5.5.2]\r\n\tat org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:183) ~[spring-security-web-5.5.2.jar:5.5.2]\r\n\tat org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:358) ~[spring-web-5.3.9.jar:5.3.9]\r\n\tat org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:271) ~[spring-web-5.3.9.jar:5.3.9]\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) ~[tomcat-embed-core-9.0.52.jar:9.0.52]\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-9.0.52.jar:9.0.52]\r\n\tat org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-5.3.9.jar:5.3.9]\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119) ~[spring-web-5.3.9.jar:5.3.9]\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) ~[tomcat-embed-core-9.0.52.jar:9.0.52]\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-9.0.52.jar:9.0.52]\r\n\tat org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-5.3.9.jar:5.3.9]\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119) ~[spring-web-5.3.9.jar:5.3.9]\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) ~[tomcat-embed-core-9.0.52.jar:9.0.52]\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-9.0.52.jar:9.0.52]\r\n\tat org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-5.3.9.jar:5.3.9]\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119) ~[spring-web-5.3.9.jar:5.3.9]\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) ~[tomcat-embed-core-9.0.52.jar:9.0.52]\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-9.0.52.jar:9.0.52]\r\n\tat org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:197) ~[tomcat-embed-core-9.0.52.jar:9.0.52]\r\n\tat org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97) ~[tomcat-embed-core-9.0.52.jar:9.0.52]\r\n\tat org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:542) ~[tomcat-embed-core-9.0.52.jar:9.0.52]\r\n\tat org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:135) ~[tomcat-embed-core-9.0.52.jar:9.0.52]\r\n\tat org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92) ~[tomcat-embed-core-9.0.52.jar:9.0.52]\r\n\tat org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78) ~[tomcat-embed-core-9.0.52.jar:9.0.52]\r\n\tat org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:357) ~[tomcat-embed-core-9.0.52.jar:9.0.52]\r\n\tat org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:382) ~[tomcat-embed-core-9.0.52.jar:9.0.52]\r\n\tat org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65) ~[tomcat-embed-core-9.0.52.jar:9.0.52]\r\n\tat org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:893) ~[tomcat-embed-core-9.0.52.jar:9.0.52]\r\n\tat org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1726) ~[tomcat-embed-core-9.0.52.jar:9.0.52]\r\n\tat org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49) ~[tomcat-embed-core-9.0.52.jar:9.0.52]\r\n\tat org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191) ~[tomcat-embed-core-9.0.52.jar:9.0.52]\r\n\tat org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659) ~[tomcat-embed-core-9.0.52.jar:9.0.52]\r\n\tat org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61) ~[tomcat-embed-core-9.0.52.jar:9.0.52]\r\n\tat java.base/java.lang.Thread.run(Thread.java:833) ~[na:na]\r\n\r\n```\r\n\r\nusersRepository:\r\n\r\n\r\n```\r\npackage com.example.lab3.repositories;\r\n\r\nimport com.example.lab3.models.users;\r\nimport org.springframework.data.jpa.repository.JpaRepository;\r\n\r\npublic interface usersRepository extends JpaRepository&lt;users, Long&gt; {\r\n\r\n}\r\n\r\n```\r\npostsRepository:\r\n\r\n\r\n```\r\npackage com.example.lab3.repositories;\r\n\r\nimport com.example.lab3.models.posts;\r\nimport org.springframework.data.jpa.repository.JpaRepository;\r\n\r\npublic interface postsRepository extends JpaRepository&lt;posts, Long&gt; {\r\n}\r\n\r\n```\r\n\r\n\r\n\r\n\r\nI read some qustions with this problem on stackoverflow, but they didn&#39;t work for me, and I also see this exception. I try change @Autowired, from contstructor to parameters, try write @Autowired for all of them, try write @PostContstructor, but its didn&#39;t work.\r\n\r\nUPD: I also have any controllers for CRUD-operation on tables and I \r\ninitializing this repositories too (for UserController and PostController) and in this controllers repositories is working, i give them name same that I gave in this UserPostController, can was problem with this? But I trying rename thems and recreate Java-class and controller still don&#39;t working, this same exception","title":"Cannot invoke com.example.lab3.repositories.shops Repository.findAll() because this.repository is null","body":"<p>Its controller for CRUD-operation with Many-To-Many table, I have project where code look like this, but I change JPARepositories and Models for this controller, which he need.</p>\n<p>I try open this controller, which use JPARepositories usersRepository and postsRepository</p>\n<pre><code>package com.example.lab3.controllers;\n\nimport com.example.lab3.models.posts;\nimport com.example.lab3.models.roleEnum;\nimport com.example.lab3.models.users;\nimport com.example.lab3.repositories.postsRepository;\nimport com.example.lab3.repositories.usersRepository;\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.security.access.prepost.PreAuthorize;\nimport org.springframework.stereotype.Controller;\nimport org.springframework.ui.Model;\nimport org.springframework.web.bind.annotation.*;\n\nimport java.util.ArrayList;\nimport java.util.Collections;\nimport java.util.List;\n\n@Controller\n@RequestMapping(&quot;/admin/employee&quot;)\n@PreAuthorize(&quot;hasAnyAuthority('ADMIN', 'EMPLOYEE')&quot;)\npublic class UserPostController {\n    @Autowired\n    private final usersRepository repository;\n    @Autowired\n    private final postsRepository repositoryPosts;\n    @Autowired\n    public UserPostController(usersRepository repository, postsRepository repositoryPosts){\n        this.repository = repository;\n        this.repositoryPosts = repositoryPosts;\n    }\n\n    @GetMapping(&quot;/user/post/add&quot;)\n    private String Main(Model model){\n        List&lt;users&gt; usersCheck = repository.findAll();\n        List&lt;users&gt; employees  = new ArrayList&lt;users&gt;();\n\n        for (users item: usersCheck) {\n            if(item.getRoles().equals(Collections.singleton(roleEnum.EMPLOYEE))){\n                employees.add(item);\n            }\n        }\n\n        Iterable&lt;users&gt; users = employees;\n        model.addAttribute(&quot;users&quot;, users);\n        Iterable&lt;posts&gt; posts = repositoryPosts.findAll();\n        model.addAttribute(&quot;posts&quot;, posts);\n        return &quot;user_post_add&quot;;\n    }\n\n    @PostMapping(&quot;/user/post/add&quot;)\n    public String blogPostAdd(@RequestParam Long user, @RequestParam Long post, Model model)\n    {\n        users user2 = repository.findById(user).orElseThrow();\n        posts posts2 = repositoryPosts.findById(post).orElseThrow();\n        user2.getPosts().add(posts2);\n        repository.save(user2);\n        List&lt;users&gt; usersCheck = repository.findAll();\n        List&lt;users&gt; employees  = new ArrayList&lt;users&gt;();\n\n        for (users item: usersCheck) {\n            if(item.getRoles().equals(Collections.singleton(roleEnum.EMPLOYEE))){\n                employees.add(item);\n            }\n        }\n\n        Iterable&lt;users&gt; users = employees;\n        model.addAttribute(&quot;users&quot;, users);\n        return &quot;redirect:/users&quot;;\n    }\n\n    @GetMapping(&quot;/user/{id_user}/{id_post}/remove&quot;)\n    public  String employeeDelete(@PathVariable(value = &quot;id_user&quot;) long id_user, @PathVariable(value = &quot;id_post&quot;) Long id_post, Model model)\n    {\n        users user = repository.findById(id_user).orElseThrow();\n        posts post = repositoryPosts.findById(id_post).orElseThrow();\n        user.getPosts().remove(post);\n        repository.save(user);\n        model.addAttribute(&quot;users&quot;, repository.findAll());\n        return &quot;redirect:/users&quot;;\n    }\n}\n</code></pre>\n<p>How you can see, I use annotaion @Autowired on class constructor, but I also get NULL-exception</p>\n<pre><code>Cannot invoke &quot;com.example.lab3.repositories.usersRepository.findAll()&quot; because &quot;this.repository&quot; is null\n    at com.example.lab3.controllers.UserPostController.Main(UserPostController.java:34) ~[classes/:na]\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77) ~[na:na]\n    at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]\n    at java.base/java.lang.reflect.Method.invoke(Method.java:568) ~[na:na]\n    at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:197) ~[spring-web-5.3.9.jar:5.3.9]\n    at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:141) ~[spring-web-5.3.9.jar:5.3.9]\n    at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:106) ~[spring-webmvc-5.3.9.jar:5.3.9]\n    at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895) ~[spring-webmvc-5.3.9.jar:5.3.9]\n    at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808) ~[spring-webmvc-5.3.9.jar:5.3.9]\n    at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-5.3.9.jar:5.3.9]\n    at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1064) ~[spring-webmvc-5.3.9.jar:5.3.9]\n    at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:963) ~[spring-webmvc-5.3.9.jar:5.3.9]\n    at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006) ~[spring-webmvc-5.3.9.jar:5.3.9]\n    at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:898) ~[spring-webmvc-5.3.9.jar:5.3.9]\n    at javax.servlet.http.HttpServlet.service(HttpServlet.java:655) ~[tomcat-embed-core-9.0.52.jar:4.0.FR]\n    at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883) ~[spring-webmvc-5.3.9.jar:5.3.9]\n    at javax.servlet.http.HttpServlet.service(HttpServlet.java:764) ~[tomcat-embed-core-9.0.52.jar:4.0.FR]\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:227) ~[tomcat-embed-core-9.0.52.jar:9.0.52]\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-9.0.52.jar:9.0.52]\n    at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53) ~[tomcat-embed-websocket-9.0.52.jar:9.0.52]\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) ~[tomcat-embed-core-9.0.52.jar:9.0.52]\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-9.0.52.jar:9.0.52]\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:327) ~[spring-security-web-5.5.2.jar:5.5.2]\n    at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.invoke(FilterSecurityInterceptor.java:115) ~[spring-security-web-5.5.2.jar:5.5.2]\n    at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.doFilter(FilterSecurityInterceptor.java:81) ~[spring-security-web-5.5.2.jar:5.5.2]\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) ~[spring-security-web-5.5.2.jar:5.5.2]\n    at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:121) ~[spring-security-web-5.5.2.jar:5.5.2]\n    at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:115) ~[spring-security-web-5.5.2.jar:5.5.2]\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) ~[spring-security-web-5.5.2.jar:5.5.2]\n    at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:126) ~[spring-security-web-5.5.2.jar:5.5.2]\n    at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:81) ~[spring-security-web-5.5.2.jar:5.5.2]\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) ~[spring-security-web-5.5.2.jar:5.5.2]\n    at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:105) ~[spring-security-web-5.5.2.jar:5.5.2]\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) ~[spring-security-web-5.5.2.jar:5.5.2]\n    at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:149) ~[spring-security-web-5.5.2.jar:5.5.2]\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) ~[spring-security-web-5.5.2.jar:5.5.2]\n    at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63) ~[spring-security-web-5.5.2.jar:5.5.2]\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) ~[spring-security-web-5.5.2.jar:5.5.2]\n    at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:218) ~[spring-security-web-5.5.2.jar:5.5.2]\n    at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:212) ~[spring-security-web-5.5.2.jar:5.5.2]\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) ~[spring-security-web-5.5.2.jar:5.5.2]\n    at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:103) ~[spring-security-web-5.5.2.jar:5.5.2]\n    at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:89) ~[spring-security-web-5.5.2.jar:5.5.2]\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) ~[spring-security-web-5.5.2.jar:5.5.2]\n    at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90) ~[spring-security-web-5.5.2.jar:5.5.2]\n    at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75) ~[spring-security-web-5.5.2.jar:5.5.2]\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119) ~[spring-web-5.3.9.jar:5.3.9]\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) ~[spring-security-web-5.5.2.jar:5.5.2]\n    at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:110) ~[spring-security-web-5.5.2.jar:5.5.2]\n    at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:80) ~[spring-security-web-5.5.2.jar:5.5.2]\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) ~[spring-security-web-5.5.2.jar:5.5.2]\n    at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:55) ~[spring-security-web-5.5.2.jar:5.5.2]\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119) ~[spring-web-5.3.9.jar:5.3.9]\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) ~[spring-security-web-5.5.2.jar:5.5.2]\n    at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:211) ~[spring-security-web-5.5.2.jar:5.5.2]\n    at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:183) ~[spring-security-web-5.5.2.jar:5.5.2]\n    at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:358) ~[spring-web-5.3.9.jar:5.3.9]\n    at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:271) ~[spring-web-5.3.9.jar:5.3.9]\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) ~[tomcat-embed-core-9.0.52.jar:9.0.52]\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-9.0.52.jar:9.0.52]\n    at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-5.3.9.jar:5.3.9]\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119) ~[spring-web-5.3.9.jar:5.3.9]\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) ~[tomcat-embed-core-9.0.52.jar:9.0.52]\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-9.0.52.jar:9.0.52]\n    at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-5.3.9.jar:5.3.9]\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119) ~[spring-web-5.3.9.jar:5.3.9]\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) ~[tomcat-embed-core-9.0.52.jar:9.0.52]\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-9.0.52.jar:9.0.52]\n    at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-5.3.9.jar:5.3.9]\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119) ~[spring-web-5.3.9.jar:5.3.9]\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) ~[tomcat-embed-core-9.0.52.jar:9.0.52]\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-9.0.52.jar:9.0.52]\n    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:197) ~[tomcat-embed-core-9.0.52.jar:9.0.52]\n    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97) ~[tomcat-embed-core-9.0.52.jar:9.0.52]\n    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:542) ~[tomcat-embed-core-9.0.52.jar:9.0.52]\n    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:135) ~[tomcat-embed-core-9.0.52.jar:9.0.52]\n    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92) ~[tomcat-embed-core-9.0.52.jar:9.0.52]\n    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78) ~[tomcat-embed-core-9.0.52.jar:9.0.52]\n    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:357) ~[tomcat-embed-core-9.0.52.jar:9.0.52]\n    at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:382) ~[tomcat-embed-core-9.0.52.jar:9.0.52]\n    at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65) ~[tomcat-embed-core-9.0.52.jar:9.0.52]\n    at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:893) ~[tomcat-embed-core-9.0.52.jar:9.0.52]\n    at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1726) ~[tomcat-embed-core-9.0.52.jar:9.0.52]\n    at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49) ~[tomcat-embed-core-9.0.52.jar:9.0.52]\n    at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191) ~[tomcat-embed-core-9.0.52.jar:9.0.52]\n    at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659) ~[tomcat-embed-core-9.0.52.jar:9.0.52]\n    at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61) ~[tomcat-embed-core-9.0.52.jar:9.0.52]\n    at java.base/java.lang.Thread.run(Thread.java:833) ~[na:na]\n\n</code></pre>\n<p>usersRepository:</p>\n<pre><code>package com.example.lab3.repositories;\n\nimport com.example.lab3.models.users;\nimport org.springframework.data.jpa.repository.JpaRepository;\n\npublic interface usersRepository extends JpaRepository&lt;users, Long&gt; {\n\n}\n\n</code></pre>\n<p>postsRepository:</p>\n<pre><code>package com.example.lab3.repositories;\n\nimport com.example.lab3.models.posts;\nimport org.springframework.data.jpa.repository.JpaRepository;\n\npublic interface postsRepository extends JpaRepository&lt;posts, Long&gt; {\n}\n\n</code></pre>\n<p>I read some qustions with this problem on stackoverflow, but they didn't work for me, and I also see this exception. I try change @Autowired, from contstructor to parameters, try write @Autowired for all of them, try write @PostContstructor, but its didn't work.</p>\n<p>UPD: I also have any controllers for CRUD-operation on tables and I\ninitializing this repositories too (for UserController and PostController) and in this controllers repositories is working, i give them name same that I gave in this UserPostController, can was problem with this? But I trying rename thems and recreate Java-class and controller still don't working, this same exception</p>\n"},{"tags":["java","windows","path","tostring"],"answers":[{"tags":[],"owner":{"account_id":401843,"reputation":89768,"user_id":768644,"display_name":"rzwitserloot"},"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1694989147,"creation_date":1694989147,"answer_id":77123809,"question_id":77123774,"body_markdown":"java __is__ emitting `build\\someFile.txt` as you&#39;d expect. To be specific, java emits a byte sequence to standard out which then goes on a trip. That goes into the OS, the OS sends it to whatever&#39;s hooked up to your java proces&#39;s standard out which at some point presumably takes those bytes, converts it back to a string, and then does something with that. Hopefully in this wild adventure eventually somewhere something turns it into a little picture of some characters and these, eventually, are rendered onto your screen, and from there, into your eyeballs.\r\n\r\nSomething in that wild adventure is applying backslash escaping. Terminals don&#39;t do it, so something else that you did not mention in your question is doing that. Java certainly doesn&#39;t do it. Something else is. If you just write this extremely basic:\r\n\r\n```\r\nclass Test {\r\n  public static void main(String[] args) throws Exception {\r\n    Path x = Path.of(&quot;foo/bar.txt&quot;);\r\n    System.out.println(x);\r\n  }\r\n}\r\n```\r\n\r\nand run that on a stock windows in a stock-standard windows `cmd.exe` terminal that prints `foo\\bar.txt` as you&#39;d expect.\r\n\r\nCheck the chain of apps that are in between the java process and your eyeballs. One of em is messing this up. If you need some help with this process, edit the question and explain in excruciating detail (because you probably don&#39;t know what&#39;s relevant, this mojibake / terminal stuff can be tricky like that) each and every app or thing that could possibly be in between. Are you running this within an IDE? Which one, and how. Are you running this on windows subsystem for linux? Mention that, how you&#39;re doing it, which commands you&#39;re typing in, and so on.\r\n","title":"String of java.nio.file.Path","body":"<p>java <strong>is</strong> emitting <code>build\\someFile.txt</code> as you'd expect. To be specific, java emits a byte sequence to standard out which then goes on a trip. That goes into the OS, the OS sends it to whatever's hooked up to your java proces's standard out which at some point presumably takes those bytes, converts it back to a string, and then does something with that. Hopefully in this wild adventure eventually somewhere something turns it into a little picture of some characters and these, eventually, are rendered onto your screen, and from there, into your eyeballs.</p>\n<p>Something in that wild adventure is applying backslash escaping. Terminals don't do it, so something else that you did not mention in your question is doing that. Java certainly doesn't do it. Something else is. If you just write this extremely basic:</p>\n<pre><code>class Test {\n  public static void main(String[] args) throws Exception {\n    Path x = Path.of(&quot;foo/bar.txt&quot;);\n    System.out.println(x);\n  }\n}\n</code></pre>\n<p>and run that on a stock windows in a stock-standard windows <code>cmd.exe</code> terminal that prints <code>foo\\bar.txt</code> as you'd expect.</p>\n<p>Check the chain of apps that are in between the java process and your eyeballs. One of em is messing this up. If you need some help with this process, edit the question and explain in excruciating detail (because you probably don't know what's relevant, this mojibake / terminal stuff can be tricky like that) each and every app or thing that could possibly be in between. Are you running this within an IDE? Which one, and how. Are you running this on windows subsystem for linux? Mention that, how you're doing it, which commands you're typing in, and so on.</p>\n"}],"owner":{"account_id":1145563,"reputation":1214,"user_id":1128413,"display_name":"alexdlaird"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":80,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":77123809,"answer_count":1,"score":1,"last_activity_date":1694989147,"creation_date":1694988290,"question_id":77123774,"body_markdown":"Can explain what I&#39;m doing wrong and/or missing here. I have `java.nio.file.Path` objects that work fine in my Java application. The only issue is when I try to print them out in logs, and the issue is only present on Windows. When I stringify a `Path` object (or `File` object), I get some path like `build/somefile.txt` on Linux, Unix, Mac, but on Windows it prints as `buildsomefile.txt`. What I would expect to see is `build\\\\somefile.txt`, but instead, the slashes are ommitted on Windows.\r\n\r\nThis is the simple example code that I&#39;ve executed on Mac, Ubuntu, and Windows with Java 11 and Java 17:\r\n\r\n```java\r\nimport java.nio.file.Paths;\r\n\r\nSystem.out.println(Paths.get(&quot;build&quot;, &quot;somefile.txt&quot;));\r\nSystem.out.println(Paths.get(&quot;build&quot;, &quot;somefile.txt&quot;).toFile());\r\nSystem.out.println(Paths.get(&quot;build&quot;, &quot;somefile.txt&quot;).toFile().getPath());\r\n```\r\n\r\nSame behavior if I normalize the path, convert to an absolute path, etc. From [the docs of `Path`](https://docs.oracle.com/javase/8/docs/api/java/nio/file/Path.html#toString--), it looks to me like `toString()` should use `File.separator` here, which is the behavior I do see on non-Windows systems. The docs also do specify that [the Windows `separatorChar`](https://docs.oracle.com/javase/8/docs/api/java/io/File.html#separatorChar) is `\\\\`. Can anyone help me understand what I&#39;m missing here? Thanks!\r\n\r\n**EDIT:**\r\n\r\nThese all also output empty strings:\r\n\r\n```\r\nimport java.nio.file.File;\r\nSystem.out.println(File.separator);\r\nSystem.out.println(File.separatorChar);\r\n```\r\n\r\nIt&#39;s worth noting I&#39;m seeing this in tests, if that is relevent.","title":"String of java.nio.file.Path","body":"<p>Can explain what I'm doing wrong and/or missing here. I have <code>java.nio.file.Path</code> objects that work fine in my Java application. The only issue is when I try to print them out in logs, and the issue is only present on Windows. When I stringify a <code>Path</code> object (or <code>File</code> object), I get some path like <code>build/somefile.txt</code> on Linux, Unix, Mac, but on Windows it prints as <code>buildsomefile.txt</code>. What I would expect to see is <code>build\\\\somefile.txt</code>, but instead, the slashes are ommitted on Windows.</p>\n<p>This is the simple example code that I've executed on Mac, Ubuntu, and Windows with Java 11 and Java 17:</p>\n<pre class=\"lang-java prettyprint-override\"><code>import java.nio.file.Paths;\n\nSystem.out.println(Paths.get(&quot;build&quot;, &quot;somefile.txt&quot;));\nSystem.out.println(Paths.get(&quot;build&quot;, &quot;somefile.txt&quot;).toFile());\nSystem.out.println(Paths.get(&quot;build&quot;, &quot;somefile.txt&quot;).toFile().getPath());\n</code></pre>\n<p>Same behavior if I normalize the path, convert to an absolute path, etc. From <a href=\"https://docs.oracle.com/javase/8/docs/api/java/nio/file/Path.html#toString--\" rel=\"nofollow noreferrer\">the docs of <code>Path</code></a>, it looks to me like <code>toString()</code> should use <code>File.separator</code> here, which is the behavior I do see on non-Windows systems. The docs also do specify that <a href=\"https://docs.oracle.com/javase/8/docs/api/java/io/File.html#separatorChar\" rel=\"nofollow noreferrer\">the Windows <code>separatorChar</code></a> is <code>\\\\</code>. Can anyone help me understand what I'm missing here? Thanks!</p>\n<p><strong>EDIT:</strong></p>\n<p>These all also output empty strings:</p>\n<pre><code>import java.nio.file.File;\nSystem.out.println(File.separator);\nSystem.out.println(File.separatorChar);\n</code></pre>\n<p>It's worth noting I'm seeing this in tests, if that is relevent.</p>\n"},{"tags":["java","python","unix","jython"],"comments":[{"owner":{"account_id":1051236,"reputation":18972,"user_id":1055118,"accept_rate":100,"display_name":"doctorlove"},"score":2,"creation_date":1391715322,"post_id":21612235,"comment_id":32654573,"body_markdown":"You may have `java` installed but that&#39;s not the same as a python module called `java` that you can import in python. What are you really trying to do?","body":"You may have <code>java</code> installed but that&#39;s not the same as a python module called <code>java</code> that you can import in python. What are you really trying to do?"},{"owner":{"account_id":2692215,"reputation":2595,"user_id":2325264,"accept_rate":56,"display_name":"eric chiang"},"score":2,"creation_date":1391715347,"post_id":21612235,"comment_id":32654589,"body_markdown":"You&#39;re attempting to call java from within a python script. So this question doesn&#39;t really make sense","body":"You&#39;re attempting to call java from within a python script. So this question doesn&#39;t really make sense"},{"owner":{"account_id":3977927,"reputation":55,"user_id":3280663,"accept_rate":45,"display_name":"Blogger11"},"score":0,"creation_date":1391715418,"post_id":21612235,"comment_id":32654623,"body_markdown":"Import the python module called java","body":"Import the python module called java"},{"owner":{"account_id":1530005,"reputation":244822,"user_id":1427416,"accept_rate":56,"display_name":"BrenBarn"},"score":0,"creation_date":1391715588,"post_id":21612235,"comment_id":32654750,"body_markdown":"Did you install a Python module called java?","body":"Did you install a Python module called java?"},{"owner":{"account_id":1051236,"reputation":18972,"user_id":1055118,"accept_rate":100,"display_name":"doctorlove"},"score":0,"creation_date":1391716455,"post_id":21612235,"comment_id":32655280,"body_markdown":"You&#39;ve changed the question now. Does `org.python.modules ` exist? Is it on your python path?","body":"You&#39;ve changed the question now. Does <code>org.python.modules </code> exist? Is it on your python path?"},{"owner":{"account_id":3977927,"reputation":55,"user_id":3280663,"accept_rate":45,"display_name":"Blogger11"},"score":1,"creation_date":1391716534,"post_id":21612235,"comment_id":32655341,"body_markdown":"@doctorlove I&#39;m not sure how to check that, how can i do that? The original problem was solved by running this as jython rather than python.","body":"@doctorlove I&#39;m not sure how to check that, how can i do that? The original problem was solved by running this as jython rather than python."},{"owner":{"account_id":3977927,"reputation":55,"user_id":3280663,"accept_rate":45,"display_name":"Blogger11"},"score":0,"creation_date":1391719608,"post_id":21612235,"comment_id":32657241,"body_markdown":"turns out i just needed to do import time rather than #from org.python.modules import time","body":"turns out i just needed to do import time rather than #from org.python.modules import time"}],"answers":[{"tags":[],"owner":{"account_id":3131294,"reputation":103,"user_id":2649009,"accept_rate":50,"display_name":"skymoose"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1475140803,"creation_date":1475140803,"answer_id":39766317,"question_id":21612235,"body_markdown":"The error is misleading here. The problem is likely to be that you dont have permissions in directory /usr/lib/jython-25/cachedir/packages and possibly the parent directory cachedir too. If you look at the first line of the output when wsadmin.sh starts, it actually implies this.","title":"import java ImportError: No module named java","body":"<p>The error is misleading here. The problem is likely to be that you dont have permissions in directory /usr/lib/jython-25/cachedir/packages and possibly the parent directory cachedir too. If you look at the first line of the output when wsadmin.sh starts, it actually implies this.</p>\n"}],"owner":{"account_id":3977927,"reputation":55,"user_id":3280663,"accept_rate":45,"display_name":"Blogger11"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":17047,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"answer_count":1,"score":3,"last_activity_date":1694988105,"creation_date":1391715126,"question_id":21612235,"body_markdown":"I seemed to have hit a roadblock and can&#39;t figure this out at all, can anyone help me figure out why I am unable to import the java module?\r\n\r\nError:\r\n\r\n    Traceback (most recent call last):\r\n      File &quot;./datasource_config.py&quot;, line 3, in ?\r\n        import java\r\n    ImportError: No module named java\r\n\r\n\r\njava:\r\n\r\n    13:30:05 # which java\r\n    /usr/bin/java\r\n\r\n\r\nbeginning of script\r\n\r\n    #!/usr/bin/python\r\n    import sys\r\n    import java\r\n    from java.util import Properties\r\n    from java.io import FileInputStream\r\n    from org.python.modules import time\r\n    lineSep = java.lang.System.getProperty(&#39;line.separator&#39;)\r\n    \r\n    def datasource(cluster,user,password,url,env,jdbc_driver,timeOut,maxConn,minConn,reapTime,unusdTimeout,agedTimeout):\r\n    \r\n        #Declare global variables \r\n        global    AdminConfig \r\n        global    AdminControl\r\n\r\n\r\nCan someone help me determine what this means?\r\n\r\n    13:45:07 # ./jython -v /opt/websphere/datasource_config.py\r\n    *sys-package-mgr*: can&#39;t create package cache dir, &#39;/usr/lib/jython-25/cachedir/packages&#39;\r\n    import: &#39;exceptions&#39; as org.python.core.exceptions in builtin modules\r\n    import: &#39;site&#39; as /usr/lib/jython-25/Lib/site.py\r\n    import: &#39;sys&#39; as sys in builtin modules\r\n    import: &#39;os&#39; as /usr/lib/jython-25/Lib/os.py\r\n    import: &#39;errno&#39; as org.python.modules.errno in builtin modules\r\n    import: &#39;posix&#39; as org.python.modules.posix.PosixModule in builtin modules\r\n    import: &#39;posixpath&#39; as /usr/lib/jython-25/Lib/posixpath.py\r\n    import: &#39;stat&#39; as /usr/lib/jython-25/Lib/stat.py\r\n    import: &#39;Properties&#39; as java class\r\n    import: &#39;FileInputStream&#39; as java class\r\n    Traceback (most recent call last):\r\n      File &quot;/opt/websphere/datasource_config.py&quot;, line 5, in &lt;module&gt;\r\n        from org.python.modules import time\r\n    ImportError: cannot import name time","title":"import java ImportError: No module named java","body":"<p>I seemed to have hit a roadblock and can't figure this out at all, can anyone help me figure out why I am unable to import the java module?</p>\n\n<p>Error:</p>\n\n<pre><code>Traceback (most recent call last):\n  File \"./datasource_config.py\", line 3, in ?\n    import java\nImportError: No module named java\n</code></pre>\n\n<p>java:</p>\n\n<pre><code>13:30:05 # which java\n/usr/bin/java\n</code></pre>\n\n<p>beginning of script</p>\n\n<pre><code>#!/usr/bin/python\nimport sys\nimport java\nfrom java.util import Properties\nfrom java.io import FileInputStream\nfrom org.python.modules import time\nlineSep = java.lang.System.getProperty('line.separator')\n\ndef datasource(cluster,user,password,url,env,jdbc_driver,timeOut,maxConn,minConn,reapTime,unusdTimeout,agedTimeout):\n\n    #Declare global variables \n    global    AdminConfig \n    global    AdminControl\n</code></pre>\n\n<p>Can someone help me determine what this means?</p>\n\n<pre><code>13:45:07 # ./jython -v /opt/websphere/datasource_config.py\n*sys-package-mgr*: can't create package cache dir, '/usr/lib/jython-25/cachedir/packages'\nimport: 'exceptions' as org.python.core.exceptions in builtin modules\nimport: 'site' as /usr/lib/jython-25/Lib/site.py\nimport: 'sys' as sys in builtin modules\nimport: 'os' as /usr/lib/jython-25/Lib/os.py\nimport: 'errno' as org.python.modules.errno in builtin modules\nimport: 'posix' as org.python.modules.posix.PosixModule in builtin modules\nimport: 'posixpath' as /usr/lib/jython-25/Lib/posixpath.py\nimport: 'stat' as /usr/lib/jython-25/Lib/stat.py\nimport: 'Properties' as java class\nimport: 'FileInputStream' as java class\nTraceback (most recent call last):\n  File \"/opt/websphere/datasource_config.py\", line 5, in &lt;module&gt;\n    from org.python.modules import time\nImportError: cannot import name time\n</code></pre>\n"},{"tags":["java","macos","zsh"],"answers":[{"tags":[],"owner":{"account_id":5224617,"reputation":6216,"user_id":4177009,"display_name":"Ture P&#229;lsson"},"down_vote_count":0,"up_vote_count":18,"is_accepted":true,"score":18,"last_activity_date":1652080260,"creation_date":1631773495,"answer_id":69203305,"question_id":69203176,"body_markdown":"The `$(foo)` bit means, loosely, &quot;run `foo` as a program, then insert its output here and go on as if I had typed it&quot;, which is not what you want here. Just do\r\n\r\n    export JAVA_HOME=/Library/Java/...\r\n\r\nThe `$()` bit is useful when you use the Mac&#39;s Java selection mechanism, and run e.g. \r\n\r\n    export JAVA_HOME=$(/usr/libexec/java_home -v16)\r\n\r\nIn that case, you&#39;re running a program, and setting `JAVA_HOME` to the output of that program.","title":"Permission Error When Exporting to $JAVA_HOME on MacOS Big Sur","body":"<p>The <code>$(foo)</code> bit means, loosely, &quot;run <code>foo</code> as a program, then insert its output here and go on as if I had typed it&quot;, which is not what you want here. Just do</p>\n<pre><code>export JAVA_HOME=/Library/Java/...\n</code></pre>\n<p>The <code>$()</code> bit is useful when you use the Mac's Java selection mechanism, and run e.g.</p>\n<pre><code>export JAVA_HOME=$(/usr/libexec/java_home -v16)\n</code></pre>\n<p>In that case, you're running a program, and setting <code>JAVA_HOME</code> to the output of that program.</p>\n"},{"tags":[],"owner":{"account_id":20492458,"reputation":31,"user_id":15038236,"display_name":"Tomm Matthis"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1671289583,"creation_date":1671289583,"answer_id":74835147,"question_id":69203176,"body_markdown":"Ran into the same issue today, and figured out out to fix it.\r\nRemember to close/open your shell (or resource it) after making the change in your profile script.\r\n\r\nIn Z shell, the export statement is a bit different than bash, as you can set the environment variable without the $().\r\n\r\nInstead of: \r\n*export JAVA_HOME=$(/Library/Java/JavaVirtualMachines/amazon-corretto-8.jdk/Contents/Home)*\r\n\r\nUse the simpler zsh form with quote marks for the path: \r\n*export JAVA_HOME=&quot;/Library/Java/JavaVirtualMachines/amazon-corretto-8.jdk/Contents/Home&quot;*  ","title":"Permission Error When Exporting to $JAVA_HOME on MacOS Big Sur","body":"<p>Ran into the same issue today, and figured out out to fix it.\nRemember to close/open your shell (or resource it) after making the change in your profile script.</p>\n<p>In Z shell, the export statement is a bit different than bash, as you can set the environment variable without the $().</p>\n<p>Instead of:\n<em>export JAVA_HOME=$(/Library/Java/JavaVirtualMachines/amazon-corretto-8.jdk/Contents/Home)</em></p>\n<p>Use the simpler zsh form with quote marks for the path:\n<em>export JAVA_HOME=&quot;/Library/Java/JavaVirtualMachines/amazon-corretto-8.jdk/Contents/Home&quot;</em></p>\n"},{"tags":[],"owner":{"account_id":5868306,"reputation":120,"user_id":4621469,"accept_rate":75,"display_name":"Adam Bissonnette"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1694988054,"creation_date":1694988054,"answer_id":77123763,"question_id":69203176,"body_markdown":"Posting my fix in case it helps some else (or me the next time I run into this issue). This was done on a 2021 M1 Macbook Pro (Ventura 13.3.1 a) - if you&#39;re reading this in 2-3 years I hope this saves you some time.\r\n\r\nI was running into this permission issue trying to get Expo&#39;s native module tutorial working (https://docs.expo.dev/modules/native-module-tutorial/) - iOS had its own issues with ruby/gem version chaos and with Android I had trouble with the above and when setting $JAVA_HOME I was running into the issue above - I wanted to configure the global version of JAVA so that Expo could build properly.\r\n\r\nI managed to get past the error with JENV (https://www.jenv.be/) and using Android Studio to get a few versions of the JDK to play with (`Settings -&gt; Build, Execution, Deployment -&gt; Build Tools -&gt; Gradle`) - you can easily download new Gradle JDKs here.\r\n\r\nOpenjdk Version 20 which is what I had installed previously (via brew) seemed to have compiler issues with expo&#39;s code so I installed Corretto v17 (via Android Studio). In Android Studio I could see the Home directory of this JDK so I was able to add it to the available versions to JENV (`jenv add ~~~jdk home directory here~~~`) and then set that as the global version `jenv global 17` - from there the $JAVA_HOME issues seemed to be resolved as the compiler was able to find and use the correct version.","title":"Permission Error When Exporting to $JAVA_HOME on MacOS Big Sur","body":"<p>Posting my fix in case it helps some else (or me the next time I run into this issue). This was done on a 2021 M1 Macbook Pro (Ventura 13.3.1 a) - if you're reading this in 2-3 years I hope this saves you some time.</p>\n<p>I was running into this permission issue trying to get Expo's native module tutorial working (<a href=\"https://docs.expo.dev/modules/native-module-tutorial/\" rel=\"nofollow noreferrer\">https://docs.expo.dev/modules/native-module-tutorial/</a>) - iOS had its own issues with ruby/gem version chaos and with Android I had trouble with the above and when setting $JAVA_HOME I was running into the issue above - I wanted to configure the global version of JAVA so that Expo could build properly.</p>\n<p>I managed to get past the error with JENV (<a href=\"https://www.jenv.be/\" rel=\"nofollow noreferrer\">https://www.jenv.be/</a>) and using Android Studio to get a few versions of the JDK to play with (<code>Settings -&gt; Build, Execution, Deployment -&gt; Build Tools -&gt; Gradle</code>) - you can easily download new Gradle JDKs here.</p>\n<p>Openjdk Version 20 which is what I had installed previously (via brew) seemed to have compiler issues with expo's code so I installed Corretto v17 (via Android Studio). In Android Studio I could see the Home directory of this JDK so I was able to add it to the available versions to JENV (<code>jenv add ~~~jdk home directory here~~~</code>) and then set that as the global version <code>jenv global 17</code> - from there the $JAVA_HOME issues seemed to be resolved as the compiler was able to find and use the correct version.</p>\n"}],"owner":{"account_id":22767316,"reputation":103,"user_id":16925173,"display_name":"user16925173"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":14886,"favorite_count":0,"down_vote_count":0,"up_vote_count":10,"accepted_answer_id":69203305,"answer_count":3,"score":10,"last_activity_date":1694988054,"creation_date":1631772751,"question_id":69203176,"body_markdown":"Whenever I try to set my Java Home `export JAVA_HOME=$(/Library/Java/JavaVirtualMachines/amazon-corretto-8.jdk/Contents/Home)` in my .zshenv or .zshrc files, I get an `/Users/{USER NAME HERE}/.zshenv:1: permission denied: /Library/Java/JavaVirtualMachines/amazon-corretto-8.jdk/Contents/Home` error when starting up my terminal. In fact, I can&#39;t seem to be able to export anything (for example, `export TEST=$(/Users/{USER NAME HERE})` gives me a `zsh: permission denied: /Users/{USER NAME HERE}` error. I already gave full disk access in system preferences, but that doesn&#39;t seem to be working either. I am the only user on my computer.","title":"Permission Error When Exporting to $JAVA_HOME on MacOS Big Sur","body":"<p>Whenever I try to set my Java Home <code>export JAVA_HOME=$(/Library/Java/JavaVirtualMachines/amazon-corretto-8.jdk/Contents/Home)</code> in my .zshenv or .zshrc files, I get an <code>/Users/{USER NAME HERE}/.zshenv:1: permission denied: /Library/Java/JavaVirtualMachines/amazon-corretto-8.jdk/Contents/Home</code> error when starting up my terminal. In fact, I can't seem to be able to export anything (for example, <code>export TEST=$(/Users/{USER NAME HERE})</code> gives me a <code>zsh: permission denied: /Users/{USER NAME HERE}</code> error. I already gave full disk access in system preferences, but that doesn't seem to be working either. I am the only user on my computer.</p>\n"},{"tags":["java","groovy","visual-studio-code"],"comments":[{"owner":{"account_id":444493,"reputation":151920,"user_id":836330,"display_name":"Mark"},"score":0,"creation_date":1504655801,"post_id":46061857,"comment_id":79090519,"body_markdown":"Did you reload/restart Vscode after disabling all the extensions?","body":"Did you reload/restart Vscode after disabling all the extensions?"},{"owner":{"account_id":195224,"reputation":1369,"user_id":438001,"accept_rate":24,"display_name":"J&#246;rg Rech"},"score":0,"creation_date":1504665603,"post_id":46061857,"comment_id":79092621,"body_markdown":"Yes, I did restart VS Code.","body":"Yes, I did restart VS Code."},{"owner":{"account_id":15396644,"reputation":25733,"user_id":11107541,"display_name":"starball"},"score":0,"creation_date":1694987155,"post_id":46061857,"comment_id":135960314,"body_markdown":"related generalized question (not specific to Java): [How can I easily toggle display of problem underlining in VS Code editor panels?](https://stackoverflow.com/q/74753185/11107541)","body":"related generalized question (not specific to Java): <a href=\"https://stackoverflow.com/q/74753185/11107541\">How can I easily toggle display of problem underlining in VS Code editor panels?</a>"}],"answers":[{"tags":[],"owner":{"account_id":9525460,"reputation":1429,"user_id":7103765,"accept_rate":80,"display_name":"Ajinkya Dhote"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1504639133,"creation_date":1504639133,"answer_id":46061931,"question_id":46061857,"body_markdown":"You should disable the linter, which is by default enable in VS Code.\r\nTo do so you can go to File-&gt; Prefrences -&gt; setting ","title":"How to disable error highlighting for Java code in VS Code?","body":"<p>You should disable the linter, which is by default enable in VS Code.\nTo do so you can go to File-> Prefrences -> setting </p>\n"},{"tags":[],"owner":{"account_id":444493,"reputation":151920,"user_id":836330,"display_name":"Mark"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1504655812,"creation_date":1504655812,"answer_id":46064856,"question_id":46061857,"body_markdown":"I wouldn&#39;t think this is necessary but you might try:\r\n\r\n    &quot;files.associations&quot;: {\r\n       &quot;.groovy&quot;: &quot;groovy&quot;\r\n    }\r\n\r\nin your user settings, assuming your file extension is .groovy.  If it is something else, just set it to &quot;groovy&quot; as well.  When I create a .groovy file with your content or gibberish I get no error linting at all.  What is your file extension and what does Vscode call it in the bottom right of the editor?  You can click on that file type to change its file associations.  See [modifying Vscode file extensions][1]. \r\n\r\n\r\n  [1]: https://code.visualstudio.com/docs/languages/overview#_adding-a-file-extension-to-a-language","title":"How to disable error highlighting for Java code in VS Code?","body":"<p>I wouldn't think this is necessary but you might try:</p>\n\n<pre><code>\"files.associations\": {\n   \".groovy\": \"groovy\"\n}\n</code></pre>\n\n<p>in your user settings, assuming your file extension is .groovy.  If it is something else, just set it to \"groovy\" as well.  When I create a .groovy file with your content or gibberish I get no error linting at all.  What is your file extension and what does Vscode call it in the bottom right of the editor?  You can click on that file type to change its file associations.  See <a href=\"https://code.visualstudio.com/docs/languages/overview#_adding-a-file-extension-to-a-language\" rel=\"nofollow noreferrer\">modifying Vscode file extensions</a>. </p>\n"},{"tags":[],"owner":{"account_id":2028324,"reputation":10542,"user_id":1812732,"accept_rate":72,"display_name":"John Henckel"},"down_vote_count":1,"up_vote_count":12,"is_accepted":false,"score":11,"last_activity_date":1531428627,"creation_date":1531428627,"answer_id":51314245,"question_id":46061857,"body_markdown":"open your preferences file and add this\r\n\r\n    &quot;java.validate.enable&quot;: false\r\n\r\nI didn&#39;t try it for java, but it works for typescript.","title":"How to disable error highlighting for Java code in VS Code?","body":"<p>open your preferences file and add this</p>\n\n<pre><code>\"java.validate.enable\": false\n</code></pre>\n\n<p>I didn't try it for java, but it works for typescript.</p>\n"},{"tags":[],"owner":{"account_id":14267353,"reputation":109,"user_id":10306011,"display_name":"Anacarde"},"down_vote_count":3,"up_vote_count":9,"is_accepted":false,"score":6,"last_activity_date":1568734333,"creation_date":1568733399,"answer_id":57977345,"question_id":46061857,"body_markdown":"I found this:\r\n\r\n    &quot;problems.decorations.enabled&quot;: false,","title":"How to disable error highlighting for Java code in VS Code?","body":"<p>I found this:</p>\n\n<pre><code>\"problems.decorations.enabled\": false,\n</code></pre>\n"},{"tags":[],"owner":{"account_id":28794172,"reputation":1,"user_id":22052757,"display_name":"CarlosL"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1686615885,"creation_date":1686410504,"answer_id":76446849,"question_id":46061857,"body_markdown":"I had a similar issue.\r\nI work with some input files that look better if VSCode thinks of them as Python files.\r\nWhen I open them in VScode it marks several lines as errors (underlining them).\r\n\r\nI Solved this by disabling the Python extensions on the left &quot;Extensions Menu&quot; and restarting VSCode. \r\nNow it opens the file and displays it as Python, but without checking for errors. Way cleaner to the eyes!\r\n","title":"How to disable error highlighting for Java code in VS Code?","body":"<p>I had a similar issue.\nI work with some input files that look better if VSCode thinks of them as Python files.\nWhen I open them in VScode it marks several lines as errors (underlining them).</p>\n<p>I Solved this by disabling the Python extensions on the left &quot;Extensions Menu&quot; and restarting VSCode.\nNow it opens the file and displays it as Python, but without checking for errors. Way cleaner to the eyes!</p>\n"}],"owner":{"account_id":195224,"reputation":1369,"user_id":438001,"accept_rate":24,"display_name":"J&#246;rg Rech"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":66582,"favorite_count":0,"down_vote_count":0,"up_vote_count":18,"answer_count":5,"score":18,"last_activity_date":1694987210,"creation_date":1504638830,"question_id":46061857,"body_markdown":"I need to disable error highlighting in Java files in VS Code. VS Code tries to check a Groovy file while thinking it is a Java file.\r\n\r\nAs you can see in the picture all imports after the first and the types after the first field are highlighted red (due to missing semicolons). However I do not want the error check for this Groovy file.\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/6J2di.png\r\n\r\nNote: I only have the plugins Clang, RedHat.Java, Markdown PDF, Sort Lines, and Uncrustify installed. Even if I disable all the red highlighting is visible.","title":"How to disable error highlighting for Java code in VS Code?","body":"<p>I need to disable error highlighting in Java files in VS Code. VS Code tries to check a Groovy file while thinking it is a Java file.</p>\n<p>As you can see in the picture all imports after the first and the types after the first field are highlighted red (due to missing semicolons). However I do not want the error check for this Groovy file.\n<a href=\"https://i.stack.imgur.com/6J2di.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/6J2di.png\" alt=\"enter image description here\" /></a></p>\n<p>Note: I only have the plugins Clang, RedHat.Java, Markdown PDF, Sort Lines, and Uncrustify installed. Even if I disable all the red highlighting is visible.</p>\n"},{"tags":["java","android","xml","kotlin","exoplayer"],"owner":{"account_id":14698680,"reputation":140,"user_id":10615359,"display_name":"Muhmmad Umair"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":36,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1694987028,"creation_date":1694987028,"question_id":77123721,"body_markdown":"I am playing video in exoplayer but an image which seems like thumb nail appears above the video for all the time. I don&#39;t know what is this. I think this is a first frame of video. It only appears on some devices. If you have a solution please guide. Thanks in advance.\r\n\r\nBelow is the Screen Short of my problem.[![enter image description here](https://i.stack.imgur.com/n1F2O.png)](https://i.stack.imgur.com/n1F2O.png)\r\n\r\n\r\nBelow is my xml code. \r\n\r\n\r\n```\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\r\n&lt;LinearLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\r\n    xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;\r\n    android:layout_width=&quot;match_parent&quot;\r\n    android:layout_height=&quot;match_parent&quot;\r\n    android:orientation=&quot;vertical&quot;&gt;\r\n\r\n    &lt;RelativeLayout\r\n        android:id=&quot;@+id/main_relative&quot;\r\n        android:layout_width=&quot;match_parent&quot;\r\n        android:layout_height=&quot;match_parent&quot;&gt;\r\n\r\n        &lt;com.google.android.exoplayer2.ui.SimpleExoPlayerView\r\n            android:id=&quot;@+id/vv_clips&quot;\r\n            android:layout_width=&quot;match_parent&quot;\r\n            android:layout_height=&quot;@dimen/_200sdp&quot; /&gt;\r\n\r\n        &lt;com.facebook.shimmer.ShimmerFrameLayout\r\n            android:id=&quot;@+id/shimmer&quot;\r\n            android:layout_width=&quot;match_parent&quot;\r\n            android:layout_height=&quot;wrap_content&quot;\r\n            android:layout_marginTop=&quot;@dimen/_60sdp&quot;\r\n            android:visibility=&quot;gone&quot;&gt;\r\n\r\n            &lt;LinearLayout\r\n                android:layout_width=&quot;match_parent&quot;\r\n                android:layout_height=&quot;wrap_content&quot;\r\n                android:orientation=&quot;vertical&quot;&gt;\r\n\r\n                &lt;View\r\n                    android:layout_width=&quot;match_parent&quot;\r\n                    android:layout_height=&quot;@dimen/_4sdp&quot;\r\n                    android:layout_marginTop=&quot;10dp&quot;\r\n                    android:background=&quot;@color/dark_grey&quot; /&gt;\r\n            &lt;/LinearLayout&gt;\r\n        &lt;/com.facebook.shimmer.ShimmerFrameLayout&gt;\r\n\r\n        &lt;LinearLayout\r\n            android:layout_width=&quot;wrap_content&quot;\r\n            android:layout_height=&quot;wrap_content&quot;\r\n            android:layout_alignParentTop=&quot;true&quot;\r\n            android:layout_alignParentEnd=&quot;true&quot;\r\n            android:layout_marginTop=&quot;@dimen/_40sdp&quot;\r\n            android:layout_marginEnd=&quot;20dp&quot;&gt;\r\n\r\n            &lt;Chronometer\r\n                android:id=&quot;@+id/video_counter&quot;\r\n                android:layout_width=&quot;wrap_content&quot;\r\n                android:layout_height=&quot;wrap_content&quot;\r\n                android:text=&quot;00:00&quot;\r\n                android:textColor=&quot;@color/dark_white&quot; /&gt;\r\n\r\n            &lt;TextView\r\n                android:id=&quot;@+id/tv_timer&quot;\r\n                android:layout_width=&quot;wrap_content&quot;\r\n                android:layout_height=&quot;wrap_content&quot;\r\n                android:layout_centerInParent=&quot;true&quot;\r\n                android:text=&quot;00:00&quot;\r\n                android:textColor=&quot;@color/dark_white&quot;\r\n                android:textSize=&quot;17sp&quot;\r\n                android:textStyle=&quot;bold&quot;\r\n                android:visibility=&quot;gone&quot;\r\n                app:typeface=&quot;@string/text_semi_bold_display&quot; /&gt;\r\n\r\n        &lt;/LinearLayout&gt;\r\n\r\n        &lt;LinearLayout\r\n            android:layout_width=&quot;50dp&quot;\r\n            android:layout_height=&quot;wrap_content&quot;\r\n            android:layout_alignParentEnd=&quot;true&quot;\r\n            android:layout_alignParentBottom=&quot;true&quot;\r\n            android:layout_marginEnd=&quot;10dp&quot;\r\n            android:layout_marginBottom=&quot;@dimen/_60sdp&quot;\r\n            android:gravity=&quot;center&quot;\r\n            android:orientation=&quot;vertical&quot;&gt;\r\n\r\n            &lt;LinearLayout\r\n                android:id=&quot;@+id/play_linear&quot;\r\n                android:layout_width=&quot;40dp&quot;\r\n                android:layout_height=&quot;wrap_content&quot;\r\n                android:layout_marginTop=&quot;5dp&quot;\r\n                android:gravity=&quot;center_horizontal&quot;\r\n                android:orientation=&quot;vertical&quot;&gt;\r\n\r\n                &lt;ImageView\r\n                    android:layout_width=&quot;22dp&quot;\r\n                    android:layout_height=&quot;22dp&quot;\r\n                    android:src=&quot;@drawable/play&quot; /&gt;\r\n\r\n                &lt;TextView\r\n                    android:id=&quot;@+id/tv_play&quot;\r\n                    android:layout_width=&quot;match_parent&quot;\r\n                    android:layout_height=&quot;wrap_content&quot;\r\n                    android:layout_marginTop=&quot;2dp&quot;\r\n                    android:layout_weight=&quot;1&quot;\r\n                    android:text=&quot;@string/video_play_text&quot;\r\n                    android:textAlignment=&quot;center&quot;\r\n                    android:textColor=&quot;@color/dark_white&quot;\r\n                    android:textSize=&quot;13sp&quot;\r\n                    app:typeface=&quot;@string/text_semi_bold_display&quot; /&gt;\r\n\r\n\r\n            &lt;/LinearLayout&gt;\r\n\r\n            &lt;LinearLayout\r\n                android:layout_width=&quot;40dp&quot;\r\n                android:layout_height=&quot;wrap_content&quot;\r\n                android:layout_marginTop=&quot;20dp&quot;\r\n                android:gravity=&quot;center_horizontal&quot;\r\n                android:orientation=&quot;vertical&quot;&gt;\r\n\r\n                &lt;ImageView\r\n                    android:layout_width=&quot;22dp&quot;\r\n                    android:layout_height=&quot;22dp&quot;\r\n                    android:src=&quot;@drawable/share_new&quot;\r\n                    app:tint=&quot;@color/dark_white&quot; /&gt;\r\n\r\n                &lt;TextView\r\n                    android:layout_width=&quot;match_parent&quot;\r\n                    android:layout_height=&quot;wrap_content&quot;\r\n                    android:layout_marginTop=&quot;2dp&quot;\r\n                    android:layout_weight=&quot;1&quot;\r\n                    android:text=&quot;@string/share&quot;\r\n                    android:textAlignment=&quot;center&quot;\r\n                    android:textColor=&quot;@color/dark_white&quot;\r\n                    android:textSize=&quot;13sp&quot;\r\n                    app:typeface=&quot;@string/text_semi_bold_display&quot; /&gt;\r\n\r\n            &lt;/LinearLayout&gt;\r\n\r\n            &lt;LinearLayout\r\n                android:id=&quot;@+id/likeLinear&quot;\r\n                android:layout_width=&quot;40dp&quot;\r\n                android:layout_height=&quot;wrap_content&quot;\r\n                android:layout_marginTop=&quot;20dp&quot;\r\n                android:gravity=&quot;center_horizontal&quot;\r\n                android:orientation=&quot;vertical&quot;&gt;\r\n\r\n                &lt;CheckBox\r\n                    android:id=&quot;@+id/favourite&quot;\r\n                    android:layout_width=&quot;wrap_content&quot;\r\n                    android:layout_height=&quot;wrap_content&quot;\r\n                    android:layout_centerHorizontal=&quot;true&quot;\r\n                    android:button=&quot;@null&quot;\r\n                    android:clickable=&quot;false&quot;\r\n                    android:drawableLeft=&quot;@drawable/favourite_check_cuts&quot;\r\n                    android:stateListAnimator=&quot;@animator/scale&quot; /&gt;\r\n\r\n                &lt;TextView\r\n                    android:layout_width=&quot;match_parent&quot;\r\n                    android:layout_height=&quot;wrap_content&quot;\r\n                    android:layout_marginTop=&quot;2dp&quot;\r\n                    android:layout_weight=&quot;1&quot;\r\n                    android:text=&quot;@string/like_text&quot;\r\n                    android:textAlignment=&quot;center&quot;\r\n                    android:textColor=&quot;@color/dark_white&quot;\r\n                    android:textSize=&quot;13sp&quot;\r\n                    app:typeface=&quot;@string/text_semi_bold_display&quot; /&gt;\r\n\r\n\r\n            &lt;/LinearLayout&gt;\r\n\r\n        &lt;/LinearLayout&gt;\r\n\r\n        &lt;LinearLayout\r\n            android:layout_width=&quot;match_parent&quot;\r\n            android:layout_height=&quot;wrap_content&quot;\r\n            android:layout_alignParentBottom=&quot;true&quot;\r\n            android:layout_marginEnd=&quot;@dimen/_55sdp&quot;\r\n            android:layout_marginStart=&quot;@dimen/_12sdp&quot;\r\n            android:orientation=&quot;vertical&quot;&gt;\r\n\r\n            &lt;TextView\r\n                android:id=&quot;@+id/tv_title&quot;\r\n                android:layout_width=&quot;wrap_content&quot;\r\n                android:layout_height=&quot;wrap_content&quot;\r\n                android:text=&quot;Video Title&quot;\r\n                android:paddingStart=&quot;5dp&quot;\r\n                android:textStyle=&quot;bold&quot;\r\n                android:textColor=&quot;@color/dark_white&quot;\r\n                android:textSize=&quot;16sp&quot;/&gt;\r\n\r\n            &lt;TextView\r\n                android:id=&quot;@+id/tv_description&quot;\r\n                android:layout_width=&quot;match_parent&quot;\r\n                android:layout_height=&quot;wrap_content&quot;\r\n                android:textColor=&quot;@color/dark_white&quot;\r\n                android:padding=&quot;7dp&quot;\r\n                android:gravity=&quot;center_vertical&quot;\r\n                android:textSize=&quot;15sp&quot;\r\n                android:textCursorDrawable=&quot;@null&quot;\r\n                android:text=&quot;Description&quot;\r\n                android:theme=&quot;@style/EditTextTheme&quot;\r\n                app:typeface=&quot;@string/text_regular_display&quot; /&gt;\r\n\r\n            &lt;ImageView\r\n                android:id=&quot;@+id/iv_indicator&quot;\r\n                android:layout_width=&quot;@dimen/_40sdp&quot;\r\n                android:layout_height=&quot;@dimen/_40sdp&quot;\r\n                android:layout_gravity=&quot;center&quot;\r\n                android:layout_marginStart=&quot;@dimen/_20sdp&quot;\r\n                android:layout_marginBottom=&quot;@dimen/_45sdp&quot;\r\n                android:src=&quot;@drawable/ic_arrow_up&quot;\r\n                android:visibility=&quot;invisible&quot;/&gt;\r\n\r\n        &lt;/LinearLayout&gt;\r\n\r\n    &lt;/RelativeLayout&gt;\r\n\r\n&lt;/LinearLayout&gt;\r\n```\r\n\r\n\r\n\r\n\r\n \r\n\r\nI tried to clear the surface when player state ready but no luck.","title":"Video first frame is always there above the video in exoplayer. How to remove if when video playing?","body":"<p>I am playing video in exoplayer but an image which seems like thumb nail appears above the video for all the time. I don't know what is this. I think this is a first frame of video. It only appears on some devices. If you have a solution please guide. Thanks in advance.</p>\n<p>Below is the Screen Short of my problem.<a href=\"https://i.stack.imgur.com/n1F2O.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/n1F2O.png\" alt=\"enter image description here\" /></a></p>\n<p>Below is my xml code.</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\n&lt;LinearLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\n    xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;\n    android:layout_width=&quot;match_parent&quot;\n    android:layout_height=&quot;match_parent&quot;\n    android:orientation=&quot;vertical&quot;&gt;\n\n    &lt;RelativeLayout\n        android:id=&quot;@+id/main_relative&quot;\n        android:layout_width=&quot;match_parent&quot;\n        android:layout_height=&quot;match_parent&quot;&gt;\n\n        &lt;com.google.android.exoplayer2.ui.SimpleExoPlayerView\n            android:id=&quot;@+id/vv_clips&quot;\n            android:layout_width=&quot;match_parent&quot;\n            android:layout_height=&quot;@dimen/_200sdp&quot; /&gt;\n\n        &lt;com.facebook.shimmer.ShimmerFrameLayout\n            android:id=&quot;@+id/shimmer&quot;\n            android:layout_width=&quot;match_parent&quot;\n            android:layout_height=&quot;wrap_content&quot;\n            android:layout_marginTop=&quot;@dimen/_60sdp&quot;\n            android:visibility=&quot;gone&quot;&gt;\n\n            &lt;LinearLayout\n                android:layout_width=&quot;match_parent&quot;\n                android:layout_height=&quot;wrap_content&quot;\n                android:orientation=&quot;vertical&quot;&gt;\n\n                &lt;View\n                    android:layout_width=&quot;match_parent&quot;\n                    android:layout_height=&quot;@dimen/_4sdp&quot;\n                    android:layout_marginTop=&quot;10dp&quot;\n                    android:background=&quot;@color/dark_grey&quot; /&gt;\n            &lt;/LinearLayout&gt;\n        &lt;/com.facebook.shimmer.ShimmerFrameLayout&gt;\n\n        &lt;LinearLayout\n            android:layout_width=&quot;wrap_content&quot;\n            android:layout_height=&quot;wrap_content&quot;\n            android:layout_alignParentTop=&quot;true&quot;\n            android:layout_alignParentEnd=&quot;true&quot;\n            android:layout_marginTop=&quot;@dimen/_40sdp&quot;\n            android:layout_marginEnd=&quot;20dp&quot;&gt;\n\n            &lt;Chronometer\n                android:id=&quot;@+id/video_counter&quot;\n                android:layout_width=&quot;wrap_content&quot;\n                android:layout_height=&quot;wrap_content&quot;\n                android:text=&quot;00:00&quot;\n                android:textColor=&quot;@color/dark_white&quot; /&gt;\n\n            &lt;TextView\n                android:id=&quot;@+id/tv_timer&quot;\n                android:layout_width=&quot;wrap_content&quot;\n                android:layout_height=&quot;wrap_content&quot;\n                android:layout_centerInParent=&quot;true&quot;\n                android:text=&quot;00:00&quot;\n                android:textColor=&quot;@color/dark_white&quot;\n                android:textSize=&quot;17sp&quot;\n                android:textStyle=&quot;bold&quot;\n                android:visibility=&quot;gone&quot;\n                app:typeface=&quot;@string/text_semi_bold_display&quot; /&gt;\n\n        &lt;/LinearLayout&gt;\n\n        &lt;LinearLayout\n            android:layout_width=&quot;50dp&quot;\n            android:layout_height=&quot;wrap_content&quot;\n            android:layout_alignParentEnd=&quot;true&quot;\n            android:layout_alignParentBottom=&quot;true&quot;\n            android:layout_marginEnd=&quot;10dp&quot;\n            android:layout_marginBottom=&quot;@dimen/_60sdp&quot;\n            android:gravity=&quot;center&quot;\n            android:orientation=&quot;vertical&quot;&gt;\n\n            &lt;LinearLayout\n                android:id=&quot;@+id/play_linear&quot;\n                android:layout_width=&quot;40dp&quot;\n                android:layout_height=&quot;wrap_content&quot;\n                android:layout_marginTop=&quot;5dp&quot;\n                android:gravity=&quot;center_horizontal&quot;\n                android:orientation=&quot;vertical&quot;&gt;\n\n                &lt;ImageView\n                    android:layout_width=&quot;22dp&quot;\n                    android:layout_height=&quot;22dp&quot;\n                    android:src=&quot;@drawable/play&quot; /&gt;\n\n                &lt;TextView\n                    android:id=&quot;@+id/tv_play&quot;\n                    android:layout_width=&quot;match_parent&quot;\n                    android:layout_height=&quot;wrap_content&quot;\n                    android:layout_marginTop=&quot;2dp&quot;\n                    android:layout_weight=&quot;1&quot;\n                    android:text=&quot;@string/video_play_text&quot;\n                    android:textAlignment=&quot;center&quot;\n                    android:textColor=&quot;@color/dark_white&quot;\n                    android:textSize=&quot;13sp&quot;\n                    app:typeface=&quot;@string/text_semi_bold_display&quot; /&gt;\n\n\n            &lt;/LinearLayout&gt;\n\n            &lt;LinearLayout\n                android:layout_width=&quot;40dp&quot;\n                android:layout_height=&quot;wrap_content&quot;\n                android:layout_marginTop=&quot;20dp&quot;\n                android:gravity=&quot;center_horizontal&quot;\n                android:orientation=&quot;vertical&quot;&gt;\n\n                &lt;ImageView\n                    android:layout_width=&quot;22dp&quot;\n                    android:layout_height=&quot;22dp&quot;\n                    android:src=&quot;@drawable/share_new&quot;\n                    app:tint=&quot;@color/dark_white&quot; /&gt;\n\n                &lt;TextView\n                    android:layout_width=&quot;match_parent&quot;\n                    android:layout_height=&quot;wrap_content&quot;\n                    android:layout_marginTop=&quot;2dp&quot;\n                    android:layout_weight=&quot;1&quot;\n                    android:text=&quot;@string/share&quot;\n                    android:textAlignment=&quot;center&quot;\n                    android:textColor=&quot;@color/dark_white&quot;\n                    android:textSize=&quot;13sp&quot;\n                    app:typeface=&quot;@string/text_semi_bold_display&quot; /&gt;\n\n            &lt;/LinearLayout&gt;\n\n            &lt;LinearLayout\n                android:id=&quot;@+id/likeLinear&quot;\n                android:layout_width=&quot;40dp&quot;\n                android:layout_height=&quot;wrap_content&quot;\n                android:layout_marginTop=&quot;20dp&quot;\n                android:gravity=&quot;center_horizontal&quot;\n                android:orientation=&quot;vertical&quot;&gt;\n\n                &lt;CheckBox\n                    android:id=&quot;@+id/favourite&quot;\n                    android:layout_width=&quot;wrap_content&quot;\n                    android:layout_height=&quot;wrap_content&quot;\n                    android:layout_centerHorizontal=&quot;true&quot;\n                    android:button=&quot;@null&quot;\n                    android:clickable=&quot;false&quot;\n                    android:drawableLeft=&quot;@drawable/favourite_check_cuts&quot;\n                    android:stateListAnimator=&quot;@animator/scale&quot; /&gt;\n\n                &lt;TextView\n                    android:layout_width=&quot;match_parent&quot;\n                    android:layout_height=&quot;wrap_content&quot;\n                    android:layout_marginTop=&quot;2dp&quot;\n                    android:layout_weight=&quot;1&quot;\n                    android:text=&quot;@string/like_text&quot;\n                    android:textAlignment=&quot;center&quot;\n                    android:textColor=&quot;@color/dark_white&quot;\n                    android:textSize=&quot;13sp&quot;\n                    app:typeface=&quot;@string/text_semi_bold_display&quot; /&gt;\n\n\n            &lt;/LinearLayout&gt;\n\n        &lt;/LinearLayout&gt;\n\n        &lt;LinearLayout\n            android:layout_width=&quot;match_parent&quot;\n            android:layout_height=&quot;wrap_content&quot;\n            android:layout_alignParentBottom=&quot;true&quot;\n            android:layout_marginEnd=&quot;@dimen/_55sdp&quot;\n            android:layout_marginStart=&quot;@dimen/_12sdp&quot;\n            android:orientation=&quot;vertical&quot;&gt;\n\n            &lt;TextView\n                android:id=&quot;@+id/tv_title&quot;\n                android:layout_width=&quot;wrap_content&quot;\n                android:layout_height=&quot;wrap_content&quot;\n                android:text=&quot;Video Title&quot;\n                android:paddingStart=&quot;5dp&quot;\n                android:textStyle=&quot;bold&quot;\n                android:textColor=&quot;@color/dark_white&quot;\n                android:textSize=&quot;16sp&quot;/&gt;\n\n            &lt;TextView\n                android:id=&quot;@+id/tv_description&quot;\n                android:layout_width=&quot;match_parent&quot;\n                android:layout_height=&quot;wrap_content&quot;\n                android:textColor=&quot;@color/dark_white&quot;\n                android:padding=&quot;7dp&quot;\n                android:gravity=&quot;center_vertical&quot;\n                android:textSize=&quot;15sp&quot;\n                android:textCursorDrawable=&quot;@null&quot;\n                android:text=&quot;Description&quot;\n                android:theme=&quot;@style/EditTextTheme&quot;\n                app:typeface=&quot;@string/text_regular_display&quot; /&gt;\n\n            &lt;ImageView\n                android:id=&quot;@+id/iv_indicator&quot;\n                android:layout_width=&quot;@dimen/_40sdp&quot;\n                android:layout_height=&quot;@dimen/_40sdp&quot;\n                android:layout_gravity=&quot;center&quot;\n                android:layout_marginStart=&quot;@dimen/_20sdp&quot;\n                android:layout_marginBottom=&quot;@dimen/_45sdp&quot;\n                android:src=&quot;@drawable/ic_arrow_up&quot;\n                android:visibility=&quot;invisible&quot;/&gt;\n\n        &lt;/LinearLayout&gt;\n\n    &lt;/RelativeLayout&gt;\n\n&lt;/LinearLayout&gt;\n</code></pre>\n<p>I tried to clear the surface when player state ready but no luck.</p>\n"},{"tags":["java","servlets","scheduled-tasks","quartz-scheduler"],"answers":[{"tags":[],"owner":{"account_id":4750084,"reputation":2919,"user_id":3840344,"accept_rate":73,"display_name":"Raghuveer"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1694986360,"creation_date":1426158457,"answer_id":29008124,"question_id":29007738,"body_markdown":"We can do in 2 ways:\r\n \r\n1. Manually kill job and start again\r\n 2. use the code below:\r\n\r\n&gt;  scheduler.deleteJob(new JobKey(jobData.getJobName()));\r\n\r\n Refer [link][1] for more details.\r\n\r\n\r\n  [1]: https://xebiaww.wordpress.com/2012/06/14/create-update-and-delete-jobs-dynamically-in-quartz/\r\n\r\nwhat you are trying to do it to delete a new job which is not useful.\r\n\r\nYou can edit your deleteJob() like below and call it when required:\r\n\r\n       private void deleteJob(Scheduler scheduler, String jobName)\r\n        {\r\n            try {\r\n                \r\n                scheduler.deleteJob(new JobKey(jobName));\r\n    \r\n            } catch (Exception ex) {\r\n                System.out.println(ex);\r\n            }\r\n        }\r\n\r\n","title":"How to delete or re-schedule a job?","body":"<p>We can do in 2 ways:</p>\n<ol>\n<li>Manually kill job and start again</li>\n<li>use the code below:</li>\n</ol>\n<blockquote>\n<p>scheduler.deleteJob(new JobKey(jobData.getJobName()));</p>\n</blockquote>\n<p>Refer <a href=\"https://xebiaww.wordpress.com/2012/06/14/create-update-and-delete-jobs-dynamically-in-quartz/\" rel=\"nofollow noreferrer\">link</a> for more details.</p>\n<p>what you are trying to do it to delete a new job which is not useful.</p>\n<p>You can edit your deleteJob() like below and call it when required:</p>\n<pre><code>   private void deleteJob(Scheduler scheduler, String jobName)\n    {\n        try {\n            \n            scheduler.deleteJob(new JobKey(jobName));\n\n        } catch (Exception ex) {\n            System.out.println(ex);\n        }\n    }\n</code></pre>\n"}],"owner":{"account_id":1466637,"reputation":22094,"user_id":1379286,"accept_rate":66,"display_name":"PeakGen"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":12833,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1694986360,"creation_date":1426157427,"question_id":29007738,"body_markdown":"Please have a look at the below code\r\n\r\n    /*\r\n     * To change this license header, choose License Headers in Project Properties.\r\n     * To change this template file, choose Tools | Templates\r\n     * and open the template in the editor.\r\n     */\r\n    package RemindeWorker.Listener;\r\n    \r\n    \r\n    import java.util.Date;\r\n    import java.util.logging.Level;\r\n    import java.util.logging.Logger;\r\n    import static org.quartz.CronScheduleBuilder.dailyAtHourAndMinute;\r\n    import static org.quartz.JobBuilder.newJob;\r\n    import org.quartz.JobDetail;\r\n    import org.quartz.Scheduler;\r\n    import org.quartz.SchedulerException;\r\n    import org.quartz.Trigger;\r\n    import static org.quartz.TriggerBuilder.newTrigger;\r\n    import static org.quartz.TriggerKey.triggerKey;\r\n    import org.quartz.impl.StdSchedulerFactory;\r\n    \r\n    /**\r\n     *\r\n     * @author Yohan\r\n     */\r\n    public class ReminderExecuter extends ReminderCommon\r\n    {\r\n        private static ReminderExecuter r;\r\n        \r\n        private ReminderExecuter()\r\n        {\r\n            super();\r\n        }\r\n        \r\n        public static ReminderExecuter  getReminderExecuter()\r\n        {\r\n            if(r==null)\r\n            {\r\n                r = new ReminderExecuter();\r\n            }\r\n            \r\n            return r;\r\n        }\r\n        \r\n        public void executeRemnders()\r\n        {\r\n            passportReminder1();\r\n           // passportReminder2();\r\n        }\r\n        \r\n        private void passportReminder1()\r\n        {\r\n            String[] reminderTime = getFirstReminderTime().trim().split(&quot;:&quot;);\r\n            String reminderHour = reminderTime[0];\r\n            String reminderMinute = reminderTime[1];\r\n            \r\n            String[]reminderTime2 = getSecondReminderTime().trim().split(&quot;:&quot;);\r\n            String reminderHour2 = reminderTime2[0];\r\n            String reminderMinute2 = reminderTime2[1];\r\n            \r\n            System.out.println(&quot;Reminder Hour: &quot;+reminderHour);\r\n            System.out.println(&quot;Reminder Minute: &quot;+reminderMinute);\r\n            \r\n            JobDetail job = newJob(PassportJob.class).withIdentity(&quot;passportJob1&quot;)\r\n                    .usingJobData(&quot;userName&quot;, getUserName())\r\n                    .usingJobData(&quot;password&quot;,getPassword())\r\n                    .usingJobData(&quot;host&quot;,getHost())\r\n                    \r\n                    .build();\r\n     \r\n             Trigger trigger = newTrigger()\r\n                     .withIdentity(triggerKey(&quot;passportTrigger1&quot;, &quot;passportTriggerGroup1&quot;))\r\n                     .withSchedule(dailyAtHourAndMinute(Integer.parseInt(reminderHour), Integer.parseInt(reminderMinute)))\r\n                     .startAt(new Date()).build();\r\n             \r\n             Trigger trigger2 = newTrigger()\r\n                     .withIdentity(triggerKey(&quot;passportTrigger2&quot;, &quot;passportTriggerGroup2&quot;))\r\n                     .withSchedule(dailyAtHourAndMinute(Integer.parseInt(reminderHour2), Integer.parseInt(reminderMinute2)))\r\n                     .startAt(new Date()).build();\r\n    \r\n            try {\r\n                Scheduler scheduler = new StdSchedulerFactory().getScheduler();\r\n                scheduler.start();\r\n                scheduler.scheduleJob(job, trigger);\r\n                System.out.println(&quot;Job 1 Scheduled&quot;);\r\n                \r\n                Scheduler scheduler2 = new StdSchedulerFactory().getScheduler();\r\n                scheduler2.start();\r\n                scheduler2.scheduleJob(job, trigger2);\r\n                System.out.println(&quot;Job 2 Scheduled&quot;);\r\n              \r\n            } catch (SchedulerException ex) {\r\n                ex.printStackTrace();\r\n            }\r\n        }\r\n        \r\n        \r\n        \r\n        private void deleteJob()\r\n        {\r\n            try {\r\n                Scheduler scheduler = new StdSchedulerFactory().getScheduler();\r\n                scheduler.deleteJob(null);\r\n                \r\n            } catch (SchedulerException ex) {\r\n                System.out.println(ex);\r\n            }\r\n        }\r\n    }\r\n\r\nHere I created the `deleteJob()` method to delete and re-open or re-schedule the jobs listed in `passportReminder1()`. However I have no idea about how to it. Hw can I delete or re-schedule a quartz job? I am using the quartz 2 API.","title":"How to delete or re-schedule a job?","body":"<p>Please have a look at the below code</p>\n\n<pre><code>/*\n * To change this license header, choose License Headers in Project Properties.\n * To change this template file, choose Tools | Templates\n * and open the template in the editor.\n */\npackage RemindeWorker.Listener;\n\n\nimport java.util.Date;\nimport java.util.logging.Level;\nimport java.util.logging.Logger;\nimport static org.quartz.CronScheduleBuilder.dailyAtHourAndMinute;\nimport static org.quartz.JobBuilder.newJob;\nimport org.quartz.JobDetail;\nimport org.quartz.Scheduler;\nimport org.quartz.SchedulerException;\nimport org.quartz.Trigger;\nimport static org.quartz.TriggerBuilder.newTrigger;\nimport static org.quartz.TriggerKey.triggerKey;\nimport org.quartz.impl.StdSchedulerFactory;\n\n/**\n *\n * @author Yohan\n */\npublic class ReminderExecuter extends ReminderCommon\n{\n    private static ReminderExecuter r;\n\n    private ReminderExecuter()\n    {\n        super();\n    }\n\n    public static ReminderExecuter  getReminderExecuter()\n    {\n        if(r==null)\n        {\n            r = new ReminderExecuter();\n        }\n\n        return r;\n    }\n\n    public void executeRemnders()\n    {\n        passportReminder1();\n       // passportReminder2();\n    }\n\n    private void passportReminder1()\n    {\n        String[] reminderTime = getFirstReminderTime().trim().split(\":\");\n        String reminderHour = reminderTime[0];\n        String reminderMinute = reminderTime[1];\n\n        String[]reminderTime2 = getSecondReminderTime().trim().split(\":\");\n        String reminderHour2 = reminderTime2[0];\n        String reminderMinute2 = reminderTime2[1];\n\n        System.out.println(\"Reminder Hour: \"+reminderHour);\n        System.out.println(\"Reminder Minute: \"+reminderMinute);\n\n        JobDetail job = newJob(PassportJob.class).withIdentity(\"passportJob1\")\n                .usingJobData(\"userName\", getUserName())\n                .usingJobData(\"password\",getPassword())\n                .usingJobData(\"host\",getHost())\n\n                .build();\n\n         Trigger trigger = newTrigger()\n                 .withIdentity(triggerKey(\"passportTrigger1\", \"passportTriggerGroup1\"))\n                 .withSchedule(dailyAtHourAndMinute(Integer.parseInt(reminderHour), Integer.parseInt(reminderMinute)))\n                 .startAt(new Date()).build();\n\n         Trigger trigger2 = newTrigger()\n                 .withIdentity(triggerKey(\"passportTrigger2\", \"passportTriggerGroup2\"))\n                 .withSchedule(dailyAtHourAndMinute(Integer.parseInt(reminderHour2), Integer.parseInt(reminderMinute2)))\n                 .startAt(new Date()).build();\n\n        try {\n            Scheduler scheduler = new StdSchedulerFactory().getScheduler();\n            scheduler.start();\n            scheduler.scheduleJob(job, trigger);\n            System.out.println(\"Job 1 Scheduled\");\n\n            Scheduler scheduler2 = new StdSchedulerFactory().getScheduler();\n            scheduler2.start();\n            scheduler2.scheduleJob(job, trigger2);\n            System.out.println(\"Job 2 Scheduled\");\n\n        } catch (SchedulerException ex) {\n            ex.printStackTrace();\n        }\n    }\n\n\n\n    private void deleteJob()\n    {\n        try {\n            Scheduler scheduler = new StdSchedulerFactory().getScheduler();\n            scheduler.deleteJob(null);\n\n        } catch (SchedulerException ex) {\n            System.out.println(ex);\n        }\n    }\n}\n</code></pre>\n\n<p>Here I created the <code>deleteJob()</code> method to delete and re-open or re-schedule the jobs listed in <code>passportReminder1()</code>. However I have no idea about how to it. Hw can I delete or re-schedule a quartz job? I am using the quartz 2 API.</p>\n"},{"tags":["java","binary-tree"],"comments":[{"owner":{"account_id":2799515,"reputation":815,"user_id":6647878,"display_name":"Nidhi257"},"score":2,"creation_date":1694497274,"post_id":77086292,"comment_id":135894615,"body_markdown":"can add sample output so that we can get clear picture on which indentation you are talking about.","body":"can add sample output so that we can get clear picture on which indentation you are talking about."},{"owner":{"account_id":4354234,"reputation":845,"user_id":3553434,"display_name":"alalalala"},"score":3,"creation_date":1694497900,"post_id":77086292,"comment_id":135894699,"body_markdown":"Does this answer your question? [How to print binary tree diagram in Java?](https://stackoverflow.com/questions/4965335/how-to-print-binary-tree-diagram-in-java)Why couldn&#39;t the questioner do a search first?","body":"Does this answer your question? <a href=\"https://stackoverflow.com/questions/4965335/how-to-print-binary-tree-diagram-in-java\">How to print binary tree diagram in Java?</a>Why couldn&#39;t the questioner do a search first?"},{"owner":{"account_id":25432602,"reputation":21,"user_id":19236762,"display_name":"Zynbad"},"score":0,"creation_date":1694498000,"post_id":77086292,"comment_id":135894714,"body_markdown":"@Nidhi257 its up now","body":"@Nidhi257 its up now"},{"owner":{"account_id":25432602,"reputation":21,"user_id":19236762,"display_name":"Zynbad"},"score":0,"creation_date":1694498083,"post_id":77086292,"comment_id":135894723,"body_markdown":"@时间只会一直走 that is different, i added images so that u can see what it is supposed to look like","body":"@时间只会一直走 that is different, i added images so that u can see what it is supposed to look like"},{"owner":{"account_id":4354234,"reputation":845,"user_id":3553434,"display_name":"alalalala"},"score":0,"creation_date":1694498326,"post_id":77086292,"comment_id":135894749,"body_markdown":"You haven&#39;t looked at that question carefully at all. The answer below has a solution to your problem.","body":"You haven&#39;t looked at that question carefully at all. The answer below has a solution to your problem."},{"owner":{"account_id":4354234,"reputation":845,"user_id":3553434,"display_name":"alalalala"},"score":0,"creation_date":1694498414,"post_id":77086292,"comment_id":135894761,"body_markdown":"https://stackoverflow.com/a/53705889/3553434 This is almost exactly what you need, at least with a little modification! \nYou can refer to this. and this https://stackoverflow.com/a/42449385/3553434","body":"<a href=\"https://stackoverflow.com/a/53705889/3553434\">stackoverflow.com/a/53705889/3553434</a> This is almost exactly what you need, at least with a little modification!  You can refer to this. and this <a href=\"https://stackoverflow.com/a/42449385/3553434\">stackoverflow.com/a/42449385/3553434</a>"}],"answers":[{"tags":[],"owner":{"account_id":14883843,"reputation":193,"user_id":12280406,"display_name":"solitude"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1694498611,"creation_date":1694498611,"answer_id":77086437,"question_id":77086292,"body_markdown":"The reason why indent is printing on first time around is because you are using `indentation` variable both for adding extra spacing and for checking if you are in a root node or not.\r\n\r\nTry setting up new boolean parameter to identify the first node vs the `indentation` String. \r\n\r\n&gt; `boolean isFirst`\r\n\r\nHere is how you do it:\r\n\r\n    public void printTree() {\r\n        UI.clearText();\r\n        printTreeHelper(theTree, &quot;&quot;, true); // Print without indentation for the first node.\r\n        UI.println();\r\n        UI.println(&quot;Completion version:&quot;);\r\n        printTreeHelper(theTree, &quot;&quot;, true); // Print with indentation for the first node.\r\n    }\r\n    \r\n    private void printTreeHelper(DTNode node, String indentation, boolean isFirst) {\r\n        if (node != null) {\r\n            String nodeText;\r\n            if (isFirst) {\r\n                nodeText = node.getText(); // No indentation for the first node\r\n            } else {\r\n                nodeText = indentation + &quot; &quot; + node.getText(); // Indentation for all other nodes\r\n            }\r\n            UI.println(nodeText);\r\n            printTreeHelper(node.getYes(), indentation + &quot;  &quot;, false); // Continue for &quot;yes&quot; child with increased indentation.\r\n            printTreeHelper(node.getNo(), indentation + &quot;  &quot;, false); // Continue for &quot;no&quot; child with increased indentation.\r\n        }\r\n    }\r\n\r\nBasically what it does is it takes additional parameter on first check, if its `true` and if it is set to `false` and decide if it will add indentation or not.","title":"Printing binary tree","body":"<p>The reason why indent is printing on first time around is because you are using <code>indentation</code> variable both for adding extra spacing and for checking if you are in a root node or not.</p>\n<p>Try setting up new boolean parameter to identify the first node vs the <code>indentation</code> String.</p>\n<blockquote>\n<p><code>boolean isFirst</code></p>\n</blockquote>\n<p>Here is how you do it:</p>\n<pre><code>public void printTree() {\n    UI.clearText();\n    printTreeHelper(theTree, &quot;&quot;, true); // Print without indentation for the first node.\n    UI.println();\n    UI.println(&quot;Completion version:&quot;);\n    printTreeHelper(theTree, &quot;&quot;, true); // Print with indentation for the first node.\n}\n\nprivate void printTreeHelper(DTNode node, String indentation, boolean isFirst) {\n    if (node != null) {\n        String nodeText;\n        if (isFirst) {\n            nodeText = node.getText(); // No indentation for the first node\n        } else {\n            nodeText = indentation + &quot; &quot; + node.getText(); // Indentation for all other nodes\n        }\n        UI.println(nodeText);\n        printTreeHelper(node.getYes(), indentation + &quot;  &quot;, false); // Continue for &quot;yes&quot; child with increased indentation.\n        printTreeHelper(node.getNo(), indentation + &quot;  &quot;, false); // Continue for &quot;no&quot; child with increased indentation.\n    }\n}\n</code></pre>\n<p>Basically what it does is it takes additional parameter on first check, if its <code>true</code> and if it is set to <code>false</code> and decide if it will add indentation or not.</p>\n"}],"owner":{"account_id":25432602,"reputation":21,"user_id":19236762,"display_name":"Zynbad"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":78,"favorite_count":0,"down_vote_count":2,"up_vote_count":2,"closed_date":1694986653,"answer_count":1,"score":0,"last_activity_date":1694986333,"creation_date":1694496169,"question_id":77086292,"body_markdown":"I have been trying for a while to identify why the tree is printing with indentation for the first time around. I&#39;m trying to make it so that it doesn&#39;t print with indentation on the first time. \r\n\r\n\r\n```\r\npublic void printTree() {\r\n    UI.clearText();\r\n    printTreeHelper(theTree, &quot;&quot;); // Print without indentation and no initial answer.\r\n    UI.println();\r\n    UI.println(&quot;Completion version:&quot;);\r\n    printTreeHelper(theTree, &quot;&quot;); // Print with indentation and no initial answer.\r\n}\r\n\r\nprivate void printTreeHelper(DTNode node, String indentation) {\r\n    if (node != null) {\r\n        String nodeText = indentation + (indentation.isEmpty() ? &quot;&quot; : &quot; &quot;) + node.getText();\r\n        UI.println(nodeText); // Print the current node&#39;s text with or without indentation.\r\n        printTreeHelper(node.getYes(), indentation + &quot;  &quot;); // Continue for &quot;yes&quot; child with increased indentation.\r\n        printTreeHelper(node.getNo(), indentation + &quot;  &quot;); // Continue for &quot;no&quot; child with increased indentation.\r\n    }\r\n}\r\n\r\n```\r\n\r\n\r\n[THe picture of what it looks like][1]\r\nvs\r\n[What it should look like][2]\r\n\r\nI tried many things but didn&#39;t work\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/enody.png\r\n  [2]: https://i.stack.imgur.com/dzfPu.png","title":"Printing binary tree","body":"<p>I have been trying for a while to identify why the tree is printing with indentation for the first time around. I'm trying to make it so that it doesn't print with indentation on the first time.</p>\n<pre><code>public void printTree() {\n    UI.clearText();\n    printTreeHelper(theTree, &quot;&quot;); // Print without indentation and no initial answer.\n    UI.println();\n    UI.println(&quot;Completion version:&quot;);\n    printTreeHelper(theTree, &quot;&quot;); // Print with indentation and no initial answer.\n}\n\nprivate void printTreeHelper(DTNode node, String indentation) {\n    if (node != null) {\n        String nodeText = indentation + (indentation.isEmpty() ? &quot;&quot; : &quot; &quot;) + node.getText();\n        UI.println(nodeText); // Print the current node's text with or without indentation.\n        printTreeHelper(node.getYes(), indentation + &quot;  &quot;); // Continue for &quot;yes&quot; child with increased indentation.\n        printTreeHelper(node.getNo(), indentation + &quot;  &quot;); // Continue for &quot;no&quot; child with increased indentation.\n    }\n}\n\n</code></pre>\n<p><a href=\"https://i.stack.imgur.com/enody.png\" rel=\"nofollow noreferrer\">THe picture of what it looks like</a>\nvs\n<a href=\"https://i.stack.imgur.com/dzfPu.png\" rel=\"nofollow noreferrer\">What it should look like</a></p>\n<p>I tried many things but didn't work</p>\n"},{"tags":["java","android","zip4j"],"comments":[{"owner":{"account_id":960307,"reputation":107861,"user_id":984823,"display_name":"Joop Eggen"},"score":0,"creation_date":1692379223,"post_id":76931218,"comment_id":135619878,"body_markdown":"`addFile` followed by `removeFile`. Then save that `empty.zip` as resource and use `Files.copy` to create empty zip files.","body":"<code>addFile</code> followed by <code>removeFile</code>. Then save that <code>empty.zip</code> as resource and use <code>Files.copy</code> to create empty zip files."},{"owner":{"account_id":3243986,"reputation":1956,"user_id":2736153,"display_name":"Srikanth Reddy Lingala"},"score":0,"creation_date":1692404673,"post_id":76931218,"comment_id":135623063,"body_markdown":"I am just curious as to why you would want to create an empty zip file? Zip4j does not support it out of the box. You probably want to consider the hack in the comment above - i.e., to add a file and then remove that file to/from the zip","body":"I am just curious as to why you would want to create an empty zip file? Zip4j does not support it out of the box. You probably want to consider the hack in the comment above - i.e., to add a file and then remove that file to/from the zip"},{"owner":{"account_id":16436278,"reputation":1,"user_id":11873796,"display_name":"mahmoud hooda"},"score":0,"creation_date":1692457471,"post_id":76931218,"comment_id":135627329,"body_markdown":"@JoopEggen hi any another way to create zip file without add an then remove file?","body":"@JoopEggen hi any another way to create zip file without add an then remove file?"},{"owner":{"account_id":16436278,"reputation":1,"user_id":11873796,"display_name":"mahmoud hooda"},"score":0,"creation_date":1692458030,"post_id":76931218,"comment_id":135627412,"body_markdown":"@SrikanthReddyLingala is Zip4j  doesn&#39;t support to create empty zip file?","body":"@SrikanthReddyLingala is Zip4j  doesn&#39;t support to create empty zip file?"},{"owner":{"account_id":960307,"reputation":107861,"user_id":984823,"display_name":"Joop Eggen"},"score":0,"creation_date":1692463102,"post_id":76931218,"comment_id":135627976,"body_markdown":"If zip4j forgot to implement that, you can use java.util.zip ZipFile or as said use a manually created empty zip.","body":"If zip4j forgot to implement that, you can use java.util.zip ZipFile or as said use a manually created empty zip."},{"owner":{"account_id":16436278,"reputation":1,"user_id":11873796,"display_name":"mahmoud hooda"},"score":0,"creation_date":1692531758,"post_id":76931218,"comment_id":135633449,"body_markdown":"@JoopEggen I know an empty zip can be created with java.util.zip but I want to use only the zip4j library","body":"@JoopEggen I know an empty zip can be created with java.util.zip but I want to use only the zip4j library"},{"owner":{"account_id":960307,"reputation":107861,"user_id":984823,"display_name":"Joop Eggen"},"score":0,"creation_date":1692548496,"post_id":76931218,"comment_id":135635451,"body_markdown":"`new ZipFile(&quot;filename.zip&quot;).addFiles(new File[0]);` you probably already tried first.","body":"<code>new ZipFile(&quot;filename.zip&quot;).addFiles(new File[0]);</code> you probably already tried first."}],"answers":[{"tags":[],"owner":{"account_id":11370459,"reputation":321,"user_id":8336150,"display_name":"FARS"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1694985380,"creation_date":1692379331,"answer_id":76931417,"question_id":76931218,"body_markdown":"Try this:\r\n\r\n                File file = new File(&quot;path/to/folder/FOLDER_NAME&quot;);\r\n                if(!file.exists())\r\n                    file.mkdir();\r\n                ZipFile zipFile = new ZipFile(file);\r\n                zipFile.extractAll(file.getPath());\r\n","title":"Create empty zip file using Zip4j library","body":"<p>Try this:</p>\n<pre><code>            File file = new File(&quot;path/to/folder/FOLDER_NAME&quot;);\n            if(!file.exists())\n                file.mkdir();\n            ZipFile zipFile = new ZipFile(file);\n            zipFile.extractAll(file.getPath());\n</code></pre>\n"}],"owner":{"account_id":16436278,"reputation":1,"user_id":11873796,"display_name":"mahmoud hooda"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":98,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":1,"score":-1,"last_activity_date":1694985513,"creation_date":1692377357,"question_id":76931218,"body_markdown":"I want to know how to create empty zip file using Zip4j library.\r\n\r\nShouldn&#39;t this line of code be enough to create an empty zip file? When I tried it, it doesn&#39;t work.\r\n\r\n```\r\nZipFile zipFile1 = new ZipFile(zipFilePath);\r\n```\r\n\r\nMy question is for this lib : https://github.com/srikanth-lingala/zip4j\r\n\r\nEdit\r\n---\r\n\r\nAn answer told me to create ZipFile and add file in it then remove that file. I just want to create ZipFile directly without any complications, just function get path like &quot;/storage/emulated/0/ZipPro/zipPro.zip&quot; and create this zip file &quot;zipPro.zip&quot;.\r\n","title":"Create empty zip file using Zip4j library","body":"<p>I want to know how to create empty zip file using Zip4j library.</p>\n<p>Shouldn't this line of code be enough to create an empty zip file? When I tried it, it doesn't work.</p>\n<pre><code>ZipFile zipFile1 = new ZipFile(zipFilePath);\n</code></pre>\n<p>My question is for this lib : <a href=\"https://github.com/srikanth-lingala/zip4j\" rel=\"nofollow noreferrer\">https://github.com/srikanth-lingala/zip4j</a></p>\n<h2>Edit</h2>\n<p>An answer told me to create ZipFile and add file in it then remove that file. I just want to create ZipFile directly without any complications, just function get path like &quot;/storage/emulated/0/ZipPro/zipPro.zip&quot; and create this zip file &quot;zipPro.zip&quot;.</p>\n"},{"tags":["java",".net"],"answers":[{"tags":[],"owner":{"account_id":11683,"reputation":1438169,"user_id":22656,"accept_rate":86,"display_name":"Jon Skeet"},"down_vote_count":0,"up_vote_count":22,"is_accepted":true,"score":22,"last_activity_date":1276151254,"creation_date":1276151254,"answer_id":3012117,"question_id":3012108,"body_markdown":"Unfortunately I don&#39;t believe there is one - which is a pain in terms of providing hash maps etc with custom equality comparisons :(\r\n\r\nObviously there&#39;s `Comparable&lt;T&gt;` as an equivalent to `IComparable&lt;T&gt;` and `Comparator&lt;T&gt;` for `IComparer&lt;T&gt;`, but I don&#39;t believe there&#39;s any equivalent of `IEqualityComparer&lt;T&gt;` and `IEquatable&lt;T&gt;`.\r\n\r\nThere may be third party libraries providing the same sort of interface and maps which use them of course...","title":"What is the Java equivalent of .NET&#39;s IEquatable&lt;T&gt; Interface?","body":"<p>Unfortunately I don't believe there is one - which is a pain in terms of providing hash maps etc with custom equality comparisons :(</p>\n\n<p>Obviously there's <code>Comparable&lt;T&gt;</code> as an equivalent to <code>IComparable&lt;T&gt;</code> and <code>Comparator&lt;T&gt;</code> for <code>IComparer&lt;T&gt;</code>, but I don't believe there's any equivalent of <code>IEqualityComparer&lt;T&gt;</code> and <code>IEquatable&lt;T&gt;</code>.</p>\n\n<p>There may be third party libraries providing the same sort of interface and maps which use them of course...</p>\n"},{"tags":[],"owner":{"account_id":41184,"reputation":99,"user_id":119640,"display_name":"Ahmed Mostafa Abdel-Baky"},"down_vote_count":0,"up_vote_count":10,"is_accepted":false,"score":10,"last_activity_date":1694984746,"creation_date":1278932813,"answer_id":3227895,"question_id":3012108,"body_markdown":"If you are just looking for that interface to implement the [Equals(T)](https://learn.microsoft.com/en-us/dotnet/api/system.iequatable-1.equals) method, you can override the [Object.equals()](https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/lang/Object.html#equals(java.lang.Object)) method directly.","title":"What is the Java equivalent of .NET&#39;s IEquatable&lt;T&gt; Interface?","body":"<p>If you are just looking for that interface to implement the <a href=\"https://learn.microsoft.com/en-us/dotnet/api/system.iequatable-1.equals\" rel=\"nofollow noreferrer\">Equals(T)</a> method, you can override the <a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/lang/Object.html#equals(java.lang.Object)\" rel=\"nofollow noreferrer\">Object.equals()</a> method directly.</p>\n"},{"tags":[],"owner":{"account_id":150501,"reputation":78480,"user_id":363751,"accept_rate":35,"display_name":"supercat"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1324666347,"creation_date":1324666347,"answer_id":8619645,"question_id":3012108,"body_markdown":"The `IEquatable&lt;T&gt;` interface is primarily useful with generic classes that store many instances of what may be unboxed structure types; it&#39;s marginally useful with sealed types, and worse than useless with unsealed types.  There&#39;s thus really wouldn&#39;t be any point to implementing `IEquatable&lt;T&gt;` in Java.","title":"What is the Java equivalent of .NET&#39;s IEquatable&lt;T&gt; Interface?","body":"<p>The <code>IEquatable&lt;T&gt;</code> interface is primarily useful with generic classes that store many instances of what may be unboxed structure types; it's marginally useful with sealed types, and worse than useless with unsealed types.  There's thus really wouldn't be any point to implementing <code>IEquatable&lt;T&gt;</code> in Java.</p>\n"},{"tags":[],"owner":{"account_id":21487,"reputation":17831,"user_id":52239,"accept_rate":83,"display_name":"Craig Gidney"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1414784313,"creation_date":1414784313,"answer_id":26682215,"question_id":3012108,"body_markdown":"There&#39;s an equivalent type in Guava called [Equivalence&amp;lt;T&amp;gt;](http://docs.guava-libraries.googlecode.com/git/javadoc/com/google/common/base/Equivalence.html).","title":"What is the Java equivalent of .NET&#39;s IEquatable&lt;T&gt; Interface?","body":"<p>There's an equivalent type in Guava called <a href=\"http://docs.guava-libraries.googlecode.com/git/javadoc/com/google/common/base/Equivalence.html\" rel=\"nofollow\">Equivalence&lt;T&gt;</a>.</p>\n"}],"owner":{"account_id":3646,"reputation":68861,"user_id":5274,"accept_rate":69,"display_name":"Jonathan Allen"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":7180,"favorite_count":0,"down_vote_count":0,"up_vote_count":26,"accepted_answer_id":3012117,"answer_count":4,"score":26,"last_activity_date":1694984746,"creation_date":1276151135,"question_id":3012108,"body_markdown":"What is the Java equivalent of .NET&#39;s IEquatable&lt;T&gt; Interface?","title":"What is the Java equivalent of .NET&#39;s IEquatable&lt;T&gt; Interface?","body":"<p>What is the Java equivalent of .NET's IEquatable Interface?</p>\n"},{"tags":["java","axis","webservice-client","jboss6.x"],"comments":[{"owner":{"account_id":1405229,"reputation":8733,"user_id":1333133,"accept_rate":51,"display_name":"Satya"},"score":1,"creation_date":1336454809,"post_id":10492995,"comment_id":13562568,"body_markdown":"check the versions of jb/jdk and axis if they are compatible with each other","body":"check the versions of jb/jdk and axis if they are compatible with each other"},{"owner":{"account_id":894565,"reputation":11,"user_id":932128,"display_name":"Don"},"score":0,"creation_date":1336459888,"post_id":10492995,"comment_id":13563861,"body_markdown":"The issue got fixed .... :)\n\nNote: This was due to conflict between the jar in the jboss and jar in my class path ....","body":"The issue got fixed .... :)  Note: This was due to conflict between the jar in the jboss and jar in my class path ...."}],"answers":[{"tags":[],"owner":{"account_id":2235921,"reputation":2719,"user_id":1972317,"accept_rate":80,"display_name":"taringamberini"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1407419905,"creation_date":1407419905,"answer_id":25184485,"question_id":10492995,"body_markdown":"The exception is thrown because in your web application at least exists a jar which contains the `javax.xml.namespace.QName` class and that class conflicts with the same one contained in one of the JBoss&#39;s jar.\r\n\r\nYou should remove that (these) jar(s) from your web application when deploying on JBoss.\r\n\r\nA list of jars which contain the `javax.xml.namespace.QName` class is at http://www.findjar.com/class/javax/xml/namespace/QName.html","title":"loader constraint violation in interface itable initialization:","body":"<p>The exception is thrown because in your web application at least exists a jar which contains the <code>javax.xml.namespace.QName</code> class and that class conflicts with the same one contained in one of the JBoss's jar.</p>\n\n<p>You should remove that (these) jar(s) from your web application when deploying on JBoss.</p>\n\n<p>A list of jars which contain the <code>javax.xml.namespace.QName</code> class is at <a href=\"http://www.findjar.com/class/javax/xml/namespace/QName.html\" rel=\"nofollow\">http://www.findjar.com/class/javax/xml/namespace/QName.html</a></p>\n"},{"tags":[],"owner":{"account_id":5844226,"reputation":1,"user_id":4604797,"display_name":"Mohd Kose Avase"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1424854620,"creation_date":1424854620,"answer_id":28714828,"question_id":10492995,"body_markdown":"We encounter this issue if EAR/WAR file is created using eclipse\r\n\r\nIt is a clear case of having two jar files in the EAR/war file.\r\n\r\nOpen EAR/WAR fileusing WinRAR and check whether two axis.jar file is present. If yes then delete and the jar file and redeploy","title":"loader constraint violation in interface itable initialization:","body":"<p>We encounter this issue if EAR/WAR file is created using eclipse</p>\n\n<p>It is a clear case of having two jar files in the EAR/war file.</p>\n\n<p>Open EAR/WAR fileusing WinRAR and check whether two axis.jar file is present. If yes then delete and the jar file and redeploy</p>\n"}],"owner":{"account_id":894565,"reputation":11,"user_id":932128,"display_name":"Don"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":10543,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":2,"score":1,"last_activity_date":1694984745,"creation_date":1336454546,"question_id":10492995,"body_markdown":"When i deploy a web service project in jboss 6 .I am getting the below stackrace\r\n\r\n\r\nCaused by: java.lang.LinkageError: loader constraint violation in interface itable initialization: when resolving method &quot;org.apache.axis.message.MessageElement.getChildElements(Ljavax/xml/namespace/QName;)Ljava/util/Iterator;&quot; the class loader (instance of org/jboss/classloader/spi/base/BaseClassLoader) of the current class, org/apache/axis/message/MessageElement, and the class loader (instance of &lt;bootloader&gt;) for interface javax/xml/soap/SOAPElement have different Class objects for the type javax/xml/namespace/QName used in the signature\r\n\tat java.lang.Class.getDeclaredMethods0(Native Method) [:1.6.0_13]\r\n\tat java.lang.Class.privateGetDeclaredMethods(Class.java:2427) [:1.6.0_13]\r\n\tat java.lang.Class.getDeclaredMethods(Class.java:1791) [:1.6.0_13]\r\n\tat org.jboss.deployment.AnnotatedClassFilter.hasAnnotations(AnnotatedClassFilter.java:186) [:6.0.0.20100429-M3]\r\n\tat org.jboss.deployment.AnnotatedClassFilter.accepts(AnnotatedClassFilter.java:114) [:6.0.0.20100429-M3]\r\n\tat org.jboss.deployment.AnnotatedClassFilter.visit(AnnotatedClassFilter.java:99) [:6.0.0.20100429-M3]\r\n\tat org.jboss.vfs.VirtualFile.visit(VirtualFile.java:407) [jboss-vfs.jar:3.0.0.CR5]\r\n\tat org.jboss.vfs.VirtualFile.visit(VirtualFile.java:409) [jboss-vfs.jar:3.0.0.CR5]\r\n\tat org.jboss.vfs.VirtualFile.visit(VirtualFile.java:409) [jboss-vfs.jar:3.0.0.CR5]\r\n\tat org.jboss.vfs.VirtualFile.visit(VirtualFile.java:409) [jboss-vfs.jar:3.0.0.CR5]\r\n\tat org.jboss.vfs.VirtualFile.visit(VirtualFile.java:409) [jboss-vfs.jar:3.0.0.CR5]\r\n\tat org.jboss.vfs.VirtualFile.visit(VirtualFile.java:395) [jboss-vfs.jar:3.0.0.CR5]\r\n\tat org.jboss.web.deployers.WarAnnotationMetaDataDeployer.getClasses(WarAnnotationMetaDataDeployer.java:172) [:6.0.0.20100429-M3]\r\n\tat org.jboss.web.deployers.WarAnnotationMetaDataDeployer.processMetaData(WarAnnotationMetaDataDeployer.java:145) [:6.0.0.20100429-M3]\r\n\tat org.jboss.web.deployers.WarAnnotationMetaDataDeployer.deploy(WarAnnotationMetaDataDeployer.java:119) [:6.0.0.20100429-M3]\r\n\tat org.jboss.web.deployers.WarAnnotationMetaDataDeployer.deploy(WarAnnotationMetaDataDeployer.java:80) [:6.0.0.20100429-M3]\r\n\tat org.jboss.deployers.plugins.deployers.DeployerWrapper.deploy(DeployerWrapper.java:179) [:2.2.0.Alpha4]\r\n\t... 26 more\r\n\r\n\r\n\r\nPlease help me ..... :)\r\n","title":"loader constraint violation in interface itable initialization:","body":"<p>When i deploy a web service project in jboss 6 .I am getting the below stackrace</p>\n\n<p>Caused by: java.lang.LinkageError: loader constraint violation in interface itable initialization: when resolving method \"org.apache.axis.message.MessageElement.getChildElements(Ljavax/xml/namespace/QName;)Ljava/util/Iterator;\" the class loader (instance of org/jboss/classloader/spi/base/BaseClassLoader) of the current class, org/apache/axis/message/MessageElement, and the class loader (instance of ) for interface javax/xml/soap/SOAPElement have different Class objects for the type javax/xml/namespace/QName used in the signature\n    at java.lang.Class.getDeclaredMethods0(Native Method) [:1.6.0_13]\n    at java.lang.Class.privateGetDeclaredMethods(Class.java:2427) [:1.6.0_13]\n    at java.lang.Class.getDeclaredMethods(Class.java:1791) [:1.6.0_13]\n    at org.jboss.deployment.AnnotatedClassFilter.hasAnnotations(AnnotatedClassFilter.java:186) [:6.0.0.20100429-M3]\n    at org.jboss.deployment.AnnotatedClassFilter.accepts(AnnotatedClassFilter.java:114) [:6.0.0.20100429-M3]\n    at org.jboss.deployment.AnnotatedClassFilter.visit(AnnotatedClassFilter.java:99) [:6.0.0.20100429-M3]\n    at org.jboss.vfs.VirtualFile.visit(VirtualFile.java:407) [jboss-vfs.jar:3.0.0.CR5]\n    at org.jboss.vfs.VirtualFile.visit(VirtualFile.java:409) [jboss-vfs.jar:3.0.0.CR5]\n    at org.jboss.vfs.VirtualFile.visit(VirtualFile.java:409) [jboss-vfs.jar:3.0.0.CR5]\n    at org.jboss.vfs.VirtualFile.visit(VirtualFile.java:409) [jboss-vfs.jar:3.0.0.CR5]\n    at org.jboss.vfs.VirtualFile.visit(VirtualFile.java:409) [jboss-vfs.jar:3.0.0.CR5]\n    at org.jboss.vfs.VirtualFile.visit(VirtualFile.java:395) [jboss-vfs.jar:3.0.0.CR5]\n    at org.jboss.web.deployers.WarAnnotationMetaDataDeployer.getClasses(WarAnnotationMetaDataDeployer.java:172) [:6.0.0.20100429-M3]\n    at org.jboss.web.deployers.WarAnnotationMetaDataDeployer.processMetaData(WarAnnotationMetaDataDeployer.java:145) [:6.0.0.20100429-M3]\n    at org.jboss.web.deployers.WarAnnotationMetaDataDeployer.deploy(WarAnnotationMetaDataDeployer.java:119) [:6.0.0.20100429-M3]\n    at org.jboss.web.deployers.WarAnnotationMetaDataDeployer.deploy(WarAnnotationMetaDataDeployer.java:80) [:6.0.0.20100429-M3]\n    at org.jboss.deployers.plugins.deployers.DeployerWrapper.deploy(DeployerWrapper.java:179) [:2.2.0.Alpha4]\n    ... 26 more</p>\n\n<p>Please help me ..... :)</p>\n"},{"tags":["java","discord","discord4j"],"answers":[{"tags":[],"owner":{"account_id":15013161,"reputation":71,"user_id":10836980,"display_name":"Azn9"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1694983599,"creation_date":1694983599,"answer_id":77123553,"question_id":77123405,"body_markdown":"By adding .withMessageReference(...), you can specify the Id of a message to reply to, you don&#39;t need to get the message:\r\n```Java\r\nchannel.createMessage(message).withMessageReference(Snowflake.of(replyMessageId))\r\n```","title":"How to reply to a discord message using discord4j?","body":"<p>By adding .withMessageReference(...), you can specify the Id of a message to reply to, you don't need to get the message:</p>\n<pre><code>channel.createMessage(message).withMessageReference(Snowflake.of(replyMessageId))\n</code></pre>\n"}],"owner":{"account_id":11157659,"reputation":600,"user_id":8188875,"accept_rate":60,"display_name":"&#210;scar Raya"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":55,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":77123553,"answer_count":1,"score":0,"last_activity_date":1694983599,"creation_date":1694980861,"question_id":77123405,"body_markdown":"I&#39;m trying to implement a discord bot using discord4j library. For the moment I managed to make the bot respond to some simple commands like ping or making it say things.\r\n\r\nI&#39;m trying to look at all the tutorials I found but none of them show how to actually reply to a message.\r\n\r\nThis is an example of the code I use to make the bot send messages with a POST call:\r\n\r\n```\r\n@PostMapping(&quot;/say&quot;)\r\npublic @ResponseBody String say(\r\n\t@RequestParam(&quot;message&quot;) String message,\r\n\t@RequestParam(&quot;channelId&quot;) String channelID,\r\n\t@RequestParam(&quot;replyMessageId&quot;) String replyMessageId\r\n) {\t\r\n\tMessage messageToReply = client.getMessageById(Snowflake.of(channelID), Snowflake.of(replyMessageId)).block();\r\n\t\t\r\n\tclient.getChannelById(Snowflake.of(channelID)).ofType(MessageChannel.class)\r\n\t.flatMap(channel -&gt; channel.createMessage(message)).subscribe();\r\n\t\t\r\n\treturn &quot;OK&quot;;\r\n}\r\n```\r\n\r\nI want to use the message I retrieved (messageToReply) so the message I create replies to it.\r\n\r\nI tried looking at the documentation and to all the functions you can call after createMessage but I haven&#39;t found anything.","title":"How to reply to a discord message using discord4j?","body":"<p>I'm trying to implement a discord bot using discord4j library. For the moment I managed to make the bot respond to some simple commands like ping or making it say things.</p>\n<p>I'm trying to look at all the tutorials I found but none of them show how to actually reply to a message.</p>\n<p>This is an example of the code I use to make the bot send messages with a POST call:</p>\n<pre><code>@PostMapping(&quot;/say&quot;)\npublic @ResponseBody String say(\n    @RequestParam(&quot;message&quot;) String message,\n    @RequestParam(&quot;channelId&quot;) String channelID,\n    @RequestParam(&quot;replyMessageId&quot;) String replyMessageId\n) { \n    Message messageToReply = client.getMessageById(Snowflake.of(channelID), Snowflake.of(replyMessageId)).block();\n        \n    client.getChannelById(Snowflake.of(channelID)).ofType(MessageChannel.class)\n    .flatMap(channel -&gt; channel.createMessage(message)).subscribe();\n        \n    return &quot;OK&quot;;\n}\n</code></pre>\n<p>I want to use the message I retrieved (messageToReply) so the message I create replies to it.</p>\n<p>I tried looking at the documentation and to all the functions you can call after createMessage but I haven't found anything.</p>\n"},{"tags":["java","apache","tomcat","jboss","mod-proxy"],"answers":[{"tags":[],"owner":{"account_id":3410,"reputation":58506,"user_id":4918,"accept_rate":65,"display_name":"David Schmitt"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1221860960,"creation_date":1221860960,"answer_id":105928,"question_id":105754,"body_markdown":"### MaxClients\r\n\r\nThis is the fundamental cap of parallel client connections your apache should handle at once.\r\n\r\nWith prefork, only one request can be handled per process. Therefore the whole apache can process *at most* $MaxClients requests in the time it takes to handle a *single* request. Of course, this ideal maximum can only be reached if the application needs less than 1/$MaxClients resources per request.\r\n\r\nIf, for example, the application takes a second of cpu-time to answer a single request, setting MaxClients to four will limit your throughput to four requests per second: Each request uses up an apache connection and apache will only handle four at a time. But if the server has only two CPUs, not even this can be reached, because every wall-clock second only has two cpu seconds, but the requests would need four cpu seconds.\r\n\r\n### MinSpareServers\r\n\r\nThis tells apache how many idle processes should hang around. The bigger this number the more burst load apache can swallow before needing to spawn extra processes, which is expensive and thus slows down the current request.\r\n\r\nThe correct setting of this depends on your workload. If you have pages with many sub-requests (pictures, iframes, javascript, css) then hitting a single page might use up many more processes for a short time.\r\n\r\n### MaxSpareServers\r\n\r\nHaving too many unused apache processes hanging around just wastes memory, thus apache uses the MaxSpareServers number to limit the amount of spare processes it is holding in reserve for bursts of requests.\r\n\r\n### MaxRequestsPerChild\r\n\r\nThis limits the number of requests a single process will handle throughout its lifetime. If you are very concerned about stability, you should put an actual limit here to continually recycle the apache processes to prevent resource leaks from affecting the system.\r\n\r\n### StartServers\r\n\r\nThis is just the amount of processes apache starts by default. Set this to the usual amount of running apache processes to reduce warm-up time of your system. Even if you ignore this setting, apache will use the Min-/MaxSpareServers values to spawn new processes as required.\r\n\r\n### More information\r\n\r\nSee also [the documentation for apache&#39;s multi-processing modules][1].\r\n\r\n\r\n  [1]: http://httpd.apache.org/docs/2.0/mod/mpm_common.html","title":"Best practices for configuring Apache / Tomcat","body":"<h3>MaxClients</h3>\n\n<p>This is the fundamental cap of parallel client connections your apache should handle at once.</p>\n\n<p>With prefork, only one request can be handled per process. Therefore the whole apache can process <em>at most</em> $MaxClients requests in the time it takes to handle a <em>single</em> request. Of course, this ideal maximum can only be reached if the application needs less than 1/$MaxClients resources per request.</p>\n\n<p>If, for example, the application takes a second of cpu-time to answer a single request, setting MaxClients to four will limit your throughput to four requests per second: Each request uses up an apache connection and apache will only handle four at a time. But if the server has only two CPUs, not even this can be reached, because every wall-clock second only has two cpu seconds, but the requests would need four cpu seconds.</p>\n\n<h3>MinSpareServers</h3>\n\n<p>This tells apache how many idle processes should hang around. The bigger this number the more burst load apache can swallow before needing to spawn extra processes, which is expensive and thus slows down the current request.</p>\n\n<p>The correct setting of this depends on your workload. If you have pages with many sub-requests (pictures, iframes, javascript, css) then hitting a single page might use up many more processes for a short time.</p>\n\n<h3>MaxSpareServers</h3>\n\n<p>Having too many unused apache processes hanging around just wastes memory, thus apache uses the MaxSpareServers number to limit the amount of spare processes it is holding in reserve for bursts of requests.</p>\n\n<h3>MaxRequestsPerChild</h3>\n\n<p>This limits the number of requests a single process will handle throughout its lifetime. If you are very concerned about stability, you should put an actual limit here to continually recycle the apache processes to prevent resource leaks from affecting the system.</p>\n\n<h3>StartServers</h3>\n\n<p>This is just the amount of processes apache starts by default. Set this to the usual amount of running apache processes to reduce warm-up time of your system. Even if you ignore this setting, apache will use the Min-/MaxSpareServers values to spawn new processes as required.</p>\n\n<h3>More information</h3>\n\n<p>See also <a href=\"http://httpd.apache.org/docs/2.0/mod/mpm_common.html\" rel=\"noreferrer\">the documentation for apache's multi-processing modules</a>.</p>\n"},{"tags":[],"owner":{"account_id":8281,"reputation":2661,"user_id":14838,"accept_rate":87,"display_name":"f4nt"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1221872639,"creation_date":1221872639,"answer_id":106655,"question_id":105754,"body_markdown":"The default settings are generally decent starting points to see what your applications is really going to need. I don&#39;t know how much traffic you&#39;re expecting, so guessing at the MaxThreads, MaxClients, and MaxServers is a bit difficult. I can tell you that most of the customers I deal with (work for a linux web host, that deals mainly with customers running Java apps in Tomcat) use the default settings for quite some time without too many tweaks needed.\r\n\r\nIf you&#39;re not expecting much traffic, then these settings being &quot;too high&quot; really shouldn&#39;t effect you too much either. Apache&#39;s not going to allocate resources for the whole 256 potential clients unless it becomes necessary. The same goes for Tomcat as well. ","title":"Best practices for configuring Apache / Tomcat","body":"<p>The default settings are generally decent starting points to see what your applications is really going to need. I don't know how much traffic you're expecting, so guessing at the MaxThreads, MaxClients, and MaxServers is a bit difficult. I can tell you that most of the customers I deal with (work for a linux web host, that deals mainly with customers running Java apps in Tomcat) use the default settings for quite some time without too many tweaks needed.</p>\n\n<p>If you're not expecting much traffic, then these settings being \"too high\" really shouldn't effect you too much either. Apache's not going to allocate resources for the whole 256 potential clients unless it becomes necessary. The same goes for Tomcat as well. </p>\n"},{"tags":[],"owner":{"account_id":529,"reputation":5048,"user_id":686,"accept_rate":92,"display_name":"Zizzencs"},"down_vote_count":0,"up_vote_count":7,"is_accepted":true,"score":7,"last_activity_date":1221965058,"creation_date":1221965058,"answer_id":110080,"question_id":105754,"body_markdown":"You should consider the workload the servers might get.\r\n\r\nThe most important factor might be the number of simultaneously connected clients at peak times. Try to determine it and tune your settings in a way where:\r\n\r\n- there are enough processing threads in both Apache and Tomcat that they don&#39;t need to spawn new threads when the server is heavily loaded\r\n- there are not way more processing threads in the servers than needed as they would waste resources.\r\n\r\nWith this kind of setup you can minimize the internal maintenance overhead of the servers, that could help a lot, especially when your load is sporadic.\r\n\r\nFor example consider an application where you have ~300 new requests/second. Each request requires on average 2.5 seconds to serve. It means that at any given time you have ~750 requests that need to be handled simultaneously. In this situation you probably want to tune your servers so that they have ~750 processing threads at startup and you might want to add something like ~1000 processing threads at maximum to handle extremely high loads.\r\n\r\nAlso consider for exactly what do you require a thread for. In the previous example each request was independent from the others, there was no session tracking used. In a more &quot;web-ish&quot; scenario you might have users logged in to your website, and depending on your software used, Apache and/or Tomcat might need to use the same thread to serve the requests that come in one session. In this case, you might need more threads. However as I know Tomcat at least, you won&#39;t really need to consider this as it works with thread pools internally anyways.\r\n\r\n","title":"Best practices for configuring Apache / Tomcat","body":"<p>You should consider the workload the servers might get.</p>\n\n<p>The most important factor might be the number of simultaneously connected clients at peak times. Try to determine it and tune your settings in a way where:</p>\n\n<ul>\n<li>there are enough processing threads in both Apache and Tomcat that they don't need to spawn new threads when the server is heavily loaded</li>\n<li>there are not way more processing threads in the servers than needed as they would waste resources.</li>\n</ul>\n\n<p>With this kind of setup you can minimize the internal maintenance overhead of the servers, that could help a lot, especially when your load is sporadic.</p>\n\n<p>For example consider an application where you have ~300 new requests/second. Each request requires on average 2.5 seconds to serve. It means that at any given time you have ~750 requests that need to be handled simultaneously. In this situation you probably want to tune your servers so that they have ~750 processing threads at startup and you might want to add something like ~1000 processing threads at maximum to handle extremely high loads.</p>\n\n<p>Also consider for exactly what do you require a thread for. In the previous example each request was independent from the others, there was no session tracking used. In a more \"web-ish\" scenario you might have users logged in to your website, and depending on your software used, Apache and/or Tomcat might need to use the same thread to serve the requests that come in one session. In this case, you might need more threads. However as I know Tomcat at least, you won't really need to consider this as it works with thread pools internally anyways.</p>\n"}],"owner":{"account_id":3111,"reputation":2890,"user_id":4419,"accept_rate":89,"display_name":"Jeremy"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":19142,"favorite_count":0,"down_vote_count":0,"up_vote_count":18,"closed_date":1694987755,"accepted_answer_id":110080,"answer_count":3,"score":18,"last_activity_date":1694982640,"creation_date":1221859470,"question_id":105754,"body_markdown":"We are currently using Apache 2.2.3 and Tomcat 5 (Embedded in JBoss 4.2.2) using `mod_proxy_jk` as the connector.\r\n\r\nCan someone shed some light on the the correct way to calculate / configure the values below (as well as anything else that may be relevant).  Both Apache and Tomcat are running on separate machines and have copious amounts of ram (4gb each).\r\n\r\nRelevant server.xml portions:\r\n\r\n    &lt;Connector port=&quot;8009&quot;\r\n        address=&quot;${jboss.bind.address}&quot;\r\n        protocol=&quot;AJP/1.3&quot;\r\n        emptySessionPath=&quot;true&quot;\r\n        enableLookups=&quot;false&quot;\r\n        redirectPort=&quot;8443&quot;\r\n        maxThreads=&quot;320&quot;\r\n        connectionTimeout=&quot;45000&quot;\r\n    /&gt;\r\n\r\n\r\nRelevant httpd.conf portions: \r\n\r\n    &lt;IfModule prefork.c&gt;\r\n      StartServers       8\r\n      MinSpareServers    5\r\n      MaxSpareServers   20\r\n      ServerLimit      256\r\n      MaxClients       256\r\n      MaxRequestsPerChild  0\r\n    &lt;/IfModule&gt;\r\n","title":"Best practices for configuring Apache / Tomcat","body":"<p>We are currently using Apache 2.2.3 and Tomcat 5 (Embedded in JBoss 4.2.2) using <code>mod_proxy_jk</code> as the connector.</p>\n\n<p>Can someone shed some light on the the correct way to calculate / configure the values below (as well as anything else that may be relevant).  Both Apache and Tomcat are running on separate machines and have copious amounts of ram (4gb each).</p>\n\n<p>Relevant server.xml portions:</p>\n\n<pre><code>&lt;Connector port=\"8009\"\n    address=\"${jboss.bind.address}\"\n    protocol=\"AJP/1.3\"\n    emptySessionPath=\"true\"\n    enableLookups=\"false\"\n    redirectPort=\"8443\"\n    maxThreads=\"320\"\n    connectionTimeout=\"45000\"\n/&gt;\n</code></pre>\n\n<p>Relevant httpd.conf portions: </p>\n\n<pre><code>&lt;IfModule prefork.c&gt;\n  StartServers       8\n  MinSpareServers    5\n  MaxSpareServers   20\n  ServerLimit      256\n  MaxClients       256\n  MaxRequestsPerChild  0\n&lt;/IfModule&gt;\n</code></pre>\n"},{"tags":["java","multithreading"],"comments":[{"owner":{"account_id":11730609,"reputation":36976,"user_id":8586227,"display_name":"Davis Herring"},"score":0,"creation_date":1694921135,"post_id":77120326,"comment_id":135954101,"body_markdown":"@MarcLeBihan: Isn’t that just bad indentation?","body":"@MarcLeBihan: Isn’t that just bad indentation?"},{"owner":{"account_id":71739,"reputation":307142,"user_id":207421,"accept_rate":82,"display_name":"user207421"},"score":2,"creation_date":1694922910,"post_id":77120326,"comment_id":135954205,"body_markdown":"Do you have 5 CPUs? 5 cores? What is the basis for your expectation?","body":"Do you have 5 CPUs? 5 cores? What is the basis for your expectation?"},{"owner":{"account_id":23740623,"reputation":1,"user_id":17758716,"display_name":"Reilas"},"score":0,"creation_date":1694924601,"post_id":77120326,"comment_id":135954281,"body_markdown":"Reduce the _ThreadTest_ _run_ method&#39;s _loop_ iterations to _20000_; a fifth of _100000_.","body":"Reduce the <i>ThreadTest</i> <i>run</i> method&#39;s <i>loop</i> iterations to <i>20000</i>; a fifth of <i>100000</i>."},{"owner":{"account_id":29463130,"reputation":59,"user_id":22577448,"display_name":"Mark Zhou"},"score":0,"creation_date":1694935216,"post_id":77120326,"comment_id":135954946,"body_markdown":"I use DELL notebook PC with 12th Generation Intel&#174; Core™ i5 Processors i5-1245U.\n\nFrom the specification, I saw:\n\nTotal Cores                10\nPerformance-cores    2\nEfficient-cores           8","body":"I use DELL notebook PC with 12th Generation Intel&#174; Core™ i5 Processors i5-1245U.  From the specification, I saw:  Total Cores                10 Performance-cores    2 Efficient-cores           8"},{"owner":{"account_id":71739,"reputation":307142,"user_id":207421,"accept_rate":82,"display_name":"user207421"},"score":2,"creation_date":1694938168,"post_id":77120326,"comment_id":135955177,"body_markdown":"OK well this loop creates immense amounts of garbage, and the garbage collector isn&#39;t as completely multithreaded as your code is. Is there a reason why you chose String building as the test?","body":"OK well this loop creates immense amounts of garbage, and the garbage collector isn&#39;t as completely multithreaded as your code is. Is there a reason why you chose String building as the test?"}],"answers":[{"tags":[],"owner":{"account_id":23740623,"reputation":1,"user_id":17758716,"display_name":"Reilas"},"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1694935669,"creation_date":1694924150,"answer_id":77120449,"question_id":77120326,"body_markdown":"&gt; _&quot;... In the 2nd demo, I create 5 threads, run the same function parallel in 5 threads, I expect the time consumption is similar with 1st project, means close to 5 seconds. ...&quot;_\r\n\r\nI think _&quot;concurrent&quot;_ is a better way to term a _&quot;threaded&quot;_ process.\r\n\r\nTo elaborate, typically a program executes in a linear fashion.  \r\nThis linear path is termed the _&quot;data-flow&quot;_, or _&quot;[control-flow](https://en.wikipedia.org/wiki/Control_flow)&quot;_.  \r\n\r\nWhen a program utilizes threads, more than one _control-flow_ is executed in _&quot;parallel&quot;_, or _&quot;concurrently&quot;_.  \r\nYou could now visualize this path as having branched.\r\n\r\nSo, the _5_ _threads_ here are going to weave, or &quot;thread&quot; together to execute each of their own instructions, concurrently.  \r\n_CPU_ time is vital.\r\n\r\nIn conclusion, the _5_ threads will actually take about _5&amp;times;_ longer.\r\n\r\nFor _ThreadTest_, divide the _run_ method&#39;s _loop_ iterations, by _5_.  \r\nIn this example I reduced the value from _100000_ to _100_.\r\n\r\n```java\r\nclass ThreadTest extends Thread\r\n{\r\n    int i, limit;\r\n\r\n    public static void main(String[] args) throws BrokenBarrierException, InterruptedException {\r\n        // TODO Auto-generated method stub\r\n\r\n        ThreadTest[ ] ObjArray = new ThreadTest[5];\r\n\r\n        int n = 100 / 5;\r\n        for(int i=0;i&lt;5;i++)\r\n            ObjArray[i]= new ThreadTest(n * i, (n * i) + n);\r\n\r\n        Date BeforeDate = new Date();\r\n\r\n        for(int i=0; i&lt;5;i++ )\r\n        {\r\n            ObjArray[i].start();\r\n        }\r\n\r\n        try\r\n        {\r\n\r\n            for(int i=0; i&lt;5;i++ )\r\n                ObjArray[i].join();\r\n\r\n        }\r\n        catch(InterruptedException e)\r\n        {\r\n\r\n        }\r\n\r\n\r\n        Date AfterDate = new Date();\r\n        Double Time_Consume = (AfterDate.getTime()- BeforeDate.getTime())/1000.0;\r\n        System.out.println(&quot;Time Consume= &quot; + Time_Consume + &quot; Seconds&quot;  );\r\n\r\n\r\n\r\n    }\r\n\r\n    ThreadTest(int i, int limit) {\r\n        this.i = i;\r\n        this.limit = limit;\r\n    }\r\n\r\n    public void run() {\r\n        String tmp = &quot;&quot;;\r\n        for (int i = this.i; i &lt;= limit; i++) {\r\n            tmp += i;\r\n        }\r\n    }\r\n\r\n}\r\n```\r\n\r\nHere are a few comparisons.\r\n\r\n```java\r\nNoThread, Time Consume= 0.046 Seconds\r\nThreadTest, Time Consume= 0.054 Seconds\r\n\r\nNoThread, Time Consume= 0.027 Seconds\r\nThreadTest Time Consume= 0.029 Seconds\r\n\r\nNoThread, Time Consume= 0.03 Seconds\r\nThreadTest, Time Consume= 0.022 Seconds\r\n```\r\n\r\nOn a final note, there is the _[CyclicBarrier](https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/util/concurrent/CyclicBarrier.html)_ class which provides a buffer for threads working together to produce 1 value.","title":"Why is there no significant difference with or without thread?","body":"<blockquote>\n<p><em>&quot;... In the 2nd demo, I create 5 threads, run the same function parallel in 5 threads, I expect the time consumption is similar with 1st project, means close to 5 seconds. ...&quot;</em></p>\n</blockquote>\n<p>I think <em>&quot;concurrent&quot;</em> is a better way to term a <em>&quot;threaded&quot;</em> process.</p>\n<p>To elaborate, typically a program executes in a linear fashion.<br />\nThis linear path is termed the <em>&quot;data-flow&quot;</em>, or <em>&quot;<a href=\"https://en.wikipedia.org/wiki/Control_flow\" rel=\"nofollow noreferrer\">control-flow</a>&quot;</em>.</p>\n<p>When a program utilizes threads, more than one <em>control-flow</em> is executed in <em>&quot;parallel&quot;</em>, or <em>&quot;concurrently&quot;</em>.<br />\nYou could now visualize this path as having branched.</p>\n<p>So, the <em>5</em> <em>threads</em> here are going to weave, or &quot;thread&quot; together to execute each of their own instructions, concurrently.<br />\n<em>CPU</em> time is vital.</p>\n<p>In conclusion, the <em>5</em> threads will actually take about <em>5×</em> longer.</p>\n<p>For <em>ThreadTest</em>, divide the <em>run</em> method's <em>loop</em> iterations, by <em>5</em>.<br />\nIn this example I reduced the value from <em>100000</em> to <em>100</em>.</p>\n<pre class=\"lang-java prettyprint-override\"><code>class ThreadTest extends Thread\n{\n    int i, limit;\n\n    public static void main(String[] args) throws BrokenBarrierException, InterruptedException {\n        // TODO Auto-generated method stub\n\n        ThreadTest[ ] ObjArray = new ThreadTest[5];\n\n        int n = 100 / 5;\n        for(int i=0;i&lt;5;i++)\n            ObjArray[i]= new ThreadTest(n * i, (n * i) + n);\n\n        Date BeforeDate = new Date();\n\n        for(int i=0; i&lt;5;i++ )\n        {\n            ObjArray[i].start();\n        }\n\n        try\n        {\n\n            for(int i=0; i&lt;5;i++ )\n                ObjArray[i].join();\n\n        }\n        catch(InterruptedException e)\n        {\n\n        }\n\n\n        Date AfterDate = new Date();\n        Double Time_Consume = (AfterDate.getTime()- BeforeDate.getTime())/1000.0;\n        System.out.println(&quot;Time Consume= &quot; + Time_Consume + &quot; Seconds&quot;  );\n\n\n\n    }\n\n    ThreadTest(int i, int limit) {\n        this.i = i;\n        this.limit = limit;\n    }\n\n    public void run() {\n        String tmp = &quot;&quot;;\n        for (int i = this.i; i &lt;= limit; i++) {\n            tmp += i;\n        }\n    }\n\n}\n</code></pre>\n<p>Here are a few comparisons.</p>\n<pre class=\"lang-java prettyprint-override\"><code>NoThread, Time Consume= 0.046 Seconds\nThreadTest, Time Consume= 0.054 Seconds\n\nNoThread, Time Consume= 0.027 Seconds\nThreadTest Time Consume= 0.029 Seconds\n\nNoThread, Time Consume= 0.03 Seconds\nThreadTest, Time Consume= 0.022 Seconds\n</code></pre>\n<p>On a final note, there is the <em><a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/util/concurrent/CyclicBarrier.html\" rel=\"nofollow noreferrer\">CyclicBarrier</a></em> class which provides a buffer for threads working together to produce 1 value.</p>\n"},{"tags":[],"owner":{"account_id":6651855,"reputation":224830,"user_id":5133585,"accept_rate":96,"display_name":"Sweeper"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1694926210,"creation_date":1694926210,"answer_id":77120510,"question_id":77120326,"body_markdown":"Running multiple threads doesn&#39;t necessarily mean they all run *in parallel*. You need to have enough CPU cores to run CPU-bound code with true parallelism. If you only have one core, then your CPU-bound code will not run any faster, no matter how many threads you have. The code will probably be slower, because of the overhead of context switches and other messy things introduced by multithreading.\r\n\r\nHaving multiple threads simply makes the code run *concurrently*. If you put a `System.out.println(&quot;Done!&quot;)` at the end of `run`, you will see that they all get printed at roughly the same time. The threads are not run sequentially, one after another has finished.\r\n\r\nNow let&#39;s say you do have enough cores to run 5 threads in parallel, then you will see your expected result if each thread does something like this:\r\n\r\n```\r\nint x = 0;\r\nfor (int j = 0; j &lt; Integer.MAX_VALUE; j++) {\r\n    for (int k = 0; k &lt; 4; k++) {\r\n        x += j + k;\r\n    }\r\n}\r\n```\r\n\r\nFor me, I have 4 cores, so running 3 threads with the above code (the GC uses the last core) gives me roughly the same time as running 1 thread. If I increase it to 4 threads, the execution time starts to increase.\r\n\r\nWhat makes your code slow is that you are concatenating strings, which creates new objects. And [memory can&#39;t really be allocated in parallel][1]. It takes ~5.3 seconds for me with 3 threads, and `3.7 seconds with 1 thread. Notice that this isn&#39;t a simple &quot;time taken by one thread multiplied by the number of threads&quot;. There *are* places where parallelism helps, but it&#39;s just that the memory allocation can&#39;t be parallelised.\r\n\r\n\r\n\r\n\r\n  [1]: https://stackoverflow.com/q/4859263/5133585","title":"Why is there no significant difference with or without thread?","body":"<p>Running multiple threads doesn't necessarily mean they all run <em>in parallel</em>. You need to have enough CPU cores to run CPU-bound code with true parallelism. If you only have one core, then your CPU-bound code will not run any faster, no matter how many threads you have. The code will probably be slower, because of the overhead of context switches and other messy things introduced by multithreading.</p>\n<p>Having multiple threads simply makes the code run <em>concurrently</em>. If you put a <code>System.out.println(&quot;Done!&quot;)</code> at the end of <code>run</code>, you will see that they all get printed at roughly the same time. The threads are not run sequentially, one after another has finished.</p>\n<p>Now let's say you do have enough cores to run 5 threads in parallel, then you will see your expected result if each thread does something like this:</p>\n<pre><code>int x = 0;\nfor (int j = 0; j &lt; Integer.MAX_VALUE; j++) {\n    for (int k = 0; k &lt; 4; k++) {\n        x += j + k;\n    }\n}\n</code></pre>\n<p>For me, I have 4 cores, so running 3 threads with the above code (the GC uses the last core) gives me roughly the same time as running 1 thread. If I increase it to 4 threads, the execution time starts to increase.</p>\n<p>What makes your code slow is that you are concatenating strings, which creates new objects. And <a href=\"https://stackoverflow.com/q/4859263/5133585\">memory can't really be allocated in parallel</a>. It takes ~5.3 seconds for me with 3 threads, and `3.7 seconds with 1 thread. Notice that this isn't a simple &quot;time taken by one thread multiplied by the number of threads&quot;. There <em>are</em> places where parallelism helps, but it's just that the memory allocation can't be parallelised.</p>\n"},{"tags":[],"owner":{"account_id":322981,"reputation":310745,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1694981579,"creation_date":1694931984,"answer_id":77120709,"question_id":77120326,"body_markdown":"You have several problems with your code, some of which directly affect the answer to your question.\r\n\r\nTo begin with, in modern Java we rarely need to directly address the `Thread` class. Instead, use the Executors framework in Java 5+. Define your task as a [`Runnable`][1] or [`Callable`][2] object. Submit an instance(s) to an executor service. That [executor service][3] may be backed by a pool of threads, without you needing to manage the setup/teardown of those threads, nor do you need to manage scheduling tasks amongst those threads.\r\n\r\nFor clarity, let&#39;s move your `main` method to its own class. That way we can move your task work into a class implementing `Runnable`, meaning it implements a `run` method. No `extends Thread` at all.\r\n\r\nYour task code does nothing productive. Nothing is passed to other code, nothing written to storage, nothing called over the network, no saving to a database, and nothing reported to the console. Such code may be optimized away by the compiler. So we add a call to `System.out.println` to avoid any such optimization.\r\n\r\nYour task code converts an integer to text, and concatenates. In real work, we would use [`StringBuilder`][4] for possibly more efficiency (though this may be done behind the scenes for you implicitly in some implementations of Java) and to make the code more self-documenting. \r\n\r\nWe want to report elapsed time for each task run. \r\n\r\nFor this, do *not* use `java.util.Date`. Indeed, do not ever use either of the `Date` classes. These were years ago supplanted by the modern *java.time* classes defined in JSR 310 for Java 8+. The `java.util.Date` class specifically was replaced by `java.time.Instant`.\r\n\r\nFor microbenchmarking, the finest time-tracking is [`System.nanoTime`][5]. This call grabs the current value of an incrementing count of passing nanoseconds.\r\n\r\nUse underscore to format your numeric literals for easier reading. So `100_000`. \r\n\r\nVariable names in Java, by convention, start with a lowercase letter.\r\n\r\nSo here is our task class:\r\n\r\n```java\r\npackage work.basil.example.looping;\r\n\r\nimport java.time.Duration;\r\nimport java.time.Instant;\r\n\r\npublic class Counter implements Runnable\r\n{\r\n    @Override\r\n    public void run ( )\r\n    {\r\n        long startNanos = System.nanoTime ( );\r\n        StringBuilder tmp = new StringBuilder ( );\r\n        for ( int i = 0 ; i &lt; 100_000 ; i++ )\r\n        {\r\n            tmp.append ( i );  // Converting integer number to text, and concatenating.\r\n        }\r\n        Duration elapsed = Duration.ofNanos ( System.nanoTime ( ) - startNanos );\r\n        System.out.println ( &quot;Thread ID: &quot; + Thread.currentThread ( ).threadId ( ) + &quot; at &quot; + Instant.now ( ) + &quot; result character length is: &quot; + tmp.codePoints ( ).count ( ) + &quot;. Elapsed: &quot; + elapsed );\r\n    }\r\n}\r\n```\r\n\r\nNow an app class to exercise that task.\r\n\r\n```java\r\npackage work.basil.example.looping;\r\n\r\npublic class App\r\n{\r\n    public static void main ( String[] args )\r\n    {\r\n        App app = new App() ;\r\n        app.demoInThisThread();\r\n    }\r\n\r\n    private void demoInThisThread ( )\r\n    {\r\n        Runnable task = new Counter () ;\r\n        task.run() ;\r\n    }\r\n}\r\n```\r\n\r\nWhen run:\r\n\r\n&gt;Thread ID: 1 at 2023-09-17T06:01:24.691381Z result character length is: 488890. Elapsed: PT0.003877583S\r\n\r\nOn my machine (MacBook Pro, 16-inch, 2021, Apple M1 Pro, 16 GB, macOS Ventura 13.5.2), your code took PT1.456853583S. So you can see, compared to this code, how much more efficient `StringBuilder` is over `String`. But we don&#39;t really want efficiency for this threading test, so I&#39;ll restore the use of `String`.\r\n\r\nBe aware that such a use of `String` concatenation will generate huge amounts of garbage for the garbage collector to manage, as [commented by user207421][6]. So much garbage may affect results in unpredictable ways.\r\n\r\n```java\r\npackage work.basil.example.looping;\r\n\r\nimport java.time.Duration;\r\nimport java.time.Instant;\r\n\r\npublic class Counter implements Runnable\r\n{\r\n    @Override\r\n    public void run ( )\r\n    {\r\n        long startNanos = System.nanoTime ( );\r\n        String tmp = &quot;&quot;;\r\n        for ( int i = 0 ; i &lt; 100000 ; i++ ) tmp += i;\r\n        Duration elapsed = Duration.ofNanos ( System.nanoTime ( ) - startNanos );\r\n        System.out.println ( &quot;Thread ID: &quot; + Thread.currentThread ( ).threadId ( ) + &quot; at &quot; + Instant.now ( ) + &quot; result character length is: &quot; + tmp.codePoints ( ).count ( ) + &quot;. Elapsed: &quot; + elapsed );\r\n    }\r\n}\r\n```\r\n\r\nWhen run:\r\n\r\n&gt;Thread ID: 1 at 2023-09-17T06:09:03.218903Z result character length is: 488890. Elapsed: PT1.401553292S\r\n\r\nThen you spawned five threads. In each you performed the same task, a loop of 100,000 iterations. So you were doing five times as much work, a total of 500,000 iterations. More work is more work, so threading is *not* going to make that extra work vanish. The CPU core(s) must still do five times as many string concatenations. \r\n\r\nTo make a more fair examination of the benefits of threading, you should divide the work so that each thread is doing a *portion* of the 100,000. We will make this possible by adding a constructor to our task class, passing the desired number of iterations.\r\n\r\n```java\r\npackage work.basil.example.looping;\r\n\r\nimport java.time.Duration;\r\nimport java.time.Instant;\r\n\r\npublic class Counter implements Runnable\r\n{\r\n    private final int count;\r\n\r\n    public Counter ( final int count ) { this.count = count; }\r\n\r\n    @Override\r\n    public void run ( )\r\n    {\r\n        long startNanos = System.nanoTime ( );\r\n        String tmp = &quot;&quot;;\r\n        for ( int i = 0 ; i &lt; this.count ; i++ ) tmp += i;\r\n        Duration elapsed = Duration.ofNanos ( System.nanoTime ( ) - startNanos );\r\n        System.out.println ( &quot;Thread ID: &quot; + Thread.currentThread ( ).threadId ( ) + &quot; at &quot; + Instant.now ( ) + &quot; for a count of &quot; + this.count + &quot; produced result character length of: &quot; + tmp.codePoints ( ).count ( ) + &quot;. Elapsed: &quot; + elapsed );\r\n    }\r\n}\r\n```\r\n\r\nAnd our app code:\r\n\r\n```java\r\npackage work.basil.example.looping;\r\n\r\npublic class App\r\n{\r\n    public static void main ( String[] args )\r\n    {\r\n        App app = new App ( );\r\n        app.demoInThisThread ( );\r\n    }\r\n\r\n    private void demoInThisThread ( )\r\n    {\r\n        Runnable task = new Counter ( 100_000 );\r\n        task.run ( );\r\n    }\r\n}\r\n```\r\n\r\nResults are the same.\r\n\r\nNow we are ready to run five threads, each with 20,000 iterations as their portion of the 100,000.\r\n\r\nWe instantiate an executor service backed by five threads. Then we loop to submit five instances of our task to that executor service. We use try-with-resources syntax to automatically close our `ExecutorService` after the submitted tasks have completed. \r\n\r\n```java\r\npackage work.basil.example.looping;\r\n\r\nimport java.time.Duration;\r\nimport java.time.Instant;\r\nimport java.util.concurrent.ExecutorService;\r\nimport java.util.concurrent.Executors;\r\n\r\npublic class App\r\n{\r\n    public static void main ( String[] args )\r\n    {\r\n        App app = new App ( );\r\n//        app.demoInThisThread ( );\r\n        app.demoInBackgroundThreads ( );\r\n    }\r\n\r\n    private void demoInBackgroundThreads ( )\r\n    {\r\n        long startNanos = System.nanoTime ( );\r\n        try ( ExecutorService executorService = Executors.newFixedThreadPool ( 5 ) ; )\r\n        {\r\n            final int countTasks = 5;\r\n            for ( int ordinal = 0 ; ordinal &lt; countTasks ; ordinal++ )\r\n            {\r\n                Runnable task = new Counter ( 20_000 );\r\n                executorService.submit ( task );\r\n            }\r\n        }\r\n        Duration elapsed = Duration.ofNanos ( System.nanoTime ( ) - startNanos );\r\n        System.out.println ( &quot;Executor Service elapsed = &quot; + elapsed + &quot; at &quot; + Instant.now ( ) );\r\n    }\r\n\r\n    private void demoInThisThread ( )\r\n    {\r\n        Runnable task = new Counter ( 100_000 );\r\n        task.run ( );\r\n    }\r\n}\r\n```\r\n\r\nThe results are startlingly different. Instead of taking well over a second, doing all 5 * 20,000 concatenations took a small fraction of a second, 1/20th of a second. Each task took about 1/20th of a second, so mathematically we know that on this 10-core machine we were getting code executing simultaneously, with each of five cores firing. \r\n\r\n```none\r\nThread ID: 24 at 2023-09-17T06:27:57.068636Z for a count of 20000 produced result character length of: 88890. Elapsed: PT0.1823735S\r\nThread ID: 23 at 2023-09-17T06:27:57.067782Z for a count of 20000 produced result character length of: 88890. Elapsed: PT0.18159025S\r\nThread ID: 25 at 2023-09-17T06:27:57.070629Z for a count of 20000 produced result character length of: 88890. Elapsed: PT0.18414225S\r\nThread ID: 22 at 2023-09-17T06:27:57.070073Z for a count of 20000 produced result character length of: 88890. Elapsed: PT0.183828875S\r\nThread ID: 21 at 2023-09-17T06:27:57.062894Z for a count of 20000 produced result character length of: 88890. Elapsed: PT0.176261S\r\nExecutor Service elapsed = PT0.190679125S at 2023-09-17T06:27:57.075335Z\r\n```\r\n\r\nSo why so much faster? Well, our test is flawed. Concatenating `String` objects repeatedly results in a continually growing string. But 20,000 concatenations grows a much smaller string than 100,000 concatenations. So much smaller that much less work was involved. So this is not a good test. (Benchmarking is difficult work.)\r\n\r\n\r\nA better test might be generating random numbers and calculating an average. On first effort, this work was so very fast that I expanded the iterations by a multiple of ten (1 million, &amp; 200,000). And I involved `String` ↔️ `Integer` ↔️ `int` conversions as more work. Even still, we get only split second results. \r\n\r\nThe task:\r\n\r\n```java\r\npackage work.basil.example.looping;\r\n\r\nimport java.time.Duration;\r\nimport java.time.Instant;\r\nimport java.util.ArrayList;\r\nimport java.util.List;\r\nimport java.util.concurrent.ThreadLocalRandom;\r\n\r\npublic class Averaged implements Runnable\r\n{\r\n    private final int count;\r\n    private final List &lt; String &gt; randoms;\r\n\r\n    public Averaged ( final int count )\r\n    {\r\n        this.count = count;\r\n        this.randoms = new ArrayList &lt;&gt; ( this.count );\r\n    }\r\n\r\n    @Override\r\n    public void run ( )\r\n    {\r\n        long startNanos = System.nanoTime ( );\r\n        for ( int i = 0 ; i &lt; this.count ; i++ )\r\n        {\r\n            int x = ThreadLocalRandom.current ( ).nextInt ( 1 , Integer.MAX_VALUE );\r\n            this.randoms.add ( String.valueOf ( x ) );\r\n        }\r\n        double average = this.randoms.stream ( ).map ( Integer :: valueOf ).mapToInt ( Integer :: intValue ).summaryStatistics ( ).getAverage ( );  // Intentionally involved auto-boxing as extra work for our test.\r\n        Duration elapsed = Duration.ofNanos ( System.nanoTime ( ) - startNanos );\r\n        System.out.println ( &quot;Thread ID: &quot; + Thread.currentThread ( ).threadId ( ) + &quot; at &quot; + Instant.now ( ) + &quot; for a count of &quot; + this.count + &quot; produced average of: &quot; + average + &quot;. Elapsed: &quot; + elapsed );\r\n    }\r\n}\r\n```\r\n\r\nAnd the app class:\r\n\r\n```java\r\npackage work.basil.example.looping;\r\n\r\nimport java.time.Duration;\r\nimport java.time.Instant;\r\nimport java.util.concurrent.ExecutorService;\r\nimport java.util.concurrent.Executors;\r\n\r\npublic class App\r\n{\r\n    public static void main ( String[] args )\r\n    {\r\n        App app = new App ( );\r\n//        app.demoInThisThread ( );\r\n//        app.demoInBackgroundThreads ( );\r\n//        app.demoSumsInSameThread ( );\r\n        app.demoSumsInBackgroundThreads ( );\r\n    }\r\n\r\n    private void demoSumsInBackgroundThreads ( )\r\n    {\r\n        long startNanos = System.nanoTime ( );\r\n        try ( ExecutorService executorService = Executors.newFixedThreadPool ( 5 ) ; )\r\n        {\r\n            final int countTasks = 5;\r\n            for ( int ordinal = 0 ; ordinal &lt; countTasks ; ordinal++ )\r\n            {\r\n                Runnable task = new Averaged ( 200_000 );\r\n                executorService.submit ( task );\r\n            }\r\n        }\r\n        Duration elapsed = Duration.ofNanos ( System.nanoTime ( ) - startNanos );\r\n        System.out.println ( &quot;Executor Service elapsed = &quot; + elapsed + &quot; at &quot; + Instant.now ( ) );\r\n    }\r\n\r\n    private void demoSumsInSameThread ( )\r\n    {\r\n        Runnable task = new Averaged ( 1_000_000 );\r\n        task.run ( );\r\n    }\r\n\r\n    private void demoInBackgroundThreads ( )\r\n    {\r\n        long startNanos = System.nanoTime ( );\r\n        try ( ExecutorService executorService = Executors.newFixedThreadPool ( 5 ) ; )\r\n        {\r\n            final int countTasks = 5;\r\n            for ( int ordinal = 0 ; ordinal &lt; countTasks ; ordinal++ )\r\n            {\r\n                Runnable task = new Counter ( 20_000 );\r\n                executorService.submit ( task );\r\n            }\r\n        }\r\n        Duration elapsed = Duration.ofNanos ( System.nanoTime ( ) - startNanos );\r\n        System.out.println ( &quot;Executor Service elapsed = &quot; + elapsed + &quot; at &quot; + Instant.now ( ) );\r\n    }\r\n\r\n    private void demoInThisThread ( )\r\n    {\r\n        Runnable task = new Counter ( 100_000 );\r\n        task.run ( );\r\n    }\r\n}\r\n```\r\n\r\nWhen run in the same thread, the million numbers take about 8/10 of a second.\r\n\r\n```none\r\nThread ID: 1 at 2023-09-17T07:05:24.256743Z for a count of 1000000 produced average of: 1.073135902798566E9. Elapsed: PT0.084711792S\r\n```\r\n\r\nWhen run across threads, the 200,000 * 5 numbers take about 8/10 or 9/10 of a second. Each of the threaded tasks also takes 8/10 of a second. So again, we know mathematically that on this machine we are getting separate cores running simultaneously.\r\n\r\n```none\r\nThread ID: 21 at 2023-09-17T07:06:14.812452Z for a count of 200000 produced average of: 1.073304324790475E9. Elapsed: PT0.080241167S\r\nThread ID: 23 at 2023-09-17T07:06:14.812469Z for a count of 200000 produced average of: 1.073028061541545E9. Elapsed: PT0.080389542S\r\nThread ID: 25 at 2023-09-17T07:06:14.813533Z for a count of 200000 produced average of: 1.07282572828644E9. Elapsed: PT0.081019291S\r\nThread ID: 24 at 2023-09-17T07:06:14.813595Z for a count of 200000 produced average of: 1.076256760047685E9. Elapsed: PT0.081408875S\r\nThread ID: 22 at 2023-09-17T07:06:14.813600Z for a count of 200000 produced average of: 1.073103576810605E9. Elapsed: PT0.081662959S\r\nExecutor Service elapsed = PT0.098596875S at 2023-09-17T07:06:14.828988Z\r\n```\r\n\r\nWhy no savings when threaded? I don&#39;t really know why this particular task takes about the same amount of time for 200,000 as for 1 million. Again, benchmarking is difficult.\r\n\r\nIf we change the threaded test to do 10 tasks of 100,000 numbers each, on the same 10 core machine, we do see a dramatic drop in elapsed time for *some* of the tasks, taking only 2/10 of a second where we might expect 4/10. But the overall grouped time is about the same, 9/10 of a second. \r\n\r\n```none\r\nThread ID: 25 at 2023-09-17T19:43:06.051570Z for a count of 100000 produced average of: 1.07519247943123E9. Elapsed: PT0.057728417S\r\nThread ID: 24 at 2023-09-17T19:43:06.053705Z for a count of 100000 produced average of: 1.07496720067476E9. Elapsed: PT0.060560125S\r\nThread ID: 22 at 2023-09-17T19:43:06.053489Z for a count of 100000 produced average of: 1.07711825115815E9. Elapsed: PT0.060462083S\r\nThread ID: 21 at 2023-09-17T19:43:06.052852Z for a count of 100000 produced average of: 1.07550130293061E9. Elapsed: PT0.059825042S\r\nThread ID: 23 at 2023-09-17T19:43:06.051057Z for a count of 100000 produced average of: 1.0755424631933E9. Elapsed: PT0.057704334S\r\nThread ID: 21 at 2023-09-17T19:43:06.080795Z for a count of 100000 produced average of: 1.07392238112309E9. Elapsed: PT0.013798042S\r\nThread ID: 25 at 2023-09-17T19:43:06.081217Z for a count of 100000 produced average of: 1.07513370104224E9. Elapsed: PT0.014378042S\r\nThread ID: 24 at 2023-09-17T19:43:06.083975Z for a count of 100000 produced average of: 1.07646007807133E9. Elapsed: PT0.017139583S\r\nThread ID: 22 at 2023-09-17T19:43:06.084319Z for a count of 100000 produced average of: 1.07482906529202E9. Elapsed: PT0.017476875S\r\nThread ID: 23 at 2023-09-17T19:43:06.084813Z for a count of 100000 produced average of: 1.07169205436235E9. Elapsed: PT0.017668375S\r\nExecutor Service elapsed = PT0.093519875S at 2023-09-17T19:43:06.085102Z\r\n```\r\n\r\nKeep in mind that on this machine’s Apple Silicon M1 Pro chip, 2 of the cores are tuned for efficiency, while the other 8 are tuned for performance — this may affect results. \r\n\r\n----------\r\n\r\n\r\nBy the way… We still have a poor test regimen here. We should be doing work ahead of time to warm the JVM, etc. For real benchmarking, learn to use [JMH][7]. As mentioned, benchmarking is difficult. \r\n\r\n\r\n----------\r\n\r\n\r\nBe aware that your test is [CPU-bound][8]. Such a task is rather rare in real-world Java work. Quite often Java work involves [blocking][9]. Blocking comes from activities such as writing to storage, interacting with a database, logging, network calls such as sockets or Web services, inter-process communications, etc. For such blocking work, consider using [virtual threads][10] ([fibers][11]) in Java 21+. \r\n\r\n----------\r\n\r\n\r\nBeware: Output from `System.out.println` may *not* necessarily appear on the console in chronological order when called across threads. Always use a timestamp such as `Instant.now()` if you care about verifying the order. \r\n\r\nFor example, in the last example results above, notice these lines are out-of-order:\r\n\r\n```none\r\nThread ID: 24 at 2023-09-17T19:43:06.053705Z …\r\nThread ID: 22 at 2023-09-17T19:43:06.053489Z …\r\nThread ID: 21 at 2023-09-17T19:43:06.052852Z …\r\nThread ID: 23 at 2023-09-17T19:43:06.051057Z …\r\n```\r\n\r\n\r\n  [1]: https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/lang/Runnable.html\r\n  [2]: https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/util/concurrent/Callable.html\r\n  [3]: https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/util/concurrent/ExecutorService.html\r\n  [4]: https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/lang/StringBuilder.html\r\n  [5]: https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/lang/System.html#nanoTime()\r\n  [6]: https://stackoverflow.com/questions/77120326/why-is-there-no-significant-difference-with-or-without-thread/77120709#comment135955177_77120326\r\n  [7]: https://openjdk.org/jeps/230\r\n  [8]: https://en.wikipedia.org/wiki/CPU-bound\r\n  [9]: https://en.wikipedia.org/wiki/Blocking_(computing)\r\n  [10]: https://openjdk.org/jeps/444\r\n  [11]: https://en.wikipedia.org/wiki/Fiber_(computer_science)","title":"Why is there no significant difference with or without thread?","body":"<p>You have several problems with your code, some of which directly affect the answer to your question.</p>\n<p>To begin with, in modern Java we rarely need to directly address the <code>Thread</code> class. Instead, use the Executors framework in Java 5+. Define your task as a <a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/lang/Runnable.html\" rel=\"nofollow noreferrer\"><code>Runnable</code></a> or <a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/util/concurrent/Callable.html\" rel=\"nofollow noreferrer\"><code>Callable</code></a> object. Submit an instance(s) to an executor service. That <a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/util/concurrent/ExecutorService.html\" rel=\"nofollow noreferrer\">executor service</a> may be backed by a pool of threads, without you needing to manage the setup/teardown of those threads, nor do you need to manage scheduling tasks amongst those threads.</p>\n<p>For clarity, let's move your <code>main</code> method to its own class. That way we can move your task work into a class implementing <code>Runnable</code>, meaning it implements a <code>run</code> method. No <code>extends Thread</code> at all.</p>\n<p>Your task code does nothing productive. Nothing is passed to other code, nothing written to storage, nothing called over the network, no saving to a database, and nothing reported to the console. Such code may be optimized away by the compiler. So we add a call to <code>System.out.println</code> to avoid any such optimization.</p>\n<p>Your task code converts an integer to text, and concatenates. In real work, we would use <a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/lang/StringBuilder.html\" rel=\"nofollow noreferrer\"><code>StringBuilder</code></a> for possibly more efficiency (though this may be done behind the scenes for you implicitly in some implementations of Java) and to make the code more self-documenting.</p>\n<p>We want to report elapsed time for each task run.</p>\n<p>For this, do <em>not</em> use <code>java.util.Date</code>. Indeed, do not ever use either of the <code>Date</code> classes. These were years ago supplanted by the modern <em>java.time</em> classes defined in JSR 310 for Java 8+. The <code>java.util.Date</code> class specifically was replaced by <code>java.time.Instant</code>.</p>\n<p>For microbenchmarking, the finest time-tracking is <a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/lang/System.html#nanoTime()\" rel=\"nofollow noreferrer\"><code>System.nanoTime</code></a>. This call grabs the current value of an incrementing count of passing nanoseconds.</p>\n<p>Use underscore to format your numeric literals for easier reading. So <code>100_000</code>.</p>\n<p>Variable names in Java, by convention, start with a lowercase letter.</p>\n<p>So here is our task class:</p>\n<pre class=\"lang-java prettyprint-override\"><code>package work.basil.example.looping;\n\nimport java.time.Duration;\nimport java.time.Instant;\n\npublic class Counter implements Runnable\n{\n    @Override\n    public void run ( )\n    {\n        long startNanos = System.nanoTime ( );\n        StringBuilder tmp = new StringBuilder ( );\n        for ( int i = 0 ; i &lt; 100_000 ; i++ )\n        {\n            tmp.append ( i );  // Converting integer number to text, and concatenating.\n        }\n        Duration elapsed = Duration.ofNanos ( System.nanoTime ( ) - startNanos );\n        System.out.println ( &quot;Thread ID: &quot; + Thread.currentThread ( ).threadId ( ) + &quot; at &quot; + Instant.now ( ) + &quot; result character length is: &quot; + tmp.codePoints ( ).count ( ) + &quot;. Elapsed: &quot; + elapsed );\n    }\n}\n</code></pre>\n<p>Now an app class to exercise that task.</p>\n<pre class=\"lang-java prettyprint-override\"><code>package work.basil.example.looping;\n\npublic class App\n{\n    public static void main ( String[] args )\n    {\n        App app = new App() ;\n        app.demoInThisThread();\n    }\n\n    private void demoInThisThread ( )\n    {\n        Runnable task = new Counter () ;\n        task.run() ;\n    }\n}\n</code></pre>\n<p>When run:</p>\n<blockquote>\n<p>Thread ID: 1 at 2023-09-17T06:01:24.691381Z result character length is: 488890. Elapsed: PT0.003877583S</p>\n</blockquote>\n<p>On my machine (MacBook Pro, 16-inch, 2021, Apple M1 Pro, 16 GB, macOS Ventura 13.5.2), your code took PT1.456853583S. So you can see, compared to this code, how much more efficient <code>StringBuilder</code> is over <code>String</code>. But we don't really want efficiency for this threading test, so I'll restore the use of <code>String</code>.</p>\n<p>Be aware that such a use of <code>String</code> concatenation will generate huge amounts of garbage for the garbage collector to manage, as <a href=\"https://stackoverflow.com/questions/77120326/why-is-there-no-significant-difference-with-or-without-thread/77120709#comment135955177_77120326\">commented by user207421</a>. So much garbage may affect results in unpredictable ways.</p>\n<pre class=\"lang-java prettyprint-override\"><code>package work.basil.example.looping;\n\nimport java.time.Duration;\nimport java.time.Instant;\n\npublic class Counter implements Runnable\n{\n    @Override\n    public void run ( )\n    {\n        long startNanos = System.nanoTime ( );\n        String tmp = &quot;&quot;;\n        for ( int i = 0 ; i &lt; 100000 ; i++ ) tmp += i;\n        Duration elapsed = Duration.ofNanos ( System.nanoTime ( ) - startNanos );\n        System.out.println ( &quot;Thread ID: &quot; + Thread.currentThread ( ).threadId ( ) + &quot; at &quot; + Instant.now ( ) + &quot; result character length is: &quot; + tmp.codePoints ( ).count ( ) + &quot;. Elapsed: &quot; + elapsed );\n    }\n}\n</code></pre>\n<p>When run:</p>\n<blockquote>\n<p>Thread ID: 1 at 2023-09-17T06:09:03.218903Z result character length is: 488890. Elapsed: PT1.401553292S</p>\n</blockquote>\n<p>Then you spawned five threads. In each you performed the same task, a loop of 100,000 iterations. So you were doing five times as much work, a total of 500,000 iterations. More work is more work, so threading is <em>not</em> going to make that extra work vanish. The CPU core(s) must still do five times as many string concatenations.</p>\n<p>To make a more fair examination of the benefits of threading, you should divide the work so that each thread is doing a <em>portion</em> of the 100,000. We will make this possible by adding a constructor to our task class, passing the desired number of iterations.</p>\n<pre class=\"lang-java prettyprint-override\"><code>package work.basil.example.looping;\n\nimport java.time.Duration;\nimport java.time.Instant;\n\npublic class Counter implements Runnable\n{\n    private final int count;\n\n    public Counter ( final int count ) { this.count = count; }\n\n    @Override\n    public void run ( )\n    {\n        long startNanos = System.nanoTime ( );\n        String tmp = &quot;&quot;;\n        for ( int i = 0 ; i &lt; this.count ; i++ ) tmp += i;\n        Duration elapsed = Duration.ofNanos ( System.nanoTime ( ) - startNanos );\n        System.out.println ( &quot;Thread ID: &quot; + Thread.currentThread ( ).threadId ( ) + &quot; at &quot; + Instant.now ( ) + &quot; for a count of &quot; + this.count + &quot; produced result character length of: &quot; + tmp.codePoints ( ).count ( ) + &quot;. Elapsed: &quot; + elapsed );\n    }\n}\n</code></pre>\n<p>And our app code:</p>\n<pre class=\"lang-java prettyprint-override\"><code>package work.basil.example.looping;\n\npublic class App\n{\n    public static void main ( String[] args )\n    {\n        App app = new App ( );\n        app.demoInThisThread ( );\n    }\n\n    private void demoInThisThread ( )\n    {\n        Runnable task = new Counter ( 100_000 );\n        task.run ( );\n    }\n}\n</code></pre>\n<p>Results are the same.</p>\n<p>Now we are ready to run five threads, each with 20,000 iterations as their portion of the 100,000.</p>\n<p>We instantiate an executor service backed by five threads. Then we loop to submit five instances of our task to that executor service. We use try-with-resources syntax to automatically close our <code>ExecutorService</code> after the submitted tasks have completed.</p>\n<pre class=\"lang-java prettyprint-override\"><code>package work.basil.example.looping;\n\nimport java.time.Duration;\nimport java.time.Instant;\nimport java.util.concurrent.ExecutorService;\nimport java.util.concurrent.Executors;\n\npublic class App\n{\n    public static void main ( String[] args )\n    {\n        App app = new App ( );\n//        app.demoInThisThread ( );\n        app.demoInBackgroundThreads ( );\n    }\n\n    private void demoInBackgroundThreads ( )\n    {\n        long startNanos = System.nanoTime ( );\n        try ( ExecutorService executorService = Executors.newFixedThreadPool ( 5 ) ; )\n        {\n            final int countTasks = 5;\n            for ( int ordinal = 0 ; ordinal &lt; countTasks ; ordinal++ )\n            {\n                Runnable task = new Counter ( 20_000 );\n                executorService.submit ( task );\n            }\n        }\n        Duration elapsed = Duration.ofNanos ( System.nanoTime ( ) - startNanos );\n        System.out.println ( &quot;Executor Service elapsed = &quot; + elapsed + &quot; at &quot; + Instant.now ( ) );\n    }\n\n    private void demoInThisThread ( )\n    {\n        Runnable task = new Counter ( 100_000 );\n        task.run ( );\n    }\n}\n</code></pre>\n<p>The results are startlingly different. Instead of taking well over a second, doing all 5 * 20,000 concatenations took a small fraction of a second, 1/20th of a second. Each task took about 1/20th of a second, so mathematically we know that on this 10-core machine we were getting code executing simultaneously, with each of five cores firing.</p>\n<pre class=\"lang-none prettyprint-override\"><code>Thread ID: 24 at 2023-09-17T06:27:57.068636Z for a count of 20000 produced result character length of: 88890. Elapsed: PT0.1823735S\nThread ID: 23 at 2023-09-17T06:27:57.067782Z for a count of 20000 produced result character length of: 88890. Elapsed: PT0.18159025S\nThread ID: 25 at 2023-09-17T06:27:57.070629Z for a count of 20000 produced result character length of: 88890. Elapsed: PT0.18414225S\nThread ID: 22 at 2023-09-17T06:27:57.070073Z for a count of 20000 produced result character length of: 88890. Elapsed: PT0.183828875S\nThread ID: 21 at 2023-09-17T06:27:57.062894Z for a count of 20000 produced result character length of: 88890. Elapsed: PT0.176261S\nExecutor Service elapsed = PT0.190679125S at 2023-09-17T06:27:57.075335Z\n</code></pre>\n<p>So why so much faster? Well, our test is flawed. Concatenating <code>String</code> objects repeatedly results in a continually growing string. But 20,000 concatenations grows a much smaller string than 100,000 concatenations. So much smaller that much less work was involved. So this is not a good test. (Benchmarking is difficult work.)</p>\n<p>A better test might be generating random numbers and calculating an average. On first effort, this work was so very fast that I expanded the iterations by a multiple of ten (1 million, &amp; 200,000). And I involved <code>String</code> ↔️ <code>Integer</code> ↔️ <code>int</code> conversions as more work. Even still, we get only split second results.</p>\n<p>The task:</p>\n<pre class=\"lang-java prettyprint-override\"><code>package work.basil.example.looping;\n\nimport java.time.Duration;\nimport java.time.Instant;\nimport java.util.ArrayList;\nimport java.util.List;\nimport java.util.concurrent.ThreadLocalRandom;\n\npublic class Averaged implements Runnable\n{\n    private final int count;\n    private final List &lt; String &gt; randoms;\n\n    public Averaged ( final int count )\n    {\n        this.count = count;\n        this.randoms = new ArrayList &lt;&gt; ( this.count );\n    }\n\n    @Override\n    public void run ( )\n    {\n        long startNanos = System.nanoTime ( );\n        for ( int i = 0 ; i &lt; this.count ; i++ )\n        {\n            int x = ThreadLocalRandom.current ( ).nextInt ( 1 , Integer.MAX_VALUE );\n            this.randoms.add ( String.valueOf ( x ) );\n        }\n        double average = this.randoms.stream ( ).map ( Integer :: valueOf ).mapToInt ( Integer :: intValue ).summaryStatistics ( ).getAverage ( );  // Intentionally involved auto-boxing as extra work for our test.\n        Duration elapsed = Duration.ofNanos ( System.nanoTime ( ) - startNanos );\n        System.out.println ( &quot;Thread ID: &quot; + Thread.currentThread ( ).threadId ( ) + &quot; at &quot; + Instant.now ( ) + &quot; for a count of &quot; + this.count + &quot; produced average of: &quot; + average + &quot;. Elapsed: &quot; + elapsed );\n    }\n}\n</code></pre>\n<p>And the app class:</p>\n<pre class=\"lang-java prettyprint-override\"><code>package work.basil.example.looping;\n\nimport java.time.Duration;\nimport java.time.Instant;\nimport java.util.concurrent.ExecutorService;\nimport java.util.concurrent.Executors;\n\npublic class App\n{\n    public static void main ( String[] args )\n    {\n        App app = new App ( );\n//        app.demoInThisThread ( );\n//        app.demoInBackgroundThreads ( );\n//        app.demoSumsInSameThread ( );\n        app.demoSumsInBackgroundThreads ( );\n    }\n\n    private void demoSumsInBackgroundThreads ( )\n    {\n        long startNanos = System.nanoTime ( );\n        try ( ExecutorService executorService = Executors.newFixedThreadPool ( 5 ) ; )\n        {\n            final int countTasks = 5;\n            for ( int ordinal = 0 ; ordinal &lt; countTasks ; ordinal++ )\n            {\n                Runnable task = new Averaged ( 200_000 );\n                executorService.submit ( task );\n            }\n        }\n        Duration elapsed = Duration.ofNanos ( System.nanoTime ( ) - startNanos );\n        System.out.println ( &quot;Executor Service elapsed = &quot; + elapsed + &quot; at &quot; + Instant.now ( ) );\n    }\n\n    private void demoSumsInSameThread ( )\n    {\n        Runnable task = new Averaged ( 1_000_000 );\n        task.run ( );\n    }\n\n    private void demoInBackgroundThreads ( )\n    {\n        long startNanos = System.nanoTime ( );\n        try ( ExecutorService executorService = Executors.newFixedThreadPool ( 5 ) ; )\n        {\n            final int countTasks = 5;\n            for ( int ordinal = 0 ; ordinal &lt; countTasks ; ordinal++ )\n            {\n                Runnable task = new Counter ( 20_000 );\n                executorService.submit ( task );\n            }\n        }\n        Duration elapsed = Duration.ofNanos ( System.nanoTime ( ) - startNanos );\n        System.out.println ( &quot;Executor Service elapsed = &quot; + elapsed + &quot; at &quot; + Instant.now ( ) );\n    }\n\n    private void demoInThisThread ( )\n    {\n        Runnable task = new Counter ( 100_000 );\n        task.run ( );\n    }\n}\n</code></pre>\n<p>When run in the same thread, the million numbers take about 8/10 of a second.</p>\n<pre class=\"lang-none prettyprint-override\"><code>Thread ID: 1 at 2023-09-17T07:05:24.256743Z for a count of 1000000 produced average of: 1.073135902798566E9. Elapsed: PT0.084711792S\n</code></pre>\n<p>When run across threads, the 200,000 * 5 numbers take about 8/10 or 9/10 of a second. Each of the threaded tasks also takes 8/10 of a second. So again, we know mathematically that on this machine we are getting separate cores running simultaneously.</p>\n<pre class=\"lang-none prettyprint-override\"><code>Thread ID: 21 at 2023-09-17T07:06:14.812452Z for a count of 200000 produced average of: 1.073304324790475E9. Elapsed: PT0.080241167S\nThread ID: 23 at 2023-09-17T07:06:14.812469Z for a count of 200000 produced average of: 1.073028061541545E9. Elapsed: PT0.080389542S\nThread ID: 25 at 2023-09-17T07:06:14.813533Z for a count of 200000 produced average of: 1.07282572828644E9. Elapsed: PT0.081019291S\nThread ID: 24 at 2023-09-17T07:06:14.813595Z for a count of 200000 produced average of: 1.076256760047685E9. Elapsed: PT0.081408875S\nThread ID: 22 at 2023-09-17T07:06:14.813600Z for a count of 200000 produced average of: 1.073103576810605E9. Elapsed: PT0.081662959S\nExecutor Service elapsed = PT0.098596875S at 2023-09-17T07:06:14.828988Z\n</code></pre>\n<p>Why no savings when threaded? I don't really know why this particular task takes about the same amount of time for 200,000 as for 1 million. Again, benchmarking is difficult.</p>\n<p>If we change the threaded test to do 10 tasks of 100,000 numbers each, on the same 10 core machine, we do see a dramatic drop in elapsed time for <em>some</em> of the tasks, taking only 2/10 of a second where we might expect 4/10. But the overall grouped time is about the same, 9/10 of a second.</p>\n<pre class=\"lang-none prettyprint-override\"><code>Thread ID: 25 at 2023-09-17T19:43:06.051570Z for a count of 100000 produced average of: 1.07519247943123E9. Elapsed: PT0.057728417S\nThread ID: 24 at 2023-09-17T19:43:06.053705Z for a count of 100000 produced average of: 1.07496720067476E9. Elapsed: PT0.060560125S\nThread ID: 22 at 2023-09-17T19:43:06.053489Z for a count of 100000 produced average of: 1.07711825115815E9. Elapsed: PT0.060462083S\nThread ID: 21 at 2023-09-17T19:43:06.052852Z for a count of 100000 produced average of: 1.07550130293061E9. Elapsed: PT0.059825042S\nThread ID: 23 at 2023-09-17T19:43:06.051057Z for a count of 100000 produced average of: 1.0755424631933E9. Elapsed: PT0.057704334S\nThread ID: 21 at 2023-09-17T19:43:06.080795Z for a count of 100000 produced average of: 1.07392238112309E9. Elapsed: PT0.013798042S\nThread ID: 25 at 2023-09-17T19:43:06.081217Z for a count of 100000 produced average of: 1.07513370104224E9. Elapsed: PT0.014378042S\nThread ID: 24 at 2023-09-17T19:43:06.083975Z for a count of 100000 produced average of: 1.07646007807133E9. Elapsed: PT0.017139583S\nThread ID: 22 at 2023-09-17T19:43:06.084319Z for a count of 100000 produced average of: 1.07482906529202E9. Elapsed: PT0.017476875S\nThread ID: 23 at 2023-09-17T19:43:06.084813Z for a count of 100000 produced average of: 1.07169205436235E9. Elapsed: PT0.017668375S\nExecutor Service elapsed = PT0.093519875S at 2023-09-17T19:43:06.085102Z\n</code></pre>\n<p>Keep in mind that on this machine’s Apple Silicon M1 Pro chip, 2 of the cores are tuned for efficiency, while the other 8 are tuned for performance — this may affect results.</p>\n<hr />\n<p>By the way… We still have a poor test regimen here. We should be doing work ahead of time to warm the JVM, etc. For real benchmarking, learn to use <a href=\"https://openjdk.org/jeps/230\" rel=\"nofollow noreferrer\">JMH</a>. As mentioned, benchmarking is difficult.</p>\n<hr />\n<p>Be aware that your test is <a href=\"https://en.wikipedia.org/wiki/CPU-bound\" rel=\"nofollow noreferrer\">CPU-bound</a>. Such a task is rather rare in real-world Java work. Quite often Java work involves <a href=\"https://en.wikipedia.org/wiki/Blocking_(computing)\" rel=\"nofollow noreferrer\">blocking</a>. Blocking comes from activities such as writing to storage, interacting with a database, logging, network calls such as sockets or Web services, inter-process communications, etc. For such blocking work, consider using <a href=\"https://openjdk.org/jeps/444\" rel=\"nofollow noreferrer\">virtual threads</a> (<a href=\"https://en.wikipedia.org/wiki/Fiber_(computer_science)\" rel=\"nofollow noreferrer\">fibers</a>) in Java 21+.</p>\n<hr />\n<p>Beware: Output from <code>System.out.println</code> may <em>not</em> necessarily appear on the console in chronological order when called across threads. Always use a timestamp such as <code>Instant.now()</code> if you care about verifying the order.</p>\n<p>For example, in the last example results above, notice these lines are out-of-order:</p>\n<pre class=\"lang-none prettyprint-override\"><code>Thread ID: 24 at 2023-09-17T19:43:06.053705Z …\nThread ID: 22 at 2023-09-17T19:43:06.053489Z …\nThread ID: 21 at 2023-09-17T19:43:06.052852Z …\nThread ID: 23 at 2023-09-17T19:43:06.051057Z …\n</code></pre>\n"},{"tags":[],"owner":{"account_id":179070,"reputation":3412,"user_id":411459,"accept_rate":82,"display_name":"Duncan Krebs"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1694932068,"creation_date":1694932068,"answer_id":77120715,"question_id":77120326,"body_markdown":"You guys got realize a few things about performance gains with multi-threaded code. Multi-threaded has significant time performance compared to single threads that is based on the volume of computing needed. So if you are just computing time duration a few times in one thread vs 5 you&#39;re not going to see much difference. I wrote some code for you it runs by pasting into your IDE and just change the package name. \r\n\r\nWhat this shows is the current way to test multi-threaded performance in the question asked, we just don&#39;t do 5 durations we do thousands of them and we compare the time difference beteen multi-threaded and single threaded approaches, this is what this class does. You can configure the number of threads and the number of time durations to compute, that get randomly generated. The other thing that improves multi threaded performance is not by creating them one at a time but having a pool of threads that are all blocking on a queue to compute the next time duration and when the queue of durations to be computed is empty they all return and we count the time. I also used LocalDateTime and made the time duration variable betwen seconds and minutes of two datetimes. \r\n\r\n**With that said, computing 5,000 time durations in a single thread (yes my code added some overhead in building responses, still relative) was 0.152359333 seconds, when doing the same number in a multithreaded blocking queue approach with 3 threads each concurrently a sub set of durations the time is  0.005566667 seconds , which is about **27 times faster**,** \r\n\r\nThat is where you want to be using threads to see real performance, another good example is ingesting bulk data into a sql database, create a blockingQueue of records to inset have a thread that bulk inserts records off the queue, create 5 of those threads and your insert time improves 40X times. Hope that sheds some light. \r\n\r\n\r\n\r\nHere is 10000 durations to compute with 5 threads vs 1..\r\nIt shows the principle of increased performance of multithreading based on computing volume. \r\n\r\n**10000 durations Time Duration Tasks Single Thread took 0.343375458\r\nThread Pool size 5 tooked 0.004482167 seconds to compute  10000 durations\r\nMulti threaded is 76.60925128403294 time faster**\r\nThis is the code change the package name. no other third party imports\r\n\r\n    package com.dunkware.trade.service.beach.server.entity;\r\n\r\n    import java.time.LocalDateTime;\r\n    import java.time.temporal.ChronoUnit;\r\n    import java.util.ArrayList;\r\n    import java.util.List;\r\n    import java.util.concurrent.BlockingQueue;\r\n    import java.util.concurrent.LinkedBlockingDeque;\r\n    import java.util.concurrent.TimeUnit;\r\n    public class Test {\r\n\r\n\t// play these variables, interesting to see \r\n\t// that 3 threads are faster than 5 threads\r\n\t// might be the overhead for creting them\r\n\t// in real life it should come from a thread pool \r\n\t\r\n\t// it tells you with thee values multithreaded is 27 times faster.\r\n\tpublic static int COMPUTE_COUNT = 5000;\r\n\tpublic static int THREAD_COUNT = 3;\r\n\r\n\tpublic static void main(String[] args) {\r\n\t\tTest test = new Test();\r\n\t\r\n\t\ttest.SingleThreaded5000Requests();\r\n\t\ttest.multiThreadedRequests();\r\n\t\t\r\n\t\t\r\n\t\t\r\n\t}\r\n\t\r\n\tpublic static double singleTime; \r\n\tpublic static double multiTime;\r\n\r\n\tprivate static BlockingQueue&lt;TimeDurationRequest&gt; requestQuueu = new LinkedBlockingDeque&lt;&gt;();\r\n\tprivate static BlockingQueue&lt;DuraionProcessThread&gt; doneThreadQueue = new LinkedBlockingDeque&lt;DuraionProcessThread&gt;();\r\n\r\n\tpublic static final List&lt;DurationResponse&gt; multiThreadResponses = new ArrayList&lt;DurationResponse&gt;();\r\n\r\n\t\r\n\tprivate void multiThreadedRequests() { \r\n\t\tList&lt;DuraionProcessThread&gt; threads = new ArrayList&lt;Test.DuraionProcessThread&gt;();\r\n\t\tint i = 0;\r\n\t\twhile(i &lt; COMPUTE_COUNT) { \r\n\t\t\trequestQuueu.add(randomRequest());\r\n\t\t\ti++;\r\n\t\t}\r\n\t\ti = 0;\r\n\t\tDStopWatch timer = DStopWatch.create();\r\n\t\ttimer.start();\r\n\t\twhile(i &lt; THREAD_COUNT) { \r\n\t\t\tDuraionProcessThread thread = new DuraionProcessThread();\r\n\t\t\tthread.start();\r\n\t\t\tthreads.add(thread);\r\n\t\t\ti++;\r\n\t\t}\r\n\t\r\n\t\t\r\n\t\ttimer.stop();\r\n\t\tmultiTime = timer.getCompletedSeconds();\r\n\t\tSystem.out.println(&quot;Thread Pool size &quot; + THREAD_COUNT + &quot; tooked &quot; + timer.getCompletedSeconds() + &quot; seconds to compute  &quot; + COMPUTE_COUNT + &quot; durations&quot;);\r\n\t\tdouble  faster = singleTime / multiTime;\r\n\t\tSystem.out.println(&quot;Multi threaded is &quot; + faster + &quot; time faster&quot;);\r\n\t}\r\n\tprivate static class DuraionProcessThread extends Thread {\r\n\r\n\t\tpublic void run() {\r\n\t\t\twhile (!interrupted()) {\r\n\t\t\t\ttry {\r\n\r\n\t\t\t\t\tTimeDurationRequest req = Test.requestQuueu.poll(5, TimeUnit.MILLISECONDS);\r\n\r\n\t\t\t\t\tif ((req == null)) {\r\n\t\t\t\t\t\t// all requests consumed return trhead\r\n\t\t\t\t\t\tdoneThreadQueue.add(this);\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tNumber duration = getDurationBetween(req.getUnit(), req.stat, req.stop);\r\n\t\t\t\t\tDurationResponse res = new DurationResponse();\r\n\t\t\t\t\tres.value = duration;\r\n\t\t\t\t\tStringBuilder builder = new StringBuilder();\r\n\t\t\t\t\tif (req.unit == ChronoUnit.SECONDS) {\r\n\t\t\t\t\t\tbuilder.append(&quot;Time Duration in seconds is &quot;).append(duration).append(&quot; fom &quot;)\r\n\t\t\t\t\t\t\t\t.append(req.getStat().toString()).append(&quot; to &quot;).append(req.getStop().toString());\r\n\t\t\t\t\t\tres.messsae = builder.toString();\r\n\t\t\t\t\t\tmultiThreadResponses.add(res);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbuilder = new StringBuilder();\r\n\t\t\t\t\tif (req.getUnit() == ChronoUnit.MINUTES) {\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tbuilder.append(&quot;Time Duration in minutes is &quot;).append(duration).append(&quot; fom &quot;)\r\n\t\t\t\t\t\t\t\t.append(req.getStat().toString()).append(&quot; from &quot;).append(req.getStop().toString());\r\n\t\t\t\t\t\tres.messsae = builder.toString();\r\n\t\t\t\t\t\tmultiThreadResponses.add(res);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t} catch (Exception e) {\r\n\t\t\t\t\t// TODO: handle exception\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\t}\r\n\r\n\t/***\r\n\t * First break your logic into some helper methods, if you have a reason to sue\r\n\t * java.util.date be it, LocalDateTime are better you can easily get duration of\r\n\t * dates and date/time ranges.\r\n\t */\r\n\r\n\t/**\r\n\t * Also more efficient, one function and pass in a date/time range and specify\r\n\t * what duration unit you want, seconds, minutes or whatever.\r\n\t * \r\n\t * @param from\r\n\t * @param to\r\n\t * @return\r\n\t */\r\n\tpublic static long getDurationBetween(ChronoUnit unit, LocalDateTime from, LocalDateTime to) {\r\n\t\treturn unit.between(from, to);\r\n\t}\r\n\r\n\t// another util for stop watch\r\n\tpublic static class DStopWatch {\r\n\r\n\t\tpublic enum Status {\r\n\t\t\tStarted, Stopped, Initialized;\r\n\t\t}\r\n\r\n\t\tpublic static DStopWatch create() {\r\n\t\t\treturn new DStopWatch();\r\n\t\t}\r\n\r\n\t\tprivate volatile DStopWatch.Status _status = DStopWatch.Status.Initialized;\r\n\t\tprivate TimeUnit _timeUnit = TimeUnit.NANOSECONDS;\r\n\t\tprivate Long _startTime = null;\r\n\t\tprivate Long _stopTime = null;\r\n\r\n\t\tDStopWatch() {\r\n\r\n\t\t}\r\n\r\n\t\tpublic Status getStatus() {\r\n\t\t\treturn _status;\r\n\t\t}\r\n\r\n\t\tpublic void start() {\r\n\t\t\tif (_timeUnit == TimeUnit.NANOSECONDS) {\r\n\t\t\t\t_startTime = System.nanoTime();\r\n\t\t\t\t_stopTime = null;\r\n\t\t\t\tsetStatus(Status.Started);\r\n\t\t\t}\r\n\t\t\tif (_timeUnit == TimeUnit.MILLISECONDS) {\r\n\t\t\t\t_startTime = System.currentTimeMillis();\r\n\t\t\t\t_stopTime = null;\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tvoid setStatus(Status status) {\r\n\t\t\t_status = Status.Stopped;\r\n\t\t}\r\n\r\n\t\tpublic void stop() {\r\n\t\t\tif (getStatus() != Status.Stopped) {\r\n\t\t\t\t// exception\r\n\t\t\t}\r\n\t\t\tif (_timeUnit == TimeUnit.NANOSECONDS) {\r\n\t\t\t\t_stopTime = System.nanoTime();\r\n\t\t\t\tsetStatus(Status.Stopped);\r\n\t\t\t}\r\n\t\t\tif (_timeUnit == TimeUnit.MILLISECONDS) {\r\n\t\t\t\t_stopTime = System.currentTimeMillis();\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tpublic void reset() {\r\n\t\t\tsetStatus(Status.Initialized);\r\n\t\t\t_startTime = null;\r\n\t\t\t_stopTime = null;\r\n\r\n\t\t}\r\n\r\n\t\tpublic TimeUnit getTimeUnit() {\r\n\t\t\treturn _timeUnit;\r\n\t\t}\r\n\r\n\t\tpublic void reset(TimeUnit timeUnit) {\r\n\t\t\t_timeUnit = timeUnit;\r\n\t\t\treset();\r\n\t\t}\r\n\r\n\t\tpublic double getRunningSeconds() {\r\n\t\t\tlong dureation = System.nanoTime() - _startTime;\r\n\t\t\tdouble seconds = ((double) dureation) / 1E9;\r\n\t\t\treturn seconds;\r\n\t\t}\r\n\r\n\t\tpublic double getCompletedSeconds() {\r\n\t\t\tlong dureation = _stopTime - _startTime;\r\n\t\t\tdouble seconds = ((double) dureation) / 1E9;\r\n\t\t\treturn seconds;\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Next i would build a model object for what you are trying to compute if its a\r\n\t * model easier to make a REST API out of it.\r\n\t */\r\n\r\n\tpublic static class TimeDurationRequest {\r\n\t\tprivate ChronoUnit unit;\r\n\t\tprivate LocalDateTime stat;\r\n\t\tprivate LocalDateTime stop;\r\n\r\n\t\tpublic ChronoUnit getUnit() {\r\n\t\t\treturn unit;\r\n\t\t}\r\n\r\n\t\tpublic void setUnit(ChronoUnit unit) {\r\n\t\t\tthis.unit = unit;\r\n\t\t}\r\n\r\n\t\tpublic LocalDateTime getStat() {\r\n\t\t\treturn stat;\r\n\t\t}\r\n\r\n\t\tpublic void setStat(LocalDateTime stat) {\r\n\t\t\tthis.stat = stat;\r\n\t\t}\r\n\r\n\t\tpublic LocalDateTime getStop() {\r\n\t\t\treturn stop;\r\n\t\t}\r\n\r\n\t\tpublic void setStop(LocalDateTime stop) {\r\n\t\t\tthis.stop = stop;\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t// helper\r\n\tpublic static int getRandomNumber(int min, int max) {\r\n\t\treturn (int) ((Math.random() * (max - min)) + min);\r\n\t}\r\n\r\n\tpublic static int timeUnitIterator = 0;\r\n\r\n\t// make a random generator for testing performance\r\n\tprivate static TimeDurationRequest randomRequest() {\r\n\r\n\t\tTimeDurationRequest req = new TimeDurationRequest();\r\n\t\tif (timeUnitIterator == 0) {\r\n\t\t\treq.setUnit(ChronoUnit.MINUTES);\r\n\t\t\ttimeUnitIterator = 1;\r\n\t\t} else {\r\n\t\t\treq.setUnit(ChronoUnit.SECONDS);\r\n\t\t\ttimeUnitIterator = 0;\r\n\r\n\t\t}\r\n\r\n\t\treq.setStat(LocalDateTime.now().minusDays(getRandomNumber(0, 42)));\r\n\t\treq.setStop(LocalDateTime.now().plusSeconds(getRandomNumber(0, 2)));\r\n\t\treturn req;\r\n\t}\r\n\r\n\tpublic static class DurationResponse {\r\n\r\n\t\tpublic String messsae;\r\n\t\tprivate Number value;\r\n\r\n\t}\r\n\r\n\t// okay sow now lets test it to really make a multi-threaded service you best\r\n\t// using a thread poool and a blockign quueue to bulk process and test\r\n\t// perfomrnace.\r\n\r\n\tprivate void SingleThreaded5000Requests() {\r\n\t\tList&lt;DurationResponse&gt; responses = new ArrayList&lt;DurationResponse&gt;();\r\n\t\tint i = 0;\r\n\t\tDStopWatch timer = DStopWatch.create();\r\n\t\ttimer.start();\r\n\t\twhile (i &lt; COMPUTE_COUNT) {\r\n\t\t\tTimeDurationRequest req = randomRequest();\r\n\t\t\tNumber duration = getDurationBetween(req.getUnit(), req.stat, req.stop);\r\n\t\t\tDurationResponse res = new DurationResponse();\r\n\t\t\tres.value = duration;\r\n\t\t\tStringBuilder builder = new StringBuilder();\r\n\t\t\tif (req.unit == ChronoUnit.SECONDS) {\r\n\t\t\t\tbuilder.append(&quot;Time Duration in seconds is &quot;).append(duration).append(&quot; fom &quot;)\r\n\t\t\t\t\t\t.append(req.getStat().toString()).append(&quot; to &quot;).append(req.getStop().toString());\r\n\t\t\t\tres.messsae = builder.toString();\r\n\t\t\t\tresponses.add(res);\r\n\t\t\t}\r\n\t\t\tbuilder = new StringBuilder();\r\n\t\t\tif (req.getUnit() == ChronoUnit.MINUTES) {\r\n\t\t\t\tbuilder.append(&quot;Time Duration in minutes is &quot;).append(duration).append(&quot; fom &quot;)\r\n\t\t\t\t\t\t.append(req.getStat().toString()).append(&quot; from &quot;).append(req.getStop().toString());\r\n\t\t\t\tres.messsae = builder.toString();\r\n\t\t\t\tresponses.add(res);\r\n\t\t\t}\r\n\t\t\ti++;\r\n\t\t}\r\n\t\ttimer.stop();\r\n\t\tsingleTime = timer.getCompletedSeconds();\r\n\t\tSystem.out.println(COMPUTE_COUNT + &quot; durations Time Duration Tasks Single Thread took &quot; + timer.getCompletedSeconds());\r\n\t\t//System.out.println(&quot;results....&quot;);\r\n\t\ttry {\r\n\t\t\tThread.sleep(1000);\r\n\t\t} catch (\r\n\r\n\t\tException e) {\r\n\t\t\t// TODO: handle exception\r\n\t\t}\r\n\t//\tfor (DurationResponse durationResponse : responses) {\r\n\t\t//\tSystem.out.println(durationResponse.messsae);\r\n\t//\t}\r\n\t}\r\n\r\n}\r\n\r\n","title":"Why is there no significant difference with or without thread?","body":"<p>You guys got realize a few things about performance gains with multi-threaded code. Multi-threaded has significant time performance compared to single threads that is based on the volume of computing needed. So if you are just computing time duration a few times in one thread vs 5 you're not going to see much difference. I wrote some code for you it runs by pasting into your IDE and just change the package name.</p>\n<p>What this shows is the current way to test multi-threaded performance in the question asked, we just don't do 5 durations we do thousands of them and we compare the time difference beteen multi-threaded and single threaded approaches, this is what this class does. You can configure the number of threads and the number of time durations to compute, that get randomly generated. The other thing that improves multi threaded performance is not by creating them one at a time but having a pool of threads that are all blocking on a queue to compute the next time duration and when the queue of durations to be computed is empty they all return and we count the time. I also used LocalDateTime and made the time duration variable betwen seconds and minutes of two datetimes.</p>\n<p><strong>With that said, computing 5,000 time durations in a single thread (yes my code added some overhead in building responses, still relative) was 0.152359333 seconds, when doing the same number in a multithreaded blocking queue approach with 3 threads each concurrently a sub set of durations the time is  0.005566667 seconds , which is about <strong>27 times faster</strong>,</strong></p>\n<p>That is where you want to be using threads to see real performance, another good example is ingesting bulk data into a sql database, create a blockingQueue of records to inset have a thread that bulk inserts records off the queue, create 5 of those threads and your insert time improves 40X times. Hope that sheds some light.</p>\n<p>Here is 10000 durations to compute with 5 threads vs 1..\nIt shows the principle of increased performance of multithreading based on computing volume.</p>\n<p><strong>10000 durations Time Duration Tasks Single Thread took 0.343375458\nThread Pool size 5 tooked 0.004482167 seconds to compute  10000 durations\nMulti threaded is 76.60925128403294 time faster</strong>\nThis is the code change the package name. no other third party imports</p>\n<pre><code>package com.dunkware.trade.service.beach.server.entity;\n\nimport java.time.LocalDateTime;\nimport java.time.temporal.ChronoUnit;\nimport java.util.ArrayList;\nimport java.util.List;\nimport java.util.concurrent.BlockingQueue;\nimport java.util.concurrent.LinkedBlockingDeque;\nimport java.util.concurrent.TimeUnit;\npublic class Test {\n\n// play these variables, interesting to see \n// that 3 threads are faster than 5 threads\n// might be the overhead for creting them\n// in real life it should come from a thread pool \n\n// it tells you with thee values multithreaded is 27 times faster.\npublic static int COMPUTE_COUNT = 5000;\npublic static int THREAD_COUNT = 3;\n\npublic static void main(String[] args) {\n    Test test = new Test();\n\n    test.SingleThreaded5000Requests();\n    test.multiThreadedRequests();\n    \n    \n    \n}\n\npublic static double singleTime; \npublic static double multiTime;\n\nprivate static BlockingQueue&lt;TimeDurationRequest&gt; requestQuueu = new LinkedBlockingDeque&lt;&gt;();\nprivate static BlockingQueue&lt;DuraionProcessThread&gt; doneThreadQueue = new LinkedBlockingDeque&lt;DuraionProcessThread&gt;();\n\npublic static final List&lt;DurationResponse&gt; multiThreadResponses = new ArrayList&lt;DurationResponse&gt;();\n\n\nprivate void multiThreadedRequests() { \n    List&lt;DuraionProcessThread&gt; threads = new ArrayList&lt;Test.DuraionProcessThread&gt;();\n    int i = 0;\n    while(i &lt; COMPUTE_COUNT) { \n        requestQuueu.add(randomRequest());\n        i++;\n    }\n    i = 0;\n    DStopWatch timer = DStopWatch.create();\n    timer.start();\n    while(i &lt; THREAD_COUNT) { \n        DuraionProcessThread thread = new DuraionProcessThread();\n        thread.start();\n        threads.add(thread);\n        i++;\n    }\n\n    \n    timer.stop();\n    multiTime = timer.getCompletedSeconds();\n    System.out.println(&quot;Thread Pool size &quot; + THREAD_COUNT + &quot; tooked &quot; + timer.getCompletedSeconds() + &quot; seconds to compute  &quot; + COMPUTE_COUNT + &quot; durations&quot;);\n    double  faster = singleTime / multiTime;\n    System.out.println(&quot;Multi threaded is &quot; + faster + &quot; time faster&quot;);\n}\nprivate static class DuraionProcessThread extends Thread {\n\n    public void run() {\n        while (!interrupted()) {\n            try {\n\n                TimeDurationRequest req = Test.requestQuueu.poll(5, TimeUnit.MILLISECONDS);\n\n                if ((req == null)) {\n                    // all requests consumed return trhead\n                    doneThreadQueue.add(this);\n                    return;\n                }\n\n                Number duration = getDurationBetween(req.getUnit(), req.stat, req.stop);\n                DurationResponse res = new DurationResponse();\n                res.value = duration;\n                StringBuilder builder = new StringBuilder();\n                if (req.unit == ChronoUnit.SECONDS) {\n                    builder.append(&quot;Time Duration in seconds is &quot;).append(duration).append(&quot; fom &quot;)\n                            .append(req.getStat().toString()).append(&quot; to &quot;).append(req.getStop().toString());\n                    res.messsae = builder.toString();\n                    multiThreadResponses.add(res);\n                }\n                builder = new StringBuilder();\n                if (req.getUnit() == ChronoUnit.MINUTES) {\n                    \n                    builder.append(&quot;Time Duration in minutes is &quot;).append(duration).append(&quot; fom &quot;)\n                            .append(req.getStat().toString()).append(&quot; from &quot;).append(req.getStop().toString());\n                    res.messsae = builder.toString();\n                    multiThreadResponses.add(res);\n                }\n\n            } catch (Exception e) {\n                // TODO: handle exception\n            }\n\n        }\n\n    }\n}\n\n/***\n * First break your logic into some helper methods, if you have a reason to sue\n * java.util.date be it, LocalDateTime are better you can easily get duration of\n * dates and date/time ranges.\n */\n\n/**\n * Also more efficient, one function and pass in a date/time range and specify\n * what duration unit you want, seconds, minutes or whatever.\n * \n * @param from\n * @param to\n * @return\n */\npublic static long getDurationBetween(ChronoUnit unit, LocalDateTime from, LocalDateTime to) {\n    return unit.between(from, to);\n}\n\n// another util for stop watch\npublic static class DStopWatch {\n\n    public enum Status {\n        Started, Stopped, Initialized;\n    }\n\n    public static DStopWatch create() {\n        return new DStopWatch();\n    }\n\n    private volatile DStopWatch.Status _status = DStopWatch.Status.Initialized;\n    private TimeUnit _timeUnit = TimeUnit.NANOSECONDS;\n    private Long _startTime = null;\n    private Long _stopTime = null;\n\n    DStopWatch() {\n\n    }\n\n    public Status getStatus() {\n        return _status;\n    }\n\n    public void start() {\n        if (_timeUnit == TimeUnit.NANOSECONDS) {\n            _startTime = System.nanoTime();\n            _stopTime = null;\n            setStatus(Status.Started);\n        }\n        if (_timeUnit == TimeUnit.MILLISECONDS) {\n            _startTime = System.currentTimeMillis();\n            _stopTime = null;\n        }\n\n    }\n\n    void setStatus(Status status) {\n        _status = Status.Stopped;\n    }\n\n    public void stop() {\n        if (getStatus() != Status.Stopped) {\n            // exception\n        }\n        if (_timeUnit == TimeUnit.NANOSECONDS) {\n            _stopTime = System.nanoTime();\n            setStatus(Status.Stopped);\n        }\n        if (_timeUnit == TimeUnit.MILLISECONDS) {\n            _stopTime = System.currentTimeMillis();\n        }\n\n    }\n\n    public void reset() {\n        setStatus(Status.Initialized);\n        _startTime = null;\n        _stopTime = null;\n\n    }\n\n    public TimeUnit getTimeUnit() {\n        return _timeUnit;\n    }\n\n    public void reset(TimeUnit timeUnit) {\n        _timeUnit = timeUnit;\n        reset();\n    }\n\n    public double getRunningSeconds() {\n        long dureation = System.nanoTime() - _startTime;\n        double seconds = ((double) dureation) / 1E9;\n        return seconds;\n    }\n\n    public double getCompletedSeconds() {\n        long dureation = _stopTime - _startTime;\n        double seconds = ((double) dureation) / 1E9;\n        return seconds;\n    }\n\n}\n\n/**\n * Next i would build a model object for what you are trying to compute if its a\n * model easier to make a REST API out of it.\n */\n\npublic static class TimeDurationRequest {\n    private ChronoUnit unit;\n    private LocalDateTime stat;\n    private LocalDateTime stop;\n\n    public ChronoUnit getUnit() {\n        return unit;\n    }\n\n    public void setUnit(ChronoUnit unit) {\n        this.unit = unit;\n    }\n\n    public LocalDateTime getStat() {\n        return stat;\n    }\n\n    public void setStat(LocalDateTime stat) {\n        this.stat = stat;\n    }\n\n    public LocalDateTime getStop() {\n        return stop;\n    }\n\n    public void setStop(LocalDateTime stop) {\n        this.stop = stop;\n    }\n\n}\n\n// helper\npublic static int getRandomNumber(int min, int max) {\n    return (int) ((Math.random() * (max - min)) + min);\n}\n\npublic static int timeUnitIterator = 0;\n\n// make a random generator for testing performance\nprivate static TimeDurationRequest randomRequest() {\n\n    TimeDurationRequest req = new TimeDurationRequest();\n    if (timeUnitIterator == 0) {\n        req.setUnit(ChronoUnit.MINUTES);\n        timeUnitIterator = 1;\n    } else {\n        req.setUnit(ChronoUnit.SECONDS);\n        timeUnitIterator = 0;\n\n    }\n\n    req.setStat(LocalDateTime.now().minusDays(getRandomNumber(0, 42)));\n    req.setStop(LocalDateTime.now().plusSeconds(getRandomNumber(0, 2)));\n    return req;\n}\n\npublic static class DurationResponse {\n\n    public String messsae;\n    private Number value;\n\n}\n\n// okay sow now lets test it to really make a multi-threaded service you best\n// using a thread poool and a blockign quueue to bulk process and test\n// perfomrnace.\n\nprivate void SingleThreaded5000Requests() {\n    List&lt;DurationResponse&gt; responses = new ArrayList&lt;DurationResponse&gt;();\n    int i = 0;\n    DStopWatch timer = DStopWatch.create();\n    timer.start();\n    while (i &lt; COMPUTE_COUNT) {\n        TimeDurationRequest req = randomRequest();\n        Number duration = getDurationBetween(req.getUnit(), req.stat, req.stop);\n        DurationResponse res = new DurationResponse();\n        res.value = duration;\n        StringBuilder builder = new StringBuilder();\n        if (req.unit == ChronoUnit.SECONDS) {\n            builder.append(&quot;Time Duration in seconds is &quot;).append(duration).append(&quot; fom &quot;)\n                    .append(req.getStat().toString()).append(&quot; to &quot;).append(req.getStop().toString());\n            res.messsae = builder.toString();\n            responses.add(res);\n        }\n        builder = new StringBuilder();\n        if (req.getUnit() == ChronoUnit.MINUTES) {\n            builder.append(&quot;Time Duration in minutes is &quot;).append(duration).append(&quot; fom &quot;)\n                    .append(req.getStat().toString()).append(&quot; from &quot;).append(req.getStop().toString());\n            res.messsae = builder.toString();\n            responses.add(res);\n        }\n        i++;\n    }\n    timer.stop();\n    singleTime = timer.getCompletedSeconds();\n    System.out.println(COMPUTE_COUNT + &quot; durations Time Duration Tasks Single Thread took &quot; + timer.getCompletedSeconds());\n    //System.out.println(&quot;results....&quot;);\n    try {\n        Thread.sleep(1000);\n    } catch (\n\n    Exception e) {\n        // TODO: handle exception\n    }\n//  for (DurationResponse durationResponse : responses) {\n    //  System.out.println(durationResponse.messsae);\n//  }\n}\n</code></pre>\n<p>}</p>\n"},{"tags":[],"owner":{"account_id":216120,"reputation":49213,"user_id":471160,"accept_rate":90,"display_name":"marcinj"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1694979737,"creation_date":1694975001,"answer_id":77123091,"question_id":77120326,"body_markdown":"The reason for this behavior is that Java threads do not necessarily run in parallel, especially on a single-core machine. Java virtual machine schedules threads on the underlying hardware, and if you only have one core, the threads will be scheduled to run one after the other. Even on a multi-core machine, there is no guarantee that the JVM will schedule the threads to run in parallel. The actual behavior can depend on many factors, including the specific JVM implementation and the current load on the system.\r\n\r\nAdditionally, the overhead of creating and managing threads can also add to the total execution time. Threads in Java are not lightweight entities, and creating a large number of them can be quite expensive in terms of both time and memory.\r\n\r\nThe specific task that your threads are performing (concatenating strings in a loop) is not a good candidate for parallelization. The += operation for strings in Java creates a new object every time, as strings in Java are immutable. This is computationally expensive and may also put pressure on the garbage collector when done in a loop, especially within multiple threads. You may replacae += with StringBuilder, to see if there will be any difference on your system.\r\n\r\nThere are also other factors to take into account, like being cache friendly. CPUs have limited memory for various cache levels. If your threads work on separate data sets, then the context switch between execution of threads might require cache invalidation which can slow down the program.\r\n\r\nYou may try parallel streams which optimizes parallel computations, below is sample code which will compare threads solutions with parallels stream, and other aproaches:\r\n\r\n    package org.example;\r\n    \r\n    import java.util.concurrent.ExecutorService;\r\n    import java.util.concurrent.Executors;\r\n    import java.util.concurrent.ForkJoinPool;\r\n    import java.util.concurrent.RecursiveAction;\r\n    import java.util.stream.IntStream;\r\n    \r\n    public class ParallelAndThreadTest {\r\n    \r\n        public static void main(String[] args) {\r\n            //single thread\r\n            System.out.println(&quot;single thread:&quot;);\r\n            testTime(() -&gt; runSingleThread(ParallelAndThreadTest::performTask));\r\n    \r\n            //multiple threads\r\n            System.out.println(&quot;multiple threads:&quot;);\r\n            testTime(() -&gt; runWithThreads(ParallelAndThreadTest::performTask));\r\n    \r\n            //parallel streams - uses ForkJoinPool, but is a lot faster than\r\n            //the later example using ForkJoinPool directly. (at least on my system).\r\n            System.out.println(&quot;parallel streams:&quot;);\r\n            testTime(() -&gt; runInParallel(ParallelAndThreadTest::performTask));\r\n    \r\n            //executorService\r\n            System.out.println(&quot;executorservice:&quot;);\r\n            testTime(() -&gt; runWithExecutorService(ParallelAndThreadTest::performTask));\r\n    \r\n            //ForkJoinPool\r\n            //just to compare with the parallel streams solution.\r\n            System.out.println(&quot;ForkJoinPool:&quot;);\r\n            testTime(() -&gt; runWithForkJoinPool(ParallelAndThreadTest::performTask));\r\n        }\r\n    \r\n        public static void testTime(Runnable task) {\r\n            long totalTime = 0;\r\n            int runs = 200;//200 runs to get a good average\r\n    \r\n            for (int i = 0; i &lt; runs; i++) {\r\n                long before = System.nanoTime();\r\n                task.run();\r\n                long after = System.nanoTime();\r\n                totalTime += (after - before);\r\n            }\r\n    \r\n            double averageTime = (totalTime / (double) runs) / 1_000_000_000.0;  // Converting to seconds\r\n            String formattedTime = String.format(&quot;%.4f&quot;, averageTime);\r\n            System.out.println(&quot;Average Time Consume = &quot; + formattedTime + &quot; Seconds&quot;);\r\n        }\r\n    \r\n        //your initial code to test, its really slow...\r\n        public static void performTask2() {\r\n            String s = &quot;&quot;;\r\n            for (int i = 0; i &lt; 100000; i++) {\r\n                s += &quot;&quot; + i;\r\n            }\r\n        }\r\n    \r\n        public static void performTask() {\r\n            StringBuilder tmp = new StringBuilder();\r\n            for (int i = 0; i &lt; 100000; i++) {\r\n                tmp.append(i);\r\n            }\r\n        }\r\n    \r\n        public static void runSingleThread(Runnable task) {\r\n            for (int k = 0; k &lt; 5; k++) {\r\n                task.run();\r\n            }\r\n        }\r\n    \r\n        public static void runWithThreads(Runnable task) {\r\n            Thread[] threads = new Thread[5];\r\n            for (int i = 0; i &lt; 5; i++) {\r\n                threads[i] = new Thread(task);\r\n                threads[i].start();\r\n            }\r\n            for (Thread thread : threads) {\r\n                try {\r\n                    thread.join();\r\n                } catch (InterruptedException e) {\r\n                    e.printStackTrace();\r\n                }\r\n            }\r\n        }\r\n    \r\n        public static void runInParallel(Runnable task) {\r\n            IntStream.range(0, 5).parallel().forEach(i -&gt; task.run());\r\n        }\r\n    \r\n        public static void runWithExecutorService(Runnable task) {\r\n            ExecutorService executorService = Executors.newFixedThreadPool(5);\r\n            for (int i = 0; i &lt; 5; i++)\r\n                executorService.execute(task);\r\n            executorService.shutdown();\r\n            while (!executorService.isTerminated()) {}\r\n        }\r\n    \r\n        public static void runWithForkJoinPool(Runnable task) {\r\n            ForkJoinPool forkJoinPool = new ForkJoinPool(5);\r\n            forkJoinPool.submit(() -&gt; {\r\n                for (int i = 0; i &lt; 5; i++) {\r\n                    forkJoinPool.invoke(new RecursiveActionEx(task));\r\n                }\r\n            }).join();\r\n        }\r\n    \r\n        static class RecursiveActionEx extends RecursiveAction {\r\n            private final Runnable task;\r\n    \r\n            RecursiveActionEx(Runnable task) {\r\n                this.task = task;\r\n            }\r\n    \r\n            @Override\r\n            protected void compute() {\r\n                task.run();\r\n            }\r\n        }\r\n    }\r\n\r\n\r\nI have used StringBuilder for concatenation, on my system it outputs:\r\n\r\n    single thread:\r\n    Average Time Consume = 0.0064 Seconds\r\n    multiple threads:\r\n    Average Time Consume = 0.0023 Seconds\r\n    parallel streams:\r\n    Average Time Consume = 0.0020 Seconds\r\n    executorservice:\r\n    Average Time Consume = 0.0024 Seconds\r\n    ForkJoinPool:\r\n    Average Time Consume = 0.0060 Seconds\r\n\r\nI have 8 cores. The parallel streams solution always win sligthly.\r\n\r\nOn my mac I can disable certain cores with cpuctl command, I have disabled all 7 cores leaving only one, and got this results:\r\n\r\n    single thread:\r\n    Average Time Consume = 0.0237 Seconds\r\n    multiple threads:\r\n    Average Time Consume = 0.0145 Seconds\r\n    parallel streams:\r\n    Average Time Consume = 0.0212 Seconds\r\n    executorservice:\r\n    Average Time Consume = 0.0173 Seconds\r\n    ForkJoinPool:\r\n    Average Time Consume = 0.0111 Seconds\r\n\r\nnow, the ForkJoinPool is the fastest.\r\n","title":"Why is there no significant difference with or without thread?","body":"<p>The reason for this behavior is that Java threads do not necessarily run in parallel, especially on a single-core machine. Java virtual machine schedules threads on the underlying hardware, and if you only have one core, the threads will be scheduled to run one after the other. Even on a multi-core machine, there is no guarantee that the JVM will schedule the threads to run in parallel. The actual behavior can depend on many factors, including the specific JVM implementation and the current load on the system.</p>\n<p>Additionally, the overhead of creating and managing threads can also add to the total execution time. Threads in Java are not lightweight entities, and creating a large number of them can be quite expensive in terms of both time and memory.</p>\n<p>The specific task that your threads are performing (concatenating strings in a loop) is not a good candidate for parallelization. The += operation for strings in Java creates a new object every time, as strings in Java are immutable. This is computationally expensive and may also put pressure on the garbage collector when done in a loop, especially within multiple threads. You may replacae += with StringBuilder, to see if there will be any difference on your system.</p>\n<p>There are also other factors to take into account, like being cache friendly. CPUs have limited memory for various cache levels. If your threads work on separate data sets, then the context switch between execution of threads might require cache invalidation which can slow down the program.</p>\n<p>You may try parallel streams which optimizes parallel computations, below is sample code which will compare threads solutions with parallels stream, and other aproaches:</p>\n<pre><code>package org.example;\n\nimport java.util.concurrent.ExecutorService;\nimport java.util.concurrent.Executors;\nimport java.util.concurrent.ForkJoinPool;\nimport java.util.concurrent.RecursiveAction;\nimport java.util.stream.IntStream;\n\npublic class ParallelAndThreadTest {\n\n    public static void main(String[] args) {\n        //single thread\n        System.out.println(&quot;single thread:&quot;);\n        testTime(() -&gt; runSingleThread(ParallelAndThreadTest::performTask));\n\n        //multiple threads\n        System.out.println(&quot;multiple threads:&quot;);\n        testTime(() -&gt; runWithThreads(ParallelAndThreadTest::performTask));\n\n        //parallel streams - uses ForkJoinPool, but is a lot faster than\n        //the later example using ForkJoinPool directly. (at least on my system).\n        System.out.println(&quot;parallel streams:&quot;);\n        testTime(() -&gt; runInParallel(ParallelAndThreadTest::performTask));\n\n        //executorService\n        System.out.println(&quot;executorservice:&quot;);\n        testTime(() -&gt; runWithExecutorService(ParallelAndThreadTest::performTask));\n\n        //ForkJoinPool\n        //just to compare with the parallel streams solution.\n        System.out.println(&quot;ForkJoinPool:&quot;);\n        testTime(() -&gt; runWithForkJoinPool(ParallelAndThreadTest::performTask));\n    }\n\n    public static void testTime(Runnable task) {\n        long totalTime = 0;\n        int runs = 200;//200 runs to get a good average\n\n        for (int i = 0; i &lt; runs; i++) {\n            long before = System.nanoTime();\n            task.run();\n            long after = System.nanoTime();\n            totalTime += (after - before);\n        }\n\n        double averageTime = (totalTime / (double) runs) / 1_000_000_000.0;  // Converting to seconds\n        String formattedTime = String.format(&quot;%.4f&quot;, averageTime);\n        System.out.println(&quot;Average Time Consume = &quot; + formattedTime + &quot; Seconds&quot;);\n    }\n\n    //your initial code to test, its really slow...\n    public static void performTask2() {\n        String s = &quot;&quot;;\n        for (int i = 0; i &lt; 100000; i++) {\n            s += &quot;&quot; + i;\n        }\n    }\n\n    public static void performTask() {\n        StringBuilder tmp = new StringBuilder();\n        for (int i = 0; i &lt; 100000; i++) {\n            tmp.append(i);\n        }\n    }\n\n    public static void runSingleThread(Runnable task) {\n        for (int k = 0; k &lt; 5; k++) {\n            task.run();\n        }\n    }\n\n    public static void runWithThreads(Runnable task) {\n        Thread[] threads = new Thread[5];\n        for (int i = 0; i &lt; 5; i++) {\n            threads[i] = new Thread(task);\n            threads[i].start();\n        }\n        for (Thread thread : threads) {\n            try {\n                thread.join();\n            } catch (InterruptedException e) {\n                e.printStackTrace();\n            }\n        }\n    }\n\n    public static void runInParallel(Runnable task) {\n        IntStream.range(0, 5).parallel().forEach(i -&gt; task.run());\n    }\n\n    public static void runWithExecutorService(Runnable task) {\n        ExecutorService executorService = Executors.newFixedThreadPool(5);\n        for (int i = 0; i &lt; 5; i++)\n            executorService.execute(task);\n        executorService.shutdown();\n        while (!executorService.isTerminated()) {}\n    }\n\n    public static void runWithForkJoinPool(Runnable task) {\n        ForkJoinPool forkJoinPool = new ForkJoinPool(5);\n        forkJoinPool.submit(() -&gt; {\n            for (int i = 0; i &lt; 5; i++) {\n                forkJoinPool.invoke(new RecursiveActionEx(task));\n            }\n        }).join();\n    }\n\n    static class RecursiveActionEx extends RecursiveAction {\n        private final Runnable task;\n\n        RecursiveActionEx(Runnable task) {\n            this.task = task;\n        }\n\n        @Override\n        protected void compute() {\n            task.run();\n        }\n    }\n}\n</code></pre>\n<p>I have used StringBuilder for concatenation, on my system it outputs:</p>\n<pre><code>single thread:\nAverage Time Consume = 0.0064 Seconds\nmultiple threads:\nAverage Time Consume = 0.0023 Seconds\nparallel streams:\nAverage Time Consume = 0.0020 Seconds\nexecutorservice:\nAverage Time Consume = 0.0024 Seconds\nForkJoinPool:\nAverage Time Consume = 0.0060 Seconds\n</code></pre>\n<p>I have 8 cores. The parallel streams solution always win sligthly.</p>\n<p>On my mac I can disable certain cores with cpuctl command, I have disabled all 7 cores leaving only one, and got this results:</p>\n<pre><code>single thread:\nAverage Time Consume = 0.0237 Seconds\nmultiple threads:\nAverage Time Consume = 0.0145 Seconds\nparallel streams:\nAverage Time Consume = 0.0212 Seconds\nexecutorservice:\nAverage Time Consume = 0.0173 Seconds\nForkJoinPool:\nAverage Time Consume = 0.0111 Seconds\n</code></pre>\n<p>now, the ForkJoinPool is the fastest.</p>\n"}],"owner":{"account_id":29463130,"reputation":59,"user_id":22577448,"display_name":"Mark Zhou"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":142,"favorite_count":0,"down_vote_count":0,"up_vote_count":6,"answer_count":5,"score":6,"last_activity_date":1694981579,"creation_date":1694919504,"question_id":77120326,"body_markdown":"I want to evaluate the Java thread function.\r\n\r\n1. I created a demo without thread, see below:\r\n\r\n    ```java\r\n    import java.util.*;\r\n    \r\n    public class NoThread {\r\n\r\n        public static void main(String[] args) {\r\n            NoThread Obj= new NoThread(); \t\r\n            Date BeforeDate = new Date();\r\n\r\n            Obj.run();\r\n\r\n            Date AfterDate = new Date();\r\n            Double Time_Consume = (AfterDate.getTime()- BeforeDate.getTime())/1000.0;\r\n\r\n            System.out.println(&quot;Time Consume= &quot; + Time_Consume + &quot; Seconds&quot;  );\r\n        }\r\n\r\n        public void run() {\r\n            String tmp = &quot;&quot;;\r\n            for (int i = 0; i &lt; 100000; i++) {\r\n                tmp += i;\r\n            }\t\r\n        }\r\n\r\n    }\r\n    ```\r\n    \r\n    ```none\r\n    Cons\r\n\r\n    ole display: Time Consume= 4.771 Seconds\r\n    ```\r\n\r\n2. I created a demo with thread.\r\n\r\n    ```java\r\n    import java.util.Date;\r\n    \r\n    public class ThreadTest extends Thread\r\n    {\r\n        public static void main(String[] args) {\r\n            ThreadTest[ ] ObjArray = new ThreadTest[5];\t\t\r\n\r\n            for(int i=0;i&lt;5;i++)\r\n                ObjArray[i]= new ThreadTest();\r\n\r\n                Date BeforeDate = new Date();\r\n\r\n                for(int i=0; i&lt;5;i++ )\r\n                {\r\n                    ObjArray[i].start();  \r\n                }\r\n\r\n                try\r\n                {\r\n                    for(int i=0; i&lt;5;i++ )\r\n                        ObjArray[i].join();\r\n                }\r\n                catch(InterruptedException e)\r\n                {\r\n                }\r\n\r\n                Date AfterDate = new Date();\t\t  \r\n                Double Time_Consume = (AfterDate.getTime()- BeforeDate.getTime())/1000.0;\r\n                System.out.println(&quot;Time Consume= &quot; + Time_Consume + &quot; Seconds&quot;  );\r\n        }\r\n\r\n        public void run() {\r\n            String tmp = &quot;&quot;;\r\n            for (int i = 0; i &lt; 100000; i++) {\r\n                tmp += i;\r\n            }\t\r\n        }\t\r\n    }\r\n    ```\r\n    \r\n    ```none\r\n    Time Consume= 18.658 Seconds\r\n    ```\r\n\r\nIn the second demo, I create five threads, run the same function parallel in five threads. I expect the time consumption is similar with first project, which means close to five seconds.\r\n\r\nHowever, it is much higher than my expectation, it is closer to be 5 (run times) * 4.771 = 23.85 seconds, like work in sequential.\r\n\r\nWhy?\r\n","title":"Why is there no significant difference with or without thread?","body":"<p>I want to evaluate the Java thread function.</p>\n<ol>\n<li><p>I created a demo without thread, see below:</p>\n<pre class=\"lang-java prettyprint-override\"><code>import java.util.*;\n\npublic class NoThread {\n\n    public static void main(String[] args) {\n        NoThread Obj= new NoThread();   \n        Date BeforeDate = new Date();\n\n        Obj.run();\n\n        Date AfterDate = new Date();\n        Double Time_Consume = (AfterDate.getTime()- BeforeDate.getTime())/1000.0;\n\n        System.out.println(&quot;Time Consume= &quot; + Time_Consume + &quot; Seconds&quot;  );\n    }\n\n    public void run() {\n        String tmp = &quot;&quot;;\n        for (int i = 0; i &lt; 100000; i++) {\n            tmp += i;\n        }   \n    }\n\n}\n</code></pre>\n<pre class=\"lang-none prettyprint-override\"><code>Cons\n\nole display: Time Consume= 4.771 Seconds\n</code></pre>\n</li>\n<li><p>I created a demo with thread.</p>\n<pre class=\"lang-java prettyprint-override\"><code>import java.util.Date;\n\npublic class ThreadTest extends Thread\n{\n    public static void main(String[] args) {\n        ThreadTest[ ] ObjArray = new ThreadTest[5];     \n\n        for(int i=0;i&lt;5;i++)\n            ObjArray[i]= new ThreadTest();\n\n            Date BeforeDate = new Date();\n\n            for(int i=0; i&lt;5;i++ )\n            {\n                ObjArray[i].start();  \n            }\n\n            try\n            {\n                for(int i=0; i&lt;5;i++ )\n                    ObjArray[i].join();\n            }\n            catch(InterruptedException e)\n            {\n            }\n\n            Date AfterDate = new Date();          \n            Double Time_Consume = (AfterDate.getTime()- BeforeDate.getTime())/1000.0;\n            System.out.println(&quot;Time Consume= &quot; + Time_Consume + &quot; Seconds&quot;  );\n    }\n\n    public void run() {\n        String tmp = &quot;&quot;;\n        for (int i = 0; i &lt; 100000; i++) {\n            tmp += i;\n        }   \n    }   \n}\n</code></pre>\n<pre class=\"lang-none prettyprint-override\"><code>Time Consume= 18.658 Seconds\n</code></pre>\n</li>\n</ol>\n<p>In the second demo, I create five threads, run the same function parallel in five threads. I expect the time consumption is similar with first project, which means close to five seconds.</p>\n<p>However, it is much higher than my expectation, it is closer to be 5 (run times) * 4.771 = 23.85 seconds, like work in sequential.</p>\n<p>Why?</p>\n"},{"tags":["java","amazon-web-services","amazon-s3","aws-lambda","aws-sdk-java-2.0"],"comments":[{"owner":{"account_id":10510817,"reputation":624,"user_id":7746591,"display_name":"Andres Bores"},"score":0,"creation_date":1694984543,"post_id":77123417,"comment_id":135960049,"body_markdown":"Did you try to increase the Lambda function timeout?","body":"Did you try to increase the Lambda function timeout?"},{"owner":{"account_id":18182276,"reputation":3,"user_id":13229772,"display_name":"texi"},"score":0,"creation_date":1694984596,"post_id":77123417,"comment_id":135960055,"body_markdown":"Yes, I did but didn&#39;t help","body":"Yes, I did but didn&#39;t help"},{"owner":{"account_id":10510817,"reputation":624,"user_id":7746591,"display_name":"Andres Bores"},"score":0,"creation_date":1694985062,"post_id":77123417,"comment_id":135960106,"body_markdown":"Try increasing the Lambda function&#39;s RAM.","body":"Try increasing the Lambda function&#39;s RAM."},{"owner":{"account_id":7501,"reputation":187932,"user_id":13070,"accept_rate":90,"display_name":"Mark B"},"score":0,"creation_date":1694995565,"post_id":77123417,"comment_id":135960918,"body_markdown":"Is the Lambda function deployed to a VPC? If so, and you haven&#39;t configured the VPC networking correctly, it could be timing out trying to connect to the AWS API.","body":"Is the Lambda function deployed to a VPC? If so, and you haven&#39;t configured the VPC networking correctly, it could be timing out trying to connect to the AWS API."},{"owner":{"account_id":18399,"reputation":38994,"user_id":42126,"accept_rate":100,"display_name":"kdgregory"},"score":0,"creation_date":1695037577,"post_id":77123417,"comment_id":135966140,"body_markdown":"Assuming that you have connectivity, as MarkB asked, a 128 MB memory allotment is far too little for a Java Lambda (because memory also controls CPU). You will need to increase your memory allotment to 1 GB or more (2 GB recommended), and should increase your timeout to 30 seconds or more (based on what the Lambda is doing). See https://stackoverflow.com/questions/65157346/how-to-improve-performance-of-initial-calls-to-aws-services-from-an-aws-lambda/65160907#65160907 for more information.","body":"Assuming that you have connectivity, as MarkB asked, a 128 MB memory allotment is far too little for a Java Lambda (because memory also controls CPU). You will need to increase your memory allotment to 1 GB or more (2 GB recommended), and should increase your timeout to 30 seconds or more (based on what the Lambda is doing). See <a href=\"https://stackoverflow.com/questions/65157346/how-to-improve-performance-of-initial-calls-to-aws-services-from-an-aws-lambda/65160907#65160907\" title=\"how to improve performance of initial calls to aws services from an aws lambda\">stackoverflow.com/questions/65157346/&hellip;</a> for more information."}],"owner":{"account_id":18182276,"reputation":3,"user_id":13229772,"display_name":"texi"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":42,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1694981100,"creation_date":1694981100,"question_id":77123417,"body_markdown":"I have a LambdaFunction on Java 17 and I get a Internal Server Error, if i try to add the s3Client code snippet into my codebase. I really don&#39;t know how to get rid of it.\r\n\r\nBecause of IAM I don&#39;t have any credentials saved into my codebase.\r\nI use: `AmazonS3FullAccess` and `AWSLambdaBasicExecutionRole`.\r\n\r\n```\r\ntry {\r\n     AmazonS3 s3Client = AmazonS3ClientBuilder.standard().withRegion(Regions.EU_CENTRAL_1).build();\r\n\r\n     apiResponse = new ApiResponse(&quot;success&quot;, 200);\r\n\r\n} catch (AmazonServiceException e) {\r\n     apiResponse = new ApiResponse(e.getErrorMessage(), 500);\r\n     e.printStackTrace();\r\n} catch (SdkClientException e) {\r\n     apiResponse = new ApiResponse(e.getLocalizedMessage(), 500);\r\n     e.printStackTrace();\r\n}\r\n```\r\nLet&#39;s imagine I remove `AmazonS3 s3Client = AmazonS3ClientBuilder.standard().withRegion(Regions.EU_CENTRAL_1).build();`, then I will get statuscode 200. At the moment I don&#39;t even get a 500 status code, it&#39;s a &quot;502 Bad Gateway&quot; body: &quot;Internal Server Error&quot; in Postman.\r\n\r\nIm using following packages:\r\n```\r\n&lt;dependency&gt;\r\n    &lt;groupId&gt;com.amazonaws&lt;/groupId&gt;\r\n    &lt;artifactId&gt;aws-lambda-java-core&lt;/artifactId&gt;\r\n    &lt;version&gt;1.2.3&lt;/version&gt;\r\n&lt;/dependency&gt;\r\n&lt;dependency&gt;\r\n    &lt;groupId&gt;com.amazonaws&lt;/groupId&gt;\r\n    &lt;artifactId&gt;aws-lambda-java-events&lt;/artifactId&gt;\r\n    &lt;version&gt;3.11.1&lt;/version&gt;\r\n&lt;/dependency&gt;\r\n&lt;dependency&gt;\r\n    &lt;groupId&gt;com.amazonaws&lt;/groupId&gt;\r\n    &lt;artifactId&gt;aws-java-sdk-s3&lt;/artifactId&gt;\r\n    &lt;version&gt;1.12.552&lt;/version&gt;\r\n&lt;/dependency&gt;\r\n&lt;dependency&gt;\r\n    &lt;groupId&gt;com.amazonaws&lt;/groupId&gt;\r\n    &lt;artifactId&gt;aws-java-sdk-core&lt;/artifactId&gt;\r\n    &lt;version&gt;1.12.552&lt;/version&gt;\r\n&lt;/dependency&gt;\r\n```\r\n\r\nHere are my CloudWatch Logs (Replaced all IDs with LONG_UUID):\r\n```\r\nINIT_START Runtime Version: java:17.v11\tRuntime Version ARN: arn:aws:lambda:eu-central-1::runtime:LONG_UUID\r\n\r\nSTART RequestId: LONG_UUID Version: $LATEST\r\n\r\n2023-09-17T19:58:45.702Z LONG_UUID Task timed out after 3.07 seconds\r\n\r\nEND RequestId: LONG_UUID\r\n\r\nREPORT RequestId: LONG_UUID\tDuration: 3067.36 ms\tBilled Duration: 3000 ms\tMemory Size: 128 MB\tMax Memory Used: 91 MB\tInit Duration: 398.87 ms\t\r\n\r\nINIT_START Runtime Version: java:17.v11\tRuntime Version ARN: arn:aws:lambda:eu-central-1::runtime:LONG_UUID\r\n```\r\n\r\nI hope someone is able to help me, because I sit on this problem for 8 hours. I&#39;m quite new to Java.","title":"AmazonS3ClientBuilder Internal Server Error on Lambda","body":"<p>I have a LambdaFunction on Java 17 and I get a Internal Server Error, if i try to add the s3Client code snippet into my codebase. I really don't know how to get rid of it.</p>\n<p>Because of IAM I don't have any credentials saved into my codebase.\nI use: <code>AmazonS3FullAccess</code> and <code>AWSLambdaBasicExecutionRole</code>.</p>\n<pre><code>try {\n     AmazonS3 s3Client = AmazonS3ClientBuilder.standard().withRegion(Regions.EU_CENTRAL_1).build();\n\n     apiResponse = new ApiResponse(&quot;success&quot;, 200);\n\n} catch (AmazonServiceException e) {\n     apiResponse = new ApiResponse(e.getErrorMessage(), 500);\n     e.printStackTrace();\n} catch (SdkClientException e) {\n     apiResponse = new ApiResponse(e.getLocalizedMessage(), 500);\n     e.printStackTrace();\n}\n</code></pre>\n<p>Let's imagine I remove <code>AmazonS3 s3Client = AmazonS3ClientBuilder.standard().withRegion(Regions.EU_CENTRAL_1).build();</code>, then I will get statuscode 200. At the moment I don't even get a 500 status code, it's a &quot;502 Bad Gateway&quot; body: &quot;Internal Server Error&quot; in Postman.</p>\n<p>Im using following packages:</p>\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;com.amazonaws&lt;/groupId&gt;\n    &lt;artifactId&gt;aws-lambda-java-core&lt;/artifactId&gt;\n    &lt;version&gt;1.2.3&lt;/version&gt;\n&lt;/dependency&gt;\n&lt;dependency&gt;\n    &lt;groupId&gt;com.amazonaws&lt;/groupId&gt;\n    &lt;artifactId&gt;aws-lambda-java-events&lt;/artifactId&gt;\n    &lt;version&gt;3.11.1&lt;/version&gt;\n&lt;/dependency&gt;\n&lt;dependency&gt;\n    &lt;groupId&gt;com.amazonaws&lt;/groupId&gt;\n    &lt;artifactId&gt;aws-java-sdk-s3&lt;/artifactId&gt;\n    &lt;version&gt;1.12.552&lt;/version&gt;\n&lt;/dependency&gt;\n&lt;dependency&gt;\n    &lt;groupId&gt;com.amazonaws&lt;/groupId&gt;\n    &lt;artifactId&gt;aws-java-sdk-core&lt;/artifactId&gt;\n    &lt;version&gt;1.12.552&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n<p>Here are my CloudWatch Logs (Replaced all IDs with LONG_UUID):</p>\n<pre><code>INIT_START Runtime Version: java:17.v11 Runtime Version ARN: arn:aws:lambda:eu-central-1::runtime:LONG_UUID\n\nSTART RequestId: LONG_UUID Version: $LATEST\n\n2023-09-17T19:58:45.702Z LONG_UUID Task timed out after 3.07 seconds\n\nEND RequestId: LONG_UUID\n\nREPORT RequestId: LONG_UUID Duration: 3067.36 ms    Billed Duration: 3000 ms    Memory Size: 128 MB Max Memory Used: 91 MB  Init Duration: 398.87 ms    \n\nINIT_START Runtime Version: java:17.v11 Runtime Version ARN: arn:aws:lambda:eu-central-1::runtime:LONG_UUID\n</code></pre>\n<p>I hope someone is able to help me, because I sit on this problem for 8 hours. I'm quite new to Java.</p>\n"},{"tags":["java","xml"],"comments":[{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":3,"creation_date":1694892011,"post_id":77119262,"comment_id":135952134,"body_markdown":"Please trim your code to make it easier to find your problem. Follow these guidelines to create a [minimal reproducible example](https://stackoverflow.com/help/minimal-reproducible-example).","body":"Please trim your code to make it easier to find your problem. Follow these guidelines to create a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>."},{"owner":{"account_id":2053598,"reputation":41316,"user_id":1831987,"display_name":"VGR"},"score":2,"creation_date":1694893789,"post_id":77119262,"comment_id":135952354,"body_markdown":"Every Element has a [setTextContent](https://docs.oracle.com/en/java/javase/20/docs/api/java.xml/org/w3c/dom/Node.html#setTextContent(java.lang.String)) method.","body":"Every Element has a <a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/java.xml/org/w3c/dom/Node.html#setTextContent(java.lang.String)\" rel=\"nofollow noreferrer\">setTextContent</a> method."},{"owner":{"account_id":29176687,"reputation":322,"user_id":22351796,"display_name":"Karsten"},"score":0,"creation_date":1694899696,"post_id":77119262,"comment_id":135952884,"body_markdown":"Do yourself a favor and don&#39;t put XML documents into strings or encoding problems are predictable. Use byte arrays instead.","body":"Do yourself a favor and don&#39;t put XML documents into strings or encoding problems are predictable. Use byte arrays instead."}],"answers":[{"tags":[],"owner":{"account_id":6714862,"reputation":16230,"user_id":5176992,"display_name":"Eritrean"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1694978672,"creation_date":1694947867,"answer_id":77121482,"question_id":77119262,"body_markdown":"You may try to use [Jsoup][1]. Jsoup is actually an html parser, but is also capable of parsing xml. It is quite intuitive and once you are familiar with the [selector syntax][2] it is very easy to use. You can parse the content of your cdata to a [CDataNode][3] and use the built-in methods to get what you need. \r\n\r\nMaven dependency:\r\n\r\n    &lt;!-- https://mvnrepository.com/artifact/org.jsoup/jsoup --&gt;\r\n    &lt;dependency&gt;\r\n        &lt;groupId&gt;org.jsoup&lt;/groupId&gt;\r\n        &lt;artifactId&gt;jsoup&lt;/artifactId&gt;\r\n        &lt;version&gt;1.16.1&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n\r\nUsing Jsoup your code to replace the values could simply look like below\r\n\r\n    import java.io.File;\r\n    import java.io.FileInputStream;\r\n    import java.io.IOException;\r\n    import java.io.InputStream;\r\n    import java.nio.file.Files;\r\n    import java.nio.file.Path;\r\n    \r\n    import org.jsoup.Jsoup;\r\n    import org.jsoup.nodes.CDataNode;\r\n    import org.jsoup.nodes.Document;\r\n    import org.jsoup.parser.Parser;\r\n    \r\n    public class Example {\r\n    \r\n        public static void main(String[] args) throws IOException {\r\n    \r\n            InputStream inputStream = new FileInputStream(new File(&quot;/path/to/your/test.xml&quot;));\r\n            Document document = Jsoup.parse(inputStream, &quot;UTF-8&quot;, &quot;&quot;, Parser.xmlParser());\r\n    \r\n            CDataNode trade_qty = (CDataNode) document.selectFirst(&quot;SwapTermList trade_qty&quot;).childNode(0);\r\n            CDataNode fixed_price = (CDataNode) document.selectFirst(&quot;SwapTermList TermScrList fixed_price&quot;).childNode(0);\r\n    \r\n            System.out.println(&quot;original values&quot;);\r\n    \r\n            System.out.println(trade_qty.text());\r\n            System.out.println(fixed_price.text());\r\n    \r\n            //replace cdata text\r\n            trade_qty.text(&quot;5555&quot;);\r\n            fixed_price.text(&quot;7777&quot;);\r\n    \r\n            System.out.println(&quot;replaced values&quot;);\r\n            System.out.println(trade_qty.text());\r\n            System.out.println(fixed_price.text());\r\n    \r\n            //if you want to save the modified document to a new file use below write, else delete the 2 lines below\r\n            document.outputSettings().prettyPrint(false);\r\n            Files.writeString(Path.of(&quot;/path/to/your/test_out.xml&quot;), document.outerHtml());\r\n        }\r\n    }\r\n\r\n**Update**\r\n\r\n&gt; In case I need to replace all the trade_qty occurrences and only one occurrence of final_price (the one under parent &quot;TermPriceList&quot;), what can be done?\r\n\r\nIn order to select multiple elements having the same tag, use the method `select` instead of `selectFirst`. The syntax is similar, the difference is their return types, while select returns `Elements` selectFirst returns an `Element`. I don&#39;t see any tag having `final_price` in your sample xml. But if there was one the procedure is the same as with `fixed_price`. \r\n\r\nIf you want to modify a certain element, there are several possibilities you can give to the select argument. Like for example n-th child, last of its kind, first element, an element x followed by an element y and so on. Get familiar with the [selector syntax][4] here.\r\n\r\nI have duplicated the example code from earlier and modified it in the appropriate places based on your question. hope it&#39;s self-explanatory.\r\n\r\n\r\n    public static void main(String[] args) throws IOException {\r\n\r\n        InputStream inputStream = new FileInputStream(new File(&quot;/path/to/your/test.xml&quot;));\r\n        Document document = Jsoup.parse(inputStream, &quot;UTF-8&quot;, &quot;&quot;, Parser.xmlParser());\r\n\r\n        Elements trade_qty_elements = document.select(&quot;SwapTermList trade_qty&quot;);\r\n        CDataNode fixed_price = (CDataNode) document.selectFirst(&quot;SwapTermList TermScrList fixed_price&quot;).childNode(0);\r\n\r\n        System.out.println(&quot;original values of trade_qty_elements&quot;);\r\n        trade_qty_elements.forEach(element -&gt; System.out.println(((CDataNode) element.childNode(0)).text()));\r\n\r\n        System.out.println(&quot;original value of fixed_price&quot;);\r\n        System.out.println(fixed_price.text());\r\n\r\n        //replace cdata text for example fixed_price with 777 and all trade_qty elements with 999\r\n        fixed_price.text(&quot;777&quot;);\r\n        trade_qty_elements.forEach(element -&gt; ((CDataNode) element.childNode(0)).text(&quot;999&quot;));\r\n\r\n        System.out.println(&quot;replaced values of trade_qty_elements&quot;);\r\n        trade_qty_elements.forEach(element -&gt; System.out.println(((CDataNode) element.childNode(0)).text()));\r\n        System.out.println(&quot;replaced value of fixed_price&quot;);\r\n        System.out.println(fixed_price.text());\r\n\r\n        //if you want to save the modified document to a new file use below write, else delete the 2 lines below\r\n        document.outputSettings().prettyPrint(false);\r\n        Files.writeString(Path.of(&quot;/path/to/your/test_out.xml&quot;), document.outerHtml());\r\n    }\r\n\r\n\r\n  [1]: https://jsoup.org/\r\n  [2]: https://jsoup.org/cookbook/extracting-data/selector-syntax\r\n  [3]: https://jsoup.org/apidocs/org/jsoup/nodes/CDataNode.html\r\n  [4]: https://jsoup.org/apidocs/org/jsoup/select/Selector.html","title":"How can I replace value inside CDATA of an XML tag which is inside a specific tag using Java","body":"<p>You may try to use <a href=\"https://jsoup.org/\" rel=\"nofollow noreferrer\">Jsoup</a>. Jsoup is actually an html parser, but is also capable of parsing xml. It is quite intuitive and once you are familiar with the <a href=\"https://jsoup.org/cookbook/extracting-data/selector-syntax\" rel=\"nofollow noreferrer\">selector syntax</a> it is very easy to use. You can parse the content of your cdata to a <a href=\"https://jsoup.org/apidocs/org/jsoup/nodes/CDataNode.html\" rel=\"nofollow noreferrer\">CDataNode</a> and use the built-in methods to get what you need.</p>\n<p>Maven dependency:</p>\n<pre><code>&lt;!-- https://mvnrepository.com/artifact/org.jsoup/jsoup --&gt;\n&lt;dependency&gt;\n    &lt;groupId&gt;org.jsoup&lt;/groupId&gt;\n    &lt;artifactId&gt;jsoup&lt;/artifactId&gt;\n    &lt;version&gt;1.16.1&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n<p>Using Jsoup your code to replace the values could simply look like below</p>\n<pre><code>import java.io.File;\nimport java.io.FileInputStream;\nimport java.io.IOException;\nimport java.io.InputStream;\nimport java.nio.file.Files;\nimport java.nio.file.Path;\n\nimport org.jsoup.Jsoup;\nimport org.jsoup.nodes.CDataNode;\nimport org.jsoup.nodes.Document;\nimport org.jsoup.parser.Parser;\n\npublic class Example {\n\n    public static void main(String[] args) throws IOException {\n\n        InputStream inputStream = new FileInputStream(new File(&quot;/path/to/your/test.xml&quot;));\n        Document document = Jsoup.parse(inputStream, &quot;UTF-8&quot;, &quot;&quot;, Parser.xmlParser());\n\n        CDataNode trade_qty = (CDataNode) document.selectFirst(&quot;SwapTermList trade_qty&quot;).childNode(0);\n        CDataNode fixed_price = (CDataNode) document.selectFirst(&quot;SwapTermList TermScrList fixed_price&quot;).childNode(0);\n\n        System.out.println(&quot;original values&quot;);\n\n        System.out.println(trade_qty.text());\n        System.out.println(fixed_price.text());\n\n        //replace cdata text\n        trade_qty.text(&quot;5555&quot;);\n        fixed_price.text(&quot;7777&quot;);\n\n        System.out.println(&quot;replaced values&quot;);\n        System.out.println(trade_qty.text());\n        System.out.println(fixed_price.text());\n\n        //if you want to save the modified document to a new file use below write, else delete the 2 lines below\n        document.outputSettings().prettyPrint(false);\n        Files.writeString(Path.of(&quot;/path/to/your/test_out.xml&quot;), document.outerHtml());\n    }\n}\n</code></pre>\n<p><strong>Update</strong></p>\n<blockquote>\n<p>In case I need to replace all the trade_qty occurrences and only one occurrence of final_price (the one under parent &quot;TermPriceList&quot;), what can be done?</p>\n</blockquote>\n<p>In order to select multiple elements having the same tag, use the method <code>select</code> instead of <code>selectFirst</code>. The syntax is similar, the difference is their return types, while select returns <code>Elements</code> selectFirst returns an <code>Element</code>. I don't see any tag having <code>final_price</code> in your sample xml. But if there was one the procedure is the same as with <code>fixed_price</code>.</p>\n<p>If you want to modify a certain element, there are several possibilities you can give to the select argument. Like for example n-th child, last of its kind, first element, an element x followed by an element y and so on. Get familiar with the <a href=\"https://jsoup.org/apidocs/org/jsoup/select/Selector.html\" rel=\"nofollow noreferrer\">selector syntax</a> here.</p>\n<p>I have duplicated the example code from earlier and modified it in the appropriate places based on your question. hope it's self-explanatory.</p>\n<pre><code>public static void main(String[] args) throws IOException {\n\n    InputStream inputStream = new FileInputStream(new File(&quot;/path/to/your/test.xml&quot;));\n    Document document = Jsoup.parse(inputStream, &quot;UTF-8&quot;, &quot;&quot;, Parser.xmlParser());\n\n    Elements trade_qty_elements = document.select(&quot;SwapTermList trade_qty&quot;);\n    CDataNode fixed_price = (CDataNode) document.selectFirst(&quot;SwapTermList TermScrList fixed_price&quot;).childNode(0);\n\n    System.out.println(&quot;original values of trade_qty_elements&quot;);\n    trade_qty_elements.forEach(element -&gt; System.out.println(((CDataNode) element.childNode(0)).text()));\n\n    System.out.println(&quot;original value of fixed_price&quot;);\n    System.out.println(fixed_price.text());\n\n    //replace cdata text for example fixed_price with 777 and all trade_qty elements with 999\n    fixed_price.text(&quot;777&quot;);\n    trade_qty_elements.forEach(element -&gt; ((CDataNode) element.childNode(0)).text(&quot;999&quot;));\n\n    System.out.println(&quot;replaced values of trade_qty_elements&quot;);\n    trade_qty_elements.forEach(element -&gt; System.out.println(((CDataNode) element.childNode(0)).text()));\n    System.out.println(&quot;replaced value of fixed_price&quot;);\n    System.out.println(fixed_price.text());\n\n    //if you want to save the modified document to a new file use below write, else delete the 2 lines below\n    document.outputSettings().prettyPrint(false);\n    Files.writeString(Path.of(&quot;/path/to/your/test_out.xml&quot;), document.outerHtml());\n}\n</code></pre>\n"}],"owner":{"account_id":28348722,"reputation":35,"user_id":21680516,"display_name":"Rassermann"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":84,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":77121482,"answer_count":1,"score":2,"last_activity_date":1694978672,"creation_date":1694891900,"question_id":77119262,"body_markdown":"I have an input xml as given below. \r\nFrom this xml, I want to form a new xml String by replacing the value inside CDATA of &lt;trade_qty&gt; tag which is under &quot;SwapTermList&quot; Parent tag. e.g. `&lt;trade_qty&gt;&lt;![CDATA[25.0]]&gt;&lt;/trade_qty&gt;` //Need to replace 25.0 with another value that I will pass\r\nSimilarly, also replace value inside CDATA of &lt;fixed_price&gt; tag which is under &quot;TermPriceList&quot; Parent tag, which is inturn also under &quot;SwapTermList&quot; Parent Tag.\r\n\r\n`&lt;fixed_price&gt;&lt;![CDATA[92.053]]&gt;&lt;/fixed_price&gt;`  //REplace 92.053 with another value that I will pass\r\n\r\nSample XML:\r\n\r\n    &lt;SOAP-ENV:Envelope xmlns:SOAP-ENV=&quot;http://schemas.xmlsoap.org/soap/envelope/&quot; xmlns:xsd=&quot;http://www.w3.org/1999/XMLSchema&quot; xmlns:xsi=&quot;http://www.w3.org/1999/XMLSchema-instance&quot;&gt;\r\n      &lt;SOAP-ENV:Header TransactionID=&quot;7578641ebc849609668e4b69e6b1f088c5ec0e2d0b6ae0&quot; controllerName=&quot;CONTROLLER_1&quot; hostIPAddress=&quot;10.21.75.203&quot; serverEndTime=&quot;22:40:54.382&quot; serverStartTime=&quot;22:40:54.366&quot; serverTimeInMs=&quot;15&quot;/&gt;\r\n      &lt;SOAP-ENV:Body&gt;\r\n        &lt;ns1:GetTradeResponse xmlns:ns1=&quot;urn:TradeData&quot; IsCompress=&quot;FALSE&quot; SOAP-ENV:encodingStyle=&quot;http://schemas.xmlsoap.org/soap/encoding/&quot;&gt;\r\n          &lt;return xsi:type=&quot;xsd:string&quot;&gt;\r\n            &lt;response&gt;\r\n              &lt;mhead name=&quot;TPTResGetTrade&quot;&gt;\r\n                &lt;sender&gt;TriplePointClient&lt;/sender&gt;\r\n              &lt;/mhead&gt;\r\n              &lt;mbody&gt;\r\n                &lt;data&gt;\r\n                  &lt;GetTrade&gt;\r\n                    &lt;TradeHeader table=&quot;1&quot;&gt;\r\n                      &lt;trade_status_ind&gt;&lt;![CDATA[1]]&gt;&lt;/trade_status_ind&gt;\r\n                      &lt;comm_uom_cd&gt;&lt;![CDATA[MT]]&gt;&lt;/comm_uom_cd&gt;\r\n                      &lt;participant_reloaded_ind&gt;&lt;![CDATA[1]]&gt;&lt;/participant_reloaded_ind&gt;\r\n                      &lt;deal_id&gt;&lt;![CDATA[93174763]]&gt;&lt;/deal_id&gt;\r\n                      &lt;internal_ind&gt;&lt;![CDATA[0]]&gt;&lt;/internal_ind&gt;\r\n                      &lt;mirror_doc_ind&gt;&lt;![CDATA[0]]&gt;&lt;/mirror_doc_ind&gt;\r\n                      &lt;permission_ind&gt;&lt;![CDATA[1]]&gt;&lt;/permission_ind&gt;\r\n                      &lt;trade_type_cd&gt;&lt;![CDATA[Swap (L)]]&gt;&lt;/trade_type_cd&gt;\r\n                      &lt;delivery_based_ind&gt;&lt;![CDATA[0]]&gt;&lt;/delivery_based_ind&gt;\r\n                      &lt;process_group_cd&gt;&lt;![CDATA[MUM Physical]]&gt;&lt;/process_group_cd&gt;\r\n                      &lt;xch_internal_comp_type_ind&gt;&lt;![CDATA[-1]]&gt;&lt;/xch_internal_comp_type_ind&gt;\r\n                      &lt;trader_person_num&gt;&lt;![CDATA[151]]&gt;&lt;/trader_person_num&gt;\r\n                      &lt;strategy_num&gt;&lt;![CDATA[4142]]&gt;&lt;/strategy_num&gt;\r\n                      &lt;language_cd&gt;&lt;![CDATA[en]]&gt;&lt;/language_cd&gt;\r\n                      &lt;comm_curr_cd&gt;&lt;![CDATA[USD]]&gt;&lt;/comm_curr_cd&gt;\r\n                      &lt;inter_company_ind&gt;&lt;![CDATA[0]]&gt;&lt;/inter_company_ind&gt;\r\n                      &lt;trade_linked_ind&gt;&lt;![CDATA[0]]&gt;&lt;/trade_linked_ind&gt;\r\n                      &lt;broker2_spread_ind&gt;&lt;![CDATA[0]]&gt;&lt;/broker2_spread_ind&gt;\r\n                      &lt;cleared_ind&gt;&lt;![CDATA[-1]]&gt;&lt;/cleared_ind&gt;\r\n                      &lt;broker_spread_ind&gt;&lt;![CDATA[0]]&gt;&lt;/broker_spread_ind&gt;\r\n                      &lt;trade_dt&gt;&lt;![CDATA[20230913000000]]&gt;&lt;/trade_dt&gt;\r\n                      &lt;commission_type_ind&gt;&lt;![CDATA[0]]&gt;&lt;/commission_type_ind&gt;\r\n                      &lt;notification_ind&gt;&lt;![CDATA[0]]&gt;&lt;/notification_ind&gt;\r\n                      &lt;internal_company_num&gt;&lt;![CDATA[4392]]&gt;&lt;/internal_company_num&gt;\r\n                      &lt;fx_spot_trade_ind&gt;&lt;![CDATA[0]]&gt;&lt;/fx_spot_trade_ind&gt;\r\n                      &lt;broker_company_num&gt;&lt;![CDATA[4103]]&gt;&lt;/broker_company_num&gt;\r\n                      &lt;instrument_type_cd&gt;&lt;![CDATA[Financial Swap]]&gt;&lt;/instrument_type_cd&gt;\r\n                      &lt;data_source_cd&gt;&lt;![CDATA[XL]]&gt;&lt;/data_source_cd&gt;\r\n                      &lt;confirm_approval_ind&gt;&lt;![CDATA[0]]&gt;&lt;/confirm_approval_ind&gt;\r\n                      &lt;is_delivery_upload&gt;&lt;![CDATA[0]]&gt;&lt;/is_delivery_upload&gt;\r\n                      &lt;counterpart_company_num&gt;&lt;![CDATA[4175]]&gt;&lt;/counterpart_company_num&gt;\r\n                      &lt;internal_side_ind&gt;&lt;![CDATA[1]]&gt;&lt;/internal_side_ind&gt;\r\n                      &lt;trade_num&gt;&lt;![CDATA[902495]]&gt;&lt;/trade_num&gt;\r\n                      &lt;ref1_enabled_ind&gt;&lt;![CDATA[1]]&gt;&lt;/ref1_enabled_ind&gt;\r\n                      &lt;hedge_ind&gt;&lt;![CDATA[0]]&gt;&lt;/hedge_ind&gt;\r\n                      &lt;whatif_trade_ind&gt;&lt;![CDATA[0]]&gt;&lt;/whatif_trade_ind&gt;\r\n                      &lt;xch_type_ind&gt;&lt;![CDATA[0]]&gt;&lt;/xch_type_ind&gt;\r\n                      &lt;commission_amt&gt;&lt;![CDATA[0.05]]&gt;&lt;/commission_amt&gt;\r\n                      &lt;ref2_enabled_ind&gt;&lt;![CDATA[1]]&gt;&lt;/ref2_enabled_ind&gt;\r\n                      &lt;inter_comp_ind&gt;&lt;![CDATA[0]]&gt;&lt;/inter_comp_ind&gt;\r\n                      &lt;deal_name_str&gt;&lt;![CDATA[Swap (L) from]]&gt;&lt;/deal_name_str&gt;\r\n                      &lt;SwapTermList table=&quot;2&quot;&gt;\r\n                        &lt;buy_sell_ind&gt;&lt;![CDATA[1]]&gt;&lt;/buy_sell_ind&gt;\r\n                        &lt;reporting_period_offset&gt;&lt;![CDATA[0]]&gt;&lt;/reporting_period_offset&gt;\r\n                        &lt;settlement_curr_cd&gt;&lt;![CDATA[USD]]&gt;&lt;/settlement_curr_cd&gt;\r\n                        &lt;term_section_cd&gt;&lt;![CDATA[902495-1]]&gt;&lt;/term_section_cd&gt;\r\n                        &lt;use_default_instruction_ind&gt;&lt;![CDATA[1]]&gt;&lt;/use_default_instruction_ind&gt;\r\n                        &lt;mtm_factor&gt;&lt;![CDATA[100.0]]&gt;&lt;/mtm_factor&gt;\r\n                        &lt;delivery_start_dt&gt;&lt;![CDATA[20231001000000]]&gt;&lt;/delivery_start_dt&gt;\r\n                        &lt;customs_duty_status_ind&gt;&lt;![CDATA[-1]]&gt;&lt;/customs_duty_status_ind&gt;\r\n                        &lt;settle_payment_term_cd&gt;&lt;![CDATA[14 CAL NYBnk]]&gt;&lt;/settle_payment_term_cd&gt;\r\n                        &lt;alt_price_conv_ind&gt;&lt;![CDATA[0]]&gt;&lt;/alt_price_conv_ind&gt;\r\n                        &lt;cmdty_cd&gt;&lt;![CDATA[Dubai]]&gt;&lt;/cmdty_cd&gt;\r\n                        &lt;strategy_num&gt;&lt;![CDATA[4142]]&gt;&lt;/strategy_num&gt;\r\n                        &lt;last_modify_dt&gt;&lt;![CDATA[20230913124059]]&gt;&lt;/last_modify_dt&gt;\r\n                        &lt;to_uom_cd&gt;&lt;![CDATA[MT]]&gt;&lt;/to_uom_cd&gt;\r\n                        &lt;pricing_schedule_ind&gt;&lt;![CDATA[1]]&gt;&lt;/pricing_schedule_ind&gt;\r\n                        &lt;source_action_ind&gt;&lt;![CDATA[0]]&gt;&lt;/source_action_ind&gt;\r\n                        &lt;term_dt&gt;&lt;![CDATA[20230913000000]]&gt;&lt;/term_dt&gt;\r\n                        &lt;deliv_sched_cd&gt;&lt;![CDATA[Monthly]]&gt;&lt;/deliv_sched_cd&gt;\r\n                        &lt;trade_term_ind&gt;&lt;![CDATA[1]]&gt;&lt;/trade_term_ind&gt;\r\n                        &lt;allocated_ind&gt;&lt;![CDATA[0]]&gt;&lt;/allocated_ind&gt;\r\n                        &lt;scheduled_ind&gt;&lt;![CDATA[0]]&gt;&lt;/scheduled_ind&gt;\r\n                        &lt;location_num&gt;&lt;![CDATA[2566]]&gt;&lt;/location_num&gt;\r\n                        &lt;timezone_cd&gt;&lt;![CDATA[GMT]]&gt;&lt;/timezone_cd&gt;\r\n                        &lt;from_uom_cd&gt;&lt;![CDATA[BBL]]&gt;&lt;/from_uom_cd&gt;\r\n                        &lt;term_input_dt&gt;&lt;![CDATA[20230913000000]]&gt;&lt;/term_input_dt&gt;\r\n                        &lt;term_num&gt;&lt;![CDATA[6709]]&gt;&lt;/term_num&gt;\r\n                        &lt;settlement_uom_cd&gt;&lt;![CDATA[BBL]]&gt;&lt;/settlement_uom_cd&gt;\r\n                        &lt;delivery_end_dt&gt;&lt;![CDATA[20231031000000]]&gt;&lt;/delivery_end_dt&gt;\r\n                        &lt;trade_qty&gt;&lt;![CDATA[**25.0**]]&gt;&lt;/trade_qty&gt;\r\n                        &lt;instrument_type_cd&gt;&lt;![CDATA[Financial Swap]]&gt;&lt;/instrument_type_cd&gt;\r\n                        &lt;delivery_start_period&gt;&lt;![CDATA[HE01]]&gt;&lt;/delivery_start_period&gt;\r\n                        &lt;delivery_end_period&gt;&lt;![CDATA[HE24]]&gt;&lt;/delivery_end_period&gt;\r\n                        &lt;use_option_model_vol_ind&gt;&lt;![CDATA[0]]&gt;&lt;/use_option_model_vol_ind&gt;\r\n                        &lt;mtm_schedule_ind&gt;&lt;![CDATA[1]]&gt;&lt;/mtm_schedule_ind&gt;\r\n                        &lt;bonafide_hedge_ind&gt;&lt;![CDATA[0]]&gt;&lt;/bonafide_hedge_ind&gt;\r\n                        &lt;bonafide_hedge_type_ind&gt;&lt;![CDATA[-1]]&gt;&lt;/bonafide_hedge_type_ind&gt;\r\n                        &lt;lc_required_ind&gt;&lt;![CDATA[0]]&gt;&lt;/lc_required_ind&gt;\r\n                        &lt;end_dt&gt;&lt;![CDATA[20231031000000]]&gt;&lt;/end_dt&gt;\r\n                        &lt;bonafide_claimant_ind&gt;&lt;![CDATA[-1]]&gt;&lt;/bonafide_claimant_ind&gt;\r\n                        &lt;qty_periodicity_ind&gt;&lt;![CDATA[2]]&gt;&lt;/qty_periodicity_ind&gt;\r\n                        &lt;start_dt&gt;&lt;![CDATA[20231001000000]]&gt;&lt;/start_dt&gt;\r\n                        &lt;uom_conversion_rate&gt;&lt;![CDATA[7.231608936927271]]&gt;&lt;/uom_conversion_rate&gt;\r\n                        &lt;qty_uom_cd&gt;&lt;![CDATA[zKBBL]]&gt;&lt;/qty_uom_cd&gt;\r\n                        &lt;hdg_acct_import_status_ind&gt;&lt;![CDATA[0]]&gt;&lt;/hdg_acct_import_status_ind&gt;\r\n                        &lt;extended_qty&gt;&lt;![CDATA[25.0]]&gt;&lt;/extended_qty&gt;\r\n                        &lt;volume_computation_ind&gt;&lt;![CDATA[0]]&gt;&lt;/volume_computation_ind&gt;\r\n                        &lt;TermScrList table=&quot;2&quot;&gt;\r\n                          &lt;settlement_curr_cd&gt;&lt;![CDATA[USD]]&gt;&lt;/settlement_curr_cd&gt;\r\n                          &lt;price_uom_period_ind&gt;&lt;![CDATA[-1]]&gt;&lt;/price_uom_period_ind&gt;\r\n                          &lt;common_pricing_days_ind&gt;&lt;![CDATA[0]]&gt;&lt;/common_pricing_days_ind&gt;\r\n                          &lt;price_qty_category_ind&gt;&lt;![CDATA[0]]&gt;&lt;/price_qty_category_ind&gt;\r\n                          &lt;percentage_cashflow_qty_ind&gt;&lt;![CDATA[-1]]&gt;&lt;/percentage_cashflow_qty_ind&gt;\r\n                          &lt;internal_ind&gt;&lt;![CDATA[0]]&gt;&lt;/internal_ind&gt;\r\n                          &lt;delivery_based_ind&gt;&lt;![CDATA[0]]&gt;&lt;/delivery_based_ind&gt;\r\n                          &lt;trader_person_num&gt;&lt;![CDATA[151]]&gt;&lt;/trader_person_num&gt;\r\n                          &lt;period_start_dt&gt;&lt;![CDATA[20231001000000]]&gt;&lt;/period_start_dt&gt;\r\n                          &lt;term_pricing_num&gt;&lt;![CDATA[25770]]&gt;&lt;/term_pricing_num&gt;\r\n                          &lt;strategy_num&gt;&lt;![CDATA[4142]]&gt;&lt;/strategy_num&gt;\r\n                          &lt;tier_type_ind&gt;&lt;![CDATA[-1]]&gt;&lt;/tier_type_ind&gt;\r\n                          &lt;implied_cost_ind&gt;&lt;![CDATA[0]]&gt;&lt;/implied_cost_ind&gt;\r\n                          &lt;book_upon_match_ind&gt;&lt;![CDATA[0]]&gt;&lt;/book_upon_match_ind&gt;\r\n                          &lt;do_not_apply_ra_cost_ind&gt;&lt;![CDATA[0]]&gt;&lt;/do_not_apply_ra_cost_ind&gt;\r\n                          &lt;rate_lookup_cost_ind&gt;&lt;![CDATA[0]]&gt;&lt;/rate_lookup_cost_ind&gt;\r\n                          &lt;round_precision_ind&gt;&lt;![CDATA[0]]&gt;&lt;/round_precision_ind&gt;\r\n                          &lt;cost_source_ind&gt;&lt;![CDATA[-1]]&gt;&lt;/cost_source_ind&gt;\r\n                          &lt;estimated_volume&gt;&lt;![CDATA[100.0]]&gt;&lt;/estimated_volume&gt;\r\n                          &lt;mix_defn_num&gt;&lt;![CDATA[0]]&gt;&lt;/mix_defn_num&gt;\r\n                          &lt;term_pricing_comp_num&gt;&lt;![CDATA[27072]]&gt;&lt;/term_pricing_comp_num&gt;\r\n                          &lt;effective_dt&gt;&lt;![CDATA[20230913000000]]&gt;&lt;/effective_dt&gt;\r\n                          &lt;multiplier&gt;&lt;![CDATA[1.0]]&gt;&lt;/multiplier&gt;\r\n                          &lt;mirror_scr_num&gt;&lt;![CDATA[0]]&gt;&lt;/mirror_scr_num&gt;\r\n                          &lt;period_end_dt&gt;&lt;![CDATA[20231031000000]]&gt;&lt;/period_end_dt&gt;\r\n                          &lt;pass_thru_ind&gt;&lt;![CDATA[0]]&gt;&lt;/pass_thru_ind&gt;\r\n                          &lt;actual_estimate_ind&gt;&lt;![CDATA[0]]&gt;&lt;/actual_estimate_ind&gt;\r\n                          &lt;tier_qty_periodicity_ind&gt;&lt;![CDATA[-1]]&gt;&lt;/tier_qty_periodicity_ind&gt;\r\n                          &lt;cumulative_ind&gt;&lt;![CDATA[0]]&gt;&lt;/cumulative_ind&gt;\r\n                          &lt;period_sub_category_ind&gt;&lt;![CDATA[-1]]&gt;&lt;/period_sub_category_ind&gt;\r\n                          &lt;componentize_status_ind&gt;&lt;![CDATA[-1]]&gt;&lt;/componentize_status_ind&gt;\r\n                          &lt;tier_boundary_ind&gt;&lt;![CDATA[-1]]&gt;&lt;/tier_boundary_ind&gt;\r\n                          &lt;hidden_cost_ind&gt;&lt;![CDATA[0]]&gt;&lt;/hidden_cost_ind&gt;\r\n                          &lt;round_pricing_component_ind&gt;&lt;![CDATA[0]]&gt;&lt;/round_pricing_component_ind&gt;\r\n                          &lt;manual_override_ind&gt;&lt;![CDATA[0]]&gt;&lt;/manual_override_ind&gt;\r\n                          &lt;pl_allocation_rule_ind&gt;&lt;![CDATA[0]]&gt;&lt;/pl_allocation_rule_ind&gt;\r\n                          &lt;apply_precision_ind&gt;&lt;![CDATA[1]]&gt;&lt;/apply_precision_ind&gt;\r\n                          &lt;scr_num&gt;&lt;![CDATA[104122]]&gt;&lt;/scr_num&gt;\r\n                          &lt;fixed_price&gt;&lt;![CDATA[0.05]]&gt;&lt;/fixed_price&gt;\r\n                          &lt;pricingComponentCount&gt;&lt;![CDATA[0]]&gt;&lt;/pricingComponentCount&gt;\r\n                          &lt;input_dt&gt;&lt;![CDATA[20230913000000]]&gt;&lt;/input_dt&gt;\r\n                          &lt;demand_charge_ind&gt;&lt;![CDATA[0]]&gt;&lt;/demand_charge_ind&gt;\r\n                          &lt;cost_revenue_ind&gt;&lt;![CDATA[-1]]&gt;&lt;/cost_revenue_ind&gt;\r\n                          &lt;payment_due_dt&gt;&lt;![CDATA[20230913000000]]&gt;&lt;/payment_due_dt&gt;\r\n                          &lt;scr_generated_ind&gt;&lt;![CDATA[1]]&gt;&lt;/scr_generated_ind&gt;\r\n                          &lt;pricing_type_ind&gt;&lt;![CDATA[0]]&gt;&lt;/pricing_type_ind&gt;\r\n                          &lt;estimate_audit_num&gt;&lt;![CDATA[19328]]&gt;&lt;/estimate_audit_num&gt;\r\n                          &lt;comp_function_ind&gt;&lt;![CDATA[-1]]&gt;&lt;/comp_function_ind&gt;\r\n                          &lt;use_pricing_dt_ind&gt;&lt;![CDATA[0]]&gt;&lt;/use_pricing_dt_ind&gt;\r\n                          &lt;company_num&gt;&lt;![CDATA[4103]]&gt;&lt;/company_num&gt;\r\n                          &lt;floor_book_upon_match_ind&gt;&lt;![CDATA[0]]&gt;&lt;/floor_book_upon_match_ind&gt;\r\n                          &lt;complex_charges_ind&gt;&lt;![CDATA[0]]&gt;&lt;/complex_charges_ind&gt;\r\n                          &lt;balance_cost_ind&gt;&lt;![CDATA[0]]&gt;&lt;/balance_cost_ind&gt;\r\n                          &lt;rate_override_ind&gt;&lt;![CDATA[0]]&gt;&lt;/rate_override_ind&gt;\r\n                          &lt;cost_type_cd&gt;&lt;![CDATA[Broker Fee]]&gt;&lt;/cost_type_cd&gt;\r\n                          &lt;fx_rate_type_ind&gt;&lt;![CDATA[-1]]&gt;&lt;/fx_rate_type_ind&gt;\r\n                          &lt;pricing_period_tier_ind&gt;&lt;![CDATA[-1]]&gt;&lt;/pricing_period_tier_ind&gt;\r\n                          &lt;tier_qty_type_ind&gt;&lt;![CDATA[-1]]&gt;&lt;/tier_qty_type_ind&gt;\r\n                          &lt;time_based_cost_ind&gt;&lt;![CDATA[0]]&gt;&lt;/time_based_cost_ind&gt;\r\n                          &lt;price_uom_cd&gt;&lt;![CDATA[MT]]&gt;&lt;/price_uom_cd&gt;\r\n                          &lt;internal_company_num&gt;&lt;![CDATA[4392]]&gt;&lt;/internal_company_num&gt;\r\n                          &lt;ic_mirror_cost_ind&gt;&lt;![CDATA[0]]&gt;&lt;/ic_mirror_cost_ind&gt;\r\n                          &lt;ic_scr_mirror_cost_ind&gt;&lt;![CDATA[0]]&gt;&lt;/ic_scr_mirror_cost_ind&gt;\r\n                          &lt;rate_lookup_cost_type_ind&gt;&lt;![CDATA[0]]&gt;&lt;/rate_lookup_cost_type_ind&gt;\r\n                          &lt;data_source_cd&gt;&lt;![CDATA[XL]]&gt;&lt;/data_source_cd&gt;\r\n                          &lt;price_curr_cd&gt;&lt;![CDATA[USD]]&gt;&lt;/price_curr_cd&gt;\r\n                          &lt;round_pricing_rule_ind&gt;&lt;![CDATA[0]]&gt;&lt;/round_pricing_rule_ind&gt;\r\n                          &lt;broker_type_ind&gt;&lt;![CDATA[1]]&gt;&lt;/broker_type_ind&gt;\r\n                          &lt;inter_comp_ind&gt;&lt;![CDATA[0]]&gt;&lt;/inter_comp_ind&gt;\r\n                          &lt;retain_realized_ind&gt;&lt;![CDATA[0]]&gt;&lt;/retain_realized_ind&gt;\r\n                        &lt;/TermScrList&gt;\r\n                        &lt;TermUdfList table=&quot;2&quot;&gt;\r\n                          &lt;udf_value&gt;&lt;![CDATA[2]]&gt;&lt;/udf_value&gt;\r\n                          &lt;operation&gt;&lt;![CDATA[-1]]&gt;&lt;/operation&gt;\r\n                          &lt;udf_cd&gt;&lt;![CDATA[Deal Time]]&gt;&lt;/udf_cd&gt;\r\n                        &lt;/TermUdfList&gt;\r\n                        &lt;TermUdfList table=&quot;2&quot;&gt;\r\n                          &lt;udf_value&gt;&lt;![CDATA[odcril_cgmlTradesINT_rel_files_202309130251.csv]]&gt;&lt;/udf_value&gt;\r\n                          &lt;operation&gt;&lt;![CDATA[-1]]&gt;&lt;/operation&gt;\r\n                          &lt;udf_cd&gt;&lt;![CDATA[File Name1]]&gt;&lt;/udf_cd&gt;\r\n                        &lt;/TermUdfList&gt;\r\n                        &lt;TermMtmList table=&quot;2&quot;&gt;\r\n                          &lt;price_uom_period_ind&gt;&lt;![CDATA[-1]]&gt;&lt;/price_uom_period_ind&gt;\r\n                          &lt;common_pricing_days_ind&gt;&lt;![CDATA[0]]&gt;&lt;/common_pricing_days_ind&gt;\r\n                          &lt;price_qty_category_ind&gt;&lt;![CDATA[-1]]&gt;&lt;/price_qty_category_ind&gt;\r\n                          &lt;percentage_cashflow_qty_ind&gt;&lt;![CDATA[-1]]&gt;&lt;/percentage_cashflow_qty_ind&gt;\r\n                          &lt;delivery_based_ind&gt;&lt;![CDATA[0]]&gt;&lt;/delivery_based_ind&gt;\r\n                          &lt;period_start_dt&gt;&lt;![CDATA[20231001000000]]&gt;&lt;/period_start_dt&gt;\r\n                          &lt;term_pricing_num&gt;&lt;![CDATA[25769]]&gt;&lt;/term_pricing_num&gt;\r\n                          &lt;tier_type_ind&gt;&lt;![CDATA[-1]]&gt;&lt;/tier_type_ind&gt;\r\n                          &lt;implied_cost_ind&gt;&lt;![CDATA[0]]&gt;&lt;/implied_cost_ind&gt;\r\n                          &lt;do_not_apply_ra_cost_ind&gt;&lt;![CDATA[0]]&gt;&lt;/do_not_apply_ra_cost_ind&gt;\r\n                          &lt;rate_lookup_cost_ind&gt;&lt;![CDATA[0]]&gt;&lt;/rate_lookup_cost_ind&gt;\r\n                          &lt;round_precision_ind&gt;&lt;![CDATA[0]]&gt;&lt;/round_precision_ind&gt;\r\n                          &lt;cost_source_ind&gt;&lt;![CDATA[-1]]&gt;&lt;/cost_source_ind&gt;\r\n                          &lt;estimated_volume&gt;&lt;![CDATA[100.0]]&gt;&lt;/estimated_volume&gt;\r\n                          &lt;mix_defn_num&gt;&lt;![CDATA[0]]&gt;&lt;/mix_defn_num&gt;\r\n                          &lt;term_pricing_comp_num&gt;&lt;![CDATA[27071]]&gt;&lt;/term_pricing_comp_num&gt;\r\n                          &lt;event_specific_pricing_ind&gt;&lt;![CDATA[0]]&gt;&lt;/event_specific_pricing_ind&gt;\r\n                          &lt;multiplier&gt;&lt;![CDATA[1.0]]&gt;&lt;/multiplier&gt;\r\n                          &lt;price_precision&gt;&lt;![CDATA[3]]&gt;&lt;/price_precision&gt;\r\n                          &lt;period_end_dt&gt;&lt;![CDATA[20231031000000]]&gt;&lt;/period_end_dt&gt;\r\n                          &lt;actual_estimate_ind&gt;&lt;![CDATA[0]]&gt;&lt;/actual_estimate_ind&gt;\r\n                          &lt;tier_qty_periodicity_ind&gt;&lt;![CDATA[-1]]&gt;&lt;/tier_qty_periodicity_ind&gt;\r\n                          &lt;cumulative_ind&gt;&lt;![CDATA[0]]&gt;&lt;/cumulative_ind&gt;\r\n                          &lt;period_sub_category_ind&gt;&lt;![CDATA[-1]]&gt;&lt;/period_sub_category_ind&gt;\r\n                          &lt;componentize_status_ind&gt;&lt;![CDATA[-1]]&gt;&lt;/componentize_status_ind&gt;\r\n                          &lt;tier_boundary_ind&gt;&lt;![CDATA[-1]]&gt;&lt;/tier_boundary_ind&gt;\r\n                          &lt;hidden_cost_ind&gt;&lt;![CDATA[0]]&gt;&lt;/hidden_cost_ind&gt;\r\n                          &lt;round_pricing_component_ind&gt;&lt;![CDATA[0]]&gt;&lt;/round_pricing_component_ind&gt;\r\n                          &lt;manual_override_ind&gt;&lt;![CDATA[0]]&gt;&lt;/manual_override_ind&gt;\r\n                          &lt;apply_precision_ind&gt;&lt;![CDATA[1]]&gt;&lt;/apply_precision_ind&gt;\r\n                          &lt;pricingComponentCount&gt;&lt;![CDATA[0]]&gt;&lt;/pricingComponentCount&gt;\r\n                          &lt;demand_charge_ind&gt;&lt;![CDATA[0]]&gt;&lt;/demand_charge_ind&gt;\r\n                          &lt;pricing_type_ind&gt;&lt;![CDATA[1]]&gt;&lt;/pricing_type_ind&gt;\r\n                          &lt;estimate_audit_num&gt;&lt;![CDATA[19327]]&gt;&lt;/estimate_audit_num&gt;\r\n                          &lt;comp_function_ind&gt;&lt;![CDATA[-1]]&gt;&lt;/comp_function_ind&gt;\r\n                          &lt;use_pricing_dt_ind&gt;&lt;![CDATA[0]]&gt;&lt;/use_pricing_dt_ind&gt;\r\n                          &lt;complex_charges_ind&gt;&lt;![CDATA[0]]&gt;&lt;/complex_charges_ind&gt;\r\n                          &lt;balance_cost_ind&gt;&lt;![CDATA[0]]&gt;&lt;/balance_cost_ind&gt;\r\n                          &lt;rate_override_ind&gt;&lt;![CDATA[0]]&gt;&lt;/rate_override_ind&gt;\r\n                          &lt;cost_type_cd&gt;&lt;![CDATA[MTM]]&gt;&lt;/cost_type_cd&gt;\r\n                          &lt;fx_rate_type_ind&gt;&lt;![CDATA[-1]]&gt;&lt;/fx_rate_type_ind&gt;\r\n                          &lt;quote_def_num&gt;&lt;![CDATA[10320]]&gt;&lt;/quote_def_num&gt;\r\n                          &lt;pricing_period_tier_ind&gt;&lt;![CDATA[-1]]&gt;&lt;/pricing_period_tier_ind&gt;\r\n                          &lt;tier_qty_type_ind&gt;&lt;![CDATA[-1]]&gt;&lt;/tier_qty_type_ind&gt;\r\n                          &lt;time_based_cost_ind&gt;&lt;![CDATA[0]]&gt;&lt;/time_based_cost_ind&gt;\r\n                          &lt;ic_mirror_cost_ind&gt;&lt;![CDATA[0]]&gt;&lt;/ic_mirror_cost_ind&gt;\r\n                          &lt;rate_lookup_cost_type_ind&gt;&lt;![CDATA[0]]&gt;&lt;/rate_lookup_cost_type_ind&gt;\r\n                          &lt;round_pricing_rule_ind&gt;&lt;![CDATA[0]]&gt;&lt;/round_pricing_rule_ind&gt;\r\n                          &lt;retain_realized_ind&gt;&lt;![CDATA[0]]&gt;&lt;/retain_realized_ind&gt;\r\n                        &lt;/TermMtmList&gt;\r\n                        &lt;TermDetailList table=&quot;2&quot;&gt;\r\n                          &lt;mon_ind&gt;&lt;![CDATA[1]]&gt;&lt;/mon_ind&gt;\r\n                          &lt;sat_ind&gt;&lt;![CDATA[1]]&gt;&lt;/sat_ind&gt;\r\n                          &lt;end_time_period_cd&gt;&lt;![CDATA[HE24]]&gt;&lt;/end_time_period_cd&gt;\r\n                          &lt;fri_ind&gt;&lt;![CDATA[1]]&gt;&lt;/fri_ind&gt;\r\n                          &lt;trade_status_ind&gt;&lt;![CDATA[1]]&gt;&lt;/trade_status_ind&gt;\r\n                          &lt;tue_ind&gt;&lt;![CDATA[1]]&gt;&lt;/tue_ind&gt;\r\n                          &lt;term_num&gt;&lt;![CDATA[6709]]&gt;&lt;/term_num&gt;\r\n                          &lt;sun_ind&gt;&lt;![CDATA[1]]&gt;&lt;/sun_ind&gt;\r\n                          &lt;var_project_delta&gt;&lt;![CDATA[100.0]]&gt;&lt;/var_project_delta&gt;\r\n                          &lt;trade_qty&gt;&lt;![CDATA[25.0]]&gt;&lt;/trade_qty&gt;\r\n                          &lt;thu_ind&gt;&lt;![CDATA[1]]&gt;&lt;/thu_ind&gt;\r\n                          &lt;comp_sync_id&gt;&lt;![CDATA[1]]&gt;&lt;/comp_sync_id&gt;\r\n                          &lt;start_time_period_cd&gt;&lt;![CDATA[HE01]]&gt;&lt;/start_time_period_cd&gt;\r\n                          &lt;detail_num&gt;&lt;![CDATA[8520]]&gt;&lt;/detail_num&gt;\r\n                          &lt;end_dt&gt;&lt;![CDATA[20231031000000]]&gt;&lt;/end_dt&gt;\r\n                          &lt;qty_periodicity_ind&gt;&lt;![CDATA[2]]&gt;&lt;/qty_periodicity_ind&gt;\r\n                          &lt;start_dt&gt;&lt;![CDATA[20231001000000]]&gt;&lt;/start_dt&gt;\r\n                          &lt;day_offset_ind&gt;&lt;![CDATA[0]]&gt;&lt;/day_offset_ind&gt;\r\n                          &lt;hol_ind&gt;&lt;![CDATA[1]]&gt;&lt;/hol_ind&gt;\r\n                          &lt;qty_uom_cd&gt;&lt;![CDATA[zKBBL]]&gt;&lt;/qty_uom_cd&gt;\r\n                          &lt;wed_ind&gt;&lt;![CDATA[1]]&gt;&lt;/wed_ind&gt;\r\n                        &lt;/TermDetailList&gt;\r\n                        &lt;TermPriceList table=&quot;2&quot;&gt;\r\n                          &lt;price_uom_period_ind&gt;&lt;![CDATA[-1]]&gt;&lt;/price_uom_period_ind&gt;\r\n                          &lt;common_pricing_days_ind&gt;&lt;![CDATA[0]]&gt;&lt;/common_pricing_days_ind&gt;\r\n                          &lt;price_qty_category_ind&gt;&lt;![CDATA[0]]&gt;&lt;/price_qty_category_ind&gt;\r\n                          &lt;percentage_cashflow_qty_ind&gt;&lt;![CDATA[-1]]&gt;&lt;/percentage_cashflow_qty_ind&gt;\r\n                          &lt;delivery_based_ind&gt;&lt;![CDATA[0]]&gt;&lt;/delivery_based_ind&gt;\r\n                          &lt;period_start_dt&gt;&lt;![CDATA[20231001000000]]&gt;&lt;/period_start_dt&gt;\r\n                          &lt;term_pricing_num&gt;&lt;![CDATA[25768]]&gt;&lt;/term_pricing_num&gt;\r\n                          &lt;tier_type_ind&gt;&lt;![CDATA[-1]]&gt;&lt;/tier_type_ind&gt;\r\n                          &lt;implied_cost_ind&gt;&lt;![CDATA[0]]&gt;&lt;/implied_cost_ind&gt;\r\n                          &lt;do_not_apply_ra_cost_ind&gt;&lt;![CDATA[0]]&gt;&lt;/do_not_apply_ra_cost_ind&gt;\r\n                          &lt;rate_lookup_cost_ind&gt;&lt;![CDATA[0]]&gt;&lt;/rate_lookup_cost_ind&gt;\r\n                          &lt;round_precision_ind&gt;&lt;![CDATA[0]]&gt;&lt;/round_precision_ind&gt;\r\n                          &lt;cost_source_ind&gt;&lt;![CDATA[-1]]&gt;&lt;/cost_source_ind&gt;\r\n                          &lt;estimated_volume&gt;&lt;![CDATA[100.0]]&gt;&lt;/estimated_volume&gt;\r\n                          &lt;mix_defn_num&gt;&lt;![CDATA[0]]&gt;&lt;/mix_defn_num&gt;\r\n                          &lt;term_pricing_comp_num&gt;&lt;![CDATA[27070]]&gt;&lt;/term_pricing_comp_num&gt;\r\n                          &lt;event_specific_pricing_ind&gt;&lt;![CDATA[0]]&gt;&lt;/event_specific_pricing_ind&gt;\r\n                          &lt;multiplier&gt;&lt;![CDATA[1.0]]&gt;&lt;/multiplier&gt;\r\n                          &lt;price_precision&gt;&lt;![CDATA[3]]&gt;&lt;/price_precision&gt;\r\n                          &lt;period_end_dt&gt;&lt;![CDATA[20231031000000]]&gt;&lt;/period_end_dt&gt;\r\n                          &lt;actual_estimate_ind&gt;&lt;![CDATA[0]]&gt;&lt;/actual_estimate_ind&gt;\r\n                          &lt;tier_qty_periodicity_ind&gt;&lt;![CDATA[-1]]&gt;&lt;/tier_qty_periodicity_ind&gt;\r\n                          &lt;cumulative_ind&gt;&lt;![CDATA[0]]&gt;&lt;/cumulative_ind&gt;\r\n                          &lt;period_sub_category_ind&gt;&lt;![CDATA[-1]]&gt;&lt;/period_sub_category_ind&gt;\r\n                          &lt;componentize_status_ind&gt;&lt;![CDATA[-1]]&gt;&lt;/componentize_status_ind&gt;\r\n                          &lt;tier_boundary_ind&gt;&lt;![CDATA[-1]]&gt;&lt;/tier_boundary_ind&gt;\r\n                          &lt;hidden_cost_ind&gt;&lt;![CDATA[0]]&gt;&lt;/hidden_cost_ind&gt;\r\n                          &lt;round_pricing_component_ind&gt;&lt;![CDATA[0]]&gt;&lt;/round_pricing_component_ind&gt;\r\n                          &lt;manual_override_ind&gt;&lt;![CDATA[0]]&gt;&lt;/manual_override_ind&gt;\r\n                          &lt;apply_precision_ind&gt;&lt;![CDATA[1]]&gt;&lt;/apply_precision_ind&gt;\r\n                          &lt;fixed_price&gt;&lt;![CDATA[**92.053**]]&gt;&lt;/fixed_price&gt;\r\n                          &lt;pricingComponentCount&gt;&lt;![CDATA[0]]&gt;&lt;/pricingComponentCount&gt;\r\n                          &lt;demand_charge_ind&gt;&lt;![CDATA[0]]&gt;&lt;/demand_charge_ind&gt;\r\n                          &lt;pricing_type_ind&gt;&lt;![CDATA[0]]&gt;&lt;/pricing_type_ind&gt;\r\n                          &lt;estimate_audit_num&gt;&lt;![CDATA[19326]]&gt;&lt;/estimate_audit_num&gt;\r\n                          &lt;comp_function_ind&gt;&lt;![CDATA[-1]]&gt;&lt;/comp_function_ind&gt;\r\n                          &lt;use_pricing_dt_ind&gt;&lt;![CDATA[0]]&gt;&lt;/use_pricing_dt_ind&gt;\r\n                          &lt;complex_charges_ind&gt;&lt;![CDATA[0]]&gt;&lt;/complex_charges_ind&gt;\r\n                          &lt;balance_cost_ind&gt;&lt;![CDATA[0]]&gt;&lt;/balance_cost_ind&gt;\r\n                          &lt;rate_override_ind&gt;&lt;![CDATA[0]]&gt;&lt;/rate_override_ind&gt;\r\n                          &lt;cost_type_cd&gt;&lt;![CDATA[Primary Settlement]]&gt;&lt;/cost_type_cd&gt;\r\n                          &lt;fx_rate_type_ind&gt;&lt;![CDATA[-1]]&gt;&lt;/fx_rate_type_ind&gt;\r\n                          &lt;pricing_period_tier_ind&gt;&lt;![CDATA[-1]]&gt;&lt;/pricing_period_tier_ind&gt;\r\n                          &lt;tier_qty_type_ind&gt;&lt;![CDATA[-1]]&gt;&lt;/tier_qty_type_ind&gt;\r\n                          &lt;time_based_cost_ind&gt;&lt;![CDATA[0]]&gt;&lt;/time_based_cost_ind&gt;\r\n                          &lt;price_uom_cd&gt;&lt;![CDATA[BBL]]&gt;&lt;/price_uom_cd&gt;\r\n                          &lt;ic_mirror_cost_ind&gt;&lt;![CDATA[0]]&gt;&lt;/ic_mirror_cost_ind&gt;\r\n                          &lt;rate_lookup_cost_type_ind&gt;&lt;![CDATA[0]]&gt;&lt;/rate_lookup_cost_type_ind&gt;\r\n                          &lt;price_curr_cd&gt;&lt;![CDATA[USD]]&gt;&lt;/price_curr_cd&gt;\r\n                          &lt;round_pricing_rule_ind&gt;&lt;![CDATA[0]]&gt;&lt;/round_pricing_rule_ind&gt;\r\n                          &lt;retain_realized_ind&gt;&lt;![CDATA[0]]&gt;&lt;/retain_realized_ind&gt;\r\n                        &lt;/TermPriceList&gt;\r\n                      &lt;/SwapTermList&gt;\r\n                    &lt;/TradeHeader&gt;\r\n                    &lt;LockNumList table=&quot;1&quot;&gt;\r\n                      &lt;lockinfo&gt;&lt;![CDATA[TRD_HEADER\t902495\t1\t\t1\r\n        ACT_CASHFLOW\t26599\t\t\t1\r\n        ACT_CASHFLOW\t26600\t\t\t1\r\n        TRD_TERM\t6709\t\t\t1\r\n        ]]&gt;&lt;/lockinfo&gt;\r\n                    &lt;/LockNumList&gt;\r\n                    &lt;Permissions table=&quot;1&quot;&gt;\r\n                      &lt;security&gt;&lt;![CDATA[0]]&gt;&lt;/security&gt;\r\n                    &lt;/Permissions&gt;\r\n                  &lt;/GetTrade&gt;\r\n                &lt;/data&gt;\r\n              &lt;/mbody&gt;\r\n            &lt;/response&gt;\r\n          &lt;/return&gt;\r\n        &lt;/ns1:GetTradeResponse&gt;\r\n      &lt;/SOAP-ENV:Body&gt;\r\n    &lt;/SOAP-ENV:Envelope&gt;\r\n\r\n\r\nI have created the Document object from existing trade string that I have and also tried some code to fetch the element. But frankly speaking I have no idea how I can achieve replacing those values keeping in mind that they are to replaced inside CDATA (Although I wont mind replacing the entire node like trade_qty itself) and that too only under a particular parent.\r\n\r\n```\r\nprivate Document parseXML(String xml) throws ParserConfigurationException, SAXException, IOException\r\n    {\r\n        DocumentBuilderFactory dbf = DocumentBuilderFactory.newInstance();\r\n        dbf.setNamespaceAware(true);\r\n        DocumentBuilder db = dbf.newDocumentBuilder();\r\n        Document doc = db.parse(new InputSource(new StringReader(xml)));\r\n        doc.getDocumentElement().normalize();\r\n        return doc;\r\n    }\r\n\r\npublic void readXML(String tradeResponseXML)\r\n    {\r\n        String replacedXML = &quot;&quot;;\r\n        Document doc = null;\r\n        try {\r\n            doc = parseXML(tradeResponseXML);\r\n        }\r\n        catch (ParserConfigurationException | SAXException  | IOException xe)\r\n        {\r\n            logger.error(&quot;Error parsing the get response xml: &quot;, xe);\r\n        }\r\n\r\n        if(doc != null)\r\n        {\r\n            NodeList nList = doc.getElementsByTagName(SWAP_TERM_LIST_XML_ELEM);\r\n            for (int i = 0; i &lt; nList.getLength(); i++)\r\n            {\r\n                Node nNode = nList.item(i);\r\n                Element eElement = (Element) nNode;\r\n                Element cElement =  (Element) eElement.getElementsByTagName(TRADE_QTY_XML_ELEM).item(0);\r\n                logger.info(&quot;Qty : &quot; + cElement.getTextContent());\r\n            }\r\n        }\r\n    }\r\n\r\n```\r\nOr Equivalent of following Dot net code:\r\n\r\n    For all node name like Get Trade,\r\n        if (rootnodes.Name == &quot;GetTrade&quot;)\r\n        {\r\n            foreach (XmlNode t_node in rootnodes.ChildNodes)\r\n            {\r\n                if (t_node.Name == &quot;TradeHeader&quot;)\r\n                {\r\n                    foreach (XmlNode s_node in t_node.ChildNodes)\r\n                    {\r\n                        if (s_node.Name == &quot;SwapTermList&quot;)\r\n                        {\r\n    \r\n                            foreach (XmlNode p_node in s_node.ChildNodes)\r\n                            {\r\n                                if (p_node.Name == &quot;trade_qty&quot;)\r\n                                {\r\n                                    ColName = p_node.Name;\r\n                                    ColValue = p_node.InnerText;\r\n    \r\n                                    sResponse1 = sResponse1.Replace(&quot;&lt;trade_qty&gt;&lt;![CDATA[&quot; + Math.Abs(Convert.ToDecimal(ColValue)).ToString() + &quot;]]&gt;&lt;/trade_qty&gt;&quot;, &quot;&lt;trade_qty&gt;&lt;![CDATA[&quot; + Math.Abs(Convert.ToDecimal(s.ItemArray.GetValue(4))).ToString() + &quot;]]&gt;&lt;/trade_qty&gt;&quot;);//(It&#39;s lots value.)\r\n                                }\r\n    \r\n                                if (p_node.Name == &quot;TermPriceList&quot;)\r\n                                {\r\n                                    foreach (XmlNode k_node in p_node.ChildNodes)\r\n                                    {\r\n                                        if (k_node.Name == &quot;fixed_price&quot;)\r\n                                        {\r\n                                            ColName = k_node.Name;\r\n                                            ColValue = k_node.InnerText;\r\n                                            errorLog.log.LogFile(&quot;COlname to update price: &quot; + ColName);\r\n                                            errorLog.log.LogFile(&quot;COlValue to update price: &quot; + ColValue);\r\n                                            sResponse1 = sResponse1.Replace(&quot;&lt;fixed_price&gt;&lt;![CDATA[&quot; + Math.Abs(Convert.ToDecimal(ColValue)).ToString() + &quot;]]&gt;&lt;/fixed_price&gt;&quot;, &quot;&lt;fixed_price&gt;&lt;![CDATA[&quot; + Math.Abs(Convert.ToDecimal(s.ItemArray.GetValue(10))).ToString() + &quot;]]&gt;&lt;/fixed_price&gt;&quot;);// its TradePrice value.\r\n                                            errorLog.log.LogFile(&quot;Response for fixed price : &quot; + sResponse1);\r\n                                        }\r\n                                    }\r\n                                }\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n    \r\n            }\r\n        }","title":"How can I replace value inside CDATA of an XML tag which is inside a specific tag using Java","body":"<p>I have an input xml as given below.\nFrom this xml, I want to form a new xml String by replacing the value inside CDATA of &lt;trade_qty&gt; tag which is under &quot;SwapTermList&quot; Parent tag. e.g. <code>&lt;trade_qty&gt;&lt;![CDATA[25.0]]&gt;&lt;/trade_qty&gt;</code> //Need to replace 25.0 with another value that I will pass\nSimilarly, also replace value inside CDATA of &lt;fixed_price&gt; tag which is under &quot;TermPriceList&quot; Parent tag, which is inturn also under &quot;SwapTermList&quot; Parent Tag.</p>\n<p><code>&lt;fixed_price&gt;&lt;![CDATA[92.053]]&gt;&lt;/fixed_price&gt;</code>  //REplace 92.053 with another value that I will pass</p>\n<p>Sample XML:</p>\n<pre><code>&lt;SOAP-ENV:Envelope xmlns:SOAP-ENV=&quot;http://schemas.xmlsoap.org/soap/envelope/&quot; xmlns:xsd=&quot;http://www.w3.org/1999/XMLSchema&quot; xmlns:xsi=&quot;http://www.w3.org/1999/XMLSchema-instance&quot;&gt;\n  &lt;SOAP-ENV:Header TransactionID=&quot;7578641ebc849609668e4b69e6b1f088c5ec0e2d0b6ae0&quot; controllerName=&quot;CONTROLLER_1&quot; hostIPAddress=&quot;10.21.75.203&quot; serverEndTime=&quot;22:40:54.382&quot; serverStartTime=&quot;22:40:54.366&quot; serverTimeInMs=&quot;15&quot;/&gt;\n  &lt;SOAP-ENV:Body&gt;\n    &lt;ns1:GetTradeResponse xmlns:ns1=&quot;urn:TradeData&quot; IsCompress=&quot;FALSE&quot; SOAP-ENV:encodingStyle=&quot;http://schemas.xmlsoap.org/soap/encoding/&quot;&gt;\n      &lt;return xsi:type=&quot;xsd:string&quot;&gt;\n        &lt;response&gt;\n          &lt;mhead name=&quot;TPTResGetTrade&quot;&gt;\n            &lt;sender&gt;TriplePointClient&lt;/sender&gt;\n          &lt;/mhead&gt;\n          &lt;mbody&gt;\n            &lt;data&gt;\n              &lt;GetTrade&gt;\n                &lt;TradeHeader table=&quot;1&quot;&gt;\n                  &lt;trade_status_ind&gt;&lt;![CDATA[1]]&gt;&lt;/trade_status_ind&gt;\n                  &lt;comm_uom_cd&gt;&lt;![CDATA[MT]]&gt;&lt;/comm_uom_cd&gt;\n                  &lt;participant_reloaded_ind&gt;&lt;![CDATA[1]]&gt;&lt;/participant_reloaded_ind&gt;\n                  &lt;deal_id&gt;&lt;![CDATA[93174763]]&gt;&lt;/deal_id&gt;\n                  &lt;internal_ind&gt;&lt;![CDATA[0]]&gt;&lt;/internal_ind&gt;\n                  &lt;mirror_doc_ind&gt;&lt;![CDATA[0]]&gt;&lt;/mirror_doc_ind&gt;\n                  &lt;permission_ind&gt;&lt;![CDATA[1]]&gt;&lt;/permission_ind&gt;\n                  &lt;trade_type_cd&gt;&lt;![CDATA[Swap (L)]]&gt;&lt;/trade_type_cd&gt;\n                  &lt;delivery_based_ind&gt;&lt;![CDATA[0]]&gt;&lt;/delivery_based_ind&gt;\n                  &lt;process_group_cd&gt;&lt;![CDATA[MUM Physical]]&gt;&lt;/process_group_cd&gt;\n                  &lt;xch_internal_comp_type_ind&gt;&lt;![CDATA[-1]]&gt;&lt;/xch_internal_comp_type_ind&gt;\n                  &lt;trader_person_num&gt;&lt;![CDATA[151]]&gt;&lt;/trader_person_num&gt;\n                  &lt;strategy_num&gt;&lt;![CDATA[4142]]&gt;&lt;/strategy_num&gt;\n                  &lt;language_cd&gt;&lt;![CDATA[en]]&gt;&lt;/language_cd&gt;\n                  &lt;comm_curr_cd&gt;&lt;![CDATA[USD]]&gt;&lt;/comm_curr_cd&gt;\n                  &lt;inter_company_ind&gt;&lt;![CDATA[0]]&gt;&lt;/inter_company_ind&gt;\n                  &lt;trade_linked_ind&gt;&lt;![CDATA[0]]&gt;&lt;/trade_linked_ind&gt;\n                  &lt;broker2_spread_ind&gt;&lt;![CDATA[0]]&gt;&lt;/broker2_spread_ind&gt;\n                  &lt;cleared_ind&gt;&lt;![CDATA[-1]]&gt;&lt;/cleared_ind&gt;\n                  &lt;broker_spread_ind&gt;&lt;![CDATA[0]]&gt;&lt;/broker_spread_ind&gt;\n                  &lt;trade_dt&gt;&lt;![CDATA[20230913000000]]&gt;&lt;/trade_dt&gt;\n                  &lt;commission_type_ind&gt;&lt;![CDATA[0]]&gt;&lt;/commission_type_ind&gt;\n                  &lt;notification_ind&gt;&lt;![CDATA[0]]&gt;&lt;/notification_ind&gt;\n                  &lt;internal_company_num&gt;&lt;![CDATA[4392]]&gt;&lt;/internal_company_num&gt;\n                  &lt;fx_spot_trade_ind&gt;&lt;![CDATA[0]]&gt;&lt;/fx_spot_trade_ind&gt;\n                  &lt;broker_company_num&gt;&lt;![CDATA[4103]]&gt;&lt;/broker_company_num&gt;\n                  &lt;instrument_type_cd&gt;&lt;![CDATA[Financial Swap]]&gt;&lt;/instrument_type_cd&gt;\n                  &lt;data_source_cd&gt;&lt;![CDATA[XL]]&gt;&lt;/data_source_cd&gt;\n                  &lt;confirm_approval_ind&gt;&lt;![CDATA[0]]&gt;&lt;/confirm_approval_ind&gt;\n                  &lt;is_delivery_upload&gt;&lt;![CDATA[0]]&gt;&lt;/is_delivery_upload&gt;\n                  &lt;counterpart_company_num&gt;&lt;![CDATA[4175]]&gt;&lt;/counterpart_company_num&gt;\n                  &lt;internal_side_ind&gt;&lt;![CDATA[1]]&gt;&lt;/internal_side_ind&gt;\n                  &lt;trade_num&gt;&lt;![CDATA[902495]]&gt;&lt;/trade_num&gt;\n                  &lt;ref1_enabled_ind&gt;&lt;![CDATA[1]]&gt;&lt;/ref1_enabled_ind&gt;\n                  &lt;hedge_ind&gt;&lt;![CDATA[0]]&gt;&lt;/hedge_ind&gt;\n                  &lt;whatif_trade_ind&gt;&lt;![CDATA[0]]&gt;&lt;/whatif_trade_ind&gt;\n                  &lt;xch_type_ind&gt;&lt;![CDATA[0]]&gt;&lt;/xch_type_ind&gt;\n                  &lt;commission_amt&gt;&lt;![CDATA[0.05]]&gt;&lt;/commission_amt&gt;\n                  &lt;ref2_enabled_ind&gt;&lt;![CDATA[1]]&gt;&lt;/ref2_enabled_ind&gt;\n                  &lt;inter_comp_ind&gt;&lt;![CDATA[0]]&gt;&lt;/inter_comp_ind&gt;\n                  &lt;deal_name_str&gt;&lt;![CDATA[Swap (L) from]]&gt;&lt;/deal_name_str&gt;\n                  &lt;SwapTermList table=&quot;2&quot;&gt;\n                    &lt;buy_sell_ind&gt;&lt;![CDATA[1]]&gt;&lt;/buy_sell_ind&gt;\n                    &lt;reporting_period_offset&gt;&lt;![CDATA[0]]&gt;&lt;/reporting_period_offset&gt;\n                    &lt;settlement_curr_cd&gt;&lt;![CDATA[USD]]&gt;&lt;/settlement_curr_cd&gt;\n                    &lt;term_section_cd&gt;&lt;![CDATA[902495-1]]&gt;&lt;/term_section_cd&gt;\n                    &lt;use_default_instruction_ind&gt;&lt;![CDATA[1]]&gt;&lt;/use_default_instruction_ind&gt;\n                    &lt;mtm_factor&gt;&lt;![CDATA[100.0]]&gt;&lt;/mtm_factor&gt;\n                    &lt;delivery_start_dt&gt;&lt;![CDATA[20231001000000]]&gt;&lt;/delivery_start_dt&gt;\n                    &lt;customs_duty_status_ind&gt;&lt;![CDATA[-1]]&gt;&lt;/customs_duty_status_ind&gt;\n                    &lt;settle_payment_term_cd&gt;&lt;![CDATA[14 CAL NYBnk]]&gt;&lt;/settle_payment_term_cd&gt;\n                    &lt;alt_price_conv_ind&gt;&lt;![CDATA[0]]&gt;&lt;/alt_price_conv_ind&gt;\n                    &lt;cmdty_cd&gt;&lt;![CDATA[Dubai]]&gt;&lt;/cmdty_cd&gt;\n                    &lt;strategy_num&gt;&lt;![CDATA[4142]]&gt;&lt;/strategy_num&gt;\n                    &lt;last_modify_dt&gt;&lt;![CDATA[20230913124059]]&gt;&lt;/last_modify_dt&gt;\n                    &lt;to_uom_cd&gt;&lt;![CDATA[MT]]&gt;&lt;/to_uom_cd&gt;\n                    &lt;pricing_schedule_ind&gt;&lt;![CDATA[1]]&gt;&lt;/pricing_schedule_ind&gt;\n                    &lt;source_action_ind&gt;&lt;![CDATA[0]]&gt;&lt;/source_action_ind&gt;\n                    &lt;term_dt&gt;&lt;![CDATA[20230913000000]]&gt;&lt;/term_dt&gt;\n                    &lt;deliv_sched_cd&gt;&lt;![CDATA[Monthly]]&gt;&lt;/deliv_sched_cd&gt;\n                    &lt;trade_term_ind&gt;&lt;![CDATA[1]]&gt;&lt;/trade_term_ind&gt;\n                    &lt;allocated_ind&gt;&lt;![CDATA[0]]&gt;&lt;/allocated_ind&gt;\n                    &lt;scheduled_ind&gt;&lt;![CDATA[0]]&gt;&lt;/scheduled_ind&gt;\n                    &lt;location_num&gt;&lt;![CDATA[2566]]&gt;&lt;/location_num&gt;\n                    &lt;timezone_cd&gt;&lt;![CDATA[GMT]]&gt;&lt;/timezone_cd&gt;\n                    &lt;from_uom_cd&gt;&lt;![CDATA[BBL]]&gt;&lt;/from_uom_cd&gt;\n                    &lt;term_input_dt&gt;&lt;![CDATA[20230913000000]]&gt;&lt;/term_input_dt&gt;\n                    &lt;term_num&gt;&lt;![CDATA[6709]]&gt;&lt;/term_num&gt;\n                    &lt;settlement_uom_cd&gt;&lt;![CDATA[BBL]]&gt;&lt;/settlement_uom_cd&gt;\n                    &lt;delivery_end_dt&gt;&lt;![CDATA[20231031000000]]&gt;&lt;/delivery_end_dt&gt;\n                    &lt;trade_qty&gt;&lt;![CDATA[**25.0**]]&gt;&lt;/trade_qty&gt;\n                    &lt;instrument_type_cd&gt;&lt;![CDATA[Financial Swap]]&gt;&lt;/instrument_type_cd&gt;\n                    &lt;delivery_start_period&gt;&lt;![CDATA[HE01]]&gt;&lt;/delivery_start_period&gt;\n                    &lt;delivery_end_period&gt;&lt;![CDATA[HE24]]&gt;&lt;/delivery_end_period&gt;\n                    &lt;use_option_model_vol_ind&gt;&lt;![CDATA[0]]&gt;&lt;/use_option_model_vol_ind&gt;\n                    &lt;mtm_schedule_ind&gt;&lt;![CDATA[1]]&gt;&lt;/mtm_schedule_ind&gt;\n                    &lt;bonafide_hedge_ind&gt;&lt;![CDATA[0]]&gt;&lt;/bonafide_hedge_ind&gt;\n                    &lt;bonafide_hedge_type_ind&gt;&lt;![CDATA[-1]]&gt;&lt;/bonafide_hedge_type_ind&gt;\n                    &lt;lc_required_ind&gt;&lt;![CDATA[0]]&gt;&lt;/lc_required_ind&gt;\n                    &lt;end_dt&gt;&lt;![CDATA[20231031000000]]&gt;&lt;/end_dt&gt;\n                    &lt;bonafide_claimant_ind&gt;&lt;![CDATA[-1]]&gt;&lt;/bonafide_claimant_ind&gt;\n                    &lt;qty_periodicity_ind&gt;&lt;![CDATA[2]]&gt;&lt;/qty_periodicity_ind&gt;\n                    &lt;start_dt&gt;&lt;![CDATA[20231001000000]]&gt;&lt;/start_dt&gt;\n                    &lt;uom_conversion_rate&gt;&lt;![CDATA[7.231608936927271]]&gt;&lt;/uom_conversion_rate&gt;\n                    &lt;qty_uom_cd&gt;&lt;![CDATA[zKBBL]]&gt;&lt;/qty_uom_cd&gt;\n                    &lt;hdg_acct_import_status_ind&gt;&lt;![CDATA[0]]&gt;&lt;/hdg_acct_import_status_ind&gt;\n                    &lt;extended_qty&gt;&lt;![CDATA[25.0]]&gt;&lt;/extended_qty&gt;\n                    &lt;volume_computation_ind&gt;&lt;![CDATA[0]]&gt;&lt;/volume_computation_ind&gt;\n                    &lt;TermScrList table=&quot;2&quot;&gt;\n                      &lt;settlement_curr_cd&gt;&lt;![CDATA[USD]]&gt;&lt;/settlement_curr_cd&gt;\n                      &lt;price_uom_period_ind&gt;&lt;![CDATA[-1]]&gt;&lt;/price_uom_period_ind&gt;\n                      &lt;common_pricing_days_ind&gt;&lt;![CDATA[0]]&gt;&lt;/common_pricing_days_ind&gt;\n                      &lt;price_qty_category_ind&gt;&lt;![CDATA[0]]&gt;&lt;/price_qty_category_ind&gt;\n                      &lt;percentage_cashflow_qty_ind&gt;&lt;![CDATA[-1]]&gt;&lt;/percentage_cashflow_qty_ind&gt;\n                      &lt;internal_ind&gt;&lt;![CDATA[0]]&gt;&lt;/internal_ind&gt;\n                      &lt;delivery_based_ind&gt;&lt;![CDATA[0]]&gt;&lt;/delivery_based_ind&gt;\n                      &lt;trader_person_num&gt;&lt;![CDATA[151]]&gt;&lt;/trader_person_num&gt;\n                      &lt;period_start_dt&gt;&lt;![CDATA[20231001000000]]&gt;&lt;/period_start_dt&gt;\n                      &lt;term_pricing_num&gt;&lt;![CDATA[25770]]&gt;&lt;/term_pricing_num&gt;\n                      &lt;strategy_num&gt;&lt;![CDATA[4142]]&gt;&lt;/strategy_num&gt;\n                      &lt;tier_type_ind&gt;&lt;![CDATA[-1]]&gt;&lt;/tier_type_ind&gt;\n                      &lt;implied_cost_ind&gt;&lt;![CDATA[0]]&gt;&lt;/implied_cost_ind&gt;\n                      &lt;book_upon_match_ind&gt;&lt;![CDATA[0]]&gt;&lt;/book_upon_match_ind&gt;\n                      &lt;do_not_apply_ra_cost_ind&gt;&lt;![CDATA[0]]&gt;&lt;/do_not_apply_ra_cost_ind&gt;\n                      &lt;rate_lookup_cost_ind&gt;&lt;![CDATA[0]]&gt;&lt;/rate_lookup_cost_ind&gt;\n                      &lt;round_precision_ind&gt;&lt;![CDATA[0]]&gt;&lt;/round_precision_ind&gt;\n                      &lt;cost_source_ind&gt;&lt;![CDATA[-1]]&gt;&lt;/cost_source_ind&gt;\n                      &lt;estimated_volume&gt;&lt;![CDATA[100.0]]&gt;&lt;/estimated_volume&gt;\n                      &lt;mix_defn_num&gt;&lt;![CDATA[0]]&gt;&lt;/mix_defn_num&gt;\n                      &lt;term_pricing_comp_num&gt;&lt;![CDATA[27072]]&gt;&lt;/term_pricing_comp_num&gt;\n                      &lt;effective_dt&gt;&lt;![CDATA[20230913000000]]&gt;&lt;/effective_dt&gt;\n                      &lt;multiplier&gt;&lt;![CDATA[1.0]]&gt;&lt;/multiplier&gt;\n                      &lt;mirror_scr_num&gt;&lt;![CDATA[0]]&gt;&lt;/mirror_scr_num&gt;\n                      &lt;period_end_dt&gt;&lt;![CDATA[20231031000000]]&gt;&lt;/period_end_dt&gt;\n                      &lt;pass_thru_ind&gt;&lt;![CDATA[0]]&gt;&lt;/pass_thru_ind&gt;\n                      &lt;actual_estimate_ind&gt;&lt;![CDATA[0]]&gt;&lt;/actual_estimate_ind&gt;\n                      &lt;tier_qty_periodicity_ind&gt;&lt;![CDATA[-1]]&gt;&lt;/tier_qty_periodicity_ind&gt;\n                      &lt;cumulative_ind&gt;&lt;![CDATA[0]]&gt;&lt;/cumulative_ind&gt;\n                      &lt;period_sub_category_ind&gt;&lt;![CDATA[-1]]&gt;&lt;/period_sub_category_ind&gt;\n                      &lt;componentize_status_ind&gt;&lt;![CDATA[-1]]&gt;&lt;/componentize_status_ind&gt;\n                      &lt;tier_boundary_ind&gt;&lt;![CDATA[-1]]&gt;&lt;/tier_boundary_ind&gt;\n                      &lt;hidden_cost_ind&gt;&lt;![CDATA[0]]&gt;&lt;/hidden_cost_ind&gt;\n                      &lt;round_pricing_component_ind&gt;&lt;![CDATA[0]]&gt;&lt;/round_pricing_component_ind&gt;\n                      &lt;manual_override_ind&gt;&lt;![CDATA[0]]&gt;&lt;/manual_override_ind&gt;\n                      &lt;pl_allocation_rule_ind&gt;&lt;![CDATA[0]]&gt;&lt;/pl_allocation_rule_ind&gt;\n                      &lt;apply_precision_ind&gt;&lt;![CDATA[1]]&gt;&lt;/apply_precision_ind&gt;\n                      &lt;scr_num&gt;&lt;![CDATA[104122]]&gt;&lt;/scr_num&gt;\n                      &lt;fixed_price&gt;&lt;![CDATA[0.05]]&gt;&lt;/fixed_price&gt;\n                      &lt;pricingComponentCount&gt;&lt;![CDATA[0]]&gt;&lt;/pricingComponentCount&gt;\n                      &lt;input_dt&gt;&lt;![CDATA[20230913000000]]&gt;&lt;/input_dt&gt;\n                      &lt;demand_charge_ind&gt;&lt;![CDATA[0]]&gt;&lt;/demand_charge_ind&gt;\n                      &lt;cost_revenue_ind&gt;&lt;![CDATA[-1]]&gt;&lt;/cost_revenue_ind&gt;\n                      &lt;payment_due_dt&gt;&lt;![CDATA[20230913000000]]&gt;&lt;/payment_due_dt&gt;\n                      &lt;scr_generated_ind&gt;&lt;![CDATA[1]]&gt;&lt;/scr_generated_ind&gt;\n                      &lt;pricing_type_ind&gt;&lt;![CDATA[0]]&gt;&lt;/pricing_type_ind&gt;\n                      &lt;estimate_audit_num&gt;&lt;![CDATA[19328]]&gt;&lt;/estimate_audit_num&gt;\n                      &lt;comp_function_ind&gt;&lt;![CDATA[-1]]&gt;&lt;/comp_function_ind&gt;\n                      &lt;use_pricing_dt_ind&gt;&lt;![CDATA[0]]&gt;&lt;/use_pricing_dt_ind&gt;\n                      &lt;company_num&gt;&lt;![CDATA[4103]]&gt;&lt;/company_num&gt;\n                      &lt;floor_book_upon_match_ind&gt;&lt;![CDATA[0]]&gt;&lt;/floor_book_upon_match_ind&gt;\n                      &lt;complex_charges_ind&gt;&lt;![CDATA[0]]&gt;&lt;/complex_charges_ind&gt;\n                      &lt;balance_cost_ind&gt;&lt;![CDATA[0]]&gt;&lt;/balance_cost_ind&gt;\n                      &lt;rate_override_ind&gt;&lt;![CDATA[0]]&gt;&lt;/rate_override_ind&gt;\n                      &lt;cost_type_cd&gt;&lt;![CDATA[Broker Fee]]&gt;&lt;/cost_type_cd&gt;\n                      &lt;fx_rate_type_ind&gt;&lt;![CDATA[-1]]&gt;&lt;/fx_rate_type_ind&gt;\n                      &lt;pricing_period_tier_ind&gt;&lt;![CDATA[-1]]&gt;&lt;/pricing_period_tier_ind&gt;\n                      &lt;tier_qty_type_ind&gt;&lt;![CDATA[-1]]&gt;&lt;/tier_qty_type_ind&gt;\n                      &lt;time_based_cost_ind&gt;&lt;![CDATA[0]]&gt;&lt;/time_based_cost_ind&gt;\n                      &lt;price_uom_cd&gt;&lt;![CDATA[MT]]&gt;&lt;/price_uom_cd&gt;\n                      &lt;internal_company_num&gt;&lt;![CDATA[4392]]&gt;&lt;/internal_company_num&gt;\n                      &lt;ic_mirror_cost_ind&gt;&lt;![CDATA[0]]&gt;&lt;/ic_mirror_cost_ind&gt;\n                      &lt;ic_scr_mirror_cost_ind&gt;&lt;![CDATA[0]]&gt;&lt;/ic_scr_mirror_cost_ind&gt;\n                      &lt;rate_lookup_cost_type_ind&gt;&lt;![CDATA[0]]&gt;&lt;/rate_lookup_cost_type_ind&gt;\n                      &lt;data_source_cd&gt;&lt;![CDATA[XL]]&gt;&lt;/data_source_cd&gt;\n                      &lt;price_curr_cd&gt;&lt;![CDATA[USD]]&gt;&lt;/price_curr_cd&gt;\n                      &lt;round_pricing_rule_ind&gt;&lt;![CDATA[0]]&gt;&lt;/round_pricing_rule_ind&gt;\n                      &lt;broker_type_ind&gt;&lt;![CDATA[1]]&gt;&lt;/broker_type_ind&gt;\n                      &lt;inter_comp_ind&gt;&lt;![CDATA[0]]&gt;&lt;/inter_comp_ind&gt;\n                      &lt;retain_realized_ind&gt;&lt;![CDATA[0]]&gt;&lt;/retain_realized_ind&gt;\n                    &lt;/TermScrList&gt;\n                    &lt;TermUdfList table=&quot;2&quot;&gt;\n                      &lt;udf_value&gt;&lt;![CDATA[2]]&gt;&lt;/udf_value&gt;\n                      &lt;operation&gt;&lt;![CDATA[-1]]&gt;&lt;/operation&gt;\n                      &lt;udf_cd&gt;&lt;![CDATA[Deal Time]]&gt;&lt;/udf_cd&gt;\n                    &lt;/TermUdfList&gt;\n                    &lt;TermUdfList table=&quot;2&quot;&gt;\n                      &lt;udf_value&gt;&lt;![CDATA[odcril_cgmlTradesINT_rel_files_202309130251.csv]]&gt;&lt;/udf_value&gt;\n                      &lt;operation&gt;&lt;![CDATA[-1]]&gt;&lt;/operation&gt;\n                      &lt;udf_cd&gt;&lt;![CDATA[File Name1]]&gt;&lt;/udf_cd&gt;\n                    &lt;/TermUdfList&gt;\n                    &lt;TermMtmList table=&quot;2&quot;&gt;\n                      &lt;price_uom_period_ind&gt;&lt;![CDATA[-1]]&gt;&lt;/price_uom_period_ind&gt;\n                      &lt;common_pricing_days_ind&gt;&lt;![CDATA[0]]&gt;&lt;/common_pricing_days_ind&gt;\n                      &lt;price_qty_category_ind&gt;&lt;![CDATA[-1]]&gt;&lt;/price_qty_category_ind&gt;\n                      &lt;percentage_cashflow_qty_ind&gt;&lt;![CDATA[-1]]&gt;&lt;/percentage_cashflow_qty_ind&gt;\n                      &lt;delivery_based_ind&gt;&lt;![CDATA[0]]&gt;&lt;/delivery_based_ind&gt;\n                      &lt;period_start_dt&gt;&lt;![CDATA[20231001000000]]&gt;&lt;/period_start_dt&gt;\n                      &lt;term_pricing_num&gt;&lt;![CDATA[25769]]&gt;&lt;/term_pricing_num&gt;\n                      &lt;tier_type_ind&gt;&lt;![CDATA[-1]]&gt;&lt;/tier_type_ind&gt;\n                      &lt;implied_cost_ind&gt;&lt;![CDATA[0]]&gt;&lt;/implied_cost_ind&gt;\n                      &lt;do_not_apply_ra_cost_ind&gt;&lt;![CDATA[0]]&gt;&lt;/do_not_apply_ra_cost_ind&gt;\n                      &lt;rate_lookup_cost_ind&gt;&lt;![CDATA[0]]&gt;&lt;/rate_lookup_cost_ind&gt;\n                      &lt;round_precision_ind&gt;&lt;![CDATA[0]]&gt;&lt;/round_precision_ind&gt;\n                      &lt;cost_source_ind&gt;&lt;![CDATA[-1]]&gt;&lt;/cost_source_ind&gt;\n                      &lt;estimated_volume&gt;&lt;![CDATA[100.0]]&gt;&lt;/estimated_volume&gt;\n                      &lt;mix_defn_num&gt;&lt;![CDATA[0]]&gt;&lt;/mix_defn_num&gt;\n                      &lt;term_pricing_comp_num&gt;&lt;![CDATA[27071]]&gt;&lt;/term_pricing_comp_num&gt;\n                      &lt;event_specific_pricing_ind&gt;&lt;![CDATA[0]]&gt;&lt;/event_specific_pricing_ind&gt;\n                      &lt;multiplier&gt;&lt;![CDATA[1.0]]&gt;&lt;/multiplier&gt;\n                      &lt;price_precision&gt;&lt;![CDATA[3]]&gt;&lt;/price_precision&gt;\n                      &lt;period_end_dt&gt;&lt;![CDATA[20231031000000]]&gt;&lt;/period_end_dt&gt;\n                      &lt;actual_estimate_ind&gt;&lt;![CDATA[0]]&gt;&lt;/actual_estimate_ind&gt;\n                      &lt;tier_qty_periodicity_ind&gt;&lt;![CDATA[-1]]&gt;&lt;/tier_qty_periodicity_ind&gt;\n                      &lt;cumulative_ind&gt;&lt;![CDATA[0]]&gt;&lt;/cumulative_ind&gt;\n                      &lt;period_sub_category_ind&gt;&lt;![CDATA[-1]]&gt;&lt;/period_sub_category_ind&gt;\n                      &lt;componentize_status_ind&gt;&lt;![CDATA[-1]]&gt;&lt;/componentize_status_ind&gt;\n                      &lt;tier_boundary_ind&gt;&lt;![CDATA[-1]]&gt;&lt;/tier_boundary_ind&gt;\n                      &lt;hidden_cost_ind&gt;&lt;![CDATA[0]]&gt;&lt;/hidden_cost_ind&gt;\n                      &lt;round_pricing_component_ind&gt;&lt;![CDATA[0]]&gt;&lt;/round_pricing_component_ind&gt;\n                      &lt;manual_override_ind&gt;&lt;![CDATA[0]]&gt;&lt;/manual_override_ind&gt;\n                      &lt;apply_precision_ind&gt;&lt;![CDATA[1]]&gt;&lt;/apply_precision_ind&gt;\n                      &lt;pricingComponentCount&gt;&lt;![CDATA[0]]&gt;&lt;/pricingComponentCount&gt;\n                      &lt;demand_charge_ind&gt;&lt;![CDATA[0]]&gt;&lt;/demand_charge_ind&gt;\n                      &lt;pricing_type_ind&gt;&lt;![CDATA[1]]&gt;&lt;/pricing_type_ind&gt;\n                      &lt;estimate_audit_num&gt;&lt;![CDATA[19327]]&gt;&lt;/estimate_audit_num&gt;\n                      &lt;comp_function_ind&gt;&lt;![CDATA[-1]]&gt;&lt;/comp_function_ind&gt;\n                      &lt;use_pricing_dt_ind&gt;&lt;![CDATA[0]]&gt;&lt;/use_pricing_dt_ind&gt;\n                      &lt;complex_charges_ind&gt;&lt;![CDATA[0]]&gt;&lt;/complex_charges_ind&gt;\n                      &lt;balance_cost_ind&gt;&lt;![CDATA[0]]&gt;&lt;/balance_cost_ind&gt;\n                      &lt;rate_override_ind&gt;&lt;![CDATA[0]]&gt;&lt;/rate_override_ind&gt;\n                      &lt;cost_type_cd&gt;&lt;![CDATA[MTM]]&gt;&lt;/cost_type_cd&gt;\n                      &lt;fx_rate_type_ind&gt;&lt;![CDATA[-1]]&gt;&lt;/fx_rate_type_ind&gt;\n                      &lt;quote_def_num&gt;&lt;![CDATA[10320]]&gt;&lt;/quote_def_num&gt;\n                      &lt;pricing_period_tier_ind&gt;&lt;![CDATA[-1]]&gt;&lt;/pricing_period_tier_ind&gt;\n                      &lt;tier_qty_type_ind&gt;&lt;![CDATA[-1]]&gt;&lt;/tier_qty_type_ind&gt;\n                      &lt;time_based_cost_ind&gt;&lt;![CDATA[0]]&gt;&lt;/time_based_cost_ind&gt;\n                      &lt;ic_mirror_cost_ind&gt;&lt;![CDATA[0]]&gt;&lt;/ic_mirror_cost_ind&gt;\n                      &lt;rate_lookup_cost_type_ind&gt;&lt;![CDATA[0]]&gt;&lt;/rate_lookup_cost_type_ind&gt;\n                      &lt;round_pricing_rule_ind&gt;&lt;![CDATA[0]]&gt;&lt;/round_pricing_rule_ind&gt;\n                      &lt;retain_realized_ind&gt;&lt;![CDATA[0]]&gt;&lt;/retain_realized_ind&gt;\n                    &lt;/TermMtmList&gt;\n                    &lt;TermDetailList table=&quot;2&quot;&gt;\n                      &lt;mon_ind&gt;&lt;![CDATA[1]]&gt;&lt;/mon_ind&gt;\n                      &lt;sat_ind&gt;&lt;![CDATA[1]]&gt;&lt;/sat_ind&gt;\n                      &lt;end_time_period_cd&gt;&lt;![CDATA[HE24]]&gt;&lt;/end_time_period_cd&gt;\n                      &lt;fri_ind&gt;&lt;![CDATA[1]]&gt;&lt;/fri_ind&gt;\n                      &lt;trade_status_ind&gt;&lt;![CDATA[1]]&gt;&lt;/trade_status_ind&gt;\n                      &lt;tue_ind&gt;&lt;![CDATA[1]]&gt;&lt;/tue_ind&gt;\n                      &lt;term_num&gt;&lt;![CDATA[6709]]&gt;&lt;/term_num&gt;\n                      &lt;sun_ind&gt;&lt;![CDATA[1]]&gt;&lt;/sun_ind&gt;\n                      &lt;var_project_delta&gt;&lt;![CDATA[100.0]]&gt;&lt;/var_project_delta&gt;\n                      &lt;trade_qty&gt;&lt;![CDATA[25.0]]&gt;&lt;/trade_qty&gt;\n                      &lt;thu_ind&gt;&lt;![CDATA[1]]&gt;&lt;/thu_ind&gt;\n                      &lt;comp_sync_id&gt;&lt;![CDATA[1]]&gt;&lt;/comp_sync_id&gt;\n                      &lt;start_time_period_cd&gt;&lt;![CDATA[HE01]]&gt;&lt;/start_time_period_cd&gt;\n                      &lt;detail_num&gt;&lt;![CDATA[8520]]&gt;&lt;/detail_num&gt;\n                      &lt;end_dt&gt;&lt;![CDATA[20231031000000]]&gt;&lt;/end_dt&gt;\n                      &lt;qty_periodicity_ind&gt;&lt;![CDATA[2]]&gt;&lt;/qty_periodicity_ind&gt;\n                      &lt;start_dt&gt;&lt;![CDATA[20231001000000]]&gt;&lt;/start_dt&gt;\n                      &lt;day_offset_ind&gt;&lt;![CDATA[0]]&gt;&lt;/day_offset_ind&gt;\n                      &lt;hol_ind&gt;&lt;![CDATA[1]]&gt;&lt;/hol_ind&gt;\n                      &lt;qty_uom_cd&gt;&lt;![CDATA[zKBBL]]&gt;&lt;/qty_uom_cd&gt;\n                      &lt;wed_ind&gt;&lt;![CDATA[1]]&gt;&lt;/wed_ind&gt;\n                    &lt;/TermDetailList&gt;\n                    &lt;TermPriceList table=&quot;2&quot;&gt;\n                      &lt;price_uom_period_ind&gt;&lt;![CDATA[-1]]&gt;&lt;/price_uom_period_ind&gt;\n                      &lt;common_pricing_days_ind&gt;&lt;![CDATA[0]]&gt;&lt;/common_pricing_days_ind&gt;\n                      &lt;price_qty_category_ind&gt;&lt;![CDATA[0]]&gt;&lt;/price_qty_category_ind&gt;\n                      &lt;percentage_cashflow_qty_ind&gt;&lt;![CDATA[-1]]&gt;&lt;/percentage_cashflow_qty_ind&gt;\n                      &lt;delivery_based_ind&gt;&lt;![CDATA[0]]&gt;&lt;/delivery_based_ind&gt;\n                      &lt;period_start_dt&gt;&lt;![CDATA[20231001000000]]&gt;&lt;/period_start_dt&gt;\n                      &lt;term_pricing_num&gt;&lt;![CDATA[25768]]&gt;&lt;/term_pricing_num&gt;\n                      &lt;tier_type_ind&gt;&lt;![CDATA[-1]]&gt;&lt;/tier_type_ind&gt;\n                      &lt;implied_cost_ind&gt;&lt;![CDATA[0]]&gt;&lt;/implied_cost_ind&gt;\n                      &lt;do_not_apply_ra_cost_ind&gt;&lt;![CDATA[0]]&gt;&lt;/do_not_apply_ra_cost_ind&gt;\n                      &lt;rate_lookup_cost_ind&gt;&lt;![CDATA[0]]&gt;&lt;/rate_lookup_cost_ind&gt;\n                      &lt;round_precision_ind&gt;&lt;![CDATA[0]]&gt;&lt;/round_precision_ind&gt;\n                      &lt;cost_source_ind&gt;&lt;![CDATA[-1]]&gt;&lt;/cost_source_ind&gt;\n                      &lt;estimated_volume&gt;&lt;![CDATA[100.0]]&gt;&lt;/estimated_volume&gt;\n                      &lt;mix_defn_num&gt;&lt;![CDATA[0]]&gt;&lt;/mix_defn_num&gt;\n                      &lt;term_pricing_comp_num&gt;&lt;![CDATA[27070]]&gt;&lt;/term_pricing_comp_num&gt;\n                      &lt;event_specific_pricing_ind&gt;&lt;![CDATA[0]]&gt;&lt;/event_specific_pricing_ind&gt;\n                      &lt;multiplier&gt;&lt;![CDATA[1.0]]&gt;&lt;/multiplier&gt;\n                      &lt;price_precision&gt;&lt;![CDATA[3]]&gt;&lt;/price_precision&gt;\n                      &lt;period_end_dt&gt;&lt;![CDATA[20231031000000]]&gt;&lt;/period_end_dt&gt;\n                      &lt;actual_estimate_ind&gt;&lt;![CDATA[0]]&gt;&lt;/actual_estimate_ind&gt;\n                      &lt;tier_qty_periodicity_ind&gt;&lt;![CDATA[-1]]&gt;&lt;/tier_qty_periodicity_ind&gt;\n                      &lt;cumulative_ind&gt;&lt;![CDATA[0]]&gt;&lt;/cumulative_ind&gt;\n                      &lt;period_sub_category_ind&gt;&lt;![CDATA[-1]]&gt;&lt;/period_sub_category_ind&gt;\n                      &lt;componentize_status_ind&gt;&lt;![CDATA[-1]]&gt;&lt;/componentize_status_ind&gt;\n                      &lt;tier_boundary_ind&gt;&lt;![CDATA[-1]]&gt;&lt;/tier_boundary_ind&gt;\n                      &lt;hidden_cost_ind&gt;&lt;![CDATA[0]]&gt;&lt;/hidden_cost_ind&gt;\n                      &lt;round_pricing_component_ind&gt;&lt;![CDATA[0]]&gt;&lt;/round_pricing_component_ind&gt;\n                      &lt;manual_override_ind&gt;&lt;![CDATA[0]]&gt;&lt;/manual_override_ind&gt;\n                      &lt;apply_precision_ind&gt;&lt;![CDATA[1]]&gt;&lt;/apply_precision_ind&gt;\n                      &lt;fixed_price&gt;&lt;![CDATA[**92.053**]]&gt;&lt;/fixed_price&gt;\n                      &lt;pricingComponentCount&gt;&lt;![CDATA[0]]&gt;&lt;/pricingComponentCount&gt;\n                      &lt;demand_charge_ind&gt;&lt;![CDATA[0]]&gt;&lt;/demand_charge_ind&gt;\n                      &lt;pricing_type_ind&gt;&lt;![CDATA[0]]&gt;&lt;/pricing_type_ind&gt;\n                      &lt;estimate_audit_num&gt;&lt;![CDATA[19326]]&gt;&lt;/estimate_audit_num&gt;\n                      &lt;comp_function_ind&gt;&lt;![CDATA[-1]]&gt;&lt;/comp_function_ind&gt;\n                      &lt;use_pricing_dt_ind&gt;&lt;![CDATA[0]]&gt;&lt;/use_pricing_dt_ind&gt;\n                      &lt;complex_charges_ind&gt;&lt;![CDATA[0]]&gt;&lt;/complex_charges_ind&gt;\n                      &lt;balance_cost_ind&gt;&lt;![CDATA[0]]&gt;&lt;/balance_cost_ind&gt;\n                      &lt;rate_override_ind&gt;&lt;![CDATA[0]]&gt;&lt;/rate_override_ind&gt;\n                      &lt;cost_type_cd&gt;&lt;![CDATA[Primary Settlement]]&gt;&lt;/cost_type_cd&gt;\n                      &lt;fx_rate_type_ind&gt;&lt;![CDATA[-1]]&gt;&lt;/fx_rate_type_ind&gt;\n                      &lt;pricing_period_tier_ind&gt;&lt;![CDATA[-1]]&gt;&lt;/pricing_period_tier_ind&gt;\n                      &lt;tier_qty_type_ind&gt;&lt;![CDATA[-1]]&gt;&lt;/tier_qty_type_ind&gt;\n                      &lt;time_based_cost_ind&gt;&lt;![CDATA[0]]&gt;&lt;/time_based_cost_ind&gt;\n                      &lt;price_uom_cd&gt;&lt;![CDATA[BBL]]&gt;&lt;/price_uom_cd&gt;\n                      &lt;ic_mirror_cost_ind&gt;&lt;![CDATA[0]]&gt;&lt;/ic_mirror_cost_ind&gt;\n                      &lt;rate_lookup_cost_type_ind&gt;&lt;![CDATA[0]]&gt;&lt;/rate_lookup_cost_type_ind&gt;\n                      &lt;price_curr_cd&gt;&lt;![CDATA[USD]]&gt;&lt;/price_curr_cd&gt;\n                      &lt;round_pricing_rule_ind&gt;&lt;![CDATA[0]]&gt;&lt;/round_pricing_rule_ind&gt;\n                      &lt;retain_realized_ind&gt;&lt;![CDATA[0]]&gt;&lt;/retain_realized_ind&gt;\n                    &lt;/TermPriceList&gt;\n                  &lt;/SwapTermList&gt;\n                &lt;/TradeHeader&gt;\n                &lt;LockNumList table=&quot;1&quot;&gt;\n                  &lt;lockinfo&gt;&lt;![CDATA[TRD_HEADER 902495  1       1\n    ACT_CASHFLOW    26599           1\n    ACT_CASHFLOW    26600           1\n    TRD_TERM    6709            1\n    ]]&gt;&lt;/lockinfo&gt;\n                &lt;/LockNumList&gt;\n                &lt;Permissions table=&quot;1&quot;&gt;\n                  &lt;security&gt;&lt;![CDATA[0]]&gt;&lt;/security&gt;\n                &lt;/Permissions&gt;\n              &lt;/GetTrade&gt;\n            &lt;/data&gt;\n          &lt;/mbody&gt;\n        &lt;/response&gt;\n      &lt;/return&gt;\n    &lt;/ns1:GetTradeResponse&gt;\n  &lt;/SOAP-ENV:Body&gt;\n&lt;/SOAP-ENV:Envelope&gt;\n</code></pre>\n<p>I have created the Document object from existing trade string that I have and also tried some code to fetch the element. But frankly speaking I have no idea how I can achieve replacing those values keeping in mind that they are to replaced inside CDATA (Although I wont mind replacing the entire node like trade_qty itself) and that too only under a particular parent.</p>\n<pre><code>private Document parseXML(String xml) throws ParserConfigurationException, SAXException, IOException\n    {\n        DocumentBuilderFactory dbf = DocumentBuilderFactory.newInstance();\n        dbf.setNamespaceAware(true);\n        DocumentBuilder db = dbf.newDocumentBuilder();\n        Document doc = db.parse(new InputSource(new StringReader(xml)));\n        doc.getDocumentElement().normalize();\n        return doc;\n    }\n\npublic void readXML(String tradeResponseXML)\n    {\n        String replacedXML = &quot;&quot;;\n        Document doc = null;\n        try {\n            doc = parseXML(tradeResponseXML);\n        }\n        catch (ParserConfigurationException | SAXException  | IOException xe)\n        {\n            logger.error(&quot;Error parsing the get response xml: &quot;, xe);\n        }\n\n        if(doc != null)\n        {\n            NodeList nList = doc.getElementsByTagName(SWAP_TERM_LIST_XML_ELEM);\n            for (int i = 0; i &lt; nList.getLength(); i++)\n            {\n                Node nNode = nList.item(i);\n                Element eElement = (Element) nNode;\n                Element cElement =  (Element) eElement.getElementsByTagName(TRADE_QTY_XML_ELEM).item(0);\n                logger.info(&quot;Qty : &quot; + cElement.getTextContent());\n            }\n        }\n    }\n\n</code></pre>\n<p>Or Equivalent of following Dot net code:</p>\n<pre><code>For all node name like Get Trade,\n    if (rootnodes.Name == &quot;GetTrade&quot;)\n    {\n        foreach (XmlNode t_node in rootnodes.ChildNodes)\n        {\n            if (t_node.Name == &quot;TradeHeader&quot;)\n            {\n                foreach (XmlNode s_node in t_node.ChildNodes)\n                {\n                    if (s_node.Name == &quot;SwapTermList&quot;)\n                    {\n\n                        foreach (XmlNode p_node in s_node.ChildNodes)\n                        {\n                            if (p_node.Name == &quot;trade_qty&quot;)\n                            {\n                                ColName = p_node.Name;\n                                ColValue = p_node.InnerText;\n\n                                sResponse1 = sResponse1.Replace(&quot;&lt;trade_qty&gt;&lt;![CDATA[&quot; + Math.Abs(Convert.ToDecimal(ColValue)).ToString() + &quot;]]&gt;&lt;/trade_qty&gt;&quot;, &quot;&lt;trade_qty&gt;&lt;![CDATA[&quot; + Math.Abs(Convert.ToDecimal(s.ItemArray.GetValue(4))).ToString() + &quot;]]&gt;&lt;/trade_qty&gt;&quot;);//(It's lots value.)\n                            }\n\n                            if (p_node.Name == &quot;TermPriceList&quot;)\n                            {\n                                foreach (XmlNode k_node in p_node.ChildNodes)\n                                {\n                                    if (k_node.Name == &quot;fixed_price&quot;)\n                                    {\n                                        ColName = k_node.Name;\n                                        ColValue = k_node.InnerText;\n                                        errorLog.log.LogFile(&quot;COlname to update price: &quot; + ColName);\n                                        errorLog.log.LogFile(&quot;COlValue to update price: &quot; + ColValue);\n                                        sResponse1 = sResponse1.Replace(&quot;&lt;fixed_price&gt;&lt;![CDATA[&quot; + Math.Abs(Convert.ToDecimal(ColValue)).ToString() + &quot;]]&gt;&lt;/fixed_price&gt;&quot;, &quot;&lt;fixed_price&gt;&lt;![CDATA[&quot; + Math.Abs(Convert.ToDecimal(s.ItemArray.GetValue(10))).ToString() + &quot;]]&gt;&lt;/fixed_price&gt;&quot;);// its TradePrice value.\n                                        errorLog.log.LogFile(&quot;Response for fixed price : &quot; + sResponse1);\n                                    }\n                                }\n                            }\n                        }\n                    }\n                }\n            }\n\n        }\n    }\n</code></pre>\n"},{"tags":["java","hibernate","jpa"],"comments":[{"owner":{"account_id":277416,"reputation":681848,"user_id":571407,"accept_rate":100,"display_name":"JB Nizet"},"score":0,"creation_date":1533714645,"post_id":51740655,"comment_id":90442587,"body_markdown":"How would it know if the customer has an address or not (and thus if address must be null or not) without that left join? Use a join column instead of a join table, and there won&#39;t be any left join anymore.","body":"How would it know if the customer has an address or not (and thus if address must be null or not) without that left join? Use a join column instead of a join table, and there won&#39;t be any left join anymore."},{"owner":{"account_id":2569902,"reputation":53,"user_id":2228913,"display_name":"ndionisi"},"score":0,"creation_date":1533715038,"post_id":51740655,"comment_id":90442812,"body_markdown":"Thanks, makes sense when I load the full Customer entity, but I&#39;m surprised to see the left join also when I&#39;m not loading the full entity, e.g `SELECT c.id from Customer c`","body":"Thanks, makes sense when I load the full Customer entity, but I&#39;m surprised to see the left join also when I&#39;m not loading the full entity, e.g <code>SELECT c.id from Customer c</code>"},{"owner":{"account_id":277416,"reputation":681848,"user_id":571407,"accept_rate":100,"display_name":"JB Nizet"},"score":0,"creation_date":1533717262,"post_id":51740655,"comment_id":90444139,"body_markdown":"Oh yes, missed that. You should report the issue to Hibernate","body":"Oh yes, missed that. You should report the issue to Hibernate"},{"owner":{"account_id":2569902,"reputation":53,"user_id":2228913,"display_name":"ndionisi"},"score":0,"creation_date":1533723571,"post_id":51740655,"comment_id":90448202,"body_markdown":"Just created it: https://hibernate.atlassian.net/browse/HHH-12895. Thanks for your help!","body":"Just created it: <a href=\"https://hibernate.atlassian.net/browse/HHH-12895\" rel=\"nofollow noreferrer\">hibernate.atlassian.net/browse/HHH-12895</a>. Thanks for your help!"}],"answers":[{"tags":[],"owner":{"account_id":18486228,"reputation":13,"user_id":13467124,"display_name":"Mihai"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1694978622,"creation_date":1694970722,"answer_id":77122877,"question_id":51740655,"body_markdown":"I recommend using `FetchType.LAZY` on the `@ManyToOne` annotation.","title":"Hibernate generates extra left join with many to one association","body":"<p>I recommend using <code>FetchType.LAZY</code> on the <code>@ManyToOne</code> annotation.</p>\n"}],"owner":{"account_id":2569902,"reputation":53,"user_id":2228913,"display_name":"ndionisi"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1007,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":1,"score":2,"last_activity_date":1694978622,"creation_date":1533712553,"question_id":51740655,"body_markdown":"I have a simple Hibernate `@ManyToOne` mapping between two entities, using an association table thanks to annotation `@JoinTable`.\r\nHere is my mapping:\r\n\r\n    @Entity\r\n    public class Customer {\r\n\r\n        private Long id;\r\n        private Address address;\r\n\r\n        @Id\r\n        @GeneratedValue\r\n        public Long getId() {\r\n            return id;\r\n        }\r\n\r\n\r\n        @ManyToOne\r\n        @JoinTable(\r\n                name = &quot;customer_address_association&quot;,\r\n                joinColumns = @JoinColumn(name = &quot;customer_id&quot;),\r\n                inverseJoinColumns = @JoinColumn(name = &quot;address_id&quot;)\r\n        )\r\n        public Address getAddress() {\r\n            return address;\r\n        }\r\n\r\n        public void setId(Long id) {\r\n            this.id = id;\r\n        }\r\n\r\n        public void setAddress(Address address) {\r\n            this.address = address;\r\n        }\r\n    }\r\nand\r\n\r\n    @Entity\r\n    public class Address {\r\n\r\n        private Long id;\r\n        private String street;\r\n\r\n        @Id\r\n        @GeneratedValue\r\n        public Long getId() {\r\n            return id;\r\n        }\r\n\r\n        public String getStreet() {\r\n            return street;\r\n        }\r\n\r\n        public void setId(Long id) {\r\n            this.id = id;\r\n        }\r\n\r\n        public void setStreet(String street) {\r\n            this.street = street;\r\n        }\r\n    }\r\n\r\nWhen I query on Customer entity, I always get an extra left join to the join table. For example, a HQL query such as `SELECT c.id from Customer c` generates the following SQL query: `select customer0_.id as col_0_0_ from customer customer0_ left outer join customer_address_association customer0_1_ on customer0_.id=customer0_1_.customer_id`.\r\n\r\nFull source code to reproduce is available here: https://github.com/ndionisi/hibernate-extra-left-join\r\n\r\nI reproduce it with Hibernate 5.1, 5.2 and 5.3. Is there any way to prevent Hibernate from generating the left join to `customer_address_association` table? It impacts the performance on large tables.","title":"Hibernate generates extra left join with many to one association","body":"<p>I have a simple Hibernate <code>@ManyToOne</code> mapping between two entities, using an association table thanks to annotation <code>@JoinTable</code>.\nHere is my mapping:</p>\n\n<pre><code>@Entity\npublic class Customer {\n\n    private Long id;\n    private Address address;\n\n    @Id\n    @GeneratedValue\n    public Long getId() {\n        return id;\n    }\n\n\n    @ManyToOne\n    @JoinTable(\n            name = \"customer_address_association\",\n            joinColumns = @JoinColumn(name = \"customer_id\"),\n            inverseJoinColumns = @JoinColumn(name = \"address_id\")\n    )\n    public Address getAddress() {\n        return address;\n    }\n\n    public void setId(Long id) {\n        this.id = id;\n    }\n\n    public void setAddress(Address address) {\n        this.address = address;\n    }\n}\n</code></pre>\n\n<p>and</p>\n\n<pre><code>@Entity\npublic class Address {\n\n    private Long id;\n    private String street;\n\n    @Id\n    @GeneratedValue\n    public Long getId() {\n        return id;\n    }\n\n    public String getStreet() {\n        return street;\n    }\n\n    public void setId(Long id) {\n        this.id = id;\n    }\n\n    public void setStreet(String street) {\n        this.street = street;\n    }\n}\n</code></pre>\n\n<p>When I query on Customer entity, I always get an extra left join to the join table. For example, a HQL query such as <code>SELECT c.id from Customer c</code> generates the following SQL query: <code>select customer0_.id as col_0_0_ from customer customer0_ left outer join customer_address_association customer0_1_ on customer0_.id=customer0_1_.customer_id</code>.</p>\n\n<p>Full source code to reproduce is available here: <a href=\"https://github.com/ndionisi/hibernate-extra-left-join\" rel=\"nofollow noreferrer\">https://github.com/ndionisi/hibernate-extra-left-join</a></p>\n\n<p>I reproduce it with Hibernate 5.1, 5.2 and 5.3. Is there any way to prevent Hibernate from generating the left join to <code>customer_address_association</code> table? It impacts the performance on large tables.</p>\n"},{"tags":["java","testing","mockito","datadog"],"answers":[{"tags":[],"owner":{"account_id":39208,"reputation":251240,"user_id":112968,"accept_rate":68,"display_name":"knittl"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1694978383,"creation_date":1694978383,"answer_id":77123279,"question_id":77123108,"body_markdown":"You should be able to use `AdditionalMatchers`, no need for a custom matcher:\r\n\r\n```\r\npublic void verifyTagsAre(final String... expectedTags) {\r\n    Mockito.verify(client).record(eq(&quot;action&quot;), eq(42L),\r\n            AdditionalMatchers.aryEq(expectedTags));\r\n    Mockito.verify(client, Mockito.times(3)).histogram(eq(&quot;someAspect&quot;), anyLong(), AdditionalMatchers.aryEq(new String[] { &quot;type:total&quot;, &quot;type:cpu&quot;, &quot;type:wait&quot;, &quot;type:sql&quot; }));\r\n    Mockito.verifyNoMoreInteractions(client);\r\n}\r\n```\r\n\r\nSee GitHub issues [mockito#1593](https://github.com/mockito/mockito/issues/1593) and [mockito#2835](https://github.com/mockito/mockito/pull/2835), especially the bit about `argThat`:\r\n\r\n&gt; `argThat()` behaviour change\r\n&gt;\r\n&gt; BREAKING CHANGE: The behaviour of all methods in `MockitoHamcrest`, such as `argThat()`, when passed to a varargs parameter has changed. Prior to Mockito v5, these matchers would match each element in the varargs parameter, matching any number of elements 0...n. From Mockito v5 onwards these matchers, when passed to a varargs parameter, will match invocations where a single value is passed to the varargs parameter. To match any number of values passed to the varargs parameter, pass use suitable Hamcrest Matcher and the varargs array type to `argThat`. For example, given a `String...` varargs parameter, use: `argThat(isA(String[].class), String[].class)`.\r\n\r\nAnd I hope the code is only an example for the question, because there is no real code being tested. You have a Mockito mock object, on which you call methods, then verify that the method has been called. I&#39;m not even sure that the test has ever worked – the `histogram` method is called only once, but the verifier checks `times(3)` (with argument types that do not actually match: `expectedTags` are never passed to `histogram`).","title":"How to Make Mockito Verification of Varargs Match Actual Invocation?","body":"<p>You should be able to use <code>AdditionalMatchers</code>, no need for a custom matcher:</p>\n<pre><code>public void verifyTagsAre(final String... expectedTags) {\n    Mockito.verify(client).record(eq(&quot;action&quot;), eq(42L),\n            AdditionalMatchers.aryEq(expectedTags));\n    Mockito.verify(client, Mockito.times(3)).histogram(eq(&quot;someAspect&quot;), anyLong(), AdditionalMatchers.aryEq(new String[] { &quot;type:total&quot;, &quot;type:cpu&quot;, &quot;type:wait&quot;, &quot;type:sql&quot; }));\n    Mockito.verifyNoMoreInteractions(client);\n}\n</code></pre>\n<p>See GitHub issues <a href=\"https://github.com/mockito/mockito/issues/1593\" rel=\"nofollow noreferrer\">mockito#1593</a> and <a href=\"https://github.com/mockito/mockito/pull/2835\" rel=\"nofollow noreferrer\">mockito#2835</a>, especially the bit about <code>argThat</code>:</p>\n<blockquote>\n<p><code>argThat()</code> behaviour change</p>\n<p>BREAKING CHANGE: The behaviour of all methods in <code>MockitoHamcrest</code>, such as <code>argThat()</code>, when passed to a varargs parameter has changed. Prior to Mockito v5, these matchers would match each element in the varargs parameter, matching any number of elements 0...n. From Mockito v5 onwards these matchers, when passed to a varargs parameter, will match invocations where a single value is passed to the varargs parameter. To match any number of values passed to the varargs parameter, pass use suitable Hamcrest Matcher and the varargs array type to <code>argThat</code>. For example, given a <code>String...</code> varargs parameter, use: <code>argThat(isA(String[].class), String[].class)</code>.</p>\n</blockquote>\n<p>And I hope the code is only an example for the question, because there is no real code being tested. You have a Mockito mock object, on which you call methods, then verify that the method has been called. I'm not even sure that the test has ever worked – the <code>histogram</code> method is called only once, but the verifier checks <code>times(3)</code> (with argument types that do not actually match: <code>expectedTags</code> are never passed to <code>histogram</code>).</p>\n"}],"owner":{"account_id":3428378,"reputation":337,"user_id":2873514,"accept_rate":75,"display_name":"soso"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":79,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1694978383,"creation_date":1694975174,"question_id":77123108,"body_markdown":"I recently upgraded from mockito-core version 1.10.19 to the latest version(5.5.0). I&#39;ve noticed a change in behavior when verifying a method call with a varargs parameter.\r\n\r\nIn the older version, I used a custom matcher with the following signature:\r\n```\r\nprivate class CustomMatcher&lt;T&gt; extends ArgumentMatcher&lt;T[]&gt; implements VarargMatcher\r\n\r\n```\r\nHowever, in the latest version, due to changes in ArgumentMatcher, I had to modify the signature to:\r\n```\r\nprivate class CustomMatcher&lt;T&gt; implements ArgumentMatcher&lt;T[]&gt;, Serializable\r\n\r\n```\r\n\r\nHere&#39;s a simplified version of my code:\r\n```\r\npackage com.mockito.varargs.test;\r\n\r\nimport org.mockito.ArgumentMatcher;\r\nimport org.mockito.Mockito;\r\n\r\nimport java.io.Serializable;\r\nimport java.lang.reflect.Array;\r\nimport java.util.Arrays;\r\n\r\nimport static org.mockito.ArgumentMatchers.*;\r\n\r\npublic class TestHelper {\r\n\r\n    private final DummyClient client = Mockito.mock(DummyClient.class);\r\n\r\n    public TestHelper() {\r\n    }\r\n\r\n    public void execute(String... tags) {\r\n        client.record(&quot;action&quot;, 42L, tags);\r\n        client.histogram(&quot;someAspect&quot;, 100L, &quot;type:total&quot;, &quot;type:cpu&quot;, &quot;type:wait&quot;, &quot;type:sql&quot;);\r\n        new Verifier().verifyTagsAre(&quot;tag1&quot;, &quot;tag2&quot;, &quot;tag3&quot;);\r\n    }\r\n\r\n    public class Verifier {\r\n        public void verifyTagsAre(final String... expectedTags) {\r\n            Mockito.verify(client).record(eq(&quot;action&quot;), eq(42L),\r\n                    argThat(new CustomMatcher&lt;&gt;(expectedTags)));\r\n            Mockito.verify(client, Mockito.times(3)).histogram(eq(&quot;someAspect&quot;), anyLong(),\r\n                    argThat(new CustomAnyVarargMatcher&lt;&gt;(\r\n                            new CustomMatcher&lt;&gt;(&quot;type:total&quot;, expectedTags),\r\n                            new CustomMatcher&lt;&gt;(&quot;type:cpu&quot;, expectedTags),\r\n                            new CustomMatcher&lt;&gt;(&quot;type:wait&quot;, expectedTags),\r\n                            new CustomMatcher&lt;&gt;(&quot;type:sql&quot;, expectedTags)\r\n                    )));\r\n            Mockito.verifyNoMoreInteractions(client);\r\n        }\r\n    }\r\n\r\n    private class CustomMatcher&lt;T&gt; implements ArgumentMatcher&lt;T[]&gt;, Serializable {\r\n        private T[] expectedValues;\r\n\r\n        CustomMatcher(T... expectedValues) {\r\n            this.expectedValues = expectedValues;\r\n        }\r\n\r\n        CustomMatcher(T t, T... expectedValues) {\r\n            T[] values = (T[]) Array.newInstance(t.getClass(), expectedValues.length + 1);\r\n            System.arraycopy(expectedValues, 0, values, 1, expectedValues.length);\r\n            values[0] = t;\r\n            this.expectedValues = values;\r\n        }\r\n\r\n        @Override\r\n        public boolean matches(T[] args) {\r\n            return Arrays.equals(expectedValues, args);\r\n        }\r\n\r\n        @Override\r\n        public String toString() {\r\n            return Arrays.toString(expectedValues);\r\n        }\r\n    }\r\n\r\n    private class CustomAnyVarargMatcher&lt;T&gt; implements ArgumentMatcher&lt;T&gt;, Serializable {\r\n        private ArgumentMatcher&lt;T&gt;[] matchers;\r\n\r\n        CustomAnyVarargMatcher(ArgumentMatcher&lt;T&gt;... matchers) {\r\n            this.matchers = matchers;\r\n        }\r\n\r\n        @Override\r\n        public boolean matches(T args) {\r\n            for (ArgumentMatcher&lt;T&gt; matcher : matchers) {\r\n                if (matcher.matches(args))\r\n                    return true;\r\n            }\r\n            return false;\r\n        }\r\n\r\n        @Override\r\n        public String toString() {\r\n            return Arrays.toString(matchers);\r\n        }\r\n    }\r\n\r\n    interface DummyClient {\r\n        void record(String action, long value, String... tags);\r\n        void histogram(String aspect, long value, String... tags);\r\n    }\r\n\r\n    public static void main(String[] args) {\r\n        new TestHelper().execute(&quot;tag1&quot;, &quot;tag2&quot;, &quot;tag3&quot;);\r\n    }\r\n}\r\n```\r\nWhen the verification fails, I get this error:\r\n```\r\nException in thread &quot;main&quot; Argument(s) are different! Wanted:\r\ndummyClient.record(\r\n    &quot;action&quot;,\r\n    42L,\r\n    [tag1, tag2, tag3]\r\n);\r\n-&gt; at com.mockito.varargs.test.TestHelper$Verifier.verifyTagsAre(TestHelper.java:26)\r\nActual invocations have different arguments:\r\ndummyClient.record(\r\n    &quot;action&quot;,\r\n    42L,\r\n    &quot;tag1&quot;,\r\n    &quot;tag2&quot;,\r\n    &quot;tag3&quot;\r\n);\r\n```\r\n\r\nI was expecting the expected output to match the actual invocation, as it did in version 1.10.19. Is there a way to achieve this in the latest version? Or is there a way to compare the varargs as arrays in Mockito, so that the verification passes if the arrays are equal?","title":"How to Make Mockito Verification of Varargs Match Actual Invocation?","body":"<p>I recently upgraded from mockito-core version 1.10.19 to the latest version(5.5.0). I've noticed a change in behavior when verifying a method call with a varargs parameter.</p>\n<p>In the older version, I used a custom matcher with the following signature:</p>\n<pre><code>private class CustomMatcher&lt;T&gt; extends ArgumentMatcher&lt;T[]&gt; implements VarargMatcher\n\n</code></pre>\n<p>However, in the latest version, due to changes in ArgumentMatcher, I had to modify the signature to:</p>\n<pre><code>private class CustomMatcher&lt;T&gt; implements ArgumentMatcher&lt;T[]&gt;, Serializable\n\n</code></pre>\n<p>Here's a simplified version of my code:</p>\n<pre><code>package com.mockito.varargs.test;\n\nimport org.mockito.ArgumentMatcher;\nimport org.mockito.Mockito;\n\nimport java.io.Serializable;\nimport java.lang.reflect.Array;\nimport java.util.Arrays;\n\nimport static org.mockito.ArgumentMatchers.*;\n\npublic class TestHelper {\n\n    private final DummyClient client = Mockito.mock(DummyClient.class);\n\n    public TestHelper() {\n    }\n\n    public void execute(String... tags) {\n        client.record(&quot;action&quot;, 42L, tags);\n        client.histogram(&quot;someAspect&quot;, 100L, &quot;type:total&quot;, &quot;type:cpu&quot;, &quot;type:wait&quot;, &quot;type:sql&quot;);\n        new Verifier().verifyTagsAre(&quot;tag1&quot;, &quot;tag2&quot;, &quot;tag3&quot;);\n    }\n\n    public class Verifier {\n        public void verifyTagsAre(final String... expectedTags) {\n            Mockito.verify(client).record(eq(&quot;action&quot;), eq(42L),\n                    argThat(new CustomMatcher&lt;&gt;(expectedTags)));\n            Mockito.verify(client, Mockito.times(3)).histogram(eq(&quot;someAspect&quot;), anyLong(),\n                    argThat(new CustomAnyVarargMatcher&lt;&gt;(\n                            new CustomMatcher&lt;&gt;(&quot;type:total&quot;, expectedTags),\n                            new CustomMatcher&lt;&gt;(&quot;type:cpu&quot;, expectedTags),\n                            new CustomMatcher&lt;&gt;(&quot;type:wait&quot;, expectedTags),\n                            new CustomMatcher&lt;&gt;(&quot;type:sql&quot;, expectedTags)\n                    )));\n            Mockito.verifyNoMoreInteractions(client);\n        }\n    }\n\n    private class CustomMatcher&lt;T&gt; implements ArgumentMatcher&lt;T[]&gt;, Serializable {\n        private T[] expectedValues;\n\n        CustomMatcher(T... expectedValues) {\n            this.expectedValues = expectedValues;\n        }\n\n        CustomMatcher(T t, T... expectedValues) {\n            T[] values = (T[]) Array.newInstance(t.getClass(), expectedValues.length + 1);\n            System.arraycopy(expectedValues, 0, values, 1, expectedValues.length);\n            values[0] = t;\n            this.expectedValues = values;\n        }\n\n        @Override\n        public boolean matches(T[] args) {\n            return Arrays.equals(expectedValues, args);\n        }\n\n        @Override\n        public String toString() {\n            return Arrays.toString(expectedValues);\n        }\n    }\n\n    private class CustomAnyVarargMatcher&lt;T&gt; implements ArgumentMatcher&lt;T&gt;, Serializable {\n        private ArgumentMatcher&lt;T&gt;[] matchers;\n\n        CustomAnyVarargMatcher(ArgumentMatcher&lt;T&gt;... matchers) {\n            this.matchers = matchers;\n        }\n\n        @Override\n        public boolean matches(T args) {\n            for (ArgumentMatcher&lt;T&gt; matcher : matchers) {\n                if (matcher.matches(args))\n                    return true;\n            }\n            return false;\n        }\n\n        @Override\n        public String toString() {\n            return Arrays.toString(matchers);\n        }\n    }\n\n    interface DummyClient {\n        void record(String action, long value, String... tags);\n        void histogram(String aspect, long value, String... tags);\n    }\n\n    public static void main(String[] args) {\n        new TestHelper().execute(&quot;tag1&quot;, &quot;tag2&quot;, &quot;tag3&quot;);\n    }\n}\n</code></pre>\n<p>When the verification fails, I get this error:</p>\n<pre><code>Exception in thread &quot;main&quot; Argument(s) are different! Wanted:\ndummyClient.record(\n    &quot;action&quot;,\n    42L,\n    [tag1, tag2, tag3]\n);\n-&gt; at com.mockito.varargs.test.TestHelper$Verifier.verifyTagsAre(TestHelper.java:26)\nActual invocations have different arguments:\ndummyClient.record(\n    &quot;action&quot;,\n    42L,\n    &quot;tag1&quot;,\n    &quot;tag2&quot;,\n    &quot;tag3&quot;\n);\n</code></pre>\n<p>I was expecting the expected output to match the actual invocation, as it did in version 1.10.19. Is there a way to achieve this in the latest version? Or is there a way to compare the varargs as arrays in Mockito, so that the verification passes if the arrays are equal?</p>\n"},{"tags":["java","hbase","dependency-management"],"answers":[{"tags":[],"owner":{"account_id":21458715,"reputation":118,"user_id":15809896,"display_name":"Akram BEN GHANEM"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1694957126,"creation_date":1694957126,"answer_id":77121999,"question_id":77121794,"body_markdown":"I finally found the source code, of this dependency: \r\n\r\n&gt; `import org.apache.hadoop.hbase.unsafe.HBasePlatformDependent;`\r\n\r\nwhich is included from another mirror repository related the HBASE project with the name of the name of [https://github.com/apache/hbase-thirdparty][1]\r\nand the class I was searching for is located under: \r\n\r\n&gt; `hbase-unsafe/src/main/java/org/apache/hadoop/hbase/unsafe/HBasePlatformDependent.java`\r\n\r\nThe process I followed to find out where the package is located is to search for any related project to the HBASE project, as turned out this class is used in many other packages and I succeeded finally to get access to a common code-base which in my case is `hbase-thirdparty`. Maybe it&#39;s a not the best method but it worked.\r\n\r\n  [1]: https://github.com/apache/hbase-thirdparty/","title":"Catching a Dependency Issue in an Apache HBase Project in Java","body":"<p>I finally found the source code, of this dependency:</p>\n<blockquote>\n<p><code>import org.apache.hadoop.hbase.unsafe.HBasePlatformDependent;</code></p>\n</blockquote>\n<p>which is included from another mirror repository related the HBASE project with the name of the name of <a href=\"https://github.com/apache/hbase-thirdparty/\" rel=\"nofollow noreferrer\">https://github.com/apache/hbase-thirdparty</a>\nand the class I was searching for is located under:</p>\n<blockquote>\n<p><code>hbase-unsafe/src/main/java/org/apache/hadoop/hbase/unsafe/HBasePlatformDependent.java</code></p>\n</blockquote>\n<p>The process I followed to find out where the package is located is to search for any related project to the HBASE project, as turned out this class is used in many other packages and I succeeded finally to get access to a common code-base which in my case is <code>hbase-thirdparty</code>. Maybe it's a not the best method but it worked.</p>\n"}],"owner":{"account_id":21458715,"reputation":118,"user_id":15809896,"display_name":"Akram BEN GHANEM"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":47,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":77121999,"answer_count":1,"score":0,"last_activity_date":1694977727,"creation_date":1694953829,"question_id":77121794,"body_markdown":"While I am diving today in the source code of [apache hbase project](https://github.com/apache/hbase/), I encountered some difficulties to follow up with a dependency to access its source code: `HBase Unsafe`, which is mentioned in the following file and some other files as:\r\n\r\n&gt; [`import org.apache.hadoop.hbase.unsafe.HBasePlatformDependent;`](https://github.com/apache/hbase/blob/master/hbase-common/src/main/java/org/apache/hadoop/hbase/util/ByteBufferUtils.java#L34)\r\n\r\nI tried to look for this package: `org.apache.hadoop.hbase.unsafe`, but nothing showed up.\r\n\r\nAlso, I checked the dependencies with maven, pom.xml and searched it with my IDE, and also searched online, but nothing seems to give any direct link to it.\r\n\r\nIts auto-generated? if yes how can I know how its done? if not, is there a tool or method to follow the links for this dependency in the future?\r\n\r\nI expect to access the source code of this class: `org.apache.hadoop.hbase.unsafe`. and the method to re-do this process in the future.\r\n\r\n","title":"Catching a Dependency Issue in an Apache HBase Project in Java","body":"<p>While I am diving today in the source code of <a href=\"https://github.com/apache/hbase/\" rel=\"nofollow noreferrer\">apache hbase project</a>, I encountered some difficulties to follow up with a dependency to access its source code: <code>HBase Unsafe</code>, which is mentioned in the following file and some other files as:</p>\n<blockquote>\n<p><a href=\"https://github.com/apache/hbase/blob/master/hbase-common/src/main/java/org/apache/hadoop/hbase/util/ByteBufferUtils.java#L34\" rel=\"nofollow noreferrer\"><code>import org.apache.hadoop.hbase.unsafe.HBasePlatformDependent;</code></a></p>\n</blockquote>\n<p>I tried to look for this package: <code>org.apache.hadoop.hbase.unsafe</code>, but nothing showed up.</p>\n<p>Also, I checked the dependencies with maven, pom.xml and searched it with my IDE, and also searched online, but nothing seems to give any direct link to it.</p>\n<p>Its auto-generated? if yes how can I know how its done? if not, is there a tool or method to follow the links for this dependency in the future?</p>\n<p>I expect to access the source code of this class: <code>org.apache.hadoop.hbase.unsafe</code>. and the method to re-do this process in the future.</p>\n"},{"tags":["java","spring-boot","asynchronous","spring-webflux","spring-webclient"],"answers":[{"tags":[],"owner":{"account_id":11400015,"reputation":1904,"user_id":8357251,"display_name":"gdomo"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1694901988,"creation_date":1694901988,"answer_id":77119780,"question_id":77118972,"body_markdown":"Using webflux and reactive approach never wait or perform blocking operation until you know what you are doing. Use Flux/Mono api to define chain of transformations. In your case, you can execute all the requests by Webclient, obtain their Monos, then define a Mono that completes, when source Monos are finished:\r\n\r\n    Mono&lt;ResponseObject&gt; apiMethodHandler() {\r\n      Mono&lt;SomeServiceResponse&gt; response1Mono = webclient.get()...;\r\n      Mono&lt;AnotherServiceResponse&gt; response2Mono = webclient.get()...;\r\n      return Mono.when(response1Mono, response2Mono).map(v -&gt; new ResponseObject(&quot;all good&quot;));\r\n    } \r\n\r\nDepending on details some other options are available. For example, if you need all the results to compute a response, you can use `.collectList`:\r\n\r\n    Mono&lt;ResponseObject&gt; apiMethodHandler() {\r\n      Mono&lt;ServiceResponse&gt; response1Mono = webclient.get()...;\r\n      Mono&lt;ServiceResponse&gt; response2Mono = webclient.get()...;\r\n      return Flux.merge(response1Mono, response2Mono)\r\n        .collectList(responsesList -&gt; Mono.just(new ResponseObject(responsesList)));\r\n    } ","title":"Spring Boot, WebClient, Asynchronous Calls and Waiting","body":"<p>Using webflux and reactive approach never wait or perform blocking operation until you know what you are doing. Use Flux/Mono api to define chain of transformations. In your case, you can execute all the requests by Webclient, obtain their Monos, then define a Mono that completes, when source Monos are finished:</p>\n<pre><code>Mono&lt;ResponseObject&gt; apiMethodHandler() {\n  Mono&lt;SomeServiceResponse&gt; response1Mono = webclient.get()...;\n  Mono&lt;AnotherServiceResponse&gt; response2Mono = webclient.get()...;\n  return Mono.when(response1Mono, response2Mono).map(v -&gt; new ResponseObject(&quot;all good&quot;));\n} \n</code></pre>\n<p>Depending on details some other options are available. For example, if you need all the results to compute a response, you can use <code>.collectList</code>:</p>\n<pre><code>Mono&lt;ResponseObject&gt; apiMethodHandler() {\n  Mono&lt;ServiceResponse&gt; response1Mono = webclient.get()...;\n  Mono&lt;ServiceResponse&gt; response2Mono = webclient.get()...;\n  return Flux.merge(response1Mono, response2Mono)\n    .collectList(responsesList -&gt; Mono.just(new ResponseObject(responsesList)));\n} \n</code></pre>\n"}],"owner":{"account_id":6123024,"reputation":171,"user_id":4775976,"display_name":"Software"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":176,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":77119780,"answer_count":1,"score":0,"last_activity_date":1694977657,"creation_date":1694887195,"question_id":77118972,"body_markdown":"I need advice/recommendations. I have not coded the program yet. I plan to code a Spring  Boot RESTful web service. In the web service, I&#39;m planning to make several asynchronous \r\ncalls to other external RESTful web services using Spring Wenflux&#39;s WebClient. I need to wait for all these asynchronous call responses until they all have completed before moving to the next program task. The question is how do I wait? I&#39;m planning to record the WebClient&#39;s handler object references and have an infinite loop checking that all synchronous responses have been processed. Is there a better way of doing this?","title":"Spring Boot, WebClient, Asynchronous Calls and Waiting","body":"<p>I need advice/recommendations. I have not coded the program yet. I plan to code a Spring  Boot RESTful web service. In the web service, I'm planning to make several asynchronous\ncalls to other external RESTful web services using Spring Wenflux's WebClient. I need to wait for all these asynchronous call responses until they all have completed before moving to the next program task. The question is how do I wait? I'm planning to record the WebClient's handler object references and have an infinite loop checking that all synchronous responses have been processed. Is there a better way of doing this?</p>\n"},{"tags":["java","arraylist","rgb"],"comments":[{"owner":{"account_id":969721,"reputation":344508,"user_id":992484,"accept_rate":60,"display_name":"MadProgrammer"},"score":0,"creation_date":1694983761,"post_id":77123225,"comment_id":135959966,"body_markdown":"I’d first test opening the images, maybe in an image editor or using ImageIO.read - this will let you know if the images are corrupted or your code is wrong","body":"I’d first test opening the images, maybe in an image editor or using ImageIO.read - this will let you know if the images are corrupted or your code is wrong"},{"owner":{"account_id":969721,"reputation":344508,"user_id":992484,"accept_rate":60,"display_name":"MadProgrammer"},"score":0,"creation_date":1694985516,"post_id":77123225,"comment_id":135960160,"body_markdown":"I&#39;d also consdier having a look at something like [this example](https://github.com/nayuki/BMP-IO/blob/master/src/io/nayuki/bmpio/BmpReader.java) to compare the reading of the BMP data","body":"I&#39;d also consdier having a look at something like <a href=\"https://github.com/nayuki/BMP-IO/blob/master/src/io/nayuki/bmpio/BmpReader.java\" rel=\"nofollow noreferrer\">this example</a> to compare the reading of the BMP data"},{"owner":{"account_id":2053598,"reputation":41316,"user_id":1831987,"display_name":"VGR"},"score":2,"creation_date":1694986137,"post_id":77123225,"comment_id":135960221,"body_markdown":"Other people will find your code much more readable if you remove “this is the statement that will” from every comment that contains it.  And remove “this is the” from all other comments.","body":"Other people will find your code much more readable if you remove “this is the statement that will” from every comment that contains it.  And remove “this is the” from all other comments."}],"owner":{"account_id":26485705,"reputation":1,"user_id":22577225,"display_name":"Seb Ar"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":23,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1694977421,"creation_date":1694977421,"question_id":77123225,"body_markdown":"I am making a class in Java that receives a BMP image, from which I must generate three images each for its RGB tone, that is, a copy of the image only with the red tone, another only with the green tone and another only with the blue hue, for this I can only use ArrayList or normal Arrays, that is, I cannot use classes like BufferedImage. \r\n\r\nThe images are generated for me but they appear corrupted and cannot be opened, when I open them it appears that the format of the generated image is incompatible. The code is the following:\r\n\r\n\r\n```\r\nimport java.io.FileOutputStream;\r\nimport java.io.IOException;\r\nimport java.util.ArrayList;\r\n\r\npublic class BmpHandlerCore {  // this is the original class\r\n    public static void separateRGB(String fileName) { // this is the method that I created \r\n        try {\r\n           FileInputStream fileInputStream = new FileInputStream(fileName);\r\n           byte[] header = new byte[54];\r\n           fileInputStream.read(header);\r\n           int width = byteArrayToInt(header, 18);\r\n           int height = byteArrayToInt(header, 22);\r\n           int imageSize = byteArrayToInt(header, 34); // this is the size of the image in bytes (the size of the image is the size of the header + the size of the image data)\r\n           byte[] imageData = new byte[imageSize]; // this is the array that will hold the image data (the size of the array is the size of the image in bytes)\r\n           fileInputStream.read(imageData); // this is the method that will read the image data into the array imageData\r\n           ArrayList&lt;Byte&gt; redChannel = new ArrayList&lt;&gt;(); // this is the array that will hold the red channel  (the size of the array is the size of the image in bytes)\r\n           ArrayList&lt;Byte&gt; greenChannel = new ArrayList&lt;&gt;(); // this is the array that will hold the green channel  (the size of the array is the size of the image in bytes) \r\n           ArrayList&lt;Byte&gt; blueChannel = new ArrayList&lt;&gt;(); // this is the array that will hold the blue channel  (the size of the array is the size of the image in bytes)\r\n           for (int i = 0; i &lt; imageSize; i += 3) { // this is the loop that will iterate through the image data array and separate the RGB channels into their respective arrays (redChannel, greenChannel, blueChannel)\r\n           blueChannel.add(imageData[i]); // this is the statement that will add the blue channel data to the blueChannel array (the blue channel data is the first byte of every pixel) \r\n           greenChannel.add(imageData[i + 1]); // this is the statement that will add the green channel data to the greenChannel array (the green channel data is the second byte of every pixel) \r\n           redChannel.add(imageData[i + 2]); // this is the statement that will add the red channel data to the redChannel array (the red channel data is the third byte of every pixel)\r\n         }\r\n        saveImage(redChannel, width, height, &quot;Image-red.bmp&quot;); // this is the statement that will save the red channel data to a new file called &quot;Image-red.bmp&quot; \r\n        saveImage(greenChannel, width, height, &quot;Image-green.bmp&quot;); // this is the statement that will save the green channel data to a new file called &quot;Image-green.bmp&quot; \r\n        saveImage(blueChannel, width, height, &quot;Image-blue.bmp&quot;); // this is the statement that will save the blue channel data to a new file called &quot;Image-blue.bmp&quot; \r\n        fileInputStream.close(); // this is the statement that will close the fileInputStream \r\n    } catch (IOException e) { // this is the catch statement that will catch any IOExceptions that may occur \r\n        e.printStackTrace(); // this is the statement that will print the stack trace of the IOException \r\n    }\r\n}  \r\n  public static void generateSepiaTone(String fileName) { // this is the method that will generate the sepia tone effect \r\n     try { \r\n      FileInputStream fileInputStream = new FileInputStream(fileName); // this is the statement that will create a new FileInputStream object called fileInputStream \r\n        byte[] header = new byte[54]; // this is the array that will hold the header data (the size of the array is 54 bytes) \r\n        fileInputStream.read(header); // this is the statement that will read the header data into the header array   \r\n        int width = byteArrayToInt(header, 18); // this is the statement that will convert the width data from the header array into an integer and store it in the variable width \r\n        int height = byteArrayToInt(header, 22); // this is the statement that will convert the height data from the header array into an integer and store it in the variable height \r\n        int imageSize = byteArrayToInt(header, 34); // this is the statement that will convert the image size data from the header array into an integer and store it in the variable imageSize \r\n        byte[] imageData = new byte[imageSize]; // this is the array that will hold the image data (the size of the array is the size of the image in bytes) \r\n        fileInputStream.read(imageData); // this is the statement that will read the image data into the imageData array \r\n        ArrayList&lt;Byte&gt; sepiaTone = new ArrayList&lt;&gt;(); // this is the array that will hold the sepia tone data (the size of the array is the size of the image in bytes) \r\n        for (int i = 0; i &lt; imageSize; i += 3) { // this is the loop that will iterate through the image data array and apply the sepia tone effect to each pixel \r\n           int blue = imageData[i] &amp; 0xFF; // this is the statement that will convert the blue channel data from the imageData array into an integer and store it in the variable blue \r\n           int green = imageData[i + 1] &amp; 0xFF; // this is the statement that will convert the green channel data from the imageData array into an integer and store it in the variable green \r\n           int red = imageData[i + 2] &amp; 0xFF; // this is the statement that will convert the red channel data from the imageData array into an integer and store it in the variable red \r\n           int sepiaBlue = (int) (0.272 * red + 0.534 * green + 0.131 * blue); // this is the statement that will calculate the sepia blue channel data and store it in the variable sepiaBlue \r\n           int sepiaGreen = (int) (0.349 * red + 0.686 * green + 0.168 * blue); // this is the statement that will calculate the sepia green channel data and store it in the variable sepiaGreen \r\n           int sepiaRed = (int) (0.393 * red + 0.769 * green + 0.189 * blue); // this is the statement that will calculate the sepia red channel data and store it in the variable sepiaRed \r\n          sepiaTone.add((byte) sepiaBlue); // this is the statement that will add the sepia blue channel data to the sepiaTone array (the sepia blue channel data is the first byte of every pixel) \r\n          sepiaTone.add((byte) sepiaGreen); // this is the statement that will add the sepia green channel data to the sepiaTone array (the sepia green channel data is the second byte of every pixel) \r\n          sepiaTone.add((byte) sepiaRed); // this is the statement that will add the sepia red channel data to the sepiaTone array (the sepia red channel data is the third byte of every pixel)\r\n         } \r\n        saveImage(sepiaTone, width, height, &quot;Image-sepia.bmp&quot;); // this is the statement that will save the sepia tone data to a new file called &quot;Image-sepia.bmp&quot; \r\n        fileInputStream.close(); // this is the statement that will close the fileInputStream \r\n     } catch (IOException e) { // this is the catch statement that will catch any IOExceptions that may occur \r\n        e.printStackTrace(); // this is the statement that will print the stack trace of the IOException \r\n     } \r\n   } \r\n   public static void saveImage(ArrayList&lt;Byte&gt; imageData, int width, int height, String fileName) { // this is the method that will save the image data to a new file \r\n    try { \r\n     FileOutputStream fileOutputStream = new FileOutputStream(fileName); // this is the statement that will create a new FileOutputStream object called fileOutputStream \r\n    byte[] header = createBmpHeader(width, height, imageData.size()); // this is the statement that will create a new header array and store it in the variable header \r\n    fileOutputStream.write(header); // this is the statement that will write the header data to the fileOutputStream \r\n    for (int i = 0; i &lt; imageData.size(); i++) { // this is the loop that will iterate through the imageData array and write the image data to the fileOutputStream \r\n      fileOutputStream.write(imageData.get(i)); // this is the statement that will write the image data to the fileOutputStream \r\n       } \r\n       fileOutputStream.close(); // this is the statement that will close the fileOutputStream \r\n     } catch (IOException e) { // this is the catch statement that will catch any IOExceptions that may occur \r\n         e.printStackTrace(); // this is the statement that will print the stack trace of the IOException \r\n      } \r\n   } \r\n\r\n   private static byte[] createBmpHeader(int width, int height, int imageSize) { // this is the method that will create a new header array \r\n        byte[] header = new byte[54]; // this is the array that will hold the header data (the size of the array is 54 bytes) \r\n        header[0] = 0x42; // this is the statement that will set the first byte of the header array to 0x42 \r\n        header[1] = 0x4D; // this is the statement that will set the second byte of the header array to 0x4D \r\n        header[2] = (byte) (imageSize + 54); // this is the statement that will set the third byte of the header array to the size of the image in bytes plus 54 \r\n        header[10] = 0x36; // this is the statement that will set the eleventh byte of the header array to 0x36 \r\n        header[14] = 0x28; // this is the statement that will set the fifteenth byte of the header array to 0x28 \r\n        header[18] = (byte) width; // this is the statement that will set the nineteenth byte of the header array to the width of the image \r\n        header[19] = (byte) (width &gt;&gt; 8); // this is the statement that will set the twentieth byte of the header array to the width of the image shifted right by 8 bits \r\n        header[20] = (byte) (width &gt;&gt; 16); // this is the statement that will set the twenty-first byte of the header array to the width of the image shifted right by 16 bits \r\n        header[22] = (byte) height; // this is the statement that will set the twenty-third byte of the header array to the height of the image \r\n        header[23] = (byte) (height &gt;&gt; 8); // this is the statement that will set the twenty-fourth byte of the header array to the height of the image shifted right by 8 bits \r\n        header[24] = (byte) (height &gt;&gt; 16); // this is the statement that will set the twenty-fifth byte of the header array to the height of the image shifted right by 16 bits \r\n        header[34] = (byte) imageSize; // this is the statement that will set the thirty-fifth byte of the header array to the size of the image in bytes \r\n        header[35] = (byte) (imageSize &gt;&gt; 8); // this is the statement that will set the thirty-sixth byte of the header array to the size of the image in bytes shifted right by 8 bits \r\n        header[36] = (byte) (imageSize &gt;&gt; 16); // this is the statement that will set the thirty-seventh byte of the header array to the size of the image in bytes shifted right by 16 bits \r\n        header[37] = (byte) (imageSize &gt;&gt; 24); // this is the statement that will set the thirty-eighth byte of the header array to the size of the image in bytes shifted right by 24 bits \r\n        return header; // this is the statement that will return the header array \r\n        }  \r\n    private static int byteArrayToInt(byte[] byteArray, int index) { // this is the method that will convert a byte array to an integer \r\n        return byteArray[index] &amp; 0xFF | (byteArray[index + 1] &amp; 0xFF) &lt;&lt; 8 | (byteArray[index + 2] &amp; 0xFF) &lt;&lt; 16 | (byteArray[index + 3] &amp; 0xFF) &lt;&lt; 24; // this is the statement that will convert a byte array to an integer and return it \r\n      }\r\n  } \r\n```\r\n\r\n ","title":"Java class does not correctly generate RGB or sepia images","body":"<p>I am making a class in Java that receives a BMP image, from which I must generate three images each for its RGB tone, that is, a copy of the image only with the red tone, another only with the green tone and another only with the blue hue, for this I can only use ArrayList or normal Arrays, that is, I cannot use classes like BufferedImage.</p>\n<p>The images are generated for me but they appear corrupted and cannot be opened, when I open them it appears that the format of the generated image is incompatible. The code is the following:</p>\n<pre><code>import java.io.FileOutputStream;\nimport java.io.IOException;\nimport java.util.ArrayList;\n\npublic class BmpHandlerCore {  // this is the original class\n    public static void separateRGB(String fileName) { // this is the method that I created \n        try {\n           FileInputStream fileInputStream = new FileInputStream(fileName);\n           byte[] header = new byte[54];\n           fileInputStream.read(header);\n           int width = byteArrayToInt(header, 18);\n           int height = byteArrayToInt(header, 22);\n           int imageSize = byteArrayToInt(header, 34); // this is the size of the image in bytes (the size of the image is the size of the header + the size of the image data)\n           byte[] imageData = new byte[imageSize]; // this is the array that will hold the image data (the size of the array is the size of the image in bytes)\n           fileInputStream.read(imageData); // this is the method that will read the image data into the array imageData\n           ArrayList&lt;Byte&gt; redChannel = new ArrayList&lt;&gt;(); // this is the array that will hold the red channel  (the size of the array is the size of the image in bytes)\n           ArrayList&lt;Byte&gt; greenChannel = new ArrayList&lt;&gt;(); // this is the array that will hold the green channel  (the size of the array is the size of the image in bytes) \n           ArrayList&lt;Byte&gt; blueChannel = new ArrayList&lt;&gt;(); // this is the array that will hold the blue channel  (the size of the array is the size of the image in bytes)\n           for (int i = 0; i &lt; imageSize; i += 3) { // this is the loop that will iterate through the image data array and separate the RGB channels into their respective arrays (redChannel, greenChannel, blueChannel)\n           blueChannel.add(imageData[i]); // this is the statement that will add the blue channel data to the blueChannel array (the blue channel data is the first byte of every pixel) \n           greenChannel.add(imageData[i + 1]); // this is the statement that will add the green channel data to the greenChannel array (the green channel data is the second byte of every pixel) \n           redChannel.add(imageData[i + 2]); // this is the statement that will add the red channel data to the redChannel array (the red channel data is the third byte of every pixel)\n         }\n        saveImage(redChannel, width, height, &quot;Image-red.bmp&quot;); // this is the statement that will save the red channel data to a new file called &quot;Image-red.bmp&quot; \n        saveImage(greenChannel, width, height, &quot;Image-green.bmp&quot;); // this is the statement that will save the green channel data to a new file called &quot;Image-green.bmp&quot; \n        saveImage(blueChannel, width, height, &quot;Image-blue.bmp&quot;); // this is the statement that will save the blue channel data to a new file called &quot;Image-blue.bmp&quot; \n        fileInputStream.close(); // this is the statement that will close the fileInputStream \n    } catch (IOException e) { // this is the catch statement that will catch any IOExceptions that may occur \n        e.printStackTrace(); // this is the statement that will print the stack trace of the IOException \n    }\n}  \n  public static void generateSepiaTone(String fileName) { // this is the method that will generate the sepia tone effect \n     try { \n      FileInputStream fileInputStream = new FileInputStream(fileName); // this is the statement that will create a new FileInputStream object called fileInputStream \n        byte[] header = new byte[54]; // this is the array that will hold the header data (the size of the array is 54 bytes) \n        fileInputStream.read(header); // this is the statement that will read the header data into the header array   \n        int width = byteArrayToInt(header, 18); // this is the statement that will convert the width data from the header array into an integer and store it in the variable width \n        int height = byteArrayToInt(header, 22); // this is the statement that will convert the height data from the header array into an integer and store it in the variable height \n        int imageSize = byteArrayToInt(header, 34); // this is the statement that will convert the image size data from the header array into an integer and store it in the variable imageSize \n        byte[] imageData = new byte[imageSize]; // this is the array that will hold the image data (the size of the array is the size of the image in bytes) \n        fileInputStream.read(imageData); // this is the statement that will read the image data into the imageData array \n        ArrayList&lt;Byte&gt; sepiaTone = new ArrayList&lt;&gt;(); // this is the array that will hold the sepia tone data (the size of the array is the size of the image in bytes) \n        for (int i = 0; i &lt; imageSize; i += 3) { // this is the loop that will iterate through the image data array and apply the sepia tone effect to each pixel \n           int blue = imageData[i] &amp; 0xFF; // this is the statement that will convert the blue channel data from the imageData array into an integer and store it in the variable blue \n           int green = imageData[i + 1] &amp; 0xFF; // this is the statement that will convert the green channel data from the imageData array into an integer and store it in the variable green \n           int red = imageData[i + 2] &amp; 0xFF; // this is the statement that will convert the red channel data from the imageData array into an integer and store it in the variable red \n           int sepiaBlue = (int) (0.272 * red + 0.534 * green + 0.131 * blue); // this is the statement that will calculate the sepia blue channel data and store it in the variable sepiaBlue \n           int sepiaGreen = (int) (0.349 * red + 0.686 * green + 0.168 * blue); // this is the statement that will calculate the sepia green channel data and store it in the variable sepiaGreen \n           int sepiaRed = (int) (0.393 * red + 0.769 * green + 0.189 * blue); // this is the statement that will calculate the sepia red channel data and store it in the variable sepiaRed \n          sepiaTone.add((byte) sepiaBlue); // this is the statement that will add the sepia blue channel data to the sepiaTone array (the sepia blue channel data is the first byte of every pixel) \n          sepiaTone.add((byte) sepiaGreen); // this is the statement that will add the sepia green channel data to the sepiaTone array (the sepia green channel data is the second byte of every pixel) \n          sepiaTone.add((byte) sepiaRed); // this is the statement that will add the sepia red channel data to the sepiaTone array (the sepia red channel data is the third byte of every pixel)\n         } \n        saveImage(sepiaTone, width, height, &quot;Image-sepia.bmp&quot;); // this is the statement that will save the sepia tone data to a new file called &quot;Image-sepia.bmp&quot; \n        fileInputStream.close(); // this is the statement that will close the fileInputStream \n     } catch (IOException e) { // this is the catch statement that will catch any IOExceptions that may occur \n        e.printStackTrace(); // this is the statement that will print the stack trace of the IOException \n     } \n   } \n   public static void saveImage(ArrayList&lt;Byte&gt; imageData, int width, int height, String fileName) { // this is the method that will save the image data to a new file \n    try { \n     FileOutputStream fileOutputStream = new FileOutputStream(fileName); // this is the statement that will create a new FileOutputStream object called fileOutputStream \n    byte[] header = createBmpHeader(width, height, imageData.size()); // this is the statement that will create a new header array and store it in the variable header \n    fileOutputStream.write(header); // this is the statement that will write the header data to the fileOutputStream \n    for (int i = 0; i &lt; imageData.size(); i++) { // this is the loop that will iterate through the imageData array and write the image data to the fileOutputStream \n      fileOutputStream.write(imageData.get(i)); // this is the statement that will write the image data to the fileOutputStream \n       } \n       fileOutputStream.close(); // this is the statement that will close the fileOutputStream \n     } catch (IOException e) { // this is the catch statement that will catch any IOExceptions that may occur \n         e.printStackTrace(); // this is the statement that will print the stack trace of the IOException \n      } \n   } \n\n   private static byte[] createBmpHeader(int width, int height, int imageSize) { // this is the method that will create a new header array \n        byte[] header = new byte[54]; // this is the array that will hold the header data (the size of the array is 54 bytes) \n        header[0] = 0x42; // this is the statement that will set the first byte of the header array to 0x42 \n        header[1] = 0x4D; // this is the statement that will set the second byte of the header array to 0x4D \n        header[2] = (byte) (imageSize + 54); // this is the statement that will set the third byte of the header array to the size of the image in bytes plus 54 \n        header[10] = 0x36; // this is the statement that will set the eleventh byte of the header array to 0x36 \n        header[14] = 0x28; // this is the statement that will set the fifteenth byte of the header array to 0x28 \n        header[18] = (byte) width; // this is the statement that will set the nineteenth byte of the header array to the width of the image \n        header[19] = (byte) (width &gt;&gt; 8); // this is the statement that will set the twentieth byte of the header array to the width of the image shifted right by 8 bits \n        header[20] = (byte) (width &gt;&gt; 16); // this is the statement that will set the twenty-first byte of the header array to the width of the image shifted right by 16 bits \n        header[22] = (byte) height; // this is the statement that will set the twenty-third byte of the header array to the height of the image \n        header[23] = (byte) (height &gt;&gt; 8); // this is the statement that will set the twenty-fourth byte of the header array to the height of the image shifted right by 8 bits \n        header[24] = (byte) (height &gt;&gt; 16); // this is the statement that will set the twenty-fifth byte of the header array to the height of the image shifted right by 16 bits \n        header[34] = (byte) imageSize; // this is the statement that will set the thirty-fifth byte of the header array to the size of the image in bytes \n        header[35] = (byte) (imageSize &gt;&gt; 8); // this is the statement that will set the thirty-sixth byte of the header array to the size of the image in bytes shifted right by 8 bits \n        header[36] = (byte) (imageSize &gt;&gt; 16); // this is the statement that will set the thirty-seventh byte of the header array to the size of the image in bytes shifted right by 16 bits \n        header[37] = (byte) (imageSize &gt;&gt; 24); // this is the statement that will set the thirty-eighth byte of the header array to the size of the image in bytes shifted right by 24 bits \n        return header; // this is the statement that will return the header array \n        }  \n    private static int byteArrayToInt(byte[] byteArray, int index) { // this is the method that will convert a byte array to an integer \n        return byteArray[index] &amp; 0xFF | (byteArray[index + 1] &amp; 0xFF) &lt;&lt; 8 | (byteArray[index + 2] &amp; 0xFF) &lt;&lt; 16 | (byteArray[index + 3] &amp; 0xFF) &lt;&lt; 24; // this is the statement that will convert a byte array to an integer and return it \n      }\n  } \n</code></pre>\n"},{"tags":["java","maven","liferay","maven-3","liferay-6"],"comments":[{"owner":{"account_id":112317,"reputation":93939,"user_id":296328,"accept_rate":60,"display_name":"khmarbaise"},"score":0,"creation_date":1432056525,"post_id":30329108,"comment_id":48759209,"body_markdown":"Does you pom file contain a version? Can you show the full pom file? Which Maven version do you use? How have you called Maven? Have you called Maven from command line or from within an IDE?","body":"Does you pom file contain a version? Can you show the full pom file? Which Maven version do you use? How have you called Maven? Have you called Maven from command line or from within an IDE?"},{"owner":{"account_id":5502833,"reputation":8715,"user_id":4371659,"accept_rate":80,"display_name":"Tobias Liefke"},"score":0,"creation_date":1432115137,"post_id":30329108,"comment_id":48784766,"body_markdown":"There should be a more concrete stacktrace somewhere in your log, that shows the exact position of the NullPointerException (something with `com.liferay.maven...`)","body":"There should be a more concrete stacktrace somewhere in your log, that shows the exact position of the NullPointerException (something with <code>com.liferay.maven...</code>)"},{"owner":{"account_id":1375280,"reputation":4333,"user_id":1309392,"accept_rate":56,"display_name":"sTg"},"score":0,"creation_date":1432133914,"post_id":30329108,"comment_id":48799068,"body_markdown":"@khmarbaise : I have added my pom.xml in my question...I am using Maven using IDE...And i  am doing the build process using IDE. Please guide.","body":"@khmarbaise : I have added my pom.xml in my question...I am using Maven using IDE...And i  am doing the build process using IDE. Please guide."},{"owner":{"account_id":112317,"reputation":93939,"user_id":296328,"accept_rate":60,"display_name":"khmarbaise"},"score":0,"creation_date":1432139499,"post_id":30329108,"comment_id":48802974,"body_markdown":"Have you tried to run your build on command line and not from within IDE. Which Maven Version do you use?","body":"Have you tried to run your build on command line and not from within IDE. Which Maven Version do you use?"},{"owner":{"account_id":1375280,"reputation":4333,"user_id":1309392,"accept_rate":56,"display_name":"sTg"},"score":0,"creation_date":1432187213,"post_id":30329108,"comment_id":48821961,"body_markdown":"@khmarbaise : i am using apache maven 3.1.1 ..And not yet tried over command prompt as i have been doing it on IDE.","body":"@khmarbaise : i am using apache maven 3.1.1 ..And not yet tried over command prompt as i have been doing it on IDE."},{"owner":{"account_id":112317,"reputation":93939,"user_id":296328,"accept_rate":60,"display_name":"khmarbaise"},"score":0,"creation_date":1432193730,"post_id":30329108,"comment_id":48825373,"body_markdown":"Please try in command line. Which IDE? Eclipse? Which Version of it? Which Version m2e in case of Eclipse?","body":"Please try in command line. Which IDE? Eclipse? Which Version of it? Which Version m2e in case of Eclipse?"},{"owner":{"account_id":1375280,"reputation":4333,"user_id":1309392,"accept_rate":56,"display_name":"sTg"},"score":0,"creation_date":1432193828,"post_id":30329108,"comment_id":48825451,"body_markdown":"@khmarbaise : I tried using command prompt but was fetching the same result.  I am using Eclipse Liferay Developer Studio\n\nVersion: 2.0.0.201401271217-b1.. Can this be maven version issue?","body":"@khmarbaise : I tried using command prompt but was fetching the same result.  I am using Eclipse Liferay Developer Studio  Version: 2.0.0.201401271217-b1.. Can this be maven version issue?"},{"owner":{"account_id":112317,"reputation":93939,"user_id":296328,"accept_rate":60,"display_name":"khmarbaise"},"score":0,"creation_date":1432194323,"post_id":30329108,"comment_id":48825810,"body_markdown":"You have defined a profile with a version `7.0.0-m2`for liferay plugin but the run shows `liferay-maven-plugin:6.2.1`. You should check that you alway use the same version of the plugin.","body":"You have defined a profile with a version <code>7.0.0-m2</code>for liferay plugin but the run shows <code>liferay-maven-plugin:6.2.1</code>. You should check that you alway use the same version of the plugin."},{"owner":{"account_id":1375280,"reputation":4333,"user_id":1309392,"accept_rate":56,"display_name":"sTg"},"score":0,"creation_date":1432194358,"post_id":30329108,"comment_id":48825835,"body_markdown":"Can you please come over chat room http://chat.stackoverflow.com/rooms/78385/http-stackoverflow-com-questions-30329108-mojoexecutionexception-while-doing-a","body":"Can you please come over chat room <a href=\"http://chat.stackoverflow.com/rooms/78385/http-stackoverflow-com-questions-30329108-mojoexecutionexception-while-doing-a\">chat.stackoverflow.com/rooms/78385/&hellip;</a>"}],"answers":[{"tags":[],"owner":{"account_id":6342738,"reputation":77,"user_id":4924177,"accept_rate":30,"display_name":"Luxy"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1432203754,"creation_date":1432203754,"answer_id":30370989,"question_id":30329108,"body_markdown":"1. First of all you need to check the liferay version that you are using if it is mentioned in your `pom.xml`.\r\n\r\n2. Also, the error can be thrown when you try to build your Liferay project using an old version of `Maven`. Check your Maven Version that you are using using command\r\n\r\n    mvn -version\r\n\r\nAlso the `JDK` that you are using should be correctly mentioned in your POM.xml.\r\nI find comment from khmarbaise as correct because the version might also have been conflicted. Hope this helps.\r\n","title":"MojoExecutionException while doing a build - Maven","body":"<ol>\n<li><p>First of all you need to check the liferay version that you are using if it is mentioned in your <code>pom.xml</code>.</p></li>\n<li><p>Also, the error can be thrown when you try to build your Liferay project using an old version of <code>Maven</code>. Check your Maven Version that you are using using command</p>\n\n<p>mvn -version</p></li>\n</ol>\n\n<p>Also the <code>JDK</code> that you are using should be correctly mentioned in your POM.xml.\nI find comment from khmarbaise as correct because the version might also have been conflicted. Hope this helps.</p>\n"},{"tags":[],"owner":{"account_id":557950,"reputation":1088,"user_id":920554,"accept_rate":100,"display_name":"Mingtao Sun"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1660890290,"creation_date":1660890290,"answer_id":73412617,"question_id":30329108,"body_markdown":"This issue happened on my Mac. \r\n\r\nI used JAVA_HOME=`/usr/libexec/java_home -v 1.8` to switch to JDK 8\r\n\r\n`echo $JAVA_HOME` shows \r\n\r\n`/Library/Internet Plug-Ins/JavaAppletPlugin.plugin/Contents/Home`\r\n\r\nTurns out this JDK version is problematic. \r\n\r\nI fixed it by using `JAVA_HOME=/Library/Java/JavaVirtualMachines/jdk1.8.0_341.jdk/Contents/Home` (after installing an official JDK8)\r\n\r\nNow `echo $JAVA_HOME` shows\r\n\r\n`/Library/Java/JavaVirtualMachines/jdk1.8.0_341.jdk/Contents/Home`","title":"MojoExecutionException while doing a build - Maven","body":"<p>This issue happened on my Mac.</p>\n<p>I used JAVA_HOME=<code>/usr/libexec/java_home -v 1.8</code> to switch to JDK 8</p>\n<p><code>echo $JAVA_HOME</code> shows</p>\n<p><code>/Library/Internet Plug-Ins/JavaAppletPlugin.plugin/Contents/Home</code></p>\n<p>Turns out this JDK version is problematic.</p>\n<p>I fixed it by using <code>JAVA_HOME=/Library/Java/JavaVirtualMachines/jdk1.8.0_341.jdk/Contents/Home</code> (after installing an official JDK8)</p>\n<p>Now <code>echo $JAVA_HOME</code> shows</p>\n<p><code>/Library/Java/JavaVirtualMachines/jdk1.8.0_341.jdk/Contents/Home</code></p>\n"}],"owner":{"account_id":1375280,"reputation":4333,"user_id":1309392,"accept_rate":56,"display_name":"sTg"},"comment_count":9,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":15862,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"answer_count":2,"score":3,"last_activity_date":1694977380,"creation_date":1432047266,"question_id":30329108,"body_markdown":"Below is the goals that i have included while building maven project in my pom.\r\n\r\n    &lt;?xml version=&quot;1.0&quot;?&gt; \r\n    \r\n    &lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd&quot;&gt;\r\n    \t&lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n    \t&lt;groupId&gt;com.mynewproject.portlet&lt;/groupId&gt;\r\n    \t&lt;artifactId&gt;abc-myfacts-portlet&lt;/artifactId&gt;\r\n    \t&lt;packaging&gt;war&lt;/packaging&gt;\r\n    \t&lt;name&gt;ABC MY FACTS Portlet&lt;/name&gt;\r\n    \t&lt;version&gt;2.0-SNAPSHOT&lt;/version&gt;\r\n    \t&lt;build&gt;\r\n    \t\t&lt;plugins&gt;\r\n    \t\t\t&lt;plugin&gt;\r\n    \t\t\t\t&lt;groupId&gt;com.liferay.maven.plugins&lt;/groupId&gt;\r\n    \t\t\t\t&lt;artifactId&gt;liferay-maven-plugin&lt;/artifactId&gt;\r\n    \t\t\t\t&lt;version&gt;${liferay.maven.plugin.version}&lt;/version&gt;\r\n    \t\t\t\t&lt;executions&gt;\r\n    \t\t\t\t\t&lt;execution&gt;\r\n    \t\t\t\t\t\t&lt;phase&gt;generate-sources&lt;/phase&gt;\r\n    \t\t\t\t\t\t&lt;goals&gt;\r\n    \t\t\t\t\t\t\t&lt;goal&gt;build-css&lt;/goal&gt;\r\n    \t\t\t\t\t\t&lt;/goals&gt;\r\n    \t\t\t\t\t&lt;/execution&gt;\r\n    \t\t\t\t&lt;/executions&gt;\r\n    \t\t\t\t&lt;configuration&gt;\r\n    \t\t\t\t\t&lt;autoDeployDir&gt;${liferay.auto.deploy.dir}&lt;/autoDeployDir&gt;\r\n    \t\t\t\t\t&lt;appServerDeployDir&gt;${liferay.app.server.deploy.dir}&lt;/appServerDeployDir&gt;\r\n    \t\t\t\t\t&lt;appServerLibGlobalDir&gt;${liferay.app.server.lib.global.dir}&lt;/appServerLibGlobalDir&gt;\r\n    \t\t\t\t\t&lt;appServerPortalDir&gt;${liferay.app.server.portal.dir}&lt;/appServerPortalDir&gt;\r\n    \t\t\t\t\t&lt;liferayVersion&gt;${liferay.version}&lt;/liferayVersion&gt;\r\n    \t\t\t\t\t&lt;pluginType&gt;portlet&lt;/pluginType&gt;\r\n    \t\t\t\t&lt;/configuration&gt;\r\n    \t\t\t&lt;/plugin&gt;\r\n    \t\t\t&lt;plugin&gt;\r\n    \t\t\t\t&lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\r\n    \t\t\t\t&lt;version&gt;2.5&lt;/version&gt;\r\n    \t\t\t\t&lt;configuration&gt;\r\n    \t\t\t\t\t&lt;encoding&gt;UTF-8&lt;/encoding&gt;\r\n    \t\t\t\t\t&lt;source&gt;1.6&lt;/source&gt;\r\n    \t\t\t\t\t&lt;target&gt;1.6&lt;/target&gt;\r\n    \t\t\t\t&lt;/configuration&gt;\r\n    \t\t\t&lt;/plugin&gt;\r\n    \t\t\t&lt;plugin&gt;\r\n    \t\t\t\t&lt;artifactId&gt;maven-resources-plugin&lt;/artifactId&gt;\r\n    \t\t\t\t&lt;version&gt;2.5&lt;/version&gt;\r\n    \t\t\t\t&lt;configuration&gt;\r\n    \t\t\t\t\t&lt;encoding&gt;UTF-8&lt;/encoding&gt;\r\n    \t\t\t\t&lt;/configuration&gt;\r\n    \t\t\t&lt;/plugin&gt;\r\n    \t\t\t\r\n    \r\n    \t\t\t\r\n    \t\t\t\r\n    \t\t&lt;/plugins&gt;\r\n    \t\r\n    \t&lt;/build&gt;\r\n    \t&lt;dependencies&gt;\r\n    \t\t\t&lt;!-- Liferay dependency --&gt;    \r\n    \t\t\t&lt;dependency&gt;\r\n     \t\t\t\t &lt;groupId&gt;commons-lang&lt;/groupId&gt;\r\n     \t\t\t\t &lt;artifactId&gt;commons-lang&lt;/artifactId&gt;\r\n      \t\t\t\t&lt;version&gt;2.6&lt;/version&gt;  \t\t\t\t\r\n    &lt;/dependency&gt;\r\n    \r\n    &lt;dependency&gt;\r\n    \t&lt;groupId&gt;commons-collections&lt;/groupId&gt;\r\n    \t&lt;artifactId&gt;commons-collections&lt;/artifactId&gt;\r\n    \t&lt;version&gt;3.2.1&lt;/version&gt;\r\n    \t&lt;optional&gt;true&lt;/optional&gt;\r\n    &lt;/dependency&gt;\r\n    \r\n     &lt;dependency&gt;\r\n                &lt;groupId&gt;org.aspectj&lt;/groupId&gt;\r\n                &lt;artifactId&gt;aspectjrt&lt;/artifactId&gt;\r\n                &lt;version&gt;1.6.5&lt;/version&gt;\r\n            &lt;/dependency&gt;\r\n             &lt;!--  &lt;dependency&gt; \r\n                &lt;groupId&gt;org.springframework&lt;/groupId&gt;\r\n                &lt;artifactId&gt;spring-instrument&lt;/artifactId&gt;\r\n                &lt;version&gt;3.1.0.RELEASE&lt;/version&gt;\r\n            &lt;/dependency&gt; --&gt;\r\n            \r\n        \r\n    \r\n    \t\t\t  \r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;com.liferay.portal&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;portal-service&lt;/artifactId&gt;\r\n    \t\t\t&lt;version&gt;${liferay.version}&lt;/version&gt;\r\n    \t\t\t&lt;scope&gt;provided&lt;/scope&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;com.liferay.portal&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;util-bridges&lt;/artifactId&gt;\r\n    \t\t\t&lt;version&gt;${liferay.version}&lt;/version&gt;\r\n    \t\t\t&lt;scope&gt;provided&lt;/scope&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;com.liferay.portal&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;util-taglib&lt;/artifactId&gt;\r\n    \t\t\t&lt;version&gt;${liferay.version}&lt;/version&gt;\r\n    \t\t\t&lt;scope&gt;provided&lt;/scope&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;com.liferay.portal&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;util-java&lt;/artifactId&gt;\r\n    \t\t\t&lt;version&gt;${liferay.version}&lt;/version&gt;\r\n    \t\t\t&lt;scope&gt;provided&lt;/scope&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t\t\r\n    \t\t\t&lt;!-- Portlet/JSR dependency --&gt;      \r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;javax.portlet&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;portlet-api&lt;/artifactId&gt;\r\n    \t\t\t&lt;version&gt;2.0&lt;/version&gt;\r\n    \t\t\t&lt;scope&gt;provided&lt;/scope&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t\t\r\n    \t\t\t&lt;!-- Servlet/JSP dependency --&gt;      \r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;javax.servlet&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;servlet-api&lt;/artifactId&gt;\r\n    \t\t\t&lt;version&gt;2.4&lt;/version&gt;\r\n    \t\t\t&lt;scope&gt;provided&lt;/scope&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;javax.servlet.jsp&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;jsp-api&lt;/artifactId&gt;\r\n    \t\t\t&lt;version&gt;2.0&lt;/version&gt;\r\n    \t\t\t&lt;scope&gt;provided&lt;/scope&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;javax.servlet&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;jstl&lt;/artifactId&gt;\r\n    \t\t\t&lt;version&gt;1.2&lt;/version&gt;\r\n    \t\t\t&lt;scope&gt;runtime&lt;/scope&gt;\t\t\t\r\n    \t\t&lt;/dependency&gt; \r\n    \t\t\r\n    \t\t&lt;!-- Spring dependency --&gt;       \r\n    \t\t&lt;dependency&gt;\r\n    \t        &lt;groupId&gt;org.springframework&lt;/groupId&gt;\r\n    \t        &lt;artifactId&gt;spring-webmvc-portlet&lt;/artifactId&gt;\r\n    \t        &lt;version&gt;3.1.0.RELEASE&lt;/version&gt;\r\n    \t    &lt;/dependency&gt;    \r\n    \t\t&lt;dependency&gt;\r\n    \t        &lt;groupId&gt;org.springframework&lt;/groupId&gt;\r\n    \t        &lt;artifactId&gt;spring-core&lt;/artifactId&gt;\r\n    \t        &lt;version&gt;3.1.0.RELEASE&lt;/version&gt;\r\n    \t    &lt;/dependency&gt;\r\n    \t    &lt;dependency&gt;\r\n    \t        &lt;groupId&gt;org.springframework&lt;/groupId&gt;\r\n    \t        &lt;artifactId&gt;spring-beans&lt;/artifactId&gt;\r\n    \t        &lt;version&gt;3.1.0.RELEASE&lt;/version&gt;\r\n    \t    &lt;/dependency&gt;\r\n    \t    &lt;dependency&gt;\r\n    \t        &lt;groupId&gt;org.springframework&lt;/groupId&gt;\r\n    \t        &lt;artifactId&gt;spring-web&lt;/artifactId&gt;\r\n    \t        &lt;version&gt;3.1.0.RELEASE&lt;/version&gt;\r\n    \t    &lt;/dependency&gt;\r\n    \t    &lt;dependency&gt;\r\n    \t        &lt;groupId&gt;org.springframework&lt;/groupId&gt;\r\n    \t        &lt;artifactId&gt;spring-jdbc&lt;/artifactId&gt;\r\n    \t        &lt;version&gt;3.1.0.RELEASE&lt;/version&gt;\r\n    \t    &lt;/dependency&gt;\t    \r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;org.springframework&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;spring-orm&lt;/artifactId&gt;\r\n    \t\t\t&lt;version&gt;3.1.0.RELEASE&lt;/version&gt;\r\n    \t\t&lt;/dependency&gt; \r\n    \t\t&lt;dependency&gt;\r\n    \t\t    &lt;groupId&gt;org.springframework&lt;/groupId&gt;\r\n    \t\t    &lt;artifactId&gt;spring-tx&lt;/artifactId&gt;\r\n    \t\t    &lt;version&gt;3.1.0.RELEASE&lt;/version&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;org.springframework&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;spring-aspects&lt;/artifactId&gt;\r\n    \t\t\t&lt;version&gt;3.1.0.RELEASE&lt;/version&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t&lt;groupId&gt;org.springframework&lt;/groupId&gt;\r\n    \t&lt;artifactId&gt;spring-agent&lt;/artifactId&gt;\r\n    \t&lt;version&gt;2.5.6&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n    \t\t\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;org.aspectj&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;aspectjweaver&lt;/artifactId&gt;\r\n    \t\t\t&lt;version&gt;1.6.12&lt;/version&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t    &lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;cglib&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;cglib-nodep&lt;/artifactId&gt;\r\n    \t\t\t&lt;version&gt;2.2.2&lt;/version&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;commons-fileupload&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;commons-fileupload&lt;/artifactId&gt;\r\n    \t\t\t&lt;version&gt;1.3&lt;/version&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t\t\r\n    \t\t&lt;!-- Log4j configuration --&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;log4j&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;log4j&lt;/artifactId&gt;\r\n    \t\t\t&lt;version&gt;1.2.16&lt;/version&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;org.slf4j&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;slf4j-log4j12&lt;/artifactId&gt;\r\n    \t\t\t&lt;version&gt;1.4.2&lt;/version&gt;\r\n    \t\t&lt;/dependency&gt; \r\n    \t\t\r\n    \t\t&lt;!-- Unit testing --&gt;\t\t\r\n    \t    &lt;dependency&gt;  \r\n    \t        &lt;groupId&gt;org.mockito&lt;/groupId&gt;  \r\n    \t        &lt;artifactId&gt;mockito-all&lt;/artifactId&gt;  \r\n    \t        &lt;version&gt;1.9.5&lt;/version&gt;  \r\n    \t    &lt;/dependency&gt;  \r\n    \t    &lt;dependency&gt;  \r\n    \t        &lt;groupId&gt;junit&lt;/groupId&gt;  \r\n    \t        &lt;artifactId&gt;junit&lt;/artifactId&gt;  \r\n    \t        &lt;version&gt;4.11&lt;/version&gt;  \r\n    \t    &lt;/dependency&gt;\t\r\n    \t    \r\n    \t     &lt;!-- Data Service dependency --&gt;\r\n    \t    &lt;dependency&gt;\r\n    \t    \t&lt;groupId&gt;com.mynewproject.components&lt;/groupId&gt;\r\n    \t    \t&lt;artifactId&gt;abc-mynewproject-service&lt;/artifactId&gt;\r\n    \t    \t&lt;version&gt;2.0-SNAPSHOT&lt;/version&gt;\r\n    \t    &lt;/dependency&gt;\r\n    \t\r\n    \t    &lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;com.mynewproject.components&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;emailcomponent&lt;/artifactId&gt;\r\n    \t\t\t&lt;version&gt;2.0-SNAPSHOT&lt;/version&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t\r\n    \t&lt;/dependencies&gt;\r\n    \t\r\n    \t\r\n    \t\r\n    &lt;profiles&gt;\r\n    &lt;profile&gt;\r\n    \t&lt;id&gt;Liferay-v6.2-EE-(Tomcat-7)&lt;/id&gt;\r\n    \t&lt;properties&gt;\r\n    \t\t&lt;liferay.version&gt;6.2.2&lt;/liferay.version&gt;\r\n    \t\t&lt;liferay.maven.plugin.version&gt;7.0.0-m2&lt;/liferay.maven.plugin.version&gt;\r\n    \t\t&lt;liferay.auto.deploy.dir&gt;..\\Liferay Portal\\liferay-portal-6.2.10.1-ee-ga1\\deploy&lt;/liferay.auto.deploy.dir&gt;\r\n    \t\t&lt;liferay.app.server.deploy.dir&gt;..\\Liferay Portal\\liferay-portal-6.2.10.1-ee-ga1\\tomcat-7.0.42\\webapps&lt;/liferay.app.server.deploy.dir&gt;\r\n    \t\t&lt;liferay.app.server.lib.global.dir&gt;..\\Liferay Portal\\liferay-portal-6.2.10.1-ee-ga1\\tomcat-7.0.42\\lib\\ext&lt;/liferay.app.server.lib.global.dir&gt;\r\n    \t\t&lt;liferay.app.server.portal.dir&gt;..\\Liferay Portal\\liferay-portal-6.2.10.1-ee-ga1\\tomcat-7.0.42\\webapps\\ROOT&lt;/liferay.app.server.portal.dir&gt;\r\n    \t&lt;/properties&gt;\r\n    \t&lt;/profile&gt;\r\n    \r\n    &lt;/profiles&gt;\r\n    &lt;/project&gt;\r\n\r\nBut while i perform a build i get the below error:\r\n\r\n&gt; [ERROR] Failed to execute goal\r\n&gt; com.liferay.maven.plugins:liferay-maven-plugin:6.2.1:build-css\r\n&gt; (default) on project myNewProject: null: MojoExecutionException:\r\n&gt; NullPointerException -&gt; [Help 1]\r\n&gt; \r\n&gt; org.apache.maven.lifecycle.LifecycleExecutionException: Failed to\r\n&gt; execute goal\r\n&gt; com.liferay.maven.plugins:liferay-maven-plugin:6.2.1:build-css\r\n&gt; (default) on project myNewProject: null\r\n&gt;         at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:216)\r\n&gt;         at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:153)\r\n&gt;         at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:145)\r\n&gt;         at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject(LifecycleModuleBuilder.java:108)\r\n&gt;         at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject(LifecycleModuleBuilder.java:76)\r\n&gt;         at org.apache.maven.lifecycle.internal.builder.singlethreaded.SingleThreadedBuilder.build(SingleThreadedBuilder.java:51)\r\n&gt;         at org.apache.maven.lifecycle.internal.LifecycleStarter.execute(LifecycleStarter.java:116)\r\n&gt;         at org.apache.maven.DefaultMaven.doExecute(DefaultMaven.java:361)\r\n\r\nMy questions are:\r\n\r\nWhat is it causing a null pointer exception while i am performing the build?","title":"MojoExecutionException while doing a build - Maven","body":"<p>Below is the goals that i have included while building maven project in my pom.</p>\n\n<pre><code>&lt;?xml version=\"1.0\"?&gt; \n\n&lt;project xmlns=\"http://maven.apache.org/POM/4.0.0\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xsi:schemaLocation=\"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd\"&gt;\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n    &lt;groupId&gt;com.mynewproject.portlet&lt;/groupId&gt;\n    &lt;artifactId&gt;abc-myfacts-portlet&lt;/artifactId&gt;\n    &lt;packaging&gt;war&lt;/packaging&gt;\n    &lt;name&gt;ABC MY FACTS Portlet&lt;/name&gt;\n    &lt;version&gt;2.0-SNAPSHOT&lt;/version&gt;\n    &lt;build&gt;\n        &lt;plugins&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;com.liferay.maven.plugins&lt;/groupId&gt;\n                &lt;artifactId&gt;liferay-maven-plugin&lt;/artifactId&gt;\n                &lt;version&gt;${liferay.maven.plugin.version}&lt;/version&gt;\n                &lt;executions&gt;\n                    &lt;execution&gt;\n                        &lt;phase&gt;generate-sources&lt;/phase&gt;\n                        &lt;goals&gt;\n                            &lt;goal&gt;build-css&lt;/goal&gt;\n                        &lt;/goals&gt;\n                    &lt;/execution&gt;\n                &lt;/executions&gt;\n                &lt;configuration&gt;\n                    &lt;autoDeployDir&gt;${liferay.auto.deploy.dir}&lt;/autoDeployDir&gt;\n                    &lt;appServerDeployDir&gt;${liferay.app.server.deploy.dir}&lt;/appServerDeployDir&gt;\n                    &lt;appServerLibGlobalDir&gt;${liferay.app.server.lib.global.dir}&lt;/appServerLibGlobalDir&gt;\n                    &lt;appServerPortalDir&gt;${liferay.app.server.portal.dir}&lt;/appServerPortalDir&gt;\n                    &lt;liferayVersion&gt;${liferay.version}&lt;/liferayVersion&gt;\n                    &lt;pluginType&gt;portlet&lt;/pluginType&gt;\n                &lt;/configuration&gt;\n            &lt;/plugin&gt;\n            &lt;plugin&gt;\n                &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\n                &lt;version&gt;2.5&lt;/version&gt;\n                &lt;configuration&gt;\n                    &lt;encoding&gt;UTF-8&lt;/encoding&gt;\n                    &lt;source&gt;1.6&lt;/source&gt;\n                    &lt;target&gt;1.6&lt;/target&gt;\n                &lt;/configuration&gt;\n            &lt;/plugin&gt;\n            &lt;plugin&gt;\n                &lt;artifactId&gt;maven-resources-plugin&lt;/artifactId&gt;\n                &lt;version&gt;2.5&lt;/version&gt;\n                &lt;configuration&gt;\n                    &lt;encoding&gt;UTF-8&lt;/encoding&gt;\n                &lt;/configuration&gt;\n            &lt;/plugin&gt;\n\n\n\n\n        &lt;/plugins&gt;\n\n    &lt;/build&gt;\n    &lt;dependencies&gt;\n            &lt;!-- Liferay dependency --&gt;    \n            &lt;dependency&gt;\n                 &lt;groupId&gt;commons-lang&lt;/groupId&gt;\n                 &lt;artifactId&gt;commons-lang&lt;/artifactId&gt;\n                &lt;version&gt;2.6&lt;/version&gt;                  \n&lt;/dependency&gt;\n\n&lt;dependency&gt;\n    &lt;groupId&gt;commons-collections&lt;/groupId&gt;\n    &lt;artifactId&gt;commons-collections&lt;/artifactId&gt;\n    &lt;version&gt;3.2.1&lt;/version&gt;\n    &lt;optional&gt;true&lt;/optional&gt;\n&lt;/dependency&gt;\n\n &lt;dependency&gt;\n            &lt;groupId&gt;org.aspectj&lt;/groupId&gt;\n            &lt;artifactId&gt;aspectjrt&lt;/artifactId&gt;\n            &lt;version&gt;1.6.5&lt;/version&gt;\n        &lt;/dependency&gt;\n         &lt;!--  &lt;dependency&gt; \n            &lt;groupId&gt;org.springframework&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-instrument&lt;/artifactId&gt;\n            &lt;version&gt;3.1.0.RELEASE&lt;/version&gt;\n        &lt;/dependency&gt; --&gt;\n\n\n\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.liferay.portal&lt;/groupId&gt;\n            &lt;artifactId&gt;portal-service&lt;/artifactId&gt;\n            &lt;version&gt;${liferay.version}&lt;/version&gt;\n            &lt;scope&gt;provided&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.liferay.portal&lt;/groupId&gt;\n            &lt;artifactId&gt;util-bridges&lt;/artifactId&gt;\n            &lt;version&gt;${liferay.version}&lt;/version&gt;\n            &lt;scope&gt;provided&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.liferay.portal&lt;/groupId&gt;\n            &lt;artifactId&gt;util-taglib&lt;/artifactId&gt;\n            &lt;version&gt;${liferay.version}&lt;/version&gt;\n            &lt;scope&gt;provided&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.liferay.portal&lt;/groupId&gt;\n            &lt;artifactId&gt;util-java&lt;/artifactId&gt;\n            &lt;version&gt;${liferay.version}&lt;/version&gt;\n            &lt;scope&gt;provided&lt;/scope&gt;\n        &lt;/dependency&gt;\n\n            &lt;!-- Portlet/JSR dependency --&gt;      \n        &lt;dependency&gt;\n            &lt;groupId&gt;javax.portlet&lt;/groupId&gt;\n            &lt;artifactId&gt;portlet-api&lt;/artifactId&gt;\n            &lt;version&gt;2.0&lt;/version&gt;\n            &lt;scope&gt;provided&lt;/scope&gt;\n        &lt;/dependency&gt;\n\n            &lt;!-- Servlet/JSP dependency --&gt;      \n        &lt;dependency&gt;\n            &lt;groupId&gt;javax.servlet&lt;/groupId&gt;\n            &lt;artifactId&gt;servlet-api&lt;/artifactId&gt;\n            &lt;version&gt;2.4&lt;/version&gt;\n            &lt;scope&gt;provided&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;javax.servlet.jsp&lt;/groupId&gt;\n            &lt;artifactId&gt;jsp-api&lt;/artifactId&gt;\n            &lt;version&gt;2.0&lt;/version&gt;\n            &lt;scope&gt;provided&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;javax.servlet&lt;/groupId&gt;\n            &lt;artifactId&gt;jstl&lt;/artifactId&gt;\n            &lt;version&gt;1.2&lt;/version&gt;\n            &lt;scope&gt;runtime&lt;/scope&gt;          \n        &lt;/dependency&gt; \n\n        &lt;!-- Spring dependency --&gt;       \n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-webmvc-portlet&lt;/artifactId&gt;\n            &lt;version&gt;3.1.0.RELEASE&lt;/version&gt;\n        &lt;/dependency&gt;    \n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-core&lt;/artifactId&gt;\n            &lt;version&gt;3.1.0.RELEASE&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-beans&lt;/artifactId&gt;\n            &lt;version&gt;3.1.0.RELEASE&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-web&lt;/artifactId&gt;\n            &lt;version&gt;3.1.0.RELEASE&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-jdbc&lt;/artifactId&gt;\n            &lt;version&gt;3.1.0.RELEASE&lt;/version&gt;\n        &lt;/dependency&gt;       \n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-orm&lt;/artifactId&gt;\n            &lt;version&gt;3.1.0.RELEASE&lt;/version&gt;\n        &lt;/dependency&gt; \n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-tx&lt;/artifactId&gt;\n            &lt;version&gt;3.1.0.RELEASE&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-aspects&lt;/artifactId&gt;\n            &lt;version&gt;3.1.0.RELEASE&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n    &lt;groupId&gt;org.springframework&lt;/groupId&gt;\n    &lt;artifactId&gt;spring-agent&lt;/artifactId&gt;\n    &lt;version&gt;2.5.6&lt;/version&gt;\n&lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.aspectj&lt;/groupId&gt;\n            &lt;artifactId&gt;aspectjweaver&lt;/artifactId&gt;\n            &lt;version&gt;1.6.12&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;cglib&lt;/groupId&gt;\n            &lt;artifactId&gt;cglib-nodep&lt;/artifactId&gt;\n            &lt;version&gt;2.2.2&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;commons-fileupload&lt;/groupId&gt;\n            &lt;artifactId&gt;commons-fileupload&lt;/artifactId&gt;\n            &lt;version&gt;1.3&lt;/version&gt;\n        &lt;/dependency&gt;\n\n        &lt;!-- Log4j configuration --&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;log4j&lt;/groupId&gt;\n            &lt;artifactId&gt;log4j&lt;/artifactId&gt;\n            &lt;version&gt;1.2.16&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.slf4j&lt;/groupId&gt;\n            &lt;artifactId&gt;slf4j-log4j12&lt;/artifactId&gt;\n            &lt;version&gt;1.4.2&lt;/version&gt;\n        &lt;/dependency&gt; \n\n        &lt;!-- Unit testing --&gt;       \n        &lt;dependency&gt;  \n            &lt;groupId&gt;org.mockito&lt;/groupId&gt;  \n            &lt;artifactId&gt;mockito-all&lt;/artifactId&gt;  \n            &lt;version&gt;1.9.5&lt;/version&gt;  \n        &lt;/dependency&gt;  \n        &lt;dependency&gt;  \n            &lt;groupId&gt;junit&lt;/groupId&gt;  \n            &lt;artifactId&gt;junit&lt;/artifactId&gt;  \n            &lt;version&gt;4.11&lt;/version&gt;  \n        &lt;/dependency&gt;   \n\n         &lt;!-- Data Service dependency --&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.mynewproject.components&lt;/groupId&gt;\n            &lt;artifactId&gt;abc-mynewproject-service&lt;/artifactId&gt;\n            &lt;version&gt;2.0-SNAPSHOT&lt;/version&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.mynewproject.components&lt;/groupId&gt;\n            &lt;artifactId&gt;emailcomponent&lt;/artifactId&gt;\n            &lt;version&gt;2.0-SNAPSHOT&lt;/version&gt;\n        &lt;/dependency&gt;\n\n    &lt;/dependencies&gt;\n\n\n\n&lt;profiles&gt;\n&lt;profile&gt;\n    &lt;id&gt;Liferay-v6.2-EE-(Tomcat-7)&lt;/id&gt;\n    &lt;properties&gt;\n        &lt;liferay.version&gt;6.2.2&lt;/liferay.version&gt;\n        &lt;liferay.maven.plugin.version&gt;7.0.0-m2&lt;/liferay.maven.plugin.version&gt;\n        &lt;liferay.auto.deploy.dir&gt;..\\Liferay Portal\\liferay-portal-6.2.10.1-ee-ga1\\deploy&lt;/liferay.auto.deploy.dir&gt;\n        &lt;liferay.app.server.deploy.dir&gt;..\\Liferay Portal\\liferay-portal-6.2.10.1-ee-ga1\\tomcat-7.0.42\\webapps&lt;/liferay.app.server.deploy.dir&gt;\n        &lt;liferay.app.server.lib.global.dir&gt;..\\Liferay Portal\\liferay-portal-6.2.10.1-ee-ga1\\tomcat-7.0.42\\lib\\ext&lt;/liferay.app.server.lib.global.dir&gt;\n        &lt;liferay.app.server.portal.dir&gt;..\\Liferay Portal\\liferay-portal-6.2.10.1-ee-ga1\\tomcat-7.0.42\\webapps\\ROOT&lt;/liferay.app.server.portal.dir&gt;\n    &lt;/properties&gt;\n    &lt;/profile&gt;\n\n&lt;/profiles&gt;\n&lt;/project&gt;\n</code></pre>\n\n<p>But while i perform a build i get the below error:</p>\n\n<blockquote>\n  <p>[ERROR] Failed to execute goal\n  com.liferay.maven.plugins:liferay-maven-plugin:6.2.1:build-css\n  (default) on project myNewProject: null: MojoExecutionException:\n  NullPointerException -> [Help 1]</p>\n  \n  <p>org.apache.maven.lifecycle.LifecycleExecutionException: Failed to\n  execute goal\n  com.liferay.maven.plugins:liferay-maven-plugin:6.2.1:build-css\n  (default) on project myNewProject: null\n          at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:216)\n          at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:153)\n          at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:145)\n          at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject(LifecycleModuleBuilder.java:108)\n          at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject(LifecycleModuleBuilder.java:76)\n          at org.apache.maven.lifecycle.internal.builder.singlethreaded.SingleThreadedBuilder.build(SingleThreadedBuilder.java:51)\n          at org.apache.maven.lifecycle.internal.LifecycleStarter.execute(LifecycleStarter.java:116)\n          at org.apache.maven.DefaultMaven.doExecute(DefaultMaven.java:361)</p>\n</blockquote>\n\n<p>My questions are:</p>\n\n<p>What is it causing a null pointer exception while i am performing the build?</p>\n"},{"tags":["java","spring-boot","spring-mvc","logging"],"answers":[{"tags":[],"owner":{"account_id":136251,"reputation":87506,"user_id":339637,"accept_rate":55,"display_name":"Ken Chan"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1694977130,"creation_date":1694977130,"answer_id":77123211,"question_id":77122634,"body_markdown":"You can create your own resolver that extend `ResponseStatusExceptionResolver` and override its `logException()`. If the exception is the one that you do not want to log , return it. Something likes : \r\n\r\n\r\n``` java\r\npublic class MyResponseStatusExceptionResolver extends ResponseStatusExceptionResolver {\r\n\r\n    @Override\r\n    protected void logException(Exception ex, HttpServletRequest request) {\r\n        if (ex instanceof EntityNotFoundException) {\r\n            return;\r\n        }\r\n        super.logException(ex, request);\r\n    }\r\n}\r\n\r\n```\r\n\r\nThen configure to use it :\r\n\r\n``` java\r\n@Configuration\r\npublic class WebConfig implements WebMvcConfigurer {\r\n\r\n    @Autowired\r\n    private ApplicationContext context;\r\n\r\n    @Override\r\n    public void extendHandlerExceptionResolvers(List&lt;HandlerExceptionResolver&gt; resolvers) {\r\n        var myResolver = new MyResponseStatusExceptionResolver();\r\n        myResolver.setMessageSource(context);\r\n        myResolver.setWarnLogCategory(myResolver.getClass().getName());\r\n        resolvers.add(0, myResponseStatusExceptionResolver);\r\n    }\r\n}\r\n```\r\n\r\nThe idea is the you put this customized exception resolver into the first position of the default exception resolver list such that it will always use it to resolve the exception before the default `ResponseStatusExceptionResolver`.\r\n\r\n\r\nPlease note that you must set the logging level of the customised exception resolver to WARN in order to have the exception logging behaviour that you want. ","title":"ResponseStatusExceptionResolver custom logging","body":"<p>You can create your own resolver that extend <code>ResponseStatusExceptionResolver</code> and override its <code>logException()</code>. If the exception is the one that you do not want to log , return it. Something likes :</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class MyResponseStatusExceptionResolver extends ResponseStatusExceptionResolver {\n\n    @Override\n    protected void logException(Exception ex, HttpServletRequest request) {\n        if (ex instanceof EntityNotFoundException) {\n            return;\n        }\n        super.logException(ex, request);\n    }\n}\n\n</code></pre>\n<p>Then configure to use it :</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Configuration\npublic class WebConfig implements WebMvcConfigurer {\n\n    @Autowired\n    private ApplicationContext context;\n\n    @Override\n    public void extendHandlerExceptionResolvers(List&lt;HandlerExceptionResolver&gt; resolvers) {\n        var myResolver = new MyResponseStatusExceptionResolver();\n        myResolver.setMessageSource(context);\n        myResolver.setWarnLogCategory(myResolver.getClass().getName());\n        resolvers.add(0, myResponseStatusExceptionResolver);\n    }\n}\n</code></pre>\n<p>The idea is the you put this customized exception resolver into the first position of the default exception resolver list such that it will always use it to resolve the exception before the default <code>ResponseStatusExceptionResolver</code>.</p>\n<p>Please note that you must set the logging level of the customised exception resolver to WARN in order to have the exception logging behaviour that you want.</p>\n"}],"owner":{"account_id":16435976,"reputation":162,"user_id":11873562,"display_name":"IceMajor"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":69,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":77123211,"answer_count":1,"score":0,"last_activity_date":1694977348,"creation_date":1694966605,"question_id":77122634,"body_markdown":"Whenever I make some kind of requests to my API, then Spring Boot logs exceptions, if they were thrown. I&#39;d like to tweak that a little bit.\r\n\r\nFor example, when I make a request `GET /api/entity/100` and there&#39;s no entity of id 100, then - in the service layer - I&#39;ll throw an exception `EntityNotFoundException` with some message and HTTP code.\r\n\r\nThe problem is that I do not want it logged in the console because it quickly makes it look like trash and spam. The log will look something like this: `WARN 15512 --- [nio-8433-exec-3] .w.s.m.a.ResponseStatusExceptionResolver : Resolved [com.demo.mydomain.exceptions.classes.entity.EntityNotFoundException: Unable to find entity of &#39;100&#39; id]`.\r\n\r\nObviously I can disable that by, for instance, adding this property `spring.mvc.log-resolved-exception=false`. However, this disables all the logs of `ResponseStatusExceptionResolver` and I&#39;d like to maintain logging some other exceptions, like `AccessDeniedException`.","title":"ResponseStatusExceptionResolver custom logging","body":"<p>Whenever I make some kind of requests to my API, then Spring Boot logs exceptions, if they were thrown. I'd like to tweak that a little bit.</p>\n<p>For example, when I make a request <code>GET /api/entity/100</code> and there's no entity of id 100, then - in the service layer - I'll throw an exception <code>EntityNotFoundException</code> with some message and HTTP code.</p>\n<p>The problem is that I do not want it logged in the console because it quickly makes it look like trash and spam. The log will look something like this: <code>WARN 15512 --- [nio-8433-exec-3] .w.s.m.a.ResponseStatusExceptionResolver : Resolved [com.demo.mydomain.exceptions.classes.entity.EntityNotFoundException: Unable to find entity of '100' id]</code>.</p>\n<p>Obviously I can disable that by, for instance, adding this property <code>spring.mvc.log-resolved-exception=false</code>. However, this disables all the logs of <code>ResponseStatusExceptionResolver</code> and I'd like to maintain logging some other exceptions, like <code>AccessDeniedException</code>.</p>\n"},{"tags":["java","spring","spring-boot"],"answers":[{"tags":[],"owner":{"account_id":1023013,"reputation":16655,"user_id":1032890,"accept_rate":100,"display_name":"GeertPt"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1587037745,"creation_date":1587036639,"answer_id":61249156,"question_id":61248736,"body_markdown":"A couple of points.\r\n\r\n - SpringApplication.run(Application.class, args) will scan all classes in the same package or below of Application.class, initialize all beans in the applicationContext and dispatch application events.\r\n - Classes with @Configuration on are meant to define beans. Beans will be reordered to allow dependencies between beans, and each bean will be initialized using its @Bean-annotated method.\r\n - The @EnableBatchProcessing only needs to be on one @Configuration class. It will auto-configure more beans that you can use as dependencies, like the jobBuilderFactory and stepBuilderFactory, and a jobLauncher. The jobLauncher will have dependencies on all beans of type &#39;Job&#39;, so it will be initialized last.\r\n - Each bean can listen for applicationEvents by implementing a certain interface, and define a response for that. The jobLauncher will listen for the &#39;application started&#39; event and respond by executing all its jobs, either on the main thread, or using a thread pool if that was defined.\r\n\r\nSee  [BatchAutoConfiguration][1] on how you can configure the behaviour of the auto-configured beans.\r\n\r\n\r\n  [1]: https://docs.spring.io/spring-boot/docs/current/api/org/springframework/boot/autoconfigure/batch/BatchAutoConfiguration.html","title":"Execution process in Spring boot","body":"<p>A couple of points.</p>\n\n<ul>\n<li>SpringApplication.run(Application.class, args) will scan all classes in the same package or below of Application.class, initialize all beans in the applicationContext and dispatch application events.</li>\n<li>Classes with @Configuration on are meant to define beans. Beans will be reordered to allow dependencies between beans, and each bean will be initialized using its @Bean-annotated method.</li>\n<li>The @EnableBatchProcessing only needs to be on one @Configuration class. It will auto-configure more beans that you can use as dependencies, like the jobBuilderFactory and stepBuilderFactory, and a jobLauncher. The jobLauncher will have dependencies on all beans of type 'Job', so it will be initialized last.</li>\n<li>Each bean can listen for applicationEvents by implementing a certain interface, and define a response for that. The jobLauncher will listen for the 'application started' event and respond by executing all its jobs, either on the main thread, or using a thread pool if that was defined.</li>\n</ul>\n\n<p>See  <a href=\"https://docs.spring.io/spring-boot/docs/current/api/org/springframework/boot/autoconfigure/batch/BatchAutoConfiguration.html\" rel=\"nofollow noreferrer\">BatchAutoConfiguration</a> on how you can configure the behaviour of the auto-configured beans.</p>\n"},{"tags":[],"owner":{"account_id":29465521,"reputation":26,"user_id":22579278,"display_name":"Poojitha_naidu"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1694976212,"creation_date":1694952277,"answer_id":77121700,"question_id":61248736,"body_markdown":" - After creation of Spring starter project, we get a main class which contains @SpringBootApplication, under that class we have SpringApplication.run(Application.class, args). This is called Run method. \r\n - When we go inside the run method, It internally creates the object of Spring application and it calls internally Run method. \r\n - If we use debug pointer there, we can see the logic. This logic will execute the spring application whenever we run. \r\n - In the run method, we have Stopwatch to identify the time taken by our spring boot application. After starting the Stopwatch, it will call getRunListeners(args) to listen the listeners in main method. \r\n - After that we have a prepared environment by listeners. And it will print the Spring banner. \r\n - After that it creates ApplicationContext.(Run method internally creates ApplicationContext). \r\n - Then Run method refreshes the context and stops the Stopwatch. Then it will internally call the Runners. There are two types of runners, ApplicationRunner and CommandLineRunner. It will trigger and returns the context. \r\n","title":"Execution process in Spring boot","body":"<ul>\n<li>After creation of Spring starter project, we get a main class which contains @SpringBootApplication, under that class we have SpringApplication.run(Application.class, args). This is called Run method.</li>\n<li>When we go inside the run method, It internally creates the object of Spring application and it calls internally Run method.</li>\n<li>If we use debug pointer there, we can see the logic. This logic will execute the spring application whenever we run.</li>\n<li>In the run method, we have Stopwatch to identify the time taken by our spring boot application. After starting the Stopwatch, it will call getRunListeners(args) to listen the listeners in main method.</li>\n<li>After that we have a prepared environment by listeners. And it will print the Spring banner.</li>\n<li>After that it creates ApplicationContext.(Run method internally creates ApplicationContext).</li>\n<li>Then Run method refreshes the context and stops the Stopwatch. Then it will internally call the Runners. There are two types of runners, ApplicationRunner and CommandLineRunner. It will trigger and returns the context.</li>\n</ul>\n"}],"owner":{"account_id":17739799,"reputation":528,"user_id":12880432,"display_name":"Maria"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1338,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":77121700,"answer_count":2,"score":0,"last_activity_date":1694976212,"creation_date":1587035320,"question_id":61248736,"body_markdown":"New to spring-boot, checked online examples. Got one doubt.\r\n\r\nMain calling class\r\n\r\n    @SpringBootApplication\r\n    public class Application {\r\n    \r\n    \tpublic static void main(String[] args) throws Exception {\r\n    \t\tSpringApplication.run(Application.class, args);\r\n    \t}\r\n    }\r\n\r\n\r\nBatch Processing class\r\n\r\n    @Configuration\r\n    @EnableBatchProcessing\r\n    public class BatchConfiguration {\r\n    \r\n    \t@Autowired\r\n    \tpublic JobBuilderFactory jobBuilderFactory;\r\n    \r\n    \t@Autowired\r\n    \tpublic StepBuilderFactory stepBuilderFactory;\r\n    \r\n      --\r\n      --\r\n      so on\r\n    \r\n    }\r\n\r\n\r\n`SpringApplication.run(Application.class, args)` creates an appropriate ApplicationContext instance and load beans. \r\n\r\nI was trying to figure out that, what&#39;s a flow of code (step wise execution). Then after setting up logger at different places, figure out that `BatchConfiguration` class methods are getting executed in sequence, and it covers the execution of whole code too.\r\n\r\nChecked this class, its headed with these two tags `@Configuration, @EnableBatchProcessing`. Is it correct understanding that, once `SpringApplication.run` is completed, spring-boot looks for class having `@Configuration, @EnableBatchProcessing` tags on it and process everything from there ? Is it a driver class ? \r\n\r\nIf above understanding is correct, how many of classes of this type (`BatchConfiguration`) we can have in one spring-boot application ? If more than one, than what would be the flow then ?\r\n\r\n\r\n","title":"Execution process in Spring boot","body":"<p>New to spring-boot, checked online examples. Got one doubt.</p>\n\n<p>Main calling class</p>\n\n<pre><code>@SpringBootApplication\npublic class Application {\n\n    public static void main(String[] args) throws Exception {\n        SpringApplication.run(Application.class, args);\n    }\n}\n</code></pre>\n\n<p>Batch Processing class</p>\n\n<pre><code>@Configuration\n@EnableBatchProcessing\npublic class BatchConfiguration {\n\n    @Autowired\n    public JobBuilderFactory jobBuilderFactory;\n\n    @Autowired\n    public StepBuilderFactory stepBuilderFactory;\n\n  --\n  --\n  so on\n\n}\n</code></pre>\n\n<p><code>SpringApplication.run(Application.class, args)</code> creates an appropriate ApplicationContext instance and load beans. </p>\n\n<p>I was trying to figure out that, what's a flow of code (step wise execution). Then after setting up logger at different places, figure out that <code>BatchConfiguration</code> class methods are getting executed in sequence, and it covers the execution of whole code too.</p>\n\n<p>Checked this class, its headed with these two tags <code>@Configuration, @EnableBatchProcessing</code>. Is it correct understanding that, once <code>SpringApplication.run</code> is completed, spring-boot looks for class having <code>@Configuration, @EnableBatchProcessing</code> tags on it and process everything from there ? Is it a driver class ? </p>\n\n<p>If above understanding is correct, how many of classes of this type (<code>BatchConfiguration</code>) we can have in one spring-boot application ? If more than one, than what would be the flow then ?</p>\n"},{"tags":["java","open-telemetry"],"answers":[{"tags":[],"owner":{"account_id":29440053,"reputation":89,"user_id":22558282,"display_name":"Dave"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1694975463,"creation_date":1694975463,"answer_id":77123126,"question_id":77123100,"body_markdown":"Let&#39;s see if this can help you,\r\nSpanKind in OpenTelemetry: SpanKind in OpenTelemetry is an attribute associated with a span that indicates the nature of the span. Spans can be of two primary types: SpanKind.SERVER and SpanKind.CLIENT, which are used to represent incoming and outgoing requests, respectively. Using SpanKind helps clearly distinguish whether a span represents an incoming or outgoing request. Spans in OpenTelemetry are often accompanied by labels that provide additional information.\r\n\r\nRoot Span: The root span is the top-level span in a trace tree and represents the beginning of a trace. Usually, the root span is created in the main application or at the top of a call hierarchy. Creating the root span is crucial because all other spans within a trace are direct children or descendants of the root span. There&#39;s nothing particularly special about creating a root span, but it&#39;s essential to do so at the beginning of processing a request or transaction.\r\n\r\nOrder of Span Termination: The order in which spans are terminated is important to accurately establish the duration and temporal relationships between spans. In your scenario, A should finish its span before B or C begin processing. This is important to ensure that timings are correct in the trace. You can do this by using the end() method on spans, as you mentioned. Make sure to end one span before starting another to correctly represent the temporal order of operations.\r\n\r\nRegarding your custom binary UDP protocol and trace context propagation, you&#39;ll need to implement custom trace context propagation through your services based on the protocol you use for UDP communication. Additionally, you&#39;ll need to ensure that each service has an OpenTelemetry library configured to collect telemetry data and propagate trace context correctly.","title":"OpenTelemetry with fan out and custom protocol","body":"<p>Let's see if this can help you,\nSpanKind in OpenTelemetry: SpanKind in OpenTelemetry is an attribute associated with a span that indicates the nature of the span. Spans can be of two primary types: SpanKind.SERVER and SpanKind.CLIENT, which are used to represent incoming and outgoing requests, respectively. Using SpanKind helps clearly distinguish whether a span represents an incoming or outgoing request. Spans in OpenTelemetry are often accompanied by labels that provide additional information.</p>\n<p>Root Span: The root span is the top-level span in a trace tree and represents the beginning of a trace. Usually, the root span is created in the main application or at the top of a call hierarchy. Creating the root span is crucial because all other spans within a trace are direct children or descendants of the root span. There's nothing particularly special about creating a root span, but it's essential to do so at the beginning of processing a request or transaction.</p>\n<p>Order of Span Termination: The order in which spans are terminated is important to accurately establish the duration and temporal relationships between spans. In your scenario, A should finish its span before B or C begin processing. This is important to ensure that timings are correct in the trace. You can do this by using the end() method on spans, as you mentioned. Make sure to end one span before starting another to correctly represent the temporal order of operations.</p>\n<p>Regarding your custom binary UDP protocol and trace context propagation, you'll need to implement custom trace context propagation through your services based on the protocol you use for UDP communication. Additionally, you'll need to ensure that each service has an OpenTelemetry library configured to collect telemetry data and propagate trace context correctly.</p>\n"}],"owner":{"account_id":19466002,"reputation":445,"user_id":14239262,"display_name":"eof"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":52,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":77123126,"answer_count":1,"score":0,"last_activity_date":1694976089,"creation_date":1694975056,"question_id":77123100,"body_markdown":"I&#39;m completely new to OpenTelemetry and trying to figure out some things. Assume I have a chain of services:\r\n\r\n    A ----&gt; B ----&gt; C\r\n\r\nThe services communicate with each other over a custom binary UDP protocol. There&#39;s also a fan out step at B to C and all processing is asynchronous, so A won&#39;t wait for B to process the data it gets and the same applies to C. I can embed trace IDs in the data, so I&#39;m able to use a propagator to propagate a trace context.\r\n\r\nNow my questions:\r\n\r\n1. Is the `SpanKind` of a span just a label or does it actually change the semantics of a span?\r\n1. Since the processing tree starts at A we must create the root span at A. Is the root span somehow special to create? I&#39;m currently just doing `tracer.spanBuilder(&quot;foo&quot;).startSpan()`\r\n2. A must call `end()` on the span it creates before B or C starts processing. The subspan of B must also call end before C starts processing. Will this cause any problem or do I just need to set the correct `SpanKind`?","title":"OpenTelemetry with fan out and custom protocol","body":"<p>I'm completely new to OpenTelemetry and trying to figure out some things. Assume I have a chain of services:</p>\n<pre><code>A ----&gt; B ----&gt; C\n</code></pre>\n<p>The services communicate with each other over a custom binary UDP protocol. There's also a fan out step at B to C and all processing is asynchronous, so A won't wait for B to process the data it gets and the same applies to C. I can embed trace IDs in the data, so I'm able to use a propagator to propagate a trace context.</p>\n<p>Now my questions:</p>\n<ol>\n<li>Is the <code>SpanKind</code> of a span just a label or does it actually change the semantics of a span?</li>\n<li>Since the processing tree starts at A we must create the root span at A. Is the root span somehow special to create? I'm currently just doing <code>tracer.spanBuilder(&quot;foo&quot;).startSpan()</code></li>\n<li>A must call <code>end()</code> on the span it creates before B or C starts processing. The subspan of B must also call end before C starts processing. Will this cause any problem or do I just need to set the correct <code>SpanKind</code>?</li>\n</ol>\n"},{"tags":["java","spring-boot","spring-mvc","spring-security","audit"],"answers":[{"tags":[],"owner":{"account_id":28330620,"reputation":58,"user_id":21664963,"display_name":"bdev"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1694975834,"creation_date":1694975834,"answer_id":77123144,"question_id":77120086,"body_markdown":"One way to achieve this would be to use a ThreadLocal to keep the JWT token. The ThreadLocal variable can be created inside a filter and then store the token inside the variable.\r\n\r\nThis link has a similar answer but for RestTemplate,\r\nhttps://stackoverflow.com/questions/46729203/propagate-http-header-jwt-token-over-services-using-spring-rest-template\r\n\r\n","title":"Where to inject custom audit service in a spring boot application","body":"<p>One way to achieve this would be to use a ThreadLocal to keep the JWT token. The ThreadLocal variable can be created inside a filter and then store the token inside the variable.</p>\n<p>This link has a similar answer but for RestTemplate,\n<a href=\"https://stackoverflow.com/questions/46729203/propagate-http-header-jwt-token-over-services-using-spring-rest-template\">Propagate HTTP header (JWT Token) over services using spring rest template</a></p>\n"}],"owner":{"account_id":26653555,"reputation":1,"user_id":20267470,"display_name":"martin"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":74,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1694975834,"creation_date":1694910952,"question_id":77120086,"body_markdown":"I have a multi-module spring boot app, and every module has a dependency on an audit service (which is defined in a &#39;helper&#39; module, only has a method called audit() and all it actually does is calling another application with WebClient, sending some data about the current user).\r\n\r\nCurrently, it is being injected into each module&#39;s service class and it just sends some hardcoded data (because the authentication wasn&#39;t ready yet), but now I need to extract the user info (from the OAuth JWT claims) and actually pass that along with the token to make an authenticated request to the audit application. \r\n\r\n*pseudocode of one of the modules&#39; main service*\r\n\r\n    class ActualService {\r\n        \r\n       AuditService auditSvc\r\n       ActualRepository actualRepo\r\n    \r\n       public void updateSomething(RequestDTO request, JWT authenticatedUser) {\r\n           ....doSomething()\r\n           auditSvc.audit(someHardcodedValues)\r\n       }\r\n    \r\n    }\r\n\r\nWhat would be a proper way of accomplishing this? I&#39;m thinking about injecting the audit service into each module&#39;s controller and call the audit method  (and passing it the entire JWT) after calling the actual main service method and before returning the response to the client. \r\n\r\n*like this*\r\n\r\n    class ActualController {\r\n\r\n        AuditService auditSvc\r\n        ActualService actualService\r\n    \r\n        @PutMapping\r\n        public ResponseEntity&lt;String&gt; updateSomething(RequestDTO request, JWT authenticatedUser) {\r\n           actualService.updateSomething(request, authenticatedUser)\r\n           auditSvc.audit(authenticatedUser)\r\n           return ResponseEntity.OK\r\n        } \r\n    \r\n    }\r\n\r\n\r\nBut I don&#39;t know if it&#39;s a good approach. Any sensible ideas welcome, thank you\r\n","title":"Where to inject custom audit service in a spring boot application","body":"<p>I have a multi-module spring boot app, and every module has a dependency on an audit service (which is defined in a 'helper' module, only has a method called audit() and all it actually does is calling another application with WebClient, sending some data about the current user).</p>\n<p>Currently, it is being injected into each module's service class and it just sends some hardcoded data (because the authentication wasn't ready yet), but now I need to extract the user info (from the OAuth JWT claims) and actually pass that along with the token to make an authenticated request to the audit application.</p>\n<p><em>pseudocode of one of the modules' main service</em></p>\n<pre><code>class ActualService {\n    \n   AuditService auditSvc\n   ActualRepository actualRepo\n\n   public void updateSomething(RequestDTO request, JWT authenticatedUser) {\n       ....doSomething()\n       auditSvc.audit(someHardcodedValues)\n   }\n\n}\n</code></pre>\n<p>What would be a proper way of accomplishing this? I'm thinking about injecting the audit service into each module's controller and call the audit method  (and passing it the entire JWT) after calling the actual main service method and before returning the response to the client.</p>\n<p><em>like this</em></p>\n<pre><code>class ActualController {\n\n    AuditService auditSvc\n    ActualService actualService\n\n    @PutMapping\n    public ResponseEntity&lt;String&gt; updateSomething(RequestDTO request, JWT authenticatedUser) {\n       actualService.updateSomething(request, authenticatedUser)\n       auditSvc.audit(authenticatedUser)\n       return ResponseEntity.OK\n    } \n\n}\n</code></pre>\n<p>But I don't know if it's a good approach. Any sensible ideas welcome, thank you</p>\n"},{"tags":["java","exception"],"comments":[{"owner":{"account_id":2366187,"reputation":60152,"user_id":2071828,"accept_rate":88,"display_name":"Boris the Spider"},"score":11,"creation_date":1424618307,"post_id":28659462,"comment_id":45614492,"body_markdown":"You should **never** ignore exceptions. You should **never** catch `Exception`. Either you plan to catch and handle a **specific** exception or  you cannot handle it, and let it percolate up the stack.","body":"You should <b>never</b> ignore exceptions. You should <b>never</b> catch <code>Exception</code>. Either you plan to catch and handle a <b>specific</b> exception or  you cannot handle it, and let it percolate up the stack."},{"owner":{"account_id":3264778,"reputation":2635,"user_id":2749470,"accept_rate":92,"display_name":"Bhargav Modi"},"score":2,"creation_date":1424618319,"post_id":28659462,"comment_id":45614494,"body_markdown":"remove `throws` from the method signature of `setSomething1(int a);`","body":"remove <code>throws</code> from the method signature of <code>setSomething1(int a);</code>"},{"owner":{"account_id":162699,"reputation":138060,"user_id":3788176,"accept_rate":54,"display_name":"Andy Turner"},"score":1,"creation_date":1424618329,"post_id":28659462,"comment_id":45614498,"body_markdown":"In my experience stating &quot;probably won&#39;t&quot; *almost certainly will*, simply by Murphy&#39;s Law. And if you&#39;ve hidden the exception, you won&#39;t know when it does.","body":"In my experience stating &quot;probably won&#39;t&quot; <i>almost certainly will</i>, simply by Murphy&#39;s Law. And if you&#39;ve hidden the exception, you won&#39;t know when it does."},{"owner":{"account_id":162699,"reputation":138060,"user_id":3788176,"accept_rate":54,"display_name":"Andy Turner"},"score":0,"creation_date":1424618504,"post_id":28659462,"comment_id":45614555,"body_markdown":"@BoristheSpider - it&#39;s OK to catch it if you subsequently rethrow it.","body":"@BoristheSpider - it&#39;s OK to catch it if you subsequently rethrow it."},{"owner":{"account_id":2366187,"reputation":60152,"user_id":2071828,"accept_rate":88,"display_name":"Boris the Spider"},"score":0,"creation_date":1424618541,"post_id":28659462,"comment_id":45614573,"body_markdown":"@AndyTurner that really depends. It&#39;s rarely a good idea to catch `Exception`.","body":"@AndyTurner that really depends. It&#39;s rarely a good idea to catch <code>Exception</code>."},{"owner":{"account_id":162699,"reputation":138060,"user_id":3788176,"accept_rate":54,"display_name":"Andy Turner"},"score":0,"creation_date":1424618586,"post_id":28659462,"comment_id":45614590,"body_markdown":"@BoristheSpider OK, it *can* be OK to catch it then. I totally agree it is best avoided.","body":"@BoristheSpider OK, it <i>can</i> be OK to catch it then. I totally agree it is best avoided."},{"owner":{"account_id":1114067,"reputation":196781,"user_id":1103872,"accept_rate":82,"display_name":"Marko Topolnik"},"score":1,"creation_date":1424618919,"post_id":28659462,"comment_id":45614700,"body_markdown":"@AndyTurner Catching and rethrowing is always OK with respect to the propagation of exceptions. However, the common mistake is to catch, *log*, and rethrow. Repeated on several layers on the call stack, this results in the notorious polution of the logs with repeated error messages.","body":"@AndyTurner Catching and rethrowing is always OK with respect to the propagation of exceptions. However, the common mistake is to catch, <i>log</i>, and rethrow. Repeated on several layers on the call stack, this results in the notorious polution of the logs with repeated error messages."}],"answers":[{"tags":[],"owner":{"account_id":2974767,"reputation":2943,"user_id":2526056,"display_name":"Dogs"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1424618488,"creation_date":1424618488,"answer_id":28659520,"question_id":28659462,"body_markdown":"Unfortunately no, there isn&#39;t, and this is by intention. When used correctly, exceptions should not be ignored as they indicate that something didn&#39;t work and that you probably shouldn&#39;t continue down your normal execution path. Completely ignoring exceptions is an example of the &#39;Sweep it under the rug&#39; anti-pattern, which is why the language doesn&#39;t support doing so easily.\r\n\r\nPerhaps you should look at why TestClass.setSomething is throwing exceptions. Is whatever you&#39;re trying to &#39;test&#39; really going to be valid if a bunch of setter methods didn&#39;t work correctly?","title":"How to ignore Exceptions in Java","body":"<p>Unfortunately no, there isn't, and this is by intention. When used correctly, exceptions should not be ignored as they indicate that something didn't work and that you probably shouldn't continue down your normal execution path. Completely ignoring exceptions is an example of the 'Sweep it under the rug' anti-pattern, which is why the language doesn't support doing so easily.</p>\n\n<p>Perhaps you should look at why TestClass.setSomething is throwing exceptions. Is whatever you're trying to 'test' really going to be valid if a bunch of setter methods didn't work correctly?</p>\n"},{"tags":[],"owner":{"account_id":194308,"reputation":66720,"user_id":436560,"accept_rate":87,"display_name":"Lajos Arpad"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1424618517,"creation_date":1424618517,"answer_id":28659524,"question_id":28659462,"body_markdown":"You should not ignore Exceptions. You should handle them. If you want to make your test code simple, then add the try-catch block into your functions. The greatest way to ignore exceptions is to prevent them by proper coding.","title":"How to ignore Exceptions in Java","body":"<p>You should not ignore Exceptions. You should handle them. If you want to make your test code simple, then add the try-catch block into your functions. The greatest way to ignore exceptions is to prevent them by proper coding.</p>\n"},{"tags":[],"owner":{"account_id":370994,"reputation":35154,"user_id":719263,"accept_rate":100,"display_name":"Jean-Baptiste Yun&#232;s"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1424618740,"creation_date":1424618740,"answer_id":28659550,"question_id":28659462,"body_markdown":"You can&#39;t ignore exception in Java. If a method declares being able to throw something this is because something important can&#39;t be done, and the error can&#39;t be corrected by the method designer. So if you really wan&#39;t to simplify your life encapsulate the method call in some other method like this :\r\n\r\n    class MyExceptionFreeClass {\r\n      public static void setSomething1(TestClass t,int v) {\r\n        try {\r\n          t.setSomething1(v);\r\n        } catch (Exception e) {}\r\n      public static void setSomething2(TestClass t,int v) {\r\n        try {\r\n          t.setSomething2(v);\r\n        } catch (Exception e) {}\r\n    }\r\n\r\nand call it when you need it:\r\n\r\n    TestClass test=new TestClass();\r\n    MyExceptionFreeClass.setSomething1(test,0);\r\n    MyExceptionFreeClass.setSomething2(test,0);","title":"How to ignore Exceptions in Java","body":"<p>You can't ignore exception in Java. If a method declares being able to throw something this is because something important can't be done, and the error can't be corrected by the method designer. So if you really wan't to simplify your life encapsulate the method call in some other method like this :</p>\n\n<pre><code>class MyExceptionFreeClass {\n  public static void setSomething1(TestClass t,int v) {\n    try {\n      t.setSomething1(v);\n    } catch (Exception e) {}\n  public static void setSomething2(TestClass t,int v) {\n    try {\n      t.setSomething2(v);\n    } catch (Exception e) {}\n}\n</code></pre>\n\n<p>and call it when you need it:</p>\n\n<pre><code>TestClass test=new TestClass();\nMyExceptionFreeClass.setSomething1(test,0);\nMyExceptionFreeClass.setSomething2(test,0);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1114067,"reputation":196781,"user_id":1103872,"accept_rate":82,"display_name":"Marko Topolnik"},"down_vote_count":1,"up_vote_count":41,"is_accepted":true,"score":40,"last_activity_date":1634193545,"creation_date":1424618765,"answer_id":28659553,"question_id":28659462,"body_markdown":"There is no way to fundamentally ignore a thrown exception. The best that you can do is minimize the boilerplate you need to wrap the exception-throwing code in.\r\n\r\nIf you are on Java 8, you can use this:\r\n\r\n    public static void ignoringExc(RunnableExc r) {\r\n      try { r.run(); } catch (Exception e) { }\r\n    }\r\n\r\n    @FunctionalInterface public interface RunnableExc { void run() throws Exception; }\r\n\r\nThen, and implying static imports, your code becomes\r\n\r\n    ignoringExc(() -&gt; test.setSomething1(0));\r\n    ignoringExc(() -&gt; test.setSomething2(0));","title":"How to ignore Exceptions in Java","body":"<p>There is no way to fundamentally ignore a thrown exception. The best that you can do is minimize the boilerplate you need to wrap the exception-throwing code in.</p>\n<p>If you are on Java 8, you can use this:</p>\n<pre><code>public static void ignoringExc(RunnableExc r) {\n  try { r.run(); } catch (Exception e) { }\n}\n\n@FunctionalInterface public interface RunnableExc { void run() throws Exception; }\n</code></pre>\n<p>Then, and implying static imports, your code becomes</p>\n<pre><code>ignoringExc(() -&gt; test.setSomething1(0));\nignoringExc(() -&gt; test.setSomething2(0));\n</code></pre>\n"},{"tags":[],"owner":{"account_id":463465,"reputation":4099,"user_id":866390,"accept_rate":51,"display_name":"Joe Almore"},"down_vote_count":9,"up_vote_count":58,"is_accepted":false,"score":49,"last_activity_date":1473967079,"creation_date":1473967079,"answer_id":39518748,"question_id":28659462,"body_markdown":"    try {\r\n     // Your code...\r\n    } catch (Exception ignore) { }\r\n\r\nUse the word `ignore` after the `Exception` keyword.","title":"How to ignore Exceptions in Java","body":"<pre><code>try {\n // Your code...\n} catch (Exception ignore) { }\n</code></pre>\n\n<p>Use the word <code>ignore</code> after the <code>Exception</code> keyword.</p>\n"},{"tags":[],"owner":{"account_id":10161846,"reputation":91,"user_id":7505068,"display_name":"ivanoklid"},"down_vote_count":0,"up_vote_count":7,"is_accepted":false,"score":7,"last_activity_date":1562064731,"creation_date":1562064731,"answer_id":56850831,"question_id":28659462,"body_markdown":"IntelliJ Idea IDE suggests to rename a variable to ```ignored```\r\n\r\n when it isn&#39;t used.\r\n\r\nThis is my sample code.\r\n\r\n    try {\r\n        messageText = rs.getString(&quot;msg&quot;);\r\n        errorCode = rs.getInt(&quot;error_code&quot;);\r\n    } catch (SQLException ignored) { }\r\n\r\n","title":"How to ignore Exceptions in Java","body":"<p>IntelliJ Idea IDE suggests to rename a variable to <code>ignored</code></p>\n\n<p>when it isn't used.</p>\n\n<p>This is my sample code.</p>\n\n<pre><code>try {\n    messageText = rs.getString(\"msg\");\n    errorCode = rs.getInt(\"error_code\");\n} catch (SQLException ignored) { }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3861935,"reputation":73,"user_id":11374528,"display_name":"user25839"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1564585181,"creation_date":1564585181,"answer_id":57293741,"question_id":28659462,"body_markdown":"I know this is old, but I do think there are occasions when you want to ignore an exception. Consider you have a string that contains a delimited set of parts to be parsed. But, this string can sometimes contain say, 6 or 7 or 8 parts. I don&#39;t feel that checking the len each time in order to establish an element exists in the array is as straight forward as simply catching the exception and going on. For example, I have a string delimited by &#39;/&#39; character that I want to break apart:\r\n\r\n    public String processLine(String inLine) {\r\n        partsArray = inLine.split(&quot;/&quot;);\r\n        \r\n        //For brevity, imagine lines here that initialize\r\n        //String elems[0-7] = &quot;&quot;;\r\n\r\n        //Now, parts array may contains 6, 7, or 8 elements\r\n        //But if less than 8, will throw the exception\r\n        try {\r\n            elem0 = partsArray[0];\r\n            elem1 = partsArray[1];\r\n            elem2 = partsArray[2];\r\n            elem3 = partsArray[3];\r\n            elem4 = partsArray[4];\r\n            elem5 = partsArray[5];\r\n            elem6 = partsArray[6];\r\n            elem7 = partsArray[7];\r\n        catch (ArrayIndexOutOfBoundsException ignored) { }\r\n\r\n        //Just to complete the example, we&#39;ll append all the values\r\n        //and any values that didn&#39;t have parts will still be\r\n        //the value we initialized it to, in this case a space.\r\n        sb.append(elem0).append(elem1).append(elem2)...append(elem7);\r\n\r\n        //and return our string of 6, 7, or 8 parts\r\n        //And YES, obviously, this is returning pretty much\r\n        //the same string, minus the delimiter.\r\n        //You would likely do things to those elem values\r\n        //and then return the string in a more formatted way.\r\n        //But was just to put out an example where\r\n        //you really might want to ignore the exception\r\n        return sb.toString();\r\n    }\r\n","title":"How to ignore Exceptions in Java","body":"<p>I know this is old, but I do think there are occasions when you want to ignore an exception. Consider you have a string that contains a delimited set of parts to be parsed. But, this string can sometimes contain say, 6 or 7 or 8 parts. I don't feel that checking the len each time in order to establish an element exists in the array is as straight forward as simply catching the exception and going on. For example, I have a string delimited by '/' character that I want to break apart:</p>\n\n<pre><code>public String processLine(String inLine) {\n    partsArray = inLine.split(\"/\");\n\n    //For brevity, imagine lines here that initialize\n    //String elems[0-7] = \"\";\n\n    //Now, parts array may contains 6, 7, or 8 elements\n    //But if less than 8, will throw the exception\n    try {\n        elem0 = partsArray[0];\n        elem1 = partsArray[1];\n        elem2 = partsArray[2];\n        elem3 = partsArray[3];\n        elem4 = partsArray[4];\n        elem5 = partsArray[5];\n        elem6 = partsArray[6];\n        elem7 = partsArray[7];\n    catch (ArrayIndexOutOfBoundsException ignored) { }\n\n    //Just to complete the example, we'll append all the values\n    //and any values that didn't have parts will still be\n    //the value we initialized it to, in this case a space.\n    sb.append(elem0).append(elem1).append(elem2)...append(elem7);\n\n    //and return our string of 6, 7, or 8 parts\n    //And YES, obviously, this is returning pretty much\n    //the same string, minus the delimiter.\n    //You would likely do things to those elem values\n    //and then return the string in a more formatted way.\n    //But was just to put out an example where\n    //you really might want to ignore the exception\n    return sb.toString();\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":251709,"reputation":2827,"user_id":529286,"accept_rate":84,"display_name":"zakmck"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1605550364,"creation_date":1605550364,"answer_id":64863419,"question_id":28659462,"body_markdown":"Those who write empty catch blocks shall burn in the Hell for the eternity.\r\n\r\nOr worse, they will be forced to debug the damn rubbish they wrote forever and ever.\r\n\r\nThat said, one thing you might want to do is writing exception handling in a less verbose way. The [NoException library](https://noexception.machinezoo.com/) is very good at that.","title":"How to ignore Exceptions in Java","body":"<p>Those who write empty catch blocks shall burn in the Hell for the eternity.</p>\n<p>Or worse, they will be forced to debug the damn rubbish they wrote forever and ever.</p>\n<p>That said, one thing you might want to do is writing exception handling in a less verbose way. The <a href=\"https://noexception.machinezoo.com/\" rel=\"nofollow noreferrer\">NoException library</a> is very good at that.</p>\n"},{"tags":[],"owner":{"account_id":11228459,"reputation":71,"user_id":8237398,"display_name":"Roberto Messa"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1694974068,"creation_date":1694974068,"answer_id":77123048,"question_id":28659462,"body_markdown":"You can ignore exceptions as long as it makes sense.\r\nIn this case, there can be no repeated email accounts.\r\n\r\nSo, if findByEmail does not throw the exception, you throw the exception that really matters in the specific case\r\n```\r\n        try {\r\n\r\n            this.findByEmail();\r\n\r\n            throw new EmailAlreadyExistsException();\r\n\r\n        } catch (AccountNotFoundException ignored) {\r\n           \r\n        } catch (InvalidAccountStatusException e) {\r\n            throw e;\r\n        }\r\n\r\n        this.createAccount();\r\n```","title":"How to ignore Exceptions in Java","body":"<p>You can ignore exceptions as long as it makes sense.\nIn this case, there can be no repeated email accounts.</p>\n<p>So, if findByEmail does not throw the exception, you throw the exception that really matters in the specific case</p>\n<pre><code>        try {\n\n            this.findByEmail();\n\n            throw new EmailAlreadyExistsException();\n\n        } catch (AccountNotFoundException ignored) {\n           \n        } catch (InvalidAccountStatusException e) {\n            throw e;\n        }\n\n        this.createAccount();\n</code></pre>\n"}],"owner":{"account_id":3050739,"reputation":1763,"user_id":2585366,"accept_rate":59,"display_name":"Nick"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":131581,"favorite_count":0,"down_vote_count":2,"up_vote_count":45,"accepted_answer_id":28659553,"answer_count":9,"score":43,"last_activity_date":1694974068,"creation_date":1424618135,"question_id":28659462,"body_markdown":"I have the following code:\r\n\r\n    TestClass test=new TestClass();\r\n    test.setSomething1(0);  //could, but probably won&#39;t throw Exception\r\n    test.setSomething2(0);  //could, but probably won&#39;t throw Exception\r\n\r\nI would like to execute: `test.setSomething2(0);` even if `test.setSomething(0)` (the line above it) throws an exception. Is there a way to do this OTHER than:\r\n\r\n    try{\r\n       test.setSomething1(0);\r\n    }catch(Exception e){\r\n       //ignore\r\n    }\r\n    try{\r\n       test.setSomething2(0);\r\n    }catch(Exception e){\r\n       //ignore\r\n    }\r\n\r\n    \r\nI have a lot of test.setSomething&#39;s in a row and all of them could throw Exceptions. If they do, I just want to skip that line and move to the next one.\r\n\r\nFor clarification, I don&#39;t care if it throws an Exception, and I can&#39;t edit the source code of the code which throws this exception. \r\n\r\nTHIS IS A CASE WHERE I DON&#39;T CARE ABOUT THE EXCEPTIONS (please don&#39;t use universally quantified statements like &quot;you should never ignore Exceptions&quot;). I am setting the values of some Object. When I present the values to a user, I do null checks anyway, so it doesn&#39;t actually matter if any of the lines of code execute.","title":"How to ignore Exceptions in Java","body":"<p>I have the following code:</p>\n\n<pre><code>TestClass test=new TestClass();\ntest.setSomething1(0);  //could, but probably won't throw Exception\ntest.setSomething2(0);  //could, but probably won't throw Exception\n</code></pre>\n\n<p>I would like to execute: <code>test.setSomething2(0);</code> even if <code>test.setSomething(0)</code> (the line above it) throws an exception. Is there a way to do this OTHER than:</p>\n\n<pre><code>try{\n   test.setSomething1(0);\n}catch(Exception e){\n   //ignore\n}\ntry{\n   test.setSomething2(0);\n}catch(Exception e){\n   //ignore\n}\n</code></pre>\n\n<p>I have a lot of test.setSomething's in a row and all of them could throw Exceptions. If they do, I just want to skip that line and move to the next one.</p>\n\n<p>For clarification, I don't care if it throws an Exception, and I can't edit the source code of the code which throws this exception. </p>\n\n<p>THIS IS A CASE WHERE I DON'T CARE ABOUT THE EXCEPTIONS (please don't use universally quantified statements like \"you should never ignore Exceptions\"). I am setting the values of some Object. When I present the values to a user, I do null checks anyway, so it doesn't actually matter if any of the lines of code execute.</p>\n"},{"tags":["java","concurrency","concurrenthashmap"],"comments":[{"owner":{"account_id":21224895,"reputation":328,"user_id":15610766,"display_name":"Dolfinwu"},"score":2,"creation_date":1694931563,"post_id":77120649,"comment_id":135954703,"body_markdown":"I personally think your interpretation is correct. To atomically check and update a value in a ConcurrentHashMap, the compute method should be the way to go. If you want to leave the mapping unchanged when using compute, you should return the current value for that key. In this way the mapping remains the same and the computation doesn&#39;t change it unnecessarily.","body":"I personally think your interpretation is correct. To atomically check and update a value in a ConcurrentHashMap, the compute method should be the way to go. If you want to leave the mapping unchanged when using compute, you should return the current value for that key. In this way the mapping remains the same and the computation doesn&#39;t change it unnecessarily."}],"answers":[{"tags":[],"owner":{"account_id":23740623,"reputation":1,"user_id":17758716,"display_name":"Reilas"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1694933676,"creation_date":1694933676,"answer_id":77120784,"question_id":77120649,"body_markdown":"&gt; _&#39;... ConcurrentHashMap looks like the way to go, but I&#39;m surprised to see that there doesn&#39;t seem to be a simple way to atomically check the current value in the map and update it conditionally. ...&#39;_\r\n\r\nThe _ConcurrentHashMap_ class is optimized for threaded operations, so the provided methods should all function in an _atomic_ manner.\r\n\r\n&gt; _&#39;... I have tried using `compute`, but it seems to me there is no way to say &quot;As a result of my computation I&#39;d like to leave the current entry in place.&quot; I was hoping that returning `null` from the compute function would achieve this, but it removes the current entry. ...&#39;_\r\n\r\nUtilize the _[computeIfPresent](https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/util/concurrent/ConcurrentHashMap.html#computeIfPresent(K,java.util.function.BiFunction))_ method.\r\n\r\nHere is an example.\r\n\r\n```java\r\nint highScore = 200;\r\nmap.computeIfPresent(&quot;abc&quot;, (k, v) -&gt; highScore &gt; v ? highScore : v);\r\n```\r\n\r\n&gt; _&#39;... I believe the syncronising only locks that that one mapping (or at least bucket), not the whole map.. ...&#39;_\r\n\r\nHere is the _[OpenJDK](https://openjdk.org/)_ source for the _computeIfPresent_ method.\r\n- _[GitHub &amp;ndash; java/util/concurrent/ConcurrentHashMap.java](https://github.com/openjdk/jdk/blob/master/src/java.base/share/classes/java/util/concurrent/ConcurrentHashMap.java#L1805)_.\r\n\r\nAt least for this method, the synchronization is on the _f_ _Node_ object, rather than the method, or the instance.  \r\nThe entire class is quite optimized.","title":"How to conditionally put a value into concurrent hashmap?","body":"<blockquote>\n<p><em>'... ConcurrentHashMap looks like the way to go, but I'm surprised to see that there doesn't seem to be a simple way to atomically check the current value in the map and update it conditionally. ...'</em></p>\n</blockquote>\n<p>The <em>ConcurrentHashMap</em> class is optimized for threaded operations, so the provided methods should all function in an <em>atomic</em> manner.</p>\n<blockquote>\n<p><em>'... I have tried using <code>compute</code>, but it seems to me there is no way to say &quot;As a result of my computation I'd like to leave the current entry in place.&quot; I was hoping that returning <code>null</code> from the compute function would achieve this, but it removes the current entry. ...'</em></p>\n</blockquote>\n<p>Utilize the <em><a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/util/concurrent/ConcurrentHashMap.html#computeIfPresent(K,java.util.function.BiFunction)\" rel=\"nofollow noreferrer\">computeIfPresent</a></em> method.</p>\n<p>Here is an example.</p>\n<pre class=\"lang-java prettyprint-override\"><code>int highScore = 200;\nmap.computeIfPresent(&quot;abc&quot;, (k, v) -&gt; highScore &gt; v ? highScore : v);\n</code></pre>\n<blockquote>\n<p><em>'... I believe the syncronising only locks that that one mapping (or at least bucket), not the whole map.. ...'</em></p>\n</blockquote>\n<p>Here is the <em><a href=\"https://openjdk.org/\" rel=\"nofollow noreferrer\">OpenJDK</a></em> source for the <em>computeIfPresent</em> method.</p>\n<ul>\n<li><em><a href=\"https://github.com/openjdk/jdk/blob/master/src/java.base/share/classes/java/util/concurrent/ConcurrentHashMap.java#L1805\" rel=\"nofollow noreferrer\">GitHub – java/util/concurrent/ConcurrentHashMap.java</a></em>.</li>\n</ul>\n<p>At least for this method, the synchronization is on the <em>f</em> <em>Node</em> object, rather than the method, or the instance.<br />\nThe entire class is quite optimized.</p>\n"},{"tags":[],"owner":{"account_id":5998820,"reputation":12656,"user_id":4712734,"display_name":"DuncG"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1694965316,"creation_date":1694965316,"answer_id":77122541,"question_id":77120649,"body_markdown":"A ConcurrentHashMap will ensure thread-safe update for your situation. As well as `compute`, you could also use `merge`. `merge` accepts the new value as a parameter rather than need to encode it in the remapping function. Example:\r\n\r\n    ConcurrentHashMap&lt;String,Integer&gt; scores = new ConcurrentHashMap&lt;&gt;();\r\n    BiFunction&lt;Integer, Integer, Integer&gt; max = \r\n               (oldv,newv) -&gt; oldv == null || oldv &lt; newv ? newv : oldv;\r\n\r\n    scores.merge(&quot;a&quot;, 2, max);\r\n    scores.merge(&quot;a&quot;, 4, max);\r\n    scores.merge(&quot;b&quot;, 9, max);\r\n    scores.merge(&quot;b&quot;, 5, max);\r\n\r\n    System.out.println(&quot;High Scores: &quot;+scores);\r\n    // Prints:  High Scores: {a=4, b=9}\r\n\r\nAs with compute, you need to return the old / existing value to ensure the key is not removed by the operation.","title":"How to conditionally put a value into concurrent hashmap?","body":"<p>A ConcurrentHashMap will ensure thread-safe update for your situation. As well as <code>compute</code>, you could also use <code>merge</code>. <code>merge</code> accepts the new value as a parameter rather than need to encode it in the remapping function. Example:</p>\n<pre><code>ConcurrentHashMap&lt;String,Integer&gt; scores = new ConcurrentHashMap&lt;&gt;();\nBiFunction&lt;Integer, Integer, Integer&gt; max = \n           (oldv,newv) -&gt; oldv == null || oldv &lt; newv ? newv : oldv;\n\nscores.merge(&quot;a&quot;, 2, max);\nscores.merge(&quot;a&quot;, 4, max);\nscores.merge(&quot;b&quot;, 9, max);\nscores.merge(&quot;b&quot;, 5, max);\n\nSystem.out.println(&quot;High Scores: &quot;+scores);\n// Prints:  High Scores: {a=4, b=9}\n</code></pre>\n<p>As with compute, you need to return the old / existing value to ensure the key is not removed by the operation.</p>\n"},{"tags":[],"owner":{"account_id":216120,"reputation":49213,"user_id":471160,"accept_rate":90,"display_name":"marcinj"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1694973300,"creation_date":1694973300,"answer_id":77123007,"question_id":77120649,"body_markdown":"You can use the `compute` method of `ConcurrentHashMap` to atomically check and conditionally update a value. If you want to leave the current entry in place, you should return the current value instead of `null`. Returning `null` from the `compute` function will remove the current entry. Here is the corrected code:\r\n\r\n    h.compute(&quot;TEST&quot;,(k,v) -&gt; {\r\n        if (v != null &amp;&amp; v.equals(&quot;changeme&quot;)){\r\n            return &quot;CHANGED&quot;;\r\n        }\r\n        else {\r\n            return v; // return current value to leave the entry in place\r\n        }\r\n    });\r\n\r\nThis way, the value will only be updated if it equals &quot;changeme&quot;, otherwise it will remain the same. The `compute` method ensures atomicity of the operation.\r\n\r\nIf you are concerned that returning value will update it anyway, then there is no need - it does not cause any problems related to efficiency or thread safety. The whole operation is anyway under synchronized block as you can see here:\r\n\r\nhttps://github.com/openjdk/jdk/blob/master/src/java.base/share/classes/java/util/concurrent/ConcurrentHashMap.java#L1942","title":"How to conditionally put a value into concurrent hashmap?","body":"<p>You can use the <code>compute</code> method of <code>ConcurrentHashMap</code> to atomically check and conditionally update a value. If you want to leave the current entry in place, you should return the current value instead of <code>null</code>. Returning <code>null</code> from the <code>compute</code> function will remove the current entry. Here is the corrected code:</p>\n<pre><code>h.compute(&quot;TEST&quot;,(k,v) -&gt; {\n    if (v != null &amp;&amp; v.equals(&quot;changeme&quot;)){\n        return &quot;CHANGED&quot;;\n    }\n    else {\n        return v; // return current value to leave the entry in place\n    }\n});\n</code></pre>\n<p>This way, the value will only be updated if it equals &quot;changeme&quot;, otherwise it will remain the same. The <code>compute</code> method ensures atomicity of the operation.</p>\n<p>If you are concerned that returning value will update it anyway, then there is no need - it does not cause any problems related to efficiency or thread safety. The whole operation is anyway under synchronized block as you can see here:</p>\n<p><a href=\"https://github.com/openjdk/jdk/blob/master/src/java.base/share/classes/java/util/concurrent/ConcurrentHashMap.java#L1942\" rel=\"nofollow noreferrer\">https://github.com/openjdk/jdk/blob/master/src/java.base/share/classes/java/util/concurrent/ConcurrentHashMap.java#L1942</a></p>\n"}],"owner":{"account_id":781972,"reputation":2698,"user_id":832200,"accept_rate":62,"display_name":"Bruce"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":106,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":3,"score":0,"last_activity_date":1694973300,"creation_date":1694930228,"question_id":77120649,"body_markdown":"I maintain a map of high scores for different games. When I receive a new score, I want to be able to check if the score is higher than the current high score, and if so, make it the new high score for that game in the map.\r\n\r\nConcurrentHashMap looks like the way to go, but I&#39;m surprised to see that there doesn&#39;t seem to be a simple way to atomically check the current value in the map and update it conditionally.\r\n\r\nI have tried using `compute`, but it seems to me there is no way to say &quot;As a result of my computation I&#39;d like to leave the current entry in place.&quot; I was hoping that returning `null` from the compute function would achieve this, but it removes the current entry. \r\n\r\nMy example code:\r\n\r\n    import java.util.concurrent.ConcurrentHashMap;\r\n    \r\n    public class ConcHashMapTest{\r\n    \r\n    \tpublic static void main(String[] args){\r\n    \t\tConcurrentHashMap&lt;String,String&gt; h = new ConcurrentHashMap&lt;&gt;();\r\n    \t\t\r\n    \t\th.put(&quot;TEST&quot;,&quot;value1&quot;);\r\n    \t\t\r\n    \t\t/*\r\n    \t\t The question is, can I do an atomic CHECK and update ONLY if\r\n    \t\t I want to?\r\n    \t\t \r\n    \t\t I know I can use compute, but do you HAVE to change the map\r\n    \t\t or can you return null and leave the mapping as it is?\r\n    \t\t */\r\n    \t\t\r\n    \t\th.compute(&quot;TEST&quot;,(k,v) -&gt; {\r\n    \t\t\tif (v.equals(&quot;changeme&quot;)){\r\n    \t\t\t\treturn &quot;CHANGED&quot;;\r\n    \t\t\t}\r\n    \t\t\telse {\r\n    \t\t\t\treturn null;\r\n    \t\t\t}\r\n    \t\t});\r\n    \t\t\r\n    \t\tSystem.out.println(&quot;Now hashmap is &quot;+h);\r\n    \t}\r\n    }\r\n\r\nThis returns:\r\n\r\n    Now hashmap is {}\r\n\r\nI could of course just return the same value as I found there, but presumably that would cause a lot of updating of that value? Perhaps that&#39;s the way to go, though? I don&#39;t think so, though, because one of the points of the concurrenthashmap is to allow overlapping reads for speed, and syncronize updates, and to do this it creates a happens before only if there is an update. So I don&#39;t want to be updating every time I check the value surely?\r\n\r\n\r\nThank you!\r\n\r\nEDIT: Oh wait, I think I&#39;m getting confused. The benefit to the concurrent hashmap is that when I&#39;m only READING the high scores (which I do a lot), I can have overlapping reads. And if I want atomicity of updates, my calls HAVE to be syncronised somewhere so that they&#39;re sequential?\r\n\r\nSo I think that using compute and updating the value with itself if I want to leave it unchanged must be the right thing to do? I believe the syncronising only locks that that one mapping (or at least bucket), not the whole map..\r\n\r\nEDIT2: Thinking further about it, I&#39;m tempted not to try for atomicity. Although I will be getting potentially thousands of possible highscores for a game every second, genuine high scores will be pretty rare. The chance of two high scores arriving at exactly the same moment such that there is an interleaving problem with:\r\n\r\n    if (score &gt; map.get(&quot;SCORE&quot;)){\r\n      map.put(&quot;SCORE&quot;,score);\r\n    }\r\n\r\nis so close to zero as to make no difference. I think I&#39;ll just leave a small (almost theoretical) hole where I could fail to record a high score.","title":"How to conditionally put a value into concurrent hashmap?","body":"<p>I maintain a map of high scores for different games. When I receive a new score, I want to be able to check if the score is higher than the current high score, and if so, make it the new high score for that game in the map.</p>\n<p>ConcurrentHashMap looks like the way to go, but I'm surprised to see that there doesn't seem to be a simple way to atomically check the current value in the map and update it conditionally.</p>\n<p>I have tried using <code>compute</code>, but it seems to me there is no way to say &quot;As a result of my computation I'd like to leave the current entry in place.&quot; I was hoping that returning <code>null</code> from the compute function would achieve this, but it removes the current entry.</p>\n<p>My example code:</p>\n<pre><code>import java.util.concurrent.ConcurrentHashMap;\n\npublic class ConcHashMapTest{\n\n    public static void main(String[] args){\n        ConcurrentHashMap&lt;String,String&gt; h = new ConcurrentHashMap&lt;&gt;();\n        \n        h.put(&quot;TEST&quot;,&quot;value1&quot;);\n        \n        /*\n         The question is, can I do an atomic CHECK and update ONLY if\n         I want to?\n         \n         I know I can use compute, but do you HAVE to change the map\n         or can you return null and leave the mapping as it is?\n         */\n        \n        h.compute(&quot;TEST&quot;,(k,v) -&gt; {\n            if (v.equals(&quot;changeme&quot;)){\n                return &quot;CHANGED&quot;;\n            }\n            else {\n                return null;\n            }\n        });\n        \n        System.out.println(&quot;Now hashmap is &quot;+h);\n    }\n}\n</code></pre>\n<p>This returns:</p>\n<pre><code>Now hashmap is {}\n</code></pre>\n<p>I could of course just return the same value as I found there, but presumably that would cause a lot of updating of that value? Perhaps that's the way to go, though? I don't think so, though, because one of the points of the concurrenthashmap is to allow overlapping reads for speed, and syncronize updates, and to do this it creates a happens before only if there is an update. So I don't want to be updating every time I check the value surely?</p>\n<p>Thank you!</p>\n<p>EDIT: Oh wait, I think I'm getting confused. The benefit to the concurrent hashmap is that when I'm only READING the high scores (which I do a lot), I can have overlapping reads. And if I want atomicity of updates, my calls HAVE to be syncronised somewhere so that they're sequential?</p>\n<p>So I think that using compute and updating the value with itself if I want to leave it unchanged must be the right thing to do? I believe the syncronising only locks that that one mapping (or at least bucket), not the whole map..</p>\n<p>EDIT2: Thinking further about it, I'm tempted not to try for atomicity. Although I will be getting potentially thousands of possible highscores for a game every second, genuine high scores will be pretty rare. The chance of two high scores arriving at exactly the same moment such that there is an interleaving problem with:</p>\n<pre><code>if (score &gt; map.get(&quot;SCORE&quot;)){\n  map.put(&quot;SCORE&quot;,score);\n}\n</code></pre>\n<p>is so close to zero as to make no difference. I think I'll just leave a small (almost theoretical) hole where I could fail to record a high score.</p>\n"},{"tags":["java","android","react-native","gradle"],"owner":{"account_id":18593192,"reputation":11,"user_id":13549926,"display_name":"illgresi"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":69,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1694972636,"creation_date":1694771199,"question_id":77111350,"body_markdown":"I&#39;m trying to build my app in three versions with different applicationIdSuffix - release (without suffix), stg and dev. The whole build process is okay and i have my apk with updated appId, but when i install and open the app it close immediately. I found error in device logcat\r\n\r\n\r\n```\r\nFATAL EXCEPTION: create_react_context\r\nProcess: myApp.stg, PID: 13975\r\njava.lang.RuntimeException: Unable to load script. Make sure you&#39;re either running Metro (run &#39;npx react-native start&#39;) or that your bundle &#39;index.android.bundle&#39; is packaged correctly for release.\r\n    at com.facebook.react.bridge.CatalystInstanceImpl.jniLoadScriptFromAssets(Native Method)\r\n    at com.facebook.react.bridge.CatalystInstanceImpl.loadScriptFromAssets(CatalystInstanceImpl.java:248)\r\n    at com.facebook.react.bridge.JSBundleLoader$1.loadScript(JSBundleLoader.java:29)\r\n    at com.facebook.react.bridge.CatalystInstanceImpl.runJSBundle(CatalystInstanceImpl.java:277)\r\n    at com.facebook.react.ReactInstanceManager.createReactContext(ReactInstanceManager.java:1402)\r\n    at com.facebook.react.ReactInstanceManager.access$1200(ReactInstanceManager.java:136)\r\n    at com.facebook.react.ReactInstanceManager$5.run(ReactInstanceManager.java:1108)\r\n    at java.lang.Thread.run(Thread.java:1012)\r\n``` \r\n\r\nHere is my buildVariants\r\n\r\n\r\n```\r\nbuildTypes {\r\n        debug {\r\n            signingConfig signingConfigs.debug\r\n        }\r\n        release {\r\n            // Caution! In production, you need to generate your own keystore file.\r\n            // see https://reactnative.dev/docs/signed-apk-android.\r\n            signingConfig signingConfigs.release\r\n            minifyEnabled enableProguardInReleaseBuilds\r\n            proguardFiles getDefaultProguardFile(&quot;proguard-android.txt&quot;), &quot;proguard-rules.pro&quot;\r\n        }\r\n        staging {\r\n            initWith release\r\n            matchingFallbacks =  [&#39;release&#39;]\r\n            applicationIdSuffix &#39;stg&#39;\r\n        }\r\n        develop {\r\n            initWith release\r\n            applicationIdSuffix &quot;dev&quot;\r\n            matchingFallbacks =  [&#39;release&#39;]\r\n        }\r\n\r\n    }\r\n```\r\n\r\nApp works without applicationIdSuffix in debug and release.\r\n\r\n\r\nTotally idk how to handle with this. Im trying to build app with diff flavours but it ends the same. Also i updated google-service.json file with a new buildVariant.\r\n\r\nAre there any other places when I need to change something to make things work?\r\n\r\nAnyone had a similiar problem?\r\n","title":"React-native - java.lang.RuntimeException: Unable to load script","body":"<p>I'm trying to build my app in three versions with different applicationIdSuffix - release (without suffix), stg and dev. The whole build process is okay and i have my apk with updated appId, but when i install and open the app it close immediately. I found error in device logcat</p>\n<pre><code>FATAL EXCEPTION: create_react_context\nProcess: myApp.stg, PID: 13975\njava.lang.RuntimeException: Unable to load script. Make sure you're either running Metro (run 'npx react-native start') or that your bundle 'index.android.bundle' is packaged correctly for release.\n    at com.facebook.react.bridge.CatalystInstanceImpl.jniLoadScriptFromAssets(Native Method)\n    at com.facebook.react.bridge.CatalystInstanceImpl.loadScriptFromAssets(CatalystInstanceImpl.java:248)\n    at com.facebook.react.bridge.JSBundleLoader$1.loadScript(JSBundleLoader.java:29)\n    at com.facebook.react.bridge.CatalystInstanceImpl.runJSBundle(CatalystInstanceImpl.java:277)\n    at com.facebook.react.ReactInstanceManager.createReactContext(ReactInstanceManager.java:1402)\n    at com.facebook.react.ReactInstanceManager.access$1200(ReactInstanceManager.java:136)\n    at com.facebook.react.ReactInstanceManager$5.run(ReactInstanceManager.java:1108)\n    at java.lang.Thread.run(Thread.java:1012)\n</code></pre>\n<p>Here is my buildVariants</p>\n<pre><code>buildTypes {\n        debug {\n            signingConfig signingConfigs.debug\n        }\n        release {\n            // Caution! In production, you need to generate your own keystore file.\n            // see https://reactnative.dev/docs/signed-apk-android.\n            signingConfig signingConfigs.release\n            minifyEnabled enableProguardInReleaseBuilds\n            proguardFiles getDefaultProguardFile(&quot;proguard-android.txt&quot;), &quot;proguard-rules.pro&quot;\n        }\n        staging {\n            initWith release\n            matchingFallbacks =  ['release']\n            applicationIdSuffix 'stg'\n        }\n        develop {\n            initWith release\n            applicationIdSuffix &quot;dev&quot;\n            matchingFallbacks =  ['release']\n        }\n\n    }\n</code></pre>\n<p>App works without applicationIdSuffix in debug and release.</p>\n<p>Totally idk how to handle with this. Im trying to build app with diff flavours but it ends the same. Also i updated google-service.json file with a new buildVariant.</p>\n<p>Are there any other places when I need to change something to make things work?</p>\n<p>Anyone had a similiar problem?</p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":27834272,"reputation":688,"user_id":21252090,"display_name":"Grinding For Reputation"},"score":0,"creation_date":1694703151,"post_id":77106079,"comment_id":135928953,"body_markdown":"Considering specifying which IDE your using.","body":"Considering specifying which IDE your using."},{"owner":{"account_id":15168430,"reputation":173,"user_id":10945276,"display_name":"roediGERhard"},"score":0,"creation_date":1694703455,"post_id":77106079,"comment_id":135929032,"body_markdown":"I guess that really depends on the config of your IDE. I just pasted your code to my eclipse. No warnings there (but compilation errors, as your code is not correct at the a[] = sc.nextInt() call as well as ther is a semicolon missing at the sc.close() line. But other than that no warnings about sc never being closed. I know you mentioned you don&#39;t want to use try catch here, but honestly it is the only way to assure sc being closed imho.","body":"I guess that really depends on the config of your IDE. I just pasted your code to my eclipse. No warnings there (but compilation errors, as your code is not correct at the a[] = sc.nextInt() call as well as ther is a semicolon missing at the sc.close() line. But other than that no warnings about sc never being closed. I know you mentioned you don&#39;t want to use try catch here, but honestly it is the only way to assure sc being closed imho."},{"owner":{"account_id":15847779,"reputation":4627,"user_id":11434552,"display_name":"Nexevis"},"score":0,"creation_date":1694705698,"post_id":77106079,"comment_id":135929552,"body_markdown":"A scanner opened with `System.in` should not be closed manually.  The warning should just be ignored or turned off.  If you close the scanner, you also are closing the underlying stream which is already handled automatically without you intervening. For example, if you try to then open a new `Scanner` on `System.in` again, it will just not work because you closed `System.in`","body":"A scanner opened with <code>System.in</code> should not be closed manually.  The warning should just be ignored or turned off.  If you close the scanner, you also are closing the underlying stream which is already handled automatically without you intervening. For example, if you try to then open a new <code>Scanner</code> on <code>System.in</code> again, it will just not work because you closed <code>System.in</code>"}],"answers":[{"tags":[],"owner":{"account_id":27834272,"reputation":688,"user_id":21252090,"display_name":"Grinding For Reputation"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1694766872,"creation_date":1694704522,"answer_id":77106295,"question_id":77106079,"body_markdown":"For Eclipse IDE, you can go to **Window&gt;Preferences&gt;Java&gt;Compiler&gt;Errors/Warning** and search out `resource leak`, the first option should be `Resource leak:` which you can change from *warning* to *ignore*. Apply changes and Close. This should remove the yellow underline and the error you used to see completely. Hopefully this helps!\r\n\r\nP.S Remember that you **might** want to turn it back on incase you are working with other InputStreams and find this as a useful reminder.","title":"Although I close my Scanner class at the end of the code as sc.close(); but still it shows the error as source leakage : sc was never closed. Help me","body":"<p>For Eclipse IDE, you can go to <strong>Window&gt;Preferences&gt;Java&gt;Compiler&gt;Errors/Warning</strong> and search out <code>resource leak</code>, the first option should be <code>Resource leak:</code> which you can change from <em>warning</em> to <em>ignore</em>. Apply changes and Close. This should remove the yellow underline and the error you used to see completely. Hopefully this helps!</p>\n<p>P.S Remember that you <strong>might</strong> want to turn it back on incase you are working with other InputStreams and find this as a useful reminder.</p>\n"},{"tags":[],"owner":{"account_id":27834272,"reputation":688,"user_id":21252090,"display_name":"Grinding For Reputation"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1694935626,"creation_date":1694935626,"answer_id":77120873,"question_id":77106079,"body_markdown":"Sorry for the late answer but you&#39;re using VSCode. As of now I haven&#39;t found a way to completely ignore this warning (I will update you as soon as I do :&gt;) but for now you could use `@SuppressWarnings(&quot;resource&quot;)` annotation above your Scanner declaration or use a try-with-resources with the following syntax:-\r\n```\r\ntry(Scanner sc=new Scanner(System.in)) {\r\n   // All the code that requires the scanner\r\n}\r\n```\r\nGot this from [this answer](https://stackoverflow.com/a/66664246/21252090)","title":"Although I close my Scanner class at the end of the code as sc.close(); but still it shows the error as source leakage : sc was never closed. Help me","body":"<p>Sorry for the late answer but you're using VSCode. As of now I haven't found a way to completely ignore this warning (I will update you as soon as I do :&gt;) but for now you could use <code>@SuppressWarnings(&quot;resource&quot;)</code> annotation above your Scanner declaration or use a try-with-resources with the following syntax:-</p>\n<pre><code>try(Scanner sc=new Scanner(System.in)) {\n   // All the code that requires the scanner\n}\n</code></pre>\n<p>Got this from <a href=\"https://stackoverflow.com/a/66664246/21252090\">this answer</a></p>\n"},{"tags":[],"owner":{"account_id":23740623,"reputation":1,"user_id":17758716,"display_name":"Reilas"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1694971320,"creation_date":1694971320,"answer_id":77122910,"question_id":77106079,"body_markdown":"There are a few syntax errors within your code.\r\n\r\nThe _main_ method has a semi-colon at the end, remove this.\r\n\r\n```java\r\npublic static void main (String args[]);{\r\n```\r\n\r\nAnd, the _a_ array assignment has empty brackets.\r\n\r\n```java\r\na[]=sc.nextInt();\r\n```\r\n\r\nChange this to,\r\n\r\n```java\r\na[i]=sc.nextInt();\r\n```\r\n\r\nHere is an example input and output.\r\n\r\n```none\r\nEnter 5 numbers:\r\n1 2 3 4 5\r\nYou entered:\r\n1\r\n2\r\n3\r\n4\r\n5\r\n```\r\n\r\nHere is the _Java_ tutorial on _methods_.\r\n- _[Defining Methods (The Java&amp;trade; Tutorials &amp;gt; Learning the Java Language &amp;gt; Classes and Objects)](https://docs.oracle.com/javase/tutorial/java/javaOO/methods.html)_\r\n\r\nAnd, here is one on _arrays_.\r\n- _[Arrays (The Java&amp;trade; Tutorials &amp;gt; Learning the Java Language &amp;gt; Language Basics)](https://docs.oracle.com/javase/tutorial/java/nutsandbolts/arrays.html)_","title":"Although I close my Scanner class at the end of the code as sc.close(); but still it shows the error as source leakage : sc was never closed. Help me","body":"<p>There are a few syntax errors within your code.</p>\n<p>The <em>main</em> method has a semi-colon at the end, remove this.</p>\n<pre class=\"lang-java prettyprint-override\"><code>public static void main (String args[]);{\n</code></pre>\n<p>And, the <em>a</em> array assignment has empty brackets.</p>\n<pre class=\"lang-java prettyprint-override\"><code>a[]=sc.nextInt();\n</code></pre>\n<p>Change this to,</p>\n<pre class=\"lang-java prettyprint-override\"><code>a[i]=sc.nextInt();\n</code></pre>\n<p>Here is an example input and output.</p>\n<pre class=\"lang-none prettyprint-override\"><code>Enter 5 numbers:\n1 2 3 4 5\nYou entered:\n1\n2\n3\n4\n5\n</code></pre>\n<p>Here is the <em>Java</em> tutorial on <em>methods</em>.</p>\n<ul>\n<li><em><a href=\"https://docs.oracle.com/javase/tutorial/java/javaOO/methods.html\" rel=\"nofollow noreferrer\">Defining Methods (The Java™ Tutorials &gt; Learning the Java Language &gt; Classes and Objects)</a></em></li>\n</ul>\n<p>And, here is one on <em>arrays</em>.</p>\n<ul>\n<li><em><a href=\"https://docs.oracle.com/javase/tutorial/java/nutsandbolts/arrays.html\" rel=\"nofollow noreferrer\">Arrays (The Java™ Tutorials &gt; Learning the Java Language &gt; Language Basics)</a></em></li>\n</ul>\n"}],"owner":{"account_id":29443123,"reputation":1,"user_id":22560951,"display_name":"Gargi Pramanik"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":67,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":3,"score":0,"last_activity_date":1694971320,"creation_date":1694703046,"question_id":77106079,"body_markdown":"\r\n\r\nWhen I try to compile, it runs but it highlights scanner object sc in yellow colour line prompting that sc was never closed.\r\nIt disappears only when I close my Scanner class immediately after I initialise it. But then my user input functionality is disrupted.\r\n\r\nI don&#39;t want to use try catch at this point. Because earlier codes didn&#39;t raise this issue.\r\n```\r\n\r\n\r\nimport java.util.*;\r\n\r\npublic class Array{\r\n public static void main (String args[]);{\r\n\r\n\r\n    int a[]=new int[5];\r\n\r\n    Scanner sc=new Scanner(System.in);\r\n\r\n    System.out.println(&quot;Enter 5 numbers:&quot;);\r\n\r\n    for(int i=0;i&lt;5;i++){\r\n\r\n        a[]=sc.nextInt();\r\n\r\n    }\r\n\r\n    System.out.println(&quot;You entered:&quot;);\r\n\r\n    for(int i=0;i&lt;5;i++){\r\n\r\n      System.out.println(a[i]);\r\n\r\n    }\r\n\r\n    sc.close();\r\n\r\n   }\r\n\r\n\r\n}\r\n```\r\nThis problem is faced in vs code.","title":"Although I close my Scanner class at the end of the code as sc.close(); but still it shows the error as source leakage : sc was never closed. Help me","body":"<p>When I try to compile, it runs but it highlights scanner object sc in yellow colour line prompting that sc was never closed.\nIt disappears only when I close my Scanner class immediately after I initialise it. But then my user input functionality is disrupted.</p>\n<p>I don't want to use try catch at this point. Because earlier codes didn't raise this issue.</p>\n<pre><code>\n\nimport java.util.*;\n\npublic class Array{\n public static void main (String args[]);{\n\n\n    int a[]=new int[5];\n\n    Scanner sc=new Scanner(System.in);\n\n    System.out.println(&quot;Enter 5 numbers:&quot;);\n\n    for(int i=0;i&lt;5;i++){\n\n        a[]=sc.nextInt();\n\n    }\n\n    System.out.println(&quot;You entered:&quot;);\n\n    for(int i=0;i&lt;5;i++){\n\n      System.out.println(a[i]);\n\n    }\n\n    sc.close();\n\n   }\n\n\n}\n</code></pre>\n<p>This problem is faced in vs code.</p>\n"},{"tags":["java","google-cloud-platform","google-app-engine","cron"],"comments":[{"owner":{"account_id":15760814,"reputation":68963,"user_id":11372593,"display_name":"guillaume blaquiere"},"score":0,"creation_date":1691956151,"post_id":76893778,"comment_id":135557476,"body_markdown":"My only answer is to redeploy the `cron.yaml` file. But obviously it does not work and it&#39;s almost impossible to reproduce your case. A ticket to Google Cloud support is the most suitable solution!","body":"My only answer is to redeploy the <code>cron.yaml</code> file. But obviously it does not work and it&#39;s almost impossible to reproduce your case. A ticket to Google Cloud support is the most suitable solution!"}],"answers":[{"tags":[],"owner":{"account_id":7549203,"reputation":31,"user_id":5731262,"display_name":"Matt"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1694970805,"creation_date":1694970805,"answer_id":77122881,"question_id":76893778,"body_markdown":"Resolved the issue by upgrading to the latest version of the cloud cli, then  gcloud app deploy cron.yaml worked.","title":"How do I disable GCP App Engine Cron Jobs?","body":"<p>Resolved the issue by upgrading to the latest version of the cloud cli, then  gcloud app deploy cron.yaml worked.</p>\n"}],"owner":{"account_id":7549203,"reputation":31,"user_id":5731262,"display_name":"Matt"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":61,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1694970805,"creation_date":1691936597,"question_id":76893778,"body_markdown":"I have an old Java (Maven) App Engine application in GCP and want to disable the &quot;App Engine Cron Jobs&quot;\r\n\r\nChanges to src/main/webapp/WEB-INF/cron.xml are ignored by the appengine-api-1.0-sdk (1.9.86) maven plugin (although deploys are otherwise fine)\r\n\r\nWith reference to https://stackoverflow.com/questions/47492050/how-to-cancel-or-stop-google-app-engine-cron-job, using `gcloud app deploy cron.yaml` only affects the &quot;Scheduler Jobs&quot; and I am unable to use the appcfg.sh (appengine-java-sdk-1.9.64) as authentication attempts to use a non-existent URL.\r\n\r\nAny advice or pointers would be very welcome.\r\n\r\nAttempted to use `mvn appengine:deploy` with com.google.appengine:appengine-api-1.0-sdk (1.9.86) but that does nothing to the cron\r\n\r\nAttempted to use `gcloud app deploy cron.yaml` only affects the &quot;Scheduler Jobs\r\n\r\nAttepted to use `appcfg.sh update_cron [YOUR_APP_DIR]` (1.9.64) but that is referencing a non-existent URL for authentication","title":"How do I disable GCP App Engine Cron Jobs?","body":"<p>I have an old Java (Maven) App Engine application in GCP and want to disable the &quot;App Engine Cron Jobs&quot;</p>\n<p>Changes to src/main/webapp/WEB-INF/cron.xml are ignored by the appengine-api-1.0-sdk (1.9.86) maven plugin (although deploys are otherwise fine)</p>\n<p>With reference to <a href=\"https://stackoverflow.com/questions/47492050/how-to-cancel-or-stop-google-app-engine-cron-job\">How to cancel or stop Google App Engine Cron Job</a>, using <code>gcloud app deploy cron.yaml</code> only affects the &quot;Scheduler Jobs&quot; and I am unable to use the appcfg.sh (appengine-java-sdk-1.9.64) as authentication attempts to use a non-existent URL.</p>\n<p>Any advice or pointers would be very welcome.</p>\n<p>Attempted to use <code>mvn appengine:deploy</code> with com.google.appengine:appengine-api-1.0-sdk (1.9.86) but that does nothing to the cron</p>\n<p>Attempted to use <code>gcloud app deploy cron.yaml</code> only affects the &quot;Scheduler Jobs</p>\n<p>Attepted to use <code>appcfg.sh update_cron [YOUR_APP_DIR]</code> (1.9.64) but that is referencing a non-existent URL for authentication</p>\n"},{"tags":["java","postgresql","spring-boot","hibernate","spring-data-jpa"],"comments":[{"owner":{"account_id":24440940,"reputation":3122,"user_id":18364656,"display_name":"Andrei Lisa"},"score":0,"creation_date":1694975184,"post_id":77122707,"comment_id":135959008,"body_markdown":"Can i know, why are you excluding the datasource auto configuration ?","body":"Can i know, why are you excluding the datasource auto configuration ?"},{"owner":{"account_id":10958918,"reputation":17,"user_id":8052828,"display_name":"Thirumalesu"},"score":0,"creation_date":1694994111,"post_id":77122707,"comment_id":135960830,"body_markdown":"I have a requirement to execute multiple .sql files at the time of application startup, after adding this spring.sql.init.data-locations=db/scripts/*.sql in the property file I got a BeanCreationException: Error creating bean with name &#39;dataSourceScriptDatabaseInitializer&#39; issue to resolve this issue I am trying to exclude it","body":"I have a requirement to execute multiple .sql files at the time of application startup, after adding this spring.sql.init.data-locations=db/scripts/*.sql in the property file I got a BeanCreationException: Error creating bean with name &#39;dataSourceScriptDatabaseInitializer&#39; issue to resolve this issue I am trying to exclude it"},{"owner":{"account_id":24440940,"reputation":3122,"user_id":18364656,"display_name":"Andrei Lisa"},"score":0,"creation_date":1695013588,"post_id":77122707,"comment_id":135962097,"body_markdown":"I think in this case is better to  use something like  liquibase or flyway for database scripts as version of control and init scripts","body":"I think in this case is better to  use something like  liquibase or flyway for database scripts as version of control and init scripts"},{"owner":{"account_id":10958918,"reputation":17,"user_id":8052828,"display_name":"Thirumalesu"},"score":0,"creation_date":1695014749,"post_id":77122707,"comment_id":135962202,"body_markdown":"Thanks for the suggestion, if it didn&#39;t work I will try to use the liquibase files only","body":"Thanks for the suggestion, if it didn&#39;t work I will try to use the liquibase files only"},{"owner":{"account_id":24440940,"reputation":3122,"user_id":18364656,"display_name":"Andrei Lisa"},"score":0,"creation_date":1695017382,"post_id":77122707,"comment_id":135962463,"body_markdown":"and also about your topic/problem i think this is relevant [question/answers](https://stackoverflow.com/questions/24508223/multiple-sql-import-files-in-spring-boot)","body":"and also about your topic/problem i think this is relevant <a href=\"https://stackoverflow.com/questions/24508223/multiple-sql-import-files-in-spring-boot\">question/answers</a>"},{"owner":{"account_id":10958918,"reputation":17,"user_id":8052828,"display_name":"Thirumalesu"},"score":0,"creation_date":1695022859,"post_id":77122707,"comment_id":135963332,"body_markdown":"Actually no, because I would like try with .sql files without using liquibase files","body":"Actually no, because I would like try with .sql files without using liquibase files"}],"answers":[{"tags":[],"owner":{"account_id":29214968,"reputation":186,"user_id":22381995,"display_name":"cant-code"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1694968993,"creation_date":1694968993,"answer_id":77122778,"question_id":77122707,"body_markdown":"As the error suggests, the files were not found.\r\nPlease use classpath: to specify that the sql files need to be picked up from resources.\r\n\r\n    spring.sql.init.data-locations=classpath:db/scripts/*.sql","title":"Could not found the UserRepository Bean when I exclude DataSourceAutoConfiguration class from the autoconfiguration in spring boot JPA","body":"<p>As the error suggests, the files were not found.\nPlease use classpath: to specify that the sql files need to be picked up from resources.</p>\n<pre><code>spring.sql.init.data-locations=classpath:db/scripts/*.sql\n</code></pre>\n"}],"owner":{"account_id":10958918,"reputation":17,"user_id":8052828,"display_name":"Thirumalesu"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":75,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1694968993,"creation_date":1694967653,"question_id":77122707,"body_markdown":"Initially, I got below error when I was trying to load multiple .sql files to run at the time of application start.\r\n\r\norg.springframework.beans.factory.BeanCreationException: Error creating bean with name &#39;dataSourceScriptDatabaseInitializer&#39; defined in class path resource [org/springframework/boot/autoconfigure/sql/init/DataSourceInitializationConfiguration.class]: Unable to load resources from db/scripts/*.sql\r\n\r\nAnd to resolve this issue I excluded the DataSourceAutoconfiguration.class like below:\r\n@SpringBootApplication(Exclude={DataSourceAutoConfiguration.class}\r\n\r\nbut not now for all the @Repository interfaces beans are not created.\r\n\r\nField userRepository in com.atlokal.user.mgmt.user.dao.UserDaoImpl required a bean of type &#39;com.atlokal.user.mgmt.user.dao.UserRepository&#39; that could not be found.\r\n\r\nThe injection point has the following annotations:\r\n\t- @org.springframework.beans.factory.annotation.Autowired(required=true)\r\n\r\n\r\nAction:\r\n\r\nConsider defining a bean of type &#39;com.atlokal.user.mgmt.user.dao.UserRepository&#39; in your configuration.\r\n\r\ncould you please help me out to solve this issue ?\r\n```\r\n@SpringBootApplication(exclude = {DataSourceAutoConfiguration.class})\r\npublic class AtlokalUserMgmtApplication {\r\n\r\n\tpublic static void main(String[] args) {\r\n\t\tSpringApplication.run(AtlokalUserMgmtApplication.class, args);\r\n\t}\r\n\r\n}\r\n\r\napplication.properties\r\n\r\nspring.jpa.hibernate.ddl-auto=none\r\nspring.sql.init.mode=always\r\nspring.sql.init.data-locations=db/scripts/*.sql\r\nspring.jpa.defer-datasource-initialization=false\r\n\r\nUserDaoImpl.java\r\n@Component\r\npublic class UserDaoImpl implements UserDao {\r\n\r\n    @Autowired\r\n    private UserRepository userRepository;\r\n\r\n    @Autowired\r\n    private ModelMapper modelMapper;\r\n    @Override\r\n    public UserEntity createUser(UserDto userDto) {\r\n        return userRepository.save(modelMapper.map(userDto,UserEntity.class));\r\n    }\r\n}\r\n\r\nUserRepository.java\r\n@Repository\r\npublic interface UserRepository extends JpaRepository&lt;UserEntity, Long&gt; {\r\n}\r\n```","title":"Could not found the UserRepository Bean when I exclude DataSourceAutoConfiguration class from the autoconfiguration in spring boot JPA","body":"<p>Initially, I got below error when I was trying to load multiple .sql files to run at the time of application start.</p>\n<p>org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'dataSourceScriptDatabaseInitializer' defined in class path resource [org/springframework/boot/autoconfigure/sql/init/DataSourceInitializationConfiguration.class]: Unable to load resources from db/scripts/*.sql</p>\n<p>And to resolve this issue I excluded the DataSourceAutoconfiguration.class like below:\n@SpringBootApplication(Exclude={DataSourceAutoConfiguration.class}</p>\n<p>but not now for all the @Repository interfaces beans are not created.</p>\n<p>Field userRepository in com.atlokal.user.mgmt.user.dao.UserDaoImpl required a bean of type 'com.atlokal.user.mgmt.user.dao.UserRepository' that could not be found.</p>\n<p>The injection point has the following annotations:\n- @org.springframework.beans.factory.annotation.Autowired(required=true)</p>\n<p>Action:</p>\n<p>Consider defining a bean of type 'com.atlokal.user.mgmt.user.dao.UserRepository' in your configuration.</p>\n<p>could you please help me out to solve this issue ?</p>\n<pre><code>@SpringBootApplication(exclude = {DataSourceAutoConfiguration.class})\npublic class AtlokalUserMgmtApplication {\n\n    public static void main(String[] args) {\n        SpringApplication.run(AtlokalUserMgmtApplication.class, args);\n    }\n\n}\n\napplication.properties\n\nspring.jpa.hibernate.ddl-auto=none\nspring.sql.init.mode=always\nspring.sql.init.data-locations=db/scripts/*.sql\nspring.jpa.defer-datasource-initialization=false\n\nUserDaoImpl.java\n@Component\npublic class UserDaoImpl implements UserDao {\n\n    @Autowired\n    private UserRepository userRepository;\n\n    @Autowired\n    private ModelMapper modelMapper;\n    @Override\n    public UserEntity createUser(UserDto userDto) {\n        return userRepository.save(modelMapper.map(userDto,UserEntity.class));\n    }\n}\n\nUserRepository.java\n@Repository\npublic interface UserRepository extends JpaRepository&lt;UserEntity, Long&gt; {\n}\n</code></pre>\n"},{"tags":["java","intellij-idea"],"comments":[{"owner":{"account_id":96690,"reputation":37290,"user_id":262683,"display_name":"Costi Ciudatu"},"score":1,"creation_date":1640203507,"post_id":70454534,"comment_id":124542605,"body_markdown":"Not sure what you mean by &quot;enum file&quot;. What language are you using? Java? And what are you trying to achieve? Create an `enum`?","body":"Not sure what you mean by &quot;enum file&quot;. What language are you using? Java? And what are you trying to achieve? Create an <code>enum</code>?"},{"owner":{"account_id":21986352,"reputation":3,"user_id":16260549,"display_name":"Cavia Power"},"score":0,"creation_date":1640203643,"post_id":70454534,"comment_id":124542642,"body_markdown":"So I am trying to get an Enum class in my java project in intelij and normaly you can just create an enum class but now I can&#39;t","body":"So I am trying to get an Enum class in my java project in intelij and normaly you can just create an enum class but now I can&#39;t"},{"owner":{"account_id":74704,"reputation":11534,"user_id":214525,"accept_rate":100,"display_name":"f1sh"},"score":1,"creation_date":1640203849,"post_id":70454534,"comment_id":124542707,"body_markdown":"what does &quot;now I can&#39;t&quot; mean? What exactly stops you from creating a .java file? Just create a regular new java class, then replace `class` with `enum`.","body":"what does &quot;now I can&#39;t&quot; mean? What exactly stops you from creating a .java file? Just create a regular new java class, then replace <code>class</code> with <code>enum</code>."}],"answers":[{"tags":[],"owner":{"account_id":23686708,"reputation":1,"user_id":17711546,"display_name":"Cashif"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1640205696,"creation_date":1640205696,"answer_id":70454865,"question_id":70454534,"body_markdown":" 1. I suggest that you should reinstall IntelliJ Idea IDE.\r\n 2. Use the latest version of IntelliJ idea.\r\n\r\n","title":"I can&#39;t make a enum file in intelij","body":"<ol>\n<li>I suggest that you should reinstall IntelliJ Idea IDE.</li>\n<li>Use the latest version of IntelliJ idea.</li>\n</ol>\n"},{"tags":[],"owner":{"account_id":23617210,"reputation":256,"user_id":17651108,"display_name":"Azadi Yazdani"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1640325189,"creation_date":1640205783,"answer_id":70454885,"question_id":70454534,"body_markdown":"If by &#39;enum file&#39;, you mean an enum class, It will be created just as any other class, except that you use word &#39;enum&#39; instead of &#39;class&#39;.\r\nFile -&gt; New -&gt; Java class.\r\nAfter clicking on Java class, select enum type.\r\n\r\nsee this link for more help:\r\nhttps://stackoverflow.com/questions/14431472/why-is-an-enum-declared-in-a-separate-file-in-java","title":"I can&#39;t make a enum file in intelij","body":"<p>If by 'enum file', you mean an enum class, It will be created just as any other class, except that you use word 'enum' instead of 'class'.\nFile -&gt; New -&gt; Java class.\nAfter clicking on Java class, select enum type.</p>\n<p>see this link for more help:\n<a href=\"https://stackoverflow.com/questions/14431472/why-is-an-enum-declared-in-a-separate-file-in-java\">Why is an enum declared in a separate file, in Java?</a></p>\n"},{"tags":[],"owner":{"account_id":322981,"reputation":310745,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1694968392,"creation_date":1640206990,"answer_id":70455065,"question_id":70454534,"body_markdown":"You can define an enum in Java by any of three ways:\r\n\r\n - In a separate `.java` file as shown in [this other correct Answer](https://stackoverflow.com/a/70454885/642706) by Yazdani. \r\n - Nested within another class. \r\n - Locally, within a method. &lt;br/&gt;(As of Java 16+, see [*Java JEP 395: Records*](https://openjdk.java.net/jeps/395).)\r\n\r\nIntelliJ supports all three. ","title":"I can&#39;t make a enum file in intelij","body":"<p>You can define an enum in Java by any of three ways:</p>\n<ul>\n<li>In a separate <code>.java</code> file as shown in <a href=\"https://stackoverflow.com/a/70454885/642706\">this other correct Answer</a> by Yazdani.</li>\n<li>Nested within another class.</li>\n<li>Locally, within a method. <br/>(As of Java 16+, see <a href=\"https://openjdk.java.net/jeps/395\" rel=\"nofollow noreferrer\"><em>Java JEP 395: Records</em></a>.)</li>\n</ul>\n<p>IntelliJ supports all three.</p>\n"}],"owner":{"account_id":21986352,"reputation":3,"user_id":16260549,"display_name":"Cavia Power"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1380,"favorite_count":0,"down_vote_count":3,"up_vote_count":0,"closed_date":1640207055,"answer_count":3,"score":-3,"last_activity_date":1694968392,"creation_date":1640203386,"question_id":70454534,"body_markdown":"So I am making a project in IntelliJ and I wanted to make an enum file but I couldn&#39;t find it. Has the enum file been replaced with another file or am I just stupid?","title":"I can&#39;t make a enum file in intelij","body":"<p>So I am making a project in IntelliJ and I wanted to make an enum file but I couldn't find it. Has the enum file been replaced with another file or am I just stupid?</p>\n"},{"tags":["java","eclipse","ide","comments","autocommenting"],"answers":[{"tags":[],"owner":{"account_id":15064163,"reputation":13519,"user_id":10871900,"display_name":"dan1st is crying"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1694968150,"creation_date":1694968150,"answer_id":77122735,"question_id":77122668,"body_markdown":"I am assuming you are extending `HttpServletRequest` since your `doGet` method is defined there and you are therefore overriding that method.\r\n\r\nSince you are overriding a method, you need to select `Overriding methods` in that menu and then enter your comment:\r\n\r\n[![enter image description here][1]][1]\r\n\r\nWith that, Eclipse will fill in the comment.\r\n\r\n  [1]: https://i.stack.imgur.com/majB1.png","title":"Eclipse - Java - Auto Commenting (Alt-Shift-J) just adds blank comments","body":"<p>I am assuming you are extending <code>HttpServletRequest</code> since your <code>doGet</code> method is defined there and you are therefore overriding that method.</p>\n<p>Since you are overriding a method, you need to select <code>Overriding methods</code> in that menu and then enter your comment:</p>\n<p><a href=\"https://i.stack.imgur.com/majB1.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/majB1.png\" alt=\"enter image description here\" /></a></p>\n<p>With that, Eclipse will fill in the comment.</p>\n"}],"owner":{"account_id":7881509,"reputation":133,"user_id":5955314,"accept_rate":60,"display_name":"jonesy19"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":18,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":77122735,"answer_count":1,"score":0,"last_activity_date":1694968150,"creation_date":1694967086,"question_id":77122668,"body_markdown":"I am trying to add comments to my code.  When I highlight a function and press Alt-Shift-J, it just adds three blank lines of commenting:\r\n    \r\n\r\n    /** \t \r\n     * \t \r\n     */ \t\r\n     protected void doGet(HttpServletRequest request,HttpServletResponse response) throws ServletException, IOException {\r\n         \tSystem.out.println(&quot;In Gateway doGet...&quot;);\r\n         \tthis.doRequest(&quot;GET&quot;, request, response); \t}\r\n\r\nNOTE - this is a screenshot of what my preferences looks like:\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/qinVB.png\r\n\r\nThe &quot;${tags} do nothing, but I put in a string for &quot;Title&quot; and it still does nothing. Can someone help me out please?","title":"Eclipse - Java - Auto Commenting (Alt-Shift-J) just adds blank comments","body":"<p>I am trying to add comments to my code.  When I highlight a function and press Alt-Shift-J, it just adds three blank lines of commenting:</p>\n<pre><code>/**      \n *   \n */     \n protected void doGet(HttpServletRequest request,HttpServletResponse response) throws ServletException, IOException {\n        System.out.println(&quot;In Gateway doGet...&quot;);\n        this.doRequest(&quot;GET&quot;, request, response);   }\n</code></pre>\n<p>NOTE - this is a screenshot of what my preferences looks like:\n<a href=\"https://i.stack.imgur.com/qinVB.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/qinVB.png\" alt=\"enter image description here\" /></a></p>\n<p>The &quot;${tags} do nothing, but I put in a string for &quot;Title&quot; and it still does nothing. Can someone help me out please?</p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":213468,"reputation":103494,"user_id":466862,"display_name":"Mark Rotteveel"},"score":3,"creation_date":1694952586,"post_id":77121601,"comment_id":135956416,"body_markdown":"The source code of both `ArrayList` and `HashSet` is included with Java. You can inspect this and see they have separate copies of the references.","body":"The source code of both <code>ArrayList</code> and <code>HashSet</code> is included with Java. You can inspect this and see they have separate copies of the references."},{"owner":{"account_id":2053598,"reputation":41316,"user_id":1831987,"display_name":"VGR"},"score":0,"creation_date":1694961598,"post_id":77121601,"comment_id":135957381,"body_markdown":"`new ArrayList&lt;&gt;(hashset)` copies references to objects only.  That constructor has no idea how to make copies of objects.  (It would pretty hard to implement that.  Would it try to clone them?  Serialize them?  Look for a copy constructor?)","body":"<code>new ArrayList&lt;&gt;(hashset)</code> copies references to objects only.  That constructor has no idea how to make copies of objects.  (It would pretty hard to implement that.  Would it try to clone them?  Serialize them?  Look for a copy constructor?)"}],"answers":[{"tags":[],"owner":{"account_id":401843,"reputation":89768,"user_id":768644,"display_name":"rzwitserloot"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1694967969,"creation_date":1694951016,"answer_id":77121632,"question_id":77121601,"body_markdown":"If the output is `n` elements, then your HashSet contains `n` elements, and so does the ArrayList. It&#39;s a complete copy, so the memory requirement of both the arraylist and the hashset existing side by side (which they will, here) grows linearly to the input size. But it is about twice as large as what it would have been, had there only been an arraylist and no other data structures that grow relative to input size.\r\n\r\n__However__,\r\n\r\nMore generally, &#39;the exercise is supposed to be `O(1)` except for the arraylist&#39; __does not make any sense__. O() notation is a relative concept: It says __nothing__ about the space or time usage at any given point, it __only__ says something about how the memory load grows relative to input. This shouldn&#39;t be the problem unless a human is looking at this code.\r\n\r\nGiven that the exercise &#39;prices in&#39; the space cost of the output arraylist, it can&#39;t then state that the _runtime behaviour_ behaves differently. It grows linear to input size, it already does that due to the output array list, it is not feasible to try to disregard just the array list to witness the &#39;total memory usage of the method&#39;.\r\n\r\nThe only real way to do that is to use code analysis. Leetcode does not have humans that look at your code to rate it, and as far as I know, they do not run tools that check _the source_.\r\n\r\nHence, whatever the problem is, I doubt its the hashset.","title":"Space complexity when converting HashSet to ArrayList","body":"<p>If the output is <code>n</code> elements, then your HashSet contains <code>n</code> elements, and so does the ArrayList. It's a complete copy, so the memory requirement of both the arraylist and the hashset existing side by side (which they will, here) grows linearly to the input size. But it is about twice as large as what it would have been, had there only been an arraylist and no other data structures that grow relative to input size.</p>\n<p><strong>However</strong>,</p>\n<p>More generally, 'the exercise is supposed to be <code>O(1)</code> except for the arraylist' <strong>does not make any sense</strong>. O() notation is a relative concept: It says <strong>nothing</strong> about the space or time usage at any given point, it <strong>only</strong> says something about how the memory load grows relative to input. This shouldn't be the problem unless a human is looking at this code.</p>\n<p>Given that the exercise 'prices in' the space cost of the output arraylist, it can't then state that the <em>runtime behaviour</em> behaves differently. It grows linear to input size, it already does that due to the output array list, it is not feasible to try to disregard just the array list to witness the 'total memory usage of the method'.</p>\n<p>The only real way to do that is to use code analysis. Leetcode does not have humans that look at your code to rate it, and as far as I know, they do not run tools that check <em>the source</em>.</p>\n<p>Hence, whatever the problem is, I doubt its the hashset.</p>\n"},{"tags":[],"owner":{"account_id":216120,"reputation":49213,"user_id":471160,"accept_rate":90,"display_name":"marcinj"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1694966804,"creation_date":1694966804,"answer_id":77122646,"question_id":77121601,"body_markdown":"When you convert a HashSet to an ArrayList in Java using the ArrayList constructor, it will create a new ArrayList with separate memory allocation. The constructor called is:\r\n\r\n&gt; public ArrayList(Collection&lt;? extends E&gt; c)\r\n&gt; \r\n&gt; Constructs a list containing the elements of the specified collection,\r\n&gt; in the order they are returned by the collection&#39;s iterator.\r\n\r\nThe elements of the HashSet are copied into this new ArrayList. Therefore, it does not &quot;wrap&quot; the underlying array of the HashSet, but rather allocates additional memory for the new ArrayList. This operation does not maintain the constant space complexity O(1), as it requires O(n) space where n is the number of elements in the HashSet.\r\n\r\nThis leetcode problem, expects you to make use of detail given in the task which allows you to solve it in expected time and space complexity.","title":"Space complexity when converting HashSet to ArrayList","body":"<p>When you convert a HashSet to an ArrayList in Java using the ArrayList constructor, it will create a new ArrayList with separate memory allocation. The constructor called is:</p>\n<blockquote>\n<p>public ArrayList(Collection&lt;? extends E&gt; c)</p>\n<p>Constructs a list containing the elements of the specified collection,\nin the order they are returned by the collection's iterator.</p>\n</blockquote>\n<p>The elements of the HashSet are copied into this new ArrayList. Therefore, it does not &quot;wrap&quot; the underlying array of the HashSet, but rather allocates additional memory for the new ArrayList. This operation does not maintain the constant space complexity O(1), as it requires O(n) space where n is the number of elements in the HashSet.</p>\n<p>This leetcode problem, expects you to make use of detail given in the task which allows you to solve it in expected time and space complexity.</p>\n"}],"owner":{"account_id":24037562,"reputation":77,"user_id":18017663,"display_name":"DrinkandDerive"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":76,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"accepted_answer_id":77122646,"answer_count":2,"score":-1,"last_activity_date":1694967969,"creation_date":1694950620,"question_id":77121601,"body_markdown":"Recently, I have been solving problems in Leetcode. In general, there are many problems where we are supposed to return an ArrayList, array, etc.\r\n\r\nFor example, in this question &lt;https://leetcode.com/problems/find-all-duplicates-in-an-array/description/&gt; we are supposed to return an ArrayList. The space complexity for this question is strictly O(1). That is, ignoring the size of the returned ArrayList, we should only use only constant space.\r\n\r\nI find that there are many questions that are solvable using HashSet, but I can&#39;t return the HashSet (like in the case of the question I mentioned) because the return type is ArrayList/List.\r\n\r\nUsing the java ArrayList constructor, we can convert the HashSet to ArrayList directly. I can write a program like below to return the List.\r\n\r\n    return new ArrayList&lt;&gt;(hashset);\r\n\r\nWhen I try to convert HashSet to ArrayList, will copies of n elements present in the hashSet be made separately inside the memory or will an ArrayList created in this way essentially &quot;wrap&quot; the underlying array of the HashSet and does not copy the elements or allocate additional memory for them?\r\n","title":"Space complexity when converting HashSet to ArrayList","body":"<p>Recently, I have been solving problems in Leetcode. In general, there are many problems where we are supposed to return an ArrayList, array, etc.</p>\n<p>For example, in this question <a href=\"https://leetcode.com/problems/find-all-duplicates-in-an-array/description/\" rel=\"nofollow noreferrer\">https://leetcode.com/problems/find-all-duplicates-in-an-array/description/</a> we are supposed to return an ArrayList. The space complexity for this question is strictly O(1). That is, ignoring the size of the returned ArrayList, we should only use only constant space.</p>\n<p>I find that there are many questions that are solvable using HashSet, but I can't return the HashSet (like in the case of the question I mentioned) because the return type is ArrayList/List.</p>\n<p>Using the java ArrayList constructor, we can convert the HashSet to ArrayList directly. I can write a program like below to return the List.</p>\n<pre><code>return new ArrayList&lt;&gt;(hashset);\n</code></pre>\n<p>When I try to convert HashSet to ArrayList, will copies of n elements present in the hashSet be made separately inside the memory or will an ArrayList created in this way essentially &quot;wrap&quot; the underlying array of the HashSet and does not copy the elements or allocate additional memory for them?</p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":1691630,"reputation":49583,"user_id":1553851,"accept_rate":73,"display_name":"shmosel"},"score":1,"creation_date":1504641473,"post_id":46062400,"comment_id":79085607,"body_markdown":"The same reason you shouldn&#39;t return a collection from a getter without a defensive copy. It breaks encapsulation.","body":"The same reason you shouldn&#39;t return a collection from a getter without a defensive copy. It breaks encapsulation."},{"owner":{"account_id":162699,"reputation":138060,"user_id":3788176,"accept_rate":54,"display_name":"Andy Turner"},"score":1,"creation_date":1504641690,"post_id":46062400,"comment_id":79085719,"body_markdown":"There is the same problem with the constructor as with the setter: because you don&#39;t take a defensive copy, the caller can change the list held by `Example`.","body":"There is the same problem with the constructor as with the setter: because you don&#39;t take a defensive copy, the caller can change the list held by <code>Example</code>."},{"owner":{"account_id":28104689,"reputation":512,"user_id":21473475,"display_name":"Arfur Narf"},"score":0,"creation_date":1694969613,"post_id":46062400,"comment_id":135958275,"body_markdown":"You have no encapsulation.  Presumably the point of an instance this class is to maintain a relationship between an id and a list of names.  But anyone can change the id without changing the names, and change the names without changing the id.  There are therefore no guarantees at all, and you might as well use public variables rather than setters and getters.","body":"You have no encapsulation.  Presumably the point of an instance this class is to maintain a relationship between an id and a list of names.  But anyone can change the id without changing the names, and change the names without changing the id.  There are therefore no guarantees at all, and you might as well use public variables rather than setters and getters."}],"answers":[{"tags":[],"owner":{"account_id":1640377,"reputation":402,"user_id":1512950,"display_name":"Sticks"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1504641263,"creation_date":1504641263,"answer_id":46062439,"question_id":46062400,"body_markdown":"Since the private variable names is owned by your class you can ensure that you have control over its contents within the class.  If you change the reference of that variable to a list that gets passed in then you no longer are certain that your instance won&#39;t be changed externally since both your class AND the class that passed the new list instance will both have a reference/access to it.  Same is true with getNames() - any class that calls that method now has full access to change the contents of the list externally from the class.\r\n","title":"Why is it bad practice to allow to set a collection?","body":"<p>Since the private variable names is owned by your class you can ensure that you have control over its contents within the class.  If you change the reference of that variable to a list that gets passed in then you no longer are certain that your instance won't be changed externally since both your class AND the class that passed the new list instance will both have a reference/access to it.  Same is true with getNames() - any class that calls that method now has full access to change the contents of the list externally from the class.</p>\n"},{"tags":[],"owner":{"account_id":15988,"reputation":872868,"user_id":34397,"accept_rate":87,"display_name":"SLaks"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1504641286,"creation_date":1504641286,"answer_id":46062447,"question_id":46062400,"body_markdown":"That would give you two ways of changing the contents (`getNames().add(...)` vs. `setNames(Arrays.asList(...))`).  \r\nThis is confusing.\r\n\r\nYou should pick a single option and make the other option impossible.","title":"Why is it bad practice to allow to set a collection?","body":"<p>That would give you two ways of changing the contents (<code>getNames().add(...)</code> vs. <code>setNames(Arrays.asList(...))</code>).<br>\nThis is confusing.</p>\n\n<p>You should pick a single option and make the other option impossible.</p>\n"},{"tags":[],"owner":{"account_id":11658391,"reputation":80,"user_id":8537453,"display_name":"user8537453"},"down_vote_count":2,"up_vote_count":0,"is_accepted":false,"score":-2,"last_activity_date":1504642050,"creation_date":1504641361,"answer_id":46062469,"question_id":46062400,"body_markdown":"Using get and set methods allows you to perform verification and validation on the input before it can cause problems. It can also be used to transform info going into and out of your system for the convenience of the program and user.\r\n\r\nEdit\r\n\r\nJust to be clear defensive measures are part of the verification and validation I was talking about.","title":"Why is it bad practice to allow to set a collection?","body":"<p>Using get and set methods allows you to perform verification and validation on the input before it can cause problems. It can also be used to transform info going into and out of your system for the convenience of the program and user.</p>\n\n<p>Edit</p>\n\n<p>Just to be clear defensive measures are part of the verification and validation I was talking about.</p>\n"},{"tags":[],"owner":{"account_id":2818342,"reputation":299828,"user_id":2422776,"display_name":"Mureinik"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1694967057,"creation_date":1504641435,"answer_id":46062493,"question_id":46062400,"body_markdown":"A lot of the built-in collections are mutable, so storing such a value may allow an external class to modify the internal state of your `Example` in a way you did not plan. Consider the following snippet:\r\n\r\n    List&lt;Stirng&gt; names = new ArrayList&lt;&gt;();\r\n    names.add(&quot;Stack&quot;);\r\n    names.add(&quot;Overflow&quot;);\r\n    \r\n    Example example = new Example();\r\n    example.setNames(names); \r\n    // example.getNames() returns [&quot;Stack&quot;, &quot;Overflow&quot;]\r\n    \r\n    names.add(&quot;Exchange&quot;);\r\n    // example.getNames now returns [&quot;Stack&quot;, &quot;Overflow&quot;, &quot;Exchange&quot;]!\r\n\r\nA safer approach could be to copy the contents of the passed list:\r\n\r\n    public void setNames(List&lt;String&gt; names){\r\n       this.names = new ArrayList&lt;&gt;(names);\r\n    }","title":"Why is it bad practice to allow to set a collection?","body":"<p>A lot of the built-in collections are mutable, so storing such a value may allow an external class to modify the internal state of your <code>Example</code> in a way you did not plan. Consider the following snippet:</p>\n<pre><code>List&lt;Stirng&gt; names = new ArrayList&lt;&gt;();\nnames.add(&quot;Stack&quot;);\nnames.add(&quot;Overflow&quot;);\n\nExample example = new Example();\nexample.setNames(names); \n// example.getNames() returns [&quot;Stack&quot;, &quot;Overflow&quot;]\n\nnames.add(&quot;Exchange&quot;);\n// example.getNames now returns [&quot;Stack&quot;, &quot;Overflow&quot;, &quot;Exchange&quot;]!\n</code></pre>\n<p>A safer approach could be to copy the contents of the passed list:</p>\n<pre><code>public void setNames(List&lt;String&gt; names){\n   this.names = new ArrayList&lt;&gt;(names);\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2016660,"reputation":263,"user_id":1803810,"display_name":"leoconco"},"down_vote_count":0,"up_vote_count":4,"is_accepted":true,"score":4,"last_activity_date":1504641590,"creation_date":1504641590,"answer_id":46062525,"question_id":46062400,"body_markdown":"The logic behind set and get operations is to allow validation or replacing of inner representation, if you let an external class set the specific implementation, you lose control over the insertion logic (allows duplicates? is ordered?, is mutable?), and you make you object harder to use, as the users of it have to decide that, when is very probable that they don&#39;t care.","title":"Why is it bad practice to allow to set a collection?","body":"<p>The logic behind set and get operations is to allow validation or replacing of inner representation, if you let an external class set the specific implementation, you lose control over the insertion logic (allows duplicates? is ordered?, is mutable?), and you make you object harder to use, as the users of it have to decide that, when is very probable that they don't care.</p>\n"},{"tags":[],"owner":{"account_id":162699,"reputation":138060,"user_id":3788176,"accept_rate":54,"display_name":"Andy Turner"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1504642422,"creation_date":1504642422,"answer_id":46062702,"question_id":46062400,"body_markdown":"A slightly different answer to those here already is that *setters are a bad practice* (*), whether you&#39;re setting a collection property or some other type.\r\n\r\nTo quote *Effective Java 2nd Ed* Item 15: &quot;Minimize mutability&quot;:\r\n\r\n&gt; There are many good reasons for [making classes immutable]: Immutable classes\r\nare easier to design, implement, and use than mutable classes. They are less prone\r\nto error and are more secure.\r\n\r\nThere is also a description of immutable classes in [the Oracle tutorial](https://docs.oracle.com/javase/tutorial/essential/concurrency/immutable.html).\r\n\r\n---\r\n\r\n(*) That&#39;s not to say that you should never use them; just that you should design classes to be immutable as a default position, and only make them mutable in the few occasions where it is actually required - and that&#39;s less often than you might imagine. To quote the same item in Effective Java:\r\n\r\n&gt; Classes should be immutable unless there’s a very good reason to make them\r\nmutable","title":"Why is it bad practice to allow to set a collection?","body":"<p>A slightly different answer to those here already is that <em>setters are a bad practice</em> (*), whether you're setting a collection property or some other type.</p>\n\n<p>To quote <em>Effective Java 2nd Ed</em> Item 15: \"Minimize mutability\":</p>\n\n<blockquote>\n  <p>There are many good reasons for [making classes immutable]: Immutable classes\n  are easier to design, implement, and use than mutable classes. They are less prone\n  to error and are more secure.</p>\n</blockquote>\n\n<p>There is also a description of immutable classes in <a href=\"https://docs.oracle.com/javase/tutorial/essential/concurrency/immutable.html\" rel=\"nofollow noreferrer\">the Oracle tutorial</a>.</p>\n\n<hr>\n\n<p>(*) That's not to say that you should never use them; just that you should design classes to be immutable as a default position, and only make them mutable in the few occasions where it is actually required - and that's less often than you might imagine. To quote the same item in Effective Java:</p>\n\n<blockquote>\n  <p>Classes should be immutable unless there’s a very good reason to make them\n  mutable</p>\n</blockquote>\n"}],"owner":{"account_id":5676941,"reputation":804,"user_id":4489743,"accept_rate":62,"display_name":"Yuval"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":577,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"accepted_answer_id":46062525,"answer_count":6,"score":4,"last_activity_date":1694967057,"creation_date":1504641098,"question_id":46062400,"body_markdown":"Let&#39;s say we have a class with a simple collection (a list for instance). The class contains a constructor, getters and setters. \r\nI&#39;ve been told that it is a bad practice to set the collection directly.\r\n\r\n    class Example{\r\n        private String id;\r\n        private List&lt;String&gt; names;\r\n    \r\n        public Example(String id, List&lt;String&gt; names){\r\n            this.id = id;\r\n            this.names = names;\r\n        }\r\n    \r\n        public String getId(){\r\n            return id;\r\n        }\r\n    \r\n        public List&lt;String&gt; getNames(){\r\n            return names;\r\n        }\r\n    \r\n        public void setId(String id){\r\n            this.id = id;\r\n        }\r\n    \r\n        public void setNames(List&lt;String&gt; names){\r\n           this.names = names;\r\n        }\r\n    }\r\n\r\n \r\nCan anyone point the disadvantages of writing the method `setNames()`?","title":"Why is it bad practice to allow to set a collection?","body":"<p>Let's say we have a class with a simple collection (a list for instance). The class contains a constructor, getters and setters. \nI've been told that it is a bad practice to set the collection directly.</p>\n\n<pre><code>class Example{\n    private String id;\n    private List&lt;String&gt; names;\n\n    public Example(String id, List&lt;String&gt; names){\n        this.id = id;\n        this.names = names;\n    }\n\n    public String getId(){\n        return id;\n    }\n\n    public List&lt;String&gt; getNames(){\n        return names;\n    }\n\n    public void setId(String id){\n        this.id = id;\n    }\n\n    public void setNames(List&lt;String&gt; names){\n       this.names = names;\n    }\n}\n</code></pre>\n\n<p>Can anyone point the disadvantages of writing the method <code>setNames()</code>?</p>\n"},{"tags":["java","file-io","resources"],"comments":[{"owner":{"account_id":11683,"reputation":1438169,"user_id":22656,"accept_rate":86,"display_name":"Jon Skeet"},"score":5,"creation_date":1368636116,"post_id":16570523,"comment_id":23809582,"body_markdown":"Have you checked that it really *is* in the jar file? Have you checked the file casing?","body":"Have you checked that it really <i>is</i> in the jar file? Have you checked the file casing?"},{"owner":{"display_name":"user1131435"},"score":1,"creation_date":1368636178,"post_id":16570523,"comment_id":23809619,"body_markdown":"@JonSkeet It is indeed being compiled into the JAR file in the appropriate location, and the case is correct.","body":"@JonSkeet It is indeed being compiled into the JAR file in the appropriate location, and the case is correct."},{"owner":{"display_name":"user1131435"},"score":1,"creation_date":1368636566,"post_id":16570523,"comment_id":23809824,"body_markdown":"@greedybuddha While I can&#39;t invoke that from a static context, I can invoke it using `Lifepaths.class`. That being said, why does `getClassLoader()` allow it to work? (Also, feel free to post an answer!)","body":"@greedybuddha While I can&#39;t invoke that from a static context, I can invoke it using <code>Lifepaths.class</code>. That being said, why does <code>getClassLoader()</code> allow it to work? (Also, feel free to post an answer!)"},{"owner":{"account_id":238157,"reputation":37489,"user_id":506855,"accept_rate":47,"display_name":"Puce"},"score":0,"creation_date":1368637152,"post_id":16570523,"comment_id":23810126,"body_markdown":"Can you show `Lifepaths.getClass()`? There is no such static method defined in Object...","body":"Can you show <code>Lifepaths.getClass()</code>? There is no such static method defined in Object..."},{"owner":{"account_id":238157,"reputation":37489,"user_id":506855,"accept_rate":47,"display_name":"Puce"},"score":0,"creation_date":1368637182,"post_id":16570523,"comment_id":23810142,"body_markdown":"Are you using any custom classloaders (e.g. via OSGi)?","body":"Are you using any custom classloaders (e.g. via OSGi)?"},{"owner":{"display_name":"user1131435"},"score":0,"creation_date":1368637202,"post_id":16570523,"comment_id":23810154,"body_markdown":"@Puce Sorry, that one was a typo. Also, no custom classloaders","body":"@Puce Sorry, that one was a typo. Also, no custom classloaders"},{"owner":{"account_id":2014980,"reputation":9943,"user_id":1802512,"accept_rate":80,"display_name":"hoaz"},"score":0,"creation_date":1368637366,"post_id":16570523,"comment_id":23810240,"body_markdown":"Change your code to `Lifepaths.class.getResourceAsStream(...)`, you are trying to load your resource using system class loader","body":"Change your code to <code>Lifepaths.class.getResourceAsStream(...)</code>, you are trying to load your resource using system class loader"},{"owner":{"account_id":183279,"reputation":168313,"user_id":418556,"accept_rate":98,"display_name":"Andrew Thompson"},"score":1,"creation_date":1368639396,"post_id":16570523,"comment_id":23811338,"body_markdown":"Have a look at [this answer](http://stackoverflow.com/a/16564611/418556) &amp; see if you can get it working using `getResource(String)`.  BTW - I have always had problems getting either of those to work in a `static` context.  The problem is basically that the class loader obtained is is the one intended for J2SE classes.  You need to get access to the **context** class loader which is intended for the application itself.","body":"Have a look at <a href=\"http://stackoverflow.com/a/16564611/418556\">this answer</a> &amp; see if you can get it working using <code>getResource(String)</code>.  BTW - I have always had problems getting either of those to work in a <code>static</code> context.  The problem is basically that the class loader obtained is is the one intended for J2SE classes.  You need to get access to the <b>context</b> class loader which is intended for the application itself."},{"owner":{"account_id":8873341,"reputation":1424,"user_id":6626422,"display_name":"Thecarisma"},"score":0,"creation_date":1581247054,"post_id":16570523,"comment_id":106360039,"body_markdown":"I was stuck on this issue for a long time only for me to realize the path should not contain double slash. `/path//file.txt` will not work but `/path/file.txt` will work and the path is case sensitive.","body":"I was stuck on this issue for a long time only for me to realize the path should not contain double slash. <code>&#47;path&#47;&#47;file.txt</code> will not work but <code>&#47;path&#47;file.txt</code> will work and the path is case sensitive."}],"answers":[{"tags":[],"owner":{"account_id":238157,"reputation":37489,"user_id":506855,"accept_rate":47,"display_name":"Puce"},"down_vote_count":1,"up_vote_count":71,"is_accepted":false,"score":70,"last_activity_date":1368637380,"creation_date":1368636650,"answer_id":16570799,"question_id":16570523,"body_markdown":"The rules are as follows:\r\n\r\n1. check the location of the file you want to load inside the JAR (and thus also make sure it actually added to the JAR)\r\n2. use either an absolute path: path starts at the root of the JAR\r\n3. use an relative path: path starts at the package directory of the class you&#39;re calling getResource/ getResoucreAsStream\r\n\r\nAnd try:\r\n\r\n    Lifepaths.class.getResourceAsStream(&quot;/initialization/Lifepaths.txt&quot;)\r\n\r\ninstead of\r\n\r\n    Lifepaths.class.getClass().getResourceAsStream(&quot;/initialization/Lifepaths.txt&quot;)\r\n\r\n(not sure if it makes a difference, but the former will use the correct ClassLoader/ JAR, while I&#39;m not sure with the latter)\r\n\r\n","title":"getResourceAsStream returns null","body":"<p>The rules are as follows:</p>\n\n<ol>\n<li>check the location of the file you want to load inside the JAR (and thus also make sure it actually added to the JAR)</li>\n<li>use either an absolute path: path starts at the root of the JAR</li>\n<li>use an relative path: path starts at the package directory of the class you're calling getResource/ getResoucreAsStream</li>\n</ol>\n\n<p>And try:</p>\n\n<pre><code>Lifepaths.class.getResourceAsStream(\"/initialization/Lifepaths.txt\")\n</code></pre>\n\n<p>instead of</p>\n\n<pre><code>Lifepaths.class.getClass().getResourceAsStream(\"/initialization/Lifepaths.txt\")\n</code></pre>\n\n<p>(not sure if it makes a difference, but the former will use the correct ClassLoader/ JAR, while I'm not sure with the latter)</p>\n"},{"tags":[],"owner":{"account_id":2014980,"reputation":9943,"user_id":1802512,"accept_rate":80,"display_name":"hoaz"},"down_vote_count":2,"up_vote_count":229,"is_accepted":true,"score":227,"last_activity_date":1688840060,"creation_date":1368637584,"answer_id":16571046,"question_id":16570523,"body_markdown":"`Lifepaths.class.getClass().getResourceAsStream(...)` loads resources using system class loader, it obviously fails because it does not see your JARs\r\n\r\n`Lifepaths.class.getResourceAsStream(...)` loads resources using the same class loader that loaded Lifepaths class and it should have access to resources in your JARs\r\n\r\nWhen invoking getResourceAsStream(name), the name must start with &quot;/&quot;. I am not sure whether this is necessary, but I have problem without it","title":"getResourceAsStream returns null","body":"<p><code>Lifepaths.class.getClass().getResourceAsStream(...)</code> loads resources using system class loader, it obviously fails because it does not see your JARs</p>\n<p><code>Lifepaths.class.getResourceAsStream(...)</code> loads resources using the same class loader that loaded Lifepaths class and it should have access to resources in your JARs</p>\n<p>When invoking getResourceAsStream(name), the name must start with &quot;/&quot;. I am not sure whether this is necessary, but I have problem without it</p>\n"},{"tags":[],"owner":{"account_id":2676494,"reputation":7508,"user_id":2312796,"accept_rate":86,"display_name":"greedybuddha"},"down_vote_count":0,"up_vote_count":60,"is_accepted":false,"score":60,"last_activity_date":1599835835,"creation_date":1368637956,"answer_id":16571137,"question_id":16570523,"body_markdown":"So there are several ways to get a resource from a jar and each has slightly different syntax where the path needs to be specified differently.\r\n\r\nThe best explanation I have seen is this article from [InfoWorld][1]. I&#39;ll summarize here, but if you want to know more you should check out the article.\r\n\r\nMethods\r\n\r\n1) `ClassLoader.getResourceAsStream()`.  \r\n\r\nFormat: &quot;/&quot;-separated names; no leading &quot;/&quot; (all names are absolute). \r\n\r\nExample: `this.getClass().getClassLoader().getResourceAsStream(&quot;some/pkg/resource.properties&quot;);`\r\n\r\n2) `Class.getResourceAsStream()`\r\n\r\nFormat: &quot;/&quot;-separated names; leading &quot;/&quot; indicates absolute names; all other names are relative to the class&#39;s package\r\n\r\nExample: `this.getClass().getResourceAsStream(&quot;/some/pkg/resource.properties&quot;);`\r\n\r\nUpdated Sep 2020: Changed article link. Original article was from Javaworld, it is now hosted on InfoWorld (and has many more ads)\r\n\r\n  [1]: https://www.infoworld.com/article/2077352/smartly-load-your-properties.html","title":"getResourceAsStream returns null","body":"<p>So there are several ways to get a resource from a jar and each has slightly different syntax where the path needs to be specified differently.</p>\n<p>The best explanation I have seen is this article from <a href=\"https://www.infoworld.com/article/2077352/smartly-load-your-properties.html\" rel=\"noreferrer\">InfoWorld</a>. I'll summarize here, but if you want to know more you should check out the article.</p>\n<p>Methods</p>\n<ol>\n<li><code>ClassLoader.getResourceAsStream()</code>.</li>\n</ol>\n<p>Format: &quot;/&quot;-separated names; no leading &quot;/&quot; (all names are absolute).</p>\n<p>Example: <code>this.getClass().getClassLoader().getResourceAsStream(&quot;some/pkg/resource.properties&quot;);</code></p>\n<ol start=\"2\">\n<li><code>Class.getResourceAsStream()</code></li>\n</ol>\n<p>Format: &quot;/&quot;-separated names; leading &quot;/&quot; indicates absolute names; all other names are relative to the class's package</p>\n<p>Example: <code>this.getClass().getResourceAsStream(&quot;/some/pkg/resource.properties&quot;);</code></p>\n<p>Updated Sep 2020: Changed article link. Original article was from Javaworld, it is now hosted on InfoWorld (and has many more ads)</p>\n"},{"tags":[],"owner":{"account_id":2767775,"reputation":123,"user_id":2383064,"display_name":"MrD"},"down_vote_count":0,"up_vote_count":9,"is_accepted":false,"score":9,"last_activity_date":1369601749,"creation_date":1369601749,"answer_id":16763614,"question_id":16570523,"body_markdown":"You might want to try this to get the stream i.e first get the url and then open it as stream. \r\n\r\n    URL url = getClass().getResource(&quot;/initialization/Lifepaths.txt&quot;); \r\n    InputStream strm = url.openStream(); \r\n\r\nI once had a similar question: https://stackoverflow.com/questions/16563622/reading-txt-file-from-jar-fails-but-reading-image-works/16564611#16564611","title":"getResourceAsStream returns null","body":"<p>You might want to try this to get the stream i.e first get the url and then open it as stream. </p>\n\n<pre><code>URL url = getClass().getResource(\"/initialization/Lifepaths.txt\"); \nInputStream strm = url.openStream(); \n</code></pre>\n\n<p>I once had a similar question: <a href=\"https://stackoverflow.com/questions/16563622/reading-txt-file-from-jar-fails-but-reading-image-works/16564611#16564611\">Reading txt file from jar fails but reading image works</a></p>\n"},{"tags":[],"owner":{"account_id":3600027,"reputation":65,"user_id":3003526,"accept_rate":33,"display_name":"Jain"},"down_vote_count":15,"up_vote_count":3,"is_accepted":false,"score":-12,"last_activity_date":1398247683,"creation_date":1398244791,"answer_id":23239981,"question_id":16570523,"body_markdown":"@Emracool... I&#39;d suggest you an alternative. Since you seem to be trying to load a *.txt file. Better to use `FileInputStream()` rather then this annoying `getClass().getClassLoader().getResourceAsStream()` or `getClass().getResourceAsStream()`. At least your code will execute properly.  ","title":"getResourceAsStream returns null","body":"<p>@Emracool... I'd suggest you an alternative. Since you seem to be trying to load a *.txt file. Better to use <code>FileInputStream()</code> rather then this annoying <code>getClass().getClassLoader().getResourceAsStream()</code> or <code>getClass().getResourceAsStream()</code>. At least your code will execute properly.  </p>\n"},{"tags":[],"owner":{"account_id":1276869,"reputation":454,"user_id":1231935,"display_name":"Paul Smith"},"down_vote_count":1,"up_vote_count":16,"is_accepted":false,"score":15,"last_activity_date":1405526304,"creation_date":1405526304,"answer_id":24785394,"question_id":16570523,"body_markdown":"Don&#39;t use absolute paths, make them relative to the &#39;resources&#39; directory in your project. Quick and dirty code that displays the contents of MyTest.txt from the directory &#39;resources&#39;.\r\n\r\n    @Test\r\n    public void testDefaultResource() {\r\n        // can we see default resources\r\n        BufferedInputStream result = (BufferedInputStream) \r\n             Config.class.getClassLoader().getResourceAsStream(&quot;MyTest.txt&quot;);\r\n        byte [] b = new byte[256];\r\n        int val = 0;\r\n        String txt = null;\r\n        do {\r\n            try {\r\n                val = result.read(b);\r\n                if (val &gt; 0) {\r\n                    txt += new String(b, 0, val);\r\n                }\r\n            } catch (IOException e) {\r\n                e.printStackTrace();\r\n            } \r\n        } while (val &gt; -1);\r\n        System.out.println(txt);\r\n    }\r\n","title":"getResourceAsStream returns null","body":"<p>Don't use absolute paths, make them relative to the 'resources' directory in your project. Quick and dirty code that displays the contents of MyTest.txt from the directory 'resources'.</p>\n\n<pre><code>@Test\npublic void testDefaultResource() {\n    // can we see default resources\n    BufferedInputStream result = (BufferedInputStream) \n         Config.class.getClassLoader().getResourceAsStream(\"MyTest.txt\");\n    byte [] b = new byte[256];\n    int val = 0;\n    String txt = null;\n    do {\n        try {\n            val = result.read(b);\n            if (val &gt; 0) {\n                txt += new String(b, 0, val);\n            }\n        } catch (IOException e) {\n            e.printStackTrace();\n        } \n    } while (val &gt; -1);\n    System.out.println(txt);\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2079767,"reputation":6300,"user_id":1852033,"accept_rate":77,"display_name":"Leo Ufimtsev"},"down_vote_count":2,"up_vote_count":3,"is_accepted":false,"score":1,"last_activity_date":1420483987,"creation_date":1420483987,"answer_id":27785938,"question_id":16570523,"body_markdown":"Don&#39;t know if of help, but in my case I had my resource in the /src/ folder and was getting this error.\r\nI then moved the picture to the bin folder and it fixed the issue.","title":"getResourceAsStream returns null","body":"<p>Don't know if of help, but in my case I had my resource in the /src/ folder and was getting this error.\nI then moved the picture to the bin folder and it fixed the issue.</p>\n"},{"tags":[],"owner":{"account_id":6077723,"reputation":49,"user_id":4744506,"display_name":"Bobby Martin"},"down_vote_count":1,"up_vote_count":3,"is_accepted":false,"score":2,"last_activity_date":1440422223,"creation_date":1437442388,"answer_id":31528930,"question_id":16570523,"body_markdown":"Make sure your resource directory (e.g. &quot;src&quot;) is in your classpath (make sure it&#39;s a source directory in your build path in eclipse).\r\n\r\nMake sure clazz is loaded from the main classloader.\r\n\r\nThen, to load src/initialization/Lifepaths.txt, use \r\n\r\n    clazz.getResourceAsStream(&quot;/initialization/Lifepaths.txt&quot;);\r\n\r\nWhy:\r\n`clazz.getResourcesAsStream(foo)` looks up foo from *within the classpath of clazz*, *relative to the directory clazz lives in*. The leading &quot;/&quot; makes it load from the root of any directory in the classpath of clazz.\r\n\r\nUnless you&#39;re in a container of some kind, like Tomcat, or are doing something with ClassLoaders directly, you can just treat your eclipse/command line classpath as the only classloader classpath.\r\n","title":"getResourceAsStream returns null","body":"<p>Make sure your resource directory (e.g. \"src\") is in your classpath (make sure it's a source directory in your build path in eclipse).</p>\n\n<p>Make sure clazz is loaded from the main classloader.</p>\n\n<p>Then, to load src/initialization/Lifepaths.txt, use </p>\n\n<pre><code>clazz.getResourceAsStream(\"/initialization/Lifepaths.txt\");\n</code></pre>\n\n<p>Why:\n<code>clazz.getResourcesAsStream(foo)</code> looks up foo from <em>within the classpath of clazz</em>, <em>relative to the directory clazz lives in</em>. The leading \"/\" makes it load from the root of any directory in the classpath of clazz.</p>\n\n<p>Unless you're in a container of some kind, like Tomcat, or are doing something with ClassLoaders directly, you can just treat your eclipse/command line classpath as the only classloader classpath.</p>\n"},{"tags":[],"owner":{"account_id":1765805,"reputation":5354,"user_id":1611714,"display_name":"Binita Bharati"},"down_vote_count":0,"up_vote_count":8,"is_accepted":false,"score":8,"last_activity_date":1443318963,"creation_date":1443318963,"answer_id":32803799,"question_id":16570523,"body_markdown":"There seems to be issue with the ClassLoader that you are using. Use the contextClassLoader to load class.  This is irrespective of whether it is in a static/non-static method\r\n\r\n`Thread.currentThread().getContextClassLoader().getResourceAsStream`......","title":"getResourceAsStream returns null","body":"<p>There seems to be issue with the ClassLoader that you are using. Use the contextClassLoader to load class.  This is irrespective of whether it is in a static/non-static method</p>\n\n<p><code>Thread.currentThread().getContextClassLoader().getResourceAsStream</code>......</p>\n"},{"tags":[],"owner":{"account_id":2989423,"reputation":1730,"user_id":2537335,"accept_rate":89,"display_name":"Pablo Gonzalez"},"down_vote_count":3,"up_vote_count":7,"is_accepted":false,"score":4,"last_activity_date":1574869317,"creation_date":1450305800,"answer_id":34323567,"question_id":16570523,"body_markdown":"What worked for me was to add the file under `My Project/Java Resources/src` and then use \r\n\r\n    this.getClass().getClassLoader().getResourceAsStream(&quot;myfile.txt&quot;);\r\n\r\nI didn&#39;t need to explicitly add this file to the path (adding it to `/src` does that apparently)","title":"getResourceAsStream returns null","body":"<p>What worked for me was to add the file under <code>My Project/Java Resources/src</code> and then use </p>\n\n<pre><code>this.getClass().getClassLoader().getResourceAsStream(\"myfile.txt\");\n</code></pre>\n\n<p>I didn't need to explicitly add this file to the path (adding it to <code>/src</code> does that apparently)</p>\n"},{"tags":[],"owner":{"account_id":3574691,"reputation":901,"user_id":2984233,"accept_rate":75,"display_name":"plosco"},"down_vote_count":1,"up_vote_count":11,"is_accepted":false,"score":10,"last_activity_date":1478563951,"creation_date":1478563951,"answer_id":40476871,"question_id":16570523,"body_markdown":"I found myself in a similar issue. Since I am using maven I needed to update my pom.xml to include something like this:\r\n    \r\n       ...\r\n    &lt;/dependencies&gt;\r\n\t&lt;build&gt;\r\n\t\t&lt;resources&gt;\r\n\t\t\t&lt;resource&gt;\r\n\t\t\t\t&lt;directory&gt;/src/main/resources&lt;/directory&gt;\r\n\t\t\t&lt;/resource&gt;\r\n\t\t\t&lt;resource&gt;\r\n\t\t\t\t&lt;directory&gt;../src/main/resources&lt;/directory&gt;\r\n\t\t\t&lt;/resource&gt;\r\n\t\t&lt;/resources&gt;\r\n\t\t&lt;pluginManagement&gt;\r\n            ...\r\n\r\nNote the resource tag in there to specify where that folder is. If you have nested projects (like I do) then you might want to get resources from other areas instead of just in the module you are working in. This helps reduce keeping the same file in each repo if you are using similar config data ","title":"getResourceAsStream returns null","body":"<p>I found myself in a similar issue. Since I am using maven I needed to update my pom.xml to include something like this:</p>\n\n<pre><code>   ...\n&lt;/dependencies&gt;\n&lt;build&gt;\n    &lt;resources&gt;\n        &lt;resource&gt;\n            &lt;directory&gt;/src/main/resources&lt;/directory&gt;\n        &lt;/resource&gt;\n        &lt;resource&gt;\n            &lt;directory&gt;../src/main/resources&lt;/directory&gt;\n        &lt;/resource&gt;\n    &lt;/resources&gt;\n    &lt;pluginManagement&gt;\n        ...\n</code></pre>\n\n<p>Note the resource tag in there to specify where that folder is. If you have nested projects (like I do) then you might want to get resources from other areas instead of just in the module you are working in. This helps reduce keeping the same file in each repo if you are using similar config data </p>\n"},{"tags":[],"owner":{"account_id":1422690,"reputation":1153,"user_id":1346990,"display_name":"Ridox"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1649579119,"creation_date":1562665024,"answer_id":56949635,"question_id":16570523,"body_markdown":"The default JVM classloader will use parent-classloader to load resources first:\r\n![deletegate-parent-classloader](https://jrebel.com/wp-content/uploads/2013/08/classloader-hierarchy.jpg). \r\n\r\n`Lifepaths.class.getClass()`&#39;s classloader is `bootstrap classloader`, so `getResourceAsStream` will search $JAVA_HOME only, regardless of user provided `classpath`. Obviously, Lifepaths.txt is not there.\r\n\r\n`Lifepaths.class` &#39;s classloader is `system classpath classloader`,  so `getResourceAsStream` will search user-defined `classpath` and Lifepaths.txt is there.\r\n\r\nWhen using `java.lang.Class#getResourceAsStream(String name)`, a name which doesn&#39;t start with **&#39;/&#39;** will be added with `package name` as a prefix. To avoid this use `java.lang.ClassLoader#getResourceAsStream` instead. \r\n\r\nFor example:\r\n```Java\r\nClassLoader loader = Thread.currentThread().getContextClassLoader();\r\nString resourceName = &quot;Lifepaths.txt&quot;;\r\nInputStream resourceStream = loader.getResourceAsStream(resourceName); \r\n```","title":"getResourceAsStream returns null","body":"<p>The default JVM classloader will use parent-classloader to load resources first:\n<img src=\"https://jrebel.com/wp-content/uploads/2013/08/classloader-hierarchy.jpg\" alt=\"deletegate-parent-classloader\" />.</p>\n<p><code>Lifepaths.class.getClass()</code>'s classloader is <code>bootstrap classloader</code>, so <code>getResourceAsStream</code> will search $JAVA_HOME only, regardless of user provided <code>classpath</code>. Obviously, Lifepaths.txt is not there.</p>\n<p><code>Lifepaths.class</code> 's classloader is <code>system classpath classloader</code>,  so <code>getResourceAsStream</code> will search user-defined <code>classpath</code> and Lifepaths.txt is there.</p>\n<p>When using <code>java.lang.Class#getResourceAsStream(String name)</code>, a name which doesn't start with <strong>'/'</strong> will be added with <code>package name</code> as a prefix. To avoid this use <code>java.lang.ClassLoader#getResourceAsStream</code> instead.</p>\n<p>For example:</p>\n<pre><code>ClassLoader loader = Thread.currentThread().getContextClassLoader();\nString resourceName = &quot;Lifepaths.txt&quot;;\nInputStream resourceStream = loader.getResourceAsStream(resourceName); \n</code></pre>\n"},{"tags":[],"owner":{"account_id":1535458,"reputation":6426,"user_id":1431641,"display_name":"Shijing Lv"},"down_vote_count":0,"up_vote_count":19,"is_accepted":false,"score":19,"last_activity_date":1645079351,"creation_date":1569081631,"answer_id":58041889,"question_id":16570523,"body_markdown":"Roughly speaking:\r\n\r\n`getClass().getResource(&quot;/&quot;)` ~= `Thread.currentThread().getContextClassLoader().getResource(&quot;.&quot;)`\r\n\r\nSuppose your project structure is like the following:\r\n\r\n```\r\n├── src\r\n│&#160;&#160; ├── main\r\n│   └── test\r\n│       ├── java\r\n│       │&#160;&#160; └── com\r\n│       │&#160;&#160;     └── github\r\n│       │&#160;&#160;         └── xyz\r\n│       │&#160;&#160;             └── proj\r\n│       │&#160;&#160;                 ├── MainTest.java\r\n│       │&#160;&#160;                 └── TestBase.java\r\n│       └── resources\r\n│           └── abcd.txt\r\n└── target\r\n    └── test-classes  &lt;-- this.getClass.getResource(&quot;/&quot;)\r\n        │              `--Thread.currentThread().getContextClassLoader().getResources(&quot;.&quot;)\r\n        ├── com\r\n&#160;&#160;     &#160;│   └── github\r\n        │&#160;&#160;     └── xyz\r\n        │&#160;&#160;         └── proj  &lt;-- this.getClass.getResource(&quot;.&quot;)\r\n        │&#160;&#160;             ├── MainTest.class\r\n        │&#160;&#160;             └── TestBase.class\r\n        └── resources\r\n            └── abcd.txt\r\n\r\n```\r\n\r\n\r\n```\r\n// in MainTest.java\r\nthis.getClass.getResource(&quot;/&quot;) -&gt; &quot;~/proj_dir/target/test-classes/&quot;\r\nthis.getClass.getResource(&quot;.&quot;) -&gt; &quot;~/proj_dir/target/test-classes/com/github/xyz/proj/&quot;\r\nThread.currentThread().getContextClassLoader().getResources(&quot;.&quot;) -&gt; &quot;~/proj_dir/target/test-classes/&quot;\r\nThread.currentThread().getContextClassLoader().getResources(&quot;/&quot;) -&gt;  null\r\n\r\n```","title":"getResourceAsStream returns null","body":"<p>Roughly speaking:</p>\n<p><code>getClass().getResource(&quot;/&quot;)</code> ~= <code>Thread.currentThread().getContextClassLoader().getResource(&quot;.&quot;)</code></p>\n<p>Suppose your project structure is like the following:</p>\n<pre><code>├── src\n│   ├── main\n│   └── test\n│       ├── java\n│       │   └── com\n│       │       └── github\n│       │           └── xyz\n│       │               └── proj\n│       │                   ├── MainTest.java\n│       │                   └── TestBase.java\n│       └── resources\n│           └── abcd.txt\n└── target\n    └── test-classes  &lt;-- this.getClass.getResource(&quot;/&quot;)\n        │              `--Thread.currentThread().getContextClassLoader().getResources(&quot;.&quot;)\n        ├── com\n        │   └── github\n        │       └── xyz\n        │           └── proj  &lt;-- this.getClass.getResource(&quot;.&quot;)\n        │               ├── MainTest.class\n        │               └── TestBase.class\n        └── resources\n            └── abcd.txt\n\n</code></pre>\n<pre><code>// in MainTest.java\nthis.getClass.getResource(&quot;/&quot;) -&gt; &quot;~/proj_dir/target/test-classes/&quot;\nthis.getClass.getResource(&quot;.&quot;) -&gt; &quot;~/proj_dir/target/test-classes/com/github/xyz/proj/&quot;\nThread.currentThread().getContextClassLoader().getResources(&quot;.&quot;) -&gt; &quot;~/proj_dir/target/test-classes/&quot;\nThread.currentThread().getContextClassLoader().getResources(&quot;/&quot;) -&gt;  null\n\n</code></pre>\n"},{"tags":[],"owner":{"account_id":8139364,"reputation":103,"user_id":6130058,"display_name":"Feku279"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1569924027,"creation_date":1569924027,"answer_id":58182418,"question_id":16570523,"body_markdown":"if you are using Maven make sure your packing is &#39;jar&#39; not &#39;pom&#39;. \r\n\r\n    &lt;packaging&gt;jar&lt;/packaging&gt;","title":"getResourceAsStream returns null","body":"<p>if you are using Maven make sure your packing is 'jar' not 'pom'. </p>\n\n<pre><code>&lt;packaging&gt;jar&lt;/packaging&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1909412,"reputation":61,"user_id":1723627,"display_name":"ConAim"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1590368002,"creation_date":1590367630,"answer_id":61994217,"question_id":16570523,"body_markdown":"What you really need is a full absolute classPath for the file. So instead of guessing it, try to find out the ROOT and then move the file to a better location base one &lt;.war&gt; file structures...\r\n\r\n    URL test1 = getClass().getResource(&quot;/&quot;);\r\n    URL test2 = getClass().getClassLoader().getResource(&quot;/&quot;);            \r\n    URL test3 = getClass().getClassLoader().getResource(&quot;../&quot;);\r\n    \r\n    logger.info(test1.getPath()); \r\n    logger.info(test2.getPath());\r\n    logger.info(test3.getPath());\r\n\r\n\r\n","title":"getResourceAsStream returns null","body":"<p>What you really need is a full absolute classPath for the file. So instead of guessing it, try to find out the ROOT and then move the file to a better location base one &lt;.war> file structures...</p>\n\n<pre><code>URL test1 = getClass().getResource(\"/\");\nURL test2 = getClass().getClassLoader().getResource(\"/\");            \nURL test3 = getClass().getClassLoader().getResource(\"../\");\n\nlogger.info(test1.getPath()); \nlogger.info(test2.getPath());\nlogger.info(test3.getPath());\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2152996,"reputation":2186,"user_id":1908827,"display_name":"Akash Yellappa"},"down_vote_count":2,"up_vote_count":2,"is_accepted":false,"score":0,"last_activity_date":1593227520,"creation_date":1593227520,"answer_id":62605441,"question_id":16570523,"body_markdown":"What worked for me is I placed the file under \r\n\r\n    src/main/java/myfile.log\r\n\r\nand \r\n\r\n    InputStream is = getClass().getClassLoader().getResourceAsStream(&quot;myfile.log&quot;);\r\n    \t\t\r\n    \t\tif (is == null) {\r\n    \t\t\tthrow new FileNotFoundException(&quot;Log file not provided&quot;);\r\n    \t\t}","title":"getResourceAsStream returns null","body":"<p>What worked for me is I placed the file under</p>\n<pre><code>src/main/java/myfile.log\n</code></pre>\n<p>and</p>\n<pre><code>InputStream is = getClass().getClassLoader().getResourceAsStream(&quot;myfile.log&quot;);\n        \n        if (is == null) {\n            throw new FileNotFoundException(&quot;Log file not provided&quot;);\n        }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":12898503,"reputation":2596,"user_id":9328117,"display_name":"Shahid Hussain Abbasi"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1613988435,"creation_date":1613988435,"answer_id":66313588,"question_id":16570523,"body_markdown":"Please remove\r\n\r\n&lt;resource&gt;\r\n   &lt;directory&gt;../src/main/resources&lt;/directory&gt;\r\n&lt;/resource&gt;\r\n\r\nor include file you are trying to read","title":"getResourceAsStream returns null","body":"<p>Please remove</p>\n\n   ../src/main/resources\n\n<p>or include file you are trying to read</p>\n"},{"tags":[],"owner":{"account_id":12898503,"reputation":2596,"user_id":9328117,"display_name":"Shahid Hussain Abbasi"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1613988575,"creation_date":1613988575,"answer_id":66313619,"question_id":16570523,"body_markdown":"In pom.xml manage or remove\r\n        &lt;resource&gt;\r\n            &lt;directory&gt;../src/main/resources&lt;/directory&gt;\r\n        &lt;/resource&gt;\r\n\r\n","title":"getResourceAsStream returns null","body":"<p>In pom.xml manage or remove\n\n../src/main/resources\n</p>\n"},{"tags":[],"owner":{"account_id":139449,"reputation":969,"user_id":345052,"accept_rate":67,"display_name":"qwebek"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1622037337,"creation_date":1622037337,"answer_id":67706423,"question_id":16570523,"body_markdown":"My caller class was in `src/main/...`\r\n\r\nWhat helped me to load resource from `src/test/resources/folder/file.properties`\r\n\r\n\r\n    `properties.load(getClass().getClassLoader().getResourceAsStream(&quot;folder/file.properties&quot;));`\r\n\r\n\r\nhttps://howtodoinjava.com/java/io/read-file-from-resources-folder/\r\n\r\n\r\nJava 11","title":"getResourceAsStream returns null","body":"<p>My caller class was in <code>src/main/...</code></p>\n<p>What helped me to load resource from <code>src/test/resources/folder/file.properties</code></p>\n<pre><code>`properties.load(getClass().getClassLoader().getResourceAsStream(&quot;folder/file.properties&quot;));`\n</code></pre>\n<p><a href=\"https://howtodoinjava.com/java/io/read-file-from-resources-folder/\" rel=\"nofollow noreferrer\">https://howtodoinjava.com/java/io/read-file-from-resources-folder/</a></p>\n<p>Java 11</p>\n"},{"tags":[],"owner":{"account_id":20892617,"reputation":9,"user_id":15347669,"display_name":"tcsnzh"},"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1637779977,"creation_date":1637779977,"answer_id":70101506,"question_id":16570523,"body_markdown":"&gt; jdk &gt;=9 需要在module-info模块中把非根目录/非共父目录的包给它open了。\r\n\r\njdk &gt;=9 need open resource dir in module-info.java , such as :\r\n\r\n- src\r\n  - java\r\n  - resoureces\r\n    - conf\r\n      - config.json\r\n    - log4j2.xml \r\n    - openapi.yaml\r\n\r\nIf you need read conf/config.json , you need two step :\r\n\r\n```java\r\n// in module-info.java\r\nmodule your.mod.name {\r\n    open conf;\r\n}\r\n\r\n// then in java code\r\ngetClassLoader().getResourceAsStream(&quot;conf/config.json&quot;);\r\n```\r\n\r\nElse if you need read other in root , it&#39;s only :\r\n\r\n```java\r\ngetClassLoader().getResourceAsStream(&quot;openapi.yaml&quot;);\r\n```\r\n\r\n&gt; you can see {@link java.lang.ClassLoader#getResourceAsStream(String)} known why ~","title":"getResourceAsStream returns null","body":"<blockquote>\n<p>jdk &gt;=9 需要在module-info模块中把非根目录/非共父目录的包给它open了。</p>\n</blockquote>\n<p>jdk &gt;=9 need open resource dir in module-info.java , such as :</p>\n<ul>\n<li>src\n<ul>\n<li>java</li>\n<li>resoureces\n<ul>\n<li>conf\n<ul>\n<li>config.json</li>\n</ul>\n</li>\n<li>log4j2.xml</li>\n<li>openapi.yaml</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n<p>If you need read conf/config.json , you need two step :</p>\n<pre class=\"lang-java prettyprint-override\"><code>// in module-info.java\nmodule your.mod.name {\n    open conf;\n}\n\n// then in java code\ngetClassLoader().getResourceAsStream(&quot;conf/config.json&quot;);\n</code></pre>\n<p>Else if you need read other in root , it's only :</p>\n<pre class=\"lang-java prettyprint-override\"><code>getClassLoader().getResourceAsStream(&quot;openapi.yaml&quot;);\n</code></pre>\n<blockquote>\n<p>you can see {@link java.lang.ClassLoader#getResourceAsStream(String)} known why ~</p>\n</blockquote>\n"},{"tags":[],"owner":{"account_id":3729650,"reputation":1020,"user_id":3102471,"accept_rate":71,"display_name":"mbmast"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1640821254,"creation_date":1640821254,"answer_id":70526124,"question_id":16570523,"body_markdown":"While not intended to be an answer, I&#39;m presenting this suggestion as an answer so I can get the screenshot in.\r\n\r\nFor those of you developing on a Windows platform, I highly recommend the Microsoft utility ProcMon, or Process Monitor.\r\n\r\nProcess Monitor is one utility in a suite of utilities Microsoft gives away (you don&#39;t even need to be signed in to download).  They are all available at sysinternals.com, the original host that Microsoft acquired and just kept.\r\n\r\nProcess Monitor can monitor a ton of events that are associated with any running process.  If you specify the File Open event and provide the file name (or part of the file name), it will log which process attempted to open the file and it will show every directory searched.  This can be useful when you don&#39;t know where your running code is looking for the file you specified in your source/config.\r\n  Here&#39;s an example:\r\n\r\n[![enter image description here][1]][1]\r\n\r\nHere I&#39;m looking for (and not finding) a schema file (XSD) so that the code can use it to validate some user supplied XML. \r\n\r\n  [1]: https://i.stack.imgur.com/34IQC.png","title":"getResourceAsStream returns null","body":"<p>While not intended to be an answer, I'm presenting this suggestion as an answer so I can get the screenshot in.</p>\n<p>For those of you developing on a Windows platform, I highly recommend the Microsoft utility ProcMon, or Process Monitor.</p>\n<p>Process Monitor is one utility in a suite of utilities Microsoft gives away (you don't even need to be signed in to download).  They are all available at sysinternals.com, the original host that Microsoft acquired and just kept.</p>\n<p>Process Monitor can monitor a ton of events that are associated with any running process.  If you specify the File Open event and provide the file name (or part of the file name), it will log which process attempted to open the file and it will show every directory searched.  This can be useful when you don't know where your running code is looking for the file you specified in your source/config.\nHere's an example:</p>\n<p><a href=\"https://i.stack.imgur.com/34IQC.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/34IQC.png\" alt=\"enter image description here\" /></a></p>\n<p>Here I'm looking for (and not finding) a schema file (XSD) so that the code can use it to validate some user supplied XML.</p>\n"},{"tags":[],"owner":{"account_id":1430058,"reputation":827,"user_id":1352658,"accept_rate":78,"display_name":"j5shi"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1644478201,"creation_date":1644478201,"answer_id":71061230,"question_id":16570523,"body_markdown":"If you are using IDEA, make sure to mark your resources folder as &#39;Resources&#39; so that the path can be recognized by IDE correctly.\r\n\r\nLet&#39;s say you have a file named &#39;book.json&#39; in &#39;resources/&#39;, then to use the resources in it, you can do it like this\r\n\r\n    InputStream input = Main.class.getResourceAsStream(&quot;/book.json&quot;);\r\n\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/4bXsr.png","title":"getResourceAsStream returns null","body":"<p>If you are using IDEA, make sure to mark your resources folder as 'Resources' so that the path can be recognized by IDE correctly.</p>\n<p>Let's say you have a file named 'book.json' in 'resources/', then to use the resources in it, you can do it like this</p>\n<pre><code>InputStream input = Main.class.getResourceAsStream(&quot;/book.json&quot;);\n</code></pre>\n<p><a href=\"https://i.stack.imgur.com/4bXsr.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/4bXsr.png\" alt=\"enter image description here\" /></a></p>\n"},{"tags":[],"owner":{"account_id":7710103,"reputation":21,"user_id":5839703,"display_name":"Amit"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1653586969,"creation_date":1653586969,"answer_id":72395954,"question_id":16570523,"body_markdown":"Lifepaths.class.getClass().\r\n            getResourceAsStream(&quot;Lifepaths.txt&quot;));","title":"getResourceAsStream returns null","body":"<p>Lifepaths.class.getClass().\ngetResourceAsStream(&quot;Lifepaths.txt&quot;));</p>\n"},{"tags":[],"owner":{"account_id":13920052,"reputation":191,"user_id":10050726,"display_name":"Sumanth Vakacharla"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1660063738,"creation_date":1660063738,"answer_id":73295438,"question_id":16570523,"body_markdown":"I know there are different answers here. Mine worked like this.\r\nAdded the file in the resources directory.\r\nAnd in the executable code I mentioned the path for that file with &quot;/&quot; as prefix within the quotes of the filename.\r\n\r\n     InputStream resourceStream = loader.getResourceAsStream(&quot;/LifePaths.txt&quot;);\r\n\r\n ","title":"getResourceAsStream returns null","body":"<p>I know there are different answers here. Mine worked like this.\nAdded the file in the resources directory.\nAnd in the executable code I mentioned the path for that file with &quot;/&quot; as prefix within the quotes of the filename.</p>\n<pre><code> InputStream resourceStream = loader.getResourceAsStream(&quot;/LifePaths.txt&quot;);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":14489353,"reputation":61,"user_id":10559828,"display_name":"R4de"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1664459664,"creation_date":1664459664,"answer_id":73896731,"question_id":16570523,"body_markdown":"Problem with me was that resource was not in src folder.","title":"getResourceAsStream returns null","body":"<p>Problem with me was that resource was not in src folder.</p>\n"},{"tags":[],"owner":{"account_id":4613136,"reputation":378,"user_id":3740598,"display_name":"mrossini"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1674059794,"creation_date":1674059794,"answer_id":75162433,"question_id":16570523,"body_markdown":"Coming late to the party. Depending on the JDK version you are using (maybe it is time to review the StackOverflow &#39;question already answered&#39;?) JPMS can impact on the resources you are able to load (or not).\r\n\r\nPackaging my code as module I had to do that:\r\n\r\nThread.currentThread().getClass().getModule().getResourceAsStream(&quot;resourceName&quot;);\r\n\r\nAnd then it worked","title":"getResourceAsStream returns null","body":"<p>Coming late to the party. Depending on the JDK version you are using (maybe it is time to review the StackOverflow 'question already answered'?) JPMS can impact on the resources you are able to load (or not).</p>\n<p>Packaging my code as module I had to do that:</p>\n<p>Thread.currentThread().getClass().getModule().getResourceAsStream(&quot;resourceName&quot;);</p>\n<p>And then it worked</p>\n"},{"tags":[],"owner":{"account_id":12266168,"reputation":351,"user_id":8952646,"display_name":"Israel Figueirido"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1687951418,"creation_date":1687951418,"answer_id":76572706,"question_id":16570523,"body_markdown":"What happened to me was an *intelliJ* (2023.1) issue. I was trying to get a ***.json*** file from my */resources* folder and I was getting `null`. The problem was the ***.json*** pattern was not in **Settings &gt; Build, Execution, Deployment &gt; Compiler &gt; Resource Patterns**.\r\n\r\nAfter I added it, all worked fine (without the initial &quot;/&quot;, by the way).\r\n\r\nSee: https://stackoverflow.com/questions/4301329/java-class-getresource-returns-null","title":"getResourceAsStream returns null","body":"<p>What happened to me was an <em>intelliJ</em> (2023.1) issue. I was trying to get a <em><strong>.json</strong></em> file from my <em>/resources</em> folder and I was getting <code>null</code>. The problem was the <em><strong>.json</strong></em> pattern was not in <strong>Settings &gt; Build, Execution, Deployment &gt; Compiler &gt; Resource Patterns</strong>.</p>\n<p>After I added it, all worked fine (without the initial &quot;/&quot;, by the way).</p>\n<p>See: <a href=\"https://stackoverflow.com/questions/4301329/java-class-getresource-returns-null\">Java - class.getResource returns null</a></p>\n"}],"owner":{"display_name":"user1131435"},"comment_count":9,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":471237,"favorite_count":0,"down_vote_count":0,"up_vote_count":259,"accepted_answer_id":16571046,"answer_count":27,"score":259,"last_activity_date":1694966677,"creation_date":1368635821,"question_id":16570523,"body_markdown":"I&#39;m loading a text file from within a package in a compiled JAR of my Java project. The relevant directory structure is as follows:\r\n\r\n    /src/initialization/Lifepaths.txt\r\n\r\nMy code loads a file by calling [`Class::getResourceAsStream`][1] to return a [`InputStream`][2]. \r\n\r\n    public class Lifepaths {\r\n        public static void execute() {\r\n            System.out.println(Lifepaths.class.getClass().\r\n                getResourceAsStream(&quot;/initialization/Lifepaths.txt&quot;));\r\n        }\r\n\r\n        private Lifepaths() {}\r\n\r\n        //This is temporary; will eventually be called from outside\r\n        public static void main(String[] args) {execute();}\r\n    }\r\n\r\nThe print out will always print `null`, no matter what I use. I&#39;m not sure why the above wouldn&#39;t work, so I&#39;ve also tried:\r\n\r\n - `&quot;/src/initialization/Lifepaths.txt&quot;`\r\n - `&quot;initialization/Lifepaths.txt&quot;`\r\n - `&quot;Lifepaths.txt&quot;`\r\n\r\nNeither of these work. [I&#39;ve](https://stackoverflow.com/questions/12262062/getresourceasstream-returns-null) [read](https://stackoverflow.com/questions/7017361/getresourceasstream-returning-null) [numerous](https://stackoverflow.com/questions/2797162/getresourceasstream-is-always-returning-null) [questions](https://stackoverflow.com/questions/2195445/eclipse-getresourceasstream-returning-null) so far on the topic, but none of them have been helpful - usually, they just say to load files using the root path, which I&#39;m already doing. That, or just load the file from the current directory (just load `filename`), which I&#39;ve also tried. The file is being compiled into the JAR in the appropriate location with the appropriate name. \r\n\r\nHow do I solve this?\r\n\r\n\r\n  [1]: https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/Class.html#getResourceAsStream(java.lang.String)\r\n  [2]: https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/io/InputStream.html","title":"getResourceAsStream returns null","body":"<p>I'm loading a text file from within a package in a compiled JAR of my Java project. The relevant directory structure is as follows:</p>\n\n<pre><code>/src/initialization/Lifepaths.txt\n</code></pre>\n\n<p>My code loads a file by calling <a href=\"https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/Class.html#getResourceAsStream(java.lang.String)\" rel=\"noreferrer\"><code>Class::getResourceAsStream</code></a> to return a <a href=\"https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/io/InputStream.html\" rel=\"noreferrer\"><code>InputStream</code></a>. </p>\n\n<pre><code>public class Lifepaths {\n    public static void execute() {\n        System.out.println(Lifepaths.class.getClass().\n            getResourceAsStream(\"/initialization/Lifepaths.txt\"));\n    }\n\n    private Lifepaths() {}\n\n    //This is temporary; will eventually be called from outside\n    public static void main(String[] args) {execute();}\n}\n</code></pre>\n\n<p>The print out will always print <code>null</code>, no matter what I use. I'm not sure why the above wouldn't work, so I've also tried:</p>\n\n<ul>\n<li><code>\"/src/initialization/Lifepaths.txt\"</code></li>\n<li><code>\"initialization/Lifepaths.txt\"</code></li>\n<li><code>\"Lifepaths.txt\"</code></li>\n</ul>\n\n<p>Neither of these work. <a href=\"https://stackoverflow.com/questions/12262062/getresourceasstream-returns-null\">I've</a> <a href=\"https://stackoverflow.com/questions/7017361/getresourceasstream-returning-null\">read</a> <a href=\"https://stackoverflow.com/questions/2797162/getresourceasstream-is-always-returning-null\">numerous</a> <a href=\"https://stackoverflow.com/questions/2195445/eclipse-getresourceasstream-returning-null\">questions</a> so far on the topic, but none of them have been helpful - usually, they just say to load files using the root path, which I'm already doing. That, or just load the file from the current directory (just load <code>filename</code>), which I've also tried. The file is being compiled into the JAR in the appropriate location with the appropriate name. </p>\n\n<p>How do I solve this?</p>\n"},{"tags":["java","android","datepicker","dialog"],"answers":[{"tags":[],"owner":{"account_id":270025,"reputation":6187,"user_id":3649629,"accept_rate":67,"display_name":"Gleichmut"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1694962856,"creation_date":1694962856,"answer_id":77122371,"question_id":77119593,"body_markdown":"You have to follow ```MVC``` or ```MVVM``` pattern which are behind Android architecture. In this case all changes on UI are based on changes in model. So I have to update a model state and UI should be notified on changes in the model. \r\n\r\nThe right way to do this is to use ```ViewModel``` class which single instance is shared between your host fragment and dialog fragment. You can use [Sunflower android app][1] for reference, it is a bit outdated (e.g. it uses ```LiveData``` instead of ```Kotlin Flows```), but still shows some good architecture decisions. \r\n\r\nAnother way is to implement interface with callbacks:\r\n```\r\ninterface IDialogCallbacks {\r\n  fun onClose()\r\n}\r\n``` \r\n\r\nMake a host fragment to implement this interface:\r\n```\r\nclass MainFragment: Fragment, IDialogCallbacks { /* the rest of code */}\r\n```\r\n\r\nIn the dialog fragment (or any other child fragment) call parent fragment, check if it implements this interface and if it is then invoke it:\r\n```\r\n    if(getParentFragment() is IDialogCallbacks) {\r\n        (getParentFragment() as IDialogCallbacks).onClose()\r\n    } \r\n```\r\n  [1]: https://github.com/android/sunflower","title":"How to Callback from dialog class to Fragment","body":"<p>You have to follow <code>MVC</code> or <code>MVVM</code> pattern which are behind Android architecture. In this case all changes on UI are based on changes in model. So I have to update a model state and UI should be notified on changes in the model.</p>\n<p>The right way to do this is to use <code>ViewModel</code> class which single instance is shared between your host fragment and dialog fragment. You can use <a href=\"https://github.com/android/sunflower\" rel=\"nofollow noreferrer\">Sunflower android app</a> for reference, it is a bit outdated (e.g. it uses <code>LiveData</code> instead of <code>Kotlin Flows</code>), but still shows some good architecture decisions.</p>\n<p>Another way is to implement interface with callbacks:</p>\n<pre><code>interface IDialogCallbacks {\n  fun onClose()\n}\n</code></pre>\n<p>Make a host fragment to implement this interface:</p>\n<pre><code>class MainFragment: Fragment, IDialogCallbacks { /* the rest of code */}\n</code></pre>\n<p>In the dialog fragment (or any other child fragment) call parent fragment, check if it implements this interface and if it is then invoke it:</p>\n<pre><code>    if(getParentFragment() is IDialogCallbacks) {\n        (getParentFragment() as IDialogCallbacks).onClose()\n    } \n</code></pre>\n"}],"owner":{"display_name":"user4655559"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":30,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":77122371,"answer_count":1,"score":0,"last_activity_date":1694962856,"creation_date":1694898113,"question_id":77119593,"body_markdown":"I&#39;m trying to update the text on a button after a dialog with a datepicker is closed.\r\nThe dialog is instantiated inside of a fragment class and the button risides within that\r\nsame class. Here&#39;s some code:\r\n\r\nFragment class:\r\n\r\n    select_dob_btn = view.findViewById(R.id.profile_dob_button);\r\n        datePickerDialog = new DatePickerDialog();\r\n        datePickerDialog.setButtonText(&quot;Select Date Of Birth&quot;);\r\n        select_dob_btn.setText(datePickerDialog.getButtonText());\r\n\r\nThe entire dialog class:\r\n\r\n    public class DatePickerDialog extends DialogFragment {\r\n\r\n    public long dateResult = 0;\r\n    String buttonText = &quot;&quot;;\r\n\r\n    @NonNull\r\n    @Override\r\n    public Dialog onCreateDialog(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        //int listingID = getArguments().getInt(&quot;listingID&quot;);\r\n\r\n\r\n        AlertDialog.Builder builder = new AlertDialog.Builder(requireActivity());\r\n\r\n        // Get the layout inflater\r\n        LayoutInflater inflater = this.getLayoutInflater();\r\n\r\n        View custom_layout = inflater.inflate(R.layout.dialog_date_picker,null);\r\n\r\n        DatePicker datePicker = custom_layout.findViewById(R.id.dialog_date_picker);\r\n        if(dateResult != 0){\r\n            datePicker.init(Globals.getDateYearFromTimeStamp(dateResult), Globals.getDateMonthFromTimeStamp(dateResult),Globals.getDateDayFromTimeStamp(dateResult), null);\r\n\r\n        }\r\n\r\n\r\n\r\n\r\n        // Inflate and set the layout for the dialog\r\n        // Pass null as the parent view because its going in the dialog layout\r\n        builder.setView(custom_layout)\r\n                .setPositiveButton(R.string.submit, new DialogInterface.OnClickListener() {\r\n                    @Override\r\n                    public void onClick(DialogInterface dialogInterface, int i) {\r\n                        dateResult = Globals.getTimeStampFromDateDDMMYYYY(datePicker.getDayOfMonth()+&quot;-&quot;+(datePicker.getMonth()+1)+&quot;-&quot;+datePicker.getYear());\r\n                        setButtonText(String.valueOf(Globals.getDateFromTimeStamp(dateResult)));\r\n                    }\r\n                })\r\n                .setNegativeButton(R.string.cancel, new DialogInterface.OnClickListener() {\r\n                    @Override\r\n                    public void onClick(DialogInterface dialogInterface, int i) {\r\n                        dateResult = 0;\r\n                        setButtonText(String.valueOf(R.string.register_select_dob));\r\n                        dialogInterface.cancel();\r\n\r\n                    }\r\n                });\r\n\r\n\r\n        return builder.create();\r\n    }\r\n    public DatePickerDialog newInstance() {\r\n        DatePickerDialog f = this;\r\n\r\n        // Supply num input as an argument.\r\n        Bundle args = new Bundle();\r\n       // args.putInt(&quot;listingID&quot;, 0);\r\n\r\n        f.setArguments(args);\r\n\r\n        return f;\r\n    }\r\n    public void ShowDialog(FragmentManager fragmentManager) {\r\n        DialogFragment newFragment = newInstance();\r\n\r\n        newFragment.show(fragmentManager, String.valueOf(0));\r\n    }\r\n\r\n    public void setButtonText(String text){\r\n        buttonText = text;\r\n    }\r\n    public String getButtonText(){\r\n        return buttonText;\r\n    }\r\n\r\n\r\n}\r\n\r\n\r\nNow back on the Fragment class I want to fire this method to update the Select date of birth button:\r\n\r\n        void RefreshSetBirthdayButton(){\r\n\r\n        if(datePickerDialog.dateResult == 0){\r\n            select_dob_btn.setText(R.string.register_select_dob);\r\n        }else{\r\n            datePickerDialog.setButtonText(String.valueOf(Globals.getDateFromTimeStamp(datePickerDialog.dateResult)));\r\n            select_dob_btn.setText(datePickerDialog.getButtonText());\r\n        }\r\n\r\n    }\r\n\r\nI&#39;ve tried to add the onDateChangeLIstener after I init the dialog class but,\r\nI get a NullpointerException.\r\n\r\nAny ideas would be helpful Thanks!","title":"How to Callback from dialog class to Fragment","body":"<p>I'm trying to update the text on a button after a dialog with a datepicker is closed.\nThe dialog is instantiated inside of a fragment class and the button risides within that\nsame class. Here's some code:</p>\n<p>Fragment class:</p>\n<pre><code>select_dob_btn = view.findViewById(R.id.profile_dob_button);\n    datePickerDialog = new DatePickerDialog();\n    datePickerDialog.setButtonText(&quot;Select Date Of Birth&quot;);\n    select_dob_btn.setText(datePickerDialog.getButtonText());\n</code></pre>\n<p>The entire dialog class:</p>\n<pre><code>public class DatePickerDialog extends DialogFragment {\n\npublic long dateResult = 0;\nString buttonText = &quot;&quot;;\n\n@NonNull\n@Override\npublic Dialog onCreateDialog(Bundle savedInstanceState) {\n    super.onCreate(savedInstanceState);\n    //int listingID = getArguments().getInt(&quot;listingID&quot;);\n\n\n    AlertDialog.Builder builder = new AlertDialog.Builder(requireActivity());\n\n    // Get the layout inflater\n    LayoutInflater inflater = this.getLayoutInflater();\n\n    View custom_layout = inflater.inflate(R.layout.dialog_date_picker,null);\n\n    DatePicker datePicker = custom_layout.findViewById(R.id.dialog_date_picker);\n    if(dateResult != 0){\n        datePicker.init(Globals.getDateYearFromTimeStamp(dateResult), Globals.getDateMonthFromTimeStamp(dateResult),Globals.getDateDayFromTimeStamp(dateResult), null);\n\n    }\n\n\n\n\n    // Inflate and set the layout for the dialog\n    // Pass null as the parent view because its going in the dialog layout\n    builder.setView(custom_layout)\n            .setPositiveButton(R.string.submit, new DialogInterface.OnClickListener() {\n                @Override\n                public void onClick(DialogInterface dialogInterface, int i) {\n                    dateResult = Globals.getTimeStampFromDateDDMMYYYY(datePicker.getDayOfMonth()+&quot;-&quot;+(datePicker.getMonth()+1)+&quot;-&quot;+datePicker.getYear());\n                    setButtonText(String.valueOf(Globals.getDateFromTimeStamp(dateResult)));\n                }\n            })\n            .setNegativeButton(R.string.cancel, new DialogInterface.OnClickListener() {\n                @Override\n                public void onClick(DialogInterface dialogInterface, int i) {\n                    dateResult = 0;\n                    setButtonText(String.valueOf(R.string.register_select_dob));\n                    dialogInterface.cancel();\n\n                }\n            });\n\n\n    return builder.create();\n}\npublic DatePickerDialog newInstance() {\n    DatePickerDialog f = this;\n\n    // Supply num input as an argument.\n    Bundle args = new Bundle();\n   // args.putInt(&quot;listingID&quot;, 0);\n\n    f.setArguments(args);\n\n    return f;\n}\npublic void ShowDialog(FragmentManager fragmentManager) {\n    DialogFragment newFragment = newInstance();\n\n    newFragment.show(fragmentManager, String.valueOf(0));\n}\n\npublic void setButtonText(String text){\n    buttonText = text;\n}\npublic String getButtonText(){\n    return buttonText;\n}\n</code></pre>\n<p>}</p>\n<p>Now back on the Fragment class I want to fire this method to update the Select date of birth button:</p>\n<pre><code>    void RefreshSetBirthdayButton(){\n\n    if(datePickerDialog.dateResult == 0){\n        select_dob_btn.setText(R.string.register_select_dob);\n    }else{\n        datePickerDialog.setButtonText(String.valueOf(Globals.getDateFromTimeStamp(datePickerDialog.dateResult)));\n        select_dob_btn.setText(datePickerDialog.getButtonText());\n    }\n\n}\n</code></pre>\n<p>I've tried to add the onDateChangeLIstener after I init the dialog class but,\nI get a NullpointerException.</p>\n<p>Any ideas would be helpful Thanks!</p>\n"},{"tags":["java","spring-boot","rest","asynchronous"],"comments":[{"owner":{"account_id":4181375,"reputation":5091,"user_id":3426309,"display_name":"Andrey B. Panfilov"},"score":0,"creation_date":1694832992,"post_id":77116142,"comment_id":135946931,"body_markdown":"you need to both place `@EnableAsync` somewhere in configuration and mark asynchronous controller method  (or class) as `@Async`","body":"you need to both place <code>@EnableAsync</code> somewhere in configuration and mark asynchronous controller method  (or class) as <code>@Async</code>"}],"answers":[{"tags":[],"owner":{"account_id":1176723,"reputation":8864,"user_id":1152549,"accept_rate":68,"display_name":"Ali Behzadian Nejad"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1694859290,"creation_date":1694859290,"answer_id":77117320,"question_id":77116142,"body_markdown":"To make an API asynchronous, you need to annotate your application class (the class with `@SpringBootApplication`) with `@EnableAsync` annotation. Then annotate the method you want to run asynchronously with `@Async` and change the return type of the method to `CompletableFuture&lt;YourType&gt;`. \r\nThe return statement of the method would be something like this:\r\n```\r\nreturn CompletableFuture.completedFuture(yourType);\r\n```\r\n\r\nThis is a complete example:\r\n\r\n```\r\n@Async\r\npublic CompletableFuture&lt;User&gt; findUser(String user) throws InterruptedException {\r\n  User results = //...\r\n  return CompletableFuture.completedFuture(results);\r\n}\r\n\r\n``` \r\n\r\nFor more details see the official docs: https://spring.io/guides/gs/async-method/","title":"Rest API: return CompletableFuture in Controller does not make API run asyc","body":"<p>To make an API asynchronous, you need to annotate your application class (the class with <code>@SpringBootApplication</code>) with <code>@EnableAsync</code> annotation. Then annotate the method you want to run asynchronously with <code>@Async</code> and change the return type of the method to <code>CompletableFuture&lt;YourType&gt;</code>.\nThe return statement of the method would be something like this:</p>\n<pre><code>return CompletableFuture.completedFuture(yourType);\n</code></pre>\n<p>This is a complete example:</p>\n<pre><code>@Async\npublic CompletableFuture&lt;User&gt; findUser(String user) throws InterruptedException {\n  User results = //...\n  return CompletableFuture.completedFuture(results);\n}\n\n</code></pre>\n<p>For more details see the official docs: <a href=\"https://spring.io/guides/gs/async-method/\" rel=\"nofollow noreferrer\">https://spring.io/guides/gs/async-method/</a></p>\n"},{"tags":[],"owner":{"account_id":24808114,"reputation":31,"user_id":18689877,"display_name":"Serhii Lytvynov"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1694962524,"creation_date":1694962524,"answer_id":77122345,"question_id":77116142,"body_markdown":"/v4 and /v5 are executing asynchronously.\r\n\r\nIn fact, `CompletableFuture.supplyAsync()` works as intended. If you don&#39;t provide any executor to `supplyAsync()`, it will default to using the ForkJoinPool. You can observe this by logging the thread name like this:\r\n\r\n```java\r\nCompletableFuture.supplyAsync(() -&gt; {\r\n    try {\r\n        Thread.sleep(1000);\r\n        System.out.println(&quot;async time: &quot; + System.currentTimeMillis() + &quot;, threadName: &quot; + Thread.currentThread().getName());\r\n        return Data.builder().data(&quot;Some Data&quot;).threadId(Thread.currentThread().getId()).requestCameTime(System.currentTimeMillis()).build();\r\n    } catch (InterruptedException e) {\r\n        throw new RuntimeException(e);\r\n    }\r\n});\r\n```\r\n\r\nIf you make multiple requests simultaneously, you will see output similar to the following:\r\n\r\n```\r\nasync time: 1694959567112, threadName: ForkJoinPool.commonPool-worker-1\r\nasync time: 1694959567112, threadName: ForkJoinPool.commonPool-worker-2\r\nasync time: 1694959567115, threadName: ForkJoinPool.commonPool-worker-3\r\n```\r\n\r\nFor each parallel execution, the ForkJoinPool assigns a different thread (worker) from its pool.\r\n\r\nThe only difference between v4 and v5 is that v4 does not return the result and, therefore, does not wait for the completion of `Thread.sleep(1000);` in the current &#39;main&#39; (http-nio) thread. Instead, it immediately releases the current thread and returns the response &#39;200 OK&#39;.\r\n\r\nLastly, if you&#39;re concerned about not holding threads in controllers and ensuring your APIs are always available, Spring Boot handles it automatically. By default, Spring Boot uses the Tomcat web server and creates an executor with 200 threads in the pool.\r\n","title":"Rest API: return CompletableFuture in Controller does not make API run asyc","body":"<p>/v4 and /v5 are executing asynchronously.</p>\n<p>In fact, <code>CompletableFuture.supplyAsync()</code> works as intended. If you don't provide any executor to <code>supplyAsync()</code>, it will default to using the ForkJoinPool. You can observe this by logging the thread name like this:</p>\n<pre class=\"lang-java prettyprint-override\"><code>CompletableFuture.supplyAsync(() -&gt; {\n    try {\n        Thread.sleep(1000);\n        System.out.println(&quot;async time: &quot; + System.currentTimeMillis() + &quot;, threadName: &quot; + Thread.currentThread().getName());\n        return Data.builder().data(&quot;Some Data&quot;).threadId(Thread.currentThread().getId()).requestCameTime(System.currentTimeMillis()).build();\n    } catch (InterruptedException e) {\n        throw new RuntimeException(e);\n    }\n});\n</code></pre>\n<p>If you make multiple requests simultaneously, you will see output similar to the following:</p>\n<pre><code>async time: 1694959567112, threadName: ForkJoinPool.commonPool-worker-1\nasync time: 1694959567112, threadName: ForkJoinPool.commonPool-worker-2\nasync time: 1694959567115, threadName: ForkJoinPool.commonPool-worker-3\n</code></pre>\n<p>For each parallel execution, the ForkJoinPool assigns a different thread (worker) from its pool.</p>\n<p>The only difference between v4 and v5 is that v4 does not return the result and, therefore, does not wait for the completion of <code>Thread.sleep(1000);</code> in the current 'main' (http-nio) thread. Instead, it immediately releases the current thread and returns the response '200 OK'.</p>\n<p>Lastly, if you're concerned about not holding threads in controllers and ensuring your APIs are always available, Spring Boot handles it automatically. By default, Spring Boot uses the Tomcat web server and creates an executor with 200 threads in the pool.</p>\n"}],"owner":{"account_id":14387497,"reputation":1756,"user_id":10393067,"display_name":"logbasex"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":53,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":2,"score":1,"last_activity_date":1694962524,"creation_date":1694831742,"question_id":77116142,"body_markdown":"    /**\r\n\t * Async work.\r\n\t */\r\n\t@GetMapping(value = &quot;/async/data/v4&quot;)\r\n\tpublic void getDataAsyncV4() {\r\n\t\tCompletableFuture.supplyAsync(() -&gt; {\r\n\t\t\ttry {\r\n\t\t\t\tThread.sleep(1000); // Sleep for 1 second (does not block the main thread)\r\n\t\t\t\treturn Data.builder().data(&quot;Some Data&quot;).threadId(Thread.currentThread().getId()).requestCameTime(System.currentTimeMillis()).build();\r\n\t\t\t} catch (InterruptedException e) {\r\n\t\t\t\tthrow new RuntimeException(e);\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\t\r\n\t/**\r\n\t * Async doesn&#39;t work if return CompletableFuture.\r\n\t */\r\n\t@GetMapping(value = &quot;/async/data/v5&quot;)\r\n\tpublic CompletableFuture&lt;Data&gt; getDataAsyncV5() {\r\n\t\treturn CompletableFuture.supplyAsync(() -&gt; {\r\n\t\t\ttry {\r\n\t\t\t\tThread.sleep(1000); // block main thread\r\n\t\t\t\treturn Data.builder().data(&quot;Some Data&quot;).threadId(Thread.currentThread().getId()).requestCameTime(System.currentTimeMillis()).build();\r\n\t\t\t} catch (InterruptedException e) {\r\n\t\t\t\tthrow new RuntimeException(e);\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\nI have two APIs as above and the problem is the only API method `getDataAsyncV4()` which returns void is run `asynchronously`, and the API method `getDataAsyncV5()` which returns `CompletableFuture` always blocks the main thread. I have tried different ways like using annotation `@EnableAsync`,  adding customer Executor.. but it doesn&#39;t work, I still can&#39;t understand why.","title":"Rest API: return CompletableFuture in Controller does not make API run asyc","body":"<pre><code>/**\n * Async work.\n */\n@GetMapping(value = &quot;/async/data/v4&quot;)\npublic void getDataAsyncV4() {\n    CompletableFuture.supplyAsync(() -&gt; {\n        try {\n            Thread.sleep(1000); // Sleep for 1 second (does not block the main thread)\n            return Data.builder().data(&quot;Some Data&quot;).threadId(Thread.currentThread().getId()).requestCameTime(System.currentTimeMillis()).build();\n        } catch (InterruptedException e) {\n            throw new RuntimeException(e);\n        }\n    });\n}\n\n/**\n * Async doesn't work if return CompletableFuture.\n */\n@GetMapping(value = &quot;/async/data/v5&quot;)\npublic CompletableFuture&lt;Data&gt; getDataAsyncV5() {\n    return CompletableFuture.supplyAsync(() -&gt; {\n        try {\n            Thread.sleep(1000); // block main thread\n            return Data.builder().data(&quot;Some Data&quot;).threadId(Thread.currentThread().getId()).requestCameTime(System.currentTimeMillis()).build();\n        } catch (InterruptedException e) {\n            throw new RuntimeException(e);\n        }\n    });\n}\n</code></pre>\n<p>I have two APIs as above and the problem is the only API method <code>getDataAsyncV4()</code> which returns void is run <code>asynchronously</code>, and the API method <code>getDataAsyncV5()</code> which returns <code>CompletableFuture</code> always blocks the main thread. I have tried different ways like using annotation <code>@EnableAsync</code>,  adding customer Executor.. but it doesn't work, I still can't understand why.</p>\n"},{"tags":["java","json","list","objectmapper"],"comments":[{"owner":{"account_id":26162020,"reputation":19,"user_id":19848385,"display_name":"Sirmator"},"score":0,"creation_date":1694902592,"post_id":77119663,"comment_id":135953096,"body_markdown":"I want to know how to make the data in the json as a List so I can use it in methods and just call it when I need","body":"I want to know how to make the data in the json as a List so I can use it in methods and just call it when I need"},{"owner":{"account_id":26162020,"reputation":19,"user_id":19848385,"display_name":"Sirmator"},"score":0,"creation_date":1694902777,"post_id":77119663,"comment_id":135953114,"body_markdown":"Yeah I tried sending it to a list but the code doesn&#39;t work","body":"Yeah I tried sending it to a list but the code doesn&#39;t work"},{"owner":{"account_id":26162020,"reputation":19,"user_id":19848385,"display_name":"Sirmator"},"score":0,"creation_date":1694903499,"post_id":77119663,"comment_id":135953165,"body_markdown":"ok here is what i&#39;m trying to do \n\n`public static void main(String[] args) throws Exception {\n\t\t\n\t\tList&lt;MusicPiece&gt; articleList = jsonToListObject(&quot;c:/data/json/data_song.json&quot;);\n\t\tSystem.out.println(articleList);\n\t\t\t\n\t\t}\n\t}`\n\nI know i&#39;m missng something but I don&#39;t know why its giving me an error","body":"ok here is what i&#39;m trying to do   <code>public static void main(String[] args) throws Exception { \t\t \t\tList&lt;MusicPiece&gt; articleList = jsonToListObject(&quot;c:&#47;data&#47;json&#47;data_song.json&quot;); \t\tSystem.out.println(articleList); \t\t\t \t\t} \t}</code>  I know i&#39;m missng something but I don&#39;t know why its giving me an error"},{"owner":{"account_id":23740623,"reputation":1,"user_id":17758716,"display_name":"Reilas"},"score":0,"creation_date":1694906886,"post_id":77119663,"comment_id":135953384,"body_markdown":"Use _[Gson](https://en.wikipedia.org/wiki/Gson)_ instead.","body":"Use <i><a href=\"https://en.wikipedia.org/wiki/Gson\" rel=\"nofollow noreferrer\">Gson</a></i> instead."},{"owner":{"account_id":26162020,"reputation":19,"user_id":19848385,"display_name":"Sirmator"},"score":0,"creation_date":1694910039,"post_id":77119663,"comment_id":135953543,"body_markdown":"no but i need to use fasterxml and object mapper to make this work and i want to figure out why its not working","body":"no but i need to use fasterxml and object mapper to make this work and i want to figure out why its not working"},{"owner":{"account_id":14357,"reputation":9128,"user_id":29470,"display_name":"Tim Moore"},"score":1,"creation_date":1694924101,"post_id":77119663,"comment_id":135954257,"body_markdown":"What’s the problem that you’re having? Please put details in the question, not a comment. If you are getting an exception, copy the entire exception message and stack trace and paste it into the question, formatted as a code block.","body":"What’s the problem that you’re having? Please put details in the question, not a comment. If you are getting an exception, copy the entire exception message and stack trace and paste it into the question, formatted as a code block."},{"owner":{"account_id":14357,"reputation":9128,"user_id":29470,"display_name":"Tim Moore"},"score":0,"creation_date":1694924158,"post_id":77119663,"comment_id":135954262,"body_markdown":"You’ll also need to include the JSON data that you’re trying to parse and the definition of the `MusicPiece` class","body":"You’ll also need to include the JSON data that you’re trying to parse and the definition of the <code>MusicPiece</code> class"},{"owner":{"account_id":26162020,"reputation":19,"user_id":19848385,"display_name":"Sirmator"},"score":0,"creation_date":1694959751,"post_id":77119663,"comment_id":135957153,"body_markdown":"sure let me add it","body":"sure let me add it"},{"owner":{"account_id":26162020,"reputation":19,"user_id":19848385,"display_name":"Sirmator"},"score":0,"creation_date":1694960108,"post_id":77119663,"comment_id":135957201,"body_markdown":"ok I added the code for the json and the musicPiece class","body":"ok I added the code for the json and the musicPiece class"},{"owner":{"account_id":2671330,"reputation":183376,"user_id":2308683,"accept_rate":90,"display_name":"OneCricketeer"},"score":0,"creation_date":1694961589,"post_id":77119663,"comment_id":135957380,"body_markdown":"@Reilas Jackson will work perfectly fine. Please give more details than &quot;_use something different_&quot;, siting performance or how it&#39;ll solve this specific issue any differently","body":"@Reilas Jackson will work perfectly fine. Please give more details than &quot;<i>use something different</i>&quot;, siting performance or how it&#39;ll solve this specific issue any differently"},{"owner":{"account_id":26162020,"reputation":19,"user_id":19848385,"display_name":"Sirmator"},"score":0,"creation_date":1694961797,"post_id":77119663,"comment_id":135957416,"body_markdown":"I&#39;m getting this error when I use it like shown in the main method  `Exception in thread &quot;main&quot; com.fasterxml.jackson.databind.exc.InvalidDefinitionException: Cannot construct instance of com.Entities.MusicPiece(no Creators, like default constructor, exist): cannot deserialize from Object value (no delegate- or property-based Creator)`\n\nI&#39;m trying to find its meaning","body":"I&#39;m getting this error when I use it like shown in the main method  <code>Exception in thread &quot;main&quot; com.fasterxml.jackson.databind.exc.InvalidDefinitionExceptio&zwnj;&#8203;n: Cannot construct instance of com.Entities.MusicPiece(no Creators, like default constructor, exist): cannot deserialize from Object value (no delegate- or property-based Creator)</code>  I&#39;m trying to find its meaning"},{"owner":{"account_id":26162020,"reputation":19,"user_id":19848385,"display_name":"Sirmator"},"score":0,"creation_date":1694968944,"post_id":77119663,"comment_id":135958208,"body_markdown":"I&#39;m still lost the answer is nice but I can&#39;t figure where to use `@JsonProperty(&quot;field name in json&quot;)`","body":"I&#39;m still lost the answer is nice but I can&#39;t figure where to use <code>@JsonProperty(&quot;field name in json&quot;)</code>"}],"answers":[{"tags":[],"owner":{"account_id":2671330,"reputation":183376,"user_id":2308683,"accept_rate":90,"display_name":"OneCricketeer"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1694961856,"creation_date":1694961856,"answer_id":77122306,"question_id":77119663,"body_markdown":"The JSON you&#39;ve shared has no matching fields with your Music class, and therefore cannot be parsed.\r\n\r\nIf you want fields to be set differently than they exist in the file, you must add `@JsonProperty(&quot;field name in json&quot;)` annotations to each field.\r\n\r\nAlso, as the error says, you need to add a default, no arg, constructor to the class ","title":"How to send Json data to a list of an object to use from a path on the C: drive","body":"<p>The JSON you've shared has no matching fields with your Music class, and therefore cannot be parsed.</p>\n<p>If you want fields to be set differently than they exist in the file, you must add <code>@JsonProperty(&quot;field name in json&quot;)</code> annotations to each field.</p>\n<p>Also, as the error says, you need to add a default, no arg, constructor to the class</p>\n"}],"owner":{"account_id":26162020,"reputation":19,"user_id":19848385,"display_name":"Sirmator"},"comment_count":12,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":62,"favorite_count":0,"down_vote_count":4,"up_vote_count":1,"accepted_answer_id":77122306,"answer_count":1,"score":-3,"last_activity_date":1694961937,"creation_date":1694899480,"question_id":77119663,"body_markdown":"\r\n\r\n**code for using my json to a path**\r\n\r\n    public static List&lt;MusicPiece&gt; jsonToListObject(String path) throws Exception {\r\n    \t    return new ObjectMapper().readValue(new FileInputStream(path), new TypeReference&lt;List&lt;MusicPiece&gt;&gt;() {});\r\n    \t}\r\n\r\n**main to send a sysout of the data in the json sent to the list**\r\n\r\npublic static void main(String[] args) throws Exception {\r\n\t\t\r\n\t\tList&lt;MusicPiece&gt; articleList = jsonToListObject(&quot;c:/data/json/data_song.json&quot;);\r\n\t\tfor (MusicPiece musicPiece : articleList) {\r\n\t\t\tSystem.out.println(&quot;title: &quot; + musicPiece.getMusic_title());\r\n            System.out.println(&quot;duree : &quot; + musicPiece.getDuree());\r\n\t\t\t\r\n\t\t}\r\n\t}\r\n\r\n**Music Piece class** \r\n\r\n\r\n\tpublic class MusicPiece implements Comparator&lt;MusicPiece&gt;{\r\n\tprivate String music_title;\r\n\tprivate String genre;\r\n\tprivate String interprete;\r\n\tprivate int duree; \r\n\t\r\n\t\r\n\tpublic MusicPiece(String music_title, String genre, String interprete, int duree) {\r\n        this.music_title = music_title;\r\n        this.genre = genre;\r\n        this.interprete = interprete;\r\n        this.duree = duree;\r\n        \r\n    }\r\n\r\n\r\n\tpublic String getMusic_title() {\r\n\t\treturn music_title;\r\n\t}\r\n\r\n\r\n\tpublic void setMusic_title(String music_title) {\r\n\t\tthis.music_title = music_title;\r\n\t}\r\n\r\n\r\n\tpublic String getGenre() {\r\n\t\treturn genre;\r\n\t}\r\n\r\n\r\n\tpublic void setGenre(String genre) {\r\n\t\tthis.genre = genre;\r\n\t}\r\n\r\n\r\n\tpublic String getInterprete() {\r\n\t\treturn interprete;\r\n\t}\r\n\r\n\r\n\tpublic void setInterprete(String interprete) {\r\n\t\tthis.interprete = interprete;\r\n\t}\r\n\r\n\r\n\tpublic int getDuree() {\r\n\t\treturn duree;\r\n\t}\r\n\r\n\r\n\tpublic void setDuree(int duree) {\r\n\t\tthis.duree = duree;\r\n\t}\r\n\r\n\r\n\t@Override\r\n\tpublic String toString() {\r\n\t\treturn &quot;MusicPiece [music_title=&quot; + music_title + &quot;, genre=&quot; + genre + &quot;, interprete=&quot; + interprete + &quot;, duree=&quot;+ duree + &quot;]&quot;;\r\n\t}\r\n\r\n\r\n\t@Override\r\n\tpublic int compare(MusicPiece o1, MusicPiece o2) {\r\n\t\t\r\n\t\treturn 0;\r\n\t}\r\n\r\n\t\r\n**Json file with the mock data**\r\n\r\n`[{&quot;id&quot;:1,&quot;title&quot;:&quot;Porter&quot;,&quot;author&quot;:&quot;Horton Twydell&quot;,&quot;liked&quot;:false,&quot;duration&quot;:3.04},\r\n{&quot;id&quot;:2,&quot;title&quot;:&quot;American Ash&quot;,&quot;author&quot;:&quot;Kenton Kamall&quot;,&quot;liked&quot;:false,&quot;duration&quot;:4.1},\r\n{&quot;id&quot;:3,&quot;title&quot;:&quot;Dovetail&quot;,&quot;author&quot;:&quot;Juieta Meedendorpe&quot;,&quot;liked&quot;:false,&quot;duration&quot;:4.66}]`\r\n\r\nI&#39;m getting this error when I use it like shown in the main method \r\n```\r\nException in thread &quot;main&quot; com.fasterxml.jackson.databind.exc.InvalidDefinitionException: Cannot construct instance of com.Entities.MusicPiece(no Creators, like default constructor, exist): cannot deserialize from Object value (no delegate- or property-based Creator) \r\n```","title":"How to send Json data to a list of an object to use from a path on the C: drive","body":"<p><strong>code for using my json to a path</strong></p>\n<pre><code>public static List&lt;MusicPiece&gt; jsonToListObject(String path) throws Exception {\n        return new ObjectMapper().readValue(new FileInputStream(path), new TypeReference&lt;List&lt;MusicPiece&gt;&gt;() {});\n    }\n</code></pre>\n<p><strong>main to send a sysout of the data in the json sent to the list</strong></p>\n<p>public static void main(String[] args) throws Exception {</p>\n<pre><code>    List&lt;MusicPiece&gt; articleList = jsonToListObject(&quot;c:/data/json/data_song.json&quot;);\n    for (MusicPiece musicPiece : articleList) {\n        System.out.println(&quot;title: &quot; + musicPiece.getMusic_title());\n        System.out.println(&quot;duree : &quot; + musicPiece.getDuree());\n        \n    }\n}\n</code></pre>\n<p><strong>Music Piece class</strong></p>\n<pre><code>public class MusicPiece implements Comparator&lt;MusicPiece&gt;{\nprivate String music_title;\nprivate String genre;\nprivate String interprete;\nprivate int duree; \n\n\npublic MusicPiece(String music_title, String genre, String interprete, int duree) {\n    this.music_title = music_title;\n    this.genre = genre;\n    this.interprete = interprete;\n    this.duree = duree;\n    \n}\n\n\npublic String getMusic_title() {\n    return music_title;\n}\n\n\npublic void setMusic_title(String music_title) {\n    this.music_title = music_title;\n}\n\n\npublic String getGenre() {\n    return genre;\n}\n\n\npublic void setGenre(String genre) {\n    this.genre = genre;\n}\n\n\npublic String getInterprete() {\n    return interprete;\n}\n\n\npublic void setInterprete(String interprete) {\n    this.interprete = interprete;\n}\n\n\npublic int getDuree() {\n    return duree;\n}\n\n\npublic void setDuree(int duree) {\n    this.duree = duree;\n}\n\n\n@Override\npublic String toString() {\n    return &quot;MusicPiece [music_title=&quot; + music_title + &quot;, genre=&quot; + genre + &quot;, interprete=&quot; + interprete + &quot;, duree=&quot;+ duree + &quot;]&quot;;\n}\n\n\n@Override\npublic int compare(MusicPiece o1, MusicPiece o2) {\n    \n    return 0;\n}\n</code></pre>\n<p><strong>Json file with the mock data</strong></p>\n<p><code>[{&quot;id&quot;:1,&quot;title&quot;:&quot;Porter&quot;,&quot;author&quot;:&quot;Horton Twydell&quot;,&quot;liked&quot;:false,&quot;duration&quot;:3.04}, {&quot;id&quot;:2,&quot;title&quot;:&quot;American Ash&quot;,&quot;author&quot;:&quot;Kenton Kamall&quot;,&quot;liked&quot;:false,&quot;duration&quot;:4.1}, {&quot;id&quot;:3,&quot;title&quot;:&quot;Dovetail&quot;,&quot;author&quot;:&quot;Juieta Meedendorpe&quot;,&quot;liked&quot;:false,&quot;duration&quot;:4.66}]</code></p>\n<p>I'm getting this error when I use it like shown in the main method</p>\n<pre><code>Exception in thread &quot;main&quot; com.fasterxml.jackson.databind.exc.InvalidDefinitionException: Cannot construct instance of com.Entities.MusicPiece(no Creators, like default constructor, exist): cannot deserialize from Object value (no delegate- or property-based Creator) \n</code></pre>\n"},{"tags":["java","spring-boot","ssl","tls1.3"],"comments":[{"owner":{"account_id":3701398,"reputation":116662,"user_id":3081018,"display_name":"Steffen Ullrich"},"score":0,"creation_date":1694968493,"post_id":77122279,"comment_id":135958153,"body_markdown":"*&quot;Should the server version not be TLSv1.3 after the negotation process?&quot;* - no. The version of the record layer stays at TLS 1.2 for compatibility reasons. For details see the standard.","body":"<i>&quot;Should the server version not be TLSv1.3 after the negotation process?&quot;</i> - no. The version of the record layer stays at TLS 1.2 for compatibility reasons. For details see the standard."},{"owner":{"account_id":16264201,"reputation":77,"user_id":13821253,"display_name":"M Hot"},"score":0,"creation_date":1694971691,"post_id":77122279,"comment_id":135958551,"body_markdown":"Ok, but why do I get the log &#39;&#39;Negotiated Protocol version: TLSv.1.3&#39;  ? Its a message in between of Client Hello and  Server Hello.","body":"Ok, but why do I get the log &#39;&#39;Negotiated Protocol version: TLSv.1.3&#39;  ? Its a message in between of Client Hello and  Server Hello."},{"owner":{"account_id":3701398,"reputation":116662,"user_id":3081018,"display_name":"Steffen Ullrich"},"score":0,"creation_date":1694972641,"post_id":77122279,"comment_id":135958667,"body_markdown":"See the supported_version extension in ServerHello. That&#39;s how it works in TLS 1.3","body":"See the supported_version extension in ServerHello. That&#39;s how it works in TLS 1.3"}],"owner":{"account_id":16264201,"reputation":77,"user_id":13821253,"display_name":"M Hot"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":15,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"closed_date":1694968447,"answer_count":0,"score":0,"last_activity_date":1694961387,"creation_date":1694961387,"question_id":77122279,"body_markdown":"I am currently SSL-Debugging my Java 17 Spring Boot Application and I found some weird occurence regarding the SSL logs.\r\n\r\n    First, I get the &#39;Client Hello&#39; with &#39;client version: TLSv1.2&#39;.\r\n    Then, I get the the log &#39;Negotiated Protocol version: TLSv.1.3\r\n    Finally, I get the &#39;Server Hello&#39;, but this server hello has also the \r\n    entry &#39;server version: TLSv1.2&#39;.\r\n\r\nShould the server version not be TLSv1.3 after the negotation process?\r\n","title":"TLS: Client Hello and Server Hello are TLSv.1.2 but negotiated version is TLSv.1.3","body":"<p>I am currently SSL-Debugging my Java 17 Spring Boot Application and I found some weird occurence regarding the SSL logs.</p>\n<pre><code>First, I get the 'Client Hello' with 'client version: TLSv1.2'.\nThen, I get the the log 'Negotiated Protocol version: TLSv.1.3\nFinally, I get the 'Server Hello', but this server hello has also the \nentry 'server version: TLSv1.2'.\n</code></pre>\n<p>Should the server version not be TLSv1.3 after the negotation process?</p>\n"},{"tags":["java","eclipse","hibernate","jpa"],"answers":[{"tags":[],"owner":{"account_id":6189920,"reputation":2014,"user_id":4822884,"accept_rate":60,"display_name":"francesco foresti"},"down_vote_count":0,"up_vote_count":7,"is_accepted":true,"score":7,"last_activity_date":1432654628,"creation_date":1432654628,"answer_id":30463008,"question_id":30462929,"body_markdown":"the persistence.xml file should reside in a folder named `META-INF`. If you are using using Maven, put it in `src/main/resources/META-INF` (create the folder if it&#39;s not there).","title":"persistence.xml is not found for Hibernate JPA project","body":"<p>the persistence.xml file should reside in a folder named <code>META-INF</code>. If you are using using Maven, put it in <code>src/main/resources/META-INF</code> (create the folder if it's not there).</p>\n"},{"tags":[],"owner":{"account_id":5417693,"reputation":1799,"user_id":4312388,"accept_rate":79,"display_name":"Yayotr&#243;n"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1432654693,"creation_date":1432654693,"answer_id":30463036,"question_id":30462929,"body_markdown":"You should use your IDE option for create a Persistence Unit, and it will be placed on the default location.\r\nIf you don&#39;t have or don&#39;t found that option in your IDE, it&#39;s usually on the META-INF folder located in the proyect root folder, like this:\r\n ![enter image description here][1]\r\n\r\n\r\n  [1]: http://i.stack.imgur.com/3p8wR.png","title":"persistence.xml is not found for Hibernate JPA project","body":"<p>You should use your IDE option for create a Persistence Unit, and it will be placed on the default location.\nIf you don't have or don't found that option in your IDE, it's usually on the META-INF folder located in the proyect root folder, like this:\n <img src=\"https://i.stack.imgur.com/3p8wR.png\" alt=\"enter image description here\"></p>\n"},{"tags":[],"owner":{"account_id":6194214,"reputation":3674,"user_id":4826048,"display_name":"K139"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1432654827,"creation_date":1432654827,"answer_id":30463079,"question_id":30462929,"body_markdown":"Keep `persistence.xml` under `META-INF` folder. \r\n\r\nIn Eclipse, it would be under\r\n\r\n   \r\n\r\n    Project --&gt; WebContent --&gt; META-INF ","title":"persistence.xml is not found for Hibernate JPA project","body":"<p>Keep <code>persistence.xml</code> under <code>META-INF</code> folder. </p>\n\n<p>In Eclipse, it would be under</p>\n\n<pre><code>Project --&gt; WebContent --&gt; META-INF \n</code></pre>\n"},{"tags":[],"owner":{"account_id":6308811,"reputation":755,"user_id":4901047,"display_name":"Chetan Verma"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1432654828,"creation_date":1432654828,"answer_id":30463080,"question_id":30462929,"body_markdown":"If you are using jboss application server then please make sure the oracle driver exist under the org.hibernate module and having the entry in module.xml file.\r\n\r\nAlso, right click on project and  set project facet to JPA, it will automatically added your persitence.xml file to META-INF class path of application. \r\n\r\nPlease share the more information which application server you are using and which oracle driver you are using for connectivity.\r\n\r\nNot compulsory to use maven. \r\n\r\ncheers. ","title":"persistence.xml is not found for Hibernate JPA project","body":"<p>If you are using jboss application server then please make sure the oracle driver exist under the org.hibernate module and having the entry in module.xml file.</p>\n\n<p>Also, right click on project and  set project facet to JPA, it will automatically added your persitence.xml file to META-INF class path of application. </p>\n\n<p>Please share the more information which application server you are using and which oracle driver you are using for connectivity.</p>\n\n<p>Not compulsory to use maven. </p>\n\n<p>cheers. </p>\n"}],"owner":{"account_id":2171295,"reputation":639,"user_id":1923218,"accept_rate":57,"display_name":"Beast"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":10726,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":30463008,"answer_count":4,"score":2,"last_activity_date":1694961169,"creation_date":1432654440,"question_id":30462929,"body_markdown":"Hi I am new to Hibernate JPA. I am using eclipse kepler 4.3.2 and create a simple java project. I am not using maven to compile the project. I am having the below persistence.xml located in the src folder of the project\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n    &lt;persistence xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n        version=&quot;2.0&quot;\r\n        xmlns=&quot;http://java.sun.com/xml/ns/persistence&quot;\r\n        xsi:schemaLocation=&quot;http://java.sun.com/xml/ns/persistence http://java.sun.com/xml/ns/persistence/persistence_2_0.xsd&quot; &gt;\r\n        &lt;persistence-unit name=&quot;rawsjpa&quot; transaction-type=&quot;RESOURCE_LOCAL&quot;&gt;\r\n            &lt;!-- &lt;class&gt;com.mumz.test.hibernatesearch.entitybeans.MHSBookEntityBean&lt;/class&gt;\r\n            &lt;class&gt;com.mumz.test.hibernatesearch.entitybeans.MHSBookShelfEntityBean&lt;/class&gt; --&gt;\r\n            &lt;properties&gt;\r\n                &lt;property name=&quot;hibernate.show_sql&quot; value=&quot;true&quot;/&gt;\r\n                &lt;property name=&quot;hibernate.connection.driver_class&quot; value=&quot;oracle.jdbc.OracleDriver&quot;/&gt;\r\n                &lt;property name=&quot;hibernate.connection.password&quot; value=&quot;Test2@cdn&quot;/&gt;\r\n                &lt;property name=&quot;hibernate.connection.url&quot; value=&quot;jdbc:oracle:thin:@(DESCRIPTION=(ADDRESS=(PROTOCOL=TCP)(HOST=rschcdndb1d.nam.nsroot.net)(PORT=1526))(CONNECT_DATA=(SERVER=DEDICATED)(SERVICE_NAME=OSRDD1)))&quot;/&gt;\r\n                &lt;property name=&quot;hibernate.connection.username&quot; value=&quot;AW&quot;/&gt;\r\n                &lt;property name=&quot;hibernate.dialect&quot; value=&quot;org.hibernate.dialect.Oracle8iDialect&quot;/&gt;\r\n            &lt;/properties&gt;\r\n        &lt;/persistence-unit&gt;\r\n    &lt;/persistence&gt;\r\n\r\nI am having the below sample main program trying to create the EntityManager.\r\n\r\n    import javax.persistence.EntityManager;\r\n    import javax.persistence.Persistence;\r\n    \r\n    /**\r\n     * \r\n     */\r\n    \r\n    /**\r\n     * @author jp48346\r\n     *\r\n     */\r\n    public class TestRawsConnection {\r\n    \t\r\n    \tpublic static void main(String args[]){\r\n    \t\tEntityManager entityManager = Persistence.createEntityManagerFactory(&quot;rawsjpa&quot;).createEntityManager();\r\n    \t\tif(entityManager!=null){\r\n    \t\t\tSystem.out.println(&quot;************* EntityManager is obtained *****************&quot;);\r\n    \t\t}\r\n    \t}\r\n    \r\n    }\r\n\r\nBelow is the eclipse project .classpath file\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n    &lt;classpath&gt;\r\n    \t&lt;classpathentry excluding=&quot;main/resources/META-INF/&quot; kind=&quot;src&quot; path=&quot;src&quot;/&gt;\r\n    \t&lt;classpathentry kind=&quot;con&quot; path=&quot;org.eclipse.jdt.launching.JRE_CONTAINER/org.eclipse.jdt.internal.debug.ui.launcher.StandardVMType/JavaSE-1.7&quot;/&gt;\r\n    \t&lt;classpathentry kind=&quot;lib&quot; path=&quot;C:/Users/jp48346/.m2/repository/org/hibernate/hibernate-entitymanager/4.2.17.Final/hibernate-entitymanager-4.2.17.Final.jar&quot;/&gt;\r\n    \t&lt;classpathentry kind=&quot;lib&quot; path=&quot;C:/Users/jp48346/.m2/repository/org/hibernate/common/hibernate-commons-annotations/4.0.2.Final/hibernate-commons-annotations-4.0.2.Final.jar&quot;/&gt;\r\n    \t&lt;classpathentry kind=&quot;lib&quot; path=&quot;C:/Users/jp48346/.m2/repository/org/hibernate/javax/persistence/hibernate-jpa-2.0-api/1.0.1.Final/hibernate-jpa-2.0-api-1.0.1.Final.jar&quot;/&gt;\r\n    \t&lt;classpathentry kind=&quot;lib&quot; path=&quot;C:/Users/jp48346/.m2/repository/org/hibernate/hibernate-core/4.2.17.Final/hibernate-core-4.2.17.Final.jar&quot;/&gt;\r\n    \t&lt;classpathentry kind=&quot;lib&quot; path=&quot;C:/Users/jp48346/.m2/repository/org/jboss/logging/jboss-logging/3.1.0.GA/jboss-logging-3.1.0.GA.jar&quot;/&gt;\r\n    \t&lt;classpathentry kind=&quot;lib&quot; path=&quot;C:/Users/jp48346/.m2/repository/javax/transaction/jta/1.1/jta-1.1.jar&quot;/&gt;\r\n    \t&lt;classpathentry kind=&quot;lib&quot; path=&quot;C:/Users/jp48346/.m2/repository/dom4j/dom4j/1.6.1/dom4j-1.6.1.jar&quot;/&gt;\r\n    \t&lt;classpathentry kind=&quot;output&quot; path=&quot;bin&quot;/&gt;\r\n    &lt;/classpath&gt;\r\n\r\nwhen I am trying to execute the program I am getting the below exception \r\n\r\n    May 26, 2015 8:52:17 PM org.hibernate.annotations.common.Version &lt;clinit&gt;\r\n    INFO: HCANN000001: Hibernate Commons Annotations {4.0.2.Final}\r\n    May 26, 2015 8:52:18 PM org.hibernate.Version logVersion\r\n    INFO: HHH000412: Hibernate Core {4.2.17.Final}\r\n    May 26, 2015 8:52:18 PM org.hibernate.cfg.Environment &lt;clinit&gt;\r\n    INFO: HHH000206: hibernate.properties not found\r\n    May 26, 2015 8:52:18 PM org.hibernate.cfg.Environment buildBytecodeProvider\r\n    INFO: HHH000021: Bytecode provider name : javassist\r\n    May 26, 2015 8:52:18 PM org.hibernate.ejb.Ejb3Configuration configure\r\n    INFO: HHH000318: Could not find any META-INF/persistence.xml file in the classpath\r\n    Exception in thread &quot;main&quot; javax.persistence.PersistenceException: No Persistence provider for EntityManager named rawsjpa\r\n    \tat javax.persistence.Persistence.createEntityManagerFactory(Persistence.java:69)\r\n    \tat javax.persistence.Persistence.createEntityManagerFactory(Persistence.java:47)\r\n    \tat TestRawsConnection.main(TestRawsConnection.java:15)\r\n\r\nCan anybody please tell me where should I place persistence.xml to resolve the above issue?\r\n","title":"persistence.xml is not found for Hibernate JPA project","body":"<p>Hi I am new to Hibernate JPA. I am using eclipse kepler 4.3.2 and create a simple java project. I am not using maven to compile the project. I am having the below persistence.xml located in the src folder of the project</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;persistence xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n    version=\"2.0\"\n    xmlns=\"http://java.sun.com/xml/ns/persistence\"\n    xsi:schemaLocation=\"http://java.sun.com/xml/ns/persistence http://java.sun.com/xml/ns/persistence/persistence_2_0.xsd\" &gt;\n    &lt;persistence-unit name=\"rawsjpa\" transaction-type=\"RESOURCE_LOCAL\"&gt;\n        &lt;!-- &lt;class&gt;com.mumz.test.hibernatesearch.entitybeans.MHSBookEntityBean&lt;/class&gt;\n        &lt;class&gt;com.mumz.test.hibernatesearch.entitybeans.MHSBookShelfEntityBean&lt;/class&gt; --&gt;\n        &lt;properties&gt;\n            &lt;property name=\"hibernate.show_sql\" value=\"true\"/&gt;\n            &lt;property name=\"hibernate.connection.driver_class\" value=\"oracle.jdbc.OracleDriver\"/&gt;\n            &lt;property name=\"hibernate.connection.password\" value=\"Test2@cdn\"/&gt;\n            &lt;property name=\"hibernate.connection.url\" value=\"jdbc:oracle:thin:@(DESCRIPTION=(ADDRESS=(PROTOCOL=TCP)(HOST=rschcdndb1d.nam.nsroot.net)(PORT=1526))(CONNECT_DATA=(SERVER=DEDICATED)(SERVICE_NAME=OSRDD1)))\"/&gt;\n            &lt;property name=\"hibernate.connection.username\" value=\"AW\"/&gt;\n            &lt;property name=\"hibernate.dialect\" value=\"org.hibernate.dialect.Oracle8iDialect\"/&gt;\n        &lt;/properties&gt;\n    &lt;/persistence-unit&gt;\n&lt;/persistence&gt;\n</code></pre>\n\n<p>I am having the below sample main program trying to create the EntityManager.</p>\n\n<pre><code>import javax.persistence.EntityManager;\nimport javax.persistence.Persistence;\n\n/**\n * \n */\n\n/**\n * @author jp48346\n *\n */\npublic class TestRawsConnection {\n\n    public static void main(String args[]){\n        EntityManager entityManager = Persistence.createEntityManagerFactory(\"rawsjpa\").createEntityManager();\n        if(entityManager!=null){\n            System.out.println(\"************* EntityManager is obtained *****************\");\n        }\n    }\n\n}\n</code></pre>\n\n<p>Below is the eclipse project .classpath file</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;classpath&gt;\n    &lt;classpathentry excluding=\"main/resources/META-INF/\" kind=\"src\" path=\"src\"/&gt;\n    &lt;classpathentry kind=\"con\" path=\"org.eclipse.jdt.launching.JRE_CONTAINER/org.eclipse.jdt.internal.debug.ui.launcher.StandardVMType/JavaSE-1.7\"/&gt;\n    &lt;classpathentry kind=\"lib\" path=\"C:/Users/jp48346/.m2/repository/org/hibernate/hibernate-entitymanager/4.2.17.Final/hibernate-entitymanager-4.2.17.Final.jar\"/&gt;\n    &lt;classpathentry kind=\"lib\" path=\"C:/Users/jp48346/.m2/repository/org/hibernate/common/hibernate-commons-annotations/4.0.2.Final/hibernate-commons-annotations-4.0.2.Final.jar\"/&gt;\n    &lt;classpathentry kind=\"lib\" path=\"C:/Users/jp48346/.m2/repository/org/hibernate/javax/persistence/hibernate-jpa-2.0-api/1.0.1.Final/hibernate-jpa-2.0-api-1.0.1.Final.jar\"/&gt;\n    &lt;classpathentry kind=\"lib\" path=\"C:/Users/jp48346/.m2/repository/org/hibernate/hibernate-core/4.2.17.Final/hibernate-core-4.2.17.Final.jar\"/&gt;\n    &lt;classpathentry kind=\"lib\" path=\"C:/Users/jp48346/.m2/repository/org/jboss/logging/jboss-logging/3.1.0.GA/jboss-logging-3.1.0.GA.jar\"/&gt;\n    &lt;classpathentry kind=\"lib\" path=\"C:/Users/jp48346/.m2/repository/javax/transaction/jta/1.1/jta-1.1.jar\"/&gt;\n    &lt;classpathentry kind=\"lib\" path=\"C:/Users/jp48346/.m2/repository/dom4j/dom4j/1.6.1/dom4j-1.6.1.jar\"/&gt;\n    &lt;classpathentry kind=\"output\" path=\"bin\"/&gt;\n&lt;/classpath&gt;\n</code></pre>\n\n<p>when I am trying to execute the program I am getting the below exception </p>\n\n<pre><code>May 26, 2015 8:52:17 PM org.hibernate.annotations.common.Version &lt;clinit&gt;\nINFO: HCANN000001: Hibernate Commons Annotations {4.0.2.Final}\nMay 26, 2015 8:52:18 PM org.hibernate.Version logVersion\nINFO: HHH000412: Hibernate Core {4.2.17.Final}\nMay 26, 2015 8:52:18 PM org.hibernate.cfg.Environment &lt;clinit&gt;\nINFO: HHH000206: hibernate.properties not found\nMay 26, 2015 8:52:18 PM org.hibernate.cfg.Environment buildBytecodeProvider\nINFO: HHH000021: Bytecode provider name : javassist\nMay 26, 2015 8:52:18 PM org.hibernate.ejb.Ejb3Configuration configure\nINFO: HHH000318: Could not find any META-INF/persistence.xml file in the classpath\nException in thread \"main\" javax.persistence.PersistenceException: No Persistence provider for EntityManager named rawsjpa\n    at javax.persistence.Persistence.createEntityManagerFactory(Persistence.java:69)\n    at javax.persistence.Persistence.createEntityManagerFactory(Persistence.java:47)\n    at TestRawsConnection.main(TestRawsConnection.java:15)\n</code></pre>\n\n<p>Can anybody please tell me where should I place persistence.xml to resolve the above issue?</p>\n"},{"tags":["java","apache-fop","java-17","java-platform-module-system"],"comments":[{"owner":{"account_id":785560,"reputation":14879,"user_id":845414,"display_name":"Johannes Kuhn"},"score":1,"creation_date":1694617543,"post_id":77095360,"comment_id":135915518,"body_markdown":"&quot;Does not work&quot;. How do you know? An error message? Could you please [edit] that detail into the question?","body":"&quot;Does not work&quot;. How do you know? An error message? Could you please <a href=\"https://stackoverflow.com/posts/77095360/edit\">edit</a> that detail into the question?"}],"answers":[{"tags":[],"owner":{"account_id":1939636,"reputation":28457,"user_id":1746118,"accept_rate":95,"display_name":"Naman"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1694960525,"creation_date":1694632886,"answer_id":77099955,"question_id":77095360,"body_markdown":"Seemingly the classes(`org.apache.fop.apps.*`) you are looking for have been abstracted to `fop-core`, hence adding a `requires` directive for that as a module with version `2.9` shall get you going.\r\n\r\n    requires fop.core;\r\n\r\n\r\n----------\r\n\r\n\r\nIn fact referenced in a few documents and the mailing list threads -- \r\n\r\n&gt; The `fop` jar packages `fop-util`, `fop-events`, and `fop-core`, so you want\r\n&gt; either the all-in-one jar, or the other 3 jars, but not both.\r\n\r\nSo, it would be better to replace the **`requires fop`** with \r\n\r\n    requires fop.core;\r\n    requires fop.events;\r\n    requires fop.util;\r\n\r\n**But**, the contributors needs to focus further to restructure the common packages to make all these three being used independently and combined by clients or else as shared by you compilation fails with :\r\n\r\n    java: the unnamed module reads package org.apache.fop.events from both fop.core and fop.events\r\n","title":"fop pom and module-info example","body":"<p>Seemingly the classes(<code>org.apache.fop.apps.*</code>) you are looking for have been abstracted to <code>fop-core</code>, hence adding a <code>requires</code> directive for that as a module with version <code>2.9</code> shall get you going.</p>\n<pre><code>requires fop.core;\n</code></pre>\n<hr />\n<p>In fact referenced in a few documents and the mailing list threads --</p>\n<blockquote>\n<p>The <code>fop</code> jar packages <code>fop-util</code>, <code>fop-events</code>, and <code>fop-core</code>, so you want\neither the all-in-one jar, or the other 3 jars, but not both.</p>\n</blockquote>\n<p>So, it would be better to replace the <strong><code>requires fop</code></strong> with</p>\n<pre><code>requires fop.core;\nrequires fop.events;\nrequires fop.util;\n</code></pre>\n<p><strong>But</strong>, the contributors needs to focus further to restructure the common packages to make all these three being used independently and combined by clients or else as shared by you compilation fails with :</p>\n<pre><code>java: the unnamed module reads package org.apache.fop.events from both fop.core and fop.events\n</code></pre>\n"}],"owner":{"account_id":2002545,"reputation":832,"user_id":1793217,"display_name":"ngong"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":73,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":1,"score":0,"last_activity_date":1694960525,"creation_date":1694593830,"question_id":77095360,"body_markdown":"I tried to locate an example of pom.xml and module-info.java to use fop in an embedded way with JPMS, namely Java-17, but could not find one.\r\n\r\nE.g. my code:\r\n\r\n    \t\tFopFactoryBuilder builder = new FopFactoryBuilder(basePath.toUri()).setPageHeight(&quot;297mm&quot;)\r\n\t\t\t\t\t.setPageWidth(&quot;210mm&quot;);\r\n\t\t\tFopFactory fopFactory = builder.build();\r\n\t\t\tout = new BufferedOutputStream(Files.newOutputStream(r));\r\n\t\t\tFop fop = fopFactory.newFop(MimeConstants.MIME_PDF, out);\r\n\t\t\tTransformer transformer = TransformerFactory.newInstance().newTransformer();\r\n\t\t\tSource src = new StreamSource(fo.toFile());\r\n\t\t\tResult res = new SAXResult(fop.getDefaultHandler());\r\n\t\t\ttransformer.transform(src, res);\r\nworked until fop 2.8 with \r\n\r\n    \t&lt;groupId&gt;org.apache.xmlgraphics&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;fop&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;2.8&lt;/version&gt;\r\n\t\t\t&lt;exclusions&gt;\r\n\t\t\t\t&lt;exclusion&gt;\r\n\t\t\t\t\t&lt;groupId&gt;xalan&lt;/groupId&gt;\r\n\t\t\t\t\t&lt;artifactId&gt;serializer&lt;/artifactId&gt;\r\n\t\t\t\t&lt;/exclusion&gt;\r\n\t\t\t\t&lt;exclusion&gt;\r\n\t\t\t\t\t&lt;groupId&gt;xalan&lt;/groupId&gt;\r\n\t\t\t\t\t&lt;artifactId&gt;xalan&lt;/artifactId&gt;\r\n\t\t\t\t&lt;/exclusion&gt;\r\n\t\t\t\t&lt;exclusion&gt;\r\n\t\t\t\t\t&lt;groupId&gt;org.apache.xmlgraphics&lt;/groupId&gt;\r\n\t\t\t\t\t&lt;artifactId&gt;batik-script&lt;/artifactId&gt;\r\n\t\t\t\t&lt;/exclusion&gt;\r\n\t\t\t&lt;exclusions&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\nMy module-info.java contains\r\n\r\n    requires Saxon.HE;\r\n\trequires transitive org.slf4j;\r\n\trequires java.prefs;\r\n\trequires fop;\r\n\trequires xmlgraphics.commons;\r\n\trequires java.xml;\r\n\r\n\r\nWhen upgrading to fop version 2.9 it misses the package `org.apache.fop.apps.` in compilation.\r\n\r\nAs I found that solution by trial-and-error, my question is a bit broader: **How to embed fop in a JPMS project environment?**","title":"fop pom and module-info example","body":"<p>I tried to locate an example of pom.xml and module-info.java to use fop in an embedded way with JPMS, namely Java-17, but could not find one.</p>\n<p>E.g. my code:</p>\n<pre><code>        FopFactoryBuilder builder = new FopFactoryBuilder(basePath.toUri()).setPageHeight(&quot;297mm&quot;)\n                .setPageWidth(&quot;210mm&quot;);\n        FopFactory fopFactory = builder.build();\n        out = new BufferedOutputStream(Files.newOutputStream(r));\n        Fop fop = fopFactory.newFop(MimeConstants.MIME_PDF, out);\n        Transformer transformer = TransformerFactory.newInstance().newTransformer();\n        Source src = new StreamSource(fo.toFile());\n        Result res = new SAXResult(fop.getDefaultHandler());\n        transformer.transform(src, res);\n</code></pre>\n<p>worked until fop 2.8 with</p>\n<pre><code>    &lt;groupId&gt;org.apache.xmlgraphics&lt;/groupId&gt;\n        &lt;artifactId&gt;fop&lt;/artifactId&gt;\n        &lt;version&gt;2.8&lt;/version&gt;\n        &lt;exclusions&gt;\n            &lt;exclusion&gt;\n                &lt;groupId&gt;xalan&lt;/groupId&gt;\n                &lt;artifactId&gt;serializer&lt;/artifactId&gt;\n            &lt;/exclusion&gt;\n            &lt;exclusion&gt;\n                &lt;groupId&gt;xalan&lt;/groupId&gt;\n                &lt;artifactId&gt;xalan&lt;/artifactId&gt;\n            &lt;/exclusion&gt;\n            &lt;exclusion&gt;\n                &lt;groupId&gt;org.apache.xmlgraphics&lt;/groupId&gt;\n                &lt;artifactId&gt;batik-script&lt;/artifactId&gt;\n            &lt;/exclusion&gt;\n        &lt;exclusions&gt;\n    &lt;/dependency&gt;\n</code></pre>\n<p>My module-info.java contains</p>\n<pre><code>requires Saxon.HE;\nrequires transitive org.slf4j;\nrequires java.prefs;\nrequires fop;\nrequires xmlgraphics.commons;\nrequires java.xml;\n</code></pre>\n<p>When upgrading to fop version 2.9 it misses the package <code>org.apache.fop.apps.</code> in compilation.</p>\n<p>As I found that solution by trial-and-error, my question is a bit broader: <strong>How to embed fop in a JPMS project environment?</strong></p>\n"},{"tags":["java","javascript","json","exception","jackson"],"comments":[{"owner":{"account_id":1498585,"reputation":2754,"user_id":1403954,"display_name":"Pascal G&#233;linas"},"score":0,"creation_date":1365170586,"post_id":15833979,"comment_id":22530788,"body_markdown":"What is the Json you are trying to parse?","body":"What is the Json you are trying to parse?"},{"owner":{"account_id":469221,"reputation":2032,"user_id":875692,"accept_rate":44,"display_name":"Giovanni Bitliner"},"score":0,"creation_date":1365173940,"post_id":15833979,"comment_id":22533060,"body_markdown":"I have edited the question with a sample of json string","body":"I have edited the question with a sample of json string"},{"owner":{"account_id":469221,"reputation":2032,"user_id":875692,"accept_rate":44,"display_name":"Giovanni Bitliner"},"score":0,"creation_date":1365175775,"post_id":15833979,"comment_id":22534221,"body_markdown":"Probably the cause is from the missing annotations in the subclass that are subclassed too or missing annotation @JsonSubTypes in the superclass. Confirmation? I will try to correct","body":"Probably the cause is from the missing annotations in the subclass that are subclassed too or missing annotation @JsonSubTypes in the superclass. Confirmation? I will try to correct"},{"owner":{"account_id":1498585,"reputation":2754,"user_id":1403954,"display_name":"Pascal G&#233;linas"},"score":0,"creation_date":1365175933,"post_id":15833979,"comment_id":22534314,"body_markdown":"The annotations are &quot;inherited&quot;, so that&#39;s not your problem. What I&#39;m concerned about is the persence of `java.util.*` in your json... Ha! that&#39;s the default typing, I think. Have you tried without that?","body":"The annotations are &quot;inherited&quot;, so that&#39;s not your problem. What I&#39;m concerned about is the persence of <code>java.util.*</code> in your json... Ha! that&#39;s the default typing, I think. Have you tried without that?"},{"owner":{"account_id":469221,"reputation":2032,"user_id":875692,"accept_rate":44,"display_name":"Giovanni Bitliner"},"score":0,"creation_date":1365178533,"post_id":15833979,"comment_id":22535911,"body_markdown":"I tried, now it throws different errors. I have added annotation to all types, but the error message is\n&quot;Could not resolve type id &#39;F&#39; into a subtype of [simple type, class E]&quot;","body":"I tried, now it throws different errors. I have added annotation to all types, but the error message is &quot;Could not resolve type id &#39;F&#39; into a subtype of [simple type, class E]&quot;"}],"answers":[{"tags":[],"owner":{"account_id":1498585,"reputation":2754,"user_id":1403954,"display_name":"Pascal G&#233;linas"},"down_vote_count":1,"up_vote_count":4,"is_accepted":false,"score":3,"last_activity_date":1365176747,"creation_date":1365176201,"answer_id":15837971,"question_id":15833979,"body_markdown":"I believe the problem is with the default typing. The start of your JSON is not generated as what Jackson expect with default typing. The begining of the JSON should be:\r\n\r\n    [&quot;java.util.HashSet&quot;, [{\r\n\r\nand the end should have an extra closing bracket `}]]`.\r\n\r\nThat&#39;s because you generate the JSON using the `toString()` method of your set. You should instead use the `ObjectMapper`, that&#39;s configured with default typing, like so:\r\n\r\n    res = objectMapper.writerWithDefaultPrettyPrinter().writeValueAsString(yourSet);","title":"Java Jackson: deserialize complex polymorphic object model: JsonMappingException: Unexpected token (START_OBJECT), expected VALUE_STRING","body":"<p>I believe the problem is with the default typing. The start of your JSON is not generated as what Jackson expect with default typing. The begining of the JSON should be:</p>\n\n<pre><code>[\"java.util.HashSet\", [{\n</code></pre>\n\n<p>and the end should have an extra closing bracket <code>}]]</code>.</p>\n\n<p>That's because you generate the JSON using the <code>toString()</code> method of your set. You should instead use the <code>ObjectMapper</code>, that's configured with default typing, like so:</p>\n\n<pre><code>res = objectMapper.writerWithDefaultPrettyPrinter().writeValueAsString(yourSet);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":13316463,"reputation":55,"user_id":9612721,"display_name":"Kornext"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1694959833,"creation_date":1694959833,"answer_id":77122164,"question_id":15833979,"body_markdown":"Maybe it will help someone.\r\nIn my case, the error occurred due to the toList() method of Stream.API. This method returns an immutable collection and because of it, after serialization, the final JSON object was missing an ArrayList type. Collectors.toList() solved my problem\r\n\r\nBefore\r\n\r\n            List&lt;B2bItem&gt; itemIdList = branchDto.getOrders()\r\n                .stream()\r\n                .map(order -&gt; order.getItems()\r\n                        .stream()\r\n                        .map(OrderItemDto::getB2bItem)\r\n                        .toList())\r\n                .flatMap(List::stream)\r\n                .toList(); // &lt;---\r\n\r\nAfter\r\n\r\n            List&lt;B2bItem&gt; itemIdList = branchDto.getOrders()\r\n                .stream()\r\n                .map(order -&gt; order.getItems()\r\n                        .stream()\r\n                        .map(OrderItemDto::getB2bItem)\r\n                        .toList())\r\n                .flatMap(List::stream)\r\n                .collect(Collectors.toList()); // &lt;---","title":"Java Jackson: deserialize complex polymorphic object model: JsonMappingException: Unexpected token (START_OBJECT), expected VALUE_STRING","body":"<p>Maybe it will help someone.\nIn my case, the error occurred due to the toList() method of Stream.API. This method returns an immutable collection and because of it, after serialization, the final JSON object was missing an ArrayList type. Collectors.toList() solved my problem</p>\n<p>Before</p>\n<pre><code>        List&lt;B2bItem&gt; itemIdList = branchDto.getOrders()\n            .stream()\n            .map(order -&gt; order.getItems()\n                    .stream()\n                    .map(OrderItemDto::getB2bItem)\n                    .toList())\n            .flatMap(List::stream)\n            .toList(); // &lt;---\n</code></pre>\n<p>After</p>\n<pre><code>        List&lt;B2bItem&gt; itemIdList = branchDto.getOrders()\n            .stream()\n            .map(order -&gt; order.getItems()\n                    .stream()\n                    .map(OrderItemDto::getB2bItem)\n                    .toList())\n            .flatMap(List::stream)\n            .collect(Collectors.toList()); // &lt;---\n</code></pre>\n"}],"owner":{"account_id":469221,"reputation":2032,"user_id":875692,"accept_rate":44,"display_name":"Giovanni Bitliner"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":23903,"favorite_count":0,"down_vote_count":0,"up_vote_count":5,"answer_count":2,"score":5,"last_activity_date":1694959833,"creation_date":1365164844,"question_id":15833979,"body_markdown":"I have this tree of objects\r\n\r\nA\r\n\r\nB extends A\r\n\r\nC extends B\r\n\r\nD extends B\r\n\r\nE extends C\r\n\r\nF extends A and has one reference to A\r\n\r\nA has the following annotation\r\n\r\n`@JsonTypeInfo(use=JsonTypeInfo.Id.CLASS,include=JsonTypeInfo.As.PROPERTY,property=&quot;@class&quot;)`\r\n\r\nIf i try to deserialize a JSON array of objects that extends A, it throws the following error\r\n\r\n&gt; org.codehaus.jackson.map.JsonMappingException: Unexpected token\r\n&gt; (START_OBJECT), expected VALUE_STRING: need JSON String that contains\r\n&gt; type id (for subtype of java.util.Collection)\r\n\r\nThe json string is generated by toString() method of a set and the set is parametric to type A where A is serialized in JSON with the following code:\r\n\r\n    ObjectMapper objectMapper=new ObjectMapper();\r\n    \t\tobjectMapper.enableDefaultTyping(ObjectMapper.DefaultTyping.NON_CONCRETE_AND_ARRAYS);\r\n    \t\tString res=&quot;&quot;;\r\n    \t\ttry {\r\n    \t\t\tres = objectMapper.writerWithDefaultPrettyPrinter().writeValueAsString(t);\r\n    \t\t} catch (JsonGenerationException e) {\r\n    \t\t\te.printStackTrace();\r\n    \t\t} catch (JsonMappingException e) {\r\n    \t\t\te.printStackTrace();\r\n    \t\t} catch (IOException e) {\r\n    \t\t\te.printStackTrace();\r\n    \t\t}\r\n    \t\treturn res;\r\n\r\nThe code to deserialize the json array (that is the set described above) is:\r\n\r\n    ObjectMapper mapper = new ObjectMapper(); \r\n    \r\n    \t\tmapper.enableDefaultTyping(ObjectMapper.DefaultTyping.NON_CONCRETE_AND_ARRAYS);\r\n    \t\tCollection&lt;T&gt; results=null;\r\n    \t\ttry {\r\n    \t\t\tresults =  mapper.readValue(json, TypeFactory.defaultInstance().constructParametricType(Collection.class, clazz ) );\r\n    \t\t} catch (JsonParseException e) {\r\n    \t\t\t// TODO Auto-generated catch block\r\n    \t\t\te.printStackTrace();\r\n    \t\t} catch (JsonMappingException e) {\r\n    \t\t\t// TODO Auto-generated catch block\r\n    \t\t\te.printStackTrace();\r\n    \t\t} catch (IOException e) {\r\n    \t\t\t// TODO Auto-generated catch block\r\n    \t\t\te.printStackTrace();\r\n    \t\t}  \r\n    \t\treturn results;\r\n\r\nThe json sample that it parses is like:\r\n\r\n    &quot;[{\r\n      &quot;@class&quot; : &quot;pack1.pack2.MyClass&quot;,\r\n      &quot;id&quot; : null,\r\n      &quot;f1&quot; : &quot;&quot;,\r\n      &quot;f2&quot; : 0.9933817827,\r\n      &quot;f3&quot; : 6.883261E-4,\r\n      &quot;f4&quot; : 0.001375699,\r\n      &quot;f5&quot; : {\r\n        &quot;@class&quot; : &quot;pack1.pack2.MyClass2&quot;,\r\n        &quot;id&quot; : null,\r\n        &quot;f1&quot; : &quot;&quot;,\r\n        &quot;f2&quot; : 0.0,\r\n        &quot;f3&quot; : 0.0,\r\n        &quot;f4&quot; : 0.0,\r\n        &quot;f5&quot; : [ &quot;java.util.HashSet&quot;, [ 0 ] ],\r\n        &quot;f6&quot; : [ &quot;java.util.HashSet&quot;, [ 2 ] ],\r\n        &quot;f7&quot; : [ &quot;java.util.ArrayList&quot;, [ &quot;scelta&quot;, &quot;brani&quot;, &quot;buona&quot; ] ],\r\n        &quot;f8&quot; : [ null, &quot;NOM&quot;, null ],\r\n        &quot;f9&quot; : false\r\n      },\r\n      &quot;f10&quot; : [ &quot;java.util.HashMap&quot;, {\r\n        &quot;2&quot; : &quot;ADJ&quot;\r\n      } ],\r\n      &quot;f11&quot; : [ &quot;java.util.HashSet&quot;, [ 0 ] ],\r\n      &quot;f12&quot; : [ &quot;java.util.HashSet&quot;, [ 2 ] ],\r\n      &quot;f13&quot; : [ &quot;java.util.ArrayList&quot;, [ &quot;scelta&quot;, &quot;brani&quot;, &quot;buona&quot; ] ],\r\n      &quot;featureIndicator&quot; : false\r\n    }]&quot;\r\nHere the json string includes only some objects of my sample of java Set ","title":"Java Jackson: deserialize complex polymorphic object model: JsonMappingException: Unexpected token (START_OBJECT), expected VALUE_STRING","body":"<p>I have this tree of objects</p>\n\n<p>A</p>\n\n<p>B extends A</p>\n\n<p>C extends B</p>\n\n<p>D extends B</p>\n\n<p>E extends C</p>\n\n<p>F extends A and has one reference to A</p>\n\n<p>A has the following annotation</p>\n\n<p><code>@JsonTypeInfo(use=JsonTypeInfo.Id.CLASS,include=JsonTypeInfo.As.PROPERTY,property=\"@class\")</code></p>\n\n<p>If i try to deserialize a JSON array of objects that extends A, it throws the following error</p>\n\n<blockquote>\n  <p>org.codehaus.jackson.map.JsonMappingException: Unexpected token\n  (START_OBJECT), expected VALUE_STRING: need JSON String that contains\n  type id (for subtype of java.util.Collection)</p>\n</blockquote>\n\n<p>The json string is generated by toString() method of a set and the set is parametric to type A where A is serialized in JSON with the following code:</p>\n\n<pre><code>ObjectMapper objectMapper=new ObjectMapper();\n        objectMapper.enableDefaultTyping(ObjectMapper.DefaultTyping.NON_CONCRETE_AND_ARRAYS);\n        String res=\"\";\n        try {\n            res = objectMapper.writerWithDefaultPrettyPrinter().writeValueAsString(t);\n        } catch (JsonGenerationException e) {\n            e.printStackTrace();\n        } catch (JsonMappingException e) {\n            e.printStackTrace();\n        } catch (IOException e) {\n            e.printStackTrace();\n        }\n        return res;\n</code></pre>\n\n<p>The code to deserialize the json array (that is the set described above) is:</p>\n\n<pre><code>ObjectMapper mapper = new ObjectMapper(); \n\n        mapper.enableDefaultTyping(ObjectMapper.DefaultTyping.NON_CONCRETE_AND_ARRAYS);\n        Collection&lt;T&gt; results=null;\n        try {\n            results =  mapper.readValue(json, TypeFactory.defaultInstance().constructParametricType(Collection.class, clazz ) );\n        } catch (JsonParseException e) {\n            // TODO Auto-generated catch block\n            e.printStackTrace();\n        } catch (JsonMappingException e) {\n            // TODO Auto-generated catch block\n            e.printStackTrace();\n        } catch (IOException e) {\n            // TODO Auto-generated catch block\n            e.printStackTrace();\n        }  \n        return results;\n</code></pre>\n\n<p>The json sample that it parses is like:</p>\n\n<pre><code>\"[{\n  \"@class\" : \"pack1.pack2.MyClass\",\n  \"id\" : null,\n  \"f1\" : \"\",\n  \"f2\" : 0.9933817827,\n  \"f3\" : 6.883261E-4,\n  \"f4\" : 0.001375699,\n  \"f5\" : {\n    \"@class\" : \"pack1.pack2.MyClass2\",\n    \"id\" : null,\n    \"f1\" : \"\",\n    \"f2\" : 0.0,\n    \"f3\" : 0.0,\n    \"f4\" : 0.0,\n    \"f5\" : [ \"java.util.HashSet\", [ 0 ] ],\n    \"f6\" : [ \"java.util.HashSet\", [ 2 ] ],\n    \"f7\" : [ \"java.util.ArrayList\", [ \"scelta\", \"brani\", \"buona\" ] ],\n    \"f8\" : [ null, \"NOM\", null ],\n    \"f9\" : false\n  },\n  \"f10\" : [ \"java.util.HashMap\", {\n    \"2\" : \"ADJ\"\n  } ],\n  \"f11\" : [ \"java.util.HashSet\", [ 0 ] ],\n  \"f12\" : [ \"java.util.HashSet\", [ 2 ] ],\n  \"f13\" : [ \"java.util.ArrayList\", [ \"scelta\", \"brani\", \"buona\" ] ],\n  \"featureIndicator\" : false\n}]\"\n</code></pre>\n\n<p>Here the json string includes only some objects of my sample of java Set </p>\n"},{"tags":["java","gradle"],"answers":[{"tags":[],"owner":{"account_id":2767223,"reputation":21433,"user_id":2382650,"accept_rate":92,"display_name":"Cisco"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1694959649,"creation_date":1694959308,"answer_id":77122132,"question_id":77116904,"body_markdown":"The `include(...)` is not specific to the `test` task. It comes from [`PatternFilterable`](https://docs.gradle.org/current/javadoc/org/gradle/api/tasks/util/PatternFilterable.html) which the `test` task type implements. This is a generic filter that accepts Ant-style path patterns. Several task types also implement this functionality such as `jar`, `wav`,`javaCompile`, and many more tasks. Essentially, if a task operates on a file, then it most likely implements `PatternFilterable` therefore you can use `include(...)`. Documentation for this can be found in [Working With Files](https://docs.gradle.org/current/userguide/working_with_files.html) docs although it is not explicitly called out like test filtering below.\r\n\r\nThe `filter { }` is specific to testing (and newer if that matters since Gradle 1.10). The key difference is that `include(...)` only operates on files whereas `filter { }` operates on the tests themselves _and_ hooks into the test engine (JUnit, TestNG, etc). It allows you to filter to specific test methods, for example:\r\n\r\n    test {\r\n        filter {\r\n            includeTest &quot;org.gradle.SomeTest&quot;, &quot;someTestMethod&quot;\r\n        }\r\n    }\r\n\r\nThis means to execute a specific test class _and_ method. You can&#39;t do that with `include(...)` since that only operates on files themselves. See [Test Filtering](https://docs.gradle.org/current/userguide/java_testing.html#test_filtering) for more details","title":"Gradle test.include vs test.filter.includeTestsMatching","body":"<p>The <code>include(...)</code> is not specific to the <code>test</code> task. It comes from <a href=\"https://docs.gradle.org/current/javadoc/org/gradle/api/tasks/util/PatternFilterable.html\" rel=\"nofollow noreferrer\"><code>PatternFilterable</code></a> which the <code>test</code> task type implements. This is a generic filter that accepts Ant-style path patterns. Several task types also implement this functionality such as <code>jar</code>, <code>wav</code>,<code>javaCompile</code>, and many more tasks. Essentially, if a task operates on a file, then it most likely implements <code>PatternFilterable</code> therefore you can use <code>include(...)</code>. Documentation for this can be found in <a href=\"https://docs.gradle.org/current/userguide/working_with_files.html\" rel=\"nofollow noreferrer\">Working With Files</a> docs although it is not explicitly called out like test filtering below.</p>\n<p>The <code>filter { }</code> is specific to testing (and newer if that matters since Gradle 1.10). The key difference is that <code>include(...)</code> only operates on files whereas <code>filter { }</code> operates on the tests themselves <em>and</em> hooks into the test engine (JUnit, TestNG, etc). It allows you to filter to specific test methods, for example:</p>\n<pre><code>test {\n    filter {\n        includeTest &quot;org.gradle.SomeTest&quot;, &quot;someTestMethod&quot;\n    }\n}\n</code></pre>\n<p>This means to execute a specific test class <em>and</em> method. You can't do that with <code>include(...)</code> since that only operates on files themselves. See <a href=\"https://docs.gradle.org/current/userguide/java_testing.html#test_filtering\" rel=\"nofollow noreferrer\">Test Filtering</a> for more details</p>\n"}],"owner":{"account_id":10424858,"reputation":179,"user_id":7686473,"accept_rate":100,"display_name":"Alterant"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":71,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":77122132,"answer_count":1,"score":0,"last_activity_date":1694959649,"creation_date":1694851591,"question_id":77116904,"body_markdown":"There are a lot of examples on the web where tests are filtered with test.include:\r\n```\r\ntest {\r\n    useJUnitPlatform()\r\n    include(&quot;**/*IT*&quot;)\r\n}\r\n```\r\nDocumentation says: includes - The include patterns for test execution.\r\n\r\nBut official documentation for gradle java testing says that test.filter.includeTestsMatching should be used:\r\n```\r\ntest {\r\n    useJUnitPlatform()\r\n    filter {\r\n        includeTestsMatching(&quot;*IT*&quot;)\r\n    }\r\n}\r\n```\r\nDocumentation says: includeTestsMatching - Appends a test name pattern to the inclusion filter.\r\n\r\nWhat are the key differences between these approaches besides that the latter allows to filter on the method level?","title":"Gradle test.include vs test.filter.includeTestsMatching","body":"<p>There are a lot of examples on the web where tests are filtered with test.include:</p>\n<pre><code>test {\n    useJUnitPlatform()\n    include(&quot;**/*IT*&quot;)\n}\n</code></pre>\n<p>Documentation says: includes - The include patterns for test execution.</p>\n<p>But official documentation for gradle java testing says that test.filter.includeTestsMatching should be used:</p>\n<pre><code>test {\n    useJUnitPlatform()\n    filter {\n        includeTestsMatching(&quot;*IT*&quot;)\n    }\n}\n</code></pre>\n<p>Documentation says: includeTestsMatching - Appends a test name pattern to the inclusion filter.</p>\n<p>What are the key differences between these approaches besides that the latter allows to filter on the method level?</p>\n"},{"tags":["java","jar","struts2","jquery-jtable","struts2-json-plugin"],"comments":[{"owner":{"account_id":1879878,"reputation":24286,"user_id":1700321,"display_name":"Aleksandr M"},"score":0,"creation_date":1407324823,"post_id":25159242,"comment_id":39167949,"body_markdown":"If you are *following* some post, follow it to the point.","body":"If you are <i>following</i> some post, follow it to the point."},{"owner":{"account_id":195854,"reputation":159194,"user_id":438992,"accept_rate":90,"display_name":"Dave Newton"},"score":1,"creation_date":1407326697,"post_id":25159242,"comment_id":39169106,"body_markdown":"Two issues: (1) Apparently arbitrary mixing-and-matching of Struts 2 tag library versions; it doesn&#39;t work like that--use Maven or similar, and (2) You cannot arbitrarily add libraries without also adding their transitive dependencies. In this case it might actually work, if you were using the right versions of everything, which you&#39;re not, but in general, you should not be doing dependency management yourself unless there are explicit conflicts.","body":"Two issues: (1) Apparently arbitrary mixing-and-matching of Struts 2 tag library versions; it doesn&#39;t work like that--use Maven or similar, and (2) You cannot arbitrarily add libraries without also adding their transitive dependencies. In this case it might actually work, if you were using the right versions of everything, which you&#39;re not, but in general, you should not be doing dependency management yourself unless there are explicit conflicts."}],"answers":[{"tags":[],"owner":{"account_id":698222,"reputation":50202,"user_id":573032,"accept_rate":77,"display_name":"Roman C"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1488112325,"creation_date":1407335941,"answer_id":25163281,"question_id":25159242,"body_markdown":"This is required set of libraries found in the `lib.txt`:\r\n\r\n    commons-fileupload-1.2.2.jar\r\n    commons-io-2.0.1.jar\r\n    commons-lang-2.4.jar\r\n    commons-lang3-3.1.jar\r\n    commons-logging-1.1.1.jar\r\n    commons-logging-api-1.1.jar\r\n    freemarker-2.3.19.jar\r\n    gson-2.2.2.jar\r\n    javassist-3.11.0.GA.jar\r\n    ognl-3.0.6.jar\r\n    struts2-core-2.3.8.jar\r\n    struts2-json-plugin-2.3.8.jar\r\n    xwork-core-2.3.8.jar\r\n\r\nBut in your project you are using a mix of libraries different versions of Struts. Such as \r\n\r\n    struts2-core-2.1.6.jar, \r\n    struts2-json-plugin-2.3.8.jar, \r\n    xwork-2.1.2.jar\r\n\r\nYou should not copy any of the servlet libraries to the server such as\r\n\r\n    servlet-4.0.6.jar, \r\n\r\nThe server already has dependencies for all servlet versions. Change the scope of the library to be not included in the final war. \r\n\r\nA note about \r\n\r\n    commons-io-1.3.2.jar,\r\n\r\nwhich doesn&#39;t work with Struts 2.3.8 should be updated.","title":"Adding JSON jar file to my Struts 2 project gives error: 404 resource not found","body":"<p>This is required set of libraries found in the <code>lib.txt</code>:</p>\n\n<pre><code>commons-fileupload-1.2.2.jar\ncommons-io-2.0.1.jar\ncommons-lang-2.4.jar\ncommons-lang3-3.1.jar\ncommons-logging-1.1.1.jar\ncommons-logging-api-1.1.jar\nfreemarker-2.3.19.jar\ngson-2.2.2.jar\njavassist-3.11.0.GA.jar\nognl-3.0.6.jar\nstruts2-core-2.3.8.jar\nstruts2-json-plugin-2.3.8.jar\nxwork-core-2.3.8.jar\n</code></pre>\n\n<p>But in your project you are using a mix of libraries different versions of Struts. Such as </p>\n\n<pre><code>struts2-core-2.1.6.jar, \nstruts2-json-plugin-2.3.8.jar, \nxwork-2.1.2.jar\n</code></pre>\n\n<p>You should not copy any of the servlet libraries to the server such as</p>\n\n<pre><code>servlet-4.0.6.jar, \n</code></pre>\n\n<p>The server already has dependencies for all servlet versions. Change the scope of the library to be not included in the final war. </p>\n\n<p>A note about </p>\n\n<pre><code>commons-io-1.3.2.jar,\n</code></pre>\n\n<p>which doesn't work with Struts 2.3.8 should be updated.</p>\n"}],"owner":{"account_id":3203248,"reputation":3773,"user_id":2704895,"accept_rate":33,"display_name":"sam100rav"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":308,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":1,"score":-1,"last_activity_date":1694959130,"creation_date":1407324658,"question_id":25159242,"body_markdown":"I am making a Struts 2 application using jTable which requires use of JSON. For this I am adding a Struts 2 JSON plugin jar to my project\r\n\r\n    struts2-json-plugin-2.3.8.jar\r\n\r\nWithout that jar my project is working fine (obviously without json capabilities), but when I am adding the above jar my landing page shows error \r\n\r\n    404 - resource not available.\r\n\r\nThe different jar that I am using are :\r\n\r\n    commons-fileupload-1.2.1.jar, \r\n    commons-io-1.3.2.jar, \r\n    commons-lang3-3.1.jar, \r\n    commons-logging-1.1.jar, \r\n    freemarker-2.3.13.jar, \r\n    javassist-3.11.0.GA.jar, \r\n    junit-3.8.1.jar, \r\n    ognl-2.6.11.jar, \r\n    servlet-4.0.6.jar, \r\n    struts2-core-2.1.6.jar, \r\n    struts2-json-plugin-2.3.8.jar, \r\n    xwork-2.1.2.jar\r\n\r\nI am following this [Setting up jQuery jTable plugin in Struts 2 framework](https://simplecodestuffs.com/integrating-jquery-jtable-plugin-with-struts-2-framework/).\r\n","title":"Adding JSON jar file to my Struts 2 project gives error: 404 resource not found","body":"<p>I am making a Struts 2 application using jTable which requires use of JSON. For this I am adding a Struts 2 JSON plugin jar to my project</p>\n<pre><code>struts2-json-plugin-2.3.8.jar\n</code></pre>\n<p>Without that jar my project is working fine (obviously without json capabilities), but when I am adding the above jar my landing page shows error</p>\n<pre><code>404 - resource not available.\n</code></pre>\n<p>The different jar that I am using are :</p>\n<pre><code>commons-fileupload-1.2.1.jar, \ncommons-io-1.3.2.jar, \ncommons-lang3-3.1.jar, \ncommons-logging-1.1.jar, \nfreemarker-2.3.13.jar, \njavassist-3.11.0.GA.jar, \njunit-3.8.1.jar, \nognl-2.6.11.jar, \nservlet-4.0.6.jar, \nstruts2-core-2.1.6.jar, \nstruts2-json-plugin-2.3.8.jar, \nxwork-2.1.2.jar\n</code></pre>\n<p>I am following this <a href=\"https://simplecodestuffs.com/integrating-jquery-jtable-plugin-with-struts-2-framework/\" rel=\"nofollow noreferrer\">Setting up jQuery jTable plugin in Struts 2 framework</a>.</p>\n"},{"tags":["java","maven","aether"],"comments":[{"owner":{"account_id":888714,"reputation":34077,"user_id":927493,"accept_rate":61,"display_name":"J Fabian Meier"},"score":2,"creation_date":1694963066,"post_id":77122114,"comment_id":135957571,"body_markdown":"So `mvn dependency:tree` fails because of the missing JARs?","body":"So <code>mvn dependency:tree</code> fails because of the missing JARs?"},{"owner":{"account_id":2878276,"reputation":192,"user_id":2469698,"display_name":"himanshu_mps"},"score":0,"creation_date":1695012171,"post_id":77122114,"comment_id":135961982,"body_markdown":"Yes .. When maven tries to generate the dependency tree, it starts downloading pom and then jar, and the jar download fails. So `mvn dependency:tree` fails","body":"Yes .. When maven tries to generate the dependency tree, it starts downloading pom and then jar, and the jar download fails. So <code>mvn dependency:tree</code> fails"},{"owner":{"account_id":15064163,"reputation":13519,"user_id":10871900,"display_name":"dan1st is crying"},"score":0,"creation_date":1695025561,"post_id":77122114,"comment_id":135963841,"body_markdown":"Does this answer your question? [List maven dependencies without downloading jars](https://stackoverflow.com/questions/66490343/list-maven-dependencies-without-downloading-jars)","body":"Does this answer your question? <a href=\"https://stackoverflow.com/questions/66490343/list-maven-dependencies-without-downloading-jars\">List maven dependencies without downloading jars</a>"}],"owner":{"account_id":2878276,"reputation":192,"user_id":2469698,"display_name":"himanshu_mps"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":55,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":0,"score":2,"last_activity_date":1694958973,"creation_date":1694958973,"question_id":77122114,"body_markdown":"I have an internal jfrog artifactory which contains artifacts from various maven repos. There are some jars that are quarantined as they have high CVE vulnerabilities. I want to get the dependency tree (either through mvn or through java code) without downloading the jars as they are quarantined(405 status code), but the pom are not quarantined. Is there any way this can be achieved ?","title":"Dealing with quarantined jars in maven","body":"<p>I have an internal jfrog artifactory which contains artifacts from various maven repos. There are some jars that are quarantined as they have high CVE vulnerabilities. I want to get the dependency tree (either through mvn or through java code) without downloading the jars as they are quarantined(405 status code), but the pom are not quarantined. Is there any way this can be achieved ?</p>\n"},{"tags":["java","spring","spring-boot","maven","spring-security"],"comments":[{"owner":{"account_id":477214,"reputation":5260,"user_id":888580,"display_name":"lane.maxwell"},"score":0,"creation_date":1694720319,"post_id":77107560,"comment_id":135932185,"body_markdown":"The part you&#39;ve redacted from your question will help us explain why you&#39;re getting this error. However, you can figure this out pretty quickly by looking at the javadocs for ServerWebExchangeMatchers; they have different signatures.  Even if you get past this, you&#39;ll likely encounter other issues, these are often not backward compatible.","body":"The part you&#39;ve redacted from your question will help us explain why you&#39;re getting this error. However, you can figure this out pretty quickly by looking at the javadocs for ServerWebExchangeMatchers; they have different signatures.  Even if you get past this, you&#39;ll likely encounter other issues, these are often not backward compatible."}],"answers":[{"tags":[],"owner":{"account_id":136251,"reputation":87506,"user_id":339637,"accept_rate":55,"display_name":"Ken Chan"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1694958893,"creation_date":1694956108,"answer_id":77121939,"question_id":77107560,"body_markdown":"Most probably it is because of the library version conflict issue which not all of your spring security libraries are in the same version. Guess that it is because you are using `spring-security-web` `5.7.5` and `spring-security-config` `5.7.10` ? \r\n\r\nBut I don&#39;t understand why you need to specifically update `spring-security-config` to `5.7.10` as by default `spring-boot` `2.7.15` (and hence `spring-boot-starter-security` `2.7.15`) should already upgrade the `spring-security` to `5.7.10` in `spring-boot` `2.7.14` (See [this][1]).\r\n\r\nSo try to make sure all the spring-security libraries (e.g `spring-security-web`) are in the version `5.7.10` which align with your spring-boot version `2.7.15` should solve your problem.\r\n\r\n\r\n\r\n\r\n\r\n  [1]: https://github.com/spring-projects/spring-boot/releases/tag/v2.7.14","title":"Springboot @Bean NoSuchMethodError","body":"<p>Most probably it is because of the library version conflict issue which not all of your spring security libraries are in the same version. Guess that it is because you are using <code>spring-security-web</code> <code>5.7.5</code> and <code>spring-security-config</code> <code>5.7.10</code> ?</p>\n<p>But I don't understand why you need to specifically update <code>spring-security-config</code> to <code>5.7.10</code> as by default <code>spring-boot</code> <code>2.7.15</code> (and hence <code>spring-boot-starter-security</code> <code>2.7.15</code>) should already upgrade the <code>spring-security</code> to <code>5.7.10</code> in <code>spring-boot</code> <code>2.7.14</code> (See <a href=\"https://github.com/spring-projects/spring-boot/releases/tag/v2.7.14\" rel=\"nofollow noreferrer\">this</a>).</p>\n<p>So try to make sure all the spring-security libraries (e.g <code>spring-security-web</code>) are in the version <code>5.7.10</code> which align with your spring-boot version <code>2.7.15</code> should solve your problem.</p>\n"}],"owner":{"account_id":16221044,"reputation":331,"user_id":11712575,"display_name":"Jason Chan"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":99,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1694958893,"creation_date":1694716193,"question_id":77107560,"body_markdown":"I was using dependency `spring-boot-starter-security` 2.7.15 . This package used `spring-security-config` 5.7.5 as a dependency which has a CVE. In maven, I upgraded the dependencyManagement for `spring-security-config` 5.7.5 -&gt; 5.7.10. Now, when I start my spring boot and run my tests, I get this error in my SecurityWebFilterChain Bean: `Error creating bean with name &#39;platformSecurityWebFilterChain&#39; defined in com.x.SecurityConfig: Bean instantiation via factory method failed; nested exception is org.springframework.beans.BeanInstantiationException: Failed to instantiate [org.springframework.security.web.server.SecurityWebFilterChain]: Factory method &#39;platformSecurityWebFilterChain&#39; threw exception; nested exception is java.lang.NoSuchMethodError: &#39;org.springframework.security.web.server.util.matcher.ServerWebExchangeMatcher org.springframework.security.web.server.util.matcher.ServerWebExchangeMatchers.pathMatchers(org.springframework.web.util.pattern.PathPattern[])&#39;`\r\n\r\nMy bean looks like this:\r\n\r\n    @Bean\r\n      public SecurityWebFilterChain platformSecurityWebFilterChain(\r\n          ServerHttpSecurity httpSecurity,\r\n          JwtAuthorizingFilterProperties jwtAuthorizingFilterProperties) {\r\n        return httpSecurity\r\n            .authorizeExchange()\r\n            .pathMatchers({redacted})\r\n            .permitAll()\r\n    ...other stuff\r\n\r\nclearly, maven is able to find the .pathmatchers. I am just not sure how its not internally able to find pathpattern.\r\n\r\nThanks!","title":"Springboot @Bean NoSuchMethodError","body":"<p>I was using dependency <code>spring-boot-starter-security</code> 2.7.15 . This package used <code>spring-security-config</code> 5.7.5 as a dependency which has a CVE. In maven, I upgraded the dependencyManagement for <code>spring-security-config</code> 5.7.5 -&gt; 5.7.10. Now, when I start my spring boot and run my tests, I get this error in my SecurityWebFilterChain Bean: <code>Error creating bean with name 'platformSecurityWebFilterChain' defined in com.x.SecurityConfig: Bean instantiation via factory method failed; nested exception is org.springframework.beans.BeanInstantiationException: Failed to instantiate [org.springframework.security.web.server.SecurityWebFilterChain]: Factory method 'platformSecurityWebFilterChain' threw exception; nested exception is java.lang.NoSuchMethodError: 'org.springframework.security.web.server.util.matcher.ServerWebExchangeMatcher org.springframework.security.web.server.util.matcher.ServerWebExchangeMatchers.pathMatchers(org.springframework.web.util.pattern.PathPattern[])'</code></p>\n<p>My bean looks like this:</p>\n<pre><code>@Bean\n  public SecurityWebFilterChain platformSecurityWebFilterChain(\n      ServerHttpSecurity httpSecurity,\n      JwtAuthorizingFilterProperties jwtAuthorizingFilterProperties) {\n    return httpSecurity\n        .authorizeExchange()\n        .pathMatchers({redacted})\n        .permitAll()\n...other stuff\n</code></pre>\n<p>clearly, maven is able to find the .pathmatchers. I am just not sure how its not internally able to find pathpattern.</p>\n<p>Thanks!</p>\n"},{"tags":["java","spring-boot"],"comments":[{"owner":{"account_id":350117,"reputation":8653,"user_id":685806,"accept_rate":44,"display_name":"Pino"},"score":0,"creation_date":1694958096,"post_id":77121642,"comment_id":135956956,"body_markdown":"Welcome, please read https://stackoverflow.com/help/how-to-ask and https://stackoverflow.com/help/minimal-reproducible-example","body":"Welcome, please read <a href=\"https://stackoverflow.com/help/how-to-ask\">stackoverflow.com/help/how-to-ask</a> and <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">stackoverflow.com/help/minimal-reproducible-example</a>"}],"owner":{"account_id":29465425,"reputation":1,"user_id":22579201,"display_name":"Virendra Palekar"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":137,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1694958857,"creation_date":1694951209,"question_id":77121642,"body_markdown":"I am working on a sprinboot project and no error is shown before execution but when i run the program i am getting the error as unable to load cache item.\r\nThis is the console log:\r\n\r\n```\r\njava.lang.IllegalStateException: Unable to load cache item\r\n\tat org.springframework.cglib.core.internal.LoadingCache.createEntry(LoadingCache.java:75) ~[spring-core-6.0.11.jar:6.0.11]\r\n\tat org.springframework.cglib.core.internal.LoadingCache.get(LoadingCache.java:34) ~[spring-core-6.0.11.jar:6.0.11]\r\n\tat org.springframework.cglib.core.AbstractClassGenerator$ClassLoaderData.get(AbstractClassGenerator.java:130) ~[spring-core-6.0.11.jar:6.0.11]\r\n\tat org.springframework.cglib.core.AbstractClassGenerator.create(AbstractClassGenerator.java:317) ~[spring-core-6.0.11.jar:6.0.11]\r\n\tat org.springframework.cglib.proxy.Enhancer.createHelper(Enhancer.java:562) ~[spring-core-6.0.11.jar:6.0.11]\r\n\tat org.springframework.cglib.proxy.Enhancer.createClass(Enhancer.java:407) ~[spring-core-6.0.11.jar:6.0.11]\r\n\tat spring.context@6.0.11/org.springframework.context.annotation.ConfigurationClassEnhancer.createClass(ConfigurationClassEnhancer.java:138) ~[spring-context-6.0.11.jar:na]\r\n\tat spring.context@6.0.11/org.springframework.context.annotation.ConfigurationClassEnhancer.enhance(ConfigurationClassEnhancer.java:109) ~[spring-context-6.0.11.jar:na]\r\n\tat spring.context@6.0.11/org.springframework.context.annotation.ConfigurationClassPostProcessor.enhanceConfigurationClasses(ConfigurationClassPostProcessor.java:531) ~[spring-context-6.0.11.jar:na]\r\n\tat spring.context@6.0.11/org.springframework.context.annotation.ConfigurationClassPostProcessor.postProcessBeanFactory(ConfigurationClassPostProcessor.java:308) ~[spring-context-6.0.11.jar:na]\r\n\tat spring.context@6.0.11/org.springframework.context.support.PostProcessorRegistrationDelegate.invokeBeanFactoryPostProcessors(PostProcessorRegistrationDelegate.java:358) ~[spring-context-6.0.11.jar:na]\r\n\tat spring.context@6.0.11/org.springframework.context.support.PostProcessorRegistrationDelegate.invokeBeanFactoryPostProcessors(PostProcessorRegistrationDelegate.java:150) ~[spring-context-6.0.11.jar:na]\r\n\tat spring.context@6.0.11/org.springframework.context.support.AbstractApplicationContext.invokeBeanFactoryPostProcessors(AbstractApplicationContext.java:771) ~[spring-context-6.0.11.jar:na]\r\n\tat spring.context@6.0.11/org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:589) ~[spring-context-6.0.11.jar:na]\r\n\tat spring.boot@3.1.3/org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146) ~[spring-boot-3.1.3.jar:na]\r\n\tat spring.boot@3.1.3/org.springframework.boot.SpringApplication.refresh(SpringApplication.java:734) ~[spring-boot-3.1.3.jar:na]\r\n\tat spring.boot@3.1.3/org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:436) ~[spring-boot-3.1.3.jar:na]\r\n\tat spring.boot@3.1.3/org.springframework.boot.SpringApplication.run(SpringApplication.java:312) ~[spring-boot-3.1.3.jar:na]\r\n\tat spring.boot@3.1.3/org.springframework.boot.SpringApplication.run(SpringApplication.java:1306) ~[spring-boot-3.1.3.jar:na]\r\n\tat spring.boot@3.1.3/org.springframework.boot.SpringApplication.run(SpringApplication.java:1295) ~[spring-boot-3.1.3.jar:na]\r\n\tat login/com.viren.resume.ResumeApplication.main(ResumeApplication.java:12) ~[classes/:na]\r\nCaused by: java.lang.IllegalAccessError: class com.viren.resume.ResumeApplication$$SpringCGLIB$$0 (in module login) cannot access class org.springframework.cglib.core.ReflectUtils (in unnamed module @0x4da4253) because module login does not read unnamed module @0x4da4253\r\n\tat login/com.viren.resume.ResumeApplication$$SpringCGLIB$$0.CGLIB$STATICHOOK1(&lt;generated&gt;) ~[classes/:na]\r\n\tat login/com.viren.resume.ResumeApplication$$SpringCGLIB$$0.&lt;clinit&gt;(&lt;generated&gt;) ~[classes/:na]\r\n\tat java.base/java.lang.Class.forName0(Native Method) ~[na:na]\r\n\tat java.base/java.lang.Class.forName(Class.java:467) ~[na:na]\r\n\tat org.springframework.cglib.core.ReflectUtils.defineClass(ReflectUtils.java:551) ~[spring-core-6.0.11.jar:6.0.11]\r\n\tat org.springframework.cglib.core.AbstractClassGenerator.generate(AbstractClassGenerator.java:371) ~[spring-core-6.0.11.jar:6.0.11]\r\n\tat org.springframework.cglib.proxy.Enhancer.generate(Enhancer.java:575) ~[spring-core-6.0.11.jar:6.0.11]\r\n\tat org.springframework.cglib.core.AbstractClassGenerator$ClassLoaderData.lambda$new$1(AbstractClassGenerator.java:107) ~[spring-core-6.0.11.jar:6.0.11]\r\n\tat org.springframework.cglib.core.internal.LoadingCache.lambda$createEntry$1(LoadingCache.java:52) ~[spring-core-6.0.11.jar:6.0.11]\r\n\tat java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264) ~[na:na]\r\n\tat org.springframework.cglib.core.internal.LoadingCache.createEntry(LoadingCache.java:57) ~[spring-core-6.0.11.jar:6.0.11]\r\n\t... 20 common frames omitted\r\n```\r\n\r\nI tried making changes in the module-info file but nothing happened","title":"Getting error as &#39;Unable to load cache item&#39;","body":"<p>I am working on a sprinboot project and no error is shown before execution but when i run the program i am getting the error as unable to load cache item.\nThis is the console log:</p>\n<pre><code>java.lang.IllegalStateException: Unable to load cache item\n    at org.springframework.cglib.core.internal.LoadingCache.createEntry(LoadingCache.java:75) ~[spring-core-6.0.11.jar:6.0.11]\n    at org.springframework.cglib.core.internal.LoadingCache.get(LoadingCache.java:34) ~[spring-core-6.0.11.jar:6.0.11]\n    at org.springframework.cglib.core.AbstractClassGenerator$ClassLoaderData.get(AbstractClassGenerator.java:130) ~[spring-core-6.0.11.jar:6.0.11]\n    at org.springframework.cglib.core.AbstractClassGenerator.create(AbstractClassGenerator.java:317) ~[spring-core-6.0.11.jar:6.0.11]\n    at org.springframework.cglib.proxy.Enhancer.createHelper(Enhancer.java:562) ~[spring-core-6.0.11.jar:6.0.11]\n    at org.springframework.cglib.proxy.Enhancer.createClass(Enhancer.java:407) ~[spring-core-6.0.11.jar:6.0.11]\n    at spring.context@6.0.11/org.springframework.context.annotation.ConfigurationClassEnhancer.createClass(ConfigurationClassEnhancer.java:138) ~[spring-context-6.0.11.jar:na]\n    at spring.context@6.0.11/org.springframework.context.annotation.ConfigurationClassEnhancer.enhance(ConfigurationClassEnhancer.java:109) ~[spring-context-6.0.11.jar:na]\n    at spring.context@6.0.11/org.springframework.context.annotation.ConfigurationClassPostProcessor.enhanceConfigurationClasses(ConfigurationClassPostProcessor.java:531) ~[spring-context-6.0.11.jar:na]\n    at spring.context@6.0.11/org.springframework.context.annotation.ConfigurationClassPostProcessor.postProcessBeanFactory(ConfigurationClassPostProcessor.java:308) ~[spring-context-6.0.11.jar:na]\n    at spring.context@6.0.11/org.springframework.context.support.PostProcessorRegistrationDelegate.invokeBeanFactoryPostProcessors(PostProcessorRegistrationDelegate.java:358) ~[spring-context-6.0.11.jar:na]\n    at spring.context@6.0.11/org.springframework.context.support.PostProcessorRegistrationDelegate.invokeBeanFactoryPostProcessors(PostProcessorRegistrationDelegate.java:150) ~[spring-context-6.0.11.jar:na]\n    at spring.context@6.0.11/org.springframework.context.support.AbstractApplicationContext.invokeBeanFactoryPostProcessors(AbstractApplicationContext.java:771) ~[spring-context-6.0.11.jar:na]\n    at spring.context@6.0.11/org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:589) ~[spring-context-6.0.11.jar:na]\n    at spring.boot@3.1.3/org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146) ~[spring-boot-3.1.3.jar:na]\n    at spring.boot@3.1.3/org.springframework.boot.SpringApplication.refresh(SpringApplication.java:734) ~[spring-boot-3.1.3.jar:na]\n    at spring.boot@3.1.3/org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:436) ~[spring-boot-3.1.3.jar:na]\n    at spring.boot@3.1.3/org.springframework.boot.SpringApplication.run(SpringApplication.java:312) ~[spring-boot-3.1.3.jar:na]\n    at spring.boot@3.1.3/org.springframework.boot.SpringApplication.run(SpringApplication.java:1306) ~[spring-boot-3.1.3.jar:na]\n    at spring.boot@3.1.3/org.springframework.boot.SpringApplication.run(SpringApplication.java:1295) ~[spring-boot-3.1.3.jar:na]\n    at login/com.viren.resume.ResumeApplication.main(ResumeApplication.java:12) ~[classes/:na]\nCaused by: java.lang.IllegalAccessError: class com.viren.resume.ResumeApplication$$SpringCGLIB$$0 (in module login) cannot access class org.springframework.cglib.core.ReflectUtils (in unnamed module @0x4da4253) because module login does not read unnamed module @0x4da4253\n    at login/com.viren.resume.ResumeApplication$$SpringCGLIB$$0.CGLIB$STATICHOOK1(&lt;generated&gt;) ~[classes/:na]\n    at login/com.viren.resume.ResumeApplication$$SpringCGLIB$$0.&lt;clinit&gt;(&lt;generated&gt;) ~[classes/:na]\n    at java.base/java.lang.Class.forName0(Native Method) ~[na:na]\n    at java.base/java.lang.Class.forName(Class.java:467) ~[na:na]\n    at org.springframework.cglib.core.ReflectUtils.defineClass(ReflectUtils.java:551) ~[spring-core-6.0.11.jar:6.0.11]\n    at org.springframework.cglib.core.AbstractClassGenerator.generate(AbstractClassGenerator.java:371) ~[spring-core-6.0.11.jar:6.0.11]\n    at org.springframework.cglib.proxy.Enhancer.generate(Enhancer.java:575) ~[spring-core-6.0.11.jar:6.0.11]\n    at org.springframework.cglib.core.AbstractClassGenerator$ClassLoaderData.lambda$new$1(AbstractClassGenerator.java:107) ~[spring-core-6.0.11.jar:6.0.11]\n    at org.springframework.cglib.core.internal.LoadingCache.lambda$createEntry$1(LoadingCache.java:52) ~[spring-core-6.0.11.jar:6.0.11]\n    at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264) ~[na:na]\n    at org.springframework.cglib.core.internal.LoadingCache.createEntry(LoadingCache.java:57) ~[spring-core-6.0.11.jar:6.0.11]\n    ... 20 common frames omitted\n</code></pre>\n<p>I tried making changes in the module-info file but nothing happened</p>\n"},{"tags":["java","android","class","android-activity"],"comments":[{"owner":{"account_id":4279913,"reputation":3623,"user_id":3499626,"accept_rate":89,"display_name":"jhamon"},"score":1,"creation_date":1531903434,"post_id":51397358,"comment_id":89765831,"body_markdown":"You need to create 2 classes if they have a different behaviour. But try to mutualize all common code in an inherited class","body":"You need to create 2 classes if they have a different behaviour. But try to mutualize all common code in an inherited class"}],"answers":[{"tags":[],"owner":{"account_id":1663234,"reputation":138406,"user_id":1531124,"accept_rate":96,"display_name":"GhostCat"},"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1531911565,"creation_date":1531903550,"answer_id":51397460,"question_id":51397358,"body_markdown":"The technical answer is: **not** possible.\r\n\r\nIn Java, your inheritance structure is fixed. It is simply not possible to have one class C extend class A in one context, and class B in another context. When you want to do that, you would end up having two classes, C1 and C2. \r\n\r\nThe real answer of course is: you have to step back and clearly *architect* your whole solution. Alone the 18K lines in *one* whatever is an indication that something is seriously wrong here. One could mention the good old [FCoI][1] principle, but then: 18K lines of code means a lot of code and features. It is simply impossible to give you proper guidance in a single answer on stackoverflow. \r\n\r\nSo, opinionated: you should step back, and identify some (architecture) experts to talk to. Then sit down with them (probably for hours, even days), and look at what you have got, and where you want to get to. Then work together on path there. Anything else is nothing but putting band-aids on symptoms. Sure, nothing will break when you don&#39;t do that. But each step forward will simply add *mess* to *mess*, making each step more expensive. Sooner or later, changing your monolith will become close to impossible, and everybody will ask to &quot;throw it away, and start from scratch&quot;. \r\n\r\n\r\n  [1]: https://en.wikipedia.org/wiki/Composition_over_inheritance","title":"If condition in extending a class","body":"<p>The technical answer is: <strong>not</strong> possible.</p>\n\n<p>In Java, your inheritance structure is fixed. It is simply not possible to have one class C extend class A in one context, and class B in another context. When you want to do that, you would end up having two classes, C1 and C2. </p>\n\n<p>The real answer of course is: you have to step back and clearly <em>architect</em> your whole solution. Alone the 18K lines in <em>one</em> whatever is an indication that something is seriously wrong here. One could mention the good old <a href=\"https://en.wikipedia.org/wiki/Composition_over_inheritance\" rel=\"nofollow noreferrer\">FCoI</a> principle, but then: 18K lines of code means a lot of code and features. It is simply impossible to give you proper guidance in a single answer on stackoverflow. </p>\n\n<p>So, opinionated: you should step back, and identify some (architecture) experts to talk to. Then sit down with them (probably for hours, even days), and look at what you have got, and where you want to get to. Then work together on path there. Anything else is nothing but putting band-aids on symptoms. Sure, nothing will break when you don't do that. But each step forward will simply add <em>mess</em> to <em>mess</em>, making each step more expensive. Sooner or later, changing your monolith will become close to impossible, and everybody will ask to \"throw it away, and start from scratch\". </p>\n"},{"tags":[],"owner":{"account_id":100270,"reputation":127154,"user_id":270371,"accept_rate":33,"display_name":"davidxxx"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1543658051,"creation_date":1531925781,"answer_id":51405172,"question_id":51397358,"body_markdown":"As complement to the excellent answer of GhostCat, I will give you a very important hint in OOP : to enhance **at runtime** the behavior of an object, the decorator pattern is often a way to consider.  \r\n\r\nHere `HomeActivity` appears as the element to decorate and `ARBaseACtivity` and `NonARBaseActivity` appears as decorator for that.   \r\nYou should define a `MyActivity` interface that is the base class for both decorated and decorator objects.   \r\n\r\nSo things are not simple because you will have to refactor many code lines but it will make your design more flexible and with classes that have consistent responsibilities instead of having a god object as activity !\r\n\r\nFinally in the splash screen you could define a method that returns an activity  decorating the `HomeActivity` according to the client material detected :\r\n\r\n    public MyActivity computeHomeActivity(){\r\n    \r\n        HomeActivity activity = new HomeActivity();\r\n        \r\n        if (isSupportARCore()){\r\n           return new ARBaseACtivity(activity);\r\n        }\r\n        return new NonARBaseActivity(activity);\r\n    \r\n    }","title":"If condition in extending a class","body":"<p>As complement to the excellent answer of GhostCat, I will give you a very important hint in OOP : to enhance <strong>at runtime</strong> the behavior of an object, the decorator pattern is often a way to consider.  </p>\n\n<p>Here <code>HomeActivity</code> appears as the element to decorate and <code>ARBaseACtivity</code> and <code>NonARBaseActivity</code> appears as decorator for that.<br>\nYou should define a <code>MyActivity</code> interface that is the base class for both decorated and decorator objects.   </p>\n\n<p>So things are not simple because you will have to refactor many code lines but it will make your design more flexible and with classes that have consistent responsibilities instead of having a god object as activity !</p>\n\n<p>Finally in the splash screen you could define a method that returns an activity  decorating the <code>HomeActivity</code> according to the client material detected :</p>\n\n<pre><code>public MyActivity computeHomeActivity(){\n\n    HomeActivity activity = new HomeActivity();\n\n    if (isSupportARCore()){\n       return new ARBaseACtivity(activity);\n    }\n    return new NonARBaseActivity(activity);\n\n}\n</code></pre>\n"}],"owner":{"account_id":7942638,"reputation":3623,"user_id":5996106,"accept_rate":57,"display_name":"karanatwal.github.io"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":476,"favorite_count":0,"down_vote_count":1,"up_vote_count":2,"answer_count":2,"score":1,"last_activity_date":1694958416,"creation_date":1531903262,"question_id":51397358,"body_markdown":"In an Android app. I have a requirement where I have my `HomeActivity` (having 18000 lines of code) and if my device supports `ARCore`, I want `HomeActivity` to extend with `ARBaseACtivity` and if device doesn&#39;t supports `ARCore` then I need it to extend with `NonARBaseActivity`.  \r\n\r\nI am checking this condition in splash screen.\r\n\r\nNow, there is a way that first comes is that I make two activities, same a copy of `HomeActivity` but I need to know is there any better way to do that. Because I don&#39;t want to copy every time I do any change in one of the `HomeActivity`. \r\n","title":"If condition in extending a class","body":"<p>In an Android app. I have a requirement where I have my <code>HomeActivity</code> (having 18000 lines of code) and if my device supports <code>ARCore</code>, I want <code>HomeActivity</code> to extend with <code>ARBaseACtivity</code> and if device doesn't supports <code>ARCore</code> then I need it to extend with <code>NonARBaseActivity</code>.</p>\n<p>I am checking this condition in splash screen.</p>\n<p>Now, there is a way that first comes is that I make two activities, same a copy of <code>HomeActivity</code> but I need to know is there any better way to do that. Because I don't want to copy every time I do any change in one of the <code>HomeActivity</code>.</p>\n"},{"tags":["java","list","iterator","listiterator"],"answers":[{"tags":[],"owner":{"account_id":3932565,"reputation":11,"user_id":3250432,"display_name":"Jake"},"down_vote_count":2,"up_vote_count":0,"is_accepted":false,"score":-2,"last_activity_date":1394235967,"creation_date":1394235967,"answer_id":22262886,"question_id":22262832,"body_markdown":"I think this might be the code you&#39;re looking for:\r\n\r\n    for (int i = litr.size(); i &gt;= 0; i--) {\r\n        System.out.println(litr.get(i));\r\n    }\r\n\r\nBasically it starts at the end of the array and prints the results from last to first. \r\n\r\nThis is what&#39;s starting at the END of the ArrayList:\r\n\r\n    i = litr.size();\r\n\r\ni-- counts backwards through the array until it reaches 0.","title":"How to make a list iterator that starts at the end of the list","body":"<p>I think this might be the code you're looking for:</p>\n\n<pre><code>for (int i = litr.size(); i &gt;= 0; i--) {\n    System.out.println(litr.get(i));\n}\n</code></pre>\n\n<p>Basically it starts at the end of the array and prints the results from last to first. </p>\n\n<p>This is what's starting at the END of the ArrayList:</p>\n\n<pre><code>i = litr.size();\n</code></pre>\n\n<p>i-- counts backwards through the array until it reaches 0.</p>\n"},{"tags":[],"owner":{"account_id":4135775,"reputation":1929,"user_id":3392484,"display_name":"user3392484"},"down_vote_count":0,"up_vote_count":8,"is_accepted":false,"score":8,"last_activity_date":1394236336,"creation_date":1394236180,"answer_id":22262918,"question_id":22262832,"body_markdown":"Read the java.util.List API documentation...\r\n\r\n    ListIterator&lt;Integer&gt; litr = list.listIterator(list.size());","title":"How to make a list iterator that starts at the end of the list","body":"<p>Read the java.util.List API documentation...</p>\n\n<pre><code>ListIterator&lt;Integer&gt; litr = list.listIterator(list.size());\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1957366,"reputation":1175,"user_id":1760058,"accept_rate":46,"display_name":"egelev"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1394236336,"creation_date":1394236336,"answer_id":22262944,"question_id":22262832,"body_markdown":"Aactually a [ A ListIterator has no current element; its cursor position always lies between the element that would be returned by a call to previous() and the element that would be returned by a call to next(). ][1]\r\n\r\nIf you want the first call to next()/previous() to return the last element you could use [listIterator(int index)][2] and pass it list.size() -1 if you want to iterate forward or list.size() if you want to iterate backward.\r\n\r\n\r\n  [1]: http://docs.oracle.com/javase/7/docs/api/java/util/ListIterator.html\r\n  [2]: http://docs.oracle.com/javase/7/docs/api/java/util/List.html#listIterator%28int%29","title":"How to make a list iterator that starts at the end of the list","body":"<p>Aactually a <a href=\"http://docs.oracle.com/javase/7/docs/api/java/util/ListIterator.html\" rel=\"nofollow\"> A ListIterator has no current element; its cursor position always lies between the element that would be returned by a call to previous() and the element that would be returned by a call to next(). </a></p>\n\n<p>If you want the first call to next()/previous() to return the last element you could use <a href=\"http://docs.oracle.com/javase/7/docs/api/java/util/List.html#listIterator%28int%29\" rel=\"nofollow\">listIterator(int index)</a> and pass it list.size() -1 if you want to iterate forward or list.size() if you want to iterate backward.</p>\n"},{"tags":[],"owner":{"account_id":22947689,"reputation":1,"user_id":17079436,"display_name":"JaYanTh"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1694957646,"creation_date":1694957554,"answer_id":77122024,"question_id":22262832,"body_markdown":"    public class LinkedListTester7\r\n    {\r\n        public static void main(String [] args)\r\n        {\r\n            LinkedList&lt;Integer&gt; list = new LinkedList&lt;Integer&gt;();\r\n            for (int i = 0 ; i &lt; 100 ; i = i + 2)\r\n                list.add(i) ;\r\n            //-----------Start below here. To do: approximate lines of code = 3\r\n            // 1. make a list iterator that starts at the end of the list ;\r\n            ListIterator&lt;Integer&gt; litr = list.listIterator(list.size());\r\n            while (litr.hasPrevious()) {\r\n                System.out.println(litr.previous()+ &quot; &quot;);\r\n            }\r\n            System.out.println() ;\r\n        }\r\n    }","title":"How to make a list iterator that starts at the end of the list","body":"<pre><code>public class LinkedListTester7\n{\n    public static void main(String [] args)\n    {\n        LinkedList&lt;Integer&gt; list = new LinkedList&lt;Integer&gt;();\n        for (int i = 0 ; i &lt; 100 ; i = i + 2)\n            list.add(i) ;\n        //-----------Start below here. To do: approximate lines of code = 3\n        // 1. make a list iterator that starts at the end of the list ;\n        ListIterator&lt;Integer&gt; litr = list.listIterator(list.size());\n        while (litr.hasPrevious()) {\n            System.out.println(litr.previous()+ &quot; &quot;);\n        }\n        System.out.println() ;\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":4105767,"reputation":117,"user_id":3369850,"accept_rate":20,"display_name":"user3369850"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":7586,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":4,"score":2,"last_activity_date":1694957646,"creation_date":1394235646,"question_id":22262832,"body_markdown":"I have a homework question that asks me to make a list iterator that starts at the end of the list. I have no idea how to do this. Here is the code\r\n\r\n    public class LinkedListTester7\r\n    {\r\n        public static void main(String [] args)\r\n        {\r\n            LinkedList&lt;Integer&gt; list = new LinkedList&lt;Integer&gt;();\r\n            for (int i = 0 ; i &lt; 100 ; i = i + 2)\r\n                list.add(i) ;\r\n            //-----------Start below here. To do: approximate lines of code = 3\r\n            // 1. make a list iterator that starts at the end of the list ;\r\n            ListIterator&lt;Integer&gt; litr = list.listIterator();\r\n            //2.  while hasPrevious ;\r\n            while (litr.hasPrevious()) {\r\n                //3. print what is returned by previous() followed by a blank without a newline  \r\n                System.out.println(litr.previous()+ &quot; &quot;);\r\n            }\r\n            //-----------------End here. Please do not remove this comment.     Reminder: no changes outside the todo regions.\r\n            System.out.println() ;\r\n        }\r\n    }\r\n","title":"How to make a list iterator that starts at the end of the list","body":"<p>I have a homework question that asks me to make a list iterator that starts at the end of the list. I have no idea how to do this. Here is the code</p>\n\n<pre><code>public class LinkedListTester7\n{\n    public static void main(String [] args)\n    {\n        LinkedList&lt;Integer&gt; list = new LinkedList&lt;Integer&gt;();\n        for (int i = 0 ; i &lt; 100 ; i = i + 2)\n            list.add(i) ;\n        //-----------Start below here. To do: approximate lines of code = 3\n        // 1. make a list iterator that starts at the end of the list ;\n        ListIterator&lt;Integer&gt; litr = list.listIterator();\n        //2.  while hasPrevious ;\n        while (litr.hasPrevious()) {\n            //3. print what is returned by previous() followed by a blank without a newline  \n            System.out.println(litr.previous()+ \" \");\n        }\n        //-----------------End here. Please do not remove this comment.     Reminder: no changes outside the todo regions.\n        System.out.println() ;\n    }\n}\n</code></pre>\n"},{"tags":["java","spring-boot","docker","gradle","docker-compose"],"comments":[{"owner":{"account_id":13863020,"reputation":137023,"user_id":10008173,"display_name":"David Maze"},"score":0,"creation_date":1694948117,"post_id":77118812,"comment_id":135956054,"body_markdown":"How does building your application jar file require a database?  Can you fix that?  The Dockerfile can never call another container.","body":"How does building your application jar file require a database?  Can you fix that?  The Dockerfile can never call another container."}],"answers":[{"tags":[],"owner":{"account_id":2767223,"reputation":21433,"user_id":2382650,"accept_rate":92,"display_name":"Cisco"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1694957592,"creation_date":1694957592,"answer_id":77122029,"question_id":77118812,"body_markdown":"As of Spring Boot 3.1, Docker Compose is supported. Spring Boot will start the container for you and also inject any necessary credentials or connection details into the Spring `Environment` which allows other libraries such as Spring Data to create its beans.\r\n\r\nhttps://docs.spring.io/spring-boot/docs/current/reference/html/features.html#features.docker-compose\r\n\r\nSpring Boot&#39;s Docker Compose support can also be used in tests.","title":"Docker-compose with Gradle, Spring Boot and PostgreSQL: How to properly handle build and startup sequence?","body":"<p>As of Spring Boot 3.1, Docker Compose is supported. Spring Boot will start the container for you and also inject any necessary credentials or connection details into the Spring <code>Environment</code> which allows other libraries such as Spring Data to create its beans.</p>\n<p><a href=\"https://docs.spring.io/spring-boot/docs/current/reference/html/features.html#features.docker-compose\" rel=\"nofollow noreferrer\">https://docs.spring.io/spring-boot/docs/current/reference/html/features.html#features.docker-compose</a></p>\n<p>Spring Boot's Docker Compose support can also be used in tests.</p>\n"}],"owner":{"account_id":15582606,"reputation":319,"user_id":11241975,"display_name":"Dima"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":136,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":1,"score":-1,"last_activity_date":1694957592,"creation_date":1694884700,"question_id":77118812,"body_markdown":"I&#39;m working on a Spring Boot pet-project with PostgreSQL as the database, and I&#39;m using Docker Compose to orchestrate the containers. The issue I&#39;m facing is that the `RUN ./gradlew build` command in my Dockerfile is getting executed before the PostgreSQL container is fully up and running, causing my tests to fail during the build process.\r\n\r\nDockerfile:\r\n```\r\n# Build stage\r\nFROM amazoncorretto:17 AS build\r\nWORKDIR /app\r\nCOPY ../ /app\r\nRUN ./gradlew build\r\n\r\n# Runtime stage\r\nFROM amazoncorretto:17 AS runtime\r\nWORKDIR /app\r\nCOPY --from=build /app/build/libs/*.jar /app/app.jar\r\nCMD [&quot;java&quot;, &quot;-jar&quot;, &quot;/app/app.jar&quot;]\r\n```\r\n\r\ndocker-compose.yaml:\r\n```\r\nversion: &#39;3.8&#39;\r\n\r\nservices:\r\n  postgres:\r\n    image: &#39;postgres:latest&#39;\r\n    environment:\r\n      POSTGRES_DB: ${POSTGRES_DB}\r\n      POSTGRES_USER: ${POSTGRES_USER}\r\n      POSTGRES_PASSWORD: ${POSTGRES_PASSWORD}\r\n    ports:\r\n      - &#39;5432:5432&#39;\r\n    healthcheck:\r\n      test: pg_isready -U ${POSTGRES_USER} -d ${POSTGRES_DB}\r\n      interval: 10s\r\n      timeout: 5s\r\n      retries: 5\r\n\r\n  app:\r\n    build:\r\n      context: .\r\n      dockerfile: docker/Dockerfile\r\n    depends_on:\r\n      postgres:\r\n        condition: service_healthy\r\n    environment:\r\n      SPRING_DATASOURCE_URL: jdbc:postgresql://postgres:5432/${POSTGRES_DB}\r\n      SPRING_DATASOURCE_USERNAME: ${POSTGRES_USER}\r\n      SPRING_DATASOURCE_PASSWORD: ${POSTGRES_PASSWORD}\r\n    ports:\r\n      - &#39;8080:8080&#39;\r\n```\r\n\r\n\r\nI&#39;ve tried using `depends_on` and `healthcheck` in `docker-compose.yaml`, but the issue remains.\r\n\r\nSo, my questions are:\r\n1. What is the best way to ensure that the PostgreSQL container is fully ready before running the `./gradlew build` command?\r\n2. Is there a more &quot;Docker-native&quot; or &quot;Spring-native&quot; way to handle this dependency during the build process?","title":"Docker-compose with Gradle, Spring Boot and PostgreSQL: How to properly handle build and startup sequence?","body":"<p>I'm working on a Spring Boot pet-project with PostgreSQL as the database, and I'm using Docker Compose to orchestrate the containers. The issue I'm facing is that the <code>RUN ./gradlew build</code> command in my Dockerfile is getting executed before the PostgreSQL container is fully up and running, causing my tests to fail during the build process.</p>\n<p>Dockerfile:</p>\n<pre><code># Build stage\nFROM amazoncorretto:17 AS build\nWORKDIR /app\nCOPY ../ /app\nRUN ./gradlew build\n\n# Runtime stage\nFROM amazoncorretto:17 AS runtime\nWORKDIR /app\nCOPY --from=build /app/build/libs/*.jar /app/app.jar\nCMD [&quot;java&quot;, &quot;-jar&quot;, &quot;/app/app.jar&quot;]\n</code></pre>\n<p>docker-compose.yaml:</p>\n<pre><code>version: '3.8'\n\nservices:\n  postgres:\n    image: 'postgres:latest'\n    environment:\n      POSTGRES_DB: ${POSTGRES_DB}\n      POSTGRES_USER: ${POSTGRES_USER}\n      POSTGRES_PASSWORD: ${POSTGRES_PASSWORD}\n    ports:\n      - '5432:5432'\n    healthcheck:\n      test: pg_isready -U ${POSTGRES_USER} -d ${POSTGRES_DB}\n      interval: 10s\n      timeout: 5s\n      retries: 5\n\n  app:\n    build:\n      context: .\n      dockerfile: docker/Dockerfile\n    depends_on:\n      postgres:\n        condition: service_healthy\n    environment:\n      SPRING_DATASOURCE_URL: jdbc:postgresql://postgres:5432/${POSTGRES_DB}\n      SPRING_DATASOURCE_USERNAME: ${POSTGRES_USER}\n      SPRING_DATASOURCE_PASSWORD: ${POSTGRES_PASSWORD}\n    ports:\n      - '8080:8080'\n</code></pre>\n<p>I've tried using <code>depends_on</code> and <code>healthcheck</code> in <code>docker-compose.yaml</code>, but the issue remains.</p>\n<p>So, my questions are:</p>\n<ol>\n<li>What is the best way to ensure that the PostgreSQL container is fully ready before running the <code>./gradlew build</code> command?</li>\n<li>Is there a more &quot;Docker-native&quot; or &quot;Spring-native&quot; way to handle this dependency during the build process?</li>\n</ol>\n"},{"tags":["java","logging","junit","assert"],"answers":[{"tags":[],"owner":{"account_id":30285,"reputation":55210,"user_id":82511,"accept_rate":71,"display_name":"djna"},"down_vote_count":6,"up_vote_count":26,"is_accepted":false,"score":20,"last_activity_date":1511031182,"creation_date":1259688824,"answer_id":1827718,"question_id":1827677,"body_markdown":"Effectively you are testing a side-effect of a dependent class. For unit testing you need only to verify that \r\n\r\n&gt; `logger.info()`\r\n\r\n was called with the correct parameter. Hence use a mocking framework to emulate logger and that will allow you to test your own class&#39;s behaviour. ","title":"How to do a JUnit assert on a message in a logger","body":"<p>Effectively you are testing a side-effect of a dependent class. For unit testing you need only to verify that </p>\n\n<blockquote>\n  <p><code>logger.info()</code></p>\n</blockquote>\n\n<p>was called with the correct parameter. Hence use a mocking framework to emulate logger and that will allow you to test your own class's behaviour. </p>\n"},{"tags":[],"owner":{"account_id":70258,"reputation":590444,"user_id":203907,"accept_rate":81,"display_name":"Bozho"},"down_vote_count":1,"up_vote_count":12,"is_accepted":false,"score":11,"last_activity_date":1259690287,"creation_date":1259690287,"answer_id":1827823,"question_id":1827677,"body_markdown":"Mocking is an option here, although it would be hard, because loggers are generally private static final - so setting a mock logger wouldn&#39;t be a piece of cake, or would require modification of the class under test.\r\n\r\nYou can create a custom Appender (or whatever it&#39;s called), and register it - either via a test-only configuration file, or runtime (in a way, dependent on the logging framework).\r\nAnd then you can get that appender (either statically, if declared in configuration file, or by its current reference, if you are plugging it runtime), and verify its contents.","title":"How to do a JUnit assert on a message in a logger","body":"<p>Mocking is an option here, although it would be hard, because loggers are generally private static final - so setting a mock logger wouldn't be a piece of cake, or would require modification of the class under test.</p>\n\n<p>You can create a custom Appender (or whatever it's called), and register it - either via a test-only configuration file, or runtime (in a way, dependent on the logging framework).\nAnd then you can get that appender (either statically, if declared in configuration file, or by its current reference, if you are plugging it runtime), and verify its contents.</p>\n"},{"tags":[],"owner":{"account_id":70734,"reputation":14669,"user_id":204845,"accept_rate":68,"display_name":"Arne Deutsch"},"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1470669107,"creation_date":1259694286,"answer_id":1828186,"question_id":1827677,"body_markdown":"As mentioned from the others you could use a mocking framework. For this to make work you have to expose the logger in your class (although I would propably prefere to make it package private instead of creating a public setter).\r\n\r\nThe other solution is to create a fake logger by hand. You have to write the fake logger (more fixture code) but in this case I would prefer the enhanced readability of the tests against the saved code from the mocking framework.\r\n\r\nI would do something like this:\r\n\r\n    class FakeLogger implements ILogger {\r\n        public List&lt;String&gt; infos = new ArrayList&lt;String&gt;();\r\n        public List&lt;String&gt; errors = new ArrayList&lt;String&gt;();\r\n\r\n        public void info(String message) {\r\n            infos.add(message);\r\n        }\r\n    \r\n        public void error(String message) {\r\n            errors.add(message);\r\n        }\r\n    }\r\n\r\n    class TestMyClass {\r\n        private MyClass myClass;        \r\n        private FakeLogger logger;        \r\n\r\n        @Before\r\n        public void setUp() throws Exception {\r\n            myClass = new MyClass();\r\n            logger = new FakeLogger();\r\n            myClass.logger = logger;\r\n        }\r\n\r\n        @Test\r\n        public void testMyMethod() {\r\n            myClass.myMethod(true);\r\n\r\n            assertEquals(1, logger.infos.size());\r\n        }\r\n    }","title":"How to do a JUnit assert on a message in a logger","body":"<p>As mentioned from the others you could use a mocking framework. For this to make work you have to expose the logger in your class (although I would propably prefere to make it package private instead of creating a public setter).</p>\n\n<p>The other solution is to create a fake logger by hand. You have to write the fake logger (more fixture code) but in this case I would prefer the enhanced readability of the tests against the saved code from the mocking framework.</p>\n\n<p>I would do something like this:</p>\n\n<pre><code>class FakeLogger implements ILogger {\n    public List&lt;String&gt; infos = new ArrayList&lt;String&gt;();\n    public List&lt;String&gt; errors = new ArrayList&lt;String&gt;();\n\n    public void info(String message) {\n        infos.add(message);\n    }\n\n    public void error(String message) {\n        errors.add(message);\n    }\n}\n\nclass TestMyClass {\n    private MyClass myClass;        \n    private FakeLogger logger;        \n\n    @Before\n    public void setUp() throws Exception {\n        myClass = new MyClass();\n        logger = new FakeLogger();\n        myClass.logger = logger;\n    }\n\n    @Test\n    public void testMyMethod() {\n        myClass.myMethod(true);\n\n        assertEquals(1, logger.infos.size());\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":20661,"reputation":4084,"user_id":49604,"display_name":"Ronald Blaschke"},"down_vote_count":3,"up_vote_count":176,"is_accepted":false,"score":173,"last_activity_date":1259695240,"creation_date":1259695240,"answer_id":1828268,"question_id":1827677,"body_markdown":"I&#39;ve needed this several times as well.  I&#39;ve put together a small sample below, which you&#39;d want to adjust to your needs.  Basically, you create your own `Appender` and add it to the logger you want.  If you&#39;d want to collect everything, the root logger is a good place to start, but you can use a more specific if you&#39;d like.  Don&#39;t forget to remove the Appender when you&#39;re done, otherwise you might create a memory leak.  Below I&#39;ve done it within the test, but `setUp` or `@Before` and `tearDown` or `@After` might be better places, depending on your needs.\r\n\r\nAlso, the implementation below collects everything in a `List` in memory.  If you&#39;re logging a lot you might consider adding a filter to drop boring entries, or to write the log to a temporary file on disk (Hint: `LoggingEvent` is `Serializable`, so you should be able to just serialize the event objects, if your log message is.)\r\n\r\n    import org.apache.log4j.AppenderSkeleton;\r\n    import org.apache.log4j.Level;\r\n    import org.apache.log4j.Logger;\r\n    import org.apache.log4j.spi.LoggingEvent;\r\n    import org.junit.Test;\r\n    \r\n    import java.util.ArrayList;\r\n    import java.util.List;\r\n    \r\n    import static org.hamcrest.CoreMatchers.is;\r\n    import static org.junit.Assert.assertThat;\r\n    \r\n    public class MyTest {\r\n        @Test\r\n        public void test() {\r\n            final TestAppender appender = new TestAppender();\r\n            final Logger logger = Logger.getRootLogger();\r\n            logger.addAppender(appender);\r\n            try {\r\n                Logger.getLogger(MyTest.class).info(&quot;Test&quot;);\r\n            }\r\n            finally {\r\n                logger.removeAppender(appender);\r\n            }\r\n    \r\n            final List&lt;LoggingEvent&gt; log = appender.getLog();\r\n            final LoggingEvent firstLogEntry = log.get(0);\r\n            assertThat(firstLogEntry.getLevel(), is(Level.INFO));\r\n            assertThat((String) firstLogEntry.getMessage(), is(&quot;Test&quot;));\r\n            assertThat(firstLogEntry.getLoggerName(), is(&quot;MyTest&quot;));\r\n        }\r\n    }\r\n    \r\n    class TestAppender extends AppenderSkeleton {\r\n        private final List&lt;LoggingEvent&gt; log = new ArrayList&lt;LoggingEvent&gt;();\r\n    \r\n        @Override\r\n        public boolean requiresLayout() {\r\n            return false;\r\n        }\r\n    \r\n        @Override\r\n        protected void append(final LoggingEvent loggingEvent) {\r\n            log.add(loggingEvent);\r\n        }\r\n    \r\n        @Override\r\n        public void close() {\r\n        }\r\n    \r\n        public List&lt;LoggingEvent&gt; getLog() {\r\n            return new ArrayList&lt;LoggingEvent&gt;(log);\r\n        }\r\n    }\r\n","title":"How to do a JUnit assert on a message in a logger","body":"<p>I've needed this several times as well.  I've put together a small sample below, which you'd want to adjust to your needs.  Basically, you create your own <code>Appender</code> and add it to the logger you want.  If you'd want to collect everything, the root logger is a good place to start, but you can use a more specific if you'd like.  Don't forget to remove the Appender when you're done, otherwise you might create a memory leak.  Below I've done it within the test, but <code>setUp</code> or <code>@Before</code> and <code>tearDown</code> or <code>@After</code> might be better places, depending on your needs.</p>\n\n<p>Also, the implementation below collects everything in a <code>List</code> in memory.  If you're logging a lot you might consider adding a filter to drop boring entries, or to write the log to a temporary file on disk (Hint: <code>LoggingEvent</code> is <code>Serializable</code>, so you should be able to just serialize the event objects, if your log message is.)</p>\n\n<pre><code>import org.apache.log4j.AppenderSkeleton;\nimport org.apache.log4j.Level;\nimport org.apache.log4j.Logger;\nimport org.apache.log4j.spi.LoggingEvent;\nimport org.junit.Test;\n\nimport java.util.ArrayList;\nimport java.util.List;\n\nimport static org.hamcrest.CoreMatchers.is;\nimport static org.junit.Assert.assertThat;\n\npublic class MyTest {\n    @Test\n    public void test() {\n        final TestAppender appender = new TestAppender();\n        final Logger logger = Logger.getRootLogger();\n        logger.addAppender(appender);\n        try {\n            Logger.getLogger(MyTest.class).info(\"Test\");\n        }\n        finally {\n            logger.removeAppender(appender);\n        }\n\n        final List&lt;LoggingEvent&gt; log = appender.getLog();\n        final LoggingEvent firstLogEntry = log.get(0);\n        assertThat(firstLogEntry.getLevel(), is(Level.INFO));\n        assertThat((String) firstLogEntry.getMessage(), is(\"Test\"));\n        assertThat(firstLogEntry.getLoggerName(), is(\"MyTest\"));\n    }\n}\n\nclass TestAppender extends AppenderSkeleton {\n    private final List&lt;LoggingEvent&gt; log = new ArrayList&lt;LoggingEvent&gt;();\n\n    @Override\n    public boolean requiresLayout() {\n        return false;\n    }\n\n    @Override\n    protected void append(final LoggingEvent loggingEvent) {\n        log.add(loggingEvent);\n    }\n\n    @Override\n    public void close() {\n    }\n\n    public List&lt;LoggingEvent&gt; getLog() {\n        return new ArrayList&lt;LoggingEvent&gt;(log);\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":77676,"reputation":3587,"user_id":221538,"display_name":"Jon"},"down_vote_count":2,"up_vote_count":49,"is_accepted":true,"score":47,"last_activity_date":1259777691,"creation_date":1259777691,"answer_id":1834789,"question_id":1827677,"body_markdown":"Thanks a lot for these (surprisingly) quick and helpful answers; they put me on the right way for my solution.\r\n\r\nThe codebase were I want to use this, uses java.util.logging as its logger mechanism, and I don&#39;t feel at home enough in those codes to completely change that to log4j or to logger interfaces/facades.  But based on these suggestions, I &#39;hacked-up&#39; a j.u.l.handler extension and that works as a treat.\r\n\r\nA short summary follows. Extend &lt;code&gt;java.util.logging.Handler&lt;/code&gt;:\r\n\r\n    class LogHandler extends Handler\r\n    {\r\n        Level lastLevel = Level.FINEST;\r\n\r\n        public Level  checkLevel() {\r\n            return lastLevel;\r\n        }    \r\n\r\n        public void publish(LogRecord record) {\r\n            lastLevel = record.getLevel();\r\n        }\r\n\r\n        public void close(){}\r\n        public void flush(){}\r\n    }\r\n\r\nObviously, you can store as much as you like/want/need from the &lt;code&gt;LogRecord&lt;/code&gt;, or push them all into a stack until you get an overflow.\r\n\r\nIn the preparation for the junit-test, you create a &lt;code&gt;java.util.logging.Logger&lt;/code&gt; and add such a new &lt;code&gt;LogHandler&lt;/code&gt; to it:\r\n\r\n    @Test tester() {\r\n        Logger logger = Logger.getLogger(&quot;my junit-test logger&quot;);\r\n        LogHandler handler = new LogHandler();\r\n        handler.setLevel(Level.ALL);\r\n        logger.setUseParentHandlers(false);\r\n        logger.addHandler(handler);\r\n        logger.setLevel(Level.ALL);\r\n\r\nThe call to &lt;code&gt;setUseParentHandlers()&lt;/code&gt; is to silence the normal handlers, so that (for this junit-test run) no unnecessary logging happens.  Do whatever your code-under-test needs to use this logger, run the test and assertEquality:\r\n\r\n        libraryUnderTest.setLogger(logger);\r\n        methodUnderTest(true);  // see original question.\r\n        assertEquals(&quot;Log level as expected?&quot;, Level.INFO, handler.checkLevel() );\r\n    }\r\n\r\n(Of course, you would move large part of this work into a &lt;code&gt;@Before&lt;/code&gt; method and make assorted other improvements, but that would clutter this presentation.)","title":"How to do a JUnit assert on a message in a logger","body":"<p>Thanks a lot for these (surprisingly) quick and helpful answers; they put me on the right way for my solution.</p>\n\n<p>The codebase were I want to use this, uses java.util.logging as its logger mechanism, and I don't feel at home enough in those codes to completely change that to log4j or to logger interfaces/facades.  But based on these suggestions, I 'hacked-up' a j.u.l.handler extension and that works as a treat.</p>\n\n<p>A short summary follows. Extend <code>java.util.logging.Handler</code>:</p>\n\n<pre><code>class LogHandler extends Handler\n{\n    Level lastLevel = Level.FINEST;\n\n    public Level  checkLevel() {\n        return lastLevel;\n    }    \n\n    public void publish(LogRecord record) {\n        lastLevel = record.getLevel();\n    }\n\n    public void close(){}\n    public void flush(){}\n}\n</code></pre>\n\n<p>Obviously, you can store as much as you like/want/need from the <code>LogRecord</code>, or push them all into a stack until you get an overflow.</p>\n\n<p>In the preparation for the junit-test, you create a <code>java.util.logging.Logger</code> and add such a new <code>LogHandler</code> to it:</p>\n\n<pre><code>@Test tester() {\n    Logger logger = Logger.getLogger(\"my junit-test logger\");\n    LogHandler handler = new LogHandler();\n    handler.setLevel(Level.ALL);\n    logger.setUseParentHandlers(false);\n    logger.addHandler(handler);\n    logger.setLevel(Level.ALL);\n</code></pre>\n\n<p>The call to <code>setUseParentHandlers()</code> is to silence the normal handlers, so that (for this junit-test run) no unnecessary logging happens.  Do whatever your code-under-test needs to use this logger, run the test and assertEquality:</p>\n\n<pre><code>    libraryUnderTest.setLogger(logger);\n    methodUnderTest(true);  // see original question.\n    assertEquals(\"Log level as expected?\", Level.INFO, handler.checkLevel() );\n}\n</code></pre>\n\n<p>(Of course, you would move large part of this work into a <code>@Before</code> method and make assorted other improvements, but that would clutter this presentation.)</p>\n"},{"tags":[],"owner":{"account_id":279716,"reputation":1176,"user_id":575027,"accept_rate":71,"display_name":"kfox"},"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1364967555,"creation_date":1364967555,"answer_id":15779648,"question_id":1827677,"body_markdown":"Here is what i did for logback.\r\n\r\nI created a TestAppender class:\r\n\r\n    public class TestAppender extends AppenderBase&lt;ILoggingEvent&gt; {\r\n\r\n        private Stack&lt;ILoggingEvent&gt; events = new Stack&lt;ILoggingEvent&gt;();\r\n    \r\n        @Override\r\n        protected void append(ILoggingEvent event) {\r\n            events.add(event);\r\n        }\r\n    \r\n        public void clear() {\r\n            events.clear();\r\n        }\r\n    \r\n        public ILoggingEvent getLastEvent() {\r\n            return events.pop();\r\n        }\r\n    }\r\n\r\nThen in the parent of my testng unit test class I created a method:\r\n\r\n    protected TestAppender testAppender;\r\n\r\n    @BeforeClass\r\n    public void setupLogsForTesting() {\r\n        Logger root = (Logger)LoggerFactory.getLogger(Logger.ROOT_LOGGER_NAME);\r\n        testAppender = (TestAppender)root.getAppender(&quot;TEST&quot;);\r\n        if (testAppender != null) {\r\n            testAppender.clear();\r\n        }\r\n    }\r\n\r\nI have a logback-test.xml file defined in src/test/resources and I added a test appender:\r\n\r\n    &lt;appender name=&quot;TEST&quot; class=&quot;com.intuit.icn.TestAppender&quot;&gt;\r\n        &lt;encoder&gt;\r\n            &lt;pattern&gt;%m%n&lt;/pattern&gt;\r\n        &lt;/encoder&gt;\r\n    &lt;/appender&gt;\r\n\r\nand added this appender to the root appender:\r\n\r\n    &lt;root&gt;\r\n        &lt;level value=&quot;error&quot; /&gt;\r\n        &lt;appender-ref ref=&quot;STDOUT&quot; /&gt;\r\n        &lt;appender-ref ref=&quot;TEST&quot; /&gt;\r\n    &lt;/root&gt;\r\n\r\nNow in my test classes that extend from my parent test class I can get the appender and get the last message logged and verify the message, the level, the throwable.\r\n\r\n    ILoggingEvent lastEvent = testAppender.getLastEvent();\r\n    assertEquals(lastEvent.getMessage(), &quot;...&quot;);\r\n    assertEquals(lastEvent.getLevel(), Level.WARN);\r\n    assertEquals(lastEvent.getThrowableProxy().getMessage(), &quot;...&quot;);\r\n\r\n","title":"How to do a JUnit assert on a message in a logger","body":"<p>Here is what i did for logback.</p>\n\n<p>I created a TestAppender class:</p>\n\n<pre><code>public class TestAppender extends AppenderBase&lt;ILoggingEvent&gt; {\n\n    private Stack&lt;ILoggingEvent&gt; events = new Stack&lt;ILoggingEvent&gt;();\n\n    @Override\n    protected void append(ILoggingEvent event) {\n        events.add(event);\n    }\n\n    public void clear() {\n        events.clear();\n    }\n\n    public ILoggingEvent getLastEvent() {\n        return events.pop();\n    }\n}\n</code></pre>\n\n<p>Then in the parent of my testng unit test class I created a method:</p>\n\n<pre><code>protected TestAppender testAppender;\n\n@BeforeClass\npublic void setupLogsForTesting() {\n    Logger root = (Logger)LoggerFactory.getLogger(Logger.ROOT_LOGGER_NAME);\n    testAppender = (TestAppender)root.getAppender(\"TEST\");\n    if (testAppender != null) {\n        testAppender.clear();\n    }\n}\n</code></pre>\n\n<p>I have a logback-test.xml file defined in src/test/resources and I added a test appender:</p>\n\n<pre><code>&lt;appender name=\"TEST\" class=\"com.intuit.icn.TestAppender\"&gt;\n    &lt;encoder&gt;\n        &lt;pattern&gt;%m%n&lt;/pattern&gt;\n    &lt;/encoder&gt;\n&lt;/appender&gt;\n</code></pre>\n\n<p>and added this appender to the root appender:</p>\n\n<pre><code>&lt;root&gt;\n    &lt;level value=\"error\" /&gt;\n    &lt;appender-ref ref=\"STDOUT\" /&gt;\n    &lt;appender-ref ref=\"TEST\" /&gt;\n&lt;/root&gt;\n</code></pre>\n\n<p>Now in my test classes that extend from my parent test class I can get the appender and get the last message logged and verify the message, the level, the throwable.</p>\n\n<pre><code>ILoggingEvent lastEvent = testAppender.getLastEvent();\nassertEquals(lastEvent.getMessage(), \"...\");\nassertEquals(lastEvent.getLevel(), Level.WARN);\nassertEquals(lastEvent.getThrowableProxy().getMessage(), \"...\");\n</code></pre>\n"},{"tags":[],"owner":{"account_id":314537,"reputation":1467,"user_id":629762,"accept_rate":80,"display_name":"Marcin"},"down_vote_count":2,"up_vote_count":20,"is_accepted":false,"score":18,"last_activity_date":1424722489,"creation_date":1424722489,"answer_id":28682591,"question_id":1827677,"body_markdown":"Another option is to mock Appender and verify if message was logged to this appender. Example for Log4j 1.2.x and mockito:\r\n\r\n    import static org.junit.Assert.assertEquals;\r\n    import static org.mockito.Mockito.mock;\r\n    import static org.mockito.Mockito.verify;\r\n    \r\n    import org.apache.log4j.Appender;\r\n    import org.apache.log4j.Level;\r\n    import org.apache.log4j.Logger;\r\n    import org.apache.log4j.spi.LoggingEvent;\r\n    import org.junit.After;\r\n    import org.junit.Before;\r\n    import org.junit.Test;\r\n    import org.mockito.ArgumentCaptor;\r\n    \r\n    public class MyTest {\r\n    \r\n        private final Appender appender = mock(Appender.class);\r\n        private final Logger logger = Logger.getRootLogger();\r\n    \r\n        @Before\r\n        public void setup() {\r\n            logger.addAppender(appender);\r\n        }\r\n    \r\n        @Test\r\n        public void test() {\r\n            // when\r\n            Logger.getLogger(MyTest.class).info(&quot;Test&quot;);\r\n    \r\n            // then\r\n            ArgumentCaptor&lt;LoggingEvent&gt; argument = ArgumentCaptor.forClass(LoggingEvent.class);\r\n            verify(appender).doAppend(argument.capture());\r\n            assertEquals(Level.INFO, argument.getValue().getLevel());\r\n            assertEquals(&quot;Test&quot;, argument.getValue().getMessage());\r\n            assertEquals(&quot;MyTest&quot;, argument.getValue().getLoggerName());\r\n        }\r\n    \r\n        @After\r\n        public void cleanup() {\r\n            logger.removeAppender(appender);\r\n        }\r\n    }","title":"How to do a JUnit assert on a message in a logger","body":"<p>Another option is to mock Appender and verify if message was logged to this appender. Example for Log4j 1.2.x and mockito:</p>\n\n<pre><code>import static org.junit.Assert.assertEquals;\nimport static org.mockito.Mockito.mock;\nimport static org.mockito.Mockito.verify;\n\nimport org.apache.log4j.Appender;\nimport org.apache.log4j.Level;\nimport org.apache.log4j.Logger;\nimport org.apache.log4j.spi.LoggingEvent;\nimport org.junit.After;\nimport org.junit.Before;\nimport org.junit.Test;\nimport org.mockito.ArgumentCaptor;\n\npublic class MyTest {\n\n    private final Appender appender = mock(Appender.class);\n    private final Logger logger = Logger.getRootLogger();\n\n    @Before\n    public void setup() {\n        logger.addAppender(appender);\n    }\n\n    @Test\n    public void test() {\n        // when\n        Logger.getLogger(MyTest.class).info(\"Test\");\n\n        // then\n        ArgumentCaptor&lt;LoggingEvent&gt; argument = ArgumentCaptor.forClass(LoggingEvent.class);\n        verify(appender).doAppend(argument.capture());\n        assertEquals(Level.INFO, argument.getValue().getLevel());\n        assertEquals(\"Test\", argument.getValue().getMessage());\n        assertEquals(\"MyTest\", argument.getValue().getLoggerName());\n    }\n\n    @After\n    public void cleanup() {\n        logger.removeAppender(appender);\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1748498,"reputation":1914,"user_id":1598149,"accept_rate":50,"display_name":"GregD"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1438851909,"creation_date":1438850757,"answer_id":31850949,"question_id":1827677,"body_markdown":"Another idea worth mentioning, although it&#39;s an older topic, is creating a CDI producer to inject your logger so the mocking becomes easy. (And it also gives the advantage of not having to declare the &quot;whole logger statement&quot; anymore, but that&#39;s off-topic)\r\n\r\nExample:\r\n\r\nCreating the logger to inject: \r\n\r\n    public class CdiResources {\r\n\t  @Produces @LoggerType\r\n\t  public Logger createLogger(final InjectionPoint ip) {\r\n\t\t  return Logger.getLogger(ip.getMember().getDeclaringClass());\r\n\t  }\r\n    }\r\n\r\nThe qualifier:\r\n\r\n    @Qualifier\r\n    @Retention(RetentionPolicy.RUNTIME)\r\n    @Target({TYPE, METHOD, FIELD, PARAMETER})\r\n    public @interface LoggerType {\r\n    }\r\n\r\nUsing the logger in your production code:\r\n\r\n    public class ProductionCode {\r\n        @Inject\r\n        @LoggerType\r\n        private Logger logger;\r\n\r\n        public void logSomething() {\r\n            logger.info(&quot;something&quot;);\r\n        }\r\n    }\r\n\r\nTesting the logger in your test code (giving an easyMock example):\r\n\r\n\r\n    @TestSubject\r\n    private ProductionCode productionCode = new ProductionCode();\r\n\r\n    @Mock\r\n    private Logger logger;\r\n\r\n    @Test\r\n    public void testTheLogger() {\r\n       logger.info(&quot;something&quot;);\r\n       replayAll();\r\n       productionCode.logSomething();\r\n    }\r\n\r\n\r\n\r\n\r\n\r\n\r\n","title":"How to do a JUnit assert on a message in a logger","body":"<p>Another idea worth mentioning, although it's an older topic, is creating a CDI producer to inject your logger so the mocking becomes easy. (And it also gives the advantage of not having to declare the \"whole logger statement\" anymore, but that's off-topic)</p>\n\n<p>Example:</p>\n\n<p>Creating the logger to inject: </p>\n\n<pre><code>public class CdiResources {\n  @Produces @LoggerType\n  public Logger createLogger(final InjectionPoint ip) {\n      return Logger.getLogger(ip.getMember().getDeclaringClass());\n  }\n}\n</code></pre>\n\n<p>The qualifier:</p>\n\n<pre><code>@Qualifier\n@Retention(RetentionPolicy.RUNTIME)\n@Target({TYPE, METHOD, FIELD, PARAMETER})\npublic @interface LoggerType {\n}\n</code></pre>\n\n<p>Using the logger in your production code:</p>\n\n<pre><code>public class ProductionCode {\n    @Inject\n    @LoggerType\n    private Logger logger;\n\n    public void logSomething() {\n        logger.info(\"something\");\n    }\n}\n</code></pre>\n\n<p>Testing the logger in your test code (giving an easyMock example):</p>\n\n<pre><code>@TestSubject\nprivate ProductionCode productionCode = new ProductionCode();\n\n@Mock\nprivate Logger logger;\n\n@Test\npublic void testTheLogger() {\n   logger.info(\"something\");\n   replayAll();\n   productionCode.logSomething();\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":4859,"reputation":40443,"user_id":7512,"accept_rate":75,"display_name":"slim"},"down_vote_count":1,"up_vote_count":12,"is_accepted":false,"score":11,"last_activity_date":1448639236,"creation_date":1448639236,"answer_id":33960837,"question_id":1827677,"body_markdown":"Inspired by @RonaldBlaschke&#39;s solution, I came up with this:\r\n\r\n    public class Log4JTester extends ExternalResource {\r\n        TestAppender appender;\r\n        \r\n        @Override\r\n        protected void before() {\r\n            appender = new TestAppender();\r\n            final Logger rootLogger = Logger.getRootLogger();\r\n            rootLogger.addAppender(appender);\r\n        }\r\n\r\n        @Override\r\n        protected void after() {\r\n            final Logger rootLogger = Logger.getRootLogger();\r\n            rootLogger.removeAppender(appender);\r\n        }\r\n        \r\n        public void assertLogged(Matcher&lt;String&gt; matcher) {\r\n            for(LoggingEvent event : appender.events) {\r\n                if(matcher.matches(event.getMessage())) {\r\n                    return;\r\n                }\r\n            }\r\n            fail(&quot;No event matches &quot; + matcher);\r\n        }\r\n\r\n        private static class TestAppender extends AppenderSkeleton {\r\n\r\n            List&lt;LoggingEvent&gt; events = new ArrayList&lt;LoggingEvent&gt;();\r\n            \r\n            @Override\r\n            protected void append(LoggingEvent event) {\r\n                events.add(event);\r\n            }\r\n\r\n            @Override\r\n            public void close() {\r\n                \r\n            }\r\n\r\n            @Override\r\n            public boolean requiresLayout() {\r\n                return false;\r\n            }\r\n        }\r\n        \r\n    }\r\n\r\n\r\n... which allows you to do:\r\n\r\n    @Rule public Log4JTester logTest = new Log4JTester();\r\n    \r\n    @Test\r\n    public void testFoo() {\r\n         user.setStatus(Status.PREMIUM);\r\n         logTest.assertLogged(\r\n            stringContains(&quot;Note added to account: premium customer&quot;));\r\n    }\r\n\r\nYou could probably make it use hamcrest in a smarter way, but I&#39;ve left it at this.","title":"How to do a JUnit assert on a message in a logger","body":"<p>Inspired by @RonaldBlaschke's solution, I came up with this:</p>\n\n<pre><code>public class Log4JTester extends ExternalResource {\n    TestAppender appender;\n\n    @Override\n    protected void before() {\n        appender = new TestAppender();\n        final Logger rootLogger = Logger.getRootLogger();\n        rootLogger.addAppender(appender);\n    }\n\n    @Override\n    protected void after() {\n        final Logger rootLogger = Logger.getRootLogger();\n        rootLogger.removeAppender(appender);\n    }\n\n    public void assertLogged(Matcher&lt;String&gt; matcher) {\n        for(LoggingEvent event : appender.events) {\n            if(matcher.matches(event.getMessage())) {\n                return;\n            }\n        }\n        fail(\"No event matches \" + matcher);\n    }\n\n    private static class TestAppender extends AppenderSkeleton {\n\n        List&lt;LoggingEvent&gt; events = new ArrayList&lt;LoggingEvent&gt;();\n\n        @Override\n        protected void append(LoggingEvent event) {\n            events.add(event);\n        }\n\n        @Override\n        public void close() {\n\n        }\n\n        @Override\n        public boolean requiresLayout() {\n            return false;\n        }\n    }\n\n}\n</code></pre>\n\n<p>... which allows you to do:</p>\n\n<pre><code>@Rule public Log4JTester logTest = new Log4JTester();\n\n@Test\npublic void testFoo() {\n     user.setStatus(Status.PREMIUM);\n     logTest.assertLogged(\n        stringContains(\"Note added to account: premium customer\"));\n}\n</code></pre>\n\n<p>You could probably make it use hamcrest in a smarter way, but I've left it at this.</p>\n"},{"tags":[],"owner":{"account_id":1962267,"reputation":1261,"user_id":1763458,"display_name":"Yarix"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1455099620,"creation_date":1455099620,"answer_id":35312437,"question_id":1827677,"body_markdown":"Using Jmockit (1.21) I was able to write this simple test. \r\nThe test makes sure a specific ERROR message is called just once.\r\n\r\n    @Test\r\n\tpublic void testErrorMessage() {\r\n\t\tfinal org.slf4j.Logger logger = org.slf4j.LoggerFactory.getLogger( MyConfig.class );\r\n\t\t\r\n\t\tnew Expectations(logger) {{\r\n\t\t\t//make sure this error is happens just once.\r\n\t\t\tlogger.error( &quot;Something went wrong...&quot; );\r\n\t\t\ttimes = 1;\r\n\t\t}};\r\n\r\n\t\tnew MyTestObject().runSomethingWrong( &quot;aaa&quot; ); //SUT that eventually cause the error in the log.\t\r\n\t}","title":"How to do a JUnit assert on a message in a logger","body":"<p>Using Jmockit (1.21) I was able to write this simple test. \nThe test makes sure a specific ERROR message is called just once.</p>\n\n<pre><code>@Test\npublic void testErrorMessage() {\n    final org.slf4j.Logger logger = org.slf4j.LoggerFactory.getLogger( MyConfig.class );\n\n    new Expectations(logger) {{\n        //make sure this error is happens just once.\n        logger.error( \"Something went wrong...\" );\n        times = 1;\n    }};\n\n    new MyTestObject().runSomethingWrong( \"aaa\" ); //SUT that eventually cause the error in the log.    \n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2633985,"reputation":965,"user_id":2279187,"accept_rate":38,"display_name":"nishant"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1481536879,"creation_date":1481536879,"answer_id":41098250,"question_id":1827677,"body_markdown":"Mocking the Appender can help capture the log lines.\r\nFind sample on: http://clearqa.blogspot.co.uk/2016/12/test-log-lines.html\r\n\r\n    // Fully working test at: https://github.com/njaiswal/logLineTester/blob/master/src/test/java/com/nj/Utils/UtilsTest.java\r\n\r\n    @Test\r\n    public void testUtilsLog() throws InterruptedException {\r\n\r\n        Logger utilsLogger = (Logger) LoggerFactory.getLogger(&quot;com.nj.utils&quot;);\r\n\r\n        final Appender mockAppender = mock(Appender.class);\r\n        when(mockAppender.getName()).thenReturn(&quot;MOCK&quot;);\r\n        utilsLogger.addAppender(mockAppender);\r\n\r\n        final List&lt;String&gt; capturedLogs = Collections.synchronizedList(new ArrayList&lt;&gt;());\r\n        final CountDownLatch latch = new CountDownLatch(3);\r\n\r\n        //Capture logs\r\n        doAnswer((invocation) -&gt; {\r\n            LoggingEvent loggingEvent = invocation.getArgumentAt(0, LoggingEvent.class);\r\n            capturedLogs.add(loggingEvent.getFormattedMessage());\r\n            latch.countDown();\r\n            return null;\r\n        }).when(mockAppender).doAppend(any());\r\n\r\n        //Call method which will do logging to be tested\r\n        Application.main(null);\r\n\r\n        //Wait 5 seconds for latch to be true. That means 3 log lines were logged\r\n        assertThat(latch.await(5L, TimeUnit.SECONDS), is(true));\r\n\r\n        //Now assert the captured logs\r\n        assertThat(capturedLogs, hasItem(containsString(&quot;One&quot;)));\r\n        assertThat(capturedLogs, hasItem(containsString(&quot;Two&quot;)));\r\n        assertThat(capturedLogs, hasItem(containsString(&quot;Three&quot;)));\r\n    }","title":"How to do a JUnit assert on a message in a logger","body":"<p>Mocking the Appender can help capture the log lines.\nFind sample on: <a href=\"http://clearqa.blogspot.co.uk/2016/12/test-log-lines.html\" rel=\"nofollow noreferrer\">http://clearqa.blogspot.co.uk/2016/12/test-log-lines.html</a></p>\n\n<pre><code>// Fully working test at: https://github.com/njaiswal/logLineTester/blob/master/src/test/java/com/nj/Utils/UtilsTest.java\n\n@Test\npublic void testUtilsLog() throws InterruptedException {\n\n    Logger utilsLogger = (Logger) LoggerFactory.getLogger(\"com.nj.utils\");\n\n    final Appender mockAppender = mock(Appender.class);\n    when(mockAppender.getName()).thenReturn(\"MOCK\");\n    utilsLogger.addAppender(mockAppender);\n\n    final List&lt;String&gt; capturedLogs = Collections.synchronizedList(new ArrayList&lt;&gt;());\n    final CountDownLatch latch = new CountDownLatch(3);\n\n    //Capture logs\n    doAnswer((invocation) -&gt; {\n        LoggingEvent loggingEvent = invocation.getArgumentAt(0, LoggingEvent.class);\n        capturedLogs.add(loggingEvent.getFormattedMessage());\n        latch.countDown();\n        return null;\n    }).when(mockAppender).doAppend(any());\n\n    //Call method which will do logging to be tested\n    Application.main(null);\n\n    //Wait 5 seconds for latch to be true. That means 3 log lines were logged\n    assertThat(latch.await(5L, TimeUnit.SECONDS), is(true));\n\n    //Now assert the captured logs\n    assertThat(capturedLogs, hasItem(containsString(\"One\")));\n    assertThat(capturedLogs, hasItem(containsString(\"Two\")));\n    assertThat(capturedLogs, hasItem(containsString(\"Three\")));\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":6537188,"reputation":2325,"user_id":5303558,"display_name":"Dmytro Melnychuk"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1492625117,"creation_date":1492624811,"answer_id":43502981,"question_id":1827677,"body_markdown":"As for me you can simplify your test by using `JUnit` with `Mockito`.\r\nI propose following solution for it:\r\n\r\n    import org.apache.log4j.Appender;\r\n    import org.apache.log4j.Level;\r\n    import org.apache.log4j.LogManager;\r\n    import org.apache.log4j.spi.LoggingEvent;\r\n    import org.junit.After;\r\n    import org.junit.Before;\r\n    import org.junit.Test;\r\n    import org.junit.runner.RunWith;\r\n    import org.mockito.ArgumentCaptor;\r\n    import org.mockito.Captor;\r\n    import org.mockito.InjectMocks;\r\n    import org.mockito.Mock;\r\n    import org.mockito.runners.MockitoJUnitRunner;\r\n    \r\n    import java.util.List;\r\n    \r\n    import static org.assertj.core.api.Assertions.assertThat;\r\n    import static org.assertj.core.api.Assertions.tuple;\r\n    import static org.mockito.Mockito.times;\r\n    \r\n    @RunWith(MockitoJUnitRunner.class)\r\n    public class MyLogTest {\r\n    \tprivate static final String FIRST_MESSAGE = &quot;First message&quot;;\r\n    \tprivate static final String SECOND_MESSAGE = &quot;Second message&quot;;\r\n    \t@Mock private Appender appender;\r\n    \t@Captor private ArgumentCaptor&lt;LoggingEvent&gt; captor;\r\n    \t@InjectMocks private MyLog;\r\n    \r\n    \t@Before\r\n    \tpublic void setUp() {\r\n    \t\tLogManager.getRootLogger().addAppender(appender);\r\n    \t}\r\n    \r\n    \t@After\r\n    \tpublic void tearDown() {\r\n    \t\tLogManager.getRootLogger().removeAppender(appender);\r\n    \t}\r\n\r\n    \t@Test\r\n    \tpublic void shouldLogExactlyTwoMessages() {\r\n\t\t    testedClass.foo();\r\n\r\n\t\t    then(appender).should(times(2)).doAppend(captor.capture());\r\n\t\t    List&lt;LoggingEvent&gt; loggingEvents = captor.getAllValues();\r\n\t\t    assertThat(loggingEvents).extracting(&quot;level&quot;, &quot;renderedMessage&quot;).containsExactly(\r\n\t\t\t\t    tuple(Level.INFO, FIRST_MESSAGE)\r\n\t\t\t\t    tuple(Level.INFO, SECOND_MESSAGE)\r\n    \t\t);\r\n    \t}\r\n    }\r\n\r\nThat&#39;s why we have nice **flexibility** for tests with **different message quantity**","title":"How to do a JUnit assert on a message in a logger","body":"<p>As for me you can simplify your test by using <code>JUnit</code> with <code>Mockito</code>.\nI propose following solution for it:</p>\n\n<pre><code>import org.apache.log4j.Appender;\nimport org.apache.log4j.Level;\nimport org.apache.log4j.LogManager;\nimport org.apache.log4j.spi.LoggingEvent;\nimport org.junit.After;\nimport org.junit.Before;\nimport org.junit.Test;\nimport org.junit.runner.RunWith;\nimport org.mockito.ArgumentCaptor;\nimport org.mockito.Captor;\nimport org.mockito.InjectMocks;\nimport org.mockito.Mock;\nimport org.mockito.runners.MockitoJUnitRunner;\n\nimport java.util.List;\n\nimport static org.assertj.core.api.Assertions.assertThat;\nimport static org.assertj.core.api.Assertions.tuple;\nimport static org.mockito.Mockito.times;\n\n@RunWith(MockitoJUnitRunner.class)\npublic class MyLogTest {\n    private static final String FIRST_MESSAGE = \"First message\";\n    private static final String SECOND_MESSAGE = \"Second message\";\n    @Mock private Appender appender;\n    @Captor private ArgumentCaptor&lt;LoggingEvent&gt; captor;\n    @InjectMocks private MyLog;\n\n    @Before\n    public void setUp() {\n        LogManager.getRootLogger().addAppender(appender);\n    }\n\n    @After\n    public void tearDown() {\n        LogManager.getRootLogger().removeAppender(appender);\n    }\n\n    @Test\n    public void shouldLogExactlyTwoMessages() {\n        testedClass.foo();\n\n        then(appender).should(times(2)).doAppend(captor.capture());\n        List&lt;LoggingEvent&gt; loggingEvents = captor.getAllValues();\n        assertThat(loggingEvents).extracting(\"level\", \"renderedMessage\").containsExactly(\n                tuple(Level.INFO, FIRST_MESSAGE)\n                tuple(Level.INFO, SECOND_MESSAGE)\n        );\n    }\n}\n</code></pre>\n\n<p>That's why we have nice <strong>flexibility</strong> for tests with <strong>different message quantity</strong></p>\n"},{"tags":[],"owner":{"account_id":2141360,"reputation":539,"user_id":1899903,"display_name":"SUMIT"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1494510837,"creation_date":1494510837,"answer_id":43917469,"question_id":1827677,"body_markdown":"Use the below code. I am using same code for my spring integration test where I am using log back for logging. Use method assertJobIsScheduled to assert the text printed in the log.\r\n\r\n    import ch.qos.logback.classic.Logger;\r\n\timport ch.qos.logback.classic.spi.LoggingEvent;\r\n\timport ch.qos.logback.core.Appender;\r\n\t\r\n\tprivate Logger rootLogger;\r\n    final Appender mockAppender = mock(Appender.class);\r\n\r\n    @Before\r\n    public void setUp() throws Exception {\r\n        initMocks(this);\r\n        when(mockAppender.getName()).thenReturn(&quot;MOCK&quot;);\r\n        rootLogger = (Logger) LoggerFactory.getLogger(ch.qos.logback.classic.Logger.ROOT_LOGGER_NAME);\r\n        rootLogger.addAppender(mockAppender);\r\n    }\r\n\r\n    private void assertJobIsScheduled(final String matcherText) {\r\n        verify(mockAppender).doAppend(argThat(new ArgumentMatcher() {\r\n            @Override\r\n            public boolean matches(final Object argument) {\r\n                return ((LoggingEvent)argument).getFormattedMessage().contains(matcherText);\r\n            }\r\n        }));\r\n    }","title":"How to do a JUnit assert on a message in a logger","body":"<p>Use the below code. I am using same code for my spring integration test where I am using log back for logging. Use method assertJobIsScheduled to assert the text printed in the log.</p>\n\n<pre><code>import ch.qos.logback.classic.Logger;\nimport ch.qos.logback.classic.spi.LoggingEvent;\nimport ch.qos.logback.core.Appender;\n\nprivate Logger rootLogger;\nfinal Appender mockAppender = mock(Appender.class);\n\n@Before\npublic void setUp() throws Exception {\n    initMocks(this);\n    when(mockAppender.getName()).thenReturn(\"MOCK\");\n    rootLogger = (Logger) LoggerFactory.getLogger(ch.qos.logback.classic.Logger.ROOT_LOGGER_NAME);\n    rootLogger.addAppender(mockAppender);\n}\n\nprivate void assertJobIsScheduled(final String matcherText) {\n    verify(mockAppender).doAppend(argThat(new ArgumentMatcher() {\n        @Override\n        public boolean matches(final Object argument) {\n            return ((LoggingEvent)argument).getFormattedMessage().contains(matcherText);\n        }\n    }));\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2025979,"reputation":2522,"user_id":1810962,"accept_rate":80,"display_name":"joseph"},"down_vote_count":1,"up_vote_count":12,"is_accepted":false,"score":11,"last_activity_date":1632935375,"creation_date":1501179671,"answer_id":45358338,"question_id":1827677,"body_markdown":"For log4j2 the solution is slightly different because AppenderSkeleton is not available anymore. Additionally, using Mockito, or similar library to create an Appender with an ArgumentCaptor will not work if you&#39;re expecting multiple logging messages because the MutableLogEvent is reused over multiple log messages. The best solution I found for log4j2 is:\r\n\r\n    import org.apache.logging.log4j.LogManager;\r\n    import org.apache.logging.log4j.core.LogEvent;\r\n    import org.apache.logging.log4j.core.Logger;\r\n    import org.apache.logging.log4j.core.appender.AbstractAppender;\r\n\r\n    private static MockedAppender mockedAppender;\r\n    private static Logger logger;\r\n\r\n    @Before\r\n    public void setup() {\r\n        mockedAppender.message.clear();\r\n    }\r\n\r\n    /**\r\n     * For some reason mvn test will not work if this is @Before, but in eclipse it works! As a\r\n     * result, we use @BeforeClass.\r\n     */\r\n    @BeforeClass\r\n    public static void setupClass() {\r\n        mockedAppender = new MockedAppender();\r\n        logger = (Logger)LogManager.getLogger(MatchingMetricsLogger.class);\r\n        logger.addAppender(mockedAppender);\r\n        logger.setLevel(Level.INFO);\r\n    }\r\n\r\n    @AfterClass\r\n    public static void teardown() {\r\n        logger.removeAppender(mockedAppender);\r\n    }\r\n\r\n    @Test\r\n    public void test() {\r\n        // do something that causes logs\r\n        for (String e : mockedAppender.message) {\r\n            // add asserts for the log messages\r\n        }\r\n    }\r\n\r\n    private static class MockedAppender extends AbstractAppender {\r\n\r\n        List&lt;String&gt; message = new ArrayList&lt;&gt;();\r\n\r\n        protected MockedAppender() {\r\n            super(&quot;MockedAppender&quot;, null, null);\r\n        }\r\n\r\n        @Override\r\n        public void append(LogEvent event) {\r\n            message.add(event.getMessage().getFormattedMessage());\r\n        }\r\n    }","title":"How to do a JUnit assert on a message in a logger","body":"<p>For log4j2 the solution is slightly different because AppenderSkeleton is not available anymore. Additionally, using Mockito, or similar library to create an Appender with an ArgumentCaptor will not work if you're expecting multiple logging messages because the MutableLogEvent is reused over multiple log messages. The best solution I found for log4j2 is:</p>\n<pre><code>import org.apache.logging.log4j.LogManager;\nimport org.apache.logging.log4j.core.LogEvent;\nimport org.apache.logging.log4j.core.Logger;\nimport org.apache.logging.log4j.core.appender.AbstractAppender;\n\nprivate static MockedAppender mockedAppender;\nprivate static Logger logger;\n\n@Before\npublic void setup() {\n    mockedAppender.message.clear();\n}\n\n/**\n * For some reason mvn test will not work if this is @Before, but in eclipse it works! As a\n * result, we use @BeforeClass.\n */\n@BeforeClass\npublic static void setupClass() {\n    mockedAppender = new MockedAppender();\n    logger = (Logger)LogManager.getLogger(MatchingMetricsLogger.class);\n    logger.addAppender(mockedAppender);\n    logger.setLevel(Level.INFO);\n}\n\n@AfterClass\npublic static void teardown() {\n    logger.removeAppender(mockedAppender);\n}\n\n@Test\npublic void test() {\n    // do something that causes logs\n    for (String e : mockedAppender.message) {\n        // add asserts for the log messages\n    }\n}\n\nprivate static class MockedAppender extends AbstractAppender {\n\n    List&lt;String&gt; message = new ArrayList&lt;&gt;();\n\n    protected MockedAppender() {\n        super(&quot;MockedAppender&quot;, null, null);\n    }\n\n    @Override\n    public void append(LogEvent event) {\n        message.add(event.getMessage().getFormattedMessage());\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1795126,"reputation":5398,"user_id":1634695,"display_name":"Mehdi Karamosly"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1669741535,"creation_date":1504026565,"answer_id":45944720,"question_id":1827677,"body_markdown":"Here is a nice and elegant way to approach this problem:\r\nhttps://www.baeldung.com/junit-asserting-logs","title":"How to do a JUnit assert on a message in a logger","body":"<p>Here is a nice and elegant way to approach this problem:\n<a href=\"https://www.baeldung.com/junit-asserting-logs\" rel=\"nofollow noreferrer\">https://www.baeldung.com/junit-asserting-logs</a></p>\n"},{"tags":[],"owner":{"account_id":261142,"reputation":47118,"user_id":545127,"accept_rate":69,"display_name":"Raedwald"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1513089725,"creation_date":1513086141,"answer_id":47774126,"question_id":1827677,"body_markdown":"There are two things that you might be trying to test.\r\n\r\n* When there is an event of interest to the operator of my program, does my program perform an appropriate logging operation, which can inform the operator of that event.\r\n* When my program performs a logging operation, does the log message it produces have the correct text.\r\n\r\nThose two things are actually different things, and so could be tested separately. However, testing the second (the text of messages) is so problematic, I recommend against doing it at all. A test of a message text will ultimately consist of checking that one text string (the expected message text) is the same as, or can be trivially derived from, the text string used in your logging code.\r\n\r\n* Those tests do not test program logic at all, they only test that one resource (a string) is equivalent to another resource.\r\n* The tests are fragile; even a minor tweak to the formatting of a log message breaks your tests.\r\n* The tests are incompatible with internationalisation (translation) of your logging interface.The tests assume there is only one possible message text, and thus only one possible human language.\r\n\r\nNote that having your program code (implementing some business logic, perhaps) directly calling the text logging interface is poor design (but unfortunately very commom). Code that is responsible for business logic is also deciding some logging policy and the text of log messages. It mixes business logic with user interface code (yes, log messages are part of your program&#39;s user interface). Those things should be separate.\r\n\r\nI therefore recommend that business logic does not directly generate the text of log messages. Instead have it delegate to a logging object.\r\n\r\n* The class of the logging object should provide a suitable internal API, which your business object can use to express the event that has occurred using objects of your domain model, not text strings.\r\n* The implementation of your logging class is responsible for producing text representations of those domain objects, and rendering a suitable text description of the event, then forwarding that text message to the low level logging framework (such as JUL, log4j or slf4j).\r\n* Your business logic is responsible only for calling the correct methods of the internal API of your logger class, passing the correct domain objects, to describe the actual events that occurred.\r\n* Your concrete logging class `implements` an `interface`, which describes the internal API your business logic may use.\r\n* Your class(es) that implements business logic and must perform logging has a reference to the logging object to delegate to. The class of the reference is the abstract `interface`.\r\n* Use dependency injection to set up the reference to the logger.\r\n\r\nYou can then test that your business logic classes correctly tell the logging interface about events, by creating a mock logger, which implements the internal logging API, and using dependency injection in the set up phase of your test.\r\n\r\nLike this:\r\n\r\n     public class MyService {// The class we want to test\r\n        private final MyLogger logger;\r\n\r\n        public MyService(MyLogger logger) {\r\n           this.logger = Objects.requireNonNull(logger);\r\n        }\r\n\r\n        public void performTwiddleOperation(Foo foo) {// The method we want to test\r\n           ...// The business logic\r\n           logger.performedTwiddleOperation(foo);\r\n        }\r\n     };\r\n\r\n     public interface MyLogger {\r\n        public void performedTwiddleOperation(Foo foo);\r\n        ...\r\n     };\r\n\r\n     public final class MySl4jLogger: implements MyLogger {\r\n        ...\r\n\r\n        @Override\r\n        public void performedTwiddleOperation(Foo foo) {\r\n           logger.info(&quot;twiddled foo &quot; + foo.getId());\r\n        }\r\n     }\r\n\r\n     public final void MyProgram {\r\n        public static void main(String[] argv) {\r\n           ...\r\n           MyLogger logger = new MySl4jLogger(...);\r\n           MyService service = new MyService(logger);\r\n           startService(service);// or whatever you must do\r\n           ...\r\n        }\r\n     }\r\n\r\n     public class MyServiceTest {\r\n        ...\r\n\r\n        static final class MyMockLogger: implements MyLogger {\r\n           private Food.id id;\r\n           private int nCallsPerformedTwiddleOperation;\r\n           ...\r\n\r\n           @Override\r\n           public void performedTwiddleOperation(Foo foo) {\r\n              id = foo.id;\r\n              ++nCallsPerformedTwiddleOperation;\r\n           }\r\n\r\n           void assertCalledPerformedTwiddleOperation(Foo.id id) {\r\n              assertEquals(&quot;Called performedTwiddleOperation&quot;, 1, nCallsPerformedTwiddleOperation);\r\n              assertEquals(&quot;Called performedTwiddleOperation with correct ID&quot;, id, this.id);\r\n           }\r\n        };\r\n\r\n        @Test\r\n        public void testPerformTwiddleOperation_1() {\r\n           // Setup\r\n           MyMockLogger logger = new MyMockLogger();\r\n           MyService service = new MyService(logger);\r\n           Foo.Id id = new Foo.Id(...);\r\n           Foo foo = new Foo(id, 1);\r\n\r\n           // Execute\r\n           service.performedTwiddleOperation(foo);\r\n\r\n           // Verify\r\n           ...\r\n           logger.assertCalledPerformedTwiddleOperation(id);\r\n        }\r\n     }","title":"How to do a JUnit assert on a message in a logger","body":"<p>There are two things that you might be trying to test.</p>\n\n<ul>\n<li>When there is an event of interest to the operator of my program, does my program perform an appropriate logging operation, which can inform the operator of that event.</li>\n<li>When my program performs a logging operation, does the log message it produces have the correct text.</li>\n</ul>\n\n<p>Those two things are actually different things, and so could be tested separately. However, testing the second (the text of messages) is so problematic, I recommend against doing it at all. A test of a message text will ultimately consist of checking that one text string (the expected message text) is the same as, or can be trivially derived from, the text string used in your logging code.</p>\n\n<ul>\n<li>Those tests do not test program logic at all, they only test that one resource (a string) is equivalent to another resource.</li>\n<li>The tests are fragile; even a minor tweak to the formatting of a log message breaks your tests.</li>\n<li>The tests are incompatible with internationalisation (translation) of your logging interface.The tests assume there is only one possible message text, and thus only one possible human language.</li>\n</ul>\n\n<p>Note that having your program code (implementing some business logic, perhaps) directly calling the text logging interface is poor design (but unfortunately very commom). Code that is responsible for business logic is also deciding some logging policy and the text of log messages. It mixes business logic with user interface code (yes, log messages are part of your program's user interface). Those things should be separate.</p>\n\n<p>I therefore recommend that business logic does not directly generate the text of log messages. Instead have it delegate to a logging object.</p>\n\n<ul>\n<li>The class of the logging object should provide a suitable internal API, which your business object can use to express the event that has occurred using objects of your domain model, not text strings.</li>\n<li>The implementation of your logging class is responsible for producing text representations of those domain objects, and rendering a suitable text description of the event, then forwarding that text message to the low level logging framework (such as JUL, log4j or slf4j).</li>\n<li>Your business logic is responsible only for calling the correct methods of the internal API of your logger class, passing the correct domain objects, to describe the actual events that occurred.</li>\n<li>Your concrete logging class <code>implements</code> an <code>interface</code>, which describes the internal API your business logic may use.</li>\n<li>Your class(es) that implements business logic and must perform logging has a reference to the logging object to delegate to. The class of the reference is the abstract <code>interface</code>.</li>\n<li>Use dependency injection to set up the reference to the logger.</li>\n</ul>\n\n<p>You can then test that your business logic classes correctly tell the logging interface about events, by creating a mock logger, which implements the internal logging API, and using dependency injection in the set up phase of your test.</p>\n\n<p>Like this:</p>\n\n<pre><code> public class MyService {// The class we want to test\n    private final MyLogger logger;\n\n    public MyService(MyLogger logger) {\n       this.logger = Objects.requireNonNull(logger);\n    }\n\n    public void performTwiddleOperation(Foo foo) {// The method we want to test\n       ...// The business logic\n       logger.performedTwiddleOperation(foo);\n    }\n };\n\n public interface MyLogger {\n    public void performedTwiddleOperation(Foo foo);\n    ...\n };\n\n public final class MySl4jLogger: implements MyLogger {\n    ...\n\n    @Override\n    public void performedTwiddleOperation(Foo foo) {\n       logger.info(\"twiddled foo \" + foo.getId());\n    }\n }\n\n public final void MyProgram {\n    public static void main(String[] argv) {\n       ...\n       MyLogger logger = new MySl4jLogger(...);\n       MyService service = new MyService(logger);\n       startService(service);// or whatever you must do\n       ...\n    }\n }\n\n public class MyServiceTest {\n    ...\n\n    static final class MyMockLogger: implements MyLogger {\n       private Food.id id;\n       private int nCallsPerformedTwiddleOperation;\n       ...\n\n       @Override\n       public void performedTwiddleOperation(Foo foo) {\n          id = foo.id;\n          ++nCallsPerformedTwiddleOperation;\n       }\n\n       void assertCalledPerformedTwiddleOperation(Foo.id id) {\n          assertEquals(\"Called performedTwiddleOperation\", 1, nCallsPerformedTwiddleOperation);\n          assertEquals(\"Called performedTwiddleOperation with correct ID\", id, this.id);\n       }\n    };\n\n    @Test\n    public void testPerformTwiddleOperation_1() {\n       // Setup\n       MyMockLogger logger = new MyMockLogger();\n       MyService service = new MyService(logger);\n       Foo.Id id = new Foo.Id(...);\n       Foo foo = new Foo(id, 1);\n\n       // Execute\n       service.performedTwiddleOperation(foo);\n\n       // Verify\n       ...\n       logger.assertCalledPerformedTwiddleOperation(id);\n    }\n }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2691138,"reputation":105,"user_id":2324477,"display_name":"Cheefachi"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1521564487,"creation_date":1521564487,"answer_id":49389884,"question_id":1827677,"body_markdown":"What I have done if all I want to do is see that some string was logged (as opposed to verifying exact log statements which is just too brittle) is to redirect StdOut to a buffer, do a contains, then reset StdOut:\r\n\r\n    PrintStream original = System.out;\r\n    ByteArrayOutputStream buffer = new ByteArrayOutputStream();\r\n    System.setOut(new PrintStream(buffer));\r\n\r\n    // Do something that logs\r\n\r\n    assertTrue(buffer.toString().contains(myMessage));\r\n    System.setOut(original);","title":"How to do a JUnit assert on a message in a logger","body":"<p>What I have done if all I want to do is see that some string was logged (as opposed to verifying exact log statements which is just too brittle) is to redirect StdOut to a buffer, do a contains, then reset StdOut:</p>\n\n<pre><code>PrintStream original = System.out;\nByteArrayOutputStream buffer = new ByteArrayOutputStream();\nSystem.setOut(new PrintStream(buffer));\n\n// Do something that logs\n\nassertTrue(buffer.toString().contains(myMessage));\nSystem.setOut(original);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2157195,"reputation":3026,"user_id":1912127,"display_name":"Dagmar"},"down_vote_count":1,"up_vote_count":10,"is_accepted":false,"score":9,"last_activity_date":1525940660,"creation_date":1525940660,"answer_id":50268580,"question_id":1827677,"body_markdown":"Wow. I&#39;m unsure why this was so hard. I found I was unable to use any of the code samples above because I was using log4j2 over slf4j. This is my solution:\r\n\r\n    public class SpecialLogServiceTest {\r\n    \r\n      @Mock\r\n      private Appender appender;\r\n    \r\n      @Captor\r\n      private ArgumentCaptor&lt;LogEvent&gt; captor;\r\n    \r\n      @InjectMocks\r\n      private SpecialLogService specialLogService;\r\n\r\n      private LoggerConfig loggerConfig;\r\n    \r\n      @Before\r\n      public void setUp() {\r\n        // prepare the appender so Log4j likes it\r\n        when(appender.getName()).thenReturn(&quot;MockAppender&quot;);\r\n        when(appender.isStarted()).thenReturn(true);\r\n        when(appender.isStopped()).thenReturn(false);\r\n    \r\n        final LoggerContext ctx = (LoggerContext) LogManager.getContext(false);\r\n        final Configuration config = ctx.getConfiguration();\r\n        loggerConfig = config.getLoggerConfig(&quot;org.example.SpecialLogService&quot;);\r\n        loggerConfig.addAppender(appender, AuditLogCRUDService.LEVEL_AUDIT, null);\r\n      }\r\n    \r\n      @After\r\n      public void tearDown() {\r\n        loggerConfig.removeAppender(&quot;MockAppender&quot;);\r\n      }\r\n    \r\n      @Test\r\n      public void writeLog_shouldCreateCorrectLogMessage() throws Exception {\r\n        SpecialLog specialLog = new SpecialLogBuilder().build();\r\n        String expectedLog = &quot;this is my log message&quot;;\r\n        \r\n        specialLogService.writeLog(specialLog);\r\n    \r\n        verify(appender).append(captor.capture());\r\n        assertThat(captor.getAllValues().size(), is(1));\r\n        assertThat(captor.getAllValues().get(0).getMessage().toString(), is(expectedLog));\r\n      }\r\n    }","title":"How to do a JUnit assert on a message in a logger","body":"<p>Wow. I'm unsure why this was so hard. I found I was unable to use any of the code samples above because I was using log4j2 over slf4j. This is my solution:</p>\n\n<pre><code>public class SpecialLogServiceTest {\n\n  @Mock\n  private Appender appender;\n\n  @Captor\n  private ArgumentCaptor&lt;LogEvent&gt; captor;\n\n  @InjectMocks\n  private SpecialLogService specialLogService;\n\n  private LoggerConfig loggerConfig;\n\n  @Before\n  public void setUp() {\n    // prepare the appender so Log4j likes it\n    when(appender.getName()).thenReturn(\"MockAppender\");\n    when(appender.isStarted()).thenReturn(true);\n    when(appender.isStopped()).thenReturn(false);\n\n    final LoggerContext ctx = (LoggerContext) LogManager.getContext(false);\n    final Configuration config = ctx.getConfiguration();\n    loggerConfig = config.getLoggerConfig(\"org.example.SpecialLogService\");\n    loggerConfig.addAppender(appender, AuditLogCRUDService.LEVEL_AUDIT, null);\n  }\n\n  @After\n  public void tearDown() {\n    loggerConfig.removeAppender(\"MockAppender\");\n  }\n\n  @Test\n  public void writeLog_shouldCreateCorrectLogMessage() throws Exception {\n    SpecialLog specialLog = new SpecialLogBuilder().build();\n    String expectedLog = \"this is my log message\";\n\n    specialLogService.writeLog(specialLog);\n\n    verify(appender).append(captor.capture());\n    assertThat(captor.getAllValues().size(), is(1));\n    assertThat(captor.getAllValues().get(0).getMessage().toString(), is(expectedLog));\n  }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":318698,"reputation":51,"user_id":636046,"display_name":"robbo"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1529522238,"creation_date":1529520963,"answer_id":50955223,"question_id":1827677,"body_markdown":"The API for Log4J2 is slightly different. Also you might be using its async appender. I created a latched appender for this:\r\n\r\n        public static class LatchedAppender extends AbstractAppender implements AutoCloseable {\r\n\r\n        private final List&lt;LogEvent&gt; messages = new ArrayList&lt;&gt;();\r\n        private final CountDownLatch latch;\r\n        private final LoggerConfig loggerConfig;\r\n\r\n        public LatchedAppender(Class&lt;?&gt; classThatLogs, int expectedMessages) {\r\n            this(classThatLogs, null, null, expectedMessages);\r\n        }\r\n        public LatchedAppender(Class&lt;?&gt; classThatLogs, Filter filter, Layout&lt;? extends Serializable&gt; layout, int expectedMessages) {\r\n            super(classThatLogs.getName()+&quot;.&quot;+&quot;LatchedAppender&quot;, filter, layout);\r\n            latch = new CountDownLatch(expectedMessages);\r\n            final LoggerContext ctx = (LoggerContext) LogManager.getContext(false);\r\n            final Configuration config = ctx.getConfiguration();\r\n            loggerConfig = config.getLoggerConfig(LogManager.getLogger(classThatLogs).getName());\r\n            loggerConfig.addAppender(this, Level.ALL, ThresholdFilter.createFilter(Level.ALL, null, null));\r\n            start();\r\n        }\r\n\r\n        @Override\r\n        public void append(LogEvent event) {\r\n            messages.add(event);\r\n            latch.countDown();\r\n        }\r\n\r\n        public List&lt;LogEvent&gt; awaitMessages() throws InterruptedException {\r\n            assertTrue(latch.await(10, TimeUnit.SECONDS));\r\n            return messages;\r\n        }\r\n\r\n        @Override\r\n        public void close() {\r\n            stop();\r\n            loggerConfig.removeAppender(this.getName());\r\n        }\r\n    }\r\n\r\nUse it like this:\r\n\r\n            try (LatchedAppender appender = new LatchedAppender(ClassUnderTest.class, 1)) {\r\n\r\n            ClassUnderTest.methodThatLogs();\r\n            List&lt;LogEvent&gt; events = appender.awaitMessages();\r\n            assertEquals(1, events.size());\r\n            //more assertions here\r\n\r\n        }//appender removed","title":"How to do a JUnit assert on a message in a logger","body":"<p>The API for Log4J2 is slightly different. Also you might be using its async appender. I created a latched appender for this:</p>\n\n<pre><code>    public static class LatchedAppender extends AbstractAppender implements AutoCloseable {\n\n    private final List&lt;LogEvent&gt; messages = new ArrayList&lt;&gt;();\n    private final CountDownLatch latch;\n    private final LoggerConfig loggerConfig;\n\n    public LatchedAppender(Class&lt;?&gt; classThatLogs, int expectedMessages) {\n        this(classThatLogs, null, null, expectedMessages);\n    }\n    public LatchedAppender(Class&lt;?&gt; classThatLogs, Filter filter, Layout&lt;? extends Serializable&gt; layout, int expectedMessages) {\n        super(classThatLogs.getName()+\".\"+\"LatchedAppender\", filter, layout);\n        latch = new CountDownLatch(expectedMessages);\n        final LoggerContext ctx = (LoggerContext) LogManager.getContext(false);\n        final Configuration config = ctx.getConfiguration();\n        loggerConfig = config.getLoggerConfig(LogManager.getLogger(classThatLogs).getName());\n        loggerConfig.addAppender(this, Level.ALL, ThresholdFilter.createFilter(Level.ALL, null, null));\n        start();\n    }\n\n    @Override\n    public void append(LogEvent event) {\n        messages.add(event);\n        latch.countDown();\n    }\n\n    public List&lt;LogEvent&gt; awaitMessages() throws InterruptedException {\n        assertTrue(latch.await(10, TimeUnit.SECONDS));\n        return messages;\n    }\n\n    @Override\n    public void close() {\n        stop();\n        loggerConfig.removeAppender(this.getName());\n    }\n}\n</code></pre>\n\n<p>Use it like this:</p>\n\n<pre><code>        try (LatchedAppender appender = new LatchedAppender(ClassUnderTest.class, 1)) {\n\n        ClassUnderTest.methodThatLogs();\n        List&lt;LogEvent&gt; events = appender.awaitMessages();\n        assertEquals(1, events.size());\n        //more assertions here\n\n    }//appender removed\n</code></pre>\n"},{"tags":[],"owner":{"account_id":100270,"reputation":127154,"user_id":270371,"accept_rate":33,"display_name":"davidxxx"},"down_vote_count":2,"up_vote_count":129,"is_accepted":false,"score":127,"last_activity_date":1588960838,"creation_date":1534102013,"answer_id":51812144,"question_id":1827677,"body_markdown":"Here is a simple and efficient Logback solution.  \r\nIt doesn&#39;t require to add/create any new class.   \r\nIt relies on [`ListAppender`][1] : a whitebox logback appender where log entries are added in a `public List` field that we could so use to make our assertions.  \r\n\r\nHere is a simple example.   \r\n\r\nFoo class :\r\n\r\n    import org.slf4j.Logger;\r\n    import org.slf4j.LoggerFactory;\r\n    \r\n    public class Foo {\r\n    \t\r\n    \tstatic final Logger LOGGER = LoggerFactory.getLogger(Foo .class);\r\n    \t\r\n        public void doThat() {\r\n        \tLOGGER.info(&quot;start&quot;);\r\n            //...\r\n        \tLOGGER.info(&quot;finish&quot;);\r\n        }\r\n    }\r\n\r\nFooTest class :\r\n\r\n    import org.slf4j.LoggerFactory;\r\n    import ch.qos.logback.classic.Level;\r\n    import ch.qos.logback.classic.Logger;\r\n    import ch.qos.logback.classic.spi.ILoggingEvent;\r\n    import ch.qos.logback.core.read.ListAppender;\r\n\r\n    public class FooTest {\r\n\r\n\t    @Test\r\n\t    void doThat() throws Exception {\r\n            // get Logback Logger \r\n\t\t    Logger fooLogger = (Logger) LoggerFactory.getLogger(Foo.class);\r\n\r\n            // create and start a ListAppender\r\n\t\t    ListAppender&lt;ILoggingEvent&gt; listAppender = new ListAppender&lt;&gt;();\r\n\t\t    listAppender.start();\r\n\r\n            // add the appender to the logger\r\n            // addAppender is outdated now\r\n\t\t    fooLogger.addAppender(listAppender);\r\n\r\n            // call method under test\r\n            Foo foo = new Foo();\r\n            foo.doThat();\r\n\r\n            // JUnit assertions\r\n\t\t\tList&lt;ILoggingEvent&gt; logsList = listAppender.list;\r\n\t\t\tassertEquals(&quot;start&quot;, logsList.get(0)\r\n\t\t\t\t\t\t\t\t\t\t  .getMessage());\r\n\t\t\tassertEquals(Level.INFO, logsList.get(0)\r\n\t\t\t\t\t\t\t\t\t\t\t .getLevel());\r\n\r\n\t\t\tassertEquals(&quot;finish&quot;, logsList.get(1)\r\n\t\t\t\t\t\t\t\t\t\t   .getMessage());\r\n\t\t\tassertEquals(Level.INFO, logsList.get(1)\r\n\t\t\t\t\t\t\t\t\t\t\t .getLevel());\r\n        }\r\n    }\r\n\r\nJUnit assertions don&#39;t sound very adapted to assert some specific properties of the list elements.   \r\nMatcher/assertion libraries as AssertJ or Hamcrest appears better for that :\r\n\r\nWith AssertJ it would be : \r\n\r\n    import org.assertj.core.api.Assertions;\r\n\r\n    Assertions.assertThat(listAppender.list)\r\n\t\t      .extracting(ILoggingEvent::getMessage, ILoggingEvent::getLevel)\r\n\t\t      .containsExactly(Tuple.tuple(&quot;start&quot;, Level.INFO), Tuple.tuple(&quot;finish&quot;, Level.INFO));\r\n\r\n\r\n  [1]: https://logback.qos.ch/apidocs/ch/qos/logback/core/read/ListAppender.html","title":"How to do a JUnit assert on a message in a logger","body":"<p>Here is a simple and efficient Logback solution.<br>\nIt doesn't require to add/create any new class.<br>\nIt relies on <a href=\"https://logback.qos.ch/apidocs/ch/qos/logback/core/read/ListAppender.html\" rel=\"noreferrer\"><code>ListAppender</code></a> : a whitebox logback appender where log entries are added in a <code>public List</code> field that we could so use to make our assertions.  </p>\n\n<p>Here is a simple example.   </p>\n\n<p>Foo class :</p>\n\n<pre><code>import org.slf4j.Logger;\nimport org.slf4j.LoggerFactory;\n\npublic class Foo {\n\n    static final Logger LOGGER = LoggerFactory.getLogger(Foo .class);\n\n    public void doThat() {\n        LOGGER.info(\"start\");\n        //...\n        LOGGER.info(\"finish\");\n    }\n}\n</code></pre>\n\n<p>FooTest class :</p>\n\n<pre><code>import org.slf4j.LoggerFactory;\nimport ch.qos.logback.classic.Level;\nimport ch.qos.logback.classic.Logger;\nimport ch.qos.logback.classic.spi.ILoggingEvent;\nimport ch.qos.logback.core.read.ListAppender;\n\npublic class FooTest {\n\n    @Test\n    void doThat() throws Exception {\n        // get Logback Logger \n        Logger fooLogger = (Logger) LoggerFactory.getLogger(Foo.class);\n\n        // create and start a ListAppender\n        ListAppender&lt;ILoggingEvent&gt; listAppender = new ListAppender&lt;&gt;();\n        listAppender.start();\n\n        // add the appender to the logger\n        // addAppender is outdated now\n        fooLogger.addAppender(listAppender);\n\n        // call method under test\n        Foo foo = new Foo();\n        foo.doThat();\n\n        // JUnit assertions\n        List&lt;ILoggingEvent&gt; logsList = listAppender.list;\n        assertEquals(\"start\", logsList.get(0)\n                                      .getMessage());\n        assertEquals(Level.INFO, logsList.get(0)\n                                         .getLevel());\n\n        assertEquals(\"finish\", logsList.get(1)\n                                       .getMessage());\n        assertEquals(Level.INFO, logsList.get(1)\n                                         .getLevel());\n    }\n}\n</code></pre>\n\n<p>JUnit assertions don't sound very adapted to assert some specific properties of the list elements.<br>\nMatcher/assertion libraries as AssertJ or Hamcrest appears better for that :</p>\n\n<p>With AssertJ it would be : </p>\n\n<pre><code>import org.assertj.core.api.Assertions;\n\nAssertions.assertThat(listAppender.list)\n          .extracting(ILoggingEvent::getMessage, ILoggingEvent::getLevel)\n          .containsExactly(Tuple.tuple(\"start\", Level.INFO), Tuple.tuple(\"finish\", Level.INFO));\n</code></pre>\n"},{"tags":[],"owner":{"account_id":8258680,"reputation":317,"user_id":6210975,"display_name":"Greg7000"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1551905669,"creation_date":1551883463,"answer_id":55025765,"question_id":1827677,"body_markdown":"If you are using log4j2, the solution from https://www.dontpanicblog.co.uk/2018/04/29/test-log4j2-with-junit/  allowed me to assert messages were logged.\r\n\r\n\r\n\r\nThe solution goes like this:\r\n\r\n - Define a log4j appender as an ExternalResource  rule\r\n    \r\n        public class LogAppenderResource extends ExternalResource {\r\n     \r\n        private static final String APPENDER_NAME = &quot;log4jRuleAppender&quot;;\r\n     \r\n        /**\r\n         * Logged messages contains level and message only.\r\n         * This allows us to test that level and message are set.\r\n         */\r\n        private static final String PATTERN = &quot;%-5level %msg&quot;;\r\n     \r\n        private Logger logger;\r\n        private Appender appender;\r\n        private final CharArrayWriter outContent = new CharArrayWriter();\r\n     \r\n        public LogAppenderResource(org.apache.logging.log4j.Logger logger) {\r\n            this.logger = (org.apache.logging.log4j.core.Logger)logger;\r\n        }\r\n     \r\n        @Override\r\n        protected void before() {\r\n            StringLayout layout = PatternLayout.newBuilder().withPattern(PATTERN).build();\r\n            appender = WriterAppender.newBuilder()\r\n                    .setTarget(outContent)\r\n                    .setLayout(layout)\r\n                    .setName(APPENDER_NAME).build();\r\n            appender.start();\r\n            logger.addAppender(appender);\r\n        }\r\n     \r\n        @Override\r\n        protected void after() {\r\n            logger.removeAppender(appender);\r\n        }\r\n     \r\n        public String getOutput() {\r\n            return outContent.toString();\r\n            }\r\n        }\r\n - Define a test that use your ExternalResource rule\r\n\r\n        public class LoggingTextListenerTest {\r\n     \r\n            @Rule public LogAppenderResource appender = new LogAppenderResource(LogManager.getLogger(LoggingTextListener.class)); \r\n            private LoggingTextListener listener = new LoggingTextListener(); //     Class under test\r\n     \r\n            @Test\r\n            public void startedEvent_isLogged() {\r\n            listener.started();\r\n            assertThat(appender.getOutput(), containsString(&quot;started&quot;));\r\n            }\r\n        }\r\n\r\nDon&#39;t forget to have log4j2.xml as part of src/test/resources","title":"How to do a JUnit assert on a message in a logger","body":"<p>If you are using log4j2, the solution from <a href=\"https://www.dontpanicblog.co.uk/2018/04/29/test-log4j2-with-junit/\" rel=\"nofollow noreferrer\">https://www.dontpanicblog.co.uk/2018/04/29/test-log4j2-with-junit/</a>  allowed me to assert messages were logged.</p>\n\n<p>The solution goes like this:</p>\n\n<ul>\n<li><p>Define a log4j appender as an ExternalResource  rule</p>\n\n<pre><code>public class LogAppenderResource extends ExternalResource {\n\nprivate static final String APPENDER_NAME = \"log4jRuleAppender\";\n\n/**\n * Logged messages contains level and message only.\n * This allows us to test that level and message are set.\n */\nprivate static final String PATTERN = \"%-5level %msg\";\n\nprivate Logger logger;\nprivate Appender appender;\nprivate final CharArrayWriter outContent = new CharArrayWriter();\n\npublic LogAppenderResource(org.apache.logging.log4j.Logger logger) {\n    this.logger = (org.apache.logging.log4j.core.Logger)logger;\n}\n\n@Override\nprotected void before() {\n    StringLayout layout = PatternLayout.newBuilder().withPattern(PATTERN).build();\n    appender = WriterAppender.newBuilder()\n            .setTarget(outContent)\n            .setLayout(layout)\n            .setName(APPENDER_NAME).build();\n    appender.start();\n    logger.addAppender(appender);\n}\n\n@Override\nprotected void after() {\n    logger.removeAppender(appender);\n}\n\npublic String getOutput() {\n    return outContent.toString();\n    }\n}\n</code></pre></li>\n<li><p>Define a test that use your ExternalResource rule</p>\n\n<pre><code>public class LoggingTextListenerTest {\n\n    @Rule public LogAppenderResource appender = new LogAppenderResource(LogManager.getLogger(LoggingTextListener.class)); \n    private LoggingTextListener listener = new LoggingTextListener(); //     Class under test\n\n    @Test\n    public void startedEvent_isLogged() {\n    listener.started();\n    assertThat(appender.getOutput(), containsString(\"started\"));\n    }\n}\n</code></pre></li>\n</ul>\n\n<p>Don't forget to have log4j2.xml as part of src/test/resources</p>\n"},{"tags":[],"owner":{"account_id":9058952,"reputation":251,"user_id":6746112,"display_name":"Kusum"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1570707603,"creation_date":1570707603,"answer_id":58322062,"question_id":1827677,"body_markdown":"    Here is the sample code to mock log, irrespective of the version used for junit or sping, springboot.\r\n    \r\n    import ch.qos.logback.classic.spi.LoggingEvent;\r\n    import ch.qos.logback.core.Appender;\r\n    import org.mockito.ArgumentMatcher;\r\n    import org.slf4j.Logger;\r\n    import org.slf4j.LoggerFactory;\r\n    import org.junit.Test;\r\n    \r\n    import static org.mockito.Matchers.argThat;\r\n    import static org.mockito.Mockito.mock;\r\n    import static org.mockito.Mockito.verify;\r\n    import static org.mockito.Mockito.when;\r\n    \r\n    public class MyTest {\r\n      private static Logger logger = LoggerFactory.getLogger(MyTest.class);\r\n    \r\n        @Test\r\n        public void testSomething() {\r\n        ch.qos.logback.classic.Logger root = (ch.qos.logback.classic.Logger) LoggerFactory.getLogger(ch.qos.logback.classic.Logger.ROOT_LOGGER_NAME);\r\n        final Appender mockAppender = mock(Appender.class);\r\n        when(mockAppender.getName()).thenReturn(&quot;MOCK&quot;);\r\n        root.addAppender(mockAppender);\r\n    \r\n        //... do whatever you need to trigger the log\r\n    \r\n        verify(mockAppender).doAppend(argThat(new ArgumentMatcher() {\r\n          @Override\r\n          public boolean matches(final Object argument) {\r\n            return ((LoggingEvent)argument).getFormattedMessage().contains(&quot;Hey this is the message I want to see&quot;);\r\n          }\r\n        }));\r\n      }\r\n    }","title":"How to do a JUnit assert on a message in a logger","body":"<pre><code>Here is the sample code to mock log, irrespective of the version used for junit or sping, springboot.\n\nimport ch.qos.logback.classic.spi.LoggingEvent;\nimport ch.qos.logback.core.Appender;\nimport org.mockito.ArgumentMatcher;\nimport org.slf4j.Logger;\nimport org.slf4j.LoggerFactory;\nimport org.junit.Test;\n\nimport static org.mockito.Matchers.argThat;\nimport static org.mockito.Mockito.mock;\nimport static org.mockito.Mockito.verify;\nimport static org.mockito.Mockito.when;\n\npublic class MyTest {\n  private static Logger logger = LoggerFactory.getLogger(MyTest.class);\n\n    @Test\n    public void testSomething() {\n    ch.qos.logback.classic.Logger root = (ch.qos.logback.classic.Logger) LoggerFactory.getLogger(ch.qos.logback.classic.Logger.ROOT_LOGGER_NAME);\n    final Appender mockAppender = mock(Appender.class);\n    when(mockAppender.getName()).thenReturn(\"MOCK\");\n    root.addAppender(mockAppender);\n\n    //... do whatever you need to trigger the log\n\n    verify(mockAppender).doAppend(argThat(new ArgumentMatcher() {\n      @Override\n      public boolean matches(final Object argument) {\n        return ((LoggingEvent)argument).getFormattedMessage().contains(\"Hey this is the message I want to see\");\n      }\n    }));\n  }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1783732,"reputation":11618,"user_id":1625740,"accept_rate":59,"display_name":"Haim Raman"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1592456981,"creation_date":1574265845,"answer_id":58958638,"question_id":1827677,"body_markdown":"I answered a similar question for log4j see [how-can-i-test-with-junit-that-a-warning-was-logged-with-log4][1]\r\n\r\nThis is  newer and example with Log4j2 (tested with 2.11.2) and junit 5;\r\n\r\n        package com.whatever.log;\r\n        \r\n        import org.apache.logging.log4j.Level;\r\n        import org.apache.logging.log4j.LogManager;\r\n        import org.apache.logging.log4j.core.Logger;\r\n        import org.apache.logging.log4j.core.*;\r\n        import org.apache.logging.log4j.core.appender.AbstractAppender;\r\n        import org.apache.logging.log4j.core.config.Configuration;\r\n        import org.apache.logging.log4j.core.config.LoggerConfig;\r\n        import org.apache.logging.log4j.core.config.plugins.Plugin;\r\n        import org.apache.logging.log4j.core.config.plugins.PluginAttribute;\r\n        import org.apache.logging.log4j.core.config.plugins.PluginElement;\r\n        import org.apache.logging.log4j.core.config.plugins.PluginFactory;\r\n        import org.junit.jupiter.api.AfterEach;\r\n        import org.junit.jupiter.api.BeforeEach;\r\n        import org.junit.jupiter.api.DisplayName;\r\n        import org.junit.jupiter.api.Test;\r\n        \r\n        import java.util.ArrayList;\r\n        import java.util.List;\r\n        import static org.junit.Assert.*;\r\n        \r\n    class TestLogger {\r\n    \r\n        private TestAppender testAppender;\r\n        private LoggerConfig loggerConfig;\r\n        private final Logger logger = (Logger)\r\n                LogManager.getLogger(ClassUnderTest.class);\r\n    \r\n        @Test\r\n        @DisplayName(&quot;Test Log Junit5 and log4j2&quot;)\r\n        void test() {\r\n            ClassUnderTest.logMessage();\r\n            final LogEvent loggingEvent = testAppender.events.get(0);\r\n            //asset equals 1 because log level is info, change it to debug and\r\n            //the test will fail\r\n            assertTrue(testAppender.events.size()==1,&quot;Unexpected empty log&quot;);\r\n            assertEquals(Level.INFO,loggingEvent.getLevel(),&quot;Unexpected log level&quot;);\r\n            assertEquals(loggingEvent.getMessage().toString()\r\n                    ,&quot;Hello Test&quot;,&quot;Unexpected log message&quot;);\r\n        }\r\n    \r\n        @BeforeEach\r\n        private void setup() {\r\n            testAppender = new TestAppender(&quot;TestAppender&quot;, null);\r\n    \r\n            final LoggerContext context = logger.getContext();\r\n            final Configuration configuration = context.getConfiguration();\r\n    \r\n            loggerConfig = configuration.getLoggerConfig(logger.getName());\r\n            loggerConfig.setLevel(Level.INFO);\r\n            loggerConfig.addAppender(testAppender,Level.INFO,null);\r\n            testAppender.start();\r\n            context.updateLoggers();\r\n        }\r\n    \r\n        @AfterEach\r\n        void after(){\r\n            testAppender.stop();\r\n            loggerConfig.removeAppender(&quot;TestAppender&quot;);\r\n            final LoggerContext context = logger.getContext();\r\n            context.updateLoggers();\r\n        }\r\n    \r\n        @Plugin( name = &quot;TestAppender&quot;, category = Core.CATEGORY_NAME, elementType = Appender.ELEMENT_TYPE)\r\n        static class TestAppender extends AbstractAppender {\r\n    \r\n            List&lt;LogEvent&gt; events = new ArrayList();\r\n    \r\n            protected TestAppender(String name, Filter filter) {\r\n                super(name, filter, null);\r\n            }\r\n    \r\n            @PluginFactory\r\n            public static TestAppender createAppender(\r\n                    @PluginAttribute(&quot;name&quot;) String name,\r\n                    @PluginElement(&quot;Filter&quot;) Filter filter) {\r\n                return new TestAppender(name, filter);\r\n            }\r\n    \r\n            @Override\r\n            public void append(LogEvent event) {\r\n                events.add(event);\r\n            }\r\n        }\r\n    \r\n        static class ClassUnderTest {\r\n            private static final Logger LOGGER =  (Logger) LogManager.getLogger(ClassUnderTest.class);\r\n            public static void logMessage(){\r\n                LOGGER.info(&quot;Hello Test&quot;);\r\n                LOGGER.debug(&quot;Hello Test&quot;);\r\n            }\r\n        }\r\n    }\r\n\r\nUsing the following maven dependencies\r\n\r\n     &lt;dependency&gt;\r\n     &lt;artifactId&gt;log4j-core&lt;/artifactId&gt;\r\n      &lt;packaging&gt;jar&lt;/packaging&gt;\r\n      &lt;version&gt;2.11.2&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n    &lt;dependency&gt;\r\n        &lt;groupId&gt;org.junit.jupiter&lt;/groupId&gt;\r\n        &lt;artifactId&gt;junit-jupiter-api&lt;/artifactId&gt;\r\n        &lt;version&gt;5.5.0&lt;/version&gt;\r\n        &lt;scope&gt;test&lt;/scope&gt;\r\n    &lt;/dependency&gt;\r\n\r\n  [1]: https://stackoverflow.com/a/15534239/1625740\r\n","title":"How to do a JUnit assert on a message in a logger","body":"<p>I answered a similar question for log4j see <a href=\"https://stackoverflow.com/a/15534239/1625740\">how-can-i-test-with-junit-that-a-warning-was-logged-with-log4</a></p>\n\n<p>This is  newer and example with Log4j2 (tested with 2.11.2) and junit 5;</p>\n\n<pre><code>    package com.whatever.log;\n\n    import org.apache.logging.log4j.Level;\n    import org.apache.logging.log4j.LogManager;\n    import org.apache.logging.log4j.core.Logger;\n    import org.apache.logging.log4j.core.*;\n    import org.apache.logging.log4j.core.appender.AbstractAppender;\n    import org.apache.logging.log4j.core.config.Configuration;\n    import org.apache.logging.log4j.core.config.LoggerConfig;\n    import org.apache.logging.log4j.core.config.plugins.Plugin;\n    import org.apache.logging.log4j.core.config.plugins.PluginAttribute;\n    import org.apache.logging.log4j.core.config.plugins.PluginElement;\n    import org.apache.logging.log4j.core.config.plugins.PluginFactory;\n    import org.junit.jupiter.api.AfterEach;\n    import org.junit.jupiter.api.BeforeEach;\n    import org.junit.jupiter.api.DisplayName;\n    import org.junit.jupiter.api.Test;\n\n    import java.util.ArrayList;\n    import java.util.List;\n    import static org.junit.Assert.*;\n\nclass TestLogger {\n\n    private TestAppender testAppender;\n    private LoggerConfig loggerConfig;\n    private final Logger logger = (Logger)\n            LogManager.getLogger(ClassUnderTest.class);\n\n    @Test\n    @DisplayName(\"Test Log Junit5 and log4j2\")\n    void test() {\n        ClassUnderTest.logMessage();\n        final LogEvent loggingEvent = testAppender.events.get(0);\n        //asset equals 1 because log level is info, change it to debug and\n        //the test will fail\n        assertTrue(testAppender.events.size()==1,\"Unexpected empty log\");\n        assertEquals(Level.INFO,loggingEvent.getLevel(),\"Unexpected log level\");\n        assertEquals(loggingEvent.getMessage().toString()\n                ,\"Hello Test\",\"Unexpected log message\");\n    }\n\n    @BeforeEach\n    private void setup() {\n        testAppender = new TestAppender(\"TestAppender\", null);\n\n        final LoggerContext context = logger.getContext();\n        final Configuration configuration = context.getConfiguration();\n\n        loggerConfig = configuration.getLoggerConfig(logger.getName());\n        loggerConfig.setLevel(Level.INFO);\n        loggerConfig.addAppender(testAppender,Level.INFO,null);\n        testAppender.start();\n        context.updateLoggers();\n    }\n\n    @AfterEach\n    void after(){\n        testAppender.stop();\n        loggerConfig.removeAppender(\"TestAppender\");\n        final LoggerContext context = logger.getContext();\n        context.updateLoggers();\n    }\n\n    @Plugin( name = \"TestAppender\", category = Core.CATEGORY_NAME, elementType = Appender.ELEMENT_TYPE)\n    static class TestAppender extends AbstractAppender {\n\n        List&lt;LogEvent&gt; events = new ArrayList();\n\n        protected TestAppender(String name, Filter filter) {\n            super(name, filter, null);\n        }\n\n        @PluginFactory\n        public static TestAppender createAppender(\n                @PluginAttribute(\"name\") String name,\n                @PluginElement(\"Filter\") Filter filter) {\n            return new TestAppender(name, filter);\n        }\n\n        @Override\n        public void append(LogEvent event) {\n            events.add(event);\n        }\n    }\n\n    static class ClassUnderTest {\n        private static final Logger LOGGER =  (Logger) LogManager.getLogger(ClassUnderTest.class);\n        public static void logMessage(){\n            LOGGER.info(\"Hello Test\");\n            LOGGER.debug(\"Hello Test\");\n        }\n    }\n}\n</code></pre>\n\n<p>Using the following maven dependencies</p>\n\n<pre><code> &lt;dependency&gt;\n &lt;artifactId&gt;log4j-core&lt;/artifactId&gt;\n  &lt;packaging&gt;jar&lt;/packaging&gt;\n  &lt;version&gt;2.11.2&lt;/version&gt;\n&lt;/dependency&gt;\n&lt;dependency&gt;\n    &lt;groupId&gt;org.junit.jupiter&lt;/groupId&gt;\n    &lt;artifactId&gt;junit-jupiter-api&lt;/artifactId&gt;\n    &lt;version&gt;5.5.0&lt;/version&gt;\n    &lt;scope&gt;test&lt;/scope&gt;\n&lt;/dependency&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":13566,"reputation":48835,"user_id":27358,"accept_rate":76,"display_name":"David Moles"},"down_vote_count":1,"up_vote_count":5,"is_accepted":false,"score":4,"last_activity_date":1576005100,"creation_date":1576005100,"answer_id":59273883,"question_id":1827677,"body_markdown":"Note that in Log4J 2.x, the public interface [`org.apache.logging.log4j.Logger`](https://logging.apache.org/log4j/2.x/log4j-api/apidocs/org/apache/logging/log4j/Logger.html) doesn&#39;t include the `setAppender()` and `removeAppender()` methods.\r\n\r\nBut if you&#39;re not doing anything too fancy, you should be able to cast it to the implementation class [`org.apache.logging.log4j.core.Logger`](https://logging.apache.org/log4j/2.x/log4j-core/apidocs/org/apache/logging/log4j/core/Logger.html), which does expose those methods.\r\n\r\nHere&#39;s an example with [Mockito](https://site.mockito.org) and [AssertJ](https://assertj.github.io/doc/):\r\n\r\n```java\r\n// Import the implementation class rather than the API interface\r\nimport org.apache.logging.log4j.core.Logger;\r\n```\r\n\r\n```java\r\n// Cast logger to implementation class to get access to setAppender/removeAppender\r\nLogger log = (Logger) LogManager.getLogger(MyClassUnderTest.class);\r\n\r\n// Set up the mock appender, stubbing some methods Log4J needs internally\r\nAppender appender = mock(Appender.class);\r\nwhen(appender.getName()).thenReturn(&quot;Mock Appender&quot;);\r\nwhen(appender.isStarted()).thenReturn(true);\r\n\r\nlog.addAppender(appender);\r\ntry {\r\n    new MyClassUnderTest().doSomethingThatShouldLogAnError();\r\n} finally {\r\n    log.removeAppender(appender);\r\n}\r\n\r\n// Verify that we got an error with the expected message\r\nArgumentCaptor&lt;LogEvent&gt; logEventCaptor = ArgumentCaptor.forClass(LogEvent.class);\r\nverify(appender).append(logEventCaptor.capture());\r\nLogEvent logEvent = logEventCaptor.getValue();\r\nassertThat(logEvent.getLevel()).isEqualTo(Level.ERROR);\r\nassertThat(logEvent.getMessage().getFormattedMessage()).contains(expectedErrorMessage);\r\n```","title":"How to do a JUnit assert on a message in a logger","body":"<p>Note that in Log4J 2.x, the public interface <a href=\"https://logging.apache.org/log4j/2.x/log4j-api/apidocs/org/apache/logging/log4j/Logger.html\" rel=\"nofollow noreferrer\"><code>org.apache.logging.log4j.Logger</code></a> doesn't include the <code>setAppender()</code> and <code>removeAppender()</code> methods.</p>\n\n<p>But if you're not doing anything too fancy, you should be able to cast it to the implementation class <a href=\"https://logging.apache.org/log4j/2.x/log4j-core/apidocs/org/apache/logging/log4j/core/Logger.html\" rel=\"nofollow noreferrer\"><code>org.apache.logging.log4j.core.Logger</code></a>, which does expose those methods.</p>\n\n<p>Here's an example with <a href=\"https://site.mockito.org\" rel=\"nofollow noreferrer\">Mockito</a> and <a href=\"https://assertj.github.io/doc/\" rel=\"nofollow noreferrer\">AssertJ</a>:</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>// Import the implementation class rather than the API interface\nimport org.apache.logging.log4j.core.Logger;\n</code></pre>\n\n<pre class=\"lang-java prettyprint-override\"><code>// Cast logger to implementation class to get access to setAppender/removeAppender\nLogger log = (Logger) LogManager.getLogger(MyClassUnderTest.class);\n\n// Set up the mock appender, stubbing some methods Log4J needs internally\nAppender appender = mock(Appender.class);\nwhen(appender.getName()).thenReturn(\"Mock Appender\");\nwhen(appender.isStarted()).thenReturn(true);\n\nlog.addAppender(appender);\ntry {\n    new MyClassUnderTest().doSomethingThatShouldLogAnError();\n} finally {\n    log.removeAppender(appender);\n}\n\n// Verify that we got an error with the expected message\nArgumentCaptor&lt;LogEvent&gt; logEventCaptor = ArgumentCaptor.forClass(LogEvent.class);\nverify(appender).append(logEventCaptor.capture());\nLogEvent logEvent = logEventCaptor.getValue();\nassertThat(logEvent.getLevel()).isEqualTo(Level.ERROR);\nassertThat(logEvent.getMessage().getFormattedMessage()).contains(expectedErrorMessage);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3714453,"reputation":1013,"user_id":3091006,"display_name":"aemaem"},"down_vote_count":2,"up_vote_count":68,"is_accepted":false,"score":66,"last_activity_date":1682060032,"creation_date":1583328227,"answer_id":60527144,"question_id":1827677,"body_markdown":"For Junit 5 (Jupiter) Spring&#39;s [OutputCaptureExtension][1] is quite useful. It can be registered for an entire test class or for an individual test method via the `@ExtendWith` annotation. It&#39;s available since Spring Boot 2.2 and is available in the [spring-boot-test][2] artifact.\r\n\r\nExample (taken from javadoc):\r\n\r\n    @ExtendWith(OutputCaptureExtension.class)\r\n    class MyTest {\r\n        @Test\r\n        void test(CapturedOutput output) {\r\n            System.out.println(&quot;ok&quot;);\r\n            assertThat(output).contains(&quot;ok&quot;);\r\n            System.err.println(&quot;error&quot;);\r\n        }\r\n    \r\n        @AfterEach\r\n        void after(CapturedOutput output) {\r\n            assertThat(output.getOut()).contains(&quot;ok&quot;);\r\n            assertThat(output.getErr()).contains(&quot;error&quot;);\r\n        }\r\n    }\r\n\r\n  [1]: https://docs.spring.io/spring-boot/docs/2.2.x/api/org/springframework/boot/test/system/OutputCaptureExtension.html\r\n  [2]: https://mvnrepository.com/artifact/org.springframework.boot/spring-boot-test\r\n","title":"How to do a JUnit assert on a message in a logger","body":"<p>For Junit 5 (Jupiter) Spring's <a href=\"https://docs.spring.io/spring-boot/docs/2.2.x/api/org/springframework/boot/test/system/OutputCaptureExtension.html\" rel=\"noreferrer\">OutputCaptureExtension</a> is quite useful. It can be registered for an entire test class or for an individual test method via the <code>@ExtendWith</code> annotation. It's available since Spring Boot 2.2 and is available in the <a href=\"https://mvnrepository.com/artifact/org.springframework.boot/spring-boot-test\" rel=\"noreferrer\">spring-boot-test</a> artifact.</p>\n<p>Example (taken from javadoc):</p>\n<pre><code>@ExtendWith(OutputCaptureExtension.class)\nclass MyTest {\n    @Test\n    void test(CapturedOutput output) {\n        System.out.println(&quot;ok&quot;);\n        assertThat(output).contains(&quot;ok&quot;);\n        System.err.println(&quot;error&quot;);\n    }\n\n    @AfterEach\n    void after(CapturedOutput output) {\n        assertThat(output.getOut()).contains(&quot;ok&quot;);\n        assertThat(output.getErr()).contains(&quot;error&quot;);\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":9107988,"reputation":3190,"user_id":6777695,"display_name":"Hakan54"},"down_vote_count":0,"up_vote_count":21,"is_accepted":false,"score":21,"last_activity_date":1680426567,"creation_date":1598181178,"answer_id":63546258,"question_id":1827677,"body_markdown":"I also ran into the same challanged and ended up at this page. Although I am 11 years too late to answers the question, I thought maybe it could be still usefull for others. I found the answer of `davidxxx` with Logback and the ListAppander very usefull. I used the same configuration for multiple projects, however it was not so fun to copy/paste it and maintaining all the version when I needed to changes something. I thought it would be better to make a library out of it and contribute back to the community. It works with SLFJ4, Apache Log4j2, Java Util Logging, JBoss Logging, Google Flogger and with Lombok annotations. Please have a look here: [LogCaptor][1] for detailed examples and how to add it to your project.\r\n\r\nExample situation:\r\n```\r\npublic class FooService {\r\n\r\n    private static final Logger LOGGER = LoggerFactory.getLogger(FooService.class);\r\n\r\n    public void sayHello() {\r\n        LOGGER.warn(&quot;Congratulations, you are pregnant!&quot;);\r\n    }\r\n\r\n}\r\n```\r\n\r\nExample unit test with usage of LogCaptor:\r\n```\r\nimport nl.altindag.log.LogCaptor;\r\nimport org.junit.jupiter.api.Test;\r\n\r\nimport static org.assertj.core.api.Assertions.assertThat;\r\n\r\npublic class FooServiceTest {\r\n\r\n    @Test\r\n    public void sayHelloShouldLogWarnMessage() {\r\n        LogCaptor logCaptor = LogCaptor.forClass(FooService.class);\r\n\r\n        FooService fooService = new FooService();\r\n        fooService.sayHello();\r\n\r\n        assertThat(logCaptor.getWarnLogs())\r\n            .contains(&quot;Congratulations, you are pregnant!&quot;);\r\n    }\r\n}\r\n```\r\n\r\nI wasn&#39;t quite sure if I should post this here, because it could also be seen as a way to promote &quot;my library&quot; but I thought it could be helpful for developers who have the same challenges.\r\n\r\n  [1]: https://github.com/Hakky54/log-captor","title":"How to do a JUnit assert on a message in a logger","body":"<p>I also ran into the same challanged and ended up at this page. Although I am 11 years too late to answers the question, I thought maybe it could be still usefull for others. I found the answer of <code>davidxxx</code> with Logback and the ListAppander very usefull. I used the same configuration for multiple projects, however it was not so fun to copy/paste it and maintaining all the version when I needed to changes something. I thought it would be better to make a library out of it and contribute back to the community. It works with SLFJ4, Apache Log4j2, Java Util Logging, JBoss Logging, Google Flogger and with Lombok annotations. Please have a look here: <a href=\"https://github.com/Hakky54/log-captor\" rel=\"noreferrer\">LogCaptor</a> for detailed examples and how to add it to your project.</p>\n<p>Example situation:</p>\n<pre><code>public class FooService {\n\n    private static final Logger LOGGER = LoggerFactory.getLogger(FooService.class);\n\n    public void sayHello() {\n        LOGGER.warn(&quot;Congratulations, you are pregnant!&quot;);\n    }\n\n}\n</code></pre>\n<p>Example unit test with usage of LogCaptor:</p>\n<pre><code>import nl.altindag.log.LogCaptor;\nimport org.junit.jupiter.api.Test;\n\nimport static org.assertj.core.api.Assertions.assertThat;\n\npublic class FooServiceTest {\n\n    @Test\n    public void sayHelloShouldLogWarnMessage() {\n        LogCaptor logCaptor = LogCaptor.forClass(FooService.class);\n\n        FooService fooService = new FooService();\n        fooService.sayHello();\n\n        assertThat(logCaptor.getWarnLogs())\n            .contains(&quot;Congratulations, you are pregnant!&quot;);\n    }\n}\n</code></pre>\n<p>I wasn't quite sure if I should post this here, because it could also be seen as a way to promote &quot;my library&quot; but I thought it could be helpful for developers who have the same challenges.</p>\n"},{"tags":[],"owner":{"account_id":3805231,"reputation":744,"user_id":3157855,"accept_rate":45,"display_name":"user3157855"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1602270316,"creation_date":1602270316,"answer_id":64285930,"question_id":1827677,"body_markdown":"You don&#39;t need to rely on hardcoded static global Loggers in your class implementation, you can provide a default logger in the default constructor and then use a specific constructor to set a reference to the provided logger.\r\n\r\n    class MyClassToTest {\r\n    \tprivate final Logger logger;\r\n    \t\r\n    \tpublic MyClassToTest() {\r\n    \t  this(SomeStatic.logger);\r\n    \t};\r\n    \t\r\n    \tMyClassToTest(Logger logger) {\r\n    \t  this.logger = logger;\r\n    \t};\r\n    \t\r\n    \tpublic void someOperation() {\r\n    \t\tlogger.warn(&quot;warning message&quot;);\r\n    \t\t// ...\r\n    \t};\r\n    };\r\n    \r\n    class MyClassToTestTest {\r\n    \t\r\n    \t@Test\r\n    \tpublic warnCalled() {\r\n    \t\tLogger loggerMock = mock(Logger.class);\r\n    \t\tMyClassTest myClassToTest = new MyClassToTest(logger);\r\n    \t\tmyClassToTest.someOperation();\r\n    \t\tverify(loggerMock).warn(anyString());\r\n    \t};\r\n    }","title":"How to do a JUnit assert on a message in a logger","body":"<p>You don't need to rely on hardcoded static global Loggers in your class implementation, you can provide a default logger in the default constructor and then use a specific constructor to set a reference to the provided logger.</p>\n<pre><code>class MyClassToTest {\n    private final Logger logger;\n    \n    public MyClassToTest() {\n      this(SomeStatic.logger);\n    };\n    \n    MyClassToTest(Logger logger) {\n      this.logger = logger;\n    };\n    \n    public void someOperation() {\n        logger.warn(&quot;warning message&quot;);\n        // ...\n    };\n};\n\nclass MyClassToTestTest {\n    \n    @Test\n    public warnCalled() {\n        Logger loggerMock = mock(Logger.class);\n        MyClassTest myClassToTest = new MyClassToTest(logger);\n        myClassToTest.someOperation();\n        verify(loggerMock).warn(anyString());\n    };\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":7025825,"reputation":1450,"user_id":5383238,"accept_rate":60,"display_name":"Abdur Rahman"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1617601909,"creation_date":1617601909,"answer_id":66948790,"question_id":1827677,"body_markdown":"In my case I solved the same issue as bellow:\r\n\r\n    Logger root = (Logger) LoggerFactory.getLogger(CSVTasklet.class); //CSVTasklet is my target class\r\n        final Appender mockAppender = mock(Appender.class);\r\n        root.addAppender(mockAppender); \r\n    \r\n    verify(mockAppender).doAppend(argThat((ArgumentMatcher) argument -&gt; ((LoggingEvent) argument).getMessage().contains(&quot;No projects.&quot;))); // I checked &quot;No projects.&quot; in the log\r\n","title":"How to do a JUnit assert on a message in a logger","body":"<p>In my case I solved the same issue as bellow:</p>\n<pre><code>Logger root = (Logger) LoggerFactory.getLogger(CSVTasklet.class); //CSVTasklet is my target class\n    final Appender mockAppender = mock(Appender.class);\n    root.addAppender(mockAppender); \n\nverify(mockAppender).doAppend(argThat((ArgumentMatcher) argument -&gt; ((LoggingEvent) argument).getMessage().contains(&quot;No projects.&quot;))); // I checked &quot;No projects.&quot; in the log\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3065469,"reputation":1545,"user_id":2597267,"display_name":"Borislav Markov"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1618865026,"creation_date":1618865026,"answer_id":67169120,"question_id":1827677,"body_markdown":"Check this library [https://github.com/Hakky54/log-captor][1]\r\n\r\nInclude in your maven file the reference for the library:\r\n```\r\n&lt;dependency&gt;\r\n    &lt;groupId&gt;io.github.hakky54&lt;/groupId&gt;\r\n    &lt;artifactId&gt;logcaptor&lt;/artifactId&gt;\r\n    &lt;version&gt;2.5.0&lt;/version&gt;\r\n    &lt;scope&gt;test&lt;/scope&gt;\r\n&lt;/dependency&gt;\r\n```\r\n\r\nIn java code test method you should include this:\r\n```java\r\nLogCaptor logCaptor = LogCaptor.forClass(MyClass.class);\r\n\r\n // do the test logic....\r\n\r\nassertThat(logCaptor.getLogs()).contains(&quot;Some log to assert&quot;);\r\n\r\n```\r\n  [1]: https://github.com/Hakky54/log-captor","title":"How to do a JUnit assert on a message in a logger","body":"<p>Check this library <a href=\"https://github.com/Hakky54/log-captor\" rel=\"nofollow noreferrer\">https://github.com/Hakky54/log-captor</a></p>\n<p>Include in your maven file the reference for the library:</p>\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;io.github.hakky54&lt;/groupId&gt;\n    &lt;artifactId&gt;logcaptor&lt;/artifactId&gt;\n    &lt;version&gt;2.5.0&lt;/version&gt;\n    &lt;scope&gt;test&lt;/scope&gt;\n&lt;/dependency&gt;\n</code></pre>\n<p>In java code test method you should include this:</p>\n<pre class=\"lang-java prettyprint-override\"><code>LogCaptor logCaptor = LogCaptor.forClass(MyClass.class);\n\n // do the test logic....\n\nassertThat(logCaptor.getLogs()).contains(&quot;Some log to assert&quot;);\n\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2836130,"reputation":297,"user_id":2436718,"accept_rate":38,"display_name":"Sergio Figueras"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1634040955,"creation_date":1634040160,"answer_id":69540203,"question_id":1827677,"body_markdown":"Unit testing by adding an Appender does not really test the Logger&#39;s configuration. So, I think that it&#39;s one of the unique cases in which unit tests do not bring that much value, but an integration test brings a lot of value *(especially if your logging has some auditing purposes)*.\r\n\r\nIn order to create an integration test for it, let us suppose that you are running with a simple `ConsoleAppender` and want to test its output. Then, you should test how the message is written to its own `ByteArrayOutputStream` from `System.out`.\r\n\r\nIn that sense, I would do the following (I&#39;m using JUnit 5):\r\n\r\n```\r\npublic class Slf4jAuditLoggerTest {\r\n\r\n\tprivate final ByteArrayOutputStream outContent = new ByteArrayOutputStream();\r\n\r\n\t@BeforeEach\r\n\tpublic void beforeEach() {\r\n\t\tSystem.setOut(new PrintStream(outContent));\r\n\t}\r\n``` \r\n\r\nIn that way, you are able to test its output by simply:\r\n```\r\n\t@Test\r\n\tpublic void myTest() {\r\n\t\t// Given...\r\n\t\t// When...\r\n\t\t// Then\r\n\t\tassertTrue(outContent.toString().contains(&quot;[INFO] My formatted string from Logger&quot;));\r\n\t}\r\n```\r\n\r\nIf you do so, you will bring much more value to your project and will not need to using an in-memory implementation, create a new Appender, or whatsoever.","title":"How to do a JUnit assert on a message in a logger","body":"<p>Unit testing by adding an Appender does not really test the Logger's configuration. So, I think that it's one of the unique cases in which unit tests do not bring that much value, but an integration test brings a lot of value <em>(especially if your logging has some auditing purposes)</em>.</p>\n<p>In order to create an integration test for it, let us suppose that you are running with a simple <code>ConsoleAppender</code> and want to test its output. Then, you should test how the message is written to its own <code>ByteArrayOutputStream</code> from <code>System.out</code>.</p>\n<p>In that sense, I would do the following (I'm using JUnit 5):</p>\n<pre><code>public class Slf4jAuditLoggerTest {\n\n    private final ByteArrayOutputStream outContent = new ByteArrayOutputStream();\n\n    @BeforeEach\n    public void beforeEach() {\n        System.setOut(new PrintStream(outContent));\n    }\n</code></pre>\n<p>In that way, you are able to test its output by simply:</p>\n<pre><code>    @Test\n    public void myTest() {\n        // Given...\n        // When...\n        // Then\n        assertTrue(outContent.toString().contains(&quot;[INFO] My formatted string from Logger&quot;));\n    }\n</code></pre>\n<p>If you do so, you will bring much more value to your project and will not need to using an in-memory implementation, create a new Appender, or whatsoever.</p>\n"},{"tags":[],"owner":{"account_id":13215461,"reputation":326,"user_id":9544181,"display_name":"Mehmet Pekdemir"},"down_vote_count":2,"up_vote_count":8,"is_accepted":false,"score":6,"last_activity_date":1639043931,"creation_date":1639043931,"answer_id":70287902,"question_id":1827677,"body_markdown":"Easiest way\r\n\r\n      @ExtendWith(OutputCaptureExtension.class)\r\n      class MyTestClass { \r\n        \r\n              @Test\r\n              void my_test_method(CapturedOutput output) {\r\n                   assertThat(output).contains(&quot;my test log.&quot;);\r\n              }\r\n      }","title":"How to do a JUnit assert on a message in a logger","body":"<p>Easiest way</p>\n<pre><code>  @ExtendWith(OutputCaptureExtension.class)\n  class MyTestClass { \n    \n          @Test\n          void my_test_method(CapturedOutput output) {\n               assertThat(output).contains(&quot;my test log.&quot;);\n          }\n  }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3430499,"reputation":1614,"user_id":2875073,"accept_rate":88,"display_name":"Jonn"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1690029002,"creation_date":1690029002,"answer_id":76743785,"question_id":1827677,"body_markdown":"For anyone using Google&#39;s [Flogger](https://google.github.io/flogger/) logging API, here&#39;s how you can write a logging backend that can be used in tests:\r\n\r\n```kt\r\nimport com.google.common.flogger.backend.LogData\r\nimport com.google.common.flogger.backend.LoggerBackend\r\nimport com.google.common.flogger.backend.system.BackendFactory\r\nimport java.lang.RuntimeException\r\nimport java.util.logging.Level\r\nimport java.util.logging.Level.SEVERE\r\nimport java.util.logging.Level.WARNING\r\n\r\n/** Stores information about logs that occurred during test execution. */\r\nclass LogCollection {\r\n  val messages = mutableListOf&lt;String&gt;()\r\n}\r\n\r\nclass TestLoggingBackendFactory : BackendFactory() {\r\n  /** Gets a singleton logging backend. */\r\n  override fun create(p0: String?) = TestLoggingBackend\r\n}\r\n\r\n/** Flogger logging backend that listens to new logs during the test. */\r\nobject TestLoggingBackend : LoggerBackend() {\r\n  val logs = LogCollection()\r\n\r\n  override fun getLoggerName(): String = &quot;TestLoggingBackend&quot;\r\n\r\n  override fun isLoggable(level: Level): Boolean = level in setOf(SEVERE, WARNING)\r\n\r\n  override fun log(logData: LogData) {\r\n    handleError(e = null, logData)\r\n  }\r\n\r\n  override fun handleError(e: RuntimeException?, logData: LogData) {\r\n    logs.messages.add(logData.literalArgument.toString())\r\n  }\r\n}\r\n```\r\n\r\nThen somewhere you will need to set the system property\r\n\r\n```\r\nsystemProperty(\r\n  &quot;flogger.backend_factory&quot;,\r\n  &quot;my.package.here.TestLoggingBackendFactory#getInstance&quot;\r\n)\r\n```\r\n\r\nand now you can access all of the logs that occur via `TestLoggingBackend.logs`.\r\n\r\nI took this a step further and turned this into a JUnit rule with [Truth](https://github.com/google/truth) assertions, which you can see here: [`LoggingRule.kt`](https://github.com/hopskipnfall/EmuLinker-K/blob/master/emulinker/src/test/java/org/emulinker/testing/LoggingRule.kt)","title":"How to do a JUnit assert on a message in a logger","body":"<p>For anyone using Google's <a href=\"https://google.github.io/flogger/\" rel=\"nofollow noreferrer\">Flogger</a> logging API, here's how you can write a logging backend that can be used in tests:</p>\n<pre><code>import com.google.common.flogger.backend.LogData\nimport com.google.common.flogger.backend.LoggerBackend\nimport com.google.common.flogger.backend.system.BackendFactory\nimport java.lang.RuntimeException\nimport java.util.logging.Level\nimport java.util.logging.Level.SEVERE\nimport java.util.logging.Level.WARNING\n\n/** Stores information about logs that occurred during test execution. */\nclass LogCollection {\n  val messages = mutableListOf&lt;String&gt;()\n}\n\nclass TestLoggingBackendFactory : BackendFactory() {\n  /** Gets a singleton logging backend. */\n  override fun create(p0: String?) = TestLoggingBackend\n}\n\n/** Flogger logging backend that listens to new logs during the test. */\nobject TestLoggingBackend : LoggerBackend() {\n  val logs = LogCollection()\n\n  override fun getLoggerName(): String = &quot;TestLoggingBackend&quot;\n\n  override fun isLoggable(level: Level): Boolean = level in setOf(SEVERE, WARNING)\n\n  override fun log(logData: LogData) {\n    handleError(e = null, logData)\n  }\n\n  override fun handleError(e: RuntimeException?, logData: LogData) {\n    logs.messages.add(logData.literalArgument.toString())\n  }\n}\n</code></pre>\n<p>Then somewhere you will need to set the system property</p>\n<pre><code>systemProperty(\n  &quot;flogger.backend_factory&quot;,\n  &quot;my.package.here.TestLoggingBackendFactory#getInstance&quot;\n)\n</code></pre>\n<p>and now you can access all of the logs that occur via <code>TestLoggingBackend.logs</code>.</p>\n<p>I took this a step further and turned this into a JUnit rule with <a href=\"https://github.com/google/truth\" rel=\"nofollow noreferrer\">Truth</a> assertions, which you can see here: <a href=\"https://github.com/hopskipnfall/EmuLinker-K/blob/master/emulinker/src/test/java/org/emulinker/testing/LoggingRule.kt\" rel=\"nofollow noreferrer\"><code>LoggingRule.kt</code></a></p>\n"},{"tags":[],"owner":{"account_id":2158186,"reputation":182,"user_id":1912944,"display_name":"David"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1694957550,"creation_date":1694957550,"answer_id":77122023,"question_id":1827677,"body_markdown":"A new option for logs testing is my recently released &quot;flogger-testing&quot; library (https://github.com/hagbard/flogger-testing). Don&#39;t be fooled by the name as it can be used (with minor degradation in functionality) with Log4J and JDK logging. It supports both JUnit4 rules and JUnit5 extensions with the exact same assertion API for both.\r\n\r\nIt does not require arguably harmful practices, like forcing you to inject mocked loggers into code, and works perfectly with `static final` logger instances by intercepting the logs that are being emitted (so your tests are closer to testing what appears in log files).\r\n\r\nAdding logging tests for a class is as easy as (JUnit5):\r\n\r\n```java\r\n  @RegisterExtension\r\n  public final FloggerTestExtension logs = FloggerTestExtension.forClassUnderTest(INFO);\r\n```\r\n\r\nand the powerful fluent API is used like:\r\n\r\n```java\r\n@Test\r\npublic void testLoadData_missingFile() {\r\n  // Do normal assertion about returned values.\r\n  var result = ClassUnderTest.loadData(MISSING_FILE);\r\n  assertThat(result).isEmpty();\r\n\r\n  // Assert that we saw the expected warning ...\r\n  LogEntry firstWarning = logs.assertLogs().withLevel(WARNING).getMatch(0);\r\n  assertThat(firstWarning).hasMessageContaining(&quot;No such file&quot;, MISSING_FILE);\r\n  assertThat(firstWarning).hasCause(IOException.class);\r\n  // ... and assert that nothing seemed to go wrong before the first warning.\r\n  logs.assertLogs(before(firstWarning)).never().haveCause();\r\n}\r\n```\r\n\r\nIt has lots of features not present in any other logs testing APIs mentioned in this thread:\r\n* structured metadata testing\r\n* setup common assertions for all tests to enforce logs policy\r\n* override log levels in a single test (e.g. to ensure enabling finest logging causes no issues)\r\n* bypassing rate limiting in tests (Flogger only)\r\n* per-thread metadata to allow logs tests to reliably run in parallel (Flogger only)\r\n\r\nWrite more robust logging tests with a readable, powerful API.","title":"How to do a JUnit assert on a message in a logger","body":"<p>A new option for logs testing is my recently released &quot;flogger-testing&quot; library (<a href=\"https://github.com/hagbard/flogger-testing\" rel=\"nofollow noreferrer\">https://github.com/hagbard/flogger-testing</a>). Don't be fooled by the name as it can be used (with minor degradation in functionality) with Log4J and JDK logging. It supports both JUnit4 rules and JUnit5 extensions with the exact same assertion API for both.</p>\n<p>It does not require arguably harmful practices, like forcing you to inject mocked loggers into code, and works perfectly with <code>static final</code> logger instances by intercepting the logs that are being emitted (so your tests are closer to testing what appears in log files).</p>\n<p>Adding logging tests for a class is as easy as (JUnit5):</p>\n<pre class=\"lang-java prettyprint-override\"><code>  @RegisterExtension\n  public final FloggerTestExtension logs = FloggerTestExtension.forClassUnderTest(INFO);\n</code></pre>\n<p>and the powerful fluent API is used like:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Test\npublic void testLoadData_missingFile() {\n  // Do normal assertion about returned values.\n  var result = ClassUnderTest.loadData(MISSING_FILE);\n  assertThat(result).isEmpty();\n\n  // Assert that we saw the expected warning ...\n  LogEntry firstWarning = logs.assertLogs().withLevel(WARNING).getMatch(0);\n  assertThat(firstWarning).hasMessageContaining(&quot;No such file&quot;, MISSING_FILE);\n  assertThat(firstWarning).hasCause(IOException.class);\n  // ... and assert that nothing seemed to go wrong before the first warning.\n  logs.assertLogs(before(firstWarning)).never().haveCause();\n}\n</code></pre>\n<p>It has lots of features not present in any other logs testing APIs mentioned in this thread:</p>\n<ul>\n<li>structured metadata testing</li>\n<li>setup common assertions for all tests to enforce logs policy</li>\n<li>override log levels in a single test (e.g. to ensure enabling finest logging causes no issues)</li>\n<li>bypassing rate limiting in tests (Flogger only)</li>\n<li>per-thread metadata to allow logs tests to reliably run in parallel (Flogger only)</li>\n</ul>\n<p>Write more robust logging tests with a readable, powerful API.</p>\n"}],"owner":{"account_id":77676,"reputation":3587,"user_id":221538,"display_name":"Jon"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":395963,"favorite_count":0,"down_vote_count":0,"up_vote_count":310,"accepted_answer_id":1834789,"answer_count":33,"score":310,"last_activity_date":1694957550,"creation_date":1259688382,"question_id":1827677,"body_markdown":"I have some code-under-test that calls on a Java logger to report its status.\r\nIn the JUnit test code, I would like to verify that the correct log entry was made in this logger. Something along the following lines:\r\n\r\n    methodUnderTest(bool x){\r\n        if(x)\r\n            logger.info(&quot;x happened&quot;)\r\n    }\r\n\r\n    @Test tester(){\r\n        // perhaps setup a logger first.\r\n        methodUnderTest(true);\r\n        assertXXXXXX(loggedLevel(),Level.INFO);\r\n    }\r\n\r\nI suppose that this could be done with a specially adapted logger (or handler, or formatter), but I would prefer to re-use a solution that already exists. (And, to be honest, it is not clear to me how to get at the logRecord from a logger, but suppose that that&#39;s possible.)\r\n","title":"How to do a JUnit assert on a message in a logger","body":"<p>I have some code-under-test that calls on a Java logger to report its status.\nIn the JUnit test code, I would like to verify that the correct log entry was made in this logger. Something along the following lines:</p>\n\n<pre><code>methodUnderTest(bool x){\n    if(x)\n        logger.info(\"x happened\")\n}\n\n@Test tester(){\n    // perhaps setup a logger first.\n    methodUnderTest(true);\n    assertXXXXXX(loggedLevel(),Level.INFO);\n}\n</code></pre>\n\n<p>I suppose that this could be done with a specially adapted logger (or handler, or formatter), but I would prefer to re-use a solution that already exists. (And, to be honest, it is not clear to me how to get at the logRecord from a logger, but suppose that that's possible.)</p>\n"},{"tags":["java","ajax","json","struts2","gson"],"comments":[{"owner":{"account_id":2366187,"reputation":60152,"user_id":2071828,"accept_rate":88,"display_name":"Boris the Spider"},"score":0,"creation_date":1405005763,"post_id":24680369,"comment_id":38266491,"body_markdown":"You would use the [Struts2-json-plugin](http://struts.apache.org/release/2.2.x/docs/json-plugin.html) and the  `root` property. Don&#39;t reinvent the wheel.","body":"You would use the <a href=\"http://struts.apache.org/release/2.2.x/docs/json-plugin.html\" rel=\"nofollow noreferrer\">Struts2-json-plugin</a> and the  <code>root</code> property. Don&#39;t reinvent the wheel."}],"answers":[{"tags":[],"owner":{"account_id":698222,"reputation":50202,"user_id":573032,"accept_rate":77,"display_name":"Roman C"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1694957457,"creation_date":1405007617,"answer_id":24681048,"question_id":24680369,"body_markdown":"You can return `stream` result\r\n\r\n&lt;!-- language: lang-xml --&gt;\r\n\r\n    &lt;action name=&quot;getProduct&quot; class=&quot;com.xyz.action.AjaxAction&quot;&gt;\r\n        &lt;result name=&quot;success&quot; type=&quot;stream&quot;&gt;\r\n          &lt;param name=&quot;contentType&quot;&gt;application/json&lt;/param&gt;\r\n        &lt;/result&gt;\r\n    &lt;/action&gt;\r\n\r\nand in the action\r\n\r\n    private InputStream inputStream;\r\n\r\n    //getter here\r\n    public InputStream getInputStream () {\r\n      return inputStream;\r\n    }\r\n\r\n\r\n    public String execute(){\r\n      productList= service.getProductList();//this method is getting list of products\r\n\r\n      Gson gson = new Gson();\r\n      JsonElement element = gson.toJsonTree(productList,\r\n            new TypeToken&lt;List&lt;Product&gt;&gt;() {\r\n            }.getType());\r\n      JsonArray jsonArray = element.getAsJsonArray();\r\n      inputStream = new ByteArrayInputStream(jsonArray.toString().getBytes());\r\n      return &quot;success&quot;;\r\n    }","title":"How to exclude param from response in struts 2 and send the object we want?","body":"<p>You can return <code>stream</code> result</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;action name=&quot;getProduct&quot; class=&quot;com.xyz.action.AjaxAction&quot;&gt;\n    &lt;result name=&quot;success&quot; type=&quot;stream&quot;&gt;\n      &lt;param name=&quot;contentType&quot;&gt;application/json&lt;/param&gt;\n    &lt;/result&gt;\n&lt;/action&gt;\n</code></pre>\n<p>and in the action</p>\n<pre><code>private InputStream inputStream;\n\n//getter here\npublic InputStream getInputStream () {\n  return inputStream;\n}\n\n\npublic String execute(){\n  productList= service.getProductList();//this method is getting list of products\n\n  Gson gson = new Gson();\n  JsonElement element = gson.toJsonTree(productList,\n        new TypeToken&lt;List&lt;Product&gt;&gt;() {\n        }.getType());\n  JsonArray jsonArray = element.getAsJsonArray();\n  inputStream = new ByteArrayInputStream(jsonArray.toString().getBytes());\n  return &quot;success&quot;;\n}\n</code></pre>\n"}],"owner":{"account_id":2427873,"reputation":69,"user_id":2119437,"accept_rate":57,"display_name":"Hitesh"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1590,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":24681048,"answer_count":1,"score":1,"last_activity_date":1694957457,"creation_date":1405005627,"question_id":24680369,"body_markdown":"I want JSON result for Ajax request, but my requirement is to send only the `ArrayList` of object and exclude some of the parameter present in action class. So how to do this?\r\n\r\nThis is my action class\r\n\r\n    public class AjaxAction{\r\n        private  int color;\r\n        private  String prodId;\r\n        private List&lt;Product&gt; productList;\r\n       \r\n     \r\n        public String execute(){\r\n        productList= service.getProductList();//this method is getting list of products\r\n        HttpServletResponse response = ServletActionContext.getResponse();\r\n    \r\n        Gson gson = new Gson();\r\n    \tJsonElement element = gson.toJsonTree(productList,\r\n    \t\t\tnew TypeToken&lt;List&lt;Product&gt;&gt;() {\r\n    \t\t\t}.getType());\r\n    \tJsonArray jsonArray = element.getAsJsonArray();\r\n    \tresponse.setContentType(&quot;application/json&quot;);\r\n    \ttry {\r\n    \t\tresponse.getWriter().print(jsonArray);\r\n    \t} catch (IOException e) {\r\n    \t\te.printStackTrace();\r\n    \t}\r\n        return &quot;success&quot;;\r\n    }\r\n\r\nAnd my `struts.xml` file is:\r\n\r\n&lt;!-- language: lang-xml --&gt;\r\n\r\n    &lt;package name=&quot;json&quot; namespace=&quot;/&quot; extends=&quot;json-default&quot;&gt;\r\n\t\t&lt;interceptors&gt;\r\n\t\t\t&lt;interceptor-stack name=&quot;mystack&quot;&gt;\r\n\t\t\t\t&lt;interceptor-ref name=&quot;defaultStack&quot; /&gt;\r\n\t\t\t\t&lt;interceptor-ref name=&quot;json&quot;&gt;\r\n\t\t\t\t\t&lt;param name=&quot;enableSMD&quot;&gt;true&lt;/param&gt;\r\n\t\t\t\t&lt;/interceptor-ref&gt;\r\n\t\t\t&lt;/interceptor-stack&gt;\r\n\t\t&lt;/interceptors&gt;\r\n\t\t&lt;action name=&quot;getProduct&quot; class=&quot;com.xyz.action.AjaxAction&quot;&gt;\r\n\t\t\t&lt;result name=&quot;success&quot; type=&quot;json&quot; /&gt;\r\n\t        &lt;param name=&quot;root&quot;&gt;productList&lt;/param&gt;\r\n\t\t&lt;/action&gt;\r\n\t&lt;/package&gt;\r\n\r\nSo when i check my console data returned from action is having other variable in it. How to avoid that?\r\n","title":"How to exclude param from response in struts 2 and send the object we want?","body":"<p>I want JSON result for Ajax request, but my requirement is to send only the <code>ArrayList</code> of object and exclude some of the parameter present in action class. So how to do this?</p>\n<p>This is my action class</p>\n<pre><code>public class AjaxAction{\n    private  int color;\n    private  String prodId;\n    private List&lt;Product&gt; productList;\n   \n \n    public String execute(){\n    productList= service.getProductList();//this method is getting list of products\n    HttpServletResponse response = ServletActionContext.getResponse();\n\n    Gson gson = new Gson();\n    JsonElement element = gson.toJsonTree(productList,\n            new TypeToken&lt;List&lt;Product&gt;&gt;() {\n            }.getType());\n    JsonArray jsonArray = element.getAsJsonArray();\n    response.setContentType(&quot;application/json&quot;);\n    try {\n        response.getWriter().print(jsonArray);\n    } catch (IOException e) {\n        e.printStackTrace();\n    }\n    return &quot;success&quot;;\n}\n</code></pre>\n<p>And my <code>struts.xml</code> file is:</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;package name=&quot;json&quot; namespace=&quot;/&quot; extends=&quot;json-default&quot;&gt;\n    &lt;interceptors&gt;\n        &lt;interceptor-stack name=&quot;mystack&quot;&gt;\n            &lt;interceptor-ref name=&quot;defaultStack&quot; /&gt;\n            &lt;interceptor-ref name=&quot;json&quot;&gt;\n                &lt;param name=&quot;enableSMD&quot;&gt;true&lt;/param&gt;\n            &lt;/interceptor-ref&gt;\n        &lt;/interceptor-stack&gt;\n    &lt;/interceptors&gt;\n    &lt;action name=&quot;getProduct&quot; class=&quot;com.xyz.action.AjaxAction&quot;&gt;\n        &lt;result name=&quot;success&quot; type=&quot;json&quot; /&gt;\n        &lt;param name=&quot;root&quot;&gt;productList&lt;/param&gt;\n    &lt;/action&gt;\n&lt;/package&gt;\n</code></pre>\n<p>So when i check my console data returned from action is having other variable in it. How to avoid that?</p>\n"},{"tags":["java","svg","png","apache-batik"],"comments":[{"owner":{"account_id":1029387,"reputation":119820,"user_id":1038015,"display_name":"Robert Longson"},"score":6,"creation_date":1694956365,"post_id":77121934,"comment_id":135956799,"body_markdown":"Batik can [transcode SVG to various raster formats](https://xmlgraphics.apache.org/batik/using/transcoder.html). You&#39;re trying to do it backwards and it won&#39;t do that.","body":"Batik can <a href=\"https://xmlgraphics.apache.org/batik/using/transcoder.html\" rel=\"nofollow noreferrer\">transcode SVG to various raster formats</a>. You&#39;re trying to do it backwards and it won&#39;t do that."},{"owner":{"account_id":74704,"reputation":11534,"user_id":214525,"accept_rate":100,"display_name":"f1sh"},"score":0,"creation_date":1694956433,"post_id":77121934,"comment_id":135956804,"body_markdown":"According to the [docs](https://xmlgraphics.apache.org/batik/using/transcoder.html): &quot;which lets you rasterize an SVG document fragment to a raster image such as JPEG, PNG or TIFF.&quot; - svg is the input, not the output.","body":"According to the <a href=\"https://xmlgraphics.apache.org/batik/using/transcoder.html\" rel=\"nofollow noreferrer\">docs</a>: &quot;which lets you rasterize an SVG document fragment to a raster image such as JPEG, PNG or TIFF.&quot; - svg is the input, not the output."},{"owner":{"account_id":465573,"reputation":192694,"user_id":869736,"accept_rate":82,"display_name":"Louis Wasserman"},"score":0,"creation_date":1694959946,"post_id":77121934,"comment_id":135957182,"body_markdown":"If converting png to svg is even possible, it&#39;ll be much harder than this.  It isn&#39;t, though, really.","body":"If converting png to svg is even possible, it&#39;ll be much harder than this.  It isn&#39;t, though, really."},{"owner":{"account_id":1531514,"reputation":26639,"user_id":1428606,"accept_rate":71,"display_name":"Harald K"},"score":0,"creation_date":1695018864,"post_id":77121934,"comment_id":135962639,"body_markdown":"You can always create an SVG with an embedded PNG (or other supported raster format), but it&#39;s basically useless...","body":"You can always create an SVG with an embedded PNG (or other supported raster format), but it&#39;s basically useless..."}],"owner":{"account_id":2589371,"reputation":3454,"user_id":3655069,"accept_rate":25,"display_name":"Sun"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":49,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1694956014,"creation_date":1694956014,"question_id":77121934,"body_markdown":"I am trying like this:\r\n\r\n    public class ImageToSVGConverterTool {\r\n    \r\n        public static void main(String[] args) {\r\n            String inputImagePath = &quot;C:\\\\Users\\\\path\\\\facebook.png&quot;; // Replace with the path to your input image\r\n            String outputSVGPath = &quot;C:\\\\Users\\\\path\\\\OUTPUT\\\\output_image.svg&quot;; // Replace with the desired output SVG file path\r\n            //FileUtils.createNewFile(outputSVGPath);\r\n            System.out.println(FileUtils.isImageFile(outputSVGPath));\r\n            System.out.println(new File(outputSVGPath).isFile());\r\n            try {\r\n                convertImageToSVG(inputImagePath, outputSVGPath);\r\n                System.out.println(&quot;Image converted to SVG successfully.&quot;);\r\n            } catch (Exception e) {\r\n                e.printStackTrace();\r\n            }\r\n        }\r\n    \r\n        public static void convertImageToSVG(String inputImagePath, String outputSVGPath)\r\n                throws IOException, TranscoderException {\r\n            File inputFile = new File(inputImagePath);\r\n            File outputFile = new File(outputSVGPath);\r\n    \r\n            ImageTranscoder transcoder = new PNGTranscoder(); // Change to PNGTranscoder if input is PNG\r\n            //ImageTranscoder transcoder = new JPEGTranscoder(); // Change to PNGTranscoder if input is PNG\r\n    \r\n            // Set the output file\r\n            FileOutputStream outputStream = new FileOutputStream(outputFile);\r\n            TranscoderOutput transcoderOutput = new TranscoderOutput(outputStream);\r\n    \r\n            // Set the input image\r\n            TranscoderInput transcoderInput = new TranscoderInput(inputFile.toURI().toString());\r\n    \r\n            // Perform the conversion\r\n            transcoder.transcode(transcoderInput, transcoderOutput);\r\n    \r\n            // Close the output stream\r\n            outputStream.close();\r\n        }\r\n    }\r\n\r\nMy initail input file facebook icon downloaded from net facebook.png\r\nOutputfile is empty svg file.\r\n\r\nBut I am getting error like this\r\n\r\n    org.apache.batik.transcoder.TranscoderException: null\r\n    Enclosed Exception:\r\n    Invalid byte 1 of 1-byte UTF-8 sequence.\r\n    \tcom.uml.svg.tools.ImageToSVGConverterTool.convertImageToSVG(ImageToSVGConverterTool.java:50)\r\n    \tat com.uml.svg.tools.ImageToSVGConverterTool.main(ImageToSVGConverterTool.java:24)\r\n    Caused by: org.apache.batik.dom.util.SAXIOException: Invalid byte 1 of 1-byte UTF-8 sequence.\r\n    \t\r\n    Caused by: org.xml.sax.SAXParseException; systemId: file:/C:/Users/ravmaddi/Desktop/facebook.png; lineNumber: 1; columnNumber: 1; Invalid byte\r\n\r\n","title":"PNG to SVG Convertion - Invalid byte 1 of 1-byte UTF-8 sequence","body":"<p>I am trying like this:</p>\n<pre><code>public class ImageToSVGConverterTool {\n\n    public static void main(String[] args) {\n        String inputImagePath = &quot;C:\\\\Users\\\\path\\\\facebook.png&quot;; // Replace with the path to your input image\n        String outputSVGPath = &quot;C:\\\\Users\\\\path\\\\OUTPUT\\\\output_image.svg&quot;; // Replace with the desired output SVG file path\n        //FileUtils.createNewFile(outputSVGPath);\n        System.out.println(FileUtils.isImageFile(outputSVGPath));\n        System.out.println(new File(outputSVGPath).isFile());\n        try {\n            convertImageToSVG(inputImagePath, outputSVGPath);\n            System.out.println(&quot;Image converted to SVG successfully.&quot;);\n        } catch (Exception e) {\n            e.printStackTrace();\n        }\n    }\n\n    public static void convertImageToSVG(String inputImagePath, String outputSVGPath)\n            throws IOException, TranscoderException {\n        File inputFile = new File(inputImagePath);\n        File outputFile = new File(outputSVGPath);\n\n        ImageTranscoder transcoder = new PNGTranscoder(); // Change to PNGTranscoder if input is PNG\n        //ImageTranscoder transcoder = new JPEGTranscoder(); // Change to PNGTranscoder if input is PNG\n\n        // Set the output file\n        FileOutputStream outputStream = new FileOutputStream(outputFile);\n        TranscoderOutput transcoderOutput = new TranscoderOutput(outputStream);\n\n        // Set the input image\n        TranscoderInput transcoderInput = new TranscoderInput(inputFile.toURI().toString());\n\n        // Perform the conversion\n        transcoder.transcode(transcoderInput, transcoderOutput);\n\n        // Close the output stream\n        outputStream.close();\n    }\n}\n</code></pre>\n<p>My initail input file facebook icon downloaded from net facebook.png\nOutputfile is empty svg file.</p>\n<p>But I am getting error like this</p>\n<pre><code>org.apache.batik.transcoder.TranscoderException: null\nEnclosed Exception:\nInvalid byte 1 of 1-byte UTF-8 sequence.\n    com.uml.svg.tools.ImageToSVGConverterTool.convertImageToSVG(ImageToSVGConverterTool.java:50)\n    at com.uml.svg.tools.ImageToSVGConverterTool.main(ImageToSVGConverterTool.java:24)\nCaused by: org.apache.batik.dom.util.SAXIOException: Invalid byte 1 of 1-byte UTF-8 sequence.\n    \nCaused by: org.xml.sax.SAXParseException; systemId: file:/C:/Users/ravmaddi/Desktop/facebook.png; lineNumber: 1; columnNumber: 1; Invalid byte\n</code></pre>\n"},{"tags":["java","spring-boot","spring-cloud","spring-cloud-loadbalancer"],"answers":[{"tags":[],"owner":{"account_id":1368060,"reputation":24601,"user_id":2730527,"display_name":"spencergibb"},"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1609879407,"creation_date":1609879407,"answer_id":65586295,"question_id":65585972,"body_markdown":"See the documentation [here][1]\r\n\r\n    spring.cloud.discovery.client.simple.instances.currency-exchange-service[0].uri=http://localhost:8080\r\n    spring.cloud.discovery.client.simple.instances.currency-exchange-service[1].uri=http://localhost:8081\r\n\r\n\r\n  [1]: https://docs.spring.io/spring-cloud-commons/docs/current/reference/html/#simplediscoveryclient","title":"Error &quot;FeignException$ServiceUnavailable: Load balancer does not contain an instance for the service ...&quot; while using Spring Cloud Load Balancer","body":"<p>See the documentation <a href=\"https://docs.spring.io/spring-cloud-commons/docs/current/reference/html/#simplediscoveryclient\" rel=\"nofollow noreferrer\">here</a></p>\n<pre><code>spring.cloud.discovery.client.simple.instances.currency-exchange-service[0].uri=http://localhost:8080\nspring.cloud.discovery.client.simple.instances.currency-exchange-service[1].uri=http://localhost:8081\n</code></pre>\n"},{"tags":[],"owner":{"account_id":29372462,"reputation":1,"user_id":22504766,"display_name":"dan"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1693927783,"creation_date":1693927783,"answer_id":77045833,"question_id":65585972,"body_markdown":"pay attention that your service name is:\r\nspring.application.name=currency-conversion-service\r\n\r\nand make sure that the @FeignClient annotation in proxy interface points to it\r\n@FeignClient(name=&quot;currency-exchange-service&quot;)","title":"Error &quot;FeignException$ServiceUnavailable: Load balancer does not contain an instance for the service ...&quot; while using Spring Cloud Load Balancer","body":"<p>pay attention that your service name is:\nspring.application.name=currency-conversion-service</p>\n<p>and make sure that the @FeignClient annotation in proxy interface points to it\n@FeignClient(name=&quot;currency-exchange-service&quot;)</p>\n"}],"owner":{"account_id":15378925,"reputation":137,"user_id":11094870,"display_name":"Ash"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":6425,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":65586295,"answer_count":2,"score":1,"last_activity_date":1694952979,"creation_date":1609877848,"question_id":65585972,"body_markdown":"Migrating from ```Ribbon```, i am trying to use ```spring cloud load balancer``` but faced below error.\r\n\r\n```\r\n2021-01-06 00:42:10.251 ERROR 12948 --- [nio-8100-exec-1] o.a.c.c.C.[.[.[/].[dispatcherServlet]    : Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Request processing failed; nested exception is feign.FeignException$ServiceUnavailable: [503] during [GET] to [http://currency-exchange-service/currency-exchange/from/USD/to/INR] [CurrencyExchangeServiceProxy#retrieveExchangeValue(String,String)]: [Load balancer does not contain an instance for the service currency-exchange-service]] with root cause\r\n\r\nfeign.FeignException$ServiceUnavailable: [503] during [GET] to [http://currency-exchange-service/currency-exchange/from/USD/to/INR] [CurrencyExchangeServiceProxy#retrieveExchangeValue(String,String)]: [Load balancer does not contain an instance for the service currency-exchange-service]\r\n\tat feign.FeignException.serverErrorStatus(FeignException.java:237) ~[feign-core-10.10.1.jar:na]\r\n\tat feign.FeignException.errorStatus(FeignException.java:180) ~[feign-core-10.10.1.jar:na]\r\n\tat feign.FeignException.errorStatus(FeignException.java:169) ~[feign-core-10.10.1.jar:na]\r\n\tat feign.codec.ErrorDecoder$Default.decode(ErrorDecoder.java:92) ~[feign-core-10.10.1.jar:na]\r\n\tat feign.AsyncResponseHandler.handleResponse(AsyncResponseHandler.java:96) ~[feign-core-10.10.1.jar:na]\r\n\tat feign.SynchronousMethodHandler.executeAndDecode(SynchronousMethodHandler.java:138) ~[feign-core-10.10.1.jar:na]\r\n\tat feign.SynchronousMethodHandler.invoke(SynchronousMethodHandler.java:89) ~[feign-core-10.10.1.jar:na]\r\n\tat feign.ReflectiveFeign$FeignInvocationHandler.invoke(ReflectiveFeign.java:100) ~[feign-core-10.10.1.jar:na]\r\n\tat com.sun.proxy.$Proxy96.retrieveExchangeValue(Unknown Source) ~[na:na]\r\n\tat com.springboot.microservices.currencyconversionservice.controller.CurrencyConversionController.convertCurrencyFeign(CurrencyConversionController.java:47) ~[classes/:na]\r\n\tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:1.8.0_261]\r\n\tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) ~[na:1.8.0_261]\r\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:1.8.0_261]\r\n\tat java.lang.reflect.Method.invoke(Method.java:498) ~[na:1.8.0_261]\r\n\tat org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:197) ~[spring-web-5.3.1.jar:5.3.1]\r\n\tat org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:141) ~[spring-web-5.3.1.jar:5.3.1]\r\n\tat org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:106) ~[spring-webmvc-5.3.1.jar:5.3.1]\r\n\tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:893) ~[spring-webmvc-5.3.1.jar:5.3.1]\r\n\tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:807) ~[spring-webmvc-5.3.1.jar:5.3.1]\r\n\tat org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-5.3.1.jar:5.3.1]\r\n\tat org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1061) ~[spring-webmvc-5.3.1.jar:5.3.1]\r\n\tat org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:961) ~[spring-webmvc-5.3.1.jar:5.3.1]\r\n\tat org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006) ~[spring-webmvc-5.3.1.jar:5.3.1]\r\n\tat org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:898) ~[spring-webmvc-5.3.1.jar:5.3.1]\r\n\tat javax.servlet.http.HttpServlet.service(HttpServlet.java:626) ~[tomcat-embed-core-9.0.39.jar:4.0.FR]\r\n\tat org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883) ~[spring-webmvc-5.3.1.jar:5.3.1]\r\n\tat javax.servlet.http.HttpServlet.service(HttpServlet.java:733) ~[tomcat-embed-core-9.0.39.jar:4.0.FR]\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:231) ~[tomcat-embed-core-9.0.39.jar:9.0.39]\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166) ~[tomcat-embed-core-9.0.39.jar:9.0.39]\r\n\tat org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53) ~[tomcat-embed-websocket-9.0.39.jar:9.0.39]\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-9.0.39.jar:9.0.39]\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166) ~[tomcat-embed-core-9.0.39.jar:9.0.39]\r\n\tat org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-5.3.1.jar:5.3.1]\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119) ~[spring-web-5.3.1.jar:5.3.1]\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-9.0.39.jar:9.0.39]\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166) ~[tomcat-embed-core-9.0.39.jar:9.0.39]\r\n\tat org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-5.3.1.jar:5.3.1]\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119) ~[spring-web-5.3.1.jar:5.3.1]\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-9.0.39.jar:9.0.39]\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166) ~[tomcat-embed-core-9.0.39.jar:9.0.39]\r\n\tat org.springframework.boot.actuate.metrics.web.servlet.WebMvcMetricsFilter.doFilterInternal(WebMvcMetricsFilter.java:93) ~[spring-boot-actuator-2.4.0.jar:2.4.0]\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119) ~[spring-web-5.3.1.jar:5.3.1]\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-9.0.39.jar:9.0.39]\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166) ~[tomcat-embed-core-9.0.39.jar:9.0.39]\r\n\tat org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-5.3.1.jar:5.3.1]\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119) ~[spring-web-5.3.1.jar:5.3.1]\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-9.0.39.jar:9.0.39]\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166) ~[tomcat-embed-core-9.0.39.jar:9.0.39]\r\n\tat org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:202) ~[tomcat-embed-core-9.0.39.jar:9.0.39]\r\n\tat org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97) [tomcat-embed-core-9.0.39.jar:9.0.39]\r\n\tat org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:542) [tomcat-embed-core-9.0.39.jar:9.0.39]\r\n\tat org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:143) [tomcat-embed-core-9.0.39.jar:9.0.39]\r\n\tat org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92) [tomcat-embed-core-9.0.39.jar:9.0.39]\r\n\tat org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78) [tomcat-embed-core-9.0.39.jar:9.0.39]\r\n\tat org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:343) [tomcat-embed-core-9.0.39.jar:9.0.39]\r\n\tat org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:374) [tomcat-embed-core-9.0.39.jar:9.0.39]\r\n\tat org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65) [tomcat-embed-core-9.0.39.jar:9.0.39]\r\n\tat org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:868) [tomcat-embed-core-9.0.39.jar:9.0.39]\r\n\tat org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1590) [tomcat-embed-core-9.0.39.jar:9.0.39]\r\n\tat org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49) [tomcat-embed-core-9.0.39.jar:9.0.39]\r\n\tat java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149) [na:1.8.0_261]\r\n\tat java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624) [na:1.8.0_261]\r\n\tat org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61) [tomcat-embed-core-9.0.39.jar:9.0.39]\r\n\tat java.lang.Thread.run(Thread.java:748) [na:1.8.0_261]\r\n```\r\n\r\nPlease tell me what should i put in my Client Service - **currency-conversion-service&#39;s** ```application.properties``` file\r\n\r\n ```application.properties```:\r\n\r\n```\r\nspring.application.name=currency-conversion-service\r\nserver.port=8100\r\n#currency-exchange-service.ribbon.listOfServers=http://localhost:8000,http://localhost:8001\r\nspring.cloud.loadbalancer.ribbon.enabled=false\r\ncurrency-exchange-service.ribbon.eureka.enabled=false\r\neureka.client.register-with-eureka=false\r\neureka.client.fetch-registry=false\r\neureka.client.enabled=false\r\n```\r\n\r\nFull client service project **currency-conversion-service**, which is calling **currency-exchange-service**, can be accessed from https://github.com/AshishBharadwaj94/currency-conversion-service ","title":"Error &quot;FeignException$ServiceUnavailable: Load balancer does not contain an instance for the service ...&quot; while using Spring Cloud Load Balancer","body":"<p>Migrating from <code>Ribbon</code>, i am trying to use <code>spring cloud load balancer</code> but faced below error.</p>\n<pre><code>2021-01-06 00:42:10.251 ERROR 12948 --- [nio-8100-exec-1] o.a.c.c.C.[.[.[/].[dispatcherServlet]    : Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Request processing failed; nested exception is feign.FeignException$ServiceUnavailable: [503] during [GET] to [http://currency-exchange-service/currency-exchange/from/USD/to/INR] [CurrencyExchangeServiceProxy#retrieveExchangeValue(String,String)]: [Load balancer does not contain an instance for the service currency-exchange-service]] with root cause\n\nfeign.FeignException$ServiceUnavailable: [503] during [GET] to [http://currency-exchange-service/currency-exchange/from/USD/to/INR] [CurrencyExchangeServiceProxy#retrieveExchangeValue(String,String)]: [Load balancer does not contain an instance for the service currency-exchange-service]\n    at feign.FeignException.serverErrorStatus(FeignException.java:237) ~[feign-core-10.10.1.jar:na]\n    at feign.FeignException.errorStatus(FeignException.java:180) ~[feign-core-10.10.1.jar:na]\n    at feign.FeignException.errorStatus(FeignException.java:169) ~[feign-core-10.10.1.jar:na]\n    at feign.codec.ErrorDecoder$Default.decode(ErrorDecoder.java:92) ~[feign-core-10.10.1.jar:na]\n    at feign.AsyncResponseHandler.handleResponse(AsyncResponseHandler.java:96) ~[feign-core-10.10.1.jar:na]\n    at feign.SynchronousMethodHandler.executeAndDecode(SynchronousMethodHandler.java:138) ~[feign-core-10.10.1.jar:na]\n    at feign.SynchronousMethodHandler.invoke(SynchronousMethodHandler.java:89) ~[feign-core-10.10.1.jar:na]\n    at feign.ReflectiveFeign$FeignInvocationHandler.invoke(ReflectiveFeign.java:100) ~[feign-core-10.10.1.jar:na]\n    at com.sun.proxy.$Proxy96.retrieveExchangeValue(Unknown Source) ~[na:na]\n    at com.springboot.microservices.currencyconversionservice.controller.CurrencyConversionController.convertCurrencyFeign(CurrencyConversionController.java:47) ~[classes/:na]\n    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:1.8.0_261]\n    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) ~[na:1.8.0_261]\n    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:1.8.0_261]\n    at java.lang.reflect.Method.invoke(Method.java:498) ~[na:1.8.0_261]\n    at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:197) ~[spring-web-5.3.1.jar:5.3.1]\n    at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:141) ~[spring-web-5.3.1.jar:5.3.1]\n    at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:106) ~[spring-webmvc-5.3.1.jar:5.3.1]\n    at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:893) ~[spring-webmvc-5.3.1.jar:5.3.1]\n    at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:807) ~[spring-webmvc-5.3.1.jar:5.3.1]\n    at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-5.3.1.jar:5.3.1]\n    at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1061) ~[spring-webmvc-5.3.1.jar:5.3.1]\n    at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:961) ~[spring-webmvc-5.3.1.jar:5.3.1]\n    at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006) ~[spring-webmvc-5.3.1.jar:5.3.1]\n    at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:898) ~[spring-webmvc-5.3.1.jar:5.3.1]\n    at javax.servlet.http.HttpServlet.service(HttpServlet.java:626) ~[tomcat-embed-core-9.0.39.jar:4.0.FR]\n    at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883) ~[spring-webmvc-5.3.1.jar:5.3.1]\n    at javax.servlet.http.HttpServlet.service(HttpServlet.java:733) ~[tomcat-embed-core-9.0.39.jar:4.0.FR]\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:231) ~[tomcat-embed-core-9.0.39.jar:9.0.39]\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166) ~[tomcat-embed-core-9.0.39.jar:9.0.39]\n    at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53) ~[tomcat-embed-websocket-9.0.39.jar:9.0.39]\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-9.0.39.jar:9.0.39]\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166) ~[tomcat-embed-core-9.0.39.jar:9.0.39]\n    at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-5.3.1.jar:5.3.1]\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119) ~[spring-web-5.3.1.jar:5.3.1]\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-9.0.39.jar:9.0.39]\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166) ~[tomcat-embed-core-9.0.39.jar:9.0.39]\n    at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-5.3.1.jar:5.3.1]\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119) ~[spring-web-5.3.1.jar:5.3.1]\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-9.0.39.jar:9.0.39]\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166) ~[tomcat-embed-core-9.0.39.jar:9.0.39]\n    at org.springframework.boot.actuate.metrics.web.servlet.WebMvcMetricsFilter.doFilterInternal(WebMvcMetricsFilter.java:93) ~[spring-boot-actuator-2.4.0.jar:2.4.0]\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119) ~[spring-web-5.3.1.jar:5.3.1]\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-9.0.39.jar:9.0.39]\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166) ~[tomcat-embed-core-9.0.39.jar:9.0.39]\n    at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-5.3.1.jar:5.3.1]\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119) ~[spring-web-5.3.1.jar:5.3.1]\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-9.0.39.jar:9.0.39]\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166) ~[tomcat-embed-core-9.0.39.jar:9.0.39]\n    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:202) ~[tomcat-embed-core-9.0.39.jar:9.0.39]\n    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97) [tomcat-embed-core-9.0.39.jar:9.0.39]\n    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:542) [tomcat-embed-core-9.0.39.jar:9.0.39]\n    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:143) [tomcat-embed-core-9.0.39.jar:9.0.39]\n    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92) [tomcat-embed-core-9.0.39.jar:9.0.39]\n    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78) [tomcat-embed-core-9.0.39.jar:9.0.39]\n    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:343) [tomcat-embed-core-9.0.39.jar:9.0.39]\n    at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:374) [tomcat-embed-core-9.0.39.jar:9.0.39]\n    at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65) [tomcat-embed-core-9.0.39.jar:9.0.39]\n    at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:868) [tomcat-embed-core-9.0.39.jar:9.0.39]\n    at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1590) [tomcat-embed-core-9.0.39.jar:9.0.39]\n    at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49) [tomcat-embed-core-9.0.39.jar:9.0.39]\n    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149) [na:1.8.0_261]\n    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624) [na:1.8.0_261]\n    at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61) [tomcat-embed-core-9.0.39.jar:9.0.39]\n    at java.lang.Thread.run(Thread.java:748) [na:1.8.0_261]\n</code></pre>\n<p>Please tell me what should i put in my Client Service - <strong>currency-conversion-service's</strong> <code>application.properties</code> file</p>\n<p><code>application.properties</code>:</p>\n<pre><code>spring.application.name=currency-conversion-service\nserver.port=8100\n#currency-exchange-service.ribbon.listOfServers=http://localhost:8000,http://localhost:8001\nspring.cloud.loadbalancer.ribbon.enabled=false\ncurrency-exchange-service.ribbon.eureka.enabled=false\neureka.client.register-with-eureka=false\neureka.client.fetch-registry=false\neureka.client.enabled=false\n</code></pre>\n<p>Full client service project <strong>currency-conversion-service</strong>, which is calling <strong>currency-exchange-service</strong>, can be accessed from <a href=\"https://github.com/AshishBharadwaj94/currency-conversion-service\" rel=\"nofollow noreferrer\">https://github.com/AshishBharadwaj94/currency-conversion-service</a></p>\n"},{"tags":["java","linked-list","singly-linked-list"],"comments":[{"owner":{"account_id":20285848,"reputation":109,"user_id":14878550,"display_name":"Maryam Naveed"},"score":0,"creation_date":1659437309,"post_id":64003658,"comment_id":129289560,"body_markdown":"how to traverse this?","body":"how to traverse this?"}],"answers":[{"tags":[],"owner":{"account_id":17972973,"reputation":86,"user_id":13061273,"display_name":"Alibek Taalaibek Uulu"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1600775735,"creation_date":1600775735,"answer_id":64009238,"question_id":64003658,"body_markdown":"I like your solution but you have bit incomplete logic.\r\n\r\n    class Solution {\r\n        //ListNode head;\r\n        public ListNode addTwoNumbers(ListNode l1, ListNode l2) {\r\n            int x = 0;\r\n            int y = 0;\r\n            int z = 1;\r\n    \r\n            while(l1 != null){\r\n                x += z*l1.val;\r\n                z*=10;\r\n                l1 = l1.next;\r\n            }\r\n    \r\n            z = 1;\r\n            while(l2 != null){\r\n                y += z*l2.val;\r\n                z*=10;\r\n                l2 = l2.next;\r\n            }\r\n    \r\n            int sum = x + y;\r\n            if (sum == 0) {\r\n                return new ListNode(0);\r\n            }\r\n    \r\n            ListNode node = null, head = null;\r\n            while(sum &gt; 0){\r\n                int digit = sum % 10;\r\n                ListNode n = new ListNode(digit);\r\n                if (node == null) {\r\n                    head = node = n;\r\n                } else {\r\n                    node.next = n;\r\n                    node = node.next;\r\n                }\r\n                \r\n                sum = sum / 10;\r\n            }\r\n    \r\n            return head;\r\n        }\r\n    }\r\n\r\nI just changed one or two things after `int sum = x + y;`","title":"LinkedList Add Two Numbers: LeetCode","body":"<p>I like your solution but you have bit incomplete logic.</p>\n<pre><code>class Solution {\n    //ListNode head;\n    public ListNode addTwoNumbers(ListNode l1, ListNode l2) {\n        int x = 0;\n        int y = 0;\n        int z = 1;\n\n        while(l1 != null){\n            x += z*l1.val;\n            z*=10;\n            l1 = l1.next;\n        }\n\n        z = 1;\n        while(l2 != null){\n            y += z*l2.val;\n            z*=10;\n            l2 = l2.next;\n        }\n\n        int sum = x + y;\n        if (sum == 0) {\n            return new ListNode(0);\n        }\n\n        ListNode node = null, head = null;\n        while(sum &gt; 0){\n            int digit = sum % 10;\n            ListNode n = new ListNode(digit);\n            if (node == null) {\n                head = node = n;\n            } else {\n                node.next = n;\n                node = node.next;\n            }\n            \n            sum = sum / 10;\n        }\n\n        return head;\n    }\n}\n</code></pre>\n<p>I just changed one or two things after <code>int sum = x + y;</code></p>\n"},{"tags":[],"owner":{"account_id":24552528,"reputation":1,"user_id":18461546,"display_name":"Muhammad Hamza"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1668498841,"creation_date":1668498841,"answer_id":74442202,"question_id":64003658,"body_markdown":"This is the solution in kotlin Language.                                                        \r\n\r\n    class Solution {\r\n    fun addTwoNumbers(l1: ListNode?, l2: ListNode?): ListNode? {\r\n        \r\n        var head1=l1\r\n        var head2=l2\r\n\r\n        var result:ListNode?=null\r\n        var temp:ListNode?=null\r\n\r\n        var carry=0\r\n\r\n        while(head1 != null || head2 != null)\r\n        {\r\n            var sum=carry\r\n\r\n           if(head1 != null)\r\n           {\r\n\r\n             sum +=  head1.`val`\r\n             head1=head1.next\r\n\r\n           }\r\n\r\n           if(head2 != null)\r\n           {\r\n              sum +=head2.`val`\r\n              head2= head2.next\r\n\r\n           }\r\n             \r\n            val node= ListNode(sum%10)\r\n\r\n            carry=sum/10\r\n\r\n            if(temp== null)\r\n            {\r\n\r\n                 result=node\r\n                 temp=result\r\n\r\n\r\n            }\r\n\r\n            else{ temp.next=node\r\n            temp=temp.next}\r\n           \r\n        }\r\n\r\n        if(carry&gt;0){\r\n\r\n            temp!!.next=ListNode(carry)\r\n        }\r\n\r\n    return result\r\n    }\r\n    }","title":"LinkedList Add Two Numbers: LeetCode","body":"<p>This is the solution in kotlin Language.</p>\n<pre><code>class Solution {\nfun addTwoNumbers(l1: ListNode?, l2: ListNode?): ListNode? {\n    \n    var head1=l1\n    var head2=l2\n\n    var result:ListNode?=null\n    var temp:ListNode?=null\n\n    var carry=0\n\n    while(head1 != null || head2 != null)\n    {\n        var sum=carry\n\n       if(head1 != null)\n       {\n\n         sum +=  head1.`val`\n         head1=head1.next\n\n       }\n\n       if(head2 != null)\n       {\n          sum +=head2.`val`\n          head2= head2.next\n\n       }\n         \n        val node= ListNode(sum%10)\n\n        carry=sum/10\n\n        if(temp== null)\n        {\n\n             result=node\n             temp=result\n\n\n        }\n\n        else{ temp.next=node\n        temp=temp.next}\n       \n    }\n\n    if(carry&gt;0){\n\n        temp!!.next=ListNode(carry)\n    }\n\nreturn result\n}\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":27810006,"reputation":1,"user_id":21232579,"display_name":"Sumit Balani"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1676623913,"creation_date":1676623913,"answer_id":75482055,"question_id":64003658,"body_markdown":"The solution in Java from my leetcode submission. Beats 100% of other solutions in runtime, and beats 97.3% of solutions in memory. It uses recursion of course.\r\n```\r\n /* Definition for singly-linked list.\r\n public class ListNode {\r\n     int val;\r\n     ListNode next;\r\n     ListNode() {}\r\n     ListNode(int val) { this.val = val; }\r\n     ListNode(int val, ListNode next) { this.val = val; this.next = next; }\r\n }*/\r\n \r\nclass Solution {\r\n    public ListNode addTwoNumbers(ListNode l1, ListNode l2) {\r\n        int sum, carry;\r\n        sum = l1.val + l2.val;\r\n        carry = 0;\r\n        if (sum &gt;= 10){\r\n            sum = sum - 10;\r\n            carry = 1;\r\n        }\r\n        l1.val = sum;\r\n        if(carry == 1){\r\n            if(l1.next != null) {\r\n                l1.next.val++;\r\n            }\r\n            else {\r\n                l1.next = new ListNode(carry);\r\n            } \r\n        }\r\n        if(l1.next != null &amp;&amp; l2.next!= null) addTwoNumbers(l1.next, l2.next);\r\n        else if (l1.next!= null &amp;&amp; l2.next == null) addTwoNumbers(l1.next, new ListNode(0));\r\n        else if (l2.next != null &amp;&amp; l1.next == null) {\r\n            l1.next = new ListNode(0);\r\n            addTwoNumbers(l1.next, l2.next);\r\n        }\r\n        return l1;\r\n    }\r\n}","title":"LinkedList Add Two Numbers: LeetCode","body":"<p>The solution in Java from my leetcode submission. Beats 100% of other solutions in runtime, and beats 97.3% of solutions in memory. It uses recursion of course.</p>\n<pre><code> /* Definition for singly-linked list.\n public class ListNode {\n     int val;\n     ListNode next;\n     ListNode() {}\n     ListNode(int val) { this.val = val; }\n     ListNode(int val, ListNode next) { this.val = val; this.next = next; }\n }*/\n \nclass Solution {\n    public ListNode addTwoNumbers(ListNode l1, ListNode l2) {\n        int sum, carry;\n        sum = l1.val + l2.val;\n        carry = 0;\n        if (sum &gt;= 10){\n            sum = sum - 10;\n            carry = 1;\n        }\n        l1.val = sum;\n        if(carry == 1){\n            if(l1.next != null) {\n                l1.next.val++;\n            }\n            else {\n                l1.next = new ListNode(carry);\n            } \n        }\n        if(l1.next != null &amp;&amp; l2.next!= null) addTwoNumbers(l1.next, l2.next);\n        else if (l1.next!= null &amp;&amp; l2.next == null) addTwoNumbers(l1.next, new ListNode(0));\n        else if (l2.next != null &amp;&amp; l1.next == null) {\n            l1.next = new ListNode(0);\n            addTwoNumbers(l1.next, l2.next);\n        }\n        return l1;\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":9659481,"reputation":1,"user_id":7168041,"display_name":"S. Radje"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1694952362,"creation_date":1694952362,"answer_id":77121707,"question_id":64003658,"body_markdown":"&gt; The solution in PHP from my leetcode submission. Runtime 24ms,Memory\r\n&gt; 19.16MB.\r\n\r\n    class ListNode {\r\n            public $val;\r\n            public $next;\r\n        \r\n            public function __construct($val = 0, $next = null) {\r\n                $this-&gt;val = $val;\r\n                $this-&gt;next = $next;\r\n            }\r\n        }\r\n        \r\n        function addTwoNumbers($l1, $l2) {\r\n            $result = new ListNode(0);\r\n            $current = $result;\r\n            $carry = 0;\r\n        \r\n            while ($l1 != null || $l2 != null) {\r\n                $val1 = ($l1 != null) ? $l1-&gt;val : 0;\r\n                $val2 = ($l2 != null) ? $l2-&gt;val : 0;\r\n                $sum = $val1 + $val2 + $carry;\r\n        \r\n                $carry = intdiv($sum, 10);\r\n                $current-&gt;next = new ListNode($sum % 10);\r\n                $current = $current-&gt;next;\r\n        \r\n                if ($l1 != null) {\r\n                    $l1 = $l1-&gt;next;\r\n                }\r\n                if ($l2 != null) {\r\n                    $l2 = $l2-&gt;next;\r\n                }\r\n            }\r\n        \r\n            if ($carry &gt; 0) {\r\n                $current-&gt;next = new ListNode($carry);\r\n            }\r\n        \r\n            return $result-&gt;next;\r\n        }\r\n\r\n&#39;","title":"LinkedList Add Two Numbers: LeetCode","body":"<blockquote>\n<p>The solution in PHP from my leetcode submission. Runtime 24ms,Memory\n19.16MB.</p>\n</blockquote>\n<pre><code>class ListNode {\n        public $val;\n        public $next;\n    \n        public function __construct($val = 0, $next = null) {\n            $this-&gt;val = $val;\n            $this-&gt;next = $next;\n        }\n    }\n    \n    function addTwoNumbers($l1, $l2) {\n        $result = new ListNode(0);\n        $current = $result;\n        $carry = 0;\n    \n        while ($l1 != null || $l2 != null) {\n            $val1 = ($l1 != null) ? $l1-&gt;val : 0;\n            $val2 = ($l2 != null) ? $l2-&gt;val : 0;\n            $sum = $val1 + $val2 + $carry;\n    \n            $carry = intdiv($sum, 10);\n            $current-&gt;next = new ListNode($sum % 10);\n            $current = $current-&gt;next;\n    \n            if ($l1 != null) {\n                $l1 = $l1-&gt;next;\n            }\n            if ($l2 != null) {\n                $l2 = $l2-&gt;next;\n            }\n        }\n    \n        if ($carry &gt; 0) {\n            $current-&gt;next = new ListNode($carry);\n        }\n    \n        return $result-&gt;next;\n    }\n</code></pre>\n<p>'</p>\n"}],"owner":{"account_id":19566228,"reputation":47,"user_id":14318315,"display_name":"the_curious_programmer"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":13188,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":4,"score":0,"last_activity_date":1694952362,"creation_date":1600753219,"question_id":64003658,"body_markdown":"You are given two non-empty linked lists representing two non-negative integers. The digits are stored in reverse order and each of their nodes contain a single digit. Add the two numbers and return it as a linked list.\r\n\r\nYou may assume the two numbers do not contain any leading zero, except the number 0 itself.\r\n\r\nThe linked list seems to be overwriting the nodes as far as I can tell. I did find the answer to this problem on GeeksforGeeks but I wanted help with figuring out what is wrong with my code. I also know my code is not the best in regards to optimization but any halp is accepted. Thanks!\r\n\r\n\r\n    /**\r\n     * Definition for singly-linked list.\r\n     * public class ListNode {\r\n     *     int val;\r\n     *     ListNode next;\r\n     *     ListNode() {}\r\n     *     ListNode(int val) { this.val = val; }\r\n     *     ListNode(int val, ListNode next) { this.val = val; this.next = next; }\r\n     * }\r\n     */\r\n        class Solution {\r\n            //ListNode head;\r\n            public ListNode addTwoNumbers(ListNode l1, ListNode l2) {\r\n                int x = 0;\r\n                int y = 0;\r\n                int z = 1;\r\n        \r\n                while(l1 != null){\r\n                    x += z*l1.val;\r\n                    z*=10;\r\n                    l1 = l1.next;\r\n                }\r\n              \r\n                z = 1;\r\n                while(l2 != null){\r\n                    y += z*l2.val;\r\n                    z*=10;\r\n                    l2 = l2.next;\r\n                }\r\n        \r\n                int sum = x + y;\r\n                ListNode node = new ListNode(0);\r\n                \r\n                while(sum &gt; 0){\r\n                    int digit = sum % 10;\r\n                    ListNode n = new ListNode(digit);\r\n                    while(node.next != null){\r\n                        node = node.next;\r\n                    }\r\n                    node.next = n;\r\n                    \r\n                    sum = sum / 10;\r\n        \r\n                    \r\n                }      \r\n                return node;\r\n        \r\n            }\r\n        }\r\n\r\n[LeetCode Question][1]\r\n\r\n\r\n  [1]: https://leetcode.com/problems/add-two-numbers/","title":"LinkedList Add Two Numbers: LeetCode","body":"<p>You are given two non-empty linked lists representing two non-negative integers. The digits are stored in reverse order and each of their nodes contain a single digit. Add the two numbers and return it as a linked list.</p>\n<p>You may assume the two numbers do not contain any leading zero, except the number 0 itself.</p>\n<p>The linked list seems to be overwriting the nodes as far as I can tell. I did find the answer to this problem on GeeksforGeeks but I wanted help with figuring out what is wrong with my code. I also know my code is not the best in regards to optimization but any halp is accepted. Thanks!</p>\n<pre><code>/**\n * Definition for singly-linked list.\n * public class ListNode {\n *     int val;\n *     ListNode next;\n *     ListNode() {}\n *     ListNode(int val) { this.val = val; }\n *     ListNode(int val, ListNode next) { this.val = val; this.next = next; }\n * }\n */\n    class Solution {\n        //ListNode head;\n        public ListNode addTwoNumbers(ListNode l1, ListNode l2) {\n            int x = 0;\n            int y = 0;\n            int z = 1;\n    \n            while(l1 != null){\n                x += z*l1.val;\n                z*=10;\n                l1 = l1.next;\n            }\n          \n            z = 1;\n            while(l2 != null){\n                y += z*l2.val;\n                z*=10;\n                l2 = l2.next;\n            }\n    \n            int sum = x + y;\n            ListNode node = new ListNode(0);\n            \n            while(sum &gt; 0){\n                int digit = sum % 10;\n                ListNode n = new ListNode(digit);\n                while(node.next != null){\n                    node = node.next;\n                }\n                node.next = n;\n                \n                sum = sum / 10;\n    \n                \n            }      \n            return node;\n    \n        }\n    }\n</code></pre>\n<p><a href=\"https://leetcode.com/problems/add-two-numbers/\" rel=\"nofollow noreferrer\">LeetCode Question</a></p>\n"},{"tags":["java","uml"],"answers":[{"tags":[],"owner":{"account_id":102965,"reputation":415230,"user_id":276052,"accept_rate":80,"display_name":"aioobe"},"down_vote_count":1,"up_vote_count":45,"is_accepted":false,"score":44,"last_activity_date":1694951574,"creation_date":1419617987,"answer_id":27660515,"question_id":27660499,"body_markdown":"Not sure how you define &quot;open arrow&quot;, but it&#39;s either represents an *extends* relation or an *association*.\r\n\r\n\r\n[![enter image description here][1]][1]\r\n\r\n  [1]: http://i.stack.imgur.com/2ajCN.gif","title":"Open arrow with solid line in UML?","body":"<p>Not sure how you define &quot;open arrow&quot;, but it's either represents an <em>extends</em> relation or an <em>association</em>.</p>\n<p><a href=\"https://i.stack.imgur.com/2ajCN.gif\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/2ajCN.gif\" alt=\"enter image description here\" /></a></p>\n"},{"tags":[],"owner":{"account_id":121840,"reputation":36551,"user_id":315228,"accept_rate":100,"display_name":"SMA"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1419618723,"creation_date":1419618723,"answer_id":27660620,"question_id":27660499,"body_markdown":"It&#39;s basically an association where a unidirectional relation exists between the two class. For e.g. \r\n\r\nThe OverdrawnAccountsReport class knows about the BankAccount class, but the BankAccount class does not know about the association\r\n\r\n    OverdrawnAccountsReport -&gt; BankAccount \r\n\r\nLike standard associations, the uni-directional association includes a role name and a multiplicity value, but unlike the standard bi-directional association, the uni-directional association only contains the role name and multiplicity value for the known class.\r\n\r\nIf you see close or triangle shape arrow between two class, then that represents parent - child relation.\r\n","title":"Open arrow with solid line in UML?","body":"<p>It's basically an association where a unidirectional relation exists between the two class. For e.g. </p>\n\n<p>The OverdrawnAccountsReport class knows about the BankAccount class, but the BankAccount class does not know about the association</p>\n\n<pre><code>OverdrawnAccountsReport -&gt; BankAccount \n</code></pre>\n\n<p>Like standard associations, the uni-directional association includes a role name and a multiplicity value, but unlike the standard bi-directional association, the uni-directional association only contains the role name and multiplicity value for the known class.</p>\n\n<p>If you see close or triangle shape arrow between two class, then that represents parent - child relation.</p>\n"}],"owner":{"account_id":5331062,"reputation":166,"user_id":4251596,"display_name":"SectorCodec"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":32992,"favorite_count":0,"down_vote_count":0,"up_vote_count":12,"closed_date":1419819879,"answer_count":2,"score":12,"last_activity_date":1694951574,"creation_date":1419617916,"question_id":27660499,"body_markdown":"In UML, what does an open arrow with a solid line show? Does it show Association (where the class with the tail knows about the class with the arrow head, while the arrow head class does not know about the tail class)?\r\n\r\n","title":"Open arrow with solid line in UML?","body":"<p>In UML, what does an open arrow with a solid line show? Does it show Association (where the class with the tail knows about the class with the arrow head, while the arrow head class does not know about the tail class)?</p>\n"},{"tags":["java","constructor","floating-point","joml"],"comments":[{"owner":{"account_id":31180,"reputation":29173,"user_id":85421,"display_name":"user85421"},"score":9,"creation_date":1694945247,"post_id":77121308,"comment_id":135955787,"body_markdown":"what did you expect? `Float.MIN_VALUE` is `2` to the power of `-149` or about `1.4E-45`, `%f` will display 6 digits after the decimal point, which is not enough... 45 digits are needed to see the first non-zero digit - try `%.45f` instead of `%f` (if only for testing) || [javadoc](https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/lang/Float.html#MIN_VALUE) of `MIN_VALUE`: &quot;A constant holding the smallest positive nonzero value of type float, ...&quot;","body":"what did you expect? <code>Float.MIN_VALUE</code> is <code>2</code> to the power of <code>-149</code> or about <code>1.4E-45</code>, <code>%f</code> will display 6 digits after the decimal point, which is not enough... 45 digits are needed to see the first non-zero digit - try <code>%.45f</code> instead of <code>%f</code> (if only for testing) || <a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/lang/Float.html#MIN_VALUE\" rel=\"nofollow noreferrer\">javadoc</a> of <code>MIN_VALUE</code>: &quot;A constant holding the smallest positive nonzero value of type float, ...&quot;"},{"owner":{"account_id":31180,"reputation":29173,"user_id":85421,"display_name":"user85421"},"score":3,"creation_date":1694945760,"post_id":77121308,"comment_id":135955835,"body_markdown":"and [javadoc](https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/util/Formatter.html) of `Formatter` (for `%f`): &quot;The number of digits in the result for the fractional part of m or a is equal to the precision. If the precision is not specified then the default value is 6.&quot;","body":"and <a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/util/Formatter.html\" rel=\"nofollow noreferrer\">javadoc</a> of <code>Formatter</code> (for <code>%f</code>): &quot;The number of digits in the result for the fractional part of m or a is equal to the precision. If the precision is not specified then the default value is 6.&quot;"}],"answers":[{"tags":[],"owner":{"account_id":401843,"reputation":89768,"user_id":768644,"display_name":"rzwitserloot"},"down_vote_count":1,"up_vote_count":4,"is_accepted":true,"score":3,"last_activity_date":1694950915,"creation_date":1694950915,"answer_id":77121623,"question_id":77121308,"body_markdown":"Your question can be read in two completely different ways. I can answer them both.\r\n\r\n## You expected it to be a very large negative number\r\n\r\nThat&#39;s just not what `MIN_VALUE` does. However, your confusion is understandable; `Integer.MIN_VALUE` __is__ a very large negative number. The concept doesn&#39;t apply to float/double, as they have a value that represents negative infinity, which makes &#39;MIN_VALUE&#39; in the sense of &#39;that number that is more negative than any other number `float` can represent&#39; dubious / non-existent. The name is still unfortunate but java does not as a rule change things without a better reason than &#39;naming is confusing&#39; to avoid backwards compatibility issues.\r\n\r\n`Float.MIN_VALUE` represents the smallest _positive_ representable float that is _not_ equal to 0.\r\n\r\n## I know that. But it prints 0!\r\n\r\nThe problem with float and double is that they are imprecise. If I hand you a postit and ask you to write 1/3 in decimal on it, you can&#39;t. You&#39;ll write 0.3333 and eventually run out of space. `double` and `float` are more or less the same, except in binary except decimal which is particularly painful because only stuff that fits in 2s can be accurately represented. We can do 1/10th in decimal (0.1, after all). In IEEE math that is as problematic as 1/3 is. Almost all fractions are problematic, except 1/2, 3/4th, etc. (the divisor a power of 2 - that&#39;s allright).\r\n\r\nLet&#39;s see it in action:\r\n\r\n```\r\ndouble v = 0.0;\r\nfor (int i = 0; i &lt; 10; i++) v += 0.1;\r\nSystem.out.println(v == 1.0);\r\n```\r\n\r\nThat prints... oof, `false`, which is wrong. `10 * 0.1` is obviously 1.0. But not in IEEE double math, evidently. Just like the sum of 3 postits with your best effort at 1/3 is not quite 1.0 (it&#39;ll be 0.9999999), we run into the same problem here.\r\n\r\n## So how does that lead to print 0.0000?\r\n\r\nBecause the number is _stored_ in binary but printed in decimal, and that results in some real wonky and unexpected behaviour if `println` would print the _exact_ value. You&#39;d get 0.9999999999999999999876 a lot, which is annoying. So, instead, printf/println just takes a _wild_ stab in the dark and does some dubious rounding to make it all look right when none of it is.\r\n\r\nThis is why you should _never_ just print a double. Instead use, as you are, `printf` / `String.format`. And specify how many digits you want, so you are in control of this necessary rounding. Without an explicit specifier, `%f` defaults to 6 digits. And &#39;the smallest non-zero positive float&#39;, rounded so that it fits in 6 digits, _is_ 0.000000. You need _way_ more digits to see this tiny, tiny number:\r\n\r\n```\r\nSystem.out.printf(&quot;%.99f\\n&quot;, Float.MIN_VALUE);\r\n\r\n&gt; 0.0000000000000000000000000000000000000000000014012984643248170000000\r\n```\r\n\r\nThat&#39;s how many digits you&#39;d need to see it.\r\n\r\n## Some important notes\r\n\r\n* `float` is useless. `double` is just as fast or faster, takes just as much space in 99% of all cases (except `float[]` which is usually a bit smaller, but that&#39;s the only place where it tends to come up), and is less precise. Just don&#39;t use it - `double` instead.\r\n* Another way to solve for this &#39;its inaccurate&#39; issue is to not use floats/doubles at all. Find an atomic unit and represent those with int/long, or use BigDecimal. For GUI purposes the inaccuracy is usually worth it, though.\r\n","title":"Why is it that when I call the constructor with Float.MIN_VALUE parameters, they are 0?","body":"<p>Your question can be read in two completely different ways. I can answer them both.</p>\n<h2>You expected it to be a very large negative number</h2>\n<p>That's just not what <code>MIN_VALUE</code> does. However, your confusion is understandable; <code>Integer.MIN_VALUE</code> <strong>is</strong> a very large negative number. The concept doesn't apply to float/double, as they have a value that represents negative infinity, which makes 'MIN_VALUE' in the sense of 'that number that is more negative than any other number <code>float</code> can represent' dubious / non-existent. The name is still unfortunate but java does not as a rule change things without a better reason than 'naming is confusing' to avoid backwards compatibility issues.</p>\n<p><code>Float.MIN_VALUE</code> represents the smallest <em>positive</em> representable float that is <em>not</em> equal to 0.</p>\n<h2>I know that. But it prints 0!</h2>\n<p>The problem with float and double is that they are imprecise. If I hand you a postit and ask you to write 1/3 in decimal on it, you can't. You'll write 0.3333 and eventually run out of space. <code>double</code> and <code>float</code> are more or less the same, except in binary except decimal which is particularly painful because only stuff that fits in 2s can be accurately represented. We can do 1/10th in decimal (0.1, after all). In IEEE math that is as problematic as 1/3 is. Almost all fractions are problematic, except 1/2, 3/4th, etc. (the divisor a power of 2 - that's allright).</p>\n<p>Let's see it in action:</p>\n<pre><code>double v = 0.0;\nfor (int i = 0; i &lt; 10; i++) v += 0.1;\nSystem.out.println(v == 1.0);\n</code></pre>\n<p>That prints... oof, <code>false</code>, which is wrong. <code>10 * 0.1</code> is obviously 1.0. But not in IEEE double math, evidently. Just like the sum of 3 postits with your best effort at 1/3 is not quite 1.0 (it'll be 0.9999999), we run into the same problem here.</p>\n<h2>So how does that lead to print 0.0000?</h2>\n<p>Because the number is <em>stored</em> in binary but printed in decimal, and that results in some real wonky and unexpected behaviour if <code>println</code> would print the <em>exact</em> value. You'd get 0.9999999999999999999876 a lot, which is annoying. So, instead, printf/println just takes a <em>wild</em> stab in the dark and does some dubious rounding to make it all look right when none of it is.</p>\n<p>This is why you should <em>never</em> just print a double. Instead use, as you are, <code>printf</code> / <code>String.format</code>. And specify how many digits you want, so you are in control of this necessary rounding. Without an explicit specifier, <code>%f</code> defaults to 6 digits. And 'the smallest non-zero positive float', rounded so that it fits in 6 digits, <em>is</em> 0.000000. You need <em>way</em> more digits to see this tiny, tiny number:</p>\n<pre><code>System.out.printf(&quot;%.99f\\n&quot;, Float.MIN_VALUE);\n\n&gt; 0.0000000000000000000000000000000000000000000014012984643248170000000\n</code></pre>\n<p>That's how many digits you'd need to see it.</p>\n<h2>Some important notes</h2>\n<ul>\n<li><code>float</code> is useless. <code>double</code> is just as fast or faster, takes just as much space in 99% of all cases (except <code>float[]</code> which is usually a bit smaller, but that's the only place where it tends to come up), and is less precise. Just don't use it - <code>double</code> instead.</li>\n<li>Another way to solve for this 'its inaccurate' issue is to not use floats/doubles at all. Find an atomic unit and represent those with int/long, or use BigDecimal. For GUI purposes the inaccuracy is usually worth it, though.</li>\n</ul>\n"}],"owner":{"account_id":28779521,"reputation":47,"user_id":22041411,"display_name":"notwhale"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":97,"favorite_count":0,"down_vote_count":2,"up_vote_count":2,"accepted_answer_id":77121623,"answer_count":1,"score":0,"last_activity_date":1694950915,"creation_date":1694944495,"question_id":77121308,"body_markdown":"So I have a `Vector3f` class with a constructor:\r\n```\r\npublic Vector3f(float x, float y, float z) {\r\n        this.x = x;\r\n        this.y = y;\r\n        this.z = z;\r\n    }\r\n```\r\nbut when I call a constructor like this:\r\n\r\n```\r\nVector3f max = new Vector3f(Float.MIN_VALUE, Float.MIN_VALUE, Float.MIN_VALUE);\r\n```\r\n\r\nand print the values to the console:\r\n```\r\nSystem.out.printf(&quot;x: %f, y: %f, z: %f\\n&quot;, max.x, max.y, max.z);\r\n```\r\nthe output will be\r\n```\r\nx: 0.000000, y: 0.000000, z: 0,000000\r\n```\r\nWhy 0?\r\n\r\nI used `Vector3f` from the Java OpenGL Math Library (JOML).","title":"Why is it that when I call the constructor with Float.MIN_VALUE parameters, they are 0?","body":"<p>So I have a <code>Vector3f</code> class with a constructor:</p>\n<pre><code>public Vector3f(float x, float y, float z) {\n        this.x = x;\n        this.y = y;\n        this.z = z;\n    }\n</code></pre>\n<p>but when I call a constructor like this:</p>\n<pre><code>Vector3f max = new Vector3f(Float.MIN_VALUE, Float.MIN_VALUE, Float.MIN_VALUE);\n</code></pre>\n<p>and print the values to the console:</p>\n<pre><code>System.out.printf(&quot;x: %f, y: %f, z: %f\\n&quot;, max.x, max.y, max.z);\n</code></pre>\n<p>the output will be</p>\n<pre><code>x: 0.000000, y: 0.000000, z: 0,000000\n</code></pre>\n<p>Why 0?</p>\n<p>I used <code>Vector3f</code> from the Java OpenGL Math Library (JOML).</p>\n"},{"tags":["java","spring","spring-boot","authentication","jwt"],"answers":[{"tags":[],"owner":{"account_id":1232800,"reputation":2929,"user_id":1197031,"accept_rate":55,"display_name":"Zala Janaksinh"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1658761743,"creation_date":1658761743,"answer_id":73111477,"question_id":71916160,"body_markdown":"Add this line in gradle.\r\n\r\nimplementation &#39;javax.xml.bind:jaxb-api:2.4.0-b180830.0359&#39;\r\n\r\nDowngrade your **javax.xml.bind:jaxb-api** With specific version.\r\n\r\n","title":"java.lang.NoClassDefFoundError: javax/xml/bind/DatatypeConverter while decoding JWT token with Java 11","body":"<p>Add this line in gradle.</p>\n<p>implementation 'javax.xml.bind:jaxb-api:2.4.0-b180830.0359'</p>\n<p>Downgrade your <strong>javax.xml.bind:jaxb-api</strong> With specific version.</p>\n"},{"tags":[],"owner":{"account_id":15375039,"reputation":508,"user_id":11092008,"display_name":"Shapur"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1694950460,"creation_date":1673526801,"answer_id":75096394,"question_id":71916160,"body_markdown":"Add this class to your application for now until new versions of io.jsonwebtoken that work with `jakarta&#39; are ready in the future.\r\n\r\nThe path of this class must be `io.jsonwebtoken.impl`\r\n\r\n    package io.jsonwebtoken.impl;\r\n    \r\n    import jakarta.xml.bind.DatatypeConverter;\r\n    \r\n    public class Base64Codec extends AbstractTextCodec {\r\n        public Base64Codec() {\r\n        }\r\n    \r\n        public String encode(byte[] data) {\r\n            return DatatypeConverter.printBase64Binary(data);\r\n        }\r\n    \r\n        public byte[] decode(String encoded) {\r\n            return DatatypeConverter.parseBase64Binary(encoded);\r\n        }\r\n    }","title":"java.lang.NoClassDefFoundError: javax/xml/bind/DatatypeConverter while decoding JWT token with Java 11","body":"<p>Add this class to your application for now until new versions of io.jsonwebtoken that work with `jakarta' are ready in the future.</p>\n<p>The path of this class must be <code>io.jsonwebtoken.impl</code></p>\n<pre><code>package io.jsonwebtoken.impl;\n\nimport jakarta.xml.bind.DatatypeConverter;\n\npublic class Base64Codec extends AbstractTextCodec {\n    public Base64Codec() {\n    }\n\n    public String encode(byte[] data) {\n        return DatatypeConverter.printBase64Binary(data);\n    }\n\n    public byte[] decode(String encoded) {\n        return DatatypeConverter.parseBase64Binary(encoded);\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":24990939,"reputation":21,"user_id":18852134,"display_name":"Araich"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1704,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":2,"score":2,"last_activity_date":1694950460,"creation_date":1650309799,"question_id":71916160,"body_markdown":"When calling this method for decoding a JWT token javax.xml.bind.DatatypeConverter.parseBase64Binary(encoded) I get this exception:\r\n\r\n    org.springframework.web.util.NestedServletException: Handler dispatch failed; nested exception is java.lang.NoClassDefFoundError: javax/xml/bind/DatatypeConverter\r\n\tat org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1082)\r\n\tat org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:963)\r\n\tat org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006)\r\n\tat org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:898)\r\n\r\n\r\n    Caused by: java.lang.NoClassDefFoundError: javax/xml/bind/DatatypeConverter\r\n\tat io.jsonwebtoken.impl.Base64Codec.decode(Base64Codec.java:26)\r\n\tat io.jsonwebtoken.impl.Base64UrlCodec.decode(Base64UrlCodec.java:78)\r\n\tat io.jsonwebtoken.impl.AbstractTextCodec.decodeToString(AbstractTextCodec.java:36)\r\n\tat io.jsonwebtoken.impl.DefaultJwtParser.parse(DefaultJwtParser.java:251)\r\n\tat io.jsonwebtoken.impl.DefaultJwtParser.parse(DefaultJwtParser.java:481)\r\n\tat io.jsonwebtoken.impl.DefaultJwtParser.parseClaimsJws(DefaultJwtParser.java:541)\r\n\r\n\r\nI have this external libraries on the project among others:\r\n\r\n  \r\n\r\n    implementation &quot;jakarta.xml.bind:jakarta.xml.bind-api:3.0.1&quot;\r\n      implementation &quot;org.glassfish.jaxb:jaxb-runtime:3.0.2&quot;\r\n      io.jsonwebtoken:jjwt:0.9.1\r\n    javax.xml.bind:jaxb-api:2.3.1\r\n\r\nIn the external library  javax.xml.bind:jaxb-api:2.3.1 I can find the javax/xml/bind/DatatypeConverter used in the code so I don&#39;t understand why I&#39;m getting the NoClassDefFoundError.\r\n\r\nI use Java 11 on the project and spring boot.\r\n\r\nThanks for the help.","title":"java.lang.NoClassDefFoundError: javax/xml/bind/DatatypeConverter while decoding JWT token with Java 11","body":"<p>When calling this method for decoding a JWT token javax.xml.bind.DatatypeConverter.parseBase64Binary(encoded) I get this exception:</p>\n<pre><code>org.springframework.web.util.NestedServletException: Handler dispatch failed; nested exception is java.lang.NoClassDefFoundError: javax/xml/bind/DatatypeConverter\nat org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1082)\nat org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:963)\nat org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006)\nat org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:898)\n\n\nCaused by: java.lang.NoClassDefFoundError: javax/xml/bind/DatatypeConverter\nat io.jsonwebtoken.impl.Base64Codec.decode(Base64Codec.java:26)\nat io.jsonwebtoken.impl.Base64UrlCodec.decode(Base64UrlCodec.java:78)\nat io.jsonwebtoken.impl.AbstractTextCodec.decodeToString(AbstractTextCodec.java:36)\nat io.jsonwebtoken.impl.DefaultJwtParser.parse(DefaultJwtParser.java:251)\nat io.jsonwebtoken.impl.DefaultJwtParser.parse(DefaultJwtParser.java:481)\nat io.jsonwebtoken.impl.DefaultJwtParser.parseClaimsJws(DefaultJwtParser.java:541)\n</code></pre>\n<p>I have this external libraries on the project among others:</p>\n<pre><code>implementation &quot;jakarta.xml.bind:jakarta.xml.bind-api:3.0.1&quot;\n  implementation &quot;org.glassfish.jaxb:jaxb-runtime:3.0.2&quot;\n  io.jsonwebtoken:jjwt:0.9.1\njavax.xml.bind:jaxb-api:2.3.1\n</code></pre>\n<p>In the external library  javax.xml.bind:jaxb-api:2.3.1 I can find the javax/xml/bind/DatatypeConverter used in the code so I don't understand why I'm getting the NoClassDefFoundError.</p>\n<p>I use Java 11 on the project and spring boot.</p>\n<p>Thanks for the help.</p>\n"},{"tags":["java","http","networking","jmeter"],"comments":[{"owner":{"account_id":1796479,"reputation":463,"user_id":1635802,"display_name":"klingac"},"score":0,"creation_date":1502803848,"post_id":45671822,"comment_id":78345659,"body_markdown":"could you please specify how is your KeepAlive set on your proxy server. Or just show us Response headers from previuos sampler result. I expect that therte should be something like this:\nKeep-Alive: timeout=15, max=100\nConnection: Keep-Alive","body":"could you please specify how is your KeepAlive set on your proxy server. Or just show us Response headers from previuos sampler result. I expect that therte should be something like this: Keep-Alive: timeout=15, max=100 Connection: Keep-Alive"}],"answers":[{"tags":[],"owner":{"account_id":209652,"reputation":34028,"user_id":460802,"display_name":"UBIK LOAD PACK"},"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1502712927,"creation_date":1502711533,"answer_id":45673919,"question_id":45671822,"body_markdown":"You most probably don&#39;t have access to the target host from where you test.\r\n\r\nDid you configure proxy as your web browser is probably configured\r\n\r\n- http://jmeter.apache.org/usermanual/get-started.html#proxy_server\r\n\r\nBut if failure is partial, then you server might be overloaded and rejecting some requests.","title":"Jmeter I keep getting: &#39;java.net.ConnectException: Connection timed out: connect&#39;?","body":"<p>You most probably don't have access to the target host from where you test.</p>\n\n<p>Did you configure proxy as your web browser is probably configured</p>\n\n<ul>\n<li><a href=\"http://jmeter.apache.org/usermanual/get-started.html#proxy_server\" rel=\"nofollow noreferrer\">http://jmeter.apache.org/usermanual/get-started.html#proxy_server</a></li>\n</ul>\n\n<p>But if failure is partial, then you server might be overloaded and rejecting some requests.</p>\n"},{"tags":[],"owner":{"account_id":3460456,"reputation":162728,"user_id":2897748,"display_name":"Dmitri T"},"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1502775825,"creation_date":1502775825,"answer_id":45687076,"question_id":45671822,"body_markdown":"My expectation is that &quot;problematic&quot; requests are simply not able to finish in 20 seconds (most probably you have modified Connect timeout and set this value in [HTTP Request][1] or [HTTP Request Defaults][2])\r\n\r\n20 seconds looks like a long response time to me so your finding indicates application under test performance problem. \r\n\r\nGoing forward if you would like to see more &quot;human readable&quot; message in the results file switch to [Duration Assertion][3] instead of setting timeouts on protocol level \r\n\r\n[![JMeter Duration Assertion][4]][4]\r\n\r\nSee [How to Use JMeter Assertions in Three Easy Steps][5] article for more information on conditionally failing JMeter requests.\r\n\r\n\r\n  [1]: http://jmeter.apache.org/usermanual/component_reference.html#HTTP_Request\r\n  [2]: http://jmeter.apache.org/usermanual/component_reference.html#HTTP_Request_Defaults\r\n  [3]: http://jmeter.apache.org/usermanual/component_reference.html#Duration_Assertion\r\n  [4]: https://i.stack.imgur.com/GA8ye.png\r\n  [5]: https://www.blazemeter.com/blog/how-use-jmeter-assertions-3-easy-steps","title":"Jmeter I keep getting: &#39;java.net.ConnectException: Connection timed out: connect&#39;?","body":"<p>My expectation is that \"problematic\" requests are simply not able to finish in 20 seconds (most probably you have modified Connect timeout and set this value in <a href=\"http://jmeter.apache.org/usermanual/component_reference.html#HTTP_Request\" rel=\"nofollow noreferrer\">HTTP Request</a> or <a href=\"http://jmeter.apache.org/usermanual/component_reference.html#HTTP_Request_Defaults\" rel=\"nofollow noreferrer\">HTTP Request Defaults</a>)</p>\n\n<p>20 seconds looks like a long response time to me so your finding indicates application under test performance problem. </p>\n\n<p>Going forward if you would like to see more \"human readable\" message in the results file switch to <a href=\"http://jmeter.apache.org/usermanual/component_reference.html#Duration_Assertion\" rel=\"nofollow noreferrer\">Duration Assertion</a> instead of setting timeouts on protocol level </p>\n\n<p><a href=\"https://i.stack.imgur.com/GA8ye.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/GA8ye.png\" alt=\"JMeter Duration Assertion\"></a></p>\n\n<p>See <a href=\"https://www.blazemeter.com/blog/how-use-jmeter-assertions-3-easy-steps\" rel=\"nofollow noreferrer\">How to Use JMeter Assertions in Three Easy Steps</a> article for more information on conditionally failing JMeter requests.</p>\n"},{"tags":[],"owner":{"account_id":7406054,"reputation":348,"user_id":5634959,"display_name":"bsd007"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1502978782,"creation_date":1502978782,"answer_id":45737367,"question_id":45671822,"body_markdown":"Please check client configuration from where you are running your tests. It might be like your client system is not able to handle 200 threads. Do the test iteration wise means try with 10, 50 , 70 and so on. Check from which iteration onwards you are getting the error. It is also advisable not to include the listeners during load testing. \r\n\r\nPlease check the best practices for load testing using jmeter.  \r\nhttp://jmeter.apache.org/usermanual/best-practices.html","title":"Jmeter I keep getting: &#39;java.net.ConnectException: Connection timed out: connect&#39;?","body":"<p>Please check client configuration from where you are running your tests. It might be like your client system is not able to handle 200 threads. Do the test iteration wise means try with 10, 50 , 70 and so on. Check from which iteration onwards you are getting the error. It is also advisable not to include the listeners during load testing. </p>\n\n<p>Please check the best practices for load testing using jmeter.<br>\n<a href=\"http://jmeter.apache.org/usermanual/best-practices.html\" rel=\"nofollow noreferrer\">http://jmeter.apache.org/usermanual/best-practices.html</a></p>\n"}],"owner":{"account_id":11080488,"reputation":509,"user_id":8135799,"accept_rate":61,"display_name":"xGIx"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":19433,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":3,"score":0,"last_activity_date":1694948790,"creation_date":1502704183,"question_id":45671822,"body_markdown":"**Jmeter I keep getting: &#39;java.net.ConnectException: Connection timed out: connect&#39; ?**\r\n\r\n1. I have created a load test which tests a specific url at 200 users\r\n2. when running the load test for x1 iteration i keep seem to be getting: Connection timed outs?\r\n3. I have made the following changes listed here: https://msdn.microsoft.com/en-us/library/aa560610(v=bts.20).aspx\r\n\r\nBut the issue is still there:\r\n[![enter image description here][1][1]\r\n\r\n[![enter image description here][2]][2]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/YyQRh.png\r\n  [2]: https://i.stack.imgur.com/HHkB9.png","title":"Jmeter I keep getting: &#39;java.net.ConnectException: Connection timed out: connect&#39;?","body":"<p><strong>Jmeter I keep getting: 'java.net.ConnectException: Connection timed out: connect' ?</strong></p>\n\n<ol>\n<li>I have created a load test which tests a specific url at 200 users</li>\n<li>when running the load test for x1 iteration i keep seem to be getting: Connection timed outs?</li>\n<li>I have made the following changes listed here: <a href=\"https://msdn.microsoft.com/en-us/library/aa560610(v=bts.20).aspx\" rel=\"nofollow noreferrer\">https://msdn.microsoft.com/en-us/library/aa560610(v=bts.20).aspx</a></li>\n</ol>\n\n<p>But the issue is still there:\n[<img src=\"https://i.stack.imgur.com/YyQRh.png\" alt=\"enter image description here\"><a href=\"https://i.stack.imgur.com/YyQRh.png\" rel=\"nofollow noreferrer\">1</a></p>\n\n<p><a href=\"https://i.stack.imgur.com/HHkB9.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/HHkB9.png\" alt=\"enter image description here\"></a></p>\n"},{"tags":["java","android","firebase","android-recyclerview","pagination"],"comments":[{"owner":{"account_id":6819231,"reputation":132841,"user_id":5246885,"accept_rate":78,"display_name":"Alex Mamo"},"score":0,"creation_date":1694773826,"post_id":77111041,"comment_id":135938551,"body_markdown":"Where are you calling `loadMoreData()` from?","body":"Where are you calling <code>loadMoreData()</code> from?"},{"owner":{"account_id":28586343,"reputation":1,"user_id":21886478,"display_name":"DeATHuMmEr1911"},"score":0,"creation_date":1694921396,"post_id":77111041,"comment_id":135954112,"body_markdown":"in my recyclerview scroll listner.i eveen changed it by a next button still the same it doesnt know when  im at the last item","body":"in my recyclerview scroll listner.i eveen changed it by a next button still the same it doesnt know when  im at the last item"},{"owner":{"account_id":6819231,"reputation":132841,"user_id":5246885,"accept_rate":78,"display_name":"Alex Mamo"},"score":0,"creation_date":1694931654,"post_id":77111041,"comment_id":135954710,"body_markdown":"If you understand Kotlin, I think that this [resource](https://medium.com/firebase-tips-tricks/how-to-implement-pagination-in-realtime-database-using-jetpack-compose-bd49084c8fd4) will help. Here is the corresponding [repo](https://github.com/alexmamo/RealtimeDatabasePaginationJetpackCompose).","body":"If you understand Kotlin, I think that this <a href=\"https://medium.com/firebase-tips-tricks/how-to-implement-pagination-in-realtime-database-using-jetpack-compose-bd49084c8fd4\" rel=\"nofollow noreferrer\">resource</a> will help. Here is the corresponding <a href=\"https://github.com/alexmamo/RealtimeDatabasePaginationJetpackCompose\" rel=\"nofollow noreferrer\">repo</a>."}],"owner":{"account_id":28586343,"reputation":1,"user_id":21886478,"display_name":"DeATHuMmEr1911"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":20,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1694948611,"creation_date":1694768547,"question_id":77111041,"body_markdown":"the pagination works fine but when i get to the last item i want to stop loading more,it loads the same data again and again.If u can in the first load database method i want to load only the new data and add it to the recycler view tnx.\r\n\r\n\r\n\r\n```\r\npackage com.example.freelancerapp10.MainFragments;\r\n\r\nimport android.os.Bundle;\r\n\r\nimport androidx.annotation.NonNull;\r\nimport androidx.fragment.app.Fragment;\r\n\r\nimport android.os.Handler;\r\nimport android.os.Parcelable;\r\nimport android.util.Log;\r\nimport android.view.LayoutInflater;\r\nimport android.view.View;\r\nimport android.view.ViewGroup;\r\nimport androidx.appcompat.widget.SearchView;\r\nimport androidx.recyclerview.widget.DiffUtil;\r\nimport androidx.recyclerview.widget.LinearLayoutManager;\r\nimport androidx.recyclerview.widget.RecyclerView;\r\nimport androidx.swiperefreshlayout.widget.SwipeRefreshLayout;\r\n\r\nimport android.widget.Button;\r\nimport android.widget.ProgressBar;\r\nimport android.widget.TextView;\r\nimport android.widget.Toast;\r\n\r\nimport com.example.freelancerapp10.adapters.HomeAdapter;\r\nimport com.example.freelancerapp10.model.HomeModel;\r\nimport com.example.freelancerapp10.R;\r\nimport com.example.freelancerapp10.utils.HomeDiffCallback;\r\nimport com.google.firebase.database.DataSnapshot;\r\nimport com.google.firebase.database.DatabaseError;\r\nimport com.google.firebase.database.DatabaseReference;\r\nimport com.google.firebase.database.FirebaseDatabase;\r\nimport com.google.firebase.database.Query;\r\nimport com.google.firebase.database.ValueEventListener;\r\n\r\nimport java.util.ArrayList;\r\nimport java.util.Collections;\r\nimport java.util.List;\r\n\r\npublic class HomeFragment extends Fragment {\r\n    private List&lt;HomeModel&gt; mHomeItems;\r\n    private RecyclerView recyclerView;\r\n    private HomeAdapter adapter;\r\n    private DatabaseReference databaseReference;\r\n    private SwipeRefreshLayout swipeRefreshLayout;\r\n    private ProgressBar progressBar,progressBarRow;\r\n    private View rootView;\r\n    TextView noData;\r\n\r\n    long lastTimestamp = 0;\r\n    Parcelable recyclerViewState;\r\n    private boolean isLoading = false;\r\n    private boolean isLastPage = false;\r\n\r\n\r\n    @Override\r\n    public View onCreateView(LayoutInflater inflater, ViewGroup container,\r\n                             Bundle savedInstanceState) {\r\n        rootView = inflater.inflate(R.layout.fragment_home, container, false);\r\n        mHomeItems = new ArrayList&lt;&gt;();\r\n        swipeRefreshLayout = rootView.findViewById(R.id.swipeRefresh);\r\n        noData = rootView.findViewById(R.id.noHomeItemsTextView);\r\n\r\n        recyclerView = rootView.findViewById(R.id.recyclerView);\r\n        progressBar = rootView.findViewById(R.id.progressbarHome);\r\n        progressBarRow = rootView.findViewById(R.id.progressBarLoadMore);\r\n        //\r\n\r\n        LinearLayoutManager manager = new LinearLayoutManager(getActivity());\r\n        recyclerView.setLayoutManager(manager);\r\n        adapter = new HomeAdapter(getContext(), mHomeItems);\r\n        recyclerView.setAdapter(adapter);\r\n\r\n\r\n        databaseReference = FirebaseDatabase.getInstance().getReference(&quot;Job Data&quot;);\r\n\r\n        recyclerView.addOnScrollListener(onScrollListener);\r\n        swipeDownToRefresh();\r\n        setupSearchView();\r\n\r\n        loadDataFromDatabase();\r\n\r\n\r\n        return rootView;\r\n    }\r\n\r\n    private void swipeDownToRefresh() {\r\n        swipeRefreshLayout.setOnRefreshListener(() -&gt; {\r\n            progressBar.setVisibility(View.GONE);\r\n            loadDataFromDatabase();\r\n        });\r\n    }\r\n\r\n    private void loadDataFromDatabase() {\r\n        databaseReference.orderByChild(&quot;timestamp&quot;)\r\n                .limitToLast(11).addListenerForSingleValueEvent(new ValueEventListener() {\r\n            @Override\r\n            public void onDataChange(@NonNull DataSnapshot snapshot) {\r\n                List&lt;HomeModel&gt; updatedList = new ArrayList&lt;&gt;();\r\n                if (snapshot.exists()) {\r\n                    for (DataSnapshot itemSnapshot : snapshot.getChildren()) {\r\n                        HomeModel homeModel = itemSnapshot.getValue(HomeModel.class);\r\n                        homeModel.setKey(itemSnapshot.getKey());\r\n                        updatedList.add(homeModel);\r\n                    }\r\n                    lastTimestamp =  updatedList.get(0).getTimestamp();\r\n                    Collections.reverse(updatedList);\r\n                    updatedList.remove(updatedList.size() - 1);\r\n                    refreshTheAdapterAndView(updatedList);\r\n                    isLoading = false;\r\n                    isLastPage = false;\r\n                } else {\r\n                    handleNoData();\r\n                }\r\n            }\r\n\r\n            @Override\r\n            public void onCancelled(@NonNull DatabaseError error) {\r\n                // Handle error\r\n            }\r\n        });\r\n    }\r\n\r\n\r\n    private void loadMoreData() {\r\n        if (isLastPage || isLoading) {\r\n        return;\r\n        }\r\n\r\n        isLoading = true;\r\n        progressBarRow.setVisibility(View.VISIBLE);\r\n\r\n        databaseReference.orderByChild(&quot;timestamp&quot;)\r\n                .endAt(lastTimestamp)\r\n                .limitToLast(11).addListenerForSingleValueEvent(new ValueEventListener() {\r\n                    @Override\r\n                    public void onDataChange(@NonNull DataSnapshot snapshot) {\r\n                        List&lt;HomeModel&gt; updatedList = new ArrayList&lt;&gt;();\r\n                        if (snapshot.exists()) {\r\n                            for (DataSnapshot itemSnapshot : snapshot.getChildren()) {\r\n                                HomeModel homeModel = itemSnapshot.getValue(HomeModel.class);\r\n                                homeModel.setKey(itemSnapshot.getKey());\r\n                                updatedList.add(homeModel);\r\n                            }\r\n\r\n                            if (updatedList.size() &lt; 11 ) {\r\n                                Toast.makeText(getContext(), &quot;You reached last item&quot;, Toast.LENGTH_SHORT).show();\r\n                                isLastPage = true;\r\n                                isLoading = false;\r\n                                Collections.reverse(updatedList);\r\n                                progressBarRow.setVisibility(View.GONE);\r\n                                recyclerViewState = recyclerView.getLayoutManager().onSaveInstanceState();\r\n                                refreshLoadMore(updatedList);\r\n                                return;\r\n                            }\r\n\r\n                            lastTimestamp =  updatedList.get(0).getTimestamp();\r\n                            Collections.reverse(updatedList);\r\n                            updatedList.remove(updatedList.size() - 1);\r\n                            recyclerViewState = recyclerView.getLayoutManager().onSaveInstanceState();\r\n                            refreshLoadMore(updatedList);\r\n                            isLoading = false;\r\n                            progressBarRow.setVisibility(View.GONE);\r\n                        } else {\r\n                            handleNoData();\r\n                        }\r\n\r\n                    }\r\n\r\n                    @Override\r\n                    public void onCancelled(@NonNull DatabaseError error) {\r\n                        isLoading = false;\r\n                        progressBarRow.setVisibility(View.GONE);\r\n                    }\r\n                });\r\n    }\r\n\r\n\r\n    private void refreshLoadMore(List&lt;HomeModel&gt; updatedList) {\r\n        HomeDiffCallback diffCallback = new HomeDiffCallback(mHomeItems, updatedList);\r\n        DiffUtil.DiffResult diffResult = DiffUtil.calculateDiff(diffCallback);\r\n\r\n        // Append new data to the existing list\r\n        mHomeItems.addAll(updatedList);\r\n\r\n        progressBar.setVisibility(View.GONE);\r\n        swipeRefreshLayout.setRefreshing(false);\r\n\r\n\r\n        diffResult.dispatchUpdatesTo(adapter);\r\n        recyclerView.getLayoutManager().onRestoreInstanceState(recyclerViewState);\r\n    }\r\n\r\n    private void refreshTheAdapterAndView(List&lt;HomeModel&gt; updatedList) {\r\n        HomeDiffCallback diffCallback = new HomeDiffCallback(mHomeItems, updatedList);\r\n        DiffUtil.DiffResult diffResult = DiffUtil.calculateDiff(diffCallback);\r\n\r\n        mHomeItems.clear();\r\n        mHomeItems.addAll(updatedList);\r\n\r\n        progressBar.setVisibility(View.GONE);\r\n        swipeRefreshLayout.setRefreshing(false);\r\n\r\n        if (mHomeItems.isEmpty()) {\r\n            noData.setVisibility(View.VISIBLE);\r\n        } else {\r\n            noData.setVisibility(View.GONE);\r\n        }\r\n\r\n        diffResult.dispatchUpdatesTo(adapter);\r\n    }\r\n\r\n    private void handleNoData() {\r\n        mHomeItems.clear();\r\n        noData.setVisibility(View.VISIBLE);\r\n        progressBar.setVisibility(View.GONE);\r\n        swipeRefreshLayout.setRefreshing(false);\r\n        adapter.notifyDataSetChanged();\r\n    }\r\n\r\n    private RecyclerView.OnScrollListener onScrollListener = new RecyclerView.OnScrollListener() {\r\n        @Override\r\n        public void onScrolled(@NonNull RecyclerView recyclerView, int dx, int dy) {\r\n            super.onScrolled(recyclerView, dx, dy);\r\n            LinearLayoutManager layoutManager = (LinearLayoutManager) recyclerView.getLayoutManager();\r\n\r\n            int totalItemCount = layoutManager.getItemCount();\r\n            int lastVisibleItem = layoutManager.findLastVisibleItemPosition();\r\n\r\n            // Check if we&#39;ve reached the end of the list\r\n            if (lastVisibleItem == totalItemCount - 1 &amp;&amp; dy &gt; 0) {\r\n                // Load more data\r\n                loadMoreData();\r\n            }\r\n        }\r\n    };\r\n\r\n    private void setupSearchView() {\r\n        SearchView searchView = rootView.findViewById(R.id.search_view);\r\n        searchView.setMaxWidth(Integer.MAX_VALUE);\r\n\r\n        searchView.setOnQueryTextListener(new SearchView.OnQueryTextListener() {\r\n            @Override\r\n            public boolean onQueryTextSubmit(String query) {\r\n                Toast.makeText(getContext(), &quot;Search query submitted: &quot; + query, Toast.LENGTH_SHORT).show();\r\n                return true;\r\n            }\r\n\r\n            @Override\r\n            public boolean onQueryTextChange(String newText) {\r\n                // Handle search query text changes\r\n                return true;\r\n            }\r\n        });\r\n    }\r\n\r\n    @Override\r\n    public void onPause() {\r\n        super.onPause();\r\n        new Handler().postDelayed(() -&gt; {\r\n            progressBarRow.setVisibility(View.GONE);\r\n        }, 100);\r\n        if (swipeRefreshLayout != null &amp;&amp; swipeRefreshLayout.isRefreshing()) {\r\n            swipeRefreshLayout.setRefreshing(false);\r\n        }\r\n    }\r\n}\r\n```\r\n\r\n    \r\n\r\ni want to do pagination in my android app and it worked but it loads uneccery datas.","title":"paging from firebase realtime database to recycler view","body":"<p>the pagination works fine but when i get to the last item i want to stop loading more,it loads the same data again and again.If u can in the first load database method i want to load only the new data and add it to the recycler view tnx.</p>\n<pre><code>package com.example.freelancerapp10.MainFragments;\n\nimport android.os.Bundle;\n\nimport androidx.annotation.NonNull;\nimport androidx.fragment.app.Fragment;\n\nimport android.os.Handler;\nimport android.os.Parcelable;\nimport android.util.Log;\nimport android.view.LayoutInflater;\nimport android.view.View;\nimport android.view.ViewGroup;\nimport androidx.appcompat.widget.SearchView;\nimport androidx.recyclerview.widget.DiffUtil;\nimport androidx.recyclerview.widget.LinearLayoutManager;\nimport androidx.recyclerview.widget.RecyclerView;\nimport androidx.swiperefreshlayout.widget.SwipeRefreshLayout;\n\nimport android.widget.Button;\nimport android.widget.ProgressBar;\nimport android.widget.TextView;\nimport android.widget.Toast;\n\nimport com.example.freelancerapp10.adapters.HomeAdapter;\nimport com.example.freelancerapp10.model.HomeModel;\nimport com.example.freelancerapp10.R;\nimport com.example.freelancerapp10.utils.HomeDiffCallback;\nimport com.google.firebase.database.DataSnapshot;\nimport com.google.firebase.database.DatabaseError;\nimport com.google.firebase.database.DatabaseReference;\nimport com.google.firebase.database.FirebaseDatabase;\nimport com.google.firebase.database.Query;\nimport com.google.firebase.database.ValueEventListener;\n\nimport java.util.ArrayList;\nimport java.util.Collections;\nimport java.util.List;\n\npublic class HomeFragment extends Fragment {\n    private List&lt;HomeModel&gt; mHomeItems;\n    private RecyclerView recyclerView;\n    private HomeAdapter adapter;\n    private DatabaseReference databaseReference;\n    private SwipeRefreshLayout swipeRefreshLayout;\n    private ProgressBar progressBar,progressBarRow;\n    private View rootView;\n    TextView noData;\n\n    long lastTimestamp = 0;\n    Parcelable recyclerViewState;\n    private boolean isLoading = false;\n    private boolean isLastPage = false;\n\n\n    @Override\n    public View onCreateView(LayoutInflater inflater, ViewGroup container,\n                             Bundle savedInstanceState) {\n        rootView = inflater.inflate(R.layout.fragment_home, container, false);\n        mHomeItems = new ArrayList&lt;&gt;();\n        swipeRefreshLayout = rootView.findViewById(R.id.swipeRefresh);\n        noData = rootView.findViewById(R.id.noHomeItemsTextView);\n\n        recyclerView = rootView.findViewById(R.id.recyclerView);\n        progressBar = rootView.findViewById(R.id.progressbarHome);\n        progressBarRow = rootView.findViewById(R.id.progressBarLoadMore);\n        //\n\n        LinearLayoutManager manager = new LinearLayoutManager(getActivity());\n        recyclerView.setLayoutManager(manager);\n        adapter = new HomeAdapter(getContext(), mHomeItems);\n        recyclerView.setAdapter(adapter);\n\n\n        databaseReference = FirebaseDatabase.getInstance().getReference(&quot;Job Data&quot;);\n\n        recyclerView.addOnScrollListener(onScrollListener);\n        swipeDownToRefresh();\n        setupSearchView();\n\n        loadDataFromDatabase();\n\n\n        return rootView;\n    }\n\n    private void swipeDownToRefresh() {\n        swipeRefreshLayout.setOnRefreshListener(() -&gt; {\n            progressBar.setVisibility(View.GONE);\n            loadDataFromDatabase();\n        });\n    }\n\n    private void loadDataFromDatabase() {\n        databaseReference.orderByChild(&quot;timestamp&quot;)\n                .limitToLast(11).addListenerForSingleValueEvent(new ValueEventListener() {\n            @Override\n            public void onDataChange(@NonNull DataSnapshot snapshot) {\n                List&lt;HomeModel&gt; updatedList = new ArrayList&lt;&gt;();\n                if (snapshot.exists()) {\n                    for (DataSnapshot itemSnapshot : snapshot.getChildren()) {\n                        HomeModel homeModel = itemSnapshot.getValue(HomeModel.class);\n                        homeModel.setKey(itemSnapshot.getKey());\n                        updatedList.add(homeModel);\n                    }\n                    lastTimestamp =  updatedList.get(0).getTimestamp();\n                    Collections.reverse(updatedList);\n                    updatedList.remove(updatedList.size() - 1);\n                    refreshTheAdapterAndView(updatedList);\n                    isLoading = false;\n                    isLastPage = false;\n                } else {\n                    handleNoData();\n                }\n            }\n\n            @Override\n            public void onCancelled(@NonNull DatabaseError error) {\n                // Handle error\n            }\n        });\n    }\n\n\n    private void loadMoreData() {\n        if (isLastPage || isLoading) {\n        return;\n        }\n\n        isLoading = true;\n        progressBarRow.setVisibility(View.VISIBLE);\n\n        databaseReference.orderByChild(&quot;timestamp&quot;)\n                .endAt(lastTimestamp)\n                .limitToLast(11).addListenerForSingleValueEvent(new ValueEventListener() {\n                    @Override\n                    public void onDataChange(@NonNull DataSnapshot snapshot) {\n                        List&lt;HomeModel&gt; updatedList = new ArrayList&lt;&gt;();\n                        if (snapshot.exists()) {\n                            for (DataSnapshot itemSnapshot : snapshot.getChildren()) {\n                                HomeModel homeModel = itemSnapshot.getValue(HomeModel.class);\n                                homeModel.setKey(itemSnapshot.getKey());\n                                updatedList.add(homeModel);\n                            }\n\n                            if (updatedList.size() &lt; 11 ) {\n                                Toast.makeText(getContext(), &quot;You reached last item&quot;, Toast.LENGTH_SHORT).show();\n                                isLastPage = true;\n                                isLoading = false;\n                                Collections.reverse(updatedList);\n                                progressBarRow.setVisibility(View.GONE);\n                                recyclerViewState = recyclerView.getLayoutManager().onSaveInstanceState();\n                                refreshLoadMore(updatedList);\n                                return;\n                            }\n\n                            lastTimestamp =  updatedList.get(0).getTimestamp();\n                            Collections.reverse(updatedList);\n                            updatedList.remove(updatedList.size() - 1);\n                            recyclerViewState = recyclerView.getLayoutManager().onSaveInstanceState();\n                            refreshLoadMore(updatedList);\n                            isLoading = false;\n                            progressBarRow.setVisibility(View.GONE);\n                        } else {\n                            handleNoData();\n                        }\n\n                    }\n\n                    @Override\n                    public void onCancelled(@NonNull DatabaseError error) {\n                        isLoading = false;\n                        progressBarRow.setVisibility(View.GONE);\n                    }\n                });\n    }\n\n\n    private void refreshLoadMore(List&lt;HomeModel&gt; updatedList) {\n        HomeDiffCallback diffCallback = new HomeDiffCallback(mHomeItems, updatedList);\n        DiffUtil.DiffResult diffResult = DiffUtil.calculateDiff(diffCallback);\n\n        // Append new data to the existing list\n        mHomeItems.addAll(updatedList);\n\n        progressBar.setVisibility(View.GONE);\n        swipeRefreshLayout.setRefreshing(false);\n\n\n        diffResult.dispatchUpdatesTo(adapter);\n        recyclerView.getLayoutManager().onRestoreInstanceState(recyclerViewState);\n    }\n\n    private void refreshTheAdapterAndView(List&lt;HomeModel&gt; updatedList) {\n        HomeDiffCallback diffCallback = new HomeDiffCallback(mHomeItems, updatedList);\n        DiffUtil.DiffResult diffResult = DiffUtil.calculateDiff(diffCallback);\n\n        mHomeItems.clear();\n        mHomeItems.addAll(updatedList);\n\n        progressBar.setVisibility(View.GONE);\n        swipeRefreshLayout.setRefreshing(false);\n\n        if (mHomeItems.isEmpty()) {\n            noData.setVisibility(View.VISIBLE);\n        } else {\n            noData.setVisibility(View.GONE);\n        }\n\n        diffResult.dispatchUpdatesTo(adapter);\n    }\n\n    private void handleNoData() {\n        mHomeItems.clear();\n        noData.setVisibility(View.VISIBLE);\n        progressBar.setVisibility(View.GONE);\n        swipeRefreshLayout.setRefreshing(false);\n        adapter.notifyDataSetChanged();\n    }\n\n    private RecyclerView.OnScrollListener onScrollListener = new RecyclerView.OnScrollListener() {\n        @Override\n        public void onScrolled(@NonNull RecyclerView recyclerView, int dx, int dy) {\n            super.onScrolled(recyclerView, dx, dy);\n            LinearLayoutManager layoutManager = (LinearLayoutManager) recyclerView.getLayoutManager();\n\n            int totalItemCount = layoutManager.getItemCount();\n            int lastVisibleItem = layoutManager.findLastVisibleItemPosition();\n\n            // Check if we've reached the end of the list\n            if (lastVisibleItem == totalItemCount - 1 &amp;&amp; dy &gt; 0) {\n                // Load more data\n                loadMoreData();\n            }\n        }\n    };\n\n    private void setupSearchView() {\n        SearchView searchView = rootView.findViewById(R.id.search_view);\n        searchView.setMaxWidth(Integer.MAX_VALUE);\n\n        searchView.setOnQueryTextListener(new SearchView.OnQueryTextListener() {\n            @Override\n            public boolean onQueryTextSubmit(String query) {\n                Toast.makeText(getContext(), &quot;Search query submitted: &quot; + query, Toast.LENGTH_SHORT).show();\n                return true;\n            }\n\n            @Override\n            public boolean onQueryTextChange(String newText) {\n                // Handle search query text changes\n                return true;\n            }\n        });\n    }\n\n    @Override\n    public void onPause() {\n        super.onPause();\n        new Handler().postDelayed(() -&gt; {\n            progressBarRow.setVisibility(View.GONE);\n        }, 100);\n        if (swipeRefreshLayout != null &amp;&amp; swipeRefreshLayout.isRefreshing()) {\n            swipeRefreshLayout.setRefreshing(false);\n        }\n    }\n}\n</code></pre>\n<p>i want to do pagination in my android app and it worked but it loads uneccery datas.</p>\n"},{"tags":["java","mockito"],"comments":[{"owner":{"account_id":6520,"reputation":10523,"user_id":11002,"accept_rate":75,"display_name":"tgdavies"},"score":4,"creation_date":1678924852,"post_id":75750861,"comment_id":133629629,"body_markdown":"Write a component for retrieving environment variables and mock it, don&#39;t access them directly.","body":"Write a component for retrieving environment variables and mock it, don&#39;t access them directly."},{"owner":{"account_id":10985081,"reputation":497,"user_id":8071067,"display_name":"MarkBeras"},"score":0,"creation_date":1678958992,"post_id":75750861,"comment_id":133634834,"body_markdown":"thanks, I already have that but I wanted to add tests for this component as I need a higher code coverage","body":"thanks, I already have that but I wanted to add tests for this component as I need a higher code coverage"},{"owner":{"account_id":6520,"reputation":10523,"user_id":11002,"accept_rate":75,"display_name":"tgdavies"},"score":2,"creation_date":1678959113,"post_id":75750861,"comment_id":133634858,"body_markdown":"I suggest that you make that component trivial and don&#39;t test it. All it needs is a single method to call `System.getenv()`","body":"I suggest that you make that component trivial and don&#39;t test it. All it needs is a single method to call <code>System.getenv()</code>"}],"answers":[{"tags":[],"owner":{"account_id":4881680,"reputation":6434,"user_id":3935325,"accept_rate":86,"display_name":"villasv"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1688502507,"creation_date":1688502507,"answer_id":76615705,"question_id":75750861,"body_markdown":"If you want to get pre-Java16 behavior, you can use \r\n\r\n    --add-opens=java.base/java.util=ALL-UNNAMED\r\n\r\nin your JVM args. Using `build.gradle.kts` this looks something like\r\n\r\n    withType&lt;Test&gt; {\r\n        ...\r\n        jvmArgs(&quot;--add-opens=java.base/java.util=ALL-UNNAMED&quot;)\r\n    }","title":"How to mock System.getenv() for Java17 with JUnit5?","body":"<p>If you want to get pre-Java16 behavior, you can use</p>\n<pre><code>--add-opens=java.base/java.util=ALL-UNNAMED\n</code></pre>\n<p>in your JVM args. Using <code>build.gradle.kts</code> this looks something like</p>\n<pre><code>withType&lt;Test&gt; {\n    ...\n    jvmArgs(&quot;--add-opens=java.base/java.util=ALL-UNNAMED&quot;)\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1434179,"reputation":5113,"user_id":1355930,"display_name":"Ashley Frieze"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1694853034,"creation_date":1694853034,"answer_id":77116976,"question_id":75750861,"body_markdown":"System Rules does not support Java 17. The fork/extension to it - System Stubs - does.\r\n\r\nhttps://github.com/webcompere/system-stubs\r\n\r\n```\r\npublic class SomeTestClass {\r\n    @Rule\r\n    public EnvironmentVariablesRule rule = new EnvironmentVariablesRule();\r\n}\r\n```\r\n\r\nYou can set the environment variables either in the initialiser of the rule, in your `@Before` or during your test.\r\n\r\nThe library comes with support for JUnit4, JUnit and the `system-lambda` mechanisms too.","title":"How to mock System.getenv() for Java17 with JUnit5?","body":"<p>System Rules does not support Java 17. The fork/extension to it - System Stubs - does.</p>\n<p><a href=\"https://github.com/webcompere/system-stubs\" rel=\"nofollow noreferrer\">https://github.com/webcompere/system-stubs</a></p>\n<pre><code>public class SomeTestClass {\n    @Rule\n    public EnvironmentVariablesRule rule = new EnvironmentVariablesRule();\n}\n</code></pre>\n<p>You can set the environment variables either in the initialiser of the rule, in your <code>@Before</code> or during your test.</p>\n<p>The library comes with support for JUnit4, JUnit and the <code>system-lambda</code> mechanisms too.</p>\n"}],"owner":{"account_id":10985081,"reputation":497,"user_id":8071067,"display_name":"MarkBeras"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1346,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"answer_count":2,"score":3,"last_activity_date":1694948525,"creation_date":1678921774,"question_id":75750861,"body_markdown":"I am trying to mock `System.getenv()`. That&#39;s how I am doing it with https://github.com/stefanbirkner/system-rules lib:\r\n\r\n    @ExtendWith(MockitoExtension.class)\r\n    public class SampleTest {\r\n       @Rule\r\n       public final EnvironmentVariables environmentVariables = new EnvironmentVariables();\r\n       @BeforeEach\r\n       public void setup() {\r\n           environmentVariables.set(&quot;AWS_REGION&quot;, TEST_REGION.toString());\r\n           environmentVariables.set(&quot;CLIENT_ACCOUNT_ROLE&quot;, ROLE_ARN);\r\n       }\r\n       ...\r\n    }\r\n\r\nBut build fails with exception:  `java.lang.reflect.InaccessibleObjectException: Unable to make field private final java.util.Map java.util.Collections$UnmodifiableMap.m accessible: module java.base does not &quot;opens java.util&quot; to unnamed module`. The exception happens in the line `environmentVariables.set(&quot;AWS_REGION&quot;, TEST_REGION.toString());`. \r\n\r\nI found similar problem for another annotation https://github.com/junit-pioneer/junit-pioneer/issues/509 but there is no proper solution for it. Is there a way to mock variables for this java and junit version? \r\n\r\n\r\n","title":"How to mock System.getenv() for Java17 with JUnit5?","body":"<p>I am trying to mock <code>System.getenv()</code>. That's how I am doing it with <a href=\"https://github.com/stefanbirkner/system-rules\" rel=\"nofollow noreferrer\">https://github.com/stefanbirkner/system-rules</a> lib:</p>\n<pre><code>@ExtendWith(MockitoExtension.class)\npublic class SampleTest {\n   @Rule\n   public final EnvironmentVariables environmentVariables = new EnvironmentVariables();\n   @BeforeEach\n   public void setup() {\n       environmentVariables.set(&quot;AWS_REGION&quot;, TEST_REGION.toString());\n       environmentVariables.set(&quot;CLIENT_ACCOUNT_ROLE&quot;, ROLE_ARN);\n   }\n   ...\n}\n</code></pre>\n<p>But build fails with exception:  <code>java.lang.reflect.InaccessibleObjectException: Unable to make field private final java.util.Map java.util.Collections$UnmodifiableMap.m accessible: module java.base does not &quot;opens java.util&quot; to unnamed module</code>. The exception happens in the line <code>environmentVariables.set(&quot;AWS_REGION&quot;, TEST_REGION.toString());</code>.</p>\n<p>I found similar problem for another annotation <a href=\"https://github.com/junit-pioneer/junit-pioneer/issues/509\" rel=\"nofollow noreferrer\">https://github.com/junit-pioneer/junit-pioneer/issues/509</a> but there is no proper solution for it. Is there a way to mock variables for this java and junit version?</p>\n"}],"has_more":true,"quota_max":10000,"quota_remaining":9814,"page":178,"page_size":100}
