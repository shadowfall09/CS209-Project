{"items":[{"tags":["java","spring-boot","exception"],"answers":[{"tags":[],"owner":{"account_id":308139,"reputation":8199,"user_id":619830,"accept_rate":75,"display_name":"ch4mp"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691013019,"creation_date":1691013019,"answer_id":76823733,"question_id":76823554,"body_markdown":"You can add an [`@ExceptionHandler`][1] for `ClientAuthorizationException`.\r\n\r\nAs a side note, I&#39;d keep a `5xx` status as what&#39;s happening actually is internal to your servers (maybe `503`?).\r\n\r\n\r\n  [1]: https://docs.spring.io/spring-framework/reference/web/webmvc/mvc-controller/ann-exceptionhandler.html","title":"Custom Spring Boot Oauth2 exceptions","body":"<p>You can add an <a href=\"https://docs.spring.io/spring-framework/reference/web/webmvc/mvc-controller/ann-exceptionhandler.html\" rel=\"nofollow noreferrer\"><code>@ExceptionHandler</code></a> for <code>ClientAuthorizationException</code>.</p>\n<p>As a side note, I'd keep a <code>5xx</code> status as what's happening actually is internal to your servers (maybe <code>503</code>?).</p>\n"}],"owner":{"account_id":1424447,"reputation":107,"user_id":1348348,"accept_rate":60,"display_name":"Riggster"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":113,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":1,"score":-1,"last_activity_date":1691690521,"creation_date":1691010642,"question_id":76823554,"body_markdown":"In my spring boot application, I have a rest controller with methods that use a WebClient to send requests to an external api, and that endpoint uses oauth for authentication. My issue is related to throwing custom exceptions. Within the WebClient, I can throw custom exceptions based on the http status code that&#39;s returned. For example, if I send a GET request with a non-existent ID, I can handle the 404 NOT FOUND that is returned just fine.\r\n\r\nMy issue is figuring out how to throw custom exceptions resulting from the authentication endpoint being unavailable. Currently, if I send a GET request and the authentication endpoint is down, a 404 NOT FOUND is returned from the authentication endpoint, which causes a ClientAuthorizationException to be thrown, and ultimately a response with a 500 INTERNAL SERVER ERROR http status is returned by the method in my rest controller, along with the stack trace. How do throw a custom exception in this case? \r\n\r\nFor reference, here is the configuration code I use to create the WebClient bean with the oauth included. It was originally taken from a blog at okta.com. \r\n\r\n```\r\n@Configuration\r\npublic class OAuthClientConfiguration {\r\n\r\n    @Bean\r\n    ReactiveClientRegistrationRepository clientRegistrations(\r\n            @Value(&quot;${spring.security.oauth2.client.provider.okta.token-uri}&quot;) String token_uri,\r\n            @Value(&quot;${spring.security.oauth2.client.registration.okta.client-id}&quot;) String client_id,\r\n            @Value(&quot;${spring.security.oauth2.client.registration.okta.client-secret}&quot;) String client_secret,\r\n            @Value(&quot;${spring.security.oauth2.client.registration.okta.scope}&quot;) String scope,\r\n            @Value(&quot;${spring.security.oauth2.client.registration.okta.authorization-grant-type}&quot;) String authorizationGrantType\r\n\r\n    ) {\r\n        ClientRegistration registration = ClientRegistration\r\n                .withRegistrationId(&quot;okta&quot;)\r\n                .tokenUri(token_uri)\r\n                .clientId(client_id)\r\n                .clientSecret(client_secret)\r\n                .scope(scope)\r\n                .authorizationGrantType(new AuthorizationGrantType(authorizationGrantType))\r\n                .build();\r\n        return new InMemoryReactiveClientRegistrationRepository(registration);\r\n    }\r\n\r\n    @Bean\r\n    WebClient webClient(ReactiveClientRegistrationRepository clientRegistrations) {\r\n        InMemoryReactiveOAuth2AuthorizedClientService clientService = new InMemoryReactiveOAuth2AuthorizedClientService(clientRegistrations);\r\n        AuthorizedClientServiceReactiveOAuth2AuthorizedClientManager authorizedClientManager = new AuthorizedClientServiceReactiveOAuth2AuthorizedClientManager(clientRegistrations, clientService);\r\n        ServerOAuth2AuthorizedClientExchangeFilterFunction oauth = new ServerOAuth2AuthorizedClientExchangeFilterFunction(authorizedClientManager);\r\n        oauth.setDefaultClientRegistrationId(&quot;okta&quot;);\r\n        return WebClient.builder()\r\n                .filter(oauth)\r\n                .build();\r\n    }\r\n\r\n}\r\n```\r\nAlso for reference, here is how I am throwing errors in my service. When the service throws the custom exception, a global exception handler intercepts the exception and gracefully returns a response entity with the exception message and correct http status code.\r\n\r\n```\r\nwebClient.get()\r\n    .uri(finalURL)\r\n    .accept(MediaType.APPLICATION_JSON)\r\n    .exchangeToMono(clientResponse -&gt; {\r\n        switch (clientResponse.rawStatusCode()) {\r\n            case OK:\r\n                return clientResponse\r\n                    .bodyToMono(Resource.class);\r\n            case NOT_FOUND:\r\n                throw new ResourceNotFoundException(id);\r\n            case INTERNAL_SERVER_ERROR:\r\n                throw new InternalServerErrorException();\r\n            default:\r\n                return Mono.empty();\r\n        }\r\n    })\r\n```\r\n","title":"Custom Spring Boot Oauth2 exceptions","body":"<p>In my spring boot application, I have a rest controller with methods that use a WebClient to send requests to an external api, and that endpoint uses oauth for authentication. My issue is related to throwing custom exceptions. Within the WebClient, I can throw custom exceptions based on the http status code that's returned. For example, if I send a GET request with a non-existent ID, I can handle the 404 NOT FOUND that is returned just fine.</p>\n<p>My issue is figuring out how to throw custom exceptions resulting from the authentication endpoint being unavailable. Currently, if I send a GET request and the authentication endpoint is down, a 404 NOT FOUND is returned from the authentication endpoint, which causes a ClientAuthorizationException to be thrown, and ultimately a response with a 500 INTERNAL SERVER ERROR http status is returned by the method in my rest controller, along with the stack trace. How do throw a custom exception in this case?</p>\n<p>For reference, here is the configuration code I use to create the WebClient bean with the oauth included. It was originally taken from a blog at okta.com.</p>\n<pre><code>@Configuration\npublic class OAuthClientConfiguration {\n\n    @Bean\n    ReactiveClientRegistrationRepository clientRegistrations(\n            @Value(&quot;${spring.security.oauth2.client.provider.okta.token-uri}&quot;) String token_uri,\n            @Value(&quot;${spring.security.oauth2.client.registration.okta.client-id}&quot;) String client_id,\n            @Value(&quot;${spring.security.oauth2.client.registration.okta.client-secret}&quot;) String client_secret,\n            @Value(&quot;${spring.security.oauth2.client.registration.okta.scope}&quot;) String scope,\n            @Value(&quot;${spring.security.oauth2.client.registration.okta.authorization-grant-type}&quot;) String authorizationGrantType\n\n    ) {\n        ClientRegistration registration = ClientRegistration\n                .withRegistrationId(&quot;okta&quot;)\n                .tokenUri(token_uri)\n                .clientId(client_id)\n                .clientSecret(client_secret)\n                .scope(scope)\n                .authorizationGrantType(new AuthorizationGrantType(authorizationGrantType))\n                .build();\n        return new InMemoryReactiveClientRegistrationRepository(registration);\n    }\n\n    @Bean\n    WebClient webClient(ReactiveClientRegistrationRepository clientRegistrations) {\n        InMemoryReactiveOAuth2AuthorizedClientService clientService = new InMemoryReactiveOAuth2AuthorizedClientService(clientRegistrations);\n        AuthorizedClientServiceReactiveOAuth2AuthorizedClientManager authorizedClientManager = new AuthorizedClientServiceReactiveOAuth2AuthorizedClientManager(clientRegistrations, clientService);\n        ServerOAuth2AuthorizedClientExchangeFilterFunction oauth = new ServerOAuth2AuthorizedClientExchangeFilterFunction(authorizedClientManager);\n        oauth.setDefaultClientRegistrationId(&quot;okta&quot;);\n        return WebClient.builder()\n                .filter(oauth)\n                .build();\n    }\n\n}\n</code></pre>\n<p>Also for reference, here is how I am throwing errors in my service. When the service throws the custom exception, a global exception handler intercepts the exception and gracefully returns a response entity with the exception message and correct http status code.</p>\n<pre><code>webClient.get()\n    .uri(finalURL)\n    .accept(MediaType.APPLICATION_JSON)\n    .exchangeToMono(clientResponse -&gt; {\n        switch (clientResponse.rawStatusCode()) {\n            case OK:\n                return clientResponse\n                    .bodyToMono(Resource.class);\n            case NOT_FOUND:\n                throw new ResourceNotFoundException(id);\n            case INTERNAL_SERVER_ERROR:\n                throw new InternalServerErrorException();\n            default:\n                return Mono.empty();\n        }\n    })\n</code></pre>\n"},{"tags":["java","eclipse","maven","selenium-webdriver","selenium-chromedriver"],"comments":[{"owner":{"account_id":16999473,"reputation":189,"user_id":12297200,"display_name":"Amirhossein"},"score":2,"creation_date":1691540422,"post_id":76863832,"comment_id":135504663,"body_markdown":"Maybe it has something to do with the arabic port digits?","body":"Maybe it has something to do with the arabic port digits?"},{"owner":{"account_id":2673407,"reputation":44640,"user_id":2310289,"display_name":"Scary Wombat"},"score":0,"creation_date":1691540432,"post_id":76863832,"comment_id":135504664,"body_markdown":"For normal selenium use `io.github.bonigarcia.wdm.WebDriverManager` is not required.  Why are you using this third-party jar?","body":"For normal selenium use <code>io.github.bonigarcia.wdm.WebDriverManager</code> is not required.  Why are you using this third-party jar?"},{"owner":{"account_id":28705640,"reputation":1,"user_id":21982032,"display_name":"Hussien Saed"},"score":0,"creation_date":1691540959,"post_id":76863832,"comment_id":135504717,"body_markdown":"i don&#39;t know , i just learning online and I do what instructor do","body":"i don&#39;t know , i just learning online and I do what instructor do"},{"owner":{"account_id":3557625,"reputation":198996,"user_id":2970947,"display_name":"Elliott Frisch"},"score":1,"creation_date":1691541587,"post_id":76863832,"comment_id":135504768,"body_markdown":"Posted code does not match error. Does not contain &quot;٤٠١٩٦&quot;, but &quot;٤٠١٩٦&quot; is not a valid port number. I&#39;m not certain what the first two glyphs are, and the last three aren&#39;t the digits 197... where do you have `٤٠١٩٦`?","body":"Posted code does not match error. Does not contain &quot;٤٠١٩٦&quot;, but &quot;٤٠١٩٦&quot; is not a valid port number. I&#39;m not certain what the first two glyphs are, and the last three aren&#39;t the digits 197... where do you have <code>٤٠١٩٦</code>?"}],"answers":[{"tags":[],"owner":{"account_id":28705640,"reputation":1,"user_id":21982032,"display_name":"Hussien Saed"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691690463,"creation_date":1691690463,"answer_id":76878259,"question_id":76863832,"body_markdown":"The problem was solved by upgrading my windows  from 8 to 10 \r\nThanks all","title":"How can i fix this error ? Unable to parse URL: http://localhost:٤٠١٩٦/session","body":"<p>The problem was solved by upgrading my windows  from 8 to 10\nThanks all</p>\n"}],"owner":{"account_id":28705640,"reputation":1,"user_id":21982032,"display_name":"Hussien Saed"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":124,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1691690463,"creation_date":1691540135,"question_id":76863832,"body_markdown":"i&#39;m a begainner in selenuim web driver and i tried alot of things to solve this error but i coudn&#39;t solve it \r\n\r\n    package Com.google.SeleniumNew;\r\n    \r\n    import org.openqa.selenium.WebDriver;\r\n    \r\n    import org.openqa.selenium.firefox.FirefoxDriver;\r\n    \r\n    import io.github.bonigarcia.wdm.WebDriverManager;\r\n    \r\n    public class ChromeDriverDemo {\r\n    \r\n    \tpublic static void main(String[] args) {\r\n    \t\tWebDriverManager.firefoxdriver().setup();\r\n    \r\n    \t\t\r\n    \t\tWebDriver driver= new FirefoxDriver();\r\n    \r\n    \t\t\r\n    \t\tdriver.get(&quot;http://www.google.com&quot;);\r\n    \r\n    \t}\r\n    \r\n    }\r\n\r\nand give me thihs errors \r\n\r\n        --marionette-host &lt;HOST&gt;\r\n            Host to use to connect to Gecko [default: 127.0.0.1]\r\n\r\n        --marionette-port &lt;PORT&gt;\r\n            Port to use to connect to Gecko [default: system-allocated port]\r\n\r\n    -p, --port &lt;PORT&gt;\r\n            Port to use for WebDriver server [default: 4444]\r\n\r\n        --profile-root &lt;PROFILE_ROOT&gt;\r\n            Directory in which to create profiles. Defaults to the system temporary directory.\r\n\r\n    -v\r\n            Log level verbosity (-v for debug and -vv for trace level)\r\n\r\n    -V, --version\r\n            Prints version and copying information\r\n\r\n        --websocket-port &lt;PORT&gt;\r\n            Port to use to connect to WebDriver BiDi [default: 9222]\r\n\r\n    Exception in thread &quot;main&quot; org.openqa.selenium.WebDriverException: java.io.IOException: Unable to parse URL: http://localhost:٤٠١٩٦/session\r\n    Build info: version: &#39;3.141.59&#39;, revision: &#39;e82be7d358&#39;, time: &#39;2018-11-14T08:17:03&#39;\r\n    System info: host: &#39;HUSSIEN&#39;, ip: &#39;192.168.2.7&#39;, os.name: &#39;Windows 8.1&#39;, os.arch: &#39;amd64&#39;, os.version: &#39;6.3&#39;, java.version: &#39;17.0.7&#39;\r\n    Driver info: driver.version: FirefoxDriver\r\n    \tat org.openqa.selenium.remote.service.DriverCommandExecutor.execute(DriverCommandExecutor.java:92)\r\n    \tat org.openqa.selenium.remote.RemoteWebDriver.execute(RemoteWebDriver.java:552)\r\n    \tat org.openqa.selenium.remote.RemoteWebDriver.startSession(RemoteWebDriver.java:213)\r\n    \tat org.openqa.selenium.remote.RemoteWebDriver.&lt;init&gt;(RemoteWebDriver.java:131)\r\n    \tat org.openqa.selenium.firefox.FirefoxDriver.&lt;init&gt;(FirefoxDriver.java:147)\r\n    \tat org.openqa.selenium.firefox.FirefoxDriver.&lt;init&gt;(FirefoxDriver.java:125)\r\n    \tat Com.google.SeleniumNew.ChromeDriverDemo.main(ChromeDriverDemo.java:18)\r\n    Caused by: java.io.IOException: Unable to parse URL: http://localhost:٤٠١٩٦/session\r\n    \tat org.openqa.selenium.remote.internal.OkHttpClient.execute(OkHttpClient.java:64)\r\n    \tat org.openqa.selenium.remote.ProtocolHandshake.createSession(ProtocolHandshake.java:105)\r\n    \tat org.openqa.selenium.remote.ProtocolHandshake.createSession(ProtocolHandshake.java:74)\r\n    \tat org.openqa.selenium.remote.HttpCommandExecutor.execute(HttpCommandExecutor.java:136)\r\n    \tat org.openqa.selenium.remote.service.DriverCommandExecutor.execute(DriverCommandExecutor.java:83)\r\n    \t... 6 more\r\n\r\n\r\nand I changed selenium to 4.7.1  and I get this error \r\n\r\n    SLF4J: No SLF4J providers were found.\r\n    SLF4J: Defaulting to no-operation (NOP) logger implementation\r\n    SLF4J: See https://www.slf4j.org/codes.html#noProviders for further details.\r\n    SLF4J: Class path contains SLF4J bindings targeting slf4j-api versions 1.7.x or earlier.\r\n    SLF4J: Ignoring binding found at [jar:file:/C:/Users/Hussien%20saeid/.m2/repository/org/slf4j/slf4j-nop/1.7.28/slf4j-nop-1.7.28.jar!/org/slf4j/impl/StaticLoggerBinder.class]\r\n    SLF4J: See https://www.slf4j.org/codes.html#ignoredBindings for an explanation.\r\n    log4j:WARN No appenders could be found for logger (io.netty.util.internal.logging.InternalLoggerFactory).\r\n    log4j:WARN Please initialize the log4j system properly.\r\n    log4j:WARN See http://logging.apache.org/log4j/1.2/faq.html#noconfig for more info.\r\n    C:\\Users\\Hussien saeid\\.cache\\selenium\\geckodriver\\win64\\0.33.0\\geckodriver.exe: error: invalid --port: invalid digit found in string: ٣٥٦٩٤\r\n    geckodriver 0.33.0 (a80e5fd61076 2023-04-02 18:31 +0000) \r\n    WebDriver implementation for Firefox\r\n    \r\n    USAGE:\r\n        geckodriver.exe [OPTIONS]\r\n    \r\n    OPTIONS:\r\n            --allow-hosts &lt;ALLOW_HOSTS&gt;...\r\n                List of hostnames to allow. By default the value of --host is allowed, and in addition\r\n                if that&#39;s a well known local address, other variations on well known local addresses are\r\n                allowed. If --allow-hosts is provided only exactly those hosts are allowed.\r\n    \r\n            --allow-origins &lt;ALLOW_ORIGINS&gt;...\r\n                List of request origins to allow. These must be formatted as scheme://host:port. By\r\n                default any request with an origin header is rejected. If --allow-origins is provided\r\n                then only exactly those origins are allowed.\r\n    \r\n            --android-storage &lt;ANDROID_STORAGE&gt;\r\n                Selects storage location to be used for test data (deprecated). [possible values: auto,\r\n                app, internal, sdcard]\r\n    \r\n        -b, --binary &lt;BINARY&gt;\r\n                Path to the Firefox binary\r\n    \r\n            --connect-existing\r\n                Connect to an existing Firefox instance\r\n    \r\n        -h, --help\r\n                Prints this message\r\n    \r\n            --host &lt;HOST&gt;\r\n                Host IP to use for WebDriver server [default: 127.0.0.1]\r\n    \r\n            --jsdebugger\r\n                Attach browser toolbox debugger for Firefox\r\n    \r\n            --log &lt;LEVEL&gt;\r\n                Set Gecko log level [possible values: fatal, error, warn, info, config, debug, trace]\r\n    \r\n            --log-no-truncate\r\n                Disable truncation of long log lines\r\n    \r\n            --marionette-host &lt;HOST&gt;\r\n                Host to use to connect to Gecko [default: 127.0.0.1]\r\n    \r\n            --marionette-port &lt;PORT&gt;\r\n                Port to use to connect to Gecko [default: system-allocated port]\r\n    \r\n        -p, --port &lt;PORT&gt;\r\n                Port to use for WebDriver server [default: 4444]\r\n    \r\n            --profile-root &lt;PROFILE_ROOT&gt;\r\n                Directory in which to create profiles. Defaults to the system temporary directory.\r\n    \r\n        -v\r\n                Log level verbosity (-v for debug and -vv for trace level)\r\n    \r\n        -V, --version\r\n                Prints version and copying information\r\n    \r\n            --websocket-port &lt;PORT&gt;\r\n                Port to use to connect to WebDriver BiDi [default: 9222]\r\n    \r\n    Exception in thread &quot;main&quot; org.openqa.selenium.SessionNotCreatedException: Could not start a new session. Possible causes are invalid address of the remote server or browser start-up failure. \r\n    Host info: host: &#39;HUSSIEN&#39;, ip: &#39;192.168.2.7&#39;\r\n    \tat org.openqa.selenium.remote.RemoteWebDriver.execute(RemoteWebDriver.java:569)\r\n    \tat org.openqa.selenium.remote.RemoteWebDriver.startSession(RemoteWebDriver.java:244)\r\n    \tat org.openqa.selenium.remote.RemoteWebDriver.&lt;init&gt;(RemoteWebDriver.java:159)\r\n    \tat org.openqa.selenium.firefox.FirefoxDriver.&lt;init&gt;(FirefoxDriver.java:111)\r\n    \tat org.openqa.selenium.firefox.FirefoxDriver.&lt;init&gt;(FirefoxDriver.java:99)\r\n    \tat org.openqa.selenium.firefox.FirefoxDriver.&lt;init&gt;(FirefoxDriver.java:95)\r\n    \tat Com.google.SeleniumNew.ChromeDriverDemo.main(ChromeDriverDemo.java:18)\r\n    Caused by: org.openqa.selenium.WebDriverException: Driver server process died prematurely.\r\n    Build info: version: &#39;4.7.1&#39;, revision: &#39;c6795baf1a3&#39;\r\n    System info: os.name: &#39;Windows 8.1&#39;, os.arch: &#39;amd64&#39;, os.version: &#39;6.3&#39;, java.version: &#39;17.0.7&#39;\r\n    Driver info: driver.version: FirefoxDriver\r\n    \tat org.openqa.selenium.remote.service.DriverService.start(DriverService.java:243)\r\n    \tat org.openqa.selenium.remote.service.DriverCommandExecutor.execute(DriverCommandExecutor.java:98)\r\n    \tat org.openqa.selenium.remote.RemoteWebDriver.execute(RemoteWebDriver.java:551)\r\n    \t... 6 more\r\n\r\n","title":"How can i fix this error ? Unable to parse URL: http://localhost:٤٠١٩٦/session","body":"<p>i'm a begainner in selenuim web driver and i tried alot of things to solve this error but i coudn't solve it</p>\n<pre><code>package Com.google.SeleniumNew;\n\nimport org.openqa.selenium.WebDriver;\n\nimport org.openqa.selenium.firefox.FirefoxDriver;\n\nimport io.github.bonigarcia.wdm.WebDriverManager;\n\npublic class ChromeDriverDemo {\n\n    public static void main(String[] args) {\n        WebDriverManager.firefoxdriver().setup();\n\n        \n        WebDriver driver= new FirefoxDriver();\n\n        \n        driver.get(&quot;http://www.google.com&quot;);\n\n    }\n\n}\n</code></pre>\n<p>and give me thihs errors</p>\n<pre><code>    --marionette-host &lt;HOST&gt;\n        Host to use to connect to Gecko [default: 127.0.0.1]\n\n    --marionette-port &lt;PORT&gt;\n        Port to use to connect to Gecko [default: system-allocated port]\n\n-p, --port &lt;PORT&gt;\n        Port to use for WebDriver server [default: 4444]\n\n    --profile-root &lt;PROFILE_ROOT&gt;\n        Directory in which to create profiles. Defaults to the system temporary directory.\n\n-v\n        Log level verbosity (-v for debug and -vv for trace level)\n\n-V, --version\n        Prints version and copying information\n\n    --websocket-port &lt;PORT&gt;\n        Port to use to connect to WebDriver BiDi [default: 9222]\n\nException in thread &quot;main&quot; org.openqa.selenium.WebDriverException: java.io.IOException: Unable to parse URL: http://localhost:٤٠١٩٦/session\nBuild info: version: '3.141.59', revision: 'e82be7d358', time: '2018-11-14T08:17:03'\nSystem info: host: 'HUSSIEN', ip: '192.168.2.7', os.name: 'Windows 8.1', os.arch: 'amd64', os.version: '6.3', java.version: '17.0.7'\nDriver info: driver.version: FirefoxDriver\n    at org.openqa.selenium.remote.service.DriverCommandExecutor.execute(DriverCommandExecutor.java:92)\n    at org.openqa.selenium.remote.RemoteWebDriver.execute(RemoteWebDriver.java:552)\n    at org.openqa.selenium.remote.RemoteWebDriver.startSession(RemoteWebDriver.java:213)\n    at org.openqa.selenium.remote.RemoteWebDriver.&lt;init&gt;(RemoteWebDriver.java:131)\n    at org.openqa.selenium.firefox.FirefoxDriver.&lt;init&gt;(FirefoxDriver.java:147)\n    at org.openqa.selenium.firefox.FirefoxDriver.&lt;init&gt;(FirefoxDriver.java:125)\n    at Com.google.SeleniumNew.ChromeDriverDemo.main(ChromeDriverDemo.java:18)\nCaused by: java.io.IOException: Unable to parse URL: http://localhost:٤٠١٩٦/session\n    at org.openqa.selenium.remote.internal.OkHttpClient.execute(OkHttpClient.java:64)\n    at org.openqa.selenium.remote.ProtocolHandshake.createSession(ProtocolHandshake.java:105)\n    at org.openqa.selenium.remote.ProtocolHandshake.createSession(ProtocolHandshake.java:74)\n    at org.openqa.selenium.remote.HttpCommandExecutor.execute(HttpCommandExecutor.java:136)\n    at org.openqa.selenium.remote.service.DriverCommandExecutor.execute(DriverCommandExecutor.java:83)\n    ... 6 more\n</code></pre>\n<p>and I changed selenium to 4.7.1  and I get this error</p>\n<pre><code>SLF4J: No SLF4J providers were found.\nSLF4J: Defaulting to no-operation (NOP) logger implementation\nSLF4J: See https://www.slf4j.org/codes.html#noProviders for further details.\nSLF4J: Class path contains SLF4J bindings targeting slf4j-api versions 1.7.x or earlier.\nSLF4J: Ignoring binding found at [jar:file:/C:/Users/Hussien%20saeid/.m2/repository/org/slf4j/slf4j-nop/1.7.28/slf4j-nop-1.7.28.jar!/org/slf4j/impl/StaticLoggerBinder.class]\nSLF4J: See https://www.slf4j.org/codes.html#ignoredBindings for an explanation.\nlog4j:WARN No appenders could be found for logger (io.netty.util.internal.logging.InternalLoggerFactory).\nlog4j:WARN Please initialize the log4j system properly.\nlog4j:WARN See http://logging.apache.org/log4j/1.2/faq.html#noconfig for more info.\nC:\\Users\\Hussien saeid\\.cache\\selenium\\geckodriver\\win64\\0.33.0\\geckodriver.exe: error: invalid --port: invalid digit found in string: ٣٥٦٩٤\ngeckodriver 0.33.0 (a80e5fd61076 2023-04-02 18:31 +0000) \nWebDriver implementation for Firefox\n\nUSAGE:\n    geckodriver.exe [OPTIONS]\n\nOPTIONS:\n        --allow-hosts &lt;ALLOW_HOSTS&gt;...\n            List of hostnames to allow. By default the value of --host is allowed, and in addition\n            if that's a well known local address, other variations on well known local addresses are\n            allowed. If --allow-hosts is provided only exactly those hosts are allowed.\n\n        --allow-origins &lt;ALLOW_ORIGINS&gt;...\n            List of request origins to allow. These must be formatted as scheme://host:port. By\n            default any request with an origin header is rejected. If --allow-origins is provided\n            then only exactly those origins are allowed.\n\n        --android-storage &lt;ANDROID_STORAGE&gt;\n            Selects storage location to be used for test data (deprecated). [possible values: auto,\n            app, internal, sdcard]\n\n    -b, --binary &lt;BINARY&gt;\n            Path to the Firefox binary\n\n        --connect-existing\n            Connect to an existing Firefox instance\n\n    -h, --help\n            Prints this message\n\n        --host &lt;HOST&gt;\n            Host IP to use for WebDriver server [default: 127.0.0.1]\n\n        --jsdebugger\n            Attach browser toolbox debugger for Firefox\n\n        --log &lt;LEVEL&gt;\n            Set Gecko log level [possible values: fatal, error, warn, info, config, debug, trace]\n\n        --log-no-truncate\n            Disable truncation of long log lines\n\n        --marionette-host &lt;HOST&gt;\n            Host to use to connect to Gecko [default: 127.0.0.1]\n\n        --marionette-port &lt;PORT&gt;\n            Port to use to connect to Gecko [default: system-allocated port]\n\n    -p, --port &lt;PORT&gt;\n            Port to use for WebDriver server [default: 4444]\n\n        --profile-root &lt;PROFILE_ROOT&gt;\n            Directory in which to create profiles. Defaults to the system temporary directory.\n\n    -v\n            Log level verbosity (-v for debug and -vv for trace level)\n\n    -V, --version\n            Prints version and copying information\n\n        --websocket-port &lt;PORT&gt;\n            Port to use to connect to WebDriver BiDi [default: 9222]\n\nException in thread &quot;main&quot; org.openqa.selenium.SessionNotCreatedException: Could not start a new session. Possible causes are invalid address of the remote server or browser start-up failure. \nHost info: host: 'HUSSIEN', ip: '192.168.2.7'\n    at org.openqa.selenium.remote.RemoteWebDriver.execute(RemoteWebDriver.java:569)\n    at org.openqa.selenium.remote.RemoteWebDriver.startSession(RemoteWebDriver.java:244)\n    at org.openqa.selenium.remote.RemoteWebDriver.&lt;init&gt;(RemoteWebDriver.java:159)\n    at org.openqa.selenium.firefox.FirefoxDriver.&lt;init&gt;(FirefoxDriver.java:111)\n    at org.openqa.selenium.firefox.FirefoxDriver.&lt;init&gt;(FirefoxDriver.java:99)\n    at org.openqa.selenium.firefox.FirefoxDriver.&lt;init&gt;(FirefoxDriver.java:95)\n    at Com.google.SeleniumNew.ChromeDriverDemo.main(ChromeDriverDemo.java:18)\nCaused by: org.openqa.selenium.WebDriverException: Driver server process died prematurely.\nBuild info: version: '4.7.1', revision: 'c6795baf1a3'\nSystem info: os.name: 'Windows 8.1', os.arch: 'amd64', os.version: '6.3', java.version: '17.0.7'\nDriver info: driver.version: FirefoxDriver\n    at org.openqa.selenium.remote.service.DriverService.start(DriverService.java:243)\n    at org.openqa.selenium.remote.service.DriverCommandExecutor.execute(DriverCommandExecutor.java:98)\n    at org.openqa.selenium.remote.RemoteWebDriver.execute(RemoteWebDriver.java:551)\n    ... 6 more\n</code></pre>\n"},{"tags":["java","opengl","javafx"],"comments":[{"owner":{"account_id":2181042,"reputation":7158,"user_id":1930535,"accept_rate":78,"display_name":"Appleshell"},"score":0,"creation_date":1370452736,"post_id":16946030,"comment_id":24468450,"body_markdown":"There are not many examples on the internet, but an implementation can be seen here: http://www.java-gaming.org/topics/lwjgl-javafx-integration/27801/view.html","body":"There are not many examples on the internet, but an implementation can be seen here: <a href=\"http://www.java-gaming.org/topics/lwjgl-javafx-integration/27801/view.html\" rel=\"nofollow noreferrer\">java-gaming.org/topics/lwjgl-javafx-integration/27801/view.h&zwnj;&#8203;tml</a>"},{"owner":{"account_id":48178,"reputation":434,"user_id":143013,"display_name":"R. van Twisk"},"score":0,"creation_date":1389619655,"post_id":16946030,"comment_id":31727325,"body_markdown":"You can use this project as a base : https://github.com/Spasi/LWJGL-FX","body":"You can use this project as a base : <a href=\"https://github.com/Spasi/LWJGL-FX\" rel=\"nofollow noreferrer\">github.com/Spasi/LWJGL-FX</a>"}],"answers":[{"tags":[],"owner":{"account_id":1706263,"reputation":3067,"user_id":1565247,"accept_rate":50,"display_name":"Quetzalcoatl"},"down_vote_count":3,"up_vote_count":4,"is_accepted":false,"score":1,"last_activity_date":1370452634,"creation_date":1370452634,"answer_id":16946060,"question_id":16946030,"body_markdown":"Yes, by all means, you can use [JOGL][1] to achieve effectively everything you could in Java with OpenGL as you can in C/C++.\r\n\r\n\r\n  [1]: https://jogamp.org/jogl/www/","title":"How to use OpenGL in JavaFX?","body":"<p>Yes, by all means, you can use <a href=\"https://jogamp.org/jogl/www/\" rel=\"nofollow\">JOGL</a> to achieve effectively everything you could in Java with OpenGL as you can in C/C++.</p>\n"},{"tags":[],"owner":{"account_id":1180113,"reputation":152325,"user_id":1155209,"display_name":"jewelsea"},"down_vote_count":0,"up_vote_count":18,"is_accepted":true,"score":18,"last_activity_date":1499261440,"creation_date":1370466472,"answer_id":16949909,"question_id":16946030,"body_markdown":"Internally, JavaFX can use OpenGL as a rendering pipeline, so some care on integration between the two is required to avoid conflicts.\r\n\r\n**OpenGLNode in JavaFX**\r\n\r\nRichard Bair, JavaFX team lead posted on the [openjfx development mailing list][1]:\r\n\r\n&gt; One thing I want to see done (for example) for the 8 update is to have an OpenGLNode or NativeSurfaceNode or something along those lines so that if you are doing your own D3D / OpenGL you can have a way to send those raw commands down to the graphics card but still have your node composited in the scene graph.\r\n\r\nSo a future JavaFX release update might include an OpenGLNode. \r\nSuch a feature would probably not see inclusion in a JavaFX general availability release until the next JavaFX feature release after the initial Java 8 release (my guess is that would put it at about September 2014).\r\n\r\n**3rd Party OpenGL/JavaFX integration**\r\n\r\nYou don&#39;t need to wait so long to start integrating JavaFX and OpenGL.  All of the required source code to start an implementation is open in the [OpenJFX repository][2], so you could try building a custom integration of that code with a library such as [lwjgl][3] or [jogl][4].  \r\n\r\nThis answer will get dated as developers start performing integrations of JavaFX with existing Java wrappers for OpenGL apis.  Some developers have started such work already - run a google search of `lwjgl javafx` or `jogl javafx` to find out about current integration projects and their status.\r\n\r\nThe simplest integration is probably to have a 3rd party library render to an off screen buffer then transfer the pixels from the buffer to a JavaFX [WritableImage][5] or [Canvas][6] as required to get the OpenGL rendered graphics composited into the JavaFX scene graph.\r\n\r\n**JavaFX 3D API Alternative**\r\n\r\nJavaFX has its own lightweight 3D api that provides the ability to composite phong shaded 3d models into the JavaFX scene graph.  The JavaFX 3D api is not going to provide all the power of a full OpenGL api integration, however using the JavaFX 3D api is relatively simple.  A description, with code examples of the [3D features in Java 8 is on the open-jfx wiki][7].\r\n\r\nInteractive Mesh provides a free [3D model importer for JavaFX][8], that allows you to very simply bring complex shaded and textured 3D models into a JavaFX scene graph.\r\n\r\nThere is a [3D Viewer project][9] in the [openjfx repository][10] that you could fork to create a basis for your proposed JavaFX based 3D editor.\r\n\r\nThe nashorn JavaScript engine has a switch that allows you to [use JavaFX and its 3D features from JavaScript][11], so you can use alternative jvm languages to access JavaFX 3D features if you prefer.\r\n\r\n  [1]: http://mail.openjdk.java.net/pipermail/openjfx-dev/2013-May/007451.html\r\n  [2]: http://openjdk.java.net/projects/openjfx/\r\n  [3]: http://www.lwjgl.org/\r\n  [4]: https://jogamp.org/jogl/\r\n  [5]: http://docs.oracle.com/javafx/2/api/javafx/scene/image/WritableImage.html\r\n  [6]: http://docs.oracle.com/javafx/2/api/javafx/scene/canvas/Canvas.html\r\n  [7]: https://wiki.openjdk.java.net/display/OpenJFX/3D+Features\r\n  [8]: http://www.interactivemesh.org/models/jfx3dimporter.html\r\n  [9]: http://hg.openjdk.java.net/openjfx/8/master/rt/file/tip/apps/experiments/3DViewer/\r\n  [10]: http://openjdk.java.net/projects/openjfx/\r\n  [11]: https://blogs.oracle.com/nashorn/entry/jjs_fx","title":"How to use OpenGL in JavaFX?","body":"<p>Internally, JavaFX can use OpenGL as a rendering pipeline, so some care on integration between the two is required to avoid conflicts.</p>\n\n<p><strong>OpenGLNode in JavaFX</strong></p>\n\n<p>Richard Bair, JavaFX team lead posted on the <a href=\"http://mail.openjdk.java.net/pipermail/openjfx-dev/2013-May/007451.html\" rel=\"noreferrer\">openjfx development mailing list</a>:</p>\n\n<blockquote>\n  <p>One thing I want to see done (for example) for the 8 update is to have an OpenGLNode or NativeSurfaceNode or something along those lines so that if you are doing your own D3D / OpenGL you can have a way to send those raw commands down to the graphics card but still have your node composited in the scene graph.</p>\n</blockquote>\n\n<p>So a future JavaFX release update might include an OpenGLNode. \nSuch a feature would probably not see inclusion in a JavaFX general availability release until the next JavaFX feature release after the initial Java 8 release (my guess is that would put it at about September 2014).</p>\n\n<p><strong>3rd Party OpenGL/JavaFX integration</strong></p>\n\n<p>You don't need to wait so long to start integrating JavaFX and OpenGL.  All of the required source code to start an implementation is open in the <a href=\"http://openjdk.java.net/projects/openjfx/\" rel=\"noreferrer\">OpenJFX repository</a>, so you could try building a custom integration of that code with a library such as <a href=\"http://www.lwjgl.org/\" rel=\"noreferrer\">lwjgl</a> or <a href=\"https://jogamp.org/jogl/\" rel=\"noreferrer\">jogl</a>.  </p>\n\n<p>This answer will get dated as developers start performing integrations of JavaFX with existing Java wrappers for OpenGL apis.  Some developers have started such work already - run a google search of <code>lwjgl javafx</code> or <code>jogl javafx</code> to find out about current integration projects and their status.</p>\n\n<p>The simplest integration is probably to have a 3rd party library render to an off screen buffer then transfer the pixels from the buffer to a JavaFX <a href=\"http://docs.oracle.com/javafx/2/api/javafx/scene/image/WritableImage.html\" rel=\"noreferrer\">WritableImage</a> or <a href=\"http://docs.oracle.com/javafx/2/api/javafx/scene/canvas/Canvas.html\" rel=\"noreferrer\">Canvas</a> as required to get the OpenGL rendered graphics composited into the JavaFX scene graph.</p>\n\n<p><strong>JavaFX 3D API Alternative</strong></p>\n\n<p>JavaFX has its own lightweight 3D api that provides the ability to composite phong shaded 3d models into the JavaFX scene graph.  The JavaFX 3D api is not going to provide all the power of a full OpenGL api integration, however using the JavaFX 3D api is relatively simple.  A description, with code examples of the <a href=\"https://wiki.openjdk.java.net/display/OpenJFX/3D+Features\" rel=\"noreferrer\">3D features in Java 8 is on the open-jfx wiki</a>.</p>\n\n<p>Interactive Mesh provides a free <a href=\"http://www.interactivemesh.org/models/jfx3dimporter.html\" rel=\"noreferrer\">3D model importer for JavaFX</a>, that allows you to very simply bring complex shaded and textured 3D models into a JavaFX scene graph.</p>\n\n<p>There is a <a href=\"http://hg.openjdk.java.net/openjfx/8/master/rt/file/tip/apps/experiments/3DViewer/\" rel=\"noreferrer\">3D Viewer project</a> in the <a href=\"http://openjdk.java.net/projects/openjfx/\" rel=\"noreferrer\">openjfx repository</a> that you could fork to create a basis for your proposed JavaFX based 3D editor.</p>\n\n<p>The nashorn JavaScript engine has a switch that allows you to <a href=\"https://blogs.oracle.com/nashorn/entry/jjs_fx\" rel=\"noreferrer\">use JavaFX and its 3D features from JavaScript</a>, so you can use alternative jvm languages to access JavaFX 3D features if you prefer.</p>\n"},{"tags":[],"owner":{"account_id":11900174,"reputation":380,"user_id":9193035,"display_name":"Husker"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1639743603,"creation_date":1628889339,"answer_id":68778425,"question_id":16946030,"body_markdown":"You can use the [OpenGLFX](https://github.com/husker-dev/openglfx) library, which mixes the previously mentioned JOGL/LWJGL and JavaFX. The code has the best performance available without changing the source code of JavaFX itself.","title":"How to use OpenGL in JavaFX?","body":"<p>You can use the <a href=\"https://github.com/husker-dev/openglfx\" rel=\"nofollow noreferrer\">OpenGLFX</a> library, which mixes the previously mentioned JOGL/LWJGL and JavaFX. The code has the best performance available without changing the source code of JavaFX itself.</p>\n"},{"tags":[],"owner":{"account_id":5647593,"reputation":498,"user_id":4469165,"accept_rate":62,"display_name":"Andy"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1679753816,"creation_date":1679753816,"answer_id":75842290,"question_id":16946030,"body_markdown":"**DriftFX** allows you to render any OpenGL content directly into JavaFX nodes.\r\nDirect means that there is no transfer between GPU and main memory. The textures never leave the GPU.\r\n\r\nYou can access the project on GitHub : [DriftFX][1]\r\n\r\n\r\n  [1]: https://github.com/eclipse-efx/efxclipse-drift","title":"How to use OpenGL in JavaFX?","body":"<p><strong>DriftFX</strong> allows you to render any OpenGL content directly into JavaFX nodes.\nDirect means that there is no transfer between GPU and main memory. The textures never leave the GPU.</p>\n<p>You can access the project on GitHub : <a href=\"https://github.com/eclipse-efx/efxclipse-drift\" rel=\"nofollow noreferrer\">DriftFX</a></p>\n"},{"tags":[],"owner":{"account_id":81375,"reputation":2305,"user_id":229513,"accept_rate":57,"display_name":"Martin Pernollet"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1680276825,"creation_date":1680276825,"answer_id":75900307,"question_id":16946030,"body_markdown":"[PanamaGL][1] allows rendering OpenGL scenes in a JavaFX canvas. It uses recent Oracle FFM API as of JDK19 to bind to OpenGL, which make it extremely simple to build.\r\n\r\n\r\n  [1]: https://gitlab.com/jzy3d/panama-gl","title":"How to use OpenGL in JavaFX?","body":"<p><a href=\"https://gitlab.com/jzy3d/panama-gl\" rel=\"nofollow noreferrer\">PanamaGL</a> allows rendering OpenGL scenes in a JavaFX canvas. It uses recent Oracle FFM API as of JDK19 to bind to OpenGL, which make it extremely simple to build.</p>\n"},{"tags":[],"owner":{"account_id":207965,"reputation":3704,"user_id":458157,"accept_rate":75,"display_name":"gouessej"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691690383,"creation_date":1691690383,"answer_id":76878252,"question_id":16946030,"body_markdown":"You can simply use [NewtCanvasJFX][1] available in JOGL &gt;= 2.4.0. I advise you to read [my article][2] that explains in details how to mix JOGL with JavaFX/OpenJFX. NewtCanvasJFX acts as a bridge between JOGL NEWT GLWindow used to perform OpenGL rendering and an OpenJFX/JavaFX group that you can add into a Scene, then you add the Scene into the Stage of your OpenJFX/JavaFX Application.\r\n\r\n\r\n  [1]: https://jogamp.org/deployment/jogamp-next/javadoc/jogl/javadoc/com/jogamp/newt/javafx/NewtCanvasJFX.html\r\n  [2]: https://gouessej.wordpress.com/2020/04/05/javafx-et-jogl-fonctionnent-ensemble-javafx-and-jogl-work-together/","title":"How to use OpenGL in JavaFX?","body":"<p>You can simply use <a href=\"https://jogamp.org/deployment/jogamp-next/javadoc/jogl/javadoc/com/jogamp/newt/javafx/NewtCanvasJFX.html\" rel=\"nofollow noreferrer\">NewtCanvasJFX</a> available in JOGL &gt;= 2.4.0. I advise you to read <a href=\"https://gouessej.wordpress.com/2020/04/05/javafx-et-jogl-fonctionnent-ensemble-javafx-and-jogl-work-together/\" rel=\"nofollow noreferrer\">my article</a> that explains in details how to mix JOGL with JavaFX/OpenJFX. NewtCanvasJFX acts as a bridge between JOGL NEWT GLWindow used to perform OpenGL rendering and an OpenJFX/JavaFX group that you can add into a Scene, then you add the Scene into the Stage of your OpenJFX/JavaFX Application.</p>\n"}],"owner":{"account_id":289233,"reputation":27667,"user_id":590083,"accept_rate":72,"display_name":"Lai Yu-Hsuan"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":32695,"favorite_count":0,"down_vote_count":0,"up_vote_count":17,"accepted_answer_id":16949909,"answer_count":6,"score":17,"last_activity_date":1691690383,"creation_date":1370452522,"question_id":16946030,"body_markdown":"I want to write a very simple Java 3D editor(for experiment). I know the basic JavaFX usage, and I know enough OpenGL knowledge. But all my OpenGL experience is from working with C/C++. \r\n\r\nCould I make a &#39;canvas&#39; in JavaFx application and map OpenGL viewport on it?","title":"How to use OpenGL in JavaFX?","body":"<p>I want to write a very simple Java 3D editor(for experiment). I know the basic JavaFX usage, and I know enough OpenGL knowledge. But all my OpenGL experience is from working with C/C++. </p>\n\n<p>Could I make a 'canvas' in JavaFx application and map OpenGL viewport on it?</p>\n"},{"tags":["java","macos"],"comments":[{"owner":{"account_id":5289146,"reputation":8128,"user_id":4222206,"display_name":"queeg"},"score":0,"creation_date":1691606691,"post_id":76870447,"comment_id":135515807,"body_markdown":"You need to check if the classpath is correct. What does it $APPDIR resolve to?","body":"You need to check if the classpath is correct. What does it $APPDIR resolve to?"},{"owner":{"account_id":2001225,"reputation":15,"user_id":3825574,"accept_rate":80,"display_name":"Josh"},"score":0,"creation_date":1691606777,"post_id":76870447,"comment_id":135515823,"body_markdown":"$APPDIR resolves to the .app package contents folder.","body":"$APPDIR resolves to the .app package contents folder."}],"answers":[{"tags":[],"owner":{"account_id":5289146,"reputation":8128,"user_id":4222206,"display_name":"queeg"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691606868,"creation_date":1691606868,"answer_id":76870501,"question_id":76870447,"body_markdown":"Your classpath may be correct, but your main class is not. Instead of\r\n\r\n    app.mainclass=com/lionEdge/ranchManager/ui/main/RanchManagerApplication.java\r\n\r\nuse\r\n\r\n    app.mainclass=com/lionEdge/ranchManager/ui/main/RanchManagerApplication","title":"Java 8 in Mac .app Could not find or load main class","body":"<p>Your classpath may be correct, but your main class is not. Instead of</p>\n<pre><code>app.mainclass=com/lionEdge/ranchManager/ui/main/RanchManagerApplication.java\n</code></pre>\n<p>use</p>\n<pre><code>app.mainclass=com/lionEdge/ranchManager/ui/main/RanchManagerApplication\n</code></pre>\n"}],"owner":{"account_id":2001225,"reputation":15,"user_id":3825574,"accept_rate":80,"display_name":"Josh"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":36,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"closed_date":1691651066,"answer_count":1,"score":-1,"last_activity_date":1691689912,"creation_date":1691606311,"question_id":76870447,"body_markdown":"Unfortunately i&#39;m stuck supporting a Java 8 application on Mac.  The issue is i keep getting:\r\n    `Error: Could not find or load main class             com.lionEdge.ranchManager.ui.main.RanchManagerApplication.java`\r\n\r\nWhen running the app.  Here is the Config file: \r\n```\r\n    [Application]\r\n    app.name=RanchManagerOSX\r\n    app.mainjar=$APPDIR/Java/ranchManager.jar\r\n    app.version=3.2.8\r\n    app.preferences.id=com/lionEdge/ranchManager/ui/main\r\n    app.mainclass=com/lionEdge/ranchManager/ui/main/RanchManagerApplication\r\n    app.classpath=$APPDIR/Java/jhall.jar: $APPDIR/Java/ranchManager.jar:                $APPDIR/Java/rmHelp.jar\r\n    app.runtime=$APPDIR/PlugIns/Java.runtime\r\n    app.identifier=com.whitemountainslivestock.ranchmanager\r\n\r\n    [JVMOptions]\r\n\r\n    [JVMUserOptions]\r\n    -Xmx=2048m\r\n\r\n    [ArgOptions]\r\n```\r\n\r\n\r\nThe application runs fine on windows and the path to the main method is correct.  I&#39;ve unpacked the jar and verified the path.  Here is the directory structure\r\n\r\n    ```\r\n    RanchManagerOSX.app\r\n    - Contents\r\n     -- Info.plist\r\n     -- PkgInfo\r\n     --PlugIns (Directory)\r\n      --- Java.runtime\r\n     -- Java (Directory)\r\n      --- jhall.jar\r\n      --- ranchManager.jar\r\n      ---rmHelp.jar\r\n      --- RanchManagerOSX.cfg (contents listed above)\r\n      --- jh.jar\r\n     -- MacOS (Directory)\r\n      --- RanchManagerOSX (executable)\r\n      --- lib packager.dylib\r\n    ```\r\n\r\n\r\nAny assistance getting this application working would be greatly appreciated.  \r\n**Note: upgrading java versions isn&#39;t an option since the application is currently being rewritten in .NET MAUI with a release date (tentative) of Q3 2025.\r\n\r\nI&#39;ve changed the classpath multiple times as well as the order of items in the classpath,  I can run the jar directly without issues but the launcher script (RanchManagerOSX) keeps throwing the error.\r\n\r\n**RESOLUTION: The spaces added to the classpath were causing the error. \r\n Once they were removed (i.e. $APPDIR/Java/jhall.jar:$APPDIR/Java/rmHelp.jar etc the issue was resolved.**","title":"Java 8 in Mac .app Could not find or load main class","body":"<p>Unfortunately i'm stuck supporting a Java 8 application on Mac.  The issue is i keep getting:\n<code>Error: Could not find or load main class             com.lionEdge.ranchManager.ui.main.RanchManagerApplication.java</code></p>\n<p>When running the app.  Here is the Config file:</p>\n<pre><code>    [Application]\n    app.name=RanchManagerOSX\n    app.mainjar=$APPDIR/Java/ranchManager.jar\n    app.version=3.2.8\n    app.preferences.id=com/lionEdge/ranchManager/ui/main\n    app.mainclass=com/lionEdge/ranchManager/ui/main/RanchManagerApplication\n    app.classpath=$APPDIR/Java/jhall.jar: $APPDIR/Java/ranchManager.jar:                $APPDIR/Java/rmHelp.jar\n    app.runtime=$APPDIR/PlugIns/Java.runtime\n    app.identifier=com.whitemountainslivestock.ranchmanager\n\n    [JVMOptions]\n\n    [JVMUserOptions]\n    -Xmx=2048m\n\n    [ArgOptions]\n</code></pre>\n<p>The application runs fine on windows and the path to the main method is correct.  I've unpacked the jar and verified the path.  Here is the directory structure</p>\n<pre><code>```\nRanchManagerOSX.app\n- Contents\n -- Info.plist\n -- PkgInfo\n --PlugIns (Directory)\n  --- Java.runtime\n -- Java (Directory)\n  --- jhall.jar\n  --- ranchManager.jar\n  ---rmHelp.jar\n  --- RanchManagerOSX.cfg (contents listed above)\n  --- jh.jar\n -- MacOS (Directory)\n  --- RanchManagerOSX (executable)\n  --- lib packager.dylib\n```\n</code></pre>\n<p>Any assistance getting this application working would be greatly appreciated.<br />\n**Note: upgrading java versions isn't an option since the application is currently being rewritten in .NET MAUI with a release date (tentative) of Q3 2025.</p>\n<p>I've changed the classpath multiple times as well as the order of items in the classpath,  I can run the jar directly without issues but the launcher script (RanchManagerOSX) keeps throwing the error.</p>\n<p><strong>RESOLUTION: The spaces added to the classpath were causing the error.\nOnce they were removed (i.e. $APPDIR/Java/jhall.jar:$APPDIR/Java/rmHelp.jar etc the issue was resolved.</strong></p>\n"},{"tags":["java","database","hibernate","jboss","persistence"],"comments":[{"owner":{"account_id":96415,"reputation":1902,"user_id":262067,"display_name":"mkro"},"score":0,"creation_date":1317240846,"post_id":7588657,"comment_id":9204794,"body_markdown":"what SELECT statements does hibernate generate?","body":"what SELECT statements does hibernate generate?"},{"owner":{"account_id":214278,"reputation":2298,"user_id":468160,"accept_rate":50,"display_name":"kand"},"score":0,"creation_date":1317244908,"post_id":7588657,"comment_id":9205894,"body_markdown":"it generates a SELECT for each object in my domain, which I don&#39;t want to do because I already know my objects are completely new and unique.","body":"it generates a SELECT for each object in my domain, which I don&#39;t want to do because I already know my objects are completely new and unique."}],"answers":[{"tags":[],"owner":{"account_id":319894,"reputation":43513,"user_id":637889,"accept_rate":93,"display_name":"andyb"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1317241052,"creation_date":1317241052,"answer_id":7589074,"question_id":7588657,"body_markdown":"Hibernate is trying to determine if the object is transient or not, so is performing a `SELECT` before `INSERT`. You might be able to adapt this answer from https://stackoverflow.com/questions/5208334/hibernate-onetoone-mapping-executes-select-statement-before-insert-not-sure-why/5280956#5280956 to avoid the `SELECT`.\r\n\r\nOr, I remember a post in a forum about overriding the `version` column that hibernate uses in the transient check (and for optimistic locking). I&#39;ll edit this answer when I find it.","title":"Force Hibernate Insert Without Select Statements","body":"<p>Hibernate is trying to determine if the object is transient or not, so is performing a <code>SELECT</code> before <code>INSERT</code>. You might be able to adapt this answer from <a href=\"https://stackoverflow.com/questions/5208334/hibernate-onetoone-mapping-executes-select-statement-before-insert-not-sure-why/5280956#5280956\">Hibernate OneToOne mapping executes select statement before insert; not sure why</a> to avoid the <code>SELECT</code>.</p>\n\n<p>Or, I remember a post in a forum about overriding the <code>version</code> column that hibernate uses in the transient check (and for optimistic locking). I'll edit this answer when I find it.</p>\n"},{"tags":[],"owner":{"account_id":941680,"reputation":511,"user_id":969650,"display_name":"Patrick Finnegan"},"down_vote_count":0,"up_vote_count":11,"is_accepted":true,"score":11,"last_activity_date":1602791816,"creation_date":1317241241,"answer_id":7589106,"question_id":7588657,"body_markdown":"You can use the persist() method rather than save(). \r\n\r\nhttps://forum.hibernate.org/viewtopic.php?f=1&amp;t=1011405\r\n\r\nHowever, unlike save(), persist() does not guarantee that the identifier value will be set immediately on the persisted instance.\r\n\r\nhttps://forum.hibernate.org/viewtopic.php?f=1&amp;t=951275\r\n\r\n(and you can jump to christian&#39;s last post in the thread)","title":"Force Hibernate Insert Without Select Statements","body":"<p>You can use the persist() method rather than save().</p>\n<p><a href=\"https://forum.hibernate.org/viewtopic.php?f=1&amp;t=1011405\" rel=\"nofollow noreferrer\">https://forum.hibernate.org/viewtopic.php?f=1&amp;t=1011405</a></p>\n<p>However, unlike save(), persist() does not guarantee that the identifier value will be set immediately on the persisted instance.</p>\n<p><a href=\"https://forum.hibernate.org/viewtopic.php?f=1&amp;t=951275\" rel=\"nofollow noreferrer\">https://forum.hibernate.org/viewtopic.php?f=1&amp;t=951275</a></p>\n<p>(and you can jump to christian's last post in the thread)</p>\n"},{"tags":[],"owner":{"account_id":446547,"reputation":126635,"user_id":839646,"accept_rate":70,"display_name":"Ryan Stewart"},"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1317262846,"creation_date":1317262846,"answer_id":7591766,"question_id":7588657,"body_markdown":"Hibernate doesn&#39;t issue a select to see if an object is unique upon a `save()`. In point of fact, Hibernate doesn&#39;t even issue an insert when you call `save()`. That happens when you `flush()` or commit the transaction. You&#39;ll need to find out exactly what the selects are for and what&#39;s initiating them. To help narrow it down, you could write a quick test like\r\n\r\n    Session session = openSession();\r\n    Transaction tx = session.beginTransaction();\r\n    session.save(myObject);\r\n    tx.commit();\r\n\r\nand see what statements that produces.","title":"Force Hibernate Insert Without Select Statements","body":"<p>Hibernate doesn't issue a select to see if an object is unique upon a <code>save()</code>. In point of fact, Hibernate doesn't even issue an insert when you call <code>save()</code>. That happens when you <code>flush()</code> or commit the transaction. You'll need to find out exactly what the selects are for and what's initiating them. To help narrow it down, you could write a quick test like</p>\n\n<pre><code>Session session = openSession();\nTransaction tx = session.beginTransaction();\nsession.save(myObject);\ntx.commit();\n</code></pre>\n\n<p>and see what statements that produces.</p>\n"},{"tags":[],"owner":{"account_id":7080403,"reputation":84,"user_id":5419028,"display_name":"Volo Myhal"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1691689768,"creation_date":1691689768,"answer_id":76878196,"question_id":7588657,"body_markdown":"Inherit Persistable&lt;KeyType&gt; and override isNew as following:\r\n```\r\npublic class MyEntity implements Persistable&lt;KeyType&gt; {\r\n  @Id\r\n  private KeyType id;\r\n\r\n  @Transient\r\n  private boolean isNew = false;  // this tells next `save()` usually to do `UPDATE to DB`\r\n\r\n  public KeyType getId() {\r\n    return id;\r\n  }\r\n\r\n  public boolean isNew() {\r\n    return isNew;\r\n  }\r\n\r\n  // constructor when you create new Entity assigning 100% new unique id:\r\n  public MyEntity(String id) {\r\n    this.id = id;\r\n    this.isNew = true;  // this tells next `save()` to do `INSERT INTO DB`\r\n    ...\r\n  }\r\n  \r\n  ...\r\n}\r\n\r\n```\r\n","title":"Force Hibernate Insert Without Select Statements","body":"<p>Inherit Persistable and override isNew as following:</p>\n<pre><code>public class MyEntity implements Persistable&lt;KeyType&gt; {\n  @Id\n  private KeyType id;\n\n  @Transient\n  private boolean isNew = false;  // this tells next `save()` usually to do `UPDATE to DB`\n\n  public KeyType getId() {\n    return id;\n  }\n\n  public boolean isNew() {\n    return isNew;\n  }\n\n  // constructor when you create new Entity assigning 100% new unique id:\n  public MyEntity(String id) {\n    this.id = id;\n    this.isNew = true;  // this tells next `save()` to do `INSERT INTO DB`\n    ...\n  }\n  \n  ...\n}\n\n</code></pre>\n"}],"owner":{"account_id":214278,"reputation":2298,"user_id":468160,"accept_rate":50,"display_name":"kand"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":17134,"favorite_count":0,"down_vote_count":0,"up_vote_count":13,"accepted_answer_id":7589106,"answer_count":4,"score":13,"last_activity_date":1691689768,"creation_date":1317238796,"question_id":7588657,"body_markdown":"I am attempting to insert a new record into a table that I know is unique before hand. I have tried calling save() on the object, but that does a bunch of SELECT statements before doing any INSERTs, which I don&#39;t want to do because I know the object is already unique.\r\n\r\nI am opening a new session for each transaction, which I can see being an issue, but that is a constraint of my domain. Is there some way to force Hibernate to not do any SELECTs before it INSERTs? ","title":"Force Hibernate Insert Without Select Statements","body":"<p>I am attempting to insert a new record into a table that I know is unique before hand. I have tried calling save() on the object, but that does a bunch of SELECT statements before doing any INSERTs, which I don't want to do because I know the object is already unique.</p>\n\n<p>I am opening a new session for each transaction, which I can see being an issue, but that is a constraint of my domain. Is there some way to force Hibernate to not do any SELECTs before it INSERTs? </p>\n"},{"tags":["java","datetime","timezone","simpledateformat","gmt"],"comments":[{"owner":{"account_id":11683,"reputation":1438169,"user_id":22656,"accept_rate":86,"display_name":"Jon Skeet"},"score":3,"creation_date":1691563068,"post_id":76865162,"comment_id":135506726,"body_markdown":"Basically, there&#39;s no such thing as a `Date` in a particular time zone. See https://codeblog.jonskeet.uk/2017/04/23/all-about-java-util-date/ (I&#39;d very strongly advise you to use java.time instead.)","body":"Basically, there&#39;s no such thing as a <code>Date</code> in a particular time zone. See <a href=\"https://codeblog.jonskeet.uk/2017/04/23/all-about-java-util-date/\" rel=\"nofollow noreferrer\">codeblog.jonskeet.uk/2017/04/23/all-about-java-util-date</a> (I&#39;d very strongly advise you to use java.time instead.)"},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":1,"creation_date":1691569666,"post_id":76865162,"comment_id":135507960,"body_markdown":"*I am trying to convert the Date received from Server* How is it received and in what form?","body":"<i>I am trying to convert the Date received from Server</i> How is it received and in what form?"},{"owner":{"account_id":9917587,"reputation":640,"user_id":7341878,"accept_rate":10,"display_name":"Prakash"},"score":0,"creation_date":1691579441,"post_id":76865162,"comment_id":135509953,"body_markdown":"new Date() provides a Server date in GMT format.","body":"new Date() provides a Server date in GMT format."},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":1,"creation_date":1691579736,"post_id":76865162,"comment_id":135510008,"body_markdown":"You should probably start with `Instant.now()` at the server, having ensured the system clock is set to UTC","body":"You should probably start with <code>Instant.now()</code> at the server, having ensured the system clock is set to UTC"},{"owner":{"account_id":7612423,"reputation":82486,"user_id":5772882,"display_name":"Anonymous"},"score":0,"creation_date":1691580689,"post_id":76865162,"comment_id":135510193,"body_markdown":"I strongly recommend that you do not use `Date`, `SimpleDateFormat` and `TimeZone`. Those classes were poorly designed and are long outdated. Use `ZonedDateTime`, `ZoneId` and `DateTimeFormatter`, all from [java.time, the modern Java date and time API](https://docs.oracle.com/javase/tutorial/datetime/index.html).","body":"I strongly recommend that you do not use <code>Date</code>, <code>SimpleDateFormat</code> and <code>TimeZone</code>. Those classes were poorly designed and are long outdated. Use <code>ZonedDateTime</code>, <code>ZoneId</code> and <code>DateTimeFormatter</code>, all from <a href=\"https://docs.oracle.com/javase/tutorial/datetime/index.html\" rel=\"nofollow noreferrer\">java.time, the modern Java date and time API</a>."},{"owner":{"account_id":7612423,"reputation":82486,"user_id":5772882,"display_name":"Anonymous"},"score":1,"creation_date":1691580863,"post_id":76865162,"comment_id":135510227,"body_markdown":"@Prakash It does not since a `java.util.Date` neither can have a format nor be in GMT (GMT is not a format, it’s a time zone or an offset of zero).","body":"@Prakash It does not since a <code>java.util.Date</code> neither can have a format nor be in GMT (GMT is not a format, it’s a time zone or an offset of zero)."},{"owner":{"account_id":2179728,"reputation":73047,"user_id":10819573,"display_name":"Arvind Kumar Avinash"},"score":1,"creation_date":1691658783,"post_id":76865162,"comment_id":135522312,"body_markdown":"*I am trying to convert the Date received from Server to user specific date format (IST) and returning as Date datatype.* - Return your result as `String`, not `Date` as a `Date` can not hold the information about format and timezone.","body":"<i>I am trying to convert the Date received from Server to user specific date format (IST) and returning as Date datatype.</i> - Return your result as <code>String</code>, not <code>Date</code> as a <code>Date</code> can not hold the information about format and timezone."}],"owner":{"account_id":9917587,"reputation":640,"user_id":7341878,"accept_rate":10,"display_name":"Prakash"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":58,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"closed_date":1691688895,"answer_count":0,"score":0,"last_activity_date":1691689111,"creation_date":1691563001,"question_id":76865162,"body_markdown":"I am trying to convert the Date received from Server to user specific date format (IST) and returning as Date datatype. Attached the sample code and result as below\r\n\r\n```\r\nimport java.text.SimpleDateFormat;\r\nimport java.util.Date;\r\nimport java.util.TimeZone;\r\n\r\npublic class ServerToClientDateTime {\r\n\tpublic static void main(String[] args) {\r\n\t\ttry {\r\n\t\t\tString clientSpecificFormat = &quot;yyyy-MM-dd HH:mm:ss&quot;;\r\n\t\t\tString clientTimezone1 = &quot;America/New_York&quot;;\r\n\t\t\tString clientTimezone2 = &quot;Asia/Kolkata&quot;;\r\n\t\t\tDate date = new Date();\r\n\t\t\tSystem.out.println(new Date());\r\n\t\t\tSimpleDateFormat dateFormat = new g(clientSpecificFormat);\r\n\t\t\tTimeZone americaNewyork = TimeZone.getTimeZone(clientTimezone1);\r\n\t\t\tTimeZone asiaKolkata = TimeZone.getTimeZone(clientTimezone2);\r\n\t\t\tdateFormat.setTimeZone(americaNewyork);\r\n\r\n\t\t\tSystem.out.println(&quot;\\namerica/ newyork:&quot; + dateFormat.format(date));\r\n\t\t\tSystem.out.println(&quot;Date format :&quot; + dateFormat.parse(dateFormat.format(date)));\r\n\r\n\t\t\tdateFormat.setTimeZone(asiaKolkata);\r\n\t\t\tSystem.out.println(&quot;\\nAsia/ Kolkata:&quot; + dateFormat.format(date));\r\n\t\t\tSystem.out.println(&quot;Date format :&quot; + dateFormat.parse(dateFormat.format(date)));\r\n\t\t} catch (Exception exp) {\r\n\t\t\tSystem.out.println(exp);\r\n\t\t}\r\n\t}\r\n\t\r\n}\r\n```\r\n\r\nResult for the Program as \r\n```\r\nWed Aug 09 11:57:46 IST 2023\r\n\r\namerica/ newyork:2023-08-09 02:27:46\r\nDate format :Wed Aug 09 11:57:46 IST 2023\r\n\r\nAsia/ Kolkata:2023-08-09 11:57:46\r\nDate format :Wed Aug 09 11:57:46 IST 2023\r\n```\r\n\r\nwhy **America/New_York** return same as GMT after parsing, how to get the expected IST date format.\r\n\r\nThanks","title":"Converting Server GMT date and time to User specified date and time zone with specified format, returning with Date datatype","body":"<p>I am trying to convert the Date received from Server to user specific date format (IST) and returning as Date datatype. Attached the sample code and result as below</p>\n<pre><code>import java.text.SimpleDateFormat;\nimport java.util.Date;\nimport java.util.TimeZone;\n\npublic class ServerToClientDateTime {\n    public static void main(String[] args) {\n        try {\n            String clientSpecificFormat = &quot;yyyy-MM-dd HH:mm:ss&quot;;\n            String clientTimezone1 = &quot;America/New_York&quot;;\n            String clientTimezone2 = &quot;Asia/Kolkata&quot;;\n            Date date = new Date();\n            System.out.println(new Date());\n            SimpleDateFormat dateFormat = new g(clientSpecificFormat);\n            TimeZone americaNewyork = TimeZone.getTimeZone(clientTimezone1);\n            TimeZone asiaKolkata = TimeZone.getTimeZone(clientTimezone2);\n            dateFormat.setTimeZone(americaNewyork);\n\n            System.out.println(&quot;\\namerica/ newyork:&quot; + dateFormat.format(date));\n            System.out.println(&quot;Date format :&quot; + dateFormat.parse(dateFormat.format(date)));\n\n            dateFormat.setTimeZone(asiaKolkata);\n            System.out.println(&quot;\\nAsia/ Kolkata:&quot; + dateFormat.format(date));\n            System.out.println(&quot;Date format :&quot; + dateFormat.parse(dateFormat.format(date)));\n        } catch (Exception exp) {\n            System.out.println(exp);\n        }\n    }\n    \n}\n</code></pre>\n<p>Result for the Program as</p>\n<pre><code>Wed Aug 09 11:57:46 IST 2023\n\namerica/ newyork:2023-08-09 02:27:46\nDate format :Wed Aug 09 11:57:46 IST 2023\n\nAsia/ Kolkata:2023-08-09 11:57:46\nDate format :Wed Aug 09 11:57:46 IST 2023\n</code></pre>\n<p>why <strong>America/New_York</strong> return same as GMT after parsing, how to get the expected IST date format.</p>\n<p>Thanks</p>\n"},{"tags":["java","exception","intellij-idea","spring-boot"],"comments":[{"owner":{"account_id":322284,"reputation":16565,"user_id":641627,"display_name":"alexbt"},"score":0,"creation_date":1471791139,"post_id":39064537,"comment_id":65479595,"body_markdown":"can you show your pom.xml ?","body":"can you show your pom.xml ?"}],"answers":[{"tags":[],"owner":{"account_id":304234,"reputation":32207,"user_id":613628,"accept_rate":100,"display_name":"Stephane Nicoll"},"down_vote_count":0,"up_vote_count":29,"is_accepted":true,"score":29,"last_activity_date":1564503328,"creation_date":1471808317,"answer_id":39068186,"question_id":39064537,"body_markdown":"I am guessing you have a `war` packaging project with Maven and you&#39;ve flagged your servlet engine (tomcat) as provided. \r\n\r\nUnfortunately, IntellIJ IDEA does not [add `provided` dependencies in the runtime classpath](https://youtrack.jetbrains.com/issue/IDEA-107048), that&#39;s why your project does not work when you run it from the IDE.\r\n\r\n**UPDATE 7/30/2019**\r\n\r\nAs per Giorgio:\r\n\r\n&gt; They have added a checkbox in the Application Run Configuration to\r\n&gt; &quot;Include dependencies with &#39;Provided&#39; scope&quot;","title":"Unable to start spring-boot application in IntelliJ Idea","body":"<p>I am guessing you have a <code>war</code> packaging project with Maven and you've flagged your servlet engine (tomcat) as provided. </p>\n\n<p>Unfortunately, IntellIJ IDEA does not <a href=\"https://youtrack.jetbrains.com/issue/IDEA-107048\" rel=\"noreferrer\">add <code>provided</code> dependencies in the runtime classpath</a>, that's why your project does not work when you run it from the IDE.</p>\n\n<p><strong>UPDATE 7/30/2019</strong></p>\n\n<p>As per Giorgio:</p>\n\n<blockquote>\n  <p>They have added a checkbox in the Application Run Configuration to\n  \"Include dependencies with 'Provided' scope\"</p>\n</blockquote>\n"}],"owner":{"account_id":1113149,"reputation":2249,"user_id":1103179,"accept_rate":33,"display_name":"saeedj"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":26159,"favorite_count":0,"down_vote_count":0,"up_vote_count":16,"accepted_answer_id":39068186,"answer_count":1,"score":16,"last_activity_date":1691688969,"creation_date":1471784862,"question_id":39064537,"body_markdown":"**Overview**\r\n\r\nI can run the application by using maven plugin of spring-boot but not run it with the IDE. The following lines give some detail about my program.\r\n\r\nThe application class is as follows: \r\n\r\n    package com.blss.retailServices.dataExportRouter;\r\n    \r\n    import org.springframework.boot.SpringApplication;\r\n    import org.springframework.boot.autoconfigure.EnableAutoConfiguration;\r\n    import org.springframework.boot.autoconfigure.velocity.VelocityAutoConfiguration;\r\n    import org.springframework.context.annotation.ComponentScan;\r\n    import org.springframework.context.annotation.Configuration;\r\n    \r\n    @Configuration\r\n    @ComponentScan\r\n    @EnableAutoConfiguration(exclude = { VelocityAutoConfiguration.class })\r\n    public class DataExportRouterApplication {\r\n        public static void main(String[] args) throws Exception {\r\n            SpringApplication.run(DataExportRouterApplication.class, args);\r\n        }\r\n    }\r\n\r\nThe exception stack trace is as follows: \r\n\r\n    org.springframework.context.ApplicationContextException: Unable to start embedded container; nested exception is org.springframework.context.ApplicationContextException: Unable to start EmbeddedWebApplicationContext due to missing EmbeddedServletContainerFactory bean.\r\n    \tat org.springframework.boot.context.embedded.EmbeddedWebApplicationContext.onRefresh(EmbeddedWebApplicationContext.java:133) ~[spring-boot-1.3.3.RELEASE.jar:1.3.3.RELEASE]\r\n    \tat org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:532) ~[spring-context-4.2.5.RELEASE.jar:4.2.5.RELEASE]\r\n    \tat org.springframework.boot.context.embedded.EmbeddedWebApplicationContext.refresh(EmbeddedWebApplicationContext.java:118) ~[spring-boot-1.3.3.RELEASE.jar:1.3.3.RELEASE]\r\n    \tat org.springframework.boot.SpringApplication.refresh(SpringApplication.java:766) [spring-boot-1.3.3.RELEASE.jar:1.3.3.RELEASE]\r\n    \tat org.springframework.boot.SpringApplication.createAndRefreshContext(SpringApplication.java:361) [spring-boot-1.3.3.RELEASE.jar:1.3.3.RELEASE]\r\n    \tat org.springframework.boot.SpringApplication.run(SpringApplication.java:307) [spring-boot-1.3.3.RELEASE.jar:1.3.3.RELEASE]\r\n    \tat org.springframework.boot.SpringApplication.run(SpringApplication.java:1191) [spring-boot-1.3.3.RELEASE.jar:1.3.3.RELEASE]\r\n    \tat org.springframework.boot.SpringApplication.run(SpringApplication.java:1180) [spring-boot-1.3.3.RELEASE.jar:1.3.3.RELEASE]\r\n    \tat com.blss.retailServices.dataExportRouter.DataExportRouterApplication.main(DataExportRouterApplication.java:14) [classes/:na]\r\n    \tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:1.8.0_74]\r\n    \tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) ~[na:1.8.0_74]\r\n    \tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:1.8.0_74]\r\n    \tat java.lang.reflect.Method.invoke(Method.java:498) ~[na:1.8.0_74]\r\n    \tat com.intellij.rt.execution.application.AppMain.main(AppMain.java:147) [idea_rt.jar:na]\r\n    Caused by: org.springframework.context.ApplicationContextException: Unable to start EmbeddedWebApplicationContext due to missing EmbeddedServletContainerFactory bean.\r\n    \tat org.springframework.boot.context.embedded.EmbeddedWebApplicationContext.getEmbeddedServletContainerFactory(EmbeddedWebApplicationContext.java:185) ~[spring-boot-1.3.3.RELEASE.jar:1.3.3.RELEASE]\r\n    \tat org.springframework.boot.context.embedded.EmbeddedWebApplicationContext.createEmbeddedServletContainer(EmbeddedWebApplicationContext.java:158) ~[spring-boot-1.3.3.RELEASE.jar:1.3.3.RELEASE]\r\n    \tat org.springframework.boot.context.embedded.EmbeddedWebApplicationContext.onRefresh(EmbeddedWebApplicationContext.java:130) ~[spring-boot-1.3.3.RELEASE.jar:1.3.3.RELEASE]\r\n    \t... 13 common frames omitted\r\n\r\nI used @SpringbootApplication but to no avail. \r\n\r\n**Question**\r\n\r\nSo I would appreciate it if anyone could help me solve this issue.","title":"Unable to start spring-boot application in IntelliJ Idea","body":"<p><strong>Overview</strong></p>\n\n<p>I can run the application by using maven plugin of spring-boot but not run it with the IDE. The following lines give some detail about my program.</p>\n\n<p>The application class is as follows: </p>\n\n<pre><code>package com.blss.retailServices.dataExportRouter;\n\nimport org.springframework.boot.SpringApplication;\nimport org.springframework.boot.autoconfigure.EnableAutoConfiguration;\nimport org.springframework.boot.autoconfigure.velocity.VelocityAutoConfiguration;\nimport org.springframework.context.annotation.ComponentScan;\nimport org.springframework.context.annotation.Configuration;\n\n@Configuration\n@ComponentScan\n@EnableAutoConfiguration(exclude = { VelocityAutoConfiguration.class })\npublic class DataExportRouterApplication {\n    public static void main(String[] args) throws Exception {\n        SpringApplication.run(DataExportRouterApplication.class, args);\n    }\n}\n</code></pre>\n\n<p>The exception stack trace is as follows: </p>\n\n<pre><code>org.springframework.context.ApplicationContextException: Unable to start embedded container; nested exception is org.springframework.context.ApplicationContextException: Unable to start EmbeddedWebApplicationContext due to missing EmbeddedServletContainerFactory bean.\n    at org.springframework.boot.context.embedded.EmbeddedWebApplicationContext.onRefresh(EmbeddedWebApplicationContext.java:133) ~[spring-boot-1.3.3.RELEASE.jar:1.3.3.RELEASE]\n    at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:532) ~[spring-context-4.2.5.RELEASE.jar:4.2.5.RELEASE]\n    at org.springframework.boot.context.embedded.EmbeddedWebApplicationContext.refresh(EmbeddedWebApplicationContext.java:118) ~[spring-boot-1.3.3.RELEASE.jar:1.3.3.RELEASE]\n    at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:766) [spring-boot-1.3.3.RELEASE.jar:1.3.3.RELEASE]\n    at org.springframework.boot.SpringApplication.createAndRefreshContext(SpringApplication.java:361) [spring-boot-1.3.3.RELEASE.jar:1.3.3.RELEASE]\n    at org.springframework.boot.SpringApplication.run(SpringApplication.java:307) [spring-boot-1.3.3.RELEASE.jar:1.3.3.RELEASE]\n    at org.springframework.boot.SpringApplication.run(SpringApplication.java:1191) [spring-boot-1.3.3.RELEASE.jar:1.3.3.RELEASE]\n    at org.springframework.boot.SpringApplication.run(SpringApplication.java:1180) [spring-boot-1.3.3.RELEASE.jar:1.3.3.RELEASE]\n    at com.blss.retailServices.dataExportRouter.DataExportRouterApplication.main(DataExportRouterApplication.java:14) [classes/:na]\n    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:1.8.0_74]\n    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) ~[na:1.8.0_74]\n    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:1.8.0_74]\n    at java.lang.reflect.Method.invoke(Method.java:498) ~[na:1.8.0_74]\n    at com.intellij.rt.execution.application.AppMain.main(AppMain.java:147) [idea_rt.jar:na]\nCaused by: org.springframework.context.ApplicationContextException: Unable to start EmbeddedWebApplicationContext due to missing EmbeddedServletContainerFactory bean.\n    at org.springframework.boot.context.embedded.EmbeddedWebApplicationContext.getEmbeddedServletContainerFactory(EmbeddedWebApplicationContext.java:185) ~[spring-boot-1.3.3.RELEASE.jar:1.3.3.RELEASE]\n    at org.springframework.boot.context.embedded.EmbeddedWebApplicationContext.createEmbeddedServletContainer(EmbeddedWebApplicationContext.java:158) ~[spring-boot-1.3.3.RELEASE.jar:1.3.3.RELEASE]\n    at org.springframework.boot.context.embedded.EmbeddedWebApplicationContext.onRefresh(EmbeddedWebApplicationContext.java:130) ~[spring-boot-1.3.3.RELEASE.jar:1.3.3.RELEASE]\n    ... 13 common frames omitted\n</code></pre>\n\n<p>I used @SpringbootApplication but to no avail. </p>\n\n<p><strong>Question</strong></p>\n\n<p>So I would appreciate it if anyone could help me solve this issue.</p>\n"},{"tags":["java","mysql","spring-boot","spring-data-jpa"],"comments":[{"owner":{"account_id":4688171,"reputation":11056,"user_id":3795036,"accept_rate":88,"display_name":"K.Nicholas"},"score":0,"creation_date":1691688259,"post_id":76877981,"comment_id":135528668,"body_markdown":"You cannot do joins with projections.","body":"You cannot do joins with projections."},{"owner":{"account_id":4479383,"reputation":525,"user_id":3643590,"display_name":"Pervez"},"score":0,"creation_date":1691690697,"post_id":76877981,"comment_id":135529173,"body_markdown":"Joins with projections is possible. If I will use left join or other joins. Only join fetch creates problem","body":"Joins with projections is possible. If I will use left join or other joins. Only join fetch creates problem"},{"owner":{"account_id":17705436,"reputation":731,"user_id":12854146,"display_name":"tremendous7"},"score":0,"creation_date":1691804821,"post_id":76877981,"comment_id":135545338,"body_markdown":"hello! join fetch fetches the right association of the join. in your case the semantic exception is raised because the return type does not need to fetch the association because your query does not return the association. if the return type contains the association, join fetch will raise no semantic exception. if the return type does not contain the association that was join fetched, than a semantic exception is thrown.","body":"hello! join fetch fetches the right association of the join. in your case the semantic exception is raised because the return type does not need to fetch the association because your query does not return the association. if the return type contains the association, join fetch will raise no semantic exception. if the return type does not contain the association that was join fetched, than a semantic exception is thrown."}],"owner":{"account_id":4479383,"reputation":525,"user_id":3643590,"display_name":"Pervez"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":65,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1691687836,"creation_date":1691687836,"question_id":76877981,"body_markdown":"In my JPA application, I encountered an error when attempting to use a **`join fetch`** clause within a select query. The error message I received was as follows:\r\n\r\n\r\n`Caused by: java.lang.IllegalArgumentException: org.hibernate.query.SemanticException: query specified join fetching, but the owner of the fetched association was not present in the select list [SqmListJoin(com.knitkota.jpademo.entity.UserEntity(u).addressEntities(a))]`\r\n\r\n\r\nInterestingly, I noticed that the **`join fetch`** operation worked successfully when used without the select statement.\r\n\r\nIn the provided repository, particularly in the **`ServiceClass.java`** file, you can observe two methods implemented in the **`UserRepository.java`** class. The method **`userRepository.findAllJoinFetch();`** executes without any issues. However, the method **`userRepository.findAllJoinFetchDto();`** triggers the error mentioned above.\r\n\r\nI would greatly appreciate your guidance in comprehending the underlying problem related to the **`join fetch`** operation.\r\n\r\nThank you for your assistance in clarifying this matter.\r\n\r\nGit repository: [https://github.com/pervez8ktt/SpringBootJpaDemo](https://github.com/pervez8ktt/SpringBootJpaDemo)\r\n","title":"Problem with Join fetch in Spring boot JPA","body":"<p>In my JPA application, I encountered an error when attempting to use a <strong><code>join fetch</code></strong> clause within a select query. The error message I received was as follows:</p>\n<p><code>Caused by: java.lang.IllegalArgumentException: org.hibernate.query.SemanticException: query specified join fetching, but the owner of the fetched association was not present in the select list [SqmListJoin(com.knitkota.jpademo.entity.UserEntity(u).addressEntities(a))]</code></p>\n<p>Interestingly, I noticed that the <strong><code>join fetch</code></strong> operation worked successfully when used without the select statement.</p>\n<p>In the provided repository, particularly in the <strong><code>ServiceClass.java</code></strong> file, you can observe two methods implemented in the <strong><code>UserRepository.java</code></strong> class. The method <strong><code>userRepository.findAllJoinFetch();</code></strong> executes without any issues. However, the method <strong><code>userRepository.findAllJoinFetchDto();</code></strong> triggers the error mentioned above.</p>\n<p>I would greatly appreciate your guidance in comprehending the underlying problem related to the <strong><code>join fetch</code></strong> operation.</p>\n<p>Thank you for your assistance in clarifying this matter.</p>\n<p>Git repository: <a href=\"https://github.com/pervez8ktt/SpringBootJpaDemo\" rel=\"nofollow noreferrer\">https://github.com/pervez8ktt/SpringBootJpaDemo</a></p>\n"},{"tags":["java","spring-mvc","spring-data","customization","spring-data-rest"],"answers":[{"tags":[],"owner":{"account_id":7137213,"reputation":92,"user_id":5456355,"display_name":"Sonka"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1500660719,"creation_date":1500660719,"answer_id":45244179,"question_id":44804766,"body_markdown":"Unfortunately, you cannot add anything to alps, you can only add customs links to your API. If you what go white good documentation for your API which is mixing Spring MVC and Spring data rest, it is better to choose another way of doing this. For example, you can use [Spring rest docs][1]\r\n\r\n\r\n  [1]: http://docs.spring.io/autorepo/docs/spring-restdocs/1.1.0.BUILD-SNAPSHOT/reference/html5/","title":"Customize alps generation in Spring Data Rest","body":"<p>Unfortunately, you cannot add anything to alps, you can only add customs links to your API. If you what go white good documentation for your API which is mixing Spring MVC and Spring data rest, it is better to choose another way of doing this. For example, you can use <a href=\"http://docs.spring.io/autorepo/docs/spring-restdocs/1.1.0.BUILD-SNAPSHOT/reference/html5/\" rel=\"nofollow noreferrer\">Spring rest docs</a></p>\n"}],"owner":{"account_id":5519628,"reputation":437,"user_id":4383061,"accept_rate":20,"display_name":"Mr2dishes"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":1107,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"answer_count":1,"score":3,"last_activity_date":1691687470,"creation_date":1498658603,"question_id":44804766,"body_markdown":"I am mixing SDR (Spring Data Rest) with custom controller like define in:\r\n\r\nhttps://docs.spring.io/spring-data/rest/docs/current/reference/html/#customizing-sdr.overriding-sdr-response-handlers \r\n\r\nWith this to keep HATEOAS link between SDR and custom Controller: \r\n\r\nhttps://docs.spring.io/spring-data/rest/docs/current/reference/html/#_the_resourceprocessor_interface\r\n\r\nEverything works find except for handling ALPS metadata. There an automatic ALPS generator in Spring data Rest http://localhost:8080/profile and I don&#39;t know how to include custom metadata which is not handle by SDR\r\n\r\nUPDATE:\r\nplease see author response in the comments of this article: https://spring.io/blog/2014/07/14/spring-data-rest-now-comes-with-alps-metadata but I don&#39;t know how add ALPS through Spring Hateoas...\r\n\r\nsimilar SO post: https://stackoverflow.com/questions/25469923/alps-metadata-for-all-spring-mvc-controller\r\n\r\nHelp!","title":"Customize alps generation in Spring Data Rest","body":"<p>I am mixing SDR (Spring Data Rest) with custom controller like define in:</p>\n<p><a href=\"https://docs.spring.io/spring-data/rest/docs/current/reference/html/#customizing-sdr.overriding-sdr-response-handlers\" rel=\"nofollow noreferrer\">https://docs.spring.io/spring-data/rest/docs/current/reference/html/#customizing-sdr.overriding-sdr-response-handlers</a></p>\n<p>With this to keep HATEOAS link between SDR and custom Controller:</p>\n<p><a href=\"https://docs.spring.io/spring-data/rest/docs/current/reference/html/#_the_resourceprocessor_interface\" rel=\"nofollow noreferrer\">https://docs.spring.io/spring-data/rest/docs/current/reference/html/#_the_resourceprocessor_interface</a></p>\n<p>Everything works find except for handling ALPS metadata. There an automatic ALPS generator in Spring data Rest http://localhost:8080/profile and I don't know how to include custom metadata which is not handle by SDR</p>\n<p>UPDATE:\nplease see author response in the comments of this article: <a href=\"https://spring.io/blog/2014/07/14/spring-data-rest-now-comes-with-alps-metadata\" rel=\"nofollow noreferrer\">https://spring.io/blog/2014/07/14/spring-data-rest-now-comes-with-alps-metadata</a> but I don't know how add ALPS through Spring Hateoas...</p>\n<p>similar SO post: <a href=\"https://stackoverflow.com/questions/25469923/alps-metadata-for-all-spring-mvc-controller\">ALPS metadata for all Spring-MVC Controller</a></p>\n<p>Help!</p>\n"},{"tags":["java","jpa"],"comments":[{"owner":{"account_id":16177910,"reputation":1,"user_id":11680108,"display_name":"Vinamer"},"score":0,"creation_date":1594993753,"post_id":62955304,"comment_id":111329596,"body_markdown":"I think a similar question is mentioned here.\nhttps://stackoverflow.com/questions/13700565/jpa-query-getresultlist-use-in-a-generic-way","body":"I think a similar question is mentioned here. <a href=\"https://stackoverflow.com/questions/13700565/jpa-query-getresultlist-use-in-a-generic-way\" title=\"jpa query getresultlist use in a generic way\">stackoverflow.com/questions/13700565/&hellip;</a>"},{"owner":{"account_id":1223835,"reputation":75848,"user_id":1189885,"accept_rate":43,"display_name":"chrylis -cautiouslyoptimistic-"},"score":0,"creation_date":1594993854,"post_id":62955304,"comment_id":111329648,"body_markdown":"So use JPA as it&#39;s intended and use a JPQL query of `SELECT new ResultClass...`","body":"So use JPA as it&#39;s intended and use a JPQL query of <code>SELECT new ResultClass...</code>"},{"owner":{"account_id":1038596,"reputation":34548,"user_id":1045142,"accept_rate":67,"display_name":"Simon Martinelli"},"score":0,"creation_date":1594993912,"post_id":62955304,"comment_id":111329681,"body_markdown":"@chrylis-cautiouslyoptimistic- You can&#39;t use constructor expression with native queries","body":"@chrylis-cautiouslyoptimistic- You can&#39;t use constructor expression with native queries"},{"owner":{"account_id":1223835,"reputation":75848,"user_id":1189885,"accept_rate":43,"display_name":"chrylis -cautiouslyoptimistic-"},"score":0,"creation_date":1594993962,"post_id":62955304,"comment_id":111329704,"body_markdown":"@SimonMartinelli I meant to say &quot;JPQL query&quot; (updated), but that was the exact point of &quot;JPQL&quot;.","body":"@SimonMartinelli I meant to say &quot;JPQL query&quot; (updated), but that was the exact point of &quot;JPQL&quot;."}],"answers":[{"tags":[],"owner":{"account_id":1038596,"reputation":34548,"user_id":1045142,"accept_rate":67,"display_name":"Simon Martinelli"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1594993875,"creation_date":1594993875,"answer_id":62955432,"question_id":62955304,"body_markdown":"Either use ConstructorResult (JPA) or ResultTransformer (Hibernate) or QLRM.\r\n\r\nConstructorResult is JPA standard and you have to create a Annotation with the column mapping:\r\n\r\n    @SqlResultSetMapping(\r\n        name = &quot;BookValueMapping&quot;,\r\n        classes = @ConstructorResult(\r\n                targetClass = BookValue.class,\r\n                columns = {\r\n                    @ColumnResult(name = &quot;id&quot;, type = Long.class),\r\n                    @ColumnResult(name = &quot;title&quot;),\r\n                    @ColumnResult(name = &quot;version&quot;, type = Long.class),\r\n                    @ColumnResult(name = &quot;authorName&quot;)}))\r\n\r\nFrom https://thorben-janssen.com/result-set-mapping-constructor-result-mappings/\r\n\r\nAnd ResultTransformer is Hibernate proprietary and you must use the Hibernate session:\r\n\r\n    List&lt;PersonSummaryDTO&gt; dtos = session.createNativeQuery(\r\n    \t&quot;SELECT p.id as \\&quot;id\\&quot;, p.name as \\&quot;name\\&quot; &quot; +\r\n    \t&quot;FROM Person p&quot;)\r\n    .setResultTransformer( Transformers.aliasToBean( PersonSummaryDTO.class ) )\r\n    .list();\r\n\r\nFrom https://docs.jboss.org/hibernate/orm/5.4/userguide/html_single/Hibernate_User_Guide.html#sql-dto-query\r\n\r\nOr QLRM is a library that maps the result to a DTO using the constructor:\r\n\r\n    JpaResultMapper jpaResultMapper = new JpaResultMapper();\r\n    \r\n    Query q = em.createNativeQuery(&quot;SELECT ID, NAME FROM EMPLOYEE&quot;);\r\n    List&lt;EmployeeTO&gt; list = jpaResultMapper.list(q, EmployeeTO.class);\r\n\r\nhttps://github.com/72services/qlrm","title":"How to convert Array of Object to Custom Class Object (that is array to object)?","body":"<p>Either use ConstructorResult (JPA) or ResultTransformer (Hibernate) or QLRM.</p>\n<p>ConstructorResult is JPA standard and you have to create a Annotation with the column mapping:</p>\n<pre><code>@SqlResultSetMapping(\n    name = &quot;BookValueMapping&quot;,\n    classes = @ConstructorResult(\n            targetClass = BookValue.class,\n            columns = {\n                @ColumnResult(name = &quot;id&quot;, type = Long.class),\n                @ColumnResult(name = &quot;title&quot;),\n                @ColumnResult(name = &quot;version&quot;, type = Long.class),\n                @ColumnResult(name = &quot;authorName&quot;)}))\n</code></pre>\n<p>From <a href=\"https://thorben-janssen.com/result-set-mapping-constructor-result-mappings/\" rel=\"nofollow noreferrer\">https://thorben-janssen.com/result-set-mapping-constructor-result-mappings/</a></p>\n<p>And ResultTransformer is Hibernate proprietary and you must use the Hibernate session:</p>\n<pre><code>List&lt;PersonSummaryDTO&gt; dtos = session.createNativeQuery(\n    &quot;SELECT p.id as \\&quot;id\\&quot;, p.name as \\&quot;name\\&quot; &quot; +\n    &quot;FROM Person p&quot;)\n.setResultTransformer( Transformers.aliasToBean( PersonSummaryDTO.class ) )\n.list();\n</code></pre>\n<p>From <a href=\"https://docs.jboss.org/hibernate/orm/5.4/userguide/html_single/Hibernate_User_Guide.html#sql-dto-query\" rel=\"nofollow noreferrer\">https://docs.jboss.org/hibernate/orm/5.4/userguide/html_single/Hibernate_User_Guide.html#sql-dto-query</a></p>\n<p>Or QLRM is a library that maps the result to a DTO using the constructor:</p>\n<pre><code>JpaResultMapper jpaResultMapper = new JpaResultMapper();\n\nQuery q = em.createNativeQuery(&quot;SELECT ID, NAME FROM EMPLOYEE&quot;);\nList&lt;EmployeeTO&gt; list = jpaResultMapper.list(q, EmployeeTO.class);\n</code></pre>\n<p><a href=\"https://github.com/72services/qlrm\" rel=\"nofollow noreferrer\">https://github.com/72services/qlrm</a></p>\n"},{"tags":[],"owner":{"account_id":2052160,"reputation":2825,"user_id":1830916,"display_name":"locus2k"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1594995789,"creation_date":1594994410,"answer_id":62955591,"question_id":62955304,"body_markdown":"Id suggest creating a POJO that can be mapped to your table you&#39;re retrieving values from:\r\n\r\n    @Entity\r\n    @Table(name = &quot;MyTable&quot;)\r\n    @NamedQueries({\r\n      @NamedQuery(name = &quot;MyTable.findAll&quot;, query = &quot;SELECT m FROM MyTable m&quot;)})\r\n    public class MyTable implements Serializable {\r\n    \r\n      private static final long serialVersionUID = 1L;\r\n      @Id\r\n      @GeneratedValue(strategy = GenerationType.IDENTITY)\r\n      @Basic(optional = false)\r\n      @Column(name = &quot;id&quot;)\r\n      private Integer id;\r\n      \r\n      @Basic(optional = false)\r\n      @Column(name = &quot;name&quot;)\r\n      private String name;\r\n      \r\n      @Basic(optional = false)\r\n      @Column(name = &quot;display_name&quot;)\r\n      private String displayName;\r\n      \r\n    \r\n      public MyTable() {\r\n      }\r\n    \r\n      public MyTable(Integer id) {\r\n        this.id = id;\r\n      }\r\n    \r\n      public MyTable(Integer id, String name, String displayName) {\r\n        this.id = id;\r\n        this.name = name;\r\n        this.displayName = displayName;\r\n      }\r\n    \r\n      public Integer getId() {\r\n        return id;\r\n      }\r\n    \r\n      public void setId(Integer id) {\r\n        this.id = id;\r\n      }\r\n    \r\n      public String getName() {\r\n        return name;\r\n      }\r\n    \r\n      public void setName(String name) {\r\n        this.name = name;\r\n      }\r\n    \r\n      public String getDisplayName() {\r\n        return displayName;\r\n      }\r\n    \r\n      public void setDisplayName(String displayName) {\r\n        this.displayName = displayName;\r\n      }\r\n    \r\n    \r\n      @Override\r\n      public boolean equals(Object object) {\r\n        // TODO: Warning - this method won&#39;t work in the case the id fields are not set\r\n        if (!(object instanceof MyTable)) {\r\n          return false;\r\n        }\r\n        MyTable other = (MyTable ) object;\r\n        if ((this.id == null &amp;&amp; other.id != null) || (this.id != null &amp;&amp; !this.id.equals(other.id))) {\r\n          return false;\r\n        }\r\n        return true;\r\n      }\r\n    \r\n      @Override\r\n      public String toString() {\r\n        return &quot;MyTable[ id=&quot; + id + &quot; ]&quot;;\r\n      }\r\n      \r\n    }\r\n\r\nObviously fill in the fields as you need with the corresponding database datatype repersentation.\r\n\r\nNotice how i have `NamedQueries`  we can now take advantage of those named queries to do our fetches\r\n\r\n    TypedQuery&lt;MyTable&gt; query = entityManager.createNamedQuery(&quot;MyTable.findAll&quot;, MyTable.class);\r\n    List&lt;MyTable&gt; results = query.getResultList();\r\n\r\nthis will do all the casting and conversions for you. You can add all the named queries you want. \r\n\r\nhttps://www.objectdb.com/java/jpa/query/named\r\n\r\n**UPDATE**\r\n\r\nIf you need to dynamically create a query you can do the following:\r\n\r\n    String query = &quot;SELECT m FROM MyTable m Where m.id =:id and m.name=:name&quot;; \r\n    ///modify the query as needed based off of other conditions)\r\n    \r\n    TypedQuery&lt;MyTable &gt; query = em.createQuery(query, MyTable .class);\r\n    query.setParameter(&quot;id&quot;, id);\r\n    query.setParameter(&quot;name&quot;, name);\r\n\r\n    List&lt;MyTable&gt; results = query.getResultList();\r\n\r\nhttps://www.objectdb.com/java/jpa/query/api","title":"How to convert Array of Object to Custom Class Object (that is array to object)?","body":"<p>Id suggest creating a POJO that can be mapped to your table you're retrieving values from:</p>\n<pre><code>@Entity\n@Table(name = &quot;MyTable&quot;)\n@NamedQueries({\n  @NamedQuery(name = &quot;MyTable.findAll&quot;, query = &quot;SELECT m FROM MyTable m&quot;)})\npublic class MyTable implements Serializable {\n\n  private static final long serialVersionUID = 1L;\n  @Id\n  @GeneratedValue(strategy = GenerationType.IDENTITY)\n  @Basic(optional = false)\n  @Column(name = &quot;id&quot;)\n  private Integer id;\n  \n  @Basic(optional = false)\n  @Column(name = &quot;name&quot;)\n  private String name;\n  \n  @Basic(optional = false)\n  @Column(name = &quot;display_name&quot;)\n  private String displayName;\n  \n\n  public MyTable() {\n  }\n\n  public MyTable(Integer id) {\n    this.id = id;\n  }\n\n  public MyTable(Integer id, String name, String displayName) {\n    this.id = id;\n    this.name = name;\n    this.displayName = displayName;\n  }\n\n  public Integer getId() {\n    return id;\n  }\n\n  public void setId(Integer id) {\n    this.id = id;\n  }\n\n  public String getName() {\n    return name;\n  }\n\n  public void setName(String name) {\n    this.name = name;\n  }\n\n  public String getDisplayName() {\n    return displayName;\n  }\n\n  public void setDisplayName(String displayName) {\n    this.displayName = displayName;\n  }\n\n\n  @Override\n  public boolean equals(Object object) {\n    // TODO: Warning - this method won't work in the case the id fields are not set\n    if (!(object instanceof MyTable)) {\n      return false;\n    }\n    MyTable other = (MyTable ) object;\n    if ((this.id == null &amp;&amp; other.id != null) || (this.id != null &amp;&amp; !this.id.equals(other.id))) {\n      return false;\n    }\n    return true;\n  }\n\n  @Override\n  public String toString() {\n    return &quot;MyTable[ id=&quot; + id + &quot; ]&quot;;\n  }\n  \n}\n</code></pre>\n<p>Obviously fill in the fields as you need with the corresponding database datatype repersentation.</p>\n<p>Notice how i have <code>NamedQueries</code>  we can now take advantage of those named queries to do our fetches</p>\n<pre><code>TypedQuery&lt;MyTable&gt; query = entityManager.createNamedQuery(&quot;MyTable.findAll&quot;, MyTable.class);\nList&lt;MyTable&gt; results = query.getResultList();\n</code></pre>\n<p>this will do all the casting and conversions for you. You can add all the named queries you want.</p>\n<p><a href=\"https://www.objectdb.com/java/jpa/query/named\" rel=\"nofollow noreferrer\">https://www.objectdb.com/java/jpa/query/named</a></p>\n<p><strong>UPDATE</strong></p>\n<p>If you need to dynamically create a query you can do the following:</p>\n<pre><code>String query = &quot;SELECT m FROM MyTable m Where m.id =:id and m.name=:name&quot;; \n///modify the query as needed based off of other conditions)\n\nTypedQuery&lt;MyTable &gt; query = em.createQuery(query, MyTable .class);\nquery.setParameter(&quot;id&quot;, id);\nquery.setParameter(&quot;name&quot;, name);\n\nList&lt;MyTable&gt; results = query.getResultList();\n</code></pre>\n<p><a href=\"https://www.objectdb.com/java/jpa/query/api\" rel=\"nofollow noreferrer\">https://www.objectdb.com/java/jpa/query/api</a></p>\n"},{"tags":[],"owner":{"account_id":14365136,"reputation":890,"user_id":10376405,"display_name":"Paul"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1594995086,"creation_date":1594995086,"answer_id":62955803,"question_id":62955304,"body_markdown":"if you have set up a DatabaseConfig like this [tutorial][1] then you can simply create a class that you annotate with ```@Entity``` and ```@Table(name = &quot;yourDatabaseTableName&quot;)``` Don&#39;t forget to define: \r\n```\r\n    @Id\r\n    @Column(name = &quot;ID&quot;)\r\n    private Long id;\r\n```\r\nand annotate all your colums with ```@Column(name = &quot;databaseColumnName&quot;)```\r\nThen, create an interface that you annotate with ```@Repository``` which ```extends JpaRepository&lt;YourEntityClass, Long&gt;```where the Long-parameter is the type you&#39;ve given to the id-variable of your Entity. \r\n\r\nNow you can use simple JPA-methodqueries like ```findAll()``` or you can create your own JPQL-queries like:\r\n```\r\n@Query(&quot;SELECT e FROM Entity e &quot;\r\n        + &quot;WHERE e.id = :id&quot;)\r\nOptional&lt;Entity&gt; findById(@Param(&quot;id&quot;) Long id);\r\n```\r\nIt&#39;s even possible to use NativeQueries in this way: \r\n```\r\n@Query(value = &quot;SELECT e FROM Entity e &quot;\r\n        + &quot;WHERE e.id = :id&quot;,\r\n        nativeQuery = true)\r\nOptional&lt;Entity&gt; findById(@Param(&quot;id&quot;) Long id);\r\n```\r\n\r\n  [1]: https://www.baeldung.com/the-persistence-layer-with-spring-and-jpa","title":"How to convert Array of Object to Custom Class Object (that is array to object)?","body":"<p>if you have set up a DatabaseConfig like this <a href=\"https://www.baeldung.com/the-persistence-layer-with-spring-and-jpa\" rel=\"nofollow noreferrer\">tutorial</a> then you can simply create a class that you annotate with <code>@Entity</code> and <code>@Table(name = &quot;yourDatabaseTableName&quot;)</code> Don't forget to define:</p>\n<pre><code>    @Id\n    @Column(name = &quot;ID&quot;)\n    private Long id;\n</code></pre>\n<p>and annotate all your colums with <code>@Column(name = &quot;databaseColumnName&quot;)</code>\nThen, create an interface that you annotate with <code>@Repository</code> which <code>extends JpaRepository&lt;YourEntityClass, Long&gt;</code>where the Long-parameter is the type you've given to the id-variable of your Entity.</p>\n<p>Now you can use simple JPA-methodqueries like <code>findAll()</code> or you can create your own JPQL-queries like:</p>\n<pre><code>@Query(&quot;SELECT e FROM Entity e &quot;\n        + &quot;WHERE e.id = :id&quot;)\nOptional&lt;Entity&gt; findById(@Param(&quot;id&quot;) Long id);\n</code></pre>\n<p>It's even possible to use NativeQueries in this way:</p>\n<pre><code>@Query(value = &quot;SELECT e FROM Entity e &quot;\n        + &quot;WHERE e.id = :id&quot;,\n        nativeQuery = true)\nOptional&lt;Entity&gt; findById(@Param(&quot;id&quot;) Long id);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":16523562,"reputation":9,"user_id":11939001,"display_name":"Harsh Sharma"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691687002,"creation_date":1691687002,"answer_id":76877895,"question_id":62955304,"body_markdown":"You can convert **Object[] array** results into Map of instances which will be key value pairs as columns and their subsequent values, by using the custom algorithm I built. And later on you can use the map instance to construct your custom bean via constructor or setters.\r\n\r\n    /**\r\n     * method to convert and transform an array of objects into a list of map instances, consisting columns as keys\r\n     * and their subsequent values\r\n     *\r\n     * @param arrays - a list of object type array instances, representing the values retrieved from a SQL query\r\n     * @param query  - a string value representing the SQL query which has retrieved the Object array values\r\n     *\r\n     *               &lt;p&gt; Note : The String Query must satisfy the below statements&lt;/p&gt;\r\n     *               &lt;p&gt; 1. Query must not contain any of \\n or \\t in it.&lt;/p&gt;\r\n     *               &lt;p&gt; 2. Query must not contain asterick, instead should contain all the concrete column names.&lt;/p&gt;\r\n     *               &lt;p&gt; 3. All the FROM keyword inside the query should be either fully capitalised or fully non capitalised i.e. FROM or from. &lt;/p&gt;\r\n     * @return\r\n     * @author - Harsh Sharma\r\n     */\r\n    public List&lt;Map&lt;String, Object&gt;&gt; convertQueryResultIntoMap(List&lt;Object[]&gt; arrays, String query) {\r\n        // base cases\r\n        if (CollectionUtils.isEmpty(arrays) || query == null || query.equals(&quot;&quot;)) return null;\r\n        int lastFROMClauseIndex = -1;\r\n        char[] arr = query.toCharArray();\r\n        Stack&lt;Character&gt; stack = new Stack&lt;&gt;();\r\n        for (int i = arr.length - 1; i &gt; -1; i--) {\r\n            if (i - 3 &gt; -1 &amp;&amp; ((arr[i] == &#39;M&#39; &amp;&amp; arr[i - 1] == &#39;O&#39; &amp;&amp; arr[i - 2] == &#39;R&#39; &amp;&amp; arr[i - 3] == &#39;F&#39;)\r\n                    || (arr[i] == &#39;m&#39; &amp;&amp; arr[i - 1] == &#39;o&#39; &amp;&amp; arr[i - 2] == &#39;r&#39; &amp;&amp; arr[i - 3] == &#39;f&#39;))) {\r\n                lastFROMClauseIndex = i - 3;\r\n                if (stack.isEmpty()) break;\r\n            } else {\r\n                if (arr[i] == &#39;)&#39;) stack.push(arr[i]);\r\n                else if (arr[i] == &#39;(&#39;) stack.pop();\r\n            }\r\n        }\r\n\r\n        List&lt;String&gt; columnNames = new ArrayList&lt;&gt;();\r\n        List&lt;Map&lt;String, Object&gt;&gt; mapList = new ArrayList&lt;&gt;();\r\n        for (int i = 0; i &lt; arr.length; i++) {\r\n            StringBuilder columnName = new StringBuilder(&quot;&quot;);\r\n            if (i &lt; arr.length - 1 &amp;&amp; arr[i] == &#39;,&#39;) {\r\n                int anyAlphabetEncounteredIndex = -1;\r\n                int lastAlphabetEncounteredIndex = -1;\r\n                int j = i - 1;\r\n                for (; j &gt; -1; j--) {\r\n                    if (anyAlphabetEncounteredIndex != -1 &amp;&amp; (arr[j] == &#39; &#39; || arr[j] == &#39;.&#39;)) break;\r\n                    if (arr[j] != &#39; &#39;) {\r\n                        if (lastAlphabetEncounteredIndex == -1) lastAlphabetEncounteredIndex = j;\r\n                        anyAlphabetEncounteredIndex = j;\r\n                    }\r\n                }\r\n                for (; anyAlphabetEncounteredIndex &lt;= lastAlphabetEncounteredIndex; anyAlphabetEncounteredIndex++) {\r\n                    columnName.append(arr[anyAlphabetEncounteredIndex]);\r\n                }\r\n                if (!columnName.toString().equals(&quot;&quot;)) {\r\n                    columnNames.add(columnName.toString());\r\n                }\r\n            } else if (i == lastFROMClauseIndex) {\r\n                int anyAlphabetEncounteredIndex = -1;\r\n                int lastAlphabetEncounteredIndex = -1;\r\n                int j = i - 1;\r\n                for (; j &gt; -1; j--) {\r\n                    if (anyAlphabetEncounteredIndex != -1 &amp;&amp; (arr[j] == &#39; &#39; || arr[j] == &#39;.&#39;)) break;\r\n                    if (arr[j] != &#39; &#39; &amp;&amp; arr[j] != &#39;.&#39;) {\r\n                        if (lastAlphabetEncounteredIndex == -1) lastAlphabetEncounteredIndex = j;\r\n                        anyAlphabetEncounteredIndex = j;\r\n                    }\r\n                }\r\n                for (; anyAlphabetEncounteredIndex &lt;= lastAlphabetEncounteredIndex; anyAlphabetEncounteredIndex++) {\r\n                    columnName.append(arr[anyAlphabetEncounteredIndex]);\r\n                }\r\n                if (!columnName.toString().equals(&quot;&quot;)) {\r\n                    columnNames.add(columnName.toString());\r\n                }\r\n                break;\r\n            }\r\n        }\r\n\r\n        if (!CollectionUtils.isEmpty(arrays) &amp;&amp; !CollectionUtils.isEmpty(columnNames)) {\r\n            int columnSize = columnNames.size();\r\n            for (Object[] dbData : arrays) {\r\n                Map&lt;String, Object&gt; map = new LinkedHashMap&lt;&gt;();\r\n                for (int i = 0; i &lt; columnSize; i++) {\r\n                    map.put(columnNames.get(i), dbData[i]);\r\n                }\r\n                mapList.add(map);\r\n            }\r\n        }\r\n        return mapList;\r\n    }","title":"How to convert Array of Object to Custom Class Object (that is array to object)?","body":"<p>You can convert <strong>Object[] array</strong> results into Map of instances which will be key value pairs as columns and their subsequent values, by using the custom algorithm I built. And later on you can use the map instance to construct your custom bean via constructor or setters.</p>\n<pre><code>/**\n * method to convert and transform an array of objects into a list of map instances, consisting columns as keys\n * and their subsequent values\n *\n * @param arrays - a list of object type array instances, representing the values retrieved from a SQL query\n * @param query  - a string value representing the SQL query which has retrieved the Object array values\n *\n *               &lt;p&gt; Note : The String Query must satisfy the below statements&lt;/p&gt;\n *               &lt;p&gt; 1. Query must not contain any of \\n or \\t in it.&lt;/p&gt;\n *               &lt;p&gt; 2. Query must not contain asterick, instead should contain all the concrete column names.&lt;/p&gt;\n *               &lt;p&gt; 3. All the FROM keyword inside the query should be either fully capitalised or fully non capitalised i.e. FROM or from. &lt;/p&gt;\n * @return\n * @author - Harsh Sharma\n */\npublic List&lt;Map&lt;String, Object&gt;&gt; convertQueryResultIntoMap(List&lt;Object[]&gt; arrays, String query) {\n    // base cases\n    if (CollectionUtils.isEmpty(arrays) || query == null || query.equals(&quot;&quot;)) return null;\n    int lastFROMClauseIndex = -1;\n    char[] arr = query.toCharArray();\n    Stack&lt;Character&gt; stack = new Stack&lt;&gt;();\n    for (int i = arr.length - 1; i &gt; -1; i--) {\n        if (i - 3 &gt; -1 &amp;&amp; ((arr[i] == 'M' &amp;&amp; arr[i - 1] == 'O' &amp;&amp; arr[i - 2] == 'R' &amp;&amp; arr[i - 3] == 'F')\n                || (arr[i] == 'm' &amp;&amp; arr[i - 1] == 'o' &amp;&amp; arr[i - 2] == 'r' &amp;&amp; arr[i - 3] == 'f'))) {\n            lastFROMClauseIndex = i - 3;\n            if (stack.isEmpty()) break;\n        } else {\n            if (arr[i] == ')') stack.push(arr[i]);\n            else if (arr[i] == '(') stack.pop();\n        }\n    }\n\n    List&lt;String&gt; columnNames = new ArrayList&lt;&gt;();\n    List&lt;Map&lt;String, Object&gt;&gt; mapList = new ArrayList&lt;&gt;();\n    for (int i = 0; i &lt; arr.length; i++) {\n        StringBuilder columnName = new StringBuilder(&quot;&quot;);\n        if (i &lt; arr.length - 1 &amp;&amp; arr[i] == ',') {\n            int anyAlphabetEncounteredIndex = -1;\n            int lastAlphabetEncounteredIndex = -1;\n            int j = i - 1;\n            for (; j &gt; -1; j--) {\n                if (anyAlphabetEncounteredIndex != -1 &amp;&amp; (arr[j] == ' ' || arr[j] == '.')) break;\n                if (arr[j] != ' ') {\n                    if (lastAlphabetEncounteredIndex == -1) lastAlphabetEncounteredIndex = j;\n                    anyAlphabetEncounteredIndex = j;\n                }\n            }\n            for (; anyAlphabetEncounteredIndex &lt;= lastAlphabetEncounteredIndex; anyAlphabetEncounteredIndex++) {\n                columnName.append(arr[anyAlphabetEncounteredIndex]);\n            }\n            if (!columnName.toString().equals(&quot;&quot;)) {\n                columnNames.add(columnName.toString());\n            }\n        } else if (i == lastFROMClauseIndex) {\n            int anyAlphabetEncounteredIndex = -1;\n            int lastAlphabetEncounteredIndex = -1;\n            int j = i - 1;\n            for (; j &gt; -1; j--) {\n                if (anyAlphabetEncounteredIndex != -1 &amp;&amp; (arr[j] == ' ' || arr[j] == '.')) break;\n                if (arr[j] != ' ' &amp;&amp; arr[j] != '.') {\n                    if (lastAlphabetEncounteredIndex == -1) lastAlphabetEncounteredIndex = j;\n                    anyAlphabetEncounteredIndex = j;\n                }\n            }\n            for (; anyAlphabetEncounteredIndex &lt;= lastAlphabetEncounteredIndex; anyAlphabetEncounteredIndex++) {\n                columnName.append(arr[anyAlphabetEncounteredIndex]);\n            }\n            if (!columnName.toString().equals(&quot;&quot;)) {\n                columnNames.add(columnName.toString());\n            }\n            break;\n        }\n    }\n\n    if (!CollectionUtils.isEmpty(arrays) &amp;&amp; !CollectionUtils.isEmpty(columnNames)) {\n        int columnSize = columnNames.size();\n        for (Object[] dbData : arrays) {\n            Map&lt;String, Object&gt; map = new LinkedHashMap&lt;&gt;();\n            for (int i = 0; i &lt; columnSize; i++) {\n                map.put(columnNames.get(i), dbData[i]);\n            }\n            mapList.add(map);\n        }\n    }\n    return mapList;\n}\n</code></pre>\n"}],"owner":{"account_id":19052452,"reputation":29,"user_id":13910319,"display_name":"raj dhanani"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2725,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":62955432,"answer_count":4,"score":0,"last_activity_date":1691687002,"creation_date":1594993502,"question_id":62955304,"body_markdown":"I am working on a spring boot project and using JPA for querying the database with Entity manager.\r\n\r\ni.e. \r\n\r\n```\r\nQuery query = entityManager.createNativeQuery(&quot;SELECT * FROM TABLE_NAME WHERE ID = 1&quot;); // SUPPOSE\r\n\r\nList&lt;Object[]&gt; result = (List&lt;Object[]&gt;) query.getResultList();\r\n```\r\nnow after this what I want to achieve here is creating an Object of that corresponding result.\r\n\r\n```\r\ni.e.  ResultObject obj = (ResultObject) result.get(0); \r\n// here ResultObject is user defined.\r\n```\r\nbut this type of casting is not possible directly.\r\n\r\nso what I am currently doing is:\r\n```\r\nResultObject obj = new ResultObject(); \r\nobj.setArribute1((String) obj[0]);\r\nobj.setArribute2((Integer) obj[1]);\r\n...\r\n```\r\n**and on average i will be having 15 attributes per object. so its really tiresome...**\r\n\r\nI have tried using:\r\n```\r\nList&lt;ResultObject&gt; obj = (List&lt;ResultObject&gt;)query.getResultList();\r\n```\r\n**but doesn&#39;t work.**","title":"How to convert Array of Object to Custom Class Object (that is array to object)?","body":"<p>I am working on a spring boot project and using JPA for querying the database with Entity manager.</p>\n<p>i.e.</p>\n<pre><code>Query query = entityManager.createNativeQuery(&quot;SELECT * FROM TABLE_NAME WHERE ID = 1&quot;); // SUPPOSE\n\nList&lt;Object[]&gt; result = (List&lt;Object[]&gt;) query.getResultList();\n</code></pre>\n<p>now after this what I want to achieve here is creating an Object of that corresponding result.</p>\n<pre><code>i.e.  ResultObject obj = (ResultObject) result.get(0); \n// here ResultObject is user defined.\n</code></pre>\n<p>but this type of casting is not possible directly.</p>\n<p>so what I am currently doing is:</p>\n<pre><code>ResultObject obj = new ResultObject(); \nobj.setArribute1((String) obj[0]);\nobj.setArribute2((Integer) obj[1]);\n...\n</code></pre>\n<p><strong>and on average i will be having 15 attributes per object. so its really tiresome...</strong></p>\n<p>I have tried using:</p>\n<pre><code>List&lt;ResultObject&gt; obj = (List&lt;ResultObject&gt;)query.getResultList();\n</code></pre>\n<p><strong>but doesn't work.</strong></p>\n"},{"tags":["java","glassfish"],"answers":[{"tags":[],"owner":{"account_id":411863,"reputation":7400,"user_id":784594,"display_name":"OndroMih"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1688167051,"creation_date":1688167051,"answer_id":76592666,"question_id":76548036,"body_markdown":"Try replacing all those “javax” with “jakarta” in lines that start with “import”. For example:\r\n\r\n    import jakarta.servlet.ServletException;\r\n\r\nThe latest GlassFish changed the packages to be imported to start with jakarta.","title":"Setup Class Path Glassfish Server","body":"<p>Try replacing all those “javax” with “jakarta” in lines that start with “import”. For example:</p>\n<pre><code>import jakarta.servlet.ServletException;\n</code></pre>\n<p>The latest GlassFish changed the packages to be imported to start with jakarta.</p>\n"},{"tags":[],"owner":{"account_id":28682652,"reputation":47,"user_id":21963506,"display_name":"Farhood Naqizadeh"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691686931,"creation_date":1691686931,"answer_id":76877883,"question_id":76548036,"body_markdown":"Add this to pom file or if your not convert your project to maven do it and than add this\r\n```\r\n     &lt;properties&gt;\r\n        &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\r\n        &lt;maven.compiler.target&gt;17&lt;/maven.compiler.target&gt;\r\n        &lt;maven.compiler.source&gt;17&lt;/maven.compiler.source&gt;\r\n    &lt;/properties&gt;\r\n\r\n    &lt;dependencies&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;jakarta.platform&lt;/groupId&gt;\r\n            &lt;artifactId&gt;jakarta.jakartaee-web-api&lt;/artifactId&gt;\r\n            &lt;version&gt;10.0.0&lt;/version&gt;\r\n            &lt;scope&gt;provided&lt;/scope&gt;\r\n        &lt;/dependency&gt;\r\n    &lt;/dependencies&gt;\r\n```\r\nor if you don&#39;t want to use jump to google and get jar file for maven jakarta.platform add to project build path.\r\nafter that you can use jakarta package that replaced with javax!\r\n","title":"Setup Class Path Glassfish Server","body":"<p>Add this to pom file or if your not convert your project to maven do it and than add this</p>\n<pre><code>     &lt;properties&gt;\n        &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\n        &lt;maven.compiler.target&gt;17&lt;/maven.compiler.target&gt;\n        &lt;maven.compiler.source&gt;17&lt;/maven.compiler.source&gt;\n    &lt;/properties&gt;\n\n    &lt;dependencies&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;jakarta.platform&lt;/groupId&gt;\n            &lt;artifactId&gt;jakarta.jakartaee-web-api&lt;/artifactId&gt;\n            &lt;version&gt;10.0.0&lt;/version&gt;\n            &lt;scope&gt;provided&lt;/scope&gt;\n        &lt;/dependency&gt;\n    &lt;/dependencies&gt;\n</code></pre>\n<p>or if you don't want to use jump to google and get jar file for maven jakarta.platform add to project build path.\nafter that you can use jakarta package that replaced with javax!</p>\n"}],"owner":{"account_id":1109305,"reputation":667,"user_id":1100074,"accept_rate":78,"display_name":"Wannabe Coder"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":55,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1691686931,"creation_date":1687641721,"question_id":76548036,"body_markdown":"I&#39;m trying to get a school assignment to run. I&#39;ve never developed in Java and was given a java web application that I need to run and evaluate and then write test cases. I cannot even get the application to run. I started by installing Glassfish server, per instructions but cannot get any further from here. I&#39;ve included a screen shot of some of the errors. It seems to be related since those are web libraries. I don&#39;t know what libraries I&#39;m missing. \r\nI cannot figure out how to set up a server classpath and did not see anything that seemed to make sense...or I&#39;m searching for the wrong terms to find answer. Can someone please help?\r\n\r\n[![enter image description here][1]][1]\r\n\r\n**Error in output window when trying to build**\r\n\r\nThe Java EE server classpath is not correctly set up - server home directory is missing.\r\nEither open the project in the IDE and assign the server or setup the server classpath manually.\r\nFor example like this:\r\n   ant -Dj2ee.server.home=&lt;app_server_installation_directory&gt;\r\nBUILD FAILED (total time: 0 seconds)\r\n\r\n**My NetBeans version, including the output of installing Glassfish 7.**\r\n\r\nProduct Version: Apache NetBeans IDE 17\r\nJava: 11.0.16; Java HotSpot(TM) 64-Bit Server VM 11.0.16+11-LTS-199\r\nRuntime: Java(TM) SE Runtime Environment 11.0.16+11-LTS-199\r\n\r\n\r\nRunning the create-domain subcommand\r\nUsing port 4848 for Admin.\r\nUsing port 8080 for HTTP Instance.\r\nUsing default port 7676 for JMS.\r\nUsing default port 3700 for IIOP.\r\nUsing default port 8181 for HTTP_SSL.\r\nUsing default port 3820 for IIOP_SSL.\r\nUsing default port 3920 for IIOP_MUTUALAUTH.\r\nUsing default port 8686 for JMX_ADMIN.\r\nUsing default port 6666 for OSGI_SHELL.\r\nUsing default port 9009 for JAVA_DEBUGGER.\r\nUsing default port 4900 for Hazelcast DAS.\r\nUsing default port 5900 for Hazelcast Start.\r\nDistinguished Name of the self-signed X.509 Server Certificate is:\r\n[CN=MIkesLaptop.lan,OU=Payara,O=Payara Foundation,L=Great Malvern,ST=Worcestershire,C=UK]\r\nDistinguished Name of the self-signed X.509 Server Certificate is:\r\n[CN=MIkesLaptop.lan-instance,OU=Payara,O=Payara Foundation,L=Great Malvern,ST=Worcestershire,C=UK]\r\nDomain FlyDomain created.\r\nDomain FlyDomain admin port is 4848.\r\nDomain FlyDomain allows admin login as user &quot;admin&quot; with no password.\r\nCommand create-domain executed successfully.\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/51XRj.png","title":"Setup Class Path Glassfish Server","body":"<p>I'm trying to get a school assignment to run. I've never developed in Java and was given a java web application that I need to run and evaluate and then write test cases. I cannot even get the application to run. I started by installing Glassfish server, per instructions but cannot get any further from here. I've included a screen shot of some of the errors. It seems to be related since those are web libraries. I don't know what libraries I'm missing.\nI cannot figure out how to set up a server classpath and did not see anything that seemed to make sense...or I'm searching for the wrong terms to find answer. Can someone please help?</p>\n<p><a href=\"https://i.stack.imgur.com/51XRj.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/51XRj.png\" alt=\"enter image description here\" /></a></p>\n<p><strong>Error in output window when trying to build</strong></p>\n<p>The Java EE server classpath is not correctly set up - server home directory is missing.\nEither open the project in the IDE and assign the server or setup the server classpath manually.\nFor example like this:\nant -Dj2ee.server.home=&lt;app_server_installation_directory&gt;\nBUILD FAILED (total time: 0 seconds)</p>\n<p><strong>My NetBeans version, including the output of installing Glassfish 7.</strong></p>\n<p>Product Version: Apache NetBeans IDE 17\nJava: 11.0.16; Java HotSpot(TM) 64-Bit Server VM 11.0.16+11-LTS-199\nRuntime: Java(TM) SE Runtime Environment 11.0.16+11-LTS-199</p>\n<p>Running the create-domain subcommand\nUsing port 4848 for Admin.\nUsing port 8080 for HTTP Instance.\nUsing default port 7676 for JMS.\nUsing default port 3700 for IIOP.\nUsing default port 8181 for HTTP_SSL.\nUsing default port 3820 for IIOP_SSL.\nUsing default port 3920 for IIOP_MUTUALAUTH.\nUsing default port 8686 for JMX_ADMIN.\nUsing default port 6666 for OSGI_SHELL.\nUsing default port 9009 for JAVA_DEBUGGER.\nUsing default port 4900 for Hazelcast DAS.\nUsing default port 5900 for Hazelcast Start.\nDistinguished Name of the self-signed X.509 Server Certificate is:\n[CN=MIkesLaptop.lan,OU=Payara,O=Payara Foundation,L=Great Malvern,ST=Worcestershire,C=UK]\nDistinguished Name of the self-signed X.509 Server Certificate is:\n[CN=MIkesLaptop.lan-instance,OU=Payara,O=Payara Foundation,L=Great Malvern,ST=Worcestershire,C=UK]\nDomain FlyDomain created.\nDomain FlyDomain admin port is 4848.\nDomain FlyDomain allows admin login as user &quot;admin&quot; with no password.\nCommand create-domain executed successfully.</p>\n"},{"tags":["java","spring","oauth","spring-boot"],"comments":[{"owner":{"account_id":304234,"reputation":32207,"user_id":613628,"accept_rate":100,"display_name":"Stephane Nicoll"},"score":1,"creation_date":1463467296,"post_id":37264739,"comment_id":62063872,"body_markdown":"One thing you could do is define a bean of type `AuthoritiesExtractor` and do that check there (throwing an appropriate exception if the type of the email doesn&#39;t match","body":"One thing you could do is define a bean of type <code>AuthoritiesExtractor</code> and do that check there (throwing an appropriate exception if the type of the email doesn&#39;t match"}],"answers":[{"tags":[],"owner":{"account_id":295505,"reputation":1024,"user_id":599958,"accept_rate":43,"display_name":"Juan Carlos Gonz&#225;lez"},"down_vote_count":0,"up_vote_count":5,"is_accepted":true,"score":5,"last_activity_date":1551802466,"creation_date":1465304337,"answer_id":37680108,"question_id":37264739,"body_markdown":"According to St&#233;phane suggestion, I came to this [tutorial][1], and finally implemented this, which works for me with a Google+ profile:\r\n\r\n\r\n    @Configuration\r\n    @EnableOAuth2Sso\r\n    public class WebSecurityConfig extends WebSecurityConfigurerAdapter {\r\n    \r\n        private static final String GOOGLE_PLUS_DOMAIN_ATTRIBUTE = &quot;domain&quot;;\r\n        private static final String CSRF_COOKIE_NAME = &quot;XSRF-TOKEN&quot;;\r\n        private static final String CSRF_HEADER_NAME = &quot;X-XSRF-TOKEN&quot;;\r\n    \r\n        @Bean\r\n        public AuthoritiesExtractor authoritiesExtractor(\r\n                @Value(&quot;#{&#39;${security.allowed-domains}&#39;.split(&#39;,&#39;)}&quot;) final List&lt;String&gt; allowedDomains) {\r\n    \r\n            return new AuthoritiesExtractor() {\r\n                @Override\r\n                public List&lt;GrantedAuthority&gt; extractAuthorities(final Map&lt;String, Object&gt; map) {\r\n                    if (map != null &amp;&amp; map.containsKey(GOOGLE_PLUS_DOMAIN_ATTRIBUTE)) {\r\n                        final String domain = (String) map.get(GOOGLE_PLUS_DOMAIN_ATTRIBUTE);\r\n                        if (!allowedDomains.contains(domain)) {\r\n                            throw new BadCredentialsException(&quot;Not an allowed domain&quot;);\r\n                        }\r\n                        return AuthorityUtils.commaSeparatedStringToAuthorityList(&quot;ROLE_USER&quot;);\r\n                    }\r\n                    return null;\r\n                }\r\n            };\r\n        }\r\n    \r\n        @Override\r\n        protected void configure(final HttpSecurity http) throws Exception {\r\n            // @formatter:off\r\n            http.antMatcher(&quot;/**&quot;)\r\n            .authorizeRequests()\r\n            .antMatchers(&quot;/logout&quot;, &quot;/api/mappings/**&quot;, &quot;/public/**&quot;).permitAll()\r\n            .anyRequest().hasAuthority(&quot;ROLE_USER&quot;)\r\n            .and().logout().logoutUrl(&quot;/api/logout&quot;).logoutSuccessUrl(&quot;/logout&quot;)\r\n            .and().csrf().csrfTokenRepository(csrfTokenRepository()).ignoringAntMatchers(&quot;/api/mappings/**&quot;)\r\n            .and().addFilterAfter(csrfHeaderFilter(), CsrfFilter.class);\r\n            // @formatter:on\r\n        }\r\n    \r\n        private Filter csrfHeaderFilter() {\r\n            return new OncePerRequestFilter() {\r\n                @Override\r\n                protected void doFilterInternal(final HttpServletRequest request, final HttpServletResponse response,\r\n                        final FilterChain filterChain) throws ServletException, IOException {\r\n    \r\n                    final CsrfToken csrf = (CsrfToken) request.getAttribute(CsrfToken.class.getName());\r\n                    if (csrf != null) {\r\n                        Cookie cookie = WebUtils.getCookie(request, CSRF_COOKIE_NAME);\r\n                        final String token = csrf.getToken();\r\n                        if (cookie == null || token != null &amp;&amp; !token.equals(cookie.getValue())) {\r\n                            cookie = new Cookie(CSRF_COOKIE_NAME, token);\r\n                            cookie.setPath(&quot;/&quot;);\r\n                            response.addCookie(cookie);\r\n                        }\r\n                    }\r\n                    filterChain.doFilter(request, response);\r\n                }\r\n            };\r\n        }\r\n    \r\n        private CsrfTokenRepository csrfTokenRepository() {\r\n            final HttpSessionCsrfTokenRepository repository = new HttpSessionCsrfTokenRepository();\r\n            repository.setHeaderName(CSRF_HEADER_NAME);\r\n            return repository;\r\n        }\r\n    }\r\n\r\nMy application.yml file contains the following entries regarding oauth:\r\n\r\n    security:\r\n         oauth2:\r\n             client:\r\n                    access-token-uri: https://www.googleapis.com/oauth2/v3/token\r\n                    user-authorization-uri: https://accounts.google.com/o/oauth2/auth\r\n                    client-authentication-scheme: form\r\n                    scope: profile,email\r\n             resource:\r\n                    user-info-uri: https://www.googleapis.com/plus/v1/people/me\r\n                    prefer-token-info: false\r\n\r\nWhen working with a Google+ profile, the resource server response provided in the map, contains an entry for domain. I just compared this value with configured allowed domains.\r\n\r\nHope this helps.\r\n\r\n  [1]: https://spring.io/guides/tutorials/spring-boot-oauth2/\r\n\r\nUpdate: On March 7th 2019, Google is deprecating Google+ APIs. If you&#39;re like me, you&#39;ll have received an email from Google suggesting to update your software. In our case, the url https://www.googleapis.com/plus/v1/people/me, will be deprecated. So, I&#39;m posting here my updated configuration (build with Spring Boot 1.3.5).\r\n\r\n    security:\r\n     oauth2:\r\n         client:\r\n                clientId: *your client id from Google*\r\n                clientSecret: *your client secret from Google*                \r\n                accessTokenUri: https://www.googleapis.com/oauth2/v4/token\r\n                userAuthorizationUri: https://accounts.google.com/o/oauth2/v2/auth\r\n                clientAuthenticationScheme: form\r\n                scope: \r\n                  - email\r\n                  - profile                \r\n         resource:\r\n                userInfoUri: https://www.googleapis.com/oauth2/v3/userinfo\r\n                preferTokenInfo: false\r\n\r\n     # Comma-separated list of domains                \r\n     allowed-domains: *your allowed domains*\r\n\r\n\r\n\r\n\r\nPlease note that minor change must be done in you WebSecurityConfigurerAdapter as the attribute domain has changed its name. So you&#39;ll need to replace the line:\r\n\r\nprivate static final String GOOGLE_PLUS_DOMAIN_ATTRIBUTE = &quot;domain&quot;;\r\n\r\nwith\r\n\r\nprivate static final String HOSTED_DOMAIN_ATTRIBUTE = &quot;hd&quot;;\r\n\r\n","title":"How to restrict to a specific domain to login with Spring-Boot and OAuth2","body":"<p>According to Stéphane suggestion, I came to this <a href=\"https://spring.io/guides/tutorials/spring-boot-oauth2/\" rel=\"nofollow noreferrer\">tutorial</a>, and finally implemented this, which works for me with a Google+ profile:</p>\n\n<pre><code>@Configuration\n@EnableOAuth2Sso\npublic class WebSecurityConfig extends WebSecurityConfigurerAdapter {\n\n    private static final String GOOGLE_PLUS_DOMAIN_ATTRIBUTE = \"domain\";\n    private static final String CSRF_COOKIE_NAME = \"XSRF-TOKEN\";\n    private static final String CSRF_HEADER_NAME = \"X-XSRF-TOKEN\";\n\n    @Bean\n    public AuthoritiesExtractor authoritiesExtractor(\n            @Value(\"#{'${security.allowed-domains}'.split(',')}\") final List&lt;String&gt; allowedDomains) {\n\n        return new AuthoritiesExtractor() {\n            @Override\n            public List&lt;GrantedAuthority&gt; extractAuthorities(final Map&lt;String, Object&gt; map) {\n                if (map != null &amp;&amp; map.containsKey(GOOGLE_PLUS_DOMAIN_ATTRIBUTE)) {\n                    final String domain = (String) map.get(GOOGLE_PLUS_DOMAIN_ATTRIBUTE);\n                    if (!allowedDomains.contains(domain)) {\n                        throw new BadCredentialsException(\"Not an allowed domain\");\n                    }\n                    return AuthorityUtils.commaSeparatedStringToAuthorityList(\"ROLE_USER\");\n                }\n                return null;\n            }\n        };\n    }\n\n    @Override\n    protected void configure(final HttpSecurity http) throws Exception {\n        // @formatter:off\n        http.antMatcher(\"/**\")\n        .authorizeRequests()\n        .antMatchers(\"/logout\", \"/api/mappings/**\", \"/public/**\").permitAll()\n        .anyRequest().hasAuthority(\"ROLE_USER\")\n        .and().logout().logoutUrl(\"/api/logout\").logoutSuccessUrl(\"/logout\")\n        .and().csrf().csrfTokenRepository(csrfTokenRepository()).ignoringAntMatchers(\"/api/mappings/**\")\n        .and().addFilterAfter(csrfHeaderFilter(), CsrfFilter.class);\n        // @formatter:on\n    }\n\n    private Filter csrfHeaderFilter() {\n        return new OncePerRequestFilter() {\n            @Override\n            protected void doFilterInternal(final HttpServletRequest request, final HttpServletResponse response,\n                    final FilterChain filterChain) throws ServletException, IOException {\n\n                final CsrfToken csrf = (CsrfToken) request.getAttribute(CsrfToken.class.getName());\n                if (csrf != null) {\n                    Cookie cookie = WebUtils.getCookie(request, CSRF_COOKIE_NAME);\n                    final String token = csrf.getToken();\n                    if (cookie == null || token != null &amp;&amp; !token.equals(cookie.getValue())) {\n                        cookie = new Cookie(CSRF_COOKIE_NAME, token);\n                        cookie.setPath(\"/\");\n                        response.addCookie(cookie);\n                    }\n                }\n                filterChain.doFilter(request, response);\n            }\n        };\n    }\n\n    private CsrfTokenRepository csrfTokenRepository() {\n        final HttpSessionCsrfTokenRepository repository = new HttpSessionCsrfTokenRepository();\n        repository.setHeaderName(CSRF_HEADER_NAME);\n        return repository;\n    }\n}\n</code></pre>\n\n<p>My application.yml file contains the following entries regarding oauth:</p>\n\n<pre><code>security:\n     oauth2:\n         client:\n                access-token-uri: https://www.googleapis.com/oauth2/v3/token\n                user-authorization-uri: https://accounts.google.com/o/oauth2/auth\n                client-authentication-scheme: form\n                scope: profile,email\n         resource:\n                user-info-uri: https://www.googleapis.com/plus/v1/people/me\n                prefer-token-info: false\n</code></pre>\n\n<p>When working with a Google+ profile, the resource server response provided in the map, contains an entry for domain. I just compared this value with configured allowed domains.</p>\n\n<p>Hope this helps.</p>\n\n<p>Update: On March 7th 2019, Google is deprecating Google+ APIs. If you're like me, you'll have received an email from Google suggesting to update your software. In our case, the url <a href=\"https://www.googleapis.com/plus/v1/people/me\" rel=\"nofollow noreferrer\">https://www.googleapis.com/plus/v1/people/me</a>, will be deprecated. So, I'm posting here my updated configuration (build with Spring Boot 1.3.5).</p>\n\n<pre><code>security:\n oauth2:\n     client:\n            clientId: *your client id from Google*\n            clientSecret: *your client secret from Google*                \n            accessTokenUri: https://www.googleapis.com/oauth2/v4/token\n            userAuthorizationUri: https://accounts.google.com/o/oauth2/v2/auth\n            clientAuthenticationScheme: form\n            scope: \n              - email\n              - profile                \n     resource:\n            userInfoUri: https://www.googleapis.com/oauth2/v3/userinfo\n            preferTokenInfo: false\n\n # Comma-separated list of domains                \n allowed-domains: *your allowed domains*\n</code></pre>\n\n<p>Please note that minor change must be done in you WebSecurityConfigurerAdapter as the attribute domain has changed its name. So you'll need to replace the line:</p>\n\n<p>private static final String GOOGLE_PLUS_DOMAIN_ATTRIBUTE = \"domain\";</p>\n\n<p>with</p>\n\n<p>private static final String HOSTED_DOMAIN_ATTRIBUTE = \"hd\";</p>\n"},{"tags":[],"owner":{"account_id":1070157,"reputation":33,"user_id":1069641,"display_name":"neee"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1617184682,"creation_date":1617184682,"answer_id":66885508,"question_id":37264739,"body_markdown":"I found new solution! You should choose one: **non-reactive** or **reactive** case it&#39;s important don&#39;t forget:\r\n\r\n**non-reactive:**\r\n\r\n    @Bean\r\n    fun oauth2UserService(rest: WebClient): OAuth2UserService&lt;OAuth2UserRequest, OAuth2User&gt; {\r\n        val delegate = DefaultOAuth2UserService()\r\n        return OAuth2UserService&lt;OAuth2UserRequest, OAuth2User&gt; { request -&gt;\r\n            val user = delegate.loadUser(request)\r\n            val hd = user.getAttribute&lt;String&gt;(&quot;hd&quot;)\r\n            if (hd == &quot;your.domain.name&quot;)\r\n                user\r\n            else\r\n                throw OAuth2AuthenticationException(OAuth2Error(&quot;invalid_token&quot;, &quot;Not in the Team&quot;, &quot;&quot;))\r\n        }\r\n    }\r\n\r\n**reactive:**\r\n\r\n    @Bean\r\n    fun oauth2UserService(rest: WebClient): ReactiveOAuth2UserService&lt;OAuth2UserRequest, OAuth2User&gt; {\r\n        val delegate = DefaultOAuth2UserService()\r\n        return ReactiveOAuth2UserService&lt;OAuth2UserRequest, OAuth2User&gt; { request -&gt;\r\n            val user = delegate.loadUser(request)\r\n            val hd = user.getAttribute&lt;String&gt;(&quot;hd&quot;)\r\n            if (hd == &quot;your.domain.name&quot;)\r\n                Mono.just(user)\r\n            else\r\n                throw OAuth2AuthenticationException(OAuth2Error(&quot;invalid_token&quot;, &quot;Not in the Team&quot;, &quot;&quot;))\r\n        }\r\n    }","title":"How to restrict to a specific domain to login with Spring-Boot and OAuth2","body":"<p>I found new solution! You should choose one: <strong>non-reactive</strong> or <strong>reactive</strong> case it's important don't forget:</p>\n<p><strong>non-reactive:</strong></p>\n<pre><code>@Bean\nfun oauth2UserService(rest: WebClient): OAuth2UserService&lt;OAuth2UserRequest, OAuth2User&gt; {\n    val delegate = DefaultOAuth2UserService()\n    return OAuth2UserService&lt;OAuth2UserRequest, OAuth2User&gt; { request -&gt;\n        val user = delegate.loadUser(request)\n        val hd = user.getAttribute&lt;String&gt;(&quot;hd&quot;)\n        if (hd == &quot;your.domain.name&quot;)\n            user\n        else\n            throw OAuth2AuthenticationException(OAuth2Error(&quot;invalid_token&quot;, &quot;Not in the Team&quot;, &quot;&quot;))\n    }\n}\n</code></pre>\n<p><strong>reactive:</strong></p>\n<pre><code>@Bean\nfun oauth2UserService(rest: WebClient): ReactiveOAuth2UserService&lt;OAuth2UserRequest, OAuth2User&gt; {\n    val delegate = DefaultOAuth2UserService()\n    return ReactiveOAuth2UserService&lt;OAuth2UserRequest, OAuth2User&gt; { request -&gt;\n        val user = delegate.loadUser(request)\n        val hd = user.getAttribute&lt;String&gt;(&quot;hd&quot;)\n        if (hd == &quot;your.domain.name&quot;)\n            Mono.just(user)\n        else\n            throw OAuth2AuthenticationException(OAuth2Error(&quot;invalid_token&quot;, &quot;Not in the Team&quot;, &quot;&quot;))\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":29583,"reputation":7140,"user_id":80075,"accept_rate":100,"display_name":"Tony BenBrahim"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691686681,"creation_date":1691686681,"answer_id":76877850,"question_id":37264739,"body_markdown":"Just add `?hd=acme.com` to your authorization uri, and Google will restrict the domain for you, and users will only see one domain, not their personal accounts.","title":"How to restrict to a specific domain to login with Spring-Boot and OAuth2","body":"<p>Just add <code>?hd=acme.com</code> to your authorization uri, and Google will restrict the domain for you, and users will only see one domain, not their personal accounts.</p>\n"}],"owner":{"account_id":49695,"reputation":620,"user_id":148088,"accept_rate":50,"display_name":"Fernando M. Pinheiro"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":6594,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":37680108,"answer_count":3,"score":0,"last_activity_date":1691686681,"creation_date":1463441046,"question_id":37264739,"body_markdown":"I have successfully done a OAuth2 login with spring boot and Google, but I&#39;d like to restrict logins to a specific domain (we&#39;re using Google Apps for Work).\r\n\r\nI think that I should handle by extending class OAuth2ClientAuthenticationProcessingFilter (as specified [in this thread][1]), but I&#39;m not sure how to do that.\r\n\r\nBasically, I&#39;d like to use Google OAuth 2.0 as the identity provider, but only company users (@company.com) must be accepted.\r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/34855468/spring-boot-and-oauth2-social-login-unable-to-get-refreshtoken","title":"How to restrict to a specific domain to login with Spring-Boot and OAuth2","body":"<p>I have successfully done a OAuth2 login with spring boot and Google, but I'd like to restrict logins to a specific domain (we're using Google Apps for Work).</p>\n\n<p>I think that I should handle by extending class OAuth2ClientAuthenticationProcessingFilter (as specified <a href=\"https://stackoverflow.com/questions/34855468/spring-boot-and-oauth2-social-login-unable-to-get-refreshtoken\">in this thread</a>), but I'm not sure how to do that.</p>\n\n<p>Basically, I'd like to use Google OAuth 2.0 as the identity provider, but only company users (@company.com) must be accepted.</p>\n"},{"tags":["java","multipartform-data","mockserver"],"answers":[{"tags":[],"owner":{"account_id":3391382,"reputation":3687,"user_id":2846138,"display_name":"cyberbrain"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1661261933,"creation_date":1660243139,"answer_id":73325460,"question_id":73310417,"body_markdown":"Try this regex:\r\n``` lang-none\r\n^(--[\\w]+)$\\n(?:^Content-Disposition: form-data; name=\\&quot;\\w+?\\&quot;$\\n^Content-Type: text/plain;charset=UTF-8$\\n^Content-Length: \\d+? [\\w,]+ \\1(?:-- $|$\\n))+\r\n```\r\n\r\nIn your version I didn&#39;t see that you are escaping the double quotes `&quot;` to a `\\&quot;`, wondering if the code compiles at all.\r\nAlso the `[\\n.\\w\\W]` seems to be a bit too generic.\r\n\r\nThe above version is also generic, but in a different way:\r\n\r\n`(--[\\w]+)` - this is a group that expects the &lt;del&gt;border&lt;/del&gt; _boundary_ string. In the rest of the expression the match it is &quot;back referenced&quot; as `\\1`, this means only requests with the same border over the whole request are accepted.\r\n\r\nA longer part is following for one of the parts between the &lt;del&gt;borders&lt;/del&gt; _boundaries_. Please note that the expression does not care which parts are actually contained in the request. If you need that, let me know then I can update the expression to accept just the given parts.\r\n\r\nUpdate to state it clearly: You can put any string between the boundaries that you want, any headers etc. But you have to use regular expression syntax there when it comes to line breaks and other stuff that is interpreted special in a regex, like `\\`, `&quot;`, `.` and many others. Escape them!\r\n\r\nSo to sum it up: you put the regex for the boundary `(--[\\w]+)` only for the first occurence and put a back reference to that (`\\1`) everywhere after where you expect _the same_ boundary (the same characters, not just the same pattern). Inbetween you can place any stuff you want, just take care to escape it properly for a regex. In Java you can do this (just for the &quot;inner&quot; part) with `java.util.Pattern.quote(String)`\r\n\r\nUpdate 2:\r\nWhen your body does not contain line breaks but just separates the parts with spaces, you can try this modified regex:\r\n``` lang-none\r\n^(--[\\w]+)\\s+(?:Content-Disposition: form-data; name=\\&quot;\\w+?\\&quot;\\s+Content-Type: text/plain;charset=UTF-8\\s+Content-Length: \\d+? [\\w,]+ \\1(?:-- $|\\s+))+\r\n```","title":"How to Mock Post request with multi part form body","body":"<p>Try this regex:</p>\n<pre class=\"lang-none prettyprint-override\"><code>^(--[\\w]+)$\\n(?:^Content-Disposition: form-data; name=\\&quot;\\w+?\\&quot;$\\n^Content-Type: text/plain;charset=UTF-8$\\n^Content-Length: \\d+? [\\w,]+ \\1(?:-- $|$\\n))+\n</code></pre>\n<p>In your version I didn't see that you are escaping the double quotes <code>&quot;</code> to a <code>\\&quot;</code>, wondering if the code compiles at all.\nAlso the <code>[\\n.\\w\\W]</code> seems to be a bit too generic.</p>\n<p>The above version is also generic, but in a different way:</p>\n<p><code>(--[\\w]+)</code> - this is a group that expects the <del>border</del> <em>boundary</em> string. In the rest of the expression the match it is &quot;back referenced&quot; as <code>\\1</code>, this means only requests with the same border over the whole request are accepted.</p>\n<p>A longer part is following for one of the parts between the <del>borders</del> <em>boundaries</em>. Please note that the expression does not care which parts are actually contained in the request. If you need that, let me know then I can update the expression to accept just the given parts.</p>\n<p>Update to state it clearly: You can put any string between the boundaries that you want, any headers etc. But you have to use regular expression syntax there when it comes to line breaks and other stuff that is interpreted special in a regex, like <code>\\</code>, <code>&quot;</code>, <code>.</code> and many others. Escape them!</p>\n<p>So to sum it up: you put the regex for the boundary <code>(--[\\w]+)</code> only for the first occurence and put a back reference to that (<code>\\1</code>) everywhere after where you expect <em>the same</em> boundary (the same characters, not just the same pattern). Inbetween you can place any stuff you want, just take care to escape it properly for a regex. In Java you can do this (just for the &quot;inner&quot; part) with <code>java.util.Pattern.quote(String)</code></p>\n<p>Update 2:\nWhen your body does not contain line breaks but just separates the parts with spaces, you can try this modified regex:</p>\n<pre class=\"lang-none prettyprint-override\"><code>^(--[\\w]+)\\s+(?:Content-Disposition: form-data; name=\\&quot;\\w+?\\&quot;\\s+Content-Type: text/plain;charset=UTF-8\\s+Content-Length: \\d+? [\\w,]+ \\1(?:-- $|\\s+))+\n</code></pre>\n"},{"tags":[],"owner":{"account_id":26031204,"reputation":1,"user_id":19737403,"display_name":"Parimala Kolisetty"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1660885466,"creation_date":1660841709,"answer_id":73406835,"question_id":73310417,"body_markdown":"@cyberbrain. Thanks for looking into this.\r\n\r\nI am trying to mock  post request with multipart - form data , where the post body looks like i have shown below (where the boundary value changes on every run) . so , i am trying to use regex only for boundary part .Any pointers will be really helpful.\r\n\r\nI tried the regex you have suggested but it didnt work .\r\nActual Request - \r\n\r\n    {\r\n    &quot;method&quot;:&quot;POST&quot;\r\n    &quot;path&quot;:&quot;/abc/xyz&quot;\r\n    &quot;headers&quot;:{...}\r\n    &quot;keepAlive&quot;:true\r\n    &quot;secure&quot;:false\r\n    &quot;body&quot;:&quot;--y_My4VSoa71UaoRG6KF4DM_MZAP7AKDz54 Content-Disposition: form-data; name=&quot;dataset&quot; Content-Type: text/plain;charset=UTF-8 Content-Length: 14 drug --y_My4VSoa71UaoRG6KF4DM_MZAP7AKDz54 Content-Disposition: form-data; name=&quot;searchQuery&quot; Content-Type: text/plain;charset=UTF-8 Content-Length: 6 cancer --y_My4VSoa71UaoRG6KF4DM_MZAP7AKDz54 Content-Disposition: form-data; name=&quot;queryLanguage&quot; Content-Type: text/plain;charset=UTF-8 Content-Length: 4 ssql --y_My4VSoa71UaoRG6KF4DM_MZAP7AKDz54 Content-Disposition: form-data; name=&quot;returnFields&quot; Content-Type: text/plain;charset=UTF-8 Content-Length: 7 Id,Name --y_My4VSoa71UaoRG6KF4DM_MZAP7AKDz54 Content-Disposition: form-data; name=&quot;returnLimit&quot; Content-Type: text/plain;charset=UTF-8 Content-Length: 1 1 --y_My4VSoa71UaoRG6KF4DM_MZAP7AKDz54 Content-Disposition: form-data; name=&quot;offset&quot; Content-Type: text/plain;charset=UTF-8 Content-Length: 1 0 --y_My4VSoa71UaoRG6KF4DM_MZAP7AKDz54-- &quot;\r\n    }\r\n**mock request i gave like this** - \r\n\r\n    mockServerClient\r\n    .when(\r\n          request()\r\n            .withMethod(&quot;POST&quot;)\r\n    //      .withHeaders(\r\n    //         new Header(&quot;Content-Type&quot;, &quot;multipart/form-data&quot;))\r\n            .withPath(&quot;/abc/xyz&quot;)\r\n            .withBody(regex(&quot;(--[\\\\w]+) Content-Disposition: form-data; name=\\&quot;dataset\\&quot; Content-Type: text/plain;charset=UTF-8 Content-Length: 14 drug (--[\\\\w]+) Content-Disposition: form-data; name=\\&quot;searchQuery\\&quot; Content-Type: text/plain;charset=UTF-8 Content-Length: 6 cancer (--[\\\\w]+) Content-Disposition: form-data; name=\\&quot;queryLanguage\\&quot; Content-Type: text/plain;charset=UTF-8 Content-Length: 4 ssql (--[\\\\w]+) Content-Disposition: form-data; name=\\&quot;returnFields\\&quot; Content-Type: text/plain;charset=UTF-8 Content-Length: 7 Id,Name (--[\\\\w]+) Content-Disposition: form-data; name=\\&quot;returnLimit\\&quot; Content-Type: text/plain;charset=UTF-8 Content-Length: 1 1 (--[\\\\w]+) Content-Disposition: form-data; name=\\&quot;offset\\&quot; Content-Type: text/plain;charset=UTF-8 Content-Length: 1 0 (--[\\\\w]+)-- &quot;))\r\n    )\r\n\r\n**and the  expectation set by Mock Server as-  ** -\r\n\r\n    &quot;httpRequest&quot;:{\r\n    &quot;method&quot;:&quot;POST&quot;\r\n    &quot;path&quot;:&quot;/abc/xyz&quot;\r\n    &quot;body&quot;:{\r\n    &quot;type&quot;:&quot;REGEX&quot;\r\n    &quot;regex&quot;:&quot;(--[\\w]+) Content-Disposition: form-data; name=&quot;dataset&quot; Content-Type: text/plain;charset=UTF-8 Content-Length: 14 drug (--[\\w]+) Content-Disposition: form-data; name=&quot;searchQuery&quot; Content-Type: text/plain;charset=UTF-8 Content-Length: 6 cancer (--[\\w]+) Content-Disposition: form-data; name=&quot;queryLanguage&quot; Content-Type: text/plain;charset=UTF-8 Content-Length: 4 ssql (--[\\w]+) Content-Disposition: form-data; name=&quot;returnFields&quot; Content-Type: text/plain;charset=UTF-8 Content-Length: 7 Id,Name (--[\\w]+) Content-Disposition: form-data; name=&quot;returnLimit&quot; Content-Type: text/plain;charset=UTF-8 Content-Length: 1 1 (--[\\w]+) Content-Disposition: form-data; name=&quot;offset&quot; Content-Type: text/plain;charset=UTF-8 Content-Length: 1 0 (--[\\w]+)-- &quot;\r\n    }\r\n    }","title":"How to Mock Post request with multi part form body","body":"<p>@cyberbrain. Thanks for looking into this.</p>\n<p>I am trying to mock  post request with multipart - form data , where the post body looks like i have shown below (where the boundary value changes on every run) . so , i am trying to use regex only for boundary part .Any pointers will be really helpful.</p>\n<p>I tried the regex you have suggested but it didnt work .\nActual Request -</p>\n<pre><code>{\n&quot;method&quot;:&quot;POST&quot;\n&quot;path&quot;:&quot;/abc/xyz&quot;\n&quot;headers&quot;:{...}\n&quot;keepAlive&quot;:true\n&quot;secure&quot;:false\n&quot;body&quot;:&quot;--y_My4VSoa71UaoRG6KF4DM_MZAP7AKDz54 Content-Disposition: form-data; name=&quot;dataset&quot; Content-Type: text/plain;charset=UTF-8 Content-Length: 14 drug --y_My4VSoa71UaoRG6KF4DM_MZAP7AKDz54 Content-Disposition: form-data; name=&quot;searchQuery&quot; Content-Type: text/plain;charset=UTF-8 Content-Length: 6 cancer --y_My4VSoa71UaoRG6KF4DM_MZAP7AKDz54 Content-Disposition: form-data; name=&quot;queryLanguage&quot; Content-Type: text/plain;charset=UTF-8 Content-Length: 4 ssql --y_My4VSoa71UaoRG6KF4DM_MZAP7AKDz54 Content-Disposition: form-data; name=&quot;returnFields&quot; Content-Type: text/plain;charset=UTF-8 Content-Length: 7 Id,Name --y_My4VSoa71UaoRG6KF4DM_MZAP7AKDz54 Content-Disposition: form-data; name=&quot;returnLimit&quot; Content-Type: text/plain;charset=UTF-8 Content-Length: 1 1 --y_My4VSoa71UaoRG6KF4DM_MZAP7AKDz54 Content-Disposition: form-data; name=&quot;offset&quot; Content-Type: text/plain;charset=UTF-8 Content-Length: 1 0 --y_My4VSoa71UaoRG6KF4DM_MZAP7AKDz54-- &quot;\n}\n</code></pre>\n<p><strong>mock request i gave like this</strong> -</p>\n<pre><code>mockServerClient\n.when(\n      request()\n        .withMethod(&quot;POST&quot;)\n//      .withHeaders(\n//         new Header(&quot;Content-Type&quot;, &quot;multipart/form-data&quot;))\n        .withPath(&quot;/abc/xyz&quot;)\n        .withBody(regex(&quot;(--[\\\\w]+) Content-Disposition: form-data; name=\\&quot;dataset\\&quot; Content-Type: text/plain;charset=UTF-8 Content-Length: 14 drug (--[\\\\w]+) Content-Disposition: form-data; name=\\&quot;searchQuery\\&quot; Content-Type: text/plain;charset=UTF-8 Content-Length: 6 cancer (--[\\\\w]+) Content-Disposition: form-data; name=\\&quot;queryLanguage\\&quot; Content-Type: text/plain;charset=UTF-8 Content-Length: 4 ssql (--[\\\\w]+) Content-Disposition: form-data; name=\\&quot;returnFields\\&quot; Content-Type: text/plain;charset=UTF-8 Content-Length: 7 Id,Name (--[\\\\w]+) Content-Disposition: form-data; name=\\&quot;returnLimit\\&quot; Content-Type: text/plain;charset=UTF-8 Content-Length: 1 1 (--[\\\\w]+) Content-Disposition: form-data; name=\\&quot;offset\\&quot; Content-Type: text/plain;charset=UTF-8 Content-Length: 1 0 (--[\\\\w]+)-- &quot;))\n)\n</code></pre>\n<p>**and the  expectation set by Mock Server as-  ** -</p>\n<pre><code>&quot;httpRequest&quot;:{\n&quot;method&quot;:&quot;POST&quot;\n&quot;path&quot;:&quot;/abc/xyz&quot;\n&quot;body&quot;:{\n&quot;type&quot;:&quot;REGEX&quot;\n&quot;regex&quot;:&quot;(--[\\w]+) Content-Disposition: form-data; name=&quot;dataset&quot; Content-Type: text/plain;charset=UTF-8 Content-Length: 14 drug (--[\\w]+) Content-Disposition: form-data; name=&quot;searchQuery&quot; Content-Type: text/plain;charset=UTF-8 Content-Length: 6 cancer (--[\\w]+) Content-Disposition: form-data; name=&quot;queryLanguage&quot; Content-Type: text/plain;charset=UTF-8 Content-Length: 4 ssql (--[\\w]+) Content-Disposition: form-data; name=&quot;returnFields&quot; Content-Type: text/plain;charset=UTF-8 Content-Length: 7 Id,Name (--[\\w]+) Content-Disposition: form-data; name=&quot;returnLimit&quot; Content-Type: text/plain;charset=UTF-8 Content-Length: 1 1 (--[\\w]+) Content-Disposition: form-data; name=&quot;offset&quot; Content-Type: text/plain;charset=UTF-8 Content-Length: 1 0 (--[\\w]+)-- &quot;\n}\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":13975041,"reputation":1,"user_id":10126961,"display_name":"Artem Sobolenko"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691686635,"creation_date":1691686635,"answer_id":76877845,"question_id":73310417,"body_markdown":"Try this!\r\n\r\n    String regex = &quot;--[\\\\w-]+\\\\sContent-Disposition: form-data; name=\\&quot;[^\\&quot;]+\\&quot;\\\\sContent-Type: text/plain;charset=UTF-8\\\\sContent-Length: \\\\d+\\\\s[\\\\s\\\\S]*?--[\\\\w-]+--\\\\s&quot;;\r\n\r\n","title":"How to Mock Post request with multi part form body","body":"<p>Try this!</p>\n<pre><code>String regex = &quot;--[\\\\w-]+\\\\sContent-Disposition: form-data; name=\\&quot;[^\\&quot;]+\\&quot;\\\\sContent-Type: text/plain;charset=UTF-8\\\\sContent-Length: \\\\d+\\\\s[\\\\s\\\\S]*?--[\\\\w-]+--\\\\s&quot;;\n</code></pre>\n"}],"owner":{"account_id":26031204,"reputation":1,"user_id":19737403,"display_name":"Parimala Kolisetty"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":1206,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":3,"score":0,"last_activity_date":1691686635,"creation_date":1660152298,"question_id":73310417,"body_markdown":"I need to mock a post request with multipart form body as given below. I tried with a regex pattern for the unique string in the body --Z5KfGboCdJvPl4VsEq74AeK7PZN4EyN , but it didn&#39;t work. Can some one guide me on this?\r\n\r\n**BODY :**\r\n\r\n    &quot;body&quot;:&quot;--Z5KfGboCdJvPl4VsEq74AeK7PZN4EyN\r\n    Content-Disposition: form-data; name=&quot;dataset&quot;\r\n    Content-Type: text/plain;charset=UTF-8\r\n    Content-Length: 14 drugs --Z5KfGboCdJvPl4VsEq74AeK7PZN4EyN\r\n    Content-Disposition: form-data; name=&quot;searchQuery&quot;\r\n    Content-Type: text/plain;charset=UTF-8\r\n    Content-Length: 6 cancer --Z5KfGboCdJvPl4VsEq74AeK7PZN4EyN\r\n    Content-Disposition: form-data; name=&quot;queryLanguage&quot;\r\n    Content-Type: text/plain;charset=UTF-8\r\n    Content-Length: 4 ssql --Z5KfGboCdJvPl4VsEq74AeK7PZN4EyN\r\n    Content-Disposition: form-data; name=&quot;returnFields&quot;\r\n    Content-Type: text/plain;charset=UTF-8\r\n    Content-Length: 22 Id,name --Z5KfGboCdJvPl4VsEq74AeK7PZN4EyN\r\n    Content-Disposition: form-data; name=&quot;returnLimit&quot;\r\n    Content-Type: text/plain;charset=UTF-8\r\n    Content-Length: 1 1 --Z5KfGboCdJvPl4VsEq74AeK7PZN4EyN\r\n    Content-Disposition: form-data; name=&quot;offset&quot;\r\n    Content-Type: text/plain;charset=UTF-8\r\n    Content-Length: 1 0 --Z5KfGboCdJvPl4VsEq74AeK7PZN4EyN-- &quot;\r\n\r\n**I tried like -**\r\n\r\n    mockServerClient\r\n    .when(\r\n    request()\r\n    .withMethod(&quot;POST&quot;)\r\n    .withHeaders(\r\n    new Header(&quot;Content-Type&quot;, &quot;multipart/form-data&quot;))\r\n    .withPath(&quot;abc/xyz&quot;)\r\n    .withBody(**regex(&quot;[\\n.\\w\\W]***\r\n    Content-Disposition: form-data; name=&quot;dataset&quot;\r\n    Content-Type: text/plain;charset=UTF-8\r\n    Content-Length: 14 drugs [\\n.\\w\\W]*\r\n    Content-Disposition: form-data; name=&quot;searchQuery&quot;\r\n    Content-Type: text/plain;charset=UTF-8\r\n    Content-Length: 6 cancer [\\n.\\w\\W]*\r\n    Content-Disposition: form-data; name=&quot;queryLanguage&quot;\r\n    Content-Type: text/plain;charset=UTF-8\r\n    Content-Length: 4 ssql [\\n.\\w\\W]*\r\n    Content-Disposition: form-data; name=&quot;returnFields&quot;\r\n    Content-Type: text/plain;charset=UTF-8\r\n    Content-Length: 22 Id,name [\\n.\\w\\W]*\r\n    Content-Disposition: form-data; name=&quot;returnLimit&quot;\r\n    Content-Type: text/plain;charset=UTF-8\r\n    Content-Length: 1 1 [\\n.\\w\\W]*\r\n    Content-Disposition: form-data; name=&quot;offset&quot;\r\n    Content-Type: text/plain;charset=UTF-8\r\n    Content-Length: 1 0 [\\n.\\w\\W]*-- &quot;))\r\n    )","title":"How to Mock Post request with multi part form body","body":"<p>I need to mock a post request with multipart form body as given below. I tried with a regex pattern for the unique string in the body --Z5KfGboCdJvPl4VsEq74AeK7PZN4EyN , but it didn't work. Can some one guide me on this?</p>\n<p><strong>BODY :</strong></p>\n<pre><code>&quot;body&quot;:&quot;--Z5KfGboCdJvPl4VsEq74AeK7PZN4EyN\nContent-Disposition: form-data; name=&quot;dataset&quot;\nContent-Type: text/plain;charset=UTF-8\nContent-Length: 14 drugs --Z5KfGboCdJvPl4VsEq74AeK7PZN4EyN\nContent-Disposition: form-data; name=&quot;searchQuery&quot;\nContent-Type: text/plain;charset=UTF-8\nContent-Length: 6 cancer --Z5KfGboCdJvPl4VsEq74AeK7PZN4EyN\nContent-Disposition: form-data; name=&quot;queryLanguage&quot;\nContent-Type: text/plain;charset=UTF-8\nContent-Length: 4 ssql --Z5KfGboCdJvPl4VsEq74AeK7PZN4EyN\nContent-Disposition: form-data; name=&quot;returnFields&quot;\nContent-Type: text/plain;charset=UTF-8\nContent-Length: 22 Id,name --Z5KfGboCdJvPl4VsEq74AeK7PZN4EyN\nContent-Disposition: form-data; name=&quot;returnLimit&quot;\nContent-Type: text/plain;charset=UTF-8\nContent-Length: 1 1 --Z5KfGboCdJvPl4VsEq74AeK7PZN4EyN\nContent-Disposition: form-data; name=&quot;offset&quot;\nContent-Type: text/plain;charset=UTF-8\nContent-Length: 1 0 --Z5KfGboCdJvPl4VsEq74AeK7PZN4EyN-- &quot;\n</code></pre>\n<p><strong>I tried like -</strong></p>\n<pre><code>mockServerClient\n.when(\nrequest()\n.withMethod(&quot;POST&quot;)\n.withHeaders(\nnew Header(&quot;Content-Type&quot;, &quot;multipart/form-data&quot;))\n.withPath(&quot;abc/xyz&quot;)\n.withBody(**regex(&quot;[\\n.\\w\\W]***\nContent-Disposition: form-data; name=&quot;dataset&quot;\nContent-Type: text/plain;charset=UTF-8\nContent-Length: 14 drugs [\\n.\\w\\W]*\nContent-Disposition: form-data; name=&quot;searchQuery&quot;\nContent-Type: text/plain;charset=UTF-8\nContent-Length: 6 cancer [\\n.\\w\\W]*\nContent-Disposition: form-data; name=&quot;queryLanguage&quot;\nContent-Type: text/plain;charset=UTF-8\nContent-Length: 4 ssql [\\n.\\w\\W]*\nContent-Disposition: form-data; name=&quot;returnFields&quot;\nContent-Type: text/plain;charset=UTF-8\nContent-Length: 22 Id,name [\\n.\\w\\W]*\nContent-Disposition: form-data; name=&quot;returnLimit&quot;\nContent-Type: text/plain;charset=UTF-8\nContent-Length: 1 1 [\\n.\\w\\W]*\nContent-Disposition: form-data; name=&quot;offset&quot;\nContent-Type: text/plain;charset=UTF-8\nContent-Length: 1 0 [\\n.\\w\\W]*-- &quot;))\n)\n</code></pre>\n"},{"tags":["java","spring","spring-boot","dynamic","proxy"],"answers":[{"tags":[],"owner":{"account_id":28578269,"reputation":142,"user_id":21879587,"display_name":"tamtejszystan"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691686513,"creation_date":1691686513,"answer_id":76877834,"question_id":76869991,"body_markdown":"Assuming you have situation like this:\r\n\r\n```java\r\npublic interface MyService {\r\n    void doSomething();\r\n}\r\n\r\n@CustomProxy\r\npublic class OriginalService implements MyService {\r\n    @Override\r\n    public void doSomething() {\r\n        // Original logic here\r\n    }\r\n}\r\n\r\npublic class PlaceholderService implements MyService {\r\n    @Override\r\n    public void doSomething() {\r\n        // No logic or placeholder logic here\r\n    }\r\n}\r\n```\r\n\r\nI would try to use Spring AOP like so:\r\n\r\n```java\r\nimport org.aspectj.lang.annotation.Aspect;\r\nimport org.aspectj.lang.annotation.Before;\r\nimport org.springframework.context.annotation.Configuration;\r\n\r\n@Aspect\r\n@Configuration\r\npublic class ProxyAspect {\r\n\r\n    @Before(&quot;@within(com.example.CustomProxy)&quot;)\r\n    public void beforeCustomProxy() {\r\n        // Logic to determine which version of the proxy to use\r\n        // You can conditionally switch between OriginalService and PlaceholderService\r\n        boolean condition = /* your condition here */;\r\n\r\n        if (condition) {\r\n            // Return the instance of OriginalService\r\n        } else {\r\n            // Return the instance of PlaceholderService\r\n        }\r\n    }\r\n}\r\n```\r\n\r\nPlease let me know if this has been helpful to you","title":"how to create dynamic proxy with java condition","body":"<p>Assuming you have situation like this:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public interface MyService {\n    void doSomething();\n}\n\n@CustomProxy\npublic class OriginalService implements MyService {\n    @Override\n    public void doSomething() {\n        // Original logic here\n    }\n}\n\npublic class PlaceholderService implements MyService {\n    @Override\n    public void doSomething() {\n        // No logic or placeholder logic here\n    }\n}\n</code></pre>\n<p>I would try to use Spring AOP like so:</p>\n<pre class=\"lang-java prettyprint-override\"><code>import org.aspectj.lang.annotation.Aspect;\nimport org.aspectj.lang.annotation.Before;\nimport org.springframework.context.annotation.Configuration;\n\n@Aspect\n@Configuration\npublic class ProxyAspect {\n\n    @Before(&quot;@within(com.example.CustomProxy)&quot;)\n    public void beforeCustomProxy() {\n        // Logic to determine which version of the proxy to use\n        // You can conditionally switch between OriginalService and PlaceholderService\n        boolean condition = /* your condition here */;\n\n        if (condition) {\n            // Return the instance of OriginalService\n        } else {\n            // Return the instance of PlaceholderService\n        }\n    }\n}\n</code></pre>\n<p>Please let me know if this has been helpful to you</p>\n"}],"owner":{"account_id":27437374,"reputation":1,"user_id":20932947,"display_name":"Kaspersky"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":27,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1691686513,"creation_date":1691601496,"question_id":76869991,"body_markdown":"I need your help. \r\nI have a Spring annotation that I apply to an interface. This interface is implemented by another class. I need to create a proxy object for classes that implement the interface with my annotation. This proxy object should have two implementations: \r\n- the first one with the original logic\r\n- the second one without any logic, just as a placeholder.\r\n \r\nAdditionally, this should be wrapped in an `if()` conditional statement. If you have any ideas or suggestions, I would be grateful.\r\n\r\n\r\nI tried to create a proxy object and disable and display, but for some reason they do not fall into the context\r\n","title":"how to create dynamic proxy with java condition","body":"<p>I need your help.\nI have a Spring annotation that I apply to an interface. This interface is implemented by another class. I need to create a proxy object for classes that implement the interface with my annotation. This proxy object should have two implementations:</p>\n<ul>\n<li>the first one with the original logic</li>\n<li>the second one without any logic, just as a placeholder.</li>\n</ul>\n<p>Additionally, this should be wrapped in an <code>if()</code> conditional statement. If you have any ideas or suggestions, I would be grateful.</p>\n<p>I tried to create a proxy object and disable and display, but for some reason they do not fall into the context</p>\n"},{"tags":["java","spring-boot"],"answers":[{"tags":[],"owner":{"account_id":14473519,"reputation":2054,"user_id":10454736,"display_name":"Tushar Mahajan"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691686487,"creation_date":1691686487,"answer_id":76877831,"question_id":76877438,"body_markdown":"Try using ContentCachingResponseWrapper from spring\r\n\r\n    ContentCachingResponseWrapper wrapper = new ContentCachingResponseWrapper(HttpServletResponseObject);\r\n    filterchain.doFilter(httpServletRequestObject, wrapper);\r\n    byte[] data = wrapper.getContentAsByteArray();\r\n    response.getOutputStream().write(data);\r\n\r\nmaybe it will help\r\n\r\n","title":"How to prevent downstream filters from overriding the HTTP response body","body":"<p>Try using ContentCachingResponseWrapper from spring</p>\n<pre><code>ContentCachingResponseWrapper wrapper = new ContentCachingResponseWrapper(HttpServletResponseObject);\nfilterchain.doFilter(httpServletRequestObject, wrapper);\nbyte[] data = wrapper.getContentAsByteArray();\nresponse.getOutputStream().write(data);\n</code></pre>\n<p>maybe it will help</p>\n"}],"owner":{"account_id":4949717,"reputation":1119,"user_id":3984101,"accept_rate":60,"display_name":"Nipun Thathsara"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":28,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1691686487,"creation_date":1691683039,"question_id":76877438,"body_markdown":"I&#39;m using Spring boot ControllerAdvisor class to write the JSON response body of the `HttpServletResponse` object due to unavoidable reason. Still my downstream Tomcat filters(Over which I don&#39;t have any control) override my response. \r\n\r\nHow can I prevent them from overriding this status. Setting `isCommited` to `true` seems to be a dirty hack even though I couldn&#39;t figure how to do so. \r\n\r\nAppreciate any help. Thanks in advance!\r\n\r\n```\r\n// Inside the controller advisor\r\nprivate void writeHttpResponseForTechnicalErrors(HttpServletRequest httpRequest,\r\n        HttpServletResponse httpResponse, ResponseEntity responseEntity) {\r\n\r\n        String jsonResponse jsonResponse = new ObjectMapper().writeValueAsString(responseEntity.getBody());\r\n        httpResponse.getWriter().write(jsonResponse);\r\n}\r\n```\r\n\r\nEdit:\r\n\r\nI was able to set `isCommited` to `true` with below. Still doesn&#39;t feel like this is a very good approach. Lemme know :)","title":"How to prevent downstream filters from overriding the HTTP response body","body":"<p>I'm using Spring boot ControllerAdvisor class to write the JSON response body of the <code>HttpServletResponse</code> object due to unavoidable reason. Still my downstream Tomcat filters(Over which I don't have any control) override my response.</p>\n<p>How can I prevent them from overriding this status. Setting <code>isCommited</code> to <code>true</code> seems to be a dirty hack even though I couldn't figure how to do so.</p>\n<p>Appreciate any help. Thanks in advance!</p>\n<pre><code>// Inside the controller advisor\nprivate void writeHttpResponseForTechnicalErrors(HttpServletRequest httpRequest,\n        HttpServletResponse httpResponse, ResponseEntity responseEntity) {\n\n        String jsonResponse jsonResponse = new ObjectMapper().writeValueAsString(responseEntity.getBody());\n        httpResponse.getWriter().write(jsonResponse);\n}\n</code></pre>\n<p>Edit:</p>\n<p>I was able to set <code>isCommited</code> to <code>true</code> with below. Still doesn't feel like this is a very good approach. Lemme know :)</p>\n"},{"tags":["java","android","kotlin","default"],"answers":[{"tags":[],"owner":{"account_id":14596857,"reputation":375,"user_id":10542284,"display_name":"Jugert Mucoimaj"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1691686221,"creation_date":1691686221,"answer_id":76877800,"question_id":76868443,"body_markdown":"To all the people that might want to get past this and want their app to be registered as the default phone app, they need to follow this very [important doc][1] from Android. These are quite important:\r\n\r\n \r\n\r\n&gt; In order to fill the RoleManager.ROLE_DIALER role, an app must meet a\r\n&gt; number of requirements:\r\n&gt; \r\n&gt;     \r\n&gt;\r\n&gt; - It must handle the Intent#ACTION_DIAL intent. This means the app must\r\n   provide a dial pad UI for the user to initiate outgoing calls.\r\n&gt; - It must fully implement the InCallService API and provide both an incoming call UI, as well as an ongoing call UI.\r\n\r\nIf you do these two things Android is going to ask the user which to set for default dialer and you are all set!\r\n\r\n  [1]: https://developer.android.com/reference/android/telecom/InCallService#becoming-the-default-phone-app","title":"I&#39;m getting RESULT_CANCELED from startActivityForResult()","body":"<p>To all the people that might want to get past this and want their app to be registered as the default phone app, they need to follow this very <a href=\"https://developer.android.com/reference/android/telecom/InCallService#becoming-the-default-phone-app\" rel=\"nofollow noreferrer\">important doc</a> from Android. These are quite important:</p>\n<blockquote>\n<p>In order to fill the RoleManager.ROLE_DIALER role, an app must meet a\nnumber of requirements:</p>\n<ul>\n<li>It must handle the Intent#ACTION_DIAL intent. This means the app must\nprovide a dial pad UI for the user to initiate outgoing calls.</li>\n<li>It must fully implement the InCallService API and provide both an incoming call UI, as well as an ongoing call UI.</li>\n</ul>\n</blockquote>\n<p>If you do these two things Android is going to ask the user which to set for default dialer and you are all set!</p>\n"}],"owner":{"account_id":14596857,"reputation":375,"user_id":10542284,"display_name":"Jugert Mucoimaj"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":57,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":76877800,"answer_count":1,"score":1,"last_activity_date":1691686221,"creation_date":1691589190,"question_id":76868443,"body_markdown":"I&#39;m trying to set my app as the default phone app in `Android 10` and above and when I say default &quot;phone app&quot; is the one that you find when you go to `Settings &gt; Apps &gt; Default Apps &gt; Phone` I have this main activity class:\r\n\r\n```\r\n@RequiresApi(Build.VERSION_CODES.Q)\r\nclass MainActivity : ComponentActivity() {\r\n\r\n    private lateinit var setPhoneAppLauncher: ActivityResultLauncher&lt;Intent&gt;\r\n    private val roleManager: RoleManager by lazy {\r\n        getSystemService(Context.ROLE_SERVICE) as RoleManager\r\n    }\r\n\r\n    private val permissions = arrayOf(\r\n        android.Manifest.permission.READ_PHONE_STATE,\r\n        android.Manifest.permission.CALL_PHONE,\r\n        android.Manifest.permission.ANSWER_PHONE_CALLS,\r\n        android.Manifest.permission.READ_CALL_LOG,\r\n        android.Manifest.permission.WRITE_CALL_LOG,\r\n        android.Manifest.permission.READ_CONTACTS\r\n    )\r\n    private val requestCode = 201002\r\n    //    private val REQUESTCODESETDEFAULTDIALER = 1\r\n    private lateinit var contactLoader: ContactLoader\r\n    private val contactDisplayUI = ContactDisplayUI(activity = this)\r\n\r\n    companion object {\r\n        const val PERMISSIONS_REQUEST_READ_CONTACTS = 100\r\n        const val REQUESTCODESETDEFAULTDIALER = 1\r\n        const val role = RoleManager.ROLE_DIALER\r\n    }\r\n\r\n\r\n    @OptIn(ExperimentalMaterial3Api::class)\r\n    override fun onCreate(savedInstanceState: Bundle?) {\r\n        super.onCreate(savedInstanceState)\r\n\r\n        setPhoneAppLauncher = registerForActivityResult(ActivityResultContracts.StartActivityForResult()) {\r\n            if (it.resultCode == RESULT_CANCELED) {\r\n                // Permission granted, proceed with your logic here.\r\n                Log.d(&quot;MainActivity&quot;, &quot;Success?&quot;)\r\n               // checkDefaultDialer()\r\n            } else {\r\n                // Handle other possible result codes if needed.\r\n                Log.d(&quot;MainActivity&quot;, it.resultCode.toString())\r\n                Log.d(&quot;YourActivity&quot;, &quot;Something went wrong.&quot;)\r\n            }\r\n        }\r\n\r\n        checkAndRequestPermissions()\r\n\r\n    }\r\n\r\n\r\n    private fun selectRegisterLogic() {\r\n        if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.Q) {\r\n            Log.d(&quot;YourActivity&quot;, &quot;HereQ.&quot;)\r\n            registerAsDefaultDialerQ()\r\n        } else {\r\n            Log.d(&quot;YourActivity&quot;, &quot;HereL.&quot;)\r\n            registerAsDefaultDialerLegacy()\r\n        }\r\n    }\r\n\r\n    @RequiresApi(Build.VERSION_CODES.Q)\r\n    private fun registerAsDefaultDialerQ() {\r\n        val roleManager = getSystemService(Context.ROLE_SERVICE) as RoleManager\r\n        if (roleManager.isRoleAvailable(RoleManager.ROLE_DIALER)) {\r\n            // ... rest of your code\r\n            Log.d(&quot;MainActivity&quot;, &quot;Role Manager is available on this device.&quot;)\r\n            if (!roleManager.isRoleHeld(RoleManager.ROLE_DIALER)) {\r\n                val intent = roleManager.createRequestRoleIntent(RoleManager.ROLE_DIALER)\r\n                Log.d(&quot;MainActivity&quot;, &quot;Requesting ROLE_DIALER intent: $intent&quot;)\r\n\r\n                setPhoneAppLauncher.launch(intent)\r\n            } else {\r\n                // Your app already holds the role, proceed with your logic here.\r\n                Log.e(&quot;MainActivity&quot;, &quot;It is the default.&quot;)\r\n            }\r\n        } else {\r\n            Log.e(&quot;MainActivity&quot;, &quot;Role Manager not available on this device.&quot;)\r\n        }\r\n    }\r\n\r\n\r\n\r\n\r\n    private fun registerAsDefaultDialerLegacy() {\r\n\r\n        val telecomManager = getSystemService(Context.TELECOM_SERVICE) as TelecomManager\r\n        if (!packageName.equals(telecomManager.defaultDialerPackage)) {\r\n            val intent = Intent(TelecomManager.ACTION_CHANGE_DEFAULT_DIALER)\r\n            intent.putExtra(\r\n                TelecomManager.EXTRA_CHANGE_DEFAULT_DIALER_PACKAGE_NAME,\r\n                packageName\r\n            )\r\n            startActivity(intent)\r\n        }\r\n\r\n    }\r\n\r\n    //    @RequiresApi(Build.VERSION_CODES.Q)\r\n    private fun checkDefaultDialer() {\r\n        val telecomManager = getSystemService(TelecomManager::class.java)\r\n        if (packageName == telecomManager.defaultDialerPackage) {\r\n            // Your app is the default dialer, proceed with your logic here.\r\n            Log.d(&quot;YourActivity&quot;, &quot;Phone app is the default dialer.&quot;)\r\n        } else {\r\n            // Your app is not the default dialer, handle this case.\r\n            selectRegisterLogic()\r\n            Log.d(&quot;YourActivity&quot;, &quot;Phone app is NOT the default dialer.&quot;)\r\n//\r\n        }\r\n    }\r\n\r\n    private fun checkAndRequestPermissions() {\r\n        val permissionsToRequest = permissions.filter {\r\n            ContextCompat.checkSelfPermission(this, it) != PackageManager.PERMISSION_GRANTED\r\n        }\r\n\r\n        if (permissionsToRequest.isNotEmpty()) {\r\n            // Request missing permissions using the ActivityResultLauncher\r\n            requestPermissionLauncher.launch(permissionsToRequest.toTypedArray())\r\n        } else {\r\n\r\n            Log.d(&quot;somelog&quot;, &quot;yeas&quot;)\r\n        }\r\n    }\r\n\r\n\r\n    private val requestPermissionLauncher = registerForActivityResult(\r\n        ActivityResultContracts.RequestMultiplePermissions()\r\n    ) { permissions -&gt;\r\n        val allPermissionsGranted = permissions.all { it.value }\r\n        if (allPermissionsGranted) {\r\n            Log.d(&quot;somelog&quot;, allPermissionsGranted.toString())\r\n            // Permissions granted, register as the default dialer\r\n            selectRegisterLogic()\r\n        } else {\r\n            // Handle case when permissions are not granted\r\n        }\r\n    }\r\n}\r\n\r\n```\r\n\r\nSince I want to handle from Android API level 23 and above I set some `if else` logic to handle necessary things. And I think I have set the necessary permissions in the `AndroidManifest.xml` file. What&#39;s going wrong?","title":"I&#39;m getting RESULT_CANCELED from startActivityForResult()","body":"<p>I'm trying to set my app as the default phone app in <code>Android 10</code> and above and when I say default &quot;phone app&quot; is the one that you find when you go to <code>Settings &gt; Apps &gt; Default Apps &gt; Phone</code> I have this main activity class:</p>\n<pre><code>@RequiresApi(Build.VERSION_CODES.Q)\nclass MainActivity : ComponentActivity() {\n\n    private lateinit var setPhoneAppLauncher: ActivityResultLauncher&lt;Intent&gt;\n    private val roleManager: RoleManager by lazy {\n        getSystemService(Context.ROLE_SERVICE) as RoleManager\n    }\n\n    private val permissions = arrayOf(\n        android.Manifest.permission.READ_PHONE_STATE,\n        android.Manifest.permission.CALL_PHONE,\n        android.Manifest.permission.ANSWER_PHONE_CALLS,\n        android.Manifest.permission.READ_CALL_LOG,\n        android.Manifest.permission.WRITE_CALL_LOG,\n        android.Manifest.permission.READ_CONTACTS\n    )\n    private val requestCode = 201002\n    //    private val REQUESTCODESETDEFAULTDIALER = 1\n    private lateinit var contactLoader: ContactLoader\n    private val contactDisplayUI = ContactDisplayUI(activity = this)\n\n    companion object {\n        const val PERMISSIONS_REQUEST_READ_CONTACTS = 100\n        const val REQUESTCODESETDEFAULTDIALER = 1\n        const val role = RoleManager.ROLE_DIALER\n    }\n\n\n    @OptIn(ExperimentalMaterial3Api::class)\n    override fun onCreate(savedInstanceState: Bundle?) {\n        super.onCreate(savedInstanceState)\n\n        setPhoneAppLauncher = registerForActivityResult(ActivityResultContracts.StartActivityForResult()) {\n            if (it.resultCode == RESULT_CANCELED) {\n                // Permission granted, proceed with your logic here.\n                Log.d(&quot;MainActivity&quot;, &quot;Success?&quot;)\n               // checkDefaultDialer()\n            } else {\n                // Handle other possible result codes if needed.\n                Log.d(&quot;MainActivity&quot;, it.resultCode.toString())\n                Log.d(&quot;YourActivity&quot;, &quot;Something went wrong.&quot;)\n            }\n        }\n\n        checkAndRequestPermissions()\n\n    }\n\n\n    private fun selectRegisterLogic() {\n        if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.Q) {\n            Log.d(&quot;YourActivity&quot;, &quot;HereQ.&quot;)\n            registerAsDefaultDialerQ()\n        } else {\n            Log.d(&quot;YourActivity&quot;, &quot;HereL.&quot;)\n            registerAsDefaultDialerLegacy()\n        }\n    }\n\n    @RequiresApi(Build.VERSION_CODES.Q)\n    private fun registerAsDefaultDialerQ() {\n        val roleManager = getSystemService(Context.ROLE_SERVICE) as RoleManager\n        if (roleManager.isRoleAvailable(RoleManager.ROLE_DIALER)) {\n            // ... rest of your code\n            Log.d(&quot;MainActivity&quot;, &quot;Role Manager is available on this device.&quot;)\n            if (!roleManager.isRoleHeld(RoleManager.ROLE_DIALER)) {\n                val intent = roleManager.createRequestRoleIntent(RoleManager.ROLE_DIALER)\n                Log.d(&quot;MainActivity&quot;, &quot;Requesting ROLE_DIALER intent: $intent&quot;)\n\n                setPhoneAppLauncher.launch(intent)\n            } else {\n                // Your app already holds the role, proceed with your logic here.\n                Log.e(&quot;MainActivity&quot;, &quot;It is the default.&quot;)\n            }\n        } else {\n            Log.e(&quot;MainActivity&quot;, &quot;Role Manager not available on this device.&quot;)\n        }\n    }\n\n\n\n\n    private fun registerAsDefaultDialerLegacy() {\n\n        val telecomManager = getSystemService(Context.TELECOM_SERVICE) as TelecomManager\n        if (!packageName.equals(telecomManager.defaultDialerPackage)) {\n            val intent = Intent(TelecomManager.ACTION_CHANGE_DEFAULT_DIALER)\n            intent.putExtra(\n                TelecomManager.EXTRA_CHANGE_DEFAULT_DIALER_PACKAGE_NAME,\n                packageName\n            )\n            startActivity(intent)\n        }\n\n    }\n\n    //    @RequiresApi(Build.VERSION_CODES.Q)\n    private fun checkDefaultDialer() {\n        val telecomManager = getSystemService(TelecomManager::class.java)\n        if (packageName == telecomManager.defaultDialerPackage) {\n            // Your app is the default dialer, proceed with your logic here.\n            Log.d(&quot;YourActivity&quot;, &quot;Phone app is the default dialer.&quot;)\n        } else {\n            // Your app is not the default dialer, handle this case.\n            selectRegisterLogic()\n            Log.d(&quot;YourActivity&quot;, &quot;Phone app is NOT the default dialer.&quot;)\n//\n        }\n    }\n\n    private fun checkAndRequestPermissions() {\n        val permissionsToRequest = permissions.filter {\n            ContextCompat.checkSelfPermission(this, it) != PackageManager.PERMISSION_GRANTED\n        }\n\n        if (permissionsToRequest.isNotEmpty()) {\n            // Request missing permissions using the ActivityResultLauncher\n            requestPermissionLauncher.launch(permissionsToRequest.toTypedArray())\n        } else {\n\n            Log.d(&quot;somelog&quot;, &quot;yeas&quot;)\n        }\n    }\n\n\n    private val requestPermissionLauncher = registerForActivityResult(\n        ActivityResultContracts.RequestMultiplePermissions()\n    ) { permissions -&gt;\n        val allPermissionsGranted = permissions.all { it.value }\n        if (allPermissionsGranted) {\n            Log.d(&quot;somelog&quot;, allPermissionsGranted.toString())\n            // Permissions granted, register as the default dialer\n            selectRegisterLogic()\n        } else {\n            // Handle case when permissions are not granted\n        }\n    }\n}\n\n</code></pre>\n<p>Since I want to handle from Android API level 23 and above I set some <code>if else</code> logic to handle necessary things. And I think I have set the necessary permissions in the <code>AndroidManifest.xml</code> file. What's going wrong?</p>\n"},{"tags":["java","android","android-custom-view"],"comments":[{"owner":{"account_id":8373673,"reputation":61868,"user_id":6287910,"display_name":"Cheticamp"},"score":0,"creation_date":1691456907,"post_id":76839786,"comment_id":135491192,"body_markdown":"The rotation seems to be maintained regardless of the pivot point selected. What happens if you pull up you app and change the pivot point without doing any rotation or translation?","body":"The rotation seems to be maintained regardless of the pivot point selected. What happens if you pull up you app and change the pivot point without doing any rotation or translation?"},{"owner":{"account_id":16537587,"reputation":486,"user_id":11949116,"display_name":"Abdo21"},"score":0,"creation_date":1691483807,"post_id":76839786,"comment_id":135494290,"body_markdown":"Hey @Cheticamp , I&#39;ve made some updates to the question to highlight a crucial observation. When the view rotation angle is precisely zero, regardless of whether I apply any translations to the view, no issue arises.","body":"Hey @Cheticamp , I&#39;ve made some updates to the question to highlight a crucial observation. When the view rotation angle is precisely zero, regardless of whether I apply any translations to the view, no issue arises."},{"owner":{"account_id":16537587,"reputation":486,"user_id":11949116,"display_name":"Abdo21"},"score":0,"creation_date":1691484213,"post_id":76839786,"comment_id":135494377,"body_markdown":"I&#39;ve realized that the problem only shows up when I rotate the view and then try to change the pivot point.","body":"I&#39;ve realized that the problem only shows up when I rotate the view and then try to change the pivot point."},{"owner":{"account_id":8373673,"reputation":61868,"user_id":6287910,"display_name":"Cheticamp"},"score":0,"creation_date":1691499467,"post_id":76839786,"comment_id":135497585,"body_markdown":"Check your calculations for the rectangles that control the layout and position of your custom view. Views in Android always present themselves as unrotated rectangles on the screen. In other words, the width of the view will be from the left-most corner to the right-most corner measured along the x-axis. The height is from the bottom-most corner to the top-most corner, measured along the y-axis. The width/height of the view will differ based upon the rotation. I can&#39;t say that this is definitely the problem, but check it out.","body":"Check your calculations for the rectangles that control the layout and position of your custom view. Views in Android always present themselves as unrotated rectangles on the screen. In other words, the width of the view will be from the left-most corner to the right-most corner measured along the x-axis. The height is from the bottom-most corner to the top-most corner, measured along the y-axis. The width/height of the view will differ based upon the rotation. I can&#39;t say that this is definitely the problem, but check it out."},{"owner":{"account_id":24764408,"reputation":306,"user_id":18648400,"display_name":"Mirco0"},"score":0,"creation_date":1691534595,"post_id":76839786,"comment_id":135504133,"body_markdown":"You have to set a new postion for the view, because the position you see on the screen is the result of the sum of the pivot + the actual position","body":"You have to set a new postion for the view, because the position you see on the screen is the result of the sum of the pivot + the actual position"},{"owner":{"account_id":6979173,"reputation":942,"user_id":6576302,"display_name":"C.F.G"},"score":0,"creation_date":1691634070,"post_id":76839786,"comment_id":135519049,"body_markdown":"@Abdo21: What is the `com.abdo.rotateviewquestion.FixedPosLayout`? How can I import it?","body":"@Abdo21: What is the <code>com.abdo.rotateviewquestion.FixedPosLayout</code>? How can I import it?"},{"owner":{"account_id":16537587,"reputation":486,"user_id":11949116,"display_name":"Abdo21"},"score":0,"creation_date":1691634321,"post_id":76839786,"comment_id":135519065,"body_markdown":"@C.F.G I&#39;ve included the source code for that class within the question.","body":"@C.F.G I&#39;ve included the source code for that class within the question."},{"owner":{"account_id":6979173,"reputation":942,"user_id":6576302,"display_name":"C.F.G"},"score":0,"creation_date":1691634505,"post_id":76839786,"comment_id":135519082,"body_markdown":"@Abdo21: I mean what is the `&lt;com.abdo.rotateviewquestion.FixedPosLayout` in xml file?","body":"@Abdo21: I mean what is the <code>&lt;com.abdo.rotateviewquestion.FixedPosLayout</code> in xml file?"},{"owner":{"account_id":16537587,"reputation":486,"user_id":11949116,"display_name":"Abdo21"},"score":0,"creation_date":1691636180,"post_id":76839786,"comment_id":135519208,"body_markdown":"Hi @Mirco0, I&#39;m not completely sure about that. If it&#39;s true, why does the problem only happen when I rotate the view? And also, remember that the pivot point is set using the view&#39;s own coordinates.","body":"Hi @Mirco0, I&#39;m not completely sure about that. If it&#39;s true, why does the problem only happen when I rotate the view? And also, remember that the pivot point is set using the view&#39;s own coordinates."},{"owner":{"account_id":24764408,"reputation":306,"user_id":18648400,"display_name":"Mirco0"},"score":0,"creation_date":1691667355,"post_id":76839786,"comment_id":135523876,"body_markdown":"@Abdo2 that happends because the vertical distance of the points becomes different than 0","body":"@Abdo2 that happends because the vertical distance of the points becomes different than 0"}],"answers":[{"tags":[],"owner":{"account_id":13654747,"reputation":38532,"user_id":9851608,"display_name":"Zain"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1691686215,"creation_date":1691686215,"answer_id":76877798,"question_id":76839786,"body_markdown":"## Cause:\r\n\r\n&gt; setRotation\r\n&gt; Sets the degrees that the view is rotated around the pivot point. Increasing values result in clockwise rotation.\r\n\r\nThe [documentation][2] says that the rotation changes around the pivot point; so when you change the rotation before modifying the pivot point, the rotation considered the original pivot point; then after you modify the pivot, still the rotation considers the original pivot; and therefore you&#39;d see the view jumps.\r\n\r\nIn addition, changing the `pivotX`/`pivotY` values of a view would change the view position on the screen in case that the screen coordinates are different than the pivot point. This answer has a nice [breakdown][1] for that. So, you&#39;d not notice a change for the initial rotation because in that case the pivot point are the same as the screen coordinates. But, that will not be the case when the view is rotated.\r\n\r\n## Solution:\r\n\r\nSo, one simple solution is to get the difference between the view location before and after modifying the pivot; and relocate the view position x/y with that difference:\r\n\r\n```\r\nString TAG = &quot;LOG_TAG&quot;;\r\n\r\npublic void setPivotPoint(int position) {\r\n\r\n\t// Get the location of the View on the screen\r\n\tint[] locationBefore = new int[2];\r\n\tgetLocationOnScreen(locationBefore);\r\n\tLog.d(TAG, &quot;\\ngetLocationOnScreen: x = &quot; + locationBefore[0] + &quot; y = &quot; + locationBefore[1]);\r\n\r\n\tswitch (position) {\r\n\t\t// Set center point as pivot\r\n\t\tcase 0: {\r\n\t\t\tfloat width = getWidth();\r\n\t\t\tfloat height = getHeight();\r\n\t\t\tsetPivotX(width / 2);\r\n\t\t\tsetPivotY(height / 2);\r\n\t\t\tbreak;\r\n\t\t}\r\n\r\n\t\t// Set Point 1 as pivot\r\n\t\tcase 1: {\r\n\t\t\tsetPivotX(rectPoint1.centerX());\r\n\t\t\tsetPivotY(rectPoint1.centerY());\r\n\t\t\tbreak;\r\n\t\t}\r\n\r\n\t\t// Set Point 2 as pivot\r\n\t\tcase 2: {\r\n\t\t\tsetPivotX(rectPoint2.centerX());\r\n\t\t\tsetPivotY(rectPoint2.centerY());\r\n\t\t\tbreak;\r\n\t\t}\r\n\t}\r\n\r\n\t// Get the new location of the View on the screen after changing the pivotX &amp; pivotY\r\n\tint[] locationAfter = new int[2];\r\n\tgetLocationOnScreen(locationAfter);\r\n\tLog.d(TAG, &quot;getLocationOnScreen: x = &quot; + locationAfter[0] + &quot; y = &quot; + locationAfter[1]);\r\n\r\n\t// Change the current location of the View back to the original location\r\n\tint xDiff = locationAfter[0] - locationBefore[0];\r\n\tsetX(getX() - xDiff);\r\n\tint yDiff = locationAfter[1] - locationBefore[1];\r\n\tsetY(getY() - yDiff);\r\n\r\n\t// Checking the new location\r\n\tgetLocationOnScreen(locationAfter);\r\n\tLog.d(TAG, &quot;getLocationOnScreen: x = &quot; + locationAfter[0] + &quot; y = &quot; + locationAfter[1]);\r\n\r\n}\r\n```\r\n\r\nPreview:\r\n\r\n![](https://media.giphy.com/media/v1.Y2lkPTc5MGI3NjExeXpzZHRoemRtMms5MzExdXF6cHE0MnFiMW0zbG5jdHptYXcxYzV2MyZlcD12MV9pbnRlcm5hbF9naWZfYnlfaWQmY3Q9Zw/qCPbqf4NEtOKCT7hXI/giphy.gif)\r\n\r\n\r\n\r\n  [1]: https://stackoverflow.com/a/29367064/9851608\r\n  [2]: https://developer.android.com/reference/android/view/View#setRotation(float)","title":"Issue with Custom View Position Jump when Changing Pivot Point","body":"<h2>Cause:</h2>\n<blockquote>\n<p>setRotation\nSets the degrees that the view is rotated around the pivot point. Increasing values result in clockwise rotation.</p>\n</blockquote>\n<p>The <a href=\"https://developer.android.com/reference/android/view/View#setRotation(float)\" rel=\"nofollow noreferrer\">documentation</a> says that the rotation changes around the pivot point; so when you change the rotation before modifying the pivot point, the rotation considered the original pivot point; then after you modify the pivot, still the rotation considers the original pivot; and therefore you'd see the view jumps.</p>\n<p>In addition, changing the <code>pivotX</code>/<code>pivotY</code> values of a view would change the view position on the screen in case that the screen coordinates are different than the pivot point. This answer has a nice <a href=\"https://stackoverflow.com/a/29367064/9851608\">breakdown</a> for that. So, you'd not notice a change for the initial rotation because in that case the pivot point are the same as the screen coordinates. But, that will not be the case when the view is rotated.</p>\n<h2>Solution:</h2>\n<p>So, one simple solution is to get the difference between the view location before and after modifying the pivot; and relocate the view position x/y with that difference:</p>\n<pre><code>String TAG = &quot;LOG_TAG&quot;;\n\npublic void setPivotPoint(int position) {\n\n    // Get the location of the View on the screen\n    int[] locationBefore = new int[2];\n    getLocationOnScreen(locationBefore);\n    Log.d(TAG, &quot;\\ngetLocationOnScreen: x = &quot; + locationBefore[0] + &quot; y = &quot; + locationBefore[1]);\n\n    switch (position) {\n        // Set center point as pivot\n        case 0: {\n            float width = getWidth();\n            float height = getHeight();\n            setPivotX(width / 2);\n            setPivotY(height / 2);\n            break;\n        }\n\n        // Set Point 1 as pivot\n        case 1: {\n            setPivotX(rectPoint1.centerX());\n            setPivotY(rectPoint1.centerY());\n            break;\n        }\n\n        // Set Point 2 as pivot\n        case 2: {\n            setPivotX(rectPoint2.centerX());\n            setPivotY(rectPoint2.centerY());\n            break;\n        }\n    }\n\n    // Get the new location of the View on the screen after changing the pivotX &amp; pivotY\n    int[] locationAfter = new int[2];\n    getLocationOnScreen(locationAfter);\n    Log.d(TAG, &quot;getLocationOnScreen: x = &quot; + locationAfter[0] + &quot; y = &quot; + locationAfter[1]);\n\n    // Change the current location of the View back to the original location\n    int xDiff = locationAfter[0] - locationBefore[0];\n    setX(getX() - xDiff);\n    int yDiff = locationAfter[1] - locationBefore[1];\n    setY(getY() - yDiff);\n\n    // Checking the new location\n    getLocationOnScreen(locationAfter);\n    Log.d(TAG, &quot;getLocationOnScreen: x = &quot; + locationAfter[0] + &quot; y = &quot; + locationAfter[1]);\n\n}\n</code></pre>\n<p>Preview:</p>\n<p><img src=\"https://media.giphy.com/media/v1.Y2lkPTc5MGI3NjExeXpzZHRoemRtMms5MzExdXF6cHE0MnFiMW0zbG5jdHptYXcxYzV2MyZlcD12MV9pbnRlcm5hbF9naWZfYnlfaWQmY3Q9Zw/qCPbqf4NEtOKCT7hXI/giphy.gif\" alt=\"\" /></p>\n"}],"owner":{"account_id":16537587,"reputation":486,"user_id":11949116,"display_name":"Abdo21"},"comment_count":10,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":131,"favorite_count":0,"down_vote_count":1,"up_vote_count":2,"accepted_answer_id":76877798,"answer_count":1,"score":1,"last_activity_date":1691686215,"creation_date":1691198313,"question_id":76839786,"body_markdown":"I&#39;m encountering an unexpected behavior in my Android app involving a custom view named `MyView`. I&#39;m attempting to achieve both translation and rotation effects on this view. When the pivot point is set to the center of the view, everything work as expected. However, as soon as I change the pivot point (for instance, to &quot;Point 2&quot; selected from a spinner), the view unexpectedly jumps to a different position, as illustrated in this GIF:\r\n\r\n[![enter image description here][1]][1]\r\n\r\n**Edit**: \r\n\r\n**Observations:**\r\n- The issue primarily arises when the view is rotated. If the view has no rotation (rotation = 0), changing the pivot point doesn&#39;t cause any problems.\r\n- Also if before changing the pivot point, I restore the view to its initial rotation (rotation = 0) this prevent also the issue from occurring.\r\nTo illustrate this point further, here&#39;s an example:\r\n\r\n[![enter image description here][2]][2]\r\n\r\nCould anyone kindly advise on what might be causing the view displacement when changing the pivot point and suggest potential fixes? Your help is much appreciated.\r\n\r\nBelow is the complete code:\r\n\r\n// MainActivity.java\r\n\r\n    public class MainActivity extends AppCompatActivity {\r\n    \r\n        @Override\r\n        protected void onCreate(Bundle savedInstanceState) {\r\n            super.onCreate(savedInstanceState);\r\n            setContentView(R.layout.activity_main);\r\n    \r\n            FixedPosLayout fixedPosLayout = findViewById(R.id.fixedPosLayout);\r\n    \r\n            MyView myView = new MyView(this);\r\n    \r\n            FixedPosLayout.LayoutParams params =\r\n                    new FixedPosLayout.LayoutParams(200, 400, 300, 80);\r\n    \r\n            fixedPosLayout.addView(myView, params);\r\n    \r\n            ImageButton moveLeftButton = findViewById(R.id.moveLeftButton);\r\n            ImageButton moveRightButton = findViewById(R.id.moveRightButton);\r\n            ImageButton moveUpButton = findViewById(R.id.moveUpButton);\r\n            ImageButton moveBottomButton = findViewById(R.id.moveBottomButton);\r\n    \r\n            ImageButton rotateLeftButton = findViewById(R.id.rotateLeftButton);\r\n            ImageButton rotateRightButton = findViewById(R.id.rotateRightButton);\r\n    \r\n            AppCompatButton resetButton = findViewById(R.id.resetButton);\r\n    \r\n            Spinner spinner = findViewById(R.id.pivotPointSpinner);\r\n    \r\n            float d = 10;\r\n            float r = 10;\r\n    \r\n            moveLeftButton.setOnClickListener(v -&gt; myView.moveLeftBy(d));\r\n            moveRightButton.setOnClickListener(v -&gt; myView.moveRightBy(d));\r\n            moveUpButton.setOnClickListener(v -&gt; myView.moveUpBy(d));\r\n            moveBottomButton.setOnClickListener(v -&gt; myView.moveDownBy(d));\r\n            rotateRightButton.setOnClickListener(v -&gt; myView.rotateClockwiseBy(r));\r\n            rotateLeftButton.setOnClickListener(v -&gt; myView.rotateConterClockwiseBy(r));\r\n    \r\n            resetButton.setOnClickListener(v -&gt; {\r\n                myView.reset();\r\n                spinner.setSelection(0); // Select first item\r\n            });\r\n    \r\n            // Spinner\r\n            String[] items = {&quot;Center Point&quot;, &quot;Point 1&quot;, &quot;Point 2&quot;};\r\n    \r\n            ArrayAdapter&lt;String&gt; adapter = new ArrayAdapter&lt;&gt;(this,\r\n                    android.R.layout.simple_spinner_item, items);\r\n    \r\n            adapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);\r\n    \r\n            spinner.setAdapter(adapter);\r\n    \r\n            // Handle spinner click\r\n            spinner.setOnItemSelectedListener(new AdapterView.OnItemSelectedListener() {\r\n                @Override\r\n                public void onItemSelected(AdapterView&lt;?&gt; parent, View view, int position, long id) {\r\n                    myView.setPivotPoint(position);\r\n                }\r\n    \r\n                @Override\r\n                public void onNothingSelected(AdapterView&lt;?&gt; parent) {\r\n                    myView.setPivotPoint(0); // Set center point as default pivot point\r\n                }\r\n            });\r\n        }\r\n    }\r\n\r\n// MyView.java\r\n\r\n    public class MyView extends View {\r\n    \r\n        public static final int RADIUS = 24; // Anchor radius\r\n        public static final int OFFSET = 1;\r\n    \r\n        private final Paint paint;\r\n    \r\n        public RectF rectPoint1;\r\n        public RectF rectPoint2;\r\n    \r\n        public MyView(Context context) {\r\n            super(context);\r\n    \r\n            paint = new Paint();\r\n            paint.setStyle(Paint.Style.STROKE);\r\n    \r\n            rectPoint1 = new RectF();\r\n            rectPoint2 = new RectF();\r\n        }\r\n    \r\n        public void moveRightBy(float dRight) {\r\n            setX(getX() + dRight);\r\n        }\r\n    \r\n        public void moveLeftBy(float dLeft) {\r\n            moveRightBy(-dLeft);\r\n        }\r\n    \r\n        public void moveDownBy(float dDown) {\r\n            setY(getY() + dDown);\r\n        }\r\n    \r\n        public void moveUpBy(float dUp) {\r\n            moveDownBy(-dUp);\r\n        }\r\n    \r\n        public void rotateClockwiseBy(float dDegree) {\r\n            setRotation(getRotation() + dDegree);\r\n        }\r\n    \r\n        public void rotateConterClockwiseBy(float dDegree){\r\n            rotateClockwiseBy(-dDegree);\r\n        }\r\n    \r\n        public void setPivotPoint(int position) {\r\n            switch (position) {\r\n                // Set center point as pivot\r\n                case 0: {\r\n                    float width = getWidth();\r\n                    float height = getHeight();\r\n    \r\n                    setPivotX(width/2);\r\n                    setPivotY(height/2);\r\n                    break;\r\n                }\r\n    \r\n                // Set Point 1 as pivot\r\n                case 1: {\r\n                    setPivotX(rectPoint1.centerX());\r\n                    setPivotY(rectPoint1.centerY());\r\n                    break;\r\n                }\r\n    \r\n                // Set Point 2 as pivot\r\n                case 2: {\r\n                    setPivotX(rectPoint2.centerX());\r\n                    setPivotY(rectPoint2.centerY());\r\n                    break;\r\n                }\r\n            }\r\n        }\r\n    \r\n        @Override\r\n        protected void onDraw(Canvas canvas) {\r\n            float width = getWidth();\r\n            float height = getHeight();\r\n    \r\n            //Draw line between anchor points\r\n            canvas.drawLine(\r\n                    rectPoint1.centerX(), rectPoint1.centerY(),\r\n                    rectPoint2.centerX(), rectPoint2.centerY(), paint);\r\n    \r\n            //Draw anchor circle\r\n            canvas.drawCircle(rectPoint1.centerX(), rectPoint1.centerY(), RADIUS, paint);\r\n            canvas.drawCircle(rectPoint2.centerX(), rectPoint2.centerY(), RADIUS, paint);\r\n    \r\n            //Draw bounding rect\r\n            canvas.drawRect(OFFSET, OFFSET, width - OFFSET, height - OFFSET, paint);\r\n    \r\n            // Draw anchors label\r\n            canvas.drawText(&quot;1&quot;, rectPoint1.centerX(), rectPoint1.centerY(), paint);\r\n            canvas.drawText(&quot;2&quot;, rectPoint2.centerX(), rectPoint2.centerY(), paint);\r\n    \r\n            // Draw small circle at the center\r\n            canvas.drawCircle(width/2f, height/2f, 4, paint);\r\n        }\r\n    \r\n        @Override\r\n        protected void onSizeChanged(int w, int h, int oldw, int oldh) {\r\n            //Recompute anchors rect\r\n            rectPoint1.set(\r\n                    OFFSET, h /2f - RADIUS + OFFSET,\r\n                    2*RADIUS, h /2f + RADIUS - OFFSET\r\n            );\r\n    \r\n            rectPoint2.set(\r\n                    w - 2*RADIUS, h /2f - RADIUS + OFFSET,\r\n                    w - OFFSET, h /2f + RADIUS - OFFSET\r\n            );\r\n        }\r\n    \r\n        @Override\r\n        protected void onMeasure(int widthMeasureSpec, int heightMeasureSpec) {\r\n            // Measure exactly\r\n            int width = MeasureSpec.getSize(widthMeasureSpec);\r\n            int height = MeasureSpec.getSize(heightMeasureSpec);\r\n    \r\n            setMeasuredDimension(width, height);\r\n        }\r\n    \r\n    \r\n        public void reset() {\r\n            setPivotPoint(0);\r\n    \r\n            setRotation(0);\r\n    \r\n            setX(200);\r\n            setY(400);\r\n        }\r\n    }\r\n\r\n\r\n// FixedPosLayout.java\r\n\r\n    public class FixedPosLayout extends ViewGroup {\r\n    \r\n        public FixedPosLayout(Context context) {\r\n            super(context);\r\n        }\r\n    \r\n        public FixedPosLayout(Context context, AttributeSet attrs) {\r\n            super(context, attrs);\r\n        }\r\n    \r\n        public FixedPosLayout(Context context, AttributeSet attrs, int defStyleAttr) {\r\n            super(context, attrs, defStyleAttr);\r\n        }\r\n    \r\n        @Override\r\n        protected void onLayout(boolean changed, int l, int t, int r, int b) {\r\n            int count = getChildCount();\r\n    \r\n            for (int i = 0; i&lt;count; ++i) {\r\n                View child = getChildAt(i);\r\n    \r\n                FixedPosLayout.LayoutParams params =\r\n                        (FixedPosLayout.LayoutParams) child.getLayoutParams();\r\n    \r\n                int left = params.x;\r\n                int top = params.y;\r\n    \r\n                child.layout(left, top,\r\n                        left + child.getMeasuredWidth(),\r\n                        top + child.getMeasuredHeight());\r\n            }\r\n        }\r\n    \r\n        @Override\r\n        protected void onMeasure(int widthMeasureSpec, int heightMeasureSpec) {\r\n            // Measure this view\r\n            super.onMeasure(widthMeasureSpec, heightMeasureSpec);\r\n    \r\n            // Measure children\r\n            int count = getChildCount();\r\n            for (int i = 0; i&lt;count; ++i) {\r\n                View child = getChildAt(i);\r\n    \r\n                FixedPosLayout.LayoutParams lp =\r\n                        (FixedPosLayout.LayoutParams) child.getLayoutParams();\r\n    \r\n                int childWidthMeasureSpec =\r\n                        MeasureSpec.makeMeasureSpec(lp.width, MeasureSpec.EXACTLY);\r\n    \r\n                int childHeightMeasureSpec =\r\n                        MeasureSpec.makeMeasureSpec(lp.height, MeasureSpec.EXACTLY);\r\n    \r\n                child.measure(childWidthMeasureSpec, childHeightMeasureSpec);\r\n            }\r\n        }\r\n    \r\n        public static class LayoutParams extends ViewGroup.LayoutParams {\r\n            public int x;\r\n            public int y;\r\n    \r\n            public LayoutParams(int x, int y, int width, int height) {\r\n                super(width, height);\r\n                this.x = x;\r\n                this.y = y;\r\n            }\r\n        }\r\n    }\r\n\r\nactivity_main.xml\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\r\n    &lt;androidx.constraintlayout.widget.ConstraintLayout\r\n        xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\r\n        xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;\r\n        xmlns:tools=&quot;http://schemas.android.com/tools&quot;\r\n        tools:context=&quot;.MainActivity&quot;\r\n        android:layout_height=&quot;match_parent&quot;\r\n        android:layout_width=&quot;match_parent&quot;&gt;\r\n    \r\n        &lt;com.abdo.rotateviewquestion.FixedPosLayout\r\n            android:layout_width=&quot;0dp&quot;\r\n            android:layout_height=&quot;0dp&quot;\r\n            android:id=&quot;@+id/fixedPosLayout&quot;\r\n            app:layout_constraintStart_toStartOf=&quot;parent&quot;\r\n            app:layout_constraintEnd_toEndOf=&quot;parent&quot;\r\n            app:layout_constraintTop_toTopOf=&quot;parent&quot;\r\n            app:layout_constraintBottom_toTopOf=&quot;@id/barrier_horizontal_top&quot;/&gt;\r\n        \r\n        &lt;ImageButton\r\n            android:id=&quot;@+id/moveRightButton&quot;\r\n            android:layout_width=&quot;wrap_content&quot;\r\n            android:layout_height=&quot;wrap_content&quot;\r\n            android:src=&quot;@drawable/move_right&quot;\r\n            app:layout_constraintBottom_toBottomOf=&quot;parent&quot;\r\n            app:layout_constraintStart_toEndOf=&quot;@+id/barrier_vertical_right&quot;/&gt;\r\n    \r\n        &lt;ImageButton\r\n            android:id=&quot;@+id/moveLeftButton&quot;\r\n            android:layout_width=&quot;wrap_content&quot;\r\n            android:layout_height=&quot;wrap_content&quot;\r\n            android:src=&quot;@drawable/move_left&quot;\r\n            app:layout_constraintBottom_toBottomOf=&quot;parent&quot;\r\n            app:layout_constraintStart_toStartOf=&quot;parent&quot;\r\n            app:layout_constraintEnd_toStartOf=&quot;@id/barrier_vertical_left&quot;/&gt;\r\n    \r\n        &lt;ImageButton\r\n            android:id=&quot;@+id/moveUpButton&quot;\r\n            android:layout_width=&quot;wrap_content&quot;\r\n            android:layout_height=&quot;wrap_content&quot;\r\n            android:src=&quot;@drawable/move_up&quot;\r\n            app:layout_constraintBottom_toTopOf=&quot;@+id/moveBottomButton&quot;\r\n            app:layout_constraintEnd_toEndOf=&quot;@id/moveBottomButton&quot;\r\n            app:layout_constraintStart_toStartOf=&quot;@id/moveBottomButton&quot; /&gt;\r\n    \r\n        &lt;ImageButton\r\n            android:id=&quot;@+id/moveBottomButton&quot;\r\n            android:layout_width=&quot;wrap_content&quot;\r\n            android:layout_height=&quot;wrap_content&quot;\r\n            android:src=&quot;@drawable/move_down&quot;\r\n            app:layout_constraintBottom_toBottomOf=&quot;parent&quot;\r\n            app:layout_constraintStart_toEndOf=&quot;@+id/moveLeftButton&quot;/&gt;\r\n    \r\n        &lt;ImageButton\r\n            android:id=&quot;@+id/rotateLeftButton&quot;\r\n            android:layout_width=&quot;70dp&quot;\r\n            android:layout_height=&quot;wrap_content&quot;\r\n            android:src=&quot;@drawable/rotate_left&quot;\r\n            app:layout_constraintEnd_toEndOf=&quot;parent&quot;\r\n            app:layout_constraintBottom_toBottomOf=&quot;parent&quot; /&gt;\r\n        \r\n        &lt;ImageButton\r\n            android:id=&quot;@+id/rotateRightButton&quot;\r\n            android:layout_width=&quot;70dp&quot;\r\n            android:layout_height=&quot;wrap_content&quot;\r\n            android:src=&quot;@drawable/rotate_right&quot;\r\n            app:layout_constraintEnd_toStartOf=&quot;@id/rotateLeftButton&quot;\r\n            app:layout_constraintBottom_toBottomOf=&quot;parent&quot; /&gt;\r\n        \r\n        &lt;Spinner\r\n            android:id=&quot;@+id/pivotPointSpinner&quot;\r\n            android:layout_width=&quot;wrap_content&quot;\r\n            android:layout_height=&quot;wrap_content&quot;\r\n            app:layout_constraintEnd_toEndOf=&quot;parent&quot;\r\n            app:layout_constraintTop_toBottomOf=&quot;@id/barrier_horizontal_top&quot;/&gt;\r\n    \r\n        &lt;androidx.appcompat.widget.AppCompatButton\r\n            android:id=&quot;@+id/resetButton&quot;\r\n            android:layout_width=&quot;wrap_content&quot;\r\n            android:layout_height=&quot;wrap_content&quot;\r\n            android:text=&quot;Reset&quot;\r\n            app:layout_constraintTop_toBottomOf=&quot;@id/barrier_horizontal_top&quot;\r\n            app:layout_constraintEnd_toStartOf=&quot;@id/pivotPointSpinner&quot;/&gt;\r\n    \r\n        &lt;androidx.constraintlayout.widget.Barrier\r\n            android:id=&quot;@+id/barrier_vertical_right&quot;\r\n            android:layout_width=&quot;wrap_content&quot;\r\n            android:layout_height=&quot;wrap_content&quot;\r\n            app:barrierDirection=&quot;right&quot;\r\n            app:constraint_referenced_ids=&quot;moveUpButton, moveBottomButton&quot;/&gt;\r\n    \r\n    \r\n        &lt;androidx.constraintlayout.widget.Barrier\r\n            android:id=&quot;@+id/barrier_vertical_left&quot;\r\n            android:layout_width=&quot;wrap_content&quot;\r\n            android:layout_height=&quot;wrap_content&quot;\r\n            app:barrierDirection=&quot;left&quot;\r\n            app:constraint_referenced_ids=&quot;moveUpButton, moveBottomButton&quot;/&gt;\r\n    \r\n        &lt;androidx.constraintlayout.widget.Barrier\r\n            android:id=&quot;@+id/barrier_horizontal_top&quot;\r\n            android:layout_width=&quot;wrap_content&quot;\r\n            android:layout_height=&quot;wrap_content&quot;\r\n            app:barrierDirection=&quot;top&quot;\r\n            app:constraint_referenced_ids=&quot;moveUpButton, rotateLeftButton, rotateRightButton&quot;/&gt;\r\n        \r\n    &lt;/androidx.constraintlayout.widget.ConstraintLayout&gt;\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/baia0.gif\r\n  [2]: https://i.stack.imgur.com/GG2yF.gif","title":"Issue with Custom View Position Jump when Changing Pivot Point","body":"<p>I'm encountering an unexpected behavior in my Android app involving a custom view named <code>MyView</code>. I'm attempting to achieve both translation and rotation effects on this view. When the pivot point is set to the center of the view, everything work as expected. However, as soon as I change the pivot point (for instance, to &quot;Point 2&quot; selected from a spinner), the view unexpectedly jumps to a different position, as illustrated in this GIF:</p>\n<p><a href=\"https://i.stack.imgur.com/baia0.gif\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/baia0.gif\" alt=\"enter image description here\" /></a></p>\n<p><strong>Edit</strong>:</p>\n<p><strong>Observations:</strong></p>\n<ul>\n<li>The issue primarily arises when the view is rotated. If the view has no rotation (rotation = 0), changing the pivot point doesn't cause any problems.</li>\n<li>Also if before changing the pivot point, I restore the view to its initial rotation (rotation = 0) this prevent also the issue from occurring.\nTo illustrate this point further, here's an example:</li>\n</ul>\n<p><a href=\"https://i.stack.imgur.com/GG2yF.gif\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/GG2yF.gif\" alt=\"enter image description here\" /></a></p>\n<p>Could anyone kindly advise on what might be causing the view displacement when changing the pivot point and suggest potential fixes? Your help is much appreciated.</p>\n<p>Below is the complete code:</p>\n<p>// MainActivity.java</p>\n<pre><code>public class MainActivity extends AppCompatActivity {\n\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.activity_main);\n\n        FixedPosLayout fixedPosLayout = findViewById(R.id.fixedPosLayout);\n\n        MyView myView = new MyView(this);\n\n        FixedPosLayout.LayoutParams params =\n                new FixedPosLayout.LayoutParams(200, 400, 300, 80);\n\n        fixedPosLayout.addView(myView, params);\n\n        ImageButton moveLeftButton = findViewById(R.id.moveLeftButton);\n        ImageButton moveRightButton = findViewById(R.id.moveRightButton);\n        ImageButton moveUpButton = findViewById(R.id.moveUpButton);\n        ImageButton moveBottomButton = findViewById(R.id.moveBottomButton);\n\n        ImageButton rotateLeftButton = findViewById(R.id.rotateLeftButton);\n        ImageButton rotateRightButton = findViewById(R.id.rotateRightButton);\n\n        AppCompatButton resetButton = findViewById(R.id.resetButton);\n\n        Spinner spinner = findViewById(R.id.pivotPointSpinner);\n\n        float d = 10;\n        float r = 10;\n\n        moveLeftButton.setOnClickListener(v -&gt; myView.moveLeftBy(d));\n        moveRightButton.setOnClickListener(v -&gt; myView.moveRightBy(d));\n        moveUpButton.setOnClickListener(v -&gt; myView.moveUpBy(d));\n        moveBottomButton.setOnClickListener(v -&gt; myView.moveDownBy(d));\n        rotateRightButton.setOnClickListener(v -&gt; myView.rotateClockwiseBy(r));\n        rotateLeftButton.setOnClickListener(v -&gt; myView.rotateConterClockwiseBy(r));\n\n        resetButton.setOnClickListener(v -&gt; {\n            myView.reset();\n            spinner.setSelection(0); // Select first item\n        });\n\n        // Spinner\n        String[] items = {&quot;Center Point&quot;, &quot;Point 1&quot;, &quot;Point 2&quot;};\n\n        ArrayAdapter&lt;String&gt; adapter = new ArrayAdapter&lt;&gt;(this,\n                android.R.layout.simple_spinner_item, items);\n\n        adapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);\n\n        spinner.setAdapter(adapter);\n\n        // Handle spinner click\n        spinner.setOnItemSelectedListener(new AdapterView.OnItemSelectedListener() {\n            @Override\n            public void onItemSelected(AdapterView&lt;?&gt; parent, View view, int position, long id) {\n                myView.setPivotPoint(position);\n            }\n\n            @Override\n            public void onNothingSelected(AdapterView&lt;?&gt; parent) {\n                myView.setPivotPoint(0); // Set center point as default pivot point\n            }\n        });\n    }\n}\n</code></pre>\n<p>// MyView.java</p>\n<pre><code>public class MyView extends View {\n\n    public static final int RADIUS = 24; // Anchor radius\n    public static final int OFFSET = 1;\n\n    private final Paint paint;\n\n    public RectF rectPoint1;\n    public RectF rectPoint2;\n\n    public MyView(Context context) {\n        super(context);\n\n        paint = new Paint();\n        paint.setStyle(Paint.Style.STROKE);\n\n        rectPoint1 = new RectF();\n        rectPoint2 = new RectF();\n    }\n\n    public void moveRightBy(float dRight) {\n        setX(getX() + dRight);\n    }\n\n    public void moveLeftBy(float dLeft) {\n        moveRightBy(-dLeft);\n    }\n\n    public void moveDownBy(float dDown) {\n        setY(getY() + dDown);\n    }\n\n    public void moveUpBy(float dUp) {\n        moveDownBy(-dUp);\n    }\n\n    public void rotateClockwiseBy(float dDegree) {\n        setRotation(getRotation() + dDegree);\n    }\n\n    public void rotateConterClockwiseBy(float dDegree){\n        rotateClockwiseBy(-dDegree);\n    }\n\n    public void setPivotPoint(int position) {\n        switch (position) {\n            // Set center point as pivot\n            case 0: {\n                float width = getWidth();\n                float height = getHeight();\n\n                setPivotX(width/2);\n                setPivotY(height/2);\n                break;\n            }\n\n            // Set Point 1 as pivot\n            case 1: {\n                setPivotX(rectPoint1.centerX());\n                setPivotY(rectPoint1.centerY());\n                break;\n            }\n\n            // Set Point 2 as pivot\n            case 2: {\n                setPivotX(rectPoint2.centerX());\n                setPivotY(rectPoint2.centerY());\n                break;\n            }\n        }\n    }\n\n    @Override\n    protected void onDraw(Canvas canvas) {\n        float width = getWidth();\n        float height = getHeight();\n\n        //Draw line between anchor points\n        canvas.drawLine(\n                rectPoint1.centerX(), rectPoint1.centerY(),\n                rectPoint2.centerX(), rectPoint2.centerY(), paint);\n\n        //Draw anchor circle\n        canvas.drawCircle(rectPoint1.centerX(), rectPoint1.centerY(), RADIUS, paint);\n        canvas.drawCircle(rectPoint2.centerX(), rectPoint2.centerY(), RADIUS, paint);\n\n        //Draw bounding rect\n        canvas.drawRect(OFFSET, OFFSET, width - OFFSET, height - OFFSET, paint);\n\n        // Draw anchors label\n        canvas.drawText(&quot;1&quot;, rectPoint1.centerX(), rectPoint1.centerY(), paint);\n        canvas.drawText(&quot;2&quot;, rectPoint2.centerX(), rectPoint2.centerY(), paint);\n\n        // Draw small circle at the center\n        canvas.drawCircle(width/2f, height/2f, 4, paint);\n    }\n\n    @Override\n    protected void onSizeChanged(int w, int h, int oldw, int oldh) {\n        //Recompute anchors rect\n        rectPoint1.set(\n                OFFSET, h /2f - RADIUS + OFFSET,\n                2*RADIUS, h /2f + RADIUS - OFFSET\n        );\n\n        rectPoint2.set(\n                w - 2*RADIUS, h /2f - RADIUS + OFFSET,\n                w - OFFSET, h /2f + RADIUS - OFFSET\n        );\n    }\n\n    @Override\n    protected void onMeasure(int widthMeasureSpec, int heightMeasureSpec) {\n        // Measure exactly\n        int width = MeasureSpec.getSize(widthMeasureSpec);\n        int height = MeasureSpec.getSize(heightMeasureSpec);\n\n        setMeasuredDimension(width, height);\n    }\n\n\n    public void reset() {\n        setPivotPoint(0);\n\n        setRotation(0);\n\n        setX(200);\n        setY(400);\n    }\n}\n</code></pre>\n<p>// FixedPosLayout.java</p>\n<pre><code>public class FixedPosLayout extends ViewGroup {\n\n    public FixedPosLayout(Context context) {\n        super(context);\n    }\n\n    public FixedPosLayout(Context context, AttributeSet attrs) {\n        super(context, attrs);\n    }\n\n    public FixedPosLayout(Context context, AttributeSet attrs, int defStyleAttr) {\n        super(context, attrs, defStyleAttr);\n    }\n\n    @Override\n    protected void onLayout(boolean changed, int l, int t, int r, int b) {\n        int count = getChildCount();\n\n        for (int i = 0; i&lt;count; ++i) {\n            View child = getChildAt(i);\n\n            FixedPosLayout.LayoutParams params =\n                    (FixedPosLayout.LayoutParams) child.getLayoutParams();\n\n            int left = params.x;\n            int top = params.y;\n\n            child.layout(left, top,\n                    left + child.getMeasuredWidth(),\n                    top + child.getMeasuredHeight());\n        }\n    }\n\n    @Override\n    protected void onMeasure(int widthMeasureSpec, int heightMeasureSpec) {\n        // Measure this view\n        super.onMeasure(widthMeasureSpec, heightMeasureSpec);\n\n        // Measure children\n        int count = getChildCount();\n        for (int i = 0; i&lt;count; ++i) {\n            View child = getChildAt(i);\n\n            FixedPosLayout.LayoutParams lp =\n                    (FixedPosLayout.LayoutParams) child.getLayoutParams();\n\n            int childWidthMeasureSpec =\n                    MeasureSpec.makeMeasureSpec(lp.width, MeasureSpec.EXACTLY);\n\n            int childHeightMeasureSpec =\n                    MeasureSpec.makeMeasureSpec(lp.height, MeasureSpec.EXACTLY);\n\n            child.measure(childWidthMeasureSpec, childHeightMeasureSpec);\n        }\n    }\n\n    public static class LayoutParams extends ViewGroup.LayoutParams {\n        public int x;\n        public int y;\n\n        public LayoutParams(int x, int y, int width, int height) {\n            super(width, height);\n            this.x = x;\n            this.y = y;\n        }\n    }\n}\n</code></pre>\n<p>activity_main.xml</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\n&lt;androidx.constraintlayout.widget.ConstraintLayout\n    xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\n    xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;\n    xmlns:tools=&quot;http://schemas.android.com/tools&quot;\n    tools:context=&quot;.MainActivity&quot;\n    android:layout_height=&quot;match_parent&quot;\n    android:layout_width=&quot;match_parent&quot;&gt;\n\n    &lt;com.abdo.rotateviewquestion.FixedPosLayout\n        android:layout_width=&quot;0dp&quot;\n        android:layout_height=&quot;0dp&quot;\n        android:id=&quot;@+id/fixedPosLayout&quot;\n        app:layout_constraintStart_toStartOf=&quot;parent&quot;\n        app:layout_constraintEnd_toEndOf=&quot;parent&quot;\n        app:layout_constraintTop_toTopOf=&quot;parent&quot;\n        app:layout_constraintBottom_toTopOf=&quot;@id/barrier_horizontal_top&quot;/&gt;\n    \n    &lt;ImageButton\n        android:id=&quot;@+id/moveRightButton&quot;\n        android:layout_width=&quot;wrap_content&quot;\n        android:layout_height=&quot;wrap_content&quot;\n        android:src=&quot;@drawable/move_right&quot;\n        app:layout_constraintBottom_toBottomOf=&quot;parent&quot;\n        app:layout_constraintStart_toEndOf=&quot;@+id/barrier_vertical_right&quot;/&gt;\n\n    &lt;ImageButton\n        android:id=&quot;@+id/moveLeftButton&quot;\n        android:layout_width=&quot;wrap_content&quot;\n        android:layout_height=&quot;wrap_content&quot;\n        android:src=&quot;@drawable/move_left&quot;\n        app:layout_constraintBottom_toBottomOf=&quot;parent&quot;\n        app:layout_constraintStart_toStartOf=&quot;parent&quot;\n        app:layout_constraintEnd_toStartOf=&quot;@id/barrier_vertical_left&quot;/&gt;\n\n    &lt;ImageButton\n        android:id=&quot;@+id/moveUpButton&quot;\n        android:layout_width=&quot;wrap_content&quot;\n        android:layout_height=&quot;wrap_content&quot;\n        android:src=&quot;@drawable/move_up&quot;\n        app:layout_constraintBottom_toTopOf=&quot;@+id/moveBottomButton&quot;\n        app:layout_constraintEnd_toEndOf=&quot;@id/moveBottomButton&quot;\n        app:layout_constraintStart_toStartOf=&quot;@id/moveBottomButton&quot; /&gt;\n\n    &lt;ImageButton\n        android:id=&quot;@+id/moveBottomButton&quot;\n        android:layout_width=&quot;wrap_content&quot;\n        android:layout_height=&quot;wrap_content&quot;\n        android:src=&quot;@drawable/move_down&quot;\n        app:layout_constraintBottom_toBottomOf=&quot;parent&quot;\n        app:layout_constraintStart_toEndOf=&quot;@+id/moveLeftButton&quot;/&gt;\n\n    &lt;ImageButton\n        android:id=&quot;@+id/rotateLeftButton&quot;\n        android:layout_width=&quot;70dp&quot;\n        android:layout_height=&quot;wrap_content&quot;\n        android:src=&quot;@drawable/rotate_left&quot;\n        app:layout_constraintEnd_toEndOf=&quot;parent&quot;\n        app:layout_constraintBottom_toBottomOf=&quot;parent&quot; /&gt;\n    \n    &lt;ImageButton\n        android:id=&quot;@+id/rotateRightButton&quot;\n        android:layout_width=&quot;70dp&quot;\n        android:layout_height=&quot;wrap_content&quot;\n        android:src=&quot;@drawable/rotate_right&quot;\n        app:layout_constraintEnd_toStartOf=&quot;@id/rotateLeftButton&quot;\n        app:layout_constraintBottom_toBottomOf=&quot;parent&quot; /&gt;\n    \n    &lt;Spinner\n        android:id=&quot;@+id/pivotPointSpinner&quot;\n        android:layout_width=&quot;wrap_content&quot;\n        android:layout_height=&quot;wrap_content&quot;\n        app:layout_constraintEnd_toEndOf=&quot;parent&quot;\n        app:layout_constraintTop_toBottomOf=&quot;@id/barrier_horizontal_top&quot;/&gt;\n\n    &lt;androidx.appcompat.widget.AppCompatButton\n        android:id=&quot;@+id/resetButton&quot;\n        android:layout_width=&quot;wrap_content&quot;\n        android:layout_height=&quot;wrap_content&quot;\n        android:text=&quot;Reset&quot;\n        app:layout_constraintTop_toBottomOf=&quot;@id/barrier_horizontal_top&quot;\n        app:layout_constraintEnd_toStartOf=&quot;@id/pivotPointSpinner&quot;/&gt;\n\n    &lt;androidx.constraintlayout.widget.Barrier\n        android:id=&quot;@+id/barrier_vertical_right&quot;\n        android:layout_width=&quot;wrap_content&quot;\n        android:layout_height=&quot;wrap_content&quot;\n        app:barrierDirection=&quot;right&quot;\n        app:constraint_referenced_ids=&quot;moveUpButton, moveBottomButton&quot;/&gt;\n\n\n    &lt;androidx.constraintlayout.widget.Barrier\n        android:id=&quot;@+id/barrier_vertical_left&quot;\n        android:layout_width=&quot;wrap_content&quot;\n        android:layout_height=&quot;wrap_content&quot;\n        app:barrierDirection=&quot;left&quot;\n        app:constraint_referenced_ids=&quot;moveUpButton, moveBottomButton&quot;/&gt;\n\n    &lt;androidx.constraintlayout.widget.Barrier\n        android:id=&quot;@+id/barrier_horizontal_top&quot;\n        android:layout_width=&quot;wrap_content&quot;\n        android:layout_height=&quot;wrap_content&quot;\n        app:barrierDirection=&quot;top&quot;\n        app:constraint_referenced_ids=&quot;moveUpButton, rotateLeftButton, rotateRightButton&quot;/&gt;\n    \n&lt;/androidx.constraintlayout.widget.ConstraintLayout&gt;\n</code></pre>\n"},{"tags":["java","3d"],"comments":[{"owner":{"account_id":682692,"reputation":49061,"user_id":535275,"accept_rate":91,"display_name":"Scott Hunter"},"score":0,"creation_date":1691685498,"post_id":76877699,"comment_id":135528177,"body_markdown":"Please post your code as text, not a link to text.","body":"Please post your code as text, not a link to text."},{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1691701912,"post_id":76877699,"comment_id":135531127,"body_markdown":"Please trim your code to make it easier to find your problem. Follow these guidelines to create a [minimal reproducible example](https://stackoverflow.com/help/minimal-reproducible-example).","body":"Please trim your code to make it easier to find your problem. Follow these guidelines to create a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>."},{"owner":{"account_id":23308839,"reputation":36,"user_id":17388407,"display_name":"Caleb Thoburn"},"score":0,"creation_date":1692659307,"post_id":76877699,"comment_id":135651275,"body_markdown":"I would like to note that replacing this:\n\nMatrix3 transform = headingTransform.multiply(pitchTransform);\n\nwith this:\n\nMatrix3 transform = pitchTransform.multiply(headingTransform);\n\nFixes the x rotation, but ruins the y rotation.","body":"I would like to note that replacing this:  Matrix3 transform = headingTransform.multiply(pitchTransform);  with this:  Matrix3 transform = pitchTransform.multiply(headingTransform);  Fixes the x rotation, but ruins the y rotation."}],"owner":{"account_id":23308839,"reputation":36,"user_id":17388407,"display_name":"Caleb Thoburn"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":39,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1691686001,"creation_date":1691685304,"question_id":76877699,"body_markdown":"I have recently been working on a 3D renderer in java for the first time, It works well when the user drags it along the y axis, but dragging an object along the x axis doesn&#39;t always properly rotate it relitive to the user.[![cube example](https://i.stack.imgur.com/36zSX.gif)](https://i.stack.imgur.com/36zSX.gif) This cube only rotates along the x axis correctly when the green side is on the top. Otherwise it will roll, or spin backwards. This is my code:\r\n\r\n        package Main;\r\n        \r\n        import java.awt.BorderLayout;\r\n        import java.awt.Color;\r\n        import java.awt.Container;\r\n        import java.awt.Graphics;\r\n        import java.awt.Graphics2D;\r\n        import java.awt.Image;\r\n        import java.awt.MouseInfo;\r\n        import java.awt.event.MouseEvent;\r\n        import java.awt.event.MouseMotionListener;\r\n        import java.awt.geom.Path2D;\r\n        import java.awt.image.BufferedImage;\r\n        import java.util.ArrayList;\r\n        import java.util.Arrays;\r\n        import java.util.List;\r\n        import java.util.stream.Collectors;\r\n\r\n        import javax.swing.JFrame;\r\n        import javax.swing.JPanel;\r\n\r\n\r\n        public class Main {\r\n\t\r\n\t        public static void main(String[] args) {\r\n\t\t\r\n\t\t        final int[] x = {0};\r\n\t\t        final int[] y = {0};\r\n\t\t\r\n\t\t        JFrame frame = new JFrame();\r\n\t\t        Container pane = frame.getContentPane();\r\n\t\t        pane.setLayout(new BorderLayout());\r\n\t\t\r\n\t\t        JPanel renderPanel = new JPanel() {\r\n\t\t\r\n\t\t\t        public void paintComponent(Graphics g) {\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t        Graphics2D g2 = (Graphics2D) g;\r\n\t\t\t\t        g2.setColor(Color.BLACK);\r\n\t\t\t\t        g2.fillRect(0, 0, getWidth(), getHeight());\r\n\t\t\t\t\r\n\t\t\t\t        List&lt;Polygon&gt; polygons = new ArrayList&lt;&gt;();\r\n\t\t\t\t        polygons.add(new Polygon(new ArrayList&lt;&gt;(), Color.WHITE));\r\n\t\t\t\t        polygons.get(0).vertices.add(new Point(100, 100, 100));\r\n\t\t\t\t        polygons.get(0).vertices.add(new Point(-100, 100, 100));\r\n\t\t\t\t        polygons.get(0).vertices.add(new Point(-100, -100, 100));\r\n\t\t\t\t        polygons.get(0).vertices.add(new Point(100, -100, 100));\r\n\t\t\t\t\r\n\t\t\t\t        polygons.add(new Polygon(new ArrayList&lt;&gt;(), Color.RED));\r\n\t\t\t\t        polygons.get(1).vertices.add(new Point(100, 100, -100));\r\n\t\t\t\t        polygons.get(1).vertices.add(new Point(-100, 100, -100));\r\n\t\t\t\t        polygons.get(1).vertices.add(new Point(-100, -100, -100));\r\n\t\t\t\t        polygons.get(1).vertices.add(new Point(100, -100, -100));\r\n\r\n\t\t\t\t        polygons.add(new Polygon(new ArrayList&lt;&gt;(), Color.BLUE));\r\n\t\t\t\t        polygons.get(2).vertices.add(new Point(100, 100, 100));\r\n\t\t\t\t        polygons.get(2).vertices.add(new Point(-100, 100, 100));\r\n\t\t\t\t        polygons.get(2).vertices.add(new Point(-100, 100, -100));\r\n\t\t\t\t        polygons.get(2).vertices.add(new Point(100, 100, -100));\r\n\t\t\t\r\n\t\t\t\t        polygons.add(new Polygon(new ArrayList&lt;&gt;(), Color.GREEN));\r\n\t\t\t\t        polygons.get(3).vertices.add(new Point(-100, -100, 100));\r\n\t\t\t\t        polygons.get(3).vertices.add(new Point(-100, -100, -100));\r\n\t\t\t\t        polygons.get(3).vertices.add(new Point(100, -100, -100));\r\n\t\t\t\t        polygons.get(3).vertices.add(new Point(100, -100, 100));\r\n\t\t\t\t\r\n\t\t\t\t        polygons.add(new Polygon(new ArrayList&lt;&gt;(), Color.YELLOW));\r\n\t\t\t\t        polygons.get(4).vertices.add(new Point(100, 100, 100));\r\n\t\t\t\t        polygons.get(4).vertices.add(new Point(100, -100, 100));\r\n\t\t\t\t        polygons.get(4).vertices.add(new Point(100, -100, -100));\r\n\t\t\t\t        polygons.get(4).vertices.add(new Point(100, 100, -100));\r\n\r\n\t\t\t\t        polygons.add(new Polygon(new ArrayList&lt;&gt;(), Color.ORANGE));\r\n\t\t\t\t        polygons.get(5).vertices.add(new Point(-100, 100, 100));\r\n\t\t\t\t        polygons.get(5).vertices.add(new Point(-100, -100, 100));\r\n\t\t\t\t        polygons.get(5).vertices.add(new Point(-100, -100, -100));\r\n\t\t\t\t        polygons.get(5).vertices.add(new Point(-100, 100, -100));\r\n\t\t\t\t\r\n\t\t\t\t        double heading = Math.toRadians(x[0]);\r\n\t\t\t\t        Matrix3 headingTransform = new Matrix3(new double[] {\r\n\t\t\t\t\t\t        Math.cos(heading), 0, -Math.sin(heading),\r\n\t\t\t\t\t\t        0,1,0,\r\n\t\t\t\t\t\t        Math.sin(heading), 0, Math.cos(heading)\r\n\t\t\t\t        });\r\n\t\t\t\t\r\n\t\t\t\t        double pitch = Math.toRadians(y[0]);\r\n\t\t\t\t        Matrix3 pitchTransform = new Matrix3(new double[] {\r\n\t\t\t\t\t\t        1, 0, 0,\r\n\t\t\t\t\t\t        0, Math.cos(pitch), Math.sin(pitch),\r\n\t\t\t\t\t\t        0, -Math.sin(pitch), Math.cos(pitch)\r\n\t\t\t\t        });\r\n\t\t\t\t\r\n\t\t\t\t        Matrix3 transform = headingTransform.multiply(pitchTransform);\r\n\t\t\t\t\r\n\t\t\t\t        g2.translate(getWidth() / 2, getHeight() / 2);\r\n\t\t\t\t\r\n\t\t\t\t        BufferedImage img = new BufferedImage(frame.getWidth(), frame.getHeight(), BufferedImage.TYPE_INT_ARGB);\r\n\r\n\t\t\t\t        double[] zBuffer = new double[img.getWidth() * img.getHeight()];\r\n\r\n\t\t\t\t        for (int q = 0; q &lt; zBuffer.length; q++) {\r\n\t\t\t\t            zBuffer[q] = Double.NEGATIVE_INFINITY;\r\n\t\t\t\t        }\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t        for (Polygon polygon : polygons) {\r\n\t\t\t\t\t        Polygon transformedPolygon = new Polygon(new ArrayList&lt;&gt;(), polygon.color);\r\n\t\t\t\t\t        for(Point point : polygon.vertices) {\r\n\t\t\t\t\t\ttransformedPolygon.vertices.add(transform.transform(point));\r\n\t\t\t\t\t        }\r\n\t\t\t\t\t\r\n\t\t\t\t\t        double minX = Double.POSITIVE_INFINITY;\r\n\t\t\t\t\t        double maxX = Double.NEGATIVE_INFINITY;\r\n\t\t\t\t\t        double minY = Double.POSITIVE_INFINITY;\r\n\t\t\t\t\t        double maxY = Double.NEGATIVE_INFINITY;\r\n\t\t\t\t\t\r\n\t\t\t\t\t        for (Point point : transformedPolygon.vertices) {\r\n\t\t\t\t\t            minX = Math.min(minX, point.x);\r\n\t\t\t\t\t            maxX = Math.max(maxX, point.x);\r\n\t\t\t\t\t            minY = Math.min(minY, point.y);\r\n\t\t\t\t\t            maxY = Math.max(maxY, point.y);\r\n\t\t\t\t        \t}\r\n\t\t\t\t\t\r\n\t\t\t\t        \tminX = Math.max(-frame.getWidth()/2, minX);\r\n\t\t\t\t        \tmaxX = Math.min(frame.getWidth(), maxX);\r\n\t\t\t\t        \tminY = Math.max(-frame.getHeight()/2, minY);\r\n\t\t\t\t        \tmaxY = Math.min(frame.getHeight(), maxY);\r\n\t\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t        \tfor (int y = (int) minY; y &lt;= maxY; y++) {\r\n\t\t\t\t\t        \t\tfor (int x = (int) minX; x &lt;= maxX; x++) {\r\n\t\t\t\t\t\t\t        \tPoint pixel = new Point(x, y, 0);\r\n\t\t\t\t\t\t\t        \tif (transformedPolygon.isPointInsidePolygon(pixel)) {\r\n\t\t\t\t\t\t\t        \t\tdouble depth = 0;\r\n\t\t\t\t\t\t\t        \t\tfor(Point point: transformedPolygon.vertices) {\r\n\t\t\t\t\t\t\t\t\t        \tdepth += point.z;\r\n\t\t\t\t\t\t\t\t\t        }\r\n\t\t\t\t\t\t\t\t\t        int zIndex = ((y + frame.getHeight()/2) * img.getWidth()) + x + frame.getWidth()/2;\r\n\t\t\t\t\t\t\t\t        \tif (zBuffer[zIndex] &lt; depth) {\r\n\t\t\t\t\t\t\t\t\t        \timg.setRGB(x + frame.getWidth()/2, y + frame.getHeight()/2, transformedPolygon.color.getRGB());\r\n\t\t\t\t\t\t\t\t\t        \tzBuffer[zIndex] = depth;\r\n\t\t\t\t\t\t\t\t\t        }\r\n\t\t\t\t\t\t\t\t        }\r\n\t\t\t\t\t\t\t        }\r\n\t\t\t\t\t        \t} \r\n\t\t\t\t\t        g2.drawImage(img, -frame.getWidth()/2, -frame.getHeight()/2, null);\t\r\n\t\t\t\t        }\r\n\t\t\t        }\r\n\t        \t};\r\n\t\t\r\n\t\t        renderPanel.addMouseMotionListener(new MouseMotionListener() {\r\n\t\t\t        Point mousePos = new Point(MouseInfo.getPointerInfo().getLocation().x,MouseInfo.getPointerInfo().getLocation().y, 0);\r\n\t\t\t        Point lastMousePosition = new Point(0, 0, 0);\r\n\t\t\t        @Override\r\n\t\t\t        public void mouseDragged(MouseEvent e) {\r\n\t\t\t        \tmousePos = new Point(MouseInfo.getPointerInfo().getLocation().x,MouseInfo.getPointerInfo().getLocation().y, 0);\r\n\t\t\t\t        x[0] += (mousePos.x - lastMousePosition.x);\r\n\t\t\t\t        y[0] -= (mousePos.y - lastMousePosition.y);\r\n\t\t\t        \tlastMousePosition.x = mousePos.x;\r\n\t\t\t        \tlastMousePosition.y = mousePos.y;\r\n\t\t\t        \trenderPanel.repaint();\r\n\t\t        \t}\r\n\r\n\t\t\t        @Override\r\n\t\t\t        public void mouseMoved(MouseEvent e) {\r\n\t\t\t        \tif (e.getButton() != MouseEvent.BUTTON1) {\r\n\t\t\t\t        \tmousePos = new Point(MouseInfo.getPointerInfo().getLocation().x,MouseInfo.getPointerInfo().getLocation().y, 0);\r\n\t\t\t\t        \tlastMousePosition.x = mousePos.x;\r\n\t\t\t\t\t        lastMousePosition.y = mousePos.y;\r\n\t\t\t\t        }\r\n\t\t\t        }\r\n\t\t        });\r\n\t\t\r\n\t\t        pane.add(renderPanel, BorderLayout.CENTER);\r\n\t\t\r\n\t\t        frame.setSize(600, 600);\r\n\t\t        frame.setVisible(true);\r\n\t        }\r\n        }\r\n        class Point {\r\n\t        double x;\r\n\t        double y;\r\n\t        double z;\r\n\t        Point(double x, double y, double z) {\r\n\t\t        this.x = x;\r\n\t\t        this.y = y;\r\n\t\t        this.z = z;\r\n\t        }\r\n        }\r\n\r\n        class Polygon {\r\n\t        ArrayList&lt;Point&gt; vertices;\r\n\t        Color color;\r\n\t        Polygon(ArrayList&lt;Point&gt; verticies, Color color) {\r\n\t        \tthis.vertices = verticies;\r\n\t        \tthis.color = color;\r\n\t        }\r\n\t\r\n\t        boolean isPointOnLine(Point p, Point p1, Point p2) {\r\n\t            if (p.x &lt;= Math.max(p1.x, p2.x)\r\n\t                    &amp;&amp; p.x &gt;= Math.min(p1.x, p2.x)\r\n\t                    &amp;&amp; (p.y &lt;= Math.max(p1.y, p2.y)\r\n\t                        &amp;&amp; p.y &gt;= Math.min(p1.y, p2.y))) {\r\n\t            \treturn true;\r\n\t            }else {\r\n\t                return false;\r\n\t            }\t     \r\n\t        }\r\n\t\r\n\t        int direction(Point p, Point q, Point r) {\r\n\t            return (int) ((q.y - p.y) * (r.x - q.x) - (q.x - p.x) * (r.y - q.y));\r\n\t        }\r\n\t\r\n            public boolean isPointInsidePolygon(Point point) {\r\n    \t        Point outsidePoint = new Point(99999, point.y,0);\r\n    \t        int intersections = 0;\r\n    \t        int i;\r\n    \t        for(i = 0; i &lt; this.vertices.size(); i++) {\r\n    \t\t        Point sidePoint1 = this.vertices.get(i);\r\n    \t\t        Point sidePoint2 = this.vertices.get((i+1) % this.vertices.size());\r\n    \t\t\r\n    \t            int d1 = direction(point, outsidePoint, sidePoint1);\r\n    \t            int d2 = direction(point, outsidePoint, sidePoint2);\r\n    \t            int d3 = direction(sidePoint1, sidePoint2, point);\r\n    \t            int d4 = direction(sidePoint1, sidePoint2, outsidePoint);\r\n    \t    \r\n    \t            if ((((d1 &gt; 0 &amp;&amp; d2 &lt; 0) || (d1 &lt; 0 &amp;&amp; d2 &gt; 0)) &amp;&amp; ((d3 &gt; 0 &amp;&amp; d4 &lt; 0) || (d3 &lt; 0 &amp;&amp; d4 &gt; 0)))) {\r\n    \t    \t        intersections++;\r\n    \t            }   \r\n    \t        }\r\n    \t\r\n    \t        if(intersections % 2 == 1) {\r\n    \t\t        if(intersections != 1 &amp;&amp; intersections != 0) {\r\n        \t        \tSystem.out.print(intersections);\r\n    \t\t        }\r\n    \t\t        return true;\r\n            \t}else {\r\n    \t        \treturn false;\r\n    \t        }\r\n            }\r\n        }\r\n\r\n        class Matrix3 {\r\n        \tdouble[] values;\r\n        \tMatrix3(double[] values) {\r\n\t        \tthis.values = values;\r\n\t        }\r\n\t        Matrix3 multiply(Matrix3 other) {\r\n\t        \tdouble[] result = new double[9];\r\n\t        \tfor (int row = 0; row &lt; 3; row++) {\r\n\t\t        \tfor (int col = 0; col &lt; 3; col++) {\r\n\t\t\t        \tfor (int i = 0; i &lt; 3; i++) {\r\n\t\t\t        \t\tresult[row * 3 + col] += this.values[row * 3 + i] * other.values[i * 3 + col];\r\n\t\t\t\t        }\r\n\t\t\t        }\r\n\t        \t}\r\n\t\t        return new Matrix3(result);\r\n\t        }\r\n\t        Point transform(Point v) {\r\n\t\t\r\n\t\t        return new Point(\r\n\t\t        \tv.x * values[0] + v.y * values[3] + v.z * values[6],\r\n\t\t\t        v.x * values[1] + v.y * values[4] + v.z * values[7],\r\n\t\t        \tv.x * values[2] + v.y * values[5] + v.z * values[8]\r\n\t\t\t\r\n\t\t        );\r\n\t        }\r\n        }\r\n\r\nI thought maybe I got my matricies values incorrect, but I checked them with several sources and they appear right.","title":"3D object in java won&#39;t rotate properly along the x axis","body":"<p>I have recently been working on a 3D renderer in java for the first time, It works well when the user drags it along the y axis, but dragging an object along the x axis doesn't always properly rotate it relitive to the user.<a href=\"https://i.stack.imgur.com/36zSX.gif\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/36zSX.gif\" alt=\"cube example\" /></a> This cube only rotates along the x axis correctly when the green side is on the top. Otherwise it will roll, or spin backwards. This is my code:</p>\n<pre><code>    package Main;\n    \n    import java.awt.BorderLayout;\n    import java.awt.Color;\n    import java.awt.Container;\n    import java.awt.Graphics;\n    import java.awt.Graphics2D;\n    import java.awt.Image;\n    import java.awt.MouseInfo;\n    import java.awt.event.MouseEvent;\n    import java.awt.event.MouseMotionListener;\n    import java.awt.geom.Path2D;\n    import java.awt.image.BufferedImage;\n    import java.util.ArrayList;\n    import java.util.Arrays;\n    import java.util.List;\n    import java.util.stream.Collectors;\n\n    import javax.swing.JFrame;\n    import javax.swing.JPanel;\n\n\n    public class Main {\n\n        public static void main(String[] args) {\n    \n            final int[] x = {0};\n            final int[] y = {0};\n    \n            JFrame frame = new JFrame();\n            Container pane = frame.getContentPane();\n            pane.setLayout(new BorderLayout());\n    \n            JPanel renderPanel = new JPanel() {\n    \n                public void paintComponent(Graphics g) {\n                            \n                    Graphics2D g2 = (Graphics2D) g;\n                    g2.setColor(Color.BLACK);\n                    g2.fillRect(0, 0, getWidth(), getHeight());\n            \n                    List&lt;Polygon&gt; polygons = new ArrayList&lt;&gt;();\n                    polygons.add(new Polygon(new ArrayList&lt;&gt;(), Color.WHITE));\n                    polygons.get(0).vertices.add(new Point(100, 100, 100));\n                    polygons.get(0).vertices.add(new Point(-100, 100, 100));\n                    polygons.get(0).vertices.add(new Point(-100, -100, 100));\n                    polygons.get(0).vertices.add(new Point(100, -100, 100));\n            \n                    polygons.add(new Polygon(new ArrayList&lt;&gt;(), Color.RED));\n                    polygons.get(1).vertices.add(new Point(100, 100, -100));\n                    polygons.get(1).vertices.add(new Point(-100, 100, -100));\n                    polygons.get(1).vertices.add(new Point(-100, -100, -100));\n                    polygons.get(1).vertices.add(new Point(100, -100, -100));\n\n                    polygons.add(new Polygon(new ArrayList&lt;&gt;(), Color.BLUE));\n                    polygons.get(2).vertices.add(new Point(100, 100, 100));\n                    polygons.get(2).vertices.add(new Point(-100, 100, 100));\n                    polygons.get(2).vertices.add(new Point(-100, 100, -100));\n                    polygons.get(2).vertices.add(new Point(100, 100, -100));\n        \n                    polygons.add(new Polygon(new ArrayList&lt;&gt;(), Color.GREEN));\n                    polygons.get(3).vertices.add(new Point(-100, -100, 100));\n                    polygons.get(3).vertices.add(new Point(-100, -100, -100));\n                    polygons.get(3).vertices.add(new Point(100, -100, -100));\n                    polygons.get(3).vertices.add(new Point(100, -100, 100));\n            \n                    polygons.add(new Polygon(new ArrayList&lt;&gt;(), Color.YELLOW));\n                    polygons.get(4).vertices.add(new Point(100, 100, 100));\n                    polygons.get(4).vertices.add(new Point(100, -100, 100));\n                    polygons.get(4).vertices.add(new Point(100, -100, -100));\n                    polygons.get(4).vertices.add(new Point(100, 100, -100));\n\n                    polygons.add(new Polygon(new ArrayList&lt;&gt;(), Color.ORANGE));\n                    polygons.get(5).vertices.add(new Point(-100, 100, 100));\n                    polygons.get(5).vertices.add(new Point(-100, -100, 100));\n                    polygons.get(5).vertices.add(new Point(-100, -100, -100));\n                    polygons.get(5).vertices.add(new Point(-100, 100, -100));\n            \n                    double heading = Math.toRadians(x[0]);\n                    Matrix3 headingTransform = new Matrix3(new double[] {\n                            Math.cos(heading), 0, -Math.sin(heading),\n                            0,1,0,\n                            Math.sin(heading), 0, Math.cos(heading)\n                    });\n            \n                    double pitch = Math.toRadians(y[0]);\n                    Matrix3 pitchTransform = new Matrix3(new double[] {\n                            1, 0, 0,\n                            0, Math.cos(pitch), Math.sin(pitch),\n                            0, -Math.sin(pitch), Math.cos(pitch)\n                    });\n            \n                    Matrix3 transform = headingTransform.multiply(pitchTransform);\n            \n                    g2.translate(getWidth() / 2, getHeight() / 2);\n            \n                    BufferedImage img = new BufferedImage(frame.getWidth(), frame.getHeight(), BufferedImage.TYPE_INT_ARGB);\n\n                    double[] zBuffer = new double[img.getWidth() * img.getHeight()];\n\n                    for (int q = 0; q &lt; zBuffer.length; q++) {\n                        zBuffer[q] = Double.NEGATIVE_INFINITY;\n                    }\n                            \n                    for (Polygon polygon : polygons) {\n                        Polygon transformedPolygon = new Polygon(new ArrayList&lt;&gt;(), polygon.color);\n                        for(Point point : polygon.vertices) {\n                    transformedPolygon.vertices.add(transform.transform(point));\n                        }\n                \n                        double minX = Double.POSITIVE_INFINITY;\n                        double maxX = Double.NEGATIVE_INFINITY;\n                        double minY = Double.POSITIVE_INFINITY;\n                        double maxY = Double.NEGATIVE_INFINITY;\n                \n                        for (Point point : transformedPolygon.vertices) {\n                            minX = Math.min(minX, point.x);\n                            maxX = Math.max(maxX, point.x);\n                            minY = Math.min(minY, point.y);\n                            maxY = Math.max(maxY, point.y);\n                        }\n                \n                        minX = Math.max(-frame.getWidth()/2, minX);\n                        maxX = Math.min(frame.getWidth(), maxX);\n                        minY = Math.max(-frame.getHeight()/2, minY);\n                        maxY = Math.min(frame.getHeight(), maxY);\n                                    \n                            for (int y = (int) minY; y &lt;= maxY; y++) {\n                                for (int x = (int) minX; x &lt;= maxX; x++) {\n                                    Point pixel = new Point(x, y, 0);\n                                    if (transformedPolygon.isPointInsidePolygon(pixel)) {\n                                        double depth = 0;\n                                        for(Point point: transformedPolygon.vertices) {\n                                            depth += point.z;\n                                        }\n                                        int zIndex = ((y + frame.getHeight()/2) * img.getWidth()) + x + frame.getWidth()/2;\n                                        if (zBuffer[zIndex] &lt; depth) {\n                                            img.setRGB(x + frame.getWidth()/2, y + frame.getHeight()/2, transformedPolygon.color.getRGB());\n                                            zBuffer[zIndex] = depth;\n                                        }\n                                    }\n                                }\n                            } \n                        g2.drawImage(img, -frame.getWidth()/2, -frame.getHeight()/2, null); \n                    }\n                }\n            };\n    \n            renderPanel.addMouseMotionListener(new MouseMotionListener() {\n                Point mousePos = new Point(MouseInfo.getPointerInfo().getLocation().x,MouseInfo.getPointerInfo().getLocation().y, 0);\n                Point lastMousePosition = new Point(0, 0, 0);\n                @Override\n                public void mouseDragged(MouseEvent e) {\n                    mousePos = new Point(MouseInfo.getPointerInfo().getLocation().x,MouseInfo.getPointerInfo().getLocation().y, 0);\n                    x[0] += (mousePos.x - lastMousePosition.x);\n                    y[0] -= (mousePos.y - lastMousePosition.y);\n                    lastMousePosition.x = mousePos.x;\n                    lastMousePosition.y = mousePos.y;\n                    renderPanel.repaint();\n                }\n\n                @Override\n                public void mouseMoved(MouseEvent e) {\n                    if (e.getButton() != MouseEvent.BUTTON1) {\n                        mousePos = new Point(MouseInfo.getPointerInfo().getLocation().x,MouseInfo.getPointerInfo().getLocation().y, 0);\n                        lastMousePosition.x = mousePos.x;\n                        lastMousePosition.y = mousePos.y;\n                    }\n                }\n            });\n    \n            pane.add(renderPanel, BorderLayout.CENTER);\n    \n            frame.setSize(600, 600);\n            frame.setVisible(true);\n        }\n    }\n    class Point {\n        double x;\n        double y;\n        double z;\n        Point(double x, double y, double z) {\n            this.x = x;\n            this.y = y;\n            this.z = z;\n        }\n    }\n\n    class Polygon {\n        ArrayList&lt;Point&gt; vertices;\n        Color color;\n        Polygon(ArrayList&lt;Point&gt; verticies, Color color) {\n            this.vertices = verticies;\n            this.color = color;\n        }\n\n        boolean isPointOnLine(Point p, Point p1, Point p2) {\n            if (p.x &lt;= Math.max(p1.x, p2.x)\n                    &amp;&amp; p.x &gt;= Math.min(p1.x, p2.x)\n                    &amp;&amp; (p.y &lt;= Math.max(p1.y, p2.y)\n                        &amp;&amp; p.y &gt;= Math.min(p1.y, p2.y))) {\n                return true;\n            }else {\n                return false;\n            }        \n        }\n\n        int direction(Point p, Point q, Point r) {\n            return (int) ((q.y - p.y) * (r.x - q.x) - (q.x - p.x) * (r.y - q.y));\n        }\n\n        public boolean isPointInsidePolygon(Point point) {\n            Point outsidePoint = new Point(99999, point.y,0);\n            int intersections = 0;\n            int i;\n            for(i = 0; i &lt; this.vertices.size(); i++) {\n                Point sidePoint1 = this.vertices.get(i);\n                Point sidePoint2 = this.vertices.get((i+1) % this.vertices.size());\n        \n                int d1 = direction(point, outsidePoint, sidePoint1);\n                int d2 = direction(point, outsidePoint, sidePoint2);\n                int d3 = direction(sidePoint1, sidePoint2, point);\n                int d4 = direction(sidePoint1, sidePoint2, outsidePoint);\n        \n                if ((((d1 &gt; 0 &amp;&amp; d2 &lt; 0) || (d1 &lt; 0 &amp;&amp; d2 &gt; 0)) &amp;&amp; ((d3 &gt; 0 &amp;&amp; d4 &lt; 0) || (d3 &lt; 0 &amp;&amp; d4 &gt; 0)))) {\n                    intersections++;\n                }   \n            }\n    \n            if(intersections % 2 == 1) {\n                if(intersections != 1 &amp;&amp; intersections != 0) {\n                    System.out.print(intersections);\n                }\n                return true;\n            }else {\n                return false;\n            }\n        }\n    }\n\n    class Matrix3 {\n        double[] values;\n        Matrix3(double[] values) {\n            this.values = values;\n        }\n        Matrix3 multiply(Matrix3 other) {\n            double[] result = new double[9];\n            for (int row = 0; row &lt; 3; row++) {\n                for (int col = 0; col &lt; 3; col++) {\n                    for (int i = 0; i &lt; 3; i++) {\n                        result[row * 3 + col] += this.values[row * 3 + i] * other.values[i * 3 + col];\n                    }\n                }\n            }\n            return new Matrix3(result);\n        }\n        Point transform(Point v) {\n    \n            return new Point(\n                v.x * values[0] + v.y * values[3] + v.z * values[6],\n                v.x * values[1] + v.y * values[4] + v.z * values[7],\n                v.x * values[2] + v.y * values[5] + v.z * values[8]\n        \n            );\n        }\n    }\n</code></pre>\n<p>I thought maybe I got my matricies values incorrect, but I checked them with several sources and they appear right.</p>\n"},{"tags":["java","resttemplate","openapi-generator","swagger-codegen","spring-micrometer"],"owner":{"account_id":4230767,"reputation":521,"user_id":6077973,"display_name":"kagof"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":64,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1691685948,"creation_date":1691667993,"question_id":76875444,"body_markdown":"My team generates some Java code using `RestTemplate`s from an OpenAPI spec using the maven plugins for this. We have used both the `swagger-codegen-maven-plugin` and `openapi-generator-maven-plugin` which both seem to generate approximately the same code.\r\n\r\nWhen it comes to collecting metrics from these `RestTemplate`s using Micrometer, I find that the URIs aren&#39;t templated in the tags. For example, with a REST endpoint like `/customers/{cid}`, I&#39;d want the Micrometer metric to be tagged with `uri=/customers/{cid}`. However, instead we find that the metric is tagged with `uri=/customers/customer1`, `uri=/customers/customer2`, etc. This effectively makes this tag useless for us.\r\n\r\nNote from [this question](https://stackoverflow.com/questions/58942924/how-do-i-get-templated-values-in-uri-tag-for-http-client-requests-metrics-using) that if the `RestTemplate` is allowed to do the templating itself, then the metric will be tagged in the way I want.\r\n\r\nHowever, the generated code always looks like this:\r\n\r\n```java\r\nString path = UriComponentsBuilder.fromPath(&quot;/customers/{cid}&quot;).buildAndExpand(uriVariables).toUriString();\r\n```\r\n\r\nie, the templating is done *before* the `RestTemplate`, and thus the metrics are tagged with the fully fleshed out URI.\r\n\r\nOur configuration for the plugins looks like this. When using the openapi-generator version it also looks similar. I&#39;ve tried playing around with a few of the configuration parameters to no avail.\r\n\r\n```xml\r\n            &lt;plugin&gt;\r\n                &lt;groupId&gt;io.swagger&lt;/groupId&gt;\r\n                &lt;artifactId&gt;swagger-codegen-maven-plugin&lt;/artifactId&gt;\r\n                &lt;executions&gt;\r\n                    &lt;execution&gt;\r\n                        &lt;goals&gt;\r\n                            &lt;goal&gt;generate&lt;/goal&gt;\r\n                        &lt;/goals&gt;\r\n                        &lt;configuration&gt;\r\n                            &lt;inputSpec&gt;${project.basedir}/src/main/resources/my-spec.yml&lt;/inputSpec&gt;\r\n                            &lt;language&gt;java&lt;/language&gt;\r\n                            &lt;generateApiTests&gt;false&lt;/generateApiTests&gt;\r\n                            &lt;generateModelTests&gt;false&lt;/generateModelTests&gt;\r\n                            &lt;configOptions&gt;\r\n                                &lt;useOptional&gt;true&lt;/useOptional&gt;\r\n                                &lt;modelPackage&gt;${my.groupId}.model&lt;/modelPackage&gt;\r\n                                &lt;apiPackage&gt;${my.groupId}.api&lt;/apiPackage&gt;\r\n                                &lt;invokerPackage&gt;${my.groupId}&lt;/invokerPackage&gt;\r\n                                &lt;groupId&gt;${my.groupId}&lt;/groupId&gt;\r\n                                &lt;artifactId&gt;api&lt;/artifactId&gt;\r\n                                &lt;fullJavaUtil&gt;false&lt;/fullJavaUtil&gt;\r\n                                &lt;java8&gt;true&lt;/java8&gt;\r\n                                &lt;dateLibrary&gt;java8-instant&lt;/dateLibrary&gt;\r\n                            &lt;/configOptions&gt;\r\n                            &lt;library&gt;resttemplate&lt;/library&gt;\r\n                        &lt;/configuration&gt;\r\n                    &lt;/execution&gt;\r\n                &lt;/executions&gt;\r\n            &lt;/plugin&gt;\r\n```\r\n\r\n\r\nI&#39;ve looked into the configuration properties for both the swagger-codegen plugin and the openapi-generator plugin and haven&#39;t found anything that seems to help with this. Does anyone know of a way to fix/improve this behaviour?\r\n\r\nEDIT: After looking into it a bit more, the `openapi-generator-maven-plugin` version of the code does seem to do something that I&#39;d expect to use the `RestTemplate` for url templating. However in the `RestTemplateExchangeTagsProvider` the `urlTemplate` is still coming through as `null`.","title":"Improperly tagged metrics when using Swagger/OpenAPI codegen with a RestTemplate","body":"<p>My team generates some Java code using <code>RestTemplate</code>s from an OpenAPI spec using the maven plugins for this. We have used both the <code>swagger-codegen-maven-plugin</code> and <code>openapi-generator-maven-plugin</code> which both seem to generate approximately the same code.</p>\n<p>When it comes to collecting metrics from these <code>RestTemplate</code>s using Micrometer, I find that the URIs aren't templated in the tags. For example, with a REST endpoint like <code>/customers/{cid}</code>, I'd want the Micrometer metric to be tagged with <code>uri=/customers/{cid}</code>. However, instead we find that the metric is tagged with <code>uri=/customers/customer1</code>, <code>uri=/customers/customer2</code>, etc. This effectively makes this tag useless for us.</p>\n<p>Note from <a href=\"https://stackoverflow.com/questions/58942924/how-do-i-get-templated-values-in-uri-tag-for-http-client-requests-metrics-using\">this question</a> that if the <code>RestTemplate</code> is allowed to do the templating itself, then the metric will be tagged in the way I want.</p>\n<p>However, the generated code always looks like this:</p>\n<pre class=\"lang-java prettyprint-override\"><code>String path = UriComponentsBuilder.fromPath(&quot;/customers/{cid}&quot;).buildAndExpand(uriVariables).toUriString();\n</code></pre>\n<p>ie, the templating is done <em>before</em> the <code>RestTemplate</code>, and thus the metrics are tagged with the fully fleshed out URI.</p>\n<p>Our configuration for the plugins looks like this. When using the openapi-generator version it also looks similar. I've tried playing around with a few of the configuration parameters to no avail.</p>\n<pre class=\"lang-xml prettyprint-override\"><code>            &lt;plugin&gt;\n                &lt;groupId&gt;io.swagger&lt;/groupId&gt;\n                &lt;artifactId&gt;swagger-codegen-maven-plugin&lt;/artifactId&gt;\n                &lt;executions&gt;\n                    &lt;execution&gt;\n                        &lt;goals&gt;\n                            &lt;goal&gt;generate&lt;/goal&gt;\n                        &lt;/goals&gt;\n                        &lt;configuration&gt;\n                            &lt;inputSpec&gt;${project.basedir}/src/main/resources/my-spec.yml&lt;/inputSpec&gt;\n                            &lt;language&gt;java&lt;/language&gt;\n                            &lt;generateApiTests&gt;false&lt;/generateApiTests&gt;\n                            &lt;generateModelTests&gt;false&lt;/generateModelTests&gt;\n                            &lt;configOptions&gt;\n                                &lt;useOptional&gt;true&lt;/useOptional&gt;\n                                &lt;modelPackage&gt;${my.groupId}.model&lt;/modelPackage&gt;\n                                &lt;apiPackage&gt;${my.groupId}.api&lt;/apiPackage&gt;\n                                &lt;invokerPackage&gt;${my.groupId}&lt;/invokerPackage&gt;\n                                &lt;groupId&gt;${my.groupId}&lt;/groupId&gt;\n                                &lt;artifactId&gt;api&lt;/artifactId&gt;\n                                &lt;fullJavaUtil&gt;false&lt;/fullJavaUtil&gt;\n                                &lt;java8&gt;true&lt;/java8&gt;\n                                &lt;dateLibrary&gt;java8-instant&lt;/dateLibrary&gt;\n                            &lt;/configOptions&gt;\n                            &lt;library&gt;resttemplate&lt;/library&gt;\n                        &lt;/configuration&gt;\n                    &lt;/execution&gt;\n                &lt;/executions&gt;\n            &lt;/plugin&gt;\n</code></pre>\n<p>I've looked into the configuration properties for both the swagger-codegen plugin and the openapi-generator plugin and haven't found anything that seems to help with this. Does anyone know of a way to fix/improve this behaviour?</p>\n<p>EDIT: After looking into it a bit more, the <code>openapi-generator-maven-plugin</code> version of the code does seem to do something that I'd expect to use the <code>RestTemplate</code> for url templating. However in the <code>RestTemplateExchangeTagsProvider</code> the <code>urlTemplate</code> is still coming through as <code>null</code>.</p>\n"},{"tags":["java","maven","intellij-idea","libgdx"],"comments":[{"owner":{"account_id":36734,"reputation":392117,"user_id":104891,"display_name":"CrazyCoder"},"score":1,"creation_date":1682533188,"post_id":76113852,"comment_id":134232863,"body_markdown":"See https://www.jetbrains.com/help/idea/run-debug-configuration.html#createExplicitly. &quot;Add VM options&quot;.","body":"See <a href=\"https://www.jetbrains.com/help/idea/run-debug-configuration.html#createExplicitly\" rel=\"nofollow noreferrer\">jetbrains.com/help/idea/&hellip;</a>. &quot;Add VM options&quot;."}],"answers":[{"tags":[],"owner":{"account_id":213966,"reputation":18503,"user_id":467650,"accept_rate":75,"display_name":"Roy Solberg"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691685517,"creation_date":1691685517,"answer_id":76877725,"question_id":76113852,"body_markdown":"I had the same issue when running a libGDX game on my Macbook with a M1 processor.\r\n\r\nYou need to run your program with the additional JVM option `-XstartOnFirstThread`.\r\n\r\nTypically when you run it from IntelliJ you can create (or edit) a run configuration and add in exactly `-XstartOnFirstThread` as a &quot;JVM option&quot;.\r\n\r\nIf you add it as a &quot;program argument&quot; it will not work. It&#39;s a flag for the virtual machine, and not the program itself.\r\n\r\nThe [link @CrazyCoder gave in the comment][1] of your question gives a good\r\nexplanation on how to do this in IntelliJ. It&#39;s similar for Android Studio.\r\n\r\n  [1]: https://www.jetbrains.com/help/idea/run-debug-configuration.html#createExplicitly","title":"How can I run the JVM with the -XstartOnFirstThread","body":"<p>I had the same issue when running a libGDX game on my Macbook with a M1 processor.</p>\n<p>You need to run your program with the additional JVM option <code>-XstartOnFirstThread</code>.</p>\n<p>Typically when you run it from IntelliJ you can create (or edit) a run configuration and add in exactly <code>-XstartOnFirstThread</code> as a &quot;JVM option&quot;.</p>\n<p>If you add it as a &quot;program argument&quot; it will not work. It's a flag for the virtual machine, and not the program itself.</p>\n<p>The <a href=\"https://www.jetbrains.com/help/idea/run-debug-configuration.html#createExplicitly\" rel=\"nofollow noreferrer\">link @CrazyCoder gave in the comment</a> of your question gives a good\nexplanation on how to do this in IntelliJ. It's similar for Android Studio.</p>\n"}],"owner":{"account_id":28251389,"reputation":1,"user_id":21597578,"display_name":"Adam Szponikowski"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":117,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1691685517,"creation_date":1682532716,"question_id":76113852,"body_markdown":"I&#39;m trying to run my first program in java using maven in intelliJ. But I&#39;m having an error like below : &quot;GLFW may only be used on the main thread and that thread must be the first thread in the process. Please run the JVM with -XstartOnFirstThread&quot;\r\nHow can I work it out?\r\n\r\nI was looking for the answer in the internet but could not find it out","title":"How can I run the JVM with the -XstartOnFirstThread","body":"<p>I'm trying to run my first program in java using maven in intelliJ. But I'm having an error like below : &quot;GLFW may only be used on the main thread and that thread must be the first thread in the process. Please run the JVM with -XstartOnFirstThread&quot;\nHow can I work it out?</p>\n<p>I was looking for the answer in the internet but could not find it out</p>\n"},{"tags":["java","spring","hibernate","spring-data","hibernate-mapping"],"comments":[{"owner":{"account_id":2485939,"reputation":19426,"user_id":2164365,"accept_rate":40,"display_name":"Abra"},"score":0,"creation_date":1691987360,"post_id":76876624,"comment_id":135559809,"body_markdown":"The problem is with your SQL query and has nothing to do with Hibernate. `join` is for joining two database tables. You seem to be trying to join a database table with a column in that table. Also, is `s1` a column in database table `SystemParameterValueImpl`? If not then maybe you mean `select s1.*`? I suggest that you [edit] your question and post the structure of the database tables involved in your query, i.e. the column names and their data types. It may also help if you post some sample data as well as your expected result of your database query based on that sample data.","body":"The problem is with your SQL query and has nothing to do with Hibernate. <code>join</code> is for joining two database tables. You seem to be trying to join a database table with a column in that table. Also, is <code>s1</code> a column in database table <code>SystemParameterValueImpl</code>? If not then maybe you mean <code>select s1.*</code>? I suggest that you <a href=\"https://stackoverflow.com/posts/76876624/edit\">edit</a> your question and post the structure of the database tables involved in your query, i.e. the column names and their data types. It may also help if you post some sample data as well as your expected result of your database query based on that sample data."}],"answers":[{"tags":[],"owner":{"account_id":29200265,"reputation":3,"user_id":22370542,"display_name":"Tiziano"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691685000,"creation_date":1691682992,"answer_id":76877424,"question_id":76876624,"body_markdown":"Try removing the &#39;AS&#39; keyword to define the table alias\r\n\r\nThis is an example of how to write a join:\r\n\r\n    SELECT gn.*\r\n    FROM GENERAL_NOTIFICATIONS gn\r\n    JOIN NOTIFICATION_ROLE nr ON (cign.ID = cinr.NOTIFICATION_ID)\r\n\r\n","title":"Hibernate exception SQL command not properly ended","body":"<p>Try removing the 'AS' keyword to define the table alias</p>\n<p>This is an example of how to write a join:</p>\n<pre><code>SELECT gn.*\nFROM GENERAL_NOTIFICATIONS gn\nJOIN NOTIFICATION_ROLE nr ON (cign.ID = cinr.NOTIFICATION_ID)\n</code></pre>\n"}],"owner":{"account_id":23171414,"reputation":195,"user_id":17270610,"display_name":"dynamo"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":43,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1691685000,"creation_date":1691677243,"question_id":76876624,"body_markdown":"getting this exception when running a named query\r\n\r\n```\r\nCaused by: org.hibernate.exception.SQLGrammarException: could not extract ResultSet\r\n.....\r\nCaused by: java.sql.SQLSyntaxErrorException: ORA-00933: SQL command not properly ended\r\n.....\r\nCaused by: Error : 933, Position : 40, Sql = select s1 from SystemParameterValueImpl as s1 join s1.systemParameter as p1 \r\n\t\t        where p1.id = :1  and s1.effectiveGasDay = \r\n\t\t            (select max(s2.effectiveGasDay ) \r\n\t\t            from SystemParameterValueImpl s2 join s2.systemParameter as p2 \r\n\t\t            where p1.id = p2.id and s2.effectiveGasDay &lt;= :2 ) \r\n\t\t        order by p1.id, \r\nOriginalSql = select s1 from SystemParameterValueImpl as s1 join s1.systemParameter as p1 \r\n\t\t        where p1.id = ? and s1.effectiveGasDay = \r\n\t\t            (select max(s2.effectiveGasDay ) \r\n\t\t            from SystemParameterValueImpl s2 join s2.systemParameter as p2 \r\n\t\t            where p1.id = p2.id and s2.effectiveGasDay &lt;= ?) \r\n\t\t        order by p1.id, Error Msg = ORA-00933: SQL command not properly ended\r\n```\r\n\r\nthis is the named query in my hbm file\r\n\r\n```\r\n    &lt;sql-query  name=&quot;findSystemParameterValueApplicableOnDate&quot;&gt;\r\n    \t&lt;return class=&quot;com.amor.hcplus.application.systemparameter.domain.SystemParameterValueImpl&quot; /&gt;\r\n\t\t    &lt;![CDATA[\r\n\t\t        select s1 from SystemParameterValueImpl as s1 join s1.systemParameter as p1 where p1.id = :parameterName and s1.effectiveGasDay = (select max(s2.effectiveGasDay ) from SystemParameterValueImpl s2 join s2.systemParameter as p2 where p1.id = p2.id and s2.effectiveGasDay &lt;= :date) order by p1.id\r\n\t\t    ]]&gt;\r\n    &lt;/sql-query&gt;\r\n ```\r\n\r\nand here is where i call the namedQuery\r\n\r\n```\r\n\t\tSQLQuery query = (SQLQuery) getSession().getNamedQuery(&quot;findSystemParameterValueApplicableOnDate&quot;)\r\n\t\t\t\t.setParameter(&quot;parameterName&quot;, parameterName)\r\n\t\t\t\t.setParameter(&quot;date&quot;, date);\r\n\t\t\r\n\t\tList list = query.list();\r\n```","title":"Hibernate exception SQL command not properly ended","body":"<p>getting this exception when running a named query</p>\n<pre><code>Caused by: org.hibernate.exception.SQLGrammarException: could not extract ResultSet\n.....\nCaused by: java.sql.SQLSyntaxErrorException: ORA-00933: SQL command not properly ended\n.....\nCaused by: Error : 933, Position : 40, Sql = select s1 from SystemParameterValueImpl as s1 join s1.systemParameter as p1 \n                where p1.id = :1  and s1.effectiveGasDay = \n                    (select max(s2.effectiveGasDay ) \n                    from SystemParameterValueImpl s2 join s2.systemParameter as p2 \n                    where p1.id = p2.id and s2.effectiveGasDay &lt;= :2 ) \n                order by p1.id, \nOriginalSql = select s1 from SystemParameterValueImpl as s1 join s1.systemParameter as p1 \n                where p1.id = ? and s1.effectiveGasDay = \n                    (select max(s2.effectiveGasDay ) \n                    from SystemParameterValueImpl s2 join s2.systemParameter as p2 \n                    where p1.id = p2.id and s2.effectiveGasDay &lt;= ?) \n                order by p1.id, Error Msg = ORA-00933: SQL command not properly ended\n</code></pre>\n<p>this is the named query in my hbm file</p>\n<pre><code>    &lt;sql-query  name=&quot;findSystemParameterValueApplicableOnDate&quot;&gt;\n        &lt;return class=&quot;com.amor.hcplus.application.systemparameter.domain.SystemParameterValueImpl&quot; /&gt;\n            &lt;![CDATA[\n                select s1 from SystemParameterValueImpl as s1 join s1.systemParameter as p1 where p1.id = :parameterName and s1.effectiveGasDay = (select max(s2.effectiveGasDay ) from SystemParameterValueImpl s2 join s2.systemParameter as p2 where p1.id = p2.id and s2.effectiveGasDay &lt;= :date) order by p1.id\n            ]]&gt;\n    &lt;/sql-query&gt;\n</code></pre>\n<p>and here is where i call the namedQuery</p>\n<pre><code>        SQLQuery query = (SQLQuery) getSession().getNamedQuery(&quot;findSystemParameterValueApplicableOnDate&quot;)\n                .setParameter(&quot;parameterName&quot;, parameterName)\n                .setParameter(&quot;date&quot;, date);\n        \n        List list = query.list();\n</code></pre>\n"},{"tags":["java","android","pdf","android-recyclerview","itext"],"answers":[{"tags":[],"owner":{"account_id":22432165,"reputation":1234,"user_id":16637863,"display_name":"Pawan Harariya"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1691683875,"creation_date":1691683875,"answer_id":76877556,"question_id":76876881,"body_markdown":"What ever item the user adds, it will be added to a list, and then the list populates the recyclerView. So, you can easily iterate the list, and for every element in the list add the details in the pdf. Here is an example given below, you can find the complete code [here.][1]\r\n```\r\nprivate void createPdf(Order order) throws FileNotFoundException, DocumentException {\r\n       \r\n        File docsFolder = new File(Environment.getExternalStorageDirectory() + &quot;/Documents&quot;);\r\n        if (!docsFolder.exists()) {\r\n            docsFolder.mkdir();\r\n        }\r\n        String pdfName = order.getOrderId() + &quot;ST.pdf&quot;;\r\n\r\n        // This is the list of product items, that populates the recyclerView\r\n        List&lt;ProductItem&gt; items = order.getItemsList();\r\n        \r\n        File pdfFile = new File(docsFolder.getAbsolutePath(), pdfName);\r\n        OutputStream output = new FileOutputStream(pdfFile);\r\n        Document document = new Document(PageSize.A4);\r\n\r\n        // We create a table to store different details of each product\r\n        PdfPTable table = new PdfPTable(new float[]{3, 5, 3, 3});\r\n        \r\n        // This is some formatting done to make it look good\r\n        table.getDefaultCell().setHorizontalAlignment(Element.ALIGN_CENTER);\r\n        table.getDefaultCell().setFixedHeight(28);\r\n        table.setTotalWidth(PageSize.A4.getWidth());\r\n        table.setWidthPercentage(100);\r\n        table.getDefaultCell().setVerticalAlignment(Element.ALIGN_MIDDLE);\r\n\r\n        // We add the headers for each column of the table\r\n        table.addCell(&quot;Product Id&quot;);\r\n        table.addCell(&quot;Name&quot;);\r\n        table.addCell(&quot;Quantity&quot;);\r\n        table.addCell(&quot;Price&quot;);\r\n        table.setHeaderRows(1);\r\n        PdfPCell[] cells = table.getRow(0).getCells();\r\n        for (PdfPCell cell : cells) {\r\n            cell.setBackgroundColor(BaseColor.LIGHT_GRAY);\r\n        }\r\n        \r\n        // Here we iterate over the list, and for every product in the list we add a row in the table with details of the product.\r\n        for (ProductItem item : items) {\r\n            table.addCell(String.valueOf(item.getProductId()));\r\n            table.addCell(String.valueOf(item.getProductName()));\r\n            int quantity = item.getProductQuantity();\r\n            table.addCell(String.valueOf(quantity));\r\n            table.addCell(String.valueOf(item.getProductPrice() * quantity));\r\n        }\r\n\r\n        // Now we add the table to the document\r\n        PdfWriter.getInstance(document, output);\r\n        document.open();\r\n        document.add(table);\r\n        document.close();\r\n    }\r\n```\r\n\r\n\r\n  [1]: https://github.com/pawanharariya/Scan-and-Pay/blob/102ade1ecd7b6d35f5e80d6ddfeb1cb6ec90fd17/Scan%20and%20Pay%20-%20Partner%20App/app/src/main/java/com/anvay/noqueuepaydashboard/fragments/HomeFragment.java#L199C1-L200C1","title":"How I can get recyclerView list to itext PDF?","body":"<p>What ever item the user adds, it will be added to a list, and then the list populates the recyclerView. So, you can easily iterate the list, and for every element in the list add the details in the pdf. Here is an example given below, you can find the complete code <a href=\"https://github.com/pawanharariya/Scan-and-Pay/blob/102ade1ecd7b6d35f5e80d6ddfeb1cb6ec90fd17/Scan%20and%20Pay%20-%20Partner%20App/app/src/main/java/com/anvay/noqueuepaydashboard/fragments/HomeFragment.java#L199C1-L200C1\" rel=\"nofollow noreferrer\">here.</a></p>\n<pre><code>private void createPdf(Order order) throws FileNotFoundException, DocumentException {\n       \n        File docsFolder = new File(Environment.getExternalStorageDirectory() + &quot;/Documents&quot;);\n        if (!docsFolder.exists()) {\n            docsFolder.mkdir();\n        }\n        String pdfName = order.getOrderId() + &quot;ST.pdf&quot;;\n\n        // This is the list of product items, that populates the recyclerView\n        List&lt;ProductItem&gt; items = order.getItemsList();\n        \n        File pdfFile = new File(docsFolder.getAbsolutePath(), pdfName);\n        OutputStream output = new FileOutputStream(pdfFile);\n        Document document = new Document(PageSize.A4);\n\n        // We create a table to store different details of each product\n        PdfPTable table = new PdfPTable(new float[]{3, 5, 3, 3});\n        \n        // This is some formatting done to make it look good\n        table.getDefaultCell().setHorizontalAlignment(Element.ALIGN_CENTER);\n        table.getDefaultCell().setFixedHeight(28);\n        table.setTotalWidth(PageSize.A4.getWidth());\n        table.setWidthPercentage(100);\n        table.getDefaultCell().setVerticalAlignment(Element.ALIGN_MIDDLE);\n\n        // We add the headers for each column of the table\n        table.addCell(&quot;Product Id&quot;);\n        table.addCell(&quot;Name&quot;);\n        table.addCell(&quot;Quantity&quot;);\n        table.addCell(&quot;Price&quot;);\n        table.setHeaderRows(1);\n        PdfPCell[] cells = table.getRow(0).getCells();\n        for (PdfPCell cell : cells) {\n            cell.setBackgroundColor(BaseColor.LIGHT_GRAY);\n        }\n        \n        // Here we iterate over the list, and for every product in the list we add a row in the table with details of the product.\n        for (ProductItem item : items) {\n            table.addCell(String.valueOf(item.getProductId()));\n            table.addCell(String.valueOf(item.getProductName()));\n            int quantity = item.getProductQuantity();\n            table.addCell(String.valueOf(quantity));\n            table.addCell(String.valueOf(item.getProductPrice() * quantity));\n        }\n\n        // Now we add the table to the document\n        PdfWriter.getInstance(document, output);\n        document.open();\n        document.add(table);\n        document.close();\n    }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2755641,"reputation":8688,"user_id":2373819,"display_name":"Andrew"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691684929,"creation_date":1691684929,"answer_id":76877661,"question_id":76876881,"body_markdown":"As an alternative you don&#39;t have to use itext and then have to deal with it&#39;s licensing, you can create a PDF using the Android built in PDF classes.\r\n\r\nAn example that creates a multiple page PDF from a recyclerview is at https://github.com/Zardozz/RecyclerviewPdf","title":"How I can get recyclerView list to itext PDF?","body":"<p>As an alternative you don't have to use itext and then have to deal with it's licensing, you can create a PDF using the Android built in PDF classes.</p>\n<p>An example that creates a multiple page PDF from a recyclerview is at <a href=\"https://github.com/Zardozz/RecyclerviewPdf\" rel=\"nofollow noreferrer\">https://github.com/Zardozz/RecyclerviewPdf</a></p>\n"}],"owner":{"account_id":28779976,"reputation":25,"user_id":22041790,"display_name":"HGSu"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":35,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":76877556,"answer_count":2,"score":1,"last_activity_date":1691684929,"creation_date":1691679003,"question_id":76876881,"body_markdown":"I want to add recyclerView list to itext PDF document,\r\nrecyclerview is created from user input, I didn&#39;t Know how many item will user add,\r\nand each item of recyclerView contain many text.\r\n\r\nHow I can do it?","title":"How I can get recyclerView list to itext PDF?","body":"<p>I want to add recyclerView list to itext PDF document,\nrecyclerview is created from user input, I didn't Know how many item will user add,\nand each item of recyclerView contain many text.</p>\n<p>How I can do it?</p>\n"},{"tags":["java","ubuntu-20.04","path-variables"],"comments":[{"owner":{"display_name":"user2711811"},"score":0,"creation_date":1623329520,"post_id":67920408,"comment_id":120052207,"body_markdown":"The jdk directorys and the jre directorys are different - similar errors found elsewhere indicate it is looking for something like .../jre../bin in path.  Sorry if a bit vague...","body":"The jdk directorys and the jre directorys are different - similar errors found elsewhere indicate it is looking for something like .../jre../bin in path.  Sorry if a bit vague..."}],"answers":[{"tags":[],"owner":{"account_id":12670441,"reputation":11,"user_id":18305228,"display_name":"kkkaiqiang"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1645764212,"creation_date":1645764212,"answer_id":71261154,"question_id":67920408,"body_markdown":"Maybe it has been too late but i encounter the same problem when installing the CPLEX progrom. I had found the solution here at [IBM support](https://www.ibm.com/docs/en/ds8870/7.3?topic=HW213_7.3.0/com.ibm.storage.ssic.help.doc/f2c_clijavaerror_2lfq3j.html). Simply pass the java path using the LAX_VM flag.\r\n\r\n    ./cplex_studio128.linux-x86-64.bin LAX_VM /opt/ibm-Java-whatever/java/bin/java","title":"No Java virtual machine could be found from your PATH environment variable. You must install a VM prior to running this program","body":"<p>Maybe it has been too late but i encounter the same problem when installing the CPLEX progrom. I had found the solution here at <a href=\"https://www.ibm.com/docs/en/ds8870/7.3?topic=HW213_7.3.0/com.ibm.storage.ssic.help.doc/f2c_clijavaerror_2lfq3j.html\" rel=\"nofollow noreferrer\">IBM support</a>. Simply pass the java path using the LAX_VM flag.</p>\n<pre><code>./cplex_studio128.linux-x86-64.bin LAX_VM /opt/ibm-Java-whatever/java/bin/java\n</code></pre>\n"},{"tags":[],"owner":{"account_id":6286349,"reputation":43,"user_id":4885430,"display_name":"Adailton J&#250;nior"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691684863,"creation_date":1691684863,"answer_id":76877651,"question_id":67920408,"body_markdown":"I had this problem trying to install S32 Design Studio from NXP.\r\nFollowing the answer from @kkkaiqiang who used IBM solution I did\r\n\r\n    ./S32DS_Power_Linux_v1.2_b170613.bin LAX_VM /usr/lib/jvm/java-8-openjdk-amd64/bin/java\r\n\r\n","title":"No Java virtual machine could be found from your PATH environment variable. You must install a VM prior to running this program","body":"<p>I had this problem trying to install S32 Design Studio from NXP.\nFollowing the answer from @kkkaiqiang who used IBM solution I did</p>\n<pre><code>./S32DS_Power_Linux_v1.2_b170613.bin LAX_VM /usr/lib/jvm/java-8-openjdk-amd64/bin/java\n</code></pre>\n"}],"owner":{"account_id":16002923,"reputation":31,"user_id":13070739,"display_name":"Pooja Hegde"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":3798,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":2,"score":1,"last_activity_date":1691684863,"creation_date":1623325157,"question_id":67920408,"body_markdown":"I know this has been asked several times but I can&#39;t seem to get rid of this error.\\\r\nSetup:\r\n- I have installed java on ubuntu 20.04 with sudo apt install default-jre\r\n- echo **$JAVA_HOME** gives **/usr/lib/jvm/java-11-openjdk-amd64/** which I see is correct.\r\n- PATH variable is also set correctly. When I type java in shell it shows me available options.\r\n- **ls** in the /usr/lib/jvm gives \\\r\ndefault-java  java-1.11.0-openjdk-amd64  java-11-openjdk-amd64  openjdk-11\r\n\r\nError:\\\r\nWhen I try to install lmadmin I get the following:\\\r\nPreparing to install\r\nExtracting the installation resources from the installer archive...\r\nConfiguring the installer for this system&#39;s environment...\r\nNo Java virtual machine could be found from your PATH\r\nenvironment variable.  You must install a VM prior to\r\nrunning this program.\r\n\r\nThings I have tried so far:\r\n- add the export path lines to .bashrc , .bash_profile , /etc/environment\r\n- reinstalled the java package\r\n\r\nAny help is appreciated.\r\n\r\n\r\n\r\n","title":"No Java virtual machine could be found from your PATH environment variable. You must install a VM prior to running this program","body":"<p>I know this has been asked several times but I can't seem to get rid of this error.<br />\nSetup:</p>\n<ul>\n<li>I have installed java on ubuntu 20.04 with sudo apt install default-jre</li>\n<li>echo <strong>$JAVA_HOME</strong> gives <strong>/usr/lib/jvm/java-11-openjdk-amd64/</strong> which I see is correct.</li>\n<li>PATH variable is also set correctly. When I type java in shell it shows me available options.</li>\n<li><strong>ls</strong> in the /usr/lib/jvm gives <br />\ndefault-java  java-1.11.0-openjdk-amd64  java-11-openjdk-amd64  openjdk-11</li>\n</ul>\n<p>Error:<br />\nWhen I try to install lmadmin I get the following:<br />\nPreparing to install\nExtracting the installation resources from the installer archive...\nConfiguring the installer for this system's environment...\nNo Java virtual machine could be found from your PATH\nenvironment variable.  You must install a VM prior to\nrunning this program.</p>\n<p>Things I have tried so far:</p>\n<ul>\n<li>add the export path lines to .bashrc , .bash_profile , /etc/environment</li>\n<li>reinstalled the java package</li>\n</ul>\n<p>Any help is appreciated.</p>\n"},{"tags":["java","spring-boot","docker-compose","dockerfile","containers"],"owner":{"account_id":11045728,"reputation":1,"user_id":8111950,"display_name":"Omar"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":53,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1691684704,"creation_date":1691684704,"question_id":76877629,"body_markdown":"I&#39;m trying to run my services with a Docker compose on MacBook Air M2, I launch three containers that are connected to each other per ports, When I run the application locally (not with Docker), it seems to work fine. Only I start Docker compose, I get an error with backend container, the other two containers (mysql and frontend are Ok), I&#39;m new to Docker and Spring Boot, any suggestions?\r\n\r\nNote: port 8443 is available on my machine and there are no other service using it...\r\n\r\nthis is Dockerfile of backend service\r\n\r\n\r\n```\r\n# Stage 1: Build the application\r\nFROM maven:3.8.4-openjdk-11 AS build\r\nWORKDIR /app\r\n\r\n\r\n\r\nCOPY ./devops_bht_ss23_backend/ /app\r\nRUN mvn clean package -DskipTests\r\n\r\n# Stage 2: Create the runtime image\r\nFROM openjdk:11-jre-slim\r\nWORKDIR /app\r\nCOPY --from=build /app/target/spring-boot-jwt-0.0.1-SNAPSHOT.jar .\r\n# RUN sh -c &#39;touch spring-boot-jwt-0.0.1-SNAPSHOT.jar&#39;\r\n\r\n\r\nEXPOSE 8443\r\nCMD [&quot;java&quot;, &quot;-jar&quot;, &quot;spring-boot-jwt-0.0.1-SNAPSHOT.jar&quot;]\r\n```\r\n\r\n\r\n here is my application.properties file \r\n\r\n\r\n```\r\nspring.datasource.url = jdbc:mysql://db:3306/mylist?useSSL=false&amp;allowPublicKeyRetrieval=true\r\nspring.datasource.username = root\r\nspring.datasource.password = ****\r\n\r\nspring.jpa.properties.hibernate.dialect = org.hibernate.dialect.MySQL5InnoDBDialect\r\n\r\nspring.jpa.hibernate.ddl-auto = update\r\njwt.secret = WHENTOD******\r\n\r\nlogging.level.org.hibernate.SQL = DEBUG\r\nlogging.level.org.hibernate.type = TRACE\r\nspring.jpa.properties.hibernate.format_sql = true\r\n\r\nspring.mail.host = smtp.gmail.com\r\nspring.mail.port = 587\r\nspring.mail.username = ****8@gmail.com\r\nspring.mail.password = *****\r\nspring.mail.properties.mail.smtp.auth = true\r\nspring.mail.properties.mail.smtp.starttls.enable = true\r\nspring.mail.properties.mail.smtp.starttls.required = true\r\nspring.mail.properties.mail.timeout = 30000\r\n\r\nserver.port = 8443\r\nserver.ssl.enabled = true\r\nserver.ssl.key-store = src/main/resources/bootsecurity.p12\r\nserver.ssl.key-store-password = bootsecuritypassword\r\nserver.ssl.key-store-type = PKCS12\r\nserver.ssl.key-alias = bootsecurity\r\n\r\n```\r\n\r\n here is Docker Compose File with the three services:\r\n\r\n\r\n```\r\nversion: &#39;3&#39;\r\nservices:\r\n  backend:\r\n    build:\r\n      context: ./\r\n      dockerfile: ./devops_bht_ss23_backend/Dockerfile\r\n    ports:\r\n      - 8443:8443\r\n    depends_on:\r\n      - db\r\n    environment:\r\n       spring.datasource.url: jdbc:mysql://db:3306/mylist?useSSL=false&amp;allowPublicKeyRetrieval=true\r\n       spring.datasource.username: root\r\n       spring.datasource.password: *****\r\n       spring.jpa.properties.hibernate.dialect: org.hibernate.dialect.MySQL5InnoDBDialect\r\n       spring.jpa.hibernate.ddl-auto: update\r\n       jwt.secret: WHENTODOLISTISCOOL\r\n       logging.level.org.hibernate.SQL: DEBUG\r\n       logging.level.org.hibernate.type: TRACE\r\n       spring.jpa.properties.hibernate.format_sql: true\r\n\r\n       spring.mail.host: smtp.gmail.com\r\n       spring.mail.port: 587\r\n       spring.mail.username: *****@gmail.com\r\n       spring.mail.password: *****\r\n       spring.mail.properties.mail.smtp.auth: true\r\n       spring.mail.properties.mail.smtp.starttls.enable: true\r\n       spring.mail.properties.mail.smtp.starttls.required: true\r\n       spring.mail.properties.mail.timeout: 30000\r\n       server.port: 8443\r\n       server.ssl.enabled: true\r\n       server.ssl.key-store: src/main/resources/bootsecurity.p12\r\n       server.ssl.key-store-password: bootsecuritypassword\r\n       server.ssl.key-store-type: PKCS12\r\n       server.ssl.key-alias: bootsecurity\r\n       DEBUG: true\r\n\r\n\r\n\r\n    volumes:\r\n      - mysql_data:/var/lib/mysql\r\n\r\n  db:\r\n    image: mysql:latest\r\n    environment:\r\n      MYSQL_DATABASE: mylist\r\n      MYSQL_ROOT_PASSWORD: *****\r\n    ports:\r\n      - 3306:3306\r\n    volumes:\r\n      - mysql_data:/var/lib/mysql\r\n\r\n  frontend:\r\n    build:\r\n      context: ./devops_bht_ss23_frontend\r\n      dockerfile: Dockerfile\r\n    ports:\r\n      - 3000:3000\r\n    depends_on:\r\n      - backend\r\n\r\nvolumes:\r\n  mysql_data:\r\n\r\n```\r\n\r\nhere is my project structure from backend project:\r\n[backend structure](https://i.stack.imgur.com/Ipa4w.png)\r\n\r\nand here a part of log output:\r\n\r\n\r\n```\r\n2023-08-10 16:38:38 2023-08-10 14:38:38.824 DEBUG 1 --- [           main] o.s.b.d.LoggingFailureAnalysisReporter   : Application failed to start due to an exception\r\n2023-08-10 16:38:38 \r\n2023-08-10 16:38:38 org.springframework.boot.web.embedded.tomcat.ConnectorStartFailedException: Connector configured to listen on port 8443 failed to start\r\n2023-08-10 16:38:38     at org.springframework.boot.web.embedded.tomcat.TomcatWebServer.checkConnectorHasStarted(TomcatWebServer.java:232) ~[spring-boot-2.1.1.RELEASE.jar!/:2.1.1.RELEASE]\r\n2023-08-10 16:38:38     at org.springframework.boot.web.embedded.tomcat.TomcatWebServer.checkThatConnectorsHaveStarted(TomcatWebServer.java:224) ~[spring-boot-2.1.1.RELEASE.jar!/:2.1.1.RELEASE]\r\n2023-08-10 16:38:38     at org.springframework.boot.web.embedded.tomcat.TomcatWebServer.start(TomcatWebServer.java:202) ~[spring-boot-2.1.1.RELEASE.jar!/:2.1.1.RELEASE]\r\n2023-08-10 16:38:38     at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.startWebServer(ServletWebServerApplicationContext.java:311) ~[spring-boot-2.1.1.RELEASE.jar!/:2.1.1.RELEASE]\r\n2023-08-10 16:38:38     at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.finishRefresh(ServletWebServerApplicationContext.java:164) ~[spring-boot-2.1.1.RELEASE.jar!/:2.1.1.RELEASE]\r\n2023-08-10 16:38:38     at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:549) ~[spring-context-5.1.3.RELEASE.jar!/:5.1.3.RELEASE]\r\n2023-08-10 16:38:38     at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:142) ~[spring-boot-2.1.1.RELEASE.jar!/:2.1.1.RELEASE]\r\n2023-08-10 16:38:38     at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:775) ~[spring-boot-2.1.1.RELEASE.jar!/:2.1.1.RELEASE]\r\n2023-08-10 16:38:38     at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:397) ~[spring-boot-2.1.1.RELEASE.jar!/:2.1.1.RELEASE]\r\n2023-08-10 16:38:38     at org.springframework.boot.SpringApplication.run(SpringApplication.java:316) ~[spring-boot-2.1.1.RELEASE.jar!/:2.1.1.RELEASE]\r\n2023-08-10 16:38:38     at org.springframework.boot.SpringApplication.run(SpringApplication.java:1260) ~[spring-boot-2.1.1.RELEASE.jar!/:2.1.1.RELEASE]\r\n2023-08-10 16:38:38     at org.springframework.boot.SpringApplication.run(SpringApplication.java:1248) ~[spring-boot-2.1.1.RELEASE.jar!/:2.1.1.RELEASE]\r\n2023-08-10 16:38:38     at com.todolist.Application.main(Application.java:17) ~[classes!/:0.0.1-SNAPSHOT]\r\n2023-08-10 16:38:38     at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]\r\n2023-08-10 16:38:38     at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(Unknown Source) ~[na:na]\r\n2023-08-10 16:38:38     at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source) ~[na:na]\r\n2023-08-10 16:38:38     at java.base/java.lang.reflect.Method.invoke(Unknown Source) ~[na:na]\r\n2023-08-10 16:38:38     at org.springframework.boot.loader.MainMethodRunner.run(MainMethodRunner.java:48) ~[spring-boot-jwt-0.0.1-SNAPSHOT.jar:0.0.1-SNAPSHOT]\r\n2023-08-10 16:38:38     at org.springframework.boot.loader.Launcher.launch(Launcher.java:87) ~[spring-boot-jwt-0.0.1-SNAPSHOT.jar:0.0.1-SNAPSHOT]\r\n2023-08-10 16:38:38     at org.springframework.boot.loader.Launcher.launch(Launcher.java:50) ~[spring-boot-jwt-0.0.1-SNAPSHOT.jar:0.0.1-SNAPSHOT]\r\n2023-08-10 16:38:38     at org.springframework.boot.loader.JarLauncher.main(JarLauncher.java:51) ~[spring-boot-jwt-0.0.1-SNAPSHOT.jar:0.0.1-SNAPSHOT]\r\n2023-08-10 16:38:38 \r\n2023-08-10 16:38:38 2023-08-10 14:38:38.825 ERROR 1 --- [           main] o.s.b.d.LoggingFailureAnalysisReporter   : \r\n2023-08-10 16:38:38 \r\n2023-08-10 16:38:38 ***************************\r\n2023-08-10 16:38:38 APPLICATION FAILED TO START\r\n2023-08-10 16:38:38 ***************************\r\n2023-08-10 16:38:38 \r\n2023-08-10 16:38:38 Description:\r\n2023-08-10 16:38:38 \r\n2023-08-10 16:38:38 The Tomcat connector configured to listen on port 8443 failed to start. The port may already be in use or the connector may be misconfigured.\r\n2023-08-10 16:38:38 \r\n2023-08-10 16:38:38 Action:\r\n2023-08-10 16:38:38 \r\n2023-08-10 16:38:38 Verify the connector&#39;s configuration, identify and stop any process that&#39;s listening on port 8443, or configure this application to listen on another port.\r\n2023-08-10 16:38:38 \r\n2023-08-10 16:38:38 2023-08-10 14:38:38.825 DEBUG 1 --- [           main] ConfigServletWebServerApplicationContext : Closing org.springframework.boot.web.servlet.context.AnnotationConfigServletWebServerApplicationContext@76f2b07d, started on Thu Aug 10 14:38:36 UTC 2023\r\n2023-08-10 16:38:38 2023-08-10 14:38:38.828  INFO 1 --- [           main] o.s.s.concurrent.ThreadPoolTaskExecutor  : Shutting down ExecutorService &#39;applicationTaskExecutor&#39;\r\n2023-08-10 16:38:38 2023-08-10 14:38:38.829  INFO 1 --- [           main] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit &#39;default&#39;\r\n2023-08-10 16:38:38 2023-08-10 14:38:38.829 TRACE 1 --- [           main] o.h.type.spi.TypeConfiguration$Scope     : Handling #sessionFactoryClosed from [org.hibernate.internal.SessionFactoryImpl@5fad41be] for TypeConfiguration\r\n2023-08-10 16:38:38 2023-08-10 14:38:38.829 DEBUG 1 --- [           main] o.h.type.spi.TypeConfiguration$Scope     : Un-scoping TypeConfiguration [org.hibernate.type.spi.TypeConfiguration$Scope@70d77826] from SessionFactory [org.hibernate.internal.SessionFactoryImpl@5fad41be]\r\n2023-08-10 16:38:38 2023-08-10 14:38:38.830  INFO 1 --- [           main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...\r\n2023-08-10 16:38:38 2023-08-10 14:38:38.842  INFO 1 --- [           main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.\r\n```\r\n","title":"Starting a Spring Boot Applications with SSL connection, Mysql in IntellIJ, and a veu Application using docker compose","body":"<p>I'm trying to run my services with a Docker compose on MacBook Air M2, I launch three containers that are connected to each other per ports, When I run the application locally (not with Docker), it seems to work fine. Only I start Docker compose, I get an error with backend container, the other two containers (mysql and frontend are Ok), I'm new to Docker and Spring Boot, any suggestions?</p>\n<p>Note: port 8443 is available on my machine and there are no other service using it...</p>\n<p>this is Dockerfile of backend service</p>\n<pre><code># Stage 1: Build the application\nFROM maven:3.8.4-openjdk-11 AS build\nWORKDIR /app\n\n\n\nCOPY ./devops_bht_ss23_backend/ /app\nRUN mvn clean package -DskipTests\n\n# Stage 2: Create the runtime image\nFROM openjdk:11-jre-slim\nWORKDIR /app\nCOPY --from=build /app/target/spring-boot-jwt-0.0.1-SNAPSHOT.jar .\n# RUN sh -c 'touch spring-boot-jwt-0.0.1-SNAPSHOT.jar'\n\n\nEXPOSE 8443\nCMD [&quot;java&quot;, &quot;-jar&quot;, &quot;spring-boot-jwt-0.0.1-SNAPSHOT.jar&quot;]\n</code></pre>\n<p>here is my application.properties file</p>\n<pre><code>spring.datasource.url = jdbc:mysql://db:3306/mylist?useSSL=false&amp;allowPublicKeyRetrieval=true\nspring.datasource.username = root\nspring.datasource.password = ****\n\nspring.jpa.properties.hibernate.dialect = org.hibernate.dialect.MySQL5InnoDBDialect\n\nspring.jpa.hibernate.ddl-auto = update\njwt.secret = WHENTOD******\n\nlogging.level.org.hibernate.SQL = DEBUG\nlogging.level.org.hibernate.type = TRACE\nspring.jpa.properties.hibernate.format_sql = true\n\nspring.mail.host = smtp.gmail.com\nspring.mail.port = 587\nspring.mail.username = ****8@gmail.com\nspring.mail.password = *****\nspring.mail.properties.mail.smtp.auth = true\nspring.mail.properties.mail.smtp.starttls.enable = true\nspring.mail.properties.mail.smtp.starttls.required = true\nspring.mail.properties.mail.timeout = 30000\n\nserver.port = 8443\nserver.ssl.enabled = true\nserver.ssl.key-store = src/main/resources/bootsecurity.p12\nserver.ssl.key-store-password = bootsecuritypassword\nserver.ssl.key-store-type = PKCS12\nserver.ssl.key-alias = bootsecurity\n\n</code></pre>\n<p>here is Docker Compose File with the three services:</p>\n<pre><code>version: '3'\nservices:\n  backend:\n    build:\n      context: ./\n      dockerfile: ./devops_bht_ss23_backend/Dockerfile\n    ports:\n      - 8443:8443\n    depends_on:\n      - db\n    environment:\n       spring.datasource.url: jdbc:mysql://db:3306/mylist?useSSL=false&amp;allowPublicKeyRetrieval=true\n       spring.datasource.username: root\n       spring.datasource.password: *****\n       spring.jpa.properties.hibernate.dialect: org.hibernate.dialect.MySQL5InnoDBDialect\n       spring.jpa.hibernate.ddl-auto: update\n       jwt.secret: WHENTODOLISTISCOOL\n       logging.level.org.hibernate.SQL: DEBUG\n       logging.level.org.hibernate.type: TRACE\n       spring.jpa.properties.hibernate.format_sql: true\n\n       spring.mail.host: smtp.gmail.com\n       spring.mail.port: 587\n       spring.mail.username: *****@gmail.com\n       spring.mail.password: *****\n       spring.mail.properties.mail.smtp.auth: true\n       spring.mail.properties.mail.smtp.starttls.enable: true\n       spring.mail.properties.mail.smtp.starttls.required: true\n       spring.mail.properties.mail.timeout: 30000\n       server.port: 8443\n       server.ssl.enabled: true\n       server.ssl.key-store: src/main/resources/bootsecurity.p12\n       server.ssl.key-store-password: bootsecuritypassword\n       server.ssl.key-store-type: PKCS12\n       server.ssl.key-alias: bootsecurity\n       DEBUG: true\n\n\n\n    volumes:\n      - mysql_data:/var/lib/mysql\n\n  db:\n    image: mysql:latest\n    environment:\n      MYSQL_DATABASE: mylist\n      MYSQL_ROOT_PASSWORD: *****\n    ports:\n      - 3306:3306\n    volumes:\n      - mysql_data:/var/lib/mysql\n\n  frontend:\n    build:\n      context: ./devops_bht_ss23_frontend\n      dockerfile: Dockerfile\n    ports:\n      - 3000:3000\n    depends_on:\n      - backend\n\nvolumes:\n  mysql_data:\n\n</code></pre>\n<p>here is my project structure from backend project:\n<a href=\"https://i.stack.imgur.com/Ipa4w.png\" rel=\"nofollow noreferrer\">backend structure</a></p>\n<p>and here a part of log output:</p>\n<pre><code>2023-08-10 16:38:38 2023-08-10 14:38:38.824 DEBUG 1 --- [           main] o.s.b.d.LoggingFailureAnalysisReporter   : Application failed to start due to an exception\n2023-08-10 16:38:38 \n2023-08-10 16:38:38 org.springframework.boot.web.embedded.tomcat.ConnectorStartFailedException: Connector configured to listen on port 8443 failed to start\n2023-08-10 16:38:38     at org.springframework.boot.web.embedded.tomcat.TomcatWebServer.checkConnectorHasStarted(TomcatWebServer.java:232) ~[spring-boot-2.1.1.RELEASE.jar!/:2.1.1.RELEASE]\n2023-08-10 16:38:38     at org.springframework.boot.web.embedded.tomcat.TomcatWebServer.checkThatConnectorsHaveStarted(TomcatWebServer.java:224) ~[spring-boot-2.1.1.RELEASE.jar!/:2.1.1.RELEASE]\n2023-08-10 16:38:38     at org.springframework.boot.web.embedded.tomcat.TomcatWebServer.start(TomcatWebServer.java:202) ~[spring-boot-2.1.1.RELEASE.jar!/:2.1.1.RELEASE]\n2023-08-10 16:38:38     at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.startWebServer(ServletWebServerApplicationContext.java:311) ~[spring-boot-2.1.1.RELEASE.jar!/:2.1.1.RELEASE]\n2023-08-10 16:38:38     at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.finishRefresh(ServletWebServerApplicationContext.java:164) ~[spring-boot-2.1.1.RELEASE.jar!/:2.1.1.RELEASE]\n2023-08-10 16:38:38     at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:549) ~[spring-context-5.1.3.RELEASE.jar!/:5.1.3.RELEASE]\n2023-08-10 16:38:38     at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:142) ~[spring-boot-2.1.1.RELEASE.jar!/:2.1.1.RELEASE]\n2023-08-10 16:38:38     at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:775) ~[spring-boot-2.1.1.RELEASE.jar!/:2.1.1.RELEASE]\n2023-08-10 16:38:38     at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:397) ~[spring-boot-2.1.1.RELEASE.jar!/:2.1.1.RELEASE]\n2023-08-10 16:38:38     at org.springframework.boot.SpringApplication.run(SpringApplication.java:316) ~[spring-boot-2.1.1.RELEASE.jar!/:2.1.1.RELEASE]\n2023-08-10 16:38:38     at org.springframework.boot.SpringApplication.run(SpringApplication.java:1260) ~[spring-boot-2.1.1.RELEASE.jar!/:2.1.1.RELEASE]\n2023-08-10 16:38:38     at org.springframework.boot.SpringApplication.run(SpringApplication.java:1248) ~[spring-boot-2.1.1.RELEASE.jar!/:2.1.1.RELEASE]\n2023-08-10 16:38:38     at com.todolist.Application.main(Application.java:17) ~[classes!/:0.0.1-SNAPSHOT]\n2023-08-10 16:38:38     at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]\n2023-08-10 16:38:38     at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(Unknown Source) ~[na:na]\n2023-08-10 16:38:38     at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source) ~[na:na]\n2023-08-10 16:38:38     at java.base/java.lang.reflect.Method.invoke(Unknown Source) ~[na:na]\n2023-08-10 16:38:38     at org.springframework.boot.loader.MainMethodRunner.run(MainMethodRunner.java:48) ~[spring-boot-jwt-0.0.1-SNAPSHOT.jar:0.0.1-SNAPSHOT]\n2023-08-10 16:38:38     at org.springframework.boot.loader.Launcher.launch(Launcher.java:87) ~[spring-boot-jwt-0.0.1-SNAPSHOT.jar:0.0.1-SNAPSHOT]\n2023-08-10 16:38:38     at org.springframework.boot.loader.Launcher.launch(Launcher.java:50) ~[spring-boot-jwt-0.0.1-SNAPSHOT.jar:0.0.1-SNAPSHOT]\n2023-08-10 16:38:38     at org.springframework.boot.loader.JarLauncher.main(JarLauncher.java:51) ~[spring-boot-jwt-0.0.1-SNAPSHOT.jar:0.0.1-SNAPSHOT]\n2023-08-10 16:38:38 \n2023-08-10 16:38:38 2023-08-10 14:38:38.825 ERROR 1 --- [           main] o.s.b.d.LoggingFailureAnalysisReporter   : \n2023-08-10 16:38:38 \n2023-08-10 16:38:38 ***************************\n2023-08-10 16:38:38 APPLICATION FAILED TO START\n2023-08-10 16:38:38 ***************************\n2023-08-10 16:38:38 \n2023-08-10 16:38:38 Description:\n2023-08-10 16:38:38 \n2023-08-10 16:38:38 The Tomcat connector configured to listen on port 8443 failed to start. The port may already be in use or the connector may be misconfigured.\n2023-08-10 16:38:38 \n2023-08-10 16:38:38 Action:\n2023-08-10 16:38:38 \n2023-08-10 16:38:38 Verify the connector's configuration, identify and stop any process that's listening on port 8443, or configure this application to listen on another port.\n2023-08-10 16:38:38 \n2023-08-10 16:38:38 2023-08-10 14:38:38.825 DEBUG 1 --- [           main] ConfigServletWebServerApplicationContext : Closing org.springframework.boot.web.servlet.context.AnnotationConfigServletWebServerApplicationContext@76f2b07d, started on Thu Aug 10 14:38:36 UTC 2023\n2023-08-10 16:38:38 2023-08-10 14:38:38.828  INFO 1 --- [           main] o.s.s.concurrent.ThreadPoolTaskExecutor  : Shutting down ExecutorService 'applicationTaskExecutor'\n2023-08-10 16:38:38 2023-08-10 14:38:38.829  INFO 1 --- [           main] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'\n2023-08-10 16:38:38 2023-08-10 14:38:38.829 TRACE 1 --- [           main] o.h.type.spi.TypeConfiguration$Scope     : Handling #sessionFactoryClosed from [org.hibernate.internal.SessionFactoryImpl@5fad41be] for TypeConfiguration\n2023-08-10 16:38:38 2023-08-10 14:38:38.829 DEBUG 1 --- [           main] o.h.type.spi.TypeConfiguration$Scope     : Un-scoping TypeConfiguration [org.hibernate.type.spi.TypeConfiguration$Scope@70d77826] from SessionFactory [org.hibernate.internal.SessionFactoryImpl@5fad41be]\n2023-08-10 16:38:38 2023-08-10 14:38:38.830  INFO 1 --- [           main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...\n2023-08-10 16:38:38 2023-08-10 14:38:38.842  INFO 1 --- [           main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.\n</code></pre>\n"},{"tags":["java","amazon-web-services","apache-camel","amazon-sqs","amazon-sns"],"answers":[{"tags":[],"owner":{"account_id":17352297,"reputation":2252,"user_id":12570528,"display_name":"Gregor Zurowski"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1625658471,"creation_date":1625658471,"answer_id":68285437,"question_id":68284375,"body_markdown":"If you have access to the AWS account via CLI, you could simply list all existing queues as follows:\r\n\r\n```\r\naws sqs list-queues\r\n```\r\n\r\nThis will return the SQS queue URLs as follows:\r\n\r\n```\r\nhttps://queue.amazonaws.com/80398EXAMPLE/MyQueue\r\n```\r\n\r\nIn the above example, the account number would be `80398EXAMPLE`.\r\n\r\nYou could also get the account details for the current IAM user/role using the following command:\r\n\r\n```\r\naws sts get-caller-identity\r\n```\r\n\r\nThis will return the account number with the `Account` field.","title":"Apache Camel: How I can create AWS SQS and subscribe to SNS topic","body":"<p>If you have access to the AWS account via CLI, you could simply list all existing queues as follows:</p>\n<pre><code>aws sqs list-queues\n</code></pre>\n<p>This will return the SQS queue URLs as follows:</p>\n<pre><code>https://queue.amazonaws.com/80398EXAMPLE/MyQueue\n</code></pre>\n<p>In the above example, the account number would be <code>80398EXAMPLE</code>.</p>\n<p>You could also get the account details for the current IAM user/role using the following command:</p>\n<pre><code>aws sts get-caller-identity\n</code></pre>\n<p>This will return the account number with the <code>Account</code> field.</p>\n"},{"tags":[],"owner":{"account_id":140655,"reputation":11655,"user_id":347137,"accept_rate":64,"display_name":"Simone"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691683632,"creation_date":1691683632,"answer_id":76877528,"question_id":68284375,"body_markdown":"I still haven&#39;t tried this solution on AWS, but I tested it on LocalStack and it seems to work properly:\r\n\r\n```java\r\n    class LocalStack extends org.apache.camel.builder.RouteBuilder {\r\n        @Override\r\n        public void configure() throws Exception {\r\n            AwsBasicCredentials credentials = AwsBasicCredentials.create(&quot;dummy&quot;, &quot;dummy&quot;);\r\n\r\n            bindToRegistry(&quot;amazonSQSClient&quot;,\r\n                    SqsClient.builder()\r\n                            .endpointOverride(new URI(&quot;http://localhost:4566&quot;))\r\n                            .credentialsProvider(StaticCredentialsProvider.create(credentials))\r\n                            .build());\r\n\r\n            bindToRegistry(&quot;amazonSNSClient&quot;,\r\n                    SnsClient.builder()\r\n                            .endpointOverride(new URI(&quot;http://localhost:4566&quot;))\r\n                            .credentialsProvider(StaticCredentialsProvider.create(credentials))\r\n                            .build());\r\n\r\n            from(&quot;aws2-sqs://MyQueue?amazonSQSClient=#amazonSQSClient&amp;autoCreateQueue=true&quot;).to(&quot;mock:result&quot;);\r\n\r\n            Endpoint endpoint = camelContext.getEndpoint(&quot;aws2-sqs://MyQueue?amazonSQSClient=#amazonSQSClient&amp;autoCreateQueue=true&quot;);\r\n            Assert.assertTrue(endpoint instanceof Sqs2Endpoint);\r\n\r\n            SqsClient sqsClient = ((Sqs2Endpoint) endpoint).getClient();\r\n            String url = sqsClient.getQueueUrl(builder -&gt; builder.queueName(&quot;MyQueue&quot;)).queueUrl();\r\n\r\n            from(&quot;direct:start&quot;)\r\n                    .to(&quot;aws2-sns://active_inventory-int-public-outgoing-notifications&quot; +\r\n                            &quot;?autoCreateTopic=true&quot; +\r\n                            &quot;&amp;amazonSNSClient=#amazonSNSClient&quot; +\r\n                            &quot;&amp;subscribeSNStoSQS=true&quot; +\r\n                            &quot;&amp;queueUrl=&quot; + url);\r\n        }\r\n```\r\n\r\nThe code should be self-explanatory. The calls to `bindToRegistry` are needed just because I&#39;m working on LocalStack, otherwise the default should be fine.","title":"Apache Camel: How I can create AWS SQS and subscribe to SNS topic","body":"<p>I still haven't tried this solution on AWS, but I tested it on LocalStack and it seems to work properly:</p>\n<pre class=\"lang-java prettyprint-override\"><code>    class LocalStack extends org.apache.camel.builder.RouteBuilder {\n        @Override\n        public void configure() throws Exception {\n            AwsBasicCredentials credentials = AwsBasicCredentials.create(&quot;dummy&quot;, &quot;dummy&quot;);\n\n            bindToRegistry(&quot;amazonSQSClient&quot;,\n                    SqsClient.builder()\n                            .endpointOverride(new URI(&quot;http://localhost:4566&quot;))\n                            .credentialsProvider(StaticCredentialsProvider.create(credentials))\n                            .build());\n\n            bindToRegistry(&quot;amazonSNSClient&quot;,\n                    SnsClient.builder()\n                            .endpointOverride(new URI(&quot;http://localhost:4566&quot;))\n                            .credentialsProvider(StaticCredentialsProvider.create(credentials))\n                            .build());\n\n            from(&quot;aws2-sqs://MyQueue?amazonSQSClient=#amazonSQSClient&amp;autoCreateQueue=true&quot;).to(&quot;mock:result&quot;);\n\n            Endpoint endpoint = camelContext.getEndpoint(&quot;aws2-sqs://MyQueue?amazonSQSClient=#amazonSQSClient&amp;autoCreateQueue=true&quot;);\n            Assert.assertTrue(endpoint instanceof Sqs2Endpoint);\n\n            SqsClient sqsClient = ((Sqs2Endpoint) endpoint).getClient();\n            String url = sqsClient.getQueueUrl(builder -&gt; builder.queueName(&quot;MyQueue&quot;)).queueUrl();\n\n            from(&quot;direct:start&quot;)\n                    .to(&quot;aws2-sns://active_inventory-int-public-outgoing-notifications&quot; +\n                            &quot;?autoCreateTopic=true&quot; +\n                            &quot;&amp;amazonSNSClient=#amazonSNSClient&quot; +\n                            &quot;&amp;subscribeSNStoSQS=true&quot; +\n                            &quot;&amp;queueUrl=&quot; + url);\n        }\n</code></pre>\n<p>The code should be self-explanatory. The calls to <code>bindToRegistry</code> are needed just because I'm working on LocalStack, otherwise the default should be fine.</p>\n"}],"owner":{"account_id":14194855,"reputation":11,"user_id":10254458,"display_name":"Mykola Afanasiev"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":539,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1691683632,"creation_date":1625654020,"question_id":68284375,"body_markdown":"I want to create AWS SQS and then subscribe it to an existing SNS topic. For use [this approach][1], from Camel documentation, I must know a queue URL.\r\n```java\r\n//create SQS\r\nfrom(&quot;aws-sqs://MyQueue?amazonSQSClient=#client&amp;delay=5000&amp;maxMessagesPerPoll=5&quot;)\r\n.startupOrder(1)\r\n.to(&quot;mock:result&quot;);\r\n\r\n//create SNS and subscribe to SQS\r\nfrom(&quot;direct:start&quot;)\r\n.startupOrder(2)\r\n.to(&quot;aws-sns://test-camel-sns1?amazonSNSClient=#amazonSNSClient&amp;amazonSQSClient=#amazonSQSClient&amp;subscribeSNStoSQS=true&amp;queueUrl=https://sqs.eu-central-1.amazonaws.com/780410022472/MyQueue&quot;);\r\n```\r\nBut I want to use previously created SQS (I know the name of SQS) and I don&#39;t know the account value(780410022472).\r\nHow can I create SQS and subscribe to SNS without additional information(like an account value) by Camel? \r\n\r\n  [1]: https://camel.apache.org/components/3.4.x/aws-sns-component.html#_create_a_subscription_between_an_aws_sns_topic_and_an_aws_sqs_queue","title":"Apache Camel: How I can create AWS SQS and subscribe to SNS topic","body":"<p>I want to create AWS SQS and then subscribe it to an existing SNS topic. For use <a href=\"https://camel.apache.org/components/3.4.x/aws-sns-component.html#_create_a_subscription_between_an_aws_sns_topic_and_an_aws_sqs_queue\" rel=\"nofollow noreferrer\">this approach</a>, from Camel documentation, I must know a queue URL.</p>\n<pre class=\"lang-java prettyprint-override\"><code>//create SQS\nfrom(&quot;aws-sqs://MyQueue?amazonSQSClient=#client&amp;delay=5000&amp;maxMessagesPerPoll=5&quot;)\n.startupOrder(1)\n.to(&quot;mock:result&quot;);\n\n//create SNS and subscribe to SQS\nfrom(&quot;direct:start&quot;)\n.startupOrder(2)\n.to(&quot;aws-sns://test-camel-sns1?amazonSNSClient=#amazonSNSClient&amp;amazonSQSClient=#amazonSQSClient&amp;subscribeSNStoSQS=true&amp;queueUrl=https://sqs.eu-central-1.amazonaws.com/780410022472/MyQueue&quot;);\n</code></pre>\n<p>But I want to use previously created SQS (I know the name of SQS) and I don't know the account value(780410022472).\nHow can I create SQS and subscribe to SNS without additional information(like an account value) by Camel?</p>\n"},{"tags":["java","arrays","mongodb","mongodb-query","aggregate"],"owner":{"account_id":3887559,"reputation":797,"user_id":3218553,"accept_rate":79,"display_name":"Shabeeralimsn"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":28,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1691683494,"creation_date":1691680560,"question_id":76877109,"body_markdown":"I have the below code to perform and upsert on the MongoDB collection.\r\nupsert operation contains $set, $increment and $cond also.\r\n\r\n\r\n\r\n  \r\n\r\n     try (MongoClient mongoClient = MongoClients.create(&quot;mongodb://localhost:27017&quot;)) {\r\n    \r\n            MongoDatabase database = mongoClient.getDatabase(&quot;DBName&quot;);\r\n    \r\n            MongoCollection&lt;Document&gt; collection = database.getCollection(&quot;collCourse&quot;);\r\n    \r\n            Document globalFilter = new Document();\r\n    \r\n            Document updateQuery = new Document();\r\n    \r\n            System.out.println(&quot;Connected to DB&quot;);\r\n    \r\n            globalFilter.append(&quot;status&quot;, &quot;Open&quot;);\r\n    \r\n            Date eventDtm = new Date();\r\n    \r\n            Document appendDoc = new Document();\r\n    \r\n            Document ds = new Document(&quot;$set&quot;, appendDoc.append(&quot;sn&quot;, &quot;CS&quot;));\r\n    \r\n            appendDoc.append(&quot;rp&quot;, &quot;Invalid&quot;);\r\n            appendDoc.append(&quot;ldtm&quot;, new Date());\r\n            appendDoc.append(&quot;dtim&quot;, &quot;9876&quot;);\r\n    \r\n            updateQuery.putAll(ds);\r\n    \r\n            /** Increment fields **/\r\n            Document incrementOps = new Document(&quot;$inc&quot;,\r\n                            new Document(&quot;dv&quot;, 10).append(&quot;pc&quot;, 1).append(&quot;tc&quot;, 1).append(&quot;tv&quot;, 2).append(&quot;tb&quot;, 3));\r\n    \r\n            updateQuery.putAll(incrementOps);\r\n    \r\n            /** conditionaly update Start and End Dtm **/\r\n            Document updateSdtm = new Document(&quot;$set&quot;, new Document().append(&quot;sdtm&quot;, new Document(&quot;$cond&quot;,\r\n                            Arrays.asList(new Document(&quot;$lt&quot;, Arrays.asList(eventDtm, &quot;$sdtm&quot;)), eventDtm, &quot;$sdtm&quot;))));\r\n    \r\n            Document updateEdtm = new Document(&quot;$set&quot;, new Document().append(&quot;edtm&quot;, new Document(&quot;$cond&quot;,\r\n                            Arrays.asList(new Document(&quot;$gt&quot;, Arrays.asList(eventDtm, &quot;$edtm&quot;)), eventDtm, &quot;$edtm&quot;))));\r\n    \r\n            updateQuery.putAll(updateSdtm);\r\n            updateQuery.putAll(updateEdtm);\r\n            \r\n           \r\n            collection.updateMany(globalFilter, Arrays.asList(updateQuery), new UpdateOptions().upsert(true));\r\n            \r\n            System.out.println(&quot;Done&quot;);\r\n    \r\n    }\r\n\r\nwhile running this I am getting an error \r\n\r\n&gt; com.mongodb.MongoCommandException: Command failed with error 40323\r\n&gt; (Location40323): &#39;A pipeline stage specification object must contain\r\n&gt; exactly one field.&#39; on server localhost:27017. The full response is\r\n&gt; {&quot;ok&quot;: 0.0, &quot;errmsg&quot;: &quot;A pipeline stage specification object must\r\n&gt; contain exactly one field.&quot;, &quot;code&quot;: 40323, &quot;codeName&quot;:\r\n&gt; &quot;Location40323&quot;} \tat\r\n&gt; com.mongodb.internal.connection.ProtocolHelper.getCommandFailureException(ProtocolHelper.java:205)\r\n\r\n\r\nI tried multiple ways. Could someone suggest the best way to perform upsert with increment and set(with condition) operators?","title":"Java client throwing A pipeline stage specification object must contain exactly one field error","body":"<p>I have the below code to perform and upsert on the MongoDB collection.\nupsert operation contains $set, $increment and $cond also.</p>\n<pre><code> try (MongoClient mongoClient = MongoClients.create(&quot;mongodb://localhost:27017&quot;)) {\n\n        MongoDatabase database = mongoClient.getDatabase(&quot;DBName&quot;);\n\n        MongoCollection&lt;Document&gt; collection = database.getCollection(&quot;collCourse&quot;);\n\n        Document globalFilter = new Document();\n\n        Document updateQuery = new Document();\n\n        System.out.println(&quot;Connected to DB&quot;);\n\n        globalFilter.append(&quot;status&quot;, &quot;Open&quot;);\n\n        Date eventDtm = new Date();\n\n        Document appendDoc = new Document();\n\n        Document ds = new Document(&quot;$set&quot;, appendDoc.append(&quot;sn&quot;, &quot;CS&quot;));\n\n        appendDoc.append(&quot;rp&quot;, &quot;Invalid&quot;);\n        appendDoc.append(&quot;ldtm&quot;, new Date());\n        appendDoc.append(&quot;dtim&quot;, &quot;9876&quot;);\n\n        updateQuery.putAll(ds);\n\n        /** Increment fields **/\n        Document incrementOps = new Document(&quot;$inc&quot;,\n                        new Document(&quot;dv&quot;, 10).append(&quot;pc&quot;, 1).append(&quot;tc&quot;, 1).append(&quot;tv&quot;, 2).append(&quot;tb&quot;, 3));\n\n        updateQuery.putAll(incrementOps);\n\n        /** conditionaly update Start and End Dtm **/\n        Document updateSdtm = new Document(&quot;$set&quot;, new Document().append(&quot;sdtm&quot;, new Document(&quot;$cond&quot;,\n                        Arrays.asList(new Document(&quot;$lt&quot;, Arrays.asList(eventDtm, &quot;$sdtm&quot;)), eventDtm, &quot;$sdtm&quot;))));\n\n        Document updateEdtm = new Document(&quot;$set&quot;, new Document().append(&quot;edtm&quot;, new Document(&quot;$cond&quot;,\n                        Arrays.asList(new Document(&quot;$gt&quot;, Arrays.asList(eventDtm, &quot;$edtm&quot;)), eventDtm, &quot;$edtm&quot;))));\n\n        updateQuery.putAll(updateSdtm);\n        updateQuery.putAll(updateEdtm);\n        \n       \n        collection.updateMany(globalFilter, Arrays.asList(updateQuery), new UpdateOptions().upsert(true));\n        \n        System.out.println(&quot;Done&quot;);\n\n}\n</code></pre>\n<p>while running this I am getting an error</p>\n<blockquote>\n<p>com.mongodb.MongoCommandException: Command failed with error 40323\n(Location40323): 'A pipeline stage specification object must contain\nexactly one field.' on server localhost:27017. The full response is\n{&quot;ok&quot;: 0.0, &quot;errmsg&quot;: &quot;A pipeline stage specification object must\ncontain exactly one field.&quot;, &quot;code&quot;: 40323, &quot;codeName&quot;:\n&quot;Location40323&quot;}  at\ncom.mongodb.internal.connection.ProtocolHelper.getCommandFailureException(ProtocolHelper.java:205)</p>\n</blockquote>\n<p>I tried multiple ways. Could someone suggest the best way to perform upsert with increment and set(with condition) operators?</p>\n"},{"tags":["java","spring","spring-boot"],"answers":[{"tags":[],"owner":{"account_id":24440940,"reputation":3122,"user_id":18364656,"display_name":"Andrei Lisa"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691683391,"creation_date":1691683391,"answer_id":76877499,"question_id":76877151,"body_markdown":"About `default`:\r\nDefault profile used by Spring profile is the `default`. All the beans with no profile annotation are specified belongs to the default profile.\r\n\r\nAbout your current `.yml` config, is declared that if `config.activate.on-profile:` equals with `local` you will have another database instead `H2`, for more details check this one resource [spring.config.activate.on-profile][1]. \r\n\r\nIn your case to change the profile try to replace:\r\n\r\n        spring:\r\n          config.activate.on-profile: local\r\n\r\nTo:\r\n\r\n        spring:\r\n          profiles:\r\n            active: local\r\n\r\nAnd check if, the `default` profile was changed to `local` and of course if database also was change to another one instead `H2` \r\n\r\nAlso i recommend you to have a look at [configuration.set-active-spring-profiles][2]\r\n\r\nLet me know if it helped you.\r\n\r\n\r\n  [1]: https://docs.spring.io/spring-boot/docs/3.0.0-M4/reference/htmlsingle/#howto.properties-and-configuration.change-configuration-depending-on-the-environment\r\n  [2]: https://docs.spring.io/spring-boot/docs/3.0.0-M4/reference/htmlsingle/#howto.properties-and-configuration.set-active-spring-profiles","title":"Use something other than H2 for local Build and Unit Tests","body":"<p>About <code>default</code>:\nDefault profile used by Spring profile is the <code>default</code>. All the beans with no profile annotation are specified belongs to the default profile.</p>\n<p>About your current <code>.yml</code> config, is declared that if <code>config.activate.on-profile:</code> equals with <code>local</code> you will have another database instead <code>H2</code>, for more details check this one resource <a href=\"https://docs.spring.io/spring-boot/docs/3.0.0-M4/reference/htmlsingle/#howto.properties-and-configuration.change-configuration-depending-on-the-environment\" rel=\"nofollow noreferrer\">spring.config.activate.on-profile</a>.</p>\n<p>In your case to change the profile try to replace:</p>\n<pre><code>    spring:\n      config.activate.on-profile: local\n</code></pre>\n<p>To:</p>\n<pre><code>    spring:\n      profiles:\n        active: local\n</code></pre>\n<p>And check if, the <code>default</code> profile was changed to <code>local</code> and of course if database also was change to another one instead <code>H2</code></p>\n<p>Also i recommend you to have a look at <a href=\"https://docs.spring.io/spring-boot/docs/3.0.0-M4/reference/htmlsingle/#howto.properties-and-configuration.set-active-spring-profiles\" rel=\"nofollow noreferrer\">configuration.set-active-spring-profiles</a></p>\n<p>Let me know if it helped you.</p>\n"}],"owner":{"account_id":7087876,"reputation":2294,"user_id":5424117,"accept_rate":56,"display_name":"jb62"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":45,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1691683391,"creation_date":1691680790,"question_id":76877151,"body_markdown":"I have inherited a Spring Boot app that spins up and runs an H2 in-memory database when I Build or run Unit Tests locally.\r\n\r\nI want to address a &quot;real&quot; database instead. I don&#39;t know how to configure this or if it&#39;s even possible to somehow override whatever is happening.\r\n\r\nI suspect it comes from a Spring profile, but I&#39;m not sure.\r\n\r\nHere is what I do have in the application.yaml file. To my mind this implies a &quot;default&quot; profile (which is not mentioned anywhere in the yaml file) that Spring uses to fire up the H2 database, but I could be wrong.\r\n```yaml\r\n# list of things that the local profile does that default doesn&#39;t:\r\n# uses mysql instead of h2\r\n# logs all queries\r\n# emails erdteam\r\nspring:\r\n  config.activate.on-profile: local\r\n  datasource:\r\n    url: jdbc:mysql://localhost/my_database?useSSL=false&amp;createDatabaseIfNotExist=true&amp;useConfigs=maxPerformance&amp;useCursorFetch=true&amp;profileSQL=true\r\n    username: root\r\n    password: root\r\n  jpa.show-sql: true\r\n```","title":"Use something other than H2 for local Build and Unit Tests","body":"<p>I have inherited a Spring Boot app that spins up and runs an H2 in-memory database when I Build or run Unit Tests locally.</p>\n<p>I want to address a &quot;real&quot; database instead. I don't know how to configure this or if it's even possible to somehow override whatever is happening.</p>\n<p>I suspect it comes from a Spring profile, but I'm not sure.</p>\n<p>Here is what I do have in the application.yaml file. To my mind this implies a &quot;default&quot; profile (which is not mentioned anywhere in the yaml file) that Spring uses to fire up the H2 database, but I could be wrong.</p>\n<pre class=\"lang-yaml prettyprint-override\"><code># list of things that the local profile does that default doesn't:\n# uses mysql instead of h2\n# logs all queries\n# emails erdteam\nspring:\n  config.activate.on-profile: local\n  datasource:\n    url: jdbc:mysql://localhost/my_database?useSSL=false&amp;createDatabaseIfNotExist=true&amp;useConfigs=maxPerformance&amp;useCursorFetch=true&amp;profileSQL=true\n    username: root\n    password: root\n  jpa.show-sql: true\n</code></pre>\n"},{"tags":["java","spring-boot","spring-security","java-security"],"owner":{"account_id":10758528,"reputation":11,"user_id":7915706,"display_name":"Gavin Hunt"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":19,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1691683266,"creation_date":1691683266,"question_id":76877477,"body_markdown":"I&#39;ve come across a bizzare problem that has been plagueing me for days now as I cant seem to find the cause. I have a Spring boot application that on request returns some not very sensitive information that has been signed. (example code below) \r\nNow whats causing confusion is its runtime behaviour on one of my Ubuntu servers a colleague has. The tests written pass on both my windows machine and on the Ubuntu server but when running I get a BadPaddingException thrown within RSACore.java:200 available to view here: [git](https://github.com/frohoff/jdk8u-jdk/blob/master/src/share/classes/sun/security/rsa/RSACore.java)\r\nnow for the stripped down code:\r\n\r\n```\r\nSignature signer = Signature.getInstance(&quot;SHA1withRSA&quot;);\r\nPrivateKey key = KeyFactory.getInstance(&quot;RSA&quot;).generatePrivate(new PKCS8EncodedKeySpec(PRIVATE_KEY_BYTES));\r\nsigner.initSign(key);\r\nsigner.update(BASE_64_ENCODED_STRING.getBytes());\r\nbyte[] bytes = signer.sign();//EXCEPTION IS THROWN HERE WHILST RUNNING ONLY ON UBUNTU SERVER\r\n//returns object that has byte[] &#39;obj&#39; and Base64.getEncoder().encodeToString(bytes) &#39;sig&#39;;\r\n```\r\n\r\nnow what makes this a little more confusing is that it runs and returns correctly the signed oject I expect and it can decoded on windows and mac machines just fine.\r\n\r\nA test that runs successfully on both machines is similar to this:\r\n\r\n\r\n```\r\nresponse = callAboveCode(BASE_64_ENCODED_STRING);\r\nSignature verify = Signature.getInstance(&quot;SHA1withRSA&quot;);\r\nPublicKey key = KeyFactory.getInstance(&quot;RSA&quot;).generatePublic(new X509EncodedKeySpec(PUBLIC_KEY_BYTES));\r\nverify.initVerify(key);\r\nverify.update(response.obj);\r\nassertTrue(verify.verify(Base64.getDecoder().decode(response.sig)));\r\n```\r\n\r\nI shouldnt need to provide the public or private key byte[]&#39;s here as ive checked on both machines they are identical. Ive also checked that both machines are using the same jdk 1.8 and have identical BASE_64_ENCODED_STRING content fed into the function.\r\n\r\nAnything I can try next would be awesome! And if someones come across a similar issue how have you gone about resolving it?\r\n\r\nP.S. I cant re-make my public and private keys as they are already in my application and are working as intended if i produce the signed content on a windows machine.\r\n\r\nI&#39;ve tried setting the Signature provider and I get a similar error from BouncyCastleProvider that looks to be throwing at the exact same place/check that the RSACore class does : [BouncyCastleSource](http://www.java2s.com/example/java-src/pkg/org/bouncycastle/crypto/engines/rsablindedengine-e697f.html) at the check for arjen lenstras crt attack &#39;if (!input.equals(result.modPow(e, m)))&#39;","title":"What could cause this BadPaddingException to be thrown from within Java 1.8 Signature.sign()?","body":"<p>I've come across a bizzare problem that has been plagueing me for days now as I cant seem to find the cause. I have a Spring boot application that on request returns some not very sensitive information that has been signed. (example code below)\nNow whats causing confusion is its runtime behaviour on one of my Ubuntu servers a colleague has. The tests written pass on both my windows machine and on the Ubuntu server but when running I get a BadPaddingException thrown within RSACore.java:200 available to view here: <a href=\"https://github.com/frohoff/jdk8u-jdk/blob/master/src/share/classes/sun/security/rsa/RSACore.java\" rel=\"nofollow noreferrer\">git</a>\nnow for the stripped down code:</p>\n<pre><code>Signature signer = Signature.getInstance(&quot;SHA1withRSA&quot;);\nPrivateKey key = KeyFactory.getInstance(&quot;RSA&quot;).generatePrivate(new PKCS8EncodedKeySpec(PRIVATE_KEY_BYTES));\nsigner.initSign(key);\nsigner.update(BASE_64_ENCODED_STRING.getBytes());\nbyte[] bytes = signer.sign();//EXCEPTION IS THROWN HERE WHILST RUNNING ONLY ON UBUNTU SERVER\n//returns object that has byte[] 'obj' and Base64.getEncoder().encodeToString(bytes) 'sig';\n</code></pre>\n<p>now what makes this a little more confusing is that it runs and returns correctly the signed oject I expect and it can decoded on windows and mac machines just fine.</p>\n<p>A test that runs successfully on both machines is similar to this:</p>\n<pre><code>response = callAboveCode(BASE_64_ENCODED_STRING);\nSignature verify = Signature.getInstance(&quot;SHA1withRSA&quot;);\nPublicKey key = KeyFactory.getInstance(&quot;RSA&quot;).generatePublic(new X509EncodedKeySpec(PUBLIC_KEY_BYTES));\nverify.initVerify(key);\nverify.update(response.obj);\nassertTrue(verify.verify(Base64.getDecoder().decode(response.sig)));\n</code></pre>\n<p>I shouldnt need to provide the public or private key byte[]'s here as ive checked on both machines they are identical. Ive also checked that both machines are using the same jdk 1.8 and have identical BASE_64_ENCODED_STRING content fed into the function.</p>\n<p>Anything I can try next would be awesome! And if someones come across a similar issue how have you gone about resolving it?</p>\n<p>P.S. I cant re-make my public and private keys as they are already in my application and are working as intended if i produce the signed content on a windows machine.</p>\n<p>I've tried setting the Signature provider and I get a similar error from BouncyCastleProvider that looks to be throwing at the exact same place/check that the RSACore class does : <a href=\"http://www.java2s.com/example/java-src/pkg/org/bouncycastle/crypto/engines/rsablindedengine-e697f.html\" rel=\"nofollow noreferrer\">BouncyCastleSource</a> at the check for arjen lenstras crt attack 'if (!input.equals(result.modPow(e, m)))'</p>\n"},{"tags":["java","mysql","kotlin","jndi","tomcat8"],"comments":[{"owner":{"account_id":372682,"reputation":22426,"user_id":721855,"display_name":"aled"},"score":1,"creation_date":1691683596,"post_id":76877357,"comment_id":135527771,"body_markdown":"I guess that if that was possible it could be a security vulnerability.","body":"I guess that if that was possible it could be a security vulnerability."},{"owner":{"account_id":10180794,"reputation":73,"user_id":7517656,"accept_rate":67,"display_name":"TheBudderBomb"},"score":0,"creation_date":1691695468,"post_id":76877357,"comment_id":135530061,"body_markdown":"After further consideration I suppose you&#39;re entirely correct. I hadnt thought of it that way","body":"After further consideration I suppose you&#39;re entirely correct. I hadnt thought of it that way"}],"owner":{"account_id":10180794,"reputation":73,"user_id":7517656,"accept_rate":67,"display_name":"TheBudderBomb"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":25,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1691682406,"creation_date":1691682406,"question_id":76877357,"body_markdown":"Ive been provided a mysql datasource to work with defined in my tomcat server.xml file, and I do not have the power to edit the datasource directly. However, I&#39;ve run into an exception on zeroed timestamp conversion - which would typically require me to edit the URL on the datasource to include a suffix like `?zeroDateTimeBehavior=convertToNull`. I&#39;m accessing the datasource via JndiDatasourceLookup - is there a way for me to programmatically add that suffix onto the connection?","title":"Append URL parameter to server.xml datasource","body":"<p>Ive been provided a mysql datasource to work with defined in my tomcat server.xml file, and I do not have the power to edit the datasource directly. However, I've run into an exception on zeroed timestamp conversion - which would typically require me to edit the URL on the datasource to include a suffix like <code>?zeroDateTimeBehavior=convertToNull</code>. I'm accessing the datasource via JndiDatasourceLookup - is there a way for me to programmatically add that suffix onto the connection?</p>\n"},{"tags":["java","apache-spark","java-8","user-defined-functions"],"answers":[{"tags":[],"owner":{"account_id":1017255,"reputation":1526,"user_id":1028537,"display_name":"Chris"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1691682133,"creation_date":1691682133,"answer_id":76877326,"question_id":76876617,"body_markdown":"See [here](https://stackoverflow.com/questions/50949384/how-to-create-a-spark-udf-in-java-kotlin-which-returns-a-complex-type).\r\n\r\nUDFs aren&#39;t, out of the box, supporting complex types and you are forced to use Row directly.  For Scala there was https://github.com/gaborbarna/typedudf and _is_ https://github.com/typelevel/frameless providing typed udf&#39;s that derive and use encoders correctly to work with Row.\r\n\r\nThat said if you can live without using the udf function in sql then you can define this helper function using the encoders which will work for any param types (tested on Spark 3.4.1, ScalaUDF may be different on other versions):\r\n\r\n```java\r\npublic &lt;A, B, R&gt; BiFunction&lt;Column, Column, Column&gt; withEncoders(UDF2&lt;A, B, R&gt; udf2, String name, Encoder&lt;A&gt; encA, Encoder&lt;B&gt; encB, Encoder&lt;R&gt; encR, DataType returnType){\r\n    DataType replaced = CharVarcharUtils.failIfHasCharVarchar(returnType);\r\n    scala.Function2&lt;A, B, R&gt; func = new scala.runtime.AbstractFunction2&lt;A, B, R&gt;(){\r\n\r\n        @Override\r\n        public Object apply(Object v1, Object v2) {\r\n            try {\r\n                return ((UDF2&lt;Object, Object, Object&gt;) udf2).call(v1, v2);\r\n            } catch (Exception e) {\r\n                e.printStackTrace();\r\n                return null;\r\n            }\r\n        }\r\n    };\r\n    return (Column a, Column b) -&gt; {\r\n        ScalaUDF udf = new ScalaUDF(func, replaced, Seq$.MODULE$.&lt; Expression&gt;newBuilder().$plus$eq(a.expr()).$plus$eq(b.expr()).result(),\r\n                Seq$.MODULE$.&lt; scala.Option&lt;ExpressionEncoder&lt;?&gt;&gt; &gt;newBuilder().$plus$eq(Some$.MODULE$.apply((ExpressionEncoder&lt;A&gt;) encA)).\r\n                        $plus$eq(Some$.MODULE$.apply((ExpressionEncoder&lt;B&gt;)encB)).result(),\r\n                Some$.MODULE$.apply((ExpressionEncoder&lt;R&gt;) encR), Some$.MODULE$.apply(name), true, true);\r\n        return new Column(udf);\r\n    };\r\n}\r\n```\r\n\r\nThen:\r\n\r\n```java\r\nUDF2&lt;Integer, Tuple2&lt;Double, String&gt;, Tuple2&lt;Double, String&gt;&gt; calculateScoreRaw = (feature, ScoreValueAndReason) -&gt; {\r\n    double new_ScoreValue = 0.5;\r\n\r\n    String new_ScoreReason = &quot;Null Issue&quot;;\r\n    double ScoreValue = ScoreValueAndReason._1();\r\n    String ScoreReason = ScoreValueAndReason._2();\r\n\r\n    double updated_ScoreValue = Math.min(ScoreValue, new_ScoreValue);\r\n    String updated_ScoreReason = new_ScoreValue &lt; ScoreValue ? new_ScoreReason: ScoreReason;\r\n\r\n    return new Tuple2&lt;&gt;(updated_ScoreValue, updated_ScoreReason);\r\n\r\n};\r\n\r\nEncoder&lt;Tuple2&lt;Double, String&gt;&gt; dsTEncoder = Encoders.tuple(Encoders.DOUBLE(), Encoders.STRING());\r\n\r\nBiFunction&lt;Column, Column, Column&gt; calculateScore = withEncoders(calculateScoreRaw, &quot;calculateScore&quot;,\r\n        Encoders.INT(), dsTEncoder, dsTEncoder\r\n        , DataTypes.createStructType(new StructField[]{\r\n        new StructField(&quot;_1&quot;, DataTypes.DoubleType, false, Metadata.empty()),\r\n        new StructField(&quot;_2&quot;, DataTypes.StringType, false, Metadata.empty())\r\n}));\r\n\r\nDataset&lt;Row&gt; df = spark.createDataFrame(Arrays.asList(\r\n        RowFactory.create(1, 2, 3, 4),\r\n        RowFactory.create(2, 1, 4, 3),\r\n        RowFactory.create(3, 4, 9, 2),\r\n        RowFactory.create(4, 3, 2, 1)\r\n), new StructType(new StructField[]{\r\n        new StructField(&quot;A&quot;, DataTypes.IntegerType, true, Metadata.empty()),\r\n        new StructField(&quot;B&quot;, DataTypes.IntegerType, true, Metadata.empty()),\r\n        new StructField(&quot;C&quot;, DataTypes.IntegerType, true, Metadata.empty()),\r\n        new StructField(&quot;D&quot;, DataTypes.IntegerType, true, Metadata.empty())\r\n}));\r\n\r\nString[] columnNames = df.columns();\r\n\r\ndf = df.withColumn(&quot;ScoreValueAndReason&quot;,\r\n        functions.struct(functions.lit(1.0), functions.lit(&quot;No issues&quot;))\r\n);\r\ndf.show();\r\n\r\n// Register the UDF\r\n//spark.udf().register(&quot;calculateScore&quot;, calculateScore, );\r\n\r\nfor (String columnName: columnNames) {\r\n    df = df.withColumn(columnName, calculateScore.apply( col(columnName), col(&quot;ScoreValueAndReason&quot;)));\r\n}\r\ndf.show();\r\n```\r\n\r\nproduces:\r\n\r\n```\r\n+-----------------+-----------------+-----------------+-----------------+-------------------+\r\n|                A|                B|                C|                D|ScoreValueAndReason|\r\n+-----------------+-----------------+-----------------+-----------------+-------------------+\r\n|{0.5, Null Issue}|{0.5, Null Issue}|{0.5, Null Issue}|{0.5, Null Issue}|   {1.0, No issues}|\r\n|{0.5, Null Issue}|{0.5, Null Issue}|{0.5, Null Issue}|{0.5, Null Issue}|   {1.0, No issues}|\r\n|{0.5, Null Issue}|{0.5, Null Issue}|{0.5, Null Issue}|{0.5, Null Issue}|   {1.0, No issues}|\r\n|{0.5, Null Issue}|{0.5, Null Issue}|{0.5, Null Issue}|{0.5, Null Issue}|   {1.0, No issues}|\r\n+-----------------+-----------------+-----------------+-----------------+-------------------+\r\n```\r\n\r\nso a few bits have moved around from your original source (crucially the columnNames also has to move up otherwise it&#39;ll incorrectly include ScoreValueAndReason).\r\n\r\nThe creation of the ScalaUDF maker:\r\n\r\n```java\r\nBiFunction&lt;Column, Column, Column&gt; calculateScore = withEncoders(calculateScoreRaw, &quot;calculateScore&quot;,\r\n        Encoders.INT(), dsTEncoder, dsTEncoder\r\n        , DataTypes.createStructType(new StructField[]{\r\n        new StructField(&quot;_1&quot;, DataTypes.DoubleType, false, Metadata.empty()),\r\n        new StructField(&quot;_2&quot;, DataTypes.StringType, false, Metadata.empty())\r\n}));\r\n```\r\n\r\npasses in the original UDF you defined, with the correct encoders and the return type.  You can also make this sql callable but that&#39;s [another question&#39;s answer](https://stackoverflow.com/a/76838424/1028537).","title":"How to create a Spark UDF that returns a Tuple or updates two columns at the same time?","body":"<p>See <a href=\"https://stackoverflow.com/questions/50949384/how-to-create-a-spark-udf-in-java-kotlin-which-returns-a-complex-type\">here</a>.</p>\n<p>UDFs aren't, out of the box, supporting complex types and you are forced to use Row directly.  For Scala there was <a href=\"https://github.com/gaborbarna/typedudf\" rel=\"nofollow noreferrer\">https://github.com/gaborbarna/typedudf</a> and <em>is</em> <a href=\"https://github.com/typelevel/frameless\" rel=\"nofollow noreferrer\">https://github.com/typelevel/frameless</a> providing typed udf's that derive and use encoders correctly to work with Row.</p>\n<p>That said if you can live without using the udf function in sql then you can define this helper function using the encoders which will work for any param types (tested on Spark 3.4.1, ScalaUDF may be different on other versions):</p>\n<pre class=\"lang-java prettyprint-override\"><code>public &lt;A, B, R&gt; BiFunction&lt;Column, Column, Column&gt; withEncoders(UDF2&lt;A, B, R&gt; udf2, String name, Encoder&lt;A&gt; encA, Encoder&lt;B&gt; encB, Encoder&lt;R&gt; encR, DataType returnType){\n    DataType replaced = CharVarcharUtils.failIfHasCharVarchar(returnType);\n    scala.Function2&lt;A, B, R&gt; func = new scala.runtime.AbstractFunction2&lt;A, B, R&gt;(){\n\n        @Override\n        public Object apply(Object v1, Object v2) {\n            try {\n                return ((UDF2&lt;Object, Object, Object&gt;) udf2).call(v1, v2);\n            } catch (Exception e) {\n                e.printStackTrace();\n                return null;\n            }\n        }\n    };\n    return (Column a, Column b) -&gt; {\n        ScalaUDF udf = new ScalaUDF(func, replaced, Seq$.MODULE$.&lt; Expression&gt;newBuilder().$plus$eq(a.expr()).$plus$eq(b.expr()).result(),\n                Seq$.MODULE$.&lt; scala.Option&lt;ExpressionEncoder&lt;?&gt;&gt; &gt;newBuilder().$plus$eq(Some$.MODULE$.apply((ExpressionEncoder&lt;A&gt;) encA)).\n                        $plus$eq(Some$.MODULE$.apply((ExpressionEncoder&lt;B&gt;)encB)).result(),\n                Some$.MODULE$.apply((ExpressionEncoder&lt;R&gt;) encR), Some$.MODULE$.apply(name), true, true);\n        return new Column(udf);\n    };\n}\n</code></pre>\n<p>Then:</p>\n<pre class=\"lang-java prettyprint-override\"><code>UDF2&lt;Integer, Tuple2&lt;Double, String&gt;, Tuple2&lt;Double, String&gt;&gt; calculateScoreRaw = (feature, ScoreValueAndReason) -&gt; {\n    double new_ScoreValue = 0.5;\n\n    String new_ScoreReason = &quot;Null Issue&quot;;\n    double ScoreValue = ScoreValueAndReason._1();\n    String ScoreReason = ScoreValueAndReason._2();\n\n    double updated_ScoreValue = Math.min(ScoreValue, new_ScoreValue);\n    String updated_ScoreReason = new_ScoreValue &lt; ScoreValue ? new_ScoreReason: ScoreReason;\n\n    return new Tuple2&lt;&gt;(updated_ScoreValue, updated_ScoreReason);\n\n};\n\nEncoder&lt;Tuple2&lt;Double, String&gt;&gt; dsTEncoder = Encoders.tuple(Encoders.DOUBLE(), Encoders.STRING());\n\nBiFunction&lt;Column, Column, Column&gt; calculateScore = withEncoders(calculateScoreRaw, &quot;calculateScore&quot;,\n        Encoders.INT(), dsTEncoder, dsTEncoder\n        , DataTypes.createStructType(new StructField[]{\n        new StructField(&quot;_1&quot;, DataTypes.DoubleType, false, Metadata.empty()),\n        new StructField(&quot;_2&quot;, DataTypes.StringType, false, Metadata.empty())\n}));\n\nDataset&lt;Row&gt; df = spark.createDataFrame(Arrays.asList(\n        RowFactory.create(1, 2, 3, 4),\n        RowFactory.create(2, 1, 4, 3),\n        RowFactory.create(3, 4, 9, 2),\n        RowFactory.create(4, 3, 2, 1)\n), new StructType(new StructField[]{\n        new StructField(&quot;A&quot;, DataTypes.IntegerType, true, Metadata.empty()),\n        new StructField(&quot;B&quot;, DataTypes.IntegerType, true, Metadata.empty()),\n        new StructField(&quot;C&quot;, DataTypes.IntegerType, true, Metadata.empty()),\n        new StructField(&quot;D&quot;, DataTypes.IntegerType, true, Metadata.empty())\n}));\n\nString[] columnNames = df.columns();\n\ndf = df.withColumn(&quot;ScoreValueAndReason&quot;,\n        functions.struct(functions.lit(1.0), functions.lit(&quot;No issues&quot;))\n);\ndf.show();\n\n// Register the UDF\n//spark.udf().register(&quot;calculateScore&quot;, calculateScore, );\n\nfor (String columnName: columnNames) {\n    df = df.withColumn(columnName, calculateScore.apply( col(columnName), col(&quot;ScoreValueAndReason&quot;)));\n}\ndf.show();\n</code></pre>\n<p>produces:</p>\n<pre><code>+-----------------+-----------------+-----------------+-----------------+-------------------+\n|                A|                B|                C|                D|ScoreValueAndReason|\n+-----------------+-----------------+-----------------+-----------------+-------------------+\n|{0.5, Null Issue}|{0.5, Null Issue}|{0.5, Null Issue}|{0.5, Null Issue}|   {1.0, No issues}|\n|{0.5, Null Issue}|{0.5, Null Issue}|{0.5, Null Issue}|{0.5, Null Issue}|   {1.0, No issues}|\n|{0.5, Null Issue}|{0.5, Null Issue}|{0.5, Null Issue}|{0.5, Null Issue}|   {1.0, No issues}|\n|{0.5, Null Issue}|{0.5, Null Issue}|{0.5, Null Issue}|{0.5, Null Issue}|   {1.0, No issues}|\n+-----------------+-----------------+-----------------+-----------------+-------------------+\n</code></pre>\n<p>so a few bits have moved around from your original source (crucially the columnNames also has to move up otherwise it'll incorrectly include ScoreValueAndReason).</p>\n<p>The creation of the ScalaUDF maker:</p>\n<pre class=\"lang-java prettyprint-override\"><code>BiFunction&lt;Column, Column, Column&gt; calculateScore = withEncoders(calculateScoreRaw, &quot;calculateScore&quot;,\n        Encoders.INT(), dsTEncoder, dsTEncoder\n        , DataTypes.createStructType(new StructField[]{\n        new StructField(&quot;_1&quot;, DataTypes.DoubleType, false, Metadata.empty()),\n        new StructField(&quot;_2&quot;, DataTypes.StringType, false, Metadata.empty())\n}));\n</code></pre>\n<p>passes in the original UDF you defined, with the correct encoders and the return type.  You can also make this sql callable but that's <a href=\"https://stackoverflow.com/a/76838424/1028537\">another question's answer</a>.</p>\n"}],"owner":{"account_id":29200010,"reputation":3,"user_id":22370342,"display_name":"Ahmed Troudi"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":71,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76877326,"answer_count":1,"score":0,"last_activity_date":1691682133,"creation_date":1691677212,"question_id":76876617,"body_markdown":"I&#39;m trying to create UDF in java that performs a computation by iterating over all columns in the dataset, calculates a score for each column and sets a flag with a specific string. I tried having a UDF that updates two columns at the same time but no success. So my current approach is to have a single column composed of a tuple that I plan on splitting into two in a subsequent step.\r\n\r\nThis is my attempt (example code):\r\n\r\n```\r\npublic static void main(String[] args) {\r\n        // Spark session\r\n        SparkSession spark = SparkSession.builder()\r\n                .appName(&quot;UDFExample&quot;)\r\n                .config(&quot;spark.master&quot;, &quot;local&quot;)\r\n                .getOrCreate();\r\n\r\n\r\n        UDF2&lt;Integer, Tuple2&lt;Double, String&gt;, Tuple2&lt;Double, String&gt;&gt; calculateScore = (feature, ScoreValueAndReason) -&gt; {\r\n            double new_ScoreValue = 0.5;\r\n\r\n            String new_ScoreReason = &quot;Null Issue&quot;;\r\n            double ScoreValue = ScoreValueAndReason._1();\r\n            String ScoreReason = ScoreValueAndReason._2();\r\n\r\n            double updated_ScoreValue = Math.min(ScoreValue, new_ScoreValue);\r\n            String updated_ScoreReason = new_ScoreValue &lt; ScoreValue ? new_ScoreReason: ScoreReason;\r\n\r\n            return new Tuple2&lt;&gt;(updated_ScoreValue, updated_ScoreReason);\r\n\r\n        };\r\n        Dataset&lt;Row&gt; df = spark.createDataFrame(Arrays.asList(\r\n                RowFactory.create(1, 2, 3, 4),\r\n                RowFactory.create(2, 1, 4, 3),\r\n                RowFactory.create(3, 4, 9, 2),\r\n                RowFactory.create(4, 3, 2, 1)\r\n        ), new StructType(new StructField[]{\r\n                new StructField(&quot;A&quot;, DataTypes.IntegerType, true, Metadata.empty()),\r\n                new StructField(&quot;B&quot;, DataTypes.IntegerType, true, Metadata.empty()),\r\n                new StructField(&quot;C&quot;, DataTypes.IntegerType, true, Metadata.empty()),\r\n                new StructField(&quot;D&quot;, DataTypes.IntegerType, true, Metadata.empty())\r\n        }));\r\n\r\n        df = df.withColumn(&quot;ScoreValueAndReason&quot;,\r\n                functions.struct(functions.lit(1.0), functions.lit(&quot;No issues&quot;))\r\n        );\r\n        df.show();\r\n\r\n        // Register the UDF\r\n        spark.udf().register(&quot;calculateScore&quot;, calculateScore, DataTypes.createStructType(new StructField[]{\r\n                new StructField(&quot;_1&quot;, DataTypes.DoubleType, false, Metadata.empty()),\r\n                new StructField(&quot;_2&quot;, DataTypes.StringType, false, Metadata.empty())\r\n        }));\r\n\r\n        String[] columnNames = df.columns();\r\n        for (String columnName: columnNames) {\r\n            df = df.withColumn(columnName, functions.callUDF(&quot;calculateScore&quot;, col(columnName), col(&quot;ScoreValueAndReason&quot;)));\r\n        }\r\n        df.show();\r\n```\r\n\r\nI tried the implementation above as well as a slightly different udf, but I keep running into this error: `org.apache.spark.sql.catalyst.expressions.GenericRowWithSchema incompatible with scala.Tuple2`\r\n\r\nI expect a resulting dataframe with either two new columns scoreeReason and scoreValue or (more like in the example I provided) a single column scoreReasonAndValue that contains the values updated by my udf.","title":"How to create a Spark UDF that returns a Tuple or updates two columns at the same time?","body":"<p>I'm trying to create UDF in java that performs a computation by iterating over all columns in the dataset, calculates a score for each column and sets a flag with a specific string. I tried having a UDF that updates two columns at the same time but no success. So my current approach is to have a single column composed of a tuple that I plan on splitting into two in a subsequent step.</p>\n<p>This is my attempt (example code):</p>\n<pre><code>public static void main(String[] args) {\n        // Spark session\n        SparkSession spark = SparkSession.builder()\n                .appName(&quot;UDFExample&quot;)\n                .config(&quot;spark.master&quot;, &quot;local&quot;)\n                .getOrCreate();\n\n\n        UDF2&lt;Integer, Tuple2&lt;Double, String&gt;, Tuple2&lt;Double, String&gt;&gt; calculateScore = (feature, ScoreValueAndReason) -&gt; {\n            double new_ScoreValue = 0.5;\n\n            String new_ScoreReason = &quot;Null Issue&quot;;\n            double ScoreValue = ScoreValueAndReason._1();\n            String ScoreReason = ScoreValueAndReason._2();\n\n            double updated_ScoreValue = Math.min(ScoreValue, new_ScoreValue);\n            String updated_ScoreReason = new_ScoreValue &lt; ScoreValue ? new_ScoreReason: ScoreReason;\n\n            return new Tuple2&lt;&gt;(updated_ScoreValue, updated_ScoreReason);\n\n        };\n        Dataset&lt;Row&gt; df = spark.createDataFrame(Arrays.asList(\n                RowFactory.create(1, 2, 3, 4),\n                RowFactory.create(2, 1, 4, 3),\n                RowFactory.create(3, 4, 9, 2),\n                RowFactory.create(4, 3, 2, 1)\n        ), new StructType(new StructField[]{\n                new StructField(&quot;A&quot;, DataTypes.IntegerType, true, Metadata.empty()),\n                new StructField(&quot;B&quot;, DataTypes.IntegerType, true, Metadata.empty()),\n                new StructField(&quot;C&quot;, DataTypes.IntegerType, true, Metadata.empty()),\n                new StructField(&quot;D&quot;, DataTypes.IntegerType, true, Metadata.empty())\n        }));\n\n        df = df.withColumn(&quot;ScoreValueAndReason&quot;,\n                functions.struct(functions.lit(1.0), functions.lit(&quot;No issues&quot;))\n        );\n        df.show();\n\n        // Register the UDF\n        spark.udf().register(&quot;calculateScore&quot;, calculateScore, DataTypes.createStructType(new StructField[]{\n                new StructField(&quot;_1&quot;, DataTypes.DoubleType, false, Metadata.empty()),\n                new StructField(&quot;_2&quot;, DataTypes.StringType, false, Metadata.empty())\n        }));\n\n        String[] columnNames = df.columns();\n        for (String columnName: columnNames) {\n            df = df.withColumn(columnName, functions.callUDF(&quot;calculateScore&quot;, col(columnName), col(&quot;ScoreValueAndReason&quot;)));\n        }\n        df.show();\n</code></pre>\n<p>I tried the implementation above as well as a slightly different udf, but I keep running into this error: <code>org.apache.spark.sql.catalyst.expressions.GenericRowWithSchema incompatible with scala.Tuple2</code></p>\n<p>I expect a resulting dataframe with either two new columns scoreeReason and scoreValue or (more like in the example I provided) a single column scoreReasonAndValue that contains the values updated by my udf.</p>\n"},{"tags":["java","spring","stomp","spring-websocket","sockjs"],"answers":[{"tags":[],"owner":{"account_id":7903461,"reputation":1,"user_id":5969769,"display_name":"Chris H."},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691682119,"creation_date":1691682119,"answer_id":76877319,"question_id":75757945,"body_markdown":"I found this question while working on something similar and the answer to https://stackoverflow.com/questions/36159859/spring-websocketstompclient-proxy seemed to cover most of it, but used an older `HttpClientBuilder`.\r\n\r\nIn short, passing in a custom `RestTemplate` with your desired proxy configuration, to the `RestTemplateXhrTransport` constructor.\r\n\r\n```\r\nimport org.apache.hc.client5.http.impl.classic.CloseableHttpClient;\r\nimport org.apache.hc.client5.http.impl.classic.HttpClients;\r\nimport org.apache.hc.core5.http.HttpHost;\r\nimport org.springframework.web.client.RestTemplate;\r\n\r\n...\r\ntransports.add(new RestTemplateXhrTransport(getRestTemplate()));\r\n...\r\n\r\nprivate RestTemplate getRestTemplate() {\r\n    HttpHost myProxy = new HttpHost(proxyHost, proxyPort);\r\n    // Proxy can be configured as needed.\r\n    CloseableHttpClient closeableHttpClient = HttpClients.custom().setProxy(myProxy).build();\r\n    \r\n    HttpComponentsClientHttpRequestFactory factory = new HttpComponentsClientHttpRequestFactory();\r\n    factory.setHttpClient(closeableHttpClient);\r\n    return new RestTemplate(factory);\r\n}\r\n```\r\n\r\n","title":"Programatical proxy support in Spring WebSockets&#39; SockJsClient","body":"<p>I found this question while working on something similar and the answer to <a href=\"https://stackoverflow.com/questions/36159859/spring-websocketstompclient-proxy\">Spring WebSocket(Stomp)Client proxy</a> seemed to cover most of it, but used an older <code>HttpClientBuilder</code>.</p>\n<p>In short, passing in a custom <code>RestTemplate</code> with your desired proxy configuration, to the <code>RestTemplateXhrTransport</code> constructor.</p>\n<pre><code>import org.apache.hc.client5.http.impl.classic.CloseableHttpClient;\nimport org.apache.hc.client5.http.impl.classic.HttpClients;\nimport org.apache.hc.core5.http.HttpHost;\nimport org.springframework.web.client.RestTemplate;\n\n...\ntransports.add(new RestTemplateXhrTransport(getRestTemplate()));\n...\n\nprivate RestTemplate getRestTemplate() {\n    HttpHost myProxy = new HttpHost(proxyHost, proxyPort);\n    // Proxy can be configured as needed.\n    CloseableHttpClient closeableHttpClient = HttpClients.custom().setProxy(myProxy).build();\n    \n    HttpComponentsClientHttpRequestFactory factory = new HttpComponentsClientHttpRequestFactory();\n    factory.setHttpClient(closeableHttpClient);\n    return new RestTemplate(factory);\n}\n</code></pre>\n"}],"owner":{"account_id":9088765,"reputation":26,"user_id":6765610,"display_name":"LouBen3010"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":127,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1691682119,"creation_date":1678978520,"question_id":75757945,"body_markdown":"I&#39;m developing a tiny Java 15 application which connects to a Spring Boot based infrastructure using STOMP over WebSockets. Basically this is a no-brainer but unfortunately corporate proxy settings are very disturbing. Since it could be possible that the corporate security policies require different proxies for different applications it should be possible to configure this programatically.\r\n\r\nAs said previously the application is written in Java 15 and the pom.xml where I referred spring-websockets and spring-messaging looks like this:\r\n\r\n```xml\r\n&lt;!-- ... --&gt;\r\n&lt;dependency&gt;\r\n\t&lt;groupId&gt;org.springframework&lt;/groupId&gt;\r\n\t&lt;artifactId&gt;spring-websocket&lt;/artifactId&gt;\r\n\t&lt;version&gt;5.2.11.RELEASE&lt;/version&gt;\r\n&lt;/dependency&gt;\r\n&lt;dependency&gt;\r\n\t&lt;groupId&gt;org.springframework&lt;/groupId&gt;\r\n\t&lt;artifactId&gt;spring-messaging&lt;/artifactId&gt;\r\n\t&lt;version&gt;5.2.11.RELEASE&lt;/version&gt;\r\n&lt;/dependency&gt;\r\n&lt;!-- ... --&gt;\r\n```\r\n\r\nWith other applications where I used standard Java HttpClients it was really simple. In this cases it is sufficient to configure the HttpClient like this:\r\n\r\n```java\r\nHttpClient.newBuilder().proxy( ProxySelector.of( new InetSocketAddress( proxyHostAddr, proxyPort ) ) ).authenticator( proxyAuthenticator ).build();\r\n```\r\n\r\nBecause WebSockets are indeed based on the HTTP protocol I assumed that there is a place in the Spring universe where I just can get the underlying HttpClient (if this is used of course) and update its proxy settings.\r\n\r\nWith the following snipped I initialize a very basic STOMP client:\r\n\r\n```java\r\n// Set up WebSocket connection transports (different ways to communicate with a WS server)\r\nList&lt;Transport&gt; transports = new ArrayList&lt;&gt;( 2 );\r\ntransports.add( new WebSocketTransport( new StandardWebSocketClient() ) );\r\ntransports.add( new RestTemplateXhrTransport() );\r\n\r\nthis.stompClient = new WebSocketStompClient( new SockJsClient( transports ) );\r\n```\r\n\r\nI wasn&#39;t able to find out where I can intercept or implement a interface or something like that to ONLY exchange the proxy settings.\r\n\r\nThere was only a single way how I managed to get this running: When building my application as .jar I can tell the JVM which proxies to use by calling the JAR like this:\r\n\r\n```sh\r\njava -Dhttp.proxyHost=127.0.0.1 -Dhttp.proxyPort=8081 -Dhttps.proxyHost=127.0.0.1 -Dhttps.proxyPort=8081 -jar myJar.jar\r\n```\r\n\r\nSince I don&#39;t know the proxy settings at each customer this solution is not acceptable and it also leads to the situation that ALL networking stuff inside this JVM instance is lead through the proxy.\r\n\r\nThanks in advance!\r\n\r\nEdit:\r\nAs I&#39;m debugging for hours now I found out something new: The underlying WebSocket implementation is `org.apache.tomcat.websocket.WsWebSocketContainer`. Inside this class the system proxy is retrieved using the `ProxySelector.getDefault()` call. Unfortunately this class doesn&#39;t offer any method to override the way of how the proxies are gathered. In the worst case I have to copy this whole 800-line class and just replace the particular piece of code. But I feel uncomfortable doing this. Maybe someone in the audience here has a clue.","title":"Programatical proxy support in Spring WebSockets&#39; SockJsClient","body":"<p>I'm developing a tiny Java 15 application which connects to a Spring Boot based infrastructure using STOMP over WebSockets. Basically this is a no-brainer but unfortunately corporate proxy settings are very disturbing. Since it could be possible that the corporate security policies require different proxies for different applications it should be possible to configure this programatically.</p>\n<p>As said previously the application is written in Java 15 and the pom.xml where I referred spring-websockets and spring-messaging looks like this:</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;!-- ... --&gt;\n&lt;dependency&gt;\n    &lt;groupId&gt;org.springframework&lt;/groupId&gt;\n    &lt;artifactId&gt;spring-websocket&lt;/artifactId&gt;\n    &lt;version&gt;5.2.11.RELEASE&lt;/version&gt;\n&lt;/dependency&gt;\n&lt;dependency&gt;\n    &lt;groupId&gt;org.springframework&lt;/groupId&gt;\n    &lt;artifactId&gt;spring-messaging&lt;/artifactId&gt;\n    &lt;version&gt;5.2.11.RELEASE&lt;/version&gt;\n&lt;/dependency&gt;\n&lt;!-- ... --&gt;\n</code></pre>\n<p>With other applications where I used standard Java HttpClients it was really simple. In this cases it is sufficient to configure the HttpClient like this:</p>\n<pre class=\"lang-java prettyprint-override\"><code>HttpClient.newBuilder().proxy( ProxySelector.of( new InetSocketAddress( proxyHostAddr, proxyPort ) ) ).authenticator( proxyAuthenticator ).build();\n</code></pre>\n<p>Because WebSockets are indeed based on the HTTP protocol I assumed that there is a place in the Spring universe where I just can get the underlying HttpClient (if this is used of course) and update its proxy settings.</p>\n<p>With the following snipped I initialize a very basic STOMP client:</p>\n<pre class=\"lang-java prettyprint-override\"><code>// Set up WebSocket connection transports (different ways to communicate with a WS server)\nList&lt;Transport&gt; transports = new ArrayList&lt;&gt;( 2 );\ntransports.add( new WebSocketTransport( new StandardWebSocketClient() ) );\ntransports.add( new RestTemplateXhrTransport() );\n\nthis.stompClient = new WebSocketStompClient( new SockJsClient( transports ) );\n</code></pre>\n<p>I wasn't able to find out where I can intercept or implement a interface or something like that to ONLY exchange the proxy settings.</p>\n<p>There was only a single way how I managed to get this running: When building my application as .jar I can tell the JVM which proxies to use by calling the JAR like this:</p>\n<pre class=\"lang-bash prettyprint-override\"><code>java -Dhttp.proxyHost=127.0.0.1 -Dhttp.proxyPort=8081 -Dhttps.proxyHost=127.0.0.1 -Dhttps.proxyPort=8081 -jar myJar.jar\n</code></pre>\n<p>Since I don't know the proxy settings at each customer this solution is not acceptable and it also leads to the situation that ALL networking stuff inside this JVM instance is lead through the proxy.</p>\n<p>Thanks in advance!</p>\n<p>Edit:\nAs I'm debugging for hours now I found out something new: The underlying WebSocket implementation is <code>org.apache.tomcat.websocket.WsWebSocketContainer</code>. Inside this class the system proxy is retrieved using the <code>ProxySelector.getDefault()</code> call. Unfortunately this class doesn't offer any method to override the way of how the proxies are gathered. In the worst case I have to copy this whole 800-line class and just replace the particular piece of code. But I feel uncomfortable doing this. Maybe someone in the audience here has a clue.</p>\n"},{"tags":["java","neo4j"],"comments":[{"owner":{"account_id":8261395,"reputation":2529,"user_id":12586837,"display_name":"Samitha Nanayakkara"},"score":0,"creation_date":1533816485,"post_id":51766428,"comment_id":90491725,"body_markdown":"Are you certain that you are using URI instead of URL? This occurs mostly because of using URL with bolt.","body":"Are you certain that you are using URI instead of URL? This occurs mostly because of using URL with bolt."},{"owner":{"account_id":14123011,"reputation":1,"user_id":10203054,"display_name":"Christy Augustine"},"score":0,"creation_date":1533911633,"post_id":51766428,"comment_id":90534783,"body_markdown":"I had tried to connect with the URI instead of URL since bolt is being used.","body":"I had tried to connect with the URI instead of URL since bolt is being used."}],"answers":[{"tags":[],"owner":{"account_id":16048114,"reputation":1,"user_id":11582749,"display_name":"Manila"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691681864,"creation_date":1691672598,"answer_id":76875986,"question_id":51766428,"body_markdown":"    //Try this in your Configuration Neo4j class:\r\n    \r\n     @Bean\r\n        public Driver neo4jDriver() {\r\n    \r\n            Driver driver = GraphDatabase.driver(&quot;bolt://127.0.0.1:7687&quot;,\r\n                    AuthTokens.basic(&lt;user&gt;, &lt;pass&gt;));\r\n    \r\n            return driver;\r\n    \r\n        }\r\n\r\n   ","title":"How do we call neo4j 3.4 database uri from java?","body":"<pre><code>//Try this in your Configuration Neo4j class:\n\n @Bean\n    public Driver neo4jDriver() {\n\n        Driver driver = GraphDatabase.driver(&quot;bolt://127.0.0.1:7687&quot;,\n                AuthTokens.basic(&lt;user&gt;, &lt;pass&gt;));\n\n        return driver;\n\n    }\n</code></pre>\n"}],"owner":{"account_id":14123011,"reputation":1,"user_id":10203054,"display_name":"Christy Augustine"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":53,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1691681864,"creation_date":1533815891,"question_id":51766428,"body_markdown":"I have upgraded my neo4j from 2.3 to 3.4. Initially I had used WebTarget to connect the same. Now its been changed to bolt URI. While trying to connect with bolt://localhost:7687, I am getting an error like &quot;javax.ws.rs.ProcessingException: java.net.MalformedURLException: unknown protocol: bolt&quot;. How can I solve this?","title":"How do we call neo4j 3.4 database uri from java?","body":"<p>I have upgraded my neo4j from 2.3 to 3.4. Initially I had used WebTarget to connect the same. Now its been changed to bolt URI. While trying to connect with bolt://localhost:7687, I am getting an error like \"javax.ws.rs.ProcessingException: java.net.MalformedURLException: unknown protocol: bolt\". How can I solve this?</p>\n"},{"tags":["java","spring","spring-security","jwt"],"comments":[{"owner":{"account_id":2064278,"reputation":13128,"user_id":1840146,"accept_rate":86,"display_name":"Toerktumlare"},"score":1,"creation_date":1678464172,"post_id":75697944,"comment_id":133543296,"body_markdown":"`after i moved the project to another folder it just stopped working` show your folder structure for your project. What did you move?","body":"<code>after i moved the project to another folder it just stopped working</code> show your folder structure for your project. What did you move?"}],"answers":[{"tags":[],"owner":{"account_id":7952914,"reputation":91,"user_id":6516369,"display_name":"Paulo Matos"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691681419,"creation_date":1691681419,"answer_id":76877231,"question_id":75697944,"body_markdown":"In my case it was because I moved the main class, the one with @SpringBootApplication, to a different folder (bootloader). So since it was not on a higher or same level than my security classes, the security classes started to be ignored.\r\n\r\nSo I just moved the main class to my root package and security started to work again.","title":"SpringBoot App Stopped Working - Security Issues","body":"<p>In my case it was because I moved the main class, the one with @SpringBootApplication, to a different folder (bootloader). So since it was not on a higher or same level than my security classes, the security classes started to be ignored.</p>\n<p>So I just moved the main class to my root package and security started to work again.</p>\n"}],"owner":{"account_id":26366719,"reputation":37,"user_id":20022057,"display_name":"Pablo Costa"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":273,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":1,"score":0,"last_activity_date":1691681419,"creation_date":1678461755,"question_id":75697944,"body_markdown":"I&#39;ve built an SpringBoot APP using a tutorial from YouTube. It worked flawlessly, did everything i could (wrote all the code from the video, fixed parts where the code wasn&#39;t working \\ component was deprecated, etc). So far so good.\r\n\r\nHowever, after i moved the project to another folder it just stopped working. The log shows something like:\r\n\r\n&gt; Using generated security password:\r\n&gt; 762a8270-b075-45b5-ba17-691aa31d86cb\r\n&gt; \r\n&gt; This generated password is for development use only. Your security\r\n&gt; configuration must be updated before running your application in\r\n&gt; production.\r\n\r\nFrom what i&#39;ve read, its something about the security in the app.\r\nI&#39;m using JWT and correctly configured securityFilterChain (since WebSecurityConfigureAdapter is deprecated). The app was working fine, it just stopped working after i moved it from another folder (moved using InteliJ).\r\n\r\nI&#39;ve also tried to clone my latest commit from github to another folder, but the problem persisted. Nothing changed.\r\n\r\nHere&#39;s the full initialization log:\r\n\r\n    2023-03-10T11:52:27.803-03:00  INFO 19088 --- [           main] c.i.c.CafeManagementSystemApplication    : Starting CafeManagementSystemApplication using Java 19.0.1 with PID 19088 (C:\\Portfolio\\Cafe Management System (Angular, Spring Boot - Java, MySQL Database)\\Java\\com.inn.cafe\\target\\classes started by Pablo in C:\\Portfolio\\Cafe Management System (Angular, Spring Boot - Java, MySQL Database)\\Java)\r\n    2023-03-10T11:52:27.808-03:00  INFO 19088 --- [           main] c.i.c.CafeManagementSystemApplication    : No active profile set, falling back to 1 default profile: &quot;default&quot;\r\n    2023-03-10T11:52:28.784-03:00  INFO 19088 --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.\r\n    2023-03-10T11:52:28.816-03:00  INFO 19088 --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 18 ms. Found 0 JPA repository interfaces.\r\n    2023-03-10T11:52:29.696-03:00  INFO 19088 --- [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 8081 (http)\r\n    2023-03-10T11:52:29.710-03:00  INFO 19088 --- [           main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]\r\n    2023-03-10T11:52:29.711-03:00  INFO 19088 --- [           main] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.5]\r\n    2023-03-10T11:52:29.827-03:00  INFO 19088 --- [           main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext\r\n    2023-03-10T11:52:29.829-03:00  INFO 19088 --- [           main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 1940 ms\r\n    2023-03-10T11:52:30.097-03:00  INFO 19088 --- [           main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]\r\n    2023-03-10T11:52:30.183-03:00  INFO 19088 --- [           main] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 6.1.7.Final\r\n    2023-03-10T11:52:30.535-03:00  INFO 19088 --- [           main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...\r\n    2023-03-10T11:52:30.882-03:00  INFO 19088 --- [           main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@2cae5fa7\r\n    2023-03-10T11:52:30.885-03:00  INFO 19088 --- [           main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.\r\n    2023-03-10T11:52:30.952-03:00  INFO 19088 --- [           main] SQL dialect                              : HHH000400: Using dialect: org.hibernate.dialect.MySQLDialect\r\n    2023-03-10T11:52:31.502-03:00  INFO 19088 --- [           main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]\r\n    2023-03-10T11:52:31.513-03:00  INFO 19088 --- [           main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit &#39;default&#39;\r\n    2023-03-10T11:52:32.119-03:00  WARN 19088 --- [           main] .s.s.UserDetailsServiceAutoConfiguration : \r\n    \r\n    Using generated security password: 762a8270-b075-45b5-ba17-691aa31d86cb\r\n    \r\n    This generated password is for development use only. Your security configuration must be updated before running your application in production.\r\n    \r\n    2023-03-10T11:52:32.296-03:00  INFO 19088 --- [           main] o.s.s.web.DefaultSecurityFilterChain     : Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@3b8d2abe, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@6669cba, org.springframework.security.web.context.SecurityContextHolderFilter@4ab90d01, org.springframework.security.web.header.HeaderWriterFilter@35af1558, org.springframework.security.web.csrf.CsrfFilter@1edac3b4, org.springframework.security.web.authentication.logout.LogoutFilter@7e2a76be, org.springframework.security.web.authentication.UsernamePasswordAuthenticationFilter@b842275, org.springframework.security.web.authentication.ui.DefaultLoginPageGeneratingFilter@3a116ca6, org.springframework.security.web.authentication.ui.DefaultLogoutPageGeneratingFilter@37c74e4e, org.springframework.security.web.authentication.www.BasicAuthenticationFilter@4a6ef712, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@2d88c1bf, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@56d5460f, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@128a188a, org.springframework.security.web.access.ExceptionTranslationFilter@72b10258, org.springframework.security.web.access.intercept.AuthorizationFilter@44c27b8b]\r\n    2023-03-10T11:52:32.397-03:00  INFO 19088 --- [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 8081 (http) with context path &#39;&#39;\r\n    2023-03-10T11:52:32.410-03:00  INFO 19088 --- [           main] c.i.c.CafeManagementSystemApplication    : Started CafeManagementSystemApplication in 5.17 seconds (process running for 5.761)\r\n\r\nI&#39;ve read several pages around SO, and most of em just tell to do this:\r\n\r\n    @EnableAutoConfiguration(exclude = { SecurityAutoConfiguration.class })\r\n\r\nTo exclude SecurityAutoConfiguration.class on springboot main initializer. However i need to authenticate users on my app, i can&#39;t disable security.\r\n\r\nIs there anything i&#39;m missing? I&#39;ll show here my SecurityConfig class, i believe its the only one that may have something to do with this issue. Any additional information required just post on the comments and i&#39;ll edit the question.\r\n\r\nThanks in advance for any input!\r\n\r\n\r\npackage com.inn.cafe.JWT;\r\n\r\n\r\nimport org.springframework.beans.factory.annotation.Autowired;\r\n\r\n\r\n    @Configuration\r\n    @EnableGlobalMethodSecurity(\r\n            // securedEnabled = true,\r\n            // jsr250Enabled = true,\r\n            prePostEnabled = true)\r\n    public class SecurityConfig    {\r\n        @Autowired\r\n        CustomerUserDetailsService customerUserDetailsService;\r\n        @Autowired\r\n        JwtFilter jwtFilter;\r\n        @Autowired\r\n        private AuthEntryPointJwt unauthorizedHandler;\r\n        @Bean\r\n        public WebSecurityCustomizer webSecurityCustomizer(){\r\n            return (web) -&gt; web.ignoring().requestMatchers(&quot;/users/login&quot;, &quot;/users/signup&quot;,&quot;/users/forgotPassword&quot;);\r\n        }\r\n    \r\n        @Bean\r\n        public PasswordEncoder passwordEncoder(){\r\n            var encodedPwd = new BCryptPasswordEncoder();\r\n            return encodedPwd;\r\n        }\r\n        @Bean(name = BeanIds.AUTHENTICATION_MANAGER)\r\n        public AuthenticationManager authenticationManager(AuthenticationConfiguration authConfig) throws Exception {\r\n            return authConfig.getAuthenticationManager();\r\n        }\r\n        @Bean\r\n        public DaoAuthenticationProvider authenticationProvider(){\r\n            DaoAuthenticationProvider authProvider = new DaoAuthenticationProvider();\r\n            authProvider.setUserDetailsService(customerUserDetailsService);\r\n            authProvider.setPasswordEncoder(passwordEncoder());\r\n            return authProvider;\r\n        }\r\n        @Bean\r\n        public SecurityFilterChain filterChain(HttpSecurity http) throws Exception {\r\n            http\r\n                    .cors()\r\n                    .and()\r\n                    .csrf()\r\n                    .disable()\r\n                    .exceptionHandling()\r\n                    .authenticationEntryPoint(unauthorizedHandler)\r\n                    .and()\r\n                    .sessionManagement()\r\n                    .sessionCreationPolicy(SessionCreationPolicy.STATELESS).and()\r\n                    .authorizeRequests()\r\n                    .requestMatchers(&quot;/user/login&quot;)\r\n                    .permitAll()\r\n                    .requestMatchers(&quot;/user/signup&quot;)\r\n                    .permitAll()\r\n                    .requestMatchers(&quot;/user/forgotPassword&quot;)\r\n                    .permitAll()\r\n                    .anyRequest()\r\n                    .authenticated();\r\n    \r\n    \r\n    \r\n          http.addFilterBefore(jwtFilter, UsernamePasswordAuthenticationFilter.class);\r\n    \r\n          http.authenticationProvider(authenticationProvider());\r\n    \r\n    \r\n            return http.build();\r\n        }\r\n    \r\n    \r\n    \r\n    }\r\n\r\nEDIT: Some information.\r\n1) SpringBoot main class in on the top.\r\n2) Tried to add:\r\n\r\n&gt; @SpringBootApplication(scanBasePackages=&quot;com.inn.cafe&quot;)\r\n\r\nNothing changed.\r\n\r\n3) It isn&#39;t scanning my SecurityConfig class. I added a few log entries there, and nothing was shown when i started the app.\r\n4) Using @EnableGlobalMethodSecurity on the SecurityConfig class.\r\n5) I&#39;m not using WebSecurityConfigureAdpter. I&#39;m aware its deprecated.","title":"SpringBoot App Stopped Working - Security Issues","body":"<p>I've built an SpringBoot APP using a tutorial from YouTube. It worked flawlessly, did everything i could (wrote all the code from the video, fixed parts where the code wasn't working \\ component was deprecated, etc). So far so good.</p>\n<p>However, after i moved the project to another folder it just stopped working. The log shows something like:</p>\n<blockquote>\n<p>Using generated security password:\n762a8270-b075-45b5-ba17-691aa31d86cb</p>\n<p>This generated password is for development use only. Your security\nconfiguration must be updated before running your application in\nproduction.</p>\n</blockquote>\n<p>From what i've read, its something about the security in the app.\nI'm using JWT and correctly configured securityFilterChain (since WebSecurityConfigureAdapter is deprecated). The app was working fine, it just stopped working after i moved it from another folder (moved using InteliJ).</p>\n<p>I've also tried to clone my latest commit from github to another folder, but the problem persisted. Nothing changed.</p>\n<p>Here's the full initialization log:</p>\n<pre><code>2023-03-10T11:52:27.803-03:00  INFO 19088 --- [           main] c.i.c.CafeManagementSystemApplication    : Starting CafeManagementSystemApplication using Java 19.0.1 with PID 19088 (C:\\Portfolio\\Cafe Management System (Angular, Spring Boot - Java, MySQL Database)\\Java\\com.inn.cafe\\target\\classes started by Pablo in C:\\Portfolio\\Cafe Management System (Angular, Spring Boot - Java, MySQL Database)\\Java)\n2023-03-10T11:52:27.808-03:00  INFO 19088 --- [           main] c.i.c.CafeManagementSystemApplication    : No active profile set, falling back to 1 default profile: &quot;default&quot;\n2023-03-10T11:52:28.784-03:00  INFO 19088 --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.\n2023-03-10T11:52:28.816-03:00  INFO 19088 --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 18 ms. Found 0 JPA repository interfaces.\n2023-03-10T11:52:29.696-03:00  INFO 19088 --- [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 8081 (http)\n2023-03-10T11:52:29.710-03:00  INFO 19088 --- [           main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]\n2023-03-10T11:52:29.711-03:00  INFO 19088 --- [           main] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.5]\n2023-03-10T11:52:29.827-03:00  INFO 19088 --- [           main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext\n2023-03-10T11:52:29.829-03:00  INFO 19088 --- [           main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 1940 ms\n2023-03-10T11:52:30.097-03:00  INFO 19088 --- [           main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]\n2023-03-10T11:52:30.183-03:00  INFO 19088 --- [           main] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 6.1.7.Final\n2023-03-10T11:52:30.535-03:00  INFO 19088 --- [           main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...\n2023-03-10T11:52:30.882-03:00  INFO 19088 --- [           main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@2cae5fa7\n2023-03-10T11:52:30.885-03:00  INFO 19088 --- [           main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.\n2023-03-10T11:52:30.952-03:00  INFO 19088 --- [           main] SQL dialect                              : HHH000400: Using dialect: org.hibernate.dialect.MySQLDialect\n2023-03-10T11:52:31.502-03:00  INFO 19088 --- [           main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]\n2023-03-10T11:52:31.513-03:00  INFO 19088 --- [           main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'\n2023-03-10T11:52:32.119-03:00  WARN 19088 --- [           main] .s.s.UserDetailsServiceAutoConfiguration : \n\nUsing generated security password: 762a8270-b075-45b5-ba17-691aa31d86cb\n\nThis generated password is for development use only. Your security configuration must be updated before running your application in production.\n\n2023-03-10T11:52:32.296-03:00  INFO 19088 --- [           main] o.s.s.web.DefaultSecurityFilterChain     : Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@3b8d2abe, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@6669cba, org.springframework.security.web.context.SecurityContextHolderFilter@4ab90d01, org.springframework.security.web.header.HeaderWriterFilter@35af1558, org.springframework.security.web.csrf.CsrfFilter@1edac3b4, org.springframework.security.web.authentication.logout.LogoutFilter@7e2a76be, org.springframework.security.web.authentication.UsernamePasswordAuthenticationFilter@b842275, org.springframework.security.web.authentication.ui.DefaultLoginPageGeneratingFilter@3a116ca6, org.springframework.security.web.authentication.ui.DefaultLogoutPageGeneratingFilter@37c74e4e, org.springframework.security.web.authentication.www.BasicAuthenticationFilter@4a6ef712, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@2d88c1bf, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@56d5460f, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@128a188a, org.springframework.security.web.access.ExceptionTranslationFilter@72b10258, org.springframework.security.web.access.intercept.AuthorizationFilter@44c27b8b]\n2023-03-10T11:52:32.397-03:00  INFO 19088 --- [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 8081 (http) with context path ''\n2023-03-10T11:52:32.410-03:00  INFO 19088 --- [           main] c.i.c.CafeManagementSystemApplication    : Started CafeManagementSystemApplication in 5.17 seconds (process running for 5.761)\n</code></pre>\n<p>I've read several pages around SO, and most of em just tell to do this:</p>\n<pre><code>@EnableAutoConfiguration(exclude = { SecurityAutoConfiguration.class })\n</code></pre>\n<p>To exclude SecurityAutoConfiguration.class on springboot main initializer. However i need to authenticate users on my app, i can't disable security.</p>\n<p>Is there anything i'm missing? I'll show here my SecurityConfig class, i believe its the only one that may have something to do with this issue. Any additional information required just post on the comments and i'll edit the question.</p>\n<p>Thanks in advance for any input!</p>\n<p>package com.inn.cafe.JWT;</p>\n<p>import org.springframework.beans.factory.annotation.Autowired;</p>\n<pre><code>@Configuration\n@EnableGlobalMethodSecurity(\n        // securedEnabled = true,\n        // jsr250Enabled = true,\n        prePostEnabled = true)\npublic class SecurityConfig    {\n    @Autowired\n    CustomerUserDetailsService customerUserDetailsService;\n    @Autowired\n    JwtFilter jwtFilter;\n    @Autowired\n    private AuthEntryPointJwt unauthorizedHandler;\n    @Bean\n    public WebSecurityCustomizer webSecurityCustomizer(){\n        return (web) -&gt; web.ignoring().requestMatchers(&quot;/users/login&quot;, &quot;/users/signup&quot;,&quot;/users/forgotPassword&quot;);\n    }\n\n    @Bean\n    public PasswordEncoder passwordEncoder(){\n        var encodedPwd = new BCryptPasswordEncoder();\n        return encodedPwd;\n    }\n    @Bean(name = BeanIds.AUTHENTICATION_MANAGER)\n    public AuthenticationManager authenticationManager(AuthenticationConfiguration authConfig) throws Exception {\n        return authConfig.getAuthenticationManager();\n    }\n    @Bean\n    public DaoAuthenticationProvider authenticationProvider(){\n        DaoAuthenticationProvider authProvider = new DaoAuthenticationProvider();\n        authProvider.setUserDetailsService(customerUserDetailsService);\n        authProvider.setPasswordEncoder(passwordEncoder());\n        return authProvider;\n    }\n    @Bean\n    public SecurityFilterChain filterChain(HttpSecurity http) throws Exception {\n        http\n                .cors()\n                .and()\n                .csrf()\n                .disable()\n                .exceptionHandling()\n                .authenticationEntryPoint(unauthorizedHandler)\n                .and()\n                .sessionManagement()\n                .sessionCreationPolicy(SessionCreationPolicy.STATELESS).and()\n                .authorizeRequests()\n                .requestMatchers(&quot;/user/login&quot;)\n                .permitAll()\n                .requestMatchers(&quot;/user/signup&quot;)\n                .permitAll()\n                .requestMatchers(&quot;/user/forgotPassword&quot;)\n                .permitAll()\n                .anyRequest()\n                .authenticated();\n\n\n\n      http.addFilterBefore(jwtFilter, UsernamePasswordAuthenticationFilter.class);\n\n      http.authenticationProvider(authenticationProvider());\n\n\n        return http.build();\n    }\n\n\n\n}\n</code></pre>\n<p>EDIT: Some information.</p>\n<ol>\n<li>SpringBoot main class in on the top.</li>\n<li>Tried to add:</li>\n</ol>\n<blockquote>\n<p>@SpringBootApplication(scanBasePackages=&quot;com.inn.cafe&quot;)</p>\n</blockquote>\n<p>Nothing changed.</p>\n<ol start=\"3\">\n<li>It isn't scanning my SecurityConfig class. I added a few log entries there, and nothing was shown when i started the app.</li>\n<li>Using @EnableGlobalMethodSecurity on the SecurityConfig class.</li>\n<li>I'm not using WebSecurityConfigureAdpter. I'm aware its deprecated.</li>\n</ol>\n"},{"tags":["java","visual-studio-code"],"comments":[{"owner":{"account_id":6363922,"reputation":5664,"user_id":6651840,"display_name":"Dean Van Greunen"},"score":0,"creation_date":1568046485,"post_id":57857855,"comment_id":102141922,"body_markdown":"whats your full app class name space? like `com.acme.example.ListAppuals`","body":"whats your full app class name space? like <code>com.acme.example.ListAppuals</code>"},{"owner":{"account_id":16009454,"reputation":719,"user_id":11554082,"display_name":"Dani"},"score":0,"creation_date":1568048006,"post_id":57857855,"comment_id":102142619,"body_markdown":"@DeanVanGreunen Where can I find the namespace?","body":"@DeanVanGreunen Where can I find the namespace?"},{"owner":{"account_id":12695174,"reputation":45171,"user_id":9223839,"display_name":"Joakim Danielson"},"score":0,"creation_date":1568049557,"post_id":57857855,"comment_id":102143245,"body_markdown":"Where did you get that run button in the upper right corner, it&#39;s not part of the standard Visual Studio Code as far as I can see? Some extension you installed? Since standard &#39;Run&#39; works maybe you should just ignore that button?","body":"Where did you get that run button in the upper right corner, it&#39;s not part of the standard Visual Studio Code as far as I can see? Some extension you installed? Since standard &#39;Run&#39; works maybe you should just ignore that button?"},{"owner":{"account_id":1289016,"reputation":697,"user_id":1781376,"accept_rate":88,"display_name":"GuiRitter"},"score":0,"creation_date":1642098591,"post_id":57857855,"comment_id":124987875,"body_markdown":"Seems to not be your case, but I had the same problem because of special characters in the source&#39;s path.","body":"Seems to not be your case, but I had the same problem because of special characters in the source&#39;s path."}],"answers":[{"tags":[],"owner":{"account_id":16138853,"reputation":11,"user_id":11650595,"display_name":"SenorC4"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1568046866,"creation_date":1568046866,"answer_id":57857973,"question_id":57857855,"body_markdown":"Try editing your .classpath file to show it where your main class is.\r\n\r\nAn easier, but much more jank method, is to move your .java file to the root of your project directory to help vscode find it.","title":"Could not find or load main class - VS Code","body":"<p>Try editing your .classpath file to show it where your main class is.</p>\n\n<p>An easier, but much more jank method, is to move your .java file to the root of your project directory to help vscode find it.</p>\n"},{"tags":[],"owner":{"account_id":14914321,"reputation":15846,"user_id":10768653,"display_name":"Leo Zhu"},"down_vote_count":0,"up_vote_count":17,"is_accepted":false,"score":17,"last_activity_date":1568083677,"creation_date":1568083677,"answer_id":57863396,"question_id":57857855,"body_markdown":"i think you install the **Code Runner** Extension,so you have a `Run` icon in the upper right-hand corner，you could try to uninstall it,\r\n\r\nthen **F1 -&gt;Clean the java language server workspace.**,run your code with `F5` or the `Run` above your `Main` method","title":"Could not find or load main class - VS Code","body":"<p>i think you install the <strong>Code Runner</strong> Extension,so you have a <code>Run</code> icon in the upper right-hand corner，you could try to uninstall it,</p>\n\n<p>then <strong>F1 ->Clean the java language server workspace.</strong>,run your code with <code>F5</code> or the <code>Run</code> above your <code>Main</code> method</p>\n"},{"tags":[],"owner":{"account_id":323866,"reputation":986,"user_id":5361649,"display_name":"jinbo wang"},"down_vote_count":0,"up_vote_count":89,"is_accepted":false,"score":89,"last_activity_date":1571036198,"creation_date":1571032718,"answer_id":58370823,"question_id":57857855,"body_markdown":"This is a known issue https://github.com/microsoft/vscode-java-debug/issues/606, https://github.com/eclipse/eclipse.jdt.ls/issues/1137, which caused the new package not recognized during building workspace. It&#39;s expected to be fixed in vscode-java Middle October release.\r\n\r\nCurrent workaround is **reload VS Code window**, or **F1 -&gt;Clean the java language server workspace**.","title":"Could not find or load main class - VS Code","body":"<p>This is a known issue <a href=\"https://github.com/microsoft/vscode-java-debug/issues/606\" rel=\"noreferrer\">https://github.com/microsoft/vscode-java-debug/issues/606</a>, <a href=\"https://github.com/eclipse/eclipse.jdt.ls/issues/1137\" rel=\"noreferrer\">https://github.com/eclipse/eclipse.jdt.ls/issues/1137</a>, which caused the new package not recognized during building workspace. It's expected to be fixed in vscode-java Middle October release.</p>\n\n<p>Current workaround is <strong>reload VS Code window</strong>, or <strong>F1 ->Clean the java language server workspace</strong>.</p>\n"},{"tags":[],"owner":{"account_id":8112068,"reputation":594,"user_id":6111835,"display_name":"Cortex"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1619027931,"creation_date":1619027931,"answer_id":67201181,"question_id":57857855,"body_markdown":"If none of the solutions worked, **simply re-build your project to generate updated `.class`** file for the class that contains the main method.\r\n\r\nBasically, this error means that Java compiler was unable to find the proper `.class` file, and your source `.java` has a main method that wasn&#39;t added to the compiled `.class` yet.\r\n\r\nThis can be the case mainly for Maven projects.\r\n","title":"Could not find or load main class - VS Code","body":"<p>If none of the solutions worked, <strong>simply re-build your project to generate updated <code>.class</code></strong> file for the class that contains the main method.</p>\n<p>Basically, this error means that Java compiler was unable to find the proper <code>.class</code> file, and your source <code>.java</code> has a main method that wasn't added to the compiled <code>.class</code> yet.</p>\n<p>This can be the case mainly for Maven projects.</p>\n"},{"tags":[],"owner":{"account_id":13881837,"reputation":11,"user_id":10022023,"display_name":"J.Correa"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1625524966,"creation_date":1625524966,"answer_id":68262737,"question_id":57857855,"body_markdown":"Hey there was still having the same issue. My solution was to compile the code from the command line. This made the .class file for me, and then I was able to run my code. Probably better solutions out there but that&#39;s what I did","title":"Could not find or load main class - VS Code","body":"<p>Hey there was still having the same issue. My solution was to compile the code from the command line. This made the .class file for me, and then I was able to run my code. Probably better solutions out there but that's what I did</p>\n"},{"tags":[],"owner":{"account_id":17656870,"reputation":1,"user_id":12816257,"display_name":"Subtlecobra"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1626795343,"creation_date":1626795343,"answer_id":68457648,"question_id":57857855,"body_markdown":"I think this is because there isn&#39;t a &#39;Main&#39; Class, and the compiler is looking for that specific class, might be an issue with the project manager naming the class App instead of &#39;Main&#39;, a quick fix ***might*** be to name the Class &#39;Main&#39; and see if that works instead.","title":"Could not find or load main class - VS Code","body":"<p>I think this is because there isn't a 'Main' Class, and the compiler is looking for that specific class, might be an issue with the project manager naming the class App instead of 'Main', a quick fix <em><strong>might</strong></em> be to name the Class 'Main' and see if that works instead.</p>\n"},{"tags":[],"owner":{"account_id":170657,"reputation":14403,"user_id":397524,"accept_rate":89,"display_name":"Display Name"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1627071327,"creation_date":1627071327,"answer_id":68504630,"question_id":57857855,"body_markdown":"Pressing `ctrl+f5` solves the problem.\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\nTerminal output:\r\n\r\n    PS F:\\Testing&gt;  &amp; &#39;c:\\Users\\xyz\\.vscode\\extensions\\vscjava.vscode-java-debug-0.34.0\\scripts\\launcher.bat&#39; &#39;C:\\jdk-18\\bin\\java.exe&#39; &#39;-XX:+ShowCodeDetailsInExceptionMessages&#39; &#39;-Dfile.encoding=UTF-8&#39; &#39;-cp&#39; &#39;C:\\Users\\xyz\\AppData\\Roaming\\Code\\User\\workspaceStorage\\1edb6264f8da6da9dda20a68800df89b\\redhat.java\\jdt_ws\\Testing_e004a758\\bin&#39; &#39;mypackage.Foo&#39;\r\n    hello\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/HswPs.png","title":"Could not find or load main class - VS Code","body":"<p>Pressing <code>ctrl+f5</code> solves the problem.</p>\n<p><a href=\"https://i.stack.imgur.com/HswPs.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/HswPs.png\" alt=\"enter image description here\" /></a></p>\n<p>Terminal output:</p>\n<pre><code>PS F:\\Testing&gt;  &amp; 'c:\\Users\\xyz\\.vscode\\extensions\\vscjava.vscode-java-debug-0.34.0\\scripts\\launcher.bat' 'C:\\jdk-18\\bin\\java.exe' '-XX:+ShowCodeDetailsInExceptionMessages' '-Dfile.encoding=UTF-8' '-cp' 'C:\\Users\\xyz\\AppData\\Roaming\\Code\\User\\workspaceStorage\\1edb6264f8da6da9dda20a68800df89b\\redhat.java\\jdt_ws\\Testing_e004a758\\bin' 'mypackage.Foo'\nhello\n</code></pre>\n"},{"tags":[],"owner":{"account_id":18779282,"reputation":31,"user_id":13694304,"display_name":"Naufil"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1627170557,"creation_date":1627154175,"answer_id":68513106,"question_id":57857855,"body_markdown":"Install `java` extension package and try running it by `CTRL` + `F5`. Works well by the time it gets fixed.","title":"Could not find or load main class - VS Code","body":"<p>Install <code>java</code> extension package and try running it by <code>CTRL</code> + <code>F5</code>. Works well by the time it gets fixed.</p>\n"},{"tags":[],"owner":{"account_id":22663459,"reputation":1,"user_id":16836198,"display_name":"Nguy&#234;n"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1630856539,"creation_date":1630856539,"answer_id":69064854,"question_id":57857855,"body_markdown":"try deleting the .vscode folder and run it again\r\n","title":"Could not find or load main class - VS Code","body":"<p>try deleting the .vscode folder and run it again</p>\n"},{"tags":[],"owner":{"account_id":22668154,"reputation":121,"user_id":16840210,"display_name":"deateaterOG"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1633067943,"creation_date":1632820615,"answer_id":69358970,"question_id":57857855,"body_markdown":"The same happened for me but it was easy fix,\r\nCheck the launch.json if the class name is correct\r\n\r\nSince I changed the group of my class.\r\n\r\nCheck wheter your launch.json file data is correct.\r\nSince sometimes launch.json does not auto-update.\r\n\r\nHope it helps.","title":"Could not find or load main class - VS Code","body":"<p>The same happened for me but it was easy fix,\nCheck the launch.json if the class name is correct</p>\n<p>Since I changed the group of my class.</p>\n<p>Check wheter your launch.json file data is correct.\nSince sometimes launch.json does not auto-update.</p>\n<p>Hope it helps.</p>\n"},{"tags":[],"owner":{"account_id":10229352,"reputation":172,"user_id":7550716,"display_name":"David Wei"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1634871111,"creation_date":1634870782,"answer_id":69670841,"question_id":57857855,"body_markdown":"In my case, I added the `launch.json` in the project, and modified the default configs from ${file} like this:\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/54GOi.png\r\n\r\nthen I started debugging and it worked as usual.","title":"Could not find or load main class - VS Code","body":"<p>In my case, I added the <code>launch.json</code> in the project, and modified the default configs from ${file} like this:\n<a href=\"https://i.stack.imgur.com/54GOi.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/54GOi.png\" alt=\"enter image description here\" /></a></p>\n<p>then I started debugging and it worked as usual.</p>\n"},{"tags":[],"owner":{"account_id":24504525,"reputation":1,"user_id":18419718,"display_name":"Shivakrishna Talla"},"down_vote_count":2,"up_vote_count":0,"is_accepted":false,"score":-2,"last_activity_date":1646845925,"creation_date":1646835564,"answer_id":71410823,"question_id":57857855,"body_markdown":"Create a file `settings.json` inside the `.vscode` folder of your application and add below configuration.\r\n\r\n```\r\n&quot;java.configuration.updateBuildConfiguration&quot;: &quot;automatic&quot;\r\n```","title":"Could not find or load main class - VS Code","body":"<p>Create a file <code>settings.json</code> inside the <code>.vscode</code> folder of your application and add below configuration.</p>\n<pre><code>&quot;java.configuration.updateBuildConfiguration&quot;: &quot;automatic&quot;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":9203666,"reputation":343,"user_id":6854444,"display_name":"Bojie Shuai"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1652639025,"creation_date":1652639025,"answer_id":72251087,"question_id":57857855,"body_markdown":"If none of the above works for you, check your folder/file name. See if there is any non-English naming.\r\n\r\nMy issue was I can compile and run the program with no problem in terminal, but got the error when running in VScode. Solve the problem by renaming my file path from `/Documents/算法/App.java` to `/Documents/Algo/App.java`","title":"Could not find or load main class - VS Code","body":"<p>If none of the above works for you, check your folder/file name. See if there is any non-English naming.</p>\n<p>My issue was I can compile and run the program with no problem in terminal, but got the error when running in VScode. Solve the problem by renaming my file path from <code>/Documents/算法/App.java</code> to <code>/Documents/Algo/App.java</code></p>\n"},{"tags":[],"owner":{"account_id":14228563,"reputation":702,"user_id":10278427,"display_name":"Pouria Moosavi"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1667668977,"creation_date":1667668977,"answer_id":74329934,"question_id":57857855,"body_markdown":"For me the problem was that the project&#39;s folder name had some Persian/Arabic characters in it. After I renamed the folder, everything started to working.  ","title":"Could not find or load main class - VS Code","body":"<p>For me the problem was that the project's folder name had some Persian/Arabic characters in it. After I renamed the folder, everything started to working.</p>\n"},{"tags":[],"owner":{"account_id":4206618,"reputation":808,"user_id":4180447,"accept_rate":47,"display_name":"tarekahf"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1669653393,"creation_date":1669653393,"answer_id":74603747,"question_id":57857855,"body_markdown":"In my case, I get the same error when I am debugging a multi-module maven project. It seems that the `classpath` is not set automatically or not set correctly when you try t debug without using a launch config. You need to define a `lunch` request in the `launch.json` file and set the `classpath` to point to the correct `jar` files. You must build the project using `mvn install` to generate the required jar files for the project which are defined in `pom.xml&#39; for all modules. I tried to set the classpath to point to the generated `*.class` binary files but it didn&#39;t work I think because I need to specify each and everyone which wasn&#39;t possible.\r\n\r\nTo ensure you are using the correct config, first, find out the command line details using `java.exe` which is required to run your application, and then configure this command using the `launch.json` file.\r\n\r\nAlso, configure the `console` of the `debug` session to be the `integrated terminal`  and lunch the debug with or without the `launch.json&#39; file. Then start the debug and watch out for the generated commands and you can find what is wrong by analyzing the commands used to launch the application.\r\n\r\n\r\nBelow is an example of a config item in `launch.json&#39; file:\r\n\r\n```\r\n        {\r\n            &quot;name&quot;: &quot;Java&quot;,\r\n            &quot;type&quot;: &quot;java&quot;,\r\n            &quot;request&quot;: &quot;launch&quot;,\r\n            &quot;classPaths&quot;: [\r\n                &quot;${workspaceFolder}/&quot;,\r\n                &quot;${workspaceFolder}/path/to/jar&quot;,\r\n                &quot;${workspaceFolder}/path/to/jar&quot;,\r\n                ...\r\n            ],\r\n            &quot;mainClass&quot;: &quot;com.startup.class.name&quot;,\r\n            &quot;projectName&quot;: &quot;project name&quot;,\r\n            &quot;vmArgs&quot;: [\r\n                &quot;-Xms64m -Xmx950m&quot;\r\n            ],\r\n\r\n        }\r\n```","title":"Could not find or load main class - VS Code","body":"<p>In my case, I get the same error when I am debugging a multi-module maven project. It seems that the <code>classpath</code> is not set automatically or not set correctly when you try t debug without using a launch config. You need to define a <code>lunch</code> request in the <code>launch.json</code> file and set the <code>classpath</code> to point to the correct <code>jar</code> files. You must build the project using <code>mvn install</code> to generate the required jar files for the project which are defined in <code>pom.xml' for all modules. I tried to set the classpath to point to the generated </code>*.class` binary files but it didn't work I think because I need to specify each and everyone which wasn't possible.</p>\n<p>To ensure you are using the correct config, first, find out the command line details using <code>java.exe</code> which is required to run your application, and then configure this command using the <code>launch.json</code> file.</p>\n<p>Also, configure the <code>console</code> of the <code>debug</code> session to be the <code>integrated terminal</code>  and lunch the debug with or without the `launch.json' file. Then start the debug and watch out for the generated commands and you can find what is wrong by analyzing the commands used to launch the application.</p>\n<p>Below is an example of a config item in `launch.json' file:</p>\n<pre><code>        {\n            &quot;name&quot;: &quot;Java&quot;,\n            &quot;type&quot;: &quot;java&quot;,\n            &quot;request&quot;: &quot;launch&quot;,\n            &quot;classPaths&quot;: [\n                &quot;${workspaceFolder}/&quot;,\n                &quot;${workspaceFolder}/path/to/jar&quot;,\n                &quot;${workspaceFolder}/path/to/jar&quot;,\n                ...\n            ],\n            &quot;mainClass&quot;: &quot;com.startup.class.name&quot;,\n            &quot;projectName&quot;: &quot;project name&quot;,\n            &quot;vmArgs&quot;: [\n                &quot;-Xms64m -Xmx950m&quot;\n            ],\n\n        }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":28870034,"reputation":1,"user_id":22111779,"display_name":"vijay"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1687399072,"creation_date":1687399072,"answer_id":76528165,"question_id":57857855,"body_markdown":"For me it is resolved by ensuring the installed jdk on my machine matches with the java.version in the pom.xml.\r\n\r\n    &lt;properties&gt;\r\n        &lt;java.version&gt;20.0.1&lt;/java.version&gt;\r\n    &lt;/properties&gt;","title":"Could not find or load main class - VS Code","body":"<p>For me it is resolved by ensuring the installed jdk on my machine matches with the java.version in the pom.xml.</p>\n<pre><code>&lt;properties&gt;\n    &lt;java.version&gt;20.0.1&lt;/java.version&gt;\n&lt;/properties&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":24668,"reputation":5578,"user_id":62889,"accept_rate":91,"display_name":"Sachin Chavan"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1690960543,"creation_date":1690960543,"answer_id":76817436,"question_id":57857855,"body_markdown":"Faced same issue on VSCode on macOS.\r\n\r\nRenaming the extension to all small resolved my issue.\r\n\r\nFileName.***J***ava to FileName.***j***ava","title":"Could not find or load main class - VS Code","body":"<p>Faced same issue on VSCode on macOS.</p>\n<p>Renaming the extension to all small resolved my issue.</p>\n<p>FileName.<em><strong>J</strong></em>ava to FileName.<em><strong>j</strong></em>ava</p>\n"},{"tags":[],"owner":{"account_id":23880231,"reputation":1,"user_id":17881012,"display_name":"Shivam771"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691681213,"creation_date":1691681213,"answer_id":76877199,"question_id":57857855,"body_markdown":"Check if you haven&#39;t made your **main() method static**. The &quot;*Static*&quot; key word says that the method belongs to this class itself. If you haven&#39;t made you main() *static* then it will be confused between all classes of the same program/directory/workspace, especially in vscode editor workspace.\r\nif it still doesn&#39;t works, relode vs code window or clean your workspace by pressing **f1** followed by typing **clean java language server workspace.**","title":"Could not find or load main class - VS Code","body":"<p>Check if you haven't made your <strong>main() method static</strong>. The &quot;<em>Static</em>&quot; key word says that the method belongs to this class itself. If you haven't made you main() <em>static</em> then it will be confused between all classes of the same program/directory/workspace, especially in vscode editor workspace.\nif it still doesn't works, relode vs code window or clean your workspace by pressing <strong>f1</strong> followed by typing <strong>clean java language server workspace.</strong></p>\n"}],"owner":{"account_id":16009454,"reputation":719,"user_id":11554082,"display_name":"Dani"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":128371,"favorite_count":0,"down_vote_count":1,"up_vote_count":34,"answer_count":18,"score":33,"last_activity_date":1691681213,"creation_date":1568046345,"question_id":57857855,"body_markdown":"I created a new java project (with the option `Create Java Project`), and \r\nWhen I click the run button (marked with the red circle), it gives me the error `Could not find or load main class`.\r\n\r\nWhen I run the program from the `run` option above the `main`(marked with the green circle), it works and doesn&#39;t show me the error.\r\n\r\nHow can I fix it?\r\n\r\n[![The project][1]][1]\r\n\r\nThis is the `.classpath` file:\r\n\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n    &lt;classpath&gt;\r\n\t    &lt;classpathentry kind=&quot;con&quot; path=&quot;org.eclipse.jdt.launching.JRE_CONTAINER/org.eclipse.jdt.internal.debug.ui.launcher.StandardVMType/JavaSE-1.8&quot;/&gt;\r\n\t    &lt;classpathentry kind=&quot;src&quot; path=&quot;src&quot;/&gt;\r\n\t    &lt;classpathentry kind=&quot;output&quot; path=&quot;bin&quot;/&gt;\r\n    &lt;/classpath&gt;\r\n\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/9qZwE.png","title":"Could not find or load main class - VS Code","body":"<p>I created a new java project (with the option <code>Create Java Project</code>), and \nWhen I click the run button (marked with the red circle), it gives me the error <code>Could not find or load main class</code>.</p>\n\n<p>When I run the program from the <code>run</code> option above the <code>main</code>(marked with the green circle), it works and doesn't show me the error.</p>\n\n<p>How can I fix it?</p>\n\n<p><a href=\"https://i.stack.imgur.com/9qZwE.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/9qZwE.png\" alt=\"The project\"></a></p>\n\n<p>This is the <code>.classpath</code> file:</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;classpath&gt;\n    &lt;classpathentry kind=\"con\" path=\"org.eclipse.jdt.launching.JRE_CONTAINER/org.eclipse.jdt.internal.debug.ui.launcher.StandardVMType/JavaSE-1.8\"/&gt;\n    &lt;classpathentry kind=\"src\" path=\"src\"/&gt;\n    &lt;classpathentry kind=\"output\" path=\"bin\"/&gt;\n&lt;/classpath&gt;\n</code></pre>\n"},{"tags":["java","gradle"],"owner":{"account_id":1923350,"reputation":11,"user_id":1734330,"display_name":"kateryna"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":35,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1691681200,"creation_date":1691680276,"question_id":76877079,"body_markdown":"We use gradle 7.6.2 and jdk 17\r\nThere is following build.gradle.kts\r\n\r\n```\r\ndependencies {\r\n\r\n    implementation(group = &quot;jakarta.xml.ws&quot;, name = &quot;jakarta.xml.ws-api&quot;, version = jaxwsToolsVersion)\r\n    implementation(group = &quot;jakarta.xml.bind&quot;, name = &quot;jakarta.xml.bind-api&quot;, version = jaxwsToolsVersion)\r\n    compileOnly(group = &quot;jakarta.jws&quot;, name = &quot;jakarta.jws-api&quot;, version = &quot;3.0.0&quot;)\r\n\r\n    ...\r\n}\r\n\r\n\r\nwsdl2java {\r\n    groups {\r\n        register(&quot;wsdl1&quot;) {\r\n            wsdlDir.set(layout.projectDirectory.dir(&quot;$projectDir/src/main/resources/wsdls&quot;))\r\n            includes.set(listOf(&quot;MessageService.wsdl&quot;))\r\n            packageName.set(&quot;com.service.mom&quot;)\r\n            generatedSourceDir.set(layout.projectDirectory.dir(&quot;$buildDir/generated/wsdl1/src/main/java&quot;))\r\n        }\r\n        register(&quot;wsld2&quot;) {\r\n            wsdlDir.set(layout.projectDirectory.dir(&quot;$projectDir/src/main/resources/wsdls&quot;))\r\n            includes.set(listOf(&quot;SREngine.wsdl&quot;))\r\n            packageName.set(&quot;com.service.rpt.engine&quot;)\r\n            generatedSourceDir.set(layout.projectDirectory.dir(&quot;$buildDir/generated/wsdl2/src/main/java&quot;));\r\n        }\r\n      \r\n    }\r\n}\r\n\r\nval generated: SourceSet by sourceSets.creating {\r\n    java.srcDir(&quot;$buildDir/generated/wsdl1/src/main/java&quot;)\r\n    java.srcDir(&quot;$buildDir/generated/wsdl2/src/main/java&quot;)\r\n}\r\n\r\nsourceSets.main.configure {\r\n    java.srcDir(&quot;$buildDir/generated/wsdl1/src/main/java&quot;)\r\n    java.srcDir(&quot;$buildDir/generated/wsdl2/src/main/java&quot;)\r\n\r\n    compileClasspath += generated.output\r\n    runtimeClasspath += generated.output\r\n}\r\n\r\ntasks.compileJava {\r\n    dependsOn(&quot;wsdl2java&quot;)\r\n}\r\n```\r\nBuild fails with following error:\r\n&gt; Task :server:compileGeneratedJava FAILED\r\nC:\\work\\sandbox\\web\\server\\build\\generated\\wsdl1\\src\\main\\java\\com\\service\\mom\\Acknowledge.java:4: error: package jakarta.xml.bind.annotation does not exist\r\nimport jakarta.xml.bind.annotation.XmlAccessType;\r\n\r\n\r\n\r\nI suppose that dependencies not available in generate classes compilation task\r\nHow to configure generate sources classpath?","title":"gradle kts compileGeneratedJava FAILED","body":"<p>We use gradle 7.6.2 and jdk 17\nThere is following build.gradle.kts</p>\n<pre><code>dependencies {\n\n    implementation(group = &quot;jakarta.xml.ws&quot;, name = &quot;jakarta.xml.ws-api&quot;, version = jaxwsToolsVersion)\n    implementation(group = &quot;jakarta.xml.bind&quot;, name = &quot;jakarta.xml.bind-api&quot;, version = jaxwsToolsVersion)\n    compileOnly(group = &quot;jakarta.jws&quot;, name = &quot;jakarta.jws-api&quot;, version = &quot;3.0.0&quot;)\n\n    ...\n}\n\n\nwsdl2java {\n    groups {\n        register(&quot;wsdl1&quot;) {\n            wsdlDir.set(layout.projectDirectory.dir(&quot;$projectDir/src/main/resources/wsdls&quot;))\n            includes.set(listOf(&quot;MessageService.wsdl&quot;))\n            packageName.set(&quot;com.service.mom&quot;)\n            generatedSourceDir.set(layout.projectDirectory.dir(&quot;$buildDir/generated/wsdl1/src/main/java&quot;))\n        }\n        register(&quot;wsld2&quot;) {\n            wsdlDir.set(layout.projectDirectory.dir(&quot;$projectDir/src/main/resources/wsdls&quot;))\n            includes.set(listOf(&quot;SREngine.wsdl&quot;))\n            packageName.set(&quot;com.service.rpt.engine&quot;)\n            generatedSourceDir.set(layout.projectDirectory.dir(&quot;$buildDir/generated/wsdl2/src/main/java&quot;));\n        }\n      \n    }\n}\n\nval generated: SourceSet by sourceSets.creating {\n    java.srcDir(&quot;$buildDir/generated/wsdl1/src/main/java&quot;)\n    java.srcDir(&quot;$buildDir/generated/wsdl2/src/main/java&quot;)\n}\n\nsourceSets.main.configure {\n    java.srcDir(&quot;$buildDir/generated/wsdl1/src/main/java&quot;)\n    java.srcDir(&quot;$buildDir/generated/wsdl2/src/main/java&quot;)\n\n    compileClasspath += generated.output\n    runtimeClasspath += generated.output\n}\n\ntasks.compileJava {\n    dependsOn(&quot;wsdl2java&quot;)\n}\n</code></pre>\n<p>Build fails with following error:</p>\n<blockquote>\n<p>Task :server:compileGeneratedJava FAILED\nC:\\work\\sandbox\\web\\server\\build\\generated\\wsdl1\\src\\main\\java\\com\\service\\mom\\Acknowledge.java:4: error: package jakarta.xml.bind.annotation does not exist\nimport jakarta.xml.bind.annotation.XmlAccessType;</p>\n</blockquote>\n<p>I suppose that dependencies not available in generate classes compilation task\nHow to configure generate sources classpath?</p>\n"},{"tags":["java","servlets","servlet-filters"],"answers":[{"tags":[],"owner":{"account_id":26588,"reputation":11301,"user_id":69340,"accept_rate":78,"display_name":"Suresh Kumar"},"down_vote_count":0,"up_vote_count":32,"is_accepted":true,"score":32,"last_activity_date":1691679905,"creation_date":1315306999,"answer_id":7318845,"question_id":7318632,"body_markdown":"Looks like the restlet framework has called `getRequestEntityStream()` on the Request object which in turn calls `getInputStream()`, so calling `getReader()` on the request throws `IllegalStateException`. The Servlet API documentation for `getReader()` and `getInputStream()` says:\r\n\r\n   \r\n\r\n     public java.io.BufferedReader getReader()\r\n        ...\r\n        ...\r\n    Throws:\r\n        java.lang.IllegalStateException - if getInputStream() method has been called on this request\r\n\r\n     public ServletInputStream getInputStream()\r\n        ...\r\n        ...\r\n        Throws:\r\n        java.lang.IllegalStateException - if the getReader() method has already been called for this request\r\n\r\n\r\nFrom the documentation, it seems that we cannot call both `getReader()` and `getInputStream()` on the Request object. I suggest you use `getInputStream()` rather than `getReader()` in your wrapper.","title":"java.lang.IllegalStateException: getReader() has already been called for this request","body":"<p>Looks like the restlet framework has called <code>getRequestEntityStream()</code> on the Request object which in turn calls <code>getInputStream()</code>, so calling <code>getReader()</code> on the request throws <code>IllegalStateException</code>. The Servlet API documentation for <code>getReader()</code> and <code>getInputStream()</code> says:</p>\n<pre><code> public java.io.BufferedReader getReader()\n    ...\n    ...\nThrows:\n    java.lang.IllegalStateException - if getInputStream() method has been called on this request\n\n public ServletInputStream getInputStream()\n    ...\n    ...\n    Throws:\n    java.lang.IllegalStateException - if the getReader() method has already been called for this request\n</code></pre>\n<p>From the documentation, it seems that we cannot call both <code>getReader()</code> and <code>getInputStream()</code> on the Request object. I suggest you use <code>getInputStream()</code> rather than <code>getReader()</code> in your wrapper.</p>\n"},{"tags":[],"owner":{"account_id":54119,"reputation":5756,"user_id":161895,"display_name":"Kennet"},"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1315307051,"creation_date":1315307051,"answer_id":7318855,"question_id":7318632,"body_markdown":"The main problem is that you can&#39;t read the input both as binary stream and character stream, not even if the one is called in a filter and the other in the servlet. \r\n\r\n","title":"java.lang.IllegalStateException: getReader() has already been called for this request","body":"<p>The main problem is that you can't read the input both as binary stream and character stream, not even if the one is called in a filter and the other in the servlet. </p>\n"},{"tags":[],"owner":{"account_id":933262,"reputation":7628,"user_id":962696,"accept_rate":67,"display_name":"JonnyRaa"},"down_vote_count":1,"up_vote_count":9,"is_accepted":false,"score":8,"last_activity_date":1406812220,"creation_date":1406812220,"answer_id":25059731,"question_id":7318632,"body_markdown":"As far as I can tell servlets are fundamentally broken in this regard.  You can try and work around this problem as outlined [here](http://natch3z.blogspot.co.uk/2009/01/read-request-body-in-filter.html) but that causes other mysterious problems when other things try and work with it.\r\n\r\nEffectively he suggests cloning the request, reading the body and then in the the cloned class overriding the getReader and getInputStream methods to return the stuff already retrieved.\r\n\r\nThe code I ended up with was this:\r\n\r\n    import javax.servlet.ServletInputStream;\r\n    import javax.servlet.http.HttpServletRequest;\r\n    import javax.servlet.http.HttpServletRequestWrapper;\r\n    import java.io.*;\r\n    \r\n    //this class stops reading the request payload twice causing an exception\r\n    public class WrappedRequest extends HttpServletRequestWrapper\r\n    {\r\n        private String _body;\r\n        private HttpServletRequest _request;\r\n    \r\n        public WrappedRequest(HttpServletRequest request) throws IOException\r\n        {\r\n            super(request);\r\n            _request = request;\r\n    \r\n            _body = &quot;&quot;;\r\n            try (BufferedReader bufferedReader = request.getReader())\r\n            {\r\n                String line;\r\n                while ((line = bufferedReader.readLine()) != null)\r\n                    _body += line;\r\n            }\r\n        }\r\n    \r\n        @Override\r\n        public ServletInputStream getInputStream() throws IOException\r\n        {\r\n            final ByteArrayInputStream byteArrayInputStream = new ByteArrayInputStream(_body.getBytes());\r\n            return new ServletInputStream()\r\n            {\r\n                public int read() throws IOException\r\n                {\r\n                    return byteArrayInputStream.read();\r\n                }\r\n            };\r\n        }\r\n    \r\n        @Override\r\n        public BufferedReader getReader() throws IOException\r\n        {\r\n            return new BufferedReader(new InputStreamReader(this.getInputStream()));\r\n        }\r\n    }\r\n\r\nAnyway this appeared to be working fine until we realised that uploading a file from the browser wasn&#39;t working.  I bisected through the changes and discovered this was the culprit.\r\n\r\nSome people in the comments in that article say you need to override methods to do with parameters but don&#39;t explain how to do this.  \r\n\r\nAs a result I checked to see if there was any difference in the two requests.  However after cloning the request it had identical sets of parameters (both original request + cloned had none) aswell as an identical set of headers.  \r\n\r\nHowever in some manner the request was being effected and screwing up the understanding of the request further down the line - in my case causing a bizaare error in a library (extdirectspring) where something was trying to read the contents as Json.  Taking out the code that read the body in the filter made it work again.\r\n\r\nMy calling code looked like this:\r\n\r\n    @Override\r\n    public void doFilter(ServletRequest request, ServletResponse response, FilterChain filterChain) throws IOException, ServletException\r\n    {\r\n        HttpServletRequest properRequest = ((HttpServletRequest)request);\r\n\r\n        String pathInfo = properRequest.getPathInfo();\r\n        String target = &quot;&quot;;\r\n        if(pathInfo == null)\r\n            pathInfo = &quot;&quot;;\r\n\r\n        if(pathInfo.equals(&quot;/router&quot;))\r\n        {\r\n            //note this is because servlet requests hate you!\r\n            //if you read their contents more than once then they throw an exception so we need to do some madness\r\n            //to make this not the case\r\n            WrappedRequest wrappedRequest = new WrappedRequest(properRequest);\r\n            target = ParseExtDirectTargetFrom(wrappedRequest);\r\n            request = wrappedRequest;\r\n        }\r\n\r\n        boolean callingSpecialResetMethod = pathInfo.equals(&quot;/resetErrorState&quot;) || target.equals(&quot;resetErrorState&quot;);\r\n        if(_errorHandler.IsRejectingRequests() &amp;&amp; !callingSpecialResetMethod)\r\n            return;\r\n\r\n        try {\r\n            filterChain.doFilter(request, response);\r\n        }\r\n        catch (Exception exception) {\r\n            ((HttpServletResponse) response).sendError(HttpServletResponse.SC_INTERNAL_SERVER_ERROR, &quot;ERROR&quot;);\r\n            _errorHandler.NotifyOf(exception);\r\n        }\r\n    }\r\n\r\nI&#39;ve ommitted the contents of `ParseExtDirectTargetFrom` but it calls getReader().\r\n\r\nIn my case the filter was working for all other requests but the strange behaviour in this case made me realise something wasn&#39;t quite right and what I was trying to do (implement sensible exception handling behaviour for tests) wasn&#39;t worth potentially breaking random future requests (as I couldn&#39;t figure out what had caused the request to become broken).\r\n\r\nAlso it&#39;s worth noting that the broken code is unavoidable - I assumed it might be something from spring but ServletRequest goes all the way up - thats all you get even if you were making a servlet from scratch by subclassing [HttpServlet](http://docs.oracle.com/javaee/1.4/api/javax/servlet/http/HttpServlet.html)\r\n\r\nMy recommendation would be this - **don&#39;t read the request body in a filter**.  You&#39;ll be opening up a can of worms that will cause strange problems later on.","title":"java.lang.IllegalStateException: getReader() has already been called for this request","body":"<p>As far as I can tell servlets are fundamentally broken in this regard.  You can try and work around this problem as outlined <a href=\"http://natch3z.blogspot.co.uk/2009/01/read-request-body-in-filter.html\" rel=\"noreferrer\">here</a> but that causes other mysterious problems when other things try and work with it.</p>\n\n<p>Effectively he suggests cloning the request, reading the body and then in the the cloned class overriding the getReader and getInputStream methods to return the stuff already retrieved.</p>\n\n<p>The code I ended up with was this:</p>\n\n<pre><code>import javax.servlet.ServletInputStream;\nimport javax.servlet.http.HttpServletRequest;\nimport javax.servlet.http.HttpServletRequestWrapper;\nimport java.io.*;\n\n//this class stops reading the request payload twice causing an exception\npublic class WrappedRequest extends HttpServletRequestWrapper\n{\n    private String _body;\n    private HttpServletRequest _request;\n\n    public WrappedRequest(HttpServletRequest request) throws IOException\n    {\n        super(request);\n        _request = request;\n\n        _body = \"\";\n        try (BufferedReader bufferedReader = request.getReader())\n        {\n            String line;\n            while ((line = bufferedReader.readLine()) != null)\n                _body += line;\n        }\n    }\n\n    @Override\n    public ServletInputStream getInputStream() throws IOException\n    {\n        final ByteArrayInputStream byteArrayInputStream = new ByteArrayInputStream(_body.getBytes());\n        return new ServletInputStream()\n        {\n            public int read() throws IOException\n            {\n                return byteArrayInputStream.read();\n            }\n        };\n    }\n\n    @Override\n    public BufferedReader getReader() throws IOException\n    {\n        return new BufferedReader(new InputStreamReader(this.getInputStream()));\n    }\n}\n</code></pre>\n\n<p>Anyway this appeared to be working fine until we realised that uploading a file from the browser wasn't working.  I bisected through the changes and discovered this was the culprit.</p>\n\n<p>Some people in the comments in that article say you need to override methods to do with parameters but don't explain how to do this.  </p>\n\n<p>As a result I checked to see if there was any difference in the two requests.  However after cloning the request it had identical sets of parameters (both original request + cloned had none) aswell as an identical set of headers.  </p>\n\n<p>However in some manner the request was being effected and screwing up the understanding of the request further down the line - in my case causing a bizaare error in a library (extdirectspring) where something was trying to read the contents as Json.  Taking out the code that read the body in the filter made it work again.</p>\n\n<p>My calling code looked like this:</p>\n\n<pre><code>@Override\npublic void doFilter(ServletRequest request, ServletResponse response, FilterChain filterChain) throws IOException, ServletException\n{\n    HttpServletRequest properRequest = ((HttpServletRequest)request);\n\n    String pathInfo = properRequest.getPathInfo();\n    String target = \"\";\n    if(pathInfo == null)\n        pathInfo = \"\";\n\n    if(pathInfo.equals(\"/router\"))\n    {\n        //note this is because servlet requests hate you!\n        //if you read their contents more than once then they throw an exception so we need to do some madness\n        //to make this not the case\n        WrappedRequest wrappedRequest = new WrappedRequest(properRequest);\n        target = ParseExtDirectTargetFrom(wrappedRequest);\n        request = wrappedRequest;\n    }\n\n    boolean callingSpecialResetMethod = pathInfo.equals(\"/resetErrorState\") || target.equals(\"resetErrorState\");\n    if(_errorHandler.IsRejectingRequests() &amp;&amp; !callingSpecialResetMethod)\n        return;\n\n    try {\n        filterChain.doFilter(request, response);\n    }\n    catch (Exception exception) {\n        ((HttpServletResponse) response).sendError(HttpServletResponse.SC_INTERNAL_SERVER_ERROR, \"ERROR\");\n        _errorHandler.NotifyOf(exception);\n    }\n}\n</code></pre>\n\n<p>I've ommitted the contents of <code>ParseExtDirectTargetFrom</code> but it calls getReader().</p>\n\n<p>In my case the filter was working for all other requests but the strange behaviour in this case made me realise something wasn't quite right and what I was trying to do (implement sensible exception handling behaviour for tests) wasn't worth potentially breaking random future requests (as I couldn't figure out what had caused the request to become broken).</p>\n\n<p>Also it's worth noting that the broken code is unavoidable - I assumed it might be something from spring but ServletRequest goes all the way up - thats all you get even if you were making a servlet from scratch by subclassing <a href=\"http://docs.oracle.com/javaee/1.4/api/javax/servlet/http/HttpServlet.html\" rel=\"noreferrer\">HttpServlet</a></p>\n\n<p>My recommendation would be this - <strong>don't read the request body in a filter</strong>.  You'll be opening up a can of worms that will cause strange problems later on.</p>\n"},{"tags":[],"owner":{"account_id":5163994,"reputation":2550,"user_id":4134683,"display_name":"Swarit Agarwal"},"down_vote_count":0,"up_vote_count":17,"is_accepted":false,"score":17,"last_activity_date":1691680075,"creation_date":1499073721,"answer_id":44881961,"question_id":7318632,"body_markdown":"Use `ContentCachingRequestWrapper` class. Wrapping `HttpServletRequest` in this will resolve the issue.\r\n\r\n**Sample** : if you want to convert your **&quot;HttpServletRequest servletRequest&quot;** you can do some thing like\r\n\r\n    import org.springframework.web.util.ContentCachingRequestWrapper;\r\n\r\n    ContentCachingRequestWrapper request = new ContentCachingRequestWrapper(servletRequest);\r\n\r\nHope it helps!!!","title":"java.lang.IllegalStateException: getReader() has already been called for this request","body":"<p>Use <code>ContentCachingRequestWrapper</code> class. Wrapping <code>HttpServletRequest</code> in this will resolve the issue.</p>\n<p><strong>Sample</strong> : if you want to convert your <strong>&quot;HttpServletRequest servletRequest&quot;</strong> you can do some thing like</p>\n<pre><code>import org.springframework.web.util.ContentCachingRequestWrapper;\n\nContentCachingRequestWrapper request = new ContentCachingRequestWrapper(servletRequest);\n</code></pre>\n<p>Hope it helps!!!</p>\n"},{"tags":[],"owner":{"account_id":11875387,"reputation":145,"user_id":8690573,"display_name":"Dagon"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691680964,"creation_date":1646413115,"answer_id":71354717,"question_id":7318632,"body_markdown":"Well, maybe this is something quite obvious, but I want to share with you this code that works OK for me. In a Spring Boot project with JWT, for the request of the client, was necessary to save all requests with their responses in a database table, and the same time authorize the access to consume the resources. Of course, I used `getReader()` for getting the  request body, but I was obtaining java.lang.IllegalStateException...\r\n\r\n    @Slf4j\r\n    @Component\r\n    @RequiredArgsConstructor\r\n    public class CustomAuthorizationFilter extends OncePerRequestFilter {\r\n\r\n    private final AuthorizationService authorizationService;\r\n    private String requestBody;     \r\n\r\n    @Override\r\n    protected void doFilterInternal(HttpServletRequest request, HttpServletResponse response, FilterChain filterChain) {\r\n        HttpRequestDto requestDto = new HttpRequestDto();\r\n        try {\r\n            if (RequestMethod.POST.name().equalsIgnoreCase(request.getMethod()) &amp;&amp; requestBody != null) { //This line and validation is useful for me [requestBody != null]\r\n                requestBody = request.getReader().lines().collect(Collectors.joining(System.lineSeparator()));\r\n            }\r\n            //Do all JWT control\r\n            requestDto.setRequestURI(request.getRequestURI());\r\n            requestDto.setMethod(request.getMethod());\r\n            requestDto.setBody(requestBody);\r\n        }catch (IOException ie) {\r\n            responseError(_3001, response, ie);\r\n        } finally {\r\n            try {\r\n                ContentCachingResponseWrapper responseWrapper = new ContentCachingResponseWrapper(response);\r\n                filterChain.doFilter(request, responseWrapper);\r\n                saveResponse(responseWrapper, requestDto);\r\n            } catch (ServletException | IOException se) {\r\n                responseError(_3002, response, se);\r\n            }\r\n        }\r\n    }\r\n\r\n\r\n    private void saveResponse(ContentCachingResponseWrapper responseWrapper, HttpRequestDto requestDto) {\r\n        try {\r\n            HttpResponseDto responseDto = new HttpResponseDto();\r\n            responseDto.setStatus(responseWrapper.getStatus());\r\n            byte[] responseArray = responseWrapper.getContentAsByteArray();\r\n            String responseBody = new String(responseArray, responseWrapper.getCharacterEncoding());\r\n            responseDto.setBody(responseBody);\r\n            responseWrapper.copyBodyToResponse();\r\n            authorizationService.seveInDatabase(requestDto, responseDto);            \r\n        } catch (Exception e) {\r\n            log.error(&quot;Error ServletException | IOException in CustomAuthorizationFilter.saveResponse&quot;, e);\r\n        }\r\n    }\r\n\r\n    private void responseError(LogCode code, HttpServletResponse response, Exception e) {\r\n        try {\r\n            Map&lt;String, Object&gt; error = new HashMap&lt;&gt;();\r\n            error.put(&quot;log&quot;, LogUtil.getLog(code));\r\n            error.put(&quot;message&quot;, e.getMessage());\r\n            response.setContentType(APPLICATION_JSON_VALUE);\r\n            new ObjectMapper().writeValue(response.getOutputStream(), error);\r\n            e.printStackTrace();\r\n        } catch (IOException ie) {\r\n            log.error(&quot;Error IOException in HttpLoggingFilter.responseError:&quot;, ie);\r\n        }\r\n    }\r\n\r\n\r\n    public String getRequestBody() {\r\n        return requestBody;\r\n    }\r\n\r\n    public void setRequestBody(String requestBody) {\r\n        this.requestBody = requestBody;\r\n    }\r\n\r\n    }\r\n\r\nSo my solution was use getter and setter methods of de local attribute requestBody, for validate if this is or not null and does not call again getReader() method because save in memory when set value. This worked perfect for me. Regards.","title":"java.lang.IllegalStateException: getReader() has already been called for this request","body":"<p>Well, maybe this is something quite obvious, but I want to share with you this code that works OK for me. In a Spring Boot project with JWT, for the request of the client, was necessary to save all requests with their responses in a database table, and the same time authorize the access to consume the resources. Of course, I used <code>getReader()</code> for getting the  request body, but I was obtaining java.lang.IllegalStateException...</p>\n<pre><code>@Slf4j\n@Component\n@RequiredArgsConstructor\npublic class CustomAuthorizationFilter extends OncePerRequestFilter {\n\nprivate final AuthorizationService authorizationService;\nprivate String requestBody;     \n\n@Override\nprotected void doFilterInternal(HttpServletRequest request, HttpServletResponse response, FilterChain filterChain) {\n    HttpRequestDto requestDto = new HttpRequestDto();\n    try {\n        if (RequestMethod.POST.name().equalsIgnoreCase(request.getMethod()) &amp;&amp; requestBody != null) { //This line and validation is useful for me [requestBody != null]\n            requestBody = request.getReader().lines().collect(Collectors.joining(System.lineSeparator()));\n        }\n        //Do all JWT control\n        requestDto.setRequestURI(request.getRequestURI());\n        requestDto.setMethod(request.getMethod());\n        requestDto.setBody(requestBody);\n    }catch (IOException ie) {\n        responseError(_3001, response, ie);\n    } finally {\n        try {\n            ContentCachingResponseWrapper responseWrapper = new ContentCachingResponseWrapper(response);\n            filterChain.doFilter(request, responseWrapper);\n            saveResponse(responseWrapper, requestDto);\n        } catch (ServletException | IOException se) {\n            responseError(_3002, response, se);\n        }\n    }\n}\n\n\nprivate void saveResponse(ContentCachingResponseWrapper responseWrapper, HttpRequestDto requestDto) {\n    try {\n        HttpResponseDto responseDto = new HttpResponseDto();\n        responseDto.setStatus(responseWrapper.getStatus());\n        byte[] responseArray = responseWrapper.getContentAsByteArray();\n        String responseBody = new String(responseArray, responseWrapper.getCharacterEncoding());\n        responseDto.setBody(responseBody);\n        responseWrapper.copyBodyToResponse();\n        authorizationService.seveInDatabase(requestDto, responseDto);            \n    } catch (Exception e) {\n        log.error(&quot;Error ServletException | IOException in CustomAuthorizationFilter.saveResponse&quot;, e);\n    }\n}\n\nprivate void responseError(LogCode code, HttpServletResponse response, Exception e) {\n    try {\n        Map&lt;String, Object&gt; error = new HashMap&lt;&gt;();\n        error.put(&quot;log&quot;, LogUtil.getLog(code));\n        error.put(&quot;message&quot;, e.getMessage());\n        response.setContentType(APPLICATION_JSON_VALUE);\n        new ObjectMapper().writeValue(response.getOutputStream(), error);\n        e.printStackTrace();\n    } catch (IOException ie) {\n        log.error(&quot;Error IOException in HttpLoggingFilter.responseError:&quot;, ie);\n    }\n}\n\n\npublic String getRequestBody() {\n    return requestBody;\n}\n\npublic void setRequestBody(String requestBody) {\n    this.requestBody = requestBody;\n}\n\n}\n</code></pre>\n<p>So my solution was use getter and setter methods of de local attribute requestBody, for validate if this is or not null and does not call again getReader() method because save in memory when set value. This worked perfect for me. Regards.</p>\n"},{"tags":[],"owner":{"account_id":14537432,"reputation":874,"user_id":10500330,"display_name":"Anurag Bhalekar"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1686297622,"creation_date":1686297622,"answer_id":76438321,"question_id":7318632,"body_markdown":"Implementing other solutions would possibly lead you to the following exception\r\n\r\n    java.lang.IllegalStateException: getInputStream() has already been called for this request\r\n\r\nTo read HttpServletRequest, following needs to be implemented.\r\n\r\n**Background:**\r\n\r\nTo get the request body from the request, HttpServletRequest is provided with and InputStream class. The getReader() is what is usually used to stream the request. This function internally calls getInputStream() function, which returns us the stream for us to read the request. Now, note that its a stream, and can be opened only once. Hence, while reading this (i.e. implementing the solutions given in this thread) it usually throws &quot;stream is already closed.&quot; exception. Now this happens because, the tomcat server has already opened and read the request once. Hence, we need to implement a wrapper here, which helps us to re-open an already read stream by keeping an instance of it. This wrapper again, cannot be used directly, instead, needs to be added at spring filter level, while the tomcat server is reading it. \r\n\r\n**Code:**\r\n\r\nServlet Request Wrapper Class:\r\n\r\n    import lombok.extern.slf4j.Slf4j;\r\n    import javax.servlet.ReadListener;\r\n    import javax.servlet.ServletInputStream;\r\n    import javax.servlet.http.HttpServletRequest;\r\n    import javax.servlet.http.HttpServletRequestWrapper;\r\n    import java.io.*;\r\n    @Slf4j\r\n    public class MyHttpServletRequestWrapper extends HttpServletRequestWrapper {\r\n    private final String body;public MyHttpServletRequestWrapper(HttpServletRequest request) {\r\n        super(request);\r\n\r\n        StringBuilder stringBuilder = new StringBuilder();\r\n        BufferedReader bufferedReader = null;\r\n\r\n        try {\r\n            InputStream inputStream = request.getInputStream();\r\n\r\n            if (inputStream != null) {\r\n                bufferedReader = new BufferedReader(new InputStreamReader(inputStream));\r\n\r\n                char[] charBuffer = new char[128];\r\n                int bytesRead = -1;\r\n\r\n                while ((bytesRead = bufferedReader.read(charBuffer)) &gt; 0) {\r\n                    stringBuilder.append(charBuffer, 0, bytesRead);\r\n                }\r\n            } else {\r\n                stringBuilder.append(&quot;&quot;);\r\n            }\r\n        } catch (IOException ex) {\r\n            log.error(&quot;Error reading the request body...&quot;);\r\n        } finally {\r\n            if (bufferedReader != null) {\r\n                try {\r\n                    bufferedReader.close();\r\n                } catch (IOException ex) {\r\n                    log.error(&quot;Error closing bufferedReader...&quot;);\r\n                }\r\n            }\r\n        }\r\n\r\n        body = stringBuilder.toString();\r\n    }\r\n\r\n    @Override\r\n    public ServletInputStream getInputStream () {\r\n        final ByteArrayInputStream byteArrayInputStream = new ByteArrayInputStream(body.getBytes());\r\n\r\n        ServletInputStream inputStream = new ServletInputStream() {\r\n            @Override\r\n            public boolean isFinished() {\r\n                return false;\r\n            }\r\n\r\n            @Override\r\n            public boolean isReady() {\r\n                return false;\r\n            }\r\n\r\n            @Override\r\n            public void setReadListener(ReadListener readListener) {\r\n\r\n            }\r\n\r\n            public int read () throws IOException {\r\n                return byteArrayInputStream.read();\r\n            }\r\n        };\r\n\r\n        return inputStream;\r\n    }\r\n\r\n    @Override\r\n    public BufferedReader getReader(){\r\n        return new BufferedReader(new InputStreamReader(this.getInputStream()));\r\n    }\r\n    }\r\n\r\nNow we need to use the wrapper my implementing it in a filter, as shown below.\r\n\r\n    import lombok.extern.slf4j.Slf4j;\r\n    import org.springframework.core.annotation.Order;\r\n    import org.springframework.stereotype.Component;\r\n    import javax.servlet.*;\r\n    import javax.servlet.http.HttpServletRequest;\r\n    import java.io.IOException;\r\n    import java.util.Objects;\r\n    @Component\r\n    @Order(1)\r\n    @Slf4j\r\n    public class ServletFilter implements Filter {\r\n\r\n    @Override\r\n    public void doFilter(ServletRequest servletRequest, ServletResponse servletResponse, FilterChain filterChain) throws IOException, ServletException {\r\n            ServletRequest requestWrapper = null;\r\n            if (servletRequest instanceof HttpServletRequest) {\r\n                requestWrapper = new MyHttpServletRequestWrapper((HttpServletRequest) servletRequest);\r\n            }\r\n            if (Objects.isNull(requestWrapper)){\r\n                filterChain.doFilter(servletRequest, servletResponse);\r\n            } else {\r\n                filterChain.doFilter(requestWrapper, servletResponse);\r\n            }\r\n    }\r\n    }\r\n\r\nThen, the suggested implementations can be used as follows to get the request body as following:\r\n\r\n        private String getRequestBody(HttpServletRequest request) {\r\n        try {\r\n            return request.getReader().lines().collect(Collectors.joining());\r\n        }catch (Exception e){\r\n            e.printStackTrace();\r\n            return &quot;{}&quot;;\r\n        }\r\n    }","title":"java.lang.IllegalStateException: getReader() has already been called for this request","body":"<p>Implementing other solutions would possibly lead you to the following exception</p>\n<pre><code>java.lang.IllegalStateException: getInputStream() has already been called for this request\n</code></pre>\n<p>To read HttpServletRequest, following needs to be implemented.</p>\n<p><strong>Background:</strong></p>\n<p>To get the request body from the request, HttpServletRequest is provided with and InputStream class. The getReader() is what is usually used to stream the request. This function internally calls getInputStream() function, which returns us the stream for us to read the request. Now, note that its a stream, and can be opened only once. Hence, while reading this (i.e. implementing the solutions given in this thread) it usually throws &quot;stream is already closed.&quot; exception. Now this happens because, the tomcat server has already opened and read the request once. Hence, we need to implement a wrapper here, which helps us to re-open an already read stream by keeping an instance of it. This wrapper again, cannot be used directly, instead, needs to be added at spring filter level, while the tomcat server is reading it.</p>\n<p><strong>Code:</strong></p>\n<p>Servlet Request Wrapper Class:</p>\n<pre><code>import lombok.extern.slf4j.Slf4j;\nimport javax.servlet.ReadListener;\nimport javax.servlet.ServletInputStream;\nimport javax.servlet.http.HttpServletRequest;\nimport javax.servlet.http.HttpServletRequestWrapper;\nimport java.io.*;\n@Slf4j\npublic class MyHttpServletRequestWrapper extends HttpServletRequestWrapper {\nprivate final String body;public MyHttpServletRequestWrapper(HttpServletRequest request) {\n    super(request);\n\n    StringBuilder stringBuilder = new StringBuilder();\n    BufferedReader bufferedReader = null;\n\n    try {\n        InputStream inputStream = request.getInputStream();\n\n        if (inputStream != null) {\n            bufferedReader = new BufferedReader(new InputStreamReader(inputStream));\n\n            char[] charBuffer = new char[128];\n            int bytesRead = -1;\n\n            while ((bytesRead = bufferedReader.read(charBuffer)) &gt; 0) {\n                stringBuilder.append(charBuffer, 0, bytesRead);\n            }\n        } else {\n            stringBuilder.append(&quot;&quot;);\n        }\n    } catch (IOException ex) {\n        log.error(&quot;Error reading the request body...&quot;);\n    } finally {\n        if (bufferedReader != null) {\n            try {\n                bufferedReader.close();\n            } catch (IOException ex) {\n                log.error(&quot;Error closing bufferedReader...&quot;);\n            }\n        }\n    }\n\n    body = stringBuilder.toString();\n}\n\n@Override\npublic ServletInputStream getInputStream () {\n    final ByteArrayInputStream byteArrayInputStream = new ByteArrayInputStream(body.getBytes());\n\n    ServletInputStream inputStream = new ServletInputStream() {\n        @Override\n        public boolean isFinished() {\n            return false;\n        }\n\n        @Override\n        public boolean isReady() {\n            return false;\n        }\n\n        @Override\n        public void setReadListener(ReadListener readListener) {\n\n        }\n\n        public int read () throws IOException {\n            return byteArrayInputStream.read();\n        }\n    };\n\n    return inputStream;\n}\n\n@Override\npublic BufferedReader getReader(){\n    return new BufferedReader(new InputStreamReader(this.getInputStream()));\n}\n}\n</code></pre>\n<p>Now we need to use the wrapper my implementing it in a filter, as shown below.</p>\n<pre><code>import lombok.extern.slf4j.Slf4j;\nimport org.springframework.core.annotation.Order;\nimport org.springframework.stereotype.Component;\nimport javax.servlet.*;\nimport javax.servlet.http.HttpServletRequest;\nimport java.io.IOException;\nimport java.util.Objects;\n@Component\n@Order(1)\n@Slf4j\npublic class ServletFilter implements Filter {\n\n@Override\npublic void doFilter(ServletRequest servletRequest, ServletResponse servletResponse, FilterChain filterChain) throws IOException, ServletException {\n        ServletRequest requestWrapper = null;\n        if (servletRequest instanceof HttpServletRequest) {\n            requestWrapper = new MyHttpServletRequestWrapper((HttpServletRequest) servletRequest);\n        }\n        if (Objects.isNull(requestWrapper)){\n            filterChain.doFilter(servletRequest, servletResponse);\n        } else {\n            filterChain.doFilter(requestWrapper, servletResponse);\n        }\n}\n}\n</code></pre>\n<p>Then, the suggested implementations can be used as follows to get the request body as following:</p>\n<pre><code>    private String getRequestBody(HttpServletRequest request) {\n    try {\n        return request.getReader().lines().collect(Collectors.joining());\n    }catch (Exception e){\n        e.printStackTrace();\n        return &quot;{}&quot;;\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":279561,"reputation":26273,"user_id":574799,"accept_rate":74,"display_name":"lukastymo"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":86776,"favorite_count":0,"down_vote_count":1,"up_vote_count":46,"accepted_answer_id":7318845,"answer_count":6,"score":45,"last_activity_date":1691680964,"creation_date":1315305954,"question_id":7318632,"body_markdown":"I want to add logging to my Servlet, so I&#39;ve created Filter which should display request and go to the Servlet. But unfortunately I&#39;ve encoutered exception:\r\n\r\n    java.lang.IllegalStateException: getReader() has already been called for this request\r\n    \tat org.apache.catalina.connector.Request.getInputStream(Request.java:948)\r\n    \tat org.apache.catalina.connector.RequestFacade.getInputStream(RequestFacade.java:338)\r\n    \tat com.noelios.restlet.ext.servlet.ServletCall.getRequestEntityStream(ServletCall.java:190)\r\n\r\nSo to fix this problem I&#39;ve found solution with Wrapper, but it doesn&#39;t work. What else can I use/change in code? Any ideas?\r\n\r\n[MyHttpServletRequestWrapper]\r\n\r\n    public class MyHttpServletRequestWrapper extends HttpServletRequestWrapper\r\n    {\r\n        public MyHttpServletRequestWrapper(HttpServletRequest request)\r\n        {\r\n            super(request);\r\n        }\r\n    \r\n        private String getBodyAsString()\r\n        {\r\n            StringBuffer buff = new StringBuffer();\r\n            buff.append(&quot; BODY_DATA START [ &quot;);\r\n            char[] charArr = new char[getContentLength()];\r\n            try\r\n            {\r\n                BufferedReader reader = new BufferedReader(getReader());\r\n                reader.read(charArr, 0, charArr.length);\r\n                reader.close();\r\n            }\r\n            catch (IOException e)\r\n            {\r\n                e.printStackTrace();\r\n            }\r\n            buff.append(charArr);\r\n            buff.append(&quot; ] BODY_DATA END &quot;);\r\n            return buff.toString();\r\n        }\r\n    \r\n        public String toString()\r\n        {\r\n            return getBodyAsString();\r\n        }\r\n    }\r\n\r\n\r\n[MyFilter]\r\n\r\n    public class MyFilterimplements Filter\r\n    {\r\n        @Override\r\n        public void init(FilterConfig filterConfig) throws ServletException\r\n        {\r\n        }\r\n    \r\n        @Override\r\n        public void doFilter(ServletRequest request, ServletResponse response, FilterChain chain) throws IOException, ServletException\r\n        {\r\n            final HttpServletRequest httpServletRequest = (HttpServletRequest) request;\r\n            final HttpServletResponse httpServletResponse = (HttpServletResponse) response;\r\n    \r\n            final HttpServletRequestWrapper requestWrapper = new MyHttpServletRequestWrapper(httpServletRequest);\r\n            final String requestBody = requestWrapper.toString();\r\n    \r\n            chain.doFilter(request, response);\r\n        }\r\n    }\r\n\r\n","title":"java.lang.IllegalStateException: getReader() has already been called for this request","body":"<p>I want to add logging to my Servlet, so I've created Filter which should display request and go to the Servlet. But unfortunately I've encoutered exception:</p>\n\n<pre><code>java.lang.IllegalStateException: getReader() has already been called for this request\n    at org.apache.catalina.connector.Request.getInputStream(Request.java:948)\n    at org.apache.catalina.connector.RequestFacade.getInputStream(RequestFacade.java:338)\n    at com.noelios.restlet.ext.servlet.ServletCall.getRequestEntityStream(ServletCall.java:190)\n</code></pre>\n\n<p>So to fix this problem I've found solution with Wrapper, but it doesn't work. What else can I use/change in code? Any ideas?</p>\n\n<p>[MyHttpServletRequestWrapper]</p>\n\n<pre><code>public class MyHttpServletRequestWrapper extends HttpServletRequestWrapper\n{\n    public MyHttpServletRequestWrapper(HttpServletRequest request)\n    {\n        super(request);\n    }\n\n    private String getBodyAsString()\n    {\n        StringBuffer buff = new StringBuffer();\n        buff.append(\" BODY_DATA START [ \");\n        char[] charArr = new char[getContentLength()];\n        try\n        {\n            BufferedReader reader = new BufferedReader(getReader());\n            reader.read(charArr, 0, charArr.length);\n            reader.close();\n        }\n        catch (IOException e)\n        {\n            e.printStackTrace();\n        }\n        buff.append(charArr);\n        buff.append(\" ] BODY_DATA END \");\n        return buff.toString();\n    }\n\n    public String toString()\n    {\n        return getBodyAsString();\n    }\n}\n</code></pre>\n\n<p>[MyFilter]</p>\n\n<pre><code>public class MyFilterimplements Filter\n{\n    @Override\n    public void init(FilterConfig filterConfig) throws ServletException\n    {\n    }\n\n    @Override\n    public void doFilter(ServletRequest request, ServletResponse response, FilterChain chain) throws IOException, ServletException\n    {\n        final HttpServletRequest httpServletRequest = (HttpServletRequest) request;\n        final HttpServletResponse httpServletResponse = (HttpServletResponse) response;\n\n        final HttpServletRequestWrapper requestWrapper = new MyHttpServletRequestWrapper(httpServletRequest);\n        final String requestBody = requestWrapper.toString();\n\n        chain.doFilter(request, response);\n    }\n}\n</code></pre>\n"},{"tags":["java","spring","aop"],"comments":[{"owner":{"account_id":9735171,"reputation":2264,"user_id":7218656,"accept_rate":75,"display_name":"Arun Sudhakaran"},"score":0,"creation_date":1691642997,"post_id":76872206,"comment_id":135519736,"body_markdown":"Does this answer your question? [Can Intellij show warning if advice advices no method?](https://stackoverflow.com/questions/42435691/can-intellij-show-warning-if-advice-advices-no-method)","body":"Does this answer your question? <a href=\"https://stackoverflow.com/questions/42435691/can-intellij-show-warning-if-advice-advices-no-method\">Can Intellij show warning if advice advices no method?</a>"},{"owner":{"account_id":1087271,"reputation":64101,"user_id":1082681,"accept_rate":90,"display_name":"kriegaex"},"score":0,"creation_date":1691649021,"post_id":76872206,"comment_id":135520409,"body_markdown":"The first question that comes to my mind when seeing this question is: Why do you not just try and run the application to see for yourself, if IDEA tells you the truth or not?","body":"The first question that comes to my mind when seeing this question is: Why do you not just try and run the application to see for yourself, if IDEA tells you the truth or not?"},{"owner":{"account_id":1087271,"reputation":64101,"user_id":1082681,"accept_rate":90,"display_name":"kriegaex"},"score":0,"creation_date":1691649264,"post_id":76872206,"comment_id":135520448,"body_markdown":"Reading the code without having tried to copy and run it, the pointcut looks OK to me. Did you maybe not configure your Spring project correctly for component scan? But really, just run the project, let the aspect advice log something and see if it gets triggered.","body":"Reading the code without having tried to copy and run it, the pointcut looks OK to me. Did you maybe not configure your Spring project correctly for component scan? But really, just run the project, let the aspect advice log something and see if it gets triggered."},{"owner":{"account_id":28965224,"reputation":321,"user_id":22186847,"display_name":"JoreJoh"},"score":0,"creation_date":1691669300,"post_id":76872206,"comment_id":135524273,"body_markdown":"@kriegaex the IDE, alas, was right... Please see the edit","body":"@kriegaex the IDE, alas, was right... Please see the edit"}],"answers":[{"tags":[],"owner":{"account_id":28965224,"reputation":321,"user_id":22186847,"display_name":"JoreJoh"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1691680075,"creation_date":1691680075,"answer_id":76877045,"question_id":76872206,"body_markdown":"Oh boy, oh boy... Rookie mistake... I forgot to include the `@EnableAspectJAutoProxy` annotation\r\n```java\r\npackage org.example.configurations;\r\n\r\nimport com.fasterxml.jackson.databind.ObjectMapper;\r\nimport com.fasterxml.jackson.module.paramnames.ParameterNamesModule;\r\nimport org.example.requestRateManagers.RequestRateManager;\r\nimport org.example.requestRateManagers.RequestRateManagerImpl;\r\nimport org.springframework.context.annotation.Bean;\r\nimport org.springframework.context.annotation.ComponentScan;\r\nimport org.springframework.context.annotation.Configuration;\r\nimport org.springframework.context.annotation.EnableAspectJAutoProxy;\r\n\r\nimport java.util.concurrent.TimeUnit;\r\n\r\n@Configuration\r\n@ComponentScan(basePackages = &quot;org.example&quot;)\r\n@EnableAspectJAutoProxy // this is important\r\npublic class SpringConfig {\r\n    @Bean\r\n    public RequestRateManager requestRateManager() {\r\n        return new RequestRateManagerImpl(TimeUnit.MINUTES, 100);\r\n    }\r\n\r\n    @Bean\r\n    public ObjectMapper objectMapper() {\r\n        return new ObjectMapper().registerModule(new ParameterNamesModule());\r\n    }\r\n}\r\n```\r\nHowever, the IDE is still not convinced\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/5GHDH.png","title":"&quot;This advice advises no methods&quot;","body":"<p>Oh boy, oh boy... Rookie mistake... I forgot to include the <code>@EnableAspectJAutoProxy</code> annotation</p>\n<pre class=\"lang-java prettyprint-override\"><code>package org.example.configurations;\n\nimport com.fasterxml.jackson.databind.ObjectMapper;\nimport com.fasterxml.jackson.module.paramnames.ParameterNamesModule;\nimport org.example.requestRateManagers.RequestRateManager;\nimport org.example.requestRateManagers.RequestRateManagerImpl;\nimport org.springframework.context.annotation.Bean;\nimport org.springframework.context.annotation.ComponentScan;\nimport org.springframework.context.annotation.Configuration;\nimport org.springframework.context.annotation.EnableAspectJAutoProxy;\n\nimport java.util.concurrent.TimeUnit;\n\n@Configuration\n@ComponentScan(basePackages = &quot;org.example&quot;)\n@EnableAspectJAutoProxy // this is important\npublic class SpringConfig {\n    @Bean\n    public RequestRateManager requestRateManager() {\n        return new RequestRateManagerImpl(TimeUnit.MINUTES, 100);\n    }\n\n    @Bean\n    public ObjectMapper objectMapper() {\n        return new ObjectMapper().registerModule(new ParameterNamesModule());\n    }\n}\n</code></pre>\n<p>However, the IDE is still not convinced</p>\n<p><a href=\"https://i.stack.imgur.com/5GHDH.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/5GHDH.png\" alt=\"enter image description here\" /></a></p>\n"}],"owner":{"account_id":28965224,"reputation":321,"user_id":22186847,"display_name":"JoreJoh"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":92,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76877045,"answer_count":1,"score":0,"last_activity_date":1691680075,"creation_date":1691632777,"question_id":76872206,"body_markdown":"I am trying to complete a simple (but, tbh, badly formulated) entry test. I used an aspect to incorporate the request limit feature, but the chances are it doesn&#39;t work. The IDE says &quot;This advice advises no methods&quot;. I wrote and ran an integration test, and it seems the IDE is correct. **What is my mistake, why doesn&#39;t my advice get applied?** I need to aspect all methods within the `org.example` package that have the `@ManageRequestRate` annotation (it applies only to one method, but let&#39;s imagine I can include more methods like that in the future)\r\n```java\r\npackage org.example.aspects;\r\n\r\nimport lombok.RequiredArgsConstructor;\r\nimport org.aspectj.lang.annotation.Aspect;\r\nimport org.aspectj.lang.annotation.Before;\r\nimport org.aspectj.lang.annotation.Pointcut;\r\nimport org.example.requestRateManagers.RequestRateManager;\r\nimport org.springframework.stereotype.Component;\r\n\r\n@Component\r\n@Aspect\r\n@RequiredArgsConstructor\r\npublic class RequestRateAspect {\r\n    private final RequestRateManager requestRateManager;\r\n\r\n    @Pointcut(&quot;within(org.example..*) &amp;&amp; @annotation(org.example.annotations.ManageRequestRate)&quot;)\r\n    public void annotationManageRequests() {\r\n    }\r\n\r\n    @Before(&quot;annotationManageRequests()&quot;)\r\n    public void requestRateAdvice() {\r\n        System.out.println(&quot;Running requestRateAdvice()...&quot;); // a simple log to see whether it works\r\n        requestRateManager.ensureRequestRate();\r\n    }\r\n}\r\n```\r\n```java\r\npackage org.example.annotations;\r\n\r\nimport java.lang.annotation.ElementType;\r\nimport java.lang.annotation.Retention;\r\nimport java.lang.annotation.RetentionPolicy;\r\nimport java.lang.annotation.Target;\r\n\r\n@Retention(RetentionPolicy.RUNTIME)\r\n@Target(ElementType.METHOD)\r\npublic @interface ManageRequestRate {\r\n}\r\n```\r\n```java\r\npackage org.example.requestRateManagers;\r\n\r\npublic interface RequestRateManager {\r\n    void ensureRequestRate();\r\n}\r\n```\r\n```java\r\npackage org.example.requestRateManagers;\r\n\r\nimport org.example.exceptions.CrptException;\r\n\r\nimport java.util.concurrent.Executors;\r\nimport java.util.concurrent.Semaphore;\r\nimport java.util.concurrent.TimeUnit;\r\n\r\npublic class RequestRateManagerImpl implements RequestRateManager {\r\n    private final TimeUnit timeUnit;\r\n    private final int requestsPerTimeUnit;\r\n    private final Semaphore semaphore;\r\n\r\n    public RequestRateManagerImpl(TimeUnit timeUnit, int requestsPerTimeUnit) {\r\n        this.timeUnit = timeUnit;\r\n        this.requestsPerTimeUnit = requestsPerTimeUnit;\r\n        this.semaphore = new Semaphore(requestsPerTimeUnit, true);\r\n        startScheduledExecutor();\r\n    }\r\n\r\n    private void startScheduledExecutor() {\r\n        Executors.newSingleThreadScheduledExecutor()\r\n                .scheduleAtFixedRate(this::releasePermits, 0, 1, timeUnit);\r\n    }\r\n\r\n    @Override\r\n    public void ensureRequestRate() {\r\n        try {\r\n            semaphore.acquire();\r\n        } catch (InterruptedException e) {\r\n            throw new CrptException(e);\r\n        } finally {\r\n            semaphore.release();\r\n        }\r\n    }\r\n\r\n    private void releasePermits() {\r\n        int numberOfPermitsToRelease = requestsPerTimeUnit - semaphore.availablePermits();\r\n        semaphore.release(numberOfPermitsToRelease);\r\n    }\r\n}\r\n```\r\n```java\r\npackage org.example;\r\n\r\nimport com.fasterxml.jackson.core.JsonProcessingException;\r\nimport com.fasterxml.jackson.databind.ObjectMapper;\r\nimport lombok.RequiredArgsConstructor;\r\nimport org.example.annotations.ManageRequestRate;\r\nimport org.example.exceptions.CrptException;\r\nimport org.example.models.Item;\r\nimport org.springframework.stereotype.Component;\r\n\r\nimport java.util.HashMap;\r\nimport java.util.Map;\r\n\r\n@Component\r\n@RequiredArgsConstructor\r\npublic class CrptAPI {\r\n    private final ObjectMapper objectMapper;\r\n\r\n    @ManageRequestRate\r\n    public String createDocument(Item item, String signature) {\r\n        Map&lt;String, Object&gt; documentMap = getDocumentMap(item, signature);\r\n        String document;\r\n        try {\r\n            document = objectMapper.writeValueAsString(documentMap);\r\n        } catch (JsonProcessingException e) {\r\n            throw new CrptException(e);\r\n        }\r\n        return document;\r\n    }\r\n\r\n    private Map&lt;String, Object&gt; getDocumentMap(Item item, String signature) {\r\n        Map&lt;String, Object&gt; documentMap = new HashMap&lt;&gt;();\r\n        documentMap.put(item.getClass().getSimpleName().toLowerCase(), item);\r\n        documentMap.put(&quot;signature&quot;, signature);\r\n        return documentMap;\r\n    }\r\n}\r\n```\r\n```java\r\npublic class CrptAPIIntegrationTest {\r\n    private final ApplicationContext context = new AnnotationConfigApplicationContext(SpringConfig.class);\r\n\r\n    @Test\r\n    public void testCreateDocument() throws JSONException {\r\n        Item item = new Item(UUID.randomUUID(), &quot;test product name&quot;,\r\n                &quot;test brand&quot;, &quot;1234-5678&quot;, &quot;test agent name&quot;);\r\n        UUID id = item.getId();\r\n        CrptAPI crptAPI = context.getBean(CrptAPI.class);\r\n        String documentJson = crptAPI.createDocument(item, &quot;test signature&quot;);\r\n        String expectedJson = &quot;&quot;&quot;\r\n                {\r\n                &quot;item&quot;:\r\n                {\r\n                &quot;id&quot;:&quot;&quot;&quot; + id + &quot;,&quot; + &quot;&quot;&quot;\r\n                &quot;productName&quot;:&quot;test product name&quot;,\r\n                &quot;brand&quot;:&quot;test brand&quot;,\r\n                &quot;agentTaxIdNumber&quot;:&quot;1234-5678&quot;,\r\n                &quot;agentName&quot;:&quot;test agent name&quot;\r\n                },\r\n                &quot;signature&quot;:&quot;test signature&quot;}\r\n                &quot;&quot;&quot;;\r\n        JSONAssert.assertEquals(expectedJson, documentJson, JSONCompareMode.STRICT); // passes, but no log is printed\r\n    }\r\n}\r\n```\r\n[![IntelliJ IDEA with the message &quot;This advice advices no methods&quot;][1]][1]\r\n\r\n[This questions][2] asks a whole nother thing. I have no clue why it was suggested as a potential duplicate\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/vQ2nX.png\r\n  [2]: https://stackoverflow.com/questions/42435691/can-intellij-show-warning-if-advice-advices-no-method","title":"&quot;This advice advises no methods&quot;","body":"<p>I am trying to complete a simple (but, tbh, badly formulated) entry test. I used an aspect to incorporate the request limit feature, but the chances are it doesn't work. The IDE says &quot;This advice advises no methods&quot;. I wrote and ran an integration test, and it seems the IDE is correct. <strong>What is my mistake, why doesn't my advice get applied?</strong> I need to aspect all methods within the <code>org.example</code> package that have the <code>@ManageRequestRate</code> annotation (it applies only to one method, but let's imagine I can include more methods like that in the future)</p>\n<pre class=\"lang-java prettyprint-override\"><code>package org.example.aspects;\n\nimport lombok.RequiredArgsConstructor;\nimport org.aspectj.lang.annotation.Aspect;\nimport org.aspectj.lang.annotation.Before;\nimport org.aspectj.lang.annotation.Pointcut;\nimport org.example.requestRateManagers.RequestRateManager;\nimport org.springframework.stereotype.Component;\n\n@Component\n@Aspect\n@RequiredArgsConstructor\npublic class RequestRateAspect {\n    private final RequestRateManager requestRateManager;\n\n    @Pointcut(&quot;within(org.example..*) &amp;&amp; @annotation(org.example.annotations.ManageRequestRate)&quot;)\n    public void annotationManageRequests() {\n    }\n\n    @Before(&quot;annotationManageRequests()&quot;)\n    public void requestRateAdvice() {\n        System.out.println(&quot;Running requestRateAdvice()...&quot;); // a simple log to see whether it works\n        requestRateManager.ensureRequestRate();\n    }\n}\n</code></pre>\n<pre class=\"lang-java prettyprint-override\"><code>package org.example.annotations;\n\nimport java.lang.annotation.ElementType;\nimport java.lang.annotation.Retention;\nimport java.lang.annotation.RetentionPolicy;\nimport java.lang.annotation.Target;\n\n@Retention(RetentionPolicy.RUNTIME)\n@Target(ElementType.METHOD)\npublic @interface ManageRequestRate {\n}\n</code></pre>\n<pre class=\"lang-java prettyprint-override\"><code>package org.example.requestRateManagers;\n\npublic interface RequestRateManager {\n    void ensureRequestRate();\n}\n</code></pre>\n<pre class=\"lang-java prettyprint-override\"><code>package org.example.requestRateManagers;\n\nimport org.example.exceptions.CrptException;\n\nimport java.util.concurrent.Executors;\nimport java.util.concurrent.Semaphore;\nimport java.util.concurrent.TimeUnit;\n\npublic class RequestRateManagerImpl implements RequestRateManager {\n    private final TimeUnit timeUnit;\n    private final int requestsPerTimeUnit;\n    private final Semaphore semaphore;\n\n    public RequestRateManagerImpl(TimeUnit timeUnit, int requestsPerTimeUnit) {\n        this.timeUnit = timeUnit;\n        this.requestsPerTimeUnit = requestsPerTimeUnit;\n        this.semaphore = new Semaphore(requestsPerTimeUnit, true);\n        startScheduledExecutor();\n    }\n\n    private void startScheduledExecutor() {\n        Executors.newSingleThreadScheduledExecutor()\n                .scheduleAtFixedRate(this::releasePermits, 0, 1, timeUnit);\n    }\n\n    @Override\n    public void ensureRequestRate() {\n        try {\n            semaphore.acquire();\n        } catch (InterruptedException e) {\n            throw new CrptException(e);\n        } finally {\n            semaphore.release();\n        }\n    }\n\n    private void releasePermits() {\n        int numberOfPermitsToRelease = requestsPerTimeUnit - semaphore.availablePermits();\n        semaphore.release(numberOfPermitsToRelease);\n    }\n}\n</code></pre>\n<pre class=\"lang-java prettyprint-override\"><code>package org.example;\n\nimport com.fasterxml.jackson.core.JsonProcessingException;\nimport com.fasterxml.jackson.databind.ObjectMapper;\nimport lombok.RequiredArgsConstructor;\nimport org.example.annotations.ManageRequestRate;\nimport org.example.exceptions.CrptException;\nimport org.example.models.Item;\nimport org.springframework.stereotype.Component;\n\nimport java.util.HashMap;\nimport java.util.Map;\n\n@Component\n@RequiredArgsConstructor\npublic class CrptAPI {\n    private final ObjectMapper objectMapper;\n\n    @ManageRequestRate\n    public String createDocument(Item item, String signature) {\n        Map&lt;String, Object&gt; documentMap = getDocumentMap(item, signature);\n        String document;\n        try {\n            document = objectMapper.writeValueAsString(documentMap);\n        } catch (JsonProcessingException e) {\n            throw new CrptException(e);\n        }\n        return document;\n    }\n\n    private Map&lt;String, Object&gt; getDocumentMap(Item item, String signature) {\n        Map&lt;String, Object&gt; documentMap = new HashMap&lt;&gt;();\n        documentMap.put(item.getClass().getSimpleName().toLowerCase(), item);\n        documentMap.put(&quot;signature&quot;, signature);\n        return documentMap;\n    }\n}\n</code></pre>\n<pre class=\"lang-java prettyprint-override\"><code>public class CrptAPIIntegrationTest {\n    private final ApplicationContext context = new AnnotationConfigApplicationContext(SpringConfig.class);\n\n    @Test\n    public void testCreateDocument() throws JSONException {\n        Item item = new Item(UUID.randomUUID(), &quot;test product name&quot;,\n                &quot;test brand&quot;, &quot;1234-5678&quot;, &quot;test agent name&quot;);\n        UUID id = item.getId();\n        CrptAPI crptAPI = context.getBean(CrptAPI.class);\n        String documentJson = crptAPI.createDocument(item, &quot;test signature&quot;);\n        String expectedJson = &quot;&quot;&quot;\n                {\n                &quot;item&quot;:\n                {\n                &quot;id&quot;:&quot;&quot;&quot; + id + &quot;,&quot; + &quot;&quot;&quot;\n                &quot;productName&quot;:&quot;test product name&quot;,\n                &quot;brand&quot;:&quot;test brand&quot;,\n                &quot;agentTaxIdNumber&quot;:&quot;1234-5678&quot;,\n                &quot;agentName&quot;:&quot;test agent name&quot;\n                },\n                &quot;signature&quot;:&quot;test signature&quot;}\n                &quot;&quot;&quot;;\n        JSONAssert.assertEquals(expectedJson, documentJson, JSONCompareMode.STRICT); // passes, but no log is printed\n    }\n}\n</code></pre>\n<p><a href=\"https://i.stack.imgur.com/vQ2nX.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/vQ2nX.png\" alt=\"IntelliJ IDEA with the message &quot;This advice advices no methods&quot;\" /></a></p>\n<p><a href=\"https://stackoverflow.com/questions/42435691/can-intellij-show-warning-if-advice-advices-no-method\">This questions</a> asks a whole nother thing. I have no clue why it was suggested as a potential duplicate</p>\n"},{"tags":["java","dynamic","open-telemetry","otel"],"answers":[{"tags":[],"owner":{"account_id":3053597,"reputation":580,"user_id":2587704,"accept_rate":50,"display_name":"JackB"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1691678506,"creation_date":1691678506,"answer_id":76876815,"question_id":76873681,"body_markdown":"You can disable the agent entirely with [OTEL_JAVAAGENT_ENABLED=false](https://opentelemetry.io/docs/instrumentation/java/automatic/agent-config/#disabling-the-agent-entirely).\r\n\r\nOr you can have the javaagent install instrumentation, but disable the OpenTelemetry SDK with [OTEL_SDK_DISABLED](https://github.com/open-telemetry/opentelemetry-java/tree/main/sdk-extensions/autoconfigure#disabling-opentelemetrysdk). \r\n\r\nOr you can suppress specific instrumentation with [OTEL_INSTRUMENTATION_[NAME]_ENABLED=false](https://opentelemetry.io/docs/instrumentation/java/automatic/agent-config/#suppressing-specific-agent-instrumentation).","title":"Java opentelemetry agent enable/disable at run time","body":"<p>You can disable the agent entirely with <a href=\"https://opentelemetry.io/docs/instrumentation/java/automatic/agent-config/#disabling-the-agent-entirely\" rel=\"nofollow noreferrer\">OTEL_JAVAAGENT_ENABLED=false</a>.</p>\n<p>Or you can have the javaagent install instrumentation, but disable the OpenTelemetry SDK with <a href=\"https://github.com/open-telemetry/opentelemetry-java/tree/main/sdk-extensions/autoconfigure#disabling-opentelemetrysdk\" rel=\"nofollow noreferrer\">OTEL_SDK_DISABLED</a>.</p>\n<p>Or you can suppress specific instrumentation with <a href=\"https://opentelemetry.io/docs/instrumentation/java/automatic/agent-config/#suppressing-specific-agent-instrumentation\" rel=\"nofollow noreferrer\">OTEL_INSTRUMENTATION_[NAME]_ENABLED=false</a>.</p>\n"}],"owner":{"account_id":18509115,"reputation":1,"user_id":13484770,"display_name":"Himanshu Gupta"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":223,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1691678506,"creation_date":1691654101,"question_id":76873681,"body_markdown":"what to enable and disable java auto instrumentation done using otel java agent at runtime to avoid redeployment of service in case of issues. Any idea on how we can do this?\r\n\r\nwe can also do this if we have some way to access and modify tracer used by otel agent.\r\n\r\nfound nothing on internet","title":"Java opentelemetry agent enable/disable at run time","body":"<p>what to enable and disable java auto instrumentation done using otel java agent at runtime to avoid redeployment of service in case of issues. Any idea on how we can do this?</p>\n<p>we can also do this if we have some way to access and modify tracer used by otel agent.</p>\n<p>found nothing on internet</p>\n"},{"tags":["java","list","set"],"comments":[{"owner":{"account_id":1322191,"reputation":11583,"user_id":1267768,"accept_rate":83,"display_name":"Matt"},"score":0,"creation_date":1343091464,"post_id":11621585,"comment_id":15391475,"body_markdown":"I&#39;m having a hard time seeing a use case as well.  Typically when you want to cache things, you need a key to retrieve what&#39;s being cached, hence why every cache implementation works with the Map interface (or something similar).","body":"I&#39;m having a hard time seeing a use case as well.  Typically when you want to cache things, you need a key to retrieve what&#39;s being cached, hence why every cache implementation works with the Map interface (or something similar)."},{"owner":{"account_id":271693,"reputation":7924,"user_id":562363,"accept_rate":59,"display_name":"Absurd-Mind"},"score":0,"creation_date":1343092901,"post_id":11621585,"comment_id":15391715,"body_markdown":"you can still iterate over the Set","body":"you can still iterate over the Set"},{"owner":{"account_id":1491019,"reputation":353,"user_id":1398099,"display_name":"Rabbyte"},"score":1,"creation_date":1345346816,"post_id":11621585,"comment_id":16046128,"body_markdown":"I&#39;m making an anti-repeat message plugin for a chatroom where users talk. I use a map to link the user to a list of messages that I check the new message against. I want to only store 5 messages in any one user&#39;s list(already completed), and have any stored messages that are over x units of time old expire.","body":"I&#39;m making an anti-repeat message plugin for a chatroom where users talk. I use a map to link the user to a list of messages that I check the new message against. I want to only store 5 messages in any one user&#39;s list(already completed), and have any stored messages that are over x units of time old expire."},{"owner":{"account_id":2374041,"reputation":943,"user_id":2077917,"accept_rate":25,"display_name":"Winster"},"score":0,"creation_date":1589448980,"post_id":11621585,"comment_id":109300728,"body_markdown":"Another use case is to get the number of requests received in a server in the past 1 hour","body":"Another use case is to get the number of requests received in a server in the past 1 hour"}],"answers":[{"tags":[],"owner":{"account_id":271693,"reputation":7924,"user_id":562363,"accept_rate":59,"display_name":"Absurd-Mind"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1343086130,"creation_date":1343085409,"answer_id":11621916,"question_id":11621585,"body_markdown":"Since the Java HashSet implementation uses internally a HashMap, it should be really easy to copy/modify the code so that it uses Guavas CacheBuilder.\r\n\r\n    public class HashSet&lt;E&gt;\r\n        extends AbstractSet&lt;E&gt;\r\n        implements Set&lt;E&gt;, Cloneable, java.io.Serializable\r\n    {\r\n        static final long serialVersionUID = -5024744406713321676L;\r\n    \r\n        private transient HashMap&lt;E,Object&gt; map;\r\n    ...\r\n\r\nIn other words, just implement your `SetWithExpiration` as a `CacheBuilder` map from key to key.  This will lose no more efficiency than the Java `HashSet` implementation loses by using an underlying `HashMap`.","title":"Java time expiring List/Set?","body":"<p>Since the Java HashSet implementation uses internally a HashMap, it should be really easy to copy/modify the code so that it uses Guavas CacheBuilder.</p>\n\n<pre><code>public class HashSet&lt;E&gt;\n    extends AbstractSet&lt;E&gt;\n    implements Set&lt;E&gt;, Cloneable, java.io.Serializable\n{\n    static final long serialVersionUID = -5024744406713321676L;\n\n    private transient HashMap&lt;E,Object&gt; map;\n...\n</code></pre>\n\n<p>In other words, just implement your <code>SetWithExpiration</code> as a <code>CacheBuilder</code> map from key to key.  This will lose no more efficiency than the Java <code>HashSet</code> implementation loses by using an underlying <code>HashMap</code>.</p>\n"},{"tags":[],"owner":{"account_id":2185113,"reputation":619,"user_id":1933678,"accept_rate":74,"display_name":"Paddy"},"down_vote_count":1,"up_vote_count":13,"is_accepted":false,"score":12,"last_activity_date":1428311889,"creation_date":1379277936,"answer_id":18817340,"question_id":11621585,"body_markdown":"To use `CacheBuilder` to get a time expired list, you could put your objects in the map as keys and some dummy object as values.","title":"Java time expiring List/Set?","body":"<p>To use <code>CacheBuilder</code> to get a time expired list, you could put your objects in the map as keys and some dummy object as values.</p>\n"},{"tags":[],"owner":{"account_id":3753631,"reputation":2325,"user_id":3120564,"accept_rate":80,"display_name":"Jaumzera"},"down_vote_count":1,"up_vote_count":4,"is_accepted":false,"score":3,"last_activity_date":1554327134,"creation_date":1554327134,"answer_id":55504620,"question_id":11621585,"body_markdown":"You could decorate a collection implementation to do that. Something like this: \r\n\r\n&lt;!-- language: java --&gt;\r\n    \r\n    public class ExpirableArrayList&lt;E&gt; extends ArrayList&lt;E&gt; {\r\n    \r\n        private final Date creation = new Date();\r\n    \r\n        private final long timeToLiveInMs;\r\n    \r\n        public ExpirableArrayList(long timeToLiveInMs, int initialCapacity) {\r\n            super(initialCapacity);\r\n            this.timeToLiveInMs = timeToLiveInMs;\r\n        }\r\n    \r\n        public ExpirableArrayList(long timeToLiveInMs) {\r\n            this.timeToLiveInMs = timeToLiveInMs;\r\n        }\r\n    \r\n        public ExpirableArrayList(long timeToLiveInMs, Collection&lt;? extends E&gt; c) {\r\n            super(c);\r\n            this.timeToLiveInMs = timeToLiveInMs;\r\n        }\r\n        \r\n        private void expire() {\r\n            if (System.currentTimeMillis() - creation.getTime() &gt; timeToLiveInMs) {\r\n                clear();\r\n            }\r\n        }\r\n    \r\n        @Override\r\n        public int size() {\r\n            expire();\r\n            return super.size();\r\n        }\r\n    \r\n        @Override\r\n        public boolean isEmpty() {\r\n            expire();\r\n            return super.isEmpty();\r\n        }\r\n    \r\n        @Override\r\n        public boolean contains(Object o) {\r\n            expire();\r\n            return super.contains(o);\r\n        }\r\n    \r\n        @Override\r\n        public Iterator&lt;E&gt; iterator() {\r\n            expire();\r\n            return super.iterator();\r\n        }\r\n    \r\n        @Override\r\n        public Object[] toArray() {\r\n            expire();\r\n            return super.toArray();\r\n        }\r\n    \r\n        @Override\r\n        public &lt;T&gt; T[] toArray(T[] a) {\r\n            expire();\r\n            return super.toArray(a);\r\n        }\r\n    \r\n        @Override\r\n        public boolean add(E e) {\r\n            expire();\r\n            return super.add(e);\r\n        }\r\n    \r\n        @Override\r\n        public boolean remove(Object o) {\r\n            expire();\r\n            return super.remove(o);\r\n        }\r\n    \r\n        @Override\r\n        public boolean containsAll(Collection&lt;?&gt; c) {\r\n            expire();\r\n            return super.contains(c);\r\n        }\r\n    \r\n        @Override\r\n        public boolean addAll(Collection&lt;? extends E&gt; c) {\r\n            expire();\r\n            return super.addAll(c);\r\n        }\r\n    \r\n        @Override\r\n        public boolean addAll(int index, Collection&lt;? extends E&gt; c) {\r\n            expire();\r\n            return super.addAll(index, c);\r\n        }\r\n    \r\n        @Override\r\n        public boolean removeAll(Collection&lt;?&gt; c) {\r\n            expire();\r\n            return super.removeAll(c);\r\n        }\r\n    \r\n        @Override\r\n        public boolean retainAll(Collection&lt;?&gt; c) {\r\n            expire();\r\n            return super.retainAll(c);\r\n        }\r\n        \r\n        @Override\r\n        public E get(int index) {\r\n            expire();\r\n            return super.get(index);\r\n        }\r\n    \r\n        @Override\r\n        public E set(int index, E element) {\r\n            expire();\r\n            return super.set(index, element);\r\n        }\r\n    \r\n        @Override\r\n        public E remove(int index) {\r\n            expire();\r\n            return super.remove(index);\r\n        }\r\n    \r\n        @Override\r\n        public int indexOf(Object o) {\r\n            expire();\r\n            return indexOf(o);\r\n        }\r\n    \r\n        @Override\r\n        public int lastIndexOf(Object o) {\r\n            expire();\r\n            return lastIndexOf(o);\r\n        }\r\n    \r\n        @Override\r\n        public ListIterator&lt;E&gt; listIterator() {\r\n            expire();\r\n            return listIterator();\r\n        }\r\n    \r\n        @Override\r\n        public ListIterator&lt;E&gt; listIterator(int index) {\r\n            expire();\r\n            return listIterator();\r\n        }\r\n    \r\n        @Override\r\n        public List&lt;E&gt; subList(int fromIndex, int toIndex) {\r\n            expire();\r\n            return subList(fromIndex, toIndex);\r\n        }\r\n    }\r\n    ","title":"Java time expiring List/Set?","body":"<p>You could decorate a collection implementation to do that. Something like this: </p>\n\n<pre class=\"lang-java prettyprint-override\"><code>public class ExpirableArrayList&lt;E&gt; extends ArrayList&lt;E&gt; {\n\n    private final Date creation = new Date();\n\n    private final long timeToLiveInMs;\n\n    public ExpirableArrayList(long timeToLiveInMs, int initialCapacity) {\n        super(initialCapacity);\n        this.timeToLiveInMs = timeToLiveInMs;\n    }\n\n    public ExpirableArrayList(long timeToLiveInMs) {\n        this.timeToLiveInMs = timeToLiveInMs;\n    }\n\n    public ExpirableArrayList(long timeToLiveInMs, Collection&lt;? extends E&gt; c) {\n        super(c);\n        this.timeToLiveInMs = timeToLiveInMs;\n    }\n\n    private void expire() {\n        if (System.currentTimeMillis() - creation.getTime() &gt; timeToLiveInMs) {\n            clear();\n        }\n    }\n\n    @Override\n    public int size() {\n        expire();\n        return super.size();\n    }\n\n    @Override\n    public boolean isEmpty() {\n        expire();\n        return super.isEmpty();\n    }\n\n    @Override\n    public boolean contains(Object o) {\n        expire();\n        return super.contains(o);\n    }\n\n    @Override\n    public Iterator&lt;E&gt; iterator() {\n        expire();\n        return super.iterator();\n    }\n\n    @Override\n    public Object[] toArray() {\n        expire();\n        return super.toArray();\n    }\n\n    @Override\n    public &lt;T&gt; T[] toArray(T[] a) {\n        expire();\n        return super.toArray(a);\n    }\n\n    @Override\n    public boolean add(E e) {\n        expire();\n        return super.add(e);\n    }\n\n    @Override\n    public boolean remove(Object o) {\n        expire();\n        return super.remove(o);\n    }\n\n    @Override\n    public boolean containsAll(Collection&lt;?&gt; c) {\n        expire();\n        return super.contains(c);\n    }\n\n    @Override\n    public boolean addAll(Collection&lt;? extends E&gt; c) {\n        expire();\n        return super.addAll(c);\n    }\n\n    @Override\n    public boolean addAll(int index, Collection&lt;? extends E&gt; c) {\n        expire();\n        return super.addAll(index, c);\n    }\n\n    @Override\n    public boolean removeAll(Collection&lt;?&gt; c) {\n        expire();\n        return super.removeAll(c);\n    }\n\n    @Override\n    public boolean retainAll(Collection&lt;?&gt; c) {\n        expire();\n        return super.retainAll(c);\n    }\n\n    @Override\n    public E get(int index) {\n        expire();\n        return super.get(index);\n    }\n\n    @Override\n    public E set(int index, E element) {\n        expire();\n        return super.set(index, element);\n    }\n\n    @Override\n    public E remove(int index) {\n        expire();\n        return super.remove(index);\n    }\n\n    @Override\n    public int indexOf(Object o) {\n        expire();\n        return indexOf(o);\n    }\n\n    @Override\n    public int lastIndexOf(Object o) {\n        expire();\n        return lastIndexOf(o);\n    }\n\n    @Override\n    public ListIterator&lt;E&gt; listIterator() {\n        expire();\n        return listIterator();\n    }\n\n    @Override\n    public ListIterator&lt;E&gt; listIterator(int index) {\n        expire();\n        return listIterator();\n    }\n\n    @Override\n    public List&lt;E&gt; subList(int fromIndex, int toIndex) {\n        expire();\n        return subList(fromIndex, toIndex);\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":1491019,"reputation":353,"user_id":1398099,"display_name":"Rabbyte"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":18349,"favorite_count":0,"down_vote_count":0,"up_vote_count":25,"answer_count":3,"score":25,"last_activity_date":1691678114,"creation_date":1343083392,"question_id":11621585,"body_markdown":"I&#39;ve been looking around for a Java list, set, or something similar that has entries expire after a given time period, but I have yet to find one. I&#39;ve found Guava&#39;s [`CacheBuilder`][1], which would be almost perfect for my use, but that it is a map rather than a List or Set. Is there already something out there like this, or will I have to make one if I want to use it?\r\n\r\n\r\n  [1]: https://guava.dev/releases/snapshot-jre/api/docs/com/google/common/cache/CacheBuilder.html","title":"Java time expiring List/Set?","body":"<p>I've been looking around for a Java list, set, or something similar that has entries expire after a given time period, but I have yet to find one. I've found Guava's <a href=\"https://guava.dev/releases/snapshot-jre/api/docs/com/google/common/cache/CacheBuilder.html\" rel=\"nofollow noreferrer\"><code>CacheBuilder</code></a>, which would be almost perfect for my use, but that it is a map rather than a List or Set. Is there already something out there like this, or will I have to make one if I want to use it?</p>\n"},{"tags":["java","spring","mocking","spring-test-mvc"],"comments":[{"owner":{"account_id":195331,"reputation":275398,"user_id":438154,"accept_rate":98,"display_name":"Sotirios Delimanolis"},"score":27,"creation_date":1377005586,"post_id":18336277,"comment_id":26914113,"body_markdown":"Just as advice, 400 status code shouldn&#39;t be returned for something like `&quot;Username already taken&quot;`. That should be more of a 409 Conflict.","body":"Just as advice, 400 status code shouldn&#39;t be returned for something like <code>&quot;Username already taken&quot;</code>. That should be more of a 409 Conflict."},{"owner":{"account_id":1320022,"reputation":23243,"user_id":1266040,"accept_rate":69,"display_name":"pbaranski"},"score":1,"creation_date":1377019304,"post_id":18336277,"comment_id":26922654,"body_markdown":"Thanx - the goal of this test is to specify such things.","body":"Thanx - the goal of this test is to specify such things."}],"answers":[{"tags":[],"owner":{"account_id":195331,"reputation":275398,"user_id":438154,"accept_rate":98,"display_name":"Sotirios Delimanolis"},"down_vote_count":4,"up_vote_count":532,"is_accepted":false,"score":528,"last_activity_date":1668698041,"creation_date":1377005783,"answer_id":18336481,"question_id":18336277,"body_markdown":"You can call [`andReturn()`][1] and use the returned [`MvcResult`][2] object to get the content as a `String`.\r\n\r\nSee below:\r\n\r\n    MvcResult result = mockMvc.perform(post(&quot;/api/users&quot;).header(&quot;Authorization&quot;, base64ForTestUser).contentType(MediaType.APPLICATION_JSON)\r\n                .content(&quot;{\\&quot;userName\\&quot;:\\&quot;testUserDetails\\&quot;,\\&quot;firstName\\&quot;:\\&quot;xxx\\&quot;,\\&quot;lastName\\&quot;:\\&quot;xxx\\&quot;,\\&quot;password\\&quot;:\\&quot;xxx\\&quot;}&quot;))\r\n                .andDo(MockMvcResultHandlers.print())\r\n                .andExpect(status().isBadRequest())\r\n                .andReturn();\r\n    \r\n    String content = result.getResponse().getContentAsString();\r\n    // do what you will \r\n\r\n\r\n  [1]: https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/test/web/servlet/ResultActions.html#andReturn()\r\n  [2]: https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/test/web/servlet/MvcResult.html","title":"How to check String in response body with mockMvc","body":"<p>You can call <a href=\"https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/test/web/servlet/ResultActions.html#andReturn()\" rel=\"noreferrer\"><code>andReturn()</code></a> and use the returned <a href=\"https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/test/web/servlet/MvcResult.html\" rel=\"noreferrer\"><code>MvcResult</code></a> object to get the content as a <code>String</code>.</p>\n<p>See below:</p>\n<pre><code>MvcResult result = mockMvc.perform(post(&quot;/api/users&quot;).header(&quot;Authorization&quot;, base64ForTestUser).contentType(MediaType.APPLICATION_JSON)\n            .content(&quot;{\\&quot;userName\\&quot;:\\&quot;testUserDetails\\&quot;,\\&quot;firstName\\&quot;:\\&quot;xxx\\&quot;,\\&quot;lastName\\&quot;:\\&quot;xxx\\&quot;,\\&quot;password\\&quot;:\\&quot;xxx\\&quot;}&quot;))\n            .andDo(MockMvcResultHandlers.print())\n            .andExpect(status().isBadRequest())\n            .andReturn();\n\nString content = result.getResponse().getContentAsString();\n// do what you will \n</code></pre>\n"},{"tags":[],"owner":{"account_id":1320022,"reputation":23243,"user_id":1266040,"accept_rate":69,"display_name":"pbaranski"},"down_vote_count":1,"up_vote_count":168,"is_accepted":true,"score":167,"last_activity_date":1377018823,"creation_date":1377018823,"answer_id":18341107,"question_id":18336277,"body_markdown":"@Sotirios Delimanolis answer do the job however I was looking for comparing strings within this mockMvc assertion\r\n\r\nSo here it is \r\n\r\n    .andExpect(content().string(&quot;\\&quot;Username already taken - please try with different username\\&quot;&quot;));\r\n\r\nOf course my assertion fail:\r\n\r\n    java.lang.AssertionError: Response content expected:\r\n    &lt;&quot;Username already taken - please try with different username&quot;&gt; but was:&lt;&quot;Something gone wrong&quot;&gt;\r\n\r\nbecause:\r\n\r\n      MockHttpServletResponse:\r\n                Body = &quot;Something gone wrong&quot;\r\n\r\nSo this is proof that it works!\r\n","title":"How to check String in response body with mockMvc","body":"<p>@Sotirios Delimanolis answer do the job however I was looking for comparing strings within this mockMvc assertion</p>\n\n<p>So here it is </p>\n\n<pre><code>.andExpect(content().string(\"\\\"Username already taken - please try with different username\\\"\"));\n</code></pre>\n\n<p>Of course my assertion fail:</p>\n\n<pre><code>java.lang.AssertionError: Response content expected:\n&lt;\"Username already taken - please try with different username\"&gt; but was:&lt;\"Something gone wrong\"&gt;\n</code></pre>\n\n<p>because:</p>\n\n<pre><code>  MockHttpServletResponse:\n            Body = \"Something gone wrong\"\n</code></pre>\n\n<p>So this is proof that it works!</p>\n"},{"tags":[],"owner":{"account_id":452783,"reputation":7609,"user_id":849402,"accept_rate":89,"display_name":"vertti"},"down_vote_count":0,"up_vote_count":91,"is_accepted":false,"score":91,"last_activity_date":1468971177,"creation_date":1433750559,"answer_id":30703950,"question_id":18336277,"body_markdown":"Spring MockMvc now has direct support for JSON. So you just say:\r\n\r\n    .andExpect(content().json(&quot;{&#39;message&#39;:&#39;ok&#39;}&quot;));\r\n\r\nand unlike string comparison, it will say something like &quot;missing field xyz&quot; or &quot;message Expected &#39;ok&#39; got &#39;nok&#39;.\r\n\r\nThis method was introduced in Spring 4.1.","title":"How to check String in response body with mockMvc","body":"<p>Spring MockMvc now has direct support for JSON. So you just say:</p>\n\n<pre><code>.andExpect(content().json(\"{'message':'ok'}\"));\n</code></pre>\n\n<p>and unlike string comparison, it will say something like \"missing field xyz\" or \"message Expected 'ok' got 'nok'.</p>\n\n<p>This method was introduced in Spring 4.1.</p>\n"},{"tags":[],"owner":{"account_id":5043431,"reputation":387,"user_id":4050148,"accept_rate":40,"display_name":"justAnotherGuy"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1464120480,"creation_date":1452305413,"answer_id":34688967,"question_id":18336277,"body_markdown":"    String body = mockMvc.perform(bla... bla).andReturn().getResolvedException().getMessage()\r\n\r\nThis should give you the body of the response. &quot;Username already taken&quot; in your case.","title":"How to check String in response body with mockMvc","body":"<pre><code>String body = mockMvc.perform(bla... bla).andReturn().getResolvedException().getMessage()\n</code></pre>\n\n<p>This should give you the body of the response. \"Username already taken\" in your case.</p>\n"},{"tags":[],"owner":{"account_id":253638,"reputation":3428,"user_id":532489,"accept_rate":71,"display_name":"Jeremy"},"down_vote_count":0,"up_vote_count":75,"is_accepted":false,"score":75,"last_activity_date":1454682958,"creation_date":1454682293,"answer_id":35226506,"question_id":18336277,"body_markdown":"Reading these answers, I can see a lot relating to Spring version 4.x, I am using version 3.2.0 for various reasons. So things like json support straight from the ```content()``` is not possible.\r\n\r\nI found that using ```MockMvcResultMatchers.jsonPath``` is really easy and works a treat. Here is an example testing a post method.\r\n\r\nThe bonus with this solution is that you&#39;re still matching on attributes, not relying on full json string comparisons.\r\n\r\n(Using ```org.springframework.test.web.servlet.result.MockMvcResultMatchers```)\r\n\r\n    String expectedData = &quot;some value&quot;;\r\n    mockMvc.perform(post(&quot;/endPoint&quot;)\r\n                    .contentType(MediaType.APPLICATION_JSON)\r\n                    .content(mockRequestBodyAsString.getBytes()))\r\n                    .andExpect(status().isOk())\r\n                    .andExpect(MockMvcResultMatchers.jsonPath(&quot;$.data&quot;).value(expectedData));\r\n\r\nThe request body was just a json string, which you can easily load from a real json mock data file if you wanted, but I didnt include that here as it would have deviated from the question.\r\n\r\nThe actual json returned would have looked like this:\r\n\r\n    {\r\n        &quot;data&quot;:&quot;some value&quot;\r\n    }\r\n\r\n","title":"How to check String in response body with mockMvc","body":"<p>Reading these answers, I can see a lot relating to Spring version 4.x, I am using version 3.2.0 for various reasons. So things like json support straight from the <code>content()</code> is not possible.</p>\n\n<p>I found that using <code>MockMvcResultMatchers.jsonPath</code> is really easy and works a treat. Here is an example testing a post method.</p>\n\n<p>The bonus with this solution is that you're still matching on attributes, not relying on full json string comparisons.</p>\n\n<p>(Using <code>org.springframework.test.web.servlet.result.MockMvcResultMatchers</code>)</p>\n\n<pre><code>String expectedData = \"some value\";\nmockMvc.perform(post(\"/endPoint\")\n                .contentType(MediaType.APPLICATION_JSON)\n                .content(mockRequestBodyAsString.getBytes()))\n                .andExpect(status().isOk())\n                .andExpect(MockMvcResultMatchers.jsonPath(\"$.data\").value(expectedData));\n</code></pre>\n\n<p>The request body was just a json string, which you can easily load from a real json mock data file if you wanted, but I didnt include that here as it would have deviated from the question.</p>\n\n<p>The actual json returned would have looked like this:</p>\n\n<pre><code>{\n    \"data\":\"some value\"\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":250258,"reputation":3515,"user_id":1399539,"accept_rate":91,"display_name":"Michael W"},"down_vote_count":0,"up_vote_count":31,"is_accepted":false,"score":31,"last_activity_date":1509841022,"creation_date":1509841022,"answer_id":47116960,"question_id":18336277,"body_markdown":"Spring security&#39;s `@WithMockUser` and hamcrest&#39;s `containsString` matcher makes for a simple and elegant solution:\r\n\r\n    @Test\r\n\t@WithMockUser(roles = &quot;USER&quot;)\r\n\tpublic void loginWithRoleUserThenExpectUserSpecificContent() throws Exception {\r\n\t\tmockMvc.perform(get(&quot;/index&quot;))\r\n\t\t\t\t.andExpect(status().isOk())\r\n\t\t\t\t.andExpect(content().string(containsString(&quot;This content is only shown to users.&quot;)));\r\n\t}\r\n\r\n\r\n[More examples on github][1]\r\n\r\n\r\n  [1]: https://github.com/MWhyte/spring-security-basic/blob/master/src/test/java/com/codenerve/spring/sec/ApplicationTests.java","title":"How to check String in response body with mockMvc","body":"<p>Spring security's <code>@WithMockUser</code> and hamcrest's <code>containsString</code> matcher makes for a simple and elegant solution:</p>\n\n<pre><code>@Test\n@WithMockUser(roles = \"USER\")\npublic void loginWithRoleUserThenExpectUserSpecificContent() throws Exception {\n    mockMvc.perform(get(\"/index\"))\n            .andExpect(status().isOk())\n            .andExpect(content().string(containsString(\"This content is only shown to users.\")));\n}\n</code></pre>\n\n<p><a href=\"https://github.com/MWhyte/spring-security-basic/blob/master/src/test/java/com/codenerve/spring/sec/ApplicationTests.java\" rel=\"noreferrer\">More examples on github</a></p>\n"},{"tags":[],"owner":{"account_id":3370433,"reputation":3392,"user_id":2829759,"accept_rate":39,"display_name":"user2829759"},"down_vote_count":0,"up_vote_count":48,"is_accepted":false,"score":48,"last_activity_date":1576847478,"creation_date":1518604055,"answer_id":48784872,"question_id":18336277,"body_markdown":"Taken from spring&#39;s [tutorial](https://spring.io/guides/tutorials/bookmarks/)\r\n\r\n```java\r\nmockMvc.perform(get(&quot;/&quot; + userName + &quot;/bookmarks/&quot; \r\n    + this.bookmarkList.get(0).getId()))\r\n    .andExpect(status().isOk())\r\n    .andExpect(content().contentType(contentType))\r\n    .andExpect(jsonPath(&quot;$.id&quot;, is(this.bookmarkList.get(0).getId().intValue())))\r\n    .andExpect(jsonPath(&quot;$.uri&quot;, is(&quot;http://bookmark.com/1/&quot; + userName)))\r\n    .andExpect(jsonPath(&quot;$.description&quot;, is(&quot;A description&quot;)));\r\n```\r\n`is` is available from `import static org.hamcrest.Matchers.*;`\r\n\r\n`jsonPath` is available from `import static org.springframework.test.web.servlet.result.MockMvcResultMatchers.jsonPath;`\r\n\r\nand `jsonPath` reference can be found [here](https://github.com/json-path/JsonPath)","title":"How to check String in response body with mockMvc","body":"<p>Taken from spring's <a href=\"https://spring.io/guides/tutorials/bookmarks/\" rel=\"noreferrer\">tutorial</a></p>\n\n<pre class=\"lang-java prettyprint-override\"><code>mockMvc.perform(get(\"/\" + userName + \"/bookmarks/\" \n    + this.bookmarkList.get(0).getId()))\n    .andExpect(status().isOk())\n    .andExpect(content().contentType(contentType))\n    .andExpect(jsonPath(\"$.id\", is(this.bookmarkList.get(0).getId().intValue())))\n    .andExpect(jsonPath(\"$.uri\", is(\"http://bookmark.com/1/\" + userName)))\n    .andExpect(jsonPath(\"$.description\", is(\"A description\")));\n</code></pre>\n\n<p><code>is</code> is available from <code>import static org.hamcrest.Matchers.*;</code></p>\n\n<p><code>jsonPath</code> is available from <code>import static org.springframework.test.web.servlet.result.MockMvcResultMatchers.jsonPath;</code></p>\n\n<p>and <code>jsonPath</code> reference can be found <a href=\"https://github.com/json-path/JsonPath\" rel=\"noreferrer\">here</a></p>\n"},{"tags":[],"owner":{"account_id":8341509,"reputation":131,"user_id":6266697,"display_name":"Ricardo Ribeiro"},"down_vote_count":0,"up_vote_count":12,"is_accepted":false,"score":12,"last_activity_date":1565117074,"creation_date":1565117074,"answer_id":57382212,"question_id":18336277,"body_markdown":"here a more elegant way\r\n\r\n    mockMvc.perform(post(&quot;/retrieve?page=1&amp;countReg=999999&quot;)\r\n                .header(&quot;Authorization&quot;, &quot;Bearer &quot; + validToken))\r\n                .andExpect(status().isOk())\r\n                .andExpect(content().string(containsString(&quot;regCount&quot;)));","title":"How to check String in response body with mockMvc","body":"<p>here a more elegant way</p>\n\n<pre><code>mockMvc.perform(post(\"/retrieve?page=1&amp;countReg=999999\")\n            .header(\"Authorization\", \"Bearer \" + validToken))\n            .andExpect(status().isOk())\n            .andExpect(content().string(containsString(\"regCount\")));\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1044212,"reputation":3002,"user_id":1049542,"accept_rate":36,"display_name":"Sergey Ponomarev"},"down_vote_count":0,"up_vote_count":9,"is_accepted":false,"score":9,"last_activity_date":1598756169,"creation_date":1565339560,"answer_id":57426258,"question_id":18336277,"body_markdown":"Here is an example how to parse JSON response and even how to send a request with a bean in JSON form:\r\n\r\n```\r\n  @Autowired\r\n  protected MockMvc mvc;\r\n\r\n  private static final ObjectMapper MAPPER = new ObjectMapper()\r\n    .configure(SerializationFeature.WRITE_DATES_AS_TIMESTAMPS, false)\r\n    .configure(DeserializationFeature.FAIL_ON_UNKNOWN_PROPERTIES, false)\r\n    .registerModule(new JavaTimeModule());\r\n\r\n  public static String requestBody(Object request) {\r\n    try {\r\n      return MAPPER.writeValueAsString(request);\r\n    } catch (JsonProcessingException e) {\r\n      throw new RuntimeException(e);\r\n    }\r\n  }\r\n\r\n  public static &lt;T&gt; T parseResponse(MvcResult result, Class&lt;T&gt; responseClass) {\r\n    try {\r\n      String contentAsString = result.getResponse().getContentAsString();\r\n      return MAPPER.readValue(contentAsString, responseClass);\r\n    } catch (IOException e) {\r\n      throw new RuntimeException(e);\r\n    }\r\n  }\r\n\r\n  @Test\r\n  public void testUpdate() {\r\n    Book book = new Book();\r\n    book.setTitle(&quot;1984&quot;);\r\n    book.setAuthor(&quot;Orwell&quot;);\r\n    MvcResult requestResult = mvc.perform(post(&quot;http://example.com/book/&quot;)\r\n      .contentType(MediaType.APPLICATION_JSON)\r\n      .content(requestBody(book)))\r\n      .andExpect(status().isOk())\r\n      .andReturn();\r\n    UpdateBookResponse updateBookResponse = parseResponse(requestResult, UpdateBookResponse.class);\r\n    assertEquals(&quot;1984&quot;, updateBookResponse.getTitle());\r\n    assertEquals(&quot;Orwell&quot;, updateBookResponse.getAuthor());\r\n  }\r\n```\r\n\r\nAs you can see here the `Book` is a request DTO and the `UpdateBookResponse` is a response object parsed from JSON. You may want to change the Jackson&#39;s `ObjectMapper` configuration.","title":"How to check String in response body with mockMvc","body":"<p>Here is an example how to parse JSON response and even how to send a request with a bean in JSON form:</p>\n<pre><code>  @Autowired\n  protected MockMvc mvc;\n\n  private static final ObjectMapper MAPPER = new ObjectMapper()\n    .configure(SerializationFeature.WRITE_DATES_AS_TIMESTAMPS, false)\n    .configure(DeserializationFeature.FAIL_ON_UNKNOWN_PROPERTIES, false)\n    .registerModule(new JavaTimeModule());\n\n  public static String requestBody(Object request) {\n    try {\n      return MAPPER.writeValueAsString(request);\n    } catch (JsonProcessingException e) {\n      throw new RuntimeException(e);\n    }\n  }\n\n  public static &lt;T&gt; T parseResponse(MvcResult result, Class&lt;T&gt; responseClass) {\n    try {\n      String contentAsString = result.getResponse().getContentAsString();\n      return MAPPER.readValue(contentAsString, responseClass);\n    } catch (IOException e) {\n      throw new RuntimeException(e);\n    }\n  }\n\n  @Test\n  public void testUpdate() {\n    Book book = new Book();\n    book.setTitle(&quot;1984&quot;);\n    book.setAuthor(&quot;Orwell&quot;);\n    MvcResult requestResult = mvc.perform(post(&quot;http://example.com/book/&quot;)\n      .contentType(MediaType.APPLICATION_JSON)\n      .content(requestBody(book)))\n      .andExpect(status().isOk())\n      .andReturn();\n    UpdateBookResponse updateBookResponse = parseResponse(requestResult, UpdateBookResponse.class);\n    assertEquals(&quot;1984&quot;, updateBookResponse.getTitle());\n    assertEquals(&quot;Orwell&quot;, updateBookResponse.getAuthor());\n  }\n</code></pre>\n<p>As you can see here the <code>Book</code> is a request DTO and the <code>UpdateBookResponse</code> is a response object parsed from JSON. You may want to change the Jackson's <code>ObjectMapper</code> configuration.</p>\n"},{"tags":[],"owner":{"account_id":4008309,"reputation":3678,"user_id":3302424,"accept_rate":70,"display_name":"Hari Krishna"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1599398173,"creation_date":1578472351,"answer_id":59642068,"question_id":18336277,"body_markdown":"You can use `getContentAsString` method to get the response data as string.\r\n\r\n        String payload = &quot;....&quot;;\r\n        String apiToTest = &quot;....&quot;;\r\n        \r\n        MvcResult mvcResult = mockMvc.\r\n        \t\t\tperform(post(apiToTest).\r\n        \t\t\tcontent(payload).\r\n        \t\t\tcontentType(MediaType.APPLICATION_JSON)).\r\n        \t\t\tandReturn();\r\n        \r\n        String responseData = mvcResult.getResponse().getContentAsString();\r\n\r\n\r\nYou can refer this [link][1] for test application.\r\n\r\n\r\n  [1]: https://self-learning-java-tutorial.blogspot.com/2019/10/spring-boot-write-unit-tests-for.html","title":"How to check String in response body with mockMvc","body":"<p>You can use <code>getContentAsString</code> method to get the response data as string.</p>\n<pre><code>    String payload = &quot;....&quot;;\n    String apiToTest = &quot;....&quot;;\n    \n    MvcResult mvcResult = mockMvc.\n                perform(post(apiToTest).\n                content(payload).\n                contentType(MediaType.APPLICATION_JSON)).\n                andReturn();\n    \n    String responseData = mvcResult.getResponse().getContentAsString();\n</code></pre>\n<p>You can refer this <a href=\"https://self-learning-java-tutorial.blogspot.com/2019/10/spring-boot-write-unit-tests-for.html\" rel=\"nofollow noreferrer\">link</a> for test application.</p>\n"},{"tags":[],"owner":{"account_id":1202806,"reputation":23213,"user_id":1173112,"accept_rate":89,"display_name":"Koray Tugay"},"down_vote_count":0,"up_vote_count":12,"is_accepted":false,"score":12,"last_activity_date":1599398327,"creation_date":1592174262,"answer_id":62379012,"question_id":18336277,"body_markdown":"One possible approach is to simply include `gson` dependency:\r\n\r\n```xml\r\n&lt;dependency&gt;\r\n    &lt;groupId&gt;com.google.code.gson&lt;/groupId&gt;\r\n    &lt;artifactId&gt;gson&lt;/artifactId&gt;\r\n&lt;/dependency&gt;\r\n```\r\n\r\nand parse the value to make your verifications:\r\n\r\n```java\r\n@RunWith(SpringRunner.class)\r\n@WebMvcTest(HelloController.class)\r\npublic class HelloControllerTest {\r\n\r\n    @Autowired\r\n    private MockMvc mockMvc;\r\n\r\n    @MockBean\r\n    private HelloService helloService;\r\n\r\n    @Before\r\n    public void before() {\r\n        Mockito.when(helloService.message()).thenReturn(&quot;hello world!&quot;);\r\n    }\r\n\r\n    @Test\r\n    public void testMessage() throws Exception {\r\n        MvcResult mvcResult = mockMvc.perform(MockMvcRequestBuilders.get(&quot;/&quot;))\r\n                .andExpect(status().isOk())\r\n                .andExpect(content().contentTypeCompatibleWith(MediaType.APPLICATION_JSON_VALUE))\r\n                .andReturn();\r\n\r\n        String responseBody = mvcResult.getResponse().getContentAsString();\r\n        ResponseDto responseDto\r\n                = new Gson().fromJson(responseBody, ResponseDto.class);\r\n        Assertions.assertThat(responseDto.message).isEqualTo(&quot;hello world!&quot;);\r\n    }\r\n}\r\n```","title":"How to check String in response body with mockMvc","body":"<p>One possible approach is to simply include <code>gson</code> dependency:</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;dependency&gt;\n    &lt;groupId&gt;com.google.code.gson&lt;/groupId&gt;\n    &lt;artifactId&gt;gson&lt;/artifactId&gt;\n&lt;/dependency&gt;\n</code></pre>\n<p>and parse the value to make your verifications:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@RunWith(SpringRunner.class)\n@WebMvcTest(HelloController.class)\npublic class HelloControllerTest {\n\n    @Autowired\n    private MockMvc mockMvc;\n\n    @MockBean\n    private HelloService helloService;\n\n    @Before\n    public void before() {\n        Mockito.when(helloService.message()).thenReturn(&quot;hello world!&quot;);\n    }\n\n    @Test\n    public void testMessage() throws Exception {\n        MvcResult mvcResult = mockMvc.perform(MockMvcRequestBuilders.get(&quot;/&quot;))\n                .andExpect(status().isOk())\n                .andExpect(content().contentTypeCompatibleWith(MediaType.APPLICATION_JSON_VALUE))\n                .andReturn();\n\n        String responseBody = mvcResult.getResponse().getContentAsString();\n        ResponseDto responseDto\n                = new Gson().fromJson(responseBody, ResponseDto.class);\n        Assertions.assertThat(responseDto.message).isEqualTo(&quot;hello world!&quot;);\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3481319,"reputation":876,"user_id":2913290,"accept_rate":50,"display_name":"Daniel Vilas-Boas"},"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1601339881,"creation_date":1601339881,"answer_id":64111350,"question_id":18336277,"body_markdown":"Another option is:\r\n\r\n    when:\r\n    \r\n    def response = mockMvc.perform(\r\n                get(&#39;/path/to/api&#39;)\r\n                .header(&quot;Content-Type&quot;, &quot;application/json&quot;))\r\n\r\n    then:\r\n    \r\n    response.andExpect(status().isOk())\r\n    response.andReturn().getResponse().getContentAsString() == &quot;what you expect&quot;","title":"How to check String in response body with mockMvc","body":"<p>Another option is:</p>\n<pre><code>when:\n\ndef response = mockMvc.perform(\n            get('/path/to/api')\n            .header(&quot;Content-Type&quot;, &quot;application/json&quot;))\n\nthen:\n\nresponse.andExpect(status().isOk())\nresponse.andReturn().getResponse().getContentAsString() == &quot;what you expect&quot;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":13936451,"reputation":71,"user_id":10063334,"display_name":"NXT Dev"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1653481099,"creation_date":1653481099,"answer_id":72377515,"question_id":18336277,"body_markdown":"Another example is:                                  \r\n\r\n`.andExpect(jsonPath(&quot;$&quot;).value(containsString(&quot;You have successfully deleted&quot;)));`\r\n\r\n\r\nThe body response:\r\n\r\n`Body = You have successfully deleted a [Object] with ID: 1`\r\n\r\n\r\n","title":"How to check String in response body with mockMvc","body":"<p>Another example is:</p>\n<p><code>.andExpect(jsonPath(&quot;$&quot;).value(containsString(&quot;You have successfully deleted&quot;)));</code></p>\n<p>The body response:</p>\n<p><code>Body = You have successfully deleted a [Object] with ID: 1</code></p>\n"},{"tags":[],"owner":{"account_id":11025680,"reputation":184,"user_id":8098669,"display_name":"neshant sharma"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1667062712,"creation_date":1667062712,"answer_id":74247170,"question_id":18336277,"body_markdown":"Here is a more production ready way of doing it where you if you may have big json responses then you do not have to clutter your test files with json strings, just load them from static Resources folder and assert them directly.\r\n\r\n```\r\n  @Test\r\n  @DisplayName(&quot;invalid fields&quot;)\r\n  void invalidfields() throws Exception {\r\n\r\n    String request = getResourceFileAsString(&quot;test-data/http-request/invalid-fields.json&quot;);\r\n    String response_file_path = &quot;test-data/http-response/error-messages/invalid-fields.json&quot;;\r\n    String expected_response = getResourceFileAsString(response_file_path);\r\n\r\n    mockMvc.perform(evaluateRulesOnData(TRACKING_ID.toString(), request))\r\n        .andExpect(status().isBadRequest())\r\n        .andExpect(content().json(expected_response));\r\n  }\r\n```\r\nhelper function to load test files from classpath\r\n\r\n```\r\n  public static String getResourceFileAsString(String fileName) throws IOException {\r\n    Resource resource = new ClassPathResource(fileName);\r\n    File file = resource.getFile();\r\n    return new String(Files.readAllBytes(file.toPath()));\r\n  }\r\n```\r\n\r\nThe expected response has an array with many elements in the list which are matched despite being in random order during each test run.\r\n\r\n","title":"How to check String in response body with mockMvc","body":"<p>Here is a more production ready way of doing it where you if you may have big json responses then you do not have to clutter your test files with json strings, just load them from static Resources folder and assert them directly.</p>\n<pre><code>  @Test\n  @DisplayName(&quot;invalid fields&quot;)\n  void invalidfields() throws Exception {\n\n    String request = getResourceFileAsString(&quot;test-data/http-request/invalid-fields.json&quot;);\n    String response_file_path = &quot;test-data/http-response/error-messages/invalid-fields.json&quot;;\n    String expected_response = getResourceFileAsString(response_file_path);\n\n    mockMvc.perform(evaluateRulesOnData(TRACKING_ID.toString(), request))\n        .andExpect(status().isBadRequest())\n        .andExpect(content().json(expected_response));\n  }\n</code></pre>\n<p>helper function to load test files from classpath</p>\n<pre><code>  public static String getResourceFileAsString(String fileName) throws IOException {\n    Resource resource = new ClassPathResource(fileName);\n    File file = resource.getFile();\n    return new String(Files.readAllBytes(file.toPath()));\n  }\n</code></pre>\n<p>The expected response has an array with many elements in the list which are matched despite being in random order during each test run.</p>\n"},{"tags":[],"owner":{"account_id":1622089,"reputation":17709,"user_id":1498427,"accept_rate":89,"display_name":"catch23"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691678006,"creation_date":1691678006,"answer_id":76876751,"question_id":18336277,"body_markdown":"If your response is JSON and it is not so small you could do like following.\r\n\r\nCreate utility class:\r\n\r\n```\r\n@UtilityClass\r\npublic class FileUtils {\r\n    public String readFromFile(String fileName) throws IOException {\r\n        String filePath = String.format(&quot;responses/%s&quot;, fileName);\r\n        File resource = new ClassPathResource(filePath).getFile();\r\n        byte[] byteArray = Files.readAllBytes(resource.toPath());\r\n        return new String(byteArray);\r\n    }\r\n}\r\n```\r\n\r\nAnd use it directly from your tests for example:\r\n\r\n```\r\n@Test\r\nvoid getAllDepartments() throws Exception {\r\n    mockMvc.perform(get(&quot;/v1/departments&quot;)\r\n                    .header(AUTHORIZATION_HEADER, generateToken())\r\n                    .contentType(MediaType.APPLICATION_JSON_VALUE))\r\n            .andDo(print())\r\n            .andExpect(status().isOk())\r\n            .andExpect(content().json(FileUtils.readFromFile(&quot;departments-response.json&quot;)));\r\n}\r\n```\r\n\r\nwhere `departments-response.json` is:\r\n\r\n```\r\n[\r\n  {\r\n    &quot;id&quot;: 1,\r\n    &quot;name&quot;: &quot;Gryffindor&quot;\r\n  },\r\n  {\r\n    &quot;id&quot;: 2,\r\n    &quot;name&quot;: &quot;Hufflepuff&quot;\r\n  }\r\n]\r\n```","title":"How to check String in response body with mockMvc","body":"<p>If your response is JSON and it is not so small you could do like following.</p>\n<p>Create utility class:</p>\n<pre><code>@UtilityClass\npublic class FileUtils {\n    public String readFromFile(String fileName) throws IOException {\n        String filePath = String.format(&quot;responses/%s&quot;, fileName);\n        File resource = new ClassPathResource(filePath).getFile();\n        byte[] byteArray = Files.readAllBytes(resource.toPath());\n        return new String(byteArray);\n    }\n}\n</code></pre>\n<p>And use it directly from your tests for example:</p>\n<pre><code>@Test\nvoid getAllDepartments() throws Exception {\n    mockMvc.perform(get(&quot;/v1/departments&quot;)\n                    .header(AUTHORIZATION_HEADER, generateToken())\n                    .contentType(MediaType.APPLICATION_JSON_VALUE))\n            .andDo(print())\n            .andExpect(status().isOk())\n            .andExpect(content().json(FileUtils.readFromFile(&quot;departments-response.json&quot;)));\n}\n</code></pre>\n<p>where <code>departments-response.json</code> is:</p>\n<pre><code>[\n  {\n    &quot;id&quot;: 1,\n    &quot;name&quot;: &quot;Gryffindor&quot;\n  },\n  {\n    &quot;id&quot;: 2,\n    &quot;name&quot;: &quot;Hufflepuff&quot;\n  }\n]\n</code></pre>\n"}],"owner":{"account_id":1320022,"reputation":23243,"user_id":1266040,"accept_rate":69,"display_name":"pbaranski"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":522947,"favorite_count":0,"down_vote_count":0,"up_vote_count":380,"accepted_answer_id":18341107,"answer_count":15,"score":380,"last_activity_date":1691678006,"creation_date":1377005117,"question_id":18336277,"body_markdown":"I have simple integration test \r\n\r\n```java\r\n@Test\r\npublic void shouldReturnErrorMessageToAdminWhenCreatingUserWithUsedUserName() throws Exception {\r\n    mockMvc.perform(post(&quot;/api/users&quot;).header(&quot;Authorization&quot;, base64ForTestUser).contentType(MediaType.APPLICATION_JSON)\r\n        .content(&quot;{\\&quot;userName\\&quot;:\\&quot;testUserDetails\\&quot;,\\&quot;firstName\\&quot;:\\&quot;xxx\\&quot;,\\&quot;lastName\\&quot;:\\&quot;xxx\\&quot;,\\&quot;password\\&quot;:\\&quot;xxx\\&quot;}&quot;))\r\n        .andDo(print())\r\n        .andExpect(status().isBadRequest())\r\n        .andExpect(?);\r\n}\r\n```\r\n\r\nIn last line I want to compare string received in response body to expected string\r\n\r\nAnd in response I get:\r\n\r\n    MockHttpServletResponse:\r\n              Status = 400\r\n       Error message = null\r\n             Headers = {Content-Type=[application/json]}\r\n        Content type = application/json\r\n                Body = &quot;Username already taken&quot;\r\n       Forwarded URL = null\r\n      Redirected URL = null\r\n\r\nTried some tricks with content(), body() but nothing worked.","title":"How to check String in response body with mockMvc","body":"<p>I have simple integration test </p>\n\n<pre class=\"lang-java prettyprint-override\"><code>@Test\npublic void shouldReturnErrorMessageToAdminWhenCreatingUserWithUsedUserName() throws Exception {\n    mockMvc.perform(post(\"/api/users\").header(\"Authorization\", base64ForTestUser).contentType(MediaType.APPLICATION_JSON)\n        .content(\"{\\\"userName\\\":\\\"testUserDetails\\\",\\\"firstName\\\":\\\"xxx\\\",\\\"lastName\\\":\\\"xxx\\\",\\\"password\\\":\\\"xxx\\\"}\"))\n        .andDo(print())\n        .andExpect(status().isBadRequest())\n        .andExpect(?);\n}\n</code></pre>\n\n<p>In last line I want to compare string received in response body to expected string</p>\n\n<p>And in response I get:</p>\n\n<pre><code>MockHttpServletResponse:\n          Status = 400\n   Error message = null\n         Headers = {Content-Type=[application/json]}\n    Content type = application/json\n            Body = \"Username already taken\"\n   Forwarded URL = null\n  Redirected URL = null\n</code></pre>\n\n<p>Tried some tricks with content(), body() but nothing worked.</p>\n"},{"tags":["java","layout","vaadin","vaadin-flow"],"answers":[{"tags":[],"owner":{"account_id":170090,"reputation":2858,"user_id":396573,"display_name":"Jouni"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1691676023,"creation_date":1691676023,"answer_id":76876455,"question_id":76876114,"body_markdown":"I think you’re missing explicit heights on the layout components. Try `setHeightFull()` on `layout`, `tableBox`, and `detailsBox`.","title":"Vaadin: How to implement horizontal layout with scrollable column?","body":"<p>I think you’re missing explicit heights on the layout components. Try <code>setHeightFull()</code> on <code>layout</code>, <code>tableBox</code>, and <code>detailsBox</code>.</p>\n"},{"tags":[],"owner":{"account_id":12039827,"reputation":348,"user_id":8817161,"display_name":"Maxim"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691677867,"creation_date":1691677867,"answer_id":76876727,"question_id":76876114,"body_markdown":"Ok, I got it. All Vaadin layout controls are basically flex containers. And this task isn&#39;t solvable with flex alone, but it can be solved with custom CSS, which I did following this snippet.\r\n\r\nhttps://stackoverflow.com/a/59550839/8817161","title":"Vaadin: How to implement horizontal layout with scrollable column?","body":"<p>Ok, I got it. All Vaadin layout controls are basically flex containers. And this task isn't solvable with flex alone, but it can be solved with custom CSS, which I did following this snippet.</p>\n<p><a href=\"https://stackoverflow.com/a/59550839/8817161\">https://stackoverflow.com/a/59550839/8817161</a></p>\n"}],"owner":{"account_id":12039827,"reputation":348,"user_id":8817161,"display_name":"Maxim"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":70,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1691677867,"creation_date":1691673546,"question_id":76876114,"body_markdown":"I want to implement a HorizontalLayout with the table content area on the left side and the accordion-based details column on the right. The content area should occupy the remaining page height (basically, `100vh - navbarHeight`) and it should not exceed that value.\r\n\r\nThe issue is in the details column, specifically with the accordion. Expanded panels can contain many rows, so I put the accordion inside a scroller, but it&#39;s not working. Instead of getting a scrollable accordion, it expands the root container and I get scrollable window instead.\r\n\r\n[![enter image description here][1]][1] \r\n\r\nSimplified code:\r\n\r\n```java\r\nvar grid = new Grid&lt;&gt;(Pojo.class, false);\r\n\r\nvar tableBox = new VerticalLayout(grid);\r\ntableBox.setHeightFull();\r\n\r\nvar accordion = new Accordion();\r\naccordion.setWidthFull();\r\n\r\nvar detailsBox = new Scroller(accordion);\r\ndetailsBox.setScrollDirection(Scroller.ScrollDirection.VERTICAL);\r\ndetailsBox.setWidth(&quot;450px&quot;);\r\n\r\nvar layout = new HorizontalLayout();\r\nlayout.add(tableBox);\r\nlayout.add(detailsBox);\r\nlayout.setFlexGrow(1, tableBox);\r\nlayout.setFlexGrow(0, detailsBox);\r\nlayout.setSizeFull();\r\n```\r\n\r\nI&#39;m using Vaadin 24.\r\n\r\n  [1]: https://i.stack.imgur.com/g4gNd.png","title":"Vaadin: How to implement horizontal layout with scrollable column?","body":"<p>I want to implement a HorizontalLayout with the table content area on the left side and the accordion-based details column on the right. The content area should occupy the remaining page height (basically, <code>100vh - navbarHeight</code>) and it should not exceed that value.</p>\n<p>The issue is in the details column, specifically with the accordion. Expanded panels can contain many rows, so I put the accordion inside a scroller, but it's not working. Instead of getting a scrollable accordion, it expands the root container and I get scrollable window instead.</p>\n<p><a href=\"https://i.stack.imgur.com/g4gNd.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/g4gNd.png\" alt=\"enter image description here\" /></a></p>\n<p>Simplified code:</p>\n<pre class=\"lang-java prettyprint-override\"><code>var grid = new Grid&lt;&gt;(Pojo.class, false);\n\nvar tableBox = new VerticalLayout(grid);\ntableBox.setHeightFull();\n\nvar accordion = new Accordion();\naccordion.setWidthFull();\n\nvar detailsBox = new Scroller(accordion);\ndetailsBox.setScrollDirection(Scroller.ScrollDirection.VERTICAL);\ndetailsBox.setWidth(&quot;450px&quot;);\n\nvar layout = new HorizontalLayout();\nlayout.add(tableBox);\nlayout.add(detailsBox);\nlayout.setFlexGrow(1, tableBox);\nlayout.setFlexGrow(0, detailsBox);\nlayout.setSizeFull();\n</code></pre>\n<p>I'm using Vaadin 24.</p>\n"},{"tags":["java","selenium-webdriver","selenium-chromedriver"],"comments":[{"owner":{"account_id":5404,"reputation":22089,"user_id":8681,"accept_rate":67,"display_name":"Jorn"},"score":1,"creation_date":1691677190,"post_id":76876562,"comment_id":135526177,"body_markdown":"Are you asking why the Selenium developers did it differently in Python and Java? We can&#39;t answer that. Ask them.","body":"Are you asking why the Selenium developers did it differently in Python and Java? We can&#39;t answer that. Ask them."},{"owner":{"account_id":28682652,"reputation":47,"user_id":21963506,"display_name":"Farhood Naqizadeh"},"score":0,"creation_date":1691677310,"post_id":76876562,"comment_id":135526208,"body_markdown":"nope I&#39;m looking for some way to do it in code like python. have you? The selenium is just an example","body":"nope I&#39;m looking for some way to do it in code like python. have you? The selenium is just an example"}],"answers":[{"tags":[],"owner":{"account_id":10299692,"reputation":5719,"user_id":7598774,"accept_rate":75,"display_name":"Shawn"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1691677690,"creation_date":1691677577,"answer_id":76876678,"question_id":76876562,"body_markdown":"Your understand is incorrect, so is ChatGPT&#39;s answer. \r\n\r\nWith selenium `v4.6.0` and onwards (IRRESPECTIVE OF BINDING LANGUAGE, BE IT JAVA, PYTHON, C# etc.), setting up the `driver.exe` is not mandatory. Selenium&#39;s inbuilt tool known as [Selenium Manager](https://www.selenium.dev/blog/2022/introducing-selenium-manager/) will handle/download the drivers programmatically. \r\n\r\nJust like your Python code, Java code also can be as simple as:\r\n````\r\nWebDriver driver = new ChromeDriver();\r\ndriver.get(&quot;https://www.google.com&quot;);\r\n````\r\n\r\nBelow line is not mandatory anymore, if you specify, it will take `driver.exe` from the provided path, else Selenium will download and use it internally.\r\n````\r\nSystem.setProperty(&quot;webdriver.chrome.driver&quot;, &quot;C:\\\\path\\\\to\\\\chromedriver.exe&quot;);\r\n````","title":"Why a python library can download needed modules but java can&#39;t?","body":"<p>Your understand is incorrect, so is ChatGPT's answer.</p>\n<p>With selenium <code>v4.6.0</code> and onwards (IRRESPECTIVE OF BINDING LANGUAGE, BE IT JAVA, PYTHON, C# etc.), setting up the <code>driver.exe</code> is not mandatory. Selenium's inbuilt tool known as <a href=\"https://www.selenium.dev/blog/2022/introducing-selenium-manager/\" rel=\"nofollow noreferrer\">Selenium Manager</a> will handle/download the drivers programmatically.</p>\n<p>Just like your Python code, Java code also can be as simple as:</p>\n<pre><code>WebDriver driver = new ChromeDriver();\ndriver.get(&quot;https://www.google.com&quot;);\n</code></pre>\n<p>Below line is not mandatory anymore, if you specify, it will take <code>driver.exe</code> from the provided path, else Selenium will download and use it internally.</p>\n<pre><code>System.setProperty(&quot;webdriver.chrome.driver&quot;, &quot;C:\\\\path\\\\to\\\\chromedriver.exe&quot;);\n</code></pre>\n"}],"owner":{"account_id":28682652,"reputation":47,"user_id":21963506,"display_name":"Farhood Naqizadeh"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":60,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"closed_date":1691680402,"answer_count":1,"score":-1,"last_activity_date":1691677690,"creation_date":1691676826,"question_id":76876562,"body_markdown":"In some libraries like selenium we can download necessary library or module from code like download Chrome driver or Firefox driver in easy way, but in java code we don&#39;t.\r\n\r\nWe need to download manually and add to the path in project or system environment and after that use it in code providing a path for the library or execute environment.\r\n\r\nJava code example:\r\n```\r\nSystem.setProperty(&quot;webdriver.chrome.driver&quot;, &quot;C:\\\\path\\\\to\\\\chromedriver.exe&quot;);\r\nChromeOptions options = new ChromeOptions();\r\noptions.addArguments(&quot;start-maximized&quot;); // open Browser in maximized mode\r\noptions.addArguments(&quot;disable-infobars&quot;); // disabling infobars\r\noptions.addArguments(&quot;--disable-extensions&quot;); // disabling extensions\r\noptions.addArguments(&quot;--disable-gpu&quot;); // applicable to windows os only\r\noptions.addArguments(&quot;--disable-dev-shm-usage&quot;); // overcome limited resource problems\r\noptions.addArguments(&quot;--no-sandbox&quot;); // Bypass OS security model\r\nWebDriver driver = new ChromeDriver(options);\r\ndriver.get(&quot;https://google.com&quot;);\r\n```\r\n\r\nPython code example:\r\n\r\n```\r\nfrom selenium import webdriver\r\nfrom selenium.webdriver.chrome.options import Options\r\nchrome_options = Options()\r\nchrome_options.add_argument(&quot;--disable-extensions&quot;)\r\ndriver = webdriver.Chrome(chrome_options=chrome_options)\r\n```\r\n\r\nas you see the driver can download from python but java need to downloaded and placed somewhere in environment and than use it in code.\r\n\r\nAm I wrong or misunderstanding?\r\n\r\nchat gpt answer:\r\n\r\n&gt;You are correct in your understanding. In Java, when using libraries like Selenium, you typically need to manually download the necessary driver executable (e.g., ChromeDriver or GeckoDriver for Firefox) and specify its location in your code or system environment.\r\n&gt;\r\n&gt;Unlike Python, where you can easily install and manage drivers through package managers like pip, Java requires a manual approach for managing the driver executables.\r\n&gt;\r\n&gt;In your Java code example, you can see that you need to set the system property &quot;webdriver.chrome.driver&quot; to the location of the downloaded ChromeDriver executable. This tells the Selenium library where to find the driver on your system.\r\n&gt;\r\n&gt;Once you have downloaded the appropriate driver executable and provided the correct path, you can create an instance of the driver (e.g., ChromeDriver) and configure any desired options before using it to interact with web pages.\r\n&gt;\r\n&gt;Although the process may seem more involved in Java compared to Python, it allows for greater flexibility in managing different versions of the driver and ensuring compatibility with your browser.\r\n&gt;\r\n&gt;In summary, your understanding is correct. Java requires manual downloading and placement of the driver executable, while Python provides a more streamlined approach for downloading and managing drivers through package managers.\r\n","title":"Why a python library can download needed modules but java can&#39;t?","body":"<p>In some libraries like selenium we can download necessary library or module from code like download Chrome driver or Firefox driver in easy way, but in java code we don't.</p>\n<p>We need to download manually and add to the path in project or system environment and after that use it in code providing a path for the library or execute environment.</p>\n<p>Java code example:</p>\n<pre><code>System.setProperty(&quot;webdriver.chrome.driver&quot;, &quot;C:\\\\path\\\\to\\\\chromedriver.exe&quot;);\nChromeOptions options = new ChromeOptions();\noptions.addArguments(&quot;start-maximized&quot;); // open Browser in maximized mode\noptions.addArguments(&quot;disable-infobars&quot;); // disabling infobars\noptions.addArguments(&quot;--disable-extensions&quot;); // disabling extensions\noptions.addArguments(&quot;--disable-gpu&quot;); // applicable to windows os only\noptions.addArguments(&quot;--disable-dev-shm-usage&quot;); // overcome limited resource problems\noptions.addArguments(&quot;--no-sandbox&quot;); // Bypass OS security model\nWebDriver driver = new ChromeDriver(options);\ndriver.get(&quot;https://google.com&quot;);\n</code></pre>\n<p>Python code example:</p>\n<pre><code>from selenium import webdriver\nfrom selenium.webdriver.chrome.options import Options\nchrome_options = Options()\nchrome_options.add_argument(&quot;--disable-extensions&quot;)\ndriver = webdriver.Chrome(chrome_options=chrome_options)\n</code></pre>\n<p>as you see the driver can download from python but java need to downloaded and placed somewhere in environment and than use it in code.</p>\n<p>Am I wrong or misunderstanding?</p>\n<p>chat gpt answer:</p>\n<blockquote>\n<p>You are correct in your understanding. In Java, when using libraries like Selenium, you typically need to manually download the necessary driver executable (e.g., ChromeDriver or GeckoDriver for Firefox) and specify its location in your code or system environment.</p>\n<p>Unlike Python, where you can easily install and manage drivers through package managers like pip, Java requires a manual approach for managing the driver executables.</p>\n<p>In your Java code example, you can see that you need to set the system property &quot;webdriver.chrome.driver&quot; to the location of the downloaded ChromeDriver executable. This tells the Selenium library where to find the driver on your system.</p>\n<p>Once you have downloaded the appropriate driver executable and provided the correct path, you can create an instance of the driver (e.g., ChromeDriver) and configure any desired options before using it to interact with web pages.</p>\n<p>Although the process may seem more involved in Java compared to Python, it allows for greater flexibility in managing different versions of the driver and ensuring compatibility with your browser.</p>\n<p>In summary, your understanding is correct. Java requires manual downloading and placement of the driver executable, while Python provides a more streamlined approach for downloading and managing drivers through package managers.</p>\n</blockquote>\n"},{"tags":["java","android","kotlin","version"],"comments":[{"owner":{"account_id":2806090,"reputation":80148,"user_id":2413303,"accept_rate":100,"display_name":"EpicPandaForce"},"score":0,"creation_date":1691667941,"post_id":76875401,"comment_id":135524007,"body_markdown":"Yes, I have seen https://stackoverflow.com/questions/65139541/how-can-the-methods-makeconcat-and-makeconcatwithconstants-in-stringconcat and https://stackoverflow.com/questions/51430731/java-string-concatenationhow-come-this-is-giving-this-exception but it does not help.","body":"Yes, I have seen <a href=\"https://stackoverflow.com/questions/65139541/how-can-the-methods-makeconcat-and-makeconcatwithconstants-in-stringconcat\" title=\"how can the methods makeconcat and makeconcatwithconstants in stringconcat\">stackoverflow.com/questions/65139541/&hellip;</a> and <a href=\"https://stackoverflow.com/questions/51430731/java-string-concatenationhow-come-this-is-giving-this-exception\" title=\"java string concatenationhow come this is giving this exception\">stackoverflow.com/questions/51430731/&hellip;</a> but it does not help."},{"owner":{"account_id":7612423,"reputation":82486,"user_id":5772882,"display_name":"Anonymous"},"score":0,"creation_date":1691673431,"post_id":76875401,"comment_id":135525219,"body_markdown":"There’s a huge gap from Java 8 to Java 17. Try taking smaller steps. Also I’m curious what happens if you also increase source compatibility?","body":"There’s a huge gap from Java 8 to Java 17. Try taking smaller steps. Also I’m curious what happens if you also increase source compatibility?"},{"owner":{"account_id":2806090,"reputation":80148,"user_id":2413303,"accept_rate":100,"display_name":"EpicPandaForce"},"score":0,"creation_date":1691677305,"post_id":76875401,"comment_id":135526204,"body_markdown":"@OleV.V. setting Java 9 source compatibility + enabling core library desugaring fixed it.","body":"@OleV.V. setting Java 9 source compatibility + enabling core library desugaring fixed it."}],"answers":[{"tags":[],"owner":{"account_id":2806090,"reputation":80148,"user_id":2413303,"accept_rate":100,"display_name":"EpicPandaForce"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1691677287,"creation_date":1691677287,"answer_id":76876630,"question_id":76875401,"body_markdown":"Setting a higher source compatibility (`JavaVersion.VERSION_1_9`) allows for the code to compile. \r\n\r\nAfterwards, it is important to enable core library desugaring, as Android supports Java 8 from SDK 26, and Java 9+ only at higher API levels, so core library desugaring must be enabled.\r\n\r\nResult is:\r\n\r\n    compileOptions {\r\n        sourceCompatibility JavaVersion.VERSION_1_9\r\n        targetCompatibility JavaVersion.VERSION_17\r\n\r\n        coreLibraryDesugaringEnabled true\r\n    }\r\n    kotlinOptions {\r\n        jvmTarget = &quot;17&quot;\r\n        languageVersion = &#39;1.9&#39; \r\n    }\r\n\r\n    dependencies {\r\n        coreLibraryDesugaring &#39;com.android.tools:desugar_jdk_libs:2.0.3&#39;","title":"Java string concatenation operation fails with &quot;symbol not found: StringConcatFactory.makeConcatWithConstants&quot;","body":"<p>Setting a higher source compatibility (<code>JavaVersion.VERSION_1_9</code>) allows for the code to compile.</p>\n<p>Afterwards, it is important to enable core library desugaring, as Android supports Java 8 from SDK 26, and Java 9+ only at higher API levels, so core library desugaring must be enabled.</p>\n<p>Result is:</p>\n<pre><code>compileOptions {\n    sourceCompatibility JavaVersion.VERSION_1_9\n    targetCompatibility JavaVersion.VERSION_17\n\n    coreLibraryDesugaringEnabled true\n}\nkotlinOptions {\n    jvmTarget = &quot;17&quot;\n    languageVersion = '1.9' \n}\n\ndependencies {\n    coreLibraryDesugaring 'com.android.tools:desugar_jdk_libs:2.0.3'\n</code></pre>\n"}],"owner":{"account_id":2806090,"reputation":80148,"user_id":2413303,"accept_rate":100,"display_name":"EpicPandaForce"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":186,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":76876630,"answer_count":1,"score":1,"last_activity_date":1691677287,"creation_date":1691667659,"question_id":76875401,"body_markdown":"I have the following Java snippet:\r\n\r\n    public static DetailChecklistFormDescriptor.ChecklistItemRadioField.RadioOption getRadioOptionFromList(List items, int position) {\r\n        Object item = items.get(position);\r\n        if(item instanceof DetailChecklistFormDescriptor.ChecklistItemRadioField.RadioOption) {\r\n            return (DetailChecklistFormDescriptor.ChecklistItemRadioField.RadioOption) item;\r\n        } else if(item instanceof com.google.gson.internal.LinkedTreeMap) {\r\n            return new DetailChecklistFormDescriptor.ChecklistItemRadioField.RadioOption(\r\n                    (String) ((com.google.gson.internal.LinkedTreeMap) item).get(&quot;radioKey&quot;),\r\n                    (String) ((com.google.gson.internal.LinkedTreeMap) item).get(&quot;radioValue&quot;)\r\n            );\r\n        }\r\n        throw new IllegalArgumentException(&quot;Could not deserialize radio option from list&quot; + Arrays.toString(items.toArray())); // &lt;-- !!!\r\n    }\r\n\r\nSpecifically this line:\r\n\r\n    &quot;Could not deserialize radio option from list&quot; + Arrays.toString(items.toArray())\r\n\r\nI&#39;m in the process of upgrading Gradle to 8.2, Compose to 1.5.0, Kotlin to 1.9.0 (this feels like a possible culprit), Android Gradle Plugin to 8.1, and had to make updates to the Java/Kotlin JVM target.\r\n\r\n    compileOptions {\r\n        sourceCompatibility JavaVersion.VERSION_1_8\r\n        targetCompatibility JavaVersion.VERSION_17 // &lt;-- was 1.8\r\n    }\r\n    kotlinOptions {\r\n        jvmTarget = &quot;17&quot; // &lt;-- was 1.8\r\n        languageVersion = &#39;1.9&#39;\r\n    }\r\n\r\nNow I can obviously replace the code with\r\n\r\n\r\n        throw new IllegalArgumentException(new StringBuilder()\r\n            .append(&quot;Could not deserialize radio option from list&quot;)\r\n            .append(Arrays.toString(items.toArray()))\r\n            .toString());\r\n\r\nSame in other Java code that has String concatenation\r\n\r\n            throw new IllegalArgumentException(new StringBuilder()\r\n                .append(getClass())\r\n                .append(&quot; cannot deserialize to &quot;)\r\n                .append(typeOfT)\r\n                .toString());\r\n\r\nBut it seems somewhat eerie that ALL string concatenation operations **done in Java** with the `+` operator would suddenly just &quot;start failing&quot;.\r\n\r\nAny clues what needs to be configured in order to prevent this error?\r\n\r\n    error: cannot find symbol, \r\n\r\n    symbol: method makeConcatWithConstants(Lookup,String,MethodType,String), \r\n\r\n    location: interface StringConcatFactory","title":"Java string concatenation operation fails with &quot;symbol not found: StringConcatFactory.makeConcatWithConstants&quot;","body":"<p>I have the following Java snippet:</p>\n<pre><code>public static DetailChecklistFormDescriptor.ChecklistItemRadioField.RadioOption getRadioOptionFromList(List items, int position) {\n    Object item = items.get(position);\n    if(item instanceof DetailChecklistFormDescriptor.ChecklistItemRadioField.RadioOption) {\n        return (DetailChecklistFormDescriptor.ChecklistItemRadioField.RadioOption) item;\n    } else if(item instanceof com.google.gson.internal.LinkedTreeMap) {\n        return new DetailChecklistFormDescriptor.ChecklistItemRadioField.RadioOption(\n                (String) ((com.google.gson.internal.LinkedTreeMap) item).get(&quot;radioKey&quot;),\n                (String) ((com.google.gson.internal.LinkedTreeMap) item).get(&quot;radioValue&quot;)\n        );\n    }\n    throw new IllegalArgumentException(&quot;Could not deserialize radio option from list&quot; + Arrays.toString(items.toArray())); // &lt;-- !!!\n}\n</code></pre>\n<p>Specifically this line:</p>\n<pre><code>&quot;Could not deserialize radio option from list&quot; + Arrays.toString(items.toArray())\n</code></pre>\n<p>I'm in the process of upgrading Gradle to 8.2, Compose to 1.5.0, Kotlin to 1.9.0 (this feels like a possible culprit), Android Gradle Plugin to 8.1, and had to make updates to the Java/Kotlin JVM target.</p>\n<pre><code>compileOptions {\n    sourceCompatibility JavaVersion.VERSION_1_8\n    targetCompatibility JavaVersion.VERSION_17 // &lt;-- was 1.8\n}\nkotlinOptions {\n    jvmTarget = &quot;17&quot; // &lt;-- was 1.8\n    languageVersion = '1.9'\n}\n</code></pre>\n<p>Now I can obviously replace the code with</p>\n<pre><code>    throw new IllegalArgumentException(new StringBuilder()\n        .append(&quot;Could not deserialize radio option from list&quot;)\n        .append(Arrays.toString(items.toArray()))\n        .toString());\n</code></pre>\n<p>Same in other Java code that has String concatenation</p>\n<pre><code>        throw new IllegalArgumentException(new StringBuilder()\n            .append(getClass())\n            .append(&quot; cannot deserialize to &quot;)\n            .append(typeOfT)\n            .toString());\n</code></pre>\n<p>But it seems somewhat eerie that ALL string concatenation operations <strong>done in Java</strong> with the <code>+</code> operator would suddenly just &quot;start failing&quot;.</p>\n<p>Any clues what needs to be configured in order to prevent this error?</p>\n<pre><code>error: cannot find symbol, \n\nsymbol: method makeConcatWithConstants(Lookup,String,MethodType,String), \n\nlocation: interface StringConcatFactory\n</code></pre>\n"},{"tags":["java","spring","maven","spring-mvc","spring-boot"],"comments":[{"owner":{"account_id":3192259,"reputation":117599,"user_id":2696260,"display_name":"M. Deinum"},"score":2,"creation_date":1445762414,"post_id":33327678,"comment_id":54452593,"body_markdown":"A redirect is client side, so what you pass after the `redirect:` should lead to a valid URL not a view name... And stop mixing versions you are mixing Spring Boot 1.2.0 and 1.2.7. Change the parent to 1.2.7 and remove the versions elsewhere.","body":"A redirect is client side, so what you pass after the <code>redirect:</code> should lead to a valid URL not a view name... And stop mixing versions you are mixing Spring Boot 1.2.0 and 1.2.7. Change the parent to 1.2.7 and remove the versions elsewhere."},{"owner":{"account_id":2345503,"reputation":87,"user_id":2055876,"accept_rate":43,"display_name":"supreethmurthy"},"score":0,"creation_date":1445763940,"post_id":33327678,"comment_id":54452968,"body_markdown":"@M.Deinum: Thanks for bringing up the discrepancy in version numbers. I have corrected that. I changed the redirect to say ModelAndView mv = new ModelAndView(&quot;redirect:nextpage.html&quot;); and also moved the nextpage.html under the static folder in my project structure. It doesn&#39;t work. I also tried &quot;redirect:/nextpage.html&quot;. Both of them didn&#39;t work. I tried http://localhost:8080/nextpage.html and the content loads up fine.","body":"@M.Deinum: Thanks for bringing up the discrepancy in version numbers. I have corrected that. I changed the redirect to say ModelAndView mv = new ModelAndView(&quot;redirect:nextpage.html&quot;); and also moved the nextpage.html under the static folder in my project structure. It doesn&#39;t work. I also tried &quot;redirect:/nextpage.html&quot;. Both of them didn&#39;t work. I tried <a href=\"http://localhost:8080/nextpage.html\" rel=\"nofollow noreferrer\">localhost:8080/nextpage.html</a> and the content loads up fine."},{"owner":{"account_id":3192259,"reputation":117599,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1445772696,"post_id":33327678,"comment_id":54455231,"body_markdown":"You have both `@RestController` and `@Controller` which is it... Judging from your return types you need `@Controller` not `@RestController`. Also the `@EnableAutoConfiguration` is useless on this class.","body":"You have both <code>@RestController</code> and <code>@Controller</code> which is it... Judging from your return types you need <code>@Controller</code> not <code>@RestController</code>. Also the <code>@EnableAutoConfiguration</code> is useless on this class."}],"answers":[{"tags":[],"owner":{"account_id":104911,"reputation":119202,"user_id":280244,"accept_rate":81,"display_name":"Ralph"},"down_vote_count":1,"up_vote_count":3,"is_accepted":false,"score":2,"last_activity_date":1445767834,"creation_date":1445767834,"answer_id":33328490,"question_id":33327678,"body_markdown":"Try to use [RedirectView][1] explicite\r\n\r\n    @RequestMapping(value=&quot;/gotoNextPage&quot;,method = RequestMethod.GET)\r\n    public  ModelAndView gotoNextPage(HttpServletRequest request, HttpServletResponse response){\r\n        System.out.println(&quot;Inside gotoNextPage!!!!!!&quot;);\r\n    \r\n        ModelMap model = new ModelMap();\r\n        model.add(&quot;message&quot;, &quot;next page&quot;);\r\n        return new ModelAndView(\r\n           new RedirectView(&quot;/nextpage&quot;, true),\r\n           //or new RedirectView(&quot;/nextpage.html&quot;, true),\r\n           model\r\n        );\r\n    }\r\n\r\n\r\n  [1]: http://docs.spring.io/spring/docs/current/javadoc-api/org/springframework/web/servlet/view/RedirectView.html","title":"Springboot Controller redirect not working","body":"<p>Try to use <a href=\"http://docs.spring.io/spring/docs/current/javadoc-api/org/springframework/web/servlet/view/RedirectView.html\" rel=\"nofollow\">RedirectView</a> explicite</p>\n\n<pre><code>@RequestMapping(value=\"/gotoNextPage\",method = RequestMethod.GET)\npublic  ModelAndView gotoNextPage(HttpServletRequest request, HttpServletResponse response){\n    System.out.println(\"Inside gotoNextPage!!!!!!\");\n\n    ModelMap model = new ModelMap();\n    model.add(\"message\", \"next page\");\n    return new ModelAndView(\n       new RedirectView(\"/nextpage\", true),\n       //or new RedirectView(\"/nextpage.html\", true),\n       model\n    );\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":351196,"reputation":2555,"user_id":687515,"display_name":"daniel.eichten"},"down_vote_count":1,"up_vote_count":4,"is_accepted":true,"score":3,"last_activity_date":1445790910,"creation_date":1445790910,"answer_id":33332124,"question_id":33327678,"body_markdown":"I&#39;d try to simplify the method to use `Model` and return a simple `String`:\r\n\r\n    @RequestMapping(value=&quot;/gotoNextPage&quot;,method = RequestMethod.GET)\r\n    public String gotoNextPage(Model model){\r\n        LOG.debug(&quot;Inside gotoNextPage!!!!!!&quot;);\r\n        model.addAttribute(&quot;message&quot;, &quot;next page&quot;);\r\n        return &quot;redirect:nextpage.html&quot;;\r\n    }","title":"Springboot Controller redirect not working","body":"<p>I'd try to simplify the method to use <code>Model</code> and return a simple <code>String</code>:</p>\n\n<pre><code>@RequestMapping(value=\"/gotoNextPage\",method = RequestMethod.GET)\npublic String gotoNextPage(Model model){\n    LOG.debug(\"Inside gotoNextPage!!!!!!\");\n    model.addAttribute(\"message\", \"next page\");\n    return \"redirect:nextpage.html\";\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2345503,"reputation":87,"user_id":2055876,"accept_rate":43,"display_name":"supreethmurthy"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1445930713,"creation_date":1445930713,"answer_id":33362052,"question_id":33327678,"body_markdown":"The problem was making a call through xmlhttprequest object on the client end. I had to handle the completion of the event. I got rid of the $http.get call on the client and did a window.location.href instead. My controller redirects and the page loads automatically. ","title":"Springboot Controller redirect not working","body":"<p>The problem was making a call through xmlhttprequest object on the client end. I had to handle the completion of the event. I got rid of the $http.get call on the client and did a window.location.href instead. My controller redirects and the page loads automatically. </p>\n"},{"tags":[],"owner":{"account_id":7404936,"reputation":21,"user_id":5634099,"display_name":"hahugao"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1449137270,"creation_date":1449137270,"answer_id":34063041,"question_id":33327678,"body_markdown":"If you want to use &quot;redirect:&quot; with springboot,You must inject &quot;InternalResourceViewResolver&quot;.Although Spring Boot provides auto-configuration,if you use &quot;@EnableWebMvc&quot;,&quot;InternalResourceViewResolver&quot; will not inject.[look here](http://docs.spring.io/spring-boot/docs/current-SNAPSHOT/reference/htmlsingle/#boot-features-spring-mvc-auto-configuration)","title":"Springboot Controller redirect not working","body":"<p>If you want to use \"redirect:\" with springboot,You must inject \"InternalResourceViewResolver\".Although Spring Boot provides auto-configuration,if you use \"@EnableWebMvc\",\"InternalResourceViewResolver\" will not inject.<a href=\"http://docs.spring.io/spring-boot/docs/current-SNAPSHOT/reference/htmlsingle/#boot-features-spring-mvc-auto-configuration\" rel=\"nofollow\">look here</a></p>\n"},{"tags":[],"owner":{"account_id":6502239,"reputation":1558,"user_id":5032550,"accept_rate":67,"display_name":"Luis Cabrera Benito"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1566849795,"creation_date":1566849795,"answer_id":57664278,"question_id":33327678,"body_markdown":"If you are trying to redirect and it does not work, remember that you mustn&#39;t put the `@ResponseBody` annotation.\r\n\r\nSo, this **will not** work:\r\n\r\n    @PostMapping(value = &quot;/agregar&quot;)\r\n    @ResponseBody // Annotation here\r\n    public String guardarProducto() {\r\n        // magic here\r\n        return &quot;redirect:/productos/mostrar&quot;;\r\n    }\r\n\r\nBut this **will do** (remove the `@ResponseBody` Annotation):\r\n\r\n    @PostMapping(value = &quot;/agregar&quot;)\r\n    public String guardarProducto() {\r\n        // magic here\r\n        return &quot;redirect:/productos/mostrar&quot;;\r\n    }\r\n\r\nMore info about redirect in Spring Boot [here][1].\r\n\r\n\r\n  [1]: https://parzibyte.me/blog/en/2019/08/26/how-to-redirect-spring-boot/","title":"Springboot Controller redirect not working","body":"<p>If you are trying to redirect and it does not work, remember that you mustn't put the <code>@ResponseBody</code> annotation.</p>\n\n<p>So, this <strong>will not</strong> work:</p>\n\n<pre><code>@PostMapping(value = \"/agregar\")\n@ResponseBody // Annotation here\npublic String guardarProducto() {\n    // magic here\n    return \"redirect:/productos/mostrar\";\n}\n</code></pre>\n\n<p>But this <strong>will do</strong> (remove the <code>@ResponseBody</code> Annotation):</p>\n\n<pre><code>@PostMapping(value = \"/agregar\")\npublic String guardarProducto() {\n    // magic here\n    return \"redirect:/productos/mostrar\";\n}\n</code></pre>\n\n<p>More info about redirect in Spring Boot <a href=\"https://parzibyte.me/blog/en/2019/08/26/how-to-redirect-spring-boot/\" rel=\"nofollow noreferrer\">here</a>.</p>\n"}],"owner":{"account_id":2345503,"reputation":87,"user_id":2055876,"accept_rate":43,"display_name":"supreethmurthy"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":37999,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"accepted_answer_id":33332124,"answer_count":5,"score":3,"last_activity_date":1691677227,"creation_date":1445761858,"question_id":33327678,"body_markdown":"I am trying a quick prototype using Spring boot. \r\n\r\nI have the following Controller code minus the imports\r\n\r\n    @EnableAutoConfiguration\r\n    @RestController\r\n    @Controller\r\n    public class IndexController{\r\n        @RequestMapping(value = &quot;/&quot;)\r\n        public ModelAndView firstPage(HttpServletRequest request, HttpServletResponse response){\r\n            ModelAndView mv = new ModelAndView(&quot;index&quot;);\r\n            mv.addObject(&quot;message&quot;, Calendar.getInstance().getTime().toString());\r\n            return mv;\r\n        }\r\n        @RequestMapping(value=&quot;/gotoNextPage&quot;,method = RequestMethod.GET)\r\n        public  ModelAndView gotoNextPage(HttpServletRequest request, HttpServletResponse response){\r\n            System.out.println(&quot;Inside gotoNextPage!!!!!!&quot;);\r\n            ModelAndView mv = new ModelAndView(&quot;redirect:nextpage&quot;);\r\n            mv.addObject(&quot;message&quot;, &quot;next page&quot;);\r\n            return mv;\r\n        }\r\n    }\r\n\r\n**From my HTML, I invoke the /gotoNextPage and in my Server, I see the Inside gotoNextPage!!!! print statement. However, the nextPage doesn&#39;t load. If I don&#39;t use redirect and I type http://localhost:8080/gotoNextPage, the HTML content loads fine. Also, the index.html also loads fine** \r\n\r\nI am using spring boot mvc, thymeleaf, angularjs\r\n\r\nMy project structure is shown below:\r\n[enter image description here][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/qCcVP.png\r\n\r\n\r\nMy POM XML file dependencies are shown below:\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n    &lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot;\r\n             xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n             xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\r\n        &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n        &lt;groupId&gt;ng-spring-boot-helloworld&lt;/groupId&gt;\r\n        &lt;artifactId&gt;ng-spring-boot-helloworld&lt;/artifactId&gt;\r\n        &lt;version&gt;1.0.0&lt;/version&gt;\r\n    \r\n        &lt;parent&gt;\r\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\r\n            &lt;version&gt;1.2.0.RELEASE&lt;/version&gt;\r\n        &lt;/parent&gt;\r\n    \r\n        &lt;dependencyManagement&gt;\r\n            &lt;dependencies&gt;\r\n                &lt;dependency&gt;\r\n                    &lt;groupId&gt;org.hsqldb&lt;/groupId&gt;\r\n                    &lt;artifactId&gt;hsqldb&lt;/artifactId&gt;\r\n                    &lt;version&gt;2.3.2&lt;/version&gt;\r\n                &lt;/dependency&gt;\r\n                &lt;dependency&gt;\r\n                    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n                    &lt;artifactId&gt;spring-boot-starter-thymeleaf&lt;/artifactId&gt;\r\n                    &lt;version&gt;1.2.7.RELEASE&lt;/version&gt;\r\n                &lt;/dependency&gt;\r\n            &lt;/dependencies&gt;\r\n        &lt;/dependencyManagement&gt;\r\n    \r\n        &lt;build&gt;\r\n            &lt;plugins&gt;\r\n                &lt;plugin&gt;\r\n                    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n                    &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\r\n                &lt;/plugin&gt;\r\n            &lt;/plugins&gt;\r\n        &lt;/build&gt;\r\n    \r\n        &lt;dependencies&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n                &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\r\n            &lt;/dependency&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n                &lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;\r\n            &lt;/dependency&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n                &lt;artifactId&gt;spring-boot-starter-thymeleaf&lt;/artifactId&gt;\r\n            &lt;/dependency&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;org.hsqldb&lt;/groupId&gt;\r\n                &lt;artifactId&gt;hsqldb&lt;/artifactId&gt;\r\n                &lt;scope&gt;runtime&lt;/scope&gt;\r\n            &lt;/dependency&gt;\r\n        &lt;/dependencies&gt;\r\n    \r\n    &lt;/project&gt;\r\n\r\nPlease help.\r\n\r\nThanks in advance. ","title":"Springboot Controller redirect not working","body":"<p>I am trying a quick prototype using Spring boot. </p>\n\n<p>I have the following Controller code minus the imports</p>\n\n<pre><code>@EnableAutoConfiguration\n@RestController\n@Controller\npublic class IndexController{\n    @RequestMapping(value = \"/\")\n    public ModelAndView firstPage(HttpServletRequest request, HttpServletResponse response){\n        ModelAndView mv = new ModelAndView(\"index\");\n        mv.addObject(\"message\", Calendar.getInstance().getTime().toString());\n        return mv;\n    }\n    @RequestMapping(value=\"/gotoNextPage\",method = RequestMethod.GET)\n    public  ModelAndView gotoNextPage(HttpServletRequest request, HttpServletResponse response){\n        System.out.println(\"Inside gotoNextPage!!!!!!\");\n        ModelAndView mv = new ModelAndView(\"redirect:nextpage\");\n        mv.addObject(\"message\", \"next page\");\n        return mv;\n    }\n}\n</code></pre>\n\n<p><strong>From my HTML, I invoke the /gotoNextPage and in my Server, I see the Inside gotoNextPage!!!! print statement. However, the nextPage doesn't load. If I don't use redirect and I type <a href=\"http://localhost:8080/gotoNextPage\" rel=\"nofollow\">http://localhost:8080/gotoNextPage</a>, the HTML content loads fine. Also, the index.html also loads fine</strong> </p>\n\n<p>I am using spring boot mvc, thymeleaf, angularjs</p>\n\n<p>My project structure is shown below:\n<a href=\"https://i.stack.imgur.com/qCcVP.png\" rel=\"nofollow\">enter image description here</a></p>\n\n<p>My POM XML file dependencies are shown below:</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;project xmlns=\"http://maven.apache.org/POM/4.0.0\"\n         xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n         xsi:schemaLocation=\"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd\"&gt;\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n    &lt;groupId&gt;ng-spring-boot-helloworld&lt;/groupId&gt;\n    &lt;artifactId&gt;ng-spring-boot-helloworld&lt;/artifactId&gt;\n    &lt;version&gt;1.0.0&lt;/version&gt;\n\n    &lt;parent&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\n        &lt;version&gt;1.2.0.RELEASE&lt;/version&gt;\n    &lt;/parent&gt;\n\n    &lt;dependencyManagement&gt;\n        &lt;dependencies&gt;\n            &lt;dependency&gt;\n                &lt;groupId&gt;org.hsqldb&lt;/groupId&gt;\n                &lt;artifactId&gt;hsqldb&lt;/artifactId&gt;\n                &lt;version&gt;2.3.2&lt;/version&gt;\n            &lt;/dependency&gt;\n            &lt;dependency&gt;\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n                &lt;artifactId&gt;spring-boot-starter-thymeleaf&lt;/artifactId&gt;\n                &lt;version&gt;1.2.7.RELEASE&lt;/version&gt;\n            &lt;/dependency&gt;\n        &lt;/dependencies&gt;\n    &lt;/dependencyManagement&gt;\n\n    &lt;build&gt;\n        &lt;plugins&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n                &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\n            &lt;/plugin&gt;\n        &lt;/plugins&gt;\n    &lt;/build&gt;\n\n    &lt;dependencies&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-thymeleaf&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.hsqldb&lt;/groupId&gt;\n            &lt;artifactId&gt;hsqldb&lt;/artifactId&gt;\n            &lt;scope&gt;runtime&lt;/scope&gt;\n        &lt;/dependency&gt;\n    &lt;/dependencies&gt;\n\n&lt;/project&gt;\n</code></pre>\n\n<p>Please help.</p>\n\n<p>Thanks in advance. </p>\n"},{"tags":["java","android","android-studio","android-drawable"],"comments":[{"owner":{"account_id":2843880,"reputation":5219,"user_id":2442831,"display_name":"Lino"},"score":0,"creation_date":1691645770,"post_id":76872556,"comment_id":135520019,"body_markdown":"and what did you try?","body":"and what did you try?"},{"owner":{"account_id":14338249,"reputation":3000,"user_id":10357086,"display_name":"Dev4Life"},"score":1,"creation_date":1691646798,"post_id":76872556,"comment_id":135520118,"body_markdown":"Explain what solutions you have already tried.","body":"Explain what solutions you have already tried."},{"owner":{"account_id":8852920,"reputation":393,"user_id":6611534,"display_name":"khushbu vadi"},"score":0,"creation_date":1691668286,"post_id":76872556,"comment_id":135524084,"body_markdown":"@Lino  - didn&#39;t try anything. because not getting any idea to get this shape.","body":"@Lino  - didn&#39;t try anything. because not getting any idea to get this shape."},{"owner":{"account_id":8852920,"reputation":393,"user_id":6611534,"display_name":"khushbu vadi"},"score":0,"creation_date":1691668308,"post_id":76872556,"comment_id":135524086,"body_markdown":"@Dev4Life - didn&#39;t try anything. because not getting any idea to get this shape.","body":"@Dev4Life - didn&#39;t try anything. because not getting any idea to get this shape."},{"owner":{"account_id":14338249,"reputation":3000,"user_id":10357086,"display_name":"Dev4Life"},"score":0,"creation_date":1691725907,"post_id":76872556,"comment_id":135533372,"body_markdown":"You can start drawing custom shapes by learning how to draw basic custom views.","body":"You can start drawing custom shapes by learning how to draw basic custom views."}],"answers":[{"tags":[],"owner":{"account_id":22432165,"reputation":1234,"user_id":16637863,"display_name":"Pawan Harariya"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1691660899,"creation_date":1691660899,"answer_id":76874559,"question_id":76872556,"body_markdown":"Give this a try.\r\n```\r\n&lt;vector xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot; xmlns:aapt=&quot;http://schemas.android.com/aapt&quot;\r\n    android:viewportWidth=&quot;908&quot;\r\n    android:viewportHeight=&quot;804&quot;\r\n    android:width=&quot;200dp&quot;\r\n    android:height=&quot;200dp&quot;&gt;\r\n\r\n    &lt;path\r\n        android:pathData=&quot;M0 0L541 0.5Q526.3 9.8 516 23.5Q497.1 45.6 487 76.5L482 96.5L481 110.5L480 111.5L480 142.5L486 174.5L498 202.5Q513.7 229.3 536.5 249Q565 273.5 599.5 292L638.5 312L709.5 345L750.5 369Q797.8 399.2 835 439.5Q869 476 890 525.5L898 548.5L904 574.5L904 579.5L906 586.5L906 594.5L907 595.5L907 607.5L908 608.5L908 633.5L907 634.5L907 647.5L906 648.5L906 656.5L905 657.5L903 675.5L895 708.5Q878.7 761 854 804L0 804L0 0Z&quot;\r\n        android:fillColor=&quot;#ECD3F3&quot;\r\n        android:strokeColor=&quot;#ECD3F3&quot;\r\n        android:strokeWidth=&quot;1&quot; /&gt;\r\n&lt;/vector&gt;\r\n```","title":"Custom shape drawable in android programmatically","body":"<p>Give this a try.</p>\n<pre><code>&lt;vector xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot; xmlns:aapt=&quot;http://schemas.android.com/aapt&quot;\n    android:viewportWidth=&quot;908&quot;\n    android:viewportHeight=&quot;804&quot;\n    android:width=&quot;200dp&quot;\n    android:height=&quot;200dp&quot;&gt;\n\n    &lt;path\n        android:pathData=&quot;M0 0L541 0.5Q526.3 9.8 516 23.5Q497.1 45.6 487 76.5L482 96.5L481 110.5L480 111.5L480 142.5L486 174.5L498 202.5Q513.7 229.3 536.5 249Q565 273.5 599.5 292L638.5 312L709.5 345L750.5 369Q797.8 399.2 835 439.5Q869 476 890 525.5L898 548.5L904 574.5L904 579.5L906 586.5L906 594.5L907 595.5L907 607.5L908 608.5L908 633.5L907 634.5L907 647.5L906 648.5L906 656.5L905 657.5L903 675.5L895 708.5Q878.7 761 854 804L0 804L0 0Z&quot;\n        android:fillColor=&quot;#ECD3F3&quot;\n        android:strokeColor=&quot;#ECD3F3&quot;\n        android:strokeWidth=&quot;1&quot; /&gt;\n&lt;/vector&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":10989694,"reputation":11,"user_id":8074142,"display_name":"Enes Şahin"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1691677158,"creation_date":1691677103,"answer_id":76876599,"question_id":76872556,"body_markdown":"You can use this:\r\n\r\n    \r\n\r\n&lt;!-- begin snippet: js hide: false console: false babel: false --&gt;\r\n\r\n&lt;!-- language: lang-html --&gt;\r\n\r\n    &lt;vector xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\r\n        android:width=&quot;908dp&quot;\r\n        android:height=&quot;804dp&quot;\r\n        android:viewportWidth=&quot;908&quot;\r\n        android:viewportHeight=&quot;804&quot;&gt;\r\n        &lt;path\r\n          android:pathData=&quot;M0,0L541.08,0Q515.69,19.78 500.21,47.45Q488.31,68.72 483.35,93.11C482.95,95.1 482.81,97.62 482.35,99.8C478.68,117.24 479.43,137.46 482.18,155.02C497.37,252.38 606.34,296.43 683.44,332.29C797.61,385.4 904.17,478.44 908,614.56L908,627.31C905.67,690.02 884.34,749.83 853.69,804L0,804L0,0Z&quot;\r\n          android:fillColor=&quot;#ecd3f3&quot;/&gt;\r\n    &lt;/vector&gt;\r\n\r\n&lt;!-- end snippet --&gt;\r\n\r\n\r\nHow did I made it?\r\n\r\n 1. Downloaded your image\r\n 2. Uploaded [this][1] website\r\n 3. The website gave me vector format of your shape.\r\n 4. I added android studio as a vector asset (You can see below)\r\n\r\nImage 1: [Select This][2]\r\nImage 2: [Browse svg file][3]\r\n\r\n\r\n  [1]: https://vectorizer.ai\r\n  [2]: https://i.stack.imgur.com/pfcna.png\r\n  [3]: https://i.stack.imgur.com/aSlfV.png","title":"Custom shape drawable in android programmatically","body":"<p>You can use this:</p>\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"false\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>&lt;vector xmlns:android=\"http://schemas.android.com/apk/res/android\"\n    android:width=\"908dp\"\n    android:height=\"804dp\"\n    android:viewportWidth=\"908\"\n    android:viewportHeight=\"804\"&gt;\n    &lt;path\n      android:pathData=\"M0,0L541.08,0Q515.69,19.78 500.21,47.45Q488.31,68.72 483.35,93.11C482.95,95.1 482.81,97.62 482.35,99.8C478.68,117.24 479.43,137.46 482.18,155.02C497.37,252.38 606.34,296.43 683.44,332.29C797.61,385.4 904.17,478.44 908,614.56L908,627.31C905.67,690.02 884.34,749.83 853.69,804L0,804L0,0Z\"\n      android:fillColor=\"#ecd3f3\"/&gt;\n&lt;/vector&gt;</code></pre>\r\n</div>\r\n</div>\r\n</p>\n<p>How did I made it?</p>\n<ol>\n<li>Downloaded your image</li>\n<li>Uploaded <a href=\"https://vectorizer.ai\" rel=\"nofollow noreferrer\">this</a> website</li>\n<li>The website gave me vector format of your shape.</li>\n<li>I added android studio as a vector asset (You can see below)</li>\n</ol>\n<p>Image 1: <a href=\"https://i.stack.imgur.com/pfcna.png\" rel=\"nofollow noreferrer\">Select This</a>\nImage 2: <a href=\"https://i.stack.imgur.com/aSlfV.png\" rel=\"nofollow noreferrer\">Browse svg file</a></p>\n"}],"owner":{"account_id":8852920,"reputation":393,"user_id":6611534,"display_name":"khushbu vadi"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":53,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"closed_date":1691752617,"answer_count":2,"score":0,"last_activity_date":1691677158,"creation_date":1691639691,"question_id":76872556,"body_markdown":"I want to make this custom shape in drawable in android studio. How to make this shape?\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/11Hzy.png\r\n\r\n\r\n","title":"Custom shape drawable in android programmatically","body":"<p>I want to make this custom shape in drawable in android studio. How to make this shape?</p>\n<p><a href=\"https://i.stack.imgur.com/11Hzy.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/11Hzy.png\" alt=\"enter image description here\" /></a></p>\n"},{"tags":["java","oracle","ojdbc"],"answers":[{"tags":[],"owner":{"account_id":71739,"reputation":307142,"user_id":207421,"accept_rate":82,"display_name":"user207421"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1416440781,"creation_date":1416440781,"answer_id":27029238,"question_id":27029049,"body_markdown":"If you didn&#39;t get an exception, which you don&#39;t state one way or the other, you need to examine the return value of `executeUpdate()`, which is the number of affected rows. If it was zero, no rows were deleted, probably because nothing matched the `WHERE` clause. If it was non-zero, that many rows were deleted. You certainly shouldn&#39;t be printing `&quot;Record is deleted!&quot;` when nothing may have happened at all. Your program may be lying to the user.\r\n\r\nNB `insertTableSQL` is a stupid name for a variable containing an SQL `DELETE` statement.","title":"Java - JDBC executeUpdate() not working","body":"<p>If you didn't get an exception, which you don't state one way or the other, you need to examine the return value of <code>executeUpdate()</code>, which is the number of affected rows. If it was zero, no rows were deleted, probably because nothing matched the <code>WHERE</code> clause. If it was non-zero, that many rows were deleted. You certainly shouldn't be printing <code>\"Record is deleted!\"</code> when nothing may have happened at all. Your program may be lying to the user.</p>\n\n<p>NB <code>insertTableSQL</code> is a stupid name for a variable containing an SQL <code>DELETE</code> statement.</p>\n"},{"tags":[],"owner":{"account_id":1550701,"reputation":836,"user_id":2788531,"accept_rate":88,"display_name":"Adrian"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1416499582,"creation_date":1416499582,"answer_id":27044124,"question_id":27029049,"body_markdown":"**THIS IS NOT THE OFFICIAL ANSWER, BUT THE PROBLEM IS RESOLVED SOMEHOW**\r\n\r\nThere was Java update notification, and I followed it. After update, the status of JRE System Library(JavaSE - 1.7) is changed to **unbound**. I changed Execution environment to JavaSE - 1.6 (Oracle WebLogic Server 11gR1 (10.3.6) JRE), and the issue was resolved..weird..\r\n\r\nThere was no syntax problem \r\n\r\n    DELETE FROM mytable WHERE id = 6\r\n    DELETE mytable WHERE id = 6\r\n\r\nIf anyone can explain me how this issue could be resolved, your help would be much appreciated.\r\n\r\nFYI. \r\n\r\n    C:\\&gt;java -version\r\n    java version &quot;1.7.0_67&quot;\r\n    Java(TM) SE Runtime Environment (build 1.7.0_67-b01)\r\n    Java HotSpot(TM) Client VM (build 24.65-b04, mixed mode, sharing)\r\n","title":"Java - JDBC executeUpdate() not working","body":"<p><strong>THIS IS NOT THE OFFICIAL ANSWER, BUT THE PROBLEM IS RESOLVED SOMEHOW</strong></p>\n\n<p>There was Java update notification, and I followed it. After update, the status of JRE System Library(JavaSE - 1.7) is changed to <strong>unbound</strong>. I changed Execution environment to JavaSE - 1.6 (Oracle WebLogic Server 11gR1 (10.3.6) JRE), and the issue was resolved..weird..</p>\n\n<p>There was no syntax problem </p>\n\n<pre><code>DELETE FROM mytable WHERE id = 6\nDELETE mytable WHERE id = 6\n</code></pre>\n\n<p>If anyone can explain me how this issue could be resolved, your help would be much appreciated.</p>\n\n<p>FYI. </p>\n\n<pre><code>C:\\&gt;java -version\njava version \"1.7.0_67\"\nJava(TM) SE Runtime Environment (build 1.7.0_67-b01)\nJava HotSpot(TM) Client VM (build 24.65-b04, mixed mode, sharing)\n</code></pre>\n"},{"tags":[],"owner":{"account_id":10037608,"reputation":41,"user_id":7421630,"display_name":"Sushanth Bangera"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1514369065,"creation_date":1514292621,"answer_id":47978906,"question_id":27029049,"body_markdown":"Since its stuck it must be waiting for some resource which might be locked. \r\nI had faced this issue for simple update query. Here the update query was run on sql developer tool and the commit was not done. \r\n\r\nThanks to [a comment by Prabhmanmeet Singh on this link][1]\r\n\r\n\r\n  [1]: https://coderanch.com/t/304569/databases/executeUpdate-updating-exception-thrown","title":"Java - JDBC executeUpdate() not working","body":"<p>Since its stuck it must be waiting for some resource which might be locked. \nI had faced this issue for simple update query. Here the update query was run on sql developer tool and the commit was not done. </p>\n\n<p>Thanks to <a href=\"https://coderanch.com/t/304569/databases/executeUpdate-updating-exception-thrown\" rel=\"nofollow noreferrer\">a comment by Prabhmanmeet Singh on this link</a></p>\n"}],"owner":{"account_id":1550701,"reputation":836,"user_id":2788531,"accept_rate":88,"display_name":"Adrian"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":11192,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":27044124,"answer_count":3,"score":1,"last_activity_date":1691676855,"creation_date":1416439766,"question_id":27029049,"body_markdown":"I am trying to insert/update/delete a row using jdbc. Inserting is working, and I only changed the query string (or **insertTableSQL**) By debugging, I suspect that **executeUpdate()** is not terminated and console does not show me any error message. (JUST BLANK)\r\n\r\n**[EDIT]**&lt;br/&gt;\r\n**The program is stuck while executeUpate() is exeucting, meaning that I cannot even see the return value**\r\n\r\nInstead of using query string, I also tried **PreparedStatement** but no luck :(\r\n\r\n    String deleteRecordSQL = &quot;DELETE mytable WHERE id = ?&quot;;\r\n    PreparedStatement ps = dbConnection.prepareStatement(deleteRecordSQL);\r\n\tps.setInt(1, 6);\r\n\tps.executeUpdate();\r\n\r\nFull Code:\r\n\r\n    import java.sql.DriverManager;\r\n    import java.sql.Connection;\r\n    import java.sql.PreparedStatement;\r\n    import java.sql.SQLException;\r\n    import java.sql.Statement;\r\n \r\n    public class DeleteRow {\r\n \r\n\tprivate static final String DB_DRIVER = &quot;oracle.jdbc.driver.OracleDriver&quot;;\r\n\tprivate static final String DB_CONNECTION = &quot;&quot;;\r\n\tprivate static final String DB_USER = &quot;&quot;;\r\n\tprivate static final String DB_PASSWORD = &quot;&quot;;\r\n \r\n\tpublic static void main(String[] argv) {\r\n \r\n\t\ttry {\r\n \r\n\t\t\tdeleteRecordFromDbUserTable();\r\n \r\n\t\t} catch (SQLException e) {\r\n \r\n\t\t\tSystem.out.println(e.getMessage());\r\n \r\n\t\t}\r\n \r\n\t}\r\n \r\n\tprivate static void deleteRecordFromDbUserTable() throws SQLException {\r\n \r\n\t\tConnection dbConnection = null;\r\n\t\tStatement statement = null;\r\n \t\t\r\n\t\ttry {\r\n\t\t\tdbConnection = getDBConnection();\r\n\t\t\tstatement = dbConnection.createStatement();\r\n\t\t\tstatement.executeUpdate(&quot;DELETE mytable WHERE id = 6&quot;);\r\n \r\n\t\t\tSystem.out.println(&quot;Record is deleted!&quot;);\r\n\r\n \r\n\t\t} catch (SQLException e) {\r\n \r\n\t\t\tSystem.out.println(e.getMessage());\r\n \r\n\t\t} finally {\r\n \r\n\t\t\tif (statement != null) {\r\n\t\t\t\tstatement.close();\r\n\t\t\t}\r\n \r\n\t\t\tif (dbConnection != null) {\r\n\t\t\t\tdbConnection.close();\r\n\t\t\t}\r\n \r\n\t\t}\r\n \r\n\t}\r\n \r\n\tprivate static Connection getDBConnection() {\r\n \r\n\t\tConnection dbConnection = null;\r\n \r\n\t\ttry {\r\n \r\n\t\t\tClass.forName(DB_DRIVER);\r\n \r\n\t\t} catch (ClassNotFoundException e) {\r\n \r\n\t\t\tSystem.out.println(e.getMessage());\r\n \r\n\t\t}\r\n \r\n\t\ttry {\r\n \r\n\t\t\tdbConnection = DriverManager.getConnection(\r\n                               DB_CONNECTION, DB_USER,DB_PASSWORD);\r\n\t\t\treturn dbConnection;\r\n \r\n\t\t} catch (SQLException e) {\r\n \r\n\t\t\tSystem.out.println(e.getMessage());\r\n \r\n\t\t}\r\n \r\n\t\treturn dbConnection;\r\n \r\n\t}\r\n}\r\n\r\nAny help?","title":"Java - JDBC executeUpdate() not working","body":"<p>I am trying to insert/update/delete a row using jdbc. Inserting is working, and I only changed the query string (or <strong>insertTableSQL</strong>) By debugging, I suspect that <strong>executeUpdate()</strong> is not terminated and console does not show me any error message. (JUST BLANK)</p>\n\n<p><strong>[EDIT]</strong><br/>\n<strong>The program is stuck while executeUpate() is exeucting, meaning that I cannot even see the return value</strong></p>\n\n<p>Instead of using query string, I also tried <strong>PreparedStatement</strong> but no luck :(</p>\n\n<pre><code>String deleteRecordSQL = \"DELETE mytable WHERE id = ?\";\nPreparedStatement ps = dbConnection.prepareStatement(deleteRecordSQL);\nps.setInt(1, 6);\nps.executeUpdate();\n</code></pre>\n\n<p>Full Code:</p>\n\n<pre><code>import java.sql.DriverManager;\nimport java.sql.Connection;\nimport java.sql.PreparedStatement;\nimport java.sql.SQLException;\nimport java.sql.Statement;\n\npublic class DeleteRow {\n\nprivate static final String DB_DRIVER = \"oracle.jdbc.driver.OracleDriver\";\nprivate static final String DB_CONNECTION = \"\";\nprivate static final String DB_USER = \"\";\nprivate static final String DB_PASSWORD = \"\";\n\npublic static void main(String[] argv) {\n\n    try {\n\n        deleteRecordFromDbUserTable();\n\n    } catch (SQLException e) {\n\n        System.out.println(e.getMessage());\n\n    }\n\n}\n\nprivate static void deleteRecordFromDbUserTable() throws SQLException {\n\n    Connection dbConnection = null;\n    Statement statement = null;\n\n    try {\n        dbConnection = getDBConnection();\n        statement = dbConnection.createStatement();\n        statement.executeUpdate(\"DELETE mytable WHERE id = 6\");\n\n        System.out.println(\"Record is deleted!\");\n\n\n    } catch (SQLException e) {\n\n        System.out.println(e.getMessage());\n\n    } finally {\n\n        if (statement != null) {\n            statement.close();\n        }\n\n        if (dbConnection != null) {\n            dbConnection.close();\n        }\n\n    }\n\n}\n\nprivate static Connection getDBConnection() {\n\n    Connection dbConnection = null;\n\n    try {\n\n        Class.forName(DB_DRIVER);\n\n    } catch (ClassNotFoundException e) {\n\n        System.out.println(e.getMessage());\n\n    }\n\n    try {\n\n        dbConnection = DriverManager.getConnection(\n                           DB_CONNECTION, DB_USER,DB_PASSWORD);\n        return dbConnection;\n\n    } catch (SQLException e) {\n\n        System.out.println(e.getMessage());\n\n    }\n\n    return dbConnection;\n\n}\n</code></pre>\n\n<p>}</p>\n\n<p>Any help?</p>\n"},{"tags":["java","spring","spring-boot","spring-boot-cloud"],"comments":[{"owner":{"account_id":12908744,"reputation":3232,"user_id":9335205,"accept_rate":50,"display_name":"JGleason"},"score":0,"creation_date":1691521088,"post_id":76821109,"comment_id":135502150,"body_markdown":"So going theory is it deals with the ability to serialize the calls in some sort of order but still a theory.","body":"So going theory is it deals with the ability to serialize the calls in some sort of order but still a theory."},{"owner":{"account_id":1056871,"reputation":117729,"user_id":1059372,"accept_rate":97,"display_name":"Eugene"},"score":0,"creation_date":1699961894,"post_id":76821109,"comment_id":136593734,"body_markdown":"you are kind of comparing oranges and apples. `BootstrapRegistryInitializer` is used most of the time to register a bean that is needed in the _bootstrap_ part of your application. the easiest way to make a difference between these two is to read what `bootstrap.yaml` vs `application.yaml` is. Also note that bootstrap, in general, is deprecated, in favor of ConfigData API. `EnvironmentPostProcessor` is exactly that, to post process your Environment.","body":"you are kind of comparing oranges and apples. <code>BootstrapRegistryInitializer</code> is used most of the time to register a bean that is needed in the <i>bootstrap</i> part of your application. the easiest way to make a difference between these two is to read what <code>bootstrap.yaml</code> vs <code>application.yaml</code> is. Also note that bootstrap, in general, is deprecated, in favor of ConfigData API. <code>EnvironmentPostProcessor</code> is exactly that, to post process your Environment."}],"answers":[{"tags":[],"owner":{"account_id":22668541,"reputation":136,"user_id":16840542,"display_name":"Ishant Modi"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1691676677,"creation_date":1691676677,"answer_id":76876541,"question_id":76821109,"body_markdown":"Both BootstrapRegistryInitializer and EnvironmentPostProcessor are used for customizing the Spring Boot application&#39;s initialization process, but they serve slightly different purposes. Breaking  down their differences and appropriate use cases:\r\n\r\n**1. BootstrapRegistryInitializer:**\r\n\r\nThis interface is used to register additional configuration sources early in the Spring Boot application&#39;s startup process. It allows you to contribute to the Spring Bootstrap Context, which is a special context that exists before the main ApplicationContext is fully created. It&#39;s a mechanism that allows you to affect the application&#39;s configuration very early in the startup sequence.\r\n\r\n**Use Cases:**\r\n\r\nRegistering additional configuration sources or properties that should be available during application context creation.\r\nInfluencing the application context configuration at a very low level before other processing takes place.\r\nCustomizing the application&#39;s behavior based on conditions that need to be evaluated very early.\r\n\r\n**2.EnvironmentPostProcessor:**\r\n\r\nThis interface is used to customize the Spring Environment before the application context is created. The Environment holds properties, profiles, and other configuration details used by the application. This provides a way to modify these configuration details before they are used to create the main application context.\r\n\r\n**Use Cases:**\r\n\r\nModifying properties, profiles, or configuration settings based on external factors or conditions.\r\nDynamically adjusting configuration values that are needed during the application context creation.\r\nImplementing logic that should influence the application context based on specific environment characteristics.\r\n\r\nIn your provided examples, both BootstrapRegistryInitializer and EnvironmentPostProcessor can be used to achieve similar goals, but the key distinction is the point in the startup process at which they operate and the context they interact with.\r\n\r\nThere is no indication that either of these mechanisms is deprecated in favor of the other. The choice between them depends on the specific use case and the timing of customization required. If you need to affect the Bootstrap Context very early in the startup process, BootstrapRegistryInitializer is suitable. If you need to customize the Environment before the main application context is created, EnvironmentPostProcessor is the appropriate choice.\r\n\r\nChoose the one that aligns best with your requirements and the timing of your customization logic.","title":"What is the difference between BootstrapRegistryInitializer.initialize and EnvironmentPostProcessor.postProcessEnvironment","body":"<p>Both BootstrapRegistryInitializer and EnvironmentPostProcessor are used for customizing the Spring Boot application's initialization process, but they serve slightly different purposes. Breaking  down their differences and appropriate use cases:</p>\n<p><strong>1. BootstrapRegistryInitializer:</strong></p>\n<p>This interface is used to register additional configuration sources early in the Spring Boot application's startup process. It allows you to contribute to the Spring Bootstrap Context, which is a special context that exists before the main ApplicationContext is fully created. It's a mechanism that allows you to affect the application's configuration very early in the startup sequence.</p>\n<p><strong>Use Cases:</strong></p>\n<p>Registering additional configuration sources or properties that should be available during application context creation.\nInfluencing the application context configuration at a very low level before other processing takes place.\nCustomizing the application's behavior based on conditions that need to be evaluated very early.</p>\n<p><strong>2.EnvironmentPostProcessor:</strong></p>\n<p>This interface is used to customize the Spring Environment before the application context is created. The Environment holds properties, profiles, and other configuration details used by the application. This provides a way to modify these configuration details before they are used to create the main application context.</p>\n<p><strong>Use Cases:</strong></p>\n<p>Modifying properties, profiles, or configuration settings based on external factors or conditions.\nDynamically adjusting configuration values that are needed during the application context creation.\nImplementing logic that should influence the application context based on specific environment characteristics.</p>\n<p>In your provided examples, both BootstrapRegistryInitializer and EnvironmentPostProcessor can be used to achieve similar goals, but the key distinction is the point in the startup process at which they operate and the context they interact with.</p>\n<p>There is no indication that either of these mechanisms is deprecated in favor of the other. The choice between them depends on the specific use case and the timing of customization required. If you need to affect the Bootstrap Context very early in the startup process, BootstrapRegistryInitializer is suitable. If you need to customize the Environment before the main application context is created, EnvironmentPostProcessor is the appropriate choice.</p>\n<p>Choose the one that aligns best with your requirements and the timing of your customization logic.</p>\n"}],"owner":{"account_id":12908744,"reputation":3232,"user_id":9335205,"accept_rate":50,"display_name":"JGleason"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":196,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"accepted_answer_id":76876541,"answer_count":1,"score":0,"last_activity_date":1691676677,"creation_date":1690987874,"question_id":76821109,"body_markdown":"Looking to do some http calls to grab profile .yml files. I was looking into a couple interface implementations. One seems to be the `BootstrapRegistryInitializer.initialize` and looks like this...\r\n\r\n```java\r\npublic class Boostrap implements BootstrapRegistryInitializer {\r\n\r\n    @Override\r\n    public void initialize(BootstrapRegistry registry) {\r\n        registry.register(\r\n            BootstrapItem.class,\r\n            context -&gt; {\r\n                ... // Do something with the Bootstrap Context\r\n            }\r\n        );\r\n    }\r\n```\r\n\r\nthere is also the `void addCloseListener(ApplicationListener&lt;BootstrapContextClosedEvent&gt; listener);` event which allows access to both and says\r\n\r\n```\r\nAdd an ApplicationListener that will be called with a BootstrapContextClosedEvent when the BootstrapContext is closed and the ApplicationContext has been prepared.\r\n```\r\n\r\nThe other is `EnvironmentPostProcessor.postProcessEnvironment` and looks like this\r\n\r\n```java\r\n    private final ConfigurableBootstrapContext context;\r\n\r\n    public BootstrapPostProcessor(final ConfigurableBootstrapContext context) {\r\n        this.context = context;\r\n    }\r\n\r\n    @Override\r\n    public void postProcessEnvironment(final ConfigurableEnvironment environment, final SpringApplication application) {\r\n      ... // Do something with the Bootstrap Context\r\n    }\r\n}\r\n```\r\n\r\n**My question is they seem to be pretty similar in their interface so which one should I use in which scenarios? Is one deprecated in favor of the other pattern?**\r\n","title":"What is the difference between BootstrapRegistryInitializer.initialize and EnvironmentPostProcessor.postProcessEnvironment","body":"<p>Looking to do some http calls to grab profile .yml files. I was looking into a couple interface implementations. One seems to be the <code>BootstrapRegistryInitializer.initialize</code> and looks like this...</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class Boostrap implements BootstrapRegistryInitializer {\n\n    @Override\n    public void initialize(BootstrapRegistry registry) {\n        registry.register(\n            BootstrapItem.class,\n            context -&gt; {\n                ... // Do something with the Bootstrap Context\n            }\n        );\n    }\n</code></pre>\n<p>there is also the <code>void addCloseListener(ApplicationListener&lt;BootstrapContextClosedEvent&gt; listener);</code> event which allows access to both and says</p>\n<pre><code>Add an ApplicationListener that will be called with a BootstrapContextClosedEvent when the BootstrapContext is closed and the ApplicationContext has been prepared.\n</code></pre>\n<p>The other is <code>EnvironmentPostProcessor.postProcessEnvironment</code> and looks like this</p>\n<pre class=\"lang-java prettyprint-override\"><code>    private final ConfigurableBootstrapContext context;\n\n    public BootstrapPostProcessor(final ConfigurableBootstrapContext context) {\n        this.context = context;\n    }\n\n    @Override\n    public void postProcessEnvironment(final ConfigurableEnvironment environment, final SpringApplication application) {\n      ... // Do something with the Bootstrap Context\n    }\n}\n</code></pre>\n<p><strong>My question is they seem to be pretty similar in their interface so which one should I use in which scenarios? Is one deprecated in favor of the other pattern?</strong></p>\n"},{"tags":["java"],"answers":[{"tags":[],"owner":{"account_id":7302044,"reputation":148,"user_id":5564391,"accept_rate":100,"display_name":"Elio"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1468661176,"creation_date":1468661176,"answer_id":38409666,"question_id":38409638,"body_markdown":"A square is a rectangle, but a rectangle is not a square, the same goes here, an integer is a float but a float is not an integer, plus here 5.6 is considered as a double. 5.6f is a float. Use: \r\n\r\n    int i= (int)5.6\r\nTo convert the double to integer.\r\n\r\n    int i= 5.6f //still won&#39;t work, (use the &quot;(int)&quot;)","title":"lossy conversion from float to int.type checking in java","body":"<p>A square is a rectangle, but a rectangle is not a square, the same goes here, an integer is a float but a float is not an integer, plus here 5.6 is considered as a double. 5.6f is a float. Use: </p>\n\n<pre><code>int i= (int)5.6\n</code></pre>\n\n<p>To convert the double to integer.</p>\n\n<pre><code>int i= 5.6f //still won't work, (use the \"(int)\")\n</code></pre>\n"}],"owner":{"account_id":8670378,"reputation":53,"user_id":6489516,"accept_rate":33,"display_name":"vineeth"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":7599,"favorite_count":0,"down_vote_count":2,"up_vote_count":1,"answer_count":1,"score":-1,"last_activity_date":1691676651,"creation_date":1468660945,"question_id":38409638,"body_markdown":"Why does assigning `5.6` to an `int` produce the `Possible lossy conversion from double to int` error?\r\n\r\n    int i = 5.6;\r\n\r\n\r\n[screenshot of the error][1]\r\n   \r\n  [1]: https://i.stack.imgur.com/2cAvn.png","title":"lossy conversion from float to int.type checking in java","body":"<p>Why does assigning <code>5.6</code> to an <code>int</code> produce the <code>Possible lossy conversion from double to int</code> error?</p>\n<pre><code>int i = 5.6;\n</code></pre>\n<p><a href=\"https://i.stack.imgur.com/2cAvn.png\" rel=\"nofollow noreferrer\">screenshot of the error</a></p>\n"},{"tags":["java","database","spring-boot","hibernate","jpa"],"comments":[{"owner":{"account_id":231721,"reputation":20460,"user_id":496099,"display_name":"Chris"},"score":1,"creation_date":1691614583,"post_id":76859862,"comment_id":135517055,"body_markdown":"This is a hibernate issue where they switched behavior in https://github.com/hibernate/hibernate-orm/discussions/4361 to use OID instead of text on Postgres. You might try writing your own custom dialect to override that behavior change, or have it use TEXT without the Lob designation. Otherwise, there is no DB agnostic way to specify Text column type should be used within your entity - though you could define DB specific orm.xml files","body":"This is a hibernate issue where they switched behavior in <a href=\"https://github.com/hibernate/hibernate-orm/discussions/4361\" rel=\"nofollow noreferrer\">github.com/hibernate/hibernate-orm/discussions/4361</a> to use OID instead of text on Postgres. You might try writing your own custom dialect to override that behavior change, or have it use TEXT without the Lob designation. Otherwise, there is no DB agnostic way to specify Text column type should be used within your entity - though you could define DB specific orm.xml files"},{"owner":{"account_id":231721,"reputation":20460,"user_id":496099,"display_name":"Chris"},"score":0,"creation_date":1691614940,"post_id":76859862,"comment_id":135517132,"body_markdown":"As per https://hibernate.atlassian.net/browse/HHH-14211 , you can use the @Type(type = ”text”) annotation, but I don&#39;t know how DB agnostic that is.","body":"As per <a href=\"https://hibernate.atlassian.net/browse/HHH-14211\" rel=\"nofollow noreferrer\">hibernate.atlassian.net/browse/HHH-14211</a> , you can use the @Type(type = ”text”) annotation, but I don&#39;t know how DB agnostic that is."}],"answers":[{"tags":[],"owner":{"account_id":1100252,"reputation":10087,"user_id":1092818,"display_name":"crizzis"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691501519,"creation_date":1691501519,"answer_id":76860065,"question_id":76859862,"body_markdown":"The question is a bit confusing because you first mention the type `LONGTEXT` which is specific to MySQL/MariaDB, and you then ask for a database-agnostic solution. \r\n\r\nAssuming you want for a large character-data type to be used (`LONGTEXT`, `CLOB`, `TEXT` etc.), isn&#39;t `@Lob private String longTextAttribute;` what you want?","title":"Configure JPA Attribute Converter to Use LONGTEXT Instead of VARCHAR","body":"<p>The question is a bit confusing because you first mention the type <code>LONGTEXT</code> which is specific to MySQL/MariaDB, and you then ask for a database-agnostic solution.</p>\n<p>Assuming you want for a large character-data type to be used (<code>LONGTEXT</code>, <code>CLOB</code>, <code>TEXT</code> etc.), isn't <code>@Lob private String longTextAttribute;</code> what you want?</p>\n"}],"owner":{"account_id":897684,"reputation":1000,"user_id":934597,"accept_rate":41,"display_name":"Bahri G&#246;kcan"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":134,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1691676282,"creation_date":1691499890,"question_id":76859862,"body_markdown":"I&#39;m using JPA attribute converters to map a custom data type to a database column. The attribute converter I&#39;ve implemented serializes my custom type to JSON and stores it as a VARCHAR column in the database. However, I need the column to be of type a large character-data type, and I&#39;d like to achieve this without writing RDBMS-specific column definitions.\r\n\r\nHere&#39;s the current implementation of my attribute converter:\r\n```\r\n@Converter\r\npublic class GenericDataConvertor implements AttributeConverter&lt;Object, String&gt; {\r\n    // ... (converter methods)\r\n}\r\n```\r\n\r\nThe issue is that the generated column in the database is of type VARCHAR, and I want it to be of type a large character-data type. I&#39;m aware that I can achieve this by providing RDBMS-specific column definitions, but I&#39;m looking for a more database-agnostic solution that would work across different database systems without modifying the column definition for each.\r\n\r\n\r\n\r\nConvertor is used \r\n```\r\n    @Convert(converter = GenericDataConvertor.class)\r\n    @Lob\r\n    Object value;\r\n```\r\n\r\nWhen I use @Lob, type of column becomes oid in Postgresql. But I want to it to be text type. \r\nIf I remove @Lob, column type becomes varchar. \r\n\r\n**My Questions:**\r\n\r\n 1. Is there a way to configure JPA or the attribute converter to generate a a large character-data type column instead of a VARCHAR column without writing RDBMS-specific column definitions?\r\n 2. Are there any annotations, configurations, or settings that I can use to influence the generated column type in a more database-agnostic manner?\r\n 3. If such an approach is not available, what would be the recommended way to handle this requirement while maintaining database portability?\r\n\r\nI appreciate any advice or guidance on how to achieve this modification to the column type without resorting to specifying RDBMS-specific column definitions. Thank you for your assistance!\r\n","title":"Configure JPA Attribute Converter to Use LONGTEXT Instead of VARCHAR","body":"<p>I'm using JPA attribute converters to map a custom data type to a database column. The attribute converter I've implemented serializes my custom type to JSON and stores it as a VARCHAR column in the database. However, I need the column to be of type a large character-data type, and I'd like to achieve this without writing RDBMS-specific column definitions.</p>\n<p>Here's the current implementation of my attribute converter:</p>\n<pre><code>@Converter\npublic class GenericDataConvertor implements AttributeConverter&lt;Object, String&gt; {\n    // ... (converter methods)\n}\n</code></pre>\n<p>The issue is that the generated column in the database is of type VARCHAR, and I want it to be of type a large character-data type. I'm aware that I can achieve this by providing RDBMS-specific column definitions, but I'm looking for a more database-agnostic solution that would work across different database systems without modifying the column definition for each.</p>\n<p>Convertor is used</p>\n<pre><code>    @Convert(converter = GenericDataConvertor.class)\n    @Lob\n    Object value;\n</code></pre>\n<p>When I use @Lob, type of column becomes oid in Postgresql. But I want to it to be text type.\nIf I remove @Lob, column type becomes varchar.</p>\n<p><strong>My Questions:</strong></p>\n<ol>\n<li>Is there a way to configure JPA or the attribute converter to generate a a large character-data type column instead of a VARCHAR column without writing RDBMS-specific column definitions?</li>\n<li>Are there any annotations, configurations, or settings that I can use to influence the generated column type in a more database-agnostic manner?</li>\n<li>If such an approach is not available, what would be the recommended way to handle this requirement while maintaining database portability?</li>\n</ol>\n<p>I appreciate any advice or guidance on how to achieve this modification to the column type without resorting to specifying RDBMS-specific column definitions. Thank you for your assistance!</p>\n"},{"tags":["java","javafx","tableview","onclicklistener","factory"],"comments":[{"owner":{"account_id":2518243,"reputation":203472,"user_id":2189127,"display_name":"James_D"},"score":2,"creation_date":1691522421,"post_id":76862541,"comment_id":135502380,"body_markdown":"I see no reason that wouldn&#39;t work. Create and post a [mre].","body":"I see no reason that wouldn&#39;t work. Create and post a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>."},{"owner":{"account_id":2518243,"reputation":203472,"user_id":2189127,"display_name":"James_D"},"score":0,"creation_date":1691522752,"post_id":76862541,"comment_id":135502430,"body_markdown":"Note also that in JavaFX 20 and later, you could implement the formatting with `row.itemProperty().map(Job::onHoldProperty).orElse(false).addListener((obs, wasOnHold, isOnHold) -&gt; row.setStyle(isOnHold ? &quot;-fx-background-color: #baffba;&quot; : &quot;&quot;));`, which would avoid the need for subclassing `TableRow` and could be combined with the original implementation of drag and drop. (Still no reason your suggested approach doesn&#39;t work, though.)","body":"Note also that in JavaFX 20 and later, you could implement the formatting with <code>row.itemProperty().map(Job::onHoldProperty).orElse(false).ad&zwnj;&#8203;dListener((obs, wasOnHold, isOnHold) -&gt; row.setStyle(isOnHold ? &quot;-fx-background-color: #baffba;&quot; : &quot;&quot;));</code>, which would avoid the need for subclassing <code>TableRow</code> and could be combined with the original implementation of drag and drop. (Still no reason your suggested approach doesn&#39;t work, though.)"},{"owner":{"account_id":2518243,"reputation":203472,"user_id":2189127,"display_name":"James_D"},"score":3,"creation_date":1691531266,"post_id":76862541,"comment_id":135503741,"body_markdown":"I tested this out as best I could without a reproducible example, and it worked just fine. If it’s not working, the problem almost certainly lies in code you haven’t posted","body":"I tested this out as best I could without a reproducible example, and it worked just fine. If it’s not working, the problem almost certainly lies in code you haven’t posted"},{"owner":{"account_id":1180113,"reputation":152325,"user_id":1155209,"display_name":"jewelsea"},"score":2,"creation_date":1691539439,"post_id":76862541,"comment_id":135504578,"body_markdown":"A more generic solution to styling the on hold jobs would be to use a style class or psuedoclass, similar to how the default tableview row styling styles odd and even rows.  But that is not really the issue with the code you have, so I won&#39;t elaborate on it here.","body":"A more generic solution to styling the on hold jobs would be to use a style class or psuedoclass, similar to how the default tableview row styling styles odd and even rows.  But that is not really the issue with the code you have, so I won&#39;t elaborate on it here."},{"owner":{"account_id":1026356,"reputation":461,"user_id":1035582,"accept_rate":79,"display_name":"cworner1"},"score":1,"creation_date":1691570808,"post_id":76862541,"comment_id":135508201,"body_markdown":"Thank you for your replies.  I genuinely didn&#39;t think I could write minimal reproducible code because I thought the underlying problem was my lack of understanding of functions, lambdas and Callbacks. Because I was told it *should* work I went back to basics and rewrote the code from scratch and it does indeed work. I haven&#39;t really identified what the original problem was.","body":"Thank you for your replies.  I genuinely didn&#39;t think I could write minimal reproducible code because I thought the underlying problem was my lack of understanding of functions, lambdas and Callbacks. Because I was told it <i>should</i> work I went back to basics and rewrote the code from scratch and it does indeed work. I haven&#39;t really identified what the original problem was."}],"owner":{"account_id":1026356,"reputation":461,"user_id":1035582,"accept_rate":79,"display_name":"cworner1"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":46,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"closed_date":1691613522,"answer_count":0,"score":1,"last_activity_date":1691676233,"creation_date":1691521655,"question_id":76862541,"body_markdown":"I have a class `JobTable` which extends `TableView`. The `TableView` has a *drag and drop* feature from the following code:\r\n\r\n    setRowFactory(tv -&gt; {\r\n        TableRow&lt;Job&gt; row = new TableRow&lt;&gt;();\r\n        row.setOnDragDetected(event -&gt; {\r\n            if (!row.isEmpty()) {\r\n                Dragboard db = row.startDragAndDrop(TransferMode.MOVE);\r\n                ClipboardContent content = new ClipboardContent();\r\n                content.putString(Integer.toString(row.getIndex()));\r\n                db.setContent(content);\r\n            }\r\n\r\n            event.consume();\r\n        });\r\n\r\n        row.setOnDragOver(event -&gt; {\r\n            Dragboard db = event.getDragboard();\r\n            if (db.hasString()) {\r\n                int draggedIndex = Integer.parseInt(db.getString());\r\n                if (draggedIndex != row.getIndex())\r\n                    event.acceptTransferModes(TransferMode.MOVE);\r\n            }\r\n\r\n            event.consume();\r\n        });\r\n\r\n        row.setOnDragDropped(event -&gt; {\r\n            Dragboard db = event.getDragboard();\r\n            if (db.hasString()) {\r\n                int draggedIndex = Integer.parseInt(db.getString());\r\n                Job draggedItem = getItems().get(draggedIndex);\r\n\r\n                int dropIndex = (row.isEmpty()) ? this.getItems().size() : row.getIndex();\r\n                    \r\n                reIndexJobs(draggedIndex + 1, dropIndex + 1, draggedItem.getCategoryProperty().getValue());\r\n\r\n                event.setDropCompleted(true);\r\n                refreshDataModel();\r\n                getSelectionModel().select(dropIndex);\r\n            }\r\n\r\n            event.consume();\r\n        });\r\n\r\n        return row;\r\n    });\r\n\r\nCode works fine. I later wanted to add some formatting so I wrote the following code afterwards:\r\n\r\n    setRowFactory(tv -&gt; new TableRow&lt;Job&gt;() {\r\n        @Override\r\n        protected void updateItem(Job job, boolean empty) {\r\n            super.updateItem(job, empty);\r\n                \r\n            System.out.println(&quot;Checkpoint&quot;);\r\n                \r\n            if (job == null)\r\n                setStyle(&quot;&quot;);\r\n            else if (job.isOnHold())\r\n                setStyle(&quot;-fx-background-color: #baffba;&quot;);\r\n            else\r\n                setStyle(&quot;&quot;);\r\n        }\r\n    });\r\n\r\nThis also worked correctly. However at the moment I can only `setRowFactory` to either one or the other. I tried to combine both features by extending `TableRow` in an inner class declared in `JobTable`:\r\n\r\n    public class CustomTableRow extends TableRow&lt;Job&gt; {\r\n        public CustomTableRow() {\r\n            super();            \r\n            \r\n            setOnDragDetected(event -&gt; {\r\n                if (!isEmpty()) {\r\n                    Dragboard db = startDragAndDrop(TransferMode.MOVE);\r\n                    ClipboardContent content = new ClipboardContent();\r\n                    content.putString(Integer.toString(getIndex()));\r\n                    db.setContent(content);\r\n                }\r\n\r\n                event.consume();\r\n            });\r\n\r\n            setOnDragOver(event -&gt; {\r\n                Dragboard db = event.getDragboard();\r\n                if (db.hasString()) {\r\n                    int draggedIndex = Integer.parseInt(db.getString());\r\n                    if (draggedIndex != getIndex())\r\n                        event.acceptTransferModes(TransferMode.MOVE);\r\n                }\r\n\r\n                event.consume();\r\n            });\r\n\r\n            setOnDragDropped(event -&gt; {\r\n                Dragboard db = event.getDragboard();\r\n                if (db.hasString()) {\r\n                    int draggedIndex = Integer.parseInt(db.getString());\r\n                    Job draggedItem = getItems().get(draggedIndex);\r\n\r\n                    int dropIndex = (isEmpty()) ? getItems().size() : getIndex();            \r\n                    \r\n                    reIndexJobs(draggedIndex + 1, dropIndex + 1, \r\n                            draggedItem.getCategoryProperty().getValue());\r\n\r\n                    event.setDropCompleted(true);\r\n                    refreshDataModel();\r\n                    getSelectionModel().select(dropIndex);\r\n                }\r\n\r\n                event.consume();\r\n            });\r\n        }\r\n        \r\n        @Override\r\n        protected void updateItem(Job job, boolean empty) {\r\n            super.updateItem(job, empty);\r\n\r\n            if (job == null) \r\n                setStyle(&quot;&quot;);                        \r\n            else if (job.isOnHold()) \r\n                setStyle(&quot;-fx-background-color: #baffba;&quot;);                        \r\n            else \r\n                setStyle(&quot;&quot;);\r\n        }\r\n    }\r\n\r\n\r\nThen set the row factory to the new `CustomTableRow` class: ```setRowFactory(tv -&gt; new CustomTableRow());```\r\n\r\nThe formatting works, but I&#39;ve lost the drag and drop feature. I&#39;m fairly new to functional programming so I&#39;m struggling a bit...","title":"Add both listeners and text formatting to TableRow","body":"<p>I have a class <code>JobTable</code> which extends <code>TableView</code>. The <code>TableView</code> has a <em>drag and drop</em> feature from the following code:</p>\n<pre><code>setRowFactory(tv -&gt; {\n    TableRow&lt;Job&gt; row = new TableRow&lt;&gt;();\n    row.setOnDragDetected(event -&gt; {\n        if (!row.isEmpty()) {\n            Dragboard db = row.startDragAndDrop(TransferMode.MOVE);\n            ClipboardContent content = new ClipboardContent();\n            content.putString(Integer.toString(row.getIndex()));\n            db.setContent(content);\n        }\n\n        event.consume();\n    });\n\n    row.setOnDragOver(event -&gt; {\n        Dragboard db = event.getDragboard();\n        if (db.hasString()) {\n            int draggedIndex = Integer.parseInt(db.getString());\n            if (draggedIndex != row.getIndex())\n                event.acceptTransferModes(TransferMode.MOVE);\n        }\n\n        event.consume();\n    });\n\n    row.setOnDragDropped(event -&gt; {\n        Dragboard db = event.getDragboard();\n        if (db.hasString()) {\n            int draggedIndex = Integer.parseInt(db.getString());\n            Job draggedItem = getItems().get(draggedIndex);\n\n            int dropIndex = (row.isEmpty()) ? this.getItems().size() : row.getIndex();\n                \n            reIndexJobs(draggedIndex + 1, dropIndex + 1, draggedItem.getCategoryProperty().getValue());\n\n            event.setDropCompleted(true);\n            refreshDataModel();\n            getSelectionModel().select(dropIndex);\n        }\n\n        event.consume();\n    });\n\n    return row;\n});\n</code></pre>\n<p>Code works fine. I later wanted to add some formatting so I wrote the following code afterwards:</p>\n<pre><code>setRowFactory(tv -&gt; new TableRow&lt;Job&gt;() {\n    @Override\n    protected void updateItem(Job job, boolean empty) {\n        super.updateItem(job, empty);\n            \n        System.out.println(&quot;Checkpoint&quot;);\n            \n        if (job == null)\n            setStyle(&quot;&quot;);\n        else if (job.isOnHold())\n            setStyle(&quot;-fx-background-color: #baffba;&quot;);\n        else\n            setStyle(&quot;&quot;);\n    }\n});\n</code></pre>\n<p>This also worked correctly. However at the moment I can only <code>setRowFactory</code> to either one or the other. I tried to combine both features by extending <code>TableRow</code> in an inner class declared in <code>JobTable</code>:</p>\n<pre><code>public class CustomTableRow extends TableRow&lt;Job&gt; {\n    public CustomTableRow() {\n        super();            \n        \n        setOnDragDetected(event -&gt; {\n            if (!isEmpty()) {\n                Dragboard db = startDragAndDrop(TransferMode.MOVE);\n                ClipboardContent content = new ClipboardContent();\n                content.putString(Integer.toString(getIndex()));\n                db.setContent(content);\n            }\n\n            event.consume();\n        });\n\n        setOnDragOver(event -&gt; {\n            Dragboard db = event.getDragboard();\n            if (db.hasString()) {\n                int draggedIndex = Integer.parseInt(db.getString());\n                if (draggedIndex != getIndex())\n                    event.acceptTransferModes(TransferMode.MOVE);\n            }\n\n            event.consume();\n        });\n\n        setOnDragDropped(event -&gt; {\n            Dragboard db = event.getDragboard();\n            if (db.hasString()) {\n                int draggedIndex = Integer.parseInt(db.getString());\n                Job draggedItem = getItems().get(draggedIndex);\n\n                int dropIndex = (isEmpty()) ? getItems().size() : getIndex();            \n                \n                reIndexJobs(draggedIndex + 1, dropIndex + 1, \n                        draggedItem.getCategoryProperty().getValue());\n\n                event.setDropCompleted(true);\n                refreshDataModel();\n                getSelectionModel().select(dropIndex);\n            }\n\n            event.consume();\n        });\n    }\n    \n    @Override\n    protected void updateItem(Job job, boolean empty) {\n        super.updateItem(job, empty);\n\n        if (job == null) \n            setStyle(&quot;&quot;);                        \n        else if (job.isOnHold()) \n            setStyle(&quot;-fx-background-color: #baffba;&quot;);                        \n        else \n            setStyle(&quot;&quot;);\n    }\n}\n</code></pre>\n<p>Then set the row factory to the new <code>CustomTableRow</code> class: <code>setRowFactory(tv -&gt; new CustomTableRow());</code></p>\n<p>The formatting works, but I've lost the drag and drop feature. I'm fairly new to functional programming so I'm struggling a bit...</p>\n"},{"tags":["java","eclipse-plugin","decompiler"],"comments":[{"owner":{"account_id":3159259,"reputation":109666,"user_id":2670892,"display_name":"greg-449"},"score":0,"creation_date":1691684708,"post_id":76876480,"comment_id":135528022,"body_markdown":"What do you get when you click &quot;Add...&quot; in the &quot;Associated editors&quot; section","body":"What do you get when you click &quot;Add...&quot; in the &quot;Associated editors&quot; section"},{"owner":{"account_id":24207140,"reputation":135,"user_id":18164170,"display_name":"Pramit Pakhira"},"score":0,"creation_date":1691689267,"post_id":76876480,"comment_id":135528903,"body_markdown":"@greg-449 Clicking on Add I am able to see two types of editors to choose from - 1) Internal editors 2) External programs. Both have got a number of options under them. However, neither fits here. I assume, an Editor related with this Enhanced Class Decompiler should have been added there.","body":"@greg-449 Clicking on Add I am able to see two types of editors to choose from - 1) Internal editors 2) External programs. Both have got a number of options under them. However, neither fits here. I assume, an Editor related with this Enhanced Class Decompiler should have been added there."},{"owner":{"account_id":3159259,"reputation":109666,"user_id":2670892,"display_name":"greg-449"},"score":0,"creation_date":1691695761,"post_id":76876480,"comment_id":135530112,"body_markdown":"Does it show up in the installed software list (Help &gt; About Eclipse &gt; Installation Details &gt; Installation Software)? Try the install from the update site as described on the project page https://ecd-plugin.github.io/ecd/","body":"Does it show up in the installed software list (Help &gt; About Eclipse &gt; Installation Details &gt; Installation Software)? Try the install from the update site as described on the project page <a href=\"https://ecd-plugin.github.io/ecd/\" rel=\"nofollow noreferrer\">ecd-plugin.github.io/ecd</a>"},{"owner":{"account_id":24207140,"reputation":135,"user_id":18164170,"display_name":"Pramit Pakhira"},"score":0,"creation_date":1691729363,"post_id":76876480,"comment_id":135533655,"body_markdown":"Yes, they did show up in that software list (Help &gt; About Eclipse &gt; Installation Details &gt; Installation Software). Additionally, I installed it again both from the project page guided steps and directly doing a drag and drop of the installer in running Eclipse workspace. However, still no luck.\nJust wanted to mention here, I am working in the Eclipse 2023-06 edition installed in a 64 bit Windows 11 system with JDK 17. Could this combination have anything to do with this issue?","body":"Yes, they did show up in that software list (Help &gt; About Eclipse &gt; Installation Details &gt; Installation Software). Additionally, I installed it again both from the project page guided steps and directly doing a drag and drop of the installer in running Eclipse workspace. However, still no luck. Just wanted to mention here, I am working in the Eclipse 2023-06 edition installed in a 64 bit Windows 11 system with JDK 17. Could this combination have anything to do with this issue?"},{"owner":{"account_id":3159259,"reputation":109666,"user_id":2670892,"display_name":"greg-449"},"score":0,"creation_date":1691734456,"post_id":76876480,"comment_id":135534221,"body_markdown":"You can report issues direct to the developers on the github site https://github.com/ecd-plugin/ecd/issues","body":"You can report issues direct to the developers on the github site <a href=\"https://github.com/ecd-plugin/ecd/issues\" rel=\"nofollow noreferrer\">github.com/ecd-plugin/ecd/issues</a>"},{"owner":{"account_id":24207140,"reputation":135,"user_id":18164170,"display_name":"Pramit Pakhira"},"score":0,"creation_date":1691756436,"post_id":76876480,"comment_id":135538354,"body_markdown":"I reported this on GitHub, got some suggestions as well. However, still no luck! \n\nLater, I tried installing Eclipse 2023-03 (just the previous version) and there this entire Decompiler plugin thing has worked in one shot! Looks like this is really an issue currently with the latest version i.e., Eclipse 2023-06 or at least for the combination that I had, Windows 11 64 Bit + JDK17 + Eclipse 2023-06, not sure.","body":"I reported this on GitHub, got some suggestions as well. However, still no luck!   Later, I tried installing Eclipse 2023-03 (just the previous version) and there this entire Decompiler plugin thing has worked in one shot! Looks like this is really an issue currently with the latest version i.e., Eclipse 2023-06 or at least for the combination that I had, Windows 11 64 Bit + JDK17 + Eclipse 2023-06, not sure."}],"owner":{"account_id":24207140,"reputation":135,"user_id":18164170,"display_name":"Pramit Pakhira"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":90,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1691676210,"creation_date":1691676210,"question_id":76876480,"body_markdown":"I am trying to configure Java Decompiler in Eclipse 2023-06 in order to get into .class files from within JARs, where no sources are attached. For that, I have installed the Enhanced Class Decompiler 3.3.0 plugin from Eclipse Marketplace -\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\nFollowing that I have restarted, quit and opened Eclipse multiple times. However, I don&#39;t see any new editor to be added under *Associated Editors* in this path, Windows -&gt; Preference -&gt; Editors -&gt; File Associations. The available options don&#39;t work.\r\n\r\n[![enter image description here][2]][2]\r\n\r\nAlso, I have tried searching *Decompiler* under Preference search, which in usual case, is supposed to be there under Java. But here in my case, nothing shows up -\r\n\r\n[![enter image description here][3]][3]\r\n\r\nAm I missing something here or is this indeed some issue currently present with this latest version of Eclipse?\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/Vr0oe.jpg\r\n  [2]: https://i.stack.imgur.com/dYdaN.jpg\r\n  [3]: https://i.stack.imgur.com/EUZtw.jpg","title":"Unable to configure Java Decompiler in Eclipse 2023-06","body":"<p>I am trying to configure Java Decompiler in Eclipse 2023-06 in order to get into .class files from within JARs, where no sources are attached. For that, I have installed the Enhanced Class Decompiler 3.3.0 plugin from Eclipse Marketplace -</p>\n<p><a href=\"https://i.stack.imgur.com/Vr0oe.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Vr0oe.jpg\" alt=\"enter image description here\" /></a></p>\n<p>Following that I have restarted, quit and opened Eclipse multiple times. However, I don't see any new editor to be added under <em>Associated Editors</em> in this path, Windows -&gt; Preference -&gt; Editors -&gt; File Associations. The available options don't work.</p>\n<p><a href=\"https://i.stack.imgur.com/dYdaN.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/dYdaN.jpg\" alt=\"enter image description here\" /></a></p>\n<p>Also, I have tried searching <em>Decompiler</em> under Preference search, which in usual case, is supposed to be there under Java. But here in my case, nothing shows up -</p>\n<p><a href=\"https://i.stack.imgur.com/EUZtw.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/EUZtw.jpg\" alt=\"enter image description here\" /></a></p>\n<p>Am I missing something here or is this indeed some issue currently present with this latest version of Eclipse?</p>\n"},{"tags":["java","scala","apache-spark","apache-spark-sql","heap-memory"],"comments":[{"owner":{"account_id":7034556,"reputation":12325,"user_id":5389127,"display_name":"Ga&#235;l J"},"score":0,"creation_date":1632339517,"post_id":69289692,"comment_id":122468774,"body_markdown":"Show us your code and explain what you do or want to do with the output?","body":"Show us your code and explain what you do or want to do with the output?"},{"owner":{"account_id":7034556,"reputation":12325,"user_id":5389127,"display_name":"Ga&#235;l J"},"score":1,"creation_date":1632339540,"post_id":69289692,"comment_id":122468788,"body_markdown":"You talk about broadcast.. broadcasting what data?","body":"You talk about broadcast.. broadcasting what data?"},{"owner":{"account_id":15055042,"reputation":546,"user_id":10913131,"display_name":"Sankar"},"score":0,"creation_date":1632340453,"post_id":69289692,"comment_id":122469053,"body_markdown":"We have an application, and the data are related to people visiting our application, like timestamp, location, device using which they have connected, the pages that they have visited, whether they have subscribed to our channel, so on and so forth, these data are confidential otherwise I would have shared, each table has 100+ columns in it. Regarding code part, it is very simpler and straight forward left join and couple of filters, I am really sorry if this is not sufficient enough :)","body":"We have an application, and the data are related to people visiting our application, like timestamp, location, device using which they have connected, the pages that they have visited, whether they have subscribed to our channel, so on and so forth, these data are confidential otherwise I would have shared, each table has 100+ columns in it. Regarding code part, it is very simpler and straight forward left join and couple of filters, I am really sorry if this is not sufficient enough :)"},{"owner":{"account_id":3859079,"reputation":2069,"user_id":3197244,"accept_rate":50,"display_name":"jgp"},"score":1,"creation_date":1632340662,"post_id":69289692,"comment_id":122469124,"body_markdown":"Code always helps... ;) Have you tried to not use the heap? which v of Spark are you using?","body":"Code always helps... ;) Have you tried to not use the heap? which v of Spark are you using?"},{"owner":{"account_id":15055042,"reputation":546,"user_id":10913131,"display_name":"Sankar"},"score":0,"creation_date":1632341448,"post_id":69289692,"comment_id":122469388,"body_markdown":"Hello @jgp, added the first query - it had a bunch of case(when then) which I removed. And I am using spark 2.4","body":"Hello @jgp, added the first query - it had a bunch of case(when then) which I removed. And I am using spark 2.4"},{"owner":{"account_id":7034556,"reputation":12325,"user_id":5389127,"display_name":"Ga&#235;l J"},"score":0,"creation_date":1632341806,"post_id":69289692,"comment_id":122469491,"body_markdown":"What do you want to do with the 120B rows output? Write to a file ? My point was: do you really need to cache it / collect it ?","body":"What do you want to do with the 120B rows output? Write to a file ? My point was: do you really need to cache it / collect it ?"},{"owner":{"account_id":15055042,"reputation":546,"user_id":10913131,"display_name":"Sankar"},"score":0,"creation_date":1632341960,"post_id":69289692,"comment_id":122469529,"body_markdown":"so I will be using that dataframe with 120M rows in 2 other queries, and the final output will be written to S3","body":"so I will be using that dataframe with 120M rows in 2 other queries, and the final output will be written to S3"},{"owner":{"account_id":15055042,"reputation":546,"user_id":10913131,"display_name":"Sankar"},"score":0,"creation_date":1632342943,"post_id":69289692,"comment_id":122469820,"body_markdown":"added the spark plan","body":"added the spark plan"}],"owner":{"account_id":15055042,"reputation":546,"user_id":10913131,"display_name":"Sankar"},"comment_count":8,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":3403,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1691676209,"creation_date":1632336135,"question_id":69289692,"body_markdown":"I am doing a left join between two tables - the left table(let&#39;s say A) has 1.4 billion records with size estimator giving it a size of 17GB, the right table(B) has 100 million records - with an approx size of 1.3GB.\r\n\r\nThe output of the above-joined dataframe has 120 million records (there are filters in place which brought down the record number after the left join). The output dataframe is getting used twice - so I cached it.\r\n\r\nNow, when I ran the job as it is - took 1 hour and 40 minutes to run.\r\n\r\nSo to reduce the processing time, I was trying to implement broadcast join on the first left join between A and B. Now here comes the issue.\r\n\r\nI am using the below configurations parameters - \r\n\r\n```\r\n&quot;spark.ui.threadDumpsEnabled&quot; = &quot;true&quot;\r\n&quot;spark.memory.storageFraction&quot; = &quot;0.5&quot;\r\n&quot;spark.sql.shuffle.partitions&quot; = &quot;400&quot;\r\n&quot;spark.driver.maxResultSize&quot; = &quot;8G&quot;\r\n&quot;spark.sql.broadcastTimeout&quot; = &quot;36000&quot;\r\n&quot;spark.driver.memory&quot; = &quot;30G&quot;\r\n&quot;spark.executor.memory&quot; = &quot;15G&quot;\r\n&quot;spark.executor.cores&quot; = &quot;4&quot;\r\n&quot;spark.executor.instances&quot; = &quot;3&quot;\r\n&quot;spark.kryoserializer.buffer.max&quot; = &quot;1500m&quot;\r\n&quot;spark.driver.cores&quot; = &quot;4&quot;\r\n&quot;spark.dynamicAllocation.enabled&quot; = &quot;false&quot;\r\n&quot;spark.serializer&quot; = &quot;org.apache.spark.serializer.KryoSerializer&quot;\r\n&quot;spark.executor.defaultJavaOptions=-XX:+UseG1GC -Xss100M -XX:+UnlockDiagnosticVMOptions -XX:+G1SummarizeConcMark -XX:InitiatingHeapOccupancyPercent&quot; = &quot;45&quot;\r\n&quot;spark.driver.defaultJavaOptions=-XX:+UseG1GC -Xss100M -XX:+UnlockDiagnosticVMOptions -XX:+G1SummarizeConcMark -XX:InitiatingHeapOccupancyPercent&quot; = &quot;45&quot;\r\n\r\n``` \r\n\r\nAll these parameters came into the picture one after another as I was encountering numerous memory issues.\r\n\r\n``` &quot;spark.sql.broadcastTimeout&quot; = &quot;36000&quot; ```\r\n-- this came because I was facing below error \r\n```\r\n[org.apache.spark.sql.execution.exchange.BroadcastExchangeExec.logError@91] - Could not execute broadcast in 300 secs.\r\njava.util.concurrent.TimeoutException: Futures timed out after [300 seconds]\r\n```\r\n\r\n```&quot;spark.kryoserializer.buffer.max&quot; = &quot;1500m&quot;``` - this came because -\r\n```\r\norg.apache.spark.SparkException: Kryo serialization failed: Buffer overflow. Available: 0, required: 4658915. To avoid this, increase spark.kryoserializer.buffer.max value\r\n```\r\n\r\nI also faced these errors - \r\n\r\n```\r\nb) java.lang.OutOfMemoryError: GC overhead limit exceeded\r\nc) java.lang.StackOverflowError\r\n```\r\n\r\nBut, currently, I am facing this issue which is completely new to me and I could not find a solution - \r\n\r\n```\r\nCaused by: org.apache.spark.SparkException: There is no enough memory to build hash map\r\n\tat org.apache.spark.sql.execution.joins.UnsafeHashedRelation$.apply(HashedRelation.scala:314)\r\n\tat org.apache.spark.sql.execution.joins.HashedRelation$.apply(HashedRelation.scala:109)\r\n\tat org.apache.spark.sql.execution.joins.HashedRelationBroadcastMode.transform(HashedRelation.scala:857)\r\n\tat org.apache.spark.sql.execution.joins.HashedRelationBroadcastMode.transform(HashedRelation.scala:845)\r\n\tat org.apache.spark.sql.execution.exchange.BroadcastExchangeExec$$anonfun$relationFuture$1$$anonfun$apply$1.apply(BroadcastExchangeExec.scala:89)\r\n\tat org.apache.spark.sql.execution.exchange.BroadcastExchangeExec$$anonfun$relationFuture$1$$anonfun$apply$1.apply(BroadcastExchangeExec.scala:76)\r\n\tat org.apache.spark.sql.execution.SQLExecution$$anonfun$withExecutionId$1.apply(SQLExecution.scala:141)\r\n\tat org.apache.spark.sql.execution.SQLExecution$.withSQLConfPropagated(SQLExecution.scala:165)\r\n\tat org.apache.spark.sql.execution.SQLExecution$.withExecutionId(SQLExecution.scala:138)\r\n\tat org.apache.spark.sql.execution.exchange.BroadcastExchangeExec$$anonfun$relationFuture$1.apply(BroadcastExchangeExec.scala:75)\r\n\tat org.apache.spark.sql.execution.exchange.BroadcastExchangeExec$$anonfun$relationFuture$1.apply(BroadcastExchangeExec.scala:75)\r\n\tat scala.concurrent.impl.Future$PromiseCompletingRunnable.liftedTree1$1(Future.scala:24)\r\n\tat scala.concurrent.impl.Future$PromiseCompletingRunnable.run(Future.scala:24)\r\n\tat java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)\r\n\tat java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)\r\n```\r\n\r\nThinking it is coming because I am not using any ```action``` until the last step of the execution, I tried to break the lineage by using intermediate ```action``` like ```count```\r\n\r\nBut the issue still persists, I also tried to increase the driver memory to a great extent, but no luck.\r\n\r\n\r\n\r\nEDITS\r\n=====================\r\nThis is the first query I was talking about\r\n\r\n```\r\nval a = spark.sql(&quot;&quot;&quot;\r\nselect \r\n/*+ BROADCAST(schema.table2) */\r\nvisit_date, \r\nv4.visid, \r\nvisit_num,\r\ndevice_family,\r\noperating_system,\r\n&#39;test&#39; AS traffic_grouping,\r\n&#39;test2&#39;Junk_Filter,\r\n&#39;test3&#39; visit_start_evar26,\r\nvisit_start_pagename,\r\nvisit_start_url,\r\nreferrer_domain,\r\nsession_duration,\r\nisp_domain,\r\npages_visited,\r\nqbo_sui_click,\r\nqbo_sui_trial_click,\r\nqbo_sui_buy_click,\r\nqbse_sui_click,\r\nqbse_sui_trial_click,\r\nqbse_sui_buy_click,\r\nqbse_customer_flag,\r\nqbo_customer_flag,\r\ncase when s.ivid is not null then 1 else 0 end as segment_qbo\r\nfrom schema.table2 v4\r\nleft join schema.table2 s \r\n    on v4.ivid = s.ivid and v4.visit_date &gt; s.qbo_signup_date and source = &#39;check&#39;\r\nWHERE visit_date &gt;= &#39;2020-07-14&#39;\r\nand country in (&#39;Australia&#39;,&#39;Australia&#39;)\r\nand  ((ipd_flag = 0\r\n    AND sbbg_flag = 0)\r\n  or lower(visit_start_evar26) like (&#39;%buy%&#39;))\r\ngroup by 1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23\r\n&quot;&quot;&quot;)\r\n```\r\nhere I have done a broadcast join.\r\n\r\n[![enter image description here][1]][1]\r\n\r\nIf anyone has any leads, it would really be a great help, thanks in advance!\r\n\r\n\r\n[![enter image description here][2]][2]\r\n\r\n\r\n[![enter image description here][3]][3]\r\n\r\n\r\n[![enter image description here][4]][4]\r\n\r\n\r\n[![enter image description here][5]][5]\r\n\r\n\r\n[![enter image description here][6]][6]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/QF1Vp.png\r\n  [2]: https://i.stack.imgur.com/uPV4x.png\r\n  [3]: https://i.stack.imgur.com/45ABe.png\r\n  [4]: https://i.stack.imgur.com/Arvhe.png\r\n  [5]: https://i.stack.imgur.com/CMd51.png\r\n  [6]: https://i.stack.imgur.com/afwBo.png","title":"Spark Memory Issue - &quot;There is no enough memory to build hash map&quot;","body":"<p>I am doing a left join between two tables - the left table(let's say A) has 1.4 billion records with size estimator giving it a size of 17GB, the right table(B) has 100 million records - with an approx size of 1.3GB.</p>\n<p>The output of the above-joined dataframe has 120 million records (there are filters in place which brought down the record number after the left join). The output dataframe is getting used twice - so I cached it.</p>\n<p>Now, when I ran the job as it is - took 1 hour and 40 minutes to run.</p>\n<p>So to reduce the processing time, I was trying to implement broadcast join on the first left join between A and B. Now here comes the issue.</p>\n<p>I am using the below configurations parameters -</p>\n<pre><code>&quot;spark.ui.threadDumpsEnabled&quot; = &quot;true&quot;\n&quot;spark.memory.storageFraction&quot; = &quot;0.5&quot;\n&quot;spark.sql.shuffle.partitions&quot; = &quot;400&quot;\n&quot;spark.driver.maxResultSize&quot; = &quot;8G&quot;\n&quot;spark.sql.broadcastTimeout&quot; = &quot;36000&quot;\n&quot;spark.driver.memory&quot; = &quot;30G&quot;\n&quot;spark.executor.memory&quot; = &quot;15G&quot;\n&quot;spark.executor.cores&quot; = &quot;4&quot;\n&quot;spark.executor.instances&quot; = &quot;3&quot;\n&quot;spark.kryoserializer.buffer.max&quot; = &quot;1500m&quot;\n&quot;spark.driver.cores&quot; = &quot;4&quot;\n&quot;spark.dynamicAllocation.enabled&quot; = &quot;false&quot;\n&quot;spark.serializer&quot; = &quot;org.apache.spark.serializer.KryoSerializer&quot;\n&quot;spark.executor.defaultJavaOptions=-XX:+UseG1GC -Xss100M -XX:+UnlockDiagnosticVMOptions -XX:+G1SummarizeConcMark -XX:InitiatingHeapOccupancyPercent&quot; = &quot;45&quot;\n&quot;spark.driver.defaultJavaOptions=-XX:+UseG1GC -Xss100M -XX:+UnlockDiagnosticVMOptions -XX:+G1SummarizeConcMark -XX:InitiatingHeapOccupancyPercent&quot; = &quot;45&quot;\n\n</code></pre>\n<p>All these parameters came into the picture one after another as I was encountering numerous memory issues.</p>\n<p><code>&quot;spark.sql.broadcastTimeout&quot; = &quot;36000&quot;</code>\n-- this came because I was facing below error</p>\n<pre><code>[org.apache.spark.sql.execution.exchange.BroadcastExchangeExec.logError@91] - Could not execute broadcast in 300 secs.\njava.util.concurrent.TimeoutException: Futures timed out after [300 seconds]\n</code></pre>\n<p><code>&quot;spark.kryoserializer.buffer.max&quot; = &quot;1500m&quot;</code> - this came because -</p>\n<pre><code>org.apache.spark.SparkException: Kryo serialization failed: Buffer overflow. Available: 0, required: 4658915. To avoid this, increase spark.kryoserializer.buffer.max value\n</code></pre>\n<p>I also faced these errors -</p>\n<pre><code>b) java.lang.OutOfMemoryError: GC overhead limit exceeded\nc) java.lang.StackOverflowError\n</code></pre>\n<p>But, currently, I am facing this issue which is completely new to me and I could not find a solution -</p>\n<pre><code>Caused by: org.apache.spark.SparkException: There is no enough memory to build hash map\n    at org.apache.spark.sql.execution.joins.UnsafeHashedRelation$.apply(HashedRelation.scala:314)\n    at org.apache.spark.sql.execution.joins.HashedRelation$.apply(HashedRelation.scala:109)\n    at org.apache.spark.sql.execution.joins.HashedRelationBroadcastMode.transform(HashedRelation.scala:857)\n    at org.apache.spark.sql.execution.joins.HashedRelationBroadcastMode.transform(HashedRelation.scala:845)\n    at org.apache.spark.sql.execution.exchange.BroadcastExchangeExec$$anonfun$relationFuture$1$$anonfun$apply$1.apply(BroadcastExchangeExec.scala:89)\n    at org.apache.spark.sql.execution.exchange.BroadcastExchangeExec$$anonfun$relationFuture$1$$anonfun$apply$1.apply(BroadcastExchangeExec.scala:76)\n    at org.apache.spark.sql.execution.SQLExecution$$anonfun$withExecutionId$1.apply(SQLExecution.scala:141)\n    at org.apache.spark.sql.execution.SQLExecution$.withSQLConfPropagated(SQLExecution.scala:165)\n    at org.apache.spark.sql.execution.SQLExecution$.withExecutionId(SQLExecution.scala:138)\n    at org.apache.spark.sql.execution.exchange.BroadcastExchangeExec$$anonfun$relationFuture$1.apply(BroadcastExchangeExec.scala:75)\n    at org.apache.spark.sql.execution.exchange.BroadcastExchangeExec$$anonfun$relationFuture$1.apply(BroadcastExchangeExec.scala:75)\n    at scala.concurrent.impl.Future$PromiseCompletingRunnable.liftedTree1$1(Future.scala:24)\n    at scala.concurrent.impl.Future$PromiseCompletingRunnable.run(Future.scala:24)\n    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)\n    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)\n</code></pre>\n<p>Thinking it is coming because I am not using any <code>action</code> until the last step of the execution, I tried to break the lineage by using intermediate <code>action</code> like <code>count</code></p>\n<p>But the issue still persists, I also tried to increase the driver memory to a great extent, but no luck.</p>\n<h1>EDITS</h1>\n<p>This is the first query I was talking about</p>\n<pre><code>val a = spark.sql(&quot;&quot;&quot;\nselect \n/*+ BROADCAST(schema.table2) */\nvisit_date, \nv4.visid, \nvisit_num,\ndevice_family,\noperating_system,\n'test' AS traffic_grouping,\n'test2'Junk_Filter,\n'test3' visit_start_evar26,\nvisit_start_pagename,\nvisit_start_url,\nreferrer_domain,\nsession_duration,\nisp_domain,\npages_visited,\nqbo_sui_click,\nqbo_sui_trial_click,\nqbo_sui_buy_click,\nqbse_sui_click,\nqbse_sui_trial_click,\nqbse_sui_buy_click,\nqbse_customer_flag,\nqbo_customer_flag,\ncase when s.ivid is not null then 1 else 0 end as segment_qbo\nfrom schema.table2 v4\nleft join schema.table2 s \n    on v4.ivid = s.ivid and v4.visit_date &gt; s.qbo_signup_date and source = 'check'\nWHERE visit_date &gt;= '2020-07-14'\nand country in ('Australia','Australia')\nand  ((ipd_flag = 0\n    AND sbbg_flag = 0)\n  or lower(visit_start_evar26) like ('%buy%'))\ngroup by 1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23\n&quot;&quot;&quot;)\n</code></pre>\n<p>here I have done a broadcast join.</p>\n<p><a href=\"https://i.stack.imgur.com/QF1Vp.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/QF1Vp.png\" alt=\"enter image description here\" /></a></p>\n<p>If anyone has any leads, it would really be a great help, thanks in advance!</p>\n<p><a href=\"https://i.stack.imgur.com/uPV4x.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/uPV4x.png\" alt=\"enter image description here\" /></a></p>\n<p><a href=\"https://i.stack.imgur.com/45ABe.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/45ABe.png\" alt=\"enter image description here\" /></a></p>\n<p><a href=\"https://i.stack.imgur.com/Arvhe.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Arvhe.png\" alt=\"enter image description here\" /></a></p>\n<p><a href=\"https://i.stack.imgur.com/CMd51.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/CMd51.png\" alt=\"enter image description here\" /></a></p>\n<p><a href=\"https://i.stack.imgur.com/afwBo.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/afwBo.png\" alt=\"enter image description here\" /></a></p>\n"},{"tags":["java","spring","spring-webflux","project-reactor","spring-webclient"],"comments":[{"owner":{"account_id":477214,"reputation":5260,"user_id":888580,"display_name":"lane.maxwell"},"score":1,"creation_date":1691606795,"post_id":76869681,"comment_id":135515827,"body_markdown":"Nope, there isn&#39;t because that exception has nothing to do with the subscription; it happens as the RequestHeaderSpec is being built.  I would rethink that design a little; building the URI shouldn&#39;t be throwing exceptions, and if there&#39;s a case where it would, it should be handled before it&#39;s time to build the WebClient.","body":"Nope, there isn&#39;t because that exception has nothing to do with the subscription; it happens as the RequestHeaderSpec is being built.  I would rethink that design a little; building the URI shouldn&#39;t be throwing exceptions, and if there&#39;s a case where it would, it should be handled before it&#39;s time to build the WebClient."},{"owner":{"account_id":3446101,"reputation":11345,"user_id":2886891,"accept_rate":75,"display_name":"Honza Zidek"},"score":0,"creation_date":1691648007,"post_id":76869681,"comment_id":135520281,"body_markdown":"@lane.maxwell See my edit. I *do* know that it happens as the RequestHeaderSpec is being built, I am wondering how to elegantly wrap it. I have no idea how to redesign the code, as the URI depends on the request, and although of course I check the request consistency before calling the method, still I need to have a low-level check here. The URI is created dynamically and cannot be created ahead.","body":"@lane.maxwell See my edit. I <i>do</i> know that it happens as the RequestHeaderSpec is being built, I am wondering how to elegantly wrap it. I have no idea how to redesign the code, as the URI depends on the request, and although of course I check the request consistency before calling the method, still I need to have a low-level check here. The URI is created dynamically and cannot be created ahead."},{"owner":{"account_id":3168631,"reputation":3561,"user_id":2678097,"display_name":"amanin"},"score":0,"creation_date":1691685273,"post_id":76869681,"comment_id":135528129,"body_markdown":"&quot;Elegant&quot; is opinionated. In such case, the only improvement I personnally see is using a method reference instead of a multiline lambda. I woud keep the original method, but private, like `private Mono&lt;MyData&gt; getMyDataImpl(MyRequest request) { webClient.get... }`. Then, make the public method like that: `public Mono&lt;MyData&gt; getMyData(MyRequest request) { return Mono.just(request).flatMap(MyService::getMyDataImpl); }`","body":"&quot;Elegant&quot; is opinionated. In such case, the only improvement I personnally see is using a method reference instead of a multiline lambda. I woud keep the original method, but private, like <code>private Mono&lt;MyData&gt; getMyDataImpl(MyRequest request) { webClient.get... }</code>. Then, make the public method like that: <code>public Mono&lt;MyData&gt; getMyData(MyRequest request) { return Mono.just(request).flatMap(MyService::getMyDataImpl); }</code>"}],"owner":{"account_id":3446101,"reputation":11345,"user_id":2886891,"accept_rate":75,"display_name":"Honza Zidek"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":149,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1691675712,"creation_date":1691598832,"question_id":76869681,"body_markdown":"### Code\r\n\r\nI have a Spring reactive web client used to connect to a web service.\r\n\r\n``` lang-java\r\n@Autowired\r\nprivate org.springframework.web.reactive.function.client.WebClient webClient;\r\n\r\npublic Mono&lt;MyData&gt; getMyData(MyRequest request) {\r\n    return webClient\r\n        .get()\r\n        .uri(uriBuilder -&gt; this.createUri(uriBuilder, request))\r\n        // Any exception thrown before this point is outside of the Mono context\r\n        .retrieve()\r\n        .bodyToMono(MyDataDto.class)\r\n        .map(myDataDto -&gt; mapToMyData(myDataDto))\r\n        ;\r\n}\r\n```\r\n\r\nThere is a possibility that the `createUri()` method throws an exception:\r\n\r\n``` lang-java\r\nprivate URI createUri(UriBuilder uriBuilder, MyRequest request) {\r\n    if (somethingIsInconsistent) {\r\n        throw new MyException();\r\n    }\r\n}\r\n```\r\n\r\nThe problem is that the exception is thrown in the main thread when the `Mono` is created, and not in the context of the `Mono` when it is subscribed.\r\n\r\n### Tests\r\n\r\nAs a result, the following test fails:\r\n\r\n``` lang-java\r\n@Test\r\nvoid getMyData_whenBadRequest_throwExceptionWhenSubscribed() {\r\n    service.getMyData(badRequest)\r\n        .as(StepVerifier::create)\r\n        .expectError(MyException.class)\r\n        .verify();\r\n}\r\n```\r\n\r\nand this passes:\r\n\r\n``` lang-java\r\n@Test\r\nvoid getMyData_whenBadRequest_throwExceptionWhenCreated() {\r\n    assertThrows(MyException.class, \r\n        () -&gt; service.getMyData(badRequest));\r\n}\r\n```\r\n\r\nI&#39;d like to catch all the exception in the context of the `Mono` subscription.\r\n\r\n### Question\r\n\r\nIs there some nice reactive `WebClient` idiom to wrap the call so **all** exceptions are thrown when the `Mono` is subscribed? All I came with is \r\n\r\n``` lang-java\r\npublic Mono&lt;MyData&gt; getMyData(MyRequest request) {\r\n    return Mono.defer(() -&gt; webClient\r\n            .get()\r\n            .uri(uriBuilder -&gt; this.createUri(uriBuilder, req))\r\n            .retrieve()\r\n            .bodyToMono(MyDataDto.class)\r\n         )\r\n        .map(myDataDto -&gt; mapToMyData(myDataDto))\r\n        ;\r\n}\r\n```\r\n\r\nbut this looks to me awkward and ugly. The original code was much smoother and more easily readable!\r\n\r\nThe question is **not** *why* it happens. I know that it happens because that exception occurs as the `RequestHeaderSpec` is being built.\r\n\r\nThe URI is created dynamically, depending on the `request` input parameter. Some combination of fields of the `request` is not able to produce a valid URL and such a request should fail. I cannot think of a better place to create the URI. The most logical place seems the method itself. Even if I delegated the URI creation to an external class, it would be called before the `Mono` when the `RequestHeaderSpec` is being built.","title":"How to have all the exceptions thrown in the Mono context when using Spring reactive WebClient?","body":"<h3>Code</h3>\n<p>I have a Spring reactive web client used to connect to a web service.</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Autowired\nprivate org.springframework.web.reactive.function.client.WebClient webClient;\n\npublic Mono&lt;MyData&gt; getMyData(MyRequest request) {\n    return webClient\n        .get()\n        .uri(uriBuilder -&gt; this.createUri(uriBuilder, request))\n        // Any exception thrown before this point is outside of the Mono context\n        .retrieve()\n        .bodyToMono(MyDataDto.class)\n        .map(myDataDto -&gt; mapToMyData(myDataDto))\n        ;\n}\n</code></pre>\n<p>There is a possibility that the <code>createUri()</code> method throws an exception:</p>\n<pre class=\"lang-java prettyprint-override\"><code>private URI createUri(UriBuilder uriBuilder, MyRequest request) {\n    if (somethingIsInconsistent) {\n        throw new MyException();\n    }\n}\n</code></pre>\n<p>The problem is that the exception is thrown in the main thread when the <code>Mono</code> is created, and not in the context of the <code>Mono</code> when it is subscribed.</p>\n<h3>Tests</h3>\n<p>As a result, the following test fails:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Test\nvoid getMyData_whenBadRequest_throwExceptionWhenSubscribed() {\n    service.getMyData(badRequest)\n        .as(StepVerifier::create)\n        .expectError(MyException.class)\n        .verify();\n}\n</code></pre>\n<p>and this passes:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Test\nvoid getMyData_whenBadRequest_throwExceptionWhenCreated() {\n    assertThrows(MyException.class, \n        () -&gt; service.getMyData(badRequest));\n}\n</code></pre>\n<p>I'd like to catch all the exception in the context of the <code>Mono</code> subscription.</p>\n<h3>Question</h3>\n<p>Is there some nice reactive <code>WebClient</code> idiom to wrap the call so <strong>all</strong> exceptions are thrown when the <code>Mono</code> is subscribed? All I came with is</p>\n<pre class=\"lang-java prettyprint-override\"><code>public Mono&lt;MyData&gt; getMyData(MyRequest request) {\n    return Mono.defer(() -&gt; webClient\n            .get()\n            .uri(uriBuilder -&gt; this.createUri(uriBuilder, req))\n            .retrieve()\n            .bodyToMono(MyDataDto.class)\n         )\n        .map(myDataDto -&gt; mapToMyData(myDataDto))\n        ;\n}\n</code></pre>\n<p>but this looks to me awkward and ugly. The original code was much smoother and more easily readable!</p>\n<p>The question is <strong>not</strong> <em>why</em> it happens. I know that it happens because that exception occurs as the <code>RequestHeaderSpec</code> is being built.</p>\n<p>The URI is created dynamically, depending on the <code>request</code> input parameter. Some combination of fields of the <code>request</code> is not able to produce a valid URL and such a request should fail. I cannot think of a better place to create the URI. The most logical place seems the method itself. Even if I delegated the URI creation to an external class, it would be called before the <code>Mono</code> when the <code>RequestHeaderSpec</code> is being built.</p>\n"},{"tags":["java","spring-boot","filter","api-gateway","spring-cloud-gateway"],"comments":[{"owner":{"account_id":3695262,"reputation":8590,"user_id":3391490,"accept_rate":100,"display_name":"Thirumal"},"score":0,"creation_date":1683038323,"post_id":76078243,"comment_id":134303306,"body_markdown":"Found an answer? Having the same issue","body":"Found an answer? Having the same issue"},{"owner":{"account_id":3253970,"reputation":322,"user_id":2743574,"accept_rate":31,"display_name":"Dame Lyngdoh"},"score":0,"creation_date":1683168884,"post_id":76078243,"comment_id":134326223,"body_markdown":"@Thirumal Nope. I had to abandon this approach.","body":"@Thirumal Nope. I had to abandon this approach."}],"answers":[{"tags":[],"owner":{"account_id":28702198,"reputation":11,"user_id":21979165,"display_name":"mohideen116"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1685360209,"creation_date":1685360169,"answer_id":76356992,"question_id":76078243,"body_markdown":"\r\n\r\n&lt;!-- begin snippet: js hide: false console: true babel: false --&gt;\r\n\r\n&lt;!-- language: lang-js --&gt;\r\n\r\n    package com.javainuse.config;\r\n\r\n    import lombok.extern.slf4j.Slf4j;\r\n\r\n    import org.json.JSONObject;\r\n    import org.reactivestreams.Publisher;\r\n    import org.slf4j.Logger;\r\n    import org.slf4j.LoggerFactory;\r\n    import org.springframework.core.io.buffer.DataBuffer;\r\n    import org.springframework.core.io.buffer.DataBufferFactory;\r\n    import org.springframework.core.io.buffer.DefaultDataBuffer;\r\n    import org.springframework.core.io.buffer.DefaultDataBufferFactory;\r\n    import org.springframework.http.server.reactive.ServerHttpRequest;\r\n    import org.springframework.http.server.reactive.ServerHttpRequestDecorator;\r\n    import org.springframework.http.server.reactive.ServerHttpResponse;\r\n    import org.springframework.http.server.reactive.ServerHttpResponseDecorator;\r\n    import org.springframework.stereotype.Component;\r\n    import org.springframework.web.server.ServerWebExchange;\r\n    import org.springframework.web.server.WebFilter;\r\n    import org.springframework.web.server.WebFilterChain;\r\n\r\n    import com.fasterxml.jackson.core.JsonParser;\r\n\r\n    import reactor.core.publisher.Flux;\r\n    import reactor.core.publisher.Mono;\r\n    import reactor.core.scheduler.Schedulers;\r\n\r\n    import java.io.ByteArrayOutputStream;\r\n    import java.nio.channels.Channels;\r\n    import java.nio.charset.StandardCharsets;\r\n\r\n    /**\r\n     * Project: gateway-service-filter-properties.&lt;br/&gt;\r\n     * Des: &lt;br/&gt;\r\n     * User: HieuTT&lt;br/&gt;\r\n     * Date: 04/08/2022&lt;br/&gt;\r\n     */\r\n    @Component\r\n    @Slf4j\r\n    public class LoggingWebFilter implements WebFilter {\r\n\r\n    \tprivate Logger logger = LoggerFactory.getLogger(LoggingWebFilter.class);\r\n\r\n    \t/**\r\n    \t * Process the Web request and (optionally) delegate to the next\r\n    \t * {@code WebFilter} through the given {@link WebFilterChain}.\r\n    \t *\r\n    \t * @param exchange the current server exchange\r\n    \t * @param chain    provides a way to delegate to the next filter\r\n    \t * @return {@code Mono&lt;Void&gt;} to indicate when request processing is complete\r\n    \t */\r\n    \t@Override\r\n    \tpublic Mono&lt;Void&gt; filter(ServerWebExchange exchange, WebFilterChain chain) {\r\n    \t\tSystem.out.println(&quot;XXXXXXXXXXXXXXs347823489349&quot;);\r\n    \t\tServerHttpResponse response = exchange.getResponse();\r\n    \t\tServerHttpRequest request = exchange.getRequest();\r\n    \t\tDataBufferFactory dataBufferFactory = response.bufferFactory();\r\n\r\n    \t\t// log the request body\r\n    \t\tServerHttpRequest decoratedRequest = getDecoratedRequest(request);\r\n    \t\t// log the response body\r\n    \t\tServerHttpResponseDecorator decoratedResponse = getDecoratedResponse(response, request, dataBufferFactory);\r\n    \t\treturn chain.filter(exchange.mutate().request(decoratedRequest).response(decoratedResponse).build());\r\n    \t}\r\n\r\n    \tprivate ServerHttpResponseDecorator getDecoratedResponse(ServerHttpResponse response, ServerHttpRequest request,\r\n    \t\t\tDataBufferFactory dataBufferFactory) {\r\n    \t\treturn new ServerHttpResponseDecorator(response) {\r\n    \t\t\t@Override\r\n    \t\t\tpublic Mono&lt;Void&gt; writeWith(final Publisher&lt;? extends DataBuffer&gt; body) {\r\n\r\n    \t\t\t\tif (body instanceof Flux) {\r\n\r\n    \t\t\t\t\tFlux&lt;? extends DataBuffer&gt; fluxBody = (Flux&lt;? extends DataBuffer&gt;) body;\r\n\r\n    \t\t\t\t\treturn super.writeWith(fluxBody.buffer().map(dataBuffers -&gt; {\r\n\r\n    \t\t\t\t\t\tDefaultDataBuffer joinedBuffers = new DefaultDataBufferFactory().join(dataBuffers);\r\n    \t\t\t\t\t\tbyte[] content = new byte[joinedBuffers.readableByteCount()];\r\n    \t\t\t\t\t\tjoinedBuffers.read(content);\r\n    \t\t\t\t\t\tString responseBody = new String(content, StandardCharsets.UTF_8);// MODIFY RESPONSE and Return\r\n    \t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t// the Modified response\r\n    \t\t\t\t\t\tJSONObject jsonObject = new JSONObject(responseBody);\r\n    \t\t\t\t\t\tSystem.out.println(&quot;final value red from : &quot; + jsonObject.getString(&quot;message&quot;));\r\n    \t\t\t\t\t\tjsonObject.put(&quot;message&quot;, &quot;&quot;);\r\n    \t\t\t\t\t\treturn dataBufferFactory.wrap(jsonObject.toString().getBytes());\r\n    \t\t\t\t\t}).switchIfEmpty(Flux.defer(() -&gt; {\r\n\r\n    \t\t\t\t\t\tSystem.out.println(&quot;Write to database here&quot;);\r\n    \t\t\t\t\t\treturn Flux.just();\r\n    \t\t\t\t\t}))).onErrorResume(err -&gt; {\r\n    \t\t\t\t\t\tlog.error(&quot;error while decorating Response: {}&quot;, err.getMessage());\r\n    \t\t\t\t\t\treturn Mono.empty();\r\n    \t\t\t\t\t});\r\n\r\n    \t\t\t\t} else {\r\n    \t\t\t\t\tSystem.out.println(&quot;2000000000&quot;);\r\n    \t\t\t\t}\r\n    \t\t\t\treturn super.writeWith(body);\r\n    \t\t\t}\r\n    \t\t};\r\n    \t}\r\n\r\n    \tprivate ServerHttpRequest getDecoratedRequest(ServerHttpRequest request) {\r\n\r\n    \t\treturn new ServerHttpRequestDecorator(request) {\r\n    \t\t\t@Override\r\n    \t\t\tpublic Flux&lt;DataBuffer&gt; getBody() {\r\n\r\n    \t\t\t\tlog.info(&quot;requestId: {}, method: {} , url: {}&quot;, request.getId(), request.getMethodValue(),\r\n    \t\t\t\t\t\trequest.getURI());\r\n    \t\t\t\treturn super.getBody().publishOn(Schedulers.elastic()).doOnNext(dataBuffer -&gt; {\r\n    \t\t\t\t\ttry (ByteArrayOutputStream baos = new ByteArrayOutputStream()) {\r\n    \t\t\t\t\t\tChannels.newChannel(baos).write(dataBuffer.asByteBuffer().asReadOnlyBuffer());\r\n    \t\t\t\t\t\tString body = baos.toString(StandardCharsets.UTF_8);\r\n    \t\t\t\t\t\tlog.info(&quot;for requestId: {}, request body :{}&quot;, request.getId(), body);\r\n    \t\t\t\t\t} catch (Exception e) {\r\n    \t\t\t\t\t\tlog.error(e.getMessage());\r\n    \t\t\t\t\t}\r\n    \t\t\t\t});\r\n    \t\t\t}\r\n    \t\t};\r\n    \t}\r\n    }\r\n\r\n\r\n&lt;!-- end snippet --&gt;\r\n\r\n***I have fixed this issue. The decorated response is invoked with Webfilter and not from Gateway filter.\r\n\r\nYou can refer this code this worked for me in api gateway.***\r\n\r\n","title":"Spring cloud gateway ServerHttpResponseDecorator writeWith not called on receiving response","body":"<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>package com.javainuse.config;\n\nimport lombok.extern.slf4j.Slf4j;\n\nimport org.json.JSONObject;\nimport org.reactivestreams.Publisher;\nimport org.slf4j.Logger;\nimport org.slf4j.LoggerFactory;\nimport org.springframework.core.io.buffer.DataBuffer;\nimport org.springframework.core.io.buffer.DataBufferFactory;\nimport org.springframework.core.io.buffer.DefaultDataBuffer;\nimport org.springframework.core.io.buffer.DefaultDataBufferFactory;\nimport org.springframework.http.server.reactive.ServerHttpRequest;\nimport org.springframework.http.server.reactive.ServerHttpRequestDecorator;\nimport org.springframework.http.server.reactive.ServerHttpResponse;\nimport org.springframework.http.server.reactive.ServerHttpResponseDecorator;\nimport org.springframework.stereotype.Component;\nimport org.springframework.web.server.ServerWebExchange;\nimport org.springframework.web.server.WebFilter;\nimport org.springframework.web.server.WebFilterChain;\n\nimport com.fasterxml.jackson.core.JsonParser;\n\nimport reactor.core.publisher.Flux;\nimport reactor.core.publisher.Mono;\nimport reactor.core.scheduler.Schedulers;\n\nimport java.io.ByteArrayOutputStream;\nimport java.nio.channels.Channels;\nimport java.nio.charset.StandardCharsets;\n\n/**\n * Project: gateway-service-filter-properties.&lt;br/&gt;\n * Des: &lt;br/&gt;\n * User: HieuTT&lt;br/&gt;\n * Date: 04/08/2022&lt;br/&gt;\n */\n@Component\n@Slf4j\npublic class LoggingWebFilter implements WebFilter {\n\n    private Logger logger = LoggerFactory.getLogger(LoggingWebFilter.class);\n\n    /**\n     * Process the Web request and (optionally) delegate to the next\n     * {@code WebFilter} through the given {@link WebFilterChain}.\n     *\n     * @param exchange the current server exchange\n     * @param chain    provides a way to delegate to the next filter\n     * @return {@code Mono&lt;Void&gt;} to indicate when request processing is complete\n     */\n    @Override\n    public Mono&lt;Void&gt; filter(ServerWebExchange exchange, WebFilterChain chain) {\n        System.out.println(\"XXXXXXXXXXXXXXs347823489349\");\n        ServerHttpResponse response = exchange.getResponse();\n        ServerHttpRequest request = exchange.getRequest();\n        DataBufferFactory dataBufferFactory = response.bufferFactory();\n\n        // log the request body\n        ServerHttpRequest decoratedRequest = getDecoratedRequest(request);\n        // log the response body\n        ServerHttpResponseDecorator decoratedResponse = getDecoratedResponse(response, request, dataBufferFactory);\n        return chain.filter(exchange.mutate().request(decoratedRequest).response(decoratedResponse).build());\n    }\n\n    private ServerHttpResponseDecorator getDecoratedResponse(ServerHttpResponse response, ServerHttpRequest request,\n            DataBufferFactory dataBufferFactory) {\n        return new ServerHttpResponseDecorator(response) {\n            @Override\n            public Mono&lt;Void&gt; writeWith(final Publisher&lt;? extends DataBuffer&gt; body) {\n\n                if (body instanceof Flux) {\n\n                    Flux&lt;? extends DataBuffer&gt; fluxBody = (Flux&lt;? extends DataBuffer&gt;) body;\n\n                    return super.writeWith(fluxBody.buffer().map(dataBuffers -&gt; {\n\n                        DefaultDataBuffer joinedBuffers = new DefaultDataBufferFactory().join(dataBuffers);\n                        byte[] content = new byte[joinedBuffers.readableByteCount()];\n                        joinedBuffers.read(content);\n                        String responseBody = new String(content, StandardCharsets.UTF_8);// MODIFY RESPONSE and Return\n                                                                                            // the Modified response\n                        JSONObject jsonObject = new JSONObject(responseBody);\n                        System.out.println(\"final value red from : \" + jsonObject.getString(\"message\"));\n                        jsonObject.put(\"message\", \"\");\n                        return dataBufferFactory.wrap(jsonObject.toString().getBytes());\n                    }).switchIfEmpty(Flux.defer(() -&gt; {\n\n                        System.out.println(\"Write to database here\");\n                        return Flux.just();\n                    }))).onErrorResume(err -&gt; {\n                        log.error(\"error while decorating Response: {}\", err.getMessage());\n                        return Mono.empty();\n                    });\n\n                } else {\n                    System.out.println(\"2000000000\");\n                }\n                return super.writeWith(body);\n            }\n        };\n    }\n\n    private ServerHttpRequest getDecoratedRequest(ServerHttpRequest request) {\n\n        return new ServerHttpRequestDecorator(request) {\n            @Override\n            public Flux&lt;DataBuffer&gt; getBody() {\n\n                log.info(\"requestId: {}, method: {} , url: {}\", request.getId(), request.getMethodValue(),\n                        request.getURI());\n                return super.getBody().publishOn(Schedulers.elastic()).doOnNext(dataBuffer -&gt; {\n                    try (ByteArrayOutputStream baos = new ByteArrayOutputStream()) {\n                        Channels.newChannel(baos).write(dataBuffer.asByteBuffer().asReadOnlyBuffer());\n                        String body = baos.toString(StandardCharsets.UTF_8);\n                        log.info(\"for requestId: {}, request body :{}\", request.getId(), body);\n                    } catch (Exception e) {\n                        log.error(e.getMessage());\n                    }\n                });\n            }\n        };\n    }\n}</code></pre>\r\n</div>\r\n</div>\r\n</p>\n<p>***I have fixed this issue. The decorated response is invoked with Webfilter and not from Gateway filter.</p>\n<p>You can refer this code this worked for me in api gateway.***</p>\n"}],"owner":{"account_id":9368669,"reputation":31,"user_id":6952691,"display_name":"user6952691"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1542,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1691675546,"creation_date":1682143312,"question_id":76078243,"body_markdown":"I have a Spring Cloud Gateway application and I want to implement a filter which reads the response body before passing it on to the client. Below is the code to the custom filter:\r\n\r\n```java\r\n@Component\r\npublic class CreateResourceGatewayFilterFactory extends AbstractGatewayFilterFactory&lt;CreateResourceGatewayFilterFactory.Config&gt; implements Ordered {\r\n\r\n    private static final Logger log = LoggerFactory.getLogger(CreateResourceGatewayFilterFactory.class);\r\n    \r\n    public static class Config {\r\n\r\n        private ResourceType resourceType;\r\n        private String requiredRoles;\r\n\r\n        public ResourceType getResourceType() {\r\n            return resourceType;\r\n        }\r\n        public void setResourceType(ResourceType resourceType) {\r\n            this.resourceType = resourceType;\r\n        }\r\n\r\n        public String getRequiredRoles() {\r\n            return requiredRoles;\r\n        }\r\n        public void setRequiredRoles(String requiredRoles) {\r\n            this.requiredRoles = requiredRoles;\r\n        }\r\n    }\r\n\r\n    public CreateResourceGatewayFilterFactory() {\r\n        super(Config.class);\r\n    }\r\n\r\n    @Override\r\n    public List&lt;String&gt; shortcutFieldOrder() {\r\n        List&lt;String&gt; order = new ArrayList&lt;&gt;(2);\r\n        order.add(&quot;resourceType&quot;);\r\n        order.add(&quot;requiredRoles&quot;);\r\n        return order;\r\n    }\r\n\r\n    @Override\r\n    public GatewayFilter apply(Config config) {\r\n\r\n        return (exchange, chain) -&gt; {\r\n            log.debug(&quot;Received request at CreateResource filter.&quot;);\r\n            return chain.filter(exchange.mutate().request(getDecoratedRequest(exchange.getRequest())).response(getDecoratedResponse(exchange.getResponse(), config.getResourceType())).build());\r\n        };\r\n    }\r\n\r\n    private ServerHttpResponseDecorator getDecoratedResponse(ServerHttpResponse response, ResourceType resourceType) {\r\n        return new ServerHttpResponseDecorator(response) {\r\n            @Override\r\n            public Mono&lt;Void&gt; writeWith(final Publisher&lt;? extends DataBuffer&gt; body) {\r\n                log.debug(&quot;Inside response decorator&quot;);\r\n                if (body instanceof Flux) {\r\n                    log.debug(&quot;Received response from microservice.&quot;);\r\n                    Flux&lt;? extends DataBuffer&gt; fluxBody = (Flux&lt;? extends DataBuffer&gt;) body;\r\n                    return super.writeWith(fluxBody.buffer()\r\n                        .map(dataBuffers -&gt; {\r\n                            DefaultDataBuffer joinedBuffers = new DefaultDataBufferFactory().join(dataBuffers);\r\n                            byte[] content = new byte[joinedBuffers.readableByteCount()];\r\n                            joinedBuffers.read(content);\r\n                            String responseBody = new String(content, StandardCharsets.UTF_8);\r\n                            log.debug(&quot;Buffered response parsed to String {}&quot;, responseBody);\r\n                            return responseBody;\r\n                        })\r\n                        .flatMap(responseBody -&gt; doSomething(resourceType, responseBody))\r\n                        .map(responseBody -&gt; response.bufferFactory().wrap(responseBody.getBytes())))\r\n                    .onErrorResume(err -&gt; {\r\n                        log.error(&quot;Error extracting resoruce from message {}&quot;,err.getMessage());\r\n                        return Mono.empty();\r\n                    });\r\n                }\r\n                return super.writeWith(body);\r\n            }\r\n        };\r\n    }\r\n\r\n    private Flux&lt;String&gt; doSomething(ResourceType resourceType, String payload) {\r\n        // DO SOMETHING WITH PAYLOAD\r\n        return Flux.just(payload);\r\n    }\r\n\r\n    private ServerHttpRequest getDecoratedRequest(ServerHttpRequest request) {\r\n        return new ServerHttpRequestDecorator(request) {\r\n            @Override\r\n            public Flux&lt;DataBuffer&gt; getBody() {\r\n                log.debug(&quot;requestId: {}, method: {} , url: {}&quot;, request.getId(), request.getMethodValue(), request.getURI());\r\n                return request.getBody();\r\n            }\r\n        };\r\n    }\r\n\r\n    @Override\r\n    public int getOrder() {\r\n        return NettyWriteResponseFilter.WRITE_RESPONSE_FILTER_ORDER - 1;\r\n    }\r\n```\r\n\r\nI used this [post as reference][1].\r\n\r\nThe `getDecoratedResponse` is the method to create the `ServerHttpResponseDecorator` object. `CreateResourceGatewayFilterFactory` is the filter class and `Config` is the configuration class which specifies the arguments that will be passed to the filter.\r\n\r\nThe DSL in the `application.yml` is:\r\n\r\n```yaml\r\nspring:\r\n  cloud:\r\n    gateway:\r\n      default-filters:\r\n        - TokenRelay\r\n      discovery:\r\n        locator:\r\n          enabled: true\r\n          lower-case-service-id: true\r\n          predicates:\r\n            - name: Path\r\n              args:\r\n                pattern: &quot;&#39;/services/&#39;+serviceId.toLowerCase()+&#39;/**&#39;&quot;\r\n          filters:\r\n            - name: RewritePath\r\n              args:\r\n                regexp: &quot;&#39;/services/&#39; + serviceId.toLowerCase() + &#39;/(?&lt;remaining&gt;.*)&#39;&quot;\r\n                replacement: &quot;&#39;/${remaining}&#39;&quot;\r\n      routes:\r\n        - id: sample_route\r\n          uri: http://localhost:8097\r\n          predicates:\r\n            - Method=POST\r\n            - Path=/api/resources/**\r\n          filters:\r\n            - CreateResource=DEVICE,SUPER_ADMIN\r\n\r\n```\r\n\r\nThe requests is captured in the filter and the request decorator because I can see the logs, but there are no logs from the response decorator.\r\n\r\nThe response has an HTTP Status code of `201`.\r\n\r\nI need help to understand as to why the response decorator is not triggered.\r\n\r\nNote: the intention of this filter is to read the response body. This process can run in a differnet thread as it will not modify the response body before sending it back to the client. If there is a better way of doing this instead of using `ServerHttpResponseDecorator`, pleas advice me. Perhaps a post filter logic maybe.\r\n\r\n  [1]: https://stackoverflow.com/questions/59740174/spring-webflux-serverwebexchangedecorator-code-is-not-executed-when-an-excepti","title":"Spring cloud gateway ServerHttpResponseDecorator writeWith not called on receiving response","body":"<p>I have a Spring Cloud Gateway application and I want to implement a filter which reads the response body before passing it on to the client. Below is the code to the custom filter:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Component\npublic class CreateResourceGatewayFilterFactory extends AbstractGatewayFilterFactory&lt;CreateResourceGatewayFilterFactory.Config&gt; implements Ordered {\n\n    private static final Logger log = LoggerFactory.getLogger(CreateResourceGatewayFilterFactory.class);\n    \n    public static class Config {\n\n        private ResourceType resourceType;\n        private String requiredRoles;\n\n        public ResourceType getResourceType() {\n            return resourceType;\n        }\n        public void setResourceType(ResourceType resourceType) {\n            this.resourceType = resourceType;\n        }\n\n        public String getRequiredRoles() {\n            return requiredRoles;\n        }\n        public void setRequiredRoles(String requiredRoles) {\n            this.requiredRoles = requiredRoles;\n        }\n    }\n\n    public CreateResourceGatewayFilterFactory() {\n        super(Config.class);\n    }\n\n    @Override\n    public List&lt;String&gt; shortcutFieldOrder() {\n        List&lt;String&gt; order = new ArrayList&lt;&gt;(2);\n        order.add(&quot;resourceType&quot;);\n        order.add(&quot;requiredRoles&quot;);\n        return order;\n    }\n\n    @Override\n    public GatewayFilter apply(Config config) {\n\n        return (exchange, chain) -&gt; {\n            log.debug(&quot;Received request at CreateResource filter.&quot;);\n            return chain.filter(exchange.mutate().request(getDecoratedRequest(exchange.getRequest())).response(getDecoratedResponse(exchange.getResponse(), config.getResourceType())).build());\n        };\n    }\n\n    private ServerHttpResponseDecorator getDecoratedResponse(ServerHttpResponse response, ResourceType resourceType) {\n        return new ServerHttpResponseDecorator(response) {\n            @Override\n            public Mono&lt;Void&gt; writeWith(final Publisher&lt;? extends DataBuffer&gt; body) {\n                log.debug(&quot;Inside response decorator&quot;);\n                if (body instanceof Flux) {\n                    log.debug(&quot;Received response from microservice.&quot;);\n                    Flux&lt;? extends DataBuffer&gt; fluxBody = (Flux&lt;? extends DataBuffer&gt;) body;\n                    return super.writeWith(fluxBody.buffer()\n                        .map(dataBuffers -&gt; {\n                            DefaultDataBuffer joinedBuffers = new DefaultDataBufferFactory().join(dataBuffers);\n                            byte[] content = new byte[joinedBuffers.readableByteCount()];\n                            joinedBuffers.read(content);\n                            String responseBody = new String(content, StandardCharsets.UTF_8);\n                            log.debug(&quot;Buffered response parsed to String {}&quot;, responseBody);\n                            return responseBody;\n                        })\n                        .flatMap(responseBody -&gt; doSomething(resourceType, responseBody))\n                        .map(responseBody -&gt; response.bufferFactory().wrap(responseBody.getBytes())))\n                    .onErrorResume(err -&gt; {\n                        log.error(&quot;Error extracting resoruce from message {}&quot;,err.getMessage());\n                        return Mono.empty();\n                    });\n                }\n                return super.writeWith(body);\n            }\n        };\n    }\n\n    private Flux&lt;String&gt; doSomething(ResourceType resourceType, String payload) {\n        // DO SOMETHING WITH PAYLOAD\n        return Flux.just(payload);\n    }\n\n    private ServerHttpRequest getDecoratedRequest(ServerHttpRequest request) {\n        return new ServerHttpRequestDecorator(request) {\n            @Override\n            public Flux&lt;DataBuffer&gt; getBody() {\n                log.debug(&quot;requestId: {}, method: {} , url: {}&quot;, request.getId(), request.getMethodValue(), request.getURI());\n                return request.getBody();\n            }\n        };\n    }\n\n    @Override\n    public int getOrder() {\n        return NettyWriteResponseFilter.WRITE_RESPONSE_FILTER_ORDER - 1;\n    }\n</code></pre>\n<p>I used this <a href=\"https://stackoverflow.com/questions/59740174/spring-webflux-serverwebexchangedecorator-code-is-not-executed-when-an-excepti\">post as reference</a>.</p>\n<p>The <code>getDecoratedResponse</code> is the method to create the <code>ServerHttpResponseDecorator</code> object. <code>CreateResourceGatewayFilterFactory</code> is the filter class and <code>Config</code> is the configuration class which specifies the arguments that will be passed to the filter.</p>\n<p>The DSL in the <code>application.yml</code> is:</p>\n<pre class=\"lang-yaml prettyprint-override\"><code>spring:\n  cloud:\n    gateway:\n      default-filters:\n        - TokenRelay\n      discovery:\n        locator:\n          enabled: true\n          lower-case-service-id: true\n          predicates:\n            - name: Path\n              args:\n                pattern: &quot;'/services/'+serviceId.toLowerCase()+'/**'&quot;\n          filters:\n            - name: RewritePath\n              args:\n                regexp: &quot;'/services/' + serviceId.toLowerCase() + '/(?&lt;remaining&gt;.*)'&quot;\n                replacement: &quot;'/${remaining}'&quot;\n      routes:\n        - id: sample_route\n          uri: http://localhost:8097\n          predicates:\n            - Method=POST\n            - Path=/api/resources/**\n          filters:\n            - CreateResource=DEVICE,SUPER_ADMIN\n\n</code></pre>\n<p>The requests is captured in the filter and the request decorator because I can see the logs, but there are no logs from the response decorator.</p>\n<p>The response has an HTTP Status code of <code>201</code>.</p>\n<p>I need help to understand as to why the response decorator is not triggered.</p>\n<p>Note: the intention of this filter is to read the response body. This process can run in a differnet thread as it will not modify the response body before sending it back to the client. If there is a better way of doing this instead of using <code>ServerHttpResponseDecorator</code>, pleas advice me. Perhaps a post filter logic maybe.</p>\n"},{"tags":["java","multithreading","atomicreference"],"answers":[{"tags":[],"owner":{"account_id":30659,"reputation":22506,"user_id":83695,"accept_rate":86,"display_name":"andersoj"},"down_vote_count":1,"up_vote_count":287,"is_accepted":true,"score":286,"last_activity_date":1691675539,"creation_date":1287444168,"answer_id":3964249,"question_id":3964211,"body_markdown":"Atomic reference should be used in a setting where you need to do simple *atomic* (i.e. [*thread-safe*](https://en.wikipedia.org/wiki/Thread_safety), non-trivial) operations on a reference, for which monitor-based synchronization is not appropriate. Suppose you want to set a specific field only if the state of the object has changed during processing:\r\n\r\n    AtomicReference&lt;Object&gt; cache = new AtomicReference&lt;Object&gt;();\r\n    \r\n    Object cachedValue = new Object();\r\n    cache.set(cachedValue);\r\n    \r\n    //... time passes ...\r\n    Object cachedValueToUpdate = cache.get();\r\n    //... do some work to transform cachedValueToUpdate into a new version\r\n    Object newValue = someFunctionOfOld(cachedValueToUpdate);\r\n    boolean success = cache.compareAndSet(cachedValue,newValue);\r\n\r\nBecause of the atomic reference semantics, you can do this even if the `cache` object is shared amongst threads, without using `synchronized`. In general, you&#39;re better off using synchronizers or the `java.util.concurrent` framework rather than bare `Atomic*` unless you know what you&#39;re doing. \r\n\r\nTwo excellent dead-tree references which will introduce you to this topic:  \r\n\r\n - [Herlihy&#39;s excellent *Art of Multiprocessor Programming*][1]\r\n - [*Java Concurrency in Practice*][2]\r\n\r\nNote that (I don&#39;t know if this has always been true) *reference* assignment (i.e. `=`) is itself atomic (updating *primitive* 64-bit types like `long` or `double` may not be atomic; but updating a *reference* is always atomic, even if it&#39;s 64 bit) without explicitly using an `Atomic*`.  \r\nSee the [Java Language Specification 3ed, **Section 17.7**][3].\r\n\r\n\r\n  [1]: http://www.amazon.com/Art-Multiprocessor-Programming-Maurice-Herlihy/dp/0123705916\r\n  [2]: http://www.javaconcurrencyinpractice.com/\r\n  [3]: https://docs.oracle.com/javase/specs/jls/se7/html/jls-17.html#jls-17.7","title":"When to use AtomicReference in Java?","body":"<p>Atomic reference should be used in a setting where you need to do simple <em>atomic</em> (i.e. <a href=\"https://en.wikipedia.org/wiki/Thread_safety\" rel=\"nofollow noreferrer\"><em>thread-safe</em></a>, non-trivial) operations on a reference, for which monitor-based synchronization is not appropriate. Suppose you want to set a specific field only if the state of the object has changed during processing:</p>\n<pre><code>AtomicReference&lt;Object&gt; cache = new AtomicReference&lt;Object&gt;();\n\nObject cachedValue = new Object();\ncache.set(cachedValue);\n\n//... time passes ...\nObject cachedValueToUpdate = cache.get();\n//... do some work to transform cachedValueToUpdate into a new version\nObject newValue = someFunctionOfOld(cachedValueToUpdate);\nboolean success = cache.compareAndSet(cachedValue,newValue);\n</code></pre>\n<p>Because of the atomic reference semantics, you can do this even if the <code>cache</code> object is shared amongst threads, without using <code>synchronized</code>. In general, you're better off using synchronizers or the <code>java.util.concurrent</code> framework rather than bare <code>Atomic*</code> unless you know what you're doing.</p>\n<p>Two excellent dead-tree references which will introduce you to this topic:</p>\n<ul>\n<li><a href=\"https://rads.stackoverflow.com/amzn/click/com/0123705916\" rel=\"nofollow noreferrer\" rel=\"nofollow noreferrer\">Herlihy's excellent <em>Art of Multiprocessor Programming</em></a></li>\n<li><a href=\"http://www.javaconcurrencyinpractice.com/\" rel=\"nofollow noreferrer\"><em>Java Concurrency in Practice</em></a></li>\n</ul>\n<p>Note that (I don't know if this has always been true) <em>reference</em> assignment (i.e. <code>=</code>) is itself atomic (updating <em>primitive</em> 64-bit types like <code>long</code> or <code>double</code> may not be atomic; but updating a <em>reference</em> is always atomic, even if it's 64 bit) without explicitly using an <code>Atomic*</code>.<br />\nSee the <a href=\"https://docs.oracle.com/javase/specs/jls/se7/html/jls-17.html#jls-17.7\" rel=\"nofollow noreferrer\">Java Language Specification 3ed, <strong>Section 17.7</strong></a>.</p>\n"},{"tags":[],"owner":{"account_id":1818381,"reputation":1491,"user_id":1653004,"display_name":"Erik Helleren"},"down_vote_count":0,"up_vote_count":135,"is_accepted":false,"score":135,"last_activity_date":1667227426,"creation_date":1405448119,"answer_id":24765321,"question_id":3964211,"body_markdown":"An atomic reference is ideal to use when you need to update content (in an immutable object) accessed by multiple threads by replacing it with a new copy (of the immutable object) shared between these  threads. That is a super dense statement, so I will break it down a bit.\r\n\r\n  \r\nFirst, an immutable object is an object that is effectively not changed after construction. Frequently, an immutable object&#39;s methods return new instances of that same class. Some examples include the wrapper classes `Long` and `Double`, as well as `String`, just to name a few. (According to *Programming Concurrency on the JVM*, immutable objects are a critical part of modern concurrency.)\r\n\r\nNext, why is an `AtomicReference` better than a `volatile` object for sharing that shared value? A simple code example will show the difference.\r\n\r\n```java\r\nvolatile String sharedValue;\r\n\r\nstatic final Object lock = new Object();\r\n\r\nvoid modifyString() {\r\n    synchronized (lock) {\r\n        sharedValue = sharedValue + &quot;something to add&quot;;\r\n    }\r\n}\r\n```\r\n\r\nEvery time you want to modify the string referenced by that volatile field based on its current value, you first need to obtain a lock on that object.  This prevents some other thread from coming in during the meantime and changing the value in the middle of the new string concatenation. Then when your thread resumes, you clobber the work of the other thread. But honestly that code will work, it looks clean, and it would make most people happy.  \r\n\r\nSlight problem. It is slow. Especially if there is a lot of contention of that lock Object. Thats because most locks require an OS system call, and your thread will block and be context switched out of the CPU to make way for other processes.\r\n\r\nThe other option is to use an AtomicReference.\r\n\r\n```java\r\npublic static AtomicReference&lt;String&gt; shared = new AtomicReference&lt;&gt;();\r\n```\r\n```java\r\nString init = &quot;Inital Value&quot;;\r\nshared.set(init);\r\n//now we will modify that value\r\nboolean success = false;\r\nwhile (!success) {\r\n    String prevValue = shared.get();\r\n    // do all the work you need to\r\n    String newValue = shared.get() + &quot;let&#39;s add something&quot;;\r\n    // Compare and set\r\n    success = shared.compareAndSet(prevValue, newValue);\r\n}\r\n```\r\n\r\nNow why is this better? Honestly that code is a little less clean than before. But there is something really important that happens under the hood in AtomicRefrence, and that is compare and swap.\r\nIt is a single CPU instruction, not an OS call, that makes the switch happen. That is a single instruction on the CPU. And because there are no locks, there is no context switch in the case where the lock gets exercised which saves even more time!\r\n\r\nThe catch is, for AtomicReferences, this does not use a `.equals()` call, but instead an `==` comparison for the expected value. So make sure the expected is the actual object returned from get in the loop.","title":"When to use AtomicReference in Java?","body":"<p>An atomic reference is ideal to use when you need to update content (in an immutable object) accessed by multiple threads by replacing it with a new copy (of the immutable object) shared between these  threads. That is a super dense statement, so I will break it down a bit.</p>\n<p>First, an immutable object is an object that is effectively not changed after construction. Frequently, an immutable object's methods return new instances of that same class. Some examples include the wrapper classes <code>Long</code> and <code>Double</code>, as well as <code>String</code>, just to name a few. (According to <em>Programming Concurrency on the JVM</em>, immutable objects are a critical part of modern concurrency.)</p>\n<p>Next, why is an <code>AtomicReference</code> better than a <code>volatile</code> object for sharing that shared value? A simple code example will show the difference.</p>\n<pre class=\"lang-java prettyprint-override\"><code>volatile String sharedValue;\n\nstatic final Object lock = new Object();\n\nvoid modifyString() {\n    synchronized (lock) {\n        sharedValue = sharedValue + &quot;something to add&quot;;\n    }\n}\n</code></pre>\n<p>Every time you want to modify the string referenced by that volatile field based on its current value, you first need to obtain a lock on that object.  This prevents some other thread from coming in during the meantime and changing the value in the middle of the new string concatenation. Then when your thread resumes, you clobber the work of the other thread. But honestly that code will work, it looks clean, and it would make most people happy.</p>\n<p>Slight problem. It is slow. Especially if there is a lot of contention of that lock Object. Thats because most locks require an OS system call, and your thread will block and be context switched out of the CPU to make way for other processes.</p>\n<p>The other option is to use an AtomicReference.</p>\n<pre class=\"lang-java prettyprint-override\"><code>public static AtomicReference&lt;String&gt; shared = new AtomicReference&lt;&gt;();\n</code></pre>\n<pre class=\"lang-java prettyprint-override\"><code>String init = &quot;Inital Value&quot;;\nshared.set(init);\n//now we will modify that value\nboolean success = false;\nwhile (!success) {\n    String prevValue = shared.get();\n    // do all the work you need to\n    String newValue = shared.get() + &quot;let's add something&quot;;\n    // Compare and set\n    success = shared.compareAndSet(prevValue, newValue);\n}\n</code></pre>\n<p>Now why is this better? Honestly that code is a little less clean than before. But there is something really important that happens under the hood in AtomicRefrence, and that is compare and swap.\nIt is a single CPU instruction, not an OS call, that makes the switch happen. That is a single instruction on the CPU. And because there are no locks, there is no context switch in the case where the lock gets exercised which saves even more time!</p>\n<p>The catch is, for AtomicReferences, this does not use a <code>.equals()</code> call, but instead an <code>==</code> comparison for the expected value. So make sure the expected is the actual object returned from get in the loop.</p>\n"},{"tags":[],"owner":{"account_id":1765805,"reputation":5354,"user_id":1611714,"display_name":"Binita Bharati"},"down_vote_count":0,"up_vote_count":45,"is_accepted":false,"score":45,"last_activity_date":1591888512,"creation_date":1432893620,"answer_id":30526675,"question_id":3964211,"body_markdown":"Here is a use case for AtomicReference:\r\n\r\nConsider this class that acts as a number range, and uses individual AtmomicInteger variables to maintain lower and upper number bounds.\r\n\r\n    public class NumberRange {\r\n        // INVARIANT: lower &lt;= upper\r\n        private final AtomicInteger lower = new AtomicInteger(0);\r\n        private final AtomicInteger upper = new AtomicInteger(0);\r\n    \r\n        public void setLower(int i) {\r\n            // Warning -- unsafe check-then-act\r\n            if (i &gt; upper.get())\r\n                throw new IllegalArgumentException(\r\n                        &quot;can&#39;t set lower to &quot; + i + &quot; &gt; upper&quot;);\r\n            lower.set(i);\r\n        }\r\n    \r\n        public void setUpper(int i) {\r\n            // Warning -- unsafe check-then-act\r\n            if (i &lt; lower.get())\r\n                throw new IllegalArgumentException(\r\n                        &quot;can&#39;t set upper to &quot; + i + &quot; &lt; lower&quot;);\r\n            upper.set(i);\r\n        }\r\n    \r\n        public boolean isInRange(int i) {\r\n            return (i &gt;= lower.get() &amp;&amp; i &lt;= upper.get());\r\n        }\r\n    }\r\n\r\nBoth setLower and setUpper are check-then-act sequences, but they do not use sufficient locking to make them atomic. If the number range holds (0, 10), and one thread calls setLower(5) while another thread calls setUpper(4), with some unlucky timing both will pass the checks in the setters and both modifications will be applied. The result is that the range now holds (5, 4)an invalid state. So while the underlying AtomicIntegers are thread-safe, the composite class is not. This can be fixed by using a AtomicReference instead of using individual AtomicIntegers for upper and lower bounds.\r\n\r\n    public class CasNumberRange {\r\n        // Immutable\r\n        private static class IntPair {\r\n            final int lower;  // Invariant: lower &lt;= upper\r\n            final int upper;\r\n\r\n            private IntPair(int lower, int upper) {\r\n                this.lower = lower;\r\n                this.upper = upper;\r\n            }\r\n        }\r\n\r\n        private final AtomicReference&lt;IntPair&gt; values = \r\n                new AtomicReference&lt;IntPair&gt;(new IntPair(0, 0));\r\n\r\n        public int getLower() {\r\n            return values.get().lower;\r\n        }\r\n\r\n        public void setLower(int lower) {\r\n            while (true) {\r\n                IntPair oldv = values.get();\r\n                if (lower &gt; oldv.upper)\r\n                    throw new IllegalArgumentException(\r\n                        &quot;Can&#39;t set lower to &quot; + lower + &quot; &gt; upper&quot;);\r\n                IntPair newv = new IntPair(lower, oldv.upper);\r\n                if (values.compareAndSet(oldv, newv))\r\n                    return;\r\n            }\r\n        }\r\n\r\n        public int getUpper() {\r\n            return values.get().upper;\r\n        }\r\n\r\n        public void setUpper(int upper) {\r\n            while (true) {\r\n                IntPair oldv = values.get();\r\n                if (upper &lt; oldv.lower)\r\n                    throw new IllegalArgumentException(\r\n                        &quot;Can&#39;t set upper to &quot; + upper + &quot; &lt; lower&quot;);\r\n                IntPair newv = new IntPair(oldv.lower, upper);\r\n                if (values.compareAndSet(oldv, newv))\r\n                    return;\r\n            }\r\n        }\r\n    }\r\n\r\n","title":"When to use AtomicReference in Java?","body":"<p>Here is a use case for AtomicReference:</p>\n\n<p>Consider this class that acts as a number range, and uses individual AtmomicInteger variables to maintain lower and upper number bounds.</p>\n\n<pre><code>public class NumberRange {\n    // INVARIANT: lower &lt;= upper\n    private final AtomicInteger lower = new AtomicInteger(0);\n    private final AtomicInteger upper = new AtomicInteger(0);\n\n    public void setLower(int i) {\n        // Warning -- unsafe check-then-act\n        if (i &gt; upper.get())\n            throw new IllegalArgumentException(\n                    \"can't set lower to \" + i + \" &gt; upper\");\n        lower.set(i);\n    }\n\n    public void setUpper(int i) {\n        // Warning -- unsafe check-then-act\n        if (i &lt; lower.get())\n            throw new IllegalArgumentException(\n                    \"can't set upper to \" + i + \" &lt; lower\");\n        upper.set(i);\n    }\n\n    public boolean isInRange(int i) {\n        return (i &gt;= lower.get() &amp;&amp; i &lt;= upper.get());\n    }\n}\n</code></pre>\n\n<p>Both setLower and setUpper are check-then-act sequences, but they do not use sufficient locking to make them atomic. If the number range holds (0, 10), and one thread calls setLower(5) while another thread calls setUpper(4), with some unlucky timing both will pass the checks in the setters and both modifications will be applied. The result is that the range now holds (5, 4)an invalid state. So while the underlying AtomicIntegers are thread-safe, the composite class is not. This can be fixed by using a AtomicReference instead of using individual AtomicIntegers for upper and lower bounds.</p>\n\n<pre><code>public class CasNumberRange {\n    // Immutable\n    private static class IntPair {\n        final int lower;  // Invariant: lower &lt;= upper\n        final int upper;\n\n        private IntPair(int lower, int upper) {\n            this.lower = lower;\n            this.upper = upper;\n        }\n    }\n\n    private final AtomicReference&lt;IntPair&gt; values = \n            new AtomicReference&lt;IntPair&gt;(new IntPair(0, 0));\n\n    public int getLower() {\n        return values.get().lower;\n    }\n\n    public void setLower(int lower) {\n        while (true) {\n            IntPair oldv = values.get();\n            if (lower &gt; oldv.upper)\n                throw new IllegalArgumentException(\n                    \"Can't set lower to \" + lower + \" &gt; upper\");\n            IntPair newv = new IntPair(lower, oldv.upper);\n            if (values.compareAndSet(oldv, newv))\n                return;\n        }\n    }\n\n    public int getUpper() {\n        return values.get().upper;\n    }\n\n    public void setUpper(int upper) {\n        while (true) {\n            IntPair oldv = values.get();\n            if (upper &lt; oldv.lower)\n                throw new IllegalArgumentException(\n                    \"Can't set upper to \" + upper + \" &lt; lower\");\n            IntPair newv = new IntPair(oldv.lower, upper);\n            if (values.compareAndSet(oldv, newv))\n                return;\n        }\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":96438,"reputation":2390,"user_id":262114,"accept_rate":69,"display_name":"HamoriZ"},"down_vote_count":0,"up_vote_count":30,"is_accepted":false,"score":30,"last_activity_date":1434112242,"creation_date":1434112242,"answer_id":30803137,"question_id":3964211,"body_markdown":"You can use AtomicReference when applying optimistic locks. You have a shared object and you want to change it from more than 1 thread.\r\n\r\n 1. You can create a copy of the shared object\r\n 2. Modify the shared object\r\n 3. You need to check that the shared object is still the same as before - if yes, then update with the reference of the modified copy. \r\n\r\nAs other thread might have modified it and/can modify between these 2 steps. You need to do it in an atomic operation. this is where AtomicReference can help","title":"When to use AtomicReference in Java?","body":"<p>You can use AtomicReference when applying optimistic locks. You have a shared object and you want to change it from more than 1 thread.</p>\n\n<ol>\n<li>You can create a copy of the shared object</li>\n<li>Modify the shared object</li>\n<li>You need to check that the shared object is still the same as before - if yes, then update with the reference of the modified copy. </li>\n</ol>\n\n<p>As other thread might have modified it and/can modify between these 2 steps. You need to do it in an atomic operation. this is where AtomicReference can help</p>\n"},{"tags":[],"owner":{"account_id":6453072,"reputation":37996,"user_id":4999394,"accept_rate":98,"display_name":"Ravindra babu"},"down_vote_count":1,"up_vote_count":15,"is_accepted":false,"score":14,"last_activity_date":1680777576,"creation_date":1463724353,"answer_id":37339057,"question_id":3964211,"body_markdown":"*When do we use AtomicReference?*\r\n\r\n\r\n&gt;[AtomicReference][1] is flexible way to update the variable value atomically without use of synchronization. It supports lock-free thread-safe programming on single variables.\r\n\r\nThere are multiple ways of achieving Thread safety [concurrent][2] API.  Atomic variables is one of them.\r\n\r\n&gt;`Lock` objects support locking idioms that simplify many concurrent applications.\r\n\r\n&gt;`Executors` define a high-level API for launching and managing threads. \r\n\r\n&gt;*Concurrent collections* make it easier to manage large collections of data, and can greatly reduce the need for synchronization.\r\n\r\n&gt;*Atomic variables* have features that minimize synchronization and help avoid memory consistency errors.\r\n\r\n*Provide a simple example where AtomicReference should be used.*\r\n\r\nSample code with `AtomicReference`:\r\n\r\n    String name1 = &quot;Ravindra&quot;;\r\n    \r\n    AtomicReference&lt;String&gt; reference =\r\n        new AtomicReference&lt;String&gt;(name1 );\r\n    \r\n    String name2 = &quot;Ravindra Babu&quot;;\r\n    boolean result = reference.compareAndSet(name1 , name2 );\r\n    System.out.println(&quot;compareAndSet result: &quot; + result );\r\n\r\n*Is it needed to create objects in all multithreaded programs?*\r\n\r\nYou don&#39;t have to use `AtomicReference` in all multi threaded programs.\r\n\r\nIf you want to guard a single variable, use `AtomicReference`. If you want to guard a code block, use other constructs like `Lock` /`synchronized` etc.\r\n\r\n*Source: docs.oracle.com*\r\n\r\n  [1]: https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/atomic/AtomicReference.html\r\n  [2]: https://docs.oracle.com/javase/tutorial/essential/concurrency/highlevel.html","title":"When to use AtomicReference in Java?","body":"<p><em>When do we use AtomicReference?</em></p>\n<blockquote>\n<p><a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/atomic/AtomicReference.html\" rel=\"nofollow noreferrer\">AtomicReference</a> is flexible way to update the variable value atomically without use of synchronization. It supports lock-free thread-safe programming on single variables.</p>\n</blockquote>\n<p>There are multiple ways of achieving Thread safety <a href=\"https://docs.oracle.com/javase/tutorial/essential/concurrency/highlevel.html\" rel=\"nofollow noreferrer\">concurrent</a> API.  Atomic variables is one of them.</p>\n<blockquote>\n<p><code>Lock</code> objects support locking idioms that simplify many concurrent applications.</p>\n</blockquote>\n<blockquote>\n<p><code>Executors</code> define a high-level API for launching and managing threads.</p>\n</blockquote>\n<blockquote>\n<p><em>Concurrent collections</em> make it easier to manage large collections of data, and can greatly reduce the need for synchronization.</p>\n</blockquote>\n<blockquote>\n<p><em>Atomic variables</em> have features that minimize synchronization and help avoid memory consistency errors.</p>\n</blockquote>\n<p><em>Provide a simple example where AtomicReference should be used.</em></p>\n<p>Sample code with <code>AtomicReference</code>:</p>\n<pre><code>String name1 = &quot;Ravindra&quot;;\n\nAtomicReference&lt;String&gt; reference =\n    new AtomicReference&lt;String&gt;(name1 );\n\nString name2 = &quot;Ravindra Babu&quot;;\nboolean result = reference.compareAndSet(name1 , name2 );\nSystem.out.println(&quot;compareAndSet result: &quot; + result );\n</code></pre>\n<p><em>Is it needed to create objects in all multithreaded programs?</em></p>\n<p>You don't have to use <code>AtomicReference</code> in all multi threaded programs.</p>\n<p>If you want to guard a single variable, use <code>AtomicReference</code>. If you want to guard a code block, use other constructs like <code>Lock</code> /<code>synchronized</code> etc.</p>\n<p><em>Source: docs.oracle.com</em></p>\n"},{"tags":[],"owner":{"account_id":197528,"reputation":11240,"user_id":441662,"accept_rate":80,"display_name":"Benny Bottema"},"down_vote_count":1,"up_vote_count":18,"is_accepted":false,"score":17,"last_activity_date":1524474022,"creation_date":1524474022,"answer_id":49977070,"question_id":3964211,"body_markdown":"Here&#39;s a very simple use case and has nothing to do with thread safety. \r\n\r\n**To share an object between lambda invocations, the `AtomicReference` is an option**:\r\n\r\n\tpublic void doSomethingUsingLambdas() {\r\n\r\n\t\tAtomicReference&lt;YourObject&gt; yourObjectRef = new AtomicReference&lt;&gt;();\r\n\r\n\t\tsoSomethingThatTakesALambda(() -&gt; {\r\n\t\t\tyourObjectRef.set(youObject);\r\n\t\t});\r\n\r\n\t\tsoSomethingElseThatTakesALambda(() -&gt; {\r\n\t\t\tYourObject yourObject = yourObjectRef.get();\r\n\t\t});\r\n\t}\r\n\r\nI&#39;m not saying this is good design or anything (it&#39;s just a trivial example), but if you have have the case where you need to share an object between lambda invocations, the `AtomicReference` is an option.\r\n\r\nIn fact you can use any object that holds a reference, even a Collection that has only one item. However, the AtomicReference is a perfect fit.","title":"When to use AtomicReference in Java?","body":"<p>Here's a very simple use case and has nothing to do with thread safety. </p>\n\n<p><strong>To share an object between lambda invocations, the <code>AtomicReference</code> is an option</strong>:</p>\n\n<pre><code>public void doSomethingUsingLambdas() {\n\n    AtomicReference&lt;YourObject&gt; yourObjectRef = new AtomicReference&lt;&gt;();\n\n    soSomethingThatTakesALambda(() -&gt; {\n        yourObjectRef.set(youObject);\n    });\n\n    soSomethingElseThatTakesALambda(() -&gt; {\n        YourObject yourObject = yourObjectRef.get();\n    });\n}\n</code></pre>\n\n<p>I'm not saying this is good design or anything (it's just a trivial example), but if you have have the case where you need to share an object between lambda invocations, the <code>AtomicReference</code> is an option.</p>\n\n<p>In fact you can use any object that holds a reference, even a Collection that has only one item. However, the AtomicReference is a perfect fit.</p>\n"},{"tags":[],"owner":{"account_id":13684630,"reputation":101,"user_id":9874027,"display_name":"sankar banerjee"},"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1660546346,"creation_date":1527746062,"answer_id":50617534,"question_id":3964211,"body_markdown":"I won&#39;t talk much. Already my respected fellow friends have given their valuable input. **The full fledged running code at the last of this blog should remove any confusion. It&#39;s about a movie seat booking small program in multi-threaded scenario.**\r\n\r\nSome important elementary facts are as follows.\r\n1&gt; Different threads can only contend for instance and static member variables in the heap space.\r\n2&gt; Volatile read or write are completely atomic and serialized/happens before and only done from memory. By saying this I mean that any read will follow the previous write in memory. And any write will follow the previous read from memory. So any thread working with a volatile will always see the most up-to-date value.\r\n**AtomicReference uses this property of volatile.**\r\n\r\nFollowing are some of the source code of AtomicReference.\r\nAtomicReference refers to an object reference. This reference is a volatile member variable in the AtomicReference instance as below.\r\n\r\n    private volatile V value;\r\n\r\nget() simply returns the latest value of the variable (as volatiles do in a &quot;happens before&quot; manner).\r\n\r\n    public final V get()\r\n\r\n**Following is the most important method of AtomicReference.**\r\n\r\n    public final boolean  compareAndSet(V expect, V update) {\r\n            return unsafe.compareAndSwapObject(this, valueOffset, expect, update);\r\n    }\r\n\r\nThe compareAndSet(expect,update) method calls the compareAndSwapObject() method of the unsafe class of Java. This method call of unsafe invokes the native call, which invokes a single instruction to the processor. &quot;expect&quot; and &quot;update&quot; each reference an object.\r\n\r\nIf and only if the AtomicReference instance member variable &quot;value&quot; refers to the same object is referred to by &quot;expect&quot;, &quot;update&quot; is assigned to this instance variable now, and &quot;true&quot; is returned. Or else, false is returned. The whole thing is done atomically. No other thread can intercept in between.\r\nAs this is a single processor operation (magic of modern computer architecture), it&#39;s often faster than using a synchronized block. But **remember that when multiple variables need to be updated atomically, AtomicReference won&#39;t help.**\r\n\r\nI would like to add a full fledged running code, which can be run in eclipse. It would clear many confusion. Here 22 users (MyTh threads) are trying to book 20 seats. Following is the code snippet followed by the full code.\r\n\r\nCode snippet where 22 users are trying to book 20 seats.\r\n\r\n    for (int i = 0; i &lt; 20; i++) {// 20 seats\r\n        seats.add(new AtomicReference&lt;Integer&gt;());\r\n    }\r\n    Thread[] ths = new Thread[22];// 22 users\r\n    for (int i = 0; i &lt; ths.length; i++) {\r\n        ths[i] = new MyTh(seats, i);\r\n        ths[i].start();\r\n    }\r\n\r\nFollowing is the full running code.\r\n    \r\n    import java.util.ArrayList;\r\n    import java.util.List;\r\n    import java.util.concurrent.ThreadLocalRandom;\r\n    import java.util.concurrent.atomic.AtomicInteger;\r\n    import java.util.concurrent.atomic.AtomicReference;\r\n    \r\n    public class Solution {\r\n    \r\n    \tstatic List&lt;AtomicReference&lt;Integer&gt;&gt; seats;// Movie seats numbered as per\r\n    \t\t\t\t\t\t\t\t\t\t\t\t// list index\r\n    \r\n    \tpublic static void main(String[] args) throws InterruptedException {\r\n    \t\t// TODO Auto-generated method stub\r\n    \t\tseats = new ArrayList&lt;&gt;();\r\n    \t\tfor (int i = 0; i &lt; 20; i++) {// 20 seats\r\n    \t\t\tseats.add(new AtomicReference&lt;Integer&gt;());\r\n    \t\t}\r\n    \t\tThread[] ths = new Thread[22];// 22 users\r\n    \t\tfor (int i = 0; i &lt; ths.length; i++) {\r\n    \t\t\tths[i] = new MyTh(seats, i);\r\n    \t\t\tths[i].start();\r\n    \t\t}\r\n    \t\tfor (Thread t : ths) {\r\n    \t\t\tt.join();\r\n    \t\t}\r\n    \t\tfor (AtomicReference&lt;Integer&gt; seat : seats) {\r\n    \t\t\tSystem.out.print(&quot; &quot; + seat.get());\r\n    \t\t}\r\n    \t}\r\n    \r\n    \t/**\r\n    \t * id is the id of the user\r\n    \t * \r\n    \t * @author sankbane\r\n    \t *\r\n    \t */\r\n    \tstatic class MyTh extends Thread {// each thread is a user\r\n    \t\tstatic AtomicInteger full = new AtomicInteger(0);\r\n    \t\tList&lt;AtomicReference&lt;Integer&gt;&gt; l;//seats\r\n    \t\tint id;//id of the users\r\n    \t\tint seats;\r\n    \r\n    \t\tpublic MyTh(List&lt;AtomicReference&lt;Integer&gt;&gt; list, int userId) {\r\n    \t\t\tl = list;\r\n    \t\t\tthis.id = userId;\r\n    \t\t\tseats = list.size();\r\n    \t\t}\r\n    \r\n    \t\t@Override\r\n    \t\tpublic void run() {\r\n    \t\t\tboolean reserved = false;\r\n    \t\t\ttry {\r\n    \t\t\t\twhile (!reserved &amp;&amp; full.get() &lt; seats) {\r\n    \t\t\t\t\tThread.sleep(50);\r\n    \t\t\t\t\tint r = ThreadLocalRandom.current().nextInt(0, seats);// excludes\r\n    \t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t// seats\r\n    \t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t//\r\n    \t\t\t\t\tAtomicReference&lt;Integer&gt; el = l.get(r);\r\n    \t\t\t\t\treserved = el.compareAndSet(null, id);// null means no user\r\n    \t\t\t\t\t\t\t\t\t\t\t\t\t\t\t// has reserved this\r\n    \t\t\t\t\t\t\t\t\t\t\t\t\t\t\t// seat\r\n    \t\t\t\t\tif (reserved)\r\n    \t\t\t\t\t\tfull.getAndIncrement();\r\n    \t\t\t\t}\r\n    \t\t\t\tif (!reserved &amp;&amp; full.get() == seats)\r\n    \t\t\t\t\tSystem.out.println(&quot;user &quot; + id + &quot; did not get a seat&quot;);\r\n    \t\t\t} catch (InterruptedException ie) {\r\n    \t\t\t\t// log it\r\n    \t\t\t}\r\n    \t\t}\r\n    \t}\r\n    \r\n    }    \r\n\r\n\r\n","title":"When to use AtomicReference in Java?","body":"<p>I won't talk much. Already my respected fellow friends have given their valuable input. <strong>The full fledged running code at the last of this blog should remove any confusion. It's about a movie seat booking small program in multi-threaded scenario.</strong></p>\n<p>Some important elementary facts are as follows.\n1&gt; Different threads can only contend for instance and static member variables in the heap space.\n2&gt; Volatile read or write are completely atomic and serialized/happens before and only done from memory. By saying this I mean that any read will follow the previous write in memory. And any write will follow the previous read from memory. So any thread working with a volatile will always see the most up-to-date value.\n<strong>AtomicReference uses this property of volatile.</strong></p>\n<p>Following are some of the source code of AtomicReference.\nAtomicReference refers to an object reference. This reference is a volatile member variable in the AtomicReference instance as below.</p>\n<pre><code>private volatile V value;\n</code></pre>\n<p>get() simply returns the latest value of the variable (as volatiles do in a &quot;happens before&quot; manner).</p>\n<pre><code>public final V get()\n</code></pre>\n<p><strong>Following is the most important method of AtomicReference.</strong></p>\n<pre><code>public final boolean  compareAndSet(V expect, V update) {\n        return unsafe.compareAndSwapObject(this, valueOffset, expect, update);\n}\n</code></pre>\n<p>The compareAndSet(expect,update) method calls the compareAndSwapObject() method of the unsafe class of Java. This method call of unsafe invokes the native call, which invokes a single instruction to the processor. &quot;expect&quot; and &quot;update&quot; each reference an object.</p>\n<p>If and only if the AtomicReference instance member variable &quot;value&quot; refers to the same object is referred to by &quot;expect&quot;, &quot;update&quot; is assigned to this instance variable now, and &quot;true&quot; is returned. Or else, false is returned. The whole thing is done atomically. No other thread can intercept in between.\nAs this is a single processor operation (magic of modern computer architecture), it's often faster than using a synchronized block. But <strong>remember that when multiple variables need to be updated atomically, AtomicReference won't help.</strong></p>\n<p>I would like to add a full fledged running code, which can be run in eclipse. It would clear many confusion. Here 22 users (MyTh threads) are trying to book 20 seats. Following is the code snippet followed by the full code.</p>\n<p>Code snippet where 22 users are trying to book 20 seats.</p>\n<pre><code>for (int i = 0; i &lt; 20; i++) {// 20 seats\n    seats.add(new AtomicReference&lt;Integer&gt;());\n}\nThread[] ths = new Thread[22];// 22 users\nfor (int i = 0; i &lt; ths.length; i++) {\n    ths[i] = new MyTh(seats, i);\n    ths[i].start();\n}\n</code></pre>\n<p>Following is the full running code.</p>\n<pre><code>import java.util.ArrayList;\nimport java.util.List;\nimport java.util.concurrent.ThreadLocalRandom;\nimport java.util.concurrent.atomic.AtomicInteger;\nimport java.util.concurrent.atomic.AtomicReference;\n\npublic class Solution {\n\n    static List&lt;AtomicReference&lt;Integer&gt;&gt; seats;// Movie seats numbered as per\n                                                // list index\n\n    public static void main(String[] args) throws InterruptedException {\n        // TODO Auto-generated method stub\n        seats = new ArrayList&lt;&gt;();\n        for (int i = 0; i &lt; 20; i++) {// 20 seats\n            seats.add(new AtomicReference&lt;Integer&gt;());\n        }\n        Thread[] ths = new Thread[22];// 22 users\n        for (int i = 0; i &lt; ths.length; i++) {\n            ths[i] = new MyTh(seats, i);\n            ths[i].start();\n        }\n        for (Thread t : ths) {\n            t.join();\n        }\n        for (AtomicReference&lt;Integer&gt; seat : seats) {\n            System.out.print(&quot; &quot; + seat.get());\n        }\n    }\n\n    /**\n     * id is the id of the user\n     * \n     * @author sankbane\n     *\n     */\n    static class MyTh extends Thread {// each thread is a user\n        static AtomicInteger full = new AtomicInteger(0);\n        List&lt;AtomicReference&lt;Integer&gt;&gt; l;//seats\n        int id;//id of the users\n        int seats;\n\n        public MyTh(List&lt;AtomicReference&lt;Integer&gt;&gt; list, int userId) {\n            l = list;\n            this.id = userId;\n            seats = list.size();\n        }\n\n        @Override\n        public void run() {\n            boolean reserved = false;\n            try {\n                while (!reserved &amp;&amp; full.get() &lt; seats) {\n                    Thread.sleep(50);\n                    int r = ThreadLocalRandom.current().nextInt(0, seats);// excludes\n                                                                            // seats\n                                                                            //\n                    AtomicReference&lt;Integer&gt; el = l.get(r);\n                    reserved = el.compareAndSet(null, id);// null means no user\n                                                            // has reserved this\n                                                            // seat\n                    if (reserved)\n                        full.getAndIncrement();\n                }\n                if (!reserved &amp;&amp; full.get() == seats)\n                    System.out.println(&quot;user &quot; + id + &quot; did not get a seat&quot;);\n            } catch (InterruptedException ie) {\n                // log it\n            }\n        }\n    }\n\n}    \n</code></pre>\n"}],"owner":{"account_id":660315,"reputation":4363,"user_id":479889,"display_name":"Chintu"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":280648,"favorite_count":0,"down_vote_count":0,"up_vote_count":436,"accepted_answer_id":3964249,"answer_count":7,"score":436,"last_activity_date":1691675539,"creation_date":1287443724,"question_id":3964211,"body_markdown":"When do we use [`AtomicReference`][1]?\r\n\r\nIs it needed to create objects in all multithreaded programs?\r\n\r\nProvide a simple example where AtomicReference should be used.\r\n\r\n\r\n  [1]: https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/concurrent/atomic/AtomicReference.html","title":"When to use AtomicReference in Java?","body":"<p>When do we use <a href=\"https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/concurrent/atomic/AtomicReference.html\" rel=\"noreferrer\"><code>AtomicReference</code></a>?</p>\n\n<p>Is it needed to create objects in all multithreaded programs?</p>\n\n<p>Provide a simple example where AtomicReference should be used.</p>\n"},{"tags":["java","dynamic-proxy"],"answers":[{"tags":[],"owner":{"account_id":50098,"reputation":32598,"user_id":149311,"accept_rate":80,"display_name":"Thomas Jung"},"down_vote_count":0,"up_vote_count":11,"is_accepted":true,"score":11,"last_activity_date":1284534077,"creation_date":1284533719,"answer_id":3715331,"question_id":3715298,"body_markdown":"You can use a dynamic proxy. As long as the checked exceptions are part of the interface you can throw the checked exceptions from the invocation handler. Otherwise this is illegal and will create an UndeclaredThrowableException that wraps the thrown checked exception.\r\n\r\n    interface A{\r\n        void x() throws IOException;\r\n    }\r\n\r\n    A proxy = (A) newProxyInstance(classLoader, new Class&lt;?&gt;[]{A.class}, \r\n      new InvocationHandler() {      \r\n            @Override\r\n            public Object invoke(Object arg0, Method arg1, Object[] arg2) \r\n                throws Throwable {\r\n                throw new IOException();\r\n            }\r\n       }\r\n    );\r\n    proxy.x();\r\n\r\nOutput:\r\n\r\n    Exception in thread &quot;main&quot; java.io.IOException\r\n\tat X$1.invoke(X.java:19)\r\n\tat $Proxy0.x(Unknown Source)\r\n\tat X.main(X.java:22)\r\n\r\nWith an undeclared checked exception for interface A:\r\n\r\n    interface A{\r\n        void x();\r\n    }\r\n\r\n    Exception in thread &quot;main&quot; java.lang.reflect.UndeclaredThrowableException\r\n\t  at $Proxy0.x(Unknown Source)\r\n\t  at X.main(X.java:22)\r\n    Caused by: java.io.IOException\r\n\t  at X$1.invoke(X.java:19)\r\n\t  ... 2 more\r\n","title":"Dynamic proxy and checked exceptions","body":"<p>You can use a dynamic proxy. As long as the checked exceptions are part of the interface you can throw the checked exceptions from the invocation handler. Otherwise this is illegal and will create an UndeclaredThrowableException that wraps the thrown checked exception.</p>\n\n<pre><code>interface A{\n    void x() throws IOException;\n}\n\nA proxy = (A) newProxyInstance(classLoader, new Class&lt;?&gt;[]{A.class}, \n  new InvocationHandler() {      \n        @Override\n        public Object invoke(Object arg0, Method arg1, Object[] arg2) \n            throws Throwable {\n            throw new IOException();\n        }\n   }\n);\nproxy.x();\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>Exception in thread \"main\" java.io.IOException\nat X$1.invoke(X.java:19)\nat $Proxy0.x(Unknown Source)\nat X.main(X.java:22)\n</code></pre>\n\n<p>With an undeclared checked exception for interface A:</p>\n\n<pre><code>interface A{\n    void x();\n}\n\nException in thread \"main\" java.lang.reflect.UndeclaredThrowableException\n  at $Proxy0.x(Unknown Source)\n  at X.main(X.java:22)\nCaused by: java.io.IOException\n  at X$1.invoke(X.java:19)\n  ... 2 more\n</code></pre>\n"},{"tags":[],"owner":{"account_id":43412,"reputation":23624,"user_id":126916,"accept_rate":91,"display_name":"Abhinav Sarkar"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1284534177,"creation_date":1284534177,"answer_id":3715379,"question_id":3715298,"body_markdown":"A dynamic proxy can throw checked exception if the exception is declared in the signature of the method of the interface it is proxying. From the Sun&#39;s [Dynamic Proxy reference][1]:\n\n&gt; If an exception is thrown by the invoke method, it will be also thrown by the method invocation on the proxy instance. \n&gt;\n&gt; The exception&#39;s type must be assignable to either any of the exception types declared in the signature of the interface method or to the unchecked exception types `java.lang.RuntimeException` or `java.lang.Error`. \n&gt;\n&gt; If a checked exception is thrown by invoke that is not assignable to any of the exception types declared in the throws clause of the interface method, then an `UndeclaredThrowableException` will be thrown by the method invocation on the proxy instance. The `UndeclaredThrowableException` will be constructed with the exception that was thrown by the invoke method. \n\n\n  [1]: http://download.oracle.com/javase/1.5.0/docs/guide/reflection/proxy.html","title":"Dynamic proxy and checked exceptions","body":"<p>A dynamic proxy can throw checked exception if the exception is declared in the signature of the method of the interface it is proxying. From the Sun's <a href=\"http://download.oracle.com/javase/1.5.0/docs/guide/reflection/proxy.html\" rel=\"nofollow noreferrer\">Dynamic Proxy reference</a>:</p>\n<blockquote>\n<p>If an exception is thrown by the invoke method, it will be also thrown by the method invocation on the proxy instance.</p>\n<p>The exception's type must be assignable to either any of the exception types declared in the signature of the interface method or to the unchecked exception types <code>java.lang.RuntimeException</code> or <code>java.lang.Error</code>.</p>\n<p>If a checked exception is thrown by invoke that is not assignable to any of the exception types declared in the throws clause of the interface method, then an <code>UndeclaredThrowableException</code> will be thrown by the method invocation on the proxy instance. The <code>UndeclaredThrowableException</code> will be constructed with the exception that was thrown by the invoke method.</p>\n</blockquote>\n"},{"tags":[],"owner":{"account_id":241370,"reputation":2442,"user_id":512135,"accept_rate":90,"display_name":"rvange"},"down_vote_count":0,"up_vote_count":21,"is_accepted":false,"score":21,"last_activity_date":1691675409,"creation_date":1337774999,"answer_id":10719613,"question_id":3715298,"body_markdown":"What you probably are looking for is this, as Konrad mentions above:\r\n\r\n    public Object invoke(Object proxy, Method method, Object[] args) throws Throwable {\r\n        try {\r\n            Object value = method.invoke(bean, args);\r\n            return value;\r\n        }\r\n        catch (InvocationTargetException ex) {\r\n            throw ex.getCause();\r\n        }\r\n    }\r\n\r\nSource: https://web.archive.org/web/20120130204437/http://benpryor.com/blog/2006/08/15/java-dynamic-proxies-and-invocationtargetexception/","title":"Dynamic proxy and checked exceptions","body":"<p>What you probably are looking for is this, as Konrad mentions above:</p>\n<pre><code>public Object invoke(Object proxy, Method method, Object[] args) throws Throwable {\n    try {\n        Object value = method.invoke(bean, args);\n        return value;\n    }\n    catch (InvocationTargetException ex) {\n        throw ex.getCause();\n    }\n}\n</code></pre>\n<p>Source: <a href=\"https://web.archive.org/web/20120130204437/http://benpryor.com/blog/2006/08/15/java-dynamic-proxies-and-invocationtargetexception/\" rel=\"nofollow noreferrer\">https://web.archive.org/web/20120130204437/http://benpryor.com/blog/2006/08/15/java-dynamic-proxies-and-invocationtargetexception/</a></p>\n"}],"owner":{"account_id":103731,"reputation":53285,"user_id":277683,"accept_rate":68,"display_name":"Konrad Garus"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":10623,"favorite_count":0,"down_vote_count":0,"up_vote_count":11,"accepted_answer_id":3715331,"answer_count":3,"score":11,"last_activity_date":1691675409,"creation_date":1284533410,"question_id":3715298,"body_markdown":"How can I make my dynamic proxy throw checked exceptions?\r\n\r\nI need a transparent wrapper for an interface which sometimes throws checked exceptions such as `IOException`. Is it possible without 3rd party AOP or writing my own proxy? Modifying all 20 methods of the interface by hand is not an option either.","title":"Dynamic proxy and checked exceptions","body":"<p>How can I make my dynamic proxy throw checked exceptions?</p>\n\n<p>I need a transparent wrapper for an interface which sometimes throws checked exceptions such as <code>IOException</code>. Is it possible without 3rd party AOP or writing my own proxy? Modifying all 20 methods of the interface by hand is not an option either.</p>\n"},{"tags":["java","spring","hibernate","spring-boot","jackson"],"answers":[{"tags":[],"owner":{"account_id":98662,"reputation":36,"user_id":2255651,"display_name":"Nikhil Yekhe"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1515168816,"creation_date":1515168816,"answer_id":48117323,"question_id":48117059,"body_markdown":"This is due to the hibernate session closed before the lazy initialization kicked in. \r\n\r\nThe solution is explained well at this answer below.\r\nhttps://stackoverflow.com/questions/21708339/avoid-jackson-serialization-on-non-fetched-lazy-objects/21760361#21760361\r\n","title":"Could not write JSON: failed to lazily initialize a collection of role","body":"<p>This is due to the hibernate session closed before the lazy initialization kicked in. </p>\n\n<p>The solution is explained well at this answer below.\n<a href=\"https://stackoverflow.com/questions/21708339/avoid-jackson-serialization-on-non-fetched-lazy-objects/21760361#21760361\">Avoid Jackson serialization on non fetched lazy objects</a></p>\n"},{"tags":[],"owner":{"account_id":8801246,"reputation":31,"user_id":6577317,"display_name":"conacry"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1515172625,"creation_date":1515172625,"answer_id":48118306,"question_id":48117059,"body_markdown":"In my project I came across the same problem as yours. The problem is that by the time of reading the data &quot;one to many&quot; the session has already been closed. To get all the data, you need to explicitly initialize or use the transaction. I used an explicit initialization. \r\nYou need to add a line in the DAO:\r\n\r\n    Hibernate.initialize(supplier.getIngredients());\r\n\r\nAfter that, Hibernate will load all the data from the database. To avoid generating an exception when serializing to JSON, I add the `@JsonIgnore` annotation in the one-to-many model field.\r\n\r\nHere is an example of my code:\r\n\r\n1.Model\r\n\r\n    @OneToMany(mappedBy = &quot;commandByEv&quot;, fetch = FetchType.LAZY)\r\n    @JsonIgnore\r\n    private Set&lt;Evaluation&gt; evaluations;\r\n2. DAO\r\n\r\n    public Command getCommand(long id) {\r\n    Session session = sessionFactory.getCurrentSession();\r\n    Evaluation evaluation = session.get(Evaluation.class, id);\r\n    Hibernate.initialize(evaluation.getCommand());\r\n    return evaluation.getCommand();\r\n    }\r\n\r\n","title":"Could not write JSON: failed to lazily initialize a collection of role","body":"<p>In my project I came across the same problem as yours. The problem is that by the time of reading the data \"one to many\" the session has already been closed. To get all the data, you need to explicitly initialize or use the transaction. I used an explicit initialization. \nYou need to add a line in the DAO:</p>\n\n<pre><code>Hibernate.initialize(supplier.getIngredients());\n</code></pre>\n\n<p>After that, Hibernate will load all the data from the database. To avoid generating an exception when serializing to JSON, I add the <code>@JsonIgnore</code> annotation in the one-to-many model field.</p>\n\n<p>Here is an example of my code:</p>\n\n<p>1.Model</p>\n\n<pre><code>@OneToMany(mappedBy = \"commandByEv\", fetch = FetchType.LAZY)\n@JsonIgnore\nprivate Set&lt;Evaluation&gt; evaluations;\n</code></pre>\n\n<p>2. DAO</p>\n\n<pre><code>public Command getCommand(long id) {\nSession session = sessionFactory.getCurrentSession();\nEvaluation evaluation = session.get(Evaluation.class, id);\nHibernate.initialize(evaluation.getCommand());\nreturn evaluation.getCommand();\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2080660,"reputation":6691,"user_id":1852714,"accept_rate":8,"display_name":"Angelo Immediata"},"down_vote_count":0,"up_vote_count":15,"is_accepted":true,"score":15,"last_activity_date":1515425591,"creation_date":1515421029,"answer_id":48152153,"question_id":48117059,"body_markdown":"This is the normal behaviour of Hibernate and Jackson Marshaller\r\nBasically you want to have the following: a JSON with all Supplier object details... included the Ingredients. \r\n\r\nPlease note that in this case you must be very carefull because you can have a cyclic reference when you try to create the JSON itself so you should use also [`JsonIgnore`][1] annotation\r\n\r\nThe first thing you must do is to load the Supplier and all its details (ingredients included). \r\n\r\nHow can you do it? By using several strategies... let&#39;s use the [`Hibernate.initialize`][2]. This **must be used before the closing of hibernate session** that is in the DAO (or repository) implementation (basically where you use the hibernate session). \r\n\r\nSo in this case (I assume to use Hibernate) in my repository class I should write something like this:\r\n\r\n    public Supplier findByKey(Long id)\r\n    {\r\n    \tSupplier result = (Supplier) getSession().find(Supplier.class, id);\r\n    \tHibernate.initialize(result.getIngredients());\r\n    \treturn result;\r\n    }\r\n\r\nNow you have the `Supplier` object with all its own details (`Ingredients` too)\r\nNow in your service you can do what you did that is:\r\n\r\n    @RequestMapping(value = &quot;/{supplierId:[0-9]+}&quot;, method = RequestMethod.GET)\r\n    @ResponseStatus(value = HttpStatus.OK)\r\n    @ResponseBody\r\n    public SupplierObject get(@PathVariable Long supplierId) \r\n    {\r\n    \tSupplier supplier = supplierService.get(supplierId);\r\n    \tSupplierObject supplierObject = new SupplierObject (supplier);\r\n    \treturn SupplierObject;\r\n    }\r\n\r\nIn this way Jackson is able in writing the JSON `but` let&#39;s give a look to the `Ingredient` object.. it has the following property:\r\n\r\n    @ManyToMany(mappedBy = &quot;ingredients&quot;)\r\n    @OrderBy(&quot;created DESC&quot;)\r\n    @BatchSize(size = 1000)\r\n    private List&lt;Supplier&gt; suppliers = new ArrayList&lt;&gt;();\r\n\r\nWhat will happen when Jackson tries to create the JSON? It will access to the each element inside the `List&lt;Ingredient&gt;` and it will try to create a JSON for this one too.... also for the suppliers list and this is a cyclic reference... so you must avoid it and you can avoid it by using the JsonIgnore annotation. For example you may write your `Ingredient` entity class in this way:\r\n\r\n    @JsonIgnoreProperties(value= {&quot;suppliers&quot;})\r\n    public class Ingredient implements Serializable\r\n    {\r\n    ......\r\n    }\r\n\r\nIn this way you:\r\n\r\n - load the supplier object with all the related ingredient\r\n - avoid a cyclic reference when you try to create the JSON itself\r\n\r\nIn any case I would suggest to you to create specific DTO (or VO) object to use for marshalling and unmarshalling JSONs\r\n\r\nI hope this is usefull\r\n\r\nAngelo\r\n\r\n\r\n  [1]: https://fasterxml.github.io/jackson-annotations/javadoc/2.5/com/fasterxml/jackson/annotation/JsonIgnore.html\r\n  [2]: https://docs.jboss.org/hibernate/orm/5.2/javadocs/org/hibernate/Hibernate.html#initialize-java.lang.Object-","title":"Could not write JSON: failed to lazily initialize a collection of role","body":"<p>This is the normal behaviour of Hibernate and Jackson Marshaller\nBasically you want to have the following: a JSON with all Supplier object details... included the Ingredients. </p>\n\n<p>Please note that in this case you must be very carefull because you can have a cyclic reference when you try to create the JSON itself so you should use also <a href=\"https://fasterxml.github.io/jackson-annotations/javadoc/2.5/com/fasterxml/jackson/annotation/JsonIgnore.html\" rel=\"noreferrer\"><code>JsonIgnore</code></a> annotation</p>\n\n<p>The first thing you must do is to load the Supplier and all its details (ingredients included). </p>\n\n<p>How can you do it? By using several strategies... let's use the <a href=\"https://docs.jboss.org/hibernate/orm/5.2/javadocs/org/hibernate/Hibernate.html#initialize-java.lang.Object-\" rel=\"noreferrer\"><code>Hibernate.initialize</code></a>. This <strong>must be used before the closing of hibernate session</strong> that is in the DAO (or repository) implementation (basically where you use the hibernate session). </p>\n\n<p>So in this case (I assume to use Hibernate) in my repository class I should write something like this:</p>\n\n<pre><code>public Supplier findByKey(Long id)\n{\n    Supplier result = (Supplier) getSession().find(Supplier.class, id);\n    Hibernate.initialize(result.getIngredients());\n    return result;\n}\n</code></pre>\n\n<p>Now you have the <code>Supplier</code> object with all its own details (<code>Ingredients</code> too)\nNow in your service you can do what you did that is:</p>\n\n<pre><code>@RequestMapping(value = \"/{supplierId:[0-9]+}\", method = RequestMethod.GET)\n@ResponseStatus(value = HttpStatus.OK)\n@ResponseBody\npublic SupplierObject get(@PathVariable Long supplierId) \n{\n    Supplier supplier = supplierService.get(supplierId);\n    SupplierObject supplierObject = new SupplierObject (supplier);\n    return SupplierObject;\n}\n</code></pre>\n\n<p>In this way Jackson is able in writing the JSON <code>but</code> let's give a look to the <code>Ingredient</code> object.. it has the following property:</p>\n\n<pre><code>@ManyToMany(mappedBy = \"ingredients\")\n@OrderBy(\"created DESC\")\n@BatchSize(size = 1000)\nprivate List&lt;Supplier&gt; suppliers = new ArrayList&lt;&gt;();\n</code></pre>\n\n<p>What will happen when Jackson tries to create the JSON? It will access to the each element inside the <code>List&lt;Ingredient&gt;</code> and it will try to create a JSON for this one too.... also for the suppliers list and this is a cyclic reference... so you must avoid it and you can avoid it by using the JsonIgnore annotation. For example you may write your <code>Ingredient</code> entity class in this way:</p>\n\n<pre><code>@JsonIgnoreProperties(value= {\"suppliers\"})\npublic class Ingredient implements Serializable\n{\n......\n}\n</code></pre>\n\n<p>In this way you:</p>\n\n<ul>\n<li>load the supplier object with all the related ingredient</li>\n<li>avoid a cyclic reference when you try to create the JSON itself</li>\n</ul>\n\n<p>In any case I would suggest to you to create specific DTO (or VO) object to use for marshalling and unmarshalling JSONs</p>\n\n<p>I hope this is usefull</p>\n\n<p>Angelo</p>\n"},{"tags":[],"owner":{"account_id":2325826,"reputation":13951,"user_id":2040375,"accept_rate":98,"display_name":"Majid"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1536849908,"creation_date":1536849908,"answer_id":52316226,"question_id":48117059,"body_markdown":"Just add `@JsonIgnore` after `@oneToMany` in your model class.","title":"Could not write JSON: failed to lazily initialize a collection of role","body":"<p>Just add <code>@JsonIgnore</code> after <code>@oneToMany</code> in your model class.</p>\n"},{"tags":[],"owner":{"account_id":11913998,"reputation":20327,"user_id":8718377,"display_name":"veben"},"down_vote_count":1,"up_vote_count":16,"is_accepted":false,"score":15,"last_activity_date":1665577361,"creation_date":1571043201,"answer_id":58373199,"question_id":48117059,"body_markdown":"You have some solutions to resolve this issue:\r\n\r\n 1. You can use `@ManyToMany(fetch = FetchType.EAGER)`\r\n\r\nBut EAGER fetching is very bad from a performance perspective. Moreover, once you have an EAGER association, there is no way you can make it LAZY.\r\n\r\n 2. You can use `@ManyToMany @Fetch(FetchMode.JOIN)`\r\n\r\nMore information: https://docs.jboss.org/hibernate/orm/3.2/api/org/hibernate/FetchMode.html\r\n\r\nEdit: It can occur when you have the following line in yout `application.properties` file:\r\n\r\n    spring.jpa.open-in-view = false","title":"Could not write JSON: failed to lazily initialize a collection of role","body":"<p>You have some solutions to resolve this issue:</p>\n<ol>\n<li>You can use <code>@ManyToMany(fetch = FetchType.EAGER)</code></li>\n</ol>\n<p>But EAGER fetching is very bad from a performance perspective. Moreover, once you have an EAGER association, there is no way you can make it LAZY.</p>\n<ol start=\"2\">\n<li>You can use <code>@ManyToMany @Fetch(FetchMode.JOIN)</code></li>\n</ol>\n<p>More information: <a href=\"https://docs.jboss.org/hibernate/orm/3.2/api/org/hibernate/FetchMode.html\" rel=\"nofollow noreferrer\">https://docs.jboss.org/hibernate/orm/3.2/api/org/hibernate/FetchMode.html</a></p>\n<p>Edit: It can occur when you have the following line in yout <code>application.properties</code> file:</p>\n<pre><code>spring.jpa.open-in-view = false\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1762789,"reputation":2242,"user_id":2126130,"accept_rate":67,"display_name":"Israel Perales"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1629687442,"creation_date":1629687442,"answer_id":68886823,"question_id":48117059,"body_markdown":"You should use a jackson-datatype-hibernate.\r\n\r\nhttps://github.com/FasterXML/jackson-datatype-hibernate\r\n\r\nAnd add this on your Application.java\r\n\r\n    @Bean\r\n    public ObjectMapper objectMapper() {\r\n        ObjectMapper objectMapper = new ObjectMapper();\r\n        objectMapper.registerModule(new Hibernate5Module());\r\n        return objectMapper;\r\n    }","title":"Could not write JSON: failed to lazily initialize a collection of role","body":"<p>You should use a jackson-datatype-hibernate.</p>\n<p><a href=\"https://github.com/FasterXML/jackson-datatype-hibernate\" rel=\"nofollow noreferrer\">https://github.com/FasterXML/jackson-datatype-hibernate</a></p>\n<p>And add this on your Application.java</p>\n<pre><code>@Bean\npublic ObjectMapper objectMapper() {\n    ObjectMapper objectMapper = new ObjectMapper();\n    objectMapper.registerModule(new Hibernate5Module());\n    return objectMapper;\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":5837505,"reputation":1043,"user_id":4600064,"accept_rate":20,"display_name":"Md. Mahmud Hasan"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1648126027,"creation_date":1642609098,"answer_id":70774117,"question_id":48117059,"body_markdown":"In my application.properties file open-in-view property of spring jpa was false. I had to comment to get rid of this.\r\n\r\n     #spring.jpa.open-in-view=false\r\n\r\nHope this help somebody.","title":"Could not write JSON: failed to lazily initialize a collection of role","body":"<p>In my application.properties file open-in-view property of spring jpa was false. I had to comment to get rid of this.</p>\n<pre><code> #spring.jpa.open-in-view=false\n</code></pre>\n<p>Hope this help somebody.</p>\n"},{"tags":[],"owner":{"account_id":10055174,"reputation":11,"user_id":7433608,"display_name":"m4nn3"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1658757447,"creation_date":1658757447,"answer_id":73110492,"question_id":48117059,"body_markdown":"I had to add `spring.jpa.open-in-view = true` to application.properties ","title":"Could not write JSON: failed to lazily initialize a collection of role","body":"<p>I had to add <code>spring.jpa.open-in-view = true</code> to application.properties</p>\n"},{"tags":[],"owner":{"account_id":7718945,"reputation":709,"user_id":5845739,"display_name":"Pratik Gaurav"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691674860,"creation_date":1691674860,"answer_id":76876294,"question_id":48117059,"body_markdown":"See this issue comes, when we create a circular infinite loop.\r\nIt comes when we try to establish relationship.\r\n\r\n``` @OneToMany ``` or ``` @ManyToMany ``` or ```@ManyToOne``` from both directions i.e parent to child.\r\n\r\nThere could be several solutions to the problem.\r\n\r\nI find the simplest one as to put\r\n\r\n``` @JsonIgnore ``` on the child child, which will break the loop to read the parent class again, and all data will come up efficiently !!!\r\n\r\nthank you.","title":"Could not write JSON: failed to lazily initialize a collection of role","body":"<p>See this issue comes, when we create a circular infinite loop.\nIt comes when we try to establish relationship.</p>\n<p><code>@OneToMany</code> or <code>@ManyToMany</code> or <code>@ManyToOne</code> from both directions i.e parent to child.</p>\n<p>There could be several solutions to the problem.</p>\n<p>I find the simplest one as to put</p>\n<p><code>@JsonIgnore</code> on the child child, which will break the loop to read the parent class again, and all data will come up efficiently !!!</p>\n<p>thank you.</p>\n"}],"owner":{"account_id":4060117,"reputation":311,"user_id":3336884,"accept_rate":58,"display_name":"Gjord83"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":60989,"favorite_count":0,"down_vote_count":0,"up_vote_count":16,"accepted_answer_id":48152153,"answer_count":9,"score":16,"last_activity_date":1691674860,"creation_date":1515167806,"question_id":48117059,"body_markdown":"I tried to implement a REST service with Java, Hibernate, and Spring, which returns JSON.\r\n\r\nI have map a many to many relation. I have a supplier that has a list of ingredients, and each ingredient has a list of suppliers.\r\n\r\nI created the table:\r\n\r\n    CREATE TABLE supplier_ingredient (\r\n      supplier_id BIGINT,\r\n      ingredient_id BIGINT\r\n    )\r\n\r\n\r\n    ALTER TABLE supplier_ingredient ADD CONSTRAINT supplier_ingredient_pkey \r\n    PRIMARY KEY(supplier_id, ingredient_id);\r\n\r\n    ALTER TABLE supplier_ingredient ADD CONSTRAINT \r\n    fk_supplier_ingredient_ingredient_id FOREIGN KEY (ingredient_id) \r\n    REFERENCES ingredient(id);\r\n\r\n    ALTER TABLE supplier_ingredient ADD CONSTRAINT \r\n    fk_supplier_ingredient_supplier_id FOREIGN KEY (supplier_id) REFERENCES \r\n    supplier(id);\r\n\r\nThen I have an **Ingredient** model:\r\n\r\n    .....\r\n    .....\r\n    @ManyToMany(mappedBy = &quot;ingredients&quot;)\r\n    @OrderBy(&quot;created DESC&quot;)\r\n    @BatchSize(size = 1000)\r\n    private List&lt;Supplier&gt; suppliers = new ArrayList&lt;&gt;();\r\n    ....\r\n    ....\r\n\r\n\r\nThen I have a **Supplier** model:\r\n    \r\n    ....\r\n    @ManyToMany\r\n    @JoinTable(\tname = &quot;supplier_ingredient &quot;, \r\n            joinColumns = @JoinColumn(name = &quot;supplier_id&quot;, referencedColumnName = &quot;id&quot;), \r\n            inverseJoinColumns = @JoinColumn(name = &quot;ingredient_id&quot;, referencedColumnName = &quot;id&quot;), \r\n            foreignKey = @ForeignKey(name = &quot;fk_supplier_ingredient_supplier_id&quot;))\r\n    @OrderBy(&quot;created DESC&quot;)\r\n    @Cascade(CascadeType.SAVE_UPDATE)\r\n    @BatchSize(size = 1000)\r\n    private List&lt;Ingredient&gt; ingredients = new ArrayList&lt;&gt;();\r\n    ....\r\n\r\n**Endpoint**:\r\n\r\n    @RequestMapping(value = &quot;/{supplierId:[0-9]+}&quot;, method = RequestMethod.GET)\r\n\t@ResponseStatus(value = HttpStatus.OK)\r\n\t@ResponseBody\r\n\tpublic SupplierObject get(@PathVariable Long supplierId) {\r\n\r\n\t\tSupplier supplier = supplierService.get(supplierId);\r\n\r\n\t\tSupplierObject supplierObject = new SupplierObject (supplier);\r\n\r\n\t\treturn SupplierObject;\r\n\r\n\t}\r\n\r\n**Service**\r\n\r\n    ....\r\n    public Supplier get(Long supplierId) {\r\n\r\n\t\tSupplier supplier = supplierDao.getById(supplierId); (it does entityManager.find(entityClass, id))\r\n\r\n\t\tif (supplier == null) throw new ResourceNotFound(&quot;supplier&quot;, supplierId);\r\n\r\n\t\treturn supplier;\r\n\t}\r\n    ....\r\n\r\n**SupplierObject**\r\n\r\n    \t@JsonIgnoreProperties(ignoreUnknown = true)\r\n\t    public class SupplierObject extends IdAbstractObject {\r\n\r\n\t\tpublic String email;\r\n\r\n\t\tpublic String phoneNumber;\r\n\r\n\t\tpublic String address;\r\n\r\n\t\tpublic String responsible;\r\n\r\n\t\tpublic String companyName;\r\n\r\n\t\tpublic String vat;\r\n\r\n\t\tpublic List&lt;Ingredient&gt; ingredients = new ArrayList&lt;&gt;();\r\n\r\n\t\tpublic SupplierObject () {\r\n\r\n\t\t}\r\n\r\n\t\tpublic SupplierObject (Supplier supplier) {\r\n\r\n\t\t\tid = supplier.getId();\r\n\t\t\temail = supplier.getEmail();\r\n\t\t\tresponsible = supplier.getResponsible();\r\n\t\t\tcompanyName = supplier.getCompanyName();\r\n\t\t\tphoneNumber = supplier.getPhone_number();\r\n\t\t\tingredients = supplier.getIngredients();\r\n\t\t\tvat = supplier.getVat();\r\n\t\t\taddress = supplier.getAddress();\r\n\r\n\r\n\t\t}\r\n\t}\r\n\r\nAnd **IdAbstractObject**\r\n\r\n    public abstract class IdAbstractObject{\r\n\r\n\t    public Long id;\r\n\r\n    }\r\n\r\n\r\nMy problem is, when I call the endpoint:\r\n\r\n    http://localhost:8080/supplier/1\r\n\r\n I got an error:\r\n\r\n&gt; &quot;Could not write JSON: failed to lazily initialize a collection of\r\n&gt; role: myPackage.ingredient.Ingredient.suppliers, could not initialize\r\n&gt; proxy - no Session; nested exception is\r\n&gt; com.fasterxml.jackson.databind.JsonMappingException: failed to lazily\r\n&gt; initialize a collection of role:\r\n&gt; myPackage.ingredient.Ingredient.suppliers, could not initialize proxy\r\n&gt; - no Session (through reference chain: myPackage.supplier.SupplierObject[\\&quot;ingredients\\&quot;]-&gt;org.hibernate.collection.internal.PersistentBag[0]-&gt;myPackage.ingredient.Ingredient[\\&quot;suppliers\\&quot;])&quot;\r\n\r\n\r\nI followed this:\r\n\r\nhttps://stackoverflow.com/questions/21708339/avoid-jackson-serialization-on-non-fetched-lazy-objects/21760361#21760361\r\n\r\nNow I haven&#39;t the error but in json returned, the ingredients field is null:\r\n\r\n    {\r\n      &quot;id&quot;: 1,\r\n      &quot;email&quot;: &quot;mail@gmail.com&quot;,\r\n      &quot;phoneNumber&quot;: null,\r\n      &quot;address&quot;: null,\r\n      &quot;responsible&quot;: null,\r\n      &quot;companyName&quot;: &quot;Company name&quot;,\r\n      &quot;vat&quot;: &quot;vat number&quot;,\r\n      &quot;ingredients&quot;: null\r\n    }\r\n\r\nbut in debug I can see ingredients....\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/0vTaB.jpg\r\n\r\n","title":"Could not write JSON: failed to lazily initialize a collection of role","body":"<p>I tried to implement a REST service with Java, Hibernate, and Spring, which returns JSON.</p>\n<p>I have map a many to many relation. I have a supplier that has a list of ingredients, and each ingredient has a list of suppliers.</p>\n<p>I created the table:</p>\n<pre><code>CREATE TABLE supplier_ingredient (\n  supplier_id BIGINT,\n  ingredient_id BIGINT\n)\n\n\nALTER TABLE supplier_ingredient ADD CONSTRAINT supplier_ingredient_pkey \nPRIMARY KEY(supplier_id, ingredient_id);\n\nALTER TABLE supplier_ingredient ADD CONSTRAINT \nfk_supplier_ingredient_ingredient_id FOREIGN KEY (ingredient_id) \nREFERENCES ingredient(id);\n\nALTER TABLE supplier_ingredient ADD CONSTRAINT \nfk_supplier_ingredient_supplier_id FOREIGN KEY (supplier_id) REFERENCES \nsupplier(id);\n</code></pre>\n<p>Then I have an <strong>Ingredient</strong> model:</p>\n<pre><code>.....\n.....\n@ManyToMany(mappedBy = &quot;ingredients&quot;)\n@OrderBy(&quot;created DESC&quot;)\n@BatchSize(size = 1000)\nprivate List&lt;Supplier&gt; suppliers = new ArrayList&lt;&gt;();\n....\n....\n</code></pre>\n<p>Then I have a <strong>Supplier</strong> model:</p>\n<pre><code>....\n@ManyToMany\n@JoinTable( name = &quot;supplier_ingredient &quot;, \n        joinColumns = @JoinColumn(name = &quot;supplier_id&quot;, referencedColumnName = &quot;id&quot;), \n        inverseJoinColumns = @JoinColumn(name = &quot;ingredient_id&quot;, referencedColumnName = &quot;id&quot;), \n        foreignKey = @ForeignKey(name = &quot;fk_supplier_ingredient_supplier_id&quot;))\n@OrderBy(&quot;created DESC&quot;)\n@Cascade(CascadeType.SAVE_UPDATE)\n@BatchSize(size = 1000)\nprivate List&lt;Ingredient&gt; ingredients = new ArrayList&lt;&gt;();\n....\n</code></pre>\n<p><strong>Endpoint</strong>:</p>\n<pre><code>@RequestMapping(value = &quot;/{supplierId:[0-9]+}&quot;, method = RequestMethod.GET)\n@ResponseStatus(value = HttpStatus.OK)\n@ResponseBody\npublic SupplierObject get(@PathVariable Long supplierId) {\n\n    Supplier supplier = supplierService.get(supplierId);\n\n    SupplierObject supplierObject = new SupplierObject (supplier);\n\n    return SupplierObject;\n\n}\n</code></pre>\n<p><strong>Service</strong></p>\n<pre><code>....\npublic Supplier get(Long supplierId) {\n\n    Supplier supplier = supplierDao.getById(supplierId); (it does entityManager.find(entityClass, id))\n\n    if (supplier == null) throw new ResourceNotFound(&quot;supplier&quot;, supplierId);\n\n    return supplier;\n}\n....\n</code></pre>\n<p><strong>SupplierObject</strong></p>\n<pre><code>    @JsonIgnoreProperties(ignoreUnknown = true)\n    public class SupplierObject extends IdAbstractObject {\n\n    public String email;\n\n    public String phoneNumber;\n\n    public String address;\n\n    public String responsible;\n\n    public String companyName;\n\n    public String vat;\n\n    public List&lt;Ingredient&gt; ingredients = new ArrayList&lt;&gt;();\n\n    public SupplierObject () {\n\n    }\n\n    public SupplierObject (Supplier supplier) {\n\n        id = supplier.getId();\n        email = supplier.getEmail();\n        responsible = supplier.getResponsible();\n        companyName = supplier.getCompanyName();\n        phoneNumber = supplier.getPhone_number();\n        ingredients = supplier.getIngredients();\n        vat = supplier.getVat();\n        address = supplier.getAddress();\n\n\n    }\n}\n</code></pre>\n<p>And <strong>IdAbstractObject</strong></p>\n<pre><code>public abstract class IdAbstractObject{\n\n    public Long id;\n\n}\n</code></pre>\n<p>My problem is, when I call the endpoint:</p>\n<pre><code>http://localhost:8080/supplier/1\n</code></pre>\n<p>I got an error:</p>\n<blockquote>\n<p>&quot;Could not write JSON: failed to lazily initialize a collection of\nrole: myPackage.ingredient.Ingredient.suppliers, could not initialize\nproxy - no Session; nested exception is\ncom.fasterxml.jackson.databind.JsonMappingException: failed to lazily\ninitialize a collection of role:\nmyPackage.ingredient.Ingredient.suppliers, could not initialize proxy</p>\n<ul>\n<li>no Session (through reference chain: myPackage.supplier.SupplierObject[&quot;ingredients&quot;]-&gt;org.hibernate.collection.internal.PersistentBag[0]-&gt;myPackage.ingredient.Ingredient[&quot;suppliers&quot;])&quot;</li>\n</ul>\n</blockquote>\n<p>I followed this:</p>\n<p><a href=\"https://stackoverflow.com/questions/21708339/avoid-jackson-serialization-on-non-fetched-lazy-objects/21760361#21760361\">Avoid Jackson serialization on non fetched lazy objects</a></p>\n<p>Now I haven't the error but in json returned, the ingredients field is null:</p>\n<pre><code>{\n  &quot;id&quot;: 1,\n  &quot;email&quot;: &quot;mail@gmail.com&quot;,\n  &quot;phoneNumber&quot;: null,\n  &quot;address&quot;: null,\n  &quot;responsible&quot;: null,\n  &quot;companyName&quot;: &quot;Company name&quot;,\n  &quot;vat&quot;: &quot;vat number&quot;,\n  &quot;ingredients&quot;: null\n}\n</code></pre>\n<p>but in debug I can see ingredients....</p>\n<p><a href=\"https://i.stack.imgur.com/0vTaB.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/0vTaB.jpg\" alt=\"enter image description here\" /></a></p>\n"},{"tags":["java","android"],"comments":[{"owner":{"account_id":22432165,"reputation":1234,"user_id":16637863,"display_name":"Pawan Harariya"},"score":0,"creation_date":1691424882,"post_id":76853267,"comment_id":135486677,"body_markdown":"I am not sure but can you try angle = 80 + 360 = 440, image.animate().rotation(440).setDuration(500).start();","body":"I am not sure but can you try angle = 80 + 360 = 440, image.animate().rotation(440).setDuration(500).start();"},{"owner":{"account_id":29178691,"reputation":11,"user_id":22353430,"display_name":"tomrepolw"},"score":0,"creation_date":1691426950,"post_id":76853267,"comment_id":135487065,"body_markdown":"I&#39;m afraid that this will only work in one case when I know the numbers, unfortunately I don&#39;t know what numbers/degrees will be next, I always want one to make the shortest possible distance from the other...","body":"I&#39;m afraid that this will only work in one case when I know the numbers, unfortunately I don&#39;t know what numbers/degrees will be next, I always want one to make the shortest possible distance from the other..."}],"answers":[{"tags":[],"owner":{"account_id":3212023,"reputation":1016,"user_id":17856705,"display_name":"Computable"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691674344,"creation_date":1691448615,"answer_id":76855561,"question_id":76853267,"body_markdown":"I believe you&#39;d be better served using the `rotationBy` method of the `ViewPropertyAnimator` and the problem then becomes computing a **signed delta** between &quot;start&quot; and &quot;end&quot; values, applying the &quot;shortest&quot; criteria (clockwise/anti-clockwise).  This does require having both the previous and current values to compute delta.\r\n\r\nThe following is a simple demo of applying a `rotationBy` always rotating using the &quot;shortest&quot; (clockwise or anticlockwise) based on the computed delta.\r\n\r\nThe test generates a list of headings and then adds random heading ( [0,360) ) values.\r\n\r\n\r\n    public class MainActivity extends AppCompatActivity {\r\n\r\n        Integer[] t1 = { 350, 12, 340, 20, 330, 30, 320, 40, 310, 50, 300, 60, 290, 70, 285, 75, 280, 80, 275, 85, 270, 90};\r\n        Integer[] t2 = { 265, 95, 260, 100, 255, 105, 250, 110, 245, 115, 240, 120, 235, 125, 230, 130, 225, 135, 220, 140, 215, 145, 210, 150};\r\n        Integer[] t3 = { 0, 0, 340, 320, 300, 280, 260, 240, 220, 200, 180, 160, 140, 120, 100, 80, 60, 40, 20, 0};\r\n\r\n        ImageView iv;\r\n        Random r;\r\n        TextView from; TextView to; TextView deltaTv;\r\n\r\n        @Override\r\n        protected void onCreate(Bundle savedInstanceState) {\r\n            super.onCreate(savedInstanceState);\r\n            setContentView(R.layout.activity_main);\r\n            iv = findViewById(R.id.imageView);\r\n\r\n            List&lt;Integer&gt; hdgs = new ArrayList&lt;&gt;();\r\n            r = new Random();\r\n\r\n            hdgs.addAll(Arrays.asList(t1));\r\n            hdgs.addAll(Arrays.asList(t2));\r\n            hdgs.addAll(Arrays.asList(t3));\r\n\r\n            // add in some random\r\n            for (int i = 0; i &lt; 100; i++) {\r\n                hdgs.add(r.nextInt(360));\r\n            }\r\n\r\n            from = findViewById(R.id.textViewFrom);\r\n            to = findViewById(R.id.textViewTo);\r\n            deltaTv = findViewById(R.id.delta);\r\n\r\n            // start at 0\r\n            to.setText(&quot;0&quot;);\r\n\r\n            // Updated positions every 1 second\r\n            Handler h = new Handler(Looper.getMainLooper());\r\n            h.postDelayed(new Runnable() {\r\n                @Override\r\n                public void run() {\r\n\r\n                    // newHdg initially ranges from [0,360)\r\n                    int newHdg = hdgs.remove(0);\r\n                    // prevHdg is saved value (from textview in this demo)\r\n                    int prevHdg = Integer.parseInt(to.getText().toString());\r\n\r\n                    // move old &quot;to&quot; to new &quot;from&quot;\r\n                    from.setText(to.getText());\r\n\r\n                    // Compute &quot;delta&quot; and enforcing clockwise/anticlockwise by using\r\n                    // sign of value - likely can be reduced...\r\n                    int delta = computeDelta(prevHdg, newHdg);\r\n\r\n                    deltaTv.setText(Integer.toString(delta));\r\n                    to.setText(Integer.toString(newHdg));\r\n\r\n                    Log.i(&quot;&quot;, &quot;Animating ...p=&quot;+prevHdg+&quot; c=&quot;+newHdg+&quot; d=&quot;+delta);\r\n\r\n                    iv.animate().rotationBy(delta).setDuration(500).start();\r\n\r\n                    if (hdgs.size() &gt; 0) {\r\n                        h.postDelayed(this, 1000);\r\n                    } else {\r\n                        Log.i(&quot;&quot;,&quot;Done&quot;);\r\n                    }\r\n\r\n                }\r\n            }, 2000);\r\n\r\n        }\r\n\r\n        // Compute delta between &quot;to&quot; and &quot;from&quot; and enforcing clockwise/anti-clockwise to\r\n        // achieve &quot;shortest&quot; rotation.  Likely could be reduced...\r\n        private int computeDelta(int from, int to) {\r\n            int result = 0;\r\n            if (from &gt; to) {\r\n                result = (from - to);\r\n                if (result &lt;= 180) {\r\n                    result *= -1;\r\n                } else {\r\n                    result = (360 + to - from);\r\n                }\r\n            } else {\r\n                result = (to - from);\r\n                if (result &gt; 180) {\r\n                    result = -1 * (360 + from - to);\r\n                }\r\n            }\r\n            return result;\r\n        }\r\n\r\n    }\r\n\r\n\r\n[![enter image description here][1]][1]\r\n\r\nThe textviews contain &quot;start&quot; heading, &quot;end&quot; heading and computed delta.\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/fu5Z9.gif","title":"ImageView rotate 360 with animation","body":"<p>I believe you'd be better served using the <code>rotationBy</code> method of the <code>ViewPropertyAnimator</code> and the problem then becomes computing a <strong>signed delta</strong> between &quot;start&quot; and &quot;end&quot; values, applying the &quot;shortest&quot; criteria (clockwise/anti-clockwise).  This does require having both the previous and current values to compute delta.</p>\n<p>The following is a simple demo of applying a <code>rotationBy</code> always rotating using the &quot;shortest&quot; (clockwise or anticlockwise) based on the computed delta.</p>\n<p>The test generates a list of headings and then adds random heading ( [0,360) ) values.</p>\n<pre><code>public class MainActivity extends AppCompatActivity {\n\n    Integer[] t1 = { 350, 12, 340, 20, 330, 30, 320, 40, 310, 50, 300, 60, 290, 70, 285, 75, 280, 80, 275, 85, 270, 90};\n    Integer[] t2 = { 265, 95, 260, 100, 255, 105, 250, 110, 245, 115, 240, 120, 235, 125, 230, 130, 225, 135, 220, 140, 215, 145, 210, 150};\n    Integer[] t3 = { 0, 0, 340, 320, 300, 280, 260, 240, 220, 200, 180, 160, 140, 120, 100, 80, 60, 40, 20, 0};\n\n    ImageView iv;\n    Random r;\n    TextView from; TextView to; TextView deltaTv;\n\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.activity_main);\n        iv = findViewById(R.id.imageView);\n\n        List&lt;Integer&gt; hdgs = new ArrayList&lt;&gt;();\n        r = new Random();\n\n        hdgs.addAll(Arrays.asList(t1));\n        hdgs.addAll(Arrays.asList(t2));\n        hdgs.addAll(Arrays.asList(t3));\n\n        // add in some random\n        for (int i = 0; i &lt; 100; i++) {\n            hdgs.add(r.nextInt(360));\n        }\n\n        from = findViewById(R.id.textViewFrom);\n        to = findViewById(R.id.textViewTo);\n        deltaTv = findViewById(R.id.delta);\n\n        // start at 0\n        to.setText(&quot;0&quot;);\n\n        // Updated positions every 1 second\n        Handler h = new Handler(Looper.getMainLooper());\n        h.postDelayed(new Runnable() {\n            @Override\n            public void run() {\n\n                // newHdg initially ranges from [0,360)\n                int newHdg = hdgs.remove(0);\n                // prevHdg is saved value (from textview in this demo)\n                int prevHdg = Integer.parseInt(to.getText().toString());\n\n                // move old &quot;to&quot; to new &quot;from&quot;\n                from.setText(to.getText());\n\n                // Compute &quot;delta&quot; and enforcing clockwise/anticlockwise by using\n                // sign of value - likely can be reduced...\n                int delta = computeDelta(prevHdg, newHdg);\n\n                deltaTv.setText(Integer.toString(delta));\n                to.setText(Integer.toString(newHdg));\n\n                Log.i(&quot;&quot;, &quot;Animating ...p=&quot;+prevHdg+&quot; c=&quot;+newHdg+&quot; d=&quot;+delta);\n\n                iv.animate().rotationBy(delta).setDuration(500).start();\n\n                if (hdgs.size() &gt; 0) {\n                    h.postDelayed(this, 1000);\n                } else {\n                    Log.i(&quot;&quot;,&quot;Done&quot;);\n                }\n\n            }\n        }, 2000);\n\n    }\n\n    // Compute delta between &quot;to&quot; and &quot;from&quot; and enforcing clockwise/anti-clockwise to\n    // achieve &quot;shortest&quot; rotation.  Likely could be reduced...\n    private int computeDelta(int from, int to) {\n        int result = 0;\n        if (from &gt; to) {\n            result = (from - to);\n            if (result &lt;= 180) {\n                result *= -1;\n            } else {\n                result = (360 + to - from);\n            }\n        } else {\n            result = (to - from);\n            if (result &gt; 180) {\n                result = -1 * (360 + from - to);\n            }\n        }\n        return result;\n    }\n\n}\n</code></pre>\n<p><a href=\"https://i.stack.imgur.com/fu5Z9.gif\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/fu5Z9.gif\" alt=\"enter image description here\" /></a></p>\n<p>The textviews contain &quot;start&quot; heading, &quot;end&quot; heading and computed delta.</p>\n"}],"owner":{"account_id":29178691,"reputation":11,"user_id":22353430,"display_name":"tomrepolw"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":51,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1691674344,"creation_date":1691423315,"question_id":76853267,"body_markdown":"I want to rotate the ImageView with animation (duration), let&#39;s assume that I set the rotation to 350 degrees, then I want to animate the rotation to 80 degrees (shorter way), unfortunately the image is animated from right to left (anti clockwise), which is the longer way.\r\n\r\n```\r\nimage.animate().rotation(350).setDuration(500).start();\r\n... time interval ...\r\nimage.animate().rotation(80).setDuration(500).start();\r\n```","title":"ImageView rotate 360 with animation","body":"<p>I want to rotate the ImageView with animation (duration), let's assume that I set the rotation to 350 degrees, then I want to animate the rotation to 80 degrees (shorter way), unfortunately the image is animated from right to left (anti clockwise), which is the longer way.</p>\n<pre><code>image.animate().rotation(350).setDuration(500).start();\n... time interval ...\nimage.animate().rotation(80).setDuration(500).start();\n</code></pre>\n"},{"tags":["java","junit","mockito"],"comments":[{"owner":{"account_id":19934545,"reputation":554,"user_id":14607529,"display_name":"ODDminus1"},"score":0,"creation_date":1691669792,"post_id":76875112,"comment_id":135524394,"body_markdown":"You are correct in that the test doesn&#39;t really check anything this way. Mockito works by introducing a &quot;dumb&quot; version of the class that you mock, and its use case is to mock secondary classes within the class that you test. But your class doesn&#39;t have secondary classes, so you don&#39;t really have anything to mock. However, if you created the httpClient outside of the class and instead retrieve it through a constructor, mockito could mock the HttpClient, allowing you to ensure a consequent response when calling client.sendAsync().","body":"You are correct in that the test doesn&#39;t really check anything this way. Mockito works by introducing a &quot;dumb&quot; version of the class that you mock, and its use case is to mock secondary classes within the class that you test. But your class doesn&#39;t have secondary classes, so you don&#39;t really have anything to mock. However, if you created the httpClient outside of the class and instead retrieve it through a constructor, mockito could mock the HttpClient, allowing you to ensure a consequent response when calling client.sendAsync()."}],"owner":{"account_id":25101919,"reputation":7,"user_id":18952539,"display_name":"michalbarnat"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":59,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1691674170,"creation_date":1691665359,"question_id":76875112,"body_markdown":"I have `CurrencyService` class:\r\n\r\n```\r\npublic class CurrencyService {\r\n\r\n    public double exchange(String CurrencyFrom, String CurrencyTo, double amount) {\r\n        String baseUrl = &quot;https://api.apilayer.com/currency_data/&quot;;\r\n        String apiKey = &quot;TMrs25g3tBZe2qvKJNgMqcQOMNAQe1Md&quot;;\r\n        String urlStr = baseUrl + &quot;convert?amount=&quot; + amount + &quot;&amp;from=&quot; + CurrencyFrom + &quot;&amp;to=&quot; + CurrencyTo + &quot;&amp;apikey=&quot; + apiKey;\r\n        //System.out.println(urlStr);\r\n\r\n        //http request\r\n        HttpClient client = HttpClient.newHttpClient();\r\n        HttpRequest request = HttpRequest.newBuilder().uri(URI.create(urlStr)).build();\r\n        String responseBody = client.sendAsync(request, HttpResponse.BodyHandlers.ofString())\r\n                .thenApply(HttpResponse::body)\r\n                .join();\r\n\r\n        double convertedValue = parseJSON(responseBody);\r\n\r\n        return convertedValue;\r\n    }\r\n\r\n    public double parseJSON(String responseBody) {\r\n        Gson gson = new Gson();\r\n        JsonObject jsonObject = gson.fromJson(responseBody, JsonObject.class);\r\n\r\n        if (jsonObject != null &amp;&amp; jsonObject.has(&quot;result&quot;)) {\r\n            return jsonObject.get(&quot;result&quot;).getAsDouble();\r\n        } else {\r\n            return 0.0;\r\n        }\r\n    }\r\n\r\n}\r\n\r\n```\r\n\r\nNow I need to write JUnit tests with Mockito. But how to do it without using internet connection?\r\n\r\n\r\nI tried something like this but it not looks good :( ... \r\n\r\n```\r\nprivate CurrencyService currencyService;\r\n\r\n    @Before\r\n    public void init() {\r\n        currencyService = Mockito.mock(CurrencyService.class);\r\n    }\r\n\r\n\r\n    @Test\r\n    public void testExchange() {\r\n        String currencyFrom = &quot;USD&quot;;\r\n        String currencyTo = &quot;EUR&quot;;\r\n        double amount = 100.0;\r\n        double expectedValue = 49.34;\r\n\r\n        Mockito.when(currencyService.exchange(currencyFrom, currencyTo, amount)).thenReturn(49.34);\r\n\r\n\r\n        double convertedValue = currencyService.exchange(currencyFrom, currencyTo, amount);\r\n\r\n        assertEquals(expectedValue, convertedValue, 0.001);\r\n    }\r\n```\r\n\r\nIt doesn&#39;t make sense when I first use Mockito.when and then check if it works good..","title":"How to make JUnit test with Mockito on API requests","body":"<p>I have <code>CurrencyService</code> class:</p>\n<pre><code>public class CurrencyService {\n\n    public double exchange(String CurrencyFrom, String CurrencyTo, double amount) {\n        String baseUrl = &quot;https://api.apilayer.com/currency_data/&quot;;\n        String apiKey = &quot;TMrs25g3tBZe2qvKJNgMqcQOMNAQe1Md&quot;;\n        String urlStr = baseUrl + &quot;convert?amount=&quot; + amount + &quot;&amp;from=&quot; + CurrencyFrom + &quot;&amp;to=&quot; + CurrencyTo + &quot;&amp;apikey=&quot; + apiKey;\n        //System.out.println(urlStr);\n\n        //http request\n        HttpClient client = HttpClient.newHttpClient();\n        HttpRequest request = HttpRequest.newBuilder().uri(URI.create(urlStr)).build();\n        String responseBody = client.sendAsync(request, HttpResponse.BodyHandlers.ofString())\n                .thenApply(HttpResponse::body)\n                .join();\n\n        double convertedValue = parseJSON(responseBody);\n\n        return convertedValue;\n    }\n\n    public double parseJSON(String responseBody) {\n        Gson gson = new Gson();\n        JsonObject jsonObject = gson.fromJson(responseBody, JsonObject.class);\n\n        if (jsonObject != null &amp;&amp; jsonObject.has(&quot;result&quot;)) {\n            return jsonObject.get(&quot;result&quot;).getAsDouble();\n        } else {\n            return 0.0;\n        }\n    }\n\n}\n\n</code></pre>\n<p>Now I need to write JUnit tests with Mockito. But how to do it without using internet connection?</p>\n<p>I tried something like this but it not looks good :( ...</p>\n<pre><code>private CurrencyService currencyService;\n\n    @Before\n    public void init() {\n        currencyService = Mockito.mock(CurrencyService.class);\n    }\n\n\n    @Test\n    public void testExchange() {\n        String currencyFrom = &quot;USD&quot;;\n        String currencyTo = &quot;EUR&quot;;\n        double amount = 100.0;\n        double expectedValue = 49.34;\n\n        Mockito.when(currencyService.exchange(currencyFrom, currencyTo, amount)).thenReturn(49.34);\n\n\n        double convertedValue = currencyService.exchange(currencyFrom, currencyTo, amount);\n\n        assertEquals(expectedValue, convertedValue, 0.001);\n    }\n</code></pre>\n<p>It doesn't make sense when I first use Mockito.when and then check if it works good..</p>\n"},{"tags":["java","mongodb","spring-boot"],"comments":[{"owner":{"account_id":5404,"reputation":22089,"user_id":8681,"accept_rate":67,"display_name":"Jorn"},"score":1,"creation_date":1691674769,"post_id":76876172,"comment_id":135525584,"body_markdown":"Realistically, just don&#39;t. This is what unique indexes are for. Trying to work around them will only bite you in the end.","body":"Realistically, just don&#39;t. This is what unique indexes are for. Trying to work around them will only bite you in the end."},{"owner":{"account_id":5404,"reputation":22089,"user_id":8681,"accept_rate":67,"display_name":"Jorn"},"score":0,"creation_date":1691674879,"post_id":76876172,"comment_id":135525609,"body_markdown":"And if that&#39;s not enough to convince you (it never is...), think about all the ways this check can miss: Two requests can both do the check, then both do the insert. Or one does a check, the insert but not the processing, while the other does the check, finds it&#39;s OK, does the insert but then the processing makes it a duplicate. Or the other way around. Or perhaps the processing can make a duplicate, not a duplicate. Et cetera.","body":"And if that&#39;s not enough to convince you (it never is...), think about all the ways this check can miss: Two requests can both do the check, then both do the insert. Or one does a check, the insert but not the processing, while the other does the check, finds it&#39;s OK, does the insert but then the processing makes it a duplicate. Or the other way around. Or perhaps the processing can make a duplicate, not a duplicate. Et cetera."},{"owner":{"account_id":26391128,"reputation":4716,"user_id":20042973,"display_name":"user20042973"},"score":0,"creation_date":1691690033,"post_id":76876172,"comment_id":135529066,"body_markdown":"&quot;_our uniqueness criteria are complex and can&#39;t be fully addressed using a single indexed field_&quot; - unique indexes can be compound as opposed to being limited to single field. See also [Unique Compound Index](https://www.mongodb.com/docs/manual/core/index-unique/#unique-compound-index) in the official documentation.","body":"&quot;<i>our uniqueness criteria are complex and can&#39;t be fully addressed using a single indexed field</i>&quot; - unique indexes can be compound as opposed to being limited to single field. See also <a href=\"https://www.mongodb.com/docs/manual/core/index-unique/#unique-compound-index\" rel=\"nofollow noreferrer\">Unique Compound Index</a> in the official documentation."},{"owner":{"account_id":13079057,"reputation":220,"user_id":9450155,"display_name":"Mansi Joshi"},"score":0,"creation_date":1692166754,"post_id":76876172,"comment_id":135585238,"body_markdown":"Unique compound index also can&#39;t be use in our case , is there any other solution for handling multiple request at same time??","body":"Unique compound index also can&#39;t be use in our case , is there any other solution for handling multiple request at same time??"}],"owner":{"account_id":13079057,"reputation":220,"user_id":9450155,"display_name":"Mansi Joshi"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":18,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1691673997,"creation_date":1691673997,"question_id":76876172,"body_markdown":"I&#39;m currently facing an issue with a Java registration process that involves checking for existing records, performing some processing, and then adding records to a MongoDB database. Unfortunately, this multi-step process is leading to the creation of duplicate records.\r\n\r\nBackground:\r\nThe registration process I&#39;m dealing with follows these steps:\r\n\r\n1. Check if the record already exists in the database.\r\n2. Perform additional processing on the registration data.\r\n3. Add the processed data to a MongoDB database collection.\r\n\r\nChallenges:\r\n\r\n**Synchronization**: I&#39;ve considered using synchronization to prevent duplicates, but there are already two synchronized methods within the same process. Adding more synchronization could lead to performance issues.\r\n\r\n**Indexing**: While indexing could help prevent duplicates, our uniqueness criteria are complex and can&#39;t be fully addressed using a single indexed field. There are multiple cases for uniqueness.\r\n\r\n\r\n\r\n\r\n\r\nWhat are some alternative strategies to effectively prevent duplicate records in a complex registration process without relying solely on synchronization or indexing?","title":"Preventing Duplicate Records in Registration Process with in java and MongoDB","body":"<p>I'm currently facing an issue with a Java registration process that involves checking for existing records, performing some processing, and then adding records to a MongoDB database. Unfortunately, this multi-step process is leading to the creation of duplicate records.</p>\n<p>Background:\nThe registration process I'm dealing with follows these steps:</p>\n<ol>\n<li>Check if the record already exists in the database.</li>\n<li>Perform additional processing on the registration data.</li>\n<li>Add the processed data to a MongoDB database collection.</li>\n</ol>\n<p>Challenges:</p>\n<p><strong>Synchronization</strong>: I've considered using synchronization to prevent duplicates, but there are already two synchronized methods within the same process. Adding more synchronization could lead to performance issues.</p>\n<p><strong>Indexing</strong>: While indexing could help prevent duplicates, our uniqueness criteria are complex and can't be fully addressed using a single indexed field. There are multiple cases for uniqueness.</p>\n<p>What are some alternative strategies to effectively prevent duplicate records in a complex registration process without relying solely on synchronization or indexing?</p>\n"},{"tags":["java","websocket","scope","aspectj","spring-messaging"],"owner":{"account_id":3163862,"reputation":36940,"user_id":2674303,"accept_rate":62,"display_name":"gstackoverflow"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":330,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"answer_count":0,"score":4,"last_activity_date":1691673463,"creation_date":1492759857,"question_id":43536542,"body_markdown":"I know that spring has websocket scope.  \r\nBut it means that it will collect values within session.\r\n\r\nI need to have something like request scope. It shoud start when we receive values in controller:\r\n\r\n \r\n\r\n    @MessageMapping(&quot;/common/url&quot;)\r\n    public void foo(SimpMessageHeaderAccessor headerAccessor, StubObject payLoad) {\r\n       Foo foo = someService.toDoSmth();\r\n       simpMessagingTemplate.convertAndSendToUser(username, &quot;path/to/queue&quot;, foo );\r\n\r\n\r\n\r\nand when last line will be finished it should disappear.\r\n\r\nWhy do I need this?\r\n\r\nI use aspects in my code.   \r\nWhen I receive message I should create entry in database  \r\nWhen I invoke `someService` I need update entry which I created in previous step  \r\nWhen I send message through  `simpMessagingTemplate` I need update entry one more time.","title":"Is there request scope in spring websockets ?(websocket scope == session scope)","body":"<p>I know that spring has websocket scope.<br />\nBut it means that it will collect values within session.</p>\n<p>I need to have something like request scope. It shoud start when we receive values in controller:</p>\n<pre><code>@MessageMapping(&quot;/common/url&quot;)\npublic void foo(SimpMessageHeaderAccessor headerAccessor, StubObject payLoad) {\n   Foo foo = someService.toDoSmth();\n   simpMessagingTemplate.convertAndSendToUser(username, &quot;path/to/queue&quot;, foo );\n</code></pre>\n<p>and when last line will be finished it should disappear.</p>\n<p>Why do I need this?</p>\n<p>I use aspects in my code.<br />\nWhen I receive message I should create entry in database<br />\nWhen I invoke <code>someService</code> I need update entry which I created in previous step<br />\nWhen I send message through  <code>simpMessagingTemplate</code> I need update entry one more time.</p>\n"},{"tags":["java","drools","mvel"],"answers":[{"tags":[],"owner":{"account_id":3341625,"reputation":393,"user_id":2807796,"accept_rate":100,"display_name":"Michael Starkie"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1688469409,"creation_date":1688469409,"answer_id":76612061,"question_id":76608088,"body_markdown":"I used the JVM -noverify option to disable this behavior, for the short term, in order to get the program running in production. ","title":"Java VerifyError when using Drools 6","body":"<p>I used the JVM -noverify option to disable this behavior, for the short term, in order to get the program running in production.</p>\n"}],"owner":{"account_id":3341625,"reputation":393,"user_id":2807796,"accept_rate":100,"display_name":"Michael Starkie"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":52,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76612061,"answer_count":1,"score":0,"last_activity_date":1691672187,"creation_date":1688418247,"question_id":76608088,"body_markdown":"I am seeing an exception after copying our app from Solaris to Linux.  \r\n`Caused by: java.lang.VerifyError: (class: ASMAccessorImpl_17883800501688417666490, method: getKnownEgressType signature: ()Ljava/lang/Class;) Illegal type in constant pool`\r\n\r\nThe application uses Java 8 in both environments but throws the exception when starting up on Linux.\r\n\r\n ```\r\n Solaris:\r\n java version &quot;1.8.0_152&quot;\r\n Java(TM) SE Runtime Environment (build 1.8.0_152-b16)\r\n Java HotSpot(TM) 64-Bit Server VM (build 25.152-b16, mixed mode)\r\n\r\n Linux:\r\n java version &quot;1.8.0_191&quot;\r\n Java(TM) SE Runtime Environment (build 1.8.0_191-b12)\r\n Java HotSpot(TM) 64-Bit Server VM (build 25.191-b12, mixed mode)\r\n\r\n Drools version 6.0.1.Final\r\n mvel2-2.1.8.Final.jar\r\n ```\r\n The rules are read from an xls file and contain over 400 rules so it would be impractical to post them here although the same rule sheet is used on both servers.\r\n\r\n The stack trace \r\n ```\r\nCaused by: java.lang.VerifyError: (class: ASMAccessorImpl_17883800501688417666490, method: getKnownEgressType signature: ()Ljava/lang/Class;) Illegal type in constant pool\r\n        at java.lang.Class.getDeclaredConstructors0(Native Method)\r\n        at java.lang.Class.privateGetDeclaredConstructors(Class.java:2671)\r\n        at java.lang.Class.getConstructor0(Class.java:3075)\r\n        at java.lang.Class.newInstance(Class.java:412)\r\n        at org.mvel2.optimizers.impl.asm.ASMAccessorOptimizer._initializeAccessor(ASMAccessorOptimizer.java:725)\r\n        at org.mvel2.optimizers.impl.asm.ASMAccessorOptimizer.compileAccessor(ASMAccessorOptimizer.java:859)\r\n        at org.mvel2.optimizers.impl.asm.ASMAccessorOptimizer.optimizeAccessor(ASMAccessorOptimizer.java:243)\r\n        at org.mvel2.optimizers.dynamic.DynamicGetAccessor.optimize(DynamicGetAccessor.java:90)\r\n        at org.mvel2.optimizers.dynamic.DynamicGetAccessor.getValue(DynamicGetAccessor.java:64)\r\n        at org.mvel2.ast.ASTNode.getReducedValueAccelerated(ASTNode.java:108)\r\n        at org.mvel2.compiler.ExecutableAccessor.getValue(ExecutableAccessor.java:42)\r\n        at org.mvel2.MVEL.executeExpression(MVEL.java:930)\r\n        at org.mvel2.templates.res.CompiledExpressionNode.eval(CompiledExpressionNode.java:45)\r\n        at org.mvel2.templates.res.TextNode.eval(TextNode.java:42)\r\n        at org.mvel2.templates.res.CompiledForEachNode.eval(CompiledForEachNode.java:114)\r\n        at org.mvel2.templates.res.TextNode.eval(TextNode.java:42)\r\n        at org.mvel2.templates.res.TerminalNode.eval(TerminalNode.java:35)\r\n        at org.mvel2.templates.res.TextNode.eval(TextNode.java:42)\r\n        at org.mvel2.templates.res.CompiledIfNode.eval(CompiledIfNode.java:44)\r\n        at org.mvel2.templates.res.TextNode.eval(TextNode.java:42)\r\n        at org.mvel2.templates.res.CompiledExpressionNode.eval(CompiledExpressionNode.java:46)\r\n        at org.mvel2.templates.res.TextNode.eval(TextNode.java:42)\r\n        at org.mvel2.templates.TemplateRuntime.execute(TemplateRuntime.java:285)\r\n        at org.mvel2.templates.TemplateRuntime.execute(TemplateRuntime.java:247)\r\n        at org.mvel2.templates.TemplateRuntime.execute(TemplateRuntime.java:255)\r\n        at org.mvel2.templates.TemplateRuntime.execute(TemplateRuntime.java:207)\r\n        at org.drools.compiler.rule.builder.dialect.java.JavaRuleBuilderHelper.generateMethodTemplate(JavaRuleBuilderHelper.java:226)\r\n        at org.drools.compiler.rule.builder.dialect.asm.AbstractASMConsequenceBuilder.build(AbstractASMConsequenceBuilder.java:24)\r\n        at org.drools.compiler.rule.builder.RuleBuilder.build(RuleBuilder.java:109)\r\n        at org.drools.compiler.compiler.PackageBuilder.addRule(PackageBuilder.java:3369)\r\n        at org.drools.compiler.compiler.PackageBuilder.compileRules(PackageBuilder.java:1093)\r\n        at org.drools.compiler.compiler.PackageBuilder.compileAllRules(PackageBuilder.java:972)\r\n        at org.drools.compiler.compiler.PackageBuilder.addPackage(PackageBuilder.java:964)\r\n        at org.drools.compiler.compiler.PackageBuilder.addPackageFromDrl(PackageBuilder.java:513)\r\n        at org.drools.compiler.compiler.PackageBuilder.addKnowledgeResource(PackageBuilder.java:721)\r\n        at org.drools.compiler.builder.impl.KnowledgeBuilderImpl.add(KnowledgeBuilderImpl.java:51)\r\n        at org.drools.compiler.builder.impl.KnowledgeBuilderImpl.add(KnowledgeBuilderImpl.java:40)\r\n        at org.drools.impl.KnowledgeBuilderImpl.add(KnowledgeBuilderImpl.java:34)\r\n        at com.itd.cantororderapp.RulesHelper.buildBaseFromDrl(RulesHelper.java:66)\r\n        at com.itd.cantororderapp.RulesHelper.compileBaseFromXls(RulesHelper.java:52)\r\n        at com.itd.cantororderapp.CantorFixMessageEnricher.&lt;init&gt;(CantorFixMessageEnricher.java:29)\r\n        at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)\r\n        at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:62)\r\n        at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)\r\n        at java.lang.reflect.Constructor.newInstance(Constructor.java:423)\r\n        at org.springframework.beans.BeanUtils.instantiateClass(BeanUtils.java:148)\r\n\r\n ```","title":"Java VerifyError when using Drools 6","body":"<p>I am seeing an exception after copying our app from Solaris to Linux.<br />\n<code>Caused by: java.lang.VerifyError: (class: ASMAccessorImpl_17883800501688417666490, method: getKnownEgressType signature: ()Ljava/lang/Class;) Illegal type in constant pool</code></p>\n<p>The application uses Java 8 in both environments but throws the exception when starting up on Linux.</p>\n<pre><code>Solaris:\njava version &quot;1.8.0_152&quot;\nJava(TM) SE Runtime Environment (build 1.8.0_152-b16)\nJava HotSpot(TM) 64-Bit Server VM (build 25.152-b16, mixed mode)\n\nLinux:\njava version &quot;1.8.0_191&quot;\nJava(TM) SE Runtime Environment (build 1.8.0_191-b12)\nJava HotSpot(TM) 64-Bit Server VM (build 25.191-b12, mixed mode)\n\nDrools version 6.0.1.Final\nmvel2-2.1.8.Final.jar\n</code></pre>\n<p>The rules are read from an xls file and contain over 400 rules so it would be impractical to post them here although the same rule sheet is used on both servers.</p>\n<p>The stack trace</p>\n<pre><code>Caused by: java.lang.VerifyError: (class: ASMAccessorImpl_17883800501688417666490, method: getKnownEgressType signature: ()Ljava/lang/Class;) Illegal type in constant pool\n       at java.lang.Class.getDeclaredConstructors0(Native Method)\n       at java.lang.Class.privateGetDeclaredConstructors(Class.java:2671)\n       at java.lang.Class.getConstructor0(Class.java:3075)\n       at java.lang.Class.newInstance(Class.java:412)\n       at org.mvel2.optimizers.impl.asm.ASMAccessorOptimizer._initializeAccessor(ASMAccessorOptimizer.java:725)\n       at org.mvel2.optimizers.impl.asm.ASMAccessorOptimizer.compileAccessor(ASMAccessorOptimizer.java:859)\n       at org.mvel2.optimizers.impl.asm.ASMAccessorOptimizer.optimizeAccessor(ASMAccessorOptimizer.java:243)\n       at org.mvel2.optimizers.dynamic.DynamicGetAccessor.optimize(DynamicGetAccessor.java:90)\n       at org.mvel2.optimizers.dynamic.DynamicGetAccessor.getValue(DynamicGetAccessor.java:64)\n       at org.mvel2.ast.ASTNode.getReducedValueAccelerated(ASTNode.java:108)\n       at org.mvel2.compiler.ExecutableAccessor.getValue(ExecutableAccessor.java:42)\n       at org.mvel2.MVEL.executeExpression(MVEL.java:930)\n       at org.mvel2.templates.res.CompiledExpressionNode.eval(CompiledExpressionNode.java:45)\n       at org.mvel2.templates.res.TextNode.eval(TextNode.java:42)\n       at org.mvel2.templates.res.CompiledForEachNode.eval(CompiledForEachNode.java:114)\n       at org.mvel2.templates.res.TextNode.eval(TextNode.java:42)\n       at org.mvel2.templates.res.TerminalNode.eval(TerminalNode.java:35)\n       at org.mvel2.templates.res.TextNode.eval(TextNode.java:42)\n       at org.mvel2.templates.res.CompiledIfNode.eval(CompiledIfNode.java:44)\n       at org.mvel2.templates.res.TextNode.eval(TextNode.java:42)\n       at org.mvel2.templates.res.CompiledExpressionNode.eval(CompiledExpressionNode.java:46)\n       at org.mvel2.templates.res.TextNode.eval(TextNode.java:42)\n       at org.mvel2.templates.TemplateRuntime.execute(TemplateRuntime.java:285)\n       at org.mvel2.templates.TemplateRuntime.execute(TemplateRuntime.java:247)\n       at org.mvel2.templates.TemplateRuntime.execute(TemplateRuntime.java:255)\n       at org.mvel2.templates.TemplateRuntime.execute(TemplateRuntime.java:207)\n       at org.drools.compiler.rule.builder.dialect.java.JavaRuleBuilderHelper.generateMethodTemplate(JavaRuleBuilderHelper.java:226)\n       at org.drools.compiler.rule.builder.dialect.asm.AbstractASMConsequenceBuilder.build(AbstractASMConsequenceBuilder.java:24)\n       at org.drools.compiler.rule.builder.RuleBuilder.build(RuleBuilder.java:109)\n       at org.drools.compiler.compiler.PackageBuilder.addRule(PackageBuilder.java:3369)\n       at org.drools.compiler.compiler.PackageBuilder.compileRules(PackageBuilder.java:1093)\n       at org.drools.compiler.compiler.PackageBuilder.compileAllRules(PackageBuilder.java:972)\n       at org.drools.compiler.compiler.PackageBuilder.addPackage(PackageBuilder.java:964)\n       at org.drools.compiler.compiler.PackageBuilder.addPackageFromDrl(PackageBuilder.java:513)\n       at org.drools.compiler.compiler.PackageBuilder.addKnowledgeResource(PackageBuilder.java:721)\n       at org.drools.compiler.builder.impl.KnowledgeBuilderImpl.add(KnowledgeBuilderImpl.java:51)\n       at org.drools.compiler.builder.impl.KnowledgeBuilderImpl.add(KnowledgeBuilderImpl.java:40)\n       at org.drools.impl.KnowledgeBuilderImpl.add(KnowledgeBuilderImpl.java:34)\n       at com.itd.cantororderapp.RulesHelper.buildBaseFromDrl(RulesHelper.java:66)\n       at com.itd.cantororderapp.RulesHelper.compileBaseFromXls(RulesHelper.java:52)\n       at com.itd.cantororderapp.CantorFixMessageEnricher.&lt;init&gt;(CantorFixMessageEnricher.java:29)\n       at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)\n       at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:62)\n       at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)\n       at java.lang.reflect.Constructor.newInstance(Constructor.java:423)\n       at org.springframework.beans.BeanUtils.instantiateClass(BeanUtils.java:148)\n\n</code></pre>\n"},{"tags":["java","javadoc","inheritdoc"],"answers":[{"tags":[],"owner":{"account_id":81822,"reputation":204250,"user_id":230513,"accept_rate":100,"display_name":"trashgod"},"down_vote_count":0,"up_vote_count":18,"is_accepted":false,"score":18,"last_activity_date":1691671936,"creation_date":1264824291,"answer_id":2166789,"question_id":2165008,"body_markdown":"I&#39;m not aware of a way, but you might elaborate on why you want [`{@inheritDoc}`][1] to do this. I may misunderstand, but it seems confusing. You can document how your concrete implementation varies form the parent and use [`@see`][2] to refer to the contract in the abstract class. Note [&quot;*Method Comment Inheritance*&quot;][3] may obviate the need for an explicit [`{@inheritDoc}`][1].\r\n\r\n\r\n[1]: https://docs.oracle.com/en/java/javase/17/docs/specs/javadoc/doc-comment-spec.html#inheritdoc\r\n[2]: https://docs.oracle.com/en/java/javase/17/docs/specs/javadoc/doc-comment-spec.html#see\r\n[3]: https://docs.oracle.com/en/java/javase/17/docs/specs/javadoc/doc-comment-spec.html#method-comment-inheritance","title":"Javadoc {@inheritDoc} tag class","body":"<p>I'm not aware of a way, but you might elaborate on why you want <a href=\"https://docs.oracle.com/en/java/javase/17/docs/specs/javadoc/doc-comment-spec.html#inheritdoc\" rel=\"nofollow noreferrer\"><code>{@inheritDoc}</code></a> to do this. I may misunderstand, but it seems confusing. You can document how your concrete implementation varies form the parent and use <a href=\"https://docs.oracle.com/en/java/javase/17/docs/specs/javadoc/doc-comment-spec.html#see\" rel=\"nofollow noreferrer\"><code>@see</code></a> to refer to the contract in the abstract class. Note <a href=\"https://docs.oracle.com/en/java/javase/17/docs/specs/javadoc/doc-comment-spec.html#method-comment-inheritance\" rel=\"nofollow noreferrer\">&quot;<em>Method Comment Inheritance</em>&quot;</a> may obviate the need for an explicit <a href=\"https://docs.oracle.com/en/java/javase/17/docs/specs/javadoc/doc-comment-spec.html#inheritdoc\" rel=\"nofollow noreferrer\"><code>{@inheritDoc}</code></a>.</p>\n"},{"tags":[],"owner":{"account_id":66479,"reputation":27633,"user_id":194982,"accept_rate":65,"display_name":"bguiz"},"down_vote_count":0,"up_vote_count":46,"is_accepted":true,"score":46,"last_activity_date":1366664155,"creation_date":1264830024,"answer_id":2167003,"question_id":2165008,"body_markdown":"What you are describing is not supported by the javadoc generation tool.\r\n\r\nAnd I think that there is a **good reason** for this too:\r\n\r\nIf your method in the subclass is merely an implementation of an abstract method, then I think it would be correct to leave the abstract class&#39; name in there.\r\n\r\nOn the flip side, if your method in the subclass is not just a simple implementation, and does something more that is noteworthy (enough to be mentioned in the javadoc), then you should write a new javadoc on the method in the subclass, instead of invoking inheritDoc.\r\n","title":"Javadoc {@inheritDoc} tag class","body":"<p>What you are describing is not supported by the javadoc generation tool.</p>\n\n<p>And I think that there is a <strong>good reason</strong> for this too:</p>\n\n<p>If your method in the subclass is merely an implementation of an abstract method, then I think it would be correct to leave the abstract class' name in there.</p>\n\n<p>On the flip side, if your method in the subclass is not just a simple implementation, and does something more that is noteworthy (enough to be mentioned in the javadoc), then you should write a new javadoc on the method in the subclass, instead of invoking inheritDoc.</p>\n"},{"tags":[],"owner":{"account_id":2043549,"reputation":1360,"user_id":1824182,"accept_rate":83,"display_name":"Ti Strga"},"down_vote_count":1,"up_vote_count":2,"is_accepted":false,"score":1,"last_activity_date":1358177642,"creation_date":1358177642,"answer_id":14321492,"question_id":2165008,"body_markdown":"You can also, IIRC, write additional text around the `{@inheritDoc}` tag in your own comments.","title":"Javadoc {@inheritDoc} tag class","body":"<p>You can also, IIRC, write additional text around the <code>{@inheritDoc}</code> tag in your own comments.</p>\n"}],"owner":{"account_id":96444,"reputation":10134,"user_id":262125,"accept_rate":89,"display_name":"LandonSchropp"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":80985,"favorite_count":0,"down_vote_count":0,"up_vote_count":43,"accepted_answer_id":2167003,"answer_count":3,"score":43,"last_activity_date":1691671936,"creation_date":1264797595,"question_id":2165008,"body_markdown":"I would like to use the `{@inheritDoc}` class to inherit methods from my abstract class.  In the documentation for the abstract class, I refer to the abstract class by name.  How can I tag this so when the subclass inherits the documentation from the super class, it replaces the abstract class&#39;s name with the subclass&#39;s name?","title":"Javadoc {@inheritDoc} tag class","body":"<p>I would like to use the <code>{@inheritDoc}</code> class to inherit methods from my abstract class.  In the documentation for the abstract class, I refer to the abstract class by name.  How can I tag this so when the subclass inherits the documentation from the super class, it replaces the abstract class's name with the subclass's name?</p>\n"},{"tags":["java","android","kotlin"],"comments":[{"owner":{"account_id":238127,"reputation":86162,"user_id":506796,"accept_rate":83,"display_name":"Tenfour04"},"score":1,"creation_date":1691675637,"post_id":76875897,"comment_id":135525783,"body_markdown":"I think your bottom diagram is the obvious solution. You can use build flavors to select between your dependencies. In this case your project has five modules. One that defines the interface(s) for your abstract layer, three modules that wrap the sdks in the interface(s), and then your app. https://developer.android.com/build/build-variants","body":"I think your bottom diagram is the obvious solution. You can use build flavors to select between your dependencies. In this case your project has five modules. One that defines the interface(s) for your abstract layer, three modules that wrap the sdks in the interface(s), and then your app. <a href=\"https://developer.android.com/build/build-variants\" rel=\"nofollow noreferrer\">developer.android.com/build/build-variants</a>"}],"owner":{"account_id":6697732,"reputation":690,"user_id":5165289,"display_name":"Stf Kolev"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":17,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1691671877,"creation_date":1691671877,"question_id":76875897,"body_markdown":"I&#39;d like to ask if there is any point in using Android Features for multiple libraries integration or if there is a better way implementing this type of architecture.\r\n\r\n**What do I mean by multiple libraries integration?**\r\n\r\nLet&#39;s say I&#39;ve got multiple projects regarding one application, that implement different libraries. For example, I&#39;ve got an application for point of sale and this application is used over multiple devices with different vendors. Assuming there are three vendors and each one of those vendors have different SDKs, therefore I got to create three different projects of the same application that applies the three different SDKs. Right now, the architecture looks like the following:\r\n[![enter image description here][1]][1]\r\n\r\nThe problem with this scheme is that all three of the applications share same logic, except the SDK implementations and once a change is made, I&#39;d have to go through all three projects and make the changes there. That is what I want to avoid.\r\n\r\n**How I imagine it?** \r\n\r\nI imagine the project &quot;My Application&quot; as one project where it has a module or Android Feature (not sure which one is correct, where this whole question comes to) which module takes care of separating the three vendors&#39; SDKs, for example. A schematic is available down below:\r\n[![enter image description here][2]][2]\r\n\r\nSummarizing the whole information, what would be the best approach to this problem and are Android Features sufficient enough to provide this type of functionality, or I interpret it wrong?\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/awNjl.png\r\n  [2]: https://i.stack.imgur.com/W0MkF.png","title":"Using Android features layer over multiple libraries integration","body":"<p>I'd like to ask if there is any point in using Android Features for multiple libraries integration or if there is a better way implementing this type of architecture.</p>\n<p><strong>What do I mean by multiple libraries integration?</strong></p>\n<p>Let's say I've got multiple projects regarding one application, that implement different libraries. For example, I've got an application for point of sale and this application is used over multiple devices with different vendors. Assuming there are three vendors and each one of those vendors have different SDKs, therefore I got to create three different projects of the same application that applies the three different SDKs. Right now, the architecture looks like the following:\n<a href=\"https://i.stack.imgur.com/awNjl.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/awNjl.png\" alt=\"enter image description here\" /></a></p>\n<p>The problem with this scheme is that all three of the applications share same logic, except the SDK implementations and once a change is made, I'd have to go through all three projects and make the changes there. That is what I want to avoid.</p>\n<p><strong>How I imagine it?</strong></p>\n<p>I imagine the project &quot;My Application&quot; as one project where it has a module or Android Feature (not sure which one is correct, where this whole question comes to) which module takes care of separating the three vendors' SDKs, for example. A schematic is available down below:\n<a href=\"https://i.stack.imgur.com/W0MkF.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/W0MkF.png\" alt=\"enter image description here\" /></a></p>\n<p>Summarizing the whole information, what would be the best approach to this problem and are Android Features sufficient enough to provide this type of functionality, or I interpret it wrong?</p>\n"},{"tags":["java","android"],"answers":[{"tags":[],"owner":{"account_id":1387377,"reputation":301,"user_id":1319094,"accept_rate":83,"display_name":"Shrikanth"},"down_vote_count":0,"up_vote_count":14,"is_accepted":true,"score":14,"last_activity_date":1337116232,"creation_date":1337116232,"answer_id":10608921,"question_id":10608845,"body_markdown":"http://developer.android.com/reference/java/util/Calendar.html#HOUR\r\n\r\n calendar.set(calendar.HOUR,HourValue) ,  instead of HOUR_OF_DAY so if you give a 24 hour input it converts it into 12 hour format","title":"Android Calendar Set Am or Pm time not 24 Hour","body":"<p><a href=\"http://developer.android.com/reference/java/util/Calendar.html#HOUR\" rel=\"noreferrer\">http://developer.android.com/reference/java/util/Calendar.html#HOUR</a></p>\n\n<p>calendar.set(calendar.HOUR,HourValue) ,  instead of HOUR_OF_DAY so if you give a 24 hour input it converts it into 12 hour format</p>\n"},{"tags":[],"owner":{"account_id":3558764,"reputation":124,"user_id":2971767,"display_name":"deepan"},"down_vote_count":0,"up_vote_count":7,"is_accepted":false,"score":7,"last_activity_date":1392720889,"creation_date":1392720889,"answer_id":21851588,"question_id":10608845,"body_markdown":"0 for am and 1 for pm\r\n`\r\n    Calendar c = Calendar.getInstance();\r\n\t    c.set(Calendar.YEAR, year);\r\n\t    c.set(Calendar.MONTH, month);\r\n\t    c.set(Calendar.DAY_OF_MONTH, day);\r\n\t    c.set(Calendar.AM_PM, 1);\r\n\t    c.set(Calendar.HOUR, hour);\r\n\t    c.set(Calendar.MINUTE, minute);\r\n\t    c.set(Calendar.SECOND, 00);\r\n\t    c.set(Calendar.MILLISECOND, 00);\r\n`\r\n","title":"Android Calendar Set Am or Pm time not 24 Hour","body":"<p>0 for am and 1 for pm\n<code>\n    Calendar c = Calendar.getInstance();\n        c.set(Calendar.YEAR, year);\n        c.set(Calendar.MONTH, month);\n        c.set(Calendar.DAY_OF_MONTH, day);\n        c.set(Calendar.AM_PM, 1);\n        c.set(Calendar.HOUR, hour);\n        c.set(Calendar.MINUTE, minute);\n        c.set(Calendar.SECOND, 00);\n        c.set(Calendar.MILLISECOND, 00);\n</code></p>\n"},{"tags":[],"owner":{"account_id":444211,"reputation":61229,"user_id":835883,"accept_rate":81,"display_name":"j2emanue"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1412049113,"creation_date":1412049113,"answer_id":26112488,"question_id":10608845,"body_markdown":"    int am_pm=c.get(Calendar.AM_PM);\r\n    String time=c.HOUR + ((am_pm==Calendar.AM)?&quot;am&quot;:&quot;pm&quot;))\r\n\r\nyou can try the above. ","title":"Android Calendar Set Am or Pm time not 24 Hour","body":"<pre><code>int am_pm=c.get(Calendar.AM_PM);\nString time=c.HOUR + ((am_pm==Calendar.AM)?\"am\":\"pm\"))\n</code></pre>\n\n<p>you can try the above. </p>\n"},{"tags":[],"owner":{"account_id":322981,"reputation":310745,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1517464017,"creation_date":1517463494,"answer_id":48556026,"question_id":10608845,"body_markdown":"# tl;dr\r\n\r\n    ZonedDateTime.of( \r\n        LocalDate.now( ZoneId.of( &quot;Pacific/Auckland&quot; ) )  // Determine today’s date for a given region.\r\n            .plusDays( 1 ) ,                              // Determine day-after, tomorrow.\r\n        LocalTime.parse(                                  // Parse string with AM/PM into `LocalTime` object.\r\n            &quot;6:51:35 PM&quot; , \r\n            DateTimeFormatter.ofPattern( &quot;h:m:s a&quot; ).withLocale( Locale.US ) \r\n        ) ,                                               // Combine date with time-of-day…\r\n        ZoneId.of( &quot;Pacific/Auckland&quot; )                   // …and zone…\r\n    )                                                     // …to produce a `ZonedDateTime`, a point on the timeline.\r\n    .toString()                                           // Generate a String in standard ISO 8601 format, wisely extended by appending the name of the time zone in square brackets.\r\n\r\n&gt;2018-02-02T18:51:35+13:00[Pacific/Auckland]\r\n\r\n# java.time\r\n\r\nParse that incoming string in 12-hour format into a `LocalTime` object.\r\n\r\n    String input = &quot;6:51:35 PM&quot; ; \r\n    DateTimeFormatter f = DateTimeFormatter.ofPattern( &quot;h:m:s a&quot; ).withLocale( Locale.US ) ;\r\n\r\n    LocalTime lt = LocalTime.parse( input , f ) ;\r\n\r\nTo set your alarm, you&#39;ll need a date combined with this time-of-day along with a time zone to determine an actual moment.\r\n\r\nThe [`LocalDate`](https://docs.oracle.com/javase/9/docs/api/java/time/LocalDate.html) class represents a date-only value without time-of-day and without time zone.\r\n\r\nA time zone is crucial in determining a date. For any given moment, the date varies around the globe by zone. For example, a few minutes after midnight in [Paris France](https://en.wikipedia.org/wiki/Europe/Paris) is a new day while still “yesterday” in [Montr&#233;al Qu&#233;bec](https://en.wikipedia.org/wiki/America/Montreal).\r\n\r\nIf no time zone is specified, the JVM implicitly applies its current default time zone. That default may change at any moment, so your results may vary. Better to specify your desired/expected time zone explicitly as an argument.\r\n\r\nSpecify a [proper time zone name](https://en.wikipedia.org/wiki/List_of_tz_zones_by_name) in the format of `continent/region`, such as [`America/Montreal`](https://en.wikipedia.org/wiki/America/Montreal), [`Africa/Casablanca`](https://en.wikipedia.org/wiki/Africa/Casablanca), or `Pacific/Auckland`. Never use the 3-4 letter abbreviation such as `EST` or `IST` as they are *not* true time zones, not standardized, and not even unique(!). \r\n\r\n    ZoneId z = ZoneId.of( &quot;America/Montreal&quot; ) ;  \r\n    LocalDate today = LocalDate.now( z ) ;\r\n\r\nIf you want to use the JVM’s current default time zone, ask for it and pass as an argument. If omitted, the JVM’s current default is applied implicitly. Better to be explicit.\r\n\r\n    ZoneId z = ZoneId.systemDefault() ;  // Get JVM’s current default time zone.\r\n\r\nDetermine tomorrow by adding a day.\r\n\r\n    LocalDate tomorrow = today.plusDays( 1 ) ;\r\n\r\nApply the time-of-day and desired time zone to produce a `ZonedDateTime`. If your time-of-day is not valid for that date in that zone because of anomalies such as Daylight Saving Time (DST), the class automatically adjusts. Read the doc to be sure you understand and agree to the behavior of those adjustments.\r\n\r\n    ZonedDateTime zdt = ZonedDateTime.of( tomorrow , lt , z ) ; // Get a specific moment in time given a particular date, time-of-day, and zone.\r\n\r\n\r\n\r\n----------\r\n\r\n# About *java.time*\r\n\r\nThe [*java.time*](http://docs.oracle.com/javase/9/docs/api/java/time/package-summary.html) framework is built into Java 8 and later. These classes supplant the troublesome old [legacy](https://en.wikipedia.org/wiki/Legacy_system) date-time classes such as [`java.util.Date`](https://docs.oracle.com/javase/9/docs/api/java/util/Date.html), [`Calendar`](https://docs.oracle.com/javase/9/docs/api/java/util/Calendar.html), &amp; [`SimpleDateFormat`](http://docs.oracle.com/javase/9/docs/api/java/text/SimpleDateFormat.html).\r\n\r\nThe [*Joda-Time*](http://www.joda.org/joda-time/) project, now in [maintenance mode](https://en.wikipedia.org/wiki/Maintenance_mode), advises migration to the [java.time](http://docs.oracle.com/javase/9/docs/api/java/time/package-summary.html) classes.\r\n\r\nTo learn more, see the [*Oracle Tutorial*](http://docs.oracle.com/javase/tutorial/datetime/TOC.html). And search Stack Overflow for many examples and explanations. Specification is [JSR 310](https://jcp.org/en/jsr/detail?id=310).\r\n\r\nWhere to obtain the java.time classes? \r\n\r\n - [**Java SE 8**](https://en.wikipedia.org/wiki/Java_version_history#Java_SE_8), [**Java SE 9**](https://en.wikipedia.org/wiki/Java_version_history#Java_SE_9), and later\r\n  - Built-in. \r\n  - Part of the standard Java API with a bundled implementation.\r\n  - Java 9 adds some minor features and fixes.\r\n - [**Java SE 6**](https://en.wikipedia.org/wiki/Java_version_history#Java_SE_6) and [**Java SE 7**](https://en.wikipedia.org/wiki/Java_version_history#Java_SE_7)\r\n  - Much of the java.time functionality is back-ported to Java 6 &amp; 7 in [***ThreeTen-Backport***](http://www.threeten.org/threetenbp/).\r\n - [**Android**](https://en.wikipedia.org/wiki/Android_(operating_system))\r\n  - Later versions of Android bundle implementations of the java.time classes.\r\n  - For earlier Android, the [***ThreeTenABP***](https://github.com/JakeWharton/ThreeTenABP) project adapts *ThreeTen-Backport* (mentioned above). See [*How to use ThreeTenABP…*](http://stackoverflow.com/q/38922754/642706).\r\n","title":"Android Calendar Set Am or Pm time not 24 Hour","body":"<h1>tl;dr</h1>\n\n<pre><code>ZonedDateTime.of( \n    LocalDate.now( ZoneId.of( \"Pacific/Auckland\" ) )  // Determine today’s date for a given region.\n        .plusDays( 1 ) ,                              // Determine day-after, tomorrow.\n    LocalTime.parse(                                  // Parse string with AM/PM into `LocalTime` object.\n        \"6:51:35 PM\" , \n        DateTimeFormatter.ofPattern( \"h:m:s a\" ).withLocale( Locale.US ) \n    ) ,                                               // Combine date with time-of-day…\n    ZoneId.of( \"Pacific/Auckland\" )                   // …and zone…\n)                                                     // …to produce a `ZonedDateTime`, a point on the timeline.\n.toString()                                           // Generate a String in standard ISO 8601 format, wisely extended by appending the name of the time zone in square brackets.\n</code></pre>\n\n<blockquote>\n  <p>2018-02-02T18:51:35+13:00[Pacific/Auckland]</p>\n</blockquote>\n\n<h1>java.time</h1>\n\n<p>Parse that incoming string in 12-hour format into a <code>LocalTime</code> object.</p>\n\n<pre><code>String input = \"6:51:35 PM\" ; \nDateTimeFormatter f = DateTimeFormatter.ofPattern( \"h:m:s a\" ).withLocale( Locale.US ) ;\n\nLocalTime lt = LocalTime.parse( input , f ) ;\n</code></pre>\n\n<p>To set your alarm, you'll need a date combined with this time-of-day along with a time zone to determine an actual moment.</p>\n\n<p>The <a href=\"https://docs.oracle.com/javase/9/docs/api/java/time/LocalDate.html\" rel=\"nofollow noreferrer\"><code>LocalDate</code></a> class represents a date-only value without time-of-day and without time zone.</p>\n\n<p>A time zone is crucial in determining a date. For any given moment, the date varies around the globe by zone. For example, a few minutes after midnight in <a href=\"https://en.wikipedia.org/wiki/Europe/Paris\" rel=\"nofollow noreferrer\">Paris France</a> is a new day while still “yesterday” in <a href=\"https://en.wikipedia.org/wiki/America/Montreal\" rel=\"nofollow noreferrer\">Montréal Québec</a>.</p>\n\n<p>If no time zone is specified, the JVM implicitly applies its current default time zone. That default may change at any moment, so your results may vary. Better to specify your desired/expected time zone explicitly as an argument.</p>\n\n<p>Specify a <a href=\"https://en.wikipedia.org/wiki/List_of_tz_zones_by_name\" rel=\"nofollow noreferrer\">proper time zone name</a> in the format of <code>continent/region</code>, such as <a href=\"https://en.wikipedia.org/wiki/America/Montreal\" rel=\"nofollow noreferrer\"><code>America/Montreal</code></a>, <a href=\"https://en.wikipedia.org/wiki/Africa/Casablanca\" rel=\"nofollow noreferrer\"><code>Africa/Casablanca</code></a>, or <code>Pacific/Auckland</code>. Never use the 3-4 letter abbreviation such as <code>EST</code> or <code>IST</code> as they are <em>not</em> true time zones, not standardized, and not even unique(!). </p>\n\n<pre><code>ZoneId z = ZoneId.of( \"America/Montreal\" ) ;  \nLocalDate today = LocalDate.now( z ) ;\n</code></pre>\n\n<p>If you want to use the JVM’s current default time zone, ask for it and pass as an argument. If omitted, the JVM’s current default is applied implicitly. Better to be explicit.</p>\n\n<pre><code>ZoneId z = ZoneId.systemDefault() ;  // Get JVM’s current default time zone.\n</code></pre>\n\n<p>Determine tomorrow by adding a day.</p>\n\n<pre><code>LocalDate tomorrow = today.plusDays( 1 ) ;\n</code></pre>\n\n<p>Apply the time-of-day and desired time zone to produce a <code>ZonedDateTime</code>. If your time-of-day is not valid for that date in that zone because of anomalies such as Daylight Saving Time (DST), the class automatically adjusts. Read the doc to be sure you understand and agree to the behavior of those adjustments.</p>\n\n<pre><code>ZonedDateTime zdt = ZonedDateTime.of( tomorrow , lt , z ) ; // Get a specific moment in time given a particular date, time-of-day, and zone.\n</code></pre>\n\n<hr>\n\n<h1>About <em>java.time</em></h1>\n\n<p>The <a href=\"http://docs.oracle.com/javase/9/docs/api/java/time/package-summary.html\" rel=\"nofollow noreferrer\"><em>java.time</em></a> framework is built into Java 8 and later. These classes supplant the troublesome old <a href=\"https://en.wikipedia.org/wiki/Legacy_system\" rel=\"nofollow noreferrer\">legacy</a> date-time classes such as <a href=\"https://docs.oracle.com/javase/9/docs/api/java/util/Date.html\" rel=\"nofollow noreferrer\"><code>java.util.Date</code></a>, <a href=\"https://docs.oracle.com/javase/9/docs/api/java/util/Calendar.html\" rel=\"nofollow noreferrer\"><code>Calendar</code></a>, &amp; <a href=\"http://docs.oracle.com/javase/9/docs/api/java/text/SimpleDateFormat.html\" rel=\"nofollow noreferrer\"><code>SimpleDateFormat</code></a>.</p>\n\n<p>The <a href=\"http://www.joda.org/joda-time/\" rel=\"nofollow noreferrer\"><em>Joda-Time</em></a> project, now in <a href=\"https://en.wikipedia.org/wiki/Maintenance_mode\" rel=\"nofollow noreferrer\">maintenance mode</a>, advises migration to the <a href=\"http://docs.oracle.com/javase/9/docs/api/java/time/package-summary.html\" rel=\"nofollow noreferrer\">java.time</a> classes.</p>\n\n<p>To learn more, see the <a href=\"http://docs.oracle.com/javase/tutorial/datetime/TOC.html\" rel=\"nofollow noreferrer\"><em>Oracle Tutorial</em></a>. And search Stack Overflow for many examples and explanations. Specification is <a href=\"https://jcp.org/en/jsr/detail?id=310\" rel=\"nofollow noreferrer\">JSR 310</a>.</p>\n\n<p>Where to obtain the java.time classes? </p>\n\n<ul>\n<li><a href=\"https://en.wikipedia.org/wiki/Java_version_history#Java_SE_8\" rel=\"nofollow noreferrer\"><strong>Java SE 8</strong></a>, <a href=\"https://en.wikipedia.org/wiki/Java_version_history#Java_SE_9\" rel=\"nofollow noreferrer\"><strong>Java SE 9</strong></a>, and later\n\n<ul>\n<li>Built-in. </li>\n<li>Part of the standard Java API with a bundled implementation.</li>\n<li>Java 9 adds some minor features and fixes.</li>\n</ul></li>\n<li><a href=\"https://en.wikipedia.org/wiki/Java_version_history#Java_SE_6\" rel=\"nofollow noreferrer\"><strong>Java SE 6</strong></a> and <a href=\"https://en.wikipedia.org/wiki/Java_version_history#Java_SE_7\" rel=\"nofollow noreferrer\"><strong>Java SE 7</strong></a>\n\n<ul>\n<li>Much of the java.time functionality is back-ported to Java 6 &amp; 7 in <a href=\"http://www.threeten.org/threetenbp/\" rel=\"nofollow noreferrer\"><strong><em>ThreeTen-Backport</em></strong></a>.</li>\n</ul></li>\n<li><a href=\"https://en.wikipedia.org/wiki/Android_(operating_system)\" rel=\"nofollow noreferrer\"><strong>Android</strong></a>\n\n<ul>\n<li>Later versions of Android bundle implementations of the java.time classes.</li>\n<li>For earlier Android, the <a href=\"https://github.com/JakeWharton/ThreeTenABP\" rel=\"nofollow noreferrer\"><strong><em>ThreeTenABP</em></strong></a> project adapts <em>ThreeTen-Backport</em> (mentioned above). See <a href=\"http://stackoverflow.com/q/38922754/642706\"><em>How to use ThreeTenABP…</em></a>.</li>\n</ul></li>\n</ul>\n"},{"tags":[],"owner":{"account_id":16192048,"reputation":2376,"user_id":11690526,"display_name":"Tippu Fisal Sheriff"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691671639,"creation_date":1691671639,"answer_id":76875874,"question_id":10608845,"body_markdown":"Use below keyword to set AM / PM \r\n\r\n**Calendar.AM** \r\n\r\n**Calendar.PM**\r\n\r\n    val startDate = Calendar.getInstance().apply {\r\n                    timeInMillis = System.currentTimeMillis()\r\n                    set(HOUR_OF_DAY, Calendar.AM) // Calendar.PM\r\n                    set(Calendar.HOUR, 9)\r\n                    set(Calendar.MINUTE, 0)\r\n                    set(Calendar.SECOND, 0)\r\n                }.timeInMillis\r\n\r\n","title":"Android Calendar Set Am or Pm time not 24 Hour","body":"<p>Use below keyword to set AM / PM</p>\n<p><strong>Calendar.AM</strong></p>\n<p><strong>Calendar.PM</strong></p>\n<pre><code>val startDate = Calendar.getInstance().apply {\n                timeInMillis = System.currentTimeMillis()\n                set(HOUR_OF_DAY, Calendar.AM) // Calendar.PM\n                set(Calendar.HOUR, 9)\n                set(Calendar.MINUTE, 0)\n                set(Calendar.SECOND, 0)\n            }.timeInMillis\n</code></pre>\n"}],"owner":{"account_id":304762,"reputation":11899,"user_id":614460,"accept_rate":74,"display_name":"Somk"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":18836,"favorite_count":0,"down_vote_count":0,"up_vote_count":7,"accepted_answer_id":10608921,"answer_count":5,"score":7,"last_activity_date":1691671639,"creation_date":1337115772,"question_id":10608845,"body_markdown":"I have a script at the moment that is always being passed the time in an AM PM format. But I do not know how to set the calendar with this time as it only accepts 24 hour format the way I have the code written. How would I convert the time to 24 hour or input a 12 hour format?\r\n\r\n     \t     calendar.set(Calendar.HOUR_OF_DAY, HourValue);\r\n     \t     calendar.set(Calendar.MINUTE, MinuteValue);\r\n     \t     calendar.set(Calendar.SECOND, 0);\r\n     \t     calendar.add(Calendar.MINUTE, -356);","title":"Android Calendar Set Am or Pm time not 24 Hour","body":"<p>I have a script at the moment that is always being passed the time in an AM PM format. But I do not know how to set the calendar with this time as it only accepts 24 hour format the way I have the code written. How would I convert the time to 24 hour or input a 12 hour format?</p>\n\n<pre><code>         calendar.set(Calendar.HOUR_OF_DAY, HourValue);\n         calendar.set(Calendar.MINUTE, MinuteValue);\n         calendar.set(Calendar.SECOND, 0);\n         calendar.add(Calendar.MINUTE, -356);\n</code></pre>\n"},{"tags":["java","maven","javadoc"],"comments":[{"owner":{"account_id":1992310,"reputation":11172,"user_id":1786065,"accept_rate":91,"display_name":"Rogue"},"score":0,"creation_date":1691672443,"post_id":76875852,"comment_id":135524988,"body_markdown":"Generally you wouldn&#39;t distribute javadocs with a packaged jarfile, but either through a web server or as a separate artifact. Why do you want this?","body":"Generally you wouldn&#39;t distribute javadocs with a packaged jarfile, but either through a web server or as a separate artifact. Why do you want this?"},{"owner":{"account_id":16692912,"reputation":11,"user_id":22369697,"display_name":"Fr33styler"},"score":0,"creation_date":1691672639,"post_id":76875852,"comment_id":135525033,"body_markdown":"The end result is to post it on a website like any other javadocs I see","body":"The end result is to post it on a website like any other javadocs I see"},{"owner":{"account_id":1992310,"reputation":11172,"user_id":1786065,"accept_rate":91,"display_name":"Rogue"},"score":0,"creation_date":1691672821,"post_id":76875852,"comment_id":135525064,"body_markdown":"Right. What most people do there is simply take the generated folder/&quot;jar&quot; (A `.jar` is a `.zip` file, and javadoc jars just contain the .html/etc), place it on a server, and point their webserver (apache/nginx/etc) at the root directory of the generated files. That&#39;s it really, the javadoc tool generates working webpages.","body":"Right. What most people do there is simply take the generated folder/&quot;jar&quot; (A <code>.jar</code> is a <code>.zip</code> file, and javadoc jars just contain the .html/etc), place it on a server, and point their webserver (apache/nginx/etc) at the root directory of the generated files. That&#39;s it really, the javadoc tool generates working webpages."},{"owner":{"account_id":16692912,"reputation":11,"user_id":22369697,"display_name":"Fr33styler"},"score":0,"creation_date":1691673323,"post_id":76875852,"comment_id":135525187,"body_markdown":"Hmm, but how would that include the relocations?","body":"Hmm, but how would that include the relocations?"},{"owner":{"account_id":1992310,"reputation":11172,"user_id":1786065,"accept_rate":91,"display_name":"Rogue"},"score":0,"creation_date":1691673597,"post_id":76875852,"comment_id":135525259,"body_markdown":"When you say &quot;relocations&quot;, what do _you_ mean? Are you concerned about links? What doesn&#39;t work &quot;the same way&quot; in one situation vs. another? I can guess at the meaning of things, but I think maybe the question could use a few more details so I&#39;m not shooting in the dark. Pretend I&#39;m dumb and really spell it out, sometimes the detail helps answer your own question a bit.","body":"When you say &quot;relocations&quot;, what do <i>you</i> mean? Are you concerned about links? What doesn&#39;t work &quot;the same way&quot; in one situation vs. another? I can guess at the meaning of things, but I think maybe the question could use a few more details so I&#39;m not shooting in the dark. Pretend I&#39;m dumb and really spell it out, sometimes the detail helps answer your own question a bit."},{"owner":{"account_id":16692912,"reputation":11,"user_id":22369697,"display_name":"Fr33styler"},"score":0,"creation_date":1691673998,"post_id":76875852,"comment_id":135525357,"body_markdown":"What I mean with relocations are the ones generated by the maven shade plugin, links wouldn&#39;t work properly in my task as it would show the library as unaltered.","body":"What I mean with relocations are the ones generated by the maven shade plugin, links wouldn&#39;t work properly in my task as it would show the library as unaltered."},{"owner":{"account_id":1992310,"reputation":11172,"user_id":1786065,"accept_rate":91,"display_name":"Rogue"},"score":0,"creation_date":1691677204,"post_id":76875852,"comment_id":135526182,"body_markdown":"Mind you, until you&#39;ve installed a new artifact (whether web-based javadocs or a maven repo artifact) then what you&#39;ve linked against won&#39;t update. Regarding the javadoc plugin, there&#39;s [setting up external links](https://maven.apache.org/plugins/maven-javadoc-plugin/examples/links-configuration.html) to javadoc repos. If you automate the deployment of the javadocs to the webserver (say on maven deploy), then it&#39;d update the javadocs when you run it.","body":"Mind you, until you&#39;ve installed a new artifact (whether web-based javadocs or a maven repo artifact) then what you&#39;ve linked against won&#39;t update. Regarding the javadoc plugin, there&#39;s <a href=\"https://maven.apache.org/plugins/maven-javadoc-plugin/examples/links-configuration.html\" rel=\"nofollow noreferrer\">setting up external links</a> to javadoc repos. If you automate the deployment of the javadocs to the webserver (say on maven deploy), then it&#39;d update the javadocs when you run it."},{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1691677404,"post_id":76875852,"comment_id":135526236,"body_markdown":"Please edit the question to limit it to a specific problem with enough detail to identify an adequate answer.","body":"Please edit the question to limit it to a specific problem with enough detail to identify an adequate answer."}],"owner":{"account_id":16692912,"reputation":11,"user_id":22369697,"display_name":"Fr33styler"},"comment_count":8,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":23,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1691671437,"creation_date":1691671437,"question_id":76875852,"body_markdown":"I have a minigame that depends on a minigame engine, I am relocating the minigame engine in a sub package of the minigame called engine and also relocating the API part of the engine inside the minigame API. This part works flawlessly, but I want to make java docs that works the same way. I&#39;ve tried maven-javadoc-plugin and that part works but it has no shading/relocating ability from what I could see, so I&#39;m asking, is there a way to shade and relocate javadocs?\r\n\r\n","title":"Looking for a way to shade and relocate javadocs in my api module using maven (preferably)","body":"<p>I have a minigame that depends on a minigame engine, I am relocating the minigame engine in a sub package of the minigame called engine and also relocating the API part of the engine inside the minigame API. This part works flawlessly, but I want to make java docs that works the same way. I've tried maven-javadoc-plugin and that part works but it has no shading/relocating ability from what I could see, so I'm asking, is there a way to shade and relocate javadocs?</p>\n"},{"tags":["java","spring-boot","authentication","spring-security","jwt"],"comments":[{"owner":{"account_id":18971319,"reputation":3,"user_id":13844726,"display_name":"Tarun Kumar"},"score":0,"creation_date":1691592884,"post_id":76868708,"comment_id":135513064,"body_markdown":"Yes i have added `@EnableGlobalMethodSecurity(prePostEnabled = true)` in MySecurityConfig class","body":"Yes i have added <code>@EnableGlobalMethodSecurity(prePostEnabled = true)</code> in MySecurityConfig class"},{"owner":{"account_id":24440940,"reputation":3122,"user_id":18364656,"display_name":"Andrei Lisa"},"score":0,"creation_date":1691593080,"post_id":76868708,"comment_id":135513107,"body_markdown":"i just looked one more time on your code and i gave a answer.","body":"i just looked one more time on your code and i gave a answer."}],"answers":[{"tags":[],"owner":{"account_id":24440940,"reputation":3122,"user_id":18364656,"display_name":"Andrei Lisa"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1691671364,"creation_date":1691592960,"answer_id":76868993,"question_id":76868708,"body_markdown":"**By default, spring creates the bean&#39;s name the same as the bean initializing method name. So in your project, spring creates a bean of type `AuthenticationManager` named as `authenticationManagerBean`.**\r\n\r\nIn your controller(`AuthenticationController`) where you inject `AuthenticationManager` replace:\r\n\r\n        @Autowired\r\n        private AuthenticationManager authenticationManager;\r\n\r\nto\r\n\r\n        @Autowired\r\n        private AuthenticationManager authenticationManagerBean;\r\n\r\n\r\nOR use the `@Qualifier` in your controller class:\r\n\r\n        @Autowired\r\n        @Qualifier(&quot;authenticationManagerBean&quot;)\r\n        private AuthenticationManager authenticationManager;\r\n\r\n\r\n\r\n\r\n**UPDATE**\r\n\r\nThe Problem why application not found `AuthenticationManager` **it is in your project structure**, you are declaring next one structure:\r\n\r\n    package config;\r\n\r\n[![wrong structure][1]][1] \r\n\r\n**That is outside and Spring can not scan declared `Bean` there**\r\n\r\nTo fix it:\r\n\r\nMove your `config` package under `skillassess`.\r\n\r\nSomething like this:\r\n\r\n[![correct][2]][2]\r\n\r\n    package com.exam.skillassess.config;\r\n\r\n[structuring-your-code][3]\r\n\r\nAnother approach is to add one more annotation on **SkillassessApplication** class that will scan your both packages\r\n\r\n    @ComponentScan(basePackages = {\r\n    \t\t&quot;config&quot;, &quot;com.exam.skillassess&quot;\r\n    })\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/UuzqT.png\r\n  [2]: https://i.stack.imgur.com/cO808.png\r\n  [3]: https://docs.spring.io/spring-boot/docs/current/reference/html/using.html#using.structuring-your-code","title":"Consider defining bean of type authentication manager","body":"<p><strong>By default, spring creates the bean's name the same as the bean initializing method name. So in your project, spring creates a bean of type <code>AuthenticationManager</code> named as <code>authenticationManagerBean</code>.</strong></p>\n<p>In your controller(<code>AuthenticationController</code>) where you inject <code>AuthenticationManager</code> replace:</p>\n<pre><code>    @Autowired\n    private AuthenticationManager authenticationManager;\n</code></pre>\n<p>to</p>\n<pre><code>    @Autowired\n    private AuthenticationManager authenticationManagerBean;\n</code></pre>\n<p>OR use the <code>@Qualifier</code> in your controller class:</p>\n<pre><code>    @Autowired\n    @Qualifier(&quot;authenticationManagerBean&quot;)\n    private AuthenticationManager authenticationManager;\n</code></pre>\n<p><strong>UPDATE</strong></p>\n<p>The Problem why application not found <code>AuthenticationManager</code> <strong>it is in your project structure</strong>, you are declaring next one structure:</p>\n<pre><code>package config;\n</code></pre>\n<p><a href=\"https://i.stack.imgur.com/UuzqT.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/UuzqT.png\" alt=\"wrong structure\" /></a></p>\n<p><strong>That is outside and Spring can not scan declared <code>Bean</code> there</strong></p>\n<p>To fix it:</p>\n<p>Move your <code>config</code> package under <code>skillassess</code>.</p>\n<p>Something like this:</p>\n<p><a href=\"https://i.stack.imgur.com/cO808.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/cO808.png\" alt=\"correct\" /></a></p>\n<pre><code>package com.exam.skillassess.config;\n</code></pre>\n<p><a href=\"https://docs.spring.io/spring-boot/docs/current/reference/html/using.html#using.structuring-your-code\" rel=\"nofollow noreferrer\">structuring-your-code</a></p>\n<p>Another approach is to add one more annotation on <strong>SkillassessApplication</strong> class that will scan your both packages</p>\n<pre><code>@ComponentScan(basePackages = {\n        &quot;config&quot;, &quot;com.exam.skillassess&quot;\n})\n</code></pre>\n"}],"owner":{"account_id":18971319,"reputation":3,"user_id":13844726,"display_name":"Tarun Kumar"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":145,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76868993,"answer_count":1,"score":0,"last_activity_date":1691671364,"creation_date":1691590895,"question_id":76868708,"body_markdown":"I am trying implement `jwt` authentication with spring security but I am getting following error :- \r\n\r\n    java version - 1.8\r\n    spring version - 2.3.3.RELEASE\r\n    \r\n    Description:\r\n    \r\n    Field authenticationManager in com.exam.skillassess.controller.AuthenticationController required a bean of type &#39;org.springframework.security.authentication.AuthenticationManager&#39; that could not be found.\r\n\r\nThe injection point has the following annotations:\r\n\t- @org.springframework.beans.factory.annotation.Autowired(required=true)\r\n\r\n\r\nAction:\r\n\r\n    Consider defining a bean of type &#39;org.springframework.security.authentication.AuthenticationManager&#39; in your configuration.\r\n\r\n\r\nI have read all related answers and tried solutions provided but still getting error:-\r\n\r\nthis is authentication controller class -&gt;\r\n\r\n\r\n    @RestController\r\n    public class AuthenticationController {\r\n    \t\r\n    \t@Autowired\r\n    \tprivate AuthenticationManager authenticationManager;\r\n    \t\r\n    \t@Autowired\r\n    \tprivate UserDetailsServiceImpl userDetailsService;\r\n    \t\r\n    \t@Autowired\r\n    \tprivate JwtUtils jwtUtils;\r\n    \t\r\n    \t@PostMapping(&quot;/generate-token&quot;)\r\n    \tpublic ResponseEntity&lt;?&gt; generateToken(@RequestBody JwtRequest request) throws Exception{\r\n    \t\t\r\n    \t\ttry {\r\n    \t\t\tauthenticate(request.getUsername(), request.getPassword());\r\n    \t\t\t\r\n    \t\t}catch(UsernameNotFoundException e) {\r\n    \t\t\te.printStackTrace();\r\n    \t\t\tthrow new Exception(&quot;User not found Exception&quot;);\r\n    \t\t}\r\n    \t\tUserDetails userDetails = this.userDetailsService.loadUserByUsername(request.getUsername());\r\n    \t\tString token = this.jwtUtils.generateToken(userDetails);\r\n    \t\treturn ResponseEntity.ok(new JwtResponse(token));\r\n    \t}\r\n    \t\r\n    \tprivate void authenticate(String username, String password) throws Exception {\r\n    \t\ttry {\r\n    \t\t\tauthenticationManager.authenticate(new UsernamePasswordAuthenticationToken(username, password));  \r\n    \t\t}catch(DisabledException e) {\r\n    \t\t\tthrow new Exception(&quot;User Disabled&quot; + e.getMessage());\r\n    \t\t}catch(BadCredentialsException e) {\r\n    \t\t\tthrow new Exception(&quot;Bad Credentials&quot; + e.getMessage());\r\n    \t\t}\r\n    \t}\r\n    }\r\n\r\n\r\nThis is security configuration class -&gt;\r\n\r\n    @EnableWebSecurity\r\n    @Configuration\r\n    \r\n    public class MySecurityConfig extends WebSecurityConfigurerAdapter{\r\n    \r\n    \t@Autowired\r\n    \tprivate JwtAuthenticationEntryPoint unAuthorizedHandler;\r\n    \t\r\n    \t@Autowired\r\n    \tprivate JwtAuthenticationFilter jwtAuthenticationFilter;\r\n    \t\r\n    \t@Override\r\n    \t@Bean\r\n    \tpublic AuthenticationManager authenticationManagerBean() throws Exception {\r\n    \t\treturn super.authenticationManagerBean();\r\n    \t}\r\n    \t\r\n    \t@Autowired\r\n    \tprivate UserDetailsServiceImpl userDetailsServiceImpl;\r\n    \t\r\n    \t@Bean\r\n    \tpublic BCryptPasswordEncoder passwordEncoder() {\r\n    \t\treturn new BCryptPasswordEncoder();\r\n    \t}\r\n    \t\r\n    \t@Override\r\n    \tprotected void configure(AuthenticationManagerBuilder auth) throws Exception {\r\n    \t\tauth.userDetailsService(this.userDetailsServiceImpl).passwordEncoder(passwordEncoder());\r\n    \t}\r\n    \r\n    \t@Override\r\n    \tprotected void configure(HttpSecurity http) throws Exception {\r\n    \t\thttp.csrf().disable()\r\n    \t\t.cors()\r\n    \t\t.disable()\r\n    \t\t.authorizeRequests()\r\n    \t\t.antMatchers(&quot;/generate-token&quot;, &quot;/user/&quot;).permitAll()\r\n    \t\t.antMatchers(HttpMethod.OPTIONS).permitAll()\r\n    \t\t.anyRequest().authenticated()\r\n    \t\t.and()\r\n    \t\t.exceptionHandling().authenticationEntryPoint(unAuthorizedHandler)\r\n    \t\t.and()\r\n    \t\t.sessionManagement().sessionCreationPolicy(SessionCreationPolicy.STATELESS);\r\n    \t\t\r\n    \thttp.addFilterBefore(jwtAuthenticationFilter,UsernamePasswordAuthenticationFilter.class);\r\n    \t}\r\n    \t\r\n    }\r\n\r\npom.xml -&gt;\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n    &lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n    \txsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\r\n    \t&lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n    \t&lt;parent&gt;\r\n    \t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n    \t\t&lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\r\n    \t\t&lt;version&gt;2.3.3.RELEASE&lt;/version&gt;\r\n    \t\t&lt;relativePath/&gt;&lt;!--lookup parent from repository --&gt;\r\n    \t&lt;/parent&gt;\r\n    \t&lt;groupId&gt;com.exam&lt;/groupId&gt;\r\n    \t&lt;artifactId&gt;skillassess&lt;/artifactId&gt;\r\n    \t&lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\r\n    \t&lt;name&gt;skillassess&lt;/name&gt;\r\n    \t&lt;description&gt;Demo project for Spring Boot&lt;/description&gt;\r\n    \t&lt;properties&gt;\r\n    \t\t&lt;java.version&gt;1.8&lt;/java.version&gt;\r\n    \t&lt;/properties&gt;\r\n    \t&lt;dependencies&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\r\n    \t\t\t&lt;scope&gt;test&lt;/scope&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t        &lt;groupId&gt;mysql&lt;/groupId&gt;\r\n    \t        &lt;artifactId&gt;mysql-connector-java&lt;/artifactId&gt;\r\n    \t        &lt;version&gt;8.0.26&lt;/version&gt;\r\n        \t&lt;/dependency&gt;\r\n    \t\t&lt;!-- Security dependencies for jwt --&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n    \t\t    &lt;artifactId&gt;spring-boot-starter-security&lt;/artifactId&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t    &lt;groupId&gt;io.jsonwebtoken&lt;/groupId&gt;\r\n    \t\t    &lt;artifactId&gt;jjwt&lt;/artifactId&gt;\r\n    \t\t    &lt;version&gt;0.9.0&lt;/version&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t    &lt;groupId&gt;javax.xml.bind&lt;/groupId&gt;\r\n    \t\t    &lt;artifactId&gt;jaxb-api&lt;/artifactId&gt;\r\n    \t\t    &lt;version&gt;2.3.1&lt;/version&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t\t&lt;!-- Security dependencies for jwt --&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n    \t\t    &lt;artifactId&gt;spring-boot-devtools&lt;/artifactId&gt;\r\n    \t\t    &lt;optional&gt;true&lt;/optional&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t&lt;/dependencies&gt;\r\n    \t&lt;build&gt;\r\n    \t\t&lt;plugins&gt;\r\n    \t\t\t&lt;plugin&gt;\r\n    \t\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n    \t\t\t\t&lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\r\n    \t\t\t&lt;/plugin&gt;\r\n    \t\t&lt;/plugins&gt;\r\n    \t&lt;/build&gt;\r\n    &lt;/project&gt;\r\n\r\n","title":"Consider defining bean of type authentication manager","body":"<p>I am trying implement <code>jwt</code> authentication with spring security but I am getting following error :-</p>\n<pre><code>java version - 1.8\nspring version - 2.3.3.RELEASE\n\nDescription:\n\nField authenticationManager in com.exam.skillassess.controller.AuthenticationController required a bean of type 'org.springframework.security.authentication.AuthenticationManager' that could not be found.\n</code></pre>\n<p>The injection point has the following annotations:\n- @org.springframework.beans.factory.annotation.Autowired(required=true)</p>\n<p>Action:</p>\n<pre><code>Consider defining a bean of type 'org.springframework.security.authentication.AuthenticationManager' in your configuration.\n</code></pre>\n<p>I have read all related answers and tried solutions provided but still getting error:-</p>\n<p>this is authentication controller class -&gt;</p>\n<pre><code>@RestController\npublic class AuthenticationController {\n    \n    @Autowired\n    private AuthenticationManager authenticationManager;\n    \n    @Autowired\n    private UserDetailsServiceImpl userDetailsService;\n    \n    @Autowired\n    private JwtUtils jwtUtils;\n    \n    @PostMapping(&quot;/generate-token&quot;)\n    public ResponseEntity&lt;?&gt; generateToken(@RequestBody JwtRequest request) throws Exception{\n        \n        try {\n            authenticate(request.getUsername(), request.getPassword());\n            \n        }catch(UsernameNotFoundException e) {\n            e.printStackTrace();\n            throw new Exception(&quot;User not found Exception&quot;);\n        }\n        UserDetails userDetails = this.userDetailsService.loadUserByUsername(request.getUsername());\n        String token = this.jwtUtils.generateToken(userDetails);\n        return ResponseEntity.ok(new JwtResponse(token));\n    }\n    \n    private void authenticate(String username, String password) throws Exception {\n        try {\n            authenticationManager.authenticate(new UsernamePasswordAuthenticationToken(username, password));  \n        }catch(DisabledException e) {\n            throw new Exception(&quot;User Disabled&quot; + e.getMessage());\n        }catch(BadCredentialsException e) {\n            throw new Exception(&quot;Bad Credentials&quot; + e.getMessage());\n        }\n    }\n}\n</code></pre>\n<p>This is security configuration class -&gt;</p>\n<pre><code>@EnableWebSecurity\n@Configuration\n\npublic class MySecurityConfig extends WebSecurityConfigurerAdapter{\n\n    @Autowired\n    private JwtAuthenticationEntryPoint unAuthorizedHandler;\n    \n    @Autowired\n    private JwtAuthenticationFilter jwtAuthenticationFilter;\n    \n    @Override\n    @Bean\n    public AuthenticationManager authenticationManagerBean() throws Exception {\n        return super.authenticationManagerBean();\n    }\n    \n    @Autowired\n    private UserDetailsServiceImpl userDetailsServiceImpl;\n    \n    @Bean\n    public BCryptPasswordEncoder passwordEncoder() {\n        return new BCryptPasswordEncoder();\n    }\n    \n    @Override\n    protected void configure(AuthenticationManagerBuilder auth) throws Exception {\n        auth.userDetailsService(this.userDetailsServiceImpl).passwordEncoder(passwordEncoder());\n    }\n\n    @Override\n    protected void configure(HttpSecurity http) throws Exception {\n        http.csrf().disable()\n        .cors()\n        .disable()\n        .authorizeRequests()\n        .antMatchers(&quot;/generate-token&quot;, &quot;/user/&quot;).permitAll()\n        .antMatchers(HttpMethod.OPTIONS).permitAll()\n        .anyRequest().authenticated()\n        .and()\n        .exceptionHandling().authenticationEntryPoint(unAuthorizedHandler)\n        .and()\n        .sessionManagement().sessionCreationPolicy(SessionCreationPolicy.STATELESS);\n        \n    http.addFilterBefore(jwtAuthenticationFilter,UsernamePasswordAuthenticationFilter.class);\n    }\n    \n}\n</code></pre>\n<p>pom.xml -&gt;</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n    xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n    &lt;parent&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\n        &lt;version&gt;2.3.3.RELEASE&lt;/version&gt;\n        &lt;relativePath/&gt;&lt;!--lookup parent from repository --&gt;\n    &lt;/parent&gt;\n    &lt;groupId&gt;com.exam&lt;/groupId&gt;\n    &lt;artifactId&gt;skillassess&lt;/artifactId&gt;\n    &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\n    &lt;name&gt;skillassess&lt;/name&gt;\n    &lt;description&gt;Demo project for Spring Boot&lt;/description&gt;\n    &lt;properties&gt;\n        &lt;java.version&gt;1.8&lt;/java.version&gt;\n    &lt;/properties&gt;\n    &lt;dependencies&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;mysql&lt;/groupId&gt;\n            &lt;artifactId&gt;mysql-connector-java&lt;/artifactId&gt;\n            &lt;version&gt;8.0.26&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;!-- Security dependencies for jwt --&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-security&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;io.jsonwebtoken&lt;/groupId&gt;\n            &lt;artifactId&gt;jjwt&lt;/artifactId&gt;\n            &lt;version&gt;0.9.0&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;javax.xml.bind&lt;/groupId&gt;\n            &lt;artifactId&gt;jaxb-api&lt;/artifactId&gt;\n            &lt;version&gt;2.3.1&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;!-- Security dependencies for jwt --&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-devtools&lt;/artifactId&gt;\n            &lt;optional&gt;true&lt;/optional&gt;\n        &lt;/dependency&gt;\n    &lt;/dependencies&gt;\n    &lt;build&gt;\n        &lt;plugins&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n                &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\n            &lt;/plugin&gt;\n        &lt;/plugins&gt;\n    &lt;/build&gt;\n&lt;/project&gt;\n</code></pre>\n"},{"tags":["java","postgresql","hibernate","quarkus","hibernate-types"],"comments":[{"owner":{"account_id":101001,"reputation":119788,"user_id":271959,"display_name":"Frank Heikens"},"score":0,"creation_date":1691618240,"post_id":76871475,"comment_id":135517643,"body_markdown":"Cast the input explicit to a tstzrange: upper (CAST(rangeZonedDateTime AS tstzrange))","body":"Cast the input explicit to a tstzrange: upper (CAST(rangeZonedDateTime AS tstzrange))"},{"owner":{"account_id":172495,"reputation":1311,"user_id":400571,"accept_rate":67,"display_name":"Michal Drozd"},"score":0,"creation_date":1691645118,"post_id":76871475,"comment_id":135519951,"body_markdown":"@FrankHeikens but this could work only for native queries right? Here I have JPQL","body":"@FrankHeikens but this could work only for native queries right? Here I have JPQL"}],"owner":{"account_id":172495,"reputation":1311,"user_id":400571,"accept_rate":67,"display_name":"Michal Drozd"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":160,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1691671222,"creation_date":1691617666,"question_id":76871475,"body_markdown":"I&#39;m developing a Quarkus 3 application where I&#39;ve integrated Hibernate 6. To work with custom PostgreSQL types, specifically `tstzrange`, I&#39;ve incorporated `hypersistence-utils-hibernate-62` from hypersistence-utils. This serves as a replacement for the older hibernate-types.\r\n\r\nHowever looks like now I can not use upper() and lower() functions anymore in JPQ, for example:\r\n```\r\nList&lt;Restriction&gt; resultList = entityManager.createQuery(\r\n    &quot;from AgeRestriction where upper(rangeZonedDateTime) is not null&quot;, \r\n    Restriction.class\r\n).getResultList();\r\n```\r\nHere, `rangeZonedDateTime` is defined as a `tstzrange` type. When executing this, I encounter the following error:\r\n```\r\njava.lang.IllegalArgumentException: org.hibernate.QueryException: Parameter 1 of function upper() has type STRING,\r\nbut argument is of type io.hypersistence.utils.hibernate.type.range.Range\r\n```\r\nIt seems like Hibernate now interprets the `upper()` function as a string manipulation function (to convert characters to uppercase), rather than a function to get the upper bound of the tstzrange.\r\n\r\nI&#39;ve tried setting up a custom dialects in the application&#39;s configuration, but it doesn&#39;t seem to make any difference,, for example:\r\n```\r\nquarkus.hibernate-orm.dialect=org.hibernate.dialect.PostgreSQLDialect\r\n```\r\n\r\nBasically, I just extended this test:\r\nhttps://github.com/vladmihalcea/hypersistence-utils/blob/master/hypersistence-utils-hibernate-62/src/test/java/io/hypersistence/utils/hibernate/type/range/ZonedDateTimeMilliSecondTest.java\r\n\r\nIs it still possible to use upper/lower for range types in JPQL in Hibernate 6.x ?\r\n","title":"Using upper() and lower() functions with tstzrange type in JPQL in Hibernate 6 with Quarkus 3","body":"<p>I'm developing a Quarkus 3 application where I've integrated Hibernate 6. To work with custom PostgreSQL types, specifically <code>tstzrange</code>, I've incorporated <code>hypersistence-utils-hibernate-62</code> from hypersistence-utils. This serves as a replacement for the older hibernate-types.</p>\n<p>However looks like now I can not use upper() and lower() functions anymore in JPQ, for example:</p>\n<pre><code>List&lt;Restriction&gt; resultList = entityManager.createQuery(\n    &quot;from AgeRestriction where upper(rangeZonedDateTime) is not null&quot;, \n    Restriction.class\n).getResultList();\n</code></pre>\n<p>Here, <code>rangeZonedDateTime</code> is defined as a <code>tstzrange</code> type. When executing this, I encounter the following error:</p>\n<pre><code>java.lang.IllegalArgumentException: org.hibernate.QueryException: Parameter 1 of function upper() has type STRING,\nbut argument is of type io.hypersistence.utils.hibernate.type.range.Range\n</code></pre>\n<p>It seems like Hibernate now interprets the <code>upper()</code> function as a string manipulation function (to convert characters to uppercase), rather than a function to get the upper bound of the tstzrange.</p>\n<p>I've tried setting up a custom dialects in the application's configuration, but it doesn't seem to make any difference,, for example:</p>\n<pre><code>quarkus.hibernate-orm.dialect=org.hibernate.dialect.PostgreSQLDialect\n</code></pre>\n<p>Basically, I just extended this test:\n<a href=\"https://github.com/vladmihalcea/hypersistence-utils/blob/master/hypersistence-utils-hibernate-62/src/test/java/io/hypersistence/utils/hibernate/type/range/ZonedDateTimeMilliSecondTest.java\" rel=\"nofollow noreferrer\">https://github.com/vladmihalcea/hypersistence-utils/blob/master/hypersistence-utils-hibernate-62/src/test/java/io/hypersistence/utils/hibernate/type/range/ZonedDateTimeMilliSecondTest.java</a></p>\n<p>Is it still possible to use upper/lower for range types in JPQL in Hibernate 6.x ?</p>\n"},{"tags":["java","minecraft","bukkit"],"comments":[{"owner":{"account_id":45213,"reputation":26348,"user_id":133203,"accept_rate":97,"display_name":"Federico klez Culloca"},"score":0,"creation_date":1660032254,"post_id":73288298,"comment_id":129430446,"body_markdown":"`instance` is `static`. `this` doesn&#39;t make sense and doesn&#39;t even exist in a static context. So you wouldn&#39;t be able to assign it `this` at the declaration point because `this` wouldn&#39;t exist. Instead you do that as soon as an instance is enabled by a call to `onEnable`. By the way, this looks like a lopsided [singleton](https://en.wikipedia.org/wiki/Singleton_pattern).","body":"<code>instance</code> is <code>static</code>. <code>this</code> doesn&#39;t make sense and doesn&#39;t even exist in a static context. So you wouldn&#39;t be able to assign it <code>this</code> at the declaration point because <code>this</code> wouldn&#39;t exist. Instead you do that as soon as an instance is enabled by a call to <code>onEnable</code>. By the way, this looks like a lopsided <a href=\"https://en.wikipedia.org/wiki/Singleton_pattern\" rel=\"nofollow noreferrer\">singleton</a>."},{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1660047693,"post_id":73288298,"comment_id":129435866,"body_markdown":"Please clarify your specific problem or provide additional details to highlight exactly what you need. As it&#39;s currently written, it&#39;s hard to tell exactly what you&#39;re asking.","body":"Please clarify your specific problem or provide additional details to highlight exactly what you need. As it&#39;s currently written, it&#39;s hard to tell exactly what you&#39;re asking."}],"answers":[{"tags":[],"owner":{"account_id":1637870,"reputation":553,"user_id":1510874,"display_name":"asbachb"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1660032395,"creation_date":1660032395,"answer_id":73288455,"question_id":73288298,"body_markdown":"`static` means that you don&#39;t need an instance (like `new Main()`) of a class to access a `field` or `method` (classes can be static as well).\r\n\r\ne.g. with a static method you can do\r\n\r\n```\r\nMain.method();\r\n```\r\n\r\ninstead of\r\n```\r\nnew Main().method();\r\n```\r\n\r\n`this` references a class instance. So when you call a `static` method there is no `this` reference as there is no class instance.\r\n\r\n---\r\n\r\nSo from my understanding what&#39;s happening here is that you plugin framework creates a new instance and calls the method `onEnable()` like: `new Main().onEnable()`. As `onEnable()` is not static you can access `this` and assign it to the `static` variable. So afterwards you can access that `static instance` variable from the `static` context of your `getInstance()` method.","title":"Minecraft&#39;s Plugin -getInstance","body":"<p><code>static</code> means that you don't need an instance (like <code>new Main()</code>) of a class to access a <code>field</code> or <code>method</code> (classes can be static as well).</p>\n<p>e.g. with a static method you can do</p>\n<pre><code>Main.method();\n</code></pre>\n<p>instead of</p>\n<pre><code>new Main().method();\n</code></pre>\n<p><code>this</code> references a class instance. So when you call a <code>static</code> method there is no <code>this</code> reference as there is no class instance.</p>\n<hr />\n<p>So from my understanding what's happening here is that you plugin framework creates a new instance and calls the method <code>onEnable()</code> like: <code>new Main().onEnable()</code>. As <code>onEnable()</code> is not static you can access <code>this</code> and assign it to the <code>static</code> variable. So afterwards you can access that <code>static instance</code> variable from the <code>static</code> context of your <code>getInstance()</code> method.</p>\n"},{"tags":[],"owner":{"account_id":28047938,"reputation":33,"user_id":21424354,"display_name":"Timas_bro"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1691671166,"creation_date":1691593644,"answer_id":76869083,"question_id":73288298,"body_markdown":"I would use a constructor. \r\n\r\nSecond class code:\r\n```\r\nimport org.bukkit.Bukkit;\r\nimport org.bukkit.event.EventHandler;\r\nimport org.bukkit.event.Listener;\r\n\r\npublic class Event implements Listener {\r\n\r\n    Main plugin;\r\n\r\n    public Event(Main plugin) {\r\n        this.plugin = plugin;\r\n    }\r\n\r\n    //now you can use plugin as instance.\r\n    plugin.getLogger().info(&quot;info&quot;);\r\n\r\n}\r\n```\r\n\r\nMain class:\r\n```\r\nimport org.bukkit.Bukkit;\r\nimport org.bukkit.plugin.java.JavaPlugin;\r\n\r\npublic class Main extends JavaPlugin {\r\n\r\n    @Override\r\n    public void onEnable() {\r\n        Bukkit.getPluginManager().registerEvents(new Event(this) , this);\r\n    }\r\n\r\n}\r\n```","title":"Minecraft&#39;s Plugin -getInstance","body":"<p>I would use a constructor.</p>\n<p>Second class code:</p>\n<pre><code>import org.bukkit.Bukkit;\nimport org.bukkit.event.EventHandler;\nimport org.bukkit.event.Listener;\n\npublic class Event implements Listener {\n\n    Main plugin;\n\n    public Event(Main plugin) {\n        this.plugin = plugin;\n    }\n\n    //now you can use plugin as instance.\n    plugin.getLogger().info(&quot;info&quot;);\n\n}\n</code></pre>\n<p>Main class:</p>\n<pre><code>import org.bukkit.Bukkit;\nimport org.bukkit.plugin.java.JavaPlugin;\n\npublic class Main extends JavaPlugin {\n\n    @Override\n    public void onEnable() {\n        Bukkit.getPluginManager().registerEvents(new Event(this) , this);\n    }\n\n}\n</code></pre>\n"}],"owner":{"account_id":26016295,"reputation":1,"user_id":19724570,"display_name":"Lin898"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":269,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":2,"score":-1,"last_activity_date":1691671166,"creation_date":1660031668,"question_id":73288298,"body_markdown":"I use static objects in order to use JavaPlugin in another class ，\r\nbut I can&#39;t understand why `instance = this;` should be written inside `onEnable()`.\r\n\r\nWhy can&#39;t it be written when we declare `private static Main instance;`?\r\n\r\n\r\n    \r\n    import org.bukkit.Bukkit;\r\n    import org.bukkit.configuration.file.FileConfiguration;\r\n    import org.bukkit.plugin.java.JavaPlugin;\r\n\r\n    public class Main extends JavaPlugin {\r\n    \r\n        private static Main instance;\r\n    \r\n        @Override\r\n    \r\n        public void onEnable(){\r\n    \r\n            instance = this;\r\n    \r\n            saveDefaultConfig();\r\n    \r\n            Bukkit.getPluginManager().registerEvents(new Event() , this);\r\n    \r\n        }\r\n        public static Main getInstance() {\r\n    \r\n            return instance;\r\n        }\r\n    \r\n    }","title":"Minecraft&#39;s Plugin -getInstance","body":"<p>I use static objects in order to use JavaPlugin in another class ，\nbut I can't understand why <code>instance = this;</code> should be written inside <code>onEnable()</code>.</p>\n<p>Why can't it be written when we declare <code>private static Main instance;</code>?</p>\n<pre><code>import org.bukkit.Bukkit;\nimport org.bukkit.configuration.file.FileConfiguration;\nimport org.bukkit.plugin.java.JavaPlugin;\n\npublic class Main extends JavaPlugin {\n\n    private static Main instance;\n\n    @Override\n\n    public void onEnable(){\n\n        instance = this;\n\n        saveDefaultConfig();\n\n        Bukkit.getPluginManager().registerEvents(new Event() , this);\n\n    }\n    public static Main getInstance() {\n\n        return instance;\n    }\n\n}\n</code></pre>\n"},{"tags":["java","excel","apache-poi"],"owner":{"account_id":29199321,"reputation":11,"user_id":22369780,"display_name":"soapcaicode"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":32,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":0,"score":0,"last_activity_date":1691671016,"creation_date":1691671016,"question_id":76875801,"body_markdown":"there.\r\n  I want to add a column to pivot table since creating pivot table and adding column are within one request.\r\n  And here is the code:\r\n  private void generatePreview(XSSFWorkbook wb) {\r\n    XSSFSheet inputSheet = wb.getSheet(&quot;Input&quot;); // this the data source of pivot table\r\n    XSSFSheet previewSheet = wb.createSheet(&quot;Preview&quot;); // this is the pivot table\r\n    XSSFPivotTable xssfPivotTable = previewSheet.createPivotTable(areaR, pos, inputSheet);\r\n    ...\r\n  }\r\n  columns:\r\n[enter image description here](https://i.stack.imgur.com/QherI.png)\r\n  Qty and Unit Price are from &quot;Input&quot;, how can I add &quot;Extended Price&quot;?\r\n[enter image description here](https://i.stack.imgur.com/FtN6m.png)\r\n  those three fields are Values.\r\n\r\n    private void addCalculatedField(XSSFPivotTable xssfPivotTable, CTPivotFields pivotFields, CTPivotTableDefinition pivotTableDefinition) {\r\n        CTCacheFields cacheFields = xssfPivotTable.getPivotCacheDefinition().getCTPivotCacheDefinition().getCacheFields();\r\n        CTCacheField cacheField = cacheFields.addNewCacheField();\r\n        cacheField.setName(&quot;Extended Price&quot;);\r\n        cacheField.setFormula(&quot;&#39;Group Qty&#39; * &#39;Group Price&#39;&quot;);\r\n        cacheField.setNumFmtId(0);\r\n\r\n        CTPivotField pivotField = pivotFields.addNewPivotField();\r\n        pivotField.setDataField(true);\r\n        pivotField.setShowAll(false);\r\n\r\n        CTDataFields dataFields;\r\n        if(pivotTableDefinition.getDataFields() != null) {\r\n            dataFields = pivotTableDefinition.getDataFields();\r\n        } else {\r\n            dataFields = pivotTableDefinition.addNewDataFields();\r\n        }\r\n        CTDataField dataField = dataFields.addNewDataField();\r\n        dataField.setName(&quot;Group Total Price&quot;);\r\n        dataField.setFld(cacheFields.getCount());\r\n        DataFormat dataFormat = xssfPivotTable.getParentSheet().getWorkbook().createDataFormat();\r\n        short format = dataFormat.getFormat(&quot;$#,##0.00_)&quot;);\r\n        dataField.setNumFmtId(format);\r\n    }\r\n\r\nThough the &quot;Extended Price&quot; is added, but it is not ticked and does not show on the table.\r\n[enter image description here](https://i.stack.imgur.com/8vvjq.png)","title":"add column to pivot table","body":"<p>there.\nI want to add a column to pivot table since creating pivot table and adding column are within one request.\nAnd here is the code:\nprivate void generatePreview(XSSFWorkbook wb) {\nXSSFSheet inputSheet = wb.getSheet(&quot;Input&quot;); // this the data source of pivot table\nXSSFSheet previewSheet = wb.createSheet(&quot;Preview&quot;); // this is the pivot table\nXSSFPivotTable xssfPivotTable = previewSheet.createPivotTable(areaR, pos, inputSheet);\n...\n}\ncolumns:\n<a href=\"https://i.stack.imgur.com/QherI.png\" rel=\"nofollow noreferrer\">enter image description here</a>\nQty and Unit Price are from &quot;Input&quot;, how can I add &quot;Extended Price&quot;?\n<a href=\"https://i.stack.imgur.com/FtN6m.png\" rel=\"nofollow noreferrer\">enter image description here</a>\nthose three fields are Values.</p>\n<pre><code>private void addCalculatedField(XSSFPivotTable xssfPivotTable, CTPivotFields pivotFields, CTPivotTableDefinition pivotTableDefinition) {\n    CTCacheFields cacheFields = xssfPivotTable.getPivotCacheDefinition().getCTPivotCacheDefinition().getCacheFields();\n    CTCacheField cacheField = cacheFields.addNewCacheField();\n    cacheField.setName(&quot;Extended Price&quot;);\n    cacheField.setFormula(&quot;'Group Qty' * 'Group Price'&quot;);\n    cacheField.setNumFmtId(0);\n\n    CTPivotField pivotField = pivotFields.addNewPivotField();\n    pivotField.setDataField(true);\n    pivotField.setShowAll(false);\n\n    CTDataFields dataFields;\n    if(pivotTableDefinition.getDataFields() != null) {\n        dataFields = pivotTableDefinition.getDataFields();\n    } else {\n        dataFields = pivotTableDefinition.addNewDataFields();\n    }\n    CTDataField dataField = dataFields.addNewDataField();\n    dataField.setName(&quot;Group Total Price&quot;);\n    dataField.setFld(cacheFields.getCount());\n    DataFormat dataFormat = xssfPivotTable.getParentSheet().getWorkbook().createDataFormat();\n    short format = dataFormat.getFormat(&quot;$#,##0.00_)&quot;);\n    dataField.setNumFmtId(format);\n}\n</code></pre>\n<p>Though the &quot;Extended Price&quot; is added, but it is not ticked and does not show on the table.\n<a href=\"https://i.stack.imgur.com/8vvjq.png\" rel=\"nofollow noreferrer\">enter image description here</a></p>\n"},{"tags":["java","arrays"],"comments":[{"owner":{"account_id":5150443,"reputation":34158,"user_id":4125191,"display_name":"RealSkeptic"},"score":1,"creation_date":1691318741,"post_id":76845478,"comment_id":135472970,"body_markdown":"Why do you think it should never be true?","body":"Why do you think it should never be true?"},{"owner":{"account_id":194308,"reputation":66720,"user_id":436560,"accept_rate":87,"display_name":"Lajos Arpad"},"score":1,"creation_date":1691319872,"post_id":76845478,"comment_id":135473078,"body_markdown":"Your code is syntactically incorrect. Please provide the actual code that you are testing with.","body":"Your code is syntactically incorrect. Please provide the actual code that you are testing with."},{"owner":{"account_id":194308,"reputation":66720,"user_id":436560,"accept_rate":87,"display_name":"Lajos Arpad"},"score":0,"creation_date":1691319989,"post_id":76845478,"comment_id":135473094,"body_markdown":"For example, `int coefficients = r.coefficient()  b.coefficient();` is invalid Java code.","body":"For example, <code>int coefficients = r.coefficient()  b.coefficient();</code> is invalid Java code."},{"owner":{"account_id":29073194,"reputation":1,"user_id":22270990,"display_name":"Sergej Lav Bojanić 2022"},"score":0,"creation_date":1691328059,"post_id":76845478,"comment_id":135473913,"body_markdown":"because the HasElement() method will return true if it encountered at least one element that is not equal to 0. And if it is a polynomial r, which I created with the constructor, to which I pass a reference to the current attributes of the object, at the first interaction I must have at least one element , (I think I&#39;m not wrong that ! is for negation, so if it is declared to have, negation is false, and then &amp;&amp; (conjugation) is false ) @RealSkeptic","body":"because the HasElement() method will return true if it encountered at least one element that is not equal to 0. And if it is a polynomial r, which I created with the constructor, to which I pass a reference to the current attributes of the object, at the first interaction I must have at least one element , (I think I&#39;m not wrong that ! is for negation, so if it is declared to have, negation is false, and then &amp;&amp; (conjugation) is false ) @RealSkeptic"},{"owner":{"account_id":29073194,"reputation":1,"user_id":22270990,"display_name":"Sergej Lav Bojanić 2022"},"score":0,"creation_date":1691328165,"post_id":76845478,"comment_id":135473927,"body_markdown":"Should I accept that code as an abstraction, because it is more of a mathematical product than Java. I have already deducted 4 days.","body":"Should I accept that code as an abstraction, because it is more of a mathematical product than Java. I have already deducted 4 days."},{"owner":{"account_id":23740623,"reputation":1,"user_id":17758716,"display_name":"Reilas"},"score":0,"creation_date":1691346869,"post_id":76845478,"comment_id":135476167,"body_markdown":"@SergejLavBojanić2022, _&quot;... I think I&#39;m not wrong that ! is for negation, so if it is declared to have, negation is false, and then &amp;&amp; (conjugation) is false ...&quot;_, well the statement reads, if _r_ does not have elements, and _r_ Power is greater-than or equal-to _b_ Power.  The negation is for _r.hasElements_ only, and not the entire _while_ condition.","body":"@SergejLavBojanić2022, <i>&quot;... I think I&#39;m not wrong that ! is for negation, so if it is declared to have, negation is false, and then &amp;&amp; (conjugation) is false ...&quot;</i>, well the statement reads, if <i>r</i> does not have elements, and <i>r</i> Power is greater-than or equal-to <i>b</i> Power.  The negation is for <i>r.hasElements</i> only, and not the entire <i>while</i> condition."}],"answers":[{"tags":[],"owner":{"account_id":28072701,"reputation":36,"user_id":21445043,"display_name":"the common starling"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1691332909,"creation_date":1691332909,"answer_id":76846394,"question_id":76845478,"body_markdown":"\r\nDisclaimer: I have not fully understood the polynomial division algorithm.\r\n\r\nBy checking the [wikipedia page for polynomial division][1] , the Pseudocode section lists the following: \r\n\r\n\r\n\r\n    function n / d is\r\n        require d ≠ 0\r\n        q ← 0\r\n        r ← n             // At each step n = d &#215; q + r\r\n    \r\n        while r ≠ 0 and degree(r) ≥ degree(d) do\r\n            t ← lead(r) / lead(d)       // Divide the leading terms\r\n            q ← q + t\r\n            r ← r − t &#215; d\r\n    \r\n        return (q, r)\r\n\r\n\r\nYour code seems to follow closely this pseudocode.\r\nNow, going to the condition  \r\n\r\n    while r ≠ 0 and degree(r) ≥ degree(d) do\r\n\r\nits best translation would be \r\n\r\n    while( r.hasElements() &amp;&amp; r.Power() &gt;= b.Power()){ \r\n\r\nSo in my opinion, negating the statement `r.hasElements()` is a mistake, and the `!` is a typo.\r\n\r\nPlease do a search on google like &quot;github polynomial division&quot;, and check various implementations.\r\nFor example, the following [Polynomial Calculator][2] provides a roughly similar implementation:\r\n\r\n    public Polynomial divide(Polynomial divisor) {\r\n    ...\r\n    while (dividend.getDegree() &gt;= divisor.getDegree()) {\r\n           //equivalent of degree(r) ≥ degree(d)\r\n                Monomial auxiliaryMonomial = dividend.getMonomials().get(0).divide(divisor.getMonomials().get(0));//equivalent of t ← lead(r) / lead(d)    \r\n                PolynomialUtilities.introduceMonomial(quotient, auxiliaryMonomial);\r\n    \r\n                singleMonomialPolynomial.getMonomials().add(auxiliaryMonomial);\r\n                auxiliaryPolynomial = singleMonomialPolynomial.multiply(divisor);\r\n                singleMonomialPolynomial.getMonomials().remove(auxiliaryMonomial);\r\n    \r\n                dividend = dividend.subtract(auxiliaryPolynomial);//equivalent of r ← r − t &#215; d\r\n            }\r\n\r\n\r\nThe main lesson to take from this implementation, and others that I&#39;ve seen, is that in the while loop, the code only compares the degrees of the dividend and the divisor. **Checking whether the dividend has only zero coefficients is redundant**. If that would be the case, its degree would be zero, which would make r.Power() strictly less than b.Power() .\r\n\r\nThus, I believe you could safely turn \r\n\r\n    while( r.hasElements() &amp;&amp; r.Power() &gt;= b.Power()){\r\n\r\ninto \r\n\r\n    while( r.Power() &gt;= b.Power()){\r\n\r\n\r\n\r\n\r\n\r\n\r\n  [1]: https://en.wikipedia.org/wiki/Polynomial_long_division\r\n  [2]: https://github.com/TunsAdrian/Polynomial-Calculator/blob/master/Polynomial%20Calculator/src/model/Polynomial.java\r\n","title":"The condition in the while loop, is it possible to fulfill it?","body":"<p>Disclaimer: I have not fully understood the polynomial division algorithm.</p>\n<p>By checking the <a href=\"https://en.wikipedia.org/wiki/Polynomial_long_division\" rel=\"nofollow noreferrer\">wikipedia page for polynomial division</a> , the Pseudocode section lists the following:</p>\n<pre><code>function n / d is\n    require d ≠ 0\n    q ← 0\n    r ← n             // At each step n = d × q + r\n\n    while r ≠ 0 and degree(r) ≥ degree(d) do\n        t ← lead(r) / lead(d)       // Divide the leading terms\n        q ← q + t\n        r ← r − t × d\n\n    return (q, r)\n</code></pre>\n<p>Your code seems to follow closely this pseudocode.\nNow, going to the condition</p>\n<pre><code>while r ≠ 0 and degree(r) ≥ degree(d) do\n</code></pre>\n<p>its best translation would be</p>\n<pre><code>while( r.hasElements() &amp;&amp; r.Power() &gt;= b.Power()){ \n</code></pre>\n<p>So in my opinion, negating the statement <code>r.hasElements()</code> is a mistake, and the <code>!</code> is a typo.</p>\n<p>Please do a search on google like &quot;github polynomial division&quot;, and check various implementations.\nFor example, the following <a href=\"https://github.com/TunsAdrian/Polynomial-Calculator/blob/master/Polynomial%20Calculator/src/model/Polynomial.java\" rel=\"nofollow noreferrer\">Polynomial Calculator</a> provides a roughly similar implementation:</p>\n<pre><code>public Polynomial divide(Polynomial divisor) {\n...\nwhile (dividend.getDegree() &gt;= divisor.getDegree()) {\n       //equivalent of degree(r) ≥ degree(d)\n            Monomial auxiliaryMonomial = dividend.getMonomials().get(0).divide(divisor.getMonomials().get(0));//equivalent of t ← lead(r) / lead(d)    \n            PolynomialUtilities.introduceMonomial(quotient, auxiliaryMonomial);\n\n            singleMonomialPolynomial.getMonomials().add(auxiliaryMonomial);\n            auxiliaryPolynomial = singleMonomialPolynomial.multiply(divisor);\n            singleMonomialPolynomial.getMonomials().remove(auxiliaryMonomial);\n\n            dividend = dividend.subtract(auxiliaryPolynomial);//equivalent of r ← r − t × d\n        }\n</code></pre>\n<p>The main lesson to take from this implementation, and others that I've seen, is that in the while loop, the code only compares the degrees of the dividend and the divisor. <strong>Checking whether the dividend has only zero coefficients is redundant</strong>. If that would be the case, its degree would be zero, which would make r.Power() strictly less than b.Power() .</p>\n<p>Thus, I believe you could safely turn</p>\n<pre><code>while( r.hasElements() &amp;&amp; r.Power() &gt;= b.Power()){\n</code></pre>\n<p>into</p>\n<pre><code>while( r.Power() &gt;= b.Power()){\n</code></pre>\n"},{"tags":[],"owner":{"account_id":23740623,"reputation":1,"user_id":17758716,"display_name":"Reilas"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1691373390,"creation_date":1691373390,"answer_id":76848408,"question_id":76845478,"body_markdown":"&gt; _&#39;... it&#39;s not clear to me why the !r.hasElements condition is used to solve the &quot;dividing two polynomials&quot; task, because if I understand the code, it won&#39;t be possible to fulfill that condition (never). ...&#39;_\r\n\r\nThe code is as follows,\r\n\r\n```java\r\nwhile(!r.hasElements() &amp;&amp; r.Power() &gt;= b.Power()){      // my problem\r\n```\r\n\r\nThe `!` unary operator will affect only the statement it&#39;s assigned to, in this case _r.hasElements_.  \r\nAny other statement would not be affected.\r\n\r\n_[Assignment, Arithmetic, and Unary Operators (The Java&amp;trade; Tutorials &amp;gt; Learning the Java Language &amp;gt; Language Basics)](https://docs.oracle.com/javase/tutorial/java/nutsandbolts/op1.html)_.\r\n\r\nAdditionally, there is some error in the code you&#39;ve added.  \r\n\r\nThe _add_ and _subtract_ methods are incomplete.  \r\nThey are both missing a closing `}` character, and a _return_ value.\r\n\r\nAnd, the inner _for-loop_ declares a duplicate _i_ variable, so it doesn&#39;t run.\r\n\r\n```none\r\njava: variable i is already defined in method add(Polynomial)\r\n```\r\n\r\nAlso, since the _return_ statement is within the _for-loop_, it only loops once.\r\n\r\n```java\r\npublic Polynomial add(Polynomial b){\r\n    Polynomial a= this;\r\n    Polynomial c = new Polynomial(0, Math.max(a.power, b.power));\r\n    for(int i=0; i&lt;=a.power; i++){\r\n        c.coefficients[i] += a.coefficients[i];\r\n        for(int i=0; i&lt;=b.power; i++){\r\n            c.coefficients[i] += b.coefficients[i];\r\n        }\r\n        c.power=c.Power();\r\n        return c;\r\n    }\r\n\r\n\r\npublic Polynomial subtract(Polynomial b){\r\n    Polynomial a= this;\r\n    Polynomial c = new Polynomial(0, Math.max(a.power, b.power));\r\n    for(int i=0; i&lt;=a.power; i++){\r\n        c.coefficients[i] += a.coefficients[i];\r\n        for(int i=0; i&lt;=b.power; i++){\r\n            c.coefficients[i] -= b.coefficients[i];\r\n        }\r\n        c.power=c.Power();\r\n        return c;\r\n    }\r\n\r\n```\r\n\r\nFinally, the _divide_ method has a line with invalid syntax,\r\n\r\n```java\r\nint coefficients = r.coefficient()  b.coefficient();\r\n```\r\n\r\nAnd, a line with a missing valid _this_ reference.\r\n\r\n```java\r\nSystem.out.printf(&quot;(%s) / (%s): %s, %s&quot;, this. b, q , r);\r\n```\r\n\r\n```java\r\n/* If someone understands why the professor overloaded the name of the method, I don&#39;t see the role*/\r\npublic Polynomial[] divide( Polynomial b){\r\n    Polynomial q = new Polynomial(0, 0 );\r\n    Polynomial r = new Polynomial(this);\r\n    while(!r.hasElements() &amp;&amp; r.Power() &gt;= b.Power()){      // my problem\r\n        int coefficients = r.coefficient()  b.coefficient();\r\n        int power = r.Power() - b.Power();\r\n        Polynomial t = new Polynomial(coefficients, power);\r\n        q=q.add(t);\r\n        r=r.subtract(t.multiple(b));\r\n    }\r\n    System.out.printf(&quot;(%s) / (%s): %s, %s&quot;, this. b, q , r);\r\n    return new Polynomial[] {q, r};}\r\n```","title":"The condition in the while loop, is it possible to fulfill it?","body":"<blockquote>\n<p><em>'... it's not clear to me why the !r.hasElements condition is used to solve the &quot;dividing two polynomials&quot; task, because if I understand the code, it won't be possible to fulfill that condition (never). ...'</em></p>\n</blockquote>\n<p>The code is as follows,</p>\n<pre class=\"lang-java prettyprint-override\"><code>while(!r.hasElements() &amp;&amp; r.Power() &gt;= b.Power()){      // my problem\n</code></pre>\n<p>The <code>!</code> unary operator will affect only the statement it's assigned to, in this case <em>r.hasElements</em>.<br />\nAny other statement would not be affected.</p>\n<p><em><a href=\"https://docs.oracle.com/javase/tutorial/java/nutsandbolts/op1.html\" rel=\"nofollow noreferrer\">Assignment, Arithmetic, and Unary Operators (The Java™ Tutorials &gt; Learning the Java Language &gt; Language Basics)</a></em>.</p>\n<p>Additionally, there is some error in the code you've added.</p>\n<p>The <em>add</em> and <em>subtract</em> methods are incomplete.<br />\nThey are both missing a closing <code>}</code> character, and a <em>return</em> value.</p>\n<p>And, the inner <em>for-loop</em> declares a duplicate <em>i</em> variable, so it doesn't run.</p>\n<pre class=\"lang-none prettyprint-override\"><code>java: variable i is already defined in method add(Polynomial)\n</code></pre>\n<p>Also, since the <em>return</em> statement is within the <em>for-loop</em>, it only loops once.</p>\n<pre class=\"lang-java prettyprint-override\"><code>public Polynomial add(Polynomial b){\n    Polynomial a= this;\n    Polynomial c = new Polynomial(0, Math.max(a.power, b.power));\n    for(int i=0; i&lt;=a.power; i++){\n        c.coefficients[i] += a.coefficients[i];\n        for(int i=0; i&lt;=b.power; i++){\n            c.coefficients[i] += b.coefficients[i];\n        }\n        c.power=c.Power();\n        return c;\n    }\n\n\npublic Polynomial subtract(Polynomial b){\n    Polynomial a= this;\n    Polynomial c = new Polynomial(0, Math.max(a.power, b.power));\n    for(int i=0; i&lt;=a.power; i++){\n        c.coefficients[i] += a.coefficients[i];\n        for(int i=0; i&lt;=b.power; i++){\n            c.coefficients[i] -= b.coefficients[i];\n        }\n        c.power=c.Power();\n        return c;\n    }\n\n</code></pre>\n<p>Finally, the <em>divide</em> method has a line with invalid syntax,</p>\n<pre class=\"lang-java prettyprint-override\"><code>int coefficients = r.coefficient()  b.coefficient();\n</code></pre>\n<p>And, a line with a missing valid <em>this</em> reference.</p>\n<pre class=\"lang-java prettyprint-override\"><code>System.out.printf(&quot;(%s) / (%s): %s, %s&quot;, this. b, q , r);\n</code></pre>\n<pre class=\"lang-java prettyprint-override\"><code>/* If someone understands why the professor overloaded the name of the method, I don't see the role*/\npublic Polynomial[] divide( Polynomial b){\n    Polynomial q = new Polynomial(0, 0 );\n    Polynomial r = new Polynomial(this);\n    while(!r.hasElements() &amp;&amp; r.Power() &gt;= b.Power()){      // my problem\n        int coefficients = r.coefficient()  b.coefficient();\n        int power = r.Power() - b.Power();\n        Polynomial t = new Polynomial(coefficients, power);\n        q=q.add(t);\n        r=r.subtract(t.multiple(b));\n    }\n    System.out.printf(&quot;(%s) / (%s): %s, %s&quot;, this. b, q , r);\n    return new Polynomial[] {q, r};}\n</code></pre>\n"}],"owner":{"account_id":29073194,"reputation":1,"user_id":22270990,"display_name":"Sergej Lav Bojanić 2022"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":71,"favorite_count":0,"down_vote_count":2,"up_vote_count":0,"answer_count":2,"score":-2,"last_activity_date":1691670416,"creation_date":1691318417,"question_id":76845478,"body_markdown":"The assignment is from the faculty collection. I&#39;m still learning, and it&#39;s not clear to me why the `!r.hasElements` condition is used to solve the &quot;dividing two polynomials&quot; task, because as I understand the code, it will never be possible to fulfill that condition.\r\n\r\nCan someone help me clarify what it is about?\r\n\r\n```java\r\npublic class Polynomial {\r\n\r\n  private int [] coefficients;\r\n\r\n  private int power;\r\n\r\n  public Polynomial(int a, int b) {\r\n\r\n    coefficients = new int[b + 1];\r\n\r\n    coefficients[b] = a; /* If it can be translated, the free member a is placed on the last index */\r\n\r\n    power = Power();\r\n  }\r\n\r\n  public Polynomial(Polynomial p) {\r\n    coefficients = new int[p.coefficients.length];\r\n\r\n    for (int i = 0; i &lt; p.coefficients.length; i++) {\r\n      coefficients[i] = p.coefficients[i];\r\n\r\n    }\r\n\r\n    power = p.Power();\r\n  }\r\n\r\n  public int Power() {\r\n    int d = 0;\r\n\r\n    for (int i = 0; i &lt; this.coefficients.length; i++) {\r\n      if (coefficients[i] != 0) {\r\n        d = i;\r\n      }\r\n    }\r\n\r\n    return d;\r\n  }\r\n\r\n  public Polynomial add(Polynomial b) {\r\n    Polynomial a = this;\r\n\r\n    Polynomial c = new Polynomial(0, Math.max(a.power, b.power));\r\n\r\n    for (int i = 0; i &lt;= a.power; i++) {\r\n      c.coefficients[i] += a.coefficients[i];\r\n    }\r\n\r\n    for (int i = 0; i &lt;= b.power; i++) {\r\n      c.coefficients[i] += b.coefficients[i];\r\n    }\r\n\r\n    c.power = c.Power();\r\n\r\n    return c;\r\n  }\r\n\r\n  public Polynomial subtract(Polynomial b) {\r\n    Polynomial a = this;\r\n\r\n    Polynomial c = new Polynomial(0, Math.max(a.power, b.power));\r\n\r\n    for (int i = 0; i &lt;= a.power; i++) {\r\n      c.coefficients[i] += a.coefficients[i];\r\n    }\r\n\r\n    for (int i = 0; i &lt;= b.power; i++) {\r\n      c.coefficients[i] -= b.coefficients[i];\r\n    }\r\n\r\n    c.power = c.Power();\r\n\r\n    return c;\r\n  }\r\n\r\n  public Polynomial multiple(Polynomial b) {\r\n    Polynomial a = this;\r\n\r\n    Polynomial c = new Polynomial(0, a.power + b.power);\r\n\r\n    for (int i = 0; i &lt;= a.power; i++) {\r\n\r\n      for (int j = 0; j &lt;= b.power; j++) {\r\n        c.coefficients[i + j] += (a.coefficients[i] * b.coefficients[j]);\r\n      }\r\n    }\r\n\r\n    c.power = c.Power();\r\n\r\n    return c;\r\n  }\r\n\r\n  public int coefficient() {\r\n    return coefficient(Power());\r\n  }\r\n\r\n  public int coefficient(int power) {\r\n    if (power &gt; this.Power()) {\r\n      throw new RuntimeException(&quot;Error in degree&quot;);\r\n    }\r\n\r\n    return coefficients[power];\r\n  }\r\n\r\n/* If someone understands why the professor overloaded the name of the method, I don&#39;t see the role*/\r\n\r\n  public Polynomial[] divide(Polynomial b) {\r\n    Polynomial q = new Polynomial(0, 0);\r\n\r\n    Polynomial r = new Polynomial(this);\r\n\r\n    while (!r.hasElements() &amp;&amp; r.Power() &gt;= b.Power()) { // my problem\r\n      int coefficients = r.coefficient()  b.coefficient();\r\n\r\n      int power = r.Power() - b.Power();\r\n\r\n      Polynomial t = new Polynomial(coefficients, power);\r\n\r\n      q = q.add(t);\r\n\r\n      r = r.subtract(t.multiple(b));\r\n    }\r\n\r\n    System.out.printf(&quot;(%s) / (%s): %s, %s&quot;, this. b, q, r);\r\n\r\n    return new Polynomial[] {q, r};\r\n  }\r\n\r\n  public boolean hasElements() {              // It is read, for all and in the sequence &quot;coefficients&quot;\r\n    for (int i : coefficients) {\r\n      if (i != 0) {\r\n        return true;\r\n      }\r\n    }\r\n\r\n    return false;\r\n  }\r\n\r\n  @Override\r\n\r\n.............\r\n\r\n}\r\n```","title":"The condition in the while loop, is it possible to fulfill it?","body":"<p>The assignment is from the faculty collection. I'm still learning, and it's not clear to me why the <code>!r.hasElements</code> condition is used to solve the &quot;dividing two polynomials&quot; task, because as I understand the code, it will never be possible to fulfill that condition.</p>\n<p>Can someone help me clarify what it is about?</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class Polynomial {\n\n  private int [] coefficients;\n\n  private int power;\n\n  public Polynomial(int a, int b) {\n\n    coefficients = new int[b + 1];\n\n    coefficients[b] = a; /* If it can be translated, the free member a is placed on the last index */\n\n    power = Power();\n  }\n\n  public Polynomial(Polynomial p) {\n    coefficients = new int[p.coefficients.length];\n\n    for (int i = 0; i &lt; p.coefficients.length; i++) {\n      coefficients[i] = p.coefficients[i];\n\n    }\n\n    power = p.Power();\n  }\n\n  public int Power() {\n    int d = 0;\n\n    for (int i = 0; i &lt; this.coefficients.length; i++) {\n      if (coefficients[i] != 0) {\n        d = i;\n      }\n    }\n\n    return d;\n  }\n\n  public Polynomial add(Polynomial b) {\n    Polynomial a = this;\n\n    Polynomial c = new Polynomial(0, Math.max(a.power, b.power));\n\n    for (int i = 0; i &lt;= a.power; i++) {\n      c.coefficients[i] += a.coefficients[i];\n    }\n\n    for (int i = 0; i &lt;= b.power; i++) {\n      c.coefficients[i] += b.coefficients[i];\n    }\n\n    c.power = c.Power();\n\n    return c;\n  }\n\n  public Polynomial subtract(Polynomial b) {\n    Polynomial a = this;\n\n    Polynomial c = new Polynomial(0, Math.max(a.power, b.power));\n\n    for (int i = 0; i &lt;= a.power; i++) {\n      c.coefficients[i] += a.coefficients[i];\n    }\n\n    for (int i = 0; i &lt;= b.power; i++) {\n      c.coefficients[i] -= b.coefficients[i];\n    }\n\n    c.power = c.Power();\n\n    return c;\n  }\n\n  public Polynomial multiple(Polynomial b) {\n    Polynomial a = this;\n\n    Polynomial c = new Polynomial(0, a.power + b.power);\n\n    for (int i = 0; i &lt;= a.power; i++) {\n\n      for (int j = 0; j &lt;= b.power; j++) {\n        c.coefficients[i + j] += (a.coefficients[i] * b.coefficients[j]);\n      }\n    }\n\n    c.power = c.Power();\n\n    return c;\n  }\n\n  public int coefficient() {\n    return coefficient(Power());\n  }\n\n  public int coefficient(int power) {\n    if (power &gt; this.Power()) {\n      throw new RuntimeException(&quot;Error in degree&quot;);\n    }\n\n    return coefficients[power];\n  }\n\n/* If someone understands why the professor overloaded the name of the method, I don't see the role*/\n\n  public Polynomial[] divide(Polynomial b) {\n    Polynomial q = new Polynomial(0, 0);\n\n    Polynomial r = new Polynomial(this);\n\n    while (!r.hasElements() &amp;&amp; r.Power() &gt;= b.Power()) { // my problem\n      int coefficients = r.coefficient()  b.coefficient();\n\n      int power = r.Power() - b.Power();\n\n      Polynomial t = new Polynomial(coefficients, power);\n\n      q = q.add(t);\n\n      r = r.subtract(t.multiple(b));\n    }\n\n    System.out.printf(&quot;(%s) / (%s): %s, %s&quot;, this. b, q, r);\n\n    return new Polynomial[] {q, r};\n  }\n\n  public boolean hasElements() {              // It is read, for all and in the sequence &quot;coefficients&quot;\n    for (int i : coefficients) {\n      if (i != 0) {\n        return true;\n      }\n    }\n\n    return false;\n  }\n\n  @Override\n\n.............\n\n}\n</code></pre>\n"},{"tags":["java","http","exception","microservices","spring-cloud"],"answers":[{"tags":[],"owner":{"account_id":27990171,"reputation":67,"user_id":21376203,"display_name":"MatildaEliz"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1691670301,"creation_date":1691059760,"answer_id":76827369,"question_id":76826653,"body_markdown":"I moved all packages under the same package and it worked.","title":"404 Not Found while making HTTP GET request","body":"<p>I moved all packages under the same package and it worked.</p>\n"},{"tags":[],"owner":{"account_id":7788702,"reputation":836,"user_id":5892518,"display_name":"Harsh"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691396907,"creation_date":1691396907,"answer_id":76849985,"question_id":76826653,"body_markdown":"Yes, correct as you said moving the controller classes to same package works!\r\n\r\nAlternatively, Add `@ComponentScan(basePackages={com.abc.example})` on your main class \r\n\r\ni.e. `@SpringBootApplication` annotated class so that spring boot can scan classes to identify them as `Controller` layer","title":"404 Not Found while making HTTP GET request","body":"<p>Yes, correct as you said moving the controller classes to same package works!</p>\n<p>Alternatively, Add <code>@ComponentScan(basePackages={com.abc.example})</code> on your main class</p>\n<p>i.e. <code>@SpringBootApplication</code> annotated class so that spring boot can scan classes to identify them as <code>Controller</code> layer</p>\n"}],"owner":{"account_id":27990171,"reputation":67,"user_id":21376203,"display_name":"MatildaEliz"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":72,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":76827369,"answer_count":2,"score":1,"last_activity_date":1691670301,"creation_date":1691054700,"question_id":76826653,"body_markdown":"I m making basic microservice project . I have two services one of them user other one is reservation service.  I ve registered them to eureka server which is currently visible on eureka and added gateway. User service  working fine with gateway but When I call the reservation service I got 404  Not Found error.  user service and reservation service configurations are same. Why i am getting this error message and how can i solve that problem ,\r\nI m sending request like this http://localhost:9000/reservation/reservation\r\n\r\n\r\n\r\n   API GATEWAY CONFIGURATION\r\n\r\n    server.port= 9000\r\n    eureka.client.service-url.defaultZone=http://localhost:8761/eureka/\r\n    spring.application.name=api-gateway\r\n    spring.cloud.gateway.routes[0].id = user-service\r\n    spring.cloud.gateway.routes[0].uri = lb://user-service\r\n    spring.cloud.gateway.routes[0].predicates=Path=/user/**\r\n    spring.cloud.gateway.routes[1].id = reservation-service\r\n    spring.cloud.gateway.routes[1].uri = lb://reservation-service\r\n    spring.cloud.gateway.routes[1].predicates=Path=/reservation/**\r\n    eureka.client.register-with-eureka=true\r\n    eureka.client.fetch-registry=true\r\n\r\nReservation Service Configuration\r\n\r\n  \r\n\r\n    server.port=8082\r\n    spring.application.name=reservation-service\r\n    eureka.client.register-with-eureka= true\r\n    euraka.client.fetch.registry = true\r\n    eureka.client.service-url.defaultzone = http://localhost:8761/eureka\r\n    spring.datasource.url=jdbc:mysql://localhost:3306/projectschema\r\n    spring.datasource.username=root\r\n    spring.datasource.password=12345678Aa\r\n    spring.jpa.generate-ddl=true\r\n    spring.jpa.defer-datasource-initialization=true\r\n    spring.jpa.hibernate.ddl-auto= update\r\n    spring.datasource.driver-class-name=com.mysql.cj.jdbc.Driver\r\n\r\nReservation Service Controller\r\n\r\n\r\n     @RestController\r\n    @RequestMapping(&quot;reservation&quot;)\r\n      public class ReservationController {\r\n      @Autowired\r\n      ReservationService reservationService;\r\n\r\n    @GetMapping(&quot;/reservation&quot;)\r\n    public String GenerateReservation(){\r\n      return &quot;helo&quot;;\r\n    }\r\n}\r\n\r\n \r\n","title":"404 Not Found while making HTTP GET request","body":"<p>I m making basic microservice project . I have two services one of them user other one is reservation service.  I ve registered them to eureka server which is currently visible on eureka and added gateway. User service  working fine with gateway but When I call the reservation service I got 404  Not Found error.  user service and reservation service configurations are same. Why i am getting this error message and how can i solve that problem ,\nI m sending request like this http://localhost:9000/reservation/reservation</p>\n<p>API GATEWAY CONFIGURATION</p>\n<pre><code>server.port= 9000\neureka.client.service-url.defaultZone=http://localhost:8761/eureka/\nspring.application.name=api-gateway\nspring.cloud.gateway.routes[0].id = user-service\nspring.cloud.gateway.routes[0].uri = lb://user-service\nspring.cloud.gateway.routes[0].predicates=Path=/user/**\nspring.cloud.gateway.routes[1].id = reservation-service\nspring.cloud.gateway.routes[1].uri = lb://reservation-service\nspring.cloud.gateway.routes[1].predicates=Path=/reservation/**\neureka.client.register-with-eureka=true\neureka.client.fetch-registry=true\n</code></pre>\n<p>Reservation Service Configuration</p>\n<pre><code>server.port=8082\nspring.application.name=reservation-service\neureka.client.register-with-eureka= true\neuraka.client.fetch.registry = true\neureka.client.service-url.defaultzone = http://localhost:8761/eureka\nspring.datasource.url=jdbc:mysql://localhost:3306/projectschema\nspring.datasource.username=root\nspring.datasource.password=12345678Aa\nspring.jpa.generate-ddl=true\nspring.jpa.defer-datasource-initialization=true\nspring.jpa.hibernate.ddl-auto= update\nspring.datasource.driver-class-name=com.mysql.cj.jdbc.Driver\n</code></pre>\n<p>Reservation Service Controller</p>\n<pre><code> @RestController\n@RequestMapping(&quot;reservation&quot;)\n  public class ReservationController {\n  @Autowired\n  ReservationService reservationService;\n\n@GetMapping(&quot;/reservation&quot;)\npublic String GenerateReservation(){\n  return &quot;helo&quot;;\n}\n</code></pre>\n<p>}</p>\n"},{"tags":["java","docker","maven","gitlab"],"comments":[{"owner":{"account_id":7820671,"reputation":1041,"user_id":6551213,"display_name":"Uberhumus"},"score":0,"creation_date":1691483874,"post_id":76857448,"comment_id":135494303,"body_markdown":"What stage of the `docker build` does it fail on? Why is the `EXPOSE` after the `ENTRYPOINT`?","body":"What stage of the <code>docker build</code> does it fail on? Why is the <code>EXPOSE</code> after the <code>ENTRYPOINT</code>?"},{"owner":{"account_id":2520883,"reputation":63,"user_id":2191287,"display_name":"user2191287"},"score":0,"creation_date":1691486793,"post_id":76857448,"comment_id":135494908,"body_markdown":"You&#39;re right, EXPOSE after ENTRYPOINT is wrong.\nBuild fails during the call of docker build -t gitlab.my-domain.local:5000/spring-boot-hello-world:latest .","body":"You&#39;re right, EXPOSE after ENTRYPOINT is wrong. Build fails during the call of docker build -t gitlab.my-domain.local:5000/spring-boot-hello-world:latest ."},{"owner":{"account_id":7820671,"reputation":1041,"user_id":6551213,"display_name":"Uberhumus"},"score":0,"creation_date":1691487267,"post_id":76857448,"comment_id":135495003,"body_markdown":"I meant what stage of the Docker build. :)","body":"I meant what stage of the Docker build. :)"},{"owner":{"account_id":2520883,"reputation":63,"user_id":2191287,"display_name":"user2191287"},"score":0,"creation_date":1691487600,"post_id":76857448,"comment_id":135495067,"body_markdown":"Ah ok :). I don&#39;t know - where can I see that?","body":"Ah ok :). I don&#39;t know - where can I see that?"},{"owner":{"account_id":7820671,"reputation":1041,"user_id":6551213,"display_name":"Uberhumus"},"score":0,"creation_date":1691489102,"post_id":76857448,"comment_id":135495367,"body_markdown":"I don&#39;t remember how to see it in Gitlab-CI. Buf if you were to run the `docker build ` command manually in the same environment you should see it. There should be a way in Gitlab CI as well though...","body":"I don&#39;t remember how to see it in Gitlab-CI. Buf if you were to run the <code>docker build </code> command manually in the same environment you should see it. There should be a way in Gitlab CI as well though..."}],"answers":[{"tags":[],"owner":{"account_id":29182727,"reputation":1,"user_id":22356519,"display_name":"bharath s"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691669982,"creation_date":1691486642,"answer_id":76858194,"question_id":76857448,"body_markdown":"The error message suggests that during the Docker build process, a reference with a specific ID was being processed, and Docker attempted to calculate a checksum for it. However, the process failed because Docker was unable to find a directory or file at the given path (`/var/lib/docker/tmp/buildkit-mount881123238/target`). This can happen due to various reasons, such as incorrect paths specified in your Dockerfile, missing files, or issues with the Docker build context.","title":"GitLab Maven Docker Pipelien fails during Docker build","body":"<p>The error message suggests that during the Docker build process, a reference with a specific ID was being processed, and Docker attempted to calculate a checksum for it. However, the process failed because Docker was unable to find a directory or file at the given path (<code>/var/lib/docker/tmp/buildkit-mount881123238/target</code>). This can happen due to various reasons, such as incorrect paths specified in your Dockerfile, missing files, or issues with the Docker build context.</p>\n"},{"tags":[],"owner":{"account_id":2520883,"reputation":63,"user_id":2191287,"display_name":"user2191287"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1691488966,"creation_date":1691488966,"answer_id":76858485,"question_id":76857448,"body_markdown":"Ok,I found the solution - I had to add artifacts under the maven-build-stage in .gitlab-ci.yml:\r\n\r\n    # Define the job that will build the Maven project\r\n    maven-build:\r\n    image: maven:3.6.3-jdk-8\r\n    stage: build\r\n    script: &quot;mvn $MAVEN_CLI_OPTS clean deploy -e&quot;\r\n    artifacts:\r\n      paths:\r\n        - $CI_PROJECT_DIR/target/*-exec.jar","title":"GitLab Maven Docker Pipelien fails during Docker build","body":"<p>Ok,I found the solution - I had to add artifacts under the maven-build-stage in .gitlab-ci.yml:</p>\n<pre><code># Define the job that will build the Maven project\nmaven-build:\nimage: maven:3.6.3-jdk-8\nstage: build\nscript: &quot;mvn $MAVEN_CLI_OPTS clean deploy -e&quot;\nartifacts:\n  paths:\n    - $CI_PROJECT_DIR/target/*-exec.jar\n</code></pre>\n"}],"owner":{"account_id":2520883,"reputation":63,"user_id":2191287,"display_name":"user2191287"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":150,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76858485,"answer_count":2,"score":0,"last_activity_date":1691669982,"creation_date":1691480777,"question_id":76857448,"body_markdown":"I would like to build a Docker image with a GitLab CI Pipeline from a Maven project but the build fails and I don&#39;t know what to do.\r\n\r\nDockerfile:\r\n\r\n    FROM maven:3.6.3-jdk-8\r\n    ENV EXECUTABLE_APP_JAR=hello-spring-boot-exec.jar\r\n    COPY /target/${EXECUTABLE_APP_JAR} /app.jar\r\n    ENTRYPOINT [&quot;java&quot;, &quot;-jar&quot;, &quot;/app.jar&quot;] \r\n    EXPOSE 7001\r\n\r\n.gitlab-ci.yml:\r\n\r\n    image: docker:stable\r\n\r\n    # Define the stages that will be executed in the pipeline\r\n    stages:\r\n    - build\r\n    - package\r\n\r\n    # Define global variables\r\n    variables:\r\n      MAVEN_CLI_OPTS: &gt;\r\n    -Dmaven.repo.local=$CI_PROJECT_DIR/.m2/repository\r\n    --global-settings $MAVEN_SETTINGS_XML_GITLAB_PACKAGE_REGISTRY\r\n    cache:\r\n      key: global-maven-repository-cache\r\n      paths:\r\n        - .m2/repository\r\n\r\n    # Define the job that will build the Maven project\r\n    maven-build:\r\n      image: maven:3.6.3-jdk-8\r\n      stage: build\r\n      script: &quot;mvn $MAVEN_CLI_OPTS clean deploy -e&quot;\r\n\r\n    docker-build:\r\n      stage: package\r\n      script:\r\n        - docker info\r\n        - docker build -t gitlab.my-domain.local:5000/spring-boot-hello-world:latest .\r\n        - docker push gitlab.my-domain.local:5000/spring-boot-hello-world:latest\r\n\r\nProblem is that the stage docker-build does not find the artifcats from the previous maven-build stage which were build under $CI_PROJECT_DIR/target:\r\n\r\n    #4 ERROR: failed to calculate checksum of ref 93b345e2-1ada-4609-9021-058007df7967::r3cqfb3qtqoee8maxyaqmtsnv: failed to walk /var/lib/docker/tmp/buildkit-mount881123238/target: lstat /var/lib/docker/tmp/buildkit-mount881123238/target: no such file or directory\r\n\r\nAs you can see the docker-build stage is not in the $CI_PROJECT_DIR directory - how can I tell the docker-build stage to take the artifacts from that directory?","title":"GitLab Maven Docker Pipelien fails during Docker build","body":"<p>I would like to build a Docker image with a GitLab CI Pipeline from a Maven project but the build fails and I don't know what to do.</p>\n<p>Dockerfile:</p>\n<pre><code>FROM maven:3.6.3-jdk-8\nENV EXECUTABLE_APP_JAR=hello-spring-boot-exec.jar\nCOPY /target/${EXECUTABLE_APP_JAR} /app.jar\nENTRYPOINT [&quot;java&quot;, &quot;-jar&quot;, &quot;/app.jar&quot;] \nEXPOSE 7001\n</code></pre>\n<p>.gitlab-ci.yml:</p>\n<pre><code>image: docker:stable\n\n# Define the stages that will be executed in the pipeline\nstages:\n- build\n- package\n\n# Define global variables\nvariables:\n  MAVEN_CLI_OPTS: &gt;\n-Dmaven.repo.local=$CI_PROJECT_DIR/.m2/repository\n--global-settings $MAVEN_SETTINGS_XML_GITLAB_PACKAGE_REGISTRY\ncache:\n  key: global-maven-repository-cache\n  paths:\n    - .m2/repository\n\n# Define the job that will build the Maven project\nmaven-build:\n  image: maven:3.6.3-jdk-8\n  stage: build\n  script: &quot;mvn $MAVEN_CLI_OPTS clean deploy -e&quot;\n\ndocker-build:\n  stage: package\n  script:\n    - docker info\n    - docker build -t gitlab.my-domain.local:5000/spring-boot-hello-world:latest .\n    - docker push gitlab.my-domain.local:5000/spring-boot-hello-world:latest\n</code></pre>\n<p>Problem is that the stage docker-build does not find the artifcats from the previous maven-build stage which were build under $CI_PROJECT_DIR/target:</p>\n<pre><code>#4 ERROR: failed to calculate checksum of ref 93b345e2-1ada-4609-9021-058007df7967::r3cqfb3qtqoee8maxyaqmtsnv: failed to walk /var/lib/docker/tmp/buildkit-mount881123238/target: lstat /var/lib/docker/tmp/buildkit-mount881123238/target: no such file or directory\n</code></pre>\n<p>As you can see the docker-build stage is not in the $CI_PROJECT_DIR directory - how can I tell the docker-build stage to take the artifacts from that directory?</p>\n"},{"tags":["java","flutter","macos","android-studio"],"comments":[{"owner":{"account_id":12785018,"reputation":534,"user_id":9251541,"display_name":"bakboem"},"score":0,"creation_date":1673664083,"post_id":75114124,"comment_id":132555209,"body_markdown":"try update Android cmdline-tools  [this](https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/f0988aa1740d46b19ffc52a67c02cfa1~tplv-k3u1fbpfcp-zoom-in-crop-mark:4536:0:0:0.awebp?)","body":"try update Android cmdline-tools  <a href=\"https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/f0988aa1740d46b19ffc52a67c02cfa1~tplv-k3u1fbpfcp-zoom-in-crop-mark:4536:0:0:0.awebp?\" rel=\"nofollow noreferrer\">this</a>"},{"owner":{"account_id":8136951,"reputation":2260,"user_id":6128304,"display_name":"Gaurav Singh"},"score":0,"creation_date":1673672577,"post_id":75114124,"comment_id":132555878,"body_markdown":"@bakboem I&#39;ve latest  Android cmdline-tools","body":"@bakboem I&#39;ve latest  Android cmdline-tools"},{"owner":{"account_id":12785018,"reputation":534,"user_id":9251541,"display_name":"bakboem"},"score":0,"creation_date":1673673990,"post_id":75114124,"comment_id":132555988,"body_markdown":"try [this](https://stackoverflow.com/questions/51281702/unable-to-find-bundled-java-version-on-flutter?rq=1)","body":"try <a href=\"https://stackoverflow.com/questions/51281702/unable-to-find-bundled-java-version-on-flutter?rq=1\">this</a>"},{"owner":{"account_id":1278999,"reputation":347,"user_id":1233565,"accept_rate":67,"display_name":"Isaias"},"score":0,"creation_date":1673843434,"post_id":75114124,"comment_id":132580237,"body_markdown":"Looks like with the release of Electrci Eel the directory where JRE lives changed to JRB.\nCheck this [answer](https://stackoverflow.com/a/75119315/1233565).","body":"Looks like with the release of Electrci Eel the directory where JRE lives changed to JRB. Check this <a href=\"https://stackoverflow.com/a/75119315/1233565\">answer</a>."},{"owner":{"account_id":116359,"reputation":18360,"user_id":305135,"accept_rate":39,"display_name":"AVEbrahimi"},"score":0,"creation_date":1674450967,"post_id":75114124,"comment_id":132709135,"body_markdown":"Just delete JRE folder: https://stackoverflow.com/questions/75108707/android-studio-electric-eel-javahome-seems-to-be-invalid/75116649#75116649","body":"Just delete JRE folder: <a href=\"https://stackoverflow.com/questions/75108707/android-studio-electric-eel-javahome-seems-to-be-invalid/75116649#75116649\" title=\"android studio electric eel javahome seems to be invalid\">stackoverflow.com/questions/75108707/&hellip;</a>"}],"answers":[{"tags":[],"owner":{"account_id":19968151,"reputation":325,"user_id":14634256,"display_name":"ALI USAMA"},"down_vote_count":1,"up_vote_count":15,"is_accepted":false,"score":14,"last_activity_date":1673956069,"creation_date":1673956069,"answer_id":75145961,"question_id":75114124,"body_markdown":"\r\n 1. Go to your AndroidStudio folder \r\n\r\n&gt; (e.g.  C:\\Program Files\\Android\\Android Studio) in Windows\r\n\r\n 2. There you&#39;ll find the `jbr` and `jre` folder So all you need to do is to copy the content of jbr and paste the content into the **jre** folder.\r\n\r\n","title":"Flutter doctor unable to find bundled Java version Android Studio Electric Eel","body":"<ol>\n<li>Go to your AndroidStudio folder</li>\n</ol>\n<blockquote>\n<p>(e.g.  C:\\Program Files\\Android\\Android Studio) in Windows</p>\n</blockquote>\n<ol start=\"2\">\n<li>There you'll find the <code>jbr</code> and <code>jre</code> folder So all you need to do is to copy the content of jbr and paste the content into the <strong>jre</strong> folder.</li>\n</ol>\n"},{"tags":[],"owner":{"account_id":20528755,"reputation":21,"user_id":15066584,"display_name":"Xlife"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1674268874,"creation_date":1674268874,"answer_id":75190830,"question_id":75114124,"body_markdown":"Open your AndroidStudio folder\r\n\r\ncopy All Content of &quot;jbr&quot; Folder into the &quot;jre&quot; folder.\r\n\r\nWorked For Me.","title":"Flutter doctor unable to find bundled Java version Android Studio Electric Eel","body":"<p>Open your AndroidStudio folder</p>\n<p>copy All Content of &quot;jbr&quot; Folder into the &quot;jre&quot; folder.</p>\n<p>Worked For Me.</p>\n"},{"tags":[],"owner":{"account_id":116359,"reputation":18360,"user_id":305135,"accept_rate":39,"display_name":"AVEbrahimi"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1674892961,"creation_date":1674892961,"answer_id":75266223,"question_id":75114124,"body_markdown":"For **Windows**:\r\n\r\nThe problem is because of trace of old Android Studio java folder, just delete this folder and it starts working:\r\n\r\nC:\\Program Files\\Android\\Android Studio\\jre\r\n\r\nThe new Android Studio Electric Eel is using jbr, not jre.\r\n\r\n----\r\nFor **macOS** as @Jayanth replied above:\r\nIf you are using macOS replace the path in .bash_profile or .zshrc\r\n\r\n    export JAVA_HOME=&quot;/Applications/Android Studio.app/Contents/jre/Contents/Home&quot;\r\n\r\nwith\r\n\r\n    export JAVA_HOME=&quot;/Applications/Android Studio.app/Contents/jbr/Contents/Home&quot;\r\n\r\n","title":"Flutter doctor unable to find bundled Java version Android Studio Electric Eel","body":"<p>For <strong>Windows</strong>:</p>\n<p>The problem is because of trace of old Android Studio java folder, just delete this folder and it starts working:</p>\n<p>C:\\Program Files\\Android\\Android Studio\\jre</p>\n<p>The new Android Studio Electric Eel is using jbr, not jre.</p>\n<hr />\n<p>For <strong>macOS</strong> as @Jayanth replied above:\nIf you are using macOS replace the path in .bash_profile or .zshrc</p>\n<pre><code>export JAVA_HOME=&quot;/Applications/Android Studio.app/Contents/jre/Contents/Home&quot;\n</code></pre>\n<p>with</p>\n<pre><code>export JAVA_HOME=&quot;/Applications/Android Studio.app/Contents/jbr/Contents/Home&quot;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":17769035,"reputation":134,"user_id":12903156,"display_name":"Bhargav Raviya"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1679825736,"creation_date":1679825736,"answer_id":75847100,"question_id":75114124,"body_markdown":"First Go On &quot;C:\\Program Files\\Android\\Android Studio&quot;\r\nCopy All Data in jbr folder to jre \r\n\r\nAnd \r\n\r\nSet System Varaible (windows)\r\nName: JAVA_HOME\r\nValue: C:\\Program Files\\Android\\Android Studio\\jre\r\n\r\nThen Restart your terminal ","title":"Flutter doctor unable to find bundled Java version Android Studio Electric Eel","body":"<p>First Go On &quot;C:\\Program Files\\Android\\Android Studio&quot;\nCopy All Data in jbr folder to jre</p>\n<p>And</p>\n<p>Set System Varaible (windows)\nName: JAVA_HOME\nValue: C:\\Program Files\\Android\\Android Studio\\jre</p>\n<p>Then Restart your terminal</p>\n"},{"tags":[],"owner":{"account_id":28705707,"reputation":11,"user_id":21982086,"display_name":"Eiji Otieno"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1685436187,"creation_date":1685398397,"answer_id":76360584,"question_id":75114124,"body_markdown":"For Linux:\r\n\r\nRun the following command in the terminal.\r\n\r\n```console\r\n$ flutter config --android-studio-dir=\r\n```","title":"Flutter doctor unable to find bundled Java version Android Studio Electric Eel","body":"<p>For Linux:</p>\n<p>Run the following command in the terminal.</p>\n<pre><code>$ flutter config --android-studio-dir=\n</code></pre>\n"},{"tags":[],"owner":{"account_id":13607137,"reputation":313,"user_id":9815944,"display_name":"bounxye"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691669944,"creation_date":1691669944,"answer_id":76875681,"question_id":75114124,"body_markdown":"I had two AndroidStudio folders. One was AndroidStudio other AndroidStudio1. After I deleted AndroidStudio (older) flutter doctor doesn&#39;t return warning.","title":"Flutter doctor unable to find bundled Java version Android Studio Electric Eel","body":"<p>I had two AndroidStudio folders. One was AndroidStudio other AndroidStudio1. After I deleted AndroidStudio (older) flutter doctor doesn't return warning.</p>\n"}],"owner":{"account_id":8136951,"reputation":2260,"user_id":6128304,"display_name":"Gaurav Singh"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":8391,"favorite_count":0,"down_vote_count":0,"up_vote_count":5,"answer_count":6,"score":5,"last_activity_date":1691669944,"creation_date":1673641243,"question_id":75114124,"body_markdown":"When running command `flutter doctor` getting 1 issue:  \r\n```\r\n[✓] Flutter (Channel stable, 2.8.1, on macOS 13.1 22C65 darwin-x64, locale en-IN)\r\n[✓] Android toolchain - develop for Android devices (Android SDK version 33.0.0)\r\n[✓] Xcode - develop for iOS and macOS (Xcode 14.2)\r\n[✓] Chrome - develop for the web\r\n[!] Android Studio (version 2022.1)\r\n    ✗ Unable to find bundled Java version.\r\n[✓] VS Code (version 1.69.2)\r\n[✓] Connected device (2 available)\r\n```\r\nSystem config:\r\n\r\nmacOS Ventura v13.1 | Intel chip\r\n\r\nAndroid Studio Electric Eel(Stable version v2022.1.1)\r\n\r\nJAVA_HOME=/Applications/Android\\ Studio.app/Contents/jbr/Contents/Home\r\n\r\n`java -version` command is working perfectly in terminal.","title":"Flutter doctor unable to find bundled Java version Android Studio Electric Eel","body":"<p>When running command <code>flutter doctor</code> getting 1 issue:</p>\n<pre><code>[✓] Flutter (Channel stable, 2.8.1, on macOS 13.1 22C65 darwin-x64, locale en-IN)\n[✓] Android toolchain - develop for Android devices (Android SDK version 33.0.0)\n[✓] Xcode - develop for iOS and macOS (Xcode 14.2)\n[✓] Chrome - develop for the web\n[!] Android Studio (version 2022.1)\n    ✗ Unable to find bundled Java version.\n[✓] VS Code (version 1.69.2)\n[✓] Connected device (2 available)\n</code></pre>\n<p>System config:</p>\n<p>macOS Ventura v13.1 | Intel chip</p>\n<p>Android Studio Electric Eel(Stable version v2022.1.1)</p>\n<p>JAVA_HOME=/Applications/Android\\ Studio.app/Contents/jbr/Contents/Home</p>\n<p><code>java -version</code> command is working perfectly in terminal.</p>\n"},{"tags":["java","hibernate","annotations","one-to-many"],"answers":[{"tags":[],"owner":{"account_id":29196593,"reputation":1,"user_id":22367565,"display_name":"Avocadic38"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691644036,"creation_date":1691644036,"answer_id":76872780,"question_id":76871300,"body_markdown":"You made a mistake in the attached Person class. You attached an App class.","title":"Error related to OneToMany and getting data using hibernate","body":"<p>You made a mistake in the attached Person class. You attached an App class.</p>\n"}],"owner":{"account_id":27878032,"reputation":1,"user_id":21287131,"display_name":"BLADUS"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":75,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1691669864,"creation_date":1691615487,"question_id":76871300,"body_markdown":"As you can see, I have two classes, `Person` and `Item`, as well as their corresponding tables in the database, in the `App` class, I am trying to get all the things of a person using a one-to-many relationship using Hibernate.\r\n\r\n**Person**\r\n```java\r\npackage org.example.model;\r\n\r\n\r\nimport jakarta.persistence.*;\r\n\r\nimport java.util.List;\r\n\r\n@Entity\r\n@Table(name = &quot;person&quot;)\r\npublic class Person {\r\n\r\n    @Id\r\n    @Column(name = &quot;id&quot;)\r\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\r\n    private int id;\r\n\r\n    @Column(name = &quot;name&quot;)\r\n    private String name;\r\n\r\n    @Column(name = &quot;age&quot;)\r\n    private int age;\r\n\r\n    @OneToMany(mappedBy = &quot;owner&quot;)\r\n    private List&lt;Item&gt; items;\r\n\r\n    public Person(String name, int age) {\r\n        this.name = name;\r\n        this.age = age;\r\n    }\r\n\r\n    public Person() {\r\n    }\r\n\r\n    public int getId() {\r\n        return id;\r\n    }\r\n\r\n    public void setId(int id) {\r\n        this.id = id;\r\n    }\r\n\r\n    public String getName() {\r\n        return name;\r\n    }\r\n\r\n    public void setName(String name) {\r\n        this.name = name;\r\n    }\r\n\r\n    public int getAge() {\r\n        return age;\r\n    }\r\n\r\n    public void setAge(int age) {\r\n        this.age = age;\r\n    }\r\n\r\n    public List&lt;Item&gt; getItems() {\r\n        return items;\r\n    }\r\n\r\n    public void setItems(List&lt;Item&gt; items) {\r\n        this.items = items;\r\n    }\r\n\r\n    @Override\r\n    public String toString() {\r\n        return &quot;Person{&quot; +\r\n                &quot;id=&quot; + id +\r\n                &quot;, name=&#39;&quot; + name + &#39;\\&#39;&#39; +\r\n                &quot;, age=&quot; + age +\r\n                &#39;}&#39;;\r\n    }\r\n}\r\n```\r\n\r\n**Item**\r\n\r\n```java\r\npackage org.example.model;\r\n\r\n\r\nimport jakarta.persistence.*;\r\n\r\n@Entity\r\n@Table(name = &quot;item&quot;)\r\npublic class Item {\r\n    @Id\r\n    @Column(name = &quot;id&quot;)\r\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\r\n    private int id;\r\n\r\n    @Column(name = &quot;item_name&quot;)\r\n    String itemName;\r\n\r\n    @ManyToOne\r\n    @JoinColumn(name = &quot;person_id&quot;, referencedColumnName = &quot;id&quot;)\r\n    private Person owner;\r\n\r\n    public Item() {\r\n    }\r\n\r\n    public Item(String itemName) {\r\n        this.itemName = itemName;\r\n    }\r\n\r\n    public int getId() {\r\n        return id;\r\n    }\r\n\r\n    public void setId(int id) {\r\n        this.id = id;\r\n    }\r\n\r\n    public String getItemName() {\r\n        return itemName;\r\n    }\r\n\r\n    public void setItemName(String itemName) {\r\n        this.itemName = itemName;\r\n    }\r\n\r\n    @Override\r\n    public String toString() {\r\n        return &quot;Item{&quot; +\r\n                &quot;id=&quot; + id +\r\n                &quot;, itemName=&#39;&quot; + itemName + &#39;\\&#39;&#39; +\r\n                &#39;}&#39;;\r\n    }\r\n}\r\n```\r\n\r\n\r\n**App**\r\n\r\n```java\r\npackage org.example;\r\n\r\n\r\nimport org.example.model.Item;\r\nimport org.example.model.Person;\r\nimport org.hibernate.Session;\r\nimport org.hibernate.SessionFactory;\r\nimport org.hibernate.cfg.Configuration;\r\n\r\nimport java.time.Period;\r\nimport java.util.List;\r\n\r\npublic class App {\r\n    public static void main(String[] args) {\r\n\r\n        Configuration configuration = new Configuration()\r\n                .addAnnotatedClass(Period.class).addAnnotatedClass(Item.class);\r\n\r\n        SessionFactory sessionFactory = configuration.buildSessionFactory();\r\n        Session session = sessionFactory.getCurrentSession();\r\n\r\n        try {\r\n\r\n            session.beginTransaction();\r\n\r\n            Person person = session.get(Person.class, 1);\r\n            System.out.println(person);\r\n\r\n            List&lt;Item&gt; items = person.getItems();\r\n            System.out.println(items);\r\n\r\n            session.getTransaction().commit();\r\n        } finally {\r\n            sessionFactory.close();\r\n        }\r\n    }\r\n}\r\n```\r\n\r\n\r\n**Exception**\r\n\r\n\r\n```\r\nException in thread &quot;main&quot; org.hibernate.AnnotationException: Association &#39;org.example.model.Item.owner&#39; targets an unknown entity named &#39;org.example.model.Person&#39;\r\n\tat org.hibernate.cfg.ToOneFkSecondPass.doSecondPass(ToOneFkSecondPass.java:97)\r\n\tat org.hibernate.boot.internal.InFlightMetadataCollectorImpl.processEndOfQueue(InFlightMetadataCollectorImpl.java:1879)\r\n\tat org.hibernate.boot.internal.InFlightMetadataCollectorImpl.processFkSecondPassesInOrder(InFlightMetadataCollectorImpl.java:1826)\r\n\tat org.hibernate.boot.internal.InFlightMetadataCollectorImpl.processSecondPasses(InFlightMetadataCollectorImpl.java:1733)\r\n\tat org.hibernate.boot.model.process.spi.MetadataBuildingProcess.complete(MetadataBuildingProcess.java:300)\r\n\tat org.hibernate.boot.model.process.spi.MetadataBuildingProcess.build(MetadataBuildingProcess.java:97)\r\n\tat org.hibernate.boot.internal.MetadataBuilderImpl.build(MetadataBuilderImpl.java:402)\r\n\tat org.hibernate.boot.internal.MetadataBuilderImpl.build(MetadataBuilderImpl.java:90)\r\n\tat org.hibernate.cfg.Configuration.buildSessionFactory(Configuration.java:735)\r\n\tat org.hibernate.cfg.Configuration.buildSessionFactory(Configuration.java:773)\r\n\tat org.example.App.main(App.java:23)\r\n```\r\n\r\n\r\n1. I tried to change different versions of dependencies in pom.xml as well as the java version and rebuilt the project.\r\n2. Tried to re-prescribe classes. \r\n3. I checked the DB connection (it is there because it eats the transition to the columns I need by their names in the `@Column` annotation).","title":"Error related to OneToMany and getting data using hibernate","body":"<p>As you can see, I have two classes, <code>Person</code> and <code>Item</code>, as well as their corresponding tables in the database, in the <code>App</code> class, I am trying to get all the things of a person using a one-to-many relationship using Hibernate.</p>\n<p><strong>Person</strong></p>\n<pre class=\"lang-java prettyprint-override\"><code>package org.example.model;\n\n\nimport jakarta.persistence.*;\n\nimport java.util.List;\n\n@Entity\n@Table(name = &quot;person&quot;)\npublic class Person {\n\n    @Id\n    @Column(name = &quot;id&quot;)\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\n    private int id;\n\n    @Column(name = &quot;name&quot;)\n    private String name;\n\n    @Column(name = &quot;age&quot;)\n    private int age;\n\n    @OneToMany(mappedBy = &quot;owner&quot;)\n    private List&lt;Item&gt; items;\n\n    public Person(String name, int age) {\n        this.name = name;\n        this.age = age;\n    }\n\n    public Person() {\n    }\n\n    public int getId() {\n        return id;\n    }\n\n    public void setId(int id) {\n        this.id = id;\n    }\n\n    public String getName() {\n        return name;\n    }\n\n    public void setName(String name) {\n        this.name = name;\n    }\n\n    public int getAge() {\n        return age;\n    }\n\n    public void setAge(int age) {\n        this.age = age;\n    }\n\n    public List&lt;Item&gt; getItems() {\n        return items;\n    }\n\n    public void setItems(List&lt;Item&gt; items) {\n        this.items = items;\n    }\n\n    @Override\n    public String toString() {\n        return &quot;Person{&quot; +\n                &quot;id=&quot; + id +\n                &quot;, name='&quot; + name + '\\'' +\n                &quot;, age=&quot; + age +\n                '}';\n    }\n}\n</code></pre>\n<p><strong>Item</strong></p>\n<pre class=\"lang-java prettyprint-override\"><code>package org.example.model;\n\n\nimport jakarta.persistence.*;\n\n@Entity\n@Table(name = &quot;item&quot;)\npublic class Item {\n    @Id\n    @Column(name = &quot;id&quot;)\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\n    private int id;\n\n    @Column(name = &quot;item_name&quot;)\n    String itemName;\n\n    @ManyToOne\n    @JoinColumn(name = &quot;person_id&quot;, referencedColumnName = &quot;id&quot;)\n    private Person owner;\n\n    public Item() {\n    }\n\n    public Item(String itemName) {\n        this.itemName = itemName;\n    }\n\n    public int getId() {\n        return id;\n    }\n\n    public void setId(int id) {\n        this.id = id;\n    }\n\n    public String getItemName() {\n        return itemName;\n    }\n\n    public void setItemName(String itemName) {\n        this.itemName = itemName;\n    }\n\n    @Override\n    public String toString() {\n        return &quot;Item{&quot; +\n                &quot;id=&quot; + id +\n                &quot;, itemName='&quot; + itemName + '\\'' +\n                '}';\n    }\n}\n</code></pre>\n<p><strong>App</strong></p>\n<pre class=\"lang-java prettyprint-override\"><code>package org.example;\n\n\nimport org.example.model.Item;\nimport org.example.model.Person;\nimport org.hibernate.Session;\nimport org.hibernate.SessionFactory;\nimport org.hibernate.cfg.Configuration;\n\nimport java.time.Period;\nimport java.util.List;\n\npublic class App {\n    public static void main(String[] args) {\n\n        Configuration configuration = new Configuration()\n                .addAnnotatedClass(Period.class).addAnnotatedClass(Item.class);\n\n        SessionFactory sessionFactory = configuration.buildSessionFactory();\n        Session session = sessionFactory.getCurrentSession();\n\n        try {\n\n            session.beginTransaction();\n\n            Person person = session.get(Person.class, 1);\n            System.out.println(person);\n\n            List&lt;Item&gt; items = person.getItems();\n            System.out.println(items);\n\n            session.getTransaction().commit();\n        } finally {\n            sessionFactory.close();\n        }\n    }\n}\n</code></pre>\n<p><strong>Exception</strong></p>\n<pre><code>Exception in thread &quot;main&quot; org.hibernate.AnnotationException: Association 'org.example.model.Item.owner' targets an unknown entity named 'org.example.model.Person'\n    at org.hibernate.cfg.ToOneFkSecondPass.doSecondPass(ToOneFkSecondPass.java:97)\n    at org.hibernate.boot.internal.InFlightMetadataCollectorImpl.processEndOfQueue(InFlightMetadataCollectorImpl.java:1879)\n    at org.hibernate.boot.internal.InFlightMetadataCollectorImpl.processFkSecondPassesInOrder(InFlightMetadataCollectorImpl.java:1826)\n    at org.hibernate.boot.internal.InFlightMetadataCollectorImpl.processSecondPasses(InFlightMetadataCollectorImpl.java:1733)\n    at org.hibernate.boot.model.process.spi.MetadataBuildingProcess.complete(MetadataBuildingProcess.java:300)\n    at org.hibernate.boot.model.process.spi.MetadataBuildingProcess.build(MetadataBuildingProcess.java:97)\n    at org.hibernate.boot.internal.MetadataBuilderImpl.build(MetadataBuilderImpl.java:402)\n    at org.hibernate.boot.internal.MetadataBuilderImpl.build(MetadataBuilderImpl.java:90)\n    at org.hibernate.cfg.Configuration.buildSessionFactory(Configuration.java:735)\n    at org.hibernate.cfg.Configuration.buildSessionFactory(Configuration.java:773)\n    at org.example.App.main(App.java:23)\n</code></pre>\n<ol>\n<li>I tried to change different versions of dependencies in pom.xml as well as the java version and rebuilt the project.</li>\n<li>Tried to re-prescribe classes.</li>\n<li>I checked the DB connection (it is there because it eats the transition to the columns I need by their names in the <code>@Column</code> annotation).</li>\n</ol>\n"},{"tags":["java","javadoc","doclet"],"owner":{"account_id":808,"reputation":896,"user_id":1055,"display_name":"Norm"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":47,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1691669458,"creation_date":1691669458,"question_id":76875627,"body_markdown":"I&#39;ve been working on a custom Javadoc doclet using the current doclet APIs. Having encountered a `ReferenceTree` for a link, let&#39;s say `jdk.javadoc.doclet.Doclet#init(Locale, Reporter)`, I need to work out what classes `Locale` and `Reporter` correspond to. I can search in `jdk.javadoc.doclet` for `Reporter` and find it. But in order to find `Locale` I need to know that `java.util.Locale` was imported and I can&#39;t for the life of me work out how.\r\n\r\nI even resorted to digging through the source for the standard doclet, but that&#39;s full of code that uses APIs that aren&#39;t exposed.\r\n\r\nCan this be done using the public APIs?\r\n\r\nI mean, I suppose I can search through all the classes in all the packages in all the modules in the `DocletEnvironment`, but if I don&#39;t find a unique answer, it&#39;ll be unclear how to decide which answer is correct if I can&#39;t find out what was imported.","title":"Is it possible to find the imported classes with the current JavaDoc APIs?","body":"<p>I've been working on a custom Javadoc doclet using the current doclet APIs. Having encountered a <code>ReferenceTree</code> for a link, let's say <code>jdk.javadoc.doclet.Doclet#init(Locale, Reporter)</code>, I need to work out what classes <code>Locale</code> and <code>Reporter</code> correspond to. I can search in <code>jdk.javadoc.doclet</code> for <code>Reporter</code> and find it. But in order to find <code>Locale</code> I need to know that <code>java.util.Locale</code> was imported and I can't for the life of me work out how.</p>\n<p>I even resorted to digging through the source for the standard doclet, but that's full of code that uses APIs that aren't exposed.</p>\n<p>Can this be done using the public APIs?</p>\n<p>I mean, I suppose I can search through all the classes in all the packages in all the modules in the <code>DocletEnvironment</code>, but if I don't find a unique answer, it'll be unclear how to decide which answer is correct if I can't find out what was imported.</p>\n"},{"tags":["java","spring","spring-boot"],"comments":[{"owner":{"account_id":326480,"reputation":368,"user_id":5047819,"display_name":"Anders Lindgren"},"score":0,"creation_date":1691662099,"post_id":76872418,"comment_id":135522936,"body_markdown":"If you are using an environment variable to set the active profile it should be SPRING_PROFILES_ACTIVE=local. See https://docs.spring.io/spring-boot/docs/current/reference/html/howto.html#howto.properties-and-configuration.set-active-spring-profiles","body":"If you are using an environment variable to set the active profile it should be SPRING_PROFILES_ACTIVE=local. See <a href=\"https://docs.spring.io/spring-boot/docs/current/reference/html/howto.html#howto.properties-and-configuration.set-active-spring-profiles\" rel=\"nofollow noreferrer\">docs.spring.io/spring-boot/docs/current/reference/html/&hellip;</a>"},{"owner":{"account_id":1616331,"reputation":138,"user_id":1493911,"display_name":"Steven Lai"},"score":0,"creation_date":1691668320,"post_id":76872418,"comment_id":135524089,"body_markdown":"I think both should work. Also it works and can find the correct properties file when I run the jar as web service. Anyway, I got it working now - see my edit if you are interested but it&#39;s more like a hack.","body":"I think both should work. Also it works and can find the correct properties file when I run the jar as web service. Anyway, I got it working now - see my edit if you are interested but it&#39;s more like a hack."}],"owner":{"account_id":1616331,"reputation":138,"user_id":1493911,"display_name":"Steven Lai"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":18,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1691668167,"creation_date":1691637023,"question_id":76872418,"body_markdown":"We want to add a command to our existing Spring boot WebFlux application so that we can issue a command with the packaged jar to perform some cleanup (query database, issue some API calls). While sharing logic with the actual server code, the command itself is fully autonomous and doesn&#39;t have to be run on the same server or doesn&#39;t even need a running server. Also the cleanup command is designed to be crash-only and we are using a NoSQL database so those APIs from spring-batch which requires an implementation of jobRepository seems to be unnecessary and not easy to setup.\r\n\r\nI am trying to do the following:\r\n\r\n```java\r\n@SpringBootApplication\r\npublic class SpringReactiveApplication {\r\n  public static void main(String [] args) {\r\n    if (Arrays.asList(args).contains(&quot;runJob&quot;)) {\r\n      var context = new AnnotationConfigApplicationContext(SpringReactiveApplication.class);\r\n      var component = context.getBean(MyComponent.class);\r\n      component.runJob().block();\r\n    } else {\r\n      SpringApplication.run(SpringReactiveApplication.class);\r\n    }\r\n  }\r\n}\r\n```\r\n\r\nBut when I tried to run this on my local computer `java -jar app.jar runJob`, it seems the context was picking up a wrong `application-xxxx.properties` even if I have environment variable set `spring_profiles_active=local`. However, if I just run `java -jar app.jar` the server was able to start successfully with local profile set.\r\n\r\n**EDIT**\r\n\r\nI actually got it working with something like below:\r\n\r\n```java\r\n@SpringBootApplication\r\npublic class SpringReactiveApplication {\r\n  public static void main(String [] args) {\r\n    if (Arrays.asList(args).contains(&quot;runJob&quot;)) {\r\n      var app = new SpringApplication(SpringReactiveApplication.class);\r\n      app.setWebApplicationType(WebApplicationType.NONE);\r\n      var context = app.run(args);\r\n      var component = context.getBean(MyComponent.class);\r\n      component.runJob().block();\r\n    } else {\r\n      SpringApplication.run(SpringReactiveApplication.class);\r\n    }\r\n  }\r\n}\r\n```\r\n\r\nBut the question remains since I feel my solution is more of a hack.\r\n\r\nAlso giving a bit context here - the reason we want to add this into our spring-boot jar is that we want to use the same container image in our k8s which can be used as a web deployment as well as a background job.\r\n\r\n","title":"Implement ad hoc command inside packaged Spring netty jar","body":"<p>We want to add a command to our existing Spring boot WebFlux application so that we can issue a command with the packaged jar to perform some cleanup (query database, issue some API calls). While sharing logic with the actual server code, the command itself is fully autonomous and doesn't have to be run on the same server or doesn't even need a running server. Also the cleanup command is designed to be crash-only and we are using a NoSQL database so those APIs from spring-batch which requires an implementation of jobRepository seems to be unnecessary and not easy to setup.</p>\n<p>I am trying to do the following:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@SpringBootApplication\npublic class SpringReactiveApplication {\n  public static void main(String [] args) {\n    if (Arrays.asList(args).contains(&quot;runJob&quot;)) {\n      var context = new AnnotationConfigApplicationContext(SpringReactiveApplication.class);\n      var component = context.getBean(MyComponent.class);\n      component.runJob().block();\n    } else {\n      SpringApplication.run(SpringReactiveApplication.class);\n    }\n  }\n}\n</code></pre>\n<p>But when I tried to run this on my local computer <code>java -jar app.jar runJob</code>, it seems the context was picking up a wrong <code>application-xxxx.properties</code> even if I have environment variable set <code>spring_profiles_active=local</code>. However, if I just run <code>java -jar app.jar</code> the server was able to start successfully with local profile set.</p>\n<p><strong>EDIT</strong></p>\n<p>I actually got it working with something like below:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@SpringBootApplication\npublic class SpringReactiveApplication {\n  public static void main(String [] args) {\n    if (Arrays.asList(args).contains(&quot;runJob&quot;)) {\n      var app = new SpringApplication(SpringReactiveApplication.class);\n      app.setWebApplicationType(WebApplicationType.NONE);\n      var context = app.run(args);\n      var component = context.getBean(MyComponent.class);\n      component.runJob().block();\n    } else {\n      SpringApplication.run(SpringReactiveApplication.class);\n    }\n  }\n}\n</code></pre>\n<p>But the question remains since I feel my solution is more of a hack.</p>\n<p>Also giving a bit context here - the reason we want to add this into our spring-boot jar is that we want to use the same container image in our k8s which can be used as a web deployment as well as a background job.</p>\n"},{"tags":["java","android","android-recyclerview"],"comments":[{"owner":{"account_id":24429427,"reputation":172,"user_id":18354566,"display_name":"Muzammal Abdul Ghafoor"},"score":0,"creation_date":1691667888,"post_id":76875335,"comment_id":135523996,"body_markdown":"Can you please provide recycler view code snippet? also it would be great if you add any reference image as well.","body":"Can you please provide recycler view code snippet? also it would be great if you add any reference image as well."}],"answers":[{"tags":[],"owner":{"account_id":28578269,"reputation":142,"user_id":21879587,"display_name":"tamtejszystan"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691668042,"creation_date":1691668042,"answer_id":76875449,"question_id":76875335,"body_markdown":"You must implement `RecyclerViewAdapter` and then override the `onBindViewHolder` method of your adapter, where you can update the clickability and appearance of each item based on the level&#39;s completion status.\r\n\r\nCheck this:\r\nhttps://developer.android.com/reference/androidx/recyclerview/widget/RecyclerView.Adapter#onBindViewHolder(VH,int)","title":"Is there any way to make some items of recyclerView unclickable or clickable on specific conditions?","body":"<p>You must implement <code>RecyclerViewAdapter</code> and then override the <code>onBindViewHolder</code> method of your adapter, where you can update the clickability and appearance of each item based on the level's completion status.</p>\n<p>Check this:\n<a href=\"https://developer.android.com/reference/androidx/recyclerview/widget/RecyclerView.Adapter#onBindViewHolder(VH,int)\" rel=\"nofollow noreferrer\">https://developer.android.com/reference/androidx/recyclerview/widget/RecyclerView.Adapter#onBindViewHolder(VH,int)</a></p>\n"},{"tags":[],"owner":{"account_id":11403986,"reputation":277,"user_id":8360050,"display_name":"Praveen Kumar"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691668130,"creation_date":1691668130,"answer_id":76875466,"question_id":76875335,"body_markdown":"you can control the clickability of items in a RecyclerView based on specific conditions. You can achieve this by customizing the behavior of your RecyclerView.Adapter\r\n\r\nAssuming you have a RecyclerView and an Adapter set up, you can follow these steps:\r\n\r\n1.Modify Adapter: Inside your RecyclerView.Adapter class, override the onBindViewHolder method. In this method, you can enable or disable the click action based on your specific conditions.\r\n\r\n    class YourAdapter(private val itemList: List&lt;Item&gt;) : RecyclerView.Adapter&lt;YourAdapter.ViewHolder&gt;() {\r\n\r\n    // ... other methods and ViewHolder implementation ...\r\n\r\n    override fun onBindViewHolder(holder: ViewHolder, position: Int) {\r\n        val currentItem = itemList[position]\r\n\r\n        // Set click listener conditionally\r\n        if (yourSpecificCondition) {\r\n            holder.itemView.setOnClickListener {\r\n                // Handle click action\r\n            }\r\n        } else {\r\n            holder.itemView.setOnClickListener(null) // Remove click listener\r\n        }\r\n\r\n        // Bind your data to the ViewHolder\r\n    }\r\n}\r\n\r\nIn the code above:\r\n\r\nReplace **yourSpecificCondition** with your actual condition that determines whether an item should be clickable or not.\r\n\r\nIf the condition is met, the setOnClickListener is set, enabling the click action. If not, it&#39;s set to null, disabling the click action.\r\n\r\n**RecyclerView Item Click Handling:**\r\nIf you want to handle click events when the items are clickable, implement the item click handling logic inside the **setOnClickListener** block in the onBindViewHolder method.\r\n\r\n**Notify Data Changes:**\r\nWhenever your condition changes, make sure to call notifyDataSetChanged() on your adapter to update the RecyclerView and reflect the changes in clickability.\r\n\r\nand finally call this method\r\n\r\n    yourAdapter.notifyDataSetChanged()\r\n\r\n\r\n","title":"Is there any way to make some items of recyclerView unclickable or clickable on specific conditions?","body":"<p>you can control the clickability of items in a RecyclerView based on specific conditions. You can achieve this by customizing the behavior of your RecyclerView.Adapter</p>\n<p>Assuming you have a RecyclerView and an Adapter set up, you can follow these steps:</p>\n<p>1.Modify Adapter: Inside your RecyclerView.Adapter class, override the onBindViewHolder method. In this method, you can enable or disable the click action based on your specific conditions.</p>\n<pre><code>class YourAdapter(private val itemList: List&lt;Item&gt;) : RecyclerView.Adapter&lt;YourAdapter.ViewHolder&gt;() {\n\n// ... other methods and ViewHolder implementation ...\n\noverride fun onBindViewHolder(holder: ViewHolder, position: Int) {\n    val currentItem = itemList[position]\n\n    // Set click listener conditionally\n    if (yourSpecificCondition) {\n        holder.itemView.setOnClickListener {\n            // Handle click action\n        }\n    } else {\n        holder.itemView.setOnClickListener(null) // Remove click listener\n    }\n\n    // Bind your data to the ViewHolder\n}\n</code></pre>\n<p>}</p>\n<p>In the code above:</p>\n<p>Replace <strong>yourSpecificCondition</strong> with your actual condition that determines whether an item should be clickable or not.</p>\n<p>If the condition is met, the setOnClickListener is set, enabling the click action. If not, it's set to null, disabling the click action.</p>\n<p><strong>RecyclerView Item Click Handling:</strong>\nIf you want to handle click events when the items are clickable, implement the item click handling logic inside the <strong>setOnClickListener</strong> block in the onBindViewHolder method.</p>\n<p><strong>Notify Data Changes:</strong>\nWhenever your condition changes, make sure to call notifyDataSetChanged() on your adapter to update the RecyclerView and reflect the changes in clickability.</p>\n<p>and finally call this method</p>\n<pre><code>yourAdapter.notifyDataSetChanged()\n</code></pre>\n"}],"owner":{"account_id":28335622,"reputation":1,"user_id":21669212,"display_name":"Anil Pandey"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":24,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1691668130,"creation_date":1691667151,"question_id":76875335,"body_markdown":"I want to make a list of levels of game using recyclerView. If level 1 is not completed, other levels will be locked, if level 1 is completed level 2 will be unlocked and so on.\r\nNeed help on this.\r\n\r\nI have no idea how to do it.","title":"Is there any way to make some items of recyclerView unclickable or clickable on specific conditions?","body":"<p>I want to make a list of levels of game using recyclerView. If level 1 is not completed, other levels will be locked, if level 1 is completed level 2 will be unlocked and so on.\nNeed help on this.</p>\n<p>I have no idea how to do it.</p>\n"},{"tags":["java","collections","lambda","java-8","java-stream"],"comments":[{"owner":{"account_id":1240724,"reputation":7675,"user_id":1203394,"accept_rate":68,"display_name":"Marquis Blount"},"score":0,"creation_date":1453439516,"post_id":34939425,"comment_id":57611061,"body_markdown":"Please provide some code to show what you have done so far. what have you attempted. where are you getting suck at","body":"Please provide some code to show what you have done so far. what have you attempted. where are you getting suck at"},{"owner":{"account_id":5247548,"reputation":580,"user_id":4192735,"accept_rate":88,"display_name":"Bhaumik Thakkar"},"score":0,"creation_date":1453439765,"post_id":34939425,"comment_id":57611149,"body_markdown":"pls see updated question now! @MarquisBlount","body":"pls see updated question now! @MarquisBlount"}],"answers":[{"tags":[],"owner":{"account_id":3960214,"reputation":7032,"user_id":3267497,"accept_rate":18,"display_name":"Mshnik"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1453442230,"creation_date":1453441561,"answer_id":34939815,"question_id":34939425,"body_markdown":"It&#39;s easiest (and cleanest) to do it in two separate stream operations, like such:\r\n\r\n    public class OddEvenSum {\r\n    \r\n      public static void main(String[] args) {\r\n    \r\n        List&lt;Integer&gt; lst = ...; // Get a list however you want, for example via scanner as you are. \r\n                                 // To test, you can use Arrays.asList(1,2,3,4,5)\r\n    \r\n        Predicate&lt;Integer&gt; evenFunc = (a) -&gt; a%2 == 0;\r\n        Predicate&lt;Integer&gt; oddFunc = evenFunc.negate();\r\n    \r\n        int evenSum = lst.stream().filter(evenFunc).mapToInt((a) -&gt; a).sum();\r\n        int oddSum = lst.stream().filter(oddFunc).mapToInt((a) -&gt; a).sum();\r\n    \r\n        Map&lt;String, Integer&gt; oddsAndEvenSumMap = new HashMap&lt;&gt;();\r\n        oddsAndEvenSumMap.put(&quot;EVEN&quot;, evenSum);\r\n        oddsAndEvenSumMap.put(&quot;ODD&quot;, oddSum);\r\n    \r\n        System.out.println(oddsAndEvenSumMap);\r\n      }\r\n    }\r\n\r\nOne change I did make was making the resultant Map a `Map&lt;String,Integer&gt;` instead of `Map&lt;Boolean,Integer&gt;`. It&#39;s vey unclear what a key of `true` in the latter Map would represent, whereas string keys are slightly more effective. It&#39;s unclear why you need a map at all, but I&#39;ll assume that goes on to a later part of the problem.","title":"How to split odd and even numbers and sum of both in a collection using Stream","body":"<p>It's easiest (and cleanest) to do it in two separate stream operations, like such:</p>\n\n<pre><code>public class OddEvenSum {\n\n  public static void main(String[] args) {\n\n    List&lt;Integer&gt; lst = ...; // Get a list however you want, for example via scanner as you are. \n                             // To test, you can use Arrays.asList(1,2,3,4,5)\n\n    Predicate&lt;Integer&gt; evenFunc = (a) -&gt; a%2 == 0;\n    Predicate&lt;Integer&gt; oddFunc = evenFunc.negate();\n\n    int evenSum = lst.stream().filter(evenFunc).mapToInt((a) -&gt; a).sum();\n    int oddSum = lst.stream().filter(oddFunc).mapToInt((a) -&gt; a).sum();\n\n    Map&lt;String, Integer&gt; oddsAndEvenSumMap = new HashMap&lt;&gt;();\n    oddsAndEvenSumMap.put(\"EVEN\", evenSum);\n    oddsAndEvenSumMap.put(\"ODD\", oddSum);\n\n    System.out.println(oddsAndEvenSumMap);\n  }\n}\n</code></pre>\n\n<p>One change I did make was making the resultant Map a <code>Map&lt;String,Integer&gt;</code> instead of <code>Map&lt;Boolean,Integer&gt;</code>. It's vey unclear what a key of <code>true</code> in the latter Map would represent, whereas string keys are slightly more effective. It's unclear why you need a map at all, but I'll assume that goes on to a later part of the problem.</p>\n"},{"tags":[],"owner":{"account_id":6243460,"reputation":97907,"user_id":4856258,"accept_rate":100,"display_name":"Tagir Valeev"},"down_vote_count":0,"up_vote_count":31,"is_accepted":true,"score":31,"last_activity_date":1453446466,"creation_date":1453446466,"answer_id":34940917,"question_id":34939425,"body_markdown":"You can use [`Collectors.partitioningBy`](https://docs.oracle.com/javase/8/docs/api/java/util/stream/Collectors.html#partitioningBy-java.util.function.Predicate-java.util.stream.Collector-) which does exactly what you want:\r\n\r\n\tMap&lt;Boolean, Integer&gt; result = inputList.stream().collect(\r\n\t\t   Collectors.partitioningBy(x -&gt; x%2 == 0, Collectors.summingInt(Integer::intValue)));\r\n\r\nThe resulting map contains sum of even numbers in `true` key and sum of odd numbers in `false` key.","title":"How to split odd and even numbers and sum of both in a collection using Stream","body":"<p>You can use <a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/stream/Collectors.html#partitioningBy-java.util.function.Predicate-java.util.stream.Collector-\"><code>Collectors.partitioningBy</code></a> which does exactly what you want:</p>\n\n<pre><code>Map&lt;Boolean, Integer&gt; result = inputList.stream().collect(\n       Collectors.partitioningBy(x -&gt; x%2 == 0, Collectors.summingInt(Integer::intValue)));\n</code></pre>\n\n<p>The resulting map contains sum of even numbers in <code>true</code> key and sum of odd numbers in <code>false</code> key.</p>\n"},{"tags":[],"owner":{"account_id":25890866,"reputation":11,"user_id":19618306,"display_name":"Sharad Nath Sangle"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1658988917,"creation_date":1658758774,"answer_id":73110794,"question_id":34939425,"body_markdown":"        List&lt;Integer&gt; numberList = Arrays.asList(1,3,4,60,12,22,333456,1239);\r\n        Map&lt;Boolean, List&lt;Integer&gt;&gt; evenOddNumbers = numberList.stream()\r\n                .collect(Collectors.partitioningBy( x -&gt; x%2 == 0));\r\n        System.out.println(evenOddNumbers);\r\n\r\nOutput:\r\n&gt; {false=[1, 3, 1239], true=[4, 60, 12, 22, 333456]}\r\n\r\nand if want to separate it out the use below one:\r\n\r\n    List&lt;Integer&gt; evenNums = partitions.get(true);\r\n    List&lt;Integer&gt; oddNums = partitions.get(false);","title":"How to split odd and even numbers and sum of both in a collection using Stream","body":"<pre><code>    List&lt;Integer&gt; numberList = Arrays.asList(1,3,4,60,12,22,333456,1239);\n    Map&lt;Boolean, List&lt;Integer&gt;&gt; evenOddNumbers = numberList.stream()\n            .collect(Collectors.partitioningBy( x -&gt; x%2 == 0));\n    System.out.println(evenOddNumbers);\n</code></pre>\n<p>Output:</p>\n<blockquote>\n<p>{false=[1, 3, 1239], true=[4, 60, 12, 22, 333456]}</p>\n</blockquote>\n<p>and if want to separate it out the use below one:</p>\n<pre><code>List&lt;Integer&gt; evenNums = partitions.get(true);\nList&lt;Integer&gt; oddNums = partitions.get(false);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":27851696,"reputation":1,"user_id":21266084,"display_name":"Divya Shah"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1677483654,"creation_date":1677074853,"answer_id":75533861,"question_id":34939425,"body_markdown":"Easiest way to find even numbers from list and then performing addition of even numbers using Stream : \r\n\r\n    int number = l.stream().filter(n-&gt;n%2==0).mapToInt(n -&gt; n).sum();\r\n    \t\tSystem.out.println(number);\r\n\t\t\r\n        ","title":"How to split odd and even numbers and sum of both in a collection using Stream","body":"<p>Easiest way to find even numbers from list and then performing addition of even numbers using Stream :</p>\n<pre><code>int number = l.stream().filter(n-&gt;n%2==0).mapToInt(n -&gt; n).sum();\n        System.out.println(number);\n    \n    \n</code></pre>\n"},{"tags":[],"owner":{"account_id":6123562,"reputation":1,"user_id":4776301,"display_name":"Umesh Kumar Yadav"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691668041,"creation_date":1691667265,"answer_id":76875352,"question_id":34939425,"body_markdown":"Below is the two use case of separating the ODD and EVEN numbers from an Integer array -\r\n\r\n\r\n..............................................................................  \r\n```\r\n    int[] arr = {45,23,6,8,9,2};\r\n```\r\n    Map&lt;Boolean, List&lt;Integer&gt;&gt; strm = Arrays.stream(arr).boxed().collect(Collectors.partitioningBy(i -&gt; i%2 == 0));  \r\n    System.out.println(strm);  \r\n    // Output - {false=[45, 23, 9], true=[6, 8, 2]}\r\n\r\n    System.out.println(Arrays.stream(arr).mapToObj(ob -&gt; Integer.valueOf(ob)).collect(Collectors.groupingBy(t-&gt; t%2 == 0 ?&quot;ODD&quot; : &quot;EVEN&quot;)));\r\n    // Output - {EVEN=[6, 8, 2], ODD=[45, 23, 9]}\r\n\r\n    \r\n    ","title":"How to split odd and even numbers and sum of both in a collection using Stream","body":"<p>Below is the two use case of separating the ODD and EVEN numbers from an Integer array -</p>\n<p>..............................................................................</p>\n<pre><code>    int[] arr = {45,23,6,8,9,2};\n</code></pre>\n<pre><code>Map&lt;Boolean, List&lt;Integer&gt;&gt; strm = Arrays.stream(arr).boxed().collect(Collectors.partitioningBy(i -&gt; i%2 == 0));  \nSystem.out.println(strm);  \n// Output - {false=[45, 23, 9], true=[6, 8, 2]}\n\nSystem.out.println(Arrays.stream(arr).mapToObj(ob -&gt; Integer.valueOf(ob)).collect(Collectors.groupingBy(t-&gt; t%2 == 0 ?&quot;ODD&quot; : &quot;EVEN&quot;)));\n// Output - {EVEN=[6, 8, 2], ODD=[45, 23, 9]}\n</code></pre>\n"}],"owner":{"account_id":5247548,"reputation":580,"user_id":4192735,"accept_rate":88,"display_name":"Bhaumik Thakkar"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":23281,"favorite_count":0,"down_vote_count":5,"up_vote_count":12,"accepted_answer_id":34940917,"answer_count":5,"score":7,"last_activity_date":1691668041,"creation_date":1453439418,"question_id":34939425,"body_markdown":"How can I *split* odd and even numbers and sum both in a collection using stream methods of Java&amp;nbsp;8?\r\n\r\n    public class SplitAndSumOddEven {\r\n\r\n        public static void main(String[] args) {\r\n\r\n            // Read the input\r\n            try (Scanner scanner = new Scanner(System.in)) {\r\n\r\n                // Read the number of inputs needs to read.\r\n                int length = scanner.nextInt();\r\n\r\n                // Fillup the list of inputs\r\n                List&lt;Integer&gt; inputList = new ArrayList&lt;&gt;();\r\n                for (int i = 0; i &lt; length; i++) {\r\n                    inputList.add(scanner.nextInt());\r\n                }\r\n\r\n                // TODO:: operate on inputs and produce output as output map\r\n                Map&lt;Boolean, Integer&gt; oddAndEvenSums = inputList.stream(); // Here I want to split odd &amp; even from that array and sum of both\r\n\r\n                // Do not modify below code. Print output from list\r\n                System.out.println(oddAndEvenSums);\r\n            }\r\n        }\r\n    }\r\n\r\n\r\n\r\n","title":"How to split odd and even numbers and sum of both in a collection using Stream","body":"<p>How can I <em>split</em> odd and even numbers and sum both in a collection using stream methods of Java 8?</p>\n<pre><code>public class SplitAndSumOddEven {\n\n    public static void main(String[] args) {\n\n        // Read the input\n        try (Scanner scanner = new Scanner(System.in)) {\n\n            // Read the number of inputs needs to read.\n            int length = scanner.nextInt();\n\n            // Fillup the list of inputs\n            List&lt;Integer&gt; inputList = new ArrayList&lt;&gt;();\n            for (int i = 0; i &lt; length; i++) {\n                inputList.add(scanner.nextInt());\n            }\n\n            // TODO:: operate on inputs and produce output as output map\n            Map&lt;Boolean, Integer&gt; oddAndEvenSums = inputList.stream(); // Here I want to split odd &amp; even from that array and sum of both\n\n            // Do not modify below code. Print output from list\n            System.out.println(oddAndEvenSums);\n        }\n    }\n}\n</code></pre>\n"},{"tags":["java","json","spring","hibernate","jackson"],"owner":{"account_id":17706674,"reputation":68,"user_id":12855081,"display_name":"ChrisHilborne"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":48,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1691667079,"creation_date":1691667079,"question_id":76875323,"body_markdown":"I&#180;m having trouble with the serialization to JSON by Jackson FasterXML when the member collection of a child element (i.e. a grandchild collection) is Lazily Initialized. \r\n\r\nHere&#39;s an example of what the entities look like:\r\n\r\n    @Entity \r\n    public class Parent {\r\n     \r\n        @ManyToMany(fetch = FetchType.LAZY)\r\n        @JsonManagedReference \r\n        private List&lt;Child&gt; children; \r\n\r\n    }\r\n\r\n```\r\n   @Entity \r\n   public class Child {\r\n\r\n        @ManyToMany(fetch = FectchType.LAZY)\r\n        @JsonBackReference\r\n        private List&lt;Parent&gt; parent;\r\n     \r\n        @OneToMany(fetch = FectchType.LAZY) \r\n        @JsonManagedReference\r\n        private List&lt;Grandchild&gt; grandChildren; \r\n\r\n   }\r\n``` \r\n\r\nThe application is relatively large with a number of entities and many relations between them. It would be very slow if I was to either load everything eagerly or use the property `spring.jpa.open-in-view=true`. Instead the children of an entity required are loaded within the database transaction and everything else is laziliy initialized.\r\n\r\nThe exception that gets thrown on serialization is as follows:\r\n```\r\ncom.fasterxml.jackson.databind.JsonMappingException: failed to lazily initialize a collection of role: domain.Child.grandchildren, could not initialize proxy - no Session (through reference chain: java.util.ArrayList[0]-&gt;domain.Parent[&quot;children&quot;]-&gt;org.hibernate.collection.internal.PersistentBag[0]-&gt;domain.Child[&quot;grandChildren&quot;])\r\n```\r\n\r\nOf course with this in mind what is needed is for Jackson to serialize those lazily initialized properties and member collections it finds as null - but I haven&#39;t figured out how to do it yet.\r\n\r\n\r\nI&#180;ve done research and found that there is a module to help with this:\r\n\r\n    \t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;com.fasterxml.jackson.datatype&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;jackson-datatype-hibernate5&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\nSo I&#39;ve configured Jackson as follows - but the exception remains.\r\n\r\n```\r\n@Configuration\r\npublic class JacksonConfig {\r\n\r\n\r\n    @Bean\r\n    public MappingJackson2HttpMessageConverter configureObjectMapper() {\r\n        ObjectMapper objectMapper = new ObjectMapper();\r\n        Hibernate5Module hibernate5Module = new Hibernate5Module();\r\n\r\n        hibernate5Module.configure(Hibernate5Module.Feature.FORCE_LAZY_LOADING, false);\r\n        hibernate5Module.configure(Hibernate5Module.Feature.USE_TRANSIENT_ANNOTATION, false);\r\n        hibernate5Module.configure(Hibernate5Module.Feature.REQUIRE_EXPLICIT_LAZY_LOADING_MARKER, false);\r\n        hibernate5Module.configure(Hibernate5Module.Feature.WRITE_MISSING_ENTITIES_AS_NULL, true);\r\n        objectMapper.registerModule(hibernate5Module);\r\n\r\n        MappingJackson2HttpMessageConverter converter = new MappingJackson2HttpMessageConverter();\r\n        converter.setObjectMapper(objectMapper);\r\n        return converter;\r\n    }\r\n}\r\n```\r\n\r\nI&#39;m stuck! I don&#39;t know why the configuration I&#39;ve provided isn&#39;t working.\r\n\r\nDependency information:\r\n\r\n - Spring Boot `2.6.6`\r\n - Hibernate `5.6.7.Final`\r\n - Jackson `2.13.2` \r\n - Jackson Datatype Hibernate5 `2.13.2`","title":"Lazy Initialize Exception on Jackson Serialize with Hibernate 5 module configured","body":"<p>I´m having trouble with the serialization to JSON by Jackson FasterXML when the member collection of a child element (i.e. a grandchild collection) is Lazily Initialized.</p>\n<p>Here's an example of what the entities look like:</p>\n<pre><code>@Entity \npublic class Parent {\n \n    @ManyToMany(fetch = FetchType.LAZY)\n    @JsonManagedReference \n    private List&lt;Child&gt; children; \n\n}\n</code></pre>\n<pre><code>   @Entity \n   public class Child {\n\n        @ManyToMany(fetch = FectchType.LAZY)\n        @JsonBackReference\n        private List&lt;Parent&gt; parent;\n     \n        @OneToMany(fetch = FectchType.LAZY) \n        @JsonManagedReference\n        private List&lt;Grandchild&gt; grandChildren; \n\n   }\n</code></pre>\n<p>The application is relatively large with a number of entities and many relations between them. It would be very slow if I was to either load everything eagerly or use the property <code>spring.jpa.open-in-view=true</code>. Instead the children of an entity required are loaded within the database transaction and everything else is laziliy initialized.</p>\n<p>The exception that gets thrown on serialization is as follows:</p>\n<pre><code>com.fasterxml.jackson.databind.JsonMappingException: failed to lazily initialize a collection of role: domain.Child.grandchildren, could not initialize proxy - no Session (through reference chain: java.util.ArrayList[0]-&gt;domain.Parent[&quot;children&quot;]-&gt;org.hibernate.collection.internal.PersistentBag[0]-&gt;domain.Child[&quot;grandChildren&quot;])\n</code></pre>\n<p>Of course with this in mind what is needed is for Jackson to serialize those lazily initialized properties and member collections it finds as null - but I haven't figured out how to do it yet.</p>\n<p>I´ve done research and found that there is a module to help with this:</p>\n<pre><code>    &lt;dependency&gt;\n        &lt;groupId&gt;com.fasterxml.jackson.datatype&lt;/groupId&gt;\n        &lt;artifactId&gt;jackson-datatype-hibernate5&lt;/artifactId&gt;\n    &lt;/dependency&gt;\n</code></pre>\n<p>So I've configured Jackson as follows - but the exception remains.</p>\n<pre><code>@Configuration\npublic class JacksonConfig {\n\n\n    @Bean\n    public MappingJackson2HttpMessageConverter configureObjectMapper() {\n        ObjectMapper objectMapper = new ObjectMapper();\n        Hibernate5Module hibernate5Module = new Hibernate5Module();\n\n        hibernate5Module.configure(Hibernate5Module.Feature.FORCE_LAZY_LOADING, false);\n        hibernate5Module.configure(Hibernate5Module.Feature.USE_TRANSIENT_ANNOTATION, false);\n        hibernate5Module.configure(Hibernate5Module.Feature.REQUIRE_EXPLICIT_LAZY_LOADING_MARKER, false);\n        hibernate5Module.configure(Hibernate5Module.Feature.WRITE_MISSING_ENTITIES_AS_NULL, true);\n        objectMapper.registerModule(hibernate5Module);\n\n        MappingJackson2HttpMessageConverter converter = new MappingJackson2HttpMessageConverter();\n        converter.setObjectMapper(objectMapper);\n        return converter;\n    }\n}\n</code></pre>\n<p>I'm stuck! I don't know why the configuration I've provided isn't working.</p>\n<p>Dependency information:</p>\n<ul>\n<li>Spring Boot <code>2.6.6</code></li>\n<li>Hibernate <code>5.6.7.Final</code></li>\n<li>Jackson <code>2.13.2</code></li>\n<li>Jackson Datatype Hibernate5 <code>2.13.2</code></li>\n</ul>\n"},{"tags":["java","data-structures","linked-list"],"comments":[{"owner":{"account_id":2360785,"reputation":11123,"user_id":2067492,"display_name":"matt"},"score":1,"creation_date":1691666460,"post_id":76875193,"comment_id":135523698,"body_markdown":"&quot;I&#39;ve checked the code with AI, and it works properly when I remove the get() method and instead iterate through the list inside the deleteLast() method.&quot; This doesn&#39;t really make sense.","body":"&quot;I&#39;ve checked the code with AI, and it works properly when I remove the get() method and instead iterate through the list inside the deleteLast() method.&quot; This doesn&#39;t really make sense."},{"owner":{"account_id":5404,"reputation":22089,"user_id":8681,"accept_rate":67,"display_name":"Jorn"},"score":0,"creation_date":1691666643,"post_id":76875193,"comment_id":135523737,"body_markdown":"Part of the problem is that you&#39;re saving the `tail` separately. There is no real reason to do that. It forces you to have special logic for the last element, instead of having the same logic for all elements.","body":"Part of the problem is that you&#39;re saving the <code>tail</code> separately. There is no real reason to do that. It forces you to have special logic for the last element, instead of having the same logic for all elements."},{"owner":{"account_id":2360785,"reputation":11123,"user_id":2067492,"display_name":"matt"},"score":0,"creation_date":1691666671,"post_id":76875193,"comment_id":135523745,"body_markdown":"It appears your &quot;insertFirst&quot; is broken. The first time you call `insertLast` it calls insert first and tail is null. At the end of insert first, the size will be 2 because you call size+= 1; two times.","body":"It appears your &quot;insertFirst&quot; is broken. The first time you call <code>insertLast</code> it calls insert first and tail is null. At the end of insert first, the size will be 2 because you call size+= 1; two times."},{"owner":{"account_id":7142980,"reputation":323243,"user_id":5459839,"display_name":"trincot"},"score":0,"creation_date":1691669490,"post_id":76875193,"comment_id":135524320,"body_markdown":"Side note: the implementation of `deleteLast` cannot benefit from maintaining a `tail`, reason why I would not maintain it at all. Same for maintaining `size`: it just is a burden with hardly any benefit.","body":"Side note: the implementation of <code>deleteLast</code> cannot benefit from maintaining a <code>tail</code>, reason why I would not maintain it at all. Same for maintaining <code>size</code>: it just is a burden with hardly any benefit."}],"answers":[{"tags":[],"owner":{"account_id":401843,"reputation":89768,"user_id":768644,"display_name":"rzwitserloot"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691666903,"creation_date":1691666903,"answer_id":76875306,"question_id":76875193,"body_markdown":"Your `insertLast` method reverts to `insertFirst` for the first element. And your `insertFirst` code runs `size += 1` __twice__ in certain circumstances.\r\n\r\nHence, when you run `get(size-2)`, size is actually 4 (even though there are 3 elements in there). You&#39;re clearing out the &#39;next&#39; value of the __last__ node, which was already `null`, hence why this doesn&#39;t do anything.\r\n\r\nFor the future, this isn&#39;t what Stack Overflow is for. It&#39;s not a debugging service. For next time, pepper your code with sysout statements, or more productively, learn how to use a debugger. Debugging is very simple: You go through __every relevant line__ around where your error occurs and work out what values should be and what operations should do in your head. Use paper if you have to. Then run the code and check that the JVM runs things in the same way you think they should.\r\n\r\nHad you done that you&#39;d have figured out `size` was unexpectedly 4. You then debug _that_ and eventually you&#39;d have found this issue.\r\n","title":"Java LinkedList implementation -- deleteLast method returns tail element to be deleted but does not delete it","body":"<p>Your <code>insertLast</code> method reverts to <code>insertFirst</code> for the first element. And your <code>insertFirst</code> code runs <code>size += 1</code> <strong>twice</strong> in certain circumstances.</p>\n<p>Hence, when you run <code>get(size-2)</code>, size is actually 4 (even though there are 3 elements in there). You're clearing out the 'next' value of the <strong>last</strong> node, which was already <code>null</code>, hence why this doesn't do anything.</p>\n<p>For the future, this isn't what Stack Overflow is for. It's not a debugging service. For next time, pepper your code with sysout statements, or more productively, learn how to use a debugger. Debugging is very simple: You go through <strong>every relevant line</strong> around where your error occurs and work out what values should be and what operations should do in your head. Use paper if you have to. Then run the code and check that the JVM runs things in the same way you think they should.</p>\n<p>Had you done that you'd have figured out <code>size</code> was unexpectedly 4. You then debug <em>that</em> and eventually you'd have found this issue.</p>\n"}],"owner":{"account_id":29040147,"reputation":1,"user_id":22245162,"display_name":"Rohan Dsouza"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":31,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1691666903,"creation_date":1691666017,"question_id":76875193,"body_markdown":"```java\r\npublic class LL {\r\n\r\n    public Node head;\r\n    public Node tail;\r\n    public int size;\r\n    public LL(){\r\n        this.size = 0;\r\n    }\r\n\r\n    public void insertFirst(int value){\r\n\r\n        Node node = new Node(value);\r\n        node.next = head;\r\n        head = node;\r\n\r\n        if(tail==null){\r\n            tail=head;\r\n            size+=1;\r\n        }\r\n\r\n        size+=1;\r\n    }\r\n    public void insertLast(int value){\r\n        if(tail==null) {\r\n            insertFirst(value);\r\n            return;\r\n        }\r\n        Node node = new Node(value);\r\n        tail.next = node;\r\n        tail = node;\r\n\r\n        size+=1;\r\n    }\r\n    public void display(){\r\n        Node temp = head;\r\n        while(temp!=null){\r\n            System.out.print(temp.value + &quot; -&gt; &quot;);\r\n            temp = temp.next;\r\n        }\r\n        System.out.println(&quot;END&quot;);\r\n    }\r\n    public void insert(int value, int index){\r\n        if(index==0){\r\n            insertLast(value);\r\n            return;\r\n        }\r\n        if(index==size){\r\n            insertLast(value);\r\n            return;\r\n        }\r\n        Node temp = head;\r\n        for (int i = 1; i &lt; index; i++) {\r\n            temp = temp.next;\r\n        }\r\n        Node node = new Node(value, temp.next);\r\n        temp.next = node;\r\n\r\n        size+=1;\r\n    }\r\n    public int deleteLast(){\r\n        if (size&lt;=1){\r\n            return deleteFirst();\r\n        }\r\n        Node secondLast = get(size-2);\r\n        int val = tail.value;\r\n        tail = secondLast;\r\n        tail.next = null;\r\n        size-=1;\r\n        return val;\r\n    }\r\n\r\n    public Node get(int index){\r\n        Node node = head;\r\n        for (int i = 0; i &lt; index; i++) {\r\n            node = node.next;\r\n        }\r\n        return node;\r\n    }\r\n    public int deleteFirst(){\r\n        int num = head.value;\r\n        head = head.next;\r\n        if(head==null){\r\n            tail=null;\r\n        }\r\n        size-=1;\r\n        return num;\r\n    }\r\n\r\n    public class Node{\r\n        private int value;\r\n        private Node next;\r\n\r\n        public Node(int value) {\r\n            this.value = value;\r\n        }\r\n        public Node(int value, Node next){\r\n            this.value = value;\r\n            this.next = next;\r\n        }\r\n    }\r\n    public static void main(String[] args) {\r\n        LL linkedList = new LL();\r\n\r\n        linkedList.insertLast(1);\r\n        linkedList.insertLast(2);\r\n        linkedList.insertLast(3);\r\n\r\n        System.out.println(&quot;Original list:&quot;);\r\n        linkedList.display();\r\n\r\n        int deletedValue = linkedList.deleteLast();\r\n        System.out.println(&quot;Deleted value: &quot; + deletedValue);\r\n\r\n        System.out.println(&quot;List after deleting last element:&quot;);\r\n        linkedList.display();\r\n    }\r\n}\r\n\r\n```\r\n\r\nI&#39;m trying to learn how to implement LinkedLists but my deleteLast() function always returns the tail element but does not take up the value of secondLast which results in no deletion.\r\n\r\nI&#39;ve checked the code with AI, and it works properly when I remove the get() method and instead iterate through the list inside the deleteLast() method.\r\n````\r\npublic static void main(String[] args) {\r\n        LL linkedList = new LL();\r\n\r\n        linkedList.insertLast(1);\r\n        linkedList.insertLast(2);\r\n        linkedList.insertLast(3);\r\n\r\n        System.out.println(&quot;Original list:&quot;);\r\n        linkedList.display();\r\n\r\n        int deletedValue = linkedList.deleteLast();\r\n        System.out.println(&quot;Deleted value: &quot; + deletedValue);\r\n\r\n        System.out.println(&quot;List after deleting last element:&quot;);\r\n        linkedList.display();\r\n    }\r\nOUTPUT --------&gt;\r\n\r\nOriginal list:\r\n1 -&gt; 2 -&gt; 3 -&gt; END\r\nDeleted value: 3\r\nList after deleting last element:\r\n1 -&gt; 2 -&gt; 3 -&gt; END\r\n","title":"Java LinkedList implementation -- deleteLast method returns tail element to be deleted but does not delete it","body":"<pre class=\"lang-java prettyprint-override\"><code>public class LL {\n\n    public Node head;\n    public Node tail;\n    public int size;\n    public LL(){\n        this.size = 0;\n    }\n\n    public void insertFirst(int value){\n\n        Node node = new Node(value);\n        node.next = head;\n        head = node;\n\n        if(tail==null){\n            tail=head;\n            size+=1;\n        }\n\n        size+=1;\n    }\n    public void insertLast(int value){\n        if(tail==null) {\n            insertFirst(value);\n            return;\n        }\n        Node node = new Node(value);\n        tail.next = node;\n        tail = node;\n\n        size+=1;\n    }\n    public void display(){\n        Node temp = head;\n        while(temp!=null){\n            System.out.print(temp.value + &quot; -&gt; &quot;);\n            temp = temp.next;\n        }\n        System.out.println(&quot;END&quot;);\n    }\n    public void insert(int value, int index){\n        if(index==0){\n            insertLast(value);\n            return;\n        }\n        if(index==size){\n            insertLast(value);\n            return;\n        }\n        Node temp = head;\n        for (int i = 1; i &lt; index; i++) {\n            temp = temp.next;\n        }\n        Node node = new Node(value, temp.next);\n        temp.next = node;\n\n        size+=1;\n    }\n    public int deleteLast(){\n        if (size&lt;=1){\n            return deleteFirst();\n        }\n        Node secondLast = get(size-2);\n        int val = tail.value;\n        tail = secondLast;\n        tail.next = null;\n        size-=1;\n        return val;\n    }\n\n    public Node get(int index){\n        Node node = head;\n        for (int i = 0; i &lt; index; i++) {\n            node = node.next;\n        }\n        return node;\n    }\n    public int deleteFirst(){\n        int num = head.value;\n        head = head.next;\n        if(head==null){\n            tail=null;\n        }\n        size-=1;\n        return num;\n    }\n\n    public class Node{\n        private int value;\n        private Node next;\n\n        public Node(int value) {\n            this.value = value;\n        }\n        public Node(int value, Node next){\n            this.value = value;\n            this.next = next;\n        }\n    }\n    public static void main(String[] args) {\n        LL linkedList = new LL();\n\n        linkedList.insertLast(1);\n        linkedList.insertLast(2);\n        linkedList.insertLast(3);\n\n        System.out.println(&quot;Original list:&quot;);\n        linkedList.display();\n\n        int deletedValue = linkedList.deleteLast();\n        System.out.println(&quot;Deleted value: &quot; + deletedValue);\n\n        System.out.println(&quot;List after deleting last element:&quot;);\n        linkedList.display();\n    }\n}\n\n</code></pre>\n<p>I'm trying to learn how to implement LinkedLists but my deleteLast() function always returns the tail element but does not take up the value of secondLast which results in no deletion.</p>\n<p>I've checked the code with AI, and it works properly when I remove the get() method and instead iterate through the list inside the deleteLast() method.</p>\n<pre><code>public static void main(String[] args) {\n        LL linkedList = new LL();\n\n        linkedList.insertLast(1);\n        linkedList.insertLast(2);\n        linkedList.insertLast(3);\n\n        System.out.println(&quot;Original list:&quot;);\n        linkedList.display();\n\n        int deletedValue = linkedList.deleteLast();\n        System.out.println(&quot;Deleted value: &quot; + deletedValue);\n\n        System.out.println(&quot;List after deleting last element:&quot;);\n        linkedList.display();\n    }\nOUTPUT --------&gt;\n\nOriginal list:\n1 -&gt; 2 -&gt; 3 -&gt; END\nDeleted value: 3\nList after deleting last element:\n1 -&gt; 2 -&gt; 3 -&gt; END\n</code></pre>\n"},{"tags":["java","spring","spring-boot","annotations","spring-aop"],"answers":[{"tags":[],"owner":{"account_id":2712514,"reputation":10118,"user_id":2340612,"accept_rate":83,"display_name":"user2340612"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1691666686,"creation_date":1691666686,"answer_id":76875284,"question_id":76874424,"body_markdown":"The problem is that the aspect is managed by Spring and you&#39;re not using Spring in your test. You need to create a Spring Boot integration test for this to work.\r\n\r\nExample: imagine you have this service\r\n```java\r\n@Service\r\nclass MyService {\r\n    @TrackExecutionTime\r\n    public void doSomething() {\r\n        // just waste some time pretending to do something useful\r\n        for (int i = 0; i &lt; 100_000; i++) {\r\n            Math.sqrt(1000);\r\n        }\r\n        System.out.println(&quot;Hello, world&quot;);\r\n    }\r\n}\r\n```\r\n\r\nthen you need the following integration test (a bit of a pointless test to be honest, but it&#39;s just to show you how it works):\r\n```java\r\n@SpringBootTest\r\n@RunWith(SpringRunner.class)\r\npublic class IntegrationTest {\r\n\r\n    @Autowired\r\n    MyService myService;\r\n\r\n    @Test\r\n    public void testAspect() {\r\n        \r\n        myService.doSomething();\r\n    }\r\n}\r\n```\r\n\r\nthen you&#39;ll see that the aspect is used in your console:\r\n\r\n```text\r\nHello, world\r\ncom.example.MyService.doSomething &gt;&gt; Took : 31mills\r\n```","title":"AOP Isn&#39;t hitting the custom annotation","body":"<p>The problem is that the aspect is managed by Spring and you're not using Spring in your test. You need to create a Spring Boot integration test for this to work.</p>\n<p>Example: imagine you have this service</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Service\nclass MyService {\n    @TrackExecutionTime\n    public void doSomething() {\n        // just waste some time pretending to do something useful\n        for (int i = 0; i &lt; 100_000; i++) {\n            Math.sqrt(1000);\n        }\n        System.out.println(&quot;Hello, world&quot;);\n    }\n}\n</code></pre>\n<p>then you need the following integration test (a bit of a pointless test to be honest, but it's just to show you how it works):</p>\n<pre class=\"lang-java prettyprint-override\"><code>@SpringBootTest\n@RunWith(SpringRunner.class)\npublic class IntegrationTest {\n\n    @Autowired\n    MyService myService;\n\n    @Test\n    public void testAspect() {\n        \n        myService.doSomething();\n    }\n}\n</code></pre>\n<p>then you'll see that the aspect is used in your console:</p>\n<pre><code>Hello, world\ncom.example.MyService.doSomething &gt;&gt; Took : 31mills\n</code></pre>\n"}],"owner":{"account_id":3220851,"reputation":11,"user_id":2718359,"display_name":"Basuki Nath Kumar"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":27,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1691666686,"creation_date":1691659857,"question_id":76874424,"body_markdown":"I am basically trying to create an annotation that provides me the execution time of any method. While running the following code, I am not sure if it is hitting the method. Also, intelliJ suggests that &quot;advice advises no method&quot;.\r\n\r\n\r\nThis is what I want it to do - \r\n\r\n```\r\n\r\nimport lombok.extern.slf4j.Slf4j;\r\nimport org.aspectj.lang.ProceedingJoinPoint;\r\nimport org.aspectj.lang.annotation.Around;\r\nimport org.aspectj.lang.annotation.Aspect;\r\nimport org.springframework.boot.autoconfigure.condition.ConditionalOnExpression;\r\nimport org.springframework.stereotype.Component;\r\n\r\n@Aspect\r\n@Component\r\n@Slf4j\r\n@ConditionalOnExpression(&quot;${aspect.enabled:true}&quot;)\r\npublic class ExecutionTimeTracker {\r\n    @Around(value = &quot;@annotation(TrackExecutionTime)&quot;)\r\n    public Object executionTime(ProceedingJoinPoint point) throws Throwable {\r\n        long startTime = System.currentTimeMillis();\r\n        Object object = point.proceed();\r\n        long endtime = System.currentTimeMillis();\r\n        log.info(point.getSignature().getDeclaringTypeName() +\r\n                &quot;.&quot; + point.getSignature().getName() +\r\n                &quot; &gt;&gt; Took : &quot; + (endtime - startTime) + &quot;mills&quot;);\r\n        return object;\r\n    }\r\n\r\n}\r\n```\r\n\r\nThis is my @interface\r\n\r\n\r\n```\r\n\r\nimport java.lang.annotation.Retention;\r\nimport java.lang.annotation.Target;\r\n\r\nimport static java.lang.annotation.ElementType.METHOD;\r\nimport static java.lang.annotation.RetentionPolicy.RUNTIME;\r\n\r\n@Target({ METHOD })\r\n@Retention(RUNTIME)\r\npublic @interface TrackExecutionTime {\r\n}\r\n\r\n```\r\n\r\n\r\nThis is the UT to test this - \r\n\r\n```\r\nimport org.junit.jupiter.api.Test;\r\n\r\npublic class ExecutionTimeTrackerTest {\r\n\r\n    @Test\r\n    @TrackExecutionTime\r\n    public void someMethod(){\r\n        int[] randomNumbers = {582, 15, 596, 827, 779, 426, 153, 557, 394, 12};\r\n        Arrays.sort(randomNumbers);\r\n        int index = Arrays.binarySearch(randomNumbers, 827);\r\n        Assertions.assertEquals(9, index);\r\n\r\n    }\r\n}\r\n```\r\n\r\n\r\n\r\nI tried changing @Around(value = &quot;@annotation(TrackExecutionTime)&quot;) to different locations, tried executing with setting up different log levels too. Nothing seem to work.","title":"AOP Isn&#39;t hitting the custom annotation","body":"<p>I am basically trying to create an annotation that provides me the execution time of any method. While running the following code, I am not sure if it is hitting the method. Also, intelliJ suggests that &quot;advice advises no method&quot;.</p>\n<p>This is what I want it to do -</p>\n<pre><code>\nimport lombok.extern.slf4j.Slf4j;\nimport org.aspectj.lang.ProceedingJoinPoint;\nimport org.aspectj.lang.annotation.Around;\nimport org.aspectj.lang.annotation.Aspect;\nimport org.springframework.boot.autoconfigure.condition.ConditionalOnExpression;\nimport org.springframework.stereotype.Component;\n\n@Aspect\n@Component\n@Slf4j\n@ConditionalOnExpression(&quot;${aspect.enabled:true}&quot;)\npublic class ExecutionTimeTracker {\n    @Around(value = &quot;@annotation(TrackExecutionTime)&quot;)\n    public Object executionTime(ProceedingJoinPoint point) throws Throwable {\n        long startTime = System.currentTimeMillis();\n        Object object = point.proceed();\n        long endtime = System.currentTimeMillis();\n        log.info(point.getSignature().getDeclaringTypeName() +\n                &quot;.&quot; + point.getSignature().getName() +\n                &quot; &gt;&gt; Took : &quot; + (endtime - startTime) + &quot;mills&quot;);\n        return object;\n    }\n\n}\n</code></pre>\n<p>This is my @interface</p>\n<pre><code>\nimport java.lang.annotation.Retention;\nimport java.lang.annotation.Target;\n\nimport static java.lang.annotation.ElementType.METHOD;\nimport static java.lang.annotation.RetentionPolicy.RUNTIME;\n\n@Target({ METHOD })\n@Retention(RUNTIME)\npublic @interface TrackExecutionTime {\n}\n\n</code></pre>\n<p>This is the UT to test this -</p>\n<pre><code>import org.junit.jupiter.api.Test;\n\npublic class ExecutionTimeTrackerTest {\n\n    @Test\n    @TrackExecutionTime\n    public void someMethod(){\n        int[] randomNumbers = {582, 15, 596, 827, 779, 426, 153, 557, 394, 12};\n        Arrays.sort(randomNumbers);\n        int index = Arrays.binarySearch(randomNumbers, 827);\n        Assertions.assertEquals(9, index);\n\n    }\n}\n</code></pre>\n<p>I tried changing @Around(value = &quot;@annotation(TrackExecutionTime)&quot;) to different locations, tried executing with setting up different log levels too. Nothing seem to work.</p>\n"},{"tags":["java","security","ssl","https","websphere"],"answers":[{"tags":[],"owner":{"account_id":897020,"reputation":2337,"user_id":934040,"display_name":"Anton N"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1390588125,"creation_date":1390581085,"answer_id":21337676,"question_id":21336145,"body_markdown":"You should add all certificate chain in your configuration. Usually certificate has at least root certificate of Authorization Center or chain similar certificates.\r\n\r\nWAS requires signed certificate by default. ","title":"certificate not trusted by Websphere","body":"<p>You should add all certificate chain in your configuration. Usually certificate has at least root certificate of Authorization Center or chain similar certificates.</p>\n\n<p>WAS requires signed certificate by default. </p>\n"},{"tags":[],"owner":{"account_id":728143,"reputation":969,"user_id":986283,"display_name":"Robert H&#246;glund"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1390630622,"creation_date":1390630622,"answer_id":21347415,"question_id":21336145,"body_markdown":"The problem here is that the certificate path builder (A part of the Java Cert path API) cannot build the certificate chain during the SSL handshake. During the handshake the SSL peer host send its certificate (identity) to the client, for the client to trust that particular certificate a chain of trust must be built on the client side, that what is happening when you get the fault. The problem here is that the chain of trust cannot be created since you are missing either the signer certificate and/or the root certificate in your truststore (trust anchor). \r\n\r\nNote that the PKIX trustmanager performs a &quot;scope of trust&quot; validation which means that you do not need a complete certificate chain on the client side to fulfill the trust relationship with the SSL peer, you will only need the signer/intermediate certificates in your truststore. In fact, if you should put the leaf certificate in the truststore, that should also make things work, since that states that you have explicit trust of that particular certificate and a certificate chain validation is not needed.","title":"certificate not trusted by Websphere","body":"<p>The problem here is that the certificate path builder (A part of the Java Cert path API) cannot build the certificate chain during the SSL handshake. During the handshake the SSL peer host send its certificate (identity) to the client, for the client to trust that particular certificate a chain of trust must be built on the client side, that what is happening when you get the fault. The problem here is that the chain of trust cannot be created since you are missing either the signer certificate and/or the root certificate in your truststore (trust anchor). </p>\n\n<p>Note that the PKIX trustmanager performs a \"scope of trust\" validation which means that you do not need a complete certificate chain on the client side to fulfill the trust relationship with the SSL peer, you will only need the signer/intermediate certificates in your truststore. In fact, if you should put the leaf certificate in the truststore, that should also make things work, since that states that you have explicit trust of that particular certificate and a certificate chain validation is not needed.</p>\n"},{"tags":[],"owner":{"account_id":905262,"reputation":2192,"user_id":940299,"display_name":"trikelef"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1390813734,"creation_date":1390813734,"answer_id":21376783,"question_id":21336145,"body_markdown":"Maybe you should look at the following [technote][1].\r\n\r\nIf you are at a certain fix pack level you can set the value **com.ibm.websphere.ssl.retrieveLeafCert** to **true** and get the leaf certificate when *Retrieving from Port*.\r\n\r\n\r\n  [1]: http://www-01.ibm.com/support/docview.wss?uid=swg21651084","title":"certificate not trusted by Websphere","body":"<p>Maybe you should look at the following <a href=\"http://www-01.ibm.com/support/docview.wss?uid=swg21651084\" rel=\"nofollow\">technote</a>.</p>\n\n<p>If you are at a certain fix pack level you can set the value <strong>com.ibm.websphere.ssl.retrieveLeafCert</strong> to <strong>true</strong> and get the leaf certificate when <em>Retrieving from Port</em>.</p>\n"},{"tags":[],"owner":{"account_id":1310072,"reputation":1791,"user_id":1258237,"accept_rate":56,"display_name":"Nabil"},"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1691666511,"creation_date":1390835768,"answer_id":21384484,"question_id":21336145,"body_markdown":"I test a million websphere configuration. \r\n\r\nThe only procedure that work is the procedure described in this link: \r\n\r\nhttps://xebia.com/blog/mutual-ssl-authentication-using-websphere-application-server-and-cxf/\r\n\r\nBy defining the cxf intercpter : \r\n\r\n    &lt;cxf:bus&gt;\r\n     &lt;cxf:outInterceptors&gt;\r\n       &lt;bean class=&quot;---------------------.WebsphereSslOutInterceptor&quot; /&gt;\r\n    &lt;/cxf:outInterceptors&gt;\r\n    &lt;/cxf:bus&gt;\r\n\r\n\r\nFor more details , please see: \r\n\r\nhttps://github.com/vlussenburg/websphere-cxf-extensions#websphere-cxf-extensions","title":"certificate not trusted by Websphere","body":"<p>I test a million websphere configuration.</p>\n<p>The only procedure that work is the procedure described in this link:</p>\n<p><a href=\"https://xebia.com/blog/mutual-ssl-authentication-using-websphere-application-server-and-cxf/\" rel=\"nofollow noreferrer\">https://xebia.com/blog/mutual-ssl-authentication-using-websphere-application-server-and-cxf/</a></p>\n<p>By defining the cxf intercpter :</p>\n<pre><code>&lt;cxf:bus&gt;\n &lt;cxf:outInterceptors&gt;\n   &lt;bean class=&quot;---------------------.WebsphereSslOutInterceptor&quot; /&gt;\n&lt;/cxf:outInterceptors&gt;\n&lt;/cxf:bus&gt;\n</code></pre>\n<p>For more details , please see:</p>\n<p><a href=\"https://github.com/vlussenburg/websphere-cxf-extensions#websphere-cxf-extensions\" rel=\"nofollow noreferrer\">https://github.com/vlussenburg/websphere-cxf-extensions#websphere-cxf-extensions</a></p>\n"},{"tags":[],"owner":{"account_id":4224882,"reputation":121,"user_id":3458628,"display_name":"user3458628"},"down_vote_count":0,"up_vote_count":12,"is_accepted":false,"score":12,"last_activity_date":1395735221,"creation_date":1395734896,"answer_id":22628643,"question_id":21336145,"body_markdown":"Thanks for all the above response. Able to resolve the issue java.security.cert.CertPathValidatorException: Certificate chaining error with following configuration.\n\n 1. Found that the following javax properties returned null value in the WebSphere.\n    - javax.net.ssl.trustStore, \n    - javax.net.ssl.trustStorePassword \n    - javax.net.ssl.trustStoreType\n\nFor more details, please see this link,\n\nhttps://stackoverflow.com/questions/2138574/java-path-to-truststore-set-property-doesnt-work\n\n 2. Configured the properties as below in the WebSphere\n\n    Select Servers &gt; Application Servers &gt; server_name &gt; Process Definition &gt; Java Virtual Machine &gt; Custom Properties &gt; New.\n\na) javax.net.ssl.trustStore = jre_install_dir\\lib\\security\\cacerts\n\nExample: C:\\Program Files\\WebSphere\\AppServer\\java\\jre\\lib\\security\\cacerts\n\nb) javax.net.ssl.trustStorePassword = changeit (default)\n\nc) javax.net.ssl.trustStoreType = jks\n\nFor more details, please see this link,\n\nhttp://publib.boulder.ibm.com/infocenter/tivihelp/v2r1/index.jsp?topic=%2Fcom.ibm.isim.doc_6.0%2Finstalling%2Ftsk%2Ftsk_ic_ins_first_security_truststore.htm\n\nAfter the configuration was able to see in the logs that certificates being added to the trust store.\n\nThanks,\nUday Nilajkar\n","title":"certificate not trusted by Websphere","body":"<p>Thanks for all the above response. Able to resolve the issue java.security.cert.CertPathValidatorException: Certificate chaining error with following configuration.</p>\n<ol>\n<li>Found that the following javax properties returned null value in the WebSphere.\n<ul>\n<li>javax.net.ssl.trustStore,</li>\n<li>javax.net.ssl.trustStorePassword</li>\n<li>javax.net.ssl.trustStoreType</li>\n</ul>\n</li>\n</ol>\n<p>For more details, please see this link,</p>\n<p><a href=\"https://stackoverflow.com/questions/2138574/java-path-to-truststore-set-property-doesnt-work\">java - path to trustStore - set property doesn&#39;t work?</a></p>\n<ol start=\"2\">\n<li><p>Configured the properties as below in the WebSphere</p>\n<p>Select Servers &gt; Application Servers &gt; server_name &gt; Process Definition &gt; Java Virtual Machine &gt; Custom Properties &gt; New.</p>\n</li>\n</ol>\n<p>a) javax.net.ssl.trustStore = jre_install_dir\\lib\\security\\cacerts</p>\n<p>Example: C:\\Program Files\\WebSphere\\AppServer\\java\\jre\\lib\\security\\cacerts</p>\n<p>b) javax.net.ssl.trustStorePassword = changeit (default)</p>\n<p>c) javax.net.ssl.trustStoreType = jks</p>\n<p>For more details, please see this link,</p>\n<p><a href=\"http://publib.boulder.ibm.com/infocenter/tivihelp/v2r1/index.jsp?topic=%2Fcom.ibm.isim.doc_6.0%2Finstalling%2Ftsk%2Ftsk_ic_ins_first_security_truststore.htm\" rel=\"noreferrer\">http://publib.boulder.ibm.com/infocenter/tivihelp/v2r1/index.jsp?topic=%2Fcom.ibm.isim.doc_6.0%2Finstalling%2Ftsk%2Ftsk_ic_ins_first_security_truststore.htm</a></p>\n<p>After the configuration was able to see in the logs that certificates being added to the trust store.</p>\n<p>Thanks,\nUday Nilajkar</p>\n"},{"tags":[],"owner":{"account_id":2038913,"reputation":4421,"user_id":1820583,"accept_rate":84,"display_name":"Eduardo Briguenti Vieira"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1422481817,"creation_date":1422481817,"answer_id":28203075,"question_id":21336145,"body_markdown":"Here are the steps to import a certificate to the **JVM** for a **HTTPS WS call:**\r\n\r\n**A) Obtain the Certificate to be Imported**\r\n\r\n 1. Each browser displays certificates in different ways, but they are usually quite similar. On the browser&#39;s URL bar, there is usually a zone that you can click on to display SSL certificate information. For example, you may see a padlock in the status bar, and clicking on the padlock opens the certificate information. Once the certificate information is open, click on the &quot;Certification Path&quot; information. There normally will be a way to export each of the signing certificates (trusted roots). Export the certifiers in the **&quot;Base-64 encoded X.509 (.CER)&quot;** format. The exported file in this format will be an ASCII text file that has &quot;BEGIN CERTIFICATE&quot; and &quot;END CERTIFICATE&quot; lines at the top and bottom. Once you have exported the certificates that signed the remote server&#39;s SSL certificate you can then import them into the JVM.\r\n\r\n**B) Import the certificate**\r\n\r\n 1. Start the ikeyman utility. The utility (ikeyman.bat or ikeyman.sh) is in the WAS_HOME\\bin.\r\n 2. From the Key Database File menu, select Open.\r\n 3. In the key database type, select JKS.\r\n 4. In the File Name field, type cacerts.\r\n 5. In the Location field, type WAS_HOME\\java\\jre\\lib\\security\\.\r\n 6. In the Password Prompt window, type the password for the keystore in the Password and Confirm Password window. The default password is changeit.\r\nClick OK.\r\n 7. Add the certificate you created for the LDAP server into this certificate store.\r\n 8. In the main window, in the Key database content area, select Signer Certificates from the list.\r\nClick Add.\r\n 9. In the Certificate file name field, browse and locate the server certificate file that was created for the LDAP server, which is in Binary Der data. Verify that the appropriate directory is displayed in the Location field.\r\nClick OK.\r\n 10. In the prompt, type a label for this certificate. For example, type LDAPCA.\r\nClick OK.","title":"certificate not trusted by Websphere","body":"<p>Here are the steps to import a certificate to the <strong>JVM</strong> for a <strong>HTTPS WS call:</strong></p>\n\n<p><strong>A) Obtain the Certificate to be Imported</strong></p>\n\n<ol>\n<li>Each browser displays certificates in different ways, but they are usually quite similar. On the browser's URL bar, there is usually a zone that you can click on to display SSL certificate information. For example, you may see a padlock in the status bar, and clicking on the padlock opens the certificate information. Once the certificate information is open, click on the \"Certification Path\" information. There normally will be a way to export each of the signing certificates (trusted roots). Export the certifiers in the <strong>\"Base-64 encoded X.509 (.CER)\"</strong> format. The exported file in this format will be an ASCII text file that has \"BEGIN CERTIFICATE\" and \"END CERTIFICATE\" lines at the top and bottom. Once you have exported the certificates that signed the remote server's SSL certificate you can then import them into the JVM.</li>\n</ol>\n\n<p><strong>B) Import the certificate</strong></p>\n\n<ol>\n<li>Start the ikeyman utility. The utility (ikeyman.bat or ikeyman.sh) is in the WAS_HOME\\bin.</li>\n<li>From the Key Database File menu, select Open.</li>\n<li>In the key database type, select JKS.</li>\n<li>In the File Name field, type cacerts.</li>\n<li>In the Location field, type WAS_HOME\\java\\jre\\lib\\security.</li>\n<li>In the Password Prompt window, type the password for the keystore in the Password and Confirm Password window. The default password is changeit.\nClick OK.</li>\n<li>Add the certificate you created for the LDAP server into this certificate store.</li>\n<li>In the main window, in the Key database content area, select Signer Certificates from the list.\nClick Add.</li>\n<li>In the Certificate file name field, browse and locate the server certificate file that was created for the LDAP server, which is in Binary Der data. Verify that the appropriate directory is displayed in the Location field.\nClick OK.</li>\n<li>In the prompt, type a label for this certificate. For example, type LDAPCA.\nClick OK.</li>\n</ol>\n"}],"owner":{"account_id":1310072,"reputation":1791,"user_id":1258237,"accept_rate":56,"display_name":"Nabil"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":95684,"favorite_count":0,"down_vote_count":0,"up_vote_count":8,"accepted_answer_id":21384484,"answer_count":6,"score":8,"last_activity_date":1691666511,"creation_date":1390576616,"question_id":21336145,"body_markdown":"I have a web application that call a SOAP Web service secured via SSL .`(https://zzzzzzzzzzzz/xxxxx`). \r\n\r\nThe server send two certificates (Root and Leaf) so i import the two certificate using the property : `com.ibm.websphere.ssl.retrieveLeafCert` .\r\n\r\nTo enable ssl validation on websphere i just add the certificates Into websphere : \r\n\r\nSSL certificate and key management -&gt; key stores and certificate -&gt; NodeDefaultTrustStore -&gt; Signer cerificates -&gt; Retrieve from port : \r\n\r\n - host  : hostname  \r\n - port  : 443\r\n - alias : alias\r\n\r\nThe problem is that webshphere not trust the certificate and give me this stacktrace, \r\n\r\n    used by: javax.net.ssl.SSLHandshakeException: SSLHandshakeException invoking `https://------------------------------` : com.ibm.jsse2.util.j: PKIX path building failed: java.security.cert.CertPathBuilderException: PKIXCertPathBuilderImpl could not build a valid CertPath.; internal cause is: \r\n    \tjava.security.cert.CertPathValidatorException: T`he certificate issued by CN=-------------------------------------------------------------------- is not trusted`; internal cause is: \r\n    \tjava.security.cert.CertPathValidatorException: Certificate chaining error\r\n    \tat sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method) ~[na:1.6.0]\r\n    \tat sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:56) ~[na:1.6.0]\r\n    \tat sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:39) ~[na:1.6.0]\r\n    \tat java.lang.reflect.Constructor.newInstance(Constructor.java:527) ~[na:1.6.0]\r\n    \tat org.apache.cxf.transport.http.HTTPConduit$WrappedOutputStream.mapException(HTTPConduit.java:1338) ~[cxf-rt-transports-http-2.7.4.jar:2.7.4]\r\n    \tat org.apache.cxf.transport.http.HTTPConduit$WrappedOutputStream.close(HTTPConduit.java:1322) ~[cxf-rt-transports-http-2.7.4.jar:2.7.4]\r\n    \tat org.apache.cxf.transport.AbstractConduit.close(AbstractConduit.java:56) ~[cxf-api-2.7.4.jar:2.7.4]\r\n    \tat org.apache.cxf.transport.http.HTTPConduit.close(HTTPConduit.java:622) ~[cxf-rt-transports-http-2.7.4.jar:2.7.4]\r\n    \tat org.apache.cxf.interceptor.MessageSenderInterceptor$MessageSenderEndingInterceptor.handleMessage(MessageSenderInterceptor.java:62) ~[cxf-api-2.7.4.jar:2.7.4]\r\n    \tat org.apache.cxf.phase.PhaseInterceptorChain.doIntercept(PhaseInterceptorChain.java:271) ~[cxf-api-2.7.4.jar:2.7.4]\r\n    \tat org.apache.cxf.endpoint.ClientImpl.doInvoke(ClientImpl.java:530) ~[cxf-api-2.7.4.jar:2.7.4]\r\n    \tat org.apache.cxf.endpoint.ClientImpl.invoke(ClientImpl.java:463) ~[cxf-api-2.7.4.jar:2.7.4]\r\n    \tat org.apache.cxf.endpoint.ClientImpl.invoke(ClientImpl.java:366) ~[cxf-api-2.7.4.jar:2.7.4]\r\n    \tat org.apache.cxf.endpoint.ClientImpl.invoke(ClientImpl.java:319) ~[cxf-api-2.7.4.jar:2.7.4]\r\n    \tat org.apache.cxf.endpoint.ClientImpl.invokeWrapped(ClientImpl.java:354) ~[cxf-api-2.7.4.jar:2.7.4]\r\n    \tat org.apache.cxf.jaxws.DispatchImpl.invoke(DispatchImpl.java:385) ~[cxf-rt-frontend-jaxws-2.7.4.jar:2.7.4]\r\n    \t... 100 common frames omitted\r\n    `Caused by: javax.net.ssl.SSLHandshakeException`: com.ibm.jsse2.util.j: PKIX path building failed: java.security.cert.CertPathBuilderException: PKIXCertPathBuilderImpl could not build a valid CertPath.; internal cause is: \r\n    \tjava.security.cert.CertPathValidatorException: `The certificate issued by CN=--------------------------------------------------------- is not trusted`; internal cause is: \r\n    \tjava.security.cert.CertPathValidatorException: Certificate chaining error\r\n    \tat com.ibm.jsse2.o.a(o.java:8) ~[na:6.0 build_20130515]\r\n    \tat com.ibm.jsse2.SSLSocketImpl.a(SSLSocketImpl.java:549) ~[na:6.0 build_20130515]\r\n    \tat com.ibm.jsse2.kb.a(kb.java:355) ~[na:6.0 build_20130515]\r\n    \tat com.ibm.jsse2.kb.a(kb.java:130) ~[na:6.0 build_20130515]\r\n    \tat com.ibm.jsse2.lb.a(lb.java:135) ~[na:6.0 build_20130515]\r\n    \tat com.ibm.jsse2.lb.a(lb.java:368) ~[na:6.0 build_20130515]\r\n    \tat com.ibm.jsse2.kb.s(kb.java:442) ~[na:6.0 build_20130515]\r\n    \tat com.ibm.jsse2.kb.a(kb.java:136) ~[na:6.0 build_20130515]\r\n    \tat com.ibm.jsse2.SSLSocketImpl.a(SSLSocketImpl.java:495) ~[na:6.0 build_20130515]\r\n    \tat com.ibm.jsse2.SSLSocketImpl.h(SSLSocketImpl.java:223) ~[na:6.0 build_20130515]\r\n    \tat com.ibm.jsse2.SSLSocketImpl.a(SSLSocketImpl.java:724) ~[na:6.0 build_20130515]\r\n    \tat com.ibm.jsse2.SSLSocketImpl.startHandshake(SSLSocketImpl.java:81) ~[na:6.0 build_20130515]\r\n    \tat com.ibm.net.ssl.www2.protocol.https.c.afterConnect(c.java:8) ~[na:6.0 build_20130515]\r\n    \tat com.ibm.net.ssl.www2.protocol.https.d.connect(d.java:20) ~[na:6.0 build_20130515]\r\n    \tat sun.net.www.protocol.http.HttpURLConnection.getOutputStream(HttpURLConnection.java:1043) ~[na:1.6.0]\r\n    \tat com.ibm.net.ssl.www2.protocol.https.b.getOutputStream(b.java:85) ~[na:6.0 build_20130515]\r\n    \tat org.apache.cxf.transport.http.URLConnectionHTTPConduit$URLConnectionWrappedOutputStream.setupWrappedStream(URLConnectionHTTPConduit.java:168) ~[cxf-rt-transports-http-2.7.4.jar:2.7.4]\r\n    \tat org.apache.cxf.transport.http.HTTPConduit$WrappedOutputStream.handleHeadersTrustCaching(HTTPConduit.java:1282) ~[cxf-rt-transports-http-2.7.4.jar:2.7.4]\r\n    \tat org.apache.cxf.transport.http.HTTPConduit$WrappedOutputStream.onFirstWrite(HTTPConduit.java:1233) ~[cxf-rt-transports-http-2.7.4.jar:2.7.4]\r\n    \tat org.apache.cxf.transport.http.URLConnectionHTTPConduit$URLConnectionWrappedOutputStream.onFirstWrite(URLConnectionHTTPConduit.java:195) ~[cxf-rt-transports-http-2.7.4.jar:2.7.4]\r\n    \tat org.apache.cxf.io.AbstractWrappedOutputStream.write(AbstractWrappedOutputStream.java:47) ~[cxf-api-2.7.4.jar:2.7.4]\r\n    \tat org.apache.cxf.io.AbstractThresholdOutputStream.write(AbstractThresholdOutputStream.java:69) ~[cxf-api-2.7.4.jar:2.7.4]\r\n    \tat org.apache.cxf.transport.http.HTTPConduit$WrappedOutputStream.close(HTTPConduit.java:1295) ~[cxf-rt-transports-http-2.7.4.jar:2.7.4]\r\n    \t... 110 common frames omitted\r\n    `Caused by: com.ibm.jsse2.util.j: PKIX path building failed:` java.security.cert.CertPathBuilderException: PKIXCertPathBuilderImpl could not build a valid CertPath.; internal cause is: \r\n    \tjava.security.cert.CertPathValidatorException: T`he certificate issued by CN=--------------------------------------------  is not trusted`; internal cause is: \r\n    \tjava.security.cert.CertPathValidatorException: Certificate chaining error\r\n    \tat com.ibm.jsse2.util.h.b(h.java:39) ~[na:6.0 build_20130515]\r\n    \tat com.ibm.jsse2.util.h.b(h.java:21) ~[na:6.0 build_20130515]\r\n    \tat com.ibm.jsse2.util.g.a(g.java:1) ~[na:6.0 build_20130515]\r\n    \tat com.ibm.jsse2.pc.a(pc.java:36) ~[na:6.0 build_20130515]\r\n    \tat com.ibm.jsse2.pc.checkServerTrusted(pc.java:19) ~[na:6.0 build_20130515]\r\n    \tat com.ibm.jsse2.pc.b(pc.java:51) ~[na:6.0 build_20130515]\r\n    \tat com.ibm.jsse2.lb.a(lb.java:65) ~[na:6.0 build_20130515]\r\n    \t... 128 common frames omitted\r\n    Caused by: java.security.cert.CertPathBuilderException: PKIXCertPathBuilderImpl could not build a valid CertPath.\r\n    \tat com.ibm.security.cert.PKIXCertPathBuilderImpl.engineBuild(PKIXCertPathBuilderImpl.java:411) ~[na:na]\r\n    \tat java.security.cert.CertPathBuilder.build(CertPathBuilder.java:258) ~[na:na]\r\n    \tat com.ibm.jsse2.util.h.b(h.java:107) ~[na:6.0 build_20130515]\r\n    \t... 134 common frames omitted\r\n    Caused by: java.security.cert.CertPathValidatorException: The certificate issued by CN=-------------------------------------------------------\r\n    \tat com.ibm.security.cert.BasicChecker.&lt;init&gt;(BasicChecker.java:111) ~[na:na]\r\n    \tat com.ibm.security.cert.PKIXCertPathValidatorImpl.engineValidate(PKIXCertPathValidatorImpl.java:178) ~[na:na]\r\n    \tat com.ibm.security.cert.PKIXCertPathBuilderImpl.myValidator(PKIXCertPathBuilderImpl.java:737) ~[na:na]\r\n    \tat com.ibm.security.cert.PKIXCertPathBuilderImpl.buildCertPath(PKIXCertPathBuilderImpl.java:649) ~[na:na]\r\n    \tat com.ibm.security.cert.PKIXCertPathBuilderImpl.buildCertPath(PKIXCertPathBuilderImpl.java:595) ~[na:na]\r\n    \tat com.ibm.security.cert.PKIXCertPathBuilderImpl.engineBuild(PKIXCertPathBuilderImpl.java:357) ~[na:na]\r\n    \t... 136 common frames omitted\r\n    Caused by: java.security.cert.CertPathValidatorException: Certificate chaining error\r\n    \tat com.ibm.security.cert.CertPathUtil.findIssuer(CertPathUtil.java:298) ~[na:na]\r\n    \tat com.ibm.security.cert.BasicChecker.&lt;init&gt;(BasicChecker.java:108) ~[na:na]\r\n    \t... 141 common frames omitted\r\n\r\nThe same code is tested in my local environement with the simple use of [Installcert.java][1] and running my tests with -Djavax.net.ssl.trustStore=jssecacerts (jssecacerts is the file generated by InstallCert.java). \r\n\r\n\r\n  [1]: https://code.google.com/p/java-use-examples/source/browse/trunk/src/com/aw/ad/util/InstallCert.java","title":"certificate not trusted by Websphere","body":"<p>I have a web application that call a SOAP Web service secured via SSL .<code>(https://zzzzzzzzzzzz/xxxxx</code>). </p>\n\n<p>The server send two certificates (Root and Leaf) so i import the two certificate using the property : <code>com.ibm.websphere.ssl.retrieveLeafCert</code> .</p>\n\n<p>To enable ssl validation on websphere i just add the certificates Into websphere : </p>\n\n<p>SSL certificate and key management -> key stores and certificate -> NodeDefaultTrustStore -> Signer cerificates -> Retrieve from port : </p>\n\n<ul>\n<li>host  : hostname  </li>\n<li>port  : 443</li>\n<li>alias : alias</li>\n</ul>\n\n<p>The problem is that webshphere not trust the certificate and give me this stacktrace, </p>\n\n<pre><code>used by: javax.net.ssl.SSLHandshakeException: SSLHandshakeException invoking `https://------------------------------` : com.ibm.jsse2.util.j: PKIX path building failed: java.security.cert.CertPathBuilderException: PKIXCertPathBuilderImpl could not build a valid CertPath.; internal cause is: \n    java.security.cert.CertPathValidatorException: T`he certificate issued by CN=-------------------------------------------------------------------- is not trusted`; internal cause is: \n    java.security.cert.CertPathValidatorException: Certificate chaining error\n    at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method) ~[na:1.6.0]\n    at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:56) ~[na:1.6.0]\n    at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:39) ~[na:1.6.0]\n    at java.lang.reflect.Constructor.newInstance(Constructor.java:527) ~[na:1.6.0]\n    at org.apache.cxf.transport.http.HTTPConduit$WrappedOutputStream.mapException(HTTPConduit.java:1338) ~[cxf-rt-transports-http-2.7.4.jar:2.7.4]\n    at org.apache.cxf.transport.http.HTTPConduit$WrappedOutputStream.close(HTTPConduit.java:1322) ~[cxf-rt-transports-http-2.7.4.jar:2.7.4]\n    at org.apache.cxf.transport.AbstractConduit.close(AbstractConduit.java:56) ~[cxf-api-2.7.4.jar:2.7.4]\n    at org.apache.cxf.transport.http.HTTPConduit.close(HTTPConduit.java:622) ~[cxf-rt-transports-http-2.7.4.jar:2.7.4]\n    at org.apache.cxf.interceptor.MessageSenderInterceptor$MessageSenderEndingInterceptor.handleMessage(MessageSenderInterceptor.java:62) ~[cxf-api-2.7.4.jar:2.7.4]\n    at org.apache.cxf.phase.PhaseInterceptorChain.doIntercept(PhaseInterceptorChain.java:271) ~[cxf-api-2.7.4.jar:2.7.4]\n    at org.apache.cxf.endpoint.ClientImpl.doInvoke(ClientImpl.java:530) ~[cxf-api-2.7.4.jar:2.7.4]\n    at org.apache.cxf.endpoint.ClientImpl.invoke(ClientImpl.java:463) ~[cxf-api-2.7.4.jar:2.7.4]\n    at org.apache.cxf.endpoint.ClientImpl.invoke(ClientImpl.java:366) ~[cxf-api-2.7.4.jar:2.7.4]\n    at org.apache.cxf.endpoint.ClientImpl.invoke(ClientImpl.java:319) ~[cxf-api-2.7.4.jar:2.7.4]\n    at org.apache.cxf.endpoint.ClientImpl.invokeWrapped(ClientImpl.java:354) ~[cxf-api-2.7.4.jar:2.7.4]\n    at org.apache.cxf.jaxws.DispatchImpl.invoke(DispatchImpl.java:385) ~[cxf-rt-frontend-jaxws-2.7.4.jar:2.7.4]\n    ... 100 common frames omitted\n`Caused by: javax.net.ssl.SSLHandshakeException`: com.ibm.jsse2.util.j: PKIX path building failed: java.security.cert.CertPathBuilderException: PKIXCertPathBuilderImpl could not build a valid CertPath.; internal cause is: \n    java.security.cert.CertPathValidatorException: `The certificate issued by CN=--------------------------------------------------------- is not trusted`; internal cause is: \n    java.security.cert.CertPathValidatorException: Certificate chaining error\n    at com.ibm.jsse2.o.a(o.java:8) ~[na:6.0 build_20130515]\n    at com.ibm.jsse2.SSLSocketImpl.a(SSLSocketImpl.java:549) ~[na:6.0 build_20130515]\n    at com.ibm.jsse2.kb.a(kb.java:355) ~[na:6.0 build_20130515]\n    at com.ibm.jsse2.kb.a(kb.java:130) ~[na:6.0 build_20130515]\n    at com.ibm.jsse2.lb.a(lb.java:135) ~[na:6.0 build_20130515]\n    at com.ibm.jsse2.lb.a(lb.java:368) ~[na:6.0 build_20130515]\n    at com.ibm.jsse2.kb.s(kb.java:442) ~[na:6.0 build_20130515]\n    at com.ibm.jsse2.kb.a(kb.java:136) ~[na:6.0 build_20130515]\n    at com.ibm.jsse2.SSLSocketImpl.a(SSLSocketImpl.java:495) ~[na:6.0 build_20130515]\n    at com.ibm.jsse2.SSLSocketImpl.h(SSLSocketImpl.java:223) ~[na:6.0 build_20130515]\n    at com.ibm.jsse2.SSLSocketImpl.a(SSLSocketImpl.java:724) ~[na:6.0 build_20130515]\n    at com.ibm.jsse2.SSLSocketImpl.startHandshake(SSLSocketImpl.java:81) ~[na:6.0 build_20130515]\n    at com.ibm.net.ssl.www2.protocol.https.c.afterConnect(c.java:8) ~[na:6.0 build_20130515]\n    at com.ibm.net.ssl.www2.protocol.https.d.connect(d.java:20) ~[na:6.0 build_20130515]\n    at sun.net.www.protocol.http.HttpURLConnection.getOutputStream(HttpURLConnection.java:1043) ~[na:1.6.0]\n    at com.ibm.net.ssl.www2.protocol.https.b.getOutputStream(b.java:85) ~[na:6.0 build_20130515]\n    at org.apache.cxf.transport.http.URLConnectionHTTPConduit$URLConnectionWrappedOutputStream.setupWrappedStream(URLConnectionHTTPConduit.java:168) ~[cxf-rt-transports-http-2.7.4.jar:2.7.4]\n    at org.apache.cxf.transport.http.HTTPConduit$WrappedOutputStream.handleHeadersTrustCaching(HTTPConduit.java:1282) ~[cxf-rt-transports-http-2.7.4.jar:2.7.4]\n    at org.apache.cxf.transport.http.HTTPConduit$WrappedOutputStream.onFirstWrite(HTTPConduit.java:1233) ~[cxf-rt-transports-http-2.7.4.jar:2.7.4]\n    at org.apache.cxf.transport.http.URLConnectionHTTPConduit$URLConnectionWrappedOutputStream.onFirstWrite(URLConnectionHTTPConduit.java:195) ~[cxf-rt-transports-http-2.7.4.jar:2.7.4]\n    at org.apache.cxf.io.AbstractWrappedOutputStream.write(AbstractWrappedOutputStream.java:47) ~[cxf-api-2.7.4.jar:2.7.4]\n    at org.apache.cxf.io.AbstractThresholdOutputStream.write(AbstractThresholdOutputStream.java:69) ~[cxf-api-2.7.4.jar:2.7.4]\n    at org.apache.cxf.transport.http.HTTPConduit$WrappedOutputStream.close(HTTPConduit.java:1295) ~[cxf-rt-transports-http-2.7.4.jar:2.7.4]\n    ... 110 common frames omitted\n`Caused by: com.ibm.jsse2.util.j: PKIX path building failed:` java.security.cert.CertPathBuilderException: PKIXCertPathBuilderImpl could not build a valid CertPath.; internal cause is: \n    java.security.cert.CertPathValidatorException: T`he certificate issued by CN=--------------------------------------------  is not trusted`; internal cause is: \n    java.security.cert.CertPathValidatorException: Certificate chaining error\n    at com.ibm.jsse2.util.h.b(h.java:39) ~[na:6.0 build_20130515]\n    at com.ibm.jsse2.util.h.b(h.java:21) ~[na:6.0 build_20130515]\n    at com.ibm.jsse2.util.g.a(g.java:1) ~[na:6.0 build_20130515]\n    at com.ibm.jsse2.pc.a(pc.java:36) ~[na:6.0 build_20130515]\n    at com.ibm.jsse2.pc.checkServerTrusted(pc.java:19) ~[na:6.0 build_20130515]\n    at com.ibm.jsse2.pc.b(pc.java:51) ~[na:6.0 build_20130515]\n    at com.ibm.jsse2.lb.a(lb.java:65) ~[na:6.0 build_20130515]\n    ... 128 common frames omitted\nCaused by: java.security.cert.CertPathBuilderException: PKIXCertPathBuilderImpl could not build a valid CertPath.\n    at com.ibm.security.cert.PKIXCertPathBuilderImpl.engineBuild(PKIXCertPathBuilderImpl.java:411) ~[na:na]\n    at java.security.cert.CertPathBuilder.build(CertPathBuilder.java:258) ~[na:na]\n    at com.ibm.jsse2.util.h.b(h.java:107) ~[na:6.0 build_20130515]\n    ... 134 common frames omitted\nCaused by: java.security.cert.CertPathValidatorException: The certificate issued by CN=-------------------------------------------------------\n    at com.ibm.security.cert.BasicChecker.&lt;init&gt;(BasicChecker.java:111) ~[na:na]\n    at com.ibm.security.cert.PKIXCertPathValidatorImpl.engineValidate(PKIXCertPathValidatorImpl.java:178) ~[na:na]\n    at com.ibm.security.cert.PKIXCertPathBuilderImpl.myValidator(PKIXCertPathBuilderImpl.java:737) ~[na:na]\n    at com.ibm.security.cert.PKIXCertPathBuilderImpl.buildCertPath(PKIXCertPathBuilderImpl.java:649) ~[na:na]\n    at com.ibm.security.cert.PKIXCertPathBuilderImpl.buildCertPath(PKIXCertPathBuilderImpl.java:595) ~[na:na]\n    at com.ibm.security.cert.PKIXCertPathBuilderImpl.engineBuild(PKIXCertPathBuilderImpl.java:357) ~[na:na]\n    ... 136 common frames omitted\nCaused by: java.security.cert.CertPathValidatorException: Certificate chaining error\n    at com.ibm.security.cert.CertPathUtil.findIssuer(CertPathUtil.java:298) ~[na:na]\n    at com.ibm.security.cert.BasicChecker.&lt;init&gt;(BasicChecker.java:108) ~[na:na]\n    ... 141 common frames omitted\n</code></pre>\n\n<p>The same code is tested in my local environement with the simple use of <a href=\"https://code.google.com/p/java-use-examples/source/browse/trunk/src/com/aw/ad/util/InstallCert.java\">Installcert.java</a> and running my tests with -Djavax.net.ssl.trustStore=jssecacerts (jssecacerts is the file generated by InstallCert.java). </p>\n"},{"tags":["java","rest","jaxb","cxf","jax-rs"],"comments":[{"owner":{"account_id":281082,"reputation":11615,"user_id":577181,"accept_rate":20,"display_name":"John Ament"},"score":0,"creation_date":1422148541,"post_id":28131597,"comment_id":44636922,"body_markdown":"What JSON provider are you using?","body":"What JSON provider are you using?"},{"owner":{"account_id":5247570,"reputation":46,"user_id":4192749,"display_name":"Gimantha Bandara"},"score":0,"creation_date":1422167504,"post_id":28131597,"comment_id":44640200,"body_markdown":"Hi Jhon, I am using com.fasterxml.jackson.jaxrs.json.JacksonJaxbJsonProvider.","body":"Hi Jhon, I am using com.fasterxml.jackson.jaxrs.json.JacksonJaxbJsonProvider."},{"owner":{"account_id":281082,"reputation":11615,"user_id":577181,"accept_rate":20,"display_name":"John Ament"},"score":0,"creation_date":1422204503,"post_id":28131597,"comment_id":44649157,"body_markdown":"Ok, since you&#39;re using JAX-B annotations, you&#39;ll need to use an `XmlAdapter`.  then use http://cxf.apache.org/docs/jaxb.html to configure JAX-B","body":"Ok, since you&#39;re using JAX-B annotations, you&#39;ll need to use an <code>XmlAdapter</code>.  then use <a href=\"http://cxf.apache.org/docs/jaxb.html\" rel=\"nofollow noreferrer\">cxf.apache.org/docs/jaxb.html</a> to configure JAX-B"},{"owner":{"account_id":5247570,"reputation":46,"user_id":4192749,"display_name":"Gimantha Bandara"},"score":1,"creation_date":1422274101,"post_id":28131597,"comment_id":44670822,"body_markdown":"@Jhon, I managed to fixed the problem, JAX-B binding always preserve the order of elements. The problem was in somewhere else where the inserted data is retrieved. When loading the values from the persistent storage, the values are loaded into a hashmap. So the order is changed.","body":"@Jhon, I managed to fixed the problem, JAX-B binding always preserve the order of elements. The problem was in somewhere else where the inserted data is retrieved. When loading the values from the persistent storage, the values are loaded into a hashmap. So the order is changed."},{"owner":{"account_id":22466,"reputation":11039,"user_id":55452,"accept_rate":100,"display_name":"David J. Liszewski"},"score":0,"creation_date":1422567228,"post_id":28131597,"comment_id":44813161,"body_markdown":"@GimanthaBandara I think you can answer your own question :)","body":"@GimanthaBandara I think you can answer your own question :)"}],"owner":{"account_id":5247570,"reputation":46,"user_id":4192749,"display_name":"Gimantha Bandara"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":927,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1691666458,"creation_date":1422143199,"question_id":28131597,"body_markdown":"Consider the following code.\r\n\r\n    @POST\r\n    @Path(&quot;records&quot;)\r\n    public Response insertRecords(List&lt;RecordBean&gt; recordBeans) {\r\n    \ttry {\r\n    \t\tList&lt;Record&gt; records = Utils.getRecordsFromRecordBeans(tenantId, recordBeans);\r\n    \t\tdataService.insert(records);\r\n    \t\t//rest of the Code\r\n    \t} catch (Exception e) {\r\n    \t\t//handle the error\r\n    \t}\r\n    }\r\n\r\nThe `RecordBean` class as follows,\r\n\r\n    @XmlAccessorType(XmlAccessType.FIELD)\r\n       @XmlType(propOrder = {&quot;.....&quot;, &quot;.....&quot;, &quot;values&quot; })\r\n        @XmlRootElement(name = &quot;record&quot;)\r\n        public class RecordBean {\r\n        \r\n        ...........\r\n\r\n    \t@XmlElement(required = true)\r\n    \tprivate Map&lt;String, Object&gt; values;\r\n    \r\n    \tpublic void setValues(Map&lt;String, Object&gt; values) {\r\n    \t\tthis.values = values;\r\n    \t}\r\n    \r\n    \tpublic Map&lt;String, Object&gt; getValues() {\r\n    \t\treturn values;\r\n    \t}\r\n    \r\n    \tpublic Object getValue(String name) {\r\n    \t\treturn this.values.get(name);\r\n    \t}\r\n    }\r\n\r\nThe `insertRecord` method receives a json message and using JAXB/JAX-RS, it will be converted to a `List&lt;RecordBean&gt;` . But a `recordBean` has an attribute called &quot;values&quot;. I want this attribute to be converted to a `LinkedHashMap&lt;String, Object&gt;` as I want to preserve the order of those values. How can I achieve this? Is there a way to assign a concrete implementation to Map interface through `cxf-servlet.xml` or any other way?","title":"Convert JSON Object to a LinkedHashMap in JAX-RS","body":"<p>Consider the following code.</p>\n<pre><code>@POST\n@Path(&quot;records&quot;)\npublic Response insertRecords(List&lt;RecordBean&gt; recordBeans) {\n    try {\n        List&lt;Record&gt; records = Utils.getRecordsFromRecordBeans(tenantId, recordBeans);\n        dataService.insert(records);\n        //rest of the Code\n    } catch (Exception e) {\n        //handle the error\n    }\n}\n</code></pre>\n<p>The <code>RecordBean</code> class as follows,</p>\n<pre><code>@XmlAccessorType(XmlAccessType.FIELD)\n   @XmlType(propOrder = {&quot;.....&quot;, &quot;.....&quot;, &quot;values&quot; })\n    @XmlRootElement(name = &quot;record&quot;)\n    public class RecordBean {\n    \n    ...........\n\n    @XmlElement(required = true)\n    private Map&lt;String, Object&gt; values;\n\n    public void setValues(Map&lt;String, Object&gt; values) {\n        this.values = values;\n    }\n\n    public Map&lt;String, Object&gt; getValues() {\n        return values;\n    }\n\n    public Object getValue(String name) {\n        return this.values.get(name);\n    }\n}\n</code></pre>\n<p>The <code>insertRecord</code> method receives a json message and using JAXB/JAX-RS, it will be converted to a <code>List&lt;RecordBean&gt;</code> . But a <code>recordBean</code> has an attribute called &quot;values&quot;. I want this attribute to be converted to a <code>LinkedHashMap&lt;String, Object&gt;</code> as I want to preserve the order of those values. How can I achieve this? Is there a way to assign a concrete implementation to Map interface through <code>cxf-servlet.xml</code> or any other way?</p>\n"},{"tags":["java","spring","postgresql"],"comments":[{"owner":{"account_id":7373320,"reputation":17364,"user_id":5612858,"display_name":"Arnaud"},"score":0,"creation_date":1691487114,"post_id":76858239,"comment_id":135494964,"body_markdown":"Please add your `movie` table&#39;s definition","body":"Please add your <code>movie</code> table&#39;s definition"},{"owner":{"account_id":5404,"reputation":22089,"user_id":8681,"accept_rate":67,"display_name":"Jorn"},"score":2,"creation_date":1691487213,"post_id":76858239,"comment_id":135494990,"body_markdown":"Error is pretty clear: In your `movie` table, the `name` column is an `integer`, but you are passing a `String` (from `movie.name()`)","body":"Error is pretty clear: In your <code>movie</code> table, the <code>name</code> column is an <code>integer</code>, but you are passing a <code>String</code> (from <code>movie.name()</code>)"},{"owner":{"account_id":16850706,"reputation":902,"user_id":12183825,"display_name":"Edgar"},"score":0,"creation_date":1691487301,"post_id":76858239,"comment_id":135495012,"body_markdown":"how can I pass correctly","body":"how can I pass correctly"},{"owner":{"account_id":16850706,"reputation":902,"user_id":12183825,"display_name":"Edgar"},"score":0,"creation_date":1691487811,"post_id":76858239,"comment_id":135495115,"body_markdown":"@Override\n    public int insertMovie(Movie movie) {\n        var sql = &quot;&quot;&quot;\n            INSERT INTO movie(name, release_date)\n            VALUES (?, ?);\n             &quot;&quot;&quot;;\n        try {\n            int name = Integer.parseInt(movie.name());\n            return jdbcTemplate.update(\n                    sql,\n                    name, movie.releaseDate()\n            );\n        } catch (NumberFormatException e) {\n            // Update the movie object with the value null for the name property\n            movie.name();\n            return -1;\n        }\n    }","body":"@Override     public int insertMovie(Movie movie) {         var sql = &quot;&quot;&quot;             INSERT INTO movie(name, release_date)             VALUES (?, ?);              &quot;&quot;&quot;;         try {             int name = Integer.parseInt(movie.name());             return jdbcTemplate.update(                     sql,                     name, movie.releaseDate()             );         } catch (NumberFormatException e) {             // Update the movie object with the value null for the name property             movie.name();             return -1;         }     }"},{"owner":{"account_id":16850706,"reputation":902,"user_id":12183825,"display_name":"Edgar"},"score":0,"creation_date":1691487845,"post_id":76858239,"comment_id":135495124,"body_markdown":"it is not working @Arnaud can you clearify what do you mean bu movie table definition]","body":"it is not working @Arnaud can you clearify what do you mean bu movie table definition]"},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":3,"creation_date":1691488498,"post_id":76858239,"comment_id":135495255,"body_markdown":"*int name = Integer.parseInt(movie.name());* How and why is a movie name a number?","body":"<i>int name = Integer.parseInt(movie.name());</i> How and why is a movie name a number?"},{"owner":{"account_id":16850706,"reputation":902,"user_id":12183825,"display_name":"Edgar"},"score":0,"creation_date":1691488599,"post_id":76858239,"comment_id":135495272,"body_markdown":"I dont understand what you mean","body":"I dont understand what you mean"},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1691488786,"post_id":76858239,"comment_id":135495306,"body_markdown":"Your code says that the movie name is a number and you want to turn it into an `int`. Why is it a number?","body":"Your code says that the movie name is a number and you want to turn it into an <code>int</code>. Why is it a number?"},{"owner":{"account_id":16850706,"reputation":902,"user_id":12183825,"display_name":"Edgar"},"score":0,"creation_date":1691488840,"post_id":76858239,"comment_id":135495316,"body_markdown":"I dont know I am following tutorial if you check above code in the post I am passing exactly","body":"I dont know I am following tutorial if you check above code in the post I am passing exactly"},{"owner":{"account_id":16850706,"reputation":902,"user_id":12183825,"display_name":"Edgar"},"score":0,"creation_date":1691488914,"post_id":76858239,"comment_id":135495331,"body_markdown":"@Override\n    public int insertMovie(Movie movie) {\n        var sql = &quot;&quot;&quot;\n                INSERT INTO movie(name, release_date)\n                VALUES (?, ?);\n                 &quot;&quot;&quot;;\n        return jdbcTemplate.update(\n                sql,\n                movie.name(), movie.releaseDate() I am not passing any int but I am passing string for name\n        );\n    }","body":"@Override     public int insertMovie(Movie movie) {         var sql = &quot;&quot;&quot;                 INSERT INTO movie(name, release_date)                 VALUES (?, ?);                  &quot;&quot;&quot;;         return jdbcTemplate.update(                 sql,                 movie.name(), movie.releaseDate() I am not passing any int but I am passing string for name         );     }"},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1691489187,"post_id":76858239,"comment_id":135495393,"body_markdown":"*I dont know I am following tutorial* URL please","body":"<i>I dont know I am following tutorial</i> URL please"},{"owner":{"account_id":16850706,"reputation":902,"user_id":12183825,"display_name":"Edgar"},"score":0,"creation_date":1691489257,"post_id":76858239,"comment_id":135495409,"body_markdown":"Let us [continue this discussion in chat](https://chat.stackoverflow.com/rooms/254843/discussion-between-edgar-and-g00se).","body":"Let us <a href=\"https://chat.stackoverflow.com/rooms/254843/discussion-between-edgar-and-g00se\">continue this discussion in chat</a>."},{"owner":{"account_id":16850706,"reputation":902,"user_id":12183825,"display_name":"Edgar"},"score":0,"creation_date":1691489346,"post_id":76858239,"comment_id":135495429,"body_markdown":"@g00se Please check this tutorial code https://github.com/amigoscode/jdbc/blob/main/src/main/java/com/amigoscode/movie/MovieDataAccessService.java","body":"@g00se Please check this tutorial code <a href=\"https://github.com/amigoscode/jdbc/blob/main/src/main/java/com/amigoscode/movie/MovieDataAccessService.java\" rel=\"nofollow noreferrer\">github.com/amigoscode/jdbc/blob/main/src/main/java/com/&hellip;</a>"}],"answers":[{"tags":[],"owner":{"account_id":16850706,"reputation":902,"user_id":12183825,"display_name":"Edgar"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1691666240,"creation_date":1691666240,"answer_id":76875225,"question_id":76858239,"body_markdown":"I fixed by updating sql command","title":"org.postgresql.util.PSQLException: ERROR: column \\&quot;name\\&quot; is of type integer but expression is of type character varying\\n?","body":"<p>I fixed by updating sql command</p>\n"}],"owner":{"account_id":16850706,"reputation":902,"user_id":12183825,"display_name":"Edgar"},"comment_count":13,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":167,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"closed_date":1691778918,"accepted_answer_id":76875225,"answer_count":1,"score":0,"last_activity_date":1691666240,"creation_date":1691486958,"question_id":76858239,"body_markdown":"I want to insert new data to postgres database in spring using java but when I run project I am getting following exception   \r\n\r\n    &quot;timestamp&quot;: &quot;2023-08-08T07:25:26.678+00:00&quot;,\r\n        &quot;status&quot;: 500,\r\n        &quot;error&quot;: &quot;Internal Server Error&quot;,\r\n        &quot;message&quot;: &quot;PreparedStatementCallback; bad SQL grammar [INSERT INTO movie(name, release_date)\\nVALUES (?, ?);\\n]; nested exception is org.postgresql.util.PSQLException: ERROR: column \\&quot;name\\&quot; is of type integer but expression is of type character varying\\n  Hint: You will need to rewrite or cast the expression.\\n  Position: 47&quot;,\r\n        &quot;path&quot;: &quot;/api/v1/movies&quot;\r\n    }\r\n\r\n\r\nbelow my insert movie method\r\n\r\n \r\n\r\n    @Override\r\n        public int insertMovie(Movie movie) {\r\n            var sql = &quot;&quot;&quot;\r\n                    INSERT INTO movie(name, release_date)\r\n                    VALUES (?, ?);\r\n                     &quot;&quot;&quot;;\r\n            return jdbcTemplate.update(\r\n                    sql,\r\n                    movie.name(), movie.releaseDate()\r\n            );\r\n        }\r\n\r\nI want to know where exactly I am making mistake any help and suggestions highly appreciated  I have tried all answers in stackoverflow it did not solve my problem\r\n\r\n","title":"org.postgresql.util.PSQLException: ERROR: column \\&quot;name\\&quot; is of type integer but expression is of type character varying\\n?","body":"<p>I want to insert new data to postgres database in spring using java but when I run project I am getting following exception</p>\n<pre><code>&quot;timestamp&quot;: &quot;2023-08-08T07:25:26.678+00:00&quot;,\n    &quot;status&quot;: 500,\n    &quot;error&quot;: &quot;Internal Server Error&quot;,\n    &quot;message&quot;: &quot;PreparedStatementCallback; bad SQL grammar [INSERT INTO movie(name, release_date)\\nVALUES (?, ?);\\n]; nested exception is org.postgresql.util.PSQLException: ERROR: column \\&quot;name\\&quot; is of type integer but expression is of type character varying\\n  Hint: You will need to rewrite or cast the expression.\\n  Position: 47&quot;,\n    &quot;path&quot;: &quot;/api/v1/movies&quot;\n}\n</code></pre>\n<p>below my insert movie method</p>\n<pre><code>@Override\n    public int insertMovie(Movie movie) {\n        var sql = &quot;&quot;&quot;\n                INSERT INTO movie(name, release_date)\n                VALUES (?, ?);\n                 &quot;&quot;&quot;;\n        return jdbcTemplate.update(\n                sql,\n                movie.name(), movie.releaseDate()\n        );\n    }\n</code></pre>\n<p>I want to know where exactly I am making mistake any help and suggestions highly appreciated  I have tried all answers in stackoverflow it did not solve my problem</p>\n"},{"tags":["java","maven","wsdl","cxf","wsdl2java"],"owner":{"account_id":5434085,"reputation":77,"user_id":4324059,"display_name":"norb"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":28,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1691665927,"creation_date":1691665927,"question_id":76875180,"body_markdown":"I&#39;m trying to generate Java code from WSDLs using the Apache CXF Maven plugin `cxf-codegen-plugin` where the WSDLs are contained in a Maven artifact of type `zip`.\r\n\r\nAt the moment, I fetch and unwrap the WSDLs using the `maven-dependency-plugin`:\r\n```maven\r\n&lt;plugin&gt;\r\n    &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n    &lt;artifactId&gt;maven-dependency-plugin&lt;/artifactId&gt;\r\n    &lt;executions&gt;\r\n        &lt;execution&gt;\r\n            &lt;id&gt;unpack&lt;/id&gt;\r\n            &lt;phase&gt;generate-sources&lt;/phase&gt;\r\n            &lt;goals&gt;\r\n                &lt;goal&gt;unpack&lt;/goal&gt;\r\n            &lt;/goals&gt;\r\n            &lt;configuration&gt;\r\n                &lt;artifactItems&gt;\r\n                    &lt;artifactItem&gt;\r\n                        &lt;groupId&gt;some.company.service&lt;/groupId&gt;\r\n                        &lt;artifactId&gt;service-package&lt;/artifactId&gt;\r\n                        &lt;version&gt;${service-package.version}&lt;/version&gt;\r\n                        &lt;type&gt;zip&lt;/type&gt;\r\n                        &lt;classifier&gt;wsdl&lt;/classifier&gt;\r\n                        &lt;overWrite&gt;false&lt;/overWrite&gt;\r\n                        &lt;outputDirectory&gt;${project.build.directory}/deps&lt;/outputDirectory&gt;\r\n                    &lt;/artifactItem&gt;\r\n                &lt;/artifactItems&gt;\r\n            &lt;/configuration&gt;\r\n        &lt;/execution&gt;\r\n    &lt;/executions&gt;\r\n&lt;/plugin&gt;\r\n```\r\nHowever, the Apache CXF codegen plugin allows to provide the artifact directly using `wsdlArtifact` and making the dependency plugin redundant:\r\n```maven\r\n&lt;plugin&gt;\r\n    &lt;groupId&gt;org.apache.cxf&lt;/groupId&gt;\r\n    &lt;artifactId&gt;cxf-codegen-plugin&lt;/artifactId&gt;\r\n    &lt;executions&gt;\r\n        &lt;execution&gt;\r\n            &lt;id&gt;generate-sources&lt;/id&gt;\r\n            &lt;phase&gt;generate-sources&lt;/phase&gt;\r\n            &lt;configuration&gt;\r\n                &lt;wsdlOptions&gt;\r\n                    &lt;wsdlOption&gt;\r\n                        &lt;wsdlArtifact&gt;\r\n                            &lt;groupId&gt;some.company.service&lt;/groupId&gt;\r\n                            &lt;artifactId&gt;service-package&lt;/artifactId&gt;\r\n                            &lt;version&gt;${service-package.version}&lt;/version&gt;\r\n                        &lt;/wsdlArtifact&gt;\r\n                    &lt;/wsdlOption&gt;\r\n                &lt;/wsdlOptions&gt;\r\n            &lt;/configuration&gt;\r\n            &lt;goals&gt;\r\n                &lt;goal&gt;wsdl2java&lt;/goal&gt;\r\n            &lt;/goals&gt;\r\n        &lt;/execution&gt;\r\n    &lt;/executions&gt;\r\n&lt;/plugin&gt;\r\n```\r\nIn this case this won&#39;t work and I get the error:\r\n```bash\r\nFailed to resolve WSDL artifact some.company.service:service-package:0.0.1\r\n```\r\nIf I change the artifact definition to:\r\n```maven\r\n&lt;wsdlArtifact&gt;\r\n    &lt;groupId&gt;some.company.service&lt;/groupId&gt;\r\n    &lt;artifactId&gt;service-package&lt;/artifactId&gt;\r\n    &lt;version&gt;${service-package.version}&lt;/version&gt;\r\n    &lt;type&gt;zip&lt;/type&gt;\r\n    &lt;classifier&gt;wsdl&lt;/classifier&gt;\r\n&lt;/wsdlArtifact&gt;\r\n```\r\nThe plugin throws an exception during processing:\r\n```bash\r\n[...]\r\nCaused by: javax.wsdl.WSDLException: WSDLException: faultCode=PARSER_ERROR: com.ctc.wstx.exc.WstxIOException: Invalid UTF-8 middle byte 0x56 (at char #12, byte #-1)\r\n[...]\r\nCaused by: java.io.CharConversionException: Invalid UTF-8 middle byte 0x56 (at char #12, byte #-1)\r\n```\r\n\r\nTo me it seems that the plugin is not able to parse an artifact of type `zip`. Correct? Is there any solution to achieve this using the codegen plugin only or do I need the dependency plugin?\r\n\r\nIf I could parse the WSDL artifact somehow, is it possible to include / exclude certain WSDL for code generation?","title":"How to use a zipped Maven artifact as wsdlArtifact in Apache CXF","body":"<p>I'm trying to generate Java code from WSDLs using the Apache CXF Maven plugin <code>cxf-codegen-plugin</code> where the WSDLs are contained in a Maven artifact of type <code>zip</code>.</p>\n<p>At the moment, I fetch and unwrap the WSDLs using the <code>maven-dependency-plugin</code>:</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;plugin&gt;\n    &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n    &lt;artifactId&gt;maven-dependency-plugin&lt;/artifactId&gt;\n    &lt;executions&gt;\n        &lt;execution&gt;\n            &lt;id&gt;unpack&lt;/id&gt;\n            &lt;phase&gt;generate-sources&lt;/phase&gt;\n            &lt;goals&gt;\n                &lt;goal&gt;unpack&lt;/goal&gt;\n            &lt;/goals&gt;\n            &lt;configuration&gt;\n                &lt;artifactItems&gt;\n                    &lt;artifactItem&gt;\n                        &lt;groupId&gt;some.company.service&lt;/groupId&gt;\n                        &lt;artifactId&gt;service-package&lt;/artifactId&gt;\n                        &lt;version&gt;${service-package.version}&lt;/version&gt;\n                        &lt;type&gt;zip&lt;/type&gt;\n                        &lt;classifier&gt;wsdl&lt;/classifier&gt;\n                        &lt;overWrite&gt;false&lt;/overWrite&gt;\n                        &lt;outputDirectory&gt;${project.build.directory}/deps&lt;/outputDirectory&gt;\n                    &lt;/artifactItem&gt;\n                &lt;/artifactItems&gt;\n            &lt;/configuration&gt;\n        &lt;/execution&gt;\n    &lt;/executions&gt;\n&lt;/plugin&gt;\n</code></pre>\n<p>However, the Apache CXF codegen plugin allows to provide the artifact directly using <code>wsdlArtifact</code> and making the dependency plugin redundant:</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;plugin&gt;\n    &lt;groupId&gt;org.apache.cxf&lt;/groupId&gt;\n    &lt;artifactId&gt;cxf-codegen-plugin&lt;/artifactId&gt;\n    &lt;executions&gt;\n        &lt;execution&gt;\n            &lt;id&gt;generate-sources&lt;/id&gt;\n            &lt;phase&gt;generate-sources&lt;/phase&gt;\n            &lt;configuration&gt;\n                &lt;wsdlOptions&gt;\n                    &lt;wsdlOption&gt;\n                        &lt;wsdlArtifact&gt;\n                            &lt;groupId&gt;some.company.service&lt;/groupId&gt;\n                            &lt;artifactId&gt;service-package&lt;/artifactId&gt;\n                            &lt;version&gt;${service-package.version}&lt;/version&gt;\n                        &lt;/wsdlArtifact&gt;\n                    &lt;/wsdlOption&gt;\n                &lt;/wsdlOptions&gt;\n            &lt;/configuration&gt;\n            &lt;goals&gt;\n                &lt;goal&gt;wsdl2java&lt;/goal&gt;\n            &lt;/goals&gt;\n        &lt;/execution&gt;\n    &lt;/executions&gt;\n&lt;/plugin&gt;\n</code></pre>\n<p>In this case this won't work and I get the error:</p>\n<pre class=\"lang-bash prettyprint-override\"><code>Failed to resolve WSDL artifact some.company.service:service-package:0.0.1\n</code></pre>\n<p>If I change the artifact definition to:</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;wsdlArtifact&gt;\n    &lt;groupId&gt;some.company.service&lt;/groupId&gt;\n    &lt;artifactId&gt;service-package&lt;/artifactId&gt;\n    &lt;version&gt;${service-package.version}&lt;/version&gt;\n    &lt;type&gt;zip&lt;/type&gt;\n    &lt;classifier&gt;wsdl&lt;/classifier&gt;\n&lt;/wsdlArtifact&gt;\n</code></pre>\n<p>The plugin throws an exception during processing:</p>\n<pre class=\"lang-bash prettyprint-override\"><code>[...]\nCaused by: javax.wsdl.WSDLException: WSDLException: faultCode=PARSER_ERROR: com.ctc.wstx.exc.WstxIOException: Invalid UTF-8 middle byte 0x56 (at char #12, byte #-1)\n[...]\nCaused by: java.io.CharConversionException: Invalid UTF-8 middle byte 0x56 (at char #12, byte #-1)\n</code></pre>\n<p>To me it seems that the plugin is not able to parse an artifact of type <code>zip</code>. Correct? Is there any solution to achieve this using the codegen plugin only or do I need the dependency plugin?</p>\n<p>If I could parse the WSDL artifact somehow, is it possible to include / exclude certain WSDL for code generation?</p>\n"},{"tags":["java","spring-boot"],"comments":[{"owner":{"account_id":19580981,"reputation":106,"user_id":14330061,"display_name":"dauthDaert06"},"score":1,"creation_date":1691650236,"post_id":76872384,"comment_id":135520602,"body_markdown":"You can create POJOs accordingly let it be deserialized by itself.     \n`YourPOJO result = restTemplate.getForObject(uri, YourPOJO.class);`","body":"You can create POJOs accordingly let it be deserialized by itself.      <code>YourPOJO result = restTemplate.getForObject(uri, YourPOJO.class);</code>"},{"owner":{"account_id":28651263,"reputation":135,"user_id":21938196,"display_name":"jingwen"},"score":0,"creation_date":1691651149,"post_id":76872384,"comment_id":135520761,"body_markdown":"I didn&#39;t want to create a custom class due to the deep nesting that would require the creation of 8 classes just to query 1 field but I ended up doing it anyway...","body":"I didn&#39;t want to create a custom class due to the deep nesting that would require the creation of 8 classes just to query 1 field but I ended up doing it anyway..."}],"answers":[{"tags":[],"owner":{"account_id":16341513,"reputation":209,"user_id":11802330,"display_name":"Eric"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1691665461,"creation_date":1691665461,"answer_id":76875127,"question_id":76872384,"body_markdown":"With this result sample\r\n\r\n \r\n\r\n       {\r\n    &quot;type&quot;:&quot;FeatureCollection&quot;,\r\n    &quot;crs&quot;:{&quot;type&quot;:&quot;link&quot;,&quot;properties&quot;:{&quot;href&quot;:&quot;http://spatialreference.org/ref/epsg/4326/ogcwkt/&quot;,&quot;type&quot;:&quot;ogcwkt&quot;},\r\n    &quot;features&quot;:[{&quot;type&quot;:&quot;Feature&quot;,&quot;geometry&quot;:{&quot;type&quot;:&quot;MultiPoint&quot;,&quot;coordinates&quot;:[[103.62835,1.29337],[103.63217,1.31944]\r\n    ......\r\n\r\nyou can loop through result and extract coordinates using JSONArrays &amp; JSONObjects as below\r\n\r\n    JSONObject resultObject = new JSONObject(result);\r\n    \r\n    JSONArray featuresArray = resultObject.getJSONArray(&quot;features&quot;);\r\n    System.out.println(&quot;\\nfeaturesArray = &quot; + featuresArray);\r\n    //[{&quot;geometry&quot;:{&quot;coordinates&quot;:[[103.62382,1.28178],[103.6265,1.29515],\r\n    \r\n    for (int f = 0; f &lt; featuresArray.length(); f++) {\r\n    \r\n        JSONObject featuresObj = featuresArray.getJSONObject(f);\r\n        System.out.println(&quot;\\nfeaturesObj = &quot; + featuresObj);\r\n        //{&quot;geometry&quot;:{&quot;coordinates&quot;:[[103.62803,1.28839],[103.62911,1.29983],\r\n    \r\n        JSONObject geometryObj = featuresObj.getJSONObject(&quot;geometry&quot;);\r\n        System.out.println(&quot;\\ngeometryObj = &quot; + geometryObj);\r\n        //{&quot;coordinates&quot;:[[103.62711,1.30928],[103.62718,1.29478]\r\n    \r\n        JSONArray coordsArray = geometryObj.getJSONArray(&quot;coordinates&quot;);\r\n        System.out.println(&quot;\\ncoordsArray = &quot; + coordsArray);\r\n        //[[103.61466,1.25029],[103.61822,1.27588],\r\n    \r\n        for (int c = 0; c &lt; coordsArray.length(); c++) {\r\n            System.out.println(&quot;Coord = &quot; + coordsArray.get(c));\r\n            //Coord = [103.62387,1.28607]\r\n            //Coord = [103.62649,1.29515]\r\n        }\r\n    }\r\n    ","title":"Parsing deeply nested object from HTTP API call with Java","body":"<p>With this result sample</p>\n<pre><code>   {\n&quot;type&quot;:&quot;FeatureCollection&quot;,\n&quot;crs&quot;:{&quot;type&quot;:&quot;link&quot;,&quot;properties&quot;:{&quot;href&quot;:&quot;http://spatialreference.org/ref/epsg/4326/ogcwkt/&quot;,&quot;type&quot;:&quot;ogcwkt&quot;},\n&quot;features&quot;:[{&quot;type&quot;:&quot;Feature&quot;,&quot;geometry&quot;:{&quot;type&quot;:&quot;MultiPoint&quot;,&quot;coordinates&quot;:[[103.62835,1.29337],[103.63217,1.31944]\n......\n</code></pre>\n<p>you can loop through result and extract coordinates using JSONArrays &amp; JSONObjects as below</p>\n<pre><code>JSONObject resultObject = new JSONObject(result);\n\nJSONArray featuresArray = resultObject.getJSONArray(&quot;features&quot;);\nSystem.out.println(&quot;\\nfeaturesArray = &quot; + featuresArray);\n//[{&quot;geometry&quot;:{&quot;coordinates&quot;:[[103.62382,1.28178],[103.6265,1.29515],\n\nfor (int f = 0; f &lt; featuresArray.length(); f++) {\n\n    JSONObject featuresObj = featuresArray.getJSONObject(f);\n    System.out.println(&quot;\\nfeaturesObj = &quot; + featuresObj);\n    //{&quot;geometry&quot;:{&quot;coordinates&quot;:[[103.62803,1.28839],[103.62911,1.29983],\n\n    JSONObject geometryObj = featuresObj.getJSONObject(&quot;geometry&quot;);\n    System.out.println(&quot;\\ngeometryObj = &quot; + geometryObj);\n    //{&quot;coordinates&quot;:[[103.62711,1.30928],[103.62718,1.29478]\n\n    JSONArray coordsArray = geometryObj.getJSONArray(&quot;coordinates&quot;);\n    System.out.println(&quot;\\ncoordsArray = &quot; + coordsArray);\n    //[[103.61466,1.25029],[103.61822,1.27588],\n\n    for (int c = 0; c &lt; coordsArray.length(); c++) {\n        System.out.println(&quot;Coord = &quot; + coordsArray.get(c));\n        //Coord = [103.62387,1.28607]\n        //Coord = [103.62649,1.29515]\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":28651263,"reputation":135,"user_id":21938196,"display_name":"jingwen"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":40,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76875127,"answer_count":1,"score":0,"last_activity_date":1691665461,"creation_date":1691636175,"question_id":76872384,"body_markdown":"I am calling the Singapore government&#39;s public `taxi-availability` API and am trying to get the value of the `coordinates` array which is a list of objects. However, I am having difficulty parsing the response as it is a deeply nested object and I do not want to define a separate data class for it\r\n\r\nResponse data model (not all keys are shown):\r\n```js\r\n{\r\n    features: [\r\n        {\r\n            geometry: {\r\n                coordinates: [\r\n                    {\r\n\r\n                    }\r\n                ]\r\n            }\r\n        }\r\n    ]\r\n}\r\n```\r\n\r\nCode to get the response:\r\n\r\n```java\r\nString uri = &quot;https://api.data.gov.sg/v1/transport/taxi-availability&quot;;\r\nRestTemplate restTemplate = new RestTemplate();\r\nString result = restTemplate.getForObject(uri, String.class);\r\n```\r\n\r\nCode to convert the response from string to an object:\r\n\r\n```java\r\nJSONObject obj = new JSONObject(result);\r\n```\r\n\r\nFaulty attempt to query for `coordinates`:\r\n\r\n```java\r\nobj.getJSONArray(&quot;features&quot;).get(0).getJSONObject(&quot;geometry&quot;).getJSONArray(&quot;coordinates&quot;).toString();\r\n```\r\n\r\nWarning: `The method getJSONObject(String) is undefined for type object` at `.get(0).getJSONObject(&quot;geometry&quot;)`\r\n\r\n\r\nPlease advise on how I can query for the `coordinates` array of objects. I&#39;m willing to use different libraries ","title":"Parsing deeply nested object from HTTP API call with Java","body":"<p>I am calling the Singapore government's public <code>taxi-availability</code> API and am trying to get the value of the <code>coordinates</code> array which is a list of objects. However, I am having difficulty parsing the response as it is a deeply nested object and I do not want to define a separate data class for it</p>\n<p>Response data model (not all keys are shown):</p>\n<pre class=\"lang-js prettyprint-override\"><code>{\n    features: [\n        {\n            geometry: {\n                coordinates: [\n                    {\n\n                    }\n                ]\n            }\n        }\n    ]\n}\n</code></pre>\n<p>Code to get the response:</p>\n<pre class=\"lang-java prettyprint-override\"><code>String uri = &quot;https://api.data.gov.sg/v1/transport/taxi-availability&quot;;\nRestTemplate restTemplate = new RestTemplate();\nString result = restTemplate.getForObject(uri, String.class);\n</code></pre>\n<p>Code to convert the response from string to an object:</p>\n<pre class=\"lang-java prettyprint-override\"><code>JSONObject obj = new JSONObject(result);\n</code></pre>\n<p>Faulty attempt to query for <code>coordinates</code>:</p>\n<pre class=\"lang-java prettyprint-override\"><code>obj.getJSONArray(&quot;features&quot;).get(0).getJSONObject(&quot;geometry&quot;).getJSONArray(&quot;coordinates&quot;).toString();\n</code></pre>\n<p>Warning: <code>The method getJSONObject(String) is undefined for type object</code> at <code>.get(0).getJSONObject(&quot;geometry&quot;)</code></p>\n<p>Please advise on how I can query for the <code>coordinates</code> array of objects. I'm willing to use different libraries</p>\n"},{"tags":["java","spring","spring-mvc","spring-transactions"],"comments":[{"owner":{"account_id":3192259,"reputation":117599,"user_id":2696260,"display_name":"M. Deinum"},"score":2,"creation_date":1431080464,"post_id":30121283,"comment_id":48352487,"body_markdown":"Create another service (non-transactional) which calls the transactional service, put a try/catch around that call. If all goes well (i.e. no exception) call your methods, else throw exception or whatever you want to do with it.  Not really spring related imho.","body":"Create another service (non-transactional) which calls the transactional service, put a try/catch around that call. If all goes well (i.e. no exception) call your methods, else throw exception or whatever you want to do with it.  Not really spring related imho."},{"owner":{"account_id":2454649,"reputation":34077,"user_id":2140160,"accept_rate":42,"display_name":"Mr Jedi"},"score":0,"creation_date":1431090786,"post_id":30121283,"comment_id":48359078,"body_markdown":"@M.Deinum my point is to hook up this code once, becouse &quot;service.doThings()&quot; it&#39;s called in dozen other services.","body":"@M.Deinum my point is to hook up this code once, becouse &quot;service.doThings()&quot; it&#39;s called in dozen other services."},{"owner":{"account_id":3192259,"reputation":117599,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1431090911,"post_id":30121283,"comment_id":48359155,"body_markdown":"And why would you need to do this more then once? Replace the calls to `service.doThings()` with `newService.doThings()`. You can of course use AOP but that would be a bit like using a canon to kill a fly. Or create a new service, and call that from `service.doThings` and that new service does the transactional stuff.","body":"And why would you need to do this more then once? Replace the calls to <code>service.doThings()</code> with <code>newService.doThings()</code>. You can of course use AOP but that would be a bit like using a canon to kill a fly. Or create a new service, and call that from <code>service.doThings</code> and that new service does the transactional stuff."},{"owner":{"account_id":2454649,"reputation":34077,"user_id":2140160,"accept_rate":42,"display_name":"Mr Jedi"},"score":0,"creation_date":1431091166,"post_id":30121283,"comment_id":48359325,"body_markdown":"Assume service.doThings() change status on object based on some bisnes logic. So I must call it every time when I edited this object. It happens in different services. When status is change I send notifications to users, it&#39;s -&gt; someService.thisMethodFiresOnEndOfTransaction() I can&#39;t send notification before transaction end couse I don&#39;t have certainty that will be success end.","body":"Assume service.doThings() change status on object based on some bisnes logic. So I must call it every time when I edited this object. It happens in different services. When status is change I send notifications to users, it&#39;s -&gt; someService.thisMethodFiresOnEndOfTransaction() I can&#39;t send notification before transaction end couse I don&#39;t have certainty that will be success end."},{"owner":{"account_id":3192259,"reputation":117599,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1431091502,"post_id":30121283,"comment_id":48359565,"body_markdown":"As stated, move the transactional logic to a different service, which you call from the `service.doThings`. The only thing that needs to change is the `service.doThings` implementation. Calling services remain unchanged...","body":"As stated, move the transactional logic to a different service, which you call from the <code>service.doThings</code>. The only thing that needs to change is the <code>service.doThings</code> implementation. Calling services remain unchanged..."},{"owner":{"account_id":2454649,"reputation":34077,"user_id":2140160,"accept_rate":42,"display_name":"Mr Jedi"},"score":0,"creation_date":1431092485,"post_id":30121283,"comment_id":48360224,"body_markdown":"I don&#39;t get it your point. Services that calls service.doThings do diffferent things (also need transaction). I can&#39;t reverse worflow and call other methods from service.doThings.","body":"I don&#39;t get it your point. Services that calls service.doThings do diffferent things (also need transaction). I can&#39;t reverse worflow and call other methods from service.doThings."}],"answers":[{"tags":[],"owner":{"account_id":1880749,"reputation":3097,"user_id":4465354,"display_name":"qwwdfsad"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1431091991,"creation_date":1431089768,"answer_id":30124464,"question_id":30121283,"body_markdown":"Not sure, if it&#39;s good idea to delegate this to spring when you can add new bean as indirection layer between those services and delegate this thing to it.\r\n\r\n\r\nBut if you really don&#39;t have choice or want to do it with Spring, you can specify your own `PlatformTransactionManager`, which will delegate all calls to default manager, but also intercepts successful `commit()` calls.\r\nExample:\r\n\r\n    public class MyTransactionalManager implements PlatformTransactionManager {\r\n    // ... implementation via delegation skipped here\r\n        @Override\r\n        public void commit(TransactionStatus status) throws TransactionException {\r\n            defaultManager.commit(status);\r\n            // You might want to check status.isRollbackOnly() here\r\n            someService.thisMethodFiresOnEndOfTransaction();\r\n    }\r\n\r\nNow you can either replace default transaction manager in your application (then ::thisMethodFiresOnEndOfTransaction will be called after ***each*** transaction) or add it in context with some qualifier, then you should write something like this:\r\n\r\n    @Override\r\n    @Transactional(value = &quot;myManager&quot;, rollbackFor = ...)  \r\n    public void method()\r\n\r\n(And in the end of the answer I still think this is flawed approach and implementing it via just another bean is far better)","title":"Spring app - run method on end of transaction?","body":"<p>Not sure, if it's good idea to delegate this to spring when you can add new bean as indirection layer between those services and delegate this thing to it.</p>\n\n<p>But if you really don't have choice or want to do it with Spring, you can specify your own <code>PlatformTransactionManager</code>, which will delegate all calls to default manager, but also intercepts successful <code>commit()</code> calls.\nExample:</p>\n\n<pre><code>public class MyTransactionalManager implements PlatformTransactionManager {\n// ... implementation via delegation skipped here\n    @Override\n    public void commit(TransactionStatus status) throws TransactionException {\n        defaultManager.commit(status);\n        // You might want to check status.isRollbackOnly() here\n        someService.thisMethodFiresOnEndOfTransaction();\n}\n</code></pre>\n\n<p>Now you can either replace default transaction manager in your application (then ::thisMethodFiresOnEndOfTransaction will be called after <strong><em>each</em></strong> transaction) or add it in context with some qualifier, then you should write something like this:</p>\n\n<pre><code>@Override\n@Transactional(value = \"myManager\", rollbackFor = ...)  \npublic void method()\n</code></pre>\n\n<p>(And in the end of the answer I still think this is flawed approach and implementing it via just another bean is far better)</p>\n"},{"tags":[],"owner":{"account_id":3867513,"reputation":1292,"user_id":3203688,"display_name":"Carlos Cuesta"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691665448,"creation_date":1691665448,"answer_id":76875125,"question_id":30121283,"body_markdown":"In Spring Boot, if you want to run a method at the end of a transaction, you can utilize the @Transactional annotation along with the TransactionSynchronizationManager class to register after-commit hooks\r\n\r\n    @Service\r\n    public class MyService {\r\n\r\n      @Transactional\r\n      public void myTransactionalMethod() {\r\n        // Your transactional code here...\r\n\r\n        // Register after-commit hook\r\n        TransactionSynchronizationManager.registerSynchronization(new TransactionSynchronizationAdapter() {\r\n            @Override\r\n            public void afterCommit() {\r\n                runAfterTransaction();\r\n            }\r\n        });\r\n      }\r\n\r\n      public void runAfterTransaction() {\r\n        // Your after-commit logic here...\r\n        System.out.println(&quot;This method runs after the transaction is successfully committed!&quot;);\r\n      }\r\n    }\r\n\r\n","title":"Spring app - run method on end of transaction?","body":"<p>In Spring Boot, if you want to run a method at the end of a transaction, you can utilize the @Transactional annotation along with the TransactionSynchronizationManager class to register after-commit hooks</p>\n<pre><code>@Service\npublic class MyService {\n\n  @Transactional\n  public void myTransactionalMethod() {\n    // Your transactional code here...\n\n    // Register after-commit hook\n    TransactionSynchronizationManager.registerSynchronization(new TransactionSynchronizationAdapter() {\n        @Override\n        public void afterCommit() {\n            runAfterTransaction();\n        }\n    });\n  }\n\n  public void runAfterTransaction() {\n    // Your after-commit logic here...\n    System.out.println(&quot;This method runs after the transaction is successfully committed!&quot;);\n  }\n}\n</code></pre>\n"}],"owner":{"account_id":2454649,"reputation":34077,"user_id":2140160,"accept_rate":42,"display_name":"Mr Jedi"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2662,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":30124464,"answer_count":2,"score":1,"last_activity_date":1691665448,"creation_date":1431079914,"question_id":30121283,"body_markdown":"I wondering it is possible to configure spring in way to fire particular method on end transaction?\r\n\r\nFor example I have service class with method\r\n\r\n    @Service\r\n    public class service implements IService\r\n    {\r\n        @Resource\r\n        private EntityDao entityDao;\r\n\r\n        @Resource\r\n        private SomeService someService;\r\n    \r\n        @Transactional\r\n        @Override\r\n        public void doThings()\r\n        {\r\n           entityDao.doSmthOnDb();\r\n           someService.thisMethodFiresOnEndOfTransaction();\r\n        }\r\n    \r\n    }\r\n\r\nand second service class\r\n\r\n    @Service\r\n    public class secondService implements ISecondService\r\n    {\r\n      @Resource\r\n      private IService service;\r\n    \r\n      @Transactional\r\n      @Override\r\n      public void method()\r\n      {\r\n      service.doThings();\r\n      /*\r\n      some other code that can break transaction\r\n      */\r\n      }\r\n    }\r\n\r\nso if I call `secondService.method()` I want that `someService.thisMethodFiresOnEndOfTransaction()` will be fire only if transaction end successfully.  \r\n\r\nIs it possible in spring?","title":"Spring app - run method on end of transaction?","body":"<p>I wondering it is possible to configure spring in way to fire particular method on end transaction?</p>\n\n<p>For example I have service class with method</p>\n\n<pre><code>@Service\npublic class service implements IService\n{\n    @Resource\n    private EntityDao entityDao;\n\n    @Resource\n    private SomeService someService;\n\n    @Transactional\n    @Override\n    public void doThings()\n    {\n       entityDao.doSmthOnDb();\n       someService.thisMethodFiresOnEndOfTransaction();\n    }\n\n}\n</code></pre>\n\n<p>and second service class</p>\n\n<pre><code>@Service\npublic class secondService implements ISecondService\n{\n  @Resource\n  private IService service;\n\n  @Transactional\n  @Override\n  public void method()\n  {\n  service.doThings();\n  /*\n  some other code that can break transaction\n  */\n  }\n}\n</code></pre>\n\n<p>so if I call <code>secondService.method()</code> I want that <code>someService.thisMethodFiresOnEndOfTransaction()</code> will be fire only if transaction end successfully.  </p>\n\n<p>Is it possible in spring?</p>\n"},{"tags":["java","arrays","object","intellij-idea"],"comments":[{"owner":{"account_id":4470050,"reputation":68258,"user_id":3636601,"accept_rate":75,"display_name":"Jens"},"score":0,"creation_date":1691661181,"post_id":76874550,"comment_id":135522785,"body_markdown":"Override the `toString` method","body":"Override the <code>toString</code> method"}],"answers":[{"tags":[],"owner":{"account_id":2094057,"reputation":506074,"user_id":1863229,"accept_rate":58,"display_name":"Tim Biegeleisen"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1691661384,"creation_date":1691661384,"answer_id":76874616,"question_id":76874550,"body_markdown":"Split on space first, the iterate the array of names and do a replacement:\r\n\r\n&lt;!-- language: java --&gt;\r\n\r\n    String text = &quot;John.Davidson/Belgrade Michael.Barton/Krakow Ivan.Perkinson/Moscow&quot;;\r\n    String[] names = text.split(&quot; &quot;);\r\n    List&lt;String&gt; output = Arrays.stream(names)\r\n                                .map(x -&gt; x.replaceAll(&quot;[./]&quot;, &quot; &quot;))\r\n                                .collect(Collectors.toList());\r\n    System.out.println(output);\r\n\r\n    // [John Davidson Belgrade, Michael Barton Krakow, Ivan Perkinson Moscow]","title":"How can I split a string, then use the parts to create an object, and then create an array with these objects?","body":"<p>Split on space first, the iterate the array of names and do a replacement:</p>\n<pre class=\"lang-java prettyprint-override\"><code>String text = &quot;John.Davidson/Belgrade Michael.Barton/Krakow Ivan.Perkinson/Moscow&quot;;\nString[] names = text.split(&quot; &quot;);\nList&lt;String&gt; output = Arrays.stream(names)\n                            .map(x -&gt; x.replaceAll(&quot;[./]&quot;, &quot; &quot;))\n                            .collect(Collectors.toList());\nSystem.out.println(output);\n\n// [John Davidson Belgrade, Michael Barton Krakow, Ivan Perkinson Moscow]\n</code></pre>\n"},{"tags":[],"owner":{"account_id":17813347,"reputation":1635,"user_id":12937443,"display_name":"DEV"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1691661599,"creation_date":1691661599,"answer_id":76874655,"question_id":76874550,"body_markdown":"What are you trying to do was wrong \r\nyou cant initialise the array with a fixed size cause you dont know how much persons are present in the string, so you better use an arrayList\r\n\r\n    public static void main(String[] args) {\r\n            String text = &quot;John.Davidson/Belgrade Michael.Barton/Krakow Ivan.Perkinson/Moscow&quot;;\r\n            String[] personsString = text.split(&quot; &quot;);\r\n            List&lt;Person&gt; persons = new ArrayList&lt;Person&gt;();\r\n            \r\n            for (String ps : personsString) {\r\n            \tString firtname = ps.split(&quot;/&quot;)[0].split(&quot;\\\\.&quot;)[0];\r\n            \tString lastname = ps.split(&quot;/&quot;)[0].split(&quot;\\\\.&quot;)[1];\r\n            \tString city = ps.split(&quot;/&quot;)[1];\r\n            \tpersons.add(new Person(firtname, lastname, city));        \t\r\n            }\r\n            \r\n            for (Person person : persons) {\r\n                System.out.println(person.getInfo());\r\n            }\r\n        }","title":"How can I split a string, then use the parts to create an object, and then create an array with these objects?","body":"<p>What are you trying to do was wrong\nyou cant initialise the array with a fixed size cause you dont know how much persons are present in the string, so you better use an arrayList</p>\n<pre><code>public static void main(String[] args) {\n        String text = &quot;John.Davidson/Belgrade Michael.Barton/Krakow Ivan.Perkinson/Moscow&quot;;\n        String[] personsString = text.split(&quot; &quot;);\n        List&lt;Person&gt; persons = new ArrayList&lt;Person&gt;();\n        \n        for (String ps : personsString) {\n            String firtname = ps.split(&quot;/&quot;)[0].split(&quot;\\\\.&quot;)[0];\n            String lastname = ps.split(&quot;/&quot;)[0].split(&quot;\\\\.&quot;)[1];\n            String city = ps.split(&quot;/&quot;)[1];\n            persons.add(new Person(firtname, lastname, city));          \n        }\n        \n        for (Person person : persons) {\n            System.out.println(person.getInfo());\n        }\n    }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1894950,"reputation":18007,"user_id":1712135,"display_name":"deHaar"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691664316,"creation_date":1691664316,"answer_id":76874987,"question_id":76874550,"body_markdown":"I would split on space(s) first, because that operation already separates the values per person.\r\n\r\nIf you want to combine both of the previous answers to have a list of `Person` objects, you could do it like this:\r\n\r\n```Java\r\npublic static void main(String[] args) {\r\n\t// your example input\r\n\tString text = &quot;John.Davidson/Belgrade Michael.Barton/Krakow Ivan.Perkinson/Moscow&quot;;\r\n\t// split by arbitrary amount of whitespaces\r\n\tString[] personInfos = text.split(&quot;\\\\s+&quot;);\r\n\t// stream the result\r\n\tList&lt;Person&gt; persons = Arrays.stream(personInfos)\r\n\t\t\t// and split the Strings to extract the info parts and create Persons from those\r\n            .map(x -&gt; new Person(\r\n            \t\t\t// split by dot has name as first element\r\n                \t\tx.split(&quot;\\\\.&quot;)[0],\r\n                \t\t// splitting the second element of above operation by slash provides surname\r\n                \t\tx.split(&quot;\\\\.&quot;)[1].split(&quot;/&quot;)[0],\r\n                \t\t// and city\r\n                \t\tx.split(&quot;\\\\.&quot;)[1].split(&quot;/&quot;)[1]\r\n    \t\t\t\t)\r\n            ).collect(Collectors.toList());\r\n\t// print each person&#39;s toString()\r\n\tpersons.forEach(System.out::println);\r\n}\r\n```\r\n\r\n**Provided** you override the `Person::toString()` as follows…\r\n\r\n```Java\r\npublic class Person {\r\n    …\r\n    \r\n    @Override\r\n    public String toString() {\r\n    \treturn String.format(&quot;%s, %s (%s)&quot;, surname, name, city);\r\n    }\r\n}\r\n\r\n```\r\n\r\n… the output will be this:\r\n\r\n```none\r\nDavidson, John (Belgrade)\r\nBarton, Michael (Krakow)\r\nPerkinson, Ivan (Moscow)\r\n```","title":"How can I split a string, then use the parts to create an object, and then create an array with these objects?","body":"<p>I would split on space(s) first, because that operation already separates the values per person.</p>\n<p>If you want to combine both of the previous answers to have a list of <code>Person</code> objects, you could do it like this:</p>\n<pre><code>public static void main(String[] args) {\n    // your example input\n    String text = &quot;John.Davidson/Belgrade Michael.Barton/Krakow Ivan.Perkinson/Moscow&quot;;\n    // split by arbitrary amount of whitespaces\n    String[] personInfos = text.split(&quot;\\\\s+&quot;);\n    // stream the result\n    List&lt;Person&gt; persons = Arrays.stream(personInfos)\n            // and split the Strings to extract the info parts and create Persons from those\n            .map(x -&gt; new Person(\n                        // split by dot has name as first element\n                        x.split(&quot;\\\\.&quot;)[0],\n                        // splitting the second element of above operation by slash provides surname\n                        x.split(&quot;\\\\.&quot;)[1].split(&quot;/&quot;)[0],\n                        // and city\n                        x.split(&quot;\\\\.&quot;)[1].split(&quot;/&quot;)[1]\n                    )\n            ).collect(Collectors.toList());\n    // print each person's toString()\n    persons.forEach(System.out::println);\n}\n</code></pre>\n<p><strong>Provided</strong> you override the <code>Person::toString()</code> as follows…</p>\n<pre><code>public class Person {\n    …\n    \n    @Override\n    public String toString() {\n        return String.format(&quot;%s, %s (%s)&quot;, surname, name, city);\n    }\n}\n\n</code></pre>\n<p>… the output will be this:</p>\n<pre class=\"lang-none prettyprint-override\"><code>Davidson, John (Belgrade)\nBarton, Michael (Krakow)\nPerkinson, Ivan (Moscow)\n</code></pre>\n"}],"owner":{"account_id":26903683,"reputation":11,"user_id":20480411,"display_name":"Mary Heidi"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":38,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":3,"score":0,"last_activity_date":1691664316,"creation_date":1691660802,"question_id":76874550,"body_markdown":"I need to solve a somewhat complicated task, but I don&#39;t seem to get it right.\r\n\r\nI have the following String:\r\n\r\n```\r\nString text = &quot;John.Davidson/Belgrade Michael.Barton/Krakow Ivan.Perkinson/Moscow&quot;;\r\n```\r\n\r\nIn short, the program flow should be like this:\r\n\r\n- split the given String into multiple parts to get first name, last name, and cities;\r\n\r\n- use the obtained data to create the Person object;\r\n\r\n- put the obtained Person objects into a Person\\[\\] array;\r\n\r\n- loop through an array and print out its data.\r\n\r\nOn output, the following display should be obtained for the string given as an example:\r\n\r\n- John Davidson Belgrade\r\n\r\n- Michael Barton Krakow\r\n\r\n- Ivan Perkinson Moscow\r\n\r\nThis is the main code:\r\n\r\n```\r\npublic class Program {\r\n    public static void main(String[] args) {\r\n        String text = &quot;John.Davidson/Belgrade Michael.Barton/Krakow Ivan.Perkinson/Moscow&quot;;\r\n        String[] array1 = text.split(&quot;[/. ]&quot;);\r\n        for (String s : array1) {\r\n            System.out.println(s);\r\n        }\r\n        Person[] array = new Person[3];\r\n        for  (int i=0; i &lt; 3; i++)\r\n        {\r\n            array[i] = new Person();\r\n        }\r\n        array[0] = new Person(&quot;John&quot;, &quot;Davidson&quot;,&quot;Belgrade&quot;);\r\n        array[1] = new Person(&quot;Michael&quot;, &quot;Barton&quot;, &quot;Krakow&quot;);\r\n        array[2] = new Person(&quot;Ivan&quot;, &quot;Perkinson&quot;,&quot;Moscow&quot;);\r\n        for (Person value : array) {\r\n            System.out.println(value);\r\n        }\r\n    }\r\n}\r\n```\r\n\r\nThis is the Person class:\r\n\r\n```\r\npublic class Person {\r\n    public String name;\r\n    public String surname;\r\n    public String city;\r\n    public Person(){};\r\n    public Person(String name, String surname, String city){\r\n        this.name = name;\r\n        this.surname = surname;\r\n        this.city = city;\r\n    }\r\n    public String getInfo() {\r\n        return &quot;Name: &quot; + this.name + &quot;\\n&quot; + &quot;Surname: &quot; + this.surname + &quot;\\n&quot; + &quot;City: &quot; + this.city;\r\n    }\r\n}\r\n```\r\n\r\nUnfortuntaley, the result is this:\r\n\r\nJohn\r\n\r\nDavidson\r\n\r\nBelgrade\r\n\r\nMichael\r\n\r\nBarton\r\n\r\nKrakow\r\n\r\nIvan\r\n\r\nPerkinson\r\n\r\nMoscow\r\n\r\nPerson@5f184fc6\r\n\r\nPerson@3feba861\r\n\r\nPerson@5b480cf9\r\n\r\nWhat am I doing wrong? I don&#39;t know even what the last three entries are...\r\n\r\nPS: Sorry for my bad English, not a native speaker.","title":"How can I split a string, then use the parts to create an object, and then create an array with these objects?","body":"<p>I need to solve a somewhat complicated task, but I don't seem to get it right.</p>\n<p>I have the following String:</p>\n<pre><code>String text = &quot;John.Davidson/Belgrade Michael.Barton/Krakow Ivan.Perkinson/Moscow&quot;;\n</code></pre>\n<p>In short, the program flow should be like this:</p>\n<ul>\n<li><p>split the given String into multiple parts to get first name, last name, and cities;</p>\n</li>\n<li><p>use the obtained data to create the Person object;</p>\n</li>\n<li><p>put the obtained Person objects into a Person[] array;</p>\n</li>\n<li><p>loop through an array and print out its data.</p>\n</li>\n</ul>\n<p>On output, the following display should be obtained for the string given as an example:</p>\n<ul>\n<li><p>John Davidson Belgrade</p>\n</li>\n<li><p>Michael Barton Krakow</p>\n</li>\n<li><p>Ivan Perkinson Moscow</p>\n</li>\n</ul>\n<p>This is the main code:</p>\n<pre><code>public class Program {\n    public static void main(String[] args) {\n        String text = &quot;John.Davidson/Belgrade Michael.Barton/Krakow Ivan.Perkinson/Moscow&quot;;\n        String[] array1 = text.split(&quot;[/. ]&quot;);\n        for (String s : array1) {\n            System.out.println(s);\n        }\n        Person[] array = new Person[3];\n        for  (int i=0; i &lt; 3; i++)\n        {\n            array[i] = new Person();\n        }\n        array[0] = new Person(&quot;John&quot;, &quot;Davidson&quot;,&quot;Belgrade&quot;);\n        array[1] = new Person(&quot;Michael&quot;, &quot;Barton&quot;, &quot;Krakow&quot;);\n        array[2] = new Person(&quot;Ivan&quot;, &quot;Perkinson&quot;,&quot;Moscow&quot;);\n        for (Person value : array) {\n            System.out.println(value);\n        }\n    }\n}\n</code></pre>\n<p>This is the Person class:</p>\n<pre><code>public class Person {\n    public String name;\n    public String surname;\n    public String city;\n    public Person(){};\n    public Person(String name, String surname, String city){\n        this.name = name;\n        this.surname = surname;\n        this.city = city;\n    }\n    public String getInfo() {\n        return &quot;Name: &quot; + this.name + &quot;\\n&quot; + &quot;Surname: &quot; + this.surname + &quot;\\n&quot; + &quot;City: &quot; + this.city;\n    }\n}\n</code></pre>\n<p>Unfortuntaley, the result is this:</p>\n<p>John</p>\n<p>Davidson</p>\n<p>Belgrade</p>\n<p>Michael</p>\n<p>Barton</p>\n<p>Krakow</p>\n<p>Ivan</p>\n<p>Perkinson</p>\n<p>Moscow</p>\n<p>Person@5f184fc6</p>\n<p>Person@3feba861</p>\n<p>Person@5b480cf9</p>\n<p>What am I doing wrong? I don't know even what the last three entries are...</p>\n<p>PS: Sorry for my bad English, not a native speaker.</p>\n"},{"tags":["java","nullpointerexception"],"comments":[{"owner":{"account_id":1100252,"reputation":10087,"user_id":1092818,"display_name":"crizzis"},"score":0,"creation_date":1691663393,"post_id":76874858,"comment_id":135523165,"body_markdown":"Are you, by any chance, accustomed to programming in a language that has value (stack-allocated) objects? In java, everything besides simple types has reference semantics. That is, you need to first assign `book[0] = new Book()` and `book[1] = new Book()`, otherwise they are simply `null` references.","body":"Are you, by any chance, accustomed to programming in a language that has value (stack-allocated) objects? In java, everything besides simple types has reference semantics. That is, you need to first assign <code>book[0] = new Book()</code> and <code>book[1] = new Book()</code>, otherwise they are simply <code>null</code> references."}],"answers":[{"tags":[],"owner":{"account_id":17813347,"reputation":1635,"user_id":12937443,"display_name":"DEV"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1691663881,"creation_date":1691663556,"answer_id":76874899,"question_id":76874858,"body_markdown":"You forgot to instantiate the Book object : \r\n**books[1] = new Book();**\r\n\r\n    public static void main(String[] args) {\r\n            \r\n            Book[] books = new Book[2];\r\n            \r\n            books[0] = new Book();\r\n            books[0].name = &quot;The graps&quot;;\r\n            books[0].author= &quot;Siffyu&quot;;\r\n            \r\n            books[1] = new Book();\r\n            books[1].name = &quot;Nova supreme&quot;;\r\n            books[1].author = &quot;Jagga&quot;;\r\n    \r\n            for (int i = 0; i &lt; books.length; i++) {\r\n                System.out.println(books[i].name + &quot;: &quot; + books[i].author);\r\n            }\r\n    \r\n        }","title":"NullPointerException inside main()","body":"<p>You forgot to instantiate the Book object :\n<strong>books[1] = new Book();</strong></p>\n<pre><code>public static void main(String[] args) {\n        \n        Book[] books = new Book[2];\n        \n        books[0] = new Book();\n        books[0].name = &quot;The graps&quot;;\n        books[0].author= &quot;Siffyu&quot;;\n        \n        books[1] = new Book();\n        books[1].name = &quot;Nova supreme&quot;;\n        books[1].author = &quot;Jagga&quot;;\n\n        for (int i = 0; i &lt; books.length; i++) {\n            System.out.println(books[i].name + &quot;: &quot; + books[i].author);\n        }\n\n    }\n</code></pre>\n"}],"owner":{"account_id":28867804,"reputation":1,"user_id":22110150,"display_name":"Vijay"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":48,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"closed_date":1691663621,"answer_count":1,"score":-1,"last_activity_date":1691663881,"creation_date":1691663164,"question_id":76874858,"body_markdown":"```java\r\nclass Book {\r\n    String name;\r\n    String author; \r\n}\r\n```\r\n\r\n```java\r\nclass BookTest {\r\n\r\n    public static void main(String[] args) {\r\n         \r\n        Book[] books = new Book[2];\r\n\r\n        books[0].name = &quot;The graps&quot;;\r\n        books[0].author = &quot;Siffyu&quot;;\r\n        \r\n        \r\n        books[1].name = &quot;Nova supreme&quot;;\r\n        books[1].author = &quot;Jagga&quot;;\r\n\r\n        for (int i = 0; i &lt; books.length; i++) {\r\n            System.out.println(books[i].name + &quot;: &quot; + books[i].author);\r\n        }\r\n\r\n    }\r\n}\r\n```\r\n\r\nI tried creating an array that can hold Book type object. Once I created the array, I then initialized the book objects inside the array and tried to print them. I got NullPointerException instead. ","title":"NullPointerException inside main()","body":"<pre class=\"lang-java prettyprint-override\"><code>class Book {\n    String name;\n    String author; \n}\n</code></pre>\n<pre class=\"lang-java prettyprint-override\"><code>class BookTest {\n\n    public static void main(String[] args) {\n         \n        Book[] books = new Book[2];\n\n        books[0].name = &quot;The graps&quot;;\n        books[0].author = &quot;Siffyu&quot;;\n        \n        \n        books[1].name = &quot;Nova supreme&quot;;\n        books[1].author = &quot;Jagga&quot;;\n\n        for (int i = 0; i &lt; books.length; i++) {\n            System.out.println(books[i].name + &quot;: &quot; + books[i].author);\n        }\n\n    }\n}\n</code></pre>\n<p>I tried creating an array that can hold Book type object. Once I created the array, I then initialized the book objects inside the array and tried to print them. I got NullPointerException instead.</p>\n"},{"tags":["java","spring-boot","mongodb-query","repository"],"owner":{"account_id":29191580,"reputation":11,"user_id":22363603,"display_name":"Kajal Juwar"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":12,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1691663835,"creation_date":1691663457,"question_id":76874887,"body_markdown":"I want to update some rows in my mongo document based on some criteria\r\n\r\n        @Query(&quot;{&#39;ao.status&#39;: ?0, &#39;ao.otp_type&#39;: ?1}&quot;)\r\n    &#160; &#160; void updateOtpStatus(String otpStatus, String otpType);\r\n    &#160; &#160; \r\n    &#160; &#160; @Query(value=&quot;{&#39;status&#39;: ?0, &#39;otp_type&#39;: ?1,&#39;user_id&#39;:?2}&quot;)\r\n    &#160; &#160; AuthOtpModel getActivOtp(String userId, String otpStatus, String otpType);\r\n    &#160; &#160; \r\n    &#160; &#160; @Query(value = &quot;{otp:?0,status:?1,otp_type:?2}&quot;)\r\n    &#160; &#160; Date getOtpCreatedAt(String ActiveOtp, String otpStatus, String otpType);\r\n\r\nthese are the queries or code that i have tried ","title":"Ran Mongo queries in repo interface in spring boot app the query is not giving any error but the output is null","body":"<p>I want to update some rows in my mongo document based on some criteria</p>\n<pre><code>    @Query(&quot;{'ao.status': ?0, 'ao.otp_type': ?1}&quot;)\n    void updateOtpStatus(String otpStatus, String otpType);\n    \n    @Query(value=&quot;{'status': ?0, 'otp_type': ?1,'user_id':?2}&quot;)\n    AuthOtpModel getActivOtp(String userId, String otpStatus, String otpType);\n    \n    @Query(value = &quot;{otp:?0,status:?1,otp_type:?2}&quot;)\n    Date getOtpCreatedAt(String ActiveOtp, String otpStatus, String otpType);\n</code></pre>\n<p>these are the queries or code that i have tried</p>\n"},{"tags":["java","arrays","game-development","do-while"],"answers":[{"tags":[],"owner":{"account_id":21403805,"reputation":11,"user_id":15765380,"display_name":"ayush-sarda"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1691663710,"creation_date":1691663710,"answer_id":76874919,"question_id":76874580,"body_markdown":"The problem is actually two fold.&lt;br/&gt;\r\nFirst, `do while` block first executes the entire body of `do` statement and then checks for the condition in the `while` statement. There is `for` loop inside the `do` block, which will run to its entirety and then the `while` loop&#39;s condition will be evaluated. Because of this `for` loop you are unable to exit the game when user has guessed the word correctly.&lt;br/&gt;\r\nSecond, the exit condition in while block is also incorrect. It will continue to run until both the conditions, `attempts&lt;maxattempts` and `!checkIfCorrect` evaluates to false. What you want is to exit the block once either one of the condition fails. Basically it should be replaced with `attempts &lt; maxattempts &amp;&amp; !checkifcorrect`&lt;br/&gt;\r\nHere&#39;s the modified `do while` block of code&lt;br/&gt;\r\n```\r\ndo {\r\n    guess = sc.next().charAt(0);\r\n    boolean correct = false;\r\n\r\n    for (int j = 0; j &lt; numletters; j++) {\r\n        if (randomword.charAt(j) == guess) {\r\n            guessedLetters[j] = guess;\r\n            correct = true;\r\n        }\r\n    }\r\n    if (correct == true) {\r\n        System.out.println(&quot;correct guess! well done&quot;);\r\n        System.out.println(guessedLetters);\r\n    } else {\r\n        System.out.println(&quot;incorrect guess :((((&quot;);\r\n    }\r\n    attempts++;\r\n\r\n    checkifcorrect = m.checking(numletters, randomword, guessedLetters);\r\n} while (attempts &lt; maxattempts &amp;&amp; !checkifcorrect);\r\n```","title":"How can I get my program to stop looping after a user correctly guessed the hangman in under 18 tries?","body":"<p>The problem is actually two fold.<br/>\nFirst, <code>do while</code> block first executes the entire body of <code>do</code> statement and then checks for the condition in the <code>while</code> statement. There is <code>for</code> loop inside the <code>do</code> block, which will run to its entirety and then the <code>while</code> loop's condition will be evaluated. Because of this <code>for</code> loop you are unable to exit the game when user has guessed the word correctly.<br/>\nSecond, the exit condition in while block is also incorrect. It will continue to run until both the conditions, <code>attempts&lt;maxattempts</code> and <code>!checkIfCorrect</code> evaluates to false. What you want is to exit the block once either one of the condition fails. Basically it should be replaced with <code>attempts &lt; maxattempts &amp;&amp; !checkifcorrect</code><br/>\nHere's the modified <code>do while</code> block of code<br/></p>\n<pre><code>do {\n    guess = sc.next().charAt(0);\n    boolean correct = false;\n\n    for (int j = 0; j &lt; numletters; j++) {\n        if (randomword.charAt(j) == guess) {\n            guessedLetters[j] = guess;\n            correct = true;\n        }\n    }\n    if (correct == true) {\n        System.out.println(&quot;correct guess! well done&quot;);\n        System.out.println(guessedLetters);\n    } else {\n        System.out.println(&quot;incorrect guess :((((&quot;);\n    }\n    attempts++;\n\n    checkifcorrect = m.checking(numletters, randomword, guessedLetters);\n} while (attempts &lt; maxattempts &amp;&amp; !checkifcorrect);\n</code></pre>\n"}],"owner":{"account_id":29198326,"reputation":1,"user_id":22368967,"display_name":"Catriona"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":40,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1691663729,"creation_date":1691661069,"question_id":76874580,"body_markdown":"I made a simple hangman game in java, and in my do while loop, I wanted the loop to stop when the user either guessed the word correctly in under 18 tries, or if the word wasnt correctly guessed in 18 tries. however, if my word has been guessed before the 18 attempts are up, the loop keeps on running until the 18 tries have been used up. what can I do to fix this please?\r\n\r\nthis is my main program:\r\n\r\n```\r\nimport java.util.Scanner;\r\npublic class hangman{\r\n    public static void main (String args[]){\r\n        hangmanMethods m = new hangmanMethods();\r\n        Scanner sc = new Scanner (System.in);\r\n        String[]words = new String[20];\r\n        String name;\r\n        char guess;\r\n        int option;\r\n        boolean checkifcorrect;\r\n        System.out.println(&quot;Welcome to hangman! \\nWhat is your name?&quot;);\r\n        name=sc.nextLine();\r\n\r\n        if (name.equals(&quot;diane&quot;))\r\n            System.out.println(&quot;hello diane. happy birthday :)&quot;);\r\n        else System.out.println(&quot;hello &quot; +name);\r\n        System.out.println(&quot;please press 1 to start playing&quot;);\r\n        option=sc.nextInt();\r\n        switch(option){\r\n            case 1: m.hangmanwords();\r\n                String randomword = m.generateword();\r\n                int numletters = m.countletters(randomword);\r\n\r\n                System.out.println(&quot;lets play hangman. a random word has been generated and has &quot; +numletters+ &quot; letters. you have 18 guesses. choose a letter to start.&quot;);\r\n\r\n                char[] guessedLetters = new char[numletters];\r\n                for (int i = 0; i &lt; numletters; i++) {\r\n                    guessedLetters[i] = &#39;_&#39;;\r\n                }\r\n\r\n                System.out.println(guessedLetters);\r\n                int maxattempts = 18;\r\n                int attempts = 0;\r\n\r\n                do{\r\n                    for (int i = 0; i &lt;18; i++) {\r\n                        guess = sc.next().charAt(0);\r\n                        boolean correct = false;\r\n\r\n                        for (int j = 0; j &lt; numletters; j++) {\r\n                            if (randomword.charAt(j) == guess) {\r\n                                guessedLetters[j] = guess;\r\n                                correct = true;\r\n                            }\r\n                        }\r\n                        if (correct == true) {\r\n                            System.out.println(&quot;correct guess! well done&quot;);\r\n                            System.out.println(guessedLetters);\r\n                        } else {\r\n                            System.out.println(&quot;incorrect guess :((((&quot;);\r\n                        }\r\n                        attempts++;\r\n                    }\r\n                    \r\n                    checkifcorrect = m.checking(numletters, randomword, guessedLetters);\r\n                }while (attempts&lt;maxattempts || !checkifcorrect );\r\n                \r\n                if (attempts&lt;maxattempts &amp;&amp; checkifcorrect==true )\r\n                    System.out.println(&quot;yayyyy you got the word ♥♥♥♥&quot;+&quot; would you like to play again? input 1 to continue or 2 to exit :)&quot;);\r\n                else System.out.println(&quot;you used up all of your guesses :(( the word was &quot; +randomword+ &quot;. would you like to play again? press 1 to continue or 2 to exit&quot;);\r\n                option=sc.nextInt();\r\n                break; \r\n            case 2: System.out.println(&quot;thanks for playing&quot;);\r\n                break;\r\n        }\r\n    }\r\n}\r\n```\r\n\r\nand this is my methods class:\r\n\r\n```\r\nimport java.util.Scanner;\r\npublic class hangmanMethods{\r\n    private String[]words = new String[20];\r\n    Scanner sc = new Scanner (System.in);\r\n\r\n    public void setArray (String[] numbers) {\r\n        this.words = words;\r\n    }  \r\n\r\n    public String[] getArray () {\r\n        return words;\r\n    }\r\n\r\n    public void hangmanwords(){   \r\n        //initialising the words \r\n        words[0]= &quot;sushi&quot;;\r\n        words[1]= &quot;korea&quot;;\r\n        words[2]= &quot;computing&quot;;\r\n        words[3]= &quot;caty&quot;;\r\n        words[4]= &quot;thomas&quot;;\r\n        words[5]= &quot;winter&quot;;\r\n        words[6]= &quot;chocolate&quot;;\r\n        words[7]= &quot;kimchi&quot;;\r\n        words[8]= &quot;rain&quot;;\r\n        words[9]= &quot;plants&quot;;\r\n        words[10]= &quot;kinnie&quot;;\r\n        words[11]= &quot;strawberries&quot;;\r\n        words[12]= &quot;raptures&quot;;\r\n        words[13]= &quot;pacman&quot;;\r\n        words[14]= &quot;coldplay&quot;;\r\n        words[15]= &quot;asos&quot;;\r\n        words[16]= &quot;shopping&quot;;\r\n        words[17]= &quot;tkmaxx&quot;;\r\n        words[18]= &quot;flamingo&quot;;\r\n        words[19]= &quot;blue&quot;;\r\n\r\n    }\r\n\r\n    public String generateword() {\r\n        int randomlocation = (int) (Math.random() * 19); \r\n        String randomWord = words[randomlocation];\r\n        return randomWord;\r\n    }\r\n\r\n    public int countletters(String word) {\r\n        return word.length();\r\n    }\r\n\r\n    public boolean checking (int numletters, String randomword, char[] guessedLetters) {\r\n        boolean checkcorrect = true;\r\n        for( int i = 0; i&lt;numletters; i++){\r\n            if (guessedLetters[i] != randomword.charAt(i))\r\n                checkcorrect = false;\r\n\r\n            break;}\r\n        return checkcorrect;\r\n    }\r\n}\r\n```\r\n\r\n","title":"How can I get my program to stop looping after a user correctly guessed the hangman in under 18 tries?","body":"<p>I made a simple hangman game in java, and in my do while loop, I wanted the loop to stop when the user either guessed the word correctly in under 18 tries, or if the word wasnt correctly guessed in 18 tries. however, if my word has been guessed before the 18 attempts are up, the loop keeps on running until the 18 tries have been used up. what can I do to fix this please?</p>\n<p>this is my main program:</p>\n<pre><code>import java.util.Scanner;\npublic class hangman{\n    public static void main (String args[]){\n        hangmanMethods m = new hangmanMethods();\n        Scanner sc = new Scanner (System.in);\n        String[]words = new String[20];\n        String name;\n        char guess;\n        int option;\n        boolean checkifcorrect;\n        System.out.println(&quot;Welcome to hangman! \\nWhat is your name?&quot;);\n        name=sc.nextLine();\n\n        if (name.equals(&quot;diane&quot;))\n            System.out.println(&quot;hello diane. happy birthday :)&quot;);\n        else System.out.println(&quot;hello &quot; +name);\n        System.out.println(&quot;please press 1 to start playing&quot;);\n        option=sc.nextInt();\n        switch(option){\n            case 1: m.hangmanwords();\n                String randomword = m.generateword();\n                int numletters = m.countletters(randomword);\n\n                System.out.println(&quot;lets play hangman. a random word has been generated and has &quot; +numletters+ &quot; letters. you have 18 guesses. choose a letter to start.&quot;);\n\n                char[] guessedLetters = new char[numletters];\n                for (int i = 0; i &lt; numletters; i++) {\n                    guessedLetters[i] = '_';\n                }\n\n                System.out.println(guessedLetters);\n                int maxattempts = 18;\n                int attempts = 0;\n\n                do{\n                    for (int i = 0; i &lt;18; i++) {\n                        guess = sc.next().charAt(0);\n                        boolean correct = false;\n\n                        for (int j = 0; j &lt; numletters; j++) {\n                            if (randomword.charAt(j) == guess) {\n                                guessedLetters[j] = guess;\n                                correct = true;\n                            }\n                        }\n                        if (correct == true) {\n                            System.out.println(&quot;correct guess! well done&quot;);\n                            System.out.println(guessedLetters);\n                        } else {\n                            System.out.println(&quot;incorrect guess :((((&quot;);\n                        }\n                        attempts++;\n                    }\n                    \n                    checkifcorrect = m.checking(numletters, randomword, guessedLetters);\n                }while (attempts&lt;maxattempts || !checkifcorrect );\n                \n                if (attempts&lt;maxattempts &amp;&amp; checkifcorrect==true )\n                    System.out.println(&quot;yayyyy you got the word ♥♥♥♥&quot;+&quot; would you like to play again? input 1 to continue or 2 to exit :)&quot;);\n                else System.out.println(&quot;you used up all of your guesses :(( the word was &quot; +randomword+ &quot;. would you like to play again? press 1 to continue or 2 to exit&quot;);\n                option=sc.nextInt();\n                break; \n            case 2: System.out.println(&quot;thanks for playing&quot;);\n                break;\n        }\n    }\n}\n</code></pre>\n<p>and this is my methods class:</p>\n<pre><code>import java.util.Scanner;\npublic class hangmanMethods{\n    private String[]words = new String[20];\n    Scanner sc = new Scanner (System.in);\n\n    public void setArray (String[] numbers) {\n        this.words = words;\n    }  \n\n    public String[] getArray () {\n        return words;\n    }\n\n    public void hangmanwords(){   \n        //initialising the words \n        words[0]= &quot;sushi&quot;;\n        words[1]= &quot;korea&quot;;\n        words[2]= &quot;computing&quot;;\n        words[3]= &quot;caty&quot;;\n        words[4]= &quot;thomas&quot;;\n        words[5]= &quot;winter&quot;;\n        words[6]= &quot;chocolate&quot;;\n        words[7]= &quot;kimchi&quot;;\n        words[8]= &quot;rain&quot;;\n        words[9]= &quot;plants&quot;;\n        words[10]= &quot;kinnie&quot;;\n        words[11]= &quot;strawberries&quot;;\n        words[12]= &quot;raptures&quot;;\n        words[13]= &quot;pacman&quot;;\n        words[14]= &quot;coldplay&quot;;\n        words[15]= &quot;asos&quot;;\n        words[16]= &quot;shopping&quot;;\n        words[17]= &quot;tkmaxx&quot;;\n        words[18]= &quot;flamingo&quot;;\n        words[19]= &quot;blue&quot;;\n\n    }\n\n    public String generateword() {\n        int randomlocation = (int) (Math.random() * 19); \n        String randomWord = words[randomlocation];\n        return randomWord;\n    }\n\n    public int countletters(String word) {\n        return word.length();\n    }\n\n    public boolean checking (int numletters, String randomword, char[] guessedLetters) {\n        boolean checkcorrect = true;\n        for( int i = 0; i&lt;numletters; i++){\n            if (guessedLetters[i] != randomword.charAt(i))\n                checkcorrect = false;\n\n            break;}\n        return checkcorrect;\n    }\n}\n</code></pre>\n"},{"tags":["java","spring","spring-mvc","velocity"],"answers":[{"tags":[],"owner":{"account_id":1096470,"reputation":26066,"user_id":1089967,"accept_rate":59,"display_name":"lance-java"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691577422,"creation_date":1691577422,"answer_id":76866935,"question_id":76866825,"body_markdown":"If your template is on the classpath as `com/app/application/notification/template/en/newuserpassword.html`\r\n\r\nAnd you are asking velocity to find `en/newuserpassword.html`\r\n\r\nThen your template location should be `com/app/application/notification/template`\r\n\r\nInstead of `com/app/application/notification/notifications`\r\n","title":"resource not found - unable to find resource with velocity","body":"<p>If your template is on the classpath as <code>com/app/application/notification/template/en/newuserpassword.html</code></p>\n<p>And you are asking velocity to find <code>en/newuserpassword.html</code></p>\n<p>Then your template location should be <code>com/app/application/notification/template</code></p>\n<p>Instead of <code>com/app/application/notification/notifications</code></p>\n"},{"tags":[],"owner":{"account_id":23171414,"reputation":195,"user_id":17270610,"display_name":"dynamo"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691663512,"creation_date":1691663512,"answer_id":76874896,"question_id":76866825,"body_markdown":"this was a dumb fault on my behalf but hopefully it may highlight issues to anyone in the future reading this.\r\n\r\nmy notificaitons config referenced to a velocity properties which was pointing to the auditing templates. It was so blatantly obvious that i didnt even notice it. \r\n\r\n    &lt;util:properties id=&quot;velocityPropertiesNotifications&quot;&gt;\r\n        &lt;prop key=&quot;resource.loader&quot;&gt;file&lt;/prop&gt;\r\n        &lt;prop key=&quot;file.resource.loader.class&quot;&gt;org.apache.velocity.runtime.resource.loader.FileResourceLoader&lt;/prop&gt;\r\n        &lt;prop key=&quot;file.resource.loader.cache&quot;&gt;true&lt;/prop&gt;\r\n        &lt;prop key=&quot;file.resource.loader.path&quot;&gt;C:/Program Files/Apache Software Foundation/Tomcat 9.0_Tomcat9.0.76/webapps/my-app/WEB-INF/classes/com/application/notification/templates&lt;/prop&gt;\r\n    &lt;/util:properties&gt; \r\n\r\ni just added a new properties which pointed at the right directory where my templates are stored - this resolved the not found error.","title":"resource not found - unable to find resource with velocity","body":"<p>this was a dumb fault on my behalf but hopefully it may highlight issues to anyone in the future reading this.</p>\n<p>my notificaitons config referenced to a velocity properties which was pointing to the auditing templates. It was so blatantly obvious that i didnt even notice it.</p>\n<pre><code>&lt;util:properties id=&quot;velocityPropertiesNotifications&quot;&gt;\n    &lt;prop key=&quot;resource.loader&quot;&gt;file&lt;/prop&gt;\n    &lt;prop key=&quot;file.resource.loader.class&quot;&gt;org.apache.velocity.runtime.resource.loader.FileResourceLoader&lt;/prop&gt;\n    &lt;prop key=&quot;file.resource.loader.cache&quot;&gt;true&lt;/prop&gt;\n    &lt;prop key=&quot;file.resource.loader.path&quot;&gt;C:/Program Files/Apache Software Foundation/Tomcat 9.0_Tomcat9.0.76/webapps/my-app/WEB-INF/classes/com/application/notification/templates&lt;/prop&gt;\n&lt;/util:properties&gt; \n</code></pre>\n<p>i just added a new properties which pointed at the right directory where my templates are stored - this resolved the not found error.</p>\n"}],"owner":{"account_id":23171414,"reputation":195,"user_id":17270610,"display_name":"dynamo"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":43,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1691663512,"creation_date":1691576657,"question_id":76866825,"body_markdown":"Unsure why i am getting this error - i can&#39;t see what is wrong with my config. \r\n\r\nthe reference to what file to use is in the notification.properties file which is referenced in my config:\r\n\r\n&gt;classpath:com/app/application/notification/notifications\r\n\r\nmy app runs fine and looks inside the notificaitons.properties file for new.user.password.template=en/newuserpassword.html\r\n\r\nI have debugged it and it is finding &#39;en/newuserpassword.html&#39; fine but then it cant find the actual file itself.\r\n\r\ni have checked and the file is definetly there - exactly matches but just can&#39;t find it:\r\n\r\n&gt;resources/com/app/application/notification/template/en/newuserpassword.html\r\n\r\n&gt;org.apache.velocity.exception.ResourceNotFoundException: Unable to find resource &#39;en/newuserpassword.html&#39;\r\n\tat org.apache.velocity.runtime.resource.ResourceManagerImpl.loadResource(ResourceManagerImpl.java:474)\r\n\tat org.apache.velocity.runtime.resource.ResourceManagerImpl.getResource(ResourceManagerImpl.java:352)\r\n\tat org.apache.velocity.runtime.RuntimeInstance.getTemplate(RuntimeInstance.java:1533)\r\n\tat org.apache.velocity.app.VelocityEngine.mergeTemplate(VelocityEngine.java:343)\r\n\tat org.apache.velocity.app.VelocityEngine.mergeTemplate(VelocityEngine.java:320)\r\n\r\n``` \r\n &lt;bean id=&quot;notificationResolver&quot; class=&quot;com..application.notification.resolver.VelocityNotificationResolver&quot;&gt;\r\n        &lt;constructor-arg&gt;\r\n            &lt;bean class=&quot;com.amor.hcplus.application.util.spring.context.TypeConvertingReloadableResourceBundleMessageSource&quot;&gt;\r\n\t\t\t\t&lt;property name=&quot;cacheSeconds&quot; value=&quot;60&quot; /&gt;\r\n\t\t\t\t&lt;property name=&quot;basenames&quot;&gt;\r\n\t\t\t\t\t&lt;list&gt;\r\n\t\t\t\t\t\t&lt;value&gt;classpath:com/app/application/notification/notifications&lt;/value&gt;\r\n           \t\t\t\t&lt;value&gt;WEB-INF/spring/i18n/enums&lt;/value&gt;\r\n\t\t\t\t\t&lt;/list&gt;\r\n\t\t\t\t&lt;/property&gt;\r\n\t\t\t&lt;/bean&gt;\r\n        &lt;/constructor-arg&gt;\r\n        &lt;constructor-arg&gt;\r\n            &lt;bean id=&quot;velocityEngine&quot; class=&quot;org.apache.velocity.app.VelocityEngine&quot;&gt;\r\n                &lt;constructor-arg ref=&quot;velocityProperties&quot;/&gt;\r\n            &lt;/bean&gt;\r\n        &lt;/constructor-arg&gt;\r\n    &lt;/bean&gt;\r\n ```\r\n\r\ni have a similar setup for auditing messages which works fine and the templates are found \r\n```\r\n\t&lt;bean id=&quot;auditMessageResolver&quot; class=&quot;com.amor.hcplus.application.audit.domain.VelocityAuditMessageResolver&quot;&gt;\r\n\t\t&lt;constructor-arg&gt;\r\n\t\t\t&lt;bean class=&quot;com.application.util.spring.context.TypeConvertingReloadableResourceBundleMessageSource&quot;&gt;\r\n\t\t\t\t&lt;property name=&quot;basenames&quot;&gt;\r\n\t\t\t\t\t&lt;list&gt;\r\n\t\t\t\t\t\t&lt;value&gt;WEB-INF/spring/i18n/enums&lt;/value&gt;\r\n\t\t\t\t\t\t&lt;value&gt;classpath:com/app/application/audit/auditing&lt;/value&gt;\r\n\t\t\t\t\t&lt;/list&gt;\r\n\t\t\t\t&lt;/property&gt;\r\n\t\t\t&lt;/bean&gt;\r\n\t\t&lt;/constructor-arg&gt;\r\n        &lt;constructor-arg&gt;\r\n            &lt;bean id=&quot;velocityEngine&quot; class=&quot;org.apache.velocity.app.VelocityEngine&quot;&gt;\r\n                &lt;constructor-arg ref=&quot;velocityProperties&quot;/&gt;\r\n            &lt;/bean&gt;\r\n        &lt;/constructor-arg&gt;\r\n\t&lt;/bean&gt;\r\n```\r\n","title":"resource not found - unable to find resource with velocity","body":"<p>Unsure why i am getting this error - i can't see what is wrong with my config.</p>\n<p>the reference to what file to use is in the notification.properties file which is referenced in my config:</p>\n<blockquote>\n<p>classpath:com/app/application/notification/notifications</p>\n</blockquote>\n<p>my app runs fine and looks inside the notificaitons.properties file for new.user.password.template=en/newuserpassword.html</p>\n<p>I have debugged it and it is finding 'en/newuserpassword.html' fine but then it cant find the actual file itself.</p>\n<p>i have checked and the file is definetly there - exactly matches but just can't find it:</p>\n<blockquote>\n<p>resources/com/app/application/notification/template/en/newuserpassword.html</p>\n</blockquote>\n<blockquote>\n<p>org.apache.velocity.exception.ResourceNotFoundException: Unable to find resource 'en/newuserpassword.html'\nat org.apache.velocity.runtime.resource.ResourceManagerImpl.loadResource(ResourceManagerImpl.java:474)\nat org.apache.velocity.runtime.resource.ResourceManagerImpl.getResource(ResourceManagerImpl.java:352)\nat org.apache.velocity.runtime.RuntimeInstance.getTemplate(RuntimeInstance.java:1533)\nat org.apache.velocity.app.VelocityEngine.mergeTemplate(VelocityEngine.java:343)\nat org.apache.velocity.app.VelocityEngine.mergeTemplate(VelocityEngine.java:320)</p>\n</blockquote>\n<pre><code> &lt;bean id=&quot;notificationResolver&quot; class=&quot;com..application.notification.resolver.VelocityNotificationResolver&quot;&gt;\n        &lt;constructor-arg&gt;\n            &lt;bean class=&quot;com.amor.hcplus.application.util.spring.context.TypeConvertingReloadableResourceBundleMessageSource&quot;&gt;\n                &lt;property name=&quot;cacheSeconds&quot; value=&quot;60&quot; /&gt;\n                &lt;property name=&quot;basenames&quot;&gt;\n                    &lt;list&gt;\n                        &lt;value&gt;classpath:com/app/application/notification/notifications&lt;/value&gt;\n                        &lt;value&gt;WEB-INF/spring/i18n/enums&lt;/value&gt;\n                    &lt;/list&gt;\n                &lt;/property&gt;\n            &lt;/bean&gt;\n        &lt;/constructor-arg&gt;\n        &lt;constructor-arg&gt;\n            &lt;bean id=&quot;velocityEngine&quot; class=&quot;org.apache.velocity.app.VelocityEngine&quot;&gt;\n                &lt;constructor-arg ref=&quot;velocityProperties&quot;/&gt;\n            &lt;/bean&gt;\n        &lt;/constructor-arg&gt;\n    &lt;/bean&gt;\n</code></pre>\n<p>i have a similar setup for auditing messages which works fine and the templates are found</p>\n<pre><code>    &lt;bean id=&quot;auditMessageResolver&quot; class=&quot;com.amor.hcplus.application.audit.domain.VelocityAuditMessageResolver&quot;&gt;\n        &lt;constructor-arg&gt;\n            &lt;bean class=&quot;com.application.util.spring.context.TypeConvertingReloadableResourceBundleMessageSource&quot;&gt;\n                &lt;property name=&quot;basenames&quot;&gt;\n                    &lt;list&gt;\n                        &lt;value&gt;WEB-INF/spring/i18n/enums&lt;/value&gt;\n                        &lt;value&gt;classpath:com/app/application/audit/auditing&lt;/value&gt;\n                    &lt;/list&gt;\n                &lt;/property&gt;\n            &lt;/bean&gt;\n        &lt;/constructor-arg&gt;\n        &lt;constructor-arg&gt;\n            &lt;bean id=&quot;velocityEngine&quot; class=&quot;org.apache.velocity.app.VelocityEngine&quot;&gt;\n                &lt;constructor-arg ref=&quot;velocityProperties&quot;/&gt;\n            &lt;/bean&gt;\n        &lt;/constructor-arg&gt;\n    &lt;/bean&gt;\n</code></pre>\n"},{"tags":["java","android","facebook"],"owner":{"account_id":10697707,"reputation":21,"user_id":7874196,"display_name":"Yousaf"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":57,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1691663330,"creation_date":1511936379,"question_id":47546282,"body_markdown":"Here is my code \r\nthis function is creating fitness metrics.  \r\n\r\n    protected ArrayList&lt;ShareOpenGraphObject&gt; \r\n\r\n    \r\n    setPathToPostToFacebook(ArrayList&lt;Location&gt; locations){\r\n\r\n        ArrayList&lt;ShareOpenGraphObject&gt; metrics = new ArrayList&lt;&gt;();\r\n\r\n        for(Location location : locations){\r\n            ShareOpenGraphObject.Builder metric = new ShareOpenGraphObject.Builder();\r\n\r\n            metric.putDouble(&quot;fitness:metrics:location:latitude&quot;, location.getLatitude());\r\n            metric.putDouble(&quot;fitness:metrics:location:longitude&quot;,location.getLongitude());\r\n            metric.putDouble(&quot;fitness:metrics:location:altitude&quot;,location.getAltitude());\r\n            metric.putString(&quot;fitness:metrics:timestamp&quot;,new Timestamp(System.currentTimeMillis()).toString());\r\n            metric.putInt(&quot;fitness:metrics:calories&quot;,5);\r\n            metric.putDouble(&quot;fitness:metrics:distance:value&quot;,50);\r\n            metric.putString(&quot;fitness:metrics:distance:units&quot;,&quot;km&quot;);\r\n            metric.putInt(&quot;fitness:metrics:steps&quot;,100);\r\n            metric.putDouble(&quot;fitness:metrics:speed:value&quot;,50);\r\n            metric.putString(&quot;fitness:metrics:speed:units&quot;,&quot;m&quot;);\r\n            metrics.add(metric.build());//////\r\n       }\r\n       return metrics;\r\n    }\r\n\r\n\r\n\r\nAnd this is the rest of the content.\r\n\r\n    ShareOpenGraphObject.Builder object = new ShareOpenGraphObject.Builder()\r\n                .putString(&quot;og:type&quot;, &quot;fitness.course&quot;)\r\n                .putString(&quot;og:title&quot;, &quot;Sample Course&quot;)\r\n                .putString(&quot;og:description&quot;, &quot;This is a sample course.&quot;)\r\n                .putInt(&quot;fitness:duration:value&quot;, 100)\r\n                .putString(&quot;fitness:duration:units&quot;, &quot;s&quot;)\r\n                .putInt(&quot;fitness:distance:value&quot;, 12)\r\n                .putString(&quot;fitness:distance:units&quot;, &quot;km&quot;)\r\n                .putInt(&quot;fitness:speed:value&quot;, 5)\r\n                .putObjectArrayList(&quot;fitness:metrics&quot;,metrics);\r\n\r\n\r\n\r\n        ShareOpenGraphAction action = new ShareOpenGraphAction.Builder()\r\n                .setActionType(&quot;fitness.runs&quot;)\r\n                .putObject(&quot;fitness:course&quot;, object.build())\r\n                .putString(&quot;fitness:start_time&quot;, FitnessModel.START_TIME)//.putPhoto(&quot;image&quot;,photo)\r\n                .putString(&quot;fitness:end_time&quot;,new Timestamp(System.currentTimeMillis()).toString())\r\n                .build();\r\n        ShareOpenGraphContent content = new ShareOpenGraphContent.Builder()\r\n                .setPreviewPropertyName(&quot;fitness:course&quot;)\r\n                .setAction(action)\r\n                .build();\r\nI have already asked this question twice on facebook&#39;s official developers page but there are too many question that they can answer at a time. I would really appreciate it if someone would answer this.\r\n\r\n        \r\n","title":"How to construct facebook open graph fitness metrics on android","body":"<p>Here is my code \nthis function is creating fitness metrics.  </p>\n\n<pre><code>protected ArrayList&lt;ShareOpenGraphObject&gt; \n\n\nsetPathToPostToFacebook(ArrayList&lt;Location&gt; locations){\n\n    ArrayList&lt;ShareOpenGraphObject&gt; metrics = new ArrayList&lt;&gt;();\n\n    for(Location location : locations){\n        ShareOpenGraphObject.Builder metric = new ShareOpenGraphObject.Builder();\n\n        metric.putDouble(\"fitness:metrics:location:latitude\", location.getLatitude());\n        metric.putDouble(\"fitness:metrics:location:longitude\",location.getLongitude());\n        metric.putDouble(\"fitness:metrics:location:altitude\",location.getAltitude());\n        metric.putString(\"fitness:metrics:timestamp\",new Timestamp(System.currentTimeMillis()).toString());\n        metric.putInt(\"fitness:metrics:calories\",5);\n        metric.putDouble(\"fitness:metrics:distance:value\",50);\n        metric.putString(\"fitness:metrics:distance:units\",\"km\");\n        metric.putInt(\"fitness:metrics:steps\",100);\n        metric.putDouble(\"fitness:metrics:speed:value\",50);\n        metric.putString(\"fitness:metrics:speed:units\",\"m\");\n        metrics.add(metric.build());//////\n   }\n   return metrics;\n}\n</code></pre>\n\n<p>And this is the rest of the content.</p>\n\n<pre><code>ShareOpenGraphObject.Builder object = new ShareOpenGraphObject.Builder()\n            .putString(\"og:type\", \"fitness.course\")\n            .putString(\"og:title\", \"Sample Course\")\n            .putString(\"og:description\", \"This is a sample course.\")\n            .putInt(\"fitness:duration:value\", 100)\n            .putString(\"fitness:duration:units\", \"s\")\n            .putInt(\"fitness:distance:value\", 12)\n            .putString(\"fitness:distance:units\", \"km\")\n            .putInt(\"fitness:speed:value\", 5)\n            .putObjectArrayList(\"fitness:metrics\",metrics);\n\n\n\n    ShareOpenGraphAction action = new ShareOpenGraphAction.Builder()\n            .setActionType(\"fitness.runs\")\n            .putObject(\"fitness:course\", object.build())\n            .putString(\"fitness:start_time\", FitnessModel.START_TIME)//.putPhoto(\"image\",photo)\n            .putString(\"fitness:end_time\",new Timestamp(System.currentTimeMillis()).toString())\n            .build();\n    ShareOpenGraphContent content = new ShareOpenGraphContent.Builder()\n            .setPreviewPropertyName(\"fitness:course\")\n            .setAction(action)\n            .build();\n</code></pre>\n\n<p>I have already asked this question twice on facebook's official developers page but there are too many question that they can answer at a time. I would really appreciate it if someone would answer this.</p>\n"},{"tags":["java","spring","spring-boot","slf4j","spring-cloud-feign"],"owner":{"account_id":19895669,"reputation":1,"user_id":14576822,"display_name":"caovv"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":26,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1691663176,"creation_date":1691662787,"question_id":76874812,"body_markdown":"Why in the logs printed in the console, only the spring-related logs conform to the format I defined, and other logs (such as alibaba nacos, hikari datasource or the logs output by myself in the code) do not conform to the format I defined:\r\n[![console log snapshot][1]][1]\r\n\r\nI have tried to exclusion logback dependency in my project.\r\n\r\nMy log format is as follows:\r\n```\r\n&lt;Property name=&quot;TRACE&quot;&gt;\r\n            [${APP_NAME}, %X{traceId}, %X{spanId}, %X{spanExportable}, %X{EagleEye-TraceID}]\r\n        &lt;/Property&gt;\r\n        &lt;property name=&quot;CONSOLE_LOG_PATTERN_MESSAGE&quot;&gt;\r\n            %clr{${sys:PID}}{magenta} %clr{---}{faint} %clr{%-40.40c{1.}}{cyan} : %m%n${sys:EXCEPTION}\r\n        &lt;/property&gt;\r\n        &lt;Property name=&quot;CONSOLE_LOG_PATTERN&quot;&gt;\r\n            %clr{%d{${DATA}}}{faint} %clr{${LEVEL}} %clr{${TRACE}} ${sys:CONSOLE_LOG_PATTERN_MESSAGE}\r\n&lt;/Property&gt;\r\n```\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/ABep5.png","title":"Why only the spring-related logs conform to the format I defined","body":"<p>Why in the logs printed in the console, only the spring-related logs conform to the format I defined, and other logs (such as alibaba nacos, hikari datasource or the logs output by myself in the code) do not conform to the format I defined:\n<a href=\"https://i.stack.imgur.com/ABep5.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/ABep5.png\" alt=\"console log snapshot\" /></a></p>\n<p>I have tried to exclusion logback dependency in my project.</p>\n<p>My log format is as follows:</p>\n<pre><code>&lt;Property name=&quot;TRACE&quot;&gt;\n            [${APP_NAME}, %X{traceId}, %X{spanId}, %X{spanExportable}, %X{EagleEye-TraceID}]\n        &lt;/Property&gt;\n        &lt;property name=&quot;CONSOLE_LOG_PATTERN_MESSAGE&quot;&gt;\n            %clr{${sys:PID}}{magenta} %clr{---}{faint} %clr{%-40.40c{1.}}{cyan} : %m%n${sys:EXCEPTION}\n        &lt;/property&gt;\n        &lt;Property name=&quot;CONSOLE_LOG_PATTERN&quot;&gt;\n            %clr{%d{${DATA}}}{faint} %clr{${LEVEL}} %clr{${TRACE}} ${sys:CONSOLE_LOG_PATTERN_MESSAGE}\n&lt;/Property&gt;\n</code></pre>\n"},{"tags":["java","spring","spring-boot","maven"],"answers":[{"tags":[],"owner":{"account_id":24440940,"reputation":3122,"user_id":18364656,"display_name":"Andrei Lisa"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1691657250,"creation_date":1691657250,"answer_id":76874065,"question_id":76873975,"body_markdown":"If you`ll remove the \r\n\r\n    `&lt;dependency&gt;\r\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n        &lt;artifactId&gt;spring-boot-devtools&lt;/artifactId&gt;\r\n    &lt;/dependency&gt;`\r\nthe `System.out.println(&quot;Demo&quot;);` will be printed just once, it happen because:\r\n\r\n**Applications that use spring-boot-devtools will automatically restart whenever files on the classpath change. This can be a useful feature when working in an IDE as it gives a very fast feedback loop for code changes. By default, any entry on the classpath that points to a folder will be monitored for changes.**\r\n\r\nIn two words:\r\n*The devtools auto-refresh the context instead of restarting manually.*","title":"Spring boot generated project printing twice","body":"<p>If you`ll remove the</p>\n<pre><code>`&lt;dependency&gt;\n    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n    &lt;artifactId&gt;spring-boot-devtools&lt;/artifactId&gt;\n&lt;/dependency&gt;`\n</code></pre>\n<p>the <code>System.out.println(&quot;Demo&quot;);</code> will be printed just once, it happen because:</p>\n<p><strong>Applications that use spring-boot-devtools will automatically restart whenever files on the classpath change. This can be a useful feature when working in an IDE as it gives a very fast feedback loop for code changes. By default, any entry on the classpath that points to a folder will be monitored for changes.</strong></p>\n<p>In two words:\n<em>The devtools auto-refresh the context instead of restarting manually.</em></p>\n"}],"owner":{"account_id":3338979,"reputation":15534,"user_id":4452553,"accept_rate":73,"display_name":"guradio"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":45,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"accepted_answer_id":76874065,"answer_count":1,"score":-1,"last_activity_date":1691662835,"creation_date":1691656595,"question_id":76873975,"body_markdown":"POM:\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n    &lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n    \txsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\r\n    \t&lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n    \t&lt;parent&gt;\r\n    \t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n    \t\t&lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\r\n    \t\t&lt;version&gt;3.1.2&lt;/version&gt;\r\n    \t\t&lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;\r\n    \t&lt;/parent&gt;\r\n    \t&lt;groupId&gt;com.example.demo&lt;/groupId&gt;\r\n    \t&lt;artifactId&gt;demo&lt;/artifactId&gt;\r\n    \t&lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\r\n    \t&lt;name&gt;demo&lt;/name&gt;\r\n    \t&lt;description&gt;Demo project for Spring Boot&lt;/description&gt;\r\n    \t&lt;properties&gt;\r\n    \t\t&lt;java.version&gt;17&lt;/java.version&gt;\r\n    \t&lt;/properties&gt;\r\n\t&lt;dependencies&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-groovy-templates&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-jdbc&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-thymeleaf&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.flywaydb&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;flyway-core&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.mybatis.spring.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;mybatis-spring-boot-starter&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;3.0.2&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-devtools&lt;/artifactId&gt;\r\n\t\t\t&lt;scope&gt;runtime&lt;/scope&gt;\r\n\t\t\t&lt;optional&gt;true&lt;/optional&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-docker-compose&lt;/artifactId&gt;\r\n\t\t\t&lt;scope&gt;runtime&lt;/scope&gt;\r\n\t\t\t&lt;optional&gt;true&lt;/optional&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;lombok&lt;/artifactId&gt;\r\n\t\t\t&lt;optional&gt;true&lt;/optional&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\r\n\t\t\t&lt;scope&gt;test&lt;/scope&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.mybatis.spring.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;mybatis-spring-boot-starter-test&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;3.0.2&lt;/version&gt;\r\n\t\t\t&lt;scope&gt;test&lt;/scope&gt;\r\n\t\t&lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.jetbrains&lt;/groupId&gt;\r\n            &lt;artifactId&gt;annotations&lt;/artifactId&gt;\r\n            &lt;version&gt;RELEASE&lt;/version&gt;\r\n            &lt;scope&gt;compile&lt;/scope&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;jakarta.annotation&lt;/groupId&gt;\r\n            &lt;artifactId&gt;jakarta.annotation-api&lt;/artifactId&gt;\r\n            &lt;version&gt;1.3.5&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.junit.jupiter&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;junit-jupiter-api&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;5.9.3&lt;/version&gt;\r\n\t\t\t&lt;scope&gt;test&lt;/scope&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;junit&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;junit&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;4.13.2&lt;/version&gt;\r\n\t\t\t&lt;scope&gt;test&lt;/scope&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t&lt;/dependencies&gt;\r\n\r\n\t&lt;build&gt;\r\n\t\t&lt;plugins&gt;\r\n\t\t\t&lt;plugin&gt;\r\n\t\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t\t&lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\r\n\t\t\t\t&lt;configuration&gt;\r\n\t\t\t\t\t&lt;excludes&gt;\r\n\t\t\t\t\t\t&lt;exclude&gt;\r\n\t\t\t\t\t\t\t&lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\r\n\t\t\t\t\t\t\t&lt;artifactId&gt;lombok&lt;/artifactId&gt;\r\n\t\t\t\t\t\t&lt;/exclude&gt;\r\n\t\t\t\t\t&lt;/excludes&gt;\r\n\t\t\t\t&lt;/configuration&gt;\r\n\t\t\t&lt;/plugin&gt;\r\n\t\t&lt;/plugins&gt;\r\n\t&lt;/build&gt;\r\n\r\n&lt;/project&gt;\r\n\r\n\r\nMain\r\n\r\n    package com.example.demo.demo;\r\n    \r\n    import org.springframework.boot.SpringApplication;\r\n    import org.springframework.boot.autoconfigure.SpringBootApplication;\r\n    import org.springframework.context.annotation.ComponentScan;\r\n    \r\n    @SpringBootApplication\r\n    @ComponentScan(basePackages = &quot;com.example.demo&quot;) // Add the package of your component\r\n    public class DemoApplication {\r\n    \r\n    \tpublic static void main(String[] args) {\r\n    \t\tSystem.out.println(&quot;Demo&quot;);\r\n    \t\tSpringApplication.run(DemoApplication.class, args);\r\n    \t}\r\n    }\r\n\r\n\r\n[![enter image description here][1]][1]\r\n\r\n[![enter image description here][2]][2]\r\n\r\nI have the demo code by [this](https://start.spring.io/) but I&#39;m wondering why I get print twice.\r\nI don&#39;t understand why this is happening.\r\nI tried creating a different class but that class is not being called so tried this way.\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/9NeD1.png\r\n  [2]: https://i.stack.imgur.com/yySjM.png\r\n","title":"Spring boot generated project printing twice","body":"<p>POM:</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n    xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n    &lt;parent&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\n        &lt;version&gt;3.1.2&lt;/version&gt;\n        &lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;\n    &lt;/parent&gt;\n    &lt;groupId&gt;com.example.demo&lt;/groupId&gt;\n    &lt;artifactId&gt;demo&lt;/artifactId&gt;\n    &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\n    &lt;name&gt;demo&lt;/name&gt;\n    &lt;description&gt;Demo project for Spring Boot&lt;/description&gt;\n    &lt;properties&gt;\n        &lt;java.version&gt;17&lt;/java.version&gt;\n    &lt;/properties&gt;\n&lt;dependencies&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-groovy-templates&lt;/artifactId&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-jdbc&lt;/artifactId&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-thymeleaf&lt;/artifactId&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.flywaydb&lt;/groupId&gt;\n        &lt;artifactId&gt;flyway-core&lt;/artifactId&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.mybatis.spring.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;mybatis-spring-boot-starter&lt;/artifactId&gt;\n        &lt;version&gt;3.0.2&lt;/version&gt;\n    &lt;/dependency&gt;\n\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-devtools&lt;/artifactId&gt;\n        &lt;scope&gt;runtime&lt;/scope&gt;\n        &lt;optional&gt;true&lt;/optional&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-docker-compose&lt;/artifactId&gt;\n        &lt;scope&gt;runtime&lt;/scope&gt;\n        &lt;optional&gt;true&lt;/optional&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\n        &lt;artifactId&gt;lombok&lt;/artifactId&gt;\n        &lt;optional&gt;true&lt;/optional&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\n        &lt;scope&gt;test&lt;/scope&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.mybatis.spring.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;mybatis-spring-boot-starter-test&lt;/artifactId&gt;\n        &lt;version&gt;3.0.2&lt;/version&gt;\n        &lt;scope&gt;test&lt;/scope&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.jetbrains&lt;/groupId&gt;\n        &lt;artifactId&gt;annotations&lt;/artifactId&gt;\n        &lt;version&gt;RELEASE&lt;/version&gt;\n        &lt;scope&gt;compile&lt;/scope&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;jakarta.annotation&lt;/groupId&gt;\n        &lt;artifactId&gt;jakarta.annotation-api&lt;/artifactId&gt;\n        &lt;version&gt;1.3.5&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.junit.jupiter&lt;/groupId&gt;\n        &lt;artifactId&gt;junit-jupiter-api&lt;/artifactId&gt;\n        &lt;version&gt;5.9.3&lt;/version&gt;\n        &lt;scope&gt;test&lt;/scope&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;junit&lt;/groupId&gt;\n        &lt;artifactId&gt;junit&lt;/artifactId&gt;\n        &lt;version&gt;4.13.2&lt;/version&gt;\n        &lt;scope&gt;test&lt;/scope&gt;\n    &lt;/dependency&gt;\n&lt;/dependencies&gt;\n\n&lt;build&gt;\n    &lt;plugins&gt;\n        &lt;plugin&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\n            &lt;configuration&gt;\n                &lt;excludes&gt;\n                    &lt;exclude&gt;\n                        &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\n                        &lt;artifactId&gt;lombok&lt;/artifactId&gt;\n                    &lt;/exclude&gt;\n                &lt;/excludes&gt;\n            &lt;/configuration&gt;\n        &lt;/plugin&gt;\n    &lt;/plugins&gt;\n&lt;/build&gt;\n</code></pre>\n\n<p>Main</p>\n<pre><code>package com.example.demo.demo;\n\nimport org.springframework.boot.SpringApplication;\nimport org.springframework.boot.autoconfigure.SpringBootApplication;\nimport org.springframework.context.annotation.ComponentScan;\n\n@SpringBootApplication\n@ComponentScan(basePackages = &quot;com.example.demo&quot;) // Add the package of your component\npublic class DemoApplication {\n\n    public static void main(String[] args) {\n        System.out.println(&quot;Demo&quot;);\n        SpringApplication.run(DemoApplication.class, args);\n    }\n}\n</code></pre>\n<p><a href=\"https://i.stack.imgur.com/9NeD1.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/9NeD1.png\" alt=\"enter image description here\" /></a></p>\n<p><a href=\"https://i.stack.imgur.com/yySjM.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/yySjM.png\" alt=\"enter image description here\" /></a></p>\n<p>I have the demo code by <a href=\"https://start.spring.io/\" rel=\"nofollow noreferrer\">this</a> but I'm wondering why I get print twice.\nI don't understand why this is happening.\nI tried creating a different class but that class is not being called so tried this way.</p>\n"},{"tags":["java","hibernate","criteria"],"comments":[{"owner":{"account_id":22866981,"reputation":131,"user_id":17010647,"display_name":"Ksu"},"score":0,"creation_date":1691669068,"post_id":76874758,"comment_id":135524235,"body_markdown":"mabye it wiil be usefull https://www.baeldung.com/hibernate-criteria-queries","body":"mabye it wiil be usefull <a href=\"https://www.baeldung.com/hibernate-criteria-queries\" rel=\"nofollow noreferrer\">baeldung.com/hibernate-criteria-queries</a>"},{"owner":{"account_id":29182934,"reputation":1,"user_id":22356696,"display_name":"batman35"},"score":0,"creation_date":1691671442,"post_id":76874758,"comment_id":135524758,"body_markdown":"I&#39;ve already seen that article but i don&#39;t use criteriaBuilder but Criteria","body":"I&#39;ve already seen that article but i don&#39;t use criteriaBuilder but Criteria"}],"owner":{"account_id":29182934,"reputation":1,"user_id":22356696,"display_name":"batman35"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":25,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1691662399,"creation_date":1691662399,"question_id":76874758,"body_markdown":"I&#39;m new to Java Hibernate Criteria request and i have a SQL query to transform to a query using critera. Someone could help me to transform this query example to a query with Criteria ? \r\n \r\nThis is the Sql query :\r\n\r\n```\r\nselect service_code, version, s_startdate , v_end_date\r\nfrom t_bsm_service\r\nwhere service_code like &#39;10-GPD0001&#39;\r\nand (\r\n\ts_startdate = (select max(s_startdate) from t_bsm_service where service_code like &#39;10-GPD0001&#39;)\r\n)\r\norder by service_code , s_startdate\r\n```\r\n\r\nThere is a select into a where and a &#39;and&#39; so i&#39;m a little lost into this...\r\n\r\n\r\nThanks for your help\r\n\r\n\r\nI tried this Java criteria query : \r\n\r\n```\r\nCriteria criteria = this.getSession().createCriteria(BillingProductBaseView.class, &quot;vsic&quot;);\r\n\t\tcriteria.setProjection(\r\n\t\t\t\tProjections.projectionList().add(Projections.distinct(Projections.property(&quot;vsic.serviceCode&quot;)), &quot;id&quot;).add(Projections.property(&quot;vsic.serviceVersion&quot;), &quot;serviceVersion&quot;))\r\n\t\t\t\t.setResultTransformer(Transformers.aliasToBean(BillingProductBaseView.class));\r\n\t\tif (!ids.isEmpty()) {\r\n\t\t\tfor (String id : ids) {\r\n\t\t\t\tcriteria.add(Restrictions.like(&quot;vsic.serviceCode&quot;, id));\r\n\t\t\t}\r\nList&lt;BillingProductBaseView&gt; billingProductOfferingViewList = criteria.list();\r\n```\r\nWhere &#39;ids&#39; is a method parameter : a list of id given can be null or not.\r\n\r\nMy BillingProductBaseView.class fields are here : \r\n\r\n```\r\n@Table(name = &quot;V_BSM_BILLING_PRODUCT_BASE&quot;)\r\npublic class BillingProductBaseView implements Serializable {\r\n\r\n\t/**********************\r\n\t * Fields of Service\r\n\t **********************/\r\n\r\n\t@Column(name = &quot;SERVICE_CODE&quot;)\r\n\tprivate String serviceCode;\r\n\r\n\t@Column(name = &quot;SERVICE_VERSION&quot;)\r\n\tprivate String serviceVersion;\r\n\r\n\t@Column(name = &quot;S_STARTDATE&quot;)\r\n\tprivate Timestamp sStartDate;\r\n```\r\n\r\n\r\nI hope my question and example are clear to you.","title":"Hibernate Include a Select query into a where using criteria","body":"<p>I'm new to Java Hibernate Criteria request and i have a SQL query to transform to a query using critera. Someone could help me to transform this query example to a query with Criteria ?</p>\n<p>This is the Sql query :</p>\n<pre><code>select service_code, version, s_startdate , v_end_date\nfrom t_bsm_service\nwhere service_code like '10-GPD0001'\nand (\n    s_startdate = (select max(s_startdate) from t_bsm_service where service_code like '10-GPD0001')\n)\norder by service_code , s_startdate\n</code></pre>\n<p>There is a select into a where and a 'and' so i'm a little lost into this...</p>\n<p>Thanks for your help</p>\n<p>I tried this Java criteria query :</p>\n<pre><code>Criteria criteria = this.getSession().createCriteria(BillingProductBaseView.class, &quot;vsic&quot;);\n        criteria.setProjection(\n                Projections.projectionList().add(Projections.distinct(Projections.property(&quot;vsic.serviceCode&quot;)), &quot;id&quot;).add(Projections.property(&quot;vsic.serviceVersion&quot;), &quot;serviceVersion&quot;))\n                .setResultTransformer(Transformers.aliasToBean(BillingProductBaseView.class));\n        if (!ids.isEmpty()) {\n            for (String id : ids) {\n                criteria.add(Restrictions.like(&quot;vsic.serviceCode&quot;, id));\n            }\nList&lt;BillingProductBaseView&gt; billingProductOfferingViewList = criteria.list();\n</code></pre>\n<p>Where 'ids' is a method parameter : a list of id given can be null or not.</p>\n<p>My BillingProductBaseView.class fields are here :</p>\n<pre><code>@Table(name = &quot;V_BSM_BILLING_PRODUCT_BASE&quot;)\npublic class BillingProductBaseView implements Serializable {\n\n    /**********************\n     * Fields of Service\n     **********************/\n\n    @Column(name = &quot;SERVICE_CODE&quot;)\n    private String serviceCode;\n\n    @Column(name = &quot;SERVICE_VERSION&quot;)\n    private String serviceVersion;\n\n    @Column(name = &quot;S_STARTDATE&quot;)\n    private Timestamp sStartDate;\n</code></pre>\n<p>I hope my question and example are clear to you.</p>\n"},{"tags":["java","list","java-stream"],"answers":[{"tags":[],"owner":{"account_id":1096470,"reputation":26066,"user_id":1089967,"accept_rate":59,"display_name":"lance-java"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1691662204,"creation_date":1691661834,"answer_id":76874684,"question_id":76874623,"body_markdown":"```java\r\nList&lt;Request&gt; allRequests = List.of(request1, request2, request3, ...);\r\nPredicate&lt;Request&gt; requestFilter = request -&gt; request.getActions().stream()\r\n   .noneMatch(action -&gt; action.getActionEnum() == ActionEnum.DENIED);\r\nList&lt;Request&gt; filteredRequests = allRequests.stream().filter(requestFilter).collect(Collectors.toList());\r\n```","title":"How can i filter a List of Objects with a List of Objects after an Enum with Streams","body":"<pre class=\"lang-java prettyprint-override\"><code>List&lt;Request&gt; allRequests = List.of(request1, request2, request3, ...);\nPredicate&lt;Request&gt; requestFilter = request -&gt; request.getActions().stream()\n   .noneMatch(action -&gt; action.getActionEnum() == ActionEnum.DENIED);\nList&lt;Request&gt; filteredRequests = allRequests.stream().filter(requestFilter).collect(Collectors.toList());\n</code></pre>\n"},{"tags":[],"owner":{"account_id":17813347,"reputation":1635,"user_id":12937443,"display_name":"DEV"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1691662253,"creation_date":1691662253,"answer_id":76874736,"question_id":76874623,"body_markdown":"You can try using streams \r\n\r\n    List&lt;Request&gt; result = allRequests.stream().filter(request -&gt;request.getActions()\r\n            \t\t.streams.noneMatch(action-&gt;action.getAction().equals(ActionEnum.DENIED))\r\n            .collect(Collectors.toList());","title":"How can i filter a List of Objects with a List of Objects after an Enum with Streams","body":"<p>You can try using streams</p>\n<pre><code>List&lt;Request&gt; result = allRequests.stream().filter(request -&gt;request.getActions()\n                .streams.noneMatch(action-&gt;action.getAction().equals(ActionEnum.DENIED))\n        .collect(Collectors.toList());\n</code></pre>\n"}],"owner":{"account_id":16637856,"reputation":45,"user_id":12024130,"display_name":"Lukas Wenzel"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":38,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":76874736,"answer_count":2,"score":1,"last_activity_date":1691662253,"creation_date":1691661428,"question_id":76874623,"body_markdown":"My Problem is the following:\r\n\r\nI have a List of Requests and the Requests in the list also have a List of Actions. In the Actions i have an Enum. I want to remove all Requests out of the top List if one of the Actions has the Enum DENIED. \r\nI have a Solution but i keep thinking there must be a better solution for that. \r\nI would love it if this solution would contain Streams.\r\n\r\nData:\r\n\r\n```\r\n\r\npublic class Request{\r\n    private int id;\r\n    private List&lt;Action&gt; actions;\r\n\r\n    public List&lt;Action&gt; getActions(){\r\n        return actions;\r\n    }\r\n\r\n}\r\n\r\npublic class Action{\r\n    private int id;\r\n    private String comment;\r\n    private ActionEnum actionEnum;\r\n\r\n    public ActionEnum getAction(){\r\n        return actionEnum;\r\n    }\r\n\r\n}\r\n\r\npublic enum ActionEnum {\r\n    ACCEPTED, DENIED, OPEN\r\n}\r\n\r\n```\r\n\r\nMy Solution:\r\n\r\n```\r\npublic class StackOverflow {\r\n    public static void main(String[] args) {\r\n        var allRequests = new ArrayList&lt;Request&gt;();\r\n        var result = new ArrayList&lt;&gt;(allRequests);\r\n        for (Request request : allRequests) {\r\n            for (Action action : request.getActions()) {\r\n                if (action.getAction().equals(ActionEnum.DENIED)) {\r\n                    result.remove(request);\r\n                    break;\r\n                }\r\n            }\r\n        }\r\n        System.out.println(result);\r\n    }\r\n}\r\n```\r\n\r\n","title":"How can i filter a List of Objects with a List of Objects after an Enum with Streams","body":"<p>My Problem is the following:</p>\n<p>I have a List of Requests and the Requests in the list also have a List of Actions. In the Actions i have an Enum. I want to remove all Requests out of the top List if one of the Actions has the Enum DENIED.\nI have a Solution but i keep thinking there must be a better solution for that.\nI would love it if this solution would contain Streams.</p>\n<p>Data:</p>\n<pre><code>\npublic class Request{\n    private int id;\n    private List&lt;Action&gt; actions;\n\n    public List&lt;Action&gt; getActions(){\n        return actions;\n    }\n\n}\n\npublic class Action{\n    private int id;\n    private String comment;\n    private ActionEnum actionEnum;\n\n    public ActionEnum getAction(){\n        return actionEnum;\n    }\n\n}\n\npublic enum ActionEnum {\n    ACCEPTED, DENIED, OPEN\n}\n\n</code></pre>\n<p>My Solution:</p>\n<pre><code>public class StackOverflow {\n    public static void main(String[] args) {\n        var allRequests = new ArrayList&lt;Request&gt;();\n        var result = new ArrayList&lt;&gt;(allRequests);\n        for (Request request : allRequests) {\n            for (Action action : request.getActions()) {\n                if (action.getAction().equals(ActionEnum.DENIED)) {\n                    result.remove(request);\n                    break;\n                }\n            }\n        }\n        System.out.println(result);\n    }\n}\n</code></pre>\n"},{"tags":["java","gzip","httpclient"],"comments":[{"owner":{"account_id":52822,"reputation":1088970,"user_id":157882,"accept_rate":93,"display_name":"BalusC"},"score":0,"creation_date":1314046605,"post_id":7153484,"comment_id":8581609,"body_markdown":"Can you be more specific please? What exactly is &quot;a gzipped string&quot;? A gzipped request parameter? Or a gzipped request body? Does your server support gzipped requests? (not all do...) The HttpClient transparent GZIP support which you&#39;re reading about concerns HTTP responses, not HTTP requests.","body":"Can you be more specific please? What exactly is &quot;a gzipped string&quot;? A gzipped request parameter? Or a gzipped request body? Does your server support gzipped requests? (not all do...) The HttpClient transparent GZIP support which you&#39;re reading about concerns HTTP responses, not HTTP requests."},{"owner":{"account_id":52822,"reputation":1088970,"user_id":157882,"accept_rate":93,"display_name":"BalusC"},"score":0,"creation_date":1314046688,"post_id":7153484,"comment_id":8581633,"body_markdown":"Oh, HTTPLib and HttpClient are different libraries...","body":"Oh, HTTPLib and HttpClient are different libraries..."},{"owner":{"account_id":157094,"reputation":6053,"user_id":374794,"accept_rate":94,"display_name":"Alex Bliskovsky"},"score":0,"creation_date":1314047603,"post_id":7153484,"comment_id":8581880,"body_markdown":"I&#39;ve edited my question. I meant HttpClient and a gzipped request parameter. Thanks.","body":"I&#39;ve edited my question. I meant HttpClient and a gzipped request parameter. Thanks."},{"owner":{"account_id":52822,"reputation":1088970,"user_id":157882,"accept_rate":93,"display_name":"BalusC"},"score":0,"creation_date":1314047762,"post_id":7153484,"comment_id":8581918,"body_markdown":"Just a single gzipped parameter, not the entire request body? How would you send it? As a Base64-encoded parameter value or as a `multipart/form-data` part? Are you sure that the target server can handle this? What exactly is the server expecting? Or is the server code under your full control as well?","body":"Just a single gzipped parameter, not the entire request body? How would you send it? As a Base64-encoded parameter value or as a <code>multipart&#47;form-data</code> part? Are you sure that the target server can handle this? What exactly is the server expecting? Or is the server code under your full control as well?"},{"owner":{"account_id":157094,"reputation":6053,"user_id":374794,"accept_rate":94,"display_name":"Alex Bliskovsky"},"score":0,"creation_date":1314047959,"post_id":7153484,"comment_id":8581969,"body_markdown":"This would be as part of a `multipart/form-data` request. The server expects a gzipped parameter.","body":"This would be as part of a <code>multipart&#47;form-data</code> request. The server expects a gzipped parameter."},{"owner":{"account_id":52822,"reputation":1088970,"user_id":157882,"accept_rate":93,"display_name":"BalusC"},"score":0,"creation_date":1314048515,"post_id":7153484,"comment_id":8582096,"body_markdown":"OK, what&#39;s the original type of this part value? A `String`? A `File`? Etc.","body":"OK, what&#39;s the original type of this part value? A <code>String</code>? A <code>File</code>? Etc."}],"answers":[{"tags":[],"owner":{"account_id":52822,"reputation":1088970,"user_id":157882,"accept_rate":93,"display_name":"BalusC"},"down_vote_count":0,"up_vote_count":19,"is_accepted":true,"score":19,"last_activity_date":1439536045,"creation_date":1314049276,"answer_id":7153945,"question_id":7153484,"body_markdown":"You need to turn that `String` into a gzipped `byte[]` or (temp) `File` first. Let&#39;s assume that it&#39;s not an extraordinary large `String` value so that a `byte[]` is safe enough for the available JVM memory:\r\n\r\n    String foo = &quot;value&quot;;\r\n    ByteArrayOutputStream baos = new ByteArrayOutputStream();\r\n    \r\n    try (GZIPOutputStream gzos = new GZIPOutputStream(baos)) {\r\n        gzos.write(foo.getBytes(&quot;UTF-8&quot;));\r\n    }\r\n\r\n    byte[] fooGzippedBytes = baos.toByteArray();\r\n\r\nThen, you can send it as a multipart body using HttpClient as follows:\r\n\r\n    MultipartEntity entity = new MultipartEntity();\r\n    entity.addPart(&quot;foo&quot;, new InputStreamBody(new ByteArrayInputStream(fooGzippedBytes), &quot;foo.txt&quot;));\r\n\r\n    HttpPost post = new HttpPost(&quot;http://example.com/some&quot;);\r\n    post.setEntity(entity);\r\n\r\n    HttpClient client = new DefaultHttpClient();\r\n    HttpResponse response = client.execute(post);\r\n    // ...\r\n\r\nNote that HttpClient 4.1 supports the new [`ByteArrayBody`][1] which can be used as follows:\r\n\r\n    entity.addPart(&quot;foo&quot;, new ByteArrayBody(fooGzippedBytes, &quot;foo.txt&quot;));\r\n\r\n\r\n  [1]: http://hc.apache.org/httpcomponents-client-ga/httpmime/apidocs/org/apache/http/entity/mime/content/ByteArrayBody.html","title":"GZip POST request with HTTPClient in Java","body":"<p>You need to turn that <code>String</code> into a gzipped <code>byte[]</code> or (temp) <code>File</code> first. Let's assume that it's not an extraordinary large <code>String</code> value so that a <code>byte[]</code> is safe enough for the available JVM memory:</p>\n\n<pre><code>String foo = \"value\";\nByteArrayOutputStream baos = new ByteArrayOutputStream();\n\ntry (GZIPOutputStream gzos = new GZIPOutputStream(baos)) {\n    gzos.write(foo.getBytes(\"UTF-8\"));\n}\n\nbyte[] fooGzippedBytes = baos.toByteArray();\n</code></pre>\n\n<p>Then, you can send it as a multipart body using HttpClient as follows:</p>\n\n<pre><code>MultipartEntity entity = new MultipartEntity();\nentity.addPart(\"foo\", new InputStreamBody(new ByteArrayInputStream(fooGzippedBytes), \"foo.txt\"));\n\nHttpPost post = new HttpPost(\"http://example.com/some\");\npost.setEntity(entity);\n\nHttpClient client = new DefaultHttpClient();\nHttpResponse response = client.execute(post);\n// ...\n</code></pre>\n\n<p>Note that HttpClient 4.1 supports the new <a href=\"http://hc.apache.org/httpcomponents-client-ga/httpmime/apidocs/org/apache/http/entity/mime/content/ByteArrayBody.html\" rel=\"noreferrer\"><code>ByteArrayBody</code></a> which can be used as follows:</p>\n\n<pre><code>entity.addPart(\"foo\", new ByteArrayBody(fooGzippedBytes, \"foo.txt\"));\n</code></pre>\n"},{"tags":[],"owner":{"account_id":8413295,"reputation":1,"user_id":6314497,"display_name":"e-venter"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691661990,"creation_date":1691661990,"answer_id":76874709,"question_id":7153484,"body_markdown":"Try the GzipCompressingEntity class. If I&#39;m zipping the body of a post e.g. for a JSON object I would go:\r\n\r\n    \t// json payload\r\n\tif (jsonBody != null) {\r\n\t\t\r\n\t\tpost.setHeader(&quot;Content-Type&quot;, &quot;application/json&quot;);\r\n\t\tStringEntity requestEntity = new StringEntity( jsonBody, ContentType.APPLICATION_JSON);\r\n\t\t\r\n\t\tif (gzipBody) {\r\n\t\t\tGzipCompressingEntity gzippedEntity = new GzipCompressingEntity(requestEntity);\r\n\t\t\tpost.setEntity(gzippedEntity);\r\n\t\t}else {\r\n\t\t\tpost.setEntity(requestEntity);\r\n\t\t}\r\n\t\t\r\n\t}\r\n Haven&#39;t tested but I assume for adding parameters you&#39;d do:\r\n\r\n    \t// add parameters\r\n\tif (parameters != null &amp;&amp; parameters.length &gt; 0){\r\n\r\n\t\tList&lt;NameValuePair&gt; urlParameters = new ArrayList&lt;NameValuePair&gt;();\r\n\t\tfor (int i = 0; i &lt; parameters.length; i++){\r\n\t\t\turlParameters.add(new BasicNameValuePair(parameters[i][0], parameters[i][1]));\r\n\t\t}\r\n\t\tpost.setEntity(new GzipCompressingEntity(new UrlEncodedFormEntity(urlParameters)));\r\n\t}\r\n\r\n\r\n ","title":"GZip POST request with HTTPClient in Java","body":"<p>Try the GzipCompressingEntity class. If I'm zipping the body of a post e.g. for a JSON object I would go:</p>\n<pre><code>    // json payload\nif (jsonBody != null) {\n    \n    post.setHeader(&quot;Content-Type&quot;, &quot;application/json&quot;);\n    StringEntity requestEntity = new StringEntity( jsonBody, ContentType.APPLICATION_JSON);\n    \n    if (gzipBody) {\n        GzipCompressingEntity gzippedEntity = new GzipCompressingEntity(requestEntity);\n        post.setEntity(gzippedEntity);\n    }else {\n        post.setEntity(requestEntity);\n    }\n    \n}\n</code></pre>\n<p>Haven't tested but I assume for adding parameters you'd do:</p>\n<pre><code>    // add parameters\nif (parameters != null &amp;&amp; parameters.length &gt; 0){\n\n    List&lt;NameValuePair&gt; urlParameters = new ArrayList&lt;NameValuePair&gt;();\n    for (int i = 0; i &lt; parameters.length; i++){\n        urlParameters.add(new BasicNameValuePair(parameters[i][0], parameters[i][1]));\n    }\n    post.setEntity(new GzipCompressingEntity(new UrlEncodedFormEntity(urlParameters)));\n}\n</code></pre>\n"}],"owner":{"account_id":157094,"reputation":6053,"user_id":374794,"accept_rate":94,"display_name":"Alex Bliskovsky"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":31933,"favorite_count":0,"down_vote_count":0,"up_vote_count":16,"accepted_answer_id":7153945,"answer_count":2,"score":16,"last_activity_date":1691661990,"creation_date":1314046448,"question_id":7153484,"body_markdown":"I need to send a POST request to a web server which includes a gzipped request parameter. I&#39;m using Apache HttpClient and I&#39;ve read that it supports Gzip out of the box, but I can&#39;t find any examples of how to do what I need. I&#39;d appreciate it if anyone could post some examples of this.","title":"GZip POST request with HTTPClient in Java","body":"<p>I need to send a POST request to a web server which includes a gzipped request parameter. I'm using Apache HttpClient and I've read that it supports Gzip out of the box, but I can't find any examples of how to do what I need. I'd appreciate it if anyone could post some examples of this.</p>\n"},{"tags":["java","math","integer","byte","short"],"comments":[{"owner":{"account_id":196869,"reputation":402535,"user_id":440558,"accept_rate":75,"display_name":"Some programmer dude"},"score":0,"creation_date":1691661344,"post_id":76874583,"comment_id":135522822,"body_markdown":"When asking questions related to errors, always show us the errors. If they are build errors, then copy-paste (as text) the full and complete build log from a [mre] (which you should also copy-paste) into the question. If you get dialogs or other messages when running post a screenshot. If you get an uncaught exception then use a [debugger](https://stackoverflow.com/questions/25385173/what-is-a-debugger-and-how-can-it-help-me-diagnose-problems) to catch it and tell us all the details.","body":"When asking questions related to errors, always show us the errors. If they are build errors, then copy-paste (as text) the full and complete build log from a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> (which you should also copy-paste) into the question. If you get dialogs or other messages when running post a screenshot. If you get an uncaught exception then use a <a href=\"https://stackoverflow.com/questions/25385173/what-is-a-debugger-and-how-can-it-help-me-diagnose-problems\">debugger</a> to catch it and tell us all the details."},{"owner":{"account_id":196869,"reputation":402535,"user_id":440558,"accept_rate":75,"display_name":"Some programmer dude"},"score":0,"creation_date":1691661505,"post_id":76874583,"comment_id":135522847,"body_markdown":"Also please take some time to read [the help pages](http://stackoverflow.com/help), take the SO [tour], and read [ask]. Then also read about [how to write the &quot;perfect&quot; question](https://codeblog.jonskeet.uk/2010/08/29/writing-the-perfect-question/), especially its [checklist](https://codeblog.jonskeet.uk/2012/11/24/stack-overflow-question-checklist/). And lastly please learn how to [edit] your questions to iprove them.","body":"Also please take some time to read <a href=\"http://stackoverflow.com/help\">the help pages</a>, take the SO <a href=\"https://stackoverflow.com/tour\">tour</a>, and read <a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a>. Then also read about <a href=\"https://codeblog.jonskeet.uk/2010/08/29/writing-the-perfect-question/\" rel=\"nofollow noreferrer\">how to write the &quot;perfect&quot; question</a>, especially its <a href=\"https://codeblog.jonskeet.uk/2012/11/24/stack-overflow-question-checklist/\" rel=\"nofollow noreferrer\">checklist</a>. And lastly please learn how to <a href=\"https://stackoverflow.com/posts/76874583/edit\">edit</a> your questions to iprove them."}],"answers":[{"tags":[],"owner":{"account_id":29130287,"reputation":11,"user_id":22315734,"display_name":"Akin"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1691661963,"creation_date":1691661926,"answer_id":76874696,"question_id":76874583,"body_markdown":"In Java, when you perform arithmetic operations on primitive data types, like shorts in this case, the resulting value is automatically promoted to at least an int before the operation is performed. This is known as &quot;integer promotion.&quot; This is done to prevent potential loss of data or precision that might occur if the operation was performed directly with smaller data types like shorts or bytes.\r\n\r\nTry this: \r\n\r\n        short s1 = 3, s2 = 4;\r\n        short s3;\r\n        s3 = (short)(s2 - s1);\r\n\r\n\r\nBy adding (short) before the subtraction, you are telling Java to perform the subtraction as an int, and then explicitly cast the result back to a short. Just be aware that if the result of the subtraction is outside the range of a short, you may lose data or encounter unexpected behavior.","title":"Why I can&#39;t perform mathematical operations using short variable?","body":"<p>In Java, when you perform arithmetic operations on primitive data types, like shorts in this case, the resulting value is automatically promoted to at least an int before the operation is performed. This is known as &quot;integer promotion.&quot; This is done to prevent potential loss of data or precision that might occur if the operation was performed directly with smaller data types like shorts or bytes.</p>\n<p>Try this:</p>\n<pre><code>    short s1 = 3, s2 = 4;\n    short s3;\n    s3 = (short)(s2 - s1);\n</code></pre>\n<p>By adding (short) before the subtraction, you are telling Java to perform the subtraction as an int, and then explicitly cast the result back to a short. Just be aware that if the result of the subtraction is outside the range of a short, you may lose data or encounter unexpected behavior.</p>\n"}],"owner":{"account_id":29198322,"reputation":1,"user_id":22368963,"display_name":"Utkarsh"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":128,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"closed_date":1691662901,"answer_count":1,"score":0,"last_activity_date":1691661963,"creation_date":1691661095,"question_id":76874583,"body_markdown":"```\r\nshort s1 = 4500, s2 = 9800;\r\nshort s3;\r\ns3 = s2 - s1;\r\nSystem.out.println(&quot;The difference is:- &quot; + s3);\r\n```\r\n\r\nI ran this code and it is showing an error but work perfectly when I declare s3 as int. Why is this happening?\r\n**The error it is showing is as follows :-\r\n&#39;&#39;&#39;\r\nMain.java:15: error: incompatible types: possible lossy conversion from int to short\r\n\t\ts3 = s2 - s1;\r\n\t\t        ^\r\n1 error**\r\n&#39;&#39;&#39;\r\n\r\nI tried running the code and I thought the code would run. But in mathematical operations it shows error and suggests that instead of short, byte variable use int variable.","title":"Why I can&#39;t perform mathematical operations using short variable?","body":"<pre><code>short s1 = 4500, s2 = 9800;\nshort s3;\ns3 = s2 - s1;\nSystem.out.println(&quot;The difference is:- &quot; + s3);\n</code></pre>\n<p>I ran this code and it is showing an error but work perfectly when I declare s3 as int. Why is this happening?\n<strong>The error it is showing is as follows :-\n'''\nMain.java:15: error: incompatible types: possible lossy conversion from int to short\ns3 = s2 - s1;\n^\n1 error</strong>\n'''</p>\n<p>I tried running the code and I thought the code would run. But in mathematical operations it shows error and suggests that instead of short, byte variable use int variable.</p>\n"}],"has_more":true,"quota_max":10000,"quota_remaining":9737,"page":255,"page_size":100}
