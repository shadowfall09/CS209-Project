{"items":[{"tags":["java","selenium-webdriver","frameworks","cucumber","bdd"],"comments":[{"owner":{"account_id":10049107,"reputation":186627,"user_id":7429447,"accept_rate":86,"display_name":"undetected Selenium"},"score":0,"creation_date":1691615790,"post_id":76870992,"comment_id":135517265,"body_markdown":"Update the question with the implementation of `testContextSetup.driver`","body":"Update the question with the implementation of <code>testContextSetup.driver</code>"},{"owner":{"account_id":13744424,"reputation":13,"user_id":9918582,"display_name":"Immy110"},"score":0,"creation_date":1691618944,"post_id":76870992,"comment_id":135517741,"body_markdown":"Yes just done that now","body":"Yes just done that now"},{"owner":{"account_id":10049107,"reputation":186627,"user_id":7429447,"accept_rate":86,"display_name":"undetected Selenium"},"score":0,"creation_date":1691619099,"post_id":76870992,"comment_id":135517761,"body_markdown":"But what is _`testContextSetup`_?","body":"But what is <i><code>testContextSetup</code></i>?"},{"owner":{"account_id":15994883,"reputation":3427,"user_id":11543023,"display_name":"djmonki"},"score":0,"creation_date":1693297598,"post_id":76870992,"comment_id":135738647,"body_markdown":"As requested please provide the ```testContextSetup``` method","body":"As requested please provide the <code>testContextSetup</code> method"}],"owner":{"account_id":13744424,"reputation":13,"user_id":9918582,"display_name":"Immy110"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":136,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1691618620,"creation_date":1691612177,"question_id":76870992,"body_markdown":"I am getting this error when executing my code in my Cucumber Framework:\r\n\r\n```\r\nFAILED: runScenario(&quot;Search Experience for product search in both home and Offers page&quot;, &quot;Search and Place the order for Products&quot;)\r\n        Runs Cucumber Scenarios\r\njava.lang.NullPointerException: Cannot invoke &quot;org.openqa.selenium.WebDriver.findElement(org.openqa.selenium.By)&quot; because &quot;this.driver&quot; is null\r\nat pageObjects.OffersPage.searchItem(OffersPage.java:21)\r\nat stepDefinitions.OfferPageStepDefinition.user_searched_for_same_shortname_in_offers_page(OfferPageStepDefinition.java:40)\r\n```\r\n\r\n Following is my code in OffersPage class where it&#39;s referring :\r\n\r\n```package pageObjects;\r\n\r\nimport org.openqa.selenium.By;\r\nimport org.openqa.selenium.WebDriver;\r\n\r\npublic class OffersPage {\r\n\t\r\npublic WebDriver driver;\r\n\t\r\n\tpublic OffersPage(WebDriver driver)\r\n\t{\r\n\t\tthis.driver = driver;\r\n\t}\r\n\t\r\n\tBy search = By.xpath(&quot;//input[@type=&#39;search&#39;]&quot;);\r\n\tBy productName = By.cssSelector(&quot;tr td:nth-child(1)&quot;); //This is the product name\r\n\t\r\n\tpublic void searchItem(String name)\r\n\r\n\t{\r\n\t\tdriver.findElement(search).sendKeys(name);\r\n\t}\r\n\t\r\n\t\r\n\tpublic void getSearchText()\r\n\t{\r\n\t\tdriver.findElement(search).getText();\r\n\t}\r\n\t\r\n\tpublic String getProductName() //Here we are returning the Product name\r\n\t{\r\n\t\treturn driver.findElement(productName).getText();\r\n\t}\r\n}\r\n```\r\n\r\nThis is my OffersPage StepDefinition File code (line 40) as pointed in the error message:\r\n\r\n```\r\n\t@Then(&quot;user searched for {string} shortname in offers page&quot;)\r\n\tpublic void user_searched_for_same_shortname_in_offers_page(String shortName) throws InterruptedException {\r\n\t  // Write code here that turns the phrase above into concrete actions\r\n\t\r\n\tswitchToOffersPage();\r\n\tOffersPage offersPage = new OffersPage(testContextSetup.driver);// the driver here will be linked to the OffersPage page object class\r\n\toffersPage.searchItem(shortName);\r\n\tThread.sleep(2000);\r\n    offerPageProductName = offersPage.getProductName();\r\n```\r\n\r\nWhere am I going wrong exactly?\r\n\r\n","title":"Cannot invoke &quot;org.openqa.selenium.WebDriver.findElement&quot; because this.driver is null with the implementation of testContextSetup.driver","body":"<p>I am getting this error when executing my code in my Cucumber Framework:</p>\n<pre><code>FAILED: runScenario(&quot;Search Experience for product search in both home and Offers page&quot;, &quot;Search and Place the order for Products&quot;)\n        Runs Cucumber Scenarios\njava.lang.NullPointerException: Cannot invoke &quot;org.openqa.selenium.WebDriver.findElement(org.openqa.selenium.By)&quot; because &quot;this.driver&quot; is null\nat pageObjects.OffersPage.searchItem(OffersPage.java:21)\nat stepDefinitions.OfferPageStepDefinition.user_searched_for_same_shortname_in_offers_page(OfferPageStepDefinition.java:40)\n</code></pre>\n<p>Following is my code in OffersPage class where it's referring :</p>\n<pre><code>\nimport org.openqa.selenium.By;\nimport org.openqa.selenium.WebDriver;\n\npublic class OffersPage {\n    \npublic WebDriver driver;\n    \n    public OffersPage(WebDriver driver)\n    {\n        this.driver = driver;\n    }\n    \n    By search = By.xpath(&quot;//input[@type='search']&quot;);\n    By productName = By.cssSelector(&quot;tr td:nth-child(1)&quot;); //This is the product name\n    \n    public void searchItem(String name)\n\n    {\n        driver.findElement(search).sendKeys(name);\n    }\n    \n    \n    public void getSearchText()\n    {\n        driver.findElement(search).getText();\n    }\n    \n    public String getProductName() //Here we are returning the Product name\n    {\n        return driver.findElement(productName).getText();\n    }\n}\n</code></pre>\n<p>This is my OffersPage StepDefinition File code (line 40) as pointed in the error message:</p>\n<pre><code>    @Then(&quot;user searched for {string} shortname in offers page&quot;)\n    public void user_searched_for_same_shortname_in_offers_page(String shortName) throws InterruptedException {\n      // Write code here that turns the phrase above into concrete actions\n    \n    switchToOffersPage();\n    OffersPage offersPage = new OffersPage(testContextSetup.driver);// the driver here will be linked to the OffersPage page object class\n    offersPage.searchItem(shortName);\n    Thread.sleep(2000);\n    offerPageProductName = offersPage.getProductName();\n</code></pre>\n<p>Where am I going wrong exactly?</p>\n"},{"tags":["java","notepad++","javadoc"],"comments":[{"owner":{"account_id":1874907,"reputation":4258,"user_id":1696314,"display_name":"NickL"},"score":7,"creation_date":1483736920,"post_id":41514314,"comment_id":70234806,"body_markdown":"Why on earth do you use notepad++ for programming in a language like Java? You should use an IDE, like Eclipse or Netbeans. These have functions that generate JavaDoc (can also be done from command line with &#39;javadoc&#39;). Have you tried googling &#39;how to generate JavaDoc&#39;?","body":"Why on earth do you use notepad++ for programming in a language like Java? You should use an IDE, like Eclipse or Netbeans. These have functions that generate JavaDoc (can also be done from command line with &#39;javadoc&#39;). Have you tried googling &#39;how to generate JavaDoc&#39;?"},{"owner":{"account_id":949203,"reputation":4454,"user_id":975741,"display_name":"trooper"},"score":4,"creation_date":1483737015,"post_id":41514314,"comment_id":70234864,"body_markdown":"`javadoc` is a tool that scans the java source for comments in order to create the html documentation (like you&#39;ve linked). if you are already writing valid javadoc style comments, you just need to run the utility: http://docs.oracle.com/javase/7/docs/technotes/tools/windows/javadoc.html","body":"<code>javadoc</code> is a tool that scans the java source for comments in order to create the html documentation (like you&#39;ve linked). if you are already writing valid javadoc style comments, you just need to run the utility: <a href=\"http://docs.oracle.com/javase/7/docs/technotes/tools/windows/javadoc.html\" rel=\"nofollow noreferrer\">docs.oracle.com/javase/7/docs/technotes/tools/windows/&hellip;</a>"},{"owner":{"account_id":1874907,"reputation":4258,"user_id":1696314,"display_name":"NickL"},"score":3,"creation_date":1483737830,"post_id":41514314,"comment_id":70235257,"body_markdown":"I agree that it might be irrelevant to this question. However, as the OP mentions that code documentation is essential for code maintenance, so is the usage of an IDE. Have fun maintaining (refactoring, debugging) code with a text editor.","body":"I agree that it might be irrelevant to this question. However, as the OP mentions that code documentation is essential for code maintenance, so is the usage of an IDE. Have fun maintaining (refactoring, debugging) code with a text editor."},{"owner":{"account_id":1874907,"reputation":4258,"user_id":1696314,"display_name":"NickL"},"score":3,"creation_date":1483737908,"post_id":41514314,"comment_id":70235298,"body_markdown":"Possible duplicate of [How to generate Javadoc from command line](http://stackoverflow.com/questions/4592396/how-to-generate-javadoc-from-command-line)","body":"Possible duplicate of <a href=\"http://stackoverflow.com/questions/4592396/how-to-generate-javadoc-from-command-line\">How to generate Javadoc from command line</a>"},{"owner":{"account_id":6107068,"reputation":109,"user_id":4764533,"accept_rate":56,"display_name":"Ghayel"},"score":0,"creation_date":1483737953,"post_id":41514314,"comment_id":70235314,"body_markdown":"Vote up for javadoc generator tool link","body":"Vote up for javadoc generator tool link"},{"owner":{"account_id":6107068,"reputation":109,"user_id":4764533,"accept_rate":56,"display_name":"Ghayel"},"score":0,"creation_date":1483738134,"post_id":41514314,"comment_id":70235380,"body_markdown":"Vote up for generating docs via command line","body":"Vote up for generating docs via command line"}],"answers":[{"tags":[],"owner":{"account_id":98471,"reputation":15227,"user_id":266531,"accept_rate":100,"display_name":"Kirby"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691618598,"creation_date":1691618598,"answer_id":76871555,"question_id":41514314,"body_markdown":"I found a similar question here: https://stackoverflow.com/questions/4709692/generic-javadoc-command-that-always-generates-all-javadocs-in-a-given-tree\r\n\r\nFrom [the answer][1] from user [stian][2], \r\n\r\n&gt; On Windows you can do it like this:\r\n&gt; \r\n&gt; Generate file list:\r\n&gt; \r\n&gt; `dir /s /b *.java &gt; file.lst`\r\n&gt;\r\n&gt; Generate javadoc:\r\n&gt; \r\n&gt; `javadoc -d outputdir @file.lst`\r\n\r\n\r\n  [1]: https://stackoverflow.com/a/4946061/266531\r\n  [2]: https://stackoverflow.com/users/17542/stian","title":"How to generate docs for our code like javadocs?","body":"<p>I found a similar question here: <a href=\"https://stackoverflow.com/questions/4709692/generic-javadoc-command-that-always-generates-all-javadocs-in-a-given-tree\">Generic javadoc command that always generates all javadocs in a given tree?</a></p>\n<p>From <a href=\"https://stackoverflow.com/a/4946061/266531\">the answer</a> from user <a href=\"https://stackoverflow.com/users/17542/stian\">stian</a>,</p>\n<blockquote>\n<p>On Windows you can do it like this:</p>\n<p>Generate file list:</p>\n<p><code>dir /s /b *.java &gt; file.lst</code></p>\n<p>Generate javadoc:</p>\n<p><code>javadoc -d outputdir @file.lst</code></p>\n</blockquote>\n"}],"owner":{"account_id":6107068,"reputation":109,"user_id":4764533,"accept_rate":56,"display_name":"Ghayel"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":3369,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1691618598,"creation_date":1483736643,"question_id":41514314,"body_markdown":"I commit code documentation is very essential to maintain the software product. I am using notepad++ to write the java code. I installed one of its plugin NppDocIt that inserts auto comments by pressing `ctrl+alt+shift+D`. Its good to know about methods but I want to generate code documents like java docs for example [This Document][1]\r\n\r\n\r\n  [1]: http://docs.oracle.com/javase/8/docs/api/java/util/Locale.html\r\n\r\n**Update-1**\r\nThanks for good guidance and I learned a lot.\r\n\r\nI tried to generate javadoc as following:\r\n\r\n    F:\\Java\\Tomcat\\webapps\\ROOT\\WEB-INF\\classes&gt;javadoc -d &quot;C:/docs&quot; -sourcepath -package &quot;com/i18n/source/i18n&quot; -subpackages com\r\n    javadoc: error - Illegal package name: &quot;com/i18n/source/i18n&quot;\r\n    1 error\r\n\r\nMy package resides as:\r\n\r\n    com\r\n      |--i18n\r\n           |--resources\r\n                |--bundles\r\n                      |--labelsBundle\r\n\r\nPlease advise where I am wrong?\r\n\r\n**Update-2**&lt;br&gt;\r\n**Answer:**&lt;br&gt;\r\n\r\n 1. I added all java files in one folder\r\n 2. Created one folder for example c:/docs\r\n 3. run this command from commandline `javadoc -d &quot;C:/docs&quot; *.java`\r\n&lt;br&gt;&lt;br&gt;and successfully my codes documentation generated\r\n\r\nThanks from the bottom of my heart to stackoverflow and participants of this thread","title":"How to generate docs for our code like javadocs?","body":"<p>I commit code documentation is very essential to maintain the software product. I am using notepad++ to write the java code. I installed one of its plugin NppDocIt that inserts auto comments by pressing <code>ctrl+alt+shift+D</code>. Its good to know about methods but I want to generate code documents like java docs for example <a href=\"http://docs.oracle.com/javase/8/docs/api/java/util/Locale.html\" rel=\"nofollow noreferrer\">This Document</a></p>\n\n<p><strong>Update-1</strong>\nThanks for good guidance and I learned a lot.</p>\n\n<p>I tried to generate javadoc as following:</p>\n\n<pre><code>F:\\Java\\Tomcat\\webapps\\ROOT\\WEB-INF\\classes&gt;javadoc -d \"C:/docs\" -sourcepath -package \"com/i18n/source/i18n\" -subpackages com\njavadoc: error - Illegal package name: \"com/i18n/source/i18n\"\n1 error\n</code></pre>\n\n<p>My package resides as:</p>\n\n<pre><code>com\n  |--i18n\n       |--resources\n            |--bundles\n                  |--labelsBundle\n</code></pre>\n\n<p>Please advise where I am wrong?</p>\n\n<p><strong>Update-2</strong><br>\n<strong>Answer:</strong><br></p>\n\n<ol>\n<li>I added all java files in one folder</li>\n<li>Created one folder for example c:/docs</li>\n<li>run this command from commandline <code>javadoc -d \"C:/docs\" *.java</code>\n<br><br>and successfully my codes documentation generated</li>\n</ol>\n\n<p>Thanks from the bottom of my heart to stackoverflow and participants of this thread</p>\n"},{"tags":["java","selenium-webdriver","implicitwait"],"comments":[{"owner":{"account_id":10299692,"reputation":5719,"user_id":7598774,"accept_rate":75,"display_name":"Shawn"},"score":3,"creation_date":1691587827,"post_id":76868241,"comment_id":135511829,"body_markdown":"Can you show the relevant code?","body":"Can you show the relevant code?"},{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":1,"creation_date":1691588930,"post_id":76868241,"comment_id":135512095,"body_markdown":"Please provide enough code so others can better understand or reproduce the problem.","body":"Please provide enough code so others can better understand or reproduce the problem."},{"owner":{"account_id":213468,"reputation":103489,"user_id":466862,"display_name":"Mark Rotteveel"},"score":0,"creation_date":1691605396,"post_id":76868241,"comment_id":135515582,"body_markdown":"The most likely cause is that you&#39;re combining incompatible versions of libraries.","body":"The most likely cause is that you&#39;re combining incompatible versions of libraries."}],"answers":[{"tags":[],"owner":{"account_id":10049107,"reputation":186627,"user_id":7429447,"accept_rate":86,"display_name":"undetected Selenium"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691617874,"creation_date":1691617874,"answer_id":76871493,"question_id":76868241,"body_markdown":"The current notation for [`implicitlyWait`](https://stackoverflow.com/a/45674706/7429447) uses the `Duration.ofSeconds(n)` as the unit of time and can be implemented as follows:\r\n\r\n\r\n\timport java.time.Duration;\r\n\timport org.openqa.selenium.WebDriver;\r\n\t\r\n\tdriver.manage().timeouts().implicitlyWait(Duration.ofSeconds(10));","title":"No Such Method error while using implicitlyWait(Duration.ofSeconds(10)","body":"<p>The current notation for <a href=\"https://stackoverflow.com/a/45674706/7429447\"><code>implicitlyWait</code></a> uses the <code>Duration.ofSeconds(n)</code> as the unit of time and can be implemented as follows:</p>\n<pre><code>import java.time.Duration;\nimport org.openqa.selenium.WebDriver;\n\ndriver.manage().timeouts().implicitlyWait(Duration.ofSeconds(10));\n</code></pre>\n"}],"owner":{"account_id":11439846,"reputation":1,"user_id":8385848,"display_name":"Devi"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":58,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1691617874,"creation_date":1691587573,"question_id":76868241,"body_markdown":"````\r\nava.lang.NoSuchMethodError: &#39;org.openqa.selenium.WebDriver$Timeouts org.openqa.selenium.WebDriver$Timeouts.implicitlyWait(java.time.Duration)\r\n````\r\nThis error is coming when I removed deprecated implicit wait to latest one.\r\n\r\nPlease any one provide me a solution to resolve this.\r\n\r\nTo launch a browser successfully","title":"No Such Method error while using implicitlyWait(Duration.ofSeconds(10)","body":"<pre><code>ava.lang.NoSuchMethodError: 'org.openqa.selenium.WebDriver$Timeouts org.openqa.selenium.WebDriver$Timeouts.implicitlyWait(java.time.Duration)\n</code></pre>\n<p>This error is coming when I removed deprecated implicit wait to latest one.</p>\n<p>Please any one provide me a solution to resolve this.</p>\n<p>To launch a browser successfully</p>\n"},{"tags":["java","spring","dependency-injection","singleton","spring-ioc"],"comments":[{"owner":{"account_id":2855061,"reputation":3154,"user_id":2451486,"accept_rate":94,"display_name":"smoggers"},"score":1,"creation_date":1437850596,"post_id":31629993,"comment_id":51207309,"body_markdown":"where?? you&#39;ve not posted the configuration","body":"where?? you&#39;ve not posted the configuration"},{"owner":{"account_id":2386830,"reputation":7918,"user_id":2087640,"accept_rate":82,"display_name":"Gab"},"score":6,"creation_date":1437850874,"post_id":31629993,"comment_id":51207386,"body_markdown":"Well, if you define two bean instances of same class, there will be two instances...","body":"Well, if you define two bean instances of same class, there will be two instances..."},{"owner":{"account_id":3630754,"reputation":677,"user_id":3026998,"accept_rate":0,"display_name":"Raj"},"score":1,"creation_date":1437851143,"post_id":31629993,"comment_id":51207435,"body_markdown":"thanks Gab, since i can&#39;t understood what is the use of singleton? the meaning of singleton is only one instance (object) should be created for entire application. Then why spring is creating two objects for this.","body":"thanks Gab, since i can&#39;t understood what is the use of singleton? the meaning of singleton is only one instance (object) should be created for entire application. Then why spring is creating two objects for this."},{"owner":{"account_id":45934,"reputation":203649,"user_id":135589,"accept_rate":100,"display_name":"Jesper"},"score":23,"creation_date":1437851481,"post_id":31629993,"comment_id":51207519,"body_markdown":"You are defining two singleton beans, that happen to have the same type. The singleton is per **bean**, not per class.","body":"You are defining two singleton beans, that happen to have the same type. The singleton is per <b>bean</b>, not per class."}],"answers":[{"tags":[],"owner":{"account_id":6459874,"reputation":107,"user_id":5004085,"display_name":"Anupama Rao"},"down_vote_count":1,"up_vote_count":11,"is_accepted":false,"score":10,"last_activity_date":1437850518,"creation_date":1437850518,"answer_id":31630027,"question_id":31629993,"body_markdown":"Spring default scope is singleton and it will create one object for all instances unless you explicitly specify the scope to be prototype. You have not posted spring configuration. Please post it, it will give a better idea.","title":"Is spring default scope singleton or not?","body":"<p>Spring default scope is singleton and it will create one object for all instances unless you explicitly specify the scope to be prototype. You have not posted spring configuration. Please post it, it will give a better idea.</p>\n"},{"tags":[],"owner":{"account_id":75804,"reputation":94815,"user_id":217324,"accept_rate":96,"display_name":"Nathan Hughes"},"down_vote_count":0,"up_vote_count":86,"is_accepted":false,"score":86,"last_activity_date":1615000492,"creation_date":1437851077,"answer_id":31630098,"question_id":31629993,"body_markdown":"Spring&#39;s default scope *is* singleton. It&#39;s just that your idea of what it means to be a singleton doesn&#39;t match how Spring defines singletons.\r\n\r\nIf you tell Spring to make two separate beans with different ids and the same class, then you get two separate beans, each with singleton scope. All singleton scope means is that when you reference something with the same id, you get the same bean instance back.\r\n\r\nHere is how [the Spring documentation defines singleton scope][1]:\r\n\r\n&gt; Only one shared instance of a singleton bean is managed, and all requests for beans with an id or ids matching that bean definition result in that one specific bean instance being returned by the Spring container.\r\n\r\nSingleton scope means using the same id retrieves the same bean, that is all. Testing that no two ids referenced the same class would get in the way of using maps as beans, and would be complicated by proxying things with BeanFactories.\r\nFor Spring to police this would involve a lot of work for little benefit. Instead it trusts the users to know what they&#39;re doing.\r\n\r\n If you want a bean’s singleton-ness preserved across multiple names, that is do-able. You can have more than one name refer to the same bean, that is done by using an [alias][2]:\r\n\r\n&gt; In a bean definition itself, you can supply more than one name for the bean, by using a combination of up to one name specified by the id attribute, and any number of other names in the name attribute. These names can be equivalent aliases to the same bean, and are useful for some situations, such as allowing each component in an application to refer to a common dependency by using a bean name that is specific to that component itself.\r\n&gt;\r\n&gt; Specifying all aliases where the bean is actually defined is not always adequate, however. It is sometimes desirable to introduce an alias for a bean that is defined elsewhere. This is commonly the case in large systems where configuration is split amongst each subsystem, each subsystem having its own set of object definitions. In XML-based configuration metadata, you can use the &lt;alias/&gt; element to accomplish this.\r\n\r\nSo if you add a name in the bean configuration:\r\n\r\n    &lt;bean id=&quot;customer&quot; name=&quot;customer2&quot; \r\n        class=&quot;jp.ne.goo.beans.Customer&quot;&gt;\r\n    &lt;/bean&gt;\r\n\r\nor create an alias for a bean defined elsewhere:\r\n\r\n    &lt;alias name=&quot;customer&quot; alias=&quot;customer2&quot;/&gt;\r\n\r\nthen &quot;customer&quot; and &quot;customer2&quot; will refer to the same bean instance.\r\n\r\n\r\n  [1]: http://docs.spring.io/spring/docs/3.0.x/spring-framework-reference/htmlsingle/#beans-factory-scopes-singleton\r\n  [2]: http://docs.spring.io/spring/docs/3.0.x/spring-framework-reference/htmlsingle/#beans-beanname-alias","title":"Is spring default scope singleton or not?","body":"<p>Spring's default scope <em>is</em> singleton. It's just that your idea of what it means to be a singleton doesn't match how Spring defines singletons.</p>\n<p>If you tell Spring to make two separate beans with different ids and the same class, then you get two separate beans, each with singleton scope. All singleton scope means is that when you reference something with the same id, you get the same bean instance back.</p>\n<p>Here is how <a href=\"http://docs.spring.io/spring/docs/3.0.x/spring-framework-reference/htmlsingle/#beans-factory-scopes-singleton\" rel=\"noreferrer\">the Spring documentation defines singleton scope</a>:</p>\n<blockquote>\n<p>Only one shared instance of a singleton bean is managed, and all requests for beans with an id or ids matching that bean definition result in that one specific bean instance being returned by the Spring container.</p>\n</blockquote>\n<p>Singleton scope means using the same id retrieves the same bean, that is all. Testing that no two ids referenced the same class would get in the way of using maps as beans, and would be complicated by proxying things with BeanFactories.\nFor Spring to police this would involve a lot of work for little benefit. Instead it trusts the users to know what they're doing.</p>\n<p>If you want a bean’s singleton-ness preserved across multiple names, that is do-able. You can have more than one name refer to the same bean, that is done by using an <a href=\"http://docs.spring.io/spring/docs/3.0.x/spring-framework-reference/htmlsingle/#beans-beanname-alias\" rel=\"noreferrer\">alias</a>:</p>\n<blockquote>\n<p>In a bean definition itself, you can supply more than one name for the bean, by using a combination of up to one name specified by the id attribute, and any number of other names in the name attribute. These names can be equivalent aliases to the same bean, and are useful for some situations, such as allowing each component in an application to refer to a common dependency by using a bean name that is specific to that component itself.</p>\n<p>Specifying all aliases where the bean is actually defined is not always adequate, however. It is sometimes desirable to introduce an alias for a bean that is defined elsewhere. This is commonly the case in large systems where configuration is split amongst each subsystem, each subsystem having its own set of object definitions. In XML-based configuration metadata, you can use the  element to accomplish this.</p>\n</blockquote>\n<p>So if you add a name in the bean configuration:</p>\n<pre><code>&lt;bean id=&quot;customer&quot; name=&quot;customer2&quot; \n    class=&quot;jp.ne.goo.beans.Customer&quot;&gt;\n&lt;/bean&gt;\n</code></pre>\n<p>or create an alias for a bean defined elsewhere:</p>\n<pre><code>&lt;alias name=&quot;customer&quot; alias=&quot;customer2&quot;/&gt;\n</code></pre>\n<p>then &quot;customer&quot; and &quot;customer2&quot; will refer to the same bean instance.</p>\n"},{"tags":[],"owner":{"account_id":2386830,"reputation":7918,"user_id":2087640,"accept_rate":82,"display_name":"Gab"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1480432986,"creation_date":1437851687,"answer_id":31630190,"question_id":31629993,"body_markdown":"You&#39;re confusing two different concepts.\r\n\r\nThe word singleton in spring is used for a bean scope, meaning that the bean will be created only once for the whole application. \r\n\r\nSingleton usual meaning refers to the GOF pattern. It is an object oriented pattern guarantying that only one instance of a class will exists (at least in the scope of the classLoader). ","title":"Is spring default scope singleton or not?","body":"<p>You're confusing two different concepts.</p>\n\n<p>The word singleton in spring is used for a bean scope, meaning that the bean will be created only once for the whole application. </p>\n\n<p>Singleton usual meaning refers to the GOF pattern. It is an object oriented pattern guarantying that only one instance of a class will exists (at least in the scope of the classLoader). </p>\n"},{"tags":[],"owner":{"account_id":6582147,"reputation":438,"user_id":5086113,"accept_rate":86,"display_name":"Berrigan"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1437851778,"creation_date":1437851778,"answer_id":31630200,"question_id":31629993,"body_markdown":"You are declaring two beans of the same class. That isn&#39;t the same.\r\n\r\n    @Component(&quot;springTestClass&quot;)\r\n    public class SpringTestClass{\r\n         private int randomNumber = 0;\r\n         public SpringTestClass(){\r\n           randomNumber = new Random().nextInt(2000);\r\n         }\r\n    \r\n         public int getRandomNumber(){\r\n           return this.randomNumber;\r\n         }\r\n    \r\n    }\r\n\r\nAnd try to access this bean in two places the number will be the same. But what you have done was creating two separate beans.\r\n\r\nIf you want to check if this works try:\r\n\r\n    public class Main{\r\n       public static void main(String[] args){\r\n         ApplicationContext ctx = ....;\r\n         SpringTestClass testObject1 = (SpringTestClass)ctx.getBean(&quot;springTestClass&quot;);\r\n         SpringTestClass testObject2 = (SpringTestClass)ctx.getBean(&quot;springTestClass&quot;);\r\n    \r\n        System.out.println(testObject1.getRandomNumber() == testObject2.getRandomNumber());\r\n       }\r\n    }\r\n\r\nThis code should return true if it is same instance;\r\nBut in SpringTestClass you can add @Scope(&quot;prototype&quot;) annotation. \r\nThe output will be false","title":"Is spring default scope singleton or not?","body":"<p>You are declaring two beans of the same class. That isn't the same.</p>\n\n<pre><code>@Component(\"springTestClass\")\npublic class SpringTestClass{\n     private int randomNumber = 0;\n     public SpringTestClass(){\n       randomNumber = new Random().nextInt(2000);\n     }\n\n     public int getRandomNumber(){\n       return this.randomNumber;\n     }\n\n}\n</code></pre>\n\n<p>And try to access this bean in two places the number will be the same. But what you have done was creating two separate beans.</p>\n\n<p>If you want to check if this works try:</p>\n\n<pre><code>public class Main{\n   public static void main(String[] args){\n     ApplicationContext ctx = ....;\n     SpringTestClass testObject1 = (SpringTestClass)ctx.getBean(\"springTestClass\");\n     SpringTestClass testObject2 = (SpringTestClass)ctx.getBean(\"springTestClass\");\n\n    System.out.println(testObject1.getRandomNumber() == testObject2.getRandomNumber());\n   }\n}\n</code></pre>\n\n<p>This code should return true if it is same instance;\nBut in SpringTestClass you can add @Scope(\"prototype\") annotation. \nThe output will be false</p>\n"},{"tags":[],"owner":{"account_id":1479983,"reputation":111,"user_id":5885447,"display_name":"ryoung10"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1691617735,"creation_date":1463490378,"answer_id":37277073,"question_id":31629993,"body_markdown":"Like others have mentioned, two beans should be created from the code you posted. Singletons are defined as follows (from the Spring documentation: [Singleton Scope](http://docs.spring.io/spring/docs/3.0.x/spring-framework-reference/htmlsingle/#beans-factory-scopes-singleton))\r\n\r\n&gt; Only one shared instance of a singleton bean is managed, and all requests for beans with an id or ids matching that bean definition result in that one specific bean instance being returned by the Spring container.\r\n\r\nTo add clarity to this, the meaning behind &quot;shared instance&quot; is explained in the paragraph that follows the one above:\r\n\r\n&gt; all subsequent requests and references for that named bean return the cached object\r\n\r\nWhen a singleton bean is created, only one bean object is instantiated and cached. This refers only to the bean, not to whatever class the bean may be an instance of. For example,\r\n\r\n    &lt;bean id=&quot;myBean&quot; class=&quot;myPackage.myClass&quot; /&gt;\r\n\r\n    &lt;bean id=&quot;myOtherBean1&quot; class=&quot;myPackage.myOtherClass1&quot;&gt;\r\n        &lt;property name=&quot;beanReference1&quot; ref=&quot;myBean&quot; /&gt;\r\n    &lt;/bean&gt;\r\n    &lt;bean id=&quot;myOtherBean2&quot; class=&quot;myPackage.myOtherClass2&quot;&gt;\r\n        &lt;property name=&quot;beanReference2&quot; ref=&quot;myBean&quot; /&gt;\r\n    &lt;/bean&gt;\r\n\r\nIn this made up configuration, &quot;myOtherBean1&quot; and &quot;myOtherBean2&quot; have references to the same &quot;myBean&quot; bean therefore the same &quot;myPackage.myClass&quot; instance. If you changed the code to add a second &quot;myPackage.myClass&quot; bean, it would be distinct from &quot;myBean&quot;.\r\n\r\nTo fully understand this, also refer to the other Spring scope: the prototype. From the Spring documentation for [Prototype Scope](http://docs.spring.io/spring/docs/3.0.x/spring-framework-reference/htmlsingle/#beans-factory-scopes-prototype):\r\n\r\n&gt; The non-singleton, prototype scope of bean deployment results in the creation of a new bean instance every time a request for that specific bean is made.\r\n\r\nThis means that if we were to use the same Spring XML as above, &quot;myOtherBean1&quot; and &quot;myOtherBean2&quot; would each receive their own distinct copies of &quot;myBean&quot; which is still just an instance of &quot;myPackage.myClass&quot;.","title":"Is spring default scope singleton or not?","body":"<p>Like others have mentioned, two beans should be created from the code you posted. Singletons are defined as follows (from the Spring documentation: <a href=\"http://docs.spring.io/spring/docs/3.0.x/spring-framework-reference/htmlsingle/#beans-factory-scopes-singleton\" rel=\"nofollow noreferrer\">Singleton Scope</a>)</p>\n<blockquote>\n<p>Only one shared instance of a singleton bean is managed, and all requests for beans with an id or ids matching that bean definition result in that one specific bean instance being returned by the Spring container.</p>\n</blockquote>\n<p>To add clarity to this, the meaning behind &quot;shared instance&quot; is explained in the paragraph that follows the one above:</p>\n<blockquote>\n<p>all subsequent requests and references for that named bean return the cached object</p>\n</blockquote>\n<p>When a singleton bean is created, only one bean object is instantiated and cached. This refers only to the bean, not to whatever class the bean may be an instance of. For example,</p>\n<pre><code>&lt;bean id=&quot;myBean&quot; class=&quot;myPackage.myClass&quot; /&gt;\n\n&lt;bean id=&quot;myOtherBean1&quot; class=&quot;myPackage.myOtherClass1&quot;&gt;\n    &lt;property name=&quot;beanReference1&quot; ref=&quot;myBean&quot; /&gt;\n&lt;/bean&gt;\n&lt;bean id=&quot;myOtherBean2&quot; class=&quot;myPackage.myOtherClass2&quot;&gt;\n    &lt;property name=&quot;beanReference2&quot; ref=&quot;myBean&quot; /&gt;\n&lt;/bean&gt;\n</code></pre>\n<p>In this made up configuration, &quot;myOtherBean1&quot; and &quot;myOtherBean2&quot; have references to the same &quot;myBean&quot; bean therefore the same &quot;myPackage.myClass&quot; instance. If you changed the code to add a second &quot;myPackage.myClass&quot; bean, it would be distinct from &quot;myBean&quot;.</p>\n<p>To fully understand this, also refer to the other Spring scope: the prototype. From the Spring documentation for <a href=\"http://docs.spring.io/spring/docs/3.0.x/spring-framework-reference/htmlsingle/#beans-factory-scopes-prototype\" rel=\"nofollow noreferrer\">Prototype Scope</a>:</p>\n<blockquote>\n<p>The non-singleton, prototype scope of bean deployment results in the creation of a new bean instance every time a request for that specific bean is made.</p>\n</blockquote>\n<p>This means that if we were to use the same Spring XML as above, &quot;myOtherBean1&quot; and &quot;myOtherBean2&quot; would each receive their own distinct copies of &quot;myBean&quot; which is still just an instance of &quot;myPackage.myClass&quot;.</p>\n"},{"tags":[],"owner":{"account_id":10880077,"reputation":1286,"user_id":7999311,"display_name":"Adam Ostrožl&#237;k"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1536821532,"creation_date":1536821532,"answer_id":52308109,"question_id":31629993,"body_markdown":"&gt; The following example shows a @Bean annotated method being called\r\n&gt; twice:\r\n\r\n    @Configuration\r\n    public class AppConfig {\r\n    \r\n        @Bean\r\n        public ClientService clientService1() {\r\n            ClientServiceImpl clientService = new ClientServiceImpl();\r\n            clientService.setClientDao(clientDao());\r\n            return clientService;\r\n        }\r\n    \r\n        @Bean\r\n        public ClientService clientService2() {\r\n            ClientServiceImpl clientService = new ClientServiceImpl();\r\n            clientService.setClientDao(clientDao());\r\n            return clientService;\r\n        }\r\n    \r\n        @Bean\r\n        public ClientDao clientDao() {\r\n            return new ClientDaoImpl();\r\n        }\r\n    \r\n    }\r\n\r\n&gt; clientDao() has been called once in clientService1() and once in\r\n&gt; clientService2(). Since this method creates a new instance of\r\n&gt; ClientDaoImpl and returns it, you would normally expect having 2\r\n&gt; instances (one for each service). That definitely would be\r\n&gt; problematic: in Spring, instantiated beans have a singleton scope by\r\n&gt; default. This is where the magic comes in: All @Configuration classes\r\n&gt; are subclassed at startup-time with CGLIB. In the subclass, the child\r\n&gt; method checks the container first for any cached (scoped) beans before\r\n&gt; it calls the parent method and creates a new instance. Note that as of\r\n&gt; Spring 3.2, it is no longer necessary to add CGLIB to your classpath\r\n&gt; because CGLIB classes have been repackaged under\r\n&gt; org.springframework.cglib and included directly within the spring-core\r\n&gt; JAR.","title":"Is spring default scope singleton or not?","body":"<blockquote>\n  <p>The following example shows a @Bean annotated method being called\n  twice:</p>\n</blockquote>\n\n<pre><code>@Configuration\npublic class AppConfig {\n\n    @Bean\n    public ClientService clientService1() {\n        ClientServiceImpl clientService = new ClientServiceImpl();\n        clientService.setClientDao(clientDao());\n        return clientService;\n    }\n\n    @Bean\n    public ClientService clientService2() {\n        ClientServiceImpl clientService = new ClientServiceImpl();\n        clientService.setClientDao(clientDao());\n        return clientService;\n    }\n\n    @Bean\n    public ClientDao clientDao() {\n        return new ClientDaoImpl();\n    }\n\n}\n</code></pre>\n\n<blockquote>\n  <p>clientDao() has been called once in clientService1() and once in\n  clientService2(). Since this method creates a new instance of\n  ClientDaoImpl and returns it, you would normally expect having 2\n  instances (one for each service). That definitely would be\n  problematic: in Spring, instantiated beans have a singleton scope by\n  default. This is where the magic comes in: All @Configuration classes\n  are subclassed at startup-time with CGLIB. In the subclass, the child\n  method checks the container first for any cached (scoped) beans before\n  it calls the parent method and creates a new instance. Note that as of\n  Spring 3.2, it is no longer necessary to add CGLIB to your classpath\n  because CGLIB classes have been repackaged under\n  org.springframework.cglib and included directly within the spring-core\n  JAR.</p>\n</blockquote>\n"},{"tags":[],"owner":{"account_id":8869862,"reputation":61,"user_id":6623869,"display_name":"Pritam"},"down_vote_count":1,"up_vote_count":5,"is_accepted":false,"score":4,"last_activity_date":1595237740,"creation_date":1555271378,"answer_id":55679403,"question_id":31629993,"body_markdown":"In Spring Singleton refers to One bean per Spring container where as in Java Singleton refers to one object per class loader. \r\n\r\nSo Spring singleton is not same as java singleton. Don&#39;t get confused between these two.","title":"Is spring default scope singleton or not?","body":"<p>In Spring Singleton refers to One bean per Spring container where as in Java Singleton refers to one object per class loader.</p>\n<p>So Spring singleton is not same as java singleton. Don't get confused between these two.</p>\n"},{"tags":[],"owner":{"account_id":6331029,"reputation":21,"user_id":4915965,"display_name":"gopal jha"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1564465330,"creation_date":1564464260,"answer_id":57264793,"question_id":31629993,"body_markdown":"Spring Singleton Bean Does not work like Java Singleton. \r\n\r\nIf we write\r\n\r\n    ApplicationContext ctx = new ClassPathXmlApplicationContext(&quot;MyConfig.xml&quot;);\r\n            Customer obj1= (Customer) ctx.getBean(&quot;customer&quot;);\r\n            Customer obj2 = (Customer) ctx.getBean(&quot;customer2&quot;);\r\n            System.out.println(obj1 == obj2);\r\n            System.out.println(obj1+ &quot;::&quot; + obj2);\r\n\r\nIf we see the output it will return 2 different Instance.\r\nAccording to Spring Docs\r\nBean is singleton only one shared Instance will be managed, and all request beans with an ID or ID matching that bean definition. Here 2 different ID is available.\r\n\r\nSpring container as managing Key value pair, Key as ID/Name and value is bean.\r\n\r\n","title":"Is spring default scope singleton or not?","body":"<p>Spring Singleton Bean Does not work like Java Singleton. </p>\n\n<p>If we write</p>\n\n<pre><code>ApplicationContext ctx = new ClassPathXmlApplicationContext(\"MyConfig.xml\");\n        Customer obj1= (Customer) ctx.getBean(\"customer\");\n        Customer obj2 = (Customer) ctx.getBean(\"customer2\");\n        System.out.println(obj1 == obj2);\n        System.out.println(obj1+ \"::\" + obj2);\n</code></pre>\n\n<p>If we see the output it will return 2 different Instance.\nAccording to Spring Docs\nBean is singleton only one shared Instance will be managed, and all request beans with an ID or ID matching that bean definition. Here 2 different ID is available.</p>\n\n<p>Spring container as managing Key value pair, Key as ID/Name and value is bean.</p>\n"},{"tags":[],"owner":{"account_id":21526676,"reputation":21,"user_id":15866832,"display_name":"Bhanu"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1620748840,"creation_date":1620748840,"answer_id":67490391,"question_id":31629993,"body_markdown":"spring default scope is singleton. Once the bean will be created and same bean used throughout its lifecycle.","title":"Is spring default scope singleton or not?","body":"<p>spring default scope is singleton. Once the bean will be created and same bean used throughout its lifecycle.</p>\n"}],"owner":{"account_id":3630754,"reputation":677,"user_id":3026998,"accept_rate":0,"display_name":"Raj"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":110032,"favorite_count":0,"down_vote_count":2,"up_vote_count":60,"answer_count":9,"score":58,"last_activity_date":1691617735,"creation_date":1437850326,"question_id":31629993,"body_markdown":"Could you please explain why Spring is creating two objects for the configuration of beans shown below, since by default spring default scope is singleton?\r\n    \r\nThe Spring configuration is here:\r\n\r\n    &lt;bean id=&quot;customer&quot; class=&quot;jp.ne.goo.beans.Customer&quot;&gt; \r\n        &lt;property name=&quot;custno&quot; value=&quot;100&quot;&gt;&lt;/property&gt;\r\n        &lt;property name=&quot;custName&quot; value=&quot;rajasekhar&quot;&gt; &lt;/property&gt;\r\n    &lt;/bean&gt;\r\n    &lt;bean id=&quot;customer2&quot; class=&quot;jp.ne.goo.beans.Customer&quot;&gt; \r\n        &lt;property name=&quot;custno&quot; value=&quot;200&quot;&gt;&lt;/property&gt; \r\n        &lt;property name=&quot;custName&quot; value=&quot;siva&quot;&gt;&lt;/property&gt; \r\n    &lt;/bean&gt;\r\n\r\n","title":"Is spring default scope singleton or not?","body":"<p>Could you please explain why Spring is creating two objects for the configuration of beans shown below, since by default spring default scope is singleton?</p>\n\n<p>The Spring configuration is here:</p>\n\n<pre><code>&lt;bean id=\"customer\" class=\"jp.ne.goo.beans.Customer\"&gt; \n    &lt;property name=\"custno\" value=\"100\"&gt;&lt;/property&gt;\n    &lt;property name=\"custName\" value=\"rajasekhar\"&gt; &lt;/property&gt;\n&lt;/bean&gt;\n&lt;bean id=\"customer2\" class=\"jp.ne.goo.beans.Customer\"&gt; \n    &lt;property name=\"custno\" value=\"200\"&gt;&lt;/property&gt; \n    &lt;property name=\"custName\" value=\"siva\"&gt;&lt;/property&gt; \n&lt;/bean&gt;\n</code></pre>\n"},{"tags":["java","spring","session","jboss","jndi"],"owner":{"account_id":5536358,"reputation":43,"user_id":4394528,"display_name":"Kmus"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":23,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1691617030,"creation_date":1691617030,"question_id":76871424,"body_markdown":"I&#39;m working on creating a prototype web app in Java on a JBoss server. I&#39;m using Spring, and right now I&#39;m trying to get an understanding of session management but I&#39;m having difficulty getting even the most basic form to work on JBoss.\r\n\r\nI&#39;m following this guide https://www.javainuse.com/spring/springboot_session\r\n\r\nI couldn&#39;t find a guide that matched my exact situation. JBoss, and Oracle. My oracle connection is declared as a Datasource in the JBoss console. This example guide has you instead setup your DB credentials in the application.properties, I had to change that. I also had some issues with importing some of the libraries in pom.xml so I tweaked that too.\r\n\r\nI&#39;m here cause the code doesn&#39;t seem to be running, and also I&#39;m not getting any meaningfull errors, just blank pages. \r\n\r\nThe code should render a form at root /\r\nYou can enter a value and post that to /persistMessage which will add that as a session var and then redirect you back to root / where the value you entered will be displayed via the session\r\n\r\nWhen I load up root I get the form, enter  value, submit and /persistMessage just loads a white page, does not redirect. I did some troubleshooting and it seems to be failing on the very first line of code &quot;List&lt;String&gt; messages = (List&lt;String&gt;) request.getSession().getAttribute(&quot;MY_SESSION_MESSAGES&quot;);&quot;\r\n\r\nCan anyone point me in the right direction to start troubleshooting this? Or, perhaps point me to a better guide or educational material that fits my scenario?\r\n\r\nI&#39;m waiting on database credentials, as soon as I get those I&#39;ll log in and see if the spring_session table has been created. ( I assume it wont be)\r\n\r\nMy Setup:\r\n\r\nI have the following libraries:\r\n\r\n**Prototype1Application.java**\r\n\r\n    package private.prototype1;\r\n    \r\n    import org.springframework.boot.SpringApplication;\r\n    import org.springframework.boot.autoconfigure.SpringBootApplication;\t\r\n    \r\n    @SpringBootApplication\r\n    public class Prototype1Application {\r\n    \r\n    \tpublic static void main(String[] args) {\r\n    \t\tSpringApplication.run(Prototype1Application.class, args);\r\n    \t}\r\n    \r\n    }\r\n\r\n**ServerInitializer.java**\r\n\r\n    package private.prototype1;\r\n    \r\n    import org.springframework.boot.builder.SpringApplicationBuilder;\r\n    import org.springframework.boot.web.servlet.support.SpringBootServletInitializer;\r\n    \r\n    public class ServletInitializer extends SpringBootServletInitializer {\r\n    \r\n    \t@Override\r\n    \tprotected SpringApplicationBuilder configure(SpringApplicationBuilder application) {\r\n    \t\treturn application.sources(Prototype1Application.class);\r\n    \t}\r\n    \r\n    }\r\n\r\n**SpringSessionController.java**\r\n\r\n    package private.prototype1;\r\n    \r\n    import java.util.ArrayList;\r\n    import java.util.List;\r\n    \r\n    import javax.servlet.http.HttpServletRequest;\r\n    import javax.servlet.http.HttpSession;\r\n    \r\n    import org.springframework.stereotype.Controller;\r\n    import org.springframework.ui.Model;\r\n    import org.springframework.web.bind.annotation.GetMapping;\r\n    import org.springframework.web.bind.annotation.PostMapping;\r\n    import org.springframework.web.bind.annotation.RequestParam;\r\n    \r\n    @Controller\r\n    public class SpringSessionController {\r\n    \r\n    \r\n    \t@GetMapping(&quot;/&quot;)\r\n    \tpublic String process(Model model, HttpSession session) {\r\n    \t\t@SuppressWarnings(&quot;unchecked&quot;)\r\n    \t\tList&lt;String&gt; messages = (List&lt;String&gt;) session.getAttribute(&quot;MY_SESSION_MESSAGES&quot;);\r\n    \r\n    \t\tif (messages == null) {\r\n    \t\t\tmessages = new ArrayList&lt;&gt;();\r\n    \t\t}\r\n    \t\tmodel.addAttribute(&quot;sessionMessages&quot;, messages);\r\n    \r\n    \t\treturn &quot;index&quot;;\r\n    \t}\r\n    \t\r\n    \r\n    \t@PostMapping(&quot;/persistMessage&quot;)\r\n    \tpublic String persistMessage(@RequestParam(&quot;msg&quot;) String msg, HttpServletRequest request) {\r\n    \t\t//@SuppressWarnings(&quot;unchecked&quot;)\r\n    \t\tList&lt;String&gt; messages = (List&lt;String&gt;) request.getSession().getAttribute(&quot;MY_SESSION_MESSAGES&quot;);\r\n    \t\t\r\n    \t\tif (messages == null) {\r\n    \t\t\tmessages = new ArrayList&lt;&gt;();\r\n    \t\t\trequest.getSession().setAttribute(&quot;MY_SESSION_MESSAGES&quot;, messages);\r\n    \t\t}\r\n    \t\tmessages.add(msg);\r\n    \t\trequest.getSession().setAttribute(&quot;MY_SESSION_MESSAGES&quot;, messages);\r\n    \t\treturn &quot;redirect:/&quot;;\r\n    \t}\r\n    \t\r\n    \t\r\n    \t@PostMapping(&quot;/destroy&quot;)\r\n    \tpublic String destroySession(HttpServletRequest request) {\r\n    \t\trequest.getSession().invalidate();\r\n    \t\treturn &quot;redirect:/&quot;;\r\n    \t}\r\n    }\r\n\r\n**templates/index.html**\r\n\r\n    &lt;!DOCTYPE html&gt;\r\n    &lt;html lang=&quot;en&quot; xmlns:th=&quot;http://www.thymeleaf.org&quot;&gt;\r\n    &lt;head&gt;\r\n    &lt;meta charset=&quot;UTF-8&quot;&gt;\r\n    &lt;title&gt;Spring Boot Session Example&lt;/title&gt;\r\n    &lt;/head&gt;\r\n    &lt;body&gt;\r\n    \t&lt;div&gt;\r\n    \t\t&lt;form th:action=&quot;@{/persistMessage}&quot; method=&quot;post&quot;&gt;\r\n    \t\t\t&lt;textarea name=&quot;msg&quot; cols=&quot;40&quot; rows=&quot;2&quot;&gt;&lt;/textarea&gt;\r\n    \t\t\t&lt;br&gt; &lt;input type=&quot;submit&quot; value=&quot;Save Message&quot; /&gt;\r\n    \t\t&lt;/form&gt;\r\n    \t&lt;/div&gt;\r\n    \t&lt;div&gt;\r\n    \t\t&lt;h2&gt;Messages2&lt;/h2&gt;\r\n    \t\t&lt;ul th:each=&quot;message : ${sessionMessages}&quot;&gt;\r\n    \t\t\t&lt;li th:text=&quot;&quot;&gt;msg&lt;/li&gt;\r\n    \t\t&lt;/ul&gt;\r\n    \t&lt;/div&gt;\r\n    \t&lt;div&gt;\r\n    \t\t&lt;form th:action=&quot;@{/destroy}&quot; method=&quot;post&quot;&gt;\r\n    \t\t\t&lt;input type=&quot;submit&quot; value=&quot;Destroy Session&quot; /&gt;\r\n    \t\t&lt;/form&gt;\r\n    \t&lt;/div&gt;\r\n    &lt;/body&gt;\r\n    &lt;/html&gt;\r\n\r\n**application.properties** This is where I departed from the guide, I jused the jndi-name to point to my jboss datasource. I did this based on some googling around.. not sure this is the correct way.\r\n\r\n    spring.datasource.jndi-name = java:jboss/OracleDSprottype\r\n    \r\n    spring.h2.console.enabled=true\r\n    \r\n    spring.session.store-type=jdbc\r\n    spring.session.jdbc.initialize-schema=always\r\n    spring.session.timeout.seconds=900\r\n\r\n**pom.xml** I also departed from the guide here, I removed the mysql library since i was using oracle. Not sure if I should have replaced it with something else.\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n    &lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n    \txsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\r\n    \t&lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n    \t&lt;parent&gt;\r\n    \t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n    \t\t&lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\r\n\t\t&lt;version&gt;2.7.11&lt;/version&gt;\r\n\t\t&lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;\r\n\t&lt;/parent&gt;\r\n\t&lt;groupId&gt;private&lt;/groupId&gt;\r\n\t&lt;artifactId&gt;prototype-1&lt;/artifactId&gt;\r\n\t&lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\r\n\t&lt;packaging&gt;war&lt;/packaging&gt;\r\n\t&lt;name&gt;prototype-1&lt;/name&gt;\r\n\t&lt;description&gt;prototype for a spring site&lt;/description&gt;\r\n\t&lt;properties&gt;\r\n\t\t&lt;java.version&gt;11&lt;/java.version&gt;\r\n\t&lt;/properties&gt;\r\n\t&lt;dependencies&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-thymeleaf&lt;/artifactId&gt;\r\n\t\t    &lt;exclusions&gt;\r\n\t\t\t&lt;!-- ************************************************************* --&gt;\r\n\t\t\t&lt;!-- had to exclude these items or the War wouldnt deploy on JBoss --&gt;\r\n\t\t\t&lt;!-- ************************************************************* --&gt;\r\n\t\t        &lt;exclusion&gt;\r\n\t\t            &lt;groupId&gt;ch.qos.logback&lt;/groupId&gt;\r\n\t\t            &lt;artifactId&gt;logback-classic&lt;/artifactId&gt;\r\n\t\t        &lt;/exclusion&gt;\r\n\t\t    &lt;/exclusions&gt;\r\n\t    &lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\r\n\t\t\t&lt;exclusions&gt;\r\n\t\t\t\t&lt;exclusion&gt;\r\n\t\t\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t\t\t&lt;artifactId&gt;spring-boot-starter-tomcat&lt;/artifactId&gt;\r\n\t\t\t\t&lt;/exclusion&gt;\r\n\t\t\t\t&lt;exclusion&gt;\r\n\t\t\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t\t\t&lt;artifactId&gt;spring-boot-starter-logging&lt;/artifactId&gt;\r\n\t\t\t\t&lt;/exclusion&gt;\r\n\t\t\t&lt;/exclusions&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;com.oracle.database.jdbc&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;ojdbc8&lt;/artifactId&gt;\r\n\t\t\t&lt;scope&gt;runtime&lt;/scope&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\r\n\t\t\t&lt;scope&gt;test&lt;/scope&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n   \t\t\t&lt;groupId&gt;org.jboss.logging&lt;/groupId&gt;\r\n   \t\t\t&lt;artifactId&gt;jboss-logging&lt;/artifactId&gt;\r\n  \t\t\t&lt;scope&gt;provided&lt;/scope&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t    &lt;dependency&gt;\r\n\t      &lt;groupId&gt;javax.servlet&lt;/groupId&gt;\r\n\t      &lt;artifactId&gt;javax.servlet-api&lt;/artifactId&gt;\r\n\t      &lt;scope&gt;provided&lt;/scope&gt;\r\n\t    &lt;/dependency&gt;\r\n\t    &lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-jdbc&lt;/artifactId&gt;\t\t\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.session&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-session-core&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.session&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-session-jdbc&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t&lt;/dependencies&gt;\r\n\t&lt;build&gt;\r\n\t\t&lt;plugins&gt;\r\n\t\t&lt;/plugins&gt;\r\n\t&lt;/build&gt;\r\n\r\n&lt;/project&gt;","title":"Trouble Getting Started with Spring Session","body":"<p>I'm working on creating a prototype web app in Java on a JBoss server. I'm using Spring, and right now I'm trying to get an understanding of session management but I'm having difficulty getting even the most basic form to work on JBoss.</p>\n<p>I'm following this guide <a href=\"https://www.javainuse.com/spring/springboot_session\" rel=\"nofollow noreferrer\">https://www.javainuse.com/spring/springboot_session</a></p>\n<p>I couldn't find a guide that matched my exact situation. JBoss, and Oracle. My oracle connection is declared as a Datasource in the JBoss console. This example guide has you instead setup your DB credentials in the application.properties, I had to change that. I also had some issues with importing some of the libraries in pom.xml so I tweaked that too.</p>\n<p>I'm here cause the code doesn't seem to be running, and also I'm not getting any meaningfull errors, just blank pages.</p>\n<p>The code should render a form at root /\nYou can enter a value and post that to /persistMessage which will add that as a session var and then redirect you back to root / where the value you entered will be displayed via the session</p>\n<p>When I load up root I get the form, enter  value, submit and /persistMessage just loads a white page, does not redirect. I did some troubleshooting and it seems to be failing on the very first line of code &quot;List messages = (List) request.getSession().getAttribute(&quot;MY_SESSION_MESSAGES&quot;);&quot;</p>\n<p>Can anyone point me in the right direction to start troubleshooting this? Or, perhaps point me to a better guide or educational material that fits my scenario?</p>\n<p>I'm waiting on database credentials, as soon as I get those I'll log in and see if the spring_session table has been created. ( I assume it wont be)</p>\n<p>My Setup:</p>\n<p>I have the following libraries:</p>\n<p><strong>Prototype1Application.java</strong></p>\n<pre><code>package private.prototype1;\n\nimport org.springframework.boot.SpringApplication;\nimport org.springframework.boot.autoconfigure.SpringBootApplication;    \n\n@SpringBootApplication\npublic class Prototype1Application {\n\n    public static void main(String[] args) {\n        SpringApplication.run(Prototype1Application.class, args);\n    }\n\n}\n</code></pre>\n<p><strong>ServerInitializer.java</strong></p>\n<pre><code>package private.prototype1;\n\nimport org.springframework.boot.builder.SpringApplicationBuilder;\nimport org.springframework.boot.web.servlet.support.SpringBootServletInitializer;\n\npublic class ServletInitializer extends SpringBootServletInitializer {\n\n    @Override\n    protected SpringApplicationBuilder configure(SpringApplicationBuilder application) {\n        return application.sources(Prototype1Application.class);\n    }\n\n}\n</code></pre>\n<p><strong>SpringSessionController.java</strong></p>\n<pre><code>package private.prototype1;\n\nimport java.util.ArrayList;\nimport java.util.List;\n\nimport javax.servlet.http.HttpServletRequest;\nimport javax.servlet.http.HttpSession;\n\nimport org.springframework.stereotype.Controller;\nimport org.springframework.ui.Model;\nimport org.springframework.web.bind.annotation.GetMapping;\nimport org.springframework.web.bind.annotation.PostMapping;\nimport org.springframework.web.bind.annotation.RequestParam;\n\n@Controller\npublic class SpringSessionController {\n\n\n    @GetMapping(&quot;/&quot;)\n    public String process(Model model, HttpSession session) {\n        @SuppressWarnings(&quot;unchecked&quot;)\n        List&lt;String&gt; messages = (List&lt;String&gt;) session.getAttribute(&quot;MY_SESSION_MESSAGES&quot;);\n\n        if (messages == null) {\n            messages = new ArrayList&lt;&gt;();\n        }\n        model.addAttribute(&quot;sessionMessages&quot;, messages);\n\n        return &quot;index&quot;;\n    }\n    \n\n    @PostMapping(&quot;/persistMessage&quot;)\n    public String persistMessage(@RequestParam(&quot;msg&quot;) String msg, HttpServletRequest request) {\n        //@SuppressWarnings(&quot;unchecked&quot;)\n        List&lt;String&gt; messages = (List&lt;String&gt;) request.getSession().getAttribute(&quot;MY_SESSION_MESSAGES&quot;);\n        \n        if (messages == null) {\n            messages = new ArrayList&lt;&gt;();\n            request.getSession().setAttribute(&quot;MY_SESSION_MESSAGES&quot;, messages);\n        }\n        messages.add(msg);\n        request.getSession().setAttribute(&quot;MY_SESSION_MESSAGES&quot;, messages);\n        return &quot;redirect:/&quot;;\n    }\n    \n    \n    @PostMapping(&quot;/destroy&quot;)\n    public String destroySession(HttpServletRequest request) {\n        request.getSession().invalidate();\n        return &quot;redirect:/&quot;;\n    }\n}\n</code></pre>\n<p><strong>templates/index.html</strong></p>\n<pre><code>&lt;!DOCTYPE html&gt;\n&lt;html lang=&quot;en&quot; xmlns:th=&quot;http://www.thymeleaf.org&quot;&gt;\n&lt;head&gt;\n&lt;meta charset=&quot;UTF-8&quot;&gt;\n&lt;title&gt;Spring Boot Session Example&lt;/title&gt;\n&lt;/head&gt;\n&lt;body&gt;\n    &lt;div&gt;\n        &lt;form th:action=&quot;@{/persistMessage}&quot; method=&quot;post&quot;&gt;\n            &lt;textarea name=&quot;msg&quot; cols=&quot;40&quot; rows=&quot;2&quot;&gt;&lt;/textarea&gt;\n            &lt;br&gt; &lt;input type=&quot;submit&quot; value=&quot;Save Message&quot; /&gt;\n        &lt;/form&gt;\n    &lt;/div&gt;\n    &lt;div&gt;\n        &lt;h2&gt;Messages2&lt;/h2&gt;\n        &lt;ul th:each=&quot;message : ${sessionMessages}&quot;&gt;\n            &lt;li th:text=&quot;&quot;&gt;msg&lt;/li&gt;\n        &lt;/ul&gt;\n    &lt;/div&gt;\n    &lt;div&gt;\n        &lt;form th:action=&quot;@{/destroy}&quot; method=&quot;post&quot;&gt;\n            &lt;input type=&quot;submit&quot; value=&quot;Destroy Session&quot; /&gt;\n        &lt;/form&gt;\n    &lt;/div&gt;\n&lt;/body&gt;\n&lt;/html&gt;\n</code></pre>\n<p><strong>application.properties</strong> This is where I departed from the guide, I jused the jndi-name to point to my jboss datasource. I did this based on some googling around.. not sure this is the correct way.</p>\n<pre><code>spring.datasource.jndi-name = java:jboss/OracleDSprottype\n\nspring.h2.console.enabled=true\n\nspring.session.store-type=jdbc\nspring.session.jdbc.initialize-schema=always\nspring.session.timeout.seconds=900\n</code></pre>\n<p><strong>pom.xml</strong> I also departed from the guide here, I removed the mysql library since i was using oracle. Not sure if I should have replaced it with something else.</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n    xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n    &lt;parent&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\n    &lt;version&gt;2.7.11&lt;/version&gt;\n    &lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;\n&lt;/parent&gt;\n&lt;groupId&gt;private&lt;/groupId&gt;\n&lt;artifactId&gt;prototype-1&lt;/artifactId&gt;\n&lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\n&lt;packaging&gt;war&lt;/packaging&gt;\n&lt;name&gt;prototype-1&lt;/name&gt;\n&lt;description&gt;prototype for a spring site&lt;/description&gt;\n&lt;properties&gt;\n    &lt;java.version&gt;11&lt;/java.version&gt;\n&lt;/properties&gt;\n&lt;dependencies&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-thymeleaf&lt;/artifactId&gt;\n        &lt;exclusions&gt;\n        &lt;!-- ************************************************************* --&gt;\n        &lt;!-- had to exclude these items or the War wouldnt deploy on JBoss --&gt;\n        &lt;!-- ************************************************************* --&gt;\n            &lt;exclusion&gt;\n                &lt;groupId&gt;ch.qos.logback&lt;/groupId&gt;\n                &lt;artifactId&gt;logback-classic&lt;/artifactId&gt;\n            &lt;/exclusion&gt;\n        &lt;/exclusions&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\n        &lt;exclusions&gt;\n            &lt;exclusion&gt;\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n                &lt;artifactId&gt;spring-boot-starter-tomcat&lt;/artifactId&gt;\n            &lt;/exclusion&gt;\n            &lt;exclusion&gt;\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n                &lt;artifactId&gt;spring-boot-starter-logging&lt;/artifactId&gt;\n            &lt;/exclusion&gt;\n        &lt;/exclusions&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;com.oracle.database.jdbc&lt;/groupId&gt;\n        &lt;artifactId&gt;ojdbc8&lt;/artifactId&gt;\n        &lt;scope&gt;runtime&lt;/scope&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\n        &lt;scope&gt;test&lt;/scope&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.jboss.logging&lt;/groupId&gt;\n        &lt;artifactId&gt;jboss-logging&lt;/artifactId&gt;\n        &lt;scope&gt;provided&lt;/scope&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n      &lt;groupId&gt;javax.servlet&lt;/groupId&gt;\n      &lt;artifactId&gt;javax.servlet-api&lt;/artifactId&gt;\n      &lt;scope&gt;provided&lt;/scope&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-jdbc&lt;/artifactId&gt;       \n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.session&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-session-core&lt;/artifactId&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.session&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-session-jdbc&lt;/artifactId&gt;\n    &lt;/dependency&gt;\n&lt;/dependencies&gt;\n&lt;build&gt;\n    &lt;plugins&gt;\n    &lt;/plugins&gt;\n&lt;/build&gt;\n</code></pre>\n\n"},{"tags":["java","regex"],"comments":[{"owner":{"account_id":3557625,"reputation":198996,"user_id":2970947,"display_name":"Elliott Frisch"},"score":1,"creation_date":1691585644,"post_id":76867956,"comment_id":135511304,"body_markdown":"`\\\\b` is a boundary. `&quot;Hi, myX name is XXXX Farid, X glad to meet youXXX&quot;.replaceAll(&quot;\\\\b[X]+\\\\b&quot;, &quot;&quot;)` will get rid of the lone X(s). But it won&#39;t remove all the extra whitespace you&#39;re left with.","body":"<code>\\\\b</code> is a boundary. <code>&quot;Hi, myX name is XXXX Farid, X glad to meet youXXX&quot;.replaceAll(&quot;\\\\b[X]+\\\\b&quot;, &quot;&quot;)</code> will get rid of the lone X(s). But it won&#39;t remove all the extra whitespace you&#39;re left with."},{"owner":{"account_id":92073,"reputation":1,"user_id":252518,"accept_rate":71,"display_name":"Freeman"},"score":0,"creation_date":1691586476,"post_id":76867956,"comment_id":135511481,"body_markdown":"What have you done so far???","body":"What have you done so far???"},{"owner":{"account_id":22057425,"reputation":135,"user_id":16320675,"display_name":"user16320675"},"score":0,"creation_date":1691586620,"post_id":76867956,"comment_id":135511516,"body_markdown":"&quot;*repeated more than once* - so  here `&quot;some XX is OK*&quot; XX should not be removed?","body":"&quot;<i>repeated more than once</i> - so  here `&quot;some XX is OK*&quot; XX should not be removed?"}],"answers":[{"tags":[],"owner":{"account_id":27699053,"reputation":2348,"user_id":21144042,"display_name":"Diego Borba"},"down_vote_count":1,"up_vote_count":1,"is_accepted":true,"score":0,"last_activity_date":1691586191,"creation_date":1691586191,"answer_id":76868068,"question_id":76867956,"body_markdown":"You can use `\\\\bX+(?= |$)|(?&lt;= )X+\\\\b`, this regex matches sequences of the letter &#39;X&#39; that fulfill one of two conditions:\r\n\r\n 1. The &#39;X&#39; sequence is surrounded by word boundaries (`\\\\b`) and is followed by either a space or the end of the string (`(?= |$)`).\r\n 2. The &#39;X&#39; sequence is preceded by a space and is followed by a word boundary (`(?&lt;= )X+\\\\b`).\r\n\r\nExample:\r\n\r\n```java\r\nString text = &quot;Hi, myX name is XXXX Farid, X glad to meet youXXX&quot;;\r\nString result = text.replaceAll(&quot;\\\\bX+(?= |$)|(?&lt;= )X+\\\\b&quot;, &quot;&quot;);\r\nSystem.out.println(result); //Hi, myX name is  Farid,  glad to meet youXXX\r\n```","title":"Regex : Remove Repeated and Single X from text","body":"<p>You can use <code>\\\\bX+(?= |$)|(?&lt;= )X+\\\\b</code>, this regex matches sequences of the letter 'X' that fulfill one of two conditions:</p>\n<ol>\n<li>The 'X' sequence is surrounded by word boundaries (<code>\\\\b</code>) and is followed by either a space or the end of the string (<code>(?= |$)</code>).</li>\n<li>The 'X' sequence is preceded by a space and is followed by a word boundary (<code>(?&lt;= )X+\\\\b</code>).</li>\n</ol>\n<p>Example:</p>\n<pre class=\"lang-java prettyprint-override\"><code>String text = &quot;Hi, myX name is XXXX Farid, X glad to meet youXXX&quot;;\nString result = text.replaceAll(&quot;\\\\bX+(?= |$)|(?&lt;= )X+\\\\b&quot;, &quot;&quot;);\nSystem.out.println(result); //Hi, myX name is  Farid,  glad to meet youXXX\n</code></pre>\n"},{"tags":[],"owner":{"account_id":27900922,"reputation":5928,"user_id":21305238,"display_name":"InSync"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1691616453,"creation_date":1691615698,"answer_id":76871320,"question_id":76867956,"body_markdown":"You can remove such a word nicely in one go:\r\n\r\n```none\r\n              # Match either\r\n\\h*X+$        # 0+ horizontal whitespaces followed by 1+ &#39;X&#39; at the end of string\r\n|             # or\r\n\\bX+\\h+       # a standalone series of &#39;X&#39; followed by 1+ horizontal whitespaces.\r\n```\r\n\r\nTry it [on regex101.com][1].\r\n\r\nThe first branch matches `X+` at the end of string and any horizontal whitespaces *preceding* that, whereas the second matches any other instances and any horizontal whitespaces *following* that. This is how the matches look like:\r\n\r\n```none\r\nXXX Hi, myX name is XXXX Farid, X glad to meet youXXX XX\r\n^^^^                ^^^^^       ^^                   ^^^\r\n 2                    2         2                     1\r\n```\r\n\r\nTo provide another solution, splitting and filtering also works:\r\n\r\n&lt;sub&gt;(The following function is mainly written by ChatGPT, but I have validated that it works.)&lt;/sub&gt;\r\n\r\n```java\r\nstatic String filterX(String input) {\r\n  String[] words = input.split(&quot; &quot;);\r\n    \r\n  String[] filteredWords = Arrays.stream(words)\r\n          .filter(word -&gt; !word.matches(&quot;^X+$&quot;))\r\n          .toArray(String[]::new);\r\n    \r\n  return String.join(&quot; &quot;, filteredWords);\r\n}\r\n```\r\n\r\nTry it [on ideone.com][2].\r\n\r\nFor educational purposes, the following is a more complex version of that regex. It does essentially the same thing, but doesn&#39;t require duplicating `X+`.\r\n\r\n```none\r\n(?:           # Match either\r\n  \\h          # a horizontal whitespace\r\n  (?=\\S+$)    # iff the following word ends at the end of string\r\n|             # or\r\n  \\b          # a normal word boundary\r\n)             # succeeded by\r\nX+            # 1 or more &#39;X&#39;\r\n\\h*           # and 0 or more horizontal whitespaces\r\n```\r\n\r\nTry it [on regex101.com][3].\r\n\r\n\r\n  [1]: https://regex101.com/r/ZanIZh/1\r\n  [2]: https://ideone.com/ui8pXT\r\n  [3]: https://regex101.com/r/ZanIZh/2","title":"Regex : Remove Repeated and Single X from text","body":"<p>You can remove such a word nicely in one go:</p>\n<pre class=\"lang-none prettyprint-override\"><code>              # Match either\n\\h*X+$        # 0+ horizontal whitespaces followed by 1+ 'X' at the end of string\n|             # or\n\\bX+\\h+       # a standalone series of 'X' followed by 1+ horizontal whitespaces.\n</code></pre>\n<p>Try it <a href=\"https://regex101.com/r/ZanIZh/1\" rel=\"nofollow noreferrer\">on regex101.com</a>.</p>\n<p>The first branch matches <code>X+</code> at the end of string and any horizontal whitespaces <em>preceding</em> that, whereas the second matches any other instances and any horizontal whitespaces <em>following</em> that. This is how the matches look like:</p>\n<pre class=\"lang-none prettyprint-override\"><code>XXX Hi, myX name is XXXX Farid, X glad to meet youXXX XX\n^^^^                ^^^^^       ^^                   ^^^\n 2                    2         2                     1\n</code></pre>\n<p>To provide another solution, splitting and filtering also works:</p>\n<p><sub>(The following function is mainly written by ChatGPT, but I have validated that it works.)</sub></p>\n<pre class=\"lang-java prettyprint-override\"><code>static String filterX(String input) {\n  String[] words = input.split(&quot; &quot;);\n    \n  String[] filteredWords = Arrays.stream(words)\n          .filter(word -&gt; !word.matches(&quot;^X+$&quot;))\n          .toArray(String[]::new);\n    \n  return String.join(&quot; &quot;, filteredWords);\n}\n</code></pre>\n<p>Try it <a href=\"https://ideone.com/ui8pXT\" rel=\"nofollow noreferrer\">on ideone.com</a>.</p>\n<p>For educational purposes, the following is a more complex version of that regex. It does essentially the same thing, but doesn't require duplicating <code>X+</code>.</p>\n<pre class=\"lang-none prettyprint-override\"><code>(?:           # Match either\n  \\h          # a horizontal whitespace\n  (?=\\S+$)    # iff the following word ends at the end of string\n|             # or\n  \\b          # a normal word boundary\n)             # succeeded by\nX+            # 1 or more 'X'\n\\h*           # and 0 or more horizontal whitespaces\n</code></pre>\n<p>Try it <a href=\"https://regex101.com/r/ZanIZh/2\" rel=\"nofollow noreferrer\">on regex101.com</a>.</p>\n"}],"owner":{"account_id":8929942,"reputation":11,"user_id":6662894,"display_name":"Ferid Qelenderli"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":52,"favorite_count":0,"down_vote_count":3,"up_vote_count":1,"accepted_answer_id":76868068,"answer_count":2,"score":-2,"last_activity_date":1691616453,"creation_date":1691585371,"question_id":76867956,"body_markdown":"I need a regex that will remove the repeated X symbol from a text, but if only X is repeated more than once and has no other character nearby. But it needs to remove a single X character from a text too.\r\n\r\nFor example, if the given text is \r\n\r\n**&quot;Hi, myX name is XXXX Farid, X glad to meet youXXX&quot;**,\r\n\r\nthen the result must be \r\n\r\n**&quot;Hi, myX name is Farid, glad to meet youXXX&quot;**","title":"Regex : Remove Repeated and Single X from text","body":"<p>I need a regex that will remove the repeated X symbol from a text, but if only X is repeated more than once and has no other character nearby. But it needs to remove a single X character from a text too.</p>\n<p>For example, if the given text is</p>\n<p><strong>&quot;Hi, myX name is XXXX Farid, X glad to meet youXXX&quot;</strong>,</p>\n<p>then the result must be</p>\n<p><strong>&quot;Hi, myX name is Farid, glad to meet youXXX&quot;</strong></p>\n"},{"tags":["java","javafx"],"comments":[{"owner":{"account_id":2518243,"reputation":203472,"user_id":2189127,"display_name":"James_D"},"score":0,"creation_date":1691587791,"post_id":76865337,"comment_id":135511818,"body_markdown":"What do you actually mean by &quot;layout manager&quot; in this context?","body":"What do you actually mean by &quot;layout manager&quot; in this context?"},{"owner":{"account_id":2518243,"reputation":203472,"user_id":2189127,"display_name":"James_D"},"score":0,"creation_date":1691593475,"post_id":76865337,"comment_id":135513207,"body_markdown":"Off-topic: given the `Person` class in the [Javadoc you cite](https://openjfx.io/javadoc/20/javafx.controls/javafx/scene/control/TableView.html), the cell value factories should be implemented as `p -&gt; p.getValue().firstNameProperty()` etc. The implementation you use will not allow the cell to update if the values are changed.","body":"Off-topic: given the <code>Person</code> class in the <a href=\"https://openjfx.io/javadoc/20/javafx.controls/javafx/scene/control/TableView.html\" rel=\"nofollow noreferrer\">Javadoc you cite</a>, the cell value factories should be implemented as <code>p -&gt; p.getValue().firstNameProperty()</code> etc. The implementation you use will not allow the cell to update if the values are changed."},{"owner":{"account_id":322981,"reputation":310745,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"score":0,"creation_date":1691595641,"post_id":76865337,"comment_id":135513715,"body_markdown":"@James_D Thanks. I had remade the `Person` class as a [record](https://openjdk.org/jeps/395), read-only.","body":"@James_D Thanks. I had remade the <code>Person</code> class as a <a href=\"https://openjdk.org/jeps/395\" rel=\"nofollow noreferrer\">record</a>, read-only."}],"answers":[{"tags":[],"owner":{"account_id":13203350,"reputation":868,"user_id":9535950,"display_name":"Thomas Behr"},"down_vote_count":0,"up_vote_count":7,"is_accepted":false,"score":7,"last_activity_date":1691565380,"creation_date":1691565380,"answer_id":76865440,"question_id":76865337,"body_markdown":"There are no layout managers in JavaFX.\r\nThe [Scence API documentation](https://openjfx.io/javadoc/20/javafx.graphics/javafx/scene/Scene.html) states how `Scene` behaves on resizing:\r\n&gt; If a Group is used as the root, the contents of the scene graph will be clipped by the scene&#39;s width and height and changes to the scene&#39;s size (if user resizes the stage) will not alter the layout of the scene graph. If a resizable node (layout Region or Control) is set as the root, then the root&#39;s size will track the scene&#39;s size, causing the contents to be relayed out as necessary.\r\n\r\nSince `TableView` is a `Control`, the latter behavior is what you get and what you see.","title":"What is the default layout manager for a `Scene` in JavaFX?","body":"<p>There are no layout managers in JavaFX.\nThe <a href=\"https://openjfx.io/javadoc/20/javafx.graphics/javafx/scene/Scene.html\" rel=\"noreferrer\">Scence API documentation</a> states how <code>Scene</code> behaves on resizing:</p>\n<blockquote>\n<p>If a Group is used as the root, the contents of the scene graph will be clipped by the scene's width and height and changes to the scene's size (if user resizes the stage) will not alter the layout of the scene graph. If a resizable node (layout Region or Control) is set as the root, then the root's size will track the scene's size, causing the contents to be relayed out as necessary.</p>\n</blockquote>\n<p>Since <code>TableView</code> is a <code>Control</code>, the latter behavior is what you get and what you see.</p>\n"},{"tags":[],"owner":{"account_id":2518243,"reputation":203472,"user_id":2189127,"display_name":"James_D"},"down_vote_count":0,"up_vote_count":4,"is_accepted":true,"score":4,"last_activity_date":1691616400,"creation_date":1691592294,"answer_id":76868907,"question_id":76865337,"body_markdown":"As pointed out in [another answer](https://stackoverflow.com/a/76865440/2189127), JavaFX does not have explicit layout managers (as AWT, and consequently Swing, does), and the behavior when resizing a `Scene` (for example, when the user resizes the window containing it) is described in the API documentation.\r\n\r\nTaking the question\r\n\r\n&gt; What is the default layout manager of the `Scene` in this example?\r\n\r\nto more generally mean &quot;how does a `Scene` perform layout by default&quot;, what actually happens when a scene changes size is that it invokes [`resize(...)`][1] on the root node, passing in its new width and height. \r\n\r\n(Note that while this is the &quot;default&quot; behavior, it is also the only behavior: it cannot be changed.)\r\n\r\nThe actual implementation of `resize(...)` defined in [`Node`](https://openjfx.io/javadoc/20/javafx.graphics/javafx/scene/Node.html#resize(double,double)) is a no-op, and this is inherited by both `Parent` and `Group`. So if the root node is an instance of [`Group`][2], nothing actually happens.\r\n\r\n[`Region`][3], on the other hand, overrides `resize(...)` to set its width and height to the values passed in, thereby causing the size of a root that is an instance of `Region` to track the size of the scene. Changing the size triggers a call to [`layout()`](https://openjfx.io/javadoc/20/javafx.graphics/javafx/scene/Parent.html#layout()) on the next rendering pulse.\r\n\r\n`layout()`, which is a `final` method, is defined to first call `layoutChildren()` (which is overridable and should resize and position the child nodes), and then iteratively call `layout()` on any child nodes which are instances of `Parent`.\r\n\r\nSo the actual effect of resizing the `Scene` whose `root` is an instance of `Region` is determined by the implementation of `layoutChildren()` for that `root`. In the case of a `Control`, such as `TableView`, it is delegated to the [skin](https://openjfx.io/javadoc/20/javafx.controls/javafx/scene/control/Control.html#skinProperty). `Skin` additionally defines a `layoutChildren()` method whose implementation determines how the various components of the control are laid out in the new width and height. \r\n\r\nConsequently in your example, the size of the [`TableView`][4] is set to the size of the control (by the implementation of `resize()` in `Region`), and the table view is then laid out according to the implementation of [`TableViewSkin`][5].\r\n\r\n\r\n  [1]: https://openjfx.io/javadoc/20/javafx.graphics/javafx/scene/Node.html#resize(double,double)\r\n  [2]: https://openjfx.io/javadoc/20/javafx.graphics/javafx/scene/Group.html\r\n  [3]: https://openjfx.io/javadoc/20/javafx.graphics/javafx/scene/layout/Region.html\r\n  [4]: https://openjfx.io/javadoc/20/javafx.controls/javafx/scene/control/TableView.html\r\n  [5]: https://openjfx.io/javadoc/20/javafx.controls/javafx/scene/control/skin/TableViewSkin.html","title":"What is the default layout manager for a `Scene` in JavaFX?","body":"<p>As pointed out in <a href=\"https://stackoverflow.com/a/76865440/2189127\">another answer</a>, JavaFX does not have explicit layout managers (as AWT, and consequently Swing, does), and the behavior when resizing a <code>Scene</code> (for example, when the user resizes the window containing it) is described in the API documentation.</p>\n<p>Taking the question</p>\n<blockquote>\n<p>What is the default layout manager of the <code>Scene</code> in this example?</p>\n</blockquote>\n<p>to more generally mean &quot;how does a <code>Scene</code> perform layout by default&quot;, what actually happens when a scene changes size is that it invokes <a href=\"https://openjfx.io/javadoc/20/javafx.graphics/javafx/scene/Node.html#resize(double,double)\" rel=\"nofollow noreferrer\"><code>resize(...)</code></a> on the root node, passing in its new width and height.</p>\n<p>(Note that while this is the &quot;default&quot; behavior, it is also the only behavior: it cannot be changed.)</p>\n<p>The actual implementation of <code>resize(...)</code> defined in <a href=\"https://openjfx.io/javadoc/20/javafx.graphics/javafx/scene/Node.html#resize(double,double)\" rel=\"nofollow noreferrer\"><code>Node</code></a> is a no-op, and this is inherited by both <code>Parent</code> and <code>Group</code>. So if the root node is an instance of <a href=\"https://openjfx.io/javadoc/20/javafx.graphics/javafx/scene/Group.html\" rel=\"nofollow noreferrer\"><code>Group</code></a>, nothing actually happens.</p>\n<p><a href=\"https://openjfx.io/javadoc/20/javafx.graphics/javafx/scene/layout/Region.html\" rel=\"nofollow noreferrer\"><code>Region</code></a>, on the other hand, overrides <code>resize(...)</code> to set its width and height to the values passed in, thereby causing the size of a root that is an instance of <code>Region</code> to track the size of the scene. Changing the size triggers a call to <a href=\"https://openjfx.io/javadoc/20/javafx.graphics/javafx/scene/Parent.html#layout()\" rel=\"nofollow noreferrer\"><code>layout()</code></a> on the next rendering pulse.</p>\n<p><code>layout()</code>, which is a <code>final</code> method, is defined to first call <code>layoutChildren()</code> (which is overridable and should resize and position the child nodes), and then iteratively call <code>layout()</code> on any child nodes which are instances of <code>Parent</code>.</p>\n<p>So the actual effect of resizing the <code>Scene</code> whose <code>root</code> is an instance of <code>Region</code> is determined by the implementation of <code>layoutChildren()</code> for that <code>root</code>. In the case of a <code>Control</code>, such as <code>TableView</code>, it is delegated to the <a href=\"https://openjfx.io/javadoc/20/javafx.controls/javafx/scene/control/Control.html#skinProperty\" rel=\"nofollow noreferrer\">skin</a>. <code>Skin</code> additionally defines a <code>layoutChildren()</code> method whose implementation determines how the various components of the control are laid out in the new width and height.</p>\n<p>Consequently in your example, the size of the <a href=\"https://openjfx.io/javadoc/20/javafx.controls/javafx/scene/control/TableView.html\" rel=\"nofollow noreferrer\"><code>TableView</code></a> is set to the size of the control (by the implementation of <code>resize()</code> in <code>Region</code>), and the table view is then laid out according to the implementation of <a href=\"https://openjfx.io/javadoc/20/javafx.controls/javafx/scene/control/skin/TableViewSkin.html\" rel=\"nofollow noreferrer\"><code>TableViewSkin</code></a>.</p>\n"}],"owner":{"account_id":322981,"reputation":310745,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":86,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"accepted_answer_id":76868907,"answer_count":2,"score":3,"last_activity_date":1691616400,"creation_date":1691564561,"question_id":76865337,"body_markdown":"Here is my version of the example code shown in the Javadoc for [`TableView`][1] in JavaFX/[OpenJFX][2]. (The `Person` class is a [record][3], read-only.)\r\n\r\n```java\r\npackage work.basil.example.jfxexample;\r\n\r\nimport javafx.application.Application;\r\nimport javafx.beans.property.SimpleStringProperty;\r\nimport javafx.collections.FXCollections;\r\nimport javafx.collections.ObservableList;\r\nimport javafx.scene.Scene;\r\nimport javafx.scene.control.TableColumn;\r\nimport javafx.scene.control.TableView;\r\nimport javafx.stage.Stage;\r\n\r\nimport java.util.List;\r\n\r\npublic class HelloApplication extends Application\r\n{\r\n    @Override\r\n    public void start ( Stage stage )\r\n    {\r\n        TableView &lt; Person &gt; tableViewPersons = new TableView &lt;&gt; ( );\r\n        ObservableList &lt; Person &gt; persons = FXCollections.observableArrayList ( this.fetchPersons ( ) );\r\n        tableViewPersons.setItems ( persons );\r\n\r\n        TableColumn &lt; Person, String &gt; firstNameCol = new TableColumn &lt;&gt; ( &quot;First Name&quot; );\r\n        firstNameCol.setCellValueFactory (   ( TableColumn.CellDataFeatures &lt; Person, String &gt; p ) -&gt; new SimpleStringProperty (p.getValue().getFirstName ()));\r\n\r\n        TableColumn &lt; Person, String &gt; lastNameCol = new TableColumn &lt;&gt; ( &quot;Last Name&quot; );\r\n        lastNameCol.setCellValueFactory (   ( TableColumn.CellDataFeatures &lt; Person, String &gt; p ) -&gt; new SimpleStringProperty (p.getValue().getLastName ()));\r\n\r\n        List &lt; TableColumn &lt; Person, ? &gt; &gt; columns = List.of ( firstNameCol , lastNameCol );  // &lt;--- Adding this line to make explicit the parameterized type of `TableColumn` to resolve the &quot;Unchecked generics&quot; warning.\r\n        tableViewPersons.getColumns ( ).setAll ( columns );\r\n\r\n        Scene scene = new Scene ( tableViewPersons , 320 , 240 );\r\n        stage.setTitle ( &quot;JavaFX Example&quot; );\r\n        stage.setScene ( scene );\r\n        stage.show ( );\r\n    }\r\n\r\n    private List &lt; Person &gt; fetchPersons ( )\r\n    {\r\n        return List.of (\r\n                new Person ( &quot;William&quot; , &quot;Reed&quot; ) ,\r\n                new Person ( &quot;James&quot; , &quot;Michaelson&quot; ) ,\r\n                new Person ( &quot;Julius&quot; , &quot;Dean&quot; ) );\r\n    }\r\n\r\n    public static void main ( String[] args )\r\n    {\r\n        launch ( );\r\n    }\r\n}\r\n```\r\n\r\nThis app presents a window filled with the table view. Resizing the window results in the `TableView` control being resized as well, to continue filling the window. \r\n\r\n[![screenshot of example JavaFX app with a single control, a TableView filling the window.][4]][4]\r\n\r\n&#128073;&#127996; What is the default layout manager of the [`Scene`][5] in this example? \r\n\r\n\r\n  [1]: https://openjfx.io/javadoc/20/javafx.controls/javafx/scene/control/TableView.html\r\n  [2]: https://openjfx.io/\r\n  [3]: https://openjdk.org/jeps/395\r\n  [4]: https://i.stack.imgur.com/TrRMR.jpg\r\n  [5]: https://openjfx.io/javadoc/20/javafx.graphics/javafx/scene/Scene.html","title":"What is the default layout manager for a `Scene` in JavaFX?","body":"<p>Here is my version of the example code shown in the Javadoc for <a href=\"https://openjfx.io/javadoc/20/javafx.controls/javafx/scene/control/TableView.html\" rel=\"nofollow noreferrer\"><code>TableView</code></a> in JavaFX/<a href=\"https://openjfx.io/\" rel=\"nofollow noreferrer\">OpenJFX</a>. (The <code>Person</code> class is a <a href=\"https://openjdk.org/jeps/395\" rel=\"nofollow noreferrer\">record</a>, read-only.)</p>\n<pre class=\"lang-java prettyprint-override\"><code>package work.basil.example.jfxexample;\n\nimport javafx.application.Application;\nimport javafx.beans.property.SimpleStringProperty;\nimport javafx.collections.FXCollections;\nimport javafx.collections.ObservableList;\nimport javafx.scene.Scene;\nimport javafx.scene.control.TableColumn;\nimport javafx.scene.control.TableView;\nimport javafx.stage.Stage;\n\nimport java.util.List;\n\npublic class HelloApplication extends Application\n{\n    @Override\n    public void start ( Stage stage )\n    {\n        TableView &lt; Person &gt; tableViewPersons = new TableView &lt;&gt; ( );\n        ObservableList &lt; Person &gt; persons = FXCollections.observableArrayList ( this.fetchPersons ( ) );\n        tableViewPersons.setItems ( persons );\n\n        TableColumn &lt; Person, String &gt; firstNameCol = new TableColumn &lt;&gt; ( &quot;First Name&quot; );\n        firstNameCol.setCellValueFactory (   ( TableColumn.CellDataFeatures &lt; Person, String &gt; p ) -&gt; new SimpleStringProperty (p.getValue().getFirstName ()));\n\n        TableColumn &lt; Person, String &gt; lastNameCol = new TableColumn &lt;&gt; ( &quot;Last Name&quot; );\n        lastNameCol.setCellValueFactory (   ( TableColumn.CellDataFeatures &lt; Person, String &gt; p ) -&gt; new SimpleStringProperty (p.getValue().getLastName ()));\n\n        List &lt; TableColumn &lt; Person, ? &gt; &gt; columns = List.of ( firstNameCol , lastNameCol );  // &lt;--- Adding this line to make explicit the parameterized type of `TableColumn` to resolve the &quot;Unchecked generics&quot; warning.\n        tableViewPersons.getColumns ( ).setAll ( columns );\n\n        Scene scene = new Scene ( tableViewPersons , 320 , 240 );\n        stage.setTitle ( &quot;JavaFX Example&quot; );\n        stage.setScene ( scene );\n        stage.show ( );\n    }\n\n    private List &lt; Person &gt; fetchPersons ( )\n    {\n        return List.of (\n                new Person ( &quot;William&quot; , &quot;Reed&quot; ) ,\n                new Person ( &quot;James&quot; , &quot;Michaelson&quot; ) ,\n                new Person ( &quot;Julius&quot; , &quot;Dean&quot; ) );\n    }\n\n    public static void main ( String[] args )\n    {\n        launch ( );\n    }\n}\n</code></pre>\n<p>This app presents a window filled with the table view. Resizing the window results in the <code>TableView</code> control being resized as well, to continue filling the window.</p>\n<p><a href=\"https://i.stack.imgur.com/TrRMR.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/TrRMR.jpg\" alt=\"screenshot of example JavaFX app with a single control, a TableView filling the window.\" /></a></p>\n<p>👉🏼 What is the default layout manager of the <a href=\"https://openjfx.io/javadoc/20/javafx.graphics/javafx/scene/Scene.html\" rel=\"nofollow noreferrer\"><code>Scene</code></a> in this example?</p>\n"},{"tags":["java","string","if-statement","replace"],"comments":[{"owner":{"account_id":1691630,"reputation":49583,"user_id":1553851,"accept_rate":73,"display_name":"shmosel"},"score":0,"creation_date":1498683742,"post_id":44812465,"comment_id":76605581,"body_markdown":"Your question is very unclear. Can you be more specific?","body":"Your question is very unclear. Can you be more specific?"},{"owner":{"account_id":543631,"reputation":10094,"user_id":912829,"accept_rate":53,"display_name":"ACV"},"score":0,"creation_date":1498683852,"post_id":44812465,"comment_id":76605632,"body_markdown":"Maybe this is the problem `if (isTrue == true)` ?","body":"Maybe this is the problem <code>if (isTrue == true)</code> ?"},{"owner":{"account_id":2803497,"reputation":25202,"user_id":2411243,"display_name":"Zabuzard"},"score":0,"creation_date":1498683909,"post_id":44812465,"comment_id":76605664,"body_markdown":"I think he refers to the main logic that displays the word, for example as `_ _ e _ _ e _ ` and remembers the correct `char`s.","body":"I think he refers to the main logic that displays the word, for example as <code>_ _ e _ _ e _ </code> and remembers the correct <code>char</code>s."},{"owner":{"account_id":10970171,"reputation":29,"user_id":8060716,"accept_rate":0,"display_name":"MichaelDev"},"score":0,"creation_date":1498684096,"post_id":44812465,"comment_id":76605750,"body_markdown":"Yes correct I changed it.","body":"Yes correct I changed it."},{"owner":{"account_id":10970171,"reputation":29,"user_id":8060716,"accept_rate":0,"display_name":"MichaelDev"},"score":0,"creation_date":1498684129,"post_id":44812465,"comment_id":76605760,"body_markdown":"Zabuza.  ACV no that is fine it just check if the input is 1 digit","body":"Zabuza.  ACV no that is fine it just check if the input is 1 digit"},{"owner":{"account_id":10970171,"reputation":29,"user_id":8060716,"accept_rate":0,"display_name":"MichaelDev"},"score":0,"creation_date":1498684149,"post_id":44812465,"comment_id":76605768,"body_markdown":"Sorry for my worse english speaking","body":"Sorry for my worse english speaking"},{"owner":{"account_id":2803497,"reputation":25202,"user_id":2411243,"display_name":"Zabuzard"},"score":0,"creation_date":1501156788,"post_id":44812465,"comment_id":77661169,"body_markdown":"@MichaelDev If an user answered your question please also **accept** his answer ([Accepting Answers: How does it work?](https://meta.stackexchange.com/questions/5234/how-does-accepting-an-answer-work)). If not than please specify what remains unanswered, this is a really crucial part of StackOverflow, thank you very much.","body":"@MichaelDev If an user answered your question please also <b>accept</b> his answer (<a href=\"https://meta.stackexchange.com/questions/5234/how-does-accepting-an-answer-work\">Accepting Answers: How does it work?</a>). If not than please specify what remains unanswered, this is a really crucial part of StackOverflow, thank you very much."}],"answers":[{"tags":[],"owner":{"account_id":2803497,"reputation":25202,"user_id":2411243,"display_name":"Zabuzard"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1498684846,"creation_date":1498684447,"answer_id":44812643,"question_id":44812465,"body_markdown":"There are several ways to implement hangman. I will show you an approach that is easy to understand, no focus on efficiency.\r\n\r\nYou need to know the final word and remember all characters that the user has guessed:\r\n\r\n    final String word = ... // the random word\r\n    final Set&lt;Character&gt; correctChars = new HashSet&lt;&gt;();\r\n    final Set&lt;Character&gt; incorrectChars = new HashSet&lt;&gt;();\r\n\r\nNow if a user guesses a character you should update the data-structures:\r\n\r\n    final char userGuess = ... // input from the user\r\n    if (correctChars.contains(userGuess) || incorrectChars.contains(userGuess) {\r\n        System.out.println(&quot;You guessed that already!&quot;);\r\n    } else if (word.contains(userGuess)) {\r\n        correctChars.add(userGuess);\r\n        System.out.println(&quot;Correct!&quot;);\r\n    } else {\r\n        incorrectChars.add(userGuess);\r\n        System.out.println(&quot;Incorrect!&quot;);\r\n    }\r\n\r\nAnd last you need something that prints the word as `_ _ _ _ ` and so on. We do so by replacing all characters that are not contained in `correctChars`:\r\n\r\n    String replacePattern = &quot;(?i)[^&quot;;\r\n    for (Character correctChar : correctChars) {\r\n        replacePattern += correctChar;\r\n    }\r\n    replacePattern += &quot;]&quot;;\r\n\r\n    final String wordToDisplay = word.replaceAll(replacePattern, &quot;_&quot;);\r\n    System.out.println(&quot;Progress: &quot; + wordToDisplay);\r\n\r\nThe `replacePattern` may then look like `(?i)[^aekqw]`. The `(?i)` matches case insensitive, the `[...]` is a group of symbols to match and the `^` negates the group. So all characters that are not contained inside the `[...]` get replaced.\r\n\r\nAnd a small check if the game has finished:\r\n\r\n    if (wordToDisplay.equals(word)) {\r\n        System.out.println(&quot;You won!&quot;);\r\n    } else if (incorrectChars.size() &gt; 10) {\r\n        System.out.println(&quot;You guessed wrong 10 times, you lost!&quot;);\r\n    } else {\r\n        ... // Next round starts\r\n    }","title":"Hangman check if String is contained in the word and replace it?","body":"<p>There are several ways to implement hangman. I will show you an approach that is easy to understand, no focus on efficiency.</p>\n\n<p>You need to know the final word and remember all characters that the user has guessed:</p>\n\n<pre><code>final String word = ... // the random word\nfinal Set&lt;Character&gt; correctChars = new HashSet&lt;&gt;();\nfinal Set&lt;Character&gt; incorrectChars = new HashSet&lt;&gt;();\n</code></pre>\n\n<p>Now if a user guesses a character you should update the data-structures:</p>\n\n<pre><code>final char userGuess = ... // input from the user\nif (correctChars.contains(userGuess) || incorrectChars.contains(userGuess) {\n    System.out.println(\"You guessed that already!\");\n} else if (word.contains(userGuess)) {\n    correctChars.add(userGuess);\n    System.out.println(\"Correct!\");\n} else {\n    incorrectChars.add(userGuess);\n    System.out.println(\"Incorrect!\");\n}\n</code></pre>\n\n<p>And last you need something that prints the word as <code>_ _ _ _</code> and so on. We do so by replacing all characters that are not contained in <code>correctChars</code>:</p>\n\n<pre><code>String replacePattern = \"(?i)[^\";\nfor (Character correctChar : correctChars) {\n    replacePattern += correctChar;\n}\nreplacePattern += \"]\";\n\nfinal String wordToDisplay = word.replaceAll(replacePattern, \"_\");\nSystem.out.println(\"Progress: \" + wordToDisplay);\n</code></pre>\n\n<p>The <code>replacePattern</code> may then look like <code>(?i)[^aekqw]</code>. The <code>(?i)</code> matches case insensitive, the <code>[...]</code> is a group of symbols to match and the <code>^</code> negates the group. So all characters that are not contained inside the <code>[...]</code> get replaced.</p>\n\n<p>And a small check if the game has finished:</p>\n\n<pre><code>if (wordToDisplay.equals(word)) {\n    System.out.println(\"You won!\");\n} else if (incorrectChars.size() &gt; 10) {\n    System.out.println(\"You guessed wrong 10 times, you lost!\");\n} else {\n    ... // Next round starts\n}\n</code></pre>\n"}],"owner":{"account_id":10970171,"reputation":29,"user_id":8060716,"accept_rate":0,"display_name":"MichaelDev"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":181,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":1,"score":0,"last_activity_date":1691615936,"creation_date":1498683630,"question_id":44812465,"body_markdown":"I created a hangman game in Java. I have no clue how to check and replace it. Everything works, the String word is correct and the gameboard is fine. So the game board give me the length of word as &quot;_ _ _ _ _&quot;, for example.\r\n\r\n**Simply my Question is how I can I get the position of String word checked by the userinput and go to battleboard and change the &quot;underline(_)&quot; with the word which find in the position.**\r\n\r\n    public void gameStart(int topic) {\r\n        String[] wordList = this.wordList.chooseTopicArray(topic);\r\n        String word = this.wordList.pickRandom(wordList);\r\n        String gameboard = spielbrettvorbereiten(word);\r\n        Scanner userInput = new Scanner(System.in);\r\n\r\n        for (int i = 0; i &lt;= 16;) {\r\n\r\n        System.out.println(gameboard);\r\n        System.out.print(&quot;Write a letter &quot;);\r\n\r\n        String input = userInput.next();\r\n        int length = input.length();\r\n        boolean isTrue = letters.errateWortEingabe(length);\r\n\r\n        if (isTrue == true) {\r\n        if (word.contains(input)) {\r\n\r\n        }\r\n\r\n\r\n        } else {\r\n           i = i - 1;\r\n        }\r\n\r\n\r\n        i++;\r\n        }\r\n\r\nI hope you guys can help me I am struggling so hard.\r\n\r\nBest Regards","title":"Hangman check if String is contained in the word and replace it?","body":"<p>I created a hangman game in Java. I have no clue how to check and replace it. Everything works, the String word is correct and the gameboard is fine. So the game board give me the length of word as &quot;_ _ _ _ _&quot;, for example.</p>\n<p><strong>Simply my Question is how I can I get the position of String word checked by the userinput and go to battleboard and change the &quot;underline(_)&quot; with the word which find in the position.</strong></p>\n<pre><code>public void gameStart(int topic) {\n    String[] wordList = this.wordList.chooseTopicArray(topic);\n    String word = this.wordList.pickRandom(wordList);\n    String gameboard = spielbrettvorbereiten(word);\n    Scanner userInput = new Scanner(System.in);\n\n    for (int i = 0; i &lt;= 16;) {\n\n    System.out.println(gameboard);\n    System.out.print(&quot;Write a letter &quot;);\n\n    String input = userInput.next();\n    int length = input.length();\n    boolean isTrue = letters.errateWortEingabe(length);\n\n    if (isTrue == true) {\n    if (word.contains(input)) {\n\n    }\n\n\n    } else {\n       i = i - 1;\n    }\n\n\n    i++;\n    }\n</code></pre>\n<p>I hope you guys can help me I am struggling so hard.</p>\n<p>Best Regards</p>\n"},{"tags":["java","json","dictionary","jsf","jackson"],"answers":[{"tags":[],"owner":{"account_id":10509791,"reputation":21,"user_id":7745872,"display_name":"Java Gonzalez Arribas"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1498725626,"creation_date":1498725626,"answer_id":44820210,"question_id":44819731,"body_markdown":"I think this is a repeated post, see https://stackoverflow.com/questions/12155800/how-to-convert-hashmap-to-json-object-in-java\r\n\r\nAnd as it says on one of the responses:\r\n\r\n    Map&lt;String, Object&gt; data = new HashMap&lt;String, Object&gt;();\r\n    data.put( &quot;name&quot;, &quot;Mars&quot; );\r\n    data.put( &quot;age&quot;, 32 );\r\n    data.put( &quot;city&quot;, &quot;NY&quot; );\r\n    JSONObject json = new JSONObject();\r\n    json.putAll( data );\r\n    System.out.printf( &quot;JSON: %s&quot;, json.toString(2) );\r\n\r\noutput:\r\n\r\n\r\n    JSON: {\r\n      &quot;age&quot;: 32,\r\n      &quot;name&quot;: &quot;Mars&quot;,\r\n      &quot;city&quot;: &quot;NY&quot;\r\n    }\r\n\r\nYou can also try to use Google&#39;s GSON.Google&#39;s GSON is the best library available to convert Java Objects into their JSON representation\r\n","title":"Map inside a Map with Jackson with JSF","body":"<p>I think this is a repeated post, see <a href=\"https://stackoverflow.com/questions/12155800/how-to-convert-hashmap-to-json-object-in-java\">How to convert hashmap to JSON object in Java</a></p>\n\n<p>And as it says on one of the responses:</p>\n\n<pre><code>Map&lt;String, Object&gt; data = new HashMap&lt;String, Object&gt;();\ndata.put( \"name\", \"Mars\" );\ndata.put( \"age\", 32 );\ndata.put( \"city\", \"NY\" );\nJSONObject json = new JSONObject();\njson.putAll( data );\nSystem.out.printf( \"JSON: %s\", json.toString(2) );\n</code></pre>\n\n<p>output:</p>\n\n<pre><code>JSON: {\n  \"age\": 32,\n  \"name\": \"Mars\",\n  \"city\": \"NY\"\n}\n</code></pre>\n\n<p>You can also try to use Google's GSON.Google's GSON is the best library available to convert Java Objects into their JSON representation</p>\n"}],"owner":{"account_id":9716057,"reputation":33,"user_id":7206440,"display_name":"Ju Gaertner"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":393,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1691615877,"creation_date":1498724166,"question_id":44819731,"body_markdown":"I&#39;m using Jackson to read/write data from/into JSON files and I have an issue with the User POJO. It has a Map&lt;Enum, Object&gt; which is supposed to be the ways to contact the User (so it can have from 0 to 7, depending on the Enum). I want to be able to put ways to contact using a form in JSF.\r\n\r\nI tried something like `value=&quot;#{config.user.contacts[EMAIL_PRO]}&quot;`\r\nwhere of course EMAIL_PRO is an Enum (later, the user should be able to chose the Enum himself, but right now I try simple).\r\nBut when I do so, the error is \r\n\r\n&gt; Null key for a Map not allowed in JSON\r\n\r\nwhich I understand, &#39;cause my debug says that the value returned is `{null = null}`. Now first question: since the map is empty, is JSF supposed to work simply like that? The key &quot;EMAIL_PRO&quot; doesn&#39;t exists yet, but shouldn&#39;t JSF make the work done for me, and put right value with the key?\r\n\r\nThe other question is much more about Jackson and Maps. As I said, my POJO User contains a Map, and the JSON file is a Map himself (containing multiple users). \r\n\r\nIs it really possible to write a Map into this file using Jackson where the Map is `Map&lt;String, Object&gt;` and the Object contains a `Map&lt;Enum, Object&gt;`? And if yes, how?\r\n\r\nThanks for the help\r\n\r\nPS: I cannot change either my APIs or my POJOs.","title":"Map inside a Map with Jackson with JSF","body":"<p>I'm using Jackson to read/write data from/into JSON files and I have an issue with the User POJO. It has a Map&lt;Enum, Object&gt; which is supposed to be the ways to contact the User (so it can have from 0 to 7, depending on the Enum). I want to be able to put ways to contact using a form in JSF.</p>\n<p>I tried something like <code>value=&quot;#{config.user.contacts[EMAIL_PRO]}&quot;</code>\nwhere of course EMAIL_PRO is an Enum (later, the user should be able to chose the Enum himself, but right now I try simple).\nBut when I do so, the error is</p>\n<blockquote>\n<p>Null key for a Map not allowed in JSON</p>\n</blockquote>\n<p>which I understand, 'cause my debug says that the value returned is <code>{null = null}</code>. Now first question: since the map is empty, is JSF supposed to work simply like that? The key &quot;EMAIL_PRO&quot; doesn't exists yet, but shouldn't JSF make the work done for me, and put right value with the key?</p>\n<p>The other question is much more about Jackson and Maps. As I said, my POJO User contains a Map, and the JSON file is a Map himself (containing multiple users).</p>\n<p>Is it really possible to write a Map into this file using Jackson where the Map is <code>Map&lt;String, Object&gt;</code> and the Object contains a <code>Map&lt;Enum, Object&gt;</code>? And if yes, how?</p>\n<p>Thanks for the help</p>\n<p>PS: I cannot change either my APIs or my POJOs.</p>\n"},{"tags":["java","sms","infobip","infobip-api"],"owner":{"account_id":23752061,"reputation":11,"user_id":17768688,"display_name":"Hasan Isleem"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":109,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1691615689,"creation_date":1691573020,"question_id":76866314,"body_markdown":"I have a problem when send SMS I get 200 http status but message is not received to my mobile.\r\n  \r\nTHIS MY CODE\r\n\r\n```\r\n        try {\r\n            // Create the connection to the Infobip API.\r\n            URL url = new URL(BASE_URL + &quot;/sms/2/text/advanced&quot;);\r\n            HttpURLConnection connection = (HttpURLConnection) url.openConnection();\r\n            connection.setRequestMethod(&quot;POST&quot;);\r\n            connection.setRequestProperty(&quot;Authorization&quot;, &quot;App &quot; + API_KEY);\r\n            connection.setRequestProperty(&quot;Content-Type&quot;, &quot;application/json&quot;);\r\n            connection.setRequestProperty(&quot;Accept&quot;, &quot;application/json&quot;);\r\n//            connection.setRequestProperty(&quot;User-Agent&quot;, &quot;Mozilla/4.76&quot;);\r\n            connection.setDoOutput(true);\r\n\r\n            // Create the SMS message JSON payload.\r\n            String payload = String.format(&quot;{\\&quot;messages\\&quot;:[{\\&quot;from\\&quot;:\\&quot;%s\\&quot;,\\&quot;destinations\\&quot;:[{\\&quot;to\\&quot;:\\&quot;%s\\&quot;}],\\&quot;text\\&quot;:\\&quot;%s\\&quot;}]}&quot;,\r\n                    SENDER,\r\n                    RECIPIENT,\r\n                    MESSAGE_TEXT\r\n            );\r\n            // Write the payload to the request.\r\n            try (OutputStream os = connection.getOutputStream()) {\r\n                byte[] input = payload.getBytes(&quot;utf-8&quot;);\r\n                os.write(input, 0, input.length);\r\n            }\r\n\r\n            // Get the response from the API.\r\n            int responseCode = connection.getResponseCode();\r\n            System.out.println(&quot;Response Code: &quot; + responseCode);\r\n\r\n            if (responseCode == HttpURLConnection.HTTP_OK) {\r\n                try (BufferedReader reader = new BufferedReader(new InputStreamReader(connection.getInputStream()))) {\r\n                    String line;\r\n                    StringBuilder response = new StringBuilder();\r\n                    while ((line = reader.readLine()) != null) {\r\n                        response.append(line);\r\n                    }\r\n                    System.out.println(&quot;Message sent successfully. Response Content: &quot; + response.toString());\r\n                }\r\n            } else {\r\n                // Print the response content for error requests.\r\n                // Similar to the success case, adjust the parsing and print the full response content.\r\n                try (BufferedReader reader = new BufferedReader(new InputStreamReader(connection.getErrorStream()))) {\r\n                    String line;\r\n                    StringBuilder response = new StringBuilder();\r\n                    while ((line = reader.readLine()) != null) {\r\n                        response.append(line);\r\n                    }\r\n                    System.out.println(&quot;Error sending message. Response Content: &quot; + response.toString());\r\n                }\r\n            }\r\n        } catch (Exception e) {\r\n            e.printStackTrace();\r\n        }\r\n```\r\n\r\nResponse Code: 200\r\n\r\nThis is response:\r\n\r\n&gt; Message sent successfully. Response Content: {&quot;messages&quot;:\\[{&quot;messageId&quot;:&quot;3915723960824335774697&quot;,&quot;status&quot;:{&quot;description&quot;:&quot;Message sent to next instance&quot;,&quot;groupId&quot;:1,&quot;groupName&quot;:&quot;PENDING&quot;,&quot;id&quot;:26,&quot;name&quot;:&quot;PENDING_ACCEPTED&quot;},&quot;to&quot;:&quot;970597086266&quot;}\\]}\r\n\r\nThis response should be returned like this:\r\n\r\n```none\r\n groupId: 3\r\n        groupName: DELIVERED\r\n        id: 5\r\n        name: DELIVERED_TO_HANDSET\r\n        description: Message delivered to handset\r\n        action: null\r\n```","title":"I have a problem when try to send SMS to my mobile by INFOBIP","body":"<p>I have a problem when send SMS I get 200 http status but message is not received to my mobile.</p>\n<p>THIS MY CODE</p>\n<pre><code>        try {\n            // Create the connection to the Infobip API.\n            URL url = new URL(BASE_URL + &quot;/sms/2/text/advanced&quot;);\n            HttpURLConnection connection = (HttpURLConnection) url.openConnection();\n            connection.setRequestMethod(&quot;POST&quot;);\n            connection.setRequestProperty(&quot;Authorization&quot;, &quot;App &quot; + API_KEY);\n            connection.setRequestProperty(&quot;Content-Type&quot;, &quot;application/json&quot;);\n            connection.setRequestProperty(&quot;Accept&quot;, &quot;application/json&quot;);\n//            connection.setRequestProperty(&quot;User-Agent&quot;, &quot;Mozilla/4.76&quot;);\n            connection.setDoOutput(true);\n\n            // Create the SMS message JSON payload.\n            String payload = String.format(&quot;{\\&quot;messages\\&quot;:[{\\&quot;from\\&quot;:\\&quot;%s\\&quot;,\\&quot;destinations\\&quot;:[{\\&quot;to\\&quot;:\\&quot;%s\\&quot;}],\\&quot;text\\&quot;:\\&quot;%s\\&quot;}]}&quot;,\n                    SENDER,\n                    RECIPIENT,\n                    MESSAGE_TEXT\n            );\n            // Write the payload to the request.\n            try (OutputStream os = connection.getOutputStream()) {\n                byte[] input = payload.getBytes(&quot;utf-8&quot;);\n                os.write(input, 0, input.length);\n            }\n\n            // Get the response from the API.\n            int responseCode = connection.getResponseCode();\n            System.out.println(&quot;Response Code: &quot; + responseCode);\n\n            if (responseCode == HttpURLConnection.HTTP_OK) {\n                try (BufferedReader reader = new BufferedReader(new InputStreamReader(connection.getInputStream()))) {\n                    String line;\n                    StringBuilder response = new StringBuilder();\n                    while ((line = reader.readLine()) != null) {\n                        response.append(line);\n                    }\n                    System.out.println(&quot;Message sent successfully. Response Content: &quot; + response.toString());\n                }\n            } else {\n                // Print the response content for error requests.\n                // Similar to the success case, adjust the parsing and print the full response content.\n                try (BufferedReader reader = new BufferedReader(new InputStreamReader(connection.getErrorStream()))) {\n                    String line;\n                    StringBuilder response = new StringBuilder();\n                    while ((line = reader.readLine()) != null) {\n                        response.append(line);\n                    }\n                    System.out.println(&quot;Error sending message. Response Content: &quot; + response.toString());\n                }\n            }\n        } catch (Exception e) {\n            e.printStackTrace();\n        }\n</code></pre>\n<p>Response Code: 200</p>\n<p>This is response:</p>\n<blockquote>\n<p>Message sent successfully. Response Content: {&quot;messages&quot;:[{&quot;messageId&quot;:&quot;3915723960824335774697&quot;,&quot;status&quot;:{&quot;description&quot;:&quot;Message sent to next instance&quot;,&quot;groupId&quot;:1,&quot;groupName&quot;:&quot;PENDING&quot;,&quot;id&quot;:26,&quot;name&quot;:&quot;PENDING_ACCEPTED&quot;},&quot;to&quot;:&quot;970597086266&quot;}]}</p>\n</blockquote>\n<p>This response should be returned like this:</p>\n<pre class=\"lang-none prettyprint-override\"><code> groupId: 3\n        groupName: DELIVERED\n        id: 5\n        name: DELIVERED_TO_HANDSET\n        description: Message delivered to handset\n        action: null\n</code></pre>\n"},{"tags":["java","gradle"],"owner":{"account_id":26722059,"reputation":405,"user_id":20325718,"display_name":"YutaSaito"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":14,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1691615375,"creation_date":1691615375,"question_id":76871289,"body_markdown":"I am using Gradle and add the jar in the lib directory to dependencies as follows.\r\n\r\n```grovy:build.gradle\r\ndependencies {\r\n\timplementation files(&#39;libs/foo.jar&#39;)\r\n}\r\n```\r\n\r\n\r\nBut the pom.xml dependencies inside the jar are not picked up.\r\nWhat should I do?","title":"I want to get the pom.xml dependencies in the local jar","body":"<p>I am using Gradle and add the jar in the lib directory to dependencies as follows.</p>\n<pre><code>dependencies {\n    implementation files('libs/foo.jar')\n}\n</code></pre>\n<p>But the pom.xml dependencies inside the jar are not picked up.\nWhat should I do?</p>\n"},{"tags":["java","spark-java"],"comments":[{"owner":{"account_id":9158524,"reputation":334,"user_id":6810709,"display_name":"rollno748"},"score":0,"creation_date":1691916466,"post_id":76867687,"comment_id":135553461,"body_markdown":"Issue resolved after removing unwanted groovy library in pom.xml","body":"Issue resolved after removing unwanted groovy library in pom.xml"}],"owner":{"account_id":9158524,"reputation":334,"user_id":6810709,"display_name":"rollno748"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":35,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1691615300,"creation_date":1691583270,"question_id":76867687,"body_markdown":"I have the below code - which is configured to serve static web page within the package (src/main/resources/public)\r\n\r\nWhich is not working and i dont see any exception in the logs as well \r\n\r\n```\r\n public void startRestServer() {\r\n        try {\r\n            port(serverPort);\r\n//            staticFiles.location(System.getProperty(&quot;user.dir&quot;) + &quot;/src/main/resources/public/&quot;);\r\n            staticFiles.location(&quot;/public&quot;);\r\n            connectionPool = SQLiteConnectionPool.getInstance(fileServerLocation, MIN_THREADS, MAX_THREADS, TIMEOUT);\r\n            staticFiles.externalLocation(this.fileServerLocation);\r\n            init();\r\n            awaitInitialization();\r\n            loadRestApiServices();\r\n            LOGGER.debug(String.format(&quot;REST services started :: http://%s:%s%s/&quot;,\r\n                    InetAddress.getLocalHost().getHostAddress(), serverPort, uriPath));\r\n        } catch (Exception e) {\r\n            LOGGER.error(&quot;REST services failed to start&quot;, e);\r\n        }\r\n    }\r\n```\r\n\r\nI have API path configured below\r\n\r\n```\r\npublic void loadRestApiServices() {\r\n        UploadService uploadService = new UploadServiceImpl();\r\n        path(RestController.uriPath, () -&gt; {\r\n            before(&quot;/*&quot;, (req, res) -&gt; LOGGER.info(&quot;Received api call&quot;));\r\n\r\n            get(&quot;/greet&quot;, (req, res) -&gt; {\r\n                return &quot;Hello Work !&quot;;\r\n            });\r\n\r\n            post(&quot;/upload&quot;, (req, res) -&gt; {\r\n                JSONObject jsonObject = new JSONObject(req.body());\r\n                uploadService.uploadCustomPlugin(jsonObject);\r\n                return null;\r\n            });\r\n\r\n            after((req, res) -&gt; res.header(&quot;Content-Encoding&quot;, &quot;gzip&quot;));\r\n\r\n        });\r\n```\r\n\r\n[![enter image description here](https://i.stack.imgur.com/zkj8B.png)](https://i.stack.imgur.com/zkj8B.png)\r\n\r\n\r\n\r\nExpected result: \r\n\r\nI want it to serve the index.html to user - which is basically a post form, to upload files","title":"Unable to serve a static web page using Spark java framework","body":"<p>I have the below code - which is configured to serve static web page within the package (src/main/resources/public)</p>\n<p>Which is not working and i dont see any exception in the logs as well</p>\n<pre><code> public void startRestServer() {\n        try {\n            port(serverPort);\n//            staticFiles.location(System.getProperty(&quot;user.dir&quot;) + &quot;/src/main/resources/public/&quot;);\n            staticFiles.location(&quot;/public&quot;);\n            connectionPool = SQLiteConnectionPool.getInstance(fileServerLocation, MIN_THREADS, MAX_THREADS, TIMEOUT);\n            staticFiles.externalLocation(this.fileServerLocation);\n            init();\n            awaitInitialization();\n            loadRestApiServices();\n            LOGGER.debug(String.format(&quot;REST services started :: http://%s:%s%s/&quot;,\n                    InetAddress.getLocalHost().getHostAddress(), serverPort, uriPath));\n        } catch (Exception e) {\n            LOGGER.error(&quot;REST services failed to start&quot;, e);\n        }\n    }\n</code></pre>\n<p>I have API path configured below</p>\n<pre><code>public void loadRestApiServices() {\n        UploadService uploadService = new UploadServiceImpl();\n        path(RestController.uriPath, () -&gt; {\n            before(&quot;/*&quot;, (req, res) -&gt; LOGGER.info(&quot;Received api call&quot;));\n\n            get(&quot;/greet&quot;, (req, res) -&gt; {\n                return &quot;Hello Work !&quot;;\n            });\n\n            post(&quot;/upload&quot;, (req, res) -&gt; {\n                JSONObject jsonObject = new JSONObject(req.body());\n                uploadService.uploadCustomPlugin(jsonObject);\n                return null;\n            });\n\n            after((req, res) -&gt; res.header(&quot;Content-Encoding&quot;, &quot;gzip&quot;));\n\n        });\n</code></pre>\n<p><a href=\"https://i.stack.imgur.com/zkj8B.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/zkj8B.png\" alt=\"enter image description here\" /></a></p>\n<p>Expected result:</p>\n<p>I want it to serve the index.html to user - which is basically a post form, to upload files</p>\n"},{"tags":["java","spring","spring-boot"],"owner":{"account_id":42916,"reputation":22347,"user_id":125212,"accept_rate":52,"display_name":"Jackie"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":23,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1691614136,"creation_date":1691614136,"question_id":76871173,"body_markdown":"I have the following...\r\n\r\n```java\r\npublic class MyBootstrapInitializer implements BootstrapRegistryInitializer {\r\n    @Override\r\n    public void initialize(BootstrapRegistry registry) {\r\n        log.debug(&quot;Initializing BootstrapRegistry &quot;+registry.isRegistered(BootstrapItem.class));\r\n        registry.register(\r\n                BootstrapItem.class,\r\n                context -&gt; new BootstrapItem(&quot;Hello World&quot;)\r\n        );\r\n        if(!registry.isRegistered(BootstrapItem.class)) {\r\n            log.error(&quot;BootstrapRegistry not initialized&quot;);\r\n            throw new RuntimeException(&quot;BootstrapRegistry not initialized&quot;);\r\n        }\r\n        log.debug(&quot;BootstrapRegistry Initialized&quot;);\r\n    }\r\n}\r\n```\r\n\r\nAnd then I try to access it with the EventPostProcessor\r\n\r\n```java\r\npublic class BootstrapPostProcessor implements EnvironmentPostProcessor, Ordered {\r\n\r\n    private final ConfigurableBootstrapContext bootstrapContext;\r\n\r\n    public BootstrapPostProcessor(final ConfigurableBootstrapContext bootstrapContext) {\r\n        this.bootstrapContext = bootstrapContext;\r\n    }\r\n\r\n    @Override\r\n    public void postProcessEnvironment(\r\n            final ConfigurableEnvironment environment,\r\n            final SpringApplication application\r\n    ) {\r\n        log.error(&quot;Getting the Object&quot;);\r\n        BootstrapItem bootstrapItem = bootstrapContext.get(BootstrapItem.class);\r\n        log.error(&quot;Object message is: &quot;+ bootstrapItem.getMessage());\r\n    }\r\n\r\n    @Override\r\n    public int getOrder() {\r\n        return 0;\r\n    }\r\n}\r\n```\r\n\r\nBut when I run the context doesn&#39;t have the instanceSupplier. What am I missing?\r\n\r\n&gt;java.lang.IllegalStateException: ...BootstrapItem has not been registered\r\n\r\nI have also confirmed that the same type of BootstrapItem the same type in both places.\r\n","title":"Why is my object not showing up on the BootstrapContext after being registered with the BootstrapRegistry?","body":"<p>I have the following...</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class MyBootstrapInitializer implements BootstrapRegistryInitializer {\n    @Override\n    public void initialize(BootstrapRegistry registry) {\n        log.debug(&quot;Initializing BootstrapRegistry &quot;+registry.isRegistered(BootstrapItem.class));\n        registry.register(\n                BootstrapItem.class,\n                context -&gt; new BootstrapItem(&quot;Hello World&quot;)\n        );\n        if(!registry.isRegistered(BootstrapItem.class)) {\n            log.error(&quot;BootstrapRegistry not initialized&quot;);\n            throw new RuntimeException(&quot;BootstrapRegistry not initialized&quot;);\n        }\n        log.debug(&quot;BootstrapRegistry Initialized&quot;);\n    }\n}\n</code></pre>\n<p>And then I try to access it with the EventPostProcessor</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class BootstrapPostProcessor implements EnvironmentPostProcessor, Ordered {\n\n    private final ConfigurableBootstrapContext bootstrapContext;\n\n    public BootstrapPostProcessor(final ConfigurableBootstrapContext bootstrapContext) {\n        this.bootstrapContext = bootstrapContext;\n    }\n\n    @Override\n    public void postProcessEnvironment(\n            final ConfigurableEnvironment environment,\n            final SpringApplication application\n    ) {\n        log.error(&quot;Getting the Object&quot;);\n        BootstrapItem bootstrapItem = bootstrapContext.get(BootstrapItem.class);\n        log.error(&quot;Object message is: &quot;+ bootstrapItem.getMessage());\n    }\n\n    @Override\n    public int getOrder() {\n        return 0;\n    }\n}\n</code></pre>\n<p>But when I run the context doesn't have the instanceSupplier. What am I missing?</p>\n<blockquote>\n<p>java.lang.IllegalStateException: ...BootstrapItem has not been registered</p>\n</blockquote>\n<p>I have also confirmed that the same type of BootstrapItem the same type in both places.</p>\n"},{"tags":["java","spring","mongodb","spring-data-mongodb"],"comments":[{"owner":{"account_id":12262607,"reputation":1364,"user_id":8949877,"display_name":"Harshit"},"score":2,"creation_date":1616731417,"post_id":66766935,"comment_id":118100519,"body_markdown":"Hi Michael, It&#39;s not possible with find query, you need to use aggregation to get that result.","body":"Hi Michael, It&#39;s not possible with find query, you need to use aggregation to get that result."}],"answers":[{"tags":[],"owner":{"account_id":2638471,"reputation":25863,"user_id":2282634,"display_name":"Joe"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1616838027,"creation_date":1616838027,"answer_id":66829885,"question_id":66766935,"body_markdown":"The returned `{&quot;$oid&quot;: &quot;5eb97a8139d4c62be4d90e4c&quot;}` is the [MongoDB Extended JSON](https://docs.mongodb.com/manual/reference/mongodb-extended-json/#bson.ObjectId) representation of an ObjectID.  \r\n\r\nIt is not returning a string because the field stored in the database is of type `ObjectID`, not type `String`.  \r\n\r\nIf you want it to return a string, you should use aggregation with the [$toString](https://docs.mongodb.com/manual/reference/operator/aggregation/toString/index.html#tostring-aggregation) operator to convert it.","title":"How to return list of specific fields in query Java Spring Mongo Repository?","body":"<p>The returned <code>{&quot;$oid&quot;: &quot;5eb97a8139d4c62be4d90e4c&quot;}</code> is the <a href=\"https://docs.mongodb.com/manual/reference/mongodb-extended-json/#bson.ObjectId\" rel=\"nofollow noreferrer\">MongoDB Extended JSON</a> representation of an ObjectID.</p>\n<p>It is not returning a string because the field stored in the database is of type <code>ObjectID</code>, not type <code>String</code>.</p>\n<p>If you want it to return a string, you should use aggregation with the <a href=\"https://docs.mongodb.com/manual/reference/operator/aggregation/toString/index.html#tostring-aggregation\" rel=\"nofollow noreferrer\">$toString</a> operator to convert it.</p>\n"},{"tags":[],"owner":{"account_id":11377012,"reputation":12762,"user_id":8340997,"display_name":"Anish B."},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1616904728,"creation_date":1616864665,"answer_id":66833978,"question_id":66766935,"body_markdown":"**No, that&#39;s impossible what you are thinking.**\r\n\r\n**Reason :** **MongoDB** can only return **JSON Document**. You can include the fields that you want to be there.\r\n\r\nThis suggestion that you can follow :\r\n\r\nDTO Definition :\r\n\r\n    @Document(collection = &quot;Info&quot;)\r\n    public class Info  {\r\n    \r\n      @Id\r\n      private String id;\r\n      \r\n      private Integer count;\r\n      \r\n      private String type;\r\n      \r\n      // other fields and getters and setters\r\n    }\r\n\r\nSample Repository :\r\n\r\n    public interface InfoRepository extends MongoRepository&lt;Info, String&gt; {\r\n    \r\n       @Query(value=&quot;{ &#39;count&#39; : 0, &#39;type&#39; : &#39;binary&#39; }&quot;, fields=&quot;{ &#39;id&#39; : 1 }&quot;)\r\n       List&lt;Info&gt; getInfo();\r\n     \r\n    }\r\n\r\nSample Service class :\r\n\r\n    @Service\r\n    public class InfoService {\r\n    \r\n       @Autowired \r\n       private InfoRepository infoRepository;\r\n    \r\n       public List&lt;String&gt; getIds() {\r\n       \r\n          return infoRepository.getInfo()\r\n                          .stream()\r\n                          .map(Info::getId)\r\n                          .collect(Collectors.toList());    \r\n    \r\n       }\r\n    \r\n    }\r\n    \r\n     \r\n\r\n","title":"How to return list of specific fields in query Java Spring Mongo Repository?","body":"<p><strong>No, that's impossible what you are thinking.</strong></p>\n<p><strong>Reason :</strong> <strong>MongoDB</strong> can only return <strong>JSON Document</strong>. You can include the fields that you want to be there.</p>\n<p>This suggestion that you can follow :</p>\n<p>DTO Definition :</p>\n<pre><code>@Document(collection = &quot;Info&quot;)\npublic class Info  {\n\n  @Id\n  private String id;\n  \n  private Integer count;\n  \n  private String type;\n  \n  // other fields and getters and setters\n}\n</code></pre>\n<p>Sample Repository :</p>\n<pre><code>public interface InfoRepository extends MongoRepository&lt;Info, String&gt; {\n\n   @Query(value=&quot;{ 'count' : 0, 'type' : 'binary' }&quot;, fields=&quot;{ 'id' : 1 }&quot;)\n   List&lt;Info&gt; getInfo();\n \n}\n</code></pre>\n<p>Sample Service class :</p>\n<pre><code>@Service\npublic class InfoService {\n\n   @Autowired \n   private InfoRepository infoRepository;\n\n   public List&lt;String&gt; getIds() {\n   \n      return infoRepository.getInfo()\n                      .stream()\n                      .map(Info::getId)\n                      .collect(Collectors.toList());    \n\n   }\n\n}\n\n \n</code></pre>\n"},{"tags":[],"owner":{"account_id":5498156,"reputation":5143,"user_id":4368485,"display_name":"Dĵ ΝιΓΞΗΛψΚ"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1616917016,"creation_date":1616917016,"answer_id":66839310,"question_id":66766935,"body_markdown":"the best you can get back is a document with an array field with the found ids like this:\r\n```\r\n{\r\n\t&quot;ids&quot; : [\r\n\t\t&quot;606018909fb6351e4c34f964&quot;,\r\n\t\t&quot;606018909fb6351e4c34f965&quot;\r\n\t]\r\n}\r\n```\r\nwhich can be achieved with an aggregation query like so:\r\n```\r\ndb.Info.aggregate([\r\n    {\r\n        $match: {\r\n            count: 0,\r\n            type: &quot;binary&quot;\r\n        }\r\n    },\r\n    {\r\n        $project: { _id: { $toString: &quot;$_id&quot; } }\r\n    },\r\n    {\r\n        $group: {\r\n            _id: null,\r\n            ids: { $push: &quot;$_id&quot; }\r\n        }\r\n    },\r\n    {\r\n        $project: { _id: 0 }\r\n    }\r\n])\r\n```","title":"How to return list of specific fields in query Java Spring Mongo Repository?","body":"<p>the best you can get back is a document with an array field with the found ids like this:</p>\n<pre><code>{\n    &quot;ids&quot; : [\n        &quot;606018909fb6351e4c34f964&quot;,\n        &quot;606018909fb6351e4c34f965&quot;\n    ]\n}\n</code></pre>\n<p>which can be achieved with an aggregation query like so:</p>\n<pre><code>db.Info.aggregate([\n    {\n        $match: {\n            count: 0,\n            type: &quot;binary&quot;\n        }\n    },\n    {\n        $project: { _id: { $toString: &quot;$_id&quot; } }\n    },\n    {\n        $group: {\n            _id: null,\n            ids: { $push: &quot;$_id&quot; }\n        }\n    },\n    {\n        $project: { _id: 0 }\n    }\n])\n</code></pre>\n"},{"tags":[],"owner":{"account_id":15057874,"reputation":9,"user_id":10867625,"display_name":"Senthil Kumar Krishnan"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1617275147,"creation_date":1617275147,"answer_id":66903381,"question_id":66766935,"body_markdown":"I have 2 suggestions.\r\n\r\n**1. You can use JPA query instead of named query**\r\n\r\n        public interface InfoRepository extends MongoRepository&lt;Info, String&gt; {\r\n             List&lt;Info&gt; findByCountAndType(final Integer count, final String type);\r\n        }\r\n**2. Use java stream api in your business logic to collect all id as List from the above result.**\r\n\r\n        public class InfoServiceImpl {\r\n           @Autowired\r\n           private InfoRepository repository;\r\n\r\n           public String getIds(final String type, final Integer count) {\r\n               return repository.findByCountAndType(count, type)\r\n                      .stream()\r\n                      .map(Info::getId)\r\n                      .collect(Collectors.toList());\r\n           }\r\n\r\n","title":"How to return list of specific fields in query Java Spring Mongo Repository?","body":"<p>I have 2 suggestions.</p>\n<p><strong>1. You can use JPA query instead of named query</strong></p>\n<pre><code>    public interface InfoRepository extends MongoRepository&lt;Info, String&gt; {\n         List&lt;Info&gt; findByCountAndType(final Integer count, final String type);\n    }\n</code></pre>\n<p><strong>2. Use java stream api in your business logic to collect all id as List from the above result.</strong></p>\n<pre><code>    public class InfoServiceImpl {\n       @Autowired\n       private InfoRepository repository;\n\n       public String getIds(final String type, final Integer count) {\n           return repository.findByCountAndType(count, type)\n                  .stream()\n                  .map(Info::getId)\n                  .collect(Collectors.toList());\n       }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":29177783,"reputation":1,"user_id":22352678,"display_name":"Dmitriy Chernykh"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691613740,"creation_date":1691416895,"answer_id":76852481,"question_id":66766935,"body_markdown":"It is possible:\r\n\r\n    @Aggregation(pipeline = {&quot;{$match: {}} &quot; +\r\n            &quot;{$project: { _id: { $toString: $_id } }} &quot; +\r\n            &quot;{$group: {_id: null, ids: { $push: $_id }}} &quot; +\r\n            &quot;{$project: { _id: 1 }}&quot;})\r\n    List&lt;String&gt; getInfo();","title":"How to return list of specific fields in query Java Spring Mongo Repository?","body":"<p>It is possible:</p>\n<pre><code>@Aggregation(pipeline = {&quot;{$match: {}} &quot; +\n        &quot;{$project: { _id: { $toString: $_id } }} &quot; +\n        &quot;{$group: {_id: null, ids: { $push: $_id }}} &quot; +\n        &quot;{$project: { _id: 1 }}&quot;})\nList&lt;String&gt; getInfo();\n</code></pre>\n"}],"owner":{"account_id":1067937,"reputation":13238,"user_id":1067943,"accept_rate":65,"display_name":"Michael"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":4689,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"answer_count":5,"score":4,"last_activity_date":1691613740,"creation_date":1616515652,"question_id":66766935,"body_markdown":"I use Java spring and MongoDB repository in my project.\r\n\r\nHere is DTO definition:\r\n\r\n\t@Document(collection = &quot;Info&quot;)\r\n\tpublic class Info  {\r\n\r\n\t  String id,\r\n\t  Integer count,\r\n\t  String type\r\n\t  …\r\n\t}\r\n\r\nI need to return from the query a list of IDs where the count field not zero and type filed has &#39;binary&#39; text.\r\n\r\nHere how I try to implement it:\r\n\r\n    @Query(value=&quot;{ &#39;count&#39; : 0, &#39;type&#39; : &#39;binary&#39; }&quot;, fields=&quot;{ &#39;id&#39; : 1 }&quot;)\r\n    List&lt;String&gt; getInfo();\r\n\t\r\nI get this result from query above:\r\n\r\n\t0={&quot;_id&quot;: {&quot;$oid&quot;: &quot;5eb97a8139d4c62be4d90e4c&quot;}}\r\n\t1={&quot;_id&quot;: {&quot;$oid&quot;: &quot;3ec97a8127d4c60cb4d90e9e&quot;}}\r\n\t\r\nAnd I expect this result:\r\n\r\n\t{&quot;5eb97a8139d4c62be4d90e4c&quot;, &quot;3ec97a8127d4c60cb4d90e9e&quot;}\r\n\r\nSo as you can see I expect to get a list of id strings from the query above. \r\n\t\r\nAny idea what should I change in the query above to get the expected list of ids results? \t\r\n\t","title":"How to return list of specific fields in query Java Spring Mongo Repository?","body":"<p>I use Java spring and MongoDB repository in my project.</p>\n<p>Here is DTO definition:</p>\n<pre><code>@Document(collection = &quot;Info&quot;)\npublic class Info  {\n\n  String id,\n  Integer count,\n  String type\n  …\n}\n</code></pre>\n<p>I need to return from the query a list of IDs where the count field not zero and type filed has 'binary' text.</p>\n<p>Here how I try to implement it:</p>\n<pre><code>@Query(value=&quot;{ 'count' : 0, 'type' : 'binary' }&quot;, fields=&quot;{ 'id' : 1 }&quot;)\nList&lt;String&gt; getInfo();\n</code></pre>\n<p>I get this result from query above:</p>\n<pre><code>0={&quot;_id&quot;: {&quot;$oid&quot;: &quot;5eb97a8139d4c62be4d90e4c&quot;}}\n1={&quot;_id&quot;: {&quot;$oid&quot;: &quot;3ec97a8127d4c60cb4d90e9e&quot;}}\n</code></pre>\n<p>And I expect this result:</p>\n<pre><code>{&quot;5eb97a8139d4c62be4d90e4c&quot;, &quot;3ec97a8127d4c60cb4d90e9e&quot;}\n</code></pre>\n<p>So as you can see I expect to get a list of id strings from the query above.</p>\n<p>Any idea what should I change in the query above to get the expected list of ids results?</p>\n"},{"tags":["java","mysql","sql","spring"],"comments":[{"owner":{"account_id":197604,"reputation":3397,"user_id":441783,"accept_rate":68,"display_name":"hese"},"score":0,"creation_date":1307723542,"post_id":6272272,"comment_id":7372764,"body_markdown":"thanks! (i&#39;ve asked about 14 questions till now, half of which have no answers and I answered one or two of them myself. I have gone through all my posts a number of times to accept or vote all replies, and I dont know what more to do, or probably I am doing it the wrong way.)","body":"thanks! (i&#39;ve asked about 14 questions till now, half of which have no answers and I answered one or two of them myself. I have gone through all my posts a number of times to accept or vote all replies, and I dont know what more to do, or probably I am doing it the wrong way.)"},{"owner":{"account_id":60076,"reputation":8249,"user_id":179573,"accept_rate":100,"display_name":"abalogh"},"score":0,"creation_date":1307732855,"post_id":6272272,"comment_id":7375034,"body_markdown":"By the way, you are absolutely free to accept your own answers if after some time you found a solution.","body":"By the way, you are absolutely free to accept your own answers if after some time you found a solution."},{"owner":{"account_id":197604,"reputation":3397,"user_id":441783,"accept_rate":68,"display_name":"hese"},"score":0,"creation_date":1307973650,"post_id":6272272,"comment_id":7405077,"body_markdown":"@abalogh - great, thanks! I can accept my own answer?  I didnt know that!","body":"@abalogh - great, thanks! I can accept my own answer?  I didnt know that!"}],"answers":[{"tags":[],"owner":{"account_id":60076,"reputation":8249,"user_id":179573,"accept_rate":100,"display_name":"abalogh"},"down_vote_count":11,"up_vote_count":5,"is_accepted":true,"score":-6,"last_activity_date":1307732522,"creation_date":1307732522,"answer_id":6310921,"question_id":6272272,"body_markdown":"There is no provided solution for this using `BatchSqlUpdate` as far as I know, but you can always\r\n\r\n - query the last key before the insert \r\n - using this information, query all new keys after the insert\r\n\r\n","title":"BatchSqlUpdate - how to get auto generated keys","body":"<p>There is no provided solution for this using <code>BatchSqlUpdate</code> as far as I know, but you can always</p>\n\n<ul>\n<li>query the last key before the insert </li>\n<li>using this information, query all new keys after the insert</li>\n</ul>\n"},{"tags":[],"owner":{"account_id":2620665,"reputation":131,"user_id":2268752,"display_name":"takeseem"},"down_vote_count":0,"up_vote_count":13,"is_accepted":false,"score":13,"last_activity_date":1691613720,"creation_date":1365662513,"answer_id":15942268,"question_id":6272272,"body_markdown":"This solution is merged from the implementations of [JdbcTemplate.update(PreparedStatementCreator, KeyHolder)](https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/jdbc/core/JdbcOperations.html#update(org.springframework.jdbc.core.PreparedStatementCreator,org.springframework.jdbc.support.KeyHolder)) and [JdbcTemplate.batchUpdate(String, BatchPreparedStatementSetter)](https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/jdbc/core/JdbcOperations.html#batchUpdate(java.lang.String,org.springframework.jdbc.core.BatchPreparedStatementSetter)) to allow having both batching and the generated keys.\r\n\r\nIn addition, we directly store the generated keys back to the beans where the inserted rows came from.\r\n\r\na template proc class:\r\n\r\n    public abstract class BatchPreparedStatementSetterWithKeyHolder&lt;T&gt; implements BatchPreparedStatementSetter {\r\n    \tprivate final List&lt;T&gt; beans;\r\n    \t\r\n    \t/**\r\n    \t * @param datas\r\n    \t * @param returnGeneratedKeys true设置{@linkplain Statement#RETURN_GENERATED_KEYS}\r\n    \t */\r\n    \tpublic BatchPreparedStatementSetterWithKeyHolder(List&lt;T&gt; beans) {\r\n    \t\tthis.beans = beans;\r\n    \t}\r\n    \t\r\n    \t\r\n    \t@Override\r\n    \tpublic void setValues(PreparedStatement ps, int i) throws SQLException {\r\n    \t\tsetValues(ps, beans.get(i));\r\n    \t}\r\n    \r\n    \t@Override\r\n    \tpublic final int getBatchSize() {\r\n    \t\treturn beans.size();\r\n    \t}\r\n    \t\r\n    \tpublic void setPrimaryKey(KeyHolder keyHolder) {\r\n    \t\tList&lt;Map&lt;String, Object&gt;&gt; keys = keyHolder.getKeyList();\r\n    \t\tfor (int i = 0, len = keys.size(); i &lt; len; i++) {\r\n    \t\t\tsetPrimaryKey(keys.get(i), beans.get(i));\r\n    \t\t}\r\n    \t}\r\n    \r\n    \tprotected abstract void setValues(PreparedStatement ps, T bean) throws SQLException;\r\n    \tprotected abstract void setPrimaryKey(Map&lt;String, Object&gt; primaryKey, T bean);\r\n    }\r\n\r\na util method batchupdate:\r\n\r\n    private static void generatedKeys(PreparedStatement ps, KeyHolder keyHolder) throws SQLException {\r\n    \t\tList&lt;Map&lt;String, Object&gt;&gt; keys = keyHolder.getKeyList();\r\n    \t\tResultSet rs = ps.getGeneratedKeys();\r\n    \t\tif (rs == null) return;\r\n    \t\t\r\n    \t\ttry {\r\n    \t\t\tkeys.addAll(new RowMapperResultSetExtractor&lt;Map&lt;String, Object&gt;&gt;(new ColumnMapRowMapper(), 1).extractData(rs));\r\n    \t\t} finally {\r\n    \t\t\trs.close();\r\n    \t\t}\r\n    \t}\r\n    \t\r\n    \t/**\r\n    \t * 批量更新\r\n    \t * @param jdbcTemplate\r\n    \t * @param sql\r\n    \t * @param pss\r\n    \t * @param keyHolder 存储主键，如果要存储主键，就必须传入此对象\r\n    \t * @return sql执行结果\r\n    \t * @see JdbcTemplate#batchUpdate(String, org.springframework.jdbc.core.BatchPreparedStatementSetter)\r\n    \t */\r\n    \tpublic static &lt;T&gt; int[] batchUpdateWithKeyHolder(JdbcTemplate jdbcTemplate, final String sql, final BatchPreparedStatementSetterWithKeyHolder&lt;T&gt; pss) {\r\n    \t\treturn jdbcTemplate.execute(new PreparedStatementCreator() {\r\n    \t\t\t@Override\r\n    \t\t\tpublic PreparedStatement createPreparedStatement(Connection con) throws SQLException {\r\n    \t\t\t\treturn con.prepareStatement(sql, Statement.RETURN_GENERATED_KEYS);\r\n    \t\t\t}\r\n    \t\t}, new PreparedStatementCallback&lt;int[]&gt;() {\r\n    \t\t\t@Override\r\n    \t\t\tpublic int[] doInPreparedStatement(PreparedStatement ps) throws SQLException, DataAccessException {\r\n    \t\t\t\ttry {\r\n    \t\t\t\t\tint batchSize = pss.getBatchSize();\r\n    \t\t\t\t\tInterruptibleBatchPreparedStatementSetter ipss =\r\n    \t\t\t\t\t\t\t(pss instanceof InterruptibleBatchPreparedStatementSetter ?\r\n    \t\t\t\t\t\t\t(InterruptibleBatchPreparedStatementSetter) pss : null);\r\n    \t\t\t\t\tint[] result;\r\n    \t\t\t\t\tKeyHolder keyHolder = new GeneratedKeyHolder();\r\n    \t\t\t\t\t\r\n    \t\t\t\t\ttry {\r\n    \t\t\t\t\t\tif (JdbcUtils.supportsBatchUpdates(ps.getConnection())) {\r\n    \t\t\t\t\t\t\tfor (int i = 0; i &lt; batchSize; i++) {\r\n    \t\t\t\t\t\t\t\tpss.setValues(ps, i);\r\n    \t\t\t\t\t\t\t\tif (ipss != null &amp;&amp; ipss.isBatchExhausted(i)) break;\r\n    \t\t\t\t\t\t\t\tps.addBatch();\r\n    \t\t\t\t\t\t\t}\r\n    \t\t\t\t\t\t\tresult = ps.executeBatch();\r\n    \t\t\t\t\t\t\t\r\n    \t\t\t\t\t\t\tgeneratedKeys(ps, keyHolder);\r\n    \t\t\t\t\t\t} else {\r\n    \t\t\t\t\t\t\tList&lt;Integer&gt; rowsAffected = new ArrayList&lt;Integer&gt;();\r\n    \t\t\t\t\t\t\tfor (int i = 0; i &lt; batchSize; i++) {\r\n    \t\t\t\t\t\t\t\tpss.setValues(ps, i);\r\n    \t\t\t\t\t\t\t\tif (ipss != null &amp;&amp; ipss.isBatchExhausted(i)) break;\r\n    \t\t\t\t\t\t\t\t\r\n    \t\t\t\t\t\t\t\trowsAffected.add(ps.executeUpdate());\r\n    \t\t\t\t\t\t\t\tgeneratedKeys(ps, keyHolder);\r\n    \t\t\t\t\t\t\t}\r\n    \t\t\t\t\t\t\t\r\n    \t\t\t\t\t\t\tresult =  rowsAffected.stream().mapToInt(Integer::intValue).toArray();\r\n    \t\t\t\t\t\t}\r\n    \t\t\t\t\t} finally {\r\n    \t\t\t\t\t\tpss.setPrimaryKey(keyHolder);\r\n    \t\t\t\t\t}\r\n    \t\t\t\t\t\r\n    \t\t\t\t\treturn result;\r\n    \t\t\t\t} finally {\r\n    \t\t\t\t\tif (pss instanceof ParameterDisposer) ((ParameterDisposer) pss).cleanupParameters();\r\n    \t\t\t\t}\r\n    \t\t\t}\r\n    \t\t});\r\n    \t}\r\n\r\ne.x:\r\n\r\n    UtilJdbc.batchUpdateWithKeyHolder(jdbcTemplate,\r\n    \t\t\t\t&quot;insert into tbe_vm_node (creator_id, host, ssh_ip, ssh_user, ssh_passwd)&quot; +\r\n    \t\t\t\t&quot; values (?, ?, ?, ?, ?)&quot;,\r\n    \t\t\t\tnew BatchPreparedStatementSetterWithKeyHolder&lt;VmNode&gt;(vmNodes) {\r\n    \t\t\t\t\t@Override\r\n    \t\t\t\t\tprotected void setValues(PreparedStatement ps, VmNode vmNode) throws SQLException {\r\n    \t\t\t\t\t\tUtilJdbc.setValues(ps, vmNode.getCreatorId(), vmNode.getHost(),\r\n    \t\t\t\t\t\t\t\tvmNode.getSshIp(), vmNode.getSshUser(), vmNode.getSshPasswd());\r\n    \t\t\t\t\t}\r\n    \t\t\t\t\t@Override\r\n    \t\t\t\t\tprotected void setPrimaryKey(Map&lt;String, Object&gt; primaryKey, VmNode vmNode) {\r\n    \t\t\t\t\t\tvmNode.setId((Long) primaryKey.get(&quot;abc&quot;));\r\n    \t\t\t\t\t}\r\n    \t\t\t\t});","title":"BatchSqlUpdate - how to get auto generated keys","body":"<p>This solution is merged from the implementations of <a href=\"https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/jdbc/core/JdbcOperations.html#update(org.springframework.jdbc.core.PreparedStatementCreator,org.springframework.jdbc.support.KeyHolder)\" rel=\"nofollow noreferrer\">JdbcTemplate.update(PreparedStatementCreator, KeyHolder)</a> and <a href=\"https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/jdbc/core/JdbcOperations.html#batchUpdate(java.lang.String,org.springframework.jdbc.core.BatchPreparedStatementSetter)\" rel=\"nofollow noreferrer\">JdbcTemplate.batchUpdate(String, BatchPreparedStatementSetter)</a> to allow having both batching and the generated keys.</p>\n<p>In addition, we directly store the generated keys back to the beans where the inserted rows came from.</p>\n<p>a template proc class:</p>\n<pre><code>public abstract class BatchPreparedStatementSetterWithKeyHolder&lt;T&gt; implements BatchPreparedStatementSetter {\n    private final List&lt;T&gt; beans;\n    \n    /**\n     * @param datas\n     * @param returnGeneratedKeys true设置{@linkplain Statement#RETURN_GENERATED_KEYS}\n     */\n    public BatchPreparedStatementSetterWithKeyHolder(List&lt;T&gt; beans) {\n        this.beans = beans;\n    }\n    \n    \n    @Override\n    public void setValues(PreparedStatement ps, int i) throws SQLException {\n        setValues(ps, beans.get(i));\n    }\n\n    @Override\n    public final int getBatchSize() {\n        return beans.size();\n    }\n    \n    public void setPrimaryKey(KeyHolder keyHolder) {\n        List&lt;Map&lt;String, Object&gt;&gt; keys = keyHolder.getKeyList();\n        for (int i = 0, len = keys.size(); i &lt; len; i++) {\n            setPrimaryKey(keys.get(i), beans.get(i));\n        }\n    }\n\n    protected abstract void setValues(PreparedStatement ps, T bean) throws SQLException;\n    protected abstract void setPrimaryKey(Map&lt;String, Object&gt; primaryKey, T bean);\n}\n</code></pre>\n<p>a util method batchupdate:</p>\n<pre><code>private static void generatedKeys(PreparedStatement ps, KeyHolder keyHolder) throws SQLException {\n        List&lt;Map&lt;String, Object&gt;&gt; keys = keyHolder.getKeyList();\n        ResultSet rs = ps.getGeneratedKeys();\n        if (rs == null) return;\n        \n        try {\n            keys.addAll(new RowMapperResultSetExtractor&lt;Map&lt;String, Object&gt;&gt;(new ColumnMapRowMapper(), 1).extractData(rs));\n        } finally {\n            rs.close();\n        }\n    }\n    \n    /**\n     * 批量更新\n     * @param jdbcTemplate\n     * @param sql\n     * @param pss\n     * @param keyHolder 存储主键，如果要存储主键，就必须传入此对象\n     * @return sql执行结果\n     * @see JdbcTemplate#batchUpdate(String, org.springframework.jdbc.core.BatchPreparedStatementSetter)\n     */\n    public static &lt;T&gt; int[] batchUpdateWithKeyHolder(JdbcTemplate jdbcTemplate, final String sql, final BatchPreparedStatementSetterWithKeyHolder&lt;T&gt; pss) {\n        return jdbcTemplate.execute(new PreparedStatementCreator() {\n            @Override\n            public PreparedStatement createPreparedStatement(Connection con) throws SQLException {\n                return con.prepareStatement(sql, Statement.RETURN_GENERATED_KEYS);\n            }\n        }, new PreparedStatementCallback&lt;int[]&gt;() {\n            @Override\n            public int[] doInPreparedStatement(PreparedStatement ps) throws SQLException, DataAccessException {\n                try {\n                    int batchSize = pss.getBatchSize();\n                    InterruptibleBatchPreparedStatementSetter ipss =\n                            (pss instanceof InterruptibleBatchPreparedStatementSetter ?\n                            (InterruptibleBatchPreparedStatementSetter) pss : null);\n                    int[] result;\n                    KeyHolder keyHolder = new GeneratedKeyHolder();\n                    \n                    try {\n                        if (JdbcUtils.supportsBatchUpdates(ps.getConnection())) {\n                            for (int i = 0; i &lt; batchSize; i++) {\n                                pss.setValues(ps, i);\n                                if (ipss != null &amp;&amp; ipss.isBatchExhausted(i)) break;\n                                ps.addBatch();\n                            }\n                            result = ps.executeBatch();\n                            \n                            generatedKeys(ps, keyHolder);\n                        } else {\n                            List&lt;Integer&gt; rowsAffected = new ArrayList&lt;Integer&gt;();\n                            for (int i = 0; i &lt; batchSize; i++) {\n                                pss.setValues(ps, i);\n                                if (ipss != null &amp;&amp; ipss.isBatchExhausted(i)) break;\n                                \n                                rowsAffected.add(ps.executeUpdate());\n                                generatedKeys(ps, keyHolder);\n                            }\n                            \n                            result =  rowsAffected.stream().mapToInt(Integer::intValue).toArray();\n                        }\n                    } finally {\n                        pss.setPrimaryKey(keyHolder);\n                    }\n                    \n                    return result;\n                } finally {\n                    if (pss instanceof ParameterDisposer) ((ParameterDisposer) pss).cleanupParameters();\n                }\n            }\n        });\n    }\n</code></pre>\n<p>e.x:</p>\n<pre><code>UtilJdbc.batchUpdateWithKeyHolder(jdbcTemplate,\n                &quot;insert into tbe_vm_node (creator_id, host, ssh_ip, ssh_user, ssh_passwd)&quot; +\n                &quot; values (?, ?, ?, ?, ?)&quot;,\n                new BatchPreparedStatementSetterWithKeyHolder&lt;VmNode&gt;(vmNodes) {\n                    @Override\n                    protected void setValues(PreparedStatement ps, VmNode vmNode) throws SQLException {\n                        UtilJdbc.setValues(ps, vmNode.getCreatorId(), vmNode.getHost(),\n                                vmNode.getSshIp(), vmNode.getSshUser(), vmNode.getSshPasswd());\n                    }\n                    @Override\n                    protected void setPrimaryKey(Map&lt;String, Object&gt; primaryKey, VmNode vmNode) {\n                        vmNode.setId((Long) primaryKey.get(&quot;abc&quot;));\n                    }\n                });\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3801446,"reputation":1793,"user_id":3154987,"display_name":"BrianC"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1573758894,"creation_date":1573758894,"answer_id":58864221,"question_id":6272272,"body_markdown":"        KeyHolder keyHolder = new GeneratedKeyHolder();\r\n        BatchSqlUpdate updateBatch = new BatchSqlUpdate();\r\n        updateBatch.setSql(&quot;Some INSERT SQL&quot;);\r\n        updateBatch.setJdbcTemplate(jdbcTemp);\r\n        updateBatch.setReturnGeneratedKeys(true);\r\n        updateBatch.updateByNamedParam( paramsMap ,keyHolder);\r\n        updateBatch.flush();","title":"BatchSqlUpdate - how to get auto generated keys","body":"<pre><code>    KeyHolder keyHolder = new GeneratedKeyHolder();\n    BatchSqlUpdate updateBatch = new BatchSqlUpdate();\n    updateBatch.setSql(\"Some INSERT SQL\");\n    updateBatch.setJdbcTemplate(jdbcTemp);\n    updateBatch.setReturnGeneratedKeys(true);\n    updateBatch.updateByNamedParam( paramsMap ,keyHolder);\n    updateBatch.flush();\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1445733,"reputation":149,"user_id":1364290,"display_name":"Dean Thomsen"},"down_vote_count":1,"up_vote_count":2,"is_accepted":false,"score":1,"last_activity_date":1577852642,"creation_date":1577852642,"answer_id":59549979,"question_id":6272272,"body_markdown":"Thanks for the provided solution, I implemented that and it worked great. However, you have references to private classes (UtilIo, UtilObj) where I had to interpret what you were doing. I replaced &quot;UtilIO.close(rs);&quot; with:\r\n\r\n    if (rs != null) {\r\n        rs.close();\r\n    }\r\n\r\nAnd I replaced &quot;result = UtilObj.tointArray(rowsAffected);&quot; with this Java 8 code:\r\n\r\n    result = rowsAffected.stream().mapToInt(Integer::intValue).toArray();","title":"BatchSqlUpdate - how to get auto generated keys","body":"<p>Thanks for the provided solution, I implemented that and it worked great. However, you have references to private classes (UtilIo, UtilObj) where I had to interpret what you were doing. I replaced \"UtilIO.close(rs);\" with:</p>\n\n<pre><code>if (rs != null) {\n    rs.close();\n}\n</code></pre>\n\n<p>And I replaced \"result = UtilObj.tointArray(rowsAffected);\" with this Java 8 code:</p>\n\n<pre><code>result = rowsAffected.stream().mapToInt(Integer::intValue).toArray();\n</code></pre>\n"}],"owner":{"account_id":197604,"reputation":3397,"user_id":441783,"accept_rate":68,"display_name":"hese"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":14899,"favorite_count":0,"down_vote_count":0,"up_vote_count":17,"accepted_answer_id":6310921,"answer_count":4,"score":17,"last_activity_date":1691613720,"creation_date":1307485161,"question_id":6272272,"body_markdown":"I am using spring BatchSqlUpdate to insert a set of rows.  How do I get the auto generated keys for all of the rows inserted?\r\n\r\nWhen doing a single insert I get the keys like this - \r\n\r\n    SqlUpdate sqlUpdate = new SqlUpdate(dataSource, sqlTemplate.toString());\r\n    sqlUpdate.setReturnGeneratedKeys(true);\r\n    KeyHolder keyHolder = new GeneratedKeyHolder();\r\n    sqlUpdate.update(new Object[] {}, keyHolder);\r\n    return keyHolder.getKey().longValue();\r\n\r\nThanks!\r\n\r\n","title":"BatchSqlUpdate - how to get auto generated keys","body":"<p>I am using spring BatchSqlUpdate to insert a set of rows.  How do I get the auto generated keys for all of the rows inserted?</p>\n\n<p>When doing a single insert I get the keys like this - </p>\n\n<pre><code>SqlUpdate sqlUpdate = new SqlUpdate(dataSource, sqlTemplate.toString());\nsqlUpdate.setReturnGeneratedKeys(true);\nKeyHolder keyHolder = new GeneratedKeyHolder();\nsqlUpdate.update(new Object[] {}, keyHolder);\nreturn keyHolder.getKey().longValue();\n</code></pre>\n\n<p>Thanks!</p>\n"},{"tags":["java","json","spring-boot","rest","response"],"comments":[{"owner":{"account_id":3837785,"reputation":277,"user_id":3181718,"display_name":"jr593"},"score":0,"creation_date":1602495696,"post_id":64315219,"comment_id":113728648,"body_markdown":"Please explain what you have tried so far, thanks","body":"Please explain what you have tried so far, thanks"},{"owner":{"account_id":4079098,"reputation":883,"user_id":3349973,"accept_rate":33,"display_name":"Sajjad"},"score":0,"creation_date":1602496120,"post_id":64315219,"comment_id":113728839,"body_markdown":"Have a look at`HttpClient`. You can use `sendAsync` to call `processRequest`. Once the `id` is returned, you can call `getResponse(jobId)`.","body":"Have a look at<code>HttpClient</code>. You can use <code>sendAsync</code> to call <code>processRequest</code>. Once the <code>id</code> is returned, you can call <code>getResponse(jobId)</code>."}],"answers":[{"tags":[],"owner":{"account_id":29194660,"reputation":1,"user_id":22366059,"display_name":"testotp mail"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691612417,"creation_date":1691612417,"answer_id":76871008,"question_id":64315219,"body_markdown":"Try to store the request id in database and wait for the response by polling the database.\r\n\r\nLike the request api may be in wait state and the response api will update the db with the request id","title":"How to send Response or status of request using springboot-rest api","body":"<p>Try to store the request id in database and wait for the response by polling the database.</p>\n<p>Like the request api may be in wait state and the response api will update the db with the request id</p>\n"}],"owner":{"account_id":15608701,"reputation":171,"user_id":11260746,"display_name":"Rubeena"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":470,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1691612417,"creation_date":1602495207,"question_id":64315219,"body_markdown":"I have two rest webservice in my applcation as below(using spring-boot rest api)\r\n\r\n1- public **void processRequest(Request)** - This is asynch webservice to process the request, This will return id of request to client with acknowledgement.\r\n\r\n2- public **Response getResponse(jobid)** - This webservice should return the response of the request generated by ProcessRequest.\r\nhere i want to send the status if request is not ready yet.\r\n\r\nIs there any way to achieve above requirement?","title":"How to send Response or status of request using springboot-rest api","body":"<p>I have two rest webservice in my applcation as below(using spring-boot rest api)</p>\n<p>1- public <strong>void processRequest(Request)</strong> - This is asynch webservice to process the request, This will return id of request to client with acknowledgement.</p>\n<p>2- public <strong>Response getResponse(jobid)</strong> - This webservice should return the response of the request generated by ProcessRequest.\nhere i want to send the status if request is not ready yet.</p>\n<p>Is there any way to achieve above requirement?</p>\n"},{"tags":["java","enums","openapi-generator"],"comments":[{"owner":{"account_id":326480,"reputation":368,"user_id":5047819,"display_name":"Anders Lindgren"},"score":0,"creation_date":1691697473,"post_id":76870979,"comment_id":135530416,"body_markdown":"Have you tested the `enumUnknownDefaultCase`? It seems like a perfekt match for your problem. https://openapi-generator.tech/docs/generators/java","body":"Have you tested the <code>enumUnknownDefaultCase</code>? It seems like a perfekt match for your problem. <a href=\"https://openapi-generator.tech/docs/generators/java\" rel=\"nofollow noreferrer\">openapi-generator.tech/docs/generators/java</a>"}],"owner":{"account_id":92537,"reputation":6275,"user_id":253575,"accept_rate":83,"display_name":"IcedDante"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":57,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1691612058,"creation_date":1691612058,"question_id":76870979,"body_markdown":"I am using the openapi-generator-maven-plugin to scaffold clients in our Spring Boot application. It uses these generated artifacts to connect with 3rd party apis. It works well except one server has been making frequent changes to a string enum value. The format in the open-api definition is something like:\r\n```\r\n&quot;type&quot;: {\r\n  &quot;type&quot;: &quot;string&quot;,\r\n  &quot;enum&quot;: [\r\n    &quot;PARLAY&quot;,\r\n    &quot;STRAIGHT&quot;,\r\n    &quot;FUTURE&quot;,\r\n    &quot;TABLE&quot;,\r\n    &quot;SLOT&quot;\r\n  ]\r\n}\r\n```\r\nOnce the POJO that corresponds the Schema type is generated this is somewhat reasonable rendered as an Enum:\r\n\r\n```\r\npublic enum LedgerEntryReasonEnum {\r\n   PARLAY(&quot;PARLAY&quot;),\r\n   STRAIGHT(&quot;STRAIGHT&quot;),\r\n   FUTURE(&quot;FUTURE&quot;),\r\n   TABLE(&quot;TABLE&quot;)\r\n}\r\n```\r\nThe problem is any changes here, such as new or renamed values break our system in prod. Because of the specifics of our operational excellence we choose not to worry about this specific field but rather, treat **all** enums as strings to avoid the risk of introducing a regression.\r\n\r\nIs there a way to configure the open-api configuration to set up type mappings for enums to String? Here is what my current configuration looks like:\r\n```\r\n&lt;configuration&gt;\r\n\t&lt;inputSpec&gt;${project.basedir}/src/main/resources/third-party-api.json&lt;/inputSpec&gt;\r\n\t&lt;generatorName&gt;java&lt;/generatorName&gt;\r\n\t&lt;library&gt;webclient&lt;/library&gt;\r\n\t&lt;apiPackage&gt;integrations.thirdparty.api&lt;/apiPackage&gt;\r\n\t&lt;invokerPackage&gt;integrations.thirdparty.invoker&lt;/invokerPackage&gt;\r\n\t&lt;modelPackage&gt;integrations.thirdparty.model&lt;/modelPackage&gt;\r\n\t&lt;output&gt;${project.build.directory}/generated-sources/&lt;/output&gt;\r\n\t&lt;generateApiTests&gt;false&lt;/generateApiTests&gt;\r\n\t&lt;generateModelTests&gt;false&lt;/generateModelTests&gt;\r\n\t&lt;skipIfSpecIsUnchanged&gt;true&lt;/skipIfSpecIsUnchanged&gt;\r\n\t&lt;skipValidateSpec&gt;true&lt;/skipValidateSpec&gt;\r\n\t&lt;configOptions&gt;\r\n\t\t&lt;sourceFolder&gt;.&lt;/sourceFolder&gt;\r\n\t&lt;/configOptions&gt;\r\n&lt;/configuration&gt;\r\n```","title":"OpenApi Codegen","body":"<p>I am using the openapi-generator-maven-plugin to scaffold clients in our Spring Boot application. It uses these generated artifacts to connect with 3rd party apis. It works well except one server has been making frequent changes to a string enum value. The format in the open-api definition is something like:</p>\n<pre><code>&quot;type&quot;: {\n  &quot;type&quot;: &quot;string&quot;,\n  &quot;enum&quot;: [\n    &quot;PARLAY&quot;,\n    &quot;STRAIGHT&quot;,\n    &quot;FUTURE&quot;,\n    &quot;TABLE&quot;,\n    &quot;SLOT&quot;\n  ]\n}\n</code></pre>\n<p>Once the POJO that corresponds the Schema type is generated this is somewhat reasonable rendered as an Enum:</p>\n<pre><code>public enum LedgerEntryReasonEnum {\n   PARLAY(&quot;PARLAY&quot;),\n   STRAIGHT(&quot;STRAIGHT&quot;),\n   FUTURE(&quot;FUTURE&quot;),\n   TABLE(&quot;TABLE&quot;)\n}\n</code></pre>\n<p>The problem is any changes here, such as new or renamed values break our system in prod. Because of the specifics of our operational excellence we choose not to worry about this specific field but rather, treat <strong>all</strong> enums as strings to avoid the risk of introducing a regression.</p>\n<p>Is there a way to configure the open-api configuration to set up type mappings for enums to String? Here is what my current configuration looks like:</p>\n<pre><code>&lt;configuration&gt;\n    &lt;inputSpec&gt;${project.basedir}/src/main/resources/third-party-api.json&lt;/inputSpec&gt;\n    &lt;generatorName&gt;java&lt;/generatorName&gt;\n    &lt;library&gt;webclient&lt;/library&gt;\n    &lt;apiPackage&gt;integrations.thirdparty.api&lt;/apiPackage&gt;\n    &lt;invokerPackage&gt;integrations.thirdparty.invoker&lt;/invokerPackage&gt;\n    &lt;modelPackage&gt;integrations.thirdparty.model&lt;/modelPackage&gt;\n    &lt;output&gt;${project.build.directory}/generated-sources/&lt;/output&gt;\n    &lt;generateApiTests&gt;false&lt;/generateApiTests&gt;\n    &lt;generateModelTests&gt;false&lt;/generateModelTests&gt;\n    &lt;skipIfSpecIsUnchanged&gt;true&lt;/skipIfSpecIsUnchanged&gt;\n    &lt;skipValidateSpec&gt;true&lt;/skipValidateSpec&gt;\n    &lt;configOptions&gt;\n        &lt;sourceFolder&gt;.&lt;/sourceFolder&gt;\n    &lt;/configOptions&gt;\n&lt;/configuration&gt;\n</code></pre>\n"},{"tags":["java","reflection"],"comments":[{"owner":{"account_id":1535561,"reputation":7664,"user_id":1431720,"accept_rate":89,"display_name":"Robert"},"score":0,"creation_date":1691616436,"post_id":76870890,"comment_id":135517344,"body_markdown":"What are you trying to do? Sounds like a [xy problem](https://xyproblem.info/). Can you add your code as a [mcve]?","body":"What are you trying to do? Sounds like a <a href=\"https://xyproblem.info/\" rel=\"nofollow noreferrer\">xy problem</a>. Can you add your code as a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>?"},{"owner":{"account_id":785560,"reputation":14879,"user_id":845414,"display_name":"Johannes Kuhn"},"score":1,"creation_date":1691621453,"post_id":76870890,"comment_id":135518021,"body_markdown":"Instead of hooping through the &quot;Generate Class -&gt; work on it reflectively&quot;, consider using a `Map&lt;String, Object&gt;`.","body":"Instead of hooping through the &quot;Generate Class -&gt; work on it reflectively&quot;, consider using a <code>Map&lt;String, Object&gt;</code>."},{"owner":{"account_id":28695516,"reputation":1,"user_id":21973821,"display_name":"wyattfff"},"score":1,"creation_date":1692806150,"post_id":76870890,"comment_id":135675182,"body_markdown":"@Robert The software I am working on consists of ~40 copies of nearly-identical code, where the general flow is SQL query -&gt; conditional formatting -&gt; print to txt file. The only places that these pieces of code differ is the SQL query, the conditions applied, and the order of output fields. My goal is to eliminate this duplication by defining the conditions and field order in a &quot;template&quot; csv file. To that end, I am generating an entity class that maps the SQL query results to field names in the output, then passing the entities to a printer class that reads the template and print accordingly","body":"@Robert The software I am working on consists of ~40 copies of nearly-identical code, where the general flow is SQL query -&gt; conditional formatting -&gt; print to txt file. The only places that these pieces of code differ is the SQL query, the conditions applied, and the order of output fields. My goal is to eliminate this duplication by defining the conditions and field order in a &quot;template&quot; csv file. To that end, I am generating an entity class that maps the SQL query results to field names in the output, then passing the entities to a printer class that reads the template and print accordingly"},{"owner":{"account_id":28695516,"reputation":1,"user_id":21973821,"display_name":"wyattfff"},"score":0,"creation_date":1692806380,"post_id":76870890,"comment_id":135675233,"body_markdown":"@JohannesKuhn I am currently iterating through the members of the class because the order is important, I rely on the data being in a specific order. I could potentially use a LinkedHashMap, though I&#39;m not sure that that would resolve my current issue.","body":"@JohannesKuhn I am currently iterating through the members of the class because the order is important, I rely on the data being in a specific order. I could potentially use a LinkedHashMap, though I&#39;m not sure that that would resolve my current issue."},{"owner":{"account_id":785560,"reputation":14879,"user_id":845414,"display_name":"Johannes Kuhn"},"score":1,"creation_date":1692808172,"post_id":76870890,"comment_id":135675575,"body_markdown":"Fields in a class do not have an order, so they are the wrong tool in that case.","body":"Fields in a class do not have an order, so they are the wrong tool in that case."},{"owner":{"account_id":1535561,"reputation":7664,"user_id":1431720,"accept_rate":89,"display_name":"Robert"},"score":0,"creation_date":1692839304,"post_id":76870890,"comment_id":135679856,"body_markdown":"If you are not doing anything with the fields, just formatting them, can you get away with not having a data object and instead just put everything in a hash and use a templating system for the final output?","body":"If you are not doing anything with the fields, just formatting them, can you get away with not having a data object and instead just put everything in a hash and use a templating system for the final output?"},{"owner":{"account_id":3211603,"reputation":289297,"user_id":2711488,"display_name":"Holger"},"score":1,"creation_date":1692885382,"post_id":76870890,"comment_id":135687113,"body_markdown":"Obviously, a `LinkedHashMap` would do but if you have to process a lot of rows it would be more efficient to have a single `List&lt;String&gt;` for the column names (which never change while processing a table) and a `List&lt;Object&gt;` for each row holding the values with indices corresponding to the column name list. But maybe, you can drop the over-engineered abstraction layers and just implement a loop over the `ResultSet`, performing the formatting and writing to the text file. Makes a total of 100 to 200 lines of code, depending on the complexity of the actual formatting. No code generation needed.","body":"Obviously, a <code>LinkedHashMap</code> would do but if you have to process a lot of rows it would be more efficient to have a single <code>List&lt;String&gt;</code> for the column names (which never change while processing a table) and a <code>List&lt;Object&gt;</code> for each row holding the values with indices corresponding to the column name list. But maybe, you can drop the over-engineered abstraction layers and just implement a loop over the <code>ResultSet</code>, performing the formatting and writing to the text file. Makes a total of 100 to 200 lines of code, depending on the complexity of the actual formatting. No code generation needed."}],"owner":{"account_id":28695516,"reputation":1,"user_id":21973821,"display_name":"wyattfff"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":36,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1691611830,"creation_date":1691610984,"question_id":76870890,"body_markdown":"I&#39;m trying to load a class dynamically and iterate through the declared fields within it. I&#39;m finding that occasionally, a field that I have recently added to the dynamically loaded class is missing.\r\n\r\nThe catch (and yes, I understand this is not really best practice) is that the dynamically loaded class is modified by the program just before it is loaded. \r\n\r\nSpecifically:\r\n1. A &quot;template&quot; (for lack of a better word) .csv file is read (this can be updated in between runs of the program)\r\n2. A POJO class is generated based on that template (this is the class we want to dynamically load, and should be re-written on each run to reflect changes in the template)\r\n3. A `Class` object is created based on the full qualified name of the class we just made\r\n4. We iterate through the declared fields within the class. \r\n\r\nI&#39;ve tried making the function that actually generates the POJO class return a value to ensure that everything is running in order (not that that would ever happen but at this point I&#39;m deeply lost). \r\n\r\nI&#39;ve also tried deleting the POJO entirely between runs of the program, to no avail.\r\n\r\nThe only potential resolution that I&#39;ve found is running the whole program twice in a row, which seems to somehow make the changes to the POJO class fully settle.\r\n\r\nThis seems to indicate that in some way, when I load the generated class based on the qualified name, the previous version of the class (prior to any edits to the template) is loaded. \r\nThe real question is why? Is it possible to ensure that I am loading the absolute most recent version of a class?","title":"Dynamically loaded class missing members at runtime","body":"<p>I'm trying to load a class dynamically and iterate through the declared fields within it. I'm finding that occasionally, a field that I have recently added to the dynamically loaded class is missing.</p>\n<p>The catch (and yes, I understand this is not really best practice) is that the dynamically loaded class is modified by the program just before it is loaded.</p>\n<p>Specifically:</p>\n<ol>\n<li>A &quot;template&quot; (for lack of a better word) .csv file is read (this can be updated in between runs of the program)</li>\n<li>A POJO class is generated based on that template (this is the class we want to dynamically load, and should be re-written on each run to reflect changes in the template)</li>\n<li>A <code>Class</code> object is created based on the full qualified name of the class we just made</li>\n<li>We iterate through the declared fields within the class.</li>\n</ol>\n<p>I've tried making the function that actually generates the POJO class return a value to ensure that everything is running in order (not that that would ever happen but at this point I'm deeply lost).</p>\n<p>I've also tried deleting the POJO entirely between runs of the program, to no avail.</p>\n<p>The only potential resolution that I've found is running the whole program twice in a row, which seems to somehow make the changes to the POJO class fully settle.</p>\n<p>This seems to indicate that in some way, when I load the generated class based on the qualified name, the previous version of the class (prior to any edits to the template) is loaded.\nThe real question is why? Is it possible to ensure that I am loading the absolute most recent version of a class?</p>\n"},{"tags":["java","eclipse","junit","junit4"],"comments":[{"owner":{"account_id":28952,"reputation":13127,"user_id":77804,"accept_rate":55,"display_name":"phtrivier"},"score":1,"creation_date":1267089654,"post_id":2332832,"comment_id":2303167,"body_markdown":"Can you post the content of your test (or at least the class declaration). Also you wrote &quot;at the end have :&quot; with nothing else.","body":"Can you post the content of your test (or at least the class declaration). Also you wrote &quot;at the end have :&quot; with nothing else."},{"owner":{"account_id":5100086,"reputation":1138,"user_id":4089957,"display_name":"prasad vsv"},"score":0,"creation_date":1427794101,"post_id":2332832,"comment_id":46913246,"body_markdown":"check this one.. it should help  http://stackoverflow.com/questions/22469480/junit-no-tests-found","body":"check this one.. it should help  <a href=\"http://stackoverflow.com/questions/22469480/junit-no-tests-found\">stackoverflow.com/questions/22469480/junit-no-tests-found</a>"},{"owner":{"account_id":83518,"reputation":6215,"user_id":234110,"accept_rate":67,"display_name":"Anand Rockzz"},"score":0,"creation_date":1523727706,"post_id":2332832,"comment_id":86683933,"body_markdown":"For **junit 5** see [here](https://stackoverflow.com/a/49834357/234110)","body":"For <b>junit 5</b> see <a href=\"https://stackoverflow.com/a/49834357/234110\">here</a>"}],"answers":[{"tags":[],"owner":{"account_id":42322,"reputation":9431,"user_id":123266,"accept_rate":100,"display_name":"b.roth"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1267089724,"creation_date":1267089724,"answer_id":2332870,"question_id":2332832,"body_markdown":"Is your Eclipse project maven based? If so, you may need to update the m2eclipse version. \r\n\r\n&gt; Just a quick note: I have a project in\r\n&gt; Eclipse which is maven-based, and\r\n&gt; generated initially using the &quot;new\r\n&gt; maven project&quot; wizard in Eclipse. I&#39;m\r\n&gt; using JUnit 4.5 for the unit tests,\r\n&gt; and could quite happily run the tests\r\n&gt; from the command line using maven, and\r\n&gt; individual tests from Eclipse using\r\n&gt; run as JUnit test.... However, when I\r\n&gt; tried to run all of the tests in the\r\n&gt; project by invoking run as JUnit\r\n&gt; test... on the project root node,\r\n&gt; Eclipse complained &quot;**no tests found\r\n&gt; with test runner junit 4**&quot;. Solved by\r\n&gt; upgrading m2eclipse to the latest\r\n&gt; stable development build from the\r\n&gt; m2eclipse update site (specifically, I\r\n&gt; upgraded from version\r\n&gt; 0.9.8.200905041414 to version 0.9.9.200907201116 in Eclipse Galileo).\r\n\r\nFrom here: [http://nuin.blogspot.com/2009/07/m2eclipse-and-junit4-no-tests-found.html][1]\r\n\r\n\r\n  [1]: http://nuin.blogspot.com/2009/07/m2eclipse-and-junit4-no-tests-found.html","title":"No tests found with test runner &#39;JUnit 4&#39;","body":"<p>Is your Eclipse project maven based? If so, you may need to update the m2eclipse version. </p>\n\n<blockquote>\n  <p>Just a quick note: I have a project in\n  Eclipse which is maven-based, and\n  generated initially using the \"new\n  maven project\" wizard in Eclipse. I'm\n  using JUnit 4.5 for the unit tests,\n  and could quite happily run the tests\n  from the command line using maven, and\n  individual tests from Eclipse using\n  run as JUnit test.... However, when I\n  tried to run all of the tests in the\n  project by invoking run as JUnit\n  test... on the project root node,\n  Eclipse complained \"<strong>no tests found\n  with test runner junit 4</strong>\". Solved by\n  upgrading m2eclipse to the latest\n  stable development build from the\n  m2eclipse update site (specifically, I\n  upgraded from version\n  0.9.8.200905041414 to version 0.9.9.200907201116 in Eclipse Galileo).</p>\n</blockquote>\n\n<p>From here: <a href=\"http://nuin.blogspot.com/2009/07/m2eclipse-and-junit4-no-tests-found.html\" rel=\"nofollow noreferrer\">http://nuin.blogspot.com/2009/07/m2eclipse-and-junit4-no-tests-found.html</a></p>\n"},{"tags":[],"owner":{"account_id":4243,"reputation":1301824,"user_id":6309,"accept_rate":100,"display_name":"VonC"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1267091171,"creation_date":1267091171,"answer_id":2333018,"question_id":2332832,"body_markdown":"May be your JUnit launch configuration was for a individual test class, and you somehow changed that config to &quot;run all tests in a source folder, package or project&quot;\r\n\r\nBut that could trigger the &quot;No tests found with test runner &#39;JUnit 4&#39;&quot; error message.\r\n\r\nOr you did a modification in your test class, removing the `@Test` annotation.  \r\nSee this [wiki page][1].\r\n\r\n\r\n  [1]: http://java.syntaxerrors.info/index.php?title=No_tests_found_with_test_runner_JUnit4","title":"No tests found with test runner &#39;JUnit 4&#39;","body":"<p>May be your JUnit launch configuration was for a individual test class, and you somehow changed that config to \"run all tests in a source folder, package or project\"</p>\n\n<p>But that could trigger the \"No tests found with test runner 'JUnit 4'\" error message.</p>\n\n<p>Or you did a modification in your test class, removing the <code>@Test</code> annotation.<br>\nSee this <a href=\"http://java.syntaxerrors.info/index.php?title=No_tests_found_with_test_runner_JUnit4\" rel=\"nofollow noreferrer\">wiki page</a>.</p>\n"},{"tags":[],"owner":{"account_id":22179,"reputation":792,"user_id":54449,"accept_rate":100,"display_name":"JamesG"},"down_vote_count":3,"up_vote_count":49,"is_accepted":false,"score":46,"last_activity_date":1267247463,"creation_date":1267247463,"answer_id":2346309,"question_id":2332832,"body_markdown":"When we get these errors it seems like Eclipse is just confused.  Restart Eclipse, refresh the project, clean it, let Eclipse rebuild it, and try again.  Most times that works like a charm.","title":"No tests found with test runner &#39;JUnit 4&#39;","body":"<p>When we get these errors it seems like Eclipse is just confused.  Restart Eclipse, refresh the project, clean it, let Eclipse rebuild it, and try again.  Most times that works like a charm.</p>\n"},{"tags":[],"owner":{"account_id":9311,"reputation":4535,"user_id":17138,"accept_rate":70,"display_name":"Germ&#225;n"},"down_vote_count":3,"up_vote_count":175,"is_accepted":false,"score":172,"last_activity_date":1355507810,"creation_date":1275798292,"answer_id":2983085,"question_id":2332832,"body_markdown":"this just happened to me. Rebuilding or restarting Eclipse didn&#39;t help.\r\n\r\nI solved it by renaming one of the test methods to start with &quot;test...&quot; (JUnit3 style) and then **all** tests are found. I renamed it back to what it was previously, and it still works.\r\n","title":"No tests found with test runner &#39;JUnit 4&#39;","body":"<p>this just happened to me. Rebuilding or restarting Eclipse didn't help.</p>\n\n<p>I solved it by renaming one of the test methods to start with \"test...\" (JUnit3 style) and then <strong>all</strong> tests are found. I renamed it back to what it was previously, and it still works.</p>\n"},{"tags":[],"owner":{"account_id":624258,"reputation":21,"user_id":371460,"display_name":"Footix29"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1277026792,"creation_date":1277026792,"answer_id":3078786,"question_id":2332832,"body_markdown":"I tried the solution from Germ&#225;n.\r\nIt worked for all the method from my class but i have a lot of classes in my project.\r\n\r\nSo I tried removing from build path and then re-adding it.\r\nIt worked perfectly.\r\n\r\nHope it helps.","title":"No tests found with test runner &#39;JUnit 4&#39;","body":"<p>I tried the solution from Germán.\nIt worked for all the method from my class but i have a lot of classes in my project.</p>\n\n<p>So I tried removing from build path and then re-adding it.\nIt worked perfectly.</p>\n\n<p>Hope it helps.</p>\n"},{"tags":[],"owner":{"account_id":634954,"reputation":1,"user_id":402583,"display_name":"Anna"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1280167093,"creation_date":1280167093,"answer_id":3337550,"question_id":2332832,"body_markdown":"This happened to me too. I found that in Eclipse I didn&#39;t make a new Java Class file and so that&#39;s why it wasn&#39;t compiling. Try copying your code into a java class file if it&#39;s not already there and then compile.","title":"No tests found with test runner &#39;JUnit 4&#39;","body":"<p>This happened to me too. I found that in Eclipse I didn't make a new Java Class file and so that's why it wasn't compiling. Try copying your code into a java class file if it's not already there and then compile.</p>\n"},{"tags":[],"owner":{"account_id":54016,"reputation":4741,"user_id":161575,"display_name":"toomasr"},"down_vote_count":1,"up_vote_count":29,"is_accepted":false,"score":28,"last_activity_date":1295532201,"creation_date":1295532201,"answer_id":4748044,"question_id":2332832,"body_markdown":"I was facing the same problem and I debugged it to bad examples on the web and internals of junit. Basically don&#39;t make your class extend TestCase as some examples show for Junit 4.x. Use some naming convention *Test* or if you want to have an annotation you can use @RunWith(JUnit4.class).\r\n\r\nIf you need access to assert methods extend Assert or use static imports.\r\n\r\nIf your class extends TestCase then even if you use Junit 4 Runner it will be run as 3. This is because in the initialization code there is detection:\r\n\r\nSee JUnit3Builder and the lines:\r\n\r\n\tboolean isPre4Test(Class&lt;?&gt; testClass) {\r\n\t\treturn junit.framework.TestCase.class.isAssignableFrom(testClass);\r\n\t}\r\n\r\nThis returns true and the test for junit4 compatibility won&#39;t be tried.","title":"No tests found with test runner &#39;JUnit 4&#39;","body":"<p>I was facing the same problem and I debugged it to bad examples on the web and internals of junit. Basically don't make your class extend TestCase as some examples show for Junit 4.x. Use some naming convention <em>Test</em> or if you want to have an annotation you can use @RunWith(JUnit4.class).</p>\n\n<p>If you need access to assert methods extend Assert or use static imports.</p>\n\n<p>If your class extends TestCase then even if you use Junit 4 Runner it will be run as 3. This is because in the initialization code there is detection:</p>\n\n<p>See JUnit3Builder and the lines:</p>\n\n<pre><code>boolean isPre4Test(Class&lt;?&gt; testClass) {\n    return junit.framework.TestCase.class.isAssignableFrom(testClass);\n}\n</code></pre>\n\n<p>This returns true and the test for junit4 compatibility won't be tried.</p>\n"},{"tags":[],"owner":{"account_id":254962,"reputation":551,"user_id":534701,"accept_rate":40,"display_name":"nephilim"},"down_vote_count":0,"up_vote_count":37,"is_accepted":false,"score":37,"last_activity_date":1297387749,"creation_date":1297387749,"answer_id":4964734,"question_id":2332832,"body_markdown":"Check if your test class extends &quot;TestCase&quot;. if so, remove that clause. Your class does not need to extend from &quot;TestCase&quot; class. It&#39;s most of the cases I&#39;ve met. \r\n\r\n    public class MyTestCase extends TestCase{\r\n      @Test\r\n      public void checkSomething() {\r\n        //...\r\n      }\r\n    }\r\n    //Result&gt; AssertionFailedError: No test Found in MyTestCase\r\n\r\nFollowing TestCase should be fine.\r\n\r\n    public class MyTestCase {\r\n      @Test\r\n      public void checkSomething() {\r\n        //...\r\n      }\r\n    }\r\n    //Works fine\r\n","title":"No tests found with test runner &#39;JUnit 4&#39;","body":"<p>Check if your test class extends \"TestCase\". if so, remove that clause. Your class does not need to extend from \"TestCase\" class. It's most of the cases I've met. </p>\n\n<pre><code>public class MyTestCase extends TestCase{\n  @Test\n  public void checkSomething() {\n    //...\n  }\n}\n//Result&gt; AssertionFailedError: No test Found in MyTestCase\n</code></pre>\n\n<p>Following TestCase should be fine.</p>\n\n<pre><code>public class MyTestCase {\n  @Test\n  public void checkSomething() {\n    //...\n  }\n}\n//Works fine\n</code></pre>\n"},{"tags":[],"owner":{"account_id":736382,"reputation":359,"user_id":701911,"display_name":"Dima"},"down_vote_count":1,"up_vote_count":36,"is_accepted":false,"score":35,"last_activity_date":1302515256,"creation_date":1302515256,"answer_id":5619513,"question_id":2332832,"body_markdown":"In context menu of your &#39;test&#39; directory choose &#39;Build path&#39; -&gt; &#39;Use as a source folder&#39;.\r\nEclipse should see your unitTests.java files as a source files.\r\nWarning &#39;No JUnit tests found&#39; occures because there is no unitTests.class files in your &#39;build&#39; directory","title":"No tests found with test runner &#39;JUnit 4&#39;","body":"<p>In context menu of your 'test' directory choose 'Build path' -> 'Use as a source folder'.\nEclipse should see your unitTests.java files as a source files.\nWarning 'No JUnit tests found' occures because there is no unitTests.class files in your 'build' directory</p>\n"},{"tags":[],"owner":{"account_id":10242,"reputation":12230,"user_id":19246,"accept_rate":82,"display_name":"Martin C."},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1303740091,"creation_date":1303740091,"answer_id":5779104,"question_id":2332832,"body_markdown":"I found out that Eclipse seems to only perform JUnit 3 style tests if your test-class extends from `TestCase`. If you remove the inheritance, the annotations worked for me.\r\n\r\nBeware that you need to statically import all the required `assert*` methods like `import static org.junit.Assert.*`.","title":"No tests found with test runner &#39;JUnit 4&#39;","body":"<p>I found out that Eclipse seems to only perform JUnit 3 style tests if your test-class extends from <code>TestCase</code>. If you remove the inheritance, the annotations worked for me.</p>\n\n<p>Beware that you need to statically import all the required <code>assert*</code> methods like <code>import static org.junit.Assert.*</code>.</p>\n"},{"tags":[],"owner":{"account_id":449322,"reputation":31,"user_id":844045,"display_name":"Rajith"},"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1310628754,"creation_date":1310628754,"answer_id":6689866,"question_id":2332832,"body_markdown":"I also faced the same issue while running JUnit test. I resolved this by putting the annotation @Test just above the main test function.","title":"No tests found with test runner &#39;JUnit 4&#39;","body":"<p>I also faced the same issue while running JUnit test. I resolved this by putting the annotation @Test just above the main test function.</p>\n"},{"tags":[],"owner":{"account_id":698222,"reputation":50202,"user_id":573032,"accept_rate":77,"display_name":"Roman C"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1332365069,"creation_date":1332365069,"answer_id":9813110,"question_id":2332832,"body_markdown":"No testsuits in JUnit4. Use annotations instead or use old JUnit3 name conventions.\r\n\r\nExample:\r\n \r\n    @RunWith(Suite.class)\r\n    @SuiteClasses({YourClassWithTests.class})\r\n  ","title":"No tests found with test runner &#39;JUnit 4&#39;","body":"<p>No testsuits in JUnit4. Use annotations instead or use old JUnit3 name conventions.</p>\n\n<p>Example:</p>\n\n<pre><code>@RunWith(Suite.class)\n@SuiteClasses({YourClassWithTests.class})\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1130939,"reputation":11,"user_id":1117009,"display_name":"joe otherside"},"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1338082565,"creation_date":1338082565,"answer_id":10771039,"question_id":2332832,"body_markdown":"I had to do a mvn clean on command line then project-&gt;clean in eclipse. I renamed the class beforehand then renamed it back but i doubt that helped.","title":"No tests found with test runner &#39;JUnit 4&#39;","body":"<p>I had to do a mvn clean on command line then project->clean in eclipse. I renamed the class beforehand then renamed it back but i doubt that helped.</p>\n"},{"tags":[],"owner":{"account_id":1352612,"reputation":4119,"user_id":1357094,"accept_rate":85,"display_name":"cellepo"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1343695653,"creation_date":1343695653,"answer_id":11731661,"question_id":2332832,"body_markdown":"What fixed my case was similar to @JamesG&#39;s answer:  I restarted Eclipse, rebuilt the project, and refreshed it; BUT before I did any of that, I 1st closed the project (right-click project in package explorer -&gt; Close Project) and then re-opened it.  Then it worked.\r\n\r\nA workaround solution I found before finding that ultimate solution I just described:  Copy the test class, and run the test class as JUnit.","title":"No tests found with test runner &#39;JUnit 4&#39;","body":"<p>What fixed my case was similar to @JamesG's answer:  I restarted Eclipse, rebuilt the project, and refreshed it; BUT before I did any of that, I 1st closed the project (right-click project in package explorer -> Close Project) and then re-opened it.  Then it worked.</p>\n\n<p>A workaround solution I found before finding that ultimate solution I just described:  Copy the test class, and run the test class as JUnit.</p>\n"},{"tags":[],"owner":{"account_id":1675520,"reputation":31,"user_id":1564816,"display_name":"Mahesh"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1343714781,"creation_date":1343714781,"answer_id":11734114,"question_id":2332832,"body_markdown":"When I face this problem I just edit the file and save it... works like charm","title":"No tests found with test runner &#39;JUnit 4&#39;","body":"<p>When I face this problem I just edit the file and save it... works like charm</p>\n"},{"tags":[],"owner":{"account_id":362234,"reputation":66,"user_id":705313,"display_name":"revindran"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1343776190,"creation_date":1343776190,"answer_id":11750342,"question_id":2332832,"body_markdown":"This happened to me as well. I tried restarting Eclipse and also prefixed my test-methods with tests. Neither worked.\r\n\r\nThe following step worked:\r\nChange all your test methods present in @BeforeClass and @AfterClass to static methods.\r\n\r\ni.e. if you have your test method in the below format:\r\n\r\n    @BeforeClass\r\n    public void testBeforeClass(){\r\n    }\r\n\r\nthen change it to:\r\n\r\n    @BeforeClass\r\n    public static void testBeforeClass(){\r\n    }\r\n\r\nThis worked for me.","title":"No tests found with test runner &#39;JUnit 4&#39;","body":"<p>This happened to me as well. I tried restarting Eclipse and also prefixed my test-methods with tests. Neither worked.</p>\n\n<p>The following step worked:\nChange all your test methods present in @BeforeClass and @AfterClass to static methods.</p>\n\n<p>i.e. if you have your test method in the below format:</p>\n\n<pre><code>@BeforeClass\npublic void testBeforeClass(){\n}\n</code></pre>\n\n<p>then change it to:</p>\n\n<pre><code>@BeforeClass\npublic static void testBeforeClass(){\n}\n</code></pre>\n\n<p>This worked for me.</p>\n"},{"tags":[],"owner":{"account_id":2045401,"reputation":71,"user_id":1825579,"display_name":"Mike Choi"},"down_vote_count":0,"up_vote_count":7,"is_accepted":false,"score":7,"last_activity_date":1352950454,"creation_date":1352950454,"answer_id":13391192,"question_id":2332832,"body_markdown":"Try Adding \r\n\r\n@Test above the method for the test like this\r\n\r\n    @Test\r\n    public void testParse()\r\n    {\r\n    \r\n    }","title":"No tests found with test runner &#39;JUnit 4&#39;","body":"<p>Try Adding </p>\n\n<p>@Test above the method for the test like this</p>\n\n<pre><code>@Test\npublic void testParse()\n{\n\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2147264,"reputation":1017,"user_id":1904631,"accept_rate":57,"display_name":"Sergii"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1355504445,"creation_date":1355503082,"answer_id":13882757,"question_id":2332832,"body_markdown":"My problem was that declaration `import org.junit.Test;` has disappeared (or wasn&#39;t added?). After adding it, I had to remove another `import` declaration (Eclipse&#39;ll hint you which one) and everything began to work again.","title":"No tests found with test runner &#39;JUnit 4&#39;","body":"<p>My problem was that declaration <code>import org.junit.Test;</code> has disappeared (or wasn't added?). After adding it, I had to remove another <code>import</code> declaration (Eclipse'll hint you which one) and everything began to work again.</p>\n"},{"tags":[],"owner":{"account_id":2603495,"reputation":31,"user_id":2255229,"display_name":"Josh T"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1365359966,"creation_date":1365359966,"answer_id":15866246,"question_id":2332832,"body_markdown":"Very late but what solved the problem for me was that my test method names all started with captial letters: &quot;public void Test&quot;. Making the t lower case worked.","title":"No tests found with test runner &#39;JUnit 4&#39;","body":"<p>Very late but what solved the problem for me was that my test method names all started with captial letters: \"public void Test\". Making the t lower case worked.</p>\n"},{"tags":[],"owner":{"account_id":1284726,"reputation":1432,"user_id":1238044,"accept_rate":64,"display_name":"Todor Kolev"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1374848661,"creation_date":1374848661,"answer_id":17883958,"question_id":2332832,"body_markdown":"Check if the folder your tests are in is a source folder. If not - right click and use as source folder.","title":"No tests found with test runner &#39;JUnit 4&#39;","body":"<p>Check if the folder your tests are in is a source folder. If not - right click and use as source folder.</p>\n"},{"tags":[],"owner":{"account_id":69588,"reputation":3307,"user_id":202367,"display_name":"pascal"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1382455110,"creation_date":1382455110,"answer_id":19521885,"question_id":2332832,"body_markdown":"I&#39;m also running Eclipse with Maven (m2e 1.4). The tests were running with Maven, but not with Eclipse... even after several application of `Maven&gt;Update project`.\r\n\r\nMy solution was to add some lines in the .classpath generated by m2e. The lines are now sticking.\r\n\r\n    &lt;classpathentry kind=&quot;src&quot; output=&quot;target/test-classes&quot; path=&quot;src/test/java&quot;&gt;\r\n      &lt;attributes&gt;\r\n        &lt;attribute name=&quot;optional&quot; value=&quot;true&quot;/&gt;\r\n        &lt;attribute name=&quot;maven.pomderived&quot; value=&quot;true&quot;/&gt;\r\n      &lt;/attributes&gt;\r\n    &lt;/classpathentry&gt;\r\n","title":"No tests found with test runner &#39;JUnit 4&#39;","body":"<p>I'm also running Eclipse with Maven (m2e 1.4). The tests were running with Maven, but not with Eclipse... even after several application of <code>Maven&gt;Update project</code>.</p>\n\n<p>My solution was to add some lines in the .classpath generated by m2e. The lines are now sticking.</p>\n\n<pre><code>&lt;classpathentry kind=\"src\" output=\"target/test-classes\" path=\"src/test/java\"&gt;\n  &lt;attributes&gt;\n    &lt;attribute name=\"optional\" value=\"true\"/&gt;\n    &lt;attribute name=\"maven.pomderived\" value=\"true\"/&gt;\n  &lt;/attributes&gt;\n&lt;/classpathentry&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3699724,"reputation":51,"user_id":3079895,"display_name":"Eyal Zamir"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1386509263,"creation_date":1386509263,"answer_id":20453935,"question_id":2332832,"body_markdown":"I have found out the answer:\r\n\r\nI got this error when I executed the test standalone from eclipse (right click on the method and choose to run as junit test), \r\n\r\nWhen I executed the complete class as junit test the test executed correctly with the parameters.\r\n","title":"No tests found with test runner &#39;JUnit 4&#39;","body":"<p>I have found out the answer:</p>\n\n<p>I got this error when I executed the test standalone from eclipse (right click on the method and choose to run as junit test), </p>\n\n<p>When I executed the complete class as junit test the test executed correctly with the parameters.</p>\n"},{"tags":[],"owner":{"account_id":3624028,"reputation":47,"user_id":3022123,"display_name":"user3022123"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1388980430,"creation_date":1388980430,"answer_id":20942708,"question_id":2332832,"body_markdown":"Close and open the project worked for me.","title":"No tests found with test runner &#39;JUnit 4&#39;","body":"<p>Close and open the project worked for me.</p>\n"},{"tags":[],"owner":{"account_id":1336332,"reputation":3448,"user_id":1279002,"accept_rate":44,"display_name":"theINtoy"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1411397356,"creation_date":1411397356,"answer_id":25976987,"question_id":2332832,"body_markdown":"I have this problem from time to time. The thing that resolves the issue most for me is to run the JUnit test from Run configurations... ensuring that JUnit 4 is set as the test runner.\r\n\r\nGenerally, I see this issue when attempting to Run As... Junit test from the context menu on the Package Explorer. If you right click the code for the test you are trying to run and instead of selecting Run As... Junit Test you select Run configurations... ensure the Project, Test Class and test runner are set correctly, clicking apply, then run works all the time for me.","title":"No tests found with test runner &#39;JUnit 4&#39;","body":"<p>I have this problem from time to time. The thing that resolves the issue most for me is to run the JUnit test from Run configurations... ensuring that JUnit 4 is set as the test runner.</p>\n\n<p>Generally, I see this issue when attempting to Run As... Junit test from the context menu on the Package Explorer. If you right click the code for the test you are trying to run and instead of selecting Run As... Junit Test you select Run configurations... ensure the Project, Test Class and test runner are set correctly, clicking apply, then run works all the time for me.</p>\n"},{"tags":[],"owner":{"account_id":2392650,"reputation":2659,"user_id":2092205,"display_name":"Matthew Wise"},"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1423062229,"creation_date":1423062229,"answer_id":28324548,"question_id":2332832,"body_markdown":"Yet another possible solution I&#39;ll throw into the ring: I wasn&#39;t able to run the test class either from the editor window, nor the Package Explorer, but right-clicking on the class name in the Outline view and selecting Run As JUnit Test did work... Go figure!","title":"No tests found with test runner &#39;JUnit 4&#39;","body":"<p>Yet another possible solution I'll throw into the ring: I wasn't able to run the test class either from the editor window, nor the Package Explorer, but right-clicking on the class name in the Outline view and selecting Run As JUnit Test did work... Go figure!</p>\n"},{"tags":[],"owner":{"account_id":5922320,"reputation":1,"user_id":4659306,"display_name":"JuanTorre"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1426176768,"creation_date":1426176768,"answer_id":29014873,"question_id":2332832,"body_markdown":"I started to work with Selenium and Eclipse in my job and I was doing my first automated test and I deleted from the code @Before, @Test, and @After notes and I was having this issue &quot;No tests found with test runner junit4&quot;.\r\n\r\nMy solution it was simply to add again the @Before, @Test and @After notes and with that my script worked. Is important to not delete this from the code.\r\n\r\nThis is a simple test that uses Google to search something:\r\n\r\n    import java.util.regex.Pattern;\r\n    import java.util.concurrent.TimeUnit;\r\n    \r\n    import org.junit.*;\r\n    \r\n    import static org.junit.Assert.*;\r\n    import static org.hamcrest.CoreMatchers.*;\r\n    \r\n    import org.openqa.selenium.*;\r\n    import org.openqa.selenium.firefox.FirefoxDriver;\r\n    import org.openqa.selenium.support.ui.Select;\r\n    \r\n    public class TestingClass {\r\n    \t\r\n    \tprivate WebDriver driver;\r\n    \t//Creates an instance of the FirefoxDriver\r\n    \t**@Before**\r\n    \tpublic void SetUp() throws Exception {\r\n    \t\tdriver = new FirefoxDriver();\r\n    \t}\r\n    \r\n    \t**@Test** \t\r\n    \t//Search using keyword through Google Search\r\n    \tpublic void TestTestClass2 () throws Exception {\r\n    \t\tdriver.get(&quot;http://www.google.com.mx/&quot;);\r\n    \t\tdriver.findElement(By.name(&quot;q&quot;)).sendKeys(&quot;selenium&quot;);\r\n    \t\tThread.sleep(10000);\r\n    \t\tdriver.findElement(By.name(&quot;btnG&quot;)).click();\r\n    \t\tThread.sleep(10000);\r\n    \t}\r\n    \t\r\n    \t//Kill all the WebDriver instances\r\n    \t**@After**\r\n    \tpublic void TearDown() throws Exception {\r\n    \t\tdriver.quit();\r\n    \t}\r\n    \t\r\n    }","title":"No tests found with test runner &#39;JUnit 4&#39;","body":"<p>I started to work with Selenium and Eclipse in my job and I was doing my first automated test and I deleted from the code @Before, @Test, and @After notes and I was having this issue \"No tests found with test runner junit4\".</p>\n\n<p>My solution it was simply to add again the @Before, @Test and @After notes and with that my script worked. Is important to not delete this from the code.</p>\n\n<p>This is a simple test that uses Google to search something:</p>\n\n<pre><code>import java.util.regex.Pattern;\nimport java.util.concurrent.TimeUnit;\n\nimport org.junit.*;\n\nimport static org.junit.Assert.*;\nimport static org.hamcrest.CoreMatchers.*;\n\nimport org.openqa.selenium.*;\nimport org.openqa.selenium.firefox.FirefoxDriver;\nimport org.openqa.selenium.support.ui.Select;\n\npublic class TestingClass {\n\n    private WebDriver driver;\n    //Creates an instance of the FirefoxDriver\n    **@Before**\n    public void SetUp() throws Exception {\n        driver = new FirefoxDriver();\n    }\n\n    **@Test**   \n    //Search using keyword through Google Search\n    public void TestTestClass2 () throws Exception {\n        driver.get(\"http://www.google.com.mx/\");\n        driver.findElement(By.name(\"q\")).sendKeys(\"selenium\");\n        Thread.sleep(10000);\n        driver.findElement(By.name(\"btnG\")).click();\n        Thread.sleep(10000);\n    }\n\n    //Kill all the WebDriver instances\n    **@After**\n    public void TearDown() throws Exception {\n        driver.quit();\n    }\n\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1312122,"reputation":2474,"user_id":1259917,"display_name":"n0741337"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1436974130,"creation_date":1436974130,"answer_id":31434706,"question_id":2332832,"body_markdown":"Using ScalaIDE (3.0.4-2.11-20140723-2253-Typesafe) I was having a similar problem with the `Right Click Scala Test Class-&gt; Run As -&gt; Scala Junit Test` context menu.\r\n\r\nI tried editting the class(but not for a compile failure), cleaning, closing the project, closing Eclipse.  None of those worked to restore the context menu for classes that had previously worked well.  The test classes don&#39;t use the `@Test` annotation and instead use the `@RunWith(classOf[JUnitRunner])` annotation at the top of the class using ScalaTest code.\r\n\r\nWhen I tried choosing `Scala Junit Test` from the Run Configuration launch editor directly, I received the dialog from the question.  Footix29&#39;s answer was the key for me.\r\n\r\nI noticed that even though I had cleaned my project a few times, my classes in the /bin directory hadn&#39;t actually been rebuilt in a while.\r\n\r\nHere&#39;s how I got back the context menu, and was able to once again run `Scala Junit Test`s:\r\n\r\n* `manually` cleaned the classes by deleting the `/bin/&lt;package dir&gt;*` via Explorer\r\n* `Project -&gt; Clean`ed the project along with a full rebuild\r\n\r\nI suspect that a class edit in general is able to clean some saved state of Eclipse and get it going again.  In my case all of the previously working classes I tried had failed so the `manual` clean step was just the hammer I needed.  However, other tricks that affect Eclipse&#39;s concept of the class path/build state should also work.\r\n\r\nFurther, I think that this behaviour was triggered in part by attempting to refactor a Scala class by renaming it( which the Scala Eclipse IDE sucks at ), where all the cleanup after the initial file change is manual.  There were no build errors, but there were also no warnings that I was expecting meaning something was definitely stuck in Eclipse&#39;s build state info.","title":"No tests found with test runner &#39;JUnit 4&#39;","body":"<p>Using ScalaIDE (3.0.4-2.11-20140723-2253-Typesafe) I was having a similar problem with the <code>Right Click Scala Test Class-&gt; Run As -&gt; Scala Junit Test</code> context menu.</p>\n\n<p>I tried editting the class(but not for a compile failure), cleaning, closing the project, closing Eclipse.  None of those worked to restore the context menu for classes that had previously worked well.  The test classes don't use the <code>@Test</code> annotation and instead use the <code>@RunWith(classOf[JUnitRunner])</code> annotation at the top of the class using ScalaTest code.</p>\n\n<p>When I tried choosing <code>Scala Junit Test</code> from the Run Configuration launch editor directly, I received the dialog from the question.  Footix29's answer was the key for me.</p>\n\n<p>I noticed that even though I had cleaned my project a few times, my classes in the /bin directory hadn't actually been rebuilt in a while.</p>\n\n<p>Here's how I got back the context menu, and was able to once again run <code>Scala Junit Test</code>s:</p>\n\n<ul>\n<li><code>manually</code> cleaned the classes by deleting the <code>/bin/&lt;package dir&gt;*</code> via Explorer</li>\n<li><code>Project -&gt; Clean</code>ed the project along with a full rebuild</li>\n</ul>\n\n<p>I suspect that a class edit in general is able to clean some saved state of Eclipse and get it going again.  In my case all of the previously working classes I tried had failed so the <code>manual</code> clean step was just the hammer I needed.  However, other tricks that affect Eclipse's concept of the class path/build state should also work.</p>\n\n<p>Further, I think that this behaviour was triggered in part by attempting to refactor a Scala class by renaming it( which the Scala Eclipse IDE sucks at ), where all the cleanup after the initial file change is manual.  There were no build errors, but there were also no warnings that I was expecting meaning something was definitely stuck in Eclipse's build state info.</p>\n"},{"tags":[],"owner":{"account_id":1317232,"reputation":3875,"user_id":1263837,"accept_rate":11,"display_name":"Kundan Atre"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1439275257,"creation_date":1439275257,"answer_id":31934863,"question_id":2332832,"body_markdown":"There is another chance, you might have changed Junit Test from lower version(e.g. Junit 3) to Junit 4 .\r\nIs so follow below steps:-\r\n\r\n    1. Right Click on class\r\n    2. Select Run as &gt;&gt; &quot;Run Configurations&quot;\r\n    3. Check your &quot;Test Runner&quot; option in new window\r\n    4. If it not same as maven change it for example change it as Junit 4.","title":"No tests found with test runner &#39;JUnit 4&#39;","body":"<p>There is another chance, you might have changed Junit Test from lower version(e.g. Junit 3) to Junit 4 .\nIs so follow below steps:-</p>\n\n<pre><code>1. Right Click on class\n2. Select Run as &gt;&gt; \"Run Configurations\"\n3. Check your \"Test Runner\" option in new window\n4. If it not same as maven change it for example change it as Junit 4.\n</code></pre>\n"},{"tags":[],"owner":{"account_id":561923,"reputation":7488,"user_id":1118559,"accept_rate":38,"display_name":"MindBrain"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1455055972,"creation_date":1455055972,"answer_id":35303239,"question_id":2332832,"body_markdown":"Right Click the Project -&gt; Build Dependencies -&gt; remove the ones which have been excluded from the build path -&gt; Click OK\r\n\r\nRight Click the Project -&gt; Maven -&gt; Update Project.\r\n\r\nYou should be good to go..","title":"No tests found with test runner &#39;JUnit 4&#39;","body":"<p>Right Click the Project -> Build Dependencies -> remove the ones which have been excluded from the build path -> Click OK</p>\n\n<p>Right Click the Project -> Maven -> Update Project.</p>\n\n<p>You should be good to go..</p>\n"},{"tags":[],"owner":{"account_id":1059488,"reputation":1695,"user_id":1061409,"display_name":"Vu Truong"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1461815649,"creation_date":1461815649,"answer_id":36904941,"question_id":2332832,"body_markdown":"You can fix this issue by do as following:\r\n\r\n - Right click on the folder named &#39;Test&#39; &gt; Build Path &gt; Use as Source\r\n  Folder\r\n - Or you can set classpath same as: `&lt;classpathentry kind=&quot;src&quot;\r\n   path=&quot;src/test/java&quot;/&gt;` . You replace **&quot;src/test/java&quot;** by your test package\r\n\r\nThis issue happened because of junit cannot recognize your source code :D","title":"No tests found with test runner &#39;JUnit 4&#39;","body":"<p>You can fix this issue by do as following:</p>\n\n<ul>\n<li>Right click on the folder named 'Test' > Build Path > Use as Source\nFolder</li>\n<li>Or you can set classpath same as: <code>&lt;classpathentry kind=\"src\"\npath=\"src/test/java\"/&gt;</code> . You replace <strong>\"src/test/java\"</strong> by your test package</li>\n</ul>\n\n<p>This issue happened because of junit cannot recognize your source code :D</p>\n"},{"tags":[],"owner":{"account_id":157933,"reputation":539,"user_id":376208,"display_name":"SimonB"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1464771430,"creation_date":1464102834,"answer_id":37417579,"question_id":2332832,"body_markdown":"Six years later ... and there are still problems with Eclipse and occasionally not finding JUnits.\r\n\r\nIn my Eclipse Mars 2 I discovered that it won&#39;t recognise test classes pulled in from git if there are more than 9 or 10 `@Test` annotations in the file. I need to comment out any extra tests, run the test class, then uncomment them and re-run the class. Go figure...","title":"No tests found with test runner &#39;JUnit 4&#39;","body":"<p>Six years later ... and there are still problems with Eclipse and occasionally not finding JUnits.</p>\n\n<p>In my Eclipse Mars 2 I discovered that it won't recognise test classes pulled in from git if there are more than 9 or 10 <code>@Test</code> annotations in the file. I need to comment out any extra tests, run the test class, then uncomment them and re-run the class. Go figure...</p>\n"},{"tags":[],"owner":{"account_id":9037748,"reputation":9,"user_id":6733006,"display_name":"Heather"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1471590259,"creation_date":1471590259,"answer_id":39032974,"question_id":2332832,"body_markdown":"There are two reasons for this Exception:\r\n\r\n 1. The source code hasn’t been compiled YET.\r\n 2. Or on the contrary, the source code has been compiled BUT it cannot been found by JUnit.\r\n\r\nFor reason one, it has no leg to stand. Because like many people said: the ‘old’ methods work perfectly. Only the new-added methods cannot been identified. \r\nThen the second reason became the only explanation: JUnit can NOT find the freshly compiled classes. \r\nHaving that in mind, I did this: Right click the project -&gt;Java Build Path -&gt; Edit Source item:\r\nproject_name/src/test/java’s Output folder, change the Output folder into a ‘Specific output folder(path relative to project_name). Provide this value: target/test-class. \r\nBe hold: This is the default test source codes’ output folder defined by Maven. It has been overwrote by M2E (or me). That’s why JUnit cannot find it. \r\nSo my guess is many people who had run into this lovely exception are most likely dealing with a Web project which is managed by Maven. Am I right?! This also contributed my conclusion that reason one should be excluded -- “old” methods can be found is because they had been automatically compiled when the Tomcat was (re)started. Into the ‘wrong’ path maybe, but JUnit found it anyway.\r\n\r\nBefore I had figured this out. I tried many things as advised: update to the latest JUnit4, Back and forth between build path and use as source folder, capital Test vs test, etc. Nothing happened until I specifically identified the output location for the test source.\r\nWith all those explanation, my second reason should be re-phrased as this: the new codes had not been timely compiled to the right path! \r\nGood luck.","title":"No tests found with test runner &#39;JUnit 4&#39;","body":"<p>There are two reasons for this Exception:</p>\n\n<ol>\n<li>The source code hasn’t been compiled YET.</li>\n<li>Or on the contrary, the source code has been compiled BUT it cannot been found by JUnit.</li>\n</ol>\n\n<p>For reason one, it has no leg to stand. Because like many people said: the ‘old’ methods work perfectly. Only the new-added methods cannot been identified. \nThen the second reason became the only explanation: JUnit can NOT find the freshly compiled classes. \nHaving that in mind, I did this: Right click the project ->Java Build Path -> Edit Source item:\nproject_name/src/test/java’s Output folder, change the Output folder into a ‘Specific output folder(path relative to project_name). Provide this value: target/test-class. \nBe hold: This is the default test source codes’ output folder defined by Maven. It has been overwrote by M2E (or me). That’s why JUnit cannot find it. \nSo my guess is many people who had run into this lovely exception are most likely dealing with a Web project which is managed by Maven. Am I right?! This also contributed my conclusion that reason one should be excluded -- “old” methods can be found is because they had been automatically compiled when the Tomcat was (re)started. Into the ‘wrong’ path maybe, but JUnit found it anyway.</p>\n\n<p>Before I had figured this out. I tried many things as advised: update to the latest JUnit4, Back and forth between build path and use as source folder, capital Test vs test, etc. Nothing happened until I specifically identified the output location for the test source.\nWith all those explanation, my second reason should be re-phrased as this: the new codes had not been timely compiled to the right path! \nGood luck.</p>\n"},{"tags":[],"owner":{"account_id":1904822,"reputation":150,"user_id":1719906,"accept_rate":67,"display_name":"Himadri"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1481460494,"creation_date":1481453609,"answer_id":41085369,"question_id":2332832,"body_markdown":"I also faced this Issue while implementing @RunWith(Cucumber.class). \r\nSince this annotation was inside a Public class and hence\r\nEclipse Shows this &quot;No tests found with test runner not found&quot; error.\r\n\r\nOnce I called / placed the test runner annotation before the runner class, The tests showed up nicely.\r\n\r\nReaders must identify which Junit Test Runner they are using. One can check with @RunWith(JUnit4.class) is Outside or inside the runner.class parenthesis {}. If its inside, Please place it outside.\r\n\r\n","title":"No tests found with test runner &#39;JUnit 4&#39;","body":"<p>I also faced this Issue while implementing @RunWith(Cucumber.class). \nSince this annotation was inside a Public class and hence\nEclipse Shows this \"No tests found with test runner not found\" error.</p>\n\n<p>Once I called / placed the test runner annotation before the runner class, The tests showed up nicely.</p>\n\n<p>Readers must identify which Junit Test Runner they are using. One can check with @RunWith(JUnit4.class) is Outside or inside the runner.class parenthesis {}. If its inside, Please place it outside.</p>\n"},{"tags":[],"owner":{"account_id":83518,"reputation":6215,"user_id":234110,"accept_rate":67,"display_name":"Anand Rockzz"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1523727666,"creation_date":1523727666,"answer_id":49834357,"question_id":2332832,"body_markdown":"If you are trying to setup **junit 5**\r\nadd `@RunWith(JUnitPlatform.class)`\r\n\r\nand `import org.junit.platform.runner.JUnitPlatform;` so that eclipse can recognize the `junit 5` test classes as test classes","title":"No tests found with test runner &#39;JUnit 4&#39;","body":"<p>If you are trying to setup <strong>junit 5</strong>\nadd <code>@RunWith(JUnitPlatform.class)</code></p>\n\n<p>and <code>import org.junit.platform.runner.JUnitPlatform;</code> so that eclipse can recognize the <code>junit 5</code> test classes as test classes</p>\n"},{"tags":[],"owner":{"account_id":4192718,"reputation":1097,"user_id":3434956,"accept_rate":95,"display_name":"mohsen.nour"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1547880805,"creation_date":1547880805,"answer_id":54264775,"question_id":2332832,"body_markdown":"My problem was using **\r\n\r\n&gt; testng\r\n\r\n** package \r\n org.testng.Assert; \r\n\r\nYou can replace it in libraries of the project (*Maven*)  with JUnit and then need to refactor project.  \r\nOR add TestNG Eclipse plug-in  \r\n\r\nhttp://testng.org/doc/eclipse.html\r\n","title":"No tests found with test runner &#39;JUnit 4&#39;","body":"<p>My problem was using **</p>\n\n<blockquote>\n  <p>testng</p>\n</blockquote>\n\n<p>** package \n org.testng.Assert; </p>\n\n<p>You can replace it in libraries of the project (<em>Maven</em>)  with JUnit and then need to refactor project.<br>\nOR add TestNG Eclipse plug-in  </p>\n\n<p><a href=\"http://testng.org/doc/eclipse.html\" rel=\"nofollow noreferrer\">http://testng.org/doc/eclipse.html</a></p>\n"},{"tags":[],"owner":{"account_id":60400,"reputation":19147,"user_id":180416,"accept_rate":63,"display_name":"rich"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1561455538,"creation_date":1561455538,"answer_id":56751034,"question_id":2332832,"body_markdown":"I&#39;ve had issues with this recently, which seem to be fixed in the latest Eclipse.\r\n\r\n`eclipse-java 4.11.0,2019-03:R -&gt; 4.12.0,2019-06:R`","title":"No tests found with test runner &#39;JUnit 4&#39;","body":"<p>I've had issues with this recently, which seem to be fixed in the latest Eclipse.</p>\n\n<p><code>eclipse-java 4.11.0,2019-03:R -&gt; 4.12.0,2019-06:R</code></p>\n"},{"tags":[],"owner":{"account_id":1378559,"reputation":1668,"user_id":1312034,"accept_rate":75,"display_name":"Ravikiran butti"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1564052554,"creation_date":1564052554,"answer_id":57200455,"question_id":2332832,"body_markdown":"I had this issue when my Java class name was similar to the Test class name. Just updated the name of the Test class by post fixing it with keywork &quot;Test&quot; and it started working\r\n\r\n**Before:**\r\nJava class : ACMEController\r\nTest class : ACMEController\r\n\r\n**After:**\r\nJava class : ACMEController\r\nTest class : ACMEControllerTest","title":"No tests found with test runner &#39;JUnit 4&#39;","body":"<p>I had this issue when my Java class name was similar to the Test class name. Just updated the name of the Test class by post fixing it with keywork \"Test\" and it started working</p>\n\n<p><strong>Before:</strong>\nJava class : ACMEController\nTest class : ACMEController</p>\n\n<p><strong>After:</strong>\nJava class : ACMEController\nTest class : ACMEControllerTest</p>\n"},{"tags":[],"owner":{"account_id":201558,"reputation":20189,"user_id":448078,"accept_rate":61,"display_name":"Mike"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1568410318,"creation_date":1568410318,"answer_id":57930578,"question_id":2332832,"body_markdown":"Add `@Test` on top of your test.  \r\nMouse hover to the annotation.  \r\nChose &#39;add junit 4 library to classpath&#39;","title":"No tests found with test runner &#39;JUnit 4&#39;","body":"<p>Add <code>@Test</code> on top of your test.<br>\nMouse hover to the annotation.<br>\nChose 'add junit 4 library to classpath'</p>\n"},{"tags":[],"owner":{"account_id":5727357,"reputation":409,"user_id":4523982,"display_name":"fidudidu"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1573116733,"creation_date":1573116733,"answer_id":58745030,"question_id":2332832,"body_markdown":"In my case the issue was the generics parameters:\r\n\r\n    public class TestClass&lt;T extends Serializable&gt; {\r\n\r\n**removing** :\r\n\r\n&gt; &amp;lt;T extends Serializable&amp;gt;\r\n\r\n and the option was available again.\r\n\r\nI&#39;m using Junit4","title":"No tests found with test runner &#39;JUnit 4&#39;","body":"<p>In my case the issue was the generics parameters:</p>\n\n<pre><code>public class TestClass&lt;T extends Serializable&gt; {\n</code></pre>\n\n<p><strong>removing</strong> :</p>\n\n<blockquote>\n  <p>&lt;T extends Serializable&gt;</p>\n</blockquote>\n\n<p>and the option was available again.</p>\n\n<p>I'm using Junit4</p>\n"},{"tags":[],"owner":{"account_id":18826296,"reputation":31,"user_id":13731108,"display_name":"Max Tardiveau"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1592186070,"creation_date":1592186070,"answer_id":62380232,"question_id":2332832,"body_markdown":"You might be able to solve this simply by renaming your test class to have a name that ends with Test, e.g. ThisAndThatTest\r\n\r\n","title":"No tests found with test runner &#39;JUnit 4&#39;","body":"<p>You might be able to solve this simply by renaming your test class to have a name that ends with Test, e.g. ThisAndThatTest</p>\n"},{"tags":[],"owner":{"account_id":5258193,"reputation":905,"user_id":4200473,"display_name":"Richard Jessop"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1599251561,"creation_date":1599250468,"answer_id":63747527,"question_id":2332832,"body_markdown":"Check for updates!  Eclipse is no doubt fully aware of this problem considering how many workarounds have been presented.  There is obviously something systemic involved...something that defies explanation or any sense of consistency.  It would have been useful if Eclipse would have let the community know what the problem was and how it was fixed.\r\n\r\nAnother recent find for me was to delete any source directories that had no files or the all files were excluded.","title":"No tests found with test runner &#39;JUnit 4&#39;","body":"<p>Check for updates!  Eclipse is no doubt fully aware of this problem considering how many workarounds have been presented.  There is obviously something systemic involved...something that defies explanation or any sense of consistency.  It would have been useful if Eclipse would have let the community know what the problem was and how it was fixed.</p>\n<p>Another recent find for me was to delete any source directories that had no files or the all files were excluded.</p>\n"},{"tags":[],"owner":{"account_id":2180987,"reputation":2146,"user_id":1930496,"display_name":"lorenzo-bettini"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1619776462,"creation_date":1619776462,"answer_id":67331833,"question_id":2332832,"body_markdown":"If you&#39;re sure it used to work and now it&#39;s not working anymore, chances are that the Java index got corrupted. In the preferences, search for &quot;java index&quot;; it&#39;s in &quot;Java&quot; and then there&#39;s a button &quot;Rebuild Index&quot; (or use Ctrl+3, &quot;Find Actions&quot;, to quickly search for &quot;Rebuild Java Index&quot;). Once selected, the next time you try to run the JUnit test you should see that Eclipse is rebuilding the Java index and the JUnit tests should start now.","title":"No tests found with test runner &#39;JUnit 4&#39;","body":"<p>If you're sure it used to work and now it's not working anymore, chances are that the Java index got corrupted. In the preferences, search for &quot;java index&quot;; it's in &quot;Java&quot; and then there's a button &quot;Rebuild Index&quot; (or use Ctrl+3, &quot;Find Actions&quot;, to quickly search for &quot;Rebuild Java Index&quot;). Once selected, the next time you try to run the JUnit test you should see that Eclipse is rebuilding the Java index and the JUnit tests should start now.</p>\n"},{"tags":[],"owner":{"account_id":304252,"reputation":785,"user_id":613651,"display_name":"Keith Tyler"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1621576239,"creation_date":1621576239,"answer_id":67631452,"question_id":2332832,"body_markdown":"I ran into this issue because I had a @BeforeClass that was not static.\r\n\r\nFor some reason the error wasn&#39;t exposed through my normal junit run configuration.","title":"No tests found with test runner &#39;JUnit 4&#39;","body":"<p>I ran into this issue because I had a @BeforeClass that was not static.</p>\n<p>For some reason the error wasn't exposed through my normal junit run configuration.</p>\n"},{"tags":[],"owner":{"account_id":4245916,"reputation":338,"user_id":3474613,"display_name":"Nick"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1633945694,"creation_date":1633945694,"answer_id":69524214,"question_id":2332832,"body_markdown":"I tried all the answers above.\r\n\r\nIn my case my project had both junit4 and junit5 dependencies. I was trying to use junit4 so after making sure I used correct junit4 imports it still did not work.\r\n\r\nI finally found the problem. The eclipse JUnit runner used in the debug configuration was set to JUnit5. I changed it to JUnit4 and the tests are now found and executed.","title":"No tests found with test runner &#39;JUnit 4&#39;","body":"<p>I tried all the answers above.</p>\n<p>In my case my project had both junit4 and junit5 dependencies. I was trying to use junit4 so after making sure I used correct junit4 imports it still did not work.</p>\n<p>I finally found the problem. The eclipse JUnit runner used in the debug configuration was set to JUnit5. I changed it to JUnit4 and the tests are now found and executed.</p>\n"},{"tags":[],"owner":{"account_id":17594,"reputation":3216,"user_id":39531,"accept_rate":50,"display_name":"jevon"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1650326134,"creation_date":1650326134,"answer_id":71918219,"question_id":2332832,"body_markdown":"Using JUnit4 and a Gradle-based project, none of the earlier suggestions worked in my case. What _did_ work was:\r\n\r\n1. Right click your `test` source folder, and click `Properties`\r\n2. Jump to `Run/Debug Settings`\r\n3. Select all of the run/debug configurations, and delete them.\r\n\r\nMy guess is that one of these launch configurations was messing up my JUnit4 runner. Resetting all of the run/debug configurations solved JUnit4 not finding any tests to run.","title":"No tests found with test runner &#39;JUnit 4&#39;","body":"<p>Using JUnit4 and a Gradle-based project, none of the earlier suggestions worked in my case. What <em>did</em> work was:</p>\n<ol>\n<li>Right click your <code>test</code> source folder, and click <code>Properties</code></li>\n<li>Jump to <code>Run/Debug Settings</code></li>\n<li>Select all of the run/debug configurations, and delete them.</li>\n</ol>\n<p>My guess is that one of these launch configurations was messing up my JUnit4 runner. Resetting all of the run/debug configurations solved JUnit4 not finding any tests to run.</p>\n"},{"tags":[],"owner":{"account_id":8460842,"reputation":554,"user_id":6346653,"display_name":"nick_j_white"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1650938015,"creation_date":1650938015,"answer_id":72007515,"question_id":2332832,"body_markdown":"I tried all of the suggestions above. Only deleting existing test run configurations for that class finally resolved it. Eclipse is weird...","title":"No tests found with test runner &#39;JUnit 4&#39;","body":"<p>I tried all of the suggestions above. Only deleting existing test run configurations for that class finally resolved it. Eclipse is weird...</p>\n"},{"tags":[],"owner":{"account_id":5362341,"reputation":688,"user_id":4273204,"accept_rate":0,"display_name":"Akash Verma"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1654421615,"creation_date":1654421615,"answer_id":72506216,"question_id":2332832,"body_markdown":"ok In my case (using Junit5), if i tried to run with  \r\n\r\n&gt; @RunWith(MockitoJUnitRunner::class)\r\n\r\nI got error \r\n\r\n    No tests found in ServiceImplTest\r\n    Is the method annotated with @Test?\r\n    Is the method public?\r\n    org.mockito.exceptions.base.MockitoException: \r\n\r\n    No tests found in ServiceImplTest\r\n    Is the method annotated with @Test?\r\n    Is the method public?\r\n\r\nSolution: Simply removing @RunWith(MockitoJUnitRunner::class) from Top of class worked!\r\n ","title":"No tests found with test runner &#39;JUnit 4&#39;","body":"<p>ok In my case (using Junit5), if i tried to run with</p>\n<blockquote>\n<p>@RunWith(MockitoJUnitRunner::class)</p>\n</blockquote>\n<p>I got error</p>\n<pre><code>No tests found in ServiceImplTest\nIs the method annotated with @Test?\nIs the method public?\norg.mockito.exceptions.base.MockitoException: \n\nNo tests found in ServiceImplTest\nIs the method annotated with @Test?\nIs the method public?\n</code></pre>\n<p>Solution: Simply removing @RunWith(MockitoJUnitRunner::class) from Top of class worked!</p>\n"},{"tags":[],"owner":{"account_id":3326028,"reputation":115,"user_id":2796104,"display_name":"Hmbucker"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1681983180,"creation_date":1681983180,"answer_id":76062614,"question_id":2332832,"body_markdown":"It might be silly, but I got the error making my @Test function private instead of public... too early in the morning.","title":"No tests found with test runner &#39;JUnit 4&#39;","body":"<p>It might be silly, but I got the error making my @Test function private instead of public... too early in the morning.</p>\n"},{"tags":[],"owner":{"account_id":1474447,"reputation":721,"user_id":1385221,"accept_rate":80,"display_name":"madeFromCode"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691611634,"creation_date":1691611634,"answer_id":76870946,"question_id":2332832,"body_markdown":"I had to make the class public. Before I had &#39;class myTests&#39; and making it &#39;public class myTests&#39; allowed intelliJ to find the tests.","title":"No tests found with test runner &#39;JUnit 4&#39;","body":"<p>I had to make the class public. Before I had 'class myTests' and making it 'public class myTests' allowed intelliJ to find the tests.</p>\n"}],"owner":{"account_id":105295,"reputation":1351,"user_id":281070,"accept_rate":0,"display_name":"user281070"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":284705,"favorite_count":0,"down_vote_count":0,"up_vote_count":120,"answer_count":49,"score":120,"last_activity_date":1691611634,"creation_date":1267089358,"question_id":2332832,"body_markdown":"My Java test worked well from Eclipse. But now, when I relaunch test from the run menu, I get the following message: \r\n\r\n    No tests found with test runner &#39;JUnit 4&#39;\r\n\r\nIn the `.classpath` file I have all `jar` files, and at the end have: \r\n\r\n    &lt;classpathentry exported=&quot;true&quot; kind=&quot;con&quot; path=&quot;org.eclipse.jdt.junit.JUNIT_CONTAINER/4&quot;/&gt;\r\n    \t&lt;classpathentry kind=&quot;output&quot; path=&quot;bin&quot;/&gt;\r\n    &lt;/classpath&gt;\r\n\r\nHow can I resolve this error and get tests running again?\r\n","title":"No tests found with test runner &#39;JUnit 4&#39;","body":"<p>My Java test worked well from Eclipse. But now, when I relaunch test from the run menu, I get the following message: </p>\n\n<pre><code>No tests found with test runner 'JUnit 4'\n</code></pre>\n\n<p>In the <code>.classpath</code> file I have all <code>jar</code> files, and at the end have: </p>\n\n<pre><code>&lt;classpathentry exported=\"true\" kind=\"con\" path=\"org.eclipse.jdt.junit.JUNIT_CONTAINER/4\"/&gt;\n    &lt;classpathentry kind=\"output\" path=\"bin\"/&gt;\n&lt;/classpath&gt;\n</code></pre>\n\n<p>How can I resolve this error and get tests running again?</p>\n"},{"tags":["java","spring","scheduled-tasks","crontrigger"],"comments":[{"owner":{"account_id":4320098,"reputation":1431,"user_id":3528626,"display_name":"hisener"},"score":0,"creation_date":1521624652,"post_id":49402144,"comment_id":85806224,"body_markdown":"Are there any annotations in your code, too?","body":"Are there any annotations in your code, too?"},{"owner":{"account_id":8595786,"reputation":51,"user_id":6438845,"display_name":"Anuj Victor"},"score":0,"creation_date":1521625606,"post_id":49402144,"comment_id":85806847,"body_markdown":"@hisener no just the &quot;sendPropertyNotificationEmail&quot; method is being called, which contains the mail sending functionality","body":"@hisener no just the &quot;sendPropertyNotificationEmail&quot; method is being called, which contains the mail sending functionality"},{"owner":{"account_id":3386007,"reputation":647,"user_id":2841947,"accept_rate":50,"display_name":"Rahul"},"score":0,"creation_date":1521627022,"post_id":49402144,"comment_id":85807876,"body_markdown":"Is sendPropertyNotificationEmail() expected to send one mail per invocation? When you say &#39;sending multiple mails&#39;, do you mean that somehow sendPropertyNotificationEmail() is invoked in multiple threads? Please clarify more on the problem.","body":"Is sendPropertyNotificationEmail() expected to send one mail per invocation? When you say &#39;sending multiple mails&#39;, do you mean that somehow sendPropertyNotificationEmail() is invoked in multiple threads? Please clarify more on the problem."},{"owner":{"account_id":8595786,"reputation":51,"user_id":6438845,"display_name":"Anuj Victor"},"score":0,"creation_date":1521627201,"post_id":49402144,"comment_id":85808006,"body_markdown":"@Rahul yes i think it is getting invoked in multiple threads. Yes the function is implemented to send one mail every monday at 10 am, when m testing it locally it is running fine, only one mail is getting sent but when deployed in the production mode, multiple mails are being sent","body":"@Rahul yes i think it is getting invoked in multiple threads. Yes the function is implemented to send one mail every monday at 10 am, when m testing it locally it is running fine, only one mail is getting sent but when deployed in the production mode, multiple mails are being sent"},{"owner":{"account_id":8595786,"reputation":51,"user_id":6438845,"display_name":"Anuj Victor"},"score":0,"creation_date":1521627587,"post_id":49402144,"comment_id":85808269,"body_markdown":"@Rahul, hisener please find the original code in the question i have edited it again. Actually in original code run method is called.","body":"@Rahul, hisener please find the original code in the question i have edited it again. Actually in original code run method is called."},{"owner":{"account_id":4320098,"reputation":1431,"user_id":3528626,"display_name":"hisener"},"score":0,"creation_date":1521628577,"post_id":49402144,"comment_id":85808980,"body_markdown":"I think you do not need override of the run method. Spring handles that. Please refer https://spring.io/guides/gs/scheduling-tasks/","body":"I think you do not need override of the run method. Spring handles that. Please refer <a href=\"https://spring.io/guides/gs/scheduling-tasks/\" rel=\"nofollow noreferrer\">spring.io/guides/gs/scheduling-tasks</a>"},{"owner":{"account_id":8595786,"reputation":51,"user_id":6438845,"display_name":"Anuj Victor"},"score":0,"creation_date":1521629437,"post_id":49402144,"comment_id":85809612,"body_markdown":"@hisener ok but still its behaving the same.","body":"@hisener ok but still its behaving the same."},{"owner":{"account_id":8595786,"reputation":51,"user_id":6438845,"display_name":"Anuj Victor"},"score":0,"creation_date":1521629776,"post_id":49402144,"comment_id":85809806,"body_markdown":"@hisener  and also how can you say that run method is generating the issue? please explain.","body":"@hisener  and also how can you say that run method is generating the issue? please explain."},{"owner":{"account_id":4320098,"reputation":1431,"user_id":3528626,"display_name":"hisener"},"score":0,"creation_date":1521633371,"post_id":49402144,"comment_id":85812263,"body_markdown":"I thought somehow run method executed as well as sendPropertyNotificationEmail. I am not quite sure what problem is. I need to try but I am not available right now, sorry.","body":"I thought somehow run method executed as well as sendPropertyNotificationEmail. I am not quite sure what problem is. I need to try but I am not available right now, sorry."},{"owner":{"account_id":3970707,"reputation":533,"user_id":3275390,"accept_rate":60,"display_name":"shankulk"},"score":0,"creation_date":1540614369,"post_id":49402144,"comment_id":92940175,"body_markdown":"Are there more than one servers running in production?","body":"Are there more than one servers running in production?"}],"answers":[{"tags":[],"owner":{"account_id":2886869,"reputation":339,"user_id":2476515,"accept_rate":57,"display_name":"deepak"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1540607240,"creation_date":1540607240,"answer_id":53018231,"question_id":49402144,"body_markdown":"Check how instances are configured on your production container. Turn off auto-scaling, if it is set. A batch program should never have more than one instance running at any given point.","title":"java spring scheduler running multiple times in prod","body":"<p>Check how instances are configured on your production container. Turn off auto-scaling, if it is set. A batch program should never have more than one instance running at any given point.</p>\n"}],"owner":{"account_id":8595786,"reputation":51,"user_id":6438845,"display_name":"Anuj Victor"},"comment_count":10,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":1230,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1691611406,"creation_date":1521623420,"question_id":49402144,"body_markdown":"I am running a web application scheduler of spring(cron) for sending notification mail, when running on local server its running fine but on production mode its sending multiple mails.\r\n\r\n```\r\n&lt;bean id=&quot;EmailNotificationScheduledTask&quot; class=&quot;com.prism.utils.EmailNotificationTask&quot; /&gt;\r\n\t&lt;task:scheduled-tasks scheduler=&quot;scheduler&quot;&gt;\r\n\t    &lt;task:scheduled ref=&quot;EmailNotificationScheduledTask&quot; method=&quot;run&quot; cron=&quot;0 0 10 * * MON&quot;/&gt; \r\n\t&lt;/task:scheduled-tasks&gt;\r\n\t&lt;task:scheduler id=&quot;scheduler&quot; pool-size=&quot;1&quot;/&gt;\r\n\t\r\n&lt;/beans&gt;\r\n```\r\n```\r\npublic class EmailNotificationTask extends TimerTask{\r\n\t@Override\r\n\tpublic void run() {\r\n\t\t\tsynchronized (this) {\r\n\t\t\t\tsendPropertyNotificationEmail();\r\n\t\t\t}\r\n\t\t//}\r\n\t}\r\n\t\r\n\t@SuppressWarnings(&quot;unchecked&quot;)\r\n\tpublic void sendPropertyNotificationEmail(){\r\n\t\ttry{\r\n\t\t\t//Mail sending logic\r\n\t\t}\r\n\t\t\t\r\n\t\t} catch (DAOException ee) {\r\n\t\t\t_logger.error(&quot;Error while sending notification messages&quot;, ee);\r\n\t\t}\r\n    }\r\n}\r\n```","title":"java spring scheduler running multiple times in prod","body":"<p>I am running a web application scheduler of spring(cron) for sending notification mail, when running on local server its running fine but on production mode its sending multiple mails.</p>\n<pre><code>&lt;bean id=&quot;EmailNotificationScheduledTask&quot; class=&quot;com.prism.utils.EmailNotificationTask&quot; /&gt;\n    &lt;task:scheduled-tasks scheduler=&quot;scheduler&quot;&gt;\n        &lt;task:scheduled ref=&quot;EmailNotificationScheduledTask&quot; method=&quot;run&quot; cron=&quot;0 0 10 * * MON&quot;/&gt; \n    &lt;/task:scheduled-tasks&gt;\n    &lt;task:scheduler id=&quot;scheduler&quot; pool-size=&quot;1&quot;/&gt;\n    \n&lt;/beans&gt;\n</code></pre>\n<pre><code>public class EmailNotificationTask extends TimerTask{\n    @Override\n    public void run() {\n            synchronized (this) {\n                sendPropertyNotificationEmail();\n            }\n        //}\n    }\n    \n    @SuppressWarnings(&quot;unchecked&quot;)\n    public void sendPropertyNotificationEmail(){\n        try{\n            //Mail sending logic\n        }\n            \n        } catch (DAOException ee) {\n            _logger.error(&quot;Error while sending notification messages&quot;, ee);\n        }\n    }\n}\n</code></pre>\n"},{"tags":["java","linux","pid"],"comments":[{"owner":{"account_id":5289146,"reputation":8128,"user_id":4222206,"display_name":"queeg"},"score":1,"creation_date":1691611093,"post_id":76870881,"comment_id":135516471,"body_markdown":"maybe use `ps efx`to better understand the process hierarchy.","body":"maybe use <code>ps efx</code>to better understand the process hierarchy."},{"owner":{"account_id":25398964,"reputation":95,"user_id":19208792,"display_name":"Gourav Kumar"},"score":0,"creation_date":1691657283,"post_id":76870881,"comment_id":135521951,"body_markdown":"Problem solved! actually i was using intelliJ installed via flatpack. I don&#39;t why it is creating its own namespace. Now using intelliJ IDE from snap store, its working fine. Thanks","body":"Problem solved! actually i was using intelliJ installed via flatpack. I don&#39;t why it is creating its own namespace. Now using intelliJ IDE from snap store, its working fine. Thanks"}],"owner":{"account_id":25398964,"reputation":95,"user_id":19208792,"display_name":"Gourav Kumar"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":58,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1691610876,"creation_date":1691610876,"question_id":76870881,"body_markdown":"When i am running my application using some IDE say IntelliJ idea, and using a function in my application code to print the current process pid i get some different pid which is not visible using `ps aux` command.\r\n\r\nI am using this function\r\n\r\n```java\r\nstatic void printCurrentPid(){\r\n   long pid = ProcessHandle.current().pid();\r\n   System.out.println(&quot;PID:&quot;+pid);\r\n}\r\n```\r\nBut when i run the jar of my application using cli, it prints the actual pid which is visible to kernel and can be seen using `jps` command.\r\n\r\nPlease help!","title":"Different pid of the java application when running using intellij idea","body":"<p>When i am running my application using some IDE say IntelliJ idea, and using a function in my application code to print the current process pid i get some different pid which is not visible using <code>ps aux</code> command.</p>\n<p>I am using this function</p>\n<pre class=\"lang-java prettyprint-override\"><code>static void printCurrentPid(){\n   long pid = ProcessHandle.current().pid();\n   System.out.println(&quot;PID:&quot;+pid);\n}\n</code></pre>\n<p>But when i run the jar of my application using cli, it prints the actual pid which is visible to kernel and can be seen using <code>jps</code> command.</p>\n<p>Please help!</p>\n"},{"tags":["java","splunk"],"comments":[{"owner":{"account_id":3110,"reputation":32932,"user_id":4418,"accept_rate":94,"display_name":"warren"},"score":0,"creation_date":1691669963,"post_id":76870868,"comment_id":135524431,"body_markdown":"is the event in Splunk valid JSON? What do you mean by &quot;deserialize&quot;?","body":"is the event in Splunk valid JSON? What do you mean by &quot;deserialize&quot;?"}],"owner":{"account_id":449029,"reputation":49,"user_id":843583,"accept_rate":100,"display_name":"Loki"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":26,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1691610705,"creation_date":1691610705,"question_id":76870868,"body_markdown":"I have an object that is logged in splunk. It is a pretty large object. \r\nlooks something like this JobEntity(eventId=dc814fd9-91d2-4e4c-a2b1-7693248d, targetId=2345, status=CREATED, errorMessage=null....)\r\n\r\nIs there a way i can deserialize this java object(JobEntity). I need to reconstruct this object to reproduce an issue using unit tests.\r\n\r\nwhat i have tried so far:\r\n\r\n1: \r\n\r\n    try {\r\n          String objStr = FileUtil.readResourceFile(&quot;job/job_entity1.txt&quot;);\r\n          ObjectMapper objectMapper = new ObjectMapper();\r\n          JobEntity job = objectMapper.readValue(objStr, JobEntity.class);\r\n          System.out.println(job);\r\n        } catch (Exception ex) {\r\n          System.err.println(ex);\r\n        }\r\n\r\n2: \r\n\r\n        String filePath = &quot;/job/job_entity1.txt&quot;;\r\n        try {\r\n          FileInputStream file = new FileInputStream(filePath);\r\n          ObjectInputStream reader = new ObjectInputStream(file);\r\n          while (true) {\r\n            try {\r\n              JobEntity obj = (JobEntity)reader.readObject();\r\n              System.out.println(obj);\r\n            } catch (Exception ex) {\r\n              System.err.println(&quot;end of reader file &quot;);\r\n              break;\r\n            }\r\n          }\r\n        } catch (Exception ex) {\r\n          System.err.println(&quot;failed to read &quot; + filePath + &quot;, &quot;+ ex);\r\n        }","title":"Deserialize an object logged in splunk","body":"<p>I have an object that is logged in splunk. It is a pretty large object.\nlooks something like this JobEntity(eventId=dc814fd9-91d2-4e4c-a2b1-7693248d, targetId=2345, status=CREATED, errorMessage=null....)</p>\n<p>Is there a way i can deserialize this java object(JobEntity). I need to reconstruct this object to reproduce an issue using unit tests.</p>\n<p>what i have tried so far:</p>\n<p>1:</p>\n<pre><code>try {\n      String objStr = FileUtil.readResourceFile(&quot;job/job_entity1.txt&quot;);\n      ObjectMapper objectMapper = new ObjectMapper();\n      JobEntity job = objectMapper.readValue(objStr, JobEntity.class);\n      System.out.println(job);\n    } catch (Exception ex) {\n      System.err.println(ex);\n    }\n</code></pre>\n<p>2:</p>\n<pre><code>    String filePath = &quot;/job/job_entity1.txt&quot;;\n    try {\n      FileInputStream file = new FileInputStream(filePath);\n      ObjectInputStream reader = new ObjectInputStream(file);\n      while (true) {\n        try {\n          JobEntity obj = (JobEntity)reader.readObject();\n          System.out.println(obj);\n        } catch (Exception ex) {\n          System.err.println(&quot;end of reader file &quot;);\n          break;\n        }\n      }\n    } catch (Exception ex) {\n      System.err.println(&quot;failed to read &quot; + filePath + &quot;, &quot;+ ex);\n    }\n</code></pre>\n"},{"tags":["java","android","webview"],"comments":[{"owner":{"account_id":1790714,"reputation":91128,"user_id":1631193,"accept_rate":71,"display_name":"Gabe Sechan"},"score":0,"creation_date":1691615836,"post_id":76870839,"comment_id":135517273,"body_markdown":"Have you run the profiler to see what functions its taking time in?  This sounds like something is running on the main thread the entire time","body":"Have you run the profiler to see what functions its taking time in?  This sounds like something is running on the main thread the entire time"},{"owner":{"account_id":1617635,"reputation":1046,"user_id":1494874,"accept_rate":44,"display_name":"Sagito"},"score":0,"creation_date":1691617212,"post_id":76870839,"comment_id":135517460,"body_markdown":"I ran both the app inspector and the profiler (CPU, Memory, Energy). CPU is steady at zero, memory is steady at around 250MB but energy consumption goes double. I can&#39;t understand why. I stopped the execution mid-30 seconds and couldn&#39;t find any clue to what is going on.","body":"I ran both the app inspector and the profiler (CPU, Memory, Energy). CPU is steady at zero, memory is steady at around 250MB but energy consumption goes double. I can&#39;t understand why. I stopped the execution mid-30 seconds and couldn&#39;t find any clue to what is going on."},{"owner":{"account_id":1790714,"reputation":91128,"user_id":1631193,"accept_rate":71,"display_name":"Gabe Sechan"},"score":0,"creation_date":1691646824,"post_id":76870839,"comment_id":135520124,"body_markdown":"If you ran the profiler, it should show you what functions it spent the most time in, and you can go from there.","body":"If you ran the profiler, it should show you what functions it spent the most time in, and you can go from there."},{"owner":{"account_id":13174654,"reputation":56,"user_id":9515917,"display_name":"SHAHEEN BSV"},"score":0,"creation_date":1691651607,"post_id":76870839,"comment_id":135520858,"body_markdown":"While it might not directly address your query, I recommend attempting to load the webview concurrently with the user&#39;s login. This can be achieved by utilizing a ViewSwitcher within a single activity, where both the login layout and webview are present inside a ViewSwitcher. This approach eliminates the need for a separate activity. As a result, the webview can finish loading while the user is entering their username, password, and initiating the login process.","body":"While it might not directly address your query, I recommend attempting to load the webview concurrently with the user&#39;s login. This can be achieved by utilizing a ViewSwitcher within a single activity, where both the login layout and webview are present inside a ViewSwitcher. This approach eliminates the need for a separate activity. As a result, the webview can finish loading while the user is entering their username, password, and initiating the login process."},{"owner":{"account_id":1617635,"reputation":1046,"user_id":1494874,"accept_rate":44,"display_name":"Sagito"},"score":0,"creation_date":1691675983,"post_id":76870839,"comment_id":135525873,"body_markdown":"@GabeSechan From your comment I understand that I may be using the profiler wrong (or the wrong profiler). This is all I can see (image below), I can&#39;t see the functions being called. Am I on the wrong place?\n\nhttps://imagebin.ca/v/7WOi5FbsWvV8","body":"@GabeSechan From your comment I understand that I may be using the profiler wrong (or the wrong profiler). This is all I can see (image below), I can&#39;t see the functions being called. Am I on the wrong place?  <a href=\"https://imagebin.ca/v/7WOi5FbsWvV8\" rel=\"nofollow noreferrer\">imagebin.ca/v/7WOi5FbsWvV8</a>"},{"owner":{"account_id":1617635,"reputation":1046,"user_id":1494874,"accept_rate":44,"display_name":"Sagito"},"score":0,"creation_date":1691675987,"post_id":76870839,"comment_id":135525874,"body_markdown":"@SHAHEENBSV Thank you, that would be a great idea. But sadly I can&#39;t do that, since the information of the webview directly depends upon the user authentication.","body":"@SHAHEENBSV Thank you, that would be a great idea. But sadly I can&#39;t do that, since the information of the webview directly depends upon the user authentication."},{"owner":{"account_id":1790714,"reputation":91128,"user_id":1631193,"accept_rate":71,"display_name":"Gabe Sechan"},"score":1,"creation_date":1691677376,"post_id":76870839,"comment_id":135526230,"body_markdown":"@Sagito https://developer.android.com/studio/profile/record-traces  You can record a trace, which will use sampling techniques to break down what threads are running, what functions they&#39;re running in, and the time spent in each.  It&#39;s an incredibly useful tool for performance issues on the CPU","body":"@Sagito <a href=\"https://developer.android.com/studio/profile/record-traces\" rel=\"nofollow noreferrer\">developer.android.com/studio/profile/record-traces</a>  You can record a trace, which will use sampling techniques to break down what threads are running, what functions they&#39;re running in, and the time spent in each.  It&#39;s an incredibly useful tool for performance issues on the CPU"},{"owner":{"account_id":1617635,"reputation":1046,"user_id":1494874,"accept_rate":44,"display_name":"Sagito"},"score":0,"creation_date":1691679508,"post_id":76870839,"comment_id":135526767,"body_markdown":"@GabeSechan this is incredible, thank you so much! I didn&#39;t know about this tool.","body":"@GabeSechan this is incredible, thank you so much! I didn&#39;t know about this tool."}],"owner":{"account_id":1617635,"reputation":1046,"user_id":1494874,"accept_rate":44,"display_name":"Sagito"},"comment_count":8,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":96,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1691610484,"creation_date":1691610484,"question_id":76870839,"body_markdown":"We are using webviews on an Android app. The login activity is native and after logging in the user goes to a menu activity with a webview. Every menu option leads the user to different activities, each of them with its own webview. All these activities - including the menu - extend from the same BaseWebViewActivity class.\r\n\r\nIt all worked well until quite recently (one year ago, perhaps) when the app started to take 30 seconds to load the webview. I have added some metrics on WebViewClient and it is always 30 seconds.\r\n\r\nThe HTML code does not have remote dependencies (all necessary scripts are bundled within the APK) and it does not make any AJAX request.\r\n\r\nIf I remove everything from the HTML and write &quot;Hello world&quot;, then it is loaded instantaneously. If I leave any sort of HTML tag (except for &lt;html&gt;, &lt;head&gt;, &lt;title&gt; or &lt;body&gt;) in the file, then it takes 30 seconds to load.\r\n\r\nThings I have tried:\r\n\r\n - Turning hardware acceleration on/off\r\n - Removing everything from the HTML\r\n - Make webview not debuggable\r\n - Removed the WebViewClient\r\n - Requested google.com instead of the local file\r\n - Removed almost everything from the HTML file (see above)\r\n - Uninstalled Android System WebView updates\r\n - Updated Android System WebView (neither of these worked)\r\n - Turned cookie management on/off\r\n\r\nThis loading time is oddly specific and I&#39;m thinking this is somehow a timeout of something. However, Network Inspector confirmed that no network requests are taking place at the time. Also, during these 30 seconds, the UI and logcat become completely blocked and will only resume the operations have the 30 seconds have elapsed.\r\n\r\nThanks in advance!\r\n\r\n    /**** Option Activity ****/\r\n    public class OptionActivity extends SPBaseWebActivity\r\n    {\r\n\r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState)\r\n    {\r\n        super.onCreate(savedInstanceState);\r\n        setContentView(R.layout.activity_web_calendar);\r\n\r\n        this.webview = (WebView) findViewById(R.id.webview);\r\n        DebugManager.log(&quot;Entered calendar activity&quot;);\r\n\r\n        DebugManager.clearPerformanceCheckpoints(&quot;calendar_view&quot;);\r\n        DebugManager.addPerformanceCheckpoint(&quot;calendar_view&quot;, &quot;onCreate finished&quot;);\r\n    }\r\n\r\n    @Override\r\n    protected void onResume()\r\n    {\r\n        super.onResume();\r\n\r\n        DebugManager.addPerformanceCheckpoint(&quot;calendar_view&quot;, &quot;onResume start&quot;);\r\n\r\n        String url = &quot;calendar.html&quot;;\r\n        setupWebview(url);\r\n        reloadOnResume = false;\r\n\r\n        DebugManager.addPerformanceCheckpoint(&quot;calendar_view&quot;, &quot;onResume finished - &quot; + (System.currentTimeMillis() / 1000));\r\n    }\r\n\r\n    @Override\r\n    protected void onPageLoaded(WebView view, String url)\r\n    {\r\n        super.onPageLoaded(view, url);\r\n\r\n        DebugManager.addPerformanceCheckpoint(&quot;calendar_view&quot;, &quot;onPageLoaded finished - &quot; + (System.currentTimeMillis() / 1000));\r\n    }\r\n    }\r\n\r\n\r\n    /**** SPBaseWebActivity ****/\r\n    public class SPBaseWebActivity implements WebAppInterfaceDelegate\r\n    {\r\n    protected WebView webview = null;\r\n    protected WebAppInterface jsInterface = null;\r\n\r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState)\r\n    {\r\n        super.onCreate(savedInstanceState);\r\n\r\n        //Remove title bar\r\n        this.requestWindowFeature(Window.FEATURE_NO_TITLE);\r\n\r\n        if (this.webview == null)\r\n            this.webview = (WebView)findViewById(R.id.webview);\r\n\r\n        setupWebview(null);\r\n    }\r\n\r\n    protected void setupWebview(String url)\r\n    {\r\n        if (this.webview != null)\r\n        {\r\n            if (url == null || url.length() == 0)\r\n                url = &quot;base/empty.html&quot;;\r\n            else if (!url.contains(&quot;http&quot;))\r\n                url = &quot;app/&quot; + url;\r\n\r\n            MVWebChromeClient mvwcc = new MVWebChromeClient();\r\n            mvwcc.parentActivity = this;\r\n\r\n            this.webview.setWebChromeClient(mvwcc);\r\n\r\n            DebugManager.addPerformanceCheckpoint(&quot;webview_loading&quot;, &quot;Webview client init - &quot; + (System.currentTimeMillis() / 1000));\r\n\r\n            this.webview.setWebViewClient(new WebViewClient()\r\n            {\r\n                @Override\r\n                public void onPageStarted(WebView view, String url, Bitmap favicon) {\r\n                    super.onPageStarted(view, url, favicon);\r\n\r\n                    DebugManager.addPerformanceCheckpoint(&quot;webview_loading&quot;, &quot;onPageStarted - &quot; + (System.currentTimeMillis() / 1000));\r\n                }\r\n\r\n                @Override\r\n                public void onPageFinished(WebView view, String url)\r\n                {\r\n                    if (android.os.Build.VERSION.SDK_INT &gt;= 21)\r\n                    {\r\n                        CookieManager.getInstance().setAcceptThirdPartyCookies(view, true);\r\n                        CookieManager.getInstance().flush();\r\n                    }\r\n                    else\r\n                        CookieManager.getInstance().setAcceptCookie(true);\r\n\r\n                    DebugManager.addPerformanceCheckpoint(&quot;webview_loading&quot;, &quot;onPageLoaded - &quot; + (System.currentTimeMillis() / 1000));\r\n                    onPageLoaded(view, url);\r\n                }\r\n            });\r\n\r\n            DebugManager.addPerformanceCheckpoint(&quot;webview_loading&quot;, &quot;Webview client created - &quot; + (System.currentTimeMillis() / 1000));\r\n\r\n            if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.KITKAT) {\r\n                WebView.setWebContentsDebuggingEnabled(Globals.DEBUG);\r\n            }\r\n\r\n            if (!url.contains(&quot;http&quot;))\r\n                this.webview.loadUrl(&quot;file:///android_asset/pages/&quot; + url);\r\n            else\r\n                this.webview.loadUrl(url);\r\n\r\n            this.webview.getSettings().setJavaScriptEnabled(true);\r\n            this.webview.getSettings().setAllowFileAccessFromFileURLs(true);\r\n            this.webview.getSettings().setAllowUniversalAccessFromFileURLs(true);\r\n            this.webview.getSettings().setDomStorageEnabled(true);\r\n\r\n            this.jsInterface = new WebAppInterface(this);\r\n            this.jsInterface.delegate = this;\r\n            this.jsInterface.parentActivity = this;\r\n\r\n            if (android.os.Build.VERSION.SDK_INT &gt;= 21)\r\n            {\r\n                CookieManager.getInstance().setAcceptThirdPartyCookies(this.webview, true);\r\n                CookieManager.getInstance().flush();\r\n            }\r\n            else\r\n                CookieManager.getInstance().setAcceptCookie(true);\r\n\r\n            this.webview.addJavascriptInterface(this.jsInterface, &quot;Android&quot;);\r\n            this.webview.requestFocus();\r\n        }\r\n    }\r\n    }\r\n\r\n\r\n    /**** HTML file ****/\r\n    &lt;!DOCTYPE html&gt;\r\n    &lt;html&gt;\r\n\t&lt;head&gt;\r\n\t\t&lt;meta charset=&quot;utf8&quot; /&gt;\r\n\t\t&lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1.0&quot;&gt;\r\n\t\t\r\n\t\t&lt;title&gt;MV Reports - Agendamento&lt;/title&gt;\r\n\t\t\r\n\t\t&lt;link rel=&quot;stylesheet&quot; href=&quot;../../mv/css/bootstrap.min.css&quot; /&gt;\r\n\t\t&lt;link rel=&quot;stylesheet&quot; href=&quot;../../mv/addons/font-awesome/css/font-awesome.min.css&quot; /&gt;\r\n\t\t&lt;link rel=&quot;stylesheet&quot; href=&quot;../../mv/addons/material2/css/materialdesignicons.min.css&quot; /&gt;\r\n\t&lt;/head&gt;\r\n\t&lt;body&gt;\r\n\t\tTakes 30 to load\r\n\t&lt;/body&gt;\r\n    &lt;/html&gt;","title":"Android Webview takes 30 seconds to load","body":"<p>We are using webviews on an Android app. The login activity is native and after logging in the user goes to a menu activity with a webview. Every menu option leads the user to different activities, each of them with its own webview. All these activities - including the menu - extend from the same BaseWebViewActivity class.</p>\n<p>It all worked well until quite recently (one year ago, perhaps) when the app started to take 30 seconds to load the webview. I have added some metrics on WebViewClient and it is always 30 seconds.</p>\n<p>The HTML code does not have remote dependencies (all necessary scripts are bundled within the APK) and it does not make any AJAX request.</p>\n<p>If I remove everything from the HTML and write &quot;Hello world&quot;, then it is loaded instantaneously. If I leave any sort of HTML tag (except for , ,  or ) in the file, then it takes 30 seconds to load.</p>\n<p>Things I have tried:</p>\n<ul>\n<li>Turning hardware acceleration on/off</li>\n<li>Removing everything from the HTML</li>\n<li>Make webview not debuggable</li>\n<li>Removed the WebViewClient</li>\n<li>Requested google.com instead of the local file</li>\n<li>Removed almost everything from the HTML file (see above)</li>\n<li>Uninstalled Android System WebView updates</li>\n<li>Updated Android System WebView (neither of these worked)</li>\n<li>Turned cookie management on/off</li>\n</ul>\n<p>This loading time is oddly specific and I'm thinking this is somehow a timeout of something. However, Network Inspector confirmed that no network requests are taking place at the time. Also, during these 30 seconds, the UI and logcat become completely blocked and will only resume the operations have the 30 seconds have elapsed.</p>\n<p>Thanks in advance!</p>\n<pre><code>/**** Option Activity ****/\npublic class OptionActivity extends SPBaseWebActivity\n{\n\n@Override\nprotected void onCreate(Bundle savedInstanceState)\n{\n    super.onCreate(savedInstanceState);\n    setContentView(R.layout.activity_web_calendar);\n\n    this.webview = (WebView) findViewById(R.id.webview);\n    DebugManager.log(&quot;Entered calendar activity&quot;);\n\n    DebugManager.clearPerformanceCheckpoints(&quot;calendar_view&quot;);\n    DebugManager.addPerformanceCheckpoint(&quot;calendar_view&quot;, &quot;onCreate finished&quot;);\n}\n\n@Override\nprotected void onResume()\n{\n    super.onResume();\n\n    DebugManager.addPerformanceCheckpoint(&quot;calendar_view&quot;, &quot;onResume start&quot;);\n\n    String url = &quot;calendar.html&quot;;\n    setupWebview(url);\n    reloadOnResume = false;\n\n    DebugManager.addPerformanceCheckpoint(&quot;calendar_view&quot;, &quot;onResume finished - &quot; + (System.currentTimeMillis() / 1000));\n}\n\n@Override\nprotected void onPageLoaded(WebView view, String url)\n{\n    super.onPageLoaded(view, url);\n\n    DebugManager.addPerformanceCheckpoint(&quot;calendar_view&quot;, &quot;onPageLoaded finished - &quot; + (System.currentTimeMillis() / 1000));\n}\n}\n\n\n/**** SPBaseWebActivity ****/\npublic class SPBaseWebActivity implements WebAppInterfaceDelegate\n{\nprotected WebView webview = null;\nprotected WebAppInterface jsInterface = null;\n\n@Override\nprotected void onCreate(Bundle savedInstanceState)\n{\n    super.onCreate(savedInstanceState);\n\n    //Remove title bar\n    this.requestWindowFeature(Window.FEATURE_NO_TITLE);\n\n    if (this.webview == null)\n        this.webview = (WebView)findViewById(R.id.webview);\n\n    setupWebview(null);\n}\n\nprotected void setupWebview(String url)\n{\n    if (this.webview != null)\n    {\n        if (url == null || url.length() == 0)\n            url = &quot;base/empty.html&quot;;\n        else if (!url.contains(&quot;http&quot;))\n            url = &quot;app/&quot; + url;\n\n        MVWebChromeClient mvwcc = new MVWebChromeClient();\n        mvwcc.parentActivity = this;\n\n        this.webview.setWebChromeClient(mvwcc);\n\n        DebugManager.addPerformanceCheckpoint(&quot;webview_loading&quot;, &quot;Webview client init - &quot; + (System.currentTimeMillis() / 1000));\n\n        this.webview.setWebViewClient(new WebViewClient()\n        {\n            @Override\n            public void onPageStarted(WebView view, String url, Bitmap favicon) {\n                super.onPageStarted(view, url, favicon);\n\n                DebugManager.addPerformanceCheckpoint(&quot;webview_loading&quot;, &quot;onPageStarted - &quot; + (System.currentTimeMillis() / 1000));\n            }\n\n            @Override\n            public void onPageFinished(WebView view, String url)\n            {\n                if (android.os.Build.VERSION.SDK_INT &gt;= 21)\n                {\n                    CookieManager.getInstance().setAcceptThirdPartyCookies(view, true);\n                    CookieManager.getInstance().flush();\n                }\n                else\n                    CookieManager.getInstance().setAcceptCookie(true);\n\n                DebugManager.addPerformanceCheckpoint(&quot;webview_loading&quot;, &quot;onPageLoaded - &quot; + (System.currentTimeMillis() / 1000));\n                onPageLoaded(view, url);\n            }\n        });\n\n        DebugManager.addPerformanceCheckpoint(&quot;webview_loading&quot;, &quot;Webview client created - &quot; + (System.currentTimeMillis() / 1000));\n\n        if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.KITKAT) {\n            WebView.setWebContentsDebuggingEnabled(Globals.DEBUG);\n        }\n\n        if (!url.contains(&quot;http&quot;))\n            this.webview.loadUrl(&quot;file:///android_asset/pages/&quot; + url);\n        else\n            this.webview.loadUrl(url);\n\n        this.webview.getSettings().setJavaScriptEnabled(true);\n        this.webview.getSettings().setAllowFileAccessFromFileURLs(true);\n        this.webview.getSettings().setAllowUniversalAccessFromFileURLs(true);\n        this.webview.getSettings().setDomStorageEnabled(true);\n\n        this.jsInterface = new WebAppInterface(this);\n        this.jsInterface.delegate = this;\n        this.jsInterface.parentActivity = this;\n\n        if (android.os.Build.VERSION.SDK_INT &gt;= 21)\n        {\n            CookieManager.getInstance().setAcceptThirdPartyCookies(this.webview, true);\n            CookieManager.getInstance().flush();\n        }\n        else\n            CookieManager.getInstance().setAcceptCookie(true);\n\n        this.webview.addJavascriptInterface(this.jsInterface, &quot;Android&quot;);\n        this.webview.requestFocus();\n    }\n}\n}\n\n\n/**** HTML file ****/\n&lt;!DOCTYPE html&gt;\n&lt;html&gt;\n&lt;head&gt;\n    &lt;meta charset=&quot;utf8&quot; /&gt;\n    &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1.0&quot;&gt;\n    \n    &lt;title&gt;MV Reports - Agendamento&lt;/title&gt;\n    \n    &lt;link rel=&quot;stylesheet&quot; href=&quot;../../mv/css/bootstrap.min.css&quot; /&gt;\n    &lt;link rel=&quot;stylesheet&quot; href=&quot;../../mv/addons/font-awesome/css/font-awesome.min.css&quot; /&gt;\n    &lt;link rel=&quot;stylesheet&quot; href=&quot;../../mv/addons/material2/css/materialdesignicons.min.css&quot; /&gt;\n&lt;/head&gt;\n&lt;body&gt;\n    Takes 30 to load\n&lt;/body&gt;\n&lt;/html&gt;\n</code></pre>\n"},{"tags":["java","web","jakarta-ee"],"owner":{"account_id":27116540,"reputation":1,"user_id":20660794,"display_name":"Vsevolod Kasatchikov"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":75,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1691610291,"creation_date":1691608936,"question_id":76870682,"body_markdown":"I use the @Dispose annotation, which should call a method to clean up the resources created by the @Produces annotation, for some reason the inscription &quot;cleaned&quot; is output to the console 2 times, not 1. Why?\r\n\r\n```\r\n@WebServlet(value = &quot;/tes&quot;)\r\npublic class MyTag extends HttpServlet {\r\n    @Inject\r\n    @Named(&quot;Person&quot;)\r\n    Person person;\r\n    @Override\r\n    protected void doGet(HttpServletRequest req,\r\n                         HttpServletResponse resp) {\r\n        System.out.println(person.name);\r\n    }\r\n}\r\n\r\n@ApplicationScoped\r\nclass Producer {\r\n    @Produces\r\n    @Named(&quot;Person&quot;)\r\n    public Person getPerson() {\r\n        return new Person(&quot;Max&quot;);\r\n    }\r\n    public void clean(@Disposes Person person) {\r\n        person.clean();\r\n    }\r\n}\r\n\r\nclass Person {\r\n    String name;\r\n    public Person(String name) {\r\n        this.name = name;\r\n    }\r\n    public void clean() {\r\n        System.out.println(&quot;cleaned&quot;);\r\n    }\r\n}\r\n```\r\n\r\n                                           ","title":"Annotation @Dispose calls the method to clean up resources 2 times. Jakarta EE","body":"<p>I use the @Dispose annotation, which should call a method to clean up the resources created by the @Produces annotation, for some reason the inscription &quot;cleaned&quot; is output to the console 2 times, not 1. Why?</p>\n<pre><code>@WebServlet(value = &quot;/tes&quot;)\npublic class MyTag extends HttpServlet {\n    @Inject\n    @Named(&quot;Person&quot;)\n    Person person;\n    @Override\n    protected void doGet(HttpServletRequest req,\n                         HttpServletResponse resp) {\n        System.out.println(person.name);\n    }\n}\n\n@ApplicationScoped\nclass Producer {\n    @Produces\n    @Named(&quot;Person&quot;)\n    public Person getPerson() {\n        return new Person(&quot;Max&quot;);\n    }\n    public void clean(@Disposes Person person) {\n        person.clean();\n    }\n}\n\nclass Person {\n    String name;\n    public Person(String name) {\n        this.name = name;\n    }\n    public void clean() {\n        System.out.println(&quot;cleaned&quot;);\n    }\n}\n</code></pre>\n"},{"tags":["java","android","android-widget","android-gps"],"owner":{"account_id":17167952,"reputation":13,"user_id":12425736,"display_name":"Michel Sommer"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":18,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1691610060,"creation_date":1691610060,"question_id":76870798,"body_markdown":"I have trouble updating my widget text, with the current location each 1000 ms, i only get the default text in the widget, not the location, can anyone give a hint.\r\n\r\nThe permissions in the manifest is correct, and works in the main application where the location is updated and displayed in the layout.\r\n\r\n\r\n```\r\nimport android.appwidget.AppWidgetManager;\r\nimport android.appwidget.AppWidgetProvider;\r\nimport android.content.Context;\r\nimport android.content.pm.PackageManager;\r\nimport android.widget.RemoteViews;\r\nimport android.location.Location;\r\n\r\nimport androidx.annotation.NonNull;\r\nimport androidx.core.app.ActivityCompat;\r\n\r\nimport com.google.android.gms.location.FusedLocationProviderClient;\r\nimport com.google.android.gms.location.LocationCallback;\r\nimport com.google.android.gms.location.LocationRequest;\r\nimport com.google.android.gms.location.LocationResult;\r\nimport com.google.android.gms.location.LocationServices;\r\n\r\nimport dk.seahawk.hamlocator.algorithm.GridAlgorithm;\r\nimport dk.seahawk.hamlocator.algorithm.GridAlgorithmInterface;\r\n\r\n\r\npublic class HamLocatorWidget extends AppWidgetProvider {\r\n    private Context context;\r\n\r\n    private static final int LOCATION_PERMISSION_REQUEST_CODE = 100;\r\n    private FusedLocationProviderClient fusedLocationClient;\r\n    private LocationCallback locationCallback;\r\n    private int INTERVAL = 1000;   // location refresh rate\r\n    private GridAlgorithmInterface gridAlgorithmInterface;\r\n\r\n\r\n    @Override\r\n    public void onUpdate(Context context, AppWidgetManager appWidgetManager, int[] appWidgetIds) {\r\n        this.context = context;\r\n\r\n        for (int appWidgetId : appWidgetIds) {\r\n            RemoteViews views = new RemoteViews(context.getPackageName(), R.layout.ham_locator_widget);\r\n\r\n            // Initialize FusedLocationProviderClient\r\n            fusedLocationClient = LocationServices.getFusedLocationProviderClient(context);\r\n\r\n            // Initialize Maidenhead algorithm\r\n            gridAlgorithmInterface = new GridAlgorithm();\r\n\r\n            // Create and configure LocationCallback\r\n            locationCallback = new LocationCallback() {\r\n                @Override\r\n                public void onLocationResult(@NonNull LocationResult locationResult) {\r\n                    Location location = locationResult.getLastLocation();\r\n                    assert location != null;\r\n\r\n                    // Update location parameters\r\n                    String lastLocation = gridAlgorithmInterface.getGridLocation(location);\r\n\r\n                    views.setTextViewText(R.id.appwidget_text, lastLocation);\r\n                    appWidgetManager.updateAppWidget(appWidgetId, views);\r\n\r\n                    // Stop location updates after obtaining the location\r\n                    stopLocationUpdates();\r\n                }\r\n            };\r\n\r\n            // Start requesting location updates\r\n            startLocationUpdates();\r\n        }\r\n    }\r\n\r\n    @Override\r\n    public void onEnabled(Context context) {\r\n        startLocationUpdates();\r\n    }\r\n\r\n    @Override\r\n    public void onDisabled(Context context) {\r\n        stopLocationUpdates();\r\n    }\r\n\r\n    private void startLocationUpdates() {\r\n        LocationRequest locationRequest = LocationRequest.create();\r\n        locationRequest.setPriority(LOCATION_PERMISSION_REQUEST_CODE);\r\n        locationRequest.setInterval(INTERVAL); // Update interval in milliseconds\r\n\r\n        if (ActivityCompat.checkSelfPermission(context, android.Manifest.permission.ACCESS_FINE_LOCATION) != PackageManager.PERMISSION_GRANTED &amp;&amp; ActivityCompat.checkSelfPermission(context, android.Manifest.permission.ACCESS_COARSE_LOCATION) != PackageManager.PERMISSION_GRANTED) {\r\n            return;\r\n        }\r\n        fusedLocationClient.requestLocationUpdates(locationRequest, locationCallback, null);\r\n    }\r\n\r\n    private void stopLocationUpdates() {\r\n        if (fusedLocationClient != null &amp;&amp; locationCallback != null) {\r\n            fusedLocationClient.removeLocationUpdates(locationCallback);\r\n        }\r\n    }\r\n\r\n}\r\n```\r\n\r\nHere is the xml info file\r\n```\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\r\n&lt;appwidget-provider xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\r\n    android:description=&quot;@string/app_widget_description&quot;\r\n    android:initialKeyguardLayout=&quot;@layout/ham_locator_widget&quot;\r\n    android:initialLayout=&quot;@layout/ham_locator_widget&quot;\r\n    android:minWidth=&quot;110dp&quot;\r\n    android:minHeight=&quot;40dp&quot;\r\n\r\n    android:previewLayout=&quot;@layout/ham_locator_widget&quot;\r\n    android:targetCellWidth=&quot;4&quot;\r\n    android:targetCellHeight=&quot;2&quot;\r\n    android:updatePeriodMillis=&quot;1000&quot;\r\n    android:widgetCategory=&quot;home_screen&quot; /&gt;\r\n\r\n```\r\n","title":"Android Widget text update","body":"<p>I have trouble updating my widget text, with the current location each 1000 ms, i only get the default text in the widget, not the location, can anyone give a hint.</p>\n<p>The permissions in the manifest is correct, and works in the main application where the location is updated and displayed in the layout.</p>\n<pre><code>import android.appwidget.AppWidgetManager;\nimport android.appwidget.AppWidgetProvider;\nimport android.content.Context;\nimport android.content.pm.PackageManager;\nimport android.widget.RemoteViews;\nimport android.location.Location;\n\nimport androidx.annotation.NonNull;\nimport androidx.core.app.ActivityCompat;\n\nimport com.google.android.gms.location.FusedLocationProviderClient;\nimport com.google.android.gms.location.LocationCallback;\nimport com.google.android.gms.location.LocationRequest;\nimport com.google.android.gms.location.LocationResult;\nimport com.google.android.gms.location.LocationServices;\n\nimport dk.seahawk.hamlocator.algorithm.GridAlgorithm;\nimport dk.seahawk.hamlocator.algorithm.GridAlgorithmInterface;\n\n\npublic class HamLocatorWidget extends AppWidgetProvider {\n    private Context context;\n\n    private static final int LOCATION_PERMISSION_REQUEST_CODE = 100;\n    private FusedLocationProviderClient fusedLocationClient;\n    private LocationCallback locationCallback;\n    private int INTERVAL = 1000;   // location refresh rate\n    private GridAlgorithmInterface gridAlgorithmInterface;\n\n\n    @Override\n    public void onUpdate(Context context, AppWidgetManager appWidgetManager, int[] appWidgetIds) {\n        this.context = context;\n\n        for (int appWidgetId : appWidgetIds) {\n            RemoteViews views = new RemoteViews(context.getPackageName(), R.layout.ham_locator_widget);\n\n            // Initialize FusedLocationProviderClient\n            fusedLocationClient = LocationServices.getFusedLocationProviderClient(context);\n\n            // Initialize Maidenhead algorithm\n            gridAlgorithmInterface = new GridAlgorithm();\n\n            // Create and configure LocationCallback\n            locationCallback = new LocationCallback() {\n                @Override\n                public void onLocationResult(@NonNull LocationResult locationResult) {\n                    Location location = locationResult.getLastLocation();\n                    assert location != null;\n\n                    // Update location parameters\n                    String lastLocation = gridAlgorithmInterface.getGridLocation(location);\n\n                    views.setTextViewText(R.id.appwidget_text, lastLocation);\n                    appWidgetManager.updateAppWidget(appWidgetId, views);\n\n                    // Stop location updates after obtaining the location\n                    stopLocationUpdates();\n                }\n            };\n\n            // Start requesting location updates\n            startLocationUpdates();\n        }\n    }\n\n    @Override\n    public void onEnabled(Context context) {\n        startLocationUpdates();\n    }\n\n    @Override\n    public void onDisabled(Context context) {\n        stopLocationUpdates();\n    }\n\n    private void startLocationUpdates() {\n        LocationRequest locationRequest = LocationRequest.create();\n        locationRequest.setPriority(LOCATION_PERMISSION_REQUEST_CODE);\n        locationRequest.setInterval(INTERVAL); // Update interval in milliseconds\n\n        if (ActivityCompat.checkSelfPermission(context, android.Manifest.permission.ACCESS_FINE_LOCATION) != PackageManager.PERMISSION_GRANTED &amp;&amp; ActivityCompat.checkSelfPermission(context, android.Manifest.permission.ACCESS_COARSE_LOCATION) != PackageManager.PERMISSION_GRANTED) {\n            return;\n        }\n        fusedLocationClient.requestLocationUpdates(locationRequest, locationCallback, null);\n    }\n\n    private void stopLocationUpdates() {\n        if (fusedLocationClient != null &amp;&amp; locationCallback != null) {\n            fusedLocationClient.removeLocationUpdates(locationCallback);\n        }\n    }\n\n}\n</code></pre>\n<p>Here is the xml info file</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\n&lt;appwidget-provider xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\n    android:description=&quot;@string/app_widget_description&quot;\n    android:initialKeyguardLayout=&quot;@layout/ham_locator_widget&quot;\n    android:initialLayout=&quot;@layout/ham_locator_widget&quot;\n    android:minWidth=&quot;110dp&quot;\n    android:minHeight=&quot;40dp&quot;\n\n    android:previewLayout=&quot;@layout/ham_locator_widget&quot;\n    android:targetCellWidth=&quot;4&quot;\n    android:targetCellHeight=&quot;2&quot;\n    android:updatePeriodMillis=&quot;1000&quot;\n    android:widgetCategory=&quot;home_screen&quot; /&gt;\n\n</code></pre>\n"},{"tags":["java","android","kotlin","android-debug"],"answers":[{"tags":[],"owner":{"account_id":19315649,"reputation":692,"user_id":14120486,"display_name":"ItzDavi"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691609781,"creation_date":1691609781,"answer_id":76870766,"question_id":76870250,"body_markdown":"The error is caused because the function `drawRouteOnMap()` uses the variable `polyline` before it is initialized, since you declared it `lateinit`. This means you have to use the function `drawRouteOnMap()` only **after** `polyline` has a value.\r\n\r\nIn **this** piece of code you provided, moving / calling again the `drawRouteOnMap()` immediately after \r\n\r\n`polyline = response.body()?...` \r\n\r\nshould solve your problem, like this:\r\n\r\n    \r\n    val requestCall = routeService.getRoutes(origin, destination, apiKey)\r\n    requestCall.enqueue(object: Callback&lt;RoutesResponse&gt; {\r\n        override fun onResponse(call: Call&lt;RoutesResponse&gt;, response: Response&lt;RoutesResponse&gt;) {\r\n\r\n            if (response.isSuccessful) {\r\n\r\n                if (routeResponse != null &amp;&amp; routeResponse.routes.isNotEmpty()){\r\n\r\n\r\n                    polyline = response.body()?.routes?.get(0)?.overview_polyline?.points.toString()\r\n\r\n                    drawRouteOnMap()\r\n                }else{\r\n                    ....\r\n\r\nKeep in mind that since there is more code other than this, using the function `drawRouteOnMap()` in the response **could not** suit your case. By doing that it may generate others errors.\r\n\r\nThe [documentation][1] helps also checking if a variable is initialized or not, have a look.\r\n\r\nIf this doesn&#39;t help, please let me know and I&#39;ll provide more support, happy coding!\r\n\r\n\r\n  [1]: https://kotlinlang.org/docs/properties.html#late-initialized-properties-and-variables","title":"UninitializedPropertyAccessException while working with lateinit","body":"<p>The error is caused because the function <code>drawRouteOnMap()</code> uses the variable <code>polyline</code> before it is initialized, since you declared it <code>lateinit</code>. This means you have to use the function <code>drawRouteOnMap()</code> only <strong>after</strong> <code>polyline</code> has a value.</p>\n<p>In <strong>this</strong> piece of code you provided, moving / calling again the <code>drawRouteOnMap()</code> immediately after</p>\n<p><code>polyline = response.body()?...</code></p>\n<p>should solve your problem, like this:</p>\n<pre><code>val requestCall = routeService.getRoutes(origin, destination, apiKey)\nrequestCall.enqueue(object: Callback&lt;RoutesResponse&gt; {\n    override fun onResponse(call: Call&lt;RoutesResponse&gt;, response: Response&lt;RoutesResponse&gt;) {\n\n        if (response.isSuccessful) {\n\n            if (routeResponse != null &amp;&amp; routeResponse.routes.isNotEmpty()){\n\n\n                polyline = response.body()?.routes?.get(0)?.overview_polyline?.points.toString()\n\n                drawRouteOnMap()\n            }else{\n                ....\n</code></pre>\n<p>Keep in mind that since there is more code other than this, using the function <code>drawRouteOnMap()</code> in the response <strong>could not</strong> suit your case. By doing that it may generate others errors.</p>\n<p>The <a href=\"https://kotlinlang.org/docs/properties.html#late-initialized-properties-and-variables\" rel=\"nofollow noreferrer\">documentation</a> helps also checking if a variable is initialized or not, have a look.</p>\n<p>If this doesn't help, please let me know and I'll provide more support, happy coding!</p>\n"}],"owner":{"account_id":29193971,"reputation":1,"user_id":22365524,"display_name":"kosi"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":28,"favorite_count":0,"down_vote_count":2,"up_vote_count":0,"answer_count":1,"score":-2,"last_activity_date":1691609781,"creation_date":1691604132,"question_id":76870250,"body_markdown":"I&#39;m working on Android development using Kotlin, and encountering an issue with a lateinit var named polyline. The error I&#39;m getting suggests that even though I assigned a value to polyline inside a function called from the onCreate, the app is still crashing with the message that polyline has not been initialized.\r\n\r\nPls how do I go about this? Is there something I&#39;m missing?\r\n\r\nSee the code below. I removed all unneccessary codes for this question\r\n\r\n```\r\nclass CustomerMapActivity : AppCompatActivity(), OnMapReadyCallback {\r\n\r\n    private lateinit var polyline: String\r\n\r\n\r\n    override fun onCreate(savedInstanceState: Bundle?) {\r\n        super.onCreate(savedInstanceState)\r\n        binding = ActivityCustomerMapBinding.inflate(layoutInflater)\r\n        setContentView(binding.root)\r\n\r\n        val pickUpLocation = &quot;Hall 2 Car Park, Benin City, Nigeria&quot;\r\n        val dropOffLocation = &quot;Nadia Bakery, Benin City, Nigeria&quot;\r\n        val apiKey = R.string.google_api_key.toString()\r\n\r\n        routesDetails(pickUpLocation, dropOffLocation, apiKey)\r\n\r\n\r\n    }\r\n\r\n\r\n    override fun onMapReady(mMap: GoogleMap) {\r\n        \r\n        drawRouteOnMap()\r\n\r\n    }\r\n\r\n\r\n    private fun routesDetails(origin: String, destination: String, apiKey: String){\r\n\r\n        val routeService = ServiceBuilder.buildService(RouteService::class.java)\r\n\r\n        val requestCall = routeService.getRoutes(origin, destination, apiKey)\r\n        requestCall.enqueue(object: Callback&lt;RoutesResponse&gt; {\r\n            override fun onResponse(call: Call&lt;RoutesResponse&gt;, response: Response&lt;RoutesResponse&gt;) {\r\n\r\n                if (response.isSuccessful) {\r\n\r\n                    if (routeResponse != null &amp;&amp; routeResponse.routes.isNotEmpty()){\r\n\r\n\r\n                        polyline = response.body()?.routes?.get(0)?.overview_polyline?.points.toString()\r\n\r\n                    }else{\r\n                    }\r\n                }\r\n            }\r\n\r\n            override fun onFailure(call: Call&lt;RoutesResponse&gt;, t: Throwable) {\r\n\r\n            }\r\n\r\n        })\r\n    }\r\n\r\n\r\n\r\n    private fun drawRouteOnMap() {\r\n        val decodedPolyline = PolyUtil.decode(polyline)\r\n        \r\n    }\r\n```\r\n\r\n\r\n\r\nLogcat:\r\n\r\n```\r\nFATAL EXCEPTION: main\r\n                                                                                                    Process: leoh.portcustomer, PID: 24494\r\n                                                                                                    kotlin.UninitializedPropertyAccessException: lateinit property polyline has not been initialized\r\n                                                                                                    \tat leoh.portcustomer.activities.CustomerMapActivity.drawRouteOnMap(CustomerMapActivity.kt:162)\r\n                                                                                                    \tat leoh.portcustomer.activities.CustomerMapActivity.onMapReady(CustomerMapActivity.kt:104)\r\n                                                                                                    \tat com.google.android.gms.maps.zzat.zzb(com.google.android.gms:play-services-maps@@18.1.0:1)\r\n                                                                                                    \tat com.google.android.gms.maps.internal.zzar.zza(com.google.android.gms:play-services-maps@@18.1.0:6)\r\n                                                                                                    \tat com.google.android.gms.internal.maps.zzb.onTransact(com.google.android.gms:play-services-maps@@18.1.0:3)\r\n                                                                                                    \tat android.os.Binder.transact(Binder.java:1043)\r\n                                                                                                    \tat m.ff.c(:com.google.android.gms.dynamite_mapsdynamite@232617040@23.26.17 (150700-0):8)\r\n                                                                                                    \tat com.google.maps.api.android.lib6.impl.bg.run(:com.google.android.gms.dynamite_mapsdynamite@232617040@23.26.17 (150700-0):19)\r\n                                                                                                    \tat android.os.Handler.handleCallback(Handler.java:938)\r\n                                                                                                    \tat android.os.Handler.dispatchMessage(Handler.java:99)\r\n                                                                                                    \tat android.os.Looper.loop(Looper.java:223)\r\n                                                                                                    \tat android.app.ActivityThread.main(ActivityThread.java:7656)\r\n                                                                                                    \tat java.lang.reflect.Method.invoke(Native Method)\r\n                                                                                                    \tat com.android.internal.os.RuntimeInit$MethodAndArgsCaller.run(RuntimeInit.java:592)\r\n                                                                                                    \tat com.android.internal.os.ZygoteInit.main(ZygoteInit.java:947)\r\n```\r\n\r\nTried resolving it but wasnt still working.\r\nI&#39;ll appreciate your asistance","title":"UninitializedPropertyAccessException while working with lateinit","body":"<p>I'm working on Android development using Kotlin, and encountering an issue with a lateinit var named polyline. The error I'm getting suggests that even though I assigned a value to polyline inside a function called from the onCreate, the app is still crashing with the message that polyline has not been initialized.</p>\n<p>Pls how do I go about this? Is there something I'm missing?</p>\n<p>See the code below. I removed all unneccessary codes for this question</p>\n<pre><code>class CustomerMapActivity : AppCompatActivity(), OnMapReadyCallback {\n\n    private lateinit var polyline: String\n\n\n    override fun onCreate(savedInstanceState: Bundle?) {\n        super.onCreate(savedInstanceState)\n        binding = ActivityCustomerMapBinding.inflate(layoutInflater)\n        setContentView(binding.root)\n\n        val pickUpLocation = &quot;Hall 2 Car Park, Benin City, Nigeria&quot;\n        val dropOffLocation = &quot;Nadia Bakery, Benin City, Nigeria&quot;\n        val apiKey = R.string.google_api_key.toString()\n\n        routesDetails(pickUpLocation, dropOffLocation, apiKey)\n\n\n    }\n\n\n    override fun onMapReady(mMap: GoogleMap) {\n        \n        drawRouteOnMap()\n\n    }\n\n\n    private fun routesDetails(origin: String, destination: String, apiKey: String){\n\n        val routeService = ServiceBuilder.buildService(RouteService::class.java)\n\n        val requestCall = routeService.getRoutes(origin, destination, apiKey)\n        requestCall.enqueue(object: Callback&lt;RoutesResponse&gt; {\n            override fun onResponse(call: Call&lt;RoutesResponse&gt;, response: Response&lt;RoutesResponse&gt;) {\n\n                if (response.isSuccessful) {\n\n                    if (routeResponse != null &amp;&amp; routeResponse.routes.isNotEmpty()){\n\n\n                        polyline = response.body()?.routes?.get(0)?.overview_polyline?.points.toString()\n\n                    }else{\n                    }\n                }\n            }\n\n            override fun onFailure(call: Call&lt;RoutesResponse&gt;, t: Throwable) {\n\n            }\n\n        })\n    }\n\n\n\n    private fun drawRouteOnMap() {\n        val decodedPolyline = PolyUtil.decode(polyline)\n        \n    }\n</code></pre>\n<p>Logcat:</p>\n<pre><code>FATAL EXCEPTION: main\n                                                                                                    Process: leoh.portcustomer, PID: 24494\n                                                                                                    kotlin.UninitializedPropertyAccessException: lateinit property polyline has not been initialized\n                                                                                                        at leoh.portcustomer.activities.CustomerMapActivity.drawRouteOnMap(CustomerMapActivity.kt:162)\n                                                                                                        at leoh.portcustomer.activities.CustomerMapActivity.onMapReady(CustomerMapActivity.kt:104)\n                                                                                                        at com.google.android.gms.maps.zzat.zzb(com.google.android.gms:play-services-maps@@18.1.0:1)\n                                                                                                        at com.google.android.gms.maps.internal.zzar.zza(com.google.android.gms:play-services-maps@@18.1.0:6)\n                                                                                                        at com.google.android.gms.internal.maps.zzb.onTransact(com.google.android.gms:play-services-maps@@18.1.0:3)\n                                                                                                        at android.os.Binder.transact(Binder.java:1043)\n                                                                                                        at m.ff.c(:com.google.android.gms.dynamite_mapsdynamite@232617040@23.26.17 (150700-0):8)\n                                                                                                        at com.google.maps.api.android.lib6.impl.bg.run(:com.google.android.gms.dynamite_mapsdynamite@232617040@23.26.17 (150700-0):19)\n                                                                                                        at android.os.Handler.handleCallback(Handler.java:938)\n                                                                                                        at android.os.Handler.dispatchMessage(Handler.java:99)\n                                                                                                        at android.os.Looper.loop(Looper.java:223)\n                                                                                                        at android.app.ActivityThread.main(ActivityThread.java:7656)\n                                                                                                        at java.lang.reflect.Method.invoke(Native Method)\n                                                                                                        at com.android.internal.os.RuntimeInit$MethodAndArgsCaller.run(RuntimeInit.java:592)\n                                                                                                        at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:947)\n</code></pre>\n<p>Tried resolving it but wasnt still working.\nI'll appreciate your asistance</p>\n"},{"tags":["java","sonarqube","saxon","illegalargumentexception","xxe"],"comments":[{"owner":{"account_id":8546,"reputation":17688,"user_id":15472,"accept_rate":87,"display_name":"tucuxi"},"score":0,"creation_date":1635524514,"post_id":69771879,"comment_id":123330322,"body_markdown":"It seems like Sonar is detecting a legitimate error, and asking you to fix it by updating your version of the library. And you would prefer not to update, because then you would need to test more things because the code would be different. Yes, it will be more work to update, but any other answer will also require work (for example, backporting a fix for the bug and tricking Sonar into accepting it) -- and as libraries continue to change, it will be even harder to keep your code up to date. So, in short: update your library version.","body":"It seems like Sonar is detecting a legitimate error, and asking you to fix it by updating your version of the library. And you would prefer not to update, because then you would need to test more things because the code would be different. Yes, it will be more work to update, but any other answer will also require work (for example, backporting a fix for the bug and tricking Sonar into accepting it) -- and as libraries continue to change, it will be even harder to keep your code up to date. So, in short: update your library version."},{"owner":{"account_id":23183025,"reputation":11,"user_id":17280586,"display_name":"Dharani Dharan"},"score":0,"creation_date":1635746179,"post_id":69771879,"comment_id":123367482,"body_markdown":"Hi @tucuxi , thans for the detailed info. One question here:\nThe 10.3 version of this interface replaces InstructionInfo with Traceable --&gt; How do I use getConstructType() in this version or what&#39;s the alternative for this, like i asked in the second question. Thanks in advance.","body":"Hi @tucuxi , thans for the detailed info. One question here: The 10.3 version of this interface replaces InstructionInfo with Traceable --&gt; How do I use getConstructType() in this version or what&#39;s the alternative for this, like i asked in the second question. Thanks in advance."}],"answers":[{"tags":[],"owner":{"account_id":529122,"reputation":158120,"user_id":415448,"accept_rate":33,"display_name":"Michael Kay"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1635543821,"creation_date":1635543821,"answer_id":69775077,"question_id":69771879,"body_markdown":"First point: to be a little argumentative, it is NOT a bug in Saxon 9.7. The Javadoc for TransformerFactory (in Java 8) says &quot;All implementations that implement JAXP 1.5 or newer are required to support the XMLConstants.ACCESS_EXTERNAL_DTD and XMLConstants.ACCESS_EXTERNAL_STYLESHEET properties.&quot; but Saxon 9.7 never claimed to implement JAXP 1.5, it only claimed to implement JAXP 1.3.\r\n\r\nSaying &quot;I want to stay on an old release of Saxon but I can&#39;t, because I want a version that supports a new feature of JAXP&quot; is very understandable, but not actually very logical.\r\n\r\nOne solution to this is to add your own implementation of the TransformerFactory API, which intercepts the attempt to set this property and doesn&#39;t pass it on to Saxon.\r\n\r\nNote that this property is in the wrong place anyway. DTD processing is the responsibility of the XML parser, not the XSLT processor. The specification doesn&#39;t make it clear exactly what effect it&#39;s supposed to have. If the XSLT processor instantiates the XML parser, it seems reasonable that it should pass the property on, but what should it do if it&#39;s not accepted? And should it pass it on at all if the XML parser is created by the user application rather than by the XSLT processor? Generally it&#39;s a very frustrating exercise trying to implement rules like this in the JAXP specification, which are often very fuzzily specified.\r\n\r\nI would encourage you generally to try to keep abreast of new Saxon releases to avoid hitting problems which have already been solved. Yes, it&#39;s true that we occasionally revise the design of some of the &quot;system programming&quot; interfaces such as the `TraceListener` interface. The 10.3 version of this interface replaces `InstructionInfo` with `Traceable`, and to find out what kind of `Traceable` is involved, you should use `instanceof`.\r\n\r\nWhen we do make changes, we often introduce a new API in one major version and drop the old API in the following version. If you jump forward three major releases in one go (9.7 to 10, skipping 9.8 and 9.9) then you&#39;re not able to take advantage of these transition aids.","title":"Hi, I&#39;m facing a blocker in a SonarQube violation - Disable access to external entities in XML parsing","body":"<p>First point: to be a little argumentative, it is NOT a bug in Saxon 9.7. The Javadoc for TransformerFactory (in Java 8) says &quot;All implementations that implement JAXP 1.5 or newer are required to support the XMLConstants.ACCESS_EXTERNAL_DTD and XMLConstants.ACCESS_EXTERNAL_STYLESHEET properties.&quot; but Saxon 9.7 never claimed to implement JAXP 1.5, it only claimed to implement JAXP 1.3.</p>\n<p>Saying &quot;I want to stay on an old release of Saxon but I can't, because I want a version that supports a new feature of JAXP&quot; is very understandable, but not actually very logical.</p>\n<p>One solution to this is to add your own implementation of the TransformerFactory API, which intercepts the attempt to set this property and doesn't pass it on to Saxon.</p>\n<p>Note that this property is in the wrong place anyway. DTD processing is the responsibility of the XML parser, not the XSLT processor. The specification doesn't make it clear exactly what effect it's supposed to have. If the XSLT processor instantiates the XML parser, it seems reasonable that it should pass the property on, but what should it do if it's not accepted? And should it pass it on at all if the XML parser is created by the user application rather than by the XSLT processor? Generally it's a very frustrating exercise trying to implement rules like this in the JAXP specification, which are often very fuzzily specified.</p>\n<p>I would encourage you generally to try to keep abreast of new Saxon releases to avoid hitting problems which have already been solved. Yes, it's true that we occasionally revise the design of some of the &quot;system programming&quot; interfaces such as the <code>TraceListener</code> interface. The 10.3 version of this interface replaces <code>InstructionInfo</code> with <code>Traceable</code>, and to find out what kind of <code>Traceable</code> is involved, you should use <code>instanceof</code>.</p>\n<p>When we do make changes, we often introduce a new API in one major version and drop the old API in the following version. If you jump forward three major releases in one go (9.7 to 10, skipping 9.8 and 9.9) then you're not able to take advantage of these transition aids.</p>\n"},{"tags":[],"owner":{"account_id":1912600,"reputation":17,"user_id":1725982,"display_name":"mrharmon"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691609080,"creation_date":1691609080,"answer_id":76870698,"question_id":69771879,"body_markdown":"   \r\n    TransformerFactory tf = TransformerFactory.newInstance();\r\n    tf.setAttribute(“http://javax.xml.XMLConstants/property/accessExternalDTD”,””);\r\n    tf.setAttribute(&quot;http://javax.xml.XMLConstants/property/accessExternalStylesheet&quot;,””);\r\n    Transformer transformer = tf.newTransformer();\r\n\r\nreference: https://community.veracode.com/s/article/Java-Remediation-Guidance-for-XXE\r\n","title":"Hi, I&#39;m facing a blocker in a SonarQube violation - Disable access to external entities in XML parsing","body":"<pre><code>TransformerFactory tf = TransformerFactory.newInstance();\ntf.setAttribute(“http://javax.xml.XMLConstants/property/accessExternalDTD”,””);\ntf.setAttribute(&quot;http://javax.xml.XMLConstants/property/accessExternalStylesheet&quot;,””);\nTransformer transformer = tf.newTransformer();\n</code></pre>\n<p>reference: <a href=\"https://community.veracode.com/s/article/Java-Remediation-Guidance-for-XXE\" rel=\"nofollow noreferrer\">https://community.veracode.com/s/article/Java-Remediation-Guidance-for-XXE</a></p>\n"}],"owner":{"account_id":23183025,"reputation":11,"user_id":17280586,"display_name":"Dharani Dharan"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1050,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1691609080,"creation_date":1635523519,"question_id":69771879,"body_markdown":"Tried with the fix given in sonarqube.\r\n\r\n            *TransformerFactory tfactory = TransformerFactory.newInstance();\r\n\t\t\ttfactory.setAttribute(XMLConstants.ACCESS_EXTERNAL_DTD, &quot;&quot;);\r\n\t\t\ttfactory.setAttribute(javax.xml.XMLConstants.ACCESS_EXTERNAL_STYLESHEET, &quot;&quot;);\r\n\t\t\treturn tfactory;*\r\n\r\nBut I&#39;m facing a runtime exception on setAttribute:\r\n&quot;java.lang.IllegalArgumentException: Unknown configuration property http://javax.xml.XMLConstants/property/accessExternalDTD&quot;\r\n\r\nThis seems to be because of a bug in the version of saxon jar im using [9.7] . And its working fine on saxon 10.3 . Please refer https://saxonica.plan.io/issues/4729 for this bug.\r\n\r\nBelow are my questions:\r\n\r\n1) Is there any way to make it work on my existing saxon version (without upgrading it to 10.x). Tried using transformerFactory.setFeature(XMLConstants.FEATURE_SECURE_PROCESSING, true) but sonarqube is not satisfied as it expects above fix.\r\n\r\n2) If upgrading to 10.x is the only way, then below is the challenge im facing:\r\n\r\n    I&#39;m overriding a method from TraceListener for some business logics. But the method signature \r\n    got changed on latest version like below:\r\n   \r\n   Class - net.sf.saxon.lib.TraceListener\r\n\r\n   Saxon 9.7 -&gt; public void enter(InstructionInfo instruction, XPathContext context)\r\n\r\n   Saxon 10.x -&gt; public void enter(Traceable instruction, \r\n            java.util.Map&lt;java.lang.String,java.lang.Object&gt; properties, XPathContext context)  \r\n\r\n    My current Code:\r\n\r\n       *@Override\r\n       public void enter(InstructionInfo instruction, XPathContext context)\t{\r\n\t\tint data = instruction.getConstructType();\r\n\t\tif ((data == 155) || (data == 200)) {\r\n\t\t\t.......logic......\r\n\t\t}\r\n\t   }*\r\n\r\n  My new code will be :\r\n\r\n       *@Override\r\n       public void enter(Traceable instruction,           \r\n        java.util.Map&lt;java.lang.String,java.lang.Object&gt; properties, XPathContext context){\r\n\t\t--&gt; what to use here for getConstructType()\r\n\t\tif ((data == 155) || (data == 200)) {\r\n\t\t\t.......logic......\r\n\t\t}\r\n\t   }*\r\n\r\nSo the problem is 10.x jar doesn&#39;t have getConstructType() method in its Traceable class or InstructionInfo class. How do I use getConstructType() in 10.x version?\r\n\r\nP.S : It will be very helpful if the 1st question gets answered i.e) if I can be able to resolve with my current version of jar as new version requires testing of all the functionalities throughout the project :(  Hope someone can help me, thanks in advance.\r\n\r\n       ","title":"Hi, I&#39;m facing a blocker in a SonarQube violation - Disable access to external entities in XML parsing","body":"<p>Tried with the fix given in sonarqube.</p>\n<pre><code>        *TransformerFactory tfactory = TransformerFactory.newInstance();\n        tfactory.setAttribute(XMLConstants.ACCESS_EXTERNAL_DTD, &quot;&quot;);\n        tfactory.setAttribute(javax.xml.XMLConstants.ACCESS_EXTERNAL_STYLESHEET, &quot;&quot;);\n        return tfactory;*\n</code></pre>\n<p>But I'm facing a runtime exception on setAttribute:\n&quot;java.lang.IllegalArgumentException: Unknown configuration property <a href=\"http://javax.xml.XMLConstants/property/accessExternalDTD%22\" rel=\"nofollow noreferrer\">http://javax.xml.XMLConstants/property/accessExternalDTD&quot;</a></p>\n<p>This seems to be because of a bug in the version of saxon jar im using [9.7] . And its working fine on saxon 10.3 . Please refer <a href=\"https://saxonica.plan.io/issues/4729\" rel=\"nofollow noreferrer\">https://saxonica.plan.io/issues/4729</a> for this bug.</p>\n<p>Below are my questions:</p>\n<ol>\n<li><p>Is there any way to make it work on my existing saxon version (without upgrading it to 10.x). Tried using transformerFactory.setFeature(XMLConstants.FEATURE_SECURE_PROCESSING, true) but sonarqube is not satisfied as it expects above fix.</p>\n</li>\n<li><p>If upgrading to 10.x is the only way, then below is the challenge im facing:</p>\n<p>I'm overriding a method from TraceListener for some business logics. But the method signature\ngot changed on latest version like below:</p>\n<p>Class - net.sf.saxon.lib.TraceListener</p>\n<p>Saxon 9.7 -&gt; public void enter(InstructionInfo instruction, XPathContext context)</p>\n<p>Saxon 10.x -&gt; public void enter(Traceable instruction,\njava.util.Map&lt;java.lang.String,java.lang.Object&gt; properties, XPathContext context)</p>\n<p>My current Code:</p>\n<pre><code>*@Override\npublic void enter(InstructionInfo instruction, XPathContext context) {\n int data = instruction.getConstructType();\n if ((data == 155) || (data == 200)) {\n     .......logic......\n }\n}*\n</code></pre>\n</li>\n</ol>\n<p>My new code will be :</p>\n<pre><code>   *@Override\n   public void enter(Traceable instruction,           \n    java.util.Map&lt;java.lang.String,java.lang.Object&gt; properties, XPathContext context){\n    --&gt; what to use here for getConstructType()\n    if ((data == 155) || (data == 200)) {\n        .......logic......\n    }\n   }*\n</code></pre>\n<p>So the problem is 10.x jar doesn't have getConstructType() method in its Traceable class or InstructionInfo class. How do I use getConstructType() in 10.x version?</p>\n<p>P.S : It will be very helpful if the 1st question gets answered i.e) if I can be able to resolve with my current version of jar as new version requires testing of all the functionalities throughout the project :(  Hope someone can help me, thanks in advance.</p>\n"},{"tags":["java","spring-boot","junit5"],"comments":[{"owner":{"account_id":2712514,"reputation":10118,"user_id":2340612,"accept_rate":83,"display_name":"user2340612"},"score":0,"creation_date":1691582815,"post_id":76867608,"comment_id":135510684,"body_markdown":"you might want to look at [parameterized tests](https://junit.org/junit5/docs/current/user-guide/#writing-tests-parameterized-tests)","body":"you might want to look at <a href=\"https://junit.org/junit5/docs/current/user-guide/#writing-tests-parameterized-tests\" rel=\"nofollow noreferrer\">parameterized tests</a>"},{"owner":{"account_id":20090406,"reputation":415,"user_id":14731030,"display_name":"pensee"},"score":0,"creation_date":1691583979,"post_id":76867608,"comment_id":135510906,"body_markdown":"can it be used on the init() method that&#39;s annotated with @BeforeAll?","body":"can it be used on the init() method that&#39;s annotated with @BeforeAll?"},{"owner":{"account_id":1211967,"reputation":7024,"user_id":1180351,"display_name":"Rob Spoor"},"score":0,"creation_date":1691591854,"post_id":76867608,"comment_id":135512822,"body_markdown":"If these are your only tests, then is that method really necessary? Inside `testZip` you generate the files again anyway, so the only method that uses the result of `init` is `testMetaAttributeFile`. You might as well remove the field completely and turn it into a local variable like in `testZip`.","body":"If these are your only tests, then is that method really necessary? Inside <code>testZip</code> you generate the files again anyway, so the only method that uses the result of <code>init</code> is <code>testMetaAttributeFile</code>. You might as well remove the field completely and turn it into a local variable like in <code>testZip</code>."},{"owner":{"account_id":20090406,"reputation":415,"user_id":14731030,"display_name":"pensee"},"score":0,"creation_date":1691598827,"post_id":76867608,"comment_id":135514430,"body_markdown":"@RobSpoor I added one more dummy method. There are actually in total 4 methods like testXYXFile() , all of them use the result of init() method.","body":"@RobSpoor I added one more dummy method. There are actually in total 4 methods like testXYXFile() , all of them use the result of init() method."}],"answers":[{"tags":[],"owner":{"account_id":18042274,"reputation":36,"user_id":13114087,"display_name":"SHresTho12"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691583395,"creation_date":1691583395,"answer_id":76867707,"question_id":76867608,"body_markdown":"You can use parameterized testing. It runs same test on different parameters.\r\n \r\n\r\n    import org.junit.jupiter.api.BeforeEach;\r\n    import org.junit.jupiter.params.ParameterizedTest;\r\n    import org.junit.jupiter.params.provider.MethodSource;\r\n    import java.util.stream.Stream;\r\n    \r\n        public class YourTestClass {\r\n        \r\n            private YourClassToTest yourClassToTest;\r\n    \r\n        @BeforeEach\r\n        public void init() {\r\n            yourClassToTest = new YourClassToTest();\r\n        }\r\n            @ParameterizedTest\r\n            @MethodSource(&quot;versions&quot;)\r\n            public void testWithDifferentVersions(String version) {\r\n                // Set the version in your test class based on the parameter\r\n                yourClassToTest.setVersion(version);\r\n                \r\n                // Your test assertions\r\n            }\r\n        \r\n            static Stream&lt;String&gt; versions() {\r\n                return Stream.of(&quot;0.25.1&quot;, &quot;0.24.1&quot;, &quot;0.24.0&quot;);\r\n            }\r\n        \r\n        }","title":"Run Junit test for various values of a list","body":"<p>You can use parameterized testing. It runs same test on different parameters.</p>\n<pre><code>import org.junit.jupiter.api.BeforeEach;\nimport org.junit.jupiter.params.ParameterizedTest;\nimport org.junit.jupiter.params.provider.MethodSource;\nimport java.util.stream.Stream;\n\n    public class YourTestClass {\n    \n        private YourClassToTest yourClassToTest;\n\n    @BeforeEach\n    public void init() {\n        yourClassToTest = new YourClassToTest();\n    }\n        @ParameterizedTest\n        @MethodSource(&quot;versions&quot;)\n        public void testWithDifferentVersions(String version) {\n            // Set the version in your test class based on the parameter\n            yourClassToTest.setVersion(version);\n            \n            // Your test assertions\n        }\n    \n        static Stream&lt;String&gt; versions() {\n            return Stream.of(&quot;0.25.1&quot;, &quot;0.24.1&quot;, &quot;0.24.0&quot;);\n        }\n    \n    }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":21488854,"reputation":1060,"user_id":15834974,"display_name":"vnk"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691608170,"creation_date":1691608170,"answer_id":76870614,"question_id":76867608,"body_markdown":"This approach defines a constructor for a parametrized test class that can accept parameters that correspond to the input values for parameterized tests.  A factory method is used to create test instances with different sets of input values (in this case, a list of version strings) &lt;br&gt;\r\n\r\nWhen you run the tests, an instance of `MDServiceTest` for each input value provided by the data method is created, and the constructor will initialize `version` for each instance.\r\n\r\n```\r\n@RunWith(Parameterized.class)\r\nclass MDServiceTest {\r\n\r\n    @Autowired\r\n    private MDService MDService;\r\n    private List&lt;File&gt; MDFiles;\r\n    private static final String version;\r\n    private List&lt;File&gt; MDFiles;\r\n    private final String MDType=&quot;WLCR&quot;;\r\n\r\n    public MDServiceTest(String version){\r\n        this.version = version;\r\n        MDFiles = MDService.generateMDFiles(version, MDType);\r\n    }\r\n    @Test\r\n    void testMetaAttributeFile() throws IOException {\r\n        File MDAttribFile = MDFiles.get(0);\r\n        String filePath = String.format(&quot;src/%s/%s_%s.csv&quot;, version, MDType,version);\r\n        File expectedMDAttribFile = new File(filePath);\r\n        Assert.assertTrue(Utility.compareCsvFiles(expectedMDAttribFile, MDAttribFile));\r\n    }\r\n\r\n    @Test\r\n    void testMetaFile() throws IOException {\r\n        File MDAttribFile = MDFiles.get(1);\r\n                       .\r\n                       .\r\n                       .\r\n\r\n    }\r\n\r\n    @Test\r\n    void testZip() throws IOException, InterruptedException {\r\n        List&lt;File&gt; MDFiles = MDService.generateMDFiles(&quot;0.24.1&quot;, &quot;WLCR&quot;);\r\n        String zipFileName = &quot;test.zip&quot;;\r\n        File file = Utility.zipIt(MDFiles, zipFileName);\r\n        Assert.assertEquals(zipFileName, file.getName());\r\n    }\r\n\r\n    @Parameterized.Parameters\r\n    public static Collection&lt;Object[]&gt; data() {\r\n        return Arrays.asList(new Object[][]{\r\n                {&quot;0.24.1&quot;},\r\n                {&quot;0.25.1&quot;}\r\n        });\r\n    }\r\n```","title":"Run Junit test for various values of a list","body":"<p>This approach defines a constructor for a parametrized test class that can accept parameters that correspond to the input values for parameterized tests.  A factory method is used to create test instances with different sets of input values (in this case, a list of version strings) <br></p>\n<p>When you run the tests, an instance of <code>MDServiceTest</code> for each input value provided by the data method is created, and the constructor will initialize <code>version</code> for each instance.</p>\n<pre><code>@RunWith(Parameterized.class)\nclass MDServiceTest {\n\n    @Autowired\n    private MDService MDService;\n    private List&lt;File&gt; MDFiles;\n    private static final String version;\n    private List&lt;File&gt; MDFiles;\n    private final String MDType=&quot;WLCR&quot;;\n\n    public MDServiceTest(String version){\n        this.version = version;\n        MDFiles = MDService.generateMDFiles(version, MDType);\n    }\n    @Test\n    void testMetaAttributeFile() throws IOException {\n        File MDAttribFile = MDFiles.get(0);\n        String filePath = String.format(&quot;src/%s/%s_%s.csv&quot;, version, MDType,version);\n        File expectedMDAttribFile = new File(filePath);\n        Assert.assertTrue(Utility.compareCsvFiles(expectedMDAttribFile, MDAttribFile));\n    }\n\n    @Test\n    void testMetaFile() throws IOException {\n        File MDAttribFile = MDFiles.get(1);\n                       .\n                       .\n                       .\n\n    }\n\n    @Test\n    void testZip() throws IOException, InterruptedException {\n        List&lt;File&gt; MDFiles = MDService.generateMDFiles(&quot;0.24.1&quot;, &quot;WLCR&quot;);\n        String zipFileName = &quot;test.zip&quot;;\n        File file = Utility.zipIt(MDFiles, zipFileName);\n        Assert.assertEquals(zipFileName, file.getName());\n    }\n\n    @Parameterized.Parameters\n    public static Collection&lt;Object[]&gt; data() {\n        return Arrays.asList(new Object[][]{\n                {&quot;0.24.1&quot;},\n                {&quot;0.25.1&quot;}\n        });\n    }\n</code></pre>\n"}],"owner":{"account_id":20090406,"reputation":415,"user_id":14731030,"display_name":"pensee"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":223,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1691608170,"creation_date":1691582637,"question_id":76867608,"body_markdown":"I have created a Junit Test where the Test class has some variables like:  \r\nprivate final String version=&quot;0.25.1&quot;  \r\nAnd when I run tests it compares the files related to this version.  \r\nThere is an init() method too.  \r\nCurrently how I am testing it for another version by changing the value of the version  \r\nmanually to &quot;0.24.1&quot; and &quot;0.24.0&quot; so that I could check test results for all of these versions.  \r\nIs there a way to specify a list of versions and then run the tests for each version and see the results?  \r\nIt&#39;s a spring boot project.   \r\nHere is a minimal code for the Junit Test that I have written:  \r\n\r\n        @RunWith(SpringRunner.class)\r\n        @SpringBootTest(webEnvironment = SpringBootTest.WebEnvironment.MOCK, classes = Application.class)\r\n        @AutoConfigureMockMvc\r\n        @TestPropertySource(locations = &quot;classpath:application-local.yml&quot;)\r\n        @TestInstance(TestInstance.Lifecycle.PER_CLASS)\r\n        class MDServiceTest {\r\n            @Autowired\r\n            private MDService MDService;\r\n            private List&lt;File&gt; MDFiles;\r\n            private final String version = &quot;0.24.1&quot;;\r\n            private final String MDType=&quot;WLCR&quot;;\r\n        \r\n            @BeforeAll\r\n            public void init() throws IOException, InterruptedException {\r\n                MDFiles = MDService.generateMDFiles(version, MDType);\r\n            }\r\n        \r\n            @Test\r\n            void testMetaAttributeFile() throws IOException {\r\n                File MDAttribFile = MDFiles.get(0);\r\n                String filePath = String.format(&quot;src/%s/%s_%s.csv&quot;, version, MDType,version);\r\n                File expectedMDAttribFile = new File(filePath);\r\n                Assert.assertTrue(Utility.compareCsvFiles(expectedMDAttribFile, MDAttribFile));\r\n            }\r\n        \r\n          @Test\r\n            void testMetaFile() throws IOException {\r\n                File MDAttribFile = MDFiles.get(1);\r\n                           .\r\n                           .\r\n                           .\r\n    \r\n            }\r\n        \r\n            @Test\r\n            void testZip() throws IOException, InterruptedException {\r\n                List&lt;File&gt; MDFiles = MDService.generateMDFiles(&quot;0.24.1&quot;, &quot;WLCR&quot;);\r\n                String zipFileName = &quot;test.zip&quot;;\r\n                File file = Utility.zipIt(MDFiles, zipFileName);\r\n                Assert.assertEquals(zipFileName, file.getName());\r\n            }\r\n        \r\n        }\r\n      \r\n\r\nI need to modify this so that it runs automatically for all version numbers. It could be that to use parameterizedTest I will have to modify this class because the init method also uses the version and @ParameterziedTest probably cannot be applied on it.\r\n","title":"Run Junit test for various values of a list","body":"<p>I have created a Junit Test where the Test class has some variables like:<br />\nprivate final String version=&quot;0.25.1&quot;<br />\nAnd when I run tests it compares the files related to this version.<br />\nThere is an init() method too.<br />\nCurrently how I am testing it for another version by changing the value of the version<br />\nmanually to &quot;0.24.1&quot; and &quot;0.24.0&quot; so that I could check test results for all of these versions.<br />\nIs there a way to specify a list of versions and then run the tests for each version and see the results?<br />\nIt's a spring boot project.<br />\nHere is a minimal code for the Junit Test that I have written:</p>\n<pre><code>    @RunWith(SpringRunner.class)\n    @SpringBootTest(webEnvironment = SpringBootTest.WebEnvironment.MOCK, classes = Application.class)\n    @AutoConfigureMockMvc\n    @TestPropertySource(locations = &quot;classpath:application-local.yml&quot;)\n    @TestInstance(TestInstance.Lifecycle.PER_CLASS)\n    class MDServiceTest {\n        @Autowired\n        private MDService MDService;\n        private List&lt;File&gt; MDFiles;\n        private final String version = &quot;0.24.1&quot;;\n        private final String MDType=&quot;WLCR&quot;;\n    \n        @BeforeAll\n        public void init() throws IOException, InterruptedException {\n            MDFiles = MDService.generateMDFiles(version, MDType);\n        }\n    \n        @Test\n        void testMetaAttributeFile() throws IOException {\n            File MDAttribFile = MDFiles.get(0);\n            String filePath = String.format(&quot;src/%s/%s_%s.csv&quot;, version, MDType,version);\n            File expectedMDAttribFile = new File(filePath);\n            Assert.assertTrue(Utility.compareCsvFiles(expectedMDAttribFile, MDAttribFile));\n        }\n    \n      @Test\n        void testMetaFile() throws IOException {\n            File MDAttribFile = MDFiles.get(1);\n                       .\n                       .\n                       .\n\n        }\n    \n        @Test\n        void testZip() throws IOException, InterruptedException {\n            List&lt;File&gt; MDFiles = MDService.generateMDFiles(&quot;0.24.1&quot;, &quot;WLCR&quot;);\n            String zipFileName = &quot;test.zip&quot;;\n            File file = Utility.zipIt(MDFiles, zipFileName);\n            Assert.assertEquals(zipFileName, file.getName());\n        }\n    \n    }\n  \n</code></pre>\n<p>I need to modify this so that it runs automatically for all version numbers. It could be that to use parameterizedTest I will have to modify this class because the init method also uses the version and @ParameterziedTest probably cannot be applied on it.</p>\n"},{"tags":["java","spring","spring-boot"],"answers":[{"tags":[],"owner":{"account_id":10345313,"reputation":330,"user_id":7630468,"display_name":"SwathiP"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691608128,"creation_date":1691608128,"answer_id":76870609,"question_id":76867782,"body_markdown":"Check again if your Jenkins is really using Java 8 when building your project.\r\n\r\nAlso, specify maven compiler source and target version to Java 8 in project&#39;s `pom.xml`. \r\n\r\nEither add the properties in `pom.xml`:\r\n\r\n    &lt;project&gt;\r\n      [...]\r\n      &lt;properties&gt;\r\n        &lt;maven.compiler.source&gt;1.8&lt;/maven.compiler.source&gt;\r\n        &lt;maven.compiler.target&gt;1.8&lt;/maven.compiler.target&gt;\r\n      &lt;/properties&gt;\r\n      [...]\r\n    &lt;/project&gt;\r\n\r\nor configure maven compiler plugin:\r\n\r\n    &lt;project&gt;\r\n      [...]\r\n      &lt;build&gt;\r\n        [...]\r\n        &lt;plugins&gt;\r\n          &lt;plugin&gt;\r\n            &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n            &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\r\n            &lt;version&gt;${compiler.version}&lt;/version&gt;\r\n            &lt;configuration&gt;\r\n              &lt;source&gt;1.8&lt;/source&gt;\r\n              &lt;target&gt;1.8&lt;/target&gt;\r\n            &lt;/configuration&gt;\r\n          &lt;/plugin&gt;\r\n        &lt;/plugins&gt;\r\n        [...]\r\n      &lt;/build&gt;\r\n      [...]\r\n    &lt;/project&gt;\r\n\r\nPlease see this [maven documentation][1] for more details. Hope it helps!\r\n\r\n\r\n  [1]: https://maven.apache.org/plugins/maven-compiler-plugin/examples/set-compiler-source-and-target.html","title":"org/springframework/cloud/bootstrap/RefreshBootstrapRegistryInitializer error when Spring Boot application in Kubernetes","body":"<p>Check again if your Jenkins is really using Java 8 when building your project.</p>\n<p>Also, specify maven compiler source and target version to Java 8 in project's <code>pom.xml</code>.</p>\n<p>Either add the properties in <code>pom.xml</code>:</p>\n<pre><code>&lt;project&gt;\n  [...]\n  &lt;properties&gt;\n    &lt;maven.compiler.source&gt;1.8&lt;/maven.compiler.source&gt;\n    &lt;maven.compiler.target&gt;1.8&lt;/maven.compiler.target&gt;\n  &lt;/properties&gt;\n  [...]\n&lt;/project&gt;\n</code></pre>\n<p>or configure maven compiler plugin:</p>\n<pre><code>&lt;project&gt;\n  [...]\n  &lt;build&gt;\n    [...]\n    &lt;plugins&gt;\n      &lt;plugin&gt;\n        &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n        &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\n        &lt;version&gt;${compiler.version}&lt;/version&gt;\n        &lt;configuration&gt;\n          &lt;source&gt;1.8&lt;/source&gt;\n          &lt;target&gt;1.8&lt;/target&gt;\n        &lt;/configuration&gt;\n      &lt;/plugin&gt;\n    &lt;/plugins&gt;\n    [...]\n  &lt;/build&gt;\n  [...]\n&lt;/project&gt;\n</code></pre>\n<p>Please see this <a href=\"https://maven.apache.org/plugins/maven-compiler-plugin/examples/set-compiler-source-and-target.html\" rel=\"nofollow noreferrer\">maven documentation</a> for more details. Hope it helps!</p>\n"}],"owner":{"account_id":4749106,"reputation":81,"user_id":5722013,"display_name":"Thushantha .Srimal"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":125,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1691608128,"creation_date":1691584018,"question_id":76867782,"body_markdown":"I&#39;m using Jenkins to build my Spring Boot application and then the image is deployed in a Kubernetes cluster. \r\nApplication is built using java 8 and the cluster also is java 8\r\nBut I get this bellow error\r\n\r\nit says &quot;compiled by a more recent version of the Java Runtime (class file version 61.0)&quot; but the build was using java 8.\r\n\r\nSpring boot version - 2.5.5\r\n\r\n    Exception in thread &quot;main&quot; java.lang.reflect.InvocationTargetException\r\n    \tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n    \tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\r\n    \tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n    \tat java.lang.reflect.Method.invoke(Method.java:498)\r\n    \tat org.springframework.boot.loader.MainMethodRunner.run(MainMethodRunner.java:49)\r\n    \tat org.springframework.boot.loader.Launcher.launch(Launcher.java:108)\r\n    \tat org.springframework.boot.loader.Launcher.launch(Launcher.java:58)\r\n    \tat org.springframework.boot.loader.JarLauncher.main(JarLauncher.java:88)\r\n    Caused by: java.lang.IllegalArgumentException: Cannot instantiate interface org.springframework.boot.BootstrapRegistryInitializer : org.springframework.cloud.bootstrap.RefreshBootstrapRegistryInitializer\r\n    \tat org.springframework.boot.SpringApplication.createSpringFactoriesInstances(SpringApplication.java:475)\r\n    \tat org.springframework.boot.SpringApplication.getSpringFactoriesInstances(SpringApplication.java:457)\r\n    \tat org.springframework.boot.SpringApplication.getSpringFactoriesInstances(SpringApplication.java:450)\r\n    \tat org.springframework.boot.SpringApplication.getBootstrapRegistryInitializersFromSpringFactories(SpringApplication.java:297)\r\n    \tat org.springframework.boot.SpringApplication.&lt;init&gt;(SpringApplication.java:285)\r\n    \tat org.springframework.boot.SpringApplication.&lt;init&gt;(SpringApplication.java:266)\r\n    \tat org.springframework.boot.SpringApplication.run(SpringApplication.java:1343)\r\n    \tat org.springframework.boot.SpringApplication.run(SpringApplication.java:1332)\r\n    \tat com.adl.et.telco.dte.celcom.reportmgt.ReportMgtServiceApplication.main(ReportMgtServiceApplication.java:55)\r\n    \t... 8 more\r\n    Caused by: java.lang.UnsupportedClassVersionError: org/springframework/cloud/bootstrap/RefreshBootstrapRegistryInitializer has been compiled by a more recent version of the Java Runtime (class file version 61.0), this version of the Java Runtime only recognizes class file versions up to 52.0\r\n    \tat java.lang.ClassLoader.defineClass1(Native Method)\r\n    \tat java.lang.ClassLoader.defineClass(ClassLoader.java:757)\r\n    \tat java.security.SecureClassLoader.defineClass(SecureClassLoader.java:142)\r\n    \tat java.net.URLClassLoader.defineClass(URLClassLoader.java:468)\r\n    \tat java.net.URLClassLoader.access$100(URLClassLoader.java:74)\r\n    \tat java.net.URLClassLoader$1.run(URLClassLoader.java:369)\r\n    \tat java.net.URLClassLoader$1.run(URLClassLoader.java:363)\r\n    \tat java.security.AccessController.doPrivileged(Native Method)\r\n    \tat java.net.URLClassLoader.findClass(URLClassLoader.java:362)\r\n    \tat java.lang.ClassLoader.loadClass(ClassLoader.java:419)\r\n    \tat org.springframework.boot.loader.LaunchedURLClassLoader.loadClass(LaunchedURLClassLoader.java:151)\r\n    \tat java.lang.ClassLoader.loadClass(ClassLoader.java:352)\r\n    \tat java.lang.Class.forName0(Native Method)\r\n    \tat java.lang.Class.forName(Class.java:348)\r\n    \tat org.springframework.util.ClassUtils.forName(ClassUtils.java:284)\r\n    \tat org.springframework.boot.SpringApplication.createSpringFactoriesInstances(SpringApplication.java:468)\r\n    \t... 16 more\r\n\r\n\r\nCan anyone help me with this.\r\n","title":"org/springframework/cloud/bootstrap/RefreshBootstrapRegistryInitializer error when Spring Boot application in Kubernetes","body":"<p>I'm using Jenkins to build my Spring Boot application and then the image is deployed in a Kubernetes cluster.\nApplication is built using java 8 and the cluster also is java 8\nBut I get this bellow error</p>\n<p>it says &quot;compiled by a more recent version of the Java Runtime (class file version 61.0)&quot; but the build was using java 8.</p>\n<p>Spring boot version - 2.5.5</p>\n<pre><code>Exception in thread &quot;main&quot; java.lang.reflect.InvocationTargetException\n    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\n    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n    at java.lang.reflect.Method.invoke(Method.java:498)\n    at org.springframework.boot.loader.MainMethodRunner.run(MainMethodRunner.java:49)\n    at org.springframework.boot.loader.Launcher.launch(Launcher.java:108)\n    at org.springframework.boot.loader.Launcher.launch(Launcher.java:58)\n    at org.springframework.boot.loader.JarLauncher.main(JarLauncher.java:88)\nCaused by: java.lang.IllegalArgumentException: Cannot instantiate interface org.springframework.boot.BootstrapRegistryInitializer : org.springframework.cloud.bootstrap.RefreshBootstrapRegistryInitializer\n    at org.springframework.boot.SpringApplication.createSpringFactoriesInstances(SpringApplication.java:475)\n    at org.springframework.boot.SpringApplication.getSpringFactoriesInstances(SpringApplication.java:457)\n    at org.springframework.boot.SpringApplication.getSpringFactoriesInstances(SpringApplication.java:450)\n    at org.springframework.boot.SpringApplication.getBootstrapRegistryInitializersFromSpringFactories(SpringApplication.java:297)\n    at org.springframework.boot.SpringApplication.&lt;init&gt;(SpringApplication.java:285)\n    at org.springframework.boot.SpringApplication.&lt;init&gt;(SpringApplication.java:266)\n    at org.springframework.boot.SpringApplication.run(SpringApplication.java:1343)\n    at org.springframework.boot.SpringApplication.run(SpringApplication.java:1332)\n    at com.adl.et.telco.dte.celcom.reportmgt.ReportMgtServiceApplication.main(ReportMgtServiceApplication.java:55)\n    ... 8 more\nCaused by: java.lang.UnsupportedClassVersionError: org/springframework/cloud/bootstrap/RefreshBootstrapRegistryInitializer has been compiled by a more recent version of the Java Runtime (class file version 61.0), this version of the Java Runtime only recognizes class file versions up to 52.0\n    at java.lang.ClassLoader.defineClass1(Native Method)\n    at java.lang.ClassLoader.defineClass(ClassLoader.java:757)\n    at java.security.SecureClassLoader.defineClass(SecureClassLoader.java:142)\n    at java.net.URLClassLoader.defineClass(URLClassLoader.java:468)\n    at java.net.URLClassLoader.access$100(URLClassLoader.java:74)\n    at java.net.URLClassLoader$1.run(URLClassLoader.java:369)\n    at java.net.URLClassLoader$1.run(URLClassLoader.java:363)\n    at java.security.AccessController.doPrivileged(Native Method)\n    at java.net.URLClassLoader.findClass(URLClassLoader.java:362)\n    at java.lang.ClassLoader.loadClass(ClassLoader.java:419)\n    at org.springframework.boot.loader.LaunchedURLClassLoader.loadClass(LaunchedURLClassLoader.java:151)\n    at java.lang.ClassLoader.loadClass(ClassLoader.java:352)\n    at java.lang.Class.forName0(Native Method)\n    at java.lang.Class.forName(Class.java:348)\n    at org.springframework.util.ClassUtils.forName(ClassUtils.java:284)\n    at org.springframework.boot.SpringApplication.createSpringFactoriesInstances(SpringApplication.java:468)\n    ... 16 more\n</code></pre>\n<p>Can anyone help me with this.</p>\n"},{"tags":["java","javafx","property-binding","hbox"],"comments":[{"owner":{"account_id":9676718,"reputation":5,"user_id":7179971,"display_name":"user7179971"},"score":0,"creation_date":1691605866,"post_id":76870238,"comment_id":135515673,"body_markdown":"@James_D Oh man. Whoops. I was having a brain fart moment and was treating the widthProperty as if it were just a second x value. I will look into overriding region as well. I am still very new to this and am not the best at finding the best way to do things yet. Thank you so much for your help!","body":"@James_D Oh man. Whoops. I was having a brain fart moment and was treating the widthProperty as if it were just a second x value. I will look into overriding region as well. I am still very new to this and am not the best at finding the best way to do things yet. Thank you so much for your help!"},{"owner":{"account_id":2819940,"reputation":12538,"user_id":2423906,"accept_rate":100,"display_name":"SedJ601"},"score":0,"creation_date":1691610948,"post_id":76870238,"comment_id":135516437,"body_markdown":"Do you have to use `Rectangle`?","body":"Do you have to use <code>Rectangle</code>?"}],"answers":[{"tags":[],"owner":{"account_id":2518243,"reputation":203472,"user_id":2189127,"display_name":"James_D"},"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1691608038,"creation_date":1691608038,"answer_id":76870600,"question_id":76870238,"body_markdown":"Your rectangles are behaving more or less as expected. The `x` property of the first rectangle is set to 10% of the width of the `HBox` and its `width` is set to 20% of the width of the `HBox`, so it extends to 30% of the width of the `HBox`. The `x` property of the second rectangle is set to 30% of the width of the `HBox`, so it starts where the first rectangle ends.\r\n\r\nBinding properties like this, however, is not the right way to lay things out in JavaFX. The `HBox` will try to resize if its child nodes resize, so that it can comfortably hold its children. If the size and position of the child nodes are bound to the size of the `HBox`, then they will resize if the `HBox` resizes. The library code is written to prevent any infinite recursion, but under some conditions it could be impossible to both satisfy the implicit dependency of the size of the container (the `HBox`) on the size of its children *and* the explicit dependency of the size of the children on the size of the container that the bindings create. You may notice at startup things don&#39;t quite look right (there is no gap to the right of the rectangles).\r\n\r\nA better approach is to subclass `Region` and override the `layoutChildren()` method. You can then query the width and height of the region and set the size and position of the rectangles accordingly.\r\n\r\nIf you want to allow for padding in the region, use `snappedXXXInset()` (where `XXX` is `top`/`right`/`bottom`/`left`). For simple use cases you could omit this.\r\n\r\nHere&#39;s a demo:\r\n\r\n\r\n    import javafx.application.Application;\r\n    import javafx.geometry.Insets;\r\n    import javafx.scene.Scene;\r\n    import javafx.scene.layout.HBox;\r\n    import javafx.scene.layout.Priority;\r\n    import javafx.scene.layout.Region;\r\n    import javafx.scene.paint.Color;\r\n    import javafx.scene.shape.Rectangle;\r\n    import javafx.stage.Stage;\r\n    \r\n    public class BarChartTest extends Application {\r\n        @Override\r\n        public void start(Stage primaryStage) throws Exception {\r\n            HBox hbox = new HBox();\r\n    \r\n            Rectangle rectangle1 = new Rectangle();\r\n    \r\n            Rectangle rectangle2 = new Rectangle();\r\n            rectangle2.setFill(Color.SKYBLUE);\r\n    \r\n    \r\n            Region region = new Region() {\r\n    \r\n                // in reality these can be properties\r\n                private final double prefBarWidth = 40;\r\n                private final double prefBarHeight = 400;\r\n                private final double verticalBarPadding = 100;\r\n                {\r\n                    getChildren().addAll(rectangle1, rectangle2);\r\n                }\r\n    \r\n                @Override\r\n                protected void layoutChildren() {\r\n                    double x = snappedLeftInset();\r\n                    double w = getWidth() - x - snappedRightInset();\r\n                    rectangle1.setX(snapPositionX(x + w * 0.1));\r\n                    rectangle1.setWidth(snapPositionX(w * 0.2));\r\n                    rectangle2.setX(snapPositionX(x + w * 0.4));\r\n                    rectangle2.setWidth(snapPositionX(w * 0.2));\r\n    \r\n                    double y = snappedTopInset();\r\n                    double h = getHeight() - y - snappedBottomInset();\r\n                    rectangle1.setY(snapPositionY(y + verticalBarPadding));\r\n                    rectangle1.setHeight(snapPositionY(h - 2 * verticalBarPadding));\r\n                    rectangle2.setY(snapPositionY(y + verticalBarPadding));\r\n                    rectangle2.setHeight(snapPositionY(h - 2 * verticalBarPadding));\r\n                }\r\n    \r\n            };\r\n    \r\n            hbox.setPadding(new Insets(20,20,20,20));\r\n            hbox.getChildren().add(region);\r\n            // For demo, make region grow when window size increases:\r\n            HBox.setHgrow(region, Priority.ALWAYS);\r\n    \r\n            Scene scene = new Scene(hbox, 440, 640);\r\n    \r\n            primaryStage.setScene(scene);\r\n            primaryStage.setTitle(&quot;Bar Chart&quot;);\r\n            primaryStage.show();\r\n        }\r\n    }\r\n\r\n\r\nNote I explicitly set the size of the scene here: that&#39;s because the region doesn&#39;t know how to calculate its preferred size (so by default it is zero). A slightly better solution would include that calculation:\r\n\r\n\r\n    import javafx.application.Application;\r\n    import javafx.geometry.Insets;\r\n    import javafx.scene.Scene;\r\n    import javafx.scene.layout.HBox;\r\n    import javafx.scene.layout.Priority;\r\n    import javafx.scene.layout.Region;\r\n    import javafx.scene.paint.Color;\r\n    import javafx.scene.shape.Rectangle;\r\n    import javafx.stage.Stage;\r\n    \r\n    public class BarChartTest extends Application {\r\n        @Override\r\n        public void start(Stage primaryStage) throws Exception {\r\n            HBox hbox = new HBox();\r\n    \r\n            Rectangle rectangle1 = new Rectangle();\r\n    \r\n            Rectangle rectangle2 = new Rectangle();\r\n            rectangle2.setFill(Color.SKYBLUE);\r\n    \r\n    \r\n            Region region = new Region() {\r\n    \r\n                // in reality these can be properties\r\n                private final double prefBarWidth = 40;\r\n                private final double prefBarHeight = 400;\r\n                private final double verticalBarPadding = 100;\r\n                {\r\n                    getChildren().addAll(rectangle1, rectangle2);\r\n                }\r\n    \r\n                @Override\r\n                protected void layoutChildren() {\r\n                    double x = snappedLeftInset();\r\n                    double w = getWidth() - x - snappedRightInset();\r\n                    rectangle1.setX(snapPositionX(x + w * 0.1));\r\n                    rectangle1.setWidth(snapPositionX(w * 0.2));\r\n                    rectangle2.setX(snapPositionX(x + w * 0.4));\r\n                    rectangle2.setWidth(snapPositionX(w * 0.2));\r\n    \r\n                    double y = snappedTopInset();\r\n                    double h = getHeight() - y - snappedBottomInset();\r\n                    rectangle1.setY(snapPositionY(y + verticalBarPadding));\r\n                    rectangle1.setHeight(snapPositionY(h - 2 * verticalBarPadding));\r\n                    rectangle2.setY(snapPositionY(y + verticalBarPadding));\r\n                    rectangle2.setHeight(snapPositionY(h - 2 * verticalBarPadding));\r\n                }\r\n    \r\n                @Override\r\n                public double computePrefHeight(double width) {\r\n                    return 2*verticalBarPadding + prefBarHeight + snappedTopInset() + snappedBottomInset();\r\n                }\r\n    \r\n                @Override\r\n                public double computePrefWidth(double height) {\r\n                    return prefBarWidth*5 + snappedLeftInset()+snappedRightInset();\r\n                }\r\n    \r\n            };\r\n    \r\n            hbox.setPadding(new Insets(20,20,20,20));\r\n            hbox.getChildren().add(region);\r\n            // For demo, make region grow when window size increases:\r\n            HBox.setHgrow(region, Priority.ALWAYS);\r\n    \r\n            Scene scene = new Scene(hbox);\r\n    \r\n            primaryStage.setScene(scene);\r\n            primaryStage.setTitle(&quot;Bar Chart&quot;);\r\n            primaryStage.show();\r\n        }\r\n    }\r\n\r\n","title":"How do I properly set bindings in JavaFX so that two rectangles retain their relative width and space between each other when the window is resized?","body":"<p>Your rectangles are behaving more or less as expected. The <code>x</code> property of the first rectangle is set to 10% of the width of the <code>HBox</code> and its <code>width</code> is set to 20% of the width of the <code>HBox</code>, so it extends to 30% of the width of the <code>HBox</code>. The <code>x</code> property of the second rectangle is set to 30% of the width of the <code>HBox</code>, so it starts where the first rectangle ends.</p>\n<p>Binding properties like this, however, is not the right way to lay things out in JavaFX. The <code>HBox</code> will try to resize if its child nodes resize, so that it can comfortably hold its children. If the size and position of the child nodes are bound to the size of the <code>HBox</code>, then they will resize if the <code>HBox</code> resizes. The library code is written to prevent any infinite recursion, but under some conditions it could be impossible to both satisfy the implicit dependency of the size of the container (the <code>HBox</code>) on the size of its children <em>and</em> the explicit dependency of the size of the children on the size of the container that the bindings create. You may notice at startup things don't quite look right (there is no gap to the right of the rectangles).</p>\n<p>A better approach is to subclass <code>Region</code> and override the <code>layoutChildren()</code> method. You can then query the width and height of the region and set the size and position of the rectangles accordingly.</p>\n<p>If you want to allow for padding in the region, use <code>snappedXXXInset()</code> (where <code>XXX</code> is <code>top</code>/<code>right</code>/<code>bottom</code>/<code>left</code>). For simple use cases you could omit this.</p>\n<p>Here's a demo:</p>\n<pre><code>import javafx.application.Application;\nimport javafx.geometry.Insets;\nimport javafx.scene.Scene;\nimport javafx.scene.layout.HBox;\nimport javafx.scene.layout.Priority;\nimport javafx.scene.layout.Region;\nimport javafx.scene.paint.Color;\nimport javafx.scene.shape.Rectangle;\nimport javafx.stage.Stage;\n\npublic class BarChartTest extends Application {\n    @Override\n    public void start(Stage primaryStage) throws Exception {\n        HBox hbox = new HBox();\n\n        Rectangle rectangle1 = new Rectangle();\n\n        Rectangle rectangle2 = new Rectangle();\n        rectangle2.setFill(Color.SKYBLUE);\n\n\n        Region region = new Region() {\n\n            // in reality these can be properties\n            private final double prefBarWidth = 40;\n            private final double prefBarHeight = 400;\n            private final double verticalBarPadding = 100;\n            {\n                getChildren().addAll(rectangle1, rectangle2);\n            }\n\n            @Override\n            protected void layoutChildren() {\n                double x = snappedLeftInset();\n                double w = getWidth() - x - snappedRightInset();\n                rectangle1.setX(snapPositionX(x + w * 0.1));\n                rectangle1.setWidth(snapPositionX(w * 0.2));\n                rectangle2.setX(snapPositionX(x + w * 0.4));\n                rectangle2.setWidth(snapPositionX(w * 0.2));\n\n                double y = snappedTopInset();\n                double h = getHeight() - y - snappedBottomInset();\n                rectangle1.setY(snapPositionY(y + verticalBarPadding));\n                rectangle1.setHeight(snapPositionY(h - 2 * verticalBarPadding));\n                rectangle2.setY(snapPositionY(y + verticalBarPadding));\n                rectangle2.setHeight(snapPositionY(h - 2 * verticalBarPadding));\n            }\n\n        };\n\n        hbox.setPadding(new Insets(20,20,20,20));\n        hbox.getChildren().add(region);\n        // For demo, make region grow when window size increases:\n        HBox.setHgrow(region, Priority.ALWAYS);\n\n        Scene scene = new Scene(hbox, 440, 640);\n\n        primaryStage.setScene(scene);\n        primaryStage.setTitle(&quot;Bar Chart&quot;);\n        primaryStage.show();\n    }\n}\n</code></pre>\n<p>Note I explicitly set the size of the scene here: that's because the region doesn't know how to calculate its preferred size (so by default it is zero). A slightly better solution would include that calculation:</p>\n<pre><code>import javafx.application.Application;\nimport javafx.geometry.Insets;\nimport javafx.scene.Scene;\nimport javafx.scene.layout.HBox;\nimport javafx.scene.layout.Priority;\nimport javafx.scene.layout.Region;\nimport javafx.scene.paint.Color;\nimport javafx.scene.shape.Rectangle;\nimport javafx.stage.Stage;\n\npublic class BarChartTest extends Application {\n    @Override\n    public void start(Stage primaryStage) throws Exception {\n        HBox hbox = new HBox();\n\n        Rectangle rectangle1 = new Rectangle();\n\n        Rectangle rectangle2 = new Rectangle();\n        rectangle2.setFill(Color.SKYBLUE);\n\n\n        Region region = new Region() {\n\n            // in reality these can be properties\n            private final double prefBarWidth = 40;\n            private final double prefBarHeight = 400;\n            private final double verticalBarPadding = 100;\n            {\n                getChildren().addAll(rectangle1, rectangle2);\n            }\n\n            @Override\n            protected void layoutChildren() {\n                double x = snappedLeftInset();\n                double w = getWidth() - x - snappedRightInset();\n                rectangle1.setX(snapPositionX(x + w * 0.1));\n                rectangle1.setWidth(snapPositionX(w * 0.2));\n                rectangle2.setX(snapPositionX(x + w * 0.4));\n                rectangle2.setWidth(snapPositionX(w * 0.2));\n\n                double y = snappedTopInset();\n                double h = getHeight() - y - snappedBottomInset();\n                rectangle1.setY(snapPositionY(y + verticalBarPadding));\n                rectangle1.setHeight(snapPositionY(h - 2 * verticalBarPadding));\n                rectangle2.setY(snapPositionY(y + verticalBarPadding));\n                rectangle2.setHeight(snapPositionY(h - 2 * verticalBarPadding));\n            }\n\n            @Override\n            public double computePrefHeight(double width) {\n                return 2*verticalBarPadding + prefBarHeight + snappedTopInset() + snappedBottomInset();\n            }\n\n            @Override\n            public double computePrefWidth(double height) {\n                return prefBarWidth*5 + snappedLeftInset()+snappedRightInset();\n            }\n\n        };\n\n        hbox.setPadding(new Insets(20,20,20,20));\n        hbox.getChildren().add(region);\n        // For demo, make region grow when window size increases:\n        HBox.setHgrow(region, Priority.ALWAYS);\n\n        Scene scene = new Scene(hbox);\n\n        primaryStage.setScene(scene);\n        primaryStage.setTitle(&quot;Bar Chart&quot;);\n        primaryStage.show();\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":9676718,"reputation":5,"user_id":7179971,"display_name":"user7179971"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":72,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76870600,"answer_count":1,"score":0,"last_activity_date":1691608038,"creation_date":1691604034,"question_id":76870238,"body_markdown":"I&#39;m trying to create a bar chart as seen in exercise 14.12 in Introduction to Java Programming and Data Structures. I am so lost and incompetent when it comes to using JavaFX, that I currently I&#39;m just trying to create two rectangles, that when you resize the window, their relative widths and distance from each other stay the same.\r\n\r\nI tried this: \r\n\r\n\r\n```\r\n HBox hBox = new HBox();\r\n      \r\n Group group = new Group();\r\n      \r\n      \r\n Rectangle rectangle1 = new Rectangle();\r\n rectangle1.xProperty().bind(hBox.widthProperty().multiply((double)10/100));\r\n rectangle1.setY(100);\r\n rectangle1.widthProperty().bind(hBox.widthProperty().multiply((double)20/100));\r\n rectangle1.setHeight(400);\r\n      \r\n Rectangle rectangle2 = new Rectangle();\r\n rectangle2.xProperty().bind(hBox.widthProperty().multiply((double)30/100));\r\n rectangle2.setY(100);\r\n rectangle2.widthProperty().bind(hBox.widthProperty().multiply((double)40/100));\r\n rectangle2.setHeight(400);\r\n\r\n group.getChildren().addAll(rectangle1, rectangle2);\r\n            \r\n hBox.setPadding(new Insets(20,20,20,20));\r\n hBox.getChildren().add(group);\r\n      \r\n Scene scene = new Scene(hBox);\r\n      \r\n primaryStage.setScene(scene);\r\n primaryStage.setTitle(&quot;Bar Chart&quot;);\r\n primaryStage.show();\r\n\r\n```\r\n\r\nI would have expected that with the widthProperty of rectangle1 set to 20% of the HBox size, and the xProperty of rectangle2 set to 30% of the HBox size, that there would be a noticeable distance between the rectangles, but they are basically merged together.","title":"How do I properly set bindings in JavaFX so that two rectangles retain their relative width and space between each other when the window is resized?","body":"<p>I'm trying to create a bar chart as seen in exercise 14.12 in Introduction to Java Programming and Data Structures. I am so lost and incompetent when it comes to using JavaFX, that I currently I'm just trying to create two rectangles, that when you resize the window, their relative widths and distance from each other stay the same.</p>\n<p>I tried this:</p>\n<pre><code> HBox hBox = new HBox();\n      \n Group group = new Group();\n      \n      \n Rectangle rectangle1 = new Rectangle();\n rectangle1.xProperty().bind(hBox.widthProperty().multiply((double)10/100));\n rectangle1.setY(100);\n rectangle1.widthProperty().bind(hBox.widthProperty().multiply((double)20/100));\n rectangle1.setHeight(400);\n      \n Rectangle rectangle2 = new Rectangle();\n rectangle2.xProperty().bind(hBox.widthProperty().multiply((double)30/100));\n rectangle2.setY(100);\n rectangle2.widthProperty().bind(hBox.widthProperty().multiply((double)40/100));\n rectangle2.setHeight(400);\n\n group.getChildren().addAll(rectangle1, rectangle2);\n            \n hBox.setPadding(new Insets(20,20,20,20));\n hBox.getChildren().add(group);\n      \n Scene scene = new Scene(hBox);\n      \n primaryStage.setScene(scene);\n primaryStage.setTitle(&quot;Bar Chart&quot;);\n primaryStage.show();\n\n</code></pre>\n<p>I would have expected that with the widthProperty of rectangle1 set to 20% of the HBox size, and the xProperty of rectangle2 set to 30% of the HBox size, that there would be a noticeable distance between the rectangles, but they are basically merged together.</p>\n"},{"tags":["java","spring-boot","serialization","redis","deserialization"],"owner":{"account_id":2377481,"reputation":1344,"user_id":2080429,"accept_rate":100,"display_name":"Yashasvi Raj Pant"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":112,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1691608005,"creation_date":1691607612,"question_id":76870562,"body_markdown":"I have two modules in Spring Boot Microservices `ModuleA` and `ModuleB`. Both modules share a common POJO class called `CacheData`, whose object is stored in Redis. \r\n\r\n`ModuleA` puts  the data in redis using\r\n    \r\n```\r\nprivate final ValueOperations&lt;String, CachedData&gt;keyToValueOperations;\r\n```\r\n\r\nlike:\r\n\r\n\r\n```\r\n   CacheData toSet = new CacheData(&quot;abc&quot;,&quot;utc&quot;,Arrays.asList(1,2,3));\r\n   keyToValueOperations.set(&#39;key&#39;, toSet);\r\n```\r\n\r\n```\r\npublic class CacheData implements Serializable {\r\n  @Serial private static final long serialVersionUID = -5640664404726218923L;\r\n  private String id;\r\n  private String timeZone;\r\n  private List&lt;Integer&gt; intList = new ArrayList&lt;&gt;();\r\n\r\n  public CacheData() {}\r\n\r\n  public CacheData(String id, String timeZone, List&lt;Integer&gt; intList) {\r\n    this.id = id;\r\n    this.timeZone = timeZone;\r\n    this.intList.addAll(intList);\r\n  }\r\n\r\n\r\n  public List&lt;Integer&gt; getIntList() {\r\n    return intList;\r\n  }\r\n\r\n \r\n  public CacheData setIntList(List&lt;Integer&gt; intList) {\r\n    this.intList.clear();\r\n    if (intList != null) {\r\n      this.intList.addAll(intList);\r\n    }\r\n    return this;\r\n  }\r\n\r\n \r\n  public String getId() {\r\n    return id;\r\n  }\r\n\r\n \r\n  public CacheData setId(String id) {\r\n    this.id = id;\r\n    return this;\r\n  }\r\n\r\n  public String getTimeZone() {\r\n    return timeZone;\r\n  }\r\n\r\n  \r\n  public CacheData setTimeZone(String timeZone) {\r\n    this.timeZone = timeZone;\r\n    return this;\r\n  }\r\n}\r\n```\r\n\r\nBut when I try to get the same data from `ModuleB` like:\r\n\r\n       CacheData toGet = keyToValueOperations.get(&#39;key);\r\n\r\nI am getting error as:\r\n```\r\n    java.io.IOException: FAILED_TO_UNCOMPRESS(5)\r\n\tat org.xerial.snappy.SnappyNative.throw_error(SnappyNative.java:112) ~[snappy-java-1.1.9.1.jar:1.1.9.1]\r\n\tat org.xerial.snappy.SnappyNative.rawUncompress(Native Method) ~[snappy-java-1.1.9.1.jar:1.1.9.1]\r\n\tat org.xerial.snappy.Snappy.rawUncompress(Snappy.java:480) ~[snappy-java-1.1.9.1.jar:1.1.9.1]\r\n\tat org.xerial.snappy.Snappy.uncompress(Snappy.java:519) ~[snappy-java-1.1.9.1.jar:1.1.9.1]\r\n\tat org.xerial.snappy.Snappy.uncompress(Snappy.java:494) ~[snappy-java-1.1.9.1.jar:1.1.9.1]\r\n\tat com.qfree.auth.service.SnappyRedisSerializer.deserialize(SnappyRedisSerializer.java:59) ~[auth-util-test.jar:na]\r\n\tat org.springframework.data.redis.core.AbstractOperations.deserializeValue(AbstractOperations.java:360) ~[spring-data-redis-2.7.11.jar:2.7.11]\r\n\tat org.springframework.data.redis.core.AbstractOperations$ValueDeserializingRedisCallback.doInRedis(AbstractOperations.java:62) ~[spring-data-redis-2.7.11.jar:2.7.11]\r\n\tat org.springframework.data.redis.core.RedisTemplate.execute(RedisTemplate.java:224) ~[spring-data-redis-2.7.11.jar:2.7.11]\r\n\tat org.springframework.data.redis.core.RedisTemplate.execute(RedisTemplate.java:191) ~[spring-data-redis-2.7.11.jar:2.7.11]\r\n\tat org.springframework.data.redis.core.AbstractOperations.execute(AbstractOperations.java:97) ~[spring-data-redis-2.7.11.jar:2.7.11]\r\n\tat org.springframework.data.redis.core.DefaultValueOperations.get(DefaultValueOperations.java:54) ~[spring-data-redis-2.7.11.jar:2.7.11]\r\n ```\r\n\r\nI am using same serializer for both modules defined as the `@Bean` of respective modules as:\r\n ```\r\n    @Bean\r\n    public ValueOperations&lt;String, CachedData&gt; keyToValueOperations(\r\n    RedisConnectionFactory connectionFactory) {\r\n    RedisTemplate&lt;String, CachedData&gt; template = new RedisTemplate&lt;&gt;();\r\n    SnappyRedisSerializer&lt;String&gt; snappyRedisSerializer =\r\n      new SnappyRedisSerializer&lt;&gt;(new FstRedisSerializer&lt;&gt;(), RedisSerializer.java());\r\n    template.setKeySerializer(RedisSerializer.string());\r\n    template.setHashKeySerializer(RedisSerializer.string());\r\n    template.setValueSerializer(snappyRedisSerializer);\r\n    template.setHashValueSerializer(snappyRedisSerializer);\r\n    template.setConnectionFactory(connectionFactory);\r\n    template.afterPropertiesSet();\r\n    return template.opsForValue();\r\n    }\r\n ```\r\n\r\n  Related codes are:\r\n\r\n ```\r\n  public class SnappyRedisSerializer&lt;T&gt; implements RedisSerializer&lt;T&gt; {\r\n      private static final Logger LOGGER = LoggerFactory.getLogger(SnappyRedisSerializer.class);\r\n  private final RedisSerializer&lt;T&gt; innerSerializer;\r\n  private final RedisSerializer&lt;?&gt; legacySerializer;\r\n\r\n\r\n  public SnappyRedisSerializer(\r\n      RedisSerializer&lt;T&gt; innerSerializer, RedisSerializer&lt;?&gt; legacySerializer) {\r\n    this.innerSerializer = innerSerializer;\r\n    this.legacySerializer = legacySerializer;\r\n  }\r\n\r\n \r\n  public SnappyRedisSerializer(RedisSerializer&lt;T&gt; innerSerializer) {\r\n    this.innerSerializer = innerSerializer;\r\n    this.legacySerializer = null;\r\n  }\r\n\r\n  \r\n  @Override\r\n  public byte[] serialize(T object) throws SerializationException {\r\n    try {\r\n      byte[] bytes = innerSerializer.serialize(object);\r\n      return Snappy.compress(bytes);\r\n    } catch (Exception e) {\r\n      throw new SerializationException(e.getMessage(), e);\r\n    }\r\n  }\r\n\r\n \r\n  @SuppressWarnings(&quot;unchecked&quot;)\r\n  @Override\r\n  public T deserialize(byte[] bytes) throws SerializationException {\r\n    try {\r\n      if (bytes == null) {\r\n        return null;\r\n      }\r\n      byte[] bos = Snappy.uncompress(bytes);\r\n      return innerSerializer.deserialize(bos);\r\n    } catch (Exception e) {\r\n      LOGGER.warn(&quot;Could not deserialize object, falling back to legacy&quot;, e);\r\n      if (legacySerializer == null) {\r\n        throw new SerializationException(e.getMessage(), e);\r\n      }\r\n      return (T) legacySerializer.deserialize(bytes);\r\n    }\r\n  }\r\n}\r\n```\r\n```\r\npublic class FstRedisSerializer&lt;T&gt; implements RedisSerializer&lt;T&gt; {\r\n\r\n  static ThreadLocal&lt;FSTConfiguration&gt; conf =\r\n      ThreadLocal.withInitial(FSTConfiguration::createDefaultConfiguration);\r\n\r\n\r\n  @Override\r\n  public byte[] serialize(T t) throws SerializationException {\r\n    FSTConfiguration fst = conf.get();\r\n    return fst.asByteArray(t);\r\n  }\r\n\r\n \r\n  @SuppressWarnings(&quot;unchecked&quot;)\r\n  @Override\r\n  public T deserialize(byte[] bytes) throws SerializationException {\r\n    FSTConfiguration fst = conf.get();\r\n    return (T) fst.asObject(bytes);\r\n  }\r\n}\r\n```\r\n Note: From `ModuleA` , I can get the data using\r\n\r\n```\r\nCacheData toGet = keyToValueOperations.get(&#39;key);\r\n```\r\n\r\nAny help?          ","title":"Serialization and Deserialization Issue in Redis","body":"<p>I have two modules in Spring Boot Microservices <code>ModuleA</code> and <code>ModuleB</code>. Both modules share a common POJO class called <code>CacheData</code>, whose object is stored in Redis.</p>\n<p><code>ModuleA</code> puts  the data in redis using</p>\n<pre><code>private final ValueOperations&lt;String, CachedData&gt;keyToValueOperations;\n</code></pre>\n<p>like:</p>\n<pre><code>   CacheData toSet = new CacheData(&quot;abc&quot;,&quot;utc&quot;,Arrays.asList(1,2,3));\n   keyToValueOperations.set('key', toSet);\n</code></pre>\n<pre><code>public class CacheData implements Serializable {\n  @Serial private static final long serialVersionUID = -5640664404726218923L;\n  private String id;\n  private String timeZone;\n  private List&lt;Integer&gt; intList = new ArrayList&lt;&gt;();\n\n  public CacheData() {}\n\n  public CacheData(String id, String timeZone, List&lt;Integer&gt; intList) {\n    this.id = id;\n    this.timeZone = timeZone;\n    this.intList.addAll(intList);\n  }\n\n\n  public List&lt;Integer&gt; getIntList() {\n    return intList;\n  }\n\n \n  public CacheData setIntList(List&lt;Integer&gt; intList) {\n    this.intList.clear();\n    if (intList != null) {\n      this.intList.addAll(intList);\n    }\n    return this;\n  }\n\n \n  public String getId() {\n    return id;\n  }\n\n \n  public CacheData setId(String id) {\n    this.id = id;\n    return this;\n  }\n\n  public String getTimeZone() {\n    return timeZone;\n  }\n\n  \n  public CacheData setTimeZone(String timeZone) {\n    this.timeZone = timeZone;\n    return this;\n  }\n}\n</code></pre>\n<p>But when I try to get the same data from <code>ModuleB</code> like:</p>\n<pre><code>   CacheData toGet = keyToValueOperations.get('key);\n</code></pre>\n<p>I am getting error as:</p>\n<pre><code>    java.io.IOException: FAILED_TO_UNCOMPRESS(5)\n    at org.xerial.snappy.SnappyNative.throw_error(SnappyNative.java:112) ~[snappy-java-1.1.9.1.jar:1.1.9.1]\n    at org.xerial.snappy.SnappyNative.rawUncompress(Native Method) ~[snappy-java-1.1.9.1.jar:1.1.9.1]\n    at org.xerial.snappy.Snappy.rawUncompress(Snappy.java:480) ~[snappy-java-1.1.9.1.jar:1.1.9.1]\n    at org.xerial.snappy.Snappy.uncompress(Snappy.java:519) ~[snappy-java-1.1.9.1.jar:1.1.9.1]\n    at org.xerial.snappy.Snappy.uncompress(Snappy.java:494) ~[snappy-java-1.1.9.1.jar:1.1.9.1]\n    at com.qfree.auth.service.SnappyRedisSerializer.deserialize(SnappyRedisSerializer.java:59) ~[auth-util-test.jar:na]\n    at org.springframework.data.redis.core.AbstractOperations.deserializeValue(AbstractOperations.java:360) ~[spring-data-redis-2.7.11.jar:2.7.11]\n    at org.springframework.data.redis.core.AbstractOperations$ValueDeserializingRedisCallback.doInRedis(AbstractOperations.java:62) ~[spring-data-redis-2.7.11.jar:2.7.11]\n    at org.springframework.data.redis.core.RedisTemplate.execute(RedisTemplate.java:224) ~[spring-data-redis-2.7.11.jar:2.7.11]\n    at org.springframework.data.redis.core.RedisTemplate.execute(RedisTemplate.java:191) ~[spring-data-redis-2.7.11.jar:2.7.11]\n    at org.springframework.data.redis.core.AbstractOperations.execute(AbstractOperations.java:97) ~[spring-data-redis-2.7.11.jar:2.7.11]\n    at org.springframework.data.redis.core.DefaultValueOperations.get(DefaultValueOperations.java:54) ~[spring-data-redis-2.7.11.jar:2.7.11]\n</code></pre>\n<p>I am using same serializer for both modules defined as the <code>@Bean</code> of respective modules as:</p>\n<pre><code>   @Bean\n   public ValueOperations&lt;String, CachedData&gt; keyToValueOperations(\n   RedisConnectionFactory connectionFactory) {\n   RedisTemplate&lt;String, CachedData&gt; template = new RedisTemplate&lt;&gt;();\n   SnappyRedisSerializer&lt;String&gt; snappyRedisSerializer =\n     new SnappyRedisSerializer&lt;&gt;(new FstRedisSerializer&lt;&gt;(), RedisSerializer.java());\n   template.setKeySerializer(RedisSerializer.string());\n   template.setHashKeySerializer(RedisSerializer.string());\n   template.setValueSerializer(snappyRedisSerializer);\n   template.setHashValueSerializer(snappyRedisSerializer);\n   template.setConnectionFactory(connectionFactory);\n   template.afterPropertiesSet();\n   return template.opsForValue();\n   }\n</code></pre>\n<p>Related codes are:</p>\n<pre><code> public class SnappyRedisSerializer&lt;T&gt; implements RedisSerializer&lt;T&gt; {\n     private static final Logger LOGGER = LoggerFactory.getLogger(SnappyRedisSerializer.class);\n private final RedisSerializer&lt;T&gt; innerSerializer;\n private final RedisSerializer&lt;?&gt; legacySerializer;\n\n\n public SnappyRedisSerializer(\n     RedisSerializer&lt;T&gt; innerSerializer, RedisSerializer&lt;?&gt; legacySerializer) {\n   this.innerSerializer = innerSerializer;\n   this.legacySerializer = legacySerializer;\n }\n\n\n public SnappyRedisSerializer(RedisSerializer&lt;T&gt; innerSerializer) {\n   this.innerSerializer = innerSerializer;\n   this.legacySerializer = null;\n }\n\n \n @Override\n public byte[] serialize(T object) throws SerializationException {\n   try {\n     byte[] bytes = innerSerializer.serialize(object);\n     return Snappy.compress(bytes);\n   } catch (Exception e) {\n     throw new SerializationException(e.getMessage(), e);\n   }\n }\n\n\n @SuppressWarnings(&quot;unchecked&quot;)\n @Override\n public T deserialize(byte[] bytes) throws SerializationException {\n   try {\n     if (bytes == null) {\n       return null;\n     }\n     byte[] bos = Snappy.uncompress(bytes);\n     return innerSerializer.deserialize(bos);\n   } catch (Exception e) {\n     LOGGER.warn(&quot;Could not deserialize object, falling back to legacy&quot;, e);\n     if (legacySerializer == null) {\n       throw new SerializationException(e.getMessage(), e);\n     }\n     return (T) legacySerializer.deserialize(bytes);\n   }\n }\n}\n</code></pre>\n<pre><code>public class FstRedisSerializer&lt;T&gt; implements RedisSerializer&lt;T&gt; {\n\n  static ThreadLocal&lt;FSTConfiguration&gt; conf =\n      ThreadLocal.withInitial(FSTConfiguration::createDefaultConfiguration);\n\n\n  @Override\n  public byte[] serialize(T t) throws SerializationException {\n    FSTConfiguration fst = conf.get();\n    return fst.asByteArray(t);\n  }\n\n \n  @SuppressWarnings(&quot;unchecked&quot;)\n  @Override\n  public T deserialize(byte[] bytes) throws SerializationException {\n    FSTConfiguration fst = conf.get();\n    return (T) fst.asObject(bytes);\n  }\n}\n</code></pre>\n<p>Note: From <code>ModuleA</code> , I can get the data using</p>\n<pre><code>CacheData toGet = keyToValueOperations.get('key);\n</code></pre>\n<p>Any help?</p>\n"},{"tags":["java","cjk","chinese-locale","chinese-simplified","chinese-traditional"],"comments":[{"owner":{"account_id":6651855,"reputation":224830,"user_id":5133585,"accept_rate":96,"display_name":"Sweeper"},"score":0,"creation_date":1691562995,"post_id":76865043,"comment_id":135506718,"body_markdown":"[Possible duplicate](https://stackoverflow.com/q/4596576/5133585)","body":"<a href=\"https://stackoverflow.com/q/4596576/5133585\">Possible duplicate</a>"},{"owner":{"account_id":64856,"reputation":29696,"user_id":191246,"accept_rate":77,"display_name":"ccpizza"},"score":0,"creation_date":1691567280,"post_id":76865043,"comment_id":135507475,"body_markdown":"@Sweeper: I have looked at all duplicates before posting; they don&#39;t contain a straightforward answer, but rather &#39;look them up in the unihan table&#39;.. this question is how to achieve it with a regex using a character class with specific known ranges","body":"@Sweeper: I have looked at all duplicates before posting; they don&#39;t contain a straightforward answer, but rather &#39;look them up in the unihan table&#39;.. this question is how to achieve it with a regex using a character class with specific known ranges"},{"owner":{"account_id":6651855,"reputation":224830,"user_id":5133585,"accept_rate":96,"display_name":"Sweeper"},"score":1,"creation_date":1691567728,"post_id":76865043,"comment_id":135507579,"body_markdown":"Well there is no straightforward answer. Finding the list of simplified characters is a necessary and sufficient step to finding the ranges that contain simplified characters, isn&#39;t it? Once you find the ranges, you basically found the whole list. Once you find the list, you also know which ranges they are in.","body":"Well there is no straightforward answer. Finding the list of simplified characters is a necessary and sufficient step to finding the ranges that contain simplified characters, isn&#39;t it? Once you find the ranges, you basically found the whole list. Once you find the list, you also know which ranges they are in."}],"answers":[{"tags":[],"owner":{"account_id":18302390,"reputation":28,"user_id":13326891,"display_name":"M. Usman"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691568616,"creation_date":1691568616,"answer_id":76865780,"question_id":76865043,"body_markdown":"    public class ChineseCharacterDetector {\r\n        public static boolean containsSimplifiedChinese(String input) {\r\n            for (char c : input.toCharArray()) {\r\n                if (isSimplifiedChinese(c)) {\r\n                    return true;\r\n                }\r\n            }\r\n            return false;\r\n        }\r\n    \r\n        public static boolean containsTraditionalChinese(String input) {\r\n            for (char c : input.toCharArray()) {\r\n                if (isTraditionalChinese(c)) {\r\n                    return true;\r\n                }\r\n            }\r\n            return false;\r\n        }\r\n    \r\n        private static boolean isSimplifiedChinese(char c) {\r\n            // Common simplified Chinese character range\r\n            return (c &gt;= &#39;\\u4E00&#39; &amp;&amp; c &lt;= &#39;\\u9FFF&#39;);\r\n        }\r\n    \r\n        private static boolean isTraditionalChinese(char c) {\r\n            // Common traditional Chinese character ranges\r\n            return (c &gt;= &#39;\\u4E00&#39; &amp;&amp; c &lt;= &#39;\\u9FFF&#39;) || // Common characters\r\n                   (c &gt;= &#39;\\u3400&#39; &amp;&amp; c &lt;= &#39;\\u4DBF&#39;) || // Extended-A\r\n                   (c &gt;= &#39;\\u20000&#39; &amp;&amp; c &lt;= &#39;\\u2A6DF&#39;); // Extended-B\r\n        }\r\n    \r\n        public static void main(String[] args) {\r\n            String input = &quot;你好，世界！Hello, 世界！&quot;;\r\n            \r\n            if (containsSimplifiedChinese(input)) {\r\n                System.out.println(&quot;Contains Simplified Chinese characters&quot;);\r\n            } else if (containsTraditionalChinese(input)) {\r\n                System.out.println(&quot;Contains Traditional Chinese characters&quot;);\r\n            } else {\r\n                System.out.println(&quot;Contains neither Simplified nor Traditional Chinese characters&quot;);\r\n            }\r\n        }\r\n    }\r\n\r\nThe isSimplifiedChinese function takes into account characters from the common Simplified Chinese range, whereas the isTraditionalChinese function takes into account characters from the typical Traditional Chinese ranges, as well as certain expanded ranges. The functions containsSimplifiedChinese and containsTraditionalChinese iterate through the input text, looking for characters in the specified ranges.","title":"How to detect if Chinese text contains simplified or traditional characters?","body":"<pre><code>public class ChineseCharacterDetector {\n    public static boolean containsSimplifiedChinese(String input) {\n        for (char c : input.toCharArray()) {\n            if (isSimplifiedChinese(c)) {\n                return true;\n            }\n        }\n        return false;\n    }\n\n    public static boolean containsTraditionalChinese(String input) {\n        for (char c : input.toCharArray()) {\n            if (isTraditionalChinese(c)) {\n                return true;\n            }\n        }\n        return false;\n    }\n\n    private static boolean isSimplifiedChinese(char c) {\n        // Common simplified Chinese character range\n        return (c &gt;= '\\u4E00' &amp;&amp; c &lt;= '\\u9FFF');\n    }\n\n    private static boolean isTraditionalChinese(char c) {\n        // Common traditional Chinese character ranges\n        return (c &gt;= '\\u4E00' &amp;&amp; c &lt;= '\\u9FFF') || // Common characters\n               (c &gt;= '\\u3400' &amp;&amp; c &lt;= '\\u4DBF') || // Extended-A\n               (c &gt;= '\\u20000' &amp;&amp; c &lt;= '\\u2A6DF'); // Extended-B\n    }\n\n    public static void main(String[] args) {\n        String input = &quot;你好，世界！Hello, 世界！&quot;;\n        \n        if (containsSimplifiedChinese(input)) {\n            System.out.println(&quot;Contains Simplified Chinese characters&quot;);\n        } else if (containsTraditionalChinese(input)) {\n            System.out.println(&quot;Contains Traditional Chinese characters&quot;);\n        } else {\n            System.out.println(&quot;Contains neither Simplified nor Traditional Chinese characters&quot;);\n        }\n    }\n}\n</code></pre>\n<p>The isSimplifiedChinese function takes into account characters from the common Simplified Chinese range, whereas the isTraditionalChinese function takes into account characters from the typical Traditional Chinese ranges, as well as certain expanded ranges. The functions containsSimplifiedChinese and containsTraditionalChinese iterate through the input text, looking for characters in the specified ranges.</p>\n"}],"owner":{"account_id":64856,"reputation":29696,"user_id":191246,"accept_rate":77,"display_name":"ccpizza"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":265,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"closed_date":1691567746,"answer_count":1,"score":-1,"last_activity_date":1691607866,"creation_date":1691561828,"question_id":76865043,"body_markdown":"What would be a reliable way in Java to detect if a Chinese Unicode string contains Chinese simplified characters or traditional characters? The assumption is that characters that are common for both simplified and traditional ranges would be treated as simplified by default.\r\n\r\nIdeally would be checking for a regex match by specific Unicode character ranges. Are these ranges documented and defined, and would this approach be reliable?\r\n\r\n###### Update\r\nRelated questions:\r\n- https://stackoverflow.com/questions/1366068/whats-the-complete-range-for-chinese-characters-in-unicode\r\n\r\n###### Summary\r\n- for detecting presence of Chinese characters (both simplified and traditional) a regex like `&quot;.*[\\\\u4E00-\\\\u9FA5]+.*&quot;` can be used\r\n- to further identify hanzi specifically as Traditional/Simplified the lists extracted from [cedict][1] can be used. The exclusive subsets with the common superset removed can be used to get the required differentiation as shown in the sample gist &lt;sup&gt;[*][2]&lt;/sup&gt;\r\n\r\n\r\n  [1]: https://github.com/tsroten/zhon/tree/main/src/zhon/cedict\r\n  [2]: https://gist.github.com/glowinthedark/4acc24b22ce0eb8050390f28a0a83002","title":"How to detect if Chinese text contains simplified or traditional characters?","body":"<p>What would be a reliable way in Java to detect if a Chinese Unicode string contains Chinese simplified characters or traditional characters? The assumption is that characters that are common for both simplified and traditional ranges would be treated as simplified by default.</p>\n<p>Ideally would be checking for a regex match by specific Unicode character ranges. Are these ranges documented and defined, and would this approach be reliable?</p>\n<h6>Update</h6>\n<p>Related questions:</p>\n<ul>\n<li><a href=\"https://stackoverflow.com/questions/1366068/whats-the-complete-range-for-chinese-characters-in-unicode\">What&#39;s the complete range for Chinese characters in Unicode?</a></li>\n</ul>\n<h6>Summary</h6>\n<ul>\n<li>for detecting presence of Chinese characters (both simplified and traditional) a regex like <code>&quot;.*[\\\\u4E00-\\\\u9FA5]+.*&quot;</code> can be used</li>\n<li>to further identify hanzi specifically as Traditional/Simplified the lists extracted from <a href=\"https://github.com/tsroten/zhon/tree/main/src/zhon/cedict\" rel=\"nofollow noreferrer\">cedict</a> can be used. The exclusive subsets with the common superset removed can be used to get the required differentiation as shown in the sample gist <sup><a href=\"https://gist.github.com/glowinthedark/4acc24b22ce0eb8050390f28a0a83002\" rel=\"nofollow noreferrer\">*</a></sup></li>\n</ul>\n"},{"tags":["java","spring","forms","thymeleaf"],"owner":{"account_id":2364090,"reputation":374,"user_id":2070165,"display_name":"Franco G"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":40,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1691607803,"creation_date":1688109677,"question_id":76586824,"body_markdown":"I am getting the following error from using Thymeleaf:\r\n\r\n```\r\nNeither BindingResult nor plain target object for bean name &#39;contactForm&#39; available as the request attribute\r\n```\r\n\r\nEvaluating this expression:\r\n\r\n```\r\n#fields.hasErrors(&#39;actualName&#39;) ? &#39;form-control is-invalid&#39; : &#39;form-control&#39;&quot; (template: &quot;fragments/general.html\r\n```\r\n\r\nThe error message seems improper since the code does actually bind the contact form:\r\n\r\n```\r\n  @GetMapping(value = {&quot;/&quot;, &quot;/home&quot;})\r\n  public String main(HttpServletRequest request, Model model) {\r\n    model.addAttribute(&quot;pageTitle&quot;, &quot;Home Page&quot;);\r\n    model.addAttribute(&quot;contactForm&quot;, new ContactForm());\r\n    setupVisitor(request, model);\r\n    return &quot;index&quot;;\r\n  }\r\n```\r\n\r\nTwo strange things:\r\n\r\n1. It only happens in production when the application (executable Jar) is **behind Apache2** (redirecting port 8080 to port 80). By the way, this complicates things because debugging in production is difficult.\r\n\r\n2. Despite the error, the application works (but writes lot of text into the log file!)\r\n\r\nDoes anybody have a suggestion? Thanks in advance.\r\n\r\nHere is the log:\r\n\r\n```\r\norg.thymeleaf.exceptions.TemplateInputException: An error happened during template parsing (template: &quot;class path resource [templates/index.html]&quot;)\r\n\tat org.thymeleaf.templateparser.markup.AbstractMarkupTemplateParser.parse(AbstractMarkupTemplateParser.java:241) ~[thymeleaf-3.1.1.RELEASE.jar!/:3.1.1.RELEASE]\r\n\tat org.thymeleaf.templateparser.markup.AbstractMarkupTemplateParser.parseStandalone(AbstractMarkupTemplateParser.java:100) ~[thymeleaf-3.1.1.RELEASE.jar!/:3.1.1.RELEASE]\r\n\tat org.thymeleaf.engine.TemplateManager.parseAndProcess(TemplateManager.java:666) ~[thymeleaf-3.1.1.RELEASE.jar!/:3.1.1.RELEASE]\r\n\tat org.thymeleaf.TemplateEngine.process(TemplateEngine.java:1103) ~[thymeleaf-3.1.1.RELEASE.jar!/:3.1.1.RELEASE]\r\n\tat org.thymeleaf.TemplateEngine.process(TemplateEngine.java:1077) ~[thymeleaf-3.1.1.RELEASE.jar!/:3.1.1.RELEASE]\r\n\tat org.thymeleaf.spring6.view.ThymeleafView.renderFragment(ThymeleafView.java:372) ~[thymeleaf-spring6-3.1.1.RELEASE.jar!/:3.1.1.RELEASE]\r\n\tat org.thymeleaf.spring6.view.ThymeleafView.render(ThymeleafView.java:192) ~[thymeleaf-spring6-3.1.1.RELEASE.jar!/:3.1.1.RELEASE]\r\n\tat org.springframework.web.servlet.DispatcherServlet.render(DispatcherServlet.java:1415) ~[spring-webmvc-6.0.8.jar!/:6.0.8]\r\n\tat org.springframework.web.servlet.DispatcherServlet.processDispatchResult(DispatcherServlet.java:1159) ~[spring-webmvc-6.0.8.jar!/:6.0.8]\r\n\tat org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1098) ~[spring-webmvc-6.0.8.jar!/:6.0.8]\r\n\tat org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:974) ~[spring-webmvc-6.0.8.jar!/:6.0.8]\r\n\tat org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1011) ~[spring-webmvc-6.0.8.jar!/:6.0.8]\r\n\tat org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:903) ~[spring-webmvc-6.0.8.jar!/:6.0.8]\r\n\tat jakarta.servlet.http.HttpServlet.service(HttpServlet.java:564) ~[tomcat-embed-core-10.1.8.jar!/:na]\r\n...\r\nCaused by: org.attoparser.ParseException: Exception evaluating SpringEL expression: &quot;#fields.hasErrors(&#39;actualName&#39;) ? &#39;form-control is-invalid&#39; : &#39;form-control&#39;&quot; (template: &quot;fragments/general.html&quot; - line 229, col 12)\r\n\tat org.attoparser.MarkupParser.parseDocument(MarkupParser.java:393) ~[attoparser-2.0.6.RELEASE.jar!/:2.0.6.RELEASE]\r\n\tat org.attoparser.MarkupParser.parse(MarkupParser.java:257) ~[attoparser-2.0.6.RELEASE.jar!/:2.0.6.RELEASE]\r\n\tat org.thymeleaf.templateparser.markup.AbstractMarkupTemplateParser.parse(AbstractMarkupTemplateParser.java:230) ~[thymeleaf-3.1.1.RELEASE.jar!/:3.1.1.RELEASE]\r\n\t... 48 common frames omitted\r\nCaused by: org.thymeleaf.exceptions.TemplateProcessingException: Exception evaluating SpringEL expression: &quot;#fields.hasErrors(&#39;actualName&#39;) ? &#39;form-control is-invalid&#39; : &#39;form-control&#39;&quot; (template: &quot;fragments/general.html&quot; - line 229, col 12)\r\n\tat org.thymeleaf.spring6.expression.SPELVariableExpressionEvaluator.evaluate(SPELVariableExpressionEvaluator.java:292) ~[thymeleaf-spring6-3.1.1.RELEASE.jar!/:3.1.1.RELEASE]\r\n\tat org.thymeleaf.standard.expression.VariableExpression.executeVariableExpression(VariableExpression.java:166) ~[thymeleaf-3.1.1.RELEASE.jar!/:3.1.1.RELEASE]\r\n\tat org.thymeleaf.standard.expression.SimpleExpression.executeSimple(SimpleExpression.java:66) ~[thymeleaf-3.1.1.RELEASE.jar!/:3.1.1.RELEASE]\r\n\tat org.thymeleaf.standard.expression.Expression.execute(Expression.java:109) ~[thymeleaf-3.1.1.RELEASE.jar!/:3.1.1.RELEASE]\r\n\tat org.thymeleaf.standard.expression.Expression.execute(Expression.java:138) ~[thymeleaf-3.1.1.RELEASE.jar!/:3.1.1.RELEASE]\r\n\tat org.thymeleaf.standard.processor.AbstractStandardExpressionAttributeTagProcessor.doProcess(AbstractStandardExpressionAttributeTagProcessor.java:144) ~[thymeleaf-3.1.1.RELEASE.jar!/:3.1.1.RELEASE]\r\n\tat org.thymeleaf.processor.element.AbstractAttributeTagProcessor.doProcess(AbstractAttributeTagProcessor.java:74) ~[thymeleaf-3.1.1.RELEASE.jar!/:3.1.1.RELEASE]\r\n\tat org.thymeleaf.processor.element.AbstractElementTagProcessor.process(AbstractElementTagProcessor.java:95) ~[thymeleaf-3.1.1.RELEASE.jar!/:3.1.1.RELEASE]\r\n\tat org.thymeleaf.util.ProcessorConfigurationUtils$ElementTagProcessorWrapper.process(ProcessorConfigurationUtils.java:633) ~[thymeleaf-3.1.1.RELEASE.jar!/:3.1.1.RELEASE]\r\n\tat org.thymeleaf.engine.ProcessorTemplateHandler.handleStandaloneElement(ProcessorTemplateHandler.java:918) ~[thymeleaf-3.1.1.RELEASE.jar!/:3.1.1.RELEASE]\r\n\tat org.thymeleaf.engine.StandaloneElementTag.beHandled(StandaloneElementTag.java:228) ~[thymeleaf-3.1.1.RELEASE.jar!/:3.1.1.RELEASE]\r\n\tat org.thymeleaf.engine.Model.process(Model.java:282) ~[thymeleaf-3.1.1.RELEASE.jar!/:3.1.1.RELEASE]\r\n...\r\nCaused by: java.lang.IllegalStateException: Neither BindingResult nor plain target object for bean name &#39;contactForm&#39; available as request attribute\r\n\tat org.springframework.web.servlet.support.BindStatus.&lt;init&gt;(BindStatus.java:153) ~[spring-webmvc-6.0.8.jar!/:6.0.8]\r\n\tat org.springframework.web.servlet.support.RequestContext.getBindStatus(RequestContext.java:926) ~[spring-webmvc-6.0.8.jar!/:6.0.8]\r\n\tat org.thymeleaf.spring6.context.webmvc.SpringWebMvcThymeleafRequestContext.getBindStatus(SpringWebMvcThymeleafRequestContext.java:232) ~[thymeleaf-spring6-3.1.1.RELEASE.jar!/:3.1.1.RELEASE]\r\n\tat org.thymeleaf.spring6.util.FieldUtils.getBindStatusFromParsedExpression(FieldUtils.java:306) ~[thymeleaf-spring6-3.1.1.RELEASE.jar!/:3.1.1.RELEASE]\r\n\tat org.thymeleaf.spring6.util.FieldUtils.getBindStatus(FieldUtils.java:253) ~[thymeleaf-spring6-3.1.1.RELEASE.jar!/:3.1.1.RELEASE]\r\n\tat org.thymeleaf.spring6.util.FieldUtils.getBindStatus(FieldUtils.java:227) ~[thymeleaf-spring6-3.1.1.RELEASE.jar!/:3.1.1.RELEASE]\r\n\tat org.thymeleaf.spring6.util.FieldUtils.checkErrors(FieldUtils.java:212) ~[thymeleaf-spring6-3.1.1.RELEASE.jar!/:3.1.1.RELEASE]\r\n\tat org.thymeleaf.spring6.util.FieldUtils.hasErrors(FieldUtils.java:71) ~[thymeleaf-spring6-3.1.1.RELEASE.jar!/:3.1.1.RELEASE]\r\n\tat org.thymeleaf.spring6.expression.Fields.hasErrors(Fields.java:58) ~[thymeleaf-spring6-3.1.1.RELEASE.jar!/:3.1.1.RELEASE]\r\n\t\r\n\t\r\n\r\n```","title":"Neither BindingResult nor plain target from Thymeleaf despite bound to model","body":"<p>I am getting the following error from using Thymeleaf:</p>\n<pre><code>Neither BindingResult nor plain target object for bean name 'contactForm' available as the request attribute\n</code></pre>\n<p>Evaluating this expression:</p>\n<pre><code>#fields.hasErrors('actualName') ? 'form-control is-invalid' : 'form-control'&quot; (template: &quot;fragments/general.html\n</code></pre>\n<p>The error message seems improper since the code does actually bind the contact form:</p>\n<pre><code>  @GetMapping(value = {&quot;/&quot;, &quot;/home&quot;})\n  public String main(HttpServletRequest request, Model model) {\n    model.addAttribute(&quot;pageTitle&quot;, &quot;Home Page&quot;);\n    model.addAttribute(&quot;contactForm&quot;, new ContactForm());\n    setupVisitor(request, model);\n    return &quot;index&quot;;\n  }\n</code></pre>\n<p>Two strange things:</p>\n<ol>\n<li><p>It only happens in production when the application (executable Jar) is <strong>behind Apache2</strong> (redirecting port 8080 to port 80). By the way, this complicates things because debugging in production is difficult.</p>\n</li>\n<li><p>Despite the error, the application works (but writes lot of text into the log file!)</p>\n</li>\n</ol>\n<p>Does anybody have a suggestion? Thanks in advance.</p>\n<p>Here is the log:</p>\n<pre><code>org.thymeleaf.exceptions.TemplateInputException: An error happened during template parsing (template: &quot;class path resource [templates/index.html]&quot;)\n    at org.thymeleaf.templateparser.markup.AbstractMarkupTemplateParser.parse(AbstractMarkupTemplateParser.java:241) ~[thymeleaf-3.1.1.RELEASE.jar!/:3.1.1.RELEASE]\n    at org.thymeleaf.templateparser.markup.AbstractMarkupTemplateParser.parseStandalone(AbstractMarkupTemplateParser.java:100) ~[thymeleaf-3.1.1.RELEASE.jar!/:3.1.1.RELEASE]\n    at org.thymeleaf.engine.TemplateManager.parseAndProcess(TemplateManager.java:666) ~[thymeleaf-3.1.1.RELEASE.jar!/:3.1.1.RELEASE]\n    at org.thymeleaf.TemplateEngine.process(TemplateEngine.java:1103) ~[thymeleaf-3.1.1.RELEASE.jar!/:3.1.1.RELEASE]\n    at org.thymeleaf.TemplateEngine.process(TemplateEngine.java:1077) ~[thymeleaf-3.1.1.RELEASE.jar!/:3.1.1.RELEASE]\n    at org.thymeleaf.spring6.view.ThymeleafView.renderFragment(ThymeleafView.java:372) ~[thymeleaf-spring6-3.1.1.RELEASE.jar!/:3.1.1.RELEASE]\n    at org.thymeleaf.spring6.view.ThymeleafView.render(ThymeleafView.java:192) ~[thymeleaf-spring6-3.1.1.RELEASE.jar!/:3.1.1.RELEASE]\n    at org.springframework.web.servlet.DispatcherServlet.render(DispatcherServlet.java:1415) ~[spring-webmvc-6.0.8.jar!/:6.0.8]\n    at org.springframework.web.servlet.DispatcherServlet.processDispatchResult(DispatcherServlet.java:1159) ~[spring-webmvc-6.0.8.jar!/:6.0.8]\n    at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1098) ~[spring-webmvc-6.0.8.jar!/:6.0.8]\n    at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:974) ~[spring-webmvc-6.0.8.jar!/:6.0.8]\n    at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1011) ~[spring-webmvc-6.0.8.jar!/:6.0.8]\n    at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:903) ~[spring-webmvc-6.0.8.jar!/:6.0.8]\n    at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:564) ~[tomcat-embed-core-10.1.8.jar!/:na]\n...\nCaused by: org.attoparser.ParseException: Exception evaluating SpringEL expression: &quot;#fields.hasErrors('actualName') ? 'form-control is-invalid' : 'form-control'&quot; (template: &quot;fragments/general.html&quot; - line 229, col 12)\n    at org.attoparser.MarkupParser.parseDocument(MarkupParser.java:393) ~[attoparser-2.0.6.RELEASE.jar!/:2.0.6.RELEASE]\n    at org.attoparser.MarkupParser.parse(MarkupParser.java:257) ~[attoparser-2.0.6.RELEASE.jar!/:2.0.6.RELEASE]\n    at org.thymeleaf.templateparser.markup.AbstractMarkupTemplateParser.parse(AbstractMarkupTemplateParser.java:230) ~[thymeleaf-3.1.1.RELEASE.jar!/:3.1.1.RELEASE]\n    ... 48 common frames omitted\nCaused by: org.thymeleaf.exceptions.TemplateProcessingException: Exception evaluating SpringEL expression: &quot;#fields.hasErrors('actualName') ? 'form-control is-invalid' : 'form-control'&quot; (template: &quot;fragments/general.html&quot; - line 229, col 12)\n    at org.thymeleaf.spring6.expression.SPELVariableExpressionEvaluator.evaluate(SPELVariableExpressionEvaluator.java:292) ~[thymeleaf-spring6-3.1.1.RELEASE.jar!/:3.1.1.RELEASE]\n    at org.thymeleaf.standard.expression.VariableExpression.executeVariableExpression(VariableExpression.java:166) ~[thymeleaf-3.1.1.RELEASE.jar!/:3.1.1.RELEASE]\n    at org.thymeleaf.standard.expression.SimpleExpression.executeSimple(SimpleExpression.java:66) ~[thymeleaf-3.1.1.RELEASE.jar!/:3.1.1.RELEASE]\n    at org.thymeleaf.standard.expression.Expression.execute(Expression.java:109) ~[thymeleaf-3.1.1.RELEASE.jar!/:3.1.1.RELEASE]\n    at org.thymeleaf.standard.expression.Expression.execute(Expression.java:138) ~[thymeleaf-3.1.1.RELEASE.jar!/:3.1.1.RELEASE]\n    at org.thymeleaf.standard.processor.AbstractStandardExpressionAttributeTagProcessor.doProcess(AbstractStandardExpressionAttributeTagProcessor.java:144) ~[thymeleaf-3.1.1.RELEASE.jar!/:3.1.1.RELEASE]\n    at org.thymeleaf.processor.element.AbstractAttributeTagProcessor.doProcess(AbstractAttributeTagProcessor.java:74) ~[thymeleaf-3.1.1.RELEASE.jar!/:3.1.1.RELEASE]\n    at org.thymeleaf.processor.element.AbstractElementTagProcessor.process(AbstractElementTagProcessor.java:95) ~[thymeleaf-3.1.1.RELEASE.jar!/:3.1.1.RELEASE]\n    at org.thymeleaf.util.ProcessorConfigurationUtils$ElementTagProcessorWrapper.process(ProcessorConfigurationUtils.java:633) ~[thymeleaf-3.1.1.RELEASE.jar!/:3.1.1.RELEASE]\n    at org.thymeleaf.engine.ProcessorTemplateHandler.handleStandaloneElement(ProcessorTemplateHandler.java:918) ~[thymeleaf-3.1.1.RELEASE.jar!/:3.1.1.RELEASE]\n    at org.thymeleaf.engine.StandaloneElementTag.beHandled(StandaloneElementTag.java:228) ~[thymeleaf-3.1.1.RELEASE.jar!/:3.1.1.RELEASE]\n    at org.thymeleaf.engine.Model.process(Model.java:282) ~[thymeleaf-3.1.1.RELEASE.jar!/:3.1.1.RELEASE]\n...\nCaused by: java.lang.IllegalStateException: Neither BindingResult nor plain target object for bean name 'contactForm' available as request attribute\n    at org.springframework.web.servlet.support.BindStatus.&lt;init&gt;(BindStatus.java:153) ~[spring-webmvc-6.0.8.jar!/:6.0.8]\n    at org.springframework.web.servlet.support.RequestContext.getBindStatus(RequestContext.java:926) ~[spring-webmvc-6.0.8.jar!/:6.0.8]\n    at org.thymeleaf.spring6.context.webmvc.SpringWebMvcThymeleafRequestContext.getBindStatus(SpringWebMvcThymeleafRequestContext.java:232) ~[thymeleaf-spring6-3.1.1.RELEASE.jar!/:3.1.1.RELEASE]\n    at org.thymeleaf.spring6.util.FieldUtils.getBindStatusFromParsedExpression(FieldUtils.java:306) ~[thymeleaf-spring6-3.1.1.RELEASE.jar!/:3.1.1.RELEASE]\n    at org.thymeleaf.spring6.util.FieldUtils.getBindStatus(FieldUtils.java:253) ~[thymeleaf-spring6-3.1.1.RELEASE.jar!/:3.1.1.RELEASE]\n    at org.thymeleaf.spring6.util.FieldUtils.getBindStatus(FieldUtils.java:227) ~[thymeleaf-spring6-3.1.1.RELEASE.jar!/:3.1.1.RELEASE]\n    at org.thymeleaf.spring6.util.FieldUtils.checkErrors(FieldUtils.java:212) ~[thymeleaf-spring6-3.1.1.RELEASE.jar!/:3.1.1.RELEASE]\n    at org.thymeleaf.spring6.util.FieldUtils.hasErrors(FieldUtils.java:71) ~[thymeleaf-spring6-3.1.1.RELEASE.jar!/:3.1.1.RELEASE]\n    at org.thymeleaf.spring6.expression.Fields.hasErrors(Fields.java:58) ~[thymeleaf-spring6-3.1.1.RELEASE.jar!/:3.1.1.RELEASE]\n    \n    \n\n</code></pre>\n"},{"tags":["java","postgresql","dspace"],"comments":[{"owner":{"account_id":21830891,"reputation":1,"user_id":16125833,"display_name":"nitesh saini"},"score":0,"creation_date":1691655551,"post_id":76869291,"comment_id":135521650,"body_markdown":"Update: It was my fault. I was trying to run this command in the same repository bin file while I need to run this command in the new ant fresh installed repo bin file.","body":"Update: It was my fault. I was trying to run this command in the same repository bin file while I need to run this command in the new ant fresh installed repo bin file."}],"owner":{"account_id":21830891,"reputation":1,"user_id":16125833,"display_name":"nitesh saini"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":99,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1691607765,"creation_date":1691595282,"question_id":76869291,"body_markdown":"I am trying to install dspace in my window 10. And when I tried to run dspace database migrate after mvn package command, I got this error error: could not find or load main class org.dspace.app.launcher.scriptlauncher caused by: java.lang.classnotfoundexception: org.dspace.app.launcher.scriptlauncher.\r\n\r\n\r\nI checked all enviorment variables and my ant apache and solr is running good. Can it be a error from my postgresql database??\r\nCan anyone help with this.\r\n\r\n","title":"error: could not find or load main class org.dspace.app.launcher.scriptlauncher","body":"<p>I am trying to install dspace in my window 10. And when I tried to run dspace database migrate after mvn package command, I got this error error: could not find or load main class org.dspace.app.launcher.scriptlauncher caused by: java.lang.classnotfoundexception: org.dspace.app.launcher.scriptlauncher.</p>\n<p>I checked all enviorment variables and my ant apache and solr is running good. Can it be a error from my postgresql database??\nCan anyone help with this.</p>\n"},{"tags":["java","quarkus-panache","mutiny"],"owner":{"account_id":9432970,"reputation":435,"user_id":7015860,"accept_rate":14,"display_name":"Kyle Hobbs"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":202,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1691607637,"creation_date":1691607637,"question_id":76870567,"body_markdown":"I have an Example entity class that extends PanacheEntityBase. My goal is to get a stream or list of examples and then run updates on each one and persist those updates, then run another function that does some other stuff - I know this other function works and it takes in an id parameter and returns a `Uni&lt;Void&gt;`.\r\n\r\nA very similar function is working that takes an id, then uses Example.findById(id) to update a single Example record. However, I cannot figure out how to get this working with multiple records.\r\n\r\nHere is the code that *does* work for a single Example record, taking in the `id` as a parameter:\r\n\r\n```\r\nreturn Panache.withTransaction(() -&gt; Example.&lt;Example&gt;findById(id)\r\n    .onItem().ifNull().failWith(new NotFoundException(&quot;Example not found.&quot;))\r\n\t.onItem().transformToUni(example -&gt; {\r\n\t\texample.setState(&quot;new state&quot;);\r\n\t\texample.setStateChangedAt(Instant.now());\r\n\t\treturn example.&lt;Example&gt;persist();\r\n\t})\r\n\t.onItem().call(example -&gt; anotherService.anotherFunction(example.getId()))\r\n\t.onItem().ignore()\r\n\t.andContinueWithNull()\r\n);\r\n```\r\n\r\nSo for multiple records, I am trying a similar thing (it should run on every Example record where state=&quot;old state&quot;). \r\n\r\nRight now, after the `.transform(...).onItem()` it looks like it is working with a `Uni&lt;Example&gt;` where as in the above single-record code, at that point it is working with just an `Example` and I do not understand why.\r\n\r\n```\r\nreturn Panache.withTransaction(() -&gt; Example.&lt;Example&gt;stream(&quot;state&quot;, &quot;old state&quot;)\r\n    .onItem().transform(example -&gt; {\r\n\t    example.setState(&quot;new state&quot;);\r\n\t    example.setStateChangedAt(Instant.now());\r\n\t    return example.&lt;Example&gt;persist();\r\n    }).onItem().call(example -&gt; {\r\n\t    anotherService.anotherFunction(example.getId());\r\n    })\r\n    .onItem().ignore()\r\n    .andContinueWithNull()\r\n);\r\n```\r\n\r\nI have also looked into some options using `Example.list()` instead of `Example.stream()`, but I have been unable to get it working that why either. I have been struggling through all this Uni and Multi stuff and still do not have a super firm grasp on it. Please assist in getting that second update transaction working.","title":"How can I update multiple records and persist the changes using Hibernate Reactive w/ Panache and Mutiny","body":"<p>I have an Example entity class that extends PanacheEntityBase. My goal is to get a stream or list of examples and then run updates on each one and persist those updates, then run another function that does some other stuff - I know this other function works and it takes in an id parameter and returns a <code>Uni&lt;Void&gt;</code>.</p>\n<p>A very similar function is working that takes an id, then uses Example.findById(id) to update a single Example record. However, I cannot figure out how to get this working with multiple records.</p>\n<p>Here is the code that <em>does</em> work for a single Example record, taking in the <code>id</code> as a parameter:</p>\n<pre><code>return Panache.withTransaction(() -&gt; Example.&lt;Example&gt;findById(id)\n    .onItem().ifNull().failWith(new NotFoundException(&quot;Example not found.&quot;))\n    .onItem().transformToUni(example -&gt; {\n        example.setState(&quot;new state&quot;);\n        example.setStateChangedAt(Instant.now());\n        return example.&lt;Example&gt;persist();\n    })\n    .onItem().call(example -&gt; anotherService.anotherFunction(example.getId()))\n    .onItem().ignore()\n    .andContinueWithNull()\n);\n</code></pre>\n<p>So for multiple records, I am trying a similar thing (it should run on every Example record where state=&quot;old state&quot;).</p>\n<p>Right now, after the <code>.transform(...).onItem()</code> it looks like it is working with a <code>Uni&lt;Example&gt;</code> where as in the above single-record code, at that point it is working with just an <code>Example</code> and I do not understand why.</p>\n<pre><code>return Panache.withTransaction(() -&gt; Example.&lt;Example&gt;stream(&quot;state&quot;, &quot;old state&quot;)\n    .onItem().transform(example -&gt; {\n        example.setState(&quot;new state&quot;);\n        example.setStateChangedAt(Instant.now());\n        return example.&lt;Example&gt;persist();\n    }).onItem().call(example -&gt; {\n        anotherService.anotherFunction(example.getId());\n    })\n    .onItem().ignore()\n    .andContinueWithNull()\n);\n</code></pre>\n<p>I have also looked into some options using <code>Example.list()</code> instead of <code>Example.stream()</code>, but I have been unable to get it working that why either. I have been struggling through all this Uni and Multi stuff and still do not have a super firm grasp on it. Please assist in getting that second update transaction working.</p>\n"},{"tags":["java","angular","typescript","spring-boot"],"comments":[{"owner":{"account_id":4091849,"reputation":2860,"user_id":3359635,"accept_rate":60,"display_name":"mat.hudak"},"score":0,"creation_date":1691609844,"post_id":76870533,"comment_id":135516275,"body_markdown":"You should provide some code, what you&#39;ve already tried to do. Otherwise this question will likely get closed.","body":"You should provide some code, what you&#39;ve already tried to do. Otherwise this question will likely get closed."},{"owner":{"account_id":26845407,"reputation":19,"user_id":20431236,"display_name":"prabin chand"},"score":0,"creation_date":1691763674,"post_id":76870533,"comment_id":135540004,"body_markdown":"I haven&#39;t found any code, to try with. so i am here asking for help","body":"I haven&#39;t found any code, to try with. so i am here asking for help"},{"owner":{"account_id":16341513,"reputation":209,"user_id":11802330,"display_name":"Eric"},"score":0,"creation_date":1692338475,"post_id":76870533,"comment_id":135612046,"body_markdown":"You can try [this](https://stackoverflow.com/questions/76655712/how-to-receive-an-entity-with-image-from-requestparam/76677954#76677954) to upload using postman. Though OP was uploading using React, concept should be the same even for Angular","body":"You can try <a href=\"https://stackoverflow.com/questions/76655712/how-to-receive-an-entity-with-image-from-requestparam/76677954#76677954\">this</a> to upload using postman. Though OP was uploading using React, concept should be the same even for Angular"}],"owner":{"account_id":26845407,"reputation":19,"user_id":20431236,"display_name":"prabin chand"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":41,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1691607313,"creation_date":1691607313,"question_id":76870533,"body_markdown":"I&#39;m working on a project where I need to implement a feature that allows users to upload images using an Angular frontend. Let&#39;s say Person is my Entity , i have already created UI for taking user input including Image of person. \r\nHow to save image so that later on i can retrieve it from database and display in webpage using angular and spring boot ?\r\n\r\nI did some research but i was not able to get it. Is there anyone who can teach me to do so ?","title":"Uploading and Displaying Images in Angular with Spring Boot, and Retrieving from Database","body":"<p>I'm working on a project where I need to implement a feature that allows users to upload images using an Angular frontend. Let's say Person is my Entity , i have already created UI for taking user input including Image of person.\nHow to save image so that later on i can retrieve it from database and display in webpage using angular and spring boot ?</p>\n<p>I did some research but i was not able to get it. Is there anyone who can teach me to do so ?</p>\n"},{"tags":["java","godot","minecraft-forge","jvm-arguments"],"comments":[{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1691677353,"post_id":76870418,"comment_id":135526223,"body_markdown":"Please edit the question to limit it to a specific problem with enough detail to identify an adequate answer.","body":"Please edit the question to limit it to a specific problem with enough detail to identify an adequate answer."}],"owner":{"account_id":27004232,"reputation":1,"user_id":20564997,"display_name":"Berc Plays"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":131,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1691605982,"creation_date":1691605982,"question_id":76870418,"body_markdown":"I&#39;m making a minecraft launcher in godot 4 and for some reason, I get this error in the console. (I pasted the arguments directly from Process Explorer)\r\n\r\nI have tried searching for this problem but couldn&#39;t find any answers.\r\n\r\nI Tested it with these java versions:  jdk-16,jre-1.8 (I was trying to launch Minecraft 1.16.5 with forge)\r\n\r\nIf this answer is not clear enough or if you need some additional resources that I have not listed in my question then feel free to ask in the comments\r\n\r\nMinecraft Arguments\r\n```\r\nXX:HeapDumpPath=MojangTricksIntelDriversForPerformance_javaw.exe_minecraft.exe.heapdump &quot;-Dos.name=Windows 10&quot; -Dos.version=10.0 -Xss1M -Djava.library.path=C:\\Users\\&lt;user&gt;\\AppData\\Roaming\\.minecraft\\bin\\aa3ff1ab4ceab9fa81e22cec28be461e9bc33e34 -Dminecraft.launcher.brand=minecraft-launcher -Dminecraft.launcher.version=2.6.16 -cp C:\\Users\\&lt;user&gt;\\AppData\\Roaming\\.minecraft\\libraries\\net\\minecraftforge\\forge\\1.16.5-36.2.39\\forge-1.16.5-36.2.39.jar;C:\\Users\\&lt;user&gt;\\AppData\\Roaming\\.minecraft\\libraries\\org\\ow2\\asm\\asm\\9.1\\asm-9.1.jar;C:\\Users\\&lt;user&gt;\\AppData\\Roaming\\.minecraft\\libraries\\org\\ow2\\asm\\asm-commons\\9.1\\asm-commons-9.1.jar;C:\\Users\\&lt;user&gt;\\AppData\\Roaming\\.minecraft\\libraries\\org\\ow2\\asm\\asm-tree\\9.1\\asm-tree-9.1.jar;C:\\Users\\&lt;user&gt;\\AppData\\Roaming\\.minecraft\\libraries\\org\\ow2\\asm\\asm-util\\9.1\\asm-util-9.1.jar;C:\\Users\\&lt;user&gt;\\AppData\\Roaming\\.minecraft\\libraries\\org\\ow2\\asm\\asm-analysis\\9.1\\asm-analysis-9.1.jar;C:\\Users\\&lt;user&gt;\\AppData\\Roaming\\.minecraft\\libraries\\cpw\\mods\\modlauncher\\8.1.3\\modlauncher-8.1.3.jar;C:\\Users\\&lt;user&gt;\\AppData\\Roaming\\.minecraft\\libraries\\cpw\\mods\\grossjava9hacks\\1.3.3\\grossjava9hacks-1.3.3.jar;C:\\Users\\&lt;user&gt;\\AppData\\Roaming\\.minecraft\\libraries\\net\\minecraftforge\\accesstransformers\\3.0.1\\accesstransformers-3.0.1.jar;C:\\Users\\&lt;user&gt;\\AppData\\Roaming\\.minecraft\\libraries\\org\\antlr\\antlr4-runtime\\4.9.1\\antlr4-runtime-4.9.1.jar;C:\\Users\\&lt;user&gt;\\AppData\\Roaming\\.minecraft\\libraries\\net\\minecraftforge\\eventbus\\4.0.0\\eventbus-4.0.0.jar;C:\\Users\\&lt;user&gt;\\AppData\\Roaming\\.minecraft\\libraries\\net\\minecraftforge\\forgespi\\3.2.0\\forgespi-3.2.0.jar;C:\\Users\\&lt;user&gt;\\AppData\\Roaming\\.minecraft\\libraries\\net\\minecraftforge\\coremods\\4.0.6\\coremods-4.0.6.jar;C:\\Users\\&lt;user&gt;\\AppData\\Roaming\\.minecraft\\libraries\\net\\minecraftforge\\unsafe\\0.2.0\\unsafe-0.2.0.jar;C:\\Users\\&lt;user&gt;\\AppData\\Roaming\\.minecraft\\libraries\\com\\electronwill\\night-config\\core\\3.6.3\\core-3.6.3.jar;C:\\Users\\&lt;user&gt;\\AppData\\Roaming\\.minecraft\\libraries\\com\\electronwill\\night-config\\toml\\3.6.3\\toml-3.6.3.jar;C:\\Users\\&lt;user&gt;\\AppData\\Roaming\\.minecraft\\libraries\\org\\jline\\jline\\3.12.1\\jline-3.12.1.jar;C:\\Users\\&lt;user&gt;\\AppData\\Roaming\\.minecraft\\libraries\\org\\apache\\maven\\maven-artifact\\3.6.3\\maven-artifact-3.6.3.jar;C:\\Users\\&lt;user&gt;\\AppData\\Roaming\\.minecraft\\libraries\\net\\jodah\\typetools\\0.8.3\\typetools-0.8.3.jar;C:\\Users\\&lt;user&gt;\\AppData\\Roaming\\.minecraft\\libraries\\org\\apache\\logging\\log4j\\log4j-api\\2.15.0\\log4j-api-2.15.0.jar;C:\\Users\\&lt;user&gt;\\AppData\\Roaming\\.minecraft\\libraries\\org\\apache\\logging\\log4j\\log4j-core\\2.15.0\\log4j-core-2.15.0.jar;C:\\Users\\&lt;user&gt;\\AppData\\Roaming\\.minecraft\\libraries\\org\\apache\\logging\\log4j\\log4j-slf4j18-impl\\2.15.0\\log4j-slf4j18-impl-2.15.0.jar;C:\\Users\\&lt;user&gt;\\AppData\\Roaming\\.minecraft\\libraries\\net\\minecrell\\terminalconsoleappender\\1.2.0\\terminalconsoleappender-1.2.0.jar;C:\\Users\\&lt;user&gt;\\AppData\\Roaming\\.minecraft\\libraries\\net\\sf\\jopt-simple\\jopt-simple\\5.0.4\\jopt-simple-5.0.4.jar;C:\\Users\\&lt;user&gt;\\AppData\\Roaming\\.minecraft\\libraries\\org\\spongepowered\\mixin\\0.8.4\\mixin-0.8.4.jar;C:\\Users\\&lt;user&gt;\\AppData\\Roaming\\.minecraft\\libraries\\net\\minecraftforge\\nashorn-core-compat\\15.1.1.1\\nashorn-core-compat-15.1.1.1.jar;C:\\Users\\&lt;user&gt;\\AppData\\Roaming\\.minecraft\\libraries\\com\\mojang\\patchy\\1.3.9\\patchy-1.3.9.jar;C:\\Users\\&lt;user&gt;\\AppData\\Roaming\\.minecraft\\libraries\\oshi-project\\oshi-core\\1.1\\oshi-core-1.1.jar;C:\\Users\\&lt;user&gt;\\AppData\\Roaming\\.minecraft\\libraries\\net\\java\\dev\\jna\\jna\\4.4.0\\jna-4.4.0.jar;C:\\Users\\&lt;user&gt;\\AppData\\Roaming\\.minecraft\\libraries\\net\\java\\dev\\jna\\platform\\3.4.0\\platform-3.4.0.jar;C:\\Users\\&lt;user&gt;\\AppData\\Roaming\\.minecraft\\libraries\\com\\ibm\\icu\\icu4j\\66.1\\icu4j-66.1.jar;C:\\Users\\&lt;user&gt;\\AppData\\Roaming\\.minecraft\\libraries\\com\\mojang\\javabridge\\1.0.22\\javabridge-1.0.22.jar;C:\\Users\\&lt;user&gt;\\AppData\\Roaming\\.minecraft\\libraries\\io\\netty\\netty-all\\4.1.25.Final\\netty-all-4.1.25.Final.jar;C:\\Users\\&lt;user&gt;\\AppData\\Roaming\\.minecraft\\libraries\\com\\google\\guava\\guava\\21.0\\guava-21.0.jar;C:\\Users\\&lt;user&gt;\\AppData\\Roaming\\.minecraft\\libraries\\org\\apache\\commons\\commons-lang3\\3.5\\commons-lang3-3.5.jar;C:\\Users\\&lt;user&gt;\\AppData\\Roaming\\.minecraft\\libraries\\commons-io\\commons-io\\2.5\\commons-io-2.5.jar;C:\\Users\\&lt;user&gt;\\AppData\\Roaming\\.minecraft\\libraries\\commons-codec\\commons-codec\\1.10\\commons-codec-1.10.jar;C:\\Users\\&lt;user&gt;\\AppData\\Roaming\\.minecraft\\libraries\\net\\java\\jinput\\jinput\\2.0.5\\jinput-2.0.5.jar;C:\\Users\\&lt;user&gt;\\AppData\\Roaming\\.minecraft\\libraries\\net\\java\\jutils\\jutils\\1.0.0\\jutils-1.0.0.jar;C:\\Users\\&lt;user&gt;\\AppData\\Roaming\\.minecraft\\libraries\\com\\mojang\\brigadier\\1.0.17\\brigadier-1.0.17.jar;C:\\Users\\&lt;user&gt;\\AppData\\Roaming\\.minecraft\\libraries\\com\\mojang\\datafixerupper\\4.0.26\\datafixerupper-4.0.26.jar;C:\\Users\\&lt;user&gt;\\AppData\\Roaming\\.minecraft\\libraries\\com\\google\\code\\gson\\gson\\2.8.0\\gson-2.8.0.jar;C:\\Users\\&lt;user&gt;\\AppData\\Roaming\\.minecraft\\libraries\\com\\mojang\\authlib\\2.1.28\\authlib-2.1.28.jar;C:\\Users\\&lt;user&gt;\\AppData\\Roaming\\.minecraft\\libraries\\org\\apache\\commons\\commons-compress\\1.8.1\\commons-compress-1.8.1.jar;C:\\Users\\&lt;user&gt;\\AppData\\Roaming\\.minecraft\\libraries\\org\\apache\\httpcomponents\\httpclient\\4.3.3\\httpclient-4.3.3.jar;C:\\Users\\&lt;user&gt;\\AppData\\Roaming\\.minecraft\\libraries\\commons-logging\\commons-logging\\1.1.3\\commons-logging-1.1.3.jar;C:\\Users\\&lt;user&gt;\\AppData\\Roaming\\.minecraft\\libraries\\org\\apache\\httpcomponents\\httpcore\\4.3.2\\httpcore-4.3.2.jar;C:\\Users\\&lt;user&gt;\\AppData\\Roaming\\.minecraft\\libraries\\it\\unimi\\dsi\\fastutil\\8.2.1\\fastutil-8.2.1.jar;C:\\Users\\&lt;user&gt;\\AppData\\Roaming\\.minecraft\\libraries\\org\\lwjgl\\lwjgl\\3.2.2\\lwjgl-3.2.2.jar;C:\\Users\\&lt;user&gt;\\AppData\\Roaming\\.minecraft\\libraries\\org\\lwjgl\\lwjgl-jemalloc\\3.2.2\\lwjgl-jemalloc-3.2.2.jar;C:\\Users\\&lt;user&gt;\\AppData\\Roaming\\.minecraft\\libraries\\org\\lwjgl\\lwjgl-openal\\3.2.2\\lwjgl-openal-3.2.2.jar;C:\\Users\\&lt;user&gt;\\AppData\\Roaming\\.minecraft\\libraries\\org\\lwjgl\\lwjgl-opengl\\3.2.2\\lwjgl-opengl-3.2.2.jar;C:\\Users\\&lt;user&gt;\\AppData\\Roaming\\.minecraft\\libraries\\org\\lwjgl\\lwjgl-glfw\\3.2.2\\lwjgl-glfw-3.2.2.jar;C:\\Users\\&lt;user&gt;\\AppData\\Roaming\\.minecraft\\libraries\\org\\lwjgl\\lwjgl-stb\\3.2.2\\lwjgl-stb-3.2.2.jar;C:\\Users\\&lt;user&gt;\\AppData\\Roaming\\.minecraft\\libraries\\org\\lwjgl\\lwjgl-tinyfd\\3.2.2\\lwjgl-tinyfd-3.2.2.jar;C:\\Users\\&lt;user&gt;\\AppData\\Roaming\\.minecraft\\libraries\\com\\mojang\\text2speech\\1.11.3\\text2speech-1.11.3.jar;C:\\Users\\&lt;user&gt;\\AppData\\Roaming\\.minecraft\\versions\\1.16.5-forge-36.2.39\\1.16.5-forge-36.2.39.jar -XX:+IgnoreUnrecognizedVMOptions --add-exports=java.base/sun.security.util=ALL-UNNAMED --add-exports=jdk.naming.dns/com.sun.jndi.dns=java.naming --add-opens=java.base/java.util.jar=ALL-UNNAMED -Xmx2G -XX:+UnlockExperimentalVMOptions -XX:+UseG1GC -XX:G1NewSizePercent=20 -XX:G1ReservePercent=20 -XX:MaxGCPauseMillis=50 -XX:G1HeapRegionSize=32M cpw.mods.modlauncher.Launcher --username &lt;username&gt; --version 1.16.5-forge-36.2.39 --gameDir C:\\Users\\&lt;user&gt;\\AppData\\Roaming\\.minecraft --assetsDir C:\\Users\\&lt;user&gt;\\AppData\\Roaming\\.minecraft\\assets --assetIndex 1.16 --uuid &lt;uuid&gt; --accessToken &lt;token&gt; --userType msa --versionType release --launchTarget fmlclient --fml.forgeVersion 36.2.39 --fml.mcVersion 1.16.5 --fml.forgeGroup net.minecraftforge --fml.mcpVersion 20210115.111550\r\n```\r\n\r\n\r\nI pasted the arguments in the code and expected it to run with no errors but I got an error.\r\nError: Could not find or load main class  -Dminecraft.launcher.version=2.6.16 \r\nCaused by: java.lang.ClassNotFoundException:  -Dminecraft.launcher.version=2.6.16","title":"Minecraft Could not find or load main class -Dminecraft.launcher.version=2.6.16","body":"<p>I'm making a minecraft launcher in godot 4 and for some reason, I get this error in the console. (I pasted the arguments directly from Process Explorer)</p>\n<p>I have tried searching for this problem but couldn't find any answers.</p>\n<p>I Tested it with these java versions:  jdk-16,jre-1.8 (I was trying to launch Minecraft 1.16.5 with forge)</p>\n<p>If this answer is not clear enough or if you need some additional resources that I have not listed in my question then feel free to ask in the comments</p>\n<p>Minecraft Arguments</p>\n<pre><code>XX:HeapDumpPath=MojangTricksIntelDriversForPerformance_javaw.exe_minecraft.exe.heapdump &quot;-Dos.name=Windows 10&quot; -Dos.version=10.0 -Xss1M -Djava.library.path=C:\\Users\\&lt;user&gt;\\AppData\\Roaming\\.minecraft\\bin\\aa3ff1ab4ceab9fa81e22cec28be461e9bc33e34 -Dminecraft.launcher.brand=minecraft-launcher -Dminecraft.launcher.version=2.6.16 -cp C:\\Users\\&lt;user&gt;\\AppData\\Roaming\\.minecraft\\libraries\\net\\minecraftforge\\forge\\1.16.5-36.2.39\\forge-1.16.5-36.2.39.jar;C:\\Users\\&lt;user&gt;\\AppData\\Roaming\\.minecraft\\libraries\\org\\ow2\\asm\\asm\\9.1\\asm-9.1.jar;C:\\Users\\&lt;user&gt;\\AppData\\Roaming\\.minecraft\\libraries\\org\\ow2\\asm\\asm-commons\\9.1\\asm-commons-9.1.jar;C:\\Users\\&lt;user&gt;\\AppData\\Roaming\\.minecraft\\libraries\\org\\ow2\\asm\\asm-tree\\9.1\\asm-tree-9.1.jar;C:\\Users\\&lt;user&gt;\\AppData\\Roaming\\.minecraft\\libraries\\org\\ow2\\asm\\asm-util\\9.1\\asm-util-9.1.jar;C:\\Users\\&lt;user&gt;\\AppData\\Roaming\\.minecraft\\libraries\\org\\ow2\\asm\\asm-analysis\\9.1\\asm-analysis-9.1.jar;C:\\Users\\&lt;user&gt;\\AppData\\Roaming\\.minecraft\\libraries\\cpw\\mods\\modlauncher\\8.1.3\\modlauncher-8.1.3.jar;C:\\Users\\&lt;user&gt;\\AppData\\Roaming\\.minecraft\\libraries\\cpw\\mods\\grossjava9hacks\\1.3.3\\grossjava9hacks-1.3.3.jar;C:\\Users\\&lt;user&gt;\\AppData\\Roaming\\.minecraft\\libraries\\net\\minecraftforge\\accesstransformers\\3.0.1\\accesstransformers-3.0.1.jar;C:\\Users\\&lt;user&gt;\\AppData\\Roaming\\.minecraft\\libraries\\org\\antlr\\antlr4-runtime\\4.9.1\\antlr4-runtime-4.9.1.jar;C:\\Users\\&lt;user&gt;\\AppData\\Roaming\\.minecraft\\libraries\\net\\minecraftforge\\eventbus\\4.0.0\\eventbus-4.0.0.jar;C:\\Users\\&lt;user&gt;\\AppData\\Roaming\\.minecraft\\libraries\\net\\minecraftforge\\forgespi\\3.2.0\\forgespi-3.2.0.jar;C:\\Users\\&lt;user&gt;\\AppData\\Roaming\\.minecraft\\libraries\\net\\minecraftforge\\coremods\\4.0.6\\coremods-4.0.6.jar;C:\\Users\\&lt;user&gt;\\AppData\\Roaming\\.minecraft\\libraries\\net\\minecraftforge\\unsafe\\0.2.0\\unsafe-0.2.0.jar;C:\\Users\\&lt;user&gt;\\AppData\\Roaming\\.minecraft\\libraries\\com\\electronwill\\night-config\\core\\3.6.3\\core-3.6.3.jar;C:\\Users\\&lt;user&gt;\\AppData\\Roaming\\.minecraft\\libraries\\com\\electronwill\\night-config\\toml\\3.6.3\\toml-3.6.3.jar;C:\\Users\\&lt;user&gt;\\AppData\\Roaming\\.minecraft\\libraries\\org\\jline\\jline\\3.12.1\\jline-3.12.1.jar;C:\\Users\\&lt;user&gt;\\AppData\\Roaming\\.minecraft\\libraries\\org\\apache\\maven\\maven-artifact\\3.6.3\\maven-artifact-3.6.3.jar;C:\\Users\\&lt;user&gt;\\AppData\\Roaming\\.minecraft\\libraries\\net\\jodah\\typetools\\0.8.3\\typetools-0.8.3.jar;C:\\Users\\&lt;user&gt;\\AppData\\Roaming\\.minecraft\\libraries\\org\\apache\\logging\\log4j\\log4j-api\\2.15.0\\log4j-api-2.15.0.jar;C:\\Users\\&lt;user&gt;\\AppData\\Roaming\\.minecraft\\libraries\\org\\apache\\logging\\log4j\\log4j-core\\2.15.0\\log4j-core-2.15.0.jar;C:\\Users\\&lt;user&gt;\\AppData\\Roaming\\.minecraft\\libraries\\org\\apache\\logging\\log4j\\log4j-slf4j18-impl\\2.15.0\\log4j-slf4j18-impl-2.15.0.jar;C:\\Users\\&lt;user&gt;\\AppData\\Roaming\\.minecraft\\libraries\\net\\minecrell\\terminalconsoleappender\\1.2.0\\terminalconsoleappender-1.2.0.jar;C:\\Users\\&lt;user&gt;\\AppData\\Roaming\\.minecraft\\libraries\\net\\sf\\jopt-simple\\jopt-simple\\5.0.4\\jopt-simple-5.0.4.jar;C:\\Users\\&lt;user&gt;\\AppData\\Roaming\\.minecraft\\libraries\\org\\spongepowered\\mixin\\0.8.4\\mixin-0.8.4.jar;C:\\Users\\&lt;user&gt;\\AppData\\Roaming\\.minecraft\\libraries\\net\\minecraftforge\\nashorn-core-compat\\15.1.1.1\\nashorn-core-compat-15.1.1.1.jar;C:\\Users\\&lt;user&gt;\\AppData\\Roaming\\.minecraft\\libraries\\com\\mojang\\patchy\\1.3.9\\patchy-1.3.9.jar;C:\\Users\\&lt;user&gt;\\AppData\\Roaming\\.minecraft\\libraries\\oshi-project\\oshi-core\\1.1\\oshi-core-1.1.jar;C:\\Users\\&lt;user&gt;\\AppData\\Roaming\\.minecraft\\libraries\\net\\java\\dev\\jna\\jna\\4.4.0\\jna-4.4.0.jar;C:\\Users\\&lt;user&gt;\\AppData\\Roaming\\.minecraft\\libraries\\net\\java\\dev\\jna\\platform\\3.4.0\\platform-3.4.0.jar;C:\\Users\\&lt;user&gt;\\AppData\\Roaming\\.minecraft\\libraries\\com\\ibm\\icu\\icu4j\\66.1\\icu4j-66.1.jar;C:\\Users\\&lt;user&gt;\\AppData\\Roaming\\.minecraft\\libraries\\com\\mojang\\javabridge\\1.0.22\\javabridge-1.0.22.jar;C:\\Users\\&lt;user&gt;\\AppData\\Roaming\\.minecraft\\libraries\\io\\netty\\netty-all\\4.1.25.Final\\netty-all-4.1.25.Final.jar;C:\\Users\\&lt;user&gt;\\AppData\\Roaming\\.minecraft\\libraries\\com\\google\\guava\\guava\\21.0\\guava-21.0.jar;C:\\Users\\&lt;user&gt;\\AppData\\Roaming\\.minecraft\\libraries\\org\\apache\\commons\\commons-lang3\\3.5\\commons-lang3-3.5.jar;C:\\Users\\&lt;user&gt;\\AppData\\Roaming\\.minecraft\\libraries\\commons-io\\commons-io\\2.5\\commons-io-2.5.jar;C:\\Users\\&lt;user&gt;\\AppData\\Roaming\\.minecraft\\libraries\\commons-codec\\commons-codec\\1.10\\commons-codec-1.10.jar;C:\\Users\\&lt;user&gt;\\AppData\\Roaming\\.minecraft\\libraries\\net\\java\\jinput\\jinput\\2.0.5\\jinput-2.0.5.jar;C:\\Users\\&lt;user&gt;\\AppData\\Roaming\\.minecraft\\libraries\\net\\java\\jutils\\jutils\\1.0.0\\jutils-1.0.0.jar;C:\\Users\\&lt;user&gt;\\AppData\\Roaming\\.minecraft\\libraries\\com\\mojang\\brigadier\\1.0.17\\brigadier-1.0.17.jar;C:\\Users\\&lt;user&gt;\\AppData\\Roaming\\.minecraft\\libraries\\com\\mojang\\datafixerupper\\4.0.26\\datafixerupper-4.0.26.jar;C:\\Users\\&lt;user&gt;\\AppData\\Roaming\\.minecraft\\libraries\\com\\google\\code\\gson\\gson\\2.8.0\\gson-2.8.0.jar;C:\\Users\\&lt;user&gt;\\AppData\\Roaming\\.minecraft\\libraries\\com\\mojang\\authlib\\2.1.28\\authlib-2.1.28.jar;C:\\Users\\&lt;user&gt;\\AppData\\Roaming\\.minecraft\\libraries\\org\\apache\\commons\\commons-compress\\1.8.1\\commons-compress-1.8.1.jar;C:\\Users\\&lt;user&gt;\\AppData\\Roaming\\.minecraft\\libraries\\org\\apache\\httpcomponents\\httpclient\\4.3.3\\httpclient-4.3.3.jar;C:\\Users\\&lt;user&gt;\\AppData\\Roaming\\.minecraft\\libraries\\commons-logging\\commons-logging\\1.1.3\\commons-logging-1.1.3.jar;C:\\Users\\&lt;user&gt;\\AppData\\Roaming\\.minecraft\\libraries\\org\\apache\\httpcomponents\\httpcore\\4.3.2\\httpcore-4.3.2.jar;C:\\Users\\&lt;user&gt;\\AppData\\Roaming\\.minecraft\\libraries\\it\\unimi\\dsi\\fastutil\\8.2.1\\fastutil-8.2.1.jar;C:\\Users\\&lt;user&gt;\\AppData\\Roaming\\.minecraft\\libraries\\org\\lwjgl\\lwjgl\\3.2.2\\lwjgl-3.2.2.jar;C:\\Users\\&lt;user&gt;\\AppData\\Roaming\\.minecraft\\libraries\\org\\lwjgl\\lwjgl-jemalloc\\3.2.2\\lwjgl-jemalloc-3.2.2.jar;C:\\Users\\&lt;user&gt;\\AppData\\Roaming\\.minecraft\\libraries\\org\\lwjgl\\lwjgl-openal\\3.2.2\\lwjgl-openal-3.2.2.jar;C:\\Users\\&lt;user&gt;\\AppData\\Roaming\\.minecraft\\libraries\\org\\lwjgl\\lwjgl-opengl\\3.2.2\\lwjgl-opengl-3.2.2.jar;C:\\Users\\&lt;user&gt;\\AppData\\Roaming\\.minecraft\\libraries\\org\\lwjgl\\lwjgl-glfw\\3.2.2\\lwjgl-glfw-3.2.2.jar;C:\\Users\\&lt;user&gt;\\AppData\\Roaming\\.minecraft\\libraries\\org\\lwjgl\\lwjgl-stb\\3.2.2\\lwjgl-stb-3.2.2.jar;C:\\Users\\&lt;user&gt;\\AppData\\Roaming\\.minecraft\\libraries\\org\\lwjgl\\lwjgl-tinyfd\\3.2.2\\lwjgl-tinyfd-3.2.2.jar;C:\\Users\\&lt;user&gt;\\AppData\\Roaming\\.minecraft\\libraries\\com\\mojang\\text2speech\\1.11.3\\text2speech-1.11.3.jar;C:\\Users\\&lt;user&gt;\\AppData\\Roaming\\.minecraft\\versions\\1.16.5-forge-36.2.39\\1.16.5-forge-36.2.39.jar -XX:+IgnoreUnrecognizedVMOptions --add-exports=java.base/sun.security.util=ALL-UNNAMED --add-exports=jdk.naming.dns/com.sun.jndi.dns=java.naming --add-opens=java.base/java.util.jar=ALL-UNNAMED -Xmx2G -XX:+UnlockExperimentalVMOptions -XX:+UseG1GC -XX:G1NewSizePercent=20 -XX:G1ReservePercent=20 -XX:MaxGCPauseMillis=50 -XX:G1HeapRegionSize=32M cpw.mods.modlauncher.Launcher --username &lt;username&gt; --version 1.16.5-forge-36.2.39 --gameDir C:\\Users\\&lt;user&gt;\\AppData\\Roaming\\.minecraft --assetsDir C:\\Users\\&lt;user&gt;\\AppData\\Roaming\\.minecraft\\assets --assetIndex 1.16 --uuid &lt;uuid&gt; --accessToken &lt;token&gt; --userType msa --versionType release --launchTarget fmlclient --fml.forgeVersion 36.2.39 --fml.mcVersion 1.16.5 --fml.forgeGroup net.minecraftforge --fml.mcpVersion 20210115.111550\n</code></pre>\n<p>I pasted the arguments in the code and expected it to run with no errors but I got an error.\nError: Could not find or load main class  -Dminecraft.launcher.version=2.6.16\nCaused by: java.lang.ClassNotFoundException:  -Dminecraft.launcher.version=2.6.16</p>\n"},{"tags":["java","apache-kafka","jackson","spring-kafka"],"comments":[{"owner":{"account_id":370719,"reputation":3053,"user_id":718849,"accept_rate":100,"display_name":"Jonck van der Kogel"},"score":0,"creation_date":1691579039,"post_id":76867051,"comment_id":135509884,"body_markdown":"Can you please share your application configuration? (particularly the spring.kafka.properties)","body":"Can you please share your application configuration? (particularly the spring.kafka.properties)"},{"owner":{"account_id":343146,"reputation":11083,"user_id":674669,"accept_rate":58,"display_name":"user674669"},"score":0,"creation_date":1691579772,"post_id":76867051,"comment_id":135510016,"body_markdown":"spring.kafka.producer.key-serializer=org.apache.kafka.common.serialization.StringSerializer\nspring.kafka.producer.value-serializer=org.springframework.kafka.support.serializer.JsonSerializer","body":"spring.kafka.producer.key-serializer=org.apache.kafka.common&zwnj;&#8203;.serialization.Strin&zwnj;&#8203;gSerializer spring.kafka.producer.value-serializer=org.springframework.k&zwnj;&#8203;afka.support.seriali&zwnj;&#8203;zer.JsonSerializer"}],"answers":[{"tags":[],"owner":{"account_id":2671330,"reputation":183376,"user_id":2308683,"accept_rate":90,"display_name":"OneCricketeer"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1691588011,"creation_date":1691588011,"answer_id":76868292,"question_id":76867051,"body_markdown":"As the error says, you&#39;ve defined a field `private Struct dataAfterWrite`, and Jackson doesn&#39;t know what to do with it. \r\n\r\nPerhaps you wanted a different type there? ","title":"Getting exception &quot;No serializer found for class org.apache.kafka.connect.data.Struct&quot; while sending message to kafka","body":"<p>As the error says, you've defined a field <code>private Struct dataAfterWrite</code>, and Jackson doesn't know what to do with it.</p>\n<p>Perhaps you wanted a different type there?</p>\n"},{"tags":[],"owner":{"account_id":343146,"reputation":11083,"user_id":674669,"accept_rate":58,"display_name":"user674669"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691605653,"creation_date":1691605653,"answer_id":76870393,"question_id":76867051,"body_markdown":"I got rid of the Struct from the EventsDTO POJO. The Struct class is not serializable as it has no public fields:\r\n\r\n```\r\npublic class Struct {\r\n\r\n    private final Schema schema;\r\n    private final Object[] values;\r\n\r\n   ...\r\n\r\n}\r\n\r\npublic class EventsDTO {\r\n    private String operation;\r\n}\r\n```\r\n\r\nNow, the exception doesn&#39;t occur.","title":"Getting exception &quot;No serializer found for class org.apache.kafka.connect.data.Struct&quot; while sending message to kafka","body":"<p>I got rid of the Struct from the EventsDTO POJO. The Struct class is not serializable as it has no public fields:</p>\n<pre><code>public class Struct {\n\n    private final Schema schema;\n    private final Object[] values;\n\n   ...\n\n}\n\npublic class EventsDTO {\n    private String operation;\n}\n</code></pre>\n<p>Now, the exception doesn't occur.</p>\n"}],"owner":{"account_id":343146,"reputation":11083,"user_id":674669,"accept_rate":58,"display_name":"user674669"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":107,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1691605653,"creation_date":1691578257,"question_id":76867051,"body_markdown":"Our code to serialize a POJO and send it as json to kafka is failing with the exception below.\r\n\r\nCode:\r\n\r\n```\r\n@lombok.Data\r\npublic class EventsDTO {\r\n    private Struct dataAfterWrite;\r\n    private String operation;\r\n}\r\n\r\n...\r\n\r\npublic void sendMessage(EventsDTO data) {\r\n    Message&lt;EventsDTO&gt; message = MessageBuilder\r\n            .withPayload(data)\r\n            .setHeader(KafkaHeaders.TOPIC, &quot;events-ingestion-topic&quot;)\r\n            .build();\r\n    kafkaTemplate.send(message);\r\n    log.info(&quot;message send to kafka topic {}&quot;, message);\r\n}\r\n\r\n```\r\n\r\napplication.properties has\r\n```\r\nspring.kafka.producer.key-serializer=org.apache.kafka.common.serialization.StringSerializer\r\nspring.kafka.producer.value-serializer=org.springframework.kafka.support.serializer.JsonSerializer\r\n```\r\n\r\n\r\nHere&#39;s the exception:\r\n```\r\n\r\norg.apache.kafka.common.errors.SerializationException: Can&#39;t serialize data [EventsDTO(dataAfterWrite=Struct{id=61713742,...,event_state=0}, operation=c)] for topic [events-ingestion-topic]\r\n\tat org.springframework.kafka.support.serializer.JsonSerializer.serialize(JsonSerializer.java:216)\r\n\tat org.springframework.kafka.support.serializer.JsonSerializer.serialize(JsonSerializer.java:203)\r\n\tat org.apache.kafka.clients.producer.KafkaProducer.doSend(KafkaProducer.java:1005)\r\n\tat org.apache.kafka.clients.producer.KafkaProducer.send(KafkaProducer.java:952)\r\n\tat org.springframework.kafka.core.DefaultKafkaProducerFactory$CloseSafeProducer.send(DefaultKafkaProducerFactory.java:1022)\r\n\tat org.springframework.kafka.core.KafkaTemplate.doSend(KafkaTemplate.java:752)\r\n\tat org.springframework.kafka.core.KafkaTemplate.observeSend(KafkaTemplate.java:723)\r\n\tat org.springframework.kafka.core.KafkaTemplate.send(KafkaTemplate.java:546)\r\n\tat com.events.debeziumconnectorservice.kafka.KafkaProducer.sendMessage(KafkaProducer.java:25)\r\n\tat com.events.debeziumconnectorservice.debezium.Listener.handleChangeEvent(Listener.java:62)\r\n\tat io.debezium.embedded.ConvertingEngineBuilder.lambda$notifying$0(ConvertingEngineBuilder.java:75)\r\n\tat io.debezium.embedded.EmbeddedEngine$1.handleBatch(EmbeddedEngine.java:518)\r\n\tat io.debezium.embedded.EmbeddedEngine.run(EmbeddedEngine.java:913)\r\n\tat io.debezium.embedded.ConvertingEngineBuilder$2.run(ConvertingEngineBuilder.java:195)\r\n\tat java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)\r\n\tat java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)\r\n\tat java.base/java.lang.Thread.run(Thread.java:833)\r\nCaused by: com.fasterxml.jackson.databind.exc.InvalidDefinitionException: No serializer found for class org.apache.kafka.connect.data.Struct and no properties discovered to create BeanSerializer (to avoid exception, disable SerializationFeature.FAIL_ON_EMPTY_BEANS) (through reference chain: com.events.debeziumconnectorservice.models.EventsDTO[&quot;dataAfterWrite&quot;])\r\n\tat com.fasterxml.jackson.databind.exc.InvalidDefinitionException.from(InvalidDefinitionException.java:77)\r\n\tat com.fasterxml.jackson.databind.SerializerProvider.reportBadDefinition(SerializerProvider.java:1306)\r\n\tat com.fasterxml.jackson.databind.DatabindContext.reportBadDefinition(DatabindContext.java:408)\r\n\tat com.fasterxml.jackson.databind.ser.impl.UnknownSerializer.failForEmpty(UnknownSerializer.java:53)\r\n\tat com.fasterxml.jackson.databind.ser.impl.UnknownSerializer.serialize(UnknownSerializer.java:30)\r\n\tat com.fasterxml.jackson.databind.ser.BeanPropertyWriter.serializeAsField(BeanPropertyWriter.java:733)\r\n\tat com.fasterxml.jackson.databind.ser.std.BeanSerializerBase.serializeFields(BeanSerializerBase.java:774)\r\n\tat com.fasterxml.jackson.databind.ser.BeanSerializer.serialize(BeanSerializer.java:178)\r\n\tat com.fasterxml.jackson.databind.ser.DefaultSerializerProvider._serialize(DefaultSerializerProvider.java:480)\r\n\tat com.fasterxml.jackson.databind.ser.DefaultSerializerProvider.serializeValue(DefaultSerializerProvider.java:319)\r\n\tat com.fasterxml.jackson.databind.ObjectWriter$Prefetch.serialize(ObjectWriter.java:1572)\r\n\tat com.fasterxml.jackson.databind.ObjectWriter._writeValueAndClose(ObjectWriter.java:1273)\r\n\tat com.fasterxml.jackson.databind.ObjectWriter.writeValueAsBytes(ObjectWriter.java:1163)\r\n\tat org.springframework.kafka.support.serializer.JsonSerializer.serialize(JsonSerializer.java:213)\r\n\t... 16 common frames omitted\r\n```\r\n\r\nUpdate:\r\n\r\nChanging\r\n\r\n```\r\npublic class EventsDTO {\r\n    private Struct dataAfterWrite;\r\n    private String operation;\r\n}\r\n```\r\n\r\nto\r\n\r\n```\r\n@Data\r\n@JsonInclude\r\npublic class EventsDTO {\r\n    public Struct dataAfterWrite;\r\n    public String operation;\r\n}\r\n``` \r\ndidn&#39;t help. Got same exception.\r\n\r\nThanks for reading.","title":"Getting exception &quot;No serializer found for class org.apache.kafka.connect.data.Struct&quot; while sending message to kafka","body":"<p>Our code to serialize a POJO and send it as json to kafka is failing with the exception below.</p>\n<p>Code:</p>\n<pre><code>@lombok.Data\npublic class EventsDTO {\n    private Struct dataAfterWrite;\n    private String operation;\n}\n\n...\n\npublic void sendMessage(EventsDTO data) {\n    Message&lt;EventsDTO&gt; message = MessageBuilder\n            .withPayload(data)\n            .setHeader(KafkaHeaders.TOPIC, &quot;events-ingestion-topic&quot;)\n            .build();\n    kafkaTemplate.send(message);\n    log.info(&quot;message send to kafka topic {}&quot;, message);\n}\n\n</code></pre>\n<p>application.properties has</p>\n<pre><code>spring.kafka.producer.key-serializer=org.apache.kafka.common.serialization.StringSerializer\nspring.kafka.producer.value-serializer=org.springframework.kafka.support.serializer.JsonSerializer\n</code></pre>\n<p>Here's the exception:</p>\n<pre><code>\norg.apache.kafka.common.errors.SerializationException: Can't serialize data [EventsDTO(dataAfterWrite=Struct{id=61713742,...,event_state=0}, operation=c)] for topic [events-ingestion-topic]\n    at org.springframework.kafka.support.serializer.JsonSerializer.serialize(JsonSerializer.java:216)\n    at org.springframework.kafka.support.serializer.JsonSerializer.serialize(JsonSerializer.java:203)\n    at org.apache.kafka.clients.producer.KafkaProducer.doSend(KafkaProducer.java:1005)\n    at org.apache.kafka.clients.producer.KafkaProducer.send(KafkaProducer.java:952)\n    at org.springframework.kafka.core.DefaultKafkaProducerFactory$CloseSafeProducer.send(DefaultKafkaProducerFactory.java:1022)\n    at org.springframework.kafka.core.KafkaTemplate.doSend(KafkaTemplate.java:752)\n    at org.springframework.kafka.core.KafkaTemplate.observeSend(KafkaTemplate.java:723)\n    at org.springframework.kafka.core.KafkaTemplate.send(KafkaTemplate.java:546)\n    at com.events.debeziumconnectorservice.kafka.KafkaProducer.sendMessage(KafkaProducer.java:25)\n    at com.events.debeziumconnectorservice.debezium.Listener.handleChangeEvent(Listener.java:62)\n    at io.debezium.embedded.ConvertingEngineBuilder.lambda$notifying$0(ConvertingEngineBuilder.java:75)\n    at io.debezium.embedded.EmbeddedEngine$1.handleBatch(EmbeddedEngine.java:518)\n    at io.debezium.embedded.EmbeddedEngine.run(EmbeddedEngine.java:913)\n    at io.debezium.embedded.ConvertingEngineBuilder$2.run(ConvertingEngineBuilder.java:195)\n    at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)\n    at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)\n    at java.base/java.lang.Thread.run(Thread.java:833)\nCaused by: com.fasterxml.jackson.databind.exc.InvalidDefinitionException: No serializer found for class org.apache.kafka.connect.data.Struct and no properties discovered to create BeanSerializer (to avoid exception, disable SerializationFeature.FAIL_ON_EMPTY_BEANS) (through reference chain: com.events.debeziumconnectorservice.models.EventsDTO[&quot;dataAfterWrite&quot;])\n    at com.fasterxml.jackson.databind.exc.InvalidDefinitionException.from(InvalidDefinitionException.java:77)\n    at com.fasterxml.jackson.databind.SerializerProvider.reportBadDefinition(SerializerProvider.java:1306)\n    at com.fasterxml.jackson.databind.DatabindContext.reportBadDefinition(DatabindContext.java:408)\n    at com.fasterxml.jackson.databind.ser.impl.UnknownSerializer.failForEmpty(UnknownSerializer.java:53)\n    at com.fasterxml.jackson.databind.ser.impl.UnknownSerializer.serialize(UnknownSerializer.java:30)\n    at com.fasterxml.jackson.databind.ser.BeanPropertyWriter.serializeAsField(BeanPropertyWriter.java:733)\n    at com.fasterxml.jackson.databind.ser.std.BeanSerializerBase.serializeFields(BeanSerializerBase.java:774)\n    at com.fasterxml.jackson.databind.ser.BeanSerializer.serialize(BeanSerializer.java:178)\n    at com.fasterxml.jackson.databind.ser.DefaultSerializerProvider._serialize(DefaultSerializerProvider.java:480)\n    at com.fasterxml.jackson.databind.ser.DefaultSerializerProvider.serializeValue(DefaultSerializerProvider.java:319)\n    at com.fasterxml.jackson.databind.ObjectWriter$Prefetch.serialize(ObjectWriter.java:1572)\n    at com.fasterxml.jackson.databind.ObjectWriter._writeValueAndClose(ObjectWriter.java:1273)\n    at com.fasterxml.jackson.databind.ObjectWriter.writeValueAsBytes(ObjectWriter.java:1163)\n    at org.springframework.kafka.support.serializer.JsonSerializer.serialize(JsonSerializer.java:213)\n    ... 16 common frames omitted\n</code></pre>\n<p>Update:</p>\n<p>Changing</p>\n<pre><code>public class EventsDTO {\n    private Struct dataAfterWrite;\n    private String operation;\n}\n</code></pre>\n<p>to</p>\n<pre><code>@Data\n@JsonInclude\npublic class EventsDTO {\n    public Struct dataAfterWrite;\n    public String operation;\n}\n</code></pre>\n<p>didn't help. Got same exception.</p>\n<p>Thanks for reading.</p>\n"},{"tags":["java","jpa","orm","entity","clone"],"comments":[{"owner":{"display_name":"user3973283"},"score":0,"creation_date":1536215477,"post_id":11625096,"comment_id":91344780,"body_markdown":"You have a copy constructor where you copy what field values you want. That is nothing at all to do with the JPA API. Basic Java.","body":"You have a copy constructor where you copy what field values you want. That is nothing at all to do with the JPA API. Basic Java."}],"answers":[{"tags":[],"owner":{"account_id":294406,"reputation":24602,"user_id":598289,"accept_rate":85,"display_name":"SJuan76"},"down_vote_count":0,"up_vote_count":69,"is_accepted":true,"score":69,"last_activity_date":1343110434,"creation_date":1343110434,"answer_id":11625136,"question_id":11625096,"body_markdown":"Use `EntityManager.detach`. It makes the bean no longer linked to the EntityManager. Then set the Id to the new Id (or null if automatic), change the fields that you need and persist.","title":"How to clone a JPA entity","body":"<p>Use <code>EntityManager.detach</code>. It makes the bean no longer linked to the EntityManager. Then set the Id to the new Id (or null if automatic), change the fields that you need and persist.</p>\n"},{"tags":[],"owner":{"account_id":408635,"reputation":1045,"user_id":779419,"display_name":"schieferstapel"},"down_vote_count":0,"up_vote_count":14,"is_accepted":false,"score":14,"last_activity_date":1401956602,"creation_date":1374237845,"answer_id":17746371,"question_id":11625096,"body_markdown":"When using EclipseLink, you can use the VERY handy CopyGroup-Feature:\r\n\r\nhttp://wiki.eclipse.org/EclipseLink/Examples/JPA/AttributeGroup#CopyGroup\r\n\r\nA big plus is that without much fiddling it properly clones private-owned relation-ships, too.\r\n\r\nThis is my code, cloning a Playlist with its private-owned @OneToMany-relationship is a matter of a few lines:\r\n\r\n\tpublic Playlist cloneEntity( EntityManager em ) {\r\n\t\tCopyGroup group = new CopyGroup();\r\n\t\tgroup.setShouldResetPrimaryKey( true );\r\n\t\tPlaylist copy = (Playlist)em.unwrap( JpaEntityManager.class ).copy( this, group );\r\n\t\treturn copy;\r\n\t}\r\n\r\nMake sure that you use persist() to save this new object, merge() does not work.","title":"How to clone a JPA entity","body":"<p>When using EclipseLink, you can use the VERY handy CopyGroup-Feature:</p>\n\n<p><a href=\"http://wiki.eclipse.org/EclipseLink/Examples/JPA/AttributeGroup#CopyGroup\">http://wiki.eclipse.org/EclipseLink/Examples/JPA/AttributeGroup#CopyGroup</a></p>\n\n<p>A big plus is that without much fiddling it properly clones private-owned relation-ships, too.</p>\n\n<p>This is my code, cloning a Playlist with its private-owned @OneToMany-relationship is a matter of a few lines:</p>\n\n<pre><code>public Playlist cloneEntity( EntityManager em ) {\n    CopyGroup group = new CopyGroup();\n    group.setShouldResetPrimaryKey( true );\n    Playlist copy = (Playlist)em.unwrap( JpaEntityManager.class ).copy( this, group );\n    return copy;\n}\n</code></pre>\n\n<p>Make sure that you use persist() to save this new object, merge() does not work.</p>\n"},{"tags":[],"owner":{"account_id":2486210,"reputation":41,"user_id":2164593,"display_name":"Bi30"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1455015539,"creation_date":1455009993,"answer_id":35288216,"question_id":11625096,"body_markdown":"I face the same problem today : I have an entity in database and I want to :\r\n&lt;ul&gt;\r\n&lt;li&gt; get it from database \r\n&lt;li&gt; change one of its attributes value\r\n&lt;li&gt; create a clone of it\r\n&lt;li&gt; modify just some few attributes of the clone\r\n&lt;li&gt; persist clone in database\r\n&lt;/ul&gt;\r\nI succeed in doing following steps :\r\n\r\n    @PersistenceContext(unitName = &quot;...&quot;)\r\n    private EntityManager entityManager;\r\n\r\n    public void findUpdateCloneAndModify(int myEntityId) {\r\n      // retrieve entity from database\r\n      MyEntity myEntity = entityManager.find(MyEntity.class, myEntityId);\r\n      // modify the entity\r\n      myEntity.setAnAttribute(newValue);\r\n      // update modification in database\r\n      myEntity = entityManager.merge(myEntity);\r\n      // detach entity to use it as a new entity (clone)\r\n      entityManager.detach(myEntity);\r\n      myEntity.setId(0);\r\n      // modify detached entity\r\n      myEntity.setAnotherAttribute(otherValue);\r\n      // persist modified clone in database\r\n      myEntity = entityManager.merge(myEntity);\r\n    }\r\n\r\n**Remark** : last step (clone persistence) does not work if I use &#39;persist&#39; instead of &#39;merge&#39;, even if I note in debug mode that clone id has been changed after &#39;persist&#39; command !&lt;br&gt;\r\n&lt;br&gt;\r\nThe problem I still face is that my first entity has not been modified before I detach it.\r\n","title":"How to clone a JPA entity","body":"<p>I face the same problem today : I have an entity in database and I want to :</p>\n\n<ul>\n<li> get it from database \n<li> change one of its attributes value\n<li> create a clone of it\n<li> modify just some few attributes of the clone\n<li> persist clone in database\n</ul>\n\n<p>I succeed in doing following steps :</p>\n\n<pre><code>@PersistenceContext(unitName = \"...\")\nprivate EntityManager entityManager;\n\npublic void findUpdateCloneAndModify(int myEntityId) {\n  // retrieve entity from database\n  MyEntity myEntity = entityManager.find(MyEntity.class, myEntityId);\n  // modify the entity\n  myEntity.setAnAttribute(newValue);\n  // update modification in database\n  myEntity = entityManager.merge(myEntity);\n  // detach entity to use it as a new entity (clone)\n  entityManager.detach(myEntity);\n  myEntity.setId(0);\n  // modify detached entity\n  myEntity.setAnotherAttribute(otherValue);\n  // persist modified clone in database\n  myEntity = entityManager.merge(myEntity);\n}\n</code></pre>\n\n<p><strong>Remark</strong> : last step (clone persistence) does not work if I use 'persist' instead of 'merge', even if I note in debug mode that clone id has been changed after 'persist' command !<br>\n<br>\nThe problem I still face is that my first entity has not been modified before I detach it.</p>\n"},{"tags":[],"owner":{"account_id":4369567,"reputation":131,"user_id":3564338,"display_name":"Amrita"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1483522112,"creation_date":1483522112,"answer_id":41460318,"question_id":11625096,"body_markdown":"You could use mapping frameworks like Orika. http://orika-mapper.github.io/orika-docs/\r\nOrika is a Java bean mapping framework that recursively copies data from one object to another. It is easy to configure and provides various flexibilities as well.&lt;/br&gt;\r\n\r\nHere is how I have used it in my project:&lt;/br&gt;\r\nadded a dependecy :&lt;br&gt;\r\n\r\n     &lt;dependency&gt;\r\n          &lt;groupId&gt;ma.glasnost.orika&lt;/groupId&gt;\r\n          &lt;artifactId&gt;orika-core&lt;/artifactId&gt;\r\n          &lt;version&gt;1.4.6&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n\r\n\r\nThen use it in the code as follows:&lt;br&gt;\r\n\r\n    MapperFactory mapperFactory = new DefaultMapperFactory.Builder().build();\r\n\tMapperFacade mapper=mapperFactory.getMapperFacade();\r\n\tUser mappedUser = mapper.map(oldUser, User.class);\r\n\r\nThis might help if you have many usecases where such kind of cloning is needed.","title":"How to clone a JPA entity","body":"<p>You could use mapping frameworks like Orika. <a href=\"http://orika-mapper.github.io/orika-docs/\" rel=\"nofollow noreferrer\">http://orika-mapper.github.io/orika-docs/</a>\nOrika is a Java bean mapping framework that recursively copies data from one object to another. It is easy to configure and provides various flexibilities as well.</p>\n\n<p>Here is how I have used it in my project:\nadded a dependecy :<br></p>\n\n<pre><code> &lt;dependency&gt;\n      &lt;groupId&gt;ma.glasnost.orika&lt;/groupId&gt;\n      &lt;artifactId&gt;orika-core&lt;/artifactId&gt;\n      &lt;version&gt;1.4.6&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n\n<p>Then use it in the code as follows:<br></p>\n\n<pre><code>MapperFactory mapperFactory = new DefaultMapperFactory.Builder().build();\nMapperFacade mapper=mapperFactory.getMapperFacade();\nUser mappedUser = mapper.map(oldUser, User.class);\n</code></pre>\n\n<p>This might help if you have many usecases where such kind of cloning is needed.</p>\n"},{"tags":[],"owner":{"account_id":4577177,"reputation":61,"user_id":3715337,"display_name":"vertho"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1541672372,"creation_date":1492586719,"answer_id":43489173,"question_id":11625096,"body_markdown":"As mentioned in the comments to the accepted answer, detatch will ignore unflushed changes to the managed entity.\r\nIf you are using spring you have another option which is to use `org.springframework.beans.BeanUtils`\r\n\r\nHere you have `BeanUtils.copyProperties(Object source, Object target)`. This will allow you to do a shallow copy without tampering with the entityManager.\r\n\r\n**Edit:**\r\nquote from api doc: &quot;this method is intended to perform a &quot;shallow copy&quot; of the properties and so complex properties (for example, nested ones) will not be copied.&quot; \r\n\r\n[This][1] blog post may inform you more about deep copying java objects.\r\n\r\n  [1]: https://www.javaworld.com/article/2077578/learn-java/java-tip-76--an-alternative-to-the-deep-copy-technique.html","title":"How to clone a JPA entity","body":"<p>As mentioned in the comments to the accepted answer, detatch will ignore unflushed changes to the managed entity.\nIf you are using spring you have another option which is to use <code>org.springframework.beans.BeanUtils</code></p>\n\n<p>Here you have <code>BeanUtils.copyProperties(Object source, Object target)</code>. This will allow you to do a shallow copy without tampering with the entityManager.</p>\n\n<p><strong>Edit:</strong>\nquote from api doc: \"this method is intended to perform a \"shallow copy\" of the properties and so complex properties (for example, nested ones) will not be copied.\" </p>\n\n<p><a href=\"https://www.javaworld.com/article/2077578/learn-java/java-tip-76--an-alternative-to-the-deep-copy-technique.html\" rel=\"nofollow noreferrer\">This</a> blog post may inform you more about deep copying java objects.</p>\n"},{"tags":[],"owner":{"account_id":1012936,"reputation":145168,"user_id":1025118,"accept_rate":100,"display_name":"Vlad Mihalcea"},"down_vote_count":0,"up_vote_count":20,"is_accepted":false,"score":20,"last_activity_date":1669968881,"creation_date":1536209967,"answer_id":52196792,"question_id":11625096,"body_markdown":"You are better off using a copy constructor and controlling exactly what attributes need to be cloned.\r\n\r\nSo, if you have a `Post` entity like this one:\r\n\r\n    @Entity(name = &quot;Post&quot;)\r\n    @Table(name = &quot;post&quot;)\r\n    public class Post {\r\n     \r\n        @Id\r\n        @GeneratedValue\r\n        private Long id;\r\n     \r\n        private String title;\r\n     \r\n        @OneToMany(\r\n            mappedBy = &quot;post&quot;,\r\n            cascade = CascadeType.ALL, \r\n            orphanRemoval = true\r\n        )\r\n        private List&lt;PostComment&gt; comments = new ArrayList&lt;&gt;();\r\n     \r\n        @OneToOne(\r\n            mappedBy = &quot;post&quot;,\r\n            cascade = CascadeType.ALL, \r\n            orphanRemoval = true, \r\n            fetch = FetchType.LAZY\r\n        )\r\n        private PostDetails details;\r\n     \r\n        @ManyToMany\r\n        @JoinTable(\r\n            name = &quot;post_tag&quot;,\r\n            joinColumns = @JoinColumn(\r\n                name = &quot;post_id&quot;\r\n            ),\r\n            inverseJoinColumns = @JoinColumn(\r\n                name = &quot;tag_id&quot;\r\n            )\r\n        )\r\n        private Set&lt;Tag&gt; tags = new HashSet&lt;&gt;();\r\n     \r\n        //Getters and setters omitted for brevity\r\n     \r\n        public void addComment(\r\n                PostComment comment) {\r\n            comments.add(comment);\r\n            comment.setPost(this);\r\n        }\r\n     \r\n        public void addDetails(\r\n                PostDetails details) {\r\n            this.details = details;\r\n            details.setPost(this);\r\n        }\r\n     \r\n        public void removeDetails() {\r\n            this.details.setPost(null);\r\n            this.details = null;\r\n        }\r\n    }\r\n\r\nIt does not make sense to clone the `comments` when duplicating a `Post` and using it as a template for a new one:\r\n\r\n    Post post = entityManager.createQuery(&quot;&quot;&quot;\r\n        select p\r\n        from Post p\r\n        join fetch p.details\r\n        join fetch p.tags\r\n        where p.title = :title\r\n    \t&quot;&quot;&quot;, Post.class)\r\n    .setParameter(\r\n        &quot;title&quot;, \r\n        &quot;High-Performance Java Persistence, 1st edition&quot;\r\n    )\r\n    .getSingleResult();\r\n     \r\n    Post postClone = new Post(post);\r\n    postClone.setTitle(\r\n        postClone.getTitle().replace(&quot;1st&quot;, &quot;2nd&quot;)\r\n    );\r\n    entityManager.persist(postClone);\r\n\r\nWhat you need to add to the `Post` entity is a [`copy constructor`][1]:\r\n\r\n    /**\r\n     * Needed by Hibernate when hydrating the entity \r\n     * from the JDBC ResultSet\r\n     */\r\n    private Post() {}\r\n     \r\n    public Post(Post post) {\r\n        this.title = post.title;\r\n     \r\n        addDetails(\r\n            new PostDetails(post.details)\r\n        );\r\n     \r\n        tags.addAll(post.getTags());\r\n    }\r\n\r\nThis is the best way to address the entity clone/duplication problem. Any other methods, which try to make this process completely automatic, miss the point that not all attributes are worth duplicating.\r\n\r\n  [1]: https://vladmihalcea.com/clone-duplicate-entity-jpa-hibernate/\r\n","title":"How to clone a JPA entity","body":"<p>You are better off using a copy constructor and controlling exactly what attributes need to be cloned.</p>\n<p>So, if you have a <code>Post</code> entity like this one:</p>\n<pre><code>@Entity(name = &quot;Post&quot;)\n@Table(name = &quot;post&quot;)\npublic class Post {\n \n    @Id\n    @GeneratedValue\n    private Long id;\n \n    private String title;\n \n    @OneToMany(\n        mappedBy = &quot;post&quot;,\n        cascade = CascadeType.ALL, \n        orphanRemoval = true\n    )\n    private List&lt;PostComment&gt; comments = new ArrayList&lt;&gt;();\n \n    @OneToOne(\n        mappedBy = &quot;post&quot;,\n        cascade = CascadeType.ALL, \n        orphanRemoval = true, \n        fetch = FetchType.LAZY\n    )\n    private PostDetails details;\n \n    @ManyToMany\n    @JoinTable(\n        name = &quot;post_tag&quot;,\n        joinColumns = @JoinColumn(\n            name = &quot;post_id&quot;\n        ),\n        inverseJoinColumns = @JoinColumn(\n            name = &quot;tag_id&quot;\n        )\n    )\n    private Set&lt;Tag&gt; tags = new HashSet&lt;&gt;();\n \n    //Getters and setters omitted for brevity\n \n    public void addComment(\n            PostComment comment) {\n        comments.add(comment);\n        comment.setPost(this);\n    }\n \n    public void addDetails(\n            PostDetails details) {\n        this.details = details;\n        details.setPost(this);\n    }\n \n    public void removeDetails() {\n        this.details.setPost(null);\n        this.details = null;\n    }\n}\n</code></pre>\n<p>It does not make sense to clone the <code>comments</code> when duplicating a <code>Post</code> and using it as a template for a new one:</p>\n<pre><code>Post post = entityManager.createQuery(&quot;&quot;&quot;\n    select p\n    from Post p\n    join fetch p.details\n    join fetch p.tags\n    where p.title = :title\n    &quot;&quot;&quot;, Post.class)\n.setParameter(\n    &quot;title&quot;, \n    &quot;High-Performance Java Persistence, 1st edition&quot;\n)\n.getSingleResult();\n \nPost postClone = new Post(post);\npostClone.setTitle(\n    postClone.getTitle().replace(&quot;1st&quot;, &quot;2nd&quot;)\n);\nentityManager.persist(postClone);\n</code></pre>\n<p>What you need to add to the <code>Post</code> entity is a <a href=\"https://vladmihalcea.com/clone-duplicate-entity-jpa-hibernate/\" rel=\"noreferrer\"><code>copy constructor</code></a>:</p>\n<pre><code>/**\n * Needed by Hibernate when hydrating the entity \n * from the JDBC ResultSet\n */\nprivate Post() {}\n \npublic Post(Post post) {\n    this.title = post.title;\n \n    addDetails(\n        new PostDetails(post.details)\n    );\n \n    tags.addAll(post.getTags());\n}\n</code></pre>\n<p>This is the best way to address the entity clone/duplication problem. Any other methods, which try to make this process completely automatic, miss the point that not all attributes are worth duplicating.</p>\n"},{"tags":[],"owner":{"account_id":5927594,"reputation":1227,"user_id":4663054,"display_name":"JanBrus"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1563526185,"creation_date":1563523951,"answer_id":57108222,"question_id":11625096,"body_markdown":"I just tried setting the id to null and it worked\r\n\r\n    address.setId(null);\r\n    address = addrRepo.save(address);\r\n\r\nsetting the id to null made it so it saved into a new record with new id since i have it automatically generated.","title":"How to clone a JPA entity","body":"<p>I just tried setting the id to null and it worked</p>\n\n<pre><code>address.setId(null);\naddress = addrRepo.save(address);\n</code></pre>\n\n<p>setting the id to null made it so it saved into a new record with new id since i have it automatically generated.</p>\n"},{"tags":[],"owner":{"account_id":8148643,"reputation":151,"user_id":6136489,"display_name":"Nicolas Mafra"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1572468073,"creation_date":1572467558,"answer_id":58633239,"question_id":11625096,"body_markdown":"ModelMapper lib can be used for this purpose.\r\n\r\n    public MyEntity clone(MyEntity myInstance) {\r\n        MyEntity newInstance = new MyEntity();\r\n        new ModelMapper().map(myInstance, newInstance);\r\n        return newInstance;\r\n    }\r\n\r\njust add the maven dependency\r\n\r\n    &lt;dependency&gt;\r\n        &lt;groupId&gt;org.modelmapper&lt;/groupId&gt;\r\n        &lt;artifactId&gt;modelmapper&lt;/artifactId&gt;\r\n        &lt;version&gt;2.3.2&lt;/version&gt;\r\n    &lt;/dependency&gt;","title":"How to clone a JPA entity","body":"<p>ModelMapper lib can be used for this purpose.</p>\n\n<pre><code>public MyEntity clone(MyEntity myInstance) {\n    MyEntity newInstance = new MyEntity();\n    new ModelMapper().map(myInstance, newInstance);\n    return newInstance;\n}\n</code></pre>\n\n<p>just add the maven dependency</p>\n\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;org.modelmapper&lt;/groupId&gt;\n    &lt;artifactId&gt;modelmapper&lt;/artifactId&gt;\n    &lt;version&gt;2.3.2&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":87230,"reputation":36816,"user_id":242042,"accept_rate":57,"display_name":"Archimedes Trajano"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691605315,"creation_date":1691604996,"answer_id":76870326,"question_id":11625096,"body_markdown":"You can use BeanUtils which is available from Spring or Apache Commons Lang.  But you should not copy the `@Id` nor the `@Version` otherwise saving it will cause issues.\r\n\r\n```java\r\n  public static &lt;S, T&gt; T copyEntityData(\r\n    @NotNull S source,\r\n    @NotNull T target,\r\n    @NotNull EntityManager entityManager,\r\n    String... ignoreProperties) {\r\n\r\n    final var ignoredSet = new HashSet&lt;&gt;(Set.of(ignoreProperties));\r\n    final var targetEntityType = entityManager.getMetamodel().entity(target.getClass());\r\n    final var idName = targetEntityType.getId(targetEntityType.getIdType().getJavaType()).getName();\r\n    ignoredSet.add(idName);\r\n    Optional.ofNullable(targetEntityType.getVersion(Object.class))\r\n      .map(Attribute::getName)\r\n      .ifPresent(ignoredSet::add);\r\n\r\n    BeanUtils.copyProperties(source, target, ignoredSet.toArray(String[]::new));\r\n    return target;\r\n  }\r\n```\r\n\r\nNote this does *not* detect if the field is `updatable` so non-updatable data should be ignored.","title":"How to clone a JPA entity","body":"<p>You can use BeanUtils which is available from Spring or Apache Commons Lang.  But you should not copy the <code>@Id</code> nor the <code>@Version</code> otherwise saving it will cause issues.</p>\n<pre class=\"lang-java prettyprint-override\"><code>  public static &lt;S, T&gt; T copyEntityData(\n    @NotNull S source,\n    @NotNull T target,\n    @NotNull EntityManager entityManager,\n    String... ignoreProperties) {\n\n    final var ignoredSet = new HashSet&lt;&gt;(Set.of(ignoreProperties));\n    final var targetEntityType = entityManager.getMetamodel().entity(target.getClass());\n    final var idName = targetEntityType.getId(targetEntityType.getIdType().getJavaType()).getName();\n    ignoredSet.add(idName);\n    Optional.ofNullable(targetEntityType.getVersion(Object.class))\n      .map(Attribute::getName)\n      .ifPresent(ignoredSet::add);\n\n    BeanUtils.copyProperties(source, target, ignoredSet.toArray(String[]::new));\n    return target;\n  }\n</code></pre>\n<p>Note this does <em>not</em> detect if the field is <code>updatable</code> so non-updatable data should be ignored.</p>\n"}],"owner":{"account_id":368209,"reputation":1528,"user_id":714862,"accept_rate":52,"display_name":"krisy"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":75766,"favorite_count":0,"down_vote_count":0,"up_vote_count":66,"accepted_answer_id":11625136,"answer_count":9,"score":66,"last_activity_date":1691605315,"creation_date":1343110264,"question_id":11625096,"body_markdown":"I have a JPA entity already persisted in the database.   \r\nI would like to have a copy of it (with a different id), with some fields modified.\r\n\r\nWhat is the easiest way to do this? Like:\r\n\r\n * setting it&#39;s `@Id` field to `null` and persisting it will work?\r\n * will I have to create a clone method for the entity (copying all fields except the `@Id`)?\r\n * is there any other approach (like using a cloning framework)?\r\n","title":"How to clone a JPA entity","body":"<p>I have a JPA entity already persisted in the database.<br>\nI would like to have a copy of it (with a different id), with some fields modified.</p>\n\n<p>What is the easiest way to do this? Like:</p>\n\n<ul>\n<li>setting it's <code>@Id</code> field to <code>null</code> and persisting it will work?</li>\n<li>will I have to create a clone method for the entity (copying all fields except the <code>@Id</code>)?</li>\n<li>is there any other approach (like using a cloning framework)?</li>\n</ul>\n"},{"tags":["java","arraylist"],"owner":{"account_id":18626368,"reputation":9,"user_id":13575412,"display_name":"Smruti"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":22,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1691605123,"creation_date":1691045562,"question_id":76825538,"body_markdown":"I have 2 class as parent and child \r\n\r\n    public class Accounts implements Serializable{\t\r\n    private String accountCode;\r\n    private String number;\r\n    private List&lt;Details&gt;  details;\r\n    }\r\n    public class Details implements Serializable{\t\r\n    private String accode;\r\n    private String description;\r\n    private String currency;\t\r\n    }\r\nI have below details in arraylist\r\n\r\n20230725;444072744;IN909098223;TestData1;EUR\r\n20230801;444072743;IN909098224;TestData2;INR\r\n20230725;444072744;IN909098225;TestData3;USD\r\n\r\nparents are same with id  20230725 but they have different child.\r\nI want final result like \r\n\r\n20230725;444072744;{IN909098223;TestData1;EUR}, {IN909098225;TestData3;USD}\r\n20230801;444072743;IN909098224;TestData2;INR\r\n\r\nThis data is in a Arraylist\r\nI have done like below\r\n```\r\nint duplicateCount = 0;\r\n    List&lt;Accounts&gt; updatedAccount = new ArrayList&lt;Accounts&gt;();  \r\n\tfor (int i = 0; i &lt; Accounts.size(); i++) {  \r\n\t  for (int j = i+1; j &lt; Accounts.size(); j++) {\r\n\t    if(Accounts.get(i).getAccountCode().equals(Accounts.get(j).getAccountCode())) {\r\n\t\t  duplicateCount++;\r\n\t\t  Accounts.get(i).getDetails().addAll(Accounts.get(j).getDetails());\r\n\t\t  updatedAccount.add(Accounts.get(i));\r\n\t\t  }\r\n\t\t}\r\n    }\r\n    if(duplicateCount == 0){\r\n\t  updatedAccount.add(Accounts.get(i));\r\n\t}\r\n```\r\ni am geting \r\n\r\n    20230725;444072744;{IN909098223;TestData1;EUR}, {IN909098225;TestData3;USD}\r\n    20230801;444072743;IN909098224;TestData2;INR\r\n    20230725;444072744;IN909098225;TestData3;USD","title":"How to merge the child object and create unique parent Object from a Arraylist if parents are unique but have diffener child","body":"<p>I have 2 class as parent and child</p>\n<pre><code>public class Accounts implements Serializable{  \nprivate String accountCode;\nprivate String number;\nprivate List&lt;Details&gt;  details;\n}\npublic class Details implements Serializable{   \nprivate String accode;\nprivate String description;\nprivate String currency;    \n}\n</code></pre>\n<p>I have below details in arraylist</p>\n<p>20230725;444072744;IN909098223;TestData1;EUR\n20230801;444072743;IN909098224;TestData2;INR\n20230725;444072744;IN909098225;TestData3;USD</p>\n<p>parents are same with id  20230725 but they have different child.\nI want final result like</p>\n<p>20230725;444072744;{IN909098223;TestData1;EUR}, {IN909098225;TestData3;USD}\n20230801;444072743;IN909098224;TestData2;INR</p>\n<p>This data is in a Arraylist\nI have done like below</p>\n<pre><code>int duplicateCount = 0;\n    List&lt;Accounts&gt; updatedAccount = new ArrayList&lt;Accounts&gt;();  \n    for (int i = 0; i &lt; Accounts.size(); i++) {  \n      for (int j = i+1; j &lt; Accounts.size(); j++) {\n        if(Accounts.get(i).getAccountCode().equals(Accounts.get(j).getAccountCode())) {\n          duplicateCount++;\n          Accounts.get(i).getDetails().addAll(Accounts.get(j).getDetails());\n          updatedAccount.add(Accounts.get(i));\n          }\n        }\n    }\n    if(duplicateCount == 0){\n      updatedAccount.add(Accounts.get(i));\n    }\n</code></pre>\n<p>i am geting</p>\n<pre><code>20230725;444072744;{IN909098223;TestData1;EUR}, {IN909098225;TestData3;USD}\n20230801;444072743;IN909098224;TestData2;INR\n20230725;444072744;IN909098225;TestData3;USD\n</code></pre>\n"},{"tags":["java","spring","jpa","spring-boot","spring-data-jpa"],"comments":[{"owner":{"account_id":4271284,"reputation":12416,"user_id":3493036,"accept_rate":81,"display_name":"Patrick"},"score":2,"creation_date":1516778868,"post_id":48416927,"comment_id":83823505,"body_markdown":"why do you exclude `DataSourceAutoConfiguration.class` and `HibernateJpaAutoConfiguration.class`?","body":"why do you exclude <code>DataSourceAutoConfiguration.class</code> and <code>HibernateJpaAutoConfiguration.class</code>?"},{"owner":{"account_id":12798378,"reputation":541,"user_id":9260487,"display_name":"Zahid Anwar"},"score":0,"creation_date":1516782283,"post_id":48416927,"comment_id":83825223,"body_markdown":"If I take out the exclude and simply have @EnableAutoConfiguration, Springboot throws an error about being unable to configure an inMemoryDatabase. This is what I see: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name &#39;inMemoryDatabaseShutdownExecutor&#39; defined in class path resource [org/springframework/boot/devtools/autoconfigure/DevToolsDataSourceAutoConfiguration.class]: Error creating bean with name &#39;dataSource&#39; defined in class path resource","body":"If I take out the exclude and simply have @EnableAutoConfiguration, Springboot throws an error about being unable to configure an inMemoryDatabase. This is what I see: org.springframework.beans.factory.UnsatisfiedDependencyExcep&zwnj;&#8203;tion: Error creating bean with name &#39;inMemoryDatabaseShutdownExecutor&#39; defined in class path resource [org/springframework/boot/devtools/autoconfigure/DevToolsDat&zwnj;&#8203;aSourceAutoConfigura&zwnj;&#8203;tion.class]: Error creating bean with name &#39;dataSource&#39; defined in class path resource"},{"owner":{"account_id":4271284,"reputation":12416,"user_id":3493036,"accept_rate":81,"display_name":"Patrick"},"score":0,"creation_date":1516782708,"post_id":48416927,"comment_id":83825418,"body_markdown":"try to start your app without any annotaion on your main class. Just leave `@SpringBootApplication`.  Also without `scanBasePackages= &quot;com.sweng.giflib&quot;`","body":"try to start your app without any annotaion on your main class. Just leave <code>@SpringBootApplication</code>.  Also without <code>scanBasePackages= &quot;com.sweng.giflib&quot;</code>"},{"owner":{"account_id":12798378,"reputation":541,"user_id":9260487,"display_name":"Zahid Anwar"},"score":0,"creation_date":1516783095,"post_id":48416927,"comment_id":83825614,"body_markdown":"Thank you for the suggestion but with just the @SpringBootApplication and no other annotation I still get something about the inMemoryDatabasesShutdown. I see org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name &#39;inMemoryDatabaseShutdownExecutor&#39; defined in class path resource [org/springframework/boot/devtools/autoconfigure/DevToolsDataSourceAutoConfiguration.class]: Unsatisfied dependency expressed through method &#39;inMemoryDatabaseShutdownExecutor&#39; parameter 0;","body":"Thank you for the suggestion but with just the @SpringBootApplication and no other annotation I still get something about the inMemoryDatabasesShutdown. I see org.springframework.beans.factory.UnsatisfiedDependencyExcep&zwnj;&#8203;tion: Error creating bean with name &#39;inMemoryDatabaseShutdownExecutor&#39; defined in class path resource [org/springframework/boot/devtools/autoconfigure/DevToolsDat&zwnj;&#8203;aSourceAutoConfigura&zwnj;&#8203;tion.class]: Unsatisfied dependency expressed through method &#39;inMemoryDatabaseShutdownExecutor&#39; parameter 0;"},{"owner":{"account_id":11795065,"reputation":8307,"user_id":8629960,"display_name":"Kirill Simonov"},"score":1,"creation_date":1516831166,"post_id":48416927,"comment_id":83855860,"body_markdown":"I&#39;ve just noticed that you have some mistakes in your properties. Check my updated answer","body":"I&#39;ve just noticed that you have some mistakes in your properties. Check my updated answer"},{"owner":{"account_id":951350,"reputation":21,"user_id":7955362,"display_name":"Squarism"},"score":0,"creation_date":1688094670,"post_id":48416927,"comment_id":135030845,"body_markdown":"This post helped me fix the above problem [SO post](https://stackoverflow.com/a/61848468/7955362)","body":"This post helped me fix the above problem <a href=\"https://stackoverflow.com/a/61848468/7955362\">SO post</a>"}],"answers":[{"tags":[],"owner":{"account_id":11795065,"reputation":8307,"user_id":8629960,"display_name":"Kirill Simonov"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1685033987,"creation_date":1516779657,"answer_id":48417180,"question_id":48416927,"body_markdown":"You either need to remove `exclude = {DataSourceAutoConfiguration.class, HibernateJpaAutoConfiguration.class}` (and let Spring automatically configure your datasource) or [configure your datasource manually][1]\r\n\r\n    @Bean\r\n    @ConfigurationProperties(prefix=&quot;spring.datasource&quot;)\r\n    public DataSource dataSource() {\r\n        return new YourCustomDataSource();\r\n    }\r\n\r\n**UPDATE:**  Seems like you have some mistakes in your properties:\r\n\r\n    spring.datasource.url== jdbc:mysql://localhost:3306/giflib\r\n    spring.db.driver= com.mysql.jdbc.Driver\r\n\r\nTry to remove the extra `=` from the first line and use `spring.datasource.driver-class-name` property name for the second:\r\n\r\n    spring.datasource.url=jdbc:mysql://localhost:3306/giflib\r\n    spring.datasource.driver-class-name=com.mysql.jdbc.Driver\r\n\r\nAlso add a version to your MySQL dependency:\r\n\r\n    compile &quot;mysql:mysql-connector-java:6.0.6&quot;\r\n\r\nI think that because of these mistakes Spring is unable to autodetect your datasource type correctly.\r\n\r\n  [1]: https://docs.spring.io/spring-boot/docs/current/reference/htmlsingle/#howto-configure-a-datasource","title":"Spring-boot: required a bean named &#39;entityManagerFactory&#39; that could not be found","body":"<p>You either need to remove <code>exclude = {DataSourceAutoConfiguration.class, HibernateJpaAutoConfiguration.class}</code> (and let Spring automatically configure your datasource) or <a href=\"https://docs.spring.io/spring-boot/docs/current/reference/htmlsingle/#howto-configure-a-datasource\" rel=\"nofollow noreferrer\">configure your datasource manually</a></p>\n<pre><code>@Bean\n@ConfigurationProperties(prefix=&quot;spring.datasource&quot;)\npublic DataSource dataSource() {\n    return new YourCustomDataSource();\n}\n</code></pre>\n<p><strong>UPDATE:</strong>  Seems like you have some mistakes in your properties:</p>\n<pre><code>spring.datasource.url== jdbc:mysql://localhost:3306/giflib\nspring.db.driver= com.mysql.jdbc.Driver\n</code></pre>\n<p>Try to remove the extra <code>=</code> from the first line and use <code>spring.datasource.driver-class-name</code> property name for the second:</p>\n<pre><code>spring.datasource.url=jdbc:mysql://localhost:3306/giflib\nspring.datasource.driver-class-name=com.mysql.jdbc.Driver\n</code></pre>\n<p>Also add a version to your MySQL dependency:</p>\n<pre><code>compile &quot;mysql:mysql-connector-java:6.0.6&quot;\n</code></pre>\n<p>I think that because of these mistakes Spring is unable to autodetect your datasource type correctly.</p>\n"},{"tags":[],"owner":{"account_id":1229279,"reputation":1864,"user_id":1194202,"accept_rate":73,"display_name":"Johna"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1516782363,"creation_date":1516782363,"answer_id":48417848,"question_id":48416927,"body_markdown":"You have chosen to bypass auto creation of EntityManagerFactory. Therefore you should add folowing two beans in one of your configuration classes, possibly in Application class.\r\n\r\n    private static String PROP_DB_DRIVER_CLASS = &quot;spring.db.driver&quot;;\r\n    private static String PROP_DB_URL = &quot;spring.datasource.url&quot;;\r\n    private static String PROP_DB_USER = &quot;spring.datasource.username&quot;;\r\n    private static String PROP_DB_PASS = &quot;spring.datasource.password&quot;;\r\n\r\n    @Autowired\r\n    private Environment env;\r\n\r\n    @Bean\r\n    public DataSource dataSource(){\r\n          DriverManagerDataSource dataSource = new DriverManagerDataSource();\r\n          dataSource.setDriverClassName(env.getProperty(PROP_DB_DRIVER_CLASS));\r\n          dataSource.setUrl(env.getProperty(PROP_DB_URL));\r\n          dataSource.setUsername(env.getProperty(PROP_DB_USER));\r\n          dataSource.setPassword(env.getProperty(PROP_DB_PASS));\r\n          return dataSource;\r\n    }\r\n\r\n    @Bean\r\n    public LocalContainerEntityManagerFactoryBean entityManagerFactory() {\r\n          LocalContainerEntityManagerFactoryBean em = new LocalContainerEntityManagerFactoryBean();\r\n          em.setDataSource(dataSource());\r\n          em.setPackagesToScan(&quot;com.sweng.giflib.model&quot;);\r\n     \r\n          JpaVendorAdapter vendorAdapter = new HibernateJpaVendorAdapter();\r\n          em.setJpaVendorAdapter(vendorAdapter);\r\n          em.setJpaProperties(additionalProperties());\r\n     \r\n          return em;\r\n    }\r\n\r\nDon&#39;t forget to add the hibernate dependency to your project.","title":"Spring-boot: required a bean named &#39;entityManagerFactory&#39; that could not be found","body":"<p>You have chosen to bypass auto creation of EntityManagerFactory. Therefore you should add folowing two beans in one of your configuration classes, possibly in Application class.</p>\n\n<pre><code>private static String PROP_DB_DRIVER_CLASS = \"spring.db.driver\";\nprivate static String PROP_DB_URL = \"spring.datasource.url\";\nprivate static String PROP_DB_USER = \"spring.datasource.username\";\nprivate static String PROP_DB_PASS = \"spring.datasource.password\";\n\n@Autowired\nprivate Environment env;\n\n@Bean\npublic DataSource dataSource(){\n      DriverManagerDataSource dataSource = new DriverManagerDataSource();\n      dataSource.setDriverClassName(env.getProperty(PROP_DB_DRIVER_CLASS));\n      dataSource.setUrl(env.getProperty(PROP_DB_URL));\n      dataSource.setUsername(env.getProperty(PROP_DB_USER));\n      dataSource.setPassword(env.getProperty(PROP_DB_PASS));\n      return dataSource;\n}\n\n@Bean\npublic LocalContainerEntityManagerFactoryBean entityManagerFactory() {\n      LocalContainerEntityManagerFactoryBean em = new LocalContainerEntityManagerFactoryBean();\n      em.setDataSource(dataSource());\n      em.setPackagesToScan(\"com.sweng.giflib.model\");\n\n      JpaVendorAdapter vendorAdapter = new HibernateJpaVendorAdapter();\n      em.setJpaVendorAdapter(vendorAdapter);\n      em.setJpaProperties(additionalProperties());\n\n      return em;\n}\n</code></pre>\n\n<p>Don't forget to add the hibernate dependency to your project.</p>\n"},{"tags":[],"owner":{"account_id":4418961,"reputation":1927,"user_id":9347049,"display_name":"user9347049"},"down_vote_count":1,"up_vote_count":16,"is_accepted":false,"score":15,"last_activity_date":1535297408,"creation_date":1535297408,"answer_id":52027710,"question_id":48416927,"body_markdown":"Run into same issue when trying to connect spring boot to mysql database.\r\n\r\nWhat saved me was adding correct version of hibernate-core to my pom file. \r\nFrom hibernate onwards 5.2.0. hibernate-entitymanager is no longer needed.  Hibernate-core 5.2.0 have problem with Spring Data JPA while process collection.` Hibernate-core 5.2.1` and above is ok with Spring Data JPA if you are using Spring Data JPA. \r\n\r\n    &lt;dependency&gt;\r\n     &lt;groupId&gt;org.hibernate&lt;/groupId&gt;\r\n     &lt;artifactId&gt;hibernate-core&lt;/artifactId&gt;\r\n     &lt;version&gt; 5.2.1.Final&lt;/version&gt;\r\n    &lt;/dependency&gt;","title":"Spring-boot: required a bean named &#39;entityManagerFactory&#39; that could not be found","body":"<p>Run into same issue when trying to connect spring boot to mysql database.</p>\n\n<p>What saved me was adding correct version of hibernate-core to my pom file. \nFrom hibernate onwards 5.2.0. hibernate-entitymanager is no longer needed.  Hibernate-core 5.2.0 have problem with Spring Data JPA while process collection.<code>Hibernate-core 5.2.1</code> and above is ok with Spring Data JPA if you are using Spring Data JPA. </p>\n\n<pre><code>&lt;dependency&gt;\n &lt;groupId&gt;org.hibernate&lt;/groupId&gt;\n &lt;artifactId&gt;hibernate-core&lt;/artifactId&gt;\n &lt;version&gt; 5.2.1.Final&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":8868539,"reputation":2197,"user_id":6622913,"display_name":"Istiaque Hossain"},"down_vote_count":0,"up_vote_count":55,"is_accepted":false,"score":55,"last_activity_date":1630513497,"creation_date":1550035190,"answer_id":54663039,"question_id":48416927,"body_markdown":"I was getting error message like-\r\n\r\n&gt; required a bean named &#39;**entityManagerFactory**&#39; that could not be found.\r\n\r\n\r\n\r\nAfter lot of googling solve this problem.\r\nI set manual configuration for JPA.\r\n\r\n    @Bean \r\n    public LocalSessionFactoryBean sessionFactory() {\r\n        LocalSessionFactoryBean sessionFactory = new LocalSessionFactoryBean(); \r\n    \r\n        return sessionFactory;\r\n    }\r\nbut JPA by default search sessionFactory by name &#39;**entityManagerFactory**&#39;\r\nso change my code as:\r\n\r\n    @Bean(name=&quot;entityManagerFactory&quot;)\r\n    public LocalSessionFactoryBean sessionFactory() {\r\n        LocalSessionFactoryBean sessionFactory = new LocalSessionFactoryBean();\r\n    \r\n        return sessionFactory;\r\n    } ","title":"Spring-boot: required a bean named &#39;entityManagerFactory&#39; that could not be found","body":"<p>I was getting error message like-</p>\n<blockquote>\n<p>required a bean named '<strong>entityManagerFactory</strong>' that could not be found.</p>\n</blockquote>\n<p>After lot of googling solve this problem.\nI set manual configuration for JPA.</p>\n<pre><code>@Bean \npublic LocalSessionFactoryBean sessionFactory() {\n    LocalSessionFactoryBean sessionFactory = new LocalSessionFactoryBean(); \n\n    return sessionFactory;\n}\n</code></pre>\n<p>but JPA by default search sessionFactory by name '<strong>entityManagerFactory</strong>'\nso change my code as:</p>\n<pre><code>@Bean(name=&quot;entityManagerFactory&quot;)\npublic LocalSessionFactoryBean sessionFactory() {\n    LocalSessionFactoryBean sessionFactory = new LocalSessionFactoryBean();\n\n    return sessionFactory;\n} \n</code></pre>\n"},{"tags":[],"owner":{"account_id":16970991,"reputation":39,"user_id":12275621,"display_name":"avaneesh kumar Shukla"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1577369055,"creation_date":1577367827,"answer_id":59489335,"question_id":48416927,"body_markdown":"I tried several ways besides of mentioned suggestions to remove this error.I got resolved this error by  just removing following code from application.properties\r\n\r\n    spring.jpa.properties.hibernate.cache.use_second_level_cache=true                                                   \r\n    spring.jpa.properties.hibernate.cache.use_query_cache=false                                                         \r\n    spring.jpa.properties.hibernate.generate_statistics=false                                                           \r\n    spring.jpa.properties.hibernate.cache.region.factory_class=org.hibernate.cache.ehcache.SingletonEhCacheRegionFactory","title":"Spring-boot: required a bean named &#39;entityManagerFactory&#39; that could not be found","body":"<p>I tried several ways besides of mentioned suggestions to remove this error.I got resolved this error by  just removing following code from application.properties</p>\n\n<pre><code>spring.jpa.properties.hibernate.cache.use_second_level_cache=true                                                   \nspring.jpa.properties.hibernate.cache.use_query_cache=false                                                         \nspring.jpa.properties.hibernate.generate_statistics=false                                                           \nspring.jpa.properties.hibernate.cache.region.factory_class=org.hibernate.cache.ehcache.SingletonEhCacheRegionFactory\n</code></pre>\n"},{"tags":[],"owner":{"account_id":16201165,"reputation":1,"user_id":11697526,"display_name":"Wellington DC"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1577995283,"creation_date":1577995283,"answer_id":59569318,"question_id":48416927,"body_markdown":"In my case the problem was `exclude = {DataSourceAutoConfiguration.class, HibernateJpaAutoConfiguration.class}` declared in `@SpringBootApplication` annotation, so thanks to Kirill Simonov tip I solved the problem that spent all day long of searching and broking head. Removing it worked extremely fine for me after hours trying. Everything else was ok, @Service, @Autowired, @EnableAutoConfiguration and @ComponentScan are redundant in this spring boot version, so really much time trying tips in the internet.\r\n\r\nI&#39;m using spring boot 2.1.11.RELEASE version.\r\n\r\nProgramming is something funny, once I used the exclude solution to solve an error message, then the same thing was the problem now. So there&#39;s no magic spell or formula as this universe has lots and lots of different scenarios, even if it&#39;s similar to a previous one we worked on.","title":"Spring-boot: required a bean named &#39;entityManagerFactory&#39; that could not be found","body":"<p>In my case the problem was <code>exclude = {DataSourceAutoConfiguration.class, HibernateJpaAutoConfiguration.class}</code> declared in <code>@SpringBootApplication</code> annotation, so thanks to Kirill Simonov tip I solved the problem that spent all day long of searching and broking head. Removing it worked extremely fine for me after hours trying. Everything else was ok, @Service, @Autowired, @EnableAutoConfiguration and @ComponentScan are redundant in this spring boot version, so really much time trying tips in the internet.</p>\n\n<p>I'm using spring boot 2.1.11.RELEASE version.</p>\n\n<p>Programming is something funny, once I used the exclude solution to solve an error message, then the same thing was the problem now. So there's no magic spell or formula as this universe has lots and lots of different scenarios, even if it's similar to a previous one we worked on.</p>\n"},{"tags":[],"owner":{"account_id":8320082,"reputation":1581,"user_id":6252111,"display_name":"Abdulrahman Hashem"},"down_vote_count":0,"up_vote_count":29,"is_accepted":false,"score":29,"last_activity_date":1583057640,"creation_date":1583057640,"answer_id":60474034,"question_id":48416927,"body_markdown":"For me, I&#39;ve forgotten to remove `DataSourceAutoConfiguration.class` from exclusions.\r\n\r\nSo this:\r\n\r\n    @SpringBootApplication(exclude = {DataSourceAutoConfiguration.class})\r\n    // Main class definition\r\n\r\nShould be:\r\n\r\n    @SpringBootApplication()\r\n    // Main class definition","title":"Spring-boot: required a bean named &#39;entityManagerFactory&#39; that could not be found","body":"<p>For me, I've forgotten to remove <code>DataSourceAutoConfiguration.class</code> from exclusions.</p>\n\n<p>So this:</p>\n\n<pre><code>@SpringBootApplication(exclude = {DataSourceAutoConfiguration.class})\n// Main class definition\n</code></pre>\n\n<p>Should be:</p>\n\n<pre><code>@SpringBootApplication()\n// Main class definition\n</code></pre>\n"},{"tags":[],"owner":{"account_id":11410251,"reputation":69,"user_id":8364607,"display_name":"tushar"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1612760365,"creation_date":1612760365,"answer_id":66096130,"question_id":48416927,"body_markdown":"I was getting the issue , because I forgot to remove the annotation `@SpringBootApplication(exclude = {DataSourceAutoConfiguration.class })` that I had added, while testing hardcoded values.\r\nResolved the issue by simply using `@SpringBootApplication`","title":"Spring-boot: required a bean named &#39;entityManagerFactory&#39; that could not be found","body":"<p>I was getting the issue , because I forgot to remove the annotation <code>@SpringBootApplication(exclude = {DataSourceAutoConfiguration.class })</code> that I had added, while testing hardcoded values.\nResolved the issue by simply using <code>@SpringBootApplication</code></p>\n"},{"tags":[],"owner":{"account_id":2269433,"reputation":436,"user_id":1997258,"display_name":"dpalacio"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1612784588,"creation_date":1612784588,"answer_id":66100963,"question_id":48416927,"body_markdown":"in our case was working fine but not for tests with @WebMvcTest\r\n\r\nTook a while to find out but issue was:\r\n```\r\n@SpringBootApplication\r\n@ComponentScan({&quot;com.givenproject&quot;})\r\n@EntityScan(&quot;com.givenproject&quot;)\r\n@EnableJpaRepositories(&quot;com.givenproject&quot;)\r\n@Configuration\r\npublic class Application {\r\n```\r\n\r\ninstead do:\r\n```\r\n@SpringBootApplication\r\n@Configuration\r\npublic class Application {\r\n```\r\nand\r\n```\r\n@Configuration\r\n@ComponentScan({&quot;com.givenproject&quot;})\r\n@EntityScan(basePackages = &quot;com.givenproject&quot;)\r\n@EnableJpaRepositories(basePackages = &quot;com.givenproject&quot;)\r\npublic class DataConfig {\r\n}\r\n```","title":"Spring-boot: required a bean named &#39;entityManagerFactory&#39; that could not be found","body":"<p>in our case was working fine but not for tests with @WebMvcTest</p>\n<p>Took a while to find out but issue was:</p>\n<pre><code>@SpringBootApplication\n@ComponentScan({&quot;com.givenproject&quot;})\n@EntityScan(&quot;com.givenproject&quot;)\n@EnableJpaRepositories(&quot;com.givenproject&quot;)\n@Configuration\npublic class Application {\n</code></pre>\n<p>instead do:</p>\n<pre><code>@SpringBootApplication\n@Configuration\npublic class Application {\n</code></pre>\n<p>and</p>\n<pre><code>@Configuration\n@ComponentScan({&quot;com.givenproject&quot;})\n@EntityScan(basePackages = &quot;com.givenproject&quot;)\n@EnableJpaRepositories(basePackages = &quot;com.givenproject&quot;)\npublic class DataConfig {\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":18266810,"reputation":302,"user_id":13298363,"display_name":"Aashman Thing"},"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1619098509,"creation_date":1619098509,"answer_id":67214363,"question_id":48416927,"body_markdown":"In my case, I removed the version of mysql connector and let spring boot handle it. And it worked.","title":"Spring-boot: required a bean named &#39;entityManagerFactory&#39; that could not be found","body":"<p>In my case, I removed the version of mysql connector and let spring boot handle it. And it worked.</p>\n"},{"tags":[],"owner":{"account_id":15115213,"reputation":11,"user_id":10958055,"display_name":"Steinhof"},"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1688103705,"creation_date":1632949639,"answer_id":69383373,"question_id":48416927,"body_markdown":"Solved a problem by removing jooq dependency:\r\n```\r\nimplementation(&quot;org.springframework.boot:spring-boot-starter-jooq&quot;)\r\n```\r\n","title":"Spring-boot: required a bean named &#39;entityManagerFactory&#39; that could not be found","body":"<p>Solved a problem by removing jooq dependency:</p>\n<pre><code>implementation(&quot;org.springframework.boot:spring-boot-starter-jooq&quot;)\n</code></pre>\n"},{"tags":[],"owner":{"account_id":5448686,"reputation":6798,"user_id":4573839,"accept_rate":89,"display_name":"yu yang Jian"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1664951089,"creation_date":1664951089,"answer_id":73956543,"question_id":48416927,"body_markdown":"For me, I&#39;m wrting Spring Unit Test, in the `Cotroller` I declare `repository` variable, I move the repository and its behavior to another new class, and called the new class method in `Controller`.\r\n\r\nBesides, for the `Application` class in `src\\main` which is same package with `src\\test`, keep the `Application` simple like:\r\n\r\n    package yourpackage;\r\n\r\n    import org.springframework.boot.SpringApplication;\r\n    import org.springframework.boot.autoconfigure.SpringBootApplication;\r\n    \r\n    @SpringBootApplication\r\n    public class ApplicationTest {\r\n    \r\n        public static void main(String[] args) {\r\n            SpringApplication.run(ApplicationTest.class, args);\r\n        }\r\n    \r\n    }\r\n\r\nthen the problem is solved.","title":"Spring-boot: required a bean named &#39;entityManagerFactory&#39; that could not be found","body":"<p>For me, I'm wrting Spring Unit Test, in the <code>Cotroller</code> I declare <code>repository</code> variable, I move the repository and its behavior to another new class, and called the new class method in <code>Controller</code>.</p>\n<p>Besides, for the <code>Application</code> class in <code>src\\main</code> which is same package with <code>src\\test</code>, keep the <code>Application</code> simple like:</p>\n<pre><code>package yourpackage;\n\nimport org.springframework.boot.SpringApplication;\nimport org.springframework.boot.autoconfigure.SpringBootApplication;\n\n@SpringBootApplication\npublic class ApplicationTest {\n\n    public static void main(String[] args) {\n        SpringApplication.run(ApplicationTest.class, args);\n    }\n\n}\n</code></pre>\n<p>then the problem is solved.</p>\n"},{"tags":[],"owner":{"account_id":22887286,"reputation":21,"user_id":17027975,"display_name":"Swapnil Gosavi"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1665813232,"creation_date":1665813232,"answer_id":74077039,"question_id":48416927,"body_markdown":"Please rebuild your project and download all dependencies once again.I also face same issue and my issue was resolved by just downloading dependencies once ","title":"Spring-boot: required a bean named &#39;entityManagerFactory&#39; that could not be found","body":"<p>Please rebuild your project and download all dependencies once again.I also face same issue and my issue was resolved by just downloading dependencies once</p>\n"},{"tags":[],"owner":{"account_id":26878008,"reputation":1,"user_id":20458940,"display_name":"Atal Tiwari"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1667995666,"creation_date":1667995666,"answer_id":74374642,"question_id":48416927,"body_markdown":"Solved it by adding the missing annotation &#39;@Entity&#39;.","title":"Spring-boot: required a bean named &#39;entityManagerFactory&#39; that could not be found","body":"<p>Solved it by adding the missing annotation '@Entity'.</p>\n"},{"tags":[],"owner":{"account_id":26972987,"reputation":1,"user_id":20538703,"display_name":"sai sree"},"down_vote_count":2,"up_vote_count":0,"is_accepted":false,"score":-2,"last_activity_date":1668768036,"creation_date":1668768036,"answer_id":74488398,"question_id":48416927,"body_markdown":"My issue is resolved after adding annotation @EnableAutoConfiguration in class where @SpringBootApplication is present.","title":"Spring-boot: required a bean named &#39;entityManagerFactory&#39; that could not be found","body":"<p>My issue is resolved after adding annotation @EnableAutoConfiguration in class where @SpringBootApplication is present.</p>\n"},{"tags":[],"owner":{"account_id":28023815,"reputation":11,"user_id":21404183,"display_name":"M.M.S Navinda"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1678888894,"creation_date":1678888894,"answer_id":75745782,"question_id":48416927,"body_markdown":"I had same issue when have two custom data sources with flyway DB migration. After adding @primary annotation for one data source, it worked.","title":"Spring-boot: required a bean named &#39;entityManagerFactory&#39; that could not be found","body":"<p>I had same issue when have two custom data sources with flyway DB migration. After adding @primary annotation for one data source, it worked.</p>\n"},{"tags":[],"owner":{"account_id":28762203,"reputation":1,"user_id":22027848,"display_name":"user22027848"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1686031028,"creation_date":1686031028,"answer_id":76411782,"question_id":48416927,"body_markdown":"also I am facing same issue, because I forgot to mention **jdbc** before **mysql://localhost:0000/databaseName** .After adding correct mysql url path my issue is resolved.","title":"Spring-boot: required a bean named &#39;entityManagerFactory&#39; that could not be found","body":"<p>also I am facing same issue, because I forgot to mention <strong>jdbc</strong> before <strong>mysql://localhost:0000/databaseName</strong> .After adding correct mysql url path my issue is resolved.</p>\n"},{"tags":[],"owner":{"account_id":28781625,"reputation":1,"user_id":22043121,"display_name":"Walid Loubar"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691605042,"creation_date":1691583724,"answer_id":76867743,"question_id":48416927,"body_markdown":"I found the problem in my import the thing is that `framework.data.annotation.id` was the problem when I changed it with `import javax.persistence.Id`. It solved it (I am using 2.7 spring boot with java 11 ). I hope i could fix your problem.","title":"Spring-boot: required a bean named &#39;entityManagerFactory&#39; that could not be found","body":"<p>I found the problem in my import the thing is that <code>framework.data.annotation.id</code> was the problem when I changed it with <code>import javax.persistence.Id</code>. It solved it (I am using 2.7 spring boot with java 11 ). I hope i could fix your problem.</p>\n"}],"owner":{"account_id":12798378,"reputation":541,"user_id":9260487,"display_name":"Zahid Anwar"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":183484,"favorite_count":0,"down_vote_count":0,"up_vote_count":54,"answer_count":18,"score":54,"last_activity_date":1691605042,"creation_date":1516778620,"question_id":48416927,"body_markdown":"I am developing a Spring Boot application using JPA and encountering this error. I am not certain if I am using the correct annotations or missing dependencies. Any help would be greatly appreciated.\r\n\r\n**This is the error message**\r\n\r\n    1:05:28 AM: Executing external task &#39;bootRun&#39;...\r\n    :compileJava\r\n    :processResources UP-TO-DATE\r\n    :classes\r\n    :findMainClass\r\n    :bootRun\r\n    01:05:35.198 [main] DEBUG org.springframework.boot.devtools.settings.DevToolsSettings - Included patterns for restart : []\r\n    01:05:35.201 [main] DEBUG org.springframework.boot.devtools.settings.DevToolsSettings - Excluded patterns for restart : [/spring-boot-starter/target/classes/, /spring-boot-autoconfigure/target/classes/, /spring-boot-starter-[\\w-]+/, /spring-boot/target/classes/, /spring-boot-actuator/target/classes/, /spring-boot-devtools/target/classes/]\r\n    01:05:35.201 [main] DEBUG org.springframework.boot.devtools.restart.ChangeableUrls - Matching URLs for reloading : [file:/C:/Users/zahid/IdeaProjects/giflib/build/classes/main/, file:/C:/Users/zahid/IdeaProjects/giflib/build/resources/main/]\r\n    \r\n      .   ____          _            __ _ _\r\n     /\\\\ / ___&#39;_ __ _ _(_)_ __  __ _ \\ \\ \\ \\\r\n    ( ( )\\___ | &#39;_ | &#39;_| | &#39;_ \\/ _` | \\ \\ \\ \\\r\n     \\\\/  ___)| |_)| | | | | || (_| |  ) ) ) )\r\n      &#39;  |____| .__|_| |_|_| |_\\__, | / / / /\r\n     =========|_|==============|___/=/_/_/_/\r\n     :: Spring Boot ::        (v1.5.3.RELEASE)\r\n    \r\n    2018-01-24 01:05:35.539  INFO 14840 --- [  restartedMain] com.sweng.giflib.Application             : Starting Application on DESKTOP-EKFI3C8 with PID 14840 (C:\\Users\\zahid\\IdeaProjects\\giflib\\build\\classes\\main started by zahid in C:\\Users\\zahid\\IdeaProjects\\giflib)\r\n    2018-01-24 01:05:35.540  INFO 14840 --- [  restartedMain] com.sweng.giflib.Application             : No active profile set, falling back to default profiles: default\r\n    2018-01-24 01:05:35.828  INFO 14840 --- [  restartedMain] ationConfigEmbeddedWebApplicationContext : Refreshing org.springframework.boot.context.embedded.AnnotationConfigEmbeddedWebApplicationContext@396ad740: startup date [Wed Jan 24 01:05:35 CST 2018]; root of context hierarchy\r\n    2018-01-24 01:05:37.685  INFO 14840 --- [  restartedMain] s.b.c.e.t.TomcatEmbeddedServletContainer : Tomcat initialized with port(s): 8080 (http)\r\n    2018-01-24 01:05:37.697  INFO 14840 --- [  restartedMain] o.apache.catalina.core.StandardService   : Starting service Tomcat\r\n    2018-01-24 01:05:37.699  INFO 14840 --- [  restartedMain] org.apache.catalina.core.StandardEngine  : Starting Servlet Engine: Apache Tomcat/8.5.14\r\n    2018-01-24 01:05:37.800  INFO 14840 --- [ost-startStop-1] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext\r\n    2018-01-24 01:05:37.801  INFO 14840 --- [ost-startStop-1] o.s.web.context.ContextLoader            : Root WebApplicationContext: initialization completed in 1976 ms\r\n    2018-01-24 01:05:37.991  INFO 14840 --- [ost-startStop-1] o.s.b.w.servlet.FilterRegistrationBean   : Mapping filter: &#39;characterEncodingFilter&#39; to: [/*]\r\n    2018-01-24 01:05:37.992  INFO 14840 --- [ost-startStop-1] o.s.b.w.servlet.FilterRegistrationBean   : Mapping filter: &#39;hiddenHttpMethodFilter&#39; to: [/*]\r\n    2018-01-24 01:05:37.992  INFO 14840 --- [ost-startStop-1] o.s.b.w.servlet.FilterRegistrationBean   : Mapping filter: &#39;httpPutFormContentFilter&#39; to: [/*]\r\n    2018-01-24 01:05:37.992  INFO 14840 --- [ost-startStop-1] o.s.b.w.servlet.FilterRegistrationBean   : Mapping filter: &#39;requestContextFilter&#39; to: [/*]\r\n    2018-01-24 01:05:37.993  INFO 14840 --- [ost-startStop-1] .s.DelegatingFilterProxyRegistrationBean : Mapping filter: &#39;springSecurityFilterChain&#39; to: [/*]\r\n    2018-01-24 01:05:37.994  INFO 14840 --- [ost-startStop-1] o.s.b.w.servlet.ServletRegistrationBean  : Mapping servlet: &#39;dispatcherServlet&#39; to [/]\r\n    2018-01-24 01:05:38.291  WARN 14840 --- [  restartedMain] ationConfigEmbeddedWebApplicationContext : Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name &#39;securityConfig&#39;: Unsatisfied dependency expressed through field &#39;userService&#39;; nested exception is org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name &#39;userServiceImpl&#39;: Unsatisfied dependency expressed through field &#39;userRepository&#39;; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name &#39;userRepository&#39;: Cannot create inner bean &#39;(inner bean)#64397422&#39; of type [org.springframework.orm.jpa.SharedEntityManagerCreator] while setting bean property &#39;entityManager&#39;; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name &#39;(inner bean)#64397422&#39;: Cannot resolve reference to bean &#39;entityManagerFactory&#39; while setting constructor argument; nested exception is org.springframework.beans.factory.NoSuchBeanDefinitionException: No bean named &#39;entityManagerFactory&#39; available\r\n    2018-01-24 01:05:38.294  INFO 14840 --- [  restartedMain] o.apache.catalina.core.StandardService   : Stopping service Tomcat\r\n    2018-01-24 01:05:38.321  INFO 14840 --- [  restartedMain] utoConfigurationReportLoggingInitializer : \r\n    \r\n    Error starting ApplicationContext. To display the auto-configuration report re-run your application with &#39;debug&#39; enabled.\r\n    2018-01-24 01:05:38.444 ERROR 14840 --- [  restartedMain] o.s.b.d.LoggingFailureAnalysisReporter   : \r\n    \r\n    ***************************\r\n    APPLICATION FAILED TO START\r\n    ***************************\r\n    \r\n    Description:\r\n    \r\n    Field userRepository in com.sweng.giflib.service.UserServiceImpl required a bean named &#39;entityManagerFactory&#39; that could not be found.\r\n    \r\n    \r\n    Action:\r\n    \r\n    Consider defining a bean named &#39;entityManagerFactory&#39; in your configuration.\r\n    \r\n    \r\n    BUILD SUCCESSFUL\r\n    \r\n    Total time: 9.681 secs\r\n    1:05:38 AM: External task execution finished &#39;bootRun&#39;.\r\n\r\n**build.gradle**\r\n\r\n    buildscript {\r\n        ext {\r\n            springBootVersion = &#39;1.5.3.RELEASE&#39;\r\n        }\r\n        repositories {\r\n            mavenCentral()\r\n        }\r\n        dependencies {\r\n            classpath(&quot;org.springframework.boot:spring-boot-gradle-plugin:${springBootVersion}&quot;)\r\n        }\r\n    }\r\n    \r\n    \r\n    group &#39;com.sweng&#39;\r\n    version &#39;1.0-SNAPSHOT&#39;\r\n    \r\n    \r\n    apply plugin: &#39;java&#39;\r\n    apply plugin: &#39;idea&#39;\r\n    apply plugin: &#39;org.springframework.boot&#39;\r\n    apply plugin: &#39;war&#39;\r\n    \r\n    repositories {\r\n        mavenCentral()\r\n    }\r\n    \r\n    springBoot {\r\n        mainClass = &quot;com.sweng.giflib.Application&quot;\r\n    }\r\n    dependencies {\r\n        compile &quot;org.springframework.boot:spring-boot-starter-data-jpa:$springBootVersion&quot;\r\n        compile &quot;org.springframework.boot:spring-boot-starter-web:$springBootVersion&quot;\r\n        compile &quot;org.springframework.boot:spring-boot-starter-thymeleaf:$springBootVersion&quot;\r\n        compile &quot;org.springframework.boot:spring-boot-devtools:$springBootVersion&quot;\r\n        compile &quot;mysql:mysql-connector-java&quot;\r\n        compile &quot;org.springframework.boot:spring-boot-starter-security:$springBootVersion&quot;\r\n        compile &quot;org.thymeleaf.extras:thymeleaf-extras-springsecurity4:2.1.2.RELEASE&quot;\r\n    \r\n        providedRuntime &#39;org.springframework.boot:spring-boot-starter-tomcat&#39;\r\n    }\r\n\r\n**application.properties**\r\n\r\n    spring.datasource.url== jdbc:mysql://localhost:3306/giflib\r\n    spring.db.driver= com.mysql.jdbc.Driver\r\n    spring.datasource.username = su\r\n    spring.datasource.password = \r\n    spring.jpa.show-sql = true\r\n    #spring.jpa.hibernate.ddl-auto = update\r\n    spring.jpa.properties.hibernate.dialect = org.hibernate.dialect.MySQL5Dialect\r\n    spring.jpa.hibernate.naming.strategy = org.hibernate.cfg.ImprovedNamingStrategy\r\n\r\n**Application.java**\r\n\r\n    package com.sweng.giflib;\r\n    \r\n    import org.springframework.boot.SpringApplication;\r\n    import org.springframework.boot.autoconfigure.EnableAutoConfiguration;\r\n    import org.springframework.boot.autoconfigure.SpringBootApplication;\r\n    import org.springframework.boot.autoconfigure.jdbc.DataSourceAutoConfiguration;\r\n    import org.springframework.boot.autoconfigure.orm.jpa.HibernateJpaAutoConfiguration;\r\n    import org.springframework.boot.builder.SpringApplicationBuilder;\r\n    import org.springframework.boot.web.support.SpringBootServletInitializer;\r\n    import org.springframework.context.annotation.ComponentScan;\r\n    import org.springframework.context.annotation.Configuration;\r\n    import org.springframework.data.jpa.repository.config.EnableJpaRepositories;\r\n    \r\n    @ComponentScan\r\n    @Configuration\r\n    @EnableAutoConfiguration(exclude = {DataSourceAutoConfiguration.class, HibernateJpaAutoConfiguration.class})\r\n    @EnableJpaRepositories(basePackages = &quot;com.sweng.giflib.repository&quot;)\r\n    @SpringBootApplication(scanBasePackages= &quot;com.sweng.giflib&quot;)\r\n    \r\n    public class Application extends SpringBootServletInitializer {\r\n    \r\n        @Override\r\n        protected SpringApplicationBuilder configure(SpringApplicationBuilder application) {\r\n            return application.sources(Application.class);\r\n        }\r\n    \r\n        public static void main(String[] args) throws Exception {\r\n            SpringApplication.run(Application.class, args);\r\n        }\r\n    \r\n    }\r\n\r\n**UserService.java**\r\n\r\n    package com.sweng.giflib.service;\r\n    \r\n    import com.sweng.giflib.model.User;\r\n    import org.springframework.security.core.userdetails.UserDetailsService;\r\n    \r\n    public interface UserService extends UserDetailsService {\r\n        User findByUsername(String username);\r\n    }\r\n\r\n**UserServiceImpl.java**\r\n\r\n    package com.sweng.giflib.service;\r\n    \r\n    import com.sweng.giflib.repository.UserRepository;\r\n    import com.sweng.giflib.model.User;\r\n    import org.springframework.beans.factory.annotation.Autowired;\r\n    import org.springframework.security.core.userdetails.UserDetails;\r\n    import org.springframework.security.core.userdetails.UsernameNotFoundException;\r\n    import org.springframework.stereotype.Service;\r\n    \r\n    @Service\r\n    public class UserServiceImpl implements UserService {\r\n        @Autowired\r\n        private UserRepository userRepository;\r\n    \r\n        @Override\r\n        public User findByUsername(String username)\r\n        {\r\n            return userRepository.findByusername(username);\r\n        }\r\n    \r\n    \r\n        @Override\r\n        public UserDetails loadUserByUsername(String username) throws UsernameNotFoundException {\r\n            // Load user from the database (throw exception if not found)\r\n            User user = userRepository.findByusername(username);\r\n            if(user == null) {\r\n                throw new UsernameNotFoundException(&quot;User not found&quot;);\r\n            }\r\n    \r\n            // Return user object\r\n            return user;\r\n        }\r\n    \r\n    }\r\n\r\n**UserRepository.java**\r\n\r\n    package com.sweng.giflib.repository;\r\n    \r\n    \r\n    import com.sweng.giflib.model.User;\r\n    import org.springframework.data.repository.CrudRepository;\r\n    import org.springframework.stereotype.Repository;\r\n    \r\n    @Repository\r\n    public interface UserRepository extends CrudRepository&lt;User, Long&gt;{\r\n        User findByusername(String name);\r\n    \r\n    }\r\n\r\n**User.java**\r\n\r\n    package com.sweng.giflib.model;\r\n    \r\n    import org.springframework.security.core.GrantedAuthority;\r\n    import org.springframework.security.core.authority.SimpleGrantedAuthority;\r\n    import org.springframework.security.core.userdetails.UserDetails;\r\n    \r\n    import javax.persistence.*;\r\n    import javax.validation.constraints.Size;\r\n    import java.util.ArrayList;\r\n    import java.util.Collection;\r\n    import java.util.List;\r\n    \r\n    @Entity\r\n    public class User implements UserDetails {\r\n        @Id\r\n        @GeneratedValue(strategy = GenerationType.IDENTITY)\r\n        private Long id;\r\n    \r\n        @Column(unique = true)\r\n        @Size(min = 8, max = 20)\r\n        private String username;\r\n    \r\n        @Column(length = 100)\r\n        private String password;\r\n    \r\n        @Column(nullable = false)\r\n        private boolean enabled;\r\n    \r\n        @OneToOne\r\n        @JoinColumn(name = &quot;role_id&quot;)\r\n        private Role role;\r\n    \r\n        @Override\r\n        public Collection&lt;? extends GrantedAuthority&gt; getAuthorities() {\r\n            List&lt;GrantedAuthority&gt; authorities = new ArrayList&lt;&gt;();\r\n            authorities.add(new SimpleGrantedAuthority(role.getName()));\r\n            return authorities;\r\n        }\r\n    \r\n        public Long getId() {\r\n            return id;\r\n        }\r\n    \r\n        public void setId(Long id) {\r\n            this.id = id;\r\n        }\r\n    \r\n        @Override\r\n        public String getPassword() {\r\n            return password;\r\n        }\r\n    \r\n        @Override\r\n        public String getUsername() {\r\n            return username;\r\n        }\r\n    \r\n        @Override\r\n        public boolean isAccountNonExpired() {\r\n            return true;\r\n        }\r\n    \r\n        @Override\r\n        public boolean isAccountNonLocked() {\r\n            return true;\r\n        }\r\n    \r\n        @Override\r\n        public boolean isCredentialsNonExpired() {\r\n            return true;\r\n        }\r\n    \r\n        @Override\r\n        public boolean isEnabled() {\r\n            return enabled;\r\n        }\r\n    }\r\n\r\n","title":"Spring-boot: required a bean named &#39;entityManagerFactory&#39; that could not be found","body":"<p>I am developing a Spring Boot application using JPA and encountering this error. I am not certain if I am using the correct annotations or missing dependencies. Any help would be greatly appreciated.</p>\n\n<p><strong>This is the error message</strong></p>\n\n<pre><code>1:05:28 AM: Executing external task 'bootRun'...\n:compileJava\n:processResources UP-TO-DATE\n:classes\n:findMainClass\n:bootRun\n01:05:35.198 [main] DEBUG org.springframework.boot.devtools.settings.DevToolsSettings - Included patterns for restart : []\n01:05:35.201 [main] DEBUG org.springframework.boot.devtools.settings.DevToolsSettings - Excluded patterns for restart : [/spring-boot-starter/target/classes/, /spring-boot-autoconfigure/target/classes/, /spring-boot-starter-[\\w-]+/, /spring-boot/target/classes/, /spring-boot-actuator/target/classes/, /spring-boot-devtools/target/classes/]\n01:05:35.201 [main] DEBUG org.springframework.boot.devtools.restart.ChangeableUrls - Matching URLs for reloading : [file:/C:/Users/zahid/IdeaProjects/giflib/build/classes/main/, file:/C:/Users/zahid/IdeaProjects/giflib/build/resources/main/]\n\n  .   ____          _            __ _ _\n /\\\\ / ___'_ __ _ _(_)_ __  __ _ \\ \\ \\ \\\n( ( )\\___ | '_ | '_| | '_ \\/ _` | \\ \\ \\ \\\n \\\\/  ___)| |_)| | | | | || (_| |  ) ) ) )\n  '  |____| .__|_| |_|_| |_\\__, | / / / /\n =========|_|==============|___/=/_/_/_/\n :: Spring Boot ::        (v1.5.3.RELEASE)\n\n2018-01-24 01:05:35.539  INFO 14840 --- [  restartedMain] com.sweng.giflib.Application             : Starting Application on DESKTOP-EKFI3C8 with PID 14840 (C:\\Users\\zahid\\IdeaProjects\\giflib\\build\\classes\\main started by zahid in C:\\Users\\zahid\\IdeaProjects\\giflib)\n2018-01-24 01:05:35.540  INFO 14840 --- [  restartedMain] com.sweng.giflib.Application             : No active profile set, falling back to default profiles: default\n2018-01-24 01:05:35.828  INFO 14840 --- [  restartedMain] ationConfigEmbeddedWebApplicationContext : Refreshing org.springframework.boot.context.embedded.AnnotationConfigEmbeddedWebApplicationContext@396ad740: startup date [Wed Jan 24 01:05:35 CST 2018]; root of context hierarchy\n2018-01-24 01:05:37.685  INFO 14840 --- [  restartedMain] s.b.c.e.t.TomcatEmbeddedServletContainer : Tomcat initialized with port(s): 8080 (http)\n2018-01-24 01:05:37.697  INFO 14840 --- [  restartedMain] o.apache.catalina.core.StandardService   : Starting service Tomcat\n2018-01-24 01:05:37.699  INFO 14840 --- [  restartedMain] org.apache.catalina.core.StandardEngine  : Starting Servlet Engine: Apache Tomcat/8.5.14\n2018-01-24 01:05:37.800  INFO 14840 --- [ost-startStop-1] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext\n2018-01-24 01:05:37.801  INFO 14840 --- [ost-startStop-1] o.s.web.context.ContextLoader            : Root WebApplicationContext: initialization completed in 1976 ms\n2018-01-24 01:05:37.991  INFO 14840 --- [ost-startStop-1] o.s.b.w.servlet.FilterRegistrationBean   : Mapping filter: 'characterEncodingFilter' to: [/*]\n2018-01-24 01:05:37.992  INFO 14840 --- [ost-startStop-1] o.s.b.w.servlet.FilterRegistrationBean   : Mapping filter: 'hiddenHttpMethodFilter' to: [/*]\n2018-01-24 01:05:37.992  INFO 14840 --- [ost-startStop-1] o.s.b.w.servlet.FilterRegistrationBean   : Mapping filter: 'httpPutFormContentFilter' to: [/*]\n2018-01-24 01:05:37.992  INFO 14840 --- [ost-startStop-1] o.s.b.w.servlet.FilterRegistrationBean   : Mapping filter: 'requestContextFilter' to: [/*]\n2018-01-24 01:05:37.993  INFO 14840 --- [ost-startStop-1] .s.DelegatingFilterProxyRegistrationBean : Mapping filter: 'springSecurityFilterChain' to: [/*]\n2018-01-24 01:05:37.994  INFO 14840 --- [ost-startStop-1] o.s.b.w.servlet.ServletRegistrationBean  : Mapping servlet: 'dispatcherServlet' to [/]\n2018-01-24 01:05:38.291  WARN 14840 --- [  restartedMain] ationConfigEmbeddedWebApplicationContext : Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'securityConfig': Unsatisfied dependency expressed through field 'userService'; nested exception is org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'userServiceImpl': Unsatisfied dependency expressed through field 'userRepository'; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'userRepository': Cannot create inner bean '(inner bean)#64397422' of type [org.springframework.orm.jpa.SharedEntityManagerCreator] while setting bean property 'entityManager'; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name '(inner bean)#64397422': Cannot resolve reference to bean 'entityManagerFactory' while setting constructor argument; nested exception is org.springframework.beans.factory.NoSuchBeanDefinitionException: No bean named 'entityManagerFactory' available\n2018-01-24 01:05:38.294  INFO 14840 --- [  restartedMain] o.apache.catalina.core.StandardService   : Stopping service Tomcat\n2018-01-24 01:05:38.321  INFO 14840 --- [  restartedMain] utoConfigurationReportLoggingInitializer : \n\nError starting ApplicationContext. To display the auto-configuration report re-run your application with 'debug' enabled.\n2018-01-24 01:05:38.444 ERROR 14840 --- [  restartedMain] o.s.b.d.LoggingFailureAnalysisReporter   : \n\n***************************\nAPPLICATION FAILED TO START\n***************************\n\nDescription:\n\nField userRepository in com.sweng.giflib.service.UserServiceImpl required a bean named 'entityManagerFactory' that could not be found.\n\n\nAction:\n\nConsider defining a bean named 'entityManagerFactory' in your configuration.\n\n\nBUILD SUCCESSFUL\n\nTotal time: 9.681 secs\n1:05:38 AM: External task execution finished 'bootRun'.\n</code></pre>\n\n<p><strong>build.gradle</strong></p>\n\n<pre><code>buildscript {\n    ext {\n        springBootVersion = '1.5.3.RELEASE'\n    }\n    repositories {\n        mavenCentral()\n    }\n    dependencies {\n        classpath(\"org.springframework.boot:spring-boot-gradle-plugin:${springBootVersion}\")\n    }\n}\n\n\ngroup 'com.sweng'\nversion '1.0-SNAPSHOT'\n\n\napply plugin: 'java'\napply plugin: 'idea'\napply plugin: 'org.springframework.boot'\napply plugin: 'war'\n\nrepositories {\n    mavenCentral()\n}\n\nspringBoot {\n    mainClass = \"com.sweng.giflib.Application\"\n}\ndependencies {\n    compile \"org.springframework.boot:spring-boot-starter-data-jpa:$springBootVersion\"\n    compile \"org.springframework.boot:spring-boot-starter-web:$springBootVersion\"\n    compile \"org.springframework.boot:spring-boot-starter-thymeleaf:$springBootVersion\"\n    compile \"org.springframework.boot:spring-boot-devtools:$springBootVersion\"\n    compile \"mysql:mysql-connector-java\"\n    compile \"org.springframework.boot:spring-boot-starter-security:$springBootVersion\"\n    compile \"org.thymeleaf.extras:thymeleaf-extras-springsecurity4:2.1.2.RELEASE\"\n\n    providedRuntime 'org.springframework.boot:spring-boot-starter-tomcat'\n}\n</code></pre>\n\n<p><strong>application.properties</strong></p>\n\n<pre><code>spring.datasource.url== jdbc:mysql://localhost:3306/giflib\nspring.db.driver= com.mysql.jdbc.Driver\nspring.datasource.username = su\nspring.datasource.password = \nspring.jpa.show-sql = true\n#spring.jpa.hibernate.ddl-auto = update\nspring.jpa.properties.hibernate.dialect = org.hibernate.dialect.MySQL5Dialect\nspring.jpa.hibernate.naming.strategy = org.hibernate.cfg.ImprovedNamingStrategy\n</code></pre>\n\n<p><strong>Application.java</strong></p>\n\n<pre><code>package com.sweng.giflib;\n\nimport org.springframework.boot.SpringApplication;\nimport org.springframework.boot.autoconfigure.EnableAutoConfiguration;\nimport org.springframework.boot.autoconfigure.SpringBootApplication;\nimport org.springframework.boot.autoconfigure.jdbc.DataSourceAutoConfiguration;\nimport org.springframework.boot.autoconfigure.orm.jpa.HibernateJpaAutoConfiguration;\nimport org.springframework.boot.builder.SpringApplicationBuilder;\nimport org.springframework.boot.web.support.SpringBootServletInitializer;\nimport org.springframework.context.annotation.ComponentScan;\nimport org.springframework.context.annotation.Configuration;\nimport org.springframework.data.jpa.repository.config.EnableJpaRepositories;\n\n@ComponentScan\n@Configuration\n@EnableAutoConfiguration(exclude = {DataSourceAutoConfiguration.class, HibernateJpaAutoConfiguration.class})\n@EnableJpaRepositories(basePackages = \"com.sweng.giflib.repository\")\n@SpringBootApplication(scanBasePackages= \"com.sweng.giflib\")\n\npublic class Application extends SpringBootServletInitializer {\n\n    @Override\n    protected SpringApplicationBuilder configure(SpringApplicationBuilder application) {\n        return application.sources(Application.class);\n    }\n\n    public static void main(String[] args) throws Exception {\n        SpringApplication.run(Application.class, args);\n    }\n\n}\n</code></pre>\n\n<p><strong>UserService.java</strong></p>\n\n<pre><code>package com.sweng.giflib.service;\n\nimport com.sweng.giflib.model.User;\nimport org.springframework.security.core.userdetails.UserDetailsService;\n\npublic interface UserService extends UserDetailsService {\n    User findByUsername(String username);\n}\n</code></pre>\n\n<p><strong>UserServiceImpl.java</strong></p>\n\n<pre><code>package com.sweng.giflib.service;\n\nimport com.sweng.giflib.repository.UserRepository;\nimport com.sweng.giflib.model.User;\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.security.core.userdetails.UserDetails;\nimport org.springframework.security.core.userdetails.UsernameNotFoundException;\nimport org.springframework.stereotype.Service;\n\n@Service\npublic class UserServiceImpl implements UserService {\n    @Autowired\n    private UserRepository userRepository;\n\n    @Override\n    public User findByUsername(String username)\n    {\n        return userRepository.findByusername(username);\n    }\n\n\n    @Override\n    public UserDetails loadUserByUsername(String username) throws UsernameNotFoundException {\n        // Load user from the database (throw exception if not found)\n        User user = userRepository.findByusername(username);\n        if(user == null) {\n            throw new UsernameNotFoundException(\"User not found\");\n        }\n\n        // Return user object\n        return user;\n    }\n\n}\n</code></pre>\n\n<p><strong>UserRepository.java</strong></p>\n\n<pre><code>package com.sweng.giflib.repository;\n\n\nimport com.sweng.giflib.model.User;\nimport org.springframework.data.repository.CrudRepository;\nimport org.springframework.stereotype.Repository;\n\n@Repository\npublic interface UserRepository extends CrudRepository&lt;User, Long&gt;{\n    User findByusername(String name);\n\n}\n</code></pre>\n\n<p><strong>User.java</strong></p>\n\n<pre><code>package com.sweng.giflib.model;\n\nimport org.springframework.security.core.GrantedAuthority;\nimport org.springframework.security.core.authority.SimpleGrantedAuthority;\nimport org.springframework.security.core.userdetails.UserDetails;\n\nimport javax.persistence.*;\nimport javax.validation.constraints.Size;\nimport java.util.ArrayList;\nimport java.util.Collection;\nimport java.util.List;\n\n@Entity\npublic class User implements UserDetails {\n    @Id\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\n    private Long id;\n\n    @Column(unique = true)\n    @Size(min = 8, max = 20)\n    private String username;\n\n    @Column(length = 100)\n    private String password;\n\n    @Column(nullable = false)\n    private boolean enabled;\n\n    @OneToOne\n    @JoinColumn(name = \"role_id\")\n    private Role role;\n\n    @Override\n    public Collection&lt;? extends GrantedAuthority&gt; getAuthorities() {\n        List&lt;GrantedAuthority&gt; authorities = new ArrayList&lt;&gt;();\n        authorities.add(new SimpleGrantedAuthority(role.getName()));\n        return authorities;\n    }\n\n    public Long getId() {\n        return id;\n    }\n\n    public void setId(Long id) {\n        this.id = id;\n    }\n\n    @Override\n    public String getPassword() {\n        return password;\n    }\n\n    @Override\n    public String getUsername() {\n        return username;\n    }\n\n    @Override\n    public boolean isAccountNonExpired() {\n        return true;\n    }\n\n    @Override\n    public boolean isAccountNonLocked() {\n        return true;\n    }\n\n    @Override\n    public boolean isCredentialsNonExpired() {\n        return true;\n    }\n\n    @Override\n    public boolean isEnabled() {\n        return enabled;\n    }\n}\n</code></pre>\n"},{"tags":["java","windows","button","swt","noborder"],"comments":[{"owner":{"account_id":3159259,"reputation":109666,"user_id":2670892,"display_name":"greg-449"},"score":0,"creation_date":1691491812,"post_id":76858145,"comment_id":135495890,"body_markdown":"Maybe try  calling`setBackgroundMode(SWT.INHERIT_DEFAULT)` on the parent `Composite`, also try `SWT.INHERIT_FORCE`","body":"Maybe try  calling<code>setBackgroundMode(SWT.INHERIT_DEFAULT)</code> on the parent <code>Composite</code>, also try <code>SWT.INHERIT_FORCE</code>"},{"owner":{"account_id":29183303,"reputation":1,"user_id":22357008,"display_name":"sEul"},"score":0,"creation_date":1691572736,"post_id":76858145,"comment_id":135508546,"body_markdown":"Yes, SWT.INHERIT_FORCE worked for me.\nThank you!!","body":"Yes, SWT.INHERIT_FORCE worked for me. Thank you!!"}],"owner":{"account_id":29183303,"reputation":1,"user_id":22357008,"display_name":"sEul"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":32,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1691604280,"creation_date":1691486296,"question_id":76858145,"body_markdown":"I have created an swt button but I can see there is a white border around the button. Is there anyway I can make the border bounds equal to button or remove that white border around the button?\r\nThis issue I&#39;m facing only on windows. On MacOs I don&#39;t see any white border around these buttons.\r\n\r\n\r\nI did try using SWT.FLAT while creating the button and I also tried using GridData to set the widthHint, HeightHint to 0 but nothing helped.","title":"Is there a way to remove border of swt button or at least to make bounds of border equal to that of button only on windows","body":"<p>I have created an swt button but I can see there is a white border around the button. Is there anyway I can make the border bounds equal to button or remove that white border around the button?\nThis issue I'm facing only on windows. On MacOs I don't see any white border around these buttons.</p>\n<p>I did try using SWT.FLAT while creating the button and I also tried using GridData to set the widthHint, HeightHint to 0 but nothing helped.</p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":974448,"reputation":3435,"user_id":2042457,"accept_rate":56,"display_name":"aksappy"},"score":3,"creation_date":1625861923,"post_id":68322316,"comment_id":120749376,"body_markdown":"You don&#39;t have to return the exception, instead return false. If you want to handle the exception near actionResult, throw e instead of returning e.","body":"You don&#39;t have to return the exception, instead return false. If you want to handle the exception near actionResult, throw e instead of returning e."},{"owner":{"account_id":12324258,"reputation":717,"user_id":8992732,"display_name":"Yohan Malshika"},"score":0,"creation_date":1625862057,"post_id":68322316,"comment_id":120749412,"body_markdown":"Do you want to return boolean value from the removeMember method?","body":"Do you want to return boolean value from the removeMember method?"},{"owner":{"display_name":"user14101761"},"score":0,"creation_date":1625862213,"post_id":68322316,"comment_id":120749456,"body_markdown":"@aksappy i considered that one but I am required to put the exception in some log file, which I could do in the method itself but couldn&#39;t help wonder if something like this is possible so the MemberAction class doesn&#39;t really know much about the rest of the app. Purely a learning thing I am doing.","body":"@aksappy i considered that one but I am required to put the exception in some log file, which I could do in the method itself but couldn&#39;t help wonder if something like this is possible so the MemberAction class doesn&#39;t really know much about the rest of the app. Purely a learning thing I am doing."},{"owner":{"account_id":3377022,"reputation":11135,"user_id":2834978,"display_name":"LMC"},"score":1,"creation_date":1625862295,"post_id":68322316,"comment_id":120749471,"body_markdown":"Methods return a value of some type or nothing but throw an exception if something goes wrong. Never seen a method returning an exception while it could be possible I think,","body":"Methods return a value of some type or nothing but throw an exception if something goes wrong. Never seen a method returning an exception while it could be possible I think,"},{"owner":{"account_id":7034556,"reputation":12325,"user_id":5389127,"display_name":"Ga&#235;l J"},"score":0,"creation_date":1625862709,"post_id":68322316,"comment_id":120749580,"body_markdown":"In pure Java you don&#39;t do such thing. You return a type and throw exceptions. If you are coming from a functional background, you could make use of `Either&lt;Exception,Boolean&gt;` type from Vavr library maybe to represent 2 possible returns though.","body":"In pure Java you don&#39;t do such thing. You return a type and throw exceptions. If you are coming from a functional background, you could make use of <code>Either&lt;Exception,Boolean&gt;</code> type from Vavr library maybe to represent 2 possible returns though."}],"answers":[{"tags":[],"owner":{"account_id":1547313,"reputation":82154,"user_id":1440565,"accept_rate":59,"display_name":"Code-Apprentice"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1625862708,"creation_date":1625862265,"answer_id":68322375,"question_id":68322316,"body_markdown":"You shouldn&#39;t return an exception from a function. Instead, you should `throw` it. But since your code in the function might already throw an exception, you don&#39;t need to do anything:\r\n\r\n```\r\n   public static boolean removeMember(Member m){\r\n        //do stuff here that possibly throw the exception\r\n        //if nothing is wrong, return true\r\n        return true;\r\n    }\r\n```\r\nNow when you call the method, do the `try...catch`:\r\n\r\n```\r\n  \r\n  try {\r\n    actionResult = mActions.removeMember(m);\r\n    // do something with actionResult\r\n  }catch{\r\n    // remove failed\r\n  }\r\n```\r\n\r\nAlternatively, you can handle the exception in `removeMember()`, but return `false`:\r\n```\r\n   public static boolean removeMember(Member m){\r\n   \r\n        try {\r\n            //do stuff here that possibly throw the exception\r\n            //if nothing is wrong, return true\r\n            return true;\r\n        } catch (IllegalStateException e){\r\n            return false;\r\n        }\r\n    }\r\n```\r\n\r\nNote that every return should have the same type. It is not a good idea to declare `Object` as the return type in order to return things that are completely different types.\r\n\r\nThis provides the benefit that now you don&#39;t need to compare `if(actionResult.equals(true))`. Instead you can just use `if(actionResult)` since `actionResult` is a boolean.","title":"return boolean or an exception from a method","body":"<p>You shouldn't return an exception from a function. Instead, you should <code>throw</code> it. But since your code in the function might already throw an exception, you don't need to do anything:</p>\n<pre><code>   public static boolean removeMember(Member m){\n        //do stuff here that possibly throw the exception\n        //if nothing is wrong, return true\n        return true;\n    }\n</code></pre>\n<p>Now when you call the method, do the <code>try...catch</code>:</p>\n<pre><code>  \n  try {\n    actionResult = mActions.removeMember(m);\n    // do something with actionResult\n  }catch{\n    // remove failed\n  }\n</code></pre>\n<p>Alternatively, you can handle the exception in <code>removeMember()</code>, but return <code>false</code>:</p>\n<pre><code>   public static boolean removeMember(Member m){\n   \n        try {\n            //do stuff here that possibly throw the exception\n            //if nothing is wrong, return true\n            return true;\n        } catch (IllegalStateException e){\n            return false;\n        }\n    }\n</code></pre>\n<p>Note that every return should have the same type. It is not a good idea to declare <code>Object</code> as the return type in order to return things that are completely different types.</p>\n<p>This provides the benefit that now you don't need to compare <code>if(actionResult.equals(true))</code>. Instead you can just use <code>if(actionResult)</code> since <code>actionResult</code> is a boolean.</p>\n"},{"tags":[],"owner":{"account_id":13615604,"reputation":278,"user_id":9821615,"display_name":"Hira Kumar Maharjan"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691604153,"creation_date":1625863264,"answer_id":68322499,"question_id":68322316,"body_markdown":"Lot of think you need to do here,  I have given a sample of wrong file path file to load which will show exception but at last it will return true from finally\r\n\r\n    import java.io.*;\r\n    public class Test {\r\n    public static Boolean Method_B() {\r\n        try {\r\n            System.out.println(&quot;Main working going..&quot;);\r\n            File file = new File(&quot;./nofile.txt&quot;);\r\n            FileInputStream fis = new FileInputStream(file);\r\n        } catch (IOException e) {\r\n            // Exception handling\r\n            System.out.println(&quot;No file found &quot;);\r\n        } catch (Exception e) {\r\n            // Exception handling\r\n            System.out.println(e);\r\n        } finally {\r\n            return true;\r\n        }\r\n    }\r\n    public static void main(String args[]) {\r\n        if (Test.Method_B()) {\r\n            System.out.println(&quot;Show true ans&quot;);\r\n        } else {\r\n            System.out.println(&quot;Sorry error occured&quot;);\r\n        }\r\n\r\n    }\r\n    }","title":"return boolean or an exception from a method","body":"<p>Lot of think you need to do here,  I have given a sample of wrong file path file to load which will show exception but at last it will return true from finally</p>\n<pre><code>import java.io.*;\npublic class Test {\npublic static Boolean Method_B() {\n    try {\n        System.out.println(&quot;Main working going..&quot;);\n        File file = new File(&quot;./nofile.txt&quot;);\n        FileInputStream fis = new FileInputStream(file);\n    } catch (IOException e) {\n        // Exception handling\n        System.out.println(&quot;No file found &quot;);\n    } catch (Exception e) {\n        // Exception handling\n        System.out.println(e);\n    } finally {\n        return true;\n    }\n}\npublic static void main(String args[]) {\n    if (Test.Method_B()) {\n        System.out.println(&quot;Show true ans&quot;);\n    } else {\n        System.out.println(&quot;Sorry error occured&quot;);\n    }\n\n}\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3508628,"reputation":501,"user_id":2933553,"accept_rate":50,"display_name":"SaleemKhair"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1625983089,"creation_date":1625863703,"answer_id":68322554,"question_id":68322316,"body_markdown":"There are multiple practices involving the remove operations in OOP,\r\n\r\n1. You can return the member that was removed inside a `Optional` object, where you can evaluate `.present()` in your condition later.\r\nThat will require you to silently handle the exception thrown on error, but you MUST log the error and return an empty `Optional` object. \r\n-&gt; We can see this in most CRUD interfaces.\r\n\r\n2. You could return a boolean `false` in your catch block, but that will also require you to log the exception message. \r\n-&gt; this is a best practice if you want to avoid interrupting the thread, like in UI apps.\r\n\r\n3. You could just re-throw the exception and have the caller of the function catch it, in this case you have to choises:\r\n\r\n   - Definite `throws` in your function, which will force the caller to catch it at compile time, this is called a **Checked Exception** If you believe an error here is fatal.\r\n   - Throw an unchecked exception **RuntimeException** and have it be thrown to the caller at runtime.\r\n\r\n   -&gt; Usually seen in API implementations where you want to give the caller the freedom to handle the call","title":"return boolean or an exception from a method","body":"<p>There are multiple practices involving the remove operations in OOP,</p>\n<ol>\n<li><p>You can return the member that was removed inside a <code>Optional</code> object, where you can evaluate <code>.present()</code> in your condition later.\nThat will require you to silently handle the exception thrown on error, but you MUST log the error and return an empty <code>Optional</code> object.\n-&gt; We can see this in most CRUD interfaces.</p>\n</li>\n<li><p>You could return a boolean <code>false</code> in your catch block, but that will also require you to log the exception message.\n-&gt; this is a best practice if you want to avoid interrupting the thread, like in UI apps.</p>\n</li>\n<li><p>You could just re-throw the exception and have the caller of the function catch it, in this case you have to choises:</p>\n<ul>\n<li>Definite <code>throws</code> in your function, which will force the caller to catch it at compile time, this is called a <strong>Checked Exception</strong> If you believe an error here is fatal.</li>\n<li>Throw an unchecked exception <strong>RuntimeException</strong> and have it be thrown to the caller at runtime.</li>\n</ul>\n<p>-&gt; Usually seen in API implementations where you want to give the caller the freedom to handle the call</p>\n</li>\n</ol>\n"},{"tags":[],"owner":{"account_id":1377349,"reputation":53,"user_id":1311094,"display_name":"Maur&#237;cio Avellar"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1625869011,"creation_date":1625869011,"answer_id":68323176,"question_id":68322316,"body_markdown":"You can:\r\n\r\n```\r\npublic static Boolean removeMember(Member m) {\r\n   \r\n    try {\r\n        //do stuff here that possibly throw the exception\r\n        //if nothing is wrong, return true\r\n        return true;\r\n    } catch (IllegalStateException e) {\r\n        return false;\r\n    }\r\n}\r\n```\r\n\r\nThen you could use like this:\r\n\r\n```\r\nif (actionResult.removeMember(m)) {\r\n\r\n} else {\r\n            \r\n}\r\n```\r\n\r\nMaybe if you can give us some more info on whether you need your method to return Boolean or an Exception type or even both, we could come up with a better version of the method. Maybe something like this:\r\n\r\n```\r\npublic static Object[] removeMember(Member m) {\r\n    try {\r\n        //do stuff here that possibly throw the exception\r\n        //if nothing is wrong, return true\r\n        return new Object[] {true, null};\r\n    } catch (Exception e){\r\n        return new Object[] {false, e};\r\n    }\r\n}\r\n```\r\n\r\nKeep in mind in my last example I am no longer returning a Boolean so my previous ```if``` wouldn&#39;t work. But you could easily access both Boolean and any other object returned from the method just by:\r\n\r\n```\r\nObject[] ob = actionResult.removeMember(m);\r\n    System.out.println(ob[0] + &quot; &quot; + ob[1]);\r\n```","title":"return boolean or an exception from a method","body":"<p>You can:</p>\n<pre><code>public static Boolean removeMember(Member m) {\n   \n    try {\n        //do stuff here that possibly throw the exception\n        //if nothing is wrong, return true\n        return true;\n    } catch (IllegalStateException e) {\n        return false;\n    }\n}\n</code></pre>\n<p>Then you could use like this:</p>\n<pre><code>if (actionResult.removeMember(m)) {\n\n} else {\n            \n}\n</code></pre>\n<p>Maybe if you can give us some more info on whether you need your method to return Boolean or an Exception type or even both, we could come up with a better version of the method. Maybe something like this:</p>\n<pre><code>public static Object[] removeMember(Member m) {\n    try {\n        //do stuff here that possibly throw the exception\n        //if nothing is wrong, return true\n        return new Object[] {true, null};\n    } catch (Exception e){\n        return new Object[] {false, e};\n    }\n}\n</code></pre>\n<p>Keep in mind in my last example I am no longer returning a Boolean so my previous <code>if</code> wouldn't work. But you could easily access both Boolean and any other object returned from the method just by:</p>\n<pre><code>Object[] ob = actionResult.removeMember(m);\n    System.out.println(ob[0] + &quot; &quot; + ob[1]);\n</code></pre>\n"}],"owner":{"display_name":"user14101761"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2559,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":4,"score":1,"last_activity_date":1691604153,"creation_date":1625861825,"question_id":68322316,"body_markdown":"I am learning Java and got stuck. I have this function:\r\n\r\n       class MemberAction{\r\n\r\n       public static Object removeMember(Member m){\r\n       \r\n            try {\r\n                //do stuff here that possibly throw the exception\r\n                //if nothing is wrong, return true\r\n                return true;\r\n            } catch (IllegalStateException e){\r\n                return e;\r\n            }\r\n        }\r\n     }\r\n\r\nthen call it like this:\r\n\r\n      Object actionResult = mActions.removeMember(m);\r\n      if(actionResult.equals(true)){\r\n\r\n      }else{\r\n\r\n      }\r\n\r\nit looks a bit weird and wondering if there is a better way to doing something like this. MemberAction methods return exception or a primitive value (some could be numbers or string) hence my equals(true) approach wont work always.\r\n\r\nWhat would be a good way to create a function that can return a primitive data or an exception and then check what the response was in a good way?","title":"return boolean or an exception from a method","body":"<p>I am learning Java and got stuck. I have this function:</p>\n<pre><code>   class MemberAction{\n\n   public static Object removeMember(Member m){\n   \n        try {\n            //do stuff here that possibly throw the exception\n            //if nothing is wrong, return true\n            return true;\n        } catch (IllegalStateException e){\n            return e;\n        }\n    }\n }\n</code></pre>\n<p>then call it like this:</p>\n<pre><code>  Object actionResult = mActions.removeMember(m);\n  if(actionResult.equals(true)){\n\n  }else{\n\n  }\n</code></pre>\n<p>it looks a bit weird and wondering if there is a better way to doing something like this. MemberAction methods return exception or a primitive value (some could be numbers or string) hence my equals(true) approach wont work always.</p>\n<p>What would be a good way to create a function that can return a primitive data or an exception and then check what the response was in a good way?</p>\n"},{"tags":["java","garbage-collection"],"comments":[{"owner":{"account_id":9930295,"reputation":11613,"user_id":11082165,"display_name":"Brian61354270"},"score":4,"creation_date":1691601493,"post_id":76869948,"comment_id":135514918,"body_markdown":"Could you clarify which part of the articles explanation you don&#39;t understand? It seems to sum it up concisely: _&quot;the Clutch object itself, which is an inner class, contains a reference to its enclosing instance, which is the Car object. Because of that reference, the Car object is still reachable after line 12&quot;_","body":"Could you clarify which part of the articles explanation you don&#39;t understand? It seems to sum it up concisely: <i>&quot;the Clutch object itself, which is an inner class, contains a reference to its enclosing instance, which is the Car object. Because of that reference, the Car object is still reachable after line 12&quot;</i>"},{"owner":{"account_id":9930295,"reputation":11613,"user_id":11082165,"display_name":"Brian61354270"},"score":2,"creation_date":1691601613,"post_id":76869948,"comment_id":135514938,"body_markdown":"Also, please note that questions on Stack Overflow _must be self contained_. It&#39;s OK to link that article as a reference, but your question must be understandable and answerable without accessing it. Please [edit] your question to include all of the essential parts, and/or reduce it to a [mre] of the part that you&#39;re asking about","body":"Also, please note that questions on Stack Overflow <i>must be self contained</i>. It&#39;s OK to link that article as a reference, but your question must be understandable and answerable without accessing it. Please <a href=\"https://stackoverflow.com/posts/76869948/edit\">edit</a> your question to include all of the essential parts, and/or reduce it to a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> of the part that you&#39;re asking about"},{"owner":{"account_id":4924944,"reputation":378,"user_id":3966432,"accept_rate":80,"display_name":"user3966432"},"score":0,"creation_date":1691602234,"post_id":76869948,"comment_id":135515043,"body_markdown":"Thanks @Brian61354270. As suggested updated the question.","body":"Thanks @Brian61354270. As suggested updated the question."},{"owner":{"account_id":9930295,"reputation":11613,"user_id":11082165,"display_name":"Brian61354270"},"score":1,"creation_date":1691602530,"post_id":76869948,"comment_id":135515098,"body_markdown":"Could you clarify what you think the contents of `rl` is at lines 10, 11, and 12? I think you may be either missing the fact that line 11 shifted the elements in the list, or are thinking that index 1 means the first element when it really means the second. Lines 11 and 12 together removes the elements that were at indices 0 and 2 as of line 10.","body":"Could you clarify what you think the contents of <code>rl</code> is at lines 10, 11, and 12? I think you may be either missing the fact that line 11 shifted the elements in the list, or are thinking that index 1 means the first element when it really means the second. Lines 11 and 12 together removes the elements that were at indices 0 and 2 as of line 10."},{"owner":{"account_id":22057425,"reputation":135,"user_id":16320675,"display_name":"user16320675"},"score":1,"creation_date":1691602679,"post_id":76869948,"comment_id":135515124,"body_markdown":"after line 11, the clutch is at index 0; index 1 holds `null` that was added as index 2, but line 11 removed the first element (`remove(0)`), so now `null` is at index 1","body":"after line 11, the clutch is at index 0; index 1 holds <code>null</code> that was added as index 2, but line 11 removed the first element (<code>remove(0)</code>), so now <code>null</code> is at index 1"},{"owner":{"account_id":2994830,"reputation":1,"user_id":2541560,"display_name":"Kayaman"},"score":2,"creation_date":1691603368,"post_id":76869948,"comment_id":135515247,"body_markdown":"Before line 11: `[car, clutch, null]`, after line 11: `[clutch, null]`, `remove(1)` removes the `null` and the final list is `[clutch]`.","body":"Before line 11: <code>[car, clutch, null]</code>, after line 11: <code>[clutch, null]</code>, <code>remove(1)</code> removes the <code>null</code> and the final list is <code>[clutch]</code>."},{"owner":{"account_id":4924944,"reputation":378,"user_id":3966432,"accept_rate":80,"display_name":"user3966432"},"score":0,"creation_date":1691603635,"post_id":76869948,"comment_id":135515293,"body_markdown":"You are right Brian61354270,  \nuser16320675, and kayaman I was missing the point that line no. 11 would shift all upper indexes","body":"You are right Brian61354270,   user16320675, and kayaman I was missing the point that line no. 11 would shift all upper indexes"},{"owner":{"account_id":1888781,"reputation":2007,"user_id":1707427,"display_name":"S&#246;ren"},"score":0,"creation_date":1691606989,"post_id":76869948,"comment_id":135515860,"body_markdown":"And for the future: Even after your edit, your code doesn&#39;t compile and is missing vital information to answer the question (the fact that Clutch is a non-static inner class). Again, please read [mre].","body":"And for the future: Even after your edit, your code doesn&#39;t compile and is missing vital information to answer the question (the fact that Clutch is a non-static inner class). Again, please read <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>."}],"answers":[{"tags":[],"owner":{"account_id":465573,"reputation":192694,"user_id":869736,"accept_rate":82,"display_name":"Louis Wasserman"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1691603791,"creation_date":1691603791,"answer_id":76870211,"question_id":76869948,"body_markdown":"You have missed that the first call to `remove` shifts the indexes of the other elements.  `remove(1)` on line 12 removes the `null`; `clutch` is still in the array, and `clutch` contains a reference to the `Car` because it is nonstatic.","title":"Is this Java Magazine Quiz answer is correct on Java Garbage Collector","body":"<p>You have missed that the first call to <code>remove</code> shifts the indexes of the other elements.  <code>remove(1)</code> on line 12 removes the <code>null</code>; <code>clutch</code> is still in the array, and <code>clutch</code> contains a reference to the <code>Car</code> because it is nonstatic.</p>\n"}],"owner":{"account_id":4924944,"reputation":378,"user_id":3966432,"accept_rate":80,"display_name":"user3966432"},"comment_count":8,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":63,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"accepted_answer_id":76870211,"answer_count":1,"score":0,"last_activity_date":1691603791,"creation_date":1691601099,"question_id":76869948,"body_markdown":"As per my understanding of the below code snippet, the Car object will become eligible for GC after line no. 12. But the given solution says it will not. Can anyone check the below link and correct me if I am wrong?\r\n\r\n    01: var rl = new ArrayList&lt;Repairable&gt;();\r\n    02: var car = new Car();\r\n    03: var clutch = car.getClutch();\r\n    04: var engine = (Repairable) null;\r\n    05: rl.add(car);\r\n    06: rl.add(clutch);\r\n    07: car = null;\r\n    08: clutch = null;\r\n    09: rl.add(engine);\r\n    10: rl.set(2, engine);\r\n    11: rl.remove(0);\r\n    12: rl.remove(1);\r\n\r\n\r\nhttps://blogs.oracle.com/javamagazine/post/java-quiz-object-reachability\r\n\r\nUpdate: The article says &quot;Car object will not become eligible for GC even after line 12.&quot;\r\n\r\nI am not agreeing especially on this line. At index 1, the value is not null it actually holds the clutch object\r\n\r\n&gt; Line 12 removes the item at index 1, which is the null. The list, therefore, contains nothing except the clutch.\r\n\r\n","title":"Is this Java Magazine Quiz answer is correct on Java Garbage Collector","body":"<p>As per my understanding of the below code snippet, the Car object will become eligible for GC after line no. 12. But the given solution says it will not. Can anyone check the below link and correct me if I am wrong?</p>\n<pre><code>01: var rl = new ArrayList&lt;Repairable&gt;();\n02: var car = new Car();\n03: var clutch = car.getClutch();\n04: var engine = (Repairable) null;\n05: rl.add(car);\n06: rl.add(clutch);\n07: car = null;\n08: clutch = null;\n09: rl.add(engine);\n10: rl.set(2, engine);\n11: rl.remove(0);\n12: rl.remove(1);\n</code></pre>\n<p><a href=\"https://blogs.oracle.com/javamagazine/post/java-quiz-object-reachability\" rel=\"nofollow noreferrer\">https://blogs.oracle.com/javamagazine/post/java-quiz-object-reachability</a></p>\n<p>Update: The article says &quot;Car object will not become eligible for GC even after line 12.&quot;</p>\n<p>I am not agreeing especially on this line. At index 1, the value is not null it actually holds the clutch object</p>\n<blockquote>\n<p>Line 12 removes the item at index 1, which is the null. The list, therefore, contains nothing except the clutch.</p>\n</blockquote>\n"},{"tags":["java","ant","maven"],"comments":[{"owner":{"account_id":102129,"reputation":7632,"user_id":274344,"accept_rate":82,"display_name":"Simeon"},"score":0,"creation_date":1317202971,"post_id":7581156,"comment_id":9193677,"body_markdown":"Can&#39;t you just compile the sources you need from ant ?","body":"Can&#39;t you just compile the sources you need from ant ?"}],"answers":[{"tags":[],"owner":{"account_id":102129,"reputation":7632,"user_id":274344,"accept_rate":82,"display_name":"Simeon"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1317202813,"creation_date":1317202813,"answer_id":7581209,"question_id":7581156,"body_markdown":"You can use the [exec task][1] and call `mvn compile` as a terminal command. This is not ideal since you won&#39;t have any control over the execution, but otherwise I don&#39;t think there is a way to execute a Maven goal.\r\n\r\n\r\n  [1]: http://ant.apache.org/manual/Tasks/exec.html","title":"How to call for a Maven goal within an Ant script?","body":"<p>You can use the <a href=\"http://ant.apache.org/manual/Tasks/exec.html\" rel=\"nofollow\">exec task</a> and call <code>mvn compile</code> as a terminal command. This is not ideal since you won't have any control over the execution, but otherwise I don't think there is a way to execute a Maven goal.</p>\n"},{"tags":[],"owner":{"account_id":138637,"reputation":3042,"user_id":343699,"accept_rate":100,"display_name":"mateusz.fiolka"},"down_vote_count":1,"up_vote_count":23,"is_accepted":true,"score":22,"last_activity_date":1430762662,"creation_date":1317203439,"answer_id":7581329,"question_id":7581156,"body_markdown":"An example of use of exec task utilizing Maven run from the Windows CLI would be:\r\n\r\n    &lt;target name=&quot;buildProject&quot; description=&quot;Builds the individual project&quot;&gt;\r\n        &lt;exec dir=&quot;${source.dir}\\${projectName}&quot; executable=&quot;cmd&quot;&gt;\r\n            &lt;arg value=&quot;/C&quot;/&gt;\r\n            &lt;arg value=&quot;${env.MAVEN_HOME}\\bin\\mvn.bat&quot;/&gt;\r\n            &lt;arg line=&quot;clean install&quot; /&gt;\r\n    &lt;/exec&gt;\r\n    &lt;/target&gt;\r\n\r\n","title":"How to call for a Maven goal within an Ant script?","body":"<p>An example of use of exec task utilizing Maven run from the Windows CLI would be:</p>\n\n<pre><code>&lt;target name=\"buildProject\" description=\"Builds the individual project\"&gt;\n    &lt;exec dir=\"${source.dir}\\${projectName}\" executable=\"cmd\"&gt;\n        &lt;arg value=\"/C\"/&gt;\n        &lt;arg value=\"${env.MAVEN_HOME}\\bin\\mvn.bat\"/&gt;\n        &lt;arg line=\"clean install\" /&gt;\n&lt;/exec&gt;\n&lt;/target&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":93007,"reputation":51990,"user_id":254643,"display_name":"Raghuram"},"down_vote_count":0,"up_vote_count":12,"is_accepted":false,"score":12,"last_activity_date":1476332650,"creation_date":1317206161,"answer_id":7581897,"question_id":7581156,"body_markdown":"You can also look at [maven ant tasks][1] which is now retired though as commented below.  This allows you to run specific maven goals from within your ant build script.  You can look at [this SO question][2] as well.\r\n\r\n  [1]: http://maven.apache.org/ant-tasks/index.html\r\n  [2]: https://stackoverflow.com/questions/7552895/can-we-use-pom-xml-into-ant/","title":"How to call for a Maven goal within an Ant script?","body":"<p>You can also look at <a href=\"http://maven.apache.org/ant-tasks/index.html\" rel=\"nofollow noreferrer\">maven ant tasks</a> which is now retired though as commented below.  This allows you to run specific maven goals from within your ant build script.  You can look at <a href=\"https://stackoverflow.com/questions/7552895/can-we-use-pom-xml-into-ant/\">this SO question</a> as well.</p>\n"},{"tags":[],"owner":{"account_id":305963,"reputation":480,"user_id":616413,"display_name":"tbrugz"},"down_vote_count":0,"up_vote_count":9,"is_accepted":false,"score":9,"last_activity_date":1381515828,"creation_date":1381515828,"answer_id":19324835,"question_id":7581156,"body_markdown":"You may use a `java` task (this example is similar to @mateusz.fiolka answer but also works on Linux)\r\n\r\n\t&lt;target name=&quot;mvn-install&quot;&gt;\r\n\t\t&lt;property environment=&quot;env&quot; /&gt;\r\n\t\t&lt;path id=&quot;classpath&quot;&gt;\r\n\t\t\t&lt;fileset dir=&quot;${env.M2_HOME}/boot&quot;&gt;\r\n\t\t\t\t&lt;include name=&quot;plexus-classworlds-*.jar&quot; /&gt;\r\n\t\t\t&lt;/fileset&gt;\r\n\t\t&lt;/path&gt;\r\n\t\t&lt;property name=&quot;mvn.mainclass&quot; value=&quot;org.codehaus.plexus.classworlds.launcher.Launcher&quot; /&gt;\r\n\t\t\r\n\t\t&lt;java classname=&quot;${mvn.mainclass}&quot; classpathref=&quot;classpath&quot; fork=&quot;true&quot; failonerror=&quot;true&quot;&gt;\r\n\t\t\t&lt;jvmarg value=&quot;-Dclassworlds.conf=${env.M2_HOME}/bin/m2.conf&quot; /&gt;\r\n\t\t\t&lt;jvmarg value=&quot;-Dmaven.home=${env.M2_HOME}&quot; /&gt;\r\n\t\t\t&lt;arg value=&quot;install&quot; /&gt;\r\n\t\t&lt;/java&gt;\r\n\t&lt;/target&gt;\r\n\r\ntested with maven 3.0.5","title":"How to call for a Maven goal within an Ant script?","body":"<p>You may use a <code>java</code> task (this example is similar to @mateusz.fiolka answer but also works on Linux)</p>\n\n<pre><code>&lt;target name=\"mvn-install\"&gt;\n    &lt;property environment=\"env\" /&gt;\n    &lt;path id=\"classpath\"&gt;\n        &lt;fileset dir=\"${env.M2_HOME}/boot\"&gt;\n            &lt;include name=\"plexus-classworlds-*.jar\" /&gt;\n        &lt;/fileset&gt;\n    &lt;/path&gt;\n    &lt;property name=\"mvn.mainclass\" value=\"org.codehaus.plexus.classworlds.launcher.Launcher\" /&gt;\n\n    &lt;java classname=\"${mvn.mainclass}\" classpathref=\"classpath\" fork=\"true\" failonerror=\"true\"&gt;\n        &lt;jvmarg value=\"-Dclassworlds.conf=${env.M2_HOME}/bin/m2.conf\" /&gt;\n        &lt;jvmarg value=\"-Dmaven.home=${env.M2_HOME}\" /&gt;\n        &lt;arg value=\"install\" /&gt;\n    &lt;/java&gt;\n&lt;/target&gt;\n</code></pre>\n\n<p>tested with maven 3.0.5</p>\n"},{"tags":[],"owner":{"account_id":2719313,"reputation":15631,"user_id":2345933,"accept_rate":84,"display_name":"Adam Siemion"},"down_vote_count":0,"up_vote_count":37,"is_accepted":false,"score":37,"last_activity_date":1421679324,"creation_date":1397479790,"answer_id":23060549,"question_id":7581156,"body_markdown":"Since none of the solutions worked for me, this is what I came up with:\r\n\r\nAssuming you are running on Windows:\r\n\r\n\t&lt;target name=&quot;mvn&quot;&gt;\r\n\t\t&lt;exec dir=&quot;.&quot; executable=&quot;cmd&quot;&gt;\r\n\t\t\t&lt;arg line=&quot;/c mvn clean install&quot; /&gt;\r\n\t\t&lt;/exec&gt;\r\n\t&lt;/target&gt;\r\n\r\nor on UNIX:\r\n\r\n\t&lt;target name=&quot;mvn&quot;&gt;\r\n\t\t&lt;exec dir=&quot;.&quot; executable=&quot;sh&quot;&gt;\r\n\t\t\t&lt;arg line=&quot;-c &#39;mvn clean install&#39;&quot; /&gt;\r\n\t\t&lt;/exec&gt;\r\n\t&lt;/target&gt;\r\n\r\nor if you want it to work on both UNIX and Windows:\r\n\r\n\t&lt;condition property=&quot;isWindows&quot;&gt;\r\n\t\t&lt;os family=&quot;windows&quot; /&gt;\r\n\t&lt;/condition&gt;\r\n\r\n\t&lt;condition property=&quot;isUnix&quot;&gt;\r\n\t\t&lt;os family=&quot;unix&quot; /&gt;\r\n\t&lt;/condition&gt;\r\n\r\n\t&lt;target name=&quot;all&quot; depends=&quot;mvn_windows, mvn_unix&quot;/&gt;\r\n\r\n\t&lt;target name=&quot;mvn_windows&quot; if=&quot;isWindows&quot;&gt;\r\n\t\t&lt;exec dir=&quot;.&quot; executable=&quot;cmd&quot;&gt;\r\n\t\t\t&lt;arg line=&quot;/c mvn clean install&quot; /&gt;\r\n\t\t&lt;/exec&gt;\r\n\t&lt;/target&gt;\r\n\r\n\t&lt;target name=&quot;mvn_unix&quot; if=&quot;isUnix&quot;&gt;\r\n\t\t&lt;exec dir=&quot;.&quot; executable=&quot;sh&quot;&gt;\r\n\t\t\t&lt;arg line=&quot;-c &#39;mvn clean install&#39;&quot; /&gt;\r\n\t\t&lt;/exec&gt;\r\n\t&lt;/target&gt;","title":"How to call for a Maven goal within an Ant script?","body":"<p>Since none of the solutions worked for me, this is what I came up with:</p>\n\n<p>Assuming you are running on Windows:</p>\n\n<pre><code>&lt;target name=\"mvn\"&gt;\n    &lt;exec dir=\".\" executable=\"cmd\"&gt;\n        &lt;arg line=\"/c mvn clean install\" /&gt;\n    &lt;/exec&gt;\n&lt;/target&gt;\n</code></pre>\n\n<p>or on UNIX:</p>\n\n<pre><code>&lt;target name=\"mvn\"&gt;\n    &lt;exec dir=\".\" executable=\"sh\"&gt;\n        &lt;arg line=\"-c 'mvn clean install'\" /&gt;\n    &lt;/exec&gt;\n&lt;/target&gt;\n</code></pre>\n\n<p>or if you want it to work on both UNIX and Windows:</p>\n\n<pre><code>&lt;condition property=\"isWindows\"&gt;\n    &lt;os family=\"windows\" /&gt;\n&lt;/condition&gt;\n\n&lt;condition property=\"isUnix\"&gt;\n    &lt;os family=\"unix\" /&gt;\n&lt;/condition&gt;\n\n&lt;target name=\"all\" depends=\"mvn_windows, mvn_unix\"/&gt;\n\n&lt;target name=\"mvn_windows\" if=\"isWindows\"&gt;\n    &lt;exec dir=\".\" executable=\"cmd\"&gt;\n        &lt;arg line=\"/c mvn clean install\" /&gt;\n    &lt;/exec&gt;\n&lt;/target&gt;\n\n&lt;target name=\"mvn_unix\" if=\"isUnix\"&gt;\n    &lt;exec dir=\".\" executable=\"sh\"&gt;\n        &lt;arg line=\"-c 'mvn clean install'\" /&gt;\n    &lt;/exec&gt;\n&lt;/target&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":469001,"reputation":7729,"user_id":875305,"accept_rate":67,"display_name":"11101101b"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1450385977,"creation_date":1450385977,"answer_id":34344132,"question_id":7581156,"body_markdown":"I used [this answer][1] from [@Adam Siemion][2] above, but I didn&#39;t want separate targets for running on Windows or Linux. Instead I just set the property near the top of my ant script:\r\n\r\n\t&lt;condition property=&quot;isAntRunningOnWindows&quot;&gt;\r\n\t    &lt;os family=&quot;windows&quot; /&gt;\r\n\t&lt;/condition&gt;\r\n\r\nThen in the middle of my script I use an if-then-else statement:\r\n\r\n\t&lt;if&gt;\r\n\t\t&lt;equals arg1=&quot;${isAntRunningOnWindows}&quot; arg2=&quot;true&quot; /&gt;\r\n\t\t&lt;then&gt;\r\n\t\t\t&lt;echo message=&quot;OS is Windows&quot; /&gt;\r\n\t\t\t&lt;exec dir=&quot;.&quot; executable=&quot;cmd&quot;&gt;\r\n\t\t\t\t&lt;arg line=&quot;/c mvn clean package&quot; /&gt;\r\n\t\t\t&lt;/exec&gt;\r\n\t\t&lt;/then&gt;\r\n\t\t&lt;else&gt;\r\n\t\t\t&lt;echo message=&quot;OS is Linux/Unix&quot; /&gt;\r\n\t\t\t&lt;exec dir=&quot;.&quot; executable=&quot;sh&quot;&gt;\r\n\t\t\t\t&lt;arg line=&quot;-c &#39;mvn clean package&#39;&quot; /&gt;\r\n\t\t\t&lt;/exec&gt;\r\n\t\t&lt;/else&gt;\r\n\t&lt;/if&gt;\r\n\r\n\r\n  [1]: https://stackoverflow.com/a/23060549/875305\r\n  [2]: https://stackoverflow.com/users/2345933/adam-siemion","title":"How to call for a Maven goal within an Ant script?","body":"<p>I used <a href=\"https://stackoverflow.com/a/23060549/875305\">this answer</a> from <a href=\"https://stackoverflow.com/users/2345933/adam-siemion\">@Adam Siemion</a> above, but I didn't want separate targets for running on Windows or Linux. Instead I just set the property near the top of my ant script:</p>\n\n<pre><code>&lt;condition property=\"isAntRunningOnWindows\"&gt;\n    &lt;os family=\"windows\" /&gt;\n&lt;/condition&gt;\n</code></pre>\n\n<p>Then in the middle of my script I use an if-then-else statement:</p>\n\n<pre><code>&lt;if&gt;\n    &lt;equals arg1=\"${isAntRunningOnWindows}\" arg2=\"true\" /&gt;\n    &lt;then&gt;\n        &lt;echo message=\"OS is Windows\" /&gt;\n        &lt;exec dir=\".\" executable=\"cmd\"&gt;\n            &lt;arg line=\"/c mvn clean package\" /&gt;\n        &lt;/exec&gt;\n    &lt;/then&gt;\n    &lt;else&gt;\n        &lt;echo message=\"OS is Linux/Unix\" /&gt;\n        &lt;exec dir=\".\" executable=\"sh\"&gt;\n            &lt;arg line=\"-c 'mvn clean package'\" /&gt;\n        &lt;/exec&gt;\n    &lt;/else&gt;\n&lt;/if&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2003177,"reputation":16895,"user_id":1793718,"accept_rate":69,"display_name":"Lucky"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1453204938,"creation_date":1453194245,"answer_id":34872525,"question_id":7581156,"body_markdown":"I am using the following target to run maven `clean`, `install` and `clean install` goals. Works fine.\r\n\r\n    &lt;project name=&quot;Maven run goals&quot; basedir=&quot;.&quot;  \r\n             xmlns:artifact=&quot;antlib:org.apache.maven.artifact.ant&quot;\r\n             xmlns:rsel=&quot;antlib:org.apache.tools.ant.types.resources.selectors&quot;&gt;\r\n\r\n\t\t&lt;target name=&quot;maven clean&quot;&gt;\r\n\t\t\t&lt;artifact:mvn mavenHome=&quot;${maven.home}&quot; fork=&quot;true&quot;&gt;\r\n\t\t\t\t&lt;arg value=&quot;clean&quot; /&gt;\r\n\t\t\t&lt;/artifact:mvn&gt;\r\n\t\t&lt;/target&gt;\r\n\t\t\t\t\r\n\t\t&lt;target name=&quot;maven install&quot;&gt;\r\n\t\t\t&lt;artifact:mvn mavenHome=&quot;${maven.home}&quot; fork=&quot;true&quot;&gt;\r\n\t\t\t\t&lt;arg value=&quot;install&quot; /&gt;\r\n\t\t\t&lt;/artifact:mvn&gt;\r\n\t\t&lt;/target&gt;\r\n\t\t\t\t\r\n\t\t&lt;target name=&quot;maven clean-install&quot;&gt;\r\n\t\t\t&lt;artifact:mvn mavenHome=&quot;${maven.home}&quot; fork=&quot;true&quot;&gt;\r\n\t\t\t\t&lt;arg value=&quot;clean&quot; /&gt;\r\n                &lt;arg value=&quot;install&quot; /&gt;\r\n\t\t\t&lt;/artifact:mvn&gt;\r\n\t\t&lt;/target&gt;\r\n\r\n\t&lt;/project&gt;\r\n\r\nYour maven.home property should point to the maven home directory. For example,\r\n\r\n    &lt;property name=&quot;maven.home&quot; value=&quot;D:\\\\Downloads\\\\apache-maven-3.0.5&quot;/&gt;","title":"How to call for a Maven goal within an Ant script?","body":"<p>I am using the following target to run maven <code>clean</code>, <code>install</code> and <code>clean install</code> goals. Works fine.</p>\n\n<pre><code>&lt;project name=\"Maven run goals\" basedir=\".\"  \n         xmlns:artifact=\"antlib:org.apache.maven.artifact.ant\"\n         xmlns:rsel=\"antlib:org.apache.tools.ant.types.resources.selectors\"&gt;\n\n    &lt;target name=\"maven clean\"&gt;\n        &lt;artifact:mvn mavenHome=\"${maven.home}\" fork=\"true\"&gt;\n            &lt;arg value=\"clean\" /&gt;\n        &lt;/artifact:mvn&gt;\n    &lt;/target&gt;\n\n    &lt;target name=\"maven install\"&gt;\n        &lt;artifact:mvn mavenHome=\"${maven.home}\" fork=\"true\"&gt;\n            &lt;arg value=\"install\" /&gt;\n        &lt;/artifact:mvn&gt;\n    &lt;/target&gt;\n\n    &lt;target name=\"maven clean-install\"&gt;\n        &lt;artifact:mvn mavenHome=\"${maven.home}\" fork=\"true\"&gt;\n            &lt;arg value=\"clean\" /&gt;\n            &lt;arg value=\"install\" /&gt;\n        &lt;/artifact:mvn&gt;\n    &lt;/target&gt;\n\n&lt;/project&gt;\n</code></pre>\n\n<p>Your maven.home property should point to the maven home directory. For example,</p>\n\n<pre><code>&lt;property name=\"maven.home\" value=\"D:\\\\Downloads\\\\apache-maven-3.0.5\"/&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":477607,"reputation":7148,"user_id":889213,"accept_rate":72,"display_name":"thiagoh"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1479150409,"creation_date":1479150409,"answer_id":40596016,"question_id":7581156,"body_markdown":"Here there is a complete solution:\r\n\r\n\t&lt;target name=&quot;mvn_windows_setup&quot; if=&quot;isWindows&quot;&gt;\r\n\t\t&lt;property name=&quot;mvn.executable&quot; value=&quot;cmd&quot; /&gt;\r\n\t\t&lt;property name=&quot;mvn.args&quot; value=&quot;/c&quot; /&gt;\r\n\t&lt;/target&gt;\r\n\r\n\t&lt;target name=&quot;mvn_unix_setup&quot; if=&quot;isUnix&quot;&gt;\r\n\t\t&lt;property name=&quot;mvn.executable&quot; value=&quot;sh&quot; /&gt;\r\n\t\t&lt;property name=&quot;mvn.args&quot; value=&quot;-c&quot; /&gt;\r\n\t&lt;/target&gt;\r\n\r\n\t&lt;target name=&quot;run-mvn-goals&quot; depends=&quot;mvn_windows_setup, mvn_unix_setup&quot;&gt;\r\n\r\n\t\t&lt;exec dir=&quot;${basedir}&quot; executable=&quot;${mvn.executable}&quot;&gt;\r\n\t\t\t&lt;arg line=&quot;${mvn.args} &#39;mvn ${p_goals}&#39;&quot; /&gt;\r\n\t\t&lt;/exec&gt;\r\n\r\n\t&lt;/target&gt;\r\n\r\n\t&lt;!-- EXAMPLES OF HOW TO USE --&gt;\r\n\r\n\t&lt;!-- let&#39;s say you want to run mvn clean install --&gt;\r\n\t&lt;target name=&quot;mvn-clean-install&quot;&gt;\r\n\r\n\t\t&lt;antcall target=&quot;run-mvn-goals&quot;&gt;\r\n\t\t\t&lt;param name=&quot;p_goals&quot; value=&quot;clean install&quot;/&gt;\r\n\t\t&lt;/antcall&gt;\r\n\t&lt;/target&gt;\r\n\r\n\t&lt;!-- or maybe you want to clean, package but skipping tests --&gt;\r\n\t&lt;target name=&quot;mvn-clean-package-notests&quot;&gt;\r\n\r\n\t\t&lt;antcall target=&quot;run-mvn-goals&quot;&gt;\r\n\t\t\t&lt;param name=&quot;p_goals&quot; value=&quot;clean package -DskipTests&quot;/&gt;\r\n\t\t&lt;/antcall&gt;\r\n\t&lt;/target&gt;\r\n\r\n\r\nThe output is something like this...\r\n\r\n\r\n\tBuildfile: /home/.../build.xml\r\n\tdeploy-complete:\r\n\tdeploy-complete:\r\n\tmvn_windows_setup:\r\n\tmvn_unix_setup:\r\n\trun-mvn-goals:\r\n\t     [exec] [INFO] Scanning for projects...\r\n\t     [exec] [INFO]                                                                         \r\n\t     [exec] [INFO] ------------------------------------------------------------------------\r\n\t     [exec] [INFO] Building wpm 0.0.1-SNAPSHOT\r\n\t     [exec] [INFO] ------------------------------------------------------------------------\r\n\t     [exec] [INFO] \r\n\t     [exec] [INFO] --- maven-clean-plugin:2.6.1:clean (default-clean) @ wpm ---\r\n\t     ...\r\n\t     ...\r\n\t     ...\r\n\t\t   [exec] [INFO] BUILD SUCCESS\r\n\t     [exec] [INFO] ------------------------------------------------------------------------\r\n\t     [exec] [INFO] Total time: 28.817 s\r\n\t     [exec] [INFO] Finished at: 2016-11-14T14:01:34-05:00\r\n\t     [exec] [INFO] Final Memory: 84M/872M\r\n\t     [exec] [INFO] ------------------------------------------------------------------------\r\n\tBUILD SUCCESSFUL\r\n\tTotal time: 31 seconds","title":"How to call for a Maven goal within an Ant script?","body":"<p>Here there is a complete solution:</p>\n\n<pre><code>&lt;target name=\"mvn_windows_setup\" if=\"isWindows\"&gt;\n    &lt;property name=\"mvn.executable\" value=\"cmd\" /&gt;\n    &lt;property name=\"mvn.args\" value=\"/c\" /&gt;\n&lt;/target&gt;\n\n&lt;target name=\"mvn_unix_setup\" if=\"isUnix\"&gt;\n    &lt;property name=\"mvn.executable\" value=\"sh\" /&gt;\n    &lt;property name=\"mvn.args\" value=\"-c\" /&gt;\n&lt;/target&gt;\n\n&lt;target name=\"run-mvn-goals\" depends=\"mvn_windows_setup, mvn_unix_setup\"&gt;\n\n    &lt;exec dir=\"${basedir}\" executable=\"${mvn.executable}\"&gt;\n        &lt;arg line=\"${mvn.args} 'mvn ${p_goals}'\" /&gt;\n    &lt;/exec&gt;\n\n&lt;/target&gt;\n\n&lt;!-- EXAMPLES OF HOW TO USE --&gt;\n\n&lt;!-- let's say you want to run mvn clean install --&gt;\n&lt;target name=\"mvn-clean-install\"&gt;\n\n    &lt;antcall target=\"run-mvn-goals\"&gt;\n        &lt;param name=\"p_goals\" value=\"clean install\"/&gt;\n    &lt;/antcall&gt;\n&lt;/target&gt;\n\n&lt;!-- or maybe you want to clean, package but skipping tests --&gt;\n&lt;target name=\"mvn-clean-package-notests\"&gt;\n\n    &lt;antcall target=\"run-mvn-goals\"&gt;\n        &lt;param name=\"p_goals\" value=\"clean package -DskipTests\"/&gt;\n    &lt;/antcall&gt;\n&lt;/target&gt;\n</code></pre>\n\n<p>The output is something like this...</p>\n\n<pre><code>Buildfile: /home/.../build.xml\ndeploy-complete:\ndeploy-complete:\nmvn_windows_setup:\nmvn_unix_setup:\nrun-mvn-goals:\n     [exec] [INFO] Scanning for projects...\n     [exec] [INFO]                                                                         \n     [exec] [INFO] ------------------------------------------------------------------------\n     [exec] [INFO] Building wpm 0.0.1-SNAPSHOT\n     [exec] [INFO] ------------------------------------------------------------------------\n     [exec] [INFO] \n     [exec] [INFO] --- maven-clean-plugin:2.6.1:clean (default-clean) @ wpm ---\n     ...\n     ...\n     ...\n       [exec] [INFO] BUILD SUCCESS\n     [exec] [INFO] ------------------------------------------------------------------------\n     [exec] [INFO] Total time: 28.817 s\n     [exec] [INFO] Finished at: 2016-11-14T14:01:34-05:00\n     [exec] [INFO] Final Memory: 84M/872M\n     [exec] [INFO] ------------------------------------------------------------------------\nBUILD SUCCESSFUL\nTotal time: 31 seconds\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1052025,"reputation":5610,"user_id":1055715,"accept_rate":83,"display_name":"Surasin Tancharoen"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1491124087,"creation_date":1491124087,"answer_id":43166593,"question_id":7581156,"body_markdown":"From Thiagoh answer, I have to add this to make it work.\r\n\r\n     &lt;condition property=&quot;isWindows&quot;&gt;\r\n                        &lt;os family=&quot;windows&quot; /&gt;\r\n     &lt;/condition&gt;\r\n    \r\n     &lt;condition property=&quot;isLinux&quot;&gt;\r\n                        &lt;os family=&quot;unix&quot; /&gt;\r\n     &lt;/condition&gt;\r\n    \r\n    &lt;target name=&quot;mvn_windows_setup&quot; if=&quot;isWindows&quot;&gt;\r\n        &lt;property name=&quot;mvn.executable&quot; value=&quot;cmd&quot; /&gt;\r\n        &lt;property name=&quot;mvn.args&quot; value=&quot;/c&quot; /&gt;\r\n    &lt;/target&gt;\r\n    \r\n    &lt;target name=&quot;mvn_unix_setup&quot; if=&quot;isLinux&quot;&gt;\r\n        &lt;property name=&quot;mvn.executable&quot; value=&quot;sh&quot; /&gt;\r\n        &lt;property name=&quot;mvn.args&quot; value=&quot;-c&quot; /&gt;\r\n    &lt;/target&gt;\r\n    \r\n    &lt;target name=&quot;run-mvn-goals&quot; depends=&quot;mvn_windows_setup, mvn_unix_setup&quot;&gt;\r\n    \r\n        &lt;exec dir=&quot;${basedir}&quot; executable=&quot;${mvn.executable}&quot;&gt;\r\n            &lt;arg line=&quot;${mvn.args} &#39;mvn ${p_goals}&#39;&quot; /&gt;\r\n        &lt;/exec&gt;\r\n    \r\n    &lt;/target&gt;\r\n\r\n","title":"How to call for a Maven goal within an Ant script?","body":"<p>From Thiagoh answer, I have to add this to make it work.</p>\n\n<pre><code> &lt;condition property=\"isWindows\"&gt;\n                    &lt;os family=\"windows\" /&gt;\n &lt;/condition&gt;\n\n &lt;condition property=\"isLinux\"&gt;\n                    &lt;os family=\"unix\" /&gt;\n &lt;/condition&gt;\n\n&lt;target name=\"mvn_windows_setup\" if=\"isWindows\"&gt;\n    &lt;property name=\"mvn.executable\" value=\"cmd\" /&gt;\n    &lt;property name=\"mvn.args\" value=\"/c\" /&gt;\n&lt;/target&gt;\n\n&lt;target name=\"mvn_unix_setup\" if=\"isLinux\"&gt;\n    &lt;property name=\"mvn.executable\" value=\"sh\" /&gt;\n    &lt;property name=\"mvn.args\" value=\"-c\" /&gt;\n&lt;/target&gt;\n\n&lt;target name=\"run-mvn-goals\" depends=\"mvn_windows_setup, mvn_unix_setup\"&gt;\n\n    &lt;exec dir=\"${basedir}\" executable=\"${mvn.executable}\"&gt;\n        &lt;arg line=\"${mvn.args} 'mvn ${p_goals}'\" /&gt;\n    &lt;/exec&gt;\n\n&lt;/target&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":115990,"reputation":5884,"user_id":304330,"accept_rate":56,"display_name":"Big Rich"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1558434023,"creation_date":1558434023,"answer_id":56236147,"question_id":7581156,"body_markdown":"`plexus` seems to be an older solution for embedding Maven. \r\n\r\nTake a look at the [Apache&#39;s Maven Embedder](https://maven.apache.org/ref/current/maven-embedder/index.html) project. \r\n\r\n[This article paragraph](https://www.sourcetrail.com/blog/how_to_integrate_maven_into_your_own_java_tool#using-maven-embedder) outlines embedding Maven into Java code, _**without**_ a locally installed Maven executable.","title":"How to call for a Maven goal within an Ant script?","body":"<p><code>plexus</code> seems to be an older solution for embedding Maven. </p>\n\n<p>Take a look at the <a href=\"https://maven.apache.org/ref/current/maven-embedder/index.html\" rel=\"nofollow noreferrer\">Apache's Maven Embedder</a> project. </p>\n\n<p><a href=\"https://www.sourcetrail.com/blog/how_to_integrate_maven_into_your_own_java_tool#using-maven-embedder\" rel=\"nofollow noreferrer\">This article paragraph</a> outlines embedding Maven into Java code, <em><strong>without</strong></em> a locally installed Maven executable.</p>\n"},{"tags":[],"owner":{"account_id":6575754,"reputation":9298,"user_id":5081877,"accept_rate":92,"display_name":"Yash"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1560516289,"creation_date":1560516289,"answer_id":56598492,"question_id":7581156,"body_markdown":"### Maven Ant Tasks &lt;sup&gt;[github](https://github.com/apache/maven-ant-tasks)&lt;/sup&gt; easy to run maven with goals form Ant.\r\n\r\n[Installation](http://maven.apache.org/ant-tasks/installation.html)\r\nCreate a `lib` directory in the root of your project and place the **maven-ant-tasks.jar**&lt;sup&gt;[binaries](http://archive.apache.org/dist/maven/ant-tasks/2.1.3/binaries/), [sonatype](https://search.maven.org/artifact/org.apache.maven/maven-ant-tasks/2.1.3/jar)&lt;/sup&gt; file inside it.\r\n\r\n```lang-xml\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n\r\n&lt;project name=&quot;maven&quot; default=&quot;build&quot; xmlns:artifact=&quot;antlib:org.apache.maven.artifact.ant&quot;&gt;\r\n\t&lt;property environment=&quot;env&quot; /&gt;\r\n\t\r\n\t&lt;!-- &lt;get src=&quot;http://search.maven.org/remotecontent?filepath=org/apache/maven/maven-ant-tasks/2.1.3/maven-ant-tasks-2.1.3.jar&quot; dest=&quot;lib/maven-ant-tasks-2.1.3.jar&quot;/&gt; --&gt;\r\n\r\n\t&lt;path id=&quot;maven-ant-tasks.classpath&quot; path=&quot;lib/maven-ant-tasks-2.1.3.jar&quot; /&gt;\r\n\t&lt;typedef resource=&quot;org/apache/maven/artifact/ant/antlib.xml&quot; uri=&quot;antlib:org.apache.maven.artifact.ant&quot; classpathref=&quot;maven-ant-tasks.classpath&quot; /&gt;\r\n\t\r\n\t&lt;record name=&quot;build.log&quot; loglevel=&quot;verbose&quot; action=&quot;start&quot;/&gt;\r\n\t&lt;target name=&quot;build&quot; description=&quot;project build ant script&quot;&gt;\r\n\t\t&lt;fail unless=&quot;env.MAVEN_HOME&quot; message=&quot;Environment variable MAVEN_HOME was not found on your system!&quot; /&gt;\r\n\t\t&lt;artifact:mvn mavenHome=&quot;${env.MAVEN_HOME}&quot; fork=&quot;true&quot;&gt;\r\n\t\t\t&lt;arg value=&quot;clean&quot; /&gt;\r\n\t\t\t&lt;arg value=&quot;install&quot; /&gt;\r\n\t\t\t&lt;arg value=&quot;-Pqa&quot; /&gt;\r\n\t\t&lt;/artifact:mvn&gt;\r\n\t&lt;/target&gt;\r\n&lt;/project&gt;\r\n```\r\n\r\n---\r\n\r\nSmall information between these elements ant `typedef` vs `taskdef`.\r\n\r\n * **[`Typedef`](https://ant.apache.org/manual/Tasks/typedef.html)**: Using a `typedef` declaration allows you to store the Ant Tasks&#39; library anywhere you like (such as source control) and put it&#39;s location in the build file.\r\n\r\n    ```lang-xml\r\n    &lt;typedef name=&quot;urlset&quot; classname=&quot;com.mydomain.URLSet&quot;/&gt;\r\n    ```\r\n * **[`Taskdef`](https://ant.apache.org/manual/Tasks/taskdef.html)** Adds a task definition to the current project, such that this new task can be used in the current project.\r\n\r\n    Using [PropertyFiles.java](https://github.com/Yash-777/LearnJava/blob/master/src/org/apache/tools/ant/taskdefs/optional/PropertyFiles.java) task by adding it to taskdef externally.\r\n    ```lang-xml\r\n    &lt;taskdef name = &quot;propertyfiles&quot;\r\n          classname = &quot;org.apache.tools.ant.taskdefs.optional.PropertyFiles&quot; /&gt;\r\n    ```\r\n    All the `taskdef` are configured in `apache-ant-1.9.4\\lib\\ant.jar\\org\\apache\\tools\\ant\\taskdefs\\defaults.properties` properties files. But i have created an external class and placed inside jar file. But instead of adding  entry in `defaults.properties` file externally informing the task by `taskdef`.\r\n\r\n    Second way, You can create a jar file, list all the `tasksef` in one properties file and refer the resource\r\n    [**antcontrib**](http://ant-contrib.sourceforge.net/) You can place the JAR in your Ant lib directory, and set classpath.\r\n\r\n    ```lang-xml\r\n\t&lt;taskdef resource=&quot;net/sf/antcontrib/antcontrib.properties&quot;&gt;\r\n\t\t&lt;classpath&gt;\r\n\t\t\t&lt;pathelement location=&quot;${env.ANT_HOME}/lib/ant-contrib-0.6.jar&quot;/&gt;\r\n\t\t&lt;/classpath&gt;\r\n\t&lt;/taskdef&gt;\r\n    ```","title":"How to call for a Maven goal within an Ant script?","body":"<h3>Maven Ant Tasks <sup><a href=\"https://github.com/apache/maven-ant-tasks\" rel=\"nofollow noreferrer\">github</a></sup> easy to run maven with goals form Ant.</h3>\n\n<p><a href=\"http://maven.apache.org/ant-tasks/installation.html\" rel=\"nofollow noreferrer\">Installation</a>\nCreate a <code>lib</code> directory in the root of your project and place the <strong>maven-ant-tasks.jar</strong><sup><a href=\"http://archive.apache.org/dist/maven/ant-tasks/2.1.3/binaries/\" rel=\"nofollow noreferrer\">binaries</a>, <a href=\"https://search.maven.org/artifact/org.apache.maven/maven-ant-tasks/2.1.3/jar\" rel=\"nofollow noreferrer\">sonatype</a></sup> file inside it.</p>\n\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n\n&lt;project name=\"maven\" default=\"build\" xmlns:artifact=\"antlib:org.apache.maven.artifact.ant\"&gt;\n    &lt;property environment=\"env\" /&gt;\n\n    &lt;!-- &lt;get src=\"http://search.maven.org/remotecontent?filepath=org/apache/maven/maven-ant-tasks/2.1.3/maven-ant-tasks-2.1.3.jar\" dest=\"lib/maven-ant-tasks-2.1.3.jar\"/&gt; --&gt;\n\n    &lt;path id=\"maven-ant-tasks.classpath\" path=\"lib/maven-ant-tasks-2.1.3.jar\" /&gt;\n    &lt;typedef resource=\"org/apache/maven/artifact/ant/antlib.xml\" uri=\"antlib:org.apache.maven.artifact.ant\" classpathref=\"maven-ant-tasks.classpath\" /&gt;\n\n    &lt;record name=\"build.log\" loglevel=\"verbose\" action=\"start\"/&gt;\n    &lt;target name=\"build\" description=\"project build ant script\"&gt;\n        &lt;fail unless=\"env.MAVEN_HOME\" message=\"Environment variable MAVEN_HOME was not found on your system!\" /&gt;\n        &lt;artifact:mvn mavenHome=\"${env.MAVEN_HOME}\" fork=\"true\"&gt;\n            &lt;arg value=\"clean\" /&gt;\n            &lt;arg value=\"install\" /&gt;\n            &lt;arg value=\"-Pqa\" /&gt;\n        &lt;/artifact:mvn&gt;\n    &lt;/target&gt;\n&lt;/project&gt;\n</code></pre>\n\n<hr>\n\n<p>Small information between these elements ant <code>typedef</code> vs <code>taskdef</code>.</p>\n\n<ul>\n<li><p><strong><a href=\"https://ant.apache.org/manual/Tasks/typedef.html\" rel=\"nofollow noreferrer\"><code>Typedef</code></a></strong>: Using a <code>typedef</code> declaration allows you to store the Ant Tasks' library anywhere you like (such as source control) and put it's location in the build file.</p>\n\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;typedef name=\"urlset\" classname=\"com.mydomain.URLSet\"/&gt;\n</code></pre></li>\n<li><p><strong><a href=\"https://ant.apache.org/manual/Tasks/taskdef.html\" rel=\"nofollow noreferrer\"><code>Taskdef</code></a></strong> Adds a task definition to the current project, such that this new task can be used in the current project.</p>\n\n<p>Using <a href=\"https://github.com/Yash-777/LearnJava/blob/master/src/org/apache/tools/ant/taskdefs/optional/PropertyFiles.java\" rel=\"nofollow noreferrer\">PropertyFiles.java</a> task by adding it to taskdef externally.</p>\n\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;taskdef name = \"propertyfiles\"\n      classname = \"org.apache.tools.ant.taskdefs.optional.PropertyFiles\" /&gt;\n</code></pre>\n\n<p>All the <code>taskdef</code> are configured in <code>apache-ant-1.9.4\\lib\\ant.jar\\org\\apache\\tools\\ant\\taskdefs\\defaults.properties</code> properties files. But i have created an external class and placed inside jar file. But instead of adding  entry in <code>defaults.properties</code> file externally informing the task by <code>taskdef</code>.</p>\n\n<p>Second way, You can create a jar file, list all the <code>tasksef</code> in one properties file and refer the resource\n<a href=\"http://ant-contrib.sourceforge.net/\" rel=\"nofollow noreferrer\"><strong>antcontrib</strong></a> You can place the JAR in your Ant lib directory, and set classpath.</p>\n\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;taskdef resource=\"net/sf/antcontrib/antcontrib.properties\"&gt;\n    &lt;classpath&gt;\n        &lt;pathelement location=\"${env.ANT_HOME}/lib/ant-contrib-0.6.jar\"/&gt;\n    &lt;/classpath&gt;\n&lt;/taskdef&gt;\n</code></pre></li>\n</ul>\n"},{"tags":[],"owner":{"account_id":1042691,"reputation":536,"user_id":1048376,"display_name":"splashout"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1691603484,"creation_date":1600804976,"answer_id":64016917,"question_id":7581156,"body_markdown":"This is an old post, but still relevant (for me, anyhow). I think things have changed since the original post. Turns out the solution is quite simple, and [you don&#39;t need all the ant-maven integration fluff][1]. It makes me wonder why this wasn&#39;t the answer 8 years ago, as I&#39;m pretty sure it would have worked then as it does now. I should mention this is for Windows.  You could probably tweak it to support Unix or both.\r\n    \r\n\r\n 1. Install maven for Windows\r\n 2. Create an environment variable MAVEN_HOME that points to the base mvn install directory (e.g., C:\\dev\\apache-maven-3.6.3)\r\n 3. Add this to your build.xml file:\r\n&gt;     &lt;property environment=&quot;env&quot; /&gt;\r\n 4. Add this task to your build.xml:\r\n\r\n&gt;     &lt;target name=&quot;mvnPackage&quot; description=&quot;Creates war file&quot;&gt;\r\n&gt;        &lt;fail unless=&quot;env.MAVEN_HOME&quot; message=&quot;Environment variable MAVEN_HOME was not found on your system!&quot; /&gt;\r\n&gt;        &lt;exec executable=&quot;${env.MAVEN_HOME}\\bin\\mvn.cmd&quot;&gt;\r\n&gt;            &lt;arg value=&quot;clean&quot; /&gt;\r\n&gt;       \t &lt;arg value=&quot;package&quot; /&gt;\r\n&gt;        &lt;/exec&gt;\r\n&gt;     &lt;/target&gt;\r\n\r\n  [1]: https://issues.apache.org/jira/browse/MANTTASKS-201?focusedCommentId=15291978&amp;page=com.atlassian.jira.plugin.system.issuetabpanels%3Acomment-tabpanel#comment-15291978","title":"How to call for a Maven goal within an Ant script?","body":"<p>This is an old post, but still relevant (for me, anyhow). I think things have changed since the original post. Turns out the solution is quite simple, and <a href=\"https://issues.apache.org/jira/browse/MANTTASKS-201?focusedCommentId=15291978&amp;page=com.atlassian.jira.plugin.system.issuetabpanels%3Acomment-tabpanel#comment-15291978\" rel=\"nofollow noreferrer\">you don't need all the ant-maven integration fluff</a>. It makes me wonder why this wasn't the answer 8 years ago, as I'm pretty sure it would have worked then as it does now. I should mention this is for Windows.  You could probably tweak it to support Unix or both.</p>\n<ol>\n<li>Install maven for Windows</li>\n<li>Create an environment variable MAVEN_HOME that points to the base mvn install directory (e.g., C:\\dev\\apache-maven-3.6.3)</li>\n<li>Add this to your build.xml file:</li>\n</ol>\n<blockquote>\n<pre><code>&lt;property environment=&quot;env&quot; /&gt;\n</code></pre>\n</blockquote>\n<ol start=\"4\">\n<li>Add this task to your build.xml:</li>\n</ol>\n<blockquote>\n<pre><code>&lt;target name=&quot;mvnPackage&quot; description=&quot;Creates war file&quot;&gt;\n   &lt;fail unless=&quot;env.MAVEN_HOME&quot; message=&quot;Environment variable MAVEN_HOME was not found on your system!&quot; /&gt;\n   &lt;exec executable=&quot;${env.MAVEN_HOME}\\bin\\mvn.cmd&quot;&gt;\n       &lt;arg value=&quot;clean&quot; /&gt;\n       &lt;arg value=&quot;package&quot; /&gt;\n   &lt;/exec&gt;\n&lt;/target&gt;\n</code></pre>\n</blockquote>\n"}],"owner":{"account_id":81772,"reputation":4274,"user_id":230415,"accept_rate":60,"display_name":"Dunith Dhanushka"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":44743,"favorite_count":0,"down_vote_count":0,"up_vote_count":38,"accepted_answer_id":7581329,"answer_count":12,"score":38,"last_activity_date":1691603484,"creation_date":1317202553,"question_id":7581156,"body_markdown":"Is it possible to call or execute a Maven goal within an Ant script?\r\n\r\nSay I have an ant target called &#39;distribute&#39; and inside which I need to call a maven &#39;compile&#39; goal from another pom.xml.","title":"How to call for a Maven goal within an Ant script?","body":"<p>Is it possible to call or execute a Maven goal within an Ant script?</p>\n\n<p>Say I have an ant target called 'distribute' and inside which I need to call a maven 'compile' goal from another pom.xml.</p>\n"},{"tags":["java","collections","hashmap","set","reverse"],"comments":[{"owner":{"account_id":9847667,"reputation":29054,"user_id":7294647,"accept_rate":67,"display_name":"Jacob G."},"score":9,"creation_date":1524378985,"post_id":49963235,"comment_id":86942402,"body_markdown":"Elements in a `Set` are **not** ordered... a `LinkedHashSet` on the other hand...","body":"Elements in a <code>Set</code> are <b>not</b> ordered... a <code>LinkedHashSet</code> on the other hand..."}],"answers":[{"tags":[],"owner":{"account_id":1263831,"reputation":388998,"user_id":1221571,"accept_rate":67,"display_name":"Eran"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1524383660,"creation_date":1524379188,"answer_id":49963262,"question_id":49963235,"body_markdown":"If you want the keys of the `Map` to be ordered, you must use a different `Map` implementation, since the keys of a `HashMap` are not ordered.\r\n\r\nYou can use a `TreeMap`. You can pass to its constructor a `Comparator` that would determine the ordering of the keys. That would determine the order of the keys in the `Set` returned by `keySet()`.\r\n\r\nFor example, if you want your movies to be sorted according to reversed lexicographical order:\r\n\r\n    Map&lt;String,Movie&gt; moviesByName = new TreeMap&lt;&gt;((s1,s2)-&gt;s2.compareTo (s1));\r\n\r\nor, as lexicore suggested:\r\n\r\n    Map&lt;String,Movie&gt; moviesByName = new TreeMap&lt;&gt;(Comparator.&lt;String&gt;naturalOrder().reversed());","title":"How to Reverse order of values in Set&lt;String&gt;","body":"<p>If you want the keys of the <code>Map</code> to be ordered, you must use a different <code>Map</code> implementation, since the keys of a <code>HashMap</code> are not ordered.</p>\n\n<p>You can use a <code>TreeMap</code>. You can pass to its constructor a <code>Comparator</code> that would determine the ordering of the keys. That would determine the order of the keys in the <code>Set</code> returned by <code>keySet()</code>.</p>\n\n<p>For example, if you want your movies to be sorted according to reversed lexicographical order:</p>\n\n<pre><code>Map&lt;String,Movie&gt; moviesByName = new TreeMap&lt;&gt;((s1,s2)-&gt;s2.compareTo (s1));\n</code></pre>\n\n<p>or, as lexicore suggested:</p>\n\n<pre><code>Map&lt;String,Movie&gt; moviesByName = new TreeMap&lt;&gt;(Comparator.&lt;String&gt;naturalOrder().reversed());\n</code></pre>\n"},{"tags":[],"owner":{"account_id":4355913,"reputation":301,"user_id":3554540,"display_name":"rifaqat"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1524399535,"creation_date":1524380249,"answer_id":49963364,"question_id":49963235,"body_markdown":"If you are using Java8 you can try:\r\n\r\n    List&lt;String&gt; sorted = movieList.keySet().stream()\r\n                    .sorted(Collections.reverseOrder())\r\n                    .collect(Collectors.toList());\r\n\r\nOr even better if you want only the output String:\r\n\r\n    String output = movieList.keySet().stream()\r\n                    .sorted(Collections.reverseOrder())\r\n                    .collect(Collectors.joining(&quot;\\n&quot;));\r\n\r\nBut if the intent is to just reverse the map.keySet as Andreas suggested ... then \r\n\r\n    ArrayList&lt;String&gt; list = new ArrayList&lt;&gt;(movieList.keySet());\r\n    Collections.reverse(list);\r\n    //list is now in reverse order of the keySet","title":"How to Reverse order of values in Set&lt;String&gt;","body":"<p>If you are using Java8 you can try:</p>\n\n<pre><code>List&lt;String&gt; sorted = movieList.keySet().stream()\n                .sorted(Collections.reverseOrder())\n                .collect(Collectors.toList());\n</code></pre>\n\n<p>Or even better if you want only the output String:</p>\n\n<pre><code>String output = movieList.keySet().stream()\n                .sorted(Collections.reverseOrder())\n                .collect(Collectors.joining(\"\\n\"));\n</code></pre>\n\n<p>But if the intent is to just reverse the map.keySet as Andreas suggested ... then </p>\n\n<pre><code>ArrayList&lt;String&gt; list = new ArrayList&lt;&gt;(movieList.keySet());\nCollections.reverse(list);\n//list is now in reverse order of the keySet\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2570317,"reputation":11557,"user_id":2229229,"accept_rate":76,"display_name":"luksch"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1524380317,"creation_date":1524380317,"answer_id":49963374,"question_id":49963235,"body_markdown":"A key quality of a ```Set``` is that it not sorted. So you need to use another data structure to achieve this goal. The simplest solution may be a ```List```, but then you loose the quality of a ```Set``` to not contain entires that are equal (entry.equals(otherentry) == true)\r\n\r\nIf you want to retrieve entries in the order of filling (or reverse) and still want to retain the ```Set``` quality, you may use a [LinkedHashSet][1]\r\n\r\nThe solution of [Eran][2] is also possible, but there you need to create a comparator that results in the order of addition to the TreeMap. \r\n\r\n\r\n  [1]: https://docs.oracle.com/javase/8/docs/api/java/util/LinkedHashSet.html\r\n  [2]: https://stackoverflow.com/a/49963262/2229229","title":"How to Reverse order of values in Set&lt;String&gt;","body":"<p>A key quality of a <code>Set</code> is that it not sorted. So you need to use another data structure to achieve this goal. The simplest solution may be a <code>List</code>, but then you loose the quality of a <code>Set</code> to not contain entires that are equal (entry.equals(otherentry) == true)</p>\n\n<p>If you want to retrieve entries in the order of filling (or reverse) and still want to retain the <code>Set</code> quality, you may use a <a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/LinkedHashSet.html\" rel=\"nofollow noreferrer\">LinkedHashSet</a></p>\n\n<p>The solution of <a href=\"https://stackoverflow.com/a/49963262/2229229\">Eran</a> is also possible, but there you need to create a comparator that results in the order of addition to the TreeMap. </p>\n"},{"tags":[],"owner":{"account_id":10494123,"reputation":634,"user_id":7734988,"display_name":"Abhi"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1524380382,"creation_date":1524380382,"answer_id":49963379,"question_id":49963235,"body_markdown":"    After getting values stored in a Set, Add all values of Set into a List then apply reverse function of list. Below is an example\r\n    \r\n    import java.util.*;\r\n    class Test\r\n    {\r\n    public static void main(String args[])\r\n    {\r\n    Set h=new LinkedHashSet();\r\n    List h2 = new LinkedList();\r\n    h.add(&quot;Lovely&quot;);\r\n    h.add(&quot;Professional&quot;);\r\n    h.add(&quot;University&quot;);\r\n    h2.addAll(h);\t\r\n    System.out.println(h);\r\n    Collections.reverse(h2);\r\n    System.out.println(h2);\r\n    }\r\n    }\t","title":"How to Reverse order of values in Set&lt;String&gt;","body":"<pre><code>After getting values stored in a Set, Add all values of Set into a List then apply reverse function of list. Below is an example\n\nimport java.util.*;\nclass Test\n{\npublic static void main(String args[])\n{\nSet h=new LinkedHashSet();\nList h2 = new LinkedList();\nh.add(\"Lovely\");\nh.add(\"Professional\");\nh.add(\"University\");\nh2.addAll(h);   \nSystem.out.println(h);\nCollections.reverse(h2);\nSystem.out.println(h2);\n}\n}   \n</code></pre>\n"},{"tags":[],"owner":{"account_id":6528461,"reputation":3279,"user_id":5050431,"accept_rate":60,"display_name":"A_Arnold"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1691603402,"creation_date":1691603402,"answer_id":76870174,"question_id":49963235,"body_markdown":"[JEP 431: Sequenced Collections][1] (release 9/19/23) in Java 21 has a `reversed()` method to `SortedSet`. This reversed view of the `SortedSet` can iterate in descending order.\r\n\r\n    SortedSet&lt;String&gt; movies =  movieList.keySet();\r\n    for(String movie : movies.reversed()) {\r\n        output += movie + &quot;\\n&quot;;\r\n    }\r\nThat being said you may want to use a `StringBuilder()` for your output variable.\r\n\r\n  [1]: https://openjdk.org/jeps/431","title":"How to Reverse order of values in Set&lt;String&gt;","body":"<p><a href=\"https://openjdk.org/jeps/431\" rel=\"nofollow noreferrer\">JEP 431: Sequenced Collections</a> (release 9/19/23) in Java 21 has a <code>reversed()</code> method to <code>SortedSet</code>. This reversed view of the <code>SortedSet</code> can iterate in descending order.</p>\n<pre><code>SortedSet&lt;String&gt; movies =  movieList.keySet();\nfor(String movie : movies.reversed()) {\n    output += movie + &quot;\\n&quot;;\n}\n</code></pre>\n<p>That being said you may want to use a <code>StringBuilder()</code> for your output variable.</p>\n"}],"owner":{"account_id":3333125,"reputation":1453,"user_id":2801516,"accept_rate":53,"display_name":"Shaz"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":4042,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":5,"score":1,"last_activity_date":1691603402,"creation_date":1524378953,"question_id":49963235,"body_markdown":"I want to reverse the values in the `Set&lt;String&gt;`\r\n\r\nSo, I am creating a `Set&lt;String&gt;` of keys from some `HashMap` And printing out the values i.e. keys.\r\n\r\n\tSet&lt;String&gt; movies =  movieList.keySet();\r\n    for(String movie : movies) {\r\n\t    output += movie + &quot;\\n&quot;;\r\n\t}\r\n\r\n**I need to reverse the values of the `Set&lt;String&gt;` from last value to first values** Is this possible?\r\n&amp;nbsp;\r\n\r\n\r\n\r\n \r\n","title":"How to Reverse order of values in Set&lt;String&gt;","body":"<p>I want to reverse the values in the <code>Set&lt;String&gt;</code></p>\n\n<p>So, I am creating a <code>Set&lt;String&gt;</code> of keys from some <code>HashMap</code> And printing out the values i.e. keys.</p>\n\n<pre><code>Set&lt;String&gt; movies =  movieList.keySet();\nfor(String movie : movies) {\n    output += movie + \"\\n\";\n}\n</code></pre>\n\n<p><strong>I need to reverse the values of the <code>Set&lt;String&gt;</code> from last value to first values</strong> Is this possible?\n&nbsp;</p>\n"},{"tags":["java","spring","spring-boot","hibernate","jpa"],"comments":[{"owner":{"account_id":1100252,"reputation":10087,"user_id":1092818,"display_name":"crizzis"},"score":3,"creation_date":1607877175,"post_id":65277913,"comment_id":115404344,"body_markdown":"What package does `BootjpaApplication` reside in? It needs to be in the root package for all other beans to be picked up by component scan","body":"What package does <code>BootjpaApplication</code> reside in? It needs to be in the root package for all other beans to be picked up by component scan"},{"owner":{"account_id":15162144,"reputation":71,"user_id":10940857,"display_name":"Sudo Pehpeh"},"score":0,"creation_date":1607878508,"post_id":65277913,"comment_id":115404729,"body_markdown":"@crizzis \nUserRespository is in com.jpa.dao,\nBootjpaApplication is in com.jpa.demo,\nuser.java is in com.jpa.entities.\nWhat do you mean by root package?","body":"@crizzis  UserRespository is in com.jpa.dao, BootjpaApplication is in com.jpa.demo, user.java is in com.jpa.entities. What do you mean by root package?"},{"owner":{"account_id":15162144,"reputation":71,"user_id":10940857,"display_name":"Sudo Pehpeh"},"score":0,"creation_date":1607878720,"post_id":65277913,"comment_id":115404801,"body_markdown":"I got it. @crizzis Thank you so much","body":"I got it. @crizzis Thank you so much"}],"answers":[{"tags":[],"owner":{"account_id":8358777,"reputation":1554,"user_id":6277983,"accept_rate":67,"display_name":"Suraj Gautam"},"down_vote_count":0,"up_vote_count":4,"is_accepted":true,"score":4,"last_activity_date":1607877137,"creation_date":1607877137,"answer_id":65277981,"question_id":65277913,"body_markdown":"It looks like your packages are not scanned properly. \r\n\r\nCan you please try adding `@SpringBootApplication(scanBasePackages = &quot;com.jpa&quot;)` instead of `@SpringBootApplication`.","title":"No qualifying bean of type &#39;com.jpa.dao.UserRepository&#39; available","body":"<p>It looks like your packages are not scanned properly.</p>\n<p>Can you please try adding <code>@SpringBootApplication(scanBasePackages = &quot;com.jpa&quot;)</code> instead of <code>@SpringBootApplication</code>.</p>\n"},{"tags":[],"owner":{"account_id":23438485,"reputation":1,"user_id":17496291,"display_name":"BOBY BURMAN"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1637744040,"creation_date":1637744040,"answer_id":70093132,"question_id":65277913,"body_markdown":"just create a single package(forget about coupling for a bit and do that). Then put all the classes(POJO , Main) and Interface(UserRepository) in side that package and re-start your project. It will work.\r\n","title":"No qualifying bean of type &#39;com.jpa.dao.UserRepository&#39; available","body":"<p>just create a single package(forget about coupling for a bit and do that). Then put all the classes(POJO , Main) and Interface(UserRepository) in side that package and re-start your project. It will work.</p>\n"},{"tags":[],"owner":{"account_id":26297323,"reputation":1,"user_id":19963339,"display_name":"Sourav Sanyal"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1662797447,"creation_date":1662797447,"answer_id":73670270,"question_id":65277913,"body_markdown":"your package structure should be like this,\r\n`com.spring`\r\n`com.spring.DAO`\r\n`com.spring.Model`\r\n`com.spring.View`\r\n`com.spring.Controller`\r\n\r\n","title":"No qualifying bean of type &#39;com.jpa.dao.UserRepository&#39; available","body":"<p>your package structure should be like this,\n<code>com.spring</code>\n<code>com.spring.DAO</code>\n<code>com.spring.Model</code>\n<code>com.spring.View</code>\n<code>com.spring.Controller</code></p>\n"},{"tags":[],"owner":{"account_id":27450585,"reputation":1,"user_id":20942892,"display_name":"Pradhyumn Patidar"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1672988622,"creation_date":1672988622,"answer_id":75027922,"question_id":65277913,"body_markdown":"In pom.xml file checks for hibernate and JPA configuration\r\n\r\nSame bug occur in my application\r\n\r\nI resolve it by adding configuration \r\n \r\n\r\n          &lt;dependency&gt;\r\n            &lt;groupId&gt;org.hibernate&lt;/groupId&gt;\r\n            &lt;artifactId&gt;hibernate-core&lt;/artifactId&gt;\r\n        &lt;/dependency&gt;\r\n\r\n        &lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t\r\nThank you !","title":"No qualifying bean of type &#39;com.jpa.dao.UserRepository&#39; available","body":"<p>In pom.xml file checks for hibernate and JPA configuration</p>\n<p>Same bug occur in my application</p>\n<p>I resolve it by adding configuration</p>\n<pre><code>      &lt;dependency&gt;\n        &lt;groupId&gt;org.hibernate&lt;/groupId&gt;\n        &lt;artifactId&gt;hibernate-core&lt;/artifactId&gt;\n    &lt;/dependency&gt;\n\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;\n    &lt;/dependency&gt;\n    \n</code></pre>\n<p>Thank you !</p>\n"},{"tags":[],"owner":{"account_id":27459942,"reputation":1,"user_id":20950688,"display_name":"Prajwal "},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1673360138,"creation_date":1673077337,"answer_id":75038813,"question_id":65277913,"body_markdown":"I had the same issues with Repository not being found. So what I did was to move everything into 1 package. And this worked meaning that there was nothing wrong with my code. I moved the Repos &amp; Entities into another package and added the following to `SpringApplication` class.\r\n```\r\n@EnableJpaRepositories(&quot;com...jpa&quot;)\r\n```\r\n\r\n```\r\n@EntityScan(&quot;com...jpa&quot;)\r\n```\r\nAfter that, I moved the Service (interface &amp; implementation) to another package and added the following to SpringApplication class.\r\n\r\n```\r\n@ComponentScan(&quot;com...service&quot;)\r\n```\r\nThis solved my issues.","title":"No qualifying bean of type &#39;com.jpa.dao.UserRepository&#39; available","body":"<p>I had the same issues with Repository not being found. So what I did was to move everything into 1 package. And this worked meaning that there was nothing wrong with my code. I moved the Repos &amp; Entities into another package and added the following to <code>SpringApplication</code> class.</p>\n<pre><code>@EnableJpaRepositories(&quot;com...jpa&quot;)\n</code></pre>\n<pre><code>@EntityScan(&quot;com...jpa&quot;)\n</code></pre>\n<p>After that, I moved the Service (interface &amp; implementation) to another package and added the following to SpringApplication class.</p>\n<pre><code>@ComponentScan(&quot;com...service&quot;)\n</code></pre>\n<p>This solved my issues.</p>\n"},{"tags":[],"owner":{"account_id":27982310,"reputation":1,"user_id":21369846,"display_name":"A J"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1678462950,"creation_date":1678443071,"answer_id":75694779,"question_id":65277913,"body_markdown":"Please check your package name. The package name should be in a hierarchical manner.\r\nlike\r\n\r\n    com.jpa.test  \r\n    com.jpa.test.dao  \r\n    com.jpa.test.entities","title":"No qualifying bean of type &#39;com.jpa.dao.UserRepository&#39; available","body":"<p>Please check your package name. The package name should be in a hierarchical manner.\nlike</p>\n<pre><code>com.jpa.test  \ncom.jpa.test.dao  \ncom.jpa.test.entities\n</code></pre>\n"},{"tags":[],"owner":{"account_id":28955183,"reputation":1,"user_id":22178895,"display_name":"Saroj Ramtel"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1688557183,"creation_date":1688556976,"answer_id":76619937,"question_id":65277913,"body_markdown":"The problem here is location of the main class. The main class should be in the base package i.e. com.jpa in your case. Your main class is inside com.jpa.demo. Don&#39;t make the package demo for main class.\r\nhere is an example that follows your practice of code. This should solve the problem.[][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/bV1jg.jpg","title":"No qualifying bean of type &#39;com.jpa.dao.UserRepository&#39; available","body":"<p>The problem here is location of the main class. The main class should be in the base package i.e. com.jpa in your case. Your main class is inside com.jpa.demo. Don't make the package demo for main class.\nhere is an example that follows your practice of code. This should solve the problem.<a href=\"https://i.stack.imgur.com/bV1jg.jpg\" rel=\"nofollow noreferrer\"></a></p>\n"},{"tags":[],"owner":{"account_id":29193903,"reputation":11,"user_id":22365460,"display_name":"Shristi"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1691603087,"creation_date":1691603087,"answer_id":76870141,"question_id":65277913,"body_markdown":"I also followed durgesh sir videos , I fixed my code by keeping it in same package , then it worked","title":"No qualifying bean of type &#39;com.jpa.dao.UserRepository&#39; available","body":"<p>I also followed durgesh sir videos , I fixed my code by keeping it in same package , then it worked</p>\n"}],"owner":{"account_id":15162144,"reputation":71,"user_id":10940857,"display_name":"Sudo Pehpeh"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":3291,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":65277981,"answer_count":8,"score":1,"last_activity_date":1691603087,"creation_date":1607876781,"question_id":65277913,"body_markdown":"I am trying String JPA for the first time.\r\n\r\nI was following a Youtube video by Durgesh Sir.\r\n\r\nThis is the error\r\n\r\n```\r\nException in thread &quot;main&quot; org.springframework.beans.factory.NoSuchBeanDefinitionException: No qualifying bean of type &#39;com.jpa.dao.UserRepository&#39; available\r\n\tat org.springframework.beans.factory.support.DefaultListableBeanFactory.getBean(DefaultListableBeanFactory.java:351)\r\n\tat org.springframework.beans.factory.support.DefaultListableBeanFactory.getBean(DefaultListableBeanFactory.java:342)\r\n\tat org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1177)\r\n\tat com.jpa.demo.BootjpaApplication.main(BootjpaApplication.java:13)\r\n\r\n```\r\n\r\nFollowing are my files\r\n\r\nBootjpaApplication.java (which contains main)\r\n\r\n```\r\npackage com.jpa.demo;\r\nimport org.springframework.boot.SpringApplication;\r\nimport org.springframework.boot.autoconfigure.SpringBootApplication;\r\nimport org.springframework.context.ApplicationContext;\r\nimport com.jpa.dao.UserRepository;\r\nimport com.jpa.entities.user;\r\n@SpringBootApplication\r\npublic class BootjpaApplication {\r\n\r\n\tpublic static void main(String[] args) {\r\n\t\tApplicationContext context= SpringApplication.run(BootjpaApplication.class, args);\r\n\t\tUserRepository userrepo= context.getBean(UserRepository.class);\r\n\t\tuser user=new user();\r\n\t\tuser.setName(&quot;Varun Dhawan&quot;);\r\n\t\tuser.setCity(&quot;Paris&quot;);\r\n\t\tuser.setStatus(&quot;happy&quot;);\r\n\t\tuser user1= userrepo.save(user);\r\n\t\tSystem.out.println(user1);\r\n\t}\r\n```\r\n\r\nuser.java (there are 4 variables. id is auto generated. Other 3 have getters and setters.\r\n\r\n```\r\npackage com.jpa.entities;\r\n\r\nimport javax.persistence.Entity;\r\nimport javax.persistence.GeneratedValue;\r\nimport javax.persistence.GenerationType;\r\nimport javax.persistence.Id;\r\n\r\n@Entity\r\npublic class user {\r\n\t@Id\r\n\t@GeneratedValue(strategy =GenerationType.AUTO)\r\n\tprivate int id;\r\n\t\r\n\tprivate String name;\r\n\tprivate String city;\r\n\tprivate String status;\r\n\tpublic int getId() {\r\n\t\treturn id;\r\n\t}\r\n\tpublic void setId(int id) {\r\n\t\tthis.id = id;\r\n\t}\r\n\tpublic String getName() {\r\n\t\treturn name;\r\n\t}\r\n\tpublic void setName(String name) {\r\n\t\tthis.name = name;\r\n\t}\r\n\tpublic String getCity() {\r\n\t\treturn city;\r\n\t}\r\n\tpublic void setCity(String city) {\r\n\t\tthis.city = city;\r\n\t}\r\n\tpublic String getStatus() {\r\n\t\treturn status;\r\n\t}\r\n\tpublic void setStatus(String status) {\r\n\t\tthis.status = status;\r\n\t}\r\n\tpublic user(int id, String name, String city, String status) {\r\n\t\tsuper();\r\n\t\tthis.id = id;\r\n\t\tthis.name = name;\r\n\t\tthis.city = city;\r\n\t\tthis.status = status;\r\n\t}\r\n\tpublic user() {\r\n\t\tsuper();\r\n\t\t// TODO Auto-generated constructor stub\r\n\t}\r\n\t@Override\r\n\tpublic String toString() {\r\n\t\treturn &quot;user [id=&quot; + id + &quot;, name=&quot; + name + &quot;, city=&quot; + city + &quot;, status=&quot; + status + &quot;]&quot;;\r\n\t}\r\n\t\r\n}\r\n```\r\n\r\nUserRepository.java\r\n\r\n```\r\npackage com.jpa.dao;\r\nimport org.springframework.data.jpa.repository.JpaRepository;\r\nimport org.springframework.stereotype.Repository;\r\n\r\nimport com.jpa.entities.user;\r\n@Repository\r\npublic interface UserRepository extends JpaRepository&lt;user,Integer&gt; {\r\n\t\r\n}\r\n```\r\n\r\nApplication.properties\r\n\r\n```\r\nspring.datasource.name=jpa\r\nspring.datasource.url=jdbc:mysql://localhost:3306/jpa\r\nspring.datasource.username=root\r\nspring.datasource.password=root@123\r\nspring.datasource.driver-class-name=com.mysql.cj.jdbc.Driver\r\nspring.jpa.properties.hibernate.dialect=org.hibernate.dialect.MySQLDialect\r\n\r\nspring.jpa.hibernate.ddl-auto=update\r\n```\r\n\r\n\r\nThank you!","title":"No qualifying bean of type &#39;com.jpa.dao.UserRepository&#39; available","body":"<p>I am trying String JPA for the first time.</p>\n<p>I was following a Youtube video by Durgesh Sir.</p>\n<p>This is the error</p>\n<pre><code>Exception in thread &quot;main&quot; org.springframework.beans.factory.NoSuchBeanDefinitionException: No qualifying bean of type 'com.jpa.dao.UserRepository' available\n    at org.springframework.beans.factory.support.DefaultListableBeanFactory.getBean(DefaultListableBeanFactory.java:351)\n    at org.springframework.beans.factory.support.DefaultListableBeanFactory.getBean(DefaultListableBeanFactory.java:342)\n    at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1177)\n    at com.jpa.demo.BootjpaApplication.main(BootjpaApplication.java:13)\n\n</code></pre>\n<p>Following are my files</p>\n<p>BootjpaApplication.java (which contains main)</p>\n<pre><code>package com.jpa.demo;\nimport org.springframework.boot.SpringApplication;\nimport org.springframework.boot.autoconfigure.SpringBootApplication;\nimport org.springframework.context.ApplicationContext;\nimport com.jpa.dao.UserRepository;\nimport com.jpa.entities.user;\n@SpringBootApplication\npublic class BootjpaApplication {\n\n    public static void main(String[] args) {\n        ApplicationContext context= SpringApplication.run(BootjpaApplication.class, args);\n        UserRepository userrepo= context.getBean(UserRepository.class);\n        user user=new user();\n        user.setName(&quot;Varun Dhawan&quot;);\n        user.setCity(&quot;Paris&quot;);\n        user.setStatus(&quot;happy&quot;);\n        user user1= userrepo.save(user);\n        System.out.println(user1);\n    }\n</code></pre>\n<p>user.java (there are 4 variables. id is auto generated. Other 3 have getters and setters.</p>\n<pre><code>package com.jpa.entities;\n\nimport javax.persistence.Entity;\nimport javax.persistence.GeneratedValue;\nimport javax.persistence.GenerationType;\nimport javax.persistence.Id;\n\n@Entity\npublic class user {\n    @Id\n    @GeneratedValue(strategy =GenerationType.AUTO)\n    private int id;\n    \n    private String name;\n    private String city;\n    private String status;\n    public int getId() {\n        return id;\n    }\n    public void setId(int id) {\n        this.id = id;\n    }\n    public String getName() {\n        return name;\n    }\n    public void setName(String name) {\n        this.name = name;\n    }\n    public String getCity() {\n        return city;\n    }\n    public void setCity(String city) {\n        this.city = city;\n    }\n    public String getStatus() {\n        return status;\n    }\n    public void setStatus(String status) {\n        this.status = status;\n    }\n    public user(int id, String name, String city, String status) {\n        super();\n        this.id = id;\n        this.name = name;\n        this.city = city;\n        this.status = status;\n    }\n    public user() {\n        super();\n        // TODO Auto-generated constructor stub\n    }\n    @Override\n    public String toString() {\n        return &quot;user [id=&quot; + id + &quot;, name=&quot; + name + &quot;, city=&quot; + city + &quot;, status=&quot; + status + &quot;]&quot;;\n    }\n    \n}\n</code></pre>\n<p>UserRepository.java</p>\n<pre><code>package com.jpa.dao;\nimport org.springframework.data.jpa.repository.JpaRepository;\nimport org.springframework.stereotype.Repository;\n\nimport com.jpa.entities.user;\n@Repository\npublic interface UserRepository extends JpaRepository&lt;user,Integer&gt; {\n    \n}\n</code></pre>\n<p>Application.properties</p>\n<pre><code>spring.datasource.name=jpa\nspring.datasource.url=jdbc:mysql://localhost:3306/jpa\nspring.datasource.username=root\nspring.datasource.password=root@123\nspring.datasource.driver-class-name=com.mysql.cj.jdbc.Driver\nspring.jpa.properties.hibernate.dialect=org.hibernate.dialect.MySQLDialect\n\nspring.jpa.hibernate.ddl-auto=update\n</code></pre>\n<p>Thank you!</p>\n"},{"tags":["java","spring","spring-boot","hibernate","spring-data-jpa"],"comments":[{"owner":{"account_id":1992310,"reputation":11172,"user_id":1786065,"accept_rate":91,"display_name":"Rogue"},"score":0,"creation_date":1691593400,"post_id":76869015,"comment_id":135513187,"body_markdown":"Look into the concept of a junction table. It&#39;s easier to break up the many-to-many relationship itself into two one-to-many relationships. Think of if you had `books` and `authors` (many to many), then you&#39;d want a `book_author` table that contains entries of `(book_id, author_id)`. The advantage is to find all books of an author, it&#39;s now one-to-many, and all authors of a book is also one-to-many.","body":"Look into the concept of a junction table. It&#39;s easier to break up the many-to-many relationship itself into two one-to-many relationships. Think of if you had <code>books</code> and <code>authors</code> (many to many), then you&#39;d want a <code>book_author</code> table that contains entries of <code>(book_id, author_id)</code>. The advantage is to find all books of an author, it&#39;s now one-to-many, and all authors of a book is also one-to-many."}],"answers":[{"tags":[],"owner":{"account_id":19535095,"reputation":2864,"user_id":14294053,"display_name":"Mar-Z"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691602936,"creation_date":1691602936,"answer_id":76870126,"question_id":76869015,"body_markdown":"The Jackson annotations you are looking for is a combination of `@JsonManagedReference` and `@JsonBackReference`. You can place it on the both ends of the relationship. However it can only be used for *one-to-one*, *one-to-many* and *many-to-one* relationships. Not for *many-to-many*.\r\n\r\nThat&#39;s why you should structurally decompose your bidirectional *many-to-many* relationship to two *many-to-one* relationships (as already suggested in the comment by @Rogue).\r\n\r\n**Here is the complete solution**\r\n\r\nFirst we will define a composite key class:\r\n```\r\n@Embeddable\r\nclass ArtistSongKey implements Serializable {\r\n\r\n    Long artistId;\r\n\r\n    Long songId;\r\n\r\n    // standard constructors, getters, and setters\r\n    // hashcode and equals implementation\r\n}\r\n```\r\nUsing this composite key class, we will create the entity class, which models the join table:\r\n```\r\n@Entity\r\nclass ArtistSong {\r\n\r\n    @EmbeddedId\r\n    ArtistSongKey id;\r\n\r\n    @ManyToOne\r\n    @JsonBackReference\r\n    @MapsId(&quot;artistId&quot;)\r\n    Artist artist;\r\n\r\n    @ManyToOne\r\n    @JsonBackReference\r\n    @MapsId(&quot;songId&quot;)\r\n    Song song;\r\n\r\n    // standard constructors, getters, and setters\r\n}\r\n```\r\nAfter this, we can configure the inverse references in the Artist and Song entities:\r\n```\r\nclass Artist {\r\n\r\n    @OneToMany(mappedBy = &quot;song&quot;)\r\n    @JsonManagedReference\r\n    Set&lt;ArtistSong&gt; songsOfArtist;\r\n\r\n    // ...\r\n}\r\n\r\nclass Song {\r\n\r\n    @OneToMany(mappedBy = &quot;artist&quot;)\r\n    @JsonManagedReference\r\n    Set&lt;ArtistSong&gt; artistsOfSong;\r\n\r\n    // ...\r\n}\r\n```\r\nPlease note the added Jackson annotations which should fix the recursion error and should provide the desired layout of JSON objects.\r\n\r\nBased on: [https://www.baeldung.com/jpa-many-to-many][1]\r\n\r\n\r\n  [1]: https://www.baeldung.com/jpa-many-to-many","title":"Bidirectional Many-to-many relationships in Spring JPA (Hibernate)","body":"<p>The Jackson annotations you are looking for is a combination of <code>@JsonManagedReference</code> and <code>@JsonBackReference</code>. You can place it on the both ends of the relationship. However it can only be used for <em>one-to-one</em>, <em>one-to-many</em> and <em>many-to-one</em> relationships. Not for <em>many-to-many</em>.</p>\n<p>That's why you should structurally decompose your bidirectional <em>many-to-many</em> relationship to two <em>many-to-one</em> relationships (as already suggested in the comment by @Rogue).</p>\n<p><strong>Here is the complete solution</strong></p>\n<p>First we will define a composite key class:</p>\n<pre><code>@Embeddable\nclass ArtistSongKey implements Serializable {\n\n    Long artistId;\n\n    Long songId;\n\n    // standard constructors, getters, and setters\n    // hashcode and equals implementation\n}\n</code></pre>\n<p>Using this composite key class, we will create the entity class, which models the join table:</p>\n<pre><code>@Entity\nclass ArtistSong {\n\n    @EmbeddedId\n    ArtistSongKey id;\n\n    @ManyToOne\n    @JsonBackReference\n    @MapsId(&quot;artistId&quot;)\n    Artist artist;\n\n    @ManyToOne\n    @JsonBackReference\n    @MapsId(&quot;songId&quot;)\n    Song song;\n\n    // standard constructors, getters, and setters\n}\n</code></pre>\n<p>After this, we can configure the inverse references in the Artist and Song entities:</p>\n<pre><code>class Artist {\n\n    @OneToMany(mappedBy = &quot;song&quot;)\n    @JsonManagedReference\n    Set&lt;ArtistSong&gt; songsOfArtist;\n\n    // ...\n}\n\nclass Song {\n\n    @OneToMany(mappedBy = &quot;artist&quot;)\n    @JsonManagedReference\n    Set&lt;ArtistSong&gt; artistsOfSong;\n\n    // ...\n}\n</code></pre>\n<p>Please note the added Jackson annotations which should fix the recursion error and should provide the desired layout of JSON objects.</p>\n<p>Based on: <a href=\"https://www.baeldung.com/jpa-many-to-many\" rel=\"nofollow noreferrer\">https://www.baeldung.com/jpa-many-to-many</a></p>\n"}],"owner":{"account_id":27619970,"reputation":11,"user_id":21081249,"display_name":"bbn_dev"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":147,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":1,"score":0,"last_activity_date":1691602936,"creation_date":1691593117,"question_id":76869015,"body_markdown":"Im having trouble with many-to-many Bidirectional mapping using Spring Data JPA with Hibernate as JPA provider. The bidirectional relationship mapping allows you to navigate the association in both directions and that is what i need. I have two entities: `Artist` and `Song`. When i get an artist i want to get all his songs and vice versa, when i get a song i want to get the artists of that song. This results in a recursive error which, as i researched could be solved with @JsonIdentityInfo or using @JsonIgnore, but neither if them doesnt give me the json i truly want.\r\n\r\nThe Artist Entity:\r\n\r\n```\r\n@Entity\r\n@Table(name = &quot;artist&quot;)\r\n@JsonIdentityInfo(\r\n        generator = ObjectIdGenerators.PropertyGenerator.class,\r\n        property = &quot;id&quot;)\r\npublic class Artist {\r\n    @Id\r\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\r\n    private long id;\r\n\r\n    @Column(name = &quot;name&quot;)\r\n    private String name;\r\n\r\n    @Column(name = &quot;image&quot;)\r\n    private String image;\r\n\r\n\r\n    @ManyToMany(fetch = FetchType.LAZY, cascade = { CascadeType.PERSIST, CascadeType.MERGE })\r\n    @JoinTable(name = &quot;artist_songs&quot;, joinColumns = { @JoinColumn(name = &quot;artist_id&quot;) }, inverseJoinColumns = {\r\n            @JoinColumn(name = &quot;song_id&quot;) })\r\n    private Set&lt;Song&gt; songs = new HashSet&lt;&gt;();\r\n}\r\n```\r\n\r\nand the Song Entity:\r\n\r\n```\r\n@Entity\r\n@Table(name = &quot;song&quot;)\r\n@JsonIdentityInfo(\r\n        generator = ObjectIdGenerators.PropertyGenerator.class,\r\n        property = &quot;id&quot;)\r\npublic class Song {\r\n    @Id\r\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\r\n    private long id;\r\n\r\n    @Column(name = &quot;title&quot;)\r\n    private String title;\r\n\r\n    @Column(name = &quot;src&quot;)\r\n    private String src;\r\n\r\n    @Column(name = &quot;image&quot;)\r\n    private String image;\r\n\r\n    @ManyToMany(fetch = FetchType.LAZY,\r\n            cascade = {\r\n                    CascadeType.PERSIST,\r\n                    CascadeType.MERGE\r\n            },\r\n            mappedBy = &quot;songs&quot;)\r\n    private Set&lt;Artist&gt; artists = new HashSet&lt;&gt;();\r\n}\r\n```\r\nMy problem is that when I make a call to get these entities i get these JSON objects:\r\n\r\n```\r\n// THE JSON I GET WHEN I CALL http://localhost:8080/api/artists\r\n[\r\n    {\r\n        &quot;id&quot;: 1,\r\n        &quot;name&quot;: &quot;artist1&quot;,\r\n        &quot;image&quot;: &quot;artist1.png&quot;,\r\n        &quot;songs&quot;: [\r\n            {\r\n                &quot;id&quot;: 1,\r\n                &quot;title&quot;: &quot;song 1&quot;,\r\n                &quot;src&quot;: &quot;spng1.mp3&quot;,\r\n                &quot;image&quot;: &quot;song1.png&quot;,\r\n                &quot;artists&quot;: [\r\n                    1\r\n                ]\r\n            },\r\n            {\r\n                &quot;id&quot;: 2,\r\n                &quot;title&quot;: &quot;song 2&quot;,\r\n                &quot;src&quot;: &quot;song2.mp3&quot;,\r\n                &quot;image&quot;: &quot;song2.png&quot;,\r\n                &quot;artists&quot;: [\r\n                    1\r\n                ]\r\n            }\r\n        ]\r\n    },\r\n    {\r\n        &quot;id&quot;: 2,\r\n        &quot;name&quot;: &quot;artist2&quot;,\r\n        &quot;image&quot;: &quot;artist2.png&quot;,\r\n        &quot;songs&quot;: [\r\n            {\r\n                &quot;id&quot;: 3,\r\n                &quot;title&quot;: &quot;song 3&quot;,\r\n                &quot;src&quot;: &quot;song3.mp3&quot;,\r\n                &quot;image&quot;: &quot;song3.png&quot;,\r\n                &quot;artists&quot;: [\r\n                    2\r\n                ]\r\n            }\r\n        ]\r\n    }\r\n]\r\n\r\n// THE JSON I GET WHEN I CALL http://localhost:8080/api/songs\r\n\r\n[\r\n    {\r\n        &quot;id&quot;: 1,\r\n        &quot;title&quot;: &quot;song 1&quot;,\r\n        &quot;src&quot;: &quot;spng1.mp3&quot;,\r\n        &quot;image&quot;: &quot;song1.png&quot;,\r\n        &quot;artists&quot;: [\r\n            {\r\n                &quot;id&quot;: 1,\r\n                &quot;name&quot;: &quot;artist1&quot;,\r\n                &quot;image&quot;: &quot;artist1.png&quot;,\r\n                &quot;songs&quot;: [\r\n                    {\r\n                        &quot;id&quot;: 2,\r\n                        &quot;title&quot;: &quot;song 2&quot;,\r\n                        &quot;src&quot;: &quot;song2.mp3&quot;,\r\n                        &quot;image&quot;: &quot;song2.png&quot;,\r\n                        &quot;artists&quot;: [\r\n                            1\r\n                        ]\r\n                    },\r\n                    1\r\n                ]\r\n            }\r\n        ]\r\n    },\r\n    2,\r\n    {\r\n        &quot;id&quot;: 3,\r\n        &quot;title&quot;: &quot;song 3&quot;,\r\n        &quot;src&quot;: &quot;song3.mp3&quot;,\r\n        &quot;image&quot;: &quot;song3.png&quot;,\r\n        &quot;artists&quot;: [\r\n            {\r\n                &quot;id&quot;: 2,\r\n                &quot;name&quot;: &quot;artist2&quot;,\r\n                &quot;image&quot;: &quot;artist2.png&quot;,\r\n                &quot;songs&quot;: [\r\n                    3\r\n                ]\r\n            }\r\n        ]\r\n    }\r\n]\r\n```\r\n\r\n\r\nThe JSON objects I want are like these:\r\n\r\n```\r\n// THE ARTIST ENTITY\r\n{\r\n        &quot;id&quot;: 2,\r\n        &quot;name&quot;: &quot;artist2&quot;,\r\n        &quot;image&quot;: &quot;artist2.png&quot;,\r\n        &quot;songs&quot;: [\r\n            {\r\n              &quot;id&quot;: 1,\r\n              &quot;title&quot;: &quot;song 1&quot;,\r\n              &quot;src&quot;: &quot;song1.mp3&quot;,\r\n              &quot;image&quot;: &quot;song1.png&quot;,\r\n//REMOVES THE FIELD artists INSIDE SONG. KEEPS THAT FIELD ONLY WHEN I MAKE THE CALL TO GET ALL SONGS\r\n            },\r\n            {\r\n              &quot;id&quot;: 2,\r\n              &quot;title&quot;: &quot;song 2&quot;,\r\n              &quot;src&quot;: &quot;song2.mp3&quot;,\r\n              &quot;image&quot;: &quot;song2.png&quot;,\r\n//REMOVES THE FIELD artists INSIDE SONG. KEEPS THAT FIELD ONLY WHEN I MAKE THE CALL TO GET ALL SONGS\r\n            }\r\n        ]\r\n    }\r\n\r\n\r\n\r\n// THE SONG ENTITY\r\n{\r\n        &quot;id&quot;: 1,\r\n        &quot;title&quot;: &quot;song 1&quot;,\r\n        &quot;src&quot;: &quot;song1.mp3&quot;,\r\n        &quot;image&quot;: &quot;song1.png&quot;,\r\n        &quot;artists&quot;: [\r\n            {\r\n                &quot;id&quot;: 2,\r\n                &quot;name&quot;: &quot;artist2&quot;,\r\n                &quot;image&quot;: &quot;artist2.png&quot;,\r\n//REMOVES THE FIELD songs INSIDE ARTIST. KEEPS THAT FIELD ONLY WHEN I MAKE THE CALL TO GET ALL ARTISTS\r\n            }\r\n        ]\r\n    }\r\n```\r\n","title":"Bidirectional Many-to-many relationships in Spring JPA (Hibernate)","body":"<p>Im having trouble with many-to-many Bidirectional mapping using Spring Data JPA with Hibernate as JPA provider. The bidirectional relationship mapping allows you to navigate the association in both directions and that is what i need. I have two entities: <code>Artist</code> and <code>Song</code>. When i get an artist i want to get all his songs and vice versa, when i get a song i want to get the artists of that song. This results in a recursive error which, as i researched could be solved with @JsonIdentityInfo or using @JsonIgnore, but neither if them doesnt give me the json i truly want.</p>\n<p>The Artist Entity:</p>\n<pre><code>@Entity\n@Table(name = &quot;artist&quot;)\n@JsonIdentityInfo(\n        generator = ObjectIdGenerators.PropertyGenerator.class,\n        property = &quot;id&quot;)\npublic class Artist {\n    @Id\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\n    private long id;\n\n    @Column(name = &quot;name&quot;)\n    private String name;\n\n    @Column(name = &quot;image&quot;)\n    private String image;\n\n\n    @ManyToMany(fetch = FetchType.LAZY, cascade = { CascadeType.PERSIST, CascadeType.MERGE })\n    @JoinTable(name = &quot;artist_songs&quot;, joinColumns = { @JoinColumn(name = &quot;artist_id&quot;) }, inverseJoinColumns = {\n            @JoinColumn(name = &quot;song_id&quot;) })\n    private Set&lt;Song&gt; songs = new HashSet&lt;&gt;();\n}\n</code></pre>\n<p>and the Song Entity:</p>\n<pre><code>@Entity\n@Table(name = &quot;song&quot;)\n@JsonIdentityInfo(\n        generator = ObjectIdGenerators.PropertyGenerator.class,\n        property = &quot;id&quot;)\npublic class Song {\n    @Id\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\n    private long id;\n\n    @Column(name = &quot;title&quot;)\n    private String title;\n\n    @Column(name = &quot;src&quot;)\n    private String src;\n\n    @Column(name = &quot;image&quot;)\n    private String image;\n\n    @ManyToMany(fetch = FetchType.LAZY,\n            cascade = {\n                    CascadeType.PERSIST,\n                    CascadeType.MERGE\n            },\n            mappedBy = &quot;songs&quot;)\n    private Set&lt;Artist&gt; artists = new HashSet&lt;&gt;();\n}\n</code></pre>\n<p>My problem is that when I make a call to get these entities i get these JSON objects:</p>\n<pre><code>// THE JSON I GET WHEN I CALL http://localhost:8080/api/artists\n[\n    {\n        &quot;id&quot;: 1,\n        &quot;name&quot;: &quot;artist1&quot;,\n        &quot;image&quot;: &quot;artist1.png&quot;,\n        &quot;songs&quot;: [\n            {\n                &quot;id&quot;: 1,\n                &quot;title&quot;: &quot;song 1&quot;,\n                &quot;src&quot;: &quot;spng1.mp3&quot;,\n                &quot;image&quot;: &quot;song1.png&quot;,\n                &quot;artists&quot;: [\n                    1\n                ]\n            },\n            {\n                &quot;id&quot;: 2,\n                &quot;title&quot;: &quot;song 2&quot;,\n                &quot;src&quot;: &quot;song2.mp3&quot;,\n                &quot;image&quot;: &quot;song2.png&quot;,\n                &quot;artists&quot;: [\n                    1\n                ]\n            }\n        ]\n    },\n    {\n        &quot;id&quot;: 2,\n        &quot;name&quot;: &quot;artist2&quot;,\n        &quot;image&quot;: &quot;artist2.png&quot;,\n        &quot;songs&quot;: [\n            {\n                &quot;id&quot;: 3,\n                &quot;title&quot;: &quot;song 3&quot;,\n                &quot;src&quot;: &quot;song3.mp3&quot;,\n                &quot;image&quot;: &quot;song3.png&quot;,\n                &quot;artists&quot;: [\n                    2\n                ]\n            }\n        ]\n    }\n]\n\n// THE JSON I GET WHEN I CALL http://localhost:8080/api/songs\n\n[\n    {\n        &quot;id&quot;: 1,\n        &quot;title&quot;: &quot;song 1&quot;,\n        &quot;src&quot;: &quot;spng1.mp3&quot;,\n        &quot;image&quot;: &quot;song1.png&quot;,\n        &quot;artists&quot;: [\n            {\n                &quot;id&quot;: 1,\n                &quot;name&quot;: &quot;artist1&quot;,\n                &quot;image&quot;: &quot;artist1.png&quot;,\n                &quot;songs&quot;: [\n                    {\n                        &quot;id&quot;: 2,\n                        &quot;title&quot;: &quot;song 2&quot;,\n                        &quot;src&quot;: &quot;song2.mp3&quot;,\n                        &quot;image&quot;: &quot;song2.png&quot;,\n                        &quot;artists&quot;: [\n                            1\n                        ]\n                    },\n                    1\n                ]\n            }\n        ]\n    },\n    2,\n    {\n        &quot;id&quot;: 3,\n        &quot;title&quot;: &quot;song 3&quot;,\n        &quot;src&quot;: &quot;song3.mp3&quot;,\n        &quot;image&quot;: &quot;song3.png&quot;,\n        &quot;artists&quot;: [\n            {\n                &quot;id&quot;: 2,\n                &quot;name&quot;: &quot;artist2&quot;,\n                &quot;image&quot;: &quot;artist2.png&quot;,\n                &quot;songs&quot;: [\n                    3\n                ]\n            }\n        ]\n    }\n]\n</code></pre>\n<p>The JSON objects I want are like these:</p>\n<pre><code>// THE ARTIST ENTITY\n{\n        &quot;id&quot;: 2,\n        &quot;name&quot;: &quot;artist2&quot;,\n        &quot;image&quot;: &quot;artist2.png&quot;,\n        &quot;songs&quot;: [\n            {\n              &quot;id&quot;: 1,\n              &quot;title&quot;: &quot;song 1&quot;,\n              &quot;src&quot;: &quot;song1.mp3&quot;,\n              &quot;image&quot;: &quot;song1.png&quot;,\n//REMOVES THE FIELD artists INSIDE SONG. KEEPS THAT FIELD ONLY WHEN I MAKE THE CALL TO GET ALL SONGS\n            },\n            {\n              &quot;id&quot;: 2,\n              &quot;title&quot;: &quot;song 2&quot;,\n              &quot;src&quot;: &quot;song2.mp3&quot;,\n              &quot;image&quot;: &quot;song2.png&quot;,\n//REMOVES THE FIELD artists INSIDE SONG. KEEPS THAT FIELD ONLY WHEN I MAKE THE CALL TO GET ALL SONGS\n            }\n        ]\n    }\n\n\n\n// THE SONG ENTITY\n{\n        &quot;id&quot;: 1,\n        &quot;title&quot;: &quot;song 1&quot;,\n        &quot;src&quot;: &quot;song1.mp3&quot;,\n        &quot;image&quot;: &quot;song1.png&quot;,\n        &quot;artists&quot;: [\n            {\n                &quot;id&quot;: 2,\n                &quot;name&quot;: &quot;artist2&quot;,\n                &quot;image&quot;: &quot;artist2.png&quot;,\n//REMOVES THE FIELD songs INSIDE ARTIST. KEEPS THAT FIELD ONLY WHEN I MAKE THE CALL TO GET ALL ARTISTS\n            }\n        ]\n    }\n</code></pre>\n"},{"tags":["java","spring-boot","rest","http-method"],"comments":[{"owner":{"account_id":295316,"reputation":736,"user_id":3324415,"accept_rate":74,"display_name":"BernardV"},"score":1,"creation_date":1687442318,"post_id":76532614,"comment_id":134939956,"body_markdown":"Your wording of the question needs work. Also what does a question regarding the purpose of HTTP methods have to do with Spring Boot?","body":"Your wording of the question needs work. Also what does a question regarding the purpose of HTTP methods have to do with Spring Boot?"},{"owner":{"account_id":3930229,"reputation":2278,"user_id":4412979,"accept_rate":50,"display_name":"Vasily Liaskovsky"},"score":0,"creation_date":1691603990,"post_id":76532614,"comment_id":135515352,"body_markdown":"I just wonder how a user with over 30k rep and `spring-boot` tag on more than 50% of their posts could ask this kind of newbie question. Is this some kind of joke? Or are you guys grinding rep this way?","body":"I just wonder how a user with over 30k rep and <code>spring-boot</code> tag on more than 50% of their posts could ask this kind of newbie question. Is this some kind of joke? Or are you guys grinding rep this way?"}],"answers":[{"tags":[],"owner":{"account_id":24557191,"reputation":101,"user_id":18465532,"display_name":"Mina-"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1687442390,"creation_date":1687442390,"answer_id":76532714,"question_id":76532614,"body_markdown":"## HTTP Methods are standard or specification\r\nAs you said, you can implement with totally ignoring what standard says, but it means your software/api should be used with concerns(because this don&#39;t follow standards), which make integration with others complicated.\r\n\r\nFor example, old standard says there can&#39;t be no body should be sent on GET, and Java developers followed this standard faithfully, errors occurred or were ignored when adding a body to a GET request, which made some developers in trouble who did not followed standard.\r\n\r\nRead also: [HTTP Methods definitions - RFC 9110](https://www.rfc-editor.org/rfc/rfc9110#name-method-definitions)","title":"Spring Boot Difference usages of HTTP Methods","body":"<h2>HTTP Methods are standard or specification</h2>\n<p>As you said, you can implement with totally ignoring what standard says, but it means your software/api should be used with concerns(because this don't follow standards), which make integration with others complicated.</p>\n<p>For example, old standard says there can't be no body should be sent on GET, and Java developers followed this standard faithfully, errors occurred or were ignored when adding a body to a GET request, which made some developers in trouble who did not followed standard.</p>\n<p>Read also: <a href=\"https://www.rfc-editor.org/rfc/rfc9110#name-method-definitions\" rel=\"nofollow noreferrer\">HTTP Methods definitions - RFC 9110</a></p>\n"}],"owner":{"account_id":325224,"reputation":34820,"user_id":646276,"accept_rate":61,"display_name":"Lolly"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":88,"favorite_count":0,"down_vote_count":2,"up_vote_count":0,"answer_count":1,"score":-2,"last_activity_date":1691602917,"creation_date":1687441653,"question_id":76532614,"body_markdown":"I am using Spring Boot for creating rest API. I learnt about PUT, PATCH, POST. PUT is for updating the resource and if Id is not present then it creates. Patch is for updating part of the resource and Post for creating new resources.\r\n\r\nWhat I don&#39;t understand is, are they are only standards that helps outside world to let all know what the API is for ? Because I can do the same implementation in Put like Patch and make Put request to perform partial updates.","title":"Spring Boot Difference usages of HTTP Methods","body":"<p>I am using Spring Boot for creating rest API. I learnt about PUT, PATCH, POST. PUT is for updating the resource and if Id is not present then it creates. Patch is for updating part of the resource and Post for creating new resources.</p>\n<p>What I don't understand is, are they are only standards that helps outside world to let all know what the API is for ? Because I can do the same implementation in Put like Patch and make Put request to perform partial updates.</p>\n"},{"tags":["java","spring-boot","apache-kafka","spring-kafka"],"answers":[{"tags":[],"owner":{"account_id":12007582,"reputation":101,"user_id":8785434,"display_name":"Nguyen Tung"},"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1687704568,"creation_date":1687704568,"answer_id":76550990,"question_id":76550855,"body_markdown":"The configuration ```max-request-size``` will help you in this case. This configuration is used to specify the maximum size of a request. By default, It is set to 1MB, that why you are seeing the error.\r\nYou can add the following property in your property file:\r\n```\r\nspring:\r\n  kafka:\r\n   producer:\r\n     max-request-size: 2097152\r\n```\r\nNote 2MB = 2097152 bytes (you can change it according to your requirement).\r\n\r\n","title":"Kafka message compression not working as expected","body":"<p>The configuration <code>max-request-size</code> will help you in this case. This configuration is used to specify the maximum size of a request. By default, It is set to 1MB, that why you are seeing the error.\nYou can add the following property in your property file:</p>\n<pre><code>spring:\n  kafka:\n   producer:\n     max-request-size: 2097152\n</code></pre>\n<p>Note 2MB = 2097152 bytes (you can change it according to your requirement).</p>\n"}],"owner":{"account_id":325224,"reputation":34820,"user_id":646276,"accept_rate":61,"display_name":"Lolly"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":359,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76550990,"answer_count":1,"score":0,"last_activity_date":1691602861,"creation_date":1687702838,"question_id":76550855,"body_markdown":"My project uses Apache Kafka for sending messages. Over the period of time, payload becomes heavy and has crossed the default size of 1MB. We thought of compressing the message at Producer end, but it is not working as expected.\r\n\r\nHere is the producer config,\r\n\r\n    spring:\r\n        kafka:\r\n            consumer:\r\n              group-id: group_name\r\n              bootstrap-servers: broker-server:9343\r\n            producer:\r\n              bootstrap-servers: ${spring.kafka.consumer.bootstrap-servers}\r\n              key-serializer: org.apache.kafka.common.serialization.StringSerializer\r\n              value-serializer: io.confluent.kafka.serializers.KafkaAvroSerializer\r\n              compression-type: gzip\r\n\r\nbut with above configuration, if I send a message more than 1 MB, I am facing below error,\r\n\r\n&gt; org.springframework.kafka.KafkaException: Send failed; nested exception is org.apache.kafka.common.errors.RecordTooLargeException: The message is 1909152 bytes when serialized which is larger than 1048576, which is the value of the max.request.size configuration\r\n\r\nIs there any other configuration required to enable compression ? \r\n","title":"Kafka message compression not working as expected","body":"<p>My project uses Apache Kafka for sending messages. Over the period of time, payload becomes heavy and has crossed the default size of 1MB. We thought of compressing the message at Producer end, but it is not working as expected.</p>\n<p>Here is the producer config,</p>\n<pre><code>spring:\n    kafka:\n        consumer:\n          group-id: group_name\n          bootstrap-servers: broker-server:9343\n        producer:\n          bootstrap-servers: ${spring.kafka.consumer.bootstrap-servers}\n          key-serializer: org.apache.kafka.common.serialization.StringSerializer\n          value-serializer: io.confluent.kafka.serializers.KafkaAvroSerializer\n          compression-type: gzip\n</code></pre>\n<p>but with above configuration, if I send a message more than 1 MB, I am facing below error,</p>\n<blockquote>\n<p>org.springframework.kafka.KafkaException: Send failed; nested exception is org.apache.kafka.common.errors.RecordTooLargeException: The message is 1909152 bytes when serialized which is larger than 1048576, which is the value of the max.request.size configuration</p>\n</blockquote>\n<p>Is there any other configuration required to enable compression ?</p>\n"},{"tags":["java","spring-boot","apache-kafka","spring-kafka"],"answers":[{"tags":[],"owner":{"account_id":2671330,"reputation":183376,"user_id":2308683,"accept_rate":90,"display_name":"OneCricketeer"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1689254490,"creation_date":1689254162,"answer_id":76679793,"question_id":76675335,"body_markdown":"Messages are always sent as bytes. That&#39;s the responsibly of the serializer \r\n\r\nDecompression is automatically done by the consumer. If you&#39;re getting an exception, it&#39;s caused by something else. For example, &quot;message conversion&quot; seems like a deserializer exception while taking the byte array to some POJO ","title":"Kafka consumer side decompression","body":"<p>Messages are always sent as bytes. That's the responsibly of the serializer</p>\n<p>Decompression is automatically done by the consumer. If you're getting an exception, it's caused by something else. For example, &quot;message conversion&quot; seems like a deserializer exception while taking the byte array to some POJO</p>\n"}],"owner":{"account_id":325224,"reputation":34820,"user_id":646276,"accept_rate":61,"display_name":"Lolly"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":109,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":1,"score":0,"last_activity_date":1691602785,"creation_date":1689211522,"question_id":76675335,"body_markdown":"My application is implemented in Java using Spring Boot. We are using Kafka for receiving messages from another application which is implemented in .net.\r\n\r\nAs the message size becomes bigger than 1 MB, from producer end, they have implemented compression. But after compression, messages are sent in byte format and at consumer end, we are getting &quot;Message conversion Exception&quot;.\r\n\r\nShould we need to decompress the message which is in byte ? I tried searching but I haven&#39;t found any decompression technique at consumer end using Java Spring Boot. Does anyone faced such scenario ?\r\n","title":"Kafka consumer side decompression","body":"<p>My application is implemented in Java using Spring Boot. We are using Kafka for receiving messages from another application which is implemented in .net.</p>\n<p>As the message size becomes bigger than 1 MB, from producer end, they have implemented compression. But after compression, messages are sent in byte format and at consumer end, we are getting &quot;Message conversion Exception&quot;.</p>\n<p>Should we need to decompress the message which is in byte ? I tried searching but I haven't found any decompression technique at consumer end using Java Spring Boot. Does anyone faced such scenario ?</p>\n"},{"tags":["java","spring-boot","jpa","spring-data-jpa","spring-data"],"comments":[{"owner":{"account_id":2673407,"reputation":44640,"user_id":2310289,"display_name":"Scary Wombat"},"score":0,"creation_date":1691371912,"post_id":76848273,"comment_id":135478042,"body_markdown":"Show your repository class.  Do you have something like `@Id\n\tprivate Long id;` ?","body":"Show your repository class.  Do you have something like <code>@Id \tprivate Long id;</code> ?"},{"owner":{"account_id":11736247,"reputation":435,"user_id":8589908,"accept_rate":25,"display_name":"Radika Moonesinghe"},"score":0,"creation_date":1691372701,"post_id":76848273,"comment_id":135478089,"body_markdown":"That what your after?","body":"That what your after?"},{"owner":{"account_id":4181375,"reputation":5091,"user_id":3426309,"display_name":"Andrey B. Panfilov"},"score":0,"creation_date":1691374983,"post_id":76848273,"comment_id":135478229,"body_markdown":"there is nothing wrong with your code - HBN does not support such concept: you are expecting to get the list of DTOs per JDBC-resultset, however HBN is trying to construct DTO per row. That is requires two steps: first, select entities and than convert them to DTOs","body":"there is nothing wrong with your code - HBN does not support such concept: you are expecting to get the list of DTOs per JDBC-resultset, however HBN is trying to construct DTO per row. That is requires two steps: first, select entities and than convert them to DTOs"},{"owner":{"account_id":11736247,"reputation":435,"user_id":8589908,"accept_rate":25,"display_name":"Radika Moonesinghe"},"score":0,"creation_date":1691375621,"post_id":76848273,"comment_id":135478269,"body_markdown":"@AndreyB.Panfilov do you have a link an article with more detail? Need to understand better.","body":"@AndreyB.Panfilov do you have a link an article with more detail? Need to understand better."},{"owner":{"account_id":24440940,"reputation":3122,"user_id":18364656,"display_name":"Andrei Lisa"},"score":0,"creation_date":1691387153,"post_id":76848273,"comment_id":135479110,"body_markdown":"can you update  question with bird service impl ?","body":"can you update  question with bird service impl ?"},{"owner":{"account_id":11736247,"reputation":435,"user_id":8589908,"accept_rate":25,"display_name":"Radika Moonesinghe"},"score":0,"creation_date":1691398492,"post_id":76848273,"comment_id":135480901,"body_markdown":"@AndreiLisa updated.","body":"@AndreiLisa updated."},{"owner":{"account_id":24440940,"reputation":3122,"user_id":18364656,"display_name":"Andrei Lisa"},"score":0,"creation_date":1691398664,"post_id":76848273,"comment_id":135480935,"body_markdown":"thanks, also add `BirdTestDto ` constructor, i will see if your constructor mach your DTO projections requirements","body":"thanks, also add <code>BirdTestDto </code> constructor, i will see if your constructor mach your DTO projections requirements"},{"owner":{"account_id":24440940,"reputation":3122,"user_id":18364656,"display_name":"Andrei Lisa"},"score":0,"creation_date":1691398819,"post_id":76848273,"comment_id":135480961,"body_markdown":"add @Param(&quot;id&quot;) for your  query `Optional&lt;BirdTestDto&gt; testBirdTestDto(@Param(&quot;id&quot;) Long id);`","body":"add @Param(&quot;id&quot;) for your  query <code>Optional&lt;BirdTestDto&gt; testBirdTestDto(@Param(&quot;id&quot;) Long id);</code>"},{"owner":{"account_id":24440940,"reputation":3122,"user_id":18364656,"display_name":"Andrei Lisa"},"score":0,"creation_date":1691401155,"post_id":76848273,"comment_id":135481412,"body_markdown":"have you tried it ? @RadikaMoonesinghe","body":"have you tried it ? @RadikaMoonesinghe"},{"owner":{"account_id":11736247,"reputation":435,"user_id":8589908,"accept_rate":25,"display_name":"Radika Moonesinghe"},"score":0,"creation_date":1691401799,"post_id":76848273,"comment_id":135481562,"body_markdown":"@AndreiLisa yes I have (good spotting) - but the error is still there. In fact the query syntax checker in Intellij is underlining it in red. I dont even get to try to build.","body":"@AndreiLisa yes I have (good spotting) - but the error is still there. In fact the query syntax checker in Intellij is underlining it in red. I dont even get to try to build."},{"owner":{"account_id":24440940,"reputation":3122,"user_id":18364656,"display_name":"Andrei Lisa"},"score":0,"creation_date":1691402556,"post_id":76848273,"comment_id":135481715,"body_markdown":"can you upload you source code on github, and add the link ?  i will check and will give the feedback","body":"can you upload you source code on github, and add the link ?  i will check and will give the feedback"},{"owner":{"account_id":11736247,"reputation":435,"user_id":8589908,"accept_rate":25,"display_name":"Radika Moonesinghe"},"score":0,"creation_date":1691402761,"post_id":76848273,"comment_id":135481752,"body_markdown":"Let us [continue this discussion in chat](https://chat.stackoverflow.com/rooms/254834/discussion-between-radika-moonesinghe-and-andrei-lisa).","body":"Let us <a href=\"https://chat.stackoverflow.com/rooms/254834/discussion-between-radika-moonesinghe-and-andrei-lisa\">continue this discussion in chat</a>."},{"owner":{"account_id":24440940,"reputation":3122,"user_id":18364656,"display_name":"Andrei Lisa"},"score":0,"creation_date":1691414158,"post_id":76848273,"comment_id":135484119,"body_markdown":"i gave a answer in our chat, can you check please ? red underlining will disappear","body":"i gave a answer in our chat, can you check please ? red underlining will disappear"}],"answers":[{"tags":[],"owner":{"account_id":24440940,"reputation":3122,"user_id":18364656,"display_name":"Andrei Lisa"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691602743,"creation_date":1691602743,"answer_id":76870106,"question_id":76848273,"body_markdown":"In our chat i gave an approach but there you need to call 2 different repository(birds and healthcheck) and now i want to give this answer based on `Interface Projections` because the birds entity have inner association with HealthCheck entity \r\n\r\nFirst of all, declare a interface like next one:\r\n\r\n    public interface BirdsTestDTO {\r\n    \r\n      String getName();\r\n    \r\n      Sex getSex();\r\n    \r\n      BirdStatus getStatus();\r\n    \r\n      List&lt;HealthCheckDto&gt; getListHealthCheck();\r\n    \r\n      interface HealthCheckDto {\r\n    \r\n        Long getId();\r\n\r\n        LocalDate getLocalDate();\r\n    \r\n        String getField();\r\n      }\r\n    \r\n    }\r\n\r\n**Be careful, next ones requirement is mandatory**\r\n\r\n 1. Default `get` prefix for every field\r\n 2. Field name after get must be the same as field name declared in entity class\r\n\r\n\r\nAnd finally in your Bird Repository you will have next one query\r\n\r\n      Optional&lt;BirdsTestDTO&gt; getBirdsById(@Param(&quot;id&quot;) Long id);\r\n\r\nThe result of all of this operations is the same, how you told me in our chat:\r\n\r\n\r\n[![enter image description here][1]][1]\r\n\r\n**Here you can have `n+1` problem, to avoid it create a custom query using `JOIN FETCH clause.` Do it in your own.**\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/nS0uL.png","title":"Spring-data JPA Query can not locate appropriate constructor","body":"<p>In our chat i gave an approach but there you need to call 2 different repository(birds and healthcheck) and now i want to give this answer based on <code>Interface Projections</code> because the birds entity have inner association with HealthCheck entity</p>\n<p>First of all, declare a interface like next one:</p>\n<pre><code>public interface BirdsTestDTO {\n\n  String getName();\n\n  Sex getSex();\n\n  BirdStatus getStatus();\n\n  List&lt;HealthCheckDto&gt; getListHealthCheck();\n\n  interface HealthCheckDto {\n\n    Long getId();\n\n    LocalDate getLocalDate();\n\n    String getField();\n  }\n\n}\n</code></pre>\n<p><strong>Be careful, next ones requirement is mandatory</strong></p>\n<ol>\n<li>Default <code>get</code> prefix for every field</li>\n<li>Field name after get must be the same as field name declared in entity class</li>\n</ol>\n<p>And finally in your Bird Repository you will have next one query</p>\n<pre><code>  Optional&lt;BirdsTestDTO&gt; getBirdsById(@Param(&quot;id&quot;) Long id);\n</code></pre>\n<p>The result of all of this operations is the same, how you told me in our chat:</p>\n<p><a href=\"https://i.stack.imgur.com/nS0uL.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/nS0uL.png\" alt=\"enter image description here\" /></a></p>\n<p><strong>Here you can have <code>n+1</code> problem, to avoid it create a custom query using <code>JOIN FETCH clause.</code> Do it in your own.</strong></p>\n"}],"owner":{"account_id":11736247,"reputation":435,"user_id":8589908,"accept_rate":25,"display_name":"Radika Moonesinghe"},"comment_count":13,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":276,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"answer_count":1,"score":3,"last_activity_date":1691602743,"creation_date":1691369477,"question_id":76848273,"body_markdown":"In a Spring Boot 2.6 project I am getting a error that it cannot locate an appropriate constructor and further down that Validation failed for query method.\r\n\r\nMy query is returning a Dto with projection:\r\n\r\nBirdTestDto\r\n\r\n      @Value\r\n      public class BirdTestDto implements Serializable {\r\n        private String name;\r\n        private Sex sex;\r\n        private Status status;\r\n        private List&lt;HealthCheck&gt; listHealthCheck;\r\n\r\n    //Constructor\r\n    //Getter\r\n\r\nThe query on the repository is:\r\n\r\n        @Query(&quot;SELECT NEW com.nz.seagull.view.BirdTestDto(b.name, b.sex, b.status, b.listHealthCheck) &quot; +\r\n            &quot;FROM Bird b &quot; +\r\n            &quot;WHERE b.id = :id&quot;)\r\n       Optional&lt;BirdTestDto&gt; testBirdTestDto(Long id);\r\n\r\nThe stack trace is:\r\n\r\n    \torg.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name &#39;seagullController&#39; defined in file [C:\\Users\\AlGrant\\IdeaProjects\\seagull1\\build\\classes\\java\\main\\com\\nz\\seagull\\controller\\seagullController.class]: Unsatisfied dependency expressed through constructor parameter 0; nested exception is org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name &#39;birdServiceImpl&#39; defined in file [C:\\Users\\AlGrant\\IdeaProjects\\seagull1\\build\\classes\\java\\main\\com\\nz\\seagull\\implementation\\BirdServiceImpl.class]: Unsatisfied dependency expressed through constructor parameter 0; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name &#39;birdRepository&#39; defined in com.nz.seagull.repository.BirdRepository defined in @EnableJpaRepositories declared on JpaRepositoriesRegistrar.EnableJpaRepositoriesConfiguration: Invocation of init method failed; nested exception is org.springframework.data.repository.query.QueryCreationException: Could not create query for public abstract java.util.Optional com.nz.seagull.repository.BirdRepository.testBirdTestDto(java.lang.Long)! Reason: Validation failed for query for method public abstract java.util.Optional com.nz.seagull.repository.BirdRepository.testBirdTestDto(java.lang.Long)!; nested exception is java.lang.IllegalArgumentException: Validation failed for query for method public abstract java.util.Optional com.nz.seagull.repository.BirdRepository.testBirdTestDto(java.lang.Long)!\r\n\t\tat org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:800) ~[spring-beans-5.3.16.jar:5.3.16]\r\n\t\tat org.springframework.beans.factory.support.ConstructorResolver.autowireConstructor(ConstructorResolver.java:229) ~[spring-beans-5.3.16.jar:5.3.16]\r\n\t\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.autowireConstructor(AbstractAutowireCapableBeanFactory.java:1372) ~[spring-beans-5.3.16.jar:5.3.16]\r\n\t\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1222) ~[spring-beans-5.3.16.jar:5.3.16]\r\n\t\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:582) ~[spring-beans-5.3.16.jar:5.3.16]\r\n\t\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:542) ~[spring-beans-5.3.16.jar:5.3.16]\r\n\t\tat org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:335) ~[spring-beans-5.3.16.jar:5.3.16]\r\n\t\tat org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234) ~[spring-beans-5.3.16.jar:5.3.16]\r\n\t\tat org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:333) ~[spring-beans-5.3.16.jar:5.3.16]\r\n\t\tat org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:208) ~[spring-beans-5.3.16.jar:5.3.16]\r\n\t\tat org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:953) ~[spring-beans-5.3.16.jar:5.3.16]\r\n\t\tat org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:918) ~[spring-context-5.3.16.jar:5.3.16]\r\n\t\tat org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:583) ~[spring-context-5.3.16.jar:5.3.16]\r\n\t\tat org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:145) ~[spring-boot-2.6.4.jar:2.6.4]\r\n\t\tat org.springframework.boot.SpringApplication.refresh(SpringApplication.java:740) ~[spring-boot-2.6.4.jar:2.6.4]\r\n\t\tat org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:415) ~[spring-boot-2.6.4.jar:2.6.4]\r\n\t\tat org.springframework.boot.SpringApplication.run(SpringApplication.java:303) ~[spring-boot-2.6.4.jar:2.6.4]\r\n\t\tat org.springframework.boot.SpringApplication.run(SpringApplication.java:1312) ~[spring-boot-2.6.4.jar:2.6.4]\r\n\t\tat org.springframework.boot.SpringApplication.run(SpringApplication.java:1301) ~[spring-boot-2.6.4.jar:2.6.4]\r\n\t\tat com.nz.seagull.seagullApplication.main(seagullApplication.java:22) ~[main/:na]\r\n\t\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]\r\n\t\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) ~[na:na]\r\n\t\tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]\r\n\t\tat java.base/java.lang.reflect.Method.invoke(Method.java:566) ~[na:na]\r\n\t\tat org.springframework.boot.devtools.restart.RestartLauncher.run(RestartLauncher.java:49) ~[spring-boot-devtools-2.6.4.jar:2.6.4]\r\n\tCaused by: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name &#39;birdServiceImpl&#39; defined in file [C:\\Users\\AlGrant\\IdeaProjects\\seagull1\\build\\classes\\java\\main\\com\\nz\\seagull\\implementation\\BirdServiceImpl.class]: Unsatisfied dependency expressed through constructor parameter 0; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name &#39;birdRepository&#39; defined in com.nz.seagull.repository.BirdRepository defined in @EnableJpaRepositories declared on JpaRepositoriesRegistrar.EnableJpaRepositoriesConfiguration: Invocation of init method failed; nested exception is org.springframework.data.repository.query.QueryCreationException: Could not create query for public abstract java.util.Optional com.nz.seagull.repository.BirdRepository.testBirdTestDto(java.lang.Long)! Reason: Validation failed for query for method public abstract java.util.Optional com.nz.seagull.repository.BirdRepository.testBirdTestDto(java.lang.Long)!; nested exception is java.lang.IllegalArgumentException: Validation failed for query for method public abstract java.util.Optional com.nz.seagull.repository.BirdRepository.testBirdTestDto(java.lang.Long)!\r\n\t\tat org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:800) ~[spring-beans-5.3.16.jar:5.3.16]\r\n\t\tat org.springframework.beans.factory.support.ConstructorResolver.autowireConstructor(ConstructorResolver.java:229) ~[spring-beans-5.3.16.jar:5.3.16]\r\n\t\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.autowireConstructor(AbstractAutowireCapableBeanFactory.java:1372) ~[spring-beans-5.3.16.jar:5.3.16]\r\n\t\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1222) ~[spring-beans-5.3.16.jar:5.3.16]\r\n\t\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:582) ~[spring-beans-5.3.16.jar:5.3.16]\r\n\t\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:542) ~[spring-beans-5.3.16.jar:5.3.16]\r\n\t\tat org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:335) ~[spring-beans-5.3.16.jar:5.3.16]\r\n\t\tat org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234) ~[spring-beans-5.3.16.jar:5.3.16]\r\n\t\tat org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:333) ~[spring-beans-5.3.16.jar:5.3.16]\r\n\t\tat org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:208) ~[spring-beans-5.3.16.jar:5.3.16]\r\n\t\tat org.springframework.beans.factory.config.DependencyDescriptor.resolveCandidate(DependencyDescriptor.java:276) ~[spring-beans-5.3.16.jar:5.3.16]\r\n\t\tat org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1389) ~[spring-beans-5.3.16.jar:5.3.16]\r\n\t\tat org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1309) ~[spring-beans-5.3.16.jar:5.3.16]\r\n\t\tat org.springframework.beans.factory.support.ConstructorResolver.resolveAutowiredArgument(ConstructorResolver.java:887) ~[spring-beans-5.3.16.jar:5.3.16]\r\n\t\tat org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:791) ~[spring-beans-5.3.16.jar:5.3.16]\r\n\t\t... 24 common frames omitted\r\n\tCaused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name &#39;birdRepository&#39; defined in com.nz.seagull.repository.BirdRepository defined in @EnableJpaRepositories declared on JpaRepositoriesRegistrar.EnableJpaRepositoriesConfiguration: Invocation of init method failed; nested exception is org.springframework.data.repository.query.QueryCreationException: Could not create query for public abstract java.util.Optional com.nz.seagull.repository.BirdRepository.testBirdTestDto(java.lang.Long)! Reason: Validation failed for query for method public abstract java.util.Optional com.nz.seagull.repository.BirdRepository.testBirdTestDto(java.lang.Long)!; nested exception is java.lang.IllegalArgumentException: Validation failed for query for method public abstract java.util.Optional com.nz.seagull.repository.BirdRepository.testBirdTestDto(java.lang.Long)!\r\n\t\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1804) ~[spring-beans-5.3.16.jar:5.3.16]\r\n\t\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:620) ~[spring-beans-5.3.16.jar:5.3.16]\r\n\t\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:542) ~[spring-beans-5.3.16.jar:5.3.16]\r\n\t\tat org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:335) ~[spring-beans-5.3.16.jar:5.3.16]\r\n\t\tat org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234) ~[spring-beans-5.3.16.jar:5.3.16]\r\n\t\tat org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:333) ~[spring-beans-5.3.16.jar:5.3.16]\r\n\t\tat org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:208) ~[spring-beans-5.3.16.jar:5.3.16]\r\n\t\tat org.springframework.beans.factory.config.DependencyDescriptor.resolveCandidate(DependencyDescriptor.java:276) ~[spring-beans-5.3.16.jar:5.3.16]\r\n\t\tat org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1389) ~[spring-beans-5.3.16.jar:5.3.16]\r\n\t\tat org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1309) ~[spring-beans-5.3.16.jar:5.3.16]\r\n\t\tat org.springframework.beans.factory.support.ConstructorResolver.resolveAutowiredArgument(ConstructorResolver.java:887) ~[spring-beans-5.3.16.jar:5.3.16]\r\n\t\tat org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:791) ~[spring-beans-5.3.16.jar:5.3.16]\r\n\t\t... 38 common frames omitted\r\n\tCaused by: org.springframework.data.repository.query.QueryCreationException: Could not create query for public abstract java.util.Optional com.nz.seagull.repository.BirdRepository.testBirdTestDto(java.lang.Long)! Reason: Validation failed for query for method public abstract java.util.Optional com.nz.seagull.repository.BirdRepository.testBirdTestDto(java.lang.Long)!; nested exception is java.lang.IllegalArgumentException: Validation failed for query for method public abstract java.util.Optional com.nz.seagull.repository.BirdRepository.testBirdTestDto(java.lang.Long)!\r\n\t\tat org.springframework.data.repository.query.QueryCreationException.create(QueryCreationException.java:101) ~[spring-data-commons-2.6.2.jar:2.6.2]\r\n\t\tat org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.lookupQuery(QueryExecutorMethodInterceptor.java:106) ~[spring-data-commons-2.6.2.jar:2.6.2]\r\n\t\tat org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.lambda$mapMethodsToQuery$1(QueryExecutorMethodInterceptor.java:94) ~[spring-data-commons-2.6.2.jar:2.6.2]\r\n\t\tat java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:195) ~[na:na]\r\n\t\tat java.base/java.util.Iterator.forEachRemaining(Iterator.java:133) ~[na:na]\r\n\t\tat java.base/java.util.Collections$UnmodifiableCollection$1.forEachRemaining(Collections.java:1054) ~[na:na]\r\n\t\tat java.base/java.util.Spliterators$IteratorSpliterator.forEachRemaining(Spliterators.java:1801) ~[na:na]\r\n\t\tat java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:484) ~[na:na]\r\n\t\tat java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:474) ~[na:na]\r\n\t\tat java.base/java.util.stream.ReduceOps$ReduceOp.evaluateSequential(ReduceOps.java:913) ~[na:na]\r\n\t\tat java.base/java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234) ~[na:na]\r\n\t\tat java.base/java.util.stream.ReferencePipeline.collect(ReferencePipeline.java:578) ~[na:na]\r\n\t\tat org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.mapMethodsToQuery(QueryExecutorMethodInterceptor.java:96) ~[spring-data-commons-2.6.2.jar:2.6.2]\r\n\t\tat org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.lambda$new$0(QueryExecutorMethodInterceptor.java:86) ~[spring-data-commons-2.6.2.jar:2.6.2]\r\n\t\tat java.base/java.util.Optional.map(Optional.java:265) ~[na:na]\r\n\t\tat org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.&lt;init&gt;(QueryExecutorMethodInterceptor.java:86) ~[spring-data-commons-2.6.2.jar:2.6.2]\r\n\t\tat org.springframework.data.repository.core.support.RepositoryFactorySupport.getRepository(RepositoryFactorySupport.java:364) ~[spring-data-commons-2.6.2.jar:2.6.2]\r\n\t\tat org.springframework.data.repository.core.support.RepositoryFactoryBeanSupport.lambda$afterPropertiesSet$5(RepositoryFactoryBeanSupport.java:322) ~[spring-data-commons-2.6.2.jar:2.6.2]\r\n\t\tat org.springframework.data.util.Lazy.getNullable(Lazy.java:230) ~[spring-data-commons-2.6.2.jar:2.6.2]\r\n\t\tat org.springframework.data.util.Lazy.get(Lazy.java:114) ~[spring-data-commons-2.6.2.jar:2.6.2]\r\n\t\tat org.springframework.data.repository.core.support.RepositoryFactoryBeanSupport.afterPropertiesSet(RepositoryFactoryBeanSupport.java:328) ~[spring-data-commons-2.6.2.jar:2.6.2]\r\n\t\tat org.springframework.data.jpa.repository.support.JpaRepositoryFactoryBean.afterPropertiesSet(JpaRepositoryFactoryBean.java:144) ~[spring-data-jpa-2.6.2.jar:2.6.2]\r\n\t\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1863) ~[spring-beans-5.3.16.jar:5.3.16]\r\n\t\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1800) ~[spring-beans-5.3.16.jar:5.3.16]\r\n\t\t... 49 common frames omitted\r\n\tCaused by: java.lang.IllegalArgumentException: Validation failed for query for method public abstract java.util.Optional com.nz.seagull.repository.BirdRepository.testBirdTestDto(java.lang.Long)!\r\n\t\tat org.springframework.data.jpa.repository.query.SimpleJpaQuery.validateQuery(SimpleJpaQuery.java:96) ~[spring-data-jpa-2.6.2.jar:2.6.2]\r\n\t\tat org.springframework.data.jpa.repository.query.SimpleJpaQuery.&lt;init&gt;(SimpleJpaQuery.java:66) ~[spring-data-jpa-2.6.2.jar:2.6.2]\r\n\t\tat org.springframework.data.jpa.repository.query.JpaQueryFactory.fromMethodWithQueryString(JpaQueryFactory.java:51) ~[spring-data-jpa-2.6.2.jar:2.6.2]\r\n\t\tat org.springframework.data.jpa.repository.query.JpaQueryLookupStrategy$DeclaredQueryLookupStrategy.resolveQuery(JpaQueryLookupStrategy.java:163) ~[spring-data-jpa-2.6.2.jar:2.6.2]\r\n\t\tat org.springframework.data.jpa.repository.query.JpaQueryLookupStrategy$CreateIfNotFoundQueryLookupStrategy.resolveQuery(JpaQueryLookupStrategy.java:252) ~[spring-data-jpa-2.6.2.jar:2.6.2]\r\n\t\tat org.springframework.data.jpa.repository.query.JpaQueryLookupStrategy$AbstractQueryLookupStrategy.resolveQuery(JpaQueryLookupStrategy.java:87) ~[spring-data-jpa-2.6.2.jar:2.6.2]\r\n\t\tat org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.lookupQuery(QueryExecutorMethodInterceptor.java:102) ~[spring-data-commons-2.6.2.jar:2.6.2]\r\n\t\t... 71 common frames omitted\r\n\tCaused by: java.lang.IllegalArgumentException: org.hibernate.hql.internal.ast.QuerySyntaxException: Unable to locate appropriate constructor on class [com.nz.seagull.view.BirdTestDto]. Expected arguments are: java.lang.String, com.nz.seagull.enumeration.Sex, com.nz.seagull.enumeration.Status, java.util.Collection [SELECT NEW com.nz.seagull.view.BirdTestDto(b.name, b.sex, b.status, b.listHealthCheck) FROM com.nz.seagull.model.Bird b WHERE b.id = :id]\r\n\t\tat org.hibernate.internal.ExceptionConverterImpl.convert(ExceptionConverterImpl.java:138) ~[hibernate-core-5.6.5.Final.jar:5.6.5.Final]\r\n\t\tat org.hibernate.internal.ExceptionConverterImpl.convert(ExceptionConverterImpl.java:181) ~[hibernate-core-5.6.5.Final.jar:5.6.5.Final]\r\n\t\tat org.hibernate.internal.ExceptionConverterImpl.convert(ExceptionConverterImpl.java:188) ~[hibernate-core-5.6.5.Final.jar:5.6.5.Final]\r\n\t\tat org.hibernate.internal.AbstractSharedSessionContract.createQuery(AbstractSharedSessionContract.java:757) ~[hibernate-core-5.6.5.Final.jar:5.6.5.Final]\r\n\t\tat org.hibernate.internal.AbstractSharedSessionContract.createQuery(AbstractSharedSessionContract.java:114) ~[hibernate-core-5.6.5.Final.jar:5.6.5.Final]\r\n\t\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]\r\n\t\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) ~[na:na]\r\n\t\tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]\r\n\t\tat java.base/java.lang.reflect.Method.invoke(Method.java:566) ~[na:na]\r\n\t\tat org.springframework.orm.jpa.ExtendedEntityManagerCreator$ExtendedEntityManagerInvocationHandler.invoke(ExtendedEntityManagerCreator.java:362) ~[spring-orm-5.3.16.jar:5.3.16]\r\n\t\tat com.sun.proxy.$Proxy118.createQuery(Unknown Source) ~[na:na]\r\n\t\tat org.springframework.data.jpa.repository.query.SimpleJpaQuery.validateQuery(SimpleJpaQuery.java:90) ~[spring-data-jpa-2.6.2.jar:2.6.2]\r\n\t\t... 77 common frames omitted\r\n\tCaused by: org.hibernate.hql.internal.ast.QuerySyntaxException: Unable to locate appropriate constructor on class [com.nz.seagull.view.BirdTestDto]. Expected arguments are: java.lang.String, com.nz.seagull.enumeration.Sex, com.nz.seagull.enumeration.Status, java.util.Collection [SELECT NEW com.nz.seagull.view.BirdTestDto(b.name, b.sex, b.status, b.listHealthCheck) FROM com.nz.seagull.model.Bird b WHERE b.id = :id]\r\n\t\tat org.hibernate.hql.internal.ast.QuerySyntaxException.convert(QuerySyntaxException.java:74) ~[hibernate-core-5.6.5.Final.jar:5.6.5.Final]\r\n\t\tat org.hibernate.hql.internal.ast.ErrorTracker.throwQueryException(ErrorTracker.java:93) ~[hibernate-core-5.6.5.Final.jar:5.6.5.Final]\r\n\t\tat org.hibernate.hql.internal.ast.QueryTranslatorImpl.analyze(QueryTranslatorImpl.java:282) ~[hibernate-core-5.6.5.Final.jar:5.6.5.Final]\r\n\t\tat org.hibernate.hql.internal.ast.QueryTranslatorImpl.doCompile(QueryTranslatorImpl.java:192) ~[hibernate-core-5.6.5.Final.jar:5.6.5.Final]\r\n\t\tat org.hibernate.hql.internal.ast.QueryTranslatorImpl.compile(QueryTranslatorImpl.java:144) ~[hibernate-core-5.6.5.Final.jar:5.6.5.Final]\r\n\t\tat org.hibernate.engine.query.spi.HQLQueryPlan.&lt;init&gt;(HQLQueryPlan.java:113) ~[hibernate-core-5.6.5.Final.jar:5.6.5.Final]\r\n\t\tat org.hibernate.engine.query.spi.HQLQueryPlan.&lt;init&gt;(HQLQueryPlan.java:73) ~[hibernate-core-5.6.5.Final.jar:5.6.5.Final]\r\n\t\tat org.hibernate.engine.query.spi.QueryPlanCache.getHQLQueryPlan(QueryPlanCache.java:162) ~[hibernate-core-5.6.5.Final.jar:5.6.5.Final]\r\n\t\tat org.hibernate.internal.AbstractSharedSessionContract.getQueryPlan(AbstractSharedSessionContract.java:636) ~[hibernate-core-5.6.5.Final.jar:5.6.5.Final]\r\n\t\tat org.hibernate.internal.AbstractSharedSessionContract.createQuery(AbstractSharedSessionContract.java:748) ~[hibernate-core-5.6.5.Final.jar:5.6.5.Final]\r\n\t\t... 85 common frames omitted\r\n\r\n\tDisconnected from the target VM, address: &#39;127.0.0.1:52117&#39;, transport: &#39;socket&#39;\r\n\r\n\tProcess finished with exit code 0\r\n\r\n**UPDATE**\r\n\r\n    @Repository\r\n    public interface BirdRepository extends JpaRepository&lt;Bird, Long&gt; {\r\n\r\n    // Other queries \r\n\r\n        @Query(&quot;SELECT NEW com.nz.kiwi.view.BirdTestDto(b.name, b.sex, b.status) FROM Bird b WHERE b.id = :id &quot;)\r\n    Optional&lt;BirdTestDto&gt; testBirdTestDto(Long id);\r\n\r\nI have also tried the query without retreiving the @OneToMany for HealthCheck and it works.\r\n\r\nI tried to change the definition for HealthCheck on the Dto to:\r\n\r\n    private List&lt;HealthCheck&gt; listHealthCheck = new ArrayList&lt;&gt;;\r\n\r\nBirdServiceImpl\r\n\r\n    @Service\r\n    @Transactional\r\n    @Slf4j\r\n    @RequiredArgsConstructor\r\n    public class BirdServiceImpl implements BirdService {\r\n\r\n        private final BirdRepository birdRepository;\r\n\r\n        public Optional&lt;BirdTestDto&gt; testBirdTestDto(Long id) {\r\n            return birdRepository.testBirdTestDto(id);\r\n        }\r\n\r\nBut the constructor error remains.\r\n\r\nWhat is wrong with my constructor and how to fix this?","title":"Spring-data JPA Query can not locate appropriate constructor","body":"<p>In a Spring Boot 2.6 project I am getting a error that it cannot locate an appropriate constructor and further down that Validation failed for query method.</p>\n<p>My query is returning a Dto with projection:</p>\n<p>BirdTestDto</p>\n<pre><code>  @Value\n  public class BirdTestDto implements Serializable {\n    private String name;\n    private Sex sex;\n    private Status status;\n    private List&lt;HealthCheck&gt; listHealthCheck;\n\n//Constructor\n//Getter\n</code></pre>\n<p>The query on the repository is:</p>\n<pre><code>    @Query(&quot;SELECT NEW com.nz.seagull.view.BirdTestDto(b.name, b.sex, b.status, b.listHealthCheck) &quot; +\n        &quot;FROM Bird b &quot; +\n        &quot;WHERE b.id = :id&quot;)\n   Optional&lt;BirdTestDto&gt; testBirdTestDto(Long id);\n</code></pre>\n<p>The stack trace is:</p>\n<pre><code>    org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'seagullController' defined in file [C:\\Users\\AlGrant\\IdeaProjects\\seagull1\\build\\classes\\java\\main\\com\\nz\\seagull\\controller\\seagullController.class]: Unsatisfied dependency expressed through constructor parameter 0; nested exception is org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'birdServiceImpl' defined in file [C:\\Users\\AlGrant\\IdeaProjects\\seagull1\\build\\classes\\java\\main\\com\\nz\\seagull\\implementation\\BirdServiceImpl.class]: Unsatisfied dependency expressed through constructor parameter 0; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'birdRepository' defined in com.nz.seagull.repository.BirdRepository defined in @EnableJpaRepositories declared on JpaRepositoriesRegistrar.EnableJpaRepositoriesConfiguration: Invocation of init method failed; nested exception is org.springframework.data.repository.query.QueryCreationException: Could not create query for public abstract java.util.Optional com.nz.seagull.repository.BirdRepository.testBirdTestDto(java.lang.Long)! Reason: Validation failed for query for method public abstract java.util.Optional com.nz.seagull.repository.BirdRepository.testBirdTestDto(java.lang.Long)!; nested exception is java.lang.IllegalArgumentException: Validation failed for query for method public abstract java.util.Optional com.nz.seagull.repository.BirdRepository.testBirdTestDto(java.lang.Long)!\n    at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:800) ~[spring-beans-5.3.16.jar:5.3.16]\n    at org.springframework.beans.factory.support.ConstructorResolver.autowireConstructor(ConstructorResolver.java:229) ~[spring-beans-5.3.16.jar:5.3.16]\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.autowireConstructor(AbstractAutowireCapableBeanFactory.java:1372) ~[spring-beans-5.3.16.jar:5.3.16]\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1222) ~[spring-beans-5.3.16.jar:5.3.16]\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:582) ~[spring-beans-5.3.16.jar:5.3.16]\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:542) ~[spring-beans-5.3.16.jar:5.3.16]\n    at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:335) ~[spring-beans-5.3.16.jar:5.3.16]\n    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234) ~[spring-beans-5.3.16.jar:5.3.16]\n    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:333) ~[spring-beans-5.3.16.jar:5.3.16]\n    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:208) ~[spring-beans-5.3.16.jar:5.3.16]\n    at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:953) ~[spring-beans-5.3.16.jar:5.3.16]\n    at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:918) ~[spring-context-5.3.16.jar:5.3.16]\n    at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:583) ~[spring-context-5.3.16.jar:5.3.16]\n    at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:145) ~[spring-boot-2.6.4.jar:2.6.4]\n    at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:740) ~[spring-boot-2.6.4.jar:2.6.4]\n    at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:415) ~[spring-boot-2.6.4.jar:2.6.4]\n    at org.springframework.boot.SpringApplication.run(SpringApplication.java:303) ~[spring-boot-2.6.4.jar:2.6.4]\n    at org.springframework.boot.SpringApplication.run(SpringApplication.java:1312) ~[spring-boot-2.6.4.jar:2.6.4]\n    at org.springframework.boot.SpringApplication.run(SpringApplication.java:1301) ~[spring-boot-2.6.4.jar:2.6.4]\n    at com.nz.seagull.seagullApplication.main(seagullApplication.java:22) ~[main/:na]\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) ~[na:na]\n    at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]\n    at java.base/java.lang.reflect.Method.invoke(Method.java:566) ~[na:na]\n    at org.springframework.boot.devtools.restart.RestartLauncher.run(RestartLauncher.java:49) ~[spring-boot-devtools-2.6.4.jar:2.6.4]\nCaused by: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'birdServiceImpl' defined in file [C:\\Users\\AlGrant\\IdeaProjects\\seagull1\\build\\classes\\java\\main\\com\\nz\\seagull\\implementation\\BirdServiceImpl.class]: Unsatisfied dependency expressed through constructor parameter 0; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'birdRepository' defined in com.nz.seagull.repository.BirdRepository defined in @EnableJpaRepositories declared on JpaRepositoriesRegistrar.EnableJpaRepositoriesConfiguration: Invocation of init method failed; nested exception is org.springframework.data.repository.query.QueryCreationException: Could not create query for public abstract java.util.Optional com.nz.seagull.repository.BirdRepository.testBirdTestDto(java.lang.Long)! Reason: Validation failed for query for method public abstract java.util.Optional com.nz.seagull.repository.BirdRepository.testBirdTestDto(java.lang.Long)!; nested exception is java.lang.IllegalArgumentException: Validation failed for query for method public abstract java.util.Optional com.nz.seagull.repository.BirdRepository.testBirdTestDto(java.lang.Long)!\n    at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:800) ~[spring-beans-5.3.16.jar:5.3.16]\n    at org.springframework.beans.factory.support.ConstructorResolver.autowireConstructor(ConstructorResolver.java:229) ~[spring-beans-5.3.16.jar:5.3.16]\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.autowireConstructor(AbstractAutowireCapableBeanFactory.java:1372) ~[spring-beans-5.3.16.jar:5.3.16]\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1222) ~[spring-beans-5.3.16.jar:5.3.16]\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:582) ~[spring-beans-5.3.16.jar:5.3.16]\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:542) ~[spring-beans-5.3.16.jar:5.3.16]\n    at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:335) ~[spring-beans-5.3.16.jar:5.3.16]\n    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234) ~[spring-beans-5.3.16.jar:5.3.16]\n    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:333) ~[spring-beans-5.3.16.jar:5.3.16]\n    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:208) ~[spring-beans-5.3.16.jar:5.3.16]\n    at org.springframework.beans.factory.config.DependencyDescriptor.resolveCandidate(DependencyDescriptor.java:276) ~[spring-beans-5.3.16.jar:5.3.16]\n    at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1389) ~[spring-beans-5.3.16.jar:5.3.16]\n    at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1309) ~[spring-beans-5.3.16.jar:5.3.16]\n    at org.springframework.beans.factory.support.ConstructorResolver.resolveAutowiredArgument(ConstructorResolver.java:887) ~[spring-beans-5.3.16.jar:5.3.16]\n    at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:791) ~[spring-beans-5.3.16.jar:5.3.16]\n    ... 24 common frames omitted\nCaused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'birdRepository' defined in com.nz.seagull.repository.BirdRepository defined in @EnableJpaRepositories declared on JpaRepositoriesRegistrar.EnableJpaRepositoriesConfiguration: Invocation of init method failed; nested exception is org.springframework.data.repository.query.QueryCreationException: Could not create query for public abstract java.util.Optional com.nz.seagull.repository.BirdRepository.testBirdTestDto(java.lang.Long)! Reason: Validation failed for query for method public abstract java.util.Optional com.nz.seagull.repository.BirdRepository.testBirdTestDto(java.lang.Long)!; nested exception is java.lang.IllegalArgumentException: Validation failed for query for method public abstract java.util.Optional com.nz.seagull.repository.BirdRepository.testBirdTestDto(java.lang.Long)!\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1804) ~[spring-beans-5.3.16.jar:5.3.16]\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:620) ~[spring-beans-5.3.16.jar:5.3.16]\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:542) ~[spring-beans-5.3.16.jar:5.3.16]\n    at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:335) ~[spring-beans-5.3.16.jar:5.3.16]\n    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234) ~[spring-beans-5.3.16.jar:5.3.16]\n    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:333) ~[spring-beans-5.3.16.jar:5.3.16]\n    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:208) ~[spring-beans-5.3.16.jar:5.3.16]\n    at org.springframework.beans.factory.config.DependencyDescriptor.resolveCandidate(DependencyDescriptor.java:276) ~[spring-beans-5.3.16.jar:5.3.16]\n    at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1389) ~[spring-beans-5.3.16.jar:5.3.16]\n    at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1309) ~[spring-beans-5.3.16.jar:5.3.16]\n    at org.springframework.beans.factory.support.ConstructorResolver.resolveAutowiredArgument(ConstructorResolver.java:887) ~[spring-beans-5.3.16.jar:5.3.16]\n    at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:791) ~[spring-beans-5.3.16.jar:5.3.16]\n    ... 38 common frames omitted\nCaused by: org.springframework.data.repository.query.QueryCreationException: Could not create query for public abstract java.util.Optional com.nz.seagull.repository.BirdRepository.testBirdTestDto(java.lang.Long)! Reason: Validation failed for query for method public abstract java.util.Optional com.nz.seagull.repository.BirdRepository.testBirdTestDto(java.lang.Long)!; nested exception is java.lang.IllegalArgumentException: Validation failed for query for method public abstract java.util.Optional com.nz.seagull.repository.BirdRepository.testBirdTestDto(java.lang.Long)!\n    at org.springframework.data.repository.query.QueryCreationException.create(QueryCreationException.java:101) ~[spring-data-commons-2.6.2.jar:2.6.2]\n    at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.lookupQuery(QueryExecutorMethodInterceptor.java:106) ~[spring-data-commons-2.6.2.jar:2.6.2]\n    at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.lambda$mapMethodsToQuery$1(QueryExecutorMethodInterceptor.java:94) ~[spring-data-commons-2.6.2.jar:2.6.2]\n    at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:195) ~[na:na]\n    at java.base/java.util.Iterator.forEachRemaining(Iterator.java:133) ~[na:na]\n    at java.base/java.util.Collections$UnmodifiableCollection$1.forEachRemaining(Collections.java:1054) ~[na:na]\n    at java.base/java.util.Spliterators$IteratorSpliterator.forEachRemaining(Spliterators.java:1801) ~[na:na]\n    at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:484) ~[na:na]\n    at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:474) ~[na:na]\n    at java.base/java.util.stream.ReduceOps$ReduceOp.evaluateSequential(ReduceOps.java:913) ~[na:na]\n    at java.base/java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234) ~[na:na]\n    at java.base/java.util.stream.ReferencePipeline.collect(ReferencePipeline.java:578) ~[na:na]\n    at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.mapMethodsToQuery(QueryExecutorMethodInterceptor.java:96) ~[spring-data-commons-2.6.2.jar:2.6.2]\n    at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.lambda$new$0(QueryExecutorMethodInterceptor.java:86) ~[spring-data-commons-2.6.2.jar:2.6.2]\n    at java.base/java.util.Optional.map(Optional.java:265) ~[na:na]\n    at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.&lt;init&gt;(QueryExecutorMethodInterceptor.java:86) ~[spring-data-commons-2.6.2.jar:2.6.2]\n    at org.springframework.data.repository.core.support.RepositoryFactorySupport.getRepository(RepositoryFactorySupport.java:364) ~[spring-data-commons-2.6.2.jar:2.6.2]\n    at org.springframework.data.repository.core.support.RepositoryFactoryBeanSupport.lambda$afterPropertiesSet$5(RepositoryFactoryBeanSupport.java:322) ~[spring-data-commons-2.6.2.jar:2.6.2]\n    at org.springframework.data.util.Lazy.getNullable(Lazy.java:230) ~[spring-data-commons-2.6.2.jar:2.6.2]\n    at org.springframework.data.util.Lazy.get(Lazy.java:114) ~[spring-data-commons-2.6.2.jar:2.6.2]\n    at org.springframework.data.repository.core.support.RepositoryFactoryBeanSupport.afterPropertiesSet(RepositoryFactoryBeanSupport.java:328) ~[spring-data-commons-2.6.2.jar:2.6.2]\n    at org.springframework.data.jpa.repository.support.JpaRepositoryFactoryBean.afterPropertiesSet(JpaRepositoryFactoryBean.java:144) ~[spring-data-jpa-2.6.2.jar:2.6.2]\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1863) ~[spring-beans-5.3.16.jar:5.3.16]\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1800) ~[spring-beans-5.3.16.jar:5.3.16]\n    ... 49 common frames omitted\nCaused by: java.lang.IllegalArgumentException: Validation failed for query for method public abstract java.util.Optional com.nz.seagull.repository.BirdRepository.testBirdTestDto(java.lang.Long)!\n    at org.springframework.data.jpa.repository.query.SimpleJpaQuery.validateQuery(SimpleJpaQuery.java:96) ~[spring-data-jpa-2.6.2.jar:2.6.2]\n    at org.springframework.data.jpa.repository.query.SimpleJpaQuery.&lt;init&gt;(SimpleJpaQuery.java:66) ~[spring-data-jpa-2.6.2.jar:2.6.2]\n    at org.springframework.data.jpa.repository.query.JpaQueryFactory.fromMethodWithQueryString(JpaQueryFactory.java:51) ~[spring-data-jpa-2.6.2.jar:2.6.2]\n    at org.springframework.data.jpa.repository.query.JpaQueryLookupStrategy$DeclaredQueryLookupStrategy.resolveQuery(JpaQueryLookupStrategy.java:163) ~[spring-data-jpa-2.6.2.jar:2.6.2]\n    at org.springframework.data.jpa.repository.query.JpaQueryLookupStrategy$CreateIfNotFoundQueryLookupStrategy.resolveQuery(JpaQueryLookupStrategy.java:252) ~[spring-data-jpa-2.6.2.jar:2.6.2]\n    at org.springframework.data.jpa.repository.query.JpaQueryLookupStrategy$AbstractQueryLookupStrategy.resolveQuery(JpaQueryLookupStrategy.java:87) ~[spring-data-jpa-2.6.2.jar:2.6.2]\n    at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.lookupQuery(QueryExecutorMethodInterceptor.java:102) ~[spring-data-commons-2.6.2.jar:2.6.2]\n    ... 71 common frames omitted\nCaused by: java.lang.IllegalArgumentException: org.hibernate.hql.internal.ast.QuerySyntaxException: Unable to locate appropriate constructor on class [com.nz.seagull.view.BirdTestDto]. Expected arguments are: java.lang.String, com.nz.seagull.enumeration.Sex, com.nz.seagull.enumeration.Status, java.util.Collection [SELECT NEW com.nz.seagull.view.BirdTestDto(b.name, b.sex, b.status, b.listHealthCheck) FROM com.nz.seagull.model.Bird b WHERE b.id = :id]\n    at org.hibernate.internal.ExceptionConverterImpl.convert(ExceptionConverterImpl.java:138) ~[hibernate-core-5.6.5.Final.jar:5.6.5.Final]\n    at org.hibernate.internal.ExceptionConverterImpl.convert(ExceptionConverterImpl.java:181) ~[hibernate-core-5.6.5.Final.jar:5.6.5.Final]\n    at org.hibernate.internal.ExceptionConverterImpl.convert(ExceptionConverterImpl.java:188) ~[hibernate-core-5.6.5.Final.jar:5.6.5.Final]\n    at org.hibernate.internal.AbstractSharedSessionContract.createQuery(AbstractSharedSessionContract.java:757) ~[hibernate-core-5.6.5.Final.jar:5.6.5.Final]\n    at org.hibernate.internal.AbstractSharedSessionContract.createQuery(AbstractSharedSessionContract.java:114) ~[hibernate-core-5.6.5.Final.jar:5.6.5.Final]\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) ~[na:na]\n    at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]\n    at java.base/java.lang.reflect.Method.invoke(Method.java:566) ~[na:na]\n    at org.springframework.orm.jpa.ExtendedEntityManagerCreator$ExtendedEntityManagerInvocationHandler.invoke(ExtendedEntityManagerCreator.java:362) ~[spring-orm-5.3.16.jar:5.3.16]\n    at com.sun.proxy.$Proxy118.createQuery(Unknown Source) ~[na:na]\n    at org.springframework.data.jpa.repository.query.SimpleJpaQuery.validateQuery(SimpleJpaQuery.java:90) ~[spring-data-jpa-2.6.2.jar:2.6.2]\n    ... 77 common frames omitted\nCaused by: org.hibernate.hql.internal.ast.QuerySyntaxException: Unable to locate appropriate constructor on class [com.nz.seagull.view.BirdTestDto]. Expected arguments are: java.lang.String, com.nz.seagull.enumeration.Sex, com.nz.seagull.enumeration.Status, java.util.Collection [SELECT NEW com.nz.seagull.view.BirdTestDto(b.name, b.sex, b.status, b.listHealthCheck) FROM com.nz.seagull.model.Bird b WHERE b.id = :id]\n    at org.hibernate.hql.internal.ast.QuerySyntaxException.convert(QuerySyntaxException.java:74) ~[hibernate-core-5.6.5.Final.jar:5.6.5.Final]\n    at org.hibernate.hql.internal.ast.ErrorTracker.throwQueryException(ErrorTracker.java:93) ~[hibernate-core-5.6.5.Final.jar:5.6.5.Final]\n    at org.hibernate.hql.internal.ast.QueryTranslatorImpl.analyze(QueryTranslatorImpl.java:282) ~[hibernate-core-5.6.5.Final.jar:5.6.5.Final]\n    at org.hibernate.hql.internal.ast.QueryTranslatorImpl.doCompile(QueryTranslatorImpl.java:192) ~[hibernate-core-5.6.5.Final.jar:5.6.5.Final]\n    at org.hibernate.hql.internal.ast.QueryTranslatorImpl.compile(QueryTranslatorImpl.java:144) ~[hibernate-core-5.6.5.Final.jar:5.6.5.Final]\n    at org.hibernate.engine.query.spi.HQLQueryPlan.&lt;init&gt;(HQLQueryPlan.java:113) ~[hibernate-core-5.6.5.Final.jar:5.6.5.Final]\n    at org.hibernate.engine.query.spi.HQLQueryPlan.&lt;init&gt;(HQLQueryPlan.java:73) ~[hibernate-core-5.6.5.Final.jar:5.6.5.Final]\n    at org.hibernate.engine.query.spi.QueryPlanCache.getHQLQueryPlan(QueryPlanCache.java:162) ~[hibernate-core-5.6.5.Final.jar:5.6.5.Final]\n    at org.hibernate.internal.AbstractSharedSessionContract.getQueryPlan(AbstractSharedSessionContract.java:636) ~[hibernate-core-5.6.5.Final.jar:5.6.5.Final]\n    at org.hibernate.internal.AbstractSharedSessionContract.createQuery(AbstractSharedSessionContract.java:748) ~[hibernate-core-5.6.5.Final.jar:5.6.5.Final]\n    ... 85 common frames omitted\n\nDisconnected from the target VM, address: '127.0.0.1:52117', transport: 'socket'\n\nProcess finished with exit code 0\n</code></pre>\n<p><strong>UPDATE</strong></p>\n<pre><code>@Repository\npublic interface BirdRepository extends JpaRepository&lt;Bird, Long&gt; {\n\n// Other queries \n\n    @Query(&quot;SELECT NEW com.nz.kiwi.view.BirdTestDto(b.name, b.sex, b.status) FROM Bird b WHERE b.id = :id &quot;)\nOptional&lt;BirdTestDto&gt; testBirdTestDto(Long id);\n</code></pre>\n<p>I have also tried the query without retreiving the @OneToMany for HealthCheck and it works.</p>\n<p>I tried to change the definition for HealthCheck on the Dto to:</p>\n<pre><code>private List&lt;HealthCheck&gt; listHealthCheck = new ArrayList&lt;&gt;;\n</code></pre>\n<p>BirdServiceImpl</p>\n<pre><code>@Service\n@Transactional\n@Slf4j\n@RequiredArgsConstructor\npublic class BirdServiceImpl implements BirdService {\n\n    private final BirdRepository birdRepository;\n\n    public Optional&lt;BirdTestDto&gt; testBirdTestDto(Long id) {\n        return birdRepository.testBirdTestDto(id);\n    }\n</code></pre>\n<p>But the constructor error remains.</p>\n<p>What is wrong with my constructor and how to fix this?</p>\n"},{"tags":["java","spring-boot","lombok"],"answers":[{"tags":[],"owner":{"account_id":5404,"reputation":22089,"user_id":8681,"accept_rate":67,"display_name":"Jorn"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1689606869,"creation_date":1689606869,"answer_id":76705872,"question_id":76705502,"body_markdown":"The [Lombok documentation for SneakyThrows](https://projectlombok.org/features/SneakyThrows) mentions some common use cases:\r\n\r\n&gt; A needlessly strict interface, such as Runnable - whatever exception propagates out of your run() method, checked or not, it will be passed to the Thread&#39;s unhandled exception handler. Catching a checked exception and wrapping it in some sort of RuntimeException is only obscuring the real cause of the issue.\r\n\r\nand\r\n\r\n&gt; An &#39;impossible&#39; exception. For example, new String(someByteArray, &quot;UTF-8&quot;); declares that it can throw an UnsupportedEncodingException but according to the JVM specification, UTF-8 must always be available. An UnsupportedEncodingException here is about as likely as a ClassNotFoundError when you use a String object, and you don&#39;t catch those either!\r\n\r\nOf course, if you don&#39;t agree, it&#39;s perfectly OK to not use the annotation at all.","title":"Use of Lombok @SneakyThrows annotation","body":"<p>The <a href=\"https://projectlombok.org/features/SneakyThrows\" rel=\"nofollow noreferrer\">Lombok documentation for SneakyThrows</a> mentions some common use cases:</p>\n<blockquote>\n<p>A needlessly strict interface, such as Runnable - whatever exception propagates out of your run() method, checked or not, it will be passed to the Thread's unhandled exception handler. Catching a checked exception and wrapping it in some sort of RuntimeException is only obscuring the real cause of the issue.</p>\n</blockquote>\n<p>and</p>\n<blockquote>\n<p>An 'impossible' exception. For example, new String(someByteArray, &quot;UTF-8&quot;); declares that it can throw an UnsupportedEncodingException but according to the JVM specification, UTF-8 must always be available. An UnsupportedEncodingException here is about as likely as a ClassNotFoundError when you use a String object, and you don't catch those either!</p>\n</blockquote>\n<p>Of course, if you don't agree, it's perfectly OK to not use the annotation at all.</p>\n"},{"tags":[],"owner":{"account_id":401843,"reputation":89768,"user_id":768644,"display_name":"rzwitserloot"},"down_vote_count":0,"up_vote_count":8,"is_accepted":true,"score":8,"last_activity_date":1689610122,"creation_date":1689610122,"answer_id":76706309,"question_id":76705502,"body_markdown":"Author of the feature here - this answer is _mostly_ objective, but there is a certain subjective nature to it all - at some point, any language feature is lightly dictatorial about telling people how one &#39;should&#39; program. It cannot be avoided. Ordinarily, opinion isn&#39;t acceptable on SO, but given that this is about lombok, and [A] I wrote this feature, and [B] I remain a core committer on lombok, I guess my opinion _is_ the answer asked for, and this cannot devolve into a war of opinions (except Roel, my co-committer, who by and large stands by these opinions).\r\n\r\n&gt; Usually if there could be an exception, its always good to catch/throw it\r\n\r\nIncorrect. It&#39;s _usually_ good to catch/throw it, but not _always_.\r\n\r\n## A quick review of what it does\r\n\r\nthe concept of the checked exception is __entirely a figment of `javac`&#39;s imagination__. The reason this doesn&#39;t compile:\r\n\r\n```\r\npublic void foo() {\r\n  throw new IOException();\r\n}\r\n```\r\n\r\nis because `javac` has an `if` construct in there that says: I won&#39;t compile this. If you hack `javac` and remove that construct, the resulting class file is _completely fine_. The class verifier (the code in the JVM that checks if executing the code in a class file would cause issues) doesn&#39;t care. The JVM doesn&#39;t care either. It will dutifully run that code and just... throw the exception. &quot;But... it&#39;s not declared!&quot;, yeah, the JVM doesn&#39;t care. It doesn&#39;t know what `throws IOException` means. It&#39;s a comment, as far as `java.exe` is concerned. This explains why languages like kotlin that are targeted to run on the JVM can do what they do (they don&#39;t have checked exceptions - you can throw whatever you like regardless of `throws` clause. Including java-written checked exceptions).\r\n\r\n`@SneakyThrows` is like that: It lets you throw exceptions without declaring that you do so. The exception is not suppressed, or wrapped, or ignored, or modified in any way. `@SneakyThrows` does just one job: Tell _the compiler_ to stop erroring and just get on with it.\r\n\r\nThe specific 2 cases where it isn&#39;t correct to either catch a checked exception, or add it to your `throws` line:\r\n\r\n## Impossible checked exceptions\r\n\r\nThe exception is declared, and therefore, you __must__ write code that handles it (either `catch` it, or stick it in the `throws` clause of your method), however, by way of spec or possibly simply experience and code review you know __for 100% sure__ that the exception cannot possibly happen.\r\n\r\nHere is a trivial example:\r\n\r\n```\r\nnew String(someByteArray, &quot;UTF-8&quot;);\r\n```\r\n\r\nThis code makes a string by treating the provided byte array as containing UTF-8 encoded text. One of the exceptions that this method is declared to throw (and this is a checked exception) is [`UnsupportedEncodingException`](https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/io/UnsupportedEncodingException.html).\r\n\r\nHowever, __this is impossible__. The java virtual machine specification __guarantees__ that UTF-8 is available. This code is entirely valid:\r\n\r\n```\r\ntry {\r\n  new String(someByteArray, &quot;UTF-8&quot;);\r\n} catch (UnsupportedEncodingException e) {\r\n  throw new InternalError(&quot;Your JDK is corrupt. Reinstall it. Hard-crashing now because continuing in the face of a corrupt JDK install is asking for trouble&quot;);\r\n  // possibly log that and run System.exit(0) instead!\r\n}\r\n```\r\n\r\nHowever, if we start writing that kind of code, where does it end? Should you write:\r\n\r\n```\r\nString x = ...;\r\ntry {\r\n  x = x.toLowerCase();\r\n} catch (IllegalStateException e) {\r\n  throw new RuntimeError(&quot;Your JDK is corrupt&quot;);\r\n}\r\n```\r\n\r\nThat seems rather silly. Hence, __objectively__, attempting to actually deal with the &#39;impossible unless JDK corrupt&#39; situation of that `UnsupportedEncodingException` is equally silly, so the only subjective thing I am injecting here is that it is silly to try to deal with a corrupt JDK; you really can&#39;t, and if you try, you end up writing untestable non-sequitur try/catches _everywhere_.\r\n\r\nThis kind of thing is exactly where SneakyThrows shines. Because you neither want to write the try/catch, nor do you want to burden callers by listing an exception type that cannot actually ever happen.\r\n\r\n__At the time lombok&#39;s SneakyThrows feature was released__, the `new String(someByteArray, StandardCharsets.UTF_8)` API didn&#39;t exist yet!__\r\n\r\nThe fact that it exists _now_ is a good thing: I&#39;d say that any API that throws a checked exception in cases where the programmer knows it cannot possibly happen, is really cruddy API. I&#39;m glad you now no longer have to deal with it.\r\n\r\nRegardless, plenty of libraries exist where this situation does occur.\r\n\r\n## Underspecced entrypoints\r\n\r\nThis is valid java:\r\n\r\n```\r\npublic static void main(String[] args) throws Exception {}\r\n```\r\n\r\n`main` methods are allowed to do that. I strongly advise all java programmers to get into the habit of doing that. The notion of checked exceptions (as in, callers need to &#39;worry&#39; about them) is great for library functions (any code written with the intent to be understood as an API and not as an implementation, and is to be used by code outside of the direct confines of the team that writes it. That doesn&#39;t necessarily imply &#39;by other people&#39;, but may imply: By another modular layer of the application we are writing).\r\n\r\nIt is silly for application code, though!\r\n\r\nA lot of exceptions are effectively unhandleable. A library has no idea what that even means (e.g. the code of `new FileInputStream` has no idea if one could perhaps handle &#39;file not found&#39; - maybe this is the &#39;file open&#39; dialog of a GUI app and the GUI can simply tell the user they typed a non-existent file name and need to pick something else - that&#39;s handling it). Application code, however, always knows. They can, or they can&#39;t. Often, they can&#39;t.\r\n\r\nSo, what do you do when you get an exception that _you_ cannot handle?\r\n\r\nYou have really only one option: Throw it onward and hope that some layer above you (a caller somewhere in the call chain) can handle it. Any other act __is silly__ and results in bad code, bad behaviour. For example, this is ubiquitous and yet evil:\r\n\r\n```\r\ntry {\r\n stuff;\r\ncatch (Thingie e) {\r\n e.printStackTrace();\r\n}\r\n```\r\n\r\nThis is the java version of basic&#39;s `ON ERROR RESUME NEXT`: When an error occurs, toss half of the info about it in the garbage, make it impossible for any other code to try to deal with it, log it to someplace few folks check, and then _just keep going as if nothing is wrong_, which likely means if something does go wrong, 85 stack traces appear because all code is written like this, and generally &#39;just keep going&#39; when an exception has occurs just means more exceptions will occur soon.\r\n\r\nWhen we speak of entrypoints, which isn&#39;t just `main`, but is also, e.g. for web frameworks, the many many methods that serve as the point where the web framework begins calling _your_ code (i.e. this is the entrypoint handler for the `/users/{username}` URL) are all &#39;entrypoints&#39; and &#39;application code&#39;, and here&#39;s the key insight:\r\n\r\n__It is non-trivial to deal with a generalized, unhandleable-by-the-business-logic error condition__.\r\n\r\nFor example, let&#39;s say you have a web framework entrypoint and the first thing it does is open the database to check the user&#39;s credentials. If the database is just flat out down, what should the SQLException that occurs result in, for the webbrowsing user? Surely &#39;an error message&#39;, but it&#39;s more complicated than that. What you optimally want to happen is:\r\n\r\n* The system gathers pertinent data which isn&#39;t 100% encoded in that exception. It also involves the request parameters for example, that should be quite useful. Perhaps not here (not useful to debug &#39;db is down&#39;), but for many errors, useful.\r\n* The system encrypts all this with a server key into a blob of data.\r\n* The system serves an error page to the user (with code 500) and includes a form that results in an email (our server is down or in trouble, we can&#39;t do the normal thing and let them submit to our server and save it, after all, our server is probably not capable of responding if it&#39;s in dire straits, and it is, if the DB is down!), it includes the encrypted blob. This prevents issues where a hacker can use the stack trace and error relevant info to glean hidden info whilst still letting our dev team decrypt it and figure out what went wrong.\r\n* All this data should also go into a log someplace.\r\n\r\nThat&#39;s decidedly non-trivial! You __do not__ want to have to write all that logic in 5000 separate try/catch blocks all over your code base.\r\n\r\nThe best place to handle such a generalized error response is __in whatever code calls entrypoints__.\r\n\r\nFor `main`, that&#39;s already how it works: You can throw whatever you want, and the way `java.exe` deals with it, (this&#39;d be the thread&#39;s default exception handler) is to print the type, message, stack trace, and causal chain, and then kill that thread.\r\n\r\nMany, many frameworks, however, messed up. For example, the servlet framework requires that you throw `ServletException`. That was silly of them. Lombok&#39;s `@SneakyThrows` can help you by letting you throw these exceptions. Usually (and this includes servlets), it works fine - the servlet entrypoint runners actually catch everything.\r\n\r\nThere is a third useful but less advisable use of SneakyThrows:\r\n\r\n## Milestones\r\n\r\nIt&#39;s less pretty as a codebase, but there are cases where exceptions really can occur, but rarely will (from experience / the situation) and whilst you really ought to catch them and wrap them in a properly typed exception, you&#39;re working towards a milestone release (a proof of concept for example), and whilst you don&#39;t want to write throw-away code, you&#39;re going to leave non-crucial stuff (not crucial for a working first version) documented as &#39;will fix later&#39;. In such cases, sneakythrows is better than all alternatives, because sneakythrows doesn&#39;t mess with the exception at all.\r\n\r\n","title":"Use of Lombok @SneakyThrows annotation","body":"<p>Author of the feature here - this answer is <em>mostly</em> objective, but there is a certain subjective nature to it all - at some point, any language feature is lightly dictatorial about telling people how one 'should' program. It cannot be avoided. Ordinarily, opinion isn't acceptable on SO, but given that this is about lombok, and [A] I wrote this feature, and [B] I remain a core committer on lombok, I guess my opinion <em>is</em> the answer asked for, and this cannot devolve into a war of opinions (except Roel, my co-committer, who by and large stands by these opinions).</p>\n<blockquote>\n<p>Usually if there could be an exception, its always good to catch/throw it</p>\n</blockquote>\n<p>Incorrect. It's <em>usually</em> good to catch/throw it, but not <em>always</em>.</p>\n<h2>A quick review of what it does</h2>\n<p>the concept of the checked exception is <strong>entirely a figment of <code>javac</code>'s imagination</strong>. The reason this doesn't compile:</p>\n<pre><code>public void foo() {\n  throw new IOException();\n}\n</code></pre>\n<p>is because <code>javac</code> has an <code>if</code> construct in there that says: I won't compile this. If you hack <code>javac</code> and remove that construct, the resulting class file is <em>completely fine</em>. The class verifier (the code in the JVM that checks if executing the code in a class file would cause issues) doesn't care. The JVM doesn't care either. It will dutifully run that code and just... throw the exception. &quot;But... it's not declared!&quot;, yeah, the JVM doesn't care. It doesn't know what <code>throws IOException</code> means. It's a comment, as far as <code>java.exe</code> is concerned. This explains why languages like kotlin that are targeted to run on the JVM can do what they do (they don't have checked exceptions - you can throw whatever you like regardless of <code>throws</code> clause. Including java-written checked exceptions).</p>\n<p><code>@SneakyThrows</code> is like that: It lets you throw exceptions without declaring that you do so. The exception is not suppressed, or wrapped, or ignored, or modified in any way. <code>@SneakyThrows</code> does just one job: Tell <em>the compiler</em> to stop erroring and just get on with it.</p>\n<p>The specific 2 cases where it isn't correct to either catch a checked exception, or add it to your <code>throws</code> line:</p>\n<h2>Impossible checked exceptions</h2>\n<p>The exception is declared, and therefore, you <strong>must</strong> write code that handles it (either <code>catch</code> it, or stick it in the <code>throws</code> clause of your method), however, by way of spec or possibly simply experience and code review you know <strong>for 100% sure</strong> that the exception cannot possibly happen.</p>\n<p>Here is a trivial example:</p>\n<pre><code>new String(someByteArray, &quot;UTF-8&quot;);\n</code></pre>\n<p>This code makes a string by treating the provided byte array as containing UTF-8 encoded text. One of the exceptions that this method is declared to throw (and this is a checked exception) is <a href=\"https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/io/UnsupportedEncodingException.html\" rel=\"noreferrer\"><code>UnsupportedEncodingException</code></a>.</p>\n<p>However, <strong>this is impossible</strong>. The java virtual machine specification <strong>guarantees</strong> that UTF-8 is available. This code is entirely valid:</p>\n<pre><code>try {\n  new String(someByteArray, &quot;UTF-8&quot;);\n} catch (UnsupportedEncodingException e) {\n  throw new InternalError(&quot;Your JDK is corrupt. Reinstall it. Hard-crashing now because continuing in the face of a corrupt JDK install is asking for trouble&quot;);\n  // possibly log that and run System.exit(0) instead!\n}\n</code></pre>\n<p>However, if we start writing that kind of code, where does it end? Should you write:</p>\n<pre><code>String x = ...;\ntry {\n  x = x.toLowerCase();\n} catch (IllegalStateException e) {\n  throw new RuntimeError(&quot;Your JDK is corrupt&quot;);\n}\n</code></pre>\n<p>That seems rather silly. Hence, <strong>objectively</strong>, attempting to actually deal with the 'impossible unless JDK corrupt' situation of that <code>UnsupportedEncodingException</code> is equally silly, so the only subjective thing I am injecting here is that it is silly to try to deal with a corrupt JDK; you really can't, and if you try, you end up writing untestable non-sequitur try/catches <em>everywhere</em>.</p>\n<p>This kind of thing is exactly where SneakyThrows shines. Because you neither want to write the try/catch, nor do you want to burden callers by listing an exception type that cannot actually ever happen.</p>\n<p><strong>At the time lombok's SneakyThrows feature was released</strong>, the <code>new String(someByteArray, StandardCharsets.UTF_8)</code> API didn't exist yet!__</p>\n<p>The fact that it exists <em>now</em> is a good thing: I'd say that any API that throws a checked exception in cases where the programmer knows it cannot possibly happen, is really cruddy API. I'm glad you now no longer have to deal with it.</p>\n<p>Regardless, plenty of libraries exist where this situation does occur.</p>\n<h2>Underspecced entrypoints</h2>\n<p>This is valid java:</p>\n<pre><code>public static void main(String[] args) throws Exception {}\n</code></pre>\n<p><code>main</code> methods are allowed to do that. I strongly advise all java programmers to get into the habit of doing that. The notion of checked exceptions (as in, callers need to 'worry' about them) is great for library functions (any code written with the intent to be understood as an API and not as an implementation, and is to be used by code outside of the direct confines of the team that writes it. That doesn't necessarily imply 'by other people', but may imply: By another modular layer of the application we are writing).</p>\n<p>It is silly for application code, though!</p>\n<p>A lot of exceptions are effectively unhandleable. A library has no idea what that even means (e.g. the code of <code>new FileInputStream</code> has no idea if one could perhaps handle 'file not found' - maybe this is the 'file open' dialog of a GUI app and the GUI can simply tell the user they typed a non-existent file name and need to pick something else - that's handling it). Application code, however, always knows. They can, or they can't. Often, they can't.</p>\n<p>So, what do you do when you get an exception that <em>you</em> cannot handle?</p>\n<p>You have really only one option: Throw it onward and hope that some layer above you (a caller somewhere in the call chain) can handle it. Any other act <strong>is silly</strong> and results in bad code, bad behaviour. For example, this is ubiquitous and yet evil:</p>\n<pre><code>try {\n stuff;\ncatch (Thingie e) {\n e.printStackTrace();\n}\n</code></pre>\n<p>This is the java version of basic's <code>ON ERROR RESUME NEXT</code>: When an error occurs, toss half of the info about it in the garbage, make it impossible for any other code to try to deal with it, log it to someplace few folks check, and then <em>just keep going as if nothing is wrong</em>, which likely means if something does go wrong, 85 stack traces appear because all code is written like this, and generally 'just keep going' when an exception has occurs just means more exceptions will occur soon.</p>\n<p>When we speak of entrypoints, which isn't just <code>main</code>, but is also, e.g. for web frameworks, the many many methods that serve as the point where the web framework begins calling <em>your</em> code (i.e. this is the entrypoint handler for the <code>/users/{username}</code> URL) are all 'entrypoints' and 'application code', and here's the key insight:</p>\n<p><strong>It is non-trivial to deal with a generalized, unhandleable-by-the-business-logic error condition</strong>.</p>\n<p>For example, let's say you have a web framework entrypoint and the first thing it does is open the database to check the user's credentials. If the database is just flat out down, what should the SQLException that occurs result in, for the webbrowsing user? Surely 'an error message', but it's more complicated than that. What you optimally want to happen is:</p>\n<ul>\n<li>The system gathers pertinent data which isn't 100% encoded in that exception. It also involves the request parameters for example, that should be quite useful. Perhaps not here (not useful to debug 'db is down'), but for many errors, useful.</li>\n<li>The system encrypts all this with a server key into a blob of data.</li>\n<li>The system serves an error page to the user (with code 500) and includes a form that results in an email (our server is down or in trouble, we can't do the normal thing and let them submit to our server and save it, after all, our server is probably not capable of responding if it's in dire straits, and it is, if the DB is down!), it includes the encrypted blob. This prevents issues where a hacker can use the stack trace and error relevant info to glean hidden info whilst still letting our dev team decrypt it and figure out what went wrong.</li>\n<li>All this data should also go into a log someplace.</li>\n</ul>\n<p>That's decidedly non-trivial! You <strong>do not</strong> want to have to write all that logic in 5000 separate try/catch blocks all over your code base.</p>\n<p>The best place to handle such a generalized error response is <strong>in whatever code calls entrypoints</strong>.</p>\n<p>For <code>main</code>, that's already how it works: You can throw whatever you want, and the way <code>java.exe</code> deals with it, (this'd be the thread's default exception handler) is to print the type, message, stack trace, and causal chain, and then kill that thread.</p>\n<p>Many, many frameworks, however, messed up. For example, the servlet framework requires that you throw <code>ServletException</code>. That was silly of them. Lombok's <code>@SneakyThrows</code> can help you by letting you throw these exceptions. Usually (and this includes servlets), it works fine - the servlet entrypoint runners actually catch everything.</p>\n<p>There is a third useful but less advisable use of SneakyThrows:</p>\n<h2>Milestones</h2>\n<p>It's less pretty as a codebase, but there are cases where exceptions really can occur, but rarely will (from experience / the situation) and whilst you really ought to catch them and wrap them in a properly typed exception, you're working towards a milestone release (a proof of concept for example), and whilst you don't want to write throw-away code, you're going to leave non-crucial stuff (not crucial for a working first version) documented as 'will fix later'. In such cases, sneakythrows is better than all alternatives, because sneakythrows doesn't mess with the exception at all.</p>\n"}],"owner":{"account_id":325224,"reputation":34820,"user_id":646276,"accept_rate":61,"display_name":"Lolly"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":521,"favorite_count":0,"down_vote_count":1,"up_vote_count":4,"accepted_answer_id":76706309,"answer_count":2,"score":3,"last_activity_date":1691602714,"creation_date":1689604256,"question_id":76705502,"body_markdown":"I am trying to use Lombok library in my spring boot application. I came across @SneakyThrows annotation. But I didn&#39;t really get the full use of it. Usually if there could be an exception, it&#39;s always good to catch/throw it and also the caller can handle and catch or throws it, which is a good practice. But using @SneakyThrows we are bypassing it. So what is the real advantage of it ?\r\n\r\nI went over lot of links but it all only says about the behaviour and I didn&#39;t understand the real use case.\r\n","title":"Use of Lombok @SneakyThrows annotation","body":"<p>I am trying to use Lombok library in my spring boot application. I came across @SneakyThrows annotation. But I didn't really get the full use of it. Usually if there could be an exception, it's always good to catch/throw it and also the caller can handle and catch or throws it, which is a good practice. But using @SneakyThrows we are bypassing it. So what is the real advantage of it ?</p>\n<p>I went over lot of links but it all only says about the behaviour and I didn't understand the real use case.</p>\n"},{"tags":["java","immutability","lombok"],"answers":[{"tags":[],"owner":{"account_id":2712514,"reputation":10118,"user_id":2340612,"accept_rate":83,"display_name":"user2340612"},"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1691598505,"creation_date":1691597947,"answer_id":76869593,"question_id":76869433,"body_markdown":"The problem is that `tags` is an `Array`, hence a reference type, and arrays are mutable. While it is true that the you can&#39;t change the value of `tags` (e.g., you can&#39;t reassign it to reference a different array), the array it references can be mutated by whoever holds a reference to it (including the `ValueExample` class itself, or the `main` method you created to test this behaviour).\r\n\r\nLeaving reflection aside for a moment (as it provides a &quot;backdoor&quot; that breaks immutability), for a class to be really immutable, all the referenced properties should be immutable too – and Array isn&#39;t – or you might have to resort to techniques like defensive copying.\r\n\r\nAs an additional note, you need to return immutable objects in your getters too. Imagine you make a defensive copy of the `tags` array in your constructor. If you return your copy in the `getTags()`, anyone who can call that getter will also be able to mutate the array (again, because arrays are mutable). So ideally you&#39;d need to make a new copy in both the constructor and in the getter. If the array is big, this can easily become quite expensive... On top of that, each item in the array should be immutable too, otherwise anyone who has access to the array could mutate those objects too.","title":"Lombok Value annotation not working properly for Immutable java class","body":"<p>The problem is that <code>tags</code> is an <code>Array</code>, hence a reference type, and arrays are mutable. While it is true that the you can't change the value of <code>tags</code> (e.g., you can't reassign it to reference a different array), the array it references can be mutated by whoever holds a reference to it (including the <code>ValueExample</code> class itself, or the <code>main</code> method you created to test this behaviour).</p>\n<p>Leaving reflection aside for a moment (as it provides a &quot;backdoor&quot; that breaks immutability), for a class to be really immutable, all the referenced properties should be immutable too – and Array isn't – or you might have to resort to techniques like defensive copying.</p>\n<p>As an additional note, you need to return immutable objects in your getters too. Imagine you make a defensive copy of the <code>tags</code> array in your constructor. If you return your copy in the <code>getTags()</code>, anyone who can call that getter will also be able to mutate the array (again, because arrays are mutable). So ideally you'd need to make a new copy in both the constructor and in the getter. If the array is big, this can easily become quite expensive... On top of that, each item in the array should be immutable too, otherwise anyone who has access to the array could mutate those objects too.</p>\n"},{"tags":[],"owner":{"account_id":1888781,"reputation":2007,"user_id":1707427,"display_name":"S&#246;ren"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1691602663,"creation_date":1691602663,"answer_id":76870098,"question_id":76869433,"body_markdown":"Adding on to the answer given by @user2340612:\r\n\r\nThe website you found is NOT the answer to the question &quot;How do I create an immutable class?&quot;.\r\n\r\nIt&#39;s the documentation on @Value, nothing more, nothing less. The only question this site attempts to answer is: &quot;What does @Value do?&quot;","title":"Lombok Value annotation not working properly for Immutable java class","body":"<p>Adding on to the answer given by @user2340612:</p>\n<p>The website you found is NOT the answer to the question &quot;How do I create an immutable class?&quot;.</p>\n<p>It's the documentation on @Value, nothing more, nothing less. The only question this site attempts to answer is: &quot;What does @Value do?&quot;</p>\n"}],"owner":{"account_id":986686,"reputation":868,"user_id":1005007,"accept_rate":63,"display_name":"Gep"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":78,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":2,"score":1,"last_activity_date":1691602663,"creation_date":1691596410,"question_id":76869433,"body_markdown":"I was looking to see if it&#39;s possible to create an immutable Java class using Lombok. I found this page on the Lombok website &quot;Immutable classes made very easy&quot;, but I&#39;m not convinced by it: https://projectlombok.org/features/Value\r\n\r\nI have tested it using the sample class they use in that page i.e.\r\n\r\n    @Value\r\n    public class ValueExample {\r\n      String name;\r\n      @With(AccessLevel.PACKAGE) @NonFinal int age;\r\n      double score;\r\n      protected String[] tags;\r\n      \r\n      @ToString(includeFieldNames=true)\r\n      @Value(staticConstructor=&quot;of&quot;)\r\n      public static class Exercise&lt;T&gt; {\r\n        String name;\r\n        T value;\r\n      }\r\n    }\r\n\r\nand wrote a little test:\r\n\r\n    public static void main(String... args) {\r\n\r\n        String tags[] = {&quot;a&quot;, &quot;b&quot;, &quot;c&quot;};\r\n\r\n        ValueExample t = new ValueExample(&quot;name&quot;, 1, 2.3, tags);\r\n\r\n        System.out.println(&quot;BEFORE:&quot; + Arrays.toString(t.getTags()));\r\n\r\n        String[] tagsToModify = t.getTags();\r\n\r\n        for (int i = 0; i &lt; tags.length; i++) {\r\n            tagsToModify[i] = &quot;?&quot;;\r\n        }\r\n\r\n        System.out.println(&quot;AFTER: &quot; + Arrays.toString(t.getTags()));\r\n    }\r\n\r\nThe output of the test is:\r\n\r\n    BEFORE:[a, b, c]\r\n    AFTER: [?, ?, ?]\r\n\r\nwhich to me means the class in not immutable.\r\nAm I missing something obvious?","title":"Lombok Value annotation not working properly for Immutable java class","body":"<p>I was looking to see if it's possible to create an immutable Java class using Lombok. I found this page on the Lombok website &quot;Immutable classes made very easy&quot;, but I'm not convinced by it: <a href=\"https://projectlombok.org/features/Value\" rel=\"nofollow noreferrer\">https://projectlombok.org/features/Value</a></p>\n<p>I have tested it using the sample class they use in that page i.e.</p>\n<pre><code>@Value\npublic class ValueExample {\n  String name;\n  @With(AccessLevel.PACKAGE) @NonFinal int age;\n  double score;\n  protected String[] tags;\n  \n  @ToString(includeFieldNames=true)\n  @Value(staticConstructor=&quot;of&quot;)\n  public static class Exercise&lt;T&gt; {\n    String name;\n    T value;\n  }\n}\n</code></pre>\n<p>and wrote a little test:</p>\n<pre><code>public static void main(String... args) {\n\n    String tags[] = {&quot;a&quot;, &quot;b&quot;, &quot;c&quot;};\n\n    ValueExample t = new ValueExample(&quot;name&quot;, 1, 2.3, tags);\n\n    System.out.println(&quot;BEFORE:&quot; + Arrays.toString(t.getTags()));\n\n    String[] tagsToModify = t.getTags();\n\n    for (int i = 0; i &lt; tags.length; i++) {\n        tagsToModify[i] = &quot;?&quot;;\n    }\n\n    System.out.println(&quot;AFTER: &quot; + Arrays.toString(t.getTags()));\n}\n</code></pre>\n<p>The output of the test is:</p>\n<pre><code>BEFORE:[a, b, c]\nAFTER: [?, ?, ?]\n</code></pre>\n<p>which to me means the class in not immutable.\nAm I missing something obvious?</p>\n"},{"tags":["java","mongodb","spring-boot","spring-data-mongodb"],"answers":[{"tags":[],"owner":{"account_id":4565343,"reputation":12775,"user_id":3710490,"accept_rate":64,"display_name":"Valijon"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1691602373,"creation_date":1691601343,"answer_id":76869975,"question_id":76869785,"body_markdown":"## Explanation:\r\n\r\n1. We need to group by 2 parameters (`storeId` + `paymentType`) and sum `paymentType&#39;s` total amount.\r\n2. We sum `total amount` for all `paymentType`s for each `storeId`.\r\n3. We need to use `$arrayToObject` to pivot each `paymentType` into field.\r\n4. With other operators we assamble expected result.\r\n---\r\n    {\r\n       &quot;Total Amount&quot;: NumberDecimal(&quot;250&quot;),\r\n       &quot;cash&quot;: NumberDecimal(&quot;200&quot;),\r\n       &quot;creditCard&quot;: NumberDecimal(&quot;50&quot;),\r\n       &quot;storeId&quot;: &quot;3070&quot;\r\n    }\r\n\r\n**Note:** `cash`, `creditCard`, `check`, etc. are dynamically filled. If any `storeId` has no such payment types, these fields may not be there.\r\n\r\nTry this one:\r\n\r\n    db.collection.aggregate([\r\n      {\r\n        $group: {\r\n          _id: {\r\n            storeId: &quot;$storeId&quot;,\r\n            paymentType: &quot;$paymentType&quot;\r\n          },\r\n          total: {\r\n            $sum: &quot;$total&quot;\r\n          }\r\n        }\r\n      },\r\n      {\r\n        $group: {\r\n          _id: &quot;$_id.storeId&quot;,\r\n          paymentType: {\r\n            $push: {\r\n              &quot;k&quot;: &quot;$_id.paymentType&quot;,\r\n              &quot;v&quot;: &quot;$total&quot;\r\n            }\r\n          },\r\n          &quot;total&quot;: {\r\n            $sum: &quot;$total&quot;\r\n          }\r\n        }\r\n      },\r\n      {\r\n        &quot;$replaceWith&quot;: {\r\n          &quot;$arrayToObject&quot;: {\r\n            &quot;$concatArrays&quot;: [\r\n              &quot;$paymentType&quot;,\r\n              [\r\n                {\r\n                  &quot;k&quot;: &quot;storeId&quot;,\r\n                  &quot;v&quot;: &quot;$_id&quot;\r\n                },\r\n                {\r\n                  &quot;k&quot;: &quot;Total Amount&quot;,\r\n                  &quot;v&quot;: &quot;$total&quot;\r\n                }\r\n              ]\r\n            ]\r\n          }\r\n        }\r\n      }\r\n    ])\r\n[MongoPlayground](https://mongoplayground.net/p/l07lEzwQfTb)\r\n\r\n### Java - complex aggregation pipeline\r\n\r\n    private static AggregationOperation replaceWith() {\r\n        return ctx -&gt; Document.parse(&quot;{&quot; +\r\n            &quot;&#39;$replaceWith&#39;: {&quot; +\r\n                &quot;&#39;$arrayToObject&#39;: {&quot; +\r\n                    &quot;...&quot; +\r\n                &quot;}&quot; +\r\n            &quot;}&quot;+\r\n        &quot;}&quot;)\r\n    }","title":"Java spring-mongo-data Mongodb query for group and projection logic","body":"<h2>Explanation:</h2>\n<ol>\n<li>We need to group by 2 parameters (<code>storeId</code> + <code>paymentType</code>) and sum <code>paymentType's</code> total amount.</li>\n<li>We sum <code>total amount</code> for all <code>paymentType</code>s for each <code>storeId</code>.</li>\n<li>We need to use <code>$arrayToObject</code> to pivot each <code>paymentType</code> into field.</li>\n<li>With other operators we assamble expected result.</li>\n</ol>\n<hr />\n<pre><code>{\n   &quot;Total Amount&quot;: NumberDecimal(&quot;250&quot;),\n   &quot;cash&quot;: NumberDecimal(&quot;200&quot;),\n   &quot;creditCard&quot;: NumberDecimal(&quot;50&quot;),\n   &quot;storeId&quot;: &quot;3070&quot;\n}\n</code></pre>\n<p><strong>Note:</strong> <code>cash</code>, <code>creditCard</code>, <code>check</code>, etc. are dynamically filled. If any <code>storeId</code> has no such payment types, these fields may not be there.</p>\n<p>Try this one:</p>\n<pre><code>db.collection.aggregate([\n  {\n    $group: {\n      _id: {\n        storeId: &quot;$storeId&quot;,\n        paymentType: &quot;$paymentType&quot;\n      },\n      total: {\n        $sum: &quot;$total&quot;\n      }\n    }\n  },\n  {\n    $group: {\n      _id: &quot;$_id.storeId&quot;,\n      paymentType: {\n        $push: {\n          &quot;k&quot;: &quot;$_id.paymentType&quot;,\n          &quot;v&quot;: &quot;$total&quot;\n        }\n      },\n      &quot;total&quot;: {\n        $sum: &quot;$total&quot;\n      }\n    }\n  },\n  {\n    &quot;$replaceWith&quot;: {\n      &quot;$arrayToObject&quot;: {\n        &quot;$concatArrays&quot;: [\n          &quot;$paymentType&quot;,\n          [\n            {\n              &quot;k&quot;: &quot;storeId&quot;,\n              &quot;v&quot;: &quot;$_id&quot;\n            },\n            {\n              &quot;k&quot;: &quot;Total Amount&quot;,\n              &quot;v&quot;: &quot;$total&quot;\n            }\n          ]\n        ]\n      }\n    }\n  }\n])\n</code></pre>\n<p><a href=\"https://mongoplayground.net/p/l07lEzwQfTb\" rel=\"nofollow noreferrer\">MongoPlayground</a></p>\n<h3>Java - complex aggregation pipeline</h3>\n<pre><code>private static AggregationOperation replaceWith() {\n    return ctx -&gt; Document.parse(&quot;{&quot; +\n        &quot;'$replaceWith': {&quot; +\n            &quot;'$arrayToObject': {&quot; +\n                &quot;...&quot; +\n            &quot;}&quot; +\n        &quot;}&quot;+\n    &quot;}&quot;)\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":20953847,"reputation":66,"user_id":15394888,"display_name":"Kavinda"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1691601736,"creation_date":1691601736,"answer_id":76870010,"question_id":76869785,"body_markdown":"If you want to group and add up some data from your MongoDB collection. Here&#39;s how you can do it using Java with Spring Data MongoDB:\r\n\r\n\r\n**If You want to group the data by the &quot;storeId&quot; and sum the amounts for different payment types (&quot;cash&quot; and &quot;creditCard&quot;). Here&#39;s how you can do that:**\r\n\r\n    import org.springframework.data.mongodb.core.aggregation.Aggregation;\r\n    import org.springframework.data.mongodb.core.aggregation.GroupOperation;\r\n    import org.springframework.data.mongodb.core.query.Criteria;\r\n    \r\n    // ...\r\n    \r\n    GroupOperation groupingLogic() {\r\n        return Aggregation.group(&quot;storeId&quot;)\r\n            .sum(\r\n                ConditionalOperators.when(Criteria.where(&quot;paymentType&quot;).is(&quot;cash&quot;)).then(&quot;$total.$numberDecimal&quot;).otherwise(0)\r\n            ).as(&quot;cashPayment&quot;)\r\n            .sum(\r\n                ConditionalOperators.when(Criteria.where(&quot;paymentType&quot;).is(&quot;creditCard&quot;)).then(&quot;$total.$numberDecimal&quot;).otherwise(0)\r\n            ).as(&quot;cardPayment&quot;)\r\n            .sum(&quot;$total.$numberDecimal&quot;).as(&quot;totalAmountCashCard&quot;);\r\n    }\r\n\r\n\r\n\r\n**To show in your format. Here&#39;s how you can do that:**\r\n\r\n\r\n    import org.springframework.data.mongodb.core.aggregation.ProjectionOperation;\r\n\r\n    \r\n    ProjectionOperation projectionLogic() {\r\n        return Aggregation.project()\r\n            .and(&quot;storeId&quot;).as(&quot;StoreId&quot;)\r\n            .and(&quot;cashPayment&quot;).as(&quot;Cash Payment&quot;)\r\n            .and(&quot;cardPayment&quot;).as(&quot;Card Payment&quot;)\r\n            .and(&quot;totalAmountCashCard&quot;).as(&quot;Total Amount Cash + Card&quot;);\r\n    }\r\n\r\n**Putting It All Together:**\r\n\r\n\r\n    import org.springframework.data.mongodb.core.MongoTemplate;\r\n    import org.springframework.data.mongodb.core.aggregation.Aggregation;\r\n    import org.springframework.data.mongodb.core.query.Criteria;\r\n    import org.springframework.stereotype.Service;\r\n    import java.util.List;\r\n    \r\n    @Service\r\n    public class YourService {\r\n    \r\n        private final MongoTemplate mongoTemplate;\r\n    \r\n        public YourService(MongoTemplate mongoTemplate) {\r\n            this.mongoTemplate = mongoTemplate;\r\n        }\r\n    \r\n        public List&lt;YourOutputType&gt; getGroupedData() {\r\n            Aggregation aggregation = Aggregation.newAggregation(\r\n                groupingLogic(),\r\n                projectionLogic()\r\n            );\r\n    \r\n            return mongoTemplate.aggregate(aggregation, &quot;yourCollectionName&quot;, YourOutputType.class).getMappedResults();\r\n        }\r\n    }\r\n\r\n**Remember to replace yourCollectionName with the actual name** of your MongoDB collection and YourOutputType with the appropriate class that matches the expected output.\r\n\r\n","title":"Java spring-mongo-data Mongodb query for group and projection logic","body":"<p>If you want to group and add up some data from your MongoDB collection. Here's how you can do it using Java with Spring Data MongoDB:</p>\n<p><strong>If You want to group the data by the &quot;storeId&quot; and sum the amounts for different payment types (&quot;cash&quot; and &quot;creditCard&quot;). Here's how you can do that:</strong></p>\n<pre><code>import org.springframework.data.mongodb.core.aggregation.Aggregation;\nimport org.springframework.data.mongodb.core.aggregation.GroupOperation;\nimport org.springframework.data.mongodb.core.query.Criteria;\n\n// ...\n\nGroupOperation groupingLogic() {\n    return Aggregation.group(&quot;storeId&quot;)\n        .sum(\n            ConditionalOperators.when(Criteria.where(&quot;paymentType&quot;).is(&quot;cash&quot;)).then(&quot;$total.$numberDecimal&quot;).otherwise(0)\n        ).as(&quot;cashPayment&quot;)\n        .sum(\n            ConditionalOperators.when(Criteria.where(&quot;paymentType&quot;).is(&quot;creditCard&quot;)).then(&quot;$total.$numberDecimal&quot;).otherwise(0)\n        ).as(&quot;cardPayment&quot;)\n        .sum(&quot;$total.$numberDecimal&quot;).as(&quot;totalAmountCashCard&quot;);\n}\n</code></pre>\n<p><strong>To show in your format. Here's how you can do that:</strong></p>\n<pre><code>import org.springframework.data.mongodb.core.aggregation.ProjectionOperation;\n\n\nProjectionOperation projectionLogic() {\n    return Aggregation.project()\n        .and(&quot;storeId&quot;).as(&quot;StoreId&quot;)\n        .and(&quot;cashPayment&quot;).as(&quot;Cash Payment&quot;)\n        .and(&quot;cardPayment&quot;).as(&quot;Card Payment&quot;)\n        .and(&quot;totalAmountCashCard&quot;).as(&quot;Total Amount Cash + Card&quot;);\n}\n</code></pre>\n<p><strong>Putting It All Together:</strong></p>\n<pre><code>import org.springframework.data.mongodb.core.MongoTemplate;\nimport org.springframework.data.mongodb.core.aggregation.Aggregation;\nimport org.springframework.data.mongodb.core.query.Criteria;\nimport org.springframework.stereotype.Service;\nimport java.util.List;\n\n@Service\npublic class YourService {\n\n    private final MongoTemplate mongoTemplate;\n\n    public YourService(MongoTemplate mongoTemplate) {\n        this.mongoTemplate = mongoTemplate;\n    }\n\n    public List&lt;YourOutputType&gt; getGroupedData() {\n        Aggregation aggregation = Aggregation.newAggregation(\n            groupingLogic(),\n            projectionLogic()\n        );\n\n        return mongoTemplate.aggregate(aggregation, &quot;yourCollectionName&quot;, YourOutputType.class).getMappedResults();\n    }\n}\n</code></pre>\n<p><strong>Remember to replace yourCollectionName with the actual name</strong> of your MongoDB collection and YourOutputType with the appropriate class that matches the expected output.</p>\n"}],"owner":{"account_id":2246079,"reputation":7967,"user_id":1979380,"accept_rate":89,"display_name":"jarvo69"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":43,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76870010,"answer_count":2,"score":0,"last_activity_date":1691602373,"creation_date":1691599608,"question_id":76869785,"body_markdown":"I have below 3 sample records:\r\n\r\n        {\r\n          &quot;_id&quot; : &quot;0cc5c468-2105-11ee-ad68-15d467e62by4d&quot;,\r\n          &quot;storeId&quot; : &quot;3070&quot;,\r\n          &quot;paymentType&quot; : &quot;cash&quot;,\r\n          &quot;total&quot; : {&quot;$numberDecimal&quot;: &quot;100&quot;}\r\n        },\r\n    {\r\n          &quot;_id&quot; : &quot;1111111-2105-11ee-ad68-15d467e62by4d&quot;,\r\n          &quot;storeId&quot; : &quot;3070&quot;,\r\n          &quot;paymentType&quot; : &quot;cash&quot;,\r\n          &quot;total&quot; : {&quot;$numberDecimal&quot;: &quot;100&quot;}\r\n        },\r\n        {\r\n          &quot;_id&quot; : &quot;0cc5c468-2105-11ee-ad68-15d467e62by4d&quot;,\r\n          &quot;storeId&quot; : &quot;3070&quot;,\r\n          &quot;paymentType&quot; : &quot;creditCard&quot;,\r\n          &quot;total&quot; : {&quot;$numberDecimal&quot;: &quot;50&quot;}\r\n        }\r\n\r\n\r\nI am trying to write some grouping and projection logic in which the desired output from above sample data should be as below:\r\n\r\n\r\n    StoreId | Cash Payment | Card Payment | Total Amount Cash + Card\r\n    3070        200               50                250\r\n\r\n\r\nThe last column can ofcourse be ignored but i need this kind of output from mongodb in java.\r\nI have tried many things and below is the code I have so far which is not giving desired output, it gives me two separate records for card payment and cash payment types. \r\n\r\n    GroupOperation groupingLogic() {\r\n            return group(&quot;storeId&quot;, &quot;paymentType&quot;)\r\n                    .first(&quot;storeId&quot;).as(&quot;storeId&quot;)\r\n                    .first(&quot;paymentType&quot;).as(&quot;paymentType&quot;)\r\n                    .sum(TOTAL).as(TOTAL);\r\n        }\r\n\r\nI am not sure how to get output as expected above with java mongodb code . \r\n\r\nPlease someone help.","title":"Java spring-mongo-data Mongodb query for group and projection logic","body":"<p>I have below 3 sample records:</p>\n<pre><code>    {\n      &quot;_id&quot; : &quot;0cc5c468-2105-11ee-ad68-15d467e62by4d&quot;,\n      &quot;storeId&quot; : &quot;3070&quot;,\n      &quot;paymentType&quot; : &quot;cash&quot;,\n      &quot;total&quot; : {&quot;$numberDecimal&quot;: &quot;100&quot;}\n    },\n{\n      &quot;_id&quot; : &quot;1111111-2105-11ee-ad68-15d467e62by4d&quot;,\n      &quot;storeId&quot; : &quot;3070&quot;,\n      &quot;paymentType&quot; : &quot;cash&quot;,\n      &quot;total&quot; : {&quot;$numberDecimal&quot;: &quot;100&quot;}\n    },\n    {\n      &quot;_id&quot; : &quot;0cc5c468-2105-11ee-ad68-15d467e62by4d&quot;,\n      &quot;storeId&quot; : &quot;3070&quot;,\n      &quot;paymentType&quot; : &quot;creditCard&quot;,\n      &quot;total&quot; : {&quot;$numberDecimal&quot;: &quot;50&quot;}\n    }\n</code></pre>\n<p>I am trying to write some grouping and projection logic in which the desired output from above sample data should be as below:</p>\n<pre><code>StoreId | Cash Payment | Card Payment | Total Amount Cash + Card\n3070        200               50                250\n</code></pre>\n<p>The last column can ofcourse be ignored but i need this kind of output from mongodb in java.\nI have tried many things and below is the code I have so far which is not giving desired output, it gives me two separate records for card payment and cash payment types.</p>\n<pre><code>GroupOperation groupingLogic() {\n        return group(&quot;storeId&quot;, &quot;paymentType&quot;)\n                .first(&quot;storeId&quot;).as(&quot;storeId&quot;)\n                .first(&quot;paymentType&quot;).as(&quot;paymentType&quot;)\n                .sum(TOTAL).as(TOTAL);\n    }\n</code></pre>\n<p>I am not sure how to get output as expected above with java mongodb code .</p>\n<p>Please someone help.</p>\n"},{"tags":["java","spring-boot","docker-compose","open-source","hotswap"],"owner":{"account_id":29193720,"reputation":11,"user_id":22365332,"display_name":"Ricardo A."},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":85,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1691602232,"creation_date":1691602232,"question_id":76870063,"body_markdown":"I&#39;m working on an open-source project called DLCM (link). The backend is built with Spring Boot and is running inside a Docker container. My development environment is VS Code, and I&#39;m sharing volumes between my host machine and the Docker container to reflect the code changes.\r\n\r\nHowever, when I make changes to the code, I currently have to rebuild everything, which is time-consuming. To remedy this, I integrated the Spring Boot DevTools into my project:\r\n\r\n```\r\n &lt;dependency&gt;\r\n    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n    &lt;artifactId&gt;spring-boot-devtools&lt;/artifactId&gt;\r\n    &lt;scope&gt;runtime&lt;/scope&gt;\r\n    &lt;optional&gt;true&lt;/optional&gt;\r\n &lt;/dependency&gt;\r\n```\r\n\r\n  \r\nI run the project within the Docker container using:\r\n\r\n```\r\nmvn -f /app/DLCM-Solution/pom.xml spring-boot:run -Dspring-boot.run.arguments=&quot;--spring.config.location=/app/administration.properties&quot; -Dlicense.skipCheckLicense\r\n```\r\n\r\nUnfortunately, even with DevTools integrated, hot reloading (hot swap) isn&#39;t functioning as expected. Here&#39;s the Docker Compose configuration for the backend:\r\n\r\n```\r\ndlcm-administration:\r\n    image: development-dlcm-backend-image\r\n    # image: maven:3.6-openjdk-11\r\n    # image: $DOCKER_REGISTRY/dlcm-solution:$DLCM_SOLUTION_VERSION\r\n    container_name: light-administration\r\n    restart: always\r\n    volumes:\r\n      - ~/.m2:/root/.m2\r\n      - /home/ricardo/inuits/fair-vault/poc/fairvault-common/DLCM-Backend:/app # Mount source code\r\n      - /etc/timezone:/etc/timezone:ro\r\n      - dlcm-light-administration-tmp-volume:/tmp\r\n      - dlcm-light-home-volume:/home/dlcm/:rw\r\n      - /home/ricardo/inuits/fair-vault/dlcm-demo-docker-compose/dlcm-light/administration.properties:/app/administration.properties\r\n    command: mvn -f /app/DLCM-Solution/pom.xml spring-boot:run -Dspring-boot.run.arguments=&quot;--spring.config.location=/app/administration.properties&quot; -Dlicense.skipCheckLicense\r\n    # command: tail -f /dev/null\r\n    ports:\r\n      - &#39;$IP_ADDRESS:$DLCM_ADMINISTRATION_PORT:$DLCM_ADMINISTRATION_INTERNAL_PORT&#39;\r\n    networks:\r\n      - lightnet\r\n      - infranet\r\n    mem_limit: 8g\r\n```\r\n\r\nI expect the code to hot swap as I make changes in my local development environment and to automatically rebuild inside the container. I chose this Docker setup to utilize its networking features and to streamline the setup process for future developers.\r\n\r\nHas anyone encountered and resolved a similar issue? Any pointers would be greatly appreciated.","title":"Hot swap not working for Spring Boot project inside Docker container","body":"<p>I'm working on an open-source project called DLCM (link). The backend is built with Spring Boot and is running inside a Docker container. My development environment is VS Code, and I'm sharing volumes between my host machine and the Docker container to reflect the code changes.</p>\n<p>However, when I make changes to the code, I currently have to rebuild everything, which is time-consuming. To remedy this, I integrated the Spring Boot DevTools into my project:</p>\n<pre><code> &lt;dependency&gt;\n    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n    &lt;artifactId&gt;spring-boot-devtools&lt;/artifactId&gt;\n    &lt;scope&gt;runtime&lt;/scope&gt;\n    &lt;optional&gt;true&lt;/optional&gt;\n &lt;/dependency&gt;\n</code></pre>\n<p>I run the project within the Docker container using:</p>\n<pre><code>mvn -f /app/DLCM-Solution/pom.xml spring-boot:run -Dspring-boot.run.arguments=&quot;--spring.config.location=/app/administration.properties&quot; -Dlicense.skipCheckLicense\n</code></pre>\n<p>Unfortunately, even with DevTools integrated, hot reloading (hot swap) isn't functioning as expected. Here's the Docker Compose configuration for the backend:</p>\n<pre><code>dlcm-administration:\n    image: development-dlcm-backend-image\n    # image: maven:3.6-openjdk-11\n    # image: $DOCKER_REGISTRY/dlcm-solution:$DLCM_SOLUTION_VERSION\n    container_name: light-administration\n    restart: always\n    volumes:\n      - ~/.m2:/root/.m2\n      - /home/ricardo/inuits/fair-vault/poc/fairvault-common/DLCM-Backend:/app # Mount source code\n      - /etc/timezone:/etc/timezone:ro\n      - dlcm-light-administration-tmp-volume:/tmp\n      - dlcm-light-home-volume:/home/dlcm/:rw\n      - /home/ricardo/inuits/fair-vault/dlcm-demo-docker-compose/dlcm-light/administration.properties:/app/administration.properties\n    command: mvn -f /app/DLCM-Solution/pom.xml spring-boot:run -Dspring-boot.run.arguments=&quot;--spring.config.location=/app/administration.properties&quot; -Dlicense.skipCheckLicense\n    # command: tail -f /dev/null\n    ports:\n      - '$IP_ADDRESS:$DLCM_ADMINISTRATION_PORT:$DLCM_ADMINISTRATION_INTERNAL_PORT'\n    networks:\n      - lightnet\n      - infranet\n    mem_limit: 8g\n</code></pre>\n<p>I expect the code to hot swap as I make changes in my local development environment and to automatically rebuild inside the container. I chose this Docker setup to utilize its networking features and to streamline the setup process for future developers.</p>\n<p>Has anyone encountered and resolved a similar issue? Any pointers would be greatly appreciated.</p>\n"},{"tags":["java","multithreading","java-native-interface","jvm-hotspot","numa"],"comments":[{"owner":{"account_id":1754145,"reputation":43950,"user_id":1602555,"display_name":"Karol Dowbecki"},"score":0,"creation_date":1573763557,"post_id":58866021,"comment_id":104001531,"body_markdown":"Have you tried `ForkJoinPool` instead of `ExecutorService`? 25% CPU utilization is really low if your problem is CPU bound.","body":"Have you tried <code>ForkJoinPool</code> instead of <code>ExecutorService</code>? 25% CPU utilization is really low if your problem is CPU bound."},{"owner":{"account_id":2988113,"reputation":838,"user_id":2536360,"display_name":"Nils"},"score":0,"creation_date":1573763628,"post_id":58866021,"comment_id":104001560,"body_markdown":"I have not. Why do you think that this would solve the problem?","body":"I have not. Why do you think that this would solve the problem?"},{"owner":{"account_id":1754145,"reputation":43950,"user_id":1602555,"display_name":"Karol Dowbecki"},"score":1,"creation_date":1573763756,"post_id":58866021,"comment_id":104001611,"body_markdown":"Your problem sounds like something that should push CPU to 100% and yet you are on 25%. For some problems `ForkJoinPool` is more efficient than manual scheduling.","body":"Your problem sounds like something that should push CPU to 100% and yet you are on 25%. For some problems <code>ForkJoinPool</code> is more efficient than manual scheduling."},{"owner":{"account_id":2496,"reputation":266234,"user_id":3474,"accept_rate":83,"display_name":"erickson"},"score":2,"creation_date":1573763850,"post_id":58866021,"comment_id":104001649,"body_markdown":"Cycling through Hotspot versions, have you made sure you are using the &quot;server&quot; and not &quot;client&quot; version? What is your CPU utilization on Linux? Also, Windows uptime of several days is impressive! What is your secret? :P","body":"Cycling through Hotspot versions, have you made sure you are using the &quot;server&quot; and not &quot;client&quot; version? What is your CPU utilization on Linux? Also, Windows uptime of several days is impressive! What is your secret? :P"},{"owner":{"account_id":2988113,"reputation":838,"user_id":2536360,"display_name":"Nils"},"score":0,"creation_date":1573763934,"post_id":58866021,"comment_id":104001679,"body_markdown":"Yes, it does use 100% (or close to it) on Linux but not on Windows.","body":"Yes, it does use 100% (or close to it) on Linux but not on Windows."},{"owner":{"account_id":1754145,"reputation":43950,"user_id":1602555,"display_name":"Karol Dowbecki"},"score":0,"creation_date":1573764015,"post_id":58866021,"comment_id":104001710,"body_markdown":"Could it be that your Windows server has an antivirus? Can you test on a server with a minimal Windows installation?","body":"Could it be that your Windows server has an antivirus? Can you test on a server with a minimal Windows installation?"},{"owner":{"account_id":2988113,"reputation":838,"user_id":2536360,"display_name":"Nils"},"score":0,"creation_date":1573764112,"post_id":58866021,"comment_id":104001748,"body_markdown":"@erickson Do you mean the server flag? I have tried that, it has no effect.","body":"@erickson Do you mean the server flag? I have tried that, it has no effect."},{"owner":{"account_id":2988113,"reputation":838,"user_id":2536360,"display_name":"Nils"},"score":0,"creation_date":1573764216,"post_id":58866021,"comment_id":104001797,"body_markdown":"@Karol Dowbecki: I ran it on several AWS Windows 2019 up to an expensive bare-metal as well as on a workstation. Except for whatever default is provided through Windows none of those have AV scanners running.","body":"@Karol Dowbecki: I ran it on several AWS Windows 2019 up to an expensive bare-metal as well as on a workstation. Except for whatever default is provided through Windows none of those have AV scanners running."},{"owner":{"account_id":1754145,"reputation":43950,"user_id":1602555,"display_name":"Karol Dowbecki"},"score":3,"creation_date":1573764481,"post_id":58866021,"comment_id":104001900,"body_markdown":"Maybe try using [Xperf](https://learn.microsoft.com/en-us/windows-hardware/test/wpt/) to generate a [FlameGraph](http://www.brendangregg.com/flamegraphs.html). This could give you some insight what is the CPU doing (hopefully both user and kernel mode), but I never did it on Windows.","body":"Maybe try using <a href=\"https://learn.microsoft.com/en-us/windows-hardware/test/wpt/\" rel=\"nofollow noreferrer\">Xperf</a> to generate a <a href=\"http://www.brendangregg.com/flamegraphs.html\" rel=\"nofollow noreferrer\">FlameGraph</a>. This could give you some insight what is the CPU doing (hopefully both user and kernel mode), but I never did it on Windows."},{"owner":{"account_id":2988113,"reputation":838,"user_id":2536360,"display_name":"Nils"},"score":0,"creation_date":1573764699,"post_id":58866021,"comment_id":104001987,"body_markdown":"@KarolDowbecki Thanks for the reference. I will check it out, but the CPU is busy with the call of a native function more than 90% of the time.","body":"@KarolDowbecki Thanks for the reference. I will check it out, but the CPU is busy with the call of a native function more than 90% of the time."},{"owner":{"account_id":2496,"reputation":266234,"user_id":3474,"accept_rate":83,"display_name":"erickson"},"score":0,"creation_date":1573765868,"post_id":58866021,"comment_id":104002487,"body_markdown":"Okay, do you mean that 90% of the 25% of CPU the process is using is in the native call, or that the CPU is at 100% with 90% in native code and 10% in Java?","body":"Okay, do you mean that 90% of the 25% of CPU the process is using is in the native call, or that the CPU is at 100% with 90% in native code and 10% in Java?"},{"owner":{"account_id":2988113,"reputation":838,"user_id":2536360,"display_name":"Nils"},"score":0,"creation_date":1573767237,"post_id":58866021,"comment_id":104003077,"body_markdown":"@erickson 90% of the 25% CPU (on Windows) as well as 90% of the 100% CPU (on Linux) are in the native call","body":"@erickson 90% of the 25% CPU (on Windows) as well as 90% of the 100% CPU (on Linux) are in the native call"},{"owner":{"account_id":2988113,"reputation":838,"user_id":2536360,"display_name":"Nils"},"score":0,"creation_date":1573937394,"post_id":58866021,"comment_id":104054923,"body_markdown":"@KarolDowbecki The `ForkJoinPool` brings no relief.","body":"@KarolDowbecki The <code>ForkJoinPool</code> brings no relief."},{"owner":{"account_id":6333754,"reputation":2065,"user_id":4917881,"display_name":"aventurin"},"score":0,"creation_date":1573945036,"post_id":58866021,"comment_id":104056570,"body_markdown":"Did you also try different memory allocators in your solver?","body":"Did you also try different memory allocators in your solver?"},{"owner":{"account_id":2988113,"reputation":838,"user_id":2536360,"display_name":"Nils"},"score":0,"creation_date":1574013518,"post_id":58866021,"comment_id":104069779,"body_markdown":"@aventurin How do I try different memory allocators and what are those?","body":"@aventurin How do I try different memory allocators and what are those?"},{"owner":{"account_id":6333754,"reputation":2065,"user_id":4917881,"display_name":"aventurin"},"score":0,"creation_date":1574018526,"post_id":58866021,"comment_id":104071327,"body_markdown":"They are responsible for dynamic memory allocation (`malloc`, `realloc`). When your solver code makes use of `malloc`, `realloc`, etc. then, in a long-running process the type of allocator may make a difference. It may also explain differences in various operating systems due to memory fragmentation and cache hit rates. See https://en.wikipedia.org/wiki/C_dynamic_memory_allocation","body":"They are responsible for dynamic memory allocation (<code>malloc</code>, <code>realloc</code>). When your solver code makes use of <code>malloc</code>, <code>realloc</code>, etc. then, in a long-running process the type of allocator may make a difference. It may also explain differences in various operating systems due to memory fragmentation and cache hit rates. See <a href=\"https://en.wikipedia.org/wiki/C_dynamic_memory_allocation\" rel=\"nofollow noreferrer\">en.wikipedia.org/wiki/C_dynamic_memory_allocation</a>"},{"owner":{"account_id":5513230,"reputation":3625,"user_id":4378853,"accept_rate":100,"display_name":"GotoFinal"},"score":0,"creation_date":1574076137,"post_id":58866021,"comment_id":104088822,"body_markdown":"It&#39;s hard to guess without some example code. How do you read/write data your are saving? Maybe some additional read/write operations are the issue. Or try disabling all the windows defender functionalities - this sometimes can really slow down some applications.","body":"It&#39;s hard to guess without some example code. How do you read/write data your are saving? Maybe some additional read/write operations are the issue. Or try disabling all the windows defender functionalities - this sometimes can really slow down some applications."},{"owner":{"account_id":2988113,"reputation":838,"user_id":2536360,"display_name":"Nils"},"score":0,"creation_date":1574141295,"post_id":58866021,"comment_id":104115066,"body_markdown":"@GotoFinal I will give this some more thought, but it&#39;s quite difficult to isolate into a code snippet (or several even). The application runs in-memory and Windows Defender is turned off.","body":"@GotoFinal I will give this some more thought, but it&#39;s quite difficult to isolate into a code snippet (or several even). The application runs in-memory and Windows Defender is turned off."},{"owner":{"account_id":17015362,"reputation":151,"user_id":12309398,"display_name":"S.R."},"score":1,"creation_date":1574227881,"post_id":58866021,"comment_id":104152093,"body_markdown":"@Nils, both of runs (unix/win) uses same interface to call native library? I ask, because it looks like different. Like: win uses jna, linux jni.","body":"@Nils, both of runs (unix/win) uses same interface to call native library? I ask, because it looks like different. Like: win uses jna, linux jni."},{"owner":{"account_id":6398908,"reputation":3023,"user_id":4962355,"display_name":"Christoph John"},"score":0,"creation_date":1574286455,"post_id":58866021,"comment_id":104182827,"body_markdown":"Hmm, @Nils didn&#39;t state whether he uses different native interfaces, but it sure looks like it was the case. Could definitely be the reason for the &quot;order of magnitude&quot; difference... https://github.com/java-native-access/jna/blob/master/www/FrequentlyAskedQuestions.md#how-does-jna-performance-compare-to-custom-jni . But anyway I think he would have mentioned it if he employed different libraries on Linux and Windows.","body":"Hmm, @Nils didn&#39;t state whether he uses different native interfaces, but it sure looks like it was the case. Could definitely be the reason for the &quot;order of magnitude&quot; difference... <a href=\"https://github.com/java-native-access/jna/blob/master/www/FrequentlyAskedQuestions.md#how-does-jna-performance-compare-to-custom-jni\" rel=\"nofollow noreferrer\">github.com/java-native-access/jna/blob/master/www/&hellip;</a> . But anyway I think he would have mentioned it if he employed different libraries on Linux and Windows."},{"owner":{"account_id":2988113,"reputation":838,"user_id":2536360,"display_name":"Nils"},"score":0,"creation_date":1574347919,"post_id":58866021,"comment_id":104208500,"body_markdown":"@S.R. Both implementations use the same interface on both systems.","body":"@S.R. Both implementations use the same interface on both systems."},{"owner":{"account_id":2988113,"reputation":838,"user_id":2536360,"display_name":"Nils"},"score":0,"creation_date":1574348460,"post_id":58866021,"comment_id":104208843,"body_markdown":"@ChristophJohn Here is a [link](https://github.com/quantego/clp-java) to one of the libraries I am using. The profiler does not identify repeated function calls as bottleneck. Most of the computation time is spend inside `CLPNative.javaclpInitialSolve(Pointer&lt;CLPSimplex&gt;)`","body":"@ChristophJohn Here is a <a href=\"https://github.com/quantego/clp-java\" rel=\"nofollow noreferrer\">link</a> to one of the libraries I am using. The profiler does not identify repeated function calls as bottleneck. Most of the computation time is spend inside <code>CLPNative.javaclpInitialSolve(Pointer&lt;CLPSimplex&gt;)</code>"},{"owner":{"account_id":6398908,"reputation":3023,"user_id":4962355,"display_name":"Christoph John"},"score":0,"creation_date":1574374622,"post_id":58866021,"comment_id":104221701,"body_markdown":"I don&#39;t really have a solution without checking all that code. But here some things that I am asking myself: 1. You say that &quot;Garbage Collection is not an issue since the application does not create and de-reference a lot of objects&quot;.  OTOH you say &quot;Solution times for a subproblem are in the ms range&quot; and that solution times for the overall problem range from hours to days. So don&#39;t you create a **lot** of objects actually (for the subproblems)? Maybe you could activate GC logging to check. Or did you already verify in jvisualvm that GC is not the problem?","body":"I don&#39;t really have a solution without checking all that code. But here some things that I am asking myself: 1. You say that &quot;Garbage Collection is not an issue since the application does not create and de-reference a lot of objects&quot;.  OTOH you say &quot;Solution times for a subproblem are in the ms range&quot; and that solution times for the overall problem range from hours to days. So don&#39;t you create a <b>lot</b> of objects actually (for the subproblems)? Maybe you could activate GC logging to check. Or did you already verify in jvisualvm that GC is not the problem?"},{"owner":{"account_id":6398908,"reputation":3023,"user_id":4962355,"display_name":"Christoph John"},"score":0,"creation_date":1574374645,"post_id":58866021,"comment_id":104221709,"body_markdown":"2. Since you are using native memory quite heavily, I&#39;d suggest you do some tracking to check. Example is here: https://www.baeldung.com/native-memory-tracking-in-jvm#9-nmt-over-time Please note that enabling NMT will result in about 5-10% performance drop (https://docs.oracle.com/javase/8/docs/technotes/guides/troubleshoot/tooldescr007.html)  3. Are you passing the subproblems all at once to the Executor? Are you using a blocking task queue? Are you using a bounded task queue?","body":"2. Since you are using native memory quite heavily, I&#39;d suggest you do some tracking to check. Example is here: <a href=\"https://www.baeldung.com/native-memory-tracking-in-jvm#9-nmt-over-time\" rel=\"nofollow noreferrer\">baeldung.com/native-memory-tracking-in-jvm#9-nmt-over-time</a> Please note that enabling NMT will result in about 5-10% performance drop (<a href=\"https://docs.oracle.com/javase/8/docs/technotes/guides/troubleshoot/tooldescr007.html\" rel=\"nofollow noreferrer\">docs.oracle.com/javase/8/docs/technotes/guides/troubleshoot&zwnj;&#8203;/&hellip;</a>)  3. Are you passing the subproblems all at once to the Executor? Are you using a blocking task queue? Are you using a bounded task queue?"},{"owner":{"account_id":6398908,"reputation":3023,"user_id":4962355,"display_name":"Christoph John"},"score":0,"creation_date":1574374650,"post_id":58866021,"comment_id":104221714,"body_markdown":"4. I assume you retrieve the results of all the Callables that you submit? Or are you cancelling some of the Callables?   5. Are you heavily logging in your application so that I/O load might be slowing down the process?  Good luck ;)","body":"4. I assume you retrieve the results of all the Callables that you submit? Or are you cancelling some of the Callables?   5. Are you heavily logging in your application so that I/O load might be slowing down the process?  Good luck ;)"},{"owner":{"account_id":5786048,"reputation":1847,"user_id":4565235,"display_name":"David Lilljegren"},"score":0,"creation_date":1574443326,"post_id":58866021,"comment_id":104248256,"body_markdown":"Try this to see how many cores Java think it has   Runtime.getRuntime().availableProcessors();","body":"Try this to see how many cores Java think it has   Runtime.getRuntime().availableProcessors();"},{"owner":{"account_id":2988113,"reputation":838,"user_id":2536360,"display_name":"Nils"},"score":0,"creation_date":1574491850,"post_id":58866021,"comment_id":104259957,"body_markdown":"@ChristophJohn 1. The subproblems are not dereference but reused so GC really is not an issue; 2. Will look into this; 3. I am using a `BlockingQueue`; 4. I only use the callable to catch exceptions when a subproblem fails and do not cancel them, but runnables behave the same; 5. No. Thanks :)","body":"@ChristophJohn 1. The subproblems are not dereference but reused so GC really is not an issue; 2. Will look into this; 3. I am using a <code>BlockingQueue</code>; 4. I only use the callable to catch exceptions when a subproblem fails and do not cancel them, but runnables behave the same; 5. No. Thanks :)"},{"owner":{"account_id":2788462,"reputation":1275,"user_id":2399236,"accept_rate":80,"display_name":"barteks2x"},"score":0,"creation_date":1593263374,"post_id":58866021,"comment_id":110721156,"body_markdown":"I ran into what looks like a very much the same issue and no solution so far. I have a trivially parallelizable workload, I&#39;m submitting a lot of small tasks to an executor service (each taking milliseconds), with BlockingQueue in it so limit the amount of tasks submitted, CPU usage stuck at about 25% on windows, with a few orders of magnitudes slower processing (as much as 1000x slower on windows), with the vast majority of the work being spent in GZIP. I&#39;m going to be working on creating a small test case that reproduces it as the application is already fairly small. Any solutions?","body":"I ran into what looks like a very much the same issue and no solution so far. I have a trivially parallelizable workload, I&#39;m submitting a lot of small tasks to an executor service (each taking milliseconds), with BlockingQueue in it so limit the amount of tasks submitted, CPU usage stuck at about 25% on windows, with a few orders of magnitudes slower processing (as much as 1000x slower on windows), with the vast majority of the work being spent in GZIP. I&#39;m going to be working on creating a small test case that reproduces it as the application is already fairly small. Any solutions?"},{"owner":{"account_id":2988113,"reputation":838,"user_id":2536360,"display_name":"Nils"},"score":0,"creation_date":1593307695,"post_id":58866021,"comment_id":110733515,"body_markdown":"@barteks2x Difficult to say if it is really the same issue, because GZIP probably involves harddrive operations, which linux/win may handle differently. For my case, I guess that the issue is the high memory load that is happening off-heap, which slows down Java multithreading under Windows. I worked around that problem by decreasing the memory footprint.","body":"@barteks2x Difficult to say if it is really the same issue, because GZIP probably involves harddrive operations, which linux/win may handle differently. For my case, I guess that the issue is the high memory load that is happening off-heap, which slows down Java multithreading under Windows. I worked around that problem by decreasing the memory footprint."},{"owner":{"account_id":2788462,"reputation":1275,"user_id":2399236,"accept_rate":80,"display_name":"barteks2x"},"score":0,"creation_date":1593437860,"post_id":58866021,"comment_id":110773265,"body_markdown":"@Nils While I can&#39;t say for sure, I found 2 issues reported and marked as fixed forever ago https://bugs.java.com/bugdatabase/view_bug.do?bug_id=5043044 and https://bugs.java.com/bugdatabase/view_bug.do?bug_id=6206933 that may seem relevant. This is highly speculative, but the way array access through JNI is implemented may cause issues with multiple threads being involved. And to be clear about my case of GZIP - all IO is done separately and is not a bottleneck.","body":"@Nils While I can&#39;t say for sure, I found 2 issues reported and marked as fixed forever ago <a href=\"https://bugs.java.com/bugdatabase/view_bug.do?bug_id=5043044\" rel=\"nofollow noreferrer\">bugs.java.com/bugdatabase/view_bug.do?bug_id=5043044</a> and <a href=\"https://bugs.java.com/bugdatabase/view_bug.do?bug_id=6206933\" rel=\"nofollow noreferrer\">bugs.java.com/bugdatabase/view_bug.do?bug_id=6206933</a> that may seem relevant. This is highly speculative, but the way array access through JNI is implemented may cause issues with multiple threads being involved. And to be clear about my case of GZIP - all IO is done separately and is not a bottleneck."}],"answers":[{"tags":[],"owner":{"account_id":10354378,"reputation":632,"user_id":7636881,"display_name":"Sam Washington"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1574380340,"creation_date":1574380340,"answer_id":58985491,"question_id":58866021,"body_markdown":"Sounds like windows is caching some memory to pagefile, after its being untouched for some time, and thats why the CPU is bottlenecked by the Disk speed\r\n\r\nYou can verify it with Process explorer and check how much memory is cached","title":"Too Low CPU Usage of Multithreaded Java Application on Windows","body":"<p>Sounds like windows is caching some memory to pagefile, after its being untouched for some time, and thats why the CPU is bottlenecked by the Disk speed</p>\n\n<p>You can verify it with Process explorer and check how much memory is cached</p>\n"},{"tags":[],"owner":{"account_id":2725644,"reputation":4730,"user_id":2350799,"accept_rate":83,"display_name":"xcesco"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1574442362,"creation_date":1574442362,"answer_id":58998757,"question_id":58866021,"body_markdown":"I think this performance difference is due to how the O.S. manages the threads. JVM hide all OS difference. There are many sites where you can read about it, like [this][1], for example. But it does not mean that the difference disappears. \r\n\r\nI suppose you are running on Java 8+ JVM. Due to this fact, I suggest you to try to use stream and functional programming features. Functional programming is very usefully when you have many small independent problems and you want easily switch from sequential to parallel execution. The good news is that you don&#39;t have to define a policy to determine how many threads do you have to manage (like with the ExecutorService). Just for example (taken from [here][2]):\r\n\r\n```java\r\npackage com.mkyong.java8;\r\n\r\nimport java.util.ArrayList;\r\nimport java.util.List;\r\nimport java.util.stream.IntStream;\r\nimport java.util.stream.Stream;\r\n\r\npublic class ParallelExample4 {\r\n\r\n    public static void main(String[] args) {\r\n\r\n        long count = Stream.iterate(0, n -&gt; n + 1)\r\n                .limit(1_000_000)\r\n                //.parallel()   with this 23s, without this 1m 10s\r\n                .filter(ParallelExample4::isPrime)\r\n                .peek(x -&gt; System.out.format(&quot;%s\\t&quot;, x))\r\n                .count();\r\n\r\n        System.out.println(&quot;\\nTotal: &quot; + count);\r\n\r\n    }\r\n\r\n    public static boolean isPrime(int number) {\r\n        if (number &lt;= 1) return false;\r\n        return !IntStream.rangeClosed(2, number / 2).anyMatch(i -&gt; number % i == 0);\r\n    }\r\n\r\n}\r\n```\r\n\r\n&gt; Result:\r\n&gt; \r\n&gt; For normal streams, it takes 1 minute 10 seconds. For parallel\r\n&gt; streams, it takes 23 seconds. P.S Tested with i7-7700, 16G RAM,\r\n&gt; WIndows 10\r\n\r\nSo, I suggest you read about function programming, stream, lambda function in Java and try to implement a small number of test with your code (adapted to work in this new context).\r\n\r\n  [1]: https://forums.fedoraforum.org/showthread.php?206263-Java-Multi-threading-2x-faster-on-Linux-than-Windows-why\r\n  [2]: https://www.mkyong.com/java8/java-8-parallel-streams-examples/","title":"Too Low CPU Usage of Multithreaded Java Application on Windows","body":"<p>I think this performance difference is due to how the O.S. manages the threads. JVM hide all OS difference. There are many sites where you can read about it, like <a href=\"https://forums.fedoraforum.org/showthread.php?206263-Java-Multi-threading-2x-faster-on-Linux-than-Windows-why\" rel=\"nofollow noreferrer\">this</a>, for example. But it does not mean that the difference disappears. </p>\n\n<p>I suppose you are running on Java 8+ JVM. Due to this fact, I suggest you to try to use stream and functional programming features. Functional programming is very usefully when you have many small independent problems and you want easily switch from sequential to parallel execution. The good news is that you don't have to define a policy to determine how many threads do you have to manage (like with the ExecutorService). Just for example (taken from <a href=\"https://www.mkyong.com/java8/java-8-parallel-streams-examples/\" rel=\"nofollow noreferrer\">here</a>):</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>package com.mkyong.java8;\n\nimport java.util.ArrayList;\nimport java.util.List;\nimport java.util.stream.IntStream;\nimport java.util.stream.Stream;\n\npublic class ParallelExample4 {\n\n    public static void main(String[] args) {\n\n        long count = Stream.iterate(0, n -&gt; n + 1)\n                .limit(1_000_000)\n                //.parallel()   with this 23s, without this 1m 10s\n                .filter(ParallelExample4::isPrime)\n                .peek(x -&gt; System.out.format(\"%s\\t\", x))\n                .count();\n\n        System.out.println(\"\\nTotal: \" + count);\n\n    }\n\n    public static boolean isPrime(int number) {\n        if (number &lt;= 1) return false;\n        return !IntStream.rangeClosed(2, number / 2).anyMatch(i -&gt; number % i == 0);\n    }\n\n}\n</code></pre>\n\n<blockquote>\n  <p>Result:</p>\n  \n  <p>For normal streams, it takes 1 minute 10 seconds. For parallel\n  streams, it takes 23 seconds. P.S Tested with i7-7700, 16G RAM,\n  WIndows 10</p>\n</blockquote>\n\n<p>So, I suggest you read about function programming, stream, lambda function in Java and try to implement a small number of test with your code (adapted to work in this new context).</p>\n"},{"tags":[],"owner":{"account_id":5907672,"reputation":356,"user_id":4648862,"display_name":"geri"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1574526946,"creation_date":1574526946,"answer_id":59009815,"question_id":58866021,"body_markdown":"For Windows the number of threads per process is limited by the address space of the process (see also [Mark Russinovich - Pushing the Limits of Windows: Processes and Threads][1]). Think this causes side effects when it comes close to the limits (slow down of context switches, fragmentation...). For Windows I would try to divide the work load to a set of processes. For a similar issue that I had years ago I implemented a Java library to do this more conveniently (Java 8), have a look if you like: [Library to spawn tasks in an external process][2].\r\n\r\n\r\n  [1]: https://blogs.technet.microsoft.com/markrussinovich/2009/07/05/pushing-the-limits-of-windows-processes-and-threads/\r\n  [2]: https://github.com/gerixx/gfork","title":"Too Low CPU Usage of Multithreaded Java Application on Windows","body":"<p>For Windows the number of threads per process is limited by the address space of the process (see also <a href=\"https://blogs.technet.microsoft.com/markrussinovich/2009/07/05/pushing-the-limits-of-windows-processes-and-threads/\" rel=\"nofollow noreferrer\">Mark Russinovich - Pushing the Limits of Windows: Processes and Threads</a>). Think this causes side effects when it comes close to the limits (slow down of context switches, fragmentation...). For Windows I would try to divide the work load to a set of processes. For a similar issue that I had years ago I implemented a Java library to do this more conveniently (Java 8), have a look if you like: <a href=\"https://github.com/gerixx/gfork\" rel=\"nofollow noreferrer\">Library to spawn tasks in an external process</a>.</p>\n"},{"tags":[],"owner":{"account_id":7130892,"reputation":700,"user_id":5452170,"display_name":"Xiao-Feng Li"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1574535138,"creation_date":1574535138,"answer_id":59011045,"question_id":58866021,"body_markdown":"Would you please post the system statistics? Task manager is good enough to provide some clue if that is the only tool available. It can easily tell if your tasks are waiting for IO - which sounds like the culprit based on what you described. It may be due to certain memory management issue, or the library may write some temporary data to the disk, etc. \r\n\r\nWhen you are saying 25% of CPU utilization, do you mean only a few cores are busy working at the same time? (It can be that all the cores works from time to time, but not simultaneously.) Would you check how many threads (or processes) are really created in the system? Is the number always bigger than the number of cores? \r\n\r\nIf there are enough threads, are many of them idle waiting for something? If true, you can try to interrupt (or attach a debugger) to see what they are waiting for. ","title":"Too Low CPU Usage of Multithreaded Java Application on Windows","body":"<p>Would you please post the system statistics? Task manager is good enough to provide some clue if that is the only tool available. It can easily tell if your tasks are waiting for IO - which sounds like the culprit based on what you described. It may be due to certain memory management issue, or the library may write some temporary data to the disk, etc. </p>\n\n<p>When you are saying 25% of CPU utilization, do you mean only a few cores are busy working at the same time? (It can be that all the cores works from time to time, but not simultaneously.) Would you check how many threads (or processes) are really created in the system? Is the number always bigger than the number of cores? </p>\n\n<p>If there are enough threads, are many of them idle waiting for something? If true, you can try to interrupt (or attach a debugger) to see what they are waiting for. </p>\n"},{"tags":[],"owner":{"account_id":244340,"reputation":8860,"user_id":517073,"accept_rate":87,"display_name":"Stepan Yakovenko"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691601649,"creation_date":1691601649,"answer_id":76870003,"question_id":58866021,"body_markdown":"If you are endlessly starting and finishing new threads, this might be the reason. Reuse threads by means of pools, for example with FixedThreadPool:\r\n\r\n```\r\nExecutorService executorService = Executors.newFixedThreadPool(10);\r\nFuture&lt;String&gt; future = executorService.submit(() -&gt; &quot;Hello World&quot;);\r\n// some operations\r\nString result = future.get();\r\n```","title":"Too Low CPU Usage of Multithreaded Java Application on Windows","body":"<p>If you are endlessly starting and finishing new threads, this might be the reason. Reuse threads by means of pools, for example with FixedThreadPool:</p>\n<pre><code>ExecutorService executorService = Executors.newFixedThreadPool(10);\nFuture&lt;String&gt; future = executorService.submit(() -&gt; &quot;Hello World&quot;);\n// some operations\nString result = future.get();\n</code></pre>\n"}],"owner":{"account_id":2988113,"reputation":838,"user_id":2536360,"display_name":"Nils"},"comment_count":30,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":3727,"favorite_count":0,"down_vote_count":0,"up_vote_count":18,"answer_count":5,"score":18,"last_activity_date":1691601649,"creation_date":1573763353,"question_id":58866021,"body_markdown":"I am working on a Java application for solving a class of numerical optimization problems - large-scale linear programming problems to be more precise. A single problem can be split up into smaller subproblems that can solved in parallel. Since there are more subproblems than CPU cores, I use an ExecutorService and define each subproblem as a Callable that gets submitted to the ExecutorService. Solving a subproblem requires calling a native library - a linear programming solver in this case. \r\n\r\n**Problem**\r\n\r\nI can run the application on Unix and on Windows systems with up to 44 physical cores and up to 256g memory, but computation times on Windows are an order of magnitude higher than on Linux for large problems. Windows not only requires substantially more memory, but CPU utilization over time drops from 25% in the beginning to 5% after a few hours. Here is a screenshot of the task manager in Windows:\r\n\r\n[![Task Manager CPU utilization][1]][1]\r\n\r\n**Observations**\r\n\r\n- Solution times for large instances of the overall problem range from hours to days and consume up to 32g of memory (on Unix). Solution times for a subproblem are in the ms range.\r\n- I do not encounter this issue on small problems that take only a few minutes to solve.  \r\n- Linux uses both sockets out-of-the-box, whereas Windows requires me to explicitly activate memory interleaving in the BIOS so that the application utilizes both cores. Whether of not I do this has no effect on the deterioration of overall CPU utilization over time though.\r\n- When I look at the threads in VisualVM all pool threads are running, none are on wait or else.\r\n- According to VisualVM, 90% CPU time is spend on a native function call (solving a small linear program)\r\n- Garbage Collection is not an issue since the application does not create and de-reference a lot of objects. Also, most memory seems to be allocated off-heap. 4g of heap are sufficient on Linux and 8g on Windows for the largest instance.\r\n\r\n**What I&#39;ve tried**\r\n\r\n- all sorts of JVM args, high XMS, high metaspace, UseNUMA flag, other GCs. \r\n- different JVMs (Hotspot 8, 9, 10, 11). \r\n- different native libraries of different linear programming solvers (CLP, Xpress, Cplex, Gurobi). \r\n\r\n**Questions**\r\n\r\n- What drives the performance difference between Linux and Windows of a large multi-threaded Java application that makes heavy use of native calls?\r\n- Is there anything that I can change in the implementation that would help Windows, for example, should I avoid using an ExecutorService that receives thousands of Callables and do what instead?\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/CPT1m.png","title":"Too Low CPU Usage of Multithreaded Java Application on Windows","body":"<p>I am working on a Java application for solving a class of numerical optimization problems - large-scale linear programming problems to be more precise. A single problem can be split up into smaller subproblems that can solved in parallel. Since there are more subproblems than CPU cores, I use an ExecutorService and define each subproblem as a Callable that gets submitted to the ExecutorService. Solving a subproblem requires calling a native library - a linear programming solver in this case. </p>\n\n<p><strong>Problem</strong></p>\n\n<p>I can run the application on Unix and on Windows systems with up to 44 physical cores and up to 256g memory, but computation times on Windows are an order of magnitude higher than on Linux for large problems. Windows not only requires substantially more memory, but CPU utilization over time drops from 25% in the beginning to 5% after a few hours. Here is a screenshot of the task manager in Windows:</p>\n\n<p><a href=\"https://i.stack.imgur.com/CPT1m.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/CPT1m.png\" alt=\"Task Manager CPU utilization\"></a></p>\n\n<p><strong>Observations</strong></p>\n\n<ul>\n<li>Solution times for large instances of the overall problem range from hours to days and consume up to 32g of memory (on Unix). Solution times for a subproblem are in the ms range.</li>\n<li>I do not encounter this issue on small problems that take only a few minutes to solve.  </li>\n<li>Linux uses both sockets out-of-the-box, whereas Windows requires me to explicitly activate memory interleaving in the BIOS so that the application utilizes both cores. Whether of not I do this has no effect on the deterioration of overall CPU utilization over time though.</li>\n<li>When I look at the threads in VisualVM all pool threads are running, none are on wait or else.</li>\n<li>According to VisualVM, 90% CPU time is spend on a native function call (solving a small linear program)</li>\n<li>Garbage Collection is not an issue since the application does not create and de-reference a lot of objects. Also, most memory seems to be allocated off-heap. 4g of heap are sufficient on Linux and 8g on Windows for the largest instance.</li>\n</ul>\n\n<p><strong>What I've tried</strong></p>\n\n<ul>\n<li>all sorts of JVM args, high XMS, high metaspace, UseNUMA flag, other GCs. </li>\n<li>different JVMs (Hotspot 8, 9, 10, 11). </li>\n<li>different native libraries of different linear programming solvers (CLP, Xpress, Cplex, Gurobi). </li>\n</ul>\n\n<p><strong>Questions</strong></p>\n\n<ul>\n<li>What drives the performance difference between Linux and Windows of a large multi-threaded Java application that makes heavy use of native calls?</li>\n<li>Is there anything that I can change in the implementation that would help Windows, for example, should I avoid using an ExecutorService that receives thousands of Callables and do what instead?</li>\n</ul>\n"},{"tags":["java","spring-boot","unit-testing","controller-tests"],"comments":[{"owner":{"account_id":8556756,"reputation":595,"user_id":6412004,"display_name":"Regyn"},"score":1,"creation_date":1623968640,"post_id":62890075,"comment_id":120235974,"body_markdown":"I’m so surprised that there aren’t more people with this problem. MockBean is basically unusable with multiple Integration test classes.","body":"I’m so surprised that there aren’t more people with this problem. MockBean is basically unusable with multiple Integration test classes."}],"answers":[{"tags":[],"owner":{"account_id":7812117,"reputation":2519,"user_id":5908014,"display_name":"tpschmidt"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1594720045,"creation_date":1594718784,"answer_id":62891992,"question_id":62890075,"body_markdown":"It would be much easier and way faster to just use [MockMvc][1].\r\n\r\nYou can just create a standalone setup for your desired controller and do additional configuration (like setting exception resolvers). Also you&#39;re able to inject your mocks easily:\r\n\r\n    @Before\r\n    public void init() {\r\n      MyController myController = new MyController(mock1, mock2, ...);\r\n      MockMvc mockMvc = \r\n      MockMvcBuilders.standaloneSetup(myController)\r\n                     .setHandlerExceptionResolvers(...)\r\n                     .build();\r\n    }\r\n\r\nAfterwards you can easily call your endpoints:\r\n\r\n    MvcResult result = mockMvc.perform(\r\n                get(&quot;/someApi&quot;))\r\n                 .andExpect(status().isOk)\r\n                 .andReturn();\r\n\r\nAdditional validation on the response can be done like you already know it.\r\n\r\n**Edit**: As a side note - this is designed to explicitly test your web layer. If you want to go for some kind of integration test going further down in your application stack, also covering business logic, this is not the right approach.\r\n\r\n  [1]: https://spring.io/guides/gs/testing-web/","title":"@SpringBootTest: @MockBean not injected when multiple test classes","body":"<p>It would be much easier and way faster to just use <a href=\"https://spring.io/guides/gs/testing-web/\" rel=\"nofollow noreferrer\">MockMvc</a>.</p>\n<p>You can just create a standalone setup for your desired controller and do additional configuration (like setting exception resolvers). Also you're able to inject your mocks easily:</p>\n<pre><code>@Before\npublic void init() {\n  MyController myController = new MyController(mock1, mock2, ...);\n  MockMvc mockMvc = \n  MockMvcBuilders.standaloneSetup(myController)\n                 .setHandlerExceptionResolvers(...)\n                 .build();\n}\n</code></pre>\n<p>Afterwards you can easily call your endpoints:</p>\n<pre><code>MvcResult result = mockMvc.perform(\n            get(&quot;/someApi&quot;))\n             .andExpect(status().isOk)\n             .andReturn();\n</code></pre>\n<p>Additional validation on the response can be done like you already know it.</p>\n<p><strong>Edit</strong>: As a side note - this is designed to explicitly test your web layer. If you want to go for some kind of integration test going further down in your application stack, also covering business logic, this is not the right approach.</p>\n"},{"tags":[],"owner":{"account_id":2031794,"reputation":393,"user_id":1815284,"display_name":"ouid"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691601365,"creation_date":1691601365,"answer_id":76869979,"question_id":62890075,"body_markdown":"Since there was no answer given to &quot;Why is Spring not reloading the context with the mocks?&quot; question and I ran into it myself, here is my understanding of why it is the case.\r\n\r\nThe reason why Spring doesn&#39;t reload the context in case there are multiple tests using Spring&#39;s `ApplicationContext`, e.g., multiple `@SpringBootTest` tests is [Context Caching][1]:\r\n\r\n&gt; Once the TestContext framework loads an `ApplicationContext` (or `WebApplicationContext`) for a test, that context is cached and reused for all subsequent tests that declare the same unique context configuration within the same test suite.\r\n\r\n&gt; An `ApplicationContext` can be uniquely identified by the combination of configuration parameters that is used to load it. Consequently, the unique combination of configuration parameters is used to generate a key under which the context is cached.\r\n\r\nAnd in your case the key was the same for both cases. Therefore, even though `@MockBean protected FooService mockFooService` is correctly injected in `FooControllerTest`, it won&#39;t be injected in the controller under the test -  the controller will get an instance of `FooService` from the `ApplicationContext` of `PotatoControllerTest`, which will have an actual instance of the service injected.\r\n\r\n**Option 1**\r\n\r\nAs the documentation suggests, you can work around this behaviour by configuring different context keys for different test classes by either using different profiles or different `ContextConfiguration`s for different tests.\r\n\r\n```java\r\n@ContextConfiguration(classes = MockedServiceConfiguration.class)\r\nclass FooControllerTest {\r\n  @Autowired\r\n  FooService fooService; // this is a mocked bean that&#39;s injected in FooController and FooControllerTest\r\n}\r\n\r\n@TestConfiguration\r\nclass MockedServiceConfiguration {\r\n  @MockBean\r\n  FooService mockedService;\r\n}\r\n\r\n\r\n@ContextConfiguration(classes = OtherServiceConfiguration.class)\r\nclass BarControllerTest {\r\n  \r\n}\r\n\r\n\r\n@TestConfiguration\r\nclass OtherServiceConfiguration {\r\n  @Bean\r\n  public FooService getService() {\r\n   return new FooService(); // can probably also be @Autowired from the Spring context if it&#39;s declared as @Component or @Service\r\n  }\r\n}\r\n\r\n```\r\n\r\n**Option 2**\r\n\r\n\r\nIf you can get away with a mocked service in both tests, you can also avoid using `@MockBean` altogether and define a regular `@Bean` which is also a mock:\r\n\r\n```java\r\n@SpringBootTest(classes = FooTestConfiguration.class)\r\nclass FooControllerTest {\r\n  @Autowired\r\n  FooService fooService; // Mockito#verify should work as expected\r\n}\r\n\r\n@SpringBootTest(classes = FooTestConfiguration.class)\r\nclass BarControllerTest {\r\n\r\n}\r\n\r\n@TestConfiguration\r\nclass FooTestConfiguration {\r\n  @Bean\r\n  public FooService getService() {\r\n    return Mockito.mock(FooService.class);\r\n  }\r\n}\r\n\r\n```\r\n\r\n**Option 3**\r\n\r\nAnother alternative could be to use reflection to set `FooController`&#39;s `fooService` field to reference the mocked bean before executing the test, e.g., in `@BeforeAll` method.\r\n\r\n  [1]: https://docs.spring.io/spring-framework/reference/testing/testcontext-framework/ctx-management/caching.html","title":"@SpringBootTest: @MockBean not injected when multiple test classes","body":"<p>Since there was no answer given to &quot;Why is Spring not reloading the context with the mocks?&quot; question and I ran into it myself, here is my understanding of why it is the case.</p>\n<p>The reason why Spring doesn't reload the context in case there are multiple tests using Spring's <code>ApplicationContext</code>, e.g., multiple <code>@SpringBootTest</code> tests is <a href=\"https://docs.spring.io/spring-framework/reference/testing/testcontext-framework/ctx-management/caching.html\" rel=\"nofollow noreferrer\">Context Caching</a>:</p>\n<blockquote>\n<p>Once the TestContext framework loads an <code>ApplicationContext</code> (or <code>WebApplicationContext</code>) for a test, that context is cached and reused for all subsequent tests that declare the same unique context configuration within the same test suite.</p>\n</blockquote>\n<blockquote>\n<p>An <code>ApplicationContext</code> can be uniquely identified by the combination of configuration parameters that is used to load it. Consequently, the unique combination of configuration parameters is used to generate a key under which the context is cached.</p>\n</blockquote>\n<p>And in your case the key was the same for both cases. Therefore, even though <code>@MockBean protected FooService mockFooService</code> is correctly injected in <code>FooControllerTest</code>, it won't be injected in the controller under the test -  the controller will get an instance of <code>FooService</code> from the <code>ApplicationContext</code> of <code>PotatoControllerTest</code>, which will have an actual instance of the service injected.</p>\n<p><strong>Option 1</strong></p>\n<p>As the documentation suggests, you can work around this behaviour by configuring different context keys for different test classes by either using different profiles or different <code>ContextConfiguration</code>s for different tests.</p>\n<pre class=\"lang-java prettyprint-override\"><code>@ContextConfiguration(classes = MockedServiceConfiguration.class)\nclass FooControllerTest {\n  @Autowired\n  FooService fooService; // this is a mocked bean that's injected in FooController and FooControllerTest\n}\n\n@TestConfiguration\nclass MockedServiceConfiguration {\n  @MockBean\n  FooService mockedService;\n}\n\n\n@ContextConfiguration(classes = OtherServiceConfiguration.class)\nclass BarControllerTest {\n  \n}\n\n\n@TestConfiguration\nclass OtherServiceConfiguration {\n  @Bean\n  public FooService getService() {\n   return new FooService(); // can probably also be @Autowired from the Spring context if it's declared as @Component or @Service\n  }\n}\n\n</code></pre>\n<p><strong>Option 2</strong></p>\n<p>If you can get away with a mocked service in both tests, you can also avoid using <code>@MockBean</code> altogether and define a regular <code>@Bean</code> which is also a mock:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@SpringBootTest(classes = FooTestConfiguration.class)\nclass FooControllerTest {\n  @Autowired\n  FooService fooService; // Mockito#verify should work as expected\n}\n\n@SpringBootTest(classes = FooTestConfiguration.class)\nclass BarControllerTest {\n\n}\n\n@TestConfiguration\nclass FooTestConfiguration {\n  @Bean\n  public FooService getService() {\n    return Mockito.mock(FooService.class);\n  }\n}\n\n</code></pre>\n<p><strong>Option 3</strong></p>\n<p>Another alternative could be to use reflection to set <code>FooController</code>'s <code>fooService</code> field to reference the mocked bean before executing the test, e.g., in <code>@BeforeAll</code> method.</p>\n"}],"owner":{"account_id":1276474,"reputation":173,"user_id":1231624,"display_name":"Kyroy"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1814,"favorite_count":0,"down_vote_count":0,"up_vote_count":7,"accepted_answer_id":62891992,"answer_count":2,"score":7,"last_activity_date":1691601365,"creation_date":1594711729,"question_id":62890075,"body_markdown":"I want to write controller tests that also test my annotations. What I&#39;ve read so far is that RestAssured one of the ways to go.\r\n\r\nIt works smoothly when I only have one controller test in place. However, when having 2 or more controller test classes in place, the @MockBeans seem to not be used properly.\r\nDepending on the test execution order, all tests from the first test class succeed, and all others fail.\r\n\r\nIn the following test run, the PotatoControllerTest was executed first, and then the FooControllerTest.\r\n\r\n\r\n```java\r\n@ExtendWith(SpringExtension.class)\r\n@SpringBootTest(webEnvironment = SpringBootTest.WebEnvironment.RANDOM_PORT)\r\n@ActiveProfiles({&quot;test&quot;, &quot;httptest&quot;})\r\nclass FooControllerTest {\r\n\r\n    @MockBean\r\n    protected FooService mockFooService;\r\n\r\n    @MockBean\r\n    protected BarService mockBarService;\r\n\r\n    @LocalServerPort\r\n    protected int port;\r\n\r\n    @BeforeEach\r\n    public void setup() {\r\n        RestAssured.port = port;\r\n        RestAssured.authentication = basic(TestSecurityConfiguration.ADMIN_USERNAME, TestSecurityConfiguration.ADMIN_PASSWORD);\r\n        RestAssured.requestSpecification = new RequestSpecBuilder()\r\n                .setContentType(ContentType.JSON)\r\n                .setAccept(ContentType.JSON)\r\n                .build();\r\n    }\r\n\r\n    @SneakyThrows\r\n    @Test\r\n    void deleteFooNotExists() {\r\n        final Foo foo = TestUtils.generateTestFoo();\r\n        Mockito.doThrow(new DoesNotExistException(&quot;missing&quot;)).when(mockFooService).delete(foo.getId(), foo.getVersion());\r\n\r\n        RestAssured.given()\r\n                .when().delete(&quot;/v1/foo/{id}/{version}&quot;, foo.getId(), foo.getVersion())\r\n                .then()\r\n                .statusCode(HttpStatus.NOT_FOUND.value());\r\n        Mockito.verify(mockFooService, times(1)).delete(foo.getId(), foo.getVersion());\r\n    }\r\n\r\n...\r\n}\r\n```\r\n\r\n```java\r\n@ExtendWith(SpringExtension.class)\r\n@SpringBootTest(webEnvironment = SpringBootTest.WebEnvironment.RANDOM_PORT)\r\n@ActiveProfiles({&quot;test&quot;, &quot;httptest&quot;})\r\nclass PotatoControllerTest {\r\n\r\n    @MockBean\r\n    protected PotatoService mockPotatoService;\r\n\r\n    @LocalServerPort\r\n    protected int port;\r\n\r\n    @BeforeEach\r\n    public void setup() {\r\n        RestAssured.port = port;\r\n        RestAssured.authentication = basic(TestSecurityConfiguration.ADMIN_USERNAME, TestSecurityConfiguration.ADMIN_PASSWORD);\r\n        RestAssured.requestSpecification = new RequestSpecBuilder()\r\n                .setContentType(ContentType.JSON)\r\n                .setAccept(ContentType.JSON)\r\n                .build();\r\n    }\r\n\r\n...\r\n\r\n}\r\n```\r\n\r\n\r\n```\r\nWanted but not invoked:\r\nfooService bean.delete(\r\n    &quot;10e76ae4-ec1b-49ce-b162-8a5c587de2a8&quot;,\r\n    &quot;06db13f1-c4cd-435d-9693-b94c26503d40&quot;\r\n);\r\n-&gt; at com.xxx.service.FooService.delete(FooService.java:197)\r\nActually, there were zero interactions with this mock.\r\n```\r\n\r\nI tried to fix it with a common `ControllerTestBase` which configures all mocks and all other controller tests extending the base class. Which worked fine on my machine, but e.g. not in the pipeline. So I guess it is not really stable.\r\n\r\nWhy is Spring not reloading the context with the mocks? Is this the &quot;best&quot; way of testing my controllers?","title":"@SpringBootTest: @MockBean not injected when multiple test classes","body":"<p>I want to write controller tests that also test my annotations. What I've read so far is that RestAssured one of the ways to go.</p>\n<p>It works smoothly when I only have one controller test in place. However, when having 2 or more controller test classes in place, the @MockBeans seem to not be used properly.\nDepending on the test execution order, all tests from the first test class succeed, and all others fail.</p>\n<p>In the following test run, the PotatoControllerTest was executed first, and then the FooControllerTest.</p>\n<pre class=\"lang-java prettyprint-override\"><code>@ExtendWith(SpringExtension.class)\n@SpringBootTest(webEnvironment = SpringBootTest.WebEnvironment.RANDOM_PORT)\n@ActiveProfiles({&quot;test&quot;, &quot;httptest&quot;})\nclass FooControllerTest {\n\n    @MockBean\n    protected FooService mockFooService;\n\n    @MockBean\n    protected BarService mockBarService;\n\n    @LocalServerPort\n    protected int port;\n\n    @BeforeEach\n    public void setup() {\n        RestAssured.port = port;\n        RestAssured.authentication = basic(TestSecurityConfiguration.ADMIN_USERNAME, TestSecurityConfiguration.ADMIN_PASSWORD);\n        RestAssured.requestSpecification = new RequestSpecBuilder()\n                .setContentType(ContentType.JSON)\n                .setAccept(ContentType.JSON)\n                .build();\n    }\n\n    @SneakyThrows\n    @Test\n    void deleteFooNotExists() {\n        final Foo foo = TestUtils.generateTestFoo();\n        Mockito.doThrow(new DoesNotExistException(&quot;missing&quot;)).when(mockFooService).delete(foo.getId(), foo.getVersion());\n\n        RestAssured.given()\n                .when().delete(&quot;/v1/foo/{id}/{version}&quot;, foo.getId(), foo.getVersion())\n                .then()\n                .statusCode(HttpStatus.NOT_FOUND.value());\n        Mockito.verify(mockFooService, times(1)).delete(foo.getId(), foo.getVersion());\n    }\n\n...\n}\n</code></pre>\n<pre class=\"lang-java prettyprint-override\"><code>@ExtendWith(SpringExtension.class)\n@SpringBootTest(webEnvironment = SpringBootTest.WebEnvironment.RANDOM_PORT)\n@ActiveProfiles({&quot;test&quot;, &quot;httptest&quot;})\nclass PotatoControllerTest {\n\n    @MockBean\n    protected PotatoService mockPotatoService;\n\n    @LocalServerPort\n    protected int port;\n\n    @BeforeEach\n    public void setup() {\n        RestAssured.port = port;\n        RestAssured.authentication = basic(TestSecurityConfiguration.ADMIN_USERNAME, TestSecurityConfiguration.ADMIN_PASSWORD);\n        RestAssured.requestSpecification = new RequestSpecBuilder()\n                .setContentType(ContentType.JSON)\n                .setAccept(ContentType.JSON)\n                .build();\n    }\n\n...\n\n}\n</code></pre>\n<pre><code>Wanted but not invoked:\nfooService bean.delete(\n    &quot;10e76ae4-ec1b-49ce-b162-8a5c587de2a8&quot;,\n    &quot;06db13f1-c4cd-435d-9693-b94c26503d40&quot;\n);\n-&gt; at com.xxx.service.FooService.delete(FooService.java:197)\nActually, there were zero interactions with this mock.\n</code></pre>\n<p>I tried to fix it with a common <code>ControllerTestBase</code> which configures all mocks and all other controller tests extending the base class. Which worked fine on my machine, but e.g. not in the pipeline. So I guess it is not really stable.</p>\n<p>Why is Spring not reloading the context with the mocks? Is this the &quot;best&quot; way of testing my controllers?</p>\n"},{"tags":["java","dto","mapstruct"],"comments":[{"owner":{"account_id":1128956,"reputation":19765,"user_id":1115491,"display_name":"Filip"},"score":0,"creation_date":1507418175,"post_id":46598488,"comment_id":80202548,"body_markdown":"How does the generated code looks","body":"How does the generated code looks"},{"owner":{"account_id":7137920,"reputation":1714,"user_id":5456789,"display_name":"Amir Azizkhani"},"score":0,"creation_date":1650949774,"post_id":46598488,"comment_id":127238293,"body_markdown":"https://stackoverflow.com/a/59219506/5456789","body":"<a href=\"https://stackoverflow.com/a/59219506/5456789\">stackoverflow.com/a/59219506/5456789</a>"}],"answers":[{"tags":[],"owner":{"account_id":1876836,"reputation":4578,"user_id":1697885,"accept_rate":21,"display_name":"kinath_ru"},"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1534499078,"creation_date":1534499078,"answer_id":51892635,"question_id":46598488,"body_markdown":"You can do it like this. \r\n\r\n&lt;pre&gt;&lt;code&gt;\r\n@Mapper(componentModel = &quot;spring&quot;)    \r\npublic abstract class SampleMapper {\r\n        @Mappings({ \r\n            @Mapping(target = &quot;id&quot;, source = &quot;sno&quot;),\r\n            @Mapping(target = &quot;name&quot;, source = &quot;mNAme&quot;),\r\n\t\t\t@Mapping(target = &quot;actions&quot;, source = &quot;childSource&quot;)\r\n        })\r\n        public abstract TargetDTO toDto(Source source);\r\n\r\n        protected abstract List&lt;String&gt; mapStringtoList(List&lt;ChildSource&gt; childSource);\r\n\r\n\t\tprotected String mapChildSourceToString(ChildSource child) {\r\n            return child.getAction();\r\n        }\r\n    }\r\n&lt;/code&gt;&lt;/pre&gt;","title":"Mapping List&lt;String&gt; from List&lt;Object&gt; using mapstruct","body":"<p>You can do it like this. </p>\n\n<pre><code>\n@Mapper(componentModel = \"spring\")    \npublic abstract class SampleMapper {\n        @Mappings({ \n            @Mapping(target = \"id\", source = \"sno\"),\n            @Mapping(target = \"name\", source = \"mNAme\"),\n            @Mapping(target = \"actions\", source = \"childSource\")\n        })\n        public abstract TargetDTO toDto(Source source);\n\n        protected abstract List mapStringtoList(List childSource);\n\n        protected String mapChildSourceToString(ChildSource child) {\n            return child.getAction();\n        }\n    }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":20880550,"reputation":21,"user_id":15338392,"display_name":"osama mussawir"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1691600478,"creation_date":1614966211,"answer_id":66497201,"question_id":46598488,"body_markdown":"Using a default method to map the ChildSource to a String.\r\n\r\n    @Mapper(componentModel = &quot;spring&quot;)    \r\n    public abstract class SampleMapper {\r\n        @Mappings({ \r\n            @Mapping(target = &quot;id&quot;, source = &quot;sno&quot;),\r\n            @Mapping(target = &quot;name&quot;, source = &quot;mNAme&quot;),\r\n            @Mapping(target = &quot;actions&quot;, source = &quot;childSource&quot;)\r\n        })\r\n        public abstract TargetDTO toDto(Source source);\r\n        \r\n        default String mapChildSourceToString(ChildSource child) {\r\n            return child.getAction();\r\n        }\r\n    }","title":"Mapping List&lt;String&gt; from List&lt;Object&gt; using mapstruct","body":"<p>Using a default method to map the ChildSource to a String.</p>\n<pre><code>@Mapper(componentModel = &quot;spring&quot;)    \npublic abstract class SampleMapper {\n    @Mappings({ \n        @Mapping(target = &quot;id&quot;, source = &quot;sno&quot;),\n        @Mapping(target = &quot;name&quot;, source = &quot;mNAme&quot;),\n        @Mapping(target = &quot;actions&quot;, source = &quot;childSource&quot;)\n    })\n    public abstract TargetDTO toDto(Source source);\n    \n    default String mapChildSourceToString(ChildSource child) {\n        return child.getAction();\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":9715230,"reputation":191,"user_id":7205869,"display_name":"bhuvana"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":17681,"favorite_count":0,"down_vote_count":0,"up_vote_count":19,"answer_count":2,"score":19,"last_activity_date":1691600478,"creation_date":1507265587,"question_id":46598488,"body_markdown":"Hi I am getting null for List&lt;String&gt; action in DTO while setting it from the Child Source class using mapstruct. Could some help me in resolving this. Please find my code here\r\n\r\nEntity Class:\r\n\r\n    public class Source {\r\n        int id;\r\n        String name;\r\n        List&lt;ChildSource&gt; childSource;\r\n        //getters and setters\r\n    }\r\n\r\n    public class ChildSource {\r\n        String code;\r\n        String action;\r\n        //getters and setters   \r\n    }\r\n\r\nDestinationDTO:\r\n\r\n    public class TargetDTO{\r\n        int sNo;\r\n        String mName;\r\n        List&lt;String&gt; actions;\r\n        //getters and setters  \r\n    }\r\n\r\nMApper Class:\r\n\r\n    @Mapper(componentModel = &quot;spring&quot;)    \r\n    public abstract class SampleMapper {\r\n        \t@Mappings({ \r\n        \t\t@Mapping(target = &quot;id&quot;, source = &quot;sno&quot;),\r\n        \t\t@Mapping(target = &quot;name&quot;, source = &quot;mNAme&quot;)\r\n        \t})\r\n        \tpublic abstract TargetDTO toDto(Source source);\r\n        \r\n        \t@IterableMapping(elementTargetType = String.class)\r\n        \tprotected abstract List&lt;String&gt; mapStringtoList(List&lt;ChildSource&gt; childSource);\r\n        \r\n        \tprotected String mapChildSourceToString(ChildSource child) {\r\n        \t\treturn child.getAction();\r\n        \t}\r\n        }\r\n\r\nBut my action list is setting as null in the target dto. Could anyone help me here please?\r\n","title":"Mapping List&lt;String&gt; from List&lt;Object&gt; using mapstruct","body":"<p>Hi I am getting null for List action in DTO while setting it from the Child Source class using mapstruct. Could some help me in resolving this. Please find my code here</p>\n\n<p>Entity Class:</p>\n\n<pre><code>public class Source {\n    int id;\n    String name;\n    List&lt;ChildSource&gt; childSource;\n    //getters and setters\n}\n\npublic class ChildSource {\n    String code;\n    String action;\n    //getters and setters   \n}\n</code></pre>\n\n<p>DestinationDTO:</p>\n\n<pre><code>public class TargetDTO{\n    int sNo;\n    String mName;\n    List&lt;String&gt; actions;\n    //getters and setters  \n}\n</code></pre>\n\n<p>MApper Class:</p>\n\n<pre><code>@Mapper(componentModel = \"spring\")    \npublic abstract class SampleMapper {\n        @Mappings({ \n            @Mapping(target = \"id\", source = \"sno\"),\n            @Mapping(target = \"name\", source = \"mNAme\")\n        })\n        public abstract TargetDTO toDto(Source source);\n\n        @IterableMapping(elementTargetType = String.class)\n        protected abstract List&lt;String&gt; mapStringtoList(List&lt;ChildSource&gt; childSource);\n\n        protected String mapChildSourceToString(ChildSource child) {\n            return child.getAction();\n        }\n    }\n</code></pre>\n\n<p>But my action list is setting as null in the target dto. Could anyone help me here please?</p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":12583055,"reputation":447,"user_id":9732672,"display_name":"NomadMaker"},"score":0,"creation_date":1590704892,"post_id":62036280,"comment_id":109789916,"body_markdown":"Why do you want to restrict the line-end characters?","body":"Why do you want to restrict the line-end characters?"},{"owner":{"account_id":4508316,"reputation":391,"user_id":3665135,"display_name":"luoshao23"},"score":0,"creation_date":1590742795,"post_id":62036280,"comment_id":109801467,"body_markdown":"@NomadMaker Each line of the file is the query from one user. It is supposed to be treated as a whole while some users input invisible characters such as \\u2028.","body":"@NomadMaker Each line of the file is the query from one user. It is supposed to be treated as a whole while some users input invisible characters such as \\u2028."}],"answers":[{"tags":[],"owner":{"account_id":93689,"reputation":415931,"user_id":256196,"accept_rate":77,"display_name":"Bohemian"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1590702284,"creation_date":1590559091,"answer_id":62036383,"question_id":62036280,"body_markdown":"Scanner does not provide a way to override the pattern it uses for line endings.\r\n\r\nHowever, you can achieve somerhing similar like this:\r\n\r\n    String line = scanner.next(&quot;[\\R \\u2028\\u2029\\u0085]&quot;);\r\n\r\nand use `scanner.hasNext(&quot;[\\R\\u2028\\u2029\\u0085]&quot;)` instead of `scanner.hasNextLine()`.\r\n\r\nNote: `\\R` was introduced in version 8 and means any flavour of &quot;line end&quot; character sequence (ie `\\r\\n`, `\\n` or `\\r` which works for windows, *nix and mac)  ","title":"Java Scanner specify line separator","body":"<p>Scanner does not provide a way to override the pattern it uses for line endings.</p>\n\n<p>However, you can achieve somerhing similar like this:</p>\n\n<pre><code>String line = scanner.next(\"[\\R \\u2028\\u2029\\u0085]\");\n</code></pre>\n\n<p>and use <code>scanner.hasNext(\"[\\R\\u2028\\u2029\\u0085]\")</code> instead of <code>scanner.hasNextLine()</code>.</p>\n\n<p>Note: <code>\\R</code> was introduced in version 8 and means any flavour of \"line end\" character sequence (ie <code>\\r\\n</code>, <code>\\n</code> or <code>\\r</code> which works for windows, *nix and mac)  </p>\n"},{"tags":[],"owner":{"account_id":20068238,"reputation":33,"user_id":14713531,"display_name":"Kotbi Abderrahmane"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1691600120,"creation_date":1691581019,"answer_id":76867395,"question_id":62036280,"body_markdown":"I read @Bohemian answer and I believe that you can achieve this easily. Since java 8 you have the two functions `useDelimiter` and `delimiter`. These functions allow you to define your delimiter and check its value. In this case you want &#39;\\r&#39; or &#39;\\n&#39;, etc. Then you can use simply `hasNext` and `next` simply:\r\n\r\n```\r\nScanner sc = new Scanner(inputStream);\r\nsc.useDelimiter(&quot;\\n&quot;);\r\nwhile(sc.hasNext()) {\r\n    String line =  sc.next();\r\n}\r\n```\r\n\r\nThis code snippet logic rhymes well with the description given in the java 8 [Scanner documentation][1]:\r\n\r\n&gt; A Scanner breaks its input into tokens using a delimiter pattern, which by default matches whitespace. The resulting tokens may then be converted into values of different types using the various next methods. \r\n\r\n  [1]: https://docs.oracle.com/javase/8/docs/api/java/util/Scanner.html#Scanner-java.io.InputStream-java.lang.String-","title":"Java Scanner specify line separator","body":"<p>I read @Bohemian answer and I believe that you can achieve this easily. Since java 8 you have the two functions <code>useDelimiter</code> and <code>delimiter</code>. These functions allow you to define your delimiter and check its value. In this case you want '\\r' or '\\n', etc. Then you can use simply <code>hasNext</code> and <code>next</code> simply:</p>\n<pre><code>Scanner sc = new Scanner(inputStream);\nsc.useDelimiter(&quot;\\n&quot;);\nwhile(sc.hasNext()) {\n    String line =  sc.next();\n}\n</code></pre>\n<p>This code snippet logic rhymes well with the description given in the java 8 <a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/Scanner.html#Scanner-java.io.InputStream-java.lang.String-\" rel=\"nofollow noreferrer\">Scanner documentation</a>:</p>\n<blockquote>\n<p>A Scanner breaks its input into tokens using a delimiter pattern, which by default matches whitespace. The resulting tokens may then be converted into values of different types using the various next methods.</p>\n</blockquote>\n"}],"owner":{"account_id":4508316,"reputation":391,"user_id":3665135,"display_name":"luoshao23"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":575,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":62036383,"answer_count":2,"score":2,"last_activity_date":1691600120,"creation_date":1590558524,"question_id":62036280,"body_markdown":"I use ```Scanner``` class in Java for IO operation.\r\nI want to read every line in a file that ends with &quot;\\n\\r|[\\r\\n]&quot;, excluding other separator that may also stand for the line separator, such as &quot;[  \\u2028\\2029\\0085]&quot;.\r\nIf I use ```Scanner.nextLine()```, these unicode separators will be included unless I change the source code of the ```Scanner```.\r\nIf I use ```Scanner.next(&quot;some pattern&quot;)```, the empty line will be ignored which is not what I expect.\r\nIs there any proper way to do this? Thanks.\r\n","title":"Java Scanner specify line separator","body":"<p>I use <code>Scanner</code> class in Java for IO operation.\nI want to read every line in a file that ends with \"\\n\\r|[\\r\\n]\", excluding other separator that may also stand for the line separator, such as \"[  \\u2028\\2029\\0085]\".\nIf I use <code>Scanner.nextLine()</code>, these unicode separators will be included unless I change the source code of the <code>Scanner</code>.\nIf I use <code>Scanner.next(\"some pattern\")</code>, the empty line will be ignored which is not what I expect.\nIs there any proper way to do this? Thanks.</p>\n"},{"tags":["java","apache-kafka","apache-camel","spring-camel"],"comments":[{"owner":{"account_id":15611683,"reputation":69,"user_id":11262937,"display_name":"Jack Bourner"},"score":0,"creation_date":1692974685,"post_id":76869053,"comment_id":135702448,"body_markdown":"Looks like the issue could be related to spring transactions being used in one of the processes(Persisting to DB using  JPA). I suspect  the transactional nature of the flow  does not work  with the deadletterchannel. I have opted to handle the exception in the route itself as I only have one route. \nAlso, theres the TransactionErrorHandler, but  I couldn&#39;t get the deadletterqueue to work with this.","body":"Looks like the issue could be related to spring transactions being used in one of the processes(Persisting to DB using  JPA). I suspect  the transactional nature of the flow  does not work  with the deadletterchannel. I have opted to handle the exception in the route itself as I only have one route.  Also, theres the TransactionErrorHandler, but  I couldn&#39;t get the deadletterqueue to work with this."}],"owner":{"account_id":15611683,"reputation":69,"user_id":11262937,"display_name":"Jack Bourner"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":66,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":0,"score":2,"last_activity_date":1691599684,"creation_date":1691593453,"question_id":76869053,"body_markdown":"I am connecting to 12 kafka brokers (6 in each data center) \r\n\r\n - Kafka : Confluent 7.3.1\r\n - Java:11 \r\n - Camel: 3.16.0\r\n - Spring-boot: 2.7.13\r\n\r\n\r\n\r\n\r\n```\r\nauto.commit.interval.ms = 2000\r\nauto.offset.reset = latest\r\nconnections.max.idle.ms = 540000\r\nenable.auto.commit = true\r\nfetch.max.bytes = 52428800\r\nfetch.max.wait.ms = 500\r\nfetch.min.bytes = 1\r\nheartbeat.interval.ms = 3000\r\nmax.poll.interval.ms = 300000\r\nmax.poll.records = 10\r\nreconnect.backoff.max.ms = 1000\r\nreconnect.backoff.ms = 50\r\nrequest.timeout.ms = 40000\r\n```\r\nCamel setup \r\n``` lang-java\r\n@Autowire DeadLetterChannelBuilder deadLetterHandler;\r\n\r\n@Override\r\npublic void configure() {\r\n\r\n  errorHandler(deadLetterHandler);\r\n\r\n  from(ENDPOINT)\r\n      .routeId(Constants.ROUTE_NAME)\r\n      .process(entityMappingProcessor)\r\n      .log(&quot;Persisted message into database&quot;)\r\n}\r\n\r\n@Bean\r\npublic RedeliveryPolicy redeliveryPolicy() {\r\n  RedeliveryPolicy rp = new RedeliveryPolicy();\r\n  rp.setMaximumRedeliveries(0);\r\n  rp.setRedeliveryDelay(500);\r\n  rp.setRetryAttemptedLogLevel(LoggingLevel.ERROR);\r\n  return rp;\r\n}\r\n\r\n@Bean\r\npublic DeadLetterChannelBuilder bridgeDeadLetterHandler(RedeliveryPolicy redeliveryPolicy) {\r\n  DeadLetterChannelBuilder bridgeDeadLetterHandler = new DeadLetterChannelBuilder();\r\n  bridgeDeadLetterHandler.setDeadLetterUri(EXCEPTION_URI);\r\n  bridgeDeadLetterHandler.setUseOriginalMessage(true);\r\n  bridgeDeadLetterHandler.setRedeliveryPolicy(redeliveryPolicy);\r\n  return bridgeDeadLetterHandler;\r\n}\r\n\r\n@Override\r\npublic void configure() {\r\n  from(EXCEPTION_URI)\r\n      .routeId(&quot;rt.generic.exception.route&quot;)\r\n      .process(exceptionProcessor)\r\n      .to(DEAD_LETTER_QUEUE);\r\n}\r\n  \r\n```\r\n\r\nWhen conduction a DR test, where the brokers on 1 data center and shutdown, we are seeing the below logs. The consumer does not reconnect and either the other consumer gets assigned the partition or the same happens on the other consumer and no messages are consumed from then on (Until a service restart). \r\n```\r\n2023-08-08-15.18.48.348 [Camel (camel-1) thread #1 - KafkaConsumer[TOPIC-2]] ERROR org.apache.kafka.clients.consumer.internals.ConsumerCoordinator - handle - AL0812120F - [Consumer clientId=consumer-2, groupId=my-consumer-group] Offset commit failed on partition TOPIC-2-1 at offset 588742: The coordinator is not aware of this member.\r\n2023-08-08-15.18.48.348 [Camel (camel-1) thread #1 - KafkaConsumer[TOPIC-2]] WARN org.apache.camel.component.kafka.KafkaFetchRecords - startPolling - AL0812120230808T1ption org.apache.kafka.clients.consumer.CommitFailedException caught while polling TOPIC-2-Thread 0 from kafka topic TOPIC-2 at offset {TOPIC-2/1=588741}: Commity rebalanced and assigned the partitions to another member. This means that the time between subsequent calls to poll() was longer than the configured max.poll.interval.ms, which typically implies that the poll loop is spendddress this either by increasing max.poll.interval.ms or by reducing the maximum size of batches returned in poll() with max.poll.records.\r\n2023-08-08-15.18.48.348 [Camel (camel-1) thread #1 - KafkaConsumer[TOPIC-2]] WARN org.apache.camel.component.kafka.KafkaFetchRecords - handlePollErrorHandler - AL081210XF - Deferring processing to the exception handler based on polling exception strategy\r\n2023-08-08-15.18.48.348 [Camel (camel-1) thread #1 - KafkaConsumer[TOPIC-2]] ERROR org.apache.camel.processor.errorhandler.DeadLetterChannel - log - AL0812120230808T15d delivery for (MessageId: 41555711D74864E-000000000002364E on ExchangeId: 41555711D74864E-000000000002364E). On delivery attempt: 0 caught: org.apache.kafka.clients.consumer.CommitFailedException: Commit cannot be completedigned the partitions to another member. This means that the time between subsequent calls to poll() was longer than the configured max.poll.interval.ms, which typically implies that the poll loop is spending too much time mey increasing max.poll.interval.ms or by reducing the maximum size of batches returned in poll() with max.poll.records.\r\n2023-08-08-15.18.48.349 [Camel (camel-1) thread #1 - KafkaConsumer[TOPIC-2]] WARN org.apache.camel.impl.engine.DefaultReactiveExecutor - schedule - AL0812120230808T151executing reactive work due to null. This exception is ignored.\r\njava.lang.NullPointerException: null\r\n        at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleException(RedeliveryErrorHandler.java:489) ~[camel-core-processor-3.16.0.jar!/:3.16.0]\r\n        at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:461) ~[camel-core-processor-3.16.0.jar!/:3.16.0]\r\n        at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:193) ~[camel-base-engine-3.16.0.jar!/:3.16.0]\r\n        at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:64) ~[camel-base-engine-3.16.0.jar!/:3.16.0]\r\n        at org.apache.camel.processor.Pipeline.process(Pipeline.java:184) ~[camel-core-processor-3.16.0.jar!/:3.16.0]\r\n        at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:399) ~[camel-base-engine-3.16.0.jar!/:3.16.0]\r\n        at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:83) ~[camel-base-engine-3.16.0.jar!/:3.16.0]\r\n        at org.apache.camel.support.AsyncProcessorSupport.process(AsyncProcessorSupport.java:41) ~[camel-support-3.16.0.jar!/:3.16.0]\r\n        at org.apache.camel.support.BridgeExceptionHandlerToErrorHandler.handleException(BridgeExceptionHandlerToErrorHandler.java:79) ~[camel-support-3.16.0.jar!/:3.16.0]\r\n        at org.apache.camel.support.BridgeExceptionHandlerToErrorHandler.handleException(BridgeExceptionHandlerToErrorHandler.java:57) ~[camel-support-3.16.0.jar!/:3.16.0]\r\n        at org.apache.camel.support.BridgeExceptionHandlerToErrorHandler.handleException(BridgeExceptionHandlerToErrorHandler.java:52) ~[camel-support-3.16.0.jar!/:3.16.0]\r\n        at org.apache.camel.component.kafka.KafkaFetchRecords.handlePollErrorHandler(KafkaFetchRecords.java:399) ~[camel-kafka-3.16.0.jar!/:3.16.0]\r\n        at org.apache.camel.component.kafka.KafkaFetchRecords.handleAccordingToStrategy(KafkaFetchRecords.java:343) ~[camel-kafka-3.16.0.jar!/:3.16.0]\r\n        at org.apache.camel.component.kafka.KafkaFetchRecords.startPolling(KafkaFetchRecords.java:323) ~[camel-kafka-3.16.0.jar!/:3.16.0]\r\n        at org.apache.camel.component.kafka.KafkaFetchRecords.run(KafkaFetchRecords.java:181) ~[camel-kafka-3.16.0.jar!/:3.16.0]\r\n        at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:515) ~[?:?]\r\n        at java.util.concurrent.FutureTask.run(FutureTask.java:264) ~[?:?]\r\n        at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128) ~[?:?]\r\n        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628) ~[?:?]\r\n        at java.lang.Thread.run(Thread.java:866) ~[?:?]\r\n\r\n```\r\n\r\nIs the errorHandler causing the issue in how camel/ kafka handle the re-connection ? \r\nDo I need to remove the redelivery handler as this is confusing the flow? \r\nAny guidance would be helpful. \r\n \r\n","title":"Camel kafka - Consumer removed from consumer group during DR test","body":"<p>I am connecting to 12 kafka brokers (6 in each data center)</p>\n<ul>\n<li>Kafka : Confluent 7.3.1</li>\n<li>Java:11</li>\n<li>Camel: 3.16.0</li>\n<li>Spring-boot: 2.7.13</li>\n</ul>\n<pre><code>auto.commit.interval.ms = 2000\nauto.offset.reset = latest\nconnections.max.idle.ms = 540000\nenable.auto.commit = true\nfetch.max.bytes = 52428800\nfetch.max.wait.ms = 500\nfetch.min.bytes = 1\nheartbeat.interval.ms = 3000\nmax.poll.interval.ms = 300000\nmax.poll.records = 10\nreconnect.backoff.max.ms = 1000\nreconnect.backoff.ms = 50\nrequest.timeout.ms = 40000\n</code></pre>\n<p>Camel setup</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Autowire DeadLetterChannelBuilder deadLetterHandler;\n\n@Override\npublic void configure() {\n\n  errorHandler(deadLetterHandler);\n\n  from(ENDPOINT)\n      .routeId(Constants.ROUTE_NAME)\n      .process(entityMappingProcessor)\n      .log(&quot;Persisted message into database&quot;)\n}\n\n@Bean\npublic RedeliveryPolicy redeliveryPolicy() {\n  RedeliveryPolicy rp = new RedeliveryPolicy();\n  rp.setMaximumRedeliveries(0);\n  rp.setRedeliveryDelay(500);\n  rp.setRetryAttemptedLogLevel(LoggingLevel.ERROR);\n  return rp;\n}\n\n@Bean\npublic DeadLetterChannelBuilder bridgeDeadLetterHandler(RedeliveryPolicy redeliveryPolicy) {\n  DeadLetterChannelBuilder bridgeDeadLetterHandler = new DeadLetterChannelBuilder();\n  bridgeDeadLetterHandler.setDeadLetterUri(EXCEPTION_URI);\n  bridgeDeadLetterHandler.setUseOriginalMessage(true);\n  bridgeDeadLetterHandler.setRedeliveryPolicy(redeliveryPolicy);\n  return bridgeDeadLetterHandler;\n}\n\n@Override\npublic void configure() {\n  from(EXCEPTION_URI)\n      .routeId(&quot;rt.generic.exception.route&quot;)\n      .process(exceptionProcessor)\n      .to(DEAD_LETTER_QUEUE);\n}\n  \n</code></pre>\n<p>When conduction a DR test, where the brokers on 1 data center and shutdown, we are seeing the below logs. The consumer does not reconnect and either the other consumer gets assigned the partition or the same happens on the other consumer and no messages are consumed from then on (Until a service restart).</p>\n<pre><code>2023-08-08-15.18.48.348 [Camel (camel-1) thread #1 - KafkaConsumer[TOPIC-2]] ERROR org.apache.kafka.clients.consumer.internals.ConsumerCoordinator - handle - AL0812120F - [Consumer clientId=consumer-2, groupId=my-consumer-group] Offset commit failed on partition TOPIC-2-1 at offset 588742: The coordinator is not aware of this member.\n2023-08-08-15.18.48.348 [Camel (camel-1) thread #1 - KafkaConsumer[TOPIC-2]] WARN org.apache.camel.component.kafka.KafkaFetchRecords - startPolling - AL0812120230808T1ption org.apache.kafka.clients.consumer.CommitFailedException caught while polling TOPIC-2-Thread 0 from kafka topic TOPIC-2 at offset {TOPIC-2/1=588741}: Commity rebalanced and assigned the partitions to another member. This means that the time between subsequent calls to poll() was longer than the configured max.poll.interval.ms, which typically implies that the poll loop is spendddress this either by increasing max.poll.interval.ms or by reducing the maximum size of batches returned in poll() with max.poll.records.\n2023-08-08-15.18.48.348 [Camel (camel-1) thread #1 - KafkaConsumer[TOPIC-2]] WARN org.apache.camel.component.kafka.KafkaFetchRecords - handlePollErrorHandler - AL081210XF - Deferring processing to the exception handler based on polling exception strategy\n2023-08-08-15.18.48.348 [Camel (camel-1) thread #1 - KafkaConsumer[TOPIC-2]] ERROR org.apache.camel.processor.errorhandler.DeadLetterChannel - log - AL0812120230808T15d delivery for (MessageId: 41555711D74864E-000000000002364E on ExchangeId: 41555711D74864E-000000000002364E). On delivery attempt: 0 caught: org.apache.kafka.clients.consumer.CommitFailedException: Commit cannot be completedigned the partitions to another member. This means that the time between subsequent calls to poll() was longer than the configured max.poll.interval.ms, which typically implies that the poll loop is spending too much time mey increasing max.poll.interval.ms or by reducing the maximum size of batches returned in poll() with max.poll.records.\n2023-08-08-15.18.48.349 [Camel (camel-1) thread #1 - KafkaConsumer[TOPIC-2]] WARN org.apache.camel.impl.engine.DefaultReactiveExecutor - schedule - AL0812120230808T151executing reactive work due to null. This exception is ignored.\njava.lang.NullPointerException: null\n        at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.handleException(RedeliveryErrorHandler.java:489) ~[camel-core-processor-3.16.0.jar!/:3.16.0]\n        at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:461) ~[camel-core-processor-3.16.0.jar!/:3.16.0]\n        at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:193) ~[camel-base-engine-3.16.0.jar!/:3.16.0]\n        at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:64) ~[camel-base-engine-3.16.0.jar!/:3.16.0]\n        at org.apache.camel.processor.Pipeline.process(Pipeline.java:184) ~[camel-core-processor-3.16.0.jar!/:3.16.0]\n        at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:399) ~[camel-base-engine-3.16.0.jar!/:3.16.0]\n        at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:83) ~[camel-base-engine-3.16.0.jar!/:3.16.0]\n        at org.apache.camel.support.AsyncProcessorSupport.process(AsyncProcessorSupport.java:41) ~[camel-support-3.16.0.jar!/:3.16.0]\n        at org.apache.camel.support.BridgeExceptionHandlerToErrorHandler.handleException(BridgeExceptionHandlerToErrorHandler.java:79) ~[camel-support-3.16.0.jar!/:3.16.0]\n        at org.apache.camel.support.BridgeExceptionHandlerToErrorHandler.handleException(BridgeExceptionHandlerToErrorHandler.java:57) ~[camel-support-3.16.0.jar!/:3.16.0]\n        at org.apache.camel.support.BridgeExceptionHandlerToErrorHandler.handleException(BridgeExceptionHandlerToErrorHandler.java:52) ~[camel-support-3.16.0.jar!/:3.16.0]\n        at org.apache.camel.component.kafka.KafkaFetchRecords.handlePollErrorHandler(KafkaFetchRecords.java:399) ~[camel-kafka-3.16.0.jar!/:3.16.0]\n        at org.apache.camel.component.kafka.KafkaFetchRecords.handleAccordingToStrategy(KafkaFetchRecords.java:343) ~[camel-kafka-3.16.0.jar!/:3.16.0]\n        at org.apache.camel.component.kafka.KafkaFetchRecords.startPolling(KafkaFetchRecords.java:323) ~[camel-kafka-3.16.0.jar!/:3.16.0]\n        at org.apache.camel.component.kafka.KafkaFetchRecords.run(KafkaFetchRecords.java:181) ~[camel-kafka-3.16.0.jar!/:3.16.0]\n        at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:515) ~[?:?]\n        at java.util.concurrent.FutureTask.run(FutureTask.java:264) ~[?:?]\n        at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128) ~[?:?]\n        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628) ~[?:?]\n        at java.lang.Thread.run(Thread.java:866) ~[?:?]\n\n</code></pre>\n<p>Is the errorHandler causing the issue in how camel/ kafka handle the re-connection ?\nDo I need to remove the redelivery handler as this is confusing the flow?\nAny guidance would be helpful.</p>\n"},{"tags":["java","windows","tomcat","openssl","pfx"],"comments":[{"owner":{"account_id":301110,"reputation":98844,"user_id":608639,"accept_rate":64,"display_name":"jww"},"score":2,"creation_date":1510097582,"post_id":47158200,"comment_id":81288199,"body_markdown":"Stack Overflow is a site for programming and development questions. This question appears to be off-topic because it is not about programming or development. See [What topics can I ask about here](http://stackoverflow.com/help/on-topic) in the Help Center. Perhaps [Super User](http://superuser.com/) or [Unix &amp; Linux Stack Exchange](http://unix.stackexchange.com/) would be a better place to ask.","body":"Stack Overflow is a site for programming and development questions. This question appears to be off-topic because it is not about programming or development. See <a href=\"http://stackoverflow.com/help/on-topic\">What topics can I ask about here</a> in the Help Center. Perhaps <a href=\"http://superuser.com/\">Super User</a> or <a href=\"http://unix.stackexchange.com/\">Unix &amp; Linux Stack Exchange</a> would be a better place to ask."}],"answers":[{"tags":[],"owner":{"account_id":11968652,"reputation":404,"user_id":8757653,"display_name":"Nick Desai"},"down_vote_count":1,"up_vote_count":6,"is_accepted":false,"score":5,"last_activity_date":1533904407,"creation_date":1510554441,"answer_id":47258265,"question_id":47158200,"body_markdown":"Please convert the PFX file into a Tomcat compatible format . The command is given below\r\n\r\n[![enter image description here][1]][1]\r\n\r\n    Keytool -importkeystore -srckeystore server.pfx -srcstoretype pkcs12 -destkeystore tomcat.jks -deststoretype jks\r\n\r\nThe tomcat.jks file directives can be provided in the server.xml file of tomcat.\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/CPcWW.jpg","title":"Installing pfx SSL certificate in tomcat 8.5 on windows","body":"<p>Please convert the PFX file into a Tomcat compatible format . The command is given below</p>\n\n<p><a href=\"https://i.stack.imgur.com/CPcWW.jpg\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/CPcWW.jpg\" alt=\"enter image description here\"></a></p>\n\n<pre><code>Keytool -importkeystore -srckeystore server.pfx -srcstoretype pkcs12 -destkeystore tomcat.jks -deststoretype jks\n</code></pre>\n\n<p>The tomcat.jks file directives can be provided in the server.xml file of tomcat.</p>\n"},{"tags":[],"owner":{"account_id":238788,"reputation":1905,"user_id":507913,"accept_rate":83,"display_name":"Milind"},"down_vote_count":0,"up_vote_count":31,"is_accepted":true,"score":31,"last_activity_date":1691599651,"creation_date":1510557066,"answer_id":47258830,"question_id":47158200,"body_markdown":"I could do it successfully. As I have mentioned that my certificate was installed on IIS web server on windows with intermediate certificate. So I follow below steps\r\n\r\n **Step 1: Create a Microsoft Management Console (MMC) Snap-in for managing certificates** \r\n\r\n 1. Access the Search menu. In the search box, type **mmc** \r\n 2. From the **Microsoft Management Console (MMC)**, click  **File &gt; Add/Remove Snap-in**\r\n 3. From the list of snap-ins, select **Certificates** \r\n 4. Click **Add** \r\n 5. Select **Computer Account** \r\n 6. Click **Next** \r\n 7. Select **Local Computer** (the computer this console is running on) \r\n 8. Click **Finish** \r\n 9. In the Add/Remove Snap-in window, click **OK** \r\n 10. Save these console settings for future use\r\n\r\n**Step 2: Export/ Back Up the certificate**\r\n\r\n 1. Open the Certificates (Local Computer) snap-in you added &gt; select **Personal** &gt; **Certificates**\r\n\r\n 2. Right-click certificate name &gt; select **All Tasks** &gt; **Export**.\r\n\r\n 3. The Certificate Export Wizard opens &gt; click **Next**\r\n\r\n 4. Select **Yes, export the private key** &gt; click **Next**\r\n\r\n 5. Select **Personal Information Exchange**\r\n\r\n 6. Ensure to check only ***Include all certificates in the certificate path if possible*** &gt; click **Next**\r\n\r\n 7. Enter and confirm a password &gt; click **Next**\r\n\r\n 8. Choose a file name and location for the export file &gt; click **Next**\r\n\r\n 9. Click **Finish**\r\n\r\n**Step 3:  Configure PKCS12 (.pfx) file on Tomcat server**\r\n\r\n 1. Open %TOMCAT_HOME/conf/server.xml in XML or text editor\r\n\r\n 2. Find the following lines: (**In my case, I could not find below lines, So I directly jump to point 4 and add whole tag in my server.xml and change keystorefile and keystorePassword**)\r\n\r\n    `&lt;!--\r\n        &lt;Connector port=&quot;8443&quot; protocol=&quot;HTTP/1.1&quot; SSLEnabled=&quot;true&quot;\r\n        maxThreads=&quot;150&quot; scheme=&quot;https&quot; secure=&quot;true&quot;\r\n        clientAuth=&quot;false&quot; sslProtocol=&quot;TLS&quot; /&gt;\r\n        --&gt;`\r\n\r\n\r\n\r\n 3. Delete the comment markers at the beginning of the code (`&lt;!--`) and at the end of the code (`--&gt;`)\r\n 4. Immediately after sslProtocol=&quot;TLS&quot; and before /&gt;,  add the following attributes:    \r\n\r\n    `&lt;Connector port=&quot;8443&quot; protocol=&quot;HTTP/1.1&quot; SSLEnabled=&quot;true&quot;\r\n        maxThreads=&quot;150&quot; scheme=&quot;https&quot; secure=&quot;true&quot;\r\n        clientAuth=&quot;false&quot; sslProtocol=&quot;TLS&quot;\r\n        keystoreFile=&quot;/path/to/mycert.pfx&quot;\r\n        keystoreType=&quot;PKCS12&quot;\r\n        keystorePass=&quot;your_PKCS12_password&quot; /&gt;`\r\n\r\n 5. Save server.xml\r\n 6. Restart Tomcat\r\n \r\n\r\nHope it will help somebody :) \r\n","title":"Installing pfx SSL certificate in tomcat 8.5 on windows","body":"<p>I could do it successfully. As I have mentioned that my certificate was installed on IIS web server on windows with intermediate certificate. So I follow below steps</p>\n<p><strong>Step 1: Create a Microsoft Management Console (MMC) Snap-in for managing certificates</strong></p>\n<ol>\n<li>Access the Search menu. In the search box, type <strong>mmc</strong></li>\n<li>From the <strong>Microsoft Management Console (MMC)</strong>, click  <strong>File &gt; Add/Remove Snap-in</strong></li>\n<li>From the list of snap-ins, select <strong>Certificates</strong></li>\n<li>Click <strong>Add</strong></li>\n<li>Select <strong>Computer Account</strong></li>\n<li>Click <strong>Next</strong></li>\n<li>Select <strong>Local Computer</strong> (the computer this console is running on)</li>\n<li>Click <strong>Finish</strong></li>\n<li>In the Add/Remove Snap-in window, click <strong>OK</strong></li>\n<li>Save these console settings for future use</li>\n</ol>\n<p><strong>Step 2: Export/ Back Up the certificate</strong></p>\n<ol>\n<li><p>Open the Certificates (Local Computer) snap-in you added &gt; select <strong>Personal</strong> &gt; <strong>Certificates</strong></p>\n</li>\n<li><p>Right-click certificate name &gt; select <strong>All Tasks</strong> &gt; <strong>Export</strong>.</p>\n</li>\n<li><p>The Certificate Export Wizard opens &gt; click <strong>Next</strong></p>\n</li>\n<li><p>Select <strong>Yes, export the private key</strong> &gt; click <strong>Next</strong></p>\n</li>\n<li><p>Select <strong>Personal Information Exchange</strong></p>\n</li>\n<li><p>Ensure to check only <em><strong>Include all certificates in the certificate path if possible</strong></em> &gt; click <strong>Next</strong></p>\n</li>\n<li><p>Enter and confirm a password &gt; click <strong>Next</strong></p>\n</li>\n<li><p>Choose a file name and location for the export file &gt; click <strong>Next</strong></p>\n</li>\n<li><p>Click <strong>Finish</strong></p>\n</li>\n</ol>\n<p><strong>Step 3:  Configure PKCS12 (.pfx) file on Tomcat server</strong></p>\n<ol>\n<li><p>Open %TOMCAT_HOME/conf/server.xml in XML or text editor</p>\n</li>\n<li><p>Find the following lines: (<strong>In my case, I could not find below lines, So I directly jump to point 4 and add whole tag in my server.xml and change keystorefile and keystorePassword</strong>)</p>\n<p><code>&lt;!-- &lt;Connector port=&quot;8443&quot; protocol=&quot;HTTP/1.1&quot; SSLEnabled=&quot;true&quot; maxThreads=&quot;150&quot; scheme=&quot;https&quot; secure=&quot;true&quot; clientAuth=&quot;false&quot; sslProtocol=&quot;TLS&quot; /&gt; --&gt;</code></p>\n</li>\n<li><p>Delete the comment markers at the beginning of the code (<code>&lt;!--</code>) and at the end of the code (<code>--&gt;</code>)</p>\n</li>\n<li><p>Immediately after sslProtocol=&quot;TLS&quot; and before /&gt;,  add the following attributes:</p>\n<p><code>&lt;Connector port=&quot;8443&quot; protocol=&quot;HTTP/1.1&quot; SSLEnabled=&quot;true&quot; maxThreads=&quot;150&quot; scheme=&quot;https&quot; secure=&quot;true&quot; clientAuth=&quot;false&quot; sslProtocol=&quot;TLS&quot; keystoreFile=&quot;/path/to/mycert.pfx&quot; keystoreType=&quot;PKCS12&quot; keystorePass=&quot;your_PKCS12_password&quot; /&gt;</code></p>\n</li>\n<li><p>Save server.xml</p>\n</li>\n<li><p>Restart Tomcat</p>\n</li>\n</ol>\n<p>Hope it will help somebody :)</p>\n"}],"owner":{"account_id":238788,"reputation":1905,"user_id":507913,"accept_rate":83,"display_name":"Milind"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":44085,"favorite_count":0,"down_vote_count":0,"up_vote_count":10,"accepted_answer_id":47258830,"answer_count":2,"score":10,"last_activity_date":1691599651,"creation_date":1510058219,"question_id":47158200,"body_markdown":"I have wild card pfx certificate with its Intermediate certificate in p7b/crt format. Those certificate are installed on IIS 8.0. How to install those certificates in tomcat 8.0? Tomcat is installed on windows\r\n","title":"Installing pfx SSL certificate in tomcat 8.5 on windows","body":"<p>I have wild card pfx certificate with its Intermediate certificate in p7b/crt format. Those certificate are installed on IIS 8.0. How to install those certificates in tomcat 8.0? Tomcat is installed on windows</p>\n"},{"tags":["java","hashset"],"comments":[{"owner":{"account_id":200183,"reputation":6610,"user_id":445901,"accept_rate":80,"display_name":"SimonC"},"score":3,"creation_date":1384049876,"post_id":19885506,"comment_id":29581177,"body_markdown":"What have you tried so far?  Anything specific you are having trouble with?","body":"What have you tried so far?  Anything specific you are having trouble with?"}],"answers":[{"tags":[],"owner":{"account_id":3526709,"reputation":16307,"user_id":2947592,"accept_rate":71,"display_name":"wvdz"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1384049992,"creation_date":1384049992,"answer_id":19885535,"question_id":19885506,"body_markdown":"HashSet has the function contains() for this, since it implements the Collection interface.","title":"How can I use hash sets in java to determine if a string contains valid characters?","body":"<p>HashSet has the function contains() for this, since it implements the Collection interface.</p>\n"},{"tags":[],"owner":{"account_id":134022,"reputation":717183,"user_id":335858,"accept_rate":81,"display_name":"Sergey Kalinichenko"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1384050059,"creation_date":1384050059,"answer_id":19885540,"question_id":19885506,"body_markdown":"You cannot compare an entire string to a `HashSet&lt;Character&gt;`, but you can do it one character at a time:\r\n\r\n    HashSet&lt;Character&gt; valid = new HashSet&lt;Character&gt;();\r\n\tvalid.add(&#39;a&#39;);\r\n\tvalid.add(&#39;d&#39;);\r\n    valid.add(&#39;f&#39;);\r\n\tboolean allOk = true;\r\n\tfor (char c : &quot;fad&quot;.toCharArray()) {\r\n\t\tif (!valid.contains(c)) {\r\n\t\t\tallOk = false;\r\n\t\t\tbreak;\r\n\t\t}\r\n\t}\r\n\tSystem.out.println(allOk);\r\n\r\nHowever, this is not the most efficient way of doing it. A better approach would be to construct a regex with the characters that you need, and call `match()` on the string:\r\n\r\n    // Let&#39;s say x, y, and z are the valid characters\r\n    String regex = &quot;[xyz]*&quot;;\r\n    if (myString.matches(regex)) {\r\n        System.out.println(&quot;All characters in the string are in &#39;x&#39;, &#39;y&#39;, and &#39;z&#39;&quot;);\r\n    }","title":"How can I use hash sets in java to determine if a string contains valid characters?","body":"<p>You cannot compare an entire string to a <code>HashSet&lt;Character&gt;</code>, but you can do it one character at a time:</p>\n\n<pre><code>HashSet&lt;Character&gt; valid = new HashSet&lt;Character&gt;();\nvalid.add('a');\nvalid.add('d');\nvalid.add('f');\nboolean allOk = true;\nfor (char c : \"fad\".toCharArray()) {\n    if (!valid.contains(c)) {\n        allOk = false;\n        break;\n    }\n}\nSystem.out.println(allOk);\n</code></pre>\n\n<p>However, this is not the most efficient way of doing it. A better approach would be to construct a regex with the characters that you need, and call <code>match()</code> on the string:</p>\n\n<pre><code>// Let's say x, y, and z are the valid characters\nString regex = \"[xyz]*\";\nif (myString.matches(regex)) {\n    System.out.println(\"All characters in the string are in 'x', 'y', and 'z'\");\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":47283,"reputation":703817,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1691598562,"creation_date":1384050310,"answer_id":19885560,"question_id":19885506,"body_markdown":"I think you are probably over-thinking this problem.  (For instance, spending too much time thinking how to make the lexer &quot;efficient&quot; ...)\r\n\r\nThe conventional ways to test for valid / invalid characters in a lexer are:\r\n\r\n  - use a big switch statement, or \r\n\r\n  - perform a sequence of &quot;character class&quot; tests; e.g. using the result of `Character.getType(char)`\r\n\r\nOr better still, use a lexer generator.\r\n\r\n---------------\r\n\r\nUsing a HashSet is neither more efficient or more readable than a `switch`.  And the &quot;character class&quot; approach *could* be a lot more readable than both ... depending on your validation rules.","title":"How can I use hash sets in java to determine if a string contains valid characters?","body":"<p>I think you are probably over-thinking this problem.  (For instance, spending too much time thinking how to make the lexer &quot;efficient&quot; ...)</p>\n<p>The conventional ways to test for valid / invalid characters in a lexer are:</p>\n<ul>\n<li><p>use a big switch statement, or</p>\n</li>\n<li><p>perform a sequence of &quot;character class&quot; tests; e.g. using the result of <code>Character.getType(char)</code></p>\n</li>\n</ul>\n<p>Or better still, use a lexer generator.</p>\n<hr />\n<p>Using a HashSet is neither more efficient or more readable than a <code>switch</code>.  And the &quot;character class&quot; approach <em>could</em> be a lot more readable than both ... depending on your validation rules.</p>\n"}],"owner":{"account_id":3562874,"reputation":1,"user_id":2975289,"display_name":"user2975289"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":33296,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":3,"score":0,"last_activity_date":1691598562,"creation_date":1384049637,"question_id":19885506,"body_markdown":"I&#39;m writing a lexical analyzer and have never used hash sets. I want to take a string and make sure it&#39;s legal. I think I understand how to build the hash set with valid characters but I&#39;m not sure how to compare the string with teh hash set to ensure it contains valid characters. I can&#39;t find an example anywhere. Can someone point me to code that would do this?","title":"How can I use hash sets in java to determine if a string contains valid characters?","body":"<p>I'm writing a lexical analyzer and have never used hash sets. I want to take a string and make sure it's legal. I think I understand how to build the hash set with valid characters but I'm not sure how to compare the string with teh hash set to ensure it contains valid characters. I can't find an example anywhere. Can someone point me to code that would do this?</p>\n"},{"tags":["java","spring","mongodb","spring-boot"],"comments":[{"owner":{"account_id":3631143,"reputation":55363,"user_id":3027266,"accept_rate":75,"display_name":"Wernfried Domscheit"},"score":0,"creation_date":1691610249,"post_id":76867446,"comment_id":135516331,"body_markdown":"I have no clue about Docker, but I assume the user is created in database `documents` rather than `admin`. See https://stackoverflow.com/questions/63754742/authentication-failure-while-trying-to-save-to-mongodb/63755470#63755470","body":"I have no clue about Docker, but I assume the user is created in database <code>documents</code> rather than <code>admin</code>. See <a href=\"https://stackoverflow.com/questions/63754742/authentication-failure-while-trying-to-save-to-mongodb/63755470#63755470\" title=\"authentication failure while trying to save to mongodb\">stackoverflow.com/questions/63754742/&hellip;</a>"}],"answers":[{"tags":[],"owner":{"account_id":3388916,"reputation":1080,"user_id":7537885,"display_name":"Hermann Steidel"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1691588975,"creation_date":1691588975,"answer_id":76868418,"question_id":76867446,"body_markdown":"What could be happening here is that you could be facing a configuration mix up.\r\n\r\n 1. Either use all the properties separately and let Spring set things up for you.\r\n ```\r\nspring.data.mongodb.host=localhost\r\nspring.data.mongodb.port=27017\r\nspring.data.mongodb.database=documents\r\nspring.data.mongodb.username=root\r\nspring.data.mongodb.password=password\r\nspring.data.mongodb.authentication-database=admin\r\n```\r\n\r\nor\r\n\r\n 2. Just use the uri.\r\n\r\n```\r\nspring.data.mongodb.uri=mongodb://root:password@localhost:27017/documents?authSource=admin\r\n```\r\n\r\nAlso for good measure, you might want to also intialize your DB when you run the Docker instance.\r\n\r\n```\r\n-e MONGO_INITDB_DATABASE=documents\r\n```\r\n","title":"Error authentication to MongoDB - Exception authenticating MongoCredential","body":"<p>What could be happening here is that you could be facing a configuration mix up.</p>\n<ol>\n<li>Either use all the properties separately and let Spring set things up for you.</li>\n</ol>\n<pre><code>spring.data.mongodb.host=localhost\nspring.data.mongodb.port=27017\nspring.data.mongodb.database=documents\nspring.data.mongodb.username=root\nspring.data.mongodb.password=password\nspring.data.mongodb.authentication-database=admin\n</code></pre>\n<p>or</p>\n<ol start=\"2\">\n<li>Just use the uri.</li>\n</ol>\n<pre><code>spring.data.mongodb.uri=mongodb://root:password@localhost:27017/documents?authSource=admin\n</code></pre>\n<p>Also for good measure, you might want to also intialize your DB when you run the Docker instance.</p>\n<pre><code>-e MONGO_INITDB_DATABASE=documents\n</code></pre>\n"}],"owner":{"account_id":16780485,"reputation":453,"user_id":12130813,"display_name":"arevilla009"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":129,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76868418,"answer_count":1,"score":0,"last_activity_date":1691598497,"creation_date":1691581381,"question_id":76867446,"body_markdown":"Just working locally on a Windows machine, with a Java Spring Boot 3.1.0 app and a latest mongo db version, and getting failure when connecting the app with database.\r\n\r\nThe db is deployed locally with the next docker command:\r\n```\r\ndocker run -d -p 27017:27017 --name mongo-db -e MONGO_INITDB_ROOT_USERNAME=adrian -e MONGO_INITDB_ROOT_PASSWORD=password -e MONGO_INITDB_DATABASE=documents mongo:latest\r\n```\r\nAnd the app has next connection properties to the database:\r\n```\r\nspring.data.mongodb.host=localhost\r\nspring.data.mongodb.port=27017\r\nspring.data.mongodb.database=documents\r\nspring.data.mongodb.username=adrian\r\nspring.data.mongodb.password=password\r\nspring.data.mongodb.authentication-database=admin\r\n```\r\nOr using uri:\r\n```\r\nspring.data.mongodb.uri=mongodb://adrian:password@localhost:27017/documents?authSource=admin\r\n```\r\nWhen any operation is performed through the database, this next error is printed:\r\n```\r\norg.springframework.data.mongodb.UncategorizedMongoDbException: Exception authenticating MongoCredential{mechanism=SCRAM-SHA-1, userName=&#39;adrian&#39;, source=&#39;documents&#39;, password=&lt;hidden&gt;, mechanismProperties=&lt;hidden&gt;}\r\n```\r\n\r\nAlso tried to create database manually after running the container, and then initializing the app, but the problem persists:\r\n```\r\ndocker exec -it dd1b012c0e1a /bin/bash\r\nuse admin\r\ndb.auth(&#39;adrian&#39;, &#39;password&#39;)\r\nuse documents\r\n```\r\nAnyone knows, which is the source of the problem?","title":"Error authentication to MongoDB - Exception authenticating MongoCredential","body":"<p>Just working locally on a Windows machine, with a Java Spring Boot 3.1.0 app and a latest mongo db version, and getting failure when connecting the app with database.</p>\n<p>The db is deployed locally with the next docker command:</p>\n<pre><code>docker run -d -p 27017:27017 --name mongo-db -e MONGO_INITDB_ROOT_USERNAME=adrian -e MONGO_INITDB_ROOT_PASSWORD=password -e MONGO_INITDB_DATABASE=documents mongo:latest\n</code></pre>\n<p>And the app has next connection properties to the database:</p>\n<pre><code>spring.data.mongodb.host=localhost\nspring.data.mongodb.port=27017\nspring.data.mongodb.database=documents\nspring.data.mongodb.username=adrian\nspring.data.mongodb.password=password\nspring.data.mongodb.authentication-database=admin\n</code></pre>\n<p>Or using uri:</p>\n<pre><code>spring.data.mongodb.uri=mongodb://adrian:password@localhost:27017/documents?authSource=admin\n</code></pre>\n<p>When any operation is performed through the database, this next error is printed:</p>\n<pre><code>org.springframework.data.mongodb.UncategorizedMongoDbException: Exception authenticating MongoCredential{mechanism=SCRAM-SHA-1, userName='adrian', source='documents', password=&lt;hidden&gt;, mechanismProperties=&lt;hidden&gt;}\n</code></pre>\n<p>Also tried to create database manually after running the container, and then initializing the app, but the problem persists:</p>\n<pre><code>docker exec -it dd1b012c0e1a /bin/bash\nuse admin\ndb.auth('adrian', 'password')\nuse documents\n</code></pre>\n<p>Anyone knows, which is the source of the problem?</p>\n"},{"tags":["java","spring-boot","github","camunda","tasklist"],"answers":[{"tags":[],"owner":{"account_id":1612994,"reputation":7243,"user_id":1491439,"display_name":"rob2universe"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1682652409,"creation_date":1682652409,"answer_id":76126067,"question_id":76109610,"body_markdown":"Have you checked if the versions of the client library and the servers side API match? It looks like the client lib is including processDefinitionId, but the the Taskquery API does not contain it.\r\n\r\nVersion 8.1 an 8.2 contains processDefinitionId:\r\n\r\n    input TaskQuery {\r\n      state: TaskState\r\n      assigned: Boolean\r\n      assignee: String\r\n      candidateGroup: String\r\n      candidateUser: String\r\n      processDefinitionId: String\r\n      processInstanceId: String\r\n      followUpDate: DateFilter\r\n      dueDate: DateFilter\r\n      pageSize: Int\r\n      taskDefinitionId: String\r\n      searchAfter: [String!]\r\n      searchAfterOrEqual: [String!]\r\n      searchBefore: [String!]\r\n      searchBeforeOrEqual: [String!]\r\n      sort: [TaskOrderBy]\r\n    }\r\n\r\nhttps://docs.camunda.io/docs/apis-tools/tasklist-api/inputs/task-query/\r\n\r\nVersion 8.0 does not contain it:\r\n\r\n    type TaskQuery {\r\n      state: TaskState\r\n      assigned: Boolean\r\n      assignee: String\r\n      candidateGroup: String\r\n      pageSize: Int\r\n      taskDefinitionId: String\r\n      searchAfter: [String!]\r\n      searchAfterOrEqual: [String!]\r\n      searchBefore: [String!]\r\n      searchBeforeOrEqual: [String!]\r\n    }\r\n\r\nhttps://docs.camunda.io/docs/8.0/apis-tools/tasklist-api/inputs/task-query/\r\n\r\n\r\n=&gt; Upgrade your server side and try again","title":"How to get tasks from process instance id using camundatasklistclient api in java camunda 8","body":"<p>Have you checked if the versions of the client library and the servers side API match? It looks like the client lib is including processDefinitionId, but the the Taskquery API does not contain it.</p>\n<p>Version 8.1 an 8.2 contains processDefinitionId:</p>\n<pre><code>input TaskQuery {\n  state: TaskState\n  assigned: Boolean\n  assignee: String\n  candidateGroup: String\n  candidateUser: String\n  processDefinitionId: String\n  processInstanceId: String\n  followUpDate: DateFilter\n  dueDate: DateFilter\n  pageSize: Int\n  taskDefinitionId: String\n  searchAfter: [String!]\n  searchAfterOrEqual: [String!]\n  searchBefore: [String!]\n  searchBeforeOrEqual: [String!]\n  sort: [TaskOrderBy]\n}\n</code></pre>\n<p><a href=\"https://docs.camunda.io/docs/apis-tools/tasklist-api/inputs/task-query/\" rel=\"nofollow noreferrer\">https://docs.camunda.io/docs/apis-tools/tasklist-api/inputs/task-query/</a></p>\n<p>Version 8.0 does not contain it:</p>\n<pre><code>type TaskQuery {\n  state: TaskState\n  assigned: Boolean\n  assignee: String\n  candidateGroup: String\n  pageSize: Int\n  taskDefinitionId: String\n  searchAfter: [String!]\n  searchAfterOrEqual: [String!]\n  searchBefore: [String!]\n  searchBeforeOrEqual: [String!]\n}\n</code></pre>\n<p><a href=\"https://docs.camunda.io/docs/8.0/apis-tools/tasklist-api/inputs/task-query/\" rel=\"nofollow noreferrer\">https://docs.camunda.io/docs/8.0/apis-tools/tasklist-api/inputs/task-query/</a></p>\n<p>=&gt; Upgrade your server side and try again</p>\n"},{"tags":[],"owner":{"account_id":8993036,"reputation":17,"user_id":6704334,"display_name":"Abdul Renish"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1691596699,"creation_date":1691596699,"answer_id":76869466,"question_id":76109610,"body_markdown":"The Camunda 8 Tasklist client API seems to be encountering issues without a viable resolution from the Camunda team. In lieu of a functional fix, the suggested approach is to manually obtain a token using HTTP, followed by retrieving a session ID, and consequently employing the REST API for desired operations. This alternate method involves obtaining authentication through token-based processes and utilizing the REST API to facilitate the required functionalities.","title":"How to get tasks from process instance id using camundatasklistclient api in java camunda 8","body":"<p>The Camunda 8 Tasklist client API seems to be encountering issues without a viable resolution from the Camunda team. In lieu of a functional fix, the suggested approach is to manually obtain a token using HTTP, followed by retrieving a session ID, and consequently employing the REST API for desired operations. This alternate method involves obtaining authentication through token-based processes and utilizing the REST API to facilitate the required functionalities.</p>\n"}],"owner":{"account_id":18258323,"reputation":109,"user_id":13291702,"display_name":"Neha"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":699,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1691596699,"creation_date":1682504154,"question_id":76109610,"body_markdown":"*I am using camunda 8 and refering below link for getting task from processinstance id*\r\nhttps://github.com/camunda-community-hub/camunda-tasklist-client-java\r\n\r\nI have added the dependency mentioned in link.\r\nMy simpleauthentication is also done.\r\nCamundatasklistclient object is also initialised.\r\nBut when running below step it shows error :\r\nimpleAuthentication sa = new SimpleAuthentication(&quot;demo&quot;, &quot;demo&quot;);\r\n\r\n//shouldReturnVariables will change the default behaviour for the client to query variables along with tasks.\r\n\r\n    CamundaTaskListClient client = new CamundaTaskListClient.Builder().taskListUrl(&quot;http://localhost:8081&quot;).shouldReturnVariables().authentication(sa).build();\r\n    //get tasks from a process instance (TaskSearch can take many more parameters)\r\n    TaskSearch ts = new TaskSearch().setProcessInstanceId(&quot;2251799818839086&quot;);\r\n    TaskList tasksFromInstance = client.getTasks(ts); // this statement gives error at runtime \r\n\r\nError : \r\nio.camunda.tasklist.exception.TaskListException:Error(message=Validation error of type wrongtype argument query with value &#39;ObjectValue{objectfields{objectfields=candidategroup, assignee, assigned,state,processDefinitionId,processInstanceId,pagesize,search after,search before,contains a filed not in Taskquery : processDefinitionId @ tasks \r\n\r\nHow to resolve this error ? \r\n\r\n\r\n","title":"How to get tasks from process instance id using camundatasklistclient api in java camunda 8","body":"<p><em>I am using camunda 8 and refering below link for getting task from processinstance id</em>\n<a href=\"https://github.com/camunda-community-hub/camunda-tasklist-client-java\" rel=\"nofollow noreferrer\">https://github.com/camunda-community-hub/camunda-tasklist-client-java</a></p>\n<p>I have added the dependency mentioned in link.\nMy simpleauthentication is also done.\nCamundatasklistclient object is also initialised.\nBut when running below step it shows error :\nimpleAuthentication sa = new SimpleAuthentication(&quot;demo&quot;, &quot;demo&quot;);</p>\n<p>//shouldReturnVariables will change the default behaviour for the client to query variables along with tasks.</p>\n<pre><code>CamundaTaskListClient client = new CamundaTaskListClient.Builder().taskListUrl(&quot;http://localhost:8081&quot;).shouldReturnVariables().authentication(sa).build();\n//get tasks from a process instance (TaskSearch can take many more parameters)\nTaskSearch ts = new TaskSearch().setProcessInstanceId(&quot;2251799818839086&quot;);\nTaskList tasksFromInstance = client.getTasks(ts); // this statement gives error at runtime \n</code></pre>\n<p>Error :\nio.camunda.tasklist.exception.TaskListException:Error(message=Validation error of type wrongtype argument query with value 'ObjectValue{objectfields{objectfields=candidategroup, assignee, assigned,state,processDefinitionId,processInstanceId,pagesize,search after,search before,contains a filed not in Taskquery : processDefinitionId @ tasks</p>\n<p>How to resolve this error ?</p>\n"},{"tags":["java","time","datetime-format","tai-time"],"comments":[{"owner":{"account_id":11683,"reputation":1438169,"user_id":22656,"accept_rate":86,"display_name":"Jon Skeet"},"score":1,"creation_date":1691594320,"post_id":76869094,"comment_id":135513384,"body_markdown":"Parse them as if they&#39;re UTC, then add the appropriate number of seconds based on the date? (Presumably as these are TAI values, you don&#39;t need to worry about them ever representing leap seconds themselves.)","body":"Parse them as if they&#39;re UTC, then add the appropriate number of seconds based on the date? (Presumably as these are TAI values, you don&#39;t need to worry about them ever representing leap seconds themselves.)"},{"owner":{"account_id":322981,"reputation":310745,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"score":0,"creation_date":1691596883,"post_id":76869094,"comment_id":135513991,"body_markdown":"How do the [`convert…`](https://www.threeten.org/threeten-extra/apidocs/org.threeten.extra/org/threeten/extra/scale/UtcRules.html) methods in *ThreeTen-Extra* not accomplish your goal?","body":"How do the <a href=\"https://www.threeten.org/threeten-extra/apidocs/org.threeten.extra/org/threeten/extra/scale/UtcRules.html\" rel=\"nofollow noreferrer\"><code>convert…</code></a> methods in <i>ThreeTen-Extra</i> not accomplish your goal?"},{"owner":{"account_id":322981,"reputation":310745,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"score":1,"creation_date":1691597049,"post_id":76869094,"comment_id":135514036,"body_markdown":"@JonSkeet At first glance, it seems the [`convert…`](https://www.threeten.org/threeten-extra/apidocs/org.threeten.extra/org/threeten/extra/scale/UtcRules.html)  methods in *ThreeTen-Extra* do just that, using the leap second count in effect at the moment of interest.","body":"@JonSkeet At first glance, it seems the <a href=\"https://www.threeten.org/threeten-extra/apidocs/org.threeten.extra/org/threeten/extra/scale/UtcRules.html\" rel=\"nofollow noreferrer\"><code>convert…</code></a>  methods in <i>ThreeTen-Extra</i> do just that, using the leap second count in effect at the moment of interest."},{"owner":{"account_id":29192698,"reputation":11,"user_id":22364506,"display_name":"gumitmu"},"score":0,"creation_date":1691653818,"post_id":76869094,"comment_id":135521310,"body_markdown":"The conversion methods would work, if I were able to get a TAI Instant with the correct date and time. The problem is, that the creation of the TAI Instant needs a different input format, and the creation of a UTC Instant with the same input would falsify the time, since the leap second difference would be ignored. But I guess I could use the getLeapSecondsAdjustment method  to get the leap seconds to add as JonSkeet suggested.  Thank you all for helping.","body":"The conversion methods would work, if I were able to get a TAI Instant with the correct date and time. The problem is, that the creation of the TAI Instant needs a different input format, and the creation of a UTC Instant with the same input would falsify the time, since the leap second difference would be ignored. But I guess I could use the getLeapSecondsAdjustment method  to get the leap seconds to add as JonSkeet suggested.  Thank you all for helping."},{"owner":{"account_id":29192698,"reputation":11,"user_id":22364506,"display_name":"gumitmu"},"score":0,"creation_date":1691656422,"post_id":76869094,"comment_id":135521810,"body_markdown":"Didn&#39;t use the getLeapSecondAdjustment but getTaiOffset method.","body":"Didn&#39;t use the getLeapSecondAdjustment but getTaiOffset method."},{"owner":{"account_id":7612423,"reputation":82486,"user_id":5772882,"display_name":"Anonymous"},"score":0,"creation_date":1691662606,"post_id":76869094,"comment_id":135523016,"body_markdown":"Does this work using Three-Ten Extra? (1) Define the TAI epoch as `TaiInstant taiEpoch = TaiInstant.ofTaiSeconds(0, 0);`. (2) Calculate the duration since the TAI apoch on the local time line since it hasn’t got leap seconds either. (2.a) `LocalDateTime taiEpochLocal = taiEpoch.toInstant().atOffset(ZoneOffset.UTC).toLocalDateTime();` (2.b) `Duration durSinceTaiEpoch = Duration.between(taiEpochLocal, LocalDateTime.parse(&quot;2016-01-01T12:00:00.0&quot;));`. (3) Add the duration to the epoch: `TaiInstant taiTimestamp = taiEpoch.plus(durSinceTaiEpoch);`.","body":"Does this work using Three-Ten Extra? (1) Define the TAI epoch as <code>TaiInstant taiEpoch = TaiInstant.ofTaiSeconds(0, 0);</code>. (2) Calculate the duration since the TAI apoch on the local time line since it hasn’t got leap seconds either. (2.a) <code>LocalDateTime taiEpochLocal = taiEpoch.toInstant().atOffset(ZoneOffset.UTC).toLocalDateTim&zwnj;&#8203;e();</code> (2.b) <code>Duration durSinceTaiEpoch = Duration.between(taiEpochLocal, LocalDateTime.parse(&quot;2016-01-01T12:00:00.0&quot;));</code>. (3) Add the duration to the epoch: <code>TaiInstant taiTimestamp = taiEpoch.plus(durSinceTaiEpoch);</code>."},{"owner":{"account_id":7612423,"reputation":82486,"user_id":5772882,"display_name":"Anonymous"},"score":0,"creation_date":1691662713,"post_id":76869094,"comment_id":135523038,"body_markdown":"Result from my attempt using the example input string from the previous comment is `1830340810.000000000s(TAI)` corresponding to `2016-01-01T11:59:34Z` UTC. It looks 26 seconds early compared to the input string because there were 26 leap seconds from 1972 to 2016.","body":"Result from my attempt using the example input string from the previous comment is <code>1830340810.000000000s(TAI)</code> corresponding to <code>2016-01-01T11:59:34Z</code> UTC. It looks 26 seconds early compared to the input string because there were 26 leap seconds from 1972 to 2016."}],"owner":{"account_id":29192698,"reputation":11,"user_id":22364506,"display_name":"gumitmu"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":54,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1691596659,"creation_date":1691593714,"question_id":76869094,"body_markdown":"In my Java task I get some timestamps in Strings in the format of: YYYY-MM-ddTHH:mm:ss.S.\r\nThese timestamps are supposed to be interpreted as [TAI time (International atomic time)][1]. \r\n\r\nI need to compare these timestamps to others, some of which might be [UTC][2] times. Therefore I want to convert the TAI times to UTC times (or UNIX time). Now my problem is, that I can&#39;t find an option which allows me to parse the timestamp Strings without interpreting the (TAI) time in a wrong timescale. \r\n\r\nFor example using the standard LocalDateTime would interprete the timestamp as time including leap seconds, if I understood it correctly. Now I could try adding the seconds via an ZoneOffset, but I don&#39;t know how I would calculate these without already knowing/ having the correct date and time in either timescale.\r\n\r\nI also looked at [ThreeTen-Extra][3], which [supports TAI time][4], but here they only allow parsing from TAI seconds. I am not able to change the input format to get the representation as TAI seconds.\r\n\r\nHow should I go forward from this?\r\n\r\n\r\n  [1]: https://en.wikipedia.org/wiki/International_Atomic_Time\r\n  [2]: https://en.wikipedia.org/wiki/Coordinated_Universal_Time\r\n  [3]: https://www.threeten.org/threeten-extra/\r\n  [4]: https://www.threeten.org/threeten-extra/apidocs/org.threeten.extra/org/threeten/extra/scale/package-summary.html","title":"TAI time from String with date time representation","body":"<p>In my Java task I get some timestamps in Strings in the format of: YYYY-MM-ddTHH:mm:ss.S.\nThese timestamps are supposed to be interpreted as <a href=\"https://en.wikipedia.org/wiki/International_Atomic_Time\" rel=\"nofollow noreferrer\">TAI time (International atomic time)</a>.</p>\n<p>I need to compare these timestamps to others, some of which might be <a href=\"https://en.wikipedia.org/wiki/Coordinated_Universal_Time\" rel=\"nofollow noreferrer\">UTC</a> times. Therefore I want to convert the TAI times to UTC times (or UNIX time). Now my problem is, that I can't find an option which allows me to parse the timestamp Strings without interpreting the (TAI) time in a wrong timescale.</p>\n<p>For example using the standard LocalDateTime would interprete the timestamp as time including leap seconds, if I understood it correctly. Now I could try adding the seconds via an ZoneOffset, but I don't know how I would calculate these without already knowing/ having the correct date and time in either timescale.</p>\n<p>I also looked at <a href=\"https://www.threeten.org/threeten-extra/\" rel=\"nofollow noreferrer\">ThreeTen-Extra</a>, which <a href=\"https://www.threeten.org/threeten-extra/apidocs/org.threeten.extra/org/threeten/extra/scale/package-summary.html\" rel=\"nofollow noreferrer\">supports TAI time</a>, but here they only allow parsing from TAI seconds. I am not able to change the input format to get the representation as TAI seconds.</p>\n<p>How should I go forward from this?</p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":6718742,"reputation":321,"user_id":5179636,"display_name":"colouredmirrorball"},"score":0,"creation_date":1691597518,"post_id":76869403,"comment_id":135514150,"body_markdown":"What is the error?","body":"What is the error?"},{"owner":{"account_id":465573,"reputation":192694,"user_id":869736,"accept_rate":82,"display_name":"Louis Wasserman"},"score":0,"creation_date":1691597666,"post_id":76869403,"comment_id":135514189,"body_markdown":"At a guess, you&#39;re trying to compile with a version of Java that doesn&#39;t also work with the version of Android you&#39;re using.","body":"At a guess, you&#39;re trying to compile with a version of Java that doesn&#39;t also work with the version of Android you&#39;re using."},{"owner":{"account_id":29112314,"reputation":1,"user_id":22301840,"display_name":"Ruben iraheta"},"score":0,"creation_date":1691597777,"post_id":76869403,"comment_id":135514218,"body_markdown":"symbol:   method makeConcatWithConstants(Lookup,String,MethodType,String)","body":"symbol:   method makeConcatWithConstants(Lookup,String,MethodType,String)"}],"owner":{"account_id":29112314,"reputation":1,"user_id":22301840,"display_name":"Ruben iraheta"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":19,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"closed_date":1691651305,"answer_count":0,"score":0,"last_activity_date":1691596454,"creation_date":1691596191,"question_id":76869403,"body_markdown":"I have the following string that I want to use to download the google maps route with `retrofit2`, however it generates the error:  \r\n\r\n    symbol:   method makeConcatWithConstants(Lookup,String,MethodType,String)\r\n    \r\n    String requestUrl = &quot;https://maps.googleapis.com/maps/api/directions/json?&quot;\r\n                            + &quot;mode=driving&amp;&quot; + &quot;transit_routing_preference=less_driving&amp;&quot;\r\n                            + &quot;origin=&quot; + mLastLocation.getLatitude() + &quot;,&quot;\r\n                            + mLastLocation.getLongitude() + &quot;&amp;&quot; + &quot;destination=&quot;\r\n                            + &quot;13.767152&quot; + &quot;,&quot; + &quot;-89.655844&quot; + &quot;&amp;&quot;\r\n                            + &quot;key=&quot; + getResources().getString(R.string.google_directions_key);\r\n\r\n                Log.d(&quot;URL&quot;, requestUrl);\r\n\r\nY need route from google API","title":"Java 9 cant makeConcatWithConstants(Lookup,String,MethodType,String)","body":"<p>I have the following string that I want to use to download the google maps route with <code>retrofit2</code>, however it generates the error:</p>\n<pre><code>symbol:   method makeConcatWithConstants(Lookup,String,MethodType,String)\n\nString requestUrl = &quot;https://maps.googleapis.com/maps/api/directions/json?&quot;\n                        + &quot;mode=driving&amp;&quot; + &quot;transit_routing_preference=less_driving&amp;&quot;\n                        + &quot;origin=&quot; + mLastLocation.getLatitude() + &quot;,&quot;\n                        + mLastLocation.getLongitude() + &quot;&amp;&quot; + &quot;destination=&quot;\n                        + &quot;13.767152&quot; + &quot;,&quot; + &quot;-89.655844&quot; + &quot;&amp;&quot;\n                        + &quot;key=&quot; + getResources().getString(R.string.google_directions_key);\n\n            Log.d(&quot;URL&quot;, requestUrl);\n</code></pre>\n<p>Y need route from google API</p>\n"},{"tags":["java","android","android-studio"],"answers":[{"tags":[],"owner":{"account_id":238127,"reputation":86162,"user_id":506796,"accept_rate":83,"display_name":"Tenfour04"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1691595698,"creation_date":1691595698,"answer_id":76869337,"question_id":76868700,"body_markdown":"Put it in a utility method and call it from each activity that uses it:\r\n\r\n```\r\npublic final class ActivityLayouts {\r\n\r\n    private ActivityLayouts() {}\r\n\r\n    public static void applyEdgeToEdge(ComponentActivity activity, int fittedViewId) {\r\n        // Set window to full screen\r\n        WindowCompat.setDecorFitsSystemWindows(activity.getWindow(), false);\r\n\r\n        View view = activity.findViewById(fittedViewId);\r\n\r\n        // Set Listener\r\n        ViewCompat.setOnApplyWindowInsetsListener(view, (v, windowInsets) -&gt; {\r\n            Insets insets = windowInsets.getInsets(WindowInsetsCompat.Type.systemBars());\r\n            ViewGroup.MarginLayoutParams mlp = (ViewGroup.MarginLayoutParams) v.getLayoutParams();\r\n            mlp.leftMargin = insets.left;\r\n            mlp.bottomMargin = insets.bottom;\r\n            mlp.rightMargin = insets.right;\r\n            v.setLayoutParams(mlp);\r\n            return windowInsets;\r\n        });\r\n    }\r\n```\r\n\r\nThen in each activity, you call it:\r\n\r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        setContentView(R.layout.activity_main);\r\n        ActivityLayouts.applyEdgeToEdge(this, R.id.activity_main);\r\n    }\r\n\r\n---\r\n\r\nSome people might suggest creating a BaseActivity class that you extend to make your other classes. Here are some writings about why you might not want to use that strategy:\r\n\r\n * [Composition over inheritance](https://en.wikipedia.org/wiki/Composition_over_inheritance)\r\n * [Android Nightmares &#128561; | Base classes](https://levelup.gitconnected.com/android-nightmares-base-classes-ccf55dbd0604)\r\n * [Say no to BaseActivity and BaseFragment](https://proandroiddev.com/say-no-to-baseactivity-and-basefragment-83b156ed8998)\r\n * [BaseActivity and BaseFragment are monsters](https://proandroiddev.com/baseactivity-and-basefragment-are-monsters-5cda31639938)","title":"Set insets for all activities (Android)","body":"<p>Put it in a utility method and call it from each activity that uses it:</p>\n<pre><code>public final class ActivityLayouts {\n\n    private ActivityLayouts() {}\n\n    public static void applyEdgeToEdge(ComponentActivity activity, int fittedViewId) {\n        // Set window to full screen\n        WindowCompat.setDecorFitsSystemWindows(activity.getWindow(), false);\n\n        View view = activity.findViewById(fittedViewId);\n\n        // Set Listener\n        ViewCompat.setOnApplyWindowInsetsListener(view, (v, windowInsets) -&gt; {\n            Insets insets = windowInsets.getInsets(WindowInsetsCompat.Type.systemBars());\n            ViewGroup.MarginLayoutParams mlp = (ViewGroup.MarginLayoutParams) v.getLayoutParams();\n            mlp.leftMargin = insets.left;\n            mlp.bottomMargin = insets.bottom;\n            mlp.rightMargin = insets.right;\n            v.setLayoutParams(mlp);\n            return windowInsets;\n        });\n    }\n</code></pre>\n<p>Then in each activity, you call it:</p>\n<pre><code>@Override\nprotected void onCreate(Bundle savedInstanceState) {\n    super.onCreate(savedInstanceState);\n    setContentView(R.layout.activity_main);\n    ActivityLayouts.applyEdgeToEdge(this, R.id.activity_main);\n}\n</code></pre>\n<hr />\n<p>Some people might suggest creating a BaseActivity class that you extend to make your other classes. Here are some writings about why you might not want to use that strategy:</p>\n<ul>\n<li><a href=\"https://en.wikipedia.org/wiki/Composition_over_inheritance\" rel=\"nofollow noreferrer\">Composition over inheritance</a></li>\n<li><a href=\"https://levelup.gitconnected.com/android-nightmares-base-classes-ccf55dbd0604\" rel=\"nofollow noreferrer\">Android Nightmares 😱 | Base classes</a></li>\n<li><a href=\"https://proandroiddev.com/say-no-to-baseactivity-and-basefragment-83b156ed8998\" rel=\"nofollow noreferrer\">Say no to BaseActivity and BaseFragment</a></li>\n<li><a href=\"https://proandroiddev.com/baseactivity-and-basefragment-are-monsters-5cda31639938\" rel=\"nofollow noreferrer\">BaseActivity and BaseFragment are monsters</a></li>\n</ul>\n"}],"owner":{"account_id":18069948,"reputation":19,"user_id":13134851,"display_name":"Dynamic"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":35,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76869337,"answer_count":1,"score":0,"last_activity_date":1691595698,"creation_date":1691590854,"question_id":76868700,"body_markdown":"I&#39;m trying to understand how to create an edge-to-edge layout in android studio with java although I find that I am having to duplicate the ViewCompat.setOnApplyWindowInsetListener() for every activity. Is there a way of making sure this applies to all activities without duplicating code across each activity?\r\n\r\nThis is currently how I&#39;m setting the insets:\r\n```\r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        setContentView(R.layout.activity_main);\r\n\r\n        // Set window to full screen\r\n        WindowCompat.setDecorFitsSystemWindows(getWindow(), false);\r\n\r\n        // Get view activity_main.xml from id\r\n        View view = findViewById(R.id.activity_main);\r\n\r\n        // Set Listener\r\n        ViewCompat.setOnApplyWindowInsetsListener(view, (v, windowInsets) -&gt; {\r\n            Insets insets = windowInsets.getInsets(WindowInsetsCompat.Type.systemBars());\r\n            ViewGroup.MarginLayoutParams mlp = (ViewGroup.MarginLayoutParams) v.getLayoutParams();\r\n            mlp.leftMargin = insets.left;\r\n            mlp.bottomMargin = insets.bottom;\r\n            mlp.rightMargin = insets.right;\r\n            v.setLayoutParams(mlp);\r\n            return windowInsets;\r\n        });\r\n    }\r\n```\r\n\r\nThanks\r\n\r\n","title":"Set insets for all activities (Android)","body":"<p>I'm trying to understand how to create an edge-to-edge layout in android studio with java although I find that I am having to duplicate the ViewCompat.setOnApplyWindowInsetListener() for every activity. Is there a way of making sure this applies to all activities without duplicating code across each activity?</p>\n<p>This is currently how I'm setting the insets:</p>\n<pre><code>    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.activity_main);\n\n        // Set window to full screen\n        WindowCompat.setDecorFitsSystemWindows(getWindow(), false);\n\n        // Get view activity_main.xml from id\n        View view = findViewById(R.id.activity_main);\n\n        // Set Listener\n        ViewCompat.setOnApplyWindowInsetsListener(view, (v, windowInsets) -&gt; {\n            Insets insets = windowInsets.getInsets(WindowInsetsCompat.Type.systemBars());\n            ViewGroup.MarginLayoutParams mlp = (ViewGroup.MarginLayoutParams) v.getLayoutParams();\n            mlp.leftMargin = insets.left;\n            mlp.bottomMargin = insets.bottom;\n            mlp.rightMargin = insets.right;\n            v.setLayoutParams(mlp);\n            return windowInsets;\n        });\n    }\n</code></pre>\n<p>Thanks</p>\n"},{"tags":["java","java-8","java-stream"],"comments":[{"owner":{"account_id":2522926,"reputation":30310,"user_id":2192903,"accept_rate":73,"display_name":"Arnaud Denoyelle"},"score":0,"creation_date":1525444479,"post_id":50177385,"comment_id":87371957,"body_markdown":"Honestly, I don&#39;t think that you will ever join 1 million strings. So prefer the most readable, regardless of the performance.","body":"Honestly, I don&#39;t think that you will ever join 1 million strings. So prefer the most readable, regardless of the performance."},{"owner":{"account_id":1894536,"reputation":54819,"user_id":1711796,"accept_rate":100,"display_name":"Bernhard Barker"},"score":1,"creation_date":1525444824,"post_id":50177385,"comment_id":87372184,"body_markdown":"The best method is probably to [use `String.join`](https://stackoverflow.com/questions/1751844/java-convert-liststring-to-a-string). But you should probably [benchmark](https://stackoverflow.com/questions/504103/how-do-i-write-a-correct-micro-benchmark-in-java).","body":"The best method is probably to <a href=\"https://stackoverflow.com/questions/1751844/java-convert-liststring-to-a-string\">use <code>String.join</code></a>. But you should probably <a href=\"https://stackoverflow.com/questions/504103/how-do-i-write-a-correct-micro-benchmark-in-java\">benchmark</a>."},{"owner":{"account_id":1597009,"reputation":5417,"user_id":1478852,"accept_rate":63,"display_name":"Sagar"},"score":0,"creation_date":1525444907,"post_id":50177385,"comment_id":87372236,"body_markdown":"@JaroslawPawlak Yes, I looked at the code and I am still not sure about the performance, that&#39;s why raised the question. Plus I am saving the time of a lot of devs who might have the same question in future. Hope that justifies the question. And I bet you too will learn something new with the discussion that&#39;s happening here!","body":"@JaroslawPawlak Yes, I looked at the code and I am still not sure about the performance, that&#39;s why raised the question. Plus I am saving the time of a lot of devs who might have the same question in future. Hope that justifies the question. And I bet you too will learn something new with the discussion that&#39;s happening here!"},{"owner":{"account_id":1056871,"reputation":117729,"user_id":1059372,"accept_rate":97,"display_name":"Eugene"},"score":1,"creation_date":1525444980,"post_id":50177385,"comment_id":87372281,"body_markdown":"in `StringBuilder` you can specify a capacity, in `StringJoiner` you can&#39;t, it will grow `*2` every time, `8 -&gt; 16 -&gt; 32` array of Strings, these re-size use `Array.copyOf`. I&#39;d say with a proper capacity `StringBuilder` would win in a speed test","body":"in <code>StringBuilder</code> you can specify a capacity, in <code>StringJoiner</code> you can&#39;t, it will grow <code>*2</code> every time, <code>8 -&gt; 16 -&gt; 32</code> array of Strings, these re-size use <code>Array.copyOf</code>. I&#39;d say with a proper capacity <code>StringBuilder</code> would win in a speed test"},{"owner":{"account_id":1625605,"reputation":5548,"user_id":1501234,"accept_rate":72,"display_name":"Jaroslaw Pawlak"},"score":0,"creation_date":1525449718,"post_id":50177385,"comment_id":87375107,"body_markdown":"@Sagar Both approaches use `StringBuilder` so the difference will be insignificant. You can see some boiler plate code in the `joining` - all those new objects created (like `StringBuilder`) and all the if statements so it will be definitely a bit slower. Both approaches have `O(n)` complexity so it really comes down to what @ArnaudDenoyelle already said above - &quot;prefer the most readable&quot;.","body":"@Sagar Both approaches use <code>StringBuilder</code> so the difference will be insignificant. You can see some boiler plate code in the <code>joining</code> - all those new objects created (like <code>StringBuilder</code>) and all the if statements so it will be definitely a bit slower. Both approaches have <code>O(n)</code> complexity so it really comes down to what @ArnaudDenoyelle already said above - &quot;prefer the most readable&quot;."},{"owner":{"account_id":3211603,"reputation":289297,"user_id":2711488,"display_name":"Holger"},"score":2,"creation_date":1525452861,"post_id":50177385,"comment_id":87376674,"body_markdown":"Since the code does not do the same, it is pointless to discuss the performance differences. The first variant appends a trailing `&quot;,&quot;` which the joiner does not. Further, the first variant is not thread safe. Besides these differences, they do the same below the surface. So any performance difference stems from not doing the same thing. [As said by Dukeling](https://stackoverflow.com/questions/50177385/collectors-joining-vs-stringbuilder-append#comment87372184_50177385) you may also use `String.join(&quot;,&quot;, finalWords)` which is simpler (but also does basically the same)…","body":"Since the code does not do the same, it is pointless to discuss the performance differences. The first variant appends a trailing <code>&quot;,&quot;</code> which the joiner does not. Further, the first variant is not thread safe. Besides these differences, they do the same below the surface. So any performance difference stems from not doing the same thing. <a href=\"https://stackoverflow.com/questions/50177385/collectors-joining-vs-stringbuilder-append#comment87372184_50177385\">As said by Dukeling</a> you may also use <code>String.join(&quot;,&quot;, finalWords)</code> which is simpler (but also does basically the same)…"}],"answers":[{"tags":[],"owner":{"account_id":9847667,"reputation":29054,"user_id":7294647,"accept_rate":67,"display_name":"Jacob G."},"down_vote_count":0,"up_vote_count":10,"is_accepted":true,"score":10,"last_activity_date":1525445138,"creation_date":1525445138,"answer_id":50177597,"question_id":50177385,"body_markdown":"I put together a small benchmark to test this out because I was curious.  It initializes the `List` with `size` randomly-generated lowercase `String`s, each having a length of `10`:\r\n\r\n    @State(Scope.Benchmark)\r\n    @BenchmarkMode(Mode.AverageTime)\r\n    @OutputTimeUnit(TimeUnit.NANOSECONDS)\r\n    @Warmup(iterations = 5, time = 500, timeUnit = TimeUnit.MILLISECONDS)\r\n    @Measurement(iterations = 10, time = 500, timeUnit = TimeUnit.MILLISECONDS)\r\n    @Fork(3)\r\n    public class MyBenchmark {\r\n\r\n        @Param({&quot;10&quot;, &quot;100&quot;, &quot;1000&quot;, &quot;10000&quot;, &quot;100000&quot;})\r\n        private int size;\r\n\r\n        private List&lt;String&gt; finalWords;\r\n\r\n        @Setup(Level.Invocation)\r\n        public void initialize() {\r\n            finalWords = IntStream.range(0, size)\r\n                                  .mapToObj(i -&gt; {\r\n                                      return ThreadLocalRandom.current()\r\n                                                              .ints(10, &#39;a&#39;, &#39;z&#39; + 1)\r\n                                                              .mapToObj(c -&gt; Character.toString((char) c))\r\n                                                              .collect(Collectors.joining());\r\n                                  }).collect(Collectors.toList());\r\n        }\r\n\r\n        public static void main(String[] args) throws Exception {\r\n            org.openjdk.jmh.Main.main(args);\r\n        }\r\n\r\n        @Benchmark\r\n        public String stringBuilder() {\r\n            StringBuilder sb = new StringBuilder();\r\n            finalWords.forEach(word -&gt; sb.append(word).append(&quot;,&quot;));\r\n            return sb.toString();\r\n        }\r\n\r\n        @Benchmark\r\n        public String stream() {\r\n            return finalWords.stream().collect(Collectors.joining(&quot;,&quot;));\r\n        }\r\n    }\r\n\r\nHere are the results:\r\n\r\n    Benchmark                  (size)  Mode  Cnt        Score        Error  Units\r\n    MyBenchmark.stream             10  avgt   30      242.330 &#177;      5.177  ns/op\r\n    MyBenchmark.stream            100  avgt   30     1426.333 &#177;     20.183  ns/op\r\n    MyBenchmark.stream           1000  avgt   30    30779.509 &#177;   1114.992  ns/op\r\n    MyBenchmark.stream          10000  avgt   30   720944.424 &#177;  27845.997  ns/op\r\n    MyBenchmark.stream         100000  avgt   30  7701294.456 &#177; 648084.759  ns/op\r\n    MyBenchmark.stringBuilder      10  avgt   30      170.566 &#177;      1.833  ns/op\r\n    MyBenchmark.stringBuilder     100  avgt   30     1166.153 &#177;     21.162  ns/op\r\n    MyBenchmark.stringBuilder    1000  avgt   30    32374.567 &#177;    979.288  ns/op\r\n    MyBenchmark.stringBuilder   10000  avgt   30   473022.229 &#177;   8982.260  ns/op\r\n    MyBenchmark.stringBuilder  100000  avgt   30  4524267.849 &#177; 242801.008  ns/op\r\n\r\nAs you can see, the `StringBuilder` method is faster in this case, even when I don&#39;t specify an initial capacity.","title":"Collectors.joining vs StringBuilder.append","body":"<p>I put together a small benchmark to test this out because I was curious.  It initializes the <code>List</code> with <code>size</code> randomly-generated lowercase <code>String</code>s, each having a length of <code>10</code>:</p>\n\n<pre><code>@State(Scope.Benchmark)\n@BenchmarkMode(Mode.AverageTime)\n@OutputTimeUnit(TimeUnit.NANOSECONDS)\n@Warmup(iterations = 5, time = 500, timeUnit = TimeUnit.MILLISECONDS)\n@Measurement(iterations = 10, time = 500, timeUnit = TimeUnit.MILLISECONDS)\n@Fork(3)\npublic class MyBenchmark {\n\n    @Param({\"10\", \"100\", \"1000\", \"10000\", \"100000\"})\n    private int size;\n\n    private List&lt;String&gt; finalWords;\n\n    @Setup(Level.Invocation)\n    public void initialize() {\n        finalWords = IntStream.range(0, size)\n                              .mapToObj(i -&gt; {\n                                  return ThreadLocalRandom.current()\n                                                          .ints(10, 'a', 'z' + 1)\n                                                          .mapToObj(c -&gt; Character.toString((char) c))\n                                                          .collect(Collectors.joining());\n                              }).collect(Collectors.toList());\n    }\n\n    public static void main(String[] args) throws Exception {\n        org.openjdk.jmh.Main.main(args);\n    }\n\n    @Benchmark\n    public String stringBuilder() {\n        StringBuilder sb = new StringBuilder();\n        finalWords.forEach(word -&gt; sb.append(word).append(\",\"));\n        return sb.toString();\n    }\n\n    @Benchmark\n    public String stream() {\n        return finalWords.stream().collect(Collectors.joining(\",\"));\n    }\n}\n</code></pre>\n\n<p>Here are the results:</p>\n\n<pre><code>Benchmark                  (size)  Mode  Cnt        Score        Error  Units\nMyBenchmark.stream             10  avgt   30      242.330 ±      5.177  ns/op\nMyBenchmark.stream            100  avgt   30     1426.333 ±     20.183  ns/op\nMyBenchmark.stream           1000  avgt   30    30779.509 ±   1114.992  ns/op\nMyBenchmark.stream          10000  avgt   30   720944.424 ±  27845.997  ns/op\nMyBenchmark.stream         100000  avgt   30  7701294.456 ± 648084.759  ns/op\nMyBenchmark.stringBuilder      10  avgt   30      170.566 ±      1.833  ns/op\nMyBenchmark.stringBuilder     100  avgt   30     1166.153 ±     21.162  ns/op\nMyBenchmark.stringBuilder    1000  avgt   30    32374.567 ±    979.288  ns/op\nMyBenchmark.stringBuilder   10000  avgt   30   473022.229 ±   8982.260  ns/op\nMyBenchmark.stringBuilder  100000  avgt   30  4524267.849 ± 242801.008  ns/op\n</code></pre>\n\n<p>As you can see, the <code>StringBuilder</code> method is faster in this case, even when I don't specify an initial capacity.</p>\n"},{"tags":[],"owner":{"account_id":11554395,"reputation":84,"user_id":8465978,"display_name":"Badr Kacimi"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1691595381,"creation_date":1691595381,"answer_id":76869308,"question_id":50177385,"body_markdown":"In java 17, the String concatenation was improved so we do not longer need StringBuffer anymore.\r\n\r\nFor more check JEP caf&#233; : https://www.youtube.com/watch?v=w56RUzBLaRE&amp;list=PLX8CzqL3ArzV4BpOzLanxd4bZr46x5e87&amp;index=15","title":"Collectors.joining vs StringBuilder.append","body":"<p>In java 17, the String concatenation was improved so we do not longer need StringBuffer anymore.</p>\n<p>For more check JEP café : <a href=\"https://www.youtube.com/watch?v=w56RUzBLaRE&amp;list=PLX8CzqL3ArzV4BpOzLanxd4bZr46x5e87&amp;index=15\" rel=\"nofollow noreferrer\">https://www.youtube.com/watch?v=w56RUzBLaRE&amp;list=PLX8CzqL3ArzV4BpOzLanxd4bZr46x5e87&amp;index=15</a></p>\n"}],"owner":{"account_id":1597009,"reputation":5417,"user_id":1478852,"accept_rate":63,"display_name":"Sagar"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":6485,"favorite_count":0,"down_vote_count":1,"up_vote_count":10,"accepted_answer_id":50177597,"answer_count":2,"score":9,"last_activity_date":1691595381,"creation_date":1525444346,"question_id":50177385,"body_markdown":"Which one is better in terms of performance?   \r\n\r\n    finalWords.stream().forEach(word -&gt; stringBuilder.append(word).append(”,“)); \r\n    String finalResult = stringBuilder.toString();\r\n\r\nVS \r\n\r\n    String finalResult = finalWords.stream().collect(Collectors.joining(&quot;,&quot;));\r\n\r\n\r\n","title":"Collectors.joining vs StringBuilder.append","body":"<p>Which one is better in terms of performance?   </p>\n\n<pre><code>finalWords.stream().forEach(word -&gt; stringBuilder.append(word).append(”,“)); \nString finalResult = stringBuilder.toString();\n</code></pre>\n\n<p>VS </p>\n\n<pre><code>String finalResult = finalWords.stream().collect(Collectors.joining(\",\"));\n</code></pre>\n"},{"tags":["java","docker","tomcat"],"owner":{"account_id":3468584,"reputation":41,"user_id":2903551,"display_name":"Rupesh S."},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":56,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1691595213,"creation_date":1691594465,"question_id":76869186,"body_markdown":"- On our production instance we run a our application on docker.\r\n- Docker image we use is tomcat:9.0.41-jdk8-openjdk.\r\n- One day suddenly this tomcat stopped responding.\r\n\r\nTo Troubleshoot issue we did following:\r\n- We ran curl command from inside of container also but it still not responding.\r\n- We thought default 200 thread config of tomcat could be issue but we tried load on similar instance on some other environment. Its thread count gone beyond and then it automatically came down.\r\n- We also thought this could be some jvm issue. And we tried troubleshooting through [jcmd](https://docs.oracle.com/javase/8/docs/technotes/guides/troubleshoot/tooldescr006.html) tool. But the tomcat process inside inside docker was not responding.\r\n\r\nWhat can be reason for this?","title":"Tomcat Inside docker has suddenly stopped responding","body":"<ul>\n<li>On our production instance we run a our application on docker.</li>\n<li>Docker image we use is tomcat:9.0.41-jdk8-openjdk.</li>\n<li>One day suddenly this tomcat stopped responding.</li>\n</ul>\n<p>To Troubleshoot issue we did following:</p>\n<ul>\n<li>We ran curl command from inside of container also but it still not responding.</li>\n<li>We thought default 200 thread config of tomcat could be issue but we tried load on similar instance on some other environment. Its thread count gone beyond and then it automatically came down.</li>\n<li>We also thought this could be some jvm issue. And we tried troubleshooting through <a href=\"https://docs.oracle.com/javase/8/docs/technotes/guides/troubleshoot/tooldescr006.html\" rel=\"nofollow noreferrer\">jcmd</a> tool. But the tomcat process inside inside docker was not responding.</li>\n</ul>\n<p>What can be reason for this?</p>\n"},{"tags":["java","swing","validation","input"],"comments":[{"owner":{"account_id":969721,"reputation":344508,"user_id":992484,"accept_rate":60,"display_name":"MadProgrammer"},"score":3,"creation_date":1498896065,"post_id":44858677,"comment_id":76697496,"body_markdown":"It really depends on what type of fields you&#39;re trying to validate - you could use an `InputVerifier`, it&#39;s post validation process, or for text components a `DocumentListener` or `DocumentFilter`","body":"It really depends on what type of fields you&#39;re trying to validate - you could use an <code>InputVerifier</code>, it&#39;s post validation process, or for text components a <code>DocumentListener</code> or <code>DocumentFilter</code>"},{"owner":{"account_id":969721,"reputation":344508,"user_id":992484,"accept_rate":60,"display_name":"MadProgrammer"},"score":1,"creation_date":1498897436,"post_id":44858677,"comment_id":76697743,"body_markdown":"You could also do post validation through an `ActionListener` attached to a `JButton`","body":"You could also do post validation through an <code>ActionListener</code> attached to a <code>JButton</code>"},{"owner":{"account_id":11090869,"reputation":5,"user_id":8142802,"accept_rate":40,"display_name":"ManuellsenDeve"},"score":0,"creation_date":1498897581,"post_id":44858677,"comment_id":76697771,"body_markdown":"Yeah I would make it with the button but the normal console Validation dont work am I right? So that code what I am posted is a example how my console validation worked.","body":"Yeah I would make it with the button but the normal console Validation dont work am I right? So that code what I am posted is a example how my console validation worked."},{"owner":{"account_id":969721,"reputation":344508,"user_id":992484,"accept_rate":60,"display_name":"MadProgrammer"},"score":1,"creation_date":1498900671,"post_id":44858677,"comment_id":76698493,"body_markdown":"Most GUIs are event driven frameworks, that is, something happens and you respond to it. It can take a little getting use to.  Basically, you won&#39;t need a loop of any kind (that&#39;s taken care for you) and you simply respond to the appropriate events when they a triggered","body":"Most GUIs are event driven frameworks, that is, something happens and you respond to it. It can take a little getting use to.  Basically, you won&#39;t need a loop of any kind (that&#39;s taken care for you) and you simply respond to the appropriate events when they a triggered"}],"answers":[{"tags":[],"owner":{"account_id":81822,"reputation":204250,"user_id":230513,"accept_rate":100,"display_name":"trashgod"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1498914456,"creation_date":1498914456,"answer_id":44861290,"question_id":44858677,"body_markdown":"Your error message now appears on the console. It looks like you want the message to appear in the GUI. As shown in [*How to Use the Focus Subsystem: Validating Input*][1], [`InputVerifier`][2] is a good choice. Because your implementation of `shouldYieldFocus()` is permitted to have sided effects, you can update a status display as needed. Starting from this complete [example][3], the variation below adds a `JLabel` and conditions it in `shouldYieldFocus()` according to the result of calling `verify()`.\r\n\r\n    private static final String OK = &quot;Values OK.&quot;;\r\n    private JLabel status = new JLabel(OK, JLabel.CENTER);\r\n    …\r\n    if (verify(input)) {\r\n        …\r\n        status.setText(OK);\r\n        return true;\r\n    } else {\r\n        …\r\n        status.setText(&quot;Please enter a number.&quot;);\r\n        return false;\r\n    }\r\n\r\nA complementary approach might include a [`DocumentListener`][4], as suggested [here][5].\r\n\r\n[![image][6]][6]\r\n\r\n\timport java.awt.*;\r\n\timport javax.swing.*;\r\n\r\n\t/**\r\n     * @see http://stackoverflow.com/a/44861290/230513\r\n\t * @see http://stackoverflow.com/a/11818183/522444\r\n\t */\r\n\tpublic class VerifierEg {\r\n\r\n\t\tprivate static final String ZERO = &quot;0.0&quot;;\r\n\t\tprivate static final String OK = &quot;Values OK.&quot;;\r\n\t\tprivate JTextField field1 = new JTextField(ZERO, 5);\r\n\t\tprivate JTextField field2 = new JTextField(ZERO, 5);\r\n\t\tprivate JTextField resultField = new JTextField(ZERO, 10);\r\n\t\tprivate JLabel status = new JLabel(OK, JLabel.CENTER);\r\n\r\n\t\tprivate void createAndShowGui() {\r\n\t\t\tresultField.setEditable(false);\r\n\t\t\tresultField.setFocusable(false);\r\n\r\n\t\t\tJPanel mainPanel = new JPanel();\r\n\t\t\tfinal JTextField[] fields = {field1, field2};\r\n\r\n\t\t\tmainPanel.add(field1);\r\n\t\t\tmainPanel.add(new JLabel(&quot; x &quot;));\r\n\t\t\tmainPanel.add(field2);\r\n\t\t\tmainPanel.add(new JLabel(&quot; = &quot;));\r\n\t\t\tmainPanel.add(resultField);\r\n\r\n\t\t\tfor (JTextField field : fields) {\r\n\t\t\t\tfield.setInputVerifier(new MyInputVerifier(field));\r\n\t\t\t}\r\n\r\n\t\t\tJFrame frame = new JFrame(&quot;VerifierEg&quot;);\r\n\t\t\tframe.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\r\n\t\t\tframe.add(mainPanel);\r\n\t\t\tframe.add(status, BorderLayout.SOUTH);\r\n\t\t\tframe.pack();\r\n\t\t\tframe.setLocationByPlatform(true);\r\n\t\t\tframe.setVisible(true);\r\n\t\t}\r\n\r\n\t\tprivate void calcProduct() {\r\n\t\t\tdouble d1 = Double.parseDouble(field1.getText());\r\n\t\t\tdouble d2 = Double.parseDouble(field2.getText());\r\n\t\t\tdouble prod = d1 * d2;\r\n\t\t\tresultField.setText(String.valueOf(prod));\r\n\t\t}\r\n\r\n\t\tpublic static void main(String[] args) {\r\n\t\t\tSwingUtilities.invokeLater(new Runnable() {\r\n\r\n\t\t\t\t@Override\r\n\t\t\t\tpublic void run() {\r\n\t\t\t\t\tVerifierEg eg = new VerifierEg();\r\n\t\t\t\t\teg.createAndShowGui();\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t* @see http://stackoverflow.com/a/11818946/230513\r\n\t\t*/\r\n\t\tprivate class MyInputVerifier extends InputVerifier {\r\n\r\n\t\t\tprivate JTextField field;\r\n\t\t\tprivate double value;\r\n\r\n\t\t\tpublic MyInputVerifier(JTextField field) {\r\n\t\t\t\tthis.field = field;\r\n\t\t\t}\r\n\r\n\t\t\t@Override\r\n\t\t\tpublic boolean shouldYieldFocus(JComponent input) {\r\n\t\t\t\tif (verify(input)) {\r\n\t\t\t\t\tfield.setText(String.valueOf(value));\r\n\t\t\t\t\tcalcProduct();\r\n\t\t\t\t\tstatus.setText(OK);\r\n\t\t\t\t\treturn true;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tfield.setText(ZERO);\r\n\t\t\t\t\tfield.selectAll();\r\n\t\t\t\t\tstatus.setText(&quot;Please enter a number.&quot;);\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\t@Override\r\n\t\t\tpublic boolean verify(JComponent input) {\r\n\t\t\t\ttry {\r\n\t\t\t\t\tvalue = Double.parseDouble(field.getText());\r\n\t\t\t\t\treturn true;\r\n\t\t\t\t} catch (NumberFormatException e) {\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\r\n  [1]: https://docs.oracle.com/javase/tutorial/uiswing/misc/focus.html#inputVerification\r\n  [2]: https://docs.oracle.com/javase/8/docs/api/javax/swing/InputVerifier.html\r\n  [3]: https://stackoverflow.com/a/11818183/230513\r\n  [4]: https://docs.oracle.com/javase/tutorial/uiswing/misc/focus.html#inputVerification\r\n  [5]: https://stackoverflow.com/a/14171442/230513\r\n  [6]: https://i.stack.imgur.com/2GVS6.png","title":"How to validate the Input of the User in a Swing?","body":"<p>Your error message now appears on the console. It looks like you want the message to appear in the GUI. As shown in <a href=\"https://docs.oracle.com/javase/tutorial/uiswing/misc/focus.html#inputVerification\" rel=\"nofollow noreferrer\"><em>How to Use the Focus Subsystem: Validating Input</em></a>, <a href=\"https://docs.oracle.com/javase/8/docs/api/javax/swing/InputVerifier.html\" rel=\"nofollow noreferrer\"><code>InputVerifier</code></a> is a good choice. Because your implementation of <code>shouldYieldFocus()</code> is permitted to have sided effects, you can update a status display as needed. Starting from this complete <a href=\"https://stackoverflow.com/a/11818183/230513\">example</a>, the variation below adds a <code>JLabel</code> and conditions it in <code>shouldYieldFocus()</code> according to the result of calling <code>verify()</code>.</p>\n\n<pre><code>private static final String OK = \"Values OK.\";\nprivate JLabel status = new JLabel(OK, JLabel.CENTER);\n…\nif (verify(input)) {\n    …\n    status.setText(OK);\n    return true;\n} else {\n    …\n    status.setText(\"Please enter a number.\");\n    return false;\n}\n</code></pre>\n\n<p>A complementary approach might include a <a href=\"https://docs.oracle.com/javase/tutorial/uiswing/misc/focus.html#inputVerification\" rel=\"nofollow noreferrer\"><code>DocumentListener</code></a>, as suggested <a href=\"https://stackoverflow.com/a/14171442/230513\">here</a>.</p>\n\n<p><a href=\"https://i.stack.imgur.com/2GVS6.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/2GVS6.png\" alt=\"image\"></a></p>\n\n<pre><code>import java.awt.*;\nimport javax.swing.*;\n\n/**\n * @see http://stackoverflow.com/a/44861290/230513\n * @see http://stackoverflow.com/a/11818183/522444\n */\npublic class VerifierEg {\n\n    private static final String ZERO = \"0.0\";\n    private static final String OK = \"Values OK.\";\n    private JTextField field1 = new JTextField(ZERO, 5);\n    private JTextField field2 = new JTextField(ZERO, 5);\n    private JTextField resultField = new JTextField(ZERO, 10);\n    private JLabel status = new JLabel(OK, JLabel.CENTER);\n\n    private void createAndShowGui() {\n        resultField.setEditable(false);\n        resultField.setFocusable(false);\n\n        JPanel mainPanel = new JPanel();\n        final JTextField[] fields = {field1, field2};\n\n        mainPanel.add(field1);\n        mainPanel.add(new JLabel(\" x \"));\n        mainPanel.add(field2);\n        mainPanel.add(new JLabel(\" = \"));\n        mainPanel.add(resultField);\n\n        for (JTextField field : fields) {\n            field.setInputVerifier(new MyInputVerifier(field));\n        }\n\n        JFrame frame = new JFrame(\"VerifierEg\");\n        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\n        frame.add(mainPanel);\n        frame.add(status, BorderLayout.SOUTH);\n        frame.pack();\n        frame.setLocationByPlatform(true);\n        frame.setVisible(true);\n    }\n\n    private void calcProduct() {\n        double d1 = Double.parseDouble(field1.getText());\n        double d2 = Double.parseDouble(field2.getText());\n        double prod = d1 * d2;\n        resultField.setText(String.valueOf(prod));\n    }\n\n    public static void main(String[] args) {\n        SwingUtilities.invokeLater(new Runnable() {\n\n            @Override\n            public void run() {\n                VerifierEg eg = new VerifierEg();\n                eg.createAndShowGui();\n            }\n        });\n    }\n\n    /**\n    * @see http://stackoverflow.com/a/11818946/230513\n    */\n    private class MyInputVerifier extends InputVerifier {\n\n        private JTextField field;\n        private double value;\n\n        public MyInputVerifier(JTextField field) {\n            this.field = field;\n        }\n\n        @Override\n        public boolean shouldYieldFocus(JComponent input) {\n            if (verify(input)) {\n                field.setText(String.valueOf(value));\n                calcProduct();\n                status.setText(OK);\n                return true;\n            } else {\n                field.setText(ZERO);\n                field.selectAll();\n                status.setText(\"Please enter a number.\");\n                return false;\n            }\n\n        }\n\n        @Override\n        public boolean verify(JComponent input) {\n            try {\n                value = Double.parseDouble(field.getText());\n                return true;\n            } catch (NumberFormatException e) {\n                return false;\n            }\n        }\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":11090869,"reputation":5,"user_id":8142802,"accept_rate":40,"display_name":"ManuellsenDeve"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2667,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1691594515,"creation_date":1498895683,"question_id":44858677,"body_markdown":"I have created a console Application and now I&#39;m starting to convert it into a swing Application. I have one question and I searched many times for an answer but I didn&#39;t find any. \r\n\r\nMy application has an class which validates the input of the user and also if the input is wrong it gives a error msg into console. So what I try to do is, I have an Jtextfield and validate this input, if the input is wrong it should give me the error msg.\r\n\r\nThat&#39;s my Input class where the User is allowed to write\r\n\r\n    public class Input {\r\n\r\n        private static BufferedReader eingabe = new BufferedReader(new InputStreamReader(System.in));\r\n        private Output output = new Output();\r\n        \r\n        private static String captureText() throws Exception {\r\n            return eingabe.readLine();\r\n        }\r\n        public String formatInput() {\r\n            boolean again = true;\r\n\r\n            while (again) {\r\n                try {\r\n                    String format = captureText();\r\n\r\n                    if (!format.equalsIgnoreCase(&quot;Y&quot;) &amp;&amp; !format.equalsIgnoreCase(&quot;N&quot;)) {\r\n                        again = true;\r\n                        throw new Exception();\r\n                    }\r\n                    again = false;\r\n                    return format;\r\n                } catch (Exception e) {\r\n                    this.output.formatInputWrong();\r\n                }\r\n            }\r\n            return null;\r\n\r\n        }\r\n    }\r\n\r\nThat&#39;s my output class method\r\n\r\n    void formatInputWrong() {\r\n        System.out.print(&quot;\\nThe Format Input is wrong.&quot;);\r\n               \r\n    }\r\n\r\n**I just want to know can I use the Validation of the Input class or should I create a special class for the swing input validation because I know I can take out the Input of the JTextfield?**","title":"How to validate the Input of the User in a Swing?","body":"<p>I have created a console Application and now I'm starting to convert it into a swing Application. I have one question and I searched many times for an answer but I didn't find any.</p>\n<p>My application has an class which validates the input of the user and also if the input is wrong it gives a error msg into console. So what I try to do is, I have an Jtextfield and validate this input, if the input is wrong it should give me the error msg.</p>\n<p>That's my Input class where the User is allowed to write</p>\n<pre><code>public class Input {\n\n    private static BufferedReader eingabe = new BufferedReader(new InputStreamReader(System.in));\n    private Output output = new Output();\n    \n    private static String captureText() throws Exception {\n        return eingabe.readLine();\n    }\n    public String formatInput() {\n        boolean again = true;\n\n        while (again) {\n            try {\n                String format = captureText();\n\n                if (!format.equalsIgnoreCase(&quot;Y&quot;) &amp;&amp; !format.equalsIgnoreCase(&quot;N&quot;)) {\n                    again = true;\n                    throw new Exception();\n                }\n                again = false;\n                return format;\n            } catch (Exception e) {\n                this.output.formatInputWrong();\n            }\n        }\n        return null;\n\n    }\n}\n</code></pre>\n<p>That's my output class method</p>\n<pre><code>void formatInputWrong() {\n    System.out.print(&quot;\\nThe Format Input is wrong.&quot;);\n           \n}\n</code></pre>\n<p><strong>I just want to know can I use the Validation of the Input class or should I create a special class for the swing input validation because I know I can take out the Input of the JTextfield?</strong></p>\n"},{"tags":["java","icmp"],"comments":[{"owner":{"account_id":15599618,"reputation":51,"user_id":11254096,"display_name":"Eric sun"},"score":0,"creation_date":1691144414,"post_id":76834860,"comment_id":135455254,"body_markdown":"I got it one minute after I posted it. isReachable() sends out echo request with seq 1 all the time, which will mess up its behavior when there is packet delay but not packet loss. I&#39;m an idiot.","body":"I got it one minute after I posted it. isReachable() sends out echo request with seq 1 all the time, which will mess up its behavior when there is packet delay but not packet loss. I&#39;m an idiot."},{"owner":{"account_id":92073,"reputation":1,"user_id":252518,"accept_rate":71,"display_name":"Freeman"},"score":0,"creation_date":1691594623,"post_id":76834860,"comment_id":135513454,"body_markdown":"because the `isReachable` relies on the operating system&#39;s network stack implementation,which can vary across different platforms and this can lead to inconsistent results and unexpected behavior!","body":"because the <code>isReachable</code> relies on the operating system&#39;s network stack implementation,which can vary across different platforms and this can lead to inconsistent results and unexpected behavior!"}],"answers":[{"tags":[],"owner":{"account_id":92073,"reputation":1,"user_id":252518,"accept_rate":71,"display_name":"Freeman"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1691594423,"creation_date":1691594423,"answer_id":76869182,"question_id":76834860,"body_markdown":"I think you can use the `Socket` class to establish a TCP connection instead of `isReachable`!\r\n\r\ncheck this out:\r\n\r\n    import java.io.IOException;\r\n    import java.net.InetAddress;\r\n    import java.net.Socket;\r\n    \r\n    public class PingTimeoutTest {\r\n        public static void main(String[] args) {\r\n            String ipAddress = args[0];\r\n            int timeoutStepMilli = 20;\r\n            int timeoutBase = 10;\r\n            boolean reachable = false;\r\n    \r\n            while (!reachable &amp;&amp; timeoutBase &lt;= 2000) {\r\n                try (Socket socket = new Socket()) {\r\n                    socket.connect(new InetSocketAddress(ipAddress, 80), timeoutBase);\r\n                    reachable = true;\r\n                } catch (IOException e) {\r\n                    System.out.println(timeoutBase + &quot;: bad&quot;);\r\n                    timeoutBase += timeoutStepMilli;\r\n                }\r\n            }\r\n    \r\n            if (reachable) {\r\n                System.out.println(timeoutBase + &quot;: ok&quot;);\r\n            } else {\r\n                System.out.println(&quot;Connection not successful&quot;);\r\n            }\r\n        }\r\n    }","title":"the timeout parameter for InetAddress.isReachable() doesn&#39;t match the value of netem delay","body":"<p>I think you can use the <code>Socket</code> class to establish a TCP connection instead of <code>isReachable</code>!</p>\n<p>check this out:</p>\n<pre><code>import java.io.IOException;\nimport java.net.InetAddress;\nimport java.net.Socket;\n\npublic class PingTimeoutTest {\n    public static void main(String[] args) {\n        String ipAddress = args[0];\n        int timeoutStepMilli = 20;\n        int timeoutBase = 10;\n        boolean reachable = false;\n\n        while (!reachable &amp;&amp; timeoutBase &lt;= 2000) {\n            try (Socket socket = new Socket()) {\n                socket.connect(new InetSocketAddress(ipAddress, 80), timeoutBase);\n                reachable = true;\n            } catch (IOException e) {\n                System.out.println(timeoutBase + &quot;: bad&quot;);\n                timeoutBase += timeoutStepMilli;\n            }\n        }\n\n        if (reachable) {\n            System.out.println(timeoutBase + &quot;: ok&quot;);\n        } else {\n            System.out.println(&quot;Connection not successful&quot;);\n        }\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":15599618,"reputation":51,"user_id":11254096,"display_name":"Eric sun"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":22,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76869182,"answer_count":1,"score":0,"last_activity_date":1691594423,"creation_date":1691143153,"question_id":76834860,"body_markdown":"I used netem to add packet delay for certain IP address.\r\n\r\n```tc filter add dev ens33 protocol ip parent 1:0 prio 1 u32 match ip dst 192.168.106.182 flowid 1:1```\r\n\r\nThe ```ping``` tool indicated that it worked.\r\n\r\n```\r\nPING 192.168.106.182 (192.168.106.182) 56(84) bytes of data.\r\n64 bytes from 192.168.106.182: icmp_seq=1 ttl=63 time=2003 ms\r\n```\r\n\r\nFollowing was my code for test\r\n\r\n```\r\nimport java.io.IOException;\r\nimport java.net.InetAddress;\r\n\r\n\r\npublic class PingTimeoutTest {\r\n    public static void main(String[] args) throws IOException {\r\n        InetAddress inetAddress = InetAddress.getByName(args[0]);\r\n        int timeoutStepMilli = 20;\r\n        int timeoutBase = 10;\r\n        while (!inetAddress.isReachable(timeoutBase)) {\r\n            System.out.println(timeoutBase + &quot;: bad&quot;);\r\n            timeoutBase += timeoutStepMilli;\r\n        }\r\n        System.out.println(timeoutBase + &quot;: ok&quot;);\r\n    }\r\n}\r\n```\r\nAnd the result is \r\n\r\n```\r\n10: bad\r\n30: bad\r\n50: bad\r\n70: bad\r\n90: bad\r\n110: bad\r\n130: bad\r\n150: bad\r\n170: bad\r\n190: bad\r\n210: bad\r\n230: bad\r\n250: bad\r\n270: bad\r\n290: ok\r\n```\r\nI have no idea why this happened. It&#39;s the same 290ms timeout when I set 2000ms netem delay both on this side or remote side.\r\n\r\nAny help will be grateful.","title":"the timeout parameter for InetAddress.isReachable() doesn&#39;t match the value of netem delay","body":"<p>I used netem to add packet delay for certain IP address.</p>\n<p><code>tc filter add dev ens33 protocol ip parent 1:0 prio 1 u32 match ip dst 192.168.106.182 flowid 1:1</code></p>\n<p>The <code>ping</code> tool indicated that it worked.</p>\n<pre><code>PING 192.168.106.182 (192.168.106.182) 56(84) bytes of data.\n64 bytes from 192.168.106.182: icmp_seq=1 ttl=63 time=2003 ms\n</code></pre>\n<p>Following was my code for test</p>\n<pre><code>import java.io.IOException;\nimport java.net.InetAddress;\n\n\npublic class PingTimeoutTest {\n    public static void main(String[] args) throws IOException {\n        InetAddress inetAddress = InetAddress.getByName(args[0]);\n        int timeoutStepMilli = 20;\n        int timeoutBase = 10;\n        while (!inetAddress.isReachable(timeoutBase)) {\n            System.out.println(timeoutBase + &quot;: bad&quot;);\n            timeoutBase += timeoutStepMilli;\n        }\n        System.out.println(timeoutBase + &quot;: ok&quot;);\n    }\n}\n</code></pre>\n<p>And the result is</p>\n<pre><code>10: bad\n30: bad\n50: bad\n70: bad\n90: bad\n110: bad\n130: bad\n150: bad\n170: bad\n190: bad\n210: bad\n230: bad\n250: bad\n270: bad\n290: ok\n</code></pre>\n<p>I have no idea why this happened. It's the same 290ms timeout when I set 2000ms netem delay both on this side or remote side.</p>\n<p>Any help will be grateful.</p>\n"},{"tags":["java","android","android-studio"],"comments":[{"owner":{"account_id":6231757,"reputation":5087,"user_id":4848308,"display_name":"Gueorgui Obregon"},"score":0,"creation_date":1454390912,"post_id":35145540,"comment_id":58010954,"body_markdown":"post your build.gradle so we can make an more accurate answer based on your dependencies","body":"post your build.gradle so we can make an more accurate answer based on your dependencies"},{"owner":{"account_id":6231757,"reputation":5087,"user_id":4848308,"display_name":"Gueorgui Obregon"},"score":0,"creation_date":1454390932,"post_id":35145540,"comment_id":58010967,"body_markdown":"here is some reference http://stackoverflow.com/questions/30934729/cant-generate-signed-apk-from-android-studio-execution-failed-for-task-packa","body":"here is some reference <a href=\"http://stackoverflow.com/questions/30934729/cant-generate-signed-apk-from-android-studio-execution-failed-for-task-packa\" title=\"cant generate signed apk from android studio execution failed for task packa\">stackoverflow.com/questions/30934729/&hellip;</a>"},{"owner":{"account_id":7555738,"reputation":466,"user_id":5735415,"display_name":"Ashish Rajvanshi"},"score":0,"creation_date":1454392671,"post_id":35145540,"comment_id":58011583,"body_markdown":"here is some reference http://stackoverflow.com/questions/20885725/how-to-use-the-proguard-in-android-studio","body":"here is some reference <a href=\"http://stackoverflow.com/questions/20885725/how-to-use-the-proguard-in-android-studio\" title=\"how to use the proguard in android studio\">stackoverflow.com/questions/20885725/&hellip;</a>"}],"answers":[{"tags":[],"owner":{"account_id":7052208,"reputation":1344,"user_id":5840085,"accept_rate":43,"display_name":"Harshad"},"down_vote_count":0,"up_vote_count":16,"is_accepted":true,"score":16,"last_activity_date":1454390593,"creation_date":1454390593,"answer_id":35145651,"question_id":35145540,"body_markdown":"I figured out the problem:\r\n\r\nOpen up the proguard-rules.pro for your project and add this to the bottom:\r\n\r\n    -dontwarn java.nio.file.Files\r\n    -dontwarn java.nio.file.Path\r\n    -dontwarn java.nio.file.OpenOption\r\n    -dontwarn org.codehaus.mojo.animal_sniffer.IgnoreJRERequirement\r\n\r\nBasically how I solved it was this I tried to run my app in &#39;release&#39; mode and got a bunch of errors similar to this guy here: [https://github.com/square/okio/issues/144][1]\r\n\r\nI pretty much followed what he said and fixed it.\r\n\r\nHope this can help others with generating their APK&#39;s!\r\n\r\n\r\nvisit more detail here :\r\n\r\n[https://stackoverflow.com/questions/31643339/errorexecution-failed-for-task-apppackagerelease-unable-to-compute-hash][2]\r\n\r\n\r\n  [1]: https://github.com/square/okio/issues/144\r\n  [2]: https://stackoverflow.com/questions/31643339/errorexecution-failed-for-task-apppackagerelease-unable-to-compute-hash","title":"How to enable ProGuard obfuscation in Android Studio?","body":"<p>I figured out the problem:</p>\n\n<p>Open up the proguard-rules.pro for your project and add this to the bottom:</p>\n\n<pre><code>-dontwarn java.nio.file.Files\n-dontwarn java.nio.file.Path\n-dontwarn java.nio.file.OpenOption\n-dontwarn org.codehaus.mojo.animal_sniffer.IgnoreJRERequirement\n</code></pre>\n\n<p>Basically how I solved it was this I tried to run my app in 'release' mode and got a bunch of errors similar to this guy here: <a href=\"https://github.com/square/okio/issues/144\" rel=\"noreferrer\">https://github.com/square/okio/issues/144</a></p>\n\n<p>I pretty much followed what he said and fixed it.</p>\n\n<p>Hope this can help others with generating their APK's!</p>\n\n<p>visit more detail here :</p>\n\n<p><a href=\"https://stackoverflow.com/questions/31643339/errorexecution-failed-for-task-apppackagerelease-unable-to-compute-hash\">Error:Execution failed for task &#39;:app:packageRelease&#39;. &gt; Unable to compute hash of /../AndroidStudioProjects/../classes.jar</a></p>\n"},{"tags":[],"owner":{"account_id":3845739,"reputation":6759,"user_id":3187349,"accept_rate":56,"display_name":"Maheshwar Ligade"},"down_vote_count":1,"up_vote_count":59,"is_accepted":false,"score":58,"last_activity_date":1567836084,"creation_date":1454390623,"answer_id":35145658,"question_id":35145540,"body_markdown":"To enable ProGuard in Android Studio.\r\n\r\nBelow is the sample how to enable default ProGuard in Android Studio.\r\n\r\n1. Go to the build.gradle file of app\r\n2. enable the **minifyEnabled true**\r\n3. enable  **shrinkResources true** to reduce the APK size\r\n4. `proguardFiles getDefaultProguardFile(&#39;proguard-android.txt&#39;)`\r\n to enable the default one. If you want to use your own proguard file then use the below rules.\r\n\r\n\r\n        buildTypes {\r\n            release {\r\n                debuggable false\r\n                minifyEnabled true\r\n                shrinkResources true\r\n                proguardFiles getDefaultProguardFile(&#39;proguard-android.txt&#39;), &#39;proguard-rules.pro&#39;\r\n            }\r\n    \r\n            debug {\r\n                debuggable true\r\n                minifyEnabled true\r\n                shrinkResources true\r\n                proguardFiles getDefaultProguardFile(&#39;proguard-android.txt&#39;), &#39;proguard-rules.pro&#39;\r\n            }\r\n        }\r\n\r\nThe link with ProGuard settings for Android and other settings are available in these links:\r\n\r\n - [Default ProGuard file][1]\r\n - [Gist with example][2]\r\n\r\nFor more detail go through [this link][3] \r\n\r\n\r\n  [1]: https://developer.android.com/studio/build/shrink-code.html\r\n  [2]: https://gist.github.com/maheshwarLigade/7143ae567fe8ac7c1e20\r\n  [3]: https://techwasti.com/enabling-proguard-for-android/","title":"How to enable ProGuard obfuscation in Android Studio?","body":"<p>To enable ProGuard in Android Studio.</p>\n\n<p>Below is the sample how to enable default ProGuard in Android Studio.</p>\n\n<ol>\n<li>Go to the build.gradle file of app</li>\n<li>enable the <strong>minifyEnabled true</strong></li>\n<li>enable  <strong>shrinkResources true</strong> to reduce the APK size</li>\n<li><p><code>proguardFiles getDefaultProguardFile('proguard-android.txt')</code>\nto enable the default one. If you want to use your own proguard file then use the below rules.</p>\n\n<pre><code>buildTypes {\n    release {\n        debuggable false\n        minifyEnabled true\n        shrinkResources true\n        proguardFiles getDefaultProguardFile('proguard-android.txt'), 'proguard-rules.pro'\n    }\n\n    debug {\n        debuggable true\n        minifyEnabled true\n        shrinkResources true\n        proguardFiles getDefaultProguardFile('proguard-android.txt'), 'proguard-rules.pro'\n    }\n}\n</code></pre></li>\n</ol>\n\n<p>The link with ProGuard settings for Android and other settings are available in these links:</p>\n\n<ul>\n<li><a href=\"https://developer.android.com/studio/build/shrink-code.html\" rel=\"noreferrer\">Default ProGuard file</a></li>\n<li><a href=\"https://gist.github.com/maheshwarLigade/7143ae567fe8ac7c1e20\" rel=\"noreferrer\">Gist with example</a></li>\n</ul>\n\n<p>For more detail go through <a href=\"https://techwasti.com/enabling-proguard-for-android/\" rel=\"noreferrer\">this link</a> </p>\n"},{"tags":[],"owner":{"account_id":3029321,"reputation":612,"user_id":2568673,"display_name":"appapurapu"},"down_vote_count":1,"up_vote_count":2,"is_accepted":false,"score":1,"last_activity_date":1523816704,"creation_date":1486395727,"answer_id":42071688,"question_id":35145540,"body_markdown":"if you are building the android project with jack, then it will automatically do the shrinking, obfuscation, repackaging and multidex.\r\nJust add below in :\r\n    \r\n    defaultConfig {\r\n           jackOptions {\r\n                enabled true\r\n            }        \r\n        }\r\n    \r\nand in build types, mention the project `proguard` file :\r\n\r\n    buildTypes {\r\n            release {\r\n                // Jack build environment does not require minifyEnabled or shrinkResources.\r\n                // Conceptually, the jack compiler consolidates the functionality of javac, ProGuard, and dex in a single conversion step\r\n                //minifyEnabled = true      \r\n                //shrinkResources true\r\n                \r\n                proguardFiles getDefaultProguardFile(&#39;proguard-android.txt&#39;), &#39;proguard-project.txt&#39;\r\n           }\r\n    \r\n           debug {\r\n    ...................\r\n            }\r\n        } \r\n    \r\n    \r\n    \r\nTo disable the ProGuard obfuscation, it is required to add below line in your proguard-project.txt file\r\n    \r\n    ####No obfuscation\r\n    -dontobfuscate\r\n\r\n","title":"How to enable ProGuard obfuscation in Android Studio?","body":"<p>if you are building the android project with jack, then it will automatically do the shrinking, obfuscation, repackaging and multidex.\nJust add below in :</p>\n\n<pre><code>defaultConfig {\n       jackOptions {\n            enabled true\n        }        \n    }\n</code></pre>\n\n<p>and in build types, mention the project <code>proguard</code> file :</p>\n\n<pre><code>buildTypes {\n        release {\n            // Jack build environment does not require minifyEnabled or shrinkResources.\n            // Conceptually, the jack compiler consolidates the functionality of javac, ProGuard, and dex in a single conversion step\n            //minifyEnabled = true      \n            //shrinkResources true\n\n            proguardFiles getDefaultProguardFile('proguard-android.txt'), 'proguard-project.txt'\n       }\n\n       debug {\n...................\n        }\n    } \n</code></pre>\n\n<p>To disable the ProGuard obfuscation, it is required to add below line in your proguard-project.txt file</p>\n\n<pre><code>####No obfuscation\n-dontobfuscate\n</code></pre>\n"}],"owner":{"account_id":5382785,"reputation":369,"user_id":4287598,"accept_rate":100,"display_name":"visual process"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":68169,"favorite_count":0,"down_vote_count":0,"up_vote_count":35,"accepted_answer_id":35145651,"answer_count":3,"score":35,"last_activity_date":1691594357,"creation_date":1454389999,"question_id":35145540,"body_markdown":"I have to protect my app by enabling Proguard obfuscation in Android Studio. I have searched for the process of how to apply it but i did not get any clear solution. When i try it, i always get an error. So can anyone tell me the clear steps to apply it in my app?\r\n\r\nI am doing this by the following steps:\r\n\r\n1. In Android Studio, open up an Android project.\r\n\r\n2. Change to Project View.\r\n\r\n3. Change the following line:\r\n\r\n  `minifyEnable false` to `minifyEnable true`\r\n\r\n4. Set ProGuard Rules(optional)\r\n\r\n   4.1 In Project View, select the proguard-rules.pro file.\r\n \r\n   4.2 Add in the following lines to tell ProGuard not to obfuscate certain classes. \r\n\r\n        -keepclassmembers class com.dom925.xxxx \r\n        {\r\n          public *\r\n        }\r\n\r\n**Error that I am getting by following the steps are** &lt;br&gt;\r\n\r\n&gt; Error:Execution failed for task &#39;:app:packageRelease&#39;.\r\n&gt; Unable to compute hash of D:\\Android\\Pojectname\\app\\build\\intermediates\\classes-proguard\\release\\classes.jar\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n","title":"How to enable ProGuard obfuscation in Android Studio?","body":"<p>I have to protect my app by enabling Proguard obfuscation in Android Studio. I have searched for the process of how to apply it but i did not get any clear solution. When i try it, i always get an error. So can anyone tell me the clear steps to apply it in my app?</p>\n\n<p>I am doing this by the following steps:</p>\n\n<ol>\n<li><p>In Android Studio, open up an Android project.</p></li>\n<li><p>Change to Project View.</p></li>\n<li><p>Change the following line:</p>\n\n<p><code>minifyEnable false</code> to <code>minifyEnable true</code></p></li>\n<li><p>Set ProGuard Rules(optional)</p>\n\n<p>4.1 In Project View, select the proguard-rules.pro file.</p>\n\n<p>4.2 Add in the following lines to tell ProGuard not to obfuscate certain classes. </p>\n\n<pre><code>-keepclassmembers class com.dom925.xxxx \n{\n  public *\n}\n</code></pre></li>\n</ol>\n\n<p><strong>Error that I am getting by following the steps are</strong> <br></p>\n\n<blockquote>\n  <p>Error:Execution failed for task ':app:packageRelease'.\n  Unable to compute hash of D:\\Android\\Pojectname\\app\\build\\intermediates\\classes-proguard\\release\\classes.jar</p>\n</blockquote>\n"},{"tags":["java","overloading"],"comments":[{"owner":{"account_id":1992310,"reputation":11172,"user_id":1786065,"accept_rate":91,"display_name":"Rogue"},"score":1,"creation_date":1691594512,"post_id":76868926,"comment_id":135513428,"body_markdown":"Note you have a `Boolean` object in the `SomeClImpl#getAttribute` method. You then cast that to `T`. _This_ is where the CCE arises, because you called `doSmth(someCl.getAttribute(...));`. Note the parameter you passed to `#getAttribute` doesn&#39;t matter, it just accepts `Object`. Using `&lt;T&gt; T` without any type of token is _dangerous_ for this reason: try passing a `Class&lt;T&gt;` parameter, which would let you do `someCl.getAttribute(boolean.class)` to call the boolean method.","body":"Note you have a <code>Boolean</code> object in the <code>SomeClImpl#getAttribute</code> method. You then cast that to <code>T</code>. <i>This</i> is where the CCE arises, because you called <code>doSmth(someCl.getAttribute(...));</code>. Note the parameter you passed to <code>#getAttribute</code> doesn&#39;t matter, it just accepts <code>Object</code>. Using <code>&lt;T&gt; T</code> without any type of token is <i>dangerous</i> for this reason: try passing a <code>Class&lt;T&gt;</code> parameter, which would let you do <code>someCl.getAttribute(boolean.class)</code> to call the boolean method."}],"answers":[{"tags":[],"owner":{"account_id":19118721,"reputation":6319,"user_id":13963086,"display_name":"k314159"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1691594253,"creation_date":1691594253,"answer_id":76869159,"question_id":76868926,"body_markdown":"The Java compiler chooses to call `doSmth(String b)` instead of `doSmth(Object b)` because of the language rule for [choosing the most specific method](https://docs.oracle.com/javase/specs/jls/se20/html/jls-15.html#jls-15.12.2.5).\r\n\r\nThe compiler doesn&#39;t know the type of the argument you pass to `doSmth`, which has a generic return type, so it chooses the most specific method.","title":"Method overloading and default return type of a parameterized method","body":"<p>The Java compiler chooses to call <code>doSmth(String b)</code> instead of <code>doSmth(Object b)</code> because of the language rule for <a href=\"https://docs.oracle.com/javase/specs/jls/se20/html/jls-15.html#jls-15.12.2.5\" rel=\"nofollow noreferrer\">choosing the most specific method</a>.</p>\n<p>The compiler doesn't know the type of the argument you pass to <code>doSmth</code>, which has a generic return type, so it chooses the most specific method.</p>\n"}],"owner":{"account_id":12419314,"reputation":535,"user_id":11968199,"display_name":"Maksym Kosenko"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":68,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":76869159,"answer_count":1,"score":2,"last_activity_date":1691594253,"creation_date":1691592457,"question_id":76868926,"body_markdown":"I have the following setup:\r\n\r\n```\r\npublic class SomeUtil {\r\n\r\n    public static void doSmth(boolean b) {\r\n        System.out.println(&quot;boolean&quot;);\r\n    }\r\n\r\n    public static void doSmth(String b) {\r\n        System.out.println(&quot;string&quot;);\r\n    }\r\n\r\n    public static void doSmth(Object b) {\r\n        System.out.println(&quot;object&quot;);\r\n    }\r\n}\r\n```\r\n\r\n```\r\npublic interface SomeCl {\r\n    &lt;T&gt; T getAttribute(Object var1);\r\n}\r\n```\r\n\r\n```\r\npublic class SomeClImpl implements SomeCl {\r\n    @Override\r\n    public &lt;T&gt; T getAttribute(Object var1) {\r\n        Boolean o = Boolean.TRUE;\r\n        return (T)o;\r\n    }\r\n}\r\n```\r\n\r\n```\r\npublic class Demo {\r\n    public static void main(String[] args) {\r\n        SomeCl someCl = new SomeClImpl();\r\n        SomeUtil.doSmth(someCl.getAttribute(Boolean.TRUE));\r\n    }\r\n}\r\n```\r\nAnd when I run the main method the execution fails with a ClassCastException:\r\n&gt; Exception in thread &quot;main&quot; java.lang.ClassCastException: class java.lang.Boolean cannot be cast to class java.lang.String (java.lang.Boolean and java.lang.String are in module java.base of loader &#39;bootstrap&#39;) at Demo2.main(Demo2.java:4)\r\n\r\nSo the question is: why is JVM trying to cast Boolean to String? Why not to Object?\r\n\r\n\r\np.s. please do not advice me to cast it manually before **someCl.getAttribute(arg)** method calling or call it like **someCl.&lt;/&lt;/DesiredType/&gt;/&gt;getAttribute(arg)**","title":"Method overloading and default return type of a parameterized method","body":"<p>I have the following setup:</p>\n<pre><code>public class SomeUtil {\n\n    public static void doSmth(boolean b) {\n        System.out.println(&quot;boolean&quot;);\n    }\n\n    public static void doSmth(String b) {\n        System.out.println(&quot;string&quot;);\n    }\n\n    public static void doSmth(Object b) {\n        System.out.println(&quot;object&quot;);\n    }\n}\n</code></pre>\n<pre><code>public interface SomeCl {\n    &lt;T&gt; T getAttribute(Object var1);\n}\n</code></pre>\n<pre><code>public class SomeClImpl implements SomeCl {\n    @Override\n    public &lt;T&gt; T getAttribute(Object var1) {\n        Boolean o = Boolean.TRUE;\n        return (T)o;\n    }\n}\n</code></pre>\n<pre><code>public class Demo {\n    public static void main(String[] args) {\n        SomeCl someCl = new SomeClImpl();\n        SomeUtil.doSmth(someCl.getAttribute(Boolean.TRUE));\n    }\n}\n</code></pre>\n<p>And when I run the main method the execution fails with a ClassCastException:</p>\n<blockquote>\n<p>Exception in thread &quot;main&quot; java.lang.ClassCastException: class java.lang.Boolean cannot be cast to class java.lang.String (java.lang.Boolean and java.lang.String are in module java.base of loader 'bootstrap') at Demo2.main(Demo2.java:4)</p>\n</blockquote>\n<p>So the question is: why is JVM trying to cast Boolean to String? Why not to Object?</p>\n<p>p.s. please do not advice me to cast it manually before <strong>someCl.getAttribute(arg)</strong> method calling or call it like <strong>someCl.&lt;/&lt;/DesiredType/&gt;/&gt;getAttribute(arg)</strong></p>\n"},{"tags":["java","arrays","sorting","lambda","java-8"],"comments":[{"owner":{"account_id":1734091,"reputation":92376,"user_id":1587046,"accept_rate":62,"display_name":"Alexis C."},"score":0,"creation_date":1393171887,"post_id":21970719,"comment_id":33291357,"body_markdown":"_&quot;Did it exactly the same way, yet it doesn&#39;t work.&quot;_ No you didn&#39;t, read carefully what they did. You have syntax errors.","body":"<i>&quot;Did it exactly the same way, yet it doesn&#39;t work.&quot;</i> No you didn&#39;t, read carefully what they did. You have syntax errors."},{"owner":{"account_id":1306954,"reputation":11661,"user_id":1255746,"accept_rate":78,"display_name":"Josh M"},"score":0,"creation_date":1393172510,"post_id":21970719,"comment_id":33291596,"body_markdown":"@ZouZou Perhaps he did. I don&#39;t think the OP is even using Java 8.","body":"@ZouZou Perhaps he did. I don&#39;t think the OP is even using Java 8."}],"answers":[{"tags":[],"owner":{"account_id":1306954,"reputation":11661,"user_id":1255746,"accept_rate":78,"display_name":"Josh M"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1393172083,"creation_date":1393172083,"answer_id":21970798,"question_id":21970719,"body_markdown":"You&#39;re looking for this:\r\n\r\n    Arrays.sort(months, (a, b) -&gt; Integer.signum(a.length() - b.length()));\r\n","title":"java: Arrays.sort() with lambda expression","body":"<p>You're looking for this:</p>\n\n<pre><code>Arrays.sort(months, (a, b) -&gt; Integer.signum(a.length() - b.length()));\n</code></pre>\n"},{"tags":[],"owner":{"account_id":440158,"reputation":323231,"user_id":829571,"accept_rate":94,"display_name":"assylias"},"down_vote_count":0,"up_vote_count":86,"is_accepted":true,"score":86,"last_activity_date":1477656862,"creation_date":1393172118,"answer_id":21970805,"question_id":21970719,"body_markdown":"The cleanest way would be:\r\n\r\n    Arrays.sort(months, Comparator.comparingInt(String::length));\r\n\r\nor, with a static import:\r\n\r\n    Arrays.sort(months, comparingInt(String::length));\r\n\r\n----\r\n\r\nHowever, this would work too but is more verbose:\r\n\r\n    Arrays.sort(months,\r\n                (String a, String b) -&gt; a.length() - b.length());\r\n\r\nOr shorter:\r\n\r\n    Arrays.sort(months, (a, b) -&gt; a.length() - b.length());\r\n\r\n----\r\nFinally your last one:\r\n\r\n    Arrays.sort(months, \r\n        (String a, String b) -&gt; { return Integer.signum(a.length() - b.length()) }; \r\n    );\r\n\r\nhas the `;` misplaced - it should be:\r\n\r\n    Arrays.sort(months, \r\n        (String a, String b) -&gt; { return Integer.signum(a.length() - b.length()); }\r\n    );\r\n","title":"java: Arrays.sort() with lambda expression","body":"<p>The cleanest way would be:</p>\n\n<pre><code>Arrays.sort(months, Comparator.comparingInt(String::length));\n</code></pre>\n\n<p>or, with a static import:</p>\n\n<pre><code>Arrays.sort(months, comparingInt(String::length));\n</code></pre>\n\n<hr>\n\n<p>However, this would work too but is more verbose:</p>\n\n<pre><code>Arrays.sort(months,\n            (String a, String b) -&gt; a.length() - b.length());\n</code></pre>\n\n<p>Or shorter:</p>\n\n<pre><code>Arrays.sort(months, (a, b) -&gt; a.length() - b.length());\n</code></pre>\n\n<hr>\n\n<p>Finally your last one:</p>\n\n<pre><code>Arrays.sort(months, \n    (String a, String b) -&gt; { return Integer.signum(a.length() - b.length()) }; \n);\n</code></pre>\n\n<p>has the <code>;</code> misplaced - it should be:</p>\n\n<pre><code>Arrays.sort(months, \n    (String a, String b) -&gt; { return Integer.signum(a.length() - b.length()); }\n);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3659411,"reputation":40844,"user_id":3049628,"accept_rate":78,"display_name":"Tim B"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1393173332,"creation_date":1393173332,"answer_id":21971055,"question_id":21970719,"body_markdown":"The functionality you are looking for is in Java 8, which has not yet been released. It is scheduled for release in a few months if you want to wait, or if not beta downloads are available.\r\n","title":"java: Arrays.sort() with lambda expression","body":"<p>The functionality you are looking for is in Java 8, which has not yet been released. It is scheduled for release in a few months if you want to wait, or if not beta downloads are available.</p>\n"},{"tags":[],"owner":{"account_id":26901436,"reputation":1,"user_id":20478516,"display_name":"Mohamed Bilal D"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691593395,"creation_date":1691593395,"answer_id":76869043,"question_id":21970719,"body_markdown":"You can try this:\r\n\r\n    Arrays.sort(months, (a,b) -&gt; Integer.compare(a.length(), b.length()));","title":"java: Arrays.sort() with lambda expression","body":"<p>You can try this:</p>\n<pre><code>Arrays.sort(months, (a,b) -&gt; Integer.compare(a.length(), b.length()));\n</code></pre>\n"}],"owner":{"account_id":3468605,"reputation":1689,"user_id":2903567,"accept_rate":80,"display_name":"matt-pielat"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":132970,"favorite_count":0,"down_vote_count":0,"up_vote_count":34,"accepted_answer_id":21970805,"answer_count":4,"score":34,"last_activity_date":1691593395,"creation_date":1393171663,"question_id":21970719,"body_markdown":"I want to sort String elements in the array `months` by length using `Arrays.sort` method. I was told [here](http://docs.oracle.com/javase/tutorial/java/javaOO/methodreferences.html), that it&#39;s possible to use lambda expressions instead of creating new class implementing Comparator&lt;String&gt;. Did it exactly the same way, yet it doesn&#39;t work.\r\n\r\n\timport java.util.Arrays;\r\n\timport java.util.Comparator;\r\n\r\n\tpublic class MainClass {\r\n\tpublic static void main(String[] args)\r\n\t{\r\n\t\t\r\n\t\tString[] months = {&quot;January&quot;,&quot;February&quot;,&quot;March&quot;,&quot;April&quot;,&quot;May&quot;,&quot;June&quot;,&quot;July&quot;,&quot;August&quot;,&quot;September&quot;,&quot;October&quot;,&quot;December&quot;};\r\n\t\t\r\n\t\tSystem.out.println(Arrays.toString(months)); //printing before\r\n\t\t\r\n\t\t\r\n\t\t//neither this works:\r\n\t\tArrays.sort(months, \r\n\t\t\t\t(a, b) -&gt; Integer.signum(a.length() - b.length())   \r\n\t\t);\r\n\r\n\t\t//nor this:\r\n\t\tArrays.sort(months, \r\n\t\t\t\t(String a, String b) -&gt; { return Integer.signum(a.length() - b.length()) }; \r\n\t\t);\r\n\r\n\r\n\t\tSystem.out.println(Arrays.toString(months)); //printing after\r\n\t}\r\n\t}","title":"java: Arrays.sort() with lambda expression","body":"<p>I want to sort String elements in the array <code>months</code> by length using <code>Arrays.sort</code> method. I was told <a href=\"http://docs.oracle.com/javase/tutorial/java/javaOO/methodreferences.html\" rel=\"noreferrer\">here</a>, that it's possible to use lambda expressions instead of creating new class implementing Comparator. Did it exactly the same way, yet it doesn't work.</p>\n\n<pre><code>import java.util.Arrays;\nimport java.util.Comparator;\n\npublic class MainClass {\npublic static void main(String[] args)\n{\n\n    String[] months = {\"January\",\"February\",\"March\",\"April\",\"May\",\"June\",\"July\",\"August\",\"September\",\"October\",\"December\"};\n\n    System.out.println(Arrays.toString(months)); //printing before\n\n\n    //neither this works:\n    Arrays.sort(months, \n            (a, b) -&gt; Integer.signum(a.length() - b.length())   \n    );\n\n    //nor this:\n    Arrays.sort(months, \n            (String a, String b) -&gt; { return Integer.signum(a.length() - b.length()) }; \n    );\n\n\n    System.out.println(Arrays.toString(months)); //printing after\n}\n}\n</code></pre>\n"},{"tags":["java","spring-integration-dsl"],"owner":{"account_id":29191196,"reputation":1,"user_id":22363291,"display_name":"Ilya Ilya"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":42,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1691593290,"creation_date":1691578956,"question_id":76867135,"body_markdown":"I have a code similar to this and my main problem that in first transform method the generic for the Message.class is &lt;MessageEvent&gt; and for the second one is &lt;String&gt; (because in the first one we transforming the payload from Message.class from MessageEvent.class to String.class) and as I specifying the same class (Message.class) in the second transform message spring applcation context also expect Message&lt;MessageEvent&gt;, but getting Message&lt;String&gt; and throwing exception below. I can&#39;t specify payload classes directly, because we also have we also use Headers in Message.class, that we need. \r\n\r\n```java\r\n@Override\r\n  protected IntegrationFlowDefinition&lt;?&gt; buildFlow() {\r\n        return IntegrationFlow.from(Kafka.messageDrivenChannelAdapter(consumerFactory, sourceTopic)))\r\n            .publishSubscribeChannel(channel -&gt; {\r\n                channel.subscribe(flow -&gt; flow\r\n                    .transform(Message.class, firstClass::someMethod)\r\n                    .transform(Message.class, secondClass::someMethod)\r\n                    .intercept(doLog(log, Level.INFO, &quot;OUT&quot;))\r\n                    .handle(Jms.outboundAdapter(connectionFactory)\r\n                        .headerMapper(jmsHeaderMapper)\r\n                        .destination(outputQueue)));\r\n    }\r\n```\r\n\r\nException message:\r\n\r\n```\r\n    no suitable method found for transform(Class, firstClass[...]method)\r\n    .transform(Message.class, firstClass::someMethod)\r\n    ^\r\n    method BaseIntegrationFlowDefinition.transform(String, Consumer) is not applicable (argument mismatch; Class cannot be converted to String)\r\n    method BaseIntegrationFlowDefinition.transform(Object, String) is not applicable (argument mismatch; String is not a functional interface)\r\n    method BaseIntegrationFlowDefinition.transform(MessageProcessorSpec, Consumer) is not applicable (argument mismatch; Class cannot be converted to MessageProcessorSpec)\r\n    method BaseIntegrationFlowDefinition.transform(Class, GenericTransformer) is not applicable (argument mismatch; invalid method reference incompatible types: Object cannot be converted to Message)\r\n    method IntegrationFlowDefinition.transform(GenericTransformer, Consumer) is not applicable (argument mismatch; Class cannot be converted to GenericTransformer)\r\n```\r\n\r\nI found solution with workaround how to directly specify generic for the class (&quot;(Class&lt;Message&lt;MessageEvent&gt;&gt;) (Class&lt;?&gt;) Message.class&quot;) and it is works correctly, but I don&#39;t think that it is the best approach. How can I resolve this issue without that workaround? \r\n\r\nIf i specify methods without expected class I&#39;m getting classCastException, because of the same issue\r\n```java\r\n    @Override\r\n    protected IntegrationFlowDefinition&lt;?&gt; buildFlow() {\r\n        return IntegrationFlow.from(Kafka.messageDrivenChannelAdapter()))\r\n            .publishSubscribeChannel(channel -&gt; {\r\n                channel.subscribe(flow -&gt; flow\r\n                    .transform(firstClass::someMethod)\r\n                    .transform(secondClass::someMethod)\r\n                    .intercept(doLog(log, Level.INFO, &quot;OUT&quot;))\r\n                    .handle()\r\n```","title":"Java Spring DSL Is it possible to use two transformers with Message.class but different Generics in it?","body":"<p>I have a code similar to this and my main problem that in first transform method the generic for the Message.class is  and for the second one is  (because in the first one we transforming the payload from Message.class from MessageEvent.class to String.class) and as I specifying the same class (Message.class) in the second transform message spring applcation context also expect Message, but getting Message and throwing exception below. I can't specify payload classes directly, because we also have we also use Headers in Message.class, that we need.</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Override\n  protected IntegrationFlowDefinition&lt;?&gt; buildFlow() {\n        return IntegrationFlow.from(Kafka.messageDrivenChannelAdapter(consumerFactory, sourceTopic)))\n            .publishSubscribeChannel(channel -&gt; {\n                channel.subscribe(flow -&gt; flow\n                    .transform(Message.class, firstClass::someMethod)\n                    .transform(Message.class, secondClass::someMethod)\n                    .intercept(doLog(log, Level.INFO, &quot;OUT&quot;))\n                    .handle(Jms.outboundAdapter(connectionFactory)\n                        .headerMapper(jmsHeaderMapper)\n                        .destination(outputQueue)));\n    }\n</code></pre>\n<p>Exception message:</p>\n<pre><code>    no suitable method found for transform(Class, firstClass[...]method)\n    .transform(Message.class, firstClass::someMethod)\n    ^\n    method BaseIntegrationFlowDefinition.transform(String, Consumer) is not applicable (argument mismatch; Class cannot be converted to String)\n    method BaseIntegrationFlowDefinition.transform(Object, String) is not applicable (argument mismatch; String is not a functional interface)\n    method BaseIntegrationFlowDefinition.transform(MessageProcessorSpec, Consumer) is not applicable (argument mismatch; Class cannot be converted to MessageProcessorSpec)\n    method BaseIntegrationFlowDefinition.transform(Class, GenericTransformer) is not applicable (argument mismatch; invalid method reference incompatible types: Object cannot be converted to Message)\n    method IntegrationFlowDefinition.transform(GenericTransformer, Consumer) is not applicable (argument mismatch; Class cannot be converted to GenericTransformer)\n</code></pre>\n<p>I found solution with workaround how to directly specify generic for the class (&quot;(Class&lt;Message&gt;) (Class&lt;?&gt;) Message.class&quot;) and it is works correctly, but I don't think that it is the best approach. How can I resolve this issue without that workaround?</p>\n<p>If i specify methods without expected class I'm getting classCastException, because of the same issue</p>\n<pre class=\"lang-java prettyprint-override\"><code>    @Override\n    protected IntegrationFlowDefinition&lt;?&gt; buildFlow() {\n        return IntegrationFlow.from(Kafka.messageDrivenChannelAdapter()))\n            .publishSubscribeChannel(channel -&gt; {\n                channel.subscribe(flow -&gt; flow\n                    .transform(firstClass::someMethod)\n                    .transform(secondClass::someMethod)\n                    .intercept(doLog(log, Level.INFO, &quot;OUT&quot;))\n                    .handle()\n</code></pre>\n"},{"tags":["java","trim"],"comments":[{"owner":{"account_id":45213,"reputation":26348,"user_id":133203,"accept_rate":97,"display_name":"Federico klez Culloca"},"score":3,"creation_date":1691580275,"post_id":76867286,"comment_id":135510128,"body_markdown":"It&#39;s unclear to me what the input text looks like and what the output would be. Can you please edit your question to include a relevant sample of this text and the output you expect? There&#39;s no way to exclude characters from `trim`, but an alternate solution may be possible knowing the inputs and outputs.","body":"It&#39;s unclear to me what the input text looks like and what the output would be. Can you please edit your question to include a relevant sample of this text and the output you expect? There&#39;s no way to exclude characters from <code>trim</code>, but an alternate solution may be possible knowing the inputs and outputs."},{"owner":{"account_id":462886,"reputation":2853,"user_id":865448,"accept_rate":82,"display_name":"tostao"},"score":0,"creation_date":1691580329,"post_id":76867286,"comment_id":135510138,"body_markdown":"Please add kind of example what have you done/tried and what is needed.","body":"Please add kind of example what have you done/tried and what is needed."},{"owner":{"account_id":18670408,"reputation":143,"user_id":13609359,"display_name":"Slevin"},"score":3,"creation_date":1691584361,"post_id":76867286,"comment_id":135510993,"body_markdown":"Why don&#39;t you split on `\\n`, trim and then add `\\n` to each row afterwards? When splitting on new line char  like `text.split(&quot;\\n&quot;)` this sequence gets lost anyway and must be put back afterwards. I would anyway rather suggest to split on `\\\\R` which is Java&#39;s new version of detecting new lines: `text.split(&quot;\\\\R&quot;)`","body":"Why don&#39;t you split on <code>\\n</code>, trim and then add <code>\\n</code> to each row afterwards? When splitting on new line char  like <code>text.split(&quot;\\n&quot;)</code> this sequence gets lost anyway and must be put back afterwards. I would anyway rather suggest to split on <code>\\\\R</code> which is Java&#39;s new version of detecting new lines: <code>text.split(&quot;\\\\R&quot;)</code>"},{"owner":{"account_id":22057425,"reputation":135,"user_id":16320675,"display_name":"user16320675"},"score":0,"creation_date":1691595700,"post_id":76867286,"comment_id":135513732,"body_markdown":"and add the second argument as in `text.split(&quot;\\n&quot;, -1)` (to @Slevin suggestion) if you want to preserve all `\\n` (including the ones on the end of the text)","body":"and add the second argument as in <code>text.split(&quot;\\n&quot;, -1)</code> (to @Slevin suggestion) if you want to preserve all <code>\\n</code> (including the ones on the end of the text)"},{"owner":{"account_id":22057425,"reputation":135,"user_id":16320675,"display_name":"user16320675"},"score":0,"creation_date":1691596232,"post_id":76867286,"comment_id":135513852,"body_markdown":"I would  also test `text.stripIndent().indent(Integer.MIN_VALUE)` (but not sure if I did understand the question correctly)","body":"I would  also test <code>text.stripIndent().indent(Integer.MIN_VALUE)</code> (but not sure if I did understand the question correctly)"}],"answers":[{"tags":[],"owner":{"account_id":7655262,"reputation":7506,"user_id":5802417,"display_name":"Michael Gantman"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691591452,"creation_date":1691581377,"answer_id":76867444,"question_id":76867286,"body_markdown":"You will have to do it manually, but it is not that hard. If you already split your string into multiple strings based on `\\n` character than all your string will only have character `\\n` only once or not at all, and if your String has `\\n` character it will always will be the last one. So, what you can do is\r\n\r\n    boolean newLinePresent = myString.endsWith(&quot;\\n&quot;);\r\n    myString = myString.trim();\r\n    if(newLinePresent) {\r\n      myString = myString + &quot;\\n&quot;;\r\n    }","title":"How to exclude &quot;\\n&quot; escape character from trim() method?","body":"<p>You will have to do it manually, but it is not that hard. If you already split your string into multiple strings based on <code>\\n</code> character than all your string will only have character <code>\\n</code> only once or not at all, and if your String has <code>\\n</code> character it will always will be the last one. So, what you can do is</p>\n<pre><code>boolean newLinePresent = myString.endsWith(&quot;\\n&quot;);\nmyString = myString.trim();\nif(newLinePresent) {\n  myString = myString + &quot;\\n&quot;;\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2053598,"reputation":41316,"user_id":1831987,"display_name":"VGR"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1691593108,"creation_date":1691593108,"answer_id":76869014,"question_id":76867286,"body_markdown":"If you’re reading from a file, don’t read the entire file content into a single string.  Instead, trim each line:\r\n\r\n    List&lt;String&gt; lines = new ArrayList&lt;&gt;();\r\n\r\n    try (BufferedReader reader = Files.newBufferedReader(\r\n            Path.of(&quot;C:\\\\Users\\\\caliskanata\\\\Documents\\\\file.txt&quot;))) {\r\n\r\n        String line;\r\n        while ((line = reader.readLine()) != null) {\r\n            lines.add(line.trim());\r\n        }\r\n    }\r\n\r\nIf your text is not coming from a file, you can split it as Slevin suggested, and trim each part:\r\n\r\n    String[] untrimmedLines = text.split(&quot;\\\\R&quot;);\r\n    List&lt;String&gt; lines = new ArrayList&lt;&gt;(untrimmedLines.length);\r\n    for (String untrimmedLine : untrimmedLines) {\r\n        lines.add(untrimmedLine.trim());\r\n    }\r\n\r\nYou can also do it with a [Stream](https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/util/regex/Pattern.html#splitAsStream(java.lang.CharSequence)):\r\n\r\n    List&lt;String&gt; lines =\r\n        Pattern.compile(&quot;\\\\R&quot;).splitAsStream(text).map(String::trim).toList();\r\n\r\nSince you wrote “save them into an array,” you can easily convert a List to an array:\r\n\r\n    String[] array = lines.toArray(String[]::new);\r\n","title":"How to exclude &quot;\\n&quot; escape character from trim() method?","body":"<p>If you’re reading from a file, don’t read the entire file content into a single string.  Instead, trim each line:</p>\n<pre><code>List&lt;String&gt; lines = new ArrayList&lt;&gt;();\n\ntry (BufferedReader reader = Files.newBufferedReader(\n        Path.of(&quot;C:\\\\Users\\\\caliskanata\\\\Documents\\\\file.txt&quot;))) {\n\n    String line;\n    while ((line = reader.readLine()) != null) {\n        lines.add(line.trim());\n    }\n}\n</code></pre>\n<p>If your text is not coming from a file, you can split it as Slevin suggested, and trim each part:</p>\n<pre><code>String[] untrimmedLines = text.split(&quot;\\\\R&quot;);\nList&lt;String&gt; lines = new ArrayList&lt;&gt;(untrimmedLines.length);\nfor (String untrimmedLine : untrimmedLines) {\n    lines.add(untrimmedLine.trim());\n}\n</code></pre>\n<p>You can also do it with a <a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/util/regex/Pattern.html#splitAsStream(java.lang.CharSequence)\" rel=\"nofollow noreferrer\">Stream</a>:</p>\n<pre><code>List&lt;String&gt; lines =\n    Pattern.compile(&quot;\\\\R&quot;).splitAsStream(text).map(String::trim).toList();\n</code></pre>\n<p>Since you wrote “save them into an array,” you can easily convert a List to an array:</p>\n<pre><code>String[] array = lines.toArray(String[]::new);\n</code></pre>\n"}],"owner":{"account_id":24808949,"reputation":548,"user_id":18690626,"display_name":"eaidy"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":88,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1691593108,"creation_date":1691580139,"question_id":76867286,"body_markdown":"Given a text, it contains information rows as new lines. I need to perform something like a custom parsing to split these rows and save them into an array. Since the new lines in the text are determined by the escape character &quot;\\n&quot;, i&#39;m performing the parsing according to these escape characters. The problem is, some text data comes with a lot of whitespaces outside the main data text. And when i proceed to perform another split operation to turn the rows into key, value pairs, these whitespaces causing me problems during runtime.\r\n\r\nIs there a way in Java so i can trim a String but exclude &quot;\\n&quot; escape character ?\r\n\r\n","title":"How to exclude &quot;\\n&quot; escape character from trim() method?","body":"<p>Given a text, it contains information rows as new lines. I need to perform something like a custom parsing to split these rows and save them into an array. Since the new lines in the text are determined by the escape character &quot;\\n&quot;, i'm performing the parsing according to these escape characters. The problem is, some text data comes with a lot of whitespaces outside the main data text. And when i proceed to perform another split operation to turn the rows into key, value pairs, these whitespaces causing me problems during runtime.</p>\n<p>Is there a way in Java so i can trim a String but exclude &quot;\\n&quot; escape character ?</p>\n"},{"tags":["java","string","string-interning","string-pool"],"comments":[{"owner":{"account_id":71739,"reputation":307142,"user_id":207421,"accept_rate":82,"display_name":"user207421"},"score":0,"creation_date":1688032405,"post_id":76579840,"comment_id":135020546,"body_markdown":"You&#39;re overlooking the possibility that the compiler elided your redundant `new String(&quot;12&quot;)` and `new String(&quot;21&quot;)` into `&quot;1221&quot;` at compile time.","body":"You&#39;re overlooking the possibility that the compiler elided your redundant <code>new String(&quot;12&quot;)</code> and <code>new String(&quot;21&quot;)</code> into <code>&quot;1221&quot;</code> at compile time."},{"owner":{"account_id":6651855,"reputation":224830,"user_id":5133585,"accept_rate":96,"display_name":"Sweeper"},"score":0,"creation_date":1688032486,"post_id":76579840,"comment_id":135020559,"body_markdown":"@user207421 In that case whether `intern` is called would not matter and both cases should print true.","body":"@user207421 In that case whether <code>intern</code> is called would not matter and both cases should print true."},{"owner":{"account_id":6651855,"reputation":224830,"user_id":5133585,"accept_rate":96,"display_name":"Sweeper"},"score":0,"creation_date":1688032690,"post_id":76579840,"comment_id":135020604,"body_markdown":"I think this is just unspecified behaviour. Nothing says this cannot happen. Nothing I can find says that the string literal has to be *in* the string pool by the time `intern` is called. `intern` could have added `new String(&quot;12&quot;) + new String(&quot;21&quot;)` to the string pool instead, and `&quot;1221&quot;` refers to the interned string.","body":"I think this is just unspecified behaviour. Nothing says this cannot happen. Nothing I can find says that the string literal has to be <i>in</i> the string pool by the time <code>intern</code> is called. <code>intern</code> could have added <code>new String(&quot;12&quot;) + new String(&quot;21&quot;)</code> to the string pool instead, and <code>&quot;1221&quot;</code> refers to the interned string."},{"owner":{"account_id":23570686,"reputation":37,"user_id":17610861,"display_name":"DracoYu"},"score":0,"creation_date":1688034868,"post_id":76579840,"comment_id":135020981,"body_markdown":"@user207421 I have checked the bytecode, and at least it call the new Instruction.    7 new #4 &lt;java/lang/String&gt;. And I have no reason to believe it was optimized in the JIT stage.","body":"@user207421 I have checked the bytecode, and at least it call the new Instruction.    7 new #4 &lt;java/lang/String&gt;. And I have no reason to believe it was optimized in the JIT stage."},{"owner":{"account_id":23570686,"reputation":37,"user_id":17610861,"display_name":"DracoYu"},"score":0,"creation_date":1688035926,"post_id":76579840,"comment_id":135021126,"body_markdown":"@Sweeper So is there any difference between constant pool and string pool? [constant pool](https://docs.oracle.com/javase/specs/jvms/se8/html/jvms-4.html#jvms-4.4) and [Run-Time Constant Pool](https://docs.oracle.com/javase/specs/jvms/se8/html/jvms-5.html#jvms-5.1). I have not seen string pool in JVM Specification. So I consider string pool as a part of run-time constant pool, and it was loaded at &quot;Loading, Linking, and Initializing&quot; stage while a class was loaded by classloader.","body":"@Sweeper So is there any difference between constant pool and string pool? <a href=\"https://docs.oracle.com/javase/specs/jvms/se8/html/jvms-4.html#jvms-4.4\" rel=\"nofollow noreferrer\">constant pool</a> and <a href=\"https://docs.oracle.com/javase/specs/jvms/se8/html/jvms-5.html#jvms-5.1\" rel=\"nofollow noreferrer\">Run-Time Constant Pool</a>. I have not seen string pool in JVM Specification. So I consider string pool as a part of run-time constant pool, and it was loaded at &quot;Loading, Linking, and Initializing&quot; stage while a class was loaded by classloader."},{"owner":{"account_id":6651855,"reputation":224830,"user_id":5133585,"accept_rate":96,"display_name":"Sweeper"},"score":0,"creation_date":1688036323,"post_id":76579840,"comment_id":135021198,"body_markdown":"Oh wait, the answer to your question is literally in the second link: &quot;If the method `String.intern` has previously been called on an instance of class `String` containing a sequence of Unicode code points identical to that given by the `CONSTANT_String_info` structure, then the result of string literal derivation is a `reference` to that same instance of class `String`.&quot;","body":"Oh wait, the answer to your question is literally in the second link: &quot;If the method <code>String.intern</code> has previously been called on an instance of class <code>String</code> containing a sequence of Unicode code points identical to that given by the <code>CONSTANT_String_info</code> structure, then the result of string literal derivation is a <code>reference</code> to that same instance of class <code>String</code>.&quot;"},{"owner":{"account_id":23570686,"reputation":37,"user_id":17610861,"display_name":"DracoYu"},"score":0,"creation_date":1688049632,"post_id":76579840,"comment_id":135024269,"body_markdown":"@Sweeper That make sense! The constant pool and string pool are indeed different. The Unicode code point in bytecode constant pool was loaded into run-time constant pool when class loaded. While that corresponding String instance was not created in string pool. In constant pool is just a Unicode sequence, while in string pool is a string instance, which contains other fields in addition to the Unicode sequence. The string instance is create and added into string pool when `ldc` instruction first push a string constant from constant pool or call intern function on string instance manually.","body":"@Sweeper That make sense! The constant pool and string pool are indeed different. The Unicode code point in bytecode constant pool was loaded into run-time constant pool when class loaded. While that corresponding String instance was not created in string pool. In constant pool is just a Unicode sequence, while in string pool is a string instance, which contains other fields in addition to the Unicode sequence. The string instance is create and added into string pool when <code>ldc</code> instruction first push a string constant from constant pool or call intern function on string instance manually."},{"owner":{"account_id":23570686,"reputation":37,"user_id":17610861,"display_name":"DracoYu"},"score":0,"creation_date":1688050734,"post_id":76579840,"comment_id":135024547,"body_markdown":"@user16320675 Thank you so much to correct my misunderstanding on &quot;String Pool&quot; and &quot;Constant Pool&quot;. There is too much misinformation about it on the web. Its name is indeed misleading - we usally call &quot;string constant pool&quot;, and we do see CONSTANT_String_info in constant pool of bytecode. So in the above code, there is There are three identical &quot;1221&quot; sequences in memory. One is string object in heap by calling `StringBuilder.toString()`, One is string object added to string pool by calling `intern()` function, and the last is Unicode sequences in constant pool.","body":"@user16320675 Thank you so much to correct my misunderstanding on &quot;String Pool&quot; and &quot;Constant Pool&quot;. There is too much misinformation about it on the web. Its name is indeed misleading - we usally call &quot;string constant pool&quot;, and we do see CONSTANT_String_info in constant pool of bytecode. So in the above code, there is There are three identical &quot;1221&quot; sequences in memory. One is string object in heap by calling <code>StringBuilder.toString()</code>, One is string object added to string pool by calling <code>intern()</code> function, and the last is Unicode sequences in constant pool."},{"owner":{"account_id":23570686,"reputation":37,"user_id":17610861,"display_name":"DracoYu"},"score":0,"creation_date":1688051399,"post_id":76579840,"comment_id":135024690,"body_markdown":"@user16320675 The last question I&#39;m not sure about is that I can&#39;t see the code or entry of the string pool in the String class source code. Which is said &quot;A pool of strings, initially empty, is maintained privately by the class String&quot; in [string](https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/lang/String.html#intern()) . And there is no more description in the JVM specification. Maybe it depends on the specific jvm implementation. And maybe Hotspot treats the string class in a special way and does extra work, compared to other custom classes.","body":"@user16320675 The last question I&#39;m not sure about is that I can&#39;t see the code or entry of the string pool in the String class source code. Which is said &quot;A pool of strings, initially empty, is maintained privately by the class String&quot; in <a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/lang/String.html#intern()\" rel=\"nofollow noreferrer\">string</a> . And there is no more description in the JVM specification. Maybe it depends on the specific jvm implementation. And maybe Hotspot treats the string class in a special way and does extra work, compared to other custom classes."}],"answers":[{"tags":[],"owner":{"account_id":23570686,"reputation":37,"user_id":17610861,"display_name":"DracoYu"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1691567895,"creation_date":1691567895,"answer_id":76865704,"question_id":76579840,"body_markdown":"I am the questioner.\r\n\r\nThanks for the discussion with @Sweeper and @user16320675, I have new understanding of this problem, and I share it with you here.\r\n\r\nThe error occurred in understanding 2 and 6, the string pool was not loaded along with the class loading. `s1.intern()` is the first time adds &quot;1221&quot; to the string pool. And then `String s2 = &quot;1221&quot;` will change the behavior according to whether &quot;1221&quot; exists in the string pool.\r\n\r\nIn order to better explain this problem, first define the key concepts involved.\r\n\r\n## key concept\r\n\r\n - [Constant pool](https://docs.oracle.com/javase/specs/jvms/se8/html/jvms-4.html#jvms-4.4): A Data structure in bytecode, used to store constants, strings, classes, fields, methods, interfaces, parameter types, etc. used in source code. Stored in a bytecode file on the hard disk.\r\n - [Runtime constant pool](https://docs.oracle.com/javase/specs/jvms/se8/html/jvms-5.html#jvms-5.1): When the program is running, the constant pool in memory. When the class is loaded, the constant pool data will be loaded into the JVM method area to form a runtime constant pool.\r\n - [CONSTANT_String_info](https://docs.oracle.com/javase/specs/jvms/se8/html/jvms-4.html#jvms-4.4.3): A data structure in the constant pool, which stores the Unicode sequence corresponding to the string literal in the source code\r\n - [String pool](https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/lang/String.html#intern()): A memory area in the JDK8 heap for accessing used String instances.\r\n - [ldc #5](https://docs.oracle.com/javase/specs/jvms/se19/html/jvms-6.html#jvms-6.5.ldc): push the No.5 constant from the runtime constant pool to the operand stack. When using a string represented by a literal, it will first check whether there is a corresponding string instance in the string pool. If it exists, its reference address is pushed into the stack; if it does not exist, a string instance is created in the string pool and its address is pushed into the stack.\r\n\r\n## wrong reason\r\n\r\nThe error comes from misunderstanding the relationship between the `string pool` and the `constant pool` (hereafter using the constant pool and the runtime constant pool indiscriminately).\r\n\r\nAlthough it is usually called `string constant pool`, it does not have a relationship with the `constant pool`. Therefore, it will not be loaded as the class is loaded. In JDK6, both the `string pool` and the `constant pool` are located in the permanent generation, and there seems to be some relationship between them. But in JDK8, the `string pool` was moved to the heap. It is not so much part of the `constant pool` as it is part of the `String class`. It can be understood as a private member variable of the `String class`, although it cannot be observed in the `String` source code.\r\n\r\nAfter the `String instance` in the `string pool` is created, the byte array in the `instance` cannot be changed. If a change operation is performed on an existing `String instance`, a new `String instance` will be generated, showing the characteristics of a constant, so it is usually called a `string constant pool`. But in order to avoid confusing the `string pool` and the `constant pool`, I tries to use the `string pool` instead of the string constant pool.\r\n\r\nAnother concept that is easily confused with it is `CONSTANT_String_info` in the `constant pool`. `String literals` are stored in Unicode sequences, and will be loaded into the `runtime constant pool` along with class loading. But it is fundamentally different from the `string pool`: `CONSTANT_String_info` only stores `Unicode sequences`, while the string pool stores `String instances`. `String instances` not only contain `Unicode sequences`, but also other member attributes, such as hash. And the `String class` is bound with many methods which cannot be executed on `CONSTANT_String_info`. The corresponding `String instance` can be generated by executing the String initialization function with the Unicode sequence in `CONSTANT_String_info` as a parameter.\r\n","title":"Java String intern function and ==","body":"<p>I am the questioner.</p>\n<p>Thanks for the discussion with @Sweeper and @user16320675, I have new understanding of this problem, and I share it with you here.</p>\n<p>The error occurred in understanding 2 and 6, the string pool was not loaded along with the class loading. <code>s1.intern()</code> is the first time adds &quot;1221&quot; to the string pool. And then <code>String s2 = &quot;1221&quot;</code> will change the behavior according to whether &quot;1221&quot; exists in the string pool.</p>\n<p>In order to better explain this problem, first define the key concepts involved.</p>\n<h2>key concept</h2>\n<ul>\n<li><a href=\"https://docs.oracle.com/javase/specs/jvms/se8/html/jvms-4.html#jvms-4.4\" rel=\"nofollow noreferrer\">Constant pool</a>: A Data structure in bytecode, used to store constants, strings, classes, fields, methods, interfaces, parameter types, etc. used in source code. Stored in a bytecode file on the hard disk.</li>\n<li><a href=\"https://docs.oracle.com/javase/specs/jvms/se8/html/jvms-5.html#jvms-5.1\" rel=\"nofollow noreferrer\">Runtime constant pool</a>: When the program is running, the constant pool in memory. When the class is loaded, the constant pool data will be loaded into the JVM method area to form a runtime constant pool.</li>\n<li><a href=\"https://docs.oracle.com/javase/specs/jvms/se8/html/jvms-4.html#jvms-4.4.3\" rel=\"nofollow noreferrer\">CONSTANT_String_info</a>: A data structure in the constant pool, which stores the Unicode sequence corresponding to the string literal in the source code</li>\n<li><a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/lang/String.html#intern()\" rel=\"nofollow noreferrer\">String pool</a>: A memory area in the JDK8 heap for accessing used String instances.</li>\n<li><a href=\"https://docs.oracle.com/javase/specs/jvms/se19/html/jvms-6.html#jvms-6.5.ldc\" rel=\"nofollow noreferrer\">ldc #5</a>: push the No.5 constant from the runtime constant pool to the operand stack. When using a string represented by a literal, it will first check whether there is a corresponding string instance in the string pool. If it exists, its reference address is pushed into the stack; if it does not exist, a string instance is created in the string pool and its address is pushed into the stack.</li>\n</ul>\n<h2>wrong reason</h2>\n<p>The error comes from misunderstanding the relationship between the <code>string pool</code> and the <code>constant pool</code> (hereafter using the constant pool and the runtime constant pool indiscriminately).</p>\n<p>Although it is usually called <code>string constant pool</code>, it does not have a relationship with the <code>constant pool</code>. Therefore, it will not be loaded as the class is loaded. In JDK6, both the <code>string pool</code> and the <code>constant pool</code> are located in the permanent generation, and there seems to be some relationship between them. But in JDK8, the <code>string pool</code> was moved to the heap. It is not so much part of the <code>constant pool</code> as it is part of the <code>String class</code>. It can be understood as a private member variable of the <code>String class</code>, although it cannot be observed in the <code>String</code> source code.</p>\n<p>After the <code>String instance</code> in the <code>string pool</code> is created, the byte array in the <code>instance</code> cannot be changed. If a change operation is performed on an existing <code>String instance</code>, a new <code>String instance</code> will be generated, showing the characteristics of a constant, so it is usually called a <code>string constant pool</code>. But in order to avoid confusing the <code>string pool</code> and the <code>constant pool</code>, I tries to use the <code>string pool</code> instead of the string constant pool.</p>\n<p>Another concept that is easily confused with it is <code>CONSTANT_String_info</code> in the <code>constant pool</code>. <code>String literals</code> are stored in Unicode sequences, and will be loaded into the <code>runtime constant pool</code> along with class loading. But it is fundamentally different from the <code>string pool</code>: <code>CONSTANT_String_info</code> only stores <code>Unicode sequences</code>, while the string pool stores <code>String instances</code>. <code>String instances</code> not only contain <code>Unicode sequences</code>, but also other member attributes, such as hash. And the <code>String class</code> is bound with many methods which cannot be executed on <code>CONSTANT_String_info</code>. The corresponding <code>String instance</code> can be generated by executing the String initialization function with the Unicode sequence in <code>CONSTANT_String_info</code> as a parameter.</p>\n"},{"tags":[],"owner":{"account_id":7655262,"reputation":7506,"user_id":5802417,"display_name":"Michael Gantman"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1691575150,"creation_date":1691575150,"answer_id":76866607,"question_id":76579840,"body_markdown":"Here is a short explanation. First operator `==` will be only `true` if two compared strings are actually the same instance of a `String` class. For 2 different instances of a String class that hold the same content the result would be `false`. So if you really want to compare the content of 2 Strings you **MUST** use methods `equals()` of a String class. Now if you write the following code:\r\n\r\n    String s1 = &quot;test&quot;;\r\n    //s1.intern();\r\n    String s2 = &quot;test&quot;;\r\n    System.out.println(s1==s2) // output most likely will be true;\r\n\r\nEven if you don&#39;t invoke `s1.intern()` it will most likely (although not guaranteed) will be invoked behind the scenes by JVM and `s2` will be assigned the same instance, and that is why the `s1==s2` will be `true`. (If you invoke `s1.intern()` than the `true` result is guaranteed). Now if you run the following code:\r\n\r\n    String s1 = &quot;test&quot;;\r\n    s1.intern();\r\n    String s2 = new String(&quot;test&quot;);\r\n    System.out.println(s1==s2) // output will be false;\r\nBecause with `new String(&quot;test&quot;)` you forse creation of a new instance of a String regardless of what is already in existence in the internal pool\r\n","title":"Java String intern function and ==","body":"<p>Here is a short explanation. First operator <code>==</code> will be only <code>true</code> if two compared strings are actually the same instance of a <code>String</code> class. For 2 different instances of a String class that hold the same content the result would be <code>false</code>. So if you really want to compare the content of 2 Strings you <strong>MUST</strong> use methods <code>equals()</code> of a String class. Now if you write the following code:</p>\n<pre><code>String s1 = &quot;test&quot;;\n//s1.intern();\nString s2 = &quot;test&quot;;\nSystem.out.println(s1==s2) // output most likely will be true;\n</code></pre>\n<p>Even if you don't invoke <code>s1.intern()</code> it will most likely (although not guaranteed) will be invoked behind the scenes by JVM and <code>s2</code> will be assigned the same instance, and that is why the <code>s1==s2</code> will be <code>true</code>. (If you invoke <code>s1.intern()</code> than the <code>true</code> result is guaranteed). Now if you run the following code:</p>\n<pre><code>String s1 = &quot;test&quot;;\ns1.intern();\nString s2 = new String(&quot;test&quot;);\nSystem.out.println(s1==s2) // output will be false;\n</code></pre>\n<p>Because with <code>new String(&quot;test&quot;)</code> you forse creation of a new instance of a String regardless of what is already in existence in the internal pool</p>\n"},{"tags":[],"owner":{"account_id":4228398,"reputation":17727,"user_id":3461397,"display_name":"Oleg Cherednik"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1691592831,"creation_date":1691575739,"answer_id":76866711,"question_id":76579840,"body_markdown":"```java\r\nString one = new String(&quot;abc&quot;);\r\nString two = new String(&quot;abc&quot;);\r\n\r\nboolean res1 = one == two;      // false -&gt; two different objects\r\nboolean res2 = one.equals(two); // true -&gt; content identical\r\n\r\none = one.intern(); // i.e. put string (if not exist) to the StringPool\r\n// and retrieve the object from the StringPool back \r\ntwo = two.intern();\r\nboolean res3 = one == two;      // true -&gt; same object from the StringPool\r\nboolean res4 = one.equals(two); // true -&gt; content identical\r\n```\r\n---\r\n```java\r\n// Put string literal &quot;12&quot; into StringPool\r\n// Create and object in heap with &quot;12&quot;\r\nString one = new String(&quot;12&quot;);\r\nString two = new String(&quot;21&quot;);\r\n\r\n// Concatenate two strings\r\n// Put result into StringPool and retrieve it back \r\nString two = one + two;\r\n\r\n\r\n// Concatenate two strings\r\n// Put result into StringPool and retrieve it back\r\n// Create an object in heap with result string\r\nString three = new String(one + two);\r\n\r\n\r\n// Put string literal to the StringPool and retrieve it back\r\nString four = &quot;1221&quot;;\r\n\r\nboolean res1 = two == four;  // true -&gt; both objects are from StringPool\r\nboolean res2 = three == four; // false -&gt; `three` is in Heap,\r\n// `four` is in StringPool\r\n\r\n\r\n// Put string into StringPool and retrieve it back\r\nthree = three.intern(); \r\n\r\nboolean res3 = three == four; // true -&gt; both objects are from StringPool\r\n```","title":"Java String intern function and ==","body":"<pre class=\"lang-java prettyprint-override\"><code>String one = new String(&quot;abc&quot;);\nString two = new String(&quot;abc&quot;);\n\nboolean res1 = one == two;      // false -&gt; two different objects\nboolean res2 = one.equals(two); // true -&gt; content identical\n\none = one.intern(); // i.e. put string (if not exist) to the StringPool\n// and retrieve the object from the StringPool back \ntwo = two.intern();\nboolean res3 = one == two;      // true -&gt; same object from the StringPool\nboolean res4 = one.equals(two); // true -&gt; content identical\n</code></pre>\n<hr />\n<pre class=\"lang-java prettyprint-override\"><code>// Put string literal &quot;12&quot; into StringPool\n// Create and object in heap with &quot;12&quot;\nString one = new String(&quot;12&quot;);\nString two = new String(&quot;21&quot;);\n\n// Concatenate two strings\n// Put result into StringPool and retrieve it back \nString two = one + two;\n\n\n// Concatenate two strings\n// Put result into StringPool and retrieve it back\n// Create an object in heap with result string\nString three = new String(one + two);\n\n\n// Put string literal to the StringPool and retrieve it back\nString four = &quot;1221&quot;;\n\nboolean res1 = two == four;  // true -&gt; both objects are from StringPool\nboolean res2 = three == four; // false -&gt; `three` is in Heap,\n// `four` is in StringPool\n\n\n// Put string into StringPool and retrieve it back\nthree = three.intern(); \n\nboolean res3 = three == four; // true -&gt; both objects are from StringPool\n</code></pre>\n"}],"owner":{"account_id":23570686,"reputation":37,"user_id":17610861,"display_name":"DracoYu"},"comment_count":9,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":136,"favorite_count":0,"down_vote_count":2,"up_vote_count":3,"answer_count":3,"score":1,"last_activity_date":1691592831,"creation_date":1688031357,"question_id":76579840,"body_markdown":"Recently I&#39;m learning Hotspot JVM. When learning the string constant pool and String intern function, I encountered a very weird situation. After browsing a lot of answers, I still can’t explain this phenomenon, so I’m sending it out to discuss with you.\r\n\r\n\r\n```\r\n    public static void main(String[] args) {\r\n        String s1 = new String(&quot;12&quot;) + new String(&quot;21&quot;);\r\n        s1.intern();\r\n        String s2 = &quot;1221&quot;;\r\n        System.out.println(s1 == s2); // true\r\n    }\r\n\r\n    public static void main(String[] args) {\r\n        String s1 = new String(&quot;12&quot;) + new String(&quot;21&quot;);\r\n        // s1.intern();\r\n        String s2 = &quot;1221&quot;;\r\n        System.out.println(s1 == s2); // false\r\n    }\r\n```\r\nThe reslut is based on Java8.\r\n\r\nSo the only difference between the two codes is call s1.intern() or not.\r\n\r\nHere is the document of intern function.\r\n&gt; When the intern method is invoked, if the pool already contains a string equal to this String object as determined by the equals(Object) method, then the string from the pool is returned. Otherwise, this String object is added to the pool and a reference to this String object is returned.\r\n\r\n\r\n\r\nHere is my understanding:\r\n\r\n1. By browsing the bytecode file, we can find &quot;12&quot;, &quot;21&quot;, &quot;1221&quot; in the constant pool.\r\n2. When the class is loaded, the constant pool in bytecode file is loaded into run-time constant pool. So the String pool contains &quot;12&quot;, &quot;21&quot;, &quot;1221&quot;.\r\n3. new String(&quot;12&quot;) create a String instance on the heap, which is different from &quot;12&quot; in String pool. So does new String(&quot;21&quot;).\r\n4. The &quot;+&quot; operator is transformed into StringBuilder and call its append and toString method, which can be seen in bytecode.\r\n5. In toString method calls new string, so s1 is String instance &quot;1221&quot; on the heap.\r\n6. s1.intern() look into String pool, and a &quot;1221&quot; is there, so it dose nothing. Btw, we don&#39;t use the return value, so it has nothing to do with s1.\r\n7. String s2 = &quot;1221&quot; just loaded the &quot;1221&quot; instance in the string pool. In bytecode, ldc #11, #11 is the index of &quot;1221&quot; in constant pool.\r\n8. The &quot;==&quot; operator comapre the address of reference type. The s1 point to the instance on the heap, the s2 point to the instance in the string pool. How can these two be equal?\r\n\r\nMy wonder:\r\n1. What exactly do s1 and s2 point to?\r\n2. Why call intern() methed will change the behavior? Even don&#39;t use the return value.\r\n\r\nHere is my assumption:\r\n1. The string pool is not initilized when class is loaded. Some answer said s1.intern() is the first time &quot;1221&quot; is loaded into string pool.\r\nBut how to explain &quot;1221&quot; is in the constant pool of bytecode file. Is there any specification about string pool loading timing?\r\n\r\n2. Another saying is intern function just save the reference to the instance on the heap, but the renference s1, s2 are still different. s1 point the heap, s2 point to the string pool, and string pool point to the heap. The reference is different from reference of a reference.","title":"Java String intern function and ==","body":"<p>Recently I'm learning Hotspot JVM. When learning the string constant pool and String intern function, I encountered a very weird situation. After browsing a lot of answers, I still can’t explain this phenomenon, so I’m sending it out to discuss with you.</p>\n<pre><code>    public static void main(String[] args) {\n        String s1 = new String(&quot;12&quot;) + new String(&quot;21&quot;);\n        s1.intern();\n        String s2 = &quot;1221&quot;;\n        System.out.println(s1 == s2); // true\n    }\n\n    public static void main(String[] args) {\n        String s1 = new String(&quot;12&quot;) + new String(&quot;21&quot;);\n        // s1.intern();\n        String s2 = &quot;1221&quot;;\n        System.out.println(s1 == s2); // false\n    }\n</code></pre>\n<p>The reslut is based on Java8.</p>\n<p>So the only difference between the two codes is call s1.intern() or not.</p>\n<p>Here is the document of intern function.</p>\n<blockquote>\n<p>When the intern method is invoked, if the pool already contains a string equal to this String object as determined by the equals(Object) method, then the string from the pool is returned. Otherwise, this String object is added to the pool and a reference to this String object is returned.</p>\n</blockquote>\n<p>Here is my understanding:</p>\n<ol>\n<li>By browsing the bytecode file, we can find &quot;12&quot;, &quot;21&quot;, &quot;1221&quot; in the constant pool.</li>\n<li>When the class is loaded, the constant pool in bytecode file is loaded into run-time constant pool. So the String pool contains &quot;12&quot;, &quot;21&quot;, &quot;1221&quot;.</li>\n<li>new String(&quot;12&quot;) create a String instance on the heap, which is different from &quot;12&quot; in String pool. So does new String(&quot;21&quot;).</li>\n<li>The &quot;+&quot; operator is transformed into StringBuilder and call its append and toString method, which can be seen in bytecode.</li>\n<li>In toString method calls new string, so s1 is String instance &quot;1221&quot; on the heap.</li>\n<li>s1.intern() look into String pool, and a &quot;1221&quot; is there, so it dose nothing. Btw, we don't use the return value, so it has nothing to do with s1.</li>\n<li>String s2 = &quot;1221&quot; just loaded the &quot;1221&quot; instance in the string pool. In bytecode, ldc #11, #11 is the index of &quot;1221&quot; in constant pool.</li>\n<li>The &quot;==&quot; operator comapre the address of reference type. The s1 point to the instance on the heap, the s2 point to the instance in the string pool. How can these two be equal?</li>\n</ol>\n<p>My wonder:</p>\n<ol>\n<li>What exactly do s1 and s2 point to?</li>\n<li>Why call intern() methed will change the behavior? Even don't use the return value.</li>\n</ol>\n<p>Here is my assumption:</p>\n<ol>\n<li><p>The string pool is not initilized when class is loaded. Some answer said s1.intern() is the first time &quot;1221&quot; is loaded into string pool.\nBut how to explain &quot;1221&quot; is in the constant pool of bytecode file. Is there any specification about string pool loading timing?</p>\n</li>\n<li><p>Another saying is intern function just save the reference to the instance on the heap, but the renference s1, s2 are still different. s1 point the heap, s2 point to the string pool, and string pool point to the heap. The reference is different from reference of a reference.</p>\n</li>\n</ol>\n"},{"tags":["java","stream","gzip"],"comments":[{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1691573668,"post_id":76866078,"comment_id":135508730,"body_markdown":"*It never enters the while because the read always return -1 and so nothing is read.* That doesn&#39;t make sense. The return value of `read` is checked *inside* the loop.","body":"<i>It never enters the while because the read always return -1 and so nothing is read.</i> That doesn&#39;t make sense. The return value of <code>read</code> is checked <i>inside</i> the loop."},{"owner":{"account_id":5784405,"reputation":595,"user_id":4564127,"accept_rate":80,"display_name":"S&#233;bastien Vandamme"},"score":0,"creation_date":1691574503,"post_id":76866078,"comment_id":135508904,"body_markdown":"By &quot;it never enters the while&quot;, I mean that the &#39;byteArrayOutputStream.write(data, 0, bytesRead)&#39; is never executed.","body":"By &quot;it never enters the while&quot;, I mean that the &#39;byteArrayOutputStream.write(data, 0, bytesRead)&#39; is never executed."},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1691579450,"post_id":76866078,"comment_id":135509958,"body_markdown":"How do you know it&#39;s &quot;never executed&quot;?","body":"How do you know it&#39;s &quot;never executed&quot;?"},{"owner":{"account_id":5784405,"reputation":595,"user_id":4564127,"accept_rate":80,"display_name":"S&#233;bastien Vandamme"},"score":0,"creation_date":1691580282,"post_id":76866078,"comment_id":135510130,"body_markdown":"I put breakpoints in my code.","body":"I put breakpoints in my code."},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1691583572,"post_id":76866078,"comment_id":135510841,"body_markdown":"There&#39;s only one way I can think of that it wouldn&#39;t and that&#39;s if an exception is thrown. There is nothing wrong with the code and it works fine for me","body":"There&#39;s only one way I can think of that it wouldn&#39;t and that&#39;s if an exception is thrown. There is nothing wrong with the code and it works fine for me"},{"owner":{"account_id":5784405,"reputation":595,"user_id":4564127,"accept_rate":80,"display_name":"S&#233;bastien Vandamme"},"score":0,"creation_date":1691590177,"post_id":76866078,"comment_id":135512397,"body_markdown":"No exception is thrown, I even catch Throwable to be sure.","body":"No exception is thrown, I even catch Throwable to be sure."},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1691590359,"post_id":76866078,"comment_id":135512454,"body_markdown":"Which OS are you using? Do you have a small `compressed` (you mentioned things around 32 bytes)","body":"Which OS are you using? Do you have a small <code>compressed</code> (you mentioned things around 32 bytes)"},{"owner":{"account_id":5784405,"reputation":595,"user_id":4564127,"accept_rate":80,"display_name":"S&#233;bastien Vandamme"},"score":0,"creation_date":1691591535,"post_id":76866078,"comment_id":135512752,"body_markdown":"I use Windows 10","body":"I use Windows 10"},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1691592520,"post_id":76866078,"comment_id":135512974,"body_markdown":"I was thinking of using your *actual* `compressed` but it would have to be in a binary file first","body":"I was thinking of using your <i>actual</i> <code>compressed</code> but it would have to be in a binary file first"},{"owner":{"account_id":2053598,"reputation":41316,"user_id":1831987,"display_name":"VGR"},"score":0,"creation_date":1691599782,"post_id":76866078,"comment_id":135514605,"body_markdown":"Are you sure that the code in your question is the real code?  `response = byteArrayOutputStream.toByteArray();` suggests that the type of `response` is either `byte[]` or `Object`, but two lines above, you are calling `response.getBytes()` which is not a method available with either of those types.  I don’t see how that code can compile.  If you don’t tell us what you’re actually doing, we won’t be able to spot your problem.","body":"Are you sure that the code in your question is the real code?  <code>response = byteArrayOutputStream.toByteArray();</code> suggests that the type of <code>response</code> is either <code>byte[]</code> or <code>Object</code>, but two lines above, you are calling <code>response.getBytes()</code> which is not a method available with either of those types.  I don’t see how that code can compile.  If you don’t tell us what you’re actually doing, we won’t be able to spot your problem."}],"answers":[{"tags":[],"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1691592634,"creation_date":1691592634,"answer_id":76868940,"question_id":76866078,"body_markdown":"This is essentially *your* code (though the zip input stream should be in the try-with-resources block), which you can run:\r\n```\r\nimport java.util.*;\r\nimport java.util.zip.*;\r\nimport java.io.*;\r\n\r\npublic class Unzip {\r\n    public static void main(String[] args) throws Exception {\r\n        String s = &quot;H4sIAAAAAAAAA3WRQW+CQBCF7/6K0dOSUNKeiYeaYMNJo+nFxjQrTHQTYMkwhNLG/95lESSIe9jDmzffm51lqkGsasZ3IllvSs5L3jOhTOE0qS4hwwomO4TjwwzM6athNoEbiiPaoCQineaERYGx48Cf5X4cwu2w+/yr8kfayCWmgl1Yfa7Xwe57Hx4Cx7f0xvd1hFiyvJGsMjAeW6PK2JaKHcrYn1mtuqgEQYheN4jReJ65YtHgzYPmS3h5697VpT9s1KtIMdoeF17de+pt5GsbPg6KEl2g+Y22SsglZU8CWPfLbxquEEmOLiDCTfATYc5KZ4DdnIk+e0ikSSy2pE8JpmYXEGP3Vca8cI3dcP4BN4CC8VgCAAA=&quot;;\r\n        final int BUFFER_SIZE = 32;\r\n        byte[] compressed = Base64.getDecoder().decode(s);\r\n        try (ByteArrayOutputStream byteArrayOutputStream = new ByteArrayOutputStream();\r\n                ByteArrayInputStream byteArrayInputStream = new ByteArrayInputStream(compressed)) {\r\n            GZIPInputStream gzipInputStream = new GZIPInputStream(byteArrayInputStream, BUFFER_SIZE);\r\n            byte[] data = new byte[BUFFER_SIZE];\r\n            int bytesRead;\r\n\r\n            while ((bytesRead = gzipInputStream.read(data)) != -1) {\r\n                byteArrayOutputStream.write(data, 0, bytesRead);\r\n            }\r\n\r\n            gzipInputStream.close();\r\n\r\n            System.out.println(new String(byteArrayOutputStream.toByteArray()));\r\n        } catch (IOException e) {\r\n            e.printStackTrace();    \r\n        }\r\n    }\r\n}\r\n```","title":"Unable to read small compressed byte array from GZIPInputStream","body":"<p>This is essentially <em>your</em> code (though the zip input stream should be in the try-with-resources block), which you can run:</p>\n<pre><code>import java.util.*;\nimport java.util.zip.*;\nimport java.io.*;\n\npublic class Unzip {\n    public static void main(String[] args) throws Exception {\n        String s = &quot;H4sIAAAAAAAAA3WRQW+CQBCF7/6K0dOSUNKeiYeaYMNJo+nFxjQrTHQTYMkwhNLG/95lESSIe9jDmzffm51lqkGsasZ3IllvSs5L3jOhTOE0qS4hwwomO4TjwwzM6athNoEbiiPaoCQineaERYGx48Cf5X4cwu2w+/yr8kfayCWmgl1Yfa7Xwe57Hx4Cx7f0xvd1hFiyvJGsMjAeW6PK2JaKHcrYn1mtuqgEQYheN4jReJ65YtHgzYPmS3h5697VpT9s1KtIMdoeF17de+pt5GsbPg6KEl2g+Y22SsglZU8CWPfLbxquEEmOLiDCTfATYc5KZ4DdnIk+e0ikSSy2pE8JpmYXEGP3Vca8cI3dcP4BN4CC8VgCAAA=&quot;;\n        final int BUFFER_SIZE = 32;\n        byte[] compressed = Base64.getDecoder().decode(s);\n        try (ByteArrayOutputStream byteArrayOutputStream = new ByteArrayOutputStream();\n                ByteArrayInputStream byteArrayInputStream = new ByteArrayInputStream(compressed)) {\n            GZIPInputStream gzipInputStream = new GZIPInputStream(byteArrayInputStream, BUFFER_SIZE);\n            byte[] data = new byte[BUFFER_SIZE];\n            int bytesRead;\n\n            while ((bytesRead = gzipInputStream.read(data)) != -1) {\n                byteArrayOutputStream.write(data, 0, bytesRead);\n            }\n\n            gzipInputStream.close();\n\n            System.out.println(new String(byteArrayOutputStream.toByteArray()));\n        } catch (IOException e) {\n            e.printStackTrace();    \n        }\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":5784405,"reputation":595,"user_id":4564127,"accept_rate":80,"display_name":"S&#233;bastien Vandamme"},"comment_count":10,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":50,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76868940,"answer_count":1,"score":0,"last_activity_date":1691592634,"creation_date":1691571186,"question_id":76866078,"body_markdown":"I struggle with a problem and I can&#39;t solve it or find a useful answer to it.  \r\nI have a piece of code that compress an array of bytes :\r\n\r\n```\r\ntry (final ByteArrayOutputStream byteArrayOutputStream = new ByteArrayOutputStream()) {\r\n    final GZIPOutputStream gzip = new GZIPOutputStream(byteArrayOutputStream);\r\n    gzip.write(response.getBytes());\r\n    gzip.close();\r\n    response = byteArrayOutputStream.toByteArray();\r\n} catch (IOException e) {\r\n    log.error(&quot;Problem in compression&quot;, e);\r\n}\r\n```\r\n\r\nIt works pretty well, and the resulting compressed array of bytes is saved in a database.\r\n\r\nI have another piece of code that will get the compressed array of bytes in the database and that will decompress it :\r\n\r\n```\r\ntry (ByteArrayOutputStream byteArrayOutputStream = new ByteArrayOutputStream(); \r\n    ByteArrayInputStream byteArrayInputStream = new ByteArrayInputStream(compressed)) {\r\n    GZIPInputStream gzipInputStream = new GZIPInputStream(byteArrayInputStream, BUFFER_SIZE);\r\n    byte[] data = new byte[BUFFER_SIZE];\r\n    int bytesRead;\r\n\r\n    while ((bytesRead = gzipInputStream.read(data)) != -1) {\r\n        byteArrayOutputStream.write(data, 0, bytesRead);\r\n    }\r\n\r\n    gzipInputStream.close();\r\n\r\n    return byteArrayOutputStream.toByteArray();\r\n} catch (IOException e) {\r\n    log.error(&quot;Problem in decompression&quot;, e);\r\n}\r\n```\r\n\r\nThe decompression works very well for &quot;big&quot; byte array (bigger than 32 bytes), but I have, for example a compressed array of 20 bytes and I cannot decompress it.   \r\nIt never enters the while because the read always return -1 and so nothing is read.   \r\nI tried to change the buffer size, etc..., but nothing works.   \r\nWhat am I doing wrong ?\r\n\r\nThank you in advance !","title":"Unable to read small compressed byte array from GZIPInputStream","body":"<p>I struggle with a problem and I can't solve it or find a useful answer to it.<br />\nI have a piece of code that compress an array of bytes :</p>\n<pre><code>try (final ByteArrayOutputStream byteArrayOutputStream = new ByteArrayOutputStream()) {\n    final GZIPOutputStream gzip = new GZIPOutputStream(byteArrayOutputStream);\n    gzip.write(response.getBytes());\n    gzip.close();\n    response = byteArrayOutputStream.toByteArray();\n} catch (IOException e) {\n    log.error(&quot;Problem in compression&quot;, e);\n}\n</code></pre>\n<p>It works pretty well, and the resulting compressed array of bytes is saved in a database.</p>\n<p>I have another piece of code that will get the compressed array of bytes in the database and that will decompress it :</p>\n<pre><code>try (ByteArrayOutputStream byteArrayOutputStream = new ByteArrayOutputStream(); \n    ByteArrayInputStream byteArrayInputStream = new ByteArrayInputStream(compressed)) {\n    GZIPInputStream gzipInputStream = new GZIPInputStream(byteArrayInputStream, BUFFER_SIZE);\n    byte[] data = new byte[BUFFER_SIZE];\n    int bytesRead;\n\n    while ((bytesRead = gzipInputStream.read(data)) != -1) {\n        byteArrayOutputStream.write(data, 0, bytesRead);\n    }\n\n    gzipInputStream.close();\n\n    return byteArrayOutputStream.toByteArray();\n} catch (IOException e) {\n    log.error(&quot;Problem in decompression&quot;, e);\n}\n</code></pre>\n<p>The decompression works very well for &quot;big&quot; byte array (bigger than 32 bytes), but I have, for example a compressed array of 20 bytes and I cannot decompress it.<br />\nIt never enters the while because the read always return -1 and so nothing is read.<br />\nI tried to change the buffer size, etc..., but nothing works.<br />\nWhat am I doing wrong ?</p>\n<p>Thank you in advance !</p>\n"},{"tags":["java","spring","spring-mvc","spring-scheduled"],"comments":[{"owner":{"account_id":2994830,"reputation":1,"user_id":2541560,"display_name":"Kayaman"},"score":0,"creation_date":1691591381,"post_id":76868362,"comment_id":135512715,"body_markdown":"Interrupting threads is intentional, there&#39;s nothing to fix (but your expectations).","body":"Interrupting threads is intentional, there&#39;s nothing to fix (but your expectations)."},{"owner":{"account_id":6859918,"reputation":1134,"user_id":5274291,"accept_rate":75,"display_name":"Jo&#227;o Pedro Schmitt"},"score":2,"creation_date":1691592413,"post_id":76868362,"comment_id":135512949,"body_markdown":"Thanks for your response @Kayaman, but unfortunately I think your expectations are wrong. If you were right the following code should not work as well: https://github.com/schmittjoaopedro/schmittjoaopedro.github.io/blob/gh-pages/assets/other/SOQuestionGracefulShutdown.java","body":"Thanks for your response @Kayaman, but unfortunately I think your expectations are wrong. If you were right the following code should not work as well: <a href=\"https://github.com/schmittjoaopedro/schmittjoaopedro.github.io/blob/gh-pages/assets/other/SOQuestionGracefulShutdown.java\" rel=\"nofollow noreferrer\">github.com/schmittjoaopedro/schmittjoaopedro.github.io/blob/&zwnj;&#8203;&hellip;</a>"},{"owner":{"account_id":62234,"reputation":19819,"user_id":185034,"accept_rate":100,"display_name":"Paul"},"score":2,"creation_date":1691597388,"post_id":76868362,"comment_id":135514114,"body_markdown":"I believe you need to configure the task executor via `setWaitForTasksToCompleteOnShutdown`, see https://www.baeldung.com/spring-boot-graceful-shutdown.","body":"I believe you need to configure the task executor via <code>setWaitForTasksToCompleteOnShutdown</code>, see <a href=\"https://www.baeldung.com/spring-boot-graceful-shutdown\" rel=\"nofollow noreferrer\">baeldung.com/spring-boot-graceful-shutdown</a>."},{"owner":{"account_id":6859918,"reputation":1134,"user_id":5274291,"accept_rate":75,"display_name":"Jo&#227;o Pedro Schmitt"},"score":0,"creation_date":1691599102,"post_id":76868362,"comment_id":135514478,"body_markdown":"That&#39;s the application properties","body":"That&#39;s the application properties"},{"owner":{"account_id":6859918,"reputation":1134,"user_id":5274291,"accept_rate":75,"display_name":"Jo&#227;o Pedro Schmitt"},"score":0,"creation_date":1691599433,"post_id":76868362,"comment_id":135514541,"body_markdown":"If you look at the class `TaskSchedulerBuilder` from spring, that&#39;s the one that maps properties to the scheduler configuration.","body":"If you look at the class <code>TaskSchedulerBuilder</code> from spring, that&#39;s the one that maps properties to the scheduler configuration."},{"owner":{"account_id":6859918,"reputation":1134,"user_id":5274291,"accept_rate":75,"display_name":"Jo&#227;o Pedro Schmitt"},"score":2,"creation_date":1691605476,"post_id":76868362,"comment_id":135515596,"body_markdown":"I opened a bug fix issue on Spring Framework, supposedly they&#39;ll be fixing this behavior for the next version: https://github.com/spring-projects/spring-framework/issues/31019","body":"I opened a bug fix issue on Spring Framework, supposedly they&#39;ll be fixing this behavior for the next version: <a href=\"https://github.com/spring-projects/spring-framework/issues/31019\" rel=\"nofollow noreferrer\">github.com/spring-projects/spring-framework/issues/31019</a>"}],"owner":{"account_id":6859918,"reputation":1134,"user_id":5274291,"accept_rate":75,"display_name":"Jo&#227;o Pedro Schmitt"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":348,"favorite_count":0,"down_vote_count":1,"up_vote_count":2,"answer_count":0,"score":1,"last_activity_date":1691592463,"creation_date":1691588609,"question_id":76868362,"body_markdown":"I have a Spring Boot 3 application making use of @Scheduled jobs for polling messages from SQS. I want to configure a graceful shutdown (when I send a SIGTERM via `kill pid`) so the current process messages can be finished before the POD is tore down.\r\n\r\nI set the following properties in `application.properties` file:\r\n```\r\nserver.shutdown=graceful\r\nspring.lifecycle.timeout-per-shutdown-phase=60s\r\nspring.task.execution.shutdown.await-termination=true\r\nspring.task.execution.shutdown.await-termination-period=60s\r\nspring.task.scheduling.shutdown.await-termination=true\r\nspring.task.scheduling.shutdown.await-termination-period=60s\r\n```\r\n\r\nAnd I have jobs scheduled like so:\r\n```java\r\n@Scheduled(fixedDelay = 1L, timeUnit = TimeUnit.SECONDS, initialDelay = 3L)\r\npublic void pollMessages() {\r\n    final var messages = sqsClient.receiveMessage(ReceiveMessageRequest.builder()\r\n                .queueUrl(queueUrl)\r\n                .waitTimeSeconds(maxWaitTime)\r\n                .maxNumberOfMessages(numberOfMessages)\r\n                .messageAttributeNames(&quot;.*&quot;)\r\n                .build());\r\n    // process messages....\r\n}\r\n```\r\n\r\nHowever, I&#39;m getting errors from AWS SDK when shutting down the application if there&#39;s any pending job polling for messages. It seems the shutdown process is interrupting Threads that are waiting a response from AWS SQS service.\r\n\r\n```\r\nUnexpected error occurred in scheduled task\r\ns.a.a.c.e.SdkInterruptedException: null\r\n    at s.a.a.c.i.h.InterruptMonitor.checkInterrupted(InterruptMonitor.java:55)\r\n    at s.a.a.c.i.h.p.s.AfterTransmissionExecutionInterceptorsStage.execute(AfterTransmissionExecutionInterceptorsStage.java:34)\r\n    at s.a.a.c.i.h.p.s.AfterTransmissionExecutionInterceptorsStage.execute(AfterTransmissionExecutionInterceptorsStage.java:28)\r\n    at s.a.a.c.i.h.p.RequestPipelineBuilder$ComposingRequestPipelineStage.execute(RequestPipelineBuilder.java:206)\r\n    at s.a.a.c.i.h.p.RequestPipelineBuilder$ComposingRequestPipelineStage.execute(RequestPipelineBuilder.java:206)\r\n    at s.a.a.c.i.h.p.RequestPipelineBuilder$ComposingRequestPipelineStage.execute(RequestPipelineBuilder.java:206)\r\n    at s.a.a.c.i.h.p.s.ApiCallAttemptTimeoutTrackingStage.execute(ApiCallAttemptTimeoutTrackingStage.java:72)\r\n    ... 54 common frames omitted\r\nWrapped by: s.a.a.c.e.AbortedException: Thread was interrupted\r\n    at s.a.a.c.e.AbortedException$BuilderImpl.build(AbortedException.java:93)\r\n    at s.a.a.c.e.AbortedException.create(AbortedException.java:38)\r\n    at s.a.a.c.i.h.p.s.ApiCallAttemptTimeoutTrackingStage.handleInterruptedException(ApiCallAttemptTimeoutTrackingStage.java:141)\r\n    at s.a.a.c.i.h.p.s.ApiCallAttemptTimeoutTrackingStage.translatePipelineException(ApiCallAttemptTimeoutTrackingStage.java:105)\r\n    at s.a.a.c.i.h.p.s.ApiCallAttemptTimeoutTrackingStage.execute(ApiCallAttemptTimeoutTrackingStage.java:89)\r\n    at s.a.a.c.i.h.p.s.ApiCallAttemptTimeoutTrackingStage.execute(ApiCallAttemptTimeoutTrackingStage.java:42)\r\n    at s.a.a.c.i.h.p.s.TimeoutExceptionHandlingStage.execute(TimeoutExceptionHandlingStage.java:78)\r\n    at s.a.a.c.i.h.p.s.TimeoutExceptionHandlingStage.execute(TimeoutExceptionHandlingStage.java:40)\r\n    at s.a.a.c.i.h.p.s.ApiCallAttemptMetricCollectionStage.execute(ApiCallAttemptMetricCollectionStage.java:52)\r\n    at s.a.a.c.i.h.p.s.ApiCallAttemptMetricCollectionStage.execute(ApiCallAttemptMetricCollectionStage.java:37)\r\n    at s.a.a.c.i.h.p.s.RetryableStage.execute(RetryableStage.java:81)\r\n    at s.a.a.c.i.h.p.s.RetryableStage.execute(RetryableStag...\r\n```\r\n\r\nThe same happens if I have a scheduled job with a `Thread.sleep()`, the graceful shutdown interrupts the sleeping thread. For example:\r\n\r\n```java\r\n@Scheduled(fixedDelay = 1L, timeUnit = TimeUnit.SECONDS, initialDelay = 3L)\r\npublic void pollMessages() throws Exception {\r\n    Thread.sleep(10000); // Graceful shutdown interrupts this thread during sleep\r\n    // Extra processing steps omitted\r\n}\r\n```\r\n\r\nAny ideas on how to fix this to make the Graceful Shutdown not to interrupt sleeping threads on Scheduled tasks?\r\n\r\nEdit ------\r\n\r\nI made a standalone Java application that does pretty much what I would expect spring to do here: https://github.com/schmittjoaopedro/schmittjoaopedro.github.io/blob/gh-pages/assets/other/SOQuestionGracefulShutdown.java","title":"Spring graceful shutdown not waiting for scheduled tasks with thread sleep","body":"<p>I have a Spring Boot 3 application making use of @Scheduled jobs for polling messages from SQS. I want to configure a graceful shutdown (when I send a SIGTERM via <code>kill pid</code>) so the current process messages can be finished before the POD is tore down.</p>\n<p>I set the following properties in <code>application.properties</code> file:</p>\n<pre><code>server.shutdown=graceful\nspring.lifecycle.timeout-per-shutdown-phase=60s\nspring.task.execution.shutdown.await-termination=true\nspring.task.execution.shutdown.await-termination-period=60s\nspring.task.scheduling.shutdown.await-termination=true\nspring.task.scheduling.shutdown.await-termination-period=60s\n</code></pre>\n<p>And I have jobs scheduled like so:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Scheduled(fixedDelay = 1L, timeUnit = TimeUnit.SECONDS, initialDelay = 3L)\npublic void pollMessages() {\n    final var messages = sqsClient.receiveMessage(ReceiveMessageRequest.builder()\n                .queueUrl(queueUrl)\n                .waitTimeSeconds(maxWaitTime)\n                .maxNumberOfMessages(numberOfMessages)\n                .messageAttributeNames(&quot;.*&quot;)\n                .build());\n    // process messages....\n}\n</code></pre>\n<p>However, I'm getting errors from AWS SDK when shutting down the application if there's any pending job polling for messages. It seems the shutdown process is interrupting Threads that are waiting a response from AWS SQS service.</p>\n<pre><code>Unexpected error occurred in scheduled task\ns.a.a.c.e.SdkInterruptedException: null\n    at s.a.a.c.i.h.InterruptMonitor.checkInterrupted(InterruptMonitor.java:55)\n    at s.a.a.c.i.h.p.s.AfterTransmissionExecutionInterceptorsStage.execute(AfterTransmissionExecutionInterceptorsStage.java:34)\n    at s.a.a.c.i.h.p.s.AfterTransmissionExecutionInterceptorsStage.execute(AfterTransmissionExecutionInterceptorsStage.java:28)\n    at s.a.a.c.i.h.p.RequestPipelineBuilder$ComposingRequestPipelineStage.execute(RequestPipelineBuilder.java:206)\n    at s.a.a.c.i.h.p.RequestPipelineBuilder$ComposingRequestPipelineStage.execute(RequestPipelineBuilder.java:206)\n    at s.a.a.c.i.h.p.RequestPipelineBuilder$ComposingRequestPipelineStage.execute(RequestPipelineBuilder.java:206)\n    at s.a.a.c.i.h.p.s.ApiCallAttemptTimeoutTrackingStage.execute(ApiCallAttemptTimeoutTrackingStage.java:72)\n    ... 54 common frames omitted\nWrapped by: s.a.a.c.e.AbortedException: Thread was interrupted\n    at s.a.a.c.e.AbortedException$BuilderImpl.build(AbortedException.java:93)\n    at s.a.a.c.e.AbortedException.create(AbortedException.java:38)\n    at s.a.a.c.i.h.p.s.ApiCallAttemptTimeoutTrackingStage.handleInterruptedException(ApiCallAttemptTimeoutTrackingStage.java:141)\n    at s.a.a.c.i.h.p.s.ApiCallAttemptTimeoutTrackingStage.translatePipelineException(ApiCallAttemptTimeoutTrackingStage.java:105)\n    at s.a.a.c.i.h.p.s.ApiCallAttemptTimeoutTrackingStage.execute(ApiCallAttemptTimeoutTrackingStage.java:89)\n    at s.a.a.c.i.h.p.s.ApiCallAttemptTimeoutTrackingStage.execute(ApiCallAttemptTimeoutTrackingStage.java:42)\n    at s.a.a.c.i.h.p.s.TimeoutExceptionHandlingStage.execute(TimeoutExceptionHandlingStage.java:78)\n    at s.a.a.c.i.h.p.s.TimeoutExceptionHandlingStage.execute(TimeoutExceptionHandlingStage.java:40)\n    at s.a.a.c.i.h.p.s.ApiCallAttemptMetricCollectionStage.execute(ApiCallAttemptMetricCollectionStage.java:52)\n    at s.a.a.c.i.h.p.s.ApiCallAttemptMetricCollectionStage.execute(ApiCallAttemptMetricCollectionStage.java:37)\n    at s.a.a.c.i.h.p.s.RetryableStage.execute(RetryableStage.java:81)\n    at s.a.a.c.i.h.p.s.RetryableStage.execute(RetryableStag...\n</code></pre>\n<p>The same happens if I have a scheduled job with a <code>Thread.sleep()</code>, the graceful shutdown interrupts the sleeping thread. For example:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Scheduled(fixedDelay = 1L, timeUnit = TimeUnit.SECONDS, initialDelay = 3L)\npublic void pollMessages() throws Exception {\n    Thread.sleep(10000); // Graceful shutdown interrupts this thread during sleep\n    // Extra processing steps omitted\n}\n</code></pre>\n<p>Any ideas on how to fix this to make the Graceful Shutdown not to interrupt sleeping threads on Scheduled tasks?</p>\n<p>Edit ------</p>\n<p>I made a standalone Java application that does pretty much what I would expect spring to do here: <a href=\"https://github.com/schmittjoaopedro/schmittjoaopedro.github.io/blob/gh-pages/assets/other/SOQuestionGracefulShutdown.java\" rel=\"nofollow noreferrer\">https://github.com/schmittjoaopedro/schmittjoaopedro.github.io/blob/gh-pages/assets/other/SOQuestionGracefulShutdown.java</a></p>\n"},{"tags":["java","reflection","annotations"],"comments":[{"owner":{"account_id":14603438,"reputation":820,"user_id":10547108,"display_name":"fuggerjaki61"},"score":0,"creation_date":1584194221,"post_id":60682431,"comment_id":107364468,"body_markdown":"read [this](https://stackoverflow.com/questions/1805200/retrieve-java-annotation-attribute). i think there is a List/Array where you can remove/add/change them","body":"read <a href=\"https://stackoverflow.com/questions/1805200/retrieve-java-annotation-attribute\">this</a>. i think there is a List/Array where you can remove/add/change them"}],"answers":[{"tags":[],"owner":{"account_id":14766084,"reputation":495,"user_id":10664080,"display_name":"Sergej Masljukow"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1584214516,"creation_date":1584214516,"answer_id":60686595,"question_id":60682431,"body_markdown":"Man, you were just 2 steps away from the solution. After you retrieved invocation handler you have to change it&#39;s field memberValues. Here is the complete code:\r\n\r\n    import java.lang.annotation.*;\r\n    import java.lang.reflect.Field;\r\n    import java.lang.reflect.Method;\r\n    import java.lang.reflect.Proxy;\r\n    import java.util.Arrays;\r\n    import java.util.HashMap;\r\n    import java.util.Map;\r\n    \r\n    public class NewApp {\r\n    \r\n        public static void main(String[] args) throws NoSuchMethodException, NoSuchFieldException, IllegalAccessException {\r\n    \r\n    \r\n            // get the edit map method\r\n            Method method = CustomMap.class.getDeclaredMethod(&quot;editMap&quot;, Map.class);\r\n    \r\n            // get the annotation\r\n            UpdateKey updateKeyAnnotation = method.getDeclaredAnnotation(UpdateKey.class);\r\n            System.out.println(&quot;current annotation: &quot; + updateKeyAnnotation);\r\n    \r\n            Object handler = Proxy.getInvocationHandler(updateKeyAnnotation);\r\n    \r\n            System.out.println(Arrays.toString(handler.getClass().getDeclaredFields()));\r\n    \r\n            // field memberValues contains annotation attributes and their values\r\n            // just modify it\r\n            Field memberValues = handler.getClass().getDeclaredField(&quot;memberValues&quot;);\r\n            memberValues.setAccessible(true);\r\n            System.out.println(memberValues.get(handler));\r\n    \r\n            Map&lt;String, String&gt; annotationAttributes = new HashMap&lt;&gt;();\r\n            annotationAttributes.put(&quot;newKey&quot;, &quot;otherProduct&quot;);\r\n            annotationAttributes.put(&quot;oldKey&quot;, &quot;otherDescription&quot;);\r\n            memberValues.set(handler, annotationAttributes);\r\n    \r\n    \r\n            System.out.println(&quot;changed annotation: &quot; + updateKeyAnnotation);\r\n        }\r\n    }\r\n    \r\n    @Retention(RetentionPolicy.RUNTIME)\r\n    @Target(ElementType.METHOD)\r\n    @interface UpdateKey {\r\n        String oldKey() default &quot;&quot;;    //The key that needs to be replaced\r\n    \r\n        String newKey() default &quot;&quot;;    //The new key\r\n    }\r\n    \r\n    class CustomMap {\r\n    \r\n        @UpdateKey(oldKey = &quot;description&quot;, newKey = &quot;productName&quot;)\r\n        public void editMap(Map&lt;String, String&gt; map) throws NoSuchMethodException {\r\n            //get the annotation values\r\n            UpdateKey updateKey = this.getClass().getMethod(&quot;editMap&quot;).getAnnotation(UpdateKey.class);\r\n    \r\n            //save value and delete old key\r\n            Object obj = map.remove(updateKey.oldKey());\r\n    \r\n            //set the value to the new key\r\n            map.put(updateKey.newKey(), obj.toString());\r\n        }\r\n    }\r\n\r\noutput of this code \r\n\r\n    current annotation: @UpdateKey(newKey=productName, oldKey=description)\r\n    [private static final long sun.reflect.annotation.AnnotationInvocationHandler.serialVersionUID, private final java.lang.Class sun.reflect.annotation.AnnotationInvocationHandler.type, private final java.util.Map sun.reflect.annotation.AnnotationInvocationHandler.memberValues, private transient volatile java.lang.reflect.Method[] sun.reflect.annotation.AnnotationInvocationHandler.memberMethods, static final boolean sun.reflect.annotation.AnnotationInvocationHandler.$assertionsDisabled]\r\n    {newKey=productName, oldKey=description}\r\n    changed annotation: @UpdateKey(oldKey=otherDescription, newKey=otherProduct)\r\n\r\n","title":"How to edit method annotation attributes on runtime?","body":"<p>Man, you were just 2 steps away from the solution. After you retrieved invocation handler you have to change it's field memberValues. Here is the complete code:</p>\n\n<pre><code>import java.lang.annotation.*;\nimport java.lang.reflect.Field;\nimport java.lang.reflect.Method;\nimport java.lang.reflect.Proxy;\nimport java.util.Arrays;\nimport java.util.HashMap;\nimport java.util.Map;\n\npublic class NewApp {\n\n    public static void main(String[] args) throws NoSuchMethodException, NoSuchFieldException, IllegalAccessException {\n\n\n        // get the edit map method\n        Method method = CustomMap.class.getDeclaredMethod(\"editMap\", Map.class);\n\n        // get the annotation\n        UpdateKey updateKeyAnnotation = method.getDeclaredAnnotation(UpdateKey.class);\n        System.out.println(\"current annotation: \" + updateKeyAnnotation);\n\n        Object handler = Proxy.getInvocationHandler(updateKeyAnnotation);\n\n        System.out.println(Arrays.toString(handler.getClass().getDeclaredFields()));\n\n        // field memberValues contains annotation attributes and their values\n        // just modify it\n        Field memberValues = handler.getClass().getDeclaredField(\"memberValues\");\n        memberValues.setAccessible(true);\n        System.out.println(memberValues.get(handler));\n\n        Map&lt;String, String&gt; annotationAttributes = new HashMap&lt;&gt;();\n        annotationAttributes.put(\"newKey\", \"otherProduct\");\n        annotationAttributes.put(\"oldKey\", \"otherDescription\");\n        memberValues.set(handler, annotationAttributes);\n\n\n        System.out.println(\"changed annotation: \" + updateKeyAnnotation);\n    }\n}\n\n@Retention(RetentionPolicy.RUNTIME)\n@Target(ElementType.METHOD)\n@interface UpdateKey {\n    String oldKey() default \"\";    //The key that needs to be replaced\n\n    String newKey() default \"\";    //The new key\n}\n\nclass CustomMap {\n\n    @UpdateKey(oldKey = \"description\", newKey = \"productName\")\n    public void editMap(Map&lt;String, String&gt; map) throws NoSuchMethodException {\n        //get the annotation values\n        UpdateKey updateKey = this.getClass().getMethod(\"editMap\").getAnnotation(UpdateKey.class);\n\n        //save value and delete old key\n        Object obj = map.remove(updateKey.oldKey());\n\n        //set the value to the new key\n        map.put(updateKey.newKey(), obj.toString());\n    }\n}\n</code></pre>\n\n<p>output of this code </p>\n\n<pre><code>current annotation: @UpdateKey(newKey=productName, oldKey=description)\n[private static final long sun.reflect.annotation.AnnotationInvocationHandler.serialVersionUID, private final java.lang.Class sun.reflect.annotation.AnnotationInvocationHandler.type, private final java.util.Map sun.reflect.annotation.AnnotationInvocationHandler.memberValues, private transient volatile java.lang.reflect.Method[] sun.reflect.annotation.AnnotationInvocationHandler.memberMethods, static final boolean sun.reflect.annotation.AnnotationInvocationHandler.$assertionsDisabled]\n{newKey=productName, oldKey=description}\nchanged annotation: @UpdateKey(oldKey=otherDescription, newKey=otherProduct)\n</code></pre>\n"},{"tags":[],"owner":{"account_id":17899572,"reputation":31,"user_id":16543524,"display_name":"SleeplessChallenger"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691591947,"creation_date":1691591947,"answer_id":76868850,"question_id":60682431,"body_markdown":"For those who have issues as in the comment above (can&#39;t make comments yet), add `--add-opens=java.base/sun.reflect.annotation=ALL-UNNAMED` to VM options. This package has lots of default access modifiers, hence we need to tweak it with this option","title":"How to edit method annotation attributes on runtime?","body":"<p>For those who have issues as in the comment above (can't make comments yet), add <code>--add-opens=java.base/sun.reflect.annotation=ALL-UNNAMED</code> to VM options. This package has lots of default access modifiers, hence we need to tweak it with this option</p>\n"}],"owner":{"account_id":12804526,"reputation":1368,"user_id":9264713,"display_name":"Bahij.Mik"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1125,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":60686595,"answer_count":2,"score":2,"last_activity_date":1691591947,"creation_date":1584186909,"question_id":60682431,"body_markdown":"I have a simple annotation for editing keys of a map on runtime:\r\n```\r\n@Retention(RetentionPolicy.RUNTIME)\r\n@Target(ElementType.METHOD)\r\npublic @interface UpdateKey\r\n{\r\n    String oldKey() default &quot;&quot;;    //The key that needs to be replaced\r\n\r\n    String newKey() default &quot;&quot;;    //The new key\r\n\r\n}\r\n```\r\nAnd i am using it on a method in some class:\r\n```\r\npublic class CustomMap\r\n{\r\n    @UpdateKey(oldKey = &quot;description&quot;, newKey = &quot;productName&quot;)\r\n    public void editMap(Map&lt;String,String&gt; map) throws NoSuchMethodException\r\n    {\r\n        //get the annotation values\r\n        UpdateKey updateKey = this.getClass().getMethod(&quot;editMap&quot;).getAnnotation(UpdateKey.class);\r\n\r\n        //save value and delete old key\r\n        Object obj = map.remove(updateKey.oldKey());\r\n\r\n        //set the value to the new key\r\n        map.put(updateKey.newKey(),obj);\r\n    }\r\n}\r\n```\r\nBut nothing seems to work to manipulate this annotation before calling the method, i already tried :\r\n```     \r\n        // get the edit map method\r\n        Method method = CustomMap.class.getDeclaredMethod(&quot;editMap&quot;);\r\n\r\n        // get the annotation \r\n        UpdateKey updateKeyAnnotation = method.getDeclaredAnnotation(UpdateKey.class);\r\n\r\n        Object handler = Proxy.getInvocationHandler(updateKeyAnnotation);\r\n\r\n        //this is retrieving the reflection class fields NOT my annotation fields\r\n        sout(handler.getClass().getDeclaredFields());\r\n    \r\n        Field f;\r\n\r\n        //of course this will fail since there is no oldKey field in the reflection class\r\n        f = handler.getClass().getDeclaredField(&quot;oldKey&quot;);  \r\n\r\n```","title":"How to edit method annotation attributes on runtime?","body":"<p>I have a simple annotation for editing keys of a map on runtime:</p>\n\n<pre><code>@Retention(RetentionPolicy.RUNTIME)\n@Target(ElementType.METHOD)\npublic @interface UpdateKey\n{\n    String oldKey() default \"\";    //The key that needs to be replaced\n\n    String newKey() default \"\";    //The new key\n\n}\n</code></pre>\n\n<p>And i am using it on a method in some class:</p>\n\n<pre><code>public class CustomMap\n{\n    @UpdateKey(oldKey = \"description\", newKey = \"productName\")\n    public void editMap(Map&lt;String,String&gt; map) throws NoSuchMethodException\n    {\n        //get the annotation values\n        UpdateKey updateKey = this.getClass().getMethod(\"editMap\").getAnnotation(UpdateKey.class);\n\n        //save value and delete old key\n        Object obj = map.remove(updateKey.oldKey());\n\n        //set the value to the new key\n        map.put(updateKey.newKey(),obj);\n    }\n}\n</code></pre>\n\n<p>But nothing seems to work to manipulate this annotation before calling the method, i already tried :</p>\n\n<pre><code>        // get the edit map method\n        Method method = CustomMap.class.getDeclaredMethod(\"editMap\");\n\n        // get the annotation \n        UpdateKey updateKeyAnnotation = method.getDeclaredAnnotation(UpdateKey.class);\n\n        Object handler = Proxy.getInvocationHandler(updateKeyAnnotation);\n\n        //this is retrieving the reflection class fields NOT my annotation fields\n        sout(handler.getClass().getDeclaredFields());\n\n        Field f;\n\n        //of course this will fail since there is no oldKey field in the reflection class\n        f = handler.getClass().getDeclaredField(\"oldKey\");  \n\n</code></pre>\n"},{"tags":["java","amazon-web-services","aws-lambda"],"comments":[{"owner":{"account_id":8056033,"reputation":2316,"user_id":6073148,"accept_rate":75,"display_name":"Zahid Khan"},"score":2,"creation_date":1673796478,"post_id":75126190,"comment_id":132573050,"body_markdown":"how about &quot;System.getenv(&quot;AWS_LAMBDA_FUNCTION_NAME&quot;) != null&quot; Have you checked that way?","body":"how about &quot;System.getenv(&quot;AWS_LAMBDA_FUNCTION_NAME&quot;) != null&quot; Have you checked that way?"},{"owner":{"account_id":9955907,"reputation":606,"user_id":7366850,"accept_rate":100,"display_name":"Jamal Alkelani"},"score":0,"creation_date":1673796487,"post_id":75126190,"comment_id":132573054,"body_markdown":"Can you please add more details? are you trying to figure out if the called lambda function has invoked any utils from the commons package?","body":"Can you please add more details? are you trying to figure out if the called lambda function has invoked any utils from the commons package?"},{"owner":{"account_id":12666543,"reputation":405,"user_id":17478317,"display_name":"Abdullah Khilji"},"score":0,"creation_date":1673796698,"post_id":75126190,"comment_id":132573096,"body_markdown":"@JamalAlkelani I am trying to determine if the util package is used from Lambda or EC2 instances for example.","body":"@JamalAlkelani I am trying to determine if the util package is used from Lambda or EC2 instances for example."},{"owner":{"account_id":9955907,"reputation":606,"user_id":7366850,"accept_rate":100,"display_name":"Jamal Alkelani"},"score":0,"creation_date":1673796760,"post_id":75126190,"comment_id":132573104,"body_markdown":"@AbdullahKhilji Where does that package lives? is it self-hosted? or lives inside AWS lambda layers?","body":"@AbdullahKhilji Where does that package lives? is it self-hosted? or lives inside AWS lambda layers?"},{"owner":{"account_id":12666543,"reputation":405,"user_id":17478317,"display_name":"Abdullah Khilji"},"score":0,"creation_date":1673796874,"post_id":75126190,"comment_id":132573131,"body_markdown":"The commons package is a normal Java package, and can be included as a dependency to any other package.","body":"The commons package is a normal Java package, and can be included as a dependency to any other package."},{"owner":{"account_id":7501,"reputation":187942,"user_id":13070,"accept_rate":90,"display_name":"Mark B"},"score":0,"creation_date":1673805235,"post_id":75126190,"comment_id":132574658,"body_markdown":"Checking environment variables, as mentioned in the first comment, is the best way to do this.","body":"Checking environment variables, as mentioned in the first comment, is the best way to do this."}],"answers":[{"tags":[],"owner":{"account_id":8056033,"reputation":2316,"user_id":6073148,"accept_rate":75,"display_name":"Zahid Khan"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1691591895,"creation_date":1691591895,"answer_id":76868841,"question_id":75126190,"body_markdown":"You can check using:\r\n\r\n    System.getenv(&quot;AWS_LAMBDA_FUNCTION_NAME&quot;) != null\r\n\r\nto verify whether the runtime is within a Lambda or not.","title":"Java function call to determine whether code is executed inside AWS Lambda or not","body":"<p>You can check using:</p>\n<pre><code>System.getenv(&quot;AWS_LAMBDA_FUNCTION_NAME&quot;) != null\n</code></pre>\n<p>to verify whether the runtime is within a Lambda or not.</p>\n"}],"owner":{"account_id":12666543,"reputation":405,"user_id":17478317,"display_name":"Abdullah Khilji"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":50,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":76868841,"answer_count":1,"score":1,"last_activity_date":1691591895,"creation_date":1673796218,"question_id":75126190,"body_markdown":"We have a commons package that has some utils in it. For a certain method we need to check if the commons piece of code is executed inside a AWS Lambda or not, is there a simple call to determine this?","title":"Java function call to determine whether code is executed inside AWS Lambda or not","body":"<p>We have a commons package that has some utils in it. For a certain method we need to check if the commons piece of code is executed inside a AWS Lambda or not, is there a simple call to determine this?</p>\n"},{"tags":["java","spring","javabeans"],"answers":[{"tags":[],"owner":{"account_id":1908489,"reputation":9264,"user_id":1722882,"accept_rate":100,"display_name":"Plog"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1510139537,"creation_date":1510139537,"answer_id":47178231,"question_id":47177924,"body_markdown":"You should make sure the `PropertyPlaceholderConfigurer` bean is loaded before trying to evaluate properties by making the bean static. Spring instantiates static beans before other beans definitions.\r\n\r\n    @Import({DatabaseConfiguration.class, MailSenderConfiguration.class})\r\n    public class AppConfig {\r\n    @Bean\r\n    public static PropertyPlaceholderConfigurer propertyPlaceholderConfigurer() {\r\n        PropertyPlaceholderConfigurer propertyPlaceholderConfigurer = new PropertyPlaceholderConfigurer();\r\n        propertyPlaceholderConfigurer.setLocation(new ClassPathResource(&quot;application.properties&quot;));\r\n        propertyPlaceholderConfigurer.setIgnoreUnresolvablePlaceholders(true);\r\n        return propertyPlaceholderConfigurer;\r\n    }","title":"Could not resolve placeholder for some property","body":"<p>You should make sure the <code>PropertyPlaceholderConfigurer</code> bean is loaded before trying to evaluate properties by making the bean static. Spring instantiates static beans before other beans definitions.</p>\n\n<pre><code>@Import({DatabaseConfiguration.class, MailSenderConfiguration.class})\npublic class AppConfig {\n@Bean\npublic static PropertyPlaceholderConfigurer propertyPlaceholderConfigurer() {\n    PropertyPlaceholderConfigurer propertyPlaceholderConfigurer = new PropertyPlaceholderConfigurer();\n    propertyPlaceholderConfigurer.setLocation(new ClassPathResource(\"application.properties\"));\n    propertyPlaceholderConfigurer.setIgnoreUnresolvablePlaceholders(true);\n    return propertyPlaceholderConfigurer;\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2119697,"reputation":998,"user_id":1883236,"display_name":"Elyor Murodov"},"down_vote_count":0,"up_vote_count":6,"is_accepted":true,"score":6,"last_activity_date":1510139555,"creation_date":1510139555,"answer_id":47178237,"question_id":47177924,"body_markdown":"Looks like your property source config in MailSenderConfiguration is overriding the one in AppConfig.\r\n\r\nYou can remove PropertyPlaceholderConfigurer bean from MailSenderConfiguration, and in AppConfig, set additional location for &quot;mail.properties&quot; (use setLocations() method instead of setLocation()):\r\n\r\n    @Import({DatabaseConfiguration.class, MailSenderConfiguration.class})\r\n    public class AppConfig {\r\n    @Bean\r\n    public PropertyPlaceholderConfigurer propertyPlaceholderConfigurer() {\r\n        PropertyPlaceholderConfigurer propertyPlaceholderConfigurer = new PropertyPlaceholderConfigurer();\r\n        propertyPlaceholderConfigurer.setLocations(new ClassPathResource(&quot;application.properties&quot;), new ClassPathResource(&quot;mail.properties&quot;));\r\n        propertyPlaceholderConfigurer.setIgnoreUnresolvablePlaceholders(true);\r\n        return propertyPlaceholderConfigurer;\r\n    }\r\n\r\n","title":"Could not resolve placeholder for some property","body":"<p>Looks like your property source config in MailSenderConfiguration is overriding the one in AppConfig.</p>\n\n<p>You can remove PropertyPlaceholderConfigurer bean from MailSenderConfiguration, and in AppConfig, set additional location for \"mail.properties\" (use setLocations() method instead of setLocation()):</p>\n\n<pre><code>@Import({DatabaseConfiguration.class, MailSenderConfiguration.class})\npublic class AppConfig {\n@Bean\npublic PropertyPlaceholderConfigurer propertyPlaceholderConfigurer() {\n    PropertyPlaceholderConfigurer propertyPlaceholderConfigurer = new PropertyPlaceholderConfigurer();\n    propertyPlaceholderConfigurer.setLocations(new ClassPathResource(\"application.properties\"), new ClassPathResource(\"mail.properties\"));\n    propertyPlaceholderConfigurer.setIgnoreUnresolvablePlaceholders(true);\n    return propertyPlaceholderConfigurer;\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":29158065,"reputation":1,"user_id":22337403,"display_name":"Manoj Mandal"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691591884,"creation_date":1691133939,"answer_id":76833782,"question_id":47177924,"body_markdown":"Thanks for other suggestions maybe it works for them but in my case it&#39;s like : some time it&#39;s happened due to JDK mismatch so, better first check your IDE JDK version and project JDK version. ","title":"Could not resolve placeholder for some property","body":"<p>Thanks for other suggestions maybe it works for them but in my case it's like : some time it's happened due to JDK mismatch so, better first check your IDE JDK version and project JDK version.</p>\n"}],"owner":{"account_id":8622016,"reputation":4803,"user_id":6456586,"accept_rate":63,"display_name":"Denis Stephanov"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":19687,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"accepted_answer_id":47178237,"answer_count":3,"score":4,"last_activity_date":1691591884,"creation_date":1510138687,"question_id":47177924,"body_markdown":"&gt; org.springframework.beans.factory.BeanCreationException: Error\r\n&gt; creating bean with name &#39;dbDataSource&#39; defined in\r\n&gt; cz.ita.javaee.config.DatabaseConfiguration: Unexpected exception\r\n&gt; during bean creation; nested exception is\r\n&gt; java.lang.IllegalArgumentException: Could not resolve placeholder\r\n&gt; &#39;db.jndi&#39; in value &quot;${db.jndi}&quot; \tat\r\n&gt; org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:518)\r\n&gt; \tat\r\n&gt; org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:312)\r\n&gt; \tat\r\n&gt; org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:228)\r\n&gt; \tat\r\n&gt; org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:310)\r\n&gt; \tat\r\n&gt; org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200)\r\n&gt; \tat\r\n&gt; org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:756)\r\n&gt; \tat\r\n&gt; org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:868)\r\n&gt; \tat\r\n&gt; org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:549)\r\n&gt; \tat\r\n&gt; org.springframework.web.context.ContextLoader.configureAndRefreshWebApplicationContext(ContextLoader.java:409)\r\n&gt; \tat\r\n&gt; org.springframework.web.context.ContextLoader.initWebApplicationContext(ContextLoader.java:291)\r\n&gt; \tat\r\n&gt; org.springframework.web.context.ContextLoaderListener.contextInitialized(ContextLoaderListener.java:103)\r\n&gt; \tat\r\n&gt; org.apache.catalina.core.StandardContext.listenerStart(StandardContext.java:4743)\r\n&gt; \tat\r\n&gt; org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:5207)\r\n&gt; \tat\r\n&gt; org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)\r\n&gt; \tat\r\n&gt; org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:752)\r\n&gt; \tat\r\n&gt; org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:728)\r\n&gt; \tat\r\n&gt; org.apache.catalina.core.StandardHost.addChild(StandardHost.java:734)\r\n&gt; \tat\r\n&gt; org.apache.catalina.startup.HostConfig.manageApp(HostConfig.java:1739)\r\n&gt; \tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) \tat\r\n&gt; sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\r\n&gt; \tat\r\n&gt; sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n&gt; \tat java.lang.reflect.Method.invoke(Method.java:498) \tat\r\n&gt; org.apache.tomcat.util.modeler.BaseModelMBean.invoke(BaseModelMBean.java:300)\r\n&gt; \tat\r\n&gt; com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.invoke(DefaultMBeanServerInterceptor.java:819)\r\n&gt; \tat\r\n&gt; com.sun.jmx.mbeanserver.JmxMBeanServer.invoke(JmxMBeanServer.java:801)\r\n&gt; \tat\r\n&gt; org.apache.catalina.mbeans.MBeanFactory.createStandardContext(MBeanFactory.java:482)\r\n&gt; \tat\r\n&gt; org.apache.catalina.mbeans.MBeanFactory.createStandardContext(MBeanFactory.java:431)\r\n&gt; \tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) \tat\r\n&gt; sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\r\n&gt; \tat\r\n&gt; sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n&gt; \tat java.lang.reflect.Method.invoke(Method.java:498) \tat\r\n&gt; org.apache.tomcat.util.modeler.BaseModelMBean.invoke(BaseModelMBean.java:300)\r\n&gt; \tat\r\n&gt; com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.invoke(DefaultMBeanServerInterceptor.java:819)\r\n&gt; \tat\r\n&gt; com.sun.jmx.mbeanserver.JmxMBeanServer.invoke(JmxMBeanServer.java:801)\r\n&gt; \tat\r\n&gt; javax.management.remote.rmi.RMIConnectionImpl.doOperation(RMIConnectionImpl.java:1468)\r\n&gt; \tat\r\n&gt; javax.management.remote.rmi.RMIConnectionImpl.access$300(RMIConnectionImpl.java:76)\r\n&gt; \tat\r\n&gt; javax.management.remote.rmi.RMIConnectionImpl$PrivilegedOperation.run(RMIConnectionImpl.java:1309)\r\n&gt; \tat\r\n&gt; javax.management.remote.rmi.RMIConnectionImpl.doPrivilegedOperation(RMIConnectionImpl.java:1401)\r\n&gt; \tat\r\n&gt; javax.management.remote.rmi.RMIConnectionImpl.invoke(RMIConnectionImpl.java:829)\r\n&gt; \tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) \tat\r\n&gt; sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\r\n&gt; \tat\r\n&gt; sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n&gt; \tat java.lang.reflect.Method.invoke(Method.java:498) \tat\r\n&gt; sun.rmi.server.UnicastServerRef.dispatch(UnicastServerRef.java:357)\r\n&gt; \tat sun.rmi.transport.Transport$1.run(Transport.java:200) \tat\r\n&gt; sun.rmi.transport.Transport$1.run(Transport.java:197) \tat\r\n&gt; java.security.AccessController.doPrivileged(Native Method) \tat\r\n&gt; sun.rmi.transport.Transport.serviceCall(Transport.java:196) \tat\r\n&gt; sun.rmi.transport.tcp.TCPTransport.handleMessages(TCPTransport.java:568)\r\n&gt; \tat\r\n&gt; sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run0(TCPTransport.java:826)\r\n&gt; \tat\r\n&gt; sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.lambda$run$0(TCPTransport.java:683)\r\n&gt; \tat java.security.AccessController.doPrivileged(Native Method) \tat\r\n&gt; sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run(TCPTransport.java:682)\r\n&gt; \tat\r\n&gt; java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)\r\n&gt; \tat\r\n&gt; java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)\r\n&gt; \tat java.lang.Thread.run(Thread.java:748) Caused by:\r\n&gt; java.lang.IllegalArgumentException: Could not resolve placeholder\r\n&gt; &#39;db.jndi&#39; in value &quot;${db.jndi}&quot; \tat\r\n&gt; org.springframework.util.PropertyPlaceholderHelper.parseStringValue(PropertyPlaceholderHelper.java:172)\r\n&gt; \tat\r\n&gt; org.springframework.util.PropertyPlaceholderHelper.replacePlaceholders(PropertyPlaceholderHelper.java:124)\r\n&gt; \tat\r\n&gt; org.springframework.core.env.AbstractPropertyResolver.doResolvePlaceholders(AbstractPropertyResolver.java:237)\r\n&gt; \tat\r\n&gt; org.springframework.core.env.AbstractPropertyResolver.resolveRequiredPlaceholders(AbstractPropertyResolver.java:211)\r\n&gt; \tat\r\n&gt; org.springframework.context.support.PropertySourcesPlaceholderConfigurer.lambda$processProperties$0(PropertySourcesPlaceholderConfigurer.java:175)\r\n&gt; \tat\r\n&gt; org.springframework.beans.factory.support.AbstractBeanFactory.resolveEmbeddedValue(AbstractBeanFactory.java:834)\r\n&gt; \tat\r\n&gt; org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1081)\r\n&gt; \tat\r\n&gt; org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1060)\r\n&gt; \tat\r\n&gt; org.springframework.beans.factory.support.ConstructorResolver.resolveAutowiredArgument(ConstructorResolver.java:809)\r\n&gt; \tat\r\n&gt; org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:715)\r\n&gt; \tat\r\n&gt; org.springframework.beans.factory.support.ConstructorResolver.instantiateUsingFactoryMethod(ConstructorResolver.java:458)\r\n&gt; \tat\r\n&gt; org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateUsingFactoryMethod(AbstractAutowireCapableBeanFactory.java:1249)\r\n&gt; \tat\r\n&gt; org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1098)\r\n&gt; \tat\r\n&gt; org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:545)\r\n&gt; \tat\r\n&gt; org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:502)\r\n&gt; \t... 55 more\r\n\r\nMy Database Configuration class:\r\n\r\n    @EnableTransactionManagement\r\n    public class DatabaseConfiguration {\r\n    \r\n        @Bean(name = &quot;dbDataSource&quot;)\r\n        @Profile(&quot;!development&quot;)\r\n        public DataSource dataSource(@Value(&quot;${db.jndi}&quot;) String dbJndiName) {\r\n            JndiDataSourceLookup lookup = new JndiDataSourceLookup();\r\n            return lookup.getDataSource(dbJndiName);\r\n        }\r\n    \r\n        @Profile(&quot;development&quot;)\r\n        public DataSource dataSource(@Value(&quot;${development.db.driver}&quot;) String dbDriver,\r\n                @Value(&quot;${development.db.url}&quot;) String dbUrl,\r\n                @Value(&quot;${development.db.username}&quot;) String dbUsername,\r\n                @Value(&quot;${development.db.password}&quot;) String dbPassword) {\r\n            DriverManagerDataSource driverManagerDataSource = new DriverManagerDataSource(dbUrl);\r\n            driverManagerDataSource.setDriverClassName(dbDriver);\r\n            driverManagerDataSource.setUsername(dbUsername);\r\n            driverManagerDataSource.setPassword(dbPassword);\r\n            return driverManagerDataSource;\r\n        }\r\n    \r\n    }\r\n\r\nAnd AppConfig:\r\n\r\n    @Import({DatabaseConfiguration.class, MailSenderConfiguration.class})\r\n    public class AppConfig {\r\n    @Bean\r\n    public PropertyPlaceholderConfigurer propertyPlaceholderConfigurer() {\r\n        PropertyPlaceholderConfigurer propertyPlaceholderConfigurer = new PropertyPlaceholderConfigurer();\r\n        propertyPlaceholderConfigurer.setLocation(new ClassPathResource(&quot;application.properties&quot;));\r\n        propertyPlaceholderConfigurer.setIgnoreUnresolvablePlaceholders(true);\r\n        return propertyPlaceholderConfigurer;\r\n    }\r\n}\r\n\r\nHi, I got error above and I don&#39;t know how to fix it, can you help me? My project working fine until I&#39;ve added this bean:\r\n\r\n    @PropertySource(&quot;classpath:mail.properties&quot;)\r\n    public class MailSenderConfiguration {\r\n\r\n    @Value(&quot;${mail.smtp.host}&quot;)\r\n    private String mailHost;\r\n\r\n    @Value(&quot;${mail.smtp.port}&quot;)\r\n    private int mailPort;\r\n\r\n    @Value(&quot;${mail.username}&quot;)\r\n    private String mailUsername;\r\n\r\n    @Value(&quot;${mail.password}&quot;)\r\n    private String mailPassword;\r\n\r\n    @Value(&quot;${mail.protocol}&quot;)\r\n    private String mailProtocol;\r\n\r\n    @Value(&quot;${mail.smtp.auth}&quot;)\r\n    private boolean mailAuth;\r\n\r\n    @Value(&quot;${mail.smtp.starttls.enable}&quot;)\r\n    private String mailEnableTls;\r\n\r\n    @Value(&quot;${mail.smtp.debug}&quot;)\r\n    private boolean mailDebug;\r\n\r\n    @Bean\r\n    public JavaMailSender getMailSender() {\r\n        JavaMailSenderImpl mailSender = new JavaMailSenderImpl();\r\n\r\n        mailSender.setHost(mailHost);\r\n        mailSender.setPort(mailPort);\r\n        mailSender.setUsername(mailUsername);\r\n        mailSender.setPassword(mailPassword);\r\n\r\n        Properties mailProperties = new Properties();\r\n        mailProperties.put(&quot;mail.transport.protocol&quot;, mailProtocol);\r\n        mailProperties.put(&quot;mail.smtp.auth&quot;, mailAuth);\r\n        mailProperties.put(&quot;mail.smtp.starttls.enable&quot;, mailEnableTls);\r\n        mailProperties.put(&quot;mail.smtp.debug&quot;, mailDebug);\r\n        mailSender.setJavaMailProperties(mailProperties);\r\n\r\n        return mailSender;\r\n    }\r\n\r\n    @Bean\r\n    public PropertyPlaceholderConfigurer propertyPlaceholderConfigurer() {\r\n        PropertyPlaceholderConfigurer propertyPlaceholderConfigurer = new PropertyPlaceholderConfigurer();\r\n        propertyPlaceholderConfigurer.setLocation(new ClassPathResource(&quot;mail.properties&quot;));\r\n        propertyPlaceholderConfigurer.setIgnoreUnresolvablePlaceholders(true);\r\n        return propertyPlaceholderConfigurer;\r\n    }\r\n}","title":"Could not resolve placeholder for some property","body":"<blockquote>\n  <p>org.springframework.beans.factory.BeanCreationException: Error\n  creating bean with name 'dbDataSource' defined in\n  cz.ita.javaee.config.DatabaseConfiguration: Unexpected exception\n  during bean creation; nested exception is\n  java.lang.IllegalArgumentException: Could not resolve placeholder\n  'db.jndi' in value \"${db.jndi}\"   at\n  org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:518)\n    at\n  org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:312)\n    at\n  org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:228)\n    at\n  org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:310)\n    at\n  org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200)\n    at\n  org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:756)\n    at\n  org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:868)\n    at\n  org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:549)\n    at\n  org.springframework.web.context.ContextLoader.configureAndRefreshWebApplicationContext(ContextLoader.java:409)\n    at\n  org.springframework.web.context.ContextLoader.initWebApplicationContext(ContextLoader.java:291)\n    at\n  org.springframework.web.context.ContextLoaderListener.contextInitialized(ContextLoaderListener.java:103)\n    at\n  org.apache.catalina.core.StandardContext.listenerStart(StandardContext.java:4743)\n    at\n  org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:5207)\n    at\n  org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)\n    at\n  org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:752)\n    at\n  org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:728)\n    at\n  org.apache.catalina.core.StandardHost.addChild(StandardHost.java:734)\n    at\n  org.apache.catalina.startup.HostConfig.manageApp(HostConfig.java:1739)\n    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)  at\n  sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\n    at\n  sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n    at java.lang.reflect.Method.invoke(Method.java:498)     at\n  org.apache.tomcat.util.modeler.BaseModelMBean.invoke(BaseModelMBean.java:300)\n    at\n  com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.invoke(DefaultMBeanServerInterceptor.java:819)\n    at\n  com.sun.jmx.mbeanserver.JmxMBeanServer.invoke(JmxMBeanServer.java:801)\n    at\n  org.apache.catalina.mbeans.MBeanFactory.createStandardContext(MBeanFactory.java:482)\n    at\n  org.apache.catalina.mbeans.MBeanFactory.createStandardContext(MBeanFactory.java:431)\n    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)  at\n  sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\n    at\n  sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n    at java.lang.reflect.Method.invoke(Method.java:498)     at\n  org.apache.tomcat.util.modeler.BaseModelMBean.invoke(BaseModelMBean.java:300)\n    at\n  com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.invoke(DefaultMBeanServerInterceptor.java:819)\n    at\n  com.sun.jmx.mbeanserver.JmxMBeanServer.invoke(JmxMBeanServer.java:801)\n    at\n  javax.management.remote.rmi.RMIConnectionImpl.doOperation(RMIConnectionImpl.java:1468)\n    at\n  javax.management.remote.rmi.RMIConnectionImpl.access$300(RMIConnectionImpl.java:76)\n    at\n  javax.management.remote.rmi.RMIConnectionImpl$PrivilegedOperation.run(RMIConnectionImpl.java:1309)\n    at\n  javax.management.remote.rmi.RMIConnectionImpl.doPrivilegedOperation(RMIConnectionImpl.java:1401)\n    at\n  javax.management.remote.rmi.RMIConnectionImpl.invoke(RMIConnectionImpl.java:829)\n    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)  at\n  sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\n    at\n  sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n    at java.lang.reflect.Method.invoke(Method.java:498)     at\n  sun.rmi.server.UnicastServerRef.dispatch(UnicastServerRef.java:357)\n    at sun.rmi.transport.Transport$1.run(Transport.java:200)    at\n  sun.rmi.transport.Transport$1.run(Transport.java:197)     at\n  java.security.AccessController.doPrivileged(Native Method)    at\n  sun.rmi.transport.Transport.serviceCall(Transport.java:196)   at\n  sun.rmi.transport.tcp.TCPTransport.handleMessages(TCPTransport.java:568)\n    at\n  sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run0(TCPTransport.java:826)\n    at\n  sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.lambda$run$0(TCPTransport.java:683)\n    at java.security.AccessController.doPrivileged(Native Method)   at\n  sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run(TCPTransport.java:682)\n    at\n  java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)\n    at\n  java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)\n    at java.lang.Thread.run(Thread.java:748) Caused by:\n  java.lang.IllegalArgumentException: Could not resolve placeholder\n  'db.jndi' in value \"${db.jndi}\"   at\n  org.springframework.util.PropertyPlaceholderHelper.parseStringValue(PropertyPlaceholderHelper.java:172)\n    at\n  org.springframework.util.PropertyPlaceholderHelper.replacePlaceholders(PropertyPlaceholderHelper.java:124)\n    at\n  org.springframework.core.env.AbstractPropertyResolver.doResolvePlaceholders(AbstractPropertyResolver.java:237)\n    at\n  org.springframework.core.env.AbstractPropertyResolver.resolveRequiredPlaceholders(AbstractPropertyResolver.java:211)\n    at\n  org.springframework.context.support.PropertySourcesPlaceholderConfigurer.lambda$processProperties$0(PropertySourcesPlaceholderConfigurer.java:175)\n    at\n  org.springframework.beans.factory.support.AbstractBeanFactory.resolveEmbeddedValue(AbstractBeanFactory.java:834)\n    at\n  org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1081)\n    at\n  org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1060)\n    at\n  org.springframework.beans.factory.support.ConstructorResolver.resolveAutowiredArgument(ConstructorResolver.java:809)\n    at\n  org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:715)\n    at\n  org.springframework.beans.factory.support.ConstructorResolver.instantiateUsingFactoryMethod(ConstructorResolver.java:458)\n    at\n  org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateUsingFactoryMethod(AbstractAutowireCapableBeanFactory.java:1249)\n    at\n  org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1098)\n    at\n  org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:545)\n    at\n  org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:502)\n    ... 55 more</p>\n</blockquote>\n\n<p>My Database Configuration class:</p>\n\n<pre><code>@EnableTransactionManagement\npublic class DatabaseConfiguration {\n\n    @Bean(name = \"dbDataSource\")\n    @Profile(\"!development\")\n    public DataSource dataSource(@Value(\"${db.jndi}\") String dbJndiName) {\n        JndiDataSourceLookup lookup = new JndiDataSourceLookup();\n        return lookup.getDataSource(dbJndiName);\n    }\n\n    @Profile(\"development\")\n    public DataSource dataSource(@Value(\"${development.db.driver}\") String dbDriver,\n            @Value(\"${development.db.url}\") String dbUrl,\n            @Value(\"${development.db.username}\") String dbUsername,\n            @Value(\"${development.db.password}\") String dbPassword) {\n        DriverManagerDataSource driverManagerDataSource = new DriverManagerDataSource(dbUrl);\n        driverManagerDataSource.setDriverClassName(dbDriver);\n        driverManagerDataSource.setUsername(dbUsername);\n        driverManagerDataSource.setPassword(dbPassword);\n        return driverManagerDataSource;\n    }\n\n}\n</code></pre>\n\n<p>And AppConfig:</p>\n\n<pre><code>@Import({DatabaseConfiguration.class, MailSenderConfiguration.class})\npublic class AppConfig {\n@Bean\npublic PropertyPlaceholderConfigurer propertyPlaceholderConfigurer() {\n    PropertyPlaceholderConfigurer propertyPlaceholderConfigurer = new PropertyPlaceholderConfigurer();\n    propertyPlaceholderConfigurer.setLocation(new ClassPathResource(\"application.properties\"));\n    propertyPlaceholderConfigurer.setIgnoreUnresolvablePlaceholders(true);\n    return propertyPlaceholderConfigurer;\n}\n</code></pre>\n\n<p>}</p>\n\n<p>Hi, I got error above and I don't know how to fix it, can you help me? My project working fine until I've added this bean:</p>\n\n<pre><code>@PropertySource(\"classpath:mail.properties\")\npublic class MailSenderConfiguration {\n\n@Value(\"${mail.smtp.host}\")\nprivate String mailHost;\n\n@Value(\"${mail.smtp.port}\")\nprivate int mailPort;\n\n@Value(\"${mail.username}\")\nprivate String mailUsername;\n\n@Value(\"${mail.password}\")\nprivate String mailPassword;\n\n@Value(\"${mail.protocol}\")\nprivate String mailProtocol;\n\n@Value(\"${mail.smtp.auth}\")\nprivate boolean mailAuth;\n\n@Value(\"${mail.smtp.starttls.enable}\")\nprivate String mailEnableTls;\n\n@Value(\"${mail.smtp.debug}\")\nprivate boolean mailDebug;\n\n@Bean\npublic JavaMailSender getMailSender() {\n    JavaMailSenderImpl mailSender = new JavaMailSenderImpl();\n\n    mailSender.setHost(mailHost);\n    mailSender.setPort(mailPort);\n    mailSender.setUsername(mailUsername);\n    mailSender.setPassword(mailPassword);\n\n    Properties mailProperties = new Properties();\n    mailProperties.put(\"mail.transport.protocol\", mailProtocol);\n    mailProperties.put(\"mail.smtp.auth\", mailAuth);\n    mailProperties.put(\"mail.smtp.starttls.enable\", mailEnableTls);\n    mailProperties.put(\"mail.smtp.debug\", mailDebug);\n    mailSender.setJavaMailProperties(mailProperties);\n\n    return mailSender;\n}\n\n@Bean\npublic PropertyPlaceholderConfigurer propertyPlaceholderConfigurer() {\n    PropertyPlaceholderConfigurer propertyPlaceholderConfigurer = new PropertyPlaceholderConfigurer();\n    propertyPlaceholderConfigurer.setLocation(new ClassPathResource(\"mail.properties\"));\n    propertyPlaceholderConfigurer.setIgnoreUnresolvablePlaceholders(true);\n    return propertyPlaceholderConfigurer;\n}\n</code></pre>\n\n<p>}</p>\n"},{"tags":["java","maven","installation","path-variables"],"comments":[{"owner":{"account_id":430557,"reputation":3444,"user_id":814074,"accept_rate":50,"display_name":"Sachin"},"score":0,"creation_date":1372236447,"post_id":17315425,"comment_id":25119742,"body_markdown":"Set valid JAVA_HOME path in System environment","body":"Set valid JAVA_HOME path in System environment"},{"owner":{"account_id":2342481,"reputation":1289,"user_id":2053461,"accept_rate":83,"display_name":"Ahmad Azwar Anas"},"score":1,"creation_date":1372236783,"post_id":17315425,"comment_id":25114226,"body_markdown":"try this.. `C:\\ YourFolder &gt;set path=C:\\Program Files\\Java\\jdk1.7.0_09\\bin;`, in this case, my jdk version is `1.7.0_09` **OR** you can looked out [this question](http://stackoverflow.com/questions/7709041/javac-is-not-recognized-as-an-internal-or-external-command-operable-program-or/16562626#16562626). Welcome to [StackOverFlow](http://stackoverflow.com/).. ^^","body":"try this.. <code>C:\\ YourFolder &gt;set path=C:\\Program Files\\Java\\jdk1.7.0_09\\bin;</code>, in this case, my jdk version is <code>1.7.0_09</code> <b>OR</b> you can looked out <a href=\"http://stackoverflow.com/questions/7709041/javac-is-not-recognized-as-an-internal-or-external-command-operable-program-or/16562626#16562626\">this question</a>. Welcome to <a href=\"http://stackoverflow.com/\">StackOverFlow</a>.. ^^"},{"owner":{"account_id":3429571,"reputation":1922,"user_id":2874409,"accept_rate":48,"display_name":"Andiana"},"score":3,"creation_date":1488422105,"post_id":17315425,"comment_id":72227176,"body_markdown":"With Maven, your JAVA_HOME must NOT CONTAIN the &quot;bin&quot;, just ...\\jdk1.7.0_09\\ is enough.","body":"With Maven, your JAVA_HOME must NOT CONTAIN the &quot;bin&quot;, just ...\\jdk1.7.0_09\\ is enough."},{"owner":{"display_name":"user12200634"},"score":1,"creation_date":1585660468,"post_id":17315425,"comment_id":107834607,"body_markdown":"If you did everything correctly and it still doesn&#39;t work, try **restarting** your machine","body":"If you did everything correctly and it still doesn&#39;t work, try <b>restarting</b> your machine"}],"answers":[{"tags":[],"owner":{"account_id":459462,"reputation":2067,"user_id":859955,"accept_rate":91,"display_name":"nwaltham"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1372236414,"creation_date":1372236414,"answer_id":17315463,"question_id":17315425,"body_markdown":"The JAVA_HOME should point to the JDK home rather than the JRE home if you are going to be compiling stuff, likewise - I would try and install the JDK in a directory that doesn&#39;t include a space. Even if this is not your problem now, it can cause problems in the future!","title":"Error in setting JAVA_HOME","body":"<p>The JAVA_HOME should point to the JDK home rather than the JRE home if you are going to be compiling stuff, likewise - I would try and install the JDK in a directory that doesn't include a space. Even if this is not your problem now, it can cause problems in the future!</p>\n"},{"tags":[],"owner":{"account_id":2678195,"reputation":68091,"user_id":2314073,"accept_rate":56,"display_name":"Juned Ahsan"},"down_vote_count":0,"up_vote_count":88,"is_accepted":true,"score":88,"last_activity_date":1404943811,"creation_date":1372236422,"answer_id":17315470,"question_id":17315425,"body_markdown":"JAVA_HOME should point to jdk directory and not to jre directory. Also JAVA_HOME should point to the home jdk directory and not to jdk/bin directory.\r\n\r\nAssuming that you have JDK installed in your program files directory then you need to set the JAVA_HOME like this:\r\n\r\n    JAVA_HOME=&quot;C:\\Program Files\\Java\\jdkxxx&quot;\r\n\r\nxxx is the jdk version\r\n\r\nFollow this link to learn more about setting JAVA_HOME:\r\n\r\nhttp://docs.oracle.com/cd/E19182-01/820-7851/inst_cli_jdk_javahome_t/index.html","title":"Error in setting JAVA_HOME","body":"<p>JAVA_HOME should point to jdk directory and not to jre directory. Also JAVA_HOME should point to the home jdk directory and not to jdk/bin directory.</p>\n\n<p>Assuming that you have JDK installed in your program files directory then you need to set the JAVA_HOME like this:</p>\n\n<pre><code>JAVA_HOME=\"C:\\Program Files\\Java\\jdkxxx\"\n</code></pre>\n\n<p>xxx is the jdk version</p>\n\n<p>Follow this link to learn more about setting JAVA_HOME:</p>\n\n<p><a href=\"http://docs.oracle.com/cd/E19182-01/820-7851/inst_cli_jdk_javahome_t/index.html\" rel=\"noreferrer\">http://docs.oracle.com/cd/E19182-01/820-7851/inst_cli_jdk_javahome_t/index.html</a></p>\n"},{"tags":[],"owner":{"account_id":2784074,"reputation":1439,"user_id":2395943,"accept_rate":50,"display_name":"sadhu"},"down_vote_count":0,"up_vote_count":16,"is_accepted":false,"score":16,"last_activity_date":1372236458,"creation_date":1372236458,"answer_id":17315480,"question_id":17315425,"body_markdown":"Do not include bin in your JAVA_HOME env variable","title":"Error in setting JAVA_HOME","body":"<p>Do not include bin in your JAVA_HOME env variable</p>\n"},{"tags":[],"owner":{"account_id":2102673,"reputation":35121,"user_id":1869846,"accept_rate":56,"display_name":"Ruchira Gayan Ranaweera"},"down_vote_count":0,"up_vote_count":8,"is_accepted":false,"score":8,"last_activity_date":1372236642,"creation_date":1372236642,"answer_id":17315536,"question_id":17315425,"body_markdown":"Follow the instruction in [here][1].\r\n\r\n\r\n  [1]: http://www.mkyong.com/maven/how-to-install-maven-in-windows/\r\n\r\n`JAVA_HOME`should be like this\r\n\r\n    JAVA_HOME=C:\\Program Files\\Java\\jdk1.7.0_07","title":"Error in setting JAVA_HOME","body":"<p>Follow the instruction in <a href=\"http://www.mkyong.com/maven/how-to-install-maven-in-windows/\" rel=\"noreferrer\">here</a>.</p>\n\n<p><code>JAVA_HOME</code>should be like this</p>\n\n<pre><code>JAVA_HOME=C:\\Program Files\\Java\\jdk1.7.0_07\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2921966,"reputation":3572,"user_id":2504013,"accept_rate":86,"display_name":"JREN"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1372236719,"creation_date":1372236719,"answer_id":17315555,"question_id":17315425,"body_markdown":"You are pointing your JAVA_HOME to the JRE which is the Java Runtime Environment. The runtime environment doesn&#39;t have a java compiler in its bin folder.\r\nYou should download the JDK which is the Java Development Kit. Once you&#39;ve installed that, you can see in your bin folder that there&#39;s a file called javac.exe. That&#39;s your compiler.","title":"Error in setting JAVA_HOME","body":"<p>You are pointing your JAVA_HOME to the JRE which is the Java Runtime Environment. The runtime environment doesn't have a java compiler in its bin folder.\nYou should download the JDK which is the Java Development Kit. Once you've installed that, you can see in your bin folder that there's a file called javac.exe. That's your compiler.</p>\n"},{"tags":[],"owner":{"account_id":2093874,"reputation":21,"user_id":1863075,"display_name":"jonorri"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1401920860,"creation_date":1401920860,"answer_id":24048650,"question_id":17315425,"body_markdown":"Just remember to add quotes into the path if you have a space in your path to java home.\r\nC:\\Program Files\\java\\javaxxx\\ doesn&#39;t work\r\nbut\r\n&quot;C:\\Program Files\\java\\javaxxx\\&quot; does.","title":"Error in setting JAVA_HOME","body":"<p>Just remember to add quotes into the path if you have a space in your path to java home.\nC:\\Program Files\\java\\javaxxx\\ doesn't work\nbut\n\"C:\\Program Files\\java\\javaxxx\\\" does.</p>\n"},{"tags":[],"owner":{"account_id":11372337,"reputation":248,"user_id":8337597,"display_name":"karthik padav"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1522523981,"creation_date":1522523981,"answer_id":49591499,"question_id":17315425,"body_markdown":"JAVA_HOME = C:\\Program Files\\Java\\jdk(JDK version number)\r\n\r\nExample: C:\\Program Files\\Java\\jdk-10\r\n\r\nAnd then restart you command prompt it works.","title":"Error in setting JAVA_HOME","body":"<p>JAVA_HOME = C:\\Program Files\\Java\\jdk(JDK version number)</p>\n\n<p>Example: C:\\Program Files\\Java\\jdk-10</p>\n\n<p>And then restart you command prompt it works.</p>\n"},{"tags":[],"owner":{"account_id":9321584,"reputation":1230,"user_id":6920169,"accept_rate":75,"display_name":"Loki"},"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1656422771,"creation_date":1656422771,"answer_id":72787281,"question_id":17315425,"body_markdown":"**JAVA_HOME** should point to jdk directory like in the image with new variable, like below\r\n\r\n[![JAVA_HOME][1]][1]\r\n\r\n**PATH** should point to jdk bin like below\r\n \r\n[![PATH][2]][2]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/QTZmO.png\r\n  [2]: https://i.stack.imgur.com/oKFQ2.png","title":"Error in setting JAVA_HOME","body":"<p><strong>JAVA_HOME</strong> should point to jdk directory like in the image with new variable, like below</p>\n<p><a href=\"https://i.stack.imgur.com/QTZmO.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/QTZmO.png\" alt=\"JAVA_HOME\" /></a></p>\n<p><strong>PATH</strong> should point to jdk bin like below</p>\n<p><a href=\"https://i.stack.imgur.com/oKFQ2.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/oKFQ2.png\" alt=\"PATH\" /></a></p>\n"},{"tags":[],"owner":{"account_id":2726668,"reputation":4982,"user_id":2351527,"accept_rate":67,"display_name":"codeX"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1668729174,"creation_date":1668729174,"answer_id":74483466,"question_id":17315425,"body_markdown":"Run the below command in your terminal and restart it.\r\n\r\n    &gt; set JAVA_HOME=&quot;C:\\Program Files\\Java\\jdk-xx.xx&quot;\r\n\r\nxx.xx is the java version\r\n","title":"Error in setting JAVA_HOME","body":"<p>Run the below command in your terminal and restart it.</p>\n<pre><code>&gt; set JAVA_HOME=&quot;C:\\Program Files\\Java\\jdk-xx.xx&quot;\n</code></pre>\n<p>xx.xx is the java version</p>\n"},{"tags":[],"owner":{"account_id":23622254,"reputation":11,"user_id":17655316,"display_name":"Rohitash Singh"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1678900032,"creation_date":1678900032,"answer_id":75747951,"question_id":17315425,"body_markdown":"\r\nJAVA_HOME should point to the home jdk directory and not to jdk/bin directory.\r\n\r\nMake sure you have JDK installed in your computer and then you need to set the JAVA_HOME like this:\r\n\r\n    JAVA_HOME=&quot;C:\\Program Files\\Java\\jdk&quot; + &quot;Your current installed version of jdk in your system&quot;","title":"Error in setting JAVA_HOME","body":"<p>JAVA_HOME should point to the home jdk directory and not to jdk/bin directory.</p>\n<p>Make sure you have JDK installed in your computer and then you need to set the JAVA_HOME like this:</p>\n<pre><code>JAVA_HOME=&quot;C:\\Program Files\\Java\\jdk&quot; + &quot;Your current installed version of jdk in your system&quot;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":4912463,"reputation":1,"user_id":3957382,"display_name":"Paramanand Biradar"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691591563,"creation_date":1691550871,"answer_id":76864338,"question_id":17315425,"body_markdown":"After installing java , you have to make two changes in environment variables .\r\n1. `JAVA_HOME` : which should point to jdk installation directory (not including bin) .\r\n2. Path : Which will put the bin on the path  .\r\n\r\nif the error is which respect to `JAVA_HOME` , try below :\r\n\r\n1. Ensure you have mentioned the directory path correctly  .\r\n\r\n2.  `JAVA_HOME`  value ending with semicolon could be the ERROR sometimes.If you are not able to remove semicolon from environment, try using cmd as below \r\n\r\n   \r\n\r\n    set  JAVA_HOME  = [path of you jdk installation directory ]","title":"Error in setting JAVA_HOME","body":"<p>After installing java , you have to make two changes in environment variables .</p>\n<ol>\n<li><code>JAVA_HOME</code> : which should point to jdk installation directory (not including bin) .</li>\n<li>Path : Which will put the bin on the path  .</li>\n</ol>\n<p>if the error is which respect to <code>JAVA_HOME</code> , try below :</p>\n<ol>\n<li><p>Ensure you have mentioned the directory path correctly  .</p>\n</li>\n<li><p><code>JAVA_HOME</code>  value ending with semicolon could be the ERROR sometimes.If you are not able to remove semicolon from environment, try using cmd as below</p>\n<p>set  JAVA_HOME  = [path of you jdk installation directory ]</p>\n</li>\n</ol>\n"}],"owner":{"account_id":2869041,"reputation":4363,"user_id":2462759,"accept_rate":52,"display_name":"paul"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":325885,"favorite_count":0,"down_vote_count":0,"up_vote_count":35,"accepted_answer_id":17315470,"answer_count":11,"score":35,"last_activity_date":1691591563,"creation_date":1372236284,"question_id":17315425,"body_markdown":"I have recently downloaded Maven and followed the instructions given on this [this](http://www.example.com/) page. I already have ant installed on my machine.\r\nNow, if I want to verify that Maven is installed perfectly or not it is giving me error that JAVA_HOME is not set correctly, but same works perfectly fine for ANT.\r\n\r\n    For Maven I tried :\r\n    1. open cmd\r\n    2. type mvn -version\r\n    3. Error appeared :\r\n    C:\\Users\\Admin&gt;mvn -version\r\n    \r\n    ERROR: JAVA_HOME is set to an invalid directory.\r\n    JAVA_HOME = &quot;C:\\Program Files\\Java\\jre7\\bin&quot;\r\n    Please set the JAVA_HOME variable in your environment to match the\r\n    location of your Java installation\r\n\r\n    For ANT I tried and worked :\r\n    1. open cmd\r\n    2. type mvn -version\r\n    3. Apache Ant(TM) version 1.9.1 compiled on May 15 2013\r\nI went to the directory to check that java.exe is actually there in that directory or not and it was there. I checked the environment variables they set fine. I restarted the system and checked again but same problem. Please let me know what am I missing.","title":"Error in setting JAVA_HOME","body":"<p>I have recently downloaded Maven and followed the instructions given on this <a href=\"http://www.example.com/\">this</a> page. I already have ant installed on my machine.\nNow, if I want to verify that Maven is installed perfectly or not it is giving me error that JAVA_HOME is not set correctly, but same works perfectly fine for ANT.</p>\n\n<pre><code>For Maven I tried :\n1. open cmd\n2. type mvn -version\n3. Error appeared :\nC:\\Users\\Admin&gt;mvn -version\n\nERROR: JAVA_HOME is set to an invalid directory.\nJAVA_HOME = \"C:\\Program Files\\Java\\jre7\\bin\"\nPlease set the JAVA_HOME variable in your environment to match the\nlocation of your Java installation\n\nFor ANT I tried and worked :\n1. open cmd\n2. type mvn -version\n3. Apache Ant(TM) version 1.9.1 compiled on May 15 2013\n</code></pre>\n\n<p>I went to the directory to check that java.exe is actually there in that directory or not and it was there. I checked the environment variables they set fine. I restarted the system and checked again but same problem. Please let me know what am I missing.</p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":2360785,"reputation":11123,"user_id":2067492,"display_name":"matt"},"score":1,"creation_date":1691591562,"post_id":76868766,"comment_id":135512757,"body_markdown":"When you do `a = new A();` then you are no longer dealing with the `A` you passed in. You are dealing with a new `A`. When you do `a.val = 50` then you are assigning the value of **the new A**. If the value is static then the new A and the old A point to the same static value. Which, an IDE will warn you, should be referenced as `A.val = 50;` to remove confusion.","body":"When you do <code>a = new A();</code> then you are no longer dealing with the <code>A</code> you passed in. You are dealing with a new <code>A</code>. When you do <code>a.val = 50</code> then you are assigning the value of <b>the new A</b>. If the value is static then the new A and the old A point to the same static value. Which, an IDE will warn you, should be referenced as <code>A.val = 50;</code> to remove confusion."},{"owner":{"account_id":2360785,"reputation":11123,"user_id":2067492,"display_name":"matt"},"score":1,"creation_date":1691591592,"post_id":76868766,"comment_id":135512765,"body_markdown":"Does this answer your question? [Is Java &quot;pass-by-reference&quot; or &quot;pass-by-value&quot;?](https://stackoverflow.com/questions/40480/is-java-pass-by-reference-or-pass-by-value)","body":"Does this answer your question? <a href=\"https://stackoverflow.com/questions/40480/is-java-pass-by-reference-or-pass-by-value\">Is Java &quot;pass-by-reference&quot; or &quot;pass-by-value&quot;?</a>"},{"owner":{"account_id":39208,"reputation":251240,"user_id":112968,"accept_rate":68,"display_name":"knittl"},"score":1,"creation_date":1691592997,"post_id":76868766,"comment_id":135513089,"body_markdown":"In the static case, `a.val` is not really `a.val`, but `A.val` (all instances share the same field)","body":"In the static case, <code>a.val</code> is not really <code>a.val</code>, but <code>A.val</code> (all instances share the same field)"}],"answers":[{"tags":[],"owner":{"account_id":1211967,"reputation":7024,"user_id":1180351,"display_name":"Rob Spoor"},"down_vote_count":0,"up_vote_count":4,"is_accepted":true,"score":4,"last_activity_date":1691591440,"creation_date":1691591440,"answer_id":76868787,"question_id":76868766,"body_markdown":"If the field is non-static, each instance has its own `val` field with its own value. Since Java is pass-by-value, not pass-by-reference, the statement `a = new A()` inside `updateVal` does **not** update the `val` field of the instance that was created in `main.`\r\n\r\nIf the field is static, all instances share the same field. The update inside `updateVal` is now that one shared field.","title":"Why using static results in a different output?","body":"<p>If the field is non-static, each instance has its own <code>val</code> field with its own value. Since Java is pass-by-value, not pass-by-reference, the statement <code>a = new A()</code> inside <code>updateVal</code> does <strong>not</strong> update the <code>val</code> field of the instance that was created in <code>main.</code></p>\n<p>If the field is static, all instances share the same field. The update inside <code>updateVal</code> is now that one shared field.</p>\n"}],"owner":{"account_id":83131,"reputation":8752,"user_id":233286,"accept_rate":73,"display_name":"ilhan"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":41,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"accepted_answer_id":76868787,"answer_count":1,"score":-1,"last_activity_date":1691591440,"creation_date":1691591255,"question_id":76868766,"body_markdown":"I have the following code that prints 20.\r\n\r\n    import java.util.*;\r\n    import java.lang.*;\r\n    import java.io.*;\r\n    \r\n    class A {\r\n        public int val = 20; // &lt;- no static\r\n    }\r\n    \r\n    \r\n    class Main {\r\n        public static void main(String[] args) {\r\n            A a = new A();\r\n            updateVal(a);\r\n            \r\n            System.out.println(a.val);\r\n        }\r\n        \r\n        private static void updateVal(A a) {\r\n            a = new A();\r\n            a.val = 50;\r\n        }\r\n    }\r\n\r\nBut if I change val to static then it prints 50. How it works?\r\n\r\n    import java.util.*;\r\n    import java.lang.*;\r\n    import java.io.*;\r\n    \r\n    class A {\r\n        public static int val = 20; // &lt;- there is static\r\n    }\r\n    \r\n    \r\n    class Main {\r\n        public static void main(String[] args) {\r\n            A a = new A();\r\n            updateVal(a);\r\n            \r\n            System.out.println(a.val);\r\n        }\r\n        \r\n        private static void updateVal(A a) {\r\n            a = new A();\r\n            a.val = 50;\r\n        }\r\n    }","title":"Why using static results in a different output?","body":"<p>I have the following code that prints 20.</p>\n<pre><code>import java.util.*;\nimport java.lang.*;\nimport java.io.*;\n\nclass A {\n    public int val = 20; // &lt;- no static\n}\n\n\nclass Main {\n    public static void main(String[] args) {\n        A a = new A();\n        updateVal(a);\n        \n        System.out.println(a.val);\n    }\n    \n    private static void updateVal(A a) {\n        a = new A();\n        a.val = 50;\n    }\n}\n</code></pre>\n<p>But if I change val to static then it prints 50. How it works?</p>\n<pre><code>import java.util.*;\nimport java.lang.*;\nimport java.io.*;\n\nclass A {\n    public static int val = 20; // &lt;- there is static\n}\n\n\nclass Main {\n    public static void main(String[] args) {\n        A a = new A();\n        updateVal(a);\n        \n        System.out.println(a.val);\n    }\n    \n    private static void updateVal(A a) {\n        a = new A();\n        a.val = 50;\n    }\n}\n</code></pre>\n"},{"tags":["java","testing","junit5"],"comments":[{"owner":{"account_id":5644665,"reputation":35941,"user_id":4467208,"accept_rate":51,"display_name":"Murat Karag&#246;z"},"score":0,"creation_date":1687422162,"post_id":76529816,"comment_id":134935392,"body_markdown":"Can you include the whole test class?","body":"Can you include the whole test class?"},{"owner":{"account_id":21383112,"reputation":3,"user_id":15894213,"display_name":"Pradeep"},"score":0,"creation_date":1687422642,"post_id":76529816,"comment_id":134935518,"body_markdown":"@MuratKarag&#246;z updated","body":"@MuratKarag&#246;z updated"},{"owner":{"account_id":5644665,"reputation":35941,"user_id":4467208,"accept_rate":51,"display_name":"Murat Karag&#246;z"},"score":0,"creation_date":1687423957,"post_id":76529816,"comment_id":134935791,"body_markdown":"You probably have something else going on. Your code as it looks fine.","body":"You probably have something else going on. Your code as it looks fine."},{"owner":{"account_id":15361,"reputation":4976,"user_id":32352,"accept_rate":62,"display_name":"johanneslink"},"score":0,"creation_date":1687432111,"post_id":76529816,"comment_id":134937582,"body_markdown":"The error message suggests a lib version mismatch. Please add your full Maven pom.","body":"The error message suggests a lib version mismatch. Please add your full Maven pom."},{"owner":{"account_id":21383112,"reputation":3,"user_id":15894213,"display_name":"Pradeep"},"score":0,"creation_date":1687439158,"post_id":76529816,"comment_id":134939190,"body_markdown":"added full pom.xml file @johanneslink","body":"added full pom.xml file @johanneslink"}],"answers":[{"tags":[],"owner":{"account_id":12849899,"reputation":996,"user_id":9295125,"display_name":"Daniel Rafael Wosch"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1687424257,"creation_date":1687424257,"answer_id":76530172,"question_id":76529816,"body_markdown":"For `@ParameterizedTest` in combination with `@MethodSource` you need to return a Stream of Arguments `Stream&lt;Arguments&gt;` from your method. `Arguments` is located in package `package org.junit.jupiter.params.provider`\r\n\r\nFor Example:\r\n\r\n    private static Stream&lt;Arguments&gt; validPurchasePlatformGenerator() {\r\n        return Arrays.stream(PurchasePlatform.values())\r\n            .filter(purchasePlatform -&gt; !purchasePlatform.equals(PurchasePlatform.WEB))\r\n            .map(Arguments::of);\r\n    }\r\n\r\nand then\r\n\r\n    @ParameterizedTest\r\n    @DisplayName(&quot;Some DisplayText&quot;)\r\n    @MethodSource(&quot;validPurchasePlatformGenerator&quot;)\r\n    void purchaseValid_shouldReturnValidResult(PurchasePlatform purchasePlatform) { \r\n        // test code\r\n    }\r\n\r\nIf you want to use just plain string, you can also use `@ValueSource` instead of `@MethodSource` which would make more sense for your provided test.\r\n\r\nFor Example \r\n\r\n    @ParameterizedTest\r\n    @ValueSource(strings = { &quot;a1&quot;, &quot;a2&quot; })\r\n    void testABC(String word) {\r\n        System.out.println(word);\r\n    }","title":"Not able to use @MethodSource in @ParameterizedTest","body":"<p>For <code>@ParameterizedTest</code> in combination with <code>@MethodSource</code> you need to return a Stream of Arguments <code>Stream&lt;Arguments&gt;</code> from your method. <code>Arguments</code> is located in package <code>package org.junit.jupiter.params.provider</code></p>\n<p>For Example:</p>\n<pre><code>private static Stream&lt;Arguments&gt; validPurchasePlatformGenerator() {\n    return Arrays.stream(PurchasePlatform.values())\n        .filter(purchasePlatform -&gt; !purchasePlatform.equals(PurchasePlatform.WEB))\n        .map(Arguments::of);\n}\n</code></pre>\n<p>and then</p>\n<pre><code>@ParameterizedTest\n@DisplayName(&quot;Some DisplayText&quot;)\n@MethodSource(&quot;validPurchasePlatformGenerator&quot;)\nvoid purchaseValid_shouldReturnValidResult(PurchasePlatform purchasePlatform) { \n    // test code\n}\n</code></pre>\n<p>If you want to use just plain string, you can also use <code>@ValueSource</code> instead of <code>@MethodSource</code> which would make more sense for your provided test.</p>\n<p>For Example</p>\n<pre><code>@ParameterizedTest\n@ValueSource(strings = { &quot;a1&quot;, &quot;a2&quot; })\nvoid testABC(String word) {\n    System.out.println(word);\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":29178657,"reputation":1,"user_id":22353401,"display_name":"Kostiantyn Perehuda"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691591025,"creation_date":1691424151,"answer_id":76853356,"question_id":76529816,"body_markdown":"As mentioned by @johanneslink, you have a lib version mismatch. You are using `JUnit4` framework (specifically `JUnit 4.12`), while `@ParameterizedTest` annotation (as well as `junit-jupiter-params` dependency in your `pom.xml`) belongs to `Junit5` framework.\r\n\r\nTo include `JUnit5` into your project, remove the `JUnit4` dependency and add the following to your `pom.xml`:\r\n\r\n&lt;!-- begin snippet: js hide: false console: true babel: false --&gt;\r\n\r\n&lt;!-- language: lang-html --&gt;\r\n\r\n    &lt;dependency&gt;\r\n        &lt;groupId&gt;org.junit.jupiter&lt;/groupId&gt;\r\n        &lt;artifactId&gt;junit-jupiter-engine&lt;/artifactId&gt;\r\n        &lt;version&gt;5.10.0&lt;/version&gt;\r\n        &lt;scope&gt;test&lt;/scope&gt;\r\n    &lt;/dependency&gt;\r\n    &lt;dependency&gt;\r\n        &lt;groupId&gt;org.junit.jupiter&lt;/groupId&gt;\r\n        &lt;artifactId&gt;junit-jupiter-api&lt;/artifactId&gt;\r\n        &lt;version&gt;5.10.0&lt;/version&gt;\r\n        &lt;scope&gt;test&lt;/scope&gt;\r\n    &lt;/dependency&gt;\r\n    &lt;dependency&gt;\r\n        &lt;groupId&gt;org.junit.jupiter&lt;/groupId&gt;\r\n        &lt;artifactId&gt;junit-jupiter-params&lt;/artifactId&gt;\r\n        &lt;version&gt;5.10.0&lt;/version&gt;\r\n        &lt;scope&gt;test&lt;/scope&gt;\r\n    &lt;/dependency&gt;\r\n\r\n&lt;!-- end snippet --&gt;\r\n\r\n[Here][1] is the guide for setting up JUnit5\r\n\r\n\r\n\r\nNote that it is important to maintain the same versions of dependecies even when you are using `JUnit5`. For example, including `junit-jupiter-engine 5.10.0` with `junit-jupiter-params 5.9.2` will result in non-working code.\r\n\r\nAdditionaly, there is a [JUnit5 Aggregator][2], which is a shorthand for including three dependencies listed above, using it will make your pom less cluttered and leave out burden of checking that the versions of all three dependencies are the same.\r\n\r\n    &lt;dependency&gt;\r\n    &lt;groupId&gt;org.junit.jupiter&lt;/groupId&gt;\r\n    &lt;artifactId&gt;junit-jupiter&lt;/artifactId&gt;\r\n    &lt;version&gt;5.10.0&lt;/version&gt;\r\n    &lt;scope&gt;test&lt;/scope&gt;\r\n&lt;/dependency&gt;\r\n\r\nAlso note that there is a way to create parameterized tests with `JUnit4` ([see here][3]), but I recommend to upgrade to `JUnit5` anyway, because it is a more capable and easier to use framework overall.\r\n\r\n\r\n  [1]: https://maven.apache.org/surefire/maven-surefire-plugin/examples/junit-platform.html\r\n  [2]: https://mvnrepository.com/artifact/org.junit.jupiter/junit-jupiter/5.10.0\r\n  [3]: https://www.tutorialspoint.com/junit/junit_parameterized_test.htm","title":"Not able to use @MethodSource in @ParameterizedTest","body":"<p>As mentioned by @johanneslink, you have a lib version mismatch. You are using <code>JUnit4</code> framework (specifically <code>JUnit 4.12</code>), while <code>@ParameterizedTest</code> annotation (as well as <code>junit-jupiter-params</code> dependency in your <code>pom.xml</code>) belongs to <code>Junit5</code> framework.</p>\n<p>To include <code>JUnit5</code> into your project, remove the <code>JUnit4</code> dependency and add the following to your <code>pom.xml</code>:</p>\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>&lt;dependency&gt;\n    &lt;groupId&gt;org.junit.jupiter&lt;/groupId&gt;\n    &lt;artifactId&gt;junit-jupiter-engine&lt;/artifactId&gt;\n    &lt;version&gt;5.10.0&lt;/version&gt;\n    &lt;scope&gt;test&lt;/scope&gt;\n&lt;/dependency&gt;\n&lt;dependency&gt;\n    &lt;groupId&gt;org.junit.jupiter&lt;/groupId&gt;\n    &lt;artifactId&gt;junit-jupiter-api&lt;/artifactId&gt;\n    &lt;version&gt;5.10.0&lt;/version&gt;\n    &lt;scope&gt;test&lt;/scope&gt;\n&lt;/dependency&gt;\n&lt;dependency&gt;\n    &lt;groupId&gt;org.junit.jupiter&lt;/groupId&gt;\n    &lt;artifactId&gt;junit-jupiter-params&lt;/artifactId&gt;\n    &lt;version&gt;5.10.0&lt;/version&gt;\n    &lt;scope&gt;test&lt;/scope&gt;\n&lt;/dependency&gt;</code></pre>\r\n</div>\r\n</div>\r\n</p>\n<p><a href=\"https://maven.apache.org/surefire/maven-surefire-plugin/examples/junit-platform.html\" rel=\"nofollow noreferrer\">Here</a> is the guide for setting up JUnit5</p>\n<p>Note that it is important to maintain the same versions of dependecies even when you are using <code>JUnit5</code>. For example, including <code>junit-jupiter-engine 5.10.0</code> with <code>junit-jupiter-params 5.9.2</code> will result in non-working code.</p>\n<p>Additionaly, there is a <a href=\"https://mvnrepository.com/artifact/org.junit.jupiter/junit-jupiter/5.10.0\" rel=\"nofollow noreferrer\">JUnit5 Aggregator</a>, which is a shorthand for including three dependencies listed above, using it will make your pom less cluttered and leave out burden of checking that the versions of all three dependencies are the same.</p>\n<pre><code>&lt;dependency&gt;\n&lt;groupId&gt;org.junit.jupiter&lt;/groupId&gt;\n&lt;artifactId&gt;junit-jupiter&lt;/artifactId&gt;\n&lt;version&gt;5.10.0&lt;/version&gt;\n&lt;scope&gt;test&lt;/scope&gt;\n</code></pre>\n\n<p>Also note that there is a way to create parameterized tests with <code>JUnit4</code> (<a href=\"https://www.tutorialspoint.com/junit/junit_parameterized_test.htm\" rel=\"nofollow noreferrer\">see here</a>), but I recommend to upgrade to <code>JUnit5</code> anyway, because it is a more capable and easier to use framework overall.</p>\n"}],"owner":{"account_id":21383112,"reputation":3,"user_id":15894213,"display_name":"Pradeep"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":495,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1691591025,"creation_date":1687421563,"question_id":76529816,"body_markdown":"I am trying to create a parameterised test with a method source. Following is the code :\r\n\r\n```\r\nimport java.util.stream.Stream;\r\nimport org.junit.jupiter.params.ParameterizedTest;\r\nimport org.junit.jupiter.params.provider.MethodSource;\r\n\r\nclass ABCTest {\r\n\r\n    @ParameterizedTest\r\n    @MethodSource(&quot;abc&quot;)\r\n    void testABC(String word) {\r\n        System.out.println(word);\r\n    }\r\n\r\n    static Stream&lt;String&gt; abc() {\r\n        return Stream.of(&quot;a1&quot;,\r\n                &quot;b2&quot;);\r\n    }\r\n\r\n}\r\n```\r\n\r\nBut this doesn&#39;t work; while trying to run the test case, I am \r\n\r\n```\r\njava.lang.NoSuchMethodError: &#39;java.lang.String[] org.junit.platform.commons.util.ReflectionUtils.parseQualifiedMethodName(java.lang.String)&#39;\r\n.\r\n.\r\n.\r\n\tSuppressed: org.junit.platform.commons.PreconditionViolationException: Configuration error: You must configure at least one set of arguments for this @ParameterizedTest\r\n\t\tat org.junit.platform.commons.util.Preconditions.condition(Preconditions.java:281)\r\n\t\tat org.junit.jupiter.params.ParameterizedTestExtension.lambda$provideTestTemplateInvocationContexts$5(ParameterizedTestExtension.java:98)\r\n```\r\n\r\nFollowing is my `pom.xml` : \r\n\r\n```lang-xml\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\r\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n\r\n    &lt;groupId&gt;&lt;hiding_this_intentionally&gt;&lt;/groupId&gt;\r\n    &lt;artifactId&gt;&lt;hiding_this_intentionally&gt;&lt;/artifactId&gt;\r\n    &lt;packaging&gt;pom&lt;/packaging&gt;\r\n    &lt;version&gt;4.3.20-SNAPSHOT&lt;/version&gt;\r\n    &lt;modules&gt;\r\n        &lt;module&gt;&lt;hiding_this_intentionally&gt;&lt;/module&gt;\r\n        &lt;module&gt;&lt;hiding_this_intentionally&gt;&lt;/module&gt;\r\n    &lt;/modules&gt;\r\n\r\n    &lt;parent&gt;\r\n        &lt;groupId&gt;&lt;hiding_this_intentionally&gt;&lt;/groupId&gt;\r\n        &lt;artifactId&gt;&lt;hiding_this_intentionally&gt;&lt;/artifactId&gt;\r\n        &lt;version&gt;1.0.19&lt;/version&gt;\r\n    &lt;/parent&gt;\r\n\r\n    &lt;properties&gt;\r\n        &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\r\n&lt;!--        Java related properties --&gt;\r\n        &lt;jdk.source.version&gt;17&lt;/jdk.source.version&gt;\r\n        &lt;jdk.target.version&gt;17&lt;/jdk.target.version&gt;\r\n        &lt;jdk.release.version&gt;17&lt;/jdk.release.version&gt;\r\n&lt;!--        Maven related properties --&gt;\r\n        &lt;maven.compiler.plugin.version&gt;3.9.0&lt;/maven.compiler.plugin.version&gt;\r\n        &lt;maven.deploy.plugin.version&gt;2.8.2&lt;/maven.deploy.plugin.version&gt;\r\n        &lt;maven.shade.plugin.version&gt;3.3.0&lt;/maven.shade.plugin.version&gt;\r\n        &lt;maven.javadoc.skip&gt;true&lt;/maven.javadoc.skip&gt;\r\n\r\n        &lt;userservice-model.version&gt;2.0.8&lt;/userservice-model.version&gt;\r\n        &lt;vault-model.version&gt;0.0.66&lt;/vault-model.version&gt;\r\n        &lt;ablaze.version&gt;3.0.15&lt;/ablaze.version&gt;\r\n\r\n        &lt;aspectj.maven.plugin.version&gt;1.13.1&lt;/aspectj.maven.plugin.version&gt;\r\n\r\n        &lt;json-rules.version&gt;1.0.11&lt;/json-rules.version&gt;\r\n        &lt;zjsonpatch.version&gt;0.4.3&lt;/zjsonpatch.version&gt;\r\n        &lt;lombok.version&gt;1.18.22&lt;/lombok.version&gt;\r\n        &lt;lombok.maven.version&gt;1.18.20.0&lt;/lombok.maven.version&gt;\r\n        &lt;junit.version&gt;4.12&lt;/junit.version&gt;\r\n        &lt;guava.version&gt;30.1.1-jre&lt;/guava.version&gt;\r\n        &lt;h2.version&gt;1.4.191&lt;/h2.version&gt;\r\n        &lt;!-- Sonar-JaCoCo properties --&gt;\r\n        &lt;sonar.java.coveragePlugin&gt;jacoco&lt;/sonar.java.coveragePlugin&gt;\r\n        &lt;sonar.dynamicAnalysis&gt;reuseReports&lt;/sonar.dynamicAnalysis&gt;\r\n        &lt;sonar.jacoco.reportPaths&gt;${project.basedir}/../target/jacoco.exec&lt;/sonar.jacoco.reportPaths&gt;\r\n        &lt;sonar.language&gt;java&lt;/sonar.language&gt;\r\n        &lt;sonar.buildbreaker.skip&gt;true&lt;/sonar.buildbreaker.skip&gt;\r\n        &lt;giftcard.provider.model.version&gt;1.0.3&lt;/giftcard.provider.model.version&gt;\r\n        &lt;log4j.to.slf4j.version&gt;2.8.2&lt;/log4j.to.slf4j.version&gt;\r\n        &lt;jersey.guava.version&gt;2.6&lt;/jersey.guava.version&gt;\r\n        &lt;clearspring.analytics.stream.version&gt;2.9.5&lt;/clearspring.analytics.stream.version&gt;\r\n        &lt;sonar.qualitygate.wait&gt;false&lt;/sonar.qualitygate.wait&gt;\r\n\r\n        &lt;gpp.aerospike.version&gt;4.1.8&lt;/gpp.aerospike.version&gt;\r\n    &lt;/properties&gt;\r\n\r\n    &lt;dependencyManagement&gt;\r\n        &lt;dependencies&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;com.flipkart.ranger&lt;/groupId&gt;\r\n                &lt;artifactId&gt;ranger&lt;/artifactId&gt;\r\n                &lt;version&gt;0.6.3&lt;/version&gt;\r\n            &lt;/dependency&gt;\r\n        &lt;/dependencies&gt;\r\n    &lt;/dependencyManagement&gt;\r\n\r\n    &lt;dependencies&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.apache.hbase&lt;/groupId&gt;\r\n            &lt;artifactId&gt;hbase-shaded-client&lt;/artifactId&gt;\r\n            &lt;version&gt;2.0.1&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;com.google.guava&lt;/groupId&gt;\r\n            &lt;artifactId&gt;guava&lt;/artifactId&gt;\r\n            &lt;version&gt;${guava.version}&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;com.fasterxml.jackson.core&lt;/groupId&gt;\r\n            &lt;artifactId&gt;jackson-databind&lt;/artifactId&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;com.fasterxml.jackson.core&lt;/groupId&gt;\r\n            &lt;artifactId&gt;jackson-annotations&lt;/artifactId&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;com.fasterxml.jackson.core&lt;/groupId&gt;\r\n            &lt;artifactId&gt;jackson-core&lt;/artifactId&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;com.fasterxml.jackson.module&lt;/groupId&gt;\r\n            &lt;artifactId&gt;jackson-module-afterburner&lt;/artifactId&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;io.raven.dropwizard&lt;/groupId&gt;\r\n            &lt;artifactId&gt;dropwizard-jmxmp&lt;/artifactId&gt;\r\n        &lt;/dependency&gt;\r\n\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;com.raskasa.metrics&lt;/groupId&gt;\r\n            &lt;artifactId&gt;metrics-okhttp&lt;/artifactId&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;com.squareup.okhttp3&lt;/groupId&gt;\r\n            &lt;artifactId&gt;okhttp&lt;/artifactId&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;com.clearspring.analytics&lt;/groupId&gt;\r\n            &lt;artifactId&gt;stream&lt;/artifactId&gt;\r\n            &lt;version&gt;${clearspring.analytics.stream.version}&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.aspectj&lt;/groupId&gt;\r\n            &lt;artifactId&gt;aspectjrt&lt;/artifactId&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;io.appform.rules&lt;/groupId&gt;\r\n            &lt;artifactId&gt;json-rules&lt;/artifactId&gt;\r\n            &lt;version&gt;${json-rules.version}&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;com.flipkart.zjsonpatch&lt;/groupId&gt;\r\n            &lt;artifactId&gt;zjsonpatch&lt;/artifactId&gt;\r\n            &lt;version&gt;${zjsonpatch.version}&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\r\n            &lt;artifactId&gt;lombok&lt;/artifactId&gt;\r\n            &lt;version&gt;${lombok.version}&lt;/version&gt;\r\n            &lt;scope&gt;provided&lt;/scope&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;io.dropwizard&lt;/groupId&gt;\r\n            &lt;artifactId&gt;dropwizard-jackson&lt;/artifactId&gt;\r\n            &lt;exclusions&gt;\r\n                &lt;exclusion&gt;\r\n                    &lt;groupId&gt;ch.qos.logback&lt;/groupId&gt;\r\n                    &lt;artifactId&gt;logback-classic&lt;/artifactId&gt;\r\n                &lt;/exclusion&gt;\r\n            &lt;/exclusions&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.apache.logging.log4j&lt;/groupId&gt;\r\n            &lt;artifactId&gt;log4j-to-slf4j&lt;/artifactId&gt;\r\n            &lt;version&gt;${log4j.to.slf4j.version}&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.glassfish.jersey.bundles.repackaged&lt;/groupId&gt;\r\n            &lt;artifactId&gt;jersey-guava&lt;/artifactId&gt;\r\n            &lt;version&gt;${jersey.guava.version}&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;javax.activation&lt;/groupId&gt;\r\n            &lt;artifactId&gt;activation&lt;/artifactId&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.reflections&lt;/groupId&gt;\r\n            &lt;artifactId&gt;reflections&lt;/artifactId&gt;\r\n        &lt;/dependency&gt;\r\n\r\n        &lt;!-- Testing --&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;junit&lt;/groupId&gt;\r\n            &lt;artifactId&gt;junit&lt;/artifactId&gt;\r\n            &lt;version&gt;${junit.version}&lt;/version&gt;\r\n            &lt;scope&gt;test&lt;/scope&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.junit.jupiter&lt;/groupId&gt;\r\n            &lt;artifactId&gt;junit-jupiter-params&lt;/artifactId&gt;\r\n            &lt;version&gt;5.9.2&lt;/version&gt;\r\n            &lt;scope&gt;test&lt;/scope&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;com.h2database&lt;/groupId&gt;\r\n            &lt;artifactId&gt;h2&lt;/artifactId&gt;\r\n            &lt;version&gt;${h2.version}&lt;/version&gt;\r\n            &lt;scope&gt;test&lt;/scope&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;io.dropwizard&lt;/groupId&gt;\r\n            &lt;artifactId&gt;dropwizard-testing&lt;/artifactId&gt;\r\n            &lt;scope&gt;test&lt;/scope&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.javassist&lt;/groupId&gt;\r\n            &lt;artifactId&gt;javassist&lt;/artifactId&gt;\r\n        &lt;/dependency&gt;\r\n    &lt;/dependencies&gt;\r\n\r\n    &lt;build&gt;\r\n        &lt;plugins&gt;\r\n            &lt;plugin&gt;\r\n                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n                &lt;artifactId&gt;maven-deploy-plugin&lt;/artifactId&gt;\r\n                &lt;version&gt;${maven.deploy.plugin.version}&lt;/version&gt;\r\n                &lt;configuration&gt;\r\n                    &lt;skip&gt;false&lt;/skip&gt;\r\n                &lt;/configuration&gt;\r\n            &lt;/plugin&gt;\r\n            &lt;plugin&gt;\r\n                &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\r\n                &lt;artifactId&gt;lombok-maven-plugin&lt;/artifactId&gt;\r\n                &lt;executions&gt;\r\n                    &lt;execution&gt;\r\n                        &lt;phase&gt;generate-sources&lt;/phase&gt;\r\n                        &lt;goals&gt;\r\n                            &lt;goal&gt;delombok&lt;/goal&gt;\r\n                        &lt;/goals&gt;\r\n                    &lt;/execution&gt;\r\n                &lt;/executions&gt;\r\n                &lt;version&gt;${lombok.maven.version}&lt;/version&gt;\r\n            &lt;/plugin&gt;\r\n            &lt;plugin&gt;\r\n                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n                &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\r\n                &lt;version&gt;${maven.compiler.plugin.version}&lt;/version&gt;\r\n                &lt;configuration&gt;\r\n                    &lt;source&gt;${jdk.source.version}&lt;/source&gt;\r\n                    &lt;target&gt;${jdk.target.version}&lt;/target&gt;\r\n                    &lt;release&gt;${jdk.release.version}&lt;/release&gt;\r\n                    &lt;showWarnings&gt;true&lt;/showWarnings&gt;\r\n                    &lt;debug&gt;false&lt;/debug&gt;\r\n                &lt;/configuration&gt;\r\n            &lt;/plugin&gt;\r\n        &lt;/plugins&gt;\r\n    &lt;/build&gt;\r\n\r\n    &lt;profiles&gt;\r\n        &lt;profile&gt;\r\n            &lt;id&gt;docker&lt;/id&gt;\r\n        &lt;/profile&gt;\r\n    &lt;/profiles&gt;\r\n&lt;/project&gt;\r\n\r\n```\r\n\r\nCan someone help me here?\r\n\r\nTried changing the version of junit-jupiter-params as suggested in https://stackoverflow.com/questions/53926264/nosuchmethoderror-org-junit-platform-commons-util-reflectionutils-trytoloadclas, still didn&#39;t work","title":"Not able to use @MethodSource in @ParameterizedTest","body":"<p>I am trying to create a parameterised test with a method source. Following is the code :</p>\n<pre><code>import java.util.stream.Stream;\nimport org.junit.jupiter.params.ParameterizedTest;\nimport org.junit.jupiter.params.provider.MethodSource;\n\nclass ABCTest {\n\n    @ParameterizedTest\n    @MethodSource(&quot;abc&quot;)\n    void testABC(String word) {\n        System.out.println(word);\n    }\n\n    static Stream&lt;String&gt; abc() {\n        return Stream.of(&quot;a1&quot;,\n                &quot;b2&quot;);\n    }\n\n}\n</code></pre>\n<p>But this doesn't work; while trying to run the test case, I am</p>\n<pre><code>java.lang.NoSuchMethodError: 'java.lang.String[] org.junit.platform.commons.util.ReflectionUtils.parseQualifiedMethodName(java.lang.String)'\n.\n.\n.\n    Suppressed: org.junit.platform.commons.PreconditionViolationException: Configuration error: You must configure at least one set of arguments for this @ParameterizedTest\n        at org.junit.platform.commons.util.Preconditions.condition(Preconditions.java:281)\n        at org.junit.jupiter.params.ParameterizedTestExtension.lambda$provideTestTemplateInvocationContexts$5(ParameterizedTestExtension.java:98)\n</code></pre>\n<p>Following is my <code>pom.xml</code> :</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n\n    &lt;groupId&gt;&lt;hiding_this_intentionally&gt;&lt;/groupId&gt;\n    &lt;artifactId&gt;&lt;hiding_this_intentionally&gt;&lt;/artifactId&gt;\n    &lt;packaging&gt;pom&lt;/packaging&gt;\n    &lt;version&gt;4.3.20-SNAPSHOT&lt;/version&gt;\n    &lt;modules&gt;\n        &lt;module&gt;&lt;hiding_this_intentionally&gt;&lt;/module&gt;\n        &lt;module&gt;&lt;hiding_this_intentionally&gt;&lt;/module&gt;\n    &lt;/modules&gt;\n\n    &lt;parent&gt;\n        &lt;groupId&gt;&lt;hiding_this_intentionally&gt;&lt;/groupId&gt;\n        &lt;artifactId&gt;&lt;hiding_this_intentionally&gt;&lt;/artifactId&gt;\n        &lt;version&gt;1.0.19&lt;/version&gt;\n    &lt;/parent&gt;\n\n    &lt;properties&gt;\n        &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\n&lt;!--        Java related properties --&gt;\n        &lt;jdk.source.version&gt;17&lt;/jdk.source.version&gt;\n        &lt;jdk.target.version&gt;17&lt;/jdk.target.version&gt;\n        &lt;jdk.release.version&gt;17&lt;/jdk.release.version&gt;\n&lt;!--        Maven related properties --&gt;\n        &lt;maven.compiler.plugin.version&gt;3.9.0&lt;/maven.compiler.plugin.version&gt;\n        &lt;maven.deploy.plugin.version&gt;2.8.2&lt;/maven.deploy.plugin.version&gt;\n        &lt;maven.shade.plugin.version&gt;3.3.0&lt;/maven.shade.plugin.version&gt;\n        &lt;maven.javadoc.skip&gt;true&lt;/maven.javadoc.skip&gt;\n\n        &lt;userservice-model.version&gt;2.0.8&lt;/userservice-model.version&gt;\n        &lt;vault-model.version&gt;0.0.66&lt;/vault-model.version&gt;\n        &lt;ablaze.version&gt;3.0.15&lt;/ablaze.version&gt;\n\n        &lt;aspectj.maven.plugin.version&gt;1.13.1&lt;/aspectj.maven.plugin.version&gt;\n\n        &lt;json-rules.version&gt;1.0.11&lt;/json-rules.version&gt;\n        &lt;zjsonpatch.version&gt;0.4.3&lt;/zjsonpatch.version&gt;\n        &lt;lombok.version&gt;1.18.22&lt;/lombok.version&gt;\n        &lt;lombok.maven.version&gt;1.18.20.0&lt;/lombok.maven.version&gt;\n        &lt;junit.version&gt;4.12&lt;/junit.version&gt;\n        &lt;guava.version&gt;30.1.1-jre&lt;/guava.version&gt;\n        &lt;h2.version&gt;1.4.191&lt;/h2.version&gt;\n        &lt;!-- Sonar-JaCoCo properties --&gt;\n        &lt;sonar.java.coveragePlugin&gt;jacoco&lt;/sonar.java.coveragePlugin&gt;\n        &lt;sonar.dynamicAnalysis&gt;reuseReports&lt;/sonar.dynamicAnalysis&gt;\n        &lt;sonar.jacoco.reportPaths&gt;${project.basedir}/../target/jacoco.exec&lt;/sonar.jacoco.reportPaths&gt;\n        &lt;sonar.language&gt;java&lt;/sonar.language&gt;\n        &lt;sonar.buildbreaker.skip&gt;true&lt;/sonar.buildbreaker.skip&gt;\n        &lt;giftcard.provider.model.version&gt;1.0.3&lt;/giftcard.provider.model.version&gt;\n        &lt;log4j.to.slf4j.version&gt;2.8.2&lt;/log4j.to.slf4j.version&gt;\n        &lt;jersey.guava.version&gt;2.6&lt;/jersey.guava.version&gt;\n        &lt;clearspring.analytics.stream.version&gt;2.9.5&lt;/clearspring.analytics.stream.version&gt;\n        &lt;sonar.qualitygate.wait&gt;false&lt;/sonar.qualitygate.wait&gt;\n\n        &lt;gpp.aerospike.version&gt;4.1.8&lt;/gpp.aerospike.version&gt;\n    &lt;/properties&gt;\n\n    &lt;dependencyManagement&gt;\n        &lt;dependencies&gt;\n            &lt;dependency&gt;\n                &lt;groupId&gt;com.flipkart.ranger&lt;/groupId&gt;\n                &lt;artifactId&gt;ranger&lt;/artifactId&gt;\n                &lt;version&gt;0.6.3&lt;/version&gt;\n            &lt;/dependency&gt;\n        &lt;/dependencies&gt;\n    &lt;/dependencyManagement&gt;\n\n    &lt;dependencies&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.apache.hbase&lt;/groupId&gt;\n            &lt;artifactId&gt;hbase-shaded-client&lt;/artifactId&gt;\n            &lt;version&gt;2.0.1&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.google.guava&lt;/groupId&gt;\n            &lt;artifactId&gt;guava&lt;/artifactId&gt;\n            &lt;version&gt;${guava.version}&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.fasterxml.jackson.core&lt;/groupId&gt;\n            &lt;artifactId&gt;jackson-databind&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.fasterxml.jackson.core&lt;/groupId&gt;\n            &lt;artifactId&gt;jackson-annotations&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.fasterxml.jackson.core&lt;/groupId&gt;\n            &lt;artifactId&gt;jackson-core&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.fasterxml.jackson.module&lt;/groupId&gt;\n            &lt;artifactId&gt;jackson-module-afterburner&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;io.raven.dropwizard&lt;/groupId&gt;\n            &lt;artifactId&gt;dropwizard-jmxmp&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.raskasa.metrics&lt;/groupId&gt;\n            &lt;artifactId&gt;metrics-okhttp&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.squareup.okhttp3&lt;/groupId&gt;\n            &lt;artifactId&gt;okhttp&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.clearspring.analytics&lt;/groupId&gt;\n            &lt;artifactId&gt;stream&lt;/artifactId&gt;\n            &lt;version&gt;${clearspring.analytics.stream.version}&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.aspectj&lt;/groupId&gt;\n            &lt;artifactId&gt;aspectjrt&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;io.appform.rules&lt;/groupId&gt;\n            &lt;artifactId&gt;json-rules&lt;/artifactId&gt;\n            &lt;version&gt;${json-rules.version}&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.flipkart.zjsonpatch&lt;/groupId&gt;\n            &lt;artifactId&gt;zjsonpatch&lt;/artifactId&gt;\n            &lt;version&gt;${zjsonpatch.version}&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\n            &lt;artifactId&gt;lombok&lt;/artifactId&gt;\n            &lt;version&gt;${lombok.version}&lt;/version&gt;\n            &lt;scope&gt;provided&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;io.dropwizard&lt;/groupId&gt;\n            &lt;artifactId&gt;dropwizard-jackson&lt;/artifactId&gt;\n            &lt;exclusions&gt;\n                &lt;exclusion&gt;\n                    &lt;groupId&gt;ch.qos.logback&lt;/groupId&gt;\n                    &lt;artifactId&gt;logback-classic&lt;/artifactId&gt;\n                &lt;/exclusion&gt;\n            &lt;/exclusions&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.apache.logging.log4j&lt;/groupId&gt;\n            &lt;artifactId&gt;log4j-to-slf4j&lt;/artifactId&gt;\n            &lt;version&gt;${log4j.to.slf4j.version}&lt;/version&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.glassfish.jersey.bundles.repackaged&lt;/groupId&gt;\n            &lt;artifactId&gt;jersey-guava&lt;/artifactId&gt;\n            &lt;version&gt;${jersey.guava.version}&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;javax.activation&lt;/groupId&gt;\n            &lt;artifactId&gt;activation&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.reflections&lt;/groupId&gt;\n            &lt;artifactId&gt;reflections&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n\n        &lt;!-- Testing --&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;junit&lt;/groupId&gt;\n            &lt;artifactId&gt;junit&lt;/artifactId&gt;\n            &lt;version&gt;${junit.version}&lt;/version&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.junit.jupiter&lt;/groupId&gt;\n            &lt;artifactId&gt;junit-jupiter-params&lt;/artifactId&gt;\n            &lt;version&gt;5.9.2&lt;/version&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.h2database&lt;/groupId&gt;\n            &lt;artifactId&gt;h2&lt;/artifactId&gt;\n            &lt;version&gt;${h2.version}&lt;/version&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;io.dropwizard&lt;/groupId&gt;\n            &lt;artifactId&gt;dropwizard-testing&lt;/artifactId&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.javassist&lt;/groupId&gt;\n            &lt;artifactId&gt;javassist&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n    &lt;/dependencies&gt;\n\n    &lt;build&gt;\n        &lt;plugins&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n                &lt;artifactId&gt;maven-deploy-plugin&lt;/artifactId&gt;\n                &lt;version&gt;${maven.deploy.plugin.version}&lt;/version&gt;\n                &lt;configuration&gt;\n                    &lt;skip&gt;false&lt;/skip&gt;\n                &lt;/configuration&gt;\n            &lt;/plugin&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\n                &lt;artifactId&gt;lombok-maven-plugin&lt;/artifactId&gt;\n                &lt;executions&gt;\n                    &lt;execution&gt;\n                        &lt;phase&gt;generate-sources&lt;/phase&gt;\n                        &lt;goals&gt;\n                            &lt;goal&gt;delombok&lt;/goal&gt;\n                        &lt;/goals&gt;\n                    &lt;/execution&gt;\n                &lt;/executions&gt;\n                &lt;version&gt;${lombok.maven.version}&lt;/version&gt;\n            &lt;/plugin&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n                &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\n                &lt;version&gt;${maven.compiler.plugin.version}&lt;/version&gt;\n                &lt;configuration&gt;\n                    &lt;source&gt;${jdk.source.version}&lt;/source&gt;\n                    &lt;target&gt;${jdk.target.version}&lt;/target&gt;\n                    &lt;release&gt;${jdk.release.version}&lt;/release&gt;\n                    &lt;showWarnings&gt;true&lt;/showWarnings&gt;\n                    &lt;debug&gt;false&lt;/debug&gt;\n                &lt;/configuration&gt;\n            &lt;/plugin&gt;\n        &lt;/plugins&gt;\n    &lt;/build&gt;\n\n    &lt;profiles&gt;\n        &lt;profile&gt;\n            &lt;id&gt;docker&lt;/id&gt;\n        &lt;/profile&gt;\n    &lt;/profiles&gt;\n&lt;/project&gt;\n\n</code></pre>\n<p>Can someone help me here?</p>\n<p>Tried changing the version of junit-jupiter-params as suggested in <a href=\"https://stackoverflow.com/questions/53926264/nosuchmethoderror-org-junit-platform-commons-util-reflectionutils-trytoloadclas\">NoSuchMethodError: org.junit.platform.commons.util.ReflectionUtils.tryToLoadClass</a>, still didn't work</p>\n"},{"tags":["java","mongodb","spring-boot","spring-data-mongodb"],"answers":[{"tags":[],"owner":{"account_id":17153701,"reputation":379,"user_id":12415069,"display_name":"Bojan Krkic"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1587217158,"creation_date":1587217158,"answer_id":61290055,"question_id":61289948,"body_markdown":"Along with `maxIdleTimeMS`, try setting a `keepAlive` value manually too.\r\n\r\nAlso, refer to solutions in [this related question](https://stackoverflow.com/questions/39079876/mongosocketreadexception-prematurely-reached-end-of-stream-after-a-period-of-i).","title":"MongoSocketReadException :Prematurely reached end of stream ,while connecting MongoDB Atlas by Spring Boot","body":"<p>Along with <code>maxIdleTimeMS</code>, try setting a <code>keepAlive</code> value manually too.</p>\n\n<p>Also, refer to solutions in <a href=\"https://stackoverflow.com/questions/39079876/mongosocketreadexception-prematurely-reached-end-of-stream-after-a-period-of-i\">this related question</a>.</p>\n"},{"tags":[],"owner":{"account_id":1772872,"reputation":81,"user_id":1617311,"display_name":"Adrian Hall"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1610631447,"creation_date":1610631447,"answer_id":65720045,"question_id":61289948,"body_markdown":"One possibility is that in MongoDB Atlas you have (sensibly) restricted access to specific IP addresses, and the IP address of the machine you are connecting from has changed because it is set dynamically.  If that&#39;s the case, you may have to add your IP address to your MongoDB Atlas account each time it changes, or set yourself up with a static IP address.","title":"MongoSocketReadException :Prematurely reached end of stream ,while connecting MongoDB Atlas by Spring Boot","body":"<p>One possibility is that in MongoDB Atlas you have (sensibly) restricted access to specific IP addresses, and the IP address of the machine you are connecting from has changed because it is set dynamically.  If that's the case, you may have to add your IP address to your MongoDB Atlas account each time it changes, or set yourself up with a static IP address.</p>\n"},{"tags":[],"owner":{"account_id":28817236,"reputation":1,"user_id":22070574,"display_name":"Vishwa"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1689857778,"creation_date":1689606904,"answer_id":76705877,"question_id":61289948,"body_markdown":"I got this error when i tried to connect to `mongodb` on atlas cluster from my `springboot` app. Adding `allow access from anywhere (0.0.0.0/0)` to network permission list fixed my issue.","title":"MongoSocketReadException :Prematurely reached end of stream ,while connecting MongoDB Atlas by Spring Boot","body":"<p>I got this error when i tried to connect to <code>mongodb</code> on atlas cluster from my <code>springboot</code> app. Adding <code>allow access from anywhere (0.0.0.0/0)</code> to network permission list fixed my issue.</p>\n"},{"tags":[],"owner":{"account_id":17659919,"reputation":608,"user_id":12818585,"display_name":"Andrea Ciccotta"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691590951,"creation_date":1691590951,"answer_id":76868718,"question_id":61289948,"body_markdown":"Add your ip to the acl, it worked for me\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/jJvkx.png","title":"MongoSocketReadException :Prematurely reached end of stream ,while connecting MongoDB Atlas by Spring Boot","body":"<p>Add your ip to the acl, it worked for me</p>\n<p><a href=\"https://i.stack.imgur.com/jJvkx.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/jJvkx.png\" alt=\"enter image description here\" /></a></p>\n"}],"owner":{"account_id":6685684,"reputation":540,"user_id":5459444,"display_name":"Ashutosh dwivedi"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2531,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":4,"score":1,"last_activity_date":1691590951,"creation_date":1587216679,"question_id":61289948,"body_markdown":"I am using MongoDB atlas (cluster) to connect to my spring boot application. I was earlier able to successfully insert &amp; get the data from the cluster but after few minutes of inactivity I started getting, \r\n\r\n```com.mongodb.MongoSocketReadException: Prematurely reached the end of stream```.\r\nI tried to make some changes in the mongodb cluster URI such as:\r\n\r\n```spring.data.mongodb.uri=mongodb+srv://emuser:empassword@emp-mate-bzmeh.gcp.mongodb.net/emp-mate-db?retryWrites=true&amp;retryReads=true&amp;w=majority```\r\n     and also tried \r\n\r\n```spring.data.mongodb.uri=mongodb+srv://emuser:empassword@emp-mate-bzmeh.gcp.mongodb.net/emp-mate-db?ssl=true&amp;retryWrites=true&amp;retryReads=true&amp;w=majority&amp;maxIdleTimeMS=80```\r\n\r\nI have also checked the SSL settings in JRE and its fine &amp; I did not also see any error log in the Alert section on MongoDB cluster. Below is the snippet of the code where I have used  `MongoTemplate`.\r\n \r\n\r\n    import java.util.List;\r\n    import java.util.Optional;\r\n    import org.springframework.beans.factory.annotation.Autowired;\r\n    import org.springframework.data.mongodb.core.MongoTemplate;\r\n    import org.springframework.data.mongodb.core.query.Criteria;\r\n    import org.springframework.data.mongodb.core.query.Query;\r\n    import org.springframework.data.mongodb.core.query.Update;\r\n    import org.springframework.stereotype.Service;\r\n    import com.mongodb.client.result.UpdateResult;\r\n    import employeemate.repository.UsersRepository;\r\n    import employeemate.resources.Users;\r\n\r\n        @Service\r\n        public class UserService {\r\n        \t@Autowired\r\n        \tMongoTemplate mongoTemplate;\r\n        \t@Autowired\r\n        \tUsersRepository usersRepository;\r\n        \r\n        \tpublic void addSampleData() {\r\n        \t\t System.out.println(&quot;Adding sample data&quot;);\r\n        \t\t usersRepository.save(new Users(&quot;1&quot;,&quot;Ashu&quot;,&quot;test@gmail.com&quot;, 24, &quot;Male&quot;, &quot;1111111111&quot;, &quot;Delhi&quot;));\r\n        \t\t usersRepository.save(new Users(&quot;2&quot;,&quot;Adam Clark&quot;, &quot;adam@gmail.com&quot;,24,&quot;Male&quot;, &quot;2222222222&quot;, &quot;Shelton CT&quot;));\r\n        \t\t\r\n        \t\t }\r\n        \t}\r\n\r\nPOM.xml\r\n\r\n    &lt;dependency&gt;\r\n    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n    &lt;artifactId&gt;spring-boot-starter-data-mongodb&lt;/artifactId&gt;\r\n    &lt;/dependency&gt;","title":"MongoSocketReadException :Prematurely reached end of stream ,while connecting MongoDB Atlas by Spring Boot","body":"<p>I am using MongoDB atlas (cluster) to connect to my spring boot application. I was earlier able to successfully insert &amp; get the data from the cluster but after few minutes of inactivity I started getting, </p>\n\n<p><code>com.mongodb.MongoSocketReadException: Prematurely reached the end of stream</code>.\nI tried to make some changes in the mongodb cluster URI such as:</p>\n\n<p><code>spring.data.mongodb.uri=mongodb+srv://emuser:empassword@emp-mate-bzmeh.gcp.mongodb.net/emp-mate-db?retryWrites=true&amp;retryReads=true&amp;w=majority</code>\n     and also tried </p>\n\n<p><code>spring.data.mongodb.uri=mongodb+srv://emuser:empassword@emp-mate-bzmeh.gcp.mongodb.net/emp-mate-db?ssl=true&amp;retryWrites=true&amp;retryReads=true&amp;w=majority&amp;maxIdleTimeMS=80</code></p>\n\n<p>I have also checked the SSL settings in JRE and its fine &amp; I did not also see any error log in the Alert section on MongoDB cluster. Below is the snippet of the code where I have used  <code>MongoTemplate</code>.</p>\n\n<pre><code>import java.util.List;\nimport java.util.Optional;\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.data.mongodb.core.MongoTemplate;\nimport org.springframework.data.mongodb.core.query.Criteria;\nimport org.springframework.data.mongodb.core.query.Query;\nimport org.springframework.data.mongodb.core.query.Update;\nimport org.springframework.stereotype.Service;\nimport com.mongodb.client.result.UpdateResult;\nimport employeemate.repository.UsersRepository;\nimport employeemate.resources.Users;\n\n    @Service\n    public class UserService {\n        @Autowired\n        MongoTemplate mongoTemplate;\n        @Autowired\n        UsersRepository usersRepository;\n\n        public void addSampleData() {\n             System.out.println(\"Adding sample data\");\n             usersRepository.save(new Users(\"1\",\"Ashu\",\"test@gmail.com\", 24, \"Male\", \"1111111111\", \"Delhi\"));\n             usersRepository.save(new Users(\"2\",\"Adam Clark\", \"adam@gmail.com\",24,\"Male\", \"2222222222\", \"Shelton CT\"));\n\n             }\n        }\n</code></pre>\n\n<p>POM.xml</p>\n\n<pre><code>&lt;dependency&gt;\n&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n&lt;artifactId&gt;spring-boot-starter-data-mongodb&lt;/artifactId&gt;\n&lt;/dependency&gt;\n</code></pre>\n"},{"tags":["java","java-io"],"comments":[{"owner":{"account_id":3925658,"reputation":5569,"user_id":3246362,"display_name":"Sam"},"score":1,"creation_date":1691591003,"post_id":76868643,"comment_id":135512621,"body_markdown":"Does this answer your question? [how to define path in SMB](https://stackoverflow.com/questions/50233098/how-to-define-path-in-smb)","body":"Does this answer your question? <a href=\"https://stackoverflow.com/questions/50233098/how-to-define-path-in-smb\">how to define path in SMB</a>"},{"owner":{"account_id":29158723,"reputation":1,"user_id":22337927,"display_name":"Fra"},"score":0,"creation_date":1691652746,"post_id":76868643,"comment_id":135521112,"body_markdown":"Unfortunately no :( That is pretty much the other way around. I need to read from a sbm location (wich I can do with no troubles at all) and write to a non-smb location (wich is where I&#39;m struggling)","body":"Unfortunately no :( That is pretty much the other way around. I need to read from a sbm location (wich I can do with no troubles at all) and write to a non-smb location (wich is where I&#39;m struggling)"},{"owner":{"account_id":3925658,"reputation":5569,"user_id":3246362,"display_name":"Sam"},"score":0,"creation_date":1691666233,"post_id":76868643,"comment_id":135523651,"body_markdown":"I have retracted my duplicate vote.","body":"I have retracted my duplicate vote."}],"owner":{"account_id":29158723,"reputation":1,"user_id":22337927,"display_name":"Fra"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":41,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1691590733,"creation_date":1691590527,"question_id":76868643,"body_markdown":"I have to move a file from a server to another. I can connect to the source serve and retrieve the file via smb, but once I have the file, I can save it on my machine without any problem, but I&#39;m having troubles on copying it to another server. The target server is a Windows machine, I know IP address and the folder where I want to save the file to.\r\nBased on the error I&#39;m receiving, I think something is wrong on the target path.\r\n\r\nHere&#39;s what I&#39;m using:\r\n\r\n```\r\npublic static void main(String args[]) throws Exception {\r\n\tString from = &quot;smb://IpAddress/.../tmp/&quot;;\r\n\tString toServer = &quot;//.... what should i write here??&quot;;\r\n\tString filename = &quot;someFileName.xml&quot;;\r\n\r\n\tmoveSmbFileToServer(from, toServer, filename);\r\n} // main\t\r\n\r\npublic static void moveSmbFileToServer (String smbPathFrom, String pathTo, String fileName)  throws Exception {\r\n\tSmbFile smbFileFrom = new SmbFile(smbPathFrom + fileName);\r\n\tFile fileTo = new File(pathTo + fileName);\r\n\tInputStream is = null;\r\n    OutputStream os = null;\r\n    try {\r\n        is = smbFileFrom.getInputStream();\r\n        os = new FileOutputStream(fileTo);\r\n        byte[] buffer = new byte[1024];\r\n        int length;\r\n        while ((length = is.read(buffer)) &gt; 0)\r\n            os.write(buffer, 0, length);\r\n\r\n//\t    smbFileFrom.delete(); // commented so I can test multiple times. Will be uncommented once the writing works\r\n    } finally {\r\n        is.close();\r\n        os.close();\r\n    }\r\n    \r\n} // moveSmbFileToServer\r\n```","title":"How to save a file in another computer within the same network knowing IP address and path","body":"<p>I have to move a file from a server to another. I can connect to the source serve and retrieve the file via smb, but once I have the file, I can save it on my machine without any problem, but I'm having troubles on copying it to another server. The target server is a Windows machine, I know IP address and the folder where I want to save the file to.\nBased on the error I'm receiving, I think something is wrong on the target path.</p>\n<p>Here's what I'm using:</p>\n<pre><code>public static void main(String args[]) throws Exception {\n    String from = &quot;smb://IpAddress/.../tmp/&quot;;\n    String toServer = &quot;//.... what should i write here??&quot;;\n    String filename = &quot;someFileName.xml&quot;;\n\n    moveSmbFileToServer(from, toServer, filename);\n} // main   \n\npublic static void moveSmbFileToServer (String smbPathFrom, String pathTo, String fileName)  throws Exception {\n    SmbFile smbFileFrom = new SmbFile(smbPathFrom + fileName);\n    File fileTo = new File(pathTo + fileName);\n    InputStream is = null;\n    OutputStream os = null;\n    try {\n        is = smbFileFrom.getInputStream();\n        os = new FileOutputStream(fileTo);\n        byte[] buffer = new byte[1024];\n        int length;\n        while ((length = is.read(buffer)) &gt; 0)\n            os.write(buffer, 0, length);\n\n//      smbFileFrom.delete(); // commented so I can test multiple times. Will be uncommented once the writing works\n    } finally {\n        is.close();\n        os.close();\n    }\n    \n} // moveSmbFileToServer\n</code></pre>\n"},{"tags":["java","android","android-studio","emulation"],"answers":[{"tags":[],"owner":{"account_id":771526,"reputation":629,"user_id":804509,"display_name":"Michael"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1691590535,"creation_date":1635707808,"answer_id":69789845,"question_id":68914500,"body_markdown":"This helps me in getting it to work: switch off [Hyper-V][1] on Windows:\r\n\r\nOpen a PowerShell window as *Administrator* and run:\r\n\r\n    bcdedit /set hypervisorlaunchtype off\r\n\r\nReboot afterwards. Alternatively, run &#39;optionalfeatures&#39; and select the hypervisor platform to remove. To test if it really worked, run:\r\n\r\n    emulator.exe -verbose -avd &lt;YOUR AVD NAME&gt;\r\n\r\nYou can list the [AVDs][2] with &#39;emulator.exe -list-avds&#39;.\r\n\r\nIt is not my credits, but those of &#39;viet-quocnguyen&#39;. See *[Android emulator not starting anymore #6471][3]*\r\n\r\n  [1]: https://en.wikipedia.org/wiki/Hyper-V\r\n  [2]: https://developer.android.com/studio/run/managing-avds\r\n  [3]: https://github.com/microsoft/WSL/issues/6471#issuecomment-770417782\r\n","title":"qemu-system-x86_64.exe is not responding","body":"<p>This helps me in getting it to work: switch off <a href=\"https://en.wikipedia.org/wiki/Hyper-V\" rel=\"nofollow noreferrer\">Hyper-V</a> on Windows:</p>\n<p>Open a PowerShell window as <em>Administrator</em> and run:</p>\n<pre><code>bcdedit /set hypervisorlaunchtype off\n</code></pre>\n<p>Reboot afterwards. Alternatively, run 'optionalfeatures' and select the hypervisor platform to remove. To test if it really worked, run:</p>\n<pre><code>emulator.exe -verbose -avd &lt;YOUR AVD NAME&gt;\n</code></pre>\n<p>You can list the <a href=\"https://developer.android.com/studio/run/managing-avds\" rel=\"nofollow noreferrer\">AVDs</a> with 'emulator.exe -list-avds'.</p>\n<p>It is not my credits, but those of 'viet-quocnguyen'. See <em><a href=\"https://github.com/microsoft/WSL/issues/6471#issuecomment-770417782\" rel=\"nofollow noreferrer\">Android emulator not starting anymore #6471</a></em></p>\n"}],"owner":{"account_id":18176502,"reputation":27,"user_id":13225133,"display_name":"Zero03"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2830,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1691590679,"creation_date":1629841976,"question_id":68914500,"body_markdown":"I just installed Android Studio and I&#39;ve been trying to figure out for the past 3 hours why it is that when I try to run my newly created project on a emulated phone it doesn&#39;t work.\r\n\r\nIt&#39;s not even that the program doesn&#39;t work; it&#39;s that it freezes the moment I open it. I&#39;ve tried uninstalling/reinstalling [HAXM][1], SDKs for the phone, and recreating the phone / wiping the data on the phone and retrying, and nothing&#39;s worked so far.\r\n\r\nWhat causes this problem? Please see the picture to see what the problem is.\r\n\r\nP.S.: I&#39;m using Android Studio on Windows. My system is beefy and should be able to run the emulator fine. I have *Virtualization Enabled* too.\r\n\r\n[![Emulator broken window][2]][2]\r\n\r\n[![Not responding window][3]][3]\r\n\r\n  [1]: https://en.wikipedia.org/wiki/QEMU#Accelerator\r\n  [2]: https://i.stack.imgur.com/e9eXq.png\r\n  [3]: https://i.stack.imgur.com/VJaz4.png\r\n","title":"qemu-system-x86_64.exe is not responding","body":"<p>I just installed Android Studio and I've been trying to figure out for the past 3 hours why it is that when I try to run my newly created project on a emulated phone it doesn't work.</p>\n<p>It's not even that the program doesn't work; it's that it freezes the moment I open it. I've tried uninstalling/reinstalling <a href=\"https://en.wikipedia.org/wiki/QEMU#Accelerator\" rel=\"nofollow noreferrer\">HAXM</a>, SDKs for the phone, and recreating the phone / wiping the data on the phone and retrying, and nothing's worked so far.</p>\n<p>What causes this problem? Please see the picture to see what the problem is.</p>\n<p>P.S.: I'm using Android Studio on Windows. My system is beefy and should be able to run the emulator fine. I have <em>Virtualization Enabled</em> too.</p>\n<p><a href=\"https://i.stack.imgur.com/e9eXq.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/e9eXq.png\" alt=\"Emulator broken window\" /></a></p>\n<p><a href=\"https://i.stack.imgur.com/VJaz4.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/VJaz4.png\" alt=\"Not responding window\" /></a></p>\n"},{"tags":["java","dao"],"answers":[{"tags":[],"owner":{"account_id":252942,"reputation":7182,"user_id":531310,"accept_rate":100,"display_name":"Rami"},"down_vote_count":0,"up_vote_count":521,"is_accepted":true,"score":521,"last_activity_date":1457295419,"creation_date":1380789372,"answer_id":19154487,"question_id":19154202,"body_markdown":"The Data Access Object is basically an object or an interface that provides access to an underlying database or any other persistence storage. \r\n\r\nThat definition from:\r\nhttp://en.wikipedia.org/wiki/Data_access_object\r\n\r\nCheck also the sequence diagram here: \r\nhttp://www.oracle.com/technetwork/java/dataaccessobject-138824.html\r\n\r\nMaybe a simple example can help you understand the concept:\r\n\r\nLet&#39;s say we have an entity to represent an employee:\r\n\r\n\r\n   \r\n\r\n    public class Employee {\r\n\r\n    \tprivate int id;\r\n    \tprivate String name;\r\n    \t\r\n    \t\r\n    \tpublic int getId() {\r\n    \t\treturn id;\r\n    \t}\r\n    \tpublic void setId(int id) {\r\n    \t\tthis.id = id;\r\n    \t}\r\n    \tpublic String getName() {\r\n    \t\treturn name;\r\n    \t}\r\n    \tpublic void setName(String name) {\r\n    \t\tthis.name = name;\r\n    \t}\r\n\r\n    }\r\n\r\n\r\nThe employee entities will be persisted into a corresponding **`Employee`** table in a database.\r\nA simple DAO interface to handle the database operation required to manipulate an employee entity will be like:\r\n\r\n    interface EmployeeDAO {\r\n    \t\r\n    \tList&lt;Employee&gt; findAll();\r\n    \tList&lt;Employee&gt; findById();\r\n    \tList&lt;Employee&gt; findByName();\r\n    \tboolean insertEmployee(Employee employee);\r\n    \tboolean updateEmployee(Employee employee);\r\n    \tboolean deleteEmployee(Employee employee);\r\n    \t\r\n    }\r\n\r\nNext we have to provide a concrete implementation for that interface to deal with SQL server, and another to deal with flat files, etc.","title":"Data access object (DAO) in Java","body":"<p>The Data Access Object is basically an object or an interface that provides access to an underlying database or any other persistence storage. </p>\n\n<p>That definition from:\n<a href=\"http://en.wikipedia.org/wiki/Data_access_object\">http://en.wikipedia.org/wiki/Data_access_object</a></p>\n\n<p>Check also the sequence diagram here: \n<a href=\"http://www.oracle.com/technetwork/java/dataaccessobject-138824.html\">http://www.oracle.com/technetwork/java/dataaccessobject-138824.html</a></p>\n\n<p>Maybe a simple example can help you understand the concept:</p>\n\n<p>Let's say we have an entity to represent an employee:</p>\n\n<pre><code>public class Employee {\n\n    private int id;\n    private String name;\n\n\n    public int getId() {\n        return id;\n    }\n    public void setId(int id) {\n        this.id = id;\n    }\n    public String getName() {\n        return name;\n    }\n    public void setName(String name) {\n        this.name = name;\n    }\n\n}\n</code></pre>\n\n<p>The employee entities will be persisted into a corresponding <strong><code>Employee</code></strong> table in a database.\nA simple DAO interface to handle the database operation required to manipulate an employee entity will be like:</p>\n\n<pre><code>interface EmployeeDAO {\n\n    List&lt;Employee&gt; findAll();\n    List&lt;Employee&gt; findById();\n    List&lt;Employee&gt; findByName();\n    boolean insertEmployee(Employee employee);\n    boolean updateEmployee(Employee employee);\n    boolean deleteEmployee(Employee employee);\n\n}\n</code></pre>\n\n<p>Next we have to provide a concrete implementation for that interface to deal with SQL server, and another to deal with flat files, etc.</p>\n"},{"tags":[],"owner":{"account_id":2418179,"reputation":756,"user_id":2111798,"display_name":"umanganiello"},"down_vote_count":2,"up_vote_count":17,"is_accepted":false,"score":15,"last_activity_date":1380789412,"creation_date":1380789412,"answer_id":19154508,"question_id":19154202,"body_markdown":"DAO (Data Access Object) is a very used design pattern in enterprise applications. It basically is the module that is used to access data from every source (DBMS, XML and so on). I suggest you to read some examples, like this one:\r\n\r\n[DAO Example][1]\r\n\r\n\r\nPlease note that there are different ways to implements the original [DAO Pattern][2], and there are many frameworks that can simplify your work. For example, the ORM (Object Relational Mapping) frameworks like iBatis or Hibernate, are used to map the result of SQL queries to java objects.\r\n\r\n\r\n  [1]: http://www.informit.com/guides/content.aspx?g=java&amp;seqNum=137\r\n  [2]: http://en.wikipedia.org/wiki/Data_access_object\r\n\r\nHope it helps,\r\nBye!\r\n","title":"Data access object (DAO) in Java","body":"<p>DAO (Data Access Object) is a very used design pattern in enterprise applications. It basically is the module that is used to access data from every source (DBMS, XML and so on). I suggest you to read some examples, like this one:</p>\n\n<p><a href=\"http://www.informit.com/guides/content.aspx?g=java&amp;seqNum=137\" rel=\"noreferrer\">DAO Example</a></p>\n\n<p>Please note that there are different ways to implements the original <a href=\"http://en.wikipedia.org/wiki/Data_access_object\" rel=\"noreferrer\">DAO Pattern</a>, and there are many frameworks that can simplify your work. For example, the ORM (Object Relational Mapping) frameworks like iBatis or Hibernate, are used to map the result of SQL queries to java objects.</p>\n\n<p>Hope it helps,\nBye!</p>\n"},{"tags":[],"owner":{"account_id":4614882,"reputation":91,"user_id":3741745,"display_name":"babu"},"down_vote_count":0,"up_vote_count":9,"is_accepted":false,"score":9,"last_activity_date":1514713743,"creation_date":1402813320,"answer_id":24227092,"question_id":19154202,"body_markdown":"Data Access Object Pattern or DAO pattern is used to separate low level data accessing API or operations from high level business services. Following are the participants in Data Access Object Pattern.\r\n\r\nData Access Object Interface - This interface defines the standard operations to be performed on a model object(s).\r\n\r\nData Access Object concrete class -This class implements above interface. This class is responsible to get data from a datasource which can be database / xml or any other storage mechanism.\r\n\r\nModel Object or Value Object - This object is simple POJO containing get/set methods to store data retrieved using DAO class.\r\n\r\nSample code [here][1]..\r\n\r\n\r\n  [1]: https://dzone.com/articles/building-simple-data-access-layer-using-jdbc","title":"Data access object (DAO) in Java","body":"<p>Data Access Object Pattern or DAO pattern is used to separate low level data accessing API or operations from high level business services. Following are the participants in Data Access Object Pattern.</p>\n\n<p>Data Access Object Interface - This interface defines the standard operations to be performed on a model object(s).</p>\n\n<p>Data Access Object concrete class -This class implements above interface. This class is responsible to get data from a datasource which can be database / xml or any other storage mechanism.</p>\n\n<p>Model Object or Value Object - This object is simple POJO containing get/set methods to store data retrieved using DAO class.</p>\n\n<p>Sample code <a href=\"https://dzone.com/articles/building-simple-data-access-layer-using-jdbc\" rel=\"noreferrer\">here</a>..</p>\n"},{"tags":[],"owner":{"account_id":4394923,"reputation":550,"user_id":3582295,"display_name":"Rohit Goyal"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1403074446,"creation_date":1403074446,"answer_id":24278861,"question_id":19154202,"body_markdown":"The Data Access Object manages the connection with the data source to obtain and store data.It abstracts the underlying data access implementation for the Business Object to enable transparent access to the data source. \r\nA data source could be any database such as an RDBMS, XML repository or flat file system etc.","title":"Data access object (DAO) in Java","body":"<p>The Data Access Object manages the connection with the data source to obtain and store data.It abstracts the underlying data access implementation for the Business Object to enable transparent access to the data source. \nA data source could be any database such as an RDBMS, XML repository or flat file system etc.</p>\n"},{"tags":[],"owner":{"account_id":2113203,"reputation":9798,"user_id":1878022,"accept_rate":96,"display_name":"VedantK"},"down_vote_count":0,"up_vote_count":110,"is_accepted":false,"score":110,"last_activity_date":1632477365,"creation_date":1438330852,"answer_id":31741434,"question_id":19154202,"body_markdown":"&gt; **What is DATA ACCESS OBJECT (DAO)** - \r\n\r\n *It is a **object/interface**, which is used to **access data** from database of data storage.* &lt;br&gt;\r\n\r\n\r\n&gt; **WHY WE USE DAO:** \r\n\r\nTo abstract the retrieval of data from a data resource such as a database.         \r\nThe concept is to **&quot;separate a data resource&#39;s client interface from its data access mechanism.&quot;**    \r\n&amp;nbsp;\r\n\r\nThe problem with accessing data directly is that the source of the data can change. Consider, for example, that your application is deployed in an environment that accesses an Oracle database. Then it is subsequently deployed to an environment that uses Microsoft SQL Server. If your application uses stored procedures and database-specific code (such as generating a number sequence), how do you handle that in your application? You have two options:\r\n\r\n - Rewrite your application to use SQL Server instead of Oracle (or add conditional code to handle the differences), or\r\n - Create a layer in-between your application logic and data access layers\r\n\r\n&lt;br&gt;\r\n\r\nThe **DAO Pattern** consists of the following:\r\n\r\n&gt;  - **Data Access Object Interface** - This interface *defines the standard operations* to be performed on a model object(s).\r\n&gt;  - **Data Access Object concrete class** -This class implements above interface. This class is *responsible to get data from a datasource*\r\n&gt; which can be database / xml or any other storage mechanism.\r\n&gt;  - **Model Object or Value Object** - This object is *simple POJO containing get/set methods* to store data retrieved using DAO class.\r\n&gt; \r\n&gt; \r\n\r\n[See examples][1]&lt;br&gt;\r\n\r\nI hope this has cleared up your understanding of DAO!  \r\n\r\n\r\n  [1]: http://www.tutorialspoint.com/design_pattern/data_access_object_pattern.htm\r\n\r\n\r\n\r\n","title":"Data access object (DAO) in Java","body":"<blockquote>\n<p><strong>What is DATA ACCESS OBJECT (DAO)</strong> -</p>\n</blockquote>\n<p><em>It is a <strong>object/interface</strong>, which is used to <strong>access data</strong> from database of data storage.</em> <br></p>\n<blockquote>\n<p><strong>WHY WE USE DAO:</strong></p>\n</blockquote>\n<p>To abstract the retrieval of data from a data resource such as a database.<br />\nThe concept is to <strong>&quot;separate a data resource's client interface from its data access mechanism.&quot;</strong><br />\n </p>\n<p>The problem with accessing data directly is that the source of the data can change. Consider, for example, that your application is deployed in an environment that accesses an Oracle database. Then it is subsequently deployed to an environment that uses Microsoft SQL Server. If your application uses stored procedures and database-specific code (such as generating a number sequence), how do you handle that in your application? You have two options:</p>\n<ul>\n<li>Rewrite your application to use SQL Server instead of Oracle (or add conditional code to handle the differences), or</li>\n<li>Create a layer in-between your application logic and data access layers</li>\n</ul>\n<br>\n<p>The <strong>DAO Pattern</strong> consists of the following:</p>\n<blockquote>\n<ul>\n<li><strong>Data Access Object Interface</strong> - This interface <em>defines the standard operations</em> to be performed on a model object(s).</li>\n<li><strong>Data Access Object concrete class</strong> -This class implements above interface. This class is <em>responsible to get data from a datasource</em>\nwhich can be database / xml or any other storage mechanism.</li>\n<li><strong>Model Object or Value Object</strong> - This object is <em>simple POJO containing get/set methods</em> to store data retrieved using DAO class.</li>\n</ul>\n</blockquote>\n<p><a href=\"http://www.tutorialspoint.com/design_pattern/data_access_object_pattern.htm\" rel=\"noreferrer\">See examples</a><br></p>\n<p>I hope this has cleared up your understanding of DAO!</p>\n"},{"tags":[],"owner":{"account_id":4066076,"reputation":2498,"user_id":3340968,"accept_rate":43,"display_name":"Yasir Shabbir Choudhary"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1461740223,"creation_date":1461740223,"answer_id":36882531,"question_id":19154202,"body_markdown":"DAO is an act like  as &quot;Persistence Manager &quot; in 3 tier architecture as well as DAO also design pattern as you can consult &quot;Gang of Four&quot; book.\r\nYour application service layer just need to call the method of DAO class without knowing hidden &amp; internal details of DAO&#39;s method.","title":"Data access object (DAO) in Java","body":"<p>DAO is an act like  as \"Persistence Manager \" in 3 tier architecture as well as DAO also design pattern as you can consult \"Gang of Four\" book.\nYour application service layer just need to call the method of DAO class without knowing hidden &amp; internal details of DAO's method.</p>\n"},{"tags":[],"owner":{"account_id":8809294,"reputation":51,"user_id":6582815,"display_name":"Amrit Baghel"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1468390910,"creation_date":1468390910,"answer_id":38344001,"question_id":19154202,"body_markdown":"Pojo also consider as Model class in Java where we can create getter and setter for particular variable defined in private .\r\nRemember all variables are here declared with private modifier ","title":"Data access object (DAO) in Java","body":"<p>Pojo also consider as Model class in Java where we can create getter and setter for particular variable defined in private .\nRemember all variables are here declared with private modifier </p>\n"},{"tags":[],"owner":{"account_id":8809294,"reputation":51,"user_id":6582815,"display_name":"Amrit Baghel"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1468391736,"creation_date":1468391736,"answer_id":38344229,"question_id":19154202,"body_markdown":"Dao clases are used to reuse the jdbc logic &amp; Dao(Data Access Object) is a design pattern.\r\ndao is a simple java class which contains JDBC logic .\r\n\r\nData Access Layer has proven good in separate business logic layer and persistent layer. The DAO design pattern completely hides the data access implementation from its clients\r\n\r\n\r\nThe Java Data Access Object (Java DAO) is an important component in business applications. Business applications almost always need access to data from relational or object databases and the Java platform offers many techniques for accessingthis data. The oldest and most mature technique is to use the Java Database Connectivity (JDBC)API, which provides the capability to execute SQL queries against a databaseand then fetch the results, one column at a time. \r\n\r\n\r\n","title":"Data access object (DAO) in Java","body":"<p>Dao clases are used to reuse the jdbc logic &amp; Dao(Data Access Object) is a design pattern.\ndao is a simple java class which contains JDBC logic .</p>\n\n<p>Data Access Layer has proven good in separate business logic layer and persistent layer. The DAO design pattern completely hides the data access implementation from its clients</p>\n\n<p>The Java Data Access Object (Java DAO) is an important component in business applications. Business applications almost always need access to data from relational or object databases and the Java platform offers many techniques for accessingthis data. The oldest and most mature technique is to use the Java Database Connectivity (JDBC)API, which provides the capability to execute SQL queries against a databaseand then fetch the results, one column at a time. </p>\n"},{"tags":[],"owner":{"account_id":5408151,"reputation":1823,"user_id":4305935,"accept_rate":56,"display_name":"ArunValaven"},"down_vote_count":1,"up_vote_count":10,"is_accepted":false,"score":9,"last_activity_date":1591044818,"creation_date":1469641210,"answer_id":38619781,"question_id":19154202,"body_markdown":"Don&#39;t get confused with too many explanations. DAO: From the name itself it means Accessing Data using Object. DAO is separated from other Business Logic.","title":"Data access object (DAO) in Java","body":"<p>Don't get confused with too many explanations. DAO: From the name itself it means Accessing Data using Object. DAO is separated from other Business Logic.</p>\n"},{"tags":[],"owner":{"account_id":5640424,"reputation":1415,"user_id":4464457,"display_name":"Orhan"},"down_vote_count":0,"up_vote_count":8,"is_accepted":false,"score":8,"last_activity_date":1592464724,"creation_date":1527251403,"answer_id":50529284,"question_id":19154202,"body_markdown":"I am going to be general and not specific to Java as DAO and ORM are used in all languages. \r\n\r\nTo understand DAO you first need to understand ORM (Object Relational Mapping). This means that if you have a table called &quot;person&quot; with columns &quot;name&quot; and &quot;age&quot;, then you would create object-template for that table:\r\n\r\n    type Person {\r\n    name\r\n    age\r\n    }\r\n\r\nNow with help of DAO instead of writing some specific queries, to fetch all persons, for what ever type of db you are using (which can be error-prone) instead you do:\r\n\r\n    list persons = DAO.getPersons();\r\n    ...\r\n    person = DAO.getPersonWithName(&quot;John&quot;);\r\n    age = person.age;\r\n\r\nYou do not write the DAO abstraction yourself, instead it is usually part of some opensource project, depending on what language and framework you are using.\r\n\r\nNow to the main question here. &quot;**..where it is used..**&quot;. Well usually if you are writing complex business and domain specific code your life will be very difficult without DAO. Of course you do not need to use ORM and DAO provided, instead you can write your own abstraction and native queries. I have done that in the past and almost always regretted it later.","title":"Data access object (DAO) in Java","body":"<p>I am going to be general and not specific to Java as DAO and ORM are used in all languages. </p>\n\n<p>To understand DAO you first need to understand ORM (Object Relational Mapping). This means that if you have a table called \"person\" with columns \"name\" and \"age\", then you would create object-template for that table:</p>\n\n<pre><code>type Person {\nname\nage\n}\n</code></pre>\n\n<p>Now with help of DAO instead of writing some specific queries, to fetch all persons, for what ever type of db you are using (which can be error-prone) instead you do:</p>\n\n<pre><code>list persons = DAO.getPersons();\n...\nperson = DAO.getPersonWithName(\"John\");\nage = person.age;\n</code></pre>\n\n<p>You do not write the DAO abstraction yourself, instead it is usually part of some opensource project, depending on what language and framework you are using.</p>\n\n<p>Now to the main question here. \"<strong>..where it is used..</strong>\". Well usually if you are writing complex business and domain specific code your life will be very difficult without DAO. Of course you do not need to use ORM and DAO provided, instead you can write your own abstraction and native queries. I have done that in the past and almost always regretted it later.</p>\n"},{"tags":[],"owner":{"account_id":9366242,"reputation":2001,"user_id":6951063,"display_name":"Andriy"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1550069890,"creation_date":1550069890,"answer_id":54673141,"question_id":19154202,"body_markdown":"Spring JPA DAO\r\n-----------------------------------------------------------\r\nFor example we have some entity Group.\r\n\r\nFor this entity we create the repository GroupRepository.\r\n\r\n    public interface GroupRepository extends JpaRepository&lt;Group, Long&gt; {   \r\n    }\r\n\r\nThen we need to create a service layer with which we will use this repository.\r\n\r\n    public interface Service&lt;T, ID&gt; {\r\n    \r\n        T save(T entity);\r\n    \r\n        void deleteById(ID id);\r\n    \r\n        List&lt;T&gt; findAll();\r\n    \r\n        T getOne(ID id);\r\n    \r\n        T editEntity(T entity);\r\n    \r\n        Optional&lt;T&gt; findById(ID id);\r\n    }\r\n\r\n    public abstract class AbstractService&lt;T, ID, R extends JpaRepository&lt;T, ID&gt;&gt; implements Service&lt;T, ID&gt; {\r\n    \r\n        private final R repository;\r\n    \r\n        protected AbstractService(R repository) {\r\n            this.repository = repository;\r\n        }\r\n    \r\n        @Override\r\n        public T save(T entity) {\r\n            return repository.save(entity);\r\n        }\r\n    \r\n        @Override\r\n        public void deleteById(ID id) {\r\n            repository.deleteById(id);\r\n        }\r\n    \r\n        @Override\r\n        public List&lt;T&gt; findAll() {\r\n            return repository.findAll();\r\n        }\r\n    \r\n        @Override\r\n        public T getOne(ID id) {\r\n            return repository.getOne(id);\r\n        }\r\n    \r\n        @Override\r\n        public Optional&lt;T&gt; findById(ID id) {\r\n            return repository.findById(id);\r\n        }\r\n    \r\n        @Override\r\n        public T editEntity(T entity) {\r\n            return repository.saveAndFlush(entity);\r\n        }\r\n    }\r\n\r\n    @org.springframework.stereotype.Service\r\n    public class GroupServiceImpl extends AbstractService&lt;Group, Long, GroupRepository&gt; {\r\n    \r\n        private final GroupRepository groupRepository;\r\n    \r\n        @Autowired\r\n        protected GroupServiceImpl(GroupRepository repository) {\r\n            super(repository);\r\n            this.groupRepository = repository;\r\n        }\r\n    }\r\n\r\nAnd in the controller we use this service.\r\n\r\n    @RestController\r\n    @RequestMapping(&quot;/api&quot;)\r\n    class GroupController {\r\n    \r\n        private final Logger log = LoggerFactory.getLogger(GroupController.class);\r\n    \r\n        private final GroupServiceImpl groupService;\r\n    \r\n        @Autowired\r\n        public GroupController(GroupServiceImpl groupService) {\r\n            this.groupService = groupService;\r\n        }\r\n    \r\n        @GetMapping(&quot;/groups&quot;)\r\n        Collection&lt;Group&gt; groups() {\r\n            return groupService.findAll();\r\n        }\r\n    \r\n        @GetMapping(&quot;/group/{id}&quot;)\r\n        ResponseEntity&lt;?&gt; getGroup(@PathVariable Long id) {\r\n            Optional&lt;Group&gt; group = groupService.findById(id);\r\n            return group.map(response -&gt; ResponseEntity.ok().body(response))\r\n                    .orElse(new ResponseEntity&lt;&gt;(HttpStatus.NOT_FOUND));\r\n        }\r\n    \r\n        @PostMapping(&quot;/group&quot;)\r\n        ResponseEntity&lt;Group&gt; createGroup(@Valid @RequestBody Group group) throws URISyntaxException {\r\n            log.info(&quot;Request to create group: {}&quot;, group);\r\n            Group result = groupService.save(group);\r\n            return ResponseEntity.created(new URI(&quot;/api/group/&quot; + result.getId()))\r\n                    .body(result);\r\n        }\r\n    \r\n        @PutMapping(&quot;/group&quot;)\r\n        ResponseEntity&lt;Group&gt; updateGroup(@Valid @RequestBody Group group) {\r\n            log.info(&quot;Request to update group: {}&quot;, group);\r\n            Group result = groupService.save(group);\r\n            return ResponseEntity.ok().body(result);\r\n        }\r\n    \r\n        @DeleteMapping(&quot;/group/{id}&quot;)\r\n        public ResponseEntity&lt;?&gt; deleteGroup(@PathVariable Long id) {\r\n            log.info(&quot;Request to delete group: {}&quot;, id);\r\n            groupService.deleteById(id);\r\n            return ResponseEntity.ok().build();\r\n        }    \r\n    }\r\n\r\n ","title":"Data access object (DAO) in Java","body":"<h2>Spring JPA DAO</h2>\n\n<p>For example we have some entity Group.</p>\n\n<p>For this entity we create the repository GroupRepository.</p>\n\n<pre><code>public interface GroupRepository extends JpaRepository&lt;Group, Long&gt; {   \n}\n</code></pre>\n\n<p>Then we need to create a service layer with which we will use this repository.</p>\n\n<pre><code>public interface Service&lt;T, ID&gt; {\n\n    T save(T entity);\n\n    void deleteById(ID id);\n\n    List&lt;T&gt; findAll();\n\n    T getOne(ID id);\n\n    T editEntity(T entity);\n\n    Optional&lt;T&gt; findById(ID id);\n}\n\npublic abstract class AbstractService&lt;T, ID, R extends JpaRepository&lt;T, ID&gt;&gt; implements Service&lt;T, ID&gt; {\n\n    private final R repository;\n\n    protected AbstractService(R repository) {\n        this.repository = repository;\n    }\n\n    @Override\n    public T save(T entity) {\n        return repository.save(entity);\n    }\n\n    @Override\n    public void deleteById(ID id) {\n        repository.deleteById(id);\n    }\n\n    @Override\n    public List&lt;T&gt; findAll() {\n        return repository.findAll();\n    }\n\n    @Override\n    public T getOne(ID id) {\n        return repository.getOne(id);\n    }\n\n    @Override\n    public Optional&lt;T&gt; findById(ID id) {\n        return repository.findById(id);\n    }\n\n    @Override\n    public T editEntity(T entity) {\n        return repository.saveAndFlush(entity);\n    }\n}\n\n@org.springframework.stereotype.Service\npublic class GroupServiceImpl extends AbstractService&lt;Group, Long, GroupRepository&gt; {\n\n    private final GroupRepository groupRepository;\n\n    @Autowired\n    protected GroupServiceImpl(GroupRepository repository) {\n        super(repository);\n        this.groupRepository = repository;\n    }\n}\n</code></pre>\n\n<p>And in the controller we use this service.</p>\n\n<pre><code>@RestController\n@RequestMapping(\"/api\")\nclass GroupController {\n\n    private final Logger log = LoggerFactory.getLogger(GroupController.class);\n\n    private final GroupServiceImpl groupService;\n\n    @Autowired\n    public GroupController(GroupServiceImpl groupService) {\n        this.groupService = groupService;\n    }\n\n    @GetMapping(\"/groups\")\n    Collection&lt;Group&gt; groups() {\n        return groupService.findAll();\n    }\n\n    @GetMapping(\"/group/{id}\")\n    ResponseEntity&lt;?&gt; getGroup(@PathVariable Long id) {\n        Optional&lt;Group&gt; group = groupService.findById(id);\n        return group.map(response -&gt; ResponseEntity.ok().body(response))\n                .orElse(new ResponseEntity&lt;&gt;(HttpStatus.NOT_FOUND));\n    }\n\n    @PostMapping(\"/group\")\n    ResponseEntity&lt;Group&gt; createGroup(@Valid @RequestBody Group group) throws URISyntaxException {\n        log.info(\"Request to create group: {}\", group);\n        Group result = groupService.save(group);\n        return ResponseEntity.created(new URI(\"/api/group/\" + result.getId()))\n                .body(result);\n    }\n\n    @PutMapping(\"/group\")\n    ResponseEntity&lt;Group&gt; updateGroup(@Valid @RequestBody Group group) {\n        log.info(\"Request to update group: {}\", group);\n        Group result = groupService.save(group);\n        return ResponseEntity.ok().body(result);\n    }\n\n    @DeleteMapping(\"/group/{id}\")\n    public ResponseEntity&lt;?&gt; deleteGroup(@PathVariable Long id) {\n        log.info(\"Request to delete group: {}\", id);\n        groupService.deleteById(id);\n        return ResponseEntity.ok().build();\n    }    \n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":9686627,"reputation":6334,"user_id":7200133,"display_name":"Gk Mohammad Emon"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1600492789,"creation_date":1600492789,"answer_id":63965487,"question_id":19154202,"body_markdown":"I just want to explain it in my own way with a small story that I experienced in one of my projects. First I want to explain **Why DAO is important?** rather than go to **What is DAO?** for better understanding. \r\n\r\n**Why DAO is important?**   \r\nIn my one project of my project, I used `Client.class` which contains all the basic information of our system users. Where I need client then every time I need to do an ugly query where it is needed. Then I felt that decreases the **readability** and made a lot of redundant **boilerplate code**. \r\n\r\nThen one of my senior developers introduced a `QueryUtils.class` where all queries are added using `public static` access modifier and then I don&#39;t need to do query everywhere. Suppose when I needed *activated clients* then I just call - \r\n\r\n    QueryUtils.findAllActivatedClients();\r\n\r\n In this way, I made some optimizations of my code.\r\n\r\n***But there was another problem !!!***\r\n\r\nI felt that the QueryUtils.class was growing very highly. 100+ methods were included in that class which was also very cumbersome to read and use. Because this class contains other queries of another domain models *( For example- products, categories locations, etc )*. \r\n\r\nThen the superhero **Mr. CTO** introduced a new solution named **DAO** which solved the problem finally. I felt DAO is very domain-specific. For example, he created a DAO called `ClientDAO.class` where all `Client.class` related queries are found which seems very easy for me to use and maintain. The giant `QueryUtils.class` was broken down into many other domain-specific DAO for example - `ProductsDAO.class`, `CategoriesDAO.class`, etc which made the code more **Readable**, more **Maintainable**, more **Decoupled**.\r\n\r\n**What is DAO?**\r\n\r\nIt is an object or interface, which made an easy way to access data from the database without writing **complex** and **ugly** queries every time in a reusable way. ","title":"Data access object (DAO) in Java","body":"<p>I just want to explain it in my own way with a small story that I experienced in one of my projects. First I want to explain <strong>Why DAO is important?</strong> rather than go to <strong>What is DAO?</strong> for better understanding.</p>\n<p><strong>Why DAO is important?</strong><br />\nIn my one project of my project, I used <code>Client.class</code> which contains all the basic information of our system users. Where I need client then every time I need to do an ugly query where it is needed. Then I felt that decreases the <strong>readability</strong> and made a lot of redundant <strong>boilerplate code</strong>.</p>\n<p>Then one of my senior developers introduced a <code>QueryUtils.class</code> where all queries are added using <code>public static</code> access modifier and then I don't need to do query everywhere. Suppose when I needed <em>activated clients</em> then I just call -</p>\n<pre><code>QueryUtils.findAllActivatedClients();\n</code></pre>\n<p>In this way, I made some optimizations of my code.</p>\n<p><em><strong>But there was another problem !!!</strong></em></p>\n<p>I felt that the QueryUtils.class was growing very highly. 100+ methods were included in that class which was also very cumbersome to read and use. Because this class contains other queries of another domain models <em>( For example- products, categories locations, etc )</em>.</p>\n<p>Then the superhero <strong>Mr. CTO</strong> introduced a new solution named <strong>DAO</strong> which solved the problem finally. I felt DAO is very domain-specific. For example, he created a DAO called <code>ClientDAO.class</code> where all <code>Client.class</code> related queries are found which seems very easy for me to use and maintain. The giant <code>QueryUtils.class</code> was broken down into many other domain-specific DAO for example - <code>ProductsDAO.class</code>, <code>CategoriesDAO.class</code>, etc which made the code more <strong>Readable</strong>, more <strong>Maintainable</strong>, more <strong>Decoupled</strong>.</p>\n<p><strong>What is DAO?</strong></p>\n<p>It is an object or interface, which made an easy way to access data from the database without writing <strong>complex</strong> and <strong>ugly</strong> queries every time in a reusable way.</p>\n"}],"owner":{"account_id":3306323,"reputation":4878,"user_id":2781031,"accept_rate":69,"display_name":"Vasanth Nag K V"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":477428,"favorite_count":0,"down_vote_count":3,"up_vote_count":416,"accepted_answer_id":19154487,"answer_count":12,"score":413,"last_activity_date":1691590671,"creation_date":1380788437,"question_id":19154202,"body_markdown":"I was going through a document and I came across a term called `DAO`. I found out that it is a Data Access Object. Can someone please explain me what this actually is? \r\n\r\nI know that it is some kind of an interface for accessing data from different types of sources, and in the middle of this little research of mine I bumped into a concept called *data source* or *data source object*, which confused me even further. \r\n\r\nI really want to know what a `DAO` is programmatically in terms of where it is used. How it is used? Any links to pages that explain this concept from the very basic stuff is also appreciated.","title":"Data access object (DAO) in Java","body":"<p>I was going through a document and I came across a term called <code>DAO</code>. I found out that it is a Data Access Object. Can someone please explain me what this actually is?</p>\n<p>I know that it is some kind of an interface for accessing data from different types of sources, and in the middle of this little research of mine I bumped into a concept called <em>data source</em> or <em>data source object</em>, which confused me even further.</p>\n<p>I really want to know what a <code>DAO</code> is programmatically in terms of where it is used. How it is used? Any links to pages that explain this concept from the very basic stuff is also appreciated.</p>\n"},{"tags":["java","android","mobile"],"answers":[{"tags":[],"owner":{"account_id":15408791,"reputation":41,"user_id":11116154,"display_name":"Alexa Guiar"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1669390363,"creation_date":1669390363,"answer_id":74574973,"question_id":74087099,"body_markdown":"Had the same problem. Solved with menu File-&gt;Restart IDE.","title":"Why do i have &quot;No connected devices&quot; in Logcat window despite having a virtual device set up already?","body":"<p>Had the same problem. Solved with menu File-&gt;Restart IDE.</p>\n"},{"tags":[],"owner":{"account_id":29192471,"reputation":11,"user_id":22364332,"display_name":"Shanazar"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1691590342,"creation_date":1691590342,"answer_id":76868619,"question_id":74087099,"body_markdown":"Had the same issue after updating Android Studio, installing the latest SDK Platform-Tools fixed it.","title":"Why do i have &quot;No connected devices&quot; in Logcat window despite having a virtual device set up already?","body":"<p>Had the same issue after updating Android Studio, installing the latest SDK Platform-Tools fixed it.</p>\n"}],"owner":{"account_id":23114739,"reputation":89,"user_id":17222180,"display_name":"tsukingo"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1599,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"answer_count":2,"score":3,"last_activity_date":1691590342,"creation_date":1665923193,"question_id":74087099,"body_markdown":"I&#39;m new to Mobile Dev and Android Studio .\r\nI&#39;m trying to disable a button when it gets clicked ...\r\nand i&#39;m trying to log some message to Logcat window using ```Log.d(&quot;success&quot;, &quot;button is disabled now&quot;);``` \r\nbut the Logcat show &quot;No connected devices&quot;\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/NfIQK.png\r\n\r\nAny solutions ???","title":"Why do i have &quot;No connected devices&quot; in Logcat window despite having a virtual device set up already?","body":"<p>I'm new to Mobile Dev and Android Studio .\nI'm trying to disable a button when it gets clicked ...\nand i'm trying to log some message to Logcat window using <code>Log.d(&quot;success&quot;, &quot;button is disabled now&quot;);</code>\nbut the Logcat show &quot;No connected devices&quot;\n<a href=\"https://i.stack.imgur.com/NfIQK.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/NfIQK.png\" alt=\"enter image description here\" /></a></p>\n<p>Any solutions ???</p>\n"},{"tags":["java","xml","compilation","jaxb","compiler-optimization"],"answers":[{"tags":[],"owner":{"account_id":12480263,"reputation":10843,"user_id":9085273,"display_name":"rieckpil"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1536503761,"creation_date":1536502367,"answer_id":52245351,"question_id":48393051,"body_markdown":"This document from IBM about the JAXB Context initialization might help you: [JAXBContext Initialization Takes A Long Time](https://www-01.ibm.com/support/docview.wss?uid=swg21641260)\r\n\r\n&gt; **Problem(Abstract)**\r\n\r\n&gt; JAXBContext initialization slows down application performance.\r\n\r\n&gt; **Symptom**\r\n\r\n&gt; Slow performance in WebSphere Application Server.\r\n\r\n\r\n&gt; **Cause**\r\n\r\n&gt; JAXB context (javax.xml.bind.JAXBContext) object instantiation is a resource intensive operation. JAXB Context instantiation involves the pre-load and pre-creation of contexts (called the pre-caching process) of all packages and classes associated with the context, and then all of the packages and classes which are statically (directly and indirectly) referenced from those. Performance latency will correlate with the number of classes which are passed during JAXB creation during this pre-caching process.","title":"Usage and performance of com.sun.xml.bind.v2.bytecode.ClassTailor.noOptimize","body":"<p>This document from IBM about the JAXB Context initialization might help you: <a href=\"https://www-01.ibm.com/support/docview.wss?uid=swg21641260\" rel=\"nofollow noreferrer\">JAXBContext Initialization Takes A Long Time</a></p>\n\n<blockquote>\n  <p><strong>Problem(Abstract)</strong></p>\n  \n  <p>JAXBContext initialization slows down application performance.</p>\n  \n  <p><strong>Symptom</strong></p>\n  \n  <p>Slow performance in WebSphere Application Server.</p>\n  \n  <p><strong>Cause</strong></p>\n  \n  <p>JAXB context (javax.xml.bind.JAXBContext) object instantiation is a resource intensive operation. JAXB Context instantiation involves the pre-load and pre-creation of contexts (called the pre-caching process) of all packages and classes associated with the context, and then all of the packages and classes which are statically (directly and indirectly) referenced from those. Performance latency will correlate with the number of classes which are passed during JAXB creation during this pre-caching process.</p>\n</blockquote>\n"},{"tags":[],"owner":{"account_id":11451482,"reputation":41,"user_id":8393753,"display_name":"Kourosh Delfani"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1691590198,"creation_date":1691590198,"answer_id":76868598,"question_id":48393051,"body_markdown":"In a project, we faced a problem with OutOfMemoryError: Metaspace on a daily and regular basis. By adding this setting, the problem was completely resolved and no problem was observed in the overall performance of the service.","title":"Usage and performance of com.sun.xml.bind.v2.bytecode.ClassTailor.noOptimize","body":"<p>In a project, we faced a problem with OutOfMemoryError: Metaspace on a daily and regular basis. By adding this setting, the problem was completely resolved and no problem was observed in the overall performance of the service.</p>\n"}],"owner":{"account_id":1825355,"reputation":1445,"user_id":2015965,"accept_rate":70,"display_name":"Ashish Thukral"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":6964,"favorite_count":0,"down_vote_count":0,"up_vote_count":6,"answer_count":2,"score":6,"last_activity_date":1691590198,"creation_date":1516672680,"question_id":48393051,"body_markdown":"We came across a JaxB class loading issue as highlighted by [Jaxb classCastException][1].\r\n \r\nTo fix that I added **com.sun.xml.bind.v2.bytecode.ClassTailor.noOptimize=true** and that actually FIXED the issue. \r\n\r\nHowever, I read that this will disable Jaxb&#39;s ability to directly interact with bytecode and go through Java Reflection API and so might have a slight performance hit while initilazation of new Jaxb Contexts via &quot;*JAXBContext.newInstance*&quot;.\r\n\r\nTo test the performance I added a simple method which invokes JAXBContext.newInstance in a for loop some 500 times. And I ran this with the flag=true and =false. \r\n\r\nIn the worst case, I saw a performance hit of only about 3.5 ms on an average per invocation.\r\n\r\nHas anyone had a similar issue and tried the above fix? What were your findings? I couldn&#39;t find much information on the **com.sun.xml.bind.v2.bytecode.ClassTailor.noOptimize**. Can you share more info on its behavior and impact?\r\n\r\n  [1]: https://stackoverflow.com/questions/42499436/classcastexception-cannot-be-cast-to-com-sun-xml-internal-bind-v2-runtime-refle","title":"Usage and performance of com.sun.xml.bind.v2.bytecode.ClassTailor.noOptimize","body":"<p>We came across a JaxB class loading issue as highlighted by <a href=\"https://stackoverflow.com/questions/42499436/classcastexception-cannot-be-cast-to-com-sun-xml-internal-bind-v2-runtime-refle\">Jaxb classCastException</a>.</p>\n\n<p>To fix that I added <strong>com.sun.xml.bind.v2.bytecode.ClassTailor.noOptimize=true</strong> and that actually FIXED the issue. </p>\n\n<p>However, I read that this will disable Jaxb's ability to directly interact with bytecode and go through Java Reflection API and so might have a slight performance hit while initilazation of new Jaxb Contexts via \"<em>JAXBContext.newInstance</em>\".</p>\n\n<p>To test the performance I added a simple method which invokes JAXBContext.newInstance in a for loop some 500 times. And I ran this with the flag=true and =false. </p>\n\n<p>In the worst case, I saw a performance hit of only about 3.5 ms on an average per invocation.</p>\n\n<p>Has anyone had a similar issue and tried the above fix? What were your findings? I couldn't find much information on the <strong>com.sun.xml.bind.v2.bytecode.ClassTailor.noOptimize</strong>. Can you share more info on its behavior and impact?</p>\n"},{"tags":["java","sdn","onos"],"owner":{"account_id":29182543,"reputation":1,"user_id":22356365,"display_name":"Onur Kaya"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":72,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1691589959,"creation_date":1691480136,"question_id":76857362,"body_markdown":"I used the following command and created a default Onos application = `mvn archetype:generate -DarchetypeGroupId=org.onosproject -DarchetypeArtifactId=onos-bundle-archetype -DarchetypeVersion=2.4.0 -DgroupId=com.example -DartifactId=onos-app -Dversion=1.0.0-SNAPSHOT`\r\n\r\nThis is pom.xml:\r\n\r\n```xml\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n\r\n&lt;!--\r\n  ~ Copyright 2022 Open Networking Foundation\r\n  ~\r\n  ~ Licensed under the Apache License, Version 2.0 (the &quot;License&quot;);\r\n  ~ you may not use this file except in compliance with the License.\r\n  ~ You may obtain a copy of the License at\r\n  ~\r\n  ~     http://www.apache.org/licenses/LICENSE-2.0\r\n  ~\r\n  ~ Unless required by applicable law or agreed to in writing, software\r\n  ~ distributed under the License is distributed on an &quot;AS IS&quot; BASIS,\r\n  ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n  ~ See the License for the specific language governing permissions and\r\n  ~ limitations under the License.\r\n  --&gt;\r\n\r\n    4\\.0.0\r\n    \r\n    &lt;parent&gt;\r\n        &lt;groupId&gt;org.onosproject&lt;/groupId&gt;\r\n        &lt;artifactId&gt;onos-dependencies&lt;/artifactId&gt;\r\n        &lt;version&gt;2.7.0&lt;/version&gt;\r\n    &lt;/parent&gt;\r\n    \r\n    &lt;groupId&gt;org.foo&lt;/groupId&gt;\r\n    &lt;artifactId&gt;foo-app&lt;/artifactId&gt;\r\n    &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;\r\n    &lt;packaging&gt;bundle&lt;/packaging&gt;\r\n    \r\n    &lt;description&gt;ONOS OSGi bundle archetype&lt;/description&gt;\r\n    &lt;url&gt;http://onosproject.org&lt;/url&gt;\r\n    \r\n    &lt;properties&gt;\r\n        &lt;onos.app.name&gt;org.foo.app&lt;/onos.app.name&gt;\r\n        &lt;onos.app.title&gt;Foo App&lt;/onos.app.title&gt;\r\n        &lt;onos.app.origin&gt;Foo, Inc.&lt;/onos.app.origin&gt;\r\n        &lt;onos.app.category&gt;default&lt;/onos.app.category&gt;\r\n        &lt;onos.app.url&gt;http://onosproject.org&lt;/onos.app.url&gt;\r\n        &lt;onos.app.readme&gt;ONOS OSGi bundle archetype.&lt;/onos.app.readme&gt;\r\n    &lt;/properties&gt;\r\n    \r\n    &lt;dependencies&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.onosproject&lt;/groupId&gt;\r\n            &lt;artifactId&gt;onos-api&lt;/artifactId&gt;\r\n            &lt;version&gt;2.7.0&lt;/version&gt;\r\n            &lt;scope&gt;provided&lt;/scope&gt;\r\n        &lt;/dependency&gt;\r\n    \r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.onosproject&lt;/groupId&gt;\r\n            &lt;artifactId&gt;onlab-osgi&lt;/artifactId&gt;\r\n            &lt;version&gt;2.7.0&lt;/version&gt;\r\n            &lt;scope&gt;provided&lt;/scope&gt;\r\n        &lt;/dependency&gt;\r\n    \r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.onosproject&lt;/groupId&gt;\r\n            &lt;artifactId&gt;onlab-misc&lt;/artifactId&gt;\r\n            &lt;version&gt;2.7.0&lt;/version&gt;\r\n            &lt;scope&gt;provided&lt;/scope&gt;\r\n        &lt;/dependency&gt;\r\n    \r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.onosproject&lt;/groupId&gt;\r\n            &lt;artifactId&gt;onos-api&lt;/artifactId&gt;\r\n            &lt;version&gt;2.7.0&lt;/version&gt;\r\n            &lt;scope&gt;test&lt;/scope&gt;\r\n            &lt;classifier&gt;tests&lt;/classifier&gt;\r\n        &lt;/dependency&gt;\r\n    &lt;/dependencies&gt;\r\n    \r\n    &lt;build&gt;\r\n        &lt;plugins&gt;\r\n    \r\n            &lt;plugin&gt;\r\n                &lt;groupId&gt;org.onosproject&lt;/groupId&gt;\r\n                &lt;artifactId&gt;onos-maven-plugin&lt;/artifactId&gt;\r\n            &lt;/plugin&gt;\r\n             &lt;plugin&gt;\r\n                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n                &lt;artifactId&gt;maven-checkstyle-plugin&lt;/artifactId&gt;\r\n                &lt;configuration&gt;\r\n                    &lt;skip&gt;true&lt;/skip&gt;\r\n                &lt;/configuration&gt;\r\n            &lt;/plugin&gt;\r\n            &lt;plugin&gt;\r\n                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n                &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\r\n                &lt;version&gt;3.8.1&lt;/version&gt;\r\n                &lt;configuration&gt;\r\n                    &lt;source&gt;17&lt;/source&gt;\r\n                    &lt;target&gt;17&lt;/target&gt;\r\n                &lt;/configuration&gt;\r\n            &lt;/plugin&gt;\r\n        &lt;/plugins&gt;\r\n    &lt;/build&gt;\r\n&lt;/project&gt;\r\n```\r\n\r\nThe AppComponent.java =\r\n\r\n```java\r\npackage org.foo.app;\r\n\r\nimport org.onosproject.cfg.ComponentConfigService;\r\nimport org.osgi.service.component.ComponentContext;\r\nimport org.osgi.service.component.annotations.Activate;\r\nimport org.osgi.service.component.annotations.Component;\r\nimport org.osgi.service.component.annotations.Deactivate;\r\nimport org.osgi.service.component.annotations.Modified;\r\nimport org.osgi.service.component.annotations.Reference;\r\nimport org.osgi.service.component.annotations.ReferenceCardinality;\r\nimport org.slf4j.Logger;\r\nimport org.slf4j.LoggerFactory;\r\n\r\nimport java.util.Dictionary;\r\nimport java.util.Properties;\r\n\r\nimport static org.onlab.util.Tools.get;\r\n\r\n/******\r\n* Skeletal ONOS application component.\r\n*/\r\n@Component(immediate = true,\r\nservice = {SomeInterface.class},\r\nproperty = {\r\n  &quot;someProperty=Some Default String Value&quot;,\r\n})\r\npublic class AppComponent implements SomeInterface {\r\n  private final Logger log = LoggerFactory.getLogger(getClass());\r\n\r\n  /** Some configurable property. */\r\n  private String someProperty;\r\n\r\n  @Reference(cardinality = ReferenceCardinality.MANDATORY)\r\n  protected ComponentConfigService cfgService;\r\n\r\n  @Activate\r\n  protected void activate() {\r\n  cfgService.registerProperties(getClass());\r\n  log.info(&quot;Started&quot;);\r\n  }\r\n\r\n  @Deactivate\r\n  protected void deactivate() {\r\n  cfgService.unregisterProperties(getClass(), false);\r\n  log.info(&quot;Stopped&quot;);\r\n  }\r\n\r\n  @Modified\r\n  public void modified(ComponentContext context) {\r\n  Dictionary\\&lt;?, ?\\&gt; properties = context != null ? context.getProperties() : new Properties();\r\n  if (context != null) {\r\n  someProperty = get(properties, &quot;someProperty&quot;);\r\n  }\r\n  log.info(&quot;Reconfigured&quot;);\r\n  }\r\n\r\n  @Override\r\n  public void someMethod() {\r\n  log.info(&quot;Invoked&quot;);\r\n  }\r\n}\r\n```\r\n\r\nThe error I get is like this =\r\n\r\n```none\r\nonur@staj2:~/Downloads/foo-app$ mvn compile \r\n[INFO] Scanning for projects...\r\n[INFO] \r\n[INFO] --------------------------&lt; org.foo:foo-app &gt;---------------------------\r\n[INFO] Building foo-app 1.0-SNAPSHOT\r\n[INFO]   from pom.xml\r\n[INFO] -------------------------------[ bundle ]-------------------------------\r\n[INFO] \r\n[INFO] --- enforcer:3.0.0-M2:enforce (enforce-maven) @ foo-app ---\r\n[INFO] \r\n[INFO] --- enforcer:3.0.0-M2:enforce (enforce-java) @ foo-app ---\r\n[INFO] \r\n[INFO] --- onos:2.4.0:swagger (swagger) @ foo-app ---\r\n[INFO] \r\n[INFO] --- onos:2.4.0:cfg (cfg) @ foo-app ---\r\n[INFO] Generating ONOS component configuration catalogues...\r\n[INFO] Processing property someProperty|STRING|Some Default String Value|Some configurable property. ...\r\n[INFO] \r\n[INFO] --- resources:3.1.0:resources (default-resources) @ foo-app ---\r\n[INFO] Using &#39;UTF-8&#39; encoding to copy filtered resources.\r\n[INFO] skip non existing resourceDirectory /home/onur/Downloads/foo-app/src/main/resources\r\n[INFO] \r\n[INFO] --- compiler:3.8.1:compile (default-compile) @ foo-app ---\r\n[INFO] Changes detected - recompiling the module!\r\n[INFO] Compiling 3 source files to /home/onur/Downloads/foo-app/target/classes\r\nAn exception has occurred in the compiler (17.0.8). Please file a bug against the Java compiler via the Java bug reporting page (https://bugreport.java.com) after checking the Bug Database (https://bugs.java.com) for duplicates. Include your program, the following diagnostic, and the parameters passed to the Java compiler in your report. Thank you.\r\njava.lang.IllegalAccessError: class com.google.errorprone.ErrorProneJavacPlugin (in unnamed module @0x120350eb) cannot access class com.sun.tools.javac.api.BasicJavacTask (in module jdk.compiler) because module jdk.compiler does not export com.sun.tools.javac.api to unnamed module @0x120350eb\r\n        at com.google.errorprone.ErrorProneJavacPlugin.init(ErrorProneJavacPlugin.java:38)\r\n        at jdk.compiler/com.sun.tools.javac.api.BasicJavacTask.initPlugin(BasicJavacTask.java:255)\r\n        at jdk.compiler/com.sun.tools.javac.api.BasicJavacTask.initPlugins(BasicJavacTask.java:229)\r\n        at jdk.compiler/com.sun.tools.javac.api.JavacTaskImpl.prepareCompiler(JavacTaskImpl.java:204)\r\n        at jdk.compiler/com.sun.tools.javac.api.JavacTaskImpl.lambda$doCall$0(JavacTaskImpl.java:101)\r\n        at jdk.compiler/com.sun.tools.javac.api.JavacTaskImpl.invocationHelper(JavacTaskImpl.java:152)\r\n        at jdk.compiler/com.sun.tools.javac.api.JavacTaskImpl.doCall(JavacTaskImpl.java:100)\r\n        at jdk.compiler/com.sun.tools.javac.api.JavacTaskImpl.call(JavacTaskImpl.java:94)\r\n        at org.codehaus.plexus.compiler.javac.JavaxToolsCompiler.compileInProcess(JavaxToolsCompiler.java:126)\r\n        at org.codehaus.plexus.compiler.javac.JavacCompiler.performCompile(JavacCompiler.java:174)\r\n        at org.apache.maven.plugin.compiler.AbstractCompilerMojo.execute(AbstractCompilerMojo.java:1134)\r\n        at org.apache.maven.plugin.compiler.CompilerMojo.execute(CompilerMojo.java:187)\r\n        at org.apache.maven.plugin.DefaultBuildPluginManager.executeMojo(DefaultBuildPluginManager.java:126)\r\n        at org.apache.maven.lifecycle.internal.MojoExecutor.doExecute2(MojoExecutor.java:328)\r\n        at org.apache.maven.lifecycle.internal.MojoExecutor.doExecute(MojoExecutor.java:316)\r\n        at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:212)\r\n        at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:174)\r\n        at org.apache.maven.lifecycle.internal.MojoExecutor.access$000(MojoExecutor.java:75)\r\n        at org.apache.maven.lifecycle.internal.MojoExecutor$1.run(MojoExecutor.java:162)\r\n        at org.apache.maven.plugin.DefaultMojosExecutionStrategy.execute(DefaultMojosExecutionStrategy.java:39)\r\n        at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:159)\r\n        at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject(LifecycleModuleBuilder.java:105)\r\n        at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject(LifecycleModuleBuilder.java:73)\r\n        at org.apache.maven.lifecycle.internal.builder.singlethreaded.SingleThreadedBuilder.build(SingleThreadedBuilder.java:53)\r\n        at org.apache.maven.lifecycle.internal.LifecycleStarter.execute(LifecycleStarter.java:118)\r\n        at org.apache.maven.DefaultMaven.doExecute(DefaultMaven.java:261)\r\n        at org.apache.maven.DefaultMaven.doExecute(DefaultMaven.java:173)\r\n        at org.apache.maven.DefaultMaven.execute(DefaultMaven.java:101)\r\n        at org.apache.maven.cli.MavenCli.execute(MavenCli.java:906)\r\n        at org.apache.maven.cli.MavenCli.doMain(MavenCli.java:283)\r\n        at org.apache.maven.cli.MavenCli.main(MavenCli.java:206)\r\n        at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n        at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)\r\n        at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n        at java.base/java.lang.reflect.Method.invoke(Method.java:568)\r\n        at org.codehaus.plexus.classworlds.launcher.Launcher.launchEnhanced(Launcher.java:283)\r\n        at org.codehaus.plexus.classworlds.launcher.Launcher.launch(Launcher.java:226)\r\n        at org.codehaus.plexus.classworlds.launcher.Launcher.mainWithExitCode(Launcher.java:407)\r\n        at org.codehaus.plexus.classworlds.launcher.Launcher.main(Launcher.java:348)\r\n[INFO] -------------------------------------------------------------\r\n[ERROR] COMPILATION ERROR : \r\n[INFO] -------------------------------------------------------------\r\n[ERROR] An unknown compilation problem occurred\r\n[INFO] 1 error\r\n[INFO] -------------------------------------------------------------\r\n[INFO] ------------------------------------------------------------------------\r\n[INFO] BUILD FAILURE\r\n[INFO] ------------------------------------------------------------------------\r\n[INFO] Total time:  2.257 s\r\n[INFO] Finished at: 2023-08-08T10:00:22+03:00\r\n[INFO] ------------------------------------------------------------------------\r\n[ERROR] Failed to execute goal org.apache.maven.plugins:maven-compiler-plugin:3.8.1:compile (default-compile) on project foo-app: Compilation failure\r\n[ERROR] An unknown compilation problem occurred\r\n[ERROR] \r\n[ERROR] -&gt; [Help 1]\r\n[ERROR] \r\n[ERROR] To see the full stack trace of the errors, re-run Maven with the -e switch.\r\n[ERROR] Re-run Maven using the -X switch to enable full debug logging.\r\n[ERROR] \r\n[ERROR] For more information about the errors and possible solutions, please read the following articles:\r\n[ERROR] [Help 1] http://cwiki.apache.org/confluence/display/MAVEN/MojoFailureException\r\n```\r\n\r\nPlease help to solve the errors, I&#39;ve been dealing with this for a long time, I couldn&#39;t find where I made a mistake.","title":"Errors creating Onos project with maven archetype","body":"<p>I used the following command and created a default Onos application = <code>mvn archetype:generate -DarchetypeGroupId=org.onosproject -DarchetypeArtifactId=onos-bundle-archetype -DarchetypeVersion=2.4.0 -DgroupId=com.example -DartifactId=onos-app -Dversion=1.0.0-SNAPSHOT</code></p>\n<p>This is pom.xml:</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n\n&lt;!--\n  ~ Copyright 2022 Open Networking Foundation\n  ~\n  ~ Licensed under the Apache License, Version 2.0 (the &quot;License&quot;);\n  ~ you may not use this file except in compliance with the License.\n  ~ You may obtain a copy of the License at\n  ~\n  ~     http://www.apache.org/licenses/LICENSE-2.0\n  ~\n  ~ Unless required by applicable law or agreed to in writing, software\n  ~ distributed under the License is distributed on an &quot;AS IS&quot; BASIS,\n  ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n  ~ See the License for the specific language governing permissions and\n  ~ limitations under the License.\n  --&gt;\n\n    4\\.0.0\n    \n    &lt;parent&gt;\n        &lt;groupId&gt;org.onosproject&lt;/groupId&gt;\n        &lt;artifactId&gt;onos-dependencies&lt;/artifactId&gt;\n        &lt;version&gt;2.7.0&lt;/version&gt;\n    &lt;/parent&gt;\n    \n    &lt;groupId&gt;org.foo&lt;/groupId&gt;\n    &lt;artifactId&gt;foo-app&lt;/artifactId&gt;\n    &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;\n    &lt;packaging&gt;bundle&lt;/packaging&gt;\n    \n    &lt;description&gt;ONOS OSGi bundle archetype&lt;/description&gt;\n    &lt;url&gt;http://onosproject.org&lt;/url&gt;\n    \n    &lt;properties&gt;\n        &lt;onos.app.name&gt;org.foo.app&lt;/onos.app.name&gt;\n        &lt;onos.app.title&gt;Foo App&lt;/onos.app.title&gt;\n        &lt;onos.app.origin&gt;Foo, Inc.&lt;/onos.app.origin&gt;\n        &lt;onos.app.category&gt;default&lt;/onos.app.category&gt;\n        &lt;onos.app.url&gt;http://onosproject.org&lt;/onos.app.url&gt;\n        &lt;onos.app.readme&gt;ONOS OSGi bundle archetype.&lt;/onos.app.readme&gt;\n    &lt;/properties&gt;\n    \n    &lt;dependencies&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.onosproject&lt;/groupId&gt;\n            &lt;artifactId&gt;onos-api&lt;/artifactId&gt;\n            &lt;version&gt;2.7.0&lt;/version&gt;\n            &lt;scope&gt;provided&lt;/scope&gt;\n        &lt;/dependency&gt;\n    \n        &lt;dependency&gt;\n            &lt;groupId&gt;org.onosproject&lt;/groupId&gt;\n            &lt;artifactId&gt;onlab-osgi&lt;/artifactId&gt;\n            &lt;version&gt;2.7.0&lt;/version&gt;\n            &lt;scope&gt;provided&lt;/scope&gt;\n        &lt;/dependency&gt;\n    \n        &lt;dependency&gt;\n            &lt;groupId&gt;org.onosproject&lt;/groupId&gt;\n            &lt;artifactId&gt;onlab-misc&lt;/artifactId&gt;\n            &lt;version&gt;2.7.0&lt;/version&gt;\n            &lt;scope&gt;provided&lt;/scope&gt;\n        &lt;/dependency&gt;\n    \n        &lt;dependency&gt;\n            &lt;groupId&gt;org.onosproject&lt;/groupId&gt;\n            &lt;artifactId&gt;onos-api&lt;/artifactId&gt;\n            &lt;version&gt;2.7.0&lt;/version&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n            &lt;classifier&gt;tests&lt;/classifier&gt;\n        &lt;/dependency&gt;\n    &lt;/dependencies&gt;\n    \n    &lt;build&gt;\n        &lt;plugins&gt;\n    \n            &lt;plugin&gt;\n                &lt;groupId&gt;org.onosproject&lt;/groupId&gt;\n                &lt;artifactId&gt;onos-maven-plugin&lt;/artifactId&gt;\n            &lt;/plugin&gt;\n             &lt;plugin&gt;\n                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n                &lt;artifactId&gt;maven-checkstyle-plugin&lt;/artifactId&gt;\n                &lt;configuration&gt;\n                    &lt;skip&gt;true&lt;/skip&gt;\n                &lt;/configuration&gt;\n            &lt;/plugin&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n                &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\n                &lt;version&gt;3.8.1&lt;/version&gt;\n                &lt;configuration&gt;\n                    &lt;source&gt;17&lt;/source&gt;\n                    &lt;target&gt;17&lt;/target&gt;\n                &lt;/configuration&gt;\n            &lt;/plugin&gt;\n        &lt;/plugins&gt;\n    &lt;/build&gt;\n&lt;/project&gt;\n</code></pre>\n<p>The AppComponent.java =</p>\n<pre class=\"lang-java prettyprint-override\"><code>package org.foo.app;\n\nimport org.onosproject.cfg.ComponentConfigService;\nimport org.osgi.service.component.ComponentContext;\nimport org.osgi.service.component.annotations.Activate;\nimport org.osgi.service.component.annotations.Component;\nimport org.osgi.service.component.annotations.Deactivate;\nimport org.osgi.service.component.annotations.Modified;\nimport org.osgi.service.component.annotations.Reference;\nimport org.osgi.service.component.annotations.ReferenceCardinality;\nimport org.slf4j.Logger;\nimport org.slf4j.LoggerFactory;\n\nimport java.util.Dictionary;\nimport java.util.Properties;\n\nimport static org.onlab.util.Tools.get;\n\n/******\n* Skeletal ONOS application component.\n*/\n@Component(immediate = true,\nservice = {SomeInterface.class},\nproperty = {\n  &quot;someProperty=Some Default String Value&quot;,\n})\npublic class AppComponent implements SomeInterface {\n  private final Logger log = LoggerFactory.getLogger(getClass());\n\n  /** Some configurable property. */\n  private String someProperty;\n\n  @Reference(cardinality = ReferenceCardinality.MANDATORY)\n  protected ComponentConfigService cfgService;\n\n  @Activate\n  protected void activate() {\n  cfgService.registerProperties(getClass());\n  log.info(&quot;Started&quot;);\n  }\n\n  @Deactivate\n  protected void deactivate() {\n  cfgService.unregisterProperties(getClass(), false);\n  log.info(&quot;Stopped&quot;);\n  }\n\n  @Modified\n  public void modified(ComponentContext context) {\n  Dictionary\\&lt;?, ?\\&gt; properties = context != null ? context.getProperties() : new Properties();\n  if (context != null) {\n  someProperty = get(properties, &quot;someProperty&quot;);\n  }\n  log.info(&quot;Reconfigured&quot;);\n  }\n\n  @Override\n  public void someMethod() {\n  log.info(&quot;Invoked&quot;);\n  }\n}\n</code></pre>\n<p>The error I get is like this =</p>\n<pre class=\"lang-none prettyprint-override\"><code>onur@staj2:~/Downloads/foo-app$ mvn compile \n[INFO] Scanning for projects...\n[INFO] \n[INFO] --------------------------&lt; org.foo:foo-app &gt;---------------------------\n[INFO] Building foo-app 1.0-SNAPSHOT\n[INFO]   from pom.xml\n[INFO] -------------------------------[ bundle ]-------------------------------\n[INFO] \n[INFO] --- enforcer:3.0.0-M2:enforce (enforce-maven) @ foo-app ---\n[INFO] \n[INFO] --- enforcer:3.0.0-M2:enforce (enforce-java) @ foo-app ---\n[INFO] \n[INFO] --- onos:2.4.0:swagger (swagger) @ foo-app ---\n[INFO] \n[INFO] --- onos:2.4.0:cfg (cfg) @ foo-app ---\n[INFO] Generating ONOS component configuration catalogues...\n[INFO] Processing property someProperty|STRING|Some Default String Value|Some configurable property. ...\n[INFO] \n[INFO] --- resources:3.1.0:resources (default-resources) @ foo-app ---\n[INFO] Using 'UTF-8' encoding to copy filtered resources.\n[INFO] skip non existing resourceDirectory /home/onur/Downloads/foo-app/src/main/resources\n[INFO] \n[INFO] --- compiler:3.8.1:compile (default-compile) @ foo-app ---\n[INFO] Changes detected - recompiling the module!\n[INFO] Compiling 3 source files to /home/onur/Downloads/foo-app/target/classes\nAn exception has occurred in the compiler (17.0.8). Please file a bug against the Java compiler via the Java bug reporting page (https://bugreport.java.com) after checking the Bug Database (https://bugs.java.com) for duplicates. Include your program, the following diagnostic, and the parameters passed to the Java compiler in your report. Thank you.\njava.lang.IllegalAccessError: class com.google.errorprone.ErrorProneJavacPlugin (in unnamed module @0x120350eb) cannot access class com.sun.tools.javac.api.BasicJavacTask (in module jdk.compiler) because module jdk.compiler does not export com.sun.tools.javac.api to unnamed module @0x120350eb\n        at com.google.errorprone.ErrorProneJavacPlugin.init(ErrorProneJavacPlugin.java:38)\n        at jdk.compiler/com.sun.tools.javac.api.BasicJavacTask.initPlugin(BasicJavacTask.java:255)\n        at jdk.compiler/com.sun.tools.javac.api.BasicJavacTask.initPlugins(BasicJavacTask.java:229)\n        at jdk.compiler/com.sun.tools.javac.api.JavacTaskImpl.prepareCompiler(JavacTaskImpl.java:204)\n        at jdk.compiler/com.sun.tools.javac.api.JavacTaskImpl.lambda$doCall$0(JavacTaskImpl.java:101)\n        at jdk.compiler/com.sun.tools.javac.api.JavacTaskImpl.invocationHelper(JavacTaskImpl.java:152)\n        at jdk.compiler/com.sun.tools.javac.api.JavacTaskImpl.doCall(JavacTaskImpl.java:100)\n        at jdk.compiler/com.sun.tools.javac.api.JavacTaskImpl.call(JavacTaskImpl.java:94)\n        at org.codehaus.plexus.compiler.javac.JavaxToolsCompiler.compileInProcess(JavaxToolsCompiler.java:126)\n        at org.codehaus.plexus.compiler.javac.JavacCompiler.performCompile(JavacCompiler.java:174)\n        at org.apache.maven.plugin.compiler.AbstractCompilerMojo.execute(AbstractCompilerMojo.java:1134)\n        at org.apache.maven.plugin.compiler.CompilerMojo.execute(CompilerMojo.java:187)\n        at org.apache.maven.plugin.DefaultBuildPluginManager.executeMojo(DefaultBuildPluginManager.java:126)\n        at org.apache.maven.lifecycle.internal.MojoExecutor.doExecute2(MojoExecutor.java:328)\n        at org.apache.maven.lifecycle.internal.MojoExecutor.doExecute(MojoExecutor.java:316)\n        at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:212)\n        at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:174)\n        at org.apache.maven.lifecycle.internal.MojoExecutor.access$000(MojoExecutor.java:75)\n        at org.apache.maven.lifecycle.internal.MojoExecutor$1.run(MojoExecutor.java:162)\n        at org.apache.maven.plugin.DefaultMojosExecutionStrategy.execute(DefaultMojosExecutionStrategy.java:39)\n        at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:159)\n        at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject(LifecycleModuleBuilder.java:105)\n        at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject(LifecycleModuleBuilder.java:73)\n        at org.apache.maven.lifecycle.internal.builder.singlethreaded.SingleThreadedBuilder.build(SingleThreadedBuilder.java:53)\n        at org.apache.maven.lifecycle.internal.LifecycleStarter.execute(LifecycleStarter.java:118)\n        at org.apache.maven.DefaultMaven.doExecute(DefaultMaven.java:261)\n        at org.apache.maven.DefaultMaven.doExecute(DefaultMaven.java:173)\n        at org.apache.maven.DefaultMaven.execute(DefaultMaven.java:101)\n        at org.apache.maven.cli.MavenCli.execute(MavenCli.java:906)\n        at org.apache.maven.cli.MavenCli.doMain(MavenCli.java:283)\n        at org.apache.maven.cli.MavenCli.main(MavenCli.java:206)\n        at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n        at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)\n        at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n        at java.base/java.lang.reflect.Method.invoke(Method.java:568)\n        at org.codehaus.plexus.classworlds.launcher.Launcher.launchEnhanced(Launcher.java:283)\n        at org.codehaus.plexus.classworlds.launcher.Launcher.launch(Launcher.java:226)\n        at org.codehaus.plexus.classworlds.launcher.Launcher.mainWithExitCode(Launcher.java:407)\n        at org.codehaus.plexus.classworlds.launcher.Launcher.main(Launcher.java:348)\n[INFO] -------------------------------------------------------------\n[ERROR] COMPILATION ERROR : \n[INFO] -------------------------------------------------------------\n[ERROR] An unknown compilation problem occurred\n[INFO] 1 error\n[INFO] -------------------------------------------------------------\n[INFO] ------------------------------------------------------------------------\n[INFO] BUILD FAILURE\n[INFO] ------------------------------------------------------------------------\n[INFO] Total time:  2.257 s\n[INFO] Finished at: 2023-08-08T10:00:22+03:00\n[INFO] ------------------------------------------------------------------------\n[ERROR] Failed to execute goal org.apache.maven.plugins:maven-compiler-plugin:3.8.1:compile (default-compile) on project foo-app: Compilation failure\n[ERROR] An unknown compilation problem occurred\n[ERROR] \n[ERROR] -&gt; [Help 1]\n[ERROR] \n[ERROR] To see the full stack trace of the errors, re-run Maven with the -e switch.\n[ERROR] Re-run Maven using the -X switch to enable full debug logging.\n[ERROR] \n[ERROR] For more information about the errors and possible solutions, please read the following articles:\n[ERROR] [Help 1] http://cwiki.apache.org/confluence/display/MAVEN/MojoFailureException\n</code></pre>\n<p>Please help to solve the errors, I've been dealing with this for a long time, I couldn't find where I made a mistake.</p>\n"},{"tags":["java","junit","aem","sling"],"comments":[{"owner":{"account_id":1503775,"reputation":18065,"user_id":1407656,"accept_rate":81,"display_name":"toniedzwiedz"},"score":1,"creation_date":1605602329,"post_id":64867814,"comment_id":114693548,"body_markdown":"Can you post the code of your model, as well as the JSON document you&#39;re loading into the test AEM Context? This could be a simple property name mismatch but it&#39;s difficult to say without seeing the line where the NPE occurs.","body":"Can you post the code of your model, as well as the JSON document you&#39;re loading into the test AEM Context? This could be a simple property name mismatch but it&#39;s difficult to say without seeing the line where the NPE occurs."}],"answers":[{"tags":[],"owner":{"account_id":11074819,"reputation":1673,"user_id":8131885,"display_name":"Alexander Berndt"},"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1605827955,"creation_date":1605827955,"answer_id":64921484,"question_id":64867814,"body_markdown":"It seems that `resource.adaptTo(CtaModel.class)` returned null. The problem is, that adaptTo(...) returns null very silently, if anything fails. Therefore the SlingMocks documentation recommends `ModelFactory.createModel(...)` instead of `adaptTo(...)` for SlingModels.\r\n\r\nhttps://sling.apache.org/documentation/development/sling-mock.html#model-instantiation\r\n\r\n\r\n    // load some content into the mocked repo\r\n    context.load().json(..., &quot;/resource1&quot;);\r\n\r\n    // load resource\r\n    Resource myResource = content.resourceResolver().getResource(&quot;/resource1&quot;);\r\n\r\n    // instantiate Sling Model (adaptable via Resource)\r\n    // this will throw exceptions if model cannot be instantiated\r\n    MyModel myModel = context.getService(ModelFactory.class).createModel(myResource, MyModel.class);\r\n\r\nIf you doing this, the ModelFactory will log error-details, why the Sling model couldn&#39;t be created. So you know, what the problem is, and you don&#39;t need to guess.\r\n","title":"&quot;resource.adaptTo&quot; NullPointer Unit test AEM Sling Model Java","body":"<p>It seems that <code>resource.adaptTo(CtaModel.class)</code> returned null. The problem is, that adaptTo(...) returns null very silently, if anything fails. Therefore the SlingMocks documentation recommends <code>ModelFactory.createModel(...)</code> instead of <code>adaptTo(...)</code> for SlingModels.</p>\n<p><a href=\"https://sling.apache.org/documentation/development/sling-mock.html#model-instantiation\" rel=\"nofollow noreferrer\">https://sling.apache.org/documentation/development/sling-mock.html#model-instantiation</a></p>\n<pre><code>// load some content into the mocked repo\ncontext.load().json(..., &quot;/resource1&quot;);\n\n// load resource\nResource myResource = content.resourceResolver().getResource(&quot;/resource1&quot;);\n\n// instantiate Sling Model (adaptable via Resource)\n// this will throw exceptions if model cannot be instantiated\nMyModel myModel = context.getService(ModelFactory.class).createModel(myResource, MyModel.class);\n</code></pre>\n<p>If you doing this, the ModelFactory will log error-details, why the Sling model couldn't be created. So you know, what the problem is, and you don't need to guess.</p>\n"},{"tags":[],"owner":{"account_id":21650064,"reputation":1,"user_id":15970843,"display_name":"Yogesh Mahajan"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1621422509,"creation_date":1621422509,"answer_id":67602066,"question_id":64867814,"body_markdown":"If there are issues with init method, specially if any object injected like currentPage or services are null, then model will return null silently even when createModel is used. \r\n\r\nhttps://myaemlearnings.blogspot.com/2020/08/unit-testing-in-aem-debugging-issues-in.html","title":"&quot;resource.adaptTo&quot; NullPointer Unit test AEM Sling Model Java","body":"<p>If there are issues with init method, specially if any object injected like currentPage or services are null, then model will return null silently even when createModel is used.</p>\n<p><a href=\"https://myaemlearnings.blogspot.com/2020/08/unit-testing-in-aem-debugging-issues-in.html\" rel=\"nofollow noreferrer\">https://myaemlearnings.blogspot.com/2020/08/unit-testing-in-aem-debugging-issues-in.html</a></p>\n"},{"tags":[],"owner":{"account_id":13004250,"reputation":1,"user_id":9399316,"display_name":"Luis Felix"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691589695,"creation_date":1691521799,"answer_id":76862559,"question_id":64867814,"body_markdown":"Make sure that you have defined  your\r\n\r\n`defaultInjectionStrategy = DefaultInjectionStrategy.OPTIONAL`\r\n\r\n in your model&#39;s configurations. This resolved the issue for me pretty quickly\r\n\r\n\r\n```\r\n@Model(\r\n    adaptables = SlingHttpServletRequest.class,\r\n    adapters = {MyModel.class, ComponentExporter.class},\r\n    resourceType = MyModelImpl.RESOURCE_TYPE,\r\n    defaultInjectionStrategy = DefaultInjectionStrategy.OPTIONAL\r\n)\r\n@Exporter(\r\n    name = ExporterConstants.SLING_MODEL_EXPORTER_NAME,\r\n    extensions = ExporterConstants.SLING_MODEL_EXTENSION\r\n)\r\npublic class MyModelnImpl extends AbstractComponentImpl implements MyModel{\r\n```","title":"&quot;resource.adaptTo&quot; NullPointer Unit test AEM Sling Model Java","body":"<p>Make sure that you have defined  your</p>\n<p><code>defaultInjectionStrategy = DefaultInjectionStrategy.OPTIONAL</code></p>\n<p>in your model's configurations. This resolved the issue for me pretty quickly</p>\n<pre><code>@Model(\n    adaptables = SlingHttpServletRequest.class,\n    adapters = {MyModel.class, ComponentExporter.class},\n    resourceType = MyModelImpl.RESOURCE_TYPE,\n    defaultInjectionStrategy = DefaultInjectionStrategy.OPTIONAL\n)\n@Exporter(\n    name = ExporterConstants.SLING_MODEL_EXPORTER_NAME,\n    extensions = ExporterConstants.SLING_MODEL_EXTENSION\n)\npublic class MyModelnImpl extends AbstractComponentImpl implements MyModel{\n</code></pre>\n"}],"owner":{"account_id":4280077,"reputation":621,"user_id":10399628,"display_name":"e-israel"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":6637,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"accepted_answer_id":64921484,"answer_count":3,"score":3,"last_activity_date":1691589695,"creation_date":1605574181,"question_id":64867814,"body_markdown":"I&#39;m doing a pretty basic Unit test for **Sling Model** in **AEM**, so, when I run the test I get the following error:\r\n\r\n&gt; [ERROR]   CtaModelTest.testGetText:36 NullPointer\r\n\r\nThis is my Java code, the Model is a very basic Sling AEM Model, I&#39;m using the `@ModelAnnotation` as follow:\r\n\r\n```java\r\n@Model(adaptables = SlingHttpServletRequest.class, defaultInjectionStrategy = DefaultInjectionStrategy.OPTIONAL)\r\n```\r\n\r\n```java\r\npackage com.myproject.core.models;\r\nimport org.apache.commons.lang3.StringUtils;\r\nimport org.apache.sling.api.resource.Resource;\r\nimport org.junit.jupiter.api.BeforeEach;\r\nimport org.junit.jupiter.api.Test;\r\nimport org.junit.jupiter.api.extension.ExtendWith;\r\nimport com.day.cq.wcm.api.Page;\r\nimport io.wcm.testing.mock.aem.junit5.AemContext;\r\nimport io.wcm.testing.mock.aem.junit5.AemContextExtension;\r\nimport static org.junit.jupiter.api.Assertions.assertNotNull;\r\nimport static org.junit.jupiter.api.Assertions.assertTrue;\r\nimport junitx.util.PrivateAccessor;\r\nimport javax.inject.Inject;\r\n\r\n@ExtendWith(AemContextExtension.class)\r\nclass CtaModelTest {\r\n\tprivate static final String COMPONENT_PATH = &quot;/content/campaigns/myproject/master/demo-campaign/demo-email&quot;;\r\n\t\r\n    private CtaModel ctaModel;\r\n\r\n    private Page page;\r\n    private Resource resource;\r\n\r\n    @BeforeEach\r\n    public void setup(AemContext context) throws Exception {\r\n    \t\r\n    \tcontext.load().json(&quot;/ctaModelTest.json&quot;, COMPONENT_PATH);\r\n\t\tcontext.addModelsForClasses(CtaModel.class);\r\n\t\t\r\n\t\tresource = context.resourceResolver().getResource(COMPONENT_PATH + &quot;/jcr:content/par/hero/cta&quot;);\r\n\t\tctaModel = resource.adaptTo(CtaModel.class);\r\n    }\r\n\r\n    @Test\r\n    void testGetText() throws Exception {\r\n\t\tString txt = ctaModel.getText();\r\n        assertNotNull(txt);\r\n    }\r\n}\r\n\r\n```\r\n\r\nCan anyone help me to fix it?","title":"&quot;resource.adaptTo&quot; NullPointer Unit test AEM Sling Model Java","body":"<p>I'm doing a pretty basic Unit test for <strong>Sling Model</strong> in <strong>AEM</strong>, so, when I run the test I get the following error:</p>\n<blockquote>\n<p>[ERROR]   CtaModelTest.testGetText:36 NullPointer</p>\n</blockquote>\n<p>This is my Java code, the Model is a very basic Sling AEM Model, I'm using the <code>@ModelAnnotation</code> as follow:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Model(adaptables = SlingHttpServletRequest.class, defaultInjectionStrategy = DefaultInjectionStrategy.OPTIONAL)\n</code></pre>\n<pre class=\"lang-java prettyprint-override\"><code>package com.myproject.core.models;\nimport org.apache.commons.lang3.StringUtils;\nimport org.apache.sling.api.resource.Resource;\nimport org.junit.jupiter.api.BeforeEach;\nimport org.junit.jupiter.api.Test;\nimport org.junit.jupiter.api.extension.ExtendWith;\nimport com.day.cq.wcm.api.Page;\nimport io.wcm.testing.mock.aem.junit5.AemContext;\nimport io.wcm.testing.mock.aem.junit5.AemContextExtension;\nimport static org.junit.jupiter.api.Assertions.assertNotNull;\nimport static org.junit.jupiter.api.Assertions.assertTrue;\nimport junitx.util.PrivateAccessor;\nimport javax.inject.Inject;\n\n@ExtendWith(AemContextExtension.class)\nclass CtaModelTest {\n    private static final String COMPONENT_PATH = &quot;/content/campaigns/myproject/master/demo-campaign/demo-email&quot;;\n    \n    private CtaModel ctaModel;\n\n    private Page page;\n    private Resource resource;\n\n    @BeforeEach\n    public void setup(AemContext context) throws Exception {\n        \n        context.load().json(&quot;/ctaModelTest.json&quot;, COMPONENT_PATH);\n        context.addModelsForClasses(CtaModel.class);\n        \n        resource = context.resourceResolver().getResource(COMPONENT_PATH + &quot;/jcr:content/par/hero/cta&quot;);\n        ctaModel = resource.adaptTo(CtaModel.class);\n    }\n\n    @Test\n    void testGetText() throws Exception {\n        String txt = ctaModel.getText();\n        assertNotNull(txt);\n    }\n}\n\n</code></pre>\n<p>Can anyone help me to fix it?</p>\n"},{"tags":["java","multithreading","performance"],"comments":[{"owner":{"account_id":6520,"reputation":10523,"user_id":11002,"accept_rate":75,"display_name":"tgdavies"},"score":2,"creation_date":1691587103,"post_id":76868087,"comment_id":135511639,"body_markdown":"On JDK 20 this program fails with: `Exception in thread &quot;main&quot; java.lang.IllegalArgumentException at java.base/java.util.concurrent.ThreadPoolExecutor.setCorePoolSize(ThreadPoolExecutor.java:1561) at com.example.demo.PoolTest.main(PoolTest.java:20)` because the argument to setCorePoolSize` is more than the `maximumPoolSize`","body":"On JDK 20 this program fails with: <code>Exception in thread &quot;main&quot; java.lang.IllegalArgumentException at java.base&#47;java.util.concurrent.ThreadPoolExecutor.setCorePoo&zwnj;&#8203;lSize(ThreadPoolExec&zwnj;&#8203;utor.java:1561) at com.example.demo.PoolTest.main(PoolTest.java:20)</code> because the argument to setCorePoolSize` is more than the <code>maximumPoolSize</code>"},{"owner":{"account_id":6520,"reputation":10523,"user_id":11002,"accept_rate":75,"display_name":"tgdavies"},"score":1,"creation_date":1691588210,"post_id":76868087,"comment_id":135511918,"body_markdown":"If you use `Executors.newFixedThreadPool(4)` you get the expected behaviour. Which JDK are you running with?","body":"If you use <code>Executors.newFixedThreadPool(4)</code> you get the expected behaviour. Which JDK are you running with?"},{"owner":{"account_id":10212015,"reputation":1812,"user_id":7538821,"accept_rate":100,"display_name":"sam"},"score":0,"creation_date":1691588420,"post_id":76868087,"comment_id":135511963,"body_markdown":"yes @tgdavies . Setting the initial size of ThreadPoolExecutor to 4 does eliminate the issue. I am using OpenJDK by Zulu build 1.8.0_362-b09","body":"yes @tgdavies . Setting the initial size of ThreadPoolExecutor to 4 does eliminate the issue. I am using OpenJDK by Zulu build 1.8.0_362-b09"},{"owner":{"account_id":3211603,"reputation":289297,"user_id":2711488,"display_name":"Holger"},"score":2,"creation_date":1692792966,"post_id":76868087,"comment_id":135672055,"body_markdown":"Side note: this use of `AtomicInteger` is entirely obsolete. You could achieve the same result by simply passing `i` as first argument to the `task(…)` call. Besides that, the documentation of `Executors.newFixedThreadPool` does not say anywhere that you can assume the return value to be an instance of `ThreadPoolExecutor` to begin with. If you want a configurable thread pool, do not use a factory method even having “fixed” in its name. Instantiate a `ThreadPoolExecutor` explicitly.","body":"Side note: this use of <code>AtomicInteger</code> is entirely obsolete. You could achieve the same result by simply passing <code>i</code> as first argument to the <code>task(…)</code> call. Besides that, the documentation of <code>Executors.newFixedThreadPool</code> does not say anywhere that you can assume the return value to be an instance of <code>ThreadPoolExecutor</code> to begin with. If you want a configurable thread pool, do not use a factory method even having “fixed” in its name. Instantiate a <code>ThreadPoolExecutor</code> explicitly."}],"answers":[{"tags":[],"owner":{"account_id":1692034,"reputation":3196,"user_id":1554195,"display_name":"tquadrat"},"down_vote_count":2,"up_vote_count":0,"is_accepted":false,"score":-2,"last_activity_date":1691588731,"creation_date":1691587454,"answer_id":76868223,"question_id":76868087,"body_markdown":"You are on a wrong track, completely.\r\n\r\n```Java\r\nString log = &quot;Thread: &quot; + count +\r\n             &quot;,  Start: &quot; + start +\r\n             &quot;,  Stop: &quot; + end +\r\n             &quot;,  ActiveCount: &quot; + threadPoolExecutor.getActiveCount() +\r\n             &quot;,  CorePoolSize: &quot; + threadPoolExecutor.getCorePoolSize();\r\nSystem.out.println(log);\r\n```\r\n\r\nThat snippet above is from inside your method `task()`. It displays something like\r\n\r\n```shell\r\nThread: 5,  Start: 18:27:12.488,  Stop: 18:27:17.491,  ActiveCount: 1,  CorePoolSize: 4\r\n```\r\n\r\nBut the value of &quot;Thread&quot; is not the thread count or number, but the number of the Task (more precise, of the `Runnable` returned by `task()`). Meaning that your code does not tell you anything about the running threads.\r\n\r\nYour statement\r\n\r\n&gt; In the above program, you will see the 10 Threads being executed\r\n\r\nis wrong. Because the code is in `task()`, it shows just that this method is executed, but nothing about threads.\r\n\r\nYou forgot that during its lifetime a `Thread` from a pool can execute multiple `Runnable` instances, one after the other. That&#39;s why you have a pool. Refer to [the Javadoc for `Executor`][1] that describes the intention of the `ExecutorService`.\r\n\r\n  [1]: https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/concurrent/Executor.html","title":"ThreadPoolExecutor executing in single thread even though corePoolSize is set more","body":"<p>You are on a wrong track, completely.</p>\n<pre><code>String log = &quot;Thread: &quot; + count +\n             &quot;,  Start: &quot; + start +\n             &quot;,  Stop: &quot; + end +\n             &quot;,  ActiveCount: &quot; + threadPoolExecutor.getActiveCount() +\n             &quot;,  CorePoolSize: &quot; + threadPoolExecutor.getCorePoolSize();\nSystem.out.println(log);\n</code></pre>\n<p>That snippet above is from inside your method <code>task()</code>. It displays something like</p>\n<pre class=\"lang-bash prettyprint-override\"><code>Thread: 5,  Start: 18:27:12.488,  Stop: 18:27:17.491,  ActiveCount: 1,  CorePoolSize: 4\n</code></pre>\n<p>But the value of &quot;Thread&quot; is not the thread count or number, but the number of the Task (more precise, of the <code>Runnable</code> returned by <code>task()</code>). Meaning that your code does not tell you anything about the running threads.</p>\n<p>Your statement</p>\n<blockquote>\n<p>In the above program, you will see the 10 Threads being executed</p>\n</blockquote>\n<p>is wrong. Because the code is in <code>task()</code>, it shows just that this method is executed, but nothing about threads.</p>\n<p>You forgot that during its lifetime a <code>Thread</code> from a pool can execute multiple <code>Runnable</code> instances, one after the other. That's why you have a pool. Refer to <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/concurrent/Executor.html\" rel=\"nofollow noreferrer\">the Javadoc for <code>Executor</code></a> that describes the intention of the <code>ExecutorService</code>.</p>\n"},{"tags":[],"owner":{"account_id":10212015,"reputation":1812,"user_id":7538821,"accept_rate":100,"display_name":"sam"},"down_vote_count":1,"up_vote_count":0,"is_accepted":true,"score":-1,"last_activity_date":1691589510,"creation_date":1691589510,"answer_id":76868499,"question_id":76868087,"body_markdown":"I am answering my question. Thanks to @tgdavies for providing the exception thrown in JDK 20. The solution is to increase the maxPoolSize.\r\n\r\nAfter setting the maxPoolSize to something like\r\n```java\r\nthreadPoolExecutor.setMaximumPoolSize(Runtime.getRuntime().availableProcessors());\r\n```\r\nThings are executing parallely.","title":"ThreadPoolExecutor executing in single thread even though corePoolSize is set more","body":"<p>I am answering my question. Thanks to @tgdavies for providing the exception thrown in JDK 20. The solution is to increase the maxPoolSize.</p>\n<p>After setting the maxPoolSize to something like</p>\n<pre class=\"lang-java prettyprint-override\"><code>threadPoolExecutor.setMaximumPoolSize(Runtime.getRuntime().availableProcessors());\n</code></pre>\n<p>Things are executing parallely.</p>\n"}],"owner":{"account_id":10212015,"reputation":1812,"user_id":7538821,"accept_rate":100,"display_name":"sam"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":56,"favorite_count":0,"down_vote_count":2,"up_vote_count":1,"accepted_answer_id":76868499,"answer_count":2,"score":-1,"last_activity_date":1691589510,"creation_date":1691586310,"question_id":76868087,"body_markdown":"My problem is related to the executor returned by `Executors.newFixedThreadPool(1)` which is explained after the following program:\r\n\r\n```java\r\npublic static void main(String[] args) throws InterruptedException {\r\n    AtomicInteger atomicInteger = new AtomicInteger(0);\r\n    ThreadPoolExecutor threadPoolExecutor = (ThreadPoolExecutor) Executors.newFixedThreadPool(1);\r\n    List&lt;Runnable&gt; runnableList = new ArrayList&lt;&gt;();\r\n    for (int i = 0; i &lt; 10; i++) {\r\n        runnableList.add(task(atomicInteger.incrementAndGet(), threadPoolExecutor));\r\n    }\r\n    System.out.println(&quot;Starting Stage-1.&quot;);\r\n    threadPoolExecutor.setCorePoolSize(4);\r\n    runnableList.forEach(threadPoolExecutor::execute);\r\n\r\n    waitForCompletion(threadPoolExecutor);\r\n    System.out.println(&quot;Stage-1 complete.&quot;);\r\n\r\n    threadPoolExecutor.setCorePoolSize(0);\r\n    TimeUnit.SECONDS.sleep(10);\r\n\r\n    System.out.println(&quot;Starting Stage-2.&quot;);\r\n    threadPoolExecutor.setCorePoolSize(6);\r\n    runnableList.forEach(threadPoolExecutor::execute);\r\n\r\n    waitForCompletion(threadPoolExecutor);\r\n    System.out.println(&quot;Stage-2 complete.&quot;);\r\n    threadPoolExecutor.shutdown();\r\n}\r\n\r\nstatic Runnable task(int count, ThreadPoolExecutor threadPoolExecutor) {\r\n    return () -&gt; {\r\n        LocalTime start;\r\n        LocalTime end;\r\n        try {\r\n            start = LocalTime.now();\r\n            TimeUnit.SECONDS.sleep(5);\r\n            end = LocalTime.now();\r\n        } catch (InterruptedException e) {\r\n            throw new RuntimeException(e);\r\n        }\r\n\r\n        String log = &quot;Thread: &quot; + count +\r\n                &quot;,  Start: &quot; + start +\r\n                &quot;,  Stop: &quot; + end +\r\n                &quot;,  ActiveCount: &quot; + threadPoolExecutor.getActiveCount() +\r\n                &quot;,  CorePoolSize: &quot; + threadPoolExecutor.getCorePoolSize();\r\n        System.out.println(log);\r\n    };\r\n}\r\n\r\nstatic void waitForCompletion(ThreadPoolExecutor threadPoolExecutor) throws InterruptedException {\r\n    while (threadPoolExecutor.getActiveCount() != 0) {\r\n        TimeUnit.SECONDS.sleep(5);\r\n    }\r\n}\r\n```\r\n\r\nOutput:\r\n\r\n```\r\nStarting Stage-1.\r\nThread: 2,  Start: 18:27:07.482,  Stop: 18:27:12.487,  ActiveCount: 4,  CorePoolSize: 4\r\nThread: 3,  Start: 18:27:07.482,  Stop: 18:27:12.487,  ActiveCount: 4,  CorePoolSize: 4\r\nThread: 1,  Start: 18:27:07.482,  Stop: 18:27:12.487,  ActiveCount: 4,  CorePoolSize: 4\r\nThread: 4,  Start: 18:27:07.482,  Stop: 18:27:12.487,  ActiveCount: 4,  CorePoolSize: 4\r\nThread: 5,  Start: 18:27:12.488,  Stop: 18:27:17.491,  ActiveCount: 1,  CorePoolSize: 4\r\nThread: 6,  Start: 18:27:17.492,  Stop: 18:27:22.497,  ActiveCount: 1,  CorePoolSize: 4\r\nThread: 7,  Start: 18:27:22.497,  Stop: 18:27:27.502,  ActiveCount: 1,  CorePoolSize: 4\r\nThread: 8,  Start: 18:27:27.502,  Stop: 18:27:32.506,  ActiveCount: 1,  CorePoolSize: 4\r\nThread: 9,  Start: 18:27:32.506,  Stop: 18:27:37.512,  ActiveCount: 1,  CorePoolSize: 4\r\nThread: 10,  Start: 18:27:37.512,  Stop: 18:27:42.515,  ActiveCount: 1,  CorePoolSize: 4\r\nStage-1 complete.\r\nStarting Stage-2.\r\nThread: 3,  Start: 18:27:57.504,  Stop: 18:28:02.506,  ActiveCount: 6,  CorePoolSize: 6\r\nThread: 5,  Start: 18:27:57.504,  Stop: 18:28:02.506,  ActiveCount: 6,  CorePoolSize: 6\r\nThread: 6,  Start: 18:27:57.504,  Stop: 18:28:02.506,  ActiveCount: 5,  CorePoolSize: 6\r\nThread: 4,  Start: 18:27:57.504,  Stop: 18:28:02.506,  ActiveCount: 3,  CorePoolSize: 6\r\nThread: 2,  Start: 18:27:57.504,  Stop: 18:28:02.506,  ActiveCount: 3,  CorePoolSize: 6\r\nThread: 1,  Start: 18:27:57.504,  Stop: 18:28:02.506,  ActiveCount: 1,  CorePoolSize: 6\r\nThread: 7,  Start: 18:28:02.507,  Stop: 18:28:07.512,  ActiveCount: 1,  CorePoolSize: 6\r\nThread: 8,  Start: 18:28:07.512,  Stop: 18:28:12.517,  ActiveCount: 1,  CorePoolSize: 6\r\nThread: 9,  Start: 18:28:12.517,  Stop: 18:28:17.522,  ActiveCount: 1,  CorePoolSize: 6\r\nThread: 10,  Start: 18:28:17.522,  Stop: 18:28:22.524,  ActiveCount: 1,  CorePoolSize: 6\r\nStage-2 complete.\r\n```\r\n\r\nIn the above program, you will see the 10 Threads being executed, first with a corePoolSize of 4. After the execution of the first four threads, the execution continues executing sequentially even though the corePoolSize is set higher than 1. I have demonstrated the above findings twice with 2 stages with corePoolSize of 4 and 6, confirming the uniformity of the behaviour.\r\n\r\nMy expectation is when there is empty slot in the executor, it should utilise that.\r\n\r\n\r\n","title":"ThreadPoolExecutor executing in single thread even though corePoolSize is set more","body":"<p>My problem is related to the executor returned by <code>Executors.newFixedThreadPool(1)</code> which is explained after the following program:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public static void main(String[] args) throws InterruptedException {\n    AtomicInteger atomicInteger = new AtomicInteger(0);\n    ThreadPoolExecutor threadPoolExecutor = (ThreadPoolExecutor) Executors.newFixedThreadPool(1);\n    List&lt;Runnable&gt; runnableList = new ArrayList&lt;&gt;();\n    for (int i = 0; i &lt; 10; i++) {\n        runnableList.add(task(atomicInteger.incrementAndGet(), threadPoolExecutor));\n    }\n    System.out.println(&quot;Starting Stage-1.&quot;);\n    threadPoolExecutor.setCorePoolSize(4);\n    runnableList.forEach(threadPoolExecutor::execute);\n\n    waitForCompletion(threadPoolExecutor);\n    System.out.println(&quot;Stage-1 complete.&quot;);\n\n    threadPoolExecutor.setCorePoolSize(0);\n    TimeUnit.SECONDS.sleep(10);\n\n    System.out.println(&quot;Starting Stage-2.&quot;);\n    threadPoolExecutor.setCorePoolSize(6);\n    runnableList.forEach(threadPoolExecutor::execute);\n\n    waitForCompletion(threadPoolExecutor);\n    System.out.println(&quot;Stage-2 complete.&quot;);\n    threadPoolExecutor.shutdown();\n}\n\nstatic Runnable task(int count, ThreadPoolExecutor threadPoolExecutor) {\n    return () -&gt; {\n        LocalTime start;\n        LocalTime end;\n        try {\n            start = LocalTime.now();\n            TimeUnit.SECONDS.sleep(5);\n            end = LocalTime.now();\n        } catch (InterruptedException e) {\n            throw new RuntimeException(e);\n        }\n\n        String log = &quot;Thread: &quot; + count +\n                &quot;,  Start: &quot; + start +\n                &quot;,  Stop: &quot; + end +\n                &quot;,  ActiveCount: &quot; + threadPoolExecutor.getActiveCount() +\n                &quot;,  CorePoolSize: &quot; + threadPoolExecutor.getCorePoolSize();\n        System.out.println(log);\n    };\n}\n\nstatic void waitForCompletion(ThreadPoolExecutor threadPoolExecutor) throws InterruptedException {\n    while (threadPoolExecutor.getActiveCount() != 0) {\n        TimeUnit.SECONDS.sleep(5);\n    }\n}\n</code></pre>\n<p>Output:</p>\n<pre><code>Starting Stage-1.\nThread: 2,  Start: 18:27:07.482,  Stop: 18:27:12.487,  ActiveCount: 4,  CorePoolSize: 4\nThread: 3,  Start: 18:27:07.482,  Stop: 18:27:12.487,  ActiveCount: 4,  CorePoolSize: 4\nThread: 1,  Start: 18:27:07.482,  Stop: 18:27:12.487,  ActiveCount: 4,  CorePoolSize: 4\nThread: 4,  Start: 18:27:07.482,  Stop: 18:27:12.487,  ActiveCount: 4,  CorePoolSize: 4\nThread: 5,  Start: 18:27:12.488,  Stop: 18:27:17.491,  ActiveCount: 1,  CorePoolSize: 4\nThread: 6,  Start: 18:27:17.492,  Stop: 18:27:22.497,  ActiveCount: 1,  CorePoolSize: 4\nThread: 7,  Start: 18:27:22.497,  Stop: 18:27:27.502,  ActiveCount: 1,  CorePoolSize: 4\nThread: 8,  Start: 18:27:27.502,  Stop: 18:27:32.506,  ActiveCount: 1,  CorePoolSize: 4\nThread: 9,  Start: 18:27:32.506,  Stop: 18:27:37.512,  ActiveCount: 1,  CorePoolSize: 4\nThread: 10,  Start: 18:27:37.512,  Stop: 18:27:42.515,  ActiveCount: 1,  CorePoolSize: 4\nStage-1 complete.\nStarting Stage-2.\nThread: 3,  Start: 18:27:57.504,  Stop: 18:28:02.506,  ActiveCount: 6,  CorePoolSize: 6\nThread: 5,  Start: 18:27:57.504,  Stop: 18:28:02.506,  ActiveCount: 6,  CorePoolSize: 6\nThread: 6,  Start: 18:27:57.504,  Stop: 18:28:02.506,  ActiveCount: 5,  CorePoolSize: 6\nThread: 4,  Start: 18:27:57.504,  Stop: 18:28:02.506,  ActiveCount: 3,  CorePoolSize: 6\nThread: 2,  Start: 18:27:57.504,  Stop: 18:28:02.506,  ActiveCount: 3,  CorePoolSize: 6\nThread: 1,  Start: 18:27:57.504,  Stop: 18:28:02.506,  ActiveCount: 1,  CorePoolSize: 6\nThread: 7,  Start: 18:28:02.507,  Stop: 18:28:07.512,  ActiveCount: 1,  CorePoolSize: 6\nThread: 8,  Start: 18:28:07.512,  Stop: 18:28:12.517,  ActiveCount: 1,  CorePoolSize: 6\nThread: 9,  Start: 18:28:12.517,  Stop: 18:28:17.522,  ActiveCount: 1,  CorePoolSize: 6\nThread: 10,  Start: 18:28:17.522,  Stop: 18:28:22.524,  ActiveCount: 1,  CorePoolSize: 6\nStage-2 complete.\n</code></pre>\n<p>In the above program, you will see the 10 Threads being executed, first with a corePoolSize of 4. After the execution of the first four threads, the execution continues executing sequentially even though the corePoolSize is set higher than 1. I have demonstrated the above findings twice with 2 stages with corePoolSize of 4 and 6, confirming the uniformity of the behaviour.</p>\n<p>My expectation is when there is empty slot in the executor, it should utilise that.</p>\n"},{"tags":["java","sonarlint-intellij","cognitive-complexity"],"comments":[{"owner":{"account_id":7373320,"reputation":17364,"user_id":5612858,"display_name":"Arnaud"},"score":2,"creation_date":1691588689,"post_id":76868330,"comment_id":135512039,"body_markdown":"Extracting a part of the logic to another method will help decrease the complexity. Many IDEs can help you do that easily.","body":"Extracting a part of the logic to another method will help decrease the complexity. Many IDEs can help you do that easily."},{"owner":{"account_id":6148867,"reputation":4677,"user_id":4793951,"display_name":"Zircon"},"score":1,"creation_date":1691589004,"post_id":76868330,"comment_id":135512119,"body_markdown":"I&#39;m not sure exactly how SonarLint calculates Cognitive Complexity, but what version of Java are you using? Are Streams available to you? At the least, it would make your code much more readable.","body":"I&#39;m not sure exactly how SonarLint calculates Cognitive Complexity, but what version of Java are you using? Are Streams available to you? At the least, it would make your code much more readable."},{"owner":{"account_id":15064163,"reputation":13519,"user_id":10871900,"display_name":"dan1st is crying"},"score":2,"creation_date":1691589068,"post_id":76868330,"comment_id":135512135,"body_markdown":"You could start by extracting the `for (JsonElement index : indexes) {` loop. But your goal should not be to get rid of the warning but to make your code as clear as possible. As such, you should make sure the method makes sense and has a descriptive name. SonarLint&#39;s cognitive complexity is calculated using the number of control flow statements (e.g. conditions or loops) while increasing the weight of nested statements. For example, if you have an `if` in a `while` loop, you get 1 &quot;complexity&quot; for the `while` and 2 for the `if` because it&#39;s nested once.","body":"You could start by extracting the <code>for (JsonElement index : indexes) {</code> loop. But your goal should not be to get rid of the warning but to make your code as clear as possible. As such, you should make sure the method makes sense and has a descriptive name. SonarLint&#39;s cognitive complexity is calculated using the number of control flow statements (e.g. conditions or loops) while increasing the weight of nested statements. For example, if you have an <code>if</code> in a <code>while</code> loop, you get 1 &quot;complexity&quot; for the <code>while</code> and 2 for the <code>if</code> because it&#39;s nested once."},{"owner":{"account_id":20090406,"reputation":415,"user_id":14731030,"display_name":"pensee"},"score":0,"creation_date":1691671410,"post_id":76868330,"comment_id":135524754,"body_markdown":"@dan1st extracting the for loop you mentioned removed the error. \nThat was so easy. I understand though that the methods should be more descriptive","body":"@dan1st extracting the for loop you mentioned removed the error.  That was so easy. I understand though that the methods should be more descriptive"},{"owner":{"account_id":20090406,"reputation":415,"user_id":14731030,"display_name":"pensee"},"score":0,"creation_date":1692383306,"post_id":76868330,"comment_id":135620515,"body_markdown":"@dan1st you can post your solution, so I can mark it","body":"@dan1st you can post your solution, so I can mark it"}],"answers":[{"tags":[],"owner":{"account_id":14879218,"reputation":383,"user_id":10744429,"display_name":"WLefever"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691589443,"creation_date":1691589443,"answer_id":76868489,"question_id":76868330,"body_markdown":"Below I listed a couple of hints based on your code. Of course, there are many many more. You might find Clean Code by Robert Martin an interesting read.\r\n\r\n 1. Extract code that is in for loops to a separate method (in your case you can do this twice)\r\n 2. Extract code that is in if or else conditions to separate methods\r\n```\r\nif (condition){\r\n   doSomething();\r\n} else{\r\n   doSomethingElse();\r\n}\r\n```\r\n 3. Avoid `continue`\r\n\r\nBetter to change\r\n```\r\nif (indexes == null)\r\n                continue;\r\n```\r\nto\r\n```\r\nif (indexes != null){\r\n    for (JsonElement index : indexes) {...}\r\n}\r\n```","title":"Reduce cognitive Complexity of a method from 26 to 15","body":"<p>Below I listed a couple of hints based on your code. Of course, there are many many more. You might find Clean Code by Robert Martin an interesting read.</p>\n<ol>\n<li>Extract code that is in for loops to a separate method (in your case you can do this twice)</li>\n<li>Extract code that is in if or else conditions to separate methods</li>\n</ol>\n<pre><code>if (condition){\n   doSomething();\n} else{\n   doSomethingElse();\n}\n</code></pre>\n<ol start=\"3\">\n<li>Avoid <code>continue</code></li>\n</ol>\n<p>Better to change</p>\n<pre><code>if (indexes == null)\n                continue;\n</code></pre>\n<p>to</p>\n<pre><code>if (indexes != null){\n    for (JsonElement index : indexes) {...}\n}\n</code></pre>\n"}],"owner":{"account_id":20090406,"reputation":415,"user_id":14731030,"display_name":"pensee"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":68,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1691589443,"creation_date":1691588343,"question_id":76868330,"body_markdown":"I have the following code:  \r\n\r\n    private void generateKeyList(String pdm, List&lt;Key&gt; uKs,\r\n                                     List&lt;PhysicalKey&gt; pKs) {\r\n            if (pKs == null &amp;&amp; uKs == null)\r\n                return;\r\n            JsonObject concepts = getConcepts(pdm);\r\n            String indexTypeRequired = uKs == null ? &quot;PRIMARY-KEY&quot; : &quot;UNIQUE&quot;;\r\n            for (String concept : concepts.keySet()) {\r\n                var indexes = concepts.getAsJsonObject(concept).getAsJsonArray(&quot;indexes&quot;);\r\n                if (indexes == null)\r\n                    continue;\r\n                for (JsonElement index : indexes) {\r\n                    JsonObject indexO = (JsonObject) index;\r\n                    var indexType = indexO.getAsJsonPrimitive(&quot;indexType&quot;).getAsString();\r\n                    var name = indexO.getAsJsonPrimitive(&quot;name&quot;).getAsString();\r\n                    var keys = indexO.getAsJsonArray(&quot;key&quot;).getAsJsonArray();\r\n                    if (indexType.equals(indexTypeRequired)) {\r\n                        for (JsonElement indexKey : keys) {\r\n                            var keyString = indexKey.getAsString();\r\n                            var key = pKs == null ? new Key() : new PhysicalKey();\r\n                            key.setName(name).setType(indexType).setTable(concept).setColumn(keyString);\r\n                            if (uKs == null)\r\n                                pKs.add((PhysicalKey) key);\r\n                            else\r\n                                uKs.add(key);\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    \r\nI am getting an issue from sonarLint that the Cognitive Complexity of this code is 26 and it should be &lt;=15  \r\nNot sure how to reduce the complexity here.  \r\nAny ideas of hints?\r\n\r\n","title":"Reduce cognitive Complexity of a method from 26 to 15","body":"<p>I have the following code:</p>\n<pre><code>private void generateKeyList(String pdm, List&lt;Key&gt; uKs,\n                                 List&lt;PhysicalKey&gt; pKs) {\n        if (pKs == null &amp;&amp; uKs == null)\n            return;\n        JsonObject concepts = getConcepts(pdm);\n        String indexTypeRequired = uKs == null ? &quot;PRIMARY-KEY&quot; : &quot;UNIQUE&quot;;\n        for (String concept : concepts.keySet()) {\n            var indexes = concepts.getAsJsonObject(concept).getAsJsonArray(&quot;indexes&quot;);\n            if (indexes == null)\n                continue;\n            for (JsonElement index : indexes) {\n                JsonObject indexO = (JsonObject) index;\n                var indexType = indexO.getAsJsonPrimitive(&quot;indexType&quot;).getAsString();\n                var name = indexO.getAsJsonPrimitive(&quot;name&quot;).getAsString();\n                var keys = indexO.getAsJsonArray(&quot;key&quot;).getAsJsonArray();\n                if (indexType.equals(indexTypeRequired)) {\n                    for (JsonElement indexKey : keys) {\n                        var keyString = indexKey.getAsString();\n                        var key = pKs == null ? new Key() : new PhysicalKey();\n                        key.setName(name).setType(indexType).setTable(concept).setColumn(keyString);\n                        if (uKs == null)\n                            pKs.add((PhysicalKey) key);\n                        else\n                            uKs.add(key);\n                    }\n                }\n            }\n        }\n    }\n</code></pre>\n<p>I am getting an issue from sonarLint that the Cognitive Complexity of this code is 26 and it should be &lt;=15<br />\nNot sure how to reduce the complexity here.<br />\nAny ideas of hints?</p>\n"},{"tags":["java"],"answers":[{"tags":[],"owner":{"account_id":120028,"reputation":35734,"user_id":312172,"accept_rate":86,"display_name":"user unknown"},"down_vote_count":1,"up_vote_count":7,"is_accepted":false,"score":6,"last_activity_date":1299630228,"creation_date":1299590946,"answer_id":5233133,"question_id":5233012,"body_markdown":"See `java.text.NumberFormat` and `DecimalFormat`:\r\n\r\n     NumberFormat nf = new DecimalFormat (&quot;990.0&quot;);\r\n     double d = nf.parse (text);\r\n","title":"Convert String with Dot or Comma to Float Number","body":"<p>See <code>java.text.NumberFormat</code> and <code>DecimalFormat</code>:</p>\n\n<pre><code> NumberFormat nf = new DecimalFormat (\"990.0\");\n double d = nf.parse (text);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":43453,"reputation":16185,"user_id":127035,"accept_rate":71,"display_name":"ewan.chalmers"},"down_vote_count":0,"up_vote_count":31,"is_accepted":false,"score":31,"last_activity_date":1455801454,"creation_date":1299591009,"answer_id":5233147,"question_id":5233012,"body_markdown":"The `Float.parseFloat()` method is not locale-dependent. It expects a dot as decimal separator. If the decimal separator in your input is always dot, you can use this safely.\r\n\r\nThe `NumberFormat` class provides locale-aware parse and format should you need to adapt for different locales.","title":"Convert String with Dot or Comma to Float Number","body":"<p>The <code>Float.parseFloat()</code> method is not locale-dependent. It expects a dot as decimal separator. If the decimal separator in your input is always dot, you can use this safely.</p>\n\n<p>The <code>NumberFormat</code> class provides locale-aware parse and format should you need to adapt for different locales.</p>\n"},{"tags":[],"owner":{"account_id":27505,"reputation":32693,"user_id":72673,"accept_rate":72,"display_name":"Maurice Perry"},"down_vote_count":0,"up_vote_count":29,"is_accepted":false,"score":29,"last_activity_date":1299593973,"creation_date":1299593667,"answer_id":5233638,"question_id":5233012,"body_markdown":"    DecimalFormatSymbols symbols = new DecimalFormatSymbols();\r\n    symbols.setDecimalSeparator(&#39;.&#39;);\r\n    DecimalFormat format = new DecimalFormat(&quot;0.#&quot;);\r\n    format.setDecimalFormatSymbols(symbols);\r\n    float f = format.parse(str).floatValue();\r\n","title":"Convert String with Dot or Comma to Float Number","body":"<pre><code>DecimalFormatSymbols symbols = new DecimalFormatSymbols();\nsymbols.setDecimalSeparator('.');\nDecimalFormat format = new DecimalFormat(\"0.#\");\nformat.setDecimalFormatSymbols(symbols);\nfloat f = format.parse(str).floatValue();\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1326635,"reputation":700,"user_id":1271317,"display_name":"flamming_python"},"down_vote_count":12,"up_vote_count":37,"is_accepted":false,"score":25,"last_activity_date":1360325492,"creation_date":1354863181,"answer_id":13758320,"question_id":5233012,"body_markdown":"    valueStr = valueStr.replace(&#39;,&#39;, &#39;.&#39;);\r\n    return new Float(valueStr);\r\n\r\nDone","title":"Convert String with Dot or Comma to Float Number","body":"<pre><code>valueStr = valueStr.replace(',', '.');\nreturn new Float(valueStr);\n</code></pre>\n\n<p>Done</p>\n"},{"tags":[],"owner":{"account_id":3845435,"reputation":63,"user_id":3187137,"display_name":"user3187137"},"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1470403945,"creation_date":1389526417,"answer_id":21074114,"question_id":5233012,"body_markdown":"What about this:\r\n \r\n    Float floatFromStringOrZero(String s){\r\n        Float val = Float.valueOf(0);\r\n        try{\r\n            val = Float.valueOf(s);\r\n        } catch(NumberFormatException ex){\r\n            DecimalFormat df = new DecimalFormat();\r\n            Number n = null;\r\n            try{\r\n                n = df.parse(s);\r\n            } catch(ParseException ex2){\r\n            }\r\n            if(n != null)\r\n                val = n.floatValue();\r\n        }\r\n        return val;\r\n    }\r\n","title":"Convert String with Dot or Comma to Float Number","body":"<p>What about this:</p>\n\n<pre><code>Float floatFromStringOrZero(String s){\n    Float val = Float.valueOf(0);\n    try{\n        val = Float.valueOf(s);\n    } catch(NumberFormatException ex){\n        DecimalFormat df = new DecimalFormat();\n        Number n = null;\n        try{\n            n = df.parse(s);\n        } catch(ParseException ex2){\n        }\n        if(n != null)\n            val = n.floatValue();\n    }\n    return val;\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":5400671,"reputation":1252,"user_id":4300670,"display_name":"Aliton Oliveira"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1551832678,"creation_date":1551832678,"answer_id":55013765,"question_id":5233012,"body_markdown":"I hope this piece of code may help you.\r\n\r\n    public static Float getDigit(String quote){\r\n            char decimalSeparator = new DecimalFormatSymbols().getDecimalSeparator();\r\n            String regex = &quot;[^0-9&quot; + decimalSeparator + &quot;]&quot;;\r\n            String valueOnlyDigit = quote.replaceAll(regex, &quot;&quot;);\r\n    \r\n            if (String.valueOf(decimalSeparator).equals(&quot;,&quot;)) {\r\n                valueOnlyDigit = valueOnlyDigit.replace(&quot;,&quot;, &quot;.&quot;);\r\n                //Log.i(&quot;debinf purcadap&quot;, &quot;substituted comma by dot&quot;);\r\n            }\r\n    \r\n            try {\r\n                return Float.parseFloat(valueOnlyDigit);\r\n            } catch (ArithmeticException | NumberFormatException e) {\r\n                //Log.i(&quot;debinf purcadap&quot;, &quot;Error in getMoneyAsDecimal&quot;, e);\r\n                return null;\r\n            }\r\n        }\r\n\r\n\r\n","title":"Convert String with Dot or Comma to Float Number","body":"<p>I hope this piece of code may help you.</p>\n\n<pre><code>public static Float getDigit(String quote){\n        char decimalSeparator = new DecimalFormatSymbols().getDecimalSeparator();\n        String regex = \"[^0-9\" + decimalSeparator + \"]\";\n        String valueOnlyDigit = quote.replaceAll(regex, \"\");\n\n        if (String.valueOf(decimalSeparator).equals(\",\")) {\n            valueOnlyDigit = valueOnlyDigit.replace(\",\", \".\");\n            //Log.i(\"debinf purcadap\", \"substituted comma by dot\");\n        }\n\n        try {\n            return Float.parseFloat(valueOnlyDigit);\n        } catch (ArithmeticException | NumberFormatException e) {\n            //Log.i(\"debinf purcadap\", \"Error in getMoneyAsDecimal\", e);\n            return null;\n        }\n    }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":23808129,"reputation":924,"user_id":17817329,"display_name":"robni"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1641463046,"creation_date":1641154519,"answer_id":70559426,"question_id":5233012,"body_markdown":"You can use the placeholder %s-String for any primitive type.\r\n\r\n```java\r\nfloat x = 3.15f, y = 1.2345f;\r\n\r\nSystem.out.printf(&quot;%.4s and %.5s&quot;, x, y);\r\n```\r\n**Output: 3.15 and 1.234**\r\n\r\n**%s is always english formatting regardless of localization.**\r\n\r\nIf you want a **specif local formatting**, you could also do:\r\n```java\r\nimport java.util.Locale;\r\n\r\nfloat x = 3.15f, y = 1.2345f;\r\n\r\nSystem.out.printf(Locale.GERMAN, &quot;%.2f and %.4f&quot;, x, y);\r\n```\r\n**Output: 3,15 and 1,2345**","title":"Convert String with Dot or Comma to Float Number","body":"<p>You can use the placeholder %s-String for any primitive type.</p>\n<pre class=\"lang-java prettyprint-override\"><code>float x = 3.15f, y = 1.2345f;\n\nSystem.out.printf(&quot;%.4s and %.5s&quot;, x, y);\n</code></pre>\n<p><strong>Output: 3.15 and 1.234</strong></p>\n<p><strong>%s is always english formatting regardless of localization.</strong></p>\n<p>If you want a <strong>specif local formatting</strong>, you could also do:</p>\n<pre class=\"lang-java prettyprint-override\"><code>import java.util.Locale;\n\nfloat x = 3.15f, y = 1.2345f;\n\nSystem.out.printf(Locale.GERMAN, &quot;%.2f and %.4f&quot;, x, y);\n</code></pre>\n<p><strong>Output: 3,15 and 1,2345</strong></p>\n"},{"tags":[],"owner":{"account_id":21110101,"reputation":1,"user_id":15546121,"display_name":"Henry Lang"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691588700,"creation_date":1691522667,"answer_id":76862653,"question_id":5233012,"body_markdown":"To convert the string to float regardless of localization you can always replace the comma &quot;,&quot; with the dot &quot;.&quot; using the `str.replace()` method, as following:\r\n\r\n    // Set value as string first\r\n    String s = &quot;9,9&quot;;\r\n    // Replacing , with .\r\n    s = s.replace(&quot;,&quot;, &quot;.&quot;);\r\n    // Parsing the value\r\n    float x = Float.parseFloat(s);\r\n","title":"Convert String with Dot or Comma to Float Number","body":"<p>To convert the string to float regardless of localization you can always replace the comma &quot;,&quot; with the dot &quot;.&quot; using the <code>str.replace()</code> method, as following:</p>\n<pre><code>// Set value as string first\nString s = &quot;9,9&quot;;\n// Replacing , with .\ns = s.replace(&quot;,&quot;, &quot;.&quot;);\n// Parsing the value\nfloat x = Float.parseFloat(s);\n</code></pre>\n"}],"owner":{"account_id":716842,"reputation":1385,"user_id":644553,"accept_rate":0,"display_name":"Dayanne"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":103340,"favorite_count":0,"down_vote_count":0,"up_vote_count":34,"answer_count":8,"score":34,"last_activity_date":1691588700,"creation_date":1299590384,"question_id":5233012,"body_markdown":"I always like input in my function to get numbers that range from 0.1 to 999.9 (the decimal part is always separated by &#39;.&#39;, if there is no decimal then there is no &#39;.&#39; for example 9 or 7 .\r\n\r\nHow do I convert this String to float value regardless of localization (some countries use &#39;,&#39; to separate decimal part of number. I always get it with the &#39;.&#39;)? Does this depend on local computer settings?","title":"Convert String with Dot or Comma to Float Number","body":"<p>I always like input in my function to get numbers that range from 0.1 to 999.9 (the decimal part is always separated by '.', if there is no decimal then there is no '.' for example 9 or 7 .</p>\n\n<p>How do I convert this String to float value regardless of localization (some countries use ',' to separate decimal part of number. I always get it with the '.')? Does this depend on local computer settings?</p>\n"},{"tags":["java","spring","spring-mvc","scheduled-tasks"],"comments":[{"owner":{"account_id":8434884,"reputation":613,"user_id":6329331,"display_name":"MiGo"},"score":0,"creation_date":1668083763,"post_id":43664259,"comment_id":131323748,"body_markdown":"Can you please answer this ?\nhttps://stackoverflow.com/questions/74376294/how-to-gracefully-shutdown-spring-boot-app-using-configuration-and-programatical","body":"Can you please answer this ? <a href=\"https://stackoverflow.com/questions/74376294/how-to-gracefully-shutdown-spring-boot-app-using-configuration-and-programatical\" title=\"how to gracefully shutdown spring boot app using configuration and programatical\">stackoverflow.com/questions/74376294/&hellip;</a>"}],"answers":[{"tags":[],"owner":{"account_id":8081998,"reputation":1365,"user_id":6090847,"display_name":"Matej Marconak"},"down_vote_count":0,"up_vote_count":6,"is_accepted":true,"score":6,"last_activity_date":1493327949,"creation_date":1493327949,"answer_id":43668082,"question_id":43664259,"body_markdown":"You need update configuration of `ThreadPoolTaskScheduler`. Set true for `waitForJobsToCompleteOnShutdown` (method `setWaitForTasksToCompleteOnShutdown`).\r\n\r\nFrom documentation:\r\n\r\n&gt; Set whether to wait for scheduled tasks to complete on shutdown, not interrupting running tasks and executing all tasks in the queue.\r\nDefault is &quot;false&quot;, shutting down immediately through interrupting ongoing tasks and clearing the queue. Switch this flag to &quot;true&quot; if you prefer fully completed tasks at the expense of a longer shutdown phase.\r\n\r\n","title":"Spring - Scheduled Task - Graceful Shutdown","body":"<p>You need update configuration of <code>ThreadPoolTaskScheduler</code>. Set true for <code>waitForJobsToCompleteOnShutdown</code> (method <code>setWaitForTasksToCompleteOnShutdown</code>).</p>\n\n<p>From documentation:</p>\n\n<blockquote>\n  <p>Set whether to wait for scheduled tasks to complete on shutdown, not interrupting running tasks and executing all tasks in the queue.\n  Default is \"false\", shutting down immediately through interrupting ongoing tasks and clearing the queue. Switch this flag to \"true\" if you prefer fully completed tasks at the expense of a longer shutdown phase.</p>\n</blockquote>\n"},{"tags":[],"owner":{"account_id":8781643,"reputation":25950,"user_id":6565093,"accept_rate":47,"display_name":"pvpkiran"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1493363361,"creation_date":1493363361,"answer_id":43674132,"question_id":43664259,"body_markdown":"@Matej is right. Some thing like this should do the trick   \r\n\r\n     @Bean\r\n      public ThreadPoolTaskScheduler setSchedulerToWait(ThreadPoolTaskScheduler threadPoolTaskScheduler){\r\n       threadPoolTaskScheduler.setWaitForTasksToCompleteOnShutdown(true);\r\n       return threadPoolTaskScheduler;\r\n     }","title":"Spring - Scheduled Task - Graceful Shutdown","body":"<p>@Matej is right. Some thing like this should do the trick   </p>\n\n<pre><code> @Bean\n  public ThreadPoolTaskScheduler setSchedulerToWait(ThreadPoolTaskScheduler threadPoolTaskScheduler){\n   threadPoolTaskScheduler.setWaitForTasksToCompleteOnShutdown(true);\n   return threadPoolTaskScheduler;\n }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1120462,"reputation":2781,"user_id":1108890,"accept_rate":48,"display_name":"GokcenG"},"down_vote_count":0,"up_vote_count":18,"is_accepted":false,"score":18,"last_activity_date":1563809290,"creation_date":1563809290,"answer_id":57149240,"question_id":43664259,"body_markdown":"Starting from Spring Boot 2.1.0, you can use this:\r\n\r\n    @Bean\r\n    TaskSchedulerCustomizer taskSchedulerCustomizer() {\r\n        return taskScheduler -&gt; {\r\n            taskScheduler.setAwaitTerminationSeconds(60);\r\n            taskScheduler.setWaitForTasksToCompleteOnShutdown(true);\r\n        };\r\n    }\r\n\r\n`TaskSchedulerCustomizer` will be used to modify configured `ThreadPoolTaskScheduler`\r\n\r\nDetails: \r\n\r\n 1. [ExecutorConfigurationSupport][1]\r\n 2. [TaskSchedulerCustomizer][2]\r\n\r\n  [1]: https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/scheduling/concurrent/ExecutorConfigurationSupport.html#setAwaitTerminationSeconds-int-\r\n  [2]: https://docs.spring.io/spring-boot/docs/current/api/org/springframework/boot/task/TaskSchedulerCustomizer.html","title":"Spring - Scheduled Task - Graceful Shutdown","body":"<p>Starting from Spring Boot 2.1.0, you can use this:</p>\n\n<pre><code>@Bean\nTaskSchedulerCustomizer taskSchedulerCustomizer() {\n    return taskScheduler -&gt; {\n        taskScheduler.setAwaitTerminationSeconds(60);\n        taskScheduler.setWaitForTasksToCompleteOnShutdown(true);\n    };\n}\n</code></pre>\n\n<p><code>TaskSchedulerCustomizer</code> will be used to modify configured <code>ThreadPoolTaskScheduler</code></p>\n\n<p>Details: </p>\n\n<ol>\n<li><a href=\"https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/scheduling/concurrent/ExecutorConfigurationSupport.html#setAwaitTerminationSeconds-int-\" rel=\"noreferrer\">ExecutorConfigurationSupport</a></li>\n<li><a href=\"https://docs.spring.io/spring-boot/docs/current/api/org/springframework/boot/task/TaskSchedulerCustomizer.html\" rel=\"noreferrer\">TaskSchedulerCustomizer</a></li>\n</ol>\n"},{"tags":[],"owner":{"account_id":6859918,"reputation":1134,"user_id":5274291,"accept_rate":75,"display_name":"Jo&#227;o Pedro Schmitt"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1691588670,"creation_date":1691588670,"answer_id":76868371,"question_id":43664259,"body_markdown":"In later versions of spring boot you can also set these properties via `application.properties`. For example\r\n\r\n```\r\nserver.shutdown=graceful\r\nspring.lifecycle.timeout-per-shutdown-phase=60s\r\nspring.task.execution.shutdown.await-termination=true\r\nspring.task.execution.shutdown.await-termination-period=60s\r\nspring.task.scheduling.shutdown.await-termination=true\r\nspring.task.scheduling.shutdown.await-termination-period=60s\r\n```","title":"Spring - Scheduled Task - Graceful Shutdown","body":"<p>In later versions of spring boot you can also set these properties via <code>application.properties</code>. For example</p>\n<pre><code>server.shutdown=graceful\nspring.lifecycle.timeout-per-shutdown-phase=60s\nspring.task.execution.shutdown.await-termination=true\nspring.task.execution.shutdown.await-termination-period=60s\nspring.task.scheduling.shutdown.await-termination=true\nspring.task.scheduling.shutdown.await-termination-period=60s\n</code></pre>\n"}],"owner":{"account_id":1613240,"reputation":2365,"user_id":1491636,"accept_rate":46,"display_name":"user1491636"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":13956,"favorite_count":0,"down_vote_count":0,"up_vote_count":8,"accepted_answer_id":43668082,"answer_count":4,"score":8,"last_activity_date":1691588670,"creation_date":1493313783,"question_id":43664259,"body_markdown":"I have a Spring-Boot application with a bean running a scheduled task at about 1 minute intervals, and this bean has a `@PreDestroy` method. \r\n\r\nIs there a solution for allowing a task which is currently being executed to complete - or at least given some time to complete - before the life cycle reaches the pre-destroy phase? ","title":"Spring - Scheduled Task - Graceful Shutdown","body":"<p>I have a Spring-Boot application with a bean running a scheduled task at about 1 minute intervals, and this bean has a <code>@PreDestroy</code> method. </p>\n\n<p>Is there a solution for allowing a task which is currently being executed to complete - or at least given some time to complete - before the life cycle reaches the pre-destroy phase? </p>\n"},{"tags":["java","spring","spring-boot","lombok"],"comments":[{"owner":{"account_id":5553464,"reputation":17547,"user_id":4405757,"accept_rate":57,"display_name":"Thiyagu"},"score":1,"creation_date":1691583409,"post_id":76867601,"comment_id":135510810,"body_markdown":"This might be relevant - [Is there a Lombok way to initialise a final field that is calculated from other fields?](https://stackoverflow.com/questions/47187111/is-there-a-lombok-way-to-initialise-a-final-field-that-is-calculated-from-other). But that will require you to have `CollectorRegistry` as an instance variable.","body":"This might be relevant - <a href=\"https://stackoverflow.com/questions/47187111/is-there-a-lombok-way-to-initialise-a-final-field-that-is-calculated-from-other\">Is there a Lombok way to initialise a final field that is calculated from other fields?</a>. But that will require you to have <code>CollectorRegistry</code> as an instance variable."}],"answers":[{"tags":[],"owner":{"account_id":3388916,"reputation":1080,"user_id":7537885,"display_name":"Hermann Steidel"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1691588217,"creation_date":1691588217,"answer_id":76868314,"question_id":76867601,"body_markdown":"Based on your current design in that `UserController` is a singleton and it has a Counter, why don&#39;t you just make Counter a spring bean as well? That way, you don&#39;t need the special constructor? Something like this..\r\n\r\n```\r\n@Configuration\r\npublic class CounterConfigSample {\r\n\r\n  /* Spring will auto-inject CollectorRegistry here*/\r\n  @Bean\r\n  public Counter registerCount(CollectorRegistry collectorRegistry) {\r\n     return Counter.build()\r\n                .name(&quot;register_count&quot;)\r\n                .labelNames(&quot;domain_name&quot;, &quot;domain_id&quot;)\r\n                .help(&quot;Number of registrations&quot;)\r\n                .register(collectorRegistry);\r\n\r\n   }\r\n\r\n}\r\n```\r\n\r\nThen in your `UserController`\r\n\r\n```\r\n public UpdateUserController(UserService userService, UserDetailsService userDetailsService, Counter registerCount) {\r\n        this.userService = userService;\r\n        this.userDetailsService = userDetailsService;\r\n        this.registerCount = registerCount;\r\n    }","title":"Lombok Constructor annotation with a single custom field initialization","body":"<p>Based on your current design in that <code>UserController</code> is a singleton and it has a Counter, why don't you just make Counter a spring bean as well? That way, you don't need the special constructor? Something like this..</p>\n<pre><code>@Configuration\npublic class CounterConfigSample {\n\n  /* Spring will auto-inject CollectorRegistry here*/\n  @Bean\n  public Counter registerCount(CollectorRegistry collectorRegistry) {\n     return Counter.build()\n                .name(&quot;register_count&quot;)\n                .labelNames(&quot;domain_name&quot;, &quot;domain_id&quot;)\n                .help(&quot;Number of registrations&quot;)\n                .register(collectorRegistry);\n\n   }\n\n}\n</code></pre>\n<p>Then in your <code>UserController</code></p>\n<pre><code> public UpdateUserController(UserService userService, UserDetailsService userDetailsService, Counter registerCount) {\n        this.userService = userService;\n        this.userDetailsService = userDetailsService;\n        this.registerCount = registerCount;\n    }\n</code></pre>\n"}],"owner":{"account_id":1854386,"reputation":274,"user_id":2270948,"accept_rate":83,"display_name":"TomDoes"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":66,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"accepted_answer_id":76868314,"answer_count":1,"score":0,"last_activity_date":1691588217,"creation_date":1691582599,"question_id":76867601,"body_markdown":"I would like to update this sample code by using a lombok annotation. But I struggle to extract the `registerCount` initialization from the constructor, because it depends on the injected `collectorRegistry` bean.\r\n\r\n```Java\r\n@RestController\r\n@RequestMapping(&quot;/api/user&quot;)\r\npublic class UserController {\r\n\r\n    private final UserService userService;\r\n    private final UserDetailsService userDetailsService;\r\n    private final Counter registerCount;\r\n\r\n    public UpdateUserController(UserService userService, UserDetailsService userDetailsService, CollectorRegistry collectorRegistry) {\r\n        this.userService = userService;\r\n        this.userDetailsService = userDetailsService;\r\n        registerCount = Counter.build()\r\n                .name(&quot;register_count&quot;)\r\n                .labelNames(&quot;domain_name&quot;, &quot;domain_id&quot;)\r\n                .help(&quot;Number of registrations&quot;)\r\n                .register(collectorRegistry);\r\n    }\r\n...\r\n```\r\n\r\nIs this possible in Lombok?\r\n\r\n(I understand Lombok is not the holy grail, but I would like to know if this is also possible when using a lombok annotation like `@RequiredArgsConstructor`)","title":"Lombok Constructor annotation with a single custom field initialization","body":"<p>I would like to update this sample code by using a lombok annotation. But I struggle to extract the <code>registerCount</code> initialization from the constructor, because it depends on the injected <code>collectorRegistry</code> bean.</p>\n<pre><code>@RestController\n@RequestMapping(&quot;/api/user&quot;)\npublic class UserController {\n\n    private final UserService userService;\n    private final UserDetailsService userDetailsService;\n    private final Counter registerCount;\n\n    public UpdateUserController(UserService userService, UserDetailsService userDetailsService, CollectorRegistry collectorRegistry) {\n        this.userService = userService;\n        this.userDetailsService = userDetailsService;\n        registerCount = Counter.build()\n                .name(&quot;register_count&quot;)\n                .labelNames(&quot;domain_name&quot;, &quot;domain_id&quot;)\n                .help(&quot;Number of registrations&quot;)\n                .register(collectorRegistry);\n    }\n...\n</code></pre>\n<p>Is this possible in Lombok?</p>\n<p>(I understand Lombok is not the holy grail, but I would like to know if this is also possible when using a lombok annotation like <code>@RequiredArgsConstructor</code>)</p>\n"},{"tags":["java","microservices","keycloak","licensing"],"answers":[{"tags":[],"owner":{"account_id":16541357,"reputation":53,"user_id":11952052,"display_name":"Jon"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691588112,"creation_date":1691567576,"answer_id":76865672,"question_id":76865604,"body_markdown":"To override the `JpaUserProvider` with extension, you need to create a custom `SPI` (Service Provider Interface). Use the `UserProvide`r interface to create a custom user provider and override the methods you think you might need.\r\nHere&#39;s an example:\r\n\r\n```Java\r\n public class CustomUserProvider implements UserProvider {\r\n        \r\n        private final EntityManager em;\r\n        \r\n        public CustomUserProvider(EntityManager em) {\r\n            this.em = em;\r\n        }\r\n\r\n        @Override\r\n        public UserModel addUser(RealmModel realm, String username) {\r\n            UserModel user = ... // Add user to your database\r\n            \r\n            // Call your external microservice here\r\n            \r\n            return user;\r\n        }\r\n        \r\n        // Override other methods...\r\n    }\r\n\r\n    public class CustomUserProviderFactory implements UserProviderFactory {\r\n\r\n        @Override\r\n        public UserProvider create(KeycloakSession session) {\r\n            EntityManager em = session.getProvider(JpaConnectionProvider.class).getEntityManager();\r\n            return new CustomUserProvider(em);\r\n        }\r\n        \r\n        // Implement other methods...\r\n    }\r\n```\r\n\r\nNote: You might want to look at [this article](https://medium.com/@bcarunmail/securing-rest-api-using-keycloak-and-spring-oauth2-6ddf3a1efcc2) for more info.","title":"Override Keyclock JpaUserProvider","body":"<p>To override the <code>JpaUserProvider</code> with extension, you need to create a custom <code>SPI</code> (Service Provider Interface). Use the <code>UserProvide</code>r interface to create a custom user provider and override the methods you think you might need.\nHere's an example:</p>\n<pre><code> public class CustomUserProvider implements UserProvider {\n        \n        private final EntityManager em;\n        \n        public CustomUserProvider(EntityManager em) {\n            this.em = em;\n        }\n\n        @Override\n        public UserModel addUser(RealmModel realm, String username) {\n            UserModel user = ... // Add user to your database\n            \n            // Call your external microservice here\n            \n            return user;\n        }\n        \n        // Override other methods...\n    }\n\n    public class CustomUserProviderFactory implements UserProviderFactory {\n\n        @Override\n        public UserProvider create(KeycloakSession session) {\n            EntityManager em = session.getProvider(JpaConnectionProvider.class).getEntityManager();\n            return new CustomUserProvider(em);\n        }\n        \n        // Implement other methods...\n    }\n</code></pre>\n<p>Note: You might want to look at <a href=\"https://medium.com/@bcarunmail/securing-rest-api-using-keycloak-and-spring-oauth2-6ddf3a1efcc2\" rel=\"nofollow noreferrer\">this article</a> for more info.</p>\n"}],"owner":{"account_id":12875129,"reputation":1,"user_id":9312103,"display_name":"AlexandrGv"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":49,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":1,"score":-1,"last_activity_date":1691588112,"creation_date":1691567077,"question_id":76865604,"body_markdown":"Dose anybody know how overide Keyclock JpaUserProvider using extension?\r\n\r\nHi. It is required to call an external microservice to check the license when adding a user and roles to the keyclock. Can anyone know how to do this?","title":"Override Keyclock JpaUserProvider","body":"<p>Dose anybody know how overide Keyclock JpaUserProvider using extension?</p>\n<p>Hi. It is required to call an external microservice to check the license when adding a user and roles to the keyclock. Can anyone know how to do this?</p>\n"}],"has_more":true,"quota_max":10000,"quota_remaining":9735,"page":257,"page_size":100}
