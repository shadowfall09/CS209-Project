{"items":[{"tags":["java","spring","design-patterns"],"comments":[{"owner":{"account_id":3614596,"reputation":2212,"user_id":3014817,"display_name":"Shailesh Chandra"},"score":0,"creation_date":1570101340,"post_id":58217938,"comment_id":102811943,"body_markdown":"I would do it using GOF: template method pattern, and in my view there is no harm in creating extra class as far as there is no duplicate code. common part should go to super classes and specific part should go to their specific classes","body":"I would do it using GOF: template method pattern, and in my view there is no harm in creating extra class as far as there is no duplicate code. common part should go to super classes and specific part should go to their specific classes"}],"answers":[{"tags":[],"owner":{"account_id":16713605,"reputation":82,"user_id":12080284,"display_name":"heyhooo"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1570102717,"creation_date":1570102717,"answer_id":58218368,"question_id":58217938,"body_markdown":"Your question is relevant and you can come thrugh using enumms, \r\n\r\nyou can define the behaviour of an action using functional interfaces\r\n```\r\n enum Action{\r\n        Action_1(param -&gt; &quot;action for 1&quot;), Action_2(param -&gt; &quot;action for 2&quot;), Action_3(param -&gt; &quot;action for 3&quot;);\r\n        private final DoSomething doSomething;\r\n\r\n        Action(DoSomething action) {\r\n            this.doSomething = action;\r\n        }\r\n\r\n        public DoSomething getDoSomething() {\r\n            return doSomething;\r\n        }\r\n    }\r\n    private interface DoSomething{\r\n        public Object doIt(Object param);\r\n    }\r\n    handleGenericBookRequests(action){\r\n        Action.valueOf(action).getDoSomething().doIt(your param)\r\n    }\r\n```","title":"Spring: How to decorate some incoming requests with extra logic","body":"<p>Your question is relevant and you can come thrugh using enumms, </p>\n\n<p>you can define the behaviour of an action using functional interfaces</p>\n\n<pre><code> enum Action{\n        Action_1(param -&gt; \"action for 1\"), Action_2(param -&gt; \"action for 2\"), Action_3(param -&gt; \"action for 3\");\n        private final DoSomething doSomething;\n\n        Action(DoSomething action) {\n            this.doSomething = action;\n        }\n\n        public DoSomething getDoSomething() {\n            return doSomething;\n        }\n    }\n    private interface DoSomething{\n        public Object doIt(Object param);\n    }\n    handleGenericBookRequests(action){\n        Action.valueOf(action).getDoSomething().doIt(your param)\n    }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":204659,"reputation":37539,"user_id":453005,"accept_rate":100,"display_name":"DwB"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1570558515,"creation_date":1570558515,"answer_id":58291930,"question_id":58217938,"body_markdown":"You might use a strategy to encapsulate the work.\r\nImplement it once for the normal stuff and once for each special situation.\r\n\r\nStart by separating your request handling from your business logic.\r\nHere is some code:\r\n```Java\r\n@RestController\r\npublic class KapowController\r\n{\r\n    private final KapowService kapowService;\r\n\t\r\n\tpublic KapowController(final KapowService kapowServiceValue)\r\n\t{\r\n\t    kapowService = kapowServiceValue;\r\n\t}\r\n\t\r\n\t@PostMapping(value = &quot;/getBooks/{bookId}/{bookAction}&quot;\r\n\tpublic ResponseEntity&lt;BlamType&gt; performBookAction(\r\n\t    @PathVariable(&quot;bookId&quot;) final String bookId,\r\n\t    @PathVariable(&quot;bookAction&quot;) final String bookAction)\r\n\t{\r\n\t\tfinal BlamType result;\r\n\t\t\r\n\t\t// in this case, validate bookid and bookAction in the service.\r\n\t\tresult = kapowService.performBookAction(bookId, bookAction);\r\n\t\t\r\n\t\treturn ResultEntity.status(HttpStatus.OK).body(result);\r\n\t}\r\n}\r\n\r\n@Service\r\npublic class KapowService\r\n{\r\n\tpublic BlamType performBookAction(\r\n\t    final String bookId,\r\n\t    final String bookAction)\r\n\t{\r\n\t\t// do stuff.\r\n\t}\r\n}\r\n```\r\n\r\nNext, you might use a strategy to do the normal and the special stuff.\r\nHere is some code:\r\n```Java\r\npublic interface BookActionStrategy\r\n{\r\n\tBlamType doStuff(BlamType blamType, String bookId, BookAction bookAction);\r\n}\r\n\r\n@Component\r\npublic class BookActionNormal implements BookActionStrategy\r\n{\r\n\tpublic BlamType doStuff(\r\n\t    final BlamType blamType,\r\n\t    final String bookId,\r\n\t\tfinal BookAction bookAction)\r\n\t{\r\n\t\t// do normal stuff.\r\n\t\t// maybe conditionally based on the BookAction.\r\n\t\r\n\t\t// do something meaningful with blamType.\r\n\t\treturn blamType;\r\n\t}\r\n}\r\n\r\n@Component\r\npublic class BookActionSpecial implements BookActionStrategy\r\n{\r\n\tpublic BlamType doStuff(\r\n\t    final BlamType blamType,\r\n\t    final String bookId,\r\n\t\tfinal BookAction bookAction)\r\n\t{\r\n\t\t// do special stuff based on the BookAction.\r\n\t\r\n\t\t// do something meaningful with blamType.\r\n\t\treturn blamType;\r\n\t}\r\n}\r\n```\r\n\r\nInject a `List` of the strategy into the service\r\n\r\n```Java\r\nfinal List&lt;BookActionStrategy&gt; bookActionStrategyList;\r\n\r\nKapowService(final List&lt;BookActionStrategy&gt; bookActionStrategyListValue)\r\n```\r\n\r\nFinally, call each strategy in the `KapowService.performBookAction` method.","title":"Spring: How to decorate some incoming requests with extra logic","body":"<p>You might use a strategy to encapsulate the work.\nImplement it once for the normal stuff and once for each special situation.</p>\n\n<p>Start by separating your request handling from your business logic.\nHere is some code:</p>\n\n<pre><code>@RestController\npublic class KapowController\n{\n    private final KapowService kapowService;\n\n    public KapowController(final KapowService kapowServiceValue)\n    {\n        kapowService = kapowServiceValue;\n    }\n\n    @PostMapping(value = \"/getBooks/{bookId}/{bookAction}\"\n    public ResponseEntity&lt;BlamType&gt; performBookAction(\n        @PathVariable(\"bookId\") final String bookId,\n        @PathVariable(\"bookAction\") final String bookAction)\n    {\n        final BlamType result;\n\n        // in this case, validate bookid and bookAction in the service.\n        result = kapowService.performBookAction(bookId, bookAction);\n\n        return ResultEntity.status(HttpStatus.OK).body(result);\n    }\n}\n\n@Service\npublic class KapowService\n{\n    public BlamType performBookAction(\n        final String bookId,\n        final String bookAction)\n    {\n        // do stuff.\n    }\n}\n</code></pre>\n\n<p>Next, you might use a strategy to do the normal and the special stuff.\nHere is some code:</p>\n\n<pre><code>public interface BookActionStrategy\n{\n    BlamType doStuff(BlamType blamType, String bookId, BookAction bookAction);\n}\n\n@Component\npublic class BookActionNormal implements BookActionStrategy\n{\n    public BlamType doStuff(\n        final BlamType blamType,\n        final String bookId,\n        final BookAction bookAction)\n    {\n        // do normal stuff.\n        // maybe conditionally based on the BookAction.\n\n        // do something meaningful with blamType.\n        return blamType;\n    }\n}\n\n@Component\npublic class BookActionSpecial implements BookActionStrategy\n{\n    public BlamType doStuff(\n        final BlamType blamType,\n        final String bookId,\n        final BookAction bookAction)\n    {\n        // do special stuff based on the BookAction.\n\n        // do something meaningful with blamType.\n        return blamType;\n    }\n}\n</code></pre>\n\n<p>Inject a <code>List</code> of the strategy into the service</p>\n\n<pre><code>final List&lt;BookActionStrategy&gt; bookActionStrategyList;\n\nKapowService(final List&lt;BookActionStrategy&gt; bookActionStrategyListValue)\n</code></pre>\n\n<p>Finally, call each strategy in the <code>KapowService.performBookAction</code> method.</p>\n"}],"owner":{"account_id":159560,"reputation":11453,"user_id":379028,"accept_rate":85,"display_name":"Spring"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":153,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1637418612,"creation_date":1570101053,"question_id":58217938,"body_markdown":"I have a rest controller class with many endpoints doing certain operations on books depending on action. \r\n\r\nMy question is a design question, how do I best get the all action specific business logic **out** from the abstract controller class(handleRequest method)? One of options I considered is GOF Template pattern which can fit here nicely. Problem with that is I dont want to create a different and empty implementation class for each action type. Maybe %80 of the incoming action types have a generic flow. I only want to create an exception for certain action types and add some extra logic to them. Another option is Intercepting Filter pattern, still don&#39;t fit well to my situation. \r\n\r\n    mainController extends AbstractController{\r\n       ....\r\n\r\n      @PostMapping(value = &quot;/getBooks/&quot;)\r\n       public getBooks( @PathVariable ActionType action){\r\n           handleGenericBookRequests(action)\r\n      }\r\n\r\n      ....\r\n  }\r\n\r\n\r\n    abstract class AbstractController{\r\n\r\n     handleGenericBookRequests(action){\r\n      //do mostly generic stuff\r\n      //do generic stuff\r\n     if (action1){\r\n      //do some action1 specific stuff  using action 1 related services\r\n     }\r\n     if(action2){\r\n      //do some action2 specific stuff  using action 2 related services\r\n     }\r\n    \r\n     //continue\r\n     ..\r\n     }\r\n    }","title":"Spring: How to decorate some incoming requests with extra logic","body":"<p>I have a rest controller class with many endpoints doing certain operations on books depending on action.</p>\n<p>My question is a design question, how do I best get the all action specific business logic <strong>out</strong> from the abstract controller class(handleRequest method)? One of options I considered is GOF Template pattern which can fit here nicely. Problem with that is I dont want to create a different and empty implementation class for each action type. Maybe %80 of the incoming action types have a generic flow. I only want to create an exception for certain action types and add some extra logic to them. Another option is Intercepting Filter pattern, still don't fit well to my situation.</p>\n<pre><code>mainController extends AbstractController{\n   ....\n\n  @PostMapping(value = &quot;/getBooks/&quot;)\n   public getBooks( @PathVariable ActionType action){\n       handleGenericBookRequests(action)\n  }\n\n  ....\n</code></pre>\n<p>}</p>\n<pre><code>abstract class AbstractController{\n\n handleGenericBookRequests(action){\n  //do mostly generic stuff\n  //do generic stuff\n if (action1){\n  //do some action1 specific stuff  using action 1 related services\n }\n if(action2){\n  //do some action2 specific stuff  using action 2 related services\n }\n\n //continue\n ..\n }\n}\n</code></pre>\n"},{"tags":["java"],"answers":[{"tags":[],"owner":{"account_id":13429972,"reputation":1807,"user_id":9690075,"display_name":"zysaaa"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1637418376,"creation_date":1637418376,"answer_id":70046810,"question_id":70046745,"body_markdown":"When an exception occurs, you need to &quot;eat&quot; the wrong input, so add ```scnr.next()``` in your ```catch``` block.\r\n```\r\n            try {age = scnr.nextInt();\r\n            }\r\n\r\n            catch (InputMismatchException expct) {\r\n                age = -1;\r\n                scnr.next();\r\n            }\r\n```","title":"unable to understand why my throw/catch output is not working","body":"<p>When an exception occurs, you need to &quot;eat&quot; the wrong input, so add <code>scnr.next()</code> in your <code>catch</code> block.</p>\n<pre><code>            try {age = scnr.nextInt();\n            }\n\n            catch (InputMismatchException expct) {\n                age = -1;\n                scnr.next();\n            }\n</code></pre>\n"}],"owner":{"account_id":23063915,"reputation":13,"user_id":17178611,"display_name":"Jake"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":208,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":70046810,"answer_count":1,"score":0,"last_activity_date":1637418398,"creation_date":1637417853,"question_id":70046745,"body_markdown":"I am just learning about try, and catch in Java. Since the second input in one of the expected outputs is a string and not a number an error is expected. It is expecting this output: \r\n\r\nLee 19\r\nLua 22\r\nMary 0\r\nStu 34\r\n\r\nThe input is:\r\n\r\nLee 18\r\nLua 21\r\nMary Beth 19\r\nStu 33\r\n-1\r\n\r\nSo when I try run my code I actually get: \r\n\r\nLee 19\r\nLua 22\r\nMary 0\r\nBeth 20\r\nStu 34\r\n\r\nMy code:\r\n\r\n    package study3;\r\n    \r\n    import java.util.Scanner;\r\n    import java.util.InputMismatchException;\r\n    \r\n    public class NameAgeChecker {\r\n       public static void main(String[] args) {\r\n          Scanner scnr = new Scanner(System.in);\r\n    \r\n          String inputName;\r\n          int age = 0;\r\n          \r\n          \r\n          \r\n          inputName = scnr.next();\r\n          while (!inputName.equals(&quot;-1&quot;)) {\r\n             // FIXME: The following line will throw an InputMismatchException.\r\n             //        Insert a try/catch statement to catch the exception.\r\n        \t  try {age = scnr.nextInt();\r\n             \r\n             }\r\n             \r\n             catch (InputMismatchException expct) {\r\n            \t \r\n            \t age = -1; \r\n            \t  \r\n             }\r\n             System.out.println(inputName + &quot; &quot; + (age + 1));\r\n             \r\n             inputName = scnr.next();\r\n          }\r\n       }\r\n    }","title":"unable to understand why my throw/catch output is not working","body":"<p>I am just learning about try, and catch in Java. Since the second input in one of the expected outputs is a string and not a number an error is expected. It is expecting this output:</p>\n<p>Lee 19\nLua 22\nMary 0\nStu 34</p>\n<p>The input is:</p>\n<h2>Lee 18\nLua 21\nMary Beth 19\nStu 33</h2>\n<p>So when I try run my code I actually get:</p>\n<p>Lee 19\nLua 22\nMary 0\nBeth 20\nStu 34</p>\n<p>My code:</p>\n<pre><code>package study3;\n\nimport java.util.Scanner;\nimport java.util.InputMismatchException;\n\npublic class NameAgeChecker {\n   public static void main(String[] args) {\n      Scanner scnr = new Scanner(System.in);\n\n      String inputName;\n      int age = 0;\n      \n      \n      \n      inputName = scnr.next();\n      while (!inputName.equals(&quot;-1&quot;)) {\n         // FIXME: The following line will throw an InputMismatchException.\n         //        Insert a try/catch statement to catch the exception.\n          try {age = scnr.nextInt();\n         \n         }\n         \n         catch (InputMismatchException expct) {\n             \n             age = -1; \n              \n         }\n         System.out.println(inputName + &quot; &quot; + (age + 1));\n         \n         inputName = scnr.next();\n      }\n   }\n}\n</code></pre>\n"},{"tags":["java","enums"],"comments":[{"owner":{"account_id":23130421,"reputation":49,"user_id":17235525,"display_name":"goodname"},"score":0,"creation_date":1636733586,"post_id":69945593,"comment_id":123643466,"body_markdown":"You&#39;re right, sorry. I adapted the question to make it easier to follow/explain but I forgot about CardRank (now remained to Position).","body":"You&#39;re right, sorry. I adapted the question to make it easier to follow/explain but I forgot about CardRank (now remained to Position)."}],"answers":[{"tags":[],"owner":{"account_id":1654043,"reputation":2659,"user_id":1524027,"display_name":"mnesarco"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1636736473,"creation_date":1636736473,"answer_id":69946500,"question_id":69945593,"body_markdown":"Maybe adding the order:\r\n\r\n    public enum Position\r\n    {\r\n        ACE(&#39;A&#39;, 14), KING(&#39;K&#39;, 13), QUEEN(&#39;Q&#39;, 12), JACK(&#39;J&#39;, 11),\r\n        TEN(&#39;T&#39;, 10), NINE(&#39;9&#39;, 9), EIGHT(&#39;8&#39;, 8), SEVEN(&#39;7&#39;, 7),\r\n        SIX(&#39;6&#39;, 6), FIVE(&#39;5&#39;, 5), FOUR(&#39;4&#39;, 4), TREY(&#39;3&#39;, 3), DEUCE(&#39;2&#39;, 2);\r\n\r\n        private char symbol;\r\n        private int order;\r\n\r\n        private Position(char symbol, int order)\r\n        {\r\n            this.symbol = symbol;\r\n            this.order = order;\r\n        }\r\n\r\n        public char getSymbol()\r\n        {\r\n            return this.symbol;\r\n        }\r\n\r\n        public boolean isPreceding (Position position) {\r\n           return this.order &lt; position.order;\r\n        }\r\n    }","title":"Comparing numeric values in ENUM to parameters","body":"<p>Maybe adding the order:</p>\n<pre><code>public enum Position\n{\n    ACE('A', 14), KING('K', 13), QUEEN('Q', 12), JACK('J', 11),\n    TEN('T', 10), NINE('9', 9), EIGHT('8', 8), SEVEN('7', 7),\n    SIX('6', 6), FIVE('5', 5), FOUR('4', 4), TREY('3', 3), DEUCE('2', 2);\n\n    private char symbol;\n    private int order;\n\n    private Position(char symbol, int order)\n    {\n        this.symbol = symbol;\n        this.order = order;\n    }\n\n    public char getSymbol()\n    {\n        return this.symbol;\n    }\n\n    public boolean isPreceding (Position position) {\n       return this.order &lt; position.order;\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":22057425,"reputation":135,"user_id":16320675,"display_name":"user16320675"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1637418043,"creation_date":1636792130,"answer_id":69952674,"question_id":69945593,"body_markdown":"Use the `compareTo()` method that is part of every `enum` &lt;sup&gt;**1**&lt;/sup&gt;.\r\n````java\r\npublic boolean isPreceding(Position position) {\r\n    return this.compareTo(position) &lt; 0;\r\n}\r\n````\r\n\r\n----\r\n\r\nIt is not very clear what is meant by *&quot;converting the String parameter to numbers:*, no `String` is not being used in the given code examples. To get the `enum` with a given name, its `valueOf()` method can be used &lt;sup&gt;**2**&lt;/sup&gt;.\r\n````java\r\n// this method is not really needed, call `valueOf()` directly\r\npublic static Position getForName(String name) {\r\n    // eventually use &#39;name.toUpperCase()&#39;\r\n    return Position.valueOf(name);\r\n}\r\n````\r\n\r\nNow it is easy to get the ordinal having the name of the enum:\r\n````java\r\npublic static int ordinalForName(String name) {\r\n    // use &lt;code&gt;name.toUpperCase()&lt;/code&gt; below, if needed \r\n    return Position.valueOf(name).ordinal();\r\n}\r\n````\r\n\r\n---\r\n\r\nTo get an `enum` element, given its `Symbol`, I would use a static `Map` mapping each `Symbol` to its element:\r\n````java\r\nprivate static final Map&lt;Character, Position&gt; positions = Collections.unmodifiableMap(\r\n    Arrays.stream(values()).collect(Collectors.toMap(Position::getSymbol, Function.identity()))\r\n    );\r\n    \r\npublic static Position getForSymPosition(char symbol) {\r\n    return positions.get(symbol);\r\n}\r\n````\r\n\r\n-----\r\n-----\r\n\r\n&lt;sup&gt;The methods are intended to be added to the `enum` class.&lt;/sup&gt; \r\n\r\n\r\n**1** - see documentation of its superclass: [Enum](https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Enum.html#compareTo(E))  \r\n**2** - `valueOf()` is added to all enums ass described in [JLS 8.9.3](https://docs.oracle.com/javase/specs/jls/se17/html/jls-8.html#jls-8.9.3-100-E)","title":"Comparing numeric values in ENUM to parameters","body":"<p>Use the <code>compareTo()</code> method that is part of every <code>enum</code> <sup><strong>1</strong></sup>.</p>\n<pre class=\"lang-java prettyprint-override\"><code>public boolean isPreceding(Position position) {\n    return this.compareTo(position) &lt; 0;\n}\n</code></pre>\n<hr />\n<p>It is not very clear what is meant by <em>&quot;converting the String parameter to numbers:</em>, no <code>String</code> is not being used in the given code examples. To get the <code>enum</code> with a given name, its <code>valueOf()</code> method can be used <sup><strong>2</strong></sup>.</p>\n<pre class=\"lang-java prettyprint-override\"><code>// this method is not really needed, call `valueOf()` directly\npublic static Position getForName(String name) {\n    // eventually use 'name.toUpperCase()'\n    return Position.valueOf(name);\n}\n</code></pre>\n<p>Now it is easy to get the ordinal having the name of the enum:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public static int ordinalForName(String name) {\n    // use &lt;code&gt;name.toUpperCase()&lt;/code&gt; below, if needed \n    return Position.valueOf(name).ordinal();\n}\n</code></pre>\n<hr />\n<p>To get an <code>enum</code> element, given its <code>Symbol</code>, I would use a static <code>Map</code> mapping each <code>Symbol</code> to its element:</p>\n<pre class=\"lang-java prettyprint-override\"><code>private static final Map&lt;Character, Position&gt; positions = Collections.unmodifiableMap(\n    Arrays.stream(values()).collect(Collectors.toMap(Position::getSymbol, Function.identity()))\n    );\n    \npublic static Position getForSymPosition(char symbol) {\n    return positions.get(symbol);\n}\n</code></pre>\n<hr />\n<hr />\n<p><sup>The methods are intended to be added to the <code>enum</code> class.</sup></p>\n<p><strong>1</strong> - see documentation of its superclass: <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Enum.html#compareTo(E)\" rel=\"nofollow noreferrer\">Enum</a><br />\n<strong>2</strong> - <code>valueOf()</code> is added to all enums ass described in <a href=\"https://docs.oracle.com/javase/specs/jls/se17/html/jls-8.html#jls-8.9.3-100-E\" rel=\"nofollow noreferrer\">JLS 8.9.3</a></p>\n"}],"owner":{"account_id":23130421,"reputation":49,"user_id":17235525,"display_name":"goodname"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":126,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":69952674,"answer_count":2,"score":1,"last_activity_date":1637418043,"creation_date":1636732225,"question_id":69945593,"body_markdown":"I have the following enum which represents a CardRank, in descending order.\r\n```\r\n    public enum Position\r\n    {\r\n        ACE(&#39;A&#39;), KING(&#39;K&#39;), QUEEN(&#39;Q&#39;), JACK(&#39;J&#39;),\r\n        TEN(&#39;T&#39;), NINE(&#39;9&#39;), EIGHT(&#39;8&#39;), SEVEN(&#39;7&#39;),\r\n        SIX(&#39;6&#39;), FIVE(&#39;5&#39;), FOUR(&#39;4&#39;), TREY(&#39;3&#39;), DEUCE(&#39;2&#39;);\r\n\r\n        private char symbol;\r\n\r\n        private Position(char symbol)\r\n        {\r\n            this.symbol = symbol;\r\n        }\r\n\r\n        public char getSymbol()\r\n        {\r\n            return this.symbol;\r\n        }\r\n    }\r\n```\r\nI need to compare **the parameter given to the method to the values assigned to each enum element**. When the given card parameter has a lower rank, this method should return false, and when the given parameter has an equal or higher rank it should return true. \r\n\r\n**TEST** to make this question more clear.\r\n\r\n```\r\n    @Test\r\n    void testOrder() {\r\n        position = Position.TEN;\r\n        assertFalse(position.isPreceding(Position.ACE));\r\n        assertFalse(position.isPreceding(Position.KING));\r\n        assertFalse(position.isPreceding(Position.QUEEN));\r\n        assertTrue(position.isPreceding(Position.NINE));\r\n\r\n        position = Position.TREY;\r\n        assertFalse(position.isPreceding(Position.FOUR));\r\n        assertFalse(position.isPreceding(Position.FIVE));\r\n        assertFalse(position.isPreceding(Position.SIX));\r\n        assertTrue(position.isPreceding(Position.DEUCE));\r\n\r\n        position = Position.KING;\r\n        assertTrue(position.isPreceding(Position.QUEEN));\r\n        assertTrue(position.isPreceding(Position.NINE));\r\n        assertTrue(position.isPreceding(Position.DEUCE));\r\n    }\r\n\r\n```\r\n\r\nI found that ```compareTo()``` or ```ordinal()``` methods appear the way to go, but I&#39;m having trouble converting the String parameter to numbers.\r\n\r\nThis is my latest attempt: \r\n```\r\n    public boolean isOrdered (Position position) {\r\n        for (Position p : values()) {\r\n            if (position.compareTo(p) &gt;=0)\r\n                return true;\r\n        }\r\n        return false;\r\n    }\r\n```\r\nManaged to solve it. ","title":"Comparing numeric values in ENUM to parameters","body":"<p>I have the following enum which represents a CardRank, in descending order.</p>\n<pre><code>    public enum Position\n    {\n        ACE('A'), KING('K'), QUEEN('Q'), JACK('J'),\n        TEN('T'), NINE('9'), EIGHT('8'), SEVEN('7'),\n        SIX('6'), FIVE('5'), FOUR('4'), TREY('3'), DEUCE('2');\n\n        private char symbol;\n\n        private Position(char symbol)\n        {\n            this.symbol = symbol;\n        }\n\n        public char getSymbol()\n        {\n            return this.symbol;\n        }\n    }\n</code></pre>\n<p>I need to compare <strong>the parameter given to the method to the values assigned to each enum element</strong>. When the given card parameter has a lower rank, this method should return false, and when the given parameter has an equal or higher rank it should return true.</p>\n<p><strong>TEST</strong> to make this question more clear.</p>\n<pre><code>    @Test\n    void testOrder() {\n        position = Position.TEN;\n        assertFalse(position.isPreceding(Position.ACE));\n        assertFalse(position.isPreceding(Position.KING));\n        assertFalse(position.isPreceding(Position.QUEEN));\n        assertTrue(position.isPreceding(Position.NINE));\n\n        position = Position.TREY;\n        assertFalse(position.isPreceding(Position.FOUR));\n        assertFalse(position.isPreceding(Position.FIVE));\n        assertFalse(position.isPreceding(Position.SIX));\n        assertTrue(position.isPreceding(Position.DEUCE));\n\n        position = Position.KING;\n        assertTrue(position.isPreceding(Position.QUEEN));\n        assertTrue(position.isPreceding(Position.NINE));\n        assertTrue(position.isPreceding(Position.DEUCE));\n    }\n\n</code></pre>\n<p>I found that <code>compareTo()</code> or <code>ordinal()</code> methods appear the way to go, but I'm having trouble converting the String parameter to numbers.</p>\n<p>This is my latest attempt:</p>\n<pre><code>    public boolean isOrdered (Position position) {\n        for (Position p : values()) {\n            if (position.compareTo(p) &gt;=0)\n                return true;\n        }\n        return false;\n    }\n</code></pre>\n<p>Managed to solve it.</p>\n"},{"tags":["python","java","aes","encryption-symmetric"],"comments":[{"owner":{"account_id":401843,"reputation":89788,"user_id":768644,"display_name":"rzwitserloot"},"score":0,"creation_date":1637365794,"post_id":70041796,"comment_id":123815805,"body_markdown":"What is the exact value of `SYMMETRIC_KEY_ALGORITHM`? If it is literally just &quot;AES&quot;, __this code was entirely insecure__ and you don&#39;t _want_ to port it. You want to find everything encrypted with it and notify that it&#39;s all to be considered compromised (AES defaults to ECB mode, which is a problem).","body":"What is the exact value of <code>SYMMETRIC_KEY_ALGORITHM</code>? If it is literally just &quot;AES&quot;, <b>this code was entirely insecure</b> and you don&#39;t <i>want</i> to port it. You want to find everything encrypted with it and notify that it&#39;s all to be considered compromised (AES defaults to ECB mode, which is a problem)."},{"owner":{"account_id":11125108,"reputation":5965,"user_id":8166854,"display_name":"Michael Fehr"},"score":0,"creation_date":1637366565,"post_id":70041796,"comment_id":123815940,"body_markdown":"Just a note regarding your Text/string conversion to bytes - please use a charset like &quot;utf8&quot; when working on different devices and/or frameworks","body":"Just a note regarding your Text/string conversion to bytes - please use a charset like &quot;utf8&quot; when working on different devices and/or frameworks"},{"owner":{"account_id":1669466,"reputation":658,"user_id":1536209,"accept_rate":25,"display_name":"jwh20"},"score":0,"creation_date":1637368105,"post_id":70041796,"comment_id":123816177,"body_markdown":"@rzwitserloot Yes, it&#39;s literally AES and yes, I realize it&#39;s insecure.  Unfortunately this is what I have to work with at present.  Believe it or not, this is the least of the security issues with this code base.","body":"@rzwitserloot Yes, it&#39;s literally AES and yes, I realize it&#39;s insecure.  Unfortunately this is what I have to work with at present.  Believe it or not, this is the least of the security issues with this code base."},{"owner":{"account_id":1669466,"reputation":658,"user_id":1536209,"accept_rate":25,"display_name":"jwh20"},"score":0,"creation_date":1637368233,"post_id":70041796,"comment_id":123816193,"body_markdown":"@MichaelFehr can you please be more specific? I&#39;m not following your comment.","body":"@MichaelFehr can you please be more specific? I&#39;m not following your comment."},{"owner":{"account_id":11125108,"reputation":5965,"user_id":8166854,"display_name":"Michael Fehr"},"score":0,"creation_date":1637392018,"post_id":70041796,"comment_id":123818885,"body_markdown":"Kindly use &quot;plaintext.getBytes(StandardCharsets.UTF_8)&quot; for the string to data conversion","body":"Kindly use &quot;plaintext.getBytes(StandardCharsets.UTF_8)&quot; for the string to data conversion"},{"owner":{"account_id":1669466,"reputation":658,"user_id":1536209,"accept_rate":25,"display_name":"jwh20"},"score":0,"creation_date":1637402067,"post_id":70041796,"comment_id":123820415,"body_markdown":"@MichaelFehr That&#39;s on the Java side which is the &quot;reference&quot; implementation.  I need to replicate its output on the Python side.","body":"@MichaelFehr That&#39;s on the Java side which is the &quot;reference&quot; implementation.  I need to replicate its output on the Python side."}],"answers":[{"tags":[],"owner":{"account_id":401843,"reputation":89788,"user_id":768644,"display_name":"rzwitserloot"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1637369139,"creation_date":1637369139,"answer_id":70042373,"question_id":70041796,"body_markdown":"You need __everything__ to be the exact same between both versions. This is not currently true; fix that.\r\n\r\nYour java code uses:\r\n\r\n* AES at block size 128, because that&#39;s just how AES rolls. Nothing to configure.\r\n* AES key size of 128, 192, or 256 bits.\r\n* The key.\r\n* The Mode of Operation. Your java code uses ECB (which is insecure). You&#39;ve told your python code to use GCM. That&#39;s, obviously, not going to work. You need to specify ECB there, too.\r\n* Given that it&#39;s ECB, there is no IV.\r\n* The padding mode. Java code is doing PKCS5Padding here.\r\n* Crypto is fundamentally byte based but you&#39;re trying to encrypt strings, which aren&#39;t. That means the string is being converted to bytes, and that means a charset encoding is used. You didn&#39;t specify in your java code which means you get &#39;platform default&#39;. Horrible idea, but if you can&#39;t change the java side, figure out what that is, and use the same encoding in your python code.\r\n* Finally, your java code base64&#39;s the result.\r\n\r\nFor most of these, I simply can&#39;t tell you; the code you pasted is insufficient. For example, AES key size and whether the keys are actually identical? I have no idea - you tell me. How did you make that `SecretKey key` object?\r\n\r\nI&#39;m not as familiar with python but it sure looks like you base64-encode it, and then decode it again. That&#39;s.. no, don&#39;t do that. Your java code encodes and that&#39;s that. Your python code should base64 encode and that&#39;s that.\r\n\r\nI&#39;m pretty sure python also defaults to PKCS5Padding.\r\n\r\nThat leaves the encoding mode which you 100% mismatched between java and python give what little code you pasted, and the way you construct the keys. If the text you&#39;re encrypting isn&#39;t straight ASCII, it&#39;s somewhat likely charset encoding is also causing a difference.\r\n\r\nIt&#39;s crypto. One tiny difference and the outputs will be quite different.\r\n","title":"AES Encryption in Java porting to Python","body":"<p>You need <strong>everything</strong> to be the exact same between both versions. This is not currently true; fix that.</p>\n<p>Your java code uses:</p>\n<ul>\n<li>AES at block size 128, because that's just how AES rolls. Nothing to configure.</li>\n<li>AES key size of 128, 192, or 256 bits.</li>\n<li>The key.</li>\n<li>The Mode of Operation. Your java code uses ECB (which is insecure). You've told your python code to use GCM. That's, obviously, not going to work. You need to specify ECB there, too.</li>\n<li>Given that it's ECB, there is no IV.</li>\n<li>The padding mode. Java code is doing PKCS5Padding here.</li>\n<li>Crypto is fundamentally byte based but you're trying to encrypt strings, which aren't. That means the string is being converted to bytes, and that means a charset encoding is used. You didn't specify in your java code which means you get 'platform default'. Horrible idea, but if you can't change the java side, figure out what that is, and use the same encoding in your python code.</li>\n<li>Finally, your java code base64's the result.</li>\n</ul>\n<p>For most of these, I simply can't tell you; the code you pasted is insufficient. For example, AES key size and whether the keys are actually identical? I have no idea - you tell me. How did you make that <code>SecretKey key</code> object?</p>\n<p>I'm not as familiar with python but it sure looks like you base64-encode it, and then decode it again. That's.. no, don't do that. Your java code encodes and that's that. Your python code should base64 encode and that's that.</p>\n<p>I'm pretty sure python also defaults to PKCS5Padding.</p>\n<p>That leaves the encoding mode which you 100% mismatched between java and python give what little code you pasted, and the way you construct the keys. If the text you're encrypting isn't straight ASCII, it's somewhat likely charset encoding is also causing a difference.</p>\n<p>It's crypto. One tiny difference and the outputs will be quite different.</p>\n"}],"owner":{"account_id":1669466,"reputation":658,"user_id":1536209,"accept_rate":25,"display_name":"jwh20"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":326,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":70042373,"answer_count":1,"score":1,"last_activity_date":1637417609,"creation_date":1637362726,"question_id":70041796,"body_markdown":"***DISCLAIMER**: This is INSECURE encryption that I&#39;ve inherited and everyone involved knows that. What I&#39;m trying to do here is a first step in getting off this legacy system that has even bigger problems that this.*\r\n\r\n\r\nI have an existing system in Java that I am attempting to port to Python that performs an AES encryption as such:\r\n\r\n    public static String encrypt(String text, SecretKey secretKey) throws Exception {\r\n        byte[] cipherText = null;\r\n        String encryptedString = null;\r\n    \r\n        // get an RSA cipher object and print the provider\r\n        Cipher cipher = Cipher.getInstance(SYMMETRIC_KEY_ALGORITHM); // AES\r\n    \r\n        // encrypt the plain text using the public key\r\n        cipher.init(Cipher.ENCRYPT_MODE, secretKey);\r\n        cipherText = cipher.doFinal(text.getBytes());\r\n        encryptedString = Base64.getEncoder().encodeToString(cipherText);\r\n    \r\n        return encryptedString;\r\n    }\r\n\r\nThe problem I&#39;m having is trying to get the same combination of AES settings to get the same result using Python and the Cryptography library from:\r\n\r\n[Python Cryptography][1]\r\n\r\nI see lots of examples from the seemingly defunct PyCrypto library which I cannot even get to install on my Windows system much less work.\r\n\r\nMy latest attempt is like this and I do get encryption but it doesn&#39;t match the Java AES output:\r\n\r\n    from cryptography.hazmat.primitives.ciphers import Cipher, algorithms, modes\r\n\r\n    key = b&#39;Some random key &#39;\r\n    cipher = Cipher(algorithms.AES(key), modes.GCM(b&#39;000000000000&#39;))\r\n    encryptor = cipher.encryptor()\r\n    ct = encryptor.update(ENC_MESSAGE)\r\n    \r\n    base64EncodedStr = base64.b64encode(ct).decode(&#39;utf-8&#39;)\r\n    print(&#39;BASE64:&#39;, base64EncodedStr)\r\n\r\n*****************************************************************\r\n\r\nUpdate based on rzwitserloot&#39;s answer.\r\n\r\nI changed the mode from GCM to ECB and the result I&#39;m now getting in Python is almost the same.  First of all here is what the updated code looks like:\r\n\r\n    key = b&#39;Some random key &#39;\r\n    \r\n    cipher = Cipher(algorithms.AES(key), modes.ECB())\r\n    encryptor = cipher.encryptor()\r\n    ct = encryptor.update(PLAINTEXT.encode(&#39;utf-8&#39;))\r\n    \r\n    base64EncodedStr = base64.b64encode(ct).decode(&#39;utf-8&#39;)\r\n    print(&#39;Encrypted:&#39;, base64EncodedStr)\r\n\r\n\r\nThe reference (i.e. Java) output is 1004 characters long while the Python output is only 984 characters long.  But up to 3 characters from the end of the Python string they match:\r\n\r\n[![Output Strings][2]][2]\r\n\r\n\r\nI did check with decryption and found that both encrypted text string decrypt to the same plaintext.\r\n\r\nFINAL UPDATE:\r\n\r\nThe padding was the problem.  I updated the code to use PKCS7 padding like this and I am now getting the same result from Java and Python:\r\n\r\n    from cryptography.hazmat.primitives import padding as symmetric_padding\r\n    \r\n    padder = symmetric_padding.PKCS7(algorithms.AES.block_size).padder()\r\n    padded_data = padder.update(PLAINTEXT.encode(&#39;utf-8&#39;)) + padder.finalize()\r\n    \r\n    ct = encryptor.update(padded_data)\r\n\r\n  [1]: https://cryptography.io/en/latest/\r\n  [2]: https://i.stack.imgur.com/ULblb.png","title":"AES Encryption in Java porting to Python","body":"<p><em><strong>DISCLAIMER</strong>: This is INSECURE encryption that I've inherited and everyone involved knows that. What I'm trying to do here is a first step in getting off this legacy system that has even bigger problems that this.</em></p>\n<p>I have an existing system in Java that I am attempting to port to Python that performs an AES encryption as such:</p>\n<pre><code>public static String encrypt(String text, SecretKey secretKey) throws Exception {\n    byte[] cipherText = null;\n    String encryptedString = null;\n\n    // get an RSA cipher object and print the provider\n    Cipher cipher = Cipher.getInstance(SYMMETRIC_KEY_ALGORITHM); // AES\n\n    // encrypt the plain text using the public key\n    cipher.init(Cipher.ENCRYPT_MODE, secretKey);\n    cipherText = cipher.doFinal(text.getBytes());\n    encryptedString = Base64.getEncoder().encodeToString(cipherText);\n\n    return encryptedString;\n}\n</code></pre>\n<p>The problem I'm having is trying to get the same combination of AES settings to get the same result using Python and the Cryptography library from:</p>\n<p><a href=\"https://cryptography.io/en/latest/\" rel=\"nofollow noreferrer\">Python Cryptography</a></p>\n<p>I see lots of examples from the seemingly defunct PyCrypto library which I cannot even get to install on my Windows system much less work.</p>\n<p>My latest attempt is like this and I do get encryption but it doesn't match the Java AES output:</p>\n<pre><code>from cryptography.hazmat.primitives.ciphers import Cipher, algorithms, modes\n\nkey = b'Some random key '\ncipher = Cipher(algorithms.AES(key), modes.GCM(b'000000000000'))\nencryptor = cipher.encryptor()\nct = encryptor.update(ENC_MESSAGE)\n\nbase64EncodedStr = base64.b64encode(ct).decode('utf-8')\nprint('BASE64:', base64EncodedStr)\n</code></pre>\n<hr />\n<p>Update based on rzwitserloot's answer.</p>\n<p>I changed the mode from GCM to ECB and the result I'm now getting in Python is almost the same.  First of all here is what the updated code looks like:</p>\n<pre><code>key = b'Some random key '\n\ncipher = Cipher(algorithms.AES(key), modes.ECB())\nencryptor = cipher.encryptor()\nct = encryptor.update(PLAINTEXT.encode('utf-8'))\n\nbase64EncodedStr = base64.b64encode(ct).decode('utf-8')\nprint('Encrypted:', base64EncodedStr)\n</code></pre>\n<p>The reference (i.e. Java) output is 1004 characters long while the Python output is only 984 characters long.  But up to 3 characters from the end of the Python string they match:</p>\n<p><a href=\"https://i.stack.imgur.com/ULblb.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/ULblb.png\" alt=\"Output Strings\" /></a></p>\n<p>I did check with decryption and found that both encrypted text string decrypt to the same plaintext.</p>\n<p>FINAL UPDATE:</p>\n<p>The padding was the problem.  I updated the code to use PKCS7 padding like this and I am now getting the same result from Java and Python:</p>\n<pre><code>from cryptography.hazmat.primitives import padding as symmetric_padding\n\npadder = symmetric_padding.PKCS7(algorithms.AES.block_size).padder()\npadded_data = padder.update(PLAINTEXT.encode('utf-8')) + padder.finalize()\n\nct = encryptor.update(padded_data)\n</code></pre>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":4819600,"reputation":56500,"user_id":3890632,"display_name":"khelwood"},"score":2,"creation_date":1570435718,"post_id":58265634,"comment_id":102898906,"body_markdown":"Only different if you go on to use `t` for something else.","body":"Only different if you go on to use <code>t</code> for something else."},{"owner":{"account_id":1263831,"reputation":388998,"user_id":1221571,"accept_rate":67,"display_name":"Eran"},"score":2,"creation_date":1570435737,"post_id":58265634,"comment_id":102898917,"body_markdown":"`I do find the difference in stability when creating android apps` - what do you mean by that? Can you elaborate what difference in stability you found?","body":"<code>I do find the difference in stability when creating android apps</code> - what do you mean by that? Can you elaborate what difference in stability you found?"},{"owner":{"account_id":2994830,"reputation":1,"user_id":2541560,"display_name":"Kayaman"},"score":1,"creation_date":1570435828,"post_id":58265634,"comment_id":102898955,"body_markdown":"The code above is identical when compiled, so there&#39;s no difference. Especially in anything related to performance.","body":"The code above is identical when compiled, so there&#39;s no difference. Especially in anything related to performance."},{"owner":{"account_id":2803497,"reputation":25202,"user_id":2411243,"display_name":"Zabuzard"},"score":1,"creation_date":1570436475,"post_id":58265634,"comment_id":102899203,"body_markdown":"@Kayaman What about scope? Will Java be able to garbage-collect the second example earlier than the first, thinking about a laaaaarge method where the scope for `t` is looong.","body":"@Kayaman What about scope? Will Java be able to garbage-collect the second example earlier than the first, thinking about a laaaaarge method where the scope for <code>t</code> is looong."},{"owner":{"account_id":2994830,"reputation":1,"user_id":2541560,"display_name":"Kayaman"},"score":2,"creation_date":1570436920,"post_id":58265634,"comment_id":102899379,"body_markdown":"@Zabuza even if the scope is large, if the variable isn&#39;t used anymore it won&#39;t make a difference in the execution. Scope affects the compiler, not so much the running code. Even in the second version it would most likely be freed after the method ends as the stack is popped. Not to mention that the whole object could be instantiated on the stack in special cases. Trying to understand the JVM execution based on 2 lines of code is like shooting in the dark.","body":"@Zabuza even if the scope is large, if the variable isn&#39;t used anymore it won&#39;t make a difference in the execution. Scope affects the compiler, not so much the running code. Even in the second version it would most likely be freed after the method ends as the stack is popped. Not to mention that the whole object could be instantiated on the stack in special cases. Trying to understand the JVM execution based on 2 lines of code is like shooting in the dark."},{"owner":{"account_id":3344055,"reputation":58,"user_id":2809575,"accept_rate":67,"display_name":"Shaqimi Yusof"},"score":0,"creation_date":1570441878,"post_id":58265634,"comment_id":102901615,"body_markdown":"@Eran my old company had a lot of thing like AccountCase acct = new AccountCase() and assigning Account t = acct.getAllAccount() which gives out like &gt; 50000k lines of data, and they kept similar object like that in different variables, and they would loop or select whatever from that 50000k lines and creates a very slow processing. I just bypassed all those variables and directly used for examples like for (Account acct : new AccountCase().getAllAccount()), and did that for all other similar instances of different objects. If that makes sense. The question above is the simplest i can deduce.","body":"@Eran my old company had a lot of thing like AccountCase acct = new AccountCase() and assigning Account t = acct.getAllAccount() which gives out like &gt; 50000k lines of data, and they kept similar object like that in different variables, and they would loop or select whatever from that 50000k lines and creates a very slow processing. I just bypassed all those variables and directly used for examples like for (Account acct : new AccountCase().getAllAccount()), and did that for all other similar instances of different objects. If that makes sense. The question above is the simplest i can deduce."}],"answers":[{"tags":[],"owner":{"account_id":17835,"reputation":303895,"user_id":40342,"accept_rate":62,"display_name":"Joachim Sauer"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1570435817,"creation_date":1570435817,"answer_id":58265664,"question_id":58265634,"body_markdown":"If `t` is a local variable and you do nothing else with `t` then the two are completely identical.\r\n\r\nIf `t` is a *field* that may be accessed by others, then the two can differ quite significantly, especially in multi-threaded code.","title":"Object declaration vs instantiation","body":"<p>If <code>t</code> is a local variable and you do nothing else with <code>t</code> then the two are completely identical.</p>\n\n<p>If <code>t</code> is a <em>field</em> that may be accessed by others, then the two can differ quite significantly, especially in multi-threaded code.</p>\n"}],"owner":{"account_id":3344055,"reputation":58,"user_id":2809575,"accept_rate":67,"display_name":"Shaqimi Yusof"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":69,"favorite_count":0,"down_vote_count":2,"up_vote_count":1,"answer_count":1,"score":-1,"last_activity_date":1637417306,"creation_date":1570435660,"question_id":58265634,"body_markdown":"Is there a difference in time execution and memory between\r\n\r\n    Test t = new Test();\r\n    t.testSomething();\r\n\r\nand\r\n\r\n    new Test().testSomething();\r\n\r\nI do find the difference in stability when creating Android apps, but then again I need an explanation as to why.","title":"Object declaration vs instantiation","body":"<p>Is there a difference in time execution and memory between</p>\n<pre><code>Test t = new Test();\nt.testSomething();\n</code></pre>\n<p>and</p>\n<pre><code>new Test().testSomething();\n</code></pre>\n<p>I do find the difference in stability when creating Android apps, but then again I need an explanation as to why.</p>\n"},{"tags":["java","javafx"],"comments":[{"owner":{"account_id":70123,"reputation":51175,"user_id":203657,"accept_rate":53,"display_name":"kleopatra"},"score":0,"creation_date":1637415019,"post_id":70045630,"comment_id":123822837,"body_markdown":"btw: edit and change the code into a [mcve] - there is too much unrelated stuff .. and stick to conventions, NOW!","body":"btw: edit and change the code into a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> - there is too much unrelated stuff .. and stick to conventions, NOW!"},{"owner":{"account_id":19771906,"reputation":33,"user_id":14478725,"display_name":"Tamada"},"score":0,"creation_date":1637415794,"post_id":70045630,"comment_id":123822986,"body_markdown":"@kleopatra  And now?","body":"@kleopatra  And now?"},{"owner":{"account_id":47283,"reputation":703817,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"score":0,"creation_date":1637417596,"post_id":70045630,"comment_id":123823345,"body_markdown":"Still way too much irrelevant stuff.  The actual cause of your problems is in about 20 to 30 lines of the code.  The UI stuff is all irrelevant.","body":"Still way too much irrelevant stuff.  The actual cause of your problems is in about 20 to 30 lines of the code.  The UI stuff is all irrelevant."},{"owner":{"account_id":19771906,"reputation":33,"user_id":14478725,"display_name":"Tamada"},"score":0,"creation_date":1637418257,"post_id":70045630,"comment_id":123823485,"body_markdown":"20 to 30 lines of what? Stack Trace?","body":"20 to 30 lines of what? Stack Trace?"}],"answers":[{"tags":[],"owner":{"account_id":47283,"reputation":703817,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1637417158,"creation_date":1637416824,"answer_id":70046611,"question_id":70045630,"body_markdown":"What you are apparently trying to do is generate a `.class` file that you can then load.  \r\n\r\nBut the problem is that what you are actually writing to &quot;tlog.class&quot; is not in the standard class file format.  In fact, it looks like you are just writing a bunch of numbers using `DataOutputStream` methods.  That isn&#39;t even remotely close to valid&lt;sup&gt;1&lt;/sup&gt;.\r\n\r\nAt any rate, when you then attempt to load the (supposed) class file, the JVM is saying, in effect:\r\n\r\n&gt; *&quot;Nah!  That&#39;s not in a valid class file format.  It doesn&#39;t even start with the correct magic number!&quot;*\r\n\r\nSo what is the solution?\r\n\r\nWell you could (in theory) generate a valid class file.  The problem is that creating a valid class file that implements your function is going to be difficult, and require deep knowledge of Java bytecodes and the structure of class files.  And it is not clear that you are going to achieve anything by doing that.\r\n\r\nHere are a couple of (probably) better ideas.\r\n\r\n1.  Just read and write the data as a data file.  Then write some Java code that implements the required function, using the data that you read from the file.\r\n\r\n2.  Write some Java code to generate Java source code for the function, embedding the data in the file as arrays of constants or whatever.  Then call the Java compiler to compile it, and load the resulting `.class` file.\r\n\r\nThe first option is the simplest, and most likely all that you need.  You *might* consider the second option if the function was performance critical.  But you should only do that if you have *measured* the performance.  Besides, you will probably find the the speedup will be small, and not worth the *considerable* effort needed to achieve it.\r\n\r\n------------------\r\n\r\n&lt;sup&gt;1 - The format is documented in [Chapter 4][1] of the JVM specification.  You will need to understand a lot more of the spec in order to write the bytecodes for the classes methods and pseudo-methods.&lt;/sup&gt;\r\n\r\n\r\n  [1]: https://docs.oracle.com/javase/specs/jvms/se17/html/jvms-4.html","title":"Incompatible magic value in class file JavaFX","body":"<p>What you are apparently trying to do is generate a <code>.class</code> file that you can then load.</p>\n<p>But the problem is that what you are actually writing to &quot;tlog.class&quot; is not in the standard class file format.  In fact, it looks like you are just writing a bunch of numbers using <code>DataOutputStream</code> methods.  That isn't even remotely close to valid<sup>1</sup>.</p>\n<p>At any rate, when you then attempt to load the (supposed) class file, the JVM is saying, in effect:</p>\n<blockquote>\n<p><em>&quot;Nah!  That's not in a valid class file format.  It doesn't even start with the correct magic number!&quot;</em></p>\n</blockquote>\n<p>So what is the solution?</p>\n<p>Well you could (in theory) generate a valid class file.  The problem is that creating a valid class file that implements your function is going to be difficult, and require deep knowledge of Java bytecodes and the structure of class files.  And it is not clear that you are going to achieve anything by doing that.</p>\n<p>Here are a couple of (probably) better ideas.</p>\n<ol>\n<li><p>Just read and write the data as a data file.  Then write some Java code that implements the required function, using the data that you read from the file.</p>\n</li>\n<li><p>Write some Java code to generate Java source code for the function, embedding the data in the file as arrays of constants or whatever.  Then call the Java compiler to compile it, and load the resulting <code>.class</code> file.</p>\n</li>\n</ol>\n<p>The first option is the simplest, and most likely all that you need.  You <em>might</em> consider the second option if the function was performance critical.  But you should only do that if you have <em>measured</em> the performance.  Besides, you will probably find the the speedup will be small, and not worth the <em>considerable</em> effort needed to achieve it.</p>\n<hr />\n<p><sup>1 - The format is documented in <a href=\"https://docs.oracle.com/javase/specs/jvms/se17/html/jvms-4.html\" rel=\"nofollow noreferrer\">Chapter 4</a> of the JVM specification.  You will need to understand a lot more of the spec in order to write the bytecodes for the classes methods and pseudo-methods.</sup></p>\n"}],"owner":{"account_id":19771906,"reputation":33,"user_id":14478725,"display_name":"Tamada"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":404,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"accepted_answer_id":70046611,"answer_count":1,"score":-1,"last_activity_date":1637417158,"creation_date":1637408967,"question_id":70045630,"body_markdown":"I need to implement the tabulate function (using MenuItem TabulateFunction), which is located in a file with the extension .class in the form of byte-code. Since the function can have one of the three classes that implement my interface, then, according to the task, you need to implement a separate class that will be responsible for reading the byte-code from the file and create an object based on this byte-code.\r\n\r\nI made a class ClassLoaderForFunctions and use `return defineClass` in it\r\nAnd here is the problem. When I select Tabulate Function in my menu, it calls the method from ClassLoaderForFunctions which implements the above for the function from the file. \r\n\r\nAnd when it comes to `return defineClass`, I get an error: Exception in thread `JavaFX Application Thread&quot; java.lang.ClassFormatError: Incompatible magic value 11 in class file tlog/class`\r\n\r\nIn the Main class I call the controller and write the byte code of the `tlog` object in a file with the extension .class\r\n\r\n*I deleted the import lines for the sake of Stack Trace\r\n\r\nWhat could be the problem?\r\n\r\n\r\nClassLoaderForFunctions:\r\n\r\n    package JavaFX_Application;\r\n\r\n    public class ClassLoaderForFunctions extends ClassLoader{\r\n\r\n        public Class&lt;?&gt; loadClassFromFile(File file) throws IOException {\r\n        FileInputStream in = new FileInputStream(file);\r\n        byte[] fileContent = new byte[in.available()]; //available - возвращает количество байтов ввода, доступные в данный момент для чтения\r\n        in.read(fileContent);\r\n        in.close();\r\n\r\n        return defineClass(file.getName(), fileContent, 0, fileContent.length);\r\n    }\r\n\r\n    }\r\n\r\n\r\n\r\nFXMLMainFormController:\r\n\r\n            package JavaFX_Application;\r\n\r\n       \r\n\r\n\r\n        public class FXMLMainFormController implements Initializable {\r\n\r\n            public static TabulatedFunctionDoc tabFDoc = new TabulatedFunctionDoc();\r\n            private Stage MainStage;\r\n            private File file;\r\n            private ClassLoaderForFunctions Loader;\r\n            private FXMLMenuController ctrl;\r\n            private Alert dialog;\r\n\r\n            @FXML\r\n            private MenuItem TabulateFunction;\r\n\r\n            @FXML\r\n            private MenuItem NewFunction;\r\n        \r\n            @FXML\r\n            private MenuItem FileClose;\r\n\r\n            @FXML\r\n            private MenuItem OpenFile;\r\n\r\n            @FXML\r\n            private MenuItem SaveFile;\r\n\r\n            @FXML\r\n            private MenuItem SaveFileAs;\r\n\r\n            @FXML\r\n            private TableView&lt;FunctionPointT&gt; table = new TableView&lt;&gt;();\r\n\r\n            @FXML\r\n            private Label point_count;\r\n\r\n            @FXML\r\n            private TextField edX = new TextField(),edY = new TextField();\r\n\r\n            @FXML\r\n            private TableColumn&lt;FunctionPointT,Double&gt; columnX = new         TableColumn&lt;FunctionPointT,Double&gt;(&quot;X&quot;);;\r\n\r\n            @FXML\r\n            private TableColumn&lt;FunctionPointT,Double&gt; columnY = new         TableColumn&lt;FunctionPointT,Double&gt;(&quot;Y&quot;);;\r\n\r\n            @FXML\r\n            private void deletePoint(ActionEvent event) throws IOException {\r\n                if (isSelected()) {\r\n                    tabFDoc.deletePoint(getIndex() - 1);\r\n                } else {\r\n                    if(tabFDoc.getPointsCount() &gt; 2)\r\n                        tabFDoc.deletePoint(tabFDoc.getPointsCount() - 1);\r\n                    else\r\n                        showDialog(&quot;Length of Document &lt; 3&quot;,&quot;Please add some point or stop         trying to delete point&quot;);\r\n\r\n                }\r\n            }\r\n\r\n            @FXML\r\n            private void addPoint(ActionEvent event) throws         InappropriateFunctionPointException, IOException {\r\n                if(!edX.getText().isEmpty() &amp;&amp; !edY.getText().isEmpty()) {\r\n                    tabFDoc.addPoint(new FunctionPoint(Double.parseDouble(edX.getText()),         Double.parseDouble(edY.getText())));\r\n                }\r\n                edX.setText(&quot;&quot;);\r\n                edY.setText(&quot;&quot;);\r\n                //table.getItems().add(new         FunctionPointT(Double.parseDouble(edX.getText()),Double.parseDouble(edY.getText()))); //         добавляем строку\r\n            }\r\n\r\n            @FXML\r\n            public void redraw(){\r\n                if(!table.getColumns().isEmpty())\r\n                    table.getItems().clear();\r\n                ObservableList&lt;FunctionPointT&gt; data = table.getItems();\r\n                for(int i = 0;i&lt; tabFDoc.getPointsCount(); ++ i) {\r\n                    data.add(new         FunctionPointT(tabFDoc.getLink().getPointX(i),tabFDoc.getLink().getPointY(i)));\r\n                }\r\n                if (isSelected()) {\r\n                    point_count.setText(&quot;Point &quot; + getIndex() + &quot; of &quot; + tabFDoc.getPointsCount());\r\n                } else {\r\n                    point_count.setText(&quot;Point &quot; + tabFDoc.getPointsCount() + &quot; of &quot; +         tabFDoc.getPointsCount());\r\n                }\r\n            }\r\n\r\n            @FXML\r\n            private void setSelectedIndexByKey(){\r\n                point_count.setText(&quot;Point &quot; + getIndex() + &quot; of &quot; +         tabFDoc.getPointsCount());\r\n            }\r\n\r\n            @FXML\r\n            private void setSelectedIndexByClick() {\r\n                if(isSelected() &amp;&amp; tabFDoc !=null)\r\n                    point_count.setText(&quot;Point &quot; + getIndex() + &quot; of &quot; +         tabFDoc.getPointsCount());\r\n            }\r\n\r\n            private void openWindow() throws IOException {\r\n                Stage primaryStage = new Stage();\r\n                FXMLLoader loader = new FXMLLoader(getClass().getResource(&quot;FXMLMenu.fxml&quot;));\r\n                Parent root = loader.load();\r\n                ctrl = loader.getController();\r\n                ctrl.setMainController(this);\r\n\r\n                primaryStage.setTitle(&quot;Create New Function&quot;);\r\n                primaryStage.setScene(new Scene(root));\r\n                primaryStage.setResizable(false);\r\n\r\n                primaryStage.initModality(Modality.APPLICATION_MODAL);\r\n                primaryStage.initOwner(MainStage);\r\n                primaryStage.setOnCloseRequest(windowEvent -&gt; {\r\n                    windowEvent.consume();\r\n                });\r\n                primaryStage.showAndWait();\r\n            }\r\n\r\n            private void SaveFunctionAs() throws IOException {\r\n                FileChooser fileChooser = new FileChooser();\r\n                fileChooser.setTitle(&quot;Open file&quot;);\r\n                fileChooser.getExtensionFilters().add(new FileChooser.ExtensionFilter(&quot;Text         files&quot;, &quot;*.json&quot;));\r\n                file = fileChooser.showSaveDialog(table.getScene().getWindow());\r\n                if(file!=null) {\r\n                    tabFDoc.saveFunctionAs(file.getName());\r\n                }\r\n            }\r\n\r\n            @Override\r\n            public void initialize(URL url, ResourceBundle resourceBundle) {\r\n                dialog = new Alert(Alert.AlertType.ERROR);\r\n                tabFDoc.setController(this);\r\n                columnX.setCellValueFactory(new PropertyValueFactory&lt;FunctionPointT,Double&gt;        (&quot;X&quot;));\r\n                table.getColumns().add(columnX);\r\n                columnY.setCellValueFactory(new PropertyValueFactory&lt;FunctionPointT,Double&gt;        (&quot;Y&quot;));\r\n                table.getColumns().add(columnY);\r\n                table.setPrefWidth(573.0);\r\n                table.setPrefHeight(220.0);\r\n                columnY.setPrefWidth(286.5);\r\n                columnX.setPrefWidth(286.5);\r\n                Loader = new ClassLoaderForFunctions();\r\n                ObservableList&lt;FunctionPointT&gt; data = table.getItems();\r\n                for(int i = 0;i&lt; tabFDoc.getPointsCount(); ++ i) {\r\n                    data.add(new         FunctionPointT(tabFDoc.getLink().getPointX(i),tabFDoc.getLink().getPointY(i)));\r\n                }\r\n\r\n                NewFunction.setOnAction(event -&gt; {\r\n                    try {\r\n                        openWindow();\r\n                    } catch (IOException e) {\r\n                        e.printStackTrace();\r\n                    }\r\n                });\r\n                OpenFile.setOnAction(event -&gt;{\r\n                    FileChooser fileChooser = new FileChooser();\r\n                    fileChooser.setTitle(&quot;Open file&quot;);\r\n                    fileChooser.getExtensionFilters().add(new         FileChooser.ExtensionFilter(&quot;Text files&quot;, &quot;*.json&quot;));\r\n                    file = fileChooser.showOpenDialog(table.getScene().getWindow());\r\n                    if(file!=null) {\r\n                        tabFDoc.loadFunction(file.getName());\r\n                        redraw();\r\n                    }\r\n                });\r\n                FileClose.setOnAction(event -&gt;{\r\n                    MainStage.close();\r\n                });\r\n                SaveFile.setOnAction(event -&gt;{\r\n                    try {\r\n                        tabFDoc.saveFunction();\r\n                    } catch (IOException e) {\r\n                        e.printStackTrace();\r\n                    }\r\n                });\r\n                SaveFileAs.setOnAction(event -&gt; {\r\n                    try {\r\n                        SaveFunctionAs();\r\n                    } catch (IOException e) {\r\n                       e.printStackTrace();\r\n                    }\r\n                });\r\n                TabulateFunction.setOnAction(event-&gt;{\r\n                    try {\r\n                        FileChooser fileChooser = new FileChooser();\r\n                        fileChooser.setTitle(&quot;Open class&quot;);\r\n                        fileChooser.getExtensionFilters().add(new         FileChooser.ExtensionFilter(&quot;Class files&quot;, &quot;*.class&quot;));\r\n                        file = fileChooser.showOpenDialog(table.getScene().getWindow());\r\n                        //tabFDoc.setFunction((Function)         Loader.loadClassFromFile(file).getConstructor().newInstance());\r\n                        if (file != null) {\r\n                            openWindow();\r\n                            if(ctrl.getLeftDomainBorderBorder() != Double.POSITIVE_INFINITY         &amp;&amp; ctrl.getRightDomainBorderBorder() != Double.NEGATIVE_INFINITY &amp;&amp; ctrl.getPointsCount() &gt;         2) {\r\n                                tabFDoc.tabulateFunction((Function)         Loader.loadClassFromFile(file).getConstructor().newInstance(),         ctrl.getLeftDomainBorderBorder(), ctrl.getRightDomainBorderBorder(), ctrl.getPointsCount());\r\n                                redraw();\r\n                            }\r\n                        }\r\n                    }\r\n                    catch (Exception e) {\r\n                    }\r\n                });\r\n\r\n\r\n            }\r\n\r\n            public boolean isSelected(){\r\n                return (table.getSelectionModel().getSelectedItem() != null);\r\n            }\r\n\r\n            private int getIndex(){\r\n                int index = 0;\r\n                if (isSelected()) {\r\n                    for (int i = 0; i &lt; tabFDoc.getPointsCount(); ++i) {\r\n                        if (table.getSelectionModel().getSelectedItem().getX() ==         tabFDoc.getLink().getPointX(i) &amp;&amp; table.getSelectionModel().getSelectedItem().getY() ==         tabFDoc.getLink().getPointY(i))\r\n                            index = i + 1;\r\n                    }\r\n                }\r\n                return index++;\r\n            }\r\n\r\n            public void setStage(Stage stage){\r\n                MainStage = stage;\r\n            }\r\n\r\n            public Stage getStage(){\r\n                return MainStage;\r\n            }\r\n\r\n            public TabulatedFunctionDoc getTabFDoc(){\r\n                return tabFDoc;\r\n            }\r\n\r\n            public void showDialog(String header, String message) {\r\n\r\n                dialog.setHeaderText(header);\r\n                dialog.setTitle(&quot;Error&quot;);\r\n                dialog.setContentText(message);\r\n                dialog.showAndWait();\r\n\r\n            }\r\n\r\n        }\r\n    \r\n\r\nTabulatedFunctionDoc:\r\n\r\n    package JavaFX_Application;\r\n\r\n    import functions.*;\r\n\r\n    import java.io.FileNotFoundException;\r\n    import java.io.FileReader;\r\n    import java.io.FileWriter;\r\n    import java.io.IOException;\r\n\r\n    import org.json.simple.JSONArray;\r\n    import org.json.simple.JSONObject;\r\n    import org.json.simple.parser.JSONParser;\r\n    import org.json.simple.parser.ParseException;\r\n\r\n    public class TabulatedFunctionDoc implements TabulatedFunction {\r\n        private TabulatedFunction Link;\r\n        private String fileName = &quot;&quot;;\r\n        private boolean modified = false;\r\n        private boolean fileNameAssigned = false;\r\n        private FXMLMainFormController controller;\r\n        private Function function = null;\r\n\r\n\r\n        public TabulatedFunctionDoc() {\r\n            Link = new ArrayTabulatedFunction(-1, 1, 2);\r\n        }\r\n\r\n        public void setFunction(Function input_function){\r\n            function = input_function;\r\n        }\r\n\r\n    public void setController(FXMLMainFormController ctrl) {\r\n        this.controller = ctrl;\r\n    }\r\n\r\n    public void CallRedraw() throws IOException {\r\n        if(registerRedrawFunctionController(controller))\r\n            controller.redraw();\r\n    }\r\n\r\n    public TabulatedFunction getLink() {\r\n        return Link;\r\n    }\r\n\r\n    public boolean registerRedrawFunctionController(FXMLMainFormController ctrl) {\r\n        return ctrl.getStage().isShowing();\r\n    }\r\n\r\n    public boolean isModified() {\r\n        return modified;\r\n    }\r\n\r\n    public boolean isFileNameAssigned() {\r\n        return fileNameAssigned;\r\n    }\r\n\r\n    public void newFunction(double leftX, double rightX, int pointsCount) throws IOException {\r\n        Link = new ArrayTabulatedFunction(leftX, rightX, pointsCount);\r\n        modified = false;\r\n    }\r\n\r\n    public void tabulateFunction(Function function, double leftX, double rightX, int pointsCount) {\r\n        Link = TabulatedFunctions.tabulate(function, leftX, rightX, pointsCount);\r\n        modified = false;\r\n    }\r\n\r\n    public void saveFunctionAs(String fileName) throws IOException {\r\n        this.fileName = fileName;\r\n        fileNameAssigned = true;\r\n        saveFunction();\r\n        modified = false;\r\n    }\r\n\r\n    public void loadFunction(String fileName) {\r\n        this.fileName = fileName;\r\n        fileNameAssigned = true;\r\n\r\n        JSONParser jsonParser = new JSONParser();\r\n\r\n        try (FileReader reader = new FileReader(fileName))\r\n        {\r\n            Object obj = jsonParser.parse(reader);\r\n            JSONArray employeeList = (JSONArray) obj;\r\n            FunctionPoint[] array = new FunctionPoint[employeeList.size()];\r\n            //System.out.println(employeeList);\r\n            for(int i = 0; i &lt; employeeList.size(); ++ i){\r\n\r\n                JSONObject employeeObject = (JSONObject)((JSONObject)employeeList.get(i)).get(&quot;Точки&quot;);\r\n\r\n                array[i] = new FunctionPoint((Double) employeeObject.get(&quot;X&quot;),(Double) employeeObject.get(&quot;Y&quot;));\r\n            }\r\n            this.Link = new ArrayTabulatedFunction(array);\r\n        } catch (FileNotFoundException e) {\r\n            e.printStackTrace();\r\n        } catch (IOException e) {\r\n            e.printStackTrace();\r\n        } catch (ParseException e) {\r\n            e.printStackTrace();\r\n        }\r\n        modified = false;\r\n    }\r\n\r\n    public void saveFunction() throws IOException {\r\n\r\n        JSONArray Link = new JSONArray();\r\n\r\n        for(int i =0; i &lt; this.Link.getPointsCount(); ++i){\r\n            JSONObject point = new JSONObject();\r\n            point.put(&quot;X&quot;,this.Link.getPointX(i));\r\n            point.put(&quot;Y&quot;,this.Link.getPointY(i));\r\n            JSONObject points = new JSONObject();\r\n            points.put(&quot;Точки&quot;,point);\r\n            Link.add(points);\r\n        }\r\n        FileWriter fileWriter = new FileWriter(fileName);\r\n        fileWriter.write(Link.toJSONString());\r\n        fileWriter.flush();\r\n        modified = false;\r\n\r\n    }\r\n\r\n    @Override\r\n    public int getPointsCount() {\r\n        return this.Link.getPointsCount();\r\n    }\r\n\r\n    @Override\r\n    public void setPointY(int index, double y) throws IOException {\r\n        this.Link.setPointY(index, y);\r\n        this.modified = true;\r\n        CallRedraw();\r\n    }\r\n\r\n    @Override\r\n    public double getPointY(int index) {\r\n        return this.Link.getPointY(index);\r\n    }\r\n\r\n    @Override\r\n    public double getPointX(int index) {\r\n        return this.Link.getPointX(index);\r\n    }\r\n\r\n    @Override\r\n    public double getFunctionValue(double x) {\r\n        return this.Link.getFunctionValue(x);\r\n    }\r\n\r\n    @Override\r\n    public void addPoint(FunctionPoint point) throws InappropriateFunctionPointException, IOException {\r\n        this.modified = true;\r\n        this.Link.addPoint(point);\r\n        CallRedraw();\r\n    }\r\n\r\n    @Override\r\n    public void setPoint(int index, FunctionPoint point) throws InappropriateFunctionPointException, IOException {\r\n        this.Link.setPoint(index, point);\r\n        this.modified = true;\r\n        CallRedraw();\r\n    }\r\n\r\n    @Override\r\n    public void setPointX(int index, double x) throws InappropriateFunctionPointException, IOException {\r\n        this.Link.setPointX(index, x);\r\n        this.modified = true;\r\n        CallRedraw();\r\n    }\r\n\r\n    @Override\r\n    public void deletePoint(int index) throws IOException {\r\n        this.Link.deletePoint(index);\r\n        this.modified = true;\r\n        CallRedraw();\r\n    }\r\n\r\n    @Override\r\n    public double getRightDomainBorder() {\r\n        return this.Link.getRightDomainBorder();\r\n    }\r\n\r\n    @Override\r\n    public double getLeftDomainBorder() {\r\n        return this.Link.getLeftDomainBorder();\r\n    }\r\n\r\n    @Override\r\n    public FunctionPoint getPoint(int index) {\r\n        if (index &gt;= 0 &amp;&amp; index &lt; this.getPointsCount()) {\r\n            return new FunctionPoint(this.Link.getPoint(index));\r\n        } else {\r\n            throw new FunctionPointIndexOutOfBoundsException();\r\n        }\r\n    }\r\n    }\r\n\r\nStack Trace:\r\n\r\n    Exception in thread &quot;JavaFX Application Thread&quot; java.lang.ClassFormatError: Incompatible magic value 11 in class file tlog/class\r\n    \tat java.base/java.lang.ClassLoader.defineClass1(Native Method)\r\n    \tat java.base/java.lang.ClassLoader.defineClass(ClassLoader.java:1010)\r\n    \tat java.base/java.lang.ClassLoader.defineClass(ClassLoader.java:872)\r\n    \tat JavaFX_Application.ClassLoaderForFunctions.loadClassFromFile(ClassLoaderForFunctions.java:15)\r\n    \tat JavaFX_Application.FXMLMainFormController.lambda$initialize$6(FXMLMainFormController.java:206)\r\n    \tat javafx.base/com.sun.javafx.event.CompositeEventHandler.dispatchBubblingEvent(CompositeEventHandler.java:86)\r\n    \tat javafx.base/com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:234)\r\n    \tat javafx.base/com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:191)\r\n    \tat javafx.base/com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:58)\r\n    \tat javafx.base/com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)\r\n    \tat javafx.base/com.sun.javafx.event.EventUtil.fireEventImpl(EventUtil.java:74)\r\n    \tat javafx.base/com.sun.javafx.event.EventUtil.fireEvent(EventUtil.java:49)\r\n    \tat javafx.base/javafx.event.Event.fireEvent(Event.java:198)\r\n    \tat javafx.controls/javafx.scene.control.MenuItem.fire(MenuItem.java:459)\r\n    \tat javafx.controls/com.sun.javafx.scene.control.ContextMenuContent$MenuItemContainer.doSelect(ContextMenuContent.java:1385)\r\n    \tat javafx.controls/com.sun.javafx.scene.control.ContextMenuContent$MenuItemContainer.lambda$createChildren$12(ContextMenuContent.java:1338)\r\n    \tat javafx.base/com.sun.javafx.event.CompositeEventHandler$NormalEventHandlerRecord.handleBubblingEvent(CompositeEventHandler.java:247)\r\n    \tat javafx.base/com.sun.javafx.event.CompositeEventHandler.dispatchBubblingEvent(CompositeEventHandler.java:80)\r\n    \tat javafx.base/com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:234)\r\n    \tat javafx.base/com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:191)\r\n    \tat javafx.base/com.sun.javafx.event.CompositeEventDispatcher.dispatchBubblingEvent(CompositeEventDispatcher.java:59)\r\n    \tat javafx.base/com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:58)\r\n    \tat javafx.base/com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)\r\n    \tat javafx.base/com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56)\r\n    \tat javafx.base/com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)\r\n    \tat javafx.base/com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56)\r\n    \tat javafx.base/com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)\r\n    \tat javafx.base/com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56)\r\n    \tat javafx.base/com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)\r\n    \tat javafx.base/com.sun.javafx.event.EventUtil.fireEventImpl(EventUtil.java:74)\r\n    \tat javafx.base/com.sun.javafx.event.EventUtil.fireEvent(EventUtil.java:54)\r\n    \tat javafx.base/javafx.event.Event.fireEvent(Event.java:198)\r\n    \tat javafx.graphics/javafx.scene.Scene$MouseHandler.process(Scene.java:3897)\r\n    \tat javafx.graphics/javafx.scene.Scene.processMouseEvent(Scene.java:1878)\r\n    \tat javafx.graphics/javafx.scene.Scene$ScenePeerListener.mouseEvent(Scene.java:2623)\r\n    \tat javafx.graphics/com.sun.javafx.tk.quantum.GlassViewEventHandler$MouseEventNotification.run(GlassViewEventHandler.java:411)\r\n    \tat javafx.graphics/com.sun.javafx.tk.quantum.GlassViewEventHandler$MouseEventNotification.run(GlassViewEventHandler.java:301)\r\n    \tat java.base/java.security.AccessController.doPrivileged(AccessController.java:391)\r\n    \tat javafx.graphics/com.sun.javafx.tk.quantum.GlassViewEventHandler.lambda$handleMouseEvent$2(GlassViewEventHandler.java:450)\r\n    \tat javafx.graphics/com.sun.javafx.tk.quantum.QuantumToolkit.runWithoutRenderLock(QuantumToolkit.java:424)\r\n    \tat javafx.graphics/com.sun.javafx.tk.quantum.GlassViewEventHandler.handleMouseEvent(GlassViewEventHandler.java:449)\r\n    \tat javafx.graphics/com.sun.glass.ui.View.handleMouseEvent(View.java:557)\r\n    \tat javafx.graphics/com.sun.glass.ui.View.notifyMouse(View.java:943)\r\n    \tat javafx.graphics/com.sun.glass.ui.win.WinApplication._runLoop(Native Method)\r\n    \tat javafx.graphics/com.sun.glass.ui.win.WinApplication.lambda$runLoop$3(WinApplication.java:184)\r\n    \tat java.base/java.lang.Thread.run(Thread.java:831)\r\n\r\n\r\n","title":"Incompatible magic value in class file JavaFX","body":"<p>I need to implement the tabulate function (using MenuItem TabulateFunction), which is located in a file with the extension .class in the form of byte-code. Since the function can have one of the three classes that implement my interface, then, according to the task, you need to implement a separate class that will be responsible for reading the byte-code from the file and create an object based on this byte-code.</p>\n<p>I made a class ClassLoaderForFunctions and use <code>return defineClass</code> in it\nAnd here is the problem. When I select Tabulate Function in my menu, it calls the method from ClassLoaderForFunctions which implements the above for the function from the file.</p>\n<p>And when it comes to <code>return defineClass</code>, I get an error: Exception in thread <code>JavaFX Application Thread&quot; java.lang.ClassFormatError: Incompatible magic value 11 in class file tlog/class</code></p>\n<p>In the Main class I call the controller and write the byte code of the <code>tlog</code> object in a file with the extension .class</p>\n<p>*I deleted the import lines for the sake of Stack Trace</p>\n<p>What could be the problem?</p>\n<p>ClassLoaderForFunctions:</p>\n<pre><code>package JavaFX_Application;\n\npublic class ClassLoaderForFunctions extends ClassLoader{\n\n    public Class&lt;?&gt; loadClassFromFile(File file) throws IOException {\n    FileInputStream in = new FileInputStream(file);\n    byte[] fileContent = new byte[in.available()]; //available - возвращает количество байтов ввода, доступные в данный момент для чтения\n    in.read(fileContent);\n    in.close();\n\n    return defineClass(file.getName(), fileContent, 0, fileContent.length);\n}\n\n}\n</code></pre>\n<p>FXMLMainFormController:</p>\n<pre><code>        package JavaFX_Application;\n\n   \n\n\n    public class FXMLMainFormController implements Initializable {\n\n        public static TabulatedFunctionDoc tabFDoc = new TabulatedFunctionDoc();\n        private Stage MainStage;\n        private File file;\n        private ClassLoaderForFunctions Loader;\n        private FXMLMenuController ctrl;\n        private Alert dialog;\n\n        @FXML\n        private MenuItem TabulateFunction;\n\n        @FXML\n        private MenuItem NewFunction;\n    \n        @FXML\n        private MenuItem FileClose;\n\n        @FXML\n        private MenuItem OpenFile;\n\n        @FXML\n        private MenuItem SaveFile;\n\n        @FXML\n        private MenuItem SaveFileAs;\n\n        @FXML\n        private TableView&lt;FunctionPointT&gt; table = new TableView&lt;&gt;();\n\n        @FXML\n        private Label point_count;\n\n        @FXML\n        private TextField edX = new TextField(),edY = new TextField();\n\n        @FXML\n        private TableColumn&lt;FunctionPointT,Double&gt; columnX = new         TableColumn&lt;FunctionPointT,Double&gt;(&quot;X&quot;);;\n\n        @FXML\n        private TableColumn&lt;FunctionPointT,Double&gt; columnY = new         TableColumn&lt;FunctionPointT,Double&gt;(&quot;Y&quot;);;\n\n        @FXML\n        private void deletePoint(ActionEvent event) throws IOException {\n            if (isSelected()) {\n                tabFDoc.deletePoint(getIndex() - 1);\n            } else {\n                if(tabFDoc.getPointsCount() &gt; 2)\n                    tabFDoc.deletePoint(tabFDoc.getPointsCount() - 1);\n                else\n                    showDialog(&quot;Length of Document &lt; 3&quot;,&quot;Please add some point or stop         trying to delete point&quot;);\n\n            }\n        }\n\n        @FXML\n        private void addPoint(ActionEvent event) throws         InappropriateFunctionPointException, IOException {\n            if(!edX.getText().isEmpty() &amp;&amp; !edY.getText().isEmpty()) {\n                tabFDoc.addPoint(new FunctionPoint(Double.parseDouble(edX.getText()),         Double.parseDouble(edY.getText())));\n            }\n            edX.setText(&quot;&quot;);\n            edY.setText(&quot;&quot;);\n            //table.getItems().add(new         FunctionPointT(Double.parseDouble(edX.getText()),Double.parseDouble(edY.getText()))); //         добавляем строку\n        }\n\n        @FXML\n        public void redraw(){\n            if(!table.getColumns().isEmpty())\n                table.getItems().clear();\n            ObservableList&lt;FunctionPointT&gt; data = table.getItems();\n            for(int i = 0;i&lt; tabFDoc.getPointsCount(); ++ i) {\n                data.add(new         FunctionPointT(tabFDoc.getLink().getPointX(i),tabFDoc.getLink().getPointY(i)));\n            }\n            if (isSelected()) {\n                point_count.setText(&quot;Point &quot; + getIndex() + &quot; of &quot; + tabFDoc.getPointsCount());\n            } else {\n                point_count.setText(&quot;Point &quot; + tabFDoc.getPointsCount() + &quot; of &quot; +         tabFDoc.getPointsCount());\n            }\n        }\n\n        @FXML\n        private void setSelectedIndexByKey(){\n            point_count.setText(&quot;Point &quot; + getIndex() + &quot; of &quot; +         tabFDoc.getPointsCount());\n        }\n\n        @FXML\n        private void setSelectedIndexByClick() {\n            if(isSelected() &amp;&amp; tabFDoc !=null)\n                point_count.setText(&quot;Point &quot; + getIndex() + &quot; of &quot; +         tabFDoc.getPointsCount());\n        }\n\n        private void openWindow() throws IOException {\n            Stage primaryStage = new Stage();\n            FXMLLoader loader = new FXMLLoader(getClass().getResource(&quot;FXMLMenu.fxml&quot;));\n            Parent root = loader.load();\n            ctrl = loader.getController();\n            ctrl.setMainController(this);\n\n            primaryStage.setTitle(&quot;Create New Function&quot;);\n            primaryStage.setScene(new Scene(root));\n            primaryStage.setResizable(false);\n\n            primaryStage.initModality(Modality.APPLICATION_MODAL);\n            primaryStage.initOwner(MainStage);\n            primaryStage.setOnCloseRequest(windowEvent -&gt; {\n                windowEvent.consume();\n            });\n            primaryStage.showAndWait();\n        }\n\n        private void SaveFunctionAs() throws IOException {\n            FileChooser fileChooser = new FileChooser();\n            fileChooser.setTitle(&quot;Open file&quot;);\n            fileChooser.getExtensionFilters().add(new FileChooser.ExtensionFilter(&quot;Text         files&quot;, &quot;*.json&quot;));\n            file = fileChooser.showSaveDialog(table.getScene().getWindow());\n            if(file!=null) {\n                tabFDoc.saveFunctionAs(file.getName());\n            }\n        }\n\n        @Override\n        public void initialize(URL url, ResourceBundle resourceBundle) {\n            dialog = new Alert(Alert.AlertType.ERROR);\n            tabFDoc.setController(this);\n            columnX.setCellValueFactory(new PropertyValueFactory&lt;FunctionPointT,Double&gt;        (&quot;X&quot;));\n            table.getColumns().add(columnX);\n            columnY.setCellValueFactory(new PropertyValueFactory&lt;FunctionPointT,Double&gt;        (&quot;Y&quot;));\n            table.getColumns().add(columnY);\n            table.setPrefWidth(573.0);\n            table.setPrefHeight(220.0);\n            columnY.setPrefWidth(286.5);\n            columnX.setPrefWidth(286.5);\n            Loader = new ClassLoaderForFunctions();\n            ObservableList&lt;FunctionPointT&gt; data = table.getItems();\n            for(int i = 0;i&lt; tabFDoc.getPointsCount(); ++ i) {\n                data.add(new         FunctionPointT(tabFDoc.getLink().getPointX(i),tabFDoc.getLink().getPointY(i)));\n            }\n\n            NewFunction.setOnAction(event -&gt; {\n                try {\n                    openWindow();\n                } catch (IOException e) {\n                    e.printStackTrace();\n                }\n            });\n            OpenFile.setOnAction(event -&gt;{\n                FileChooser fileChooser = new FileChooser();\n                fileChooser.setTitle(&quot;Open file&quot;);\n                fileChooser.getExtensionFilters().add(new         FileChooser.ExtensionFilter(&quot;Text files&quot;, &quot;*.json&quot;));\n                file = fileChooser.showOpenDialog(table.getScene().getWindow());\n                if(file!=null) {\n                    tabFDoc.loadFunction(file.getName());\n                    redraw();\n                }\n            });\n            FileClose.setOnAction(event -&gt;{\n                MainStage.close();\n            });\n            SaveFile.setOnAction(event -&gt;{\n                try {\n                    tabFDoc.saveFunction();\n                } catch (IOException e) {\n                    e.printStackTrace();\n                }\n            });\n            SaveFileAs.setOnAction(event -&gt; {\n                try {\n                    SaveFunctionAs();\n                } catch (IOException e) {\n                   e.printStackTrace();\n                }\n            });\n            TabulateFunction.setOnAction(event-&gt;{\n                try {\n                    FileChooser fileChooser = new FileChooser();\n                    fileChooser.setTitle(&quot;Open class&quot;);\n                    fileChooser.getExtensionFilters().add(new         FileChooser.ExtensionFilter(&quot;Class files&quot;, &quot;*.class&quot;));\n                    file = fileChooser.showOpenDialog(table.getScene().getWindow());\n                    //tabFDoc.setFunction((Function)         Loader.loadClassFromFile(file).getConstructor().newInstance());\n                    if (file != null) {\n                        openWindow();\n                        if(ctrl.getLeftDomainBorderBorder() != Double.POSITIVE_INFINITY         &amp;&amp; ctrl.getRightDomainBorderBorder() != Double.NEGATIVE_INFINITY &amp;&amp; ctrl.getPointsCount() &gt;         2) {\n                            tabFDoc.tabulateFunction((Function)         Loader.loadClassFromFile(file).getConstructor().newInstance(),         ctrl.getLeftDomainBorderBorder(), ctrl.getRightDomainBorderBorder(), ctrl.getPointsCount());\n                            redraw();\n                        }\n                    }\n                }\n                catch (Exception e) {\n                }\n            });\n\n\n        }\n\n        public boolean isSelected(){\n            return (table.getSelectionModel().getSelectedItem() != null);\n        }\n\n        private int getIndex(){\n            int index = 0;\n            if (isSelected()) {\n                for (int i = 0; i &lt; tabFDoc.getPointsCount(); ++i) {\n                    if (table.getSelectionModel().getSelectedItem().getX() ==         tabFDoc.getLink().getPointX(i) &amp;&amp; table.getSelectionModel().getSelectedItem().getY() ==         tabFDoc.getLink().getPointY(i))\n                        index = i + 1;\n                }\n            }\n            return index++;\n        }\n\n        public void setStage(Stage stage){\n            MainStage = stage;\n        }\n\n        public Stage getStage(){\n            return MainStage;\n        }\n\n        public TabulatedFunctionDoc getTabFDoc(){\n            return tabFDoc;\n        }\n\n        public void showDialog(String header, String message) {\n\n            dialog.setHeaderText(header);\n            dialog.setTitle(&quot;Error&quot;);\n            dialog.setContentText(message);\n            dialog.showAndWait();\n\n        }\n\n    }\n</code></pre>\n<p>TabulatedFunctionDoc:</p>\n<pre><code>package JavaFX_Application;\n\nimport functions.*;\n\nimport java.io.FileNotFoundException;\nimport java.io.FileReader;\nimport java.io.FileWriter;\nimport java.io.IOException;\n\nimport org.json.simple.JSONArray;\nimport org.json.simple.JSONObject;\nimport org.json.simple.parser.JSONParser;\nimport org.json.simple.parser.ParseException;\n\npublic class TabulatedFunctionDoc implements TabulatedFunction {\n    private TabulatedFunction Link;\n    private String fileName = &quot;&quot;;\n    private boolean modified = false;\n    private boolean fileNameAssigned = false;\n    private FXMLMainFormController controller;\n    private Function function = null;\n\n\n    public TabulatedFunctionDoc() {\n        Link = new ArrayTabulatedFunction(-1, 1, 2);\n    }\n\n    public void setFunction(Function input_function){\n        function = input_function;\n    }\n\npublic void setController(FXMLMainFormController ctrl) {\n    this.controller = ctrl;\n}\n\npublic void CallRedraw() throws IOException {\n    if(registerRedrawFunctionController(controller))\n        controller.redraw();\n}\n\npublic TabulatedFunction getLink() {\n    return Link;\n}\n\npublic boolean registerRedrawFunctionController(FXMLMainFormController ctrl) {\n    return ctrl.getStage().isShowing();\n}\n\npublic boolean isModified() {\n    return modified;\n}\n\npublic boolean isFileNameAssigned() {\n    return fileNameAssigned;\n}\n\npublic void newFunction(double leftX, double rightX, int pointsCount) throws IOException {\n    Link = new ArrayTabulatedFunction(leftX, rightX, pointsCount);\n    modified = false;\n}\n\npublic void tabulateFunction(Function function, double leftX, double rightX, int pointsCount) {\n    Link = TabulatedFunctions.tabulate(function, leftX, rightX, pointsCount);\n    modified = false;\n}\n\npublic void saveFunctionAs(String fileName) throws IOException {\n    this.fileName = fileName;\n    fileNameAssigned = true;\n    saveFunction();\n    modified = false;\n}\n\npublic void loadFunction(String fileName) {\n    this.fileName = fileName;\n    fileNameAssigned = true;\n\n    JSONParser jsonParser = new JSONParser();\n\n    try (FileReader reader = new FileReader(fileName))\n    {\n        Object obj = jsonParser.parse(reader);\n        JSONArray employeeList = (JSONArray) obj;\n        FunctionPoint[] array = new FunctionPoint[employeeList.size()];\n        //System.out.println(employeeList);\n        for(int i = 0; i &lt; employeeList.size(); ++ i){\n\n            JSONObject employeeObject = (JSONObject)((JSONObject)employeeList.get(i)).get(&quot;Точки&quot;);\n\n            array[i] = new FunctionPoint((Double) employeeObject.get(&quot;X&quot;),(Double) employeeObject.get(&quot;Y&quot;));\n        }\n        this.Link = new ArrayTabulatedFunction(array);\n    } catch (FileNotFoundException e) {\n        e.printStackTrace();\n    } catch (IOException e) {\n        e.printStackTrace();\n    } catch (ParseException e) {\n        e.printStackTrace();\n    }\n    modified = false;\n}\n\npublic void saveFunction() throws IOException {\n\n    JSONArray Link = new JSONArray();\n\n    for(int i =0; i &lt; this.Link.getPointsCount(); ++i){\n        JSONObject point = new JSONObject();\n        point.put(&quot;X&quot;,this.Link.getPointX(i));\n        point.put(&quot;Y&quot;,this.Link.getPointY(i));\n        JSONObject points = new JSONObject();\n        points.put(&quot;Точки&quot;,point);\n        Link.add(points);\n    }\n    FileWriter fileWriter = new FileWriter(fileName);\n    fileWriter.write(Link.toJSONString());\n    fileWriter.flush();\n    modified = false;\n\n}\n\n@Override\npublic int getPointsCount() {\n    return this.Link.getPointsCount();\n}\n\n@Override\npublic void setPointY(int index, double y) throws IOException {\n    this.Link.setPointY(index, y);\n    this.modified = true;\n    CallRedraw();\n}\n\n@Override\npublic double getPointY(int index) {\n    return this.Link.getPointY(index);\n}\n\n@Override\npublic double getPointX(int index) {\n    return this.Link.getPointX(index);\n}\n\n@Override\npublic double getFunctionValue(double x) {\n    return this.Link.getFunctionValue(x);\n}\n\n@Override\npublic void addPoint(FunctionPoint point) throws InappropriateFunctionPointException, IOException {\n    this.modified = true;\n    this.Link.addPoint(point);\n    CallRedraw();\n}\n\n@Override\npublic void setPoint(int index, FunctionPoint point) throws InappropriateFunctionPointException, IOException {\n    this.Link.setPoint(index, point);\n    this.modified = true;\n    CallRedraw();\n}\n\n@Override\npublic void setPointX(int index, double x) throws InappropriateFunctionPointException, IOException {\n    this.Link.setPointX(index, x);\n    this.modified = true;\n    CallRedraw();\n}\n\n@Override\npublic void deletePoint(int index) throws IOException {\n    this.Link.deletePoint(index);\n    this.modified = true;\n    CallRedraw();\n}\n\n@Override\npublic double getRightDomainBorder() {\n    return this.Link.getRightDomainBorder();\n}\n\n@Override\npublic double getLeftDomainBorder() {\n    return this.Link.getLeftDomainBorder();\n}\n\n@Override\npublic FunctionPoint getPoint(int index) {\n    if (index &gt;= 0 &amp;&amp; index &lt; this.getPointsCount()) {\n        return new FunctionPoint(this.Link.getPoint(index));\n    } else {\n        throw new FunctionPointIndexOutOfBoundsException();\n    }\n}\n}\n</code></pre>\n<p>Stack Trace:</p>\n<pre><code>Exception in thread &quot;JavaFX Application Thread&quot; java.lang.ClassFormatError: Incompatible magic value 11 in class file tlog/class\n    at java.base/java.lang.ClassLoader.defineClass1(Native Method)\n    at java.base/java.lang.ClassLoader.defineClass(ClassLoader.java:1010)\n    at java.base/java.lang.ClassLoader.defineClass(ClassLoader.java:872)\n    at JavaFX_Application.ClassLoaderForFunctions.loadClassFromFile(ClassLoaderForFunctions.java:15)\n    at JavaFX_Application.FXMLMainFormController.lambda$initialize$6(FXMLMainFormController.java:206)\n    at javafx.base/com.sun.javafx.event.CompositeEventHandler.dispatchBubblingEvent(CompositeEventHandler.java:86)\n    at javafx.base/com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:234)\n    at javafx.base/com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:191)\n    at javafx.base/com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:58)\n    at javafx.base/com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)\n    at javafx.base/com.sun.javafx.event.EventUtil.fireEventImpl(EventUtil.java:74)\n    at javafx.base/com.sun.javafx.event.EventUtil.fireEvent(EventUtil.java:49)\n    at javafx.base/javafx.event.Event.fireEvent(Event.java:198)\n    at javafx.controls/javafx.scene.control.MenuItem.fire(MenuItem.java:459)\n    at javafx.controls/com.sun.javafx.scene.control.ContextMenuContent$MenuItemContainer.doSelect(ContextMenuContent.java:1385)\n    at javafx.controls/com.sun.javafx.scene.control.ContextMenuContent$MenuItemContainer.lambda$createChildren$12(ContextMenuContent.java:1338)\n    at javafx.base/com.sun.javafx.event.CompositeEventHandler$NormalEventHandlerRecord.handleBubblingEvent(CompositeEventHandler.java:247)\n    at javafx.base/com.sun.javafx.event.CompositeEventHandler.dispatchBubblingEvent(CompositeEventHandler.java:80)\n    at javafx.base/com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:234)\n    at javafx.base/com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:191)\n    at javafx.base/com.sun.javafx.event.CompositeEventDispatcher.dispatchBubblingEvent(CompositeEventDispatcher.java:59)\n    at javafx.base/com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:58)\n    at javafx.base/com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)\n    at javafx.base/com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56)\n    at javafx.base/com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)\n    at javafx.base/com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56)\n    at javafx.base/com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)\n    at javafx.base/com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56)\n    at javafx.base/com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)\n    at javafx.base/com.sun.javafx.event.EventUtil.fireEventImpl(EventUtil.java:74)\n    at javafx.base/com.sun.javafx.event.EventUtil.fireEvent(EventUtil.java:54)\n    at javafx.base/javafx.event.Event.fireEvent(Event.java:198)\n    at javafx.graphics/javafx.scene.Scene$MouseHandler.process(Scene.java:3897)\n    at javafx.graphics/javafx.scene.Scene.processMouseEvent(Scene.java:1878)\n    at javafx.graphics/javafx.scene.Scene$ScenePeerListener.mouseEvent(Scene.java:2623)\n    at javafx.graphics/com.sun.javafx.tk.quantum.GlassViewEventHandler$MouseEventNotification.run(GlassViewEventHandler.java:411)\n    at javafx.graphics/com.sun.javafx.tk.quantum.GlassViewEventHandler$MouseEventNotification.run(GlassViewEventHandler.java:301)\n    at java.base/java.security.AccessController.doPrivileged(AccessController.java:391)\n    at javafx.graphics/com.sun.javafx.tk.quantum.GlassViewEventHandler.lambda$handleMouseEvent$2(GlassViewEventHandler.java:450)\n    at javafx.graphics/com.sun.javafx.tk.quantum.QuantumToolkit.runWithoutRenderLock(QuantumToolkit.java:424)\n    at javafx.graphics/com.sun.javafx.tk.quantum.GlassViewEventHandler.handleMouseEvent(GlassViewEventHandler.java:449)\n    at javafx.graphics/com.sun.glass.ui.View.handleMouseEvent(View.java:557)\n    at javafx.graphics/com.sun.glass.ui.View.notifyMouse(View.java:943)\n    at javafx.graphics/com.sun.glass.ui.win.WinApplication._runLoop(Native Method)\n    at javafx.graphics/com.sun.glass.ui.win.WinApplication.lambda$runLoop$3(WinApplication.java:184)\n    at java.base/java.lang.Thread.run(Thread.java:831)\n</code></pre>\n"},{"tags":["java","oop","casting","upcasting"],"answers":[{"tags":[],"owner":{"account_id":401843,"reputation":89788,"user_id":768644,"display_name":"rzwitserloot"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1637415707,"creation_date":1637415707,"answer_id":70046460,"question_id":70046304,"body_markdown":"It wouldn&#39;t compile; an object that is guaranteed to be of type `InterfaceA` is not guaranteed to also neccessarily be of type `ClassA`. Even if `ClassB` is the only class available that implements `InterfaceA` at the time you wrote this code (code isn&#39;t set in amber; maybe someone writes another class later).\r\n\r\nBut, add the cast, and sure, it would.\r\n\r\nThis:\r\n\r\n```\r\nInterfaceA obj = new ClassB();\r\n```\r\n\r\nis creating 2 completely unrelated things. A local variable named `obj`, which is like a postit note with a title that you can write addresses on. The postit note is restricted; you can only write addresses on there that lead to houses with a red roof. (Let&#39;s say that&#39;s what `InterfaceA` represents).\r\n\r\nYou then, separately, __build a house__. Houses don&#39;t have names. This house does have a red roof (the class you are instantiating implements `InterfaceA`). You then scribble the address of this newly built house on your postit, and that&#39;s okay - after all, it has a red roof.\r\n\r\nThe house has no idea about the postit and doesn&#39;t care. The post-it&#39;s existence doesn&#39;t change the house, at all. It is not possible to go to the house and then ask the house: Can you tell me the locations of all postits with your address on it worldwide. In java terms: Having a variable point at an object doesn&#39;t modify that object in any way, it is not possible to go from an object to the variable(s) that refer to it, at all.\r\n\r\nYou then do:\r\n\r\n```\r\nClassA obj2 = obj;\r\n```\r\n\r\nThis creates another titled postit. It&#39;s titled &#39;obj2&#39;, and it is restricted to only allow address to brick-built houses to be written on there.\r\n\r\nYou then attempt to take your `obj` postit (restricted to only have addresses to houses with a red roof), and copy over the address onto your new postit. You&#39;re certainly not creating a second house (`new ` needs to be involved in java if you want another object to be created), you&#39;re just copying over an address.\r\n\r\nThe postit note police stops you though: Whilst the address on your `obj` postit __might__ be brick-built, it may not be; the `obj` postit can merely guarantee that the roof is red, not that it is built from bricks.\r\n\r\nWith a cast operation:\r\n\r\n```\r\nClassA obj2 = (ClassA) obj;\r\n```\r\n\r\nThe code now compiles (and if you were to run it and remove the `abstract` modifier from `ClassB`, it would run successfully). A cast operation merely checks, it doesn&#39;t change any roofs or otherwise convert anything at all. That code will drive out to the house, check that it is brick-built.\r\n\r\nIf it is, great, you get to copy over the address. If it is not, a ClassCastException is thrown.\r\n\r\nIn no scenario will a cast operator convert anything, unless the thing in the `()` is a primitive type (the cast operator does 3 completely different things: Convert primitives, typecheck concrete types, and tell the compiler to shut up for generics without checking anything).\r\n","title":"Is upcasting from the current object reference or actual object type?","body":"<p>It wouldn't compile; an object that is guaranteed to be of type <code>InterfaceA</code> is not guaranteed to also neccessarily be of type <code>ClassA</code>. Even if <code>ClassB</code> is the only class available that implements <code>InterfaceA</code> at the time you wrote this code (code isn't set in amber; maybe someone writes another class later).</p>\n<p>But, add the cast, and sure, it would.</p>\n<p>This:</p>\n<pre><code>InterfaceA obj = new ClassB();\n</code></pre>\n<p>is creating 2 completely unrelated things. A local variable named <code>obj</code>, which is like a postit note with a title that you can write addresses on. The postit note is restricted; you can only write addresses on there that lead to houses with a red roof. (Let's say that's what <code>InterfaceA</code> represents).</p>\n<p>You then, separately, <strong>build a house</strong>. Houses don't have names. This house does have a red roof (the class you are instantiating implements <code>InterfaceA</code>). You then scribble the address of this newly built house on your postit, and that's okay - after all, it has a red roof.</p>\n<p>The house has no idea about the postit and doesn't care. The post-it's existence doesn't change the house, at all. It is not possible to go to the house and then ask the house: Can you tell me the locations of all postits with your address on it worldwide. In java terms: Having a variable point at an object doesn't modify that object in any way, it is not possible to go from an object to the variable(s) that refer to it, at all.</p>\n<p>You then do:</p>\n<pre><code>ClassA obj2 = obj;\n</code></pre>\n<p>This creates another titled postit. It's titled 'obj2', and it is restricted to only allow address to brick-built houses to be written on there.</p>\n<p>You then attempt to take your <code>obj</code> postit (restricted to only have addresses to houses with a red roof), and copy over the address onto your new postit. You're certainly not creating a second house (<code>new </code> needs to be involved in java if you want another object to be created), you're just copying over an address.</p>\n<p>The postit note police stops you though: Whilst the address on your <code>obj</code> postit <strong>might</strong> be brick-built, it may not be; the <code>obj</code> postit can merely guarantee that the roof is red, not that it is built from bricks.</p>\n<p>With a cast operation:</p>\n<pre><code>ClassA obj2 = (ClassA) obj;\n</code></pre>\n<p>The code now compiles (and if you were to run it and remove the <code>abstract</code> modifier from <code>ClassB</code>, it would run successfully). A cast operation merely checks, it doesn't change any roofs or otherwise convert anything at all. That code will drive out to the house, check that it is brick-built.</p>\n<p>If it is, great, you get to copy over the address. If it is not, a ClassCastException is thrown.</p>\n<p>In no scenario will a cast operator convert anything, unless the thing in the <code>()</code> is a primitive type (the cast operator does 3 completely different things: Convert primitives, typecheck concrete types, and tell the compiler to shut up for generics without checking anything).</p>\n"}],"owner":{"account_id":17292381,"reputation":46,"user_id":12523715,"display_name":"bbawj"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":208,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"accepted_answer_id":70046460,"answer_count":1,"score":-1,"last_activity_date":1637415707,"creation_date":1637414492,"question_id":70046304,"body_markdown":"I encountered a question in school which asked for the the kind of typecasting and whether an error would occur.\r\n\r\n    InterfaceA obj = new ClassB();\r\n    ClassA obj2 = obj;\r\n\r\nI understand that the first line would cause a compile time error due to ClassB being abstract. However, would the 2nd line upcasting from, an actual object type ClassB with object reference InterfaceA, to ClassA work? (if ClassB is not abstract)\r\n\r\nGiven the following UML class diagram:\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/lZSeB.png","title":"Is upcasting from the current object reference or actual object type?","body":"<p>I encountered a question in school which asked for the the kind of typecasting and whether an error would occur.</p>\n<pre><code>InterfaceA obj = new ClassB();\nClassA obj2 = obj;\n</code></pre>\n<p>I understand that the first line would cause a compile time error due to ClassB being abstract. However, would the 2nd line upcasting from, an actual object type ClassB with object reference InterfaceA, to ClassA work? (if ClassB is not abstract)</p>\n<p>Given the following UML class diagram:</p>\n<p><a href=\"https://i.stack.imgur.com/lZSeB.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/lZSeB.png\" alt=\"enter image description here\" /></a></p>\n"},{"tags":["java","linux"],"comments":[{"owner":{"account_id":5281408,"reputation":18797,"user_id":4216641,"display_name":"Turing85"},"score":1,"creation_date":1637352427,"post_id":70040361,"comment_id":123812590,"body_markdown":"The process you see by executing `ps aux | grep java` is the `ps`-process...","body":"The process you see by executing <code>ps aux | grep java</code> is the <code>ps</code>-process..."}],"answers":[{"tags":[],"owner":{"account_id":18930393,"reputation":87,"user_id":17271405,"display_name":"Ghibran Aljabbar"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1637355622,"creation_date":1637355622,"answer_id":70040886,"question_id":70040361,"body_markdown":"Have you tried these ?\r\n``` \r\nkillall java \r\n```\r\nor\r\n\r\n```\r\nkill $(pidof java)\r\n```\r\n\r\n","title":"kill a java process in Linux","body":"<p>Have you tried these ?</p>\n<pre><code>killall java \n</code></pre>\n<p>or</p>\n<pre><code>kill $(pidof java)\n</code></pre>\n"},{"tags":[],"owner":{"account_id":5998820,"reputation":12666,"user_id":4712734,"display_name":"DuncG"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1637415556,"creation_date":1637392670,"answer_id":70043975,"question_id":70040361,"body_markdown":"As you can see from your image, the process id is changing each time 9287 / 9304  and represents `| grep java` - and not a java VM! \r\n\r\nA common fix is to filter the `ps` results for not matching `| grep -v`,  such as:\r\n\r\n    ps aux | grep java | grep -v --regexp=grep.\\*java\r\n\r\nIf there are results above you could append commands to read the process ids and kill command:\r\n\r\n    kill -TERM $(ps aux | grep java | grep -v --regexp=grep.\\*java | awk &#39;{print $2}&#39;)\r\n\r\nNote: the above will kill all processes with &quot;java&quot; in name so is not very useful if there are multiple java services for same account. You may need to add filter for specific Java VMs.","title":"kill a java process in Linux","body":"<p>As you can see from your image, the process id is changing each time 9287 / 9304  and represents <code>| grep java</code> - and not a java VM!</p>\n<p>A common fix is to filter the <code>ps</code> results for not matching <code>| grep -v</code>,  such as:</p>\n<pre><code>ps aux | grep java | grep -v --regexp=grep.\\*java\n</code></pre>\n<p>If there are results above you could append commands to read the process ids and kill command:</p>\n<pre><code>kill -TERM $(ps aux | grep java | grep -v --regexp=grep.\\*java | awk '{print $2}')\n</code></pre>\n<p>Note: the above will kill all processes with &quot;java&quot; in name so is not very useful if there are multiple java services for same account. You may need to add filter for specific Java VMs.</p>\n"}],"owner":{"account_id":8344468,"reputation":3,"user_id":6268718,"display_name":"QC j"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2367,"favorite_count":0,"down_vote_count":2,"up_vote_count":0,"answer_count":2,"score":-2,"last_activity_date":1637415556,"creation_date":1637352226,"question_id":70040361,"body_markdown":"I have a BI application (looker) runs on a linux VM.\r\ntobe able to restart the service, I need to clear the existing java process.\r\nIn below screenshot, after run below script, there is a java process, but not showing in the list when I run jps script. What&#39;s the reason? and how can I properly terminate this java process?\r\n\r\n    ps aux | grep java\r\n\r\n![screenshot from SSH][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/gbRcp.png","title":"kill a java process in Linux","body":"<p>I have a BI application (looker) runs on a linux VM.\ntobe able to restart the service, I need to clear the existing java process.\nIn below screenshot, after run below script, there is a java process, but not showing in the list when I run jps script. What's the reason? and how can I properly terminate this java process?</p>\n<pre><code>ps aux | grep java\n</code></pre>\n<p><img src=\"https://i.stack.imgur.com/gbRcp.png\" alt=\"screenshot from SSH\" /></p>\n"},{"tags":["java","oracle","spring-boot","hibernate","spring-data-jpa"],"answers":[{"tags":[],"owner":{"account_id":9691730,"reputation":1318,"user_id":7189597,"display_name":"Sobhan"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1637415490,"creation_date":1637415490,"answer_id":70046430,"question_id":69719747,"body_markdown":"I needed to put `@Modifying` annotation over my repository method as below:\r\n\r\n    @Modifying\r\n    @Query(value = &quot;BEGIN &quot; +\r\n            &quot;INSERT INTO SEEN_MESSAGE(ID, MESSAGE_ID, USER_ID, SEEN_DATE) &quot; +\r\n            &quot;VALUES(seen_message_seq.nextval, :MId , :UId , CURRENT_TIMESTAMP ); &quot; +\r\n            &quot;EXCEPTION &quot; +\r\n            &quot;WHEN dup_val_on_index THEN &quot; +\r\n            &quot;RETURN;&quot; +\r\n            &quot;END;&quot;, nativeQuery = true)\r\n    void insertAndForget(Long MId, Long UId);\r\n\r\nalso I needed to open a `TRANSACTION` in my service layer, for this purpose I put `@Transactional(rollbackFor = Exception.class)` over my method in service layer which calls my repository method.","title":"Native query execution on Oracle database throws java.lang.NegativeArraySizeException: -1","body":"<p>I needed to put <code>@Modifying</code> annotation over my repository method as below:</p>\n<pre><code>@Modifying\n@Query(value = &quot;BEGIN &quot; +\n        &quot;INSERT INTO SEEN_MESSAGE(ID, MESSAGE_ID, USER_ID, SEEN_DATE) &quot; +\n        &quot;VALUES(seen_message_seq.nextval, :MId , :UId , CURRENT_TIMESTAMP ); &quot; +\n        &quot;EXCEPTION &quot; +\n        &quot;WHEN dup_val_on_index THEN &quot; +\n        &quot;RETURN;&quot; +\n        &quot;END;&quot;, nativeQuery = true)\nvoid insertAndForget(Long MId, Long UId);\n</code></pre>\n<p>also I needed to open a <code>TRANSACTION</code> in my service layer, for this purpose I put <code>@Transactional(rollbackFor = Exception.class)</code> over my method in service layer which calls my repository method.</p>\n"}],"owner":{"account_id":9691730,"reputation":1318,"user_id":7189597,"display_name":"Sobhan"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":256,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":70046430,"answer_count":1,"score":0,"last_activity_date":1637415490,"creation_date":1635236581,"question_id":69719747,"body_markdown":"In my spring-boot project I use spring-data, Hibernate and Oracle as database.\r\n\r\nI have entities `Message`, `User` and `SeenMessage`.\r\n\r\n\r\n`Messaage` looks like:\r\n\r\n        @Entity\r\n        @Table(name = &quot;MESSAGES&quot;)\r\n        public class Messages {\r\n        \r\n            @Id\r\n            @Column(name = &quot;ID&quot;)\r\n            @GeneratedValue(strategy = GenerationType.SEQUENCE, generator = &quot;MARKET_MESSAGE_GENERATOR&quot;)\r\n            @SequenceGenerator(name = &quot;MARKET_MESSAGE_GENERATOR&quot;, sequenceName = &quot;MARKET_MESSAGE_SEQ&quot;, allocationSize = 1)\r\n            private Long id;\r\n        \r\n            @Basic\r\n            @Column(name = &quot;PUBLISH_DATE&quot;)\r\n            private Timestamp dateTime;\r\n        \r\n            @Basic\r\n            @Column(name = &quot;TITLE&quot;)\r\n            private String title;\r\n        \r\n            @Lob\r\n            @Nationalized\r\n            @Column(name = &quot;MESSAGE&quot;, columnDefinition=&quot;NCLOB NOT NULL&quot;)\r\n            private String message;\r\n     }\r\n\r\n`User` looks like:\r\n\r\n    @Entity\r\n    @Table(name = &quot;Users&quot;)\r\n    public class User {\r\n    \r\n        @Id\r\n        @Column(name = &quot;ID&quot;)\r\n        @GeneratedValue(strategy = GenerationType.SEQUENCE, generator = &quot;USER_GENERATOR&quot;)\r\n        @SequenceGenerator(name = &quot;USER_GENERATOR&quot;, sequenceName = &quot;USERS_SEQ&quot;, allocationSize = 1)\r\n        private Long id;\r\n    \r\n        @Basic\r\n        @Column(name = &quot;USER_NAME&quot;)\r\n        private String userName;\r\n    }\r\n\r\nand `SeenMessage` looks like:\r\n\r\n    @Entity\r\n    @Table(name = &quot;SEEN_MESSAGE&quot;)\r\n    public class SeenMessage {\r\n    \r\n        @Id\r\n        @Column(name = &quot;ID&quot;)\r\n        @GeneratedValue(strategy = GenerationType.SEQUENCE, generator = &quot;SEEN_MESSAGE_GENERATOR&quot;)\r\n        @SequenceGenerator(name = &quot;SEEN_MESSAGE_GENERATOR&quot;, sequenceName = &quot;SEEN_MESSAGE_SEQ&quot;, allocationSize = 1)\r\n        private Long id;\r\n    \r\n        @Basic\r\n        @Column(name = &quot;SEEN_DATE&quot;)\r\n        private Timestamp seenDate;\r\n    \r\n        @ManyToOne(fetch = FetchType.LAZY)\r\n        @JoinColumn(name = &quot;MESSAGE_ID&quot;)\r\n        private Messages message;\r\n    \r\n        @ManyToOne(fetch = FetchType.LAZY)\r\n        @JoinColumn(name = &quot;USER_ID&quot;)\r\n        private User user; \r\n    }\r\n\r\nAlso on this table (`SEEN_MESSAGE`) I have unique constraint condition on pair of (`Message_Id`, `User_Id`)\r\n\r\nAnd now the problem:\r\n\r\nI have a simple REST API for getting message with its ID, when anyone calls this service I will return the requested message and also I will Insert a record in `seenMessage` table with `messageId` and `userId` and of course its time.\r\n\r\nI do the second action(inserting in SeenMessage) in my service layer by calling a method from repository:\r\n\r\n    @Repository\r\n    public interface SeenMessageRepository extends JpaRepository&lt;SeenMessage, Long&gt; {\r\n    \r\n        @Query(value = &quot;begin &quot; +\r\n                &quot;insert into SEEN_MESSAGE(ID, MESSAGE_ID, USER_ID, SEEN_DATE) &quot; +\r\n                &quot;values(seen_message_seq.nextval, :MId , :UId , CURRENT_TIMESTAMP ); &quot; +\r\n                &quot;exception &quot; +\r\n                &quot;when dup_val_on_index THEN &quot; +\r\n                &quot;RETURN; &quot; +\r\n                &quot;end;&quot;, nativeQuery = true)\r\n        void insertAndForget(Long MId, Long UId);\r\n    }\r\n\r\nAs you can see I have wrote a native query, and when I execute it on DBMS it will successfully executed, but when I call my API using Postman, query will execute and performs as I expect but also it throws an exception which is:\r\n\r\n    2021-10-26 11:12:50.385 ERROR 4848 --- [nio-1201-exec-2] c.a.b.o.exceptions.ExceptionTranslator   : -1\r\n    \r\n    java.lang.NegativeArraySizeException: -1\r\n    \tat org.hibernate.loader.custom.ResultRowProcessor.prepareForAutoDiscovery(ResultRowProcessor.java:36)\r\n    \tat org.hibernate.loader.custom.CustomLoader.autoDiscoverTypes(CustomLoader.java:489)\r\n    \tat org.hibernate.loader.Loader.preprocessResultSet(Loader.java:2343)\r\n    \tat org.hibernate.loader.Loader.getResultSet(Loader.java:2299)\r\n    \tat org.hibernate.loader.Loader.executeQueryStatement(Loader.java:2050)\r\n    \tat org.hibernate.loader.Loader.executeQueryStatement(Loader.java:2012)\r\n    \tat org.hibernate.loader.Loader.doQuery(Loader.java:948)\r\n    \tat org.hibernate.loader.Loader.doQueryAndInitializeNonLazyCollections(Loader.java:349)\r\n    \tat org.hibernate.loader.Loader.doList(Loader.java:2843)\r\n    \tat org.hibernate.loader.Loader.doList(Loader.java:2825)\r\n    \tat org.hibernate.loader.Loader.listIgnoreQueryCache(Loader.java:2657)\r\n    \tat org.hibernate.loader.Loader.list(Loader.java:2652)\r\n    \tat org.hibernate.loader.custom.CustomLoader.list(CustomLoader.java:338)\r\n    \tat org.hibernate.internal.SessionImpl.listCustomQuery(SessionImpl.java:2141)\r\n    \tat org.hibernate.internal.AbstractSharedSessionContract.list(AbstractSharedSessionContract.java:1169)\r\n    \tat org.hibernate.query.internal.NativeQueryImpl.doList(NativeQueryImpl.java:176)\r\n    \tat org.hibernate.query.internal.AbstractProducedQuery.list(AbstractProducedQuery.java:1604)\r\n    \tat org.hibernate.query.internal.AbstractProducedQuery.getSingleResult(AbstractProducedQuery.java:1652)\r\n    \tat org.springframework.data.jpa.repository.query.JpaQueryExecution$SingleEntityExecution.doExecute(JpaQueryExecution.java:196)\r\n    \tat org.springframework.data.jpa.repository.query.JpaQueryExecution.execute(JpaQueryExecution.java:88)\r\n    \tat org.springframework.data.jpa.repository.query.AbstractJpaQuery.doExecute(AbstractJpaQuery.java:155)\r\n    \tat org.springframework.data.jpa.repository.query.AbstractJpaQuery.execute(AbstractJpaQuery.java:143)\r\n    \tat org.springframework.data.repository.core.support.RepositoryMethodInvoker.doInvoke(RepositoryMethodInvoker.java:137)\r\n    \tat org.springframework.data.repository.core.support.RepositoryMethodInvoker.invoke(RepositoryMethodInvoker.java:121)\r\n    \tat org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.doInvoke(QueryExecutorMethodInterceptor.java:159)\r\n    \tat org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.invoke(QueryExecutorMethodInterceptor.java:138)\r\n    \tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)\r\n    \tat org.springframework.data.projection.DefaultMethodInvokingMethodInterceptor.invoke(DefaultMethodInvokingMethodInterceptor.java:80)\r\n    \tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)\r\n    \tat org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)\r\n    \tat org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:388)\r\n    \tat org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)\r\n    \tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)\r\n    \tat org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:137)\r\n    \tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)\r\n    \tat org.springframework.data.jpa.repository.support.CrudMethodMetadataPostProcessor$CrudMethodMetadataPopulatingMethodInterceptor.invoke(CrudMethodMetadataPostProcessor.java:145)\r\n    \tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)\r\n    \tat org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97)\r\n    \tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)\r\n    \tat org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:215)\r\n    \tat com.sun.proxy.$Proxy125.insertAndForget(Unknown Source)\r\n\r\nAnd maybe it is good to say that I wrote this query and did not use a simple Insert query, because in that case I needed to check Duplicate myself(if i did not check the duplicate I may face `UniqueconstraintViolationException`) with another database call which is extra in my opinion, so I wrote this one.\r\n\r\nCan someone tell me the reason of this error??\r\n\r\nwhy it executes on DBMS with no error but in my application it causes an error??\r\n\r\nAny help would be appreciated!!\r\n\r\n","title":"Native query execution on Oracle database throws java.lang.NegativeArraySizeException: -1","body":"<p>In my spring-boot project I use spring-data, Hibernate and Oracle as database.</p>\n<p>I have entities <code>Message</code>, <code>User</code> and <code>SeenMessage</code>.</p>\n<p><code>Messaage</code> looks like:</p>\n<pre><code>    @Entity\n    @Table(name = &quot;MESSAGES&quot;)\n    public class Messages {\n    \n        @Id\n        @Column(name = &quot;ID&quot;)\n        @GeneratedValue(strategy = GenerationType.SEQUENCE, generator = &quot;MARKET_MESSAGE_GENERATOR&quot;)\n        @SequenceGenerator(name = &quot;MARKET_MESSAGE_GENERATOR&quot;, sequenceName = &quot;MARKET_MESSAGE_SEQ&quot;, allocationSize = 1)\n        private Long id;\n    \n        @Basic\n        @Column(name = &quot;PUBLISH_DATE&quot;)\n        private Timestamp dateTime;\n    \n        @Basic\n        @Column(name = &quot;TITLE&quot;)\n        private String title;\n    \n        @Lob\n        @Nationalized\n        @Column(name = &quot;MESSAGE&quot;, columnDefinition=&quot;NCLOB NOT NULL&quot;)\n        private String message;\n }\n</code></pre>\n<p><code>User</code> looks like:</p>\n<pre><code>@Entity\n@Table(name = &quot;Users&quot;)\npublic class User {\n\n    @Id\n    @Column(name = &quot;ID&quot;)\n    @GeneratedValue(strategy = GenerationType.SEQUENCE, generator = &quot;USER_GENERATOR&quot;)\n    @SequenceGenerator(name = &quot;USER_GENERATOR&quot;, sequenceName = &quot;USERS_SEQ&quot;, allocationSize = 1)\n    private Long id;\n\n    @Basic\n    @Column(name = &quot;USER_NAME&quot;)\n    private String userName;\n}\n</code></pre>\n<p>and <code>SeenMessage</code> looks like:</p>\n<pre><code>@Entity\n@Table(name = &quot;SEEN_MESSAGE&quot;)\npublic class SeenMessage {\n\n    @Id\n    @Column(name = &quot;ID&quot;)\n    @GeneratedValue(strategy = GenerationType.SEQUENCE, generator = &quot;SEEN_MESSAGE_GENERATOR&quot;)\n    @SequenceGenerator(name = &quot;SEEN_MESSAGE_GENERATOR&quot;, sequenceName = &quot;SEEN_MESSAGE_SEQ&quot;, allocationSize = 1)\n    private Long id;\n\n    @Basic\n    @Column(name = &quot;SEEN_DATE&quot;)\n    private Timestamp seenDate;\n\n    @ManyToOne(fetch = FetchType.LAZY)\n    @JoinColumn(name = &quot;MESSAGE_ID&quot;)\n    private Messages message;\n\n    @ManyToOne(fetch = FetchType.LAZY)\n    @JoinColumn(name = &quot;USER_ID&quot;)\n    private User user; \n}\n</code></pre>\n<p>Also on this table (<code>SEEN_MESSAGE</code>) I have unique constraint condition on pair of (<code>Message_Id</code>, <code>User_Id</code>)</p>\n<p>And now the problem:</p>\n<p>I have a simple REST API for getting message with its ID, when anyone calls this service I will return the requested message and also I will Insert a record in <code>seenMessage</code> table with <code>messageId</code> and <code>userId</code> and of course its time.</p>\n<p>I do the second action(inserting in SeenMessage) in my service layer by calling a method from repository:</p>\n<pre><code>@Repository\npublic interface SeenMessageRepository extends JpaRepository&lt;SeenMessage, Long&gt; {\n\n    @Query(value = &quot;begin &quot; +\n            &quot;insert into SEEN_MESSAGE(ID, MESSAGE_ID, USER_ID, SEEN_DATE) &quot; +\n            &quot;values(seen_message_seq.nextval, :MId , :UId , CURRENT_TIMESTAMP ); &quot; +\n            &quot;exception &quot; +\n            &quot;when dup_val_on_index THEN &quot; +\n            &quot;RETURN; &quot; +\n            &quot;end;&quot;, nativeQuery = true)\n    void insertAndForget(Long MId, Long UId);\n}\n</code></pre>\n<p>As you can see I have wrote a native query, and when I execute it on DBMS it will successfully executed, but when I call my API using Postman, query will execute and performs as I expect but also it throws an exception which is:</p>\n<pre><code>2021-10-26 11:12:50.385 ERROR 4848 --- [nio-1201-exec-2] c.a.b.o.exceptions.ExceptionTranslator   : -1\n\njava.lang.NegativeArraySizeException: -1\n    at org.hibernate.loader.custom.ResultRowProcessor.prepareForAutoDiscovery(ResultRowProcessor.java:36)\n    at org.hibernate.loader.custom.CustomLoader.autoDiscoverTypes(CustomLoader.java:489)\n    at org.hibernate.loader.Loader.preprocessResultSet(Loader.java:2343)\n    at org.hibernate.loader.Loader.getResultSet(Loader.java:2299)\n    at org.hibernate.loader.Loader.executeQueryStatement(Loader.java:2050)\n    at org.hibernate.loader.Loader.executeQueryStatement(Loader.java:2012)\n    at org.hibernate.loader.Loader.doQuery(Loader.java:948)\n    at org.hibernate.loader.Loader.doQueryAndInitializeNonLazyCollections(Loader.java:349)\n    at org.hibernate.loader.Loader.doList(Loader.java:2843)\n    at org.hibernate.loader.Loader.doList(Loader.java:2825)\n    at org.hibernate.loader.Loader.listIgnoreQueryCache(Loader.java:2657)\n    at org.hibernate.loader.Loader.list(Loader.java:2652)\n    at org.hibernate.loader.custom.CustomLoader.list(CustomLoader.java:338)\n    at org.hibernate.internal.SessionImpl.listCustomQuery(SessionImpl.java:2141)\n    at org.hibernate.internal.AbstractSharedSessionContract.list(AbstractSharedSessionContract.java:1169)\n    at org.hibernate.query.internal.NativeQueryImpl.doList(NativeQueryImpl.java:176)\n    at org.hibernate.query.internal.AbstractProducedQuery.list(AbstractProducedQuery.java:1604)\n    at org.hibernate.query.internal.AbstractProducedQuery.getSingleResult(AbstractProducedQuery.java:1652)\n    at org.springframework.data.jpa.repository.query.JpaQueryExecution$SingleEntityExecution.doExecute(JpaQueryExecution.java:196)\n    at org.springframework.data.jpa.repository.query.JpaQueryExecution.execute(JpaQueryExecution.java:88)\n    at org.springframework.data.jpa.repository.query.AbstractJpaQuery.doExecute(AbstractJpaQuery.java:155)\n    at org.springframework.data.jpa.repository.query.AbstractJpaQuery.execute(AbstractJpaQuery.java:143)\n    at org.springframework.data.repository.core.support.RepositoryMethodInvoker.doInvoke(RepositoryMethodInvoker.java:137)\n    at org.springframework.data.repository.core.support.RepositoryMethodInvoker.invoke(RepositoryMethodInvoker.java:121)\n    at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.doInvoke(QueryExecutorMethodInterceptor.java:159)\n    at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.invoke(QueryExecutorMethodInterceptor.java:138)\n    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)\n    at org.springframework.data.projection.DefaultMethodInvokingMethodInterceptor.invoke(DefaultMethodInvokingMethodInterceptor.java:80)\n    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)\n    at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)\n    at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:388)\n    at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)\n    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)\n    at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:137)\n    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)\n    at org.springframework.data.jpa.repository.support.CrudMethodMetadataPostProcessor$CrudMethodMetadataPopulatingMethodInterceptor.invoke(CrudMethodMetadataPostProcessor.java:145)\n    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)\n    at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97)\n    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)\n    at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:215)\n    at com.sun.proxy.$Proxy125.insertAndForget(Unknown Source)\n</code></pre>\n<p>And maybe it is good to say that I wrote this query and did not use a simple Insert query, because in that case I needed to check Duplicate myself(if i did not check the duplicate I may face <code>UniqueconstraintViolationException</code>) with another database call which is extra in my opinion, so I wrote this one.</p>\n<p>Can someone tell me the reason of this error??</p>\n<p>why it executes on DBMS with no error but in my application it causes an error??</p>\n<p>Any help would be appreciated!!</p>\n"},{"tags":["java","google-cloud-platform","google-bigquery","google-cloud-dataflow","apache-beam"],"comments":[{"owner":{"account_id":69266,"reputation":10939,"user_id":201657,"accept_rate":62,"display_name":"jamiet"},"score":0,"creation_date":1637249066,"post_id":69830385,"comment_id":123780605,"body_markdown":"Don&#39;t suppose you ever got to the bottom of this did you?we&#39;re hitting the same issue","body":"Don&#39;t suppose you ever got to the bottom of this did you?we&#39;re hitting the same issue"},{"owner":{"account_id":4595021,"reputation":683,"user_id":3727346,"display_name":"strider"},"score":1,"creation_date":1637415490,"post_id":69830385,"comment_id":123822935,"body_markdown":"@jamiet I added the answer and how we fixed the problem. Maybe it can help, let me know!","body":"@jamiet I added the answer and how we fixed the problem. Maybe it can help, let me know!"},{"owner":{"account_id":69266,"reputation":10939,"user_id":201657,"accept_rate":62,"display_name":"jamiet"},"score":1,"creation_date":1637482441,"post_id":69830385,"comment_id":123834067,"body_markdown":"That’s helpful, much appreciated.","body":"That’s helpful, much appreciated."}],"answers":[{"tags":[],"owner":{"account_id":4595021,"reputation":683,"user_id":3727346,"display_name":"strider"},"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1637415444,"creation_date":1637415444,"answer_id":70046424,"question_id":69830385,"body_markdown":"Just an update to this question.\r\n\r\nThe problem was with the schema declaration and the JSON itself. \r\n\r\nWe defined the `parameters` column as `RECORD REPEATED` but `parameters` is an object in the JSON example. \r\n\r\nSo we have two options here.\r\n\r\n 1. Change the BigQuery schema from `RECORD REPEATED` to `RECORD\r\n    NULLABLE` \r\n 2. Add a bracket [] to the `parameters` object, for this option you will have to transform the JSON and add the brackets to treat the object as an array. \r\n\r\nExample:\r\n\r\n    {\r\n       &quot;parameters&quot;:[\r\n          {\r\n             &quot;parameter&quot;:[\r\n                {\r\n                   &quot;subParameter&quot;:[\r\n                      {\r\n                         &quot;value&quot;:&quot;T&quot;,\r\n                         &quot;key&quot;:&quot;C&quot;\r\n                      },\r\n                      {\r\n                         &quot;value&quot;:&quot;1&quot;,\r\n                         &quot;key&quot;:&quot;SEQUENCE_NUMBER&quot;\r\n                      },\r\n                      {\r\n                         &quot;value&quot;:&quot;1&quot;,\r\n                         &quot;key&quot;:&quot;SEQUENCE_NUMBER&quot;\r\n                      }\r\n                   ],\r\n                   &quot;value&quot;:&quot;C&quot;,\r\n                   &quot;key&quot;:&quot;C&quot;\r\n                }\r\n             ]\r\n          }\r\n       ]\r\n    }\r\n\r\n\r\n","title":"BigQuery Streaming Insert Error - Repeated record added outside of an array","body":"<p>Just an update to this question.</p>\n<p>The problem was with the schema declaration and the JSON itself.</p>\n<p>We defined the <code>parameters</code> column as <code>RECORD REPEATED</code> but <code>parameters</code> is an object in the JSON example.</p>\n<p>So we have two options here.</p>\n<ol>\n<li>Change the BigQuery schema from <code>RECORD REPEATED</code> to <code>RECORD NULLABLE</code></li>\n<li>Add a bracket [] to the <code>parameters</code> object, for this option you will have to transform the JSON and add the brackets to treat the object as an array.</li>\n</ol>\n<p>Example:</p>\n<pre><code>{\n   &quot;parameters&quot;:[\n      {\n         &quot;parameter&quot;:[\n            {\n               &quot;subParameter&quot;:[\n                  {\n                     &quot;value&quot;:&quot;T&quot;,\n                     &quot;key&quot;:&quot;C&quot;\n                  },\n                  {\n                     &quot;value&quot;:&quot;1&quot;,\n                     &quot;key&quot;:&quot;SEQUENCE_NUMBER&quot;\n                  },\n                  {\n                     &quot;value&quot;:&quot;1&quot;,\n                     &quot;key&quot;:&quot;SEQUENCE_NUMBER&quot;\n                  }\n               ],\n               &quot;value&quot;:&quot;C&quot;,\n               &quot;key&quot;:&quot;C&quot;\n            }\n         ]\n      }\n   ]\n}\n</code></pre>\n"}],"owner":{"account_id":4595021,"reputation":683,"user_id":3727346,"display_name":"strider"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1844,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":70046424,"answer_count":1,"score":1,"last_activity_date":1637415444,"creation_date":1635965962,"question_id":69830385,"body_markdown":"I&#39;m facing a weird problem while using Dataflow Streaming Insert. \r\nI have a JSON with a lot of records and arrays. I set up the Pipeline with Streaming Insert method and a class DeadLetters to handle the errors.\r\n\r\n```java\r\nformattedWaiting.apply(&quot;Insert Bigquery &quot;,\r\n\t\t\t\tBigQueryIO.&lt;KV&lt;TableRow,String&gt;&gt;write()\r\n\t\t\t\t.to(customOptions.getOutputTable())\r\n\t\t\t\t.withFormatFunction(kv -&gt; kv.getKey())\r\n\t\t\t\t.withMethod(BigQueryIO.Write.Method.STREAMING_INSERTS)\r\n\t\t\t\t.withSchemaFromView(schema)\r\n\t\t\t\t.withCreateDisposition(CreateDisposition.CREATE_IF_NEEDED)\r\n\t\t\t\t.withWriteDisposition(WriteDisposition.WRITE_APPEND)\r\n\t\t\t\t.withFailedInsertRetryPolicy(InsertRetryPolicy.retryTransientErrors())\r\n\t\t\t\t.withoutValidation()\r\n                .withExtendedErrorInfo()\r\n\t\t\t\t.withTimePartitioning(new TimePartitioning().setField(customOptions.getPartitionField().get()))\r\n\t\t\t\t.withClustering(clusteringFieldsList)\r\n                .withExtendedErrorInfo())\r\n\t\t\t\t.getFailedInsertsWithErr()\r\n\t\t\t\t.apply(&quot;Taking 1 element insertion&quot;, Sample.&lt;BigQueryInsertError&gt;any(1))\r\n\t\t\t\t.apply(&quot;Insertion errors&quot;,ParDo.of(new DeadLettersHandler()));\r\n```\r\n\r\nThe problem is when I&#39;m using the streaming insert method, some rows don&#39;t insert into the table and I&#39;m receiving the error:\r\n\r\n*Repeated record with name: XXXX added outside of an array.*\r\n\r\nI double-checked the JSON that has the problem and everything seems fine.\r\nThe weird part is when I comment the *withMethod* line, the row insert with no issue at all. \r\n\r\nI don&#39;t know why the pipeline has that behavior. \r\n\r\nThe JSON looks like this.\r\n\r\n```json\r\n{\r\n   &quot;parameters&quot;:{\r\n      &quot;parameter&quot;:[\r\n         {\r\n            &quot;subParameter&quot;:[\r\n               {\r\n                  &quot;value&quot;:&quot;T&quot;,\r\n                  &quot;key&quot;:&quot;C&quot;\r\n               },\r\n               {\r\n                  &quot;value&quot;:&quot;1&quot;,\r\n                  &quot;key&quot;:&quot;SEQUENCE_NUMBER&quot;\r\n               },\r\n               {\r\n                  &quot;value&quot;:&quot;1&quot;,\r\n                  &quot;key&quot;:&quot;SEQUENCE_NUMBER&quot;\r\n               }\r\n            ],\r\n            &quot;value&quot;:&quot;C&quot;,\r\n            &quot;key&quot;:&quot;C&quot;\r\n         },\r\n         {\r\n            &quot;subParameter&quot;:[\r\n               {\r\n                  &quot;value&quot;:&quot;T&quot;,\r\n                  &quot;key&quot;:&quot;C&quot;\r\n               },\r\n               {\r\n                  &quot;value&quot;:&quot;1&quot;,\r\n                  &quot;key&quot;:&quot;SEQUENCE_NUMBER&quot;\r\n               },\r\n               {\r\n                  &quot;value&quot;:&quot;2&quot;,\r\n                  &quot;key&quot;:&quot;SEQUENCE_NUMBER&quot;\r\n               }\r\n            ],\r\n            &quot;value&quot;:&quot;C&quot;,\r\n            &quot;key&quot;:&quot;C&quot;\r\n         }\r\n      ]\r\n   }\r\n}\r\n```\r\n\r\nThe BigQuery schema is fine because I can insert data while commenting the streaming insert line in the BigQueryIO\r\n\r\nAny idea fellows?\r\n\r\nThanks in advance! ","title":"BigQuery Streaming Insert Error - Repeated record added outside of an array","body":"<p>I'm facing a weird problem while using Dataflow Streaming Insert.\nI have a JSON with a lot of records and arrays. I set up the Pipeline with Streaming Insert method and a class DeadLetters to handle the errors.</p>\n<pre class=\"lang-java prettyprint-override\"><code>formattedWaiting.apply(&quot;Insert Bigquery &quot;,\n                BigQueryIO.&lt;KV&lt;TableRow,String&gt;&gt;write()\n                .to(customOptions.getOutputTable())\n                .withFormatFunction(kv -&gt; kv.getKey())\n                .withMethod(BigQueryIO.Write.Method.STREAMING_INSERTS)\n                .withSchemaFromView(schema)\n                .withCreateDisposition(CreateDisposition.CREATE_IF_NEEDED)\n                .withWriteDisposition(WriteDisposition.WRITE_APPEND)\n                .withFailedInsertRetryPolicy(InsertRetryPolicy.retryTransientErrors())\n                .withoutValidation()\n                .withExtendedErrorInfo()\n                .withTimePartitioning(new TimePartitioning().setField(customOptions.getPartitionField().get()))\n                .withClustering(clusteringFieldsList)\n                .withExtendedErrorInfo())\n                .getFailedInsertsWithErr()\n                .apply(&quot;Taking 1 element insertion&quot;, Sample.&lt;BigQueryInsertError&gt;any(1))\n                .apply(&quot;Insertion errors&quot;,ParDo.of(new DeadLettersHandler()));\n</code></pre>\n<p>The problem is when I'm using the streaming insert method, some rows don't insert into the table and I'm receiving the error:</p>\n<p><em>Repeated record with name: XXXX added outside of an array.</em></p>\n<p>I double-checked the JSON that has the problem and everything seems fine.\nThe weird part is when I comment the <em>withMethod</em> line, the row insert with no issue at all.</p>\n<p>I don't know why the pipeline has that behavior.</p>\n<p>The JSON looks like this.</p>\n<pre class=\"lang-json prettyprint-override\"><code>{\n   &quot;parameters&quot;:{\n      &quot;parameter&quot;:[\n         {\n            &quot;subParameter&quot;:[\n               {\n                  &quot;value&quot;:&quot;T&quot;,\n                  &quot;key&quot;:&quot;C&quot;\n               },\n               {\n                  &quot;value&quot;:&quot;1&quot;,\n                  &quot;key&quot;:&quot;SEQUENCE_NUMBER&quot;\n               },\n               {\n                  &quot;value&quot;:&quot;1&quot;,\n                  &quot;key&quot;:&quot;SEQUENCE_NUMBER&quot;\n               }\n            ],\n            &quot;value&quot;:&quot;C&quot;,\n            &quot;key&quot;:&quot;C&quot;\n         },\n         {\n            &quot;subParameter&quot;:[\n               {\n                  &quot;value&quot;:&quot;T&quot;,\n                  &quot;key&quot;:&quot;C&quot;\n               },\n               {\n                  &quot;value&quot;:&quot;1&quot;,\n                  &quot;key&quot;:&quot;SEQUENCE_NUMBER&quot;\n               },\n               {\n                  &quot;value&quot;:&quot;2&quot;,\n                  &quot;key&quot;:&quot;SEQUENCE_NUMBER&quot;\n               }\n            ],\n            &quot;value&quot;:&quot;C&quot;,\n            &quot;key&quot;:&quot;C&quot;\n         }\n      ]\n   }\n}\n</code></pre>\n<p>The BigQuery schema is fine because I can insert data while commenting the streaming insert line in the BigQueryIO</p>\n<p>Any idea fellows?</p>\n<p>Thanks in advance!</p>\n"},{"tags":["java","spring","spring-boot","hibernate","spring-data-jpa"],"comments":[{"owner":{"account_id":3340852,"reputation":1493,"user_id":2807177,"display_name":"gmanjon"},"score":2,"creation_date":1636993415,"post_id":69887977,"comment_id":123700074,"body_markdown":"What problem are you having when you try this? Exception in the query? in deployment? which one exactly? or it just cannot be mapped to the `Event` class","body":"What problem are you having when you try this? Exception in the query? in deployment? which one exactly? or it just cannot be mapped to the <code>Event</code> class"},{"owner":{"account_id":3340852,"reputation":1493,"user_id":2807177,"display_name":"gmanjon"},"score":1,"creation_date":1636994167,"post_id":69887977,"comment_id":123700416,"body_markdown":"I guess you already know, but just to be sure. For complex cases you can use constructors directly in you query. For instance, you could do: `select new Event(e.id, e.name) from ...`. Although in the last version I tested it you need to sepcify the fully qulified class name (with the full package).\n\nBut taking into account that you would need more objects (because of the @Embeded) I haven&#39;t tested if this can be done nesting another constructors as a paremeter for the outter constructor, meaning `select new Event(e.id, e.name, new Metadata(m.id, m.dataX)) from ...`","body":"I guess you already know, but just to be sure. For complex cases you can use constructors directly in you query. For instance, you could do: <code>select new Event(e.id, e.name) from ...</code>. Although in the last version I tested it you need to sepcify the fully qulified class name (with the full package).  But taking into account that you would need more objects (because of the @Embeded) I haven&#39;t tested if this can be done nesting another constructors as a paremeter for the outter constructor, meaning <code>select new Event(e.id, e.name, new Metadata(m.id, m.dataX)) from ...</code>"},{"owner":{"account_id":6278449,"reputation":2408,"user_id":4880379,"display_name":"kasptom"},"score":0,"creation_date":1637103772,"post_id":69887977,"comment_id":123735856,"body_markdown":"What SQL database / dialect do you use? Why does the query that outputs the example above differ from the one used in the `@Query` annotation?","body":"What SQL database / dialect do you use? Why does the query that outputs the example above differ from the one used in the <code>@Query</code> annotation?"}],"answers":[{"tags":[],"owner":{"account_id":6278449,"reputation":2408,"user_id":4880379,"display_name":"kasptom"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1637415397,"creation_date":1637414905,"answer_id":70046360,"question_id":69887977,"body_markdown":"You could try with [constructor result set mapping](https://www.baeldung.com/jpa-sql-resultset-mapping#constructor-mapping)\r\n\r\n 1. Annotate the `Event` entity similar to this:\r\n```java\r\n@Entity\r\n@Table(name = &quot;events&quot;)\r\n@SqlResultSetMapping(\r\n        name = &quot;recurring_events_mapping&quot;,\r\n        classes = {\r\n                @ConstructorResult(\r\n                        targetClass = Event.class,\r\n                        columns = {\r\n                                @ColumnResult(name = &quot;ID&quot;, type = String.class),\r\n                                @ColumnResult(name = &quot;STARTS_AT&quot;, type = LocalDateTime.class),\r\n                                @ColumnResult(name = &quot;ENDS_AT&quot;, type = LocalDateTime.class),\r\n                                @ColumnResult(name = &quot;FREQUENCY&quot;, type = String.class),\r\n                                @ColumnResult(name = &quot;SEPARATION&quot;, type = Integer.class),\r\n                                @ColumnResult(name = &quot;COUNT&quot;, type = Integer.class),\r\n                                @ColumnResult(name = &quot;UNTIL&quot;, type = LocalDate.class),\r\n                                @ColumnResult(name = &quot;TIMEZONE_NAME&quot;, type = String.class),\r\n                                @ColumnResult(name = &quot;IS_FULL_DAY&quot;, type = Boolean.class),\r\n                                @ColumnResult(name = &quot;LOCATION_ID&quot;, type = String.class),\r\n                                @ColumnResult(name = &quot;CREATED_AT&quot;, type = LocalDateTime.class),\r\n                                @ColumnResult(name = &quot;UPDATED_AT&quot;, type = LocalDateTime.class),\r\n                                @ColumnResult(name = &quot;VERSION&quot;, type = Integer.class),\r\n                                // metadata\r\n                                @ColumnResult(name = &quot;NAME&quot;, type = String.class),\r\n                                @ColumnResult(name = &quot;DESCRIPTION&quot;, type = String.class),\r\n                                @ColumnResult(name = &quot;PICTURE&quot;, type = String.class)\r\n                        }\r\n                )\r\n        }\r\n)\r\n@NamedNativeQuery(\r\n        name = &quot;Event.RecurringEventsQuery&quot;,\r\n        query = &quot;select  e.*, &quot; +\r\n                &quot;    coalesce (em.name, em2.name) as name, &quot; +\r\n                &quot;    coalesce (em.description, em2.description) as description, &quot; +\r\n                &quot;    coalesce (em.picture , em2.picture) as picture &quot; +\r\n                &quot;from recurring_events_mock e &quot; + // just for test\r\n                &quot;left join events_metadata em on &quot; +\r\n                &quot;    em.event_id = e.id &quot; +\r\n                &quot;    and em.starts_at = e.starts_at &quot; +\r\n                &quot;left join events_metadata em2 on &quot; +\r\n                &quot;    em2.event_id = e.id &quot; +\r\n                &quot;    and em2.starts_at = ( &quot; +\r\n                &quot;    select MIN(starts_at) &quot; +\r\n                &quot;    from events_metadata &quot; +\r\n                &quot;    where event_id = e.id &quot; +\r\n                &quot;    limit 1)&quot; +\r\n                &quot;where :time_zone IS NOT NULL &quot; + // just for test\r\n                &quot;    and :events_limit &gt; 0 &quot; + // just for test\r\n                &quot;    and :range_start IS NOT NULL &quot; + // just for test\r\n                &quot;    and :range_end IS NOT NULL &quot;, // just for test\r\n        resultSetMapping = &quot;recurring_events_mapping&quot;)\r\n```\r\n\r\n 2. Then in your EventRepository use it like this\r\n```java\r\n    @Query(name = &quot;Event.RecurringEventsQuery&quot;)\r\n    List&lt;Event&gt; getEvents(\r\n            @Param(&quot;range_start&quot;) LocalDateTime rangeStart,\r\n            @Param(&quot;range_end&quot;) LocalDateTime rangeEnd,\r\n            @Param(&quot;time_zone&quot;) String timezone,\r\n            @Param(&quot;events_limit&quot;) Integer limit\r\n    );\r\n    List&lt;Event&gt; findAll();\r\n```\r\n 3. Also you have to create proper constructors in the Event and the related classes, e.g.:\r\n```java\r\n    public Event() {\r\n    }\r\n\r\n    public Event(\r\n            String id,\r\n            LocalDateTime startsAt,\r\n            LocalDateTime endsAt,\r\n            String frequency,\r\n            Integer separation,\r\n            Integer count,\r\n            LocalDate until,\r\n            String timezoneName,\r\n            Boolean isFullDay,\r\n            String locationId,\r\n            LocalDateTime createdAt,\r\n            LocalDateTime updatedAt,\r\n            Integer version,\r\n            // metadata\r\n            String name,\r\n            String description,\r\n            String picture) {\r\n        this.id = id;\r\n        this.startsAt = startsAt;\r\n        this.endsAt = endsAt;\r\n        this.frequency = EventFrequency.valueOf(frequency);\r\n        this.separation = separation;\r\n        this.count = count;\r\n        this.until = until;\r\n        this.timezoneName = timezoneName;\r\n        this.isFullDay = isFullDay;\r\n        this.location = new Location(locationId);\r\n        this.metadata = new EventMetadata(id, startsAt, name, description, picture);\r\n    }\r\n```\r\n\r\nHere you can find the ugly POC repo https://bitbucket.org/kasptom/stackoverflow-69887977","title":"Custom Join with composite key Hibernate","body":"<p>You could try with <a href=\"https://www.baeldung.com/jpa-sql-resultset-mapping#constructor-mapping\" rel=\"nofollow noreferrer\">constructor result set mapping</a></p>\n<ol>\n<li>Annotate the <code>Event</code> entity similar to this:</li>\n</ol>\n<pre class=\"lang-java prettyprint-override\"><code>@Entity\n@Table(name = &quot;events&quot;)\n@SqlResultSetMapping(\n        name = &quot;recurring_events_mapping&quot;,\n        classes = {\n                @ConstructorResult(\n                        targetClass = Event.class,\n                        columns = {\n                                @ColumnResult(name = &quot;ID&quot;, type = String.class),\n                                @ColumnResult(name = &quot;STARTS_AT&quot;, type = LocalDateTime.class),\n                                @ColumnResult(name = &quot;ENDS_AT&quot;, type = LocalDateTime.class),\n                                @ColumnResult(name = &quot;FREQUENCY&quot;, type = String.class),\n                                @ColumnResult(name = &quot;SEPARATION&quot;, type = Integer.class),\n                                @ColumnResult(name = &quot;COUNT&quot;, type = Integer.class),\n                                @ColumnResult(name = &quot;UNTIL&quot;, type = LocalDate.class),\n                                @ColumnResult(name = &quot;TIMEZONE_NAME&quot;, type = String.class),\n                                @ColumnResult(name = &quot;IS_FULL_DAY&quot;, type = Boolean.class),\n                                @ColumnResult(name = &quot;LOCATION_ID&quot;, type = String.class),\n                                @ColumnResult(name = &quot;CREATED_AT&quot;, type = LocalDateTime.class),\n                                @ColumnResult(name = &quot;UPDATED_AT&quot;, type = LocalDateTime.class),\n                                @ColumnResult(name = &quot;VERSION&quot;, type = Integer.class),\n                                // metadata\n                                @ColumnResult(name = &quot;NAME&quot;, type = String.class),\n                                @ColumnResult(name = &quot;DESCRIPTION&quot;, type = String.class),\n                                @ColumnResult(name = &quot;PICTURE&quot;, type = String.class)\n                        }\n                )\n        }\n)\n@NamedNativeQuery(\n        name = &quot;Event.RecurringEventsQuery&quot;,\n        query = &quot;select  e.*, &quot; +\n                &quot;    coalesce (em.name, em2.name) as name, &quot; +\n                &quot;    coalesce (em.description, em2.description) as description, &quot; +\n                &quot;    coalesce (em.picture , em2.picture) as picture &quot; +\n                &quot;from recurring_events_mock e &quot; + // just for test\n                &quot;left join events_metadata em on &quot; +\n                &quot;    em.event_id = e.id &quot; +\n                &quot;    and em.starts_at = e.starts_at &quot; +\n                &quot;left join events_metadata em2 on &quot; +\n                &quot;    em2.event_id = e.id &quot; +\n                &quot;    and em2.starts_at = ( &quot; +\n                &quot;    select MIN(starts_at) &quot; +\n                &quot;    from events_metadata &quot; +\n                &quot;    where event_id = e.id &quot; +\n                &quot;    limit 1)&quot; +\n                &quot;where :time_zone IS NOT NULL &quot; + // just for test\n                &quot;    and :events_limit &gt; 0 &quot; + // just for test\n                &quot;    and :range_start IS NOT NULL &quot; + // just for test\n                &quot;    and :range_end IS NOT NULL &quot;, // just for test\n        resultSetMapping = &quot;recurring_events_mapping&quot;)\n</code></pre>\n<ol start=\"2\">\n<li>Then in your EventRepository use it like this</li>\n</ol>\n<pre class=\"lang-java prettyprint-override\"><code>    @Query(name = &quot;Event.RecurringEventsQuery&quot;)\n    List&lt;Event&gt; getEvents(\n            @Param(&quot;range_start&quot;) LocalDateTime rangeStart,\n            @Param(&quot;range_end&quot;) LocalDateTime rangeEnd,\n            @Param(&quot;time_zone&quot;) String timezone,\n            @Param(&quot;events_limit&quot;) Integer limit\n    );\n    List&lt;Event&gt; findAll();\n</code></pre>\n<ol start=\"3\">\n<li>Also you have to create proper constructors in the Event and the related classes, e.g.:</li>\n</ol>\n<pre class=\"lang-java prettyprint-override\"><code>    public Event() {\n    }\n\n    public Event(\n            String id,\n            LocalDateTime startsAt,\n            LocalDateTime endsAt,\n            String frequency,\n            Integer separation,\n            Integer count,\n            LocalDate until,\n            String timezoneName,\n            Boolean isFullDay,\n            String locationId,\n            LocalDateTime createdAt,\n            LocalDateTime updatedAt,\n            Integer version,\n            // metadata\n            String name,\n            String description,\n            String picture) {\n        this.id = id;\n        this.startsAt = startsAt;\n        this.endsAt = endsAt;\n        this.frequency = EventFrequency.valueOf(frequency);\n        this.separation = separation;\n        this.count = count;\n        this.until = until;\n        this.timezoneName = timezoneName;\n        this.isFullDay = isFullDay;\n        this.location = new Location(locationId);\n        this.metadata = new EventMetadata(id, startsAt, name, description, picture);\n    }\n</code></pre>\n<p>Here you can find the ugly POC repo <a href=\"https://bitbucket.org/kasptom/stackoverflow-69887977\" rel=\"nofollow noreferrer\">https://bitbucket.org/kasptom/stackoverflow-69887977</a></p>\n"}],"owner":{"account_id":1277134,"reputation":3151,"user_id":1232131,"accept_rate":62,"display_name":"Leonardo"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":400,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"answer_count":1,"score":3,"last_activity_date":1637415397,"creation_date":1636394545,"question_id":69887977,"body_markdown":"thanks for your time!\r\nI have a complex scenario that I&#39;m trying to map with JPA/Hibernate in spring.\r\n\r\nFirst, I have a function that generates dates dynamically, which outputs the following:\r\n\r\n    id                                  |starts_at              |ends_at                |frequency|separation|count|until|timezone_name|is_full_day|location_id                         |created_at             |updated_at             |version|name                         |description      |picture|\r\n    ------------------------------------+-----------------------+-----------------------+---------+----------+-----+-----+-------------+-----------+------------------------------------+-----------------------+-----------------------+-------+-----------------------------+-----------------+-------+\r\n    d255afb6-3730-4845-8e5e-18baa909dcfe|2021-12-21 18:00:00.000|2021-12-22 02:00:00.000|ONCE     |         1|     |     |UTC          |false      |fe88fa63-360e-4281-a383-35826a759e59|2021-10-29 00:22:46.109|2021-10-29 00:22:46.109|      0|                             |                 |       |\r\n    e7193453-4c1b-433d-8127-5eedf2efd011|2022-02-20 20:00:00.000|2022-02-20 23:00:00.000|WEEKLY   |         1|     |     |UTC          |false      |fe88fa63-360e-4281-a383-35826a759e59|2021-11-02 19:23:31.029|2021-11-02 19:23:31.029|      0|Festa da minha graaande amiga|A Fofinha nao vai|       |\r\n    e7193453-4c1b-433d-8127-5eedf2efd011|2022-02-21 20:00:00.000|2022-02-21 23:00:00.000|WEEKLY   |         1|     |     |UTC          |false      |fe88fa63-360e-4281-a383-35826a759e59|2021-11-02 19:23:31.029|2021-11-02 19:23:31.029|      0|Muito massa essa fita        |Mudanca drastica |       |\r\n    e7193453-4c1b-433d-8127-5eedf2efd011|2022-02-22 20:00:00.000|2022-02-22 23:00:00.000|WEEKLY   |         1|     |     |UTC          |false      |fe88fa63-360e-4281-a383-35826a759e59|2021-11-02 19:23:31.029|2021-11-02 19:23:31.029|      0|Festa da minha graaande amiga|A Fofinha nao vai|       |\r\n    e7193453-4c1b-433d-8127-5eedf2efd011|2022-02-24 20:00:00.000|2022-02-24 23:00:00.000|WEEKLY   |         1|     |     |UTC          |false      |fe88fa63-360e-4281-a383-35826a759e59|2021-11-02 19:23:31.029|2021-11-02 19:23:31.029|      0|Festa da minha graaande amiga|A Fofinha nao vai|       |\r\n    e7193453-4c1b-433d-8127-5eedf2efd011|2022-02-25 20:00:00.000|2022-02-25 23:00:00.000|WEEKLY   |         1|     |     |UTC          |false      |fe88fa63-360e-4281-a383-35826a759e59|2021-11-02 19:23:31.029|2021-11-02 19:23:31.029|      0|Festa da minha graaande amiga|A Fofinha nao vai|       |\r\n\r\nThe important parts are: id (which is the same, since it&#39;s the same entity in the database; starts_at: the initial date of the event and the metadata part (which is a left join with another table);\r\n\r\nHere is the query that outputs the example above:\r\n\r\n        select\r\n    \te.*,\r\n    \tcoalesce (em.name,\r\n    \tem2.name) as name,\r\n    \tcoalesce (em.description ,\r\n    \tem2.description) as description,\r\n    \tcoalesce (em.picture ,\r\n    \tem2.picture) as picture\r\n    from\r\n    \trecurring_events_for(&#39;2021-12-03T10:15:30&#39;,\r\n    \t&#39;2022-12-03T10:15:30&#39;,\r\n    \t&#39;UTC&#39;,\r\n    \t5,\r\n    \tfalse) e\r\n    left join events_metadata em on\r\n    \tem.event_id = e.id\r\n    \tand em.starts_at = e.starts_at\r\n    left join events_metadata em2\r\n    on\r\n    \tem2.event_id = e.id\r\n    \tand em2.starts_at = (\r\n    \tselect\r\n    \t\tMIN(starts_at)\r\n    \tfrom\r\n    \t\tevents_metadata\r\n    \twhere\r\n    \t\tevent_id = e.id\r\n    \tlimit 1)\r\n\r\nHow I&#39;ve mapped this using Hibernate:\r\n\r\nEvent (output from recurring_events_for):\r\n\r\n    @Entity\r\n    @Table(name = &quot;events&quot;)\r\n    public class Event extends BaseEntity {\r\n    \r\n        @Column\r\n        private LocalDateTime startsAt;\r\n    \r\n        @Column\r\n        private LocalDateTime endsAt;\r\n    \r\n        @Column\r\n        @Enumerated(EnumType.STRING)\r\n        private EventFrequency frequency;\r\n    \r\n        @Column(nullable = false)\r\n        private Integer separation;\r\n    \r\n        @Column\r\n        private Integer count;\r\n    \r\n        @Column\r\n        private LocalDate until;\r\n    \r\n        @Column(nullable = false)\r\n        private String timezoneName;\r\n    \r\n        @Column(nullable = false)\r\n        private boolean isFullDay;\r\n    \r\n        @ManyToMany\r\n        @JoinTable(\r\n                name = &quot;event_organizers&quot;,\r\n                joinColumns = @JoinColumn(name = &quot;event_id&quot;),\r\n                inverseJoinColumns = @JoinColumn(name = &quot;user_id&quot;))\r\n        private Set&lt;User&gt; organizers;\r\n    \r\n        @OneToMany(mappedBy = &quot;product&quot;)\r\n        private Set&lt;EventProduct&gt; products;\r\n    \r\n        @ManyToOne(cascade = {CascadeType.PERSIST, CascadeType.MERGE, CascadeType.REFRESH})\r\n        @JoinColumn(name = &quot;location_id&quot;)\r\n        private Location location;\r\n    \r\n        @OneToMany(mappedBy = &quot;event&quot;,\r\n                orphanRemoval = true,\r\n                cascade = {CascadeType.PERSIST, CascadeType.MERGE, CascadeType.REFRESH})\r\n        private Set&lt;EventRecurrence&gt; recurrences;\r\n    \r\n        @OneToOne(mappedBy = &quot;id.event&quot;, optional = false, orphanRemoval = true, fetch = FetchType.LAZY)\r\n        private EventMetadata metadata;\r\n\r\nThe event_metadata table:\r\n\r\n    @Table(name = &quot;events_metadata&quot;)\r\n    @Entity\r\n    public class EventMetadata extends BaseEntityNoId {\r\n    \r\n        @EmbeddedId\r\n        private EventMetadataPK id;\r\n    \r\n        @Column(nullable = false)\r\n        private String name;\r\n    \r\n        @Column(nullable = false)\r\n        private String description;\r\n    \r\n        @Column\r\n        private String picture;\r\n    \r\n        @Column(nullable = false)\r\n        private boolean isPrivate;\r\n    \r\n        @Column(nullable = false)\r\n        private boolean showGuestList;\r\n    \r\n        @Column(nullable = false)\r\n        private boolean friendCanInviteFriends;\r\n    \r\n        @OneToMany(mappedBy = &quot;event&quot;, orphanRemoval = true)\r\n        private Set&lt;EventAttendance&gt; eventAttendances;\r\n\r\nThe embedded PK:\r\n\r\n\r\n    @Embeddable\r\n    public class EventMetadataPK implements Serializable {\r\n    \r\n        @OneToOne(orphanRemoval = true)\r\n        @JoinColumn(name = &quot;event_id&quot;, updatable = false, insertable = false)\r\n        private Event event;\r\n    \r\n        @Column(nullable = false)\r\n        private LocalDateTime startsAt;\r\n\r\n\r\nFinally, how I&#39;m calling this in JPA world:\r\n\r\n    @Query(nativeQuery = true,\r\n                value = &quot;select e.*, coalesce (em.*, em2.*) as metadata &quot; +\r\n                        &quot;from recurring_events_for(:range_start, :range_end, :time_zone, :events_limit, false) e &quot; +\r\n                        &quot;left join events_metadata em on em.event_id = e.id and em.starts_at = e.starts_at &quot; +\r\n                        &quot;left join events_metadata em2 &quot; +\r\n                        &quot;on em2.event_id = e.id &quot; +\r\n                        &quot;and em2.starts_at = (select MIN(starts_at) from events_metadata where event_id = e.id limit 1)&quot;)\r\n        List&lt;Event&gt; getEvents(@Param(&quot;range_start&quot;) LocalDateTime rangeStart,\r\n                              @Param(&quot;range_end&quot;) LocalDateTime rangeEnd,\r\n                              @Param(&quot;time_zone&quot;) String timezone,\r\n                              @Param(&quot;events_limit&quot;) Integer limit);\r\n\r\nThe problem is, the starts_at column mapped in the embedded PK is joined virtually with the result of recurring_events_for, therefore not possible (I think) to map it using Hibernate. How can I handle this situation??\r\n\r\nThanks!","title":"Custom Join with composite key Hibernate","body":"<p>thanks for your time!\nI have a complex scenario that I'm trying to map with JPA/Hibernate in spring.</p>\n<p>First, I have a function that generates dates dynamically, which outputs the following:</p>\n<pre><code>id                                  |starts_at              |ends_at                |frequency|separation|count|until|timezone_name|is_full_day|location_id                         |created_at             |updated_at             |version|name                         |description      |picture|\n------------------------------------+-----------------------+-----------------------+---------+----------+-----+-----+-------------+-----------+------------------------------------+-----------------------+-----------------------+-------+-----------------------------+-----------------+-------+\nd255afb6-3730-4845-8e5e-18baa909dcfe|2021-12-21 18:00:00.000|2021-12-22 02:00:00.000|ONCE     |         1|     |     |UTC          |false      |fe88fa63-360e-4281-a383-35826a759e59|2021-10-29 00:22:46.109|2021-10-29 00:22:46.109|      0|                             |                 |       |\ne7193453-4c1b-433d-8127-5eedf2efd011|2022-02-20 20:00:00.000|2022-02-20 23:00:00.000|WEEKLY   |         1|     |     |UTC          |false      |fe88fa63-360e-4281-a383-35826a759e59|2021-11-02 19:23:31.029|2021-11-02 19:23:31.029|      0|Festa da minha graaande amiga|A Fofinha nao vai|       |\ne7193453-4c1b-433d-8127-5eedf2efd011|2022-02-21 20:00:00.000|2022-02-21 23:00:00.000|WEEKLY   |         1|     |     |UTC          |false      |fe88fa63-360e-4281-a383-35826a759e59|2021-11-02 19:23:31.029|2021-11-02 19:23:31.029|      0|Muito massa essa fita        |Mudanca drastica |       |\ne7193453-4c1b-433d-8127-5eedf2efd011|2022-02-22 20:00:00.000|2022-02-22 23:00:00.000|WEEKLY   |         1|     |     |UTC          |false      |fe88fa63-360e-4281-a383-35826a759e59|2021-11-02 19:23:31.029|2021-11-02 19:23:31.029|      0|Festa da minha graaande amiga|A Fofinha nao vai|       |\ne7193453-4c1b-433d-8127-5eedf2efd011|2022-02-24 20:00:00.000|2022-02-24 23:00:00.000|WEEKLY   |         1|     |     |UTC          |false      |fe88fa63-360e-4281-a383-35826a759e59|2021-11-02 19:23:31.029|2021-11-02 19:23:31.029|      0|Festa da minha graaande amiga|A Fofinha nao vai|       |\ne7193453-4c1b-433d-8127-5eedf2efd011|2022-02-25 20:00:00.000|2022-02-25 23:00:00.000|WEEKLY   |         1|     |     |UTC          |false      |fe88fa63-360e-4281-a383-35826a759e59|2021-11-02 19:23:31.029|2021-11-02 19:23:31.029|      0|Festa da minha graaande amiga|A Fofinha nao vai|       |\n</code></pre>\n<p>The important parts are: id (which is the same, since it's the same entity in the database; starts_at: the initial date of the event and the metadata part (which is a left join with another table);</p>\n<p>Here is the query that outputs the example above:</p>\n<pre><code>    select\n    e.*,\n    coalesce (em.name,\n    em2.name) as name,\n    coalesce (em.description ,\n    em2.description) as description,\n    coalesce (em.picture ,\n    em2.picture) as picture\nfrom\n    recurring_events_for('2021-12-03T10:15:30',\n    '2022-12-03T10:15:30',\n    'UTC',\n    5,\n    false) e\nleft join events_metadata em on\n    em.event_id = e.id\n    and em.starts_at = e.starts_at\nleft join events_metadata em2\non\n    em2.event_id = e.id\n    and em2.starts_at = (\n    select\n        MIN(starts_at)\n    from\n        events_metadata\n    where\n        event_id = e.id\n    limit 1)\n</code></pre>\n<p>How I've mapped this using Hibernate:</p>\n<p>Event (output from recurring_events_for):</p>\n<pre><code>@Entity\n@Table(name = &quot;events&quot;)\npublic class Event extends BaseEntity {\n\n    @Column\n    private LocalDateTime startsAt;\n\n    @Column\n    private LocalDateTime endsAt;\n\n    @Column\n    @Enumerated(EnumType.STRING)\n    private EventFrequency frequency;\n\n    @Column(nullable = false)\n    private Integer separation;\n\n    @Column\n    private Integer count;\n\n    @Column\n    private LocalDate until;\n\n    @Column(nullable = false)\n    private String timezoneName;\n\n    @Column(nullable = false)\n    private boolean isFullDay;\n\n    @ManyToMany\n    @JoinTable(\n            name = &quot;event_organizers&quot;,\n            joinColumns = @JoinColumn(name = &quot;event_id&quot;),\n            inverseJoinColumns = @JoinColumn(name = &quot;user_id&quot;))\n    private Set&lt;User&gt; organizers;\n\n    @OneToMany(mappedBy = &quot;product&quot;)\n    private Set&lt;EventProduct&gt; products;\n\n    @ManyToOne(cascade = {CascadeType.PERSIST, CascadeType.MERGE, CascadeType.REFRESH})\n    @JoinColumn(name = &quot;location_id&quot;)\n    private Location location;\n\n    @OneToMany(mappedBy = &quot;event&quot;,\n            orphanRemoval = true,\n            cascade = {CascadeType.PERSIST, CascadeType.MERGE, CascadeType.REFRESH})\n    private Set&lt;EventRecurrence&gt; recurrences;\n\n    @OneToOne(mappedBy = &quot;id.event&quot;, optional = false, orphanRemoval = true, fetch = FetchType.LAZY)\n    private EventMetadata metadata;\n</code></pre>\n<p>The event_metadata table:</p>\n<pre><code>@Table(name = &quot;events_metadata&quot;)\n@Entity\npublic class EventMetadata extends BaseEntityNoId {\n\n    @EmbeddedId\n    private EventMetadataPK id;\n\n    @Column(nullable = false)\n    private String name;\n\n    @Column(nullable = false)\n    private String description;\n\n    @Column\n    private String picture;\n\n    @Column(nullable = false)\n    private boolean isPrivate;\n\n    @Column(nullable = false)\n    private boolean showGuestList;\n\n    @Column(nullable = false)\n    private boolean friendCanInviteFriends;\n\n    @OneToMany(mappedBy = &quot;event&quot;, orphanRemoval = true)\n    private Set&lt;EventAttendance&gt; eventAttendances;\n</code></pre>\n<p>The embedded PK:</p>\n<pre><code>@Embeddable\npublic class EventMetadataPK implements Serializable {\n\n    @OneToOne(orphanRemoval = true)\n    @JoinColumn(name = &quot;event_id&quot;, updatable = false, insertable = false)\n    private Event event;\n\n    @Column(nullable = false)\n    private LocalDateTime startsAt;\n</code></pre>\n<p>Finally, how I'm calling this in JPA world:</p>\n<pre><code>@Query(nativeQuery = true,\n            value = &quot;select e.*, coalesce (em.*, em2.*) as metadata &quot; +\n                    &quot;from recurring_events_for(:range_start, :range_end, :time_zone, :events_limit, false) e &quot; +\n                    &quot;left join events_metadata em on em.event_id = e.id and em.starts_at = e.starts_at &quot; +\n                    &quot;left join events_metadata em2 &quot; +\n                    &quot;on em2.event_id = e.id &quot; +\n                    &quot;and em2.starts_at = (select MIN(starts_at) from events_metadata where event_id = e.id limit 1)&quot;)\n    List&lt;Event&gt; getEvents(@Param(&quot;range_start&quot;) LocalDateTime rangeStart,\n                          @Param(&quot;range_end&quot;) LocalDateTime rangeEnd,\n                          @Param(&quot;time_zone&quot;) String timezone,\n                          @Param(&quot;events_limit&quot;) Integer limit);\n</code></pre>\n<p>The problem is, the starts_at column mapped in the embedded PK is joined virtually with the result of recurring_events_for, therefore not possible (I think) to map it using Hibernate. How can I handle this situation??</p>\n<p>Thanks!</p>\n"},{"tags":["java","android","multithreading","networking"],"comments":[{"owner":{"account_id":2673407,"reputation":44640,"user_id":2310289,"display_name":"Scary Wombat"},"score":1,"creation_date":1574150261,"post_id":58928987,"comment_id":104118261,"body_markdown":"Also [Please add a minimal, complete, and verifiable example](https://stackoverflow.com/help/mcve)","body":"Also <a href=\"https://stackoverflow.com/help/mcve\">Please add a minimal, complete, and verifiable example</a>"},{"owner":{"account_id":2673407,"reputation":44640,"user_id":2310289,"display_name":"Scary Wombat"},"score":1,"creation_date":1574151099,"post_id":58928987,"comment_id":104118604,"body_markdown":"Rather than this `catch (Exception e) { denied = true; }` print the actual Exception `e.printStackTrace();`","body":"Rather than this <code>catch (Exception e) { denied = true; }</code> print the actual Exception <code>e.printStackTrace();</code>"},{"owner":{"account_id":13245883,"reputation":121,"user_id":9565442,"display_name":"schnondle"},"score":0,"creation_date":1574151357,"post_id":58928987,"comment_id":104118715,"body_markdown":"I updated it and took out everything that isn&#39;t the socket or thread parts, being that I know that&#39;s where the problem is. Everything else is just moving data around within the activity. I added the `printStackTrace()`, but the `denied = true` is used for making sure the user is informed of a failed connection, as well as allowing for the failed connection to make another attempt if they press submit again.","body":"I updated it and took out everything that isn&#39;t the socket or thread parts, being that I know that&#39;s where the problem is. Everything else is just moving data around within the activity. I added the <code>printStackTrace()</code>, but the <code>denied = true</code> is used for making sure the user is informed of a failed connection, as well as allowing for the failed connection to make another attempt if they press submit again."},{"owner":{"account_id":13245883,"reputation":121,"user_id":9565442,"display_name":"schnondle"},"score":0,"creation_date":1574151925,"post_id":58928987,"comment_id":104118996,"body_markdown":"I think an issue I&#39;m having is that things aren&#39;t actually failing/catching. I suspect that maybe the way I&#39;m dealing with the thread is wrong, or something in the way the ``PlayerActivity`` class is using the ``PlayerConnect`` class is wrong.","body":"I think an issue I&#39;m having is that things aren&#39;t actually failing/catching. I suspect that maybe the way I&#39;m dealing with the thread is wrong, or something in the way the <code>PlayerActivity</code> class is using the <code>PlayerConnect</code> class is wrong."}],"answers":[{"tags":[],"owner":{"account_id":7256570,"reputation":63,"user_id":5535013,"display_name":"Jacek"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1574152198,"creation_date":1574152198,"answer_id":58929604,"question_id":58928987,"body_markdown":"You should use Service to handle socket connection. You won&#39;t have problems with Activity lifecycle.","title":"Why do my server and client disconnect on server activity start?","body":"<p>You should use Service to handle socket connection. You won't have problems with Activity lifecycle.</p>\n"}],"owner":{"account_id":13245883,"reputation":121,"user_id":9565442,"display_name":"schnondle"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":69,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"accepted_answer_id":58929604,"answer_count":1,"score":0,"last_activity_date":1637414816,"creation_date":1574149680,"question_id":58928987,"body_markdown":"The idea here is to make a ```socket``` connection over the local network, send some data, and close the connection immediately. The only thing that should remain running is the ```serversocket```. So far, everything works as expected except one thing:\r\n\r\n**When the activity that starts the ```serversocket``` gets closed with the back button, and then reopened, the data being sent from the client no longer makes it to the ```serversocket```.**\r\n\r\n**DMActivity:**\r\n~~~\r\npublic class DMActivity extends AppCompatActivity {\r\n\r\n    String ipAddress;\r\n    boolean dmListenRunning = false;\r\n    DMListen dmListen = new DMListen();\r\n    Thread dmListenThread;\r\n\r\n\r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        setContentView(R.layout.activity_dm);\r\n\r\n        if (!(dmListenRunning)) {\r\n            dmListenThread = new Thread(dmListen);\r\n            dmListenRunning = true;\r\n\r\n            dmListenThread.start();\r\n        }\r\n    }\r\n\r\n    @Override\r\n    public void onBackPressed()\r\n    {\r\n        try {\r\n            dmListen.KillThread(true);\r\n            dmListenThread.interrupt();\r\n        }\r\n\r\n        catch (Exception e)\r\n        {\r\n            Log.i(&quot;LOG&quot;, e.toString());\r\n        }\r\n\r\n        finish();\r\n    }\r\n}\r\n~~~\r\n\r\n**DMListen:**\r\n~~~\r\npublic class DMListen implements Runnable {\r\n\r\n    ServerSocket serverSocket;\r\n    boolean started = false;\r\n    boolean closeSockets = false;\r\n    boolean killed = false;\r\n\r\n    public void run() {\r\n        ReceivePlayerData();\r\n    }\r\n\r\n    public void ReceivePlayerData() {\r\n        try {\r\n            while (!(Thread.interrupted())) {\r\n                if (!(started)) {\r\n                    int port = 8080;\r\n                    serverSocket = new ServerSocket(port);\r\n                    started = true;\r\n                }\r\n\r\n                Socket clientSocket = serverSocket.accept();\r\n                DataInputStream dataIn = new DataInputStream(clientSocket.getInputStream());\r\n                String name;\r\n                int init;\r\n\r\n                name = dataIn.readUTF();\r\n                init = dataIn.readInt();\r\n                dataIn.close();\r\n                clientSocket.close();\r\n            }\r\n        }\r\n\r\ncatch (Exception e) {\r\n              Log.i(&quot;LOG&quot;, e.toString();\r\n        }\r\n\r\n        if(killed)\r\n        {\r\n            try {\r\n                serverSocket.close();\r\n\r\n                if (Thread.currentThread().isInterrupted())\r\n                {\r\n                    try {\r\n                        Thread.currentThread().join();\r\n                    }\r\n\r\n                    catch (Exception e)\r\n                    {\r\n                        Log.i(&quot;LOG&quot;, e.toString());\r\n                    }\r\n                }\r\n            }\r\n\r\n            catch(IOException e)\r\n            {\r\n                Log.i(&quot;LOG&quot;, e.toString());\r\n            }\r\n        }\r\n    }\r\n\r\n    public void KillThread(boolean k)\r\n    {\r\n        boolean killed = k;\r\n    }\r\n}\r\n~~~\r\n\r\n**PlayerActivity:**\r\n~~~\r\npublic class PlayerActivity extends AppCompatActivity {\r\n\r\n    EditText hostIPBox;\r\n    Button submit;\r\n    String hostIPString;\r\n    InetAddress hostIP;\r\n    boolean denied = false;\r\n    boolean started = false;\r\n    PlayerConnect playerConnect;\r\n\r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        setContentView(R.layout.activity_player);\r\n\r\n        hostIPBox = (EditText) findViewById(R.id.ipaddress);\r\n        hostIPBox.setRawInputType(Configuration.KEYBOARD_12KEY);\r\n        hostIPBox.setSingleLine();\r\n        submit = (Button) findViewById(R.id.submit);\r\n\r\n        submit.setOnClickListener(new View.OnClickListener() {\r\n            public void onClick(View v) {\r\n                hostIPString = hostIPBox.getText().toString();\r\n\r\n                try {\r\n                        if (!(hostIPString.equals(&quot;&quot;))) {\r\n                            hostIP = InetAddress.getByName(hostIPString);\r\n                            if(!(started)) {\r\n                                playerConnect = new PlayerConnect();\r\n                                playerConnect.SetHostIP(hostIP);\r\n                                denied = playerConnect.GetDenied();\r\n                                started = true;\r\n                            }\r\n\r\n                            else {\r\n                                playerConnect.SetHostIP(hostIP);\r\n                                denied = playerConnect.GetDenied();\r\n                            }\r\n\r\n\r\n                            if (denied)\r\n                            {\r\n                                started = false;\r\n                            }\r\n\r\n                            else\r\n                            {\r\n                                new Thread(playerConnect).start();\r\n                            }\r\n                        }\r\n                    }\r\n\r\n                    catch (Exception e) {\r\n                        Log.e(&quot;LOG&quot;, e.toString());\r\n                    }\r\n                }\r\n        });\r\n    }\r\n}\r\n~~~\r\n\r\n**PlayerConnect:**\r\n~~~\r\npublic class PlayerConnect implements Runnable {\r\n\r\n    InetAddress hostIP;\r\n    boolean closeSockets = false;\r\n    boolean denied = false;\r\n\r\n    public void run() {\r\n            SendPlayerData(hostIP, playerName, playerInitiative);\r\n    }\r\n\r\n    private void SendPlayerData(InetAddress IP, String name, int init) {\r\n        try {\r\n            int port = 8080;\r\n            Socket socket = new Socket();\r\n            socket.connect(new InetSocketAddress(IP, port), 3000);\r\n            DataOutputStream output = new DataOutputStream(socket.getOutputStream());\r\n\r\n            if (socket.isConnected())\r\n            {\r\n                output.writeUTF(name);\r\n                output.writeInt(init);\r\n                output.close();\r\n                socket.close();\r\n            }\r\n\r\n            if (closeSockets) {\r\n                output.close();\r\n                socket.close();\r\n                closeSockets = false;\r\n            }\r\n        }\r\n\r\n        catch (Exception e) {\r\n            denied = true;\r\n    Log.i(&quot;LOG&quot;, e.printStackTrace());\r\n        }\r\n    }\r\n\r\n    public void SetHostIP(InetAddress host)\r\n    {\r\n        hostIP = host;\r\n    }\r\n\r\n    public boolean GetDenied()\r\n    {\r\n        return denied;\r\n    }\r\n}\r\n~~~","title":"Why do my server and client disconnect on server activity start?","body":"<p>The idea here is to make a <code>socket</code> connection over the local network, send some data, and close the connection immediately. The only thing that should remain running is the <code>serversocket</code>. So far, everything works as expected except one thing:</p>\n<p><strong>When the activity that starts the <code>serversocket</code> gets closed with the back button, and then reopened, the data being sent from the client no longer makes it to the <code>serversocket</code>.</strong></p>\n<p><strong>DMActivity:</strong></p>\n<pre><code>public class DMActivity extends AppCompatActivity {\n\n    String ipAddress;\n    boolean dmListenRunning = false;\n    DMListen dmListen = new DMListen();\n    Thread dmListenThread;\n\n\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.activity_dm);\n\n        if (!(dmListenRunning)) {\n            dmListenThread = new Thread(dmListen);\n            dmListenRunning = true;\n\n            dmListenThread.start();\n        }\n    }\n\n    @Override\n    public void onBackPressed()\n    {\n        try {\n            dmListen.KillThread(true);\n            dmListenThread.interrupt();\n        }\n\n        catch (Exception e)\n        {\n            Log.i(&quot;LOG&quot;, e.toString());\n        }\n\n        finish();\n    }\n}\n</code></pre>\n<p><strong>DMListen:</strong></p>\n<pre><code>public class DMListen implements Runnable {\n\n    ServerSocket serverSocket;\n    boolean started = false;\n    boolean closeSockets = false;\n    boolean killed = false;\n\n    public void run() {\n        ReceivePlayerData();\n    }\n\n    public void ReceivePlayerData() {\n        try {\n            while (!(Thread.interrupted())) {\n                if (!(started)) {\n                    int port = 8080;\n                    serverSocket = new ServerSocket(port);\n                    started = true;\n                }\n\n                Socket clientSocket = serverSocket.accept();\n                DataInputStream dataIn = new DataInputStream(clientSocket.getInputStream());\n                String name;\n                int init;\n\n                name = dataIn.readUTF();\n                init = dataIn.readInt();\n                dataIn.close();\n                clientSocket.close();\n            }\n        }\n\ncatch (Exception e) {\n              Log.i(&quot;LOG&quot;, e.toString();\n        }\n\n        if(killed)\n        {\n            try {\n                serverSocket.close();\n\n                if (Thread.currentThread().isInterrupted())\n                {\n                    try {\n                        Thread.currentThread().join();\n                    }\n\n                    catch (Exception e)\n                    {\n                        Log.i(&quot;LOG&quot;, e.toString());\n                    }\n                }\n            }\n\n            catch(IOException e)\n            {\n                Log.i(&quot;LOG&quot;, e.toString());\n            }\n        }\n    }\n\n    public void KillThread(boolean k)\n    {\n        boolean killed = k;\n    }\n}\n</code></pre>\n<p><strong>PlayerActivity:</strong></p>\n<pre><code>public class PlayerActivity extends AppCompatActivity {\n\n    EditText hostIPBox;\n    Button submit;\n    String hostIPString;\n    InetAddress hostIP;\n    boolean denied = false;\n    boolean started = false;\n    PlayerConnect playerConnect;\n\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.activity_player);\n\n        hostIPBox = (EditText) findViewById(R.id.ipaddress);\n        hostIPBox.setRawInputType(Configuration.KEYBOARD_12KEY);\n        hostIPBox.setSingleLine();\n        submit = (Button) findViewById(R.id.submit);\n\n        submit.setOnClickListener(new View.OnClickListener() {\n            public void onClick(View v) {\n                hostIPString = hostIPBox.getText().toString();\n\n                try {\n                        if (!(hostIPString.equals(&quot;&quot;))) {\n                            hostIP = InetAddress.getByName(hostIPString);\n                            if(!(started)) {\n                                playerConnect = new PlayerConnect();\n                                playerConnect.SetHostIP(hostIP);\n                                denied = playerConnect.GetDenied();\n                                started = true;\n                            }\n\n                            else {\n                                playerConnect.SetHostIP(hostIP);\n                                denied = playerConnect.GetDenied();\n                            }\n\n\n                            if (denied)\n                            {\n                                started = false;\n                            }\n\n                            else\n                            {\n                                new Thread(playerConnect).start();\n                            }\n                        }\n                    }\n\n                    catch (Exception e) {\n                        Log.e(&quot;LOG&quot;, e.toString());\n                    }\n                }\n        });\n    }\n}\n</code></pre>\n<p><strong>PlayerConnect:</strong></p>\n<pre><code>public class PlayerConnect implements Runnable {\n\n    InetAddress hostIP;\n    boolean closeSockets = false;\n    boolean denied = false;\n\n    public void run() {\n            SendPlayerData(hostIP, playerName, playerInitiative);\n    }\n\n    private void SendPlayerData(InetAddress IP, String name, int init) {\n        try {\n            int port = 8080;\n            Socket socket = new Socket();\n            socket.connect(new InetSocketAddress(IP, port), 3000);\n            DataOutputStream output = new DataOutputStream(socket.getOutputStream());\n\n            if (socket.isConnected())\n            {\n                output.writeUTF(name);\n                output.writeInt(init);\n                output.close();\n                socket.close();\n            }\n\n            if (closeSockets) {\n                output.close();\n                socket.close();\n                closeSockets = false;\n            }\n        }\n\n        catch (Exception e) {\n            denied = true;\n    Log.i(&quot;LOG&quot;, e.printStackTrace());\n        }\n    }\n\n    public void SetHostIP(InetAddress host)\n    {\n        hostIP = host;\n    }\n\n    public boolean GetDenied()\n    {\n        return denied;\n    }\n}\n</code></pre>\n"},{"tags":["java","android","android-studio"],"answers":[{"tags":[],"owner":{"account_id":7366438,"reputation":379,"user_id":5608052,"display_name":"Mohamad Seyedi"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1556458365,"creation_date":1556458365,"answer_id":55890762,"question_id":55889508,"body_markdown":"this form of problem is about duplicated classes in dependencies and to solve it, just put this piece of code in build.gradle:\r\n\r\n```\r\nconfigurations {\r\n    all*.exclude group: &#39;javaee&#39;, module: &#39;javaee-api&#39;\r\n}\r\n```\r\n","title":"Error:com.android.builder.dexing.DexArchiveBuilderException: Failed to process ...\\.gradle\\caches\\modules-2\\files-2.1\\javaee\\javaee-api\\5\\","body":"<p>this form of problem is about duplicated classes in dependencies and to solve it, just put this piece of code in build.gradle:</p>\n\n<pre><code>configurations {\n    all*.exclude group: 'javaee', module: 'javaee-api'\n}\n</code></pre>\n"}],"owner":{"account_id":7366438,"reputation":379,"user_id":5608052,"display_name":"Mohamad Seyedi"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1266,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":55890762,"answer_count":1,"score":0,"last_activity_date":1637413708,"creation_date":1556448640,"question_id":55889508,"body_markdown":"when I updated my dependencies in Android Studio 3.3.1, I receive this error:\r\nAndroid Studio Version: 3.3.1\r\nGradle Version: 5.4\r\n\r\n\r\n```\r\nCaused by: com.android.builder.dexing.DexArchiveBuilderException: Failed to process C:\\Users\\Mohamad\\.gradle\\caches\\modules-2\\files-2.1\\javaee\\javaee-api\\5\\e3cc17b10ab552219edbe33915e62937e387d0ef\\javaee-api-5.jar\r\n```\r\n\r\nthis is my build.gradle file:\r\n\r\n```\r\napply plugin: &#39;com.android.application&#39;\r\napply plugin: &#39;kotlin-android&#39;\r\napply plugin: &#39;com.google.gms.google-services&#39;\r\n\r\n\r\nconfigurations {\r\n    implementation.exclude group: &quot;org.apache.httpcomponents&quot;, module: &quot;httpclient&quot;\r\n}\r\n\r\nandroid {\r\n    compileSdkVersion 28\r\n    buildToolsVersion &quot;29.0.0-rc2&quot;\r\n\r\n    defaultConfig {\r\n        applicationId &quot;xxx.xxx.xxx&quot;\r\n        minSdkVersion 17\r\n        targetSdkVersion 28\r\n        versionCode 10\r\n        versionName &quot;3.1.1&quot;\r\n        multiDexEnabled true\r\n\r\n    }\r\n\r\n    buildTypes {\r\n        release {\r\n            minifyEnabled false\r\n            proguardFiles getDefaultProguardFile(&#39;proguard-android.txt&#39;), &#39;proguard-rules.pro&#39;\r\n        }\r\n    }\r\n\r\n    defaultConfig {\r\n        resConfigs &quot;en&quot;\r\n    }\r\n\r\n    packagingOptions {\r\n        exclude &#39;META-INF/LICENSE&#39;\r\n    }\r\n\r\n    dexOptions {\r\n        jumboMode = true\r\n        javaMaxHeapSize &quot;4g&quot;\r\n    }\r\n\r\n    compileOptions {\r\n        sourceCompatibility JavaVersion.VERSION_1_8\r\n        targetCompatibility JavaVersion.VERSION_1_8\r\n    }\r\n}\r\n\r\ndependencies {\r\n    implementation fileTree(include: [&#39;*.jar&#39;], dir: &#39;libs&#39;)\r\n    implementation &quot;androidx.appcompat:appcompat:1.0.2&quot;\r\n    implementation &quot;com.google.android.material:material:1.1.0-alpha05&quot;\r\n    implementation &quot;androidx.percentlayout:percentlayout:1.0.0&quot;\r\n    implementation &quot;androidx.cardview:cardview:1.0.0&quot;\r\n    implementation &#39;androidx.multidex:multidex:2.0.1&#39;\r\n    implementation &quot;androidx.recyclerview:recyclerview:1.1.0-alpha05&quot;\r\n    implementation &#39;androidx.constraintlayout:constraintlayout:1.1.3&#39;\r\n    implementation &#39;com.squareup.retrofit2:retrofit:2.5.0&#39;\r\n    implementation &#39;com.squareup.retrofit2:converter-gson:2.5.0&#39;\r\n    implementation &#39;com.squareup.picasso:picasso:2.71828&#39;\r\n    implementation &#39;com.squareup.okhttp3:okhttp:3.14.1&#39;\r\n    implementation &#39;jp.wasabeef:picasso-transformations:2.2.1&#39;\r\n    implementation &#39;com.google.code.gson:gson:2.8.5&#39;\r\n    implementation &#39;com.google.http-client:google-http-client-android:1.20.0&#39;\r\n    implementation &#39;com.google.api-client:google-api-client-android:1.20.0&#39;\r\n    implementation &#39;com.google.api-client:google-api-client-gson:1.20.0&#39;\r\n    implementation &#39;com.google.android.gms:play-services-analytics:16.0.8&#39;\r\n    implementation &#39;com.r0adkll:slidableactivity:2.0.5&#39;\r\n    implementation &#39;com.mikepenz:fontawesome-typeface:5.3.1.1&#39;\r\n    implementation &#39;com.mikepenz:material-design-iconic-typeface:2.2.0.4&#39;\r\n    implementation &#39;com.mikepenz:google-material-typeface:3.0.1.2.original&#39;\r\n    implementation &#39;com.mikepenz:actionitembadge:3.3.2@aar&#39;\r\n    implementation &#39;com.mikepenz:iconics-core:3.2.5@aar&#39;\r\n    implementation &#39;com.mikepenz:iconics-views:3.2.5@aar&#39;\r\n    implementation &#39;com.snappydb:snappydb-lib:0.5.2&#39;\r\n    implementation &#39;com.esotericsoftware.kryo:kryo:2.24.0&#39;\r\n    implementation &#39;io.jsonwebtoken:jjwt:0.7.0&#39;\r\n    implementation &#39;za.co.riggaroo:materialhelptutorial:1.2.0&#39;\r\n    implementation &#39;net.hockeyapp.android:HockeySDK:5.1.1&#39;\r\n    implementation &#39;com.ibm.icu:icu4j:64.2&#39;\r\n    implementation &#39;org.piwik.sdk:piwik-sdk:3.0.2&#39;\r\n    implementation &#39;org.piwik.java.tracking:piwik-java-tracker:1.2&#39;\r\n    implementation project(&#39;:persianmaterialdatetimepicker&#39;)\r\n    implementation project(&#39;:fullscreendialog&#39;)\r\n    implementation &quot;org.jetbrains.kotlin:kotlin-stdlib-jdk7:$kotlin_version&quot;\r\n}\r\n\r\n```\r\n\r\nI clean, rebuild, invalidate cache and restart, but doesn&#39;t help...\r\n\r\nI saw the questions like this, but those didn&#39;t help me.\r\nwhat can I do? anyone help????","title":"Error:com.android.builder.dexing.DexArchiveBuilderException: Failed to process ...\\.gradle\\caches\\modules-2\\files-2.1\\javaee\\javaee-api\\5\\","body":"<p>when I updated my dependencies in Android Studio 3.3.1, I receive this error:\nAndroid Studio Version: 3.3.1\nGradle Version: 5.4</p>\n\n<pre><code>Caused by: com.android.builder.dexing.DexArchiveBuilderException: Failed to process C:\\Users\\Mohamad\\.gradle\\caches\\modules-2\\files-2.1\\javaee\\javaee-api\\5\\e3cc17b10ab552219edbe33915e62937e387d0ef\\javaee-api-5.jar\n</code></pre>\n\n<p>this is my build.gradle file:</p>\n\n<pre><code>apply plugin: 'com.android.application'\napply plugin: 'kotlin-android'\napply plugin: 'com.google.gms.google-services'\n\n\nconfigurations {\n    implementation.exclude group: \"org.apache.httpcomponents\", module: \"httpclient\"\n}\n\nandroid {\n    compileSdkVersion 28\n    buildToolsVersion \"29.0.0-rc2\"\n\n    defaultConfig {\n        applicationId \"xxx.xxx.xxx\"\n        minSdkVersion 17\n        targetSdkVersion 28\n        versionCode 10\n        versionName \"3.1.1\"\n        multiDexEnabled true\n\n    }\n\n    buildTypes {\n        release {\n            minifyEnabled false\n            proguardFiles getDefaultProguardFile('proguard-android.txt'), 'proguard-rules.pro'\n        }\n    }\n\n    defaultConfig {\n        resConfigs \"en\"\n    }\n\n    packagingOptions {\n        exclude 'META-INF/LICENSE'\n    }\n\n    dexOptions {\n        jumboMode = true\n        javaMaxHeapSize \"4g\"\n    }\n\n    compileOptions {\n        sourceCompatibility JavaVersion.VERSION_1_8\n        targetCompatibility JavaVersion.VERSION_1_8\n    }\n}\n\ndependencies {\n    implementation fileTree(include: ['*.jar'], dir: 'libs')\n    implementation \"androidx.appcompat:appcompat:1.0.2\"\n    implementation \"com.google.android.material:material:1.1.0-alpha05\"\n    implementation \"androidx.percentlayout:percentlayout:1.0.0\"\n    implementation \"androidx.cardview:cardview:1.0.0\"\n    implementation 'androidx.multidex:multidex:2.0.1'\n    implementation \"androidx.recyclerview:recyclerview:1.1.0-alpha05\"\n    implementation 'androidx.constraintlayout:constraintlayout:1.1.3'\n    implementation 'com.squareup.retrofit2:retrofit:2.5.0'\n    implementation 'com.squareup.retrofit2:converter-gson:2.5.0'\n    implementation 'com.squareup.picasso:picasso:2.71828'\n    implementation 'com.squareup.okhttp3:okhttp:3.14.1'\n    implementation 'jp.wasabeef:picasso-transformations:2.2.1'\n    implementation 'com.google.code.gson:gson:2.8.5'\n    implementation 'com.google.http-client:google-http-client-android:1.20.0'\n    implementation 'com.google.api-client:google-api-client-android:1.20.0'\n    implementation 'com.google.api-client:google-api-client-gson:1.20.0'\n    implementation 'com.google.android.gms:play-services-analytics:16.0.8'\n    implementation 'com.r0adkll:slidableactivity:2.0.5'\n    implementation 'com.mikepenz:fontawesome-typeface:5.3.1.1'\n    implementation 'com.mikepenz:material-design-iconic-typeface:2.2.0.4'\n    implementation 'com.mikepenz:google-material-typeface:3.0.1.2.original'\n    implementation 'com.mikepenz:actionitembadge:3.3.2@aar'\n    implementation 'com.mikepenz:iconics-core:3.2.5@aar'\n    implementation 'com.mikepenz:iconics-views:3.2.5@aar'\n    implementation 'com.snappydb:snappydb-lib:0.5.2'\n    implementation 'com.esotericsoftware.kryo:kryo:2.24.0'\n    implementation 'io.jsonwebtoken:jjwt:0.7.0'\n    implementation 'za.co.riggaroo:materialhelptutorial:1.2.0'\n    implementation 'net.hockeyapp.android:HockeySDK:5.1.1'\n    implementation 'com.ibm.icu:icu4j:64.2'\n    implementation 'org.piwik.sdk:piwik-sdk:3.0.2'\n    implementation 'org.piwik.java.tracking:piwik-java-tracker:1.2'\n    implementation project(':persianmaterialdatetimepicker')\n    implementation project(':fullscreendialog')\n    implementation \"org.jetbrains.kotlin:kotlin-stdlib-jdk7:$kotlin_version\"\n}\n\n</code></pre>\n\n<p>I clean, rebuild, invalidate cache and restart, but doesn't help...</p>\n\n<p>I saw the questions like this, but those didn't help me.\nwhat can I do? anyone help????</p>\n"},{"tags":["java","spring","bean-validation","java-platform-module-system"],"owner":{"account_id":6615438,"reputation":1121,"user_id":5108875,"display_name":"vab2048"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":141,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":0,"score":2,"last_activity_date":1637413701,"creation_date":1637413701,"question_id":70046203,"body_markdown":"When using `@Validated` with Java&#39;s modules I get an InaccessibleObjectException:\r\n\r\n```\r\n***************************\r\nAPPLICATION FAILED TO START\r\n***************************\r\n\r\nDescription:\r\n\r\nFailed to bind properties under &#39;abc&#39; to com.example.demo.ConfigProperties$$EnhancerBySpringCGLIB$$4dbae57f:\r\n\r\n    Reason: java.lang.reflect.InaccessibleObjectException: Unable to make field java.lang.String com.example.demo.ConfigProperties.hello accessible: module com.example.demo does not &quot;opens com.example.demo&quot; to unnamed module @163370c2\r\n\r\nAction:\r\n\r\nUpdate your application&#39;s configuration\r\n```\r\n\r\n**How can I debug this to find out the library which is causing this in the unnamed module?**\r\n \r\n**How can I get this to work (without resorting to opening the entire module)?**\r\n\r\n\r\nFull code:\r\n\r\n```java\r\npackage com.example.demo;\r\n\r\nimport org.springframework.boot.context.properties.ConfigurationProperties;\r\nimport org.springframework.context.annotation.Configuration;\r\nimport org.springframework.validation.annotation.Validated;\r\n\r\nimport javax.validation.constraints.NotNull;\r\n\r\n@Configuration\r\n@ConfigurationProperties(&quot;abc&quot;)\r\n@Validated\r\npublic class ConfigProperties {\r\n    @NotNull String hello;\r\n    @NotNull String byeBye;\r\n\r\n    @Override\r\n    public String toString() {\r\n        return &quot;ConfigProperties{hello=&#39;&quot; + hello + &#39;\\&#39;&#39; +&quot;, byeBye=&#39;&quot; + byeBye + &#39;\\&#39;&#39; + &#39;}&#39;;\r\n    }\r\n}\r\n\r\n```\r\n\r\nmodule-info.java:\r\n```java\r\nmodule com.example.demo {\r\n    opens com.example.demo to spring.beans, spring.boot, spring.core;\r\n    exports com.example.demo;\r\n\r\n    requires java.validation;\r\n    requires org.slf4j;\r\n    requires spring.beans;\r\n    requires spring.boot;\r\n    requires spring.boot.autoconfigure;\r\n    requires spring.core;\r\n    requires spring.context;\r\n}\r\n```\r\n\r\n\r\n","title":"How can you use Spring&#39;s @Validated with Java modules without getting InaccessibleObjectException?","body":"<p>When using <code>@Validated</code> with Java's modules I get an InaccessibleObjectException:</p>\n<pre><code>***************************\nAPPLICATION FAILED TO START\n***************************\n\nDescription:\n\nFailed to bind properties under 'abc' to com.example.demo.ConfigProperties$$EnhancerBySpringCGLIB$$4dbae57f:\n\n    Reason: java.lang.reflect.InaccessibleObjectException: Unable to make field java.lang.String com.example.demo.ConfigProperties.hello accessible: module com.example.demo does not &quot;opens com.example.demo&quot; to unnamed module @163370c2\n\nAction:\n\nUpdate your application's configuration\n</code></pre>\n<p><strong>How can I debug this to find out the library which is causing this in the unnamed module?</strong></p>\n<p><strong>How can I get this to work (without resorting to opening the entire module)?</strong></p>\n<p>Full code:</p>\n<pre class=\"lang-java prettyprint-override\"><code>package com.example.demo;\n\nimport org.springframework.boot.context.properties.ConfigurationProperties;\nimport org.springframework.context.annotation.Configuration;\nimport org.springframework.validation.annotation.Validated;\n\nimport javax.validation.constraints.NotNull;\n\n@Configuration\n@ConfigurationProperties(&quot;abc&quot;)\n@Validated\npublic class ConfigProperties {\n    @NotNull String hello;\n    @NotNull String byeBye;\n\n    @Override\n    public String toString() {\n        return &quot;ConfigProperties{hello='&quot; + hello + '\\'' +&quot;, byeBye='&quot; + byeBye + '\\'' + '}';\n    }\n}\n\n</code></pre>\n<p>module-info.java:</p>\n<pre class=\"lang-java prettyprint-override\"><code>module com.example.demo {\n    opens com.example.demo to spring.beans, spring.boot, spring.core;\n    exports com.example.demo;\n\n    requires java.validation;\n    requires org.slf4j;\n    requires spring.beans;\n    requires spring.boot;\n    requires spring.boot.autoconfigure;\n    requires spring.core;\n    requires spring.context;\n}\n</code></pre>\n"},{"tags":["java","yaml","minecraft","bukkit"],"comments":[{"owner":{"account_id":15178500,"reputation":4190,"user_id":10952503,"display_name":"Elikill58"},"score":0,"creation_date":1637012007,"post_id":69971357,"comment_id":123706666,"body_markdown":"I suggest you to use `mobs.getString()` instead of `mobs.get`","body":"I suggest you to use <code>mobs.getString()</code> instead of <code>mobs.get</code>"}],"answers":[{"tags":[],"owner":{"account_id":22012035,"reputation":169,"user_id":16282159,"display_name":"Jithin"},"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1636965248,"creation_date":1636965248,"answer_id":69971427,"question_id":69971357,"body_markdown":"Please make the rabbit in line 7 a string. Add quotation marks. \r\n```\r\nreload:\r\n   message:\r\n      - &quot;&amp;f[&amp;bmk7 Mob Effects&amp;f] &amp;a&amp;lReloaded config!&quot;\r\n      \r\nmobs:\r\n  rabbit:\r\n    name: &quot;rabbit&quot;\r\n    message: &quot;&amp;f[&amp;bmk7 Mob Effects&amp;f] &amp;aYou&#39;ve been given &amp;c&amp;lLeaping: 15s &amp;afor killing a &amp;crabbit&amp;a!&quot;\r\n    effects: \r\n      - JUMP,15,2\r\n```","title":"Cant figure out how to properly pull keys from config","body":"<p>Please make the rabbit in line 7 a string. Add quotation marks.</p>\n<pre><code>reload:\n   message:\n      - &quot;&amp;f[&amp;bmk7 Mob Effects&amp;f] &amp;a&amp;lReloaded config!&quot;\n      \nmobs:\n  rabbit:\n    name: &quot;rabbit&quot;\n    message: &quot;&amp;f[&amp;bmk7 Mob Effects&amp;f] &amp;aYou've been given &amp;c&amp;lLeaping: 15s &amp;afor killing a &amp;crabbit&amp;a!&quot;\n    effects: \n      - JUMP,15,2\n</code></pre>\n"},{"tags":[],"owner":{"account_id":13383654,"reputation":77,"user_id":15633587,"display_name":"UberSuperBoss"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1637412647,"creation_date":1637412093,"answer_id":70046014,"question_id":69971357,"body_markdown":"Make sure you have deleted the old config file.","title":"Cant figure out how to properly pull keys from config","body":"<p>Make sure you have deleted the old config file.</p>\n"}],"owner":{"account_id":23341306,"reputation":1,"user_id":17416166,"display_name":"pssluke"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":74,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1637412647,"creation_date":1636964849,"question_id":69971357,"body_markdown":"I&#39;ve been trying to implement a config file for a very basic EntityDeathEvent script in order to allow for a reload command to be implemented to be able to add to my config and reload the file rather than restarting the server. The current code I&#39;m using returns zero errors so I&#39;m quite lost at this point. I&#39;m 5 days into tinkering with Java so there are probably a bajillion things missing from my code but this is what i have so far.\r\n\r\nmain.java:\r\n\r\n```java\r\npackage com.mk7smp.LukesMobEffects;\r\n\r\nimport org.bukkit.ChatColor;\r\nimport org.bukkit.command.Command;\r\nimport org.bukkit.command.CommandSender;\r\nimport org.bukkit.configuration.ConfigurationSection;\r\nimport org.bukkit.entity.Entity;\r\nimport org.bukkit.entity.Player;\r\nimport org.bukkit.event.EventHandler;\r\nimport org.bukkit.event.Listener;\r\nimport org.bukkit.event.entity.EntityDeathEvent;\r\nimport org.bukkit.plugin.java.JavaPlugin;\r\nimport org.bukkit.potion.PotionEffect;\r\nimport org.bukkit.potion.PotionEffectType;\r\n\r\n\r\n\r\npublic class Main extends JavaPlugin implements Listener {\r\n\r\n  @Override\r\n  public void onEnable() {\r\n    this.saveDefaultConfig();\r\n    this.getServer().getPluginManager().registerEvents(this, this);\r\n  }\r\n\r\n  @Override\r\n  public void onDisable() {\r\n\r\n  }\r\n\r\n  public boolean onCommand(CommandSender sender, Command cmd, String label, String[] args) {\r\n    if (label.equalsIgnoreCase(&quot;mobeffects&quot;)) {\r\n      if (!sender.hasPermission(&quot;mobeffects.reload&quot;)) {\r\n        sender.sendMessage(ChatColor.RED + &quot;Nope, big admin guys only.&quot;);\r\n        return true;\r\n      }\r\n      if (args.length == 0) {\r\n        // /mobeffects\r\n        sender.sendMessage(ChatColor.translateAlternateColorCodes(&#39;&amp;&#39;, &quot;&amp;f[&amp;bmk7 Mob Effects&amp;f] &amp;aUsage: /mobeffects reload&quot;));\r\n        return true;\r\n      }\r\n      if (args.length &gt; 0) {\r\n        // /mobeffects reload\r\n        if (args[0].equalsIgnoreCase(&quot;reload&quot;)) {\r\n          for (String msg: this.getConfig().getStringList(&quot;reload.message&quot;)) {\r\n            sender.sendMessage(ChatColor.translateAlternateColorCodes(&#39;&amp;&#39;,\r\n              msg));\r\n          }\r\n          this.reloadConfig();\r\n        }\r\n      }\r\n    }\r\n    return false;\r\n  }\r\n\r\n  @EventHandler\r\n  public void mobDeath(EntityDeathEvent event) {\r\n\r\n    Entity entity = event.getEntity();\r\n    Player player = event.getEntity().getKiller();\r\n\r\n    if (player == null) {\r\n      return;\r\n    }\r\n\r\n    ConfigurationSection mobs = this.getConfig().getConfigurationSection(&quot;mobs&quot;); // The &quot;mobs&quot; section of the config file\r\n\r\n    for (String mobKey: mobs.getKeys(false)) { // For ONE(one bc getKeys is set to true) mob key in the set\r\n      String mobname = (String) mobs.get(mobKey + &quot;.name&quot;); // use specified path to retrieve name value\r\n      String message = (String) mobs.get(mobKey + &quot;.message&quot;);\r\n      if (entity.getType().toString() == mobname) {\r\n        for (String effectString: mobs.getStringList(mobKey + &quot;.effects&quot;)) {\r\n\r\n\r\n          //make sure there are no whitespaces in the &quot;effectString&quot;\r\n          String[] values = effectString.split(&quot;,&quot;);\r\n\r\n          //create PotionEffectType\r\n          PotionEffectType type;\r\n          //set default duration to 30 seconds\r\n          int duration = 30;\r\n          //set default strength to 1\r\n          int strength = 1;\r\n\r\n          //get type\r\n          type = PotionEffectType.getByName(values[0].toUpperCase());\r\n\r\n          //check, if type is null\r\n          if (type == null) {\r\n            System.err.println(effectString + &quot; could not be interpreted into a correct PotionEffectType.&quot;);\r\n            continue;\r\n          }\r\n\r\n          //set duration\r\n          if (values.length &gt; 1)\r\n            duration = Integer.parseInt(values[1]);\r\n\r\n          //set strength\r\n          if (values.length &gt; 2)\r\n            strength = Integer.parseInt(values[2]);\r\n\r\n          //check, if player already has potiontype\r\n          if (player.hasPotionEffect(type))\r\n            player.removePotionEffect(type);\r\n\r\n          //create the effect\r\n          PotionEffect effect = type.createEffect(duration * 20, strength);\r\n          player.addPotionEffect(effect);\r\n          player.sendMessage(ChatColor.translateAlternateColorCodes(&#39;&amp;&#39;, message));\r\n        }\r\n      }\r\n    }\r\n  }\r\n  // THESE ARE THE FUNCTIONS THAT I WANT TO USE WITH DATA FROM CONFIG\r\n  //if (entity.getType().toString() == &quot;RABBIT&quot;) {\r\n  //\tplayer.sendMessage(ChatColor.translateAlternateColorCodes(&#39;&amp;&#39;, &quot;&amp;f[&amp;bmk7 Mob Effects&amp;f] &amp;aYou&#39;ve been given &amp;c&amp;lLeaping: 15s &amp;afor killing a &amp;crabbit&amp;a!&quot;));\r\n  //\tplayer.addPotionEffect(new PotionEffect(PotionEffectType.JUMP, 300, 2));\r\n  //\t}\r\n  //if (entity.getType().toString() == &quot;ENDERMAN&quot;) {\r\n  //\tplayer.sendMessage(ChatColor.translateAlternateColorCodes(&#39;&amp;&#39;, &quot;&amp;f[&amp;bmk7 Mob Effects&amp;f] &amp;aYou&#39;ve been given &amp;c&amp;lRegeneration: 10s &amp;afor killing a &amp;cenderman&amp;a!&quot;));\r\n  //\tplayer.addPotionEffect(new PotionEffect(PotionEffectType.REGENERATION, 200, 2));\r\n  //}\r\n  //if (entity.getType().toString() == &quot;CHICKEN&quot;) {\r\n  //\tplayer.sendMessage(ChatColor.translateAlternateColorCodes(&#39;&amp;&#39;, &quot;&amp;f[&amp;bmk7 Mob Effects&amp;f] &amp;aYou&#39;ve been given &amp;c&amp;lFeather Falling: 10s &amp;afor killing a &amp;c&amp;lchicken&amp;a!&quot;));\r\n  //\tplayer.addPotionEffect(new PotionEffect(PotionEffectType.SLOW_FALLING, 200, 1));\r\n  //}\r\n};\r\n```\r\nconfig.yml\r\n\r\n```yaml\r\nreload:\r\n   message:\r\n      - &quot;&amp;f[&amp;bmk7 Mob Effects&amp;f] &amp;a&amp;lReloaded config!&quot;\r\n      \r\nmobs:\r\n  rabbit:\r\n    name: rabbit\r\n    message: &quot;&amp;f[&amp;bmk7 Mob Effects&amp;f] &amp;aYou&#39;ve been given &amp;c&amp;lLeaping: 15s &amp;afor killing a &amp;crabbit&amp;a!&quot;\r\n    effects: \r\n      - JUMP,15,2\r\n```\r\n\r\nplease could I just have a hand in the right direction\r\n","title":"Cant figure out how to properly pull keys from config","body":"<p>I've been trying to implement a config file for a very basic EntityDeathEvent script in order to allow for a reload command to be implemented to be able to add to my config and reload the file rather than restarting the server. The current code I'm using returns zero errors so I'm quite lost at this point. I'm 5 days into tinkering with Java so there are probably a bajillion things missing from my code but this is what i have so far.</p>\n<p>main.java:</p>\n<pre class=\"lang-java prettyprint-override\"><code>package com.mk7smp.LukesMobEffects;\n\nimport org.bukkit.ChatColor;\nimport org.bukkit.command.Command;\nimport org.bukkit.command.CommandSender;\nimport org.bukkit.configuration.ConfigurationSection;\nimport org.bukkit.entity.Entity;\nimport org.bukkit.entity.Player;\nimport org.bukkit.event.EventHandler;\nimport org.bukkit.event.Listener;\nimport org.bukkit.event.entity.EntityDeathEvent;\nimport org.bukkit.plugin.java.JavaPlugin;\nimport org.bukkit.potion.PotionEffect;\nimport org.bukkit.potion.PotionEffectType;\n\n\n\npublic class Main extends JavaPlugin implements Listener {\n\n  @Override\n  public void onEnable() {\n    this.saveDefaultConfig();\n    this.getServer().getPluginManager().registerEvents(this, this);\n  }\n\n  @Override\n  public void onDisable() {\n\n  }\n\n  public boolean onCommand(CommandSender sender, Command cmd, String label, String[] args) {\n    if (label.equalsIgnoreCase(&quot;mobeffects&quot;)) {\n      if (!sender.hasPermission(&quot;mobeffects.reload&quot;)) {\n        sender.sendMessage(ChatColor.RED + &quot;Nope, big admin guys only.&quot;);\n        return true;\n      }\n      if (args.length == 0) {\n        // /mobeffects\n        sender.sendMessage(ChatColor.translateAlternateColorCodes('&amp;', &quot;&amp;f[&amp;bmk7 Mob Effects&amp;f] &amp;aUsage: /mobeffects reload&quot;));\n        return true;\n      }\n      if (args.length &gt; 0) {\n        // /mobeffects reload\n        if (args[0].equalsIgnoreCase(&quot;reload&quot;)) {\n          for (String msg: this.getConfig().getStringList(&quot;reload.message&quot;)) {\n            sender.sendMessage(ChatColor.translateAlternateColorCodes('&amp;',\n              msg));\n          }\n          this.reloadConfig();\n        }\n      }\n    }\n    return false;\n  }\n\n  @EventHandler\n  public void mobDeath(EntityDeathEvent event) {\n\n    Entity entity = event.getEntity();\n    Player player = event.getEntity().getKiller();\n\n    if (player == null) {\n      return;\n    }\n\n    ConfigurationSection mobs = this.getConfig().getConfigurationSection(&quot;mobs&quot;); // The &quot;mobs&quot; section of the config file\n\n    for (String mobKey: mobs.getKeys(false)) { // For ONE(one bc getKeys is set to true) mob key in the set\n      String mobname = (String) mobs.get(mobKey + &quot;.name&quot;); // use specified path to retrieve name value\n      String message = (String) mobs.get(mobKey + &quot;.message&quot;);\n      if (entity.getType().toString() == mobname) {\n        for (String effectString: mobs.getStringList(mobKey + &quot;.effects&quot;)) {\n\n\n          //make sure there are no whitespaces in the &quot;effectString&quot;\n          String[] values = effectString.split(&quot;,&quot;);\n\n          //create PotionEffectType\n          PotionEffectType type;\n          //set default duration to 30 seconds\n          int duration = 30;\n          //set default strength to 1\n          int strength = 1;\n\n          //get type\n          type = PotionEffectType.getByName(values[0].toUpperCase());\n\n          //check, if type is null\n          if (type == null) {\n            System.err.println(effectString + &quot; could not be interpreted into a correct PotionEffectType.&quot;);\n            continue;\n          }\n\n          //set duration\n          if (values.length &gt; 1)\n            duration = Integer.parseInt(values[1]);\n\n          //set strength\n          if (values.length &gt; 2)\n            strength = Integer.parseInt(values[2]);\n\n          //check, if player already has potiontype\n          if (player.hasPotionEffect(type))\n            player.removePotionEffect(type);\n\n          //create the effect\n          PotionEffect effect = type.createEffect(duration * 20, strength);\n          player.addPotionEffect(effect);\n          player.sendMessage(ChatColor.translateAlternateColorCodes('&amp;', message));\n        }\n      }\n    }\n  }\n  // THESE ARE THE FUNCTIONS THAT I WANT TO USE WITH DATA FROM CONFIG\n  //if (entity.getType().toString() == &quot;RABBIT&quot;) {\n  //    player.sendMessage(ChatColor.translateAlternateColorCodes('&amp;', &quot;&amp;f[&amp;bmk7 Mob Effects&amp;f] &amp;aYou've been given &amp;c&amp;lLeaping: 15s &amp;afor killing a &amp;crabbit&amp;a!&quot;));\n  //    player.addPotionEffect(new PotionEffect(PotionEffectType.JUMP, 300, 2));\n  //    }\n  //if (entity.getType().toString() == &quot;ENDERMAN&quot;) {\n  //    player.sendMessage(ChatColor.translateAlternateColorCodes('&amp;', &quot;&amp;f[&amp;bmk7 Mob Effects&amp;f] &amp;aYou've been given &amp;c&amp;lRegeneration: 10s &amp;afor killing a &amp;cenderman&amp;a!&quot;));\n  //    player.addPotionEffect(new PotionEffect(PotionEffectType.REGENERATION, 200, 2));\n  //}\n  //if (entity.getType().toString() == &quot;CHICKEN&quot;) {\n  //    player.sendMessage(ChatColor.translateAlternateColorCodes('&amp;', &quot;&amp;f[&amp;bmk7 Mob Effects&amp;f] &amp;aYou've been given &amp;c&amp;lFeather Falling: 10s &amp;afor killing a &amp;c&amp;lchicken&amp;a!&quot;));\n  //    player.addPotionEffect(new PotionEffect(PotionEffectType.SLOW_FALLING, 200, 1));\n  //}\n};\n</code></pre>\n<p>config.yml</p>\n<pre class=\"lang-yaml prettyprint-override\"><code>reload:\n   message:\n      - &quot;&amp;f[&amp;bmk7 Mob Effects&amp;f] &amp;a&amp;lReloaded config!&quot;\n      \nmobs:\n  rabbit:\n    name: rabbit\n    message: &quot;&amp;f[&amp;bmk7 Mob Effects&amp;f] &amp;aYou've been given &amp;c&amp;lLeaping: 15s &amp;afor killing a &amp;crabbit&amp;a!&quot;\n    effects: \n      - JUMP,15,2\n</code></pre>\n<p>please could I just have a hand in the right direction</p>\n"},{"tags":["java","database","rest"],"answers":[{"tags":[],"owner":{"account_id":2789789,"reputation":372,"user_id":2400234,"display_name":"Ventrue"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1637411326,"creation_date":1637410554,"answer_id":70045818,"question_id":70045759,"body_markdown":"Well, by default the H2 DB data is volatile, so data will be lost after the restart. What you can do is change H2 to use file-based storage. You don&#39;t need to change the controller, but in you can accomplish that in Spring Configuration file:\r\n\r\n    spring.datasource.url=jdbc:h2:file:/data/demo\r\n\r\nor (if using .yml):\r\n\r\n    spring:\r\n      datasource:\r\n        url: jdbc:h2:file:/data/demo\r\n\r\nIf that is not working, maybe your DB is being re-created after the restart. You can also add that to your application.properties:\r\n\r\n    spring.jpa.hibernate.ddl-auto=update\r\n\r\nAlso check if you have the below line in your persistence.xml:\r\n\r\n    &lt;property name=&quot;hibernate.hbm2ddl.auto&quot; value=&quot;create-drop&quot; /&gt;\r\n\r\nIf so, remove it.\r\n","title":"How to not lose data after reloading the server?","body":"<p>Well, by default the H2 DB data is volatile, so data will be lost after the restart. What you can do is change H2 to use file-based storage. You don't need to change the controller, but in you can accomplish that in Spring Configuration file:</p>\n<pre><code>spring.datasource.url=jdbc:h2:file:/data/demo\n</code></pre>\n<p>or (if using .yml):</p>\n<pre><code>spring:\n  datasource:\n    url: jdbc:h2:file:/data/demo\n</code></pre>\n<p>If that is not working, maybe your DB is being re-created after the restart. You can also add that to your application.properties:</p>\n<pre><code>spring.jpa.hibernate.ddl-auto=update\n</code></pre>\n<p>Also check if you have the below line in your persistence.xml:</p>\n<pre><code>&lt;property name=&quot;hibernate.hbm2ddl.auto&quot; value=&quot;create-drop&quot; /&gt;\n</code></pre>\n<p>If so, remove it.</p>\n"}],"owner":{"account_id":19021694,"reputation":15,"user_id":15389075,"display_name":"Staaankey"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":340,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1637411898,"creation_date":1637410031,"question_id":70045759,"body_markdown":"Devs! To pass the test I should get some snippets of code and return them by RESTful API requests. \r\nI`ve done with the first part of the test and sent all snippets of code to the H2 database. In the second part of testing my program, they are reloading server by the command this::reloadServer. How I can get my data back from the database to successfully respond to RESTful requests and pass the test?\r\n\r\nMy controller:\r\n\r\n```\r\n@Controller\r\npublic class SnippetController {\r\n\r\n    @Autowired\r\n    SnippetService snippetService;\r\n    @Autowired\r\n    Repository repository;\r\n\r\n\r\n    public SnippetController(SnippetService snippetService) {\r\n        this.snippetService = snippetService;\r\n    }\r\n\r\n    @GetMapping(value = &quot;/api/code/{id}&quot;)\r\n    @ResponseBody\r\n    public Snippet getSnippet(@PathVariable int id) {\r\n        return snippetService.getSnippet(id);\r\n    }\r\n\r\n    @GetMapping(value = &quot;/code/{id}&quot;)\r\n    public String showSnippet(@PathVariable int id, Model model) {\r\n        model.addAttribute(&quot;snippet&quot;, snippetService.getSnippet(id));\r\n        return &quot;code&quot;;\r\n    }\r\n\r\n    @GetMapping(value = &quot;/api/code/latest&quot;)\r\n    @ResponseBody\r\n    public List&lt;Snippet&gt; getLatestSnippets() {\r\n        return snippetService.getLatestSnippets();\r\n    }\r\n\r\n    @GetMapping(value = &quot;/code/latest&quot;)\r\n    public ModelAndView showLatestSnippets(Model model) {\r\n        List&lt;Snippet&gt; sortedList = getLatestSnippets();\r\n        ModelAndView mv = new ModelAndView(&quot;latest&quot;);\r\n        mv.addObject(&quot;latestSnippets&quot;, sortedList);\r\n        return mv;\r\n    }\r\n\r\n    @PostMapping(value = &quot;/api/code/new&quot;)\r\n    @ResponseBody\r\n    public Map&lt;String, String&gt; addSnippet(@RequestBody Snippet snippet) {\r\n        int id = snippetService.addSnippet(snippet);\r\n        repository.save(snippet);\r\n        return Map.of(&quot;id&quot;, String.valueOf(id));\r\n    }\r\n\r\n    @GetMapping(value = &quot;/code/new&quot;)\r\n    public String showSnippetAddingForm() {\r\n        return &quot;create&quot;;\r\n    }\r\n}\r\n```\r\n**application.properties**\r\n\r\n```\r\nserver.port=8888\r\nmanagement.endpoints.web.exposure.include=*\r\nmanagement.endpoint.shutdown.enabled=true\r\nspring.datasource.url=jdbc:h2:file:../snippetsOfCode\r\nspring.datasource.driverClassName=org.h2.Driver\r\nspring.datasource.username=sa\r\nspring.datasource.password=password\r\n\r\nspring.jpa.database-platform=org.hibernate.dialect.H2Dialect\r\nspring.jpa.hibernate.ddl-auto=update\r\n\r\nspring.h2.console.enabled=true\r\nspring.h2.console.settings.trace=false\r\nspring.h2.console.settings.web-allow-others=false\r\n```\r\n[stacktrace][1]\r\n\r\nHow I should modify my controller to do this?\r\n\r\n\r\n  [1]: https://drive.google.com/file/d/1PApmqe7c_bXk-U8W2m8BGPAEtU0M_M4A/view?usp=sharing","title":"How to not lose data after reloading the server?","body":"<p>Devs! To pass the test I should get some snippets of code and return them by RESTful API requests.\nI`ve done with the first part of the test and sent all snippets of code to the H2 database. In the second part of testing my program, they are reloading server by the command this::reloadServer. How I can get my data back from the database to successfully respond to RESTful requests and pass the test?</p>\n<p>My controller:</p>\n<pre><code>@Controller\npublic class SnippetController {\n\n    @Autowired\n    SnippetService snippetService;\n    @Autowired\n    Repository repository;\n\n\n    public SnippetController(SnippetService snippetService) {\n        this.snippetService = snippetService;\n    }\n\n    @GetMapping(value = &quot;/api/code/{id}&quot;)\n    @ResponseBody\n    public Snippet getSnippet(@PathVariable int id) {\n        return snippetService.getSnippet(id);\n    }\n\n    @GetMapping(value = &quot;/code/{id}&quot;)\n    public String showSnippet(@PathVariable int id, Model model) {\n        model.addAttribute(&quot;snippet&quot;, snippetService.getSnippet(id));\n        return &quot;code&quot;;\n    }\n\n    @GetMapping(value = &quot;/api/code/latest&quot;)\n    @ResponseBody\n    public List&lt;Snippet&gt; getLatestSnippets() {\n        return snippetService.getLatestSnippets();\n    }\n\n    @GetMapping(value = &quot;/code/latest&quot;)\n    public ModelAndView showLatestSnippets(Model model) {\n        List&lt;Snippet&gt; sortedList = getLatestSnippets();\n        ModelAndView mv = new ModelAndView(&quot;latest&quot;);\n        mv.addObject(&quot;latestSnippets&quot;, sortedList);\n        return mv;\n    }\n\n    @PostMapping(value = &quot;/api/code/new&quot;)\n    @ResponseBody\n    public Map&lt;String, String&gt; addSnippet(@RequestBody Snippet snippet) {\n        int id = snippetService.addSnippet(snippet);\n        repository.save(snippet);\n        return Map.of(&quot;id&quot;, String.valueOf(id));\n    }\n\n    @GetMapping(value = &quot;/code/new&quot;)\n    public String showSnippetAddingForm() {\n        return &quot;create&quot;;\n    }\n}\n</code></pre>\n<p><strong>application.properties</strong></p>\n<pre><code>server.port=8888\nmanagement.endpoints.web.exposure.include=*\nmanagement.endpoint.shutdown.enabled=true\nspring.datasource.url=jdbc:h2:file:../snippetsOfCode\nspring.datasource.driverClassName=org.h2.Driver\nspring.datasource.username=sa\nspring.datasource.password=password\n\nspring.jpa.database-platform=org.hibernate.dialect.H2Dialect\nspring.jpa.hibernate.ddl-auto=update\n\nspring.h2.console.enabled=true\nspring.h2.console.settings.trace=false\nspring.h2.console.settings.web-allow-others=false\n</code></pre>\n<p><a href=\"https://drive.google.com/file/d/1PApmqe7c_bXk-U8W2m8BGPAEtU0M_M4A/view?usp=sharing\" rel=\"nofollow noreferrer\">stacktrace</a></p>\n<p>How I should modify my controller to do this?</p>\n"},{"tags":["java","arrays","random","arraylist"],"comments":[{"owner":{"account_id":285266,"reputation":15856,"user_id":583833,"accept_rate":91,"display_name":"Borgleader"},"score":0,"creation_date":1348370467,"post_id":12549448,"comment_id":16900872,"body_markdown":"Since this is an exercise for yourself and it would &quot;ruin it&quot; if I gave you the answer I&#39;ll give you a general hint. Store the possible list of names in an array (or a list, or whatever container) and then generate a random index to pick the name from the list.","body":"Since this is an exercise for yourself and it would &quot;ruin it&quot; if I gave you the answer I&#39;ll give you a general hint. Store the possible list of names in an array (or a list, or whatever container) and then generate a random index to pick the name from the list."},{"owner":{"account_id":275393,"reputation":4657,"user_id":568254,"accept_rate":60,"display_name":"Daniel B. Chapman"},"score":0,"creation_date":1348370531,"post_id":12549448,"comment_id":16900882,"body_markdown":"Arrays are definitely what you want. If you&#39;re really new to programming you probably want to grab a book or a good tutorial (The &quot;teach yourself Java in 30 days&quot; books are not bad. If you&#39;re new to Java hit the Java tutorials to get up to speed. Borgleader is right, to help would ruin it--fight it out, its a great problem.","body":"Arrays are definitely what you want. If you&#39;re really new to programming you probably want to grab a book or a good tutorial (The &quot;teach yourself Java in 30 days&quot; books are not bad. If you&#39;re new to Java hit the Java tutorials to get up to speed. Borgleader is right, to help would ruin it--fight it out, its a great problem."},{"owner":{"display_name":"user180100"},"score":0,"creation_date":1348384426,"post_id":12549448,"comment_id":16902466,"body_markdown":"see also http://stackoverflow.com/questions/5368490/select-random-string-from-given-list?rq=1","body":"see also <a href=\"http://stackoverflow.com/questions/5368490/select-random-string-from-given-list?rq=1\" title=\"select random string from given list\">stackoverflow.com/questions/5368490/&hellip;</a>"},{"owner":{"account_id":446482,"reputation":8211,"user_id":839554,"accept_rate":79,"display_name":"giannis christofakis"},"score":0,"creation_date":1415098520,"post_id":12549448,"comment_id":42053516,"body_markdown":"@Tominizer Where is the `randomGenerator` instantiation? Provide all the code in order to help you.","body":"@Tominizer Where is the <code>randomGenerator</code> instantiation? Provide all the code in order to help you."}],"answers":[{"tags":[],"owner":{"account_id":405298,"reputation":453,"user_id":774099,"accept_rate":83,"display_name":"Sam P"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1348370908,"creation_date":1348370908,"answer_id":12549495,"question_id":12549448,"body_markdown":"One small hint - `Random r = new Random` has created a new instance of &quot;Random&quot;. Since you are using Eclipse, you will have AutoComplete. After you declare your instance of Random &quot;r&quot;, if you use `r.&lt;somemethod&gt;` you may be able to find something useful.\r\n\r\nAlso, if you store the &quot;names&quot; in an array, you can access them in a fairly easy way. I&#39;ll leave you to figure out the rest.\r\n\r\nGood coding :)","title":"How To Randomly Generate From A Given List?","body":"<p>One small hint - <code>Random r = new Random</code> has created a new instance of \"Random\". Since you are using Eclipse, you will have AutoComplete. After you declare your instance of Random \"r\", if you use <code>r.&lt;somemethod&gt;</code> you may be able to find something useful.</p>\n\n<p>Also, if you store the \"names\" in an array, you can access them in a fairly easy way. I'll leave you to figure out the rest.</p>\n\n<p>Good coding :)</p>\n"},{"tags":[],"owner":{"account_id":446482,"reputation":8211,"user_id":839554,"accept_rate":79,"display_name":"giannis christofakis"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1348385260,"creation_date":1348384097,"answer_id":12550427,"question_id":12549448,"body_markdown":"You can shuffle the `ArrayList` and take the first element,or iterate and take all of them in different order.\r\n\r\n    import java.util.Arrays;\r\n    import java.util.Collections;\r\n    import java.util.List;\r\n     \r\n    public class NameGenerator {\r\n        public static void main(String[] args) {\r\n            String[] peoples = {&quot;Bob&quot;,&quot;Jill&quot;,&quot;Tom&quot;,&quot;Brandon&quot;};\r\n            List&lt;String&gt; names = Arrays.asList(peoples);\r\n            Collections.shuffle(names);\r\n            for (String name : names) {\r\n                System.out.print(name + &quot; &quot;);\r\n            }\r\n        }\r\n    }\r\n\r\nOtherwise you can create a random number each time and take a different name.\r\n\r\n            int index = new Random().nextInt(names.size());\r\n            String anynames = names.get(index);\r\n            System.out.println(&quot;Your random name is&quot; + anynames + &quot;now!&quot;);\r\n\r\n","title":"How To Randomly Generate From A Given List?","body":"<p>You can shuffle the <code>ArrayList</code> and take the first element,or iterate and take all of them in different order.</p>\n\n<pre><code>import java.util.Arrays;\nimport java.util.Collections;\nimport java.util.List;\n\npublic class NameGenerator {\n    public static void main(String[] args) {\n        String[] peoples = {\"Bob\",\"Jill\",\"Tom\",\"Brandon\"};\n        List&lt;String&gt; names = Arrays.asList(peoples);\n        Collections.shuffle(names);\n        for (String name : names) {\n            System.out.print(name + \" \");\n        }\n    }\n}\n</code></pre>\n\n<p>Otherwise you can create a random number each time and take a different name.</p>\n\n<pre><code>        int index = new Random().nextInt(names.size());\n        String anynames = names.get(index);\n        System.out.println(\"Your random name is\" + anynames + \"now!\");\n</code></pre>\n"},{"tags":[],"owner":{"account_id":93689,"reputation":415931,"user_id":256196,"accept_rate":77,"display_name":"Bohemian"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1348384899,"creation_date":1348384899,"answer_id":12550495,"question_id":12549448,"body_markdown":"You can express it in fewer lines:\r\n\r\n    String[] names = {&quot;Bob&quot;, &quot;Jill&quot;, &quot;Tom&quot;, &quot;Brandon&quot;};\r\n    int index = Math.random() * names.length;\r\n    String name = names[index];\r\n    System.out.println(&quot;Your random name is&quot; + name + &quot;now!&quot;);","title":"How To Randomly Generate From A Given List?","body":"<p>You can express it in fewer lines:</p>\n\n<pre><code>String[] names = {\"Bob\", \"Jill\", \"Tom\", \"Brandon\"};\nint index = Math.random() * names.length;\nString name = names[index];\nSystem.out.println(\"Your random name is\" + name + \"now!\");\n</code></pre>\n"},{"tags":[],"owner":{"account_id":5198920,"reputation":1,"user_id":4159095,"display_name":"Alex Rocha"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1413731730,"creation_date":1413731730,"answer_id":26451947,"question_id":12549448,"body_markdown":"    public static void main(String[] args) {\r\n        String[] peoples = {&quot;Bob&quot;, &quot;Jill&quot;, &quot;Tom&quot;, &quot;Brandon&quot;};\r\n        List&lt;String&gt; names = Arrays.asList(peoples);\r\n        int index = new Random().nextInt(names.size());\r\n        String name = names.get(index);\r\n        System.out.print(name+ &quot; &quot;);","title":"How To Randomly Generate From A Given List?","body":"<pre><code>public static void main(String[] args) {\n    String[] peoples = {\"Bob\", \"Jill\", \"Tom\", \"Brandon\"};\n    List&lt;String&gt; names = Arrays.asList(peoples);\n    int index = new Random().nextInt(names.size());\n    String name = names.get(index);\n    System.out.print(name+ \" \");\n</code></pre>\n"},{"tags":[],"owner":{"account_id":6149346,"reputation":41,"user_id":5697604,"display_name":"R1D1CUL3"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1455652521,"creation_date":1455652521,"answer_id":35441859,"question_id":12549448,"body_markdown":"    import java.util.*; \r\n\r\n    public class characters \r\n    {\r\n        public static void main(String[] args)\r\n        {\r\n           Random generate = new Random();\r\n           String[] name = {&quot;John&quot;, &quot;Marcus&quot;, &quot;Susan&quot;, &quot;Henry&quot;};\r\n\r\n           System.out.println(&quot;Customer: &quot; + name[generate.nextInt(4)]);      \r\n      \r\n        }\r\n    }\r\n\r\nSee how easy it is? I gave 4 simple names which can be replaced with words and such. The &quot;4&quot; in the code represents the number of names in the String. This is about as simple as it gets. And for those who want it even shorter(all I did was decrease the spacing): \r\n\r\n\r\n    import java.util.*; \r\n    public class characters{ \r\n    public static void main(String[] args){\r\n    Random generate = new Random(); \r\n    String[] name = {&quot;John&quot;, &quot;Marcus&quot;, &quot;Susan&quot;, &quot;Henry&quot;};\r\n    System.out.println(&quot;Customer: &quot; + name[generate.nextInt(4)]); }}","title":"How To Randomly Generate From A Given List?","body":"<pre><code>import java.util.*; \n\npublic class characters \n{\n    public static void main(String[] args)\n    {\n       Random generate = new Random();\n       String[] name = {\"John\", \"Marcus\", \"Susan\", \"Henry\"};\n\n       System.out.println(\"Customer: \" + name[generate.nextInt(4)]);      \n\n    }\n}\n</code></pre>\n\n<p>See how easy it is? I gave 4 simple names which can be replaced with words and such. The \"4\" in the code represents the number of names in the String. This is about as simple as it gets. And for those who want it even shorter(all I did was decrease the spacing): </p>\n\n<pre><code>import java.util.*; \npublic class characters{ \npublic static void main(String[] args){\nRandom generate = new Random(); \nString[] name = {\"John\", \"Marcus\", \"Susan\", \"Henry\"};\nSystem.out.println(\"Customer: \" + name[generate.nextInt(4)]); }}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":23356918,"reputation":11,"user_id":17429763,"display_name":"Jhunrel Evangelista"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1637411141,"creation_date":1637377745,"answer_id":70042933,"question_id":12549448,"body_markdown":"    import java.util.*;\r\n    import java.io.*;\r\n\r\n    public class Main {\r\n\t  public static void main(String[] args) throws Exception {\r\n\r\n\t\t// To generate random information\r\n\t\tRandom random = new Random(); // necessary for this project\r\n\r\n\t\t// To get the names and surnames .txt files in local directory\r\n\t\tScanner male = new Scanner(\r\n\t\t\tnew File(&quot;/storage/emulated/0/Download/male.txt&quot;)); // male names .txt\r\n\r\n\t\tScanner female = new Scanner(\r\n\t\t\tnew File(&quot;/storage/emulated/0/Download/female.txt&quot;)); // female names .txt\r\n\r\n\t\tScanner surname = new Scanner(\r\n\t\t\tnew File(&quot;/storage/emulated/0/Download/surnames.txt&quot;)); // surname lists .txt\r\n\r\n\r\n\t\t// Each name and surname will be stored here for easier use\r\n\t\tLinkedList&lt;String&gt; maleNames = new LinkedList&lt;String&gt;(); // male names\r\n\t\tLinkedList&lt;String&gt; femaleNames = new LinkedList&lt;String&gt;(); // female names\r\n\t\tLinkedList&lt;String&gt; surnameLists = new LinkedList&lt;String&gt;(); // surname lists\r\n\r\n\t\t// Loops are used to automatically store each name and surname into the list\r\n\t\twhile (male.hasNext()) {\r\n\t\t\tmaleNames.add(male.next()); // auto store each male name into the list\r\n\t\t}\r\n\t\twhile (female.hasNext()) {\r\n\t\t\tfemaleNames.add(female.next()); // auto store each female name into the list\r\n\t\t}\r\n\t\twhile (surname.hasNext()) {\r\n\t\t\tsurnameLists.add(surname.next()); // auto store each surname into the list\r\n\t\t}\r\n\r\n\t\t// Sorting Elements is optional\r\n\t\tsurnameLists.sort(Comparator.naturalOrder()); // optional\r\n\t\tfemaleNames.sort(Comparator.naturalOrder()); // optional\r\n\t\tmaleNames.sort(Comparator.naturalOrder()); // optional\r\n\r\n\t\t// Closing these objects is necessary\r\n\t\tsurname.close(); // necessary\r\n\t\tfemale.close(); // necessary\r\n\t\tmale.close(); // necessary\r\n\r\n\r\n\t\t// For loop is used to generate multiple information\r\n\t\tfor (int index = 0; index &lt; 10000; index++) { // optional\r\n\r\n\t\t\tString firstName = &quot;&quot;, lastName = &quot;&quot;, completeName = &quot;&quot;, gender = &quot;&quot;; // temporary storage\r\n\r\n\t\t\tbyte age = (byte)(random.nextInt(99 - 18 + 1) + 18); // generates random age between 18 to 99 years old\r\n\r\n\t\t\t// If boolean value is true, it is male\r\n\t\t\tif (random.nextBoolean()) {\r\n\t\t\t\tfirstName += maleNames.get(random.nextInt(maleNames.size())); // generates random name\r\n\t\t\t\tlastName += surnameLists.get(random.nextInt(surnameLists.size())); // generates random surname\r\n\r\n\t\t\t\tfirstName = (firstName.substring(0, 1).toUpperCase() + firstName.substring(1)); // uppercase first letter\r\n\t\t\t\tlastName = (lastName.substring(0, 1).toUpperCase() + lastName.substring(1)); // uppercase first letter\r\n\r\n\t\t\t\tcompleteName = firstName + &quot; &quot; + lastName; // creates a complete name\r\n\t\t\t\tgender = &quot;Male&quot;; // sets the gender into male\r\n\r\n\t\t\t\t// Otherwise, it is female\r\n\t\t\t} else {\r\n\t\t\t\tfirstName += femaleNames.get(random.nextInt(femaleNames.size())); // generates random name\r\n\t\t\t\tlastName += surnameLists.get(random.nextInt(surnameLists.size())); // generates random surname\r\n\r\n\t\t\t\tfirstName = (firstName.substring(0, 1).toUpperCase() + firstName.substring(1)); // uppercase first letter\r\n\t\t\t\tlastName = (lastName.substring(0, 1).toUpperCase() + lastName.substring(1)); // uppercase first letter\r\n\r\n\t\t\t\tcompleteName = firstName + &quot; &quot; + lastName; // creates a complete name\r\n\t\t\t\tgender = &quot;Female&quot;; // sets the gender into female\r\n\t\t\t}\r\n\r\n\t\t\t// Finally, printing out the results\r\n\t\t\tSystem.out.printf(&quot;Name: %s%nAge:  %d%nSex:  %s%n%n&quot;, completeName, age, gender);\r\n\t\t}\r\n\t  }\r\n    }","title":"How To Randomly Generate From A Given List?","body":"<pre><code>import java.util.*;\nimport java.io.*;\n\npublic class Main {\n  public static void main(String[] args) throws Exception {\n\n    // To generate random information\n    Random random = new Random(); // necessary for this project\n\n    // To get the names and surnames .txt files in local directory\n    Scanner male = new Scanner(\n        new File(&quot;/storage/emulated/0/Download/male.txt&quot;)); // male names .txt\n\n    Scanner female = new Scanner(\n        new File(&quot;/storage/emulated/0/Download/female.txt&quot;)); // female names .txt\n\n    Scanner surname = new Scanner(\n        new File(&quot;/storage/emulated/0/Download/surnames.txt&quot;)); // surname lists .txt\n\n\n    // Each name and surname will be stored here for easier use\n    LinkedList&lt;String&gt; maleNames = new LinkedList&lt;String&gt;(); // male names\n    LinkedList&lt;String&gt; femaleNames = new LinkedList&lt;String&gt;(); // female names\n    LinkedList&lt;String&gt; surnameLists = new LinkedList&lt;String&gt;(); // surname lists\n\n    // Loops are used to automatically store each name and surname into the list\n    while (male.hasNext()) {\n        maleNames.add(male.next()); // auto store each male name into the list\n    }\n    while (female.hasNext()) {\n        femaleNames.add(female.next()); // auto store each female name into the list\n    }\n    while (surname.hasNext()) {\n        surnameLists.add(surname.next()); // auto store each surname into the list\n    }\n\n    // Sorting Elements is optional\n    surnameLists.sort(Comparator.naturalOrder()); // optional\n    femaleNames.sort(Comparator.naturalOrder()); // optional\n    maleNames.sort(Comparator.naturalOrder()); // optional\n\n    // Closing these objects is necessary\n    surname.close(); // necessary\n    female.close(); // necessary\n    male.close(); // necessary\n\n\n    // For loop is used to generate multiple information\n    for (int index = 0; index &lt; 10000; index++) { // optional\n\n        String firstName = &quot;&quot;, lastName = &quot;&quot;, completeName = &quot;&quot;, gender = &quot;&quot;; // temporary storage\n\n        byte age = (byte)(random.nextInt(99 - 18 + 1) + 18); // generates random age between 18 to 99 years old\n\n        // If boolean value is true, it is male\n        if (random.nextBoolean()) {\n            firstName += maleNames.get(random.nextInt(maleNames.size())); // generates random name\n            lastName += surnameLists.get(random.nextInt(surnameLists.size())); // generates random surname\n\n            firstName = (firstName.substring(0, 1).toUpperCase() + firstName.substring(1)); // uppercase first letter\n            lastName = (lastName.substring(0, 1).toUpperCase() + lastName.substring(1)); // uppercase first letter\n\n            completeName = firstName + &quot; &quot; + lastName; // creates a complete name\n            gender = &quot;Male&quot;; // sets the gender into male\n\n            // Otherwise, it is female\n        } else {\n            firstName += femaleNames.get(random.nextInt(femaleNames.size())); // generates random name\n            lastName += surnameLists.get(random.nextInt(surnameLists.size())); // generates random surname\n\n            firstName = (firstName.substring(0, 1).toUpperCase() + firstName.substring(1)); // uppercase first letter\n            lastName = (lastName.substring(0, 1).toUpperCase() + lastName.substring(1)); // uppercase first letter\n\n            completeName = firstName + &quot; &quot; + lastName; // creates a complete name\n            gender = &quot;Female&quot;; // sets the gender into female\n        }\n\n        // Finally, printing out the results\n        System.out.printf(&quot;Name: %s%nAge:  %d%nSex:  %s%n%n&quot;, completeName, age, gender);\n    }\n  }\n}\n</code></pre>\n"}],"owner":{"account_id":1869016,"reputation":49,"user_id":1691760,"display_name":"Tominizer"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":33606,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":6,"score":2,"last_activity_date":1637411141,"creation_date":1348370250,"question_id":12549448,"body_markdown":"The problem I&#39;m running into is to randomly generate names from a specific list. I want my program to be able to only pick from these names: *Bob, Jill, Tom*, and *Brandon*. I tried studying arrays but I think that&#39;s a bit too far for me to learn yet. So far I think I have a general idea, but I&#39;m not sure.\r\n\r\n    import java.util.Random;\r\n    \r\n    public class NameGenerator\r\n    {\r\n    \r\n            public static void main(String[] args)\r\n    \t    {\r\n    \r\n               System.out.println(&quot;This is a program that generates random names from a list!&quot;);\r\n            \r\n               int Bob = 0;\r\n               int Jill = 0;\r\n               int Tom = 0;\r\n               int Brandon = 0;\r\n               Random r = new Random();\r\n\r\nAfter that I&#39;m kind of stuck on how to get the generator going.\r\n\r\nUpdate:\r\nWell I took your advices and tried learning arrays. So far this is what I have.\r\n\t\t\t\r\n    ArrayList&lt;String&gt; names = new ArrayList&lt;String&gt;();\r\n    names.add(&quot;Bob&quot;);\r\n    names.add(&quot;Jill&quot;);\r\n    names.add(&quot;Tom&quot;);\r\n    names.add(&quot;Brandon&quot;);\r\n\t\t\t\t\r\n    char index = randomGenerator.nextChar(names.size());\r\n    String anynames = names.get(index);\r\n    System.out.println(&quot;Your random name is&quot; + anynames + &quot;now!&quot;);\r\n\r\nHowever now it says randomGenerator cannot be resolved and void methods cannot return a value. Any ideas on where I went wrong?\r\n","title":"How To Randomly Generate From A Given List?","body":"<p>The problem I'm running into is to randomly generate names from a specific list. I want my program to be able to only pick from these names: <em>Bob, Jill, Tom</em>, and <em>Brandon</em>. I tried studying arrays but I think that's a bit too far for me to learn yet. So far I think I have a general idea, but I'm not sure.</p>\n\n<pre><code>import java.util.Random;\n\npublic class NameGenerator\n{\n\n        public static void main(String[] args)\n        {\n\n           System.out.println(\"This is a program that generates random names from a list!\");\n\n           int Bob = 0;\n           int Jill = 0;\n           int Tom = 0;\n           int Brandon = 0;\n           Random r = new Random();\n</code></pre>\n\n<p>After that I'm kind of stuck on how to get the generator going.</p>\n\n<p>Update:\nWell I took your advices and tried learning arrays. So far this is what I have.</p>\n\n<pre><code>ArrayList&lt;String&gt; names = new ArrayList&lt;String&gt;();\nnames.add(\"Bob\");\nnames.add(\"Jill\");\nnames.add(\"Tom\");\nnames.add(\"Brandon\");\n\nchar index = randomGenerator.nextChar(names.size());\nString anynames = names.get(index);\nSystem.out.println(\"Your random name is\" + anynames + \"now!\");\n</code></pre>\n\n<p>However now it says randomGenerator cannot be resolved and void methods cannot return a value. Any ideas on where I went wrong?</p>\n"},{"tags":["java","arrays","arraylist"],"comments":[{"owner":{"display_name":"user6073886"},"score":0,"creation_date":1637338120,"post_id":70037704,"comment_id":123807679,"body_markdown":"&quot;I only seem to be able to remove the ID of the book, or all the books in the lists!&quot; &lt; That honestly doesn&#39;t make much sense. Does your Book class contain any static fields?","body":"&quot;I only seem to be able to remove the ID of the book, or all the books in the lists!&quot; &lt; That honestly doesn&#39;t make much sense. Does your Book class contain any static fields?"},{"owner":{"display_name":"user6073886"},"score":0,"creation_date":1637338368,"post_id":70037704,"comment_id":123807772,"body_markdown":"Also, `book.getId() == id` will not work to compare Strings. You should never compare String with `==`, see [How do I compare strings in Java?](https://stackoverflow.com/questions/513832/how-do-i-compare-strings-in-java)","body":"Also, <code>book.getId() == id</code> will not work to compare Strings. You should never compare String with <code>==</code>, see <a href=\"https://stackoverflow.com/questions/513832/how-do-i-compare-strings-in-java\">How do I compare strings in Java?</a>"},{"owner":{"account_id":2345668,"reputation":13002,"user_id":2055998,"accept_rate":68,"display_name":"PM 77-1"},"score":0,"creation_date":1637338607,"post_id":70037704,"comment_id":123807844,"body_markdown":"And the way you remove list element will throw `ConcurrentModificationException`.","body":"And the way you remove list element will throw <code>ConcurrentModificationException</code>."},{"owner":{"account_id":2345668,"reputation":13002,"user_id":2055998,"accept_rate":68,"display_name":"PM 77-1"},"score":0,"creation_date":1637338637,"post_id":70037704,"comment_id":123807855,"body_markdown":"Does this answer your question? [Remove elements from collection while iterating](https://stackoverflow.com/questions/10431981/remove-elements-from-collection-while-iterating)","body":"Does this answer your question? <a href=\"https://stackoverflow.com/questions/10431981/remove-elements-from-collection-while-iterating\">Remove elements from collection while iterating</a>"},{"owner":{"account_id":23394021,"reputation":3,"user_id":17458332,"display_name":"Yound Puddle Duck"},"score":0,"creation_date":1637763152,"post_id":70037704,"comment_id":123913033,"body_markdown":"Thanks everyone, that has really helped! The articles on .equals() and iteration really helped clear things up.","body":"Thanks everyone, that has really helped! The articles on .equals() and iteration really helped clear things up."}],"answers":[{"tags":[],"owner":{"account_id":18243171,"reputation":19300,"user_id":13279831,"display_name":"Nowhere Man"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1637410763,"creation_date":1637410763,"answer_id":70045842,"question_id":70037704,"body_markdown":"Use [`Collection::removeIf`](https://docs.oracle.com/javase/8/docs/api/java/util/Collection.html#removeIf-java.util.function.Predicate-) method and make sure to use `equals/equalsIgnoreCase` or even [`Objects::equals`](https://docs.oracle.com/javase/8/docs/api/java/util/Objects.html#equals-java.lang.Object-java.lang.Object-) when comparing `String` objects:\r\n```java\r\npublic void removeBook(String id) {\r\n    books.removeIf(book -&gt; Objects.equals(id, book.getId()));\r\n}\r\n```\r\n","title":"How to remove an item from an ArrayList based in parameter","body":"<p>Use <a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/Collection.html#removeIf-java.util.function.Predicate-\" rel=\"nofollow noreferrer\"><code>Collection::removeIf</code></a> method and make sure to use <code>equals/equalsIgnoreCase</code> or even <a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/Objects.html#equals-java.lang.Object-java.lang.Object-\" rel=\"nofollow noreferrer\"><code>Objects::equals</code></a> when comparing <code>String</code> objects:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public void removeBook(String id) {\n    books.removeIf(book -&gt; Objects.equals(id, book.getId()));\n}\n</code></pre>\n"}],"owner":{"account_id":23394021,"reputation":3,"user_id":17458332,"display_name":"Yound Puddle Duck"},"comment_count":5,"delete_vote_count":1,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":441,"favorite_count":0,"down_vote_count":4,"up_vote_count":0,"closed_date":1637439248,"accepted_answer_id":70045842,"answer_count":1,"score":-4,"last_activity_date":1637410763,"creation_date":1637337952,"question_id":70037704,"body_markdown":"I am learning java and have been asked to create a &#39;Library&#39; that stores books. Books should have a title, author and id. Which gets added using the method below addBook().\r\n\r\nAfter the book is added, I want to be able to remove any book in the list that has a matching ID. If the ID matches it should be remove the title, author and ID from the array, not just the ID.\r\n\r\nI have tried an number of different ways, including the solution below and looking at iterators. However, I only seem to be able to remove the ID of the book, or all the books in the lists!\r\n\r\nI am learning, so I would be grateful for any solution to also explain why - I have been racking my head around it for days and I am super stuck!\r\n\r\nHere is my code....\r\n\r\n\r\n\r\n    import java.util.ArrayList;\r\n    import java.util.Iterator;\r\n\r\n    /**\r\n     * Library class that represents a library \r\n     * where books will be stored.\r\n     */\r\n     \r\n    public class Library\r\n    {\r\n        // The list os books that is owned by the library\r\n        private ArrayList&lt;Book&gt; books;\r\n        // The name of the library\r\n        private String name;\r\n        \r\n\r\n        /**\r\n         * Constructor for Library objects. This \r\n         * constructor sets the name of the library.\r\n         */\r\n         \r\n        public Library(String aName)\r\n        {\r\n            // Gives the library its name\r\n            name = aName;\r\n            // Initialises book field to an empty collection\r\n            books = new ArrayList&lt;&gt;();\r\n        }  \r\n        \r\n        /* \r\n         * Add a book to the library by adding its\r\n         * author, its title and and id.\r\n         */\r\n        public void addBook(String author, String title, String id)\r\n        {\r\n            /** Add a new book to the Book list that\r\n             *  includes its author, title and id\r\n             */\r\n            books.add(new Book(author,title,id));\r\n        }\r\n\r\n        // Remove book from library\r\n        public void removeBook(String id)\r\n        {\r\n             for(Book book : books){\r\n                // When the ID given, matches an ID\r\n                // getId() is a getter method created in a seperate book class\r\n                if (book.getId() == id) {\r\n                    // If that book is available\r\n                    books.remove(book);\r\n                    }\r\n                // If statements don&#39;t match, do nothing\r\n                else {\r\n                    // Do nothing\r\n                }\r\n            }\r\n            \r\n\r\n        }\r\n\r\n    }\r\n","title":"How to remove an item from an ArrayList based in parameter","body":"<p>I am learning java and have been asked to create a 'Library' that stores books. Books should have a title, author and id. Which gets added using the method below addBook().</p>\n<p>After the book is added, I want to be able to remove any book in the list that has a matching ID. If the ID matches it should be remove the title, author and ID from the array, not just the ID.</p>\n<p>I have tried an number of different ways, including the solution below and looking at iterators. However, I only seem to be able to remove the ID of the book, or all the books in the lists!</p>\n<p>I am learning, so I would be grateful for any solution to also explain why - I have been racking my head around it for days and I am super stuck!</p>\n<p>Here is my code....</p>\n<pre><code>import java.util.ArrayList;\nimport java.util.Iterator;\n\n/**\n * Library class that represents a library \n * where books will be stored.\n */\n \npublic class Library\n{\n    // The list os books that is owned by the library\n    private ArrayList&lt;Book&gt; books;\n    // The name of the library\n    private String name;\n    \n\n    /**\n     * Constructor for Library objects. This \n     * constructor sets the name of the library.\n     */\n     \n    public Library(String aName)\n    {\n        // Gives the library its name\n        name = aName;\n        // Initialises book field to an empty collection\n        books = new ArrayList&lt;&gt;();\n    }  \n    \n    /* \n     * Add a book to the library by adding its\n     * author, its title and and id.\n     */\n    public void addBook(String author, String title, String id)\n    {\n        /** Add a new book to the Book list that\n         *  includes its author, title and id\n         */\n        books.add(new Book(author,title,id));\n    }\n\n    // Remove book from library\n    public void removeBook(String id)\n    {\n         for(Book book : books){\n            // When the ID given, matches an ID\n            // getId() is a getter method created in a seperate book class\n            if (book.getId() == id) {\n                // If that book is available\n                books.remove(book);\n                }\n            // If statements don't match, do nothing\n            else {\n                // Do nothing\n            }\n        }\n        \n\n    }\n\n}\n</code></pre>\n"},{"tags":["java","oop","abstraction","information-hiding","data-hiding"],"comments":[{"owner":{"account_id":2293921,"reputation":9958,"user_id":2015912,"accept_rate":70,"display_name":"scottb"},"score":1,"creation_date":1384317326,"post_id":19944938,"comment_id":29684228,"body_markdown":"Information hiding is another way to say encapsulation.  Giving untrusted (or even trusted) clients access to an object&#39;s state in a way that allows clients to maliciously (or accidentally) corrupt an object&#39;s state is a very bad thing.  To the greatest extent possible, an object&#39;s state should be hidden from the world.","body":"Information hiding is another way to say encapsulation.  Giving untrusted (or even trusted) clients access to an object&#39;s state in a way that allows clients to maliciously (or accidentally) corrupt an object&#39;s state is a very bad thing.  To the greatest extent possible, an object&#39;s state should be hidden from the world."}],"answers":[{"tags":[],"owner":{"account_id":3438922,"reputation":5562,"user_id":2881298,"display_name":"yamafontes"},"down_vote_count":0,"up_vote_count":17,"is_accepted":true,"score":17,"last_activity_date":1637410515,"creation_date":1384315325,"answer_id":19945036,"question_id":19944938,"body_markdown":"Encapsulation = information hiding = data hiding. Information that doesn&#39;t need to be known to others in order to perform some task.\r\n\r\n    class Bartender {\r\n      private boolean hasBeer = false;\r\n      public boolean willGiveBeerToDrinker(int drinkerAge) {\r\n        return (hasBeer &amp;&amp; (drinkerAge &gt;= 21));\r\n      }\r\n    }\r\n    \r\n    class Drinker {\r\n      private Bartender bartender = new Bartender();\r\n      private int age = 18;\r\n      public boolean willBartenderGiveMeBeer() {\r\n        return bartender.willGiveBeerToDrinker(age);\r\n      }\r\n      // Drinker doesn&#39;t know how much beer Bartender has\r\n    }\r\n\r\nAbstraction = different implementations of the same interface.\r\n\r\n    public interface Car {\r\n      public void start();\r\n      public void stop();\r\n    }\r\n    \r\n    class HotRod implements Car {\r\n      // implement methods\r\n    }\r\n    \r\n    class BattleTank implements Car {\r\n      // implement methods\r\n    }\r\n    \r\n    class GoCart implements Car {\r\n      // implement methods\r\n    }\r\n\r\nThe implementations are all unique, but can be bound under the `Car` type.","title":"Practical example Encapsulation vs Information Hiding vs Abstraction vs Data Hiding in Java","body":"<p>Encapsulation = information hiding = data hiding. Information that doesn't need to be known to others in order to perform some task.</p>\n<pre><code>class Bartender {\n  private boolean hasBeer = false;\n  public boolean willGiveBeerToDrinker(int drinkerAge) {\n    return (hasBeer &amp;&amp; (drinkerAge &gt;= 21));\n  }\n}\n\nclass Drinker {\n  private Bartender bartender = new Bartender();\n  private int age = 18;\n  public boolean willBartenderGiveMeBeer() {\n    return bartender.willGiveBeerToDrinker(age);\n  }\n  // Drinker doesn't know how much beer Bartender has\n}\n</code></pre>\n<p>Abstraction = different implementations of the same interface.</p>\n<pre><code>public interface Car {\n  public void start();\n  public void stop();\n}\n\nclass HotRod implements Car {\n  // implement methods\n}\n\nclass BattleTank implements Car {\n  // implement methods\n}\n\nclass GoCart implements Car {\n  // implement methods\n}\n</code></pre>\n<p>The implementations are all unique, but can be bound under the <code>Car</code> type.</p>\n"},{"tags":[],"owner":{"account_id":1064596,"reputation":5404,"user_id":1065489,"accept_rate":52,"display_name":"me_digvijay"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1384320121,"creation_date":1384317077,"answer_id":19945345,"question_id":19944938,"body_markdown":"To reduce the confusion:\r\n\r\n**Encapsulation** is used for Information hiding or data hiding\r\n\r\nEncapsulation means **self contained**. All the objects in Java have a set of data and methods to operate on that data. So the user of any object does not have to worry about the about how the obect is working. This way you hide the information and other complexities.\r\n\r\n**Example:** Any Java object is enough to represent an example.\r\n\r\n**Abstraction**: This means making things general i.e., instead of creating a very specfic class when you create base classes or interfaces and then extend them to get your specific class.\r\n\r\n**Example:** \r\nclass Animal {}\r\nclass Lion extends Animal{}\r\n\r\nSo here for Lion class you have a generalized class i.e., Animal. This represents abstraction\r\n\r\n**Note** Examples givien by KepaniHaole are perfect.\r\n\r\n**Abstraction Example:**\r\n\r\n    public interface Animal{\r\n        public String getType();\r\n    }\r\n\r\n    class Lion implements Animal {\r\n        private String animalType = &quot;WILD&quot;;\r\n        \r\n        @Override\r\n        public String getType() {\r\n            return this.animalType;\r\n        }\r\n    }\r\n    class Cow implements Animal {\r\n        private String animalType = &quot;Domestic&quot;;\r\n        \r\n        @Override\r\n        public String getType() {\r\n            return this.animalType;\r\n        }\r\n    }\r\nIn this example the **Lion** and **Cow** classes implements the **Animal** interface. The **Lion** and **Cow** classes `override` the **getType** method of the **Animal** interface.\r\n\r\nHere Lion and Cow are special cases and Animal is more generalized. So this gives you abstraction because whenever you have an **Animal** you have the **getType** method to know its type i.e., you have generalized it.\r\n\r\nNow if you notice I have made the **animalType** as private in the **Lion** and **Cow** classes so that nobody outside the class can modify it. This way I am hiding unwanted information from outer objects.\r\n\r\n\r\nAll the outer objects need is the **getType** method to known the **type** of the animal. This way I am exposing only relavent information to outer objects.\r\n\r\n\r\n","title":"Practical example Encapsulation vs Information Hiding vs Abstraction vs Data Hiding in Java","body":"<p>To reduce the confusion:</p>\n\n<p><strong>Encapsulation</strong> is used for Information hiding or data hiding</p>\n\n<p>Encapsulation means <strong>self contained</strong>. All the objects in Java have a set of data and methods to operate on that data. So the user of any object does not have to worry about the about how the obect is working. This way you hide the information and other complexities.</p>\n\n<p><strong>Example:</strong> Any Java object is enough to represent an example.</p>\n\n<p><strong>Abstraction</strong>: This means making things general i.e., instead of creating a very specfic class when you create base classes or interfaces and then extend them to get your specific class.</p>\n\n<p><strong>Example:</strong> \nclass Animal {}\nclass Lion extends Animal{}</p>\n\n<p>So here for Lion class you have a generalized class i.e., Animal. This represents abstraction</p>\n\n<p><strong>Note</strong> Examples givien by KepaniHaole are perfect.</p>\n\n<p><strong>Abstraction Example:</strong></p>\n\n<pre><code>public interface Animal{\n    public String getType();\n}\n\nclass Lion implements Animal {\n    private String animalType = \"WILD\";\n\n    @Override\n    public String getType() {\n        return this.animalType;\n    }\n}\nclass Cow implements Animal {\n    private String animalType = \"Domestic\";\n\n    @Override\n    public String getType() {\n        return this.animalType;\n    }\n}\n</code></pre>\n\n<p>In this example the <strong>Lion</strong> and <strong>Cow</strong> classes implements the <strong>Animal</strong> interface. The <strong>Lion</strong> and <strong>Cow</strong> classes <code>override</code> the <strong>getType</strong> method of the <strong>Animal</strong> interface.</p>\n\n<p>Here Lion and Cow are special cases and Animal is more generalized. So this gives you abstraction because whenever you have an <strong>Animal</strong> you have the <strong>getType</strong> method to know its type i.e., you have generalized it.</p>\n\n<p>Now if you notice I have made the <strong>animalType</strong> as private in the <strong>Lion</strong> and <strong>Cow</strong> classes so that nobody outside the class can modify it. This way I am hiding unwanted information from outer objects.</p>\n\n<p>All the outer objects need is the <strong>getType</strong> method to known the <strong>type</strong> of the animal. This way I am exposing only relavent information to outer objects.</p>\n"}],"owner":{"account_id":3467821,"reputation":8512,"user_id":2902950,"accept_rate":78,"display_name":"Prashant Shilimkar"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":23066,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"accepted_answer_id":19945036,"answer_count":2,"score":4,"last_activity_date":1637410515,"creation_date":1384314782,"question_id":19944938,"body_markdown":"&gt; I know there are lots of post regarding this question which has theoretical explanation with real time examples.These OOPs terms are\r\n&gt; very simple but more confusing for beginners like me.\r\n&gt; But **I am expecting here not a definition and real time example BUT expecting code snippet in java**.\r\n\r\n**Will anyone please give very small *code snippet* for each one *in Java* that will help me a lot to understand Encapsulation vs Information Hiding vs Abstraction vs Data Hiding practically?**","title":"Practical example Encapsulation vs Information Hiding vs Abstraction vs Data Hiding in Java","body":"<blockquote>\n  <p>I know there are lots of post regarding this question which has theoretical explanation with real time examples.These OOPs terms are\n  very simple but more confusing for beginners like me.\n  But <strong>I am expecting here not a definition and real time example BUT expecting code snippet in java</strong>.</p>\n</blockquote>\n\n<p><strong>Will anyone please give very small <em>code snippet</em> for each one <em>in Java</em> that will help me a lot to understand Encapsulation vs Information Hiding vs Abstraction vs Data Hiding practically?</strong></p>\n"},{"tags":["java","arraylist","parameters"],"comments":[{"owner":{"account_id":14007891,"reputation":1959,"user_id":10117433,"display_name":"TBA"},"score":0,"creation_date":1637397159,"post_id":70044355,"comment_id":123819649,"body_markdown":"Hi, Welcome to SO. For this type of question, it&#39;s better if you can add your code.","body":"Hi, Welcome to SO. For this type of question, it&#39;s better if you can add your code."},{"owner":{"account_id":9725613,"reputation":53334,"user_id":7212686,"accept_rate":100,"display_name":"azro"},"score":0,"creation_date":1637399105,"post_id":70044355,"comment_id":123819917,"body_markdown":"Provide code example, also give the expected output, because what you asked if very unclear","body":"Provide code example, also give the expected output, because what you asked if very unclear"}],"answers":[{"tags":[],"owner":{"account_id":18243171,"reputation":19300,"user_id":13279831,"display_name":"Nowhere Man"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1637400967,"creation_date":1637400967,"answer_id":70044759,"question_id":70044355,"body_markdown":"`ArrayList` does not have a direct method to get the object by the value of its properties, however it allows to retrieve objects by index using method `get(int i)` or by iterating and comparing the value.\r\n```java\r\nCountry germany = new Country(&quot;Germany&quot;, &quot;GER&quot;);\r\n\r\nList&lt;Country&gt; countries = new ArrayList&lt;&gt;();\r\ncountries.add(germany);\r\n\r\n// use index\r\nfor (int i = 0, n = countries.size(); i &lt; n; i++) {\r\n    if (countries.get(i).getName().equals(&quot;Germany&quot;)) {\r\n        System.out.println(&quot;Found!&quot;);\r\n    }\r\n}\r\n\r\n// iterate by index\r\nfor (Country country : countries) {\r\n    if (country.getName().equals(&quot;Germany&quot;)) {\r\n        System.out.println(&quot;Found!&quot;);\r\n    }\r\n}\r\n\r\n// use Stream API filter\r\ncountries.stream()\r\n    .filter(country -&gt; country.getName().equals(&quot;Germany&quot;))\r\n    .forEach(country -&gt; System.out.println(&quot;Found!&quot;));\r\n```\r\n----\r\nIf you need to look up the counties by name directly, a map `Map&lt;String, Country&gt;` should be used instead:\r\n```\r\nMap&lt;String, Country&gt; countryDictionary = new HashMap&lt;&gt;();\r\ncountryDictionary.put(&quot;Germany&quot;, germany);\r\n\r\ncountryDictionary.get(&quot;Germany&quot;); // returns appropriate country or null\r\n```","title":"How to get one specific variable from an ArrayList which built for containing many variables?","body":"<p><code>ArrayList</code> does not have a direct method to get the object by the value of its properties, however it allows to retrieve objects by index using method <code>get(int i)</code> or by iterating and comparing the value.</p>\n<pre class=\"lang-java prettyprint-override\"><code>Country germany = new Country(&quot;Germany&quot;, &quot;GER&quot;);\n\nList&lt;Country&gt; countries = new ArrayList&lt;&gt;();\ncountries.add(germany);\n\n// use index\nfor (int i = 0, n = countries.size(); i &lt; n; i++) {\n    if (countries.get(i).getName().equals(&quot;Germany&quot;)) {\n        System.out.println(&quot;Found!&quot;);\n    }\n}\n\n// iterate by index\nfor (Country country : countries) {\n    if (country.getName().equals(&quot;Germany&quot;)) {\n        System.out.println(&quot;Found!&quot;);\n    }\n}\n\n// use Stream API filter\ncountries.stream()\n    .filter(country -&gt; country.getName().equals(&quot;Germany&quot;))\n    .forEach(country -&gt; System.out.println(&quot;Found!&quot;));\n</code></pre>\n<hr />\n<p>If you need to look up the counties by name directly, a map <code>Map&lt;String, Country&gt;</code> should be used instead:</p>\n<pre><code>Map&lt;String, Country&gt; countryDictionary = new HashMap&lt;&gt;();\ncountryDictionary.put(&quot;Germany&quot;, germany);\n\ncountryDictionary.get(&quot;Germany&quot;); // returns appropriate country or null\n</code></pre>\n"},{"tags":[],"owner":{"account_id":6017640,"reputation":8919,"user_id":4725875,"display_name":"DevilsHnd - 退した"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1637410415,"creation_date":1637407062,"answer_id":70045399,"question_id":70044355,"body_markdown":"You have he class Country with the appropriate constructor to instantiate an complete instance of a Country object. What you want is an ArrayList (or List) of Country, for example,\r\n\r\n    List&lt;Country&gt; countries = new ArrayList&lt;&gt;();\r\n\r\nNow, to fill the ArrayList with instances of Country you can do:\r\n\r\n    countries.add(new Country(&quot;Germany&quot;, &quot;GER&quot;));\r\n    countries.add(new Country(&quot;Sweden&quot;, &quot;SWE&quot;));\r\n    countries.add(new Country(&quot;Canada&quot;, &quot;CAN&quot;));\r\n    countries.add(new Country(&quot;United States of America&quot;, &quot;USA&quot;));\r\n\r\nTo get the ISO3 code from a supplied country name you might do:\r\n\r\n    List&lt;Country&gt; countries = new ArrayList&lt;&gt;();\r\n        countries.add(new Country(&quot;Germany&quot;, &quot;GER&quot;));\r\n        countries.add(new Country(&quot;Sweden&quot;, &quot;SWE&quot;));\r\n        countries.add(new Country(&quot;Canada&quot;, &quot;CAN&quot;));\r\n        countries.add(new Country(&quot;United States&quot;, &quot;USA&quot;));\r\n        \r\n    Scanner input = new Scanner(System.in);\r\n        \r\n    // Get country code from country name:\r\n    String country = &quot;&quot;;\r\n    while(country.isEmpty()) {\r\n        System.out.println(&quot;Enter a Country name or &#39;n&#39; for next example:&quot;);\r\n        System.out.print(&quot;Country: --&gt; &quot; );\r\n        country = input.nextLine().trim();\r\n        if (country.equalsIgnoreCase(&quot;n&quot;)) {\r\n            break;  // Break out of current while loop\r\n        }\r\n        if (!country.matches(&quot;(?i)[a-z]+&quot;)) {\r\n            System.out.println(&quot;Invalid Entry! Try again...\\n&quot;);\r\n        }\r\n        else {\r\n             for (Country cntry : countries) {\r\n                String ctry = cntry.getName();\r\n                if (ctry.equalsIgnoreCase(country)) {\r\n                    System.out.println(&quot;Country Code for &quot; + ctry + &quot; is: --&gt; &quot; + cntry.getCode());\r\n                    System.out.println(&quot;The List contains: --&gt; &quot; + cntry.toString());\r\n                    break; // Break out of loop;\r\n                }\r\n            }\r\n        }\r\n        country = &quot;&quot;;\r\n        System.out.println();\r\n    }\r\n        \r\n    System.out.println();\r\n        \r\n    // Get Country Name from Country Code:\r\n    String code = &quot;&quot;;\r\n    while(code.isEmpty()) {\r\n        System.out.println(&quot;Enter a Country Code or &#39;n&#39; for next example:&quot;);\r\n        System.out.print(&quot;Code: --&gt; &quot; );\r\n        code = input.nextLine().trim().toUpperCase();\r\n        if (code.equalsIgnoreCase(&quot;n&quot;)) {\r\n            break; // Break out of current while loop\r\n        }\r\n        if (!code.matches(&quot;(?i)[a-z]{3}&quot;)) {\r\n            System.out.println(&quot;Invalid Entry! Try again...\\n&quot;);\r\n        }\r\n        else {\r\n            for (Country cntry : countries) {\r\n                if (cntry.getCode().equalsIgnoreCase(code)) {\r\n                    System.out.println(&quot;Country Name for &quot; + code + &quot; is: --&gt; &quot; + cntry.getName());\r\n                    System.out.println(&quot;The List contains: --&gt; &quot; + cntry.toString());\r\n                    break; // Break out of loop;\r\n                }\r\n            }\r\n        }\r\n        code = &quot;&quot;;\r\n        System.out.println();\r\n    }\r\n        \r\n    // Print the whole list:\r\n    System.out.println(&quot;\\n  The whole list:\\n  ===============&quot;);\r\n    for (Country cntry : countries) {\r\n        System.out.println(cntry.toString());\r\n    }\r\n\r\nThis of course assumes the **Country** class is something like this:\r\n\r\n    public class Country {\r\n        \r\n        private String name;\r\n        private String code;\r\n        \r\n        \r\n        public Country(String name, String code) {\r\n            this.name = name;\r\n            this.code = code;\r\n        }\r\n\r\n        public String getName() {\r\n            return name;\r\n        }\r\n\r\n        public void setName(String name) {\r\n            this.name = name;\r\n        }\r\n\r\n        public String getCode() {\r\n            return code;\r\n        }\r\n\r\n        public void setCode(String code) {\r\n            this.code = code;\r\n        }\r\n\r\n        @Override\r\n        public String toString() {\r\n            return String.format(&quot;%-15s %-5s&quot;, name, code);\r\n        }\r\n    }\r\n\r\nAll in all however, I think it&#39;s just easier to utilize the **[java.util.Locale](https://docs.oracle.com/javase/8/docs/api/java/util/Locale.html)** class to get this information, for example:\r\n\r\n    public static String getISO3CountryCode(String countryName) {\r\n        String countryCode = null;\r\n        String[] isoCountries = java.util.Locale.getISOCountries();\r\n        for (String country : isoCountries) {\r\n            java.util.Locale locale = new java.util.Locale(&quot;en&quot;, country);\r\n            String iso3 = locale.getISO3Country();\r\n            String name = locale.getDisplayCountry();\r\n            if (name.equalsIgnoreCase(countryName)) {\r\n                countryCode = iso3;\r\n            }\r\n        }\r\n        return countryCode;\r\n    }\r\n\r\nA way you might use this method:\r\n\r\n    System.out.println(getISO3CountryCode(&quot;Australia&quot;));\r\n\r\nor \r\n\r\n    String code = getISO3CountryCode(&quot;Australia&quot;)\r\n\r\nThis would ultimately supply you with the ISO-Alpha3 code of `AUS`. If you want the ISO-Alpha2 code (`AU`) then you would change the method code line of: \r\n\r\n    String iso = locale.getISO3Country();\r\n\r\nwith: \r\n\r\n    String iso = locale.getCountry();\r\n\r\nIf you want a list of all country codes...well I think you know what to do.\r\n\r\n","title":"How to get one specific variable from an ArrayList which built for containing many variables?","body":"<p>You have he class Country with the appropriate constructor to instantiate an complete instance of a Country object. What you want is an ArrayList (or List) of Country, for example,</p>\n<pre><code>List&lt;Country&gt; countries = new ArrayList&lt;&gt;();\n</code></pre>\n<p>Now, to fill the ArrayList with instances of Country you can do:</p>\n<pre><code>countries.add(new Country(&quot;Germany&quot;, &quot;GER&quot;));\ncountries.add(new Country(&quot;Sweden&quot;, &quot;SWE&quot;));\ncountries.add(new Country(&quot;Canada&quot;, &quot;CAN&quot;));\ncountries.add(new Country(&quot;United States of America&quot;, &quot;USA&quot;));\n</code></pre>\n<p>To get the ISO3 code from a supplied country name you might do:</p>\n<pre><code>List&lt;Country&gt; countries = new ArrayList&lt;&gt;();\n    countries.add(new Country(&quot;Germany&quot;, &quot;GER&quot;));\n    countries.add(new Country(&quot;Sweden&quot;, &quot;SWE&quot;));\n    countries.add(new Country(&quot;Canada&quot;, &quot;CAN&quot;));\n    countries.add(new Country(&quot;United States&quot;, &quot;USA&quot;));\n    \nScanner input = new Scanner(System.in);\n    \n// Get country code from country name:\nString country = &quot;&quot;;\nwhile(country.isEmpty()) {\n    System.out.println(&quot;Enter a Country name or 'n' for next example:&quot;);\n    System.out.print(&quot;Country: --&gt; &quot; );\n    country = input.nextLine().trim();\n    if (country.equalsIgnoreCase(&quot;n&quot;)) {\n        break;  // Break out of current while loop\n    }\n    if (!country.matches(&quot;(?i)[a-z]+&quot;)) {\n        System.out.println(&quot;Invalid Entry! Try again...\\n&quot;);\n    }\n    else {\n         for (Country cntry : countries) {\n            String ctry = cntry.getName();\n            if (ctry.equalsIgnoreCase(country)) {\n                System.out.println(&quot;Country Code for &quot; + ctry + &quot; is: --&gt; &quot; + cntry.getCode());\n                System.out.println(&quot;The List contains: --&gt; &quot; + cntry.toString());\n                break; // Break out of loop;\n            }\n        }\n    }\n    country = &quot;&quot;;\n    System.out.println();\n}\n    \nSystem.out.println();\n    \n// Get Country Name from Country Code:\nString code = &quot;&quot;;\nwhile(code.isEmpty()) {\n    System.out.println(&quot;Enter a Country Code or 'n' for next example:&quot;);\n    System.out.print(&quot;Code: --&gt; &quot; );\n    code = input.nextLine().trim().toUpperCase();\n    if (code.equalsIgnoreCase(&quot;n&quot;)) {\n        break; // Break out of current while loop\n    }\n    if (!code.matches(&quot;(?i)[a-z]{3}&quot;)) {\n        System.out.println(&quot;Invalid Entry! Try again...\\n&quot;);\n    }\n    else {\n        for (Country cntry : countries) {\n            if (cntry.getCode().equalsIgnoreCase(code)) {\n                System.out.println(&quot;Country Name for &quot; + code + &quot; is: --&gt; &quot; + cntry.getName());\n                System.out.println(&quot;The List contains: --&gt; &quot; + cntry.toString());\n                break; // Break out of loop;\n            }\n        }\n    }\n    code = &quot;&quot;;\n    System.out.println();\n}\n    \n// Print the whole list:\nSystem.out.println(&quot;\\n  The whole list:\\n  ===============&quot;);\nfor (Country cntry : countries) {\n    System.out.println(cntry.toString());\n}\n</code></pre>\n<p>This of course assumes the <strong>Country</strong> class is something like this:</p>\n<pre><code>public class Country {\n    \n    private String name;\n    private String code;\n    \n    \n    public Country(String name, String code) {\n        this.name = name;\n        this.code = code;\n    }\n\n    public String getName() {\n        return name;\n    }\n\n    public void setName(String name) {\n        this.name = name;\n    }\n\n    public String getCode() {\n        return code;\n    }\n\n    public void setCode(String code) {\n        this.code = code;\n    }\n\n    @Override\n    public String toString() {\n        return String.format(&quot;%-15s %-5s&quot;, name, code);\n    }\n}\n</code></pre>\n<p>All in all however, I think it's just easier to utilize the <strong><a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/Locale.html\" rel=\"nofollow noreferrer\">java.util.Locale</a></strong> class to get this information, for example:</p>\n<pre><code>public static String getISO3CountryCode(String countryName) {\n    String countryCode = null;\n    String[] isoCountries = java.util.Locale.getISOCountries();\n    for (String country : isoCountries) {\n        java.util.Locale locale = new java.util.Locale(&quot;en&quot;, country);\n        String iso3 = locale.getISO3Country();\n        String name = locale.getDisplayCountry();\n        if (name.equalsIgnoreCase(countryName)) {\n            countryCode = iso3;\n        }\n    }\n    return countryCode;\n}\n</code></pre>\n<p>A way you might use this method:</p>\n<pre><code>System.out.println(getISO3CountryCode(&quot;Australia&quot;));\n</code></pre>\n<p>or</p>\n<pre><code>String code = getISO3CountryCode(&quot;Australia&quot;)\n</code></pre>\n<p>This would ultimately supply you with the ISO-Alpha3 code of <code>AUS</code>. If you want the ISO-Alpha2 code (<code>AU</code>) then you would change the method code line of:</p>\n<pre><code>String iso = locale.getISO3Country();\n</code></pre>\n<p>with:</p>\n<pre><code>String iso = locale.getCountry();\n</code></pre>\n<p>If you want a list of all country codes...well I think you know what to do.</p>\n"}],"owner":{"account_id":23192558,"reputation":1,"user_id":17288716,"display_name":"Ogulcan Bozkurt"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":885,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1637410415,"creation_date":1637396974,"question_id":70044355,"body_markdown":"I have a class named Country. There is 2 Strings named &quot;name&quot; and &quot;code&quot; in Country class. \r\nI made a constructor that includes both of them. \r\nIn main, I build up a Country with name &quot;germany&quot; and for name parameter,I enter &quot;Germany&quot; and for code, I enter &quot;GER&quot;. \r\n\r\nI also made an ArrayList called countries that works with the type &quot;Country&quot; and I&#39;ve added germany in it. \r\nSo the question is, how can I call name parameter in that ArrayList? ","title":"How to get one specific variable from an ArrayList which built for containing many variables?","body":"<p>I have a class named Country. There is 2 Strings named &quot;name&quot; and &quot;code&quot; in Country class.\nI made a constructor that includes both of them.\nIn main, I build up a Country with name &quot;germany&quot; and for name parameter,I enter &quot;Germany&quot; and for code, I enter &quot;GER&quot;.</p>\n<p>I also made an ArrayList called countries that works with the type &quot;Country&quot; and I've added germany in it.\nSo the question is, how can I call name parameter in that ArrayList?</p>\n"},{"tags":["java","generics","casting","set"],"comments":[{"owner":{"account_id":11381766,"reputation":452,"user_id":8344485,"display_name":"juwil"},"score":0,"creation_date":1637411949,"post_id":70045756,"comment_id":123822232,"body_markdown":"could you tell, why you want to do this? Is it just out of curiosity or something you want to achieve - i.e. is there some way of assigning or using the result of your method?","body":"could you tell, why you want to do this? Is it just out of curiosity or something you want to achieve - i.e. is there some way of assigning or using the result of your method?"},{"owner":{"account_id":162699,"reputation":138060,"user_id":3788176,"accept_rate":54,"display_name":"Andy Turner"},"score":0,"creation_date":1637412004,"post_id":70045756,"comment_id":123822252,"body_markdown":"You can&#39;t safely cast: a set of subclass is not a set of superclass: you can add an instance of superclass to the latter, which also adds to the former (since they are the same set), but now not everything in the former is an instance of subclass. The only entirely safe thing to do is to create a new set using the copy constructor.","body":"You can&#39;t safely cast: a set of subclass is not a set of superclass: you can add an instance of superclass to the latter, which also adds to the former (since they are the same set), but now not everything in the former is an instance of subclass. The only entirely safe thing to do is to create a new set using the copy constructor."},{"owner":{"account_id":8423897,"reputation":1034,"user_id":7505687,"display_name":"Dilermando Lima"},"score":0,"creation_date":1637415267,"post_id":70045756,"comment_id":123822888,"body_markdown":"@juwil I&#39;m trying to create a map implementation on AbstractMap just for studying and I have falled in this stuff. So AbstractMap contains an abstract method that return this set and I need to return my implementation of set entry","body":"@juwil I&#39;m trying to create a map implementation on AbstractMap just for studying and I have falled in this stuff. So AbstractMap contains an abstract method that return this set and I need to return my implementation of set entry"},{"owner":{"account_id":22450291,"reputation":364,"user_id":16653700,"display_name":"Alias Cartellano"},"score":0,"creation_date":1637427807,"post_id":70045756,"comment_id":123825741,"body_markdown":"[Try returning it as a new set.](https://stackoverflow.com/questions/2745899/whats-the-best-to-way-convert-a-set-of-java-objects-to-another-set-of-objects)","body":"<a href=\"https://stackoverflow.com/questions/2745899/whats-the-best-to-way-convert-a-set-of-java-objects-to-another-set-of-objects\">Try returning it as a new set.</a>"},{"owner":{"account_id":8423897,"reputation":1034,"user_id":7505687,"display_name":"Dilermando Lima"},"score":0,"creation_date":1637433271,"post_id":70045756,"comment_id":123827027,"body_markdown":"In short the best way is creating a new instance of object with constructor or addAll method. Is it right?","body":"In short the best way is creating a new instance of object with constructor or addAll method. Is it right?"},{"owner":{"account_id":11381766,"reputation":452,"user_id":8344485,"display_name":"juwil"},"score":0,"creation_date":1637581672,"post_id":70045756,"comment_id":123856180,"body_markdown":"it still depends.. the most useful way would be, to simply change the signature of your method getSetMapEntry and then return your set without any cast:     public Set&lt;? extends Map.Entry&lt;String, Object&gt;&gt; getSetMapEntry() {\n        return entrySet;}","body":"it still depends.. the most useful way would be, to simply change the signature of your method getSetMapEntry and then return your set without any cast:     public Set&lt;? extends Map.Entry&lt;String, Object&gt;&gt; getSetMapEntry() {         return entrySet;}"}],"owner":{"account_id":8423897,"reputation":1034,"user_id":7505687,"display_name":"Dilermando Lima"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":191,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1637410015,"creation_date":1637410015,"question_id":70045756,"body_markdown":"is there any way to cast `Set&lt;Subclass&gt;` to `Set&lt;Superclass&gt;` ?\r\n\r\nI have tried this 3 ways bellow? is there a better way or some best practice for this?\r\n\r\n```\r\n\r\n\r\n// class extends superclass\r\nfinal class MapEntryCustom implements Map.Entry&lt;String,Object&gt; {\r\n        // all implementation\r\n}\r\n\r\n// var to be casted\r\nprivate Set&lt;MapEntryCustom&gt; entrySet = new HashSet&lt;&gt;();\r\n\r\n// 3 trying way of casting\r\npublic Set&lt;Entry&lt;String, Object&gt;&gt; getSetMapEntry() {\r\n   \r\n   return (Set&lt;Entry&lt;String, Object&gt;&gt;) entrySet; // error cannot cast\r\n   \r\n   return (Set&lt;? extends Entry&lt;String, Object&gt;&gt;) entrySet; // error cannot cast\r\n   \r\n   return (Set&lt;Entry&lt;String, Object&gt;&gt;) (Set&lt;? extends Entry&lt;String, Object&gt;&gt;) entrySet; // warning type safe\r\n\r\n}\r\n\r\n\r\n```","title":"Cast Set subclass to Set superclass java","body":"<p>is there any way to cast <code>Set&lt;Subclass&gt;</code> to <code>Set&lt;Superclass&gt;</code> ?</p>\n<p>I have tried this 3 ways bellow? is there a better way or some best practice for this?</p>\n<pre><code>\n\n// class extends superclass\nfinal class MapEntryCustom implements Map.Entry&lt;String,Object&gt; {\n        // all implementation\n}\n\n// var to be casted\nprivate Set&lt;MapEntryCustom&gt; entrySet = new HashSet&lt;&gt;();\n\n// 3 trying way of casting\npublic Set&lt;Entry&lt;String, Object&gt;&gt; getSetMapEntry() {\n   \n   return (Set&lt;Entry&lt;String, Object&gt;&gt;) entrySet; // error cannot cast\n   \n   return (Set&lt;? extends Entry&lt;String, Object&gt;&gt;) entrySet; // error cannot cast\n   \n   return (Set&lt;Entry&lt;String, Object&gt;&gt;) (Set&lt;? extends Entry&lt;String, Object&gt;&gt;) entrySet; // warning type safe\n\n}\n\n\n</code></pre>\n"},{"tags":["java","multithreading","apache-httpcomponents"],"comments":[{"owner":{"account_id":13429972,"reputation":1807,"user_id":9690075,"display_name":"zysaaa"},"score":0,"creation_date":1637291297,"post_id":70022369,"comment_id":123793051,"body_markdown":"You can take a look at [performance](https://hc.apache.org/httpclient-legacy/performance.html)","body":"You can take a look at <a href=\"https://hc.apache.org/httpclient-legacy/performance.html\" rel=\"nofollow noreferrer\">performance</a>"},{"owner":{"account_id":133909,"reputation":26610,"user_id":335638,"display_name":"ok2c"},"score":0,"creation_date":1637409485,"post_id":70022369,"comment_id":123821735,"body_markdown":"I would really avoid converting HTTP response to a string. This looks wasteful and inefficient.","body":"I would really avoid converting HTTP response to a string. This looks wasteful and inefficient."}],"answers":[{"tags":[],"owner":{"account_id":133909,"reputation":26610,"user_id":335638,"display_name":"ok2c"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1637409823,"creation_date":1637409314,"answer_id":70045673,"question_id":70022369,"body_markdown":"1. The use of HttpClient instance as a singleton per distinct HTTP service is correct and is in line with the Apache HttpClient best practices. It should _not_ be static, though.\r\n\r\n   http://hc.apache.org/httpcomponents-client-5.1.x/migration-guide/preparation.html\r\n\r\n1. One should close HttpClient when releasing the HTTP service. In your case `ApacheHttpClient` should implement `Closeable` and close the internal instance of `CloseableHttpClient` in its `#close` method.\r\n\r\n1. You probably should not, but it really depends on how exactly your application deals with request execution.","title":"Best way for apache HttpClients using in a multithreaded environment","body":"<ol>\n<li><p>The use of HttpClient instance as a singleton per distinct HTTP service is correct and is in line with the Apache HttpClient best practices. It should <em>not</em> be static, though.</p>\n<p><a href=\"http://hc.apache.org/httpcomponents-client-5.1.x/migration-guide/preparation.html\" rel=\"nofollow noreferrer\">http://hc.apache.org/httpcomponents-client-5.1.x/migration-guide/preparation.html</a></p>\n</li>\n<li><p>One should close HttpClient when releasing the HTTP service. In your case <code>ApacheHttpClient</code> should implement <code>Closeable</code> and close the internal instance of <code>CloseableHttpClient</code> in its <code>#close</code> method.</p>\n</li>\n<li><p>You probably should not, but it really depends on how exactly your application deals with request execution.</p>\n</li>\n</ol>\n"}],"owner":{"account_id":16506411,"reputation":1143,"user_id":11926338,"display_name":"Pavel Petrashov"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1046,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"accepted_answer_id":70045673,"answer_count":1,"score":4,"last_activity_date":1637409823,"creation_date":1637248704,"question_id":70022369,"body_markdown":"I need to create a service on the server-side for sending HTTP requests. It works like this:\r\n\r\n    1. Client sends a request to the server\r\n    2. Server uses singleton service for calling 3rd-party API via HTTP.\r\n    3. API returns the response\r\n    4. Server process this response and return it to the client\r\n\r\nIt is a synchronized process.\r\n\r\nI created service:\r\n\r\n    public class ApacheHttpClient {\r\n    \r\n        private final static CloseableHttpClient client = HttpClients.createDefault();\r\n    \r\n        public String sendPost(String serverUrl, String body) {\r\n            try {\r\n                HttpPost httpPost = new HttpPost(serverUrl);\r\n                httpPost.setEntity(new StringEntity(body));\r\n               \r\n                CloseableHttpResponse response = client.execute(httpPost);\r\n    \r\n                String responseAsString = EntityUtils.toString(response.getEntity());\r\n    \r\n                response.close();\r\n    \r\n                return responseAsString;\r\n            } catch (IOException e) {\r\n                throw new RestException(e);\r\n            }\r\n        }\r\n\r\n`ApacheHttpClient` is a singleton in my system. `CloseableHttpClient client` is a singleton too.\r\n\r\nQuestion 1: Is it correct to use one instance of `CloseableHttpClient client` or I should create a new instance for each request? \r\nQuestion 2: When I should close the client?\r\nQuestion 3: This client can process only 2 connections in one time period. Should I use an executor?","title":"Best way for apache HttpClients using in a multithreaded environment","body":"<p>I need to create a service on the server-side for sending HTTP requests. It works like this:</p>\n<pre><code>1. Client sends a request to the server\n2. Server uses singleton service for calling 3rd-party API via HTTP.\n3. API returns the response\n4. Server process this response and return it to the client\n</code></pre>\n<p>It is a synchronized process.</p>\n<p>I created service:</p>\n<pre><code>public class ApacheHttpClient {\n\n    private final static CloseableHttpClient client = HttpClients.createDefault();\n\n    public String sendPost(String serverUrl, String body) {\n        try {\n            HttpPost httpPost = new HttpPost(serverUrl);\n            httpPost.setEntity(new StringEntity(body));\n           \n            CloseableHttpResponse response = client.execute(httpPost);\n\n            String responseAsString = EntityUtils.toString(response.getEntity());\n\n            response.close();\n\n            return responseAsString;\n        } catch (IOException e) {\n            throw new RestException(e);\n        }\n    }\n</code></pre>\n<p><code>ApacheHttpClient</code> is a singleton in my system. <code>CloseableHttpClient client</code> is a singleton too.</p>\n<p>Question 1: Is it correct to use one instance of <code>CloseableHttpClient client</code> or I should create a new instance for each request?\nQuestion 2: When I should close the client?\nQuestion 3: This client can process only 2 connections in one time period. Should I use an executor?</p>\n"},{"tags":["java","spring-webflux","reactive","reactor"],"comments":[{"owner":{"account_id":7214703,"reputation":309,"user_id":5507619,"display_name":"Neepsnikeep"},"score":0,"creation_date":1632816926,"post_id":69121443,"comment_id":122588875,"body_markdown":"Do I get it right that you want the 60 seconds timeout process to update your fallback value, and after 15 seconds you return the fallback value no matter if the first async call is done or not?","body":"Do I get it right that you want the 60 seconds timeout process to update your fallback value, and after 15 seconds you return the fallback value no matter if the first async call is done or not?"},{"owner":{"account_id":357454,"reputation":77335,"user_id":697630,"accept_rate":84,"display_name":"Edwin Dalorzo"},"score":0,"creation_date":1632826683,"post_id":69121443,"comment_id":122592910,"body_markdown":"I believe the major problem with your design is that timeout implies cancellation as well. So, when your 15-secs mono times out and falls back to your default behavior, this automatically cancelled your 60-secs mono. That being said, the pattern of returning something to the client while you wait for some pending processing sounds smelly to me.","body":"I believe the major problem with your design is that timeout implies cancellation as well. So, when your 15-secs mono times out and falls back to your default behavior, this automatically cancelled your 60-secs mono. That being said, the pattern of returning something to the client while you wait for some pending processing sounds smelly to me."}],"answers":[{"tags":[],"owner":{"account_id":3273937,"reputation":114855,"user_id":2756547,"accept_rate":75,"display_name":"Artem Bilan"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1631203787,"creation_date":1631203787,"answer_id":69121543,"question_id":69121443,"body_markdown":"I think this one should be enough for you without that wrapping:\r\n\r\n\t/**\r\n\t * Switch to a fallback {@link Mono} in case no item arrives within the given {@link Duration}.\r\n\t *\r\n\t * &lt;p&gt;\r\n\t * If the fallback {@link Mono} is null, signal a {@link TimeoutException} instead.\r\n\t *\r\n\t * &lt;p&gt;\r\n\t * &lt;img class=&quot;marble&quot; src=&quot;doc-files/marbles/timeoutFallbackForMono.svg&quot; alt=&quot;&quot;&gt;\r\n\t *\r\n\t * @param timeout the timeout before the onNext signal from this {@link Mono}\r\n\t * @param fallback the fallback {@link Mono} to subscribe to when a timeout occurs\r\n\t *\r\n\t * @return a {@link Mono} that will fallback to a different {@link Mono} in case of timeout\r\n\t */\r\n\tpublic final Mono&lt;T&gt; timeout(Duration timeout, Mono&lt;? extends T&gt; fallback) {\r\n\r\nSo, if your main `Mono` does not return in time, your go to desired fallback. That&#39;s it: I don&#39;t anything else to overcomplicate the logic.","title":"How to wrap a Mono in an outer Mono with timeout?","body":"<p>I think this one should be enough for you without that wrapping:</p>\n<pre><code>/**\n * Switch to a fallback {@link Mono} in case no item arrives within the given {@link Duration}.\n *\n * &lt;p&gt;\n * If the fallback {@link Mono} is null, signal a {@link TimeoutException} instead.\n *\n * &lt;p&gt;\n * &lt;img class=&quot;marble&quot; src=&quot;doc-files/marbles/timeoutFallbackForMono.svg&quot; alt=&quot;&quot;&gt;\n *\n * @param timeout the timeout before the onNext signal from this {@link Mono}\n * @param fallback the fallback {@link Mono} to subscribe to when a timeout occurs\n *\n * @return a {@link Mono} that will fallback to a different {@link Mono} in case of timeout\n */\npublic final Mono&lt;T&gt; timeout(Duration timeout, Mono&lt;? extends T&gt; fallback) {\n</code></pre>\n<p>So, if your main <code>Mono</code> does not return in time, your go to desired fallback. That's it: I don't anything else to overcomplicate the logic.</p>\n"},{"tags":[],"owner":{"account_id":1229539,"reputation":82701,"user_id":1194415,"accept_rate":76,"display_name":"membersound"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1632842125,"creation_date":1632842125,"answer_id":69364356,"question_id":69121443,"body_markdown":"I did not find a way with pure `Mono`s, but one with `Future` as follows:\r\n\r\n    List&lt;String&gt; results = Flux.fromIterable(reqs)\r\n    \t.flatMap(req -&gt; Mono.fromCallable(() -&gt; {\r\n    \t\t\ttry {\r\n    \t\t\t\treturn longRunningProcess(req)\r\n                             //inner timeout continues even if outer future is timed out\r\n    \t\t\t\t\t\t.timeout(Duration.ofMinutes(60))\r\n    \t\t\t\t\t\t.doOnSuccess(rsp -&gt; {\r\n                                //process result up to 1 minute\r\n                            }\r\n    \t\t\t\t\t\t.toFuture()\r\n    \t\t\t\t\t\t.get(15, TimeUnit.SECONDS); //outer short cirtuit timeout\r\n    \t\t\t} catch (Exception e) {\r\n    \t\t\t    //on future timeout (15s)\r\n    \t\t\t\treturn getFallbackResult();\r\n    \t\t\t}\r\n    \t\t})\r\n    \t    .subscribeOn(Schedulers.boundedElastic()))\r\n    \t.collectList()\r\n    \t.block();\r\n\r\nThough it works, I&#39;m still open for improvements on how to achieve the same with reactive monos only.","title":"How to wrap a Mono in an outer Mono with timeout?","body":"<p>I did not find a way with pure <code>Mono</code>s, but one with <code>Future</code> as follows:</p>\n<pre><code>List&lt;String&gt; results = Flux.fromIterable(reqs)\n    .flatMap(req -&gt; Mono.fromCallable(() -&gt; {\n            try {\n                return longRunningProcess(req)\n                         //inner timeout continues even if outer future is timed out\n                        .timeout(Duration.ofMinutes(60))\n                        .doOnSuccess(rsp -&gt; {\n                            //process result up to 1 minute\n                        }\n                        .toFuture()\n                        .get(15, TimeUnit.SECONDS); //outer short cirtuit timeout\n            } catch (Exception e) {\n                //on future timeout (15s)\n                return getFallbackResult();\n            }\n        })\n        .subscribeOn(Schedulers.boundedElastic()))\n    .collectList()\n    .block();\n</code></pre>\n<p>Though it works, I'm still open for improvements on how to achieve the same with reactive monos only.</p>\n"},{"tags":[],"owner":{"account_id":7023642,"reputation":131,"user_id":5381942,"display_name":"Andrey Novikov"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1637409724,"creation_date":1637409724,"answer_id":70045726,"question_id":69121443,"body_markdown":"Blocking is against reactive concept, I&#39;d recommend to look at\r\n\r\n```\r\npublic static &lt;T&gt; Mono&lt;T&gt; create(Consumer&lt;MonoSink&lt;T&gt;&gt; callback)\r\n```\r\n\r\nSo transformed example from your question:\r\n\r\n```\r\nMono.create(sink -&gt; {\r\n                    service.longRunningProcess()\r\n                            .timeout(Duration.ofMinutes(1))\r\n                            .subscribeOn(Schedulers.boundedElastic())\r\n                            .subscribe(\r\n                                    res -&gt; {\r\n                                        //process the result\r\n                                        //this code would be reached anyway if not error\r\n                                        sink.success(res);\r\n                                    },\r\n                                    e -&gt; {\r\n                                        //process error\r\n                                        //this code would be reached anyway error\r\n                                        sink.error(e);\r\n                                    });\r\n                })\r\n                .timeout(Duration.ofSeconds(15))\r\n                .onErrorResume(e -&gt; {\r\n                    return Mono.just(getFallbackResult());\r\n                })\r\n                .subscribe(result -&gt; {/* process the result */});\r\n```\r\n\r\nso even after 15 seconds and getting the fallback result, longRunningProcess still will be processed","title":"How to wrap a Mono in an outer Mono with timeout?","body":"<p>Blocking is against reactive concept, I'd recommend to look at</p>\n<pre><code>public static &lt;T&gt; Mono&lt;T&gt; create(Consumer&lt;MonoSink&lt;T&gt;&gt; callback)\n</code></pre>\n<p>So transformed example from your question:</p>\n<pre><code>Mono.create(sink -&gt; {\n                    service.longRunningProcess()\n                            .timeout(Duration.ofMinutes(1))\n                            .subscribeOn(Schedulers.boundedElastic())\n                            .subscribe(\n                                    res -&gt; {\n                                        //process the result\n                                        //this code would be reached anyway if not error\n                                        sink.success(res);\n                                    },\n                                    e -&gt; {\n                                        //process error\n                                        //this code would be reached anyway error\n                                        sink.error(e);\n                                    });\n                })\n                .timeout(Duration.ofSeconds(15))\n                .onErrorResume(e -&gt; {\n                    return Mono.just(getFallbackResult());\n                })\n                .subscribe(result -&gt; {/* process the result */});\n</code></pre>\n<p>so even after 15 seconds and getting the fallback result, longRunningProcess still will be processed</p>\n"}],"owner":{"account_id":1229539,"reputation":82701,"user_id":1194415,"accept_rate":76,"display_name":"membersound"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1386,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":3,"score":1,"last_activity_date":1637409724,"creation_date":1631203392,"question_id":69121443,"body_markdown":"I have a method that returns an async `Mono`. It could be a long running webservice call, database lookup, or whatever.\r\n\r\nNow I want to set a maximum timeout of that long running method of 60s. After that timeout, the result can be neglected.\r\n\r\nFurther, if the result was not received within 15s, I already want to return with a fallback value. **Anyways** the long running call should continue up to 60s and being process async if result was recevied within this 60s (even though the main thread then already answered with the fallback value).\r\n\r\nQuestion: is it correct to wrap the `Mono` inside another `Mono` for this?\r\n\r\nExample:\r\n\r\n    public class Service {\r\n        public Mono longRunningProcess() {\r\n            //...\r\n        }\r\n    }\r\n    \r\n    Mono.just(\r\n        service.longRunningProcess()\r\n            .timeout(Duration.ofMinutes(1))\r\n            .doOnSuccess(rsp -&gt; {\r\n                //process result up to 1 minute\r\n            }\r\n            .block()\r\n        )\r\n        .timeout(Duration.ofSeconds(15)\r\n        .onErrorResume(ex -&gt; {\r\n            //provide fallback after 15s already\r\n            return Mono.just(Mono.just(getFallbackResult()));\r\n        }\r\n        .block();","title":"How to wrap a Mono in an outer Mono with timeout?","body":"<p>I have a method that returns an async <code>Mono</code>. It could be a long running webservice call, database lookup, or whatever.</p>\n<p>Now I want to set a maximum timeout of that long running method of 60s. After that timeout, the result can be neglected.</p>\n<p>Further, if the result was not received within 15s, I already want to return with a fallback value. <strong>Anyways</strong> the long running call should continue up to 60s and being process async if result was recevied within this 60s (even though the main thread then already answered with the fallback value).</p>\n<p>Question: is it correct to wrap the <code>Mono</code> inside another <code>Mono</code> for this?</p>\n<p>Example:</p>\n<pre><code>public class Service {\n    public Mono longRunningProcess() {\n        //...\n    }\n}\n\nMono.just(\n    service.longRunningProcess()\n        .timeout(Duration.ofMinutes(1))\n        .doOnSuccess(rsp -&gt; {\n            //process result up to 1 minute\n        }\n        .block()\n    )\n    .timeout(Duration.ofSeconds(15)\n    .onErrorResume(ex -&gt; {\n        //provide fallback after 15s already\n        return Mono.just(Mono.just(getFallbackResult()));\n    }\n    .block();\n</code></pre>\n"},{"tags":["java","android","sqlite","listview","onitemclick"],"comments":[{"owner":{"account_id":23130145,"reputation":1,"user_id":17235295,"display_name":"Zed Hakdog"},"score":0,"creation_date":1637470162,"post_id":70045725,"comment_id":123832606,"body_markdown":"@AliasCartellano how?","body":"@AliasCartellano how?"},{"owner":{"account_id":22450291,"reputation":364,"user_id":16653700,"display_name":"Alias Cartellano"},"score":0,"creation_date":1637689365,"post_id":70045725,"comment_id":123891725,"body_markdown":"Your definition fragment is where the word and definition are supposed to appear right?Try using [logcat](https://developer.android.com/studio/debug/am-logcat#WriteLogs) to log the word in the definition fragment and in `getWordForAll`.","body":"Your definition fragment is where the word and definition are supposed to appear right?Try using <a href=\"https://developer.android.com/studio/debug/am-logcat#WriteLogs\" rel=\"nofollow noreferrer\">logcat</a> to log the word in the definition fragment and in <code>getWordForAll</code>."},{"owner":{"account_id":22450291,"reputation":364,"user_id":16653700,"display_name":"Alias Cartellano"},"score":0,"creation_date":1638046270,"post_id":70045725,"comment_id":123984857,"body_markdown":"What progress have you made on this?","body":"What progress have you made on this?"}],"owner":{"account_id":23130145,"reputation":1,"user_id":17235295,"display_name":"Zed Hakdog"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":96,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1637409722,"creation_date":1637409722,"question_id":70045725,"body_markdown":"I am new to android and I&#39;m developing a dictionary with multiple languages joined in one listview basically I&#39;m trying to do a search all from all tables but if I clicked a word that has on table2 it displays an empty word and definition in the fragment.\r\n\r\nThis is from DbHelperClass\r\n\r\n    public Word getWordForAll(String word, int dicType) {\r\n        String tableName1 = getAllTableName1(dicType);\r\n        String tableName2 = getAllTableName2(dicType);\r\n        String q = &quot;SELECT * FROM &quot;+ tableName1 +&quot; WHERE word = ? UNION SELECT * FROM &quot; + tableName2 + &quot; WHERE word = ?&quot;;\r\n        Cursor result = mDB.rawQuery(q, new String[]{word});\r\n\r\n        Word word1 = new Word();\r\n        while (result.moveToNext()) {\r\n            word1.word = result.getString(result.getColumnIndex(COL_WORD));\r\n            word1.definition = result.getString(result.getColumnIndex(COL_DEFINITION));\r\n        }\r\n        return word1;\r\n    }\r\n\r\n\r\n    public String getTableName(int dicType) {\r\n\r\n        String tableName = &quot;&quot;;\r\n\r\n        if (dicType == R.id.language1) {\r\n            tableName = lang1;\r\n        } else if (dicType == R.id.language2) {\r\n            tableName = lang2;\r\n        } \r\n        return tableName;\r\n    }\r\n\r\n    //same for tableName2\r\n    public String getAllTableName1(int dicType) {\r\n\r\n        String tableName1 = &quot;&quot;;\r\n\r\n        if (dicType == R.id.action_all) {\r\n            tableName1 = lang1;\r\n        }\r\n        return tableName1;\r\n    }\r\n\r\n\r\nThis is from the definition fragment\r\n\r\n    @Override\r\n    public void onViewCreated(@NonNull View view, @Nullable Bundle savedInstanceState) {\r\n        super.onViewCreated(view, savedInstanceState);\r\n        setHasOptionsMenu(true);\r\n        \r\n        tvWord = (TextView) view.findViewById(R.id.tvWord);\r\n        tvDefinition = (TextView) view.findViewById(R.id.tvDefinition);\r\n        \r\n        //here mDicType is integer value from onOptionItemSelected in MainActivity\r\n        if (mDicType == R.id.action_all){\r\n            final Word word = mDBHelper.getWordForAll(value, mDicType);\r\n            tvWord.setText(word.word);\r\n            tvDefinition.setText(word.definition);\r\n\r\n            Word bookmarkWord = mDBHelper.getWordFromBookmark(value);\r\n            int isMark = bookmarkWord == null ? 0 : 1;\r\n            btnBookmark.setTag(isMark);\r\n\r\n            int icon = bookmarkWord == null ? R.drawable.bookmark:R.drawable.bookmarked;\r\n            btnBookmark.setImageResource(icon);\r\n\r\n            btnBookmark.setOnClickListener(new View.OnClickListener() {\r\n                @Override\r\n                public void onClick(View v) {\r\n                    int i = (int) btnBookmark.getTag();\r\n                    if (i == 0){\r\n                        btnBookmark.setImageResource(R.drawable.bookmarked);\r\n                        btnBookmark.setTag(1);\r\n                        mDBHelper.addBookmark(word);\r\n                    }else if (i == 1){\r\n                        btnBookmark.setImageResource(R.drawable.bookmark);\r\n                        btnBookmark.setTag(0);\r\n                        mDBHelper.removeBookmark(word);\r\n                    }\r\n                }\r\n            });\r\n        } else {\r\n            final Word word = mDBHelper.getWord(value,mDicType);\r\n            tvWord.setText(word.word);\r\n            tvDefinition.setText(word.definition);\r\n\r\n            Word bookmarkWord = mDBHelper.getWordFromBookmark(value);\r\n            int isMark = bookmarkWord == null ? 0 : 1;\r\n            btnBookmark.setTag(isMark);\r\n\r\n            int icon = bookmarkWord == null ? R.drawable.bookmark:R.drawable.bookmarked;\r\n            btnBookmark.setImageResource(icon);\r\n\r\n            btnBookmark.setOnClickListener(new View.OnClickListener() {\r\n                @Override\r\n                public void onClick(View v) {\r\n                    int i = (int) btnBookmark.getTag();\r\n                    if (i == 0){\r\n                        btnBookmark.setImageResource(R.drawable.bookmarked);\r\n                        btnBookmark.setTag(1);\r\n                        mDBHelper.addBookmark(word);\r\n                    }else if (i == 1){\r\n                        btnBookmark.setImageResource(R.drawable.bookmark);\r\n                        btnBookmark.setTag(0);\r\n                        mDBHelper.removeBookmark(word);\r\n                    }\r\n                }\r\n            });\r\n        }\r\n\r\n    }\r\n\r\nThis is from my Main Activity\r\n\r\n    @Override\r\n    public boolean onOptionsItemSelected(MenuItem item) {\r\n        int id = item.getItemId();\r\n\r\n        if (id == R.id.language1) {\r\n            Global.saveState(this, &quot;dic_type&quot;, String.valueOf(id));\r\n            ArrayList&lt;String&gt; source = dbHelper.getWord(id);\r\n            dictionaryFragment.resetDataSource(source);\r\n            return true;\r\n        } else if (id == R.id.language2) {\r\n            Global.saveState(this, &quot;dic_type&quot;, String.valueOf(id));\r\n            ArrayList&lt;String&gt; source = dbHelper.getWord(id);\r\n            dictionaryFragment.resetDataSource(source);\r\n            return true;\r\n        } else if (id == R.id.action_all) {\r\n            Global.saveState(this, &quot;dic_type&quot;, String.valueOf(id));\r\n            ArrayList&lt;String&gt; source = dbHelper.getWordAll(id);\r\n            dictionaryFragment.resetDataSource(source);\r\n            return true;\r\n        }\r\n\r\n        return super.onOptionsItemSelected(item);\r\n    }\r\n\r\nAnd on onCreateOptionsMenu\r\n\r\n    @Override\r\n    public boolean onCreateOptionsMenu(Menu menu) {\r\n        super.onCreateOptionsMenu(menu);\r\n        // Inflate the menu; this adds items to the action bar if it is present.\r\n        getMenuInflater().inflate(R.menu.main, menu);\r\n        menuSetting = menu.findItem(R.id.action_settings);\r\n\r\n        String id = Global.getState(this, &quot;dic_type&quot;);\r\n\r\n        if (id != null)\r\n            onOptionsItemSelected(menu.findItem(Integer.valueOf(id)));\r\n        else{\r\n            ArrayList&lt;String&gt; source = dbHelper.getWord(R.id.language1);\r\n            dictionaryFragment.resetDataSource(source);\r\n        }\r\n        return true;\r\n    }","title":"SQL of union Tables second table displays empty values onItemClick in listview","body":"<p>I am new to android and I'm developing a dictionary with multiple languages joined in one listview basically I'm trying to do a search all from all tables but if I clicked a word that has on table2 it displays an empty word and definition in the fragment.</p>\n<p>This is from DbHelperClass</p>\n<pre><code>public Word getWordForAll(String word, int dicType) {\n    String tableName1 = getAllTableName1(dicType);\n    String tableName2 = getAllTableName2(dicType);\n    String q = &quot;SELECT * FROM &quot;+ tableName1 +&quot; WHERE word = ? UNION SELECT * FROM &quot; + tableName2 + &quot; WHERE word = ?&quot;;\n    Cursor result = mDB.rawQuery(q, new String[]{word});\n\n    Word word1 = new Word();\n    while (result.moveToNext()) {\n        word1.word = result.getString(result.getColumnIndex(COL_WORD));\n        word1.definition = result.getString(result.getColumnIndex(COL_DEFINITION));\n    }\n    return word1;\n}\n\n\npublic String getTableName(int dicType) {\n\n    String tableName = &quot;&quot;;\n\n    if (dicType == R.id.language1) {\n        tableName = lang1;\n    } else if (dicType == R.id.language2) {\n        tableName = lang2;\n    } \n    return tableName;\n}\n\n//same for tableName2\npublic String getAllTableName1(int dicType) {\n\n    String tableName1 = &quot;&quot;;\n\n    if (dicType == R.id.action_all) {\n        tableName1 = lang1;\n    }\n    return tableName1;\n}\n</code></pre>\n<p>This is from the definition fragment</p>\n<pre><code>@Override\npublic void onViewCreated(@NonNull View view, @Nullable Bundle savedInstanceState) {\n    super.onViewCreated(view, savedInstanceState);\n    setHasOptionsMenu(true);\n    \n    tvWord = (TextView) view.findViewById(R.id.tvWord);\n    tvDefinition = (TextView) view.findViewById(R.id.tvDefinition);\n    \n    //here mDicType is integer value from onOptionItemSelected in MainActivity\n    if (mDicType == R.id.action_all){\n        final Word word = mDBHelper.getWordForAll(value, mDicType);\n        tvWord.setText(word.word);\n        tvDefinition.setText(word.definition);\n\n        Word bookmarkWord = mDBHelper.getWordFromBookmark(value);\n        int isMark = bookmarkWord == null ? 0 : 1;\n        btnBookmark.setTag(isMark);\n\n        int icon = bookmarkWord == null ? R.drawable.bookmark:R.drawable.bookmarked;\n        btnBookmark.setImageResource(icon);\n\n        btnBookmark.setOnClickListener(new View.OnClickListener() {\n            @Override\n            public void onClick(View v) {\n                int i = (int) btnBookmark.getTag();\n                if (i == 0){\n                    btnBookmark.setImageResource(R.drawable.bookmarked);\n                    btnBookmark.setTag(1);\n                    mDBHelper.addBookmark(word);\n                }else if (i == 1){\n                    btnBookmark.setImageResource(R.drawable.bookmark);\n                    btnBookmark.setTag(0);\n                    mDBHelper.removeBookmark(word);\n                }\n            }\n        });\n    } else {\n        final Word word = mDBHelper.getWord(value,mDicType);\n        tvWord.setText(word.word);\n        tvDefinition.setText(word.definition);\n\n        Word bookmarkWord = mDBHelper.getWordFromBookmark(value);\n        int isMark = bookmarkWord == null ? 0 : 1;\n        btnBookmark.setTag(isMark);\n\n        int icon = bookmarkWord == null ? R.drawable.bookmark:R.drawable.bookmarked;\n        btnBookmark.setImageResource(icon);\n\n        btnBookmark.setOnClickListener(new View.OnClickListener() {\n            @Override\n            public void onClick(View v) {\n                int i = (int) btnBookmark.getTag();\n                if (i == 0){\n                    btnBookmark.setImageResource(R.drawable.bookmarked);\n                    btnBookmark.setTag(1);\n                    mDBHelper.addBookmark(word);\n                }else if (i == 1){\n                    btnBookmark.setImageResource(R.drawable.bookmark);\n                    btnBookmark.setTag(0);\n                    mDBHelper.removeBookmark(word);\n                }\n            }\n        });\n    }\n\n}\n</code></pre>\n<p>This is from my Main Activity</p>\n<pre><code>@Override\npublic boolean onOptionsItemSelected(MenuItem item) {\n    int id = item.getItemId();\n\n    if (id == R.id.language1) {\n        Global.saveState(this, &quot;dic_type&quot;, String.valueOf(id));\n        ArrayList&lt;String&gt; source = dbHelper.getWord(id);\n        dictionaryFragment.resetDataSource(source);\n        return true;\n    } else if (id == R.id.language2) {\n        Global.saveState(this, &quot;dic_type&quot;, String.valueOf(id));\n        ArrayList&lt;String&gt; source = dbHelper.getWord(id);\n        dictionaryFragment.resetDataSource(source);\n        return true;\n    } else if (id == R.id.action_all) {\n        Global.saveState(this, &quot;dic_type&quot;, String.valueOf(id));\n        ArrayList&lt;String&gt; source = dbHelper.getWordAll(id);\n        dictionaryFragment.resetDataSource(source);\n        return true;\n    }\n\n    return super.onOptionsItemSelected(item);\n}\n</code></pre>\n<p>And on onCreateOptionsMenu</p>\n<pre><code>@Override\npublic boolean onCreateOptionsMenu(Menu menu) {\n    super.onCreateOptionsMenu(menu);\n    // Inflate the menu; this adds items to the action bar if it is present.\n    getMenuInflater().inflate(R.menu.main, menu);\n    menuSetting = menu.findItem(R.id.action_settings);\n\n    String id = Global.getState(this, &quot;dic_type&quot;);\n\n    if (id != null)\n        onOptionsItemSelected(menu.findItem(Integer.valueOf(id)));\n    else{\n        ArrayList&lt;String&gt; source = dbHelper.getWord(R.id.language1);\n        dictionaryFragment.resetDataSource(source);\n    }\n    return true;\n}\n</code></pre>\n"},{"tags":["java","gerrit"],"comments":[{"owner":{"account_id":6633990,"reputation":350,"user_id":5121698,"display_name":"B.Kingsun"},"score":0,"creation_date":1637411010,"post_id":70045686,"comment_id":123822027,"body_markdown":"Addition info : when version down to 3.7.1 (next to 3.4.0) ,Gerrit runs well. Upgrade to 3.4.0 ,can not start. Neither 3.4.1.","body":"Addition info : when version down to 3.7.1 (next to 3.4.0) ,Gerrit runs well. Upgrade to 3.4.0 ,can not start. Neither 3.4.1."},{"owner":{"account_id":6633990,"reputation":350,"user_id":5121698,"display_name":"B.Kingsun"},"score":0,"creation_date":1637716762,"post_id":70045686,"comment_id":123899574,"body_markdown":"I  found Gerrit 3.4.x is not compatiable with MessageQueue plugin.I remove it and server back to available.","body":"I  found Gerrit 3.4.x is not compatiable with MessageQueue plugin.I remove it and server back to available."}],"owner":{"account_id":6633990,"reputation":350,"user_id":5121698,"display_name":"B.Kingsun"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":198,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1637409422,"creation_date":1637409422,"question_id":70045686,"body_markdown":"I came into an error of NoClassFound Error when I exec cmd &#39;bash gerrit.sh run&#39;.\r\n\r\nBefore that I have make my Gerrit version upgraded from 3.2.3 to 3.4.1 by \r\n\r\n``` jar -jar gerrit.3.4.1.jar init  -d  ${MY-GerritSite}```.\r\n\r\nAnd it returned Initialized success.\r\n\r\nHere is my Error log when start Gerrit server.\r\n\r\nAny help is appreciate.\r\nThank you.\r\n\r\n\r\n```[main] ERROR com.google.gerrit.pgm.Daemon : Unable to start daemon\r\ncom.google.inject.CreationException: Unable to create injector, see the following errors:\r\n\r\n1) [Guice/ErrorInjectingConstructor]: NoClassDefFoundError: com/google/gerrit/server/change/ChangeKeyAdapter\r\n  at Log4jMessageLogger.&lt;init&gt;(Log4jMessageLogger.java:38)\r\n  at Log4jMessageLogger.class(Log4jMessageLogger.java:38)\r\n  while locating Log4jMessageLogger\r\n  while locating LifecycleListener annotated with @UniqueAnnotations$Internal(value=59)\r\n\r\nLearn more:\r\n  https://github.com/google/guice/wiki/ERROR_INJECTING_CONSTRUCTOR\r\nCaused by: NoClassDefFoundError: com/google/gerrit/server/change/ChangeKeyAdapter\r\n        at EventGsonProvider.get(EventGsonProvider.java:80)\r\n        at Log4jMessageLogger.&lt;init&gt;(Log4jMessageLogger.java:40)\r\n        at Log4jMessageLogger$$FastClassByGuice$$745685493.GUICE$TRAMPOLINE(&lt;generated&gt;)\r\n        at Log4jMessageLogger$$FastClassByGuice$$745685493.apply(&lt;generated&gt;)\r\n        at DefaultConstructionProxyFactory$FastClassProxy.newInstance(DefaultConstructionProxyFactory.java:82)\r\n        at ConstructorInjector.provision(ConstructorInjector.java:114)\r\n        at ConstructorInjector.construct(ConstructorInjector.java:91)\r\n        at ConstructorBindingImpl$Factory.get(ConstructorBindingImpl.java:296)\r\n        at ProviderToInternalFactoryAdapter.get(ProviderToInternalFactoryAdapter.java:40)\r\n        at SingletonScope$1.get(SingletonScope.java:169)\r\n        at InternalFactoryToProviderAdapter.get(InternalFactoryToProviderAdapter.java:45)\r\n        at FactoryProxy.get(FactoryProxy.java:60)\r\n        at InternalInjectorCreator.loadEagerSingletons(InternalInjectorCreator.java:213)\r\n        at InternalInjectorCreator.injectDynamically(InternalInjectorCreator.java:186)\r\n        at InternalInjectorCreator.build(InternalInjectorCreator.java:113)\r\n        at InjectorImpl.createChildInjector(InjectorImpl.java:239)\r\n        at Daemon.createSysInjector(Daemon.java:521)\r\n        at Daemon.start(Daemon.java:361)\r\n        at Daemon.run(Daemon.java:279)\r\n        at AbstractProgram.main(AbstractProgram.java:61)\r\n        at java.base/NativeMethodAccessorImpl.invoke0(Native Method)\r\n        at java.base/NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\r\n        at java.base/DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n        at java.base/Method.invoke(Method.java:566)\r\n        at GerritLauncher.invokeProgram(GerritLauncher.java:224)\r\n        at GerritLauncher.mainImpl(GerritLauncher.java:120)\r\n        at GerritLauncher.main(GerritLauncher.java:65)\r\n        at Main.main(Main.java:28)\r\nCaused by: ClassNotFoundException: ChangeKeyAdapter\r\n        at java.base/URLClassLoader.findClass(URLClassLoader.java:471)\r\n        at java.base/ClassLoader.loadClass(ClassLoader.java:588)\r\n        at java.base/FactoryURLClassLoader.loadClass(URLClassLoader.java:899)\r\n        at java.base/ClassLoader.loadClass(ClassLoader.java:521)\r\n        ... 28 more\r\n```","title":"Gerrit upgrade to 3.4.1 Failed with NoClassDefFoundError ChangeKeyAdapter","body":"<p>I came into an error of NoClassFound Error when I exec cmd 'bash gerrit.sh run'.</p>\n<p>Before that I have make my Gerrit version upgraded from 3.2.3 to 3.4.1 by</p>\n<p><code> jar -jar gerrit.3.4.1.jar init  -d  ${MY-GerritSite}</code>.</p>\n<p>And it returned Initialized success.</p>\n<p>Here is my Error log when start Gerrit server.</p>\n<p>Any help is appreciate.\nThank you.</p>\n<pre><code>com.google.inject.CreationException: Unable to create injector, see the following errors:\n\n1) [Guice/ErrorInjectingConstructor]: NoClassDefFoundError: com/google/gerrit/server/change/ChangeKeyAdapter\n  at Log4jMessageLogger.&lt;init&gt;(Log4jMessageLogger.java:38)\n  at Log4jMessageLogger.class(Log4jMessageLogger.java:38)\n  while locating Log4jMessageLogger\n  while locating LifecycleListener annotated with @UniqueAnnotations$Internal(value=59)\n\nLearn more:\n  https://github.com/google/guice/wiki/ERROR_INJECTING_CONSTRUCTOR\nCaused by: NoClassDefFoundError: com/google/gerrit/server/change/ChangeKeyAdapter\n        at EventGsonProvider.get(EventGsonProvider.java:80)\n        at Log4jMessageLogger.&lt;init&gt;(Log4jMessageLogger.java:40)\n        at Log4jMessageLogger$$FastClassByGuice$$745685493.GUICE$TRAMPOLINE(&lt;generated&gt;)\n        at Log4jMessageLogger$$FastClassByGuice$$745685493.apply(&lt;generated&gt;)\n        at DefaultConstructionProxyFactory$FastClassProxy.newInstance(DefaultConstructionProxyFactory.java:82)\n        at ConstructorInjector.provision(ConstructorInjector.java:114)\n        at ConstructorInjector.construct(ConstructorInjector.java:91)\n        at ConstructorBindingImpl$Factory.get(ConstructorBindingImpl.java:296)\n        at ProviderToInternalFactoryAdapter.get(ProviderToInternalFactoryAdapter.java:40)\n        at SingletonScope$1.get(SingletonScope.java:169)\n        at InternalFactoryToProviderAdapter.get(InternalFactoryToProviderAdapter.java:45)\n        at FactoryProxy.get(FactoryProxy.java:60)\n        at InternalInjectorCreator.loadEagerSingletons(InternalInjectorCreator.java:213)\n        at InternalInjectorCreator.injectDynamically(InternalInjectorCreator.java:186)\n        at InternalInjectorCreator.build(InternalInjectorCreator.java:113)\n        at InjectorImpl.createChildInjector(InjectorImpl.java:239)\n        at Daemon.createSysInjector(Daemon.java:521)\n        at Daemon.start(Daemon.java:361)\n        at Daemon.run(Daemon.java:279)\n        at AbstractProgram.main(AbstractProgram.java:61)\n        at java.base/NativeMethodAccessorImpl.invoke0(Native Method)\n        at java.base/NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\n        at java.base/DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n        at java.base/Method.invoke(Method.java:566)\n        at GerritLauncher.invokeProgram(GerritLauncher.java:224)\n        at GerritLauncher.mainImpl(GerritLauncher.java:120)\n        at GerritLauncher.main(GerritLauncher.java:65)\n        at Main.main(Main.java:28)\nCaused by: ClassNotFoundException: ChangeKeyAdapter\n        at java.base/URLClassLoader.findClass(URLClassLoader.java:471)\n        at java.base/ClassLoader.loadClass(ClassLoader.java:588)\n        at java.base/FactoryURLClassLoader.loadClass(URLClassLoader.java:899)\n        at java.base/ClassLoader.loadClass(ClassLoader.java:521)\n        ... 28 more\n</code></pre>\n"},{"tags":["java","string","replace"],"answers":[{"tags":[],"owner":{"account_id":1207,"reputation":19992,"user_id":1605,"accept_rate":100,"display_name":"Avi"},"down_vote_count":9,"up_vote_count":10,"is_accepted":false,"score":1,"last_activity_date":1251187159,"creation_date":1251187159,"answer_id":1326711,"question_id":1326682,"body_markdown":"How about using the [replaceAll()][1] method?\r\n\r\n\r\n  [1]: http://java.sun.com/javase/6/docs/api/java/lang/String.html#replaceAll(java.lang.String,%20java.lang.String)","title":"Java Replacing multiple different substring in a string at once (or in the most efficient way)","body":"<p>How about using the <a href=\"http://java.sun.com/javase/6/docs/api/java/lang/String.html#replaceAll(java.lang.String,%20java.lang.String)\" rel=\"nofollow noreferrer\">replaceAll()</a> method?</p>\n"},{"tags":[],"owner":{"account_id":2146,"reputation":51871,"user_id":2959,"accept_rate":67,"display_name":"Steve McLeod"},"down_vote_count":0,"up_vote_count":7,"is_accepted":false,"score":7,"last_activity_date":1251187272,"creation_date":1251187272,"answer_id":1326715,"question_id":1326682,"body_markdown":"If you are going to be changing a String many times, then it is usually more efficient to use a StringBuilder **(but measure your performance to find out)**:\r\n\r\n    String str = &quot;The rain in Spain falls mainly on the plain&quot;;\r\n    StringBuilder sb = new StringBuilder(str);\r\n    // do your replacing in sb - although you&#39;ll find this trickier than simply using String\r\n    String newStr = sb.toString();\r\n\r\nEvery time you do a replace on a String, a new String object is created, because Strings are immutable. StringBuilder is mutable, that is, it can be changed as much as you want.\r\n","title":"Java Replacing multiple different substring in a string at once (or in the most efficient way)","body":"<p>If you are going to be changing a String many times, then it is usually more efficient to use a StringBuilder <strong>(but measure your performance to find out)</strong>:</p>\n\n<pre><code>String str = \"The rain in Spain falls mainly on the plain\";\nStringBuilder sb = new StringBuilder(str);\n// do your replacing in sb - although you'll find this trickier than simply using String\nString newStr = sb.toString();\n</code></pre>\n\n<p>Every time you do a replace on a String, a new String object is created, because Strings are immutable. StringBuilder is mutable, that is, it can be changed as much as you want.</p>\n"},{"tags":[],"owner":{"account_id":7450,"reputation":269210,"user_id":12960,"display_name":"Brian Agnew"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1331237342,"creation_date":1251187334,"answer_id":1326721,"question_id":1326682,"body_markdown":"`StringBuilder` will perform replace more efficiently, since its character array buffer can be specified to a required length.`StringBuilder` is designed for more than appending!\r\n\r\nOf course the real question is whether this is an optimisation too far ? The JVM is very good at handling creation of multiple objects and the subsequent garbage collection, and like all optimisation questions, my first question is whether you&#39;ve measured this and determined that it&#39;s a problem.\r\n\r\n  [1]: http://stackoverflow.com/questions/287842/is-stringbuilder-replace-more-efficient-than-string-replace","title":"Java Replacing multiple different substring in a string at once (or in the most efficient way)","body":"<p><code>StringBuilder</code> will perform replace more efficiently, since its character array buffer can be specified to a required length.<code>StringBuilder</code> is designed for more than appending!</p>\n\n<p>Of course the real question is whether this is an optimisation too far ? The JVM is very good at handling creation of multiple objects and the subsequent garbage collection, and like all optimisation questions, my first question is whether you've measured this and determined that it's a problem.</p>\n"},{"tags":[],"owner":{"account_id":51798,"reputation":15810,"user_id":154770,"accept_rate":67,"display_name":"Todd Owen"},"down_vote_count":0,"up_vote_count":114,"is_accepted":true,"score":114,"last_activity_date":1251190543,"creation_date":1251190543,"answer_id":1326962,"question_id":1326682,"body_markdown":"If the string you are operating on is very long, or you are operating on many strings, then it could be worthwhile using a java.util.regex.Matcher (this requires time up-front to compile, so it won&#39;t be efficient if your input is very small or your search pattern changes frequently).\r\n\r\nBelow is a full example, based on a list of tokens taken from a map. (Uses StringUtils from Apache Commons Lang).\r\n\r\n\tMap&lt;String,String&gt; tokens = new HashMap&lt;String,String&gt;();\r\n\ttokens.put(&quot;cat&quot;, &quot;Garfield&quot;);\r\n\ttokens.put(&quot;beverage&quot;, &quot;coffee&quot;);\r\n\t\r\n\tString template = &quot;%cat% really needs some %beverage%.&quot;;\r\n\t\r\n\t// Create pattern of the format &quot;%(cat|beverage)%&quot;\r\n\tString patternString = &quot;%(&quot; + StringUtils.join(tokens.keySet(), &quot;|&quot;) + &quot;)%&quot;;\r\n\tPattern pattern = Pattern.compile(patternString);\r\n\tMatcher matcher = pattern.matcher(template);\r\n\t\r\n\tStringBuffer sb = new StringBuffer();\r\n\twhile(matcher.find()) {\r\n\t    matcher.appendReplacement(sb, tokens.get(matcher.group(1)));\r\n\t}\r\n\tmatcher.appendTail(sb);\r\n\t\r\n\tSystem.out.println(sb.toString());\r\n\r\nOnce the regular expression is compiled, scanning the input string is generally very quick (although if your regular expression is complex or involves backtracking then you would still need to benchmark in order to confirm this!)","title":"Java Replacing multiple different substring in a string at once (or in the most efficient way)","body":"<p>If the string you are operating on is very long, or you are operating on many strings, then it could be worthwhile using a java.util.regex.Matcher (this requires time up-front to compile, so it won't be efficient if your input is very small or your search pattern changes frequently).</p>\n\n<p>Below is a full example, based on a list of tokens taken from a map. (Uses StringUtils from Apache Commons Lang).</p>\n\n<pre><code>Map&lt;String,String&gt; tokens = new HashMap&lt;String,String&gt;();\ntokens.put(\"cat\", \"Garfield\");\ntokens.put(\"beverage\", \"coffee\");\n\nString template = \"%cat% really needs some %beverage%.\";\n\n// Create pattern of the format \"%(cat|beverage)%\"\nString patternString = \"%(\" + StringUtils.join(tokens.keySet(), \"|\") + \")%\";\nPattern pattern = Pattern.compile(patternString);\nMatcher matcher = pattern.matcher(template);\n\nStringBuffer sb = new StringBuffer();\nwhile(matcher.find()) {\n    matcher.appendReplacement(sb, tokens.get(matcher.group(1)));\n}\nmatcher.appendTail(sb);\n\nSystem.out.println(sb.toString());\n</code></pre>\n\n<p>Once the regular expression is compiled, scanning the input string is generally very quick (although if your regular expression is complex or involves backtracking then you would still need to benchmark in order to confirm this!)</p>\n"},{"tags":[],"owner":{"account_id":680856,"reputation":269,"user_id":532067,"accept_rate":44,"display_name":"Ali"},"down_vote_count":1,"up_vote_count":4,"is_accepted":false,"score":3,"last_activity_date":1584659195,"creation_date":1293696992,"answer_id":4561052,"question_id":1326682,"body_markdown":"Check this:\r\n\r\n    String.format(str,STR[])\r\n\r\nFor instance:\r\n\r\n    String.format( &quot;Put your %s where your %s is&quot;, &quot;money&quot;, &quot;mouth&quot; );","title":"Java Replacing multiple different substring in a string at once (or in the most efficient way)","body":"<p>Check this:</p>\n\n<pre><code>String.format(str,STR[])\n</code></pre>\n\n<p>For instance:</p>\n\n<pre><code>String.format( \"Put your %s where your %s is\", \"money\", \"mouth\" );\n</code></pre>\n"},{"tags":[],"owner":{"account_id":166827,"reputation":14145,"user_id":391227,"accept_rate":62,"display_name":"Gelin Luo"},"down_vote_count":1,"up_vote_count":3,"is_accepted":false,"score":2,"last_activity_date":1341132158,"creation_date":1341132158,"answer_id":11280641,"question_id":1326682,"body_markdown":"Rythm a java template engine now released with an new feature called **[String interpolation mode][1]** which allows you do something like:\r\n\r\n    String result = Rythm.render(&quot;@name is inviting you&quot;, &quot;Diana&quot;);\r\n\r\nThe above case shows you can pass argument to template by position. Rythm also allows you to pass arguments by name:\r\n\r\n    Map&lt;String, Object&gt; args = new HashMap&lt;String, Object&gt;();\r\n    args.put(&quot;title&quot;, &quot;Mr.&quot;);\r\n    args.put(&quot;name&quot;, &quot;John&quot;);\r\n    String result = Rythm.render(&quot;Hello @title @name&quot;, args);\r\n\r\nNote Rythm is VERY FAST, about 2 to 3 times faster than String.format and velocity, because it compiles the template into java byte code, the runtime performance is very close to concatentation with StringBuilder.\r\n\r\nLinks:\r\n\r\n - Check the [full featured demonstration][2]\r\n - read [a brief introduction to Rythm][3] \r\n - download the [latest package][4] or \r\n - [fork it][5]\r\n\r\n  [1]: http://www.playframework.org/modules/rythm-1.0.0-20120630/string_interpolation\r\n  [2]: http://play-rythm-demo.appspot.com/\r\n  [3]: http://software-lgl.blogspot.com.au/2012/03/rythm-easy-to-use-high-performance-java.html\r\n  [4]: https://github.com/greenlaw110/rythm/downloads\r\n  [5]: https://github.com/greenlaw110/rythm\r\n","title":"Java Replacing multiple different substring in a string at once (or in the most efficient way)","body":"<p>Rythm a java template engine now released with an new feature called <strong><a href=\"http://www.playframework.org/modules/rythm-1.0.0-20120630/string_interpolation\" rel=\"nofollow\">String interpolation mode</a></strong> which allows you do something like:</p>\n\n<pre><code>String result = Rythm.render(\"@name is inviting you\", \"Diana\");\n</code></pre>\n\n<p>The above case shows you can pass argument to template by position. Rythm also allows you to pass arguments by name:</p>\n\n<pre><code>Map&lt;String, Object&gt; args = new HashMap&lt;String, Object&gt;();\nargs.put(\"title\", \"Mr.\");\nargs.put(\"name\", \"John\");\nString result = Rythm.render(\"Hello @title @name\", args);\n</code></pre>\n\n<p>Note Rythm is VERY FAST, about 2 to 3 times faster than String.format and velocity, because it compiles the template into java byte code, the runtime performance is very close to concatentation with StringBuilder.</p>\n\n<p>Links:</p>\n\n<ul>\n<li>Check the <a href=\"http://play-rythm-demo.appspot.com/\" rel=\"nofollow\">full featured demonstration</a></li>\n<li>read <a href=\"http://software-lgl.blogspot.com.au/2012/03/rythm-easy-to-use-high-performance-java.html\" rel=\"nofollow\">a brief introduction to Rythm</a> </li>\n<li>download the <a href=\"https://github.com/greenlaw110/rythm/downloads\" rel=\"nofollow\">latest package</a> or </li>\n<li><a href=\"https://github.com/greenlaw110/rythm\" rel=\"nofollow\">fork it</a></li>\n</ul>\n"},{"tags":[],"owner":{"account_id":3435689,"reputation":1626,"user_id":2878876,"accept_rate":25,"display_name":"Robin479"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1470213342,"creation_date":1470213342,"answer_id":38738477,"question_id":1326682,"body_markdown":"    public String replace(String input, Map&lt;String, String&gt; pairs) {\r\n      // Reverse lexic-order of keys is good enough for most cases,\r\n      // as it puts longer words before their prefixes (&quot;tool&quot; before &quot;too&quot;).\r\n      // However, there are corner cases, which this algorithm doesn&#39;t handle\r\n      // no matter what order of keys you choose, eg. it fails to match &quot;edit&quot;\r\n      // before &quot;bed&quot; in &quot;..bedit..&quot; because &quot;bed&quot; appears first in the input,\r\n      // but &quot;edit&quot; may be the desired longer match. Depends which you prefer.\r\n      final Map&lt;String, String&gt; sorted = \r\n          new TreeMap&lt;String, String&gt;(Collections.reverseOrder());\r\n      sorted.putAll(pairs);\r\n      final String[] keys = sorted.keySet().toArray(new String[sorted.size()]);\r\n      final String[] vals = sorted.values().toArray(new String[sorted.size()]);\r\n      final int lo = 0, hi = input.length();\r\n      final StringBuilder result = new StringBuilder();\r\n      int s = lo;\r\n      for (int i = s; i &lt; hi; i++) {\r\n        for (int p = 0; p &lt; keys.length; p++) {\r\n          if (input.regionMatches(i, keys[p], 0, keys[p].length())) {\r\n            /* TODO: check for &quot;edit&quot;, if this is &quot;bed&quot; in &quot;..bedit..&quot; case,\r\n             * i.e. look ahead for all prioritized/longer keys starting within\r\n             * the current match region; iff found, then ignore match (&quot;bed&quot;)\r\n             * and continue search (find &quot;edit&quot; later), else handle match. */\r\n            // if (better-match-overlaps-right-ahead)\r\n            //   continue;\r\n            result.append(input, s, i).append(vals[p]);\r\n            i += keys[p].length();\r\n            s = i--;\r\n          }\r\n        }\r\n      }\r\n      if (s == lo) // no matches? no changes!\r\n        return input;\r\n      return result.append(input, s, hi).toString();\r\n    }","title":"Java Replacing multiple different substring in a string at once (or in the most efficient way)","body":"<pre><code>public String replace(String input, Map&lt;String, String&gt; pairs) {\n  // Reverse lexic-order of keys is good enough for most cases,\n  // as it puts longer words before their prefixes (\"tool\" before \"too\").\n  // However, there are corner cases, which this algorithm doesn't handle\n  // no matter what order of keys you choose, eg. it fails to match \"edit\"\n  // before \"bed\" in \"..bedit..\" because \"bed\" appears first in the input,\n  // but \"edit\" may be the desired longer match. Depends which you prefer.\n  final Map&lt;String, String&gt; sorted = \n      new TreeMap&lt;String, String&gt;(Collections.reverseOrder());\n  sorted.putAll(pairs);\n  final String[] keys = sorted.keySet().toArray(new String[sorted.size()]);\n  final String[] vals = sorted.values().toArray(new String[sorted.size()]);\n  final int lo = 0, hi = input.length();\n  final StringBuilder result = new StringBuilder();\n  int s = lo;\n  for (int i = s; i &lt; hi; i++) {\n    for (int p = 0; p &lt; keys.length; p++) {\n      if (input.regionMatches(i, keys[p], 0, keys[p].length())) {\n        /* TODO: check for \"edit\", if this is \"bed\" in \"..bedit..\" case,\n         * i.e. look ahead for all prioritized/longer keys starting within\n         * the current match region; iff found, then ignore match (\"bed\")\n         * and continue search (find \"edit\" later), else handle match. */\n        // if (better-match-overlaps-right-ahead)\n        //   continue;\n        result.append(input, s, i).append(vals[p]);\n        i += keys[p].length();\n        s = i--;\n      }\n    }\n  }\n  if (s == lo) // no matches? no changes!\n    return input;\n  return result.append(input, s, hi).toString();\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":9921,"reputation":107684,"user_id":18511,"accept_rate":92,"display_name":"Kip"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1475682160,"creation_date":1475682160,"answer_id":39878413,"question_id":1326682,"body_markdown":"The below is based on [Todd Owen&#39;s answer][1]. That solution has the problem that if the replacements contain characters that have special meaning in regular expressions, you can get unexpected results. I also wanted to be able to optionally do a case-insensitive search. Here is what I came up with:\r\n\r\n\r\n    /**\r\n     * Performs simultaneous search/replace of multiple strings. Case Sensitive!\r\n     */\r\n    public String replaceMultiple(String target, Map&lt;String, String&gt; replacements) {\r\n      return replaceMultiple(target, replacements, true);\r\n    }\r\n    \r\n    /**\r\n     * Performs simultaneous search/replace of multiple strings.\r\n     * \r\n     * @param target        string to perform replacements on.\r\n     * @param replacements  map where key represents value to search for, and value represents replacem\r\n     * @param caseSensitive whether or not the search is case-sensitive.\r\n     * @return replaced string\r\n     */\r\n    public String replaceMultiple(String target, Map&lt;String, String&gt; replacements, boolean caseSensitive) {\r\n      if(target == null || &quot;&quot;.equals(target) || replacements == null || replacements.size() == 0)\r\n        return target;\r\n      \r\n      //if we are doing case-insensitive replacements, we need to make the map case-insensitive--make a new map with all-lower-case keys\r\n      if(!caseSensitive) {\r\n        Map&lt;String, String&gt; altReplacements = new HashMap&lt;String, String&gt;(replacements.size());\r\n        for(String key : replacements.keySet())\r\n          altReplacements.put(key.toLowerCase(), replacements.get(key));\r\n        \r\n        replacements = altReplacements;\r\n      }\r\n      \r\n      StringBuilder patternString = new StringBuilder();\r\n      if(!caseSensitive)\r\n        patternString.append(&quot;(?i)&quot;);\r\n      \r\n      patternString.append(&#39;(&#39;);\r\n      boolean first = true;\r\n      for(String key : replacements.keySet()) {\r\n        if(first)\r\n          first = false;\r\n        else\r\n          patternString.append(&#39;|&#39;);\r\n        \r\n        patternString.append(Pattern.quote(key));\r\n      }\r\n      patternString.append(&#39;)&#39;);\r\n      \r\n      Pattern pattern = Pattern.compile(patternString.toString());\r\n      Matcher matcher = pattern.matcher(target);\r\n      \r\n      StringBuffer res = new StringBuffer();\r\n      while(matcher.find()) {\r\n        String match = matcher.group(1);\r\n        if(!caseSensitive)\r\n          match = match.toLowerCase();\r\n        matcher.appendReplacement(res, replacements.get(match));\r\n      }\r\n      matcher.appendTail(res);\r\n      \r\n      return res.toString();\r\n    }\r\n\r\nHere are my unit test cases:\r\n\r\n    @Test\r\n    public void replaceMultipleTest() {\r\n      assertNull(ExtStringUtils.replaceMultiple(null, null));\r\n      assertNull(ExtStringUtils.replaceMultiple(null, Collections.&lt;String, String&gt;emptyMap()));\r\n      assertEquals(&quot;&quot;, ExtStringUtils.replaceMultiple(&quot;&quot;, null));\r\n      assertEquals(&quot;&quot;, ExtStringUtils.replaceMultiple(&quot;&quot;, Collections.&lt;String, String&gt;emptyMap()));\r\n      \r\n      assertEquals(&quot;folks, we are not sane anymore. with me, i promise you, we will burn in flames&quot;, ExtStringUtils.replaceMultiple(&quot;folks, we are not winning anymore. with me, i promise you, we will win big league&quot;, makeMap(&quot;win big league&quot;, &quot;burn in flames&quot;, &quot;winning&quot;, &quot;sane&quot;)));\r\n      \r\n      assertEquals(&quot;bcaacbbcaacb&quot;, ExtStringUtils.replaceMultiple(&quot;abccbaabccba&quot;, makeMap(&quot;a&quot;, &quot;b&quot;, &quot;b&quot;, &quot;c&quot;, &quot;c&quot;, &quot;a&quot;)));\r\n      assertEquals(&quot;bcaCBAbcCCBb&quot;, ExtStringUtils.replaceMultiple(&quot;abcCBAabCCBa&quot;, makeMap(&quot;a&quot;, &quot;b&quot;, &quot;b&quot;, &quot;c&quot;, &quot;c&quot;, &quot;a&quot;)));\r\n      assertEquals(&quot;bcaacbbcaacb&quot;, ExtStringUtils.replaceMultiple(&quot;abcCBAabCCBa&quot;, makeMap(&quot;a&quot;, &quot;b&quot;, &quot;b&quot;, &quot;c&quot;, &quot;c&quot;, &quot;a&quot;), false));\r\n      \r\n      assertEquals(&quot;c colon  backslash temp backslash  star  dot  star &quot;, ExtStringUtils.replaceMultiple(&quot;c:\\\\temp\\\\*.*&quot;, makeMap(&quot;.&quot;, &quot; dot &quot;, &quot;:&quot;, &quot; colon &quot;, &quot;\\\\&quot;, &quot; backslash &quot;, &quot;*&quot;, &quot; star &quot;), false));\r\n    }\r\n    \r\n    private Map&lt;String, String&gt; makeMap(String ... vals) {\r\n      Map&lt;String, String&gt; map = new HashMap&lt;String, String&gt;(vals.length / 2);\r\n      for(int i = 1; i &lt; vals.length; i+= 2)\r\n        map.put(vals[i-1], vals[i]);\r\n      return map;\r\n    }\r\n\r\n  [1]: https://stackoverflow.com/a/1326962/18511","title":"Java Replacing multiple different substring in a string at once (or in the most efficient way)","body":"<p>The below is based on <a href=\"https://stackoverflow.com/a/1326962/18511\">Todd Owen's answer</a>. That solution has the problem that if the replacements contain characters that have special meaning in regular expressions, you can get unexpected results. I also wanted to be able to optionally do a case-insensitive search. Here is what I came up with:</p>\n\n<pre><code>/**\n * Performs simultaneous search/replace of multiple strings. Case Sensitive!\n */\npublic String replaceMultiple(String target, Map&lt;String, String&gt; replacements) {\n  return replaceMultiple(target, replacements, true);\n}\n\n/**\n * Performs simultaneous search/replace of multiple strings.\n * \n * @param target        string to perform replacements on.\n * @param replacements  map where key represents value to search for, and value represents replacem\n * @param caseSensitive whether or not the search is case-sensitive.\n * @return replaced string\n */\npublic String replaceMultiple(String target, Map&lt;String, String&gt; replacements, boolean caseSensitive) {\n  if(target == null || \"\".equals(target) || replacements == null || replacements.size() == 0)\n    return target;\n\n  //if we are doing case-insensitive replacements, we need to make the map case-insensitive--make a new map with all-lower-case keys\n  if(!caseSensitive) {\n    Map&lt;String, String&gt; altReplacements = new HashMap&lt;String, String&gt;(replacements.size());\n    for(String key : replacements.keySet())\n      altReplacements.put(key.toLowerCase(), replacements.get(key));\n\n    replacements = altReplacements;\n  }\n\n  StringBuilder patternString = new StringBuilder();\n  if(!caseSensitive)\n    patternString.append(\"(?i)\");\n\n  patternString.append('(');\n  boolean first = true;\n  for(String key : replacements.keySet()) {\n    if(first)\n      first = false;\n    else\n      patternString.append('|');\n\n    patternString.append(Pattern.quote(key));\n  }\n  patternString.append(')');\n\n  Pattern pattern = Pattern.compile(patternString.toString());\n  Matcher matcher = pattern.matcher(target);\n\n  StringBuffer res = new StringBuffer();\n  while(matcher.find()) {\n    String match = matcher.group(1);\n    if(!caseSensitive)\n      match = match.toLowerCase();\n    matcher.appendReplacement(res, replacements.get(match));\n  }\n  matcher.appendTail(res);\n\n  return res.toString();\n}\n</code></pre>\n\n<p>Here are my unit test cases:</p>\n\n<pre><code>@Test\npublic void replaceMultipleTest() {\n  assertNull(ExtStringUtils.replaceMultiple(null, null));\n  assertNull(ExtStringUtils.replaceMultiple(null, Collections.&lt;String, String&gt;emptyMap()));\n  assertEquals(\"\", ExtStringUtils.replaceMultiple(\"\", null));\n  assertEquals(\"\", ExtStringUtils.replaceMultiple(\"\", Collections.&lt;String, String&gt;emptyMap()));\n\n  assertEquals(\"folks, we are not sane anymore. with me, i promise you, we will burn in flames\", ExtStringUtils.replaceMultiple(\"folks, we are not winning anymore. with me, i promise you, we will win big league\", makeMap(\"win big league\", \"burn in flames\", \"winning\", \"sane\")));\n\n  assertEquals(\"bcaacbbcaacb\", ExtStringUtils.replaceMultiple(\"abccbaabccba\", makeMap(\"a\", \"b\", \"b\", \"c\", \"c\", \"a\")));\n  assertEquals(\"bcaCBAbcCCBb\", ExtStringUtils.replaceMultiple(\"abcCBAabCCBa\", makeMap(\"a\", \"b\", \"b\", \"c\", \"c\", \"a\")));\n  assertEquals(\"bcaacbbcaacb\", ExtStringUtils.replaceMultiple(\"abcCBAabCCBa\", makeMap(\"a\", \"b\", \"b\", \"c\", \"c\", \"a\"), false));\n\n  assertEquals(\"c colon  backslash temp backslash  star  dot  star \", ExtStringUtils.replaceMultiple(\"c:\\\\temp\\\\*.*\", makeMap(\".\", \" dot \", \":\", \" colon \", \"\\\\\", \" backslash \", \"*\", \" star \"), false));\n}\n\nprivate Map&lt;String, String&gt; makeMap(String ... vals) {\n  Map&lt;String, String&gt; map = new HashMap&lt;String, String&gt;(vals.length / 2);\n  for(int i = 1; i &lt; vals.length; i+= 2)\n    map.put(vals[i-1], vals[i]);\n  return map;\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":23551,"reputation":30672,"user_id":59087,"accept_rate":99,"display_name":"Dave Jarvis"},"down_vote_count":0,"up_vote_count":100,"is_accepted":false,"score":100,"last_activity_date":1551564551,"creation_date":1480302515,"answer_id":40836618,"question_id":1326682,"body_markdown":"# Algorithm\r\n\r\nOne of the most efficient ways to replace matching strings (without regular expressions) is to use the [Aho-Corasick algorithm][1] with a performant [Trie][2] (pronounced &quot;try&quot;), fast [hashing][3] algorithm, and efficient [collections][4] implementation.\r\n\r\n# Simple Code\r\n\r\nA simple solution leverages Apache&#39;s [`StringUtils.replaceEach`][6] as follows:\r\n\r\n      private String testStringUtils(\r\n        final String text, final Map&lt;String, String&gt; definitions ) {\r\n        final String[] keys = keys( definitions );\r\n        final String[] values = values( definitions );\r\n    \r\n        return StringUtils.replaceEach( text, keys, values );\r\n      }\r\n\r\nThis slows down on large texts.\r\n\r\n# Fast Code\r\n\r\n[Bor&#39;s implementation][7] of the Aho-Corasick algorithm introduces a bit more complexity that becomes an implementation detail by using a fa&#231;ade with the same method signature:\r\n\r\n      private String testBorAhoCorasick(\r\n        final String text, final Map&lt;String, String&gt; definitions ) {\r\n        // Create a buffer sufficiently large that re-allocations are minimized.\r\n        final StringBuilder sb = new StringBuilder( text.length() &lt;&lt; 1 );\r\n    \r\n        final TrieBuilder builder = Trie.builder();\r\n        builder.onlyWholeWords();\r\n        builder.removeOverlaps();\r\n    \r\n        final String[] keys = keys( definitions );\r\n    \r\n        for( final String key : keys ) {\r\n          builder.addKeyword( key );\r\n        }\r\n    \r\n        final Trie trie = builder.build();\r\n        final Collection&lt;Emit&gt; emits = trie.parseText( text );\r\n    \r\n        int prevIndex = 0;\r\n    \r\n        for( final Emit emit : emits ) {\r\n          final int matchIndex = emit.getStart();\r\n    \r\n          sb.append( text.substring( prevIndex, matchIndex ) );\r\n          sb.append( definitions.get( emit.getKeyword() ) );\r\n          prevIndex = emit.getEnd() + 1;\r\n        }\r\n    \r\n        // Add the remainder of the string (contains no more matches).\r\n        sb.append( text.substring( prevIndex ) );\r\n    \r\n        return sb.toString();\r\n      }\r\n\r\n# Benchmarks\r\n\r\nFor the benchmarks, the buffer was created using [randomNumeric][8] as follows:\r\n\r\n      private final static int TEXT_SIZE = 1000;\r\n      private final static int MATCHES_DIVISOR = 10;\r\n    \r\n      private final static StringBuilder SOURCE\r\n        = new StringBuilder( randomNumeric( TEXT_SIZE ) );\r\n\r\nWhere `MATCHES_DIVISOR` dictates the number of variables to inject:\r\n\r\n      private void injectVariables( final Map&lt;String, String&gt; definitions ) {\r\n        for( int i = (SOURCE.length() / MATCHES_DIVISOR) + 1; i &gt; 0; i-- ) {\r\n          final int r = current().nextInt( 1, SOURCE.length() );\r\n          SOURCE.insert( r, randomKey( definitions ) );\r\n        }\r\n      }\r\n\r\nThe benchmark code itself ([JMH][9] seemed overkill):\r\n\r\n    long duration = System.nanoTime();\r\n    final String result = testBorAhoCorasick( text, definitions );\r\n    duration = System.nanoTime() - duration;\r\n    System.out.println( elapsed( duration ) );\r\n\r\n## 1,000,000 : 1,000\r\n\r\nA simple micro-benchmark with 1,000,000 characters and 1,000 randomly-placed strings to replace.\r\n\r\n- **testStringUtils:** 25 seconds, 25533 millis\r\n- **testBorAhoCorasick:** 0 seconds, 68 millis\r\n\r\nNo contest.\r\n\r\n## 10,000 : 1,000\r\n\r\nUsing 10,000 characters and 1,000 matching strings to replace:\r\n\r\n- **testStringUtils:** 1 seconds, 1402 millis\r\n- **testBorAhoCorasick:** 0 seconds, 37 millis\r\n\r\nThe divide closes.\r\n\r\n## 1,000 : 10\r\n\r\nUsing 1,000 characters and 10 matching strings to replace:\r\n\r\n- **testStringUtils:** 0 seconds, 7 millis\r\n- **testBorAhoCorasick:** 0 seconds, 19 millis\r\n\r\nFor short strings, the overhead of setting up Aho-Corasick eclipses the brute-force approach by `StringUtils.replaceEach`.\r\n\r\nA hybrid approach based on text length is possible, to get the best of both implementations.\r\n\r\n# Implementations\r\n\r\nConsider comparing other implementations for text longer than 1 MB, including:\r\n\r\n- https://github.com/RokLenarcic/AhoCorasick\r\n- https://github.com/hankcs/AhoCorasickDoubleArrayTrie\r\n- https://github.com/raymanrt/aho-corasick\r\n- https://github.com/ssundaresan/Aho-Corasick\r\n- https://github.com/jmhsieh/aho-corasick\r\n- https://github.com/quest-oss/Mensa\r\n\r\n# Papers\r\n\r\nPapers and information relating to the algorithm:\r\n\r\n- http://www.cs.uku.fi/research/publications/reports/A-2005-2.pdf\r\n- https://pdfs.semanticscholar.org/3547/ac839d02f6efe3f6f76a8289738a22528442.pdf\r\n- http://www.ece.ncsu.edu/asic/ece792A/2009/ECE792A/Readings_files/00989753.pdf\r\n- http://blog.ivank.net/aho-corasick-algorithm-in-as3.html\r\n\r\n\r\n  [1]: https://en.wikipedia.org/wiki/Aho%E2%80%93Corasick_algorithm\r\n  [2]: https://www.toptal.com/java/the-trie-a-neglected-data-structure\r\n  [3]: https://softwareengineering.stackexchange.com/a/145633/16090\r\n  [4]: http://www.magicwerk.org/res/collections/javadoc/org/magicwerk/brownies/collections/BigList.html\r\n  [5]: https://github.com/ertugrulcetin/GlueList\r\n  [6]: https://commons.apache.org/proper/commons-lang/apidocs/org/apache/commons/lang3/StringUtils.html#replaceEach-java.lang.String-java.lang.String:A-java.lang.String:A-\r\n  [7]: https://github.com/robert-bor/aho-corasick\r\n  [8]: http://commons.apache.org/proper/commons-lang/apidocs/org/apache/commons/lang3/RandomStringUtils.html#randomNumeric-int-\r\n  [9]: http://tutorials.jenkov.com/java-performance/jmh.html","title":"Java Replacing multiple different substring in a string at once (or in the most efficient way)","body":"<h1>Algorithm</h1>\n\n<p>One of the most efficient ways to replace matching strings (without regular expressions) is to use the <a href=\"https://en.wikipedia.org/wiki/Aho%E2%80%93Corasick_algorithm\" rel=\"noreferrer\">Aho-Corasick algorithm</a> with a performant <a href=\"https://www.toptal.com/java/the-trie-a-neglected-data-structure\" rel=\"noreferrer\">Trie</a> (pronounced \"try\"), fast <a href=\"https://softwareengineering.stackexchange.com/a/145633/16090\">hashing</a> algorithm, and efficient <a href=\"http://www.magicwerk.org/res/collections/javadoc/org/magicwerk/brownies/collections/BigList.html\" rel=\"noreferrer\">collections</a> implementation.</p>\n\n<h1>Simple Code</h1>\n\n<p>A simple solution leverages Apache's <a href=\"https://commons.apache.org/proper/commons-lang/apidocs/org/apache/commons/lang3/StringUtils.html#replaceEach-java.lang.String-java.lang.String:A-java.lang.String:A-\" rel=\"noreferrer\"><code>StringUtils.replaceEach</code></a> as follows:</p>\n\n<pre><code>  private String testStringUtils(\n    final String text, final Map&lt;String, String&gt; definitions ) {\n    final String[] keys = keys( definitions );\n    final String[] values = values( definitions );\n\n    return StringUtils.replaceEach( text, keys, values );\n  }\n</code></pre>\n\n<p>This slows down on large texts.</p>\n\n<h1>Fast Code</h1>\n\n<p><a href=\"https://github.com/robert-bor/aho-corasick\" rel=\"noreferrer\">Bor's implementation</a> of the Aho-Corasick algorithm introduces a bit more complexity that becomes an implementation detail by using a façade with the same method signature:</p>\n\n<pre><code>  private String testBorAhoCorasick(\n    final String text, final Map&lt;String, String&gt; definitions ) {\n    // Create a buffer sufficiently large that re-allocations are minimized.\n    final StringBuilder sb = new StringBuilder( text.length() &lt;&lt; 1 );\n\n    final TrieBuilder builder = Trie.builder();\n    builder.onlyWholeWords();\n    builder.removeOverlaps();\n\n    final String[] keys = keys( definitions );\n\n    for( final String key : keys ) {\n      builder.addKeyword( key );\n    }\n\n    final Trie trie = builder.build();\n    final Collection&lt;Emit&gt; emits = trie.parseText( text );\n\n    int prevIndex = 0;\n\n    for( final Emit emit : emits ) {\n      final int matchIndex = emit.getStart();\n\n      sb.append( text.substring( prevIndex, matchIndex ) );\n      sb.append( definitions.get( emit.getKeyword() ) );\n      prevIndex = emit.getEnd() + 1;\n    }\n\n    // Add the remainder of the string (contains no more matches).\n    sb.append( text.substring( prevIndex ) );\n\n    return sb.toString();\n  }\n</code></pre>\n\n<h1>Benchmarks</h1>\n\n<p>For the benchmarks, the buffer was created using <a href=\"http://commons.apache.org/proper/commons-lang/apidocs/org/apache/commons/lang3/RandomStringUtils.html#randomNumeric-int-\" rel=\"noreferrer\">randomNumeric</a> as follows:</p>\n\n<pre><code>  private final static int TEXT_SIZE = 1000;\n  private final static int MATCHES_DIVISOR = 10;\n\n  private final static StringBuilder SOURCE\n    = new StringBuilder( randomNumeric( TEXT_SIZE ) );\n</code></pre>\n\n<p>Where <code>MATCHES_DIVISOR</code> dictates the number of variables to inject:</p>\n\n<pre><code>  private void injectVariables( final Map&lt;String, String&gt; definitions ) {\n    for( int i = (SOURCE.length() / MATCHES_DIVISOR) + 1; i &gt; 0; i-- ) {\n      final int r = current().nextInt( 1, SOURCE.length() );\n      SOURCE.insert( r, randomKey( definitions ) );\n    }\n  }\n</code></pre>\n\n<p>The benchmark code itself (<a href=\"http://tutorials.jenkov.com/java-performance/jmh.html\" rel=\"noreferrer\">JMH</a> seemed overkill):</p>\n\n<pre><code>long duration = System.nanoTime();\nfinal String result = testBorAhoCorasick( text, definitions );\nduration = System.nanoTime() - duration;\nSystem.out.println( elapsed( duration ) );\n</code></pre>\n\n<h2>1,000,000 : 1,000</h2>\n\n<p>A simple micro-benchmark with 1,000,000 characters and 1,000 randomly-placed strings to replace.</p>\n\n<ul>\n<li><strong>testStringUtils:</strong> 25 seconds, 25533 millis</li>\n<li><strong>testBorAhoCorasick:</strong> 0 seconds, 68 millis</li>\n</ul>\n\n<p>No contest.</p>\n\n<h2>10,000 : 1,000</h2>\n\n<p>Using 10,000 characters and 1,000 matching strings to replace:</p>\n\n<ul>\n<li><strong>testStringUtils:</strong> 1 seconds, 1402 millis</li>\n<li><strong>testBorAhoCorasick:</strong> 0 seconds, 37 millis</li>\n</ul>\n\n<p>The divide closes.</p>\n\n<h2>1,000 : 10</h2>\n\n<p>Using 1,000 characters and 10 matching strings to replace:</p>\n\n<ul>\n<li><strong>testStringUtils:</strong> 0 seconds, 7 millis</li>\n<li><strong>testBorAhoCorasick:</strong> 0 seconds, 19 millis</li>\n</ul>\n\n<p>For short strings, the overhead of setting up Aho-Corasick eclipses the brute-force approach by <code>StringUtils.replaceEach</code>.</p>\n\n<p>A hybrid approach based on text length is possible, to get the best of both implementations.</p>\n\n<h1>Implementations</h1>\n\n<p>Consider comparing other implementations for text longer than 1 MB, including:</p>\n\n<ul>\n<li><a href=\"https://github.com/RokLenarcic/AhoCorasick\" rel=\"noreferrer\">https://github.com/RokLenarcic/AhoCorasick</a></li>\n<li><a href=\"https://github.com/hankcs/AhoCorasickDoubleArrayTrie\" rel=\"noreferrer\">https://github.com/hankcs/AhoCorasickDoubleArrayTrie</a></li>\n<li><a href=\"https://github.com/raymanrt/aho-corasick\" rel=\"noreferrer\">https://github.com/raymanrt/aho-corasick</a></li>\n<li><a href=\"https://github.com/ssundaresan/Aho-Corasick\" rel=\"noreferrer\">https://github.com/ssundaresan/Aho-Corasick</a></li>\n<li><a href=\"https://github.com/jmhsieh/aho-corasick\" rel=\"noreferrer\">https://github.com/jmhsieh/aho-corasick</a></li>\n<li><a href=\"https://github.com/quest-oss/Mensa\" rel=\"noreferrer\">https://github.com/quest-oss/Mensa</a></li>\n</ul>\n\n<h1>Papers</h1>\n\n<p>Papers and information relating to the algorithm:</p>\n\n<ul>\n<li><a href=\"http://www.cs.uku.fi/research/publications/reports/A-2005-2.pdf\" rel=\"noreferrer\">http://www.cs.uku.fi/research/publications/reports/A-2005-2.pdf</a></li>\n<li><a href=\"https://pdfs.semanticscholar.org/3547/ac839d02f6efe3f6f76a8289738a22528442.pdf\" rel=\"noreferrer\">https://pdfs.semanticscholar.org/3547/ac839d02f6efe3f6f76a8289738a22528442.pdf</a></li>\n<li><a href=\"http://www.ece.ncsu.edu/asic/ece792A/2009/ECE792A/Readings_files/00989753.pdf\" rel=\"noreferrer\">http://www.ece.ncsu.edu/asic/ece792A/2009/ECE792A/Readings_files/00989753.pdf</a></li>\n<li><a href=\"http://blog.ivank.net/aho-corasick-algorithm-in-as3.html\" rel=\"noreferrer\">http://blog.ivank.net/aho-corasick-algorithm-in-as3.html</a></li>\n</ul>\n"},{"tags":[],"owner":{"account_id":8120689,"reputation":7367,"user_id":6117565,"display_name":"bikram"},"down_vote_count":1,"up_vote_count":23,"is_accepted":false,"score":22,"last_activity_date":1578999256,"creation_date":1535027032,"answer_id":51985743,"question_id":1326682,"body_markdown":"This worked for me:\r\n\r\n    String result = input.replaceAll(&quot;string1|string2|string3&quot;,&quot;replacementString&quot;);\r\n\r\nExample:\r\n\r\n    String input = &quot;applemangobananaarefruits&quot;;\r\n    String result = input.replaceAll(&quot;mango|are|ts&quot;,&quot;-&quot;);\r\n    System.out.println(result);\r\n\r\n__Output:__ apple-banana-frui-","title":"Java Replacing multiple different substring in a string at once (or in the most efficient way)","body":"<p>This worked for me:</p>\n\n<pre><code>String result = input.replaceAll(\"string1|string2|string3\",\"replacementString\");\n</code></pre>\n\n<p>Example:</p>\n\n<pre><code>String input = \"applemangobananaarefruits\";\nString result = input.replaceAll(\"mango|are|ts\",\"-\");\nSystem.out.println(result);\n</code></pre>\n\n<p><strong>Output:</strong> apple-banana-frui-</p>\n"},{"tags":[],"owner":{"account_id":3784583,"reputation":951,"user_id":3142960,"display_name":"BlakeTNC"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1592322642,"creation_date":1592321372,"answer_id":62412110,"question_id":1326682,"body_markdown":"# Summary: Single class implementation of Dave&#39;s answer, to automatically choose the most efficient of the two algorithms.\r\nThis is a full, single class implementation based on the above excellent [answer from Dave Jarvis][1]. The class automatically chooses between the two different supplied algorithms, for maximum efficiency. \r\n(This answer is for people who would just like to quickly copy and paste.)\r\n\r\n# ReplaceStrings class:\r\n\r\n    package somepackage\r\n    \r\n    import java.util.ArrayList;\r\n    import java.util.Collection;\r\n    import java.util.HashMap;\r\n    import java.util.Map;\r\n    import java.util.Set;\r\n    import org.ahocorasick.trie.Emit;\r\n    import org.ahocorasick.trie.Trie;\r\n    import org.ahocorasick.trie.Trie.TrieBuilder;\r\n    import org.apache.commons.lang3.StringUtils;\r\n    \r\n    /**\r\n     * ReplaceStrings, This class is used to replace multiple strings in a section of text, with high\r\n     * time efficiency. The chosen algorithms were adapted from: https://stackoverflow.com/a/40836618\r\n     */\r\n    public final class ReplaceStrings {\r\n    \r\n        /**\r\n         * replace, This replaces multiple strings in a section of text, according to the supplied\r\n         * search and replace definitions. For maximum efficiency, this will automatically choose\r\n         * between two possible replacement algorithms.\r\n         *\r\n         * Performance note: If it is known in advance that the source text is long, then this method\r\n         * signature has a very small additional performance advantage over the other method signature.\r\n         * (Although either method signature will still choose the best algorithm.)\r\n         */\r\n        public static String replace(\r\n            final String sourceText, final Map&lt;String, String&gt; searchReplaceDefinitions) {\r\n            final boolean useLongAlgorithm\r\n                = (sourceText.length() &gt; 1000 || searchReplaceDefinitions.size() &gt; 25);\r\n            if (useLongAlgorithm) {\r\n                // No parameter adaptations are needed for the long algorithm.\r\n                return replaceUsing_AhoCorasickAlgorithm(sourceText, searchReplaceDefinitions);\r\n            } else {\r\n                // Create search and replace arrays, which are needed by the short algorithm.\r\n                final ArrayList&lt;String&gt; searchList = new ArrayList&lt;&gt;();\r\n                final ArrayList&lt;String&gt; replaceList = new ArrayList&lt;&gt;();\r\n                final Set&lt;Map.Entry&lt;String, String&gt;&gt; allEntries = searchReplaceDefinitions.entrySet();\r\n                for (Map.Entry&lt;String, String&gt; entry : allEntries) {\r\n                    searchList.add(entry.getKey());\r\n                    replaceList.add(entry.getValue());\r\n                }\r\n                return replaceUsing_StringUtilsAlgorithm(sourceText, searchList, replaceList);\r\n            }\r\n        }\r\n    \r\n        /**\r\n         * replace, This replaces multiple strings in a section of text, according to the supplied\r\n         * search strings and replacement strings. For maximum efficiency, this will automatically\r\n         * choose between two possible replacement algorithms.\r\n         *\r\n         * Performance note: If it is known in advance that the source text is short, then this method\r\n         * signature has a very small additional performance advantage over the other method signature.\r\n         * (Although either method signature will still choose the best algorithm.)\r\n         */\r\n        public static String replace(final String sourceText,\r\n            final ArrayList&lt;String&gt; searchList, final ArrayList&lt;String&gt; replacementList) {\r\n            if (searchList.size() != replacementList.size()) {\r\n                throw new RuntimeException(&quot;ReplaceStrings.replace(), &quot;\r\n                    + &quot;The search list and the replacement list must be the same size.&quot;);\r\n            }\r\n            final boolean useLongAlgorithm = (sourceText.length() &gt; 1000 || searchList.size() &gt; 25);\r\n            if (useLongAlgorithm) {\r\n                // Create a definitions map, which is needed by the long algorithm.\r\n                HashMap&lt;String, String&gt; definitions = new HashMap&lt;&gt;();\r\n                final int searchListLength = searchList.size();\r\n                for (int index = 0; index &lt; searchListLength; ++index) {\r\n                    definitions.put(searchList.get(index), replacementList.get(index));\r\n                }\r\n                return replaceUsing_AhoCorasickAlgorithm(sourceText, definitions);\r\n            } else {\r\n                // No parameter adaptations are needed for the short algorithm.\r\n                return replaceUsing_StringUtilsAlgorithm(sourceText, searchList, replacementList);\r\n            }\r\n        }\r\n    \r\n        /**\r\n         * replaceUsing_StringUtilsAlgorithm, This is a string replacement algorithm that is most\r\n         * efficient for sourceText under 1000 characters, and less than 25 search strings.\r\n         */\r\n        private static String replaceUsing_StringUtilsAlgorithm(final String sourceText,\r\n            final ArrayList&lt;String&gt; searchList, final ArrayList&lt;String&gt; replacementList) {\r\n            final String[] searchArray = searchList.toArray(new String[]{});\r\n            final String[] replacementArray = replacementList.toArray(new String[]{});\r\n            return StringUtils.replaceEach(sourceText, searchArray, replacementArray);\r\n        }\r\n    \r\n        /**\r\n         * replaceUsing_AhoCorasickAlgorithm, This is a string replacement algorithm that is most\r\n         * efficient for sourceText over 1000 characters, or large lists of search strings.\r\n         */\r\n        private static String replaceUsing_AhoCorasickAlgorithm(final String sourceText,\r\n            final Map&lt;String, String&gt; searchReplaceDefinitions) {\r\n            // Create a buffer sufficiently large that re-allocations are minimized.\r\n            final StringBuilder sb = new StringBuilder(sourceText.length() &lt;&lt; 1);\r\n            final TrieBuilder builder = Trie.builder();\r\n            builder.onlyWholeWords();\r\n            builder.ignoreOverlaps();\r\n            for (final String key : searchReplaceDefinitions.keySet()) {\r\n                builder.addKeyword(key);\r\n            }\r\n            final Trie trie = builder.build();\r\n            final Collection&lt;Emit&gt; emits = trie.parseText(sourceText);\r\n            int prevIndex = 0;\r\n            for (final Emit emit : emits) {\r\n                final int matchIndex = emit.getStart();\r\n    \r\n                sb.append(sourceText.substring(prevIndex, matchIndex));\r\n                sb.append(searchReplaceDefinitions.get(emit.getKeyword()));\r\n                prevIndex = emit.getEnd() + 1;\r\n            }\r\n            // Add the remainder of the string (contains no more matches).\r\n            sb.append(sourceText.substring(prevIndex));\r\n            return sb.toString();\r\n        }\r\n    \r\n        /**\r\n         * main, This contains some test and example code.\r\n         */\r\n        public static void main(String[] args) {\r\n            String shortSource = &quot;The quick brown fox jumped over something. &quot;;\r\n            StringBuilder longSourceBuilder = new StringBuilder();\r\n            for (int i = 0; i &lt; 50; ++i) {\r\n                longSourceBuilder.append(shortSource);\r\n            }\r\n            String longSource = longSourceBuilder.toString();\r\n            HashMap&lt;String, String&gt; searchReplaceMap = new HashMap&lt;&gt;();\r\n            ArrayList&lt;String&gt; searchList = new ArrayList&lt;&gt;();\r\n            ArrayList&lt;String&gt; replaceList = new ArrayList&lt;&gt;();\r\n            searchReplaceMap.put(&quot;fox&quot;, &quot;grasshopper&quot;);\r\n            searchReplaceMap.put(&quot;something&quot;, &quot;the mountain&quot;);\r\n            searchList.add(&quot;fox&quot;);\r\n            replaceList.add(&quot;grasshopper&quot;);\r\n            searchList.add(&quot;something&quot;);\r\n            replaceList.add(&quot;the mountain&quot;);\r\n            String shortResultUsingArrays = replace(shortSource, searchList, replaceList);\r\n            String shortResultUsingMap = replace(shortSource, searchReplaceMap);\r\n            String longResultUsingArrays = replace(longSource, searchList, replaceList);\r\n            String longResultUsingMap = replace(longSource, searchReplaceMap);\r\n            System.out.println(shortResultUsingArrays);\r\n            System.out.println(&quot;----------------------------------------------&quot;);\r\n            System.out.println(shortResultUsingMap);\r\n            System.out.println(&quot;----------------------------------------------&quot;);\r\n            System.out.println(longResultUsingArrays);\r\n            System.out.println(&quot;----------------------------------------------&quot;);\r\n            System.out.println(longResultUsingMap);\r\n            System.out.println(&quot;----------------------------------------------&quot;);\r\n        }\r\n    }\r\n\r\n\r\n\r\n# Needed Maven dependencies:\r\n(Add these to your pom file if needed.)\r\n\r\n        &lt;!-- Apache Commons utilities. Super commonly used utilities.\r\n        https://mvnrepository.com/artifact/org.apache.commons/commons-lang3 --&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.apache.commons&lt;/groupId&gt;\r\n            &lt;artifactId&gt;commons-lang3&lt;/artifactId&gt;\r\n            &lt;version&gt;3.10&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n        \r\n        &lt;!-- ahocorasick, An algorithm used for efficient searching and \r\n        replacing of multiple strings.\r\n        https://mvnrepository.com/artifact/org.ahocorasick/ahocorasick --&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.ahocorasick&lt;/groupId&gt;\r\n            &lt;artifactId&gt;ahocorasick&lt;/artifactId&gt;\r\n            &lt;version&gt;0.4.0&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n\r\n  [1]: https://stackoverflow.com/a/40836618","title":"Java Replacing multiple different substring in a string at once (or in the most efficient way)","body":"<h1>Summary: Single class implementation of Dave's answer, to automatically choose the most efficient of the two algorithms.</h1>\n\n<p>This is a full, single class implementation based on the above excellent <a href=\"https://stackoverflow.com/a/40836618\">answer from Dave Jarvis</a>. The class automatically chooses between the two different supplied algorithms, for maximum efficiency. \n(This answer is for people who would just like to quickly copy and paste.)</p>\n\n<h1>ReplaceStrings class:</h1>\n\n<pre><code>package somepackage\n\nimport java.util.ArrayList;\nimport java.util.Collection;\nimport java.util.HashMap;\nimport java.util.Map;\nimport java.util.Set;\nimport org.ahocorasick.trie.Emit;\nimport org.ahocorasick.trie.Trie;\nimport org.ahocorasick.trie.Trie.TrieBuilder;\nimport org.apache.commons.lang3.StringUtils;\n\n/**\n * ReplaceStrings, This class is used to replace multiple strings in a section of text, with high\n * time efficiency. The chosen algorithms were adapted from: https://stackoverflow.com/a/40836618\n */\npublic final class ReplaceStrings {\n\n    /**\n     * replace, This replaces multiple strings in a section of text, according to the supplied\n     * search and replace definitions. For maximum efficiency, this will automatically choose\n     * between two possible replacement algorithms.\n     *\n     * Performance note: If it is known in advance that the source text is long, then this method\n     * signature has a very small additional performance advantage over the other method signature.\n     * (Although either method signature will still choose the best algorithm.)\n     */\n    public static String replace(\n        final String sourceText, final Map&lt;String, String&gt; searchReplaceDefinitions) {\n        final boolean useLongAlgorithm\n            = (sourceText.length() &gt; 1000 || searchReplaceDefinitions.size() &gt; 25);\n        if (useLongAlgorithm) {\n            // No parameter adaptations are needed for the long algorithm.\n            return replaceUsing_AhoCorasickAlgorithm(sourceText, searchReplaceDefinitions);\n        } else {\n            // Create search and replace arrays, which are needed by the short algorithm.\n            final ArrayList&lt;String&gt; searchList = new ArrayList&lt;&gt;();\n            final ArrayList&lt;String&gt; replaceList = new ArrayList&lt;&gt;();\n            final Set&lt;Map.Entry&lt;String, String&gt;&gt; allEntries = searchReplaceDefinitions.entrySet();\n            for (Map.Entry&lt;String, String&gt; entry : allEntries) {\n                searchList.add(entry.getKey());\n                replaceList.add(entry.getValue());\n            }\n            return replaceUsing_StringUtilsAlgorithm(sourceText, searchList, replaceList);\n        }\n    }\n\n    /**\n     * replace, This replaces multiple strings in a section of text, according to the supplied\n     * search strings and replacement strings. For maximum efficiency, this will automatically\n     * choose between two possible replacement algorithms.\n     *\n     * Performance note: If it is known in advance that the source text is short, then this method\n     * signature has a very small additional performance advantage over the other method signature.\n     * (Although either method signature will still choose the best algorithm.)\n     */\n    public static String replace(final String sourceText,\n        final ArrayList&lt;String&gt; searchList, final ArrayList&lt;String&gt; replacementList) {\n        if (searchList.size() != replacementList.size()) {\n            throw new RuntimeException(\"ReplaceStrings.replace(), \"\n                + \"The search list and the replacement list must be the same size.\");\n        }\n        final boolean useLongAlgorithm = (sourceText.length() &gt; 1000 || searchList.size() &gt; 25);\n        if (useLongAlgorithm) {\n            // Create a definitions map, which is needed by the long algorithm.\n            HashMap&lt;String, String&gt; definitions = new HashMap&lt;&gt;();\n            final int searchListLength = searchList.size();\n            for (int index = 0; index &lt; searchListLength; ++index) {\n                definitions.put(searchList.get(index), replacementList.get(index));\n            }\n            return replaceUsing_AhoCorasickAlgorithm(sourceText, definitions);\n        } else {\n            // No parameter adaptations are needed for the short algorithm.\n            return replaceUsing_StringUtilsAlgorithm(sourceText, searchList, replacementList);\n        }\n    }\n\n    /**\n     * replaceUsing_StringUtilsAlgorithm, This is a string replacement algorithm that is most\n     * efficient for sourceText under 1000 characters, and less than 25 search strings.\n     */\n    private static String replaceUsing_StringUtilsAlgorithm(final String sourceText,\n        final ArrayList&lt;String&gt; searchList, final ArrayList&lt;String&gt; replacementList) {\n        final String[] searchArray = searchList.toArray(new String[]{});\n        final String[] replacementArray = replacementList.toArray(new String[]{});\n        return StringUtils.replaceEach(sourceText, searchArray, replacementArray);\n    }\n\n    /**\n     * replaceUsing_AhoCorasickAlgorithm, This is a string replacement algorithm that is most\n     * efficient for sourceText over 1000 characters, or large lists of search strings.\n     */\n    private static String replaceUsing_AhoCorasickAlgorithm(final String sourceText,\n        final Map&lt;String, String&gt; searchReplaceDefinitions) {\n        // Create a buffer sufficiently large that re-allocations are minimized.\n        final StringBuilder sb = new StringBuilder(sourceText.length() &lt;&lt; 1);\n        final TrieBuilder builder = Trie.builder();\n        builder.onlyWholeWords();\n        builder.ignoreOverlaps();\n        for (final String key : searchReplaceDefinitions.keySet()) {\n            builder.addKeyword(key);\n        }\n        final Trie trie = builder.build();\n        final Collection&lt;Emit&gt; emits = trie.parseText(sourceText);\n        int prevIndex = 0;\n        for (final Emit emit : emits) {\n            final int matchIndex = emit.getStart();\n\n            sb.append(sourceText.substring(prevIndex, matchIndex));\n            sb.append(searchReplaceDefinitions.get(emit.getKeyword()));\n            prevIndex = emit.getEnd() + 1;\n        }\n        // Add the remainder of the string (contains no more matches).\n        sb.append(sourceText.substring(prevIndex));\n        return sb.toString();\n    }\n\n    /**\n     * main, This contains some test and example code.\n     */\n    public static void main(String[] args) {\n        String shortSource = \"The quick brown fox jumped over something. \";\n        StringBuilder longSourceBuilder = new StringBuilder();\n        for (int i = 0; i &lt; 50; ++i) {\n            longSourceBuilder.append(shortSource);\n        }\n        String longSource = longSourceBuilder.toString();\n        HashMap&lt;String, String&gt; searchReplaceMap = new HashMap&lt;&gt;();\n        ArrayList&lt;String&gt; searchList = new ArrayList&lt;&gt;();\n        ArrayList&lt;String&gt; replaceList = new ArrayList&lt;&gt;();\n        searchReplaceMap.put(\"fox\", \"grasshopper\");\n        searchReplaceMap.put(\"something\", \"the mountain\");\n        searchList.add(\"fox\");\n        replaceList.add(\"grasshopper\");\n        searchList.add(\"something\");\n        replaceList.add(\"the mountain\");\n        String shortResultUsingArrays = replace(shortSource, searchList, replaceList);\n        String shortResultUsingMap = replace(shortSource, searchReplaceMap);\n        String longResultUsingArrays = replace(longSource, searchList, replaceList);\n        String longResultUsingMap = replace(longSource, searchReplaceMap);\n        System.out.println(shortResultUsingArrays);\n        System.out.println(\"----------------------------------------------\");\n        System.out.println(shortResultUsingMap);\n        System.out.println(\"----------------------------------------------\");\n        System.out.println(longResultUsingArrays);\n        System.out.println(\"----------------------------------------------\");\n        System.out.println(longResultUsingMap);\n        System.out.println(\"----------------------------------------------\");\n    }\n}\n</code></pre>\n\n<h1>Needed Maven dependencies:</h1>\n\n<p>(Add these to your pom file if needed.)</p>\n\n<pre><code>    &lt;!-- Apache Commons utilities. Super commonly used utilities.\n    https://mvnrepository.com/artifact/org.apache.commons/commons-lang3 --&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.apache.commons&lt;/groupId&gt;\n        &lt;artifactId&gt;commons-lang3&lt;/artifactId&gt;\n        &lt;version&gt;3.10&lt;/version&gt;\n    &lt;/dependency&gt;\n\n    &lt;!-- ahocorasick, An algorithm used for efficient searching and \n    replacing of multiple strings.\n    https://mvnrepository.com/artifact/org.ahocorasick/ahocorasick --&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.ahocorasick&lt;/groupId&gt;\n        &lt;artifactId&gt;ahocorasick&lt;/artifactId&gt;\n        &lt;version&gt;0.4.0&lt;/version&gt;\n    &lt;/dependency&gt;\n</code></pre>\n"}],"owner":{"account_id":2848,"reputation":14225,"user_id":4038,"accept_rate":75,"display_name":"Yossale"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":144902,"favorite_count":0,"down_vote_count":0,"up_vote_count":118,"accepted_answer_id":1326962,"answer_count":11,"score":118,"last_activity_date":1637409070,"creation_date":1251186754,"question_id":1326682,"body_markdown":"I need to replace many different sub-string in a string in the most efficient way. \r\nis there another way other then the brute force way of replacing each field using string.replace ? \r\n\r\n\r\n\r\n","title":"Java Replacing multiple different substring in a string at once (or in the most efficient way)","body":"<p>I need to replace many different sub-string in a string in the most efficient way. \nis there another way other then the brute force way of replacing each field using string.replace ? </p>\n"},{"tags":["java","android","android-intent","android-activity","start-activity"],"comments":[{"owner":{"account_id":16632079,"reputation":2166,"user_id":16547945,"display_name":"Vojin Purić"},"score":2,"creation_date":1637404909,"post_id":70045108,"comment_id":123820869,"body_markdown":"Post your error log, what is the cause of the crash?","body":"Post your error log, what is the cause of the crash?"},{"owner":{"account_id":1435254,"reputation":29439,"user_id":4826457,"display_name":"Suraj Rao"},"score":1,"creation_date":1637407959,"post_id":70045108,"comment_id":123821439,"body_markdown":"Please don&#39;t make more work for other people by vandalizing your posts. By posting on the Stack Exchange network, you&#39;ve granted a non-revocable right, under the [CC BY-SA 4.0 license](//creativecommons.org/licenses/by-sa/4.0/), for Stack Exchange to distribute that content (i.e. regardless of your future choices). By Stack Exchange policy, the non-vandalized version of the post is the one which is distributed. Thus, any vandalism will be reverted. If you want to know more about deleting a post please see: [How does deleting work?](//meta.stackexchange.com/q/5221)","body":"Please don&#39;t make more work for other people by vandalizing your posts. By posting on the Stack Exchange network, you&#39;ve granted a non-revocable right, under the <a href=\"//creativecommons.org/licenses/by-sa/4.0/\" rel=\"nofollow noreferrer\">CC BY-SA 4.0 license</a>, for Stack Exchange to distribute that content (i.e. regardless of your future choices). By Stack Exchange policy, the non-vandalized version of the post is the one which is distributed. Thus, any vandalism will be reverted. If you want to know more about deleting a post please see: <a href=\"//meta.stackexchange.com/q/5221\">How does deleting work?</a>"}],"answers":[{"tags":[],"owner":{"account_id":16632079,"reputation":2166,"user_id":16547945,"display_name":"Vojin Purić"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1637405141,"creation_date":1637405141,"answer_id":70045178,"question_id":70045108,"body_markdown":"Your **User** objects need to implement **Serializable** as well.\r\nAlso, since **LinkedLists** are *Serializable* you can use *putSerializable(String key, Serializable value)* instead of *putExtra*","title":"Android Studio - The (Very) Basics - startActivty doesn&#39;t work","body":"<p>Your <strong>User</strong> objects need to implement <strong>Serializable</strong> as well.\nAlso, since <strong>LinkedLists</strong> are <em>Serializable</em> you can use <em>putSerializable(String key, Serializable value)</em> instead of <em>putExtra</em></p>\n"}],"owner":{"account_id":23400338,"reputation":11,"user_id":17463602,"display_name":"nnhjbxozqxs"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":55,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"accepted_answer_id":70045178,"answer_count":1,"score":0,"last_activity_date":1637407941,"creation_date":1637404603,"question_id":70045108,"body_markdown":"im trying to move the info of a user from one activity to the other, but everytime i run the app it crashes **at the &quot;startActivity(i)&quot; Line** (i checked everything else, it only crashes at that line).\r\n\r\nthat&#39;s the MainActivity Code\r\n\r\n&lt;!-- begin snippet: js hide: false console: true babel: false --&gt;\r\n\r\n&lt;!-- language: lang-html --&gt;\r\n\r\n    package com.example.hw1511;\r\n\r\n    import androidx.appcompat.app.AppCompatActivity;\r\n\r\n    import android.content.Intent;\r\n    import android.os.Bundle;\r\n    import android.view.View;\r\n    import android.widget.Button;\r\n    import android.widget.EditText;\r\n    import android.widget.TextView;\r\n    import android.widget.Toast;\r\n\r\n    import com.example.hw1511.Model.User;\r\n\r\n    import org.w3c.dom.Text;\r\n\r\n    import java.io.Serializable;\r\n    import java.util.LinkedList;\r\n    import java.util.List;\r\n\r\n    public class MainActivity extends AppCompatActivity implements Serializable {\r\n        private EditText Name;\r\n        private EditText Age;\r\n        private EditText Birth;\r\n        private Button AddUser;\r\n        private Button Send;\r\n\r\n        @Override\r\n        protected void onCreate(Bundle savedInstanceState) {\r\n            super.onCreate(savedInstanceState);\r\n            setContentView(R.layout.activity_main);\r\n            Name = findViewById(R.id.Name);\r\n            Age = findViewById(R.id.Age);\r\n            Birth = findViewById(R.id.Birth);\r\n            AddUser = findViewById(R.id.AddUser);\r\n            Send = findViewById(R.id.Send);\r\n\r\n            Intent i = new Intent(MainActivity.this, SecondActivity.class);\r\n            List&lt;User&gt; list1 = new LinkedList&lt;&gt;();\r\n\r\n\r\n            AddUser.setOnClickListener(new View.OnClickListener() {\r\n                @Override\r\n                public void onClick(View v) {\r\n                    \r\n                  if (Name.getText().toString().trim().length() &gt; 0 &amp;&amp; Age.getText().toString().trim().length() &gt; 0 &amp;&amp; Birth.getText().toString().trim().length() &gt; 0) {\r\n                      User u = new User(Name.getText().toString(), Integer.parseInt(Age.getText().toString()), Birth.getText().toString());\r\n                       list1.add(u);\r\n                        Name.setText(&quot;&quot;);\r\n                        Age.setText(&quot;&quot;);\r\n                        Birth.setText(&quot;&quot;);\r\n                   }\r\n                   else {\r\n                       Toast.makeText(MainActivity.this, &quot;Fill All&quot;, Toast.LENGTH_SHORT).show();\r\n                   }\r\n                }\r\n            });\r\n\r\n            Send.setOnClickListener(new View.OnClickListener() {\r\n                @Override\r\n                public void onClick(View v) {\r\n\r\n                        i.putExtra(&quot;Users&quot;, (Serializable) list1);\r\n                        startActivity(i);\r\n\r\n                    \r\n\r\n                }\r\n            });\r\n\r\n        }\r\n    }\r\n\r\n&lt;!-- end snippet --&gt;\r\n\r\nand that&#39;s the SecondActivty Code (it&#39;s preety much empty)\r\n\r\n&lt;!-- begin snippet: js hide: false console: true babel: false --&gt;\r\n\r\n&lt;!-- language: lang-html --&gt;\r\n\r\n    package com.example.hw1511;\r\n\r\n    import androidx.appcompat.app.AppCompatActivity;\r\n\r\n    import android.content.Intent;\r\n    import android.os.Bundle;\r\n    import android.view.View;\r\n    import android.widget.Button;\r\n    import android.widget.TextView;\r\n    import android.widget.Toast;\r\n\r\n    import com.example.hw1511.Model.User;\r\n\r\n    import java.io.Serializable;\r\n    import java.util.LinkedList;\r\n    import java.util.List;\r\n    import java.util.jar.Attributes;\r\n\r\n    public class SecondActivity extends AppCompatActivity{\r\n\r\n        @Override\r\n        protected void onCreate(Bundle savedInstanceState) {\r\n            super.onCreate(savedInstanceState);\r\n            setContentView(R.layout.activity_second);\r\n\r\n        }\r\n\r\n    }\r\n\r\n&lt;!-- end snippet --&gt;\r\n\r\nplease if anyone help me understand what is making my app crash everytime i press the send button! it would really help me a lot.","title":"Android Studio - The (Very) Basics - startActivty doesn&#39;t work","body":"<p>im trying to move the info of a user from one activity to the other, but everytime i run the app it crashes <strong>at the &quot;startActivity(i)&quot; Line</strong> (i checked everything else, it only crashes at that line).</p>\n<p>that's the MainActivity Code</p>\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>package com.example.hw1511;\n\nimport androidx.appcompat.app.AppCompatActivity;\n\nimport android.content.Intent;\nimport android.os.Bundle;\nimport android.view.View;\nimport android.widget.Button;\nimport android.widget.EditText;\nimport android.widget.TextView;\nimport android.widget.Toast;\n\nimport com.example.hw1511.Model.User;\n\nimport org.w3c.dom.Text;\n\nimport java.io.Serializable;\nimport java.util.LinkedList;\nimport java.util.List;\n\npublic class MainActivity extends AppCompatActivity implements Serializable {\n    private EditText Name;\n    private EditText Age;\n    private EditText Birth;\n    private Button AddUser;\n    private Button Send;\n\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.activity_main);\n        Name = findViewById(R.id.Name);\n        Age = findViewById(R.id.Age);\n        Birth = findViewById(R.id.Birth);\n        AddUser = findViewById(R.id.AddUser);\n        Send = findViewById(R.id.Send);\n\n        Intent i = new Intent(MainActivity.this, SecondActivity.class);\n        List&lt;User&gt; list1 = new LinkedList&lt;&gt;();\n\n\n        AddUser.setOnClickListener(new View.OnClickListener() {\n            @Override\n            public void onClick(View v) {\n                \n              if (Name.getText().toString().trim().length() &gt; 0 &amp;&amp; Age.getText().toString().trim().length() &gt; 0 &amp;&amp; Birth.getText().toString().trim().length() &gt; 0) {\n                  User u = new User(Name.getText().toString(), Integer.parseInt(Age.getText().toString()), Birth.getText().toString());\n                   list1.add(u);\n                    Name.setText(\"\");\n                    Age.setText(\"\");\n                    Birth.setText(\"\");\n               }\n               else {\n                   Toast.makeText(MainActivity.this, \"Fill All\", Toast.LENGTH_SHORT).show();\n               }\n            }\n        });\n\n        Send.setOnClickListener(new View.OnClickListener() {\n            @Override\n            public void onClick(View v) {\n\n                    i.putExtra(\"Users\", (Serializable) list1);\n                    startActivity(i);\n\n                \n\n            }\n        });\n\n    }\n}</code></pre>\r\n</div>\r\n</div>\r\n</p>\n<p>and that's the SecondActivty Code (it's preety much empty)</p>\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>package com.example.hw1511;\n\nimport androidx.appcompat.app.AppCompatActivity;\n\nimport android.content.Intent;\nimport android.os.Bundle;\nimport android.view.View;\nimport android.widget.Button;\nimport android.widget.TextView;\nimport android.widget.Toast;\n\nimport com.example.hw1511.Model.User;\n\nimport java.io.Serializable;\nimport java.util.LinkedList;\nimport java.util.List;\nimport java.util.jar.Attributes;\n\npublic class SecondActivity extends AppCompatActivity{\n\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.activity_second);\n\n    }\n\n}</code></pre>\r\n</div>\r\n</div>\r\n</p>\n<p>please if anyone help me understand what is making my app crash everytime i press the send button! it would really help me a lot.</p>\n"},{"tags":["java","arrays","arraylist","serialization","deserialization"],"answers":[{"tags":[],"owner":{"account_id":19393576,"reputation":53,"user_id":14181700,"display_name":"Devarshi Rawal"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1637407736,"creation_date":1637407362,"answer_id":70045445,"question_id":69886568,"body_markdown":"Please try this :-\r\n\r\n    class demo{\r\n    \t\r\n       public static void main(String[] args){\r\n           try{\r\n                 ArrayList&lt;Employee&gt; arrayList = new ArrayList&lt;&gt;();\r\n                 ObjectInputStream in = new ObjectInputStream(new FileInputStream(&quot;employee.ser&quot;));\r\n                 for(int i=0; i&lt;7; i++){\r\n                        Employee employee = (Employee)in.readObject();\r\n                        arrayList.add(employee);\r\n                 }\r\n                 in.close();\r\n              }\r\n              catch(Exception e){\r\n                    System.out.print(e);\r\n              }\r\n         }\r\n    }","title":"Serialized file, deserialize file in arraylist","body":"<p>Please try this :-</p>\n<pre><code>class demo{\n    \n   public static void main(String[] args){\n       try{\n             ArrayList&lt;Employee&gt; arrayList = new ArrayList&lt;&gt;();\n             ObjectInputStream in = new ObjectInputStream(new FileInputStream(&quot;employee.ser&quot;));\n             for(int i=0; i&lt;7; i++){\n                    Employee employee = (Employee)in.readObject();\n                    arrayList.add(employee);\n             }\n             in.close();\n          }\n          catch(Exception e){\n                System.out.print(e);\n          }\n     }\n}\n</code></pre>\n"}],"owner":{"account_id":21878866,"reputation":1,"user_id":16167506,"display_name":"Mabheka"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":45,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1637407736,"creation_date":1636387809,"question_id":69886568,"body_markdown":"I want to read the serialized file from a different class and populate an ArrayList with the object values. Anyone can help me?\r\n\r\n```java \r\n    import java.io.*; \r\n    public class CreateEmployeeSer{\r\n\r\n    public static void main(String args[])  {\r\n    \ttry\r\n        {\r\n           ObjectOutputStream output = new ObjectOutputStream( new FileOutputStream(&quot;employee.ser&quot;));\r\n           output.writeObject(new Employee(101, &quot;Brown&quot;, 6500, M, 28));\r\n           output.writeObject(new Employee(201, &quot;Johnson&quot;, 6300, F, 28));\r\n           output.writeObject(new Employee(301, &quot;Belt&quot;, 5500, F, 30));\r\n           output.writeObject(new Employee(401, &quot;Bulb&quot;, 7400, M, 40));\r\n           output.writeObject(new Employee(501, &quot;Goodness&quot;, 6400, F, 30));\r\n           output.writeObject(new Employee(601, &quot;Filter&quot;, 4900, F, 22));\r\n           output.writeObject(new Employee(701, &quot;Porto&quot;, 5000, M, 19));\r\n\r\n           output.close();\r\n        }//end try       \r\n        catch(IOException fnfe)\r\n        {\r\n            System.out.println(fnfe);\r\n            System.exit(1);\r\n        }\r\n    }//end main\r\n}\r\n```","title":"Serialized file, deserialize file in arraylist","body":"<p>I want to read the serialized file from a different class and populate an ArrayList with the object values. Anyone can help me?</p>\n<pre class=\"lang-java prettyprint-override\"><code>    import java.io.*; \n    public class CreateEmployeeSer{\n\n    public static void main(String args[])  {\n        try\n        {\n           ObjectOutputStream output = new ObjectOutputStream( new FileOutputStream(&quot;employee.ser&quot;));\n           output.writeObject(new Employee(101, &quot;Brown&quot;, 6500, M, 28));\n           output.writeObject(new Employee(201, &quot;Johnson&quot;, 6300, F, 28));\n           output.writeObject(new Employee(301, &quot;Belt&quot;, 5500, F, 30));\n           output.writeObject(new Employee(401, &quot;Bulb&quot;, 7400, M, 40));\n           output.writeObject(new Employee(501, &quot;Goodness&quot;, 6400, F, 30));\n           output.writeObject(new Employee(601, &quot;Filter&quot;, 4900, F, 22));\n           output.writeObject(new Employee(701, &quot;Porto&quot;, 5000, M, 19));\n\n           output.close();\n        }//end try       \n        catch(IOException fnfe)\n        {\n            System.out.println(fnfe);\n            System.exit(1);\n        }\n    }//end main\n}\n</code></pre>\n"},{"tags":["java","binary-search-tree"],"comments":[{"owner":{"account_id":19236738,"reputation":3,"user_id":16459931,"display_name":"Alan Mou"},"score":0,"creation_date":1626412808,"post_id":68403384,"comment_id":120890648,"body_markdown":"BST actually means &quot;Binary Search Tree&quot;","body":"BST actually means &quot;Binary Search Tree&quot;"},{"owner":{"account_id":7142980,"reputation":323253,"user_id":5459839,"display_name":"trincot"},"score":0,"creation_date":1626431892,"post_id":68403384,"comment_id":120897038,"body_markdown":"The input format gives no clue about left and right. At least there is a specification missing. Possibly there is a rule that the first mentioned child is always assumed to be a left child, and the second is a right child, and that for each node it is guaranteed that both left and right child will be mentioned in the input, and in that order. This should be clarified. Why for instance does the input not have &quot;5 -1&quot; and &quot;5 -1&quot;? Is there an assumption that if a node is a leaf, it is never listed like that?","body":"The input format gives no clue about left and right. At least there is a specification missing. Possibly there is a rule that the first mentioned child is always assumed to be a left child, and the second is a right child, and that for each node it is guaranteed that both left and right child will be mentioned in the input, and in that order. This should be clarified. Why for instance does the input not have &quot;5 -1&quot; and &quot;5 -1&quot;? Is there an assumption that if a node is a leaf, it is never listed like that?"},{"owner":{"account_id":19236738,"reputation":3,"user_id":16459931,"display_name":"Alan Mou"},"score":0,"creation_date":1626432753,"post_id":68403384,"comment_id":120897370,"body_markdown":"@trincot I just added the detailed description of this problem. I think the problem assumes that if the node is a left child, then there will not be statement like `5 -1`.","body":"@trincot I just added the detailed description of this problem. I think the problem assumes that if the node is a left child, then there will not be statement like <code>5 -1</code>."},{"owner":{"account_id":9537825,"reputation":1490,"user_id":7275056,"display_name":"vsfDawg"},"score":0,"creation_date":1626435157,"post_id":68403384,"comment_id":120898240,"body_markdown":"What does the number in the expected output indicate (e.g. `YES 2`)?  Number of nodes?  Depth of tree?  Is there a consistent order to the input?  Does the BST allow duplicates?","body":"What does the number in the expected output indicate (e.g. <code>YES 2</code>)?  Number of nodes?  Depth of tree?  Is there a consistent order to the input?  Does the BST allow duplicates?"},{"owner":{"account_id":19236738,"reputation":3,"user_id":16459931,"display_name":"Alan Mou"},"score":0,"creation_date":1626436441,"post_id":68403384,"comment_id":120898769,"body_markdown":"@vsfDawg The number 2 means the number of leaf nodes. There is no duplicate nodes and also all the values of nodes are positive.","body":"@vsfDawg The number 2 means the number of leaf nodes. There is no duplicate nodes and also all the values of nodes are positive."}],"answers":[{"tags":[],"owner":{"account_id":7142980,"reputation":323253,"user_id":5459839,"display_name":"trincot"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1626441324,"creation_date":1626441324,"answer_id":68409669,"question_id":68403384,"body_markdown":"Your approach will not work consistently, because:\r\n\r\n* A binary search tree does not have to be a complete tree\r\n* It is not guaranteed that the order of the input will be breadth-first\r\n* It seems not guaranteed that the two children of the same parent, appear right after each other in the input.\r\n\r\nFor this reason you cannot use `i` to define where in the array to store a node&#39;s value, with a formula like `2 * (i - 1) + 1`, nor can you check that the parent already has appeared before with `res[i - 1]`.\r\n\r\nFor instance, your program will answer &quot;NO&quot; for this valid BST:\r\n\r\n    6\r\n    3 2\r\n    3 -1\r\n    2 1\r\n    2 -1\r\n    1 -1\r\n    1 -1\r\n\r\nAnd if we input the same tree, without the unnecessary `1 -1` (twice), like this:\r\n\r\n    4\r\n    3 2\r\n    3 -1\r\n    2 1\r\n    2 -1\r\n\r\n...then there is an out-of-bounds exception.\r\n\r\nSecondly, it is not enough in `isBST` to compare the value of a child with its parent. Even when that comparison is fine, you could still have an invalid BST, like for example this one:\r\n\r\n                      4\r\n                    /\r\n                   1\r\n                     \\\r\n                      10\r\n\r\nThis is invalid, as the only valid (distinct) integer values for that leaf are 2 or 3. So you need to have to check against a range that sifts down the recursion tree.\r\n\r\nA pragmatic solution is to really build the tree with `Node` class instances, and let `isBST` be an instance method of that class, which takes into account also this range requirement. ","title":"Given a set of data, check if it is a Binary Search Tree?","body":"<p>Your approach will not work consistently, because:</p>\n<ul>\n<li>A binary search tree does not have to be a complete tree</li>\n<li>It is not guaranteed that the order of the input will be breadth-first</li>\n<li>It seems not guaranteed that the two children of the same parent, appear right after each other in the input.</li>\n</ul>\n<p>For this reason you cannot use <code>i</code> to define where in the array to store a node's value, with a formula like <code>2 * (i - 1) + 1</code>, nor can you check that the parent already has appeared before with <code>res[i - 1]</code>.</p>\n<p>For instance, your program will answer &quot;NO&quot; for this valid BST:</p>\n<pre><code>6\n3 2\n3 -1\n2 1\n2 -1\n1 -1\n1 -1\n</code></pre>\n<p>And if we input the same tree, without the unnecessary <code>1 -1</code> (twice), like this:</p>\n<pre><code>4\n3 2\n3 -1\n2 1\n2 -1\n</code></pre>\n<p>...then there is an out-of-bounds exception.</p>\n<p>Secondly, it is not enough in <code>isBST</code> to compare the value of a child with its parent. Even when that comparison is fine, you could still have an invalid BST, like for example this one:</p>\n<pre><code>                  4\n                /\n               1\n                 \\\n                  10\n</code></pre>\n<p>This is invalid, as the only valid (distinct) integer values for that leaf are 2 or 3. So you need to have to check against a range that sifts down the recursion tree.</p>\n<p>A pragmatic solution is to really build the tree with <code>Node</code> class instances, and let <code>isBST</code> be an instance method of that class, which takes into account also this range requirement.</p>\n"}],"owner":{"account_id":19236738,"reputation":3,"user_id":16459931,"display_name":"Alan Mou"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":599,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":68409669,"answer_count":1,"score":0,"last_activity_date":1637407300,"creation_date":1626409269,"question_id":68403384,"body_markdown":"The detailed description of this problem is as follows:\r\n each row contains two values `x` and `y`, which denotes that the node with key `x` is the parent of the node with key `y`. The first `y` is the left child of `x`, the second `y` is the right child of `x`. If the `y` is `-1`, there is no corresponding child of `x` . Notice that the keys of all the nodes in the tree are **distinct** and **positive**.\r\n\r\n**Added**: I&#39;ve already found some mistakes in my code: **1.** The nodes given in the data set may not be from the first layer to the bottom layer, which means after read one line, I need to search the index of the parent node and then add the child. **2**. The `isBST()` function is not correct since a tree is a binary search tree if the **left subtree** is recursively smaller than the current node and the **right subtree** is recursively larger than the current node. *The first one is easy to solve but I have no idea how to solve the second one.*\r\n\r\nSample Input\r\n\r\n    4\r\n    10 5\r\n    10 30\r\n    30 20\r\n    30 -1\r\n\r\nthe number on the first row denotes the number of rows below.\r\nfor each row, the left number denotes the parent, and the right number denotes the child. If the right number is `-1`, it means that there is no corresponding child.\r\n\r\nSample Output\r\n\r\n    YES 2\r\n\r\nI think my code can successfully pass the test points when the answer should be &quot;No&quot;. However, for those cases that should be &quot;YES + num&quot;, my code fails. Could anybody point out the mistakes in my code?\r\n\r\nActually, I am not quite sure about the accurate definition of Binary search tree. For the sample input, I do not think it is a complete binary tree. Do I need to take the number of layers of this tree into consideration?\r\n\r\nMy idea is quite straightforward, I just read the data and store them into an array and use the property that the left child for a value stored at index `i` is `2 * i` and the right child is `2 * i + 1`.\r\n\r\n```\r\nimport java.io.BufferedReader;\r\nimport java.io.IOException;\r\nimport java.io.InputStreamReader;\r\nimport java.util.Arrays;\r\n\r\npublic class BST {\r\n\r\n\tpublic static int[] readData() throws IOException {\r\n\t\t\r\n\t\tBufferedReader br = new BufferedReader(new InputStreamReader(System.in));\r\n\t\t// get the number of rows\r\n\t\tint n = Integer.parseInt(br.readLine());\r\n\t\tString[] strs;\r\n\t\tint[] res = new int[2 * n];\r\n\t\tfor (int i = 1; i &lt; n + 1; i++) {\r\n\t\t\tstrs = br.readLine().trim().split(&quot; &quot;);\r\n\t\t\t//System.out.println(Arrays.toString(strs));\r\n\t\t\t\r\n\t\t\t// read the left and right number of one row resp.\r\n\t\t\tint parent = Integer.parseInt(strs[0]);\r\n\t\t\tint child = Integer.parseInt(strs[1]);\r\n\t\t\t// which means that there is no corresponding child, use 0 to denote null\r\n\t\t\tif (child == -1) {\r\n\t\t\t\tchild = 0;\r\n\t\t\t}\r\n\t\t\t// read the second line with the same parent\r\n\t\t\tif (res[i - 1] == parent) {\r\n\t\t\t// put the child as the right child\t\r\n\t\t\t\tres[2 * (i - 1) + 1] = child;\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tres[i] = parent;\r\n\t\t\t\tres[2 * i] = child;\r\n\t\t\t}\r\n\t\t}\r\n\t\tbr.close();\r\n\t\treturn res;\r\n\t}\r\n\t\r\n\tpublic static boolean isLeaf(int[] data, int index) {\r\n\t\t\r\n\t\t// if the node is null, it is not a leaf\r\n\t\tif (data[index] == 0) return false;\r\n\t\t\r\n\t\t\r\n\t\tif (2 * index &lt; data.length - 1) {\r\n\t\t\t// the left and right children are both null\r\n\t\t\tif (data[2 * index] == 0 &amp;&amp; data[2 * index + 1] == 0) {\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t\t// the left and right children are not both null\r\n\t\t\telse {\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t}\r\n\t\t// 2 * index is out of bound\r\n\t\telse {\r\n\t\t\treturn true;\r\n\t\t}\r\n\t}\r\n\t\r\n\tpublic static int countLeaf(int[] data) {\r\n\t\tint count = 0;\r\n\t\tfor (int i = 1; i &lt; data.length; i++) {\r\n\t\t\t// if the node is a leaf, count it\r\n\t\t\tif (isLeaf(data, i)) count++;\r\n\t\t}\r\n\t\treturn count;\r\n\t}\r\n\t\r\n\tpublic static boolean checkBSTprop(int[] data, int index) {\r\n\t\t// no child can be found\r\n\t\tif (2 * index &gt;= data.length) {\r\n\t\t\treturn true;\r\n\t\t}\r\n\t\t// no child\r\n\t\tif (data[2 * index] == 0 &amp;&amp; data[2 * index + 1] == 0) {\r\n\t\t\treturn true;\r\n\t\t}\r\n\t\t// left child is 0, right child is nonzero\r\n\t\tif (data[2 * index] == 0 &amp;&amp; data[2 * index + 1] &gt; data[index]) {\r\n\t\t\treturn true;\r\n\t\t}\r\n\t\t// right child is 0, left child is nonzero\r\n\t\tif (data[2 * index + 1] == 0 &amp;&amp; data[2 * index] &lt; data[index]) {\r\n\t\t\treturn true;\r\n\t\t}\r\n\t\t// both children are nonzero\r\n\t\tif (data[2 * index] &lt; data[index] &amp;&amp; data[2 * index + 1] &gt; data[index]) {\r\n\t\t\treturn true;\r\n\t\t}\r\n\t\t// none of the conditions are satisfied\r\n\t\treturn false;\r\n\t}\r\n\t\r\n\tpublic static boolean isBST(int[] data) {\r\n\t\tfor (int i = 1; i &lt; data.length; i++) {\r\n\t\t\tif (!checkBSTprop(data, i)) {\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn true;\r\n\t}\r\n\t\r\n\tpublic static void main(String[] args) throws IOException {\r\n\t\tint[] res = readData();\r\n\t\tint num = countLeaf(res);\r\n\t\t\r\n\t\t/*\r\n\t\tSystem.out.println(Arrays.toString(res));\r\n\t\tSystem.out.println(countLeaf(res));\r\n\t\tSystem.out.println(checkBSTprop(res, 1));\r\n\t\tSystem.out.println(checkBSTprop(res, 2));\r\n\t\tSystem.out.println(checkBSTprop(res, 3));\r\n\t\tSystem.out.println(checkBSTprop(res, 6));\r\n\t\tSystem.out.println(isBST(res));\r\n\t\t*/\r\n\t\t\r\n\t\tif (isBST(res)) {\r\n\t\t\tSystem.out.println(&quot;YES &quot; + num);\r\n\t\t}\r\n\t\telse {\r\n\t\t\tSystem.out.println(&quot;NO&quot;);\r\n\t\t}\r\n\t\t\r\n\t}\r\n}\r\n```","title":"Given a set of data, check if it is a Binary Search Tree?","body":"<p>The detailed description of this problem is as follows:\neach row contains two values <code>x</code> and <code>y</code>, which denotes that the node with key <code>x</code> is the parent of the node with key <code>y</code>. The first <code>y</code> is the left child of <code>x</code>, the second <code>y</code> is the right child of <code>x</code>. If the <code>y</code> is <code>-1</code>, there is no corresponding child of <code>x</code> . Notice that the keys of all the nodes in the tree are <strong>distinct</strong> and <strong>positive</strong>.</p>\n<p><strong>Added</strong>: I've already found some mistakes in my code: <strong>1.</strong> The nodes given in the data set may not be from the first layer to the bottom layer, which means after read one line, I need to search the index of the parent node and then add the child. <strong>2</strong>. The <code>isBST()</code> function is not correct since a tree is a binary search tree if the <strong>left subtree</strong> is recursively smaller than the current node and the <strong>right subtree</strong> is recursively larger than the current node. <em>The first one is easy to solve but I have no idea how to solve the second one.</em></p>\n<p>Sample Input</p>\n<pre><code>4\n10 5\n10 30\n30 20\n30 -1\n</code></pre>\n<p>the number on the first row denotes the number of rows below.\nfor each row, the left number denotes the parent, and the right number denotes the child. If the right number is <code>-1</code>, it means that there is no corresponding child.</p>\n<p>Sample Output</p>\n<pre><code>YES 2\n</code></pre>\n<p>I think my code can successfully pass the test points when the answer should be &quot;No&quot;. However, for those cases that should be &quot;YES + num&quot;, my code fails. Could anybody point out the mistakes in my code?</p>\n<p>Actually, I am not quite sure about the accurate definition of Binary search tree. For the sample input, I do not think it is a complete binary tree. Do I need to take the number of layers of this tree into consideration?</p>\n<p>My idea is quite straightforward, I just read the data and store them into an array and use the property that the left child for a value stored at index <code>i</code> is <code>2 * i</code> and the right child is <code>2 * i + 1</code>.</p>\n<pre><code>import java.io.BufferedReader;\nimport java.io.IOException;\nimport java.io.InputStreamReader;\nimport java.util.Arrays;\n\npublic class BST {\n\n    public static int[] readData() throws IOException {\n        \n        BufferedReader br = new BufferedReader(new InputStreamReader(System.in));\n        // get the number of rows\n        int n = Integer.parseInt(br.readLine());\n        String[] strs;\n        int[] res = new int[2 * n];\n        for (int i = 1; i &lt; n + 1; i++) {\n            strs = br.readLine().trim().split(&quot; &quot;);\n            //System.out.println(Arrays.toString(strs));\n            \n            // read the left and right number of one row resp.\n            int parent = Integer.parseInt(strs[0]);\n            int child = Integer.parseInt(strs[1]);\n            // which means that there is no corresponding child, use 0 to denote null\n            if (child == -1) {\n                child = 0;\n            }\n            // read the second line with the same parent\n            if (res[i - 1] == parent) {\n            // put the child as the right child \n                res[2 * (i - 1) + 1] = child;\n            }\n            else {\n                res[i] = parent;\n                res[2 * i] = child;\n            }\n        }\n        br.close();\n        return res;\n    }\n    \n    public static boolean isLeaf(int[] data, int index) {\n        \n        // if the node is null, it is not a leaf\n        if (data[index] == 0) return false;\n        \n        \n        if (2 * index &lt; data.length - 1) {\n            // the left and right children are both null\n            if (data[2 * index] == 0 &amp;&amp; data[2 * index + 1] == 0) {\n                return true;\n            }\n            // the left and right children are not both null\n            else {\n                return false;\n            }\n        }\n        // 2 * index is out of bound\n        else {\n            return true;\n        }\n    }\n    \n    public static int countLeaf(int[] data) {\n        int count = 0;\n        for (int i = 1; i &lt; data.length; i++) {\n            // if the node is a leaf, count it\n            if (isLeaf(data, i)) count++;\n        }\n        return count;\n    }\n    \n    public static boolean checkBSTprop(int[] data, int index) {\n        // no child can be found\n        if (2 * index &gt;= data.length) {\n            return true;\n        }\n        // no child\n        if (data[2 * index] == 0 &amp;&amp; data[2 * index + 1] == 0) {\n            return true;\n        }\n        // left child is 0, right child is nonzero\n        if (data[2 * index] == 0 &amp;&amp; data[2 * index + 1] &gt; data[index]) {\n            return true;\n        }\n        // right child is 0, left child is nonzero\n        if (data[2 * index + 1] == 0 &amp;&amp; data[2 * index] &lt; data[index]) {\n            return true;\n        }\n        // both children are nonzero\n        if (data[2 * index] &lt; data[index] &amp;&amp; data[2 * index + 1] &gt; data[index]) {\n            return true;\n        }\n        // none of the conditions are satisfied\n        return false;\n    }\n    \n    public static boolean isBST(int[] data) {\n        for (int i = 1; i &lt; data.length; i++) {\n            if (!checkBSTprop(data, i)) {\n                return false;\n            }\n        }\n        return true;\n    }\n    \n    public static void main(String[] args) throws IOException {\n        int[] res = readData();\n        int num = countLeaf(res);\n        \n        /*\n        System.out.println(Arrays.toString(res));\n        System.out.println(countLeaf(res));\n        System.out.println(checkBSTprop(res, 1));\n        System.out.println(checkBSTprop(res, 2));\n        System.out.println(checkBSTprop(res, 3));\n        System.out.println(checkBSTprop(res, 6));\n        System.out.println(isBST(res));\n        */\n        \n        if (isBST(res)) {\n            System.out.println(&quot;YES &quot; + num);\n        }\n        else {\n            System.out.println(&quot;NO&quot;);\n        }\n        \n    }\n}\n</code></pre>\n"},{"tags":["java","spring-boot","neo4j","spring-data-neo4j"],"comments":[{"owner":{"account_id":3133300,"reputation":7957,"user_id":2650436,"accept_rate":80,"display_name":"meistermeier"},"score":1,"creation_date":1637229586,"post_id":69980703,"comment_id":123772240,"body_markdown":"There isn&#39;t such a functionality in SDN 6+. I wonder why you need this information in a `@PostLoad` method call. Wouldn&#39;t it be sufficient to calculate the transient values &quot;on first access&quot;?","body":"There isn&#39;t such a functionality in SDN 6+. I wonder why you need this information in a <code>@PostLoad</code> method call. Wouldn&#39;t it be sufficient to calculate the transient values &quot;on first access&quot;?"},{"owner":{"account_id":2007859,"reputation":894,"user_id":1797200,"accept_rate":75,"display_name":"Chris"},"score":0,"creation_date":1637237420,"post_id":69980703,"comment_id":123775329,"body_markdown":"@meistermeier That was my workaround solution, that has now become the permanent solution, I guess. It makes the code a bit bloaty, but it&#39;s feasible.","body":"@meistermeier That was my workaround solution, that has now become the permanent solution, I guess. It makes the code a bit bloaty, but it&#39;s feasible."}],"answers":[{"tags":[],"owner":{"account_id":2007859,"reputation":894,"user_id":1797200,"accept_rate":75,"display_name":"Chris"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1637407126,"creation_date":1637407126,"answer_id":70045407,"question_id":69980703,"body_markdown":"As of Gerrit&#39;s comment, there is no such function in SDN 6+.\r\nThe solution is to initialize your transient values in your getters.\r\n\r\nHere is a very simplified version of what I did:\r\n\r\n```\r\n@Node\r\npublic class Event {\r\n\r\n    @Id @GeneratedValue @Getter\r\n    private Long id;\r\n\r\n    @Getter @Setter\r\n    private String title;\r\n    @Transient\r\n    private Integer year;\r\n    @Getter @Setter\r\n    private ZonedDateTime fullDate;\r\n\r\n}\r\n\r\npublic Integer getYear() {\r\n    public Integer getYear() {\r\n        if (year == null &amp;&amp; this.fullDate != null) year = this.fullDate.getYear();\r\n        return year;\r\n    }\r\n}\r\n```\r\n\r\nSemantically this code does probably not make sense, because the real code is much more complicated. So please don&#39;t comment things like &quot;You would not need a transient attribute for this.&quot;","title":"How do I execute a method on an entity after it has been loaded in Spring Data Neo4j &gt;=v6","body":"<p>As of Gerrit's comment, there is no such function in SDN 6+.\nThe solution is to initialize your transient values in your getters.</p>\n<p>Here is a very simplified version of what I did:</p>\n<pre><code>@Node\npublic class Event {\n\n    @Id @GeneratedValue @Getter\n    private Long id;\n\n    @Getter @Setter\n    private String title;\n    @Transient\n    private Integer year;\n    @Getter @Setter\n    private ZonedDateTime fullDate;\n\n}\n\npublic Integer getYear() {\n    public Integer getYear() {\n        if (year == null &amp;&amp; this.fullDate != null) year = this.fullDate.getYear();\n        return year;\n    }\n}\n</code></pre>\n<p>Semantically this code does probably not make sense, because the real code is much more complicated. So please don't comment things like &quot;You would not need a transient attribute for this.&quot;</p>\n"}],"owner":{"account_id":2007859,"reputation":894,"user_id":1797200,"accept_rate":75,"display_name":"Chris"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":446,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":70045407,"answer_count":1,"score":0,"last_activity_date":1637407126,"creation_date":1637009412,"question_id":69980703,"body_markdown":"In Spring Data Neo4j 5 there was an annotation @PostLoad similar to other persistance frameworks. This annotation seems to be gone in version 6 (I&#39;m using 6.1.6)\r\n\r\nI want to populate some transient properties, after the node has been loaded.","title":"How do I execute a method on an entity after it has been loaded in Spring Data Neo4j &gt;=v6","body":"<p>In Spring Data Neo4j 5 there was an annotation @PostLoad similar to other persistance frameworks. This annotation seems to be gone in version 6 (I'm using 6.1.6)</p>\n<p>I want to populate some transient properties, after the node has been loaded.</p>\n"},{"tags":["java","android"],"comments":[{"owner":{"account_id":16768304,"reputation":8503,"user_id":12121419,"display_name":"blackapps"},"score":0,"creation_date":1637396921,"post_id":70043771,"comment_id":123819620,"body_markdown":"Your text has no font styling. Your text view has. You copy paste just text. And there is no question in your post. Nor are you telling what you do.","body":"Your text has no font styling. Your text view has. You copy paste just text. And there is no question in your post. Nor are you telling what you do."},{"owner":{"account_id":18716710,"reputation":1336,"user_id":14291243,"display_name":"Abhishek Dutt"},"score":0,"creation_date":1637398834,"post_id":70043771,"comment_id":123819881,"body_markdown":"This might help : https://developer.android.com/reference/android/content/ClipData.html#implementing-copy-or-drag","body":"This might help : <a href=\"https://developer.android.com/reference/android/content/ClipData.html#implementing-copy-or-drag\" rel=\"nofollow noreferrer\">developer.android.com/reference/android/content/&hellip;</a>"}],"owner":{"account_id":21016045,"reputation":1,"user_id":15443486,"display_name":"Divyam Savsaviya"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":256,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1637406519,"creation_date":1637390273,"question_id":70043771,"body_markdown":"Here is what i have tried. \r\n\r\nI used `string=&quot;TextView&quot;` and `font family=&quot;aguafina_script&quot;`, when i paste the clip it loses its `font family &quot;aguafina_script&quot;` and paste only **TextView**.\r\n\r\n``` \r\ntextView.setOnClickListener(v -&gt; {\r\n            ClipboardManager clipboardManager = (ClipboardManager) getSystemService(Context.CLIPBOARD_SERVICE);\r\n            ClipData clipData = ClipData.newPlainText(&quot;data&quot;,textView.getText());\r\n            clipboardManager.setPrimaryClip(clipData);\r\n});\r\n```","title":"How to copy and paste text with its font styling in android?","body":"<p>Here is what i have tried.</p>\n<p>I used <code>string=&quot;TextView&quot;</code> and <code>font family=&quot;aguafina_script&quot;</code>, when i paste the clip it loses its <code>font family &quot;aguafina_script&quot;</code> and paste only <strong>TextView</strong>.</p>\n<pre><code>textView.setOnClickListener(v -&gt; {\n            ClipboardManager clipboardManager = (ClipboardManager) getSystemService(Context.CLIPBOARD_SERVICE);\n            ClipData clipData = ClipData.newPlainText(&quot;data&quot;,textView.getText());\n            clipboardManager.setPrimaryClip(clipData);\n});\n</code></pre>\n"},{"tags":["java","encoding"],"answers":[{"tags":[],"owner":{"account_id":246,"reputation":107903,"user_id":304,"accept_rate":40,"display_name":"McDowell"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1246443659,"creation_date":1246443659,"answer_id":1068359,"question_id":1066845,"body_markdown":"I believe that this value represents the system encoding, which may be different from the user encoding (&quot;file.encoding&quot;) on some platforms. The &quot;sun&quot; prefix makes me suspect that this is an implementation detail specific to the Sun JRE (a quick look at an IBM 1.4 VM shows an &quot;ibm.system.encoding&quot; system property). I have no idea on how this might be used internally - though I&#39;m sure a quick look through the [source][1] would yield some clues.\r\n\r\n\r\n  [1]: http://download.java.net/jdk7/","title":"What exactly is sun.jnu.encoding?","body":"<p>I believe that this value represents the system encoding, which may be different from the user encoding (\"file.encoding\") on some platforms. The \"sun\" prefix makes me suspect that this is an implementation detail specific to the Sun JRE (a quick look at an IBM 1.4 VM shows an \"ibm.system.encoding\" system property). I have no idea on how this might be used internally - though I'm sure a quick look through the <a href=\"http://download.java.net/jdk7/\" rel=\"nofollow noreferrer\">source</a> would yield some clues.</p>\n"},{"tags":[],"owner":{"account_id":592269,"reputation":311,"user_id":271730,"display_name":"asdfasdg"},"down_vote_count":0,"up_vote_count":31,"is_accepted":false,"score":31,"last_activity_date":1320327481,"creation_date":1265968506,"answer_id":2250911,"question_id":1066845,"body_markdown":"see http://happygiraffe.net/blog/2009/09/24/java-platform-encoding/\r\n\r\nThis link describes the usage of the `sun.jnu.encoding` property for using the correct encoding when parsing values passed via the commandline, something that setting the `file.encoding` property doesn&#39;t influence.","title":"What exactly is sun.jnu.encoding?","body":"<p>see <a href=\"http://happygiraffe.net/blog/2009/09/24/java-platform-encoding/\" rel=\"noreferrer\">http://happygiraffe.net/blog/2009/09/24/java-platform-encoding/</a></p>\n\n<p>This link describes the usage of the <code>sun.jnu.encoding</code> property for using the correct encoding when parsing values passed via the commandline, something that setting the <code>file.encoding</code> property doesn't influence.</p>\n"},{"tags":[],"owner":{"account_id":150769,"reputation":371,"user_id":364186,"display_name":"siddagrl"},"down_vote_count":0,"up_vote_count":16,"is_accepted":false,"score":16,"last_activity_date":1291786678,"creation_date":1291786678,"answer_id":4384506,"question_id":1066845,"body_markdown":"I did some investigation on encoding and as per my analysis\r\n\r\n1. sun.jnu.encoding affects the creation of file name (this possibly gets set by LANG on unix before starting java)\r\n2. file.encoding affects the content of a file","title":"What exactly is sun.jnu.encoding?","body":"<p>I did some investigation on encoding and as per my analysis</p>\n\n<ol>\n<li>sun.jnu.encoding affects the creation of file name (this possibly gets set by LANG on unix before starting java)</li>\n<li>file.encoding affects the content of a file</li>\n</ol>\n"},{"tags":[],"owner":{"account_id":811326,"reputation":782,"user_id":918389,"display_name":"Maxime Kjaer"},"down_vote_count":0,"up_vote_count":9,"is_accepted":false,"score":9,"last_activity_date":1598964792,"creation_date":1598964792,"answer_id":63688076,"question_id":1066845,"body_markdown":"I tried to centralize all the information provided in the answers here and elsewhere on the Web, in order to make the most complete answer possible.\r\n\r\nAs other comments have noted, there are actually two properties that affect the chosen encoding on the JVM:\r\n\r\n - `sun.jnu.encoding`, also known as the &quot;platform encoding&quot; or &quot;JNU encoding&quot;, is an undocumented, [internal](https://www.oracle.com/java/technologies/faq-sun-packages.html) property that holds the name of the encoding to use for interacting with the platform (e.g. [file paths](https://openjdk.java.net/jeps/8187041) and [JNI C String to Java String conversions](https://github.com/openjdk/jdk/blob/79d12507b373f4d46702cd606eda8590c1d03318/src/java.base/share/native/libjava/jni_util.c#L794-L810) — maybe also [command-line arguments, main classes and environment variables](https://web.archive.org/web/20200202094903/http://happygiraffe.net/blog/2009/09/24/java-platform-encoding/), but I wasn&#39;t able to verify this claim).  \r\n​    \r\nOn [MacOS](https://github.com/openjdk/jdk/blob/a4ab61339bbd4a39f806c514039e2dd47dcb4169/src/java.base/unix/native/libjava/java_props_md.c#L452-L456), this is always UTF-8, on [Linux](https://github.com/openjdk/jdk/blob/a4ab61339bbd4a39f806c514039e2dd47dcb4169/src/java.base/unix/native/libjava/java_props_md.c#L455) it&#39;s always the same as `file.encoding` (unless `file.encoding` is overriden, in which case I do not know what happens), and on [Windows](https://github.com/openjdk/jdk/blob/a4ab61339bbd4a39f806c514039e2dd47dcb4169/src/java.base/windows/native/libjava/java_props_md.c#L677-L688) it can vary.\r\n\r\n - `file.encoding`, also known as the &quot;default charset&quot; or &quot;user encoding&quot;, is mainly used to determine the charset for encoding/decoding file *contents*. This is the charset that `java.nio.charsets.Charset.defaultCharset()` returns. Note that the value in `file.encoding` is used by many JDK APIs as the default encoding, but can be overridden by providing an explicit `Charset` or a charset name in the call to the JDK method.\r\n\r\nThese properties are [determined dynamically when the JVM starts](https://openjdk.java.net/jeps/8187041) (though this is not the case for GraalVM Native Image, which [sets them at build time](https://github.com/oracle/graal/issues/2492) as of this writing).\r\n\r\nFinally, as [this draft JEP](https://openjdk.java.net/jeps/8187041) states:\r\n\r\n&gt; The value of these system properties can be overridden on the command line although doing so has never been supported.","title":"What exactly is sun.jnu.encoding?","body":"<p>I tried to centralize all the information provided in the answers here and elsewhere on the Web, in order to make the most complete answer possible.</p>\n<p>As other comments have noted, there are actually two properties that affect the chosen encoding on the JVM:</p>\n<ul>\n<li><p><code>sun.jnu.encoding</code>, also known as the &quot;platform encoding&quot; or &quot;JNU encoding&quot;, is an undocumented, <a href=\"https://www.oracle.com/java/technologies/faq-sun-packages.html\" rel=\"noreferrer\">internal</a> property that holds the name of the encoding to use for interacting with the platform (e.g. <a href=\"https://openjdk.java.net/jeps/8187041\" rel=\"noreferrer\">file paths</a> and <a href=\"https://github.com/openjdk/jdk/blob/79d12507b373f4d46702cd606eda8590c1d03318/src/java.base/share/native/libjava/jni_util.c#L794-L810\" rel=\"noreferrer\">JNI C String to Java String conversions</a> — maybe also <a href=\"https://web.archive.org/web/20200202094903/http://happygiraffe.net/blog/2009/09/24/java-platform-encoding/\" rel=\"noreferrer\">command-line arguments, main classes and environment variables</a>, but I wasn't able to verify this claim).<br />\n​<br />\nOn <a href=\"https://github.com/openjdk/jdk/blob/a4ab61339bbd4a39f806c514039e2dd47dcb4169/src/java.base/unix/native/libjava/java_props_md.c#L452-L456\" rel=\"noreferrer\">MacOS</a>, this is always UTF-8, on <a href=\"https://github.com/openjdk/jdk/blob/a4ab61339bbd4a39f806c514039e2dd47dcb4169/src/java.base/unix/native/libjava/java_props_md.c#L455\" rel=\"noreferrer\">Linux</a> it's always the same as <code>file.encoding</code> (unless <code>file.encoding</code> is overriden, in which case I do not know what happens), and on <a href=\"https://github.com/openjdk/jdk/blob/a4ab61339bbd4a39f806c514039e2dd47dcb4169/src/java.base/windows/native/libjava/java_props_md.c#L677-L688\" rel=\"noreferrer\">Windows</a> it can vary.</p>\n</li>\n<li><p><code>file.encoding</code>, also known as the &quot;default charset&quot; or &quot;user encoding&quot;, is mainly used to determine the charset for encoding/decoding file <em>contents</em>. This is the charset that <code>java.nio.charsets.Charset.defaultCharset()</code> returns. Note that the value in <code>file.encoding</code> is used by many JDK APIs as the default encoding, but can be overridden by providing an explicit <code>Charset</code> or a charset name in the call to the JDK method.</p>\n</li>\n</ul>\n<p>These properties are <a href=\"https://openjdk.java.net/jeps/8187041\" rel=\"noreferrer\">determined dynamically when the JVM starts</a> (though this is not the case for GraalVM Native Image, which <a href=\"https://github.com/oracle/graal/issues/2492\" rel=\"noreferrer\">sets them at build time</a> as of this writing).</p>\n<p>Finally, as <a href=\"https://openjdk.java.net/jeps/8187041\" rel=\"noreferrer\">this draft JEP</a> states:</p>\n<blockquote>\n<p>The value of these system properties can be overridden on the command line although doing so has never been supported.</p>\n</blockquote>\n"}],"owner":{"display_name":"bmargulies"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":36410,"favorite_count":0,"down_vote_count":0,"up_vote_count":48,"answer_count":4,"score":48,"last_activity_date":1637406316,"creation_date":1246410492,"question_id":1066845,"body_markdown":"What is the purpose of the system property `sun.jnu.encoding`? Various fragments on the web set or report it, but I can&#39;t find a definition.\r\n","title":"What exactly is sun.jnu.encoding?","body":"<p>What is the purpose of the system property <code>sun.jnu.encoding</code>? Various fragments on the web set or report it, but I can't find a definition.</p>\n"},{"tags":["java","import","mpxj","primavera"],"answers":[{"tags":[],"owner":{"account_id":18832780,"reputation":26,"user_id":13736185,"display_name":"primavera-expert"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1592022330,"creation_date":1592022330,"answer_id":62355510,"question_id":62276522,"body_markdown":"If you have an XER file you shouldn&#39;t convert it to MPX. Either import it as is or, if its version is higher than P6 version, open the XER file in notepad and modify the version.","title":"MPX File Is Not Being Imported In Primavera p6 Software","body":"<p>If you have an XER file you shouldn't convert it to MPX. Either import it as is or, if its version is higher than P6 version, open the XER file in notepad and modify the version.</p>\n"},{"tags":[],"owner":{"account_id":23400410,"reputation":1,"user_id":17463661,"display_name":"Pondlife"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1637405913,"creation_date":1637405913,"answer_id":70045260,"question_id":62276522,"body_markdown":"Recommend you use MP XML import/export - especially with P6R16.x onwards.  MPP/MPX has rarely been successful in any version of P6 that purported to support it. \r\n(ps. I know this is an old question, but posting in case anyone else has the same question).","title":"MPX File Is Not Being Imported In Primavera p6 Software","body":"<p>Recommend you use MP XML import/export - especially with P6R16.x onwards.  MPP/MPX has rarely been successful in any version of P6 that purported to support it.\n(ps. I know this is an old question, but posting in case anyone else has the same question).</p>\n"}],"owner":{"account_id":4807421,"reputation":15,"user_id":3881982,"display_name":"user3881982"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":278,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1637405913,"creation_date":1591684851,"question_id":62276522,"body_markdown":"I convert primavera xer file in to mpx formate using ```MPXWriter``` class. File converted successfully into mpx format. But when i will try to import file in primavera p6 software its give error\r\n\r\n```\r\nImport/Export Error: Cannot find a unique value for wbs_short_name in PROJWBS. Last value is 109989 L3 - LIVE X.12.1.109989 - Const.1008\r\n```\r\nI am getting this above error. attached screen short as per below. please help me for solved this issue.\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/3uCfH.png","title":"MPX File Is Not Being Imported In Primavera p6 Software","body":"<p>I convert primavera xer file in to mpx formate using <code>MPXWriter</code> class. File converted successfully into mpx format. But when i will try to import file in primavera p6 software its give error</p>\n\n<pre><code>Import/Export Error: Cannot find a unique value for wbs_short_name in PROJWBS. Last value is 109989 L3 - LIVE X.12.1.109989 - Const.1008\n</code></pre>\n\n<p>I am getting this above error. attached screen short as per below. please help me for solved this issue.</p>\n\n<p><a href=\"https://i.stack.imgur.com/3uCfH.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/3uCfH.png\" alt=\"enter image description here\"></a></p>\n"},{"tags":["java","mockserver"],"comments":[{"owner":{"account_id":322960,"reputation":7711,"user_id":642680,"accept_rate":74,"display_name":"D-Dᴙum"},"score":0,"creation_date":1637397445,"post_id":70044321,"comment_id":123819686,"body_markdown":"Where is `mylocalhost.org`? Are both your server and client running locally ? If so perhaps you might try just using `localhost`.","body":"Where is <code>mylocalhost.org</code>? Are both your server and client running locally ? If so perhaps you might try just using <code>localhost</code>."},{"owner":{"account_id":1697177,"reputation":1903,"user_id":1558312,"accept_rate":46,"display_name":"keepmoving"},"score":0,"creation_date":1637398317,"post_id":70044321,"comment_id":123819808,"body_markdown":"both container running locally and its mylocalhost.org is FQDN of my host machine. Just let you know , I am able to telnet this post on 1080","body":"both container running locally and its mylocalhost.org is FQDN of my host machine. Just let you know , I am able to telnet this post on 1080"}],"answers":[{"tags":[],"owner":{"account_id":1697177,"reputation":1903,"user_id":1558312,"accept_rate":46,"display_name":"keepmoving"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1637405738,"creation_date":1637405738,"answer_id":70045244,"question_id":70044321,"body_markdown":"Now its working. Following is the correct style to mock request and response. \r\n\r\n\r\n    new MockServerClient(&quot;mylocalhost.org, 1080)\r\n            .when(\r\n                    HttpRequest.request()\r\n                    .withMethod(&quot;GET&quot;)\r\n                    .withPath(&quot;/view/cart&quot;)\r\n            )\r\n            .respond(\r\n                    HttpResponse.response()\r\n                    .withBody(&quot;some_response_body&quot;)\r\n            );","title":"How to fix SocketTimout execction on mockserver","body":"<p>Now its working. Following is the correct style to mock request and response.</p>\n<pre><code>new MockServerClient(&quot;mylocalhost.org, 1080)\n        .when(\n                HttpRequest.request()\n                .withMethod(&quot;GET&quot;)\n                .withPath(&quot;/view/cart&quot;)\n        )\n        .respond(\n                HttpResponse.response()\n                .withBody(&quot;some_response_body&quot;)\n        );\n</code></pre>\n"}],"owner":{"account_id":1697177,"reputation":1903,"user_id":1558312,"accept_rate":46,"display_name":"keepmoving"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1069,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":70045244,"answer_count":1,"score":0,"last_activity_date":1637405738,"creation_date":1637396553,"question_id":70044321,"body_markdown":"I want to use `mockserver` to mock requests and responses. For that, I am using the `mockserver` docker image. \r\nFollowing is then the docker-compose file example where use `mockserver`. \r\n\r\n    mockServer:\r\n      image: mockserver/mockserver\r\n      container_name: mockhttpserver\r\n      ports:\r\n        - 1080:1080\r\n\r\nNow in order to add expectations. I am using following mockserver java client. \r\n\r\n    &lt;dependency&gt;\r\n      &lt;groupId&gt;org.mock-server&lt;/groupId&gt;\r\n      &lt;artifactId&gt;mockserver-client-java&lt;/artifactId&gt;\r\n      &lt;version&gt;5.11.2&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n\r\nFollowing is my java code to create mockserverclient and add expectations. \r\nbut when I am running this code it&#39;s giving me a SockedTimeout Exception. \r\nDon&#39;t know what&#39;s wrong with that. The `Mockserver` is running as a container and when I telnet to mylocalhost.org 1080 then it successfully returns connected but from eclipse, it throws exceptions. \r\n\r\n    MockServerClient client = new MockServerClient(&quot;mylocalhost.org&quot;, 1080);\r\n            client.upsert(\r\n                    Expectation.when(HttpRequest.request(&quot;/login&quot;)\r\n                    .withMethod(&quot;get&quot;))\r\n                    .thenRespond(HttpResponse.response().withStatusCode(200)));\r\n            client.close();\r\n\r\nException :\r\n\r\n    8:11:18.768 [MockServer-MockServerClient-eventLoop0] DEBUG io.netty.util.Recycler - -Dio.netty.recycler.linkCapacity: 16\r\n    08:11:18.768 [MockServer-MockServerClient-eventLoop0] DEBUG io.netty.util.Recycler - -Dio.netty.recycler.ratio: 8\r\n    Exception in thread &quot;main&quot; org.mockserver.client.SocketCommunicationException: Response was not received from MockServer after 20000 milliseconds, to wait longer please use &quot;mockserver.maxSocketTimeout&quot; system property or ConfigurationProperties.maxSocketTimeout(long milliseconds)\r\n    \tat org.mockserver.client.NettyHttpClient.sendRequest(NettyHttpClient.java:172)\r\n    \tat org.mockserver.client.MockServerClient.sendRequest(MockServerClient.java:211)\r\n    \tat org.mockserver.client.MockServerClient.sendRequest(MockServerClient.java:244)\r\n    \tat org.mockserver.client.MockServerClient.upsert(MockServerClient.java:1109)\r\n\r\nBut when I call the rest api to add expectation, it works.\r\n\r\ncurl -v -X PUT &quot;http://mylocalhost.org:1080/mockserver/expectation&quot;","title":"How to fix SocketTimout execction on mockserver","body":"<p>I want to use <code>mockserver</code> to mock requests and responses. For that, I am using the <code>mockserver</code> docker image.\nFollowing is then the docker-compose file example where use <code>mockserver</code>.</p>\n<pre><code>mockServer:\n  image: mockserver/mockserver\n  container_name: mockhttpserver\n  ports:\n    - 1080:1080\n</code></pre>\n<p>Now in order to add expectations. I am using following mockserver java client.</p>\n<pre><code>&lt;dependency&gt;\n  &lt;groupId&gt;org.mock-server&lt;/groupId&gt;\n  &lt;artifactId&gt;mockserver-client-java&lt;/artifactId&gt;\n  &lt;version&gt;5.11.2&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n<p>Following is my java code to create mockserverclient and add expectations.\nbut when I am running this code it's giving me a SockedTimeout Exception.\nDon't know what's wrong with that. The <code>Mockserver</code> is running as a container and when I telnet to mylocalhost.org 1080 then it successfully returns connected but from eclipse, it throws exceptions.</p>\n<pre><code>MockServerClient client = new MockServerClient(&quot;mylocalhost.org&quot;, 1080);\n        client.upsert(\n                Expectation.when(HttpRequest.request(&quot;/login&quot;)\n                .withMethod(&quot;get&quot;))\n                .thenRespond(HttpResponse.response().withStatusCode(200)));\n        client.close();\n</code></pre>\n<p>Exception :</p>\n<pre><code>8:11:18.768 [MockServer-MockServerClient-eventLoop0] DEBUG io.netty.util.Recycler - -Dio.netty.recycler.linkCapacity: 16\n08:11:18.768 [MockServer-MockServerClient-eventLoop0] DEBUG io.netty.util.Recycler - -Dio.netty.recycler.ratio: 8\nException in thread &quot;main&quot; org.mockserver.client.SocketCommunicationException: Response was not received from MockServer after 20000 milliseconds, to wait longer please use &quot;mockserver.maxSocketTimeout&quot; system property or ConfigurationProperties.maxSocketTimeout(long milliseconds)\n    at org.mockserver.client.NettyHttpClient.sendRequest(NettyHttpClient.java:172)\n    at org.mockserver.client.MockServerClient.sendRequest(MockServerClient.java:211)\n    at org.mockserver.client.MockServerClient.sendRequest(MockServerClient.java:244)\n    at org.mockserver.client.MockServerClient.upsert(MockServerClient.java:1109)\n</code></pre>\n<p>But when I call the rest api to add expectation, it works.</p>\n<p>curl -v -X PUT &quot;http://mylocalhost.org:1080/mockserver/expectation&quot;</p>\n"},{"tags":["java","spring","apache-kafka","spring-kafka","spring-cloud-stream"],"answers":[{"tags":[],"owner":{"account_id":9504657,"reputation":7440,"user_id":7064617,"display_name":"JCompetence"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1637405501,"creation_date":1637346432,"answer_id":70039343,"question_id":70038847,"body_markdown":"If you look at the documentation, you will see that for Krb5LoginModule if use: \r\n\r\n    useKeyTab:\r\n        Set this to true if you want the module to get the principal&#39;s key from the the keytab.(default value is False) If keytab is not set then the module will locate the keytab from the Kerberos configuration file. If it is not specified in the Kerberos configuration file then it will look for the file {user.home}{file.separator}krb5.keytab.\r\n\r\nIn your case, my assumption is that because you are using `useKeyTab = false`, it is trying to find the keytab file in the default location:  `{user.home}{file.separator}krb5.keytab.` and it probably does not exist.\r\n\r\nhttps://docs.oracle.com/javase/8/docs/jre/api/security/jaas/spec/com/sun/security/auth/module/Krb5LoginModule.html\r\n\r\n----------\r\nPlease see this https://andriymz.github.io/kerberos/authentication-using-kerberos/#krb5loginmodule for possible Valid/Invalid configuration combinations.\r\n\r\n----------\r\n\r\nYour Configuration should look something like:\r\n\r\n    spring:\r\n     cloud:\r\n      stream:\r\n       kafka:\r\n        binder:\r\n         brokers: localhost:9092  # path to kafka brokers\r\n         autoCreateTopics: false\r\n         jaas:\r\n          loginModule: com.sun.security.auth.module.Krb5LoginModule\r\n          controlFlag: required\r\n          options: \r\n           useKeyTab: true\r\n           storeKey: true\r\n           keyTab: /your/pathTokeytabFile\r\n           useTicketCache: false\r\n           principal: yourserviceaccount@domain\r\n           renewTicket: true\r\n           serviceName: kafka\r\n         configuration: \r\n           security:\r\n             protocol: SASL_PLAINTEXT\r\n           sasl: \r\n             kerberos: \r\n               service:\r\n                 name: kafka\r\n         producerProperties:\r\n           retries: 3\r\n        bindings:\r\n         CONSUMER_ONE:\r\n          destination: TOPIC_1\r\n          contentType: application/json\r\n         CONSUMER_TWO:\r\n          destination: TOPIC_2\r\n          contentType: application/json\r\n         CONSUMER_ERROR:\r\n          destination: ERROR_TOPIC\r\n          contentType: application/json\r\n         PRODUCER_ONE:\r\n          destination: TOPIC_2\r\n          contentType: application/json\r\n         PRODUCER_TWO:\r\n          destination: TOPIC_3\r\n          contentType: application/json\r\n         PRODUCER_ERROR:\r\n          destination: ERROR_TOPIC\r\n          contentType: application/json\r\n","title":"Spring Cloud Stream consumer startup","body":"<p>If you look at the documentation, you will see that for Krb5LoginModule if use:</p>\n<pre><code>useKeyTab:\n    Set this to true if you want the module to get the principal's key from the the keytab.(default value is False) If keytab is not set then the module will locate the keytab from the Kerberos configuration file. If it is not specified in the Kerberos configuration file then it will look for the file {user.home}{file.separator}krb5.keytab.\n</code></pre>\n<p>In your case, my assumption is that because you are using <code>useKeyTab = false</code>, it is trying to find the keytab file in the default location:  <code>{user.home}{file.separator}krb5.keytab.</code> and it probably does not exist.</p>\n<p><a href=\"https://docs.oracle.com/javase/8/docs/jre/api/security/jaas/spec/com/sun/security/auth/module/Krb5LoginModule.html\" rel=\"nofollow noreferrer\">https://docs.oracle.com/javase/8/docs/jre/api/security/jaas/spec/com/sun/security/auth/module/Krb5LoginModule.html</a></p>\n<hr />\n<p>Please see this <a href=\"https://andriymz.github.io/kerberos/authentication-using-kerberos/#krb5loginmodule\" rel=\"nofollow noreferrer\">https://andriymz.github.io/kerberos/authentication-using-kerberos/#krb5loginmodule</a> for possible Valid/Invalid configuration combinations.</p>\n<hr />\n<p>Your Configuration should look something like:</p>\n<pre><code>spring:\n cloud:\n  stream:\n   kafka:\n    binder:\n     brokers: localhost:9092  # path to kafka brokers\n     autoCreateTopics: false\n     jaas:\n      loginModule: com.sun.security.auth.module.Krb5LoginModule\n      controlFlag: required\n      options: \n       useKeyTab: true\n       storeKey: true\n       keyTab: /your/pathTokeytabFile\n       useTicketCache: false\n       principal: yourserviceaccount@domain\n       renewTicket: true\n       serviceName: kafka\n     configuration: \n       security:\n         protocol: SASL_PLAINTEXT\n       sasl: \n         kerberos: \n           service:\n             name: kafka\n     producerProperties:\n       retries: 3\n    bindings:\n     CONSUMER_ONE:\n      destination: TOPIC_1\n      contentType: application/json\n     CONSUMER_TWO:\n      destination: TOPIC_2\n      contentType: application/json\n     CONSUMER_ERROR:\n      destination: ERROR_TOPIC\n      contentType: application/json\n     PRODUCER_ONE:\n      destination: TOPIC_2\n      contentType: application/json\n     PRODUCER_TWO:\n      destination: TOPIC_3\n      contentType: application/json\n     PRODUCER_ERROR:\n      destination: ERROR_TOPIC\n      contentType: application/json\n</code></pre>\n"}],"owner":{"account_id":7037433,"reputation":61,"user_id":5390986,"display_name":"feenix110998"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":742,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":70039343,"answer_count":1,"score":0,"last_activity_date":1637405501,"creation_date":1637343789,"question_id":70038847,"body_markdown":"I recently migrated my spring cloud stream  kafka consumer application from annotations to a functional approach  and now it won&#39;t start up with the failure\r\n```\r\norg.springframework.cloud.stream.binder.AbstractMessageChannelBinder.doBindConsumer(AbstractMessageChannelBinder.java:403)\\n\\t... 33 common frames omitted\\nCaused by: \r\norg.apache.kafka.common.KafkaException: javax.security.auth.login.LoginException: Could not login: the client is being asked for a password, \r\nbut the Kafka client code does not currently support obtaining a password from the user. not available to garner  authentication information \r\nfrom the user\r\n\\n\\tat org.apache.kafka.common.network.SaslChannelBuilder.configure(SaslChannelBuilder.java:172)\r\n\\n\\tat org.apache.kafka.common.network.ChannelBuilders.create(ChannelBuilders.java:157)\r\n\\n\\tat org.apache.kafka.common.network.ChannelBuilders.clientChannelBuilder(ChannelBuilders.java:73)\r\n\\n\\tat org.apache.kafka.clients.ClientUtils.createChannelBuilder(ClientUtils.java:105)\\n\r\n\\tat org.apache.kafka.clients.admin.KafkaAdminClient.createInternal(KafkaAdminClient.java:474)\\n\\\r\nt... 40 common frames omitted\\nCaused by: javax.security.auth.login.LoginException:\r\n```\r\nThis is the configuration  :\r\n\r\n```\r\njaas:\r\n  options:\r\n    sauAlias: Vault/Conjur/Secret/service_account\r\n    useKeyTab: false\r\n    krbProvider: com.sun.security.auth.module.Krb5LoginModule\r\n    debug: true\r\n  loginModule: com.usaa.kafka.auth3.krb.SauKrbLoginModuleWrapper\r\n  bootstrapServers: &gt;\r\n    someserver:0000, someserver:0001\r\n\r\n```\r\nIs there an attribute that needs to be set to avoid the login prompt ?\r\n","title":"Spring Cloud Stream consumer startup","body":"<p>I recently migrated my spring cloud stream  kafka consumer application from annotations to a functional approach  and now it won't start up with the failure</p>\n<pre><code>org.springframework.cloud.stream.binder.AbstractMessageChannelBinder.doBindConsumer(AbstractMessageChannelBinder.java:403)\\n\\t... 33 common frames omitted\\nCaused by: \norg.apache.kafka.common.KafkaException: javax.security.auth.login.LoginException: Could not login: the client is being asked for a password, \nbut the Kafka client code does not currently support obtaining a password from the user. not available to garner  authentication information \nfrom the user\n\\n\\tat org.apache.kafka.common.network.SaslChannelBuilder.configure(SaslChannelBuilder.java:172)\n\\n\\tat org.apache.kafka.common.network.ChannelBuilders.create(ChannelBuilders.java:157)\n\\n\\tat org.apache.kafka.common.network.ChannelBuilders.clientChannelBuilder(ChannelBuilders.java:73)\n\\n\\tat org.apache.kafka.clients.ClientUtils.createChannelBuilder(ClientUtils.java:105)\\n\n\\tat org.apache.kafka.clients.admin.KafkaAdminClient.createInternal(KafkaAdminClient.java:474)\\n\\\nt... 40 common frames omitted\\nCaused by: javax.security.auth.login.LoginException:\n</code></pre>\n<p>This is the configuration  :</p>\n<pre><code>jaas:\n  options:\n    sauAlias: Vault/Conjur/Secret/service_account\n    useKeyTab: false\n    krbProvider: com.sun.security.auth.module.Krb5LoginModule\n    debug: true\n  loginModule: com.usaa.kafka.auth3.krb.SauKrbLoginModuleWrapper\n  bootstrapServers: &gt;\n    someserver:0000, someserver:0001\n\n</code></pre>\n<p>Is there an attribute that needs to be set to avoid the login prompt ?</p>\n"},{"tags":["java","3d","minecraft"],"answers":[{"tags":[],"owner":{"account_id":22416679,"reputation":1,"user_id":16624624,"display_name":"Energix"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1637405146,"creation_date":1628510698,"answer_id":68711792,"question_id":66680534,"body_markdown":"You could use the method `GuiInventory.drawEntityOnScreen();`\r\n\r\nThere is a chance that it is private though, so if it is make sure to unprivate it.\r\n\r\nAlso if your drawing the player, make sure the player exists with like:\r\n\r\n    if(Minecraft.getMinecraft().thePlayer != null) code();","title":"How would I draw a Miniature 3d mockup of the player in MCP?","body":"<p>You could use the method <code>GuiInventory.drawEntityOnScreen();</code></p>\n<p>There is a chance that it is private though, so if it is make sure to unprivate it.</p>\n<p>Also if your drawing the player, make sure the player exists with like:</p>\n<pre><code>if(Minecraft.getMinecraft().thePlayer != null) code();\n</code></pre>\n"},{"tags":[],"owner":{"account_id":23093191,"reputation":1,"user_id":17203739,"display_name":"Night"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1637405127,"creation_date":1637404854,"answer_id":70045148,"question_id":66680534,"body_markdown":"    Minecraft mc = Minecraft.getMinecraft();\r\n\r\n    EntityLivingBase target = (EntityLivingbase) mc.pointedEntity;\r\n\r\n    GuiInventory.drawEntityOnScreen(x, y, x, x, y, traget);\r\n\r\nCredit:\r\n    https://www.youtube.com/channel/UCOW8D3NEjpU-jBp0V_vAF5w","title":"How would I draw a Miniature 3d mockup of the player in MCP?","body":"<pre><code>Minecraft mc = Minecraft.getMinecraft();\n\nEntityLivingBase target = (EntityLivingbase) mc.pointedEntity;\n\nGuiInventory.drawEntityOnScreen(x, y, x, x, y, traget);\n</code></pre>\n<p>Credit:\n<a href=\"https://www.youtube.com/channel/UCOW8D3NEjpU-jBp0V_vAF5w\" rel=\"nofollow noreferrer\">https://www.youtube.com/channel/UCOW8D3NEjpU-jBp0V_vAF5w</a></p>\n"}],"owner":{"display_name":"user13736578"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":68,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1637405146,"creation_date":1616011831,"question_id":66680534,"body_markdown":"[![What I want][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/Dybtg.png\r\n\r\nHow would I make an mini 3d mockup of the player in MCP like the above image, in a specific location?\r\n\r\nI haven&#39;t been able to find any info on it...\r\n\r\n","title":"How would I draw a Miniature 3d mockup of the player in MCP?","body":"<p><a href=\"https://i.stack.imgur.com/Dybtg.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Dybtg.png\" alt=\"What I want\" /></a></p>\n<p>How would I make an mini 3d mockup of the player in MCP like the above image, in a specific location?</p>\n<p>I haven't been able to find any info on it...</p>\n"},{"tags":["java","arraylist"],"answers":[{"tags":[],"owner":{"account_id":465573,"reputation":192694,"user_id":869736,"accept_rate":82,"display_name":"Louis Wasserman"},"down_vote_count":0,"up_vote_count":14,"is_accepted":true,"score":14,"last_activity_date":1489605472,"creation_date":1489605472,"answer_id":42818813,"question_id":42818784,"body_markdown":"`EX_FIELDS` should have type `List&lt;String&gt;`, not `ArrayList&lt;String&gt;`, and you shouldn&#39;t need to do any cast: you should just write\r\n\r\n    EX_FIELDS = Collections.unmodifiableList(exList);\r\n\r\nThis is one instance of the much more general rule that you should program to the interface, not the implementation.","title":"Convert an ArrayList to an unmodifiable ArrayList","body":"<p><code>EX_FIELDS</code> should have type <code>List&lt;String&gt;</code>, not <code>ArrayList&lt;String&gt;</code>, and you shouldn't need to do any cast: you should just write</p>\n\n<pre><code>EX_FIELDS = Collections.unmodifiableList(exList);\n</code></pre>\n\n<p>This is one instance of the much more general rule that you should program to the interface, not the implementation.</p>\n"},{"tags":[],"owner":{"account_id":9378,"reputation":14558,"user_id":17300,"display_name":"Stephen P"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1489606173,"creation_date":1489606173,"answer_id":42819011,"question_id":42818784,"body_markdown":"You get a ClassCastException because `Collections.unmodifiableList()` doesn&#39;t return an ArrayList, it returns a `List&lt;T&gt;` (interface) which can be any backing class that implements the List interface.  As you can see from the exception, it is _actually_ returning an `UnmodifiableRandomAccessList`.\r\n\r\nWhen you create the variable `EX_FIELDS` you should declare it like\r\n\r\n    List&lt;String&gt; EX_FIELDS = new ArrayList&lt;&gt;();\r\n\r\nThat is, EX_FIELDS is a _List_ and you have chosen an _ArrayList_ for the actual instance.  Later on you&#39;ll do\r\n\r\n    EX_FIELDS = Collections.unmodifiableList(exList);\r\n\r\n`unmodifiableList()` returns a _List_, but you don&#39;t care what kind it _actually_ is, as long as it conforms to the _List_ interface.","title":"Convert an ArrayList to an unmodifiable ArrayList","body":"<p>You get a ClassCastException because <code>Collections.unmodifiableList()</code> doesn't return an ArrayList, it returns a <code>List&lt;T&gt;</code> (interface) which can be any backing class that implements the List interface.  As you can see from the exception, it is <em>actually</em> returning an <code>UnmodifiableRandomAccessList</code>.</p>\n\n<p>When you create the variable <code>EX_FIELDS</code> you should declare it like</p>\n\n<pre><code>List&lt;String&gt; EX_FIELDS = new ArrayList&lt;&gt;();\n</code></pre>\n\n<p>That is, EX_FIELDS is a <em>List</em> and you have chosen an <em>ArrayList</em> for the actual instance.  Later on you'll do</p>\n\n<pre><code>EX_FIELDS = Collections.unmodifiableList(exList);\n</code></pre>\n\n<p><code>unmodifiableList()</code> returns a <em>List</em>, but you don't care what kind it <em>actually</em> is, as long as it conforms to the <em>List</em> interface.</p>\n"},{"tags":[],"owner":{"account_id":1663234,"reputation":138406,"user_id":1531124,"accept_rate":96,"display_name":"GhostCat"},"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1489607744,"creation_date":1489607744,"answer_id":42819486,"question_id":42818784,"body_markdown":"The other answers are correct, but missing a crucial point: an unmodifiable list created this way can still be modified. \r\n\r\nThis call to the Collections class creates a**wrapper** object that wraps around the provided *exList* argument. \r\n\r\nIn other words: when exList changes, your wrapped list changes as well. \r\n\r\nSo when you want to be really sure, you have to first create a new temporary list to which you add all entries of *exList*; and then you use that Collections method to wrap around that temporary copy. ","title":"Convert an ArrayList to an unmodifiable ArrayList","body":"<p>The other answers are correct, but missing a crucial point: an unmodifiable list created this way can still be modified. </p>\n\n<p>This call to the Collections class creates a<strong>wrapper</strong> object that wraps around the provided <em>exList</em> argument. </p>\n\n<p>In other words: when exList changes, your wrapped list changes as well. </p>\n\n<p>So when you want to be really sure, you have to first create a new temporary list to which you add all entries of <em>exList</em>; and then you use that Collections method to wrap around that temporary copy. </p>\n"},{"tags":[],"owner":{"account_id":7081192,"reputation":595,"user_id":10512341,"display_name":"Sugat Shivsharan"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1637404794,"creation_date":1637404794,"answer_id":70045135,"question_id":42818784,"body_markdown":"The reason error occurs is `Collections.unmodifiablelist(exList)` returns a List, what you are trying to do is \r\n\r\n    ArrayList&lt;T&gt; EX_FIELDS=(ArrayList&lt;T&gt;)List&lt;T&gt;();\r\n\r\nList is an interface and cannot be instantiated. The EX_FIELDS variable can only store ArrayList&lt;T&gt; object, hence the classcast exception error.\r\n\r\nA proper way to do this is :\r\n\r\n    List&lt;String&gt; EX_FIELDS=Collections.unmodifiablelist(exList)","title":"Convert an ArrayList to an unmodifiable ArrayList","body":"<p>The reason error occurs is <code>Collections.unmodifiablelist(exList)</code> returns a List, what you are trying to do is</p>\n<pre><code>ArrayList&lt;T&gt; EX_FIELDS=(ArrayList&lt;T&gt;)List&lt;T&gt;();\n</code></pre>\n<p>List is an interface and cannot be instantiated. The EX_FIELDS variable can only store ArrayList object, hence the classcast exception error.</p>\n<p>A proper way to do this is :</p>\n<pre><code>List&lt;String&gt; EX_FIELDS=Collections.unmodifiablelist(exList)\n</code></pre>\n"}],"owner":{"account_id":2562745,"reputation":740,"user_id":2223539,"display_name":"amudhan3093"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":10117,"favorite_count":0,"down_vote_count":1,"up_vote_count":5,"accepted_answer_id":42818813,"answer_count":4,"score":4,"last_activity_date":1637404794,"creation_date":1489605372,"question_id":42818784,"body_markdown":"I&#39;m trying to get a unmodifiable ArrayList to a final variable EX_FIELDS. exList is an existing ArrayList&lt;String&gt; object.\r\n\r\n    EX_FIELDS = (ArrayList&lt;String&gt;) Collections.unmodifiableList(exList);\r\n\r\nThis code is present in a static block.When the class loads, I get the following error. \r\n\r\n    java.lang.ClassCastException: java.util.Collections$UnmodifiableRandomAccessList cannot be cast to java.util.ArrayList\r\n\r\nI need to use the EX_FIELDS to support random access.Is there any other way to accomplish it?Thanks for any help in advance\r\n\r\n","title":"Convert an ArrayList to an unmodifiable ArrayList","body":"<p>I'm trying to get a unmodifiable ArrayList to a final variable EX_FIELDS. exList is an existing ArrayList object.</p>\n\n<pre><code>EX_FIELDS = (ArrayList&lt;String&gt;) Collections.unmodifiableList(exList);\n</code></pre>\n\n<p>This code is present in a static block.When the class loads, I get the following error. </p>\n\n<pre><code>java.lang.ClassCastException: java.util.Collections$UnmodifiableRandomAccessList cannot be cast to java.util.ArrayList\n</code></pre>\n\n<p>I need to use the EX_FIELDS to support random access.Is there any other way to accomplish it?Thanks for any help in advance</p>\n"},{"tags":["java","arrays","sorting","sequence"],"comments":[{"owner":{"account_id":12469552,"reputation":313,"user_id":9078219,"display_name":"Jawad El Fou"},"score":0,"creation_date":1637305721,"post_id":70030954,"comment_id":123795803,"body_markdown":"You should iterate for each character when you find a 1 you start counting when you find a zero you should reset the counter and update a &quot;max&quot; variable if the new count is higher than the previous count.","body":"You should iterate for each character when you find a 1 you start counting when you find a zero you should reset the counter and update a &quot;max&quot; variable if the new count is higher than the previous count."},{"owner":{"account_id":2016713,"reputation":26480,"user_id":1803853,"accept_rate":71,"display_name":"Davide Lorenzo MARINO"},"score":0,"creation_date":1637305810,"post_id":70030954,"comment_id":123795828,"body_markdown":"Your comments are not related to the code. For example there are no pre_count_0 and post_count_0 variables. In any case I suggest to simplify your code. Try to imagine how you would solve this problem in your mind. Do you need to know the length of all subsequences of zeros to know what is the most long sequence? I suppose not because  You can do that also with a sequence of 1000 digits and you don&#39;t store in your mind each subsequence length of zeros. So try to apply the same logic in your code. The code will be a lot easier to understand","body":"Your comments are not related to the code. For example there are no pre_count_0 and post_count_0 variables. In any case I suggest to simplify your code. Try to imagine how you would solve this problem in your mind. Do you need to know the length of all subsequences of zeros to know what is the most long sequence? I suppose not because  You can do that also with a sequence of 1000 digits and you don&#39;t store in your mind each subsequence length of zeros. So try to apply the same logic in your code. The code will be a lot easier to understand"}],"answers":[{"tags":[],"owner":{"account_id":9725613,"reputation":53334,"user_id":7212686,"accept_rate":100,"display_name":"azro"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1637305831,"creation_date":1637305831,"answer_id":70031064,"question_id":70030954,"body_markdown":"You&#39;re quite good, but you&#39;re missing one thing : if the char is `&#39;0&#39;` : reset the counter to zero\r\n\r\n    for (int j = 1; j &lt;= n; j++) {\r\n        if (s.charAt(j - 1) != &#39;0&#39;)\r\n            count_1[j] = count_1[j - 1] + 1;\r\n        else\r\n            count_1[j] = 0;\r\n    }\r\n\r\n---\r\n\r\n\r\nBut that can be done in one loop only, count with an `int`, and keep track of the max\r\n\r\n```java\r\npublic static int longestSubseq(String s) {\r\n    int ans = 0;\r\n    int count = 0;\r\n    for (char c : s.toCharArray()) {\r\n        if (c == &#39;1&#39;)\r\n            count++;\r\n        else\r\n            count = 0;\r\n\r\n        ans = Math.max(ans, count);\r\n    }\r\n    return ans;\r\n}\r\n```","title":"Print the length of maximum subsequence of &#39;1&#39; s","body":"<p>You're quite good, but you're missing one thing : if the char is <code>'0'</code> : reset the counter to zero</p>\n<pre><code>for (int j = 1; j &lt;= n; j++) {\n    if (s.charAt(j - 1) != '0')\n        count_1[j] = count_1[j - 1] + 1;\n    else\n        count_1[j] = 0;\n}\n</code></pre>\n<hr />\n<p>But that can be done in one loop only, count with an <code>int</code>, and keep track of the max</p>\n<pre class=\"lang-java prettyprint-override\"><code>public static int longestSubseq(String s) {\n    int ans = 0;\n    int count = 0;\n    for (char c : s.toCharArray()) {\n        if (c == '1')\n            count++;\n        else\n            count = 0;\n\n        ans = Math.max(ans, count);\n    }\n    return ans;\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":4228398,"reputation":17727,"user_id":3461397,"display_name":"Oleg Cherednik"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1637306550,"creation_date":1637306550,"answer_id":70031192,"question_id":70030954,"body_markdown":"```java\r\npublic static int longestSubSequence(String str, char ch) {\r\n    int res = 0;\r\n    int count = 0;\r\n\r\n    for (int i = 0; i &lt; str.length(); i++) {\r\n        count = str.charAt(i) == ch ? count + 1 : 0;\r\n        res = Math.max(res, count);\r\n    }\r\n\r\n    return res;\r\n}\r\n```","title":"Print the length of maximum subsequence of &#39;1&#39; s","body":"<pre class=\"lang-java prettyprint-override\"><code>public static int longestSubSequence(String str, char ch) {\n    int res = 0;\n    int count = 0;\n\n    for (int i = 0; i &lt; str.length(); i++) {\n        count = str.charAt(i) == ch ? count + 1 : 0;\n        res = Math.max(res, count);\n    }\n\n    return res;\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1355886,"reputation":3999,"user_id":1294283,"accept_rate":60,"display_name":"F. M&#252;ller"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1637403986,"creation_date":1637307140,"answer_id":70031282,"question_id":70030954,"body_markdown":"As an alternative to the other answers that work with a for-loop:\r\n\r\nYou could split the sequence into groups of ones with regex. Next, just iterate over the groups and update the count, if the length of the group is bigger than the previous length.\r\n\r\nThe first group will be `111` and the next one `1111`. Thus the count will first be 3 and then it will be updated to 4.\r\n\r\n```\r\nimport java.util.regex.Pattern;\r\nimport java.util.regex.Matcher;\r\n\r\npublic class CountSubsequence {\r\n     public static void main(String []args){\r\n        String sequence = &quot;0011100111100&quot;;\r\n        Pattern pattern = Pattern.compile(&quot;(1+)&quot;);\r\n        Matcher matcher = pattern.matcher(sequence);\r\n        int count = 0;\r\n        while (matcher.find()) {\r\n            int currentLength = matcher.group().length();\r\n            if (currentLength &gt; count) count = currentLength;\r\n        }\r\n        System.out.println(count); // 4\r\n     }\r\n}\r\n```\r\n\r\nSince regex is not that performant you might want to use the for-loop in case you care for performance - but that just matters if you  execute it a lot.","title":"Print the length of maximum subsequence of &#39;1&#39; s","body":"<p>As an alternative to the other answers that work with a for-loop:</p>\n<p>You could split the sequence into groups of ones with regex. Next, just iterate over the groups and update the count, if the length of the group is bigger than the previous length.</p>\n<p>The first group will be <code>111</code> and the next one <code>1111</code>. Thus the count will first be 3 and then it will be updated to 4.</p>\n<pre><code>import java.util.regex.Pattern;\nimport java.util.regex.Matcher;\n\npublic class CountSubsequence {\n     public static void main(String []args){\n        String sequence = &quot;0011100111100&quot;;\n        Pattern pattern = Pattern.compile(&quot;(1+)&quot;);\n        Matcher matcher = pattern.matcher(sequence);\n        int count = 0;\n        while (matcher.find()) {\n            int currentLength = matcher.group().length();\n            if (currentLength &gt; count) count = currentLength;\n        }\n        System.out.println(count); // 4\n     }\n}\n</code></pre>\n<p>Since regex is not that performant you might want to use the for-loop in case you care for performance - but that just matters if you  execute it a lot.</p>\n"},{"tags":[],"owner":{"account_id":18243171,"reputation":19300,"user_id":13279831,"display_name":"Nowhere Man"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1637315996,"creation_date":1637315996,"answer_id":70032972,"question_id":70030954,"body_markdown":"The input string may be split by the characters that are _not_ `1` (thus all non-1 characters are ignored and subsequences containing only 1 remain), and then the max length of the remaining parts can be found using Stream API:\r\n```java\r\npublic static int longestSubSequence(String str, char ch) {\r\n    return Arrays.stream(str.split(&quot;[^&quot; + ch + &quot;]&quot;))\r\n                 .mapToInt(String::length)\r\n                 .max()\r\n                 .orElse(0);\r\n}\r\n```\r\n\r\nSimilarly, a _matching_ pattern can be created, and the max length of the group can be found:\r\n```java\r\npublic static int longestSubSequence(String str, char ch) {\r\n    return Pattern.compile(ch + &quot;+&quot;)\r\n            .matcher(str)\r\n            .results()\r\n            .map(MatchResult::group)\r\n            .mapToInt(String::length)\r\n            .max()\r\n            .orElse(0);\r\n}\r\n```\r\nTest:\r\n```\r\nSystem.out.println(longestSubSequence(&quot;00111011001111&quot;, &#39;1&#39;)); // 4\r\n```\r\nIt&#39;s worth mentioning that the characters other than `&#39;0&#39;` and `&#39;1&#39;` may be present in the input string, only subsequences of the given char are counted.","title":"Print the length of maximum subsequence of &#39;1&#39; s","body":"<p>The input string may be split by the characters that are <em>not</em> <code>1</code> (thus all non-1 characters are ignored and subsequences containing only 1 remain), and then the max length of the remaining parts can be found using Stream API:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public static int longestSubSequence(String str, char ch) {\n    return Arrays.stream(str.split(&quot;[^&quot; + ch + &quot;]&quot;))\n                 .mapToInt(String::length)\n                 .max()\n                 .orElse(0);\n}\n</code></pre>\n<p>Similarly, a <em>matching</em> pattern can be created, and the max length of the group can be found:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public static int longestSubSequence(String str, char ch) {\n    return Pattern.compile(ch + &quot;+&quot;)\n            .matcher(str)\n            .results()\n            .map(MatchResult::group)\n            .mapToInt(String::length)\n            .max()\n            .orElse(0);\n}\n</code></pre>\n<p>Test:</p>\n<pre><code>System.out.println(longestSubSequence(&quot;00111011001111&quot;, '1')); // 4\n</code></pre>\n<p>It's worth mentioning that the characters other than <code>'0'</code> and <code>'1'</code> may be present in the input string, only subsequences of the given char are counted.</p>\n"}],"owner":{"account_id":22969978,"reputation":1,"user_id":17098502,"display_name":"Mahesh Divate"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":223,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":4,"score":0,"last_activity_date":1637403986,"creation_date":1637305150,"question_id":70030954,"body_markdown":"    import java.util.Scanner;\r\n    class Motu\r\n     {\r\n        // Returns length of the longest subsequence\r\n        // of the form 0*1*0*\r\n        public static int longestSubseq(String s)\r\n        {\r\n            int n = s.length();\r\n     \r\n   \r\n           \r\n            int[] count_1 = new int[n + 1];\r\n            count_1[0] = 0;\r\n            for (int j = 1; j &lt;= n; j++)\r\n             {\r\n                count_1[j] = count_1[j - 1];\r\n                if (s.charAt(j - 1) != &#39;0&#39;)\r\n                \t count_1[j]++;\r\n             }\r\n              \r\n            // Compute result using precomputed values\r\n            int ans = 0;\r\n            for (int i = 1; i &lt;= n; i++)\r\n                for (int j = i; j &lt;= n; j++)\r\n                    ans = Math.max(count_1[j] - count_1[i - 1] , ans);\r\n                                   \r\n            return ans;\r\n         }\r\n     \r\n        // Driver code\r\n        public static void main(String[] args)\r\n        {\r\n            @SuppressWarnings(&quot;resource&quot;)\r\n    \t\tScanner sc=new Scanner(System.in);\r\n            String s =sc.next();\r\n            System.out.println(longestSubseq(s));\r\n        }\r\n    }\r\n\r\nI am trying to make a program to get maximum sequences `1` in a string containing `0&#39;s` &amp; `1&#39;s`. But I am unable to make out the logic for it, my program prints a number of 1&#39;s in the string which is not my desired output.\r\n\r\n    Sample input:- 0011100111100\r\n    output:- 4\r\n\r\n","title":"Print the length of maximum subsequence of &#39;1&#39; s","body":"<pre><code>import java.util.Scanner;\nclass Motu\n {\n    // Returns length of the longest subsequence\n    // of the form 0*1*0*\n    public static int longestSubseq(String s)\n    {\n        int n = s.length();\n \n\n       \n        int[] count_1 = new int[n + 1];\n        count_1[0] = 0;\n        for (int j = 1; j &lt;= n; j++)\n         {\n            count_1[j] = count_1[j - 1];\n            if (s.charAt(j - 1) != '0')\n                 count_1[j]++;\n         }\n          \n        // Compute result using precomputed values\n        int ans = 0;\n        for (int i = 1; i &lt;= n; i++)\n            for (int j = i; j &lt;= n; j++)\n                ans = Math.max(count_1[j] - count_1[i - 1] , ans);\n                               \n        return ans;\n     }\n \n    // Driver code\n    public static void main(String[] args)\n    {\n        @SuppressWarnings(&quot;resource&quot;)\n        Scanner sc=new Scanner(System.in);\n        String s =sc.next();\n        System.out.println(longestSubseq(s));\n    }\n}\n</code></pre>\n<p>I am trying to make a program to get maximum sequences <code>1</code> in a string containing <code>0's</code> &amp; <code>1's</code>. But I am unable to make out the logic for it, my program prints a number of 1's in the string which is not my desired output.</p>\n<pre><code>Sample input:- 0011100111100\noutput:- 4\n</code></pre>\n"},{"tags":["java","minecraft","minecraft-forge"],"comments":[{"owner":{"account_id":21530600,"reputation":2687,"user_id":15870118,"display_name":"JustinW"},"score":2,"creation_date":1637402462,"post_id":70044684,"comment_id":123820496,"body_markdown":"What is your Java Version? You can get it through `java -version`","body":"What is your Java Version? You can get it through <code>java -version</code>"},{"owner":{"account_id":19229580,"reputation":13,"user_id":14051701,"display_name":"Dcybroz"},"score":0,"creation_date":1637403541,"post_id":70044684,"comment_id":123820666,"body_markdown":"Java 16.0.2, but as I commented under Elikill58&#39;s reply this does not seem to be the issue. Thanks for the input though.","body":"Java 16.0.2, but as I commented under Elikill58&#39;s reply this does not seem to be the issue. Thanks for the input though."}],"answers":[{"tags":[],"owner":{"account_id":15178500,"reputation":4190,"user_id":10952503,"display_name":"Elikill58"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1637403276,"creation_date":1637403276,"answer_id":70044990,"question_id":70044684,"body_markdown":"You seems to be on Java 16. You can check with `java -version`.\r\n\r\nForge 1.12 can&#39;t be runned with this version of Java. So, I suggest you to :\r\n- Install older version such as Java 8.\r\n- Change boot code to `C:\\Dir\\To\\Jre\\java.exe -Xmx1024M -jar forge-universal.jar nogui`\r\n- OR change `JAVA_PATH` variable to the Java 8 JRE instead of Java 16&#39;s one.\r\n","title":"Modded mc server not booting up, Reason unknown","body":"<p>You seems to be on Java 16. You can check with <code>java -version</code>.</p>\n<p>Forge 1.12 can't be runned with this version of Java. So, I suggest you to :</p>\n<ul>\n<li>Install older version such as Java 8.</li>\n<li>Change boot code to <code>C:\\Dir\\To\\Jre\\java.exe -Xmx1024M -jar forge-universal.jar nogui</code></li>\n<li>OR change <code>JAVA_PATH</code> variable to the Java 8 JRE instead of Java 16's one.</li>\n</ul>\n"}],"owner":{"account_id":19229580,"reputation":13,"user_id":14051701,"display_name":"Dcybroz"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":4178,"favorite_count":0,"down_vote_count":2,"up_vote_count":1,"accepted_answer_id":70044990,"answer_count":1,"score":-1,"last_activity_date":1637403760,"creation_date":1637400350,"question_id":70044684,"body_markdown":"So Im having an issue booting up a modded mc server installation using forge 1.12.2.\r\nThe reason is unknown but I&#39;ve had this issue before. All I&#39;ve heard was to reinstall Java, even though I have done that multiple times.\r\n\r\nHere is what my directory looks like:\r\n\r\n![Server directory screenshot][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/GnYiT.png\r\n\r\nThis is stored inside `c:desktop/server`. Here is the server boot code: `java -Xmx1024M -jar forge-universal.jar nogui`.\r\n\r\nHere is the error, I cannot understand what any of it means, and there is no offical minecraft crash log:\r\n\r\n```\r\nA problem occurred running the Server launcher.java.lang.reflect.InvocationTargetException\r\n        at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n        at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:78)\r\n        at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n        at java.base/java.lang.reflect.Method.invoke(Method.java:567)\r\n        at net.minecraftforge.fml.relauncher.ServerLaunchWrapper.run(ServerLaunchWrapper.java:70)\r\n        at net.minecraftforge.fml.relauncher.ServerLaunchWrapper.main(ServerLaunchWrapper.java:34)\r\nCaused by: java.lang.ClassCastException: class jdk.internal.loader.ClassLoaders$AppClassLoader cannot be cast to class java.net.URLClassLoader (jdk.internal.loader.ClassLoaders$AppClassLoader and java.net.URLClassLoader are in module java.base of loader &#39;bootstrap&#39;)\r\n        at net.minecraft.launchwrapper.Launch.&lt;init&gt;(Launch.java:34)\r\n        at net.minecraft.launchwrapper.Launch.main(Launch.java:28)\r\n        ... 6 more\r\n```","title":"Modded mc server not booting up, Reason unknown","body":"<p>So Im having an issue booting up a modded mc server installation using forge 1.12.2.\nThe reason is unknown but I've had this issue before. All I've heard was to reinstall Java, even though I have done that multiple times.</p>\n<p>Here is what my directory looks like:</p>\n<p><img src=\"https://i.stack.imgur.com/GnYiT.png\" alt=\"Server directory screenshot\" /></p>\n<p>This is stored inside <code>c:desktop/server</code>. Here is the server boot code: <code>java -Xmx1024M -jar forge-universal.jar nogui</code>.</p>\n<p>Here is the error, I cannot understand what any of it means, and there is no offical minecraft crash log:</p>\n<pre><code>A problem occurred running the Server launcher.java.lang.reflect.InvocationTargetException\n        at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n        at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:78)\n        at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n        at java.base/java.lang.reflect.Method.invoke(Method.java:567)\n        at net.minecraftforge.fml.relauncher.ServerLaunchWrapper.run(ServerLaunchWrapper.java:70)\n        at net.minecraftforge.fml.relauncher.ServerLaunchWrapper.main(ServerLaunchWrapper.java:34)\nCaused by: java.lang.ClassCastException: class jdk.internal.loader.ClassLoaders$AppClassLoader cannot be cast to class java.net.URLClassLoader (jdk.internal.loader.ClassLoaders$AppClassLoader and java.net.URLClassLoader are in module java.base of loader 'bootstrap')\n        at net.minecraft.launchwrapper.Launch.&lt;init&gt;(Launch.java:34)\n        at net.minecraft.launchwrapper.Launch.main(Launch.java:28)\n        ... 6 more\n</code></pre>\n"},{"tags":["java","spring","mongodb","transactions"],"comments":[{"owner":{"account_id":2094057,"reputation":506072,"user_id":1863229,"accept_rate":58,"display_name":"Tim Biegeleisen"},"score":2,"creation_date":1637402799,"post_id":70044927,"comment_id":123820551,"body_markdown":"If you are not running Mongo 4.0 or later, then Spring Mongo will be unable to support transactions.","body":"If you are not running Mongo 4.0 or later, then Spring Mongo will be unable to support transactions."},{"owner":{"account_id":13141180,"reputation":4284,"user_id":9492730,"display_name":"dododo"},"score":1,"creation_date":1637416143,"post_id":70044927,"comment_id":123823047,"body_markdown":"Transactions are not supported on standalone topology, I guess you use it, then configure replica set or sharded","body":"Transactions are not supported on standalone topology, I guess you use it, then configure replica set or sharded"}],"owner":{"account_id":21850324,"reputation":57,"user_id":16142483,"display_name":"diaop"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":477,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1637402678,"creation_date":1637402678,"question_id":70044927,"body_markdown":"I&#39;m getting this exception when adding Transactional to Spring mongo code. \r\n\r\n`Caused by: com.mongodb.MongoClientException: Transactions are not supported by the MongoDB cluster to which this client is connected`\r\n\r\nThis is my code: @Configuration\r\n```@EnableTransactionManagement\r\n@EnableMongoRepositories(basePackages = { &quot;com.repository&quot; })\r\npublic class MongoConfig  extends AbstractMongoClientConfiguration {\r\n\r\n    @Value(&quot;${spring.data.mongodb.uri}&quot;)\r\n    private String connection;\r\n\r\n    @Value(&quot;${spring.data.mongodb.database}&quot;)\r\n    private String database;\r\n\r\n    @Autowired\r\n    MongoProperties mongoProperties;\r\n\r\n    @Bean\r\n    MongoTransactionManager transactionManager(MongoDatabaseFactory dbFactory) {\r\n        return new MongoTransactionManager(dbFactory);\r\n    }\r\n\r\n    @Override\r\n    protected String getDatabaseName() {\r\n        return &quot;hendrix&quot;;\r\n    }\r\n\r\n    @Override\r\n    public MongoClient mongoClient() {\r\n        final ConnectionString connectionString = new ConnectionString(connection);\r\n        final MongoClientSettings mongoClientSettings = MongoClientSettings.builder()\r\n                .applyConnectionString(connectionString)\r\n                .build();\r\n        return MongoClients.create(mongoClientSettings);\r\n    }\r\n}\r\n```\r\n\r\nHow do I add replicas to a barebones Mongo setup I have access to? If the cluster is on AWS what setting would I have to change?\r\n\r\n\r\n","title":"Mongo setup not allowing transactions","body":"<p>I'm getting this exception when adding Transactional to Spring mongo code.</p>\n<p><code>Caused by: com.mongodb.MongoClientException: Transactions are not supported by the MongoDB cluster to which this client is connected</code></p>\n<p>This is my code: @Configuration</p>\n<pre><code>@EnableMongoRepositories(basePackages = { &quot;com.repository&quot; })\npublic class MongoConfig  extends AbstractMongoClientConfiguration {\n\n    @Value(&quot;${spring.data.mongodb.uri}&quot;)\n    private String connection;\n\n    @Value(&quot;${spring.data.mongodb.database}&quot;)\n    private String database;\n\n    @Autowired\n    MongoProperties mongoProperties;\n\n    @Bean\n    MongoTransactionManager transactionManager(MongoDatabaseFactory dbFactory) {\n        return new MongoTransactionManager(dbFactory);\n    }\n\n    @Override\n    protected String getDatabaseName() {\n        return &quot;hendrix&quot;;\n    }\n\n    @Override\n    public MongoClient mongoClient() {\n        final ConnectionString connectionString = new ConnectionString(connection);\n        final MongoClientSettings mongoClientSettings = MongoClientSettings.builder()\n                .applyConnectionString(connectionString)\n                .build();\n        return MongoClients.create(mongoClientSettings);\n    }\n}\n</code></pre>\n<p>How do I add replicas to a barebones Mongo setup I have access to? If the cluster is on AWS what setting would I have to change?</p>\n"},{"tags":["java","generics"],"comments":[{"owner":{"account_id":2366187,"reputation":60152,"user_id":2071828,"accept_rate":88,"display_name":"Boris the Spider"},"score":0,"creation_date":1637400170,"post_id":70044657,"comment_id":123820094,"body_markdown":"You cannot as it stands. Wildcard generics mean “some specific type within these bounds but I don’t know what”. `?` means “and I also don’t care”. But it is still a single specific type. Your `put` method allows the caller to specify the type - so there is no way the compiler can guarantee type safety. Remove the generics, make it all `Base`, and that will work just fine.","body":"You cannot as it stands. Wildcard generics mean “some specific type within these bounds but I don’t know what”. <code>?</code> means “and I also don’t care”. But it is still a single specific type. Your <code>put</code> method allows the caller to specify the type - so there is no way the compiler can guarantee type safety. Remove the generics, make it all <code>Base</code>, and that will work just fine."},{"owner":{"account_id":23399819,"reputation":11,"user_id":17463157,"display_name":"PlMem"},"score":0,"creation_date":1637400839,"post_id":70044657,"comment_id":123820204,"body_markdown":"@BoristheSpider I just tried to clarify type inheritance with generics, but it wasn&#39;t necessary, i got it.","body":"@BoristheSpider I just tried to clarify type inheritance with generics, but it wasn&#39;t necessary, i got it."}],"answers":[{"tags":[],"owner":{"account_id":23237287,"reputation":64,"user_id":17327150,"display_name":"CodeAddict"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1637402605,"creation_date":1637402605,"answer_id":70044919,"question_id":70044657,"body_markdown":"Quite simple:\r\n\r\n? - is a **wildcard**\r\n\r\nT - is a **generic type**\r\n\r\nThey are similar but different. If you want to **enforce** the type,them you cannot use a wildcard. You have to use generics\r\n\r\n**Example**\r\n\r\n    public &lt;T extends Number&gt; void copy(List&lt;T&gt; dest,List&lt;T&gt; src){\r\n    \t//code\r\n    }\r\n\r\nThe code above will be able to copy a list from src, to dest.  Both src and dest have the same generic type, so it is safe to copy each element. \r\n\r\n\r\n\r\n    public void copy(List&lt;? extends Number&gt; dest, List&lt;? extends Number&gt; src){\r\n    \t//code\r\n    }\r\n\r\nThe code above is not very good. dest could be of type List&lt;**Integer**&gt; while src could be of type List&lt;**Double**&gt;\r\n\r\nI hope this helps &#128522;","title":"What difference between &lt;T extends Foo&gt; and &lt;? extends Foo&gt;?","body":"<p>Quite simple:</p>\n<p>? - is a <strong>wildcard</strong></p>\n<p>T - is a <strong>generic type</strong></p>\n<p>They are similar but different. If you want to <strong>enforce</strong> the type,them you cannot use a wildcard. You have to use generics</p>\n<p><strong>Example</strong></p>\n<pre><code>public &lt;T extends Number&gt; void copy(List&lt;T&gt; dest,List&lt;T&gt; src){\n    //code\n}\n</code></pre>\n<p>The code above will be able to copy a list from src, to dest.  Both src and dest have the same generic type, so it is safe to copy each element.</p>\n<pre><code>public void copy(List&lt;? extends Number&gt; dest, List&lt;? extends Number&gt; src){\n    //code\n}\n</code></pre>\n<p>The code above is not very good. dest could be of type List&lt;<strong>Integer</strong>&gt; while src could be of type List&lt;<strong>Double</strong>&gt;</p>\n<p>I hope this helps 😊</p>\n"}],"owner":{"account_id":23399819,"reputation":11,"user_id":17463157,"display_name":"PlMem"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":138,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"accepted_answer_id":70044919,"answer_count":1,"score":0,"last_activity_date":1637402605,"creation_date":1637400017,"question_id":70044657,"body_markdown":"I have following code:\r\n```java\r\nabstract public class Base {\r\n    private static final HashMap&lt;Integer, ? extends Base&gt; hashMap = new HashMap&lt;&gt;();\r\n\r\n    public static &lt;T extends Base&gt; void put(Integer key, T val) {\r\n        hashMap.put(key, val);\r\n    }\r\n\r\n    public static &lt;T extends Base&gt; T get(Integer key) {\r\n        return hashMap.get(key);\r\n    }\r\n}\r\n```\r\n\r\nSo, i got incompatible types at `Base.put()` method: `&lt;T extends Base&gt;` and `&lt;? extends Base&gt;`. \r\n\r\nWhat difference and how to rewrite that code properly?","title":"What difference between &lt;T extends Foo&gt; and &lt;? extends Foo&gt;?","body":"<p>I have following code:</p>\n<pre class=\"lang-java prettyprint-override\"><code>abstract public class Base {\n    private static final HashMap&lt;Integer, ? extends Base&gt; hashMap = new HashMap&lt;&gt;();\n\n    public static &lt;T extends Base&gt; void put(Integer key, T val) {\n        hashMap.put(key, val);\n    }\n\n    public static &lt;T extends Base&gt; T get(Integer key) {\n        return hashMap.get(key);\n    }\n}\n</code></pre>\n<p>So, i got incompatible types at <code>Base.put()</code> method: <code>&lt;T extends Base&gt;</code> and <code>&lt;? extends Base&gt;</code>.</p>\n<p>What difference and how to rewrite that code properly?</p>\n"},{"tags":["java","executorservice"],"comments":[{"owner":{"account_id":2139538,"reputation":42511,"user_id":1898563,"accept_rate":78,"display_name":"Michael"},"score":4,"creation_date":1614206679,"post_id":66359787,"comment_id":117318810,"body_markdown":"Can&#39;t think of any advantage. The semantics of any exception thrown by the `do stuff` code will be different. That&#39;s the only tangible difference I can think of, and it seems unlikely anyone would choose it for that purpose and not leave a comment explaining it. I would say 90+% of the time, when you see code that makes you think &quot;*why the hell would anyone do that?*&quot; it&#39;s not because they&#39;re so smart that you can&#39;t understand it, it&#39;s that they&#39;re too stupid to know what they&#39;re doing.","body":"Can&#39;t think of any advantage. The semantics of any exception thrown by the <code>do stuff</code> code will be different. That&#39;s the only tangible difference I can think of, and it seems unlikely anyone would choose it for that purpose and not leave a comment explaining it. I would say 90+% of the time, when you see code that makes you think &quot;<i>why the hell would anyone do that?</i>&quot; it&#39;s not because they&#39;re so smart that you can&#39;t understand it, it&#39;s that they&#39;re too stupid to know what they&#39;re doing."},{"owner":{"account_id":440158,"reputation":323231,"user_id":829571,"accept_rate":94,"display_name":"assylias"},"score":0,"creation_date":1614207175,"post_id":66359787,"comment_id":117318940,"body_markdown":"One possible reason is that the executor is a way to manage a number of tasks from a central point. In other words, calling `executor.shutdownNow()` will cancel all tasks managed by that executor.","body":"One possible reason is that the executor is a way to manage a number of tasks from a central point. In other words, calling <code>executor.shutdownNow()</code> will cancel all tasks managed by that executor."},{"owner":{"account_id":440158,"reputation":323231,"user_id":829571,"accept_rate":94,"display_name":"assylias"},"score":0,"creation_date":1614208012,"post_id":66359787,"comment_id":117319157,"body_markdown":"Imagine a module in your app that has several long running functions. If you execute them that way, and the user closes the module, you can shutdownNow the executor and all the tasks that were running in the module get cancelled. Obviously, I know nothing of your setup and it could well be a piece of useless code.","body":"Imagine a module in your app that has several long running functions. If you execute them that way, and the user closes the module, you can shutdownNow the executor and all the tasks that were running in the module get cancelled. Obviously, I know nothing of your setup and it could well be a piece of useless code."},{"owner":{"account_id":17505775,"reputation":3076,"user_id":12695027,"display_name":"Scratte"},"score":2,"creation_date":1614214694,"post_id":66359787,"comment_id":117320690,"body_markdown":"Consider rolling that edit back (except for the part in the body). The tag was useful, and the old title was better. This new tittle makes the entire post &quot;Opinion based&quot;.","body":"Consider rolling that edit back (except for the part in the body). The tag was useful, and the old title was better. This new tittle makes the entire post &quot;Opinion based&quot;."}],"answers":[{"tags":[],"owner":{"account_id":173621,"reputation":10596,"user_id":402428,"display_name":"michid"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1637402595,"creation_date":1636846162,"answer_id":69959099,"question_id":66359787,"body_markdown":"Because somebody blindly copied this from [Javadoc][1], which reads &quot;If you would like to immediately block waiting for a task, you can use constructions of the form `result = exec.submit(aCallable).get();`&quot; \r\n\r\nApart from that and the slight difference in exception semantics that @Michael mentioned in his comment on the question, there is also a slight difference wrt. interrupting of threads: if `// do stuff` blocks uninterruptedly you would still be able to interrupt the blocking call to `Future.get` or cancel the future. Note though, this doesn&#39;t do anything to the thread running `// do stuff`. That thread would keep blocking, only your main thread becomes unblocked.  \r\n\r\n  [1]: https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/concurrent/ExecutorService.html#submit(java.util.concurrent.Callable)","title":"What&#39;s the advantage of using ExecutorService with immediate get()?","body":"<p>Because somebody blindly copied this from <a href=\"https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/concurrent/ExecutorService.html#submit(java.util.concurrent.Callable)\" rel=\"nofollow noreferrer\">Javadoc</a>, which reads &quot;If you would like to immediately block waiting for a task, you can use constructions of the form <code>result = exec.submit(aCallable).get();</code>&quot;</p>\n<p>Apart from that and the slight difference in exception semantics that @Michael mentioned in his comment on the question, there is also a slight difference wrt. interrupting of threads: if <code>// do stuff</code> blocks uninterruptedly you would still be able to interrupt the blocking call to <code>Future.get</code> or cancel the future. Note though, this doesn't do anything to the thread running <code>// do stuff</code>. That thread would keep blocking, only your main thread becomes unblocked.</p>\n"},{"tags":[],"owner":{"account_id":7797973,"reputation":6780,"user_id":5898421,"display_name":"Andrew Parks"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1636847386,"creation_date":1636847386,"answer_id":69959186,"question_id":66359787,"body_markdown":"&gt; submitting something you will immediately get\r\n\r\nJust because you submit the task and &#39;get&#39; it immediately, that doesn&#39;t necessarily mean it will be run immediately by the ExecutorService.\r\n\r\nHere&#39;s a practical example of how this is useful:\r\n\r\nYou have a web server, which returns weather data. When an HTTP request comes in, you need to make a connection to a weather API to retrieve the weather data.\r\n\r\nHowever, that weather API only allows two concurrent connections.\r\n\r\nOne way to solve this problem would be to have an ExecutorService with only two available threads.\r\n\r\nNow, no matter how many servlet threads simultaneously submit tasks for execution, you can ensure that only two threads at a time can perform requests against the weather API. The servlet threads will block until the weather API is available to provide the servlet with the requested data.","title":"What&#39;s the advantage of using ExecutorService with immediate get()?","body":"<blockquote>\n<p>submitting something you will immediately get</p>\n</blockquote>\n<p>Just because you submit the task and 'get' it immediately, that doesn't necessarily mean it will be run immediately by the ExecutorService.</p>\n<p>Here's a practical example of how this is useful:</p>\n<p>You have a web server, which returns weather data. When an HTTP request comes in, you need to make a connection to a weather API to retrieve the weather data.</p>\n<p>However, that weather API only allows two concurrent connections.</p>\n<p>One way to solve this problem would be to have an ExecutorService with only two available threads.</p>\n<p>Now, no matter how many servlet threads simultaneously submit tasks for execution, you can ensure that only two threads at a time can perform requests against the weather API. The servlet threads will block until the weather API is available to provide the servlet with the requested data.</p>\n"},{"tags":[],"owner":{"account_id":93689,"reputation":415931,"user_id":256196,"accept_rate":77,"display_name":"Bohemian"},"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1636937574,"creation_date":1636847798,"answer_id":69959219,"question_id":66359787,"body_markdown":"Calling an immediate `get()` forces the `ExecutorService` to process &quot;do stuff&quot; in the executor service&#39;s threadpool rather than the local thread, which may for example choke processing if the maximum number of threads allocated to it is small, despite there being a great many threads running to handle requests.\r\n\r\nConsider an obvious example of an executor service that has only 1 thread:\r\n\r\n    ExecutorService executorService = Executors.newSingleThreadExecutor();\r\n\r\nand the example code being called from say an `HttpRequestHandler`.\r\n\r\nBy using the immediate `get()` processing of &quot;do stuff&quot; will be *serialized*, which may be desirable or a requirement, despite there being many simultaneous requests being processed each in their own thread.\r\n\r\nWithout the wrapper of `executorService.submit(...).get()`, processing of &quot;do stuff&quot; would be done in parallel in the request handler&#39;s thread, which may be fine or may cause problems if &quot;do stuff&quot; is particularly expensive or constrained in some way if parallelism is unbounded.\r\n\r\nParallelism can be limited/bounded instead of eliminated as follows:\r\n\r\n    ExecutorService executorService = Executors.newFixedThreadPool(3);\r\n\r\nwould limit processing to (for example) a maximum of 3 concurrently processing &quot;do stuff&quot;s, despite there being a great many requests being processed simultaneously.\r\n\r\n---\r\n\r\nOther more subtle effects are possible to via the choice of `Thread` in which &quot;do stuff&quot; runs. Consider:\r\n\r\n    ExecutorService executorService = Executors.newSingleThreadExecutor(myThreadFactory);\r\n\r\nwill make &quot;do stuff&quot; run in a custom type of thread, rather than in the thread type chosen for the `HttpRequestHandler`.\r\n","title":"What&#39;s the advantage of using ExecutorService with immediate get()?","body":"<p>Calling an immediate <code>get()</code> forces the <code>ExecutorService</code> to process &quot;do stuff&quot; in the executor service's threadpool rather than the local thread, which may for example choke processing if the maximum number of threads allocated to it is small, despite there being a great many threads running to handle requests.</p>\n<p>Consider an obvious example of an executor service that has only 1 thread:</p>\n<pre><code>ExecutorService executorService = Executors.newSingleThreadExecutor();\n</code></pre>\n<p>and the example code being called from say an <code>HttpRequestHandler</code>.</p>\n<p>By using the immediate <code>get()</code> processing of &quot;do stuff&quot; will be <em>serialized</em>, which may be desirable or a requirement, despite there being many simultaneous requests being processed each in their own thread.</p>\n<p>Without the wrapper of <code>executorService.submit(...).get()</code>, processing of &quot;do stuff&quot; would be done in parallel in the request handler's thread, which may be fine or may cause problems if &quot;do stuff&quot; is particularly expensive or constrained in some way if parallelism is unbounded.</p>\n<p>Parallelism can be limited/bounded instead of eliminated as follows:</p>\n<pre><code>ExecutorService executorService = Executors.newFixedThreadPool(3);\n</code></pre>\n<p>would limit processing to (for example) a maximum of 3 concurrently processing &quot;do stuff&quot;s, despite there being a great many requests being processed simultaneously.</p>\n<hr />\n<p>Other more subtle effects are possible to via the choice of <code>Thread</code> in which &quot;do stuff&quot; runs. Consider:</p>\n<pre><code>ExecutorService executorService = Executors.newSingleThreadExecutor(myThreadFactory);\n</code></pre>\n<p>will make &quot;do stuff&quot; run in a custom type of thread, rather than in the thread type chosen for the <code>HttpRequestHandler</code>.</p>\n"},{"tags":[],"owner":{"account_id":71985,"reputation":7903,"user_id":208013,"display_name":"Mirek Pluta"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1636909585,"creation_date":1636909585,"answer_id":69965326,"question_id":66359787,"body_markdown":"The only use case that I can think of is when:\r\n\r\n - code that calls it MUST return some result synchronously (i.e. it&#39;s implementing some sync api handling http request or whatnot)\r\n - the executor that is called is a ForkJoinPool and the task submitted is the RecursiveTask that will internally fork. This way you could use more than one cpu to execute whole task.","title":"What&#39;s the advantage of using ExecutorService with immediate get()?","body":"<p>The only use case that I can think of is when:</p>\n<ul>\n<li>code that calls it MUST return some result synchronously (i.e. it's implementing some sync api handling http request or whatnot)</li>\n<li>the executor that is called is a ForkJoinPool and the task submitted is the RecursiveTask that will internally fork. This way you could use more than one cpu to execute whole task.</li>\n</ul>\n"},{"tags":[],"owner":{"account_id":23227968,"reputation":1,"user_id":17319209,"display_name":"Two4"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1637227743,"creation_date":1637227743,"answer_id":70017382,"question_id":66359787,"body_markdown":"Using a `.get()` call on a `Future` allows one to abstract the details of how exactly one delivers the result. Excusing the length of the example, if one looks at the `.get()` method for the below class, one can see that to implement the same sort of timing mechanism in the calling thread would be an excessive amount of boilerplate code. By abstracting it, the calling thread will simply block indefinitely while the worker thread worries about the details of delivering on the promise of its `Future`\r\n```java\r\nimport java.util.Optional;\r\nimport java.util.concurrent.*;\r\nimport java.util.concurrent.locks.ReentrantLock;\r\n\r\nclass DecayingRetry&lt;T&gt; implements Future&lt;T&gt; {\r\n    protected final ScheduledExecutorService executor;\r\n    protected final Callable&lt;T&gt; callable;\r\n    private final boolean isOwnExecutor;\r\n    protected ScheduledFuture&lt;?&gt; future;\r\n    @SuppressWarnings(&quot;OptionalUsedAsFieldOrParameterType&quot;)\r\n    protected Optional&lt;?&gt; result;\r\n    protected boolean isDone;\r\n    protected boolean isCancelled;\r\n    protected final ReentrantLock lock;\r\n    private final double maxDelay;\r\n    private double initialDelay;\r\n    private final TimeUnit timeUnit;\r\n\r\n\r\n    private DecayingRetry(ScheduledExecutorService executor,\r\n                            boolean isOwnExecutor,\r\n                            Callable&lt;T&gt; callable,\r\n                            long initialDelay,\r\n                            long maxDelay,\r\n                            TimeUnit timeUnit) {\r\n        this.isOwnExecutor = isOwnExecutor;\r\n        lock = new ReentrantLock(true);\r\n        lock.lock();\r\n        this.executor = executor;\r\n        this.callable = callable;\r\n        isCancelled = false;\r\n        isDone = false;\r\n        if (maxDelay &lt; 0) {\r\n            this.maxDelay = Double.POSITIVE_INFINITY;\r\n        } else {\r\n            this.maxDelay = maxDelay;\r\n        }\r\n        lock.lock();\r\n        this.initialDelay = (double) initialDelay;\r\n        this.timeUnit = timeUnit;\r\n        future = executor.schedule(this::delayLoop, initialDelay, timeUnit);\r\n\r\n    }\r\n\r\n\r\n    public static &lt;T&gt; T on(Callable&lt;T&gt; callable, long initialDelay, long maxDelay, TimeUnit timeUnit) throws Exception {\r\n        try {\r\n            return Optional.ofNullable(callable.call()).orElseThrow(IllegalStateException::new);\r\n        } catch (IllegalStateException ignored) {\r\n            try {\r\n                return new DecayingRetry&lt;&gt;(Executors.newSingleThreadScheduledExecutor(),\r\n                                                      true,\r\n                                                      callable,\r\n                                                      initialDelay,\r\n                                                      maxDelay,\r\n                                                      timeUnit).get();\r\n            } catch (InterruptedException | ExecutionException e) {\r\n                e.printStackTrace();\r\n                System.exit(-1);\r\n            }\r\n        }\r\n        return null;\r\n    }\r\n\r\n    public static &lt;T&gt; T on(Callable&lt;T&gt; callable,\r\n                           ScheduledExecutorService executor,\r\n                           long initialDelay,\r\n                           long maxDelay,\r\n                           TimeUnit timeUnit) throws Exception {\r\n        try {\r\n            return Optional.ofNullable(callable.call()).orElseThrow(IllegalStateException::new);\r\n        } catch (IllegalStateException ignored) {\r\n            try {\r\n                return new DecayingRetry&lt;&gt;(executor,\r\n                                                      false,\r\n                                                      callable,\r\n                                                      initialDelay,\r\n                                                      maxDelay,\r\n                                                      timeUnit).get();\r\n            } catch (InterruptedException | ExecutionException e) {\r\n                e.printStackTrace();\r\n                System.exit(-1);\r\n            }\r\n        }\r\n        return null;\r\n    }\r\n\r\n    synchronized private void delayLoop() {\r\n        if (isDone) {\r\n            return;\r\n        }\r\n        try {\r\n            result = Optional.ofNullable(callable.call());\r\n        } catch (Exception e) {\r\n            result = Optional.of(e);\r\n            isDone = true;\r\n            return;\r\n        }\r\n        if (!result.isPresent()) {\r\n            if (initialDelay &lt; maxDelay) {\r\n                initialDelay *= 1.618033988749; //PHI\r\n                initialDelay = Math.min(maxDelay, initialDelay);\r\n            }\r\n            future = executor.schedule(this::delayLoop, (long) initialDelay, timeUnit);\r\n        } else {\r\n            isDone = true;\r\n            lock.unlock();\r\n        }\r\n    }\r\n\r\n\r\n    public boolean cancel(boolean mayInterruptIfRunning) {\r\n        if (isDone) {\r\n            return false;\r\n        } else if (future.cancel(mayInterruptIfRunning)) {\r\n            isCancelled = true;\r\n            isDone = true;\r\n            return true;\r\n        }\r\n        return false;\r\n    }\r\n\r\n    @Override\r\n    public boolean isCancelled() {\r\n        return isCancelled;\r\n    }\r\n\r\n    @Override\r\n    public boolean isDone() {\r\n        return isDone;\r\n    }\r\n\r\n    @Override\r\n    @NotNull\r\n    public T get() throws InterruptedException, ExecutionException {\r\n        lock.lock();\r\n        while (!isDone) { // lock acquired too early for some reason, so we allow the worker thread to grab it\r\n            lock.unlock();\r\n            lock.lock();\r\n        }\r\n        if (result.isPresent()) {\r\n            if (result.get() instanceof Throwable) {\r\n                throw new ExecutionException((Throwable) result.get());\r\n            }\r\n            if (isOwnExecutor) {\r\n                executor.shutdown();\r\n            }\r\n            //noinspection unchecked\r\n            return (T) result.get();\r\n        }\r\n        throw new ExecutionException(new IllegalStateException(&quot;Retry result was null&quot;));\r\n    }\r\n\r\n    public T get(long timeout, @NotNull TimeUnit unit) throws InterruptedException, ExecutionException, TimeoutException {\r\n        throw new ExecutionException(new IllegalStateException(&quot;Not implemented&quot;));\r\n    }\r\n\r\n}\r\n```","title":"What&#39;s the advantage of using ExecutorService with immediate get()?","body":"<p>Using a <code>.get()</code> call on a <code>Future</code> allows one to abstract the details of how exactly one delivers the result. Excusing the length of the example, if one looks at the <code>.get()</code> method for the below class, one can see that to implement the same sort of timing mechanism in the calling thread would be an excessive amount of boilerplate code. By abstracting it, the calling thread will simply block indefinitely while the worker thread worries about the details of delivering on the promise of its <code>Future</code></p>\n<pre class=\"lang-java prettyprint-override\"><code>import java.util.Optional;\nimport java.util.concurrent.*;\nimport java.util.concurrent.locks.ReentrantLock;\n\nclass DecayingRetry&lt;T&gt; implements Future&lt;T&gt; {\n    protected final ScheduledExecutorService executor;\n    protected final Callable&lt;T&gt; callable;\n    private final boolean isOwnExecutor;\n    protected ScheduledFuture&lt;?&gt; future;\n    @SuppressWarnings(&quot;OptionalUsedAsFieldOrParameterType&quot;)\n    protected Optional&lt;?&gt; result;\n    protected boolean isDone;\n    protected boolean isCancelled;\n    protected final ReentrantLock lock;\n    private final double maxDelay;\n    private double initialDelay;\n    private final TimeUnit timeUnit;\n\n\n    private DecayingRetry(ScheduledExecutorService executor,\n                            boolean isOwnExecutor,\n                            Callable&lt;T&gt; callable,\n                            long initialDelay,\n                            long maxDelay,\n                            TimeUnit timeUnit) {\n        this.isOwnExecutor = isOwnExecutor;\n        lock = new ReentrantLock(true);\n        lock.lock();\n        this.executor = executor;\n        this.callable = callable;\n        isCancelled = false;\n        isDone = false;\n        if (maxDelay &lt; 0) {\n            this.maxDelay = Double.POSITIVE_INFINITY;\n        } else {\n            this.maxDelay = maxDelay;\n        }\n        lock.lock();\n        this.initialDelay = (double) initialDelay;\n        this.timeUnit = timeUnit;\n        future = executor.schedule(this::delayLoop, initialDelay, timeUnit);\n\n    }\n\n\n    public static &lt;T&gt; T on(Callable&lt;T&gt; callable, long initialDelay, long maxDelay, TimeUnit timeUnit) throws Exception {\n        try {\n            return Optional.ofNullable(callable.call()).orElseThrow(IllegalStateException::new);\n        } catch (IllegalStateException ignored) {\n            try {\n                return new DecayingRetry&lt;&gt;(Executors.newSingleThreadScheduledExecutor(),\n                                                      true,\n                                                      callable,\n                                                      initialDelay,\n                                                      maxDelay,\n                                                      timeUnit).get();\n            } catch (InterruptedException | ExecutionException e) {\n                e.printStackTrace();\n                System.exit(-1);\n            }\n        }\n        return null;\n    }\n\n    public static &lt;T&gt; T on(Callable&lt;T&gt; callable,\n                           ScheduledExecutorService executor,\n                           long initialDelay,\n                           long maxDelay,\n                           TimeUnit timeUnit) throws Exception {\n        try {\n            return Optional.ofNullable(callable.call()).orElseThrow(IllegalStateException::new);\n        } catch (IllegalStateException ignored) {\n            try {\n                return new DecayingRetry&lt;&gt;(executor,\n                                                      false,\n                                                      callable,\n                                                      initialDelay,\n                                                      maxDelay,\n                                                      timeUnit).get();\n            } catch (InterruptedException | ExecutionException e) {\n                e.printStackTrace();\n                System.exit(-1);\n            }\n        }\n        return null;\n    }\n\n    synchronized private void delayLoop() {\n        if (isDone) {\n            return;\n        }\n        try {\n            result = Optional.ofNullable(callable.call());\n        } catch (Exception e) {\n            result = Optional.of(e);\n            isDone = true;\n            return;\n        }\n        if (!result.isPresent()) {\n            if (initialDelay &lt; maxDelay) {\n                initialDelay *= 1.618033988749; //PHI\n                initialDelay = Math.min(maxDelay, initialDelay);\n            }\n            future = executor.schedule(this::delayLoop, (long) initialDelay, timeUnit);\n        } else {\n            isDone = true;\n            lock.unlock();\n        }\n    }\n\n\n    public boolean cancel(boolean mayInterruptIfRunning) {\n        if (isDone) {\n            return false;\n        } else if (future.cancel(mayInterruptIfRunning)) {\n            isCancelled = true;\n            isDone = true;\n            return true;\n        }\n        return false;\n    }\n\n    @Override\n    public boolean isCancelled() {\n        return isCancelled;\n    }\n\n    @Override\n    public boolean isDone() {\n        return isDone;\n    }\n\n    @Override\n    @NotNull\n    public T get() throws InterruptedException, ExecutionException {\n        lock.lock();\n        while (!isDone) { // lock acquired too early for some reason, so we allow the worker thread to grab it\n            lock.unlock();\n            lock.lock();\n        }\n        if (result.isPresent()) {\n            if (result.get() instanceof Throwable) {\n                throw new ExecutionException((Throwable) result.get());\n            }\n            if (isOwnExecutor) {\n                executor.shutdown();\n            }\n            //noinspection unchecked\n            return (T) result.get();\n        }\n        throw new ExecutionException(new IllegalStateException(&quot;Retry result was null&quot;));\n    }\n\n    public T get(long timeout, @NotNull TimeUnit unit) throws InterruptedException, ExecutionException, TimeoutException {\n        throw new ExecutionException(new IllegalStateException(&quot;Not implemented&quot;));\n    }\n\n}\n</code></pre>\n"}],"owner":{"account_id":108205,"reputation":27809,"user_id":287316,"accept_rate":87,"display_name":"The Student"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":405,"favorite_count":0,"down_vote_count":1,"up_vote_count":5,"answer_count":5,"score":4,"last_activity_date":1637402595,"creation_date":1614206156,"question_id":66359787,"body_markdown":"I see in the code here a lot of \r\n\r\n\texecutorService.submit(() -&gt; {\r\n\t\t// do stuff\r\n\t}).get();\r\n\r\n...and I wonder why is the executorService used like this, submitting something you will immediately get?","title":"What&#39;s the advantage of using ExecutorService with immediate get()?","body":"<p>I see in the code here a lot of</p>\n<pre><code>executorService.submit(() -&gt; {\n    // do stuff\n}).get();\n</code></pre>\n<p>...and I wonder why is the executorService used like this, submitting something you will immediately get?</p>\n"},{"tags":["java","android","android-room"],"answers":[{"tags":[],"owner":{"account_id":6077735,"reputation":52951,"user_id":4744514,"accept_rate":96,"display_name":"MikeT"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1637402239,"creation_date":1637371197,"answer_id":70042535,"question_id":70042096,"body_markdown":"&gt; How do I tweak my parent and child classes code and add proper annotations for implementing foreign and primary keys correctly? \r\n\r\nLet the assessment_id always be the primary key i.e. don&#39;t code it in sub classes and then have a field for the reference/map/association with the parent in the subclasses.\r\n\r\n\r\nSo PerformanceAssessment could be :-\r\n\r\n    @Entity(tableName = &quot;performance_assessment&quot;, foreignKeys = {\r\n            @ForeignKey(\r\n                    entity = Assessment.class,\r\n                    parentColumns = &quot;assessment_id&quot;,\r\n                    childColumns = &quot;assessment_reference&quot;,\r\n                    onUpdate = CASCADE,\r\n                    onDelete = CASCADE\r\n            )\r\n    })\r\n    public class PerformanceAssessment extends Assessment {\r\n    \r\n        private int assessment_reference; //&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;\r\n        private String type;\r\n    \r\n        public PerformanceAssessment(int assessment_id, String assessmentName, String assessmentStart, String assessmentEnd, int courseID, int assessment_reference, String type) {\r\n            super(assessment_id, assessmentName, assessmentStart, assessmentEnd, courseID);\r\n            this.assessment_reference = assessment_reference;\r\n            this.type = type;\r\n        }\r\n        ....\r\n\r\nand all compiles  and the underlying tables will be build using :-\r\n\r\n        _db.execSQL(&quot;CREATE TABLE IF NOT EXISTS `assessment_table` (`assessment_id` INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, `assessmentName` TEXT, `assessmentStart` TEXT, `assessmentEnd` TEXT, `courseID` INTEGER NOT NULL)&quot;);\r\n        _db.execSQL(&quot;CREATE TABLE IF NOT EXISTS `performance_assessment` (`assessment_reference` INTEGER NOT NULL, `type` TEXT, `assessment_id` INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, `assessmentName` TEXT, `assessmentStart` TEXT, `assessmentEnd` TEXT, `courseID` INTEGER NOT NULL, FOREIGN KEY(`assessment_reference`) REFERENCES `assessment_table`(`assessment_id`) ON UPDATE CASCADE ON DELETE CASCADE )&quot;);\r\n\r\n\r\n- Obviously similar for the ObjectiveAssessment.\r\n\r\n\r\n&gt; But I also need to utilize the children&#39;s primary key as a foreign key for the parent&#39;s databases so that when I delete an instance of Performance/Objective assessments, I can also delete the Assessment instance when I am downcasting.\r\n\r\nWhat if, *which is possible with the 1 (Assessment) - Many (PerformanceAssessments)*, an Assessment has multiple PerformanceAssesments? Deleting 1 PerformanceAsessment would delete the parent Assessment, which would then, due to the use of `onDelete CASCADE` cascade the deletions to all the other PerformanceAssessments and ObjectiveAssessments. Deletions are not propagated up to the parent (that&#39;s why the term CASCADE is used as it implies downward rather than anyway).\r\n\r\nAs an example you have an assessment with 4 PerformanceAssessments  and lets say 3 ObjectiveAssessments one of the PerformanceAssesments was wrongly added. Should everything have to be deleted and re-entered to correct the 1 wrong PeformanceAssessment.\r\n\r\nYou could introduce a Trigger to automate this upwards propogation, to delete anything and delete all, if that is what you want.\r\n\r\n**Additional Re comments**\r\n\r\n&gt; I have a one to one relationship for the Assessment and Performance/Objective assessment. One assessment can only have either performance or objective type. \r\n\r\nThat may be what you wish BUT there is nothing stopping an Assessment having multiple Performance and or Objectives. That may or may not be an issue.\r\n\r\n&gt; Also, instead of downcasting, I did upcasting instead on where I save the assessment in the app.  I ran into Foreign Key Constraint Failed (code 787) and realized it was because I was downcasting. My only dilemma now is that whenever I am saving an assessment, it will only save on assessment_table and not on performance_assessment or objective_assessment tbl.\r\n\r\nWhat you have to do is insert the Assessment (parent) and then use the parent&#39;s id to insert the related Peformance/Objective with the assessment_reference set the the value of the assessment.\r\n\r\nThe 787 is it saying that you cannot insert a child (Performance/Objective) without the assessment_reference being an assessment_id in the Assessment.\r\n\r\nWhat you can do, which would very likely suit your situation is a) have an `@Insert long insert(Assessment assessment);` and an `@Insert long (PerformanceAssessment performanceAssessment)` (likewise for Objective)\r\n\r\nand then use (assuming **dao** is an instance of the @Dao)\r\n\r\nand use \r\n\r\n    dao.insert(new PerformanceAssessment(0,&quot;the title&quot;, etc,dao.insert(Assessment(....),&quot;the type&quot;);\r\n\r\nSo the Assessment is added as part of inserting the performance/Objective and with the id of the assessment being used as the assessment_reference value.\r\n\r\n- **NOTE** the @Insert will **only return a long**, so you have to convert this to an int. I would suggest changing **id**&#39;s and references to be long&#39;s. The overhead, if any, will have a minimal impact. Storage in the database will not be affected and it will save the hassle of converting long to int.\r\n\r\n\r\n**Demonstration**\r\n\r\nThe following is a demonstration based upon code that closely reflects your but with some subtle changes.\r\n\r\n1. **id**&#39;s have been changed to be long rather than int.\r\n2. autogenerate has been removed BUT the id&#39;s will be generated as before.\r\n    2. All that autogenerate does from an SQLite standpoint is include the AUTOINCREMENT key word. This is actually inefficient and NOT recommended. https://sqlite.org/autoinc.html\r\n\r\nSo the code is :-\r\n\r\n**Assessment**\r\n\r\n    @Entity(tableName = &quot;assessment_table&quot;)\r\n    public class Assessment {\r\n    \r\n        @PrimaryKey /* no need for autogenerate */\r\n        @ColumnInfo(name = &quot;assessment_id&quot;)\r\n        /* As not autogenerate then use Long and default to null */\r\n        /* same as autogenerate but without the overheads/inefficiencies */\r\n        private Long assessment_id = null; //Long rather than long so can be null and have id generated.\r\n        private String assessmentName;\r\n        private String assessmentStart;\r\n        private String assessmentEnd;\r\n        private long courseID;\r\n    \r\n        public Assessment(long assessment_id, String assessmentName, String assessmentStart, String assessmentEnd, long courseID) {\r\n            this.assessment_id = assessment_id;\r\n            this.assessmentName = assessmentName;\r\n            this.assessmentStart = assessmentStart;\r\n            this.assessmentEnd = assessmentEnd;\r\n            this.courseID = courseID;\r\n        }\r\n    \r\n        @Ignore\r\n        /* Alternative constructor no need to provide id for inserting */\r\n        public Assessment(String assessmentName, String assessmentStart, String assessmentEnd, long courseID) {\r\n            this.assessmentName = assessmentName;\r\n            this.assessmentStart = assessmentStart;\r\n            this.assessmentEnd = assessmentEnd;\r\n            this.courseID = courseID;\r\n        }\r\n    \r\n        public Long getAssessment_id() {\r\n            return assessment_id;\r\n        }\r\n    \r\n        public void setAssessment_id(Long assessment_id) {\r\n            this.assessment_id = assessment_id;\r\n        }\r\n    \r\n        public String getAssessmentName() {\r\n            return assessmentName;\r\n        }\r\n    \r\n        public void setAssessmentName(String assessmentName) {\r\n            this.assessmentName = assessmentName;\r\n        }\r\n    \r\n        public String getAssessmentStart() {\r\n            return assessmentStart;\r\n        }\r\n    \r\n        public void setAssessmentStart(String assessmentStart) {\r\n            this.assessmentStart = assessmentStart;\r\n        }\r\n    \r\n        public String getAssessmentEnd() {\r\n            return assessmentEnd;\r\n        }\r\n    \r\n        public void setAssessmentEnd(String assessmentEnd) {\r\n            this.assessmentEnd = assessmentEnd;\r\n        }\r\n    \r\n        public long getCourseID() {\r\n            return courseID;\r\n        }\r\n    \r\n        public void setCourseID(long courseID) {\r\n            this.courseID = courseID;\r\n        }\r\n    }\r\n\r\n\r\n**PerformanceAssessment** \r\n\r\n    @Entity(tableName = &quot;performance_assessment&quot;, foreignKeys = {\r\n            @ForeignKey(\r\n                    entity = Assessment.class,\r\n                    parentColumns = &quot;assessment_id&quot;,\r\n                    childColumns = &quot;assessment_reference&quot;,\r\n                    onUpdate = CASCADE,\r\n                    onDelete = CASCADE\r\n            )\r\n    })\r\n    public class PerformanceAssessment extends Assessment {\r\n    \r\n        private long assessment_reference;\r\n        private String type;\r\n    \r\n        public PerformanceAssessment(long assessment_id, String assessmentName, String assessmentStart, String assessmentEnd, long courseID, long assessment_reference, String type) {\r\n            super(assessment_id, assessmentName, assessmentStart, assessmentEnd, courseID);\r\n            this.assessment_reference = assessment_reference;\r\n            this.type = type;\r\n        }\r\n    \r\n        @Ignore\r\n        public PerformanceAssessment(String assessmentName, String assessmentStart, String assessmentEnd, long courseID, long assessment_reference, String type) {\r\n            super(assessmentName, assessmentStart, assessmentEnd, courseID);\r\n            this.assessment_reference = assessment_reference;\r\n            this.type = type;\r\n        }\r\n    \r\n        @Override\r\n        public Long getAssessment_id() {\r\n            return super.getAssessment_id();\r\n        }\r\n    \r\n        @Override\r\n        public void setAssessment_id(Long assessment_id) {\r\n            super.setAssessment_id(assessment_id);\r\n        }\r\n    \r\n        @Override\r\n        public String getAssessmentName() {\r\n            return super.getAssessmentName();\r\n        }\r\n    \r\n        @Override\r\n        public void setAssessmentName(String assessmentName) {\r\n            super.setAssessmentName(assessmentName);\r\n        }\r\n    \r\n        @Override\r\n        public String getAssessmentStart() {\r\n            return super.getAssessmentStart();\r\n        }\r\n    \r\n        @Override\r\n        public void setAssessmentStart(String assessmentStart) {\r\n            super.setAssessmentStart(assessmentStart);\r\n        }\r\n    \r\n        @Override\r\n        public String getAssessmentEnd() {\r\n            return super.getAssessmentEnd();\r\n        }\r\n    \r\n        @Override\r\n        public void setAssessmentEnd(String assessmentEnd) {\r\n            super.setAssessmentEnd(assessmentEnd);\r\n        }\r\n    \r\n        @Override\r\n        public long getCourseID() {\r\n            return super.getCourseID();\r\n        }\r\n    \r\n        @Override\r\n        public void setCourseID(long courseID) {\r\n            super.setCourseID(courseID);\r\n        }\r\n    \r\n        public long getAssessment_reference() {\r\n            return assessment_reference;\r\n        }\r\n    \r\n        public void setAssessment_reference(long assessment_reference) {\r\n            this.assessment_reference = assessment_reference;\r\n        }\r\n    \r\n        public String getType() {\r\n            return type;\r\n        }\r\n    \r\n        public void setType(String type) {\r\n            this.type = type;\r\n        }\r\n    }\r\n\r\n**ObjectiveAssessment**\r\n\r\n    @Entity(tableName = &quot;objective_assessment&quot;, foreignKeys = {\r\n            @ForeignKey(\r\n                    entity = Assessment.class,\r\n                    parentColumns = &quot;assessment_id&quot;,\r\n                    childColumns = &quot;assessment_reference&quot;,\r\n                    onUpdate = CASCADE,\r\n                    onDelete = CASCADE\r\n            )\r\n    })\r\n    public class ObjectiveAssessment extends Assessment {\r\n    \r\n        private long assessment_reference;\r\n        private String type;\r\n    \r\n        public ObjectiveAssessment(long assessment_id, String assessmentName, String assessmentStart, String assessmentEnd, long courseID, long assessment_reference, String type) {\r\n            super(assessment_id, assessmentName, assessmentStart, assessmentEnd, courseID);\r\n            this.assessment_reference = assessment_reference;\r\n            this.type = type;\r\n        }\r\n    \r\n        @Ignore\r\n        public ObjectiveAssessment(String assessmentName, String assessmentStart, String assessmentEnd, long courseID, long assessment_reference, String type) {\r\n            super(assessmentName, assessmentStart, assessmentEnd, courseID);\r\n            this.assessment_reference = assessment_reference;\r\n            this.type = type;\r\n        }\r\n    \r\n        @Override\r\n        public Long getAssessment_id() {\r\n            return super.getAssessment_id();\r\n        }\r\n    \r\n        @Override\r\n        public void setAssessment_id(Long assessment_id) {\r\n            super.setAssessment_id(assessment_id);\r\n        }\r\n    \r\n        @Override\r\n        public String getAssessmentName() {\r\n            return super.getAssessmentName();\r\n        }\r\n    \r\n        @Override\r\n        public void setAssessmentName(String assessmentName) {\r\n            super.setAssessmentName(assessmentName);\r\n        }\r\n    \r\n        @Override\r\n        public String getAssessmentStart() {\r\n            return super.getAssessmentStart();\r\n        }\r\n    \r\n        @Override\r\n        public void setAssessmentStart(String assessmentStart) {\r\n            super.setAssessmentStart(assessmentStart);\r\n        }\r\n    \r\n        @Override\r\n        public String getAssessmentEnd() {\r\n            return super.getAssessmentEnd();\r\n        }\r\n    \r\n        @Override\r\n        public void setAssessmentEnd(String assessmentEnd) {\r\n            super.setAssessmentEnd(assessmentEnd);\r\n        }\r\n    \r\n        @Override\r\n        public long getCourseID() {\r\n            return super.getCourseID();\r\n        }\r\n    \r\n        @Override\r\n        public void setCourseID(long courseID) {\r\n            super.setCourseID(courseID);\r\n        }\r\n    \r\n        public long getAssessment_reference() {\r\n            return assessment_reference;\r\n        }\r\n    \r\n        public void setAssessment_reference(long assessment_reference) {\r\n            this.assessment_reference = assessment_reference;\r\n        }\r\n    \r\n        public String getType() {\r\n            return type;\r\n        }\r\n    \r\n        public void setType(String type) {\r\n            this.type = type;\r\n        }\r\n    }\r\n\r\n\r\nA POJO has the Assessment Embedded and the Perf and Obj included via @Relation (not the ideal as if the rule of only 1 or the other than 1 will be null). So :-\r\n\r\n**AssessmentWithPerformanceAssessmentAndObjectiveAssessment**\r\n\r\n    class AssessmentWithPerformanceAssessmentAndObjectiveAssessment {\r\n        @Embedded\r\n        Assessment assessment;\r\n        @Relation(\r\n                entity = PerformanceAssessment.class,\r\n                parentColumn = &quot;assessment_id&quot;,\r\n                entityColumn = &quot;assessment_reference&quot;\r\n        )\r\n        PerformanceAssessment performanceAssessment;\r\n        @Relation(\r\n                entity = ObjectiveAssessment.class,\r\n                parentColumn = &quot;assessment_id&quot;,\r\n                entityColumn = &quot;assessment_reference&quot;\r\n        )\r\n        ObjectiveAssessment objectiveAssessment;\r\n    }\r\n\r\nA single @Dao annotated class :-\r\n\r\n**AssessmentDao**\r\n\r\n    @Dao\r\n    abstract class AssessmentDao {\r\n    \r\n        @Insert\r\n        abstract long insert(Assessment assessment);\r\n        @Insert\r\n        abstract long insert(PerformanceAssessment performanceAssessment);\r\n        @Insert\r\n        abstract long insert(ObjectiveAssessment objectiveAssessment);\r\n        /*\r\n            use to check if an Assessment has any children\r\n         */\r\n        @Query(&quot;WITH cte_counts(counter) AS (&quot; +\r\n                &quot;SELECT count(*) &gt; 0 FROM performance_assessment WHERE assessment_reference=:assessment_id &quot; +\r\n                &quot;UNION ALL SELECT count(*) FROM objective_assessment WHERE assessment_reference=:assessment_id&quot; +\r\n                &quot;)&quot; +\r\n                &quot;SELECT sum(counter) &gt; 0 FROM cte_counts&quot;)\r\n        abstract boolean hasChildAlready(long assessment_id);\r\n    \r\n        @Transaction\r\n        @Query(&quot;SELECT * FROM assessment_table WHERE assessment_id=:assessment_id&quot;)\r\n        abstract AssessmentWithPerformanceAssessmentAndObjectiveAssessment getAssessmentWithPerformanceAssessmentOrObjectiveAssessmentById(long assessment_id);\r\n    \r\n        @Transaction\r\n        @Query(&quot;SELECT * FROM assessment_table&quot;)\r\n        abstract List&lt;AssessmentWithPerformanceAssessmentAndObjectiveAssessment&gt; getAllAssessmentsWithPerformanceAssessmentOrObjectiveAssessmentById();\r\n    }\r\n\r\n- **note** an abstract class rather than an interface (could be an interface though)\r\n\r\nAn @Database annotated class\r\n\r\n**AssessmentDatabase**\r\n\r\n    @Database(entities = {Assessment.class,PerformanceAssessment.class,ObjectiveAssessment.class},version =1)\r\n    abstract class AssessmentDatabase extends RoomDatabase {\r\n        abstract AssessmentDao getAssessmentDao();\r\n    \r\n        private static volatile AssessmentDatabase instance = null;\r\n        static AssessmentDatabase getInstance(Context context) {\r\n            if (instance == null) {\r\n                instance = Room.databaseBuilder(context,AssessmentDatabase.class,&quot;assessment.db&quot;)\r\n                        .allowMainThreadQueries()\r\n                        .build();\r\n            }\r\n            return instance;\r\n        }\r\n    }\r\n- **note** for convenience and brevity allows running on the main thread.\r\n\r\nFinally actually using the above in an Activity:-\r\n\r\n    public class MainActivity extends AppCompatActivity {\r\n    \r\n        AssessmentDatabase db;\r\n        AssessmentDao dao;\r\n    \r\n        @Override\r\n        protected void onCreate(Bundle savedInstanceState) {\r\n            super.onCreate(savedInstanceState);\r\n            setContentView(R.layout.activity_main);\r\n    \r\n            db = AssessmentDatabase.getInstance(this);\r\n            dao = db.getAssessmentDao();\r\n    \r\n            /* Various Inserts */\r\n            long loneAssessment = dao.insert(\r\n                    new Assessment(\r\n                    &quot;Lone Assessment with no children&quot;,\r\n                    &quot;2021-01-15&quot;,\r\n                    &quot;2021-03-15&quot;,\r\n                    0L\r\n                    )\r\n            );\r\n            /* id will be 100, subsequent id&#39;s if generated will be 101,102......*/\r\n            long a1 = dao.insert(new Assessment(100,&quot;A1&quot;,&quot;2022-01-01&quot;,&quot;2022,03-01&quot;,10));\r\n            long p1 = dao.insert(new PerformanceAssessment(&quot;P1&quot;,&quot;2022-01-31&quot;,&quot;2022-01-31&quot;,10,a1,&quot;X&quot;));\r\n    \r\n            /* back to using generated Assessment id */\r\n            long a2 = dao.insert(new Assessment(&quot;A1&quot;,&quot;2022-01-01&quot;,&quot;2022-03-01&quot;,11));\r\n            long p2 = dao.insert(new ObjectiveAssessment(&quot;O1&quot;,&quot;2022-01-31&quot;,&quot;2022-01-31&quot;,11,a2,&quot;Y&quot;));\r\n    \r\n            /* Build the Assessment and ObjectiveAssessment ready for  insert SEE WARNING */\r\n            Assessment a10 = new Assessment(&quot;A10&quot;,&quot;2022-01-01&quot;,&quot;2022-03-01&quot;,20);\r\n            ObjectiveAssessment o10 = new ObjectiveAssessment(&quot;O10&quot;,&quot;2022-01-31&quot;,&quot;2022-01-31&quot;,a10.getCourseID(),0,&quot;Z&quot;);\r\n            /* WARNING assessment_reference WILL NOT BE ANY GOOD (will be 0) */\r\n            long a10id = dao.insert(a10);\r\n            o10.setAssessment_reference(a10id); /*&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt; NOW assessment_reference should be good */\r\n            dao.insert(o10);\r\n    \r\n            /* Both together */\r\n            dao.insert(\r\n                    new PerformanceAssessment(&quot;P20&quot;,&quot;2022-05-07&quot;,&quot;2022-05-07&quot;,11,\r\n                            /* get the Assessment ID from the insert of the Assessment */\r\n                            dao.insert(\r\n                                    new Assessment(&quot;A20&quot;,&quot;2022-04-01&quot;,&quot;2022-06-17&quot;,21)\r\n                            ),\r\n                            &quot;ZZ&quot;\r\n                    )\r\n            );\r\n    \r\n            /* Extract all the Assessments with their children (if any)*/\r\n            for(AssessmentWithPerformanceAssessmentAndObjectiveAssessment awpoo: dao.getAllAssessmentsWithPerformanceAssessmentOrObjectiveAssessmentById()) {\r\n                Log.d(&quot;DBINFO&quot;,&quot;Assessment is &quot; + awpoo.assessment.getAssessmentName() + &quot; id is &quot; + awpoo.assessment.getAssessment_id() + &quot; etc....&quot;);\r\n                /* need to check if the the performanceassessment is null - it will be if there isn&#39;t one */\r\n                if (awpoo.performanceAssessment != null) {\r\n                    Log.d(&quot;DBINFO&quot;,&quot;\\t\\tPerformanceAssessment = &quot; + awpoo.performanceAssessment.getAssessmentName() +\r\n                            &quot; id is &quot;+ awpoo.performanceAssessment.getAssessment_id() +\r\n                            &quot; references Asessment with id &quot; + awpoo.performanceAssessment.getAssessment_reference());\r\n                } else {\r\n                    Log.d(&quot;DBINFO&quot;,&quot;\\t\\tNo PerformanceAssessment.&quot;);\r\n                }\r\n                /* null check see performance assessment check above */\r\n                if (awpoo.objectiveAssessment != null) {\r\n                    Log.d(&quot;DBINFO&quot;,&quot;\\t\\tObjectiveAssessment = &quot; + awpoo.objectiveAssessment.getAssessmentName() +\r\n                            &quot; id is &quot;+ awpoo.objectiveAssessment.getAssessment_id() +\r\n                            &quot; references Asessment with id &quot; + awpoo.objectiveAssessment.getAssessment_reference());\r\n                } else {\r\n                    Log.d(&quot;DBINFO&quot;,&quot;\\t\\tNo ObjectiveAssessment.&quot;);\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\nWhen run (first time, will fail if run twice due to use of 100 for the id) the log shows :-\r\n\r\n    D/DBINFO: Assessment is Lone Assessment with no children id is 1 etc....\r\n    D/DBINFO: \t\tNo PerformanceAssessment.\r\n    D/DBINFO: \t\tNo ObjectiveAssessment.\r\n    D/DBINFO: Assessment is A1 id is 100 etc....\r\n    D/DBINFO: \t\tPerformanceAssessment = P1 id is 1 references Asessment with id 100\r\n    D/DBINFO: \t\tNo ObjectiveAssessment.\r\n    D/DBINFO: Assessment is A1 id is 101 etc....\r\n    D/DBINFO: \t\tNo PerformanceAssessment.\r\n    D/DBINFO: \t\tObjectiveAssessment = O1 id is 1 references Asessment with id 101\r\n    D/DBINFO: Assessment is A10 id is 102 etc....\r\n    D/DBINFO: \t\tNo PerformanceAssessment.\r\n    D/DBINFO: \t\tObjectiveAssessment = O10 id is 2 references Asessment with id 102\r\n    D/DBINFO: Assessment is A20 id is 103 etc....\r\n    D/DBINFO: \t\tPerformanceAssessment = P20 id is 2 references Asessment with id 103\r\n    D/DBINFO: \t\tNo ObjectiveAssessment.\r\n\r\n\r\nusing App Inspection then the database looks like :-\r\n\r\n[![enter image description here][1]][1]\r\n\r\n[![enter image description here][2]][2]\r\n\r\n- See how PerformanceAssessment with an assessment_id of 2 (it&#39;s unqiue row identifier) has an assessment_reference value of 103. This says the the Assessment with an assessment_id of 103 is the parent (or this PerformanceAssessment relates(belongs) to the Assessment that has an assessment_id of 103).\r\n\r\n[![enter image description here][3]][3]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/5jrPu.png\r\n  [2]: https://i.stack.imgur.com/1XCdE.png\r\n  [3]: https://i.stack.imgur.com/UjtuR.png","title":"Primary and foreign key implementation Java and Android Room","body":"<blockquote>\n<p>How do I tweak my parent and child classes code and add proper annotations for implementing foreign and primary keys correctly?</p>\n</blockquote>\n<p>Let the assessment_id always be the primary key i.e. don't code it in sub classes and then have a field for the reference/map/association with the parent in the subclasses.</p>\n<p>So PerformanceAssessment could be :-</p>\n<pre><code>@Entity(tableName = &quot;performance_assessment&quot;, foreignKeys = {\n        @ForeignKey(\n                entity = Assessment.class,\n                parentColumns = &quot;assessment_id&quot;,\n                childColumns = &quot;assessment_reference&quot;,\n                onUpdate = CASCADE,\n                onDelete = CASCADE\n        )\n})\npublic class PerformanceAssessment extends Assessment {\n\n    private int assessment_reference; //&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;\n    private String type;\n\n    public PerformanceAssessment(int assessment_id, String assessmentName, String assessmentStart, String assessmentEnd, int courseID, int assessment_reference, String type) {\n        super(assessment_id, assessmentName, assessmentStart, assessmentEnd, courseID);\n        this.assessment_reference = assessment_reference;\n        this.type = type;\n    }\n    ....\n</code></pre>\n<p>and all compiles  and the underlying tables will be build using :-</p>\n<pre><code>    _db.execSQL(&quot;CREATE TABLE IF NOT EXISTS `assessment_table` (`assessment_id` INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, `assessmentName` TEXT, `assessmentStart` TEXT, `assessmentEnd` TEXT, `courseID` INTEGER NOT NULL)&quot;);\n    _db.execSQL(&quot;CREATE TABLE IF NOT EXISTS `performance_assessment` (`assessment_reference` INTEGER NOT NULL, `type` TEXT, `assessment_id` INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, `assessmentName` TEXT, `assessmentStart` TEXT, `assessmentEnd` TEXT, `courseID` INTEGER NOT NULL, FOREIGN KEY(`assessment_reference`) REFERENCES `assessment_table`(`assessment_id`) ON UPDATE CASCADE ON DELETE CASCADE )&quot;);\n</code></pre>\n<ul>\n<li>Obviously similar for the ObjectiveAssessment.</li>\n</ul>\n<blockquote>\n<p>But I also need to utilize the children's primary key as a foreign key for the parent's databases so that when I delete an instance of Performance/Objective assessments, I can also delete the Assessment instance when I am downcasting.</p>\n</blockquote>\n<p>What if, <em>which is possible with the 1 (Assessment) - Many (PerformanceAssessments)</em>, an Assessment has multiple PerformanceAssesments? Deleting 1 PerformanceAsessment would delete the parent Assessment, which would then, due to the use of <code>onDelete CASCADE</code> cascade the deletions to all the other PerformanceAssessments and ObjectiveAssessments. Deletions are not propagated up to the parent (that's why the term CASCADE is used as it implies downward rather than anyway).</p>\n<p>As an example you have an assessment with 4 PerformanceAssessments  and lets say 3 ObjectiveAssessments one of the PerformanceAssesments was wrongly added. Should everything have to be deleted and re-entered to correct the 1 wrong PeformanceAssessment.</p>\n<p>You could introduce a Trigger to automate this upwards propogation, to delete anything and delete all, if that is what you want.</p>\n<p><strong>Additional Re comments</strong></p>\n<blockquote>\n<p>I have a one to one relationship for the Assessment and Performance/Objective assessment. One assessment can only have either performance or objective type.</p>\n</blockquote>\n<p>That may be what you wish BUT there is nothing stopping an Assessment having multiple Performance and or Objectives. That may or may not be an issue.</p>\n<blockquote>\n<p>Also, instead of downcasting, I did upcasting instead on where I save the assessment in the app.  I ran into Foreign Key Constraint Failed (code 787) and realized it was because I was downcasting. My only dilemma now is that whenever I am saving an assessment, it will only save on assessment_table and not on performance_assessment or objective_assessment tbl.</p>\n</blockquote>\n<p>What you have to do is insert the Assessment (parent) and then use the parent's id to insert the related Peformance/Objective with the assessment_reference set the the value of the assessment.</p>\n<p>The 787 is it saying that you cannot insert a child (Performance/Objective) without the assessment_reference being an assessment_id in the Assessment.</p>\n<p>What you can do, which would very likely suit your situation is a) have an <code>@Insert long insert(Assessment assessment);</code> and an <code>@Insert long (PerformanceAssessment performanceAssessment)</code> (likewise for Objective)</p>\n<p>and then use (assuming <strong>dao</strong> is an instance of the @Dao)</p>\n<p>and use</p>\n<pre><code>dao.insert(new PerformanceAssessment(0,&quot;the title&quot;, etc,dao.insert(Assessment(....),&quot;the type&quot;);\n</code></pre>\n<p>So the Assessment is added as part of inserting the performance/Objective and with the id of the assessment being used as the assessment_reference value.</p>\n<ul>\n<li><strong>NOTE</strong> the @Insert will <strong>only return a long</strong>, so you have to convert this to an int. I would suggest changing <strong>id</strong>'s and references to be long's. The overhead, if any, will have a minimal impact. Storage in the database will not be affected and it will save the hassle of converting long to int.</li>\n</ul>\n<p><strong>Demonstration</strong></p>\n<p>The following is a demonstration based upon code that closely reflects your but with some subtle changes.</p>\n<ol>\n<li><strong>id</strong>'s have been changed to be long rather than int.</li>\n<li>autogenerate has been removed BUT the id's will be generated as before.\n2. All that autogenerate does from an SQLite standpoint is include the AUTOINCREMENT key word. This is actually inefficient and NOT recommended. <a href=\"https://sqlite.org/autoinc.html\" rel=\"nofollow noreferrer\">https://sqlite.org/autoinc.html</a></li>\n</ol>\n<p>So the code is :-</p>\n<p><strong>Assessment</strong></p>\n<pre><code>@Entity(tableName = &quot;assessment_table&quot;)\npublic class Assessment {\n\n    @PrimaryKey /* no need for autogenerate */\n    @ColumnInfo(name = &quot;assessment_id&quot;)\n    /* As not autogenerate then use Long and default to null */\n    /* same as autogenerate but without the overheads/inefficiencies */\n    private Long assessment_id = null; //Long rather than long so can be null and have id generated.\n    private String assessmentName;\n    private String assessmentStart;\n    private String assessmentEnd;\n    private long courseID;\n\n    public Assessment(long assessment_id, String assessmentName, String assessmentStart, String assessmentEnd, long courseID) {\n        this.assessment_id = assessment_id;\n        this.assessmentName = assessmentName;\n        this.assessmentStart = assessmentStart;\n        this.assessmentEnd = assessmentEnd;\n        this.courseID = courseID;\n    }\n\n    @Ignore\n    /* Alternative constructor no need to provide id for inserting */\n    public Assessment(String assessmentName, String assessmentStart, String assessmentEnd, long courseID) {\n        this.assessmentName = assessmentName;\n        this.assessmentStart = assessmentStart;\n        this.assessmentEnd = assessmentEnd;\n        this.courseID = courseID;\n    }\n\n    public Long getAssessment_id() {\n        return assessment_id;\n    }\n\n    public void setAssessment_id(Long assessment_id) {\n        this.assessment_id = assessment_id;\n    }\n\n    public String getAssessmentName() {\n        return assessmentName;\n    }\n\n    public void setAssessmentName(String assessmentName) {\n        this.assessmentName = assessmentName;\n    }\n\n    public String getAssessmentStart() {\n        return assessmentStart;\n    }\n\n    public void setAssessmentStart(String assessmentStart) {\n        this.assessmentStart = assessmentStart;\n    }\n\n    public String getAssessmentEnd() {\n        return assessmentEnd;\n    }\n\n    public void setAssessmentEnd(String assessmentEnd) {\n        this.assessmentEnd = assessmentEnd;\n    }\n\n    public long getCourseID() {\n        return courseID;\n    }\n\n    public void setCourseID(long courseID) {\n        this.courseID = courseID;\n    }\n}\n</code></pre>\n<p><strong>PerformanceAssessment</strong></p>\n<pre><code>@Entity(tableName = &quot;performance_assessment&quot;, foreignKeys = {\n        @ForeignKey(\n                entity = Assessment.class,\n                parentColumns = &quot;assessment_id&quot;,\n                childColumns = &quot;assessment_reference&quot;,\n                onUpdate = CASCADE,\n                onDelete = CASCADE\n        )\n})\npublic class PerformanceAssessment extends Assessment {\n\n    private long assessment_reference;\n    private String type;\n\n    public PerformanceAssessment(long assessment_id, String assessmentName, String assessmentStart, String assessmentEnd, long courseID, long assessment_reference, String type) {\n        super(assessment_id, assessmentName, assessmentStart, assessmentEnd, courseID);\n        this.assessment_reference = assessment_reference;\n        this.type = type;\n    }\n\n    @Ignore\n    public PerformanceAssessment(String assessmentName, String assessmentStart, String assessmentEnd, long courseID, long assessment_reference, String type) {\n        super(assessmentName, assessmentStart, assessmentEnd, courseID);\n        this.assessment_reference = assessment_reference;\n        this.type = type;\n    }\n\n    @Override\n    public Long getAssessment_id() {\n        return super.getAssessment_id();\n    }\n\n    @Override\n    public void setAssessment_id(Long assessment_id) {\n        super.setAssessment_id(assessment_id);\n    }\n\n    @Override\n    public String getAssessmentName() {\n        return super.getAssessmentName();\n    }\n\n    @Override\n    public void setAssessmentName(String assessmentName) {\n        super.setAssessmentName(assessmentName);\n    }\n\n    @Override\n    public String getAssessmentStart() {\n        return super.getAssessmentStart();\n    }\n\n    @Override\n    public void setAssessmentStart(String assessmentStart) {\n        super.setAssessmentStart(assessmentStart);\n    }\n\n    @Override\n    public String getAssessmentEnd() {\n        return super.getAssessmentEnd();\n    }\n\n    @Override\n    public void setAssessmentEnd(String assessmentEnd) {\n        super.setAssessmentEnd(assessmentEnd);\n    }\n\n    @Override\n    public long getCourseID() {\n        return super.getCourseID();\n    }\n\n    @Override\n    public void setCourseID(long courseID) {\n        super.setCourseID(courseID);\n    }\n\n    public long getAssessment_reference() {\n        return assessment_reference;\n    }\n\n    public void setAssessment_reference(long assessment_reference) {\n        this.assessment_reference = assessment_reference;\n    }\n\n    public String getType() {\n        return type;\n    }\n\n    public void setType(String type) {\n        this.type = type;\n    }\n}\n</code></pre>\n<p><strong>ObjectiveAssessment</strong></p>\n<pre><code>@Entity(tableName = &quot;objective_assessment&quot;, foreignKeys = {\n        @ForeignKey(\n                entity = Assessment.class,\n                parentColumns = &quot;assessment_id&quot;,\n                childColumns = &quot;assessment_reference&quot;,\n                onUpdate = CASCADE,\n                onDelete = CASCADE\n        )\n})\npublic class ObjectiveAssessment extends Assessment {\n\n    private long assessment_reference;\n    private String type;\n\n    public ObjectiveAssessment(long assessment_id, String assessmentName, String assessmentStart, String assessmentEnd, long courseID, long assessment_reference, String type) {\n        super(assessment_id, assessmentName, assessmentStart, assessmentEnd, courseID);\n        this.assessment_reference = assessment_reference;\n        this.type = type;\n    }\n\n    @Ignore\n    public ObjectiveAssessment(String assessmentName, String assessmentStart, String assessmentEnd, long courseID, long assessment_reference, String type) {\n        super(assessmentName, assessmentStart, assessmentEnd, courseID);\n        this.assessment_reference = assessment_reference;\n        this.type = type;\n    }\n\n    @Override\n    public Long getAssessment_id() {\n        return super.getAssessment_id();\n    }\n\n    @Override\n    public void setAssessment_id(Long assessment_id) {\n        super.setAssessment_id(assessment_id);\n    }\n\n    @Override\n    public String getAssessmentName() {\n        return super.getAssessmentName();\n    }\n\n    @Override\n    public void setAssessmentName(String assessmentName) {\n        super.setAssessmentName(assessmentName);\n    }\n\n    @Override\n    public String getAssessmentStart() {\n        return super.getAssessmentStart();\n    }\n\n    @Override\n    public void setAssessmentStart(String assessmentStart) {\n        super.setAssessmentStart(assessmentStart);\n    }\n\n    @Override\n    public String getAssessmentEnd() {\n        return super.getAssessmentEnd();\n    }\n\n    @Override\n    public void setAssessmentEnd(String assessmentEnd) {\n        super.setAssessmentEnd(assessmentEnd);\n    }\n\n    @Override\n    public long getCourseID() {\n        return super.getCourseID();\n    }\n\n    @Override\n    public void setCourseID(long courseID) {\n        super.setCourseID(courseID);\n    }\n\n    public long getAssessment_reference() {\n        return assessment_reference;\n    }\n\n    public void setAssessment_reference(long assessment_reference) {\n        this.assessment_reference = assessment_reference;\n    }\n\n    public String getType() {\n        return type;\n    }\n\n    public void setType(String type) {\n        this.type = type;\n    }\n}\n</code></pre>\n<p>A POJO has the Assessment Embedded and the Perf and Obj included via @Relation (not the ideal as if the rule of only 1 or the other than 1 will be null). So :-</p>\n<p><strong>AssessmentWithPerformanceAssessmentAndObjectiveAssessment</strong></p>\n<pre><code>class AssessmentWithPerformanceAssessmentAndObjectiveAssessment {\n    @Embedded\n    Assessment assessment;\n    @Relation(\n            entity = PerformanceAssessment.class,\n            parentColumn = &quot;assessment_id&quot;,\n            entityColumn = &quot;assessment_reference&quot;\n    )\n    PerformanceAssessment performanceAssessment;\n    @Relation(\n            entity = ObjectiveAssessment.class,\n            parentColumn = &quot;assessment_id&quot;,\n            entityColumn = &quot;assessment_reference&quot;\n    )\n    ObjectiveAssessment objectiveAssessment;\n}\n</code></pre>\n<p>A single @Dao annotated class :-</p>\n<p><strong>AssessmentDao</strong></p>\n<pre><code>@Dao\nabstract class AssessmentDao {\n\n    @Insert\n    abstract long insert(Assessment assessment);\n    @Insert\n    abstract long insert(PerformanceAssessment performanceAssessment);\n    @Insert\n    abstract long insert(ObjectiveAssessment objectiveAssessment);\n    /*\n        use to check if an Assessment has any children\n     */\n    @Query(&quot;WITH cte_counts(counter) AS (&quot; +\n            &quot;SELECT count(*) &gt; 0 FROM performance_assessment WHERE assessment_reference=:assessment_id &quot; +\n            &quot;UNION ALL SELECT count(*) FROM objective_assessment WHERE assessment_reference=:assessment_id&quot; +\n            &quot;)&quot; +\n            &quot;SELECT sum(counter) &gt; 0 FROM cte_counts&quot;)\n    abstract boolean hasChildAlready(long assessment_id);\n\n    @Transaction\n    @Query(&quot;SELECT * FROM assessment_table WHERE assessment_id=:assessment_id&quot;)\n    abstract AssessmentWithPerformanceAssessmentAndObjectiveAssessment getAssessmentWithPerformanceAssessmentOrObjectiveAssessmentById(long assessment_id);\n\n    @Transaction\n    @Query(&quot;SELECT * FROM assessment_table&quot;)\n    abstract List&lt;AssessmentWithPerformanceAssessmentAndObjectiveAssessment&gt; getAllAssessmentsWithPerformanceAssessmentOrObjectiveAssessmentById();\n}\n</code></pre>\n<ul>\n<li><strong>note</strong> an abstract class rather than an interface (could be an interface though)</li>\n</ul>\n<p>An @Database annotated class</p>\n<p><strong>AssessmentDatabase</strong></p>\n<pre><code>@Database(entities = {Assessment.class,PerformanceAssessment.class,ObjectiveAssessment.class},version =1)\nabstract class AssessmentDatabase extends RoomDatabase {\n    abstract AssessmentDao getAssessmentDao();\n\n    private static volatile AssessmentDatabase instance = null;\n    static AssessmentDatabase getInstance(Context context) {\n        if (instance == null) {\n            instance = Room.databaseBuilder(context,AssessmentDatabase.class,&quot;assessment.db&quot;)\n                    .allowMainThreadQueries()\n                    .build();\n        }\n        return instance;\n    }\n}\n</code></pre>\n<ul>\n<li><strong>note</strong> for convenience and brevity allows running on the main thread.</li>\n</ul>\n<p>Finally actually using the above in an Activity:-</p>\n<pre><code>public class MainActivity extends AppCompatActivity {\n\n    AssessmentDatabase db;\n    AssessmentDao dao;\n\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.activity_main);\n\n        db = AssessmentDatabase.getInstance(this);\n        dao = db.getAssessmentDao();\n\n        /* Various Inserts */\n        long loneAssessment = dao.insert(\n                new Assessment(\n                &quot;Lone Assessment with no children&quot;,\n                &quot;2021-01-15&quot;,\n                &quot;2021-03-15&quot;,\n                0L\n                )\n        );\n        /* id will be 100, subsequent id's if generated will be 101,102......*/\n        long a1 = dao.insert(new Assessment(100,&quot;A1&quot;,&quot;2022-01-01&quot;,&quot;2022,03-01&quot;,10));\n        long p1 = dao.insert(new PerformanceAssessment(&quot;P1&quot;,&quot;2022-01-31&quot;,&quot;2022-01-31&quot;,10,a1,&quot;X&quot;));\n\n        /* back to using generated Assessment id */\n        long a2 = dao.insert(new Assessment(&quot;A1&quot;,&quot;2022-01-01&quot;,&quot;2022-03-01&quot;,11));\n        long p2 = dao.insert(new ObjectiveAssessment(&quot;O1&quot;,&quot;2022-01-31&quot;,&quot;2022-01-31&quot;,11,a2,&quot;Y&quot;));\n\n        /* Build the Assessment and ObjectiveAssessment ready for  insert SEE WARNING */\n        Assessment a10 = new Assessment(&quot;A10&quot;,&quot;2022-01-01&quot;,&quot;2022-03-01&quot;,20);\n        ObjectiveAssessment o10 = new ObjectiveAssessment(&quot;O10&quot;,&quot;2022-01-31&quot;,&quot;2022-01-31&quot;,a10.getCourseID(),0,&quot;Z&quot;);\n        /* WARNING assessment_reference WILL NOT BE ANY GOOD (will be 0) */\n        long a10id = dao.insert(a10);\n        o10.setAssessment_reference(a10id); /*&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt; NOW assessment_reference should be good */\n        dao.insert(o10);\n\n        /* Both together */\n        dao.insert(\n                new PerformanceAssessment(&quot;P20&quot;,&quot;2022-05-07&quot;,&quot;2022-05-07&quot;,11,\n                        /* get the Assessment ID from the insert of the Assessment */\n                        dao.insert(\n                                new Assessment(&quot;A20&quot;,&quot;2022-04-01&quot;,&quot;2022-06-17&quot;,21)\n                        ),\n                        &quot;ZZ&quot;\n                )\n        );\n\n        /* Extract all the Assessments with their children (if any)*/\n        for(AssessmentWithPerformanceAssessmentAndObjectiveAssessment awpoo: dao.getAllAssessmentsWithPerformanceAssessmentOrObjectiveAssessmentById()) {\n            Log.d(&quot;DBINFO&quot;,&quot;Assessment is &quot; + awpoo.assessment.getAssessmentName() + &quot; id is &quot; + awpoo.assessment.getAssessment_id() + &quot; etc....&quot;);\n            /* need to check if the the performanceassessment is null - it will be if there isn't one */\n            if (awpoo.performanceAssessment != null) {\n                Log.d(&quot;DBINFO&quot;,&quot;\\t\\tPerformanceAssessment = &quot; + awpoo.performanceAssessment.getAssessmentName() +\n                        &quot; id is &quot;+ awpoo.performanceAssessment.getAssessment_id() +\n                        &quot; references Asessment with id &quot; + awpoo.performanceAssessment.getAssessment_reference());\n            } else {\n                Log.d(&quot;DBINFO&quot;,&quot;\\t\\tNo PerformanceAssessment.&quot;);\n            }\n            /* null check see performance assessment check above */\n            if (awpoo.objectiveAssessment != null) {\n                Log.d(&quot;DBINFO&quot;,&quot;\\t\\tObjectiveAssessment = &quot; + awpoo.objectiveAssessment.getAssessmentName() +\n                        &quot; id is &quot;+ awpoo.objectiveAssessment.getAssessment_id() +\n                        &quot; references Asessment with id &quot; + awpoo.objectiveAssessment.getAssessment_reference());\n            } else {\n                Log.d(&quot;DBINFO&quot;,&quot;\\t\\tNo ObjectiveAssessment.&quot;);\n            }\n        }\n    }\n}\n</code></pre>\n<p>When run (first time, will fail if run twice due to use of 100 for the id) the log shows :-</p>\n<pre><code>D/DBINFO: Assessment is Lone Assessment with no children id is 1 etc....\nD/DBINFO:       No PerformanceAssessment.\nD/DBINFO:       No ObjectiveAssessment.\nD/DBINFO: Assessment is A1 id is 100 etc....\nD/DBINFO:       PerformanceAssessment = P1 id is 1 references Asessment with id 100\nD/DBINFO:       No ObjectiveAssessment.\nD/DBINFO: Assessment is A1 id is 101 etc....\nD/DBINFO:       No PerformanceAssessment.\nD/DBINFO:       ObjectiveAssessment = O1 id is 1 references Asessment with id 101\nD/DBINFO: Assessment is A10 id is 102 etc....\nD/DBINFO:       No PerformanceAssessment.\nD/DBINFO:       ObjectiveAssessment = O10 id is 2 references Asessment with id 102\nD/DBINFO: Assessment is A20 id is 103 etc....\nD/DBINFO:       PerformanceAssessment = P20 id is 2 references Asessment with id 103\nD/DBINFO:       No ObjectiveAssessment.\n</code></pre>\n<p>using App Inspection then the database looks like :-</p>\n<p><a href=\"https://i.stack.imgur.com/5jrPu.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/5jrPu.png\" alt=\"enter image description here\" /></a></p>\n<p><a href=\"https://i.stack.imgur.com/1XCdE.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/1XCdE.png\" alt=\"enter image description here\" /></a></p>\n<ul>\n<li>See how PerformanceAssessment with an assessment_id of 2 (it's unqiue row identifier) has an assessment_reference value of 103. This says the the Assessment with an assessment_id of 103 is the parent (or this PerformanceAssessment relates(belongs) to the Assessment that has an assessment_id of 103).</li>\n</ul>\n<p><a href=\"https://i.stack.imgur.com/UjtuR.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/UjtuR.png\" alt=\"enter image description here\" /></a></p>\n"}],"owner":{"account_id":16517083,"reputation":71,"user_id":11934215,"display_name":"JayM"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":542,"favorite_count":0,"down_vote_count":1,"up_vote_count":3,"accepted_answer_id":70042535,"answer_count":1,"score":2,"last_activity_date":1637402239,"creation_date":1637365604,"question_id":70042096,"body_markdown":"This is my first time asking a question here in StackOverflow so forgive me if I am not asking the question right or a certain way.\r\n\r\nI have two child classes (PerformanceAssessment and ObjectiveAssessment) from parent class Assessment.  I was able to successfully do downcasting for the polymorphism part requirement of my school project, and I was able to save to their appropriate databases both instances of parent and child after downcasting (I have an assessment_table, performance_assessments, and objective_assessments table). However, I am now having Android Room database issues. I realized that I need to implement foreign keys to do the CRUD operations properly. How do I tweak my parent and child classes code and add proper annotations for implementing foreign and primary keys correctly? I need to have an autogenerated primary key for each class: parent (Assessment) and both children (PerformanceAssessment and ObjectiveAssessment). But I also need to utilize the children&#39;s primary key as a foreign key for the parent&#39;s databases so that when I delete an instance of Performance/Objective assessments, I can also delete the Assessment instance when I am downcasting. I found very little helpful information regarding this. Thanks in advance.\r\n\r\nI am getting these errors right now:\r\n\r\n[Build Errors][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/2pE9w.png\r\n\r\n**Parent Class: Assessment.java**\r\n\r\n    @Entity(tableName = &quot;assessment_table&quot;)\r\n    public class Assessment {\r\n    \r\n        @PrimaryKey(autoGenerate = true)\r\n        @ColumnInfo(name = &quot;assessment_id&quot;)\r\n        private final int assessment_id;\r\n    \r\n        private String assessmentName;\r\n        private String assessmentStart;\r\n        private String assessmentEnd;\r\n        private int courseID;\r\n    \r\n        public Assessment(int assessment_id, String assessmentName, String assessmentStart, String assessmentEnd, int courseID) {\r\n            this.assessment_id = assessment_id;\r\n            this.assessmentName = assessmentName;\r\n            this.assessmentStart = assessmentStart;\r\n            this.assessmentEnd = assessmentEnd;\r\n            this.courseID = courseID;\r\n        }\r\n\r\n**Child class: PerformanceAssessment.java**\r\n\r\n    @Entity(tableName = &quot;performance_assessment&quot;, foreignKeys = {\r\n            @ForeignKey(\r\n                    entity = Assessment.class,\r\n                    parentColumns = &quot;assessment_id&quot;,\r\n                    childColumns = &quot;performance_id&quot;,\r\n                    onUpdate = CASCADE,\r\n                    onDelete = CASCADE\r\n            )\r\n    })\r\n    public class PerformanceAssessment extends Assessment{\r\n    \r\n        @PrimaryKey(autoGenerate = true)\r\n        @ColumnInfo(name = &quot;performance_id&quot;)\r\n        private int performanceID;\r\n        private String type;\r\n    \r\n        public PerformanceAssessment(int assessment_id, String assessmentName, String assessmentStart, String assessmentEnd, int courseID, int performanceID, String type) {\r\n            super(assessment_id, assessmentName, assessmentStart, assessmentEnd, courseID);\r\n            this.performanceID = performanceID;\r\n            this.type = type;\r\n        }\r\n\r\n**Child class: ObjectiveAssessment.java**\r\n\r\n    @Entity(tableName = &quot;objective_assessment&quot;, foreignKeys = {\r\n            @ForeignKey(\r\n                    entity = Assessment.class,\r\n                    parentColumns = &quot;assessment_id&quot;,\r\n                    childColumns = &quot;objective_id&quot;,\r\n                    onUpdate = CASCADE,\r\n                    onDelete = CASCADE\r\n            )\r\n    })\r\n    public class ObjectiveAssessment extends Assessment{\r\n    \r\n        @PrimaryKey(autoGenerate = true)\r\n        @ColumnInfo(name = &quot;objective_id&quot;)\r\n        private int objective_ID;\r\n        private String type;\r\n    \r\n        public ObjectiveAssessment(int assessmentID, String assessmentName, String assessmentStart, String assessmentEnd, int courseID, int objective_ID, String type) {\r\n            super(assessmentID, assessmentName, assessmentStart, assessmentEnd, courseID);\r\n            this.objective_ID = objective_ID;\r\n            this.type = type;\r\n        }\r\n\r\n**Here is the part where I am adding a new assessment in the app:**\r\n\r\n    public void saveAssessment(View view) {\r\n    \r\n            assessmentTitle = editName.getText().toString();\r\n            assessmentStart = editStart.getText().toString();\r\n            assessmentEnd = editEnd.getText().toString();\r\n    \r\n            //Check if fields are empty:\r\n            if (assessmentTitle.isEmpty() || assessmentStart.isEmpty() || assessmentEnd.isEmpty()) {\r\n    \r\n                Toast.makeText(AddAssessmentScreen.this, &quot;Fill out required fields.&quot;, Toast.LENGTH_LONG).show();\r\n                return;\r\n    \r\n            }\r\n            else {\r\n    \r\n                //Check assessment type selected (used Downcasting for polymorphism):\r\n    \r\n                if (assessment_type == true) {\r\n                    Assessment performanceAssessment = new PerformanceAssessment(0, assessmentTitle, assessmentStart, assessmentEnd, currentCourseID, 0, selectedString);\r\n                    PerformanceAssessment castedPerformance = (PerformanceAssessment) performanceAssessment;\r\n                    //Insert assessment to database performance_assessment table (Performance child type):\r\n                    repository.insert(castedPerformance);\r\n                    Repository addToAssessment = new Repository(getApplication());\r\n                    //Insert assessment to database assessment_table (Assessment parent type):\r\n                    addToAssessment.insert(performanceAssessment);\r\n    \r\n                }\r\n                else {\r\n                    Assessment objectiveAssessment = new ObjectiveAssessment(0,assessmentTitle, assessmentStart, assessmentEnd, currentCourseID, 0, selectedString);\r\n                    ObjectiveAssessment castedObjective = (ObjectiveAssessment) objectiveAssessment;\r\n                    //Insert assessment to database objective_assessment table (Objective child type):\r\n                    repository.insert(castedObjective);\r\n                    Repository addToAssessment = new Repository(getApplication());\r\n                    //Insert assessment to database assessment_table (Assessment parent type):\r\n                    addToAssessment.insert(objectiveAssessment);\r\n                }\r\n    \r\n                Toast.makeText(AddAssessmentScreen.this, &quot;New assessment added. Refresh previous screen.&quot;, Toast.LENGTH_LONG).show();\r\n    \r\n            }\r\n\r\n","title":"Primary and foreign key implementation Java and Android Room","body":"<p>This is my first time asking a question here in StackOverflow so forgive me if I am not asking the question right or a certain way.</p>\n<p>I have two child classes (PerformanceAssessment and ObjectiveAssessment) from parent class Assessment.  I was able to successfully do downcasting for the polymorphism part requirement of my school project, and I was able to save to their appropriate databases both instances of parent and child after downcasting (I have an assessment_table, performance_assessments, and objective_assessments table). However, I am now having Android Room database issues. I realized that I need to implement foreign keys to do the CRUD operations properly. How do I tweak my parent and child classes code and add proper annotations for implementing foreign and primary keys correctly? I need to have an autogenerated primary key for each class: parent (Assessment) and both children (PerformanceAssessment and ObjectiveAssessment). But I also need to utilize the children's primary key as a foreign key for the parent's databases so that when I delete an instance of Performance/Objective assessments, I can also delete the Assessment instance when I am downcasting. I found very little helpful information regarding this. Thanks in advance.</p>\n<p>I am getting these errors right now:</p>\n<p><a href=\"https://i.stack.imgur.com/2pE9w.png\" rel=\"nofollow noreferrer\">Build Errors</a></p>\n<p><strong>Parent Class: Assessment.java</strong></p>\n<pre><code>@Entity(tableName = &quot;assessment_table&quot;)\npublic class Assessment {\n\n    @PrimaryKey(autoGenerate = true)\n    @ColumnInfo(name = &quot;assessment_id&quot;)\n    private final int assessment_id;\n\n    private String assessmentName;\n    private String assessmentStart;\n    private String assessmentEnd;\n    private int courseID;\n\n    public Assessment(int assessment_id, String assessmentName, String assessmentStart, String assessmentEnd, int courseID) {\n        this.assessment_id = assessment_id;\n        this.assessmentName = assessmentName;\n        this.assessmentStart = assessmentStart;\n        this.assessmentEnd = assessmentEnd;\n        this.courseID = courseID;\n    }\n</code></pre>\n<p><strong>Child class: PerformanceAssessment.java</strong></p>\n<pre><code>@Entity(tableName = &quot;performance_assessment&quot;, foreignKeys = {\n        @ForeignKey(\n                entity = Assessment.class,\n                parentColumns = &quot;assessment_id&quot;,\n                childColumns = &quot;performance_id&quot;,\n                onUpdate = CASCADE,\n                onDelete = CASCADE\n        )\n})\npublic class PerformanceAssessment extends Assessment{\n\n    @PrimaryKey(autoGenerate = true)\n    @ColumnInfo(name = &quot;performance_id&quot;)\n    private int performanceID;\n    private String type;\n\n    public PerformanceAssessment(int assessment_id, String assessmentName, String assessmentStart, String assessmentEnd, int courseID, int performanceID, String type) {\n        super(assessment_id, assessmentName, assessmentStart, assessmentEnd, courseID);\n        this.performanceID = performanceID;\n        this.type = type;\n    }\n</code></pre>\n<p><strong>Child class: ObjectiveAssessment.java</strong></p>\n<pre><code>@Entity(tableName = &quot;objective_assessment&quot;, foreignKeys = {\n        @ForeignKey(\n                entity = Assessment.class,\n                parentColumns = &quot;assessment_id&quot;,\n                childColumns = &quot;objective_id&quot;,\n                onUpdate = CASCADE,\n                onDelete = CASCADE\n        )\n})\npublic class ObjectiveAssessment extends Assessment{\n\n    @PrimaryKey(autoGenerate = true)\n    @ColumnInfo(name = &quot;objective_id&quot;)\n    private int objective_ID;\n    private String type;\n\n    public ObjectiveAssessment(int assessmentID, String assessmentName, String assessmentStart, String assessmentEnd, int courseID, int objective_ID, String type) {\n        super(assessmentID, assessmentName, assessmentStart, assessmentEnd, courseID);\n        this.objective_ID = objective_ID;\n        this.type = type;\n    }\n</code></pre>\n<p><strong>Here is the part where I am adding a new assessment in the app:</strong></p>\n<pre><code>public void saveAssessment(View view) {\n\n        assessmentTitle = editName.getText().toString();\n        assessmentStart = editStart.getText().toString();\n        assessmentEnd = editEnd.getText().toString();\n\n        //Check if fields are empty:\n        if (assessmentTitle.isEmpty() || assessmentStart.isEmpty() || assessmentEnd.isEmpty()) {\n\n            Toast.makeText(AddAssessmentScreen.this, &quot;Fill out required fields.&quot;, Toast.LENGTH_LONG).show();\n            return;\n\n        }\n        else {\n\n            //Check assessment type selected (used Downcasting for polymorphism):\n\n            if (assessment_type == true) {\n                Assessment performanceAssessment = new PerformanceAssessment(0, assessmentTitle, assessmentStart, assessmentEnd, currentCourseID, 0, selectedString);\n                PerformanceAssessment castedPerformance = (PerformanceAssessment) performanceAssessment;\n                //Insert assessment to database performance_assessment table (Performance child type):\n                repository.insert(castedPerformance);\n                Repository addToAssessment = new Repository(getApplication());\n                //Insert assessment to database assessment_table (Assessment parent type):\n                addToAssessment.insert(performanceAssessment);\n\n            }\n            else {\n                Assessment objectiveAssessment = new ObjectiveAssessment(0,assessmentTitle, assessmentStart, assessmentEnd, currentCourseID, 0, selectedString);\n                ObjectiveAssessment castedObjective = (ObjectiveAssessment) objectiveAssessment;\n                //Insert assessment to database objective_assessment table (Objective child type):\n                repository.insert(castedObjective);\n                Repository addToAssessment = new Repository(getApplication());\n                //Insert assessment to database assessment_table (Assessment parent type):\n                addToAssessment.insert(objectiveAssessment);\n            }\n\n            Toast.makeText(AddAssessmentScreen.this, &quot;New assessment added. Refresh previous screen.&quot;, Toast.LENGTH_LONG).show();\n\n        }\n</code></pre>\n"},{"tags":["java","time-complexity","big-o","bubble-sort"],"comments":[{"owner":{"account_id":36759,"reputation":38034,"user_id":104950,"accept_rate":93,"display_name":"Amir Afghani"},"score":4,"creation_date":1637172502,"post_id":70009435,"comment_id":123757392,"body_markdown":"Hint: two loops where the amount of computation is a function of the size of the input array","body":"Hint: two loops where the amount of computation is a function of the size of the input array"}],"answers":[{"tags":[],"owner":{"account_id":18753847,"reputation":843,"user_id":13674351,"display_name":"Jacob Steinebronn"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1637182599,"creation_date":1637182599,"answer_id":70011455,"question_id":70009435,"body_markdown":"Take the worst case: the array is strictly decreasing. Your code will execute the inner for loop `O(n)` times, each taking `O(n)`, resulting in a total time complexity of `O(n^2)`. In general, bubblesort and its derivatives are `O(n^2)`. \r\n\r\nHint: Java has Arrays.sort() which uses quicksort for primitives and mergesort for objects, both of which having `O(n log n)` runtime which is far superior to `n^2`. ","title":"What is the big O notation for this bubble sort?","body":"<p>Take the worst case: the array is strictly decreasing. Your code will execute the inner for loop <code>O(n)</code> times, each taking <code>O(n)</code>, resulting in a total time complexity of <code>O(n^2)</code>. In general, bubblesort and its derivatives are <code>O(n^2)</code>.</p>\n<p>Hint: Java has Arrays.sort() which uses quicksort for primitives and mergesort for objects, both of which having <code>O(n log n)</code> runtime which is far superior to <code>n^2</code>.</p>\n"},{"tags":[],"owner":{"account_id":47283,"reputation":703817,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1637401858,"creation_date":1637401514,"answer_id":70044808,"question_id":70009435,"body_markdown":"Roughly speaking, it is `O(N^2)`.  But there are some important differences between this and a real bubblesort implementation.  \r\n\r\n  1.  It is only going to sort elements from `begin` onwards.\r\n  2.  If `begin` is even, or will only sort elements at the even positions.\r\n  3.  If `begin` is odd, or will only sort elements at the odd positions.\r\n\r\nSo in fact, it is *partial* sort, and it is `O(M^2)` where `M` is `b.length - begin`.  \r\n\r\nIf we set `begin` to zero, that is `O(N^2)`, but if we set `begin` to `m.length - C` then it is `O(1)` !!!","title":"What is the big O notation for this bubble sort?","body":"<p>Roughly speaking, it is <code>O(N^2)</code>.  But there are some important differences between this and a real bubblesort implementation.</p>\n<ol>\n<li>It is only going to sort elements from <code>begin</code> onwards.</li>\n<li>If <code>begin</code> is even, or will only sort elements at the even positions.</li>\n<li>If <code>begin</code> is odd, or will only sort elements at the odd positions.</li>\n</ol>\n<p>So in fact, it is <em>partial</em> sort, and it is <code>O(M^2)</code> where <code>M</code> is <code>b.length - begin</code>.</p>\n<p>If we set <code>begin</code> to zero, that is <code>O(N^2)</code>, but if we set <code>begin</code> to <code>m.length - C</code> then it is <code>O(1)</code> !!!</p>\n"}],"owner":{"account_id":23259593,"reputation":1,"user_id":17346075,"display_name":"Shamim"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":790,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1637401858,"creation_date":1637172263,"question_id":70009435,"body_markdown":"This bubble sort is part of my code that sorts an array in increasing order and I swap values  with one value between them. I don&#39;t know the big O notation of this part of my code. If the length of my array is n, would it be `O(n)` or `O(n^2)`? \r\n```java\r\npublic static int Sort(int[] b, int begin) {\r\n    boolean swapped = false;\r\n    int count1 = 0;\r\n    int temporary;\r\n    while (swapped == false) {\r\n        swapped = true;\r\n        for (int i = begin; i &lt; b.length - 1; i+=2) {\r\n            if (b[i] &gt; b[i + 2]) {\r\n                temporary = b[i];\r\n                b[i] = b[i + 2];\r\n                b[i + 2] = temporary;\r\n                swapped = false;\r\n                count1++;\r\n            }\r\n        }\r\n    }\r\n    return count1;\r\n}\r\n```","title":"What is the big O notation for this bubble sort?","body":"<p>This bubble sort is part of my code that sorts an array in increasing order and I swap values  with one value between them. I don't know the big O notation of this part of my code. If the length of my array is n, would it be <code>O(n)</code> or <code>O(n^2)</code>?</p>\n<pre class=\"lang-java prettyprint-override\"><code>public static int Sort(int[] b, int begin) {\n    boolean swapped = false;\n    int count1 = 0;\n    int temporary;\n    while (swapped == false) {\n        swapped = true;\n        for (int i = begin; i &lt; b.length - 1; i+=2) {\n            if (b[i] &gt; b[i + 2]) {\n                temporary = b[i];\n                b[i] = b[i + 2];\n                b[i + 2] = temporary;\n                swapped = false;\n                count1++;\n            }\n        }\n    }\n    return count1;\n}\n</code></pre>\n"},{"tags":["java","generics","wildcard"],"answers":[{"tags":[],"owner":{"account_id":17835,"reputation":303895,"user_id":40342,"accept_rate":62,"display_name":"Joachim Sauer"},"down_vote_count":0,"up_vote_count":31,"is_accepted":true,"score":31,"last_activity_date":1506356745,"creation_date":1317884551,"answer_id":7671129,"question_id":7671072,"body_markdown":"An unbound type can be useful when your method doesn&#39;t really care about the actual type.\r\n\r\nA primitive example would be this:\r\n\r\n    public void printStuff(Iterable&lt;?&gt; stuff) {\r\n      for (Object item : stuff) {\r\n        System.out.println(item);\r\n      }\r\n    }\r\n\r\nSince `PrintStream.println()` can handle all reference types (by calling `toString()`), we don&#39;t *care* what the actual content of that `Iterable` is.\r\n\r\nAnd the *caller* can pass in a `List&lt;Number&gt;` or a `Set&lt;String&gt;` or a `Collection&lt;? extends MySpecificObject&lt;SomeType&gt;&gt;`.\r\n\r\nAlso note that not using generics (which is called using a raw type) at all has a quite different effect: it makes the compiler handle the *entire object* as if generics *don&#39;t exist at all*. In other words: not just the type parameter of the class is ignored, but also all generic type parameters on methods.\r\n\r\nAnother important distinctions is that you can&#39;t add any (non-`null`) value to a `Collection&lt;?&gt;`, but can add *all* objects to the raw type `Collection`:\r\n\r\nThis won&#39;t compile, because the type parameter of `c` is an unknown type (= the wildcard `?`), so we can&#39;t provide a value that is guaranteed to be assignable to that (except for `null`, which is assignable to all reference types).\r\n\r\n    Collection&lt;?&gt; c = new ArrayList&lt;String&gt;();\r\n    c.add(&quot;foo&quot;);    // compilation error\r\n\r\nIf you leave the type parameter out (i.e. use a raw type), then you can add *anything* to the collection:\r\n\r\n    Collection c = new ArrayList&lt;String&gt;();\r\n    c.add(&quot;foo&quot;);\r\n    c.add(new Integer(300));\r\n    c.add(new Object());\r\n\r\nNote that the compiler will *warn* you not to use a raw type, specifically for this reason: it removes any type checks related to generics.","title":"What is the use and point of unbound wildcards generics in Java?","body":"<p>An unbound type can be useful when your method doesn't really care about the actual type.</p>\n\n<p>A primitive example would be this:</p>\n\n<pre><code>public void printStuff(Iterable&lt;?&gt; stuff) {\n  for (Object item : stuff) {\n    System.out.println(item);\n  }\n}\n</code></pre>\n\n<p>Since <code>PrintStream.println()</code> can handle all reference types (by calling <code>toString()</code>), we don't <em>care</em> what the actual content of that <code>Iterable</code> is.</p>\n\n<p>And the <em>caller</em> can pass in a <code>List&lt;Number&gt;</code> or a <code>Set&lt;String&gt;</code> or a <code>Collection&lt;? extends MySpecificObject&lt;SomeType&gt;&gt;</code>.</p>\n\n<p>Also note that not using generics (which is called using a raw type) at all has a quite different effect: it makes the compiler handle the <em>entire object</em> as if generics <em>don't exist at all</em>. In other words: not just the type parameter of the class is ignored, but also all generic type parameters on methods.</p>\n\n<p>Another important distinctions is that you can't add any (non-<code>null</code>) value to a <code>Collection&lt;?&gt;</code>, but can add <em>all</em> objects to the raw type <code>Collection</code>:</p>\n\n<p>This won't compile, because the type parameter of <code>c</code> is an unknown type (= the wildcard <code>?</code>), so we can't provide a value that is guaranteed to be assignable to that (except for <code>null</code>, which is assignable to all reference types).</p>\n\n<pre><code>Collection&lt;?&gt; c = new ArrayList&lt;String&gt;();\nc.add(\"foo\");    // compilation error\n</code></pre>\n\n<p>If you leave the type parameter out (i.e. use a raw type), then you can add <em>anything</em> to the collection:</p>\n\n<pre><code>Collection c = new ArrayList&lt;String&gt;();\nc.add(\"foo\");\nc.add(new Integer(300));\nc.add(new Object());\n</code></pre>\n\n<p>Note that the compiler will <em>warn</em> you not to use a raw type, specifically for this reason: it removes any type checks related to generics.</p>\n"},{"tags":[],"owner":{"account_id":127126,"reputation":2755,"user_id":964976,"display_name":"tcb"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1317886246,"creation_date":1317886246,"answer_id":7671355,"question_id":7671072,"body_markdown":"While using raw types means that you don&#39;t know about generics (because you&#39;re lazy or code was written ages ago), using `&lt;?&gt;` means that you know about generics and explicitly emphasize that your code can work with any kind of objects.","title":"What is the use and point of unbound wildcards generics in Java?","body":"<p>While using raw types means that you don't know about generics (because you're lazy or code was written ages ago), using <code>&lt;?&gt;</code> means that you know about generics and explicitly emphasize that your code can work with any kind of objects.</p>\n"},{"tags":[],"owner":{"account_id":69238,"reputation":2428,"user_id":201601,"accept_rate":60,"display_name":"riffraff"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1317888078,"creation_date":1317886906,"answer_id":7671448,"question_id":7671072,"body_markdown":"Using unbounded wildcards only makes sense, AFAIK, when wrapping old code that is not using generics, basically Collections. \r\n\r\nIf you look at what you can do with such a generic it&#39;s basically _nothing_. \r\nIf you have a collection you can&#39;t add anything, if you try to read something out you will always get an `Object`and so on. \r\n\r\nThis in turns helps guaranteeing that you will handle the data in a type safe way, whereas using the raw type would have caused the compiler to ignore any mess you&#39;d make. \r\n\r\n[Which methods and fields are accessible/inaccessible through a reference variable of a wildcard parameterized type?][1] from [Angelika Langers Java Generics FAQ][2] might be of interest.\r\n\r\n\r\n  [1]: http://www.angelikalanger.com/GenericsFAQ/FAQSections/ParameterizedTypes.html#Which%20methods%20and%20fields%20are%20accessible/inaccessible%20through%20a%20reference%20variable%20of%20a%20wildcard%20type?\r\n  [2]: http://www.angelikalanger.com/GenericsFAQ/JavaGenericsFAQ.html","title":"What is the use and point of unbound wildcards generics in Java?","body":"<p>Using unbounded wildcards only makes sense, AFAIK, when wrapping old code that is not using generics, basically Collections. </p>\n\n<p>If you look at what you can do with such a generic it's basically <em>nothing</em>. \nIf you have a collection you can't add anything, if you try to read something out you will always get an <code>Object</code>and so on. </p>\n\n<p>This in turns helps guaranteeing that you will handle the data in a type safe way, whereas using the raw type would have caused the compiler to ignore any mess you'd make. </p>\n\n<p><a href=\"http://www.angelikalanger.com/GenericsFAQ/FAQSections/ParameterizedTypes.html#Which%20methods%20and%20fields%20are%20accessible/inaccessible%20through%20a%20reference%20variable%20of%20a%20wildcard%20type?\" rel=\"nofollow\">Which methods and fields are accessible/inaccessible through a reference variable of a wildcard parameterized type?</a> from <a href=\"http://www.angelikalanger.com/GenericsFAQ/JavaGenericsFAQ.html\" rel=\"nofollow\">Angelika Langers Java Generics FAQ</a> might be of interest.</p>\n"},{"tags":[],"owner":{"account_id":4217515,"reputation":8460,"user_id":3453226,"accept_rate":77,"display_name":"spongebob"},"down_vote_count":0,"up_vote_count":8,"is_accepted":false,"score":8,"last_activity_date":1438354916,"creation_date":1438354916,"answer_id":31749387,"question_id":7671072,"body_markdown":"When you need to perform an `instanceof` check.\r\n\r\nYou can&#39;t parameterize like this:\r\n\r\n    Object value;\r\n    if (value instanceof List&lt;String&gt;) {\r\n        // ...\r\n    }\r\n\r\nSo you do:\r\n\r\n    Object value;\r\n    if (value instanceof List&lt;?&gt;) {\r\n        // ...\r\n    }","title":"What is the use and point of unbound wildcards generics in Java?","body":"<p>When you need to perform an <code>instanceof</code> check.</p>\n\n<p>You can't parameterize like this:</p>\n\n<pre><code>Object value;\nif (value instanceof List&lt;String&gt;) {\n    // ...\n}\n</code></pre>\n\n<p>So you do:</p>\n\n<pre><code>Object value;\nif (value instanceof List&lt;?&gt;) {\n    // ...\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":4342327,"reputation":145474,"user_id":3545273,"accept_rate":100,"display_name":"Serge Ballesta"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1438356559,"creation_date":1438356559,"answer_id":31749894,"question_id":7671072,"body_markdown":"There are (rare) perfectly correct use cases for unbound wildcards. The SDK contains some of them.\r\n\r\nOne example is a method that does a definite action on a list of any kind and does not return anything as `rotate` in `Collections`:\r\n\r\n    static void rotate(List&lt;?&gt; list, int distance)\r\n\r\nAnother example is when you want to list the possible constructors for a class, the method is :\r\n\r\n    Constructor&lt;?&gt;[] getConstructors()\r\n\r\nHere it in not even possible to use a generic, because by definition the array will contain different constructor each with its own actual class. By contrast, the API does use a generic signature for getting one single constructor : `Constructor&lt;T&gt; getConstructor(Class&lt;?&gt;... parameterTypes)`.\r\n\r\nThe conclusion is that even if it is mainly used for compatibility with older code, there are still places where unbound wildcard generics are the correct way.","title":"What is the use and point of unbound wildcards generics in Java?","body":"<p>There are (rare) perfectly correct use cases for unbound wildcards. The SDK contains some of them.</p>\n\n<p>One example is a method that does a definite action on a list of any kind and does not return anything as <code>rotate</code> in <code>Collections</code>:</p>\n\n<pre><code>static void rotate(List&lt;?&gt; list, int distance)\n</code></pre>\n\n<p>Another example is when you want to list the possible constructors for a class, the method is :</p>\n\n<pre><code>Constructor&lt;?&gt;[] getConstructors()\n</code></pre>\n\n<p>Here it in not even possible to use a generic, because by definition the array will contain different constructor each with its own actual class. By contrast, the API does use a generic signature for getting one single constructor : <code>Constructor&lt;T&gt; getConstructor(Class&lt;?&gt;... parameterTypes)</code>.</p>\n\n<p>The conclusion is that even if it is mainly used for compatibility with older code, there are still places where unbound wildcard generics are the correct way.</p>\n"},{"tags":[],"owner":{"display_name":"user3458"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1506357164,"creation_date":1506357164,"answer_id":46410011,"question_id":7671072,"body_markdown":"Allow me to rephrase the question:\r\n\r\n&quot;What is the difference between `List&lt;Object&gt;` and `List&lt;?&gt;` ?&quot;\r\n\r\nThe answer to that is that `List&lt;?&gt;` is more restrictive. It tells us that we have a bunch of object of **some** type, but that type is not necessarily `Object`. \r\n\r\nSince we don&#39;t know what that type is, we cannot add to the list at all - anything we add may be of wrong type. In fact, we cannot pass any argument of `?` type to any method, not just `add()`. \r\n\r\nOn the plus side, when we specify that a method takes `List&lt;?&gt;`, it can take `List&lt;String&gt;` or `List&lt;Integer&gt;` or any other `List&lt;&gt;`. `List&lt;Object&gt;` can only take `List&lt;Object&gt;`.","title":"What is the use and point of unbound wildcards generics in Java?","body":"<p>Allow me to rephrase the question:</p>\n\n<p>\"What is the difference between <code>List&lt;Object&gt;</code> and <code>List&lt;?&gt;</code> ?\"</p>\n\n<p>The answer to that is that <code>List&lt;?&gt;</code> is more restrictive. It tells us that we have a bunch of object of <strong>some</strong> type, but that type is not necessarily <code>Object</code>. </p>\n\n<p>Since we don't know what that type is, we cannot add to the list at all - anything we add may be of wrong type. In fact, we cannot pass any argument of <code>?</code> type to any method, not just <code>add()</code>. </p>\n\n<p>On the plus side, when we specify that a method takes <code>List&lt;?&gt;</code>, it can take <code>List&lt;String&gt;</code> or <code>List&lt;Integer&gt;</code> or any other <code>List&lt;&gt;</code>. <code>List&lt;Object&gt;</code> can only take <code>List&lt;Object&gt;</code>.</p>\n"},{"tags":[],"owner":{"account_id":9905070,"reputation":11,"user_id":7333814,"display_name":"Lefteris"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1637401803,"creation_date":1637401803,"answer_id":70044835,"question_id":7671072,"body_markdown":"List\\&lt;Object&gt; is a List that may contain any Object, e.g. l[0] may be an Integer, l[1] may be a String, etc.\r\nList&lt;?&gt; may be a List\\&lt;Integer&gt; or List\\&lt;String&gt;, etc. If it is a List\\&lt;Integer&gt;, it stores only Integers, if it is List\\&lt;String&gt;, it stores only Strings. ","title":"What is the use and point of unbound wildcards generics in Java?","body":"<p>List&lt;Object&gt; is a List that may contain any Object, e.g. l[0] may be an Integer, l[1] may be a String, etc.\nList&lt;?&gt; may be a List&lt;Integer&gt; or List&lt;String&gt;, etc. If it is a List&lt;Integer&gt;, it stores only Integers, if it is List&lt;String&gt;, it stores only Strings.</p>\n"}],"owner":{"account_id":116952,"reputation":21661,"user_id":306488,"accept_rate":78,"display_name":"lisak"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":11891,"favorite_count":0,"down_vote_count":0,"up_vote_count":31,"accepted_answer_id":7671129,"answer_count":7,"score":31,"last_activity_date":1637401803,"creation_date":1317884104,"question_id":7671072,"body_markdown":"I don&#39;t understand what is the use of unbound wildcards generics. Bound wildcards generics with upper boundary `&lt;? extends Animal&gt;` makes perfect sense, because using polymorphism I can work with that type or collection. But what is the point of having generics that can be of any type? Doesn&#39;t it defeat the purpose of generics? Compiler doesn&#39;t find any conflict and after type erasure it would be like no generics was used.","title":"What is the use and point of unbound wildcards generics in Java?","body":"<p>I don't understand what is the use of unbound wildcards generics. Bound wildcards generics with upper boundary <code>&lt;? extends Animal&gt;</code> makes perfect sense, because using polymorphism I can work with that type or collection. But what is the point of having generics that can be of any type? Doesn't it defeat the purpose of generics? Compiler doesn't find any conflict and after type erasure it would be like no generics was used.</p>\n"},{"tags":["java","executable","manifest.mf"],"comments":[{"owner":{"account_id":2366187,"reputation":60152,"user_id":2071828,"accept_rate":88,"display_name":"Boris the Spider"},"score":1,"creation_date":1637401450,"post_id":70044787,"comment_id":123820306,"body_markdown":"No. You cannot search for jars in a jar. You would need to unpack the lib and then jar the whole lot - known as a “fat” or “Uber” jar.","body":"No. You cannot search for jars in a jar. You would need to unpack the lib and then jar the whole lot - known as a “fat” or “Uber” jar."},{"owner":{"account_id":2825991,"reputation":2000,"user_id":2428631,"display_name":"McPringle"},"score":2,"creation_date":1637401818,"post_id":70044787,"comment_id":123820374,"body_markdown":"I highly recommend using a build tool like Maven or Gradle. With shadow plugins, you can create a &quot;fat jar&quot; that contains everything to run your application very easily.","body":"I highly recommend using a build tool like Maven or Gradle. With shadow plugins, you can create a &quot;fat jar&quot; that contains everything to run your application very easily."},{"owner":{"account_id":8441967,"reputation":1,"user_id":6334125,"display_name":"lazyone"},"score":0,"creation_date":1637402292,"post_id":70044787,"comment_id":123820462,"body_markdown":"Boris, does it therefore mean, I can skip adding lib/library.jar into executable.jar ?? because I know I will provide it in an external folder anyway ??","body":"Boris, does it therefore mean, I can skip adding lib/library.jar into executable.jar ?? because I know I will provide it in an external folder anyway ??"},{"owner":{"account_id":47283,"reputation":703817,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"score":0,"creation_date":1637402722,"post_id":70044787,"comment_id":123820534,"body_markdown":"Basically, yes.","body":"Basically, yes."}],"owner":{"account_id":8441967,"reputation":1,"user_id":6334125,"display_name":"lazyone"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":62,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1637401332,"creation_date":1637401332,"question_id":70044787,"body_markdown":"I have three java classes, a, b, and c in the current working folder.\r\n\r\nClass c needs a library(library.jar) in sub-folder called lib. So I have folder structure as follows…\r\n\r\n    a.class\r\n    b.class\r\n    c.class\r\n    lib/library.jar\r\n\r\nTo create the MANIFEST.MF I create MANIFEST.TXT with two standard key/value pairs…\r\n\r\n    Main-Class: a\r\n    Class-Path: lib/library.jar\r\n\r\nTo create an executable jar, with MANIFEST.MF, I do the command…\r\n\r\n    jar cvfm executable.jar MANIFEST.TXT *.class lib/library.jar\r\n\r\nThe command above means executable.jar contains my classes and lib/library.jar (i.e. the complete folder structure within it).\r\n\r\nBut to deploy executable.jar, you have to have the executable.jar as well as create an external folder, lib with library.jar in it, i.e.\r\n\r\n    lib/library.jar\r\n    executable.jar\r\n\r\nINSTEAD OF just the executable only…\r\n\r\n    executable.jar\r\n\r\nIsn’t there a programmatical way to make java search in the path already within the excutable jar itself ???","title":"Why should I provide a library in two places when deploying an executable jar?","body":"<p>I have three java classes, a, b, and c in the current working folder.</p>\n<p>Class c needs a library(library.jar) in sub-folder called lib. So I have folder structure as follows…</p>\n<pre><code>a.class\nb.class\nc.class\nlib/library.jar\n</code></pre>\n<p>To create the MANIFEST.MF I create MANIFEST.TXT with two standard key/value pairs…</p>\n<pre><code>Main-Class: a\nClass-Path: lib/library.jar\n</code></pre>\n<p>To create an executable jar, with MANIFEST.MF, I do the command…</p>\n<pre><code>jar cvfm executable.jar MANIFEST.TXT *.class lib/library.jar\n</code></pre>\n<p>The command above means executable.jar contains my classes and lib/library.jar (i.e. the complete folder structure within it).</p>\n<p>But to deploy executable.jar, you have to have the executable.jar as well as create an external folder, lib with library.jar in it, i.e.</p>\n<pre><code>lib/library.jar\nexecutable.jar\n</code></pre>\n<p>INSTEAD OF just the executable only…</p>\n<pre><code>executable.jar\n</code></pre>\n<p>Isn’t there a programmatical way to make java search in the path already within the excutable jar itself ???</p>\n"},{"tags":["java","android"],"comments":[{"owner":{"account_id":18716710,"reputation":1336,"user_id":14291243,"display_name":"Abhishek Dutt"},"score":0,"creation_date":1637399288,"post_id":70043571,"comment_id":123819944,"body_markdown":"You don;t need to use the `Room DB` for that purpose. Simply using `SharedPrefs` would do the job","body":"You don;t need to use the <code>Room DB</code> for that purpose. Simply using <code>SharedPrefs</code> would do the job"},{"owner":{"account_id":16768304,"reputation":8503,"user_id":12121419,"display_name":"blackapps"},"score":0,"creation_date":1637401004,"post_id":70043571,"comment_id":123820231,"body_markdown":"`if (isChecked){\n                    todo = new Todo(binding.editText.getText().toString(), true);\n                }else{\n                    todo = new Todo(binding.editText.getText().toString(), false);\n                }` Change to: `Todo todo = new Todo(binding.editText.getText().toString(), isChecked);`","body":"<code>if (isChecked){                     todo = new Todo(binding.editText.getText().toString(), true);                 }else{                     todo = new Todo(binding.editText.getText().toString(), false);                 }</code> Change to: <code>Todo todo = new Todo(binding.editText.getText().toString(), isChecked);</code>"}],"answers":[{"tags":[],"owner":{"account_id":18716710,"reputation":1336,"user_id":14291243,"display_name":"Abhishek Dutt"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1637401244,"creation_date":1637399615,"answer_id":70044618,"question_id":70043571,"body_markdown":"Using `SharedPrefs` would save a lot of time.  Change the following code:\r\nInside `MainActivity`\r\n\r\n```\r\npublic void onClick(View v) {\r\n       Boolean isChecked = todoItemBinding.checkBox.isChecked();\r\n       Todo todo;\r\n       if (isChecked){\r\n           todo = new Todo(binding.editText.getText().toString(), true);\r\n       }else{\r\n            todo = new Todo(binding.editText.getText().toString(), false); }       \r\n       todoViewModel.update(todo);\r\n}\r\n```\r\n\r\nwith this\r\n\r\n```\r\npublic void onClick(View v) {\r\n       Boolean isChecked =PreferenceManager.getDefaultSharedPreferences(this)\r\n       .getBoolean(&quot;checkBox1&quot;, false);\r\n       checkBox1.setChecked(checked);\r\n        Todo todo;\r\n       if (isChecked){\r\n           todo = new Todo(binding.editText.getText().toString(), true);\r\n       }else{\r\n            todo = new Todo(binding.editText.getText().toString(), false); }       \r\n       todoViewModel.update(todo);\r\n}\r\n```","title":"How to saving checkbox state to Room Database","body":"<p>Using <code>SharedPrefs</code> would save a lot of time.  Change the following code:\nInside <code>MainActivity</code></p>\n<pre><code>public void onClick(View v) {\n       Boolean isChecked = todoItemBinding.checkBox.isChecked();\n       Todo todo;\n       if (isChecked){\n           todo = new Todo(binding.editText.getText().toString(), true);\n       }else{\n            todo = new Todo(binding.editText.getText().toString(), false); }       \n       todoViewModel.update(todo);\n}\n</code></pre>\n<p>with this</p>\n<pre><code>public void onClick(View v) {\n       Boolean isChecked =PreferenceManager.getDefaultSharedPreferences(this)\n       .getBoolean(&quot;checkBox1&quot;, false);\n       checkBox1.setChecked(checked);\n        Todo todo;\n       if (isChecked){\n           todo = new Todo(binding.editText.getText().toString(), true);\n       }else{\n            todo = new Todo(binding.editText.getText().toString(), false); }       \n       todoViewModel.update(todo);\n}\n</code></pre>\n"}],"owner":{"account_id":17120818,"reputation":1,"user_id":12389077,"display_name":"Luca"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":390,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1637401244,"creation_date":1637387532,"question_id":70043571,"body_markdown":"I trying to find a way to save the state of checkbox to Room Database.But when I click on checkbox and reopen the app,it&#39;s state doesn&#39;t change.I don&#39;t know where I went wrong.\r\nI have searched the previous questions but could not find the solution. Below is my code and thanks.\r\n\r\n**Model class**\r\n```\r\n@Entity(tableName = &quot;todo_table&quot;)\r\npublic class Todo {\r\n    @PrimaryKey(autoGenerate = true)\r\n    public int id;\r\n    public String title;\r\n    public Boolean isChecked;\r\n\r\n    public Todo(String title, Boolean isChecked) {\r\n        this.title = title;\r\n        this.isChecked = isChecked;\r\n    }\r\n\r\n    public int getId() {\r\n        return id;\r\n    }\r\n\r\n    public void setId(int id) {\r\n        this.id = id;\r\n    }\r\n\r\n    public String getTitle() {\r\n        return title;\r\n    }\r\n\r\n    public void setTitle(String title) {\r\n        this.title = title;\r\n    }\r\n\r\n    public Boolean getChecked() {\r\n        return isChecked;\r\n    }\r\n\r\n    public void setChecked(Boolean checked) {\r\n        isChecked = checked;\r\n    }\r\n}\r\n```\r\n\r\n**DAO**\r\n```\r\n@Dao\r\npublic interface TodoDAO {\r\n    @Insert\r\n    void Insert(Todo todo);\r\n\r\n   \r\n    @Update\r\n    void Update(Todo todo);\r\n\r\n    @Query(&quot;SELECT * FROM todo_table ORDER BY id ASC&quot;)\r\n    LiveData&lt;List&lt;Todo&gt;&gt; getAllTodo();\r\n\r\n}\r\n```\r\n\r\n**TodoDatabase**\r\n```\r\n@Database(entities = Todo.class,version = 1,exportSchema = false)\r\npublic abstract class TodoDatabase extends RoomDatabase {\r\n    private static TodoDatabase instance;\r\n    public abstract TodoDAO todoDAO();\r\n\r\n    public static synchronized TodoDatabase getInstance(Context context){\r\n        if(instance == null){\r\n            instance = Room.databaseBuilder(context.getApplicationContext(),\r\n                    TodoDatabase.class,&quot;todo_database&quot;).fallbackToDestructiveMigration()\r\n                    .addCallback(roomCallBack)\r\n                    .build();\r\n        }\r\n        return instance;\r\n    }\r\n\r\n    private static  RoomDatabase.Callback roomCallBack = new RoomDatabase.Callback(){\r\n        @Override\r\n        public void onCreate(@NonNull SupportSQLiteDatabase db) {\r\n            super.onCreate(db);\r\n            new PopulateDbAsyncTask(instance).execute();\r\n        }\r\n    };\r\n\r\n    private static class PopulateDbAsyncTask extends AsyncTask&lt;Void,Void,Void&gt; {\r\n        private TodoDAO todoDAO;\r\n\r\n        private PopulateDbAsyncTask(TodoDatabase database) {\r\n            todoDAO = database.todoDAO();\r\n        }\r\n\r\n        @Override\r\n        protected Void doInBackground(Void... voids) {\r\n            return null;\r\n        }\r\n    }\r\n}\r\n```\r\n**TodoRepository**\r\n```\r\npublic class TodoRepository {\r\n    private TodoDAO todoDAO;\r\n    private LiveData&lt;List&lt;Todo&gt;&gt; todo;\r\n\r\n    public TodoRepository(Application application){\r\n        TodoDatabase database = TodoDatabase.getInstance(application);\r\n        todoDAO = database.todoDAO();\r\n        todo = todoDAO.getAllTodo();\r\n    }\r\n\r\n    public void insert(Todo todo){\r\n        new InsertNoteAsyncTask(todoDAO).execute(todo);\r\n    }\r\n\r\n    public LiveData&lt;List&lt;Todo&gt;&gt; getTodo() {\r\n        return todo;\r\n    }\r\n\r\n    public void update(Todo todo){\r\n        new UpdateTodoAsyncTask(todoDAO).execute(todo);\r\n    }\r\n\r\n    private static class InsertNoteAsyncTask extends AsyncTask&lt;Todo,Void,Void&gt; {\r\n        private TodoDAO todoDAO;\r\n\r\n        private InsertNoteAsyncTask(TodoDAO todoDAO){\r\n            this.todoDAO = todoDAO;\r\n        }\r\n\r\n        @Override\r\n        protected Void doInBackground(Todo... todos) {\r\n            todoDAO.Insert(todos[0]);\r\n            return null;\r\n        }\r\n    }\r\n\r\n    private static class UpdateTodoAsyncTask extends AsyncTask&lt;Todo,Void,Void&gt; {\r\n        private TodoDAO todoDAO;\r\n\r\n        private UpdateTodoAsyncTask(TodoDAO todoDAO){\r\n            this.todoDAO = todoDAO;\r\n        }\r\n\r\n        @Override\r\n        protected Void doInBackground(Todo... todos) {\r\n            todoDAO.Update(todos[0]);\r\n            return null;\r\n        }\r\n    }\r\n}\r\n```\r\n\r\n**TodoViewModel**\r\n```\r\npublic class TodoViewModel extends AndroidViewModel {\r\n\r\n    private TodoRepository repository;\r\n    private LiveData&lt;List&lt;Todo&gt;&gt; todo;\r\n\r\n    public TodoViewModel(@NonNull Application application) {\r\n        super(application);\r\n\r\n        repository = new TodoRepository(application);\r\n        todo = repository.getTodo();\r\n    }\r\n\r\n    public void insert(Todo todo){\r\n        repository.insert(todo);\r\n    }\r\n\r\n    public void update(Todo todo){\r\n        repository.update(todo);\r\n    }\r\n\r\n    public LiveData&lt;List&lt;Todo&gt;&gt; getTodo(){\r\n        return todo;\r\n    }\r\n}\r\n```\r\n\r\n**TodoAdapter**\r\n```\r\npublic class TodoAdapter extends RecyclerView.Adapter&lt;TodoAdapter.ViewHolder&gt;{\r\n    private List&lt;Todo&gt; todos = new ArrayList&lt;&gt;();\r\n\r\n    @NonNull\r\n    @Override\r\n    public ViewHolder onCreateViewHolder(@NonNull ViewGroup parent, int viewType) {\r\n        return new ViewHolder(TodoItemBinding.inflate(LayoutInflater.from(parent.getContext()),parent,false));\r\n    }\r\n\r\n    @Override\r\n    public void onBindViewHolder(@NonNull ViewHolder holder, int position) {\r\n        Todo currentTodo = todos.get(holder.getAbsoluteAdapterPosition());\r\n        holder.binding.tvTitle.setText(currentTodo.getTitle());\r\n        holder.binding.checkBox.setChecked(currentTodo.getChecked());\r\n        holder.binding.checkBox.setOnCheckedChangeListener(null);\r\n        holder.binding.checkBox.setOnCheckedChangeListener(new CompoundButton.OnCheckedChangeListener() {\r\n            @Override\r\n            public void onCheckedChanged(CompoundButton buttonView, boolean isChecked) {\r\n                if (isChecked){\r\n                    holder.binding.checkBox.setChecked(true);\r\n                }else{\r\n                    holder.binding.checkBox.setChecked(false);\r\n                }\r\n            }\r\n        });\r\n    }\r\n\r\n    @Override\r\n    public int getItemCount() {\r\n        if(todos != null){\r\n            return todos.size();\r\n        }else{\r\n            return 0;\r\n        }\r\n\r\n    }\r\n\r\n    public void setTodos(List&lt;Todo&gt; todos){\r\n        this.todos = todos;\r\n        notifyDataSetChanged();\r\n    }\r\n\r\n    class ViewHolder extends RecyclerView.ViewHolder{\r\n        private TodoItemBinding binding;\r\n\r\n        public ViewHolder(TodoItemBinding bind){\r\n            super(bind.getRoot());\r\n            this.binding = bind;\r\n        }\r\n    }\r\n}\r\n```\r\n\r\n**MainActivity**\r\n```\r\npublic class MainActivity extends AppCompatActivity {\r\n\r\n    private ActivityMainBinding binding;\r\n    private TodoItemBinding todoItemBinding;\r\n    private TodoViewModel todoViewModel;\r\n\r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        binding = ActivityMainBinding.inflate(getLayoutInflater());\r\n        todoItemBinding = TodoItemBinding.inflate(getLayoutInflater());\r\n        View view = binding.getRoot();\r\n        setContentView(view);\r\n\r\n        RecyclerView recyclerView = binding.recyclerView;\r\n        recyclerView.setLayoutManager(new LinearLayoutManager(this));\r\n\r\n        TodoAdapter todoAdapter = new TodoAdapter();\r\n        recyclerView.setAdapter(todoAdapter);\r\n\r\n        todoViewModel = new ViewModelProvider(this).get(TodoViewModel.class);\r\n        todoViewModel.getTodo().observe(this, new Observer&lt;List&lt;Todo&gt;&gt;() {\r\n            @Override\r\n            public void onChanged(List&lt;Todo&gt; todos) {\r\n               todoAdapter.setTodos(todos);\r\n            }\r\n        });\r\n\r\n        binding.btnAdd.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View v) {\r\n                addTodo();\r\n            }\r\n        });\r\n\r\n        todoItemBinding.checkBox.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View v) {\r\n                Boolean isChecked = todoItemBinding.checkBox.isChecked();\r\n                Todo todo;\r\n                if (isChecked){\r\n                    todo = new Todo(binding.editText.getText().toString(), true);\r\n                }else{\r\n                    todo = new Todo(binding.editText.getText().toString(), false);\r\n                }\r\n                todoViewModel.update(todo);\r\n            }\r\n        });\r\n    }\r\n\r\n    private void addTodo() {\r\n        String title = binding.editText.getText().toString();\r\n        Todo todo = new Todo(title,false);\r\n        todoViewModel.insert(todo);\r\n        binding.editText.setText(&quot;&quot;);\r\n        closeKeyboard();\r\n    }\r\n\r\n    private void closeKeyboard(){\r\n        View view = this.getCurrentFocus();\r\n        if (view != null) {\r\n            InputMethodManager manager = (InputMethodManager)getSystemService(Context.INPUT_METHOD_SERVICE);\r\n            manager.hideSoftInputFromWindow(view.getWindowToken(), 0);\r\n        }\r\n    }\r\n}\r\n```","title":"How to saving checkbox state to Room Database","body":"<p>I trying to find a way to save the state of checkbox to Room Database.But when I click on checkbox and reopen the app,it's state doesn't change.I don't know where I went wrong.\nI have searched the previous questions but could not find the solution. Below is my code and thanks.</p>\n<p><strong>Model class</strong></p>\n<pre><code>@Entity(tableName = &quot;todo_table&quot;)\npublic class Todo {\n    @PrimaryKey(autoGenerate = true)\n    public int id;\n    public String title;\n    public Boolean isChecked;\n\n    public Todo(String title, Boolean isChecked) {\n        this.title = title;\n        this.isChecked = isChecked;\n    }\n\n    public int getId() {\n        return id;\n    }\n\n    public void setId(int id) {\n        this.id = id;\n    }\n\n    public String getTitle() {\n        return title;\n    }\n\n    public void setTitle(String title) {\n        this.title = title;\n    }\n\n    public Boolean getChecked() {\n        return isChecked;\n    }\n\n    public void setChecked(Boolean checked) {\n        isChecked = checked;\n    }\n}\n</code></pre>\n<p><strong>DAO</strong></p>\n<pre><code>@Dao\npublic interface TodoDAO {\n    @Insert\n    void Insert(Todo todo);\n\n   \n    @Update\n    void Update(Todo todo);\n\n    @Query(&quot;SELECT * FROM todo_table ORDER BY id ASC&quot;)\n    LiveData&lt;List&lt;Todo&gt;&gt; getAllTodo();\n\n}\n</code></pre>\n<p><strong>TodoDatabase</strong></p>\n<pre><code>@Database(entities = Todo.class,version = 1,exportSchema = false)\npublic abstract class TodoDatabase extends RoomDatabase {\n    private static TodoDatabase instance;\n    public abstract TodoDAO todoDAO();\n\n    public static synchronized TodoDatabase getInstance(Context context){\n        if(instance == null){\n            instance = Room.databaseBuilder(context.getApplicationContext(),\n                    TodoDatabase.class,&quot;todo_database&quot;).fallbackToDestructiveMigration()\n                    .addCallback(roomCallBack)\n                    .build();\n        }\n        return instance;\n    }\n\n    private static  RoomDatabase.Callback roomCallBack = new RoomDatabase.Callback(){\n        @Override\n        public void onCreate(@NonNull SupportSQLiteDatabase db) {\n            super.onCreate(db);\n            new PopulateDbAsyncTask(instance).execute();\n        }\n    };\n\n    private static class PopulateDbAsyncTask extends AsyncTask&lt;Void,Void,Void&gt; {\n        private TodoDAO todoDAO;\n\n        private PopulateDbAsyncTask(TodoDatabase database) {\n            todoDAO = database.todoDAO();\n        }\n\n        @Override\n        protected Void doInBackground(Void... voids) {\n            return null;\n        }\n    }\n}\n</code></pre>\n<p><strong>TodoRepository</strong></p>\n<pre><code>public class TodoRepository {\n    private TodoDAO todoDAO;\n    private LiveData&lt;List&lt;Todo&gt;&gt; todo;\n\n    public TodoRepository(Application application){\n        TodoDatabase database = TodoDatabase.getInstance(application);\n        todoDAO = database.todoDAO();\n        todo = todoDAO.getAllTodo();\n    }\n\n    public void insert(Todo todo){\n        new InsertNoteAsyncTask(todoDAO).execute(todo);\n    }\n\n    public LiveData&lt;List&lt;Todo&gt;&gt; getTodo() {\n        return todo;\n    }\n\n    public void update(Todo todo){\n        new UpdateTodoAsyncTask(todoDAO).execute(todo);\n    }\n\n    private static class InsertNoteAsyncTask extends AsyncTask&lt;Todo,Void,Void&gt; {\n        private TodoDAO todoDAO;\n\n        private InsertNoteAsyncTask(TodoDAO todoDAO){\n            this.todoDAO = todoDAO;\n        }\n\n        @Override\n        protected Void doInBackground(Todo... todos) {\n            todoDAO.Insert(todos[0]);\n            return null;\n        }\n    }\n\n    private static class UpdateTodoAsyncTask extends AsyncTask&lt;Todo,Void,Void&gt; {\n        private TodoDAO todoDAO;\n\n        private UpdateTodoAsyncTask(TodoDAO todoDAO){\n            this.todoDAO = todoDAO;\n        }\n\n        @Override\n        protected Void doInBackground(Todo... todos) {\n            todoDAO.Update(todos[0]);\n            return null;\n        }\n    }\n}\n</code></pre>\n<p><strong>TodoViewModel</strong></p>\n<pre><code>public class TodoViewModel extends AndroidViewModel {\n\n    private TodoRepository repository;\n    private LiveData&lt;List&lt;Todo&gt;&gt; todo;\n\n    public TodoViewModel(@NonNull Application application) {\n        super(application);\n\n        repository = new TodoRepository(application);\n        todo = repository.getTodo();\n    }\n\n    public void insert(Todo todo){\n        repository.insert(todo);\n    }\n\n    public void update(Todo todo){\n        repository.update(todo);\n    }\n\n    public LiveData&lt;List&lt;Todo&gt;&gt; getTodo(){\n        return todo;\n    }\n}\n</code></pre>\n<p><strong>TodoAdapter</strong></p>\n<pre><code>public class TodoAdapter extends RecyclerView.Adapter&lt;TodoAdapter.ViewHolder&gt;{\n    private List&lt;Todo&gt; todos = new ArrayList&lt;&gt;();\n\n    @NonNull\n    @Override\n    public ViewHolder onCreateViewHolder(@NonNull ViewGroup parent, int viewType) {\n        return new ViewHolder(TodoItemBinding.inflate(LayoutInflater.from(parent.getContext()),parent,false));\n    }\n\n    @Override\n    public void onBindViewHolder(@NonNull ViewHolder holder, int position) {\n        Todo currentTodo = todos.get(holder.getAbsoluteAdapterPosition());\n        holder.binding.tvTitle.setText(currentTodo.getTitle());\n        holder.binding.checkBox.setChecked(currentTodo.getChecked());\n        holder.binding.checkBox.setOnCheckedChangeListener(null);\n        holder.binding.checkBox.setOnCheckedChangeListener(new CompoundButton.OnCheckedChangeListener() {\n            @Override\n            public void onCheckedChanged(CompoundButton buttonView, boolean isChecked) {\n                if (isChecked){\n                    holder.binding.checkBox.setChecked(true);\n                }else{\n                    holder.binding.checkBox.setChecked(false);\n                }\n            }\n        });\n    }\n\n    @Override\n    public int getItemCount() {\n        if(todos != null){\n            return todos.size();\n        }else{\n            return 0;\n        }\n\n    }\n\n    public void setTodos(List&lt;Todo&gt; todos){\n        this.todos = todos;\n        notifyDataSetChanged();\n    }\n\n    class ViewHolder extends RecyclerView.ViewHolder{\n        private TodoItemBinding binding;\n\n        public ViewHolder(TodoItemBinding bind){\n            super(bind.getRoot());\n            this.binding = bind;\n        }\n    }\n}\n</code></pre>\n<p><strong>MainActivity</strong></p>\n<pre><code>public class MainActivity extends AppCompatActivity {\n\n    private ActivityMainBinding binding;\n    private TodoItemBinding todoItemBinding;\n    private TodoViewModel todoViewModel;\n\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        binding = ActivityMainBinding.inflate(getLayoutInflater());\n        todoItemBinding = TodoItemBinding.inflate(getLayoutInflater());\n        View view = binding.getRoot();\n        setContentView(view);\n\n        RecyclerView recyclerView = binding.recyclerView;\n        recyclerView.setLayoutManager(new LinearLayoutManager(this));\n\n        TodoAdapter todoAdapter = new TodoAdapter();\n        recyclerView.setAdapter(todoAdapter);\n\n        todoViewModel = new ViewModelProvider(this).get(TodoViewModel.class);\n        todoViewModel.getTodo().observe(this, new Observer&lt;List&lt;Todo&gt;&gt;() {\n            @Override\n            public void onChanged(List&lt;Todo&gt; todos) {\n               todoAdapter.setTodos(todos);\n            }\n        });\n\n        binding.btnAdd.setOnClickListener(new View.OnClickListener() {\n            @Override\n            public void onClick(View v) {\n                addTodo();\n            }\n        });\n\n        todoItemBinding.checkBox.setOnClickListener(new View.OnClickListener() {\n            @Override\n            public void onClick(View v) {\n                Boolean isChecked = todoItemBinding.checkBox.isChecked();\n                Todo todo;\n                if (isChecked){\n                    todo = new Todo(binding.editText.getText().toString(), true);\n                }else{\n                    todo = new Todo(binding.editText.getText().toString(), false);\n                }\n                todoViewModel.update(todo);\n            }\n        });\n    }\n\n    private void addTodo() {\n        String title = binding.editText.getText().toString();\n        Todo todo = new Todo(title,false);\n        todoViewModel.insert(todo);\n        binding.editText.setText(&quot;&quot;);\n        closeKeyboard();\n    }\n\n    private void closeKeyboard(){\n        View view = this.getCurrentFocus();\n        if (view != null) {\n            InputMethodManager manager = (InputMethodManager)getSystemService(Context.INPUT_METHOD_SERVICE);\n            manager.hideSoftInputFromWindow(view.getWindowToken(), 0);\n        }\n    }\n}\n</code></pre>\n"},{"tags":["java","spring","spring-boot","spring-annotations"],"comments":[{"owner":{"account_id":2537085,"reputation":6205,"user_id":2203890,"display_name":"Edd&#250; Mel&#233;ndez"},"score":0,"creation_date":1423246845,"post_id":28369582,"comment_id":45084865,"body_markdown":"I have tested, and everything is ok. if propery is missing the default value is taken (false).","body":"I have tested, and everything is ok. if propery is missing the default value is taken (false)."},{"owner":{"account_id":304234,"reputation":32207,"user_id":613628,"accept_rate":100,"display_name":"Stephane Nicoll"},"score":3,"creation_date":1423468915,"post_id":28369582,"comment_id":45144713,"body_markdown":"it should work. Why is your field initialized with true?! Can you add the actuator and look at the /env endpoint to double check the configuration has been applied as you expect?","body":"it should work. Why is your field initialized with true?! Can you add the actuator and look at the /env endpoint to double check the configuration has been applied as you expect?"},{"owner":{"account_id":1135699,"reputation":30287,"user_id":1120793,"accept_rate":35,"display_name":"Darshan Mehta"},"score":5,"creation_date":1423826742,"post_id":28369582,"comment_id":45316341,"body_markdown":"Well, deep down in one of the dependencies, the &quot;ignoreUnresolvablePlaceholders&quot; parameter was set to true. Due to this, spring always used the default value and never looked into application.properties file. Managed to resolve it by commenting out that chunk. Thanks.","body":"Well, deep down in one of the dependencies, the &quot;ignoreUnresolvablePlaceholders&quot; parameter was set to true. Due to this, spring always used the default value and never looked into application.properties file. Managed to resolve it by commenting out that chunk. Thanks."},{"owner":{"display_name":"user6023611"},"score":0,"creation_date":1482395784,"post_id":28369582,"comment_id":69759231,"body_markdown":"@DarshanMehta, how does it set this proerty in application properties ?","body":"@DarshanMehta, how does it set this proerty in application properties ?"},{"owner":{"display_name":"user6023611"},"score":0,"creation_date":1482396595,"post_id":28369582,"comment_id":69759669,"body_markdown":"I mean how to set ignoreUnresolvablePlaceholders on false in application.propertes.","body":"I mean how to set ignoreUnresolvablePlaceholders on false in application.propertes."}],"answers":[{"tags":[],"owner":{"account_id":53341,"reputation":1793,"user_id":159452,"display_name":"Ophir Radnitz"},"down_vote_count":0,"up_vote_count":17,"is_accepted":false,"score":17,"last_activity_date":1446159202,"creation_date":1446159202,"answer_id":33426035,"question_id":28369582,"body_markdown":"We were bitten by the following Spring bug with exactly the same symptom:\r\n\r\n[\\[SPR-9989\\] Using multiple PropertyPlaceholderConfigurer breaks @Value default value behavior][1]\r\n\r\nBasically if more than a single `PropertyPlaceholderConfigurer` is present in the ApplicationContext, only predefined defaults will be resolved and no overrides will take place. Setting a different `ignoreUnresolvablePlaceholders` value had no impact on the matter, and both values (true/false) worked equally well in that regard once we removed the extra `PropertyPlaceholderConfigurer`.\r\n\r\nLooking into it, each of the defined `PropertyPlaceholderConfigurer` internally resolved the properties as expected, but Spring couldn&#39;t figure out which of them to use in order to inject a value into the `@Value` annotated fields/params.\r\n\r\n\r\n  [1]: https://jira.spring.io/browse/SPR-9989","title":"Spring Boot : Spring always assigns default value to property despite of it being present in .properties file","body":"<p>We were bitten by the following Spring bug with exactly the same symptom:</p>\n\n<p><a href=\"https://jira.spring.io/browse/SPR-9989\" rel=\"noreferrer\">[SPR-9989] Using multiple PropertyPlaceholderConfigurer breaks @Value default value behavior</a></p>\n\n<p>Basically if more than a single <code>PropertyPlaceholderConfigurer</code> is present in the ApplicationContext, only predefined defaults will be resolved and no overrides will take place. Setting a different <code>ignoreUnresolvablePlaceholders</code> value had no impact on the matter, and both values (true/false) worked equally well in that regard once we removed the extra <code>PropertyPlaceholderConfigurer</code>.</p>\n\n<p>Looking into it, each of the defined <code>PropertyPlaceholderConfigurer</code> internally resolved the properties as expected, but Spring couldn't figure out which of them to use in order to inject a value into the <code>@Value</code> annotated fields/params.</p>\n"},{"tags":[],"owner":{"account_id":7058506,"reputation":61,"user_id":5404805,"display_name":"Arpit Jain"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1505283059,"creation_date":1488262909,"answer_id":42501618,"question_id":28369582,"body_markdown":"You can do one of the following to overcome this:\r\n\r\n 1. Use custom valueSeparator in your configurer\r\n\r\n&lt;!-- begin snippet: js hide: false console: true babel: false --&gt;\r\n\r\n&lt;!-- language: lang-html --&gt;\r\n\r\n    &lt;bean id=&quot;customConfigurer&quot; class=&quot;org.springframework.beans.factory.config.PropertyPlaceholderConfigurer&quot;&gt;\r\n         &lt;property name=&quot;location&quot; value=&quot;file:${catalina.base}/conf/config2.properties&quot;/&gt;\r\n         &lt;property name=&quot;ignoreUnresolvablePlaceholders&quot; value=&quot;true&quot;/&gt;\r\n         &lt;property name=&quot;valueSeparator&quot; value=&quot;-defVal-&quot;/&gt;\r\n    &lt;/bean&gt;\r\n\r\n&lt;!-- end snippet --&gt;\r\n\r\n 2. Increase the preference of the relevant configurer using the order property\r\n\r\n&lt;!-- begin snippet: js hide: false console: true babel: false --&gt;\r\n\r\n&lt;!-- language: lang-html --&gt;\r\n\r\n    &lt;bean id=&quot;customConfigurer&quot; class=&quot;org.springframework.beans.factory.config.PropertyPlaceholderConfigurer&quot;&gt;\r\n        &lt;property name=&quot;location&quot; value=&quot;file:${catalina.base}/conf/config2.properties&quot;/&gt;\r\n        &lt;property name=&quot;ignoreUnresolvablePlaceholders&quot; value=&quot;true&quot;/&gt;\r\n        &lt;property name=&quot;order&quot; value=&quot;-2147483648&quot;/&gt;\r\n    &lt;/bean?\r\n\r\n&lt;!-- end snippet --&gt;\r\n\r\nI have done some RnD on this issue, [available here][1].\r\n\r\n\r\n  [1]: https://medium.com/calvin-codes/hacking-spr-9989-multiple-propertyplaceholderconfigurer-with-default-values-aeab551d497c","title":"Spring Boot : Spring always assigns default value to property despite of it being present in .properties file","body":"<p>You can do one of the following to overcome this:</p>\n\n<ol>\n<li>Use custom valueSeparator in your configurer</li>\n</ol>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>&lt;bean id=\"customConfigurer\" class=\"org.springframework.beans.factory.config.PropertyPlaceholderConfigurer\"&gt;\r\n     &lt;property name=\"location\" value=\"file:${catalina.base}/conf/config2.properties\"/&gt;\r\n     &lt;property name=\"ignoreUnresolvablePlaceholders\" value=\"true\"/&gt;\r\n     &lt;property name=\"valueSeparator\" value=\"-defVal-\"/&gt;\r\n&lt;/bean&gt;</code></pre>\r\n</div>\r\n</div>\r\n</p>\n\n<ol start=\"2\">\n<li>Increase the preference of the relevant configurer using the order property</li>\n</ol>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>&lt;bean id=\"customConfigurer\" class=\"org.springframework.beans.factory.config.PropertyPlaceholderConfigurer\"&gt;\r\n    &lt;property name=\"location\" value=\"file:${catalina.base}/conf/config2.properties\"/&gt;\r\n    &lt;property name=\"ignoreUnresolvablePlaceholders\" value=\"true\"/&gt;\r\n    &lt;property name=\"order\" value=\"-2147483648\"/&gt;\r\n&lt;/bean?</code></pre>\r\n</div>\r\n</div>\r\n</p>\n\n<p>I have done some RnD on this issue, <a href=\"https://medium.com/calvin-codes/hacking-spr-9989-multiple-propertyplaceholderconfigurer-with-default-values-aeab551d497c\" rel=\"noreferrer\">available here</a>.</p>\n"},{"tags":[],"owner":{"account_id":3606961,"reputation":3367,"user_id":3008923,"display_name":"Lucas Oliveira"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1529518729,"creation_date":1529518729,"answer_id":50954715,"question_id":28369582,"body_markdown":"As @Ophir Radnitz stated, this is a spring bug that happens when there is more than one PropertyPlaceholderConfigurer present in the ApplicationContext.\r\n\r\nAs a workaround, you can obtain the desired behavior with something like that:\r\n\r\n    (...)\r\n\r\n    @Autowired\r\n    private Environment environment;\r\n\r\n    (...)\r\n\r\n    private Boolean shouldExportData()\r\n    {        \r\n        return environment.getProperty( &quot;custom.data.export&quot;, Boolean.class, Boolean.FALSE );\r\n    }\r\n\r\n\r\n","title":"Spring Boot : Spring always assigns default value to property despite of it being present in .properties file","body":"<p>As @Ophir Radnitz stated, this is a spring bug that happens when there is more than one PropertyPlaceholderConfigurer present in the ApplicationContext.</p>\n\n<p>As a workaround, you can obtain the desired behavior with something like that:</p>\n\n<pre><code>(...)\n\n@Autowired\nprivate Environment environment;\n\n(...)\n\nprivate Boolean shouldExportData()\n{        \n    return environment.getProperty( \"custom.data.export\", Boolean.class, Boolean.FALSE );\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":10794010,"reputation":1606,"user_id":7940437,"display_name":"Majid Roustaei"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1637400692,"creation_date":1637400032,"answer_id":70044660,"question_id":28369582,"body_markdown":"Happening this situation, depends on the ***type*** of the parameter.\r\n\r\nwhen setting a default value for a `String` parameter, your sample code as default value (`@Value(&quot;${custom.string:test}&quot;)`) works fine, for other types (like `boolean`, in your question), the default value should be written in this way:\r\n\r\n    @Value(&quot;${custom.data.export:#{true}}&quot;)\r\n    private boolean exportData = true;\r\n\r\n\r\nsimilarly, for `Integers`:\r\n\r\n    @Value(&quot;${custom.integer:#{20}}&quot;)\r\n\r\ngood luck.\r\n","title":"Spring Boot : Spring always assigns default value to property despite of it being present in .properties file","body":"<p>Happening this situation, depends on the <em><strong>type</strong></em> of the parameter.</p>\n<p>when setting a default value for a <code>String</code> parameter, your sample code as default value (<code>@Value(&quot;${custom.string:test}&quot;)</code>) works fine, for other types (like <code>boolean</code>, in your question), the default value should be written in this way:</p>\n<pre><code>@Value(&quot;${custom.data.export:#{true}}&quot;)\nprivate boolean exportData = true;\n</code></pre>\n<p>similarly, for <code>Integers</code>:</p>\n<pre><code>@Value(&quot;${custom.integer:#{20}}&quot;)\n</code></pre>\n<p>good luck.</p>\n"}],"owner":{"account_id":1135699,"reputation":30287,"user_id":1120793,"accept_rate":35,"display_name":"Darshan Mehta"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":15869,"favorite_count":0,"down_vote_count":1,"up_vote_count":19,"answer_count":4,"score":18,"last_activity_date":1637400692,"creation_date":1423237918,"question_id":28369582,"body_markdown":"I am working with Spring boot 1.1.8 which uses Spring 4.0.7. I am autowiring the properties in my classes with @Value annotation. I want to have a default value if the property is not present in properties file so, I use &quot;:&quot; to assign default value. Below is the example:\r\n\r\n    @Value(&quot;${custom.data.export:false}&quot;)\r\n    private boolean exportData = true;\r\n\r\nIt should assign false to the variable if property is not present in the properties file which is does. However, **if** property is present in the file, then also it assigns default value and ignores the properties value.\r\nE.g. if I have defined the property like the one mentioned above and application properties file has something like this `custom.data.export=true`then, the value of `exportData` will **still** be false whereas it should be true ideally.\r\n\r\nCan anyone please guide me what I am doing wrong here?\r\n\r\nThanks","title":"Spring Boot : Spring always assigns default value to property despite of it being present in .properties file","body":"<p>I am working with Spring boot 1.1.8 which uses Spring 4.0.7. I am autowiring the properties in my classes with @Value annotation. I want to have a default value if the property is not present in properties file so, I use \":\" to assign default value. Below is the example:</p>\n\n<pre><code>@Value(\"${custom.data.export:false}\")\nprivate boolean exportData = true;\n</code></pre>\n\n<p>It should assign false to the variable if property is not present in the properties file which is does. However, <strong>if</strong> property is present in the file, then also it assigns default value and ignores the properties value.\nE.g. if I have defined the property like the one mentioned above and application properties file has something like this <code>custom.data.export=true</code>then, the value of <code>exportData</code> will <strong>still</strong> be false whereas it should be true ideally.</p>\n\n<p>Can anyone please guide me what I am doing wrong here?</p>\n\n<p>Thanks</p>\n"},{"tags":["java","if-statement","boolean-logic"],"comments":[{"owner":{"display_name":"user14215102"},"score":4,"creation_date":1637244019,"post_id":70021092,"comment_id":123778202,"body_markdown":"The true branch of `if (oddOrEven) {` has both `sum+&quot; is even&quot;` and `sum+&quot; is odd&quot;` in it which can&#39;t be right. You got the nested ifs mixed up somewhat.","body":"The true branch of <code>if (oddOrEven) {</code> has both <code>sum+&quot; is even&quot;</code> and <code>sum+&quot; is odd&quot;</code> in it which can&#39;t be right. You got the nested ifs mixed up somewhat."},{"owner":{"account_id":238684,"reputation":22543,"user_id":507738,"accept_rate":71,"display_name":"MC Emperor"},"score":2,"creation_date":1637244189,"post_id":70021092,"comment_id":123778277,"body_markdown":"Also, some of your variable names are at least confusing. The variable `oddOrEven` is `true` if `sum` is *even*, so it should be renamed to something like `sumIsEven`.","body":"Also, some of your variable names are at least confusing. The variable <code>oddOrEven</code> is <code>true</code> if <code>sum</code> is <i>even</i>, so it should be renamed to something like <code>sumIsEven</code>."},{"owner":{"account_id":238684,"reputation":22543,"user_id":507738,"accept_rate":71,"display_name":"MC Emperor"},"score":3,"creation_date":1637244269,"post_id":70021092,"comment_id":123778314,"body_markdown":"Your alignment is still crappy. Take a close look at to what branch your `else` block belongs.","body":"Your alignment is still crappy. Take a close look at to what branch your <code>else</code> block belongs."},{"owner":{"account_id":2803497,"reputation":25202,"user_id":2411243,"display_name":"Zabuzard"},"score":0,"creation_date":1637246120,"post_id":70021092,"comment_id":123779222,"body_markdown":"Life advise: Use your IDEs &quot;auto-format&quot; feature, then those things will not happen to you anymore.","body":"Life advise: Use your IDEs &quot;auto-format&quot; feature, then those things will not happen to you anymore."}],"answers":[{"tags":[],"owner":{"account_id":15856821,"reputation":2451,"user_id":11441011,"display_name":"maloomeister"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1637244954,"creation_date":1637244214,"answer_id":70021260,"question_id":70021092,"body_markdown":"You have multiple problems when evaluating the outcome of the game.\r\n\r\n**Indentation and curly braces**\r\n\r\nFirst of all, your placement of curly braces in the whole `if` construct is faulty. This means that your `else` block belongs (if properly formatted) to the inner `if (name2.equals(&quot;E&quot;))` clause. (The other answer goes into more detail here, therefore I won&#39;t elaborate this issue further)\r\n\r\nTo fix this, add a closing curly brace before the `else` and remove one at the end of the whole outer `if` clause.\r\n\r\n**Printing incorrect output**\r\n\r\nFurthermore you have an issue in your `if` block here: \r\n```java \r\nif (oddOrEven) {\r\n    ...\r\n}\r\n```\r\nThe `...` is the code that is executed in case the outcome of the game is &quot;_even_&quot;. (You should definitely rename your `boolean`, e.g. to `isEven`, because you are only confusing yourself with the current variable name)\r\n\r\nSo in detail, the issue is commented in the following snippet: \r\n\r\n```java\r\nif (name2.equals(&quot;E&quot;)) {\r\n    System.out.println(sum+&quot; is even..!&quot;);\r\n    System.out.println(name+&quot; wins!&quot;);\r\n} else if (name2.equals(&quot;O&quot;)) {\r\n    System.out.println(sum+&quot; is odd..!&quot;); // &lt;--- this is incorrect\r\n    System.out.println(&quot;The computer wins!&quot;);\r\n}\r\n```\r\n\r\nSo you are actually doing the right thing, but your output is incorrect. \r\nUpdate this snippet according to the logic in your `else`:\r\n```java\r\nSystem.out.println(sum+&quot; is even..!&quot;);\r\nif (name2.equals(&quot;E&quot;)) {\r\n    System.out.println(name+&quot; wins!&quot;);\r\n} else if (name2.equals(&quot;O&quot;)) {\r\n    System.out.println(&quot;The computer wins!&quot;);\r\n}\r\n```\r\n**Conclusion**\r\n\r\nSumming all suggestions in one snippet:\r\n\r\n```java\r\nif (isEven) {\r\n    System.out.println(sum + &quot; is even..!&quot;);\r\n    if (name2.equals(&quot;E&quot;)) {\r\n        System.out.println(name + &quot; wins!&quot;);\r\n    } else if (name2.equals(&quot;O&quot;)) {\r\n        System.out.println(&quot;The computer wins!&quot;);\r\n    }\r\n} else {\r\n    System.out.println(sum + &quot; is odd..!&quot;);\r\n    if (name2.equals(&quot;E&quot;)) {\r\n        System.out.println(&quot;The computer wins!&quot;);\r\n    } else if (name2.equals(&quot;O&quot;)) {\r\n        System.out.println(name + &quot; wins!&quot;);\r\n    }\r\n}\r\n```\r\n","title":"Result when the sum value is &#39;8&#39; should be even, yet it says odd [Update : the &#39;else&#39; branch seems not working, when the sum is odd, it&#39;s nt wrkg]","body":"<p>You have multiple problems when evaluating the outcome of the game.</p>\n<p><strong>Indentation and curly braces</strong></p>\n<p>First of all, your placement of curly braces in the whole <code>if</code> construct is faulty. This means that your <code>else</code> block belongs (if properly formatted) to the inner <code>if (name2.equals(&quot;E&quot;))</code> clause. (The other answer goes into more detail here, therefore I won't elaborate this issue further)</p>\n<p>To fix this, add a closing curly brace before the <code>else</code> and remove one at the end of the whole outer <code>if</code> clause.</p>\n<p><strong>Printing incorrect output</strong></p>\n<p>Furthermore you have an issue in your <code>if</code> block here:</p>\n<pre class=\"lang-java prettyprint-override\"><code>if (oddOrEven) {\n    ...\n}\n</code></pre>\n<p>The <code>...</code> is the code that is executed in case the outcome of the game is &quot;<em>even</em>&quot;. (You should definitely rename your <code>boolean</code>, e.g. to <code>isEven</code>, because you are only confusing yourself with the current variable name)</p>\n<p>So in detail, the issue is commented in the following snippet:</p>\n<pre class=\"lang-java prettyprint-override\"><code>if (name2.equals(&quot;E&quot;)) {\n    System.out.println(sum+&quot; is even..!&quot;);\n    System.out.println(name+&quot; wins!&quot;);\n} else if (name2.equals(&quot;O&quot;)) {\n    System.out.println(sum+&quot; is odd..!&quot;); // &lt;--- this is incorrect\n    System.out.println(&quot;The computer wins!&quot;);\n}\n</code></pre>\n<p>So you are actually doing the right thing, but your output is incorrect.\nUpdate this snippet according to the logic in your <code>else</code>:</p>\n<pre class=\"lang-java prettyprint-override\"><code>System.out.println(sum+&quot; is even..!&quot;);\nif (name2.equals(&quot;E&quot;)) {\n    System.out.println(name+&quot; wins!&quot;);\n} else if (name2.equals(&quot;O&quot;)) {\n    System.out.println(&quot;The computer wins!&quot;);\n}\n</code></pre>\n<p><strong>Conclusion</strong></p>\n<p>Summing all suggestions in one snippet:</p>\n<pre class=\"lang-java prettyprint-override\"><code>if (isEven) {\n    System.out.println(sum + &quot; is even..!&quot;);\n    if (name2.equals(&quot;E&quot;)) {\n        System.out.println(name + &quot; wins!&quot;);\n    } else if (name2.equals(&quot;O&quot;)) {\n        System.out.println(&quot;The computer wins!&quot;);\n    }\n} else {\n    System.out.println(sum + &quot; is odd..!&quot;);\n    if (name2.equals(&quot;E&quot;)) {\n        System.out.println(&quot;The computer wins!&quot;);\n    } else if (name2.equals(&quot;O&quot;)) {\n        System.out.println(name + &quot; wins!&quot;);\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":238684,"reputation":22543,"user_id":507738,"accept_rate":71,"display_name":"MC Emperor"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1637245984,"creation_date":1637244490,"answer_id":70021322,"question_id":70021092,"body_markdown":"Take a close look at your indentation:\r\n\r\n```java\r\nif (oddOrEven) {\r\n    if (name2.equals(&quot;E&quot;)) {\r\n        System.out.println(sum+&quot; is even..!&quot;);\r\n        System.out.println(name+&quot; wins!&quot;);\r\n    }\r\nelse if (name2.equals(&quot;O&quot;)) {\r\n        System.out.println(sum+&quot; is odd..!&quot;);\r\n        System.out.println(&quot;The computer wins!&quot;);\r\n    }\r\nelse {\r\n        System.out.println(sum+&quot; is odd..!&quot;);\r\n        if (name2.equals(&quot;E&quot;)) {\r\n            System.out.println(&quot;The computer wins!&quot;);\r\n        } else if (name2.equals(&quot;O&quot;)) {\r\n            System.out.println(name+&quot; wins!&quot;);\r\n            }\r\n    }\r\n}\r\n```\r\n\r\nIf we reindent it correctly, [the] problem becomes more apparent:\r\n\r\n```java\r\nif (oddOrEven) {\r\n    if (name2.equals(&quot;E&quot;)) {\r\n        System.out.println(sum+&quot; is even..!&quot;);\r\n        System.out.println(name+&quot; wins!&quot;);\r\n    }\r\n    else if (name2.equals(&quot;O&quot;)) {\r\n        System.out.println(sum+&quot; is odd..!&quot;);\r\n        System.out.println(&quot;The computer wins!&quot;);\r\n    }\r\n    else {\r\n        System.out.println(sum+&quot; is odd..!&quot;);\r\n        if (name2.equals(&quot;E&quot;)) {\r\n            System.out.println(&quot;The computer wins!&quot;);\r\n        }\r\n        else if (name2.equals(&quot;O&quot;)) {\r\n            System.out.println(name+&quot; wins!&quot;);\r\n        }\r\n    }\r\n}\r\n```\r\n\r\nThe `else` branch is only executed when `name2` is neither `E` or `O`. Then within the `else` branch, it is stated that `sum` is odd, but the parent `if`-statement, which is `if (oddOrEven)`, is true when the sum is even. Then `name2` is again compared to `E` and `O`, but that has already been done.\r\n\r\nThis is all very confusing. You should stop writing one long method, where stuff can get confusing easily, but instead utilizing *methods*.\r\n\r\nFor instance, you could create a method, which accept both the computer input and the user input, and return `true` if the sum is even:\r\n\r\n```java\r\npublic static boolean isEven(int userInput, int computerInput) {\r\n    int sum = userInput + computerInput;\r\n    boolean sumIsEven = sum % 2 == 0;\r\n    return sumIsEven;\r\n}\r\n```\r\n\r\nThen you could create another method which accepts the selected *parity* (odd or even) and *user input*, which then returns whether the user wins. It could also utilize the abovementioned method:\r\n\r\n```java\r\n// Capture the selected parity and set the boolean to the corresponding\r\n// value.\r\n// If the user enters neither &#39;E&#39; or &#39;O&#39;, the program should not continue,\r\n// instead, the user should be asked again to enter a correct parity.\r\nboolean userSelectedParityIsEven = ...;\r\n\r\nRandom r = new Random();\r\nint computer = rand.nextInt(6);\r\n// Capture user-provided number here.\r\nint userInput = ...;\r\n\r\nboolean sumIsEven = isEven(userInput, computer);\r\nif (sumIsEven) {\r\n    System.out.println(&quot;The sum is even!&quot;);\r\n}\r\nelse {\r\n    System.out.println(&quot;The sum is odd!&quot;);\r\n}\r\n\r\nboolean match = (sumIsEven == userSelectedParityIsEven);\r\nif (match) {\r\n    System.out.println(name + &quot; wins!&quot;);\r\n}\r\nelse {\r\n    System.out.println(&quot;The computer wins!&quot;);\r\n}\r\n```","title":"Result when the sum value is &#39;8&#39; should be even, yet it says odd [Update : the &#39;else&#39; branch seems not working, when the sum is odd, it&#39;s nt wrkg]","body":"<p>Take a close look at your indentation:</p>\n<pre class=\"lang-java prettyprint-override\"><code>if (oddOrEven) {\n    if (name2.equals(&quot;E&quot;)) {\n        System.out.println(sum+&quot; is even..!&quot;);\n        System.out.println(name+&quot; wins!&quot;);\n    }\nelse if (name2.equals(&quot;O&quot;)) {\n        System.out.println(sum+&quot; is odd..!&quot;);\n        System.out.println(&quot;The computer wins!&quot;);\n    }\nelse {\n        System.out.println(sum+&quot; is odd..!&quot;);\n        if (name2.equals(&quot;E&quot;)) {\n            System.out.println(&quot;The computer wins!&quot;);\n        } else if (name2.equals(&quot;O&quot;)) {\n            System.out.println(name+&quot; wins!&quot;);\n            }\n    }\n}\n</code></pre>\n<p>If we reindent it correctly, [the] problem becomes more apparent:</p>\n<pre class=\"lang-java prettyprint-override\"><code>if (oddOrEven) {\n    if (name2.equals(&quot;E&quot;)) {\n        System.out.println(sum+&quot; is even..!&quot;);\n        System.out.println(name+&quot; wins!&quot;);\n    }\n    else if (name2.equals(&quot;O&quot;)) {\n        System.out.println(sum+&quot; is odd..!&quot;);\n        System.out.println(&quot;The computer wins!&quot;);\n    }\n    else {\n        System.out.println(sum+&quot; is odd..!&quot;);\n        if (name2.equals(&quot;E&quot;)) {\n            System.out.println(&quot;The computer wins!&quot;);\n        }\n        else if (name2.equals(&quot;O&quot;)) {\n            System.out.println(name+&quot; wins!&quot;);\n        }\n    }\n}\n</code></pre>\n<p>The <code>else</code> branch is only executed when <code>name2</code> is neither <code>E</code> or <code>O</code>. Then within the <code>else</code> branch, it is stated that <code>sum</code> is odd, but the parent <code>if</code>-statement, which is <code>if (oddOrEven)</code>, is true when the sum is even. Then <code>name2</code> is again compared to <code>E</code> and <code>O</code>, but that has already been done.</p>\n<p>This is all very confusing. You should stop writing one long method, where stuff can get confusing easily, but instead utilizing <em>methods</em>.</p>\n<p>For instance, you could create a method, which accept both the computer input and the user input, and return <code>true</code> if the sum is even:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public static boolean isEven(int userInput, int computerInput) {\n    int sum = userInput + computerInput;\n    boolean sumIsEven = sum % 2 == 0;\n    return sumIsEven;\n}\n</code></pre>\n<p>Then you could create another method which accepts the selected <em>parity</em> (odd or even) and <em>user input</em>, which then returns whether the user wins. It could also utilize the abovementioned method:</p>\n<pre class=\"lang-java prettyprint-override\"><code>// Capture the selected parity and set the boolean to the corresponding\n// value.\n// If the user enters neither 'E' or 'O', the program should not continue,\n// instead, the user should be asked again to enter a correct parity.\nboolean userSelectedParityIsEven = ...;\n\nRandom r = new Random();\nint computer = rand.nextInt(6);\n// Capture user-provided number here.\nint userInput = ...;\n\nboolean sumIsEven = isEven(userInput, computer);\nif (sumIsEven) {\n    System.out.println(&quot;The sum is even!&quot;);\n}\nelse {\n    System.out.println(&quot;The sum is odd!&quot;);\n}\n\nboolean match = (sumIsEven == userSelectedParityIsEven);\nif (match) {\n    System.out.println(name + &quot; wins!&quot;);\n}\nelse {\n    System.out.println(&quot;The computer wins!&quot;);\n}\n</code></pre>\n"}],"owner":{"account_id":15233250,"reputation":21,"user_id":16623103,"display_name":"Jabri Juhinin"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":114,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"closed_date":1637259711,"answer_count":2,"score":-1,"last_activity_date":1637399987,"creation_date":1637243592,"question_id":70021092,"body_markdown":"I&#39;ve been looking at the code that I&#39;ve written for few hours. I tried looking at other people&#39;s solution, compare and applied to my code but still my code doesn&#39;t work as it supposed to. I tried checking on the indentation, changing the `name2.equals()` with `name2.equalsIgnoreCase()`, still my code doesn&#39;t work as I expect. Can you please have a look at my code?\r\n\r\n\r\n    import java.util.*;\r\n    import java.util.Scanner;\r\n    \r\n    public class OddsAndEvens {\r\n        public static void main(String[] args) {\r\n            Scanner input = new Scanner(System.in);\r\n            System.out.println(&quot;Let&#39;s play a game called \\&quot;Odds and Evens\\&quot;&quot;);\r\n            System.out.println(&quot;What is your name? &quot;);\r\n            String name = input.next();\r\n            System.out.println(&quot;Hi &quot;+name+&quot;, which do you choose? (O)dds or (E)vens?&quot;);\r\n            String name2 = input.next();\r\n    \r\n            if (name2.equals(&quot;O&quot;)) {\r\n                System.out.println(name+&quot; has picked &quot;+name2+&quot;! The computer will be evens.&quot;);\r\n            } else if (name2.equals(&quot;E&quot;)) {\r\n                System.out.println(name+&quot; has picked &quot;+name2+&quot;! The computer will be odds.&quot;);\r\n                }\r\n            else {\r\n                System.out.println(&quot;Please pick either odds or evens!&quot;);\r\n            }\r\n            \r\n            System.out.println(&quot;-----------------------------------------------------------&quot;);\r\n            System.out.println(&quot;How many \\&quot;fingers\\&quot; do you put out?&quot;);\r\n            int userNumber = input.nextInt();\r\n    \r\n            Random rand = new Random();\r\n            int computer = rand.nextInt(6);\r\n            System.out.println(&quot;The computer plays number &quot;+computer);\r\n            System.out.println(&quot;-----------------------------------------------------------&quot;);\r\n            int sum = computer + userNumber;\r\n            System.out.println(&quot;The sum is &quot;+ sum);\r\n    \r\n            boolean oddOrEven = sum % 2 == 0;\r\n    \r\n            if (oddOrEven) {\r\n                if (name2.equals(&quot;E&quot;)) {\r\n                    System.out.println(sum+&quot; is even..!&quot;);\r\n                    System.out.println(name+&quot; wins!&quot;);\r\n                } else if (name2.equals(&quot;O&quot;)) {\r\n                    System.out.println(sum+&quot; is odd..!&quot;);\r\n                    System.out.println(&quot;The computer wins!&quot;);\r\n                }\r\n            else {\r\n                    System.out.println(sum+&quot; is odd..!&quot;);\r\n                    if (name2.equals(&quot;E&quot;)) {\r\n                        System.out.println(&quot;The computer wins!&quot;);\r\n                    } else if (name2.equals(&quot;O&quot;)) {\r\n                        System.out.println(name+&quot; wins!&quot;);\r\n                     }\r\n                }\r\n            }\r\n            System.out.println(&quot;-----------------------------------------------------------&quot;);\r\n        }\r\n    }","title":"Result when the sum value is &#39;8&#39; should be even, yet it says odd [Update : the &#39;else&#39; branch seems not working, when the sum is odd, it&#39;s nt wrkg]","body":"<p>I've been looking at the code that I've written for few hours. I tried looking at other people's solution, compare and applied to my code but still my code doesn't work as it supposed to. I tried checking on the indentation, changing the <code>name2.equals()</code> with <code>name2.equalsIgnoreCase()</code>, still my code doesn't work as I expect. Can you please have a look at my code?</p>\n<pre><code>import java.util.*;\nimport java.util.Scanner;\n\npublic class OddsAndEvens {\n    public static void main(String[] args) {\n        Scanner input = new Scanner(System.in);\n        System.out.println(&quot;Let's play a game called \\&quot;Odds and Evens\\&quot;&quot;);\n        System.out.println(&quot;What is your name? &quot;);\n        String name = input.next();\n        System.out.println(&quot;Hi &quot;+name+&quot;, which do you choose? (O)dds or (E)vens?&quot;);\n        String name2 = input.next();\n\n        if (name2.equals(&quot;O&quot;)) {\n            System.out.println(name+&quot; has picked &quot;+name2+&quot;! The computer will be evens.&quot;);\n        } else if (name2.equals(&quot;E&quot;)) {\n            System.out.println(name+&quot; has picked &quot;+name2+&quot;! The computer will be odds.&quot;);\n            }\n        else {\n            System.out.println(&quot;Please pick either odds or evens!&quot;);\n        }\n        \n        System.out.println(&quot;-----------------------------------------------------------&quot;);\n        System.out.println(&quot;How many \\&quot;fingers\\&quot; do you put out?&quot;);\n        int userNumber = input.nextInt();\n\n        Random rand = new Random();\n        int computer = rand.nextInt(6);\n        System.out.println(&quot;The computer plays number &quot;+computer);\n        System.out.println(&quot;-----------------------------------------------------------&quot;);\n        int sum = computer + userNumber;\n        System.out.println(&quot;The sum is &quot;+ sum);\n\n        boolean oddOrEven = sum % 2 == 0;\n\n        if (oddOrEven) {\n            if (name2.equals(&quot;E&quot;)) {\n                System.out.println(sum+&quot; is even..!&quot;);\n                System.out.println(name+&quot; wins!&quot;);\n            } else if (name2.equals(&quot;O&quot;)) {\n                System.out.println(sum+&quot; is odd..!&quot;);\n                System.out.println(&quot;The computer wins!&quot;);\n            }\n        else {\n                System.out.println(sum+&quot; is odd..!&quot;);\n                if (name2.equals(&quot;E&quot;)) {\n                    System.out.println(&quot;The computer wins!&quot;);\n                } else if (name2.equals(&quot;O&quot;)) {\n                    System.out.println(name+&quot; wins!&quot;);\n                 }\n            }\n        }\n        System.out.println(&quot;-----------------------------------------------------------&quot;);\n    }\n}\n</code></pre>\n"},{"tags":["java","multithreading","singleton","synchronized"],"comments":[{"owner":{"account_id":6651855,"reputation":224830,"user_id":5133585,"accept_rate":96,"display_name":"Sweeper"},"score":1,"creation_date":1637399327,"post_id":70044504,"comment_id":123819947,"body_markdown":"An exception is only thrown if `instance` is not null, but you are not setting `instance` to anything in either thread as far as I can see. Why did you expect to see an exception? Can you describe it step-by-step?","body":"An exception is only thrown if <code>instance</code> is not null, but you are not setting <code>instance</code> to anything in either thread as far as I can see. Why did you expect to see an exception? Can you describe it step-by-step?"}],"answers":[{"tags":[],"owner":{"account_id":13429972,"reputation":1807,"user_id":9690075,"display_name":"zysaaa"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1637399573,"creation_date":1637399573,"answer_id":70044613,"question_id":70044504,"body_markdown":"&gt; If the synchronized block in constructor are really getting synchronised then I should be seeing some exception. But that is not happening.\r\n\r\nIn your  ```constructor``` method,  ```instance != null``` will always return false because ```instace``` is never assigned.\r\n\r\nYou can add ```instance = this```, in this case, only one thread can construct an instance through reflection, and the others will get a exception:\r\n\r\n```\r\n       private TestClass() {\r\n            synchronized (TestClass.class) {\r\n                for (int i = 0; i &lt; 100000; i++) ;\r\n                if (instance != null) {\r\n                    throw new RuntimeException(&quot;Operation not allowed. Use getInstance method.&quot;);\r\n                }\r\n                instance = this;\r\n            }\r\n        }\r\n```","title":"Will synchronized block in constructor of singleton calls synchronise the threads in Java?","body":"<blockquote>\n<p>If the synchronized block in constructor are really getting synchronised then I should be seeing some exception. But that is not happening.</p>\n</blockquote>\n<p>In your  <code>constructor</code> method,  <code>instance != null</code> will always return false because <code>instace</code> is never assigned.</p>\n<p>You can add <code>instance = this</code>, in this case, only one thread can construct an instance through reflection, and the others will get a exception:</p>\n<pre><code>       private TestClass() {\n            synchronized (TestClass.class) {\n                for (int i = 0; i &lt; 100000; i++) ;\n                if (instance != null) {\n                    throw new RuntimeException(&quot;Operation not allowed. Use getInstance method.&quot;);\n                }\n                instance = this;\n            }\n        }\n</code></pre>\n"}],"owner":{"account_id":6742230,"reputation":145,"user_id":5195090,"accept_rate":60,"display_name":"Abhishek Verma"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":70,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":70044613,"answer_count":1,"score":0,"last_activity_date":1637399573,"creation_date":1637398322,"question_id":70044504,"body_markdown":"I was trying something crazy :p\r\n\r\nCreated a TestClass (following singleton design pattern)\r\nA main method which initialise the reflection for TestClass and starts two thread which creates TestClass new instance using reflections.\r\n\r\nBelow is the code\r\n\r\n\r\n```java\r\nimport java.io.*;\r\nimport java.lang.reflect.Constructor;\r\nimport java.lang.reflect.InvocationTargetException;\r\n\r\npublic class SingletonPattern {\r\n    public static void main(String[] args) throws InterruptedException, IOException, ClassNotFoundException, NoSuchMethodException, IllegalAccessException, InvocationTargetException, InstantiationException {\r\n        final TestClass[] i1 = {null};\r\n        final TestClass[] i2 = {null};\r\n\r\n        final Constructor&lt;TestClass&gt; constructor = TestClass.class.getDeclaredConstructor();\r\n        constructor.setAccessible(true);\r\n\r\n        Thread t3 = new Thread() {\r\n            @Override\r\n            public void run() {\r\n                try {\r\n                    i1[0] = constructor.newInstance();\r\n                } catch (Exception e) {\r\n                    e.printStackTrace();\r\n                }\r\n            }\r\n        };\r\n        Thread t4 = new Thread() {\r\n            @Override\r\n            public void run() {\r\n                try {\r\n                    i2[0] = constructor.newInstance();\r\n                } catch (Exception e) {\r\n                    e.printStackTrace();\r\n                }\r\n            }\r\n        };\r\n\r\n        t3.start();\r\n        t4.start();\r\n        t3.join();\r\n        t4.join();\r\n        System.out.println((i1[0] == i2[0]) + &quot;  &quot; + i2[0].equals(i1[0]));\r\n    }\r\n\r\n\r\n    static class TestClass implements Cloneable, Serializable{\r\n        private static TestClass instance;\r\n        private static final Object obj = new Object();\r\n\r\n        private TestClass() {\r\n            synchronized (TestClass.class) {\r\n                for (int i = 0; i &lt; 100000; i++) ;\r\n                if (instance != null) {\r\n                    throw new RuntimeException(&quot;Operation not allowed. Use getInstance method.&quot;);\r\n                }\r\n            }\r\n        }\r\n\r\n        public static TestClass getInstance() {\r\n            if (instance == null) {\r\n                synchronized (TestClass.class) {\r\n                    if (instance == null) {\r\n                        for (int i = 0; i &lt; 100000; i++) ;\r\n                        instance = new TestClass();\r\n                    }\r\n                }\r\n            }\r\n            return instance;\r\n        }\r\n\r\n        public static TestClass getClone() {\r\n            try {\r\n                return (TestClass) instance.clone();\r\n            } catch (CloneNotSupportedException e) {\r\n                e.printStackTrace();\r\n            }\r\n            return null;\r\n        }\r\n\r\n        @Override\r\n        protected Object clone() throws CloneNotSupportedException {\r\n            return instance;\r\n        }\r\n\r\n        private Object readResolve() {\r\n            return getInstance();\r\n        }\r\n    }\r\n}\r\n```\r\n\r\nOutput which I am getting\r\n\r\n`false false`\r\n\r\nIf the synchronized block in constructor are really getting synchronised then I should be seeing some exception. But that is not happening.\r\n\r\nCan anyone explain why its happing like this?\r\nI am using Java version : corretto-1.8.0_282 \r\n","title":"Will synchronized block in constructor of singleton calls synchronise the threads in Java?","body":"<p>I was trying something crazy :p</p>\n<p>Created a TestClass (following singleton design pattern)\nA main method which initialise the reflection for TestClass and starts two thread which creates TestClass new instance using reflections.</p>\n<p>Below is the code</p>\n<pre class=\"lang-java prettyprint-override\"><code>import java.io.*;\nimport java.lang.reflect.Constructor;\nimport java.lang.reflect.InvocationTargetException;\n\npublic class SingletonPattern {\n    public static void main(String[] args) throws InterruptedException, IOException, ClassNotFoundException, NoSuchMethodException, IllegalAccessException, InvocationTargetException, InstantiationException {\n        final TestClass[] i1 = {null};\n        final TestClass[] i2 = {null};\n\n        final Constructor&lt;TestClass&gt; constructor = TestClass.class.getDeclaredConstructor();\n        constructor.setAccessible(true);\n\n        Thread t3 = new Thread() {\n            @Override\n            public void run() {\n                try {\n                    i1[0] = constructor.newInstance();\n                } catch (Exception e) {\n                    e.printStackTrace();\n                }\n            }\n        };\n        Thread t4 = new Thread() {\n            @Override\n            public void run() {\n                try {\n                    i2[0] = constructor.newInstance();\n                } catch (Exception e) {\n                    e.printStackTrace();\n                }\n            }\n        };\n\n        t3.start();\n        t4.start();\n        t3.join();\n        t4.join();\n        System.out.println((i1[0] == i2[0]) + &quot;  &quot; + i2[0].equals(i1[0]));\n    }\n\n\n    static class TestClass implements Cloneable, Serializable{\n        private static TestClass instance;\n        private static final Object obj = new Object();\n\n        private TestClass() {\n            synchronized (TestClass.class) {\n                for (int i = 0; i &lt; 100000; i++) ;\n                if (instance != null) {\n                    throw new RuntimeException(&quot;Operation not allowed. Use getInstance method.&quot;);\n                }\n            }\n        }\n\n        public static TestClass getInstance() {\n            if (instance == null) {\n                synchronized (TestClass.class) {\n                    if (instance == null) {\n                        for (int i = 0; i &lt; 100000; i++) ;\n                        instance = new TestClass();\n                    }\n                }\n            }\n            return instance;\n        }\n\n        public static TestClass getClone() {\n            try {\n                return (TestClass) instance.clone();\n            } catch (CloneNotSupportedException e) {\n                e.printStackTrace();\n            }\n            return null;\n        }\n\n        @Override\n        protected Object clone() throws CloneNotSupportedException {\n            return instance;\n        }\n\n        private Object readResolve() {\n            return getInstance();\n        }\n    }\n}\n</code></pre>\n<p>Output which I am getting</p>\n<p><code>false false</code></p>\n<p>If the synchronized block in constructor are really getting synchronised then I should be seeing some exception. But that is not happening.</p>\n<p>Can anyone explain why its happing like this?\nI am using Java version : corretto-1.8.0_282</p>\n"},{"tags":["java","string"],"answers":[{"tags":[],"owner":{"account_id":11409023,"reputation":656,"user_id":8363706,"display_name":"Alex"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1637396852,"creation_date":1637396852,"answer_id":70044348,"question_id":70044285,"body_markdown":"For example:\r\n\r\n    String s = &quot;Chocolate:30:2&quot;;\r\n    String number = s.split(&quot;:&quot;)[2];","title":"JAVA - How to get text after a particular character?","body":"<p>For example:</p>\n<pre><code>String s = &quot;Chocolate:30:2&quot;;\nString number = s.split(&quot;:&quot;)[2];\n</code></pre>\n"},{"tags":[],"owner":{"account_id":162699,"reputation":138060,"user_id":3788176,"accept_rate":54,"display_name":"Andy Turner"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1637397077,"creation_date":1637397077,"answer_id":70044363,"question_id":70044285,"body_markdown":"If the second colon is actually the last colon, you can use:\r\n\r\n```\r\nString after = str.substring(1 + str.lastIndexOf(&#39;:&#39;));\r\n```","title":"JAVA - How to get text after a particular character?","body":"<p>If the second colon is actually the last colon, you can use:</p>\n<pre><code>String after = str.substring(1 + str.lastIndexOf(':'));\n</code></pre>\n"},{"tags":[],"owner":{"account_id":15735634,"reputation":34,"user_id":11354683,"display_name":"miladev95"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1637398702,"creation_date":1637398702,"answer_id":70044539,"question_id":70044285,"body_markdown":"You can use String lastIndexOf method.\r\n\r\n    String result = str.substring(str.lastIndexOf(&#39;:&#39;) + 1);","title":"JAVA - How to get text after a particular character?","body":"<p>You can use String lastIndexOf method.</p>\n<pre><code>String result = str.substring(str.lastIndexOf(':') + 1);\n</code></pre>\n"}],"owner":{"account_id":11986463,"reputation":186,"user_id":8770853,"display_name":"HARSH ASHRA"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":261,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"accepted_answer_id":70044348,"answer_count":3,"score":0,"last_activity_date":1637398702,"creation_date":1637396288,"question_id":70044285,"body_markdown":"I have a String `Chocolate:30:2` in a variable and I want to extract the number after the second colon i.e. `2`. So, How can I extract that number?  ","title":"JAVA - How to get text after a particular character?","body":"<p>I have a String <code>Chocolate:30:2</code> in a variable and I want to extract the number after the second colon i.e. <code>2</code>. So, How can I extract that number?</p>\n"},{"tags":["java","debugging","gradle","intellij-idea","breakpoints"],"comments":[{"owner":{"account_id":15663576,"reputation":2342,"user_id":11301941,"display_name":"George"},"score":0,"creation_date":1637397674,"post_id":70041667,"comment_id":123819724,"body_markdown":"Java 17 support start with gradle 7.3 , for full information about [compatibility](https://docs.gradle.org/current/userguide/compatibility.html).","body":"Java 17 support start with gradle 7.3 , for full information about <a href=\"https://docs.gradle.org/current/userguide/compatibility.html\" rel=\"nofollow noreferrer\">compatibility</a>."},{"owner":{"account_id":22396015,"reputation":5,"user_id":16607276,"display_name":"ExplainSpringMagicToMePls"},"score":0,"creation_date":1637406847,"post_id":70041667,"comment_id":123821213,"body_markdown":"nope, did not work. Changed gradle in gradle/wrapper to 7.3 and it still does not stop on breakpoint. Would really like if you tried my project though. And yeah, it is fresh Intellij install.","body":"nope, did not work. Changed gradle in gradle/wrapper to 7.3 and it still does not stop on breakpoint. Would really like if you tried my project though. And yeah, it is fresh Intellij install."}],"owner":{"account_id":22396015,"reputation":5,"user_id":16607276,"display_name":"ExplainSpringMagicToMePls"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":306,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":0,"score":0,"last_activity_date":1637397612,"creation_date":1637361577,"question_id":70041667,"body_markdown":"I have composite gradle project that looks like this:\r\n\r\nrootProject (basically just wrapper for other projects)  \r\n-project1  \r\n--build.gradle  \r\n--settings.gradle  \r\n-project2  \r\n--build.gradle  \r\n--settings.gradle  \r\n...  \r\n-build.gradle  \r\n-settings.gradle  \r\n\r\nin outer settings.gradle file i connect all my projects so they compile with gradle&#39;s includeBuild method.  Outer build.gradle file is basically empty.\r\n\r\nSo my problem is following. If i run tests in debug mode in project1/project2... it won&#39;t stop on breakpoints if my gradle settings (in intellij) are configured to build and run/ run tests using Gradle. If i use Intellij it is working fine. Also running tests with code coverage doesn&#39;t work too, tests are being run but they dont result in code coverage info. And yes, this problem occurs only with tests, if i create breakpoint in main function it is working properly.\r\n\r\nI use gradle 7.2 and java 17.\r\n\r\nEdit: i created simple gradle project, funny enough i can&#39;t debug main here too. (it won&#39;t stop on breakpoint) \r\n \r\nhttps://github.com/andriiromaniuk/gradleTest\r\n\r\n[build and run settings that needs to be changed so tests are debugable][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/v49v0.png","title":"Intellij won&#39;t stop on breakpoints if i build and run using gradle","body":"<p>I have composite gradle project that looks like this:</p>\n<p>rootProject (basically just wrapper for other projects)<br />\n-project1<br />\n--build.gradle<br />\n--settings.gradle<br />\n-project2<br />\n--build.gradle<br />\n--settings.gradle<br />\n...<br />\n-build.gradle<br />\n-settings.gradle</p>\n<p>in outer settings.gradle file i connect all my projects so they compile with gradle's includeBuild method.  Outer build.gradle file is basically empty.</p>\n<p>So my problem is following. If i run tests in debug mode in project1/project2... it won't stop on breakpoints if my gradle settings (in intellij) are configured to build and run/ run tests using Gradle. If i use Intellij it is working fine. Also running tests with code coverage doesn't work too, tests are being run but they dont result in code coverage info. And yes, this problem occurs only with tests, if i create breakpoint in main function it is working properly.</p>\n<p>I use gradle 7.2 and java 17.</p>\n<p>Edit: i created simple gradle project, funny enough i can't debug main here too. (it won't stop on breakpoint)</p>\n<p><a href=\"https://github.com/andriiromaniuk/gradleTest\" rel=\"nofollow noreferrer\">https://github.com/andriiromaniuk/gradleTest</a></p>\n<p><a href=\"https://i.stack.imgur.com/v49v0.png\" rel=\"nofollow noreferrer\">build and run settings that needs to be changed so tests are debugable</a></p>\n"},{"tags":["java","spring","spring-boot","tomcat","web-deployment"],"comments":[{"owner":{"account_id":2994830,"reputation":1,"user_id":2541560,"display_name":"Kayaman"},"score":0,"creation_date":1637393954,"post_id":70044050,"comment_id":123819155,"body_markdown":"Of course, you&#39;ll just need to get the data somehow from the other spring application. Whether it&#39;s through REST or some other technology.","body":"Of course, you&#39;ll just need to get the data somehow from the other spring application. Whether it&#39;s through REST or some other technology."},{"owner":{"account_id":13254021,"reputation":3,"user_id":9570710,"display_name":"Tuqa"},"score":0,"creation_date":1637398048,"post_id":70044050,"comment_id":123819776,"body_markdown":"Thank you, Do I need any deployment ?","body":"Thank you, Do I need any deployment ?"}],"answers":[{"tags":[],"owner":{"account_id":12714208,"reputation":49,"user_id":9236852,"display_name":"hani"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1637396855,"creation_date":1637396855,"answer_id":70044349,"question_id":70044050,"body_markdown":"Yes you can do this by creating an application as an API service and sending your data and information from others to it as mentioned above like RestApi","title":"Is there a way to create a spring boot client app to read data from another Spring boot app?","body":"<p>Yes you can do this by creating an application as an API service and sending your data and information from others to it as mentioned above like RestApi</p>\n"}],"owner":{"account_id":13254021,"reputation":3,"user_id":9570710,"display_name":"Tuqa"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":177,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":70044349,"answer_count":1,"score":0,"last_activity_date":1637396855,"creation_date":1637393548,"question_id":70044050,"body_markdown":"I want to create spring boot application work as a client contains JSP files and a view controller reads the data from another spring boot application as server-side.\r\n\r\nThe server-side application work with the database using JPA.\r\n\r\nIs there any way or resource to achieve this?","title":"Is there a way to create a spring boot client app to read data from another Spring boot app?","body":"<p>I want to create spring boot application work as a client contains JSP files and a view controller reads the data from another spring boot application as server-side.</p>\n<p>The server-side application work with the database using JPA.</p>\n<p>Is there any way or resource to achieve this?</p>\n"},{"tags":["java","logging","sonarqube","mapstruct"],"comments":[{"owner":{"account_id":9504657,"reputation":7440,"user_id":7064617,"display_name":"JCompetence"},"score":0,"creation_date":1637327140,"post_id":70035155,"comment_id":123803149,"body_markdown":"Or see this https://stackoverflow.com/questions/28720845/logging-from-default-interface-methods","body":"Or see this <a href=\"https://stackoverflow.com/questions/28720845/logging-from-default-interface-methods\" title=\"logging from default interface methods\">stackoverflow.com/questions/28720845/&hellip;</a>"},{"owner":{"account_id":22819063,"reputation":3,"user_id":16969224,"display_name":"0c7"},"score":0,"creation_date":1637348368,"post_id":70035155,"comment_id":123811276,"body_markdown":"I tried it, sonar doesn&#39;t like it either","body":"I tried it, sonar doesn&#39;t like it either"}],"answers":[{"tags":[],"owner":{"account_id":1128956,"reputation":19765,"user_id":1115491,"display_name":"Filip"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1637394595,"creation_date":1637394595,"answer_id":70044131,"question_id":70035155,"body_markdown":"You can always suppress the particular sonar rule for your mapper.\r\nIf you can&#39;t do that then you could use an `abstract` class instead of an interface.\r\n\r\ne.g.\r\n\r\n```\r\n@Mapper(unmappedTargetPolicy = ReportingPolicy.WARN, componentModel=&quot;spring&quot;, nullValueCheckStrategy = NullValueCheckStrategy.ALWAYS)\r\npublic abstract class ContractMapper {\r\n\r\n    protected static final Logger LOGGER = LogManager.getLogger(ContractMapper.class);\r\n\r\n//...\r\n}\r\n```\r\n","title":"How to add a logger in mapstruct without having Sonar yelling at me?","body":"<p>You can always suppress the particular sonar rule for your mapper.\nIf you can't do that then you could use an <code>abstract</code> class instead of an interface.</p>\n<p>e.g.</p>\n<pre><code>@Mapper(unmappedTargetPolicy = ReportingPolicy.WARN, componentModel=&quot;spring&quot;, nullValueCheckStrategy = NullValueCheckStrategy.ALWAYS)\npublic abstract class ContractMapper {\n\n    protected static final Logger LOGGER = LogManager.getLogger(ContractMapper.class);\n\n//...\n}\n</code></pre>\n"}],"owner":{"account_id":22819063,"reputation":3,"user_id":16969224,"display_name":"0c7"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2129,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1637396400,"creation_date":1637326396,"question_id":70035155,"body_markdown":"In a mapper interface , I have created a default method to map a string to an enum using a bunch of switch/case.\r\n\r\n\r\n\r\n    \r\n    @Mapper(unmappedTargetPolicy = ReportingPolicy.WARN, componentModel=&quot;spring&quot;, nullValueCheckStrategy = NullValueCheckStrategy.ALWAYS)\r\n    public interface ContractMapper {\r\n\r\n\tLogger LOGGER = LogManager.getLogger(ContractMapper.class);\r\n\r\n    all the mappingstuff...\r\n\r\n    @Named(&quot;getEnum&quot;)\r\n\tdefault statusEnum getStatusEnum(String status){\r\n\t\r\n\t\tif (status == null){\r\n\t\t\treturn statusEnum.NoStatus;\r\n\t\t} else {\r\n\r\n\t\t\tswitch (status) {\r\n\t\t\tcase ...\r\n\r\n\t\t\tdefault:\r\n\t\t\t\tLOGGER.warn(&quot;unknown  status {}&quot;, status);\r\n\t\t\t\treturn statusEnum.NoStatus;\r\n\t\r\n\r\n\t\t\t}\r\n\t\t}\r\n\r\n\r\nI need a logger for when the mapping fail, is there a way to have one without sonar yelling at me because it is not private?","title":"How to add a logger in mapstruct without having Sonar yelling at me?","body":"<p>In a mapper interface , I have created a default method to map a string to an enum using a bunch of switch/case.</p>\n<pre><code>@Mapper(unmappedTargetPolicy = ReportingPolicy.WARN, componentModel=&quot;spring&quot;, nullValueCheckStrategy = NullValueCheckStrategy.ALWAYS)\npublic interface ContractMapper {\n\nLogger LOGGER = LogManager.getLogger(ContractMapper.class);\n\nall the mappingstuff...\n\n@Named(&quot;getEnum&quot;)\ndefault statusEnum getStatusEnum(String status){\n\n    if (status == null){\n        return statusEnum.NoStatus;\n    } else {\n\n        switch (status) {\n        case ...\n\n        default:\n            LOGGER.warn(&quot;unknown  status {}&quot;, status);\n            return statusEnum.NoStatus;\n\n\n        }\n    }\n</code></pre>\n<p>I need a logger for when the mapping fail, is there a way to have one without sonar yelling at me because it is not private?</p>\n"},{"tags":["java","generics","refactoring","instanceof","maintainability"],"answers":[{"tags":[],"owner":{"account_id":14010051,"reputation":1143,"user_id":10118965,"display_name":"davidalayachew"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1637395715,"creation_date":1637395715,"answer_id":70044236,"question_id":69992871,"body_markdown":"If maintainability is your goal, then I think you could group some things together to keep things simple and easy to change. Please note - I removed Lombok, as I have trouble getting it to work on my machine. I also removed static functionality, as that doesn&#39;t seem necessary for your use case.\r\n\r\n**GenericValue\\&lt;T\\&gt;**\r\n```\r\npublic abstract class GenericValue&lt;T&gt;\r\n{\r\n\r\n   private T value;\r\n   \r\n   public GenericValue(T value)\r\n   {\r\n   \r\n      this.value = value;\r\n   \r\n   }\r\n\r\n   public GenericValue(GenericValue&lt;?&gt; value)\r\n   {\r\n   \r\n      this.value = convert(value);\r\n   \r\n   }\r\n\r\n   public T getValue()\r\n   {\r\n   \r\n      return this.value;\r\n   \r\n   }\r\n   \r\n   public abstract T convert(GenericValue&lt;?&gt; inputType);\r\n\r\n   public static void main(String[] args)\r\n   {\r\n   \r\n      GenericValue&lt;String&gt; input = new StringValue(&quot;123&quot;); // input value\r\n      \r\n      {\r\n      \r\n         GenericValue&lt;Float&gt; output = new FloatValue(input);\r\n      \r\n         Float result = output.getValue();\r\n      \r\n         System.out.println(result);\r\n      \r\n      }\r\n      \r\n      {\r\n      \r\n         GenericValue&lt;Integer&gt; output = new IntegerValue(input);\r\n      \r\n         Integer result = output.getValue();\r\n      \r\n         System.out.println(result);\r\n      \r\n      }\r\n      \r\n   }\r\n\r\n}\r\n\r\n```\r\n\r\n~\r\n\r\n**IntegerValue**\r\n```\r\npublic class IntegerValue extends GenericValue&lt;Integer&gt;\r\n{\r\n\r\n   public IntegerValue(Integer value)\r\n   {\r\n      super(value);\r\n   }\r\n   \r\n   public IntegerValue(GenericValue&lt;?&gt; value)\r\n   {\r\n      super(value);\r\n   }\r\n   \r\n   public Integer convert(GenericValue&lt;?&gt; inputType)\r\n   {\r\n   \r\n      if (inputType instanceof IntegerValue)\r\n      {\r\n      \r\n         IntegerValue temp = ((IntegerValue) inputType);\r\n      \r\n         return (temp.getValue());\r\n      \r\n      }\r\n      \r\n      else if (inputType instanceof StringValue)\r\n      {\r\n      \r\n         StringValue temp = (StringValue) inputType;\r\n      \r\n         return (Integer.parseInt(temp.getValue()));\r\n      \r\n      }\r\n      \r\n      else if (inputType instanceof FloatValue)\r\n      {\r\n      \r\n         FloatValue temp = (FloatValue) inputType;\r\n      \r\n         return (temp.getValue().intValue());\r\n      \r\n      }\r\n      \r\n      else\r\n      {\r\n      \r\n         throw new IllegalArgumentException(&quot;Impossible to convert a &quot; + inputType.getClass().getName() + &quot; to &quot; + this.getClass().getSimpleName());\r\n      \r\n      }\r\n      \r\n   }\r\n\r\n}\r\n```\r\n\r\n~\r\n\r\n**FloatValue**\r\n```\r\npublic class FloatValue extends GenericValue&lt;Float&gt;\r\n{\r\n\r\n   public FloatValue(Float value)\r\n   {\r\n      super(value);\r\n   }\r\n\r\n   public FloatValue(GenericValue&lt;?&gt; value)\r\n   {\r\n      super(value);\r\n   }\r\n   \r\n   public Float convert(GenericValue&lt;?&gt; inputType)\r\n   {\r\n   \r\n      if (inputType instanceof IntegerValue)\r\n      {\r\n      \r\n         IntegerValue temp = (IntegerValue) inputType;\r\n      \r\n         return Float.valueOf(temp.getValue().floatValue());\r\n      \r\n      }\r\n      \r\n      else if (inputType instanceof StringValue)\r\n      {\r\n      \r\n         StringValue temp = (StringValue) inputType;\r\n      \r\n         return Float.parseFloat(temp.getValue());\r\n      \r\n      }\r\n      \r\n      else if (inputType instanceof FloatValue)\r\n      {\r\n      \r\n         FloatValue temp = (FloatValue) inputType;\r\n      \r\n         return temp.getValue();\r\n      \r\n      }\r\n      \r\n      else\r\n      {\r\n      \r\n         throw new IllegalArgumentException(&quot;Impossible to convert a &quot; + inputType.getClass().getName() + &quot; to &quot; + this.getClass().getSimpleName());\r\n      \r\n      }\r\n   \r\n   }\r\n\r\n}\r\n```\r\n\r\n~\r\n\r\n**StringValue**\r\n```\r\npublic class StringValue extends GenericValue&lt;String&gt;\r\n{\r\n\r\n   public StringValue(String value)\r\n   {\r\n      super(value);\r\n   }\r\n\r\n   public StringValue(GenericValue&lt;?&gt; value)\r\n   {\r\n      super(value);\r\n   }\r\n\r\n   public String convert(GenericValue&lt;?&gt; inputType)\r\n   {\r\n   \r\n      if (inputType instanceof IntegerValue || inputType instanceof FloatValue || inputType instanceof StringValue)\r\n      {\r\n      \r\n         String string = String.valueOf(inputType.getValue());\r\n      \r\n         return (string);\r\n      \r\n      }\r\n      \r\n      else\r\n      {\r\n      \r\n         throw new IllegalArgumentException(&quot;Impossible to convert a &quot; + inputType.getClass().getName() + &quot; to &quot; + this.getClass().getSimpleName());\r\n      \r\n      }\r\n      \r\n   }\r\n\r\n}\r\n```\r\n\r\n~\r\n\r\n**DateValue**\r\n```\r\nimport java.time.LocalDate;\r\n\r\npublic class DateValue extends GenericValue&lt;LocalDate&gt;\r\n{\r\n\r\n   public DateValue(LocalDate value)\r\n   {\r\n      super(value);\r\n   }\r\n\r\n   public DateValue(GenericValue&lt;?&gt; value)\r\n   {\r\n      super(value);\r\n   }\r\n   \r\n   public LocalDate convert(GenericValue&lt;?&gt; inputType)\r\n   {\r\n   \r\n      if (inputType instanceof StringValue)\r\n      {\r\n      \r\n         StringValue temp = ((StringValue) inputType);\r\n      \r\n         return LocalDate.parse(temp.getValue());\r\n      \r\n      }\r\n      \r\n      else if (inputType instanceof DateValue)\r\n      {\r\n      \r\n         DateValue temp = (DateValue) inputType;\r\n      \r\n         return temp.getValue();\r\n      \r\n      }\r\n      \r\n      else\r\n      {\r\n      \r\n         throw new IllegalArgumentException(&quot;Impossible to convert a &quot; + inputType.getClass().getName() + &quot; to &quot; + this.getClass().getSimpleName());\r\n      \r\n      }\r\n   \r\n   }\r\n\r\n}\r\n```\r\n\r\n~\r\n\r\n**TimestampValue**\r\n```\r\nimport java.time.ZonedDateTime;\r\n\r\npublic class TimestampValue extends GenericValue&lt;ZonedDateTime&gt;\r\n{\r\n\r\n   public TimestampValue(ZonedDateTime value)\r\n   {\r\n      super(value);\r\n   }\r\n\r\n   public TimestampValue(GenericValue&lt;?&gt; value)\r\n   {\r\n      super(value);\r\n   }\r\n   \r\n   public ZonedDateTime convert(GenericValue&lt;?&gt; inputType)\r\n   {\r\n   \r\n      if (inputType instanceof StringValue)\r\n      {\r\n      \r\n         StringValue temp = ((StringValue) inputType);\r\n      \r\n         return ZonedDateTime.parse(temp.getValue());\r\n      \r\n      }\r\n      \r\n      else if (inputType instanceof TimestampValue)\r\n      {\r\n      \r\n         TimestampValue temp = (TimestampValue) inputType;\r\n      \r\n         return temp.getValue();\r\n      \r\n      }\r\n      \r\n      else\r\n      {\r\n      \r\n         throw new IllegalArgumentException(&quot;Impossible to convert a &quot; + inputType.getClass().getName() + &quot; to &quot; + this.getClass().getSimpleName());\r\n      \r\n      }\r\n   \r\n   }\r\n\r\n}\r\n```","title":"Refactoring instanceof","body":"<p>If maintainability is your goal, then I think you could group some things together to keep things simple and easy to change. Please note - I removed Lombok, as I have trouble getting it to work on my machine. I also removed static functionality, as that doesn't seem necessary for your use case.</p>\n<p><strong>GenericValue&lt;T&gt;</strong></p>\n<pre><code>public abstract class GenericValue&lt;T&gt;\n{\n\n   private T value;\n   \n   public GenericValue(T value)\n   {\n   \n      this.value = value;\n   \n   }\n\n   public GenericValue(GenericValue&lt;?&gt; value)\n   {\n   \n      this.value = convert(value);\n   \n   }\n\n   public T getValue()\n   {\n   \n      return this.value;\n   \n   }\n   \n   public abstract T convert(GenericValue&lt;?&gt; inputType);\n\n   public static void main(String[] args)\n   {\n   \n      GenericValue&lt;String&gt; input = new StringValue(&quot;123&quot;); // input value\n      \n      {\n      \n         GenericValue&lt;Float&gt; output = new FloatValue(input);\n      \n         Float result = output.getValue();\n      \n         System.out.println(result);\n      \n      }\n      \n      {\n      \n         GenericValue&lt;Integer&gt; output = new IntegerValue(input);\n      \n         Integer result = output.getValue();\n      \n         System.out.println(result);\n      \n      }\n      \n   }\n\n}\n\n</code></pre>\n<p>~</p>\n<p><strong>IntegerValue</strong></p>\n<pre><code>public class IntegerValue extends GenericValue&lt;Integer&gt;\n{\n\n   public IntegerValue(Integer value)\n   {\n      super(value);\n   }\n   \n   public IntegerValue(GenericValue&lt;?&gt; value)\n   {\n      super(value);\n   }\n   \n   public Integer convert(GenericValue&lt;?&gt; inputType)\n   {\n   \n      if (inputType instanceof IntegerValue)\n      {\n      \n         IntegerValue temp = ((IntegerValue) inputType);\n      \n         return (temp.getValue());\n      \n      }\n      \n      else if (inputType instanceof StringValue)\n      {\n      \n         StringValue temp = (StringValue) inputType;\n      \n         return (Integer.parseInt(temp.getValue()));\n      \n      }\n      \n      else if (inputType instanceof FloatValue)\n      {\n      \n         FloatValue temp = (FloatValue) inputType;\n      \n         return (temp.getValue().intValue());\n      \n      }\n      \n      else\n      {\n      \n         throw new IllegalArgumentException(&quot;Impossible to convert a &quot; + inputType.getClass().getName() + &quot; to &quot; + this.getClass().getSimpleName());\n      \n      }\n      \n   }\n\n}\n</code></pre>\n<p>~</p>\n<p><strong>FloatValue</strong></p>\n<pre><code>public class FloatValue extends GenericValue&lt;Float&gt;\n{\n\n   public FloatValue(Float value)\n   {\n      super(value);\n   }\n\n   public FloatValue(GenericValue&lt;?&gt; value)\n   {\n      super(value);\n   }\n   \n   public Float convert(GenericValue&lt;?&gt; inputType)\n   {\n   \n      if (inputType instanceof IntegerValue)\n      {\n      \n         IntegerValue temp = (IntegerValue) inputType;\n      \n         return Float.valueOf(temp.getValue().floatValue());\n      \n      }\n      \n      else if (inputType instanceof StringValue)\n      {\n      \n         StringValue temp = (StringValue) inputType;\n      \n         return Float.parseFloat(temp.getValue());\n      \n      }\n      \n      else if (inputType instanceof FloatValue)\n      {\n      \n         FloatValue temp = (FloatValue) inputType;\n      \n         return temp.getValue();\n      \n      }\n      \n      else\n      {\n      \n         throw new IllegalArgumentException(&quot;Impossible to convert a &quot; + inputType.getClass().getName() + &quot; to &quot; + this.getClass().getSimpleName());\n      \n      }\n   \n   }\n\n}\n</code></pre>\n<p>~</p>\n<p><strong>StringValue</strong></p>\n<pre><code>public class StringValue extends GenericValue&lt;String&gt;\n{\n\n   public StringValue(String value)\n   {\n      super(value);\n   }\n\n   public StringValue(GenericValue&lt;?&gt; value)\n   {\n      super(value);\n   }\n\n   public String convert(GenericValue&lt;?&gt; inputType)\n   {\n   \n      if (inputType instanceof IntegerValue || inputType instanceof FloatValue || inputType instanceof StringValue)\n      {\n      \n         String string = String.valueOf(inputType.getValue());\n      \n         return (string);\n      \n      }\n      \n      else\n      {\n      \n         throw new IllegalArgumentException(&quot;Impossible to convert a &quot; + inputType.getClass().getName() + &quot; to &quot; + this.getClass().getSimpleName());\n      \n      }\n      \n   }\n\n}\n</code></pre>\n<p>~</p>\n<p><strong>DateValue</strong></p>\n<pre><code>import java.time.LocalDate;\n\npublic class DateValue extends GenericValue&lt;LocalDate&gt;\n{\n\n   public DateValue(LocalDate value)\n   {\n      super(value);\n   }\n\n   public DateValue(GenericValue&lt;?&gt; value)\n   {\n      super(value);\n   }\n   \n   public LocalDate convert(GenericValue&lt;?&gt; inputType)\n   {\n   \n      if (inputType instanceof StringValue)\n      {\n      \n         StringValue temp = ((StringValue) inputType);\n      \n         return LocalDate.parse(temp.getValue());\n      \n      }\n      \n      else if (inputType instanceof DateValue)\n      {\n      \n         DateValue temp = (DateValue) inputType;\n      \n         return temp.getValue();\n      \n      }\n      \n      else\n      {\n      \n         throw new IllegalArgumentException(&quot;Impossible to convert a &quot; + inputType.getClass().getName() + &quot; to &quot; + this.getClass().getSimpleName());\n      \n      }\n   \n   }\n\n}\n</code></pre>\n<p>~</p>\n<p><strong>TimestampValue</strong></p>\n<pre><code>import java.time.ZonedDateTime;\n\npublic class TimestampValue extends GenericValue&lt;ZonedDateTime&gt;\n{\n\n   public TimestampValue(ZonedDateTime value)\n   {\n      super(value);\n   }\n\n   public TimestampValue(GenericValue&lt;?&gt; value)\n   {\n      super(value);\n   }\n   \n   public ZonedDateTime convert(GenericValue&lt;?&gt; inputType)\n   {\n   \n      if (inputType instanceof StringValue)\n      {\n      \n         StringValue temp = ((StringValue) inputType);\n      \n         return ZonedDateTime.parse(temp.getValue());\n      \n      }\n      \n      else if (inputType instanceof TimestampValue)\n      {\n      \n         TimestampValue temp = (TimestampValue) inputType;\n      \n         return temp.getValue();\n      \n      }\n      \n      else\n      {\n      \n         throw new IllegalArgumentException(&quot;Impossible to convert a &quot; + inputType.getClass().getName() + &quot; to &quot; + this.getClass().getSimpleName());\n      \n      }\n   \n   }\n\n}\n</code></pre>\n"}],"owner":{"account_id":8414867,"reputation":351,"user_id":6315631,"accept_rate":50,"display_name":"CidTori"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":186,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":1,"score":2,"last_activity_date":1637395715,"creation_date":1637080412,"question_id":69992871,"body_markdown":"On my current project, I need to convert values between types that are only known at runtime: the input type is the JSON type of the input, and the output type is defined in a configuration file loaded at runtime.\r\n\r\nI came up with a generic solution, but I&#39;m not quite happy with it, because supporting new input types means you need to change existing supported output type classes (which goes against the Open/Closed Principle), and I use a lot of `instanceof` and a lot of casting.\r\n\r\nAre there better solutions than what I did in terms of maintainability?\r\n\r\n---\r\n\r\nI tried to get a kind of minimal example of my code, so here it is:\r\n\r\n```java\r\npackage org.example.scratch;\r\n\r\nimport static java.lang.Float.*;\r\nimport static java.lang.Integer.*;\r\n\r\nimport java.time.LocalDate;\r\nimport java.time.ZonedDateTime;\r\n\r\nimport lombok.Value;\r\n\r\nclass Scratch {\r\n    public static void main(String[] args) {\r\n        // runtime values\r\n        final FieldValue value = StringValue.of(&quot;3.14&quot;); // input value\r\n        final Converter&lt;?&gt; converter = FloatConverter.of(); // output type\r\n\r\n        Mapper&lt;?&gt; mapper = Mapper.of(converter);\r\n        FieldValue converted = mapper.convert(value);\r\n        System.out.println(converted);\r\n    }\r\n\r\n    @Value(staticConstructor = &quot;of&quot;)\r\n    static class Mapper&lt;T extends FieldValue&gt; {\r\n        Converter&lt;T&gt; converter;\r\n\r\n        public T convert(FieldValue value) {\r\n            return converter.apply(value);\r\n        }\r\n    }\r\n\r\n    interface Converter&lt;T extends FieldValue&gt; {\r\n        T apply(FieldValue value);\r\n    }\r\n\r\n    @Value(staticConstructor = &quot;of&quot;)\r\n    static class IntegerConverter implements Converter&lt;IntegerValue&gt; {\r\n        @Override\r\n        public IntegerValue apply(FieldValue value) {\r\n            if (value instanceof IntegerValue) {\r\n                return (IntegerValue) value;\r\n            }\r\n\r\n            if (value instanceof FloatValue) {\r\n                return IntegerValue.of(((FloatValue) value).getValue().intValue());\r\n            }\r\n\r\n            if (value instanceof StringValue) {\r\n                return IntegerValue.of(parseInt(((StringValue) value).getValue()));\r\n            }\r\n\r\n            throw new IllegalArgumentException(&quot;Impossible to convert a &quot; + value.getClass().getName() + &quot; to a &quot; + IntegerValue.class.getSimpleName());\r\n        }\r\n    }\r\n\r\n    @Value(staticConstructor = &quot;of&quot;)\r\n    static class FloatConverter implements Converter&lt;FloatValue&gt; {\r\n        @Override\r\n        public FloatValue apply(FieldValue value) {\r\n            if (value instanceof FloatValue) {\r\n                return (FloatValue) value;\r\n            }\r\n\r\n            if (value instanceof IntegerValue) {\r\n                return FloatValue.of(((IntegerValue) value).getValue().floatValue());\r\n            }\r\n\r\n            if (value instanceof StringValue) {\r\n                return FloatValue.of(parseFloat(((StringValue) value).getValue()));\r\n            }\r\n\r\n            throw new IllegalArgumentException(&quot;Impossible to convert a &quot; + value.getClass().getName() + &quot; to a &quot; + FloatValue.class.getSimpleName());\r\n        }\r\n    }\r\n\r\n    @Value(staticConstructor = &quot;of&quot;)\r\n    static class DateConverter implements Converter&lt;DateValue&gt; {\r\n        @Override\r\n        public DateValue apply(FieldValue value) {\r\n            if (value instanceof DateValue) {\r\n                return (DateValue) value;\r\n            }\r\n\r\n            if (value instanceof StringValue) {\r\n                return DateValue.of(LocalDate.parse(((StringValue) value).getValue()));\r\n            }\r\n\r\n            throw new IllegalArgumentException(&quot;Impossible to convert a &quot; + value.getClass().getName() + &quot; to a &quot; + DateValue.class.getSimpleName());\r\n        }\r\n    }\r\n\r\n    @Value(staticConstructor = &quot;of&quot;)\r\n    static class TimestampConverter implements Converter&lt;TimestampValue&gt; {\r\n        @Override\r\n        public TimestampValue apply(FieldValue value) {\r\n            if (value instanceof TimestampValue) {\r\n                return (TimestampValue) value;\r\n            }\r\n\r\n            if (value instanceof StringValue) {\r\n                return TimestampValue.of(ZonedDateTime.parse(((StringValue) value).getValue()));\r\n            }\r\n\r\n            throw new IllegalArgumentException(&quot;Impossible to convert a &quot; + value.getClass().getName() + &quot; to a &quot; + TimestampValue.class.getSimpleName());\r\n        }\r\n    }\r\n\r\n    interface FieldValue {}\r\n\r\n    @Value(staticConstructor = &quot;of&quot;)\r\n    static class IntegerValue implements FieldValue {\r\n        Integer value;\r\n    }\r\n\r\n    @Value(staticConstructor = &quot;of&quot;)\r\n    static class FloatValue implements FieldValue {\r\n        Float value;\r\n    }\r\n\r\n    @Value(staticConstructor = &quot;of&quot;)\r\n    static class DateValue implements FieldValue {\r\n        LocalDate value;\r\n    }\r\n\r\n    @Value(staticConstructor = &quot;of&quot;)\r\n    static class TimestampValue implements FieldValue {\r\n        ZonedDateTime value;\r\n    }\r\n\r\n    @Value(staticConstructor = &quot;of&quot;)\r\n    static class StringValue implements FieldValue {\r\n        String value;\r\n    }\r\n}\r\n```","title":"Refactoring instanceof","body":"<p>On my current project, I need to convert values between types that are only known at runtime: the input type is the JSON type of the input, and the output type is defined in a configuration file loaded at runtime.</p>\n<p>I came up with a generic solution, but I'm not quite happy with it, because supporting new input types means you need to change existing supported output type classes (which goes against the Open/Closed Principle), and I use a lot of <code>instanceof</code> and a lot of casting.</p>\n<p>Are there better solutions than what I did in terms of maintainability?</p>\n<hr />\n<p>I tried to get a kind of minimal example of my code, so here it is:</p>\n<pre class=\"lang-java prettyprint-override\"><code>package org.example.scratch;\n\nimport static java.lang.Float.*;\nimport static java.lang.Integer.*;\n\nimport java.time.LocalDate;\nimport java.time.ZonedDateTime;\n\nimport lombok.Value;\n\nclass Scratch {\n    public static void main(String[] args) {\n        // runtime values\n        final FieldValue value = StringValue.of(&quot;3.14&quot;); // input value\n        final Converter&lt;?&gt; converter = FloatConverter.of(); // output type\n\n        Mapper&lt;?&gt; mapper = Mapper.of(converter);\n        FieldValue converted = mapper.convert(value);\n        System.out.println(converted);\n    }\n\n    @Value(staticConstructor = &quot;of&quot;)\n    static class Mapper&lt;T extends FieldValue&gt; {\n        Converter&lt;T&gt; converter;\n\n        public T convert(FieldValue value) {\n            return converter.apply(value);\n        }\n    }\n\n    interface Converter&lt;T extends FieldValue&gt; {\n        T apply(FieldValue value);\n    }\n\n    @Value(staticConstructor = &quot;of&quot;)\n    static class IntegerConverter implements Converter&lt;IntegerValue&gt; {\n        @Override\n        public IntegerValue apply(FieldValue value) {\n            if (value instanceof IntegerValue) {\n                return (IntegerValue) value;\n            }\n\n            if (value instanceof FloatValue) {\n                return IntegerValue.of(((FloatValue) value).getValue().intValue());\n            }\n\n            if (value instanceof StringValue) {\n                return IntegerValue.of(parseInt(((StringValue) value).getValue()));\n            }\n\n            throw new IllegalArgumentException(&quot;Impossible to convert a &quot; + value.getClass().getName() + &quot; to a &quot; + IntegerValue.class.getSimpleName());\n        }\n    }\n\n    @Value(staticConstructor = &quot;of&quot;)\n    static class FloatConverter implements Converter&lt;FloatValue&gt; {\n        @Override\n        public FloatValue apply(FieldValue value) {\n            if (value instanceof FloatValue) {\n                return (FloatValue) value;\n            }\n\n            if (value instanceof IntegerValue) {\n                return FloatValue.of(((IntegerValue) value).getValue().floatValue());\n            }\n\n            if (value instanceof StringValue) {\n                return FloatValue.of(parseFloat(((StringValue) value).getValue()));\n            }\n\n            throw new IllegalArgumentException(&quot;Impossible to convert a &quot; + value.getClass().getName() + &quot; to a &quot; + FloatValue.class.getSimpleName());\n        }\n    }\n\n    @Value(staticConstructor = &quot;of&quot;)\n    static class DateConverter implements Converter&lt;DateValue&gt; {\n        @Override\n        public DateValue apply(FieldValue value) {\n            if (value instanceof DateValue) {\n                return (DateValue) value;\n            }\n\n            if (value instanceof StringValue) {\n                return DateValue.of(LocalDate.parse(((StringValue) value).getValue()));\n            }\n\n            throw new IllegalArgumentException(&quot;Impossible to convert a &quot; + value.getClass().getName() + &quot; to a &quot; + DateValue.class.getSimpleName());\n        }\n    }\n\n    @Value(staticConstructor = &quot;of&quot;)\n    static class TimestampConverter implements Converter&lt;TimestampValue&gt; {\n        @Override\n        public TimestampValue apply(FieldValue value) {\n            if (value instanceof TimestampValue) {\n                return (TimestampValue) value;\n            }\n\n            if (value instanceof StringValue) {\n                return TimestampValue.of(ZonedDateTime.parse(((StringValue) value).getValue()));\n            }\n\n            throw new IllegalArgumentException(&quot;Impossible to convert a &quot; + value.getClass().getName() + &quot; to a &quot; + TimestampValue.class.getSimpleName());\n        }\n    }\n\n    interface FieldValue {}\n\n    @Value(staticConstructor = &quot;of&quot;)\n    static class IntegerValue implements FieldValue {\n        Integer value;\n    }\n\n    @Value(staticConstructor = &quot;of&quot;)\n    static class FloatValue implements FieldValue {\n        Float value;\n    }\n\n    @Value(staticConstructor = &quot;of&quot;)\n    static class DateValue implements FieldValue {\n        LocalDate value;\n    }\n\n    @Value(staticConstructor = &quot;of&quot;)\n    static class TimestampValue implements FieldValue {\n        ZonedDateTime value;\n    }\n\n    @Value(staticConstructor = &quot;of&quot;)\n    static class StringValue implements FieldValue {\n        String value;\n    }\n}\n</code></pre>\n"},{"tags":["java","spring","spring-boot","mapstruct"],"answers":[{"tags":[],"owner":{"account_id":1128956,"reputation":19765,"user_id":1115491,"display_name":"Filip"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1637395709,"creation_date":1637395709,"answer_id":70044235,"question_id":69952030,"body_markdown":"MapStruct generates code during compilation. This means that it is not possible to ignore certain properties and invoke another mapper for this, because the other mapper already has that implemented .\r\n\r\nAs a new feature we could add something to the `@Mapper` that would basically merge the configuration from the parent mapper.\r\n\r\ne.g.\r\n\r\n```\r\n@Mapper(componentModel = &quot;spring&quot;, nullValueCheckStrategy = NullValueCheckStrategy.ALWAYS,\r\n        nullValuePropertyMappingStrategy = NullValuePropertyMappingStrategy.IGNORE, methodOverrideStrategy = OverrideStrategy.MERGE)\r\npublic abstract class RealAccountMapper extends AccountMapper {\r\n\r\n    @Override\r\n    @Mapping(target = &quot;username&quot;, ignore = true)\r\n    public abstract AccountDto toAccountDtoDefault(Account entity, @Context List&lt;PropertyNode&gt; propertyNodes);\r\n}\r\n```\r\n\r\nThis would mean that if this new `methodOverrideStrategy` (the name is not final) would mean that MapStruct will perform a merge of the annotation on the `toAccountDtoDefault` method.\r\n\r\nFor MapStruct it would be as if the user has written.\r\n\r\n```\r\n    @Named(&quot;dynamicAccountsDefault&quot;)\r\n    @Override\r\n    @Mapping(target = &quot;username&quot;, ignore = true)\r\n    public abstract AccountDto toAccountDtoDefault(Account entity, @Context List&lt;PropertyNode&gt; propertyNodes);\r\n```\r\n\r\nI would suggest that you raise this as a feature request in the MapStruct [issue tracker](https://github.com/mapstruct/mapstruct).","title":"Can I extend MapStruct methods?","body":"<p>MapStruct generates code during compilation. This means that it is not possible to ignore certain properties and invoke another mapper for this, because the other mapper already has that implemented .</p>\n<p>As a new feature we could add something to the <code>@Mapper</code> that would basically merge the configuration from the parent mapper.</p>\n<p>e.g.</p>\n<pre><code>@Mapper(componentModel = &quot;spring&quot;, nullValueCheckStrategy = NullValueCheckStrategy.ALWAYS,\n        nullValuePropertyMappingStrategy = NullValuePropertyMappingStrategy.IGNORE, methodOverrideStrategy = OverrideStrategy.MERGE)\npublic abstract class RealAccountMapper extends AccountMapper {\n\n    @Override\n    @Mapping(target = &quot;username&quot;, ignore = true)\n    public abstract AccountDto toAccountDtoDefault(Account entity, @Context List&lt;PropertyNode&gt; propertyNodes);\n}\n</code></pre>\n<p>This would mean that if this new <code>methodOverrideStrategy</code> (the name is not final) would mean that MapStruct will perform a merge of the annotation on the <code>toAccountDtoDefault</code> method.</p>\n<p>For MapStruct it would be as if the user has written.</p>\n<pre><code>    @Named(&quot;dynamicAccountsDefault&quot;)\n    @Override\n    @Mapping(target = &quot;username&quot;, ignore = true)\n    public abstract AccountDto toAccountDtoDefault(Account entity, @Context List&lt;PropertyNode&gt; propertyNodes);\n</code></pre>\n<p>I would suggest that you raise this as a feature request in the MapStruct <a href=\"https://github.com/mapstruct/mapstruct\" rel=\"nofollow noreferrer\">issue tracker</a>.</p>\n"}],"owner":{"account_id":17583308,"reputation":53,"user_id":12756610,"display_name":"Pazzio"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2088,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":70044235,"answer_count":1,"score":2,"last_activity_date":1637395709,"creation_date":1636785233,"question_id":69952030,"body_markdown":"I&#39;m developing a library and I expect the library to have a mapper like so:\r\n\r\n```java\r\nimport org.mapstruct.*;\r\nimport org.springframework.beans.factory.annotation.Autowired;\r\nimport org.springframework.beans.factory.annotation.Qualifier;\r\nimport spring.graphql.rest.rql.core.nodes.PropertyNode;\r\nimport spring.graphql.rest.rql.core.nodes.TraversalMapper;\r\nimport spring.graphql.rest.rql.example.dto.AccountDto;\r\nimport spring.graphql.rest.rql.example.models.Account;\r\n\r\nimport java.util.*;\r\n\r\n@Mapper(componentModel = &quot;spring&quot;, nullValueCheckStrategy = NullValueCheckStrategy.ALWAYS,\r\n\t\tnullValuePropertyMappingStrategy = NullValuePropertyMappingStrategy.IGNORE, uses = {TraversalMapper.class})\r\npublic abstract class AccountMapper {\r\n\r\n\t@Autowired\r\n\t@Qualifier(&quot;accountMapperImpl&quot;)\r\n\tprotected AccountMapper accountMapper;\r\n\r\n\t@Autowired\r\n\tprotected PostMapper postMapper;\r\n\r\n\t@Autowired\r\n\tprotected PersonMapper personMapper;\r\n\r\n\t@Autowired\r\n\tprotected CommentMapper commentMapper;\r\n\r\n\t@IterableMapping(qualifiedByName = &quot;dynamicAccounts&quot;)\r\n\tpublic abstract Set&lt;AccountDto&gt; rqlToAccountDtos(Set&lt;Account&gt; entity, @Context StringBuilder currentPath, @Context List&lt;PropertyNode&gt; propertyNodes, @Context List&lt;String&gt; properties, @Context String property);\r\n\r\n\t// TODO: Implement automatic generation/addition of these mappers\r\n\t@Named(&quot;dynamicAccounts&quot;)\r\n\t@Mapping(target = &quot;friends&quot;, expression = &quot;java(properties.contains(\\&quot;friends\\&quot;) ? accountMapper.rqlToAccountDtos(entity.getFriends(), currentPath, propertyNodes, properties, \\&quot;friends\\&quot;) : null)&quot;)\r\n\t@Mapping(target = &quot;posts&quot;, expression = &quot;java(properties.contains(\\&quot;posts\\&quot;) ? postMapper.toPostDtos(entity.getPosts(), currentPath, propertyNodes, properties, \\&quot;posts\\&quot;) : null)&quot;)\r\n\t@Mapping(target = &quot;comments&quot;, expression = &quot;java(properties.contains(\\&quot;comments\\&quot;) ? commentMapper.toCommentDtos(entity.getComments(), currentPath, propertyNodes, properties, \\&quot;comments\\&quot;) : null)&quot;)\r\n\t@Mapping(target = &quot;person&quot;, expression = &quot;java(properties.contains(\\&quot;person\\&quot;) ? personMapper.toPersonDto(entity.getPerson(), currentPath, propertyNodes, properties, \\&quot;person\\&quot;) : null)&quot;)\r\n\tpublic abstract AccountDto rqlToAccountDto(Account entity, @Context StringBuilder currentPath, @Context List&lt;PropertyNode&gt; propertyNodes, @Context List&lt;String&gt; properties, @Context String property);\r\n\r\n\t@Named(&quot;dynamicAccountsDefaultCollection&quot;)\r\n\tpublic Set&lt;AccountDto&gt; toAccountDtosDefault(Collection&lt;Account&gt; entity, @Context List&lt;PropertyNode&gt; propertyNodes) {\r\n\t\treturn rqlToAccountDtos(new HashSet&lt;&gt;(entity), new StringBuilder(), propertyNodes, new ArrayList&lt;&gt;(), &quot;&quot;);\r\n\t}\r\n\r\n\t@Named(&quot;dynamicAccountsDefault&quot;)\r\n\tpublic AccountDto toAccountDtoDefault(Account entity, @Context List&lt;PropertyNode&gt; propertyNodes) {\r\n\t\treturn rqlToAccountDto(entity, new StringBuilder(), propertyNodes, new ArrayList&lt;&gt;(), &quot;&quot;);\r\n\t}\r\n}\r\n```\r\nWhich is meant for internal remapping. Now, I&#39;d like to add a feature where the user can &quot;override&quot; this method, in the sense that they could for example add a statement to ignore the password of the account, while also calling the internal methods.\r\n\r\nFew examples as reference points:\r\n```java\r\nimport org.mapstruct.*;\r\nimport spring.graphql.rest.rql.core.nodes.PropertyNode;\r\nimport spring.graphql.rest.rql.example.dto.AccountDto;\r\nimport spring.graphql.rest.rql.example.models.Account;\r\n\r\nimport java.util.List;\r\n\r\n@Mapper(componentModel = &quot;spring&quot;, nullValueCheckStrategy = NullValueCheckStrategy.ALWAYS,\r\n\t\tnullValuePropertyMappingStrategy = NullValuePropertyMappingStrategy.IGNORE)\r\npublic abstract class RealAccountMapper extends AccountMapper {\r\n\r\n\t@Mapping(target = &quot;username&quot;, ignore = true)\r\n\tpublic abstract AccountDto toAccountDtoDefault(Account entity, @Context List&lt;PropertyNode&gt; propertyNodes);\r\n}\r\n\r\n@Mapper(componentModel = &quot;spring&quot;, nullValueCheckStrategy = NullValueCheckStrategy.ALWAYS,\r\n\t\tnullValuePropertyMappingStrategy = NullValuePropertyMappingStrategy.IGNORE)\r\npublic abstract class RealAccountMapper {\r\n\r\n\t@Mapping(target = &quot;username&quot;, ignore = true)\r\n\t@Mapper(uses = AccountMapper.class, qualifiedByName = &quot;dynamicAccountsDefault&quot;)\r\n\tpublic abstract AccountDto toAccountDto(Account entity, @Context List&lt;PropertyNode&gt; propertyNodes);\r\n}\r\n```\r\n\r\nThe user should be able to define a property to ignore, or for example add with a specified source. From what I experimented, even without the overrides and such, it just generates a separate mapping method, instead of even trying to reuse the other one.\r\n\r\nIs this possible without needing to implement custom methods on the user side which would call the internal methods? If not, is there a particular reason, or has it just not come up as a possible feature in MapStruct?","title":"Can I extend MapStruct methods?","body":"<p>I'm developing a library and I expect the library to have a mapper like so:</p>\n<pre class=\"lang-java prettyprint-override\"><code>import org.mapstruct.*;\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.beans.factory.annotation.Qualifier;\nimport spring.graphql.rest.rql.core.nodes.PropertyNode;\nimport spring.graphql.rest.rql.core.nodes.TraversalMapper;\nimport spring.graphql.rest.rql.example.dto.AccountDto;\nimport spring.graphql.rest.rql.example.models.Account;\n\nimport java.util.*;\n\n@Mapper(componentModel = &quot;spring&quot;, nullValueCheckStrategy = NullValueCheckStrategy.ALWAYS,\n        nullValuePropertyMappingStrategy = NullValuePropertyMappingStrategy.IGNORE, uses = {TraversalMapper.class})\npublic abstract class AccountMapper {\n\n    @Autowired\n    @Qualifier(&quot;accountMapperImpl&quot;)\n    protected AccountMapper accountMapper;\n\n    @Autowired\n    protected PostMapper postMapper;\n\n    @Autowired\n    protected PersonMapper personMapper;\n\n    @Autowired\n    protected CommentMapper commentMapper;\n\n    @IterableMapping(qualifiedByName = &quot;dynamicAccounts&quot;)\n    public abstract Set&lt;AccountDto&gt; rqlToAccountDtos(Set&lt;Account&gt; entity, @Context StringBuilder currentPath, @Context List&lt;PropertyNode&gt; propertyNodes, @Context List&lt;String&gt; properties, @Context String property);\n\n    // TODO: Implement automatic generation/addition of these mappers\n    @Named(&quot;dynamicAccounts&quot;)\n    @Mapping(target = &quot;friends&quot;, expression = &quot;java(properties.contains(\\&quot;friends\\&quot;) ? accountMapper.rqlToAccountDtos(entity.getFriends(), currentPath, propertyNodes, properties, \\&quot;friends\\&quot;) : null)&quot;)\n    @Mapping(target = &quot;posts&quot;, expression = &quot;java(properties.contains(\\&quot;posts\\&quot;) ? postMapper.toPostDtos(entity.getPosts(), currentPath, propertyNodes, properties, \\&quot;posts\\&quot;) : null)&quot;)\n    @Mapping(target = &quot;comments&quot;, expression = &quot;java(properties.contains(\\&quot;comments\\&quot;) ? commentMapper.toCommentDtos(entity.getComments(), currentPath, propertyNodes, properties, \\&quot;comments\\&quot;) : null)&quot;)\n    @Mapping(target = &quot;person&quot;, expression = &quot;java(properties.contains(\\&quot;person\\&quot;) ? personMapper.toPersonDto(entity.getPerson(), currentPath, propertyNodes, properties, \\&quot;person\\&quot;) : null)&quot;)\n    public abstract AccountDto rqlToAccountDto(Account entity, @Context StringBuilder currentPath, @Context List&lt;PropertyNode&gt; propertyNodes, @Context List&lt;String&gt; properties, @Context String property);\n\n    @Named(&quot;dynamicAccountsDefaultCollection&quot;)\n    public Set&lt;AccountDto&gt; toAccountDtosDefault(Collection&lt;Account&gt; entity, @Context List&lt;PropertyNode&gt; propertyNodes) {\n        return rqlToAccountDtos(new HashSet&lt;&gt;(entity), new StringBuilder(), propertyNodes, new ArrayList&lt;&gt;(), &quot;&quot;);\n    }\n\n    @Named(&quot;dynamicAccountsDefault&quot;)\n    public AccountDto toAccountDtoDefault(Account entity, @Context List&lt;PropertyNode&gt; propertyNodes) {\n        return rqlToAccountDto(entity, new StringBuilder(), propertyNodes, new ArrayList&lt;&gt;(), &quot;&quot;);\n    }\n}\n</code></pre>\n<p>Which is meant for internal remapping. Now, I'd like to add a feature where the user can &quot;override&quot; this method, in the sense that they could for example add a statement to ignore the password of the account, while also calling the internal methods.</p>\n<p>Few examples as reference points:</p>\n<pre class=\"lang-java prettyprint-override\"><code>import org.mapstruct.*;\nimport spring.graphql.rest.rql.core.nodes.PropertyNode;\nimport spring.graphql.rest.rql.example.dto.AccountDto;\nimport spring.graphql.rest.rql.example.models.Account;\n\nimport java.util.List;\n\n@Mapper(componentModel = &quot;spring&quot;, nullValueCheckStrategy = NullValueCheckStrategy.ALWAYS,\n        nullValuePropertyMappingStrategy = NullValuePropertyMappingStrategy.IGNORE)\npublic abstract class RealAccountMapper extends AccountMapper {\n\n    @Mapping(target = &quot;username&quot;, ignore = true)\n    public abstract AccountDto toAccountDtoDefault(Account entity, @Context List&lt;PropertyNode&gt; propertyNodes);\n}\n\n@Mapper(componentModel = &quot;spring&quot;, nullValueCheckStrategy = NullValueCheckStrategy.ALWAYS,\n        nullValuePropertyMappingStrategy = NullValuePropertyMappingStrategy.IGNORE)\npublic abstract class RealAccountMapper {\n\n    @Mapping(target = &quot;username&quot;, ignore = true)\n    @Mapper(uses = AccountMapper.class, qualifiedByName = &quot;dynamicAccountsDefault&quot;)\n    public abstract AccountDto toAccountDto(Account entity, @Context List&lt;PropertyNode&gt; propertyNodes);\n}\n</code></pre>\n<p>The user should be able to define a property to ignore, or for example add with a specified source. From what I experimented, even without the overrides and such, it just generates a separate mapping method, instead of even trying to reuse the other one.</p>\n<p>Is this possible without needing to implement custom methods on the user side which would call the internal methods? If not, is there a particular reason, or has it just not come up as a possible feature in MapStruct?</p>\n"},{"tags":["java","html","spring-mvc","thymeleaf"],"comments":[{"owner":{"account_id":12743722,"reputation":19956,"user_id":12567365,"display_name":"andrewJames"},"score":0,"creation_date":1637195632,"post_id":70012937,"comment_id":123764423,"body_markdown":"You can [edit] your question to provide the full Java stack trace for the Thymeleaf error (as formatted text). There will be a specific message in there, with more details. The error may be related to something you have not shown us in your question, or may provide more specific guidance.","body":"You can <a href=\"https://stackoverflow.com/posts/70012937/edit\">edit</a> your question to provide the full Java stack trace for the Thymeleaf error (as formatted text). There will be a specific message in there, with more details. The error may be related to something you have not shown us in your question, or may provide more specific guidance."},{"owner":{"account_id":12743722,"reputation":19956,"user_id":12567365,"display_name":"andrewJames"},"score":0,"creation_date":1637418449,"post_id":70012937,"comment_id":123823525,"body_markdown":"I was wrong - in your case, there is no specific message, for some reason. The exception type `TemplateInputException` usually means the template file could not be located. I don&#39;t think it is relevant, but you can try changing the file name from `New.html` to `new.html`, to match what you have in your code (`return &quot;new&quot;;`). Also, you don&#39;t need 2 namespace declarations in the template - you can just use `&lt;html xmlns:th=&quot;http://www.thymeleaf.org&quot;&gt;` - but, again, I doubt that is the cause of your problem in this case.","body":"I was wrong - in your case, there is no specific message, for some reason. The exception type <code>TemplateInputException</code> usually means the template file could not be located. I don&#39;t think it is relevant, but you can try changing the file name from <code>New.html</code> to <code>new.html</code>, to match what you have in your code (<code>return &quot;new&quot;;</code>). Also, you don&#39;t need 2 namespace declarations in the template - you can just use <code>&lt;html xmlns:th=&quot;http:&#47;&#47;www.thymeleaf.org&quot;&gt;</code> - but, again, I doubt that is the cause of your problem in this case."}],"owner":{"account_id":23372146,"reputation":1,"user_id":17442808,"display_name":"BurningChuck"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":536,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1637395691,"creation_date":1637192846,"question_id":70012937,"body_markdown":"I&#39;m getting this error &quot;An error happened during template parsing&quot; when I click a button in index.html to change the view to new.html\r\n\r\nThis is the error description\r\n\r\n    org.thymeleaf.exceptions.TemplateInputException: An error happened during template parsing (template: &quot;class path resource [templates/new.html]&quot;)\r\n    \tat org.thymeleaf.templateparser.markup.AbstractMarkupTemplateParser.parse(AbstractMarkupTemplateParser.java:241) ~[thymeleaf-3.0.12.RELEASE.jar:3.0.12.RELEASE]\r\n    \tat org.thymeleaf.templateparser.markup.AbstractMarkupTemplateParser.parseStandalone(AbstractMarkupTemplateParser.java:100) ~[thymeleaf-3.0.12.RELEASE.jar:3.0.12.RELEASE]\r\n    \tat org.thymeleaf.engine.TemplateManager.parseAndProcess(TemplateManager.java:666) ~[thymeleaf-3.0.12.RELEASE.jar:3.0.12.RELEASE]\r\n    \tat org.thymeleaf.TemplateEngine.process(TemplateEngine.java:1098) ~[thymeleaf-3.0.12.RELEASE.jar:3.0.12.RELEASE]\r\n    \tat org.thymeleaf.TemplateEngine.process(TemplateEngine.java:1072) ~[thymeleaf-3.0.12.RELEASE.jar:3.0.12.RELEASE]\r\n    \tat org.thymeleaf.spring5.view.ThymeleafView.renderFragment(ThymeleafView.java:366) ~[thymeleaf-spring5-3.0.12.RELEASE.jar:3.0.12.RELEASE]\r\n    \tat org.thymeleaf.spring5.view.ThymeleafView.render(ThymeleafView.java:190) ~[thymeleaf-spring5-3.0.12.RELEASE.jar:3.0.12.RELEASE]\r\n    \tat org.springframework.web.servlet.DispatcherServlet.render(DispatcherServlet.java:1400) ~[spring-webmvc-5.3.12.jar:5.3.12]\r\n    \tat org.springframework.web.servlet.DispatcherServlet.processDispatchResult(DispatcherServlet.java:1145) ~[spring-webmvc-5.3.12.jar:5.3.12]\r\n    \tat org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1084) ~[spring-webmvc-5.3.12.jar:5.3.12]\r\n    \tat org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:963) ~[spring-webmvc-5.3.12.jar:5.3.12]\r\n    \tat org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006) ~[spring-webmvc-5.3.12.jar:5.3.12]\r\n    \tat org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:898) ~[spring-webmvc-5.3.12.jar:5.3.12]\r\n    \tat javax.servlet.http.HttpServlet.service(HttpServlet.java:655) ~[tomcat-embed-core-9.0.54.jar:4.0.FR]\r\n    \tat org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883) ~[spring-webmvc-5.3.12.jar:5.3.12]\r\n    \tat javax.servlet.http.HttpServlet.service(HttpServlet.java:764) ~[tomcat-embed-core-9.0.54.jar:4.0.FR]\r\n    \tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:227) ~[tomcat-embed-core-9.0.54.jar:9.0.54]\r\n    \tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-9.0.54.jar:9.0.54]\r\n    \tat org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53) ~[tomcat-embed-websocket-9.0.54.jar:9.0.54]\r\n    \tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) ~[tomcat-embed-core-9.0.54.jar:9.0.54]\r\n    \tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-9.0.54.jar:9.0.54]\r\n    \tat org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-5.3.12.jar:5.3.12]\r\n    \tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119) ~[spring-web-5.3.12.jar:5.3.12]\r\n    \tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) ~[tomcat-embed-core-9.0.54.jar:9.0.54]\r\n    \tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-9.0.54.jar:9.0.54]\r\n    \tat org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-5.3.12.jar:5.3.12]\r\n    \tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119) ~[spring-web-5.3.12.jar:5.3.12]\r\n    \tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) ~[tomcat-embed-core-9.0.54.jar:9.0.54]\r\n    \tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-9.0.54.jar:9.0.54]\r\n    \tat org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-5.3.12.jar:5.3.12]\r\n    \tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119) ~[spring-web-5.3.12.jar:5.3.12]\r\n    \tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) ~[tomcat-embed-core-9.0.54.jar:9.0.54]\r\n    \tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-9.0.54.jar:9.0.54]\r\n    \tat org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:197) ~[tomcat-embed-core-9.0.54.jar:9.0.54]\r\n    \tat org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97) ~[tomcat-embed-core-9.0.54.jar:9.0.54]\r\n    \tat org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:540) ~[tomcat-embed-core-9.0.54.jar:9.0.54]\r\n    \tat org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:135) ~[tomcat-embed-core-9.0.54.jar:9.0.54]\r\n    \tat org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92) ~[tomcat-embed-core-9.0.54.jar:9.0.54]\r\n    \tat org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78) ~[tomcat-embed-core-9.0.54.jar:9.0.54]\r\n    \tat org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:357) ~[tomcat-embed-core-9.0.54.jar:9.0.54]\r\n    \tat org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:382) ~[tomcat-embed-core-9.0.54.jar:9.0.54]\r\n    \tat org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65) ~[tomcat-embed-core-9.0.54.jar:9.0.54]\r\n    \tat org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:895) ~[tomcat-embed-core-9.0.54.jar:9.0.54]\r\n    \tat org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1722) ~[tomcat-embed-core-9.0.54.jar:9.0.54]\r\n    \tat org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49) ~[tomcat-embed-core-9.0.54.jar:9.0.54]\r\n    \tat org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191) ~[tomcat-embed-core-9.0.54.jar:9.0.54]\r\n    \tat org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659) ~[tomcat-embed-core-9.0.54.jar:9.0.54]\r\n    \tat org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61) ~[tomcat-embed-core-9.0.54.jar:9.0.54]\r\n    \tat java.base/java.lang.Thread.run(Thread.java:833) ~[na:na]\r\n\r\n\r\nThis is the New page\r\n\r\n        &lt;!DOCTYPE html&gt;\r\n    &lt;html xmlns=&quot;http://www.w3.org/1999/xhtml&quot;\r\n          xmlns:th=&quot;http://www.thymeleaf.org&quot;&gt;\r\n    &lt;head&gt;\r\n        &lt;meta charset=&quot;utf-8&quot; /&gt;\r\n        &lt;title&gt;Create New Client&lt;/title&gt;\r\n        &lt;link rel=&quot;stylesheet&quot; href=&quot;https://stackpath.bootstrapcdn.com/bootswatch/4.5.2/cosmo/bootstrap.min.css&quot; /&gt;\r\n        &lt;script src= &quot;https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js&quot; &gt;&lt;/script&gt;\r\n    &lt;/head&gt;\r\n    &lt;body&gt;\r\n    &lt;div align=&quot;center&quot;&gt;\r\n        &lt;h1&gt;Create New Client&lt;/h1&gt;\r\n        &lt;br /&gt;\r\n         &lt;div class=&quot;col-sm-4&quot;&gt;\r\n        &lt;form action=&quot;#&quot; th:action=&quot;@{/save}&quot; th:object=&quot;${client}&quot; method=&quot;post&quot;&gt;\r\n    \r\n          \r\n     \t\t&lt;div alight=&quot;left&quot;&gt;\r\n                &lt;tr&gt;\r\n                    &lt;label class=&quot;form-label&quot; &gt;Client Name&lt;/label&gt;\r\n                    &lt;td&gt;\r\n    \t                &lt;input type=&quot;hidden&quot; th:field=&quot;*{id}&quot; /&gt;\r\n    \t                &lt;input type=&quot;text&quot; th:field=&quot;*{clientname}&quot; class=&quot;form-control&quot; placeholder=&quot;Client Name&quot; /&gt;\r\n                    &lt;/td&gt;\r\n                &lt;/tr&gt;\r\n             &lt;/div&gt;   \r\n                \r\n              \t&lt;div alight=&quot;left&quot;&gt;\r\n              \r\n                &lt;tr&gt;\r\n                     &lt;label class=&quot;form-label&quot; &gt;Hookah&lt;/label&gt;\r\n                    &lt;td&gt;&lt;input type=&quot;text&quot; th:field=&quot;*{hookah}&quot; class=&quot;form-control&quot; placeholder=&quot;Hookah&quot; /&gt;&lt;/td&gt;\r\n                &lt;/tr&gt;\r\n                &lt;/div&gt; \r\n                &lt;div alight=&quot;left&quot;&gt;\r\n                     &lt;tr&gt;\r\n                     &lt;label class=&quot;form-label&quot; &gt;Fee&lt;/label&gt;\r\n                    &lt;td&gt;&lt;input type=&quot;text&quot; th:field=&quot;*{fee}&quot; class=&quot;form-control&quot; placeholder=&quot;Fee&quot; /&gt;&lt;/td&gt;\r\n                &lt;/tr&gt;\r\n                &lt;/div&gt; \r\n    \t\t\t&lt;br&gt;\r\n                &lt;tr&gt;\r\n                &lt;td colspan=&quot;2&quot;&gt;&lt;button type=&quot;submit&quot; class=&quot;btn btn-info&quot;&gt;Save&lt;/button&gt; &lt;/td&gt;\r\n                &lt;/tr&gt;\r\n            &lt;/table&gt;\r\n        &lt;/form&gt;\r\n    &lt;/div&gt;\r\n    &lt;/body&gt;\r\n    &lt;/html&gt;\r\n\r\nThis is My Controller\r\n\r\n    package com.demoproject.PostavteTroikyBar.controller;\r\n    import java.util.List;\r\n    \r\n    import org.springframework.beans.factory.annotation.Autowired;\r\n    import org.springframework.stereotype.Controller;\r\n    import org.springframework.ui.Model;\r\n    import org.springframework.web.bind.annotation.GetMapping;\r\n    import org.springframework.web.bind.annotation.ModelAttribute;\r\n    import org.springframework.web.bind.annotation.PathVariable;\r\n    import org.springframework.web.bind.annotation.RequestMapping;\r\n    import org.springframework.web.bind.annotation.RequestMethod;\r\n    import org.springframework.web.servlet.ModelAndView;\r\n    \r\n    import com.demoproject.PostavteTroikyBar.Service.ClientService;\r\n    import com.demoproject.PostavteTroikyBar.domain.Client;\r\n    \r\n    @Controller\r\n    public class ClientController {\r\n    \t\r\n    \t @Autowired\r\n    \t    private ClientService service;\r\n    \r\n    \t    @GetMapping(&quot;/&quot;)\r\n    \t    public String viewHomePage(Model model) {\r\n    \t        List&lt;Client&gt; listclient = service.listAll();\r\n    \t        model.addAttribute(&quot;listclient&quot;, listclient);\r\n    \t        System.out.print(&quot;Get / &quot;);\t\r\n    \t        return &quot;index&quot;;\r\n    \t    }\r\n    \r\n    \t    @GetMapping(&quot;/new&quot;)\r\n    \t    public String add(Model model) {\r\n    \t        model.addAttribute(&quot;client&quot;, new Client());\r\n    \t        return &quot;new&quot;;\r\n    \t    }\r\n    \r\n    \t    @RequestMapping(value = &quot;/save&quot;, method = RequestMethod.POST)\r\n    \t    public String saveStudent(@ModelAttribute(&quot;client&quot;) Client std) {\r\n    \t        service.save(std);\r\n    \t        return &quot;redirect:/&quot;;\r\n    \t    }\r\n    \r\n    \t    @RequestMapping(&quot;/edit/{id}&quot;)\r\n    \t    public ModelAndView showEditStudentPage(@PathVariable(name = &quot;id&quot;) int id) {\r\n    \t        ModelAndView mav = new ModelAndView(&quot;new&quot;);\r\n    \t        Client std = service.get(id);\r\n    \t        mav.addObject(&quot;student&quot;, std);\r\n    \t        return mav;\r\n    \t        \r\n    \t    }\r\n    \t    @RequestMapping(&quot;/delete/{id}&quot;)\r\n    \t    public String deletestudent(@PathVariable(name = &quot;id&quot;) int id) {\r\n    \t        service.delete(id);\r\n    \t        return &quot;redirect:/&quot;;\r\n    \t    }\r\n    }\r\n\r\nThe error occurs when I press to move to New.html from the main page, please see code below:\r\n\r\n    &lt;div align = &quot;center&quot; &gt;\t\t   \r\n\t\t     &lt;h3&gt;&lt;a  th:href=&quot;@{&#39;/new&#39;}&quot;&gt;Add new&lt;/a&gt;&lt;/h3&gt;     \r\n\t    &lt;/div&gt;\r\n\r\nWould be thankful for any help or suggestions regarding how to fix this issue\r\n","title":"Thymeleaf: An error happened during template parsing","body":"<p>I'm getting this error &quot;An error happened during template parsing&quot; when I click a button in index.html to change the view to new.html</p>\n<p>This is the error description</p>\n<pre><code>org.thymeleaf.exceptions.TemplateInputException: An error happened during template parsing (template: &quot;class path resource [templates/new.html]&quot;)\n    at org.thymeleaf.templateparser.markup.AbstractMarkupTemplateParser.parse(AbstractMarkupTemplateParser.java:241) ~[thymeleaf-3.0.12.RELEASE.jar:3.0.12.RELEASE]\n    at org.thymeleaf.templateparser.markup.AbstractMarkupTemplateParser.parseStandalone(AbstractMarkupTemplateParser.java:100) ~[thymeleaf-3.0.12.RELEASE.jar:3.0.12.RELEASE]\n    at org.thymeleaf.engine.TemplateManager.parseAndProcess(TemplateManager.java:666) ~[thymeleaf-3.0.12.RELEASE.jar:3.0.12.RELEASE]\n    at org.thymeleaf.TemplateEngine.process(TemplateEngine.java:1098) ~[thymeleaf-3.0.12.RELEASE.jar:3.0.12.RELEASE]\n    at org.thymeleaf.TemplateEngine.process(TemplateEngine.java:1072) ~[thymeleaf-3.0.12.RELEASE.jar:3.0.12.RELEASE]\n    at org.thymeleaf.spring5.view.ThymeleafView.renderFragment(ThymeleafView.java:366) ~[thymeleaf-spring5-3.0.12.RELEASE.jar:3.0.12.RELEASE]\n    at org.thymeleaf.spring5.view.ThymeleafView.render(ThymeleafView.java:190) ~[thymeleaf-spring5-3.0.12.RELEASE.jar:3.0.12.RELEASE]\n    at org.springframework.web.servlet.DispatcherServlet.render(DispatcherServlet.java:1400) ~[spring-webmvc-5.3.12.jar:5.3.12]\n    at org.springframework.web.servlet.DispatcherServlet.processDispatchResult(DispatcherServlet.java:1145) ~[spring-webmvc-5.3.12.jar:5.3.12]\n    at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1084) ~[spring-webmvc-5.3.12.jar:5.3.12]\n    at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:963) ~[spring-webmvc-5.3.12.jar:5.3.12]\n    at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006) ~[spring-webmvc-5.3.12.jar:5.3.12]\n    at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:898) ~[spring-webmvc-5.3.12.jar:5.3.12]\n    at javax.servlet.http.HttpServlet.service(HttpServlet.java:655) ~[tomcat-embed-core-9.0.54.jar:4.0.FR]\n    at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883) ~[spring-webmvc-5.3.12.jar:5.3.12]\n    at javax.servlet.http.HttpServlet.service(HttpServlet.java:764) ~[tomcat-embed-core-9.0.54.jar:4.0.FR]\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:227) ~[tomcat-embed-core-9.0.54.jar:9.0.54]\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-9.0.54.jar:9.0.54]\n    at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53) ~[tomcat-embed-websocket-9.0.54.jar:9.0.54]\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) ~[tomcat-embed-core-9.0.54.jar:9.0.54]\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-9.0.54.jar:9.0.54]\n    at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-5.3.12.jar:5.3.12]\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119) ~[spring-web-5.3.12.jar:5.3.12]\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) ~[tomcat-embed-core-9.0.54.jar:9.0.54]\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-9.0.54.jar:9.0.54]\n    at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-5.3.12.jar:5.3.12]\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119) ~[spring-web-5.3.12.jar:5.3.12]\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) ~[tomcat-embed-core-9.0.54.jar:9.0.54]\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-9.0.54.jar:9.0.54]\n    at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-5.3.12.jar:5.3.12]\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119) ~[spring-web-5.3.12.jar:5.3.12]\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) ~[tomcat-embed-core-9.0.54.jar:9.0.54]\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-9.0.54.jar:9.0.54]\n    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:197) ~[tomcat-embed-core-9.0.54.jar:9.0.54]\n    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97) ~[tomcat-embed-core-9.0.54.jar:9.0.54]\n    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:540) ~[tomcat-embed-core-9.0.54.jar:9.0.54]\n    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:135) ~[tomcat-embed-core-9.0.54.jar:9.0.54]\n    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92) ~[tomcat-embed-core-9.0.54.jar:9.0.54]\n    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78) ~[tomcat-embed-core-9.0.54.jar:9.0.54]\n    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:357) ~[tomcat-embed-core-9.0.54.jar:9.0.54]\n    at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:382) ~[tomcat-embed-core-9.0.54.jar:9.0.54]\n    at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65) ~[tomcat-embed-core-9.0.54.jar:9.0.54]\n    at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:895) ~[tomcat-embed-core-9.0.54.jar:9.0.54]\n    at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1722) ~[tomcat-embed-core-9.0.54.jar:9.0.54]\n    at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49) ~[tomcat-embed-core-9.0.54.jar:9.0.54]\n    at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191) ~[tomcat-embed-core-9.0.54.jar:9.0.54]\n    at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659) ~[tomcat-embed-core-9.0.54.jar:9.0.54]\n    at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61) ~[tomcat-embed-core-9.0.54.jar:9.0.54]\n    at java.base/java.lang.Thread.run(Thread.java:833) ~[na:na]\n</code></pre>\n<p>This is the New page</p>\n<pre><code>    &lt;!DOCTYPE html&gt;\n&lt;html xmlns=&quot;http://www.w3.org/1999/xhtml&quot;\n      xmlns:th=&quot;http://www.thymeleaf.org&quot;&gt;\n&lt;head&gt;\n    &lt;meta charset=&quot;utf-8&quot; /&gt;\n    &lt;title&gt;Create New Client&lt;/title&gt;\n    &lt;link rel=&quot;stylesheet&quot; href=&quot;https://stackpath.bootstrapcdn.com/bootswatch/4.5.2/cosmo/bootstrap.min.css&quot; /&gt;\n    &lt;script src= &quot;https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js&quot; &gt;&lt;/script&gt;\n&lt;/head&gt;\n&lt;body&gt;\n&lt;div align=&quot;center&quot;&gt;\n    &lt;h1&gt;Create New Client&lt;/h1&gt;\n    &lt;br /&gt;\n     &lt;div class=&quot;col-sm-4&quot;&gt;\n    &lt;form action=&quot;#&quot; th:action=&quot;@{/save}&quot; th:object=&quot;${client}&quot; method=&quot;post&quot;&gt;\n\n      \n        &lt;div alight=&quot;left&quot;&gt;\n            &lt;tr&gt;\n                &lt;label class=&quot;form-label&quot; &gt;Client Name&lt;/label&gt;\n                &lt;td&gt;\n                    &lt;input type=&quot;hidden&quot; th:field=&quot;*{id}&quot; /&gt;\n                    &lt;input type=&quot;text&quot; th:field=&quot;*{clientname}&quot; class=&quot;form-control&quot; placeholder=&quot;Client Name&quot; /&gt;\n                &lt;/td&gt;\n            &lt;/tr&gt;\n         &lt;/div&gt;   \n            \n            &lt;div alight=&quot;left&quot;&gt;\n          \n            &lt;tr&gt;\n                 &lt;label class=&quot;form-label&quot; &gt;Hookah&lt;/label&gt;\n                &lt;td&gt;&lt;input type=&quot;text&quot; th:field=&quot;*{hookah}&quot; class=&quot;form-control&quot; placeholder=&quot;Hookah&quot; /&gt;&lt;/td&gt;\n            &lt;/tr&gt;\n            &lt;/div&gt; \n            &lt;div alight=&quot;left&quot;&gt;\n                 &lt;tr&gt;\n                 &lt;label class=&quot;form-label&quot; &gt;Fee&lt;/label&gt;\n                &lt;td&gt;&lt;input type=&quot;text&quot; th:field=&quot;*{fee}&quot; class=&quot;form-control&quot; placeholder=&quot;Fee&quot; /&gt;&lt;/td&gt;\n            &lt;/tr&gt;\n            &lt;/div&gt; \n            &lt;br&gt;\n            &lt;tr&gt;\n            &lt;td colspan=&quot;2&quot;&gt;&lt;button type=&quot;submit&quot; class=&quot;btn btn-info&quot;&gt;Save&lt;/button&gt; &lt;/td&gt;\n            &lt;/tr&gt;\n        &lt;/table&gt;\n    &lt;/form&gt;\n&lt;/div&gt;\n&lt;/body&gt;\n&lt;/html&gt;\n</code></pre>\n<p>This is My Controller</p>\n<pre><code>package com.demoproject.PostavteTroikyBar.controller;\nimport java.util.List;\n\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.stereotype.Controller;\nimport org.springframework.ui.Model;\nimport org.springframework.web.bind.annotation.GetMapping;\nimport org.springframework.web.bind.annotation.ModelAttribute;\nimport org.springframework.web.bind.annotation.PathVariable;\nimport org.springframework.web.bind.annotation.RequestMapping;\nimport org.springframework.web.bind.annotation.RequestMethod;\nimport org.springframework.web.servlet.ModelAndView;\n\nimport com.demoproject.PostavteTroikyBar.Service.ClientService;\nimport com.demoproject.PostavteTroikyBar.domain.Client;\n\n@Controller\npublic class ClientController {\n    \n     @Autowired\n        private ClientService service;\n\n        @GetMapping(&quot;/&quot;)\n        public String viewHomePage(Model model) {\n            List&lt;Client&gt; listclient = service.listAll();\n            model.addAttribute(&quot;listclient&quot;, listclient);\n            System.out.print(&quot;Get / &quot;); \n            return &quot;index&quot;;\n        }\n\n        @GetMapping(&quot;/new&quot;)\n        public String add(Model model) {\n            model.addAttribute(&quot;client&quot;, new Client());\n            return &quot;new&quot;;\n        }\n\n        @RequestMapping(value = &quot;/save&quot;, method = RequestMethod.POST)\n        public String saveStudent(@ModelAttribute(&quot;client&quot;) Client std) {\n            service.save(std);\n            return &quot;redirect:/&quot;;\n        }\n\n        @RequestMapping(&quot;/edit/{id}&quot;)\n        public ModelAndView showEditStudentPage(@PathVariable(name = &quot;id&quot;) int id) {\n            ModelAndView mav = new ModelAndView(&quot;new&quot;);\n            Client std = service.get(id);\n            mav.addObject(&quot;student&quot;, std);\n            return mav;\n            \n        }\n        @RequestMapping(&quot;/delete/{id}&quot;)\n        public String deletestudent(@PathVariable(name = &quot;id&quot;) int id) {\n            service.delete(id);\n            return &quot;redirect:/&quot;;\n        }\n}\n</code></pre>\n<p>The error occurs when I press to move to New.html from the main page, please see code below:</p>\n<pre><code>&lt;div align = &quot;center&quot; &gt;        \n         &lt;h3&gt;&lt;a  th:href=&quot;@{'/new'}&quot;&gt;Add new&lt;/a&gt;&lt;/h3&gt;     \n    &lt;/div&gt;\n</code></pre>\n<p>Would be thankful for any help or suggestions regarding how to fix this issue</p>\n"},{"tags":["java","timezone","simpledateformat"],"comments":[{"owner":{"account_id":2053598,"reputation":41316,"user_id":1831987,"display_name":"VGR"},"score":2,"creation_date":1637374255,"post_id":70042666,"comment_id":123816988,"body_markdown":"Those times are not equivalent.  The `Z` means UTC, so your second time string is six hours earlier than the first one.","body":"Those times are not equivalent.  The <code>Z</code> means UTC, so your second time string is six hours earlier than the first one."},{"owner":{"account_id":1223835,"reputation":75858,"user_id":1189885,"accept_rate":43,"display_name":"chrylis -cautiouslyoptimistic-"},"score":2,"creation_date":1637377056,"post_id":70042666,"comment_id":123817262,"body_markdown":"Don&#39;t use `Date`, use the `java.time` classes.","body":"Don&#39;t use <code>Date</code>, use the <code>java.time</code> classes."},{"owner":{"account_id":7612423,"reputation":82486,"user_id":5772882,"display_name":"Anonymous"},"score":0,"creation_date":1637617278,"post_id":70042666,"comment_id":123869936,"body_markdown":"[Central Daylight Time did not end until Sunday, November 7, 2021](https://www.timeanddate.com/time/zone/usa/chicago) in America/Chicago time zone.","body":"<a href=\"https://www.timeanddate.com/time/zone/usa/chicago\" rel=\"nofollow noreferrer\">Central Daylight Time did not end until Sunday, November 7, 2021</a> in America/Chicago time zone."},{"owner":{"account_id":7612423,"reputation":82486,"user_id":5772882,"display_name":"Anonymous"},"score":0,"creation_date":1637617445,"post_id":70042666,"comment_id":123869989,"body_markdown":"Don’t use `SimpleDateFormat`, `Date` and `TimeZone`. Those classes are poorly designed and long outdated, the first in particular notoriously troublesome. Use `ZonedDateTime`, `ZoneId` and `DateTimeFormatter`, all from [java.time, the modern Java date and time API](https://docs.oracle.com/javase/tutorial/datetime/index.html).","body":"Don’t use <code>SimpleDateFormat</code>, <code>Date</code> and <code>TimeZone</code>. Those classes are poorly designed and long outdated, the first in particular notoriously troublesome. Use <code>ZonedDateTime</code>, <code>ZoneId</code> and <code>DateTimeFormatter</code>, all from <a href=\"https://docs.oracle.com/javase/tutorial/datetime/index.html\" rel=\"nofollow noreferrer\">java.time, the modern Java date and time API</a>."}],"answers":[{"tags":[],"owner":{"account_id":322981,"reputation":310745,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1637395455,"creation_date":1637393884,"answer_id":70044073,"question_id":70042666,"body_markdown":"# tl;dr\r\n\r\nYou asked:\r\n\r\n&gt; Why is an hour getting add to the final time?\r\n\r\nYour expectation is incorrect. DST was in effect on the 5th in that zone. \r\n\r\n2021-11-05T22:33:10Z = 2021-11-05T17:33:10-05:00[America/Chicago]\r\n\r\n\r\n# Use only *java.time*\r\n\r\nYou are using terrible date-time classes that were years ago supplanted by the modern *java.time* classes defined in JSR 310.\r\n\r\n## Moment in UTC\r\n\r\n    Instant instant = Instant.parse( &quot;2021-11-05T22:33:10Z&quot; ) ;\r\n    \r\n&gt;instant.toString(): 2021-11-05T22:33:10Z\r\n\r\n## Adjust from UTC to a time zone\r\n\r\n    ZoneId z = ZoneId.of( &quot;America/Chicago&quot; ) ;\r\n    ZonedDateTime zdt = instant.atZone( z ) ;\r\n\r\n&gt;zdt.toString(): 2021-11-05T17:33:10-05:00[America/Chicago]\r\n\r\nNote that your expectation of `2021-11-05T16:33:10Z` as result is incorrect. **Chicago time was *five hours* behind UTC on November 5**, under Daylight Saving Time (DST), not six hours. DST ended on November 7, 2021. For the rest of November, Chicago time is six hours behind UTC.\r\n\r\nSee this [code run live at IdeOne.com][1].\r\n\r\n# Real time zone names\r\n\r\nThere is no such time zone as `cst` or `CST`. To some people that means Central Standard Time, to many more people that means China Standard Time. Use these 2-4 letter pseudo-zones only for localizing in presentation to the user, never for data exchange. Behind the scenes, use only [real time zones](https://en.wikipedia.org/wiki/List_of_tz_database_time_zones) in format of `Continent/Region`. \r\n\r\nFor data-exchange, use only [ISO 8601][2] standard formats.\r\n\r\n\r\n  [1]: https://ideone.com/5M8jIr\r\n  [2]: https://en.wikipedia.org/wiki/ISO_8601","title":"convert utc time to cst time","body":"<h1>tl;dr</h1>\n<p>You asked:</p>\n<blockquote>\n<p>Why is an hour getting add to the final time?</p>\n</blockquote>\n<p>Your expectation is incorrect. DST was in effect on the 5th in that zone.</p>\n<p>2021-11-05T22:33:10Z = 2021-11-05T17:33:10-05:00[America/Chicago]</p>\n<h1>Use only <em>java.time</em></h1>\n<p>You are using terrible date-time classes that were years ago supplanted by the modern <em>java.time</em> classes defined in JSR 310.</p>\n<h2>Moment in UTC</h2>\n<pre><code>Instant instant = Instant.parse( &quot;2021-11-05T22:33:10Z&quot; ) ;\n</code></pre>\n<blockquote>\n<p>instant.toString(): 2021-11-05T22:33:10Z</p>\n</blockquote>\n<h2>Adjust from UTC to a time zone</h2>\n<pre><code>ZoneId z = ZoneId.of( &quot;America/Chicago&quot; ) ;\nZonedDateTime zdt = instant.atZone( z ) ;\n</code></pre>\n<blockquote>\n<p>zdt.toString(): 2021-11-05T17:33:10-05:00[America/Chicago]</p>\n</blockquote>\n<p>Note that your expectation of <code>2021-11-05T16:33:10Z</code> as result is incorrect. <strong>Chicago time was <em>five hours</em> behind UTC on November 5</strong>, under Daylight Saving Time (DST), not six hours. DST ended on November 7, 2021. For the rest of November, Chicago time is six hours behind UTC.</p>\n<p>See this <a href=\"https://ideone.com/5M8jIr\" rel=\"nofollow noreferrer\">code run live at IdeOne.com</a>.</p>\n<h1>Real time zone names</h1>\n<p>There is no such time zone as <code>cst</code> or <code>CST</code>. To some people that means Central Standard Time, to many more people that means China Standard Time. Use these 2-4 letter pseudo-zones only for localizing in presentation to the user, never for data exchange. Behind the scenes, use only <a href=\"https://en.wikipedia.org/wiki/List_of_tz_database_time_zones\" rel=\"nofollow noreferrer\">real time zones</a> in format of <code>Continent/Region</code>.</p>\n<p>For data-exchange, use only <a href=\"https://en.wikipedia.org/wiki/ISO_8601\" rel=\"nofollow noreferrer\">ISO 8601</a> standard formats.</p>\n"}],"owner":{"account_id":18236823,"reputation":19,"user_id":13274634,"display_name":"NKZ"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2654,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":1,"score":-1,"last_activity_date":1637395455,"creation_date":1637372971,"question_id":70042666,"body_markdown":"I have a string (&quot;2021-11-05T22:33:10Z&quot;) which represents UTC time. I need to get the equivalent cst time(&quot;2021-11-05T16:33:10Z&quot;). i have the below code but it returns time as \r\n2021-11-05T17:33:10Z. Why is an hour getting add to the final time?\r\n\r\n\r\n```\r\npublic class MyClass {\r\n    public static void main(String args[]) throws ParseException {\r\n      String busDate = &quot;2021-11-05T22:33:10Z&quot;;\r\n      SimpleDateFormat currentFormat = new SimpleDateFormat(&quot;yyyy-MM-dd&#39;T&#39;HH:mm:ss&#39;Z&#39;&quot;);\r\n      currentFormat.setTimeZone(TimeZone.getTimeZone(&quot;UTC&quot;));\r\n      Date utcTime = currentFormat.parse(busDate);\r\n      \r\n      System.out.println(utcTime); //Fri Nov 05 22:33:10 GMT 2021\r\n      \r\n      SimpleDateFormat updateFormat = new SimpleDateFormat(&quot;yyyy-MM-dd&#39;T&#39;HH:mm:ss&#39;Z&#39;&quot;);\r\n      updateFormat.setTimeZone(TimeZone.getTimeZone(&quot;America/Chicago&quot;));\r\n      String formattedDateTime = updateFormat.format(utcTime);\r\n      System.out.println(formattedDateTime); //2021-11-05T17:33:10Z\r\n   \r\n    }\r\n}\r\n```","title":"convert utc time to cst time","body":"<p>I have a string (&quot;2021-11-05T22:33:10Z&quot;) which represents UTC time. I need to get the equivalent cst time(&quot;2021-11-05T16:33:10Z&quot;). i have the below code but it returns time as\n2021-11-05T17:33:10Z. Why is an hour getting add to the final time?</p>\n<pre><code>public class MyClass {\n    public static void main(String args[]) throws ParseException {\n      String busDate = &quot;2021-11-05T22:33:10Z&quot;;\n      SimpleDateFormat currentFormat = new SimpleDateFormat(&quot;yyyy-MM-dd'T'HH:mm:ss'Z'&quot;);\n      currentFormat.setTimeZone(TimeZone.getTimeZone(&quot;UTC&quot;));\n      Date utcTime = currentFormat.parse(busDate);\n      \n      System.out.println(utcTime); //Fri Nov 05 22:33:10 GMT 2021\n      \n      SimpleDateFormat updateFormat = new SimpleDateFormat(&quot;yyyy-MM-dd'T'HH:mm:ss'Z'&quot;);\n      updateFormat.setTimeZone(TimeZone.getTimeZone(&quot;America/Chicago&quot;));\n      String formattedDateTime = updateFormat.format(utcTime);\n      System.out.println(formattedDateTime); //2021-11-05T17:33:10Z\n   \n    }\n}\n</code></pre>\n"},{"tags":["java","jdbc","clickhouse","clickhouse-client"],"comments":[{"owner":{"account_id":7648101,"reputation":998,"user_id":6703449,"accept_rate":60,"display_name":"Andrei Koch"},"score":2,"creation_date":1637243344,"post_id":70020750,"comment_id":123777865,"body_markdown":"Why does 9001? Is it mapping for Clickhouse TCP port? Official Clickhouse driver uses HTTP protocol, so you should use HTTP port (8123 by default)","body":"Why does 9001? Is it mapping for Clickhouse TCP port? Official Clickhouse driver uses HTTP protocol, so you should use HTTP port (8123 by default)"},{"owner":{"account_id":12485138,"reputation":349,"user_id":9088594,"display_name":"justlikethat"},"score":0,"creation_date":1637394687,"post_id":70020750,"comment_id":123819272,"body_markdown":"@AndreiKoch, thank you! Did not know this. Changing it to 8123 worked.","body":"@AndreiKoch, thank you! Did not know this. Changing it to 8123 worked."}],"answers":[{"tags":[],"owner":{"account_id":12485138,"reputation":349,"user_id":9088594,"display_name":"justlikethat"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1637395170,"creation_date":1637395170,"answer_id":70044178,"question_id":70020750,"body_markdown":"As mentioned by @AndreiKoch in the comments on the question, we had assumed the jdbc driver would use 9001 just like the clickhouse-driver used in the python: \r\nhttps://clickhouse-driver.readthedocs.io/_/downloads/en/0.0.20/pdf/ . \r\n\r\nHowever, the native jdbc driver (used in the scala snippet) uses HTTP over port 8123.","title":"Clickhouse jdbc driver connection issue","body":"<p>As mentioned by @AndreiKoch in the comments on the question, we had assumed the jdbc driver would use 9001 just like the clickhouse-driver used in the python:\n<a href=\"https://clickhouse-driver.readthedocs.io/_/downloads/en/0.0.20/pdf/\" rel=\"nofollow noreferrer\">https://clickhouse-driver.readthedocs.io/_/downloads/en/0.0.20/pdf/</a> .</p>\n<p>However, the native jdbc driver (used in the scala snippet) uses HTTP over port 8123.</p>\n"}],"owner":{"account_id":12485138,"reputation":349,"user_id":9088594,"display_name":"justlikethat"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":3253,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":70044178,"answer_count":1,"score":2,"last_activity_date":1637395170,"creation_date":1637242257,"question_id":70020750,"body_markdown":"We are trying to connect to a clickhouse server using jdbc drivers. Our code snippet is in scala and would not be much different in java \r\n```import java.sql.{ Connection, DriverManager}\r\nimport java.util.Properties\r\nClass.forName(&quot;ru.yandex.clickhouse.ClickHouseDriver&quot;)\r\n    var conn : Connection = null\r\n    try {\r\n      conn = DriverManager.getConnection(&quot;jdbc:clickhouse://xxxxxx:9001/db_name&quot;, &quot;usrname&quot;, &quot;pass&quot;)\r\n      val stmt = conn.createStatement()\r\n      val sql =s&quot;&quot;&quot;select 1&quot;&quot;&quot;.stripMargin\r\n      stmt.executeQuery(sql)\r\n    } finally {\r\n      if(conn != null)\r\n        conn.close()\r\n    }\r\n```\r\n\r\nWe get the following error : \r\n```\r\nClickHouseUnknownException: ClickHouse exception, code: 1002, host: xxxxxxx, port: 9001; xxxxxxxxx:9001 failed to respond\r\nCaused by: NoHttpResponseException: xxxxxxxxx:9001 failed to respond\r\n```\r\nWe went through a few other pages mentioning the same error and in keeping with the advice there, we used the latest version of the driver (0.3.1-patch).\r\n\r\nWe tried this with another driver too (clickhouse-native-jdbc) and got the same error.\r\n\r\nTo add some more context, we tried using the python clickhouse-driver with the following code snippet - \r\n```\r\nfrom clickhouse_driver import Client\r\n\r\nconn = Client(&#39;xxxxxxxxxx&#39;, password=&#39;pass&#39;, port=9001, user=&#39;usrname&#39;, verify= False, secure=True)\r\nq1 =&quot;select * from db_name.table limit 5&quot;\r\nresult = conn.execute(q1)\r\nprint(result)\r\n```\r\n\r\nThis works. \r\n\r\nWe are not sure if this is only because of the ssl secure set to true and the verify set to false. If it is so, how should those be added to the drivers used above? If that is not the cause, what could the cause be?\r\n","title":"Clickhouse jdbc driver connection issue","body":"<p>We are trying to connect to a clickhouse server using jdbc drivers. Our code snippet is in scala and would not be much different in java</p>\n<pre><code>import java.util.Properties\nClass.forName(&quot;ru.yandex.clickhouse.ClickHouseDriver&quot;)\n    var conn : Connection = null\n    try {\n      conn = DriverManager.getConnection(&quot;jdbc:clickhouse://xxxxxx:9001/db_name&quot;, &quot;usrname&quot;, &quot;pass&quot;)\n      val stmt = conn.createStatement()\n      val sql =s&quot;&quot;&quot;select 1&quot;&quot;&quot;.stripMargin\n      stmt.executeQuery(sql)\n    } finally {\n      if(conn != null)\n        conn.close()\n    }\n</code></pre>\n<p>We get the following error :</p>\n<pre><code>ClickHouseUnknownException: ClickHouse exception, code: 1002, host: xxxxxxx, port: 9001; xxxxxxxxx:9001 failed to respond\nCaused by: NoHttpResponseException: xxxxxxxxx:9001 failed to respond\n</code></pre>\n<p>We went through a few other pages mentioning the same error and in keeping with the advice there, we used the latest version of the driver (0.3.1-patch).</p>\n<p>We tried this with another driver too (clickhouse-native-jdbc) and got the same error.</p>\n<p>To add some more context, we tried using the python clickhouse-driver with the following code snippet -</p>\n<pre><code>from clickhouse_driver import Client\n\nconn = Client('xxxxxxxxxx', password='pass', port=9001, user='usrname', verify= False, secure=True)\nq1 =&quot;select * from db_name.table limit 5&quot;\nresult = conn.execute(q1)\nprint(result)\n</code></pre>\n<p>This works.</p>\n<p>We are not sure if this is only because of the ssl secure set to true and the verify set to false. If it is so, how should those be added to the drivers used above? If that is not the cause, what could the cause be?</p>\n"},{"tags":["java","mapping","mapstruct"],"answers":[{"tags":[],"owner":{"account_id":517968,"reputation":619,"user_id":2881548,"accept_rate":0,"display_name":"THM"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1637272251,"creation_date":1637272251,"answer_id":70027193,"question_id":70027027,"body_markdown":"looks like this solution is working:\r\n\r\n    @Mapping(expression = &quot;java(value.toString())&quot;, target = &quot;foo&quot;)\r\n    \r\nbut on different level (on parent object which contains field with type `Foo` )\r\nlike: \r\n\r\n    public class Bar {\r\n        Foo foo;\r\n    }\r\n\r\n","title":"How can I use &#39;toString()&#39; as source in org.mapstruct.Mapping?","body":"<p>looks like this solution is working:</p>\n<pre><code>@Mapping(expression = &quot;java(value.toString())&quot;, target = &quot;foo&quot;)\n</code></pre>\n<p>but on different level (on parent object which contains field with type <code>Foo</code> )\nlike:</p>\n<pre><code>public class Bar {\n    Foo foo;\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1128956,"reputation":19765,"user_id":1115491,"display_name":"Filip"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1637394783,"creation_date":1637394783,"answer_id":70044148,"question_id":70027027,"body_markdown":"MapStruct does not support generating mapping methods for Object to String like that.\r\n\r\nWhat you can do is to write your own custom method.\r\n\r\ne.g.\r\n\r\n```\r\ndefault String map(Foo value) {\r\n    return value != null ? value.toString() : null;\r\n}\r\n```","title":"How can I use &#39;toString()&#39; as source in org.mapstruct.Mapping?","body":"<p>MapStruct does not support generating mapping methods for Object to String like that.</p>\n<p>What you can do is to write your own custom method.</p>\n<p>e.g.</p>\n<pre><code>default String map(Foo value) {\n    return value != null ? value.toString() : null;\n}\n</code></pre>\n"}],"owner":{"account_id":517968,"reputation":619,"user_id":2881548,"accept_rate":0,"display_name":"THM"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2864,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"answer_count":2,"score":3,"last_activity_date":1637394783,"creation_date":1637271265,"question_id":70027027,"body_markdown":"\r\nI want to use `Foo::toString` as source in `@org.mapstruct.Mapping`\r\n\r\nSolutions below doesn&#39;t work:\r\n\r\n    @Mapping(source = &quot;value.toString()&quot;, target = &quot;date&quot;)\r\n    String map(Foo value);\r\n\r\n&gt; java: The type of parameter &quot;value&quot; has no property named &quot;toString()&quot;.\r\n\r\n    @Mapping(source = &quot;java(value.toString())&quot;, target = &quot;date&quot;)\r\n    String map(Foo value);\r\n\r\n&gt; java: No property named &quot;java(value.toString())&quot; exists in source parameter(s).\r\n\r\n----\r\n\r\n* I cannot change `Foo` class (no `Lombok` insite)\r\n* Mapper configuration: `@Mapper(componentModel = &quot;spring&quot;)`.\r\n* Any advice?\r\n\r\n----\r\n\r\nLet&#39;s define Foo as:\r\n\r\n    public class Foo {\r\n        private final int x;\r\n        public Foo(int x) {\r\n            this.x = x;\r\n        }\r\n        public String toString() {\r\n            return &quot;&quot; + this.x;\r\n        }\r\n    }\r\n\r\nusing:\r\n\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.mapstruct&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;mapstruct&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;1.4.2.Final&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n...\r\n\r\n\t\t\t&lt;plugin&gt;\r\n\t\t\t\t&lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n\t\t\t\t&lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\r\n\t\t\t\t&lt;version&gt;3.5.1&lt;/version&gt;\r\n\t\t\t\t&lt;configuration&gt;\r\n\t\t\t\t\t&lt;source&gt;1.8&lt;/source&gt;\r\n\t\t\t\t\t&lt;target&gt;1.8&lt;/target&gt;\r\n\t\t\t\t\t&lt;annotationProcessorPaths&gt;\r\n\t\t\t\t\t\t&lt;path&gt;\r\n\t\t\t\t\t\t\t&lt;groupId&gt;org.mapstruct&lt;/groupId&gt;\r\n\t\t\t\t\t\t\t&lt;artifactId&gt;mapstruct-processor&lt;/artifactId&gt;\r\n\t\t\t\t\t\t\t&lt;version&gt;1.4.2.Final&lt;/version&gt;\r\n\t\t\t\t\t\t&lt;/path&gt;\r\n\t\t\t\t\t&lt;/annotationProcessorPaths&gt;\r\n\t\t\t\t&lt;/configuration&gt;\r\n\t\t\t&lt;/plugin&gt;","title":"How can I use &#39;toString()&#39; as source in org.mapstruct.Mapping?","body":"<p>I want to use <code>Foo::toString</code> as source in <code>@org.mapstruct.Mapping</code></p>\n<p>Solutions below doesn't work:</p>\n<pre><code>@Mapping(source = &quot;value.toString()&quot;, target = &quot;date&quot;)\nString map(Foo value);\n</code></pre>\n<blockquote>\n<p>java: The type of parameter &quot;value&quot; has no property named &quot;toString()&quot;.</p>\n</blockquote>\n<pre><code>@Mapping(source = &quot;java(value.toString())&quot;, target = &quot;date&quot;)\nString map(Foo value);\n</code></pre>\n<blockquote>\n<p>java: No property named &quot;java(value.toString())&quot; exists in source parameter(s).</p>\n</blockquote>\n<hr />\n<ul>\n<li>I cannot change <code>Foo</code> class (no <code>Lombok</code> insite)</li>\n<li>Mapper configuration: <code>@Mapper(componentModel = &quot;spring&quot;)</code>.</li>\n<li>Any advice?</li>\n</ul>\n<hr />\n<p>Let's define Foo as:</p>\n<pre><code>public class Foo {\n    private final int x;\n    public Foo(int x) {\n        this.x = x;\n    }\n    public String toString() {\n        return &quot;&quot; + this.x;\n    }\n}\n</code></pre>\n<p>using:</p>\n<pre><code>    &lt;dependency&gt;\n        &lt;groupId&gt;org.mapstruct&lt;/groupId&gt;\n        &lt;artifactId&gt;mapstruct&lt;/artifactId&gt;\n        &lt;version&gt;1.4.2.Final&lt;/version&gt;\n    &lt;/dependency&gt;\n</code></pre>\n<p>...</p>\n<pre><code>        &lt;plugin&gt;\n            &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n            &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\n            &lt;version&gt;3.5.1&lt;/version&gt;\n            &lt;configuration&gt;\n                &lt;source&gt;1.8&lt;/source&gt;\n                &lt;target&gt;1.8&lt;/target&gt;\n                &lt;annotationProcessorPaths&gt;\n                    &lt;path&gt;\n                        &lt;groupId&gt;org.mapstruct&lt;/groupId&gt;\n                        &lt;artifactId&gt;mapstruct-processor&lt;/artifactId&gt;\n                        &lt;version&gt;1.4.2.Final&lt;/version&gt;\n                    &lt;/path&gt;\n                &lt;/annotationProcessorPaths&gt;\n            &lt;/configuration&gt;\n        &lt;/plugin&gt;\n</code></pre>\n"},{"tags":["java","spring"],"answers":[{"tags":[],"owner":{"account_id":3567671,"reputation":471,"user_id":2978795,"display_name":"Mohammad tanvirul islam"},"down_vote_count":0,"up_vote_count":11,"is_accepted":false,"score":11,"last_activity_date":1637392774,"creation_date":1437068134,"answer_id":31460928,"question_id":31459103,"body_markdown":"    //Return the Locale associated with the current thread,\r\n    // if any, or the   system default Locale else(English)   \r\n    LocaleContextHolder.getLocale();\r\n\r\nso first you have to check Locale of your current thread. \r\nIf you want to set Locale in current thread then use this code :\r\n \r\n    setLocale(Locale locale); LocaleContextHolder.getLocale() will return jp_JP locale","title":"How to get current Locale in Spring?","body":"<pre><code>//Return the Locale associated with the current thread,\n// if any, or the   system default Locale else(English)   \nLocaleContextHolder.getLocale();\n</code></pre>\n<p>so first you have to check Locale of your current thread.\nIf you want to set Locale in current thread then use this code :</p>\n<pre><code>setLocale(Locale locale); LocaleContextHolder.getLocale() will return jp_JP locale\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1727343,"reputation":6404,"user_id":1581725,"accept_rate":100,"display_name":"DominikAngerer"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1437071772,"creation_date":1437071285,"answer_id":31461853,"question_id":31459103,"body_markdown":"**RequestContextUtils**\r\n\r\nThis should allow you to get the current locale of your request:\r\n\r\n    RequestContextUtils.getLocaleResolver(request).resolveLocale(request);\r\n\r\nReturn the `LocaleResolver` that has been bound to the request by the `DispatcherServlet`.   \r\n@param `request` current HTTP request  \r\n@return the current `LocaleResolver`, or `{@code null}` if not found:   \r\n\r\n    public static LocaleResolver getLocaleResolver(HttpServletRequest request) {\r\n    \treturn (LocaleResolver) request.getAttribute(DispatcherServlet.LOCALE_RESOLVER_ATTRIBUTE);\r\n    }\r\n\r\nThis will return a LocaleResolver from where you than can load the locale.\r\n\r\n\r\n**LocaleContextHolder**\r\n\r\nOr as metioned by: Mohammad tanvirul islam:\r\n\r\n    LocaleContextHolder.getLocale();\r\n\r\nYou can have a look at the docu here:\r\n\r\n1. *RequestContextUtils*: http://docs.spring.io/spring/docs/current/javadoc-api/org/springframework/web/servlet/support/RequestContextUtils.html\r\n\r\n2. *LocaleResolver*: http://docs.spring.io/spring/docs/current/javadoc-api/org/springframework/web/servlet/LocaleResolver.html\r\n\r\n3. *LocaleContextHolder*: http://docs.spring.io/spring/docs/current/javadoc-api/org/springframework/context/i18n/LocaleContextHolder.html","title":"How to get current Locale in Spring?","body":"<p><strong>RequestContextUtils</strong></p>\n\n<p>This should allow you to get the current locale of your request:</p>\n\n<pre><code>RequestContextUtils.getLocaleResolver(request).resolveLocale(request);\n</code></pre>\n\n<p>Return the <code>LocaleResolver</code> that has been bound to the request by the <code>DispatcherServlet</code>.<br>\n@param <code>request</code> current HTTP request<br>\n@return the current <code>LocaleResolver</code>, or <code>{@code null}</code> if not found:   </p>\n\n<pre><code>public static LocaleResolver getLocaleResolver(HttpServletRequest request) {\n    return (LocaleResolver) request.getAttribute(DispatcherServlet.LOCALE_RESOLVER_ATTRIBUTE);\n}\n</code></pre>\n\n<p>This will return a LocaleResolver from where you than can load the locale.</p>\n\n<p><strong>LocaleContextHolder</strong></p>\n\n<p>Or as metioned by: Mohammad tanvirul islam:</p>\n\n<pre><code>LocaleContextHolder.getLocale();\n</code></pre>\n\n<p>You can have a look at the docu here:</p>\n\n<ol>\n<li><p><em>RequestContextUtils</em>: <a href=\"http://docs.spring.io/spring/docs/current/javadoc-api/org/springframework/web/servlet/support/RequestContextUtils.html\" rel=\"noreferrer\">http://docs.spring.io/spring/docs/current/javadoc-api/org/springframework/web/servlet/support/RequestContextUtils.html</a></p></li>\n<li><p><em>LocaleResolver</em>: <a href=\"http://docs.spring.io/spring/docs/current/javadoc-api/org/springframework/web/servlet/LocaleResolver.html\" rel=\"noreferrer\">http://docs.spring.io/spring/docs/current/javadoc-api/org/springframework/web/servlet/LocaleResolver.html</a></p></li>\n<li><p><em>LocaleContextHolder</em>: <a href=\"http://docs.spring.io/spring/docs/current/javadoc-api/org/springframework/context/i18n/LocaleContextHolder.html\" rel=\"noreferrer\">http://docs.spring.io/spring/docs/current/javadoc-api/org/springframework/context/i18n/LocaleContextHolder.html</a></p></li>\n</ol>\n"},{"tags":[],"owner":{"account_id":4709627,"reputation":58,"user_id":3810567,"display_name":"eightechess"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1559437630,"creation_date":1559437630,"answer_id":56411526,"question_id":31459103,"body_markdown":"There are several ways to create a Locale object.To get the current Local object.\r\n\r\n    \r\n    Locale locale = LocaleContextHolder.getLocale();\r\nor\r\n    \r\n    Locale locale;\r\n\r\nto get the current language\r\n\r\n    Locale locale;\r\n    locale.getLanguage()\r\n    \r\n    Locale locales = LocaleContextHolder.getLocale();\r\n    locales.getLanguage();\r\n\r\n\r\n","title":"How to get current Locale in Spring?","body":"<p>There are several ways to create a Locale object.To get the current Local object.</p>\n\n<pre><code>Locale locale = LocaleContextHolder.getLocale();\n</code></pre>\n\n<p>or</p>\n\n<pre><code>Locale locale;\n</code></pre>\n\n<p>to get the current language</p>\n\n<pre><code>Locale locale;\nlocale.getLanguage()\n\nLocale locales = LocaleContextHolder.getLocale();\nlocales.getLanguage();\n</code></pre>\n"},{"tags":[],"owner":{"account_id":13694632,"reputation":411,"user_id":9881640,"display_name":"Vipul Gupta"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1614844696,"creation_date":1614844696,"answer_id":66470770,"question_id":31459103,"body_markdown":"Giving a simple example for this.Let say you have resource as :Pick any one code\r\n        \r\n       \r\n    \r\n     @Autowired\r\n    \tprivate MessageSource messageSource;\r\n    \r\n    @GetMapping(path = &quot;/hello-world-I18N&quot;)\r\n    \tpublic String helloWorldInternationalize() {\r\n    \t\treturn messageSource.getMessage(&quot;good.morning.message&quot;, null, \r\n                LocaleContextHolder.getLocale());\r\n    \t}\r\n   \r\n\r\n    @GetMapping(path = &quot;/hello-world-I18N&quot;)\r\n    public String helloWorldInternationalize(@RequestHeader(name = &quot;Accept-Header&quot;, required = false) Locale locale) {\r\n    \treturn messageSource.getMessage(&quot;good.morning.message&quot;, null, locale);\r\n    }\r\n\r\nNow in request with POSTMAN send in Headers as :\r\n Accept-Language : US/FN etc any you want.\r\n        \r\nConfigure one LocaleResolver for the same:\r\n        \r\n            @Bean\r\n        \tpublic LocaleResolver localeResolver() {\r\n        \t\tAcceptHeaderLocaleResolver localeResolver = new AcceptHeaderLocaleResolver();\r\n        \t\tlocaleResolver.setDefaultLocale(Locale.US); // set default to US\r\n        \t\treturn localeResolver;\r\n        \t} \r\n        \r\n Now in application.properties file add \r\n spring.messages.basename=message  // message is base name for your properties file.\r\n        \r\n        \r\n Add more file in resource folder with name as : message_fr.properties, message.properties\r\n     and add the content here. like (good.morning.message = Bonjour)\r\n        \r\n the code will work fine.\r\n","title":"How to get current Locale in Spring?","body":"<p>Giving a simple example for this.Let say you have resource as :Pick any one code</p>\n<pre><code> @Autowired\n    private MessageSource messageSource;\n\n@GetMapping(path = &quot;/hello-world-I18N&quot;)\n    public String helloWorldInternationalize() {\n        return messageSource.getMessage(&quot;good.morning.message&quot;, null, \n            LocaleContextHolder.getLocale());\n    }\n\n\n@GetMapping(path = &quot;/hello-world-I18N&quot;)\npublic String helloWorldInternationalize(@RequestHeader(name = &quot;Accept-Header&quot;, required = false) Locale locale) {\n    return messageSource.getMessage(&quot;good.morning.message&quot;, null, locale);\n}\n</code></pre>\n<p>Now in request with POSTMAN send in Headers as :\nAccept-Language : US/FN etc any you want.</p>\n<p>Configure one LocaleResolver for the same:</p>\n<pre><code>        @Bean\n        public LocaleResolver localeResolver() {\n            AcceptHeaderLocaleResolver localeResolver = new AcceptHeaderLocaleResolver();\n            localeResolver.setDefaultLocale(Locale.US); // set default to US\n            return localeResolver;\n        } \n    \n</code></pre>\n<p>Now in application.properties file add\nspring.messages.basename=message  // message is base name for your properties file.</p>\n<p>Add more file in resource folder with name as : message_fr.properties, message.properties\nand add the content here. like (good.morning.message = Bonjour)</p>\n<p>the code will work fine.</p>\n"}],"owner":{"account_id":5733749,"reputation":1003,"user_id":4528545,"accept_rate":50,"display_name":"JohnWinter"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":32912,"favorite_count":0,"down_vote_count":0,"up_vote_count":12,"answer_count":4,"score":12,"last_activity_date":1637392774,"creation_date":1437062200,"question_id":31459103,"body_markdown":"I use this method \r\n\r\n`LocaleContextHolder.getLocale()` \r\n\r\nto get switched locale (Japanise) but it returns me English (default). How can I retrieve the jp_JP locale?","title":"How to get current Locale in Spring?","body":"<p>I use this method </p>\n\n<p><code>LocaleContextHolder.getLocale()</code> </p>\n\n<p>to get switched locale (Japanise) but it returns me English (default). How can I retrieve the jp_JP locale?</p>\n"},{"tags":["java","android"],"comments":[{"owner":{"account_id":16768304,"reputation":8503,"user_id":12121419,"display_name":"blackapps"},"score":0,"creation_date":1637392744,"post_id":70043887,"comment_id":123818980,"body_markdown":"Catch that exception and you are done. Or maybe you should set a mime tipe.","body":"Catch that exception and you are done. Or maybe you should set a mime tipe."}],"answers":[{"tags":[],"owner":{"account_id":11440512,"reputation":2403,"user_id":8386274,"display_name":"chand mohd"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1637392621,"creation_date":1637392621,"answer_id":70043969,"question_id":70043887,"body_markdown":"Check if device has any app that can handle url\r\n\r\n**Kotlin**\r\n\r\n    if (resolveActivity(packageManager) != null) {\r\n            Uri uri = Uri.parse(url);\r\n            Intent intent = new Intent(Intent.ACTION_VIEW, uri);\r\n            getContext().startActivity(intent);\r\n            return true;\r\n        }","title":"ActivityNotFoundException: No Activity found to handle Intent { act= dat=&quot;url&quot;","body":"<p>Check if device has any app that can handle url</p>\n<p><strong>Kotlin</strong></p>\n<pre><code>if (resolveActivity(packageManager) != null) {\n        Uri uri = Uri.parse(url);\n        Intent intent = new Intent(Intent.ACTION_VIEW, uri);\n        getContext().startActivity(intent);\n        return true;\n    }\n</code></pre>\n"}],"owner":{"account_id":23399099,"reputation":1,"user_id":17462550,"display_name":"Saint Mafia"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":145,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1637392621,"creation_date":1637391563,"question_id":70043887,"body_markdown":"I received a log during debugging  \r\nHe appeared on some mobile phones, and I don&#39;t know how to make it reappear  \r\nThe following is the error log and source code\r\noh,This link points to an advertisement   \r\nBut I didn&#39;t open the ad  \r\nI suspect it&#39;s advertising on the web  \r\nand act is null!  I don&#39;t understand\r\n```\r\nandroid.content.ActivityNotFoundException: No Activity found to handle Intent { act= dat=https://mob66.bbzwonline.com/... }\r\n\tat android.app.Instrumentation.checkStartActivityResult(Instrumentation.java:2066)\r\n\tat android.app.Instrumentation.execStartActivity(Instrumentation.java:1720)\r\n\tat android.app.Activity.startActivityForResult(Activity.java:5258)\r\n\tat androidx.fragment.app.FragmentActivity.startActivityForResult(FragmentActivity.java:676)\r\n\tat android.app.Activity.startActivityForResult(Activity.java:5216)\r\n\tat androidx.fragment.app.FragmentActivity.startActivityForResult(FragmentActivity.java:663)\r\n\tat android.app.Activity.startActivity(Activity.java:5587)\r\n\tat android.app.Activity.startActivity(Activity.java:5555)\r\n\tat com.ruifenglb.www.ad.AdWebView$1.shouldOverrideUrlLoading(AdWebView.java:55)\r\n\tat android.webkit.WebViewClient.shouldOverrideUrlLoading(WebViewClient.java:83)\r\n\tat org.chromium.android_webview.AwContentsClientBridge.shouldOverrideUrlLoading(chromium-TrichromeWebViewGoogle.apk-stable-410410183:16)\r\n\tat android.os.MessageQueue.nativePollOnce(Native Method)\r\n\tat android.os.MessageQueue.next(MessageQueue.java:336)\r\n\tat android.os.Looper.loop(Looper.java:181)\r\n\tat android.app.ActivityThread.main(ActivityThread.java:7562)\r\n\tat java.lang.reflect.Method.invoke(Native Method)\r\n\tat com.android.internal.os.RuntimeInit$MethodAndArgsCaller.run(RuntimeInit.java:539)\r\n\tat com.android.internal.os.ZygoteInit.main(ZygoteInit.java:950)\r\n```\r\n\r\ncode\r\n```\r\n@SuppressLint(&quot;SetJavaScriptEnabled&quot;)\r\n    private void initSetting() {\r\n        addJavascriptInterface(new AdJavascriptInterface(), &quot;AdJavascriptInterface&quot;);\r\n        setWebViewClient(new WebViewClient() {\r\n            @Override\r\n            public void onPageFinished(WebView webView, String s) {\r\n                webView.loadUrl(&quot;javascript:(&quot; + jsimg + &quot;)()&quot;);\r\n                EventBus.getDefault().postSticky(new CloseSplashEvent());\r\n            }\r\n\r\n            @Override\r\n            public boolean shouldOverrideUrlLoading(WebView view, String url) {\r\n                Uri uri = Uri.parse(url);\r\n                Intent intent = new Intent(Intent.ACTION_VIEW, uri);\r\n                getContext().startActivity(intent);\r\n                return true;\r\n            }\r\n\r\n        });\r\n\r\n        WebSettings webSettings = getSettings();\r\n        webSettings.setJavaScriptEnabled(true);\r\n        webSettings.setUseWideViewPort(true);\r\n        webSettings.setLoadWithOverviewMode(true);\r\n        webSettings.setLoadsImagesAutomatically(true);\r\n    }\r\n```","title":"ActivityNotFoundException: No Activity found to handle Intent { act= dat=&quot;url&quot;","body":"<p>I received a log during debugging<br />\nHe appeared on some mobile phones, and I don't know how to make it reappear<br />\nThe following is the error log and source code\noh,This link points to an advertisement<br />\nBut I didn't open the ad<br />\nI suspect it's advertising on the web<br />\nand act is null!  I don't understand</p>\n<pre><code>android.content.ActivityNotFoundException: No Activity found to handle Intent { act= dat=https://mob66.bbzwonline.com/... }\n    at android.app.Instrumentation.checkStartActivityResult(Instrumentation.java:2066)\n    at android.app.Instrumentation.execStartActivity(Instrumentation.java:1720)\n    at android.app.Activity.startActivityForResult(Activity.java:5258)\n    at androidx.fragment.app.FragmentActivity.startActivityForResult(FragmentActivity.java:676)\n    at android.app.Activity.startActivityForResult(Activity.java:5216)\n    at androidx.fragment.app.FragmentActivity.startActivityForResult(FragmentActivity.java:663)\n    at android.app.Activity.startActivity(Activity.java:5587)\n    at android.app.Activity.startActivity(Activity.java:5555)\n    at com.ruifenglb.www.ad.AdWebView$1.shouldOverrideUrlLoading(AdWebView.java:55)\n    at android.webkit.WebViewClient.shouldOverrideUrlLoading(WebViewClient.java:83)\n    at org.chromium.android_webview.AwContentsClientBridge.shouldOverrideUrlLoading(chromium-TrichromeWebViewGoogle.apk-stable-410410183:16)\n    at android.os.MessageQueue.nativePollOnce(Native Method)\n    at android.os.MessageQueue.next(MessageQueue.java:336)\n    at android.os.Looper.loop(Looper.java:181)\n    at android.app.ActivityThread.main(ActivityThread.java:7562)\n    at java.lang.reflect.Method.invoke(Native Method)\n    at com.android.internal.os.RuntimeInit$MethodAndArgsCaller.run(RuntimeInit.java:539)\n    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:950)\n</code></pre>\n<p>code</p>\n<pre><code>@SuppressLint(&quot;SetJavaScriptEnabled&quot;)\n    private void initSetting() {\n        addJavascriptInterface(new AdJavascriptInterface(), &quot;AdJavascriptInterface&quot;);\n        setWebViewClient(new WebViewClient() {\n            @Override\n            public void onPageFinished(WebView webView, String s) {\n                webView.loadUrl(&quot;javascript:(&quot; + jsimg + &quot;)()&quot;);\n                EventBus.getDefault().postSticky(new CloseSplashEvent());\n            }\n\n            @Override\n            public boolean shouldOverrideUrlLoading(WebView view, String url) {\n                Uri uri = Uri.parse(url);\n                Intent intent = new Intent(Intent.ACTION_VIEW, uri);\n                getContext().startActivity(intent);\n                return true;\n            }\n\n        });\n\n        WebSettings webSettings = getSettings();\n        webSettings.setJavaScriptEnabled(true);\n        webSettings.setUseWideViewPort(true);\n        webSettings.setLoadWithOverviewMode(true);\n        webSettings.setLoadsImagesAutomatically(true);\n    }\n</code></pre>\n"},{"tags":["java","android","dialog","fragment","dialogfragment"],"comments":[{"owner":{"account_id":1849514,"reputation":193868,"user_id":1676363,"accept_rate":100,"display_name":"ianhanniballake"},"score":0,"creation_date":1637389658,"post_id":70043663,"comment_id":123818620,"body_markdown":"What do you mean &#39;still not working&#39;? Do you mean before you click the &#39;Allow&#39; button, you can click outside of the dialog to dismiss the dialog?","body":"What do you mean &#39;still not working&#39;? Do you mean before you click the &#39;Allow&#39; button, you can click outside of the dialog to dismiss the dialog?"},{"owner":{"account_id":3397419,"reputation":38710,"user_id":2850651,"display_name":"Mike M."},"score":0,"creation_date":1637389682,"post_id":70043663,"comment_id":123818623,"body_markdown":"You need to call `setCancelable()` on the `DialogFragment` instead of on the `Dialog`/`Builder`; e.g., just `setCancelable(false);` before setting up the `AlertDialog`.","body":"You need to call <code>setCancelable()</code> on the <code>DialogFragment</code> instead of on the <code>Dialog</code>/<code>Builder</code>; e.g., just <code>setCancelable(false);</code> before setting up the <code>AlertDialog</code>."},{"owner":{"account_id":16285599,"reputation":574,"user_id":11760447,"display_name":"Nadim Ansari"},"score":0,"creation_date":1637391514,"post_id":70043663,"comment_id":123818809,"body_markdown":"Why you are building another dialog in Fragment?","body":"Why you are building another dialog in Fragment?"}],"answers":[{"tags":[],"owner":{"account_id":11499040,"reputation":158,"user_id":11130032,"display_name":"Alireza Haji gholamreza"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1637390912,"creation_date":1637390912,"answer_id":70043828,"question_id":70043663,"body_markdown":"You dont need to builder! you are inside dialog fragment \r\ntry this one **setCancelable(false)**\r\ninsted of using **builder.setCancelable(false)**\r\n","title":"DialogFragment SetCancelable(false) not working","body":"<p>You dont need to builder! you are inside dialog fragment\ntry this one <strong>setCancelable(false)</strong>\ninsted of using <strong>builder.setCancelable(false)</strong></p>\n"},{"tags":[],"owner":{"account_id":23205820,"reputation":124,"user_id":17300051,"display_name":"droid24"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1637392277,"creation_date":1637392277,"answer_id":70043942,"question_id":70043663,"body_markdown":"You don&#39;t need to associate setCancelable with the builder. write setCancelable method directly because you are inside a DialogFragment\r\n\r\n       AlertDialog.Builder builder = new AlertDialog.Builder(requireContext());\r\n                builder.setTitle(&quot;Usage Access Permission&quot;);\r\n                builder.setMessage(&quot;Grant Usage Access permission&quot;);\r\n                setCancelable(false); // this line\r\n                builder.setPositiveButton(&quot;Allow&quot;, new DialogInterface.OnClickListener() {\r\n                    @Override\r\n                    public void onClick(DialogInterface dialogInterface, int i) {\r\n                        tartActivityForResult(\r\n                                new Intent(Settings.ACTION_USAGE_ACCESS_SETTINGS),\r\n                                MY_PERMISSIONS_REQUEST_PACKAGE_USAGE_STATS);\r\n                    }\r\n                });\r\n        \r\n                return builder.create();\r\n            }","title":"DialogFragment SetCancelable(false) not working","body":"<p>You don't need to associate setCancelable with the builder. write setCancelable method directly because you are inside a DialogFragment</p>\n<pre><code>   AlertDialog.Builder builder = new AlertDialog.Builder(requireContext());\n            builder.setTitle(&quot;Usage Access Permission&quot;);\n            builder.setMessage(&quot;Grant Usage Access permission&quot;);\n            setCancelable(false); // this line\n            builder.setPositiveButton(&quot;Allow&quot;, new DialogInterface.OnClickListener() {\n                @Override\n                public void onClick(DialogInterface dialogInterface, int i) {\n                    tartActivityForResult(\n                            new Intent(Settings.ACTION_USAGE_ACCESS_SETTINGS),\n                            MY_PERMISSIONS_REQUEST_PACKAGE_USAGE_STATS);\n                }\n            });\n    \n            return builder.create();\n        }\n</code></pre>\n"}],"owner":{"account_id":23253143,"reputation":21,"user_id":17340584,"display_name":"Jin Appsdev"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":592,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1637392277,"creation_date":1637388516,"question_id":70043663,"body_markdown":"Please help me guys. I tried to put SetCancelable(false) in dialogfragment but still not working.\r\n\r\nthis is my DialogFragment:\r\n\r\n\r\n\r\n\r\n        public static class UsageAcessDialogFragment extends DialogFragment {\r\n        @Override\r\n        public Dialog onCreateDialog(Bundle savedInstanceState) {\r\n            // Use the Builder class for convenient dialog construction\r\n            AlertDialog.Builder builder = new AlertDialog.Builder(getActivity());\r\n\r\n            builder.setMessage(&quot;Grant Usage Access permission&quot;)\r\n\t\t\t\t.setTitle(&quot;Usage Access Permission&quot;)\r\n\t\t\t\t.setCancelable(false)\r\n\t\t\t\t.setPositiveButton(&quot;Allow&quot;, new DialogInterface.OnClickListener() {\r\n\t\t\t\t\tpublic void onClick(DialogInterface dialog, int id) {\r\n\t\t\t\t\t\t// FIRE ZE MISSILES!\r\n\t\t\t\t\t\tstartActivityForResult(\r\n\t\t\t\t\t\t\tnew Intent(Settings.ACTION_USAGE_ACCESS_SETTINGS),\r\n\t\t\t\t\t\t\tMY_PERMISSIONS_REQUEST_PACKAGE_USAGE_STATS);\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\r\n            // Create the AlertDialog object and return it\r\n            return builder.create();\r\n        }\r\n    }\r\n\r\n\r\nThank you for those who will comment. ","title":"DialogFragment SetCancelable(false) not working","body":"<p>Please help me guys. I tried to put SetCancelable(false) in dialogfragment but still not working.</p>\n<p>this is my DialogFragment:</p>\n<pre><code>    public static class UsageAcessDialogFragment extends DialogFragment {\n    @Override\n    public Dialog onCreateDialog(Bundle savedInstanceState) {\n        // Use the Builder class for convenient dialog construction\n        AlertDialog.Builder builder = new AlertDialog.Builder(getActivity());\n\n        builder.setMessage(&quot;Grant Usage Access permission&quot;)\n            .setTitle(&quot;Usage Access Permission&quot;)\n            .setCancelable(false)\n            .setPositiveButton(&quot;Allow&quot;, new DialogInterface.OnClickListener() {\n                public void onClick(DialogInterface dialog, int id) {\n                    // FIRE ZE MISSILES!\n                    startActivityForResult(\n                        new Intent(Settings.ACTION_USAGE_ACCESS_SETTINGS),\n                        MY_PERMISSIONS_REQUEST_PACKAGE_USAGE_STATS);\n                }\n            });\n\n        // Create the AlertDialog object and return it\n        return builder.create();\n    }\n}\n</code></pre>\n<p>Thank you for those who will comment.</p>\n"},{"tags":["java","swing","nullpointerexception","imageicon"],"comments":[{"owner":{"account_id":4470050,"reputation":68258,"user_id":3636601,"accept_rate":75,"display_name":"Jens"},"score":0,"creation_date":1637300323,"post_id":70030243,"comment_id":123794614,"body_markdown":"Add a slash before shop_removebg.png","body":"Add a slash before shop_removebg.png"},{"owner":{"account_id":10481134,"reputation":23,"user_id":7726107,"display_name":"Kheya_COU"},"score":0,"creation_date":1637300627,"post_id":70030243,"comment_id":123794657,"body_markdown":"@Jens i added but it shows the same error.","body":"@Jens i added but it shows the same error."},{"owner":{"account_id":4470050,"reputation":68258,"user_id":3636601,"accept_rate":75,"display_name":"Jens"},"score":0,"creation_date":1637300790,"post_id":70030243,"comment_id":123794692,"body_markdown":"Where is the image located?","body":"Where is the image located?"},{"owner":{"account_id":10481134,"reputation":23,"user_id":7726107,"display_name":"Kheya_COU"},"score":0,"creation_date":1637300909,"post_id":70030243,"comment_id":123794721,"body_markdown":"at the same folder of java file.","body":"at the same folder of java file."},{"owner":{"account_id":10481134,"reputation":23,"user_id":7726107,"display_name":"Kheya_COU"},"score":0,"creation_date":1637311577,"post_id":70030243,"comment_id":123797547,"body_markdown":"@Abra Thanks a lot.I&#39;m trying the solutions.","body":"@Abra Thanks a lot.I&#39;m trying the solutions."},{"owner":{"account_id":183279,"reputation":168313,"user_id":418556,"accept_rate":98,"display_name":"Andrew Thompson"},"score":0,"creation_date":1637337315,"post_id":70030243,"comment_id":123807356,"body_markdown":"*&quot;I saw that there&#39;s so many questions &amp; answers related to null pointer exception but no one worked for me.&quot;* Link the top 3 &amp; explain why they did not work for you. We see questions like this every other day. with very little evidence the questioner has done even basic research.","body":"<i>&quot;I saw that there&#39;s so many questions &amp; answers related to null pointer exception but no one worked for me.&quot;</i> Link the top 3 &amp; explain why they did not work for you. We see questions like this every other day. with very little evidence the questioner has done even basic research."},{"owner":{"account_id":10481134,"reputation":23,"user_id":7726107,"display_name":"Kheya_COU"},"score":0,"creation_date":1637386984,"post_id":70030243,"comment_id":123818279,"body_markdown":"@AndrewThompson i&#39;ve added four pictures on my post. I tried in many ways.Still found no solution.","body":"@AndrewThompson i&#39;ve added four pictures on my post. I tried in many ways.Still found no solution."},{"owner":{"account_id":183279,"reputation":168313,"user_id":418556,"accept_rate":98,"display_name":"Andrew Thompson"},"score":0,"creation_date":1637388398,"post_id":70030243,"comment_id":123818432,"body_markdown":"Please, do not post images of what should be 4 lines of code, or even more importantly, Four strings used as the arguments to `getResource`. The image did, however, reveal something important in the package / project structure. First a warning, the IDE might not even be including the image in the built jar. Resources usually go in a `resources` directory. But if the image ***is*** copied into the built resources, the valid path string will be `&quot;/com/mycompany/supershop/shop_removebg.png&quot;`.","body":"Please, do not post images of what should be 4 lines of code, or even more importantly, Four strings used as the arguments to <code>getResource</code>. The image did, however, reveal something important in the package / project structure. First a warning, the IDE might not even be including the image in the built jar. Resources usually go in a <code>resources</code> directory. But if the image <b><i>is</i></b> copied into the built resources, the valid path string will be <code>&quot;&#47;com&#47;mycompany&#47;supershop&#47;shop_removebg.png&quot;</code>."},{"owner":{"account_id":10481134,"reputation":23,"user_id":7726107,"display_name":"Kheya_COU"},"score":0,"creation_date":1637389903,"post_id":70030243,"comment_id":123818636,"body_markdown":"Thanks a lot @AndrewThompson . Now it&#39;s working &amp; not showing nullPointerException but the image isn&#39;t showing in jlabel. You helped me to get rid of the main problem.Could you please tell me why the image is absent in jlabel?Please.. ..I tried these lines.\nImageIcon icon = new ImageIcon(&quot;/com/mycompany/supershop/shop_removebg.png&quot;);\n        Image img1=icon.getImage();\n        Image img2 = img1.getScaledInstance(jLabel1.getWidth(),jLabel1.getHeight(),Image.SCALE_SMOOTH);\n        ImageIcon i=new ImageIcon(img2);\n        jLabel1.setIcon(i);","body":"Thanks a lot @AndrewThompson . Now it&#39;s working &amp; not showing nullPointerException but the image isn&#39;t showing in jlabel. You helped me to get rid of the main problem.Could you please tell me why the image is absent in jlabel?Please.. ..I tried these lines. ImageIcon icon = new ImageIcon(&quot;/com/mycompany/supershop/shop_removebg.png&quot;);         Image img1=icon.getImage();         Image img2 = img1.getScaledInstance(jLabel1.getWidth(),jLabel1.getHeight(&zwnj;&#8203;),Image.SCALE_SMOOTH&zwnj;&#8203;);         ImageIcon i=new ImageIcon(img2);         jLabel1.setIcon(i);"},{"owner":{"account_id":10481134,"reputation":23,"user_id":7726107,"display_name":"Kheya_COU"},"score":0,"creation_date":1637390090,"post_id":70030243,"comment_id":123818652,"body_markdown":"&quot;the IDE might not even be including the image in the built jar&quot; how to check this &amp;  get rid of this?","body":"&quot;the IDE might not even be including the image in the built jar&quot; how to check this &amp;  get rid of this?"},{"owner":{"account_id":183279,"reputation":168313,"user_id":418556,"accept_rate":98,"display_name":"Andrew Thompson"},"score":0,"creation_date":1637391272,"post_id":70030243,"comment_id":123818778,"body_markdown":"*&quot;Could you please tell me why the image is absent..&quot;* Possibly. Start a new question thread about that. It seems this one is solved (please accept answer below).","body":"<i>&quot;Could you please tell me why the image is absent..&quot;</i> Possibly. Start a new question thread about that. It seems this one is solved (please accept answer below)."}],"answers":[{"tags":[],"owner":{"account_id":183279,"reputation":168313,"user_id":418556,"accept_rate":98,"display_name":"Andrew Thompson"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1637391185,"creation_date":1637391185,"answer_id":70043854,"question_id":70030243,"body_markdown":"Given the project structure, the valid path string to the image will be: \r\n\r\n    &quot;/com/mycompany/supershop/shop_removebg.png&quot;\r\n\r\nAlways use the `/` prefix to indicate a search from the root of the classpath. ","title":"&quot;Exception in thread &quot;AWT-EventQueue-0&quot; java.lang.NullPointerException&quot; occurs while adding images using ImageIcon","body":"<p>Given the project structure, the valid path string to the image will be:</p>\n<pre><code>&quot;/com/mycompany/supershop/shop_removebg.png&quot;\n</code></pre>\n<p>Always use the <code>/</code> prefix to indicate a search from the root of the classpath.</p>\n"}],"owner":{"account_id":10481134,"reputation":23,"user_id":7726107,"display_name":"Kheya_COU"},"comment_count":11,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1037,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"accepted_answer_id":70043854,"answer_count":1,"score":0,"last_activity_date":1637391185,"creation_date":1637299489,"question_id":70030243,"body_markdown":"\r\nFirstly i applied panel on whole background &amp; then created a label to set an image here.\r\n[JFrame picture][1]\r\n\r\n\r\nI saw that there&#39;s so many questions &amp; answers related to null pointer exception but no one worked for me. the ImageIcon is not being able to fetch the image. I even tried by creating a folder &amp; gave the path but the error remains same.\r\nNetbeans: 12.5\r\njdk:8\r\nPlease help me.Thanks in advance.\r\n\r\n\r\n\r\n    \r\n    package com.mycompany.supershop;\r\n    import java.awt.Image;\r\n    import java.awt.Toolkit;\r\n    import javax.print.DocFlavor.URL;\r\n    import javax.swing.ImageIcon;\r\n    public class add_image extends javax.swing.JFrame {\r\n    \r\n        public add_image() {\r\n            initComponents();\r\n            \r\n            ImageIcon img= new ImageIcon(Toolkit.getDefaultToolkit().getImage(getClass().getResource(&quot;shop_removebg.png&quot;))); \r\n            Image img1=img.getImage();\r\n            Image img2 = img1.getScaledInstance(jLabel1.getWidth(),jLabel1.getHeight(),Image.SCALE_SMOOTH);\r\n            ImageIcon i=new ImageIcon(img2);\r\n            jLabel1.setIcon(i);\r\n    \r\n    \r\n        @SuppressWarnings(&quot;unchecked&quot;)\r\n        // &lt;editor-fold defaultstate=&quot;collapsed&quot; desc=&quot;Generated Code&quot;&gt;                          \r\n        private void initComponents() {\r\n    \r\n            jPanel1 = new javax.swing.JPanel();\r\n            jLabel1 = new javax.swing.JLabel();\r\n    \r\n            setDefaultCloseOperation(javax.swing.WindowConstants.EXIT_ON_CLOSE);\r\n    \r\n            jLabel1.setText(&quot;jLabel1&quot;);\r\n    \r\n            javax.swing.GroupLayout jPanel1Layout = new javax.swing.GroupLayout(jPanel1);\r\n            jPanel1.setLayout(jPanel1Layout);\r\n            jPanel1Layout.setHorizontalGroup(\r\n                jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)\r\n                .addGroup(jPanel1Layout.createSequentialGroup()\r\n                    .addGap(87, 87, 87)\r\n                    .addComponent(jLabel1, javax.swing.GroupLayout.PREFERRED_SIZE, 112, javax.swing.GroupLayout.PREFERRED_SIZE)\r\n                    .addContainerGap(303, Short.MAX_VALUE))\r\n            );\r\n            jPanel1Layout.setVerticalGroup(\r\n                jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)\r\n                .addGroup(jPanel1Layout.createSequentialGroup()\r\n                    .addGap(33, 33, 33)\r\n                    .addComponent(jLabel1, javax.swing.GroupLayout.PREFERRED_SIZE, 100, javax.swing.GroupLayout.PREFERRED_SIZE)\r\n                    .addContainerGap(158, Short.MAX_VALUE))\r\n            );\r\n    \r\n            javax.swing.GroupLayout layout = new javax.swing.GroupLayout(getContentPane());\r\n            getContentPane().setLayout(layout);\r\n            layout.setHorizontalGroup(\r\n                layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)\r\n                .addGroup(javax.swing.GroupLayout.Alignment.TRAILING, layout.createSequentialGroup()\r\n                    .addComponent(jPanel1, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)\r\n                    .addContainerGap())\r\n            );\r\n            layout.setVerticalGroup(\r\n                layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)\r\n                .addGroup(javax.swing.GroupLayout.Alignment.TRAILING, layout.createSequentialGroup()\r\n                    .addComponent(jPanel1, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)\r\n                    .addContainerGap())\r\n            );\r\n    \r\n            pack();\r\n        }                      \r\n    \r\n        public static void main(String args[]) {\r\n            \r\n            try {\r\n                for (javax.swing.UIManager.LookAndFeelInfo info : javax.swing.UIManager.getInstalledLookAndFeels()) {\r\n                    if (&quot;Nimbus&quot;.equals(info.getName())) {\r\n                        javax.swing.UIManager.setLookAndFeel(info.getClassName());\r\n                        break;\r\n                    }\r\n                }\r\n            } catch (ClassNotFoundException ex) {\r\n                java.util.logging.Logger.getLogger(add_image.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);\r\n            } catch (InstantiationException ex) {\r\n                java.util.logging.Logger.getLogger(add_image.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);\r\n            } catch (IllegalAccessException ex) {\r\n                java.util.logging.Logger.getLogger(add_image.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);\r\n            } catch (javax.swing.UnsupportedLookAndFeelException ex) {\r\n                java.util.logging.Logger.getLogger(add_image.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);\r\n            }\r\n          \r\n            java.awt.EventQueue.invokeLater(new Runnable() {\r\n                public void run() {\r\n                    new add_image().setVisible(true);\r\n                }\r\n            });\r\n        }            \r\n        private javax.swing.JLabel jLabel1;\r\n        private javax.swing.JPanel jPanel1;                \r\n    }\r\n\r\n\r\n\r\n\r\nThe error shows,\r\n\r\n    &gt; Exception in thread &quot;AWT-EventQueue-0&quot; java.lang.NullPointerException\r\n    \tat sun.awt.SunToolkit.imageCached(SunToolkit.java:899)\r\n    \tat sun.lwawt.macosx.LWCToolkit.getImage(LWCToolkit.java:549)\r\n    \tat com.mycompany.supershop.add_image.&lt;init&gt;(add_image.java:24)\r\n    \tat com.mycompany.supershop.add_image$1.run(add_image.java:107)\r\n    \tat java.awt.event.InvocationEvent.dispatch(InvocationEvent.java:311)\r\n    \tat java.awt.EventQueue.dispatchEventImpl(EventQueue.java:758)\r\n    \tat java.awt.EventQueue.access$500(EventQueue.java:97)\r\n    \tat java.awt.EventQueue$3.run(EventQueue.java:709)\r\n    \tat java.awt.EventQueue$3.run(EventQueue.java:703)\r\n    \tat java.security.AccessController.doPrivileged(Native Method)\r\n    \tat java.security.ProtectionDomain$JavaSecurityAccessImpl.doIntersectionPrivilege(ProtectionDomain.java:74)\r\n    \tat java.awt.EventQueue.dispatchEvent(EventQueue.java:728)\r\n    \tat java.awt.EventDispatchThread.pumpOneEventForFilters(EventDispatchThread.java:205)\r\n    \tat java.awt.EventDispatchThread.pumpEventsForFilter(EventDispatchThread.java:116)\r\n    \tat java.awt.EventDispatchThread.pumpEventsForHierarchy(EventDispatchThread.java:105)\r\n    \tat java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:101)\r\n    \tat java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:93)\r\n    \tat java.awt.EventDispatchThread.run(EventDispatchThread.java:82)\r\n    ------------------------------------------------------------------------\r\n\r\nThe problem is in this line,\r\n\r\n    ImageIcon img= new ImageIcon(Toolkit.getDefaultToolkit().getImage(getClass().getResource(&quot;shop_removebg.png&quot;))); \r\n\r\n\r\nimages on request to show the errors:\r\n\r\n&gt; [picture1][2] [picture2][3] [picture3][4] [picture4][5]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/kUHf9.png\r\n  [2]: https://i.stack.imgur.com/VGj1g.png\r\n  [3]: https://i.stack.imgur.com/M3Zrl.png\r\n  [4]: https://i.stack.imgur.com/hZ1XY.png\r\n  [5]: https://i.stack.imgur.com/oqorU.png","title":"&quot;Exception in thread &quot;AWT-EventQueue-0&quot; java.lang.NullPointerException&quot; occurs while adding images using ImageIcon","body":"<p>Firstly i applied panel on whole background &amp; then created a label to set an image here.\n<a href=\"https://i.stack.imgur.com/kUHf9.png\" rel=\"nofollow noreferrer\">JFrame picture</a></p>\n<p>I saw that there's so many questions &amp; answers related to null pointer exception but no one worked for me. the ImageIcon is not being able to fetch the image. I even tried by creating a folder &amp; gave the path but the error remains same.\nNetbeans: 12.5\njdk:8\nPlease help me.Thanks in advance.</p>\n<pre><code>package com.mycompany.supershop;\nimport java.awt.Image;\nimport java.awt.Toolkit;\nimport javax.print.DocFlavor.URL;\nimport javax.swing.ImageIcon;\npublic class add_image extends javax.swing.JFrame {\n\n    public add_image() {\n        initComponents();\n        \n        ImageIcon img= new ImageIcon(Toolkit.getDefaultToolkit().getImage(getClass().getResource(&quot;shop_removebg.png&quot;))); \n        Image img1=img.getImage();\n        Image img2 = img1.getScaledInstance(jLabel1.getWidth(),jLabel1.getHeight(),Image.SCALE_SMOOTH);\n        ImageIcon i=new ImageIcon(img2);\n        jLabel1.setIcon(i);\n\n\n    @SuppressWarnings(&quot;unchecked&quot;)\n    // &lt;editor-fold defaultstate=&quot;collapsed&quot; desc=&quot;Generated Code&quot;&gt;                          \n    private void initComponents() {\n\n        jPanel1 = new javax.swing.JPanel();\n        jLabel1 = new javax.swing.JLabel();\n\n        setDefaultCloseOperation(javax.swing.WindowConstants.EXIT_ON_CLOSE);\n\n        jLabel1.setText(&quot;jLabel1&quot;);\n\n        javax.swing.GroupLayout jPanel1Layout = new javax.swing.GroupLayout(jPanel1);\n        jPanel1.setLayout(jPanel1Layout);\n        jPanel1Layout.setHorizontalGroup(\n            jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)\n            .addGroup(jPanel1Layout.createSequentialGroup()\n                .addGap(87, 87, 87)\n                .addComponent(jLabel1, javax.swing.GroupLayout.PREFERRED_SIZE, 112, javax.swing.GroupLayout.PREFERRED_SIZE)\n                .addContainerGap(303, Short.MAX_VALUE))\n        );\n        jPanel1Layout.setVerticalGroup(\n            jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)\n            .addGroup(jPanel1Layout.createSequentialGroup()\n                .addGap(33, 33, 33)\n                .addComponent(jLabel1, javax.swing.GroupLayout.PREFERRED_SIZE, 100, javax.swing.GroupLayout.PREFERRED_SIZE)\n                .addContainerGap(158, Short.MAX_VALUE))\n        );\n\n        javax.swing.GroupLayout layout = new javax.swing.GroupLayout(getContentPane());\n        getContentPane().setLayout(layout);\n        layout.setHorizontalGroup(\n            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)\n            .addGroup(javax.swing.GroupLayout.Alignment.TRAILING, layout.createSequentialGroup()\n                .addComponent(jPanel1, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)\n                .addContainerGap())\n        );\n        layout.setVerticalGroup(\n            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)\n            .addGroup(javax.swing.GroupLayout.Alignment.TRAILING, layout.createSequentialGroup()\n                .addComponent(jPanel1, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)\n                .addContainerGap())\n        );\n\n        pack();\n    }                      \n\n    public static void main(String args[]) {\n        \n        try {\n            for (javax.swing.UIManager.LookAndFeelInfo info : javax.swing.UIManager.getInstalledLookAndFeels()) {\n                if (&quot;Nimbus&quot;.equals(info.getName())) {\n                    javax.swing.UIManager.setLookAndFeel(info.getClassName());\n                    break;\n                }\n            }\n        } catch (ClassNotFoundException ex) {\n            java.util.logging.Logger.getLogger(add_image.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);\n        } catch (InstantiationException ex) {\n            java.util.logging.Logger.getLogger(add_image.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);\n        } catch (IllegalAccessException ex) {\n            java.util.logging.Logger.getLogger(add_image.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);\n        } catch (javax.swing.UnsupportedLookAndFeelException ex) {\n            java.util.logging.Logger.getLogger(add_image.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);\n        }\n      \n        java.awt.EventQueue.invokeLater(new Runnable() {\n            public void run() {\n                new add_image().setVisible(true);\n            }\n        });\n    }            \n    private javax.swing.JLabel jLabel1;\n    private javax.swing.JPanel jPanel1;                \n}\n</code></pre>\n<p>The error shows,</p>\n<pre><code>&gt; Exception in thread &quot;AWT-EventQueue-0&quot; java.lang.NullPointerException\n    at sun.awt.SunToolkit.imageCached(SunToolkit.java:899)\n    at sun.lwawt.macosx.LWCToolkit.getImage(LWCToolkit.java:549)\n    at com.mycompany.supershop.add_image.&lt;init&gt;(add_image.java:24)\n    at com.mycompany.supershop.add_image$1.run(add_image.java:107)\n    at java.awt.event.InvocationEvent.dispatch(InvocationEvent.java:311)\n    at java.awt.EventQueue.dispatchEventImpl(EventQueue.java:758)\n    at java.awt.EventQueue.access$500(EventQueue.java:97)\n    at java.awt.EventQueue$3.run(EventQueue.java:709)\n    at java.awt.EventQueue$3.run(EventQueue.java:703)\n    at java.security.AccessController.doPrivileged(Native Method)\n    at java.security.ProtectionDomain$JavaSecurityAccessImpl.doIntersectionPrivilege(ProtectionDomain.java:74)\n    at java.awt.EventQueue.dispatchEvent(EventQueue.java:728)\n    at java.awt.EventDispatchThread.pumpOneEventForFilters(EventDispatchThread.java:205)\n    at java.awt.EventDispatchThread.pumpEventsForFilter(EventDispatchThread.java:116)\n    at java.awt.EventDispatchThread.pumpEventsForHierarchy(EventDispatchThread.java:105)\n    at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:101)\n    at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:93)\n    at java.awt.EventDispatchThread.run(EventDispatchThread.java:82)\n------------------------------------------------------------------------\n</code></pre>\n<p>The problem is in this line,</p>\n<pre><code>ImageIcon img= new ImageIcon(Toolkit.getDefaultToolkit().getImage(getClass().getResource(&quot;shop_removebg.png&quot;))); \n</code></pre>\n<p>images on request to show the errors:</p>\n<blockquote>\n<p><a href=\"https://i.stack.imgur.com/VGj1g.png\" rel=\"nofollow noreferrer\">picture1</a> <a href=\"https://i.stack.imgur.com/M3Zrl.png\" rel=\"nofollow noreferrer\">picture2</a> <a href=\"https://i.stack.imgur.com/hZ1XY.png\" rel=\"nofollow noreferrer\">picture3</a> <a href=\"https://i.stack.imgur.com/oqorU.png\" rel=\"nofollow noreferrer\">picture4</a></p>\n</blockquote>\n"},{"tags":["java","spring","spring-mvc"],"answers":[{"tags":[],"owner":{"account_id":2678195,"reputation":68091,"user_id":2314073,"accept_rate":56,"display_name":"Juned Ahsan"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1374084043,"creation_date":1374084043,"answer_id":17706950,"question_id":17706819,"body_markdown":"To return a file you need to use the `MediaType.APPLICATION_OCTET_STREAM` as the response type.","title":"How to return a text file with Spring MVC?","body":"<p>To return a file you need to use the <code>MediaType.APPLICATION_OCTET_STREAM</code> as the response type.</p>\n"},{"tags":[],"owner":{"account_id":1230477,"reputation":2295,"user_id":1195197,"display_name":"Farid"},"down_vote_count":0,"up_vote_count":13,"is_accepted":true,"score":13,"last_activity_date":1415382932,"creation_date":1374084480,"answer_id":17707080,"question_id":17706819,"body_markdown":"here is a sample:\r\n\r\n    @RequestMapping( method = RequestMethod.POST, \r\n        value = DataController.RESOURCE_PATH + &quot;/file&quot;, \r\n        headers = &quot;content-type=application/json&quot; )\r\n    public void export( @RequestBody JSONObject json, HttpServletResponse response ) \r\n        throws IOException {\r\n    \tString myString = &quot;Hello&quot;;\r\n    \tresponse.setContentType(&quot;text/plain&quot;);\r\n    \tresponse.setHeader(&quot;Content-Disposition&quot;,&quot;attachment;filename=myFile.txt&quot;);\r\n    \tServletOutputStream out = response.getOutputStream();\r\n    \tout.println(myString);\r\n    \tout.flush();\r\n    \tout.close();\r\n    }\r\n\r\n\r\n\r\nPS: don&#39;t forget to put some random stuff in your url (as parameter for example) to ensure your browser does not cache the text file.","title":"How to return a text file with Spring MVC?","body":"<p>here is a sample:</p>\n\n<pre><code>@RequestMapping( method = RequestMethod.POST, \n    value = DataController.RESOURCE_PATH + \"/file\", \n    headers = \"content-type=application/json\" )\npublic void export( @RequestBody JSONObject json, HttpServletResponse response ) \n    throws IOException {\n    String myString = \"Hello\";\n    response.setContentType(\"text/plain\");\n    response.setHeader(\"Content-Disposition\",\"attachment;filename=myFile.txt\");\n    ServletOutputStream out = response.getOutputStream();\n    out.println(myString);\n    out.flush();\n    out.close();\n}\n</code></pre>\n\n<p>PS: don't forget to put some random stuff in your url (as parameter for example) to ensure your browser does not cache the text file.</p>\n"},{"tags":[],"owner":{"account_id":1068606,"reputation":11581,"user_id":1068446,"accept_rate":63,"display_name":"dwjohnston"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1637391063,"creation_date":1466056171,"answer_id":37850848,"question_id":17706819,"body_markdown":"I recommend using [filesaver.js][1]. \r\n\r\nThen your solution will look like: \r\n\r\n    var text = JSON.stringify(createJSON());  \r\n    var blob = new Blob([text], {type: &quot;text/plain; charset=utf-8&quot;});\t\t\t\t\t\t\t\r\n    saveAs(blob, &quot;myfile.txt&quot;);  \r\n\r\n\r\n\r\n\r\n  [1]: https://github.com/eligrey/FileSaver.js/","title":"How to return a text file with Spring MVC?","body":"<p>I recommend using <a href=\"https://github.com/eligrey/FileSaver.js/\" rel=\"nofollow noreferrer\">filesaver.js</a>.</p>\n<p>Then your solution will look like:</p>\n<pre><code>var text = JSON.stringify(createJSON());  \nvar blob = new Blob([text], {type: &quot;text/plain; charset=utf-8&quot;});                           \nsaveAs(blob, &quot;myfile.txt&quot;);  \n</code></pre>\n"}],"owner":{"account_id":1919171,"reputation":1807,"user_id":1731083,"accept_rate":100,"display_name":"Mythul"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":18994,"favorite_count":0,"down_vote_count":0,"up_vote_count":5,"accepted_answer_id":17707080,"answer_count":3,"score":5,"last_activity_date":1637391063,"creation_date":1374083562,"question_id":17706819,"body_markdown":"    @RequestMapping( method = RequestMethod.POST, value = DataController.RESOURCE_PATH + &quot;/file&quot;, headers = &quot;content-type=application/json&quot; )\r\n    @ResponseBody\r\n    public void export( @RequestBody JSONObject json, HttpServletResponse response ) throws IOException\r\n    {\r\n        String myString = &quot;Hello&quot;;\r\n    }\r\n\r\nThe string is generated inside the `Controller`.\r\nWhat I want is to send back to the user a Window where he can save a file which contains the `myString`.\r\n\r\n    $.ajax({\r\n        type: &quot;POST&quot;,\r\n        url: url,\r\n        data: JSON.stringify(createJSON()),\r\n        contentType: &quot;application/json&quot;,\r\n        success: function(response)\r\n        {\r\n            console.log(&quot;Exported JSON: &quot; + JSON.stringify(createJSON()));\r\n            console.log(response);\r\n        },\r\n        error: function()\r\n        {\r\n            console.log(arguments);\r\n            alert(&quot;Export process failed.&quot;);\r\n        }\r\n    });\r\n\r\nIt clearly doesn&#39;t work in this current state and I am stuck at the moment.","title":"How to return a text file with Spring MVC?","body":"<pre><code>@RequestMapping( method = RequestMethod.POST, value = DataController.RESOURCE_PATH + \"/file\", headers = \"content-type=application/json\" )\n@ResponseBody\npublic void export( @RequestBody JSONObject json, HttpServletResponse response ) throws IOException\n{\n    String myString = \"Hello\";\n}\n</code></pre>\n\n<p>The string is generated inside the <code>Controller</code>.\nWhat I want is to send back to the user a Window where he can save a file which contains the <code>myString</code>.</p>\n\n<pre><code>$.ajax({\n    type: \"POST\",\n    url: url,\n    data: JSON.stringify(createJSON()),\n    contentType: \"application/json\",\n    success: function(response)\n    {\n        console.log(\"Exported JSON: \" + JSON.stringify(createJSON()));\n        console.log(response);\n    },\n    error: function()\n    {\n        console.log(arguments);\n        alert(\"Export process failed.\");\n    }\n});\n</code></pre>\n\n<p>It clearly doesn't work in this current state and I am stuck at the moment.</p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":1324952,"reputation":5977,"user_id":1270000,"accept_rate":100,"display_name":"sorifiend"},"score":0,"creation_date":1637386736,"post_id":70043483,"comment_id":123818255,"body_markdown":"You may be misunderstanding how the -d option works. &quot;If you specify -d C:\\myclasses and the class is called com.mypackage.MyClass, then the class file is C:\\myclasses\\com\\mypackage\\MyClass.class.&quot; and &quot;Note: The directory specified by the -d option is not automatically added to your user class path.&quot; See here for more information: https://docs.oracle.com/javase/8/docs/technotes/tools/windows/javac.html","body":"You may be misunderstanding how the -d option works. &quot;If you specify -d C:\\myclasses and the class is called com.mypackage.MyClass, then the class file is C:\\myclasses\\com\\mypackage\\MyClass.class.&quot; and &quot;Note: The directory specified by the -d option is not automatically added to your user class path.&quot; See here for more information: <a href=\"https://docs.oracle.com/javase/8/docs/technotes/tools/windows/javac.html\" rel=\"nofollow noreferrer\">docs.oracle.com/javase/8/docs/technotes/tools/windows/&hellip;</a>"},{"owner":{"account_id":1324952,"reputation":5977,"user_id":1270000,"accept_rate":100,"display_name":"sorifiend"},"score":0,"creation_date":1637387241,"post_id":70043483,"comment_id":123818305,"body_markdown":"Also, this is the usage format of the javac command: `javac [ options ] [ sourcefiles ] [ classes] [ @argfiles ]` note how you still need to specify the actual source files after the options.","body":"Also, this is the usage format of the javac command: <code>javac [ options ] [ sourcefiles ] [ classes] [ @argfiles ]</code> note how you still need to specify the actual source files after the options."},{"owner":{"account_id":1298599,"reputation":7759,"user_id":1248974,"display_name":"chickity china chinese chicken"},"score":0,"creation_date":1637387687,"post_id":70043483,"comment_id":123818345,"body_markdown":"the `-d` option is short for `(d) directory` meaning destination. your command is missing a space separator between the dot `.` and the `.java` file name: i.e. `javac -d . .calculator.java` , the dot means it will place the compiled result into the current directory, otherwise replace the argument after `-d` with the desitnation directory name","body":"the <code>-d</code> option is short for <code>(d) directory</code> meaning destination. your command is missing a space separator between the dot <code>.</code> and the <code>.java</code> file name: i.e. <code>javac -d . .calculator.java</code> , the dot means it will place the compiled result into the current directory, otherwise replace the argument after <code>-d</code> with the desitnation directory name"}],"answers":[{"tags":[],"owner":{"account_id":19197532,"reputation":26,"user_id":14026104,"display_name":"gilad barak"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1637390491,"creation_date":1637390491,"answer_id":70043795,"question_id":70043483,"body_markdown":"I don&#39;t fully understand what you tried to do there, but you should try\r\n\r\n    javac -d . calculator.java\r\nnotice the &quot;.&quot; is separated from the &quot;calculator&quot; by a space","title":"Getting Error while creating a package in java","body":"<p>I don't fully understand what you tried to do there, but you should try</p>\n<pre><code>javac -d . calculator.java\n</code></pre>\n<p>notice the &quot;.&quot; is separated from the &quot;calculator&quot; by a space</p>\n"}],"owner":{"account_id":19204466,"reputation":33,"user_id":14031667,"display_name":"Dibendu Ghosh"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":39,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":70043795,"answer_count":1,"score":0,"last_activity_date":1637390491,"creation_date":1637386341,"question_id":70043483,"body_markdown":"while creating a package for my file it giving error message\r\n\r\n    error: no source files\r\n\r\ni&#39;m running this command\r\n\r\n    javac -d .calculator.java","title":"Getting Error while creating a package in java","body":"<p>while creating a package for my file it giving error message</p>\n<pre><code>error: no source files\n</code></pre>\n<p>i'm running this command</p>\n<pre><code>javac -d .calculator.java\n</code></pre>\n"},{"tags":["java","spring","spring-boot","jpa"],"comments":[{"owner":{"account_id":6950003,"reputation":1952,"user_id":5332914,"accept_rate":75,"display_name":"user404"},"score":0,"creation_date":1637386701,"post_id":70043475,"comment_id":123818251,"body_markdown":"`spring.jpa.hibernate.ddl-auto=create` should do your work","body":"<code>spring.jpa.hibernate.ddl-auto=create</code> should do your work"},{"owner":{"account_id":12456171,"reputation":339,"user_id":9069309,"display_name":"Cebrail Yilmaz"},"score":0,"creation_date":1637388841,"post_id":70043475,"comment_id":123818511,"body_markdown":"I posted a possible solution could you check that?@Micah Ludwick","body":"I posted a possible solution could you check that?@Micah Ludwick"}],"answers":[{"tags":[],"owner":{"account_id":12456171,"reputation":339,"user_id":9069309,"display_name":"Cebrail Yilmaz"},"down_vote_count":1,"up_vote_count":1,"is_accepted":true,"score":0,"last_activity_date":1637387914,"creation_date":1637387914,"answer_id":70043605,"question_id":70043475,"body_markdown":"The reason why you still get soldAt related names might be because you have the following getter and setters. Remove or update this getter and setters too and see if you still get erroneous responses.\r\n\r\n        public BigDecimal getSoldAt() {\r\n            return outcomeSellPrice;\r\n        }\r\n    \r\n        public void setSoldAt(BigDecimal soldAt) {\r\n            this.outcomeSellPrice = soldAt;\r\n        }","title":"Spring Boot: How to make entity reflect database column changes?","body":"<p>The reason why you still get soldAt related names might be because you have the following getter and setters. Remove or update this getter and setters too and see if you still get erroneous responses.</p>\n<pre><code>    public BigDecimal getSoldAt() {\n        return outcomeSellPrice;\n    }\n\n    public void setSoldAt(BigDecimal soldAt) {\n        this.outcomeSellPrice = soldAt;\n    }\n</code></pre>\n"}],"owner":{"account_id":15914325,"reputation":71,"user_id":11534590,"display_name":"Micah Ludwick"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1128,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"accepted_answer_id":70043605,"answer_count":1,"score":0,"last_activity_date":1637389210,"creation_date":1637386159,"question_id":70043475,"body_markdown":"I am using spring boot as a backend rest API and connecting to a MySQL database. I created the initial entity and database table that it would map to. I realized one of the columns in my database was named incorrectly and updated its name in the database and updated my entity to reflect the change as well. After doing so, when I send a GET or POST request to my controller endpoints, the values of the returned object do not reflect the changes I made to the entity/database. I have tried changing the `spring.jpa.hibernate.ddl-auto` property in my `applications.properties` file to `update`, `create`, and `create drop`, none of which had any success. Here is my entity class, applications.properties file, my controller endpoints, my repository, and 2 images, one of my database table and one of the response from the GET endpoint.\r\n\r\nSkin.java\r\n\r\n\r\n    import java.math.BigDecimal;\r\n    import java.util.Date;\r\n    \r\n    import javax.persistence.CascadeType;\r\n    import javax.persistence.Column;\r\n    import javax.persistence.Entity;\r\n    import javax.persistence.GeneratedValue;\r\n    import javax.persistence.GenerationType;\r\n    import javax.persistence.Id;\r\n    import javax.persistence.JoinColumn;\r\n    import javax.persistence.ManyToOne;\r\n    import javax.persistence.Table;\r\n    \r\n    import com.fasterxml.jackson.annotation.JsonIdentityInfo;\r\n    import com.fasterxml.jackson.annotation.ObjectIdGenerators;\r\n    \r\n    @Entity\r\n    @Table(name=&quot;skins&quot;)\r\n    @JsonIdentityInfo(\r\n    \t\t  generator = ObjectIdGenerators.PropertyGenerator.class, \r\n    \t\t  property = &quot;id&quot;)\r\n    public class Skin {\r\n    \r\n    \t@Id\r\n    \t@GeneratedValue(strategy=GenerationType.IDENTITY)\r\n    \t@Column(name=&quot;id&quot;)\r\n    \tprivate Long id;\r\n    \t\r\n    \t@Column(name=&quot;category&quot;)\r\n    \tprivate String category;\r\n    \t\r\n    \t@Column(name=&quot;collection&quot;)\r\n    \tprivate String collection;\r\n    \t\r\n    \t@Column(name=&quot;quality&quot;)\r\n    \tprivate String quality;\r\n    \t\r\n    \t@Column(name=&quot;wear&quot;)\r\n    \tprivate String wear;\t\r\n    \r\n    \t@Column(name=&quot;weapon&quot;)\r\n    \tprivate String weapon;\r\n    \t\r\n    \t@Column(name=&quot;name&quot;)\r\n    \tprivate String name;\r\n    \t\r\n    \t@Column(name=&quot;price&quot;)\r\n    \tprivate BigDecimal price;\r\n    \t\r\n    \t@Column(name=&quot;quantity&quot;)\r\n    \tprivate int quantity;\r\n    \t\r\n    \t@Column(name=&quot;date_bought&quot;)\r\n    \tprivate Date dateBought;\r\n    \t\r\n    \t@ManyToOne(cascade= {CascadeType.MERGE, CascadeType.DETACH, CascadeType.REFRESH})\r\n    \t@JoinColumn(name=&quot;trade_id&quot;)\r\n    \tprivate Trade trade;\r\n    \t\r\n    \t@Column(name=&quot;outcome_sell_price&quot;)\r\n    \tprivate BigDecimal outcomeSellPrice;\r\n    \t\r\n    \t@Column(name=&quot;date_traded&quot;)\r\n    \tprivate Date dateTraded;\r\n    \t\r\n    \t@Column(name=&quot;sell_price&quot;)\r\n    \tprivate BigDecimal sellPrice;\r\n    \t\r\n    \t@Column(name=&quot;date_sold&quot;)\r\n    \tprivate Date dateSold;\r\n    \t\r\n    \tpublic Skin() {\r\n    \t\t\r\n    \t}\r\n    \r\n    \tpublic Skin(String category, String collection, String quality, String wear, String weapon, String name,\r\n    \t\t\tBigDecimal price, int quantity, Date dateBought, Trade trade, BigDecimal outcomeSellPrice, Date dateTraded,\r\n    \t\t\tBigDecimal sellPrice, Date dateSold) {\r\n    \t\tthis.category = category;\r\n    \t\tthis.collection = collection;\r\n    \t\tthis.quality = quality;\r\n    \t\tthis.wear = wear;\r\n    \t\tthis.weapon = weapon;\r\n    \t\tthis.name = name;\r\n    \t\tthis.price = price;\r\n    \t\tthis.quantity = quantity;\r\n    \t\tthis.dateBought = dateBought;\r\n    \t\tthis.trade = trade;\r\n    \t\tthis.outcomeSellPrice = outcomeSellPrice;\r\n    \t\tthis.dateTraded = dateTraded;\r\n    \t\tthis.sellPrice = sellPrice;\r\n    \t\tthis.dateSold = dateSold;\r\n    \t}\r\n    \r\n    \tpublic String getWeapon() {\r\n    \t\treturn weapon;\r\n    \t}\r\n    \r\n    \tpublic void setWeapon(String weapon) {\r\n    \t\tthis.weapon = weapon;\r\n    \t}\r\n    \r\n    \tpublic Long getId() {\r\n    \t\treturn id;\r\n    \t}\r\n    \r\n    \tpublic void setId(Long id) {\r\n    \t\tthis.id = id;\r\n    \t}\r\n    \r\n    \tpublic String getCollection() {\r\n    \t\treturn collection;\r\n    \t}\r\n    \r\n    \tpublic void setCollection(String collection) {\r\n    \t\tthis.collection = collection;\r\n    \t}\r\n    \r\n    \tpublic String getWear() {\r\n    \t\treturn wear;\r\n    \t}\r\n    \r\n    \tpublic void setWear(String wear) {\r\n    \t\tthis.wear = wear;\r\n    \t}\r\n    \r\n    \tpublic String getQuality() {\r\n    \t\treturn quality;\r\n    \t}\r\n    \r\n    \tpublic void setQuality(String quality) {\r\n    \t\tthis.quality = quality;\r\n    \t}\r\n    \r\n    \tpublic String getCategory() {\r\n    \t\treturn category;\r\n    \t}\r\n    \r\n    \tpublic void setCategory(String category) {\r\n    \t\tthis.category = category;\r\n    \t}\r\n    \r\n    \tpublic String getName() {\r\n    \t\treturn name;\r\n    \t}\r\n    \r\n    \tpublic void setName(String name) {\r\n    \t\tthis.name = name;\r\n    \t}\r\n    \r\n    \tpublic BigDecimal getPrice() {\r\n    \t\treturn price;\r\n    \t}\r\n    \r\n    \tpublic void setPrice(BigDecimal price) {\r\n    \t\tthis.price = price;\r\n    \t}\r\n    \r\n    \tpublic int getQuantity() {\r\n    \t\treturn quantity;\r\n    \t}\r\n    \r\n    \tpublic void setQuantity(int quantity) {\r\n    \t\tthis.quantity = quantity;\r\n    \t}\r\n    \r\n    \tpublic Date getDateBought() {\r\n    \t\treturn dateBought;\r\n    \t}\r\n    \r\n    \tpublic void setDateBought(Date dateBought) {\r\n    \t\tthis.dateBought = dateBought;\r\n    \t}\r\n    \r\n    \tpublic Trade getTrade() {\r\n    \t\treturn trade;\r\n    \t}\r\n    \r\n    \tpublic void setTrade(Trade trade) {\r\n    \t\tthis.trade = trade;\r\n    \t}\r\n    \r\n    \tpublic BigDecimal getSellPrice() {\r\n    \t\treturn sellPrice;\r\n    \t}\r\n    \r\n    \tpublic void setSellPrice(BigDecimal sellPrice) {\r\n    \t\tthis.sellPrice = sellPrice;\r\n    \t}\r\n    \r\n    \tpublic Date getDateTraded() {\r\n    \t\treturn dateTraded;\r\n    \t}\r\n    \r\n    \tpublic void setDateTraded(Date dateTraded) {\r\n    \t\tthis.dateTraded = dateTraded;\r\n    \t}\r\n    \r\n    \tpublic BigDecimal getSoldAt() {\r\n    \t\treturn outcomeSellPrice;\r\n    \t}\r\n    \r\n    \tpublic void setSoldAt(BigDecimal soldAt) {\r\n    \t\tthis.outcomeSellPrice = soldAt;\r\n    \t}\r\n\t\r\n\r\n        public Date getDateSold() {\r\n    \t\treturn dateSold;\r\n    \t}\r\n    \r\n    \tpublic void setDateSold(Date dateSold) {\r\n    \t\tthis.dateSold = dateSold;\r\n    \t}\r\n    \r\n    \t@Override\r\n    \tpublic String toString() {\r\n    \t\treturn &quot;Skin [id=&quot; + id + &quot;, category=&quot; + category + &quot;, collection=&quot; + collection + &quot;, quality=&quot; + quality\r\n    \t\t\t\t+ &quot;, wear=&quot; + wear + &quot;, weapon=&quot; + weapon + &quot;, name=&quot; + name + &quot;, price=&quot; + price + &quot;, quantity=&quot;\r\n    \t\t\t\t+ quantity + &quot;, dateBought=&quot; + dateBought + &quot;, trade=&quot; + trade + &quot;, outcomeSellPrice=&quot; + outcomeSellPrice\r\n    \t\t\t\t+ &quot;, dateTraded=&quot; + dateTraded + &quot;, sellPrice=&quot; + sellPrice + &quot;, dateSold=&quot; + dateSold + &quot;]&quot;;\r\n    \t}\r\n    }\r\n\r\nController Endpoints\r\n\r\n    @Autowired\r\n    SkinRepository sr;\r\n    \r\n    @GetMapping(&quot;&quot;)\r\n    public List&lt;Skin&gt; getSkins() {\r\n    \treturn sr.findByTradeIdNullAndDateSoldNull();\r\n    }\r\n    \r\n    @PostMapping(&quot;&quot;)\r\n    public Skin insertSkin(@RequestBody Skin skin) {\r\n    \t// need to figure out why this isn&#39;t picking up the database changes\r\n    \treturn sr.save(skin);\r\n    }\t\r\n\r\n\r\nSkinRepository.java\r\n\r\n    @Repository\r\n    public interface SkinRepository extends JpaRepository&lt;Skin, Long&gt; {\r\n        \t\r\n    \tList&lt;Skin&gt; findByTradeIdNullAndDateSoldNull();\r\n    }\r\n\r\napplication.properties\r\n\r\n    spring.datasource.url=jdbc:mysql://${DB_HOST}:${DB_PORT}/${DB_SCHEMA}?useSSL=false&amp;serverTimezone=UTC\r\n    spring.datasource.username=${DB_USER}\r\n    spring.datasource.password=${DB_PASS}\r\n    \r\n    spring.jpa.properties.hibernate.dialect=org.hibernate.dialect.MySQL5InnoDBDialect\r\n    spring.jpa.show-sql=true\r\n    spring.jpa.properties.hibernate.format_sql=true\r\n    logging.level.org.hibernate.SQL=DEBUG\r\n    spring.jpa.hibernate.ddl-auto=update\r\n\r\n[Database Table][1]\r\n\r\nThis is the response I get when sending a request to the GET endpoint. The value `soldAt` is the old name of the column before changing it, it should be `outcome_sell_price`.\r\n\r\n[GET endpoint response][2]\r\n\r\nAny thoughts on how I can get the response from the endpoints to match the database and entity would be greatly appreciated. Thanks in advance.\r\n\r\n  [1]: https://i.stack.imgur.com/JhFKx.png\r\n  [2]: https://i.stack.imgur.com/XFLRX.png","title":"Spring Boot: How to make entity reflect database column changes?","body":"<p>I am using spring boot as a backend rest API and connecting to a MySQL database. I created the initial entity and database table that it would map to. I realized one of the columns in my database was named incorrectly and updated its name in the database and updated my entity to reflect the change as well. After doing so, when I send a GET or POST request to my controller endpoints, the values of the returned object do not reflect the changes I made to the entity/database. I have tried changing the <code>spring.jpa.hibernate.ddl-auto</code> property in my <code>applications.properties</code> file to <code>update</code>, <code>create</code>, and <code>create drop</code>, none of which had any success. Here is my entity class, applications.properties file, my controller endpoints, my repository, and 2 images, one of my database table and one of the response from the GET endpoint.</p>\n<p>Skin.java</p>\n<pre><code>import java.math.BigDecimal;\nimport java.util.Date;\n\nimport javax.persistence.CascadeType;\nimport javax.persistence.Column;\nimport javax.persistence.Entity;\nimport javax.persistence.GeneratedValue;\nimport javax.persistence.GenerationType;\nimport javax.persistence.Id;\nimport javax.persistence.JoinColumn;\nimport javax.persistence.ManyToOne;\nimport javax.persistence.Table;\n\nimport com.fasterxml.jackson.annotation.JsonIdentityInfo;\nimport com.fasterxml.jackson.annotation.ObjectIdGenerators;\n\n@Entity\n@Table(name=&quot;skins&quot;)\n@JsonIdentityInfo(\n          generator = ObjectIdGenerators.PropertyGenerator.class, \n          property = &quot;id&quot;)\npublic class Skin {\n\n    @Id\n    @GeneratedValue(strategy=GenerationType.IDENTITY)\n    @Column(name=&quot;id&quot;)\n    private Long id;\n    \n    @Column(name=&quot;category&quot;)\n    private String category;\n    \n    @Column(name=&quot;collection&quot;)\n    private String collection;\n    \n    @Column(name=&quot;quality&quot;)\n    private String quality;\n    \n    @Column(name=&quot;wear&quot;)\n    private String wear;    \n\n    @Column(name=&quot;weapon&quot;)\n    private String weapon;\n    \n    @Column(name=&quot;name&quot;)\n    private String name;\n    \n    @Column(name=&quot;price&quot;)\n    private BigDecimal price;\n    \n    @Column(name=&quot;quantity&quot;)\n    private int quantity;\n    \n    @Column(name=&quot;date_bought&quot;)\n    private Date dateBought;\n    \n    @ManyToOne(cascade= {CascadeType.MERGE, CascadeType.DETACH, CascadeType.REFRESH})\n    @JoinColumn(name=&quot;trade_id&quot;)\n    private Trade trade;\n    \n    @Column(name=&quot;outcome_sell_price&quot;)\n    private BigDecimal outcomeSellPrice;\n    \n    @Column(name=&quot;date_traded&quot;)\n    private Date dateTraded;\n    \n    @Column(name=&quot;sell_price&quot;)\n    private BigDecimal sellPrice;\n    \n    @Column(name=&quot;date_sold&quot;)\n    private Date dateSold;\n    \n    public Skin() {\n        \n    }\n\n    public Skin(String category, String collection, String quality, String wear, String weapon, String name,\n            BigDecimal price, int quantity, Date dateBought, Trade trade, BigDecimal outcomeSellPrice, Date dateTraded,\n            BigDecimal sellPrice, Date dateSold) {\n        this.category = category;\n        this.collection = collection;\n        this.quality = quality;\n        this.wear = wear;\n        this.weapon = weapon;\n        this.name = name;\n        this.price = price;\n        this.quantity = quantity;\n        this.dateBought = dateBought;\n        this.trade = trade;\n        this.outcomeSellPrice = outcomeSellPrice;\n        this.dateTraded = dateTraded;\n        this.sellPrice = sellPrice;\n        this.dateSold = dateSold;\n    }\n\n    public String getWeapon() {\n        return weapon;\n    }\n\n    public void setWeapon(String weapon) {\n        this.weapon = weapon;\n    }\n\n    public Long getId() {\n        return id;\n    }\n\n    public void setId(Long id) {\n        this.id = id;\n    }\n\n    public String getCollection() {\n        return collection;\n    }\n\n    public void setCollection(String collection) {\n        this.collection = collection;\n    }\n\n    public String getWear() {\n        return wear;\n    }\n\n    public void setWear(String wear) {\n        this.wear = wear;\n    }\n\n    public String getQuality() {\n        return quality;\n    }\n\n    public void setQuality(String quality) {\n        this.quality = quality;\n    }\n\n    public String getCategory() {\n        return category;\n    }\n\n    public void setCategory(String category) {\n        this.category = category;\n    }\n\n    public String getName() {\n        return name;\n    }\n\n    public void setName(String name) {\n        this.name = name;\n    }\n\n    public BigDecimal getPrice() {\n        return price;\n    }\n\n    public void setPrice(BigDecimal price) {\n        this.price = price;\n    }\n\n    public int getQuantity() {\n        return quantity;\n    }\n\n    public void setQuantity(int quantity) {\n        this.quantity = quantity;\n    }\n\n    public Date getDateBought() {\n        return dateBought;\n    }\n\n    public void setDateBought(Date dateBought) {\n        this.dateBought = dateBought;\n    }\n\n    public Trade getTrade() {\n        return trade;\n    }\n\n    public void setTrade(Trade trade) {\n        this.trade = trade;\n    }\n\n    public BigDecimal getSellPrice() {\n        return sellPrice;\n    }\n\n    public void setSellPrice(BigDecimal sellPrice) {\n        this.sellPrice = sellPrice;\n    }\n\n    public Date getDateTraded() {\n        return dateTraded;\n    }\n\n    public void setDateTraded(Date dateTraded) {\n        this.dateTraded = dateTraded;\n    }\n\n    public BigDecimal getSoldAt() {\n        return outcomeSellPrice;\n    }\n\n    public void setSoldAt(BigDecimal soldAt) {\n        this.outcomeSellPrice = soldAt;\n    }\n\n\n    public Date getDateSold() {\n        return dateSold;\n    }\n\n    public void setDateSold(Date dateSold) {\n        this.dateSold = dateSold;\n    }\n\n    @Override\n    public String toString() {\n        return &quot;Skin [id=&quot; + id + &quot;, category=&quot; + category + &quot;, collection=&quot; + collection + &quot;, quality=&quot; + quality\n                + &quot;, wear=&quot; + wear + &quot;, weapon=&quot; + weapon + &quot;, name=&quot; + name + &quot;, price=&quot; + price + &quot;, quantity=&quot;\n                + quantity + &quot;, dateBought=&quot; + dateBought + &quot;, trade=&quot; + trade + &quot;, outcomeSellPrice=&quot; + outcomeSellPrice\n                + &quot;, dateTraded=&quot; + dateTraded + &quot;, sellPrice=&quot; + sellPrice + &quot;, dateSold=&quot; + dateSold + &quot;]&quot;;\n    }\n}\n</code></pre>\n<p>Controller Endpoints</p>\n<pre><code>@Autowired\nSkinRepository sr;\n\n@GetMapping(&quot;&quot;)\npublic List&lt;Skin&gt; getSkins() {\n    return sr.findByTradeIdNullAndDateSoldNull();\n}\n\n@PostMapping(&quot;&quot;)\npublic Skin insertSkin(@RequestBody Skin skin) {\n    // need to figure out why this isn't picking up the database changes\n    return sr.save(skin);\n}   \n</code></pre>\n<p>SkinRepository.java</p>\n<pre><code>@Repository\npublic interface SkinRepository extends JpaRepository&lt;Skin, Long&gt; {\n        \n    List&lt;Skin&gt; findByTradeIdNullAndDateSoldNull();\n}\n</code></pre>\n<p>application.properties</p>\n<pre><code>spring.datasource.url=jdbc:mysql://${DB_HOST}:${DB_PORT}/${DB_SCHEMA}?useSSL=false&amp;serverTimezone=UTC\nspring.datasource.username=${DB_USER}\nspring.datasource.password=${DB_PASS}\n\nspring.jpa.properties.hibernate.dialect=org.hibernate.dialect.MySQL5InnoDBDialect\nspring.jpa.show-sql=true\nspring.jpa.properties.hibernate.format_sql=true\nlogging.level.org.hibernate.SQL=DEBUG\nspring.jpa.hibernate.ddl-auto=update\n</code></pre>\n<p><a href=\"https://i.stack.imgur.com/JhFKx.png\" rel=\"nofollow noreferrer\">Database Table</a></p>\n<p>This is the response I get when sending a request to the GET endpoint. The value <code>soldAt</code> is the old name of the column before changing it, it should be <code>outcome_sell_price</code>.</p>\n<p><a href=\"https://i.stack.imgur.com/XFLRX.png\" rel=\"nofollow noreferrer\">GET endpoint response</a></p>\n<p>Any thoughts on how I can get the response from the endpoints to match the database and entity would be greatly appreciated. Thanks in advance.</p>\n"},{"tags":["java","linux"],"comments":[{"owner":{"account_id":47283,"reputation":703817,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"score":1,"creation_date":1637387434,"post_id":70043549,"comment_id":123818318,"body_markdown":"Do you get an exception when it doesn&#39;t work?","body":"Do you get an exception when it doesn&#39;t work?"}],"answers":[{"tags":[],"owner":{"account_id":47283,"reputation":703817,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1637388348,"creation_date":1637388348,"answer_id":70043642,"question_id":70043549,"body_markdown":"There are a few reason why changing permissions might not work.  These include:\r\n\r\n - The application doesn&#39;t have permission to change permissions.  With classic UNIX / Linux, you need to be the file owner or root to change an file&#39;s permissions.  Then there are ACLs.\r\n\r\n - The file system might be read-only, or mounted read only.\r\n\r\n - The file system type might not support the combination of permissions you are trying to use.  For example, FAT did not support execute permissions, and NTFS permissions work a bit differently.  Unfortunately, when you mount a &quot;foreign&quot; file system type on Linux, the OS doesn&#39;t provide a way to direcrly manipulate the file system&#39;s native permissions.\r\n\r\n  - It is possible that what you are trying to do is blocked by SE Linux or AppArmor or similar.\r\n\r\nNow, some of these may result in a Java exception when you attempt to change the permission.  But that is up to the OS and the file system drivers.  Java can only throw an exception if the OS *tells* Java that the permission change attempt failed, and it can only report / interpret the reason (the `errno`) returned by the `chmod` syscall.\r\n  ","title":"Java Changing Linux File Permission Sometimes Does not Work","body":"<p>There are a few reason why changing permissions might not work.  These include:</p>\n<ul>\n<li><p>The application doesn't have permission to change permissions.  With classic UNIX / Linux, you need to be the file owner or root to change an file's permissions.  Then there are ACLs.</p>\n</li>\n<li><p>The file system might be read-only, or mounted read only.</p>\n</li>\n<li><p>The file system type might not support the combination of permissions you are trying to use.  For example, FAT did not support execute permissions, and NTFS permissions work a bit differently.  Unfortunately, when you mount a &quot;foreign&quot; file system type on Linux, the OS doesn't provide a way to direcrly manipulate the file system's native permissions.</p>\n</li>\n<li><p>It is possible that what you are trying to do is blocked by SE Linux or AppArmor or similar.</p>\n</li>\n</ul>\n<p>Now, some of these may result in a Java exception when you attempt to change the permission.  But that is up to the OS and the file system drivers.  Java can only throw an exception if the OS <em>tells</em> Java that the permission change attempt failed, and it can only report / interpret the reason (the <code>errno</code>) returned by the <code>chmod</code> syscall.</p>\n"}],"owner":{"account_id":23398563,"reputation":3,"user_id":17462102,"display_name":"Penny G"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":209,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":70043642,"answer_count":1,"score":0,"last_activity_date":1637388348,"creation_date":1637387275,"question_id":70043549,"body_markdown":"I am working on a task, which is changing the file&#39;s permission to 640 after our code exports the file to our Linux server. The same code works in our Dev server, but in our Uat server, sometimes the permission is changed to 640 successfully, sometimes the permission can not be changed, is still the default 600.\r\n\r\nI checked the SystemOut.log, no any error for this.\r\n\r\nMy related Java code is like below:\r\n```\r\nprivate void exportXXXFiles() {\r\n......\r\n//Settings for the access permissions of the exported files\r\nSet&lt;PosixFilePermission&gt; filePerms = new HashSet&lt;PosixFilePermission&gt;();\r\nfilePerms.add(PosixFilePermission.OWNER_READ);\r\nfilePerms.add(PosixFilePermission.OWNER_WRITE);\r\nfilePerms.add(PosixFilePermission.GROUP_READ);\r\ntry {\r\n            Path localFilePath = ......;            \r\n            Files.setPosixFilePermissions(localFilePath, filePerms);\r\n            ......            \r\n        } catch (IOException e) {\r\n            e.printStackTrace();\r\n        }\r\n }\r\n```\r\n\r\nI am confused why the same code works in our Dev server but not stable in our Uat server, where sometimes it works sometimes it does not work. I assume that is the environment issue, but I have no idea what the exact issue is. Who can give me some suggestions?\r\n\r\nThanks!","title":"Java Changing Linux File Permission Sometimes Does not Work","body":"<p>I am working on a task, which is changing the file's permission to 640 after our code exports the file to our Linux server. The same code works in our Dev server, but in our Uat server, sometimes the permission is changed to 640 successfully, sometimes the permission can not be changed, is still the default 600.</p>\n<p>I checked the SystemOut.log, no any error for this.</p>\n<p>My related Java code is like below:</p>\n<pre><code>private void exportXXXFiles() {\n......\n//Settings for the access permissions of the exported files\nSet&lt;PosixFilePermission&gt; filePerms = new HashSet&lt;PosixFilePermission&gt;();\nfilePerms.add(PosixFilePermission.OWNER_READ);\nfilePerms.add(PosixFilePermission.OWNER_WRITE);\nfilePerms.add(PosixFilePermission.GROUP_READ);\ntry {\n            Path localFilePath = ......;            \n            Files.setPosixFilePermissions(localFilePath, filePerms);\n            ......            \n        } catch (IOException e) {\n            e.printStackTrace();\n        }\n }\n</code></pre>\n<p>I am confused why the same code works in our Dev server but not stable in our Uat server, where sometimes it works sometimes it does not work. I assume that is the environment issue, but I have no idea what the exact issue is. Who can give me some suggestions?</p>\n<p>Thanks!</p>\n"},{"tags":["java","android"],"comments":[{"owner":{"account_id":22616962,"reputation":3155,"user_id":16796366,"display_name":"Nitish"},"score":0,"creation_date":1636721090,"post_id":69943118,"comment_id":123638191,"body_markdown":"Try learning about the [launch modes](https://betterprogramming.pub/understanding-the-android-activity-launch-modes-49ec89ef79d2) ,[android launch modes](https://medium.com/mindorks/android-launch-mode-787d28952959) and use them in your Manifest file. This will solve your issue","body":"Try learning about the <a href=\"https://betterprogramming.pub/understanding-the-android-activity-launch-modes-49ec89ef79d2\" rel=\"nofollow noreferrer\">launch modes</a> ,<a href=\"https://medium.com/mindorks/android-launch-mode-787d28952959\" rel=\"nofollow noreferrer\">android launch modes</a> and use them in your Manifest file. This will solve your issue"},{"owner":{"account_id":15178500,"reputation":4190,"user_id":10952503,"display_name":"Elikill58"},"score":0,"creation_date":1636878951,"post_id":69943118,"comment_id":123670898,"body_markdown":"If you solve your issue, you can self-answer to explain how you solve it","body":"If you solve your issue, you can self-answer to explain how you solve it"}],"answers":[{"tags":[],"owner":{"account_id":23316924,"reputation":1,"user_id":17395418,"display_name":"ajay"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1637387882,"creation_date":1637387882,"answer_id":70043600,"question_id":69943118,"body_markdown":"Change the launch mode for that specific activity that you want to open with the current progress in the manifest file\r\nLearn about Android launch mode here : https://betterprogramming.pub/understanding-the-android-activity-launch-modes-49ec89ef79d2","title":"How to open an activity with its progress by clicking on the notification","body":"<p>Change the launch mode for that specific activity that you want to open with the current progress in the manifest file\nLearn about Android launch mode here : <a href=\"https://betterprogramming.pub/understanding-the-android-activity-launch-modes-49ec89ef79d2\" rel=\"nofollow noreferrer\">https://betterprogramming.pub/understanding-the-android-activity-launch-modes-49ec89ef79d2</a></p>\n"}],"owner":{"account_id":23316924,"reputation":1,"user_id":17395418,"display_name":"ajay"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":33,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1637387882,"creation_date":1636720933,"question_id":69943118,"body_markdown":"    Intent open = new Intent(this, WorkoutActivity.class);\r\n    PendingIntent openContent = PendingIntent.getActivity(this, 0, open, PendingIntent.FLAG_UPDATE_CURRENT);\r\n\r\n    String nDistance = Double.toString(lastDistance);\r\n    String nSpeed = String.valueOf(speed);\r\n    NotificationCompat.Builder notification = new NotificationCompat.Builder(this, CHANNEL_ID)\r\n                .setSmallIcon(R.mipmap.icon_logo_round)\r\n                .setContentTitle(sWorkoutName.getText())\r\n                .setStyle(new NotificationCompat.BigTextStyle().bigText(&quot;Distance Covered : &quot; + nDistance + &quot; Kms&quot; + &#39;\\n&#39; + &quot;Time : &quot; + time + &#39;\\n&#39; + &quot;Speed : &quot; + nSpeed + &quot; km/hr&quot;))\r\n                .setOnlyAlertOnce(true)\r\n                .setPriority(NotificationCompat.PRIORITY_DEFAULT)\r\n                .setContentIntent(openContent);\r\n\r\n    notificationManager.notify(1, notification.build());\r\n\r\nHi I am a beginner in app development and I need some help.\r\nI am trying to open workout activity when I click on the notification. But when I do that, the activity is starting from the beginning all of its progress is lost.\r\nSo what can i do to open an activity with its progress when i click on a notification?","title":"How to open an activity with its progress by clicking on the notification","body":"<pre><code>Intent open = new Intent(this, WorkoutActivity.class);\nPendingIntent openContent = PendingIntent.getActivity(this, 0, open, PendingIntent.FLAG_UPDATE_CURRENT);\n\nString nDistance = Double.toString(lastDistance);\nString nSpeed = String.valueOf(speed);\nNotificationCompat.Builder notification = new NotificationCompat.Builder(this, CHANNEL_ID)\n            .setSmallIcon(R.mipmap.icon_logo_round)\n            .setContentTitle(sWorkoutName.getText())\n            .setStyle(new NotificationCompat.BigTextStyle().bigText(&quot;Distance Covered : &quot; + nDistance + &quot; Kms&quot; + '\\n' + &quot;Time : &quot; + time + '\\n' + &quot;Speed : &quot; + nSpeed + &quot; km/hr&quot;))\n            .setOnlyAlertOnce(true)\n            .setPriority(NotificationCompat.PRIORITY_DEFAULT)\n            .setContentIntent(openContent);\n\nnotificationManager.notify(1, notification.build());\n</code></pre>\n<p>Hi I am a beginner in app development and I need some help.\nI am trying to open workout activity when I click on the notification. But when I do that, the activity is starting from the beginning all of its progress is lost.\nSo what can i do to open an activity with its progress when i click on a notification?</p>\n"},{"tags":["java","spring","oracle"],"comments":[{"owner":{"account_id":18243171,"reputation":19300,"user_id":13279831,"display_name":"Nowhere Man"},"score":0,"creation_date":1637393634,"post_id":70043550,"comment_id":123819096,"body_markdown":"Did you try running the code?  Which result did you get then?","body":"Did you try running the code?  Which result did you get then?"},{"owner":{"account_id":7423601,"reputation":18712,"user_id":5646962,"display_name":"Thomas Kl&#228;ger"},"score":0,"creation_date":1637397365,"post_id":70043550,"comment_id":123819679,"body_markdown":"When you `SELECT NVL(column1,0) FROM table_name` then the database will either return the value of `column1` (if column1 is not NULL) or return `0` (if column1 is NULL). Java will therefore never see a NULL value and therefore `object.getcolumn1value()` can never return null.","body":"When you <code>SELECT NVL(column1,0) FROM table_name</code> then the database will either return the value of <code>column1</code> (if column1 is not NULL) or return <code>0</code> (if column1 is NULL). Java will therefore never see a NULL value and therefore <code>object.getcolumn1value()</code> can never return null."}],"owner":{"account_id":23398797,"reputation":1,"user_id":17462301,"display_name":"Jyoti Paliwal"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":65,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1637387291,"creation_date":1637387291,"question_id":70043550,"body_markdown":"I am using Select NVL(column1,0) from table_name from the oracle database. The output of the query is stored in Java object.\r\n\r\nI need to know if object.getcolumn1value() will return null or 0\r\n\r\nThanks in advance ","title":"Will java return null value if my java object is storing output as SELECT NVL(COLUMN,0) from","body":"<p>I am using Select NVL(column1,0) from table_name from the oracle database. The output of the query is stored in Java object.</p>\n<p>I need to know if object.getcolumn1value() will return null or 0</p>\n<p>Thanks in advance</p>\n"},{"tags":["java","algorithm","intellij-idea","intellij-14"],"comments":[{"owner":{"account_id":11244035,"reputation":1,"user_id":8299861,"display_name":"user226164"},"score":1,"creation_date":1637387221,"post_id":70043541,"comment_id":123818304,"body_markdown":"https://coursera.cs.princeton.edu/algs4/assignments/hello/specification.php","body":"<a href=\"https://coursera.cs.princeton.edu/algs4/assignments/hello/specification.php\" rel=\"nofollow noreferrer\">coursera.cs.princeton.edu/algs4/assignments/hello/&hellip;</a>"},{"owner":{"account_id":6520,"reputation":10523,"user_id":11002,"accept_rate":75,"display_name":"tgdavies"},"score":0,"creation_date":1637387352,"post_id":70043541,"comment_id":123818313,"body_markdown":"Your program reads from standard input. You can&#39;t provide input as command line parameters.","body":"Your program reads from standard input. You can&#39;t provide input as command line parameters."},{"owner":{"account_id":11244035,"reputation":1,"user_id":8299861,"display_name":"user226164"},"score":0,"creation_date":1637551660,"post_id":70043541,"comment_id":123848135,"body_markdown":"I thought the putting in files as the via the argument counts the same as typing the words in keyboard. What change should I do then? Also how the autograder is working inputting the files as standard input?","body":"I thought the putting in files as the via the argument counts the same as typing the words in keyboard. What change should I do then? Also how the autograder is working inputting the files as standard input?"},{"owner":{"account_id":6520,"reputation":10523,"user_id":11002,"accept_rate":75,"display_name":"tgdavies"},"score":0,"creation_date":1637552138,"post_id":70043541,"comment_id":123848210,"body_markdown":"If you click on &#39;Modify Options&#39; in the Intellij IDEA Run/Debug Configurations you can select &#39;Redirect Input&#39; and choose a file to read from.","body":"If you click on &#39;Modify Options&#39; in the Intellij IDEA Run/Debug Configurations you can select &#39;Redirect Input&#39; and choose a file to read from."}],"owner":{"account_id":11244035,"reputation":1,"user_id":8299861,"display_name":"user226164"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":517,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1637387172,"creation_date":1637387172,"question_id":70043541,"body_markdown":"So I was just starting out the Algorithms I course by Princeton University, wrote this code\r\n```\r\nimport edu.princeton.cs.algs4.StdIn;\r\nimport edu.princeton.cs.algs4.StdOut;\r\nimport edu.princeton.cs.algs4.StdRandom;\r\n\r\npublic class RandomWord {\r\n    public static void main(String[] args) {\r\n        int i = 0;\r\n        String winner = &quot;&quot;;\r\n        while (!StdIn.isEmpty()) {\r\n            String cur = StdIn.readString();\r\n            i++;\r\n            if (StdRandom.bernoulli((double) 1 / i)) {\r\n                winner = cur;\r\n            }\r\n        }\r\n        StdOut.println(winner);\r\n    }\r\n}\r\n```\r\nThis code works fine for me when I input strings through keyboard but for some reason for some reason nothing happens if I try to edit the Run -&gt; program arguments and run it from animals8.txt.\r\nI believe my code is corrent since \r\n```\r\nTest 2: check that the word the program prints appears on standard input\r\n  * 10000 trials from coin.txt\r\n  * 10000 trials from animals8.txt\r\n  * 10000 trials from animals.txt\r\n  * 10000 trials from colors.txt\r\n  * 10000 trials from algorithms.txt\r\n  * 10000 trials from dream.txt\r\n==&gt; passed\r\n\r\nTest 3: check that program consumes all data from standard input\r\n  * coin.txt\r\n  * animals8.txt\r\n  * animals.txt\r\n  * colors.txt\r\n  * algorithms.txt\r\n  * names.txt\r\n  * dream.txt\r\n==&gt; passed\r\n```\r\nThe coursera autograder runs it just fine. Not sure what is going wrong here on my local intellij device\r\n\r\nIf anyone wants the Princeton library to test things out:\r\nhttps://coursera.cs.princeton.edu/algs4/assignments/hello/specification.php","title":"Intellij Idea not reading files from standard input","body":"<p>So I was just starting out the Algorithms I course by Princeton University, wrote this code</p>\n<pre><code>import edu.princeton.cs.algs4.StdIn;\nimport edu.princeton.cs.algs4.StdOut;\nimport edu.princeton.cs.algs4.StdRandom;\n\npublic class RandomWord {\n    public static void main(String[] args) {\n        int i = 0;\n        String winner = &quot;&quot;;\n        while (!StdIn.isEmpty()) {\n            String cur = StdIn.readString();\n            i++;\n            if (StdRandom.bernoulli((double) 1 / i)) {\n                winner = cur;\n            }\n        }\n        StdOut.println(winner);\n    }\n}\n</code></pre>\n<p>This code works fine for me when I input strings through keyboard but for some reason for some reason nothing happens if I try to edit the Run -&gt; program arguments and run it from animals8.txt.\nI believe my code is corrent since</p>\n<pre><code>Test 2: check that the word the program prints appears on standard input\n  * 10000 trials from coin.txt\n  * 10000 trials from animals8.txt\n  * 10000 trials from animals.txt\n  * 10000 trials from colors.txt\n  * 10000 trials from algorithms.txt\n  * 10000 trials from dream.txt\n==&gt; passed\n\nTest 3: check that program consumes all data from standard input\n  * coin.txt\n  * animals8.txt\n  * animals.txt\n  * colors.txt\n  * algorithms.txt\n  * names.txt\n  * dream.txt\n==&gt; passed\n</code></pre>\n<p>The coursera autograder runs it just fine. Not sure what is going wrong here on my local intellij device</p>\n<p>If anyone wants the Princeton library to test things out:\n<a href=\"https://coursera.cs.princeton.edu/algs4/assignments/hello/specification.php\" rel=\"nofollow noreferrer\">https://coursera.cs.princeton.edu/algs4/assignments/hello/specification.php</a></p>\n"},{"tags":["java","android","command-line","android-emulator","adb"],"comments":[{"owner":{"display_name":"user468311"},"score":0,"creation_date":1397635483,"post_id":23103445,"comment_id":35314709,"body_markdown":"What kind of packages do you want to get? We just need to get your problem first.","body":"What kind of packages do you want to get? We just need to get your problem first."},{"owner":{"account_id":4122509,"reputation":49,"user_id":3387036,"display_name":"user3387036"},"score":0,"creation_date":1397635641,"post_id":23103445,"comment_id":35314805,"body_markdown":"i want to get the application package name of main activity, like I specified in the command line argument","body":"i want to get the application package name of main activity, like I specified in the command line argument"}],"answers":[{"tags":[],"owner":{"account_id":3291742,"reputation":7362,"user_id":2769892,"accept_rate":57,"display_name":"droidev"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1397636162,"creation_date":1397636162,"answer_id":23103692,"question_id":23103445,"body_markdown":"extract the apk file and rebuilt the manifest file, then by parsing the xml manifest file you can find the main activity package name.\r\nrefer [this link][1] for parsing, and refer [this link][2] for extracting apk file.\r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/2097813/how-to-parse-the-androidmanifest-xml-file-inside-an-apk-package\r\n  [2]: https://stackoverflow.com/questions/7888102/how-to-extract-code-of-apk-file","title":"Get the Main Package Name of an .apk File","body":"<p>extract the apk file and rebuilt the manifest file, then by parsing the xml manifest file you can find the main activity package name.\nrefer <a href=\"https://stackoverflow.com/questions/2097813/how-to-parse-the-androidmanifest-xml-file-inside-an-apk-package\">this link</a> for parsing, and refer <a href=\"https://stackoverflow.com/questions/7888102/how-to-extract-code-of-apk-file\">this link</a> for extracting apk file.</p>\n"},{"tags":[],"owner":{"account_id":2268651,"reputation":4655,"user_id":1996639,"accept_rate":85,"display_name":"zella"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1397636192,"creation_date":1397636192,"answer_id":23103705,"question_id":23103445,"body_markdown":"    aapt dump badging &lt;path-to-apk&gt;","title":"Get the Main Package Name of an .apk File","body":"<pre><code>aapt dump badging &lt;path-to-apk&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1388642,"reputation":383,"user_id":1320018,"accept_rate":75,"display_name":"Michael Kent"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1397721407,"creation_date":1397648647,"answer_id":23108477,"question_id":23103445,"body_markdown":"This is what I use for this in one of my projects, inside a shell script.\r\n\r\n    apk= #apk path\r\n    package=`.//aapt dump badging $apk | grep package | awk &#39;{print $2}&#39; | sed s/name=//g | sed s/\\&#39;//g`\r\n    echo $package\r\n    adb install $apk\r\n\r\n\r\nif you want to just enter in cmd prompt, then it would be \r\n\r\n    .//aapt dump badging ***apk relative path*** | grep package | awk &#39;{print $2}&#39; | sed s/name=//g | sed s/\\&#39;//g\r\n\r\nthat should work.","title":"Get the Main Package Name of an .apk File","body":"<p>This is what I use for this in one of my projects, inside a shell script.</p>\n\n<pre><code>apk= #apk path\npackage=`.//aapt dump badging $apk | grep package | awk '{print $2}' | sed s/name=//g | sed s/\\'//g`\necho $package\nadb install $apk\n</code></pre>\n\n<p>if you want to just enter in cmd prompt, then it would be </p>\n\n<pre><code>.//aapt dump badging ***apk relative path*** | grep package | awk '{print $2}' | sed s/name=//g | sed s/\\'//g\n</code></pre>\n\n<p>that should work.</p>\n"},{"tags":[],"owner":{"account_id":1896716,"reputation":1716,"user_id":1713505,"display_name":"thucnguyen"},"down_vote_count":0,"up_vote_count":11,"is_accepted":false,"score":11,"last_activity_date":1409675424,"creation_date":1409675424,"answer_id":25628141,"question_id":23103445,"body_markdown":"On Linux, simply use this command to get package name:\r\n \r\n`aapt dump badging {apk-file.apk} | grep package | awk &#39;{print $2}&#39; | sed s/name=//g | sed s/\\&#39;//g`\r\n\r\nGetting main (launcher) activity is similar:\r\n\r\n`aapt dump badging {apk-file.apk} | grep launchable-activity: | awk &#39;{print $2}&#39; | sed s/name=//g | sed s/\\&#39;//g`\r\n\r\nFor my personal usage, I&#39;ve written a shell script called `apkinfo.sh` as following:\r\n\r\n```#!/bin/bash \r\npackage=`aapt dump badging $* | grep package | awk &#39;{print $2}&#39; | sed s/name=//g | sed s/\\&#39;//g`\r\nactivity=`aapt dump badging $* | grep launchable-activity: | awk &#39;{print $2}&#39; | sed s/name=//g | sed s/\\&#39;//g`\r\necho\r\necho package : $package\r\necho activity: $activity```\r\n\r\nAnd use it as following:\r\n\r\n`./apkinfo.sh {path-to-apk-file.apk}`","title":"Get the Main Package Name of an .apk File","body":"<p>On Linux, simply use this command to get package name:</p>\n\n<p><code>aapt dump badging {apk-file.apk} | grep package | awk '{print $2}' | sed s/name=//g | sed s/\\'//g</code></p>\n\n<p>Getting main (launcher) activity is similar:</p>\n\n<p><code>aapt dump badging {apk-file.apk} | grep launchable-activity: | awk '{print $2}' | sed s/name=//g | sed s/\\'//g</code></p>\n\n<p>For my personal usage, I've written a shell script called <code>apkinfo.sh</code> as following:</p>\n\n<p><code>#!/bin/bash \npackage=`aapt dump badging $* | grep package | awk '{print $2}' | sed s/name=//g | sed s/\\'//g`\nactivity=`aapt dump badging $* | grep launchable-activity: | awk '{print $2}' | sed s/name=//g | sed s/\\'//g`\necho\necho package : $package\necho activity: $activity</code></p>\n\n<p>And use it as following:</p>\n\n<p><code>./apkinfo.sh {path-to-apk-file.apk}</code></p>\n"},{"tags":[],"owner":{"account_id":18601860,"reputation":1,"user_id":13556499,"display_name":"Akash Patel"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1637387102,"creation_date":1637387102,"answer_id":70043537,"question_id":23103445,"body_markdown":"You can use [Andgroguard][1]\r\n\r\nThis is how I did in Python3:\r\n\r\n    from androguard.misc import AnalyzeAPK\r\n    a, d, dx = AnalyzeAPK(apk_file)\r\n\tpackage_name = a.get_package()\r\n\tprint(package_name)\r\n\r\n  [1]: https://androguard.readthedocs.io/en/latest/#","title":"Get the Main Package Name of an .apk File","body":"<p>You can use <a href=\"https://androguard.readthedocs.io/en/latest/#\" rel=\"nofollow noreferrer\">Andgroguard</a></p>\n<p>This is how I did in Python3:</p>\n<pre><code>from androguard.misc import AnalyzeAPK\na, d, dx = AnalyzeAPK(apk_file)\npackage_name = a.get_package()\nprint(package_name)\n</code></pre>\n"}],"owner":{"account_id":4122509,"reputation":49,"user_id":3387036,"display_name":"user3387036"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":11084,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"accepted_answer_id":23103692,"answer_count":5,"score":3,"last_activity_date":1637387102,"creation_date":1397635396,"question_id":23103445,"body_markdown":"I have to launch an application on android emulator using command line.for that I have knew that there is a method by adb command;\r\n\r\n    adb shell am start -a android.intent.action.MAIN -n com.example.myApplication\r\n\r\nbut I have to find the application package name before executing this command, so anybody help me to find the package name, or any alternate solution for running apk on emulator","title":"Get the Main Package Name of an .apk File","body":"<p>I have to launch an application on android emulator using command line.for that I have knew that there is a method by adb command;</p>\n\n<pre><code>adb shell am start -a android.intent.action.MAIN -n com.example.myApplication\n</code></pre>\n\n<p>but I have to find the application package name before executing this command, so anybody help me to find the package name, or any alternate solution for running apk on emulator</p>\n"},{"tags":["java","spring-boot","spring-resttemplate"],"comments":[{"owner":{"account_id":3883809,"reputation":895,"user_id":3215705,"accept_rate":75,"display_name":"mystery"},"score":0,"creation_date":1637380029,"post_id":70042087,"comment_id":123817580,"body_markdown":"This is happening how long after the call? Is it always same?","body":"This is happening how long after the call? Is it always same?"},{"owner":{"account_id":11877156,"reputation":65,"user_id":8691900,"display_name":"skc"},"score":0,"creation_date":1637386710,"post_id":70042087,"comment_id":123818254,"body_markdown":"Service B is taking less than 2 mins to respond the request. Added definition of resttemplate to the question.","body":"Service B is taking less than 2 mins to respond the request. Added definition of resttemplate to the question."},{"owner":{"account_id":3883809,"reputation":895,"user_id":3215705,"accept_rate":75,"display_name":"mystery"},"score":0,"creation_date":1637388577,"post_id":70042087,"comment_id":123818464,"body_markdown":"Is there any error in Service B? Usually this happens when server(Service B) close the connection","body":"Is there any error in Service B? Usually this happens when server(Service B) close the connection"},{"owner":{"account_id":11877156,"reputation":65,"user_id":8691900,"display_name":"skc"},"score":0,"creation_date":1637392821,"post_id":70042087,"comment_id":123818992,"body_markdown":"Yes, its &#39;java.io.IOException: Broken pipe&#39;","body":"Yes, its &#39;java.io.IOException: Broken pipe&#39;"},{"owner":{"account_id":11337137,"reputation":838,"user_id":8312604,"display_name":"Alexandr Arhipov"},"score":0,"creation_date":1637406950,"post_id":70042087,"comment_id":123821234,"body_markdown":"As I get, RestTemplate no disagned for processing big files. Probably you should consider usage of alternative clients which support streaming - https://stackoverflow.com/a/54484348/8312604","body":"As I get, RestTemplate no disagned for processing big files. Probably you should consider usage of alternative clients which support streaming - <a href=\"https://stackoverflow.com/a/54484348/8312604\">stackoverflow.com/a/54484348/8312604</a>"},{"owner":{"account_id":11877156,"reputation":65,"user_id":8691900,"display_name":"skc"},"score":0,"creation_date":1637612056,"post_id":70042087,"comment_id":123868379,"body_markdown":"We got the root cause of this issue. We are deploying our applications to cloud environment and it has default route timeout as 30 seconds. \nAs request was taking more than 30 seconds, so pod was closing the connection. After increasing the timeout, the issue got resolved. Thank you all for your help/answers.","body":"We got the root cause of this issue. We are deploying our applications to cloud environment and it has default route timeout as 30 seconds.  As request was taking more than 30 seconds, so pod was closing the connection. After increasing the timeout, the issue got resolved. Thank you all for your help/answers."}],"owner":{"account_id":11877156,"reputation":65,"user_id":8691900,"display_name":"skc"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":1483,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1637386999,"creation_date":1637365548,"question_id":70042087,"body_markdown":"I have two services A and B where Service A is trying to get the ```json``` data from the Service B. When data is less for example 10KB the call ends without any exception. But when the data is around 100MB it gives an error ```java.net.SocketException: Unexpected end of file from server``` on Service A and we see ```Exception Message:java.io.IOException: Broken pipe``` in Service B.\r\n\r\nWe are using \r\n**Spring boot 2.2.6**, **Java8** and **RestTemplate** for communication.\r\nBelow is the stackTrace for Service A.\r\n```\r\njava.base/sun.net.www.http.HttpClient.parseHTTPHeader(HttpClient.java:862)\r\njava.base/sun.net.www.http.HttpClient.parseHTTP(HttpClient.java:689)\r\njava.base/sun.net.www.http.HttpClient.parseHTTPHeader(HttpClient.java:859)\r\njava.base/sun.net.www.http.HttpClient.parseHTTP(HttpClient.java:689)\r\njava.base/sun.net.www.protocol.http.HttpURLConnection.getInputStream0(HttpURLConnection.java:1615)\r\njava.base/sun.net.www.protocol.http.HttpURLConnection.getInputStream(HttpURLConnection.java:1520)\r\njava.base/java.net.HttpURLConnection.getResponseCode(HttpURLConnection.java:527)\r\njava.base/sun.net.www.protocol.https.HttpsURLConnectionImpl.getResponseCode(HttpsURLConnectionImpl.java:334)\r\norg.springframework.http.client.SimpleBufferingClientHttpRequest.executeInternal(SimpleBufferingClientHttpRequest.java:82)\r\norg.springframework.http.client.AbstractBufferingClientHttpRequest.executeInternal(AbstractBufferingClientHttpRequest.java:48)\r\norg.springframework.http.client.AbstractClientHttpRequest.execute(AbstractClientHttpRequest.java:53)\r\norg.springframework.http.client.InterceptingClientHttpRequest$InterceptingRequestExecution.execute(InterceptingClientHttpRequest.java:109)\r\norg.springframework.boot.actuate.metrics.web.client.MetricsClientHttpRequestInterceptor.intercept(MetricsClientHttpRequestInterceptor.java:93)\r\norg.springframework.http.client.InterceptingClientHttpRequest$InterceptingRequestExecution.execute(InterceptingClientHttpRequest.java:93)\r\norg.springframework.http.client.InterceptingClientHttpRequest.executeInternal(InterceptingClientHttpRequest.java:77)\r\norg.springframework.http.client.AbstractBufferingClientHttpRequest.executeInternal(AbstractBufferingClientHttpRequest.java:48)\r\norg.springframework.http.client.AbstractClientHttpRequest.execute(AbstractClientHttpRequest.java:53)\r\norg.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:739)\r\norg.springframework.web.client.RestTemplate.execute(RestTemplate.java:674)\r\norg.springframework.web.client.RestTemplate.exchange(RestTemplate.java:612)\r\ncom.TestRestService.getData(TestRestService.java:58)\r\ncom.TestRestService$$FastClassBySpringCGLIB$$91579cd4.invoke(&lt;generated&gt;)\r\norg.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)\r\norg.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:771)\r\norg.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)\r\norg.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:749)\r\norg.springframework.retry.annotation.AnnotationAwareRetryOperationsInterceptor.invoke(AnnotationAwareRetryOperationsInterceptor.java:156)\r\norg.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)\r\norg.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:749)\r\norg.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:691)\r\ncom.TestRestService$$EnhancerBySpringCGLIB$$f08eacac.getData(&lt;generated&gt;)\r\ncom.TestService.getData(TestService.java:25)\r\njava.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128)\r\njava.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)\r\njava.base/java.lang.Thread.run(Thread.java:834)\r\n```\r\nBelow the definition of resttemplate in Service A.\r\n```\r\npublic RestTemplate restTemplate(final RestTemplateBuilder  builder) {\r\n        return builder\r\n                .requestFactory(new ClientHttpRequestFactorySupplier())\r\n                .setConnectTimeout(Duration.ofMinutes(15))\r\n                .setReadTimeout(Duration.ofMinutes(15))\r\n                .build();\r\n    }\r\n```","title":"Springboot RestTemplate - Unexpected end of file from server","body":"<p>I have two services A and B where Service A is trying to get the <code>json</code> data from the Service B. When data is less for example 10KB the call ends without any exception. But when the data is around 100MB it gives an error <code>java.net.SocketException: Unexpected end of file from server</code> on Service A and we see <code>Exception Message:java.io.IOException: Broken pipe</code> in Service B.</p>\n<p>We are using\n<strong>Spring boot 2.2.6</strong>, <strong>Java8</strong> and <strong>RestTemplate</strong> for communication.\nBelow is the stackTrace for Service A.</p>\n<pre><code>java.base/sun.net.www.http.HttpClient.parseHTTPHeader(HttpClient.java:862)\njava.base/sun.net.www.http.HttpClient.parseHTTP(HttpClient.java:689)\njava.base/sun.net.www.http.HttpClient.parseHTTPHeader(HttpClient.java:859)\njava.base/sun.net.www.http.HttpClient.parseHTTP(HttpClient.java:689)\njava.base/sun.net.www.protocol.http.HttpURLConnection.getInputStream0(HttpURLConnection.java:1615)\njava.base/sun.net.www.protocol.http.HttpURLConnection.getInputStream(HttpURLConnection.java:1520)\njava.base/java.net.HttpURLConnection.getResponseCode(HttpURLConnection.java:527)\njava.base/sun.net.www.protocol.https.HttpsURLConnectionImpl.getResponseCode(HttpsURLConnectionImpl.java:334)\norg.springframework.http.client.SimpleBufferingClientHttpRequest.executeInternal(SimpleBufferingClientHttpRequest.java:82)\norg.springframework.http.client.AbstractBufferingClientHttpRequest.executeInternal(AbstractBufferingClientHttpRequest.java:48)\norg.springframework.http.client.AbstractClientHttpRequest.execute(AbstractClientHttpRequest.java:53)\norg.springframework.http.client.InterceptingClientHttpRequest$InterceptingRequestExecution.execute(InterceptingClientHttpRequest.java:109)\norg.springframework.boot.actuate.metrics.web.client.MetricsClientHttpRequestInterceptor.intercept(MetricsClientHttpRequestInterceptor.java:93)\norg.springframework.http.client.InterceptingClientHttpRequest$InterceptingRequestExecution.execute(InterceptingClientHttpRequest.java:93)\norg.springframework.http.client.InterceptingClientHttpRequest.executeInternal(InterceptingClientHttpRequest.java:77)\norg.springframework.http.client.AbstractBufferingClientHttpRequest.executeInternal(AbstractBufferingClientHttpRequest.java:48)\norg.springframework.http.client.AbstractClientHttpRequest.execute(AbstractClientHttpRequest.java:53)\norg.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:739)\norg.springframework.web.client.RestTemplate.execute(RestTemplate.java:674)\norg.springframework.web.client.RestTemplate.exchange(RestTemplate.java:612)\ncom.TestRestService.getData(TestRestService.java:58)\ncom.TestRestService$$FastClassBySpringCGLIB$$91579cd4.invoke(&lt;generated&gt;)\norg.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)\norg.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:771)\norg.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)\norg.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:749)\norg.springframework.retry.annotation.AnnotationAwareRetryOperationsInterceptor.invoke(AnnotationAwareRetryOperationsInterceptor.java:156)\norg.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)\norg.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:749)\norg.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:691)\ncom.TestRestService$$EnhancerBySpringCGLIB$$f08eacac.getData(&lt;generated&gt;)\ncom.TestService.getData(TestService.java:25)\njava.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128)\njava.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)\njava.base/java.lang.Thread.run(Thread.java:834)\n</code></pre>\n<p>Below the definition of resttemplate in Service A.</p>\n<pre><code>public RestTemplate restTemplate(final RestTemplateBuilder  builder) {\n        return builder\n                .requestFactory(new ClientHttpRequestFactorySupplier())\n                .setConnectTimeout(Duration.ofMinutes(15))\n                .setReadTimeout(Duration.ofMinutes(15))\n                .build();\n    }\n</code></pre>\n"},{"tags":["java","android-studio","textview"],"answers":[{"tags":[],"owner":{"account_id":8320746,"reputation":13,"user_id":6252549,"display_name":"android remote control"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1637386710,"creation_date":1637371282,"answer_id":70042542,"question_id":67115870,"body_markdown":"Try `runOnUiThread` method because `onMessageArived()` is a client thread.\r\n\r\n    public void messageArrived(String topic, MqttMessage message) \r\n    throws Exception {\r\n    String msg = new String(message.getPayload());\r\n    Log.i(TAG, &quot;Message Arrived: &quot; + msg);\r\n    runOnUiThread(new Runnable(){\r\n       public void run() {\r\n           textView.setText(msg);\r\n       }\r\n    });\r\n    }    ","title":"MQTT in Android Studio with Java","body":"<p>Try <code>runOnUiThread</code> method because <code>onMessageArived()</code> is a client thread.</p>\n<pre><code>public void messageArrived(String topic, MqttMessage message) \nthrows Exception {\nString msg = new String(message.getPayload());\nLog.i(TAG, &quot;Message Arrived: &quot; + msg);\nrunOnUiThread(new Runnable(){\n   public void run() {\n       textView.setText(msg);\n   }\n});\n}    \n</code></pre>\n"}],"owner":{"account_id":13655811,"reputation":169,"user_id":9852343,"display_name":"MrCaptain Alex"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":377,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1637386710,"creation_date":1618519807,"question_id":67115870,"body_markdown":"I&#39;m new in the android world. I was trying to use an mqtt protocol to send info from a client (publisher) to a topic and retrieve from another client (subscriber) the info from the topic. For the first part it&#39;s ok, I&#39;m able to send info to the topic and read them from the subscriber.\r\n\r\nI would like to screen the information retrieved in textViews.\r\nNow the problem is, the textView doesn&#39;t set the new arrived text.\r\nCheck that I did: \r\n- the program is correctly entering in the messageArrived method (printing the message received I can see them in the log)\r\n- the textView are visible, if I write at the beginning some text I can see it\r\n\r\nThis is the messageArrived method:\r\n\r\n              public void messageArrived(String topic, MqttMessage message) throws Exception {\r\n                String str = new String(message.getPayload());\r\n                System.out.println(str);\r\n                String[] info = str.split(&quot;,&quot;);\r\n                Date sunset = new Date(Integer.parseInt(info[5]) * 1000);\r\n                Date sunrise = new Date(Integer.parseInt(info[6]) * 1000);\r\n                SimpleDateFormat sdf = new SimpleDateFormat(&quot;EEEE,MMMM d,yyyy h:mm,a&quot;);\r\n                textView.setText(&quot;Last update at &quot;+info[2]);\r\n                textView2.setText(&quot;Humidity &quot;+info[3]);\r\n                textView3.setText(&quot;Sunset &quot;+sdf.format(sunset));\r\n                textView4.setText(&quot;Sunrise: &quot;+sdf.format(sunset));\r\n                textView5.setText(info[4]);\r\n                temp.setText(info[1]);\r\n                city.setText(info[0]);\r\n                vibrator.vibrate(500);\r\n                myRingtone.play();\r\n              }\r\n\r\nThe string str is like:\r\n\r\n**Rome,11,Thursday-04-15 10:37:40,100.0,drizzle,1.618508059E9,1.618460677E9**\r\n\r\n\r\nWhat I&#39;m doing wrong?\r\n\r\nThanks in advance\r\n\r\n\r\n","title":"MQTT in Android Studio with Java","body":"<p>I'm new in the android world. I was trying to use an mqtt protocol to send info from a client (publisher) to a topic and retrieve from another client (subscriber) the info from the topic. For the first part it's ok, I'm able to send info to the topic and read them from the subscriber.</p>\n<p>I would like to screen the information retrieved in textViews.\nNow the problem is, the textView doesn't set the new arrived text.\nCheck that I did:</p>\n<ul>\n<li>the program is correctly entering in the messageArrived method (printing the message received I can see them in the log)</li>\n<li>the textView are visible, if I write at the beginning some text I can see it</li>\n</ul>\n<p>This is the messageArrived method:</p>\n<pre><code>          public void messageArrived(String topic, MqttMessage message) throws Exception {\n            String str = new String(message.getPayload());\n            System.out.println(str);\n            String[] info = str.split(&quot;,&quot;);\n            Date sunset = new Date(Integer.parseInt(info[5]) * 1000);\n            Date sunrise = new Date(Integer.parseInt(info[6]) * 1000);\n            SimpleDateFormat sdf = new SimpleDateFormat(&quot;EEEE,MMMM d,yyyy h:mm,a&quot;);\n            textView.setText(&quot;Last update at &quot;+info[2]);\n            textView2.setText(&quot;Humidity &quot;+info[3]);\n            textView3.setText(&quot;Sunset &quot;+sdf.format(sunset));\n            textView4.setText(&quot;Sunrise: &quot;+sdf.format(sunset));\n            textView5.setText(info[4]);\n            temp.setText(info[1]);\n            city.setText(info[0]);\n            vibrator.vibrate(500);\n            myRingtone.play();\n          }\n</code></pre>\n<p>The string str is like:</p>\n<p><strong>Rome,11,Thursday-04-15 10:37:40,100.0,drizzle,1.618508059E9,1.618460677E9</strong></p>\n<p>What I'm doing wrong?</p>\n<p>Thanks in advance</p>\n"},{"tags":["java","android","kotlin"],"comments":[{"owner":{"account_id":16768304,"reputation":8503,"user_id":12121419,"display_name":"blackapps"},"score":0,"creation_date":1637326117,"post_id":70035010,"comment_id":123802753,"body_markdown":"Show your code for sharing.","body":"Show your code for sharing."},{"owner":{"account_id":23392093,"reputation":21,"user_id":17456611,"display_name":"Jaydip S"},"score":0,"creation_date":1637328019,"post_id":70035010,"comment_id":123803464,"body_markdown":"@blackapps can you please check in Redmi device which have 11 version. now pick any one image from xiaomi official file manager app and share to whatsapp or Facebook or Instagram. case 2. share image whatsapp to other app. If you still want me to share the code. let me know.","body":"@blackapps can you please check in Redmi device which have 11 version. now pick any one image from xiaomi official file manager app and share to whatsapp or Facebook or Instagram. case 2. share image whatsapp to other app. If you still want me to share the code. let me know."},{"owner":{"account_id":16768304,"reputation":8503,"user_id":12121419,"display_name":"blackapps"},"score":1,"creation_date":1637333507,"post_id":70035010,"comment_id":123805812,"body_markdown":"I will gladly do that. Please send me such a device. Meanwhile you better post your code.","body":"I will gladly do that. Please send me such a device. Meanwhile you better post your code."},{"owner":{"account_id":23392093,"reputation":21,"user_id":17456611,"display_name":"Jaydip S"},"score":0,"creation_date":1637384371,"post_id":70035010,"comment_id":123818004,"body_markdown":"@blackapps posted the code.","body":"@blackapps posted the code."},{"owner":{"account_id":16768304,"reputation":8503,"user_id":12121419,"display_name":"blackapps"},"score":0,"creation_date":1637390802,"post_id":70035010,"comment_id":123818731,"body_markdown":"`Whenever we share a media file with our app,` ??? But you did not post code for that. If an app shares a file it uses ACTION_SEND to ... send a file. What you posted looks more as if your app receives a shared file. Pretty confusing. You app implemented an intent-filter for ACTION_SEND? And you did not tell us?","body":"<code>Whenever we share a media file with our app,</code> ??? But you did not post code for that. If an app shares a file it uses ACTION_SEND to ... send a file. What you posted looks more as if your app receives a shared file. Pretty confusing. You app implemented an intent-filter for ACTION_SEND? And you did not tell us?"},{"owner":{"account_id":16768304,"reputation":8503,"user_id":12121419,"display_name":"blackapps"},"score":0,"creation_date":1637391090,"post_id":70035010,"comment_id":123818770,"body_markdown":"`String path = videoUri.getPath();` You can do nothing with getPath(). You bettee use the whole uri. Have a look at .toString().","body":"<code>String path = videoUri.getPath();</code> You can do nothing with getPath(). You bettee use the whole uri. Have a look at .toString()."},{"owner":{"account_id":16768304,"reputation":8503,"user_id":12121419,"display_name":"blackapps"},"score":0,"creation_date":1637392153,"post_id":70035010,"comment_id":123818897,"body_markdown":"You also should mention Android version of all other devices.","body":"You also should mention Android version of all other devices."}],"answers":[{"tags":[],"owner":{"account_id":1723697,"reputation":4004,"user_id":1578867,"accept_rate":86,"display_name":"auspicious99"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1637386644,"creation_date":1637386644,"answer_id":70043511,"question_id":70035010,"body_markdown":"If this is only happening with targeting API 30 and was working fine before with API 29, then it may be due to one of the changes introduced with API 30, as [listed by Google][1]. In particular, from your description, it may be because of [APP_DATA_DIRECTORY_ISOLATION][2].\r\n\r\nAs https://developer.android.com/about/versions/11/privacy/storage#other-private-dirs explains:\r\n\r\n&gt; Android 9 (API level 28) started to restrict which apps could make the files in their data directories on internal storage world-accessible to other apps. Apps that target Android 9 or higher cannot make the files in their data directories world-accessible.\r\n&gt;\r\n&gt; Android 11 expands upon this restriction. If your app targets Android 11, it cannot access the files in any other app&#39;s data directory, even if the other app targets Android 8.1 (API level 27) or lower and has made the files in its data directory world-readable.\r\n\r\nand\r\n\r\n&gt; On Android 11, apps can no longer access files in any other app&#39;s dedicated, app-specific directory within external storage.\r\n\r\nHow can you test if it is APP_DATA_DIRECTORY_ISOLATION or some other API level 30 feature that is related to the issue (at least on the Xiaomi device)? You can actually built a debug app targeting API level 29 and toggle on/off individual API level 30 features to check, as explained in https://stackoverflow.com/questions/69758511/my-android-app-is-not-working-properly-once-i-set-targetsdk-as-api-30-how-do-i/69758512#69758512\r\n\r\nWhy only on Xiaomi and not other devices? Maybe related to differences in implementation, but if you can at least test the API level 30 feature changes on the Xiaomi device, that can help in the troubleshooting.\r\n\r\n  [1]: https://developer.android.com/about/versions/11/behavior-changes-all\r\n  [2]: https://developer.android.com/about/versions/11/reference/compat-framework-changes#app_data_directory_isolation","title":"Unable to share media file outside app with our app in Redmi device for android 11","body":"<p>If this is only happening with targeting API 30 and was working fine before with API 29, then it may be due to one of the changes introduced with API 30, as <a href=\"https://developer.android.com/about/versions/11/behavior-changes-all\" rel=\"nofollow noreferrer\">listed by Google</a>. In particular, from your description, it may be because of <a href=\"https://developer.android.com/about/versions/11/reference/compat-framework-changes#app_data_directory_isolation\" rel=\"nofollow noreferrer\">APP_DATA_DIRECTORY_ISOLATION</a>.</p>\n<p>As <a href=\"https://developer.android.com/about/versions/11/privacy/storage#other-private-dirs\" rel=\"nofollow noreferrer\">https://developer.android.com/about/versions/11/privacy/storage#other-private-dirs</a> explains:</p>\n<blockquote>\n<p>Android 9 (API level 28) started to restrict which apps could make the files in their data directories on internal storage world-accessible to other apps. Apps that target Android 9 or higher cannot make the files in their data directories world-accessible.</p>\n<p>Android 11 expands upon this restriction. If your app targets Android 11, it cannot access the files in any other app's data directory, even if the other app targets Android 8.1 (API level 27) or lower and has made the files in its data directory world-readable.</p>\n</blockquote>\n<p>and</p>\n<blockquote>\n<p>On Android 11, apps can no longer access files in any other app's dedicated, app-specific directory within external storage.</p>\n</blockquote>\n<p>How can you test if it is APP_DATA_DIRECTORY_ISOLATION or some other API level 30 feature that is related to the issue (at least on the Xiaomi device)? You can actually built a debug app targeting API level 29 and toggle on/off individual API level 30 features to check, as explained in <a href=\"https://stackoverflow.com/questions/69758511/my-android-app-is-not-working-properly-once-i-set-targetsdk-as-api-30-how-do-i/69758512#69758512\">My Android app is not working properly once I set targetSDK as API 30; how do I figure out the reason(s)?</a></p>\n<p>Why only on Xiaomi and not other devices? Maybe related to differences in implementation, but if you can at least test the API level 30 feature changes on the Xiaomi device, that can help in the troubleshooting.</p>\n"}],"owner":{"account_id":23392093,"reputation":21,"user_id":17456611,"display_name":"Jaydip S"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":460,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":1,"score":2,"last_activity_date":1637386644,"creation_date":1637325640,"question_id":70035010,"body_markdown":"Whenever we share a media file with our app, that file we should have access to display, but in the Xioami device we are unable to access those files, whereas for other device like vivo, oppo, realme, oneplus etc. is working fine and able to display or read those file.\r\n\r\nFor android 10 version it&#39;s working fine in redmi device but for android 11 (SDK 30) it&#39;s not working.\r\n\r\nEven popular app like Whatsapp, facebook, Instagram, Telegram and Singal also unable to attach file from out side the application.\r\n\r\nCan anyone please give your feedback and help how we can fix this problem in future.\r\n\r\nBelow is my code to get media uri \r\n\r\n```\r\n String action = getIntent().getAction();\r\n String type = getIntent().getType();\r\n\r\nif (Intent.ACTION_SEND.equals(action) {\r\n\r\n   if (type.equals(&quot;text/plain&quot;)) {\r\n      String textMessage = getIntent().getStringExtra(Intent.EXTRA_TEXT);\r\n   } else if(type.startsWith(&quot;image/&quot;)) {\r\n      Uri imageUri = (Uri) getIntent().getParcelableExtra(Intent.EXTRA_STREAM);\r\n      String path = imageUri.getPath();\r\n   } else if(type.startsWith(&quot;video/&quot;)) {\r\n      Uri videoUri = (Uri) getIntent().getParcelableExtra(Intent.EXTRA_STREAM);\r\n      String path = videoUri.getPath();\r\n   }\r\n\r\n}\r\n```\r\n\r\nWe also have used custom parser to get file path from uri but didn&#39;t work.  \r\nFile provider also included in xml directory.","title":"Unable to share media file outside app with our app in Redmi device for android 11","body":"<p>Whenever we share a media file with our app, that file we should have access to display, but in the Xioami device we are unable to access those files, whereas for other device like vivo, oppo, realme, oneplus etc. is working fine and able to display or read those file.</p>\n<p>For android 10 version it's working fine in redmi device but for android 11 (SDK 30) it's not working.</p>\n<p>Even popular app like Whatsapp, facebook, Instagram, Telegram and Singal also unable to attach file from out side the application.</p>\n<p>Can anyone please give your feedback and help how we can fix this problem in future.</p>\n<p>Below is my code to get media uri</p>\n<pre><code> String action = getIntent().getAction();\n String type = getIntent().getType();\n\nif (Intent.ACTION_SEND.equals(action) {\n\n   if (type.equals(&quot;text/plain&quot;)) {\n      String textMessage = getIntent().getStringExtra(Intent.EXTRA_TEXT);\n   } else if(type.startsWith(&quot;image/&quot;)) {\n      Uri imageUri = (Uri) getIntent().getParcelableExtra(Intent.EXTRA_STREAM);\n      String path = imageUri.getPath();\n   } else if(type.startsWith(&quot;video/&quot;)) {\n      Uri videoUri = (Uri) getIntent().getParcelableExtra(Intent.EXTRA_STREAM);\n      String path = videoUri.getPath();\n   }\n\n}\n</code></pre>\n<p>We also have used custom parser to get file path from uri but didn't work.<br />\nFile provider also included in xml directory.</p>\n"},{"tags":["java","android","firebase","firebase-realtime-database"],"comments":[{"owner":{"account_id":5589309,"reputation":2044,"user_id":4429015,"display_name":"B001ᛦ"},"score":2,"creation_date":1555423973,"post_id":55710228,"comment_id":98101241,"body_markdown":"_my database name will be variable_ Why is that? Are you stroing data randomly in each db?","body":"<i>my database name will be variable</i> Why is that? Are you stroing data randomly in each db?"},{"owner":{"account_id":12884785,"reputation":1,"user_id":9318683,"display_name":"Isa C."},"score":0,"creation_date":1555424605,"post_id":55710228,"comment_id":98101694,"body_markdown":"The database name will be random. But I want to query with database names. For example, when I query &quot;155&quot;, I want it to give &quot;police&quot;. I want to create a class for this. @B001ᛦ","body":"The database name will be random. But I want to query with database names. For example, when I query &quot;155&quot;, I want it to give &quot;police&quot;. I want to create a class for this. @B001ᛦ"},{"owner":{"account_id":5589309,"reputation":2044,"user_id":4429015,"display_name":"B001ᛦ"},"score":2,"creation_date":1555424912,"post_id":55710228,"comment_id":98101895,"body_markdown":"_The database name will be random..._ Does make no sense to me. Sounds like a XY-problem","body":"<i>The database name will be random...</i> Does make no sense to me. Sounds like a XY-problem"},{"owner":{"account_id":3683985,"reputation":24027,"user_id":3068190,"display_name":"samthecodingman"},"score":0,"creation_date":1555487945,"post_id":55710228,"comment_id":98124475,"body_markdown":"@B001ᛦ They mean that the key of each database entry is not fixed (the phone numbers). They are struggling to translate downloaded data into a structured Java class that they can make use of.","body":"@B001ᛦ They mean that the key of each database entry is not fixed (the phone numbers). They are struggling to translate downloaded data into a structured Java class that they can make use of."}],"answers":[{"tags":[],"owner":{"account_id":12464734,"reputation":107,"user_id":11370143,"display_name":"LinuxMasterRace"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1555445739,"creation_date":1555445739,"answer_id":55715980,"question_id":55710228,"body_markdown":"You can&#39;t do that. it&#39;s impossible to get a specific key without knowing it&#39;s name. Are you using keys to index the data? if so maybe don&#39;t do that and just store a index in the node so you can set a final title.","title":"How can I query data with different firebase database names?","body":"<p>You can't do that. it's impossible to get a specific key without knowing it's name. Are you using keys to index the data? if so maybe don't do that and just store a index in the node so you can set a final title.</p>\n"},{"tags":[],"owner":{"account_id":3683985,"reputation":24027,"user_id":3068190,"display_name":"samthecodingman"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1637385742,"creation_date":1555504263,"answer_id":55727618,"question_id":55710228,"body_markdown":"Because you are using dynamic keys, there is no efficient way to use `orderByChild()` to get the result you desire without having to download the entire &quot;ContactPhoneNumbers&quot; node to the client device and then performing the sort and filter. The alternative is to keep an index of the contacts.\r\n\r\n## orderByChild() ##\r\nThis is only useful for small datasets. Do not rely on it for when &quot;ContactPhoneNumbers&quot; gets larger as it will drive up your costs. Each time this is called, your contacts database will be downloaded in it&#39;s entirety.\r\n\r\n    String phoneSearchText = &quot;+90 530 408 3456&quot;;\r\n    Query q = mUserDatabase.orderByChild(phoneSearchText).startAt(&quot;&quot;);\r\n\r\n\r\n## Indexing ##\r\nWhen your data relies on dynamic keys, you have implement a custom index implementation rather than use the RTDB&#39;s built-in indexing system (see [indexing data](https://firebase.google.com/docs/database/security/indexing-data)).\r\n\r\nYou can build and maintain the index either on the client (cheaper) or server side (easier to maintain).\r\n\r\nFor the sake of security and maintainability, I&#39;ll include some modified code for a server-side implementation built on [Cloud Functions for Firebase](https://firebase.google.com/docs/functions/).\r\n\r\nThis code will generate the following index which can be queried for a phone number and contain all the different variants. Any changes made to the &quot;ContactPhoneNumbers&quot; tree will be mirrored to this index automatically. You should [secure this index](https://firebase.google.com/docs/database/security/securing-data) from being changeable by client devices.\r\n\r\n    {\r\n      &quot;ContactPhoneNumbersIndex&quot;: {\r\n        &quot;+90 505 696 1234&quot;: {\r\n          &quot;-LcaHYcsoGA-VT8yvgGf&quot;: &quot;A&quot;,\r\n          &quot;-LcaH_gtgarJwbY5-C08&quot;: &quot;AA&quot;\r\n        },\r\n        &quot;+90 506 854 2345&quot;: {\r\n          &quot;-LcaHYcsoGA-VT8yvgGf&quot;: &quot;B&quot;,\r\n          &quot;-LcaH_gtgarJwbY5-C08&quot;: &quot;BB&quot;\r\n        },\r\n        &quot;+90 530 408 3456&quot;: {\r\n          &quot;-LcaHYcsoGA-VT8yvgGf&quot;: &quot;C&quot;,\r\n          &quot;-LcaH_gtgarJwbY5-C08&quot;: &quot;CAC&quot;\r\n        },\r\n        &quot;+90 535 966 4567&quot;: {\r\n          &quot;-LcaHYcsoGA-VT8yvgGf&quot;: &quot;D&quot;,\r\n          &quot;-LcaH_gtgarJwbY5-C08&quot;: &quot;AAA&quot;\r\n        },\r\n        &quot;+90 536 782 5678&quot;: {\r\n          &quot;-LcaHYcsoGA-VT8yvgGf&quot;: &quot;E&quot;,\r\n          &quot;-LcaH_gtgarJwbY5-C08&quot;: &quot;CAB&quot;\r\n        },\r\n        &quot;+90 546 934 67 89&quot;: {\r\n          &quot;-LcaHYcsoGA-VT8yvgGf&quot;: &quot;F&quot;,\r\n          &quot;-LcaH_gtgarJwbY5-C08&quot;: &quot;BB&quot;\r\n        },\r\n        &quot;+905304080001&quot;: {\r\n          &quot;-LcaHYcsoGA-VT8yvgGf&quot;: &quot;G&quot;,\r\n          &quot;-LcaH_gtgarJwbY5-C08&quot;: &quot;A&quot;\r\n        },\r\n        &quot;+905316910002&quot;: {\r\n          &quot;-LcaHYcsoGA-VT8yvgGf&quot;: &quot;H&quot;,\r\n          &quot;-LcaH_gtgarJwbY5-C08&quot;: &quot;BBB&quot;\r\n        },\r\n        &quot;+905359660003&quot;: {\r\n          &quot;-LcaHYcsoGA-VT8yvgGf&quot;: &quot;I&quot;,\r\n          &quot;-LcaH_gtgarJwbY5-C08&quot;: &quot;DDD&quot;\r\n        },\r\n        &quot;+905367820004&quot;: {\r\n          &quot;-LcaHYcsoGA-VT8yvgGf&quot;: &quot;J&quot;,\r\n          &quot;-LcaH_gtgarJwbY5-C08&quot;: &quot;EEE&quot;\r\n        },\r\n        &quot;+905425420005&quot;: {\r\n          &quot;-LcaHYcsoGA-VT8yvgGf&quot;: &quot;K&quot;,\r\n          &quot;-LcaH_gtgarJwbY5-C08&quot;: &quot;FFF&quot;\r\n        },\r\n        &quot;+905469340006&quot;: {\r\n          &quot;-LcaHYcsoGA-VT8yvgGf&quot;: &quot;L&quot;,\r\n          &quot;-LcaH_gtgarJwbY5-C08&quot;: &quot;L&quot;\r\n        },\r\n        &quot;05056960007&quot;: {\r\n          &quot;-LcaHYcsoGA-VT8yvgGf&quot;: &quot;M&quot;,\r\n          &quot;-LcaH_gtgarJwbY5-C08&quot;: &quot;M&quot;\r\n        }\r\n      }\r\n    }\r\n\r\nBecause of your use of push IDs in your database structure, the functions written below operate at the level containing the push IDs, performing operations on whole groups rather than individual entries. You can read the documentation for functions [here](https://firebase.google.com/docs/functions/) and watch some [Firecasts](https://www.youtube.com/playlist?list=PLl-K7zZEsYLkPZHe41m4jfAxUi0JjLgSM) on the subject.\r\n\r\n    // Import and initialize Cloud Functions and Admin SDKs\r\n    const functions = require(&#39;firebase-functions&#39;);\r\n    const admin = require(&#39;firebase-admin&#39;);\r\n    admin.initializeApp();\r\n\r\n    const ADMIN_DB_REF_PHONE_NUMBER_INDEX = admin.database().ref(&#39;/ContactPhoneNumbersIndex&#39;);\r\n\r\n    // Add entirely new contact groups to index\r\n    exports.contactGroups_created = functions.database.ref(&#39;/ContactPhoneNumbers/{groupPushId}&#39;)\r\n        .onCreate((snapshot, context) =&gt; {\r\n          const groupId = context.params.groupPushId;\r\n          \r\n          // prepare atomic write\r\n          const pendingUpdates = {};\r\n          \r\n          const contactsMap = snapshot.val();\r\n          \r\n          for (const phone in contactsMap) {\r\n            if (contactsMap.hasOwnProperty(phone)) {\r\n              let name = contactsMap[phone];\r\n              \r\n              // add data to update\r\n              pendingUpdates[`${phone}/${groupId}`] = name;\r\n            }\r\n          }\r\n          \r\n          // commit the update to the index\r\n          return ADMIN_DB_REF_PHONE_NUMBER_INDEX.update(pendingUpdates);\r\n        });\r\n\r\n    // Remove deleted contact groups from index\r\n    exports.contactGroups_deleted = functions.database.ref(&#39;/ContactPhoneNumbers/{groupPushId}&#39;)\r\n        .onDelete((snapshot, context) =&gt; {\r\n          const groupId = context.params.groupPushId;\r\n          \r\n          // prepare atomic write\r\n          const pendingUpdates = {};\r\n          \r\n          const contactsMap = snapshot.val();\r\n          \r\n          for (const phone in contactsMap) {\r\n            if (contactsMap.hasOwnProperty(phone)) {\r\n              let name = contactsMap[phone];\r\n              \r\n              // add data to update\r\n              pendingUpdates[`${phone}/${groupId}`] = null; // null will delete data at given location\r\n            }\r\n          }\r\n          \r\n          // commit the update to the index\r\n          return ADMIN_DB_REF_PHONE_NUMBER_INDEX.update(pendingUpdates);\r\n        });\r\n\r\n    // Handle contact changes\r\n    exports.contactGroups_changed = functions.database.ref(&#39;/ContactPhoneNumbers/{groupPushId}&#39;)\r\n        .onUpdate((change, context) =&gt; {\r\n          const groupId = context.params.groupPushId;\r\n          \r\n          // prepare atomic write\r\n          const pendingUpdates = {};\r\n          \r\n          // prepare changes map\r\n          const changeMap = {};\r\n          \r\n          // add before state to changeMap\r\n          const beforeContactsMap = change.before.val();\r\n          for (const phone in beforeContactsMap) {\r\n            if (beforeContactsMap.hasOwnProperty(phone)) {\r\n              let name = beforeContactsMap[phone];\r\n              changeMap[phone] = { before: name };\r\n            }\r\n          }\r\n          \r\n          // add after state to changeMap\r\n          const afterContactsMap = change.after.val();\r\n          for (const phone in afterContactsMap) {\r\n            if (afterContactsMap.hasOwnProperty(phone)) {\r\n              let name = afterContactsMap[phone];\r\n              \r\n              if (changeMap[phone]) {\r\n                changeMap[phone].after = name;\r\n              } else {\r\n                changeMap[phone] = { after: name };\r\n              }\r\n            }\r\n          }\r\n\r\n          // look for changes and commit any differences\r\n          for (const phone in changeMap) {\r\n            if (changeMap.hasOwnProperty(phone)) {\r\n              let nameChange = changeMap[phone];\r\n              \r\n              if (nameChange.before != nameChange.after) {\r\n                // changed\r\n                pendingUpdates[`${phone}/${groupId}`] = nameChange.after || null; // use updated value or fallback to null to delete\r\n              }\r\n            }\r\n          }\r\n          \r\n          // commit the update to the index\r\n          return ADMIN_DB_REF_PHONE_NUMBER_INDEX.update(pendingUpdates);\r\n        });\r\n\r\n## Classes ##\r\n\r\nWith your database structure, creating a class is a difficult task. One method is to take a step up the node tree and look at the contacts in groups, where you can wrap a class around an internal map of your values or a list of Contact objects.\r\n\r\nThe example I&#39;ve given below maintains and interacts with an internal map.\r\n\r\nUnfortunately the Firebase SDK doesn&#39;t expose a &quot;serialize&quot; method akin to custom compare functions so you will not be able to use this class with `SetValue` and `GetValue` directly.\r\n\r\nTo upload to the database:\r\n\r\n    ContactGroup mContacts = ...\r\n    DatabaseReference groupRef = mContactGroupsReference.push();\r\n\r\n    mContacts.setId(groupRef.getKey()); // optional\r\n    groupRef.SetValue(mContacts.toMap());\r\n\r\nTo download from the database:\r\n\r\n    @Override\r\n    public void onDataChange(DataSnapshot dataSnapshot) {\r\n      ContactGroup contacts = new ContactGroup(dataSnapshot);\r\n      // or\r\n      ContactGroup contacts = new ContactGroup(dataSnapshot.getKey(), dataSnapshot.getValue());\r\n    }\r\n\r\nThis class is incomplete. There&#39;s enough to get the juices flowing but there is plenty of room for improvement.\r\n\r\n    public class ContactGroup {\r\n      private id = null;\r\n      private Map&lt;String, String&gt; contactMap = new HashMap&lt;&gt;(); // Phone =&gt; Name\r\n\r\n      public ContactGroup() {\r\n      }\r\n\r\n      public ContactGroup(String id, Map&lt;String, Object&gt; contacts) {\r\n        this.id = id;\r\n        if (contacts == null)\r\n          return;\r\n        for (Map.Entry&lt;String, Object&gt; entry : contacts.entrySet()) {\r\n          contactMap.put(entry.getKey(), entry.getValue().toString());\r\n        }\r\n      }\r\n      \r\n      public ContactGroup(DataSnapshot snapshot) {\r\n        this(snapshot.getKey(), snapshot.getValue());\r\n        // do something else with snapshot? save the ref?\r\n      }\r\n      \r\n      public void add(String name, String phone) {\r\n        contactMap.put(phone, name);\r\n      }\r\n\r\n      public String getNameForPhone(String phone) {\r\n        return contactMap.get(phone);\r\n      }\r\n\r\n      public String getPhoneForName(String name) {\r\n        for (Map.Entry&lt;String, String&gt; entry : contactMap.entrySet()) {\r\n          if (entry.getValue() == name)\r\n            return entry.getKey();\r\n        }\r\n        return null;\r\n      }\r\n      \r\n      public getId() {\r\n        return id;\r\n      }\r\n      \r\n      public setId() {\r\n        return id;\r\n      }\r\n      \r\n      @Exclude\r\n      public static ContactGroup fromMap(Map&lt;String, Object&gt; valueMap) {\r\n        return new ContactGroup(null, valueMap);\r\n      }\r\n      \r\n      @Exclude\r\n      public Map&lt;String, Object&gt; toMap() {\r\n        return new HashMap&lt;String, Object&gt;(contactMap);\r\n      }\r\n    }","title":"How can I query data with different firebase database names?","body":"<p>Because you are using dynamic keys, there is no efficient way to use <code>orderByChild()</code> to get the result you desire without having to download the entire &quot;ContactPhoneNumbers&quot; node to the client device and then performing the sort and filter. The alternative is to keep an index of the contacts.</p>\n<h2>orderByChild()</h2>\n<p>This is only useful for small datasets. Do not rely on it for when &quot;ContactPhoneNumbers&quot; gets larger as it will drive up your costs. Each time this is called, your contacts database will be downloaded in it's entirety.</p>\n<pre><code>String phoneSearchText = &quot;+90 530 408 3456&quot;;\nQuery q = mUserDatabase.orderByChild(phoneSearchText).startAt(&quot;&quot;);\n</code></pre>\n<h2>Indexing</h2>\n<p>When your data relies on dynamic keys, you have implement a custom index implementation rather than use the RTDB's built-in indexing system (see <a href=\"https://firebase.google.com/docs/database/security/indexing-data\" rel=\"nofollow noreferrer\">indexing data</a>).</p>\n<p>You can build and maintain the index either on the client (cheaper) or server side (easier to maintain).</p>\n<p>For the sake of security and maintainability, I'll include some modified code for a server-side implementation built on <a href=\"https://firebase.google.com/docs/functions/\" rel=\"nofollow noreferrer\">Cloud Functions for Firebase</a>.</p>\n<p>This code will generate the following index which can be queried for a phone number and contain all the different variants. Any changes made to the &quot;ContactPhoneNumbers&quot; tree will be mirrored to this index automatically. You should <a href=\"https://firebase.google.com/docs/database/security/securing-data\" rel=\"nofollow noreferrer\">secure this index</a> from being changeable by client devices.</p>\n<pre><code>{\n  &quot;ContactPhoneNumbersIndex&quot;: {\n    &quot;+90 505 696 1234&quot;: {\n      &quot;-LcaHYcsoGA-VT8yvgGf&quot;: &quot;A&quot;,\n      &quot;-LcaH_gtgarJwbY5-C08&quot;: &quot;AA&quot;\n    },\n    &quot;+90 506 854 2345&quot;: {\n      &quot;-LcaHYcsoGA-VT8yvgGf&quot;: &quot;B&quot;,\n      &quot;-LcaH_gtgarJwbY5-C08&quot;: &quot;BB&quot;\n    },\n    &quot;+90 530 408 3456&quot;: {\n      &quot;-LcaHYcsoGA-VT8yvgGf&quot;: &quot;C&quot;,\n      &quot;-LcaH_gtgarJwbY5-C08&quot;: &quot;CAC&quot;\n    },\n    &quot;+90 535 966 4567&quot;: {\n      &quot;-LcaHYcsoGA-VT8yvgGf&quot;: &quot;D&quot;,\n      &quot;-LcaH_gtgarJwbY5-C08&quot;: &quot;AAA&quot;\n    },\n    &quot;+90 536 782 5678&quot;: {\n      &quot;-LcaHYcsoGA-VT8yvgGf&quot;: &quot;E&quot;,\n      &quot;-LcaH_gtgarJwbY5-C08&quot;: &quot;CAB&quot;\n    },\n    &quot;+90 546 934 67 89&quot;: {\n      &quot;-LcaHYcsoGA-VT8yvgGf&quot;: &quot;F&quot;,\n      &quot;-LcaH_gtgarJwbY5-C08&quot;: &quot;BB&quot;\n    },\n    &quot;+905304080001&quot;: {\n      &quot;-LcaHYcsoGA-VT8yvgGf&quot;: &quot;G&quot;,\n      &quot;-LcaH_gtgarJwbY5-C08&quot;: &quot;A&quot;\n    },\n    &quot;+905316910002&quot;: {\n      &quot;-LcaHYcsoGA-VT8yvgGf&quot;: &quot;H&quot;,\n      &quot;-LcaH_gtgarJwbY5-C08&quot;: &quot;BBB&quot;\n    },\n    &quot;+905359660003&quot;: {\n      &quot;-LcaHYcsoGA-VT8yvgGf&quot;: &quot;I&quot;,\n      &quot;-LcaH_gtgarJwbY5-C08&quot;: &quot;DDD&quot;\n    },\n    &quot;+905367820004&quot;: {\n      &quot;-LcaHYcsoGA-VT8yvgGf&quot;: &quot;J&quot;,\n      &quot;-LcaH_gtgarJwbY5-C08&quot;: &quot;EEE&quot;\n    },\n    &quot;+905425420005&quot;: {\n      &quot;-LcaHYcsoGA-VT8yvgGf&quot;: &quot;K&quot;,\n      &quot;-LcaH_gtgarJwbY5-C08&quot;: &quot;FFF&quot;\n    },\n    &quot;+905469340006&quot;: {\n      &quot;-LcaHYcsoGA-VT8yvgGf&quot;: &quot;L&quot;,\n      &quot;-LcaH_gtgarJwbY5-C08&quot;: &quot;L&quot;\n    },\n    &quot;05056960007&quot;: {\n      &quot;-LcaHYcsoGA-VT8yvgGf&quot;: &quot;M&quot;,\n      &quot;-LcaH_gtgarJwbY5-C08&quot;: &quot;M&quot;\n    }\n  }\n}\n</code></pre>\n<p>Because of your use of push IDs in your database structure, the functions written below operate at the level containing the push IDs, performing operations on whole groups rather than individual entries. You can read the documentation for functions <a href=\"https://firebase.google.com/docs/functions/\" rel=\"nofollow noreferrer\">here</a> and watch some <a href=\"https://www.youtube.com/playlist?list=PLl-K7zZEsYLkPZHe41m4jfAxUi0JjLgSM\" rel=\"nofollow noreferrer\">Firecasts</a> on the subject.</p>\n<pre><code>// Import and initialize Cloud Functions and Admin SDKs\nconst functions = require('firebase-functions');\nconst admin = require('firebase-admin');\nadmin.initializeApp();\n\nconst ADMIN_DB_REF_PHONE_NUMBER_INDEX = admin.database().ref('/ContactPhoneNumbersIndex');\n\n// Add entirely new contact groups to index\nexports.contactGroups_created = functions.database.ref('/ContactPhoneNumbers/{groupPushId}')\n    .onCreate((snapshot, context) =&gt; {\n      const groupId = context.params.groupPushId;\n      \n      // prepare atomic write\n      const pendingUpdates = {};\n      \n      const contactsMap = snapshot.val();\n      \n      for (const phone in contactsMap) {\n        if (contactsMap.hasOwnProperty(phone)) {\n          let name = contactsMap[phone];\n          \n          // add data to update\n          pendingUpdates[`${phone}/${groupId}`] = name;\n        }\n      }\n      \n      // commit the update to the index\n      return ADMIN_DB_REF_PHONE_NUMBER_INDEX.update(pendingUpdates);\n    });\n\n// Remove deleted contact groups from index\nexports.contactGroups_deleted = functions.database.ref('/ContactPhoneNumbers/{groupPushId}')\n    .onDelete((snapshot, context) =&gt; {\n      const groupId = context.params.groupPushId;\n      \n      // prepare atomic write\n      const pendingUpdates = {};\n      \n      const contactsMap = snapshot.val();\n      \n      for (const phone in contactsMap) {\n        if (contactsMap.hasOwnProperty(phone)) {\n          let name = contactsMap[phone];\n          \n          // add data to update\n          pendingUpdates[`${phone}/${groupId}`] = null; // null will delete data at given location\n        }\n      }\n      \n      // commit the update to the index\n      return ADMIN_DB_REF_PHONE_NUMBER_INDEX.update(pendingUpdates);\n    });\n\n// Handle contact changes\nexports.contactGroups_changed = functions.database.ref('/ContactPhoneNumbers/{groupPushId}')\n    .onUpdate((change, context) =&gt; {\n      const groupId = context.params.groupPushId;\n      \n      // prepare atomic write\n      const pendingUpdates = {};\n      \n      // prepare changes map\n      const changeMap = {};\n      \n      // add before state to changeMap\n      const beforeContactsMap = change.before.val();\n      for (const phone in beforeContactsMap) {\n        if (beforeContactsMap.hasOwnProperty(phone)) {\n          let name = beforeContactsMap[phone];\n          changeMap[phone] = { before: name };\n        }\n      }\n      \n      // add after state to changeMap\n      const afterContactsMap = change.after.val();\n      for (const phone in afterContactsMap) {\n        if (afterContactsMap.hasOwnProperty(phone)) {\n          let name = afterContactsMap[phone];\n          \n          if (changeMap[phone]) {\n            changeMap[phone].after = name;\n          } else {\n            changeMap[phone] = { after: name };\n          }\n        }\n      }\n\n      // look for changes and commit any differences\n      for (const phone in changeMap) {\n        if (changeMap.hasOwnProperty(phone)) {\n          let nameChange = changeMap[phone];\n          \n          if (nameChange.before != nameChange.after) {\n            // changed\n            pendingUpdates[`${phone}/${groupId}`] = nameChange.after || null; // use updated value or fallback to null to delete\n          }\n        }\n      }\n      \n      // commit the update to the index\n      return ADMIN_DB_REF_PHONE_NUMBER_INDEX.update(pendingUpdates);\n    });\n</code></pre>\n<h2>Classes</h2>\n<p>With your database structure, creating a class is a difficult task. One method is to take a step up the node tree and look at the contacts in groups, where you can wrap a class around an internal map of your values or a list of Contact objects.</p>\n<p>The example I've given below maintains and interacts with an internal map.</p>\n<p>Unfortunately the Firebase SDK doesn't expose a &quot;serialize&quot; method akin to custom compare functions so you will not be able to use this class with <code>SetValue</code> and <code>GetValue</code> directly.</p>\n<p>To upload to the database:</p>\n<pre><code>ContactGroup mContacts = ...\nDatabaseReference groupRef = mContactGroupsReference.push();\n\nmContacts.setId(groupRef.getKey()); // optional\ngroupRef.SetValue(mContacts.toMap());\n</code></pre>\n<p>To download from the database:</p>\n<pre><code>@Override\npublic void onDataChange(DataSnapshot dataSnapshot) {\n  ContactGroup contacts = new ContactGroup(dataSnapshot);\n  // or\n  ContactGroup contacts = new ContactGroup(dataSnapshot.getKey(), dataSnapshot.getValue());\n}\n</code></pre>\n<p>This class is incomplete. There's enough to get the juices flowing but there is plenty of room for improvement.</p>\n<pre><code>public class ContactGroup {\n  private id = null;\n  private Map&lt;String, String&gt; contactMap = new HashMap&lt;&gt;(); // Phone =&gt; Name\n\n  public ContactGroup() {\n  }\n\n  public ContactGroup(String id, Map&lt;String, Object&gt; contacts) {\n    this.id = id;\n    if (contacts == null)\n      return;\n    for (Map.Entry&lt;String, Object&gt; entry : contacts.entrySet()) {\n      contactMap.put(entry.getKey(), entry.getValue().toString());\n    }\n  }\n  \n  public ContactGroup(DataSnapshot snapshot) {\n    this(snapshot.getKey(), snapshot.getValue());\n    // do something else with snapshot? save the ref?\n  }\n  \n  public void add(String name, String phone) {\n    contactMap.put(phone, name);\n  }\n\n  public String getNameForPhone(String phone) {\n    return contactMap.get(phone);\n  }\n\n  public String getPhoneForName(String name) {\n    for (Map.Entry&lt;String, String&gt; entry : contactMap.entrySet()) {\n      if (entry.getValue() == name)\n        return entry.getKey();\n    }\n    return null;\n  }\n  \n  public getId() {\n    return id;\n  }\n  \n  public setId() {\n    return id;\n  }\n  \n  @Exclude\n  public static ContactGroup fromMap(Map&lt;String, Object&gt; valueMap) {\n    return new ContactGroup(null, valueMap);\n  }\n  \n  @Exclude\n  public Map&lt;String, Object&gt; toMap() {\n    return new HashMap&lt;String, Object&gt;(contactMap);\n  }\n}\n</code></pre>\n"}],"owner":{"account_id":12884785,"reputation":1,"user_id":9318683,"display_name":"Isa C."},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":91,"favorite_count":0,"down_vote_count":3,"up_vote_count":0,"answer_count":2,"score":-3,"last_activity_date":1637386085,"creation_date":1555423837,"question_id":55710228,"body_markdown":"Here&#39;s an example of a Firebase database that I&#39;ve given as an example. Here I want to do the &quot;+90 505 696 1234&quot; value phone number with the value of the text to query and sort the value with the recycler view. I only managed to do that. But not in the way I want. This phone number will have two or more values. You can see this in the database.\r\n\r\n&quot;+90 505 696 1234&quot;: &quot;A&quot; and &quot;+90 505 696 1234&quot;: &quot;AA&quot;. I want to see this data when I question this number. But I can&#39;t create the CategoryItem class because my database name will be variable. I don&#39;t know how to do it. There will not be a fixed database name. Users will query different numbers. How do I create a CategoryItem class for this?\r\n\r\n&gt; My Firebase Database\r\n\r\n    {\r\n      &quot;ContactPhoneNumbers&quot; : {\r\n        &quot;-LcaHYcsoGA-VT8yvgGf&quot; : {\r\n          &quot;+90 505 696 1234&quot; : &quot;A&quot;,\r\n          &quot;+90 506 854 2345&quot; : &quot;B&quot;,\r\n          &quot;+90 530 408 3456&quot; : &quot;C&quot;,\r\n          &quot;+90 535 966 4567&quot; : &quot;D&quot;,\r\n          &quot;+90 536 782 5678&quot; : &quot;E&quot;,\r\n          &quot;+90 546 934 67 89&quot; : &quot;F&quot;,\r\n          &quot;+905304080001&quot; : &quot;G&quot;,\r\n          &quot;+905316910002&quot; : &quot;H&quot;,\r\n          &quot;+905359660003&quot; : &quot;I&quot;,\r\n          &quot;+905367820004&quot; : &quot;J&quot;,\r\n          &quot;+905425420005&quot; : &quot;K&quot;,\r\n          &quot;+905469340006&quot; : &quot;L&quot;,\r\n          &quot;05056960007&quot; : &quot;M&quot;\r\n        },\r\n        &quot;-LcaH_gtgarJwbY5-C08&quot; : {\r\n          &quot;+90 505 696 1234&quot; : &quot;AA&quot;,\r\n          &quot;+90 506 854 2345&quot; : &quot;BB&quot;,\r\n          &quot;+90 530 408 3456&quot; : &quot;CAC&quot;,\r\n          &quot;+90 535 966 4567&quot; : &quot;AAA&quot;,\r\n          &quot;+90 536 782 5678&quot; : &quot;CAB&quot;,\r\n          &quot;+90 546 934 67 89&quot; : &quot;BB&quot;,\r\n          &quot;+905304080001&quot; : &quot;A&quot;,\r\n          &quot;+905316910002&quot; : &quot;BBB&quot;,\r\n          &quot;+905359660003&quot; : &quot;DDD&quot;,\r\n          &quot;+905367820004&quot; : &quot;EEE&quot;,\r\n          &quot;+905425420005&quot; : &quot;FFF&quot;,\r\n          &quot;+905469340006&quot; : &quot;L&quot;,\r\n          &quot;05056960007&quot; : &quot;M&quot;\r\n        }\r\n      }\r\n    }\r\n\r\n&gt; My Activity\r\n\r\n    public class MainActivity extends AppCompatActivity {\r\n    \r\n        EditText Search_Edit_Text;\r\n        Button Search_Button;\r\n        RecyclerView Search_Contact_List;\r\n    \r\n        DatabaseReference mUserDatabase;\r\n    \r\n        FirebaseRecyclerOptions&lt;CategoryItem&gt; options,options2;\r\n        FirebaseRecyclerAdapter&lt;CategoryItem,CategoryViewHolder&gt; adapter;\r\n    \r\n        Query firebaseSearchQuery,asd;\r\n    \r\n        @Override\r\n        protected void onCreate(Bundle savedInstanceState) {\r\n            super.onCreate(savedInstanceState);\r\n            setContentView(R.layout.activity_main);\r\n    \r\n    \r\n            mUserDatabase = FirebaseDatabase.getInstance().getReference().child(&quot;ContactPhoneNumbers&quot;);\r\n    \r\n          \r\n            Search_Edit_Text = (EditText) findViewById(R.id.Search_Edit_Text);\r\n            Search_Button = (Button) findViewById(R.id.Search_Button);\r\n    \r\n            Search_Contact_List = (RecyclerView) findViewById(R.id.Search_Contact_List);\r\n            Search_Contact_List.setHasFixedSize(true);\r\n            GridLayoutManager gridLayoutManager = new GridLayoutManager(getBaseContext(),2);\r\n            Search_Contact_List.setLayoutManager(gridLayoutManager);\r\n    \r\n    \r\n    \r\n    \r\n            Search_Button.setOnClickListener(new View.OnClickListener() {\r\n                @Override\r\n                public void onClick(View view) {\r\n    \r\n                    String searchText = Search_Edit_Text.getText().toString().trim();\r\n    \r\n                    firebaseUserSearch(searchText);\r\n                }\r\n            });\r\n    \r\n     }\r\n    \r\n        private void firebaseUserSearch(final String searchText) {\r\n    \r\n    \r\n            firebaseSearchQuery = mUserDatabase.orderByChild(searchText).startAt(&quot;&quot;).endAt(&quot;&quot; + &quot;\\uf8ff&quot;);\r\n    \r\n            options2 = new FirebaseRecyclerOptions.Builder&lt;CategoryItem&gt;()\r\n                    .setQuery(firebaseSearchQuery,CategoryItem.class)\r\n                    .build();\r\n    \r\n            adapter = new FirebaseRecyclerAdapter&lt;CategoryItem, CategoryViewHolder&gt;(options2) {\r\n                @Override\r\n                protected void onBindViewHolder(@NonNull final CategoryViewHolder holder, int position, @NonNull final CategoryItem model) {\r\n    \r\n                    Toast.makeText(MainActivity.this, model.getName(), Toast.LENGTH_SHORT).show();\r\n                }\r\n    \r\n    \r\n                @NonNull\r\n                @Override\r\n                public CategoryViewHolder onCreateViewHolder(@NonNull ViewGroup parent, int viewType) {\r\n    \r\n                    View itemView = LayoutInflater.from(parent.getContext())\r\n                            .inflate(R.layout.list_layout,parent,false);\r\n                    return new CategoryViewHolder(itemView);\r\n    \r\n                }\r\n            };\r\n    \r\n            setCategory();\r\n        }\r\n    \r\n        private void setCategory() {\r\n    \r\n            adapter.startListening();\r\n            Search_Contact_List.setAdapter(adapter);\r\n        }\r\n    }\r\n\r\n&gt; My CategoryItem\r\n\r\n**This code is completely an example. When I write the name &quot;string&quot; as string, I need to create a name in the phone numbers. Idont want this. I want to see the value of the corresponding phone number.**\r\n\r\n    public class CategoryItem {\r\n    \r\n        public String name ;\r\n    \r\n        public CategoryItem() {\r\n    \r\n        }\r\n    \r\n        public CategoryItem(String name) {\r\n            this.name = name;\r\n        }\r\n    \r\n        public String getName() {\r\n            return name;\r\n        }\r\n    \r\n        public void setName(String name) {\r\n            this.name = name;\r\n        }\r\n    \r\n    }\r\n\r\n\r\n","title":"How can I query data with different firebase database names?","body":"<p>Here's an example of a Firebase database that I've given as an example. Here I want to do the &quot;+90 505 696 1234&quot; value phone number with the value of the text to query and sort the value with the recycler view. I only managed to do that. But not in the way I want. This phone number will have two or more values. You can see this in the database.</p>\n<p>&quot;+90 505 696 1234&quot;: &quot;A&quot; and &quot;+90 505 696 1234&quot;: &quot;AA&quot;. I want to see this data when I question this number. But I can't create the CategoryItem class because my database name will be variable. I don't know how to do it. There will not be a fixed database name. Users will query different numbers. How do I create a CategoryItem class for this?</p>\n<blockquote>\n<p>My Firebase Database</p>\n</blockquote>\n<pre><code>{\n  &quot;ContactPhoneNumbers&quot; : {\n    &quot;-LcaHYcsoGA-VT8yvgGf&quot; : {\n      &quot;+90 505 696 1234&quot; : &quot;A&quot;,\n      &quot;+90 506 854 2345&quot; : &quot;B&quot;,\n      &quot;+90 530 408 3456&quot; : &quot;C&quot;,\n      &quot;+90 535 966 4567&quot; : &quot;D&quot;,\n      &quot;+90 536 782 5678&quot; : &quot;E&quot;,\n      &quot;+90 546 934 67 89&quot; : &quot;F&quot;,\n      &quot;+905304080001&quot; : &quot;G&quot;,\n      &quot;+905316910002&quot; : &quot;H&quot;,\n      &quot;+905359660003&quot; : &quot;I&quot;,\n      &quot;+905367820004&quot; : &quot;J&quot;,\n      &quot;+905425420005&quot; : &quot;K&quot;,\n      &quot;+905469340006&quot; : &quot;L&quot;,\n      &quot;05056960007&quot; : &quot;M&quot;\n    },\n    &quot;-LcaH_gtgarJwbY5-C08&quot; : {\n      &quot;+90 505 696 1234&quot; : &quot;AA&quot;,\n      &quot;+90 506 854 2345&quot; : &quot;BB&quot;,\n      &quot;+90 530 408 3456&quot; : &quot;CAC&quot;,\n      &quot;+90 535 966 4567&quot; : &quot;AAA&quot;,\n      &quot;+90 536 782 5678&quot; : &quot;CAB&quot;,\n      &quot;+90 546 934 67 89&quot; : &quot;BB&quot;,\n      &quot;+905304080001&quot; : &quot;A&quot;,\n      &quot;+905316910002&quot; : &quot;BBB&quot;,\n      &quot;+905359660003&quot; : &quot;DDD&quot;,\n      &quot;+905367820004&quot; : &quot;EEE&quot;,\n      &quot;+905425420005&quot; : &quot;FFF&quot;,\n      &quot;+905469340006&quot; : &quot;L&quot;,\n      &quot;05056960007&quot; : &quot;M&quot;\n    }\n  }\n}\n</code></pre>\n<blockquote>\n<p>My Activity</p>\n</blockquote>\n<pre><code>public class MainActivity extends AppCompatActivity {\n\n    EditText Search_Edit_Text;\n    Button Search_Button;\n    RecyclerView Search_Contact_List;\n\n    DatabaseReference mUserDatabase;\n\n    FirebaseRecyclerOptions&lt;CategoryItem&gt; options,options2;\n    FirebaseRecyclerAdapter&lt;CategoryItem,CategoryViewHolder&gt; adapter;\n\n    Query firebaseSearchQuery,asd;\n\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.activity_main);\n\n\n        mUserDatabase = FirebaseDatabase.getInstance().getReference().child(&quot;ContactPhoneNumbers&quot;);\n\n      \n        Search_Edit_Text = (EditText) findViewById(R.id.Search_Edit_Text);\n        Search_Button = (Button) findViewById(R.id.Search_Button);\n\n        Search_Contact_List = (RecyclerView) findViewById(R.id.Search_Contact_List);\n        Search_Contact_List.setHasFixedSize(true);\n        GridLayoutManager gridLayoutManager = new GridLayoutManager(getBaseContext(),2);\n        Search_Contact_List.setLayoutManager(gridLayoutManager);\n\n\n\n\n        Search_Button.setOnClickListener(new View.OnClickListener() {\n            @Override\n            public void onClick(View view) {\n\n                String searchText = Search_Edit_Text.getText().toString().trim();\n\n                firebaseUserSearch(searchText);\n            }\n        });\n\n }\n\n    private void firebaseUserSearch(final String searchText) {\n\n\n        firebaseSearchQuery = mUserDatabase.orderByChild(searchText).startAt(&quot;&quot;).endAt(&quot;&quot; + &quot;\\uf8ff&quot;);\n\n        options2 = new FirebaseRecyclerOptions.Builder&lt;CategoryItem&gt;()\n                .setQuery(firebaseSearchQuery,CategoryItem.class)\n                .build();\n\n        adapter = new FirebaseRecyclerAdapter&lt;CategoryItem, CategoryViewHolder&gt;(options2) {\n            @Override\n            protected void onBindViewHolder(@NonNull final CategoryViewHolder holder, int position, @NonNull final CategoryItem model) {\n\n                Toast.makeText(MainActivity.this, model.getName(), Toast.LENGTH_SHORT).show();\n            }\n\n\n            @NonNull\n            @Override\n            public CategoryViewHolder onCreateViewHolder(@NonNull ViewGroup parent, int viewType) {\n\n                View itemView = LayoutInflater.from(parent.getContext())\n                        .inflate(R.layout.list_layout,parent,false);\n                return new CategoryViewHolder(itemView);\n\n            }\n        };\n\n        setCategory();\n    }\n\n    private void setCategory() {\n\n        adapter.startListening();\n        Search_Contact_List.setAdapter(adapter);\n    }\n}\n</code></pre>\n<blockquote>\n<p>My CategoryItem</p>\n</blockquote>\n<p><strong>This code is completely an example. When I write the name &quot;string&quot; as string, I need to create a name in the phone numbers. Idont want this. I want to see the value of the corresponding phone number.</strong></p>\n<pre><code>public class CategoryItem {\n\n    public String name ;\n\n    public CategoryItem() {\n\n    }\n\n    public CategoryItem(String name) {\n        this.name = name;\n    }\n\n    public String getName() {\n        return name;\n    }\n\n    public void setName(String name) {\n        this.name = name;\n    }\n\n}\n</code></pre>\n"},{"tags":["java","hibernate","maven"],"comments":[{"owner":{"account_id":5449795,"reputation":2687,"user_id":6352160,"accept_rate":75,"display_name":"Shankar"},"score":0,"creation_date":1637379891,"post_id":70041857,"comment_id":123817567,"body_markdown":"Have you verified that the database is running? Please post the hibernate.cfg file and the error/info message printed by Hibernate when your application starts up. This can help you get the right answers.","body":"Have you verified that the database is running? Please post the hibernate.cfg file and the error/info message printed by Hibernate when your application starts up. This can help you get the right answers."}],"answers":[{"tags":[],"owner":{"account_id":8794729,"reputation":15297,"user_id":6572971,"display_name":"Alien"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1637385879,"creation_date":1637385879,"answer_id":70043462,"question_id":70041857,"body_markdown":"Hibernate won&#39;t create the database for you by this property, only the tables.you can create it if it is not present already by adding a parameter to the URL.\r\n\r\n    jdbc:mysql://db:3306/mydb?createDatabaseIfNotExist=true","title":"How can I ask hibernate to make a Database for me? (maven &amp; java)","body":"<p>Hibernate won't create the database for you by this property, only the tables.you can create it if it is not present already by adding a parameter to the URL.</p>\n<pre><code>jdbc:mysql://db:3306/mydb?createDatabaseIfNotExist=true\n</code></pre>\n"}],"owner":{"account_id":21499725,"reputation":13,"user_id":15844149,"display_name":"Leopoldo Todisco"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":66,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":70043462,"answer_count":1,"score":0,"last_activity_date":1637385879,"creation_date":1637363259,"question_id":70041857,"body_markdown":"I have University homework that asks me to create a simple database with hibernate, but I&#39;m having a lot of troubles... I would like if someone would show me a solution.\r\n\r\nI set the pom.xml with MySQL and hibernate dependencies; after that I made the hibernate.cfg.xml file in which I give it the connection URL. I am trying to do the annotated stuff so I don&#39;t have to do the other xml file... but it says that it can&#39;t find the database once I run the program, even if I specified in the cfg file that I have to create the database\r\n```\r\n&lt;property name = &quot;hibernate.hbm2ddl.auto&quot;&gt;create&lt;/property&gt;\r\n```","title":"How can I ask hibernate to make a Database for me? (maven &amp; java)","body":"<p>I have University homework that asks me to create a simple database with hibernate, but I'm having a lot of troubles... I would like if someone would show me a solution.</p>\n<p>I set the pom.xml with MySQL and hibernate dependencies; after that I made the hibernate.cfg.xml file in which I give it the connection URL. I am trying to do the annotated stuff so I don't have to do the other xml file... but it says that it can't find the database once I run the program, even if I specified in the cfg file that I have to create the database</p>\n<pre><code>&lt;property name = &quot;hibernate.hbm2ddl.auto&quot;&gt;create&lt;/property&gt;\n</code></pre>\n"},{"tags":["java","try-catch","do-while"],"comments":[{"owner":{"account_id":12456171,"reputation":339,"user_id":9069309,"display_name":"Cebrail Yilmaz"},"score":1,"creation_date":1637380483,"post_id":70043091,"comment_id":123817628,"body_markdown":"It seems that you get error before setting the madeChoice to true, so madeChoice stays as false and the loop stops there. Maybe you should change the way you approach the problem. Is madeChoice variable really needed? When do you want for the loop to end exactly? Edit: you can set madeChoice to true in the catch clause maybe?","body":"It seems that you get error before setting the madeChoice to true, so madeChoice stays as false and the loop stops there. Maybe you should change the way you approach the problem. Is madeChoice variable really needed? When do you want for the loop to end exactly? Edit: you can set madeChoice to true in the catch clause maybe?"},{"owner":{"account_id":3430512,"reputation":9378,"user_id":2875080,"accept_rate":43,"display_name":"icekomo"},"score":0,"creation_date":1637380780,"post_id":70043091,"comment_id":123817660,"body_markdown":"So I have the madeChoice set to false right above the whatToDo method. Sorry, I should have added that.","body":"So I have the madeChoice set to false right above the whatToDo method. Sorry, I should have added that."},{"owner":{"account_id":6520,"reputation":10523,"user_id":11002,"accept_rate":75,"display_name":"tgdavies"},"score":0,"creation_date":1637380810,"post_id":70043091,"comment_id":123817663,"body_markdown":"Don&#39;t you want to loop while `!madeChoice`?","body":"Don&#39;t you want to loop while <code>!madeChoice</code>?"},{"owner":{"account_id":3430512,"reputation":9378,"user_id":2875080,"accept_rate":43,"display_name":"icekomo"},"score":0,"creation_date":1637380847,"post_id":70043091,"comment_id":123817667,"body_markdown":"I want the loop to end only if the user enters in 1,2 or 3. if anything else it should be caught by the if-else statement or if it&#39;s an error in the catch method.","body":"I want the loop to end only if the user enters in 1,2 or 3. if anything else it should be caught by the if-else statement or if it&#39;s an error in the catch method."},{"owner":{"account_id":6520,"reputation":10523,"user_id":11002,"accept_rate":75,"display_name":"tgdavies"},"score":0,"creation_date":1637380988,"post_id":70043091,"comment_id":123817685,"body_markdown":"When the user has entered an incorrect number, what value does `madeChoice` have? Will that value make the loop exit or continue?","body":"When the user has entered an incorrect number, what value does <code>madeChoice</code> have? Will that value make the loop exit or continue?"},{"owner":{"account_id":3430512,"reputation":9378,"user_id":2875080,"accept_rate":43,"display_name":"icekomo"},"score":0,"creation_date":1637381006,"post_id":70043091,"comment_id":123817687,"body_markdown":"If I set the while loop for !madeChoice it then goes crazy in the terminal with what appears to be everything looping over and over again forever","body":"If I set the while loop for !madeChoice it then goes crazy in the terminal with what appears to be everything looping over and over again forever"},{"owner":{"account_id":12456171,"reputation":339,"user_id":9069309,"display_name":"Cebrail Yilmaz"},"score":0,"creation_date":1637381050,"post_id":70043091,"comment_id":123817690,"body_markdown":"Then you chould set `madeChoice`to true only if the number is 1, 2 or 3 (so in the first if statement). And in the while check for `!madeChoice`","body":"Then you chould set <code>madeChoice</code>to true only if the number is 1, 2 or 3 (so in the first if statement). And in the while check for <code>!madeChoice</code>"},{"owner":{"account_id":3430512,"reputation":9378,"user_id":2875080,"accept_rate":43,"display_name":"icekomo"},"score":0,"creation_date":1637381228,"post_id":70043091,"comment_id":123817707,"body_markdown":"I updated the code to what I think is being suggested, and that is causing a never-ending loop when I add in the value of HH ( just a random thing to enter)","body":"I updated the code to what I think is being suggested, and that is causing a never-ending loop when I add in the value of HH ( just a random thing to enter)"},{"owner":{"account_id":3430512,"reputation":9378,"user_id":2875080,"accept_rate":43,"display_name":"icekomo"},"score":0,"creation_date":1637381313,"post_id":70043091,"comment_id":123817720,"body_markdown":"@CebrailYilmaz I think what you are suggesting is what I am trying to do.","body":"@CebrailYilmaz I think what you are suggesting is what I am trying to do."},{"owner":{"account_id":14291162,"reputation":386,"user_id":10323063,"display_name":"Douglas Oliveira"},"score":0,"creation_date":1637381546,"post_id":70043091,"comment_id":123817749,"body_markdown":"You have a &#39;continue&#39; statement into catch block, already try to remove it?","body":"You have a &#39;continue&#39; statement into catch block, already try to remove it?"},{"owner":{"account_id":12456171,"reputation":339,"user_id":9069309,"display_name":"Cebrail Yilmaz"},"score":0,"creation_date":1637381564,"post_id":70043091,"comment_id":123817753,"body_markdown":"One last thing, cut the `madeChoice = true;` line and paste it into the if statement. After that your code should work as expected.","body":"One last thing, cut the <code>madeChoice = true;</code> line and paste it into the if statement. After that your code should work as expected."},{"owner":{"account_id":3430512,"reputation":9378,"user_id":2875080,"accept_rate":43,"display_name":"icekomo"},"score":0,"creation_date":1637381570,"post_id":70043091,"comment_id":123817754,"body_markdown":"@tgdavies  The value of madeChoice should always be false unless the user enters a correct answer 1- 3 in this case","body":"@tgdavies  The value of madeChoice should always be false unless the user enters a correct answer 1- 3 in this case"},{"owner":{"account_id":3430512,"reputation":9378,"user_id":2875080,"accept_rate":43,"display_name":"icekomo"},"score":0,"creation_date":1637381793,"post_id":70043091,"comment_id":123817787,"body_markdown":"@DouglasOliveira I did remove the continue.","body":"@DouglasOliveira I did remove the continue."},{"owner":{"account_id":3430512,"reputation":9378,"user_id":2875080,"accept_rate":43,"display_name":"icekomo"},"score":0,"creation_date":1637381932,"post_id":70043091,"comment_id":123817800,"body_markdown":"So the code that is there now is what I have. But when I enter say HH as an input... the terminal goes into a never-ending loop of things","body":"So the code that is there now is what I have. But when I enter say HH as an input... the terminal goes into a never-ending loop of things"}],"answers":[{"tags":[],"owner":{"account_id":13429972,"reputation":1807,"user_id":9690075,"display_name":"zysaaa"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1637382460,"creation_date":1637381807,"answer_id":70043207,"question_id":70043091,"body_markdown":"Add ```keyboard.nextLine()``` before ```continue```, when an exception occurs, you need to &quot;eat&quot; the input:\r\n\r\n```\r\n           catch (InputMismatchException e){\r\n                System.out.println(&quot;-----------------------------------------------------------&quot;);\r\n                System.out.println(&quot;This is not a number. Please choose from the following: \\n&quot;);\r\n                choices();\r\n                keyboard.nextLine();\r\n                continue;\r\n                // numberEntered = keyboard.nextInt();\r\n            }\r\n```\r\n\r\n**EDIT**, I changed some of your code:\r\n\r\n```\r\npublic void whatToDo(){\r\n        System.out.println(&quot;&quot;);\r\n        System.out.println(&quot;&quot;);\r\n        System.out.println(&quot;=====================================&quot;);\r\n        System.out.println(&quot;Welcome&quot;);\r\n        System.out.println(&quot;=====================================\\n&quot;);\r\n        System.out.println(&quot;What would you like to do today? Your choices are: \\n&quot;);\r\n        Scanner keyboard = new Scanner(System.in);\r\n        do{\r\n            try{\r\n                choices();\r\n                System.out.println(&quot;&quot;);\r\n                System.out.println(&quot;Please enter your choice&quot;);\r\n                int numberEntered = keyboard.nextInt();\r\n\r\n                if (numberEntered &gt;= 1 &amp;&amp; numberEntered &lt;= 3) {\r\n                    System.out.println(&quot;That is a good CHOICE&quot;);\r\n                    madeChoice = true;\r\n                } else {\r\n                    System.out.println(&quot;-----------------------------------------------------------&quot;);\r\n                    System.out.println(&quot;That is not a choice. Please choose from the following: \\n&quot;);\r\n                }\r\n            }catch (InputMismatchException e){\r\n                System.out.println(&quot;-----------------------------------------------------------&quot;);\r\n                System.out.println(&quot;This is not a number. Please choose from the following: \\n&quot;);\r\n                keyboard.next();\r\n                // numberEntered = keyboard.nextInt();\r\n            }\r\n\r\n        }while(!madeChoice);\r\n\r\n    }\r\n```","title":"Using a try/Catch in a Do While loop","body":"<p>Add <code>keyboard.nextLine()</code> before <code>continue</code>, when an exception occurs, you need to &quot;eat&quot; the input:</p>\n<pre><code>           catch (InputMismatchException e){\n                System.out.println(&quot;-----------------------------------------------------------&quot;);\n                System.out.println(&quot;This is not a number. Please choose from the following: \\n&quot;);\n                choices();\n                keyboard.nextLine();\n                continue;\n                // numberEntered = keyboard.nextInt();\n            }\n</code></pre>\n<p><strong>EDIT</strong>, I changed some of your code:</p>\n<pre><code>public void whatToDo(){\n        System.out.println(&quot;&quot;);\n        System.out.println(&quot;&quot;);\n        System.out.println(&quot;=====================================&quot;);\n        System.out.println(&quot;Welcome&quot;);\n        System.out.println(&quot;=====================================\\n&quot;);\n        System.out.println(&quot;What would you like to do today? Your choices are: \\n&quot;);\n        Scanner keyboard = new Scanner(System.in);\n        do{\n            try{\n                choices();\n                System.out.println(&quot;&quot;);\n                System.out.println(&quot;Please enter your choice&quot;);\n                int numberEntered = keyboard.nextInt();\n\n                if (numberEntered &gt;= 1 &amp;&amp; numberEntered &lt;= 3) {\n                    System.out.println(&quot;That is a good CHOICE&quot;);\n                    madeChoice = true;\n                } else {\n                    System.out.println(&quot;-----------------------------------------------------------&quot;);\n                    System.out.println(&quot;That is not a choice. Please choose from the following: \\n&quot;);\n                }\n            }catch (InputMismatchException e){\n                System.out.println(&quot;-----------------------------------------------------------&quot;);\n                System.out.println(&quot;This is not a number. Please choose from the following: \\n&quot;);\n                keyboard.next();\n                // numberEntered = keyboard.nextInt();\n            }\n\n        }while(!madeChoice);\n\n    }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":23398265,"reputation":1,"user_id":17461858,"display_name":"Akash Patel"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1637384712,"creation_date":1637384712,"answer_id":70043386,"question_id":70043091,"body_markdown":"may be you can update your code to something like this, which seems to work for me: \r\n\r\n    private boolean madeChoice = false;\r\n\tprivate static boolean isMissMatchException = false ;\r\n\tprivate static boolean isInvalidInput = false ;\r\n\t\r\n\tpublic void whatToDo(){\r\n\t\tif(Test.isMissMatchException) \r\n\t\t{\r\n\t\t\t System.out.println(&quot;-----------------------------------------------------------&quot;);\r\n\t         System.out.println(&quot;This is not a number. Please choose from the following: \\n&quot;);\r\n\t         Test.isMissMatchException = false ;\r\n\t\t} else if (Test.isInvalidInput) \r\n\t\t{\r\n\t\t\tSystem.out.println(&quot;-----------------------------------------------------------&quot;);\r\n            System.out.println(&quot;That is not a choice. Please choose from the following: \\n&quot;);\r\n            Test.isInvalidInput = false ;\r\n\t\t} else {\t\t\t\r\n\t\t\tSystem.out.println(&quot;&quot;);\r\n\t\t\tSystem.out.println(&quot;&quot;);\r\n\t\t\tSystem.out.println(&quot;=====================================&quot;);\r\n\t\t\tSystem.out.println(&quot;Welcome&quot;);\r\n\t\t\tSystem.out.println(&quot;=====================================\\n&quot;);\r\n\t\t\tSystem.out.println(&quot;What would you like to do today? Your choices are: \\n&quot;);\r\n\t\t}\r\n\t    choices();\r\n\t    \r\n\t    do{\r\n\t        try{\r\n\t            System.out.println(&quot;&quot;);\r\n\t            System.out.println(&quot;Please enter your choice&quot;);\r\n\t            \r\n\t            @SuppressWarnings(&quot;resource&quot;)\r\n\t\t\t\tint numberEntered = new Scanner(System.in).nextInt();\r\n\r\n\t            if(numberEntered &gt; 3 || numberEntered &lt; 1){\r\n\t            \tTest.isInvalidInput = true ;\r\n\t            \tthis.whatToDo();\r\n\t               \r\n\t            }else{\r\n\t                System.out.println(&quot;That is a good CHOICE&quot;);\r\n\t                madeChoice = true;\r\n\t            }\r\n\t          \r\n\t        }catch (InputMismatchException e){\r\n\t        \tTest.isMissMatchException = true ;\r\n\t            this.whatToDo();\r\n\t        }\r\n\r\n\t    }while(madeChoice);\r\n\r\n\t}\r\n\r\n\tprivate void choices(){\r\n\t    System.out.println(&quot;1. Add a new set into your account&quot;);\r\n\t    System.out.println(&quot;2. See all the sets in your account&quot;);\r\n\t    System.out.println(&quot;3. Exit the Account Manger.&quot;);\r\n\t}","title":"Using a try/Catch in a Do While loop","body":"<p>may be you can update your code to something like this, which seems to work for me:</p>\n<pre><code>private boolean madeChoice = false;\nprivate static boolean isMissMatchException = false ;\nprivate static boolean isInvalidInput = false ;\n\npublic void whatToDo(){\n    if(Test.isMissMatchException) \n    {\n         System.out.println(&quot;-----------------------------------------------------------&quot;);\n         System.out.println(&quot;This is not a number. Please choose from the following: \\n&quot;);\n         Test.isMissMatchException = false ;\n    } else if (Test.isInvalidInput) \n    {\n        System.out.println(&quot;-----------------------------------------------------------&quot;);\n        System.out.println(&quot;That is not a choice. Please choose from the following: \\n&quot;);\n        Test.isInvalidInput = false ;\n    } else {            \n        System.out.println(&quot;&quot;);\n        System.out.println(&quot;&quot;);\n        System.out.println(&quot;=====================================&quot;);\n        System.out.println(&quot;Welcome&quot;);\n        System.out.println(&quot;=====================================\\n&quot;);\n        System.out.println(&quot;What would you like to do today? Your choices are: \\n&quot;);\n    }\n    choices();\n    \n    do{\n        try{\n            System.out.println(&quot;&quot;);\n            System.out.println(&quot;Please enter your choice&quot;);\n            \n            @SuppressWarnings(&quot;resource&quot;)\n            int numberEntered = new Scanner(System.in).nextInt();\n\n            if(numberEntered &gt; 3 || numberEntered &lt; 1){\n                Test.isInvalidInput = true ;\n                this.whatToDo();\n               \n            }else{\n                System.out.println(&quot;That is a good CHOICE&quot;);\n                madeChoice = true;\n            }\n          \n        }catch (InputMismatchException e){\n            Test.isMissMatchException = true ;\n            this.whatToDo();\n        }\n\n    }while(madeChoice);\n\n}\n\nprivate void choices(){\n    System.out.println(&quot;1. Add a new set into your account&quot;);\n    System.out.println(&quot;2. See all the sets in your account&quot;);\n    System.out.println(&quot;3. Exit the Account Manger.&quot;);\n}\n</code></pre>\n"}],"owner":{"account_id":3430512,"reputation":9378,"user_id":2875080,"accept_rate":43,"display_name":"icekomo"},"comment_count":14,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":84,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":70043207,"answer_count":2,"score":2,"last_activity_date":1637384712,"creation_date":1637379915,"question_id":70043091,"body_markdown":"I&#39;m trying to use a try-catch statement inside of a do-while loop. The logic seems to work, but the do loop is not looping over and over. If it goes into the catch it seems to just break out of the do loop.\r\n\r\n    private boolean madeChoice = false;\r\n\r\n    public void whatToDo(){\r\n        System.out.println(&quot;&quot;);\r\n        System.out.println(&quot;&quot;);\r\n        System.out.println(&quot;=====================================&quot;);\r\n        System.out.println(&quot;Welcome&quot;);\r\n        System.out.println(&quot;=====================================\\n&quot;);\r\n        System.out.println(&quot;What would you like to do today? Your choices are: \\n&quot;);\r\n        choices();\r\n\r\n        do{\r\n            try{\r\n                System.out.println(&quot;&quot;);\r\n                System.out.println(&quot;Please enter your choice&quot;);\r\n                int numberEntered = keyboard.nextInt();\r\n\r\n                if(numberEntered &gt; 3 || numberEntered &lt; 1){\r\n                    System.out.println(&quot;-----------------------------------------------------------&quot;);\r\n                    System.out.println(&quot;That is not a choice. Please choose from the following: \\n&quot;);\r\n                    choices();\r\n                    numberEntered = keyboard.nextInt();\r\n                   \r\n                }else{\r\n                    System.out.println(&quot;That is a good CHOICE&quot;);\r\n                    madeChoice = true;\r\n                }\r\n              \r\n            }catch (InputMismatchException e){\r\n                System.out.println(&quot;-----------------------------------------------------------&quot;);\r\n                System.out.println(&quot;This is not a number. Please choose from the following: \\n&quot;);\r\n                choices();\r\n                \r\n            }\r\n\r\n        }while(!madeChoice);\r\n\r\n    }\r\n\r\n    private void choices(){\r\n        System.out.println(&quot;1. Add a new set into your account&quot;);\r\n        System.out.println(&quot;2. See all the sets in your account&quot;);\r\n        System.out.println(&quot;3. Exit the Account Manger.&quot;);\r\n    }","title":"Using a try/Catch in a Do While loop","body":"<p>I'm trying to use a try-catch statement inside of a do-while loop. The logic seems to work, but the do loop is not looping over and over. If it goes into the catch it seems to just break out of the do loop.</p>\n<pre><code>private boolean madeChoice = false;\n\npublic void whatToDo(){\n    System.out.println(&quot;&quot;);\n    System.out.println(&quot;&quot;);\n    System.out.println(&quot;=====================================&quot;);\n    System.out.println(&quot;Welcome&quot;);\n    System.out.println(&quot;=====================================\\n&quot;);\n    System.out.println(&quot;What would you like to do today? Your choices are: \\n&quot;);\n    choices();\n\n    do{\n        try{\n            System.out.println(&quot;&quot;);\n            System.out.println(&quot;Please enter your choice&quot;);\n            int numberEntered = keyboard.nextInt();\n\n            if(numberEntered &gt; 3 || numberEntered &lt; 1){\n                System.out.println(&quot;-----------------------------------------------------------&quot;);\n                System.out.println(&quot;That is not a choice. Please choose from the following: \\n&quot;);\n                choices();\n                numberEntered = keyboard.nextInt();\n               \n            }else{\n                System.out.println(&quot;That is a good CHOICE&quot;);\n                madeChoice = true;\n            }\n          \n        }catch (InputMismatchException e){\n            System.out.println(&quot;-----------------------------------------------------------&quot;);\n            System.out.println(&quot;This is not a number. Please choose from the following: \\n&quot;);\n            choices();\n            \n        }\n\n    }while(!madeChoice);\n\n}\n\nprivate void choices(){\n    System.out.println(&quot;1. Add a new set into your account&quot;);\n    System.out.println(&quot;2. See all the sets in your account&quot;);\n    System.out.println(&quot;3. Exit the Account Manger.&quot;);\n}\n</code></pre>\n"},{"tags":["java","arrays","multidimensional-array","indexoutofboundsexception","sudoku"],"comments":[{"owner":{"account_id":2345668,"reputation":13002,"user_id":2055998,"accept_rate":68,"display_name":"PM 77-1"},"score":0,"creation_date":1637358264,"post_id":70041196,"comment_id":123814170,"body_markdown":"Create and post your [mcve].","body":"Create and post your <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>."},{"owner":{"account_id":6737779,"reputation":3295,"user_id":5191913,"accept_rate":67,"display_name":"Savior"},"score":1,"creation_date":1637358508,"post_id":70041196,"comment_id":123814228,"body_markdown":"Does this answer your question? [What causes a java.lang.ArrayIndexOutOfBoundsException and how do I prevent it?](https://stackoverflow.com/questions/5554734/what-causes-a-java-lang-arrayindexoutofboundsexception-and-how-do-i-prevent-it)","body":"Does this answer your question? <a href=\"https://stackoverflow.com/questions/5554734/what-causes-a-java-lang-arrayindexoutofboundsexception-and-how-do-i-prevent-it\">What causes a java.lang.ArrayIndexOutOfBoundsException and how do I prevent it?</a>"},{"owner":{"account_id":16782694,"reputation":43,"user_id":12132492,"display_name":"Ersin Yılmaz Aslan"},"score":0,"creation_date":1637358689,"post_id":70041196,"comment_id":123814275,"body_markdown":"Yes @gmanjon helped me with the problem. Thanks!","body":"Yes @gmanjon helped me with the problem. Thanks!"}],"answers":[{"tags":[],"owner":{"account_id":3340852,"reputation":1493,"user_id":2807177,"display_name":"gmanjon"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1637358432,"creation_date":1637358432,"answer_id":70041250,"question_id":70041196,"body_markdown":"You have `c` defined outside both loops, and added 1 each execution in the inner loop. The inner loop gets executed 6*9 times, so `c` can reach even the value 54, but it throws exception when it reaches 9 when trying to use `sudoku[1][b][c]`, as the array indexes for the third element of the multiarray `sudoku` go from 0 to 8.","title":"Java multidimential array out of bounds","body":"<p>You have <code>c</code> defined outside both loops, and added 1 each execution in the inner loop. The inner loop gets executed 6*9 times, so <code>c</code> can reach even the value 54, but it throws exception when it reaches 9 when trying to use <code>sudoku[1][b][c]</code>, as the array indexes for the third element of the multiarray <code>sudoku</code> go from 0 to 8.</p>\n"}],"owner":{"account_id":16782694,"reputation":43,"user_id":12132492,"display_name":"Ersin Yılmaz Aslan"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":37,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"closed_date":1637494029,"answer_count":1,"score":0,"last_activity_date":1637382953,"creation_date":1637358039,"question_id":70041196,"body_markdown":"I have been trying to fill my \r\n```\r\n int[][][] sudoku = new int[5][9][9]; \r\n```\r\narray with \r\n```\r\nString[][] tmp = new String[21][21];\r\n```\r\n\r\ntmp[][] holds numbers like\r\n```\r\n005700020009600020 \r\n490060010140050030\r\n```\r\nFor example this code works perfect and it gives me the number I want\r\n```\r\nSystem.out.println(Integer.valueOf(tmp[4][10]));\r\n```\r\n\r\nBut this code\r\n```\r\n//sudoku1\r\n        b=0; c=0;\r\n        for (int i = 0; i &lt; 6; i++) {\r\n            for (int j = 9; j &lt; 18; j++) {\r\n                sudoku[1][b][c] = Integer.valueOf(tmp[i][j]);\r\n            c++;\r\n            }\r\n            b++;\r\n        }\r\n```\r\n\r\nthrows &quot;Index 9 out of bounds for length 9&quot; error\r\n\r\n","title":"Java multidimential array out of bounds","body":"<p>I have been trying to fill my</p>\n<pre><code> int[][][] sudoku = new int[5][9][9]; \n</code></pre>\n<p>array with</p>\n<pre><code>String[][] tmp = new String[21][21];\n</code></pre>\n<p>tmp[][] holds numbers like</p>\n<pre><code>005700020009600020 \n490060010140050030\n</code></pre>\n<p>For example this code works perfect and it gives me the number I want</p>\n<pre><code>System.out.println(Integer.valueOf(tmp[4][10]));\n</code></pre>\n<p>But this code</p>\n<pre><code>//sudoku1\n        b=0; c=0;\n        for (int i = 0; i &lt; 6; i++) {\n            for (int j = 9; j &lt; 18; j++) {\n                sudoku[1][b][c] = Integer.valueOf(tmp[i][j]);\n            c++;\n            }\n            b++;\n        }\n</code></pre>\n<p>throws &quot;Index 9 out of bounds for length 9&quot; error</p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":3131031,"reputation":24013,"user_id":2648811,"accept_rate":33,"display_name":"Green Cloak Guy"},"score":2,"creation_date":1622344664,"post_id":67757351,"comment_id":119764320,"body_markdown":"It&#39;s the same as using `HashMap&lt;&gt;` or `TreeMap&lt;&gt;` to fill a parameter of type `Map&lt;&gt;`, which is an interface. You&#39;d need to use one of the classes that implements `Multimap` instead, which [the docs](https://guava.dev/releases/19.0/api/docs/com/google/common/collect/Multimap.html) specify, such as `HashMultimap` or `TreeMultimap`","body":"It&#39;s the same as using <code>HashMap&lt;&gt;</code> or <code>TreeMap&lt;&gt;</code> to fill a parameter of type <code>Map&lt;&gt;</code>, which is an interface. You&#39;d need to use one of the classes that implements <code>Multimap</code> instead, which <a href=\"https://guava.dev/releases/19.0/api/docs/com/google/common/collect/Multimap.html\" rel=\"nofollow noreferrer\">the docs</a> specify, such as <code>HashMultimap</code> or <code>TreeMultimap</code>"}],"answers":[{"tags":[],"owner":{"account_id":322981,"reputation":310745,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1637382376,"creation_date":1622344861,"answer_id":67757395,"question_id":67757351,"body_markdown":"# Interface, not a class\r\n\r\n[`MultiMap`](https://guava.dev/releases/23.0/api/docs/com/google/common/collect/Multimap.html) in [*Google Guava*](https://github.com/google/guava) is an interface. You cannot instantiate an interface. \r\n\r\nChoose a concrete implementation of that interface to instantiate. \r\n\r\nGuava supplies at least a dozen. And third-parties may also supply implementations (I don’t know of any).\r\n\r\nBy the way, [*Eclipse Collections*](https://www.eclipse.org/collections/) also provides multi-map functionality.  \r\n\r\nAnd modern Java effectively supports multi-maps as well.","title":"Java using a multimap as a parameter","body":"<h1>Interface, not a class</h1>\n<p><a href=\"https://guava.dev/releases/23.0/api/docs/com/google/common/collect/Multimap.html\" rel=\"nofollow noreferrer\"><code>MultiMap</code></a> in <a href=\"https://github.com/google/guava\" rel=\"nofollow noreferrer\"><em>Google Guava</em></a> is an interface. You cannot instantiate an interface.</p>\n<p>Choose a concrete implementation of that interface to instantiate.</p>\n<p>Guava supplies at least a dozen. And third-parties may also supply implementations (I don’t know of any).</p>\n<p>By the way, <a href=\"https://www.eclipse.org/collections/\" rel=\"nofollow noreferrer\"><em>Eclipse Collections</em></a> also provides multi-map functionality.</p>\n<p>And modern Java effectively supports multi-maps as well.</p>\n"},{"tags":[],"owner":{"account_id":11403359,"reputation":1479,"user_id":8359623,"display_name":"Papai from BEKOAIL"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1622346702,"creation_date":1622346702,"answer_id":67757526,"question_id":67757351,"body_markdown":"Here are the few things about Google&#39;s Multimap interface.\r\n\r\n## Note 0 ##\r\nMultimap is a collection-type data structure which can store more than 1 values against a key.\r\n\r\n        multimap.get(0).add(&quot;Soumyajit&quot;);        \r\n        multimap.get(0).add(&quot;Chatterjee&quot;);        \r\n        System.out.println(multimap);\r\nwill returns : `{0=[Soumyajit, Chatterjee]}` as output.\r\n\r\n## Note 1 ##\r\nIt has two child interfaces `ListMultimap` and `SetMultimap`. we can use Multimap&#39;s `static` method to create classes that will implement `Multimap` interface i.e, `ArrayListMultimap&lt;K, V&gt;, LinkedListMultimap&lt;K, V&gt;` etc.\r\n\r\nexample: `ListMultimap&lt;String, Integer&gt; m = ArrayListMultimap.create();`\r\n\r\n## Note 2 ##\r\nWe can get values from Multimap collection against a key in the form of collection using : `Multimap.get(key)`; which returns value if present with its reference so if we modify the returned result set it will reflect back to original Map.\r\nIf no value found for specific key, it will return an empty collection (Not NULL). \r\n\r\nTherefore, the following code is absolutely fine:\r\n\r\n            ListMultimap&lt;Integer, String&gt; multimap =  ArrayListMultimap.create();        \r\n          multimap.get(0).add(&quot;Soumyajit&quot;);        \r\n          multimap.get(4).add(&quot;Chatterjee&quot;);        \r\n\r\nOutput: `{0=[Soumyajit], 4=[Chatterjee]}`\r\n\r\n## Note 3 ##\r\nTo add data in Multimap we can follow two ways:\r\n  \r\n\r\n    map.get(index).add(value);\r\n       or\r\n    map.put(index, value);\r\n\r\nFor deleting , we will follow same structure:\r\n\r\n       map.get(index).remove(value);\r\n         or\r\n       map.remove(index, value);\r\n\r\nReference taken from: [Official Google&#39;s Official Guava documentation][1]\r\n\r\n\r\n  [1]: https://github.com/google/guava/wiki/NewCollectionTypesExplained#multimap","title":"Java using a multimap as a parameter","body":"<p>Here are the few things about Google's Multimap interface.</p>\n<h2>Note 0</h2>\n<p>Multimap is a collection-type data structure which can store more than 1 values against a key.</p>\n<pre><code>    multimap.get(0).add(&quot;Soumyajit&quot;);        \n    multimap.get(0).add(&quot;Chatterjee&quot;);        \n    System.out.println(multimap);\n</code></pre>\n<p>will returns : <code>{0=[Soumyajit, Chatterjee]}</code> as output.</p>\n<h2>Note 1</h2>\n<p>It has two child interfaces <code>ListMultimap</code> and <code>SetMultimap</code>. we can use Multimap's <code>static</code> method to create classes that will implement <code>Multimap</code> interface i.e, <code>ArrayListMultimap&lt;K, V&gt;, LinkedListMultimap&lt;K, V&gt;</code> etc.</p>\n<p>example: <code>ListMultimap&lt;String, Integer&gt; m = ArrayListMultimap.create();</code></p>\n<h2>Note 2</h2>\n<p>We can get values from Multimap collection against a key in the form of collection using : <code>Multimap.get(key)</code>; which returns value if present with its reference so if we modify the returned result set it will reflect back to original Map.\nIf no value found for specific key, it will return an empty collection (Not NULL).</p>\n<p>Therefore, the following code is absolutely fine:</p>\n<pre><code>        ListMultimap&lt;Integer, String&gt; multimap =  ArrayListMultimap.create();        \n      multimap.get(0).add(&quot;Soumyajit&quot;);        \n      multimap.get(4).add(&quot;Chatterjee&quot;);        \n</code></pre>\n<p>Output: <code>{0=[Soumyajit], 4=[Chatterjee]}</code></p>\n<h2>Note 3</h2>\n<p>To add data in Multimap we can follow two ways:</p>\n<pre><code>map.get(index).add(value);\n   or\nmap.put(index, value);\n</code></pre>\n<p>For deleting , we will follow same structure:</p>\n<pre><code>   map.get(index).remove(value);\n     or\n   map.remove(index, value);\n</code></pre>\n<p>Reference taken from: <a href=\"https://github.com/google/guava/wiki/NewCollectionTypesExplained#multimap\" rel=\"nofollow noreferrer\">Official Google's Official Guava documentation</a></p>\n"},{"tags":[],"owner":{"account_id":5014312,"reputation":615,"user_id":4029545,"accept_rate":50,"display_name":"Ravi Nain"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1622347296,"creation_date":1622347296,"answer_id":67757570,"question_id":67757351,"body_markdown":"As mentioned by others, `Multimap` is an interface. You will need to use concrete classes such as `HashMultimap` or `ImmutableMultimap`. See below example:\r\n\r\n    HashMap&lt;String, Multimap&lt;String, String&gt;&gt; maps = new HashMap&lt;&gt;();\r\n\r\n    Multimap&lt;String, String&gt; multimap = HashMultimap.create();\r\n    multimap.put(&quot;KEY1&quot;, &quot;V1&quot;);\r\n        \r\n    maps.put(&quot;KEY&quot;, multimap);","title":"Java using a multimap as a parameter","body":"<p>As mentioned by others, <code>Multimap</code> is an interface. You will need to use concrete classes such as <code>HashMultimap</code> or <code>ImmutableMultimap</code>. See below example:</p>\n<pre><code>HashMap&lt;String, Multimap&lt;String, String&gt;&gt; maps = new HashMap&lt;&gt;();\n\nMultimap&lt;String, String&gt; multimap = HashMultimap.create();\nmultimap.put(&quot;KEY1&quot;, &quot;V1&quot;);\n    \nmaps.put(&quot;KEY&quot;, multimap);\n</code></pre>\n"}],"owner":{"account_id":20696230,"reputation":21,"user_id":15196355,"display_name":"Ac Palabay"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":544,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":67757570,"answer_count":3,"score":0,"last_activity_date":1637382376,"creation_date":1622344254,"question_id":67757351,"body_markdown":"I wanted to create a multimap for each of the keys that I put, but I get this error `Multimap is abstract; cannot be instantiated.` Is there another way to do this? \r\n```\r\npackage Graph;\r\n\r\n\r\nimport com.google.common.collect.Multimap;\r\nimport java.util.HashMap;\r\n\r\npublic class builder {\r\n\r\n    public static void main(String[] args) {\r\n        \r\n        HashMap&lt;String,Multimap&lt;String,String&gt;&gt; map = new HashMap&lt;&gt;();\r\n        map.put(&quot;Cars&quot;,new Multimap&lt;String,String&gt;());\r\n        \r\n    }\r\n}\r\n\r\n```","title":"Java using a multimap as a parameter","body":"<p>I wanted to create a multimap for each of the keys that I put, but I get this error <code>Multimap is abstract; cannot be instantiated.</code> Is there another way to do this?</p>\n<pre><code>package Graph;\n\n\nimport com.google.common.collect.Multimap;\nimport java.util.HashMap;\n\npublic class builder {\n\n    public static void main(String[] args) {\n        \n        HashMap&lt;String,Multimap&lt;String,String&gt;&gt; map = new HashMap&lt;&gt;();\n        map.put(&quot;Cars&quot;,new Multimap&lt;String,String&gt;());\n        \n    }\n}\n\n</code></pre>\n"},{"tags":["java","multithreading","java-stream"],"comments":[{"owner":{"account_id":465573,"reputation":192694,"user_id":869736,"accept_rate":82,"display_name":"Louis Wasserman"},"score":5,"creation_date":1637372500,"post_id":70042488,"comment_id":123816743,"body_markdown":"Why do you mind these threads being unclosed?  The _point_ of the common pool is that it sticks around waiting for work, and since it&#39;s a daemon thread, it doesn&#39;t block your app&#39;s shutdown.","body":"Why do you mind these threads being unclosed?  The <i>point</i> of the common pool is that it sticks around waiting for work, and since it&#39;s a daemon thread, it doesn&#39;t block your app&#39;s shutdown."},{"owner":{"account_id":7114842,"reputation":311,"user_id":5441525,"accept_rate":57,"display_name":"Georodin"},"score":0,"creation_date":1637397324,"post_id":70042488,"comment_id":123819671,"body_markdown":"because I only had 6 months of java training and still lack some fundamentals, that&#39;s why Im asking if I&#39;m not sure about something, after doing some research ofc\nand thanks I will keep it in mind in the future :)","body":"because I only had 6 months of java training and still lack some fundamentals, that&#39;s why Im asking if I&#39;m not sure about something, after doing some research ofc and thanks I will keep it in mind in the future :)"}],"answers":[{"tags":[],"owner":{"account_id":47283,"reputation":703817,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1637381834,"creation_date":1637381834,"answer_id":70043208,"question_id":70042488,"body_markdown":"Basically ... you are trying to solve a problem that isn&#39;t a problem.  The common fork-join pool is a managed pool.  The JVM takes care of it.\r\n\r\nAnd if it really matters to you, the bad news is that there is probably nothing you can do about it.  The common pool will ignore `shutdown()` and `shutdownNow()` calls.  This is by design.\r\n\r\nThere is a trick which allows you to create a custom `ForkJoinPool` and run your stream in it.  See https://stackoverflow.com/questions/21163108.  Once you are finished you can shutdown the pool to make the threads go away.\r\n\r\nBut ... it is probably a bad idea.  It is more efficient to reuse an existing pool or the common pool.  Creating and destroying threads is expensive.  Doing this repeatedly because you are repeatedly creating and destroying pools is inefficient.\r\n\r\nThe common `ForkJoinPool` should not be viewed as a thread leak.","title":"Usage of parallelStream() resulting in unclosed Threads?","body":"<p>Basically ... you are trying to solve a problem that isn't a problem.  The common fork-join pool is a managed pool.  The JVM takes care of it.</p>\n<p>And if it really matters to you, the bad news is that there is probably nothing you can do about it.  The common pool will ignore <code>shutdown()</code> and <code>shutdownNow()</code> calls.  This is by design.</p>\n<p>There is a trick which allows you to create a custom <code>ForkJoinPool</code> and run your stream in it.  See <a href=\"https://stackoverflow.com/questions/21163108\">Custom thread pool in Java 8 parallel stream</a>.  Once you are finished you can shutdown the pool to make the threads go away.</p>\n<p>But ... it is probably a bad idea.  It is more efficient to reuse an existing pool or the common pool.  Creating and destroying threads is expensive.  Doing this repeatedly because you are repeatedly creating and destroying pools is inefficient.</p>\n<p>The common <code>ForkJoinPool</code> should not be viewed as a thread leak.</p>\n"}],"owner":{"account_id":7114842,"reputation":311,"user_id":5441525,"accept_rate":57,"display_name":"Georodin"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":123,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":70043208,"answer_count":1,"score":0,"last_activity_date":1637381834,"creation_date":1637370707,"question_id":70042488,"body_markdown":"I&#39;m writing a rss media grabber and one of my `parallelStream()`s is resulting in unclosed threads. \r\n\r\nThey are all `Daemon Thread [ForkJoinPool.commonPool-worker-xx]` threads. \r\n\r\nThe only difference I could spot was that both examples are invoked from different threads. Could this be the problem? Even when I tried starting a new Thread().start, the `parallelStream()` left all `ForkJoinPool` threads unclosed behind. And I also tried using simple objects like `ArrayList&lt;int&gt;` with the same outcome. Is this a wanted behavior outside the main thread?\r\n\r\nOr is it just the behavior described in the docs(bold part):\r\n\r\n&gt; A ForkJoinPool differs from other kinds of ExecutorService mainly by\r\n&gt; virtue of employing work-stealing: all threads in the pool attempt to\r\n&gt; find and execute tasks submitted to the pool and/or created by other\r\n&gt; active tasks **(eventually blocking waiting for work if none exist)**.\r\n\r\n```java\r\npublic class MainRoutine {\r\n\t\r\n\tpublic static void startRoutine(SubReddit subReddit) {\r\n\t\tArrayList&lt;Entry&gt; rssEntry = RSSgrab.pullRss(new SubReddit(&quot;pics&quot;, true, null));\r\n\t\t\r\n\t\trssEntry.parallelStream().forEach(System.out::println); //produces unclosed threads\r\n        System.out.println(Thread.currentThread().getName()); //prints AWT-EventQueue-0\r\n    }\r\n\r\n    public static void main(String[] args) {\r\n\t\tArrayList&lt;Entry&gt; rssEntry = RSSgrab.pullRss(new SubReddit(&quot;pics&quot;, true, null));\r\n\t\t\r\n\t\trssEntry.parallelStream().forEach(System.out::println); //this does not produce unclosed threads\r\n        System.out.println(Thread.currentThread().getName()); //prints main\r\n    //my bad, does also produce unclosed threads but the runtime is so short that I did not notice ofc\r\n\t}\r\n\r\n}\r\n\r\n```\r\n\r\n**Entry class**\r\n```java\r\npublic class Entry {\r\n\tString user;\r\n\tString userUri;\r\n\tString id;\r\n\tString uri;\r\n\tString date;\r\n\tString title;\r\n\t\r\n\tprivate ArrayList&lt;String&gt; media = new ArrayList&lt;String&gt;();\r\n\t\r\n\tpublic Entry(String user, String userUri, String id, String uri, String date, String title) {\r\n\t\tthis.user = user;\r\n\t\tthis.userUri = userUri;\r\n\t\tthis.id = id;\r\n\t\tthis.uri = uri;\r\n\t\tthis.date = date;\r\n\t\tthis.title = title;\r\n\t}\r\n\r\n\t@Override\r\n\tpublic String toString() {\r\n\t\treturn &quot;Entry [user=&quot; + user + &quot;, userUri=&quot; + userUri + &quot;, id=&quot; + id + &quot;, uri=&quot; + uri + &quot;, date=&quot; + date\r\n\t\t\t\t+ &quot;, title=&quot; + title + &quot;, media=&quot;+getMedia().stream().map(s -&gt; s+&quot;; &quot;).reduce(&quot;&quot;, String::concat)+&quot;]&quot;;\r\n\t}\r\n\r\n\tpublic ArrayList&lt;String&gt; getMedia() {\r\n\t\treturn media;\r\n\t}\r\n\r\n\tpublic void setMedia(ArrayList&lt;String&gt; media) {\r\n\t\tthis.media = media;\r\n\t}\r\n}\r\n```\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/uSBRr.png","title":"Usage of parallelStream() resulting in unclosed Threads?","body":"<p>I'm writing a rss media grabber and one of my <code>parallelStream()</code>s is resulting in unclosed threads.</p>\n<p>They are all <code>Daemon Thread [ForkJoinPool.commonPool-worker-xx]</code> threads.</p>\n<p>The only difference I could spot was that both examples are invoked from different threads. Could this be the problem? Even when I tried starting a new Thread().start, the <code>parallelStream()</code> left all <code>ForkJoinPool</code> threads unclosed behind. And I also tried using simple objects like <code>ArrayList&lt;int&gt;</code> with the same outcome. Is this a wanted behavior outside the main thread?</p>\n<p>Or is it just the behavior described in the docs(bold part):</p>\n<blockquote>\n<p>A ForkJoinPool differs from other kinds of ExecutorService mainly by\nvirtue of employing work-stealing: all threads in the pool attempt to\nfind and execute tasks submitted to the pool and/or created by other\nactive tasks <strong>(eventually blocking waiting for work if none exist)</strong>.</p>\n</blockquote>\n<pre class=\"lang-java prettyprint-override\"><code>public class MainRoutine {\n    \n    public static void startRoutine(SubReddit subReddit) {\n        ArrayList&lt;Entry&gt; rssEntry = RSSgrab.pullRss(new SubReddit(&quot;pics&quot;, true, null));\n        \n        rssEntry.parallelStream().forEach(System.out::println); //produces unclosed threads\n        System.out.println(Thread.currentThread().getName()); //prints AWT-EventQueue-0\n    }\n\n    public static void main(String[] args) {\n        ArrayList&lt;Entry&gt; rssEntry = RSSgrab.pullRss(new SubReddit(&quot;pics&quot;, true, null));\n        \n        rssEntry.parallelStream().forEach(System.out::println); //this does not produce unclosed threads\n        System.out.println(Thread.currentThread().getName()); //prints main\n    //my bad, does also produce unclosed threads but the runtime is so short that I did not notice ofc\n    }\n\n}\n\n</code></pre>\n<p><strong>Entry class</strong></p>\n<pre class=\"lang-java prettyprint-override\"><code>public class Entry {\n    String user;\n    String userUri;\n    String id;\n    String uri;\n    String date;\n    String title;\n    \n    private ArrayList&lt;String&gt; media = new ArrayList&lt;String&gt;();\n    \n    public Entry(String user, String userUri, String id, String uri, String date, String title) {\n        this.user = user;\n        this.userUri = userUri;\n        this.id = id;\n        this.uri = uri;\n        this.date = date;\n        this.title = title;\n    }\n\n    @Override\n    public String toString() {\n        return &quot;Entry [user=&quot; + user + &quot;, userUri=&quot; + userUri + &quot;, id=&quot; + id + &quot;, uri=&quot; + uri + &quot;, date=&quot; + date\n                + &quot;, title=&quot; + title + &quot;, media=&quot;+getMedia().stream().map(s -&gt; s+&quot;; &quot;).reduce(&quot;&quot;, String::concat)+&quot;]&quot;;\n    }\n\n    public ArrayList&lt;String&gt; getMedia() {\n        return media;\n    }\n\n    public void setMedia(ArrayList&lt;String&gt; media) {\n        this.media = media;\n    }\n}\n</code></pre>\n<p><a href=\"https://i.stack.imgur.com/uSBRr.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/uSBRr.png\" alt=\"enter image description here\" /></a></p>\n"},{"tags":["java","hashmap","set"],"answers":[{"tags":[],"owner":{"account_id":23361262,"reputation":1,"user_id":17433444,"display_name":"A. Nabeen"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1637381540,"creation_date":1637381540,"answer_id":70043185,"question_id":70042971,"body_markdown":"I figured out the answer by using this:\r\n\r\n                for (Map.Entry&lt;LocalDate, Set&lt;Meeting&gt;&gt; meetingEntry : meetings.entrySet()) {\r\n            \t\tif (meetingDate.equals(meetingEntry.getKey()))\r\n            \t\t{                \t\r\n            \t\t\tSystem.out.println(&quot;HERES1? &quot;);\r\n            \t\t\tSet&lt;Meeting&gt; setOfMeeting = meetingEntry.getValue();\r\n            \t\t\tfor (Meeting m : setOfMeeting) {\r\n                        \tSystem.out.println(&quot;comparing time? &quot; + m.getStartTime().getHourOfDay() + &quot; TO &quot; \r\n            \t\t\t+ meeting.getStartTime().getHourOfDay());\r\n            \t\t\t\tif (m.compareTo(meeting) == 0) {\r\n            \t\t\t\t\tcontinue;\r\n            \t\t\t\t} else {\r\n            \t\t\t\t\tsetToPut.add(m);\r\n            \t\t\t\t}\r\n            \t\t\t}\r\n            \t\t}\r\n                }","title":"How to go through HashMap and compare the object&#39;s data and replace the value for HashMap?","body":"<p>I figured out the answer by using this:</p>\n<pre><code>            for (Map.Entry&lt;LocalDate, Set&lt;Meeting&gt;&gt; meetingEntry : meetings.entrySet()) {\n                if (meetingDate.equals(meetingEntry.getKey()))\n                {                   \n                    System.out.println(&quot;HERES1? &quot;);\n                    Set&lt;Meeting&gt; setOfMeeting = meetingEntry.getValue();\n                    for (Meeting m : setOfMeeting) {\n                        System.out.println(&quot;comparing time? &quot; + m.getStartTime().getHourOfDay() + &quot; TO &quot; \n                    + meeting.getStartTime().getHourOfDay());\n                        if (m.compareTo(meeting) == 0) {\n                            continue;\n                        } else {\n                            setToPut.add(m);\n                        }\n                    }\n                }\n            }\n</code></pre>\n"}],"owner":{"account_id":23361262,"reputation":1,"user_id":17433444,"display_name":"A. Nabeen"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":58,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1637381540,"creation_date":1637378068,"question_id":70042971,"body_markdown":"I am having a hard time writing a couple of lines of code. All my current codes are in: https://github.com/anabeen/MeetingJava\r\n\r\nThe problem that I have is, finding a suitable way to go through the hashmap and get the meetings that have overlapping times and replace them. \r\n```\r\n        Map&lt;LocalDate, Set&lt;Meeting&gt;&gt; meetings = new HashMap&lt;LocalDate, Set&lt;Meeting&gt;&gt;();\r\n```\r\nLet&#39;s say we have a HashMap of \r\n```[{2011-03-21=[objectMeeting1, objectMeeting2]}]```\r\nand we need to add objectMeeting3 to that hashMap. How do I select the key &quot;2011-03-21&quot; to look at the objects in that hashmap and compare the set of objects in there with a new objectMeeting3&#39;s time (part of the data from object) and then replace that object? \r\n\r\nIn GitHub, I am trying to pass the MeetingSchedulerTest (). This is where I am stuck at: \r\n```\r\n           Meeting meeting = extractMeeting(employeeId, requestLines[i], \r\n            \t\tofficeStartTime, officeFinishTime, meetingSlotRequest1);\r\n            \r\n            \r\n\r\n            \r\n            if(meetings.containsKey(meetingDate)){           \t\r\n\r\n            \t// if the order overlaps\r\n                for (Map.Entry&lt;LocalDate, Set&lt;Meeting&gt;&gt; meetingEntry : meetings.entrySet()) {\r\n            \t\tif (meetingDate == meetingEntry.getKey())\r\n            \t\t{\r\n            \t\t\tSet&lt;Meeting&gt; setOfMeeting = meetingEntry.getValue();\r\n            \t\t\tfor (Meeting m : setOfMeeting) {\r\n            \t\t\t\t\r\n            \t\t\t}\r\n            \t\t}\r\n            \t\t\r\n                }\r\n            \t\r\n            \t// if the order doesn&#39;t\r\n            \t\r\n                if (meetings.get(meetingDate) != null) \r\n                \t//shouldNotHaveOverlappingMeetings\r\n                {                            \t\r\n                \tSystem.out.println(&quot;HERES?&quot;); \r\n                   \t\r\n                    meetings.remove(meetingDate);\r\n                    Set&lt;Meeting&gt; meetingsForDay = new HashSet&lt;Meeting&gt;();\r\n                    meetingsForDay.add(meeting);\r\n                    meetings.put(meetingDate, meetingsForDay);\r\n                }  else\r\n                {\r\n                \tSystem.out.println(&quot;HERES2?&quot;); \r\n                \tmeetings.get(meetingDate).add(meeting);\r\n                }\r\n                \r\n                }else if (meeting != null){\r\n                \t// if meeting doens&#39;t have meetingDate then create a new HashMap with date &amp; Meeting\r\n            \tSystem.out.println(&quot;HERES3?&quot;);\r\n                Set&lt;Meeting&gt; meetingsForDay = new HashSet&lt;Meeting&gt;();\r\n                meetingsForDay.add(meeting);\r\n                meetings.put(meetingDate, meetingsForDay);\r\n            }\r\n            \r\n        }\r\n```","title":"How to go through HashMap and compare the object&#39;s data and replace the value for HashMap?","body":"<p>I am having a hard time writing a couple of lines of code. All my current codes are in: <a href=\"https://github.com/anabeen/MeetingJava\" rel=\"nofollow noreferrer\">https://github.com/anabeen/MeetingJava</a></p>\n<p>The problem that I have is, finding a suitable way to go through the hashmap and get the meetings that have overlapping times and replace them.</p>\n<pre><code>        Map&lt;LocalDate, Set&lt;Meeting&gt;&gt; meetings = new HashMap&lt;LocalDate, Set&lt;Meeting&gt;&gt;();\n</code></pre>\n<p>Let's say we have a HashMap of\n<code>[{2011-03-21=[objectMeeting1, objectMeeting2]}]</code>\nand we need to add objectMeeting3 to that hashMap. How do I select the key &quot;2011-03-21&quot; to look at the objects in that hashmap and compare the set of objects in there with a new objectMeeting3's time (part of the data from object) and then replace that object?</p>\n<p>In GitHub, I am trying to pass the MeetingSchedulerTest (). This is where I am stuck at:</p>\n<pre><code>           Meeting meeting = extractMeeting(employeeId, requestLines[i], \n                    officeStartTime, officeFinishTime, meetingSlotRequest1);\n            \n            \n\n            \n            if(meetings.containsKey(meetingDate)){              \n\n                // if the order overlaps\n                for (Map.Entry&lt;LocalDate, Set&lt;Meeting&gt;&gt; meetingEntry : meetings.entrySet()) {\n                    if (meetingDate == meetingEntry.getKey())\n                    {\n                        Set&lt;Meeting&gt; setOfMeeting = meetingEntry.getValue();\n                        for (Meeting m : setOfMeeting) {\n                            \n                        }\n                    }\n                    \n                }\n                \n                // if the order doesn't\n                \n                if (meetings.get(meetingDate) != null) \n                    //shouldNotHaveOverlappingMeetings\n                {                               \n                    System.out.println(&quot;HERES?&quot;); \n                    \n                    meetings.remove(meetingDate);\n                    Set&lt;Meeting&gt; meetingsForDay = new HashSet&lt;Meeting&gt;();\n                    meetingsForDay.add(meeting);\n                    meetings.put(meetingDate, meetingsForDay);\n                }  else\n                {\n                    System.out.println(&quot;HERES2?&quot;); \n                    meetings.get(meetingDate).add(meeting);\n                }\n                \n                }else if (meeting != null){\n                    // if meeting doens't have meetingDate then create a new HashMap with date &amp; Meeting\n                System.out.println(&quot;HERES3?&quot;);\n                Set&lt;Meeting&gt; meetingsForDay = new HashSet&lt;Meeting&gt;();\n                meetingsForDay.add(meeting);\n                meetings.put(meetingDate, meetingsForDay);\n            }\n            \n        }\n</code></pre>\n"},{"tags":["java","spring-boot","java-8"],"comments":[{"owner":{"account_id":465573,"reputation":192694,"user_id":869736,"accept_rate":82,"display_name":"Louis Wasserman"},"score":1,"creation_date":1637294657,"post_id":70029606,"comment_id":123793665,"body_markdown":"In what timezone?  The &quot;start of the day&quot; is different depending on what timezone you&#39;re in.","body":"In what timezone?  The &quot;start of the day&quot; is different depending on what timezone you&#39;re in."}],"answers":[{"tags":[],"owner":{"account_id":3883809,"reputation":895,"user_id":3215705,"accept_rate":75,"display_name":"mystery"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1637295331,"creation_date":1637294840,"answer_id":70029761,"question_id":70029606,"body_markdown":"In System default timezone you could try like this\r\n\r\n        ZoneId zoneId = ZoneId.systemDefault();\r\n        long timestamp = 1637293359000L;\r\n        LocalDate date = Instant.ofEpochMilli(timestamp).atZone(zoneId).toLocalDate();\r\n        LocalDateTime startDay = date.atStartOfDay();\r\n        LocalDateTime endDay = date.atTime(LocalTime.MAX);\r\n        System.out.println(startDay);\r\n        System.out.println(endDay);\r\n        long startDayLongValue = startDay.atZone(zoneId).toInstant().toEpochMilli();\r\n        long endDayLongValue = endDay.atZone(zoneId).toInstant().toEpochMilli();\r\n        System.out.println(startDayLongValue);\r\n        System.out.println(endDayLongValue);","title":"Get the start and end timestamp of the given timestamp in java","body":"<p>In System default timezone you could try like this</p>\n<pre><code>    ZoneId zoneId = ZoneId.systemDefault();\n    long timestamp = 1637293359000L;\n    LocalDate date = Instant.ofEpochMilli(timestamp).atZone(zoneId).toLocalDate();\n    LocalDateTime startDay = date.atStartOfDay();\n    LocalDateTime endDay = date.atTime(LocalTime.MAX);\n    System.out.println(startDay);\n    System.out.println(endDay);\n    long startDayLongValue = startDay.atZone(zoneId).toInstant().toEpochMilli();\n    long endDayLongValue = endDay.atZone(zoneId).toInstant().toEpochMilli();\n    System.out.println(startDayLongValue);\n    System.out.println(endDayLongValue);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":322981,"reputation":310745,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1637380673,"creation_date":1637295352,"answer_id":70029808,"question_id":70029606,"body_markdown":"# tl;dr\r\n\r\nHere is the complete code to a [record][1] representing the day of a specified moment as seen in a particular time zone. A static factory method contains our logic.\r\n\r\n```java\r\npackage work.basil.example;\r\n\r\nimport java.time.*;\r\nimport java.util.Objects;\r\n\r\npublic record DayInMillis( long start , long end )\r\n{\r\n    public static DayInMillis from ( final long countOfMillisSinceEpoch , final ZoneId zoneId )\r\n    {\r\n        Objects.requireNonNull( zoneId );\r\n\r\n        Instant instant = Instant.ofEpochMilli( countOfMillisSinceEpoch );\r\n        ZonedDateTime zdt = instant.atZone( zoneId );\r\n        LocalDate ld = zdt.toLocalDate();\r\n        ZonedDateTime start = ld.atStartOfDay( zoneId );\r\n        ZonedDateTime end = ld.plusDays( 1 ).atStartOfDay( zoneId );\r\n        Instant startInstant = start.toInstant();\r\n        Instant endInstant = end.toInstant();\r\n        long startMilli = startInstant.toEpochMilli();\r\n        long endMilli = endInstant.toEpochMilli();\r\n\r\n        System.out.println( &quot;instant = &quot; + instant );\r\n        System.out.println( &quot;zdt = &quot; + zdt );\r\n        System.out.println( &quot;start/end = &quot; + start + &quot;/&quot; + end );\r\n        System.out.println( &quot;startInstant/endInstant = &quot; + startInstant + &quot;/&quot; + endInstant );\r\n        System.out.println( &quot;startMilli/endMilli = &quot; + startMilli + &quot;/&quot; + endMilli );\r\n        System.out.println( &quot;Duration (not necessarily 24 hours): &quot; + Duration.between( startInstant , endInstant ) );\r\n\r\n        return new DayInMillis( startMilli , endMilli );\r\n    }\r\n}\r\n```\r\n\r\nExample usage:\r\n\r\n```java\r\nDayInMillis.from( 1_637_293_359_000L , ZoneId.of( &quot;Asia/Tokyo&quot; ) )\r\n```\r\n\r\nWhen run.\r\n\r\n```none\r\ninstant = 2021-11-19T03:42:39Z\r\nzdt = 2021-11-19T12:42:39+09:00[Asia/Tokyo]\r\nstart/end = 2021-11-19T00:00+09:00[Asia/Tokyo]/2021-11-20T00:00+09:00[Asia/Tokyo]\r\nstartInstant/endInstant = 2021-11-18T15:00:00Z/2021-11-19T15:00:00Z\r\nstartMilli/endMilli = 1637247600000/1637334000000\r\nDuration (not necessarily 24 hours): PT24H\r\ndayInMillis = DayInMillis[start=1637247600000, end=1637334000000]\r\n```\r\n\r\n\r\n# Parse count of seconds\r\n\r\nParse your input count of milliseconds since epoch of first moment of 1970 in UTC as a `Instant` object.\r\n\r\n    Instant instant = Instant.ofEpochMilli( 1_637_293_359_000L ) ;\r\n\r\n# Adjust into time zone\r\n\r\nSpecify the time zone by which you want to perceive dates.\r\n\r\n    ZoneId z = ZoneId.of( &quot;America/Edmonton&quot; ) ;\r\n\r\nAdjust from UTC (an offset of zero hours-minutes-seconds) to that time zone.\r\n\r\n    ZonedDateTime zdt = instant.atZone( z ) ;\r\n\r\n# Get the date\r\n\r\nExtract the date-only portion.\r\n\r\n    LocalDate ld = zdt.toLocalDate() ;\r\n\r\n# Start of day\r\n\r\nLet *java.time* determine the first moment of the day. Never assume the day starts at 00:00. Some dates in some zones may start at another time such as 01:00.\r\n\r\n    ZonedDateTime start = ld.atStartOfDay( z ) ;\r\n\r\n# Half-Open\r\n\r\nThe last moment of the day is infinitely divisible. For this and other reasons, spans of time are usually best defined using Half-Open approach. In Half-Open, the beginning is *inclusive* while the ending is *exclusive*. This means the span of a day starts at the first moment of the day and runs up to, but does not include, the first moment of the *following* day.\r\n\r\n    ZonedDateTime end = ld.plusDays( 1 ).atStartOfDay( z ) ;\r\n\r\nNow we have the span covered by a pair of `ZonedDateTime` objects. But you want to get a count of milliseconds since epoch for both of those. \r\n\r\n# Tracking count-from-epoch is awkward\r\n\r\nLet me say, I do not recommend using a count-since-epoch for time-keeping. The values are inherently ambiguous as to both epoch and granularity. Furthermore, using such counts makes debugging difficult and errors hard to spot, as such values are meaningless to human readers. \r\n\r\n\r\n## ISO 8601\r\n\r\nInstead, I suggest communicating such values textually in standard [ISO 8601][2] format. The *java.time* classes use ISO 8601 formats by default when parsing/generating text.\r\n\r\n    String outputStart = start.toInstant().toString();\r\n    String outputEnd = end.toInstant().toString();\r\n\r\n# Milliseconds since epoch\r\n\r\nBut if you insist on the count of milliseconds, first extract `Instant` objects from our `ZonedDateTime` objects, effectively adjusting to UTC (offset of zero).\r\n\r\n    Instant startInstant = start.toInstant() ;\r\n    Instant endInstant = end.toInstant() ;\r\n\r\nInterrogate for a count of milliseconds since epoch. \r\n\r\n    long startMilli = startInstant.toEpochMilli() ;\r\n    long endMilli = endInstant.toEpochMilli() ;\r\n\r\n# Avoid `LocalDateTime` for this problem\r\n\r\nNotice that at no point did we use the [`LocalDateTime`][3] class. That class purposely lacks the context of a time zone or offset-from-UTC. So `LocalDateTime` cannot represent a moment, is not a point on the timeline. That makes `LocalDateTime` irrelevant to the problem at hand.\r\n\r\n# Tip: *ThreeTen-Extra* library\r\n\r\nIf you routinely work with pairs of moments, considering adding the [`ThreeTen-Extra`][4] library to your project. This provides the [`Interval`][5] class for representing a pair of `Instant` objects. The class carries several handy comparison methods such as `abuts`, `overlaps`, `contains`, and so on.\r\n\r\n\r\n  [1]: https://openjdk.java.net/jeps/395\r\n  [2]: https://en.wikipedia.org/wiki/ISO_8601\r\n  [3]: https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/time/LocalDateTime.html\r\n  [4]: https://www.threeten.org/threeten-extra/\r\n  [5]: https://www.threeten.org/threeten-extra/apidocs/org.threeten.extra/org/threeten/extra/Interval.html","title":"Get the start and end timestamp of the given timestamp in java","body":"<h1>tl;dr</h1>\n<p>Here is the complete code to a <a href=\"https://openjdk.java.net/jeps/395\" rel=\"nofollow noreferrer\">record</a> representing the day of a specified moment as seen in a particular time zone. A static factory method contains our logic.</p>\n<pre class=\"lang-java prettyprint-override\"><code>package work.basil.example;\n\nimport java.time.*;\nimport java.util.Objects;\n\npublic record DayInMillis( long start , long end )\n{\n    public static DayInMillis from ( final long countOfMillisSinceEpoch , final ZoneId zoneId )\n    {\n        Objects.requireNonNull( zoneId );\n\n        Instant instant = Instant.ofEpochMilli( countOfMillisSinceEpoch );\n        ZonedDateTime zdt = instant.atZone( zoneId );\n        LocalDate ld = zdt.toLocalDate();\n        ZonedDateTime start = ld.atStartOfDay( zoneId );\n        ZonedDateTime end = ld.plusDays( 1 ).atStartOfDay( zoneId );\n        Instant startInstant = start.toInstant();\n        Instant endInstant = end.toInstant();\n        long startMilli = startInstant.toEpochMilli();\n        long endMilli = endInstant.toEpochMilli();\n\n        System.out.println( &quot;instant = &quot; + instant );\n        System.out.println( &quot;zdt = &quot; + zdt );\n        System.out.println( &quot;start/end = &quot; + start + &quot;/&quot; + end );\n        System.out.println( &quot;startInstant/endInstant = &quot; + startInstant + &quot;/&quot; + endInstant );\n        System.out.println( &quot;startMilli/endMilli = &quot; + startMilli + &quot;/&quot; + endMilli );\n        System.out.println( &quot;Duration (not necessarily 24 hours): &quot; + Duration.between( startInstant , endInstant ) );\n\n        return new DayInMillis( startMilli , endMilli );\n    }\n}\n</code></pre>\n<p>Example usage:</p>\n<pre class=\"lang-java prettyprint-override\"><code>DayInMillis.from( 1_637_293_359_000L , ZoneId.of( &quot;Asia/Tokyo&quot; ) )\n</code></pre>\n<p>When run.</p>\n<pre class=\"lang-none prettyprint-override\"><code>instant = 2021-11-19T03:42:39Z\nzdt = 2021-11-19T12:42:39+09:00[Asia/Tokyo]\nstart/end = 2021-11-19T00:00+09:00[Asia/Tokyo]/2021-11-20T00:00+09:00[Asia/Tokyo]\nstartInstant/endInstant = 2021-11-18T15:00:00Z/2021-11-19T15:00:00Z\nstartMilli/endMilli = 1637247600000/1637334000000\nDuration (not necessarily 24 hours): PT24H\ndayInMillis = DayInMillis[start=1637247600000, end=1637334000000]\n</code></pre>\n<h1>Parse count of seconds</h1>\n<p>Parse your input count of milliseconds since epoch of first moment of 1970 in UTC as a <code>Instant</code> object.</p>\n<pre><code>Instant instant = Instant.ofEpochMilli( 1_637_293_359_000L ) ;\n</code></pre>\n<h1>Adjust into time zone</h1>\n<p>Specify the time zone by which you want to perceive dates.</p>\n<pre><code>ZoneId z = ZoneId.of( &quot;America/Edmonton&quot; ) ;\n</code></pre>\n<p>Adjust from UTC (an offset of zero hours-minutes-seconds) to that time zone.</p>\n<pre><code>ZonedDateTime zdt = instant.atZone( z ) ;\n</code></pre>\n<h1>Get the date</h1>\n<p>Extract the date-only portion.</p>\n<pre><code>LocalDate ld = zdt.toLocalDate() ;\n</code></pre>\n<h1>Start of day</h1>\n<p>Let <em>java.time</em> determine the first moment of the day. Never assume the day starts at 00:00. Some dates in some zones may start at another time such as 01:00.</p>\n<pre><code>ZonedDateTime start = ld.atStartOfDay( z ) ;\n</code></pre>\n<h1>Half-Open</h1>\n<p>The last moment of the day is infinitely divisible. For this and other reasons, spans of time are usually best defined using Half-Open approach. In Half-Open, the beginning is <em>inclusive</em> while the ending is <em>exclusive</em>. This means the span of a day starts at the first moment of the day and runs up to, but does not include, the first moment of the <em>following</em> day.</p>\n<pre><code>ZonedDateTime end = ld.plusDays( 1 ).atStartOfDay( z ) ;\n</code></pre>\n<p>Now we have the span covered by a pair of <code>ZonedDateTime</code> objects. But you want to get a count of milliseconds since epoch for both of those.</p>\n<h1>Tracking count-from-epoch is awkward</h1>\n<p>Let me say, I do not recommend using a count-since-epoch for time-keeping. The values are inherently ambiguous as to both epoch and granularity. Furthermore, using such counts makes debugging difficult and errors hard to spot, as such values are meaningless to human readers.</p>\n<h2>ISO 8601</h2>\n<p>Instead, I suggest communicating such values textually in standard <a href=\"https://en.wikipedia.org/wiki/ISO_8601\" rel=\"nofollow noreferrer\">ISO 8601</a> format. The <em>java.time</em> classes use ISO 8601 formats by default when parsing/generating text.</p>\n<pre><code>String outputStart = start.toInstant().toString();\nString outputEnd = end.toInstant().toString();\n</code></pre>\n<h1>Milliseconds since epoch</h1>\n<p>But if you insist on the count of milliseconds, first extract <code>Instant</code> objects from our <code>ZonedDateTime</code> objects, effectively adjusting to UTC (offset of zero).</p>\n<pre><code>Instant startInstant = start.toInstant() ;\nInstant endInstant = end.toInstant() ;\n</code></pre>\n<p>Interrogate for a count of milliseconds since epoch.</p>\n<pre><code>long startMilli = startInstant.toEpochMilli() ;\nlong endMilli = endInstant.toEpochMilli() ;\n</code></pre>\n<h1>Avoid <code>LocalDateTime</code> for this problem</h1>\n<p>Notice that at no point did we use the <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/time/LocalDateTime.html\" rel=\"nofollow noreferrer\"><code>LocalDateTime</code></a> class. That class purposely lacks the context of a time zone or offset-from-UTC. So <code>LocalDateTime</code> cannot represent a moment, is not a point on the timeline. That makes <code>LocalDateTime</code> irrelevant to the problem at hand.</p>\n<h1>Tip: <em>ThreeTen-Extra</em> library</h1>\n<p>If you routinely work with pairs of moments, considering adding the <a href=\"https://www.threeten.org/threeten-extra/\" rel=\"nofollow noreferrer\"><code>ThreeTen-Extra</code></a> library to your project. This provides the <a href=\"https://www.threeten.org/threeten-extra/apidocs/org.threeten.extra/org/threeten/extra/Interval.html\" rel=\"nofollow noreferrer\"><code>Interval</code></a> class for representing a pair of <code>Instant</code> objects. The class carries several handy comparison methods such as <code>abuts</code>, <code>overlaps</code>, <code>contains</code>, and so on.</p>\n"},{"tags":[],"owner":{"account_id":1705913,"reputation":484,"user_id":1564958,"accept_rate":100,"display_name":"Madhavi"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1637296592,"creation_date":1637296592,"answer_id":70029940,"question_id":70029606,"body_markdown":"We can achieve this using DateTime\r\n\r\n    import org.joda.time.DateTime;\r\n    \r\n    long timestamp = 1629454215381L;\r\n    DateTime dateTime=new DateTime(timestamp ); \r\n    \r\n    long StartOfDayMillis = dateTime.withMillis(System.currentTimeMillis()).withTimeAtStartOfDay().getMillis();\r\n    long EndOfDayMillis = dateTime.withMillis(StartOfDayMillis).plusDays(1).minusSeconds(1).getMillis();","title":"Get the start and end timestamp of the given timestamp in java","body":"<p>We can achieve this using DateTime</p>\n<pre><code>import org.joda.time.DateTime;\n\nlong timestamp = 1629454215381L;\nDateTime dateTime=new DateTime(timestamp ); \n\nlong StartOfDayMillis = dateTime.withMillis(System.currentTimeMillis()).withTimeAtStartOfDay().getMillis();\nlong EndOfDayMillis = dateTime.withMillis(StartOfDayMillis).plusDays(1).minusSeconds(1).getMillis();\n</code></pre>\n"}],"owner":{"account_id":1705913,"reputation":484,"user_id":1564958,"accept_rate":100,"display_name":"Madhavi"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1200,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"accepted_answer_id":70029940,"answer_count":3,"score":-1,"last_activity_date":1637380673,"creation_date":1637293334,"question_id":70029606,"body_markdown":"I had a timestamp in Unix with milliseconds, now I need the start of the day and end of the day with milliseconds for the same given timestamp.\r\n\r\n    Eg:  1637293359000 - Given timestamp\r\n    Start of the day to be 1637280000000\r\n    End of the day to be 1637323199000","title":"Get the start and end timestamp of the given timestamp in java","body":"<p>I had a timestamp in Unix with milliseconds, now I need the start of the day and end of the day with milliseconds for the same given timestamp.</p>\n<pre><code>Eg:  1637293359000 - Given timestamp\nStart of the day to be 1637280000000\nEnd of the day to be 1637323199000\n</code></pre>\n"},{"tags":["java","regex","string","split"],"comments":[{"owner":{"account_id":8326,"reputation":258545,"user_id":14955,"accept_rate":55,"display_name":"Thilo"},"score":4,"creation_date":1285071497,"post_id":3760152,"comment_id":3977246,"body_markdown":"What did you try? Why did that not work?","body":"What did you try? Why did that not work?"},{"owner":{"account_id":10843,"reputation":330377,"user_id":20670,"accept_rate":100,"display_name":"Tim Pietzcker"},"score":2,"creation_date":1285071599,"post_id":3760152,"comment_id":3977264,"body_markdown":"Do you need to use a regex for this? Just asking because of the regex tag...","body":"Do you need to use a regex for this? Just asking because of the regex tag..."},{"owner":{"account_id":104591,"reputation":2404,"user_id":279554,"accept_rate":64,"display_name":"Jaydeep Patel"},"score":0,"creation_date":1285071635,"post_id":3760152,"comment_id":3977274,"body_markdown":"@Thilo link he posted is for Scala, he is asking about same in Java","body":"@Thilo link he posted is for Scala, he is asking about same in Java"},{"owner":{"account_id":117125,"reputation":13617,"user_id":306855,"accept_rate":73,"display_name":"Emil"},"score":0,"creation_date":1285072034,"post_id":3760152,"comment_id":3977322,"body_markdown":"@Thilo:I was asking what how to do it in java ,like the answer given for scala.","body":"@Thilo:I was asking what how to do it in java ,like the answer given for scala."}],"answers":[{"tags":[],"owner":{"account_id":78263,"reputation":11435,"user_id":222851,"accept_rate":88,"display_name":"pakore"},"down_vote_count":3,"up_vote_count":4,"is_accepted":false,"score":1,"last_activity_date":1285099375,"creation_date":1285071583,"answer_id":3760191,"question_id":3760152,"body_markdown":"You can use `substring` from `String.class` (handling exceptions) or from [Apache lang commons](http://commons.apache.org/lang/api-2.3/org/apache/commons/lang/StringUtils.html) (it handles exceptions for you)\r\n\r\n    static String\tsubstring(String str, int start, int end) \r\n            \r\n\r\nPut it inside a loop and you are good to go.","title":"Split string to equal length substrings in Java","body":"<p>You can use <code>substring</code> from <code>String.class</code> (handling exceptions) or from <a href=\"http://commons.apache.org/lang/api-2.3/org/apache/commons/lang/StringUtils.html\" rel=\"nofollow noreferrer\">Apache lang commons</a> (it handles exceptions for you)</p>\n\n<pre><code>static String   substring(String str, int start, int end) \n</code></pre>\n\n<p>Put it inside a loop and you are good to go.</p>\n"},{"tags":[],"owner":{"account_id":11683,"reputation":1438179,"user_id":22656,"accept_rate":86,"display_name":"Jon Skeet"},"down_vote_count":0,"up_vote_count":160,"is_accepted":false,"score":160,"last_activity_date":1618553681,"creation_date":1285071604,"answer_id":3760193,"question_id":3760152,"body_markdown":"Well, it&#39;s fairly easy to do this with simple arithmetic and string operations:\r\n\r\n    public static List&lt;String&gt; splitEqually(String text, int size) {\r\n        // Give the list the right capacity to start with. You could use an array\r\n        // instead if you wanted.\r\n        List&lt;String&gt; ret = new ArrayList&lt;String&gt;((text.length() + size - 1) / size);\r\n\r\n        for (int start = 0; start &lt; text.length(); start += size) {\r\n            ret.add(text.substring(start, Math.min(text.length(), start + size)));\r\n        }\r\n        return ret;\r\n    }\r\n\r\nNote: this assumes a 1:1 mapping of UTF-16 code unit (`char`, effectively) with &quot;character&quot;. That assumption breaks down for characters outside the Basic Multilingual Plane, such as emoji, and (depending on how you want to count things) combining characters.\r\n\r\nI don&#39;t think it&#39;s really worth using a regex for this.\r\n\r\nEDIT: My reasoning for not using a regex:\r\n\r\n- This doesn&#39;t use any of the real pattern matching of regexes. It&#39;s just counting.\r\n- I *suspect* the above will be more efficient, although in most cases it won&#39;t matter\r\n- If you need to use variable sizes in different places, you&#39;ve either got repetition or a helper function to build the regex itself based on a parameter - ick.\r\n- The regex provided in another answer firstly didn&#39;t compile (invalid escaping), and then didn&#39;t work. My code worked first time. That&#39;s more a testament to the usability of regexes vs plain code, IMO.\r\n","title":"Split string to equal length substrings in Java","body":"<p>Well, it's fairly easy to do this with simple arithmetic and string operations:</p>\n<pre><code>public static List&lt;String&gt; splitEqually(String text, int size) {\n    // Give the list the right capacity to start with. You could use an array\n    // instead if you wanted.\n    List&lt;String&gt; ret = new ArrayList&lt;String&gt;((text.length() + size - 1) / size);\n\n    for (int start = 0; start &lt; text.length(); start += size) {\n        ret.add(text.substring(start, Math.min(text.length(), start + size)));\n    }\n    return ret;\n}\n</code></pre>\n<p>Note: this assumes a 1:1 mapping of UTF-16 code unit (<code>char</code>, effectively) with &quot;character&quot;. That assumption breaks down for characters outside the Basic Multilingual Plane, such as emoji, and (depending on how you want to count things) combining characters.</p>\n<p>I don't think it's really worth using a regex for this.</p>\n<p>EDIT: My reasoning for not using a regex:</p>\n<ul>\n<li>This doesn't use any of the real pattern matching of regexes. It's just counting.</li>\n<li>I <em>suspect</em> the above will be more efficient, although in most cases it won't matter</li>\n<li>If you need to use variable sizes in different places, you've either got repetition or a helper function to build the regex itself based on a parameter - ick.</li>\n<li>The regex provided in another answer firstly didn't compile (invalid escaping), and then didn't work. My code worked first time. That's more a testament to the usability of regexes vs plain code, IMO.</li>\n</ul>\n"},{"tags":[],"owner":{"account_id":203002,"reputation":21637,"user_id":450398,"accept_rate":85,"display_name":"Grodriguez"},"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1285071919,"creation_date":1285071919,"answer_id":3760226,"question_id":3760152,"body_markdown":"    public String[] splitInParts(String s, int partLength)\r\n    {\r\n        int len = s.length();\r\n\r\n        // Number of parts\r\n        int nparts = (len + partLength - 1) / partLength;\r\n        String parts[] = new String[nparts];\r\n\r\n        // Break into parts\r\n        int offset= 0;\r\n        int i = 0;\r\n        while (i &lt; nparts)\r\n        {\r\n            parts[i] = s.substring(offset, Math.min(offset + partLength, len));\r\n            offset += partLength;\r\n            i++;\r\n        }\r\n\r\n        return parts;\r\n    }","title":"Split string to equal length substrings in Java","body":"<pre><code>public String[] splitInParts(String s, int partLength)\n{\n    int len = s.length();\n\n    // Number of parts\n    int nparts = (len + partLength - 1) / partLength;\n    String parts[] = new String[nparts];\n\n    // Break into parts\n    int offset= 0;\n    int i = 0;\n    while (i &lt; nparts)\n    {\n        parts[i] = s.substring(offset, Math.min(offset + partLength, len));\n        offset += partLength;\n        i++;\n    }\n\n    return parts;\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":187955,"reputation":17983,"user_id":426379,"accept_rate":95,"display_name":"Saul"},"down_vote_count":0,"up_vote_count":8,"is_accepted":false,"score":8,"last_activity_date":1285078215,"creation_date":1285072948,"answer_id":3760344,"question_id":3760152,"body_markdown":"    public static String[] split(String src, int len) {\r\n    \tString[] result = new String[(int)Math.ceil((double)src.length()/(double)len)];\r\n    \tfor (int i=0; i&lt;result.length; i++)\r\n    \t\tresult[i] = src.substring(i*len, Math.min(src.length(), (i+1)*len));\r\n    \treturn result;\r\n    }","title":"Split string to equal length substrings in Java","body":"<pre><code>public static String[] split(String src, int len) {\n    String[] result = new String[(int)Math.ceil((double)src.length()/(double)len)];\n    for (int i=0; i&lt;result.length; i++)\n        result[i] = src.substring(i*len, Math.min(src.length(), (i+1)*len));\n    return result;\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":138128,"reputation":294236,"user_id":342852,"accept_rate":97,"display_name":"Sean Patrick Floyd"},"down_vote_count":1,"up_vote_count":81,"is_accepted":false,"score":80,"last_activity_date":1485441156,"creation_date":1285076367,"answer_id":3760862,"question_id":3760152,"body_markdown":"This is very easy with [Google Guava][1]:\r\n\r\n    for(final String token :\r\n        Splitter\r\n            .fixedLength(4)\r\n            .split(&quot;Thequickbrownfoxjumps&quot;)){\r\n        System.out.println(token);\r\n    }\r\n\r\nOutput:\r\n\r\n&lt;!-- language: lang-none --&gt;\r\n\r\n    Theq\r\n    uick\r\n    brow\r\n    nfox\r\n    jump\r\n    s\r\n\r\nOr if you need the result as an array, you can use this code:\r\n\r\n    String[] tokens =\r\n        Iterables.toArray(\r\n            Splitter\r\n                .fixedLength(4)\r\n                .split(&quot;Thequickbrownfoxjumps&quot;),\r\n            String.class\r\n        );\r\n\r\n\r\nReference:\r\n\r\n - [`Splitter.fixedLength()`][2]\r\n - [`Splitter.split()`][3]\r\n - [`Iterables.toArray()`][4]\r\n\r\nNote: Splitter construction is shown inline above, but since Splitters are immutable and reusable, it&#39;s a good practice to store them in constants:\r\n\r\n    private static final Splitter FOUR_LETTERS = Splitter.fixedLength(4);\r\n\r\n    // more code\r\n\r\n    for(final String token : FOUR_LETTERS.split(&quot;Thequickbrownfoxjumps&quot;)){\r\n        System.out.println(token);\r\n    }\r\n\r\n  [1]: https://github.com/google/guava\r\n  [2]: https://google.github.io/guava/releases/19.0/api/docs/com/google/common/base/Splitter.html#fixedLength%28int%29\r\n  [3]: https://google.github.io/guava/releases/19.0/api/docs/com/google/common/base/Splitter.html#split%28java.lang.CharSequence%29\r\n  [4]: https://google.github.io/guava/releases/19.0/api/docs/com/google/common/collect/Iterables.html#toArray%28java.lang.Iterable,%20java.lang.Class%29","title":"Split string to equal length substrings in Java","body":"<p>This is very easy with <a href=\"https://github.com/google/guava\" rel=\"noreferrer\">Google Guava</a>:</p>\n\n<pre><code>for(final String token :\n    Splitter\n        .fixedLength(4)\n        .split(\"Thequickbrownfoxjumps\")){\n    System.out.println(token);\n}\n</code></pre>\n\n<p>Output:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>Theq\nuick\nbrow\nnfox\njump\ns\n</code></pre>\n\n<p>Or if you need the result as an array, you can use this code:</p>\n\n<pre><code>String[] tokens =\n    Iterables.toArray(\n        Splitter\n            .fixedLength(4)\n            .split(\"Thequickbrownfoxjumps\"),\n        String.class\n    );\n</code></pre>\n\n<p>Reference:</p>\n\n<ul>\n<li><a href=\"https://google.github.io/guava/releases/19.0/api/docs/com/google/common/base/Splitter.html#fixedLength%28int%29\" rel=\"noreferrer\"><code>Splitter.fixedLength()</code></a></li>\n<li><a href=\"https://google.github.io/guava/releases/19.0/api/docs/com/google/common/base/Splitter.html#split%28java.lang.CharSequence%29\" rel=\"noreferrer\"><code>Splitter.split()</code></a></li>\n<li><a href=\"https://google.github.io/guava/releases/19.0/api/docs/com/google/common/collect/Iterables.html#toArray%28java.lang.Iterable,%20java.lang.Class%29\" rel=\"noreferrer\"><code>Iterables.toArray()</code></a></li>\n</ul>\n\n<p>Note: Splitter construction is shown inline above, but since Splitters are immutable and reusable, it's a good practice to store them in constants:</p>\n\n<pre><code>private static final Splitter FOUR_LETTERS = Splitter.fixedLength(4);\n\n// more code\n\nfor(final String token : FOUR_LETTERS.split(\"Thequickbrownfoxjumps\")){\n    System.out.println(token);\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":9269,"reputation":37307,"user_id":17041,"display_name":"Cowan"},"down_vote_count":0,"up_vote_count":15,"is_accepted":false,"score":15,"last_activity_date":1285076475,"creation_date":1285076475,"answer_id":3760889,"question_id":3760152,"body_markdown":"If you&#39;re using Google&#39;s [guava](http://code.google.com/p/guava-libraries/) general-purpose libraries (and quite honestly, any new Java project probably _should_ be), this is insanely trivial with the [Splitter](http://guava-libraries.googlecode.com/svn/trunk/javadoc/com/google/common/base/Splitter.html) class:\r\n\r\n    for (String substring : Splitter.fixedLength(4).split(inputString)) {\r\n        doSomethingWith(substring);\r\n    }\r\n\r\nand that&#39;s _it_. Easy as!","title":"Split string to equal length substrings in Java","body":"<p>If you're using Google's <a href=\"http://code.google.com/p/guava-libraries/\" rel=\"noreferrer\">guava</a> general-purpose libraries (and quite honestly, any new Java project probably <em>should</em> be), this is insanely trivial with the <a href=\"http://guava-libraries.googlecode.com/svn/trunk/javadoc/com/google/common/base/Splitter.html\" rel=\"noreferrer\">Splitter</a> class:</p>\n\n<pre><code>for (String substring : Splitter.fixedLength(4).split(inputString)) {\n    doSomethingWith(substring);\n}\n</code></pre>\n\n<p>and that's <em>it</em>. Easy as!</p>\n"},{"tags":[],"owner":{"account_id":10959,"reputation":74232,"user_id":20938,"display_name":"Alan Moore"},"down_vote_count":2,"up_vote_count":274,"is_accepted":true,"score":272,"last_activity_date":1487083293,"creation_date":1285080665,"answer_id":3761521,"question_id":3760152,"body_markdown":"Here&#39;s the regex one-liner version:\r\n\r\n    System.out.println(Arrays.toString(\r\n        &quot;Thequickbrownfoxjumps&quot;.split(&quot;(?&lt;=\\\\G.{4})&quot;)\r\n    ));\r\n\r\n`\\G` is a zero-width assertion that matches the position where the previous match ended.  If there *was* no previous match, it matches the beginning of the input, the same as `\\A`.  The enclosing lookbehind matches the position that&#39;s four characters along from the end of the last match.\r\n\r\nBoth lookbehind and `\\G` are advanced regex features, not supported by all flavors.  Furthermore, `\\G` is not implemented consistently across the flavors that do support it.  This trick will work (for example) in [Java][1], Perl, .NET and JGSoft, but not in [PHP][2] (PCRE), Ruby 1.9+ or TextMate (both Oniguruma).  JavaScript&#39;s `/y` (sticky flag) isn&#39;t as flexible as `\\G`, and couldn&#39;t be used this way even if JS did support lookbehind.\r\n\r\nI should mention that I don&#39;t necessarily *recommend* this solution if you have other options.  The non-regex solutions in the other answers may be longer, but they&#39;re also self-documenting; this one&#39;s just about the *opposite* of that. ;)\r\n\r\nAlso, this doesn&#39;t work in Android, which doesn&#39;t support the use of `\\G` in lookbehinds.\r\n\r\n  [1]: http://ideone.com/oInXz\r\n  [2]: http://ideone.com/9ZVhK","title":"Split string to equal length substrings in Java","body":"<p>Here's the regex one-liner version:</p>\n\n<pre><code>System.out.println(Arrays.toString(\n    \"Thequickbrownfoxjumps\".split(\"(?&lt;=\\\\G.{4})\")\n));\n</code></pre>\n\n<p><code>\\G</code> is a zero-width assertion that matches the position where the previous match ended.  If there <em>was</em> no previous match, it matches the beginning of the input, the same as <code>\\A</code>.  The enclosing lookbehind matches the position that's four characters along from the end of the last match.</p>\n\n<p>Both lookbehind and <code>\\G</code> are advanced regex features, not supported by all flavors.  Furthermore, <code>\\G</code> is not implemented consistently across the flavors that do support it.  This trick will work (for example) in <a href=\"http://ideone.com/oInXz\" rel=\"noreferrer\">Java</a>, Perl, .NET and JGSoft, but not in <a href=\"http://ideone.com/9ZVhK\" rel=\"noreferrer\">PHP</a> (PCRE), Ruby 1.9+ or TextMate (both Oniguruma).  JavaScript's <code>/y</code> (sticky flag) isn't as flexible as <code>\\G</code>, and couldn't be used this way even if JS did support lookbehind.</p>\n\n<p>I should mention that I don't necessarily <em>recommend</em> this solution if you have other options.  The non-regex solutions in the other answers may be longer, but they're also self-documenting; this one's just about the <em>opposite</em> of that. ;)</p>\n\n<p>Also, this doesn't work in Android, which doesn't support the use of <code>\\G</code> in lookbehinds.</p>\n"},{"tags":[],"owner":{"account_id":3908479,"reputation":2192,"user_id":3234481,"accept_rate":43,"display_name":"Ravichandra"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1441353920,"creation_date":1406359981,"answer_id":24968691,"question_id":3760152,"body_markdown":"    \r\n        import static java.lang.System.exit;\r\n       import java.util.Scanner;\r\n       import Java.util.Arrays.*;\r\n\r\n\r\n     public class string123 {\r\n\r\n    public static void main(String[] args) {\r\n        \r\n\r\n      Scanner sc=new Scanner(System.in);\r\n        System.out.println(&quot;Enter String&quot;);\r\n        String r=sc.nextLine();\r\n        String[] s=new String[10];\r\n        int len=r.length();\r\n           System.out.println(&quot;Enter length Of Sub-string&quot;);\r\n        int l=sc.nextInt();\r\n        int last;\r\n        int f=0;\r\n        for(int i=0;;i++){\r\n            last=(f+l);\r\n                if((last)&gt;=len) last=len;\r\n            s[i]=r.substring(f,last);\r\n         // System.out.println(s[i]);\r\n         \r\n          if (last==len)break;\r\n           f=(f+l);\r\n        } \r\n        System.out.print(Arrays.tostring(s));\r\n        }}\r\nResult\r\n    \r\n\r\n     Enter String\r\n     Thequickbrownfoxjumps\r\n     Enter length Of Sub-string\r\n     4\r\n      \r\n     [&quot;Theq&quot;,&quot;uick&quot;,&quot;brow&quot;,&quot;nfox&quot;,&quot;jump&quot;,&quot;s&quot;]\r\n","title":"Split string to equal length substrings in Java","body":"<pre><code>    import static java.lang.System.exit;\n   import java.util.Scanner;\n   import Java.util.Arrays.*;\n\n\n public class string123 {\n\npublic static void main(String[] args) {\n\n\n  Scanner sc=new Scanner(System.in);\n    System.out.println(\"Enter String\");\n    String r=sc.nextLine();\n    String[] s=new String[10];\n    int len=r.length();\n       System.out.println(\"Enter length Of Sub-string\");\n    int l=sc.nextInt();\n    int last;\n    int f=0;\n    for(int i=0;;i++){\n        last=(f+l);\n            if((last)&gt;=len) last=len;\n        s[i]=r.substring(f,last);\n     // System.out.println(s[i]);\n\n      if (last==len)break;\n       f=(f+l);\n    } \n    System.out.print(Arrays.tostring(s));\n    }}\n</code></pre>\n\n<p>Result</p>\n\n<pre><code> Enter String\n Thequickbrownfoxjumps\n Enter length Of Sub-string\n 4\n\n [\"Theq\",\"uick\",\"brow\",\"nfox\",\"jump\",\"s\"]\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1284624,"reputation":2007,"user_id":1237974,"accept_rate":67,"display_name":"joensson"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1415868651,"creation_date":1415868160,"answer_id":26904563,"question_id":3760152,"body_markdown":"I asked @Alan Moore in a comment to the [accepted solution][1] how strings with newlines could be handled. He suggested using DOTALL.\r\n\r\nUsing his suggestion I created a small sample of how that works:\r\n\r\n    public void regexDotAllExample() throws UnsupportedEncodingException {\r\n        final String input = &quot;The\\nquick\\nbrown\\r\\nfox\\rjumps&quot;;\r\n        final String regex = &quot;(?&lt;=\\\\G.{4})&quot;;\r\n\r\n        Pattern splitByLengthPattern;\r\n        String[] split;\r\n\r\n        splitByLengthPattern = Pattern.compile(regex);\r\n        split = splitByLengthPattern.split(input);\r\n        System.out.println(&quot;---- Without DOTALL ----&quot;);\r\n        for (int i = 0; i &lt; split.length; i++) {\r\n            byte[] s = split[i].getBytes(&quot;utf-8&quot;);\r\n            System.out.println(&quot;[Idx: &quot;+i+&quot;, length: &quot;+s.length+&quot;] - &quot; + s);\r\n        }\r\n        /* Output is a single entry longer than the desired split size:\r\n        ---- Without DOTALL ----\r\n        [Idx: 0, length: 26] - [B@17cdc4a5\r\n         */\r\n\r\n\r\n        //DOTALL suggested in Alan Moores comment on SO: https://stackoverflow.com/a/3761521/1237974\r\n        splitByLengthPattern = Pattern.compile(regex, Pattern.DOTALL);\r\n        split = splitByLengthPattern.split(input);\r\n        System.out.println(&quot;---- With DOTALL ----&quot;);\r\n        for (int i = 0; i &lt; split.length; i++) {\r\n            byte[] s = split[i].getBytes(&quot;utf-8&quot;);\r\n            System.out.println(&quot;[Idx: &quot;+i+&quot;, length: &quot;+s.length+&quot;] - &quot; + s);\r\n        }\r\n        /* Output is as desired 7 entries with each entry having a max length of 4:\r\n        ---- With DOTALL ----\r\n        [Idx: 0, length: 4] - [B@77b22abc\r\n        [Idx: 1, length: 4] - [B@5213da08\r\n        [Idx: 2, length: 4] - [B@154f6d51\r\n        [Idx: 3, length: 4] - [B@1191ebc5\r\n        [Idx: 4, length: 4] - [B@30ddb86\r\n        [Idx: 5, length: 4] - [B@2c73bfb\r\n        [Idx: 6, length: 2] - [B@6632dd29\r\n         */\r\n\r\n    }\r\n\r\nBut I like @Jon Skeets solution in https://stackoverflow.com/a/3760193/1237974 also. For maintainability in larger projects where not everyone are equally experienced in Regular expressions I would probably use Jons solution.\r\n\r\n\r\n  [1]: https://stackoverflow.com/a/3761521/1237974","title":"Split string to equal length substrings in Java","body":"<p>I asked @Alan Moore in a comment to the <a href=\"https://stackoverflow.com/a/3761521/1237974\">accepted solution</a> how strings with newlines could be handled. He suggested using DOTALL.</p>\n\n<p>Using his suggestion I created a small sample of how that works:</p>\n\n<pre><code>public void regexDotAllExample() throws UnsupportedEncodingException {\n    final String input = \"The\\nquick\\nbrown\\r\\nfox\\rjumps\";\n    final String regex = \"(?&lt;=\\\\G.{4})\";\n\n    Pattern splitByLengthPattern;\n    String[] split;\n\n    splitByLengthPattern = Pattern.compile(regex);\n    split = splitByLengthPattern.split(input);\n    System.out.println(\"---- Without DOTALL ----\");\n    for (int i = 0; i &lt; split.length; i++) {\n        byte[] s = split[i].getBytes(\"utf-8\");\n        System.out.println(\"[Idx: \"+i+\", length: \"+s.length+\"] - \" + s);\n    }\n    /* Output is a single entry longer than the desired split size:\n    ---- Without DOTALL ----\n    [Idx: 0, length: 26] - [B@17cdc4a5\n     */\n\n\n    //DOTALL suggested in Alan Moores comment on SO: https://stackoverflow.com/a/3761521/1237974\n    splitByLengthPattern = Pattern.compile(regex, Pattern.DOTALL);\n    split = splitByLengthPattern.split(input);\n    System.out.println(\"---- With DOTALL ----\");\n    for (int i = 0; i &lt; split.length; i++) {\n        byte[] s = split[i].getBytes(\"utf-8\");\n        System.out.println(\"[Idx: \"+i+\", length: \"+s.length+\"] - \" + s);\n    }\n    /* Output is as desired 7 entries with each entry having a max length of 4:\n    ---- With DOTALL ----\n    [Idx: 0, length: 4] - [B@77b22abc\n    [Idx: 1, length: 4] - [B@5213da08\n    [Idx: 2, length: 4] - [B@154f6d51\n    [Idx: 3, length: 4] - [B@1191ebc5\n    [Idx: 4, length: 4] - [B@30ddb86\n    [Idx: 5, length: 4] - [B@2c73bfb\n    [Idx: 6, length: 2] - [B@6632dd29\n     */\n\n}\n</code></pre>\n\n<p>But I like @Jon Skeets solution in <a href=\"https://stackoverflow.com/a/3760193/1237974\">https://stackoverflow.com/a/3760193/1237974</a> also. For maintainability in larger projects where not everyone are equally experienced in Regular expressions I would probably use Jons solution.</p>\n"},{"tags":[],"owner":{"account_id":4519346,"reputation":1,"user_id":3673121,"display_name":"Hubbly"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1431495654,"creation_date":1431495654,"answer_id":30206533,"question_id":3760152,"body_markdown":"Another brute force solution could be, \r\n\r\n    \tString input = &quot;thequickbrownfoxjumps&quot;;\r\n    \tint n = input.length()/4;\r\n    \tString[] num = new String[n];\r\n    \t\r\n    \tfor(int i = 0, x=0, y=4; i&lt;n; i++){\r\n    \tnum[i]\t= input.substring(x,y);\r\n    \tx += 4;\r\n    \ty += 4;\r\n    \tSystem.out.println(num[i]);\r\n    \t}\r\nWhere the code just steps through the string with substrings","title":"Split string to equal length substrings in Java","body":"<p>Another brute force solution could be, </p>\n\n<pre><code>    String input = \"thequickbrownfoxjumps\";\n    int n = input.length()/4;\n    String[] num = new String[n];\n\n    for(int i = 0, x=0, y=4; i&lt;n; i++){\n    num[i]  = input.substring(x,y);\n    x += 4;\n    y += 4;\n    System.out.println(num[i]);\n    }\n</code></pre>\n\n<p>Where the code just steps through the string with substrings</p>\n"},{"tags":[],"owner":{"account_id":4797805,"reputation":149,"user_id":3875213,"display_name":"Cheetah Coder"},"down_vote_count":2,"up_vote_count":5,"is_accepted":false,"score":3,"last_activity_date":1454849351,"creation_date":1454849351,"answer_id":35253673,"question_id":3760152,"body_markdown":"I&#39;d rather this simple solution:\r\n\r\n    String content = &quot;Thequickbrownfoxjumps&quot;;\r\n    while(content.length() &gt; 4) {\r\n        System.out.println(content.substring(0, 4));\r\n        content = content.substring(4);\r\n    }\r\n    System.out.println(content);\r\n","title":"Split string to equal length substrings in Java","body":"<p>I'd rather this simple solution:</p>\n\n<pre><code>String content = \"Thequickbrownfoxjumps\";\nwhile(content.length() &gt; 4) {\n    System.out.println(content.substring(0, 4));\n    content = content.substring(4);\n}\nSystem.out.println(content);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":4773526,"reputation":844,"user_id":4357087,"accept_rate":55,"display_name":"Joseph Tesfaye"},"down_vote_count":1,"up_vote_count":2,"is_accepted":false,"score":1,"last_activity_date":1498810190,"creation_date":1498810190,"answer_id":44841699,"question_id":3760152,"body_markdown":"In case you want to split the string equally backwards, i.e. from right to left, for example, to split ``1010001111`` to ``[10, 1000, 1111]``, here&#39;s the code:\r\n\r\n    /**\r\n     * @param s         the string to be split\r\n     * @param subLen    length of the equal-length substrings.\r\n     * @param backwards true if the splitting is from right to left, false otherwise\r\n     * @return an array of equal-length substrings\r\n     * @throws ArithmeticException: / by zero when subLen == 0\r\n     */\r\n    public static String[] split(String s, int subLen, boolean backwards) {\r\n        assert s != null;\r\n        int groups = s.length() % subLen == 0 ? s.length() / subLen : s.length() / subLen + 1;\r\n        String[] strs = new String[groups];\r\n        if (backwards) {\r\n            for (int i = 0; i &lt; groups; i++) {\r\n                int beginIndex = s.length() - subLen * (i + 1);\r\n                int endIndex = beginIndex + subLen;\r\n                if (beginIndex &lt; 0)\r\n                    beginIndex = 0;\r\n                strs[groups - i - 1] = s.substring(beginIndex, endIndex);\r\n            }\r\n        } else {\r\n            for (int i = 0; i &lt; groups; i++) {\r\n                int beginIndex = subLen * i;\r\n                int endIndex = beginIndex + subLen;\r\n                if (endIndex &gt; s.length())\r\n                    endIndex = s.length();\r\n                strs[i] = s.substring(beginIndex, endIndex);\r\n            }\r\n        }\r\n        return strs;\r\n    }\r\n","title":"Split string to equal length substrings in Java","body":"<p>In case you want to split the string equally backwards, i.e. from right to left, for example, to split <code>1010001111</code> to <code>[10, 1000, 1111]</code>, here's the code:</p>\n\n<pre><code>/**\n * @param s         the string to be split\n * @param subLen    length of the equal-length substrings.\n * @param backwards true if the splitting is from right to left, false otherwise\n * @return an array of equal-length substrings\n * @throws ArithmeticException: / by zero when subLen == 0\n */\npublic static String[] split(String s, int subLen, boolean backwards) {\n    assert s != null;\n    int groups = s.length() % subLen == 0 ? s.length() / subLen : s.length() / subLen + 1;\n    String[] strs = new String[groups];\n    if (backwards) {\n        for (int i = 0; i &lt; groups; i++) {\n            int beginIndex = s.length() - subLen * (i + 1);\n            int endIndex = beginIndex + subLen;\n            if (beginIndex &lt; 0)\n                beginIndex = 0;\n            strs[groups - i - 1] = s.substring(beginIndex, endIndex);\n        }\n    } else {\n        for (int i = 0; i &lt; groups; i++) {\n            int beginIndex = subLen * i;\n            int endIndex = beginIndex + subLen;\n            if (endIndex &gt; s.length())\n                endIndex = s.length();\n            strs[i] = s.substring(beginIndex, endIndex);\n        }\n    }\n    return strs;\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":5266908,"reputation":29,"user_id":4206531,"display_name":"Adrian-Bogdan Ionescu"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1499783008,"creation_date":1499783008,"answer_id":45037281,"question_id":3760152,"body_markdown":"    @Test\r\n    public void regexSplit() {\r\n        String source = &quot;Thequickbrownfoxjumps&quot;;\r\n        // define matcher, any char, min length 1, max length 4\r\n        Matcher matcher = Pattern.compile(&quot;.{1,4}&quot;).matcher(source);\r\n        List&lt;String&gt; result = new ArrayList&lt;&gt;();\r\n        while (matcher.find()) {\r\n            result.add(source.substring(matcher.start(), matcher.end()));\r\n        }\r\n        String[] expected = {&quot;Theq&quot;, &quot;uick&quot;, &quot;brow&quot;, &quot;nfox&quot;, &quot;jump&quot;, &quot;s&quot;};\r\n        assertArrayEquals(result.toArray(), expected);\r\n    }","title":"Split string to equal length substrings in Java","body":"<pre><code>@Test\npublic void regexSplit() {\n    String source = \"Thequickbrownfoxjumps\";\n    // define matcher, any char, min length 1, max length 4\n    Matcher matcher = Pattern.compile(\".{1,4}\").matcher(source);\n    List&lt;String&gt; result = new ArrayList&lt;&gt;();\n    while (matcher.find()) {\n        result.add(source.substring(matcher.start(), matcher.end()));\n    }\n    String[] expected = {\"Theq\", \"uick\", \"brow\", \"nfox\", \"jump\", \"s\"};\n    assertArrayEquals(result.toArray(), expected);\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1844706,"reputation":3419,"user_id":1673320,"accept_rate":86,"display_name":"itachi"},"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1531819769,"creation_date":1528636485,"answer_id":50784066,"question_id":3760152,"body_markdown":"Here is my version based on RegEx and Java 8 streams. It&#39;s worth to mention that `Matcher.results()` method is available since Java 9.\r\n\r\nTest included.\r\n\r\n    public static List&lt;String&gt; splitString(String input, int splitSize) {\r\n        Matcher matcher = Pattern.compile(&quot;(?:(.{&quot; + splitSize + &quot;}))+?&quot;).matcher(input);\r\n        return matcher.results().map(MatchResult::group).collect(Collectors.toList());\r\n    }\r\n\r\n    @Test\r\n    public void shouldSplitStringToEqualLengthParts() {\r\n        String anyValidString = &quot;Split me equally!&quot;;\r\n        String[] expectedTokens2 = {&quot;Sp&quot;, &quot;li&quot;, &quot;t &quot;, &quot;me&quot;, &quot; e&quot;, &quot;qu&quot;, &quot;al&quot;, &quot;ly&quot;};\r\n        String[] expectedTokens3 = {&quot;Spl&quot;, &quot;it &quot;, &quot;me &quot;, &quot;equ&quot;, &quot;all&quot;};\r\n\r\n        Assert.assertArrayEquals(expectedTokens2, splitString(anyValidString, 2).toArray());\r\n        Assert.assertArrayEquals(expectedTokens3, splitString(anyValidString, 3).toArray());\r\n    }","title":"Split string to equal length substrings in Java","body":"<p>Here is my version based on RegEx and Java 8 streams. It's worth to mention that <code>Matcher.results()</code> method is available since Java 9.</p>\n\n<p>Test included.</p>\n\n<pre><code>public static List&lt;String&gt; splitString(String input, int splitSize) {\n    Matcher matcher = Pattern.compile(\"(?:(.{\" + splitSize + \"}))+?\").matcher(input);\n    return matcher.results().map(MatchResult::group).collect(Collectors.toList());\n}\n\n@Test\npublic void shouldSplitStringToEqualLengthParts() {\n    String anyValidString = \"Split me equally!\";\n    String[] expectedTokens2 = {\"Sp\", \"li\", \"t \", \"me\", \" e\", \"qu\", \"al\", \"ly\"};\n    String[] expectedTokens3 = {\"Spl\", \"it \", \"me \", \"equ\", \"all\"};\n\n    Assert.assertArrayEquals(expectedTokens2, splitString(anyValidString, 2).toArray());\n    Assert.assertArrayEquals(expectedTokens3, splitString(anyValidString, 3).toArray());\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":434437,"reputation":15453,"user_id":820410,"accept_rate":60,"display_name":"Pankaj Singhal"},"down_vote_count":2,"up_vote_count":3,"is_accepted":false,"score":1,"last_activity_date":1531643270,"creation_date":1531643270,"answer_id":51346646,"question_id":3760152,"body_markdown":"Here is a one liner implementation using Java8 streams:\r\n\r\n\r\n    String input = &quot;Thequickbrownfoxjumps&quot;;\r\n    final AtomicInteger atomicInteger = new AtomicInteger(0);\r\n    Collection&lt;String&gt; result = input.chars()\r\n                                        .mapToObj(c -&gt; String.valueOf((char)c) )\r\n                                        .collect(Collectors.groupingBy(c -&gt; atomicInteger.getAndIncrement() / 4\r\n                                                                    ,Collectors.joining()))\r\n                                        .values();\r\n\r\nIt gives the following output:\r\n\r\n    [Theq, uick, brow, nfox, jump, s]","title":"Split string to equal length substrings in Java","body":"<p>Here is a one liner implementation using Java8 streams:</p>\n\n<pre><code>String input = \"Thequickbrownfoxjumps\";\nfinal AtomicInteger atomicInteger = new AtomicInteger(0);\nCollection&lt;String&gt; result = input.chars()\n                                    .mapToObj(c -&gt; String.valueOf((char)c) )\n                                    .collect(Collectors.groupingBy(c -&gt; atomicInteger.getAndIncrement() / 4\n                                                                ,Collectors.joining()))\n                                    .values();\n</code></pre>\n\n<p>It gives the following output:</p>\n\n<pre><code>[Theq, uick, brow, nfox, jump, s]\n</code></pre>\n"},{"tags":[],"owner":{"account_id":12931671,"reputation":144,"user_id":9350512,"display_name":"rloeffel"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1536755875,"creation_date":1536755875,"answer_id":52295387,"question_id":3760152,"body_markdown":"i use the following java 8 solution:\r\n    \r\n    public static List&lt;String&gt; splitString(final String string, final int chunkSize) {\r\n      final int numberOfChunks = (string.length() + chunkSize - 1) / chunkSize;\r\n      return IntStream.range(0, numberOfChunks)\r\n                      .mapToObj(index -&gt; string.substring(index * chunkSize, Math.min((index + 1) * chunkSize, string.length())))\r\n                      .collect(toList());\r\n    }","title":"Split string to equal length substrings in Java","body":"<p>i use the following java 8 solution:</p>\n\n<pre><code>public static List&lt;String&gt; splitString(final String string, final int chunkSize) {\n  final int numberOfChunks = (string.length() + chunkSize - 1) / chunkSize;\n  return IntStream.range(0, numberOfChunks)\n                  .mapToObj(index -&gt; string.substring(index * chunkSize, Math.min((index + 1) * chunkSize, string.length())))\n                  .collect(toList());\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":11742596,"reputation":376,"user_id":8594421,"display_name":"User8461"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1551872812,"creation_date":1551869667,"answer_id":55021355,"question_id":3760152,"body_markdown":"    public static String[] split(String input, int length) throws IllegalArgumentException {\r\n\r\n        if(length == 0 || input == null)\r\n            return new String[0];\r\n\r\n        int lengthD = length * 2;\r\n\r\n        int size = input.length();\r\n        if(size == 0)\r\n            return new String[0];\r\n\r\n        int rep = (int) Math.ceil(size * 1d / length);\r\n\r\n        ByteArrayInputStream stream = new ByteArrayInputStream(input.getBytes(StandardCharsets.UTF_16LE));\r\n\r\n        String[] out = new String[rep];\r\n        byte[]  buf = new byte[lengthD];\r\n\r\n        int d = 0;\r\n        for (int i = 0; i &lt; rep; i++) {\r\n\r\n            try {\r\n                d = stream.read(buf);\r\n            } catch (IOException e) {\r\n                e.printStackTrace();\r\n            }\r\n\r\n            if(d != lengthD)\r\n            {\r\n                out[i] = new String(buf,0,d, StandardCharsets.UTF_16LE);\r\n                continue;\r\n            }\r\n\r\n            out[i] = new String(buf, StandardCharsets.UTF_16LE);\r\n        }\r\n        return out;\r\n    }","title":"Split string to equal length substrings in Java","body":"<pre><code>public static String[] split(String input, int length) throws IllegalArgumentException {\n\n    if(length == 0 || input == null)\n        return new String[0];\n\n    int lengthD = length * 2;\n\n    int size = input.length();\n    if(size == 0)\n        return new String[0];\n\n    int rep = (int) Math.ceil(size * 1d / length);\n\n    ByteArrayInputStream stream = new ByteArrayInputStream(input.getBytes(StandardCharsets.UTF_16LE));\n\n    String[] out = new String[rep];\n    byte[]  buf = new byte[lengthD];\n\n    int d = 0;\n    for (int i = 0; i &lt; rep; i++) {\n\n        try {\n            d = stream.read(buf);\n        } catch (IOException e) {\n            e.printStackTrace();\n        }\n\n        if(d != lengthD)\n        {\n            out[i] = new String(buf,0,d, StandardCharsets.UTF_16LE);\n            continue;\n        }\n\n        out[i] = new String(buf, StandardCharsets.UTF_16LE);\n    }\n    return out;\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":102066,"reputation":5017,"user_id":274205,"accept_rate":75,"display_name":"Timofey Gorshkov"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1552393721,"creation_date":1552393721,"answer_id":55121482,"question_id":3760152,"body_markdown":"Java 8 solution (like [this][1] but a bit simpler):\r\n``` lang-java\r\npublic static List&lt;String&gt; partition(String string, int partSize) {\r\n  List&lt;String&gt; parts = IntStream.range(0, string.length() / partSize)\r\n    .mapToObj(i -&gt; string.substring(i * partSize, (i + 1) * partSize))\r\n    .collect(toList());\r\n  if ((string.length() % partSize) != 0)\r\n    parts.add(string.substring(string.length() / partSize * partSize));\r\n  return parts;\r\n}\r\n```\r\n\r\n  [1]: https://stackoverflow.com/a/52295387/274205","title":"Split string to equal length substrings in Java","body":"<p>Java 8 solution (like <a href=\"https://stackoverflow.com/a/52295387/274205\">this</a> but a bit simpler):</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>public static List&lt;String&gt; partition(String string, int partSize) {\n  List&lt;String&gt; parts = IntStream.range(0, string.length() / partSize)\n    .mapToObj(i -&gt; string.substring(i * partSize, (i + 1) * partSize))\n    .collect(toList());\n  if ((string.length() % partSize) != 0)\n    parts.add(string.substring(string.length() / partSize * partSize));\n  return parts;\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":6735938,"reputation":182,"user_id":5190752,"display_name":"Raj Hirani"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1561091663,"creation_date":1561091663,"answer_id":56696886,"question_id":3760152,"body_markdown":"    public static List&lt;String&gt; getSplittedString(String stringtoSplit,\r\n    \t\t\tint length) {\r\n    \r\n    \t\tList&lt;String&gt; returnStringList = new ArrayList&lt;String&gt;(\r\n    \t\t\t\t(stringtoSplit.length() + length - 1) / length);\r\n    \r\n    \t\tfor (int start = 0; start &lt; stringtoSplit.length(); start += length) {\r\n    \t\t\treturnStringList.add(stringtoSplit.substring(start,\r\n    \t\t\t\t\tMath.min(stringtoSplit.length(), start + length)));\r\n    \t\t}\r\n    \r\n    \t\treturn returnStringList;\r\n    \t}","title":"Split string to equal length substrings in Java","body":"<pre><code>public static List&lt;String&gt; getSplittedString(String stringtoSplit,\n            int length) {\n\n        List&lt;String&gt; returnStringList = new ArrayList&lt;String&gt;(\n                (stringtoSplit.length() + length - 1) / length);\n\n        for (int start = 0; start &lt; stringtoSplit.length(); start += length) {\n            returnStringList.add(stringtoSplit.substring(start,\n                    Math.min(stringtoSplit.length(), start + length)));\n        }\n\n        return returnStringList;\n    }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1174647,"reputation":1850,"user_id":1150936,"accept_rate":25,"display_name":"Marko Previsic"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1561563874,"creation_date":1561100608,"answer_id":56698445,"question_id":3760152,"body_markdown":"Here&#39;s a **one-liner** version which uses **Java 8** [IntStream][1] to determine the indexes of the slice beginnings:\r\n\r\n    String x = &quot;Thequickbrownfoxjumps&quot;;\r\n\r\n    String[] result = IntStream\r\n                        .iterate(0, i -&gt; i + 4)\r\n                        .limit((int) Math.ceil(x.length() / 4.0))\r\n                        .mapToObj(i -&gt;\r\n                            x.substring(i, Math.min(i + 4, x.length())\r\n                        )\r\n                        .toArray(String[]::new);\r\n\r\n[1]: https://docs.oracle.com/javase/8/docs/api/java/util/stream/IntStream.html","title":"Split string to equal length substrings in Java","body":"<p>Here's a <strong>one-liner</strong> version which uses <strong>Java 8</strong> <a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/stream/IntStream.html\" rel=\"nofollow noreferrer\">IntStream</a> to determine the indexes of the slice beginnings:</p>\n\n<pre><code>String x = \"Thequickbrownfoxjumps\";\n\nString[] result = IntStream\n                    .iterate(0, i -&gt; i + 4)\n                    .limit((int) Math.ceil(x.length() / 4.0))\n                    .mapToObj(i -&gt;\n                        x.substring(i, Math.min(i + 4, x.length())\n                    )\n                    .toArray(String[]::new);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1461157,"reputation":2027,"user_id":1375455,"accept_rate":93,"display_name":"FSm"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1602494568,"creation_date":1602494568,"answer_id":64315043,"question_id":3760152,"body_markdown":"A `StringBuilder` version:\r\n\r\n    public static List&lt;String&gt; getChunks(String s, int chunkSize)\r\n    {\r\n     List&lt;String&gt; chunks = new ArrayList&lt;&gt;();\r\n     StringBuilder sb = new StringBuilder(s);\r\n\r\n    while(!(sb.length() ==0)) \r\n    {           \r\n       chunks.add(sb.substring(0, chunkSize));\r\n       sb.delete(0, chunkSize);\r\n\r\n    }\r\n    return chunks;\r\n}","title":"Split string to equal length substrings in Java","body":"<p>A <code>StringBuilder</code> version:</p>\n<pre><code>public static List&lt;String&gt; getChunks(String s, int chunkSize)\n{\n List&lt;String&gt; chunks = new ArrayList&lt;&gt;();\n StringBuilder sb = new StringBuilder(s);\n\nwhile(!(sb.length() ==0)) \n{           \n   chunks.add(sb.substring(0, chunkSize));\n   sb.delete(0, chunkSize);\n\n}\nreturn chunks;\n</code></pre>\n<p>}</p>\n"},{"tags":[],"owner":{"account_id":322981,"reputation":310745,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1618527247,"creation_date":1618526614,"answer_id":67116874,"question_id":3760152,"body_markdown":"# Use code points to handle all characters\r\n\r\nHere is a solution:\r\n\r\n- Works with all 143,859 [Unicode][1] characters\r\n- Allows you to examine or manipulate each resulting string, if you have further logic to process.\r\n\r\nTo work with all Unicode characters, avoid the obsolete `char` type. And avoid `char`-based utilities. Instead, use [code point][2] integer numbers. \r\n\r\nCall [`String#codePoints`][3] to get an [`IntStream`][4] object, a stream of `int` values. In the code below, we collect those `int` values into an array. Then we loop the array, for each integer we append the character assigned to that number to our [`StringBuilder`][5] object. Every nth character, we add a string to our master list, and empty the `StringBuilder`. \r\n\r\n```java\r\nString input = &quot;Thequickbrownfoxjumps&quot;;\r\n\r\nint chunkSize = 4 ;\r\nint[] codePoints = input.codePoints().toArray();  // `String#codePoints` returns an `IntStream`. Collect the elements of that stream into an array.\r\nint initialCapacity = ( ( codePoints.length / chunkSize ) + 1 );\r\nList &lt; String &gt; strings = new ArrayList &lt;&gt;( initialCapacity );\r\n\r\nStringBuilder sb = new StringBuilder();\r\nfor ( int i = 0 ; i &lt; codePoints.length ; i++ )\r\n{\r\n    sb.appendCodePoint( codePoints[ i ] );\r\n    if ( 0 == ( ( i + 1 ) % chunkSize ) ) // Every nth code point.\r\n    {\r\n        strings.add( sb.toString() ); // Remember this iteration&#39;s value.\r\n        sb.setLength( 0 ); // Clear the contents of the `StringBuilder` object.\r\n    }\r\n}\r\nif ( sb.length() &gt; 0 ) // If partial string leftover, save it too. Or not… just delete this `if` block.\r\n{\r\n    strings.add( sb.toString() ); // Remember last iteration&#39;s value.\r\n}\r\n\r\nSystem.out.println( &quot;strings = &quot; + strings );\r\n```\r\n\r\n&gt;strings = [Theq, uick, brow, nfox, jump, s]\r\n\r\nThis works with non-Latin characters. Here we replace `q` with [FACE WITH MEDICAL MASK][6].\r\n\r\n```java\r\nString text = &quot;The&#128567;uickbrownfoxjumps&quot;\r\n```\r\n\r\n&gt;strings = [The&#128567;, uick, brow, nfox, jump, s]\r\n\r\n\r\n  [1]: https://en.wikipedia.org/wiki/Unicode\r\n  [2]: https://en.wikipedia.org/wiki/Code_point\r\n  [3]: https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/String.html#codePoints()\r\n  [4]: https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/stream/IntStream.html\r\n  [5]: https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/StringBuilder.html\r\n  [6]: https://codepoints.net/U+1F637","title":"Split string to equal length substrings in Java","body":"<h1>Use code points to handle all characters</h1>\n<p>Here is a solution:</p>\n<ul>\n<li>Works with all 143,859 <a href=\"https://en.wikipedia.org/wiki/Unicode\" rel=\"nofollow noreferrer\">Unicode</a> characters</li>\n<li>Allows you to examine or manipulate each resulting string, if you have further logic to process.</li>\n</ul>\n<p>To work with all Unicode characters, avoid the obsolete <code>char</code> type. And avoid <code>char</code>-based utilities. Instead, use <a href=\"https://en.wikipedia.org/wiki/Code_point\" rel=\"nofollow noreferrer\">code point</a> integer numbers.</p>\n<p>Call <a href=\"https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/String.html#codePoints()\" rel=\"nofollow noreferrer\"><code>String#codePoints</code></a> to get an <a href=\"https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/stream/IntStream.html\" rel=\"nofollow noreferrer\"><code>IntStream</code></a> object, a stream of <code>int</code> values. In the code below, we collect those <code>int</code> values into an array. Then we loop the array, for each integer we append the character assigned to that number to our <a href=\"https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/StringBuilder.html\" rel=\"nofollow noreferrer\"><code>StringBuilder</code></a> object. Every nth character, we add a string to our master list, and empty the <code>StringBuilder</code>.</p>\n<pre class=\"lang-java prettyprint-override\"><code>String input = &quot;Thequickbrownfoxjumps&quot;;\n\nint chunkSize = 4 ;\nint[] codePoints = input.codePoints().toArray();  // `String#codePoints` returns an `IntStream`. Collect the elements of that stream into an array.\nint initialCapacity = ( ( codePoints.length / chunkSize ) + 1 );\nList &lt; String &gt; strings = new ArrayList &lt;&gt;( initialCapacity );\n\nStringBuilder sb = new StringBuilder();\nfor ( int i = 0 ; i &lt; codePoints.length ; i++ )\n{\n    sb.appendCodePoint( codePoints[ i ] );\n    if ( 0 == ( ( i + 1 ) % chunkSize ) ) // Every nth code point.\n    {\n        strings.add( sb.toString() ); // Remember this iteration's value.\n        sb.setLength( 0 ); // Clear the contents of the `StringBuilder` object.\n    }\n}\nif ( sb.length() &gt; 0 ) // If partial string leftover, save it too. Or not… just delete this `if` block.\n{\n    strings.add( sb.toString() ); // Remember last iteration's value.\n}\n\nSystem.out.println( &quot;strings = &quot; + strings );\n</code></pre>\n<blockquote>\n<p>strings = [Theq, uick, brow, nfox, jump, s]</p>\n</blockquote>\n<p>This works with non-Latin characters. Here we replace <code>q</code> with <a href=\"https://codepoints.net/U+1F637\" rel=\"nofollow noreferrer\">FACE WITH MEDICAL MASK</a>.</p>\n<pre class=\"lang-java prettyprint-override\"><code>String text = &quot;The😷uickbrownfoxjumps&quot;\n</code></pre>\n<blockquote>\n<p>strings = [The😷, uick, brow, nfox, jump, s]</p>\n</blockquote>\n"},{"tags":[],"owner":{"account_id":13118858,"reputation":6035,"user_id":9477038,"display_name":"Jackkobec"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1637379358,"creation_date":1637379358,"answer_id":70043058,"question_id":3760152,"body_markdown":"The simplest solution is:\r\n\r\n      /**\r\n       * Slices string by passed - in slice length.\r\n       * If passed - in string is null or slice length less then 0 throws IllegalArgumentException.\r\n       * @param toSlice string to slice\r\n       * @param sliceLength slice length\r\n       * @return List of slices\r\n       */\r\n      public static List&lt;String&gt; stringSlicer(String toSlice, int sliceLength) {\r\n        if (toSlice == null) {\r\n          throw new IllegalArgumentException(&quot;Passed - in string is null&quot;);\r\n        }\r\n        if (sliceLength &lt; 0) {\r\n          throw new IllegalArgumentException(&quot;Slice length can not be less then 0&quot;);\r\n        }\r\n        if (toSlice.isEmpty() || toSlice.length() &lt;= sliceLength) {\r\n          return List.of(toSlice);\r\n        }\r\n        \r\n       return Arrays.stream(toSlice.split(String.format(&quot;(?s)(?&lt;=\\\\G.{%d})&quot;, sliceLength))).collect(Collectors.toList());\r\n      }","title":"Split string to equal length substrings in Java","body":"<p>The simplest solution is:</p>\n<pre><code>  /**\n   * Slices string by passed - in slice length.\n   * If passed - in string is null or slice length less then 0 throws IllegalArgumentException.\n   * @param toSlice string to slice\n   * @param sliceLength slice length\n   * @return List of slices\n   */\n  public static List&lt;String&gt; stringSlicer(String toSlice, int sliceLength) {\n    if (toSlice == null) {\n      throw new IllegalArgumentException(&quot;Passed - in string is null&quot;);\n    }\n    if (sliceLength &lt; 0) {\n      throw new IllegalArgumentException(&quot;Slice length can not be less then 0&quot;);\n    }\n    if (toSlice.isEmpty() || toSlice.length() &lt;= sliceLength) {\n      return List.of(toSlice);\n    }\n    \n   return Arrays.stream(toSlice.split(String.format(&quot;(?s)(?&lt;=\\\\G.{%d})&quot;, sliceLength))).collect(Collectors.toList());\n  }\n</code></pre>\n"}],"owner":{"account_id":117125,"reputation":13617,"user_id":306855,"accept_rate":73,"display_name":"Emil"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":212555,"favorite_count":0,"down_vote_count":0,"up_vote_count":153,"accepted_answer_id":3761521,"answer_count":23,"score":153,"last_activity_date":1637379358,"creation_date":1285071250,"question_id":3760152,"body_markdown":"How to split the string `&quot;Thequickbrownfoxjumps&quot;` to substrings of equal size in Java.\r\nEg. `&quot;Thequickbrownfoxjumps&quot;` of 4 equal size should give the output.\r\n\r\n    [&quot;Theq&quot;,&quot;uick&quot;,&quot;brow&quot;,&quot;nfox&quot;,&quot;jump&quot;,&quot;s&quot;]\r\n\r\n**Similar Question:**\r\n\r\n[Split string into equal-length substrings in Scala][1]\r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/3699725/split-string-into-equal-length-substrings-in-scala","title":"Split string to equal length substrings in Java","body":"<p>How to split the string <code>\"Thequickbrownfoxjumps\"</code> to substrings of equal size in Java.\nEg. <code>\"Thequickbrownfoxjumps\"</code> of 4 equal size should give the output.</p>\n\n<pre><code>[\"Theq\",\"uick\",\"brow\",\"nfox\",\"jump\",\"s\"]\n</code></pre>\n\n<p><strong>Similar Question:</strong></p>\n\n<p><a href=\"https://stackoverflow.com/questions/3699725/split-string-into-equal-length-substrings-in-scala\">Split string into equal-length substrings in Scala</a></p>\n"},{"tags":["java"],"answers":[{"tags":[],"owner":{"account_id":5449795,"reputation":2687,"user_id":6352160,"accept_rate":75,"display_name":"Shankar"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1637379146,"creation_date":1637379146,"answer_id":70043044,"question_id":70042943,"body_markdown":"You are seeing the exception because of [Generics in Java][1].\r\n\r\nYour ArrayList is declared to take Events objects.\r\n\r\n    ArrayList&lt;Events&gt; events = new ArrayList&lt;&gt;();\r\n\r\nHowever, you are trying to add a String object to it.\r\n\r\n    String data = inFile.next();\r\n    events.add(data); //Cannot add a String object, only Events object allowed.\r\n\r\nOne way to fix this is to create an Events object using the String, and then add to the Arraylist. I am assuming each line has Event name and String in it, separated by a comma.\r\n\r\n    //Get your event name and tickets from the String data.\r\n    String tokens[] = data.split(&quot;,&quot;);\r\n    String eventName = tokens[0];\r\n    String ticketsBought = tokens[1];\r\n    //create an events object\r\n    Events eventObj = new Events(eventName, ticketsBought);\r\n    //Now add to your arraylist.\r\n    events.add(eventObj);\r\n\r\nAs an aside, you do not need to extend SortedArrayList in MainProgram. The main class is usually top level class in your project, and it will only contain objects (this is a common practice). If you want to use the new logic you have added in SortedArrayList, then instead of creating `ArrayList&lt;Events&gt; events = new ArrayList&lt;&gt;();`, you can create `SortedArrayList&lt;Events&gt; events = new SortedArrayList&lt;&gt;();`\r\n    \r\n\r\n\r\n  [1]: https://docs.oracle.com/javase/tutorial/java/generics/why.html","title":"adding into an Array list of objects from a text file in java","body":"<p>You are seeing the exception because of <a href=\"https://docs.oracle.com/javase/tutorial/java/generics/why.html\" rel=\"nofollow noreferrer\">Generics in Java</a>.</p>\n<p>Your ArrayList is declared to take Events objects.</p>\n<pre><code>ArrayList&lt;Events&gt; events = new ArrayList&lt;&gt;();\n</code></pre>\n<p>However, you are trying to add a String object to it.</p>\n<pre><code>String data = inFile.next();\nevents.add(data); //Cannot add a String object, only Events object allowed.\n</code></pre>\n<p>One way to fix this is to create an Events object using the String, and then add to the Arraylist. I am assuming each line has Event name and String in it, separated by a comma.</p>\n<pre><code>//Get your event name and tickets from the String data.\nString tokens[] = data.split(&quot;,&quot;);\nString eventName = tokens[0];\nString ticketsBought = tokens[1];\n//create an events object\nEvents eventObj = new Events(eventName, ticketsBought);\n//Now add to your arraylist.\nevents.add(eventObj);\n</code></pre>\n<p>As an aside, you do not need to extend SortedArrayList in MainProgram. The main class is usually top level class in your project, and it will only contain objects (this is a common practice). If you want to use the new logic you have added in SortedArrayList, then instead of creating <code>ArrayList&lt;Events&gt; events = new ArrayList&lt;&gt;();</code>, you can create <code>SortedArrayList&lt;Events&gt; events = new SortedArrayList&lt;&gt;();</code></p>\n"}],"owner":{"account_id":23370737,"reputation":11,"user_id":17441632,"display_name":"user17441632"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":673,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":1,"score":0,"last_activity_date":1637379146,"creation_date":1637377815,"question_id":70042943,"body_markdown":"i thinkj i have a type argument problem which im really confused about, Ive started with an Arraylist&lt;E&gt; which, extends to the another class with my main methods. and i have a Events class, which i want to categorize from the txt file, the main problem i have is adding from my txt file which iread into an ArrayList, java pops up with this error message\r\nincompatible types: java.lang.String cannot be converted to CSC8012.Events\r\nBut in my events it has String? Im really confused\r\nThis is my generic arraylist i think?\r\n\r\n\r\n    import java.util.ArrayList;\r\n\r\n\r\n    public class SortedArrayList&lt;E extends Comparable&gt; extends \r\n    ArrayList&lt;E&gt; {\r\n\r\n    public void insert(E e) {\r\n        this.add(e);\r\n        int lastIndex = 0;\r\n        for( lastIndex = this.size() -1 ; lastIndex &gt; 0 &amp;&amp; this.get(lastIndex-1).compareTo(e) &gt; 0 ; lastIndex--){\r\n            this.set(lastIndex, this.get(lastIndex-1));\r\n        }\r\n        this.set(lastIndex,e);\r\n    }\r\n}\r\n\r\nHeres my events class objects\r\n\r\n    public class Events implements Comparable&lt;Events&gt;{\r\n    //fields setting up the variables\r\n    String  ticketsbought;\r\n    String eventname;\r\n\r\n\r\n    public Events(String  ticketsbought, String eventname ){\r\n        this.ticketsbought = ticketsbought;\r\n        this.eventname = eventname;\r\n    }\r\n\r\n    @Override\r\n    public int compareTo (Events E){\r\n        return\r\n                ticketsbought.compareTo(E.getTicketsbought()) + eventname.compareTo(E.getEventname());\r\n    }\r\n\r\n    public String getTicketsbought() {\r\n        return ticketsbought;\r\n    }\r\n\r\n    public String getEventname() {\r\n        return eventname;\r\n    }\r\n\r\n    //setting it up for the main method from the constructor fields above\r\n\r\n\r\n\r\n    public void setTicketsbought(String  ticketsbought) {\r\n\r\n        this.ticketsbought = ticketsbought;\r\n    }\r\n\r\n\r\n    public void setEventname(String eventname) {\r\n\r\n        this.eventname = eventname;\r\n    }\r\n\r\n\r\n    @Override\r\n    public String toString()\r\n    {\r\n\r\n        return &quot;Tickets bought &quot; + this.ticketsbought + &quot;Event name &quot; + this.eventname;\r\n    }\r\n\r\n\r\n\r\n}\r\n\r\n\r\n\r\nMy main menu class\r\n\r\n    import java.io.FileNotFoundException;\r\n    import java.io.FileReader;\r\n    import java.util.Objects;\r\n\r\n    import java.util.ArrayList;\r\n\r\n    import java.util.Collections;\r\n    java.util.Scanner;\r\n\r\n    public class MainProgram extends SortedArrayList{\r\n\r\n    public static void main(String[] args)  throws FileNotFoundException{\r\n\r\n\r\n\r\n        boolean bye = false;\r\n        String line;\r\n        String option;\r\n        Scanner sc = new Scanner(System.in); //tos take in our input\r\n        do{\r\n\r\n\r\n\r\n\r\n            System.out.println(&quot;Choose an option..&quot;); // heres our options\r\n            System.out.println(&quot;e Information on all events&quot;);\r\n            System.out.println(&quot;c All information on clients&quot;);\r\n            System.out.println(&quot;f to quit&quot;);\r\n            System.out.println(&quot;b to update when tickets are bought by a registered Client&quot;);\r\n            System.out.println(&quot;r to update the stored data when a Client cancels a ticket&quot;);\r\n            option = sc.nextLine();\r\n\r\n            switch (option) { // these are splitting our inputs to these cases with different outcomes\r\n                case &quot;e&quot;:\r\n                    //System.out.println(&quot;information on events&quot;);\r\n\r\n                    Scanner inFile = new Scanner(new FileReader(&quot;input.txt&quot;));\r\n                    // Other declarations// Reading and processing the input data// Printing out the results outFile.close();\r\n                    ArrayList&lt;Events&gt; events = new ArrayList&lt;&gt;();\r\n\r\n\r\n                    while(inFile.hasNextLine()) {\r\n                        String data = inFile.next();\r\n\r\n\r\n                        events.add(data);//error based on these? Event is based off of arraylist&lt;E&gt; and inherits from those whilst i have them as string?\r\n","title":"adding into an Array list of objects from a text file in java","body":"<p>i thinkj i have a type argument problem which im really confused about, Ive started with an Arraylist which, extends to the another class with my main methods. and i have a Events class, which i want to categorize from the txt file, the main problem i have is adding from my txt file which iread into an ArrayList, java pops up with this error message\nincompatible types: java.lang.String cannot be converted to CSC8012.Events\nBut in my events it has String? Im really confused\nThis is my generic arraylist i think?</p>\n<pre><code>import java.util.ArrayList;\n\n\npublic class SortedArrayList&lt;E extends Comparable&gt; extends \nArrayList&lt;E&gt; {\n\npublic void insert(E e) {\n    this.add(e);\n    int lastIndex = 0;\n    for( lastIndex = this.size() -1 ; lastIndex &gt; 0 &amp;&amp; this.get(lastIndex-1).compareTo(e) &gt; 0 ; lastIndex--){\n        this.set(lastIndex, this.get(lastIndex-1));\n    }\n    this.set(lastIndex,e);\n}\n</code></pre>\n<p>}</p>\n<p>Heres my events class objects</p>\n<pre><code>public class Events implements Comparable&lt;Events&gt;{\n//fields setting up the variables\nString  ticketsbought;\nString eventname;\n\n\npublic Events(String  ticketsbought, String eventname ){\n    this.ticketsbought = ticketsbought;\n    this.eventname = eventname;\n}\n\n@Override\npublic int compareTo (Events E){\n    return\n            ticketsbought.compareTo(E.getTicketsbought()) + eventname.compareTo(E.getEventname());\n}\n\npublic String getTicketsbought() {\n    return ticketsbought;\n}\n\npublic String getEventname() {\n    return eventname;\n}\n\n//setting it up for the main method from the constructor fields above\n\n\n\npublic void setTicketsbought(String  ticketsbought) {\n\n    this.ticketsbought = ticketsbought;\n}\n\n\npublic void setEventname(String eventname) {\n\n    this.eventname = eventname;\n}\n\n\n@Override\npublic String toString()\n{\n\n    return &quot;Tickets bought &quot; + this.ticketsbought + &quot;Event name &quot; + this.eventname;\n}\n</code></pre>\n<p>}</p>\n<p>My main menu class</p>\n<pre><code>import java.io.FileNotFoundException;\nimport java.io.FileReader;\nimport java.util.Objects;\n\nimport java.util.ArrayList;\n\nimport java.util.Collections;\njava.util.Scanner;\n\npublic class MainProgram extends SortedArrayList{\n\npublic static void main(String[] args)  throws FileNotFoundException{\n\n\n\n    boolean bye = false;\n    String line;\n    String option;\n    Scanner sc = new Scanner(System.in); //tos take in our input\n    do{\n\n\n\n\n        System.out.println(&quot;Choose an option..&quot;); // heres our options\n        System.out.println(&quot;e Information on all events&quot;);\n        System.out.println(&quot;c All information on clients&quot;);\n        System.out.println(&quot;f to quit&quot;);\n        System.out.println(&quot;b to update when tickets are bought by a registered Client&quot;);\n        System.out.println(&quot;r to update the stored data when a Client cancels a ticket&quot;);\n        option = sc.nextLine();\n\n        switch (option) { // these are splitting our inputs to these cases with different outcomes\n            case &quot;e&quot;:\n                //System.out.println(&quot;information on events&quot;);\n\n                Scanner inFile = new Scanner(new FileReader(&quot;input.txt&quot;));\n                // Other declarations// Reading and processing the input data// Printing out the results outFile.close();\n                ArrayList&lt;Events&gt; events = new ArrayList&lt;&gt;();\n\n\n                while(inFile.hasNextLine()) {\n                    String data = inFile.next();\n\n\n                    events.add(data);//error based on these? Event is based off of arraylist&lt;E&gt; and inherits from those whilst i have them as string?\n</code></pre>\n"},{"tags":["java","maven","tomcat","deployment"],"comments":[{"owner":{"account_id":5170906,"reputation":2215,"user_id":4139442,"accept_rate":50,"display_name":"Vijendra Kumar Kulhade"},"score":0,"creation_date":1464856106,"post_id":37573459,"comment_id":62658472,"body_markdown":"This question covers the complete Enterprise application setup. It is very difficult to explain solution completely.","body":"This question covers the complete Enterprise application setup. It is very difficult to explain solution completely."},{"owner":{"account_id":4915405,"reputation":49,"user_id":3959462,"display_name":"Alok Singh"},"score":0,"creation_date":1464880541,"post_id":37573459,"comment_id":62676593,"body_markdown":"in that case do you have any tutorial which is cover these things ,i will g through that.\nor any documents if you have can you pls share ??","body":"in that case do you have any tutorial which is cover these things ,i will g through that. or any documents if you have can you pls share ??"},{"owner":{"account_id":7487560,"reputation":145,"user_id":5690287,"display_name":"Dhruv Singhal"},"score":0,"creation_date":1571138047,"post_id":37573459,"comment_id":103132553,"body_markdown":"Seems like a legit question to me... I wonder why it has downvotes","body":"Seems like a legit question to me... I wonder why it has downvotes"}],"answers":[{"tags":[],"owner":{"account_id":5170906,"reputation":2215,"user_id":4139442,"accept_rate":50,"display_name":"Vijendra Kumar Kulhade"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1464854137,"creation_date":1464797305,"answer_id":37573778,"question_id":37573459,"body_markdown":"You can keep different properties files as per the environments like DEV,UAT.\r\nNow in your different environments you can keep an environment variable say env as DEV and UAT.\r\n\r\nIn Tomcat it can be simply set by giving it in vm options -Denv=DEV or -Denv=UAT.\r\n\r\nNow you can create the same war file which will have all the configuration files for all the environments and based on your environment variable it will pick up and configuration file.\r\n\r\nHope is answer your query.\r\n\r\nExample :  Below is the war plugin \r\n\r\n    &lt;plugin&gt;\r\n    \t&lt;artifactId&gt;maven-war-plugin&lt;/artifactId&gt;\r\n    \t&lt;version&gt;2.6&lt;/version&gt;\r\n    \t&lt;configuration&gt;\r\n    \t\t&lt;failOnMissingWebXml&gt;false&lt;/failOnMissingWebXml&gt;\r\n    \t\t&lt;warName&gt;${app.jvm}&lt;/warName&gt;\r\n    \t\t&lt;webResources&gt;\r\n    \t\t\t&lt;resource&gt;\r\n    \t\t\t\t&lt;directory&gt;${basedir}/src/main/resources/config&lt;/directory&gt;\r\n    \t\t\t\t&lt;targetPath&gt;WEB-INF&lt;/targetPath&gt;\r\n    \t\t\t\t&lt;filtering&gt;true&lt;/filtering&gt;\r\n    \t\t\t&lt;/resource&gt;\r\n    \t\t&lt;/webResources&gt;\r\n    \t&lt;/configuration&gt;\r\n    &lt;/plugin&gt;\r\n\r\nHere we copy *-dev.properties *-uat.properties\r\n\r\nNow for example if you are using tomcat server in local\r\n\r\n\r\n    &lt;plugin&gt;\r\n    \t&lt;groupId&gt;org.apache.tomcat.maven&lt;/groupId&gt;\r\n    \t&lt;artifactId&gt;tomcat7-maven-plugin&lt;/artifactId&gt;\r\n    \t&lt;version&gt;2.2&lt;/version&gt;\r\n    \t&lt;configuration&gt;\r\n    \t\t&lt;port&gt;8086&lt;/port&gt;\r\n    \t\t&lt;ignorePackaging&gt;true&lt;/ignorePackaging&gt;\r\n    \t\t&lt;systemProperties&gt;\r\n    \t\t\t&lt;env&gt;dev&lt;/env&gt;\r\n    \t\t&lt;/systemProperties&gt;\r\n    \t&lt;/configuration&gt;\r\n    &lt;/plugin&gt;\r\n\r\nLike this you can set the environment variable in tomcat. At the startup of application based on System.getProperty(&quot;env&quot;) you can pick the config file.\r\n ","title":"I want to single deploy WAR file for all environment DEV/UAT/PROD but i ahve dependency of properties file let me know how i will do?","body":"<p>You can keep different properties files as per the environments like DEV,UAT.\nNow in your different environments you can keep an environment variable say env as DEV and UAT.</p>\n\n<p>In Tomcat it can be simply set by giving it in vm options -Denv=DEV or -Denv=UAT.</p>\n\n<p>Now you can create the same war file which will have all the configuration files for all the environments and based on your environment variable it will pick up and configuration file.</p>\n\n<p>Hope is answer your query.</p>\n\n<p>Example :  Below is the war plugin </p>\n\n<pre><code>&lt;plugin&gt;\n    &lt;artifactId&gt;maven-war-plugin&lt;/artifactId&gt;\n    &lt;version&gt;2.6&lt;/version&gt;\n    &lt;configuration&gt;\n        &lt;failOnMissingWebXml&gt;false&lt;/failOnMissingWebXml&gt;\n        &lt;warName&gt;${app.jvm}&lt;/warName&gt;\n        &lt;webResources&gt;\n            &lt;resource&gt;\n                &lt;directory&gt;${basedir}/src/main/resources/config&lt;/directory&gt;\n                &lt;targetPath&gt;WEB-INF&lt;/targetPath&gt;\n                &lt;filtering&gt;true&lt;/filtering&gt;\n            &lt;/resource&gt;\n        &lt;/webResources&gt;\n    &lt;/configuration&gt;\n&lt;/plugin&gt;\n</code></pre>\n\n<p>Here we copy *-dev.properties *-uat.properties</p>\n\n<p>Now for example if you are using tomcat server in local</p>\n\n<pre><code>&lt;plugin&gt;\n    &lt;groupId&gt;org.apache.tomcat.maven&lt;/groupId&gt;\n    &lt;artifactId&gt;tomcat7-maven-plugin&lt;/artifactId&gt;\n    &lt;version&gt;2.2&lt;/version&gt;\n    &lt;configuration&gt;\n        &lt;port&gt;8086&lt;/port&gt;\n        &lt;ignorePackaging&gt;true&lt;/ignorePackaging&gt;\n        &lt;systemProperties&gt;\n            &lt;env&gt;dev&lt;/env&gt;\n        &lt;/systemProperties&gt;\n    &lt;/configuration&gt;\n&lt;/plugin&gt;\n</code></pre>\n\n<p>Like this you can set the environment variable in tomcat. At the startup of application based on System.getProperty(\"env\") you can pick the config file.</p>\n"},{"tags":[],"owner":{"account_id":16796963,"reputation":114,"user_id":12143234,"display_name":"Uttam Pawar"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1637378313,"creation_date":1637378313,"answer_id":70042987,"question_id":37573459,"body_markdown":"You can create 2 properties file in your project\r\n1) Application.local.properties\r\n2) Application.dev.properties\r\n\r\n\r\nWhen you execute the build set your vm parameters\r\n \r\nWhen you want use local then set as  -Denv=local\r\n\r\nFor dev:   -Denv=dev\r\n\r\nThis will read related for.\r\n","title":"I want to single deploy WAR file for all environment DEV/UAT/PROD but i ahve dependency of properties file let me know how i will do?","body":"<p>You can create 2 properties file in your project</p>\n<ol>\n<li>Application.local.properties</li>\n<li>Application.dev.properties</li>\n</ol>\n<p>When you execute the build set your vm parameters</p>\n<p>When you want use local then set as  -Denv=local</p>\n<p>For dev:   -Denv=dev</p>\n<p>This will read related for.</p>\n"}],"owner":{"account_id":4915405,"reputation":49,"user_id":3959462,"display_name":"Alok Singh"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2103,"favorite_count":0,"down_vote_count":2,"up_vote_count":3,"answer_count":2,"score":1,"last_activity_date":1637378313,"creation_date":1464796354,"question_id":37573459,"body_markdown":"*Currently in my comp they are deploying the WAR file in different-2 environment by creating different-different WAR file.*\r\n**Exp: for DEV they will create and deploy,\r\nfor UAT they will create and Deploye\r\ndue to some dependency of properties file.**\r\n\r\nSo  i want solution that how i will configure in server side or in WAR file  to deploy single WAR file which is created by Developer only\r\nand its a best practice also.\r\n\r\n\r\nI heard from others that we can do it by configuring Environment properties related with environment in server side.\r\n\r\nplease give the perfect solution which should work properly...\r\n\r\n\r\n\r\nHopine for +ve answer.\r\nThanks !","title":"I want to single deploy WAR file for all environment DEV/UAT/PROD but i ahve dependency of properties file let me know how i will do?","body":"<p><em>Currently in my comp they are deploying the WAR file in different-2 environment by creating different-different WAR file.</em>\n<strong>Exp: for DEV they will create and deploy,\nfor UAT they will create and Deploye\ndue to some dependency of properties file.</strong></p>\n\n<p>So  i want solution that how i will configure in server side or in WAR file  to deploy single WAR file which is created by Developer only\nand its a best practice also.</p>\n\n<p>I heard from others that we can do it by configuring Environment properties related with environment in server side.</p>\n\n<p>please give the perfect solution which should work properly...</p>\n\n<p>Hopine for +ve answer.\nThanks !</p>\n"},{"tags":["java","xml","hadoop","xml-parsing","mapreduce"],"answers":[{"tags":[],"owner":{"account_id":5037519,"reputation":516,"user_id":4045899,"display_name":"Aryan087"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1637377527,"creation_date":1442429589,"answer_id":32616514,"question_id":32608540,"body_markdown":"The problem is in the beginning tag:\r\n\r\n    conf.set(&quot;xmlinput.start&quot;, &quot;&lt;FICHER&quot;);`\r\n    conf.set(&quot;xmlinput.end&quot;, &quot;&lt;/FICHER&gt;&quot;); ","title":"XML parsing in Hadoop mapreduce","body":"<p>The problem is in the beginning tag:</p>\n<pre><code>conf.set(&quot;xmlinput.start&quot;, &quot;&lt;FICHER&quot;);`\nconf.set(&quot;xmlinput.end&quot;, &quot;&lt;/FICHER&gt;&quot;); \n</code></pre>\n"}],"owner":{"account_id":6963416,"reputation":107,"user_id":5342217,"accept_rate":54,"display_name":"Barath"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":954,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1637377571,"creation_date":1442406270,"question_id":32608540,"body_markdown":"I have written a mapreduce code for parsing XML as CSV.\r\nBut I don&#39;t find any output in my output directory after running the job.\r\nI am not sure if the file is not read or not written.\r\n\r\n\r\nThis my entire code.\r\n\r\n    public class XmlParser11\r\n    {\r\n    \t\tpublic static String outvalue;\r\n            public static class XmlInputFormat1 extends TextInputFormat {\r\n            public static final String START_TAG_KEY = &quot;xmlinput.start&quot;;\r\n            public static final String END_TAG_KEY = &quot;xmlinput.end&quot;;\r\n            \r\n            public RecordReader&lt;LongWritable, Text&gt; createRecordReader(\r\n                    InputSplit split, TaskAttemptContext context) {\r\n                return new XmlRecordReader();\r\n            }\r\n            public static class XmlRecordReader extends\r\n                    RecordReader&lt;LongWritable, Text&gt; {\r\n                private byte[] startTag;\r\n                private byte[] endTag;\r\n                private long start;\r\n                private long end;\r\n                private FSDataInputStream fsin;\r\n                private DataOutputBuffer buffer = new DataOutputBuffer();\r\n    \r\n                private LongWritable key = new LongWritable();\r\n                private Text value = new Text();\r\n                    @Override\r\n                public void initialize(InputSplit split, TaskAttemptContext context)\r\n                        throws IOException, InterruptedException {\r\n                    \tSystem.out.println(&quot;B&quot;);\r\n                    Configuration conf = context.getConfiguration();\r\n                    startTag = conf.get(START_TAG_KEY).getBytes(&quot;utf-8&quot;);\r\n                    endTag = conf.get(END_TAG_KEY).getBytes(&quot;utf-8&quot;);\r\n                    FileSplit fileSplit = (FileSplit) split;\r\n    \r\n                    // open the file and seek to the start of the split\r\n                    start = fileSplit.getStart();\r\n                    end = start + fileSplit.getLength();\r\n                    Path file = fileSplit.getPath();\r\n                    FileSystem fs = file.getFileSystem(conf);\r\n                    fsin = fs.open(fileSplit.getPath());\r\n                    fsin.seek(start);\r\n    \r\n                }\r\n            @Override\r\n                public boolean nextKeyValue() throws IOException,\r\n                        InterruptedException {\r\n            \tSystem.out.println(&quot;C&quot;);\r\n                    if (fsin.getPos() &lt; end) {\r\n                        if (readUntilMatch(startTag, false)) {\r\n                            try {\r\n                                buffer.write(startTag);\r\n                                if (readUntilMatch(endTag, true)) {\r\n                                    key.set(fsin.getPos());\r\n                                    value.set(buffer.getData(), 0,\r\n                                            buffer.getLength());\r\n                                    return true;\r\n                                }\r\n                            } finally {\r\n                                buffer.reset();\r\n                            }\r\n                        }\r\n                    }\r\n                    return false;\r\n                }\r\n            @Override\r\n               public LongWritable getCurrentKey() throws IOException,\r\n                        InterruptedException {\r\n                    return key;\r\n                }\r\n    \r\n            @Override\r\n                public Text getCurrentValue() throws IOException,\r\n                        InterruptedException {\r\n            \t\r\n                    return value;\r\n                }\r\n            @Override\r\n                public void close() throws IOException {\r\n                    fsin.close();\r\n                }\r\n            @Override\r\n                public float getProgress() throws IOException {\r\n            \t\r\n                    return (fsin.getPos() - start) / (float) (end - start);\r\n                }\r\n    \r\n                private boolean readUntilMatch(byte[] match, boolean withinBlock)\r\n                        throws IOException {\r\n                    int i = 0;\r\n                    \r\n                    while (true) {\r\n                        int b = fsin.read();\r\n                        // end of file:\r\n                        if (b == -1)\r\n                            return false;\r\n                        // save to buffer:\r\n                        if (withinBlock)\r\n                            buffer.write(b);\r\n                        // check if we&#39;re matching:\r\n                        if (b == match[i]) {\r\n                            i++;\r\n                            if (i &gt;= match.length)\r\n                                return true;\r\n                        } else\r\n                            i = 0;\r\n                        // see if we&#39;ve passed the stop point:\r\n                        if (!withinBlock &amp;&amp; i == 0 &amp;&amp; fsin.getPos() &gt;= end)\r\n                            return false;\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    \r\n    \r\n            public static class Map extends Mapper&lt;Text, Text,\r\n            Text, Text&gt; {\r\n            \t@SuppressWarnings(&quot;unchecked&quot;)\r\n            \t@Override\r\n            \tprotected void map(Text key, Text value,\r\n                         @SuppressWarnings(&quot;rawtypes&quot;) Mapper.Context context)\r\n                        \t\t throws\r\n                        \t\t IOException, InterruptedException {\r\n            \t\t\r\n            \t\tString document = value.toString();\r\n            \t\tSystem.out.println(&quot;‘&quot; + document + &quot;‘&quot;);\r\n    \t  \t\r\n            \t\tXMLInputFactory xmlif = XMLInputFactory.newInstance();\r\n            \t\tXMLStreamReader xmlr;\r\n    \t\t\r\n    \t\t\ttry {\r\n    \t\t\t\txmlr = xmlif.createXMLStreamReader(new FileReader(document));\r\n    \t\t\t\twhile(xmlr.hasNext())\r\n    \t\t\t\t{\r\n    \t    \t\t   printEvent(xmlr);\r\n    \t    \t\t   xmlr.next();\r\n    \t\t      \t }\r\n    \t    \t\t   xmlr.close();\r\n    \t    \t\t   context.write(null,new Text (outvalue));\r\n    \t\t\t} catch (XMLStreamException e) {\r\n    \t\t\t\t\r\n    \t\t\t\te.printStackTrace();\r\n    \t\t\t}\r\n            \t}\r\n    \t    \t\t   private void printEvent(XMLStreamReader xmlr) {\r\n    \t    \t\t\t \r\n    \t    \t\t\t   switch (xmlr.getEventType()) {\r\n    \t   \r\n    \t    \t\t\t   case XMLStreamConstants.START_ELEMENT:\r\n    \t    \t\t\t\t  print(xmlr);\r\n    \t    \t\t\t\t   break;\r\n          \r\n    \t    \t\t\t   case XMLStreamConstants.CHARACTERS:\r\n    \t    \t\t\t\t   int start = xmlr.getTextStart();\r\n    \t    \t\t\t\t   int length = xmlr.getTextLength();\r\n    \t    \t\t\t\t   System.out.print(new String(xmlr.getTextCharacters(),\r\n    \t                                  start,\r\n    \t                                  length));\r\n    \t    \t\t\t\t   break;\r\n    \t    \t\t\t   }\r\n    \t    \t\t   }\r\n    \t    \t\t   private  String print(XMLStreamReader xmlr){\r\n    \t\t    \t\t    if(xmlr.hasName()){\r\n    \t\t    \t\t      for (int i=0; i &lt; xmlr.getAttributeCount(); i++) {\r\n    \t\t    \t\t    \t  String localName = xmlr.getLocalName();\r\n    \t\t\t    \t\t      if (localName != null);\r\n    \t\t    \t\t    \t  String attName = xmlr.getAttributeLocalName(i);\r\n    \t\t\t\t    \t\t    String value = xmlr.getAttributeValue(i);\r\n    \t\t\t\t    \t\t    System.out.print(&quot;,&quot;);\r\n    \t\t\t\t    \t\t    String outvalue = localName +&quot;:&quot;+ attName +&quot;-&quot;+value;\r\n    \t\t\t\t    \t\t    System.out.print(outvalue);\r\n    \t\t    \t\t      }\r\n    \t\t    \t\t    } return outvalue;\r\n    \t\t    \t\t  }\r\n    \t\t    \t\t   \r\n      }\r\n            public static void main(String[] args) throws Exception\r\n            {\r\n                    Configuration conf = new Configuration();\r\n    \r\n                    conf.set(&quot;xmlinput.start&quot;, &quot;&lt;FICHER&gt;&quot;);\r\n                    conf.set(&quot;xmlinput.end&quot;, &quot;&lt;/FICHER&gt;&quot;);\r\n                    Job job = new Job(conf);\r\n                    job.setJarByClass(XmlParser11.class);\r\n                    job.setOutputKeyClass(Text.class);\r\n                    job.setOutputValueClass(Text.class);\r\n    \r\n                    job.setMapperClass(XmlParser11.Map.class);\r\n                    job.setNumReduceTasks(0);\r\n    \r\n                    job.setInputFormatClass(XmlInputFormat1.class);\r\n                    job.setOutputFormatClass(TextOutputFormat.class);\r\n                    FileInputFormat.addInputPath(job, new Path(args[0]));\r\n                    FileOutputFormat.setOutputPath(job, new Path(args[1]));\r\n    \r\n                    job.waitForCompletion(true);\r\n            }\r\n\r\nHere is the out put of putty\r\n\r\n&lt;pre&gt;\r\nFile System Counters \r\n        FILE: Number of bytes read=0 strong text&gt;                 \r\n        FILE: Number of bytes written=120678\r\n        FILE: Number of read operations=0\r\n        FILE: Number of large read operations=0\r\n        FILE: Number of write operations=0\r\n        HDFS: Number of bytes read=1762671\r\n        HDFS: Number of bytes written=0\r\n        HDFS: Number of read operations=5\r\n        HDFS: Number of large read operations=0\r\n        HDFS: Number of write operations=2\r\nJob Counters\r\n        Launched map tasks=1\r\n        Rack-local map tasks=1\r\n        Total time spent by all maps in occupied slots (ms)=15960\r\n        Total time spent by all reduces in occupied slots (ms)=0\r\n        Total time spent by all map tasks (ms)=3990\r\n        Total vcore-seconds taken by all map tasks=3990\r\n        Total megabyte-seconds taken by all map tasks=16343040\r\nMap-Reduce Framework\r\n        Map input records=0\r\n        Map output records=0\r\n        Input split bytes=124\r\n        Spilled Records=0\r\n        Failed Shuffles=0\r\n        Merged Map outputs=0\r\n        GC time elapsed (ms)=0\r\n        CPU time spent (ms)=1390\r\n        Physical memory (bytes) snapshot=513449984\r\n        Virtual memory (bytes) snapshot=4122763264\r\n        Total committed heap usage (bytes)=2058354688\r\nFile Input Format Counters\r\n        Bytes Read=1762547\r\nFile Output Format Counters\r\n        Bytes Written=0\r\n&lt;/pre&gt;","title":"XML parsing in Hadoop mapreduce","body":"<p>I have written a mapreduce code for parsing XML as CSV.\nBut I don't find any output in my output directory after running the job.\nI am not sure if the file is not read or not written.</p>\n<p>This my entire code.</p>\n<pre><code>public class XmlParser11\n{\n        public static String outvalue;\n        public static class XmlInputFormat1 extends TextInputFormat {\n        public static final String START_TAG_KEY = &quot;xmlinput.start&quot;;\n        public static final String END_TAG_KEY = &quot;xmlinput.end&quot;;\n        \n        public RecordReader&lt;LongWritable, Text&gt; createRecordReader(\n                InputSplit split, TaskAttemptContext context) {\n            return new XmlRecordReader();\n        }\n        public static class XmlRecordReader extends\n                RecordReader&lt;LongWritable, Text&gt; {\n            private byte[] startTag;\n            private byte[] endTag;\n            private long start;\n            private long end;\n            private FSDataInputStream fsin;\n            private DataOutputBuffer buffer = new DataOutputBuffer();\n\n            private LongWritable key = new LongWritable();\n            private Text value = new Text();\n                @Override\n            public void initialize(InputSplit split, TaskAttemptContext context)\n                    throws IOException, InterruptedException {\n                    System.out.println(&quot;B&quot;);\n                Configuration conf = context.getConfiguration();\n                startTag = conf.get(START_TAG_KEY).getBytes(&quot;utf-8&quot;);\n                endTag = conf.get(END_TAG_KEY).getBytes(&quot;utf-8&quot;);\n                FileSplit fileSplit = (FileSplit) split;\n\n                // open the file and seek to the start of the split\n                start = fileSplit.getStart();\n                end = start + fileSplit.getLength();\n                Path file = fileSplit.getPath();\n                FileSystem fs = file.getFileSystem(conf);\n                fsin = fs.open(fileSplit.getPath());\n                fsin.seek(start);\n\n            }\n        @Override\n            public boolean nextKeyValue() throws IOException,\n                    InterruptedException {\n            System.out.println(&quot;C&quot;);\n                if (fsin.getPos() &lt; end) {\n                    if (readUntilMatch(startTag, false)) {\n                        try {\n                            buffer.write(startTag);\n                            if (readUntilMatch(endTag, true)) {\n                                key.set(fsin.getPos());\n                                value.set(buffer.getData(), 0,\n                                        buffer.getLength());\n                                return true;\n                            }\n                        } finally {\n                            buffer.reset();\n                        }\n                    }\n                }\n                return false;\n            }\n        @Override\n           public LongWritable getCurrentKey() throws IOException,\n                    InterruptedException {\n                return key;\n            }\n\n        @Override\n            public Text getCurrentValue() throws IOException,\n                    InterruptedException {\n            \n                return value;\n            }\n        @Override\n            public void close() throws IOException {\n                fsin.close();\n            }\n        @Override\n            public float getProgress() throws IOException {\n            \n                return (fsin.getPos() - start) / (float) (end - start);\n            }\n\n            private boolean readUntilMatch(byte[] match, boolean withinBlock)\n                    throws IOException {\n                int i = 0;\n                \n                while (true) {\n                    int b = fsin.read();\n                    // end of file:\n                    if (b == -1)\n                        return false;\n                    // save to buffer:\n                    if (withinBlock)\n                        buffer.write(b);\n                    // check if we're matching:\n                    if (b == match[i]) {\n                        i++;\n                        if (i &gt;= match.length)\n                            return true;\n                    } else\n                        i = 0;\n                    // see if we've passed the stop point:\n                    if (!withinBlock &amp;&amp; i == 0 &amp;&amp; fsin.getPos() &gt;= end)\n                        return false;\n                }\n            }\n        }\n    }\n\n\n        public static class Map extends Mapper&lt;Text, Text,\n        Text, Text&gt; {\n            @SuppressWarnings(&quot;unchecked&quot;)\n            @Override\n            protected void map(Text key, Text value,\n                     @SuppressWarnings(&quot;rawtypes&quot;) Mapper.Context context)\n                             throws\n                             IOException, InterruptedException {\n                \n                String document = value.toString();\n                System.out.println(&quot;‘&quot; + document + &quot;‘&quot;);\n        \n                XMLInputFactory xmlif = XMLInputFactory.newInstance();\n                XMLStreamReader xmlr;\n        \n            try {\n                xmlr = xmlif.createXMLStreamReader(new FileReader(document));\n                while(xmlr.hasNext())\n                {\n                   printEvent(xmlr);\n                   xmlr.next();\n                 }\n                   xmlr.close();\n                   context.write(null,new Text (outvalue));\n            } catch (XMLStreamException e) {\n                \n                e.printStackTrace();\n            }\n            }\n                   private void printEvent(XMLStreamReader xmlr) {\n                     \n                       switch (xmlr.getEventType()) {\n       \n                       case XMLStreamConstants.START_ELEMENT:\n                          print(xmlr);\n                           break;\n      \n                       case XMLStreamConstants.CHARACTERS:\n                           int start = xmlr.getTextStart();\n                           int length = xmlr.getTextLength();\n                           System.out.print(new String(xmlr.getTextCharacters(),\n                                      start,\n                                      length));\n                           break;\n                       }\n                   }\n                   private  String print(XMLStreamReader xmlr){\n                        if(xmlr.hasName()){\n                          for (int i=0; i &lt; xmlr.getAttributeCount(); i++) {\n                              String localName = xmlr.getLocalName();\n                              if (localName != null);\n                              String attName = xmlr.getAttributeLocalName(i);\n                                String value = xmlr.getAttributeValue(i);\n                                System.out.print(&quot;,&quot;);\n                                String outvalue = localName +&quot;:&quot;+ attName +&quot;-&quot;+value;\n                                System.out.print(outvalue);\n                          }\n                        } return outvalue;\n                      }\n                       \n  }\n        public static void main(String[] args) throws Exception\n        {\n                Configuration conf = new Configuration();\n\n                conf.set(&quot;xmlinput.start&quot;, &quot;&lt;FICHER&gt;&quot;);\n                conf.set(&quot;xmlinput.end&quot;, &quot;&lt;/FICHER&gt;&quot;);\n                Job job = new Job(conf);\n                job.setJarByClass(XmlParser11.class);\n                job.setOutputKeyClass(Text.class);\n                job.setOutputValueClass(Text.class);\n\n                job.setMapperClass(XmlParser11.Map.class);\n                job.setNumReduceTasks(0);\n\n                job.setInputFormatClass(XmlInputFormat1.class);\n                job.setOutputFormatClass(TextOutputFormat.class);\n                FileInputFormat.addInputPath(job, new Path(args[0]));\n                FileOutputFormat.setOutputPath(job, new Path(args[1]));\n\n                job.waitForCompletion(true);\n        }\n</code></pre>\n<p>Here is the out put of putty</p>\n<pre>\nFile System Counters \n        FILE: Number of bytes read=0 strong text>                 \n        FILE: Number of bytes written=120678\n        FILE: Number of read operations=0\n        FILE: Number of large read operations=0\n        FILE: Number of write operations=0\n        HDFS: Number of bytes read=1762671\n        HDFS: Number of bytes written=0\n        HDFS: Number of read operations=5\n        HDFS: Number of large read operations=0\n        HDFS: Number of write operations=2\nJob Counters\n        Launched map tasks=1\n        Rack-local map tasks=1\n        Total time spent by all maps in occupied slots (ms)=15960\n        Total time spent by all reduces in occupied slots (ms)=0\n        Total time spent by all map tasks (ms)=3990\n        Total vcore-seconds taken by all map tasks=3990\n        Total megabyte-seconds taken by all map tasks=16343040\nMap-Reduce Framework\n        Map input records=0\n        Map output records=0\n        Input split bytes=124\n        Spilled Records=0\n        Failed Shuffles=0\n        Merged Map outputs=0\n        GC time elapsed (ms)=0\n        CPU time spent (ms)=1390\n        Physical memory (bytes) snapshot=513449984\n        Virtual memory (bytes) snapshot=4122763264\n        Total committed heap usage (bytes)=2058354688\nFile Input Format Counters\n        Bytes Read=1762547\nFile Output Format Counters\n        Bytes Written=0\n</pre>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":36137,"reputation":178789,"user_id":102937,"accept_rate":90,"display_name":"Robert Harvey"},"score":2,"creation_date":1637367464,"post_id":70042236,"comment_id":123816077,"body_markdown":"`firstNum * firstNum` will return a square without the decimal point.  Otherwise, just cast your original result to `int`.","body":"<code>firstNum * firstNum</code> will return a square without the decimal point.  Otherwise, just cast your original result to <code>int</code>."},{"owner":{"account_id":12469552,"reputation":313,"user_id":9078219,"display_name":"Jawad El Fou"},"score":1,"creation_date":1637367834,"post_id":70042236,"comment_id":123816142,"body_markdown":"Do you just wanna get rid of it or you want to round?","body":"Do you just wanna get rid of it or you want to round?"},{"owner":{"account_id":14010159,"reputation":47,"user_id":10119034,"display_name":"Hamzah"},"score":0,"creation_date":1637368076,"post_id":70042236,"comment_id":123816174,"body_markdown":"@JawadElFou rounding works too if it removes the zero","body":"@JawadElFou rounding works too if it removes the zero"}],"answers":[{"tags":[],"owner":{"account_id":19923129,"reputation":112,"user_id":14598473,"display_name":"KhushThakor"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1637368445,"creation_date":1637368445,"answer_id":70042316,"question_id":70042236,"body_markdown":"Change the double values firstSquare and secondSquare to ints and cast them to int to change from double that `Math.pow()` returns to int, no need to round since squares of ints will always be int\r\n\r\n    int firstSquare = (int) Math.pow(firstNum, 2);\r\n\tint secondSquare = (int) Math.pow(secondNum, 2);","title":"How to get rid of zero after decimal point?","body":"<p>Change the double values firstSquare and secondSquare to ints and cast them to int to change from double that <code>Math.pow()</code> returns to int, no need to round since squares of ints will always be int</p>\n<pre><code>int firstSquare = (int) Math.pow(firstNum, 2);\nint secondSquare = (int) Math.pow(secondNum, 2);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":22354823,"reputation":16499,"user_id":16572295,"display_name":"Jo&#227;o Dias"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1637368460,"creation_date":1637368460,"answer_id":70042318,"question_id":70042236,"body_markdown":"You can do it with formatting as follows:\r\n```java\r\nSystem.out.format(&quot;Square of %d is %.0f Square of %d is %.0f&quot;, \r\n      firstNum, firstSquare, secondNum, secondSquare);\r\n```\r\n\r\n`%d` means an integer without decimal places and `%.0f` means a floating-point number with 0 decimal places as you wanted.","title":"How to get rid of zero after decimal point?","body":"<p>You can do it with formatting as follows:</p>\n<pre class=\"lang-java prettyprint-override\"><code>System.out.format(&quot;Square of %d is %.0f Square of %d is %.0f&quot;, \n      firstNum, firstSquare, secondNum, secondSquare);\n</code></pre>\n<p><code>%d</code> means an integer without decimal places and <code>%.0f</code> means a floating-point number with 0 decimal places as you wanted.</p>\n"},{"tags":[],"owner":{"account_id":1689973,"reputation":37280,"user_id":1552534,"display_name":"WJS"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1637377079,"creation_date":1637369623,"answer_id":70042406,"question_id":70042236,"body_markdown":"If you don&#39;t  want decimals either use an int or cast a double to an int. E.g `(int) doubleValue`.  But if you just want to eliminate the .0 from floating point numbers then perhaps this is what you want.\r\n```\r\nfor (double d : new double[]{2.3, 2.0,1.222, 4445.2, 442.0}) {\r\n    System.out.println(new DecimalFormat(&quot;#.######&quot;).format(d));\r\n}\r\n```\r\nprints\r\n```\r\n2.3\r\n2\r\n1.222\r\n4445.2\r\n442\r\n```\r\nFor more information on the format syntax, check out [DecimalFormat](https://docs.oracle.com/en/java/javase/16/docs/api/java.base/java/text/DecimalFormat.html#DecimalFormat-java.lang.String-)","title":"How to get rid of zero after decimal point?","body":"<p>If you don't  want decimals either use an int or cast a double to an int. E.g <code>(int) doubleValue</code>.  But if you just want to eliminate the .0 from floating point numbers then perhaps this is what you want.</p>\n<pre><code>for (double d : new double[]{2.3, 2.0,1.222, 4445.2, 442.0}) {\n    System.out.println(new DecimalFormat(&quot;#.######&quot;).format(d));\n}\n</code></pre>\n<p>prints</p>\n<pre><code>2.3\n2\n1.222\n4445.2\n442\n</code></pre>\n<p>For more information on the format syntax, check out <a href=\"https://docs.oracle.com/en/java/javase/16/docs/api/java.base/java/text/DecimalFormat.html#DecimalFormat-java.lang.String-\" rel=\"nofollow noreferrer\">DecimalFormat</a></p>\n"},{"tags":[],"owner":{"account_id":18648992,"reputation":931,"user_id":13592914,"display_name":"cs1349459"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1637370584,"creation_date":1637370584,"answer_id":70042478,"question_id":70042236,"body_markdown":"Convert to string and check for ending\r\n```\r\npublic String removePrefix(double number) {\r\n    if(String.valueOf(number).endsWith(&quot;.0&quot;)) {\r\n        return String.valueOf(number).split(&quot;.0&quot;)[0];\r\n    }\r\n    return String.valueOf(number);\r\n}\r\n```\r\nNot tested, but I hope it helps. =)","title":"How to get rid of zero after decimal point?","body":"<p>Convert to string and check for ending</p>\n<pre><code>public String removePrefix(double number) {\n    if(String.valueOf(number).endsWith(&quot;.0&quot;)) {\n        return String.valueOf(number).split(&quot;.0&quot;)[0];\n    }\n    return String.valueOf(number);\n}\n</code></pre>\n<p>Not tested, but I hope it helps. =)</p>\n"}],"owner":{"account_id":14010159,"reputation":47,"user_id":10119034,"display_name":"Hamzah"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1100,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":70042406,"answer_count":4,"score":0,"last_activity_date":1637377079,"creation_date":1637367317,"question_id":70042236,"body_markdown":"    import java.util.Scanner;\r\n    import java.lang.Math;\r\n    \r\n    public class Calculator {\r\n      public static void main(String[] args) {\r\n        int firstNum;\r\n        int secondNum;\r\n        int sum;\r\n        int product;\r\n        int difference;\r\n        float division;\r\n        Scanner scanner = new Scanner(System.in);\r\n    \r\n        System.out.print(&quot;Enter First Number : &quot;);\r\n        firstNum = scanner.nextInt();\r\n    \r\n        System.out.print(&quot;Enter Second Number : &quot;);\r\n        secondNum = scanner.nextInt();\r\n    \r\n        scanner.close();\r\n    \r\n        sum = firstNum + secondNum;\r\n        difference = firstNum - secondNum;\r\n        product = firstNum * secondNum;\r\n        division = (float) firstNum / secondNum;\r\n        double firstSquare = Math.pow(firstNum, 2);\r\n        double secondSquare = Math.pow(secondNum, 2);\r\n    \r\n        System.out.println(&quot;Sum = &quot; + sum);\r\n        System.out.println(&quot;Division = &quot; + division);\r\n        System.out.println(&quot;Product = &quot; + product);\r\n        System.out.println(&quot;Difference = &quot; + difference);\r\n        System.out\r\n            .println(&quot;Square of &quot; + firstNum + &quot; is &quot; + firstSquare + &quot; Square of &quot; + secondNum + &quot; is &quot; + secondSquare);\r\n      }\r\n    }\r\n\r\n[![Output][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/W6HOo.png\r\n\r\nThis is a program that takes in two inputs then performs few calculations. I have an issue that I don&#39;t want zero after decimal point when I am squaring two inputs. So, how do I get rid of it? Can someone help me with that. Thank you","title":"How to get rid of zero after decimal point?","body":"<pre><code>import java.util.Scanner;\nimport java.lang.Math;\n\npublic class Calculator {\n  public static void main(String[] args) {\n    int firstNum;\n    int secondNum;\n    int sum;\n    int product;\n    int difference;\n    float division;\n    Scanner scanner = new Scanner(System.in);\n\n    System.out.print(&quot;Enter First Number : &quot;);\n    firstNum = scanner.nextInt();\n\n    System.out.print(&quot;Enter Second Number : &quot;);\n    secondNum = scanner.nextInt();\n\n    scanner.close();\n\n    sum = firstNum + secondNum;\n    difference = firstNum - secondNum;\n    product = firstNum * secondNum;\n    division = (float) firstNum / secondNum;\n    double firstSquare = Math.pow(firstNum, 2);\n    double secondSquare = Math.pow(secondNum, 2);\n\n    System.out.println(&quot;Sum = &quot; + sum);\n    System.out.println(&quot;Division = &quot; + division);\n    System.out.println(&quot;Product = &quot; + product);\n    System.out.println(&quot;Difference = &quot; + difference);\n    System.out\n        .println(&quot;Square of &quot; + firstNum + &quot; is &quot; + firstSquare + &quot; Square of &quot; + secondNum + &quot; is &quot; + secondSquare);\n  }\n}\n</code></pre>\n<p><a href=\"https://i.stack.imgur.com/W6HOo.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/W6HOo.png\" alt=\"Output\" /></a></p>\n<p>This is a program that takes in two inputs then performs few calculations. I have an issue that I don't want zero after decimal point when I am squaring two inputs. So, how do I get rid of it? Can someone help me with that. Thank you</p>\n"},{"tags":["java","spring-boot","intellij-idea","jackson","generated-code"],"comments":[{"owner":{"account_id":14656252,"reputation":672,"user_id":10869284,"display_name":"sigur"},"score":0,"creation_date":1637324249,"post_id":70033068,"comment_id":123802142,"body_markdown":"Which engine are you using for testing? The IntelliJ default one?","body":"Which engine are you using for testing? The IntelliJ default one?"},{"owner":{"account_id":18704506,"reputation":21,"user_id":13635986,"display_name":"artificialdeathinthewest"},"score":0,"creation_date":1637331025,"post_id":70033068,"comment_id":123804718,"body_markdown":"yes, i just realized that I can edit the run configuration and use Jacoco as coverage runner, now the coverage is 100%, thanks!","body":"yes, i just realized that I can edit the run configuration and use Jacoco as coverage runner, now the coverage is 100%, thanks!"}],"answers":[{"tags":[],"owner":{"account_id":18704506,"reputation":21,"user_id":13635986,"display_name":"artificialdeathinthewest"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1637331333,"creation_date":1637331333,"answer_id":70036218,"question_id":70033068,"body_markdown":"Edit:\r\nI finally found the solution: I changed the run configurations of my application\r\n\r\nRun -&gt; Edit configurations.. -&gt; Modify options -&gt; Specify alternative coverage runner -&gt; I chose JaCoCo instead of IntelliJ -&gt; Apply\r\n\r\nNow the coverage is 100% because JaCoCo skips the classes with the @Generated annotation","title":"Jackson Spring-boot test coverage","body":"<p>Edit:\nI finally found the solution: I changed the run configurations of my application</p>\n<p>Run -&gt; Edit configurations.. -&gt; Modify options -&gt; Specify alternative coverage runner -&gt; I chose JaCoCo instead of IntelliJ -&gt; Apply</p>\n<p>Now the coverage is 100% because JaCoCo skips the classes with the @Generated annotation</p>\n"}],"owner":{"account_id":18704506,"reputation":21,"user_id":13635986,"display_name":"artificialdeathinthewest"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":282,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1637376661,"creation_date":1637316436,"question_id":70033068,"body_markdown":"I&#39;m developing a rest API on IntelliJ and I was wondering if there&#39;s a way to exclude Jackson generated classes from test coverage. Searching online I didn&#39;t find anything except a way to tell IntelliJ to exclude some packages, but I thought that the annotation @Generated would automatically exclude generated classes.\r\n\r\nThanks in advance","title":"Jackson Spring-boot test coverage","body":"<p>I'm developing a rest API on IntelliJ and I was wondering if there's a way to exclude Jackson generated classes from test coverage. Searching online I didn't find anything except a way to tell IntelliJ to exclude some packages, but I thought that the annotation @Generated would automatically exclude generated classes.</p>\n<p>Thanks in advance</p>\n"},{"tags":["java","junit","mockito","powermock","easymock"],"comments":[{"owner":{"account_id":10108456,"reputation":3914,"user_id":7470253,"display_name":"M. Prokhorov"},"score":0,"creation_date":1490797076,"post_id":43095958,"comment_id":73273510,"body_markdown":"Possible duplicate of [Mocking static methods with Mockito](http://stackoverflow.com/questions/21105403/mocking-static-methods-with-mockito)","body":"Possible duplicate of <a href=\"http://stackoverflow.com/questions/21105403/mocking-static-methods-with-mockito\">Mocking static methods with Mockito</a>"}],"answers":[{"tags":[],"owner":{"account_id":21804,"reputation":7207,"user_id":53300,"accept_rate":53,"display_name":"DaveH"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1490869000,"creation_date":1490797192,"answer_id":43096215,"question_id":43095958,"body_markdown":"I think the problem may be that you are not running this with the PowerMockRunner, so the PowerMock extensions to are using ( like mockStatic ) aren&#39;t obeyed\r\n\r\nTry changing `@RunWith(MockitoJUnitRunner.class)` to `@RunWith(PowerMockRunner.class)`\r\n\r\nEDIT\r\n\r\nYou may also need to initialize the mocks. Easiest way is to use an `@Before` method, something like\r\n\r\n`@Before\r\npublic void setup(){\r\n   initMocks(this);\r\n}\r\n`","title":"Test DriverManager.getConnection with mockito","body":"<p>I think the problem may be that you are not running this with the PowerMockRunner, so the PowerMock extensions to are using ( like mockStatic ) aren't obeyed</p>\n\n<p>Try changing <code>@RunWith(MockitoJUnitRunner.class)</code> to <code>@RunWith(PowerMockRunner.class)</code></p>\n\n<p>EDIT</p>\n\n<p>You may also need to initialize the mocks. Easiest way is to use an <code>@Before</code> method, something like</p>\n\n<p><code>@Before\npublic void setup(){\n   initMocks(this);\n}\n</code></p>\n"},{"tags":[],"owner":{"account_id":22201840,"reputation":1,"user_id":16442412,"display_name":"bohoart"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1637376082,"creation_date":1637359617,"answer_id":70041408,"question_id":43095958,"body_markdown":"    Class Cut{\r\n        public void abc(){\r\n            Connection conn = DriverManager.getConnection(&quot;url&quot;,&quot;username&quot;,&quot;password&quot;);\r\n        }\r\n    }\r\n    \r\n    \r\n    @PrepareForTest({Cut.class})\r\n    Class Cut_test{\r\n    \r\n        cut classUnderTest;\r\n    \r\n        public void abc_test(){\r\n    \r\n        PowerMockito.mockStatic(DriverManager.class);\r\n        when(DriverManager.getConnection(anyString(),anyString(),anyString())).thenReturn(mockConnection);\r\n  \r\n        //test the stub\r\n        Connection conn = DriverManager.getConnection(&quot;abc&quot;,&quot;abc&quot;,&quot;pass&quot;);\r\n    \r\n        //call actual method \r\n        classunderTest.abc();\r\n    \r\n        //Assert\r\n        assertTrue(&quot;passed&quot;,true);\r\n    }\r\n\r\nfor those getting nullpointerException, \r\n\r\n  \r\n\r\n 1. check if the stub is working by adding the lines under //test the stub.\r\n 2. comment out your `DriverManager.getConnection` in actual code .\r\n 3. replace with //test the stub  i posted above .\r\n 4. then run the test method in debug mode and see if it reaches the actual method.\r\n 5. if it didn&#39;t    reach then add the actual method&#39;s class    in `@PrepareForTest({KafkaRecordHandler.class})`\r\n\r\n \r\n\r\n\r\n","title":"Test DriverManager.getConnection with mockito","body":"<pre><code>Class Cut{\n    public void abc(){\n        Connection conn = DriverManager.getConnection(&quot;url&quot;,&quot;username&quot;,&quot;password&quot;);\n    }\n}\n\n\n@PrepareForTest({Cut.class})\nClass Cut_test{\n\n    cut classUnderTest;\n\n    public void abc_test(){\n\n    PowerMockito.mockStatic(DriverManager.class);\n    when(DriverManager.getConnection(anyString(),anyString(),anyString())).thenReturn(mockConnection);\n\n    //test the stub\n    Connection conn = DriverManager.getConnection(&quot;abc&quot;,&quot;abc&quot;,&quot;pass&quot;);\n\n    //call actual method \n    classunderTest.abc();\n\n    //Assert\n    assertTrue(&quot;passed&quot;,true);\n}\n</code></pre>\n<p>for those getting nullpointerException,</p>\n<ol>\n<li>check if the stub is working by adding the lines under //test the stub.</li>\n<li>comment out your <code>DriverManager.getConnection</code> in actual code .</li>\n<li>replace with //test the stub  i posted above .</li>\n<li>then run the test method in debug mode and see if it reaches the actual method.</li>\n<li>if it didn't    reach then add the actual method's class    in <code>@PrepareForTest({KafkaRecordHandler.class})</code></li>\n</ol>\n"}],"owner":{"account_id":10568784,"reputation":482,"user_id":7786254,"accept_rate":80,"display_name":"Anton Kolosok"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":4221,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":2,"score":1,"last_activity_date":1637376082,"creation_date":1490796542,"question_id":43095958,"body_markdown":"I wrote DAO class\r\n\r\n    public List&lt;ClassRoom&gt; getAllClassRooms() {\r\n\t\tList&lt;ClassRoom&gt; classRoomsList = new ArrayList&lt;&gt;();\r\n\t\tString sqlStatement = &quot;SELECT * FROM university.classrooms;&quot;;\r\n\t\ttry {\r\n\t\t\tClass.forName(&quot;org.postgresql.Driver&quot;);\r\n\t\t} catch (ClassNotFoundException e) {\r\n\t\t\te.printStackTrace();\r\n\t\t}\r\n\t\tConnection connection = null;\r\n\t\tPreparedStatement statement = null;\r\n\t\tResultSet resultSet = null;\r\n\t\ttry {\r\n\t\t\tconnection = DriverManager.getConnection(&quot;jdbc:postgresql://127.0.0.1:5432/Exam6&quot;, &quot;postgres&quot;, &quot;Navlanart1&quot;);\r\n\t\t\ttry {\r\n\t\t\t\tstatement = connection.prepareStatement(sqlStatement);\r\n\t\t\t\ttry {\r\n\t\t\t\t\tresultSet = statement.executeQuery();\r\n\t\t\t\t\twhile (resultSet.next()) {\r\n\t\t\t\t\t\tClassRoom classRoom = new ClassRoom(resultSet.getString(&quot;name&quot;));\r\n\t\t\t\t\t\tclassRoomsList.add(classRoom);\r\n\t\t\t\t\t}\r\n\t\t\t\t} catch (SQLException e) {\r\n\t\t\t\t} finally {\r\n\t\t\t\t\ttry {\r\n\t\t\t\t\t\tresultSet.close();\r\n\t\t\t\t\t} catch (SQLException e) {\r\n\t\t\t\t\t\te.printStackTrace();\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t} catch (SQLException e) {\r\n\t\t\t\te.printStackTrace();\r\n\t\t\t} finally {\r\n\t\t\t\ttry {\r\n\t\t\t\t\tstatement.close();\r\n\t\t\t\t} catch (SQLException e) {\r\n\t\t\t\t\te.printStackTrace();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t} catch (SQLException e) {\r\n\t\t\te.printStackTrace();\r\n\t\t} finally {\r\n\t\t\ttry {\r\n\t\t\t\tconnection.close();\r\n\t\t\t} catch (SQLException e) {\r\n\t\t\t\te.printStackTrace();\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn classRoomsList;\r\n\t}\r\n\r\nNow i want to test it by class like that\r\n\r\n    import static org.mockito.Matchers.anyString;\r\n    import static org.mockito.Mockito.times;\r\n    import static org.mockito.Mockito.verify;\r\n    import static org.mockito.Mockito.when;\r\n    import static org.powermock.api.easymock.PowerMock.mockStatic;\r\n    \r\n    import java.sql.Connection;\r\n    import java.sql.DriverManager;\r\n    import java.sql.PreparedStatement;\r\n    import java.sql.ResultSet;\r\n    import java.sql.SQLException;\r\n    \r\n    import org.junit.AfterClass;\r\n    import org.junit.Before;\r\n    import org.junit.BeforeClass;\r\n    import org.junit.Test;\r\n    import org.junit.runner.RunWith;\r\n    import org.mockito.Mock;\r\n    import org.mockito.runners.MockitoJUnitRunner;\r\n    import org.powermock.core.classloader.annotations.PrepareForTest;\r\n    \r\n    import com.kolosok.university.dao.ClassRoomDao;\r\n    \r\n    @RunWith(MockitoJUnitRunner.class)\r\n    @PrepareForTest(DriverManager.class)\r\n    public class TestClassRoomDao {\r\n\t\r\n\t@Mock\r\n\tConnection mockConnection;\r\n\r\n\t@Mock\r\n\tPreparedStatement mockPreparedStatement;\r\n\r\n\t@Mock\r\n\tResultSet mockResultSet;\r\n\r\n\t@Test\r\n\tpublic void testGetAllClassRooms() throws SQLException {\r\n\r\n\t\tmockStatic(DriverManager.class);\r\n\t\t\r\n\t\twhen(DriverManager.getConnection(anyString(), anyString(), anyString())).thenReturn(mockConnection);\r\n\t\twhen(mockConnection.prepareStatement(anyString())).thenReturn(mockPreparedStatement);\r\n\t\twhen(mockPreparedStatement.executeQuery()).thenReturn(mockResultSet);\r\n\t\twhen(mockResultSet.next()).thenReturn(Boolean.FALSE);\r\n\r\n\t\tClassRoomDao classRoomDao = new ClassRoomDao();\r\n\t\tclassRoomDao.getAllClassRooms();\r\n\r\n\t\tverify(mockConnection, times(1)).prepareStatement(anyString());\r\n\t\tverify(mockPreparedStatement, times(1)).executeQuery();\r\n\t\tverify(mockResultSet, times(1)).next();\r\n\t}\r\n   }\r\n\r\nBut it doesnt work.\r\n\r\n    java.sql.SQLException: No suitable driver found for \r\n\t    at java.sql.DriverManager.getConnection(Unknown Source)\r\n\t    at java.sql.DriverManager.getConnection(Unknown Source)\r\n\t    at     com.kolosok.university.TestClassRoomDao.testGetAllClassRooms(TestClassRoomDao.java:58)\r\n\r\nI read alot of stackOverFlow answers on similar quastions. But still cant solve my issue\r\n\r\nI&#39;m using \r\n\r\npostgresql-42.0.0.jre7.jar\r\n    \r\nmockito-all-1.10.19.jar\r\n\r\npowermock-api-easymock-1.6.6.jar\r\n\r\npowermock-core-1.6.6.jar\r\n\r\ncglib-nodep-3.1.jar\r\n\r\njavassist-3.12.1.GA.jar\r\n\r\nobjenesis-2.5.jar\r\n\r\npowermock-api-mockito-1.6.6.jar\r\n\r\npowermock-api-support-1.6.6.jar\r\n\r\neasymock-3.4.jar","title":"Test DriverManager.getConnection with mockito","body":"<p>I wrote DAO class</p>\n\n<pre><code>public List&lt;ClassRoom&gt; getAllClassRooms() {\n    List&lt;ClassRoom&gt; classRoomsList = new ArrayList&lt;&gt;();\n    String sqlStatement = \"SELECT * FROM university.classrooms;\";\n    try {\n        Class.forName(\"org.postgresql.Driver\");\n    } catch (ClassNotFoundException e) {\n        e.printStackTrace();\n    }\n    Connection connection = null;\n    PreparedStatement statement = null;\n    ResultSet resultSet = null;\n    try {\n        connection = DriverManager.getConnection(\"jdbc:postgresql://127.0.0.1:5432/Exam6\", \"postgres\", \"Navlanart1\");\n        try {\n            statement = connection.prepareStatement(sqlStatement);\n            try {\n                resultSet = statement.executeQuery();\n                while (resultSet.next()) {\n                    ClassRoom classRoom = new ClassRoom(resultSet.getString(\"name\"));\n                    classRoomsList.add(classRoom);\n                }\n            } catch (SQLException e) {\n            } finally {\n                try {\n                    resultSet.close();\n                } catch (SQLException e) {\n                    e.printStackTrace();\n                }\n            }\n        } catch (SQLException e) {\n            e.printStackTrace();\n        } finally {\n            try {\n                statement.close();\n            } catch (SQLException e) {\n                e.printStackTrace();\n            }\n        }\n    } catch (SQLException e) {\n        e.printStackTrace();\n    } finally {\n        try {\n            connection.close();\n        } catch (SQLException e) {\n            e.printStackTrace();\n        }\n    }\n    return classRoomsList;\n}\n</code></pre>\n\n<p>Now i want to test it by class like that</p>\n\n<pre><code>import static org.mockito.Matchers.anyString;\nimport static org.mockito.Mockito.times;\nimport static org.mockito.Mockito.verify;\nimport static org.mockito.Mockito.when;\nimport static org.powermock.api.easymock.PowerMock.mockStatic;\n\nimport java.sql.Connection;\nimport java.sql.DriverManager;\nimport java.sql.PreparedStatement;\nimport java.sql.ResultSet;\nimport java.sql.SQLException;\n\nimport org.junit.AfterClass;\nimport org.junit.Before;\nimport org.junit.BeforeClass;\nimport org.junit.Test;\nimport org.junit.runner.RunWith;\nimport org.mockito.Mock;\nimport org.mockito.runners.MockitoJUnitRunner;\nimport org.powermock.core.classloader.annotations.PrepareForTest;\n\nimport com.kolosok.university.dao.ClassRoomDao;\n\n@RunWith(MockitoJUnitRunner.class)\n@PrepareForTest(DriverManager.class)\npublic class TestClassRoomDao {\n\n@Mock\nConnection mockConnection;\n\n@Mock\nPreparedStatement mockPreparedStatement;\n\n@Mock\nResultSet mockResultSet;\n\n@Test\npublic void testGetAllClassRooms() throws SQLException {\n\n    mockStatic(DriverManager.class);\n\n    when(DriverManager.getConnection(anyString(), anyString(), anyString())).thenReturn(mockConnection);\n    when(mockConnection.prepareStatement(anyString())).thenReturn(mockPreparedStatement);\n    when(mockPreparedStatement.executeQuery()).thenReturn(mockResultSet);\n    when(mockResultSet.next()).thenReturn(Boolean.FALSE);\n\n    ClassRoomDao classRoomDao = new ClassRoomDao();\n    classRoomDao.getAllClassRooms();\n\n    verify(mockConnection, times(1)).prepareStatement(anyString());\n    verify(mockPreparedStatement, times(1)).executeQuery();\n    verify(mockResultSet, times(1)).next();\n}\n</code></pre>\n\n<p>}</p>\n\n<p>But it doesnt work.</p>\n\n<pre><code>java.sql.SQLException: No suitable driver found for \n    at java.sql.DriverManager.getConnection(Unknown Source)\n    at java.sql.DriverManager.getConnection(Unknown Source)\n    at     com.kolosok.university.TestClassRoomDao.testGetAllClassRooms(TestClassRoomDao.java:58)\n</code></pre>\n\n<p>I read alot of stackOverFlow answers on similar quastions. But still cant solve my issue</p>\n\n<p>I'm using </p>\n\n<p>postgresql-42.0.0.jre7.jar</p>\n\n<p>mockito-all-1.10.19.jar</p>\n\n<p>powermock-api-easymock-1.6.6.jar</p>\n\n<p>powermock-core-1.6.6.jar</p>\n\n<p>cglib-nodep-3.1.jar</p>\n\n<p>javassist-3.12.1.GA.jar</p>\n\n<p>objenesis-2.5.jar</p>\n\n<p>powermock-api-mockito-1.6.6.jar</p>\n\n<p>powermock-api-support-1.6.6.jar</p>\n\n<p>easymock-3.4.jar</p>\n"},{"tags":["java","eclipse","spring","java-native-interface"],"answers":[{"tags":[],"owner":{"account_id":8261994,"reputation":155,"user_id":6213033,"display_name":"Nath Papadacis"},"down_vote_count":0,"up_vote_count":4,"is_accepted":true,"score":4,"last_activity_date":1460819338,"creation_date":1460819338,"answer_id":36665826,"question_id":36665212,"body_markdown":"The question is quite vague but I can offer a couple of bits of advice from work I&#39;ve done in the past.\r\n\r\n 1. Forget about integrating with &quot;Spring&quot;. Concentrate on integrating with Java and let Spring help you out later.\r\n 2. Be very, very careful with the types and memory allocation in C\r\n 3. [Here](http://www.thirststudios.co.uk/jni.pdf)&#39;s a book on JNI that I found immensely helpful when I was working on it. It&#39;s a little dated but still valid\r\n 4. I did most of the work in C and then patched in a simple single method hook to Java. That way I did most of the integration with the existing code in its native language.\r\n 5. Give your C code a main method that lets you test the C code independently of the Java. Then you can compile your C file as both a library (dll/so) and an executable. The executable can be called on it&#39;s own with arguments to test the calls to existing calls.\r\n\r\nThe general process is.\r\n\r\n**Java End**\r\n\r\n\tpublic class statusBlock {\r\n        /* A Java representation of a Status Block */\r\n    \tprivate long errcode = 0;\r\n    \tprivate long errref = 0;\r\n    \tprivate String errmsg = &quot;&quot;;\r\n    \tprivate long[] TmidArray;\r\n    \tprivate long evt_id = 0;\r\n    \tprivate short IgViolation_severity = 0;\r\n\t}\r\n\r\n    public class MyFunkyJNIClass {\r\n        private Object response;\r\n    \r\n        /**\r\n         * To generate the C-header for a native call use: javah -jni\r\n         * example.package.MyFunkyJNIClass from target/classes folder.\r\n         */\r\n        private native int nativeExecuteFunction(int callType, Object payload, Object response);\r\n\r\n        public MyFunkyJNIClass() {\r\n            System.loadLibrary(&quot;theCLibrary&quot;);\r\n        }\r\n    }\r\n\r\nIn the example above I load the C side of the code using System.loadLibrary and define some fields that I can populate from my C code. To execute just call the *native* function `nativeExecuteFunction(1, &quot;my payload&quot;, respObject);` On the C side I can use the first argument to choose what to do. *It simplified my problems at the time*\r\n\r\n**C Side**\r\n        \r\n    JNIEXPORT jint JNICALL Java_example_package_MyFunkyJNIClass_nativeExecuteFunction(JNIEnv *env, jobject this, jint CallType, jobject Payload)\r\n    {\r\n        // **** JNI Specific declarations for mapping ****\r\n        jclass          cls, cls2, cls3;\r\n        jmethodID       mid, mid2;\r\n        jfieldID        fid;\r\n        jint            rc = 0;\r\n        jsize           js = 0;\r\n        jbyte           jb;\r\n        jobject         jobj, jobj2, jro;\r\n        jobjectArray    jobjArray, jobjArray2;\r\n    \r\n        _svc_results    results;\r\n\r\n        switch ((int)CallType)\r\n        {\r\n        case CALLTYPE1:       // 1\r\n            DEBUG_PRINT(&quot;JNI Call Type 1 in progress...\\n&quot;);\r\n            // JNI mapping happens here\r\n            stat = DoSomethingInC(args, &amp;results);\r\n    \r\n            // Map from C structure (_statblk) to Java object\r\n            if (stat == SUCCESS) {\r\n                DEBUG_PRINT(&quot;\\tMapping from C structure (_statblk) to Java object\\n&quot;);\r\n    \r\n                cls  = (*env)-&gt;FindClass(env, &quot;Lexample/package/statusBlock;&quot;);\r\n                mid  = (*env)-&gt;GetMethodID(env, cls, &quot;&lt;init&gt;&quot;, &quot;()V&quot;); if (mid == NULL) return -1;\r\n                jro  = (*env)-&gt;NewObject(env, cls, mid); if (jro == NULL) return -1;\r\n    \r\n                fid  = (*env)-&gt;GetFieldID(env, cls, &quot;errcode&quot;,&quot;I&quot;); if (fid == NULL) return -1;\r\n                (*env)-&gt;SetIntField(env, jro, fid, (jint)results.statblk.errcode);\r\n                DEBUG_PRINT(&quot;\\t\\tMapped errcode: %d\\n&quot;,results.statblk.errcode);\r\n    \r\n                fid  = (*env)-&gt;GetFieldID(env, cls, &quot;errref&quot;,&quot;I&quot;); if (fid == NULL) return -1;\r\n                (*env)-&gt;SetIntField(env, jro, fid, (jint)results.statblk.errref);\r\n                DEBUG_PRINT(&quot;\\t\\tMapped errref: %d\\n&quot;,results.statblk.errref);\r\n    \r\n                fid  = (*env)-&gt;GetFieldID(env, cls, &quot;errmsg&quot;,&quot;[B&quot;); if (fid == NULL) return -1;\r\n                jobj = (*env)-&gt;NewByteArray(env, MAX_ERR);\r\n                (*env)-&gt;SetByteArrayRegion(env, (jbyteArray)jobj, 0, MAX_ERR, (jbyte*)results.statblk.errmsg);\r\n                (*env)-&gt;SetObjectField(env, jro, fid, jobj);\r\n                (*env)-&gt;DeleteLocalRef(env, jobj);\r\n                DEBUG_PRINT(&quot;\\t\\tMapped errmsg: %s\\n&quot;,results.statblk.errmsg);\r\n    \r\n                fid  = (*env)-&gt;GetFieldID(env, cls, &quot;TmidArray&quot;,&quot;[I&quot;); if (fid == NULL) return -1;\r\n                jobj = (*env)-&gt;NewIntArray(env, (jsize)results.statblk.TmidArray.TmidArray_len);\r\n                (*env)-&gt;SetIntArrayRegion(env, (jintArray)jobj, 0, \r\n                                          (jsize)results.statblk.TmidArray.TmidArray_len,\r\n                                          (jint*)results.statblk.TmidArray.TmidArray_val);\r\n                (*env)-&gt;SetObjectField(env, jro, fid, jobj);\r\n                (*env)-&gt;DeleteLocalRef(env, jobj);\r\n                DEBUG_PRINT(&quot;\\t\\tMapped TmidArray\\n&quot;);\r\n    \r\n                fid  = (*env)-&gt;GetFieldID(env, cls, &quot;evt_id&quot;,&quot;I&quot;); if (fid == NULL) return -1;\r\n                (*env)-&gt;SetIntField(env, jro, fid, (jint)results.statblk.evt_id);\r\n                DEBUG_PRINT(&quot;\\t\\tMapped evt_id: %d\\n&quot;,results.statblk.evt_id);\r\n    \r\n                cls  = (*env)-&gt;GetObjectClass(env, this);\r\n                fid  = (*env)-&gt;GetFieldID(env, cls, &quot;response&quot;,&quot;Ljava/lang/Object;&quot;); if (fid == NULL) return -1;\r\n                (*env)-&gt;SetObjectField(env, this, fid, jro);\r\n    \r\n                DEBUG_PRINT(&quot;\\tMapping from C structure (_statblk) to Java object - DONE\\n&quot;);\r\n            } else {\r\n                DEBUG_PRINT(&quot;JNI Call Type 1 in progress... Returning Error: %d\\n&quot;, stat);\r\n                return (jint)stat;\r\n            }\r\n    \r\n            /* Free our native memory */\r\n            cls  = (*env)-&gt;GetObjectClass(env, Payload);\r\n            fid  = (*env)-&gt;GetFieldID(env, cls, &quot;message&quot;,&quot;Ljava/lang/String;&quot;); if (fid == NULL) return -1;\r\n            jobj = (*env)-&gt;GetObjectField(env, Payload, fid);\r\n            GPS_Free(results.statblk.TmidArray.TmidArray_val);\r\n            GPS_Free(results.statblk.ErrorArray.ErrorArray_val);\r\n            DEBUG_PRINT(&quot;JNI RTP Posting in progress... DONE\\n&quot;);\r\n            break;\r\n        case PING:          // 2\r\n            DEBUG_PRINT(&quot;No Java to C mapping required\\n&quot;);\r\n            DEBUG_PRINT(&quot;JNI Ping in progress...\\n&quot;);\r\n            stat = doPing();\r\n            \r\n            DEBUG_PRINT(&quot;No C to Java mapping required\\n&quot;);\r\n            // Stop null pointer exception if client tries to access the response object.\r\n            cls  = (*env)-&gt;FindClass(env, &quot;Lexample/package/EmptySerializableClass;&quot;);\r\n            mid  = (*env)-&gt;GetMethodID(env, cls, &quot;&lt;init&gt;&quot;, &quot;()V&quot;); if (mid == NULL) return -1;\r\n            jro  = (*env)-&gt;NewObject(env, cls, mid); if (jro == NULL) return -1;\r\n    \r\n            cls  = (*env)-&gt;GetObjectClass(env, this);\r\n            fid  = (*env)-&gt;GetFieldID(env, cls, &quot;response&quot;,&quot;Ljava/lang/Object;&quot;); if (fid == NULL) return -1;\r\n            (*env)-&gt;SetObjectField(env, this, fid, jro);\r\n            DEBUG_PRINT(&quot;JNI Ping in progress... DONE\\n&quot;);\r\n    \r\n            return (jint)rpc_stat;\r\n            break;\r\n        default:\r\n            fprintf(stderr,&quot;Unknown call type\\n&quot;);\r\n            rc = -1;\r\n            break;\r\n        }\r\n    \r\n        return rc;\r\n    }\r\n\r\nI could go on and on, but it just takes a bit of careful reading of that book.\r\n\r\nThere doesn&#39;t really need to be any further integration with Spring. You could stick a `@Component` or `@Service` annotation on the `MyFunkyJNIClass`.\r\n\r\nI hope this is of some help to you.","title":"How to configure spring with jni?","body":"<p>The question is quite vague but I can offer a couple of bits of advice from work I've done in the past.</p>\n\n<ol>\n<li>Forget about integrating with \"Spring\". Concentrate on integrating with Java and let Spring help you out later.</li>\n<li>Be very, very careful with the types and memory allocation in C</li>\n<li><a href=\"http://www.thirststudios.co.uk/jni.pdf\" rel=\"nofollow\">Here</a>'s a book on JNI that I found immensely helpful when I was working on it. It's a little dated but still valid</li>\n<li>I did most of the work in C and then patched in a simple single method hook to Java. That way I did most of the integration with the existing code in its native language.</li>\n<li>Give your C code a main method that lets you test the C code independently of the Java. Then you can compile your C file as both a library (dll/so) and an executable. The executable can be called on it's own with arguments to test the calls to existing calls.</li>\n</ol>\n\n<p>The general process is.</p>\n\n<p><strong>Java End</strong></p>\n\n<pre><code>public class statusBlock {\n    /* A Java representation of a Status Block */\n    private long errcode = 0;\n    private long errref = 0;\n    private String errmsg = \"\";\n    private long[] TmidArray;\n    private long evt_id = 0;\n    private short IgViolation_severity = 0;\n}\n\npublic class MyFunkyJNIClass {\n    private Object response;\n\n    /**\n     * To generate the C-header for a native call use: javah -jni\n     * example.package.MyFunkyJNIClass from target/classes folder.\n     */\n    private native int nativeExecuteFunction(int callType, Object payload, Object response);\n\n    public MyFunkyJNIClass() {\n        System.loadLibrary(\"theCLibrary\");\n    }\n}\n</code></pre>\n\n<p>In the example above I load the C side of the code using System.loadLibrary and define some fields that I can populate from my C code. To execute just call the <em>native</em> function <code>nativeExecuteFunction(1, \"my payload\", respObject);</code> On the C side I can use the first argument to choose what to do. <em>It simplified my problems at the time</em></p>\n\n<p><strong>C Side</strong></p>\n\n<pre><code>JNIEXPORT jint JNICALL Java_example_package_MyFunkyJNIClass_nativeExecuteFunction(JNIEnv *env, jobject this, jint CallType, jobject Payload)\n{\n    // **** JNI Specific declarations for mapping ****\n    jclass          cls, cls2, cls3;\n    jmethodID       mid, mid2;\n    jfieldID        fid;\n    jint            rc = 0;\n    jsize           js = 0;\n    jbyte           jb;\n    jobject         jobj, jobj2, jro;\n    jobjectArray    jobjArray, jobjArray2;\n\n    _svc_results    results;\n\n    switch ((int)CallType)\n    {\n    case CALLTYPE1:       // 1\n        DEBUG_PRINT(\"JNI Call Type 1 in progress...\\n\");\n        // JNI mapping happens here\n        stat = DoSomethingInC(args, &amp;results);\n\n        // Map from C structure (_statblk) to Java object\n        if (stat == SUCCESS) {\n            DEBUG_PRINT(\"\\tMapping from C structure (_statblk) to Java object\\n\");\n\n            cls  = (*env)-&gt;FindClass(env, \"Lexample/package/statusBlock;\");\n            mid  = (*env)-&gt;GetMethodID(env, cls, \"&lt;init&gt;\", \"()V\"); if (mid == NULL) return -1;\n            jro  = (*env)-&gt;NewObject(env, cls, mid); if (jro == NULL) return -1;\n\n            fid  = (*env)-&gt;GetFieldID(env, cls, \"errcode\",\"I\"); if (fid == NULL) return -1;\n            (*env)-&gt;SetIntField(env, jro, fid, (jint)results.statblk.errcode);\n            DEBUG_PRINT(\"\\t\\tMapped errcode: %d\\n\",results.statblk.errcode);\n\n            fid  = (*env)-&gt;GetFieldID(env, cls, \"errref\",\"I\"); if (fid == NULL) return -1;\n            (*env)-&gt;SetIntField(env, jro, fid, (jint)results.statblk.errref);\n            DEBUG_PRINT(\"\\t\\tMapped errref: %d\\n\",results.statblk.errref);\n\n            fid  = (*env)-&gt;GetFieldID(env, cls, \"errmsg\",\"[B\"); if (fid == NULL) return -1;\n            jobj = (*env)-&gt;NewByteArray(env, MAX_ERR);\n            (*env)-&gt;SetByteArrayRegion(env, (jbyteArray)jobj, 0, MAX_ERR, (jbyte*)results.statblk.errmsg);\n            (*env)-&gt;SetObjectField(env, jro, fid, jobj);\n            (*env)-&gt;DeleteLocalRef(env, jobj);\n            DEBUG_PRINT(\"\\t\\tMapped errmsg: %s\\n\",results.statblk.errmsg);\n\n            fid  = (*env)-&gt;GetFieldID(env, cls, \"TmidArray\",\"[I\"); if (fid == NULL) return -1;\n            jobj = (*env)-&gt;NewIntArray(env, (jsize)results.statblk.TmidArray.TmidArray_len);\n            (*env)-&gt;SetIntArrayRegion(env, (jintArray)jobj, 0, \n                                      (jsize)results.statblk.TmidArray.TmidArray_len,\n                                      (jint*)results.statblk.TmidArray.TmidArray_val);\n            (*env)-&gt;SetObjectField(env, jro, fid, jobj);\n            (*env)-&gt;DeleteLocalRef(env, jobj);\n            DEBUG_PRINT(\"\\t\\tMapped TmidArray\\n\");\n\n            fid  = (*env)-&gt;GetFieldID(env, cls, \"evt_id\",\"I\"); if (fid == NULL) return -1;\n            (*env)-&gt;SetIntField(env, jro, fid, (jint)results.statblk.evt_id);\n            DEBUG_PRINT(\"\\t\\tMapped evt_id: %d\\n\",results.statblk.evt_id);\n\n            cls  = (*env)-&gt;GetObjectClass(env, this);\n            fid  = (*env)-&gt;GetFieldID(env, cls, \"response\",\"Ljava/lang/Object;\"); if (fid == NULL) return -1;\n            (*env)-&gt;SetObjectField(env, this, fid, jro);\n\n            DEBUG_PRINT(\"\\tMapping from C structure (_statblk) to Java object - DONE\\n\");\n        } else {\n            DEBUG_PRINT(\"JNI Call Type 1 in progress... Returning Error: %d\\n\", stat);\n            return (jint)stat;\n        }\n\n        /* Free our native memory */\n        cls  = (*env)-&gt;GetObjectClass(env, Payload);\n        fid  = (*env)-&gt;GetFieldID(env, cls, \"message\",\"Ljava/lang/String;\"); if (fid == NULL) return -1;\n        jobj = (*env)-&gt;GetObjectField(env, Payload, fid);\n        GPS_Free(results.statblk.TmidArray.TmidArray_val);\n        GPS_Free(results.statblk.ErrorArray.ErrorArray_val);\n        DEBUG_PRINT(\"JNI RTP Posting in progress... DONE\\n\");\n        break;\n    case PING:          // 2\n        DEBUG_PRINT(\"No Java to C mapping required\\n\");\n        DEBUG_PRINT(\"JNI Ping in progress...\\n\");\n        stat = doPing();\n\n        DEBUG_PRINT(\"No C to Java mapping required\\n\");\n        // Stop null pointer exception if client tries to access the response object.\n        cls  = (*env)-&gt;FindClass(env, \"Lexample/package/EmptySerializableClass;\");\n        mid  = (*env)-&gt;GetMethodID(env, cls, \"&lt;init&gt;\", \"()V\"); if (mid == NULL) return -1;\n        jro  = (*env)-&gt;NewObject(env, cls, mid); if (jro == NULL) return -1;\n\n        cls  = (*env)-&gt;GetObjectClass(env, this);\n        fid  = (*env)-&gt;GetFieldID(env, cls, \"response\",\"Ljava/lang/Object;\"); if (fid == NULL) return -1;\n        (*env)-&gt;SetObjectField(env, this, fid, jro);\n        DEBUG_PRINT(\"JNI Ping in progress... DONE\\n\");\n\n        return (jint)rpc_stat;\n        break;\n    default:\n        fprintf(stderr,\"Unknown call type\\n\");\n        rc = -1;\n        break;\n    }\n\n    return rc;\n}\n</code></pre>\n\n<p>I could go on and on, but it just takes a bit of careful reading of that book.</p>\n\n<p>There doesn't really need to be any further integration with Spring. You could stick a <code>@Component</code> or <code>@Service</code> annotation on the <code>MyFunkyJNIClass</code>.</p>\n\n<p>I hope this is of some help to you.</p>\n"},{"tags":[],"owner":{"account_id":13263616,"reputation":51,"user_id":9577283,"display_name":"catch22"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1637375281,"creation_date":1637375281,"answer_id":70042801,"question_id":36665212,"body_markdown":"Echoing previous answers that Spring Integration is not really the important thing here. More importantly, is having the JVM interface to your native C/C++ node. Since the question was asked there are a number of online resources available that should help new users to this space.\r\n\r\n[JNI Integration walktrough][1]\r\nThe Java™ Native Interface: Programmer’s Guide and Specification book is also quite useful\r\nIf you really want to go deep then the [official specification][2] is very helpful \r\n\r\n\r\n  [1]: https://www.baeldung.com/jni\r\n  [2]: https://docs.oracle.com/javase/7/docs/technotes/guides/jni/spec/jniTOC.html","title":"How to configure spring with jni?","body":"<p>Echoing previous answers that Spring Integration is not really the important thing here. More importantly, is having the JVM interface to your native C/C++ node. Since the question was asked there are a number of online resources available that should help new users to this space.</p>\n<p><a href=\"https://www.baeldung.com/jni\" rel=\"nofollow noreferrer\">JNI Integration walktrough</a>\nThe Java™ Native Interface: Programmer’s Guide and Specification book is also quite useful\nIf you really want to go deep then the <a href=\"https://docs.oracle.com/javase/7/docs/technotes/guides/jni/spec/jniTOC.html\" rel=\"nofollow noreferrer\">official specification</a> is very helpful</p>\n"}],"owner":{"account_id":8262232,"reputation":77,"user_id":6213194,"accept_rate":80,"display_name":"Abhijeet Kale"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":3546,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":36665826,"answer_count":2,"score":2,"last_activity_date":1637375281,"creation_date":1460815766,"question_id":36665212,"body_markdown":"I have requirement to integrate spring with some native code written C and I am new to spring and don&#39;t have any idea about it if anybody have experience to integrate spring with JNI then please share with me.\r\n\r\nThanks in advance.\r\n ","title":"How to configure spring with jni?","body":"<p>I have requirement to integrate spring with some native code written C and I am new to spring and don't have any idea about it if anybody have experience to integrate spring with JNI then please share with me.</p>\n\n<p>Thanks in advance.</p>\n"},{"tags":["java","spring","jpa"],"comments":[{"owner":{"account_id":3340852,"reputation":1493,"user_id":2807177,"display_name":"gmanjon"},"score":0,"creation_date":1637371737,"post_id":70042401,"comment_id":123816645,"body_markdown":"Could you please add full stacktrace and then code that generates de exception(the `persist`, `merge`, `saveOrUpdate`, etc. with surrounding code)","body":"Could you please add full stacktrace and then code that generates de exception(the <code>persist</code>, <code>merge</code>, <code>saveOrUpdate</code>, etc. with surrounding code)"},{"owner":{"account_id":3340852,"reputation":1493,"user_id":2807177,"display_name":"gmanjon"},"score":0,"creation_date":1637373045,"post_id":70042401,"comment_id":123816824,"body_markdown":"And you should not use `@ElementCollection` here. That is ment for primitive objects like a list of strings. To map a collection of another entity you should use `@OneToMany`","body":"And you should not use <code>@ElementCollection</code> here. That is ment for primitive objects like a list of strings. To map a collection of another entity you should use <code>@OneToMany</code>"},{"owner":{"account_id":21802390,"reputation":13,"user_id":16101013,"display_name":"M Jasso"},"score":0,"creation_date":1637374220,"post_id":70042401,"comment_id":123816984,"body_markdown":"Thanks for answering. I added the AlquilerConfig Class where I am saving data. Also added the error message. If I remove @ElementCollection I got the error: Could not determine type for: java.util.List, at table: alquiler, for columns: [org.hibernate.mapping.Column(peliculas)]","body":"Thanks for answering. I added the AlquilerConfig Class where I am saving data. Also added the error message. If I remove @ElementCollection I got the error: Could not determine type for: java.util.List, at table: alquiler, for columns: [org.hibernate.mapping.Column(peliculas)]"},{"owner":{"account_id":3340852,"reputation":1493,"user_id":2807177,"display_name":"gmanjon"},"score":0,"creation_date":1637374368,"post_id":70042401,"comment_id":123816999,"body_markdown":"I didn&#39;t mean removing it, but replacing it with `@OneToMany`","body":"I didn&#39;t mean removing it, but replacing it with <code>@OneToMany</code>"},{"owner":{"account_id":3340852,"reputation":1493,"user_id":2807177,"display_name":"gmanjon"},"score":0,"creation_date":1637374449,"post_id":70042401,"comment_id":123817006,"body_markdown":"Please enclose the stacktrace between triple backticks for it to be properly formatted (``` stactrace ```)","body":"Please enclose the stacktrace between triple backticks for it to be properly formatted (``` stactrace ```)"}],"answers":[{"tags":[],"owner":{"account_id":3340852,"reputation":1493,"user_id":2807177,"display_name":"gmanjon"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1637375186,"creation_date":1637374783,"answer_id":70042778,"question_id":70042401,"body_markdown":"You said that you added the  `CascadeType`. But you didn&#39;t add it to the `Pelicula` relation. When you try to save an `Alquiler` Hibernate finds that the `Pelicula`s are not saved, and as it doesn&#39;t have the `CascadeType` it gives that exception.\r\n\r\nMap it this way\r\n\r\n```java\r\n@OneToMany(cascade = CascadeType.PERSIST)\r\nprivate List&lt;Pelicula&gt; peliculas;\r\n```","title":"Hibernate Error Message: Save the transient instance before flushing","body":"<p>You said that you added the  <code>CascadeType</code>. But you didn't add it to the <code>Pelicula</code> relation. When you try to save an <code>Alquiler</code> Hibernate finds that the <code>Pelicula</code>s are not saved, and as it doesn't have the <code>CascadeType</code> it gives that exception.</p>\n<p>Map it this way</p>\n<pre class=\"lang-java prettyprint-override\"><code>@OneToMany(cascade = CascadeType.PERSIST)\nprivate List&lt;Pelicula&gt; peliculas;\n</code></pre>\n"}],"owner":{"account_id":21802390,"reputation":13,"user_id":16101013,"display_name":"M Jasso"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":4408,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":70042778,"answer_count":1,"score":1,"last_activity_date":1637375186,"creation_date":1637369562,"question_id":70042401,"body_markdown":"While trying to create a one to many relationship I am geeting &quot;Save the transient instance before flushing&quot; error message usign Spring JPA connection to PostgreSQL.\r\n&quot;Alquiler&quot;(One) is the name of my entity and the other is &quot;Peliculas&quot;(To Many)\r\n\r\nNotice that I already added cascade = CascadeType.ALL And still getting the issue.\r\nThis is the class where I am trying to create the relationship. Help!\r\n\r\n\r\n    package com.Project.Movies.model;\r\n\r\n    import java.util.Date;\r\n    import java.util.List;\r\n\r\n    import javax.persistence.*;\r\n\r\n    @Entity\r\n    @Table(name = &quot;Alquiler&quot;)\r\n    public class Alquiler {\r\n\t@Id\r\n\t@SequenceGenerator(\r\n\t\t\tname = &quot;alquiler_seq&quot;,\r\n\t\t\tsequenceName = &quot;alquiler_seq&quot;,\r\n\t\t\tallocationSize = 1\r\n\t\t\t)\r\n\t@GeneratedValue(\r\n\t\t\tstrategy = GenerationType.SEQUENCE,\r\n\t\t\tgenerator = &quot;alquiler_seq&quot;\r\n\t\t\t)\r\n\t\r\n\tprivate Long id;\r\n\t\r\n\tint dias;\r\n\tfloat costopordia;\r\n\tString formapago;\r\n\tDate fechaAlquiler;\r\n\t\r\n\t@Column\r\n    @ElementCollection(targetClass=Pelicula.class)\r\n    private List&lt;Pelicula&gt; peliculas;\r\n\t\r\n\t@OneToOne(cascade = CascadeType.ALL)\r\n\t@JoinColumn(name = &quot;id&quot;)\r\n    private Socio socio;\r\n    \r\n\r\n\tpublic Alquiler() {\r\n    \tsuper();\r\n    }\r\n    \r\n\tpublic Alquiler(int dias, float costopordia, String formapago, Date fechaAlquiler, List&lt;Pelicula&gt; pelicula, Socio socio) {\r\n\t\tsuper();\r\n\t\tthis.dias = dias;\r\n\t\tthis.costopordia = costopordia;\r\n\t\tthis.formapago = formapago;\r\n\t\tthis.fechaAlquiler = fechaAlquiler;\r\n\t\tthis.peliculas = pelicula;\r\n\t\tthis.socio = socio;\r\n\t}\r\n\t\r\n\tpublic Long getId() {\r\n\t\treturn id;\r\n\t}\r\n\r\n\tpublic void setId(Long id) {\r\n\t\tthis.id = id;\r\n\t}\r\n    \r\n\tpublic Date getFechaAlquiler() {\r\n\t\treturn fechaAlquiler;\r\n\t}\r\n\r\n\tpublic void setFechaAlquiler(Date fechaAlquiler) {\r\n\t\tthis.fechaAlquiler = fechaAlquiler;\r\n\t}\r\n\t\r\n\t@OneToMany(targetEntity=Pelicula.class, cascade = CascadeType.ALL,orphanRemoval = true)\r\n\tpublic List&lt;Pelicula&gt; getPeliculas() {\r\n\t\treturn peliculas;\r\n\t}\r\n\r\n\tpublic void setPeliculas(List&lt;Pelicula&gt; pelicula) {\r\n\t\tthis.peliculas = pelicula;\r\n\t}\r\n\r\n\tpublic Socio getSocio() {\r\n\t\treturn socio;\r\n\t}\r\n\r\n\tpublic void setSocio(Socio socio) {\r\n\t\tthis.socio = socio;\r\n\t}\r\n\r\n\tboolean CrearAlquiler() {\r\n\t\treturn true;\r\n\t}\r\n\r\n\tpublic int getDias() {\r\n\t\treturn dias;\r\n\t}\r\n\r\n\tpublic void setDias(int dias) {\r\n\t\tthis.dias = dias;\r\n\t}\r\n\r\n\tpublic float getCostopordia() {\r\n\t\treturn costopordia;\r\n\t}\r\n\r\n\tpublic void setCostopordia(float costopordia) {\r\n\t\tthis.costopordia = costopordia;\r\n\t}\r\n\r\n\tpublic String getFormapago() {\r\n\t\treturn formapago;\r\n\t}\r\n\r\n\tpublic void setFormapago(String formapago) {\r\n\t\tthis.formapago = formapago;\r\n\t}\r\n\t\r\n}\r\n\r\n\r\n\r\nAlquiler Config Class\r\n\r\n    package com.Project.Movies.model;\r\n\r\n    import java.util.ArrayList;\r\n    import java.util.Date;\r\n    import java.util.List;\r\n\r\n    import org.springframework.boot.CommandLineRunner;\r\n    import org.springframework.context.annotation.Bean;\r\n    import org.springframework.context.annotation.Configuration;\r\n\r\n    @Configuration\r\n    public class AlquilerConfig {\r\n\t@Bean\r\n\tCommandLineRunner commandLineRunnerA(IAlquilerRepository ialquilerRepository)\r\n\t{\r\n\t\t\r\n\treturn args -&gt;{\r\n\t\t\r\n\t\tList&lt;Pelicula&gt; myList = new ArrayList&lt;Pelicula&gt;();\r\n\t\t\r\n\t\tPelicula shawshank = new Pelicula(&quot;The Shawshank Redemption&quot;,1994,&quot;2hr 22mins&quot;,&quot;Two imprisoned men bond over a number of years, finding solace and eventual redemption through...&quot;,&quot;Frank Darabont&quot;,&quot;B&quot;,&quot;Drama&quot;,3);\r\n\t\tPelicula inception = new Pelicula(&quot;Inception&quot;,2010,&quot;2hrs 28mins&quot;,&quot;Dom Cobb es un ladr&#243;n con una extra&#241;a habilidad para entrar a los sue&#241;os de la gente y robarles los secretos de sus subconscientes&quot;,&quot;Christopher Nolan&quot;,&quot;C&quot;,&quot;Science Fiction&quot;,4);\r\n\t\tPelicula fightclub = new Pelicula(&quot;Fight Club&quot;,1999,&quot;2hrs 19mins&quot;,&quot;Un empleado de oficina insomne, harto de su vida, se cruza con un vendedor peculiar...&quot;,&quot;David Fincher&quot;,&quot;C&quot;,&quot;Suspenso/Drama&quot;,2);\t\t\t\t\t\r\n\t\t\r\n\t\tmyList.add(inception);\r\n\t\t\r\n\t\tmyList.add(shawshank);\r\n\t\tmyList.add(inception);\r\n\t\tmyList.add(fightclub);\r\n\t\t\r\n\t\tSocio mariana= new Socio(&quot;Mariana Navidad&quot;,&quot;Arcos #34, Los Arcos&quot;,&quot;4446784563&quot;);\r\n\t\tSocio sebastian= new Socio(&quot;Sebastian Mendoza&quot;,&quot;Rios #38, Mares&quot;,&quot;4336784563&quot;);\r\n\t\tSocio roberto= new Socio(&quot;Roberto Obregon&quot;,&quot;Estrella #89, Universo&quot;,&quot;4556784563&quot;);\r\n\t\t\r\n\t\tAlquiler shawshankAlquiler = new Alquiler(3,30,&quot;efectivo&quot;,new Date(),myList,mariana);\r\n\t\tAlquiler inceptionAlquiler = new Alquiler(5,25,&quot;tarjeta&quot;,new Date(),myList,sebastian);\r\n\t\tAlquiler inceptionAlquiler2 = new Alquiler(5,25,&quot;efectivo&quot;,new Date(),myList,roberto);\r\n\t\t\r\n\t\tialquilerRepository.saveAll(List.of(shawshankAlquiler,inceptionAlquiler,inceptionAlquiler2));\r\n\t};\t\r\n\t}\r\n}\r\n\r\n\r\nError Message\r\n\r\n\r\njava.lang.IllegalStateException: Failed to execute CommandLineRunner\r\n\tat org.springframework.boot.SpringApplication.callRunner(SpringApplication.java:794) ~[spring-boot-2.5.6.jar:2.5.6]\r\n\tat org.springframework.boot.SpringApplication.callRunners(SpringApplication.java:775) ~[spring-boot-2.5.6.jar:2.5.6]\r\n\tat org.springframework.boot.SpringApplication.run(SpringApplication.java:345) ~[spring-boot-2.5.6.jar:2.5.6]\r\n\tat org.springframework.boot.SpringApplication.run(SpringApplication.java:1343) ~[spring-boot-2.5.6.jar:2.5.6]\r\n\tat org.springframework.boot.SpringApplication.run(SpringApplication.java:1332) ~[spring-boot-2.5.6.jar:2.5.6]\r\n\tat com.univaProject.UnivaMovies.UnivaMoviesApplication.main(UnivaMoviesApplication.java:11) ~[classes/:na]\r\nCaused by: org.springframework.dao.InvalidDataAccessApiUsageException: org.hibernate.TransientObjectException: object references an unsaved transient instance - save the transient instance before flushing: com.univaProject.UnivaMovies.model.Pelicula; nested exception is java.lang.IllegalStateException: org.hibernate.TransientObjectException: object references an unsaved transient instance - save the transient instance before flushing: com.univaProject.UnivaMovies.model.Pelicula\r\n\tat org.springframework.orm.jpa.EntityManagerFactoryUtils.convertJpaAccessExceptionIfPossible(EntityManagerFactoryUtils.java:371) ~[spring-orm-5.3.12.jar:5.3.12]\r\n\tat org.springframework.orm.jpa.vendor.HibernateJpaDialect.translateExceptionIfPossible(HibernateJpaDialect.java:235) ~[spring-orm-5.3.12.jar:5.3.12]\r\n\tat org.springframework.orm.jpa.JpaTransactionManager.doCommit(JpaTransactionManager.java:566) ~[spring-orm-5.3.12.jar:5.3.12]\r\n\tat org.springframework.transaction.support.AbstractPlatformTransactionManager.processCommit(AbstractPlatformTransactionManager.java:743) ~[spring-tx-5.3.12.jar:5.3.12]\r\n\tat org.springframework.transaction.support.AbstractPlatformTransactionManager.commit(AbstractPlatformTransactionManager.java:711) ~[spring-tx-5.3.12.jar:5.3.12]\r\n\tat org.springframework.transaction.interceptor.TransactionAspectSupport.commitTransactionAfterReturning(TransactionAspectSupport.java:654) ~[spring-tx-5.3.12.jar:5.3.12]\r\n\tat org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:407) ~[spring-tx-5.3.12.jar:5.3.12]\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119) ~[spring-tx-5.3.12.jar:5.3.12]\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186) ~[spring-aop-5.3.12.jar:5.3.12]\r\n\tat org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:137) ~[spring-tx-5.3.12.jar:5.3.12]\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186) ~[spring-aop-5.3.12.jar:5.3.12]\r\n\tat org.springframework.data.jpa.repository.support.CrudMethodMetadataPostProcessor$CrudMethodMetadataPopulatingMethodInterceptor.invoke(CrudMethodMetadataPostProcessor.java:174) ~[spring-data-jpa-2.5.6.jar:2.5.6]\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186) ~[spring-aop-5.3.12.jar:5.3.12]\r\n\tat org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97) ~[spring-aop-5.3.12.jar:5.3.12]\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186) ~[spring-aop-5.3.12.jar:5.3.12]\r\n\tat org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:215) ~[spring-aop-5.3.12.jar:5.3.12]\r\n\tat com.sun.proxy.$Proxy87.saveAll(Unknown Source) ~[na:na]\r\n\tat com.univaProject.UnivaMovies.model.AlquilerConfig.lambda$0(AlquilerConfig.java:39) ~[classes/:na]\r\n\tat org.springframework.boot.SpringApplication.callRunner(SpringApplication.java:791) ~[spring-boot-2.5.6.jar:2.5.6]\r\n\t... 5 common frames omitted","title":"Hibernate Error Message: Save the transient instance before flushing","body":"<p>While trying to create a one to many relationship I am geeting &quot;Save the transient instance before flushing&quot; error message usign Spring JPA connection to PostgreSQL.\n&quot;Alquiler&quot;(One) is the name of my entity and the other is &quot;Peliculas&quot;(To Many)</p>\n<p>Notice that I already added cascade = CascadeType.ALL And still getting the issue.\nThis is the class where I am trying to create the relationship. Help!</p>\n<pre><code>package com.Project.Movies.model;\n\nimport java.util.Date;\nimport java.util.List;\n\nimport javax.persistence.*;\n\n@Entity\n@Table(name = &quot;Alquiler&quot;)\npublic class Alquiler {\n@Id\n@SequenceGenerator(\n        name = &quot;alquiler_seq&quot;,\n        sequenceName = &quot;alquiler_seq&quot;,\n        allocationSize = 1\n        )\n@GeneratedValue(\n        strategy = GenerationType.SEQUENCE,\n        generator = &quot;alquiler_seq&quot;\n        )\n\nprivate Long id;\n\nint dias;\nfloat costopordia;\nString formapago;\nDate fechaAlquiler;\n\n@Column\n@ElementCollection(targetClass=Pelicula.class)\nprivate List&lt;Pelicula&gt; peliculas;\n\n@OneToOne(cascade = CascadeType.ALL)\n@JoinColumn(name = &quot;id&quot;)\nprivate Socio socio;\n\n\npublic Alquiler() {\n    super();\n}\n\npublic Alquiler(int dias, float costopordia, String formapago, Date fechaAlquiler, List&lt;Pelicula&gt; pelicula, Socio socio) {\n    super();\n    this.dias = dias;\n    this.costopordia = costopordia;\n    this.formapago = formapago;\n    this.fechaAlquiler = fechaAlquiler;\n    this.peliculas = pelicula;\n    this.socio = socio;\n}\n\npublic Long getId() {\n    return id;\n}\n\npublic void setId(Long id) {\n    this.id = id;\n}\n\npublic Date getFechaAlquiler() {\n    return fechaAlquiler;\n}\n\npublic void setFechaAlquiler(Date fechaAlquiler) {\n    this.fechaAlquiler = fechaAlquiler;\n}\n\n@OneToMany(targetEntity=Pelicula.class, cascade = CascadeType.ALL,orphanRemoval = true)\npublic List&lt;Pelicula&gt; getPeliculas() {\n    return peliculas;\n}\n\npublic void setPeliculas(List&lt;Pelicula&gt; pelicula) {\n    this.peliculas = pelicula;\n}\n\npublic Socio getSocio() {\n    return socio;\n}\n\npublic void setSocio(Socio socio) {\n    this.socio = socio;\n}\n\nboolean CrearAlquiler() {\n    return true;\n}\n\npublic int getDias() {\n    return dias;\n}\n\npublic void setDias(int dias) {\n    this.dias = dias;\n}\n\npublic float getCostopordia() {\n    return costopordia;\n}\n\npublic void setCostopordia(float costopordia) {\n    this.costopordia = costopordia;\n}\n\npublic String getFormapago() {\n    return formapago;\n}\n\npublic void setFormapago(String formapago) {\n    this.formapago = formapago;\n}\n</code></pre>\n<p>}</p>\n<p>Alquiler Config Class</p>\n<pre><code>package com.Project.Movies.model;\n\nimport java.util.ArrayList;\nimport java.util.Date;\nimport java.util.List;\n\nimport org.springframework.boot.CommandLineRunner;\nimport org.springframework.context.annotation.Bean;\nimport org.springframework.context.annotation.Configuration;\n\n@Configuration\npublic class AlquilerConfig {\n@Bean\nCommandLineRunner commandLineRunnerA(IAlquilerRepository ialquilerRepository)\n{\n    \nreturn args -&gt;{\n    \n    List&lt;Pelicula&gt; myList = new ArrayList&lt;Pelicula&gt;();\n    \n    Pelicula shawshank = new Pelicula(&quot;The Shawshank Redemption&quot;,1994,&quot;2hr 22mins&quot;,&quot;Two imprisoned men bond over a number of years, finding solace and eventual redemption through...&quot;,&quot;Frank Darabont&quot;,&quot;B&quot;,&quot;Drama&quot;,3);\n    Pelicula inception = new Pelicula(&quot;Inception&quot;,2010,&quot;2hrs 28mins&quot;,&quot;Dom Cobb es un ladrón con una extraña habilidad para entrar a los sueños de la gente y robarles los secretos de sus subconscientes&quot;,&quot;Christopher Nolan&quot;,&quot;C&quot;,&quot;Science Fiction&quot;,4);\n    Pelicula fightclub = new Pelicula(&quot;Fight Club&quot;,1999,&quot;2hrs 19mins&quot;,&quot;Un empleado de oficina insomne, harto de su vida, se cruza con un vendedor peculiar...&quot;,&quot;David Fincher&quot;,&quot;C&quot;,&quot;Suspenso/Drama&quot;,2);                 \n    \n    myList.add(inception);\n    \n    myList.add(shawshank);\n    myList.add(inception);\n    myList.add(fightclub);\n    \n    Socio mariana= new Socio(&quot;Mariana Navidad&quot;,&quot;Arcos #34, Los Arcos&quot;,&quot;4446784563&quot;);\n    Socio sebastian= new Socio(&quot;Sebastian Mendoza&quot;,&quot;Rios #38, Mares&quot;,&quot;4336784563&quot;);\n    Socio roberto= new Socio(&quot;Roberto Obregon&quot;,&quot;Estrella #89, Universo&quot;,&quot;4556784563&quot;);\n    \n    Alquiler shawshankAlquiler = new Alquiler(3,30,&quot;efectivo&quot;,new Date(),myList,mariana);\n    Alquiler inceptionAlquiler = new Alquiler(5,25,&quot;tarjeta&quot;,new Date(),myList,sebastian);\n    Alquiler inceptionAlquiler2 = new Alquiler(5,25,&quot;efectivo&quot;,new Date(),myList,roberto);\n    \n    ialquilerRepository.saveAll(List.of(shawshankAlquiler,inceptionAlquiler,inceptionAlquiler2));\n};  \n}\n</code></pre>\n<p>}</p>\n<p>Error Message</p>\n<p>java.lang.IllegalStateException: Failed to execute CommandLineRunner\nat org.springframework.boot.SpringApplication.callRunner(SpringApplication.java:794) ~[spring-boot-2.5.6.jar:2.5.6]\nat org.springframework.boot.SpringApplication.callRunners(SpringApplication.java:775) ~[spring-boot-2.5.6.jar:2.5.6]\nat org.springframework.boot.SpringApplication.run(SpringApplication.java:345) ~[spring-boot-2.5.6.jar:2.5.6]\nat org.springframework.boot.SpringApplication.run(SpringApplication.java:1343) ~[spring-boot-2.5.6.jar:2.5.6]\nat org.springframework.boot.SpringApplication.run(SpringApplication.java:1332) ~[spring-boot-2.5.6.jar:2.5.6]\nat com.univaProject.UnivaMovies.UnivaMoviesApplication.main(UnivaMoviesApplication.java:11) ~[classes/:na]\nCaused by: org.springframework.dao.InvalidDataAccessApiUsageException: org.hibernate.TransientObjectException: object references an unsaved transient instance - save the transient instance before flushing: com.univaProject.UnivaMovies.model.Pelicula; nested exception is java.lang.IllegalStateException: org.hibernate.TransientObjectException: object references an unsaved transient instance - save the transient instance before flushing: com.univaProject.UnivaMovies.model.Pelicula\nat org.springframework.orm.jpa.EntityManagerFactoryUtils.convertJpaAccessExceptionIfPossible(EntityManagerFactoryUtils.java:371) ~[spring-orm-5.3.12.jar:5.3.12]\nat org.springframework.orm.jpa.vendor.HibernateJpaDialect.translateExceptionIfPossible(HibernateJpaDialect.java:235) ~[spring-orm-5.3.12.jar:5.3.12]\nat org.springframework.orm.jpa.JpaTransactionManager.doCommit(JpaTransactionManager.java:566) ~[spring-orm-5.3.12.jar:5.3.12]\nat org.springframework.transaction.support.AbstractPlatformTransactionManager.processCommit(AbstractPlatformTransactionManager.java:743) ~[spring-tx-5.3.12.jar:5.3.12]\nat org.springframework.transaction.support.AbstractPlatformTransactionManager.commit(AbstractPlatformTransactionManager.java:711) ~[spring-tx-5.3.12.jar:5.3.12]\nat org.springframework.transaction.interceptor.TransactionAspectSupport.commitTransactionAfterReturning(TransactionAspectSupport.java:654) ~[spring-tx-5.3.12.jar:5.3.12]\nat org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:407) ~[spring-tx-5.3.12.jar:5.3.12]\nat org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119) ~[spring-tx-5.3.12.jar:5.3.12]\nat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186) ~[spring-aop-5.3.12.jar:5.3.12]\nat org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:137) ~[spring-tx-5.3.12.jar:5.3.12]\nat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186) ~[spring-aop-5.3.12.jar:5.3.12]\nat org.springframework.data.jpa.repository.support.CrudMethodMetadataPostProcessor$CrudMethodMetadataPopulatingMethodInterceptor.invoke(CrudMethodMetadataPostProcessor.java:174) ~[spring-data-jpa-2.5.6.jar:2.5.6]\nat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186) ~[spring-aop-5.3.12.jar:5.3.12]\nat org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97) ~[spring-aop-5.3.12.jar:5.3.12]\nat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186) ~[spring-aop-5.3.12.jar:5.3.12]\nat org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:215) ~[spring-aop-5.3.12.jar:5.3.12]\nat com.sun.proxy.$Proxy87.saveAll(Unknown Source) ~[na:na]\nat com.univaProject.UnivaMovies.model.AlquilerConfig.lambda$0(AlquilerConfig.java:39) ~[classes/:na]\nat org.springframework.boot.SpringApplication.callRunner(SpringApplication.java:791) ~[spring-boot-2.5.6.jar:2.5.6]\n... 5 common frames omitted</p>\n"},{"tags":["java","swing","colors","jlist"],"comments":[{"owner":{"account_id":183279,"reputation":168313,"user_id":418556,"accept_rate":98,"display_name":"Andrew Thompson"},"score":2,"creation_date":1481549000,"post_id":41101524,"comment_id":69407772,"body_markdown":"*&quot;I see a lot of people talking about building custom render classes but I was aiming some something more simple.&quot;* You are mistaken in thinking a different approach will be simpler.","body":"<i>&quot;I see a lot of people talking about building custom render classes but I was aiming some something more simple.&quot;</i> You are mistaken in thinking a different approach will be simpler."},{"owner":{"account_id":183279,"reputation":168313,"user_id":418556,"accept_rate":98,"display_name":"Andrew Thompson"},"score":2,"creation_date":1481549068,"post_id":41101524,"comment_id":69407813,"body_markdown":"I&#39;m voting to close this question as off-topic because the OP wants the simplest approach but has already rejected it!","body":"I&#39;m voting to close this question as off-topic because the OP wants the simplest approach but has already rejected it!"},{"owner":{"account_id":44852,"reputation":322224,"user_id":131872,"accept_rate":100,"display_name":"camickr"},"score":0,"creation_date":1481556487,"post_id":41101524,"comment_id":69412388,"body_markdown":"(1-) `I see a lot of people...` - so why would a lot of people use a complicated solution if an easier solution existed? Don&#39;t you think a lot of people would use the easier and commonly accepted approach?","body":"(1-) <code>I see a lot of people...</code> - so why would a lot of people use a complicated solution if an easier solution existed? Don&#39;t you think a lot of people would use the easier and commonly accepted approach?"},{"owner":{"account_id":8185590,"reputation":169,"user_id":6161509,"accept_rate":89,"display_name":"Exostrike"},"score":0,"creation_date":1481558944,"post_id":41101524,"comment_id":69413889,"body_markdown":"@AndrewThompson I see a lot of customer render classes but all of them seem to be focused around &quot;if it contains character Y colour it blue&quot;, what I&#39;m looking for is a simple action which lets me change the colour only for when I want it. If I have to use a custom render class I&#39;ll use it but I was hoping to avoid it.","body":"@AndrewThompson I see a lot of customer render classes but all of them seem to be focused around &quot;if it contains character Y colour it blue&quot;, what I&#39;m looking for is a simple action which lets me change the colour only for when I want it. If I have to use a custom render class I&#39;ll use it but I was hoping to avoid it."},{"owner":{"account_id":2053598,"reputation":41316,"user_id":1831987,"display_name":"VGR"},"score":0,"creation_date":1481559178,"post_id":41101524,"comment_id":69414022,"body_markdown":"You have to use a custom cell renderer.  There is no avoiding it.","body":"You have to use a custom cell renderer.  There is no avoiding it."},{"owner":{"account_id":8185590,"reputation":169,"user_id":6161509,"accept_rate":89,"display_name":"Exostrike"},"score":0,"creation_date":1481559506,"post_id":41101524,"comment_id":69414187,"body_markdown":"@VGR Well off to write a lot of code to turn a list cell a slightly different colour","body":"@VGR Well off to write a lot of code to turn a list cell a slightly different colour"},{"owner":{"account_id":2507550,"reputation":10975,"user_id":2180785,"accept_rate":90,"display_name":"Frakcool"},"score":1,"creation_date":1481561387,"post_id":41101524,"comment_id":69415342,"body_markdown":"*&quot;when I want it&quot;* and when you want it to happen? For better help sooner please post a valid [mcve] and also follow the above recommendations, i.e. use a render class, there&#39;s no other way","body":"<i>&quot;when I want it&quot;</i> and when you want it to happen? For better help sooner please post a valid <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> and also follow the above recommendations, i.e. use a render class, there&#39;s no other way"},{"owner":{"account_id":8185590,"reputation":169,"user_id":6161509,"accept_rate":89,"display_name":"Exostrike"},"score":0,"creation_date":1481561655,"post_id":41101524,"comment_id":69415507,"body_markdown":"@Frakcool basically I have a collection of albums and tracks, every time the title of an album is printed to the list I want a different colour from each time a track name is printed to the list. I can&#39;t provide an complete example of this section because its across multiple classes and kind of complex.","body":"@Frakcool basically I have a collection of albums and tracks, every time the title of an album is printed to the list I want a different colour from each time a track name is printed to the list. I can&#39;t provide an complete example of this section because its across multiple classes and kind of complex."},{"owner":{"account_id":183279,"reputation":168313,"user_id":418556,"accept_rate":98,"display_name":"Andrew Thompson"},"score":0,"creation_date":1481591052,"post_id":41101524,"comment_id":69428745,"body_markdown":"*&quot;I can&#39;t provide an complete example of this section because its across multiple classes&quot;* An MCVE **can** contain multiple classes. *&quot;..and kind of complex&quot;* Simplify it! Remove the irrelevant cruft for the example.","body":"<i>&quot;I can&#39;t provide an complete example of this section because its across multiple classes&quot;</i> An MCVE <b>can</b> contain multiple classes. <i>&quot;..and kind of complex&quot;</i> Simplify it! Remove the irrelevant cruft for the example."}],"answers":[{"tags":[],"owner":{"account_id":183279,"reputation":168313,"user_id":418556,"accept_rate":98,"display_name":"Andrew Thompson"},"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1637373966,"creation_date":1481595249,"answer_id":41112737,"question_id":41101524,"body_markdown":"Note: A list of items containing two pieces of information per item is better suited to being displayed in a table rather than a list, though you might adapt this to a list if needed. The same basic principle applies (use a rendering component).\r\n\r\nThis is what I mean:\r\n\r\n[![enter image description here][1]][1]\r\n\r\n  [1]: https://i.stack.imgur.com/MEiS1.png\r\n\r\nWhich is achieved by this rendering class:\r\n\r\n    class TrackCellRenderer extends DefaultTableCellRenderer {\r\n    \r\n        HashMap&lt;String, Color&gt; colorMap = new HashMap&lt;&gt;();\r\n        Random r = new Random();\r\n    \r\n        @Override\r\n        public Component getTableCellRendererComponent(\r\n                JTable table,\r\n                Object value,\r\n                boolean isSelected, boolean hasFocus,\r\n                int row, int column) {\r\n            Component c = super.getTableCellRendererComponent(\r\n                    table, value, isSelected, hasFocus, row, column);\r\n            JLabel l = (JLabel) c;\r\n    \r\n            String s = (String) value;\r\n            if (column == 0) {\r\n                if (!colorMap.containsKey(s)) {\r\n                    Color clr = new Color(\r\n                            150 + r.nextInt(105),\r\n                            150 + r.nextInt(105),\r\n                            150 + r.nextInt(105));\r\n                    colorMap.put(s, clr);\r\n                }\r\n                Color color = colorMap.get(s);\r\n                l.setBackground(color);\r\n                l.setOpaque(true);\r\n            } else {\r\n                l.setOpaque(false);\r\n            }\r\n    \r\n            return l;\r\n        }\r\n    }\r\n\r\nNote: it might be best to use an enum rather than randomly assigning a color, but with 3 albums and over a million possible colors, we should be pretty safe.\r\n\r\nIn this (two class) MCVE of just over 100 lines of code:\r\n\r\n    import java.awt.*;\r\n    import javax.swing.*;\r\n    import javax.swing.border.EmptyBorder;\r\n    import javax.swing.table.*;\r\n    import java.util.*;\r\n    \r\n    public class AlbumTrackTable {\r\n    \r\n        private JComponent ui = null;\r\n        String[][] playList = {\r\n            {&quot;The Will to Live&quot;, &quot;Faded&quot;},\r\n            {&quot;The Will to Live&quot;, &quot;Homeless Child&quot;},\r\n            {&quot;Oh Mercy&quot;, &quot;Political Wrold&quot;},\r\n            {&quot;Oh Mercy&quot;, &quot;What Was it You Wanted?&quot;},\r\n            {&quot;Red Sails in the Sunset&quot;, &quot;Helps Me Helps You&quot;},\r\n            {&quot;Red Sails in the Sunset&quot;, &quot;Redneck Wonderland&quot;}\r\n        };\r\n        String[] columnNames = {&quot;Album&quot;, &quot;Track&quot;};\r\n    \r\n        AlbumTrackTable() {\r\n            initUI();\r\n        }\r\n    \r\n        public void initUI() {\r\n            if (ui != null) {\r\n                return;\r\n            }\r\n    \r\n            ui = new JPanel(new BorderLayout(4, 4));\r\n            ui.setBorder(new EmptyBorder(4, 4, 4, 4));\r\n    \r\n            DefaultTableModel trackModel = new DefaultTableModel(playList, columnNames);\r\n            JTable table = new JTable(trackModel);\r\n            ui.add(new JScrollPane(table));\r\n            TableCellRenderer renderer = new TrackCellRenderer();\r\n            table.setDefaultRenderer(Object.class, renderer);\r\n            table.setAutoCreateRowSorter(true);\r\n        }\r\n    \r\n        public JComponent getUI() {\r\n            return ui;\r\n        }\r\n    \r\n        public static void main(String[] args) {\r\n            Runnable r = new Runnable() {\r\n                @Override\r\n                public void run() {\r\n                    try {\r\n                        UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());\r\n                    } catch (Exception useDefault) {\r\n                    }\r\n                    AlbumTrackTable o = new AlbumTrackTable();\r\n    \r\n                    JFrame f = new JFrame(o.getClass().getSimpleName());\r\n                    f.setDefaultCloseOperation(JFrame.DISPOSE_ON_CLOSE);\r\n                    f.setLocationByPlatform(true);\r\n    \r\n                    f.setContentPane(o.getUI());\r\n                    f.pack();\r\n                    f.setMinimumSize(f.getSize());\r\n    \r\n                    f.setVisible(true);\r\n                }\r\n            };\r\n            SwingUtilities.invokeLater(r);\r\n        }\r\n    }\r\n    \r\n    class TrackCellRenderer extends DefaultTableCellRenderer {\r\n    \r\n        HashMap&lt;String, Color&gt; colorMap = new HashMap&lt;&gt;();\r\n        Random r = new Random();\r\n    \r\n        @Override\r\n        public Component getTableCellRendererComponent(\r\n                JTable table,\r\n                Object value,\r\n                boolean isSelected, boolean hasFocus,\r\n                int row, int column) {\r\n            Component c = super.getTableCellRendererComponent(\r\n                    table, value, isSelected, hasFocus, row, column);\r\n            JLabel l = (JLabel) c;\r\n    \r\n            String s = (String) value;\r\n            if (column == 0) {\r\n                if (!colorMap.containsKey(s)) {\r\n                    Color clr = new Color(\r\n                            150 + r.nextInt(105),\r\n                            150 + r.nextInt(105),\r\n                            150 + r.nextInt(105));\r\n                    colorMap.put(s, clr);\r\n                }\r\n                Color color = colorMap.get(s);\r\n                l.setBackground(color);\r\n                l.setOpaque(true);\r\n            } else {\r\n                l.setOpaque(false);\r\n            }\r\n    \r\n            return l;\r\n        }\r\n    }","title":"Change JList item colour when I want","body":"<p>Note: A list of items containing two pieces of information per item is better suited to being displayed in a table rather than a list, though you might adapt this to a list if needed. The same basic principle applies (use a rendering component).</p>\n<p>This is what I mean:</p>\n<p><a href=\"https://i.stack.imgur.com/MEiS1.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/MEiS1.png\" alt=\"enter image description here\" /></a></p>\n<p>Which is achieved by this rendering class:</p>\n<pre><code>class TrackCellRenderer extends DefaultTableCellRenderer {\n\n    HashMap&lt;String, Color&gt; colorMap = new HashMap&lt;&gt;();\n    Random r = new Random();\n\n    @Override\n    public Component getTableCellRendererComponent(\n            JTable table,\n            Object value,\n            boolean isSelected, boolean hasFocus,\n            int row, int column) {\n        Component c = super.getTableCellRendererComponent(\n                table, value, isSelected, hasFocus, row, column);\n        JLabel l = (JLabel) c;\n\n        String s = (String) value;\n        if (column == 0) {\n            if (!colorMap.containsKey(s)) {\n                Color clr = new Color(\n                        150 + r.nextInt(105),\n                        150 + r.nextInt(105),\n                        150 + r.nextInt(105));\n                colorMap.put(s, clr);\n            }\n            Color color = colorMap.get(s);\n            l.setBackground(color);\n            l.setOpaque(true);\n        } else {\n            l.setOpaque(false);\n        }\n\n        return l;\n    }\n}\n</code></pre>\n<p>Note: it might be best to use an enum rather than randomly assigning a color, but with 3 albums and over a million possible colors, we should be pretty safe.</p>\n<p>In this (two class) MCVE of just over 100 lines of code:</p>\n<pre><code>import java.awt.*;\nimport javax.swing.*;\nimport javax.swing.border.EmptyBorder;\nimport javax.swing.table.*;\nimport java.util.*;\n\npublic class AlbumTrackTable {\n\n    private JComponent ui = null;\n    String[][] playList = {\n        {&quot;The Will to Live&quot;, &quot;Faded&quot;},\n        {&quot;The Will to Live&quot;, &quot;Homeless Child&quot;},\n        {&quot;Oh Mercy&quot;, &quot;Political Wrold&quot;},\n        {&quot;Oh Mercy&quot;, &quot;What Was it You Wanted?&quot;},\n        {&quot;Red Sails in the Sunset&quot;, &quot;Helps Me Helps You&quot;},\n        {&quot;Red Sails in the Sunset&quot;, &quot;Redneck Wonderland&quot;}\n    };\n    String[] columnNames = {&quot;Album&quot;, &quot;Track&quot;};\n\n    AlbumTrackTable() {\n        initUI();\n    }\n\n    public void initUI() {\n        if (ui != null) {\n            return;\n        }\n\n        ui = new JPanel(new BorderLayout(4, 4));\n        ui.setBorder(new EmptyBorder(4, 4, 4, 4));\n\n        DefaultTableModel trackModel = new DefaultTableModel(playList, columnNames);\n        JTable table = new JTable(trackModel);\n        ui.add(new JScrollPane(table));\n        TableCellRenderer renderer = new TrackCellRenderer();\n        table.setDefaultRenderer(Object.class, renderer);\n        table.setAutoCreateRowSorter(true);\n    }\n\n    public JComponent getUI() {\n        return ui;\n    }\n\n    public static void main(String[] args) {\n        Runnable r = new Runnable() {\n            @Override\n            public void run() {\n                try {\n                    UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());\n                } catch (Exception useDefault) {\n                }\n                AlbumTrackTable o = new AlbumTrackTable();\n\n                JFrame f = new JFrame(o.getClass().getSimpleName());\n                f.setDefaultCloseOperation(JFrame.DISPOSE_ON_CLOSE);\n                f.setLocationByPlatform(true);\n\n                f.setContentPane(o.getUI());\n                f.pack();\n                f.setMinimumSize(f.getSize());\n\n                f.setVisible(true);\n            }\n        };\n        SwingUtilities.invokeLater(r);\n    }\n}\n\nclass TrackCellRenderer extends DefaultTableCellRenderer {\n\n    HashMap&lt;String, Color&gt; colorMap = new HashMap&lt;&gt;();\n    Random r = new Random();\n\n    @Override\n    public Component getTableCellRendererComponent(\n            JTable table,\n            Object value,\n            boolean isSelected, boolean hasFocus,\n            int row, int column) {\n        Component c = super.getTableCellRendererComponent(\n                table, value, isSelected, hasFocus, row, column);\n        JLabel l = (JLabel) c;\n\n        String s = (String) value;\n        if (column == 0) {\n            if (!colorMap.containsKey(s)) {\n                Color clr = new Color(\n                        150 + r.nextInt(105),\n                        150 + r.nextInt(105),\n                        150 + r.nextInt(105));\n                colorMap.put(s, clr);\n            }\n            Color color = colorMap.get(s);\n            l.setBackground(color);\n            l.setOpaque(true);\n        } else {\n            l.setOpaque(false);\n        }\n\n        return l;\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":8185590,"reputation":169,"user_id":6161509,"accept_rate":89,"display_name":"Exostrike"},"comment_count":9,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1098,"favorite_count":0,"down_vote_count":2,"up_vote_count":2,"accepted_answer_id":41112737,"answer_count":1,"score":0,"last_activity_date":1637373966,"creation_date":1481547712,"question_id":41101524,"body_markdown":"I&#39;m trying to build a `JList` in which some of the items have a different background colour than others but only when I want it. \r\n\r\nI&#39;ve been trying to do something like this up it produces errors.\r\n\r\n     static DefaultListModel&lt;String&gt; model = new DefaultListModel&lt;&gt;();\r\n\r\n     for(int K=0;K&lt;Collectionsize();K++){\r\n            Jlist.setForeground(Color.red); \r\n\t\t\tmodel.addElement(type 1);\r\n \r\n\t        for(int I=0;I&lt;(subcollection.size();I++){\r\n                Jlist.setForeground(Color.white); \r\n\t\t\t\tmodel.addElement(type 2);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\nThere is no pattern between type 1 and 2 so I want change the colour when I want it rather than rely on if statements.\r\n\r\nI see a lot of people talking about building custom render classes but I was aiming some something more simple. ","title":"Change JList item colour when I want","body":"<p>I'm trying to build a <code>JList</code> in which some of the items have a different background colour than others but only when I want it. </p>\n\n<p>I've been trying to do something like this up it produces errors.</p>\n\n<pre><code> static DefaultListModel&lt;String&gt; model = new DefaultListModel&lt;&gt;();\n\n for(int K=0;K&lt;Collectionsize();K++){\n        Jlist.setForeground(Color.red); \n        model.addElement(type 1);\n\n        for(int I=0;I&lt;(subcollection.size();I++){\n            Jlist.setForeground(Color.white); \n            model.addElement(type 2);\n            }\n        }\n</code></pre>\n\n<p>There is no pattern between type 1 and 2 so I want change the colour when I want it rather than rely on if statements.</p>\n\n<p>I see a lot of people talking about building custom render classes but I was aiming some something more simple. </p>\n"},{"tags":["java","spring","spring-boot","caching"],"answers":[{"tags":[],"owner":{"account_id":23128,"reputation":13127,"user_id":57719,"display_name":"Chin Huang"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1637372939,"creation_date":1637344916,"answer_id":70039067,"question_id":70036543,"body_markdown":"Put the values into a single cache with a [custom KeyGenerator](https://docs.spring.io/spring-framework/docs/current/reference/html/integration.html#cache-annotations-cacheable-key) that also distinguishes keys by `uri` and `sessionToken`.\r\n\r\n```java\r\npublic class CustomKeyGenerator extends SimpleKeyGenerator {\r\n\r\n    @Override\r\n    public Object generate(Object target, Method method, Object... params) {\r\n        ExternalAppConnection externalAppConnection = (ExternalAppConnection) target;\r\n        return generateKey(\r\n                externalAppConnection.getUri(),\r\n                externalAppConnection.getSessionToken(),\r\n                params);\r\n    }\r\n}\r\n```","title":"Spring @Cacheable unique to a @Scope(&quot;prototype&quot;) instance","body":"<p>Put the values into a single cache with a <a href=\"https://docs.spring.io/spring-framework/docs/current/reference/html/integration.html#cache-annotations-cacheable-key\" rel=\"nofollow noreferrer\">custom KeyGenerator</a> that also distinguishes keys by <code>uri</code> and <code>sessionToken</code>.</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class CustomKeyGenerator extends SimpleKeyGenerator {\n\n    @Override\n    public Object generate(Object target, Method method, Object... params) {\n        ExternalAppConnection externalAppConnection = (ExternalAppConnection) target;\n        return generateKey(\n                externalAppConnection.getUri(),\n                externalAppConnection.getSessionToken(),\n                params);\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":354956,"reputation":1238,"user_id":693614,"accept_rate":64,"display_name":"CDelaney"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":291,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1637372939,"creation_date":1637332773,"question_id":70036543,"body_markdown":"In my Spring Boot app I have a service for retrieving data from an external API. It uses ```@Scope(&quot;prototype&quot;)``` because it often calls to several different environments (e.g. for transferring data between x &amp; y).\r\n\r\n    @Component\r\n    @Scope(&quot;prototype&quot;)\r\n    public class ExternalAppConnection {\r\n\t    private final URI uri;\r\n    \tprivate final String sessionToken;\r\n\r\n    \tpublic ExternalAppConnection(final String uri, final String sessionToken) {\r\n    \t\tthis.uri = new URI(uri);\r\n    \t\tthis.sessionToken = sessionToken;\r\n\t    }\r\n\r\n        @Cacheable\r\n    \tpublic AppInfoResponseDto getAppInfo(Integer appId) {\r\n\t\t    String url = buildUrl(&quot;/api/appinfo&quot; + appId);\r\n\t    \treturn exchangeRequestForObject(url, HttpMethod.GET, AppInfoResponseDto.class);\r\n    \t}\r\n    }\r\n\r\nAs seen above, each instance of the service will have a unique ```sessionToken``` and ```uri```. The ```@Cacheable``` here results in the same cache regardless of the instance though, so after calling ```getAppInfo()``` for one environment, I&#39;d get a cached result when calling it for the other environment if the appId matches.\r\n\r\nIs it possible to contain the caching for each instance? I looked into using ```CacheResolver``` but the context doesn&#39;t provide any details about the instance, like its sessionToken or uri.","title":"Spring @Cacheable unique to a @Scope(&quot;prototype&quot;) instance","body":"<p>In my Spring Boot app I have a service for retrieving data from an external API. It uses <code>@Scope(&quot;prototype&quot;)</code> because it often calls to several different environments (e.g. for transferring data between x &amp; y).</p>\n<pre><code>@Component\n@Scope(&quot;prototype&quot;)\npublic class ExternalAppConnection {\n    private final URI uri;\n    private final String sessionToken;\n\n    public ExternalAppConnection(final String uri, final String sessionToken) {\n        this.uri = new URI(uri);\n        this.sessionToken = sessionToken;\n    }\n\n    @Cacheable\n    public AppInfoResponseDto getAppInfo(Integer appId) {\n        String url = buildUrl(&quot;/api/appinfo&quot; + appId);\n        return exchangeRequestForObject(url, HttpMethod.GET, AppInfoResponseDto.class);\n    }\n}\n</code></pre>\n<p>As seen above, each instance of the service will have a unique <code>sessionToken</code> and <code>uri</code>. The <code>@Cacheable</code> here results in the same cache regardless of the instance though, so after calling <code>getAppInfo()</code> for one environment, I'd get a cached result when calling it for the other environment if the appId matches.</p>\n<p>Is it possible to contain the caching for each instance? I looked into using <code>CacheResolver</code> but the context doesn't provide any details about the instance, like its sessionToken or uri.</p>\n"},{"tags":["java","multithreading","synchronization"],"answers":[{"tags":[],"owner":{"account_id":195556,"reputation":6174,"user_id":438512,"display_name":"Spike Gronim"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1285687691,"creation_date":1285687691,"answer_id":3814360,"question_id":3814325,"body_markdown":"You may not modify a Collection that you are iterating. You can work around this by accessing the array entries by index, not through an Iterator. I can provide more advice if you tell me the problem that you are trying to solve with this code.","title":"how to create Synchronized arraylist","body":"<p>You may not modify a Collection that you are iterating. You can work around this by accessing the array entries by index, not through an Iterator. I can provide more advice if you tell me the problem that you are trying to solve with this code.</p>\n"},{"tags":[],"owner":{"account_id":36208,"reputation":240316,"user_id":103154,"display_name":"axtavt"},"down_vote_count":0,"up_vote_count":28,"is_accepted":true,"score":28,"last_activity_date":1477713437,"creation_date":1285687803,"answer_id":3814391,"question_id":3814325,"body_markdown":"`Iterator` of `synchronizedList` is not (and can&#39;t be) synchronized, you need to synchronize on the list manually while iterating (see [javadoc][1]):\r\n\r\n    synchronized(arrayList) {\r\n        Iterator it=arrayList.iterator(); \r\n        while(it.hasNext()) { \r\n            System.out.println(it.next()); \r\n       } \r\n    }\r\n\r\nAnother approach is to use a [`CopyOnWriteArrayList`][2] instead of `Collections.synchronizedList()`. It implements a copy-on-write semantic and therefore doesn&#39;t require synchronization.\r\n\r\n\r\n  [1]: http://docs.oracle.com/javase/8/docs/api/java/util/Collections.html#synchronizedList-java.util.List-\r\n  [2]: http://docs.oracle.com/javase/8/docs/api/java/util/concurrent/CopyOnWriteArrayList.html","title":"how to create Synchronized arraylist","body":"<p><code>Iterator</code> of <code>synchronizedList</code> is not (and can't be) synchronized, you need to synchronize on the list manually while iterating (see <a href=\"http://docs.oracle.com/javase/8/docs/api/java/util/Collections.html#synchronizedList-java.util.List-\" rel=\"noreferrer\">javadoc</a>):</p>\n\n<pre><code>synchronized(arrayList) {\n    Iterator it=arrayList.iterator(); \n    while(it.hasNext()) { \n        System.out.println(it.next()); \n   } \n}\n</code></pre>\n\n<p>Another approach is to use a <a href=\"http://docs.oracle.com/javase/8/docs/api/java/util/concurrent/CopyOnWriteArrayList.html\" rel=\"noreferrer\"><code>CopyOnWriteArrayList</code></a> instead of <code>Collections.synchronizedList()</code>. It implements a copy-on-write semantic and therefore doesn't require synchronization.</p>\n"},{"tags":[],"owner":{"account_id":31293,"reputation":43494,"user_id":85821,"accept_rate":73,"display_name":"Bart van Heukelom"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1285687991,"creation_date":1285687991,"answer_id":3814430,"question_id":3814325,"body_markdown":"As Spike said, you can&#39;t modify a collection while iterating it. However, I think the solution is to lock the list while iterating.\r\n\r\n    class HelloThread  \r\n    {\r\n    \r\n     int i=1;\r\n     List arrayList;\r\n      public  void go()\r\n      {\r\n     arrayList=Collections.synchronizedList(new ArrayList());\r\n     Thread thread1=new Thread(new Runnable() {\r\n    \r\n      public void run() {\r\n      while(i&lt;=10)\r\n      {\r\n    synchronized(someLock) {\r\n       arrayList.add(i);\r\n    }\r\n       i++;\r\n      }\r\n      }\r\n     });\r\n     thread1.start();\r\n     Thread thred2=new Thread(new Runnable() {\r\n      public void run() {\r\n         while(true)\r\n         {\r\n    synchronized(someLock) {\r\n       Iterator it=arrayList.iterator();\r\n          while(it.hasNext())\r\n          {\r\n           System.out.println(it.next());\r\n          }\r\n    }\r\n         }\r\n      }\r\n     });\r\n     thred2.start();\r\n      }\r\n     }\r\n    \r\n    public class test\r\n    {\r\n      public static void main(String[] args)\r\n      {\r\n       HelloThread hello=new HelloThread();\r\n       hello.go();\r\n      }\r\n    }\r\n\r\nI&#39;m not sure what you&#39;re trying to do, so I hope this doesn&#39;t break the functionality of your code.","title":"how to create Synchronized arraylist","body":"<p>As Spike said, you can't modify a collection while iterating it. However, I think the solution is to lock the list while iterating.</p>\n\n<pre><code>class HelloThread  \n{\n\n int i=1;\n List arrayList;\n  public  void go()\n  {\n arrayList=Collections.synchronizedList(new ArrayList());\n Thread thread1=new Thread(new Runnable() {\n\n  public void run() {\n  while(i&lt;=10)\n  {\nsynchronized(someLock) {\n   arrayList.add(i);\n}\n   i++;\n  }\n  }\n });\n thread1.start();\n Thread thred2=new Thread(new Runnable() {\n  public void run() {\n     while(true)\n     {\nsynchronized(someLock) {\n   Iterator it=arrayList.iterator();\n      while(it.hasNext())\n      {\n       System.out.println(it.next());\n      }\n}\n     }\n  }\n });\n thred2.start();\n  }\n }\n\npublic class test\n{\n  public static void main(String[] args)\n  {\n   HelloThread hello=new HelloThread();\n   hello.go();\n  }\n}\n</code></pre>\n\n<p>I'm not sure what you're trying to do, so I hope this doesn't break the functionality of your code.</p>\n"},{"tags":[],"owner":{"account_id":87016,"reputation":68348,"user_id":241590,"accept_rate":99,"display_name":"stacker"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1285687996,"creation_date":1285687996,"answer_id":3814431,"question_id":3814325,"body_markdown":"The  java.util.ConcurrentModificationException occurs when you manipulate (add,remove) a collection while iterating over the same collection.\r\n\r\nYou probably want to consume the create entries in your second thread while after they have been created by your first thread. So you could use ArrayLists `get( index )` and size`()` for control ","title":"how to create Synchronized arraylist","body":"<p>The  java.util.ConcurrentModificationException occurs when you manipulate (add,remove) a collection while iterating over the same collection.</p>\n\n<p>You probably want to consume the create entries in your second thread while after they have been created by your first thread. So you could use ArrayLists <code>get( index )</code> and size<code>()</code> for control </p>\n"},{"tags":[],"owner":{"account_id":4804,"reputation":268579,"user_id":7412,"accept_rate":96,"display_name":"dogbane"},"down_vote_count":0,"up_vote_count":12,"is_accepted":false,"score":12,"last_activity_date":1285688501,"creation_date":1285688501,"answer_id":3814526,"question_id":3814325,"body_markdown":"Consider using a [CopyOnWriteArrayList][1] which is thread-safe. Every time you add an item, a fresh copy of the underlying array is created. However, the iterator will not reflect additions to the list since the iterator was created, but is guaranteed not to throw `ConcurrentModificationException`.\r\n\r\n    arrayList=new CopyOnWriteArrayList();\r\n\r\n[1]: http://download.oracle.com/javase/1.5.0/docs/api/java/util/concurrent/CopyOnWriteArrayList.html","title":"how to create Synchronized arraylist","body":"<p>Consider using a <a href=\"http://download.oracle.com/javase/1.5.0/docs/api/java/util/concurrent/CopyOnWriteArrayList.html\" rel=\"noreferrer\">CopyOnWriteArrayList</a> which is thread-safe. Every time you add an item, a fresh copy of the underlying array is created. However, the iterator will not reflect additions to the list since the iterator was created, but is guaranteed not to throw <code>ConcurrentModificationException</code>.</p>\n\n<pre><code>arrayList=new CopyOnWriteArrayList();\n</code></pre>\n"},{"tags":[],"owner":{"account_id":47283,"reputation":703817,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"down_vote_count":0,"up_vote_count":12,"is_accepted":false,"score":12,"last_activity_date":1285690050,"creation_date":1285688798,"answer_id":3814565,"question_id":3814325,"body_markdown":"Other answers have identified the problem:\r\n\r\n  - The iterators for synchronized collections are not synchronized.  In fact, they are simply the iterators returned by the collection objects inside the wrapper classes.\r\n\r\n  - Many collection classes (including `ArrayList`) use a fail-fast mechanism to detect concurrent modifications during iteration.  This behavior is clearly documented in the javadocs for the respective classes.  This is what you are seeing.\r\n\r\nNot all collection classes do this.  For example, many of the `java.util.Concurrent...` collection classes allow concurrent modification during iteration, but relax the semantics of the iteration sequence so that the results of the modifications *may or may not* be apparent in the objects returned by the iterator.\r\n\r\nThe javadoc for the [`Collections.synchronizedList()`][1]  explains how to synchronize the iterator.  Basically you do this:\r\n\r\n    List list = Collections.synchronizedList(new ArrayList());\r\n      ...\r\n    synchronized (list) {\r\n        Iterator i = list.iterator(); // Must be in synchronized block\r\n        while (i.hasNext())\r\n            foo(i.next());\r\n    }\r\n\r\n(Aside: normally it is not safe to assume that doing something like this would work.  In theory, the synchronized list could use a private lock object, and the `synchronized` statement would not lock out concurrent modifications.  However the javadocs say that this is what to do in this case ... so it is safe.)\r\n\r\nThe problem with doing that is that locking the collection creates a potential concurrency bottleneck. The alternative to is to use a copy-on-write data structure that internally makes a copy of the relevant parts of the collection.  This approach means that an iterator sees sees a snapshot of the collection.  Modifications may be made to the collection concurrent with an iteration, but the iterator does not see them.  The problem with copy-on-write is that modifications are potentially a lot more expensive.  \r\n\r\nUltimately, you need to balance the characteristics and costs of the different collection types wrt concurrent modification versus your actual requirements.  Can you get away with the iterator not seeing all concurrent modifications?\r\n\r\n  [1]: http://download.oracle.com/javase/6/docs/api/java/util/Collections.html#synchronizedList(java.util.List)","title":"how to create Synchronized arraylist","body":"<p>Other answers have identified the problem:</p>\n\n<ul>\n<li><p>The iterators for synchronized collections are not synchronized.  In fact, they are simply the iterators returned by the collection objects inside the wrapper classes.</p></li>\n<li><p>Many collection classes (including <code>ArrayList</code>) use a fail-fast mechanism to detect concurrent modifications during iteration.  This behavior is clearly documented in the javadocs for the respective classes.  This is what you are seeing.</p></li>\n</ul>\n\n<p>Not all collection classes do this.  For example, many of the <code>java.util.Concurrent...</code> collection classes allow concurrent modification during iteration, but relax the semantics of the iteration sequence so that the results of the modifications <em>may or may not</em> be apparent in the objects returned by the iterator.</p>\n\n<p>The javadoc for the <a href=\"http://download.oracle.com/javase/6/docs/api/java/util/Collections.html#synchronizedList(java.util.List)\" rel=\"noreferrer\"><code>Collections.synchronizedList()</code></a>  explains how to synchronize the iterator.  Basically you do this:</p>\n\n<pre><code>List list = Collections.synchronizedList(new ArrayList());\n  ...\nsynchronized (list) {\n    Iterator i = list.iterator(); // Must be in synchronized block\n    while (i.hasNext())\n        foo(i.next());\n}\n</code></pre>\n\n<p>(Aside: normally it is not safe to assume that doing something like this would work.  In theory, the synchronized list could use a private lock object, and the <code>synchronized</code> statement would not lock out concurrent modifications.  However the javadocs say that this is what to do in this case ... so it is safe.)</p>\n\n<p>The problem with doing that is that locking the collection creates a potential concurrency bottleneck. The alternative to is to use a copy-on-write data structure that internally makes a copy of the relevant parts of the collection.  This approach means that an iterator sees sees a snapshot of the collection.  Modifications may be made to the collection concurrent with an iteration, but the iterator does not see them.  The problem with copy-on-write is that modifications are potentially a lot more expensive.  </p>\n\n<p>Ultimately, you need to balance the characteristics and costs of the different collection types wrt concurrent modification versus your actual requirements.  Can you get away with the iterator not seeing all concurrent modifications?</p>\n"},{"tags":[],"owner":{"display_name":"user4423251"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1420610567,"creation_date":1420610567,"answer_id":27813325,"question_id":3814325,"body_markdown":"Let&#39;s take a normal list (implemented by the ArrayList class) and make it synchronized. This is shown in the SynchronizedArrayList class. \r\n\tWe pass the Collections.synchronizedList method a new ArrayList of Strings. The method returns a synchronized List of Strings. \r\n\t//Here is SynchronizedArrayList class \r\n\tpackage com.mnas.technology.automation.utility;\r\n\timport java.util.ArrayList;\r\n\timport java.util.Collections;\r\n\timport java.util.Iterator;\r\n\timport java.util.List;\r\n\timport org.apache.log4j.Logger;\r\n\t/**\r\n\t* \r\n\t* @author manoj.kumar\r\n\t* @email kumarmanoj.mtech@gmail.com\r\n\t* \r\n\t*/\r\n\tpublic class SynchronizedArrayList {\r\n\tstatic Logger log = Logger.getLogger(SynchronizedArrayList.class.getName());\r\n\tpublic static void main(String[] args) {\r\n\r\n\tList&lt;String&gt; synchronizedList = Collections.synchronizedList(new ArrayList&lt;String&gt;());\r\n\tsynchronizedList.add(&quot;Aditya&quot;);\r\n\tsynchronizedList.add(&quot;Siddharth&quot;);\r\n\tsynchronizedList.add(&quot;Manoj&quot;);\r\n\r\n\t// when iterating over a synchronized list, we need to synchronize access to the synchronized list\r\n\tsynchronized (synchronizedList) {\r\n\tIterator&lt;String&gt; iterator = synchronizedList.iterator();\r\n\twhile (iterator.hasNext()) {\r\n\tlog.info(&quot;Synchronized Array List Items: &quot; + iterator.next());\r\n\t}\r\n\t}\r\n\r\n\t}\r\n\t}\r\n\r\n\tNotice that when iterating over the list, this access is still done using a synchronized block that locks on the synchronizedList object. \r\n\tIn general, iterating over a synchronized collection should be done in a synchronized block\r\n","title":"how to create Synchronized arraylist","body":"<p>Let's take a normal list (implemented by the ArrayList class) and make it synchronized. This is shown in the SynchronizedArrayList class. \n    We pass the Collections.synchronizedList method a new ArrayList of Strings. The method returns a synchronized List of Strings. \n    //Here is SynchronizedArrayList class \n    package com.mnas.technology.automation.utility;\n    import java.util.ArrayList;\n    import java.util.Collections;\n    import java.util.Iterator;\n    import java.util.List;\n    import org.apache.log4j.Logger;\n    /**\n    * \n    * @author manoj.kumar\n    * @email kumarmanoj.mtech@gmail.com\n    * \n    */\n    public class SynchronizedArrayList {\n    static Logger log = Logger.getLogger(SynchronizedArrayList.class.getName());\n    public static void main(String[] args) {</p>\n\n<pre><code>List&lt;String&gt; synchronizedList = Collections.synchronizedList(new ArrayList&lt;String&gt;());\nsynchronizedList.add(\"Aditya\");\nsynchronizedList.add(\"Siddharth\");\nsynchronizedList.add(\"Manoj\");\n\n// when iterating over a synchronized list, we need to synchronize access to the synchronized list\nsynchronized (synchronizedList) {\nIterator&lt;String&gt; iterator = synchronizedList.iterator();\nwhile (iterator.hasNext()) {\nlog.info(\"Synchronized Array List Items: \" + iterator.next());\n}\n}\n\n}\n}\n\nNotice that when iterating over the list, this access is still done using a synchronized block that locks on the synchronizedList object. \nIn general, iterating over a synchronized collection should be done in a synchronized block\n</code></pre>\n"},{"tags":[],"owner":{"account_id":4931144,"reputation":31,"user_id":3970895,"display_name":"Bhargav ram"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1637372138,"creation_date":1637372138,"answer_id":70042599,"question_id":3814325,"body_markdown":"ArrayList is non-synchronized collection and should not be used in concurrent environment without explicit synchronization. To synchronize ArrayList, we can use two methods provided by JDK\r\n\r\n - Collections.synchronizedList() method – It returns synchronized list backed by the specified list. It is recommended that we should manually synchronize on the returned list when traversing it via Iterator, Spliterator or Stream. Else it may result in non-deterministic behavior. No explicit synchronization is needed to add, remove elements from synchronized arraylist\r\n - CopyOnWriteArrayList class – It is a thread-safe variant of ArrayList.\r\n\r\nSince you are using iterator without explicit synchronization you are getting the error","title":"how to create Synchronized arraylist","body":"<p>ArrayList is non-synchronized collection and should not be used in concurrent environment without explicit synchronization. To synchronize ArrayList, we can use two methods provided by JDK</p>\n<ul>\n<li>Collections.synchronizedList() method – It returns synchronized list backed by the specified list. It is recommended that we should manually synchronize on the returned list when traversing it via Iterator, Spliterator or Stream. Else it may result in non-deterministic behavior. No explicit synchronization is needed to add, remove elements from synchronized arraylist</li>\n<li>CopyOnWriteArrayList class – It is a thread-safe variant of ArrayList.</li>\n</ul>\n<p>Since you are using iterator without explicit synchronization you are getting the error</p>\n"}],"owner":{"account_id":147386,"reputation":7667,"user_id":358471,"accept_rate":50,"display_name":"Lalchand"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":45890,"favorite_count":0,"down_vote_count":0,"up_vote_count":14,"accepted_answer_id":3814391,"answer_count":8,"score":14,"last_activity_date":1637372138,"creation_date":1285687457,"question_id":3814325,"body_markdown":"i have created synchronized arrayList like this\r\n\r\n    import java.text.SimpleDateFormat;\r\n    import java.util.*;\r\n    \r\n    \r\n    class HelloThread  \r\n    {\r\n     \r\n     int i=1;\r\n     List arrayList;\r\n      public  void go()\r\n      {\r\n     arrayList=Collections.synchronizedList(new ArrayList());\r\n     Thread thread1=new Thread(new Runnable() {\r\n      \r\n      public void run() {\r\n      while(i&lt;=10)\r\n      {\r\n       arrayList.add(i);\r\n       i++;\r\n      }\r\n      }\r\n     });\r\n     thread1.start();\r\n     Thread thred2=new Thread(new Runnable() {\r\n      public void run() {\r\n         while(true)\r\n         {\r\n       Iterator it=arrayList.iterator();\r\n          while(it.hasNext())\r\n          {\r\n           System.out.println(it.next());\r\n          }\r\n         }\r\n      }\r\n     });\r\n     thred2.start();\r\n      }\r\n     }\r\n    \r\n    public class test\r\n    {\r\n      public static void main(String[] args)\r\n      {\r\n       HelloThread hello=new HelloThread();\r\n       hello.go();\r\n      }\r\n    }\r\n\r\nbut getting exception like this \r\n\r\n\r\n Exception in thread &quot;Thread-1&quot; java.util.ConcurrentModificationException\r\n\r\n anything wrong in my approach ?\r\n\r\n","title":"how to create Synchronized arraylist","body":"<p>i have created synchronized arrayList like this</p>\n\n<pre><code>import java.text.SimpleDateFormat;\nimport java.util.*;\n\n\nclass HelloThread  \n{\n\n int i=1;\n List arrayList;\n  public  void go()\n  {\n arrayList=Collections.synchronizedList(new ArrayList());\n Thread thread1=new Thread(new Runnable() {\n\n  public void run() {\n  while(i&lt;=10)\n  {\n   arrayList.add(i);\n   i++;\n  }\n  }\n });\n thread1.start();\n Thread thred2=new Thread(new Runnable() {\n  public void run() {\n     while(true)\n     {\n   Iterator it=arrayList.iterator();\n      while(it.hasNext())\n      {\n       System.out.println(it.next());\n      }\n     }\n  }\n });\n thred2.start();\n  }\n }\n\npublic class test\n{\n  public static void main(String[] args)\n  {\n   HelloThread hello=new HelloThread();\n   hello.go();\n  }\n}\n</code></pre>\n\n<p>but getting exception like this </p>\n\n<p>Exception in thread \"Thread-1\" java.util.ConcurrentModificationException</p>\n\n<p>anything wrong in my approach ?</p>\n"},{"tags":["java","android","kotlin","cardview"],"comments":[{"owner":{"account_id":17597721,"reputation":647,"user_id":12768337,"display_name":"Rudra Rokaya"},"score":0,"creation_date":1637286090,"post_id":70027973,"comment_id":123792144,"body_markdown":"use app:cardBackgroundColor=&quot;@drawable/card_edge&quot; instead of android:background=&quot;@drawable/card_edge&quot;","body":"use app:cardBackgroundColor=&quot;@drawable/card_edge&quot; instead of android:background=&quot;@drawable/card_edge&quot;"},{"owner":{"account_id":19585129,"reputation":164,"user_id":14333417,"display_name":"Muhammad Farhan Arif"},"score":0,"creation_date":1637307008,"post_id":70027973,"comment_id":123796122,"body_markdown":"Make nested cardviews. Give outer cardview a color and inner cardview 1 dp margen.","body":"Make nested cardviews. Give outer cardview a color and inner cardview 1 dp margen."},{"owner":{"account_id":21161260,"reputation":3,"user_id":16441321,"display_name":"MatheusFC"},"score":0,"creation_date":1637340163,"post_id":70027973,"comment_id":123808455,"body_markdown":"within CardView it does not accept calling @drawable in &#180;app:cardBackgroundColor=&quot;@drawable/card_edge @RudraRokaya&#180;","body":"within CardView it does not accept calling @drawable in &#180;app:cardBackgroundColor=&quot;@drawable/card_edge @RudraRokaya&#180;"}],"answers":[{"tags":[],"owner":{"account_id":17597721,"reputation":647,"user_id":12768337,"display_name":"Rudra Rokaya"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1637371794,"creation_date":1637371794,"answer_id":70042583,"question_id":70027973,"body_markdown":" Use your drawable file i.e. @drawable/card_edge inside the child layout (in my case LinearLayout but You can use any layout as per your requirements.) of cardview and it will create UI as per your requirement.\r\n\r\n    &lt;androidx.constraintlayout.widget.ConstraintLayout android:layout_width=&quot;match_parent&quot;\r\n    android:layout_height=&quot;match_parent&quot;\r\n    xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;\r\n    android:clickable=&quot;true&quot;\r\n    android:focusable=&quot;true&quot;\r\n    xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;&gt;\r\n\r\n    &lt;androidx.cardview.widget.CardView\r\n        android:layout_width=&quot;match_parent&quot;\r\n        android:layout_height=&quot;200dp&quot;\r\n        android:layout_margin=&quot;8dp&quot;\r\n        app:cardCornerRadius=&quot;8dp&quot;\r\n        android:padding=&quot;5dp&quot;\r\n        android:elevation=&quot;5dp&quot;\r\n        app:layout_constraintBottom_toBottomOf=&quot;parent&quot;\r\n        app:layout_constraintEnd_toEndOf=&quot;parent&quot;\r\n        app:layout_constraintStart_toStartOf=&quot;parent&quot;\r\n        app:layout_constraintTop_toTopOf=&quot;parent&quot;\r\n        app:layout_constraintVertical_bias=&quot;0.0&quot;&gt;\r\n\r\n        &lt;LinearLayout\r\n            android:layout_width=&quot;match_parent&quot;\r\n            android:layout_height=&quot;match_parent&quot;\r\n            android:orientation=&quot;vertical&quot;\r\n            android:background=&quot;@drawable/card_edge&quot;\r\n            &gt;\r\n            .\r\n            .\r\n            .\r\n        &lt;/LinearLayout&gt;\r\n\r\n    &lt;/androidx.cardview.widget.CardView&gt;\r\n\r\n    &lt;/androidx.constraintlayout.widget.ConstraintLayout&gt;","title":"border around a cardview","body":"<p>Use your drawable file i.e. @drawable/card_edge inside the child layout (in my case LinearLayout but You can use any layout as per your requirements.) of cardview and it will create UI as per your requirement.</p>\n<pre><code>&lt;androidx.constraintlayout.widget.ConstraintLayout android:layout_width=&quot;match_parent&quot;\nandroid:layout_height=&quot;match_parent&quot;\nxmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;\nandroid:clickable=&quot;true&quot;\nandroid:focusable=&quot;true&quot;\nxmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;&gt;\n\n&lt;androidx.cardview.widget.CardView\n    android:layout_width=&quot;match_parent&quot;\n    android:layout_height=&quot;200dp&quot;\n    android:layout_margin=&quot;8dp&quot;\n    app:cardCornerRadius=&quot;8dp&quot;\n    android:padding=&quot;5dp&quot;\n    android:elevation=&quot;5dp&quot;\n    app:layout_constraintBottom_toBottomOf=&quot;parent&quot;\n    app:layout_constraintEnd_toEndOf=&quot;parent&quot;\n    app:layout_constraintStart_toStartOf=&quot;parent&quot;\n    app:layout_constraintTop_toTopOf=&quot;parent&quot;\n    app:layout_constraintVertical_bias=&quot;0.0&quot;&gt;\n\n    &lt;LinearLayout\n        android:layout_width=&quot;match_parent&quot;\n        android:layout_height=&quot;match_parent&quot;\n        android:orientation=&quot;vertical&quot;\n        android:background=&quot;@drawable/card_edge&quot;\n        &gt;\n        .\n        .\n        .\n    &lt;/LinearLayout&gt;\n\n&lt;/androidx.cardview.widget.CardView&gt;\n\n&lt;/androidx.constraintlayout.widget.ConstraintLayout&gt;\n</code></pre>\n"}],"owner":{"account_id":21161260,"reputation":3,"user_id":16441321,"display_name":"MatheusFC"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":507,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":70042583,"answer_count":1,"score":0,"last_activity_date":1637371794,"creation_date":1637277565,"question_id":70027973,"body_markdown":"I want to put a blue border around my cardview, but I can&#39;t put it on. It works on Constraint Layout tag but not on CardView\r\n\r\ncard_edge.xml\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\r\n    &lt;shape xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;&gt;\r\n      &lt;solid android:color=&quot;#FFFFFF&quot; /&gt;\r\n      &lt;stroke android:width=&quot;1dip&quot; android:color=&quot;#3683D6&quot; /&gt;\r\n      &lt;corners android:radius=&quot;5dp&quot; /&gt;\r\n    &lt;/shape&gt;\r\n\r\nitem_game_list.xml\r\n\r\n    &lt;androidx.constraintlayout.widget.ConstraintLayout\r\n        android:layout_width=&quot;match_parent&quot;\r\n        android:layout_height=&quot;wrap_content&quot;\r\n        android:clickable=&quot;true&quot;\r\n        android:focusable=&quot;true&quot;&gt;\r\n\r\n        &lt;androidx.cardview.widget.CardView\r\n            android:background=&quot;@drawable/card_edge&quot;\r\n            android:layout_width=&quot;match_parent&quot;\r\n            android:layout_height=&quot;200dp&quot;\r\n            android:layout_margin=&quot;8dp&quot;\r\n            app:cardCornerRadius=&quot;8dp&quot;\r\n            app:layout_constraintBottom_toBottomOf=&quot;parent&quot;\r\n            app:layout_constraintEnd_toEndOf=&quot;parent&quot;\r\n            app:layout_constraintStart_toStartOf=&quot;parent&quot;\r\n            app:layout_constraintTop_toTopOf=&quot;parent&quot;\r\n            app:layout_constraintVertical_bias=&quot;0.0&quot;&gt;\r\n\r\n            .\r\n            .\r\n            .\r\n\r\n        &lt;/androidx.cardview.widget.CardView&gt;\r\n\r\n    &lt;/androidx.constraintlayout.widget.ConstraintLayout&gt;\r\n\r\n","title":"border around a cardview","body":"<p>I want to put a blue border around my cardview, but I can't put it on. It works on Constraint Layout tag but not on CardView</p>\n<p>card_edge.xml</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\n&lt;shape xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;&gt;\n  &lt;solid android:color=&quot;#FFFFFF&quot; /&gt;\n  &lt;stroke android:width=&quot;1dip&quot; android:color=&quot;#3683D6&quot; /&gt;\n  &lt;corners android:radius=&quot;5dp&quot; /&gt;\n&lt;/shape&gt;\n</code></pre>\n<p>item_game_list.xml</p>\n<pre><code>&lt;androidx.constraintlayout.widget.ConstraintLayout\n    android:layout_width=&quot;match_parent&quot;\n    android:layout_height=&quot;wrap_content&quot;\n    android:clickable=&quot;true&quot;\n    android:focusable=&quot;true&quot;&gt;\n\n    &lt;androidx.cardview.widget.CardView\n        android:background=&quot;@drawable/card_edge&quot;\n        android:layout_width=&quot;match_parent&quot;\n        android:layout_height=&quot;200dp&quot;\n        android:layout_margin=&quot;8dp&quot;\n        app:cardCornerRadius=&quot;8dp&quot;\n        app:layout_constraintBottom_toBottomOf=&quot;parent&quot;\n        app:layout_constraintEnd_toEndOf=&quot;parent&quot;\n        app:layout_constraintStart_toStartOf=&quot;parent&quot;\n        app:layout_constraintTop_toTopOf=&quot;parent&quot;\n        app:layout_constraintVertical_bias=&quot;0.0&quot;&gt;\n\n        .\n        .\n        .\n\n    &lt;/androidx.cardview.widget.CardView&gt;\n\n&lt;/androidx.constraintlayout.widget.ConstraintLayout&gt;\n</code></pre>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":1938802,"reputation":12091,"user_id":1745544,"accept_rate":23,"display_name":"OldProgrammer"},"score":1,"creation_date":1466529607,"post_id":37950666,"comment_id":63350125,"body_markdown":"so just import fruit.apple","body":"so just import fruit.apple"},{"owner":{"account_id":1656541,"reputation":684,"user_id":1525953,"display_name":"Boo Radley"},"score":0,"creation_date":1466529972,"post_id":37950666,"comment_id":63350327,"body_markdown":"Your package hierarchy should be the same as your folder structure, so you would have something like `package fruit.mango;` and `import fruit.mango.Mango;`","body":"Your package hierarchy should be the same as your folder structure, so you would have something like <code>package fruit.mango;</code> and <code>import fruit.mango.Mango;</code>"}],"answers":[{"tags":[],"owner":{"account_id":16878,"reputation":306143,"user_id":37213,"accept_rate":81,"display_name":"duffymo"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1466529622,"creation_date":1466529622,"answer_id":37950755,"question_id":37950666,"body_markdown":"I think you are confused about what `import` means.\r\n\r\nStart by learning and following the Java coding standards.  Your class names should begin with a capital letter: `Apple.java` and `Mango.java`.  It&#39;ll make your code readable by other Java developers.\r\n\r\nAs for access, either class just has to obtain an instance of the class it wants:\r\n\r\n    package fruit;\r\n    \r\n    public class Apple {\r\n        private Mango mango;\r\n    \r\n        public Apple() {\r\n            this.mango = new Mango();\r\n        }\r\n    }\r\n\r\nImport only makes it possible for you to use the short class name; e.g. `Mango` instead of `fruit.Mango`.   There&#39;s no class loading or granting of access going on.  It only saves you keystrokes.\r\n\r\n","title":"java packages - access root package from subfolder","body":"<p>I think you are confused about what <code>import</code> means.</p>\n\n<p>Start by learning and following the Java coding standards.  Your class names should begin with a capital letter: <code>Apple.java</code> and <code>Mango.java</code>.  It'll make your code readable by other Java developers.</p>\n\n<p>As for access, either class just has to obtain an instance of the class it wants:</p>\n\n<pre><code>package fruit;\n\npublic class Apple {\n    private Mango mango;\n\n    public Apple() {\n        this.mango = new Mango();\n    }\n}\n</code></pre>\n\n<p>Import only makes it possible for you to use the short class name; e.g. <code>Mango</code> instead of <code>fruit.Mango</code>.   There's no class loading or granting of access going on.  It only saves you keystrokes.</p>\n"},{"tags":[],"owner":{"account_id":7902935,"reputation":6346,"user_id":5969411,"accept_rate":80,"display_name":"ManoDestra"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1466529710,"creation_date":1466529710,"answer_id":37950774,"question_id":37950666,"body_markdown":"Just import the apple in your mango class via...\r\n\r\n    import fruit.apple;\r\n\r\nYou should also upper case those class names i.e. Apple and Mango.\r\n\r\nSo...\r\n\r\n    import fruit.Apple;\r\n\r\nYou should probably have a Mango in the same package as an Apple, I would have thought though rather than in a separate fruit.mango package.","title":"java packages - access root package from subfolder","body":"<p>Just import the apple in your mango class via...</p>\n\n<pre><code>import fruit.apple;\n</code></pre>\n\n<p>You should also upper case those class names i.e. Apple and Mango.</p>\n\n<p>So...</p>\n\n<pre><code>import fruit.Apple;\n</code></pre>\n\n<p>You should probably have a Mango in the same package as an Apple, I would have thought though rather than in a separate fruit.mango package.</p>\n"},{"tags":[],"owner":{"account_id":957044,"reputation":47672,"user_id":982161,"accept_rate":63,"display_name":"ΦXocę 웃 Пepe&#250;pa ツ"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1466530117,"creation_date":1466529801,"answer_id":37950798,"question_id":37950666,"body_markdown":"You will need to import the apple in your mango class\r\n\r\n    import fruit.apple;\r\n\r\nif you are in a IDE like eclipse this can be done with the context menu.\r\n\r\n [![enter image description here][1]][1]\r\n\r\n\r\n  [1]: http://i.stack.imgur.com/h6D4U.gif","title":"java packages - access root package from subfolder","body":"<p>You will need to import the apple in your mango class</p>\n\n<pre><code>import fruit.apple;\n</code></pre>\n\n<p>if you are in a IDE like eclipse this can be done with the context menu.</p>\n\n<p><a href=\"https://i.stack.imgur.com/h6D4U.gif\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/h6D4U.gif\" alt=\"enter image description here\"></a></p>\n"}],"owner":{"account_id":8072201,"reputation":9,"user_id":6084587,"accept_rate":0,"display_name":"A Mahesania"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2131,"favorite_count":0,"down_vote_count":4,"up_vote_count":0,"answer_count":3,"score":-4,"last_activity_date":1637371775,"creation_date":1466529299,"question_id":37950666,"body_markdown":"I have a question here. Suppose I have two below directories:\r\n\r\n    fruit/apple.java\r\n    \r\n    fruit/mango/mango.java\r\n\r\nWith packages, I can make apple.java access mango.java with import mango.* (package mango created in mango.java)\r\n\r\nBut how do I do it opposite. For example mango.java needs to go to root directory and access apple.java (variables). \r\n\r\nI am trying to learn packages, but it seems that I am getting confused.\r\n\r\nThanks.","title":"java packages - access root package from subfolder","body":"<p>I have a question here. Suppose I have two below directories:</p>\n\n<pre><code>fruit/apple.java\n\nfruit/mango/mango.java\n</code></pre>\n\n<p>With packages, I can make apple.java access mango.java with import mango.* (package mango created in mango.java)</p>\n\n<p>But how do I do it opposite. For example mango.java needs to go to root directory and access apple.java (variables). </p>\n\n<p>I am trying to learn packages, but it seems that I am getting confused.</p>\n\n<p>Thanks.</p>\n"},{"tags":["java","functional-programming","java-8","option-type"],"comments":[{"owner":{"account_id":195331,"reputation":275408,"user_id":438154,"accept_rate":98,"display_name":"Sotirios Delimanolis"},"score":0,"creation_date":1400639679,"post_id":23773024,"comment_id":36558189,"body_markdown":"[`orElse`](http://docs.oracle.com/javase/8/docs/api/java/util/Optional.html#orElse-T-) is meant for something different.","body":"<a href=\"http://docs.oracle.com/javase/8/docs/api/java/util/Optional.html#orElse-T-\" rel=\"nofollow noreferrer\"><code>orElse</code></a> is meant for something different."},{"owner":{"account_id":113283,"reputation":11626,"user_id":298430,"accept_rate":66,"display_name":"smallufo"},"score":0,"creation_date":1400639731,"post_id":23773024,"comment_id":36558200,"body_markdown":"Yes , I know . I just want something like that.","body":"Yes , I know . I just want something like that."},{"owner":{"account_id":195331,"reputation":275408,"user_id":438154,"accept_rate":98,"display_name":"Sotirios Delimanolis"},"score":84,"creation_date":1400639825,"post_id":23773024,"comment_id":36558226,"body_markdown":"Use your first sample. It is _beautiful_.","body":"Use your first sample. It is <i>beautiful</i>."},{"owner":{"account_id":2347441,"reputation":67540,"user_id":2057294,"accept_rate":63,"display_name":"skiwi"},"score":5,"creation_date":1400655339,"post_id":23773024,"comment_id":36563418,"body_markdown":"I suggest you stop forcing certain behaviour when using an API that is not designed for that behaviour. You rfirst example looks fine to me apart from some small style remarks, but those are opiniated.","body":"I suggest you stop forcing certain behaviour when using an API that is not designed for that behaviour. You rfirst example looks fine to me apart from some small style remarks, but those are opiniated."},{"owner":{"account_id":1114067,"reputation":196781,"user_id":1103872,"accept_rate":82,"display_name":"Marko Topolnik"},"score":1,"creation_date":1400660473,"post_id":23773024,"comment_id":36566608,"body_markdown":"`System.out.println( (opt.isPresent()? &quot;&quot; : &quot;Not &quot;) + &quot;found&quot;);`","body":"<code>System.out.println( (opt.isPresent()? &quot;&quot; : &quot;Not &quot;) + &quot;found&quot;);</code>"},{"owner":{"account_id":3211603,"reputation":289297,"user_id":2711488,"display_name":"Holger"},"score":4,"creation_date":1400776906,"post_id":23773024,"comment_id":36632003,"body_markdown":"@smallufo: replace `return null;` with `return o;` (both). However, I have the strong feeling that you are working at the wrong place. You should work at the site which produced that `Optional`. At that place there should be a way of performing the desired operation without the intermediate `Optional`.","body":"@smallufo: replace <code>return null;</code> with <code>return o;</code> (both). However, I have the strong feeling that you are working at the wrong place. You should work at the site which produced that <code>Optional</code>. At that place there should be a way of performing the desired operation without the intermediate <code>Optional</code>."},{"owner":{"account_id":146489,"reputation":774,"user_id":356965,"display_name":"Pikachu"},"score":12,"creation_date":1473982003,"post_id":23773024,"comment_id":66359205,"body_markdown":"Java 9 implements a solution for your problem: http://iteratrlearning.com/java9/2016/09/05/java9-optional.html","body":"Java 9 implements a solution for your problem: <a href=\"http://iteratrlearning.com/java9/2016/09/05/java9-optional.html\" rel=\"nofollow noreferrer\">iteratrlearning.com/java9/2016/09/05/java9-optional.html</a>"},{"owner":{"account_id":193707,"reputation":34681,"user_id":435605,"accept_rate":45,"display_name":"AlikElzin-kilaka"},"score":2,"creation_date":1500547170,"post_id":23773024,"comment_id":77390525,"body_markdown":"I think the reason this cannot be done easily is on purpose. Optional should not do flow control, but rather value transformation. I know the `ifPresent` contradicts this. All other methods refer to the value and not actions.","body":"I think the reason this cannot be done easily is on purpose. Optional should not do flow control, but rather value transformation. I know the <code>ifPresent</code> contradicts this. All other methods refer to the value and not actions."},{"owner":{"account_id":1656295,"reputation":3809,"user_id":1525759,"accept_rate":81,"display_name":"Addison"},"score":1,"creation_date":1539617289,"post_id":23773024,"comment_id":92557350,"body_markdown":"I would argue your second example, which uses `map`, is even less functional than the `ifPresent` version. In functional programming, functions must not produce any side effects such as printing and modifying other values. They can only do calculations. I avoid using `map` anytime I&#39;m trying to produce side effects. When seeing `map` called, it&#39;s natural to assume that there won&#39;t be side effects, only a transformation of a value because of it&#39;s functional background. Using it in the way that the name suggests is a much more semantic way to program.","body":"I would argue your second example, which uses <code>map</code>, is even less functional than the <code>ifPresent</code> version. In functional programming, functions must not produce any side effects such as printing and modifying other values. They can only do calculations. I avoid using <code>map</code> anytime I&#39;m trying to produce side effects. When seeing <code>map</code> called, it&#39;s natural to assume that there won&#39;t be side effects, only a transformation of a value because of it&#39;s functional background. Using it in the way that the name suggests is a much more semantic way to program."},{"owner":{"account_id":1656295,"reputation":3809,"user_id":1525759,"accept_rate":81,"display_name":"Addison"},"score":0,"creation_date":1539618096,"post_id":23773024,"comment_id":92557759,"body_markdown":"Also, I&#39;m not sure about in Java, but in many languages such as Rust and Haskell, `map` is a lazy operation, meaning it won&#39;t actually call the block you pass until you try to use or check the value of the optional. So depending on the language, a statement like that may never be executed and as a result get optimized away. This may not apply to Java, but it&#39;s something important to be aware of.","body":"Also, I&#39;m not sure about in Java, but in many languages such as Rust and Haskell, <code>map</code> is a lazy operation, meaning it won&#39;t actually call the block you pass until you try to use or check the value of the optional. So depending on the language, a statement like that may never be executed and as a result get optimized away. This may not apply to Java, but it&#39;s something important to be aware of."},{"owner":{"account_id":156734,"reputation":26697,"user_id":374198,"accept_rate":62,"display_name":"Josh M."},"score":1,"creation_date":1565824856,"post_id":23773024,"comment_id":101475117,"body_markdown":"Java loves to get you half way there and then cluster-up the rest. Obviously you should be able to chain `ifPresent(...)` with `orElse(...)` or `otherwise(...)`.","body":"Java loves to get you half way there and then cluster-up the rest. Obviously you should be able to chain <code>ifPresent(...)</code> with <code>orElse(...)</code> or <code>otherwise(...)</code>."},{"owner":{"account_id":297814,"reputation":25314,"user_id":603516,"accept_rate":100,"display_name":"Vadzim"},"score":0,"creation_date":1575892323,"post_id":23773024,"comment_id":104706394,"body_markdown":"See also [Chaining Optionals in Java 8](https://stackoverflow.com/questions/28514704/chaining-optionals-in-java-8)","body":"See also <a href=\"https://stackoverflow.com/questions/28514704/chaining-optionals-in-java-8\">Chaining Optionals in Java 8</a>"}],"answers":[{"tags":[],"owner":{"account_id":440158,"reputation":323231,"user_id":829571,"accept_rate":94,"display_name":"assylias"},"down_vote_count":1,"up_vote_count":63,"is_accepted":false,"score":62,"last_activity_date":1400681773,"creation_date":1400659828,"answer_id":23777562,"question_id":23773024,"body_markdown":"An alternative is:\r\n\r\n    System.out.println(opt.map(o -&gt; &quot;Found&quot;)\r\n                          .orElse(&quot;Not found&quot;));\r\n\r\nI don&#39;t think it improves readability though.\r\n\r\nOr as Marko suggested, use a ternary operator:\r\n\r\n    System.out.println(opt.isPresent() ? &quot;Found&quot; : &quot;Not found&quot;);\r\n","title":"Functional style of Java 8&#39;s Optional.ifPresent and if-not-Present?","body":"<p>An alternative is:</p>\n\n<pre><code>System.out.println(opt.map(o -&gt; \"Found\")\n                      .orElse(\"Not found\"));\n</code></pre>\n\n<p>I don't think it improves readability though.</p>\n\n<p>Or as Marko suggested, use a ternary operator:</p>\n\n<pre><code>System.out.println(opt.isPresent() ? \"Found\" : \"Not found\");\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3036195,"reputation":3473,"user_id":2574227,"display_name":"Dane White"},"down_vote_count":0,"up_vote_count":23,"is_accepted":false,"score":23,"last_activity_date":1400715830,"creation_date":1400715830,"answer_id":23795627,"question_id":23773024,"body_markdown":"There isn&#39;t a great way to do it out of the box. If you want to be using your cleaner syntax on a regular basis, then you can create a utility class to help out:\r\n\r\n    public class OptionalEx {\r\n        private boolean isPresent;\r\n\r\n        private OptionalEx(boolean isPresent) {\r\n            this.isPresent = isPresent;\r\n        }\r\n\r\n        public void orElse(Runnable runner) {\r\n            if (!isPresent) {\r\n                runner.run();\r\n            }\r\n        }\r\n\r\n        public static &lt;T&gt; OptionalEx ifPresent(Optional&lt;T&gt; opt, Consumer&lt;? super T&gt; consumer) {\r\n            if (opt.isPresent()) {\r\n                consumer.accept(opt.get());\r\n                return new OptionalEx(true);\r\n            }\r\n            return new OptionalEx(false);\r\n        }\r\n    }\r\n\r\nThen you can use a static import elsewhere to get syntax that is close to what you&#39;re after:\r\n\r\n    import static com.example.OptionalEx.ifPresent;\r\n\r\n    ifPresent(opt, x -&gt; System.out.println(&quot;found &quot; + x))\r\n        .orElse(() -&gt; System.out.println(&quot;NOT FOUND&quot;));","title":"Functional style of Java 8&#39;s Optional.ifPresent and if-not-Present?","body":"<p>There isn't a great way to do it out of the box. If you want to be using your cleaner syntax on a regular basis, then you can create a utility class to help out:</p>\n\n<pre><code>public class OptionalEx {\n    private boolean isPresent;\n\n    private OptionalEx(boolean isPresent) {\n        this.isPresent = isPresent;\n    }\n\n    public void orElse(Runnable runner) {\n        if (!isPresent) {\n            runner.run();\n        }\n    }\n\n    public static &lt;T&gt; OptionalEx ifPresent(Optional&lt;T&gt; opt, Consumer&lt;? super T&gt; consumer) {\n        if (opt.isPresent()) {\n            consumer.accept(opt.get());\n            return new OptionalEx(true);\n        }\n        return new OptionalEx(false);\n    }\n}\n</code></pre>\n\n<p>Then you can use a static import elsewhere to get syntax that is close to what you're after:</p>\n\n<pre><code>import static com.example.OptionalEx.ifPresent;\n\nifPresent(opt, x -&gt; System.out.println(\"found \" + x))\n    .orElse(() -&gt; System.out.println(\"NOT FOUND\"));\n</code></pre>\n"},{"tags":[],"owner":{"account_id":936721,"reputation":12702,"user_id":965535,"accept_rate":0,"display_name":"Bassem Reda Zohdy"},"down_vote_count":1,"up_vote_count":129,"is_accepted":true,"score":128,"last_activity_date":1609889404,"creation_date":1427903483,"answer_id":29395324,"question_id":23773024,"body_markdown":"For me the answer of @Dane White is OK, first I did not like using `Runnable` but I could not find any alternatives.\r\n\r\nHere another implementation I preferred more:\r\n\r\n    public class OptionalConsumer&lt;T&gt; {\r\n\t\tprivate Optional&lt;T&gt; optional;\r\n\t\r\n\t\tprivate OptionalConsumer(Optional&lt;T&gt; optional) {\r\n\t\t\tthis.optional = optional;\r\n\t\t}\r\n\t\r\n\t\tpublic static &lt;T&gt; OptionalConsumer&lt;T&gt; of(Optional&lt;T&gt; optional) {\r\n\t\t\treturn new OptionalConsumer&lt;&gt;(optional);\r\n\t\t}\r\n\t\r\n\t\tpublic OptionalConsumer&lt;T&gt; ifPresent(Consumer&lt;T&gt; c) {\r\n\t\t\toptional.ifPresent(c);\r\n\t\t\treturn this;\r\n\t\t}\r\n\t\r\n\t\tpublic OptionalConsumer&lt;T&gt; ifNotPresent(Runnable r) {\r\n\t\t    if (!optional.isPresent()) {\r\n\t\t\t    r.run();\r\n\t\t    }\r\n\t\t    return this;\r\n\t\t}\r\n\t}\r\n\r\nThen:\r\n\r\n```lang:java\r\nOptional&lt;Any&gt; o = Optional.of(...);\r\nOptionalConsumer.of(o).ifPresent(s -&gt; System.out.println(&quot;isPresent &quot; + s))\r\n\t\t\t\t.ifNotPresent(() -&gt; System.out.println(&quot;! isPresent&quot;));\r\n```\r\n \r\n**Update 1:**\r\n\r\nthe above solution for the traditional way of development when you have the value and want to process it but what if I want to define the functionality and the execution will be then, check below enhancement;\r\n\r\n\tpublic class OptionalConsumer&lt;T&gt; implements Consumer&lt;Optional&lt;T&gt;&gt; {\r\n\tprivate final Consumer&lt;T&gt; c;\r\n\tprivate final Runnable r;\r\n\r\n\tpublic OptionalConsumer(Consumer&lt;T&gt; c, Runnable r) {\r\n\t\tsuper();\r\n\t\tthis.c = c;\r\n\t\tthis.r = r;\r\n\t}\r\n\r\n\tpublic static &lt;T&gt; OptionalConsumer&lt;T&gt; of(Consumer&lt;T&gt; c, Runnable r) {\r\n\t\treturn new OptionalConsumer(c, r);\r\n\t}\r\n\r\n\t@Override\r\n\tpublic void accept(Optional&lt;T&gt; t) {\r\n\t\tif (t.isPresent()) {\r\n\t\t\tc.accept(t.get());\r\n        }\r\n\t\telse {\r\n\t\t\tr.run();\r\n        }\r\n\t}\r\nThen could be used as:\r\n\r\n```lang:java\r\nConsumer&lt;Optional&lt;Integer&gt;&gt; c = OptionalConsumer.of(\r\n    System.out::println, \r\n    () -&gt; System.out.println(&quot;Not fit&quot;)\r\n);\r\n\r\nIntStream.range(0, 100)\r\n    .boxed()\r\n    .map(i -&gt; Optional.of(i)\r\n    .filter(j -&gt; j % 2 == 0))\r\n    .forEach(c);\r\n```\r\n\r\nIn this new code you have 3 things:\r\n\r\n 1) can define the functionality before the existing of an object easy.\r\n 2) not creating object reference for each Optional, only one, you have so less memory than less GC.\r\n 3) it is implementing consumer for better usage with other components.\r\n\r\nBy the way, now its name is more descriptive it is actually Consumer&lt;Optional&lt;?&gt;&gt;\r\n ","title":"Functional style of Java 8&#39;s Optional.ifPresent and if-not-Present?","body":"<p>For me the answer of @Dane White is OK, first I did not like using <code>Runnable</code> but I could not find any alternatives.</p>\n<p>Here another implementation I preferred more:</p>\n<pre><code>public class OptionalConsumer&lt;T&gt; {\n    private Optional&lt;T&gt; optional;\n\n    private OptionalConsumer(Optional&lt;T&gt; optional) {\n        this.optional = optional;\n    }\n\n    public static &lt;T&gt; OptionalConsumer&lt;T&gt; of(Optional&lt;T&gt; optional) {\n        return new OptionalConsumer&lt;&gt;(optional);\n    }\n\n    public OptionalConsumer&lt;T&gt; ifPresent(Consumer&lt;T&gt; c) {\n        optional.ifPresent(c);\n        return this;\n    }\n\n    public OptionalConsumer&lt;T&gt; ifNotPresent(Runnable r) {\n        if (!optional.isPresent()) {\n            r.run();\n        }\n        return this;\n    }\n}\n</code></pre>\n<p>Then:</p>\n<pre><code>Optional&lt;Any&gt; o = Optional.of(...);\nOptionalConsumer.of(o).ifPresent(s -&gt; System.out.println(&quot;isPresent &quot; + s))\n                .ifNotPresent(() -&gt; System.out.println(&quot;! isPresent&quot;));\n</code></pre>\n<p><strong>Update 1:</strong></p>\n<p>the above solution for the traditional way of development when you have the value and want to process it but what if I want to define the functionality and the execution will be then, check below enhancement;</p>\n<pre><code>public class OptionalConsumer&lt;T&gt; implements Consumer&lt;Optional&lt;T&gt;&gt; {\nprivate final Consumer&lt;T&gt; c;\nprivate final Runnable r;\n\npublic OptionalConsumer(Consumer&lt;T&gt; c, Runnable r) {\n    super();\n    this.c = c;\n    this.r = r;\n}\n\npublic static &lt;T&gt; OptionalConsumer&lt;T&gt; of(Consumer&lt;T&gt; c, Runnable r) {\n    return new OptionalConsumer(c, r);\n}\n\n@Override\npublic void accept(Optional&lt;T&gt; t) {\n    if (t.isPresent()) {\n        c.accept(t.get());\n    }\n    else {\n        r.run();\n    }\n}\n</code></pre>\n<p>Then could be used as:</p>\n<pre><code>Consumer&lt;Optional&lt;Integer&gt;&gt; c = OptionalConsumer.of(\n    System.out::println, \n    () -&gt; System.out.println(&quot;Not fit&quot;)\n);\n\nIntStream.range(0, 100)\n    .boxed()\n    .map(i -&gt; Optional.of(i)\n    .filter(j -&gt; j % 2 == 0))\n    .forEach(c);\n</code></pre>\n<p>In this new code you have 3 things:</p>\n<ol>\n<li>can define the functionality before the existing of an object easy.</li>\n<li>not creating object reference for each Optional, only one, you have so less memory than less GC.</li>\n<li>it is implementing consumer for better usage with other components.</li>\n</ol>\n<p>By the way, now its name is more descriptive it is actually Consumer&lt;Optional&lt;?&gt;&gt;</p>\n"},{"tags":[],"owner":{"account_id":2076676,"reputation":12739,"user_id":1849837,"accept_rate":88,"display_name":"Bartosz Bilicki"},"down_vote_count":22,"up_vote_count":132,"is_accepted":false,"score":110,"last_activity_date":1581066704,"creation_date":1430150798,"answer_id":29900740,"question_id":23773024,"body_markdown":"Java 9 introduces \r\n\r\nifPresentOrElse if a value is present, performs the given action with the value, otherwise performs the given empty-based action.\r\n-----------------------------------------------\r\n\r\nSee excellent [Optional in Java 8 cheat sheet][1].\r\n\r\nIt provides all answers for most use cases.\r\n\r\nShort summary below\r\n\r\nifPresent() - do something when Optional is set\r\n-----------------------------------------------\r\n\r\n    opt.ifPresent(x -&gt; print(x)); \r\n    opt.ifPresent(this::print);\r\n\r\nfilter() - reject (filter out) certain Optional values.\r\n-------------------------------------------------------\r\n\r\n    opt.filter(x -&gt; x.contains(&quot;ab&quot;)).ifPresent(this::print);\r\n\r\nmap() - transform value if present\r\n----------------------------------\r\n\r\n    opt.map(String::trim).filter(t -&gt; t.length() &gt; 1).ifPresent(this::print);\r\n\r\norElse()/orElseGet() - turning empty Optional&lt;T&gt; to default T\r\n-------------------------------------------------------------\r\n\r\n    int len = opt.map(String::length).orElse(-1);\r\n    int len = opt.\r\n        map(String::length).\r\n        orElseGet(() -&gt; slowDefault());     //orElseGet(this::slowDefault)\r\n\r\norElseThrow() - lazily throw exceptions on empty Optional\r\n--------------------------------\r\n    opt.\r\n    filter(s -&gt; !s.isEmpty()).\r\n    map(s -&gt; s.charAt(0)).\r\n    orElseThrow(IllegalArgumentException::new);\r\n\r\n  [1]: http://web.archive.org/web/20180621022440/https://www.nurkiewicz.com/2013/08/optional-in-java-8-cheat-sheet.html &quot;Optional in Java 8 cheat sheet&quot;","title":"Functional style of Java 8&#39;s Optional.ifPresent and if-not-Present?","body":"<p>Java 9 introduces </p>\n\n<h2>ifPresentOrElse if a value is present, performs the given action with the value, otherwise performs the given empty-based action.</h2>\n\n<p>See excellent <a href=\"http://web.archive.org/web/20180621022440/https://www.nurkiewicz.com/2013/08/optional-in-java-8-cheat-sheet.html\" rel=\"noreferrer\" title=\"Optional in Java 8 cheat sheet\">Optional in Java 8 cheat sheet</a>.</p>\n\n<p>It provides all answers for most use cases.</p>\n\n<p>Short summary below</p>\n\n<h2>ifPresent() - do something when Optional is set</h2>\n\n<pre><code>opt.ifPresent(x -&gt; print(x)); \nopt.ifPresent(this::print);\n</code></pre>\n\n<h2>filter() - reject (filter out) certain Optional values.</h2>\n\n<pre><code>opt.filter(x -&gt; x.contains(\"ab\")).ifPresent(this::print);\n</code></pre>\n\n<h2>map() - transform value if present</h2>\n\n<pre><code>opt.map(String::trim).filter(t -&gt; t.length() &gt; 1).ifPresent(this::print);\n</code></pre>\n\n<h2>orElse()/orElseGet() - turning empty Optional to default T</h2>\n\n<pre><code>int len = opt.map(String::length).orElse(-1);\nint len = opt.\n    map(String::length).\n    orElseGet(() -&gt; slowDefault());     //orElseGet(this::slowDefault)\n</code></pre>\n\n<h2>orElseThrow() - lazily throw exceptions on empty Optional</h2>\n\n<pre><code>opt.\nfilter(s -&gt; !s.isEmpty()).\nmap(s -&gt; s.charAt(0)).\norElseThrow(IllegalArgumentException::new);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":6538409,"reputation":479,"user_id":5057016,"display_name":"user5057016"},"down_vote_count":1,"up_vote_count":48,"is_accepted":false,"score":47,"last_activity_date":1435442115,"creation_date":1435442115,"answer_id":31093915,"question_id":23773024,"body_markdown":"Another solution would be to use higher-order functions as follows\r\n\r\n    opt.&lt;Runnable&gt;map(value -&gt; () -&gt; System.out.println(&quot;Found &quot; + value))\r\n       .orElse(() -&gt; System.out.println(&quot;Not Found&quot;))\r\n       .run();","title":"Functional style of Java 8&#39;s Optional.ifPresent and if-not-Present?","body":"<p>Another solution would be to use higher-order functions as follows</p>\n\n<pre><code>opt.&lt;Runnable&gt;map(value -&gt; () -&gt; System.out.println(\"Found \" + value))\n   .orElse(() -&gt; System.out.println(\"Not Found\"))\n   .run();\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1775560,"reputation":1720,"user_id":1619407,"display_name":"Alessandro Giusa"},"down_vote_count":3,"up_vote_count":4,"is_accepted":false,"score":1,"last_activity_date":1635956422,"creation_date":1468071837,"answer_id":38282460,"question_id":23773024,"body_markdown":"Another solution could be following:\r\n\r\nThis is how you use it:\r\n\r\n\t\tfinal Opt&lt;String&gt; opt = Opt.of(&quot;I&#39;m a cool text&quot;);\r\n\t\topt.ifPresent()\r\n\t\t\t.apply(s -&gt; System.out.printf(&quot;Text is: %s\\n&quot;, s))\r\n\t\t\t.elseApply(() -&gt; System.out.println(&quot;no text available&quot;));\r\n\r\nOr in case you in case of the opposite use case is true:\r\n\r\n\t\tfinal Opt&lt;String&gt; opt = Opt.of(&quot;This is the text&quot;);\r\n\t\topt.ifNotPresent()\r\n\t\t\t.apply(() -&gt; System.out.println(&quot;Not present&quot;))\r\n            .elseApply(t -&gt; /*do something here*/);\r\n\r\nThis are the ingredients:\r\n&lt;ol&gt;\r\n&lt;li&gt;Little modified Function interface, just for the &quot;elseApply&quot; method&lt;/li&gt;\r\n&lt;li&gt;Optional enhancement&lt;/li&gt;\r\n&lt;li&gt;A little bit of curring :-)&lt;/li&gt;\r\n&lt;/ol&gt;\r\n\r\nThe &quot;cosmetically&quot; enhanced Function interface.\r\n    \r\n    @FunctionalInterface\r\n    public interface Fkt&lt;T, R&gt; extends Function&lt;T, R&gt; {\r\n    \r\n    \tdefault R elseApply(final T t) {\r\n    \t\treturn this.apply(t);\r\n    \t}\r\n    \r\n    }\r\n\r\nAnd the Optional wrapper class for enhancement:\r\n\r\n    public class Opt&lt;T&gt; {\r\n    \r\n    \tprivate final Optional&lt;T&gt; optional;\r\n    \r\n    \tprivate Opt(final Optional&lt;T&gt; theOptional) {\r\n    \t\tthis.optional = theOptional;\r\n    \t}\r\n    \t\r\n    \tpublic static &lt;T&gt; Opt&lt;T&gt; of(final T value) {\r\n    \t\treturn new Opt&lt;&gt;(Optional.of(value));\r\n    \t}\r\n\r\n        public static &lt;T&gt; Opt&lt;T&gt; of(final Optional&lt;T&gt; optional) {\r\n\t\t    return new Opt&lt;&gt;(optional);\r\n\t    }\r\n    \t\r\n    \tpublic static &lt;T&gt; Opt&lt;T&gt; ofNullable(final T value) {\r\n    \t\treturn new Opt&lt;&gt;(Optional.ofNullable(value));\r\n    \t}\r\n    \t\r\n    \tpublic static &lt;T&gt; Opt&lt;T&gt; empty() {\r\n    \t\treturn new Opt&lt;&gt;(Optional.empty());\r\n    \t}\r\n    \r\n    \tprivate final BiFunction&lt;Consumer&lt;T&gt;, Runnable, Void&gt; ifPresent = (present, notPresent) -&gt; {\r\n    \t\tif (this.optional.isPresent()) {\r\n    \t\t\tpresent.accept(this.optional.get());\r\n    \t\t} else {\r\n    \t\t\tnotPresent.run();\r\n    \t\t}\r\n    \t\treturn null;\r\n    \t};\r\n\r\n\t   private final BiFunction&lt;Runnable, Consumer&lt;T&gt;, Void&gt; ifNotPresent = (notPresent, present) -&gt; {\r\n\t\t    if (!this.optional.isPresent()) {\r\n\t\t\t    notPresent.run();\r\n\t\t    } else {\r\n\t\t\t    present.accept(this.optional.get());\r\n\t\t    }\r\n\t\t    return null;\r\n\t    };\r\n    \r\n    \tpublic Fkt&lt;Consumer&lt;T&gt;, Fkt&lt;Runnable, Void&gt;&gt; ifPresent() {\r\n    \t\treturn Opt.curry(this.ifPresent);\r\n    \t}\r\n\r\n\t    public Fkt&lt;Runnable, Fkt&lt;Consumer&lt;T&gt;, Void&gt;&gt; ifNotPresent() {\r\n\t\t    return Opt.curry(this.ifNotPresent);\r\n\t    }\r\n    \r\n    \tprivate static &lt;X, Y, Z&gt; Fkt&lt;X, Fkt&lt;Y, Z&gt;&gt; curry(final BiFunction&lt;X, Y, Z&gt; function) {\r\n    \t\treturn (final X x) -&gt; (final Y y) -&gt; function.apply(x, y);\r\n    \t}\r\n    }\r\n    \r\n\r\nThis should do the trick and could serve as a basic template how to deal with such requirements.\r\n\r\nThe basic idea here is following. In a non functional style programming world you would probably implement a method taking two parameter where the first is a kind of runnable code which should be executed in case the value is available and the other parameter is the runnable code which should be run in case the value is not available. For the sake of better readability, you can use curring to split the function of two parameter in two functions of one parameter each. This is what I basically did here.\r\n\r\nHint: Opt also provides the other use case where you want to execute a piece of code just in case the value is not available. This could be done also via Optional.filter.stuff but I found this much more readable.\r\n\r\nHope that helps!\r\n\r\n**Additional Info:**\r\n\r\nThere is another way to have say &quot;if then else&quot; using currying:\r\n\r\n    public static &lt;X, Y&gt; Function&lt;Predicate&lt;X&gt;, Function&lt;Function&lt;X, Y&gt;, Function&lt;Function&lt;X, Y&gt;, Y&gt;&gt;&gt; ifThenElse(X input) {\r\n      return (final Predicate&lt;X&gt; pred) -&gt; (final Function&lt;X, Y&gt; ifPresent) -&gt; (final Function&lt;X, Y&gt; ifNotPresent) -&gt; pred.test(input) ? ifPresent.apply(input) : ifNotPresent.apply(input);\r\n    }\r\n\r\nThis way it is possible to say:\r\n\r\n    \r\n\r\n    final String result = ifThenElse(&quot;fancy&quot;)\r\n      .apply(input -&gt; input.contains(&quot;fancy&quot;)) /* test      */\r\n      .apply(input -&gt; input.toUpperCase())     /* if-case   */\r\n      .apply(input -&gt; input.toLowerCase());    /* else-case */\r\n    ","title":"Functional style of Java 8&#39;s Optional.ifPresent and if-not-Present?","body":"<p>Another solution could be following:</p>\n<p>This is how you use it:</p>\n<pre><code>    final Opt&lt;String&gt; opt = Opt.of(&quot;I'm a cool text&quot;);\n    opt.ifPresent()\n        .apply(s -&gt; System.out.printf(&quot;Text is: %s\\n&quot;, s))\n        .elseApply(() -&gt; System.out.println(&quot;no text available&quot;));\n</code></pre>\n<p>Or in case you in case of the opposite use case is true:</p>\n<pre><code>    final Opt&lt;String&gt; opt = Opt.of(&quot;This is the text&quot;);\n    opt.ifNotPresent()\n        .apply(() -&gt; System.out.println(&quot;Not present&quot;))\n        .elseApply(t -&gt; /*do something here*/);\n</code></pre>\n<p>This are the ingredients:</p>\n<ol>\n<li>Little modified Function interface, just for the \"elseApply\" method</li>\n<li>Optional enhancement</li>\n<li>A little bit of curring :-)</li>\n</ol>\n<p>The &quot;cosmetically&quot; enhanced Function interface.</p>\n<pre><code>@FunctionalInterface\npublic interface Fkt&lt;T, R&gt; extends Function&lt;T, R&gt; {\n\n    default R elseApply(final T t) {\n        return this.apply(t);\n    }\n\n}\n</code></pre>\n<p>And the Optional wrapper class for enhancement:</p>\n<pre><code>public class Opt&lt;T&gt; {\n\n    private final Optional&lt;T&gt; optional;\n\n    private Opt(final Optional&lt;T&gt; theOptional) {\n        this.optional = theOptional;\n    }\n    \n    public static &lt;T&gt; Opt&lt;T&gt; of(final T value) {\n        return new Opt&lt;&gt;(Optional.of(value));\n    }\n\n    public static &lt;T&gt; Opt&lt;T&gt; of(final Optional&lt;T&gt; optional) {\n        return new Opt&lt;&gt;(optional);\n    }\n    \n    public static &lt;T&gt; Opt&lt;T&gt; ofNullable(final T value) {\n        return new Opt&lt;&gt;(Optional.ofNullable(value));\n    }\n    \n    public static &lt;T&gt; Opt&lt;T&gt; empty() {\n        return new Opt&lt;&gt;(Optional.empty());\n    }\n\n    private final BiFunction&lt;Consumer&lt;T&gt;, Runnable, Void&gt; ifPresent = (present, notPresent) -&gt; {\n        if (this.optional.isPresent()) {\n            present.accept(this.optional.get());\n        } else {\n            notPresent.run();\n        }\n        return null;\n    };\n\n   private final BiFunction&lt;Runnable, Consumer&lt;T&gt;, Void&gt; ifNotPresent = (notPresent, present) -&gt; {\n        if (!this.optional.isPresent()) {\n            notPresent.run();\n        } else {\n            present.accept(this.optional.get());\n        }\n        return null;\n    };\n\n    public Fkt&lt;Consumer&lt;T&gt;, Fkt&lt;Runnable, Void&gt;&gt; ifPresent() {\n        return Opt.curry(this.ifPresent);\n    }\n\n    public Fkt&lt;Runnable, Fkt&lt;Consumer&lt;T&gt;, Void&gt;&gt; ifNotPresent() {\n        return Opt.curry(this.ifNotPresent);\n    }\n\n    private static &lt;X, Y, Z&gt; Fkt&lt;X, Fkt&lt;Y, Z&gt;&gt; curry(final BiFunction&lt;X, Y, Z&gt; function) {\n        return (final X x) -&gt; (final Y y) -&gt; function.apply(x, y);\n    }\n}\n</code></pre>\n<p>This should do the trick and could serve as a basic template how to deal with such requirements.</p>\n<p>The basic idea here is following. In a non functional style programming world you would probably implement a method taking two parameter where the first is a kind of runnable code which should be executed in case the value is available and the other parameter is the runnable code which should be run in case the value is not available. For the sake of better readability, you can use curring to split the function of two parameter in two functions of one parameter each. This is what I basically did here.</p>\n<p>Hint: Opt also provides the other use case where you want to execute a piece of code just in case the value is not available. This could be done also via Optional.filter.stuff but I found this much more readable.</p>\n<p>Hope that helps!</p>\n<p><strong>Additional Info:</strong></p>\n<p>There is another way to have say &quot;if then else&quot; using currying:</p>\n<pre><code>public static &lt;X, Y&gt; Function&lt;Predicate&lt;X&gt;, Function&lt;Function&lt;X, Y&gt;, Function&lt;Function&lt;X, Y&gt;, Y&gt;&gt;&gt; ifThenElse(X input) {\n  return (final Predicate&lt;X&gt; pred) -&gt; (final Function&lt;X, Y&gt; ifPresent) -&gt; (final Function&lt;X, Y&gt; ifNotPresent) -&gt; pred.test(input) ? ifPresent.apply(input) : ifNotPresent.apply(input);\n}\n</code></pre>\n<p>This way it is possible to say:</p>\n<pre><code>final String result = ifThenElse(&quot;fancy&quot;)\n  .apply(input -&gt; input.contains(&quot;fancy&quot;)) /* test      */\n  .apply(input -&gt; input.toUpperCase())     /* if-case   */\n  .apply(input -&gt; input.toLowerCase());    /* else-case */\n</code></pre>\n"},{"tags":[],"owner":{"account_id":362885,"reputation":37256,"user_id":706317,"accept_rate":70,"display_name":"ZhekaKozlov"},"down_vote_count":1,"up_vote_count":315,"is_accepted":false,"score":314,"last_activity_date":1615625083,"creation_date":1488971908,"answer_id":42669868,"question_id":23773024,"body_markdown":"If you are using Java 9+, you can use [`ifPresentOrElse()`](https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/Optional.html#ifPresentOrElse(java.util.function.Consumer,java.lang.Runnable)) method:\r\n\r\n    opt.ifPresentOrElse(\r\n       value -&gt; System.out.println(&quot;Found: &quot; + value),\r\n       () -&gt; System.out.println(&quot;Not found&quot;)\r\n    );","title":"Functional style of Java 8&#39;s Optional.ifPresent and if-not-Present?","body":"<p>If you are using Java 9+, you can use <a href=\"https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/Optional.html#ifPresentOrElse(java.util.function.Consumer,java.lang.Runnable)\" rel=\"noreferrer\"><code>ifPresentOrElse()</code></a> method:</p>\n<pre><code>opt.ifPresentOrElse(\n   value -&gt; System.out.println(&quot;Found: &quot; + value),\n   () -&gt; System.out.println(&quot;Not found&quot;)\n);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":5062262,"reputation":505,"user_id":4063455,"accept_rate":14,"display_name":"Jhutan Debnath"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1531850832,"creation_date":1531850832,"answer_id":51387785,"question_id":23773024,"body_markdown":"In case you want store the value:\r\n\r\n    Pair.of&lt;List&lt;&gt;, List&lt;&gt;&gt; output = opt.map(details -&gt; Pair.of(details.a, details.b))).orElseGet(() -&gt; Pair.of(Collections.emptyList(), Collections.emptyList()));","title":"Functional style of Java 8&#39;s Optional.ifPresent and if-not-Present?","body":"<p>In case you want store the value:</p>\n\n<pre><code>Pair.of&lt;List&lt;&gt;, List&lt;&gt;&gt; output = opt.map(details -&gt; Pair.of(details.a, details.b))).orElseGet(() -&gt; Pair.of(Collections.emptyList(), Collections.emptyList()));\n</code></pre>\n"},{"tags":[],"owner":{"account_id":9592031,"reputation":335,"user_id":7122567,"display_name":"Leandro Maro"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1573971040,"creation_date":1553200021,"answer_id":55288755,"question_id":23773024,"body_markdown":"Supposing that you have a list and avoiding the `isPresent()` issue (related with optionals) you could use `.iterator().hasNext()` to check if not present.","title":"Functional style of Java 8&#39;s Optional.ifPresent and if-not-Present?","body":"<p>Supposing that you have a list and avoiding the <code>isPresent()</code> issue (related with optionals) you could use <code>.iterator().hasNext()</code> to check if not present.</p>\n"},{"tags":[],"owner":{"account_id":410790,"reputation":648,"user_id":6108874,"accept_rate":62,"display_name":"Gerard Bosch"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1599634849,"creation_date":1556402555,"answer_id":55885231,"question_id":23773024,"body_markdown":"The described behavior can be achieved by using [Vavr](http://www.vavr.io) (formerly known as Javaslang), an object-functional library for Java 8+, that implements most of Scala constructs (being Scala a more expressive language with a way richer type system built on JVM). It is a very good library to add to your Java projects to write pure functional code.\r\n\r\nVavr provides the `Option` monad that provides functions to work with the Option type such as:\r\n\r\n* `fold`: to map the value of the option on both cases (defined/empty)\r\n* `onEmpty`: allows to execute a `Runnable` when option is empty\r\n* `peek`: allows to consume the value of the option (when defined).\r\n* and it is also `Serializable` on the contrary of `Optional` which means you can safely use it as method argument and instance member.\r\n\r\nOption follows the monad laws at difference to the Java&#39;s Optional &quot;pseudo-monad&quot; and provides a richer API. And of course you can make it from a Java&#39;s Optional (and the other way around): `Option.ofOptional(javaOptional)` –Vavr is focused on interoperability.\r\n\r\n### Going to the example:\r\n\r\n```java\r\n// AWESOME Vavr functional collections (immutable for the gread good :)\r\n// fully convertible to Java&#39;s counterparts.\r\nfinal Map&lt;String, String&gt; map = Map(&quot;key1&quot;, &quot;value1&quot;, &quot;key2&quot;, &quot;value2&quot;);\r\n\r\nfinal Option&lt;String&gt; opt = map.get(&quot;nonExistentKey&quot;); // you&#39;re safe of null refs!\r\n        \r\nfinal String result = opt.fold(\r\n        () -&gt; &quot;Not found!!!&quot;,                // Option is None\r\n        val -&gt; &quot;Found the value: &quot; + val     // Option is Some(val)\r\n);\r\n```\r\n\r\nMoreover, all Vavr types are convertible to its Java counterparts, for the sake of the example: `Optional javaOptional = opt.toJava()`, very easy :) Of course the conversion also exists in the other way: `Option option = Option.ofOptional(javaOptional)`.\r\n\r\nN.B. Vavr offers a `io.vavr.API` class with a lot of convenient static methods =)\r\n\r\n### Further reading\r\n[Null reference, the billion dollar mistake][1]\r\n\r\n**N.B.** This is only a very little example of what Vavr offers (pattern matching, streams a.k.a. lazy evaluated lists, monadic types, immutable collections,...).\r\n\r\n\r\n  [1]: https://news.ycombinator.com/item?id=12427069","title":"Functional style of Java 8&#39;s Optional.ifPresent and if-not-Present?","body":"<p>The described behavior can be achieved by using <a href=\"http://www.vavr.io\" rel=\"nofollow noreferrer\">Vavr</a> (formerly known as Javaslang), an object-functional library for Java 8+, that implements most of Scala constructs (being Scala a more expressive language with a way richer type system built on JVM). It is a very good library to add to your Java projects to write pure functional code.</p>\n<p>Vavr provides the <code>Option</code> monad that provides functions to work with the Option type such as:</p>\n<ul>\n<li><code>fold</code>: to map the value of the option on both cases (defined/empty)</li>\n<li><code>onEmpty</code>: allows to execute a <code>Runnable</code> when option is empty</li>\n<li><code>peek</code>: allows to consume the value of the option (when defined).</li>\n<li>and it is also <code>Serializable</code> on the contrary of <code>Optional</code> which means you can safely use it as method argument and instance member.</li>\n</ul>\n<p>Option follows the monad laws at difference to the Java's Optional &quot;pseudo-monad&quot; and provides a richer API. And of course you can make it from a Java's Optional (and the other way around): <code>Option.ofOptional(javaOptional)</code> –Vavr is focused on interoperability.</p>\n<h3>Going to the example:</h3>\n<pre class=\"lang-java prettyprint-override\"><code>// AWESOME Vavr functional collections (immutable for the gread good :)\n// fully convertible to Java's counterparts.\nfinal Map&lt;String, String&gt; map = Map(&quot;key1&quot;, &quot;value1&quot;, &quot;key2&quot;, &quot;value2&quot;);\n\nfinal Option&lt;String&gt; opt = map.get(&quot;nonExistentKey&quot;); // you're safe of null refs!\n        \nfinal String result = opt.fold(\n        () -&gt; &quot;Not found!!!&quot;,                // Option is None\n        val -&gt; &quot;Found the value: &quot; + val     // Option is Some(val)\n);\n</code></pre>\n<p>Moreover, all Vavr types are convertible to its Java counterparts, for the sake of the example: <code>Optional javaOptional = opt.toJava()</code>, very easy :) Of course the conversion also exists in the other way: <code>Option option = Option.ofOptional(javaOptional)</code>.</p>\n<p>N.B. Vavr offers a <code>io.vavr.API</code> class with a lot of convenient static methods =)</p>\n<h3>Further reading</h3>\n<p><a href=\"https://news.ycombinator.com/item?id=12427069\" rel=\"nofollow noreferrer\">Null reference, the billion dollar mistake</a></p>\n<p><strong>N.B.</strong> This is only a very little example of what Vavr offers (pattern matching, streams a.k.a. lazy evaluated lists, monadic types, immutable collections,...).</p>\n"},{"tags":[],"owner":{"account_id":14453570,"reputation":724,"user_id":10440388,"display_name":"Tyulpan Tyulpan"},"down_vote_count":0,"up_vote_count":16,"is_accepted":false,"score":16,"last_activity_date":1559226174,"creation_date":1557839519,"answer_id":56131331,"question_id":23773024,"body_markdown":"If you can use only Java 8 or lower:\r\n\r\n1) if you don&#39;t have `spring-data` the best way so far is:\r\n\r\n    opt.&lt;Runnable&gt;map(param -&gt; () -&gt; System.out.println(param))\r\n          .orElse(() -&gt; System.out.println(&quot;no-param-specified&quot;))\r\n          .run();\r\nNow I know it&#39;s not so readable and even hard to understand for someone, but looks fine for me personally and I don&#39;t see another nice fluent way for this case.\r\n\r\n2) if you&#39;re lucky enough and you can use `spring-data` the best way is\r\n[Optionals#ifPresentOrElse][1]:\r\n\r\n    Optionals.ifPresentOrElse(opt, System.out::println,\r\n          () -&gt; System.out.println(&quot;no-param-specified&quot;));\r\n\r\nIf you can use Java 9, you should definitely go with:\r\n\r\n    opt.ifPresentOrElse(System.out::println,\r\n          () -&gt; System.out.println(&quot;no-param-specified&quot;));\r\n\r\n\r\n\r\n\r\n  [1]: https://docs.spring.io/spring-data/commons/docs/current/api/org/springframework/data/util/Optionals.html#ifPresentOrElse-java.util.Optional-java.util.function.Consumer-java.lang.Runnable-","title":"Functional style of Java 8&#39;s Optional.ifPresent and if-not-Present?","body":"<p>If you can use only Java 8 or lower:</p>\n\n<p>1) if you don't have <code>spring-data</code> the best way so far is:</p>\n\n<pre><code>opt.&lt;Runnable&gt;map(param -&gt; () -&gt; System.out.println(param))\n      .orElse(() -&gt; System.out.println(\"no-param-specified\"))\n      .run();\n</code></pre>\n\n<p>Now I know it's not so readable and even hard to understand for someone, but looks fine for me personally and I don't see another nice fluent way for this case.</p>\n\n<p>2) if you're lucky enough and you can use <code>spring-data</code> the best way is\n<a href=\"https://docs.spring.io/spring-data/commons/docs/current/api/org/springframework/data/util/Optionals.html#ifPresentOrElse-java.util.Optional-java.util.function.Consumer-java.lang.Runnable-\" rel=\"noreferrer\">Optionals#ifPresentOrElse</a>:</p>\n\n<pre><code>Optionals.ifPresentOrElse(opt, System.out::println,\n      () -&gt; System.out.println(\"no-param-specified\"));\n</code></pre>\n\n<p>If you can use Java 9, you should definitely go with:</p>\n\n<pre><code>opt.ifPresentOrElse(System.out::println,\n      () -&gt; System.out.println(\"no-param-specified\"));\n</code></pre>\n"},{"tags":[],"owner":{"account_id":9073256,"reputation":41,"user_id":6755648,"display_name":"M.Khan"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1595721929,"creation_date":1595719127,"answer_id":63094545,"question_id":23773024,"body_markdown":"You cannot call `orElse` after `ifPresent`, the reason is, `orElse` is called on an optiional but `ifPresent` returns void. So the best approach to achieve is `ifPresentOrElse`.\r\nIt could be like this:\r\n\r\n    op.ifPresentOrElse( \r\n                (value) \r\n                    -&gt; { System.out.println( \r\n                             &quot;Value is present, its: &quot;\r\n                             + value); }, \r\n                () \r\n                    -&gt; { System.out.println( \r\n                             &quot;Value is empty&quot;); }); ","title":"Functional style of Java 8&#39;s Optional.ifPresent and if-not-Present?","body":"<p>You cannot call <code>orElse</code> after <code>ifPresent</code>, the reason is, <code>orElse</code> is called on an optiional but <code>ifPresent</code> returns void. So the best approach to achieve is <code>ifPresentOrElse</code>.\nIt could be like this:</p>\n<pre><code>op.ifPresentOrElse( \n            (value) \n                -&gt; { System.out.println( \n                         &quot;Value is present, its: &quot;\n                         + value); }, \n            () \n                -&gt; { System.out.println( \n                         &quot;Value is empty&quot;); }); \n</code></pre>\n"},{"tags":[],"owner":{"account_id":309636,"reputation":2999,"user_id":622192,"accept_rate":100,"display_name":"drew"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1637371150,"creation_date":1637371150,"answer_id":70042532,"question_id":23773024,"body_markdown":"The problem here:\r\n\r\n    optional\r\n      .map(object -&gt; {\r\n        System.out.println(&quot;If present.&quot;);\r\n        return null;\r\n      })\r\n      .orElseGet( () -&gt; {\r\n        System.out.println(&quot;If empty.&quot;);\r\n        return null;\r\n      });\r\n\r\nIs that `map()` converts the `null` returned by the first function to `empty()`; it then returns `empty()`. As it returns `empty()`, it prompts the invocation of the second function. Note that `orElseGet()` *does not convert* the `null` returned by the second function to `empty()`, so it *will* return `null`.\r\n\r\nSee the implementation of `map()`:\r\n\r\n    public&lt;U&gt; Optional&lt;U&gt; map(Function&lt;? super T, ? extends U&gt; mapper) {\r\n        Objects.requireNonNull(mapper);\r\n        if (!isPresent())\r\n            return empty();\r\n        else {\r\n            return Optional.ofNullable(mapper.apply(value));\r\n        }\r\n    }\r\n\r\nAnd the implementation of `orElseGet()`:\r\n\r\n    public T orElseGet(Supplier&lt;? extends T&gt; other) {\r\n        return value != null ? value : other.get();\r\n    }\r\n\r\nThus when executed:\r\n\r\n* if `optional.isPresent()`, the system will print `If present.`, then `If empty.`, and the expression will evaluate to null.\r\n\r\n* if `!optional.isPresent()`, the system will print `If empty.`, and the expression will evaluate to null.\r\n\r\n---\r\n\r\nIf the function provided to `map()` returned *any* other value - *any* other value - the code would work as you expect, with the function provided to `map()` being executed if `isPresent()` and the function provided to `orElseGet()` if `!isPresent()`:\r\n\r\nFor example, this:\r\n\r\n    optional\r\n      .map(data -&gt; {\r\n        System.out.println(&quot;If present.&quot;);\r\n        return 0;\r\n      })\r\n      .orElseGet( () -&gt; {\r\n        System.out.println(&quot;If empty.&quot;);\r\n        return 0;\r\n      });\r\n\r\nWhen executed:\r\n\r\n* if `optional.isPresent()`, the system will print `If present.`, and the expression will evaluate to 0.\r\n\r\n* if `!optional.isPresent()`, the system will print `If empty.`, and the expression will evaluate to 0.\r\n\r\nIf your specific case, I suggest that your `insert` and `update` methods return, say, the persisted object, or the id of the persisted object, or something similarly useful; then you can use code similar to this:\r\n\r\n    final Object persist = optional\r\n      .map(object -&gt; {\r\n        System.out.println(&quot;If present.&quot;);\r\n        return update(object);\r\n      })\r\n      .orElseGet( () -&gt; {\r\n        System.out.println(&quot;If empty.&quot;);\r\n        return insert(new Object());\r\n      });","title":"Functional style of Java 8&#39;s Optional.ifPresent and if-not-Present?","body":"<p>The problem here:</p>\n<pre><code>optional\n  .map(object -&gt; {\n    System.out.println(&quot;If present.&quot;);\n    return null;\n  })\n  .orElseGet( () -&gt; {\n    System.out.println(&quot;If empty.&quot;);\n    return null;\n  });\n</code></pre>\n<p>Is that <code>map()</code> converts the <code>null</code> returned by the first function to <code>empty()</code>; it then returns <code>empty()</code>. As it returns <code>empty()</code>, it prompts the invocation of the second function. Note that <code>orElseGet()</code> <em>does not convert</em> the <code>null</code> returned by the second function to <code>empty()</code>, so it <em>will</em> return <code>null</code>.</p>\n<p>See the implementation of <code>map()</code>:</p>\n<pre><code>public&lt;U&gt; Optional&lt;U&gt; map(Function&lt;? super T, ? extends U&gt; mapper) {\n    Objects.requireNonNull(mapper);\n    if (!isPresent())\n        return empty();\n    else {\n        return Optional.ofNullable(mapper.apply(value));\n    }\n}\n</code></pre>\n<p>And the implementation of <code>orElseGet()</code>:</p>\n<pre><code>public T orElseGet(Supplier&lt;? extends T&gt; other) {\n    return value != null ? value : other.get();\n}\n</code></pre>\n<p>Thus when executed:</p>\n<ul>\n<li><p>if <code>optional.isPresent()</code>, the system will print <code>If present.</code>, then <code>If empty.</code>, and the expression will evaluate to null.</p>\n</li>\n<li><p>if <code>!optional.isPresent()</code>, the system will print <code>If empty.</code>, and the expression will evaluate to null.</p>\n</li>\n</ul>\n<hr />\n<p>If the function provided to <code>map()</code> returned <em>any</em> other value - <em>any</em> other value - the code would work as you expect, with the function provided to <code>map()</code> being executed if <code>isPresent()</code> and the function provided to <code>orElseGet()</code> if <code>!isPresent()</code>:</p>\n<p>For example, this:</p>\n<pre><code>optional\n  .map(data -&gt; {\n    System.out.println(&quot;If present.&quot;);\n    return 0;\n  })\n  .orElseGet( () -&gt; {\n    System.out.println(&quot;If empty.&quot;);\n    return 0;\n  });\n</code></pre>\n<p>When executed:</p>\n<ul>\n<li><p>if <code>optional.isPresent()</code>, the system will print <code>If present.</code>, and the expression will evaluate to 0.</p>\n</li>\n<li><p>if <code>!optional.isPresent()</code>, the system will print <code>If empty.</code>, and the expression will evaluate to 0.</p>\n</li>\n</ul>\n<p>If your specific case, I suggest that your <code>insert</code> and <code>update</code> methods return, say, the persisted object, or the id of the persisted object, or something similarly useful; then you can use code similar to this:</p>\n<pre><code>final Object persist = optional\n  .map(object -&gt; {\n    System.out.println(&quot;If present.&quot;);\n    return update(object);\n  })\n  .orElseGet( () -&gt; {\n    System.out.println(&quot;If empty.&quot;);\n    return insert(new Object());\n  });\n</code></pre>\n"}],"owner":{"account_id":113283,"reputation":11626,"user_id":298430,"accept_rate":66,"display_name":"smallufo"},"comment_count":12,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":575012,"favorite_count":0,"down_vote_count":0,"up_vote_count":375,"accepted_answer_id":29395324,"answer_count":13,"score":375,"last_activity_date":1637371150,"creation_date":1400639302,"question_id":23773024,"body_markdown":"In Java 8, I want to do something to an `Optional` object if it is present, and do another thing if it is not present.\r\n\r\n    if (opt.isPresent()) {\r\n      System.out.println(&quot;found&quot;);\r\n    } else {\r\n      System.out.println(&quot;Not found&quot;);\r\n    }\r\n\r\nThis is not a &#39;functional style&#39;, though.\r\n\r\n`Optional` has an `ifPresent()` method, but I am unable to chain an `orElse()` method.\r\n\r\nThus, I cannot write:\r\n\r\n    opt.ifPresent( x -&gt; System.out.println(&quot;found &quot; + x))\r\n       .orElse( System.out.println(&quot;NOT FOUND&quot;));\r\n\r\nIn reply to @assylias, I don&#39;t think `Optional.map()` works for the following case:\r\n\r\n    opt.map( o -&gt; {\r\n      System.out.println(&quot;while opt is present...&quot;);\r\n      o.setProperty(xxx);\r\n      dao.update(o);\r\n      return null;\r\n    }).orElseGet( () -&gt; {\r\n      System.out.println(&quot;create new obj&quot;);\r\n      dao.save(new obj);\r\n      return null;\r\n    });\r\n\r\nIn this case, when `opt` is present, I update its property and save to the database. When it is not available, I create a new `obj` and save to the database.\r\n\r\nNote in the two lambdas I have to return `null`.\r\n\r\nBut when `opt` is present, both lambdas will be executed. `obj` will be updated, and a new object will be saved to the database . This is because of the `return null` in the first lambda. And `orElseGet()` will continue to execute.\r\n\r\n\r\n\r\n","title":"Functional style of Java 8&#39;s Optional.ifPresent and if-not-Present?","body":"<p>In Java 8, I want to do something to an <code>Optional</code> object if it is present, and do another thing if it is not present.</p>\n\n<pre><code>if (opt.isPresent()) {\n  System.out.println(\"found\");\n} else {\n  System.out.println(\"Not found\");\n}\n</code></pre>\n\n<p>This is not a 'functional style', though.</p>\n\n<p><code>Optional</code> has an <code>ifPresent()</code> method, but I am unable to chain an <code>orElse()</code> method.</p>\n\n<p>Thus, I cannot write:</p>\n\n<pre><code>opt.ifPresent( x -&gt; System.out.println(\"found \" + x))\n   .orElse( System.out.println(\"NOT FOUND\"));\n</code></pre>\n\n<p>In reply to @assylias, I don't think <code>Optional.map()</code> works for the following case:</p>\n\n<pre><code>opt.map( o -&gt; {\n  System.out.println(\"while opt is present...\");\n  o.setProperty(xxx);\n  dao.update(o);\n  return null;\n}).orElseGet( () -&gt; {\n  System.out.println(\"create new obj\");\n  dao.save(new obj);\n  return null;\n});\n</code></pre>\n\n<p>In this case, when <code>opt</code> is present, I update its property and save to the database. When it is not available, I create a new <code>obj</code> and save to the database.</p>\n\n<p>Note in the two lambdas I have to return <code>null</code>.</p>\n\n<p>But when <code>opt</code> is present, both lambdas will be executed. <code>obj</code> will be updated, and a new object will be saved to the database . This is because of the <code>return null</code> in the first lambda. And <code>orElseGet()</code> will continue to execute.</p>\n"},{"tags":["java","constructor","default-constructor"],"comments":[{"owner":{"account_id":1441481,"reputation":10825,"user_id":1361506,"display_name":"azurefrog"},"score":4,"creation_date":1637101858,"post_id":69996787,"comment_id":123735381,"body_markdown":"`=` is the [assignment operator](https://docs.oracle.com/javase/tutorial/java/nutsandbolts/op1.html), and `val` and `_val` are [variables](https://docs.oracle.com/javase/tutorial/java/nutsandbolts/variables.html).  If you aren&#39;t familiar with these concepts, I&#39;d highly suggest working through all the languages basics tutorials.","body":"<code>=</code> is the <a href=\"https://docs.oracle.com/javase/tutorial/java/nutsandbolts/op1.html\" rel=\"nofollow noreferrer\">assignment operator</a>, and <code>val</code> and <code>_val</code> are <a href=\"https://docs.oracle.com/javase/tutorial/java/nutsandbolts/variables.html\" rel=\"nofollow noreferrer\">variables</a>.  If you aren&#39;t familiar with these concepts, I&#39;d highly suggest working through all the languages basics tutorials."},{"owner":{"account_id":248321,"reputation":62665,"user_id":523612,"accept_rate":100,"display_name":"Karl Knechtel"},"score":0,"creation_date":1637101879,"post_id":69996787,"comment_id":123735389,"body_markdown":"See where it says `public Node(int _val) {`? `_val` means the same thing in `val = _val` that it does in `public Node(int _val) {`: it&#39;s a **name** for the value that was passed in. To be quite frank, if this confuses you, then you are many lessons away from understanding the assignment.","body":"See where it says <code>public Node(int _val) {</code>? <code>_val</code> means the same thing in <code>val = _val</code> that it does in <code>public Node(int _val) {</code>: it&#39;s a <b>name</b> for the value that was passed in. To be quite frank, if this confuses you, then you are many lessons away from understanding the assignment."},{"owner":{"account_id":47283,"reputation":703817,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"score":0,"creation_date":1637102096,"post_id":69996787,"comment_id":123735463,"body_markdown":"See also - https://stackoverflow.com/questions/1899683.  (NOT a duplicate)","body":"See also - <a href=\"https://stackoverflow.com/questions/1899683\">stackoverflow.com/questions/1899683</a>.  (NOT a duplicate)"},{"owner":{"account_id":2562742,"reputation":5917,"user_id":2851311,"display_name":"hfontanez"},"score":0,"creation_date":1637102120,"post_id":69996787,"comment_id":123735469,"body_markdown":"@KarlKnechtel you might be right, but you completely forgot to mention why naming conventions and explicit naming is so important in programming. You know that sometimes even for experienced developers such as you and me, terrible naming can be confusing. Based on my experience, I am pretty sure the source of confusion is the leading underscore in the variable name. I am certain the OP thinks that it carries some deeper meaning (which we know it doesn&#39;t).","body":"@KarlKnechtel you might be right, but you completely forgot to mention why naming conventions and explicit naming is so important in programming. You know that sometimes even for experienced developers such as you and me, terrible naming can be confusing. Based on my experience, I am pretty sure the source of confusion is the leading underscore in the variable name. I am certain the OP thinks that it carries some deeper meaning (which we know it doesn&#39;t)."},{"owner":{"account_id":248321,"reputation":62665,"user_id":523612,"accept_rate":100,"display_name":"Karl Knechtel"},"score":1,"creation_date":1637102348,"post_id":69996787,"comment_id":123735528,"body_markdown":"There are languages where that sort of thing could have special meaning, and there are best practice guidelines for those languages that (mandate, forbid, encourage, etc. depending) those kinds of thing. All of that *should still be discussed in a tutorial for the language*, if it&#39;s any good.","body":"There are languages where that sort of thing could have special meaning, and there are best practice guidelines for those languages that (mandate, forbid, encourage, etc. depending) those kinds of thing. All of that <i>should still be discussed in a tutorial for the language</i>, if it&#39;s any good."},{"owner":{"account_id":23338466,"reputation":19,"user_id":17413706,"display_name":"Linda Lu"},"score":1,"creation_date":1637265083,"post_id":69996787,"comment_id":123786939,"body_markdown":"@hfontanez Thank you. Yes, that&#39;s what confused me. I thought the leading underscore is for special use or deeper meaning that I should learn. Now I know.","body":"@hfontanez Thank you. Yes, that&#39;s what confused me. I thought the leading underscore is for special use or deeper meaning that I should learn. Now I know."}],"answers":[{"tags":[],"owner":{"account_id":465573,"reputation":192694,"user_id":869736,"accept_rate":82,"display_name":"Louis Wasserman"},"down_vote_count":0,"up_vote_count":5,"is_accepted":true,"score":5,"last_activity_date":1637101832,"creation_date":1637101832,"answer_id":69996810,"question_id":69996787,"body_markdown":"`_val` is just a name.  This code is exactly equivalent in every way to \r\n\r\n```\r\npublic Node(int iJustMadeUpAVariableName) {\r\n  val = iJustMadeUpAVariableName;\r\n  next = null;\r\n}\r\n```\r\n\r\nand it initializes the `val` field in the `Node` class to the value passed into the constructor.","title":"What is the meaning of the leading underline of &quot;val = _val&quot;? Does it have some deep use or deep meaning? In Java","body":"<p><code>_val</code> is just a name.  This code is exactly equivalent in every way to</p>\n<pre><code>public Node(int iJustMadeUpAVariableName) {\n  val = iJustMadeUpAVariableName;\n  next = null;\n}\n</code></pre>\n<p>and it initializes the <code>val</code> field in the <code>Node</code> class to the value passed into the constructor.</p>\n"}],"owner":{"account_id":23338466,"reputation":19,"user_id":17413706,"display_name":"Linda Lu"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":280,"favorite_count":0,"down_vote_count":2,"up_vote_count":1,"accepted_answer_id":69996810,"answer_count":1,"score":-1,"last_activity_date":1637370765,"creation_date":1637101645,"question_id":69996787,"body_markdown":"In one algorithm question &quot;Implement Queue by Linked List&quot;, the solution shows create the class Node first:\r\n\r\n```\r\nclass Node {\r\n    public int val;\r\n    public Node next;\r\n    public Node(int _val) {\r\n        val = _val;\r\n        next = null;\r\n    }\r\n}\r\n```\r\n\r\nMay I ask the meaning of the leading underline of ```val = _val```?","title":"What is the meaning of the leading underline of &quot;val = _val&quot;? Does it have some deep use or deep meaning? In Java","body":"<p>In one algorithm question &quot;Implement Queue by Linked List&quot;, the solution shows create the class Node first:</p>\n<pre><code>class Node {\n    public int val;\n    public Node next;\n    public Node(int _val) {\n        val = _val;\n        next = null;\n    }\n}\n</code></pre>\n<p>May I ask the meaning of the leading underline of <code>val = _val</code>?</p>\n"},{"tags":["java","intellij-idea","javafx"],"comments":[{"owner":{"account_id":1325935,"reputation":6668,"user_id":1270725,"accept_rate":74,"display_name":"mcalex"},"score":1,"creation_date":1637371352,"post_id":70042485,"comment_id":123816600,"body_markdown":"Is `--module-path \\path\\to\\javafx-sdk-17\\lib` in the actual command?","body":"Is <code>--module-path \\path\\to\\javafx-sdk-17\\lib</code> in the actual command?"},{"owner":{"account_id":23388215,"reputation":1,"user_id":17453200,"display_name":"Bogger"},"score":0,"creation_date":1637375077,"post_id":70042485,"comment_id":123817068,"body_markdown":"What do you mean? I am very new to this","body":"What do you mean? I am very new to this"},{"owner":{"account_id":1325935,"reputation":6668,"user_id":1270725,"accept_rate":74,"display_name":"mcalex"},"score":1,"creation_date":1637388645,"post_id":70042485,"comment_id":123818482,"body_markdown":"Your command that starts java has a parameter:  `--module-path \\path\\to\\javafx-sdk-17\\lib`.  The &#39;\\path\\to\\&#39; bit should be a location on your PC.  Where did you install the javafx sdk?  Change &#39;\\path\\to\\&#39; to that location.","body":"Your command that starts java has a parameter:  <code>--module-path \\path\\to\\javafx-sdk-17\\lib</code>.  The &#39;\\path\\to\\&#39; bit should be a location on your PC.  Where did you install the javafx sdk?  Change &#39;\\path\\to\\&#39; to that location."},{"owner":{"account_id":8532578,"reputation":39898,"user_id":6395627,"display_name":"Slaw"},"score":1,"creation_date":1637390541,"post_id":70042485,"comment_id":123818708,"body_markdown":"In other words, `\\path\\to\\javafx-sdk-17\\lib` is typically used as a placeholder. You need to replace it with the actual path to the JavaFX SDK that you downloaded.","body":"In other words, <code>\\path\\to\\javafx-sdk-17\\lib</code> is typically used as a placeholder. You need to replace it with the actual path to the JavaFX SDK that you downloaded."},{"owner":{"account_id":8532578,"reputation":39898,"user_id":6395627,"display_name":"Slaw"},"score":1,"creation_date":1637390622,"post_id":70042485,"comment_id":123818711,"body_markdown":"Check out [Getting Started with JavaFX 11+](https://openjfx.io/openjfx-docs/).","body":"Check out <a href=\"https://openjfx.io/openjfx-docs/\" rel=\"nofollow noreferrer\">Getting Started with JavaFX 11+</a>."}],"owner":{"account_id":23388215,"reputation":1,"user_id":17453200,"display_name":"Bogger"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":54,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"closed_date":1637400209,"answer_count":0,"score":0,"last_activity_date":1637370682,"creation_date":1637370682,"question_id":70042485,"body_markdown":"I just started coding with IntelliJ and I have been having this problem and cannot fix it.\r\nThe error is &quot;Error occurred during initialization of boot layer java.lang.module.FindException: Module javafx.controls not found&quot;. I&#39;ve tried multiple times refactoring the code again and again it doesn&#39;t seem to work. It shows red lines in my module so I assume that its the problem. Here is the overall code: \r\n```\r\nmodule com.example.beluxfx {\r\n    requires javafx.controls;\r\n    requires javafx.fxml;\r\n\r\n    requires org.controlsfx.controls;\r\n    requires org.kordamp.bootstrapfx.core;\r\n    \r\n    opens com.example.beluxfx to javafx.fxml;\r\n    exports com.example.beluxfx;\r\n}\r\n```\r\nI have also tried getting the configurations in the run tab and confused what it means by &quot;main&quot;. I tried going into yt videos and again didn&#39;t seem to work.\r\nHere is the error code if you need it:\r\n```\r\n&quot;C:\\Program Files\\Java\\jdk-17\\bin\\java.exe&quot; --module-path \\path\\to\\javafx-sdk-17\\lib --add-modules javafx.controls,javafx.fxml &quot;-javaagent:C:\\Program Files\\JetBrains\\IntelliJ IDEA Community Edition 2021.2.3\\lib\\idea_rt.jar=61232:C:\\Program Files\\JetBrains\\IntelliJ IDEA Community Edition 2021.2.3\\bin&quot; -Dfile.encoding=UTF-8 -classpath C:\\Users\\yozsh\\.m2\\repository\\org\\openjfx\\javafx-controls\\17.0.0.1\\javafx-controls-17.0.0.1.jar;C:\\Users\\yozsh\\.m2\\repository\\org\\openjfx\\javafx-graphics\\17.0.0.1\\javafx-graphics-17.0.0.1.jar;C:\\Users\\yozsh\\.m2\\repository\\org\\openjfx\\javafx-base\\17.0.0.1\\javafx-base-17.0.0.1.jar;C:\\Users\\yozsh\\.m2\\repository\\org\\openjfx\\javafx-fxml\\17.0.0.1\\javafx-fxml-17.0.0.1.jar;C:\\Users\\yozsh\\Downloads\\openjfx-17.0.1_windows-x64_bin-sdk\\javafx-sdk-17.0.1\\lib\\javafx-swt.jar;C:\\Users\\yozsh\\Downloads\\openjfx-17.0.1_windows-x64_bin-sdk\\javafx-sdk-17.0.1\\lib\\javafx.web.jar;C:\\Users\\yozsh\\Downloads\\openjfx-17.0.1_windows-x64_bin-sdk\\javafx-sdk-17.0.1\\lib\\javafx.swing.jar -m com.example.beluxfx/com.example.beluxfx.HelloApplication\r\nError occurred during initialization of boot layer\r\njava.lang.module.FindException: Module javafx.controls not found\r\n\r\nProcess finished with exit code 1\r\n```\r\n","title":"IntelliJ: (Error occurred during initialization of boot layer)","body":"<p>I just started coding with IntelliJ and I have been having this problem and cannot fix it.\nThe error is &quot;Error occurred during initialization of boot layer java.lang.module.FindException: Module javafx.controls not found&quot;. I've tried multiple times refactoring the code again and again it doesn't seem to work. It shows red lines in my module so I assume that its the problem. Here is the overall code:</p>\n<pre><code>module com.example.beluxfx {\n    requires javafx.controls;\n    requires javafx.fxml;\n\n    requires org.controlsfx.controls;\n    requires org.kordamp.bootstrapfx.core;\n    \n    opens com.example.beluxfx to javafx.fxml;\n    exports com.example.beluxfx;\n}\n</code></pre>\n<p>I have also tried getting the configurations in the run tab and confused what it means by &quot;main&quot;. I tried going into yt videos and again didn't seem to work.\nHere is the error code if you need it:</p>\n<pre><code>&quot;C:\\Program Files\\Java\\jdk-17\\bin\\java.exe&quot; --module-path \\path\\to\\javafx-sdk-17\\lib --add-modules javafx.controls,javafx.fxml &quot;-javaagent:C:\\Program Files\\JetBrains\\IntelliJ IDEA Community Edition 2021.2.3\\lib\\idea_rt.jar=61232:C:\\Program Files\\JetBrains\\IntelliJ IDEA Community Edition 2021.2.3\\bin&quot; -Dfile.encoding=UTF-8 -classpath C:\\Users\\yozsh\\.m2\\repository\\org\\openjfx\\javafx-controls\\17.0.0.1\\javafx-controls-17.0.0.1.jar;C:\\Users\\yozsh\\.m2\\repository\\org\\openjfx\\javafx-graphics\\17.0.0.1\\javafx-graphics-17.0.0.1.jar;C:\\Users\\yozsh\\.m2\\repository\\org\\openjfx\\javafx-base\\17.0.0.1\\javafx-base-17.0.0.1.jar;C:\\Users\\yozsh\\.m2\\repository\\org\\openjfx\\javafx-fxml\\17.0.0.1\\javafx-fxml-17.0.0.1.jar;C:\\Users\\yozsh\\Downloads\\openjfx-17.0.1_windows-x64_bin-sdk\\javafx-sdk-17.0.1\\lib\\javafx-swt.jar;C:\\Users\\yozsh\\Downloads\\openjfx-17.0.1_windows-x64_bin-sdk\\javafx-sdk-17.0.1\\lib\\javafx.web.jar;C:\\Users\\yozsh\\Downloads\\openjfx-17.0.1_windows-x64_bin-sdk\\javafx-sdk-17.0.1\\lib\\javafx.swing.jar -m com.example.beluxfx/com.example.beluxfx.HelloApplication\nError occurred during initialization of boot layer\njava.lang.module.FindException: Module javafx.controls not found\n\nProcess finished with exit code 1\n</code></pre>\n"}],"has_more":true,"quota_max":10000,"quota_remaining":8160,"page":1832,"page_size":100}
