{"items":[{"tags":["java","json","serialization","jackson","nullpointerexception"],"comments":[{"owner":{"account_id":14587108,"reputation":155,"user_id":10535520,"display_name":"Stone"},"score":0,"creation_date":1682920604,"post_id":76144380,"comment_id":134284496,"body_markdown":"Maybe you could serialize &quot;null&quot; integer to a special int value such as &quot;0&quot; and deserialize it back to &quot;null&quot;.","body":"Maybe you could serialize &quot;null&quot; integer to a special int value such as &quot;0&quot; and deserialize it back to &quot;null&quot;."}],"owner":{"account_id":27871500,"reputation":1,"user_id":21281918,"display_name":"Dlcdoee"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":469,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1682906426,"creation_date":1682906191,"question_id":76144380,"body_markdown":"So I made this problem up and it&#39;s essentially the same problem I&#39;m having at work. I have a dependency on an object and I don&#39;t have access to the source code for the getter. The field is an Integer but the getter returns an in. The worst part is that he initialized the Integer as null in the constructor. How do I serialize this so that it may return the object with the value a null?\r\n\r\n```\r\npublic class TestObject {\r\n\t\r\n\tprivate Integer a;\r\n\t\r\n\tTestObject(){\r\n\t\ta = null;\r\n\t}\r\n\r\n\tpublic int getA() {\r\n\t\treturn a;\r\n\t}\r\n\r\n\tpublic void setA(int a) {\r\n\t\tthis.a = a;\r\n\t}\r\n\t\r\n\t\r\n}\r\n```\r\n```\r\npublic class Test {\r\n\r\n\tpublic static void main(String[] args) {\r\n\t\tTestObject a = new TestObject();\r\n\t\tObjectMapper mapper = new ObjectMapper();\r\n\t\tSimpleModule simpleModule = new SimpleModule();\r\n\t\tmapper.registerModule(simpleModule);\r\n\t\ttry {\r\n\t\t\tSystem.out.println(mapper.writeValueAsString(a));\r\n\t\t} catch (Exception e) {\r\n\t\t\te.printStackTrace();\r\n\t\t}\r\n\t}\r\n\r\n}\r\n```\r\n```\r\npublic class TestSerializer extends JsonSerializer&lt;Integer&gt; {\r\n\t@Override\r\n    public void serialize(Integer tmpInt, \r\n                          JsonGenerator jsonGenerator, \r\n                          SerializerProvider serializerProvider) \r\n                          throws IOException, JsonProcessingException {\r\n        jsonGenerator.writeObject(tmpInt.toString());\r\n    }\r\n}\r\n```\r\n\r\nError:\r\n\r\ncom.fasterxml.jackson.databind.JsonMappingException: Cannot invoke &quot;java.lang.Integer.intValue()&quot; because &quot;this.a&quot; is null (through reference chain: TestObject[&quot;a&quot;])\r\n\tat com.fasterxml.jackson.databind.JsonMappingException.wrapWithPath(JsonMappingException.java:402)\r\n\tat com.fasterxml.jackson.databind.JsonMappingException.wrapWithPath(JsonMappingException.java:361)\r\n\tat com.fasterxml.jackson.databind.ser.std.StdSerializer.wrapAndThrow(StdSerializer.java:323)\r\n\tat com.fasterxml.jackson.databind.ser.std.BeanSerializerBase.serializeFields(BeanSerializerBase.java:780)\r\n\tat com.fasterxml.jackson.databind.ser.BeanSerializer.serialize(BeanSerializer.java:178)\r\n\tat com.fasterxml.jackson.databind.ser.DefaultSerializerProvider._serialize(DefaultSerializerProvider.java:479)\r\n\tat com.fasterxml.jackson.databind.ser.DefaultSerializerProvider.serializeValue(DefaultSerializerProvider.java:318)\r\n\tat com.fasterxml.jackson.databind.ObjectMapper._writeValueAndClose(ObjectMapper.java:4719)\r\n\tat com.fasterxml.jackson.databind.ObjectMapper.writeValueAsString(ObjectMapper.java:3964)\r\n\tat Test.main(Test.java:12)\r\nCaused by: java.lang.NullPointerException: Cannot invoke &quot;java.lang.Integer.intValue()&quot; because &quot;this.a&quot; is null\r\n\tat TestObject.getA(TestObject.java:11)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)\r\n\tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:568)\r\n\tat com.fasterxml.jackson.databind.ser.BeanPropertyWriter.serializeAsField(BeanPropertyWriter.java:688)\r\n\tat com.fasterxml.jackson.databind.ser.std.BeanSerializerBase.serializeFields(BeanSerializerBase.java:772)\r\n\t... 6 more","title":"com.fasterxml.jackson.databind.JsonMappingException: Cannot invoke &quot;java.lang.Integer.intValue()&quot; because &quot;this.a&quot; is null","body":"<p>So I made this problem up and it's essentially the same problem I'm having at work. I have a dependency on an object and I don't have access to the source code for the getter. The field is an Integer but the getter returns an in. The worst part is that he initialized the Integer as null in the constructor. How do I serialize this so that it may return the object with the value a null?</p>\n<pre><code>public class TestObject {\n    \n    private Integer a;\n    \n    TestObject(){\n        a = null;\n    }\n\n    public int getA() {\n        return a;\n    }\n\n    public void setA(int a) {\n        this.a = a;\n    }\n    \n    \n}\n</code></pre>\n<pre><code>public class Test {\n\n    public static void main(String[] args) {\n        TestObject a = new TestObject();\n        ObjectMapper mapper = new ObjectMapper();\n        SimpleModule simpleModule = new SimpleModule();\n        mapper.registerModule(simpleModule);\n        try {\n            System.out.println(mapper.writeValueAsString(a));\n        } catch (Exception e) {\n            e.printStackTrace();\n        }\n    }\n\n}\n</code></pre>\n<pre><code>public class TestSerializer extends JsonSerializer&lt;Integer&gt; {\n    @Override\n    public void serialize(Integer tmpInt, \n                          JsonGenerator jsonGenerator, \n                          SerializerProvider serializerProvider) \n                          throws IOException, JsonProcessingException {\n        jsonGenerator.writeObject(tmpInt.toString());\n    }\n}\n</code></pre>\n<p>Error:</p>\n<p>com.fasterxml.jackson.databind.JsonMappingException: Cannot invoke &quot;java.lang.Integer.intValue()&quot; because &quot;this.a&quot; is null (through reference chain: TestObject[&quot;a&quot;])\nat com.fasterxml.jackson.databind.JsonMappingException.wrapWithPath(JsonMappingException.java:402)\nat com.fasterxml.jackson.databind.JsonMappingException.wrapWithPath(JsonMappingException.java:361)\nat com.fasterxml.jackson.databind.ser.std.StdSerializer.wrapAndThrow(StdSerializer.java:323)\nat com.fasterxml.jackson.databind.ser.std.BeanSerializerBase.serializeFields(BeanSerializerBase.java:780)\nat com.fasterxml.jackson.databind.ser.BeanSerializer.serialize(BeanSerializer.java:178)\nat com.fasterxml.jackson.databind.ser.DefaultSerializerProvider._serialize(DefaultSerializerProvider.java:479)\nat com.fasterxml.jackson.databind.ser.DefaultSerializerProvider.serializeValue(DefaultSerializerProvider.java:318)\nat com.fasterxml.jackson.databind.ObjectMapper._writeValueAndClose(ObjectMapper.java:4719)\nat com.fasterxml.jackson.databind.ObjectMapper.writeValueAsString(ObjectMapper.java:3964)\nat Test.main(Test.java:12)\nCaused by: java.lang.NullPointerException: Cannot invoke &quot;java.lang.Integer.intValue()&quot; because &quot;this.a&quot; is null\nat TestObject.getA(TestObject.java:11)\nat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\nat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)\nat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\nat java.base/java.lang.reflect.Method.invoke(Method.java:568)\nat com.fasterxml.jackson.databind.ser.BeanPropertyWriter.serializeAsField(BeanPropertyWriter.java:688)\nat com.fasterxml.jackson.databind.ser.std.BeanSerializerBase.serializeFields(BeanSerializerBase.java:772)\n... 6 more</p>\n"},{"tags":["java","string","class","coldfusion","normalization"],"answers":[{"tags":[],"owner":{"account_id":1281557,"reputation":13320,"user_id":1235565,"accept_rate":62,"display_name":"Jirka Hanika"},"down_vote_count":0,"up_vote_count":8,"is_accepted":true,"score":8,"last_activity_date":1343126174,"creation_date":1343126174,"answer_id":11629028,"question_id":11626050,"body_markdown":"In ColdFusion, unlike in Java, you don&#39;t need to escape backslashes in string literals.  Your current regex will not match anything that does not start with a backslash, so no replacement happens.\r\n\r\nOther than that, your code is perfectly correct and you can see that the length of the string is 8, not 4, at the time of the output.  This is an effect of the `normalize` call.\r\n\r\nHowever, remember that it is still an equivalent representation of the original string, and so it is not surprising that you cannot tell the difference visually.  This is correct Unicode rendering in action.","title":"Normalize String in ColdFusion","body":"<p>In ColdFusion, unlike in Java, you don't need to escape backslashes in string literals.  Your current regex will not match anything that does not start with a backslash, so no replacement happens.</p>\n\n<p>Other than that, your code is perfectly correct and you can see that the length of the string is 8, not 4, at the time of the output.  This is an effect of the <code>normalize</code> call.</p>\n\n<p>However, remember that it is still an equivalent representation of the original string, and so it is not surprising that you cannot tell the difference visually.  This is correct Unicode rendering in action.</p>\n"},{"tags":[],"owner":{"account_id":1048688,"reputation":8206,"user_id":1053103,"display_name":"Mike Causer"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1682905983,"creation_date":1343186437,"answer_id":11642205,"question_id":11626050,"body_markdown":"Your `&quot;\\\\p&quot;` should have simply been `&quot;\\p&quot;`. Cf&#39;s ReReplace() automatically escapes backslashes for you, so your `&quot;\\\\p&quot;` is interpreted java side as `&quot;\\\\\\\\p&quot;`\r\n\r\nOne liner:\r\n\r\n    &lt;cfscript&gt;\r\n    var k = &quot;mike&#39;s caf&#233;&quot;;\r\n    k = createObject( &#39;java&#39;, &#39;java.text.Normalizer&#39; ).normalize( k, createObject( &#39;java&#39;, &#39;java.text.Normalizer$Form&#39; ).valueOf(&#39;NFD&#39;) ).replaceAll(&#39;\\p{InCombiningDiacriticalMarks}+&#39;,&#39;&#39;).replaceAll(&#39;[^\\p{ASCII}]+&#39;,&#39;&#39;);\r\n    // k is now &quot;mike&#39;s cafe&quot;\r\n    &lt;/cfscript&gt;\r\n\r\nhttp://www.cfquickdocs.com/cf9/#rereplace\r\n\r\n(Edit: Broken cfquickdocs link. Domain registration expired)\r\n","title":"Normalize String in ColdFusion","body":"<p>Your <code>&quot;\\\\p&quot;</code> should have simply been <code>&quot;\\p&quot;</code>. Cf's ReReplace() automatically escapes backslashes for you, so your <code>&quot;\\\\p&quot;</code> is interpreted java side as <code>&quot;\\\\\\\\p&quot;</code></p>\n<p>One liner:</p>\n<pre><code>&lt;cfscript&gt;\nvar k = &quot;mike's caf√©&quot;;\nk = createObject( 'java', 'java.text.Normalizer' ).normalize( k, createObject( 'java', 'java.text.Normalizer$Form' ).valueOf('NFD') ).replaceAll('\\p{InCombiningDiacriticalMarks}+','').replaceAll('[^\\p{ASCII}]+','');\n// k is now &quot;mike's cafe&quot;\n&lt;/cfscript&gt;\n</code></pre>\n<p><a href=\"http://www.cfquickdocs.com/cf9/#rereplace\" rel=\"nofollow noreferrer\">http://www.cfquickdocs.com/cf9/#rereplace</a></p>\n<p>(Edit: Broken cfquickdocs link. Domain registration expired)</p>\n"},{"tags":[],"owner":{"account_id":354610,"reputation":4370,"user_id":693068,"display_name":"James Moberg"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1596649841,"creation_date":1560524320,"answer_id":56600717,"question_id":11626050,"body_markdown":"I recommend using a Java library like Junidecode.\r\nhttps://github.com/gcardone/junidecode\r\n\r\nIt converts UTF8 &amp; UTF16 strings to ASCII7.  Examples:\r\n\r\n - &#228;&#233;&#246;&#232; = aeoe\r\n - mike&#39;s caf&#233; = mike&#39;s cafe\r\n - ‚Ñ° = TEL\r\n - Âåó‰∫∞ = Bei Jing\r\n - Mr. „Åæ„Åï„ÇÜ„Åç „Åü„Åë„Å† = Mr. masayuki takeda\r\n - ‚†è‚†ó‚†ë‚†ç‚†ä‚†ë‚†ó = premier\r\n - ‡∏£‡∏≤‡∏ä‡∏≠‡∏≤‡∏ì‡∏≤‡∏à‡∏±‡∏Å‡∏£‡πÑ‡∏ó‡∏¢ = raach`aanaacchakraithy\r\n - ŒïŒªŒªŒ∑ŒΩŒπŒ∫Œ¨ = Ellenika\r\n - –ú–æ—Å–∫–≤a = Moskva\r\n - ’Ä’°’µ’°’Ω’ø’°’∂ = Hayastan\r\n - ‚Ñ∞&#119987;&#119964;‚Ñ≥&#120031;‚Ñí‚Ñ∞ = EXAMPLE\r\n\r\nI&#39;ve shared a full ColdFusion-based demo (which requires the Junidecode JAR file):\r\nhttps://dev.to/gamesover/convert-unicode-strings-to-ascii-with-coldfusion-junidecode-lhf\r\n\r\nHere&#39;s the code function:\r\n\r\n    &lt;cfscript&gt;\r\n    function JUnidecode(inputString){\r\n    \tvar JUnidecodeLib = &quot;&quot;;\r\n    \tvar response = &quot;&quot;;\r\n    \tvar temp = {};\r\n    \ttemp.encoder = createObject(&quot;java&quot;, &quot;java.nio.charset.Charset&quot;).forName(&quot;utf-8&quot;).newEncoder();\r\n    \ttemp.isUTF = temp.encoder.canEncode(arguments.inputString);\r\n    \tif (temp.isUTF){\r\n    \t\t/* NFKC: UTF Compatibility Decomposition, followed by Canonical Composition */\r\n    \t\ttemp.normalizer = createObject( &quot;java&quot;, &quot;java.text.Normalizer&quot; );\r\n    \t\ttemp.normalizerForm = createObject( &quot;java&quot;, &quot;java.text.Normalizer$Form&quot; );\r\n    \t\targuments.inputString = temp.normalizer.normalize( javaCast( &quot;string&quot;, arguments.inputString ), temp.normalizerForm.NFKC );\r\n    \t}\r\n    \ttry {\r\n    \t\tJUnidecodeLib = createObject(&quot;java&quot;, &quot;net.gcardone.junidecode.Junidecode&quot;);\r\n    \t\tresponse = JUnidecodeLib.unidecode( javacast(&quot;string&quot;, arguments.inputString) );\r\n    \t} catch (any e) {\r\n    \t\tresponse = &quot;ERROR: JUnidecode is not installed&quot;;\r\n    \t}\r\n    \treturn trim(Response.replaceAll(&quot;\\[\\?\\]&quot;, &quot;&quot;));\r\n    }\r\n    function isDiff(compareArr, val, pos){\r\n    \treturn (pos GT arrayLen(comparearr) OR comparearr[pos] neq val);\r\n    }\r\n    &lt;/cfscript&gt;","title":"Normalize String in ColdFusion","body":"<p>I recommend using a Java library like Junidecode.\n<a href=\"https://github.com/gcardone/junidecode\" rel=\"nofollow noreferrer\">https://github.com/gcardone/junidecode</a></p>\n<p>It converts UTF8 &amp; UTF16 strings to ASCII7.  Examples:</p>\n<ul>\n<li>√§√©√∂√® = aeoe</li>\n<li>mike's caf√© = mike's cafe</li>\n<li>‚Ñ° = TEL</li>\n<li>Âåó‰∫∞ = Bei Jing</li>\n<li>Mr. „Åæ„Åï„ÇÜ„Åç „Åü„Åë„Å† = Mr. masayuki takeda</li>\n<li>‚†è‚†ó‚†ë‚†ç‚†ä‚†ë‚†ó = premier</li>\n<li>‡∏£‡∏≤‡∏ä‡∏≠‡∏≤‡∏ì‡∏≤‡∏à‡∏±‡∏Å‡∏£‡πÑ‡∏ó‡∏¢ = raach`aanaacchakraithy</li>\n<li>ŒïŒªŒªŒ∑ŒΩŒπŒ∫Œ¨ = Ellenika</li>\n<li>–ú–æ—Å–∫–≤a = Moskva</li>\n<li>’Ä’°’µ’°’Ω’ø’°’∂ = Hayastan</li>\n<li>‚Ñ∞ùí≥ùíú‚Ñ≥ùìü‚Ñí‚Ñ∞ = EXAMPLE</li>\n</ul>\n<p>I've shared a full ColdFusion-based demo (which requires the Junidecode JAR file):\n<a href=\"https://dev.to/gamesover/convert-unicode-strings-to-ascii-with-coldfusion-junidecode-lhf\" rel=\"nofollow noreferrer\">https://dev.to/gamesover/convert-unicode-strings-to-ascii-with-coldfusion-junidecode-lhf</a></p>\n<p>Here's the code function:</p>\n<pre><code>&lt;cfscript&gt;\nfunction JUnidecode(inputString){\n    var JUnidecodeLib = &quot;&quot;;\n    var response = &quot;&quot;;\n    var temp = {};\n    temp.encoder = createObject(&quot;java&quot;, &quot;java.nio.charset.Charset&quot;).forName(&quot;utf-8&quot;).newEncoder();\n    temp.isUTF = temp.encoder.canEncode(arguments.inputString);\n    if (temp.isUTF){\n        /* NFKC: UTF Compatibility Decomposition, followed by Canonical Composition */\n        temp.normalizer = createObject( &quot;java&quot;, &quot;java.text.Normalizer&quot; );\n        temp.normalizerForm = createObject( &quot;java&quot;, &quot;java.text.Normalizer$Form&quot; );\n        arguments.inputString = temp.normalizer.normalize( javaCast( &quot;string&quot;, arguments.inputString ), temp.normalizerForm.NFKC );\n    }\n    try {\n        JUnidecodeLib = createObject(&quot;java&quot;, &quot;net.gcardone.junidecode.Junidecode&quot;);\n        response = JUnidecodeLib.unidecode( javacast(&quot;string&quot;, arguments.inputString) );\n    } catch (any e) {\n        response = &quot;ERROR: JUnidecode is not installed&quot;;\n    }\n    return trim(Response.replaceAll(&quot;\\[\\?\\]&quot;, &quot;&quot;));\n}\nfunction isDiff(compareArr, val, pos){\n    return (pos GT arrayLen(comparearr) OR comparearr[pos] neq val);\n}\n&lt;/cfscript&gt;\n</code></pre>\n"}],"owner":{"account_id":1302946,"reputation":58,"user_id":1254982,"display_name":"patrickruetter"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":734,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"accepted_answer_id":11629028,"answer_count":3,"score":4,"last_activity_date":1682905983,"creation_date":1343114838,"question_id":11626050,"body_markdown":"I&#39;m trying to normalize a string in ColdFusion.\r\n\r\nI want to use the Java class `java.text.Normalizer` for this, as CF doesn&#39;t have any similar functions as far as I know.\r\n\r\nHere&#39;s my current code:\r\n\r\n    &lt;cfset normalizer = createObject( &quot;java&quot;, &quot;java.text.Normalizer&quot; ) /&gt;\r\n    &lt;cfset string = &quot;&#228;&#233;&#246;&#232;&quot; /&gt;\r\n    &lt;cfset string = normalizer.normalize(string, createObject( &quot;java&quot;, &quot;java.text.Normalizer$Form&quot; ).NFD) /&gt;\r\n    &lt;cfset string = ReReplace(string, &quot;\\\\p{InCombiningDiacriticalMarks}+&quot;, &quot;&quot;) /&gt;\r\n    &lt;cfoutput&gt;#string#&lt;/cfoutput&gt;\r\n\r\nAny ideas why it always outputs `&#228;&#233;&#246;&#232;` and not a normalized string?","title":"Normalize String in ColdFusion","body":"<p>I'm trying to normalize a string in ColdFusion.</p>\n\n<p>I want to use the Java class <code>java.text.Normalizer</code> for this, as CF doesn't have any similar functions as far as I know.</p>\n\n<p>Here's my current code:</p>\n\n<pre><code>&lt;cfset normalizer = createObject( \"java\", \"java.text.Normalizer\" ) /&gt;\n&lt;cfset string = \"√§√©√∂√®\" /&gt;\n&lt;cfset string = normalizer.normalize(string, createObject( \"java\", \"java.text.Normalizer$Form\" ).NFD) /&gt;\n&lt;cfset string = ReReplace(string, \"\\\\p{InCombiningDiacriticalMarks}+\", \"\") /&gt;\n&lt;cfoutput&gt;#string#&lt;/cfoutput&gt;\n</code></pre>\n\n<p>Any ideas why it always outputs <code>√§√©√∂√®</code> and not a normalized string?</p>\n"},{"tags":["javascript","java","velo"],"answers":[{"tags":[],"owner":{"account_id":2635876,"reputation":1216,"user_id":2280574,"accept_rate":44,"display_name":"Mellet"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1613232154,"creation_date":1613232154,"answer_id":66187100,"question_id":66187019,"body_markdown":"Looks like your error is in how you find your element.  \r\nYou could try console.log(tx) and see what you get.  \r\n\r\nSeems to work:\r\n\r\n\r\n&lt;!-- begin snippet: js hide: false console: true babel: false --&gt;\r\n\r\n&lt;!-- language: lang-js --&gt;\r\n\r\n    const box = document.getElementById(&quot;box&quot;)\r\n\r\n    function getRandomColor() {\r\n        var letters = &#39;0123456789ABCDEF&#39;;\r\n        var color = &#39;#&#39;;\r\n        for (var i = 0; i &lt; 6; i++ ) {\r\n            color += letters[Math.floor(Math.random() * 16)];\r\n        }\r\n        return color;\r\n    }\r\n\r\n    function changeColor(){\r\n      box.style.color = getRandomColor();\r\n    }\r\n\r\n    setInterval(changeColor,1000);\r\n\r\n&lt;!-- language: lang-html --&gt;\r\n\r\n    &lt;div id=&quot;box&quot;&gt;\r\n    Hello World\r\n    &lt;/div&gt;\r\n\r\n&lt;!-- end snippet --&gt;\r\n\r\n","title":"Change color every second of a wix text box element","body":"<p>Looks like your error is in how you find your element.<br />\nYou could try console.log(tx) and see what you get.</p>\n<p>Seems to work:</p>\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>const box = document.getElementById(\"box\")\n\nfunction getRandomColor() {\n    var letters = '0123456789ABCDEF';\n    var color = '#';\n    for (var i = 0; i &lt; 6; i++ ) {\n        color += letters[Math.floor(Math.random() * 16)];\n    }\n    return color;\n}\n\nfunction changeColor(){\n  box.style.color = getRandomColor();\n}\n\nsetInterval(changeColor,1000);</code></pre>\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>&lt;div id=\"box\"&gt;\nHello World\n&lt;/div&gt;</code></pre>\r\n</div>\r\n</div>\r\n</p>\n"},{"tags":[],"owner":{"account_id":12591652,"reputation":896,"user_id":9158089,"display_name":"Sam"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1613304011,"creation_date":1613304011,"answer_id":66195210,"question_id":66187019,"body_markdown":"In Velo, the text element does not have a `style` property. The only way to currently change the text color is to set the text using the `html` property and adding inline styling.","title":"Change color every second of a wix text box element","body":"<p>In Velo, the text element does not have a <code>style</code> property. The only way to currently change the text color is to set the text using the <code>html</code> property and adding inline styling.</p>\n"},{"tags":[],"owner":{"account_id":28467596,"reputation":1,"user_id":21783428,"display_name":"Andrei Shevtcov"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1682900175,"creation_date":1682900175,"answer_id":76144142,"question_id":66187019,"body_markdown":"You can try this one - make sure your original html matches, though.\r\n\r\n```\r\nconst changeColor = (element, color) =&gt; {\r\n    if (element.type !== &#39;$w.Text&#39;) {\r\n        return;\r\n    }\r\n\r\n    const { html } = element;\r\n    const newHtml = html.indexOf(&#39;color:&#39;) &gt; -1 \r\n        ? html.replace(/color:\\s{0,2}[^ ;&quot;&#39;]+/g, `color: ${color}`)\r\n        : html.replace(/style=&quot;/g, `style=&quot;color: ${color}; `);\r\n\r\n    element.html = newHtml;\r\n};\r\n```","title":"Change color every second of a wix text box element","body":"<p>You can try this one - make sure your original html matches, though.</p>\n<pre><code>const changeColor = (element, color) =&gt; {\n    if (element.type !== '$w.Text') {\n        return;\n    }\n\n    const { html } = element;\n    const newHtml = html.indexOf('color:') &gt; -1 \n        ? html.replace(/color:\\s{0,2}[^ ;&quot;']+/g, `color: ${color}`)\n        : html.replace(/style=&quot;/g, `style=&quot;color: ${color}; `);\n\n    element.html = newHtml;\n};\n</code></pre>\n"}],"owner":{"account_id":20323124,"reputation":13,"user_id":14907259,"display_name":"Rishabh Sharma"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":861,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":3,"score":0,"last_activity_date":1682900175,"creation_date":1613231709,"question_id":66187019,"body_markdown":"\r\n\r\nI tried to use the code below to change text color to random colors every second but it didn&#39;t work, and it&#39;s giving and error &#39;tx.style is undefined&#39;. The same code worked in atom text editor. why?\r\n\r\n    const tx = $w(&#39;#text16&#39;);\r\n    \r\n    function getRandomColor() {\r\n        var letters = &#39;0123456789ABCDEF&#39;;\r\n        var color = &#39;#&#39;;\r\n        for (var i = 0; i &lt; 6; i++ ) {\r\n            color += letters[Math.floor(Math.random() * 16)];\r\n        }\r\n        return color;\r\n    }\r\n    \r\n    function changeColor(){\r\n      tx.style.color= getRandomColor();\r\n    }\r\n    \r\n    setInterval(changeColor,1000);\r\n\r\n","title":"Change color every second of a wix text box element","body":"<p>I tried to use the code below to change text color to random colors every second but it didn't work, and it's giving and error 'tx.style is undefined'. The same code worked in atom text editor. why?</p>\n<pre><code>const tx = $w('#text16');\n\nfunction getRandomColor() {\n    var letters = '0123456789ABCDEF';\n    var color = '#';\n    for (var i = 0; i &lt; 6; i++ ) {\n        color += letters[Math.floor(Math.random() * 16)];\n    }\n    return color;\n}\n\nfunction changeColor(){\n  tx.style.color= getRandomColor();\n}\n\nsetInterval(changeColor,1000);\n</code></pre>\n"},{"tags":["javascript","java","node.js","postman","openapi"],"comments":[{"owner":{"account_id":39252,"reputation":89802,"user_id":113116,"display_name":"Helen"},"score":0,"creation_date":1678360676,"post_id":75683470,"comment_id":133519035,"body_markdown":"Can you post a sample input OpenAPI file so that others can reproduce the issue?","body":"Can you post a sample input OpenAPI file so that others can reproduce the issue?"}],"answers":[{"tags":[],"owner":{"account_id":14166099,"reputation":141,"user_id":10234021,"display_name":"houssem"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1678366965,"creation_date":1678359502,"answer_id":75683657,"question_id":75683470,"body_markdown":"You don&#39;t have to manually convert your open Api specifications because postman already supports them.\r\n\r\n 1. go to postman and click import\r\n 2. choose your open api file\r\n 3. you will have all your apis ready to be used and tested on the APIs tab !\r\n\r\nsource and more details : [Postman Supports OpenAPI 3.0][1]\r\n\r\nEDIT :\r\n\r\nIf you have to do it programmatically you can try postman&#39;s collection sdk [Collection SDK][2]\r\n\r\n - Load the OpenAPI specification file into your Node.js application\r\n - Create a new Postman collection\r\n - Map the OpenAPI paths and operations to Postman requests and add them to the collection\r\n - Write the Postman collection to a file\r\n\r\nthis way you have the file in the format you want, and you can do whatever post or pre processing you need.\r\n\r\n  [1]: https://blog.postman.com/postman-supports-openapi-3-0/\r\n  [2]: https://learning.postman.com/docs/developer/collection-sdk/","title":"Convert Open Api specification to postman collection programmatically","body":"<p>You don't have to manually convert your open Api specifications because postman already supports them.</p>\n<ol>\n<li>go to postman and click import</li>\n<li>choose your open api file</li>\n<li>you will have all your apis ready to be used and tested on the APIs tab !</li>\n</ol>\n<p>source and more details : <a href=\"https://blog.postman.com/postman-supports-openapi-3-0/\" rel=\"nofollow noreferrer\">Postman Supports OpenAPI 3.0</a></p>\n<p>EDIT :</p>\n<p>If you have to do it programmatically you can try postman's collection sdk <a href=\"https://learning.postman.com/docs/developer/collection-sdk/\" rel=\"nofollow noreferrer\">Collection SDK</a></p>\n<ul>\n<li>Load the OpenAPI specification file into your Node.js application</li>\n<li>Create a new Postman collection</li>\n<li>Map the OpenAPI paths and operations to Postman requests and add them to the collection</li>\n<li>Write the Postman collection to a file</li>\n</ul>\n<p>this way you have the file in the format you want, and you can do whatever post or pre processing you need.</p>\n"},{"tags":[],"owner":{"account_id":17767926,"reputation":11,"user_id":12902317,"display_name":"Mustaque"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1682899634,"creation_date":1682899634,"answer_id":76144117,"question_id":75683470,"body_markdown":"You actually don&#39;t need to do anything. When you will create a collection in the Postman, Postman runner will automatically interpret \r\n`path&quot;:[&quot;student&quot;, &quot;:studentId&quot;]` as `&quot;{{baseUrl}}/student/:studentId&quot;`\r\n\r\nOr probably you can explain what exactly you&#39;re trying to acheive with the raw URL? How will it help you? \r\n\r\nI&#39;m converting the OpenAPI to Postman using `openapi-to-postmanv2` npm package and later I make an API call to create/update/delete the collection by hitting Postman API and it is working out of the box. ","title":"Convert Open Api specification to postman collection programmatically","body":"<p>You actually don't need to do anything. When you will create a collection in the Postman, Postman runner will automatically interpret\n<code>path&quot;:[&quot;student&quot;, &quot;:studentId&quot;]</code> as <code>&quot;{{baseUrl}}/student/:studentId&quot;</code></p>\n<p>Or probably you can explain what exactly you're trying to acheive with the raw URL? How will it help you?</p>\n<p>I'm converting the OpenAPI to Postman using <code>openapi-to-postmanv2</code> npm package and later I make an API call to create/update/delete the collection by hitting Postman API and it is working out of the box.</p>\n"}],"owner":{"account_id":21884076,"reputation":107,"user_id":16171930,"display_name":"Aniket Thorat"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1880,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":2,"score":0,"last_activity_date":1682899634,"creation_date":1678358454,"question_id":75683470,"body_markdown":"I am typing to convert open Api specification to postman collection I have tried using node module \r\n\r\n`openapi-to-postmanv2` \r\n\r\nbut its creating URLs in list  like\r\n\r\n`path&quot;:[&quot;student&quot;, &quot;:studentId&quot;]`  \r\n\r\nwhat I want URLs like. \r\n\r\n `&quot;raw&quot;: &quot;{{baseUrl}}/student/:studentId&quot;`\r\n\r\nIf any other approach of conversion in different language","title":"Convert Open Api specification to postman collection programmatically","body":"<p>I am typing to convert open Api specification to postman collection I have tried using node module</p>\n<p><code>openapi-to-postmanv2</code></p>\n<p>but its creating URLs in list  like</p>\n<p><code>path&quot;:[&quot;student&quot;, &quot;:studentId&quot;]</code></p>\n<p>what I want URLs like.</p>\n<p><code>&quot;raw&quot;: &quot;{{baseUrl}}/student/:studentId&quot;</code></p>\n<p>If any other approach of conversion in different language</p>\n"},{"tags":["java","tomcat","jakarta-ee","catalina"],"answers":[{"tags":[],"owner":{"account_id":6699038,"reputation":90,"user_id":5166194,"accept_rate":100,"display_name":"SargeOrona"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1506208771,"creation_date":1506208771,"answer_id":46385135,"question_id":46373309,"body_markdown":"I found my issue.&lt;br&gt;\r\nMy lib folder was outside the WebContent folder...&lt;br&gt;\r\nI copied it inside `WebContent/WEB-INF` and everything is working now","title":"org.apache.catalina.LifecycleException: Failed to start component [StandardEngine[Catalina].StandardHost[localhost].StandardContext[]] - tomcat 8.5","body":"<p>I found my issue.<br>\nMy lib folder was outside the WebContent folder...<br>\nI copied it inside <code>WebContent/WEB-INF</code> and everything is working now</p>\n"}],"owner":{"account_id":6699038,"reputation":90,"user_id":5166194,"accept_rate":100,"display_name":"SargeOrona"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":11847,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":46385135,"answer_count":1,"score":1,"last_activity_date":1682897170,"creation_date":1506114957,"question_id":46373309,"body_markdown":"I am trying to get my tomcat 8.5 to start on my eclipse.\r\nEverytime I get this error.\r\n\r\nI already tried the below fixes but nothing seems to work:\r\n\r\n - Added log4j.jar to my classpath \r\n - cleaned Tomcat Directory\r\n - My JDK is 1.8\r\n - My JRE is 1.8 \r\n\r\nAny idea what else to try?\r\n\r\n&gt; org.apache.catalina.LifecycleException: Failed to start component\r\n&gt; [StandardEngine[Catalina].StandardHost[localhost].StandardContext[]]\r\n&gt; \tat\r\n&gt; org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:167)\r\n&gt; \tat\r\n&gt; org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:752)\r\n&gt; \tat\r\n&gt; org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:728)\r\n&gt; \tat\r\n&gt; org.apache.catalina.core.StandardHost.addChild(StandardHost.java:734)\r\n&gt; \tat\r\n&gt; org.apache.catalina.startup.HostConfig.deployDirectory(HostConfig.java:1144)\r\n&gt; \tat\r\n&gt; org.apache.catalina.startup.HostConfig$DeployDirectory.run(HostConfig.java:1878)\r\n&gt; \tat java.util.concurrent.Executors$RunnableAdapter.call(Unknown\r\n&gt; Source) \tat java.util.concurrent.FutureTask.run(Unknown Source) \tat\r\n&gt; java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source) \tat\r\n&gt; java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source) \tat\r\n&gt; java.lang.Thread.run(Unknown Source) Caused by:\r\n&gt; java.lang.NoClassDefFoundError: Lorg/apache/logging/log4j/Logger; \tat\r\n&gt; java.lang.Class.getDeclaredFields0(Native Method) \tat\r\n&gt; java.lang.Class.privateGetDeclaredFields(Unknown Source) \tat\r\n&gt; java.lang.Class.getDeclaredFields(Unknown Source) \tat\r\n&gt; org.apache.catalina.util.Introspection.getDeclaredFields(Introspection.java:110)\r\n&gt; \tat\r\n&gt; org.apache.catalina.startup.WebAnnotationSet.loadFieldsAnnotation(WebAnnotationSet.java:262)\r\n&gt; \tat\r\n&gt; org.apache.catalina.startup.WebAnnotationSet.loadApplicationFilterAnnotations(WebAnnotationSet.java:108)\r\n&gt; \tat\r\n&gt; org.apache.catalina.startup.WebAnnotationSet.loadApplicationAnnotations(WebAnnotationSet.java:65)\r\n&gt; \tat\r\n&gt; org.apache.catalina.startup.ContextConfig.applicationAnnotationsConfig(ContextConfig.java:328)\r\n&gt; \tat\r\n&gt; org.apache.catalina.startup.ContextConfig.configureStart(ContextConfig.java:778)\r\n&gt; \tat\r\n&gt; org.apache.catalina.startup.ContextConfig.lifecycleEvent(ContextConfig.java:299)\r\n&gt; \tat\r\n&gt; org.apache.catalina.util.LifecycleBase.fireLifecycleEvent(LifecycleBase.java:94)\r\n&gt; \tat\r\n&gt; org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:5105)\r\n&gt; \tat\r\n&gt; org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)","title":"org.apache.catalina.LifecycleException: Failed to start component [StandardEngine[Catalina].StandardHost[localhost].StandardContext[]] - tomcat 8.5","body":"<p>I am trying to get my tomcat 8.5 to start on my eclipse.\nEverytime I get this error.</p>\n\n<p>I already tried the below fixes but nothing seems to work:</p>\n\n<ul>\n<li>Added log4j.jar to my classpath </li>\n<li>cleaned Tomcat Directory</li>\n<li>My JDK is 1.8</li>\n<li>My JRE is 1.8 </li>\n</ul>\n\n<p>Any idea what else to try?</p>\n\n<blockquote>\n  <p>org.apache.catalina.LifecycleException: Failed to start component\n  [StandardEngine[Catalina].StandardHost[localhost].StandardContext[]]\n    at\n  org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:167)\n    at\n  org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:752)\n    at\n  org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:728)\n    at\n  org.apache.catalina.core.StandardHost.addChild(StandardHost.java:734)\n    at\n  org.apache.catalina.startup.HostConfig.deployDirectory(HostConfig.java:1144)\n    at\n  org.apache.catalina.startup.HostConfig$DeployDirectory.run(HostConfig.java:1878)\n    at java.util.concurrent.Executors$RunnableAdapter.call(Unknown\n  Source)   at java.util.concurrent.FutureTask.run(Unknown Source)  at\n  java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source)     at\n  java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)    at\n  java.lang.Thread.run(Unknown Source) Caused by:\n  java.lang.NoClassDefFoundError: Lorg/apache/logging/log4j/Logger;     at\n  java.lang.Class.getDeclaredFields0(Native Method)     at\n  java.lang.Class.privateGetDeclaredFields(Unknown Source)  at\n  java.lang.Class.getDeclaredFields(Unknown Source)     at\n  org.apache.catalina.util.Introspection.getDeclaredFields(Introspection.java:110)\n    at\n  org.apache.catalina.startup.WebAnnotationSet.loadFieldsAnnotation(WebAnnotationSet.java:262)\n    at\n  org.apache.catalina.startup.WebAnnotationSet.loadApplicationFilterAnnotations(WebAnnotationSet.java:108)\n    at\n  org.apache.catalina.startup.WebAnnotationSet.loadApplicationAnnotations(WebAnnotationSet.java:65)\n    at\n  org.apache.catalina.startup.ContextConfig.applicationAnnotationsConfig(ContextConfig.java:328)\n    at\n  org.apache.catalina.startup.ContextConfig.configureStart(ContextConfig.java:778)\n    at\n  org.apache.catalina.startup.ContextConfig.lifecycleEvent(ContextConfig.java:299)\n    at\n  org.apache.catalina.util.LifecycleBase.fireLifecycleEvent(LifecycleBase.java:94)\n    at\n  org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:5105)\n    at\n  org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)</p>\n</blockquote>\n"},{"tags":["java","mysql","hibernate","jpa","orm"],"answers":[{"tags":[],"owner":{"account_id":9067171,"reputation":1177,"user_id":6751603,"accept_rate":100,"display_name":"JavaMan"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1682891360,"creation_date":1682891360,"answer_id":76143708,"question_id":76142890,"body_markdown":"I&#39;m not sure about it and I&#39;m absolutely no hibernate expert but I think you could give it a try.\r\n\r\n    public void save(Room room, User user) {\r\n            Session session = HibernateUtil.getSessionFactory().getCurrentSession();\r\n            try {\r\n                Transaction tx = session.beginTransaction();\r\n                room.getUsers().add(user); //it shouldn&#39;t be needed to add the room to the users rooms\r\n                session.merge(room);//the save operation should be cascaded, so the user should be automatically saved as well\r\n                tx.commit();\r\n            } catch (Exception e) {\r\n                e.printStackTrace();\r\n            } finally {\r\n                session.close();\r\n            }\r\n    }","title":"Hibernate error: object references an unsaved transient instance - save the transient instance before flushing: model.Room","body":"<p>I'm not sure about it and I'm absolutely no hibernate expert but I think you could give it a try.</p>\n<pre><code>public void save(Room room, User user) {\n        Session session = HibernateUtil.getSessionFactory().getCurrentSession();\n        try {\n            Transaction tx = session.beginTransaction();\n            room.getUsers().add(user); //it shouldn't be needed to add the room to the users rooms\n            session.merge(room);//the save operation should be cascaded, so the user should be automatically saved as well\n            tx.commit();\n        } catch (Exception e) {\n            e.printStackTrace();\n        } finally {\n            session.close();\n        }\n}\n</code></pre>\n"}],"owner":{"account_id":28465580,"reputation":3,"user_id":21781698,"display_name":"dg0mezm"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":80,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76143708,"answer_count":1,"score":0,"last_activity_date":1682897154,"creation_date":1682879267,"question_id":76142890,"body_markdown":"# Solved - Updated\r\nI deleted merge user method and adding room to room list from the user.\r\n\r\n    public void save(Room room, User user) {\r\n        Session session = HibernateUtil.getSessionFactory().getCurrentSession();\r\n        try {\r\n            session.beginTransaction();\r\n            room.getUsers().add(user);\r\n            session.merge(room);\r\n            session.getTransaction().commit();\r\n        } catch (Exception e) {\r\n            e.printStackTrace();\r\n        } finally {\r\n            session.close();\r\n        }\r\n    }\r\n\r\nAnd updating the user instance out the RoomRepository to get the updated User instance:\r\n\r\n    public void updateUser() {\r\n        this.user = userRepository.updateUser(user);\r\n    }\r\n\r\nOn UserRepository:\r\n\r\n    public User updateUser(User user) {\r\n        User result = null;\r\n        Session session = HibernateUtil.getSessionFactory().getCurrentSession();\r\n        try {\r\n            session.beginTransaction();\r\n            result = session.get(User.class, user.getId());\r\n            session.getTransaction().commit();\r\n        } catch (Exception e) {\r\n            e.printStackTrace();\r\n        } finally {\r\n            session.close();\r\n        }\r\n        return result;\r\n    }\r\n\r\nProbably this is a bad practise, so I&#39;ll have to think how to refactor this.\r\n\r\n&lt;hr/&gt;\r\n\r\n# Problem\r\nI have class Room and class User with a ManyToMany association.\r\n## User\r\n```\r\n@ManyToMany(cascade = CascadeType.ALL, fetch = FetchType.LAZY, mappedBy = &quot;users&quot;)\r\npublic Set&lt;Room&gt; rooms = new HashSet&lt;&gt;();\r\n```\r\n\r\n## Room\r\n\r\n```\r\n@ManyToMany(cascade = CascadeType.ALL, fetch = FetchType.LAZY)\r\n@JoinTable(name = &quot;sala_usuario&quot;,\r\n      joinColumns = @JoinColumn(name = &quot;id_salas&quot;),\r\n      inverseJoinColumns = @JoinColumn(name = &quot;cod_user&quot;))\r\nprivate Set&lt;User&gt; users = new HashSet&lt;&gt;();\r\n```\r\n\r\nThis is the exception&#39;s trace:\r\n\r\n```\r\njava.lang.IllegalStateException: org.hibernate.TransientObjectException: object references an unsaved transient instance - save the transient instance before flushing: model.Room\r\nat org.hibernate.internal.ExceptionConverterImpl.convert(ExceptionConverterImpl.java:161)\r\nat org.hibernate.query.spi.AbstractSelectionQuery.list(AbstractSelectionQuery.java:374)\r\nat org.hibernate.query.sqm.internal.QuerySqmImpl.list(QuerySqmImpl.java:1073)\r\nat org.hibernate.query.Query.getResultList(Query.java:94)\r\nat repository.MessageRepository.findRoomMessages(MessageRepository.java:41)\r\nat app.ChatController.loadMessages(ChatController.java:123)\r\nat app.ChatController.lambda$initialize$0(ChatController.java:45)\r\n```\r\n\r\nThis is the save method in RoomRepository:\r\n\r\n```\r\npublic void save(Room room, User user) {\r\n        Session session = HibernateUtil.getSessionFactory().getCurrentSession();\r\n        try {\r\n            session.beginTransaction();\r\n            user.getRooms().add(room);\r\n            room.getUsers().add(user);\r\n            session.merge(room);\r\n            session.merge(user);\r\n            session.getTransaction().commit();\r\n        } catch (Exception e) {\r\n            e.printStackTrace();\r\n        } finally {\r\n            session.close();\r\n        }\r\n}\r\n```\r\n\r\nThe error happens when a Room is opened by the user and try to get the messages with OneToMany association because the instance of Room is not persisted on Hibernate, but it is:\r\n\r\n```\r\npublic List&lt;Message&gt; findRoomMessages(Room room) {\r\n        List&lt;Message&gt; result = null;\r\n        Session session = HibernateUtil.getSessionFactory().getCurrentSession();\r\n        try {\r\n            session.beginTransaction();\r\n            CriteriaBuilder cb = session.getCriteriaBuilder();\r\n            CriteriaQuery&lt;Message&gt; query = cb.createQuery(Message.class);\r\n            Root&lt;Message&gt; root = query.from(Message.class);\r\n            query.select(root).where(cb.equal(root.get(&quot;room&quot;), room));\r\n            result = session.createQuery(query).getResultList();\r\n            session.getTransaction().commit();\r\n        } catch (Exception e){\r\n            e.printStackTrace();\r\n        } finally {\r\n            session.close();\r\n        }\r\n        return result;\r\n    }\r\n```\r\n\r\nI&#39;ve solved making this, but I want to use ORM:\r\n\r\n```\r\npublic List&lt;Message&gt; findRoomMessages(Room room) {\r\n        List&lt;Message&gt; result = null;\r\n        Session session = HibernateUtil.getSessionFactory().getCurrentSession();\r\n        try {\r\n            session.beginTransaction();\r\n            result = session.createNativeQuery(&quot;SELECT * FROM mensajes WHERE id_sala = :pid_sala&quot;, Message.class)\r\n                            .setParameter(&quot;pid_sala&quot;, room.getId()).list();\r\n            session.getTransaction().commit();\r\n        } catch (Exception e){\r\n            e.printStackTrace();\r\n        } finally {\r\n            session.close();\r\n        }\r\n        return result;\r\n}\r\n```","title":"Hibernate error: object references an unsaved transient instance - save the transient instance before flushing: model.Room","body":"<h1>Solved - Updated</h1>\n<p>I deleted merge user method and adding room to room list from the user.</p>\n<pre><code>public void save(Room room, User user) {\n    Session session = HibernateUtil.getSessionFactory().getCurrentSession();\n    try {\n        session.beginTransaction();\n        room.getUsers().add(user);\n        session.merge(room);\n        session.getTransaction().commit();\n    } catch (Exception e) {\n        e.printStackTrace();\n    } finally {\n        session.close();\n    }\n}\n</code></pre>\n<p>And updating the user instance out the RoomRepository to get the updated User instance:</p>\n<pre><code>public void updateUser() {\n    this.user = userRepository.updateUser(user);\n}\n</code></pre>\n<p>On UserRepository:</p>\n<pre><code>public User updateUser(User user) {\n    User result = null;\n    Session session = HibernateUtil.getSessionFactory().getCurrentSession();\n    try {\n        session.beginTransaction();\n        result = session.get(User.class, user.getId());\n        session.getTransaction().commit();\n    } catch (Exception e) {\n        e.printStackTrace();\n    } finally {\n        session.close();\n    }\n    return result;\n}\n</code></pre>\n<p>Probably this is a bad practise, so I'll have to think how to refactor this.</p>\n<hr/>\n<h1>Problem</h1>\n<p>I have class Room and class User with a ManyToMany association.</p>\n<h2>User</h2>\n<pre><code>@ManyToMany(cascade = CascadeType.ALL, fetch = FetchType.LAZY, mappedBy = &quot;users&quot;)\npublic Set&lt;Room&gt; rooms = new HashSet&lt;&gt;();\n</code></pre>\n<h2>Room</h2>\n<pre><code>@ManyToMany(cascade = CascadeType.ALL, fetch = FetchType.LAZY)\n@JoinTable(name = &quot;sala_usuario&quot;,\n      joinColumns = @JoinColumn(name = &quot;id_salas&quot;),\n      inverseJoinColumns = @JoinColumn(name = &quot;cod_user&quot;))\nprivate Set&lt;User&gt; users = new HashSet&lt;&gt;();\n</code></pre>\n<p>This is the exception's trace:</p>\n<pre><code>java.lang.IllegalStateException: org.hibernate.TransientObjectException: object references an unsaved transient instance - save the transient instance before flushing: model.Room\nat org.hibernate.internal.ExceptionConverterImpl.convert(ExceptionConverterImpl.java:161)\nat org.hibernate.query.spi.AbstractSelectionQuery.list(AbstractSelectionQuery.java:374)\nat org.hibernate.query.sqm.internal.QuerySqmImpl.list(QuerySqmImpl.java:1073)\nat org.hibernate.query.Query.getResultList(Query.java:94)\nat repository.MessageRepository.findRoomMessages(MessageRepository.java:41)\nat app.ChatController.loadMessages(ChatController.java:123)\nat app.ChatController.lambda$initialize$0(ChatController.java:45)\n</code></pre>\n<p>This is the save method in RoomRepository:</p>\n<pre><code>public void save(Room room, User user) {\n        Session session = HibernateUtil.getSessionFactory().getCurrentSession();\n        try {\n            session.beginTransaction();\n            user.getRooms().add(room);\n            room.getUsers().add(user);\n            session.merge(room);\n            session.merge(user);\n            session.getTransaction().commit();\n        } catch (Exception e) {\n            e.printStackTrace();\n        } finally {\n            session.close();\n        }\n}\n</code></pre>\n<p>The error happens when a Room is opened by the user and try to get the messages with OneToMany association because the instance of Room is not persisted on Hibernate, but it is:</p>\n<pre><code>public List&lt;Message&gt; findRoomMessages(Room room) {\n        List&lt;Message&gt; result = null;\n        Session session = HibernateUtil.getSessionFactory().getCurrentSession();\n        try {\n            session.beginTransaction();\n            CriteriaBuilder cb = session.getCriteriaBuilder();\n            CriteriaQuery&lt;Message&gt; query = cb.createQuery(Message.class);\n            Root&lt;Message&gt; root = query.from(Message.class);\n            query.select(root).where(cb.equal(root.get(&quot;room&quot;), room));\n            result = session.createQuery(query).getResultList();\n            session.getTransaction().commit();\n        } catch (Exception e){\n            e.printStackTrace();\n        } finally {\n            session.close();\n        }\n        return result;\n    }\n</code></pre>\n<p>I've solved making this, but I want to use ORM:</p>\n<pre><code>public List&lt;Message&gt; findRoomMessages(Room room) {\n        List&lt;Message&gt; result = null;\n        Session session = HibernateUtil.getSessionFactory().getCurrentSession();\n        try {\n            session.beginTransaction();\n            result = session.createNativeQuery(&quot;SELECT * FROM mensajes WHERE id_sala = :pid_sala&quot;, Message.class)\n                            .setParameter(&quot;pid_sala&quot;, room.getId()).list();\n            session.getTransaction().commit();\n        } catch (Exception e){\n            e.printStackTrace();\n        } finally {\n            session.close();\n        }\n        return result;\n}\n</code></pre>\n"},{"tags":["java","date"],"comments":[{"owner":{"account_id":7450,"reputation":269210,"user_id":12960,"display_name":"Brian Agnew"},"score":3,"creation_date":1633686630,"post_id":5270272,"comment_id":122831506,"body_markdown":"If you&#39;re reading this, please skip ahead/down to the answers using the current methodology of java.time! The Calendar-based answers are fine, but outdated now.","body":"If you&#39;re reading this, please skip ahead/down to the answers using the current methodology of java.time! The Calendar-based answers are fine, but outdated now."}],"answers":[{"tags":[],"owner":{"account_id":70258,"reputation":590444,"user_id":203907,"accept_rate":81,"display_name":"Bozho"},"down_vote_count":0,"up_vote_count":403,"is_accepted":true,"score":403,"last_activity_date":1581526173,"creation_date":1299829635,"answer_id":5270292,"question_id":5270272,"body_markdown":"Yes.  Depending on your exact case:\r\n\r\n- You can use `java.util.Calendar`:\r\n\r\n        Calendar c = Calendar.getInstance();\r\n        c.setTime(yourDate);\r\n        int dayOfWeek = c.get(Calendar.DAY_OF_WEEK);\r\n\r\n- if you need the output to be `Tue` rather than 3 (Days of week are indexed starting at 1 for Sunday, see Calendar.SUNDAY), instead of going through a calendar, just reformat the string:  `new SimpleDateFormat(&quot;EE&quot;).format(date)` (`EE` meaning &quot;day of week, short version&quot;)\r\n\r\n\r\n- if you have your input as string, rather than `Date`, you should use `SimpleDateFormat` to parse it: `new SimpleDateFormat(&quot;dd/M/yyyy&quot;).parse(dateString)`\r\n\r\n- you can use joda-time&#39;s `DateTime` and call `dateTime.dayOfWeek()` and/or `DateTimeFormat`.\r\n\r\n- edit: since Java 8 you can now use java.time package instead of joda-time\r\n\r\n","title":"How to determine day of week by passing specific date?","body":"<p>Yes.  Depending on your exact case:</p>\n\n<ul>\n<li><p>You can use <code>java.util.Calendar</code>:</p>\n\n<pre><code>Calendar c = Calendar.getInstance();\nc.setTime(yourDate);\nint dayOfWeek = c.get(Calendar.DAY_OF_WEEK);\n</code></pre></li>\n<li><p>if you need the output to be <code>Tue</code> rather than 3 (Days of week are indexed starting at 1 for Sunday, see Calendar.SUNDAY), instead of going through a calendar, just reformat the string:  <code>new SimpleDateFormat(\"EE\").format(date)</code> (<code>EE</code> meaning \"day of week, short version\")</p></li>\n<li><p>if you have your input as string, rather than <code>Date</code>, you should use <code>SimpleDateFormat</code> to parse it: <code>new SimpleDateFormat(\"dd/M/yyyy\").parse(dateString)</code></p></li>\n<li><p>you can use joda-time's <code>DateTime</code> and call <code>dateTime.dayOfWeek()</code> and/or <code>DateTimeFormat</code>.</p></li>\n<li><p>edit: since Java 8 you can now use java.time package instead of joda-time</p></li>\n</ul>\n"},{"tags":[],"owner":{"account_id":1299488,"reputation":6269,"user_id":1249710,"display_name":"JDGuide"},"down_vote_count":0,"up_vote_count":79,"is_accepted":false,"score":79,"last_activity_date":1634134973,"creation_date":1343819542,"answer_id":11758013,"question_id":5270272,"body_markdown":"                        \r\n      String inputDate = &quot;01/08/2012&quot;;\r\n      SimpleDateFormat format1 = new SimpleDateFormat(&quot;dd/MM/yyyy&quot;);\r\n      Date dt1 = format1.parse(input_date);\r\n      DateFormat format2 = new SimpleDateFormat(&quot;EEEE&quot;); \r\n      String finalDay = format2.format(dt1);\r\n\r\nUse this code for find the day name from a input date.Simple and well tested.","title":"How to determine day of week by passing specific date?","body":"<pre><code>  String inputDate = &quot;01/08/2012&quot;;\n  SimpleDateFormat format1 = new SimpleDateFormat(&quot;dd/MM/yyyy&quot;);\n  Date dt1 = format1.parse(input_date);\n  DateFormat format2 = new SimpleDateFormat(&quot;EEEE&quot;); \n  String finalDay = format2.format(dt1);\n</code></pre>\n<p>Use this code for find the day name from a input date.Simple and well tested.</p>\n"},{"tags":[],"owner":{"account_id":2840964,"reputation":21,"user_id":2440597,"display_name":"Sandeep.N"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1551873036,"creation_date":1370007248,"answer_id":16858565,"question_id":5270272,"body_markdown":"    import java.text.SimpleDateFormat;\r\n    import java.util.Scanner;\r\n    \r\n    class DayFromDate {\r\n    \r\n        public static void main(String args[]) {\r\n    \r\n            System.out.println(&quot;Enter the date(dd/mm/yyyy):&quot;);\r\n    \t    Scanner scan = new Scanner(System.in);\r\n    \t    String Date = scan.nextLine();\r\n\r\n    \t    try {\r\n    \t\t    boolean dateValid = dateValidate(Date);\r\n\r\n    \t\t    if(dateValid == true) {\r\n                    SimpleDateFormat df = new SimpleDateFormat( &quot;dd/MM/yy&quot; );  \r\n    \t\t\t    java.util.Date date = df.parse( Date );   \r\n    \t\t\t    df.applyPattern( &quot;EEE&quot; );  \r\n    \t\t\t    String day= df.format( date ); \r\n\r\n    \t\t\t    if(day.compareTo(&quot;Sat&quot;) == 0 || day.compareTo(&quot;Sun&quot;) == 0) {\r\n    \t\t\t\t    System.out.println(day + &quot;: Weekend&quot;);\r\n    \t\t\t    } else {\r\n    \t\t\t\t    System.out.println(day + &quot;: Weekday&quot;);\r\n    \t\t\t    }\r\n    \t\t    } else {\r\n    \t\t\t    System.out.println(&quot;Invalid Date!!!&quot;);\r\n    \t\t    }\r\n    \t    } catch(Exception e) {\r\n    \t\t    System.out.println(&quot;Invalid Date Formats!!!&quot;);\r\n    \t    }\r\n         }\r\n    \r\n        static public boolean dateValidate(String d) {\r\n    \r\n            String dateArray[] = d.split(&quot;/&quot;);\r\n    \t    int day = Integer.parseInt(dateArray[0]);\r\n    \t    int month = Integer.parseInt(dateArray[1]);\r\n    \t    int year = Integer.parseInt(dateArray[2]);\r\n    \t    System.out.print(day + &quot;\\n&quot; + month + &quot;\\n&quot; + year + &quot;\\n&quot;);\r\n    \t    boolean leapYear = false;\r\n    \t\r\n    \t    if((year % 4 == 0) &amp;&amp; (year % 100 != 0) || (year % 400 == 0)) {\r\n    \t\t    leapYear = true;\r\n            }\r\n    \t\r\n    \t    if(year &gt; 2099 || year &lt; 1900)\r\n                return false;\r\n    \t\r\n            if(month &lt; 13) {\r\n                if(month == 1 || month == 3 || month == 5 || month == 7 || month == 8 || month == 10 || month == 12) {\r\n    \t\t\t    if(day &gt; 31)\r\n    \t\t\t\t    return false;\r\n                } else if(month == 4 || month == 6 || month == 9 || month == 11) {\r\n    \t\t\t    if(day &gt; 30)\r\n    \t\t\t\t    return false;\r\n    \t\t    } else if(leapYear == true &amp;&amp; month == 2) {\r\n    \t\t\t    if(day &gt; 29)\r\n                        return false;\r\n    \t\t    } else if(leapYear == false &amp;&amp; month == 2) {\r\n                    if(day &gt; 28)\r\n                        return false;\r\n    \t\t    }\r\n\r\n    \t\t    return true;\t\r\n    \t    } else return false;\r\n        }\r\n    }","title":"How to determine day of week by passing specific date?","body":"<pre><code>import java.text.SimpleDateFormat;\nimport java.util.Scanner;\n\nclass DayFromDate {\n\n    public static void main(String args[]) {\n\n        System.out.println(\"Enter the date(dd/mm/yyyy):\");\n        Scanner scan = new Scanner(System.in);\n        String Date = scan.nextLine();\n\n        try {\n            boolean dateValid = dateValidate(Date);\n\n            if(dateValid == true) {\n                SimpleDateFormat df = new SimpleDateFormat( \"dd/MM/yy\" );  \n                java.util.Date date = df.parse( Date );   \n                df.applyPattern( \"EEE\" );  \n                String day= df.format( date ); \n\n                if(day.compareTo(\"Sat\") == 0 || day.compareTo(\"Sun\") == 0) {\n                    System.out.println(day + \": Weekend\");\n                } else {\n                    System.out.println(day + \": Weekday\");\n                }\n            } else {\n                System.out.println(\"Invalid Date!!!\");\n            }\n        } catch(Exception e) {\n            System.out.println(\"Invalid Date Formats!!!\");\n        }\n     }\n\n    static public boolean dateValidate(String d) {\n\n        String dateArray[] = d.split(\"/\");\n        int day = Integer.parseInt(dateArray[0]);\n        int month = Integer.parseInt(dateArray[1]);\n        int year = Integer.parseInt(dateArray[2]);\n        System.out.print(day + \"\\n\" + month + \"\\n\" + year + \"\\n\");\n        boolean leapYear = false;\n\n        if((year % 4 == 0) &amp;&amp; (year % 100 != 0) || (year % 400 == 0)) {\n            leapYear = true;\n        }\n\n        if(year &gt; 2099 || year &lt; 1900)\n            return false;\n\n        if(month &lt; 13) {\n            if(month == 1 || month == 3 || month == 5 || month == 7 || month == 8 || month == 10 || month == 12) {\n                if(day &gt; 31)\n                    return false;\n            } else if(month == 4 || month == 6 || month == 9 || month == 11) {\n                if(day &gt; 30)\n                    return false;\n            } else if(leapYear == true &amp;&amp; month == 2) {\n                if(day &gt; 29)\n                    return false;\n            } else if(leapYear == false &amp;&amp; month == 2) {\n                if(day &gt; 28)\n                    return false;\n            }\n\n            return true;    \n        } else return false;\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2934859,"reputation":1622,"user_id":2514069,"display_name":"Nikolay Hristov"},"down_vote_count":0,"up_vote_count":36,"is_accepted":false,"score":36,"last_activity_date":1531758763,"creation_date":1388242491,"answer_id":20815893,"question_id":5270272,"body_markdown":"Simply use [SimpleDateFormat][1].\r\n\r\n    SimpleDateFormat sdf = new SimpleDateFormat(&quot;dd/MM/yyyy&quot;, java.util.Locale.ENGLISH);\r\n    Date myDate = sdf.parse(&quot;28/12/2013&quot;);\r\n    sdf.applyPattern(&quot;EEE, d MMM yyyy&quot;);\r\n    String sMyDate = sdf.format(myDate);\r\n\r\nThe result is:  **Sat, 28 Dec 2013**\r\n\r\nThe default constructor is taking &quot;the default&quot; [Locale][2], so be careful using it when you need a specific pattern.\r\n\r\n    public SimpleDateFormat(String pattern) {\r\n        this(pattern, Locale.getDefault(Locale.Category.FORMAT));\r\n    }\r\n\r\n\r\n  [1]: https://docs.oracle.com/javase/7/docs/api/java/text/SimpleDateFormat.html\r\n  [2]: https://docs.oracle.com/javase/7/docs/api/java/util/Locale.html","title":"How to determine day of week by passing specific date?","body":"<p>Simply use <a href=\"https://docs.oracle.com/javase/7/docs/api/java/text/SimpleDateFormat.html\" rel=\"noreferrer\">SimpleDateFormat</a>.</p>\n\n<pre><code>SimpleDateFormat sdf = new SimpleDateFormat(\"dd/MM/yyyy\", java.util.Locale.ENGLISH);\nDate myDate = sdf.parse(\"28/12/2013\");\nsdf.applyPattern(\"EEE, d MMM yyyy\");\nString sMyDate = sdf.format(myDate);\n</code></pre>\n\n<p>The result is:  <strong>Sat, 28 Dec 2013</strong></p>\n\n<p>The default constructor is taking \"the default\" <a href=\"https://docs.oracle.com/javase/7/docs/api/java/util/Locale.html\" rel=\"noreferrer\">Locale</a>, so be careful using it when you need a specific pattern.</p>\n\n<pre><code>public SimpleDateFormat(String pattern) {\n    this(pattern, Locale.getDefault(Locale.Category.FORMAT));\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1161303,"reputation":19991,"user_id":1140748,"accept_rate":93,"display_name":"alain.janinm"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1412842680,"creation_date":1412777798,"answer_id":26259185,"question_id":5270272,"body_markdown":"Another &quot;fun&quot; way is to use [Doomsday algorithm][1]. It&#39;s a way longer method but it&#39;s also faster if you don&#39;t need to create a Calendar object with a given date.\r\n\r\n\r\n    import java.text.ParseException;\r\n    import java.text.SimpleDateFormat;\r\n    import java.util.ArrayList;\r\n    import java.util.Calendar;\r\n    import java.util.HashMap;\r\n    import java.util.Map;\r\n    import java.util.Random;\r\n    \r\n    /**\r\n     *\r\n     * @author alain.janinmanificat\r\n     */\r\n    public class Doomsday {\r\n    \r\n        public static HashMap&lt;Integer, ArrayList&lt;Integer&gt;&gt; anchorDaysMap = new HashMap&lt;&gt;();\r\n        public static HashMap&lt;Integer, Integer&gt; doomsdayDate = new HashMap&lt;&gt;();\r\n        public static String weekdays[] = new DateFormatSymbols(Locale.FRENCH).getWeekdays();\r\n\r\n        /**\r\n         * @param args the command line arguments\r\n         */\r\n        public static void main(String[] args) throws ParseException, ParseException {\r\n    \r\n            // Map is fed manually but we can use this to calculate it : http://en.wikipedia.org/wiki/Doomsday_rule#Finding_a_century.27s_anchor_day\r\n            anchorDaysMap.put(Integer.valueOf(0), new ArrayList&lt;Integer&gt;() {\r\n                {\r\n                    add(Integer.valueOf(1700));\r\n                    add(Integer.valueOf(2100));\r\n                    add(Integer.valueOf(2500));\r\n                }\r\n            });\r\n    \r\n            anchorDaysMap.put(Integer.valueOf(2), new ArrayList&lt;Integer&gt;() {\r\n                {\r\n                    add(Integer.valueOf(1600));\r\n                    add(Integer.valueOf(2000));\r\n                    add(Integer.valueOf(2400));\r\n                }\r\n            });\r\n    \r\n            anchorDaysMap.put(Integer.valueOf(3), new ArrayList&lt;Integer&gt;() {\r\n                {\r\n                    add(Integer.valueOf(1500));\r\n                    add(Integer.valueOf(1900));\r\n                    add(Integer.valueOf(2300));\r\n                }\r\n            });\r\n    \r\n            anchorDaysMap.put(Integer.valueOf(5), new ArrayList&lt;Integer&gt;() {\r\n                {\r\n                    add(Integer.valueOf(1800));\r\n                    add(Integer.valueOf(2200));\r\n                    add(Integer.valueOf(2600));\r\n                }\r\n            });\r\n    \r\n            //Some reference date that always land on Doomsday\r\n            doomsdayDate.put(Integer.valueOf(1), Integer.valueOf(3));\r\n            doomsdayDate.put(Integer.valueOf(2), Integer.valueOf(14));\r\n            doomsdayDate.put(Integer.valueOf(3), Integer.valueOf(14));\r\n            doomsdayDate.put(Integer.valueOf(4), Integer.valueOf(4));\r\n            doomsdayDate.put(Integer.valueOf(5), Integer.valueOf(9));\r\n            doomsdayDate.put(Integer.valueOf(6), Integer.valueOf(6));\r\n            doomsdayDate.put(Integer.valueOf(7), Integer.valueOf(4));\r\n            doomsdayDate.put(Integer.valueOf(8), Integer.valueOf(8));\r\n            doomsdayDate.put(Integer.valueOf(9), Integer.valueOf(5));\r\n            doomsdayDate.put(Integer.valueOf(10), Integer.valueOf(10));\r\n            doomsdayDate.put(Integer.valueOf(11), Integer.valueOf(7));\r\n            doomsdayDate.put(Integer.valueOf(12), Integer.valueOf(12));\r\n    \r\n            long time = System.currentTimeMillis();\r\n            for (int i = 0; i &lt; 100000; i++) {\r\n                \r\n                //Get a random date\r\n                int year = 1583 + new Random().nextInt(500);\r\n                int month = 1 + new Random().nextInt(12);\r\n                int day = 1 + new Random().nextInt(7);\r\n                \r\n                //Get anchor day and DoomsDay for current date\r\n                int twoDigitsYear = (year % 100);\r\n                int century = year - twoDigitsYear;\r\n                int adForCentury = getADCentury(century);\r\n                int dd = ((int) twoDigitsYear / 12) + twoDigitsYear % 12 + (int) ((twoDigitsYear % 12) / 4);\r\n    \r\n                //Get the gap between current date and a reference DoomsDay date\r\n                int referenceDay = doomsdayDate.get(month);\r\n                int gap = (day - referenceDay) % 7;\r\n\r\n                int result = (gap + adForCentury + dd) % 7;\r\n\r\n                if(result&lt;0){\r\n                    result*=-1;\r\n                }\r\n                String dayDate= weekdays[(result + 1) % 8];\r\n                //System.out.println(&quot;day:&quot; + dayDate);\r\n            }\r\n            System.out.println(&quot;time (ms) : &quot; + (System.currentTimeMillis() - time)); //time (ms) : 80\r\n    \r\n             time = System.currentTimeMillis();\r\n            for (int i = 0; i &lt; 100000; i++) {\r\n                Calendar c = Calendar.getInstance();\r\n                //I should have used random date here too, but it&#39;s already slower this way\r\n                c.setTime(new SimpleDateFormat(&quot;dd/MM/yyyy&quot;).parse(&quot;12/04/1861&quot;));\r\n    //            System.out.println(new SimpleDateFormat(&quot;EE&quot;).format(c.getTime()));\r\n                int result2 = c.get(Calendar.DAY_OF_WEEK);\r\n    //            System.out.println(&quot;day idx :&quot;+ result2);\r\n            }\r\n            System.out.println(&quot;time (ms) : &quot; + (System.currentTimeMillis() - time)); //time (ms) : 884\r\n        }\r\n    \r\n        public static int getADCentury(int century) {\r\n            for (Map.Entry&lt;Integer, ArrayList&lt;Integer&gt;&gt; entry : anchorDaysMap.entrySet()) {\r\n                if (entry.getValue().contains(Integer.valueOf(century))) {\r\n                    return entry.getKey();\r\n                }\r\n            }\r\n            return 0;\r\n        }\r\n    }\r\n\r\n\r\n\r\n\r\n  [1]: http://en.wikipedia.org/wiki/Doomsday_rule","title":"How to determine day of week by passing specific date?","body":"<p>Another \"fun\" way is to use <a href=\"http://en.wikipedia.org/wiki/Doomsday_rule\" rel=\"nofollow\">Doomsday algorithm</a>. It's a way longer method but it's also faster if you don't need to create a Calendar object with a given date.</p>\n\n<pre><code>import java.text.ParseException;\nimport java.text.SimpleDateFormat;\nimport java.util.ArrayList;\nimport java.util.Calendar;\nimport java.util.HashMap;\nimport java.util.Map;\nimport java.util.Random;\n\n/**\n *\n * @author alain.janinmanificat\n */\npublic class Doomsday {\n\n    public static HashMap&lt;Integer, ArrayList&lt;Integer&gt;&gt; anchorDaysMap = new HashMap&lt;&gt;();\n    public static HashMap&lt;Integer, Integer&gt; doomsdayDate = new HashMap&lt;&gt;();\n    public static String weekdays[] = new DateFormatSymbols(Locale.FRENCH).getWeekdays();\n\n    /**\n     * @param args the command line arguments\n     */\n    public static void main(String[] args) throws ParseException, ParseException {\n\n        // Map is fed manually but we can use this to calculate it : http://en.wikipedia.org/wiki/Doomsday_rule#Finding_a_century.27s_anchor_day\n        anchorDaysMap.put(Integer.valueOf(0), new ArrayList&lt;Integer&gt;() {\n            {\n                add(Integer.valueOf(1700));\n                add(Integer.valueOf(2100));\n                add(Integer.valueOf(2500));\n            }\n        });\n\n        anchorDaysMap.put(Integer.valueOf(2), new ArrayList&lt;Integer&gt;() {\n            {\n                add(Integer.valueOf(1600));\n                add(Integer.valueOf(2000));\n                add(Integer.valueOf(2400));\n            }\n        });\n\n        anchorDaysMap.put(Integer.valueOf(3), new ArrayList&lt;Integer&gt;() {\n            {\n                add(Integer.valueOf(1500));\n                add(Integer.valueOf(1900));\n                add(Integer.valueOf(2300));\n            }\n        });\n\n        anchorDaysMap.put(Integer.valueOf(5), new ArrayList&lt;Integer&gt;() {\n            {\n                add(Integer.valueOf(1800));\n                add(Integer.valueOf(2200));\n                add(Integer.valueOf(2600));\n            }\n        });\n\n        //Some reference date that always land on Doomsday\n        doomsdayDate.put(Integer.valueOf(1), Integer.valueOf(3));\n        doomsdayDate.put(Integer.valueOf(2), Integer.valueOf(14));\n        doomsdayDate.put(Integer.valueOf(3), Integer.valueOf(14));\n        doomsdayDate.put(Integer.valueOf(4), Integer.valueOf(4));\n        doomsdayDate.put(Integer.valueOf(5), Integer.valueOf(9));\n        doomsdayDate.put(Integer.valueOf(6), Integer.valueOf(6));\n        doomsdayDate.put(Integer.valueOf(7), Integer.valueOf(4));\n        doomsdayDate.put(Integer.valueOf(8), Integer.valueOf(8));\n        doomsdayDate.put(Integer.valueOf(9), Integer.valueOf(5));\n        doomsdayDate.put(Integer.valueOf(10), Integer.valueOf(10));\n        doomsdayDate.put(Integer.valueOf(11), Integer.valueOf(7));\n        doomsdayDate.put(Integer.valueOf(12), Integer.valueOf(12));\n\n        long time = System.currentTimeMillis();\n        for (int i = 0; i &lt; 100000; i++) {\n\n            //Get a random date\n            int year = 1583 + new Random().nextInt(500);\n            int month = 1 + new Random().nextInt(12);\n            int day = 1 + new Random().nextInt(7);\n\n            //Get anchor day and DoomsDay for current date\n            int twoDigitsYear = (year % 100);\n            int century = year - twoDigitsYear;\n            int adForCentury = getADCentury(century);\n            int dd = ((int) twoDigitsYear / 12) + twoDigitsYear % 12 + (int) ((twoDigitsYear % 12) / 4);\n\n            //Get the gap between current date and a reference DoomsDay date\n            int referenceDay = doomsdayDate.get(month);\n            int gap = (day - referenceDay) % 7;\n\n            int result = (gap + adForCentury + dd) % 7;\n\n            if(result&lt;0){\n                result*=-1;\n            }\n            String dayDate= weekdays[(result + 1) % 8];\n            //System.out.println(\"day:\" + dayDate);\n        }\n        System.out.println(\"time (ms) : \" + (System.currentTimeMillis() - time)); //time (ms) : 80\n\n         time = System.currentTimeMillis();\n        for (int i = 0; i &lt; 100000; i++) {\n            Calendar c = Calendar.getInstance();\n            //I should have used random date here too, but it's already slower this way\n            c.setTime(new SimpleDateFormat(\"dd/MM/yyyy\").parse(\"12/04/1861\"));\n//            System.out.println(new SimpleDateFormat(\"EE\").format(c.getTime()));\n            int result2 = c.get(Calendar.DAY_OF_WEEK);\n//            System.out.println(\"day idx :\"+ result2);\n        }\n        System.out.println(\"time (ms) : \" + (System.currentTimeMillis() - time)); //time (ms) : 884\n    }\n\n    public static int getADCentury(int century) {\n        for (Map.Entry&lt;Integer, ArrayList&lt;Integer&gt;&gt; entry : anchorDaysMap.entrySet()) {\n            if (entry.getValue().contains(Integer.valueOf(century))) {\n                return entry.getKey();\n            }\n        }\n        return 0;\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":322981,"reputation":310745,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"down_vote_count":0,"up_vote_count":27,"is_accepted":false,"score":27,"last_activity_date":1509746309,"creation_date":1412799627,"answer_id":26265701,"question_id":5270272,"body_markdown":"# tl;dr\r\n\r\nUsing [java.time][1]‚Ä¶\r\n\r\n    LocalDate.parse(                               // Generate `LocalDate` object from String input.\r\n                 &quot;23/2/2010&quot; ,\r\n                 DateTimeFormatter.ofPattern( &quot;d/M/uuuu&quot; ) \r\n             )                                    \r\n             .getDayOfWeek()                       // Get `DayOfWeek` enum object.\r\n             .getDisplayName(                      // Localize. Generate a String to represent this day-of-week.\r\n                 TextStyle.SHORT_STANDALONE ,      // How long or abbreviated. Some languages have an alternate spelling for &quot;standalone&quot; use (not so in English).\r\n                 Locale.US                         // Or Locale.CANADA_FRENCH and such. Specify a `Locale` to determine (1) human language for translation, and (2) cultural norms for abbreviation, punctuation, etc.\r\n             ) \r\n\r\n&gt;Tue\r\n\r\nSee this [code run live at IdeOne.com][2] (but only `Locale.US` works there).\r\n\r\n\r\n# java.time\r\n\r\nSee my example code above, and see the [correct Answer for java.time by Przemek](https://stackoverflow.com/a/33895008/642706).\r\n\r\n\r\n## Ordinal number\r\n\r\n&gt;if just the day ordinal is desired, how can that be retrieved?\r\n\r\nFor ordinal number, consider passing around the [`DayOfWeek`][4] enum object instead such as [`DayOfWeek.TUESDAY`][5]. Keep in mind that a `DayOfWeek` is a smart object, not just a string or mere integer number. [Using those enum objects][6] makes your code more self-documenting, ensures valid values, and provides [type-safety][7]. \r\n\r\nBut if you insist, [ask `DayOfWeek` for a number][8]. You get 1-7 for Monday-Sunday per the [ISO 8601][3] standard.\r\n\r\n    int ordinal = myLocalDate.getDayOfWeek().getValue() ;\r\n\r\n\r\n----------\r\n\r\n\r\n# Joda-Time\r\n\r\n**UPDATE:** The Joda-Time project is now in maintenance mode. The team advises migrating to the java.time classes. The java.time framework is built into Java 8 (as well as [back-ported to Java 6 &amp; 7][9] and [further adapted to Android][10]). \r\n\r\nHere is example code using the [Joda-Time][11] library version 2.4, as mentioned in the [accepted answer by Bozho][12]. Joda-Time is far superior to the java.util.Date/.Calendar classes bundled with Java.\r\n\r\n## `LocalDate`\r\n\r\nJoda-Time offers the [`LocalDate`][13] class to represent a date-only without any time-of-day or time zone. Just what this Question calls for. The old java.util.Date/.Calendar classes bundled with Java lack this concept.\r\n\r\n## Parse\r\n\r\nParse the string into a date value.\r\n\r\n    String input = &quot;23/2/2010&quot;;\r\n    DateTimeFormatter formatter = DateTimeFormat.forPattern( &quot;d/M/yyyy&quot; );\r\n    LocalDate localDate = formatter.parseLocalDate( input );\r\n\r\n## Extract \r\n\r\nExtract from the date value the day of week number and name. \r\n\r\n    int dayOfWeek = localDate.getDayOfWeek(); // Follows ISO 8601 standard, where Monday = 1, Sunday = 7.\r\n    Locale locale = Locale.US;  // Locale specifies the human language to use in determining day-of-week name (Tuesday in English versus Mardi in French).\r\n    DateTimeFormatter formatterOutput = DateTimeFormat.forPattern( &quot;E&quot; ).withLocale( locale );\r\n    String output = formatterOutput.print( localDate ); // &#39;E&#39; is code for abbreviation of day-of-week name. See Joda-Time doc.\r\n    String outputQu&#233;b&#233;cois = formatterOutput.withLocale( Locale.CANADA_FRENCH ).print( localDate );\r\n\r\n\r\n## Dump\r\n\r\nDump to console.\r\n\r\n    System.out.println( &quot;input: &quot; + input );\r\n    System.out.println( &quot;localDate: &quot; + localDate ); // Defaults to ISO 8601 formatted strings.\r\n    System.out.println( &quot;dayOfWeek: &quot; + dayOfWeek );\r\n    System.out.println( &quot;output: &quot; + output );\r\n    System.out.println( &quot;outputQu&#233;b&#233;cois: &quot; + outputQu&#233;b&#233;cois );\r\n\r\n## Run\r\n\r\nWhen run.\r\n\r\n&lt;!-- language: lang-none --&gt;\r\n\r\n    input: 23/2/2010\r\n    localDate: 2010-02-23\r\n    dayOfWeek: 2\r\n    output: Tue\r\n    outputQu&#233;b&#233;cois: mar.\r\n\r\n\r\n----------\r\n\r\n# About java.time\r\n\r\nThe [java.time](http://docs.oracle.com/javase/8/docs/api/java/time/package-summary.html) framework is built into Java 8 and later. These classes supplant the troublesome old [legacy](https://en.wikipedia.org/wiki/Legacy_system) date-time classes such as [`java.util.Date`](https://docs.oracle.com/javase/8/docs/api/java/util/Date.html), [`Calendar`](https://docs.oracle.com/javase/8/docs/api/java/util/Calendar.html), &amp; [`SimpleDateFormat`](http://docs.oracle.com/javase/8/docs/api/java/text/SimpleDateFormat.html).\r\n\r\nThe [Joda-Time](http://www.joda.org/joda-time/) project, now in [maintenance mode](https://en.wikipedia.org/wiki/Maintenance_mode), advises migration to the [java.time](http://docs.oracle.com/javase/8/docs/api/java/time/package-summary.html) classes.\r\n\r\nTo learn more, see the [Oracle Tutorial](http://docs.oracle.com/javase/tutorial/datetime/TOC.html). And search Stack Overflow for many examples and explanations. Specification is [JSR 310](https://jcp.org/en/jsr/detail?id=310).\r\n\r\nWhere to obtain the java.time classes? \r\n\r\n - [**Java SE 8**](https://en.wikipedia.org/wiki/Java_version_history#Java_SE_8), [**Java SE 9**](https://en.wikipedia.org/wiki/Java_version_history#Java_SE_9), and later\r\n  - Built-in. \r\n  - Part of the standard Java API with a bundled implementation.\r\n  - Java 9 adds some minor features and fixes.\r\n - [**Java SE 6**](https://en.wikipedia.org/wiki/Java_version_history#Java_SE_6) and [**Java SE 7**](https://en.wikipedia.org/wiki/Java_version_history#Java_SE_7)\r\n  - Much of the java.time functionality is back-ported to Java 6 &amp; 7 in [***ThreeTen-Backport***](http://www.threeten.org/threetenbp/).\r\n - [**Android**](https://en.wikipedia.org/wiki/Android_(operating_system))\r\n  - The [***ThreeTenABP***](https://github.com/JakeWharton/ThreeTenABP) project adapts *ThreeTen-Backport* (mentioned above) for Android specifically.\r\n  - See [*How to use ThreeTenABP‚Ä¶*](http://stackoverflow.com/q/38922754/642706).\r\n\r\nThe [**ThreeTen-Extra**](http://www.threeten.org/threeten-extra/) project extends java.time with additional classes. This project is a proving ground for possible future additions to java.time. You may find some useful classes here such as [`Interval`](http://www.threeten.org/threeten-extra/apidocs/org/threeten/extra/Interval.html), [`YearWeek`](http://www.threeten.org/threeten-extra/apidocs/org/threeten/extra/YearWeek.html), [`YearQuarter`](http://www.threeten.org/threeten-extra/apidocs/org/threeten/extra/YearQuarter.html), and [more](http://www.threeten.org/threeten-extra/apidocs/index.html).\r\n\r\n\r\n  [1]: https://docs.oracle.com/javase/9/docs/api/java/time/package-summary.html\r\n  [2]: https://www.ideone.com/YZoZHd\r\n  [3]: https://en.wikipedia.org/wiki/ISO_8601\r\n  [4]: https://docs.oracle.com/javase/9/docs/api/java/time/DayOfWeek.html\r\n  [5]: https://docs.oracle.com/javase/9/docs/api/java/time/DayOfWeek.html#TUESDAY\r\n  [6]: https://docs.oracle.com/javase/tutorial/java/javaOO/enum.html\r\n  [7]: https://en.wikipedia.org/wiki/Type_safety\r\n  [8]: https://docs.oracle.com/javase/9/docs/api/java/time/DayOfWeek.html#valueOf-java.lang.String-\r\n  [9]: http://www.threeten.org/threetenbp/\r\n  [10]: https://github.com/JakeWharton/ThreeTenABP\r\n  [11]: http://www.joda.org/joda-time/\r\n  [12]: https://stackoverflow.com/a/5270292/642706\r\n  [13]: http://www.joda.org/joda-time/apidocs/org/joda/time/LocalDate.html","title":"How to determine day of week by passing specific date?","body":"<h1>tl;dr</h1>\n\n<p>Using <a href=\"https://docs.oracle.com/javase/9/docs/api/java/time/package-summary.html\" rel=\"noreferrer\">java.time</a>‚Ä¶</p>\n\n<pre><code>LocalDate.parse(                               // Generate `LocalDate` object from String input.\n             \"23/2/2010\" ,\n             DateTimeFormatter.ofPattern( \"d/M/uuuu\" ) \n         )                                    \n         .getDayOfWeek()                       // Get `DayOfWeek` enum object.\n         .getDisplayName(                      // Localize. Generate a String to represent this day-of-week.\n             TextStyle.SHORT_STANDALONE ,      // How long or abbreviated. Some languages have an alternate spelling for \"standalone\" use (not so in English).\n             Locale.US                         // Or Locale.CANADA_FRENCH and such. Specify a `Locale` to determine (1) human language for translation, and (2) cultural norms for abbreviation, punctuation, etc.\n         ) \n</code></pre>\n\n<blockquote>\n  <p>Tue</p>\n</blockquote>\n\n<p>See this <a href=\"https://www.ideone.com/YZoZHd\" rel=\"noreferrer\">code run live at IdeOne.com</a> (but only <code>Locale.US</code> works there).</p>\n\n<h1>java.time</h1>\n\n<p>See my example code above, and see the <a href=\"https://stackoverflow.com/a/33895008/642706\">correct Answer for java.time by Przemek</a>.</p>\n\n<h2>Ordinal number</h2>\n\n<blockquote>\n  <p>if just the day ordinal is desired, how can that be retrieved?</p>\n</blockquote>\n\n<p>For ordinal number, consider passing around the <a href=\"https://docs.oracle.com/javase/9/docs/api/java/time/DayOfWeek.html\" rel=\"noreferrer\"><code>DayOfWeek</code></a> enum object instead such as <a href=\"https://docs.oracle.com/javase/9/docs/api/java/time/DayOfWeek.html#TUESDAY\" rel=\"noreferrer\"><code>DayOfWeek.TUESDAY</code></a>. Keep in mind that a <code>DayOfWeek</code> is a smart object, not just a string or mere integer number. <a href=\"https://docs.oracle.com/javase/tutorial/java/javaOO/enum.html\" rel=\"noreferrer\">Using those enum objects</a> makes your code more self-documenting, ensures valid values, and provides <a href=\"https://en.wikipedia.org/wiki/Type_safety\" rel=\"noreferrer\">type-safety</a>. </p>\n\n<p>But if you insist, <a href=\"https://docs.oracle.com/javase/9/docs/api/java/time/DayOfWeek.html#valueOf-java.lang.String-\" rel=\"noreferrer\">ask <code>DayOfWeek</code> for a number</a>. You get 1-7 for Monday-Sunday per the <a href=\"https://en.wikipedia.org/wiki/ISO_8601\" rel=\"noreferrer\">ISO 8601</a> standard.</p>\n\n<pre><code>int ordinal = myLocalDate.getDayOfWeek().getValue() ;\n</code></pre>\n\n<hr>\n\n<h1>Joda-Time</h1>\n\n<p><strong>UPDATE:</strong> The Joda-Time project is now in maintenance mode. The team advises migrating to the java.time classes. The java.time framework is built into Java 8 (as well as <a href=\"http://www.threeten.org/threetenbp/\" rel=\"noreferrer\">back-ported to Java 6 &amp; 7</a> and <a href=\"https://github.com/JakeWharton/ThreeTenABP\" rel=\"noreferrer\">further adapted to Android</a>). </p>\n\n<p>Here is example code using the <a href=\"http://www.joda.org/joda-time/\" rel=\"noreferrer\">Joda-Time</a> library version 2.4, as mentioned in the <a href=\"https://stackoverflow.com/a/5270292/642706\">accepted answer by Bozho</a>. Joda-Time is far superior to the java.util.Date/.Calendar classes bundled with Java.</p>\n\n<h2><code>LocalDate</code></h2>\n\n<p>Joda-Time offers the <a href=\"http://www.joda.org/joda-time/apidocs/org/joda/time/LocalDate.html\" rel=\"noreferrer\"><code>LocalDate</code></a> class to represent a date-only without any time-of-day or time zone. Just what this Question calls for. The old java.util.Date/.Calendar classes bundled with Java lack this concept.</p>\n\n<h2>Parse</h2>\n\n<p>Parse the string into a date value.</p>\n\n<pre><code>String input = \"23/2/2010\";\nDateTimeFormatter formatter = DateTimeFormat.forPattern( \"d/M/yyyy\" );\nLocalDate localDate = formatter.parseLocalDate( input );\n</code></pre>\n\n<h2>Extract</h2>\n\n<p>Extract from the date value the day of week number and name. </p>\n\n<pre><code>int dayOfWeek = localDate.getDayOfWeek(); // Follows ISO 8601 standard, where Monday = 1, Sunday = 7.\nLocale locale = Locale.US;  // Locale specifies the human language to use in determining day-of-week name (Tuesday in English versus Mardi in French).\nDateTimeFormatter formatterOutput = DateTimeFormat.forPattern( \"E\" ).withLocale( locale );\nString output = formatterOutput.print( localDate ); // 'E' is code for abbreviation of day-of-week name. See Joda-Time doc.\nString outputQu√©b√©cois = formatterOutput.withLocale( Locale.CANADA_FRENCH ).print( localDate );\n</code></pre>\n\n<h2>Dump</h2>\n\n<p>Dump to console.</p>\n\n<pre><code>System.out.println( \"input: \" + input );\nSystem.out.println( \"localDate: \" + localDate ); // Defaults to ISO 8601 formatted strings.\nSystem.out.println( \"dayOfWeek: \" + dayOfWeek );\nSystem.out.println( \"output: \" + output );\nSystem.out.println( \"outputQu√©b√©cois: \" + outputQu√©b√©cois );\n</code></pre>\n\n<h2>Run</h2>\n\n<p>When run.</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>input: 23/2/2010\nlocalDate: 2010-02-23\ndayOfWeek: 2\noutput: Tue\noutputQu√©b√©cois: mar.\n</code></pre>\n\n<hr>\n\n<h1>About java.time</h1>\n\n<p>The <a href=\"http://docs.oracle.com/javase/8/docs/api/java/time/package-summary.html\" rel=\"noreferrer\">java.time</a> framework is built into Java 8 and later. These classes supplant the troublesome old <a href=\"https://en.wikipedia.org/wiki/Legacy_system\" rel=\"noreferrer\">legacy</a> date-time classes such as <a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/Date.html\" rel=\"noreferrer\"><code>java.util.Date</code></a>, <a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/Calendar.html\" rel=\"noreferrer\"><code>Calendar</code></a>, &amp; <a href=\"http://docs.oracle.com/javase/8/docs/api/java/text/SimpleDateFormat.html\" rel=\"noreferrer\"><code>SimpleDateFormat</code></a>.</p>\n\n<p>The <a href=\"http://www.joda.org/joda-time/\" rel=\"noreferrer\">Joda-Time</a> project, now in <a href=\"https://en.wikipedia.org/wiki/Maintenance_mode\" rel=\"noreferrer\">maintenance mode</a>, advises migration to the <a href=\"http://docs.oracle.com/javase/8/docs/api/java/time/package-summary.html\" rel=\"noreferrer\">java.time</a> classes.</p>\n\n<p>To learn more, see the <a href=\"http://docs.oracle.com/javase/tutorial/datetime/TOC.html\" rel=\"noreferrer\">Oracle Tutorial</a>. And search Stack Overflow for many examples and explanations. Specification is <a href=\"https://jcp.org/en/jsr/detail?id=310\" rel=\"noreferrer\">JSR 310</a>.</p>\n\n<p>Where to obtain the java.time classes? </p>\n\n<ul>\n<li><a href=\"https://en.wikipedia.org/wiki/Java_version_history#Java_SE_8\" rel=\"noreferrer\"><strong>Java SE 8</strong></a>, <a href=\"https://en.wikipedia.org/wiki/Java_version_history#Java_SE_9\" rel=\"noreferrer\"><strong>Java SE 9</strong></a>, and later\n\n<ul>\n<li>Built-in. </li>\n<li>Part of the standard Java API with a bundled implementation.</li>\n<li>Java 9 adds some minor features and fixes.</li>\n</ul></li>\n<li><a href=\"https://en.wikipedia.org/wiki/Java_version_history#Java_SE_6\" rel=\"noreferrer\"><strong>Java SE 6</strong></a> and <a href=\"https://en.wikipedia.org/wiki/Java_version_history#Java_SE_7\" rel=\"noreferrer\"><strong>Java SE 7</strong></a>\n\n<ul>\n<li>Much of the java.time functionality is back-ported to Java 6 &amp; 7 in <a href=\"http://www.threeten.org/threetenbp/\" rel=\"noreferrer\"><strong><em>ThreeTen-Backport</em></strong></a>.</li>\n</ul></li>\n<li><a href=\"https://en.wikipedia.org/wiki/Android_(operating_system)\" rel=\"noreferrer\"><strong>Android</strong></a>\n\n<ul>\n<li>The <a href=\"https://github.com/JakeWharton/ThreeTenABP\" rel=\"noreferrer\"><strong><em>ThreeTenABP</em></strong></a> project adapts <em>ThreeTen-Backport</em> (mentioned above) for Android specifically.</li>\n<li>See <a href=\"http://stackoverflow.com/q/38922754/642706\"><em>How to use ThreeTenABP‚Ä¶</em></a>.</li>\n</ul></li>\n</ul>\n\n<p>The <a href=\"http://www.threeten.org/threeten-extra/\" rel=\"noreferrer\"><strong>ThreeTen-Extra</strong></a> project extends java.time with additional classes. This project is a proving ground for possible future additions to java.time. You may find some useful classes here such as <a href=\"http://www.threeten.org/threeten-extra/apidocs/org/threeten/extra/Interval.html\" rel=\"noreferrer\"><code>Interval</code></a>, <a href=\"http://www.threeten.org/threeten-extra/apidocs/org/threeten/extra/YearWeek.html\" rel=\"noreferrer\"><code>YearWeek</code></a>, <a href=\"http://www.threeten.org/threeten-extra/apidocs/org/threeten/extra/YearQuarter.html\" rel=\"noreferrer\"><code>YearQuarter</code></a>, and <a href=\"http://www.threeten.org/threeten-extra/apidocs/index.html\" rel=\"noreferrer\">more</a>.</p>\n"},{"tags":[],"owner":{"account_id":3635036,"reputation":1118,"user_id":3030340,"display_name":"Az.MaYo"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1428495162,"creation_date":1428495162,"answer_id":29514282,"question_id":5270272,"body_markdown":"    private String getDay(Date date){\r\n\t\t\r\n\t\tSimpleDateFormat simpleDateFormat = new SimpleDateFormat(&quot;EEEE&quot;);\r\n\t\t//System.out.println(&quot;DAY &quot;+simpleDateFormat.format(date).toUpperCase());\t\t\t\t\t\t\r\n\t\treturn simpleDateFormat.format(date).toUpperCase();\r\n\t}\r\n\t\r\n\tprivate String getDay(String dateStr){\r\n\t\t//dateStr must be in DD-MM-YYYY Formate\r\n\t\tDate date = null;\r\n\t\tString day=null;\r\n\t\t\r\n\t\ttry {\r\n\t\t\tdate = new SimpleDateFormat(&quot;DD-MM-YYYY&quot;).parse(dateStr);\r\n\t\t\t\r\n\t\t\tSimpleDateFormat simpleDateFormat = new SimpleDateFormat(&quot;EEEE&quot;);\r\n\t\t\t//System.out.println(&quot;DAY &quot;+simpleDateFormat.format(date).toUpperCase());\r\n\t\t\tday = simpleDateFormat.format(date).toUpperCase();\r\n\t\t\t\r\n\t\t\t\r\n\t\t} catch (ParseException e) {\r\n\t\t\t// TODO Auto-generated catch block\r\n\t\t\te.printStackTrace();\r\n\t\t}\r\n\t\t\r\n\t\t\r\n\t\treturn day;\r\n\t}","title":"How to determine day of week by passing specific date?","body":"<pre><code>private String getDay(Date date){\n\n    SimpleDateFormat simpleDateFormat = new SimpleDateFormat(\"EEEE\");\n    //System.out.println(\"DAY \"+simpleDateFormat.format(date).toUpperCase());                       \n    return simpleDateFormat.format(date).toUpperCase();\n}\n\nprivate String getDay(String dateStr){\n    //dateStr must be in DD-MM-YYYY Formate\n    Date date = null;\n    String day=null;\n\n    try {\n        date = new SimpleDateFormat(\"DD-MM-YYYY\").parse(dateStr);\n\n        SimpleDateFormat simpleDateFormat = new SimpleDateFormat(\"EEEE\");\n        //System.out.println(\"DAY \"+simpleDateFormat.format(date).toUpperCase());\n        day = simpleDateFormat.format(date).toUpperCase();\n\n\n    } catch (ParseException e) {\n        // TODO Auto-generated catch block\n        e.printStackTrace();\n    }\n\n\n    return day;\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2248845,"reputation":7211,"user_id":1981559,"accept_rate":100,"display_name":"Przemek"},"down_vote_count":0,"up_vote_count":24,"is_accepted":false,"score":24,"last_activity_date":1535439499,"creation_date":1448371790,"answer_id":33895008,"question_id":5270272,"body_markdown":"# java.time\r\n\r\nUsing [`java.time`][1] framework built into Java 8 and later.\r\n\r\nThe [`DayOfWeek`][2] [enum][3] can generate a String of the day‚Äôs name automatically localized to the human language and cultural norms of a [`Locale`][4]. Specify a [`TextStyle`][5] to indicate you want long form or abbreviated name.\r\n\r\n    import java.time.LocalDate\r\n    import java.time.format.DateTimeFormatter\r\n    import java.time.format.TextStyle\r\n    import java.util.Locale\r\n    import java.time.DayOfWeek;\r\n\r\n    DateTimeFormatter formatter = DateTimeFormatter.ofPattern(&quot;d/M/yyyy&quot;);\r\n    LocalDate date = LocalDate.parse(&quot;23/2/2010&quot;, formatter); // LocalDate = 2010-02-23\r\n    DayOfWeek dow = date.getDayOfWeek();  // Extracts a `DayOfWeek` enum object.\r\n    String output = dow.getDisplayName(TextStyle.SHORT, Locale.US); // String = Tue\r\n\r\n\r\n  [1]: http://docs.oracle.com/javase/8/docs/api/java/time/package-summary.html\r\n  [2]: https://docs.oracle.com/javase/8/docs/api/java/time/DayOfWeek.html\r\n  [3]: http://docs.oracle.com/javase/tutorial/java/javaOO/enum.html\r\n  [4]: http://docs.oracle.com/javase/8/docs/api/java/util/Locale.html\r\n  [5]: https://docs.oracle.com/javase/8/docs/api/java/time/format/TextStyle.html","title":"How to determine day of week by passing specific date?","body":"<h1>java.time</h1>\n\n<p>Using <a href=\"http://docs.oracle.com/javase/8/docs/api/java/time/package-summary.html\" rel=\"noreferrer\"><code>java.time</code></a> framework built into Java 8 and later.</p>\n\n<p>The <a href=\"https://docs.oracle.com/javase/8/docs/api/java/time/DayOfWeek.html\" rel=\"noreferrer\"><code>DayOfWeek</code></a> <a href=\"http://docs.oracle.com/javase/tutorial/java/javaOO/enum.html\" rel=\"noreferrer\">enum</a> can generate a String of the day‚Äôs name automatically localized to the human language and cultural norms of a <a href=\"http://docs.oracle.com/javase/8/docs/api/java/util/Locale.html\" rel=\"noreferrer\"><code>Locale</code></a>. Specify a <a href=\"https://docs.oracle.com/javase/8/docs/api/java/time/format/TextStyle.html\" rel=\"noreferrer\"><code>TextStyle</code></a> to indicate you want long form or abbreviated name.</p>\n\n<pre><code>import java.time.LocalDate\nimport java.time.format.DateTimeFormatter\nimport java.time.format.TextStyle\nimport java.util.Locale\nimport java.time.DayOfWeek;\n\nDateTimeFormatter formatter = DateTimeFormatter.ofPattern(\"d/M/yyyy\");\nLocalDate date = LocalDate.parse(\"23/2/2010\", formatter); // LocalDate = 2010-02-23\nDayOfWeek dow = date.getDayOfWeek();  // Extracts a `DayOfWeek` enum object.\nString output = dow.getDisplayName(TextStyle.SHORT, Locale.US); // String = Tue\n</code></pre>\n"},{"tags":[],"owner":{"account_id":375312,"reputation":91,"user_id":726062,"accept_rate":0,"display_name":"Amit"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1455113380,"creation_date":1451131233,"answer_id":34471142,"question_id":5270272,"body_markdown":"    Calendar cal = Calendar.getInstance(desired date);\r\n    cal.setTimeInMillis(System.currentTimeMillis());\r\n    int dayOfWeek = cal.get(Calendar.DAY_OF_WEEK);\r\n\r\nGet the day value by providing the current time stamp.","title":"How to determine day of week by passing specific date?","body":"<pre><code>Calendar cal = Calendar.getInstance(desired date);\ncal.setTimeInMillis(System.currentTimeMillis());\nint dayOfWeek = cal.get(Calendar.DAY_OF_WEEK);\n</code></pre>\n\n<p>Get the day value by providing the current time stamp.</p>\n"},{"tags":[],"owner":{"account_id":7199332,"reputation":29,"user_id":5497006,"display_name":"Ayarnish "},"down_vote_count":2,"up_vote_count":3,"is_accepted":false,"score":1,"last_activity_date":1455188240,"creation_date":1455188240,"answer_id":35337438,"question_id":5270272,"body_markdown":"    LocalDate date=LocalDate.now();\r\n    \r\n    System.out.println(date.getDayOfWeek());//prints THURSDAY\r\n    System.out.println(date.getDayOfWeek().getDisplayName(TextStyle.SHORT, Locale.US) );  //prints Thu   \r\n    java.time.DayOfWeek is a enum which returns the singleton instance for the day-of-week of the weekday of the date.","title":"How to determine day of week by passing specific date?","body":"<pre><code>LocalDate date=LocalDate.now();\n\nSystem.out.println(date.getDayOfWeek());//prints THURSDAY\nSystem.out.println(date.getDayOfWeek().getDisplayName(TextStyle.SHORT, Locale.US) );  //prints Thu   \njava.time.DayOfWeek is a enum which returns the singleton instance for the day-of-week of the weekday of the date.\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3202129,"reputation":585,"user_id":2703995,"accept_rate":43,"display_name":"SHB"},"down_vote_count":1,"up_vote_count":11,"is_accepted":false,"score":10,"last_activity_date":1466728197,"creation_date":1466719524,"answer_id":38002671,"question_id":5270272,"body_markdown":"You can try the following code:\r\n\r\n    import java.time.*;\r\n\r\n    public class Test{\r\n       public static void main(String[] args) {\r\n\t      DayOfWeek dow = LocalDate.of(2010,Month.FEBRUARY,23).getDayOfWeek();\r\n\t      String s = String.valueOf(dow);\r\n\t      System.out.println(String.format(&quot;%.3s&quot;,s));\r\n       }\r\n    }","title":"How to determine day of week by passing specific date?","body":"<p>You can try the following code:</p>\n\n<pre><code>import java.time.*;\n\npublic class Test{\n   public static void main(String[] args) {\n      DayOfWeek dow = LocalDate.of(2010,Month.FEBRUARY,23).getDayOfWeek();\n      String s = String.valueOf(dow);\n      System.out.println(String.format(\"%.3s\",s));\n   }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1432011,"reputation":91,"user_id":1354230,"display_name":"hitesh"},"down_vote_count":0,"up_vote_count":9,"is_accepted":false,"score":9,"last_activity_date":1473315950,"creation_date":1473315950,"answer_id":39383891,"question_id":5270272,"body_markdown":"    public class TryDateFormats {\r\n    \tpublic static void main(String[] args) throws ParseException {\r\n    \t\tString month = &quot;08&quot;;\r\n    \t\tString day = &quot;05&quot;;\r\n    \t\tString year = &quot;2015&quot;;\r\n    \t\tString inputDateStr = String.format(&quot;%s/%s/%s&quot;, day, month, year);\r\n    \t\tDate inputDate = new SimpleDateFormat(&quot;dd/MM/yyyy&quot;).parse(inputDateStr);\r\n    \t\tCalendar calendar = Calendar.getInstance();\r\n    \t\tcalendar.setTime(inputDate);\r\n    \t\tString dayOfWeek = calendar.getDisplayName(Calendar.DAY_OF_WEEK, Calendar.LONG, Locale.US).toUpperCase();\r\n    \t\tSystem.out.println(dayOfWeek);\r\n    \t}\r\n    }\r\n\r\n","title":"How to determine day of week by passing specific date?","body":"<pre><code>public class TryDateFormats {\n    public static void main(String[] args) throws ParseException {\n        String month = \"08\";\n        String day = \"05\";\n        String year = \"2015\";\n        String inputDateStr = String.format(\"%s/%s/%s\", day, month, year);\n        Date inputDate = new SimpleDateFormat(\"dd/MM/yyyy\").parse(inputDateStr);\n        Calendar calendar = Calendar.getInstance();\n        calendar.setTime(inputDate);\n        String dayOfWeek = calendar.getDisplayName(Calendar.DAY_OF_WEEK, Calendar.LONG, Locale.US).toUpperCase();\n        System.out.println(dayOfWeek);\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":9883946,"reputation":69,"user_id":7319069,"display_name":"Ramesh Thoutam"},"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1483086728,"creation_date":1483086728,"answer_id":41393098,"question_id":5270272,"body_markdown":"    ...\r\n    import java.time.LocalDate;\r\n    ...\r\n    //String month = in.next();\r\n    int mm = in.nextInt();\r\n    //String day = in.next();\r\n    int dd = in.nextInt();\r\n    //String year = in.next();\r\n    int yy = in.nextInt();\r\n    in.close();\r\n    LocalDate dt = LocalDate.of(yy, mm, dd);\r\n    System.out.print(dt.getDayOfWeek());","title":"How to determine day of week by passing specific date?","body":"<pre><code>...\nimport java.time.LocalDate;\n...\n//String month = in.next();\nint mm = in.nextInt();\n//String day = in.next();\nint dd = in.nextInt();\n//String year = in.next();\nint yy = in.nextInt();\nin.close();\nLocalDate dt = LocalDate.of(yy, mm, dd);\nSystem.out.print(dt.getDayOfWeek());\n</code></pre>\n"},{"tags":[],"owner":{"account_id":6413483,"reputation":1053,"user_id":4972367,"display_name":"Hardik Patel"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1509644469,"creation_date":1509643908,"answer_id":47081345,"question_id":5270272,"body_markdown":"You can use below method to get Day of the Week by passing a specific date,\r\n\r\n **Here for the set method of Calendar class, Tricky part is the index for the month parameter will starts from 0**.\r\n\r\n    public static String getDay(int day, int month, int year) {\r\n    \r\n            Calendar cal = Calendar.getInstance();\r\n            \r\n            if(month==1){\r\n                cal.set(year,0,day);\r\n            }else{\r\n                cal.set(year,month-1,day);\r\n            }\r\n            \r\n            int dow = cal.get(Calendar.DAY_OF_WEEK);\r\n            \r\n            switch (dow) {\r\n    \t\tcase 1:\r\n    \t\t\treturn &quot;SUNDAY&quot;;\r\n    \t\tcase 2:\r\n    \t\t\treturn &quot;MONDAY&quot;;\r\n    \t\tcase 3:\r\n    \t\t\treturn &quot;TUESDAY&quot;;\r\n    \t\tcase 4:\r\n    \t\t\treturn &quot;WEDNESDAY&quot;;\r\n    \t\tcase 5:\r\n    \t\t\treturn &quot;THURSDAY&quot;;\r\n    \t\tcase 6:\r\n    \t\t\treturn &quot;FRIDAY&quot;;\r\n    \t\tcase 7:\r\n    \t\t\treturn &quot;SATURDAY&quot;;\r\n    \t\tdefault:\r\n    \t\t\tSystem.out.println(&quot;GO To Hell....&quot;);\r\n    \t\t}\r\n            \r\n            return null;\r\n        }","title":"How to determine day of week by passing specific date?","body":"<p>You can use below method to get Day of the Week by passing a specific date,</p>\n\n<p><strong>Here for the set method of Calendar class, Tricky part is the index for the month parameter will starts from 0</strong>.</p>\n\n<pre><code>public static String getDay(int day, int month, int year) {\n\n        Calendar cal = Calendar.getInstance();\n\n        if(month==1){\n            cal.set(year,0,day);\n        }else{\n            cal.set(year,month-1,day);\n        }\n\n        int dow = cal.get(Calendar.DAY_OF_WEEK);\n\n        switch (dow) {\n        case 1:\n            return \"SUNDAY\";\n        case 2:\n            return \"MONDAY\";\n        case 3:\n            return \"TUESDAY\";\n        case 4:\n            return \"WEDNESDAY\";\n        case 5:\n            return \"THURSDAY\";\n        case 6:\n            return \"FRIDAY\";\n        case 7:\n            return \"SATURDAY\";\n        default:\n            System.out.println(\"GO To Hell....\");\n        }\n\n        return null;\n    }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":12165811,"reputation":31,"user_id":8882162,"display_name":"Noone"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1551882432,"creation_date":1509731154,"answer_id":47101682,"question_id":5270272,"body_markdown":"Program to find the day of the week by giving user input date month and year using `java.util.scanner` package:\r\n   \r\n    import java.util.Scanner;\r\n\r\n    public class Calender {\r\n        public static String getDay(String day, String month, String year) {\r\n\r\n            int ym, yp, d, ay, a = 0;\r\n            int by = 20;\r\n            int[] y = new int[]{6, 4, 2, 0};\r\n            int[] m = new int []{0, 3, 3, 6, 1, 4, 6, 2, 5, 0, 3, 5};\r\n\r\n            String[] wd = {&quot;Sunday&quot;, &quot;Monday&quot;, &quot;Tuesday&quot;, &quot;Wednesday&quot;, &quot;Thursday&quot;, &quot;Friday&quot;, &quot;Saturday&quot;};\r\n\r\n            int gd = Integer.parseInt(day);\r\n            int gm = Integer.parseInt(month);\r\n            int gy = Integer.parseInt(year);\r\n\r\n            ym = gy % 100;\r\n            yp = ym / 4;\r\n            ay = gy / 100;\r\n\r\n            while (ay != by) {\r\n                by = by + 1;\r\n                a = a + 1;\r\n\r\n                if(a == 4) {\r\n                    a = 0;\r\n                }\r\n            }\r\n\r\n            if ((ym % 4 == 0) &amp;&amp; (gm == 2)) {\r\n                d = (gd + m[gm - 1] + ym + yp + y[a] - 1) % 7;\r\n            } else\r\n                d = (gd + m[gm - 1] + ym + yp + y[a]) % 7;\r\n\r\n            return wd[d];\r\n        }\r\n\r\n        public static void main(String[] args) {\r\n\r\n            Scanner in = new Scanner(System.in);\r\n\r\n            String day = in.next();\r\n            String month = in.next();\r\n            String year = in.next();\r\n         \r\n            System.out.println(getDay(day, month, year));\r\n        }\r\n    }","title":"How to determine day of week by passing specific date?","body":"<p>Program to find the day of the week by giving user input date month and year using <code>java.util.scanner</code> package:</p>\n\n<pre><code>import java.util.Scanner;\n\npublic class Calender {\n    public static String getDay(String day, String month, String year) {\n\n        int ym, yp, d, ay, a = 0;\n        int by = 20;\n        int[] y = new int[]{6, 4, 2, 0};\n        int[] m = new int []{0, 3, 3, 6, 1, 4, 6, 2, 5, 0, 3, 5};\n\n        String[] wd = {\"Sunday\", \"Monday\", \"Tuesday\", \"Wednesday\", \"Thursday\", \"Friday\", \"Saturday\"};\n\n        int gd = Integer.parseInt(day);\n        int gm = Integer.parseInt(month);\n        int gy = Integer.parseInt(year);\n\n        ym = gy % 100;\n        yp = ym / 4;\n        ay = gy / 100;\n\n        while (ay != by) {\n            by = by + 1;\n            a = a + 1;\n\n            if(a == 4) {\n                a = 0;\n            }\n        }\n\n        if ((ym % 4 == 0) &amp;&amp; (gm == 2)) {\n            d = (gd + m[gm - 1] + ym + yp + y[a] - 1) % 7;\n        } else\n            d = (gd + m[gm - 1] + ym + yp + y[a]) % 7;\n\n        return wd[d];\n    }\n\n    public static void main(String[] args) {\n\n        Scanner in = new Scanner(System.in);\n\n        String day = in.next();\n        String month = in.next();\n        String year = in.next();\n\n        System.out.println(getDay(day, month, year));\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3023899,"reputation":207,"user_id":2564329,"display_name":"rab"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1513652319,"creation_date":1513652319,"answer_id":47879419,"question_id":5270272,"body_markdown":"Can use the following code snippet for input like (day = &quot;08&quot;,  month = &quot;05&quot;, year = &quot;2015&quot; and output will be &quot;WEDNESDAY&quot;)\r\n\r\n    Calendar calendar = Calendar.getInstance();\r\n    calendar.set(Calendar.DAY_OF_MONTH, Integer.parseInt(day));\r\n    calendar.set(Calendar.MONTH, (Integer.parseInt(month)-1));\r\n    calendar.set(Calendar.YEAR, Integer.parseInt(year));\r\n    String dayOfWeek = calendar.getDisplayName(Calendar.DAY_OF_WEEK, Calendar.LONG, Locale.US).toUpperCase();","title":"How to determine day of week by passing specific date?","body":"<p>Can use the following code snippet for input like (day = \"08\",  month = \"05\", year = \"2015\" and output will be \"WEDNESDAY\")</p>\n\n<pre><code>Calendar calendar = Calendar.getInstance();\ncalendar.set(Calendar.DAY_OF_MONTH, Integer.parseInt(day));\ncalendar.set(Calendar.MONTH, (Integer.parseInt(month)-1));\ncalendar.set(Calendar.YEAR, Integer.parseInt(year));\nString dayOfWeek = calendar.getDisplayName(Calendar.DAY_OF_WEEK, Calendar.LONG, Locale.US).toUpperCase();\n</code></pre>\n"},{"tags":[],"owner":{"account_id":6413483,"reputation":1053,"user_id":4972367,"display_name":"Hardik Patel"},"down_vote_count":3,"up_vote_count":0,"is_accepted":false,"score":-3,"last_activity_date":1514131532,"creation_date":1514131532,"answer_id":47962135,"question_id":5270272,"body_markdown":"**Below is the two line of snippet using Java 1.8 Time API for your Requirement.**\r\n\r\n    LocalDate localDate = LocalDate.of(Integer.valueOf(year),Integer.valueOf(month),Integer.valueOf(day));\r\n    String dayOfWeek = String.valueOf(localDate.getDayOfWeek());","title":"How to determine day of week by passing specific date?","body":"<p><strong>Below is the two line of snippet using Java 1.8 Time API for your Requirement.</strong></p>\n\n<pre><code>LocalDate localDate = LocalDate.of(Integer.valueOf(year),Integer.valueOf(month),Integer.valueOf(day));\nString dayOfWeek = String.valueOf(localDate.getDayOfWeek());\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1575780,"reputation":10830,"user_id":1462282,"accept_rate":100,"display_name":"Sahil Chhabra"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1517933331,"creation_date":1517933331,"answer_id":48647232,"question_id":5270272,"body_markdown":"One line answer:\r\n\r\n    return LocalDate.parse(&quot;06/02/2018&quot;,DateTimeFormatter.ofPattern(&quot;dd/MM/yyyy&quot;)).getDayOfWeek().name();\r\n    \r\n\r\nUsage Example:\r\n\r\n    public static String getDayOfWeek(String date){\r\n      return LocalDate.parse(date, DateTimeFormatter.ofPattern(&quot;dd/MM/yyyy&quot;)).getDayOfWeek().name();\r\n    }\r\n\r\n    public static void callerMethod(){\r\n       System.out.println(getDayOfWeek(&quot;06/02/2018&quot;)); //TUESDAY\r\n    }","title":"How to determine day of week by passing specific date?","body":"<p>One line answer:</p>\n\n<pre><code>return LocalDate.parse(\"06/02/2018\",DateTimeFormatter.ofPattern(\"dd/MM/yyyy\")).getDayOfWeek().name();\n</code></pre>\n\n<p>Usage Example:</p>\n\n<pre><code>public static String getDayOfWeek(String date){\n  return LocalDate.parse(date, DateTimeFormatter.ofPattern(\"dd/MM/yyyy\")).getDayOfWeek().name();\n}\n\npublic static void callerMethod(){\n   System.out.println(getDayOfWeek(\"06/02/2018\")); //TUESDAY\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2079767,"reputation":6300,"user_id":1852033,"accept_rate":77,"display_name":"Leo Ufimtsev"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1524164596,"creation_date":1524164596,"answer_id":49928433,"question_id":5270272,"body_markdown":"Calendar class has build-in displayName functionality:\r\n\r\n\r\n    Calendar.getInstance().getDisplayName(Calendar.DAY_OF_WEEK, Calendar.SHORT, Locale.getDefault()); // Thu   \r\n\r\n    Calendar.SHORT -&gt; Thu\r\n    Calendar.LONG_FORMAT -&gt; Thursday\r\n   \r\nAvailable since Java 1.6.  See also [Oracle documentation][1]\r\n\r\n\r\n  [1]: https://docs.oracle.com/javase/8/docs/api/java/util/Calendar.html#getDisplayName-int-int-java.util.Locale-","title":"How to determine day of week by passing specific date?","body":"<p>Calendar class has build-in displayName functionality:</p>\n\n<pre><code>Calendar.getInstance().getDisplayName(Calendar.DAY_OF_WEEK, Calendar.SHORT, Locale.getDefault()); // Thu   \n\nCalendar.SHORT -&gt; Thu\nCalendar.LONG_FORMAT -&gt; Thursday\n</code></pre>\n\n<p>Available since Java 1.6.  See also <a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/Calendar.html#getDisplayName-int-int-java.util.Locale-\" rel=\"nofollow noreferrer\">Oracle documentation</a></p>\n"},{"tags":[],"owner":{"account_id":13947020,"reputation":11,"user_id":10071531,"display_name":"Abhishek"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1531408986,"creation_date":1531408986,"answer_id":51309369,"question_id":5270272,"body_markdown":"    //to get day of any date\r\n    \r\n    import java.util.Scanner; \r\n    import java.util.Calendar; \r\n    import java.util.Date;\r\n    \r\n    public class Show {\r\n    \r\n    \tpublic static String getDay(String day,String month, String year){\r\n    \r\n    \r\n        \t\tString input_date = month+&quot;/&quot;+day+&quot;/&quot;+year;\r\n    \r\n        \t\tDate now = new Date(input_date);\r\n        \t\tCalendar calendar = Calendar.getInstance();\r\n        \t\tcalendar.setTime(now);\r\n        \t\tint final_day = (calendar.get(Calendar.DAY_OF_WEEK));\r\n    \r\n        \t\tString finalDay[]={&quot;SUNDAY&quot;,&quot;MONDAY&quot;,&quot;TUESDAY&quot;,&quot;WEDNESDAY&quot;,&quot;THURSDAY&quot;,&quot;FRIDAY&quot;,&quot;SATURDAY&quot;};\r\n    \r\n        \t\tSystem.out.println(finalDay[final_day-1]);\r\n    \r\n    \t}\r\n    \r\n    \tpublic static void main(String[] args) { \r\n        \t\tScanner in = new Scanner(System.in); \r\n        \t\tString month = in.next(); \r\n    \t\tString day = in.next();\r\n        \t\tString year = in.next();\r\n    \r\n        \t\tgetDay(day, month, year);\r\n    \t}\r\n    \r\n    }","title":"How to determine day of week by passing specific date?","body":"<pre><code>//to get day of any date\n\nimport java.util.Scanner; \nimport java.util.Calendar; \nimport java.util.Date;\n\npublic class Show {\n\n    public static String getDay(String day,String month, String year){\n\n\n            String input_date = month+\"/\"+day+\"/\"+year;\n\n            Date now = new Date(input_date);\n            Calendar calendar = Calendar.getInstance();\n            calendar.setTime(now);\n            int final_day = (calendar.get(Calendar.DAY_OF_WEEK));\n\n            String finalDay[]={\"SUNDAY\",\"MONDAY\",\"TUESDAY\",\"WEDNESDAY\",\"THURSDAY\",\"FRIDAY\",\"SATURDAY\"};\n\n            System.out.println(finalDay[final_day-1]);\n\n    }\n\n    public static void main(String[] args) { \n            Scanner in = new Scanner(System.in); \n            String month = in.next(); \n        String day = in.next();\n            String year = in.next();\n\n            getDay(day, month, year);\n    }\n\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":9444600,"reputation":107,"user_id":7203730,"display_name":"Spriha"},"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1551789742,"creation_date":1531649303,"answer_id":51347348,"question_id":5270272,"body_markdown":"Adding another way of doing it exactly what the OP asked for, without using latest inbuilt methods:\r\n\r\n\r\n    public static String getDay(String inputDate) {\r\n        String dayOfWeek = null;\r\n        String[] days = new String[]{&quot;Mon&quot;, &quot;Tue&quot;, &quot;Wed&quot;, &quot;Thu&quot;, &quot;Fri&quot;, &quot;Sat&quot;, &quot;Sun&quot;};\r\n\r\n        try {\r\n            SimpleDateFormat format1 = new SimpleDateFormat(&quot;dd/MM/yyyy&quot;);\r\n            Date dt1 = format1.parse(inputDate);\r\n            dayOfWeek = days[dt1.getDay() - 1];\r\n        } catch(Exception e) {\r\n            System.out.println(e);\r\n        }\r\n\r\n        return dayOfWeek;\r\n    }","title":"How to determine day of week by passing specific date?","body":"<p>Adding another way of doing it exactly what the OP asked for, without using latest inbuilt methods:</p>\n\n<pre><code>public static String getDay(String inputDate) {\n    String dayOfWeek = null;\n    String[] days = new String[]{\"Mon\", \"Tue\", \"Wed\", \"Thu\", \"Fri\", \"Sat\", \"Sun\"};\n\n    try {\n        SimpleDateFormat format1 = new SimpleDateFormat(\"dd/MM/yyyy\");\n        Date dt1 = format1.parse(inputDate);\n        dayOfWeek = days[dt1.getDay() - 1];\n    } catch(Exception e) {\n        System.out.println(e);\n    }\n\n    return dayOfWeek;\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":9366175,"reputation":189,"user_id":8151896,"display_name":"Ravi Solanki"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1538292048,"creation_date":1538292048,"answer_id":52575601,"question_id":5270272,"body_markdown":"There is a challenge on hackerrank [Java Date and Time ][1]\n\npersonally, I prefer the LocalDate class.\n\n 1. Import java.time.LocalDate\n 2. Retrieve localDate by using &quot;of&quot; method which takes 3 arguments in\n    &quot;int&quot; format.\n 3. finally, get the name of that day using &quot;getDayOfWeek&quot; method.\n\nThere is one video on this challenge. \n\n [Java Date and Time Hackerrank solution][2]\n\nI hope it will help :)\n\n  [1]: https://www.hackerrank.com/challenges/java-date-and-time/problem\n  [2]: https://www.youtube.com/watch?v=6eiN_1P0Hk8&amp;lc=Ugxd6MOR80mcO7XjU_R4AaABAg","title":"How to determine day of week by passing specific date?","body":"<p>There is a challenge on hackerrank <a href=\"https://www.hackerrank.com/challenges/java-date-and-time/problem\" rel=\"nofollow noreferrer\">Java Date and Time </a></p>\n<p>personally, I prefer the LocalDate class.</p>\n<ol>\n<li>Import java.time.LocalDate</li>\n<li>Retrieve localDate by using &quot;of&quot; method which takes 3 arguments in\n&quot;int&quot; format.</li>\n<li>finally, get the name of that day using &quot;getDayOfWeek&quot; method.</li>\n</ol>\n<p>There is one video on this challenge.</p>\n<p><a href=\"https://www.youtube.com/watch?v=6eiN_1P0Hk8&amp;lc=Ugxd6MOR80mcO7XjU_R4AaABAg\" rel=\"nofollow noreferrer\">Java Date and Time Hackerrank solution</a></p>\n<p>I hope it will help :)</p>\n"},{"tags":[],"owner":{"account_id":11897952,"reputation":1170,"user_id":8706759,"display_name":"Ganesh Chowdhary Sadanala"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1551698187,"creation_date":1542524536,"answer_id":53358627,"question_id":5270272,"body_markdown":"This works correctly...\r\n\r\n    java.time.LocalDate; //package related to time and date\r\n\r\nIt provides inbuilt method getDayOfWeek() to get the day of a particular week:\r\n\r\n    int t;\r\n    Scanner s = new Scanner(System.in);\r\n    t = s.nextInt();\r\n    s.nextLine();\r\n     while(t--&gt;0) { \r\n        int d, m, y;\r\n        String ss = s.nextLine();\r\n        String []sss = ss.split(&quot; &quot;);\r\n        d=Integer.parseInt(sss[0]);\r\n        m = Integer.parseInt(sss[1]);\r\n        y = Integer.parseInt(sss[2]);\r\n\r\n        LocalDate l = LocalDate.of(y, m, d); //method to get the localdate instance\r\n        System.out.println(l.getDayOfWeek()); //this returns the enum DayOfWeek\r\n\t\t        \r\nTo assign the value of enum `l.getDayOfWeek()` to a string, you could probably use the method of Enum called `name()` that returns the value of enum object.                        ","title":"How to determine day of week by passing specific date?","body":"<p>This works correctly...</p>\n\n<pre><code>java.time.LocalDate; //package related to time and date\n</code></pre>\n\n<p>It provides inbuilt method getDayOfWeek() to get the day of a particular week:</p>\n\n<pre><code>int t;\nScanner s = new Scanner(System.in);\nt = s.nextInt();\ns.nextLine();\n while(t--&gt;0) { \n    int d, m, y;\n    String ss = s.nextLine();\n    String []sss = ss.split(\" \");\n    d=Integer.parseInt(sss[0]);\n    m = Integer.parseInt(sss[1]);\n    y = Integer.parseInt(sss[2]);\n\n    LocalDate l = LocalDate.of(y, m, d); //method to get the localdate instance\n    System.out.println(l.getDayOfWeek()); //this returns the enum DayOfWeek\n</code></pre>\n\n<p>To assign the value of enum <code>l.getDayOfWeek()</code> to a string, you could probably use the method of Enum called <code>name()</code> that returns the value of enum object.                        </p>\n"},{"tags":[],"owner":{"account_id":10716441,"reputation":587,"user_id":7886891,"display_name":"masokaya"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1560365934,"creation_date":1560365621,"answer_id":56568673,"question_id":5270272,"body_markdown":"  method below retrieves seven days and return short name of days in List Array in Kotlin though, you can just reformat then in Java format, just presenting idea how Calendar  can return short name\r\n   \r\n\r\n    private fun getDayDisplayName():List&lt;String&gt;{\r\n            val calendar = Calendar.getInstance()\r\n            val dates= mutableListOf&lt;String&gt;()\r\n            dates.clear()\r\n            val s=   calendar.getDisplayName(DAY_OF_WEEK, SHORT, Locale.US)\r\n            dates.add(s)\r\n            for(i in 0..5){\r\n                calendar.roll( Calendar.DATE, -1)\r\n                dates.add(calendar.getDisplayName(DAY_OF_WEEK, SHORT, Locale.US))\r\n            }\r\n            return dates.toList()\r\n        }\r\n\r\nout put results like\r\n\r\n    I/System.out: Wed\r\n        Tue\r\n        Mon\r\n        Sun\r\n    I/System.out: Sat\r\n        Fri\r\n        Thu","title":"How to determine day of week by passing specific date?","body":"<p>method below retrieves seven days and return short name of days in List Array in Kotlin though, you can just reformat then in Java format, just presenting idea how Calendar  can return short name</p>\n\n<pre><code>private fun getDayDisplayName():List&lt;String&gt;{\n        val calendar = Calendar.getInstance()\n        val dates= mutableListOf&lt;String&gt;()\n        dates.clear()\n        val s=   calendar.getDisplayName(DAY_OF_WEEK, SHORT, Locale.US)\n        dates.add(s)\n        for(i in 0..5){\n            calendar.roll( Calendar.DATE, -1)\n            dates.add(calendar.getDisplayName(DAY_OF_WEEK, SHORT, Locale.US))\n        }\n        return dates.toList()\n    }\n</code></pre>\n\n<p>out put results like</p>\n\n<pre><code>I/System.out: Wed\n    Tue\n    Mon\n    Sun\nI/System.out: Sat\n    Fri\n    Thu\n</code></pre>\n"},{"tags":[],"owner":{"account_id":8108093,"reputation":2413,"user_id":6109034,"display_name":"Mimu Saha Tishan"},"down_vote_count":0,"up_vote_count":18,"is_accepted":false,"score":18,"last_activity_date":1589469125,"creation_date":1585040709,"answer_id":60827857,"question_id":5270272,"body_markdown":"For **Java 8 or Later**, **Localdate** is preferable\r\n\r\n    import java.time.LocalDate;\r\n\r\n    public static String findDay(int month, int day, int year) {\r\n\r\n\t    LocalDate localDate = LocalDate.of(year, month, day);\r\n\r\n        java.time.DayOfWeek dayOfWeek = localDate.getDayOfWeek();\r\n        System.out.println(dayOfWeek);\r\n        \r\n        return dayOfWeek.toString();\r\n    }\r\n\r\n**Note :** if input is String/User defined, then you should parse it into **int**. ","title":"How to determine day of week by passing specific date?","body":"<p>For <strong>Java 8 or Later</strong>, <strong>Localdate</strong> is preferable</p>\n\n<pre><code>import java.time.LocalDate;\n\npublic static String findDay(int month, int day, int year) {\n\n    LocalDate localDate = LocalDate.of(year, month, day);\n\n    java.time.DayOfWeek dayOfWeek = localDate.getDayOfWeek();\n    System.out.println(dayOfWeek);\n\n    return dayOfWeek.toString();\n}\n</code></pre>\n\n<p><strong>Note :</strong> if input is String/User defined, then you should parse it into <strong>int</strong>. </p>\n"},{"tags":[],"owner":{"account_id":14659943,"reputation":124,"user_id":10587465,"display_name":"Waheed Khan"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1637760187,"creation_date":1637760187,"answer_id":70096882,"question_id":5270272,"body_markdown":"Get a Date for Today and then Find a week Day from it. \r\n\r\n\t\r\n\r\n    \tLocalDate d = java.time.LocalDate.now();\r\n\t\tSystem.out.println(java.time.LocalDate.now()); \r\n\t\t\r\n\t\tCalendar c = Calendar.getInstance();\r\n\t\tint dayOfWeek = c.get(Calendar.DAY_OF_WEEK);\r\n\t\tSystem.out.println(dayOfWeek);","title":"How to determine day of week by passing specific date?","body":"<p>Get a Date for Today and then Find a week Day from it.</p>\n<pre><code>    LocalDate d = java.time.LocalDate.now();\n    System.out.println(java.time.LocalDate.now()); \n    \n    Calendar c = Calendar.getInstance();\n    int dayOfWeek = c.get(Calendar.DAY_OF_WEEK);\n    System.out.println(dayOfWeek);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":11041894,"reputation":81,"user_id":8109482,"display_name":"imok1948"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1650888345,"creation_date":1650888345,"answer_id":71999278,"question_id":5270272,"body_markdown":"I use this \r\n\r\n        String[] weekdays = &quot;Sunday Monday Tuesday Wednesday Thursday Friday Saturday&quot;.split(&quot; &quot;);\r\nAnd then \r\n\r\n    weekdays[calendar.get(Calendar.DAY_OF_WEEK) - 1]\r\nTo get the particular weekday\r\n\r\n","title":"How to determine day of week by passing specific date?","body":"<p>I use this</p>\n<pre><code>    String[] weekdays = &quot;Sunday Monday Tuesday Wednesday Thursday Friday Saturday&quot;.split(&quot; &quot;);\n</code></pre>\n<p>And then</p>\n<pre><code>weekdays[calendar.get(Calendar.DAY_OF_WEEK) - 1]\n</code></pre>\n<p>To get the particular weekday</p>\n"},{"tags":[],"owner":{"account_id":15794034,"reputation":91,"user_id":11396463,"display_name":"Jatin"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1653848807,"creation_date":1653848807,"answer_id":72426251,"question_id":5270272,"body_markdown":"    import java.time.*;\r\n    \r\n    public static String findDay(int month, int day, int year) {\r\n        LocalDate localDate = LocalDate.of(year, month, day);\r\n        DayOfWeek dayOfWeek = localDate.getDayOfWeek();\r\n        return dayOfWeek.name();\r\n    }","title":"How to determine day of week by passing specific date?","body":"<pre><code>import java.time.*;\n\npublic static String findDay(int month, int day, int year) {\n    LocalDate localDate = LocalDate.of(year, month, day);\n    DayOfWeek dayOfWeek = localDate.getDayOfWeek();\n    return dayOfWeek.name();\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2657838,"reputation":1407,"user_id":2298162,"display_name":"ognjenkl"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1682897029,"creation_date":1682897029,"answer_id":76143998,"question_id":5270272,"body_markdown":"Using `LocalDate`, here is the class `DayOfWeekConverter`:\r\n\r\n    public class DayOfWeekConverter {\r\n    \r\n        public static String getDayOfWeekShort(String dateInput) {\r\n            DayOfWeek dayOfWeek = getDayOfWeek(dateInput);\r\n            return dayOfWeek.getDisplayName(TextStyle.SHORT, Locale.US);\r\n        }\r\n    \r\n        private static DayOfWeek getDayOfWeek(String dateInput) {\r\n            DateTimeFormatter formatter = DateTimeFormatter.ofPattern(&quot;dd/M/yyyy&quot;);\r\n            LocalDate localDate = LocalDate.parse(dateInput, formatter);\r\n            return localDate.getDayOfWeek();\r\n        }\r\n    \r\n        public static int getDayOfWeekOrdinal(String dateInput) {\r\n            DayOfWeek dayOfWeek = getDayOfWeek(dateInput);\r\n            return dayOfWeek.getValue();\r\n        }\r\n    }\r\n\r\nTests class `DayOfWeekConverterTest`:\r\n\r\n    class DayOfWeekConverterTest {\r\n    \r\n        @Test\r\n        void givenStringDate_whenGetDayOfWeekShort_thenReturnTue() {\r\n            assertEquals(&quot;Tue&quot;, DayOfWeekConverter.getDayOfWeekShort(&quot;23/2/2010&quot;));\r\n        }\r\n    \r\n        @Test\r\n        void givenStringDate_whenGetDayOfWeekOrdinal_thenReturnTue() {\r\n            assertEquals(2, DayOfWeekConverter.getDayOfWeekOrdinal(&quot;23/2/2010&quot;));\r\n        }\r\n    }","title":"How to determine day of week by passing specific date?","body":"<p>Using <code>LocalDate</code>, here is the class <code>DayOfWeekConverter</code>:</p>\n<pre><code>public class DayOfWeekConverter {\n\n    public static String getDayOfWeekShort(String dateInput) {\n        DayOfWeek dayOfWeek = getDayOfWeek(dateInput);\n        return dayOfWeek.getDisplayName(TextStyle.SHORT, Locale.US);\n    }\n\n    private static DayOfWeek getDayOfWeek(String dateInput) {\n        DateTimeFormatter formatter = DateTimeFormatter.ofPattern(&quot;dd/M/yyyy&quot;);\n        LocalDate localDate = LocalDate.parse(dateInput, formatter);\n        return localDate.getDayOfWeek();\n    }\n\n    public static int getDayOfWeekOrdinal(String dateInput) {\n        DayOfWeek dayOfWeek = getDayOfWeek(dateInput);\n        return dayOfWeek.getValue();\n    }\n}\n</code></pre>\n<p>Tests class <code>DayOfWeekConverterTest</code>:</p>\n<pre><code>class DayOfWeekConverterTest {\n\n    @Test\n    void givenStringDate_whenGetDayOfWeekShort_thenReturnTue() {\n        assertEquals(&quot;Tue&quot;, DayOfWeekConverter.getDayOfWeekShort(&quot;23/2/2010&quot;));\n    }\n\n    @Test\n    void givenStringDate_whenGetDayOfWeekOrdinal_thenReturnTue() {\n        assertEquals(2, DayOfWeekConverter.getDayOfWeekOrdinal(&quot;23/2/2010&quot;));\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":45699,"reputation":19649,"user_id":134824,"accept_rate":93,"display_name":"evilReiko"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":626571,"favorite_count":0,"down_vote_count":0,"up_vote_count":228,"accepted_answer_id":5270292,"answer_count":29,"score":228,"last_activity_date":1682897029,"creation_date":1299829464,"question_id":5270272,"body_markdown":"For Example I have the date: &quot;23/2/2010&quot; (23th Feb 2010). I want to pass it to a function which would return the **day of week**. How can I do this?\r\n\r\nIn this example, the function should return `String` &quot;Tue&quot;.\r\n\r\nAdditionally, if just the day ordinal is desired, how can that be retrieved?\r\n","title":"How to determine day of week by passing specific date?","body":"<p>For Example I have the date: \"23/2/2010\" (23th Feb 2010). I want to pass it to a function which would return the <strong>day of week</strong>. How can I do this?</p>\n\n<p>In this example, the function should return <code>String</code> \"Tue\".</p>\n\n<p>Additionally, if just the day ordinal is desired, how can that be retrieved?</p>\n"},{"tags":["java","spring-boot","maven","buildpack"],"comments":[{"owner":{"account_id":6079355,"reputation":1914,"user_id":4745608,"display_name":"Aleksandr Erokhin"},"score":0,"creation_date":1603645449,"post_id":62865594,"comment_id":114095929,"body_markdown":"Found this in buildpacks repo: https://github.com/buildpacks/rfcs/pull/50/files with link to https://reproducible-builds.org/docs/source-date-epoch/ . Still not sure how it&#39;s related to building an image.","body":"Found this in buildpacks repo: <a href=\"https://github.com/buildpacks/rfcs/pull/50/files\" rel=\"nofollow noreferrer\">github.com/buildpacks/rfcs/pull/50/files</a> with link to <a href=\"https://reproducible-builds.org/docs/source-date-epoch/\" rel=\"nofollow noreferrer\">reproducible-builds.org/docs/source-date-epoch</a> . Still not sure how it&#39;s related to building an image."}],"answers":[{"tags":[],"owner":{"account_id":24809,"reputation":10138,"user_id":63308,"accept_rate":89,"display_name":"codefinger"},"down_vote_count":0,"up_vote_count":12,"is_accepted":true,"score":12,"last_activity_date":1655995242,"creation_date":1594591406,"answer_id":62866908,"question_id":62865594,"body_markdown":"This is by design. In order to create reproducible builds (i.e. so that layers can be reused) the buildpack must create layers with a fixed time stamp. Otherwise, you wouldn‚Äôt be able to reuse the layers you created in previous builds because they would have different time stamps. ","title":"Spring Boot 2.3.0 buildpack builds image with creation date 40 years ago","body":"<p>This is by design. In order to create reproducible builds (i.e. so that layers can be reused) the buildpack must create layers with a fixed time stamp. Otherwise, you wouldn‚Äôt be able to reuse the layers you created in previous builds because they would have different time stamps.</p>\n"},{"tags":[],"owner":{"account_id":1601812,"reputation":1854,"user_id":1482700,"accept_rate":72,"display_name":"kozla13"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1682896093,"creation_date":1682896093,"answer_id":76143949,"question_id":62865594,"body_markdown":"In the new version you can set it.\r\nHier is the gradle example \r\n\r\n    bootBuildImage {\r\n          imageName = &quot;docker.io/ringo&quot;\r\n          createdDate = &quot;now&quot;\r\n    }","title":"Spring Boot 2.3.0 buildpack builds image with creation date 40 years ago","body":"<p>In the new version you can set it.\nHier is the gradle example</p>\n<pre><code>bootBuildImage {\n      imageName = &quot;docker.io/ringo&quot;\n      createdDate = &quot;now&quot;\n}\n</code></pre>\n"}],"owner":{"account_id":6079355,"reputation":1914,"user_id":4745608,"display_name":"Aleksandr Erokhin"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":4622,"favorite_count":0,"down_vote_count":0,"up_vote_count":23,"accepted_answer_id":62866908,"answer_count":2,"score":23,"last_activity_date":1682896093,"creation_date":1594581963,"question_id":62865594,"body_markdown":"I&#39;ve tried to use buildpack in a maven project with Spring Boot 2.3.0 running:\r\n\r\n```\r\nmvn spring-boot:build-image\r\n```\r\n\r\nImage was created just fine, but I see the following info for it:\r\n\r\n```\r\nREPOSITORY                                    TAG                     IMAGE ID            CREATED             SIZE\r\ngcr.io/paketo-buildpacks/builder              base-platform-api-0.3   daceb4f909b7        40 years ago        690MB\r\nmyimage                                       master                  a482a4a34379        40 years ago        285MB\r\n```\r\n\r\nWhy does it say the image (along with the builder) was created 40 years ago?","title":"Spring Boot 2.3.0 buildpack builds image with creation date 40 years ago","body":"<p>I've tried to use buildpack in a maven project with Spring Boot 2.3.0 running:</p>\n<pre><code>mvn spring-boot:build-image\n</code></pre>\n<p>Image was created just fine, but I see the following info for it:</p>\n<pre><code>REPOSITORY                                    TAG                     IMAGE ID            CREATED             SIZE\ngcr.io/paketo-buildpacks/builder              base-platform-api-0.3   daceb4f909b7        40 years ago        690MB\nmyimage                                       master                  a482a4a34379        40 years ago        285MB\n</code></pre>\n<p>Why does it say the image (along with the builder) was created 40 years ago?</p>\n"},{"tags":["java","arrays","list","primitive"],"comments":[{"owner":{"account_id":247613,"reputation":284089,"user_id":522444,"accept_rate":100,"display_name":"Hovercraft Full Of Eels"},"score":1,"creation_date":1682880629,"post_id":76142948,"comment_id":134281030,"body_markdown":"@AnthonyAccioly the answers to that question were all written before Java streams came into being. Edit: Whoops. Closed before I could post the comment. I&#39;m not sure that that is a correct duplicate, to be honest.","body":"@AnthonyAccioly the answers to that question were all written before Java streams came into being. Edit: Whoops. Closed before I could post the comment. I&#39;m not sure that that is a correct duplicate, to be honest."},{"owner":{"account_id":336748,"reputation":22028,"user_id":664577,"accept_rate":98,"display_name":"Anthony Accioly"},"score":0,"creation_date":1682892476,"post_id":76142948,"comment_id":134282456,"body_markdown":"@HovercraftFullOfEels, have a look at the accept answer: https://stackoverflow.com/a/4837580/664577. It does cover streams as well (although I like the OP&#39;s title better).","body":"@HovercraftFullOfEels, have a look at the accept answer: <a href=\"https://stackoverflow.com/a/4837580/664577\">stackoverflow.com/a/4837580/664577</a>. It does cover streams as well (although I like the OP&#39;s title better)."},{"owner":{"account_id":336748,"reputation":22028,"user_id":664577,"accept_rate":98,"display_name":"Anthony Accioly"},"score":0,"creation_date":1682892822,"post_id":76142948,"comment_id":134282492,"body_markdown":"Another Java 8+ duplicate: https://stackoverflow.com/q/46160126/664577","body":"Another Java 8+ duplicate: <a href=\"https://stackoverflow.com/q/46160126/664577\">stackoverflow.com/q/46160126/664577</a>"}],"owner":{"account_id":322981,"reputation":310745,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":73,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"closed_date":1682880573,"answer_count":0,"score":0,"last_activity_date":1682896084,"creation_date":1682880055,"question_id":76142948,"body_markdown":"Given a [`List`][1] of [`Float`][2] objects:\r\n\r\n    List&lt; Float &gt; floatObjects = List.of( 7F , 42F , 99F ) ;  // Auto-boxing produces a `List&lt; Float &gt;`. \r\n\r\n‚Ä¶ how does one easily get an array of `double` primitive values?\r\n\r\n    float[] floatPrimitives = floatObjects ‚Ä¶ ??? ;\r\n\r\n\r\n----------\r\n\r\n\r\nI thought of making a [`Stream`][3] from our `List` of `Float` objects, converted to a `FloatStream`. But strangely, there is no `FloatStream` class. We have [`IntStream`][4], [`LongStream`][5], and [`DoubleStream`][6], but no `FloatStream`. \r\n\r\n\r\n  [1]: https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/util/List.html\r\n  [2]: https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/lang/Double.html\r\n  [3]: https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/util/stream/Stream.html\r\n  [4]: https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/util/stream/IntStream.html\r\n  [5]: https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/util/stream/LongStream.html\r\n  [6]: https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/util/stream/DoubleStream.html","title":"Convert list of Float objects to an array of float primitives in Java","body":"<p>Given a <a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/util/List.html\" rel=\"nofollow noreferrer\"><code>List</code></a> of <a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/lang/Double.html\" rel=\"nofollow noreferrer\"><code>Float</code></a> objects:</p>\n<pre><code>List&lt; Float &gt; floatObjects = List.of( 7F , 42F , 99F ) ;  // Auto-boxing produces a `List&lt; Float &gt;`. \n</code></pre>\n<p>‚Ä¶ how does one easily get an array of <code>double</code> primitive values?</p>\n<pre><code>float[] floatPrimitives = floatObjects ‚Ä¶ ??? ;\n</code></pre>\n<hr />\n<p>I thought of making a <a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/util/stream/Stream.html\" rel=\"nofollow noreferrer\"><code>Stream</code></a> from our <code>List</code> of <code>Float</code> objects, converted to a <code>FloatStream</code>. But strangely, there is no <code>FloatStream</code> class. We have <a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/util/stream/IntStream.html\" rel=\"nofollow noreferrer\"><code>IntStream</code></a>, <a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/util/stream/LongStream.html\" rel=\"nofollow noreferrer\"><code>LongStream</code></a>, and <a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/util/stream/DoubleStream.html\" rel=\"nofollow noreferrer\"><code>DoubleStream</code></a>, but no <code>FloatStream</code>.</p>\n"},{"tags":["java","spring-boot","foreign-keys","relation"],"comments":[{"owner":{"account_id":27784879,"reputation":389,"user_id":21212553,"display_name":"galalem"},"score":0,"creation_date":1682895606,"post_id":76143904,"comment_id":134282720,"body_markdown":"this feels more like Inheritance with [Joined Table Strategy](https://www.baeldung.com/hibernate-inheritance#joined-table)","body":"this feels more like Inheritance with <a href=\"https://www.baeldung.com/hibernate-inheritance#joined-table\" rel=\"nofollow noreferrer\">Joined Table Strategy</a>"},{"owner":{"account_id":25275672,"reputation":45,"user_id":19104352,"display_name":"Gustav Henriksson"},"score":0,"creation_date":1682923456,"post_id":76143904,"comment_id":134284744,"body_markdown":"@galalem Interesting. Thank you for sharing. Do you know if it&#39;s bad practice to use the joined table strategy in this case? never see an example before.","body":"@galalem Interesting. Thank you for sharing. Do you know if it&#39;s bad practice to use the joined table strategy in this case? never see an example before."}],"owner":{"account_id":25275672,"reputation":45,"user_id":19104352,"display_name":"Gustav Henriksson"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":19,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1682895237,"creation_date":1682895237,"question_id":76143904,"body_markdown":"I have the following entities in a spring boot project:\r\n\r\n```\r\npublic class User implements UserDetails {\r\n\r\n    @Id\r\n    @GeneratedValue\r\n    private Long id;\r\n    private String email;\r\n    private String password;\r\n\r\n    @OneToOne\r\n    private UserInfo info;\r\n\r\n}\r\n\r\npublic class UserInfo {\r\n\r\n    @Id\r\n    @GeneratedValue\r\n    private Long id;\r\n    private String firstName;\r\n    private String lastName;\r\n    private String birthDay;\r\n}\r\n```\r\nAnd would like to be able to save a new user like this\r\n```\r\nUser user = User.builder()\r\n        .email(&quot;example@email.se&quot;)\r\n        .password(&quot;password&quot;)\r\n        .build();\r\nUserInfo userInfo = UserInfo.builder()\r\n        .firstName(&quot;foo&quot;)\r\n        .lastName(&quot;oof&quot;)\r\n        .birthDate(&quot;ofo&quot;)\r\n        .build();\r\nuser.setInfo(userInfo);\r\nrepository.save(user);\r\n```\r\n\r\nI&#39;ve only been working directly with SQL before and in my head i would like to have a table structure that looks like follow:\r\n```\r\nUSER TABLE\r\nid\r\nemail\r\npassword\r\n```\r\n```\r\nUSER INFO TABLE\r\nuser_id\r\nfirstname\r\nlastname\r\nbirthday\r\n```\r\n\r\nI&#39;ve tried a few annotations but my boostrapping only works if i use annotations that would make the USER TABLE have a FK to the USER INFO TABLE instead. I&#39;m i missing something here or should i think in another way now when i use spring boot to build my database?","title":"How do i make a one to one relation where tableB holds the foreign key of tableA and where tableA holds a tableB object in spring boot","body":"<p>I have the following entities in a spring boot project:</p>\n<pre><code>public class User implements UserDetails {\n\n    @Id\n    @GeneratedValue\n    private Long id;\n    private String email;\n    private String password;\n\n    @OneToOne\n    private UserInfo info;\n\n}\n\npublic class UserInfo {\n\n    @Id\n    @GeneratedValue\n    private Long id;\n    private String firstName;\n    private String lastName;\n    private String birthDay;\n}\n</code></pre>\n<p>And would like to be able to save a new user like this</p>\n<pre><code>User user = User.builder()\n        .email(&quot;example@email.se&quot;)\n        .password(&quot;password&quot;)\n        .build();\nUserInfo userInfo = UserInfo.builder()\n        .firstName(&quot;foo&quot;)\n        .lastName(&quot;oof&quot;)\n        .birthDate(&quot;ofo&quot;)\n        .build();\nuser.setInfo(userInfo);\nrepository.save(user);\n</code></pre>\n<p>I've only been working directly with SQL before and in my head i would like to have a table structure that looks like follow:</p>\n<pre><code>USER TABLE\nid\nemail\npassword\n</code></pre>\n<pre><code>USER INFO TABLE\nuser_id\nfirstname\nlastname\nbirthday\n</code></pre>\n<p>I've tried a few annotations but my boostrapping only works if i use annotations that would make the USER TABLE have a FK to the USER INFO TABLE instead. I'm i missing something here or should i think in another way now when i use spring boot to build my database?</p>\n"},{"tags":["java","android","canvas","drawing","ondraw"],"answers":[{"tags":[],"owner":{"account_id":16796825,"reputation":1274,"user_id":12143126,"display_name":"Mikhail Guliaev"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1682894559,"creation_date":1682890587,"answer_id":76143663,"question_id":76143527,"body_markdown":"I just copied your code and it works.\r\n\r\nCan you attach the code which you use to call `DrawGrid.setCurrentColor(color)`? I bet you just pass to it the value different from (0,1,2) and visually nothing changes. Even if you pass the correct value, the problem is not in the `DrawGrid` class, because it works properly.\r\n\r\nIf you will pass there 0,1 or 2, then the View will be redrawn with passed color.\r\n\r\nWhy don&#39;t you just provide to this method color. And the caller side will determine which color it wants to use. Something like that:\r\n\r\n    public void setCurrentColor(@ColorInt int color) {\r\n            this.currentColor = color;\r\n            paint.setColor(color);\r\n            invalidate();\r\n            Log.d(&quot;DrawGrid&quot;, &quot;currentColor is now1 &quot; + currentColor);\r\n    }\r\n\r\n","title":"Can&#39;t change color of drawing","body":"<p>I just copied your code and it works.</p>\n<p>Can you attach the code which you use to call <code>DrawGrid.setCurrentColor(color)</code>? I bet you just pass to it the value different from (0,1,2) and visually nothing changes. Even if you pass the correct value, the problem is not in the <code>DrawGrid</code> class, because it works properly.</p>\n<p>If you will pass there 0,1 or 2, then the View will be redrawn with passed color.</p>\n<p>Why don't you just provide to this method color. And the caller side will determine which color it wants to use. Something like that:</p>\n<pre><code>public void setCurrentColor(@ColorInt int color) {\n        this.currentColor = color;\n        paint.setColor(color);\n        invalidate();\n        Log.d(&quot;DrawGrid&quot;, &quot;currentColor is now1 &quot; + currentColor);\n}\n</code></pre>\n"}],"owner":{"account_id":28381767,"reputation":1,"user_id":21708938,"display_name":"T1D"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":49,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1682894559,"creation_date":1682888555,"question_id":76143527,"body_markdown":"I&#39;m creating camera app with grids and I want user to be able to change color of the grid by clicking button of the color he wants to use. The grids are created using onDraw, which is in DrawGrid class and this class is called from GridMenuFragment fragment, whereas color buttons are in ColorFragment fragment.\r\n\r\nRight now, I successfully pass the color I want to use to the DrawGrid, yet it doesn&#39;t update and the color of the grid doesn&#39;t change. I use invalidate() in setCurrentColor method. I tried doing color change the same way I change the grid, yet it doesn&#39;t work. Any help will be appreciated.\r\n\r\nHere&#39;s DrawGird.java code:\r\n\r\n```\r\npublic class DrawGrid extends View {\r\n    int whichGrid;\r\n    Paint paint;\r\n    int currentColor=Color.WHITE;\r\n\r\n    public DrawGrid(Context context, AttributeSet attrs) {\r\n        super(context, attrs);\r\n        paint = new Paint();\r\n        paint.setColor(currentColor);\r\n        paint.setStrokeWidth(5);\r\n        paint.setStyle(Paint.Style.STROKE);\r\n    }\r\n    \r\n    public void setWhichGrid(int number) {\r\n        whichGrid = number;\r\n        invalidate();\r\n    }\r\n\r\n    public void setCurrentColor(int color) {\r\n        switch(color){\r\n            case 0:\r\n                currentColor=Color.WHITE;\r\n                break;\r\n            case 1:\r\n                currentColor=Color.RED;\r\n                break;\r\n            case 2:\r\n                currentColor=Color.BLUE;\r\n                break;\r\n        }\r\n        paint.setColor(currentColor);\r\n        invalidate();\r\n        Log.d(&quot;DrawGrid&quot;, &quot;currentColor is now1 &quot; + currentColor);\r\n    }\r\n\r\n    @Override\r\n    protected void onDraw(Canvas canvas) {\r\n        super.onDraw(canvas);\r\n        Path path = new Path();\r\n        int width = getWidth();\r\n        int height = getHeight();\r\n        switch (whichGrid) {\r\n            case 1:\r\n                float lineV1 = width / 3f;\r\n                float lineV2 = (width / 3f) * 2f;\r\n                float lineH1 = height / 3f;\r\n                float lineH2 = (height / 3f) * 2f;\r\n                Log.d(&quot;DrawGrid&quot;, &quot;currentColor is now3 &quot; + currentColor);\r\n                canvas.drawLine(lineV1, 0, lineV1, height, paint);\r\n                canvas.drawLine(lineV2, 0, lineV2, height, paint);\r\n                canvas.drawLine(0, lineH1, width, lineH1, paint);\r\n                canvas.drawLine(0, lineH2, width, lineH2, paint);\r\n                break;\r\n            case 2:\r\n                float lineV = width / 3f;\r\n                float lineH = height / 3f;\r\n                canvas.drawLine(lineV, 0, lineV, height, paint);\r\n                canvas.drawLine(0, lineH, width, lineH, paint);\r\n                break;\r\n            \r\n        }\r\n    }\r\n}\r\n```\r\nEdit: adding OnCreateView from ColorFragment where I call DrawGrid.setCurrentColor():\r\n```\r\n@Override\r\n    public View onCreateView(LayoutInflater inflater, ViewGroup container,\r\n                             Bundle savedInstanceState) {\r\n        View view = inflater.inflate(R.layout.fragment_color, container, false);\r\n\r\n        drawGrid=new DrawGrid(getContext(), null);\r\n        FrameLayout mainLayout = ((MainActivity)getActivity()).getRelativeLayout();\r\n        mainLayout.removeView(drawGrid);\r\n        mainLayout.addView(drawGrid);\r\n\r\n        Button red = view.findViewById(R.id.button1);\r\n        Button blue = view.findViewById(R.id.button2);\r\n        red.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View view) {\r\n                Log.d(&quot;ColorClass&quot;, &quot;Button clicked&quot;);\r\n                drawGrid.setCurrentColor(Color.RED);\r\n                FragmentManager fragmentManager = requireActivity().getSupportFragmentManager();\r\n                FragmentTransaction fragmentTransaction = fragmentManager.beginTransaction();\r\n                fragmentTransaction.hide(ColorFragment.this).commit();\r\n            }\r\n        });\r\n\r\n        blue.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View view) {\r\n                drawGrid.setCurrentColor(Color.BLUE);\r\n                FragmentManager fragmentManager = requireActivity().getSupportFragmentManager();\r\n                FragmentTransaction fragmentTransaction = fragmentManager.beginTransaction();\r\n                fragmentTransaction.hide(ColorFragment.this).commit();\r\n            }\r\n        });\r\n        return view;\r\n    }\r\n```","title":"Can&#39;t change color of drawing","body":"<p>I'm creating camera app with grids and I want user to be able to change color of the grid by clicking button of the color he wants to use. The grids are created using onDraw, which is in DrawGrid class and this class is called from GridMenuFragment fragment, whereas color buttons are in ColorFragment fragment.</p>\n<p>Right now, I successfully pass the color I want to use to the DrawGrid, yet it doesn't update and the color of the grid doesn't change. I use invalidate() in setCurrentColor method. I tried doing color change the same way I change the grid, yet it doesn't work. Any help will be appreciated.</p>\n<p>Here's DrawGird.java code:</p>\n<pre><code>public class DrawGrid extends View {\n    int whichGrid;\n    Paint paint;\n    int currentColor=Color.WHITE;\n\n    public DrawGrid(Context context, AttributeSet attrs) {\n        super(context, attrs);\n        paint = new Paint();\n        paint.setColor(currentColor);\n        paint.setStrokeWidth(5);\n        paint.setStyle(Paint.Style.STROKE);\n    }\n    \n    public void setWhichGrid(int number) {\n        whichGrid = number;\n        invalidate();\n    }\n\n    public void setCurrentColor(int color) {\n        switch(color){\n            case 0:\n                currentColor=Color.WHITE;\n                break;\n            case 1:\n                currentColor=Color.RED;\n                break;\n            case 2:\n                currentColor=Color.BLUE;\n                break;\n        }\n        paint.setColor(currentColor);\n        invalidate();\n        Log.d(&quot;DrawGrid&quot;, &quot;currentColor is now1 &quot; + currentColor);\n    }\n\n    @Override\n    protected void onDraw(Canvas canvas) {\n        super.onDraw(canvas);\n        Path path = new Path();\n        int width = getWidth();\n        int height = getHeight();\n        switch (whichGrid) {\n            case 1:\n                float lineV1 = width / 3f;\n                float lineV2 = (width / 3f) * 2f;\n                float lineH1 = height / 3f;\n                float lineH2 = (height / 3f) * 2f;\n                Log.d(&quot;DrawGrid&quot;, &quot;currentColor is now3 &quot; + currentColor);\n                canvas.drawLine(lineV1, 0, lineV1, height, paint);\n                canvas.drawLine(lineV2, 0, lineV2, height, paint);\n                canvas.drawLine(0, lineH1, width, lineH1, paint);\n                canvas.drawLine(0, lineH2, width, lineH2, paint);\n                break;\n            case 2:\n                float lineV = width / 3f;\n                float lineH = height / 3f;\n                canvas.drawLine(lineV, 0, lineV, height, paint);\n                canvas.drawLine(0, lineH, width, lineH, paint);\n                break;\n            \n        }\n    }\n}\n</code></pre>\n<p>Edit: adding OnCreateView from ColorFragment where I call DrawGrid.setCurrentColor():</p>\n<pre><code>@Override\n    public View onCreateView(LayoutInflater inflater, ViewGroup container,\n                             Bundle savedInstanceState) {\n        View view = inflater.inflate(R.layout.fragment_color, container, false);\n\n        drawGrid=new DrawGrid(getContext(), null);\n        FrameLayout mainLayout = ((MainActivity)getActivity()).getRelativeLayout();\n        mainLayout.removeView(drawGrid);\n        mainLayout.addView(drawGrid);\n\n        Button red = view.findViewById(R.id.button1);\n        Button blue = view.findViewById(R.id.button2);\n        red.setOnClickListener(new View.OnClickListener() {\n            @Override\n            public void onClick(View view) {\n                Log.d(&quot;ColorClass&quot;, &quot;Button clicked&quot;);\n                drawGrid.setCurrentColor(Color.RED);\n                FragmentManager fragmentManager = requireActivity().getSupportFragmentManager();\n                FragmentTransaction fragmentTransaction = fragmentManager.beginTransaction();\n                fragmentTransaction.hide(ColorFragment.this).commit();\n            }\n        });\n\n        blue.setOnClickListener(new View.OnClickListener() {\n            @Override\n            public void onClick(View view) {\n                drawGrid.setCurrentColor(Color.BLUE);\n                FragmentManager fragmentManager = requireActivity().getSupportFragmentManager();\n                FragmentTransaction fragmentTransaction = fragmentManager.beginTransaction();\n                fragmentTransaction.hide(ColorFragment.this).commit();\n            }\n        });\n        return view;\n    }\n</code></pre>\n"},{"tags":["java","android","webview"],"answers":[{"tags":[],"owner":{"account_id":19615181,"reputation":732,"user_id":15394019,"display_name":"mindoverflow"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1682817688,"creation_date":1682817688,"answer_id":76139165,"question_id":76136414,"body_markdown":"This is because the Activity _state_ is not saved by default, and an orientation change recreates the Activity.\r\n\r\nThere is a way to handle this via saving the Bundle and then setting it back on rotation but an easy way to sidestep this hassle would be to add this to the ```AndroidManifest.xml``` target ```&lt;activity&gt;``` tag\r\n\r\n```\r\nandroid:configChanges=&quot;orientation|screenSize&quot;\r\n```\r\nor handling the thing in the target Activity&#39;s Java/ Kotlin code\r\n```\r\n@Override\r\npublic void onConfigurationChanged(Configuration conf)\r\n{\r\n\tsuper.onConfigurationChanged(conf);\r\n\tif(conf.orientation == Configuration.ORIENTATION_LANDSCAPE)\r\n\t{\r\n\t\t// Landscape mode\r\n\t}\r\n\telse if(conf.orientation == Configuration.ORIENTATION_PORTRAIT)\r\n\t{\r\n\t\t// Portrait mode\r\n\t}\r\n}\r\n```","title":"Webview when I rotate the screen it goes back to the previous page","body":"<p>This is because the Activity <em>state</em> is not saved by default, and an orientation change recreates the Activity.</p>\n<p>There is a way to handle this via saving the Bundle and then setting it back on rotation but an easy way to sidestep this hassle would be to add this to the <code>AndroidManifest.xml</code> target <code>&lt;activity&gt;</code> tag</p>\n<pre><code>android:configChanges=&quot;orientation|screenSize&quot;\n</code></pre>\n<p>or handling the thing in the target Activity's Java/ Kotlin code</p>\n<pre><code>@Override\npublic void onConfigurationChanged(Configuration conf)\n{\n    super.onConfigurationChanged(conf);\n    if(conf.orientation == Configuration.ORIENTATION_LANDSCAPE)\n    {\n        // Landscape mode\n    }\n    else if(conf.orientation == Configuration.ORIENTATION_PORTRAIT)\n    {\n        // Portrait mode\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":17114658,"reputation":11,"user_id":13290036,"display_name":"Henrique Lucas"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":51,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1682894229,"creation_date":1682773820,"question_id":76136414,"body_markdown":"I have a Webview that when I rotate the cell phone screen it goes back to the previous page and I would like to remain on the same screen. I would like to make it stay only on the current page. What can I do to get around this issue.\r\n\r\nEvery WebView works perfectly, just this detail I need to fix.\r\n****MainActivit**y**\r\n```\r\npackage com.example.agoraplay;\r\n\r\nimport androidx.annotation.Nullable;\r\nimport androidx.appcompat.app.AppCompatActivity;\r\nimport android.graphics.Bitmap;\r\nimport android.graphics.BitmapFactory;\r\nimport android.os.Bundle;\r\nimport android.view.View;\r\nimport android.webkit.WebSettings;\r\nimport android.webkit.WebView;\r\nimport android.webkit.WebViewClient;\r\nimport android.widget.FrameLayout;\r\n\r\npublic class MainActivity extends AppCompatActivity {\r\n    // on below line creating a variable for web view.\r\n    private WebView webView;\r\n\r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        setContentView(R.layout.activity_main);\r\n\r\n        // on below line initializing web view with id.\r\n        webView = findViewById(R.id.webView);\r\n\r\n        // on below line setting web view client.\r\n        webView.setWebViewClient(new WebClient());\r\n\r\n        // on below line setting web chrome client for web view.\r\n        webView.setWebChromeClient(new WebChromeClient());\r\n\r\n        // on below line getting web settings.\r\n        WebSettings webSettings = webView.getSettings();\r\n\r\n        // on below line setting java script enabled to true.\r\n        webSettings.setJavaScriptEnabled(true);\r\n\r\n        // on below line setting file access to true.\r\n        webSettings.setAllowFileAccess(true);\r\n\r\n        // on below line setting url for the web page which we have to load in our web view.\r\n        webView.loadUrl(&quot;https://siteexemplo.com&quot;);\r\n    }\r\n\r\n    // on below line creating a class for web chrome client.\r\n    class WebChromeClient extends android.webkit.WebChromeClient {\r\n        // on below line creating variables.\r\n        private View customView;\r\n        private android.webkit.WebChromeClient.CustomViewCallback customViewCallback;\r\n        private int originalOrientation;\r\n        private int originalSystemVisibility;\r\n\r\n        WebChromeClient() {\r\n        }\r\n\r\n        @Nullable\r\n        @Override\r\n        public Bitmap getDefaultVideoPoster() {\r\n\r\n            // on below line returning our resource from bitmap factory.\r\n            if (customView == null) {\r\n                return null;\r\n            }\r\n            return BitmapFactory.decodeResource(getApplicationContext().getResources(), 2130837573);\r\n        }\r\n\r\n        @Override\r\n        public void onHideCustomView() {\r\n\r\n            // on below line removing our custom view and setting it to null.\r\n            ((FrameLayout) getWindow().getDecorView()).removeView(customView);\r\n            this.customView = null;\r\n\r\n            // on below line setting system ui visibility to original one and setting orientation for it.\r\n            getWindow().getDecorView().setSystemUiVisibility(this.originalSystemVisibility);\r\n            setRequestedOrientation(this.originalOrientation);\r\n\r\n            // on below line setting custom view call back to null.\r\n            this.customViewCallback.onCustomViewHidden();\r\n            this.customViewCallback = null;\r\n        }\r\n\r\n        @Override\r\n        public void onShowCustomView(View view, CustomViewCallback callback) {\r\n            if (this.customView != null) {\r\n                onHideCustomView();\r\n                return;\r\n            }\r\n            // on below line initializing all variables.\r\n            this.customView = view;\r\n            this.originalSystemVisibility = getWindow().getDecorView().getSystemUiVisibility();\r\n            this.originalOrientation = getRequestedOrientation();\r\n            this.customViewCallback = callback;\r\n            FrameLayout decorView = (FrameLayout) getWindow().getDecorView();decorView.addView(this.customView, new FrameLayout.LayoutParams(-1, -1));\r\n            getWindow().getDecorView().setSystemUiVisibility(3846);\r\n        }\r\n    }\r\n    // on below line creating a class for Web Client.\r\n    class WebClient extends WebViewClient {\r\n        @Override\r\n        public void onPageStarted(WebView view, String url, Bitmap favicon) {\r\n            super.onPageStarted(view, url, favicon);\r\n        }\r\n\r\n        @Override\r\n        public void onPageFinished(WebView view, String url) {\r\n            super.onPageFinished(view, url);\r\n        }\r\n    }\r\n\r\n    @Override\r\n    public void onBackPressed() {\r\n        if(webView.canGoBack()) {\r\n            webView.goBack();\r\n        } else {\r\n            super.onBackPressed();\r\n        }\r\n    }\r\n}\r\n```\r\n\r\nI tried deleting some classes to try to solve the problem, but without success.","title":"Webview when I rotate the screen it goes back to the previous page","body":"<p>I have a Webview that when I rotate the cell phone screen it goes back to the previous page and I would like to remain on the same screen. I would like to make it stay only on the current page. What can I do to get around this issue.</p>\n<p>Every WebView works perfectly, just this detail I need to fix.\n****MainActivit<strong>y</strong></p>\n<pre><code>package com.example.agoraplay;\n\nimport androidx.annotation.Nullable;\nimport androidx.appcompat.app.AppCompatActivity;\nimport android.graphics.Bitmap;\nimport android.graphics.BitmapFactory;\nimport android.os.Bundle;\nimport android.view.View;\nimport android.webkit.WebSettings;\nimport android.webkit.WebView;\nimport android.webkit.WebViewClient;\nimport android.widget.FrameLayout;\n\npublic class MainActivity extends AppCompatActivity {\n    // on below line creating a variable for web view.\n    private WebView webView;\n\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.activity_main);\n\n        // on below line initializing web view with id.\n        webView = findViewById(R.id.webView);\n\n        // on below line setting web view client.\n        webView.setWebViewClient(new WebClient());\n\n        // on below line setting web chrome client for web view.\n        webView.setWebChromeClient(new WebChromeClient());\n\n        // on below line getting web settings.\n        WebSettings webSettings = webView.getSettings();\n\n        // on below line setting java script enabled to true.\n        webSettings.setJavaScriptEnabled(true);\n\n        // on below line setting file access to true.\n        webSettings.setAllowFileAccess(true);\n\n        // on below line setting url for the web page which we have to load in our web view.\n        webView.loadUrl(&quot;https://siteexemplo.com&quot;);\n    }\n\n    // on below line creating a class for web chrome client.\n    class WebChromeClient extends android.webkit.WebChromeClient {\n        // on below line creating variables.\n        private View customView;\n        private android.webkit.WebChromeClient.CustomViewCallback customViewCallback;\n        private int originalOrientation;\n        private int originalSystemVisibility;\n\n        WebChromeClient() {\n        }\n\n        @Nullable\n        @Override\n        public Bitmap getDefaultVideoPoster() {\n\n            // on below line returning our resource from bitmap factory.\n            if (customView == null) {\n                return null;\n            }\n            return BitmapFactory.decodeResource(getApplicationContext().getResources(), 2130837573);\n        }\n\n        @Override\n        public void onHideCustomView() {\n\n            // on below line removing our custom view and setting it to null.\n            ((FrameLayout) getWindow().getDecorView()).removeView(customView);\n            this.customView = null;\n\n            // on below line setting system ui visibility to original one and setting orientation for it.\n            getWindow().getDecorView().setSystemUiVisibility(this.originalSystemVisibility);\n            setRequestedOrientation(this.originalOrientation);\n\n            // on below line setting custom view call back to null.\n            this.customViewCallback.onCustomViewHidden();\n            this.customViewCallback = null;\n        }\n\n        @Override\n        public void onShowCustomView(View view, CustomViewCallback callback) {\n            if (this.customView != null) {\n                onHideCustomView();\n                return;\n            }\n            // on below line initializing all variables.\n            this.customView = view;\n            this.originalSystemVisibility = getWindow().getDecorView().getSystemUiVisibility();\n            this.originalOrientation = getRequestedOrientation();\n            this.customViewCallback = callback;\n            FrameLayout decorView = (FrameLayout) getWindow().getDecorView();decorView.addView(this.customView, new FrameLayout.LayoutParams(-1, -1));\n            getWindow().getDecorView().setSystemUiVisibility(3846);\n        }\n    }\n    // on below line creating a class for Web Client.\n    class WebClient extends WebViewClient {\n        @Override\n        public void onPageStarted(WebView view, String url, Bitmap favicon) {\n            super.onPageStarted(view, url, favicon);\n        }\n\n        @Override\n        public void onPageFinished(WebView view, String url) {\n            super.onPageFinished(view, url);\n        }\n    }\n\n    @Override\n    public void onBackPressed() {\n        if(webView.canGoBack()) {\n            webView.goBack();\n        } else {\n            super.onBackPressed();\n        }\n    }\n}\n</code></pre>\n<p>I tried deleting some classes to try to solve the problem, but without success.</p>\n"},{"tags":["java","user-interface","swing"],"comments":[{"owner":{"account_id":83469,"reputation":9224,"user_id":234009,"display_name":"robert_x44"},"score":0,"creation_date":1293846246,"post_id":4572896,"comment_id":5018454,"body_markdown":"I&#39;m not entirely sure what you&#39;re trying to accomplish.  Are you just trying to have a button with text next to it?","body":"I&#39;m not entirely sure what you&#39;re trying to accomplish.  Are you just trying to have a button with text next to it?"},{"owner":{"account_id":259665,"reputation":307,"user_id":542719,"accept_rate":48,"display_name":"user542719"},"score":0,"creation_date":1293849177,"post_id":4572896,"comment_id":5018557,"body_markdown":"No I have button inside textfeild but have above problem","body":"No I have button inside textfeild but have above problem"}],"answers":[{"tags":[],"owner":{"account_id":66851,"reputation":1778,"user_id":195912,"accept_rate":70,"display_name":"Uhlen"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1293846278,"creation_date":1293846278,"answer_id":4572930,"question_id":4572896,"body_markdown":"Try a BorderLayout and add the textfield at BorderLayout.CENTER and the button at BorderLayout.EAST.","title":"Button inside text box","body":"<p>Try a BorderLayout and add the textfield at BorderLayout.CENTER and the button at BorderLayout.EAST.</p>\n"},{"tags":[],"owner":{"account_id":37951,"reputation":3615,"user_id":108685,"accept_rate":68,"display_name":"waqasahmed"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1293846841,"creation_date":1293846841,"answer_id":4572940,"question_id":4572896,"body_markdown":"Use a different Layout, or try absolute positioning","title":"Button inside text box","body":"<p>Use a different Layout, or try absolute positioning</p>\n"},{"tags":[],"owner":{"account_id":269864,"reputation":2160,"user_id":559467,"accept_rate":100,"display_name":"D.N."},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1293848751,"creation_date":1293848751,"answer_id":4572997,"question_id":4572896,"body_markdown":"I tried your code, and it seemed to work fine for me, with a slight modification.  It may be that panel is resizing itself, not textField.  Try wrapping panel in another JPanel to force its shape.\r\n&lt;pre&gt;&lt;code&gt;JPanel panel      = new JPanel();\r\nJPanel outerPanel = new JPanel();\r\npanel.setLayout( new FlowLayout(FlowLayout.CENTER, 0, 0) );\r\npanel.add(textField);\r\npanel.add(button);\r\npanel.setBackground( textField.getBackground() );\r\npanel.setBorder( textField.getBorder() );\r\ntextField.setBorder(null);\r\nouterPanel.add(panel);&lt;/code&gt;&lt;/pre&gt;\r\n","title":"Button inside text box","body":"<p>I tried your code, and it seemed to work fine for me, with a slight modification.  It may be that panel is resizing itself, not textField.  Try wrapping panel in another JPanel to force its shape.</p>\n\n<pre><code>JPanel panel      = new JPanel();\nJPanel outerPanel = new JPanel();\npanel.setLayout( new FlowLayout(FlowLayout.CENTER, 0, 0) );\npanel.add(textField);\npanel.add(button);\npanel.setBackground( textField.getBackground() );\npanel.setBorder( textField.getBorder() );\ntextField.setBorder(null);\nouterPanel.add(panel);</code></pre>\n"},{"tags":[],"owner":{"account_id":81822,"reputation":204250,"user_id":230513,"accept_rate":100,"display_name":"trashgod"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1293852530,"creation_date":1293852530,"answer_id":4573092,"question_id":4572896,"body_markdown":"Your example appears to be the second alternative discussed in the article [*Component Border*][1]. Instead, you may want to `install()` a [`ComponentBorder`][2], a third alterative described later in the same article.\r\n\r\n[1]:http://tips4java.wordpress.com/2009/09/27/component-border/\r\n[2]:http://www.camick.com/java/source/ComponentBorder.java","title":"Button inside text box","body":"<p>Your example appears to be the second alternative discussed in the article <a href=\"http://tips4java.wordpress.com/2009/09/27/component-border/\" rel=\"nofollow\"><em>Component Border</em></a>. Instead, you may want to <code>install()</code> a <a href=\"http://www.camick.com/java/source/ComponentBorder.java\" rel=\"nofollow\"><code>ComponentBorder</code></a>, a third alterative described later in the same article.</p>\n"},{"tags":[],"owner":{"account_id":44852,"reputation":322224,"user_id":131872,"accept_rate":100,"display_name":"camickr"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1293863179,"creation_date":1293863179,"answer_id":4573353,"question_id":4572896,"body_markdown":"&gt; Is there any solution such that the textbox size remains fixed?\r\n\r\nI&#39;m guessing you are creating the JTextField like:\r\n\r\n    JTextField textField = new JTextField();\r\n\r\nIn this case the text field size changes as you add text to it.\r\n\r\nInstead you should use:\r\n\r\n    JTextField textField = new JTextField(10);\r\n\r\nand the text field will remain a constant size an hold a minimum of 10 characters before scrolling.\r\n\r\n\r\n","title":"Button inside text box","body":"<blockquote>\n  <p>Is there any solution such that the textbox size remains fixed?</p>\n</blockquote>\n\n<p>I'm guessing you are creating the JTextField like:</p>\n\n<pre><code>JTextField textField = new JTextField();\n</code></pre>\n\n<p>In this case the text field size changes as you add text to it.</p>\n\n<p>Instead you should use:</p>\n\n<pre><code>JTextField textField = new JTextField(10);\n</code></pre>\n\n<p>and the text field will remain a constant size an hold a minimum of 10 characters before scrolling.</p>\n"}],"owner":{"account_id":259665,"reputation":307,"user_id":542719,"accept_rate":48,"display_name":"user542719"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2131,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":5,"score":2,"last_activity_date":1682892676,"creation_date":1293845068,"question_id":4572896,"body_markdown":"My code shows a button inside a text box; but when the input value changes, the size of the text box also changes.  That I don&#39;t like.  Is there any solution such that the textbox size remains fixed?  Or any other idea on how to create a button inside textbox? The following is code from the article [_Component Border_][1]:\r\n\r\n    JPanel panel = new JPanel();\r\n    panel.setLayout( new FlowLayout(FlowLayout.CENTER, 0, 0) );\r\n    panel.add(textField);\r\n    panel.add(button);\r\n    panel.setBackground( textField.getBackground() );\r\n    panel.setBorder( textField.getBorder() );\r\n    textField.setBorder(null);\r\n\r\n\r\n  [1]: https://tips4java.wordpress.com/2009/09/27/component-border/","title":"Button inside text box","body":"<p>My code shows a button inside a text box; but when the input value changes, the size of the text box also changes.  That I don't like.  Is there any solution such that the textbox size remains fixed?  Or any other idea on how to create a button inside textbox? The following is code from the article <a href=\"https://tips4java.wordpress.com/2009/09/27/component-border/\" rel=\"nofollow noreferrer\"><em>Component Border</em></a>:</p>\n<pre><code>JPanel panel = new JPanel();\npanel.setLayout( new FlowLayout(FlowLayout.CENTER, 0, 0) );\npanel.add(textField);\npanel.add(button);\npanel.setBackground( textField.getBackground() );\npanel.setBorder( textField.getBorder() );\ntextField.setBorder(null);\n</code></pre>\n"},{"tags":["javascript","java","jsp","netbeans","netbeans-8"],"comments":[{"owner":{"account_id":1107950,"reputation":238,"user_id":1098953,"display_name":"premek.v"},"score":0,"creation_date":1682110633,"post_id":76076607,"comment_id":134169776,"body_markdown":"what errors are you getting?","body":"what errors are you getting?"},{"owner":{"account_id":7372094,"reputation":900,"user_id":5611967,"accept_rate":32,"display_name":"Michael Cropper"},"score":0,"creation_date":1682110693,"post_id":76076607,"comment_id":134169781,"body_markdown":"On those two lines, I&#39;ll update question, they are IDE errors that are failing to compile the .war because it&#39;s treating those lines as Java rather than JavaScript (I think)","body":"On those two lines, I&#39;ll update question, they are IDE errors that are failing to compile the .war because it&#39;s treating those lines as Java rather than JavaScript (I think)"},{"owner":{"account_id":1107950,"reputation":238,"user_id":1098953,"display_name":"premek.v"},"score":1,"creation_date":1682110791,"post_id":76076607,"comment_id":134169796,"body_markdown":"you can try to put the script in a separate .js file instead of the jsp directly and link it using: `&lt;script type=&quot;module&quot; src=&quot;script.js&quot;&gt;&lt;/script&gt;`","body":"you can try to put the script in a separate .js file instead of the jsp directly and link it using: <code>&lt;script type=&quot;module&quot; src=&quot;script.js&quot;&gt;&lt;&#47;script&gt;</code>"},{"owner":{"account_id":7372094,"reputation":900,"user_id":5611967,"accept_rate":32,"display_name":"Michael Cropper"},"score":0,"creation_date":1682111416,"post_id":76076607,"comment_id":134169894,"body_markdown":"That is a very good simplistic idea @premek.v that strangely never entered my mind. Let me give that a go now, that is highly likely to solve the problem. That being said... It actually isn&#39;t going to solve the full issue since I need to dynamically insert the data into the JavaScript that is required for the chart to load (i.e. from the DB). But I&#39;ll give the external stuff a go now out of interest to see if this static example works with that.","body":"That is a very good simplistic idea @premek.v that strangely never entered my mind. Let me give that a go now, that is highly likely to solve the problem. That being said... It actually isn&#39;t going to solve the full issue since I need to dynamically insert the data into the JavaScript that is required for the chart to load (i.e. from the DB). But I&#39;ll give the external stuff a go now out of interest to see if this static example works with that."},{"owner":{"account_id":7372094,"reputation":900,"user_id":5611967,"accept_rate":32,"display_name":"Michael Cropper"},"score":0,"creation_date":1682112228,"post_id":76076607,"comment_id":134170022,"body_markdown":"@premek.v I&#39;ve just added Update 2 in the original question. Think you might be on to something there. I&#39;m just not familiar with JavaScript Modules (first I&#39;d actually heard of them when playing with this!). So I&#39;ve got a bit of learning to do on these things. Got a different error, but certainly feels as though you may be along the right lines in your thinking. What do you think the next thing to try is?","body":"@premek.v I&#39;ve just added Update 2 in the original question. Think you might be on to something there. I&#39;m just not familiar with JavaScript Modules (first I&#39;d actually heard of them when playing with this!). So I&#39;ve got a bit of learning to do on these things. Got a different error, but certainly feels as though you may be along the right lines in your thinking. What do you think the next thing to try is?"},{"owner":{"account_id":7372094,"reputation":900,"user_id":5611967,"accept_rate":32,"display_name":"Michael Cropper"},"score":0,"creation_date":1682112398,"post_id":76076607,"comment_id":134170035,"body_markdown":"To add, the above Update 2 has resulted in the IDE Console stopping throwing the errors I mentioned. Hence why it feels like this is in the right direction of travel.","body":"To add, the above Update 2 has resulted in the IDE Console stopping throwing the errors I mentioned. Hence why it feels like this is in the right direction of travel."},{"owner":{"account_id":7372094,"reputation":900,"user_id":5611967,"accept_rate":32,"display_name":"Michael Cropper"},"score":0,"creation_date":1682113372,"post_id":76076607,"comment_id":134170191,"body_markdown":"Reading around, feels like this may be something ES6 related that I don&#39;t quite understand yet.","body":"Reading around, feels like this may be something ES6 related that I don&#39;t quite understand yet."},{"owner":{"account_id":7372094,"reputation":900,"user_id":5611967,"accept_rate":32,"display_name":"Michael Cropper"},"score":0,"creation_date":1682116969,"post_id":76076607,"comment_id":134170595,"body_markdown":"@kingdaro Based on your answer in https://stackoverflow.com/questions/49338193/how-to-use-code-from-script-with-type-module - I feel like you probably know the answer to this challenge?","body":"@kingdaro Based on your answer in <a href=\"https://stackoverflow.com/questions/49338193/how-to-use-code-from-script-with-type-module\" title=\"how to use code from script with type module\">stackoverflow.com/questions/49338193/&hellip;</a> - I feel like you probably know the answer to this challenge?"},{"owner":{"account_id":12743722,"reputation":19956,"user_id":12567365,"display_name":"andrewJames"},"score":1,"creation_date":1682125191,"post_id":76076607,"comment_id":134171308,"body_markdown":"JavaScript interprets `${...}` as a placeholder inside a JS template literal. JSP interprets `${...}` as a JSP EL expression. I think that is why your template literal works in a plain HTML page (no JSP), but why it gets hijacked in a JSP page - and throws a **Java** error. Try replacing your JavaScript template literals with strings - for example, try this: `const uid2 = &quot;O-&quot; + Math.random().toString(16).slice(2);`. See what happens...","body":"JavaScript interprets <code>${...}</code> as a placeholder inside a JS template literal. JSP interprets <code>${...}</code> as a JSP EL expression. I think that is why your template literal works in a plain HTML page (no JSP), but why it gets hijacked in a JSP page - and throws a <b>Java</b> error. Try replacing your JavaScript template literals with strings - for example, try this: <code>const uid2 = &quot;O-&quot; + Math.random().toString(16).slice(2);</code>. See what happens..."},{"owner":{"account_id":7423601,"reputation":18712,"user_id":5646962,"display_name":"Thomas Kl&#228;ger"},"score":1,"creation_date":1682146127,"post_id":76076607,"comment_id":134172539,"body_markdown":"According to https://stackoverflow.com/questions/8271033/how-to-escape-el-dollar-signs you can probably leave the JavaScript code in the JSP template if in the JavaScript code you replace `${` with `\\${` which escapes it for the JSP processor.","body":"According to <a href=\"https://stackoverflow.com/questions/8271033/how-to-escape-el-dollar-signs\" title=\"how to escape el dollar signs\">stackoverflow.com/questions/8271033/&hellip;</a> you can probably leave the JavaScript code in the JSP template if in the JavaScript code you replace <code>${</code> with <code>\\${</code> which escapes it for the JSP processor."},{"owner":{"account_id":7372094,"reputation":900,"user_id":5611967,"accept_rate":32,"display_name":"Michael Cropper"},"score":0,"creation_date":1682371874,"post_id":76076607,"comment_id":134202059,"body_markdown":"Good suggestion @ThomasKl&#228;ger with the \\$ I&#39;ve tried that, but no luck unfortunately. It seems to try to render but doesn&#39;t work properly. At least from the testing I&#39;ve tried.","body":"Good suggestion @ThomasKl&#228;ger with the \\$ I&#39;ve tried that, but no luck unfortunately. It seems to try to render but doesn&#39;t work properly. At least from the testing I&#39;ve tried."},{"owner":{"account_id":7372094,"reputation":900,"user_id":5611967,"accept_rate":32,"display_name":"Michael Cropper"},"score":0,"creation_date":1682372950,"post_id":76076607,"comment_id":134202197,"body_markdown":"@andrewJames You are most likely correct here. I&#39;m struggling to actually implement this though. The JavaScript code is from the D3 JavaScript library which has awful documentation, extremely cryptic naming conventions and no comments in their code snippets so even with a lot of playing trying to convert their half baked code snippets from JavaScript Template Literals to Strings, I can&#39;t get the thing to work when I&#39;m trying to convert this. It&#39;s all a best guest.","body":"@andrewJames You are most likely correct here. I&#39;m struggling to actually implement this though. The JavaScript code is from the D3 JavaScript library which has awful documentation, extremely cryptic naming conventions and no comments in their code snippets so even with a lot of playing trying to convert their half baked code snippets from JavaScript Template Literals to Strings, I can&#39;t get the thing to work when I&#39;m trying to convert this. It&#39;s all a best guest."},{"owner":{"account_id":12743722,"reputation":19956,"user_id":12567365,"display_name":"andrewJames"},"score":0,"creation_date":1682375954,"post_id":76076607,"comment_id":134202583,"body_markdown":"Probably too late, but a suggestion: If you try any suggested fixes, then maybe you can edit your question to show what you tried and what happened when you tried it. Maybe you got a new, different error. That could be a sign of progress. Maybe next time... But I guess you have a different way forward now. Good luck!","body":"Probably too late, but a suggestion: If you try any suggested fixes, then maybe you can edit your question to show what you tried and what happened when you tried it. Maybe you got a new, different error. That could be a sign of progress. Maybe next time... But I guess you have a different way forward now. Good luck!"}],"answers":[{"tags":[],"owner":{"account_id":7423601,"reputation":18712,"user_id":5646962,"display_name":"Thomas Kl&#228;ger"},"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1682459710,"creation_date":1682459710,"answer_id":76105713,"question_id":76076607,"body_markdown":"I was able to make your HTML page work as JSP. For this it was necessary to replace each and every instance of `${` in your page with `\\${` (10 times in total). Maybe in your test you forgot one of them.\r\n\r\nThe converted template is\r\n\r\n```JSP\r\n&lt;!DOCTYPE html&gt;\r\n&lt;html&gt;\r\n&lt;head&gt;&lt;/head&gt;\r\n&lt;body&gt;\r\n&lt;script type=&quot;module&quot;&gt;\r\n\r\n    import * as d3 from &quot;https://cdn.jsdelivr.net/npm/d3@7/+esm&quot;;\r\n\r\n    const svg = BubbleChart([[&quot;Hello&quot;, 10], [&quot;World&quot;, 20]]);\r\n    document.body.appendChild(svg);\r\n\r\n    // Copyright 2021 Observable, Inc.\r\n    // Released under the ISC license.\r\n    // https://observablehq.com/@d3/bubble-chart\r\n    function BubbleChart(data, {\r\n        name = ([x]) =&gt; x, // alias for label\r\n        label = name, // given d in data, returns text to display on the bubble\r\n        value = ([, y]) =&gt; y, // given d in data, returns a quantitative size\r\n        group, // given d in data, returns a categorical value for color\r\n        title, // given d in data, returns text to show on hover\r\n        link, // given a node d, its link (if any)\r\n        linkTarget = &quot;_blank&quot;, // the target attribute for links, if any\r\n        width = 640, // outer width, in pixels\r\n        height = width, // outer height, in pixels\r\n        padding = 3, // padding between circles\r\n        margin = 1, // default margins\r\n        marginTop = margin, // top margin, in pixels\r\n        marginRight = margin, // right margin, in pixels\r\n        marginBottom = margin, // bottom margin, in pixels\r\n        marginLeft = margin, // left margin, in pixels\r\n        groups, // array of group names (the domain of the color scale)\r\n        colors = d3.schemeTableau10, // an array of colors (for groups)\r\n        fill = &quot;#ccc&quot;, // a static fill color, if no group channel is specified\r\n        fillOpacity = 0.7, // the fill opacity of the bubbles\r\n        stroke, // a static stroke around the bubbles\r\n        strokeWidth, // the stroke width around the bubbles, if any\r\n        strokeOpacity, // the stroke opacity around the bubbles, if any\r\n    } = {}) {\r\n        // Compute the values.\r\n        const D = d3.map(data, d =&gt; d);\r\n        const V = d3.map(data, value);\r\n        const G = group == null ? null : d3.map(data, group);\r\n        const I = d3.range(V.length).filter(i =&gt; V[i] &gt; 0);\r\n\r\n        // Unique the groups.\r\n        if (G &amp;&amp; groups === undefined) groups = I.map(i =&gt; G[i]);\r\n        groups = G &amp;&amp; new d3.InternSet(groups);\r\n\r\n        // Construct scales.\r\n        const color = G &amp;&amp; d3.scaleOrdinal(groups, colors);\r\n\r\n        // Compute labels and titles.\r\n        const L = label == null ? null : d3.map(data, label);\r\n        const T = title === undefined ? L : title == null ? null : d3.map(data, title);\r\n\r\n        // Compute layout: create a 1-deep hierarchy, and pack it.\r\n        const root = d3.pack()\r\n            .size([width - marginLeft - marginRight, height - marginTop - marginBottom])\r\n            .padding(padding)\r\n            (d3.hierarchy({children: I})\r\n                .sum(i =&gt; V[i]));\r\n\r\n        const svg = d3.create(&quot;svg&quot;)\r\n            .attr(&quot;width&quot;, width)\r\n            .attr(&quot;height&quot;, height)\r\n            .attr(&quot;viewBox&quot;, [-marginLeft, -marginTop, width, height])\r\n            .attr(&quot;style&quot;, &quot;max-width: 100%; height: auto; height: intrinsic;&quot;)\r\n            .attr(&quot;fill&quot;, &quot;currentColor&quot;)\r\n            .attr(&quot;font-size&quot;, 10)\r\n            .attr(&quot;font-family&quot;, &quot;sans-serif&quot;)\r\n            .attr(&quot;text-anchor&quot;, &quot;middle&quot;);\r\n\r\n        const leaf = svg.selectAll(&quot;a&quot;)\r\n            .data(root.leaves())\r\n            .join(&quot;a&quot;)\r\n            .attr(&quot;xlink:href&quot;, link == null ? null : (d, i) =&gt; link(D[d.data], i, data))\r\n            .attr(&quot;target&quot;, link == null ? null : linkTarget)\r\n            .attr(&quot;transform&quot;, d =&gt; `translate(\\${d.x},\\${d.y})`);\r\n\r\n        leaf.append(&quot;circle&quot;)\r\n            .attr(&quot;stroke&quot;, stroke)\r\n            .attr(&quot;stroke-width&quot;, strokeWidth)\r\n            .attr(&quot;stroke-opacity&quot;, strokeOpacity)\r\n            .attr(&quot;fill&quot;, G ? d =&gt; color(G[d.data]) : fill == null ? &quot;none&quot; : fill)\r\n            .attr(&quot;fill-opacity&quot;, fillOpacity)\r\n            .attr(&quot;r&quot;, d =&gt; d.r);\r\n\r\n        if (T) leaf.append(&quot;title&quot;)\r\n            .text(d =&gt; T[d.data]);\r\n\r\n        if (L) {\r\n            // A unique identifier for clip paths (to avoid conflicts).\r\n            const uid = `O-\\${Math.random().toString(16).slice(2)}`;\r\n\r\n            leaf.append(&quot;clipPath&quot;)\r\n                .attr(&quot;id&quot;, d =&gt; `\\${uid}-clip-\\${d.data}`)\r\n                .append(&quot;circle&quot;)\r\n                .attr(&quot;r&quot;, d =&gt; d.r);\r\n\r\n            leaf.append(&quot;text&quot;)\r\n                .attr(&quot;clip-path&quot;, d =&gt; `url(\\${new URL(`#\\${uid}-clip-\\${d.data}`, location)})`)\r\n                .selectAll(&quot;tspan&quot;)\r\n                .data(d =&gt; `\\${L[d.data]}`.split(/\\n/g))\r\n                .join(&quot;tspan&quot;)\r\n                .attr(&quot;x&quot;, 0)\r\n                .attr(&quot;y&quot;, (d, i, D) =&gt; `\\${i - D.length / 2 + 0.85}em`)\r\n                .attr(&quot;fill-opacity&quot;, (d, i, D) =&gt; i === D.length - 1 ? 0.7 : null)\r\n                .text(d =&gt; d);\r\n        }\r\n\r\n        return Object.assign(svg.node(), {scales: {color}});\r\n    }\r\n\r\n&lt;/script&gt;\r\n&lt;/body&gt;\r\n&lt;/html&gt;\r\n```\r\n\r\nI tested this locally with Tomcat 10.1.8 by adding this page to the example webapp and then entering the URL in a webbrowser.","title":"JSP Struggling with JavaScript Module Syntax","body":"<p>I was able to make your HTML page work as JSP. For this it was necessary to replace each and every instance of <code>${</code> in your page with <code>\\${</code> (10 times in total). Maybe in your test you forgot one of them.</p>\n<p>The converted template is</p>\n<pre><code>&lt;!DOCTYPE html&gt;\n&lt;html&gt;\n&lt;head&gt;&lt;/head&gt;\n&lt;body&gt;\n&lt;script type=&quot;module&quot;&gt;\n\n    import * as d3 from &quot;https://cdn.jsdelivr.net/npm/d3@7/+esm&quot;;\n\n    const svg = BubbleChart([[&quot;Hello&quot;, 10], [&quot;World&quot;, 20]]);\n    document.body.appendChild(svg);\n\n    // Copyright 2021 Observable, Inc.\n    // Released under the ISC license.\n    // https://observablehq.com/@d3/bubble-chart\n    function BubbleChart(data, {\n        name = ([x]) =&gt; x, // alias for label\n        label = name, // given d in data, returns text to display on the bubble\n        value = ([, y]) =&gt; y, // given d in data, returns a quantitative size\n        group, // given d in data, returns a categorical value for color\n        title, // given d in data, returns text to show on hover\n        link, // given a node d, its link (if any)\n        linkTarget = &quot;_blank&quot;, // the target attribute for links, if any\n        width = 640, // outer width, in pixels\n        height = width, // outer height, in pixels\n        padding = 3, // padding between circles\n        margin = 1, // default margins\n        marginTop = margin, // top margin, in pixels\n        marginRight = margin, // right margin, in pixels\n        marginBottom = margin, // bottom margin, in pixels\n        marginLeft = margin, // left margin, in pixels\n        groups, // array of group names (the domain of the color scale)\n        colors = d3.schemeTableau10, // an array of colors (for groups)\n        fill = &quot;#ccc&quot;, // a static fill color, if no group channel is specified\n        fillOpacity = 0.7, // the fill opacity of the bubbles\n        stroke, // a static stroke around the bubbles\n        strokeWidth, // the stroke width around the bubbles, if any\n        strokeOpacity, // the stroke opacity around the bubbles, if any\n    } = {}) {\n        // Compute the values.\n        const D = d3.map(data, d =&gt; d);\n        const V = d3.map(data, value);\n        const G = group == null ? null : d3.map(data, group);\n        const I = d3.range(V.length).filter(i =&gt; V[i] &gt; 0);\n\n        // Unique the groups.\n        if (G &amp;&amp; groups === undefined) groups = I.map(i =&gt; G[i]);\n        groups = G &amp;&amp; new d3.InternSet(groups);\n\n        // Construct scales.\n        const color = G &amp;&amp; d3.scaleOrdinal(groups, colors);\n\n        // Compute labels and titles.\n        const L = label == null ? null : d3.map(data, label);\n        const T = title === undefined ? L : title == null ? null : d3.map(data, title);\n\n        // Compute layout: create a 1-deep hierarchy, and pack it.\n        const root = d3.pack()\n            .size([width - marginLeft - marginRight, height - marginTop - marginBottom])\n            .padding(padding)\n            (d3.hierarchy({children: I})\n                .sum(i =&gt; V[i]));\n\n        const svg = d3.create(&quot;svg&quot;)\n            .attr(&quot;width&quot;, width)\n            .attr(&quot;height&quot;, height)\n            .attr(&quot;viewBox&quot;, [-marginLeft, -marginTop, width, height])\n            .attr(&quot;style&quot;, &quot;max-width: 100%; height: auto; height: intrinsic;&quot;)\n            .attr(&quot;fill&quot;, &quot;currentColor&quot;)\n            .attr(&quot;font-size&quot;, 10)\n            .attr(&quot;font-family&quot;, &quot;sans-serif&quot;)\n            .attr(&quot;text-anchor&quot;, &quot;middle&quot;);\n\n        const leaf = svg.selectAll(&quot;a&quot;)\n            .data(root.leaves())\n            .join(&quot;a&quot;)\n            .attr(&quot;xlink:href&quot;, link == null ? null : (d, i) =&gt; link(D[d.data], i, data))\n            .attr(&quot;target&quot;, link == null ? null : linkTarget)\n            .attr(&quot;transform&quot;, d =&gt; `translate(\\${d.x},\\${d.y})`);\n\n        leaf.append(&quot;circle&quot;)\n            .attr(&quot;stroke&quot;, stroke)\n            .attr(&quot;stroke-width&quot;, strokeWidth)\n            .attr(&quot;stroke-opacity&quot;, strokeOpacity)\n            .attr(&quot;fill&quot;, G ? d =&gt; color(G[d.data]) : fill == null ? &quot;none&quot; : fill)\n            .attr(&quot;fill-opacity&quot;, fillOpacity)\n            .attr(&quot;r&quot;, d =&gt; d.r);\n\n        if (T) leaf.append(&quot;title&quot;)\n            .text(d =&gt; T[d.data]);\n\n        if (L) {\n            // A unique identifier for clip paths (to avoid conflicts).\n            const uid = `O-\\${Math.random().toString(16).slice(2)}`;\n\n            leaf.append(&quot;clipPath&quot;)\n                .attr(&quot;id&quot;, d =&gt; `\\${uid}-clip-\\${d.data}`)\n                .append(&quot;circle&quot;)\n                .attr(&quot;r&quot;, d =&gt; d.r);\n\n            leaf.append(&quot;text&quot;)\n                .attr(&quot;clip-path&quot;, d =&gt; `url(\\${new URL(`#\\${uid}-clip-\\${d.data}`, location)})`)\n                .selectAll(&quot;tspan&quot;)\n                .data(d =&gt; `\\${L[d.data]}`.split(/\\n/g))\n                .join(&quot;tspan&quot;)\n                .attr(&quot;x&quot;, 0)\n                .attr(&quot;y&quot;, (d, i, D) =&gt; `\\${i - D.length / 2 + 0.85}em`)\n                .attr(&quot;fill-opacity&quot;, (d, i, D) =&gt; i === D.length - 1 ? 0.7 : null)\n                .text(d =&gt; d);\n        }\n\n        return Object.assign(svg.node(), {scales: {color}});\n    }\n\n&lt;/script&gt;\n&lt;/body&gt;\n&lt;/html&gt;\n</code></pre>\n<p>I tested this locally with Tomcat 10.1.8 by adding this page to the example webapp and then entering the URL in a webbrowser.</p>\n"}],"owner":{"account_id":7372094,"reputation":900,"user_id":5611967,"accept_rate":32,"display_name":"Michael Cropper"},"comment_count":13,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":266,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":76105713,"answer_count":1,"score":1,"last_activity_date":1682891985,"creation_date":1682110078,"question_id":76076607,"body_markdown":"Bit confused by this one. \r\n\r\nSample: HelloBubble.html\r\n\r\n```\r\n&lt;!DOCTYPE html&gt;\r\n&lt;html&gt;\r\n&lt;head&gt;&lt;/head&gt;\r\n&lt;body&gt;\r\n&lt;script type=&quot;module&quot;&gt;\r\n\r\nimport * as d3 from &quot;https://cdn.jsdelivr.net/npm/d3@7/+esm&quot;;\r\n\r\nconst svg = BubbleChart([[&quot;Hello&quot;, 10], [&quot;World&quot;, 20]]);\r\ndocument.body.appendChild(svg);\r\n\r\n// Copyright 2021 Observable, Inc.\r\n// Released under the ISC license.\r\n// https://observablehq.com/@d3/bubble-chart\r\nfunction BubbleChart(data, {\r\n  name = ([x]) =&gt; x, // alias for label\r\n  label = name, // given d in data, returns text to display on the bubble\r\n  value = ([, y]) =&gt; y, // given d in data, returns a quantitative size\r\n  group, // given d in data, returns a categorical value for color\r\n  title, // given d in data, returns text to show on hover\r\n  link, // given a node d, its link (if any)\r\n  linkTarget = &quot;_blank&quot;, // the target attribute for links, if any\r\n  width = 640, // outer width, in pixels\r\n  height = width, // outer height, in pixels\r\n  padding = 3, // padding between circles\r\n  margin = 1, // default margins\r\n  marginTop = margin, // top margin, in pixels\r\n  marginRight = margin, // right margin, in pixels\r\n  marginBottom = margin, // bottom margin, in pixels\r\n  marginLeft = margin, // left margin, in pixels\r\n  groups, // array of group names (the domain of the color scale)\r\n  colors = d3.schemeTableau10, // an array of colors (for groups)\r\n  fill = &quot;#ccc&quot;, // a static fill color, if no group channel is specified\r\n  fillOpacity = 0.7, // the fill opacity of the bubbles\r\n  stroke, // a static stroke around the bubbles\r\n  strokeWidth, // the stroke width around the bubbles, if any\r\n  strokeOpacity, // the stroke opacity around the bubbles, if any\r\n} = {}) {\r\n  // Compute the values.\r\n  const D = d3.map(data, d =&gt; d);\r\n  const V = d3.map(data, value);\r\n  const G = group == null ? null : d3.map(data, group);\r\n  const I = d3.range(V.length).filter(i =&gt; V[i] &gt; 0);\r\n\r\n  // Unique the groups.\r\n  if (G &amp;&amp; groups === undefined) groups = I.map(i =&gt; G[i]);\r\n  groups = G &amp;&amp; new d3.InternSet(groups);\r\n\r\n  // Construct scales.\r\n  const color = G &amp;&amp; d3.scaleOrdinal(groups, colors);\r\n\r\n  // Compute labels and titles.\r\n  const L = label == null ? null : d3.map(data, label);\r\n  const T = title === undefined ? L : title == null ? null : d3.map(data, title);\r\n\r\n  // Compute layout: create a 1-deep hierarchy, and pack it.\r\n  const root = d3.pack()\r\n      .size([width - marginLeft - marginRight, height - marginTop - marginBottom])\r\n      .padding(padding)\r\n    (d3.hierarchy({children: I})\r\n      .sum(i =&gt; V[i]));\r\n\r\n  const svg = d3.create(&quot;svg&quot;)\r\n      .attr(&quot;width&quot;, width)\r\n      .attr(&quot;height&quot;, height)\r\n      .attr(&quot;viewBox&quot;, [-marginLeft, -marginTop, width, height])\r\n      .attr(&quot;style&quot;, &quot;max-width: 100%; height: auto; height: intrinsic;&quot;)\r\n      .attr(&quot;fill&quot;, &quot;currentColor&quot;)\r\n      .attr(&quot;font-size&quot;, 10)\r\n      .attr(&quot;font-family&quot;, &quot;sans-serif&quot;)\r\n      .attr(&quot;text-anchor&quot;, &quot;middle&quot;);\r\n\r\n  const leaf = svg.selectAll(&quot;a&quot;)\r\n    .data(root.leaves())\r\n    .join(&quot;a&quot;)\r\n      .attr(&quot;xlink:href&quot;, link == null ? null : (d, i) =&gt; link(D[d.data], i, data))\r\n      .attr(&quot;target&quot;, link == null ? null : linkTarget)\r\n      .attr(&quot;transform&quot;, d =&gt; `translate(${d.x},${d.y})`);\r\n\r\n  leaf.append(&quot;circle&quot;)\r\n      .attr(&quot;stroke&quot;, stroke)\r\n      .attr(&quot;stroke-width&quot;, strokeWidth)\r\n      .attr(&quot;stroke-opacity&quot;, strokeOpacity)\r\n      .attr(&quot;fill&quot;, G ? d =&gt; color(G[d.data]) : fill == null ? &quot;none&quot; : fill)\r\n      .attr(&quot;fill-opacity&quot;, fillOpacity)\r\n      .attr(&quot;r&quot;, d =&gt; d.r);\r\n\r\n  if (T) leaf.append(&quot;title&quot;)\r\n      .text(d =&gt; T[d.data]);\r\n\r\n  if (L) {\r\n    // A unique identifier for clip paths (to avoid conflicts).\r\n    const uid = `O-${Math.random().toString(16).slice(2)}`;\r\n\r\n    leaf.append(&quot;clipPath&quot;)\r\n        .attr(&quot;id&quot;, d =&gt; `${uid}-clip-${d.data}`)\r\n      .append(&quot;circle&quot;)\r\n        .attr(&quot;r&quot;, d =&gt; d.r);\r\n\r\n    leaf.append(&quot;text&quot;)\r\n        .attr(&quot;clip-path&quot;, d =&gt; `url(${new URL(`#${uid}-clip-${d.data}`, location)})`)\r\n      .selectAll(&quot;tspan&quot;)\r\n      .data(d =&gt; `${L[d.data]}`.split(/\\n/g))\r\n      .join(&quot;tspan&quot;)\r\n        .attr(&quot;x&quot;, 0)\r\n        .attr(&quot;y&quot;, (d, i, D) =&gt; `${i - D.length / 2 + 0.85}em`)\r\n        .attr(&quot;fill-opacity&quot;, (d, i, D) =&gt; i === D.length - 1 ? 0.7 : null)\r\n        .text(d =&gt; d);\r\n  }\r\n\r\n  return Object.assign(svg.node(), {scales: {color}});\r\n}\r\n\r\n&lt;/script&gt;\r\n&lt;/body&gt;\r\n&lt;/html&gt;\r\n```\r\n\r\nNow I put the exact same content inside a JSP, and I have problems, specifically with these couple of lines;\r\n\r\n```\r\n.attr(&quot;clip-path&quot;, d =&gt; `url(${new URL(`#${uid}-clip-${d.data}`, location)})`)\r\n```\r\n\r\nand \r\n\r\n```\r\nconst uid = `O-${Math.random().toString(16).slice(2)}`;\r\n```\r\n\r\nShould say that this is a copy and paste JavaScript example from the docs of D3 (give or take...)\r\n\r\nI&#39;m just confused why this works fine in a basic .html file, but I get errors failing to compile the .war file when I&#39;m using NetBeans IDE 8.2 (yes, I know, it&#39;s old... I like it) with a Java Maven Web App Project. \r\n\r\nI&#39;m not a JavaScript guru. But what is very apparent in those two lines I&#39;m getting errors on is that this looks extremely similar to Java syntax. Feels as though JavaScript is perhaps getting a bit too big for it&#39;s boots here and is confusing the IDE. \r\n\r\nIn addition, I also have no idea what this code actually does at the minute either. Took me a few weeks to get a working example from D3 that I could actually get working with the docs being so poor. Hence I&#39;m assuming the root cause is highly likely more modern JavaScript syntax (and modules) and an older NetBeans getting a bit confused. \r\n\r\nI&#39;d just prefer not to upgrade my local development environment because of one library (although I&#39;m probably going to have to test this while working through this question on StackOverflow to rule that out...)\r\n\r\n**Update 1 - Errors in IDE when Running JSP in Web Browser**\r\n\r\nError being caused by the two lines above. \r\n\r\nIn IDE on compile is - Technically not on compile, but has a big red line saying &quot;Encoutered &quot;URL&quot; at line 1, column 7. Was expecting one of; {loads of different types of opening/closing brackets, about 20 of them}&quot;;\r\n\r\nThen when I run the JSP I get this error appearing in the IDE console (the page fails to load in the web browser);\r\n\r\n```\r\n***lots of other stuff***\r\n\r\n javax.el.MethodNotFoundException: Method not found: class java.lang.String.slice(java.lang.Long)\r\n\r\n415: \r\n416:             if (L) {\r\n417:             // A unique identifier for clip paths (to avoid conflicts).\r\n418:             const uid = `O-${Math.random().toString(16).slice(2)}`;\r\n419: \r\n420:             leaf.append(&quot;clipPath&quot;)\r\n421:             .attr(&quot;id&quot;, d =&gt; `${uid}-clip-${d.data}`)\r\n\r\n***lots of other stuff***\r\n\r\nStacktrace:] with root cause\r\n javax.el.MethodNotFoundException: Method not found: class java.lang.String.slice(java.lang.Long)\r\n```\r\n\r\nThen I delete that line causing the error and get a different error;\r\n\r\n```\r\n21-Apr-2023 22:05:24.783 SEVERE [http-nio-8084-exec-295] org.apache.catalina.core.ApplicationDispatcher.invoke Servlet.service() for servlet jsp threw exception\r\n javax.el.ELException: The identifier [new] is not a valid Java identifier as required by section 1.19 of the EL specification (Identifier ::= Java language identifier). This check can be disabled by setting the system property org.apache.el.parser.SKIP_IDENTIFIER_CHECK to true.\r\n\r\n***lots of other stuff***\r\n\r\n423:             .attr(&quot;r&quot;, d =&gt; d.r);\r\n424: \r\n425:             leaf.append(&quot;text&quot;)\r\n426:             .attr(&quot;clip-path&quot;, d =&gt; `url(${new URL(`#${uid}-clip-${d.data}`, location)})`)\r\n427:             .selectAll(&quot;tspan&quot;)\r\n428:             .data(d =&gt; `${L[d.data]}`.split(/\\n/g))\r\n429:             .join(&quot;tspan&quot;)\r\n\r\n\r\nStacktrace:] with root cause\r\n javax.el.ELException: The identifier [new] is not a valid Java identifier as required by section 1.19 of the EL specification (Identifier ::= Java language identifier). This check can be disabled by setting the system property org.apache.el.parser.SKIP_IDENTIFIER_CHECK to true.\r\n```\r\n\r\n**Update 2 - Trying with JavaScript in External .js File**\r\nWe may be onto something here. So what I have just tried... is splitting this out as suggested. \r\n\r\nSo we now have;\r\n - HelloBubble.jsp\r\n - /JavaScript/HelloBubble.js\r\n\r\nJSP;\r\n```\r\n&lt;script src=&quot;/JavaScript/HelloBubble.js&quot;&gt;&lt;/script&gt;\r\n        &lt;script type=&quot;module&quot;&gt;\r\n            import * as d3 from &quot;https://cdn.jsdelivr.net/npm/d3@7/+esm&quot;;\r\n\r\n            const svg = BubbleChart([[&quot;Hello&quot;, 10], [&quot;World&quot;, 20]]);\r\n            document.body.appendChild(svg);\r\n        &lt;/script&gt;\r\n```\r\n\r\nJavaScript;\r\n```\r\nRest of code from earlier, excluding for ease\r\n```\r\n\r\nWhen I do this, this is the error I&#39;m getting in the Web Browser Console when loading the page - Seems like it is a step in the right direction though;\r\n\r\n```\r\ncaught TypeError: svg.selectAll(...).data(...).join is not a function\r\n    at BubbleChart (HelloBubble.js:73:14)\r\n    at HelloBubble**[.jsp]**:524:25\r\n```\r\n\r\nAdded the **[.jsp]** bit above for ease of understanding.\r\n\r\nThis is feeling to me that the two bits of JavaScript (the data in the JSP, and the core function in the .js file) aren&#39;t quite talking to each other. \r\n\r\nFor completeness, this is now the complete contents of the HelloBubble.js file;\r\n\r\n```\r\n// Copyright 2021 Observable, Inc.\r\n// Released under the ISC license.\r\n// https://observablehq.com/@d3/bubble-chart\r\nfunction BubbleChart(data, {\r\nname = ([x]) =&gt; x, // alias for label\r\n        label = name, // given d in data, returns text to display on the bubble\r\n        value = ([, y]) =&gt; y, // given d in data, returns a quantitative size\r\n        group, // given d in data, returns a categorical value for color\r\n        title, // given d in data, returns text to show on hover\r\n        link, // given a node d, its link (if any)\r\n        linkTarget = &quot;_blank&quot;, // the target attribute for links, if any\r\n        width = 640, // outer width, in pixels\r\n        height = width, // outer height, in pixels\r\n        padding = 3, // padding between circles\r\n        margin = 1, // default margins\r\n        marginTop = margin, // top margin, in pixels\r\n        marginRight = margin, // right margin, in pixels\r\n        marginBottom = margin, // bottom margin, in pixels\r\n        marginLeft = margin, // left margin, in pixels\r\n        groups, // array of group names (the domain of the color scale)\r\n        colors = d3.schemeTableau10, // an array of colors (for groups)\r\n        fill = &quot;#ccc&quot;, // a static fill color, if no group channel is specified\r\n        fillOpacity = 0.7, // the fill opacity of the bubbles\r\n        stroke, // a static stroke around the bubbles\r\n        strokeWidth, // the stroke width around the bubbles, if any\r\n        strokeOpacity, // the stroke opacity around the bubbles, if any\r\n} = {}) {\r\n    // Compute the values.\r\n    const D = d3.map(data, d =&gt; d);\r\n    const V = d3.map(data, value);\r\n    const G = group == null ? null : d3.map(data, group);\r\n    const I = d3.range(V.length).filter(i =&gt; V[i] &gt; 0);\r\n\r\n    // Unique the groups.\r\n    if (G &amp;&amp; groups === undefined)\r\n        groups = I.map(i =&gt; G[i]);\r\n    groups = G &amp;&amp; new d3.InternSet(groups);\r\n\r\n    // Construct scales.\r\n    const color = G &amp;&amp; d3.scaleOrdinal(groups, colors);\r\n\r\n    // Compute labels and titles.\r\n    const L = label == null ? null : d3.map(data, label);\r\n    const T = title === undefined ? L : title == null ? null : d3.map(data, title);\r\n\r\n    // Compute layout: create a 1-deep hierarchy, and pack it.\r\n    const root = d3.pack()\r\n            .size([width - marginLeft - marginRight, height - marginTop - marginBottom])\r\n            .padding(padding)\r\n            (d3.hierarchy({children: I})\r\n                    .sum(i =&gt; V[i]));\r\n\r\n    const svg = d3.create(&quot;svg&quot;)\r\n            .attr(&quot;width&quot;, width)\r\n            .attr(&quot;height&quot;, height)\r\n            .attr(&quot;viewBox&quot;, [-marginLeft, -marginTop, width, height])\r\n            .attr(&quot;style&quot;, &quot;max-width: 100%; height: auto; height: intrinsic;&quot;)\r\n            .attr(&quot;fill&quot;, &quot;currentColor&quot;)\r\n            .attr(&quot;font-size&quot;, 10)\r\n            .attr(&quot;font-family&quot;, &quot;sans-serif&quot;)\r\n            .attr(&quot;text-anchor&quot;, &quot;middle&quot;);\r\n\r\n    const leaf = svg.selectAll(&quot;a&quot;)\r\n            .data(root.leaves())\r\n            .join(&quot;a&quot;)\r\n            .attr(&quot;xlink:href&quot;, link == null ? null : (d, i) =&gt; link(D[d.data], i, data))\r\n            .attr(&quot;target&quot;, link == null ? null : linkTarget)\r\n            .attr(&quot;transform&quot;, d =&gt; `translate(${d.x},${d.y})`);\r\n\r\n    leaf.append(&quot;circle&quot;)\r\n            .attr(&quot;stroke&quot;, stroke)\r\n            .attr(&quot;stroke-width&quot;, strokeWidth)\r\n            .attr(&quot;stroke-opacity&quot;, strokeOpacity)\r\n            .attr(&quot;fill&quot;, G ? d =&gt; color(G[d.data]) : fill == null ? &quot;none&quot; : fill)\r\n            .attr(&quot;fill-opacity&quot;, fillOpacity)\r\n            .attr(&quot;r&quot;, d =&gt; d.r);\r\n\r\n    if (T)\r\n        leaf.append(&quot;title&quot;)\r\n                .text(d =&gt; T[d.data]);\r\n\r\n    if (L) {\r\n        // A unique identifier for clip paths (to avoid conflicts).\r\n\r\n\r\n        leaf.append(&quot;clipPath&quot;)\r\n                .attr(&quot;id&quot;, d =&gt; `${uid}-clip-${d.data}`)\r\n                .append(&quot;circle&quot;)\r\n                .attr(&quot;r&quot;, d =&gt; d.r);\r\n\r\n        leaf.append(&quot;text&quot;)\r\n                .attr(&quot;clip-path&quot;, d =&gt; `url(${new URL(`#${uid}-clip-${d.data}`, location)})`)\r\n                .selectAll(&quot;tspan&quot;)\r\n                .data(d =&gt; `${L[d.data]}`.split(/\\n/g))\r\n                .join(&quot;tspan&quot;)\r\n                .attr(&quot;x&quot;, 0)\r\n                .attr(&quot;y&quot;, (d, i, D) =&gt; `${i - D.length / 2 + 0.85}em`)\r\n                .attr(&quot;fill-opacity&quot;, (d, i, D) =&gt; i === D.length - 1 ? 0.7 : null)\r\n                .text(d =&gt; d);\r\n    }\r\n\r\n    return Object.assign(svg.node(), {scales: {color}});\r\n}\r\n```","title":"JSP Struggling with JavaScript Module Syntax","body":"<p>Bit confused by this one.</p>\n<p>Sample: HelloBubble.html</p>\n<pre><code>&lt;!DOCTYPE html&gt;\n&lt;html&gt;\n&lt;head&gt;&lt;/head&gt;\n&lt;body&gt;\n&lt;script type=&quot;module&quot;&gt;\n\nimport * as d3 from &quot;https://cdn.jsdelivr.net/npm/d3@7/+esm&quot;;\n\nconst svg = BubbleChart([[&quot;Hello&quot;, 10], [&quot;World&quot;, 20]]);\ndocument.body.appendChild(svg);\n\n// Copyright 2021 Observable, Inc.\n// Released under the ISC license.\n// https://observablehq.com/@d3/bubble-chart\nfunction BubbleChart(data, {\n  name = ([x]) =&gt; x, // alias for label\n  label = name, // given d in data, returns text to display on the bubble\n  value = ([, y]) =&gt; y, // given d in data, returns a quantitative size\n  group, // given d in data, returns a categorical value for color\n  title, // given d in data, returns text to show on hover\n  link, // given a node d, its link (if any)\n  linkTarget = &quot;_blank&quot;, // the target attribute for links, if any\n  width = 640, // outer width, in pixels\n  height = width, // outer height, in pixels\n  padding = 3, // padding between circles\n  margin = 1, // default margins\n  marginTop = margin, // top margin, in pixels\n  marginRight = margin, // right margin, in pixels\n  marginBottom = margin, // bottom margin, in pixels\n  marginLeft = margin, // left margin, in pixels\n  groups, // array of group names (the domain of the color scale)\n  colors = d3.schemeTableau10, // an array of colors (for groups)\n  fill = &quot;#ccc&quot;, // a static fill color, if no group channel is specified\n  fillOpacity = 0.7, // the fill opacity of the bubbles\n  stroke, // a static stroke around the bubbles\n  strokeWidth, // the stroke width around the bubbles, if any\n  strokeOpacity, // the stroke opacity around the bubbles, if any\n} = {}) {\n  // Compute the values.\n  const D = d3.map(data, d =&gt; d);\n  const V = d3.map(data, value);\n  const G = group == null ? null : d3.map(data, group);\n  const I = d3.range(V.length).filter(i =&gt; V[i] &gt; 0);\n\n  // Unique the groups.\n  if (G &amp;&amp; groups === undefined) groups = I.map(i =&gt; G[i]);\n  groups = G &amp;&amp; new d3.InternSet(groups);\n\n  // Construct scales.\n  const color = G &amp;&amp; d3.scaleOrdinal(groups, colors);\n\n  // Compute labels and titles.\n  const L = label == null ? null : d3.map(data, label);\n  const T = title === undefined ? L : title == null ? null : d3.map(data, title);\n\n  // Compute layout: create a 1-deep hierarchy, and pack it.\n  const root = d3.pack()\n      .size([width - marginLeft - marginRight, height - marginTop - marginBottom])\n      .padding(padding)\n    (d3.hierarchy({children: I})\n      .sum(i =&gt; V[i]));\n\n  const svg = d3.create(&quot;svg&quot;)\n      .attr(&quot;width&quot;, width)\n      .attr(&quot;height&quot;, height)\n      .attr(&quot;viewBox&quot;, [-marginLeft, -marginTop, width, height])\n      .attr(&quot;style&quot;, &quot;max-width: 100%; height: auto; height: intrinsic;&quot;)\n      .attr(&quot;fill&quot;, &quot;currentColor&quot;)\n      .attr(&quot;font-size&quot;, 10)\n      .attr(&quot;font-family&quot;, &quot;sans-serif&quot;)\n      .attr(&quot;text-anchor&quot;, &quot;middle&quot;);\n\n  const leaf = svg.selectAll(&quot;a&quot;)\n    .data(root.leaves())\n    .join(&quot;a&quot;)\n      .attr(&quot;xlink:href&quot;, link == null ? null : (d, i) =&gt; link(D[d.data], i, data))\n      .attr(&quot;target&quot;, link == null ? null : linkTarget)\n      .attr(&quot;transform&quot;, d =&gt; `translate(${d.x},${d.y})`);\n\n  leaf.append(&quot;circle&quot;)\n      .attr(&quot;stroke&quot;, stroke)\n      .attr(&quot;stroke-width&quot;, strokeWidth)\n      .attr(&quot;stroke-opacity&quot;, strokeOpacity)\n      .attr(&quot;fill&quot;, G ? d =&gt; color(G[d.data]) : fill == null ? &quot;none&quot; : fill)\n      .attr(&quot;fill-opacity&quot;, fillOpacity)\n      .attr(&quot;r&quot;, d =&gt; d.r);\n\n  if (T) leaf.append(&quot;title&quot;)\n      .text(d =&gt; T[d.data]);\n\n  if (L) {\n    // A unique identifier for clip paths (to avoid conflicts).\n    const uid = `O-${Math.random().toString(16).slice(2)}`;\n\n    leaf.append(&quot;clipPath&quot;)\n        .attr(&quot;id&quot;, d =&gt; `${uid}-clip-${d.data}`)\n      .append(&quot;circle&quot;)\n        .attr(&quot;r&quot;, d =&gt; d.r);\n\n    leaf.append(&quot;text&quot;)\n        .attr(&quot;clip-path&quot;, d =&gt; `url(${new URL(`#${uid}-clip-${d.data}`, location)})`)\n      .selectAll(&quot;tspan&quot;)\n      .data(d =&gt; `${L[d.data]}`.split(/\\n/g))\n      .join(&quot;tspan&quot;)\n        .attr(&quot;x&quot;, 0)\n        .attr(&quot;y&quot;, (d, i, D) =&gt; `${i - D.length / 2 + 0.85}em`)\n        .attr(&quot;fill-opacity&quot;, (d, i, D) =&gt; i === D.length - 1 ? 0.7 : null)\n        .text(d =&gt; d);\n  }\n\n  return Object.assign(svg.node(), {scales: {color}});\n}\n\n&lt;/script&gt;\n&lt;/body&gt;\n&lt;/html&gt;\n</code></pre>\n<p>Now I put the exact same content inside a JSP, and I have problems, specifically with these couple of lines;</p>\n<pre><code>.attr(&quot;clip-path&quot;, d =&gt; `url(${new URL(`#${uid}-clip-${d.data}`, location)})`)\n</code></pre>\n<p>and</p>\n<pre><code>const uid = `O-${Math.random().toString(16).slice(2)}`;\n</code></pre>\n<p>Should say that this is a copy and paste JavaScript example from the docs of D3 (give or take...)</p>\n<p>I'm just confused why this works fine in a basic .html file, but I get errors failing to compile the .war file when I'm using NetBeans IDE 8.2 (yes, I know, it's old... I like it) with a Java Maven Web App Project.</p>\n<p>I'm not a JavaScript guru. But what is very apparent in those two lines I'm getting errors on is that this looks extremely similar to Java syntax. Feels as though JavaScript is perhaps getting a bit too big for it's boots here and is confusing the IDE.</p>\n<p>In addition, I also have no idea what this code actually does at the minute either. Took me a few weeks to get a working example from D3 that I could actually get working with the docs being so poor. Hence I'm assuming the root cause is highly likely more modern JavaScript syntax (and modules) and an older NetBeans getting a bit confused.</p>\n<p>I'd just prefer not to upgrade my local development environment because of one library (although I'm probably going to have to test this while working through this question on StackOverflow to rule that out...)</p>\n<p><strong>Update 1 - Errors in IDE when Running JSP in Web Browser</strong></p>\n<p>Error being caused by the two lines above.</p>\n<p>In IDE on compile is - Technically not on compile, but has a big red line saying &quot;Encoutered &quot;URL&quot; at line 1, column 7. Was expecting one of; {loads of different types of opening/closing brackets, about 20 of them}&quot;;</p>\n<p>Then when I run the JSP I get this error appearing in the IDE console (the page fails to load in the web browser);</p>\n<pre><code>***lots of other stuff***\n\n javax.el.MethodNotFoundException: Method not found: class java.lang.String.slice(java.lang.Long)\n\n415: \n416:             if (L) {\n417:             // A unique identifier for clip paths (to avoid conflicts).\n418:             const uid = `O-${Math.random().toString(16).slice(2)}`;\n419: \n420:             leaf.append(&quot;clipPath&quot;)\n421:             .attr(&quot;id&quot;, d =&gt; `${uid}-clip-${d.data}`)\n\n***lots of other stuff***\n\nStacktrace:] with root cause\n javax.el.MethodNotFoundException: Method not found: class java.lang.String.slice(java.lang.Long)\n</code></pre>\n<p>Then I delete that line causing the error and get a different error;</p>\n<pre><code>21-Apr-2023 22:05:24.783 SEVERE [http-nio-8084-exec-295] org.apache.catalina.core.ApplicationDispatcher.invoke Servlet.service() for servlet jsp threw exception\n javax.el.ELException: The identifier [new] is not a valid Java identifier as required by section 1.19 of the EL specification (Identifier ::= Java language identifier). This check can be disabled by setting the system property org.apache.el.parser.SKIP_IDENTIFIER_CHECK to true.\n\n***lots of other stuff***\n\n423:             .attr(&quot;r&quot;, d =&gt; d.r);\n424: \n425:             leaf.append(&quot;text&quot;)\n426:             .attr(&quot;clip-path&quot;, d =&gt; `url(${new URL(`#${uid}-clip-${d.data}`, location)})`)\n427:             .selectAll(&quot;tspan&quot;)\n428:             .data(d =&gt; `${L[d.data]}`.split(/\\n/g))\n429:             .join(&quot;tspan&quot;)\n\n\nStacktrace:] with root cause\n javax.el.ELException: The identifier [new] is not a valid Java identifier as required by section 1.19 of the EL specification (Identifier ::= Java language identifier). This check can be disabled by setting the system property org.apache.el.parser.SKIP_IDENTIFIER_CHECK to true.\n</code></pre>\n<p><strong>Update 2 - Trying with JavaScript in External .js File</strong>\nWe may be onto something here. So what I have just tried... is splitting this out as suggested.</p>\n<p>So we now have;</p>\n<ul>\n<li>HelloBubble.jsp</li>\n<li>/JavaScript/HelloBubble.js</li>\n</ul>\n<p>JSP;</p>\n<pre><code>&lt;script src=&quot;/JavaScript/HelloBubble.js&quot;&gt;&lt;/script&gt;\n        &lt;script type=&quot;module&quot;&gt;\n            import * as d3 from &quot;https://cdn.jsdelivr.net/npm/d3@7/+esm&quot;;\n\n            const svg = BubbleChart([[&quot;Hello&quot;, 10], [&quot;World&quot;, 20]]);\n            document.body.appendChild(svg);\n        &lt;/script&gt;\n</code></pre>\n<p>JavaScript;</p>\n<pre><code>Rest of code from earlier, excluding for ease\n</code></pre>\n<p>When I do this, this is the error I'm getting in the Web Browser Console when loading the page - Seems like it is a step in the right direction though;</p>\n<pre><code>caught TypeError: svg.selectAll(...).data(...).join is not a function\n    at BubbleChart (HelloBubble.js:73:14)\n    at HelloBubble**[.jsp]**:524:25\n</code></pre>\n<p>Added the <strong>[.jsp]</strong> bit above for ease of understanding.</p>\n<p>This is feeling to me that the two bits of JavaScript (the data in the JSP, and the core function in the .js file) aren't quite talking to each other.</p>\n<p>For completeness, this is now the complete contents of the HelloBubble.js file;</p>\n<pre><code>// Copyright 2021 Observable, Inc.\n// Released under the ISC license.\n// https://observablehq.com/@d3/bubble-chart\nfunction BubbleChart(data, {\nname = ([x]) =&gt; x, // alias for label\n        label = name, // given d in data, returns text to display on the bubble\n        value = ([, y]) =&gt; y, // given d in data, returns a quantitative size\n        group, // given d in data, returns a categorical value for color\n        title, // given d in data, returns text to show on hover\n        link, // given a node d, its link (if any)\n        linkTarget = &quot;_blank&quot;, // the target attribute for links, if any\n        width = 640, // outer width, in pixels\n        height = width, // outer height, in pixels\n        padding = 3, // padding between circles\n        margin = 1, // default margins\n        marginTop = margin, // top margin, in pixels\n        marginRight = margin, // right margin, in pixels\n        marginBottom = margin, // bottom margin, in pixels\n        marginLeft = margin, // left margin, in pixels\n        groups, // array of group names (the domain of the color scale)\n        colors = d3.schemeTableau10, // an array of colors (for groups)\n        fill = &quot;#ccc&quot;, // a static fill color, if no group channel is specified\n        fillOpacity = 0.7, // the fill opacity of the bubbles\n        stroke, // a static stroke around the bubbles\n        strokeWidth, // the stroke width around the bubbles, if any\n        strokeOpacity, // the stroke opacity around the bubbles, if any\n} = {}) {\n    // Compute the values.\n    const D = d3.map(data, d =&gt; d);\n    const V = d3.map(data, value);\n    const G = group == null ? null : d3.map(data, group);\n    const I = d3.range(V.length).filter(i =&gt; V[i] &gt; 0);\n\n    // Unique the groups.\n    if (G &amp;&amp; groups === undefined)\n        groups = I.map(i =&gt; G[i]);\n    groups = G &amp;&amp; new d3.InternSet(groups);\n\n    // Construct scales.\n    const color = G &amp;&amp; d3.scaleOrdinal(groups, colors);\n\n    // Compute labels and titles.\n    const L = label == null ? null : d3.map(data, label);\n    const T = title === undefined ? L : title == null ? null : d3.map(data, title);\n\n    // Compute layout: create a 1-deep hierarchy, and pack it.\n    const root = d3.pack()\n            .size([width - marginLeft - marginRight, height - marginTop - marginBottom])\n            .padding(padding)\n            (d3.hierarchy({children: I})\n                    .sum(i =&gt; V[i]));\n\n    const svg = d3.create(&quot;svg&quot;)\n            .attr(&quot;width&quot;, width)\n            .attr(&quot;height&quot;, height)\n            .attr(&quot;viewBox&quot;, [-marginLeft, -marginTop, width, height])\n            .attr(&quot;style&quot;, &quot;max-width: 100%; height: auto; height: intrinsic;&quot;)\n            .attr(&quot;fill&quot;, &quot;currentColor&quot;)\n            .attr(&quot;font-size&quot;, 10)\n            .attr(&quot;font-family&quot;, &quot;sans-serif&quot;)\n            .attr(&quot;text-anchor&quot;, &quot;middle&quot;);\n\n    const leaf = svg.selectAll(&quot;a&quot;)\n            .data(root.leaves())\n            .join(&quot;a&quot;)\n            .attr(&quot;xlink:href&quot;, link == null ? null : (d, i) =&gt; link(D[d.data], i, data))\n            .attr(&quot;target&quot;, link == null ? null : linkTarget)\n            .attr(&quot;transform&quot;, d =&gt; `translate(${d.x},${d.y})`);\n\n    leaf.append(&quot;circle&quot;)\n            .attr(&quot;stroke&quot;, stroke)\n            .attr(&quot;stroke-width&quot;, strokeWidth)\n            .attr(&quot;stroke-opacity&quot;, strokeOpacity)\n            .attr(&quot;fill&quot;, G ? d =&gt; color(G[d.data]) : fill == null ? &quot;none&quot; : fill)\n            .attr(&quot;fill-opacity&quot;, fillOpacity)\n            .attr(&quot;r&quot;, d =&gt; d.r);\n\n    if (T)\n        leaf.append(&quot;title&quot;)\n                .text(d =&gt; T[d.data]);\n\n    if (L) {\n        // A unique identifier for clip paths (to avoid conflicts).\n\n\n        leaf.append(&quot;clipPath&quot;)\n                .attr(&quot;id&quot;, d =&gt; `${uid}-clip-${d.data}`)\n                .append(&quot;circle&quot;)\n                .attr(&quot;r&quot;, d =&gt; d.r);\n\n        leaf.append(&quot;text&quot;)\n                .attr(&quot;clip-path&quot;, d =&gt; `url(${new URL(`#${uid}-clip-${d.data}`, location)})`)\n                .selectAll(&quot;tspan&quot;)\n                .data(d =&gt; `${L[d.data]}`.split(/\\n/g))\n                .join(&quot;tspan&quot;)\n                .attr(&quot;x&quot;, 0)\n                .attr(&quot;y&quot;, (d, i, D) =&gt; `${i - D.length / 2 + 0.85}em`)\n                .attr(&quot;fill-opacity&quot;, (d, i, D) =&gt; i === D.length - 1 ? 0.7 : null)\n                .text(d =&gt; d);\n    }\n\n    return Object.assign(svg.node(), {scales: {color}});\n}\n</code></pre>\n"},{"tags":["java","swing"],"comments":[{"owner":{"account_id":247613,"reputation":284089,"user_id":522444,"accept_rate":100,"display_name":"Hovercraft Full Of Eels"},"score":3,"creation_date":1682792294,"post_id":76137590,"comment_id":134272164,"body_markdown":"Several issues are immediately visible: If you override a painting method, you should call the super&#39;s method in your override to allow the component to do housekeeping painting -- you don&#39;t do this. You should almost never paint directly in a paint method, but rather should paint in a JPanel&#39;s paintComponent method (and call super.paintComponent(g) in the override). If you&#39;re overriding a JLabel, don&#39;t override its paint or paintComponent. Perhaps override paintIcon. Never use a java.util.Timer for a Swing project as this isn&#39;t thread-safe. use a javax.swing.Timer.","body":"Several issues are immediately visible: If you override a painting method, you should call the super&#39;s method in your override to allow the component to do housekeeping painting -- you don&#39;t do this. You should almost never paint directly in a paint method, but rather should paint in a JPanel&#39;s paintComponent method (and call super.paintComponent(g) in the override). If you&#39;re overriding a JLabel, don&#39;t override its paint or paintComponent. Perhaps override paintIcon. Never use a java.util.Timer for a Swing project as this isn&#39;t thread-safe. use a javax.swing.Timer."},{"owner":{"account_id":247613,"reputation":284089,"user_id":522444,"accept_rate":100,"display_name":"Hovercraft Full Of Eels"},"score":3,"creation_date":1682792325,"post_id":76137590,"comment_id":134272165,"body_markdown":"You also use null layout and set bounds,... not good","body":"You also use null layout and set bounds,... not good"},{"owner":{"account_id":247613,"reputation":284089,"user_id":522444,"accept_rate":100,"display_name":"Hovercraft Full Of Eels"},"score":2,"creation_date":1682800301,"post_id":76137590,"comment_id":134273182,"body_markdown":"Oh, and this, `new Color(255, 255, 255, 50)` is valid Java but not well used by the Swing library. It does not work well with semi-opaque components.","body":"Oh, and this, <code>new Color(255, 255, 255, 50)</code> is valid Java but not well used by the Swing library. It does not work well with semi-opaque components."},{"owner":{"account_id":969721,"reputation":344508,"user_id":992484,"accept_rate":60,"display_name":"MadProgrammer"},"score":1,"creation_date":1682809555,"post_id":76137590,"comment_id":134274141,"body_markdown":"Swing is also not thread safe. You should not be updating the UI or any state the UI relies on from outside the context of the Event Dispatching Thread","body":"Swing is also not thread safe. You should not be updating the UI or any state the UI relies on from outside the context of the Event Dispatching Thread"},{"owner":{"account_id":969721,"reputation":344508,"user_id":992484,"accept_rate":60,"display_name":"MadProgrammer"},"score":1,"creation_date":1682809640,"post_id":76137590,"comment_id":134274151,"body_markdown":"`public static class JImage extends JLabel {` .... why?  `JLabel` already has icon support - this seems otherwise completely redudent","body":"<code>public static class JImage extends JLabel {</code> .... why?  <code>JLabel</code> already has icon support - this seems otherwise completely redudent"}],"answers":[{"tags":[],"owner":{"account_id":969721,"reputation":344508,"user_id":992484,"accept_rate":60,"display_name":"MadProgrammer"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1682891340,"creation_date":1682823213,"answer_id":76139344,"question_id":76137590,"body_markdown":"&gt; What did I do wrong ?\r\n\r\nA lot of things (sorry).\r\n\r\nSwing is single threaded AND not thread safe.  This is means that you can&#39;t run blocking or long running operations on the Event Dispatching Thread, it also means that you shouldn&#39;t update the UI or the any state the UI relies on from out side the Event Dispatching Thread context.\r\n\r\nSo, your loop in your `main` method and the use of `java.util.Timer` are violating the thread safety rule.\r\n\r\nSee [Concurrency in Swing](https://docs.oracle.com/javase/tutorial/uiswing/concurrency/index.html) for more details.\r\n\r\nUsing `null` layouts.  This might not seem like a big deal to you, but it will become a massive headache as you progress further.  Take the time to learn and understand the various layout options available to you.\r\n\r\nSee [Laying Out Components Within a Container](https://docs.oracle.com/javase/tutorial/uiswing/layout/index.html) for more details.\r\n\r\nYou&#39;re violating the painting process.\r\n\r\n    @Override\r\n    public void paint(Graphics g){\r\n        g.drawImage(image == null ? null : image.getImage(), 0, 0, this.getWidth(), this.getHeight(), null);\r\n     }\r\n\r\n`paint` is a very complex method which does a lot of work, as a generally recommendation, you should avoid overriding `paint` and instead override `paintComponent`, but you must ensure that you either call `super.paintComponent` or re-implement the functionality that the method does.\r\n\r\n`Graphics` is a shared context which is passed to each component during a paint process.  One of the jobs that the painting process does, is &quot;clear&quot; what was previously painted, this is why it&#39;s important to ensure that you&#39;re working within the painting process.\r\n\r\nI would suggest looking at [Painting in AWT and Swing](https://www.oracle.com/java/technologies/painting.html) and [Performing Custom Painting](https://docs.oracle.com/javase/tutorial/uiswing/painting/index.html)\r\n\r\nThe `JImage` class doesn&#39;t really make sense. `JLabel` is already very good at rendering images.  If you wanted to make a simpler workflow (which you&#39;re not really doing), I might consider creating a factory method or utility class to create a `JLabel` with the configuration you want.\r\n\r\n`jProgressBar.setBackground(new Color(255, 255, 255, 50));` - Swing components doesn&#39;t support alpha based colors, they are either fully opaque or fully transparent.\r\n\r\nIMHO I&#39;d be wary of doing something like `public JImage(String path){`.  I mean, what does `String path` actually mean?  Is it a file path on the local disk?  Is it a named resource? Is it something else.  Generally speaking, I would recommend using `File` and `URL` as it&#39;s clear what the source should be - just saying.\r\n\r\n# So, what&#39;s the solution?\r\n\r\nMake use of a `SwingWorker` to perform long running operations, this allows you to easily sync updates back the Event Dispatching Thread.  For repeating operations, use a Swing `Timer`, the &quot;ticks&quot; will be updated in the context of the Event Dispatching Thread.\r\n\r\nInstead of `JImage`, I&#39;d just make use of `JLabel`, if required, making a factory method to create it with the configuration I needed.\r\n\r\nWith regards to the translucent background, that&#39;s a little more tricky, but I would be tempted to create a &quot;translucent pane&quot; and fake it.  I would then put the `JProgressBar` on this component.\r\n\r\nFor example...\r\n\r\n[![enter image description here][1]][1]\r\n\r\nNow, this might &quot;look&quot; complicated, but once you understand the basic principles, you can re-apply them to a lot of things you do.\r\n\r\nFirst, there&#39;s a custom component which renders a background image, this extends from `JPanel` and is important, as some solutions might suggest using a `JLabel`, but `JLabel` is a complex component and calculates it&#39;s preferred size based on the `icon` and `text` and not the child components, this can easily lead in you into no end of issues.\r\n\r\nWe start with the background pane, onto this, we add the logo and the &quot;progress content&quot;.  This is important, as we &quot;cheat&quot; a little here.  We add the logo and progress content in such away that they occupy the same space at the same time.  This allows the logo to appear centred on the screen and won&#39;t be affected by the other components.\r\n\r\nOn the &quot;progress content&quot;, we add a &quot;fill&quot; component, this will force the progress bar and label to occupy the lower half of the view.  Then we add the progress bar and label (wrapped in yet another component) to the &quot;progress content&quot;.\r\n\r\nThis will make the progress bar and label to appear in the lower half of the view.\r\n\r\nThis might &quot;seem&quot; complicated, but is a very flexible solution.  The size of the logo and font don&#39;t have adverse effects on each other, especially on systems where the font size might be larger then you original designed for.\r\n\r\nTranslucency is &quot;faked&quot; through another component, `TranslucentPane`.  You could create a custom `JProgressBar`, but this becomes more complicated as the paint process is more involved.\r\n\r\n    import java.awt.AlphaComposite;\r\n    import java.awt.BorderLayout;\r\n    import java.awt.Color;\r\n    import java.awt.Dimension;\r\n    import java.awt.EventQueue;\r\n    import java.awt.Graphics;\r\n    import java.awt.Graphics2D;\r\n    import java.awt.GridBagConstraints;\r\n    import java.awt.GridBagLayout;\r\n    import java.awt.event.ActionEvent;\r\n    import java.awt.event.ActionListener;\r\n    import java.awt.image.BufferedImage;\r\n    import java.io.IOException;\r\n    import java.util.logging.Level;\r\n    import java.util.logging.Logger;\r\n    import javax.imageio.ImageIO;\r\n    import javax.swing.ImageIcon;\r\n    import javax.swing.JFrame;\r\n    import javax.swing.JLabel;\r\n    import javax.swing.JPanel;\r\n    import javax.swing.JProgressBar;\r\n    import javax.swing.SwingConstants;\r\n    import javax.swing.Timer;\r\n    import javax.swing.border.EmptyBorder;\r\n    import javax.swing.plaf.basic.BasicProgressBarUI;\r\n\r\n    public class Main {\r\n        public static void main(String[] args) {\r\n            new Main();\r\n        }\r\n\r\n        public Main() {\r\n            EventQueue.invokeLater(new Runnable() {\r\n                @Override\r\n                public void run() {\r\n                    try {\r\n                        JFrame frame = new JFrame();\r\n                        SplashScreen splashScreen = new SplashScreen();\r\n                        frame.add(splashScreen);\r\n                        frame.pack();\r\n                        frame.setLocationRelativeTo(null);\r\n                        frame.setVisible(true);\r\n\r\n                        // I&#39;m using a Timer here to simulate &quot;work&quot;\r\n                        // Depending on your needs, you might need to use\r\n                        // a SwingWorker instead.\r\n                        Timer timer = new Timer(100, new ActionListener() {\r\n                            private int progress = 0;\r\n\r\n                            @Override\r\n                            public void actionPerformed(ActionEvent e) {\r\n                                progress += 1;\r\n                                if (progress &gt;= 100) {\r\n                                    ((Timer) e.getSource()).stop();\r\n                                }\r\n                                splashScreen.setProgress(progress);\r\n                            }\r\n                        });\r\n                        timer.start();\r\n                    } catch (IOException ex) {\r\n                        Logger.getLogger(Main.class.getName()).log(Level.SEVERE, null, ex);\r\n                    }\r\n                }\r\n            });\r\n        }\r\n\r\n        public class SplashScreen extends JPanel {\r\n\r\n            private final JLabel dotLabel = new JLabel(&quot;&quot;);\r\n            private final JProgressBar progressBar = new JProgressBar(SwingConstants.HORIZONTAL, 0, 100);\r\n\r\n            private String message = &quot;&quot;;\r\n            private int dots = 0;\r\n\r\n            private Timer dotTimer;\r\n\r\n            public SplashScreen() throws IOException {\r\n                setLayout(new BorderLayout());\r\n\r\n                BackgroundPane backgroundPane = new BackgroundPane(ImageIO.read(getClass().getResource(&quot;/images/Mando01-50.png&quot;)));\r\n                backgroundPane.setBorder(new EmptyBorder(8, 8, 8, 8));\r\n                backgroundPane.setLayout(new GridBagLayout());\r\n\r\n                add(backgroundPane);\r\n\r\n                GridBagConstraints gbc = new GridBagConstraints();\r\n                gbc.gridx = 0;\r\n                gbc.gridy = 0;\r\n                gbc.anchor = GridBagConstraints.CENTER;\r\n                gbc.weightx = 1;\r\n                gbc.weighty = 1;\r\n\r\n                JLabel logo = new JLabel(new ImageIcon(getClass().getResource(&quot;/images/Paw.png&quot;)));\r\n                backgroundPane.add(logo, gbc);\r\n\r\n                JPanel progressContentPane = new JPanel(new GridBagLayout());\r\n                progressContentPane.setOpaque(false);\r\n\r\n                gbc.fill = GridBagConstraints.BOTH;\r\n                backgroundPane.add(progressContentPane, gbc);\r\n\r\n                // This just fills the top half of the view with an empty space\r\n                // forcing the progress view down to the bottom half the\r\n                // the screen.  This is done so we can &quot;fake&quot; the label position,\r\n                // allowing to appear in the center of the screen and it will\r\n                // be uneffected by the other elements ... tricky\r\n                JPanel fillerPane = new JPanel();\r\n                fillerPane.setOpaque(false);\r\n\r\n                gbc = new GridBagConstraints();\r\n                gbc.gridwidth = GridBagConstraints.REMAINDER;\r\n                gbc.anchor = GridBagConstraints.CENTER;\r\n                gbc.weightx = 1;\r\n                gbc.weighty = 0.5;\r\n                gbc.fill = gbc.BOTH;\r\n\r\n                JPanel progressPane = new JPanel(new GridBagLayout());\r\n                progressPane.setOpaque(false);\r\n\r\n                progressContentPane.add(fillerPane, gbc);\r\n                progressContentPane.add(progressPane, gbc);\r\n\r\n                gbc = new GridBagConstraints();\r\n                gbc.gridwidth = GridBagConstraints.REMAINDER;\r\n                gbc.anchor = GridBagConstraints.CENTER;\r\n                gbc.weightx = 1;\r\n\r\n                TranslucentPane progressBackgroundPane = new TranslucentPane();\r\n                progressBackgroundPane.setLayout(new BorderLayout());\r\n                progressBackgroundPane.setBorder(new EmptyBorder(8, 8, 8, 8));\r\n                progressBackgroundPane.setAlpha(0.5f);\r\n\r\n                progressBackgroundPane.add(progressBar);\r\n\r\n                progressPane.add(progressBackgroundPane, gbc);\r\n                progressPane.add(dotLabel, gbc);\r\n\r\n                progressBar.setStringPainted(true);\r\n                progressBar.setBorderPainted(false);\r\n                progressBar.setValue(0);\r\n                progressBar.setBounds(50, 270, 500, 30);\r\n                progressBar.setForeground(Color.WHITE);\r\n                progressBar.setUI(new BasicProgressBarUI() {\r\n                    protected Color getSelectionBackground() {\r\n                        return new Color(0x66, 0x10, 0xf2);\r\n                    }\r\n\r\n                    protected Color getSelectionForeground() {\r\n                        return new Color(0x6f, 0x42, 0xc1);\r\n                    }\r\n                });\r\n\r\n                dotTimer = new Timer(500, new ActionListener() {\r\n                    @Override\r\n                    public void actionPerformed(ActionEvent e) {\r\n                        dots = Math.max(1, (dots + 1) % 5);\r\n                        dotLabel.setText(getMessage());\r\n                    }\r\n                });\r\n            }\r\n\r\n            @Override\r\n            public void addNotify() {\r\n                super.addNotify();\r\n                dotTimer.start();\r\n            }\r\n\r\n            @Override\r\n            public void removeNotify() {\r\n                super.removeNotify();\r\n                dotTimer.stop();\r\n            }\r\n\r\n            public void setMessage(String message) {\r\n                this.message = message;\r\n                dotLabel.setText(getMessage());\r\n            }\r\n\r\n            public void setProgress(int progress) {\r\n                progressBar.setValue(progress);\r\n            }\r\n\r\n            private String getMessage() {\r\n                return this.message + new String(new char[this.dots]).replace(&quot;\\0&quot;, &quot;.&quot;);\r\n            }\r\n\r\n            public class BackgroundPane extends JPanel {\r\n\r\n                private BufferedImage backgroundImage;\r\n\r\n                public BackgroundPane(BufferedImage backgroundImage) {\r\n                    this.backgroundImage = backgroundImage;\r\n                }\r\n\r\n                public BufferedImage getBackgroundImage() {\r\n                    return backgroundImage;\r\n                }\r\n\r\n                @Override\r\n                public Dimension getPreferredSize() {\r\n                    BufferedImage backgroundImage = getBackgroundImage();\r\n                    if (backgroundImage == null) {\r\n                        return super.getPreferredSize();\r\n                    }\r\n                    return new Dimension(backgroundImage.getWidth(), backgroundImage.getHeight());\r\n                }\r\n\r\n                @Override\r\n                protected void paintComponent(Graphics g) {\r\n                    super.paintComponent(g);\r\n                    BufferedImage backgroundImage = getBackgroundImage();\r\n                    if (backgroundImage == null) {\r\n                        return;\r\n                    }\r\n                    int x = (getWidth() - backgroundImage.getWidth()) / 2;\r\n                    int y = (getHeight() - backgroundImage.getHeight()) / 2;\r\n                    g.drawImage(backgroundImage, x, y, this);\r\n                }\r\n            }\r\n\r\n            public class TranslucentPane extends JPanel {\r\n                private float alpha = 1f;\r\n\r\n                public TranslucentPane() {\r\n                    setOpaque(false);\r\n                }\r\n\r\n                public float getAlpha() {\r\n                    return alpha;\r\n                }\r\n\r\n                public void setAlpha(float alpha) {\r\n                    this.alpha = alpha;\r\n                }\r\n\r\n                @Override\r\n                protected void paintComponent(Graphics g) {\r\n                    super.paintComponent(g);\r\n                    Graphics2D g2d = (Graphics2D) g.create();\r\n                    g2d.setColor(getBackground());\r\n                    g2d.setComposite(AlphaComposite.SrcOver.derive(getAlpha()));\r\n                    g2d.fillRect(0, 0, getWidth(), getHeight());\r\n                    g2d.dispose();\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/47aJa.gif\r\n\r\nRemember, this is just an example, and there are number ways you might achieve the same effect(s), but this addresses the core issues you&#39;ve presented.","title":"JLabel is re-rendered on JProgressBar","body":"<blockquote>\n<p>What did I do wrong ?</p>\n</blockquote>\n<p>A lot of things (sorry).</p>\n<p>Swing is single threaded AND not thread safe.  This is means that you can't run blocking or long running operations on the Event Dispatching Thread, it also means that you shouldn't update the UI or the any state the UI relies on from out side the Event Dispatching Thread context.</p>\n<p>So, your loop in your <code>main</code> method and the use of <code>java.util.Timer</code> are violating the thread safety rule.</p>\n<p>See <a href=\"https://docs.oracle.com/javase/tutorial/uiswing/concurrency/index.html\" rel=\"nofollow noreferrer\">Concurrency in Swing</a> for more details.</p>\n<p>Using <code>null</code> layouts.  This might not seem like a big deal to you, but it will become a massive headache as you progress further.  Take the time to learn and understand the various layout options available to you.</p>\n<p>See <a href=\"https://docs.oracle.com/javase/tutorial/uiswing/layout/index.html\" rel=\"nofollow noreferrer\">Laying Out Components Within a Container</a> for more details.</p>\n<p>You're violating the painting process.</p>\n<pre><code>@Override\npublic void paint(Graphics g){\n    g.drawImage(image == null ? null : image.getImage(), 0, 0, this.getWidth(), this.getHeight(), null);\n }\n</code></pre>\n<p><code>paint</code> is a very complex method which does a lot of work, as a generally recommendation, you should avoid overriding <code>paint</code> and instead override <code>paintComponent</code>, but you must ensure that you either call <code>super.paintComponent</code> or re-implement the functionality that the method does.</p>\n<p><code>Graphics</code> is a shared context which is passed to each component during a paint process.  One of the jobs that the painting process does, is &quot;clear&quot; what was previously painted, this is why it's important to ensure that you're working within the painting process.</p>\n<p>I would suggest looking at <a href=\"https://www.oracle.com/java/technologies/painting.html\" rel=\"nofollow noreferrer\">Painting in AWT and Swing</a> and <a href=\"https://docs.oracle.com/javase/tutorial/uiswing/painting/index.html\" rel=\"nofollow noreferrer\">Performing Custom Painting</a></p>\n<p>The <code>JImage</code> class doesn't really make sense. <code>JLabel</code> is already very good at rendering images.  If you wanted to make a simpler workflow (which you're not really doing), I might consider creating a factory method or utility class to create a <code>JLabel</code> with the configuration you want.</p>\n<p><code>jProgressBar.setBackground(new Color(255, 255, 255, 50));</code> - Swing components doesn't support alpha based colors, they are either fully opaque or fully transparent.</p>\n<p>IMHO I'd be wary of doing something like <code>public JImage(String path){</code>.  I mean, what does <code>String path</code> actually mean?  Is it a file path on the local disk?  Is it a named resource? Is it something else.  Generally speaking, I would recommend using <code>File</code> and <code>URL</code> as it's clear what the source should be - just saying.</p>\n<h1>So, what's the solution?</h1>\n<p>Make use of a <code>SwingWorker</code> to perform long running operations, this allows you to easily sync updates back the Event Dispatching Thread.  For repeating operations, use a Swing <code>Timer</code>, the &quot;ticks&quot; will be updated in the context of the Event Dispatching Thread.</p>\n<p>Instead of <code>JImage</code>, I'd just make use of <code>JLabel</code>, if required, making a factory method to create it with the configuration I needed.</p>\n<p>With regards to the translucent background, that's a little more tricky, but I would be tempted to create a &quot;translucent pane&quot; and fake it.  I would then put the <code>JProgressBar</code> on this component.</p>\n<p>For example...</p>\n<p><a href=\"https://i.stack.imgur.com/47aJa.gif\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/47aJa.gif\" alt=\"enter image description here\" /></a></p>\n<p>Now, this might &quot;look&quot; complicated, but once you understand the basic principles, you can re-apply them to a lot of things you do.</p>\n<p>First, there's a custom component which renders a background image, this extends from <code>JPanel</code> and is important, as some solutions might suggest using a <code>JLabel</code>, but <code>JLabel</code> is a complex component and calculates it's preferred size based on the <code>icon</code> and <code>text</code> and not the child components, this can easily lead in you into no end of issues.</p>\n<p>We start with the background pane, onto this, we add the logo and the &quot;progress content&quot;.  This is important, as we &quot;cheat&quot; a little here.  We add the logo and progress content in such away that they occupy the same space at the same time.  This allows the logo to appear centred on the screen and won't be affected by the other components.</p>\n<p>On the &quot;progress content&quot;, we add a &quot;fill&quot; component, this will force the progress bar and label to occupy the lower half of the view.  Then we add the progress bar and label (wrapped in yet another component) to the &quot;progress content&quot;.</p>\n<p>This will make the progress bar and label to appear in the lower half of the view.</p>\n<p>This might &quot;seem&quot; complicated, but is a very flexible solution.  The size of the logo and font don't have adverse effects on each other, especially on systems where the font size might be larger then you original designed for.</p>\n<p>Translucency is &quot;faked&quot; through another component, <code>TranslucentPane</code>.  You could create a custom <code>JProgressBar</code>, but this becomes more complicated as the paint process is more involved.</p>\n<pre><code>import java.awt.AlphaComposite;\nimport java.awt.BorderLayout;\nimport java.awt.Color;\nimport java.awt.Dimension;\nimport java.awt.EventQueue;\nimport java.awt.Graphics;\nimport java.awt.Graphics2D;\nimport java.awt.GridBagConstraints;\nimport java.awt.GridBagLayout;\nimport java.awt.event.ActionEvent;\nimport java.awt.event.ActionListener;\nimport java.awt.image.BufferedImage;\nimport java.io.IOException;\nimport java.util.logging.Level;\nimport java.util.logging.Logger;\nimport javax.imageio.ImageIO;\nimport javax.swing.ImageIcon;\nimport javax.swing.JFrame;\nimport javax.swing.JLabel;\nimport javax.swing.JPanel;\nimport javax.swing.JProgressBar;\nimport javax.swing.SwingConstants;\nimport javax.swing.Timer;\nimport javax.swing.border.EmptyBorder;\nimport javax.swing.plaf.basic.BasicProgressBarUI;\n\npublic class Main {\n    public static void main(String[] args) {\n        new Main();\n    }\n\n    public Main() {\n        EventQueue.invokeLater(new Runnable() {\n            @Override\n            public void run() {\n                try {\n                    JFrame frame = new JFrame();\n                    SplashScreen splashScreen = new SplashScreen();\n                    frame.add(splashScreen);\n                    frame.pack();\n                    frame.setLocationRelativeTo(null);\n                    frame.setVisible(true);\n\n                    // I'm using a Timer here to simulate &quot;work&quot;\n                    // Depending on your needs, you might need to use\n                    // a SwingWorker instead.\n                    Timer timer = new Timer(100, new ActionListener() {\n                        private int progress = 0;\n\n                        @Override\n                        public void actionPerformed(ActionEvent e) {\n                            progress += 1;\n                            if (progress &gt;= 100) {\n                                ((Timer) e.getSource()).stop();\n                            }\n                            splashScreen.setProgress(progress);\n                        }\n                    });\n                    timer.start();\n                } catch (IOException ex) {\n                    Logger.getLogger(Main.class.getName()).log(Level.SEVERE, null, ex);\n                }\n            }\n        });\n    }\n\n    public class SplashScreen extends JPanel {\n\n        private final JLabel dotLabel = new JLabel(&quot;&quot;);\n        private final JProgressBar progressBar = new JProgressBar(SwingConstants.HORIZONTAL, 0, 100);\n\n        private String message = &quot;&quot;;\n        private int dots = 0;\n\n        private Timer dotTimer;\n\n        public SplashScreen() throws IOException {\n            setLayout(new BorderLayout());\n\n            BackgroundPane backgroundPane = new BackgroundPane(ImageIO.read(getClass().getResource(&quot;/images/Mando01-50.png&quot;)));\n            backgroundPane.setBorder(new EmptyBorder(8, 8, 8, 8));\n            backgroundPane.setLayout(new GridBagLayout());\n\n            add(backgroundPane);\n\n            GridBagConstraints gbc = new GridBagConstraints();\n            gbc.gridx = 0;\n            gbc.gridy = 0;\n            gbc.anchor = GridBagConstraints.CENTER;\n            gbc.weightx = 1;\n            gbc.weighty = 1;\n\n            JLabel logo = new JLabel(new ImageIcon(getClass().getResource(&quot;/images/Paw.png&quot;)));\n            backgroundPane.add(logo, gbc);\n\n            JPanel progressContentPane = new JPanel(new GridBagLayout());\n            progressContentPane.setOpaque(false);\n\n            gbc.fill = GridBagConstraints.BOTH;\n            backgroundPane.add(progressContentPane, gbc);\n\n            // This just fills the top half of the view with an empty space\n            // forcing the progress view down to the bottom half the\n            // the screen.  This is done so we can &quot;fake&quot; the label position,\n            // allowing to appear in the center of the screen and it will\n            // be uneffected by the other elements ... tricky\n            JPanel fillerPane = new JPanel();\n            fillerPane.setOpaque(false);\n\n            gbc = new GridBagConstraints();\n            gbc.gridwidth = GridBagConstraints.REMAINDER;\n            gbc.anchor = GridBagConstraints.CENTER;\n            gbc.weightx = 1;\n            gbc.weighty = 0.5;\n            gbc.fill = gbc.BOTH;\n\n            JPanel progressPane = new JPanel(new GridBagLayout());\n            progressPane.setOpaque(false);\n\n            progressContentPane.add(fillerPane, gbc);\n            progressContentPane.add(progressPane, gbc);\n\n            gbc = new GridBagConstraints();\n            gbc.gridwidth = GridBagConstraints.REMAINDER;\n            gbc.anchor = GridBagConstraints.CENTER;\n            gbc.weightx = 1;\n\n            TranslucentPane progressBackgroundPane = new TranslucentPane();\n            progressBackgroundPane.setLayout(new BorderLayout());\n            progressBackgroundPane.setBorder(new EmptyBorder(8, 8, 8, 8));\n            progressBackgroundPane.setAlpha(0.5f);\n\n            progressBackgroundPane.add(progressBar);\n\n            progressPane.add(progressBackgroundPane, gbc);\n            progressPane.add(dotLabel, gbc);\n\n            progressBar.setStringPainted(true);\n            progressBar.setBorderPainted(false);\n            progressBar.setValue(0);\n            progressBar.setBounds(50, 270, 500, 30);\n            progressBar.setForeground(Color.WHITE);\n            progressBar.setUI(new BasicProgressBarUI() {\n                protected Color getSelectionBackground() {\n                    return new Color(0x66, 0x10, 0xf2);\n                }\n\n                protected Color getSelectionForeground() {\n                    return new Color(0x6f, 0x42, 0xc1);\n                }\n            });\n\n            dotTimer = new Timer(500, new ActionListener() {\n                @Override\n                public void actionPerformed(ActionEvent e) {\n                    dots = Math.max(1, (dots + 1) % 5);\n                    dotLabel.setText(getMessage());\n                }\n            });\n        }\n\n        @Override\n        public void addNotify() {\n            super.addNotify();\n            dotTimer.start();\n        }\n\n        @Override\n        public void removeNotify() {\n            super.removeNotify();\n            dotTimer.stop();\n        }\n\n        public void setMessage(String message) {\n            this.message = message;\n            dotLabel.setText(getMessage());\n        }\n\n        public void setProgress(int progress) {\n            progressBar.setValue(progress);\n        }\n\n        private String getMessage() {\n            return this.message + new String(new char[this.dots]).replace(&quot;\\0&quot;, &quot;.&quot;);\n        }\n\n        public class BackgroundPane extends JPanel {\n\n            private BufferedImage backgroundImage;\n\n            public BackgroundPane(BufferedImage backgroundImage) {\n                this.backgroundImage = backgroundImage;\n            }\n\n            public BufferedImage getBackgroundImage() {\n                return backgroundImage;\n            }\n\n            @Override\n            public Dimension getPreferredSize() {\n                BufferedImage backgroundImage = getBackgroundImage();\n                if (backgroundImage == null) {\n                    return super.getPreferredSize();\n                }\n                return new Dimension(backgroundImage.getWidth(), backgroundImage.getHeight());\n            }\n\n            @Override\n            protected void paintComponent(Graphics g) {\n                super.paintComponent(g);\n                BufferedImage backgroundImage = getBackgroundImage();\n                if (backgroundImage == null) {\n                    return;\n                }\n                int x = (getWidth() - backgroundImage.getWidth()) / 2;\n                int y = (getHeight() - backgroundImage.getHeight()) / 2;\n                g.drawImage(backgroundImage, x, y, this);\n            }\n        }\n\n        public class TranslucentPane extends JPanel {\n            private float alpha = 1f;\n\n            public TranslucentPane() {\n                setOpaque(false);\n            }\n\n            public float getAlpha() {\n                return alpha;\n            }\n\n            public void setAlpha(float alpha) {\n                this.alpha = alpha;\n            }\n\n            @Override\n            protected void paintComponent(Graphics g) {\n                super.paintComponent(g);\n                Graphics2D g2d = (Graphics2D) g.create();\n                g2d.setColor(getBackground());\n                g2d.setComposite(AlphaComposite.SrcOver.derive(getAlpha()));\n                g2d.fillRect(0, 0, getWidth(), getHeight());\n                g2d.dispose();\n            }\n        }\n    }\n}\n</code></pre>\n<p>Remember, this is just an example, and there are number ways you might achieve the same effect(s), but this addresses the core issues you've presented.</p>\n"}],"owner":{"account_id":27784879,"reputation":389,"user_id":21212553,"display_name":"galalem"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":52,"favorite_count":0,"down_vote_count":2,"up_vote_count":0,"accepted_answer_id":76139344,"answer_count":1,"score":-2,"last_activity_date":1682891340,"creation_date":1682790207,"question_id":76137590,"body_markdown":"I have a simple app which is basically a splash screen to start some programs. The whole app is just a single JFrame with 4 elements:\r\n+ Background image\r\n+ Logo image\r\n+ ProgressBar\r\n+ Text message to print current state.\r\n\r\nI&#39;ve create this class\r\n\r\n```java\r\npackage com.example;\r\n\r\nimport javax.imageio.ImageIO;\r\nimport javax.swing.*;\r\nimport javax.swing.plaf.basic.BasicProgressBarUI;\r\nimport java.awt.*;\r\nimport java.awt.image.BufferedImage;\r\nimport java.io.InputStream;\r\nimport java.util.TimerTask;\r\n\r\npublic class SplashScreen extends JFrame {\r\n\r\n    private final JPanel contentPane = new JPanel();\r\n    private final JLabel jLabel = new JLabel(&quot;&quot;);\r\n    private final JProgressBar jProgressBar = new JProgressBar(SwingConstants.HORIZONTAL, 0, 100);\r\n\r\n    private String message;\r\n    private int dots = 0;\r\n\r\n    public SplashScreen() {\r\n\r\n        setIconImage(Toolkit.getDefaultToolkit().getImage(SplashScreen.class.getResource(&quot;/favicon.png&quot;)));\r\n\r\n        Dimension dimension = new Dimension(600, 350);\r\n        this.setSize(dimension);\r\n        setLocationRelativeTo(null);\r\n        setUndecorated(true);\r\n        getRootPane().setWindowDecorationStyle(JRootPane.NONE);\r\n\r\n        contentPane.setLayout(null);\r\n        setContentPane(contentPane);\r\n\r\n\r\n        jProgressBar.setBackground(new Color(255, 255, 255, 50));\r\n        jProgressBar.setStringPainted(true);\r\n        jProgressBar.setBorderPainted(false);\r\n        jProgressBar.setValue(0);\r\n        jProgressBar.setBounds(50, 270, 500, 30);\r\n        jProgressBar.setForeground(Color.WHITE);\r\n        jProgressBar.setUI(new BasicProgressBarUI() {\r\n            protected Color getSelectionBackground() { return new Color(0x66,0x10,0xf2); }\r\n            protected Color getSelectionForeground() { return new Color(0x6f,0x42,0xc1); }\r\n        });\r\n        contentPane.add(jProgressBar);\r\n\r\n\r\n        jLabel.setForeground(Color.WHITE);\r\n        jLabel.setFont(new Font(&quot;Arial&quot;, Font.PLAIN, 20));\r\n        jLabel.setBounds(50, 200, 500, 30);\r\n        jLabel.setVerticalAlignment(SwingConstants.TOP);\r\n        jLabel.setLabelFor(jProgressBar);\r\n        contentPane.add(jLabel);\r\n\r\n        JImage logo = new JImage(&quot;images/logo.png&quot;);\r\n        logo.setBounds(141,50,318, 118);\r\n        contentPane.add(logo);\r\n\r\n        JImage background = new JImage(&quot;images/background.jpg&quot;);\r\n        background.setSize(dimension);\r\n        background.setLocation(0, 0);\r\n        contentPane.add(background);\r\n\r\n        contentPane.validate();\r\n\r\n        java.util.Timer timer = new java.util.Timer();\r\n        timer.scheduleAtFixedRate(new TimerTask() {\r\n            @Override\r\n            public void run() {\r\n                dots = (dots + 1) % 4;\r\n                jLabel.setText(getMessage());\r\n                contentPane.validate();\r\n            }\r\n        }, 0, 300);\r\n\r\n    }\r\n\r\n    public void setMessage(String message) {\r\n        this.message = message;\r\n        jLabel.setText(getMessage());\r\n        contentPane.validate();\r\n    }\r\n    public void setProgress(int progress) {\r\n        jProgressBar.setValue(progress);\r\n        contentPane.validate();\r\n    }\r\n    private String getMessage() {\r\n        return this.message + new String(new char[this.dots]).replace(&quot;\\0&quot;, &quot;.&quot;);\r\n    }\r\n\r\n    public static class JImage extends JLabel {\r\n        private ImageIcon image;\r\n\r\n        public JImage(String path){\r\n            super();\r\n            setIcon(path);\r\n        }\r\n        public void setIcon(String path) {\r\n            image = load(path);\r\n            super.setIcon(image);\r\n        }\r\n\r\n        @Override\r\n        public void setIcon(Icon icon) {\r\n            super.setIcon(icon);\r\n            if (icon instanceof ImageIcon)\r\n                image = ((ImageIcon) icon);\r\n            else\r\n                image = null;\r\n        }\r\n\r\n        @Override\r\n        public void paint(Graphics g){\r\n            g.drawImage(image == null ? null : image.getImage(), 0, 0, this.getWidth(), this.getHeight(), null);\r\n        }\r\n\r\n        private ImageIcon load(String path) {\r\n            BufferedImage image = null;\r\n            try {\r\n                ClassLoader loader = Thread.currentThread().getContextClassLoader();\r\n                InputStream stream = loader.getResourceAsStream(path);\r\n                image = ImageIO.read(stream);\r\n                stream.close();\r\n            } catch (Exception e) {\r\n                System.out.println(&quot;E/ Failed to load image&quot;);\r\n                e.printStackTrace();\r\n            }\r\n            return new ImageIcon(image);\r\n        }\r\n    }\r\n}\r\n```\r\n\r\nMy main class just makes the frame visible and launches a list of programs sequentially in separate cmd windows\r\n\r\n```\r\npublic static void main(String[] args) throws IOException, InterruptedException {\r\n    SplashScreen window = new SplashScreen();\r\n    window.setVisible(true);\r\n\r\n    Runtime runtime = Runtime.getRuntime();\r\n    int percent = 0;\r\n\r\n    for (State state: cycle) {\r\n        window.setMessage(state.message);\r\n        runtime.exec(start(state.title, state.path, state.command));\r\n        TimeUnit.MILLISECONDS.sleep(state.timeout);\r\n        percent += state.progress;\r\n        window.setProgress(percent);\r\n    }\r\n    TimeUnit.MILLISECONDS.sleep(2000);\r\n    System.exit(0);\r\n}\r\n\r\nprivate static String start(String title, String path, String command){\r\n    return String.format(&quot;cmd /c start \\&quot;%s\\&quot; /d \\&quot;%s\\&quot; /min cmd.exe /k \\&quot;%s\\&quot;&quot;, title, path, command);\r\n}\r\n```\r\n\r\nSome how the splash screen renders the JLabel in the correct spot and re-render it on the JProgressBar.\r\n\r\nI tried moving the ProgressBar yet the text follows it. I tried removing the Label itself now the ProgressBar starts re-rendering on itself.\r\n\r\nWhat did I do wrong?","title":"JLabel is re-rendered on JProgressBar","body":"<p>I have a simple app which is basically a splash screen to start some programs. The whole app is just a single JFrame with 4 elements:</p>\n<ul>\n<li>Background image</li>\n<li>Logo image</li>\n<li>ProgressBar</li>\n<li>Text message to print current state.</li>\n</ul>\n<p>I've create this class</p>\n<pre class=\"lang-java prettyprint-override\"><code>package com.example;\n\nimport javax.imageio.ImageIO;\nimport javax.swing.*;\nimport javax.swing.plaf.basic.BasicProgressBarUI;\nimport java.awt.*;\nimport java.awt.image.BufferedImage;\nimport java.io.InputStream;\nimport java.util.TimerTask;\n\npublic class SplashScreen extends JFrame {\n\n    private final JPanel contentPane = new JPanel();\n    private final JLabel jLabel = new JLabel(&quot;&quot;);\n    private final JProgressBar jProgressBar = new JProgressBar(SwingConstants.HORIZONTAL, 0, 100);\n\n    private String message;\n    private int dots = 0;\n\n    public SplashScreen() {\n\n        setIconImage(Toolkit.getDefaultToolkit().getImage(SplashScreen.class.getResource(&quot;/favicon.png&quot;)));\n\n        Dimension dimension = new Dimension(600, 350);\n        this.setSize(dimension);\n        setLocationRelativeTo(null);\n        setUndecorated(true);\n        getRootPane().setWindowDecorationStyle(JRootPane.NONE);\n\n        contentPane.setLayout(null);\n        setContentPane(contentPane);\n\n\n        jProgressBar.setBackground(new Color(255, 255, 255, 50));\n        jProgressBar.setStringPainted(true);\n        jProgressBar.setBorderPainted(false);\n        jProgressBar.setValue(0);\n        jProgressBar.setBounds(50, 270, 500, 30);\n        jProgressBar.setForeground(Color.WHITE);\n        jProgressBar.setUI(new BasicProgressBarUI() {\n            protected Color getSelectionBackground() { return new Color(0x66,0x10,0xf2); }\n            protected Color getSelectionForeground() { return new Color(0x6f,0x42,0xc1); }\n        });\n        contentPane.add(jProgressBar);\n\n\n        jLabel.setForeground(Color.WHITE);\n        jLabel.setFont(new Font(&quot;Arial&quot;, Font.PLAIN, 20));\n        jLabel.setBounds(50, 200, 500, 30);\n        jLabel.setVerticalAlignment(SwingConstants.TOP);\n        jLabel.setLabelFor(jProgressBar);\n        contentPane.add(jLabel);\n\n        JImage logo = new JImage(&quot;images/logo.png&quot;);\n        logo.setBounds(141,50,318, 118);\n        contentPane.add(logo);\n\n        JImage background = new JImage(&quot;images/background.jpg&quot;);\n        background.setSize(dimension);\n        background.setLocation(0, 0);\n        contentPane.add(background);\n\n        contentPane.validate();\n\n        java.util.Timer timer = new java.util.Timer();\n        timer.scheduleAtFixedRate(new TimerTask() {\n            @Override\n            public void run() {\n                dots = (dots + 1) % 4;\n                jLabel.setText(getMessage());\n                contentPane.validate();\n            }\n        }, 0, 300);\n\n    }\n\n    public void setMessage(String message) {\n        this.message = message;\n        jLabel.setText(getMessage());\n        contentPane.validate();\n    }\n    public void setProgress(int progress) {\n        jProgressBar.setValue(progress);\n        contentPane.validate();\n    }\n    private String getMessage() {\n        return this.message + new String(new char[this.dots]).replace(&quot;\\0&quot;, &quot;.&quot;);\n    }\n\n    public static class JImage extends JLabel {\n        private ImageIcon image;\n\n        public JImage(String path){\n            super();\n            setIcon(path);\n        }\n        public void setIcon(String path) {\n            image = load(path);\n            super.setIcon(image);\n        }\n\n        @Override\n        public void setIcon(Icon icon) {\n            super.setIcon(icon);\n            if (icon instanceof ImageIcon)\n                image = ((ImageIcon) icon);\n            else\n                image = null;\n        }\n\n        @Override\n        public void paint(Graphics g){\n            g.drawImage(image == null ? null : image.getImage(), 0, 0, this.getWidth(), this.getHeight(), null);\n        }\n\n        private ImageIcon load(String path) {\n            BufferedImage image = null;\n            try {\n                ClassLoader loader = Thread.currentThread().getContextClassLoader();\n                InputStream stream = loader.getResourceAsStream(path);\n                image = ImageIO.read(stream);\n                stream.close();\n            } catch (Exception e) {\n                System.out.println(&quot;E/ Failed to load image&quot;);\n                e.printStackTrace();\n            }\n            return new ImageIcon(image);\n        }\n    }\n}\n</code></pre>\n<p>My main class just makes the frame visible and launches a list of programs sequentially in separate cmd windows</p>\n<pre><code>public static void main(String[] args) throws IOException, InterruptedException {\n    SplashScreen window = new SplashScreen();\n    window.setVisible(true);\n\n    Runtime runtime = Runtime.getRuntime();\n    int percent = 0;\n\n    for (State state: cycle) {\n        window.setMessage(state.message);\n        runtime.exec(start(state.title, state.path, state.command));\n        TimeUnit.MILLISECONDS.sleep(state.timeout);\n        percent += state.progress;\n        window.setProgress(percent);\n    }\n    TimeUnit.MILLISECONDS.sleep(2000);\n    System.exit(0);\n}\n\nprivate static String start(String title, String path, String command){\n    return String.format(&quot;cmd /c start \\&quot;%s\\&quot; /d \\&quot;%s\\&quot; /min cmd.exe /k \\&quot;%s\\&quot;&quot;, title, path, command);\n}\n</code></pre>\n<p>Some how the splash screen renders the JLabel in the correct spot and re-render it on the JProgressBar.</p>\n<p>I tried moving the ProgressBar yet the text follows it. I tried removing the Label itself now the ProgressBar starts re-rendering on itself.</p>\n<p>What did I do wrong?</p>\n"},{"tags":["java","mysql","servlets","jooq"],"comments":[{"owner":{"account_id":213468,"reputation":103487,"user_id":466862,"display_name":"Mark Rotteveel"},"score":0,"creation_date":1682933801,"post_id":76143606,"comment_id":134285926,"body_markdown":"You have to load the driver **once** when the application starts. In a web application (at least on Tomcat), drivers located inside the WAR are not loaded automatically, you would need to put the driver in the `tomcat/lib` folder for automatic driver loading to work. As an aside, it is recommended to use a `DataSource` (preferably backed by a connection pool) in a web application.","body":"You have to load the driver <b>once</b> when the application starts. In a web application (at least on Tomcat), drivers located inside the WAR are not loaded automatically, you would need to put the driver in the <code>tomcat&#47;lib</code> folder for automatic driver loading to work. As an aside, it is recommended to use a <code>DataSource</code> (preferably backed by a connection pool) in a web application."}],"answers":[{"tags":[],"owner":{"account_id":9067171,"reputation":1177,"user_id":6751603,"accept_rate":100,"display_name":"JavaMan"},"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1682890271,"creation_date":1682890271,"answer_id":76143640,"question_id":76143606,"body_markdown":"Place the MySQL JDBC driver jar in the WEB-INF/lib folder of your web application. \r\nThen register the driver with the DriverManager once during the initialization of your application, for example, in a servlet context listener.\r\n\r\nHere&#39;s an example of how to register the driver:\r\n\r\n    import javax.servlet.ServletContextEvent;\r\n    import javax.servlet.ServletContextListener;\r\n    import java.sql.DriverManager;\r\n    import java.sql.SQLException;\r\n    \r\n    public class CustomServletContextListener implements ServletContextListener {\r\n        public void contextInitialized(ServletContextEvent event) {\r\n            try {\r\n    \t\t\t//make sure that the class exists (should work like that, not 100% sure)\r\n                Class.forName(&quot;com.mysql.cj.jdbc.Driver&quot;);\r\n            } catch (ClassNotFoundException e) {\r\n                throw new IllegalStateException(&quot;Could not load JDBC driver class&quot;, e);\r\n            }\r\n    \r\n            try {\r\n                DriverManager.registerDriver(new com.mysql.cj.jdbc.Driver());\r\n            } catch (SQLException e) {\r\n                throw new IllegalStateException(&quot;Could not register JDBC driver&quot;, e);\r\n            }\r\n        }\r\n    \r\n        public void contextDestroyed(ServletContextEvent event) {\r\n            // cleanup stuff\r\n        }\r\n    }","title":"Jooq and Mysql drivers not found","body":"<p>Place the MySQL JDBC driver jar in the WEB-INF/lib folder of your web application.\nThen register the driver with the DriverManager once during the initialization of your application, for example, in a servlet context listener.</p>\n<p>Here's an example of how to register the driver:</p>\n<pre><code>import javax.servlet.ServletContextEvent;\nimport javax.servlet.ServletContextListener;\nimport java.sql.DriverManager;\nimport java.sql.SQLException;\n\npublic class CustomServletContextListener implements ServletContextListener {\n    public void contextInitialized(ServletContextEvent event) {\n        try {\n            //make sure that the class exists (should work like that, not 100% sure)\n            Class.forName(&quot;com.mysql.cj.jdbc.Driver&quot;);\n        } catch (ClassNotFoundException e) {\n            throw new IllegalStateException(&quot;Could not load JDBC driver class&quot;, e);\n        }\n\n        try {\n            DriverManager.registerDriver(new com.mysql.cj.jdbc.Driver());\n        } catch (SQLException e) {\n            throw new IllegalStateException(&quot;Could not register JDBC driver&quot;, e);\n        }\n    }\n\n    public void contextDestroyed(ServletContextEvent event) {\n        // cleanup stuff\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":1004377,"reputation":137,"user_id":1018511,"display_name":"poldoj"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":101,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"closed_date":1682933707,"accepted_answer_id":76143640,"answer_count":1,"score":1,"last_activity_date":1682890271,"creation_date":1682889762,"question_id":76143606,"body_markdown":" Every time I open a connection to mysql database to perform some query I have to put this code before:\r\n\r\n        Class.forName(&quot;com.mysql.cj.jdbc.Driver&quot;);\r\n\r\notherwise I got this error:\r\n\r\n        java.sql.SQLException: No suitable driver found for jdbc:mysql://localhost:3306/\r\n\r\nExample: \r\n\r\n\t\t\tClass.forName(&quot;com.mysql.cj.jdbc.Driver&quot;);\r\n\r\n            try (Connection conn = DriverManager.getConnection(Data.URL.getValue(), Data.USER.getValue(), Data.PASS.getValue())) {\r\n            DSLContext create = DSL.using(conn, SQLDialect.MYSQL);\r\n\r\nMy j-connector jar is in the web-inf lib forlder already.\r\nDo I really have to load the drivers explicitally every time or there is a better way to do this?","title":"Jooq and Mysql drivers not found","body":"<p>Every time I open a connection to mysql database to perform some query I have to put this code before:</p>\n<pre><code>    Class.forName(&quot;com.mysql.cj.jdbc.Driver&quot;);\n</code></pre>\n<p>otherwise I got this error:</p>\n<pre><code>    java.sql.SQLException: No suitable driver found for jdbc:mysql://localhost:3306/\n</code></pre>\n<p>Example:</p>\n<pre><code>        Class.forName(&quot;com.mysql.cj.jdbc.Driver&quot;);\n\n        try (Connection conn = DriverManager.getConnection(Data.URL.getValue(), Data.USER.getValue(), Data.PASS.getValue())) {\n        DSLContext create = DSL.using(conn, SQLDialect.MYSQL);\n</code></pre>\n<p>My j-connector jar is in the web-inf lib forlder already.\nDo I really have to load the drivers explicitally every time or there is a better way to do this?</p>\n"},{"tags":["java","elasticsearch","elastic-stack"],"comments":[{"owner":{"account_id":24908380,"reputation":3091,"user_id":18778181,"display_name":"rabbitbr"},"score":1,"creation_date":1682876727,"post_id":76142650,"comment_id":134280543,"body_markdown":"queries above 30s is normal?  maybe it would be better to refactor the queries and have better performance.","body":"queries above 30s is normal?  maybe it would be better to refactor the queries and have better performance."},{"owner":{"account_id":14998174,"reputation":311,"user_id":10927368,"display_name":"Lightsong"},"score":0,"creation_date":1682877441,"post_id":76142650,"comment_id":134280631,"body_markdown":"@rabbitbr It&#39;s also part of what I am concerned about. It&#39;s only a phrase query (the longest being 13 terms), thrown at three text fields, each of them having a ngrams and keyword subfield. I have 22M documents which don&#39;t really have much text in them.","body":"@rabbitbr It&#39;s also part of what I am concerned about. It&#39;s only a phrase query (the longest being 13 terms), thrown at three text fields, each of them having a ngrams and keyword subfield. I have 22M documents which don&#39;t really have much text in them."},{"owner":{"account_id":24908380,"reputation":3091,"user_id":18778181,"display_name":"rabbitbr"},"score":0,"creation_date":1682883789,"post_id":76142650,"comment_id":134281411,"body_markdown":"Try this: https://stackoverflow.com/a/60086921/18778181","body":"Try this: <a href=\"https://stackoverflow.com/a/60086921/18778181\">stackoverflow.com/a/60086921/18778181</a>"},{"owner":{"account_id":14998174,"reputation":311,"user_id":10927368,"display_name":"Lightsong"},"score":0,"creation_date":1682888168,"post_id":76142650,"comment_id":134281908,"body_markdown":"@rabbitbr Thanks! Will check it. I managed to somewhat avoid it though....turns out the query times were NOT normal at all...the ngrams subfield made them jump from like twenty seconds to milliseconds...","body":"@rabbitbr Thanks! Will check it. I managed to somewhat avoid it though....turns out the query times were NOT normal at all...the ngrams subfield made them jump from like twenty seconds to milliseconds..."}],"owner":{"account_id":14998174,"reputation":311,"user_id":10927368,"display_name":"Lightsong"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":321,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1682888261,"creation_date":1682876143,"question_id":76142650,"body_markdown":"I&#39;m trying to avoid timeouts when running some queries in my local elastic 8.7.0 server. While most of them run without issues, some of them time out for whatever reason, throwing the following exception:\r\n\r\n```\r\njava.net.SocketTimeoutException: 30.000 milliseconds timeout on connection http-outgoing-3 [ACTIVE]\r\n        at org.elasticsearch.client.RestClient.extractAndWrapCause(RestClient.java:915)\r\n        at org.elasticsearch.client.RestClient.performRequest(RestClient.java:300)\r\n        at org.elasticsearch.client.RestClient.performRequest(RestClient.java:288)\r\n        at co.elastic.clients.transport.rest_client.RestClientTransport.performRequest(RestClientTransport.java:147)\r\n        at co.elastic.clients.elasticsearch.ElasticsearchClient.search(ElasticsearchClient.java:1833)\r\n        at co.elastic.clients.elasticsearch.ElasticsearchClient.search(ElasticsearchClient.java:1850)\r\n        at sid.EntitySearcher.ElasticEntitySearcher.executeElasticQuery(ElasticEntitySearcher.java:195)\r\n        at sid.EntitySearcher.ElasticEntitySearcher.getScoredElasticResults(ElasticEntitySearcher.java:242)\r\n        at sid.EntitySearcher.ElasticEntitySearcher.scoredSearch(ElasticEntitySearcher.java:54)\r\n        at sid.Evaluation.Evaluator.runQueriesAndSaveAsTRECResultsFile(Evaluator.java:81)\r\n        at sid.MetricsBulkTesting.testSingleEngine(MetricsBulkTesting.java:308)\r\n        at sid.MetricsBulkTesting.testSingleEngines(MetricsBulkTesting.java:430)\r\n        at sid.MetricsBulkTesting.main(MetricsBulkTesting.java:84)\r\n        at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)\r\n        at java.base/java.lang.reflect.Method.invoke(Method.java:578)\r\n        at org.springframework.boot.loader.MainMethodRunner.run(MainMethodRunner.java:49)\r\n        at org.springframework.boot.loader.Launcher.launch(Launcher.java:95)\r\n        at org.springframework.boot.loader.Launcher.launch(Launcher.java:58)\r\n        at org.springframework.boot.loader.JarLauncher.main(JarLauncher.java:65)\r\nCaused by: java.net.SocketTimeoutException: 30.000 milliseconds timeout on connection http-outgoing-3 [ACTIVE]\r\n        at org.apache.http.nio.protocol.HttpAsyncRequestExecutor.timeout(HttpAsyncRequestExecutor.java:387)\r\n        at org.apache.http.impl.nio.client.InternalIODispatch.onTimeout(InternalIODispatch.java:98)\r\n        at org.apache.http.impl.nio.client.InternalIODispatch.onTimeout(InternalIODispatch.java:40)\r\n        at org.apache.http.impl.nio.reactor.AbstractIODispatch.timeout(AbstractIODispatch.java:175)\r\n        at org.apache.http.impl.nio.reactor.BaseIOReactor.sessionTimedOut(BaseIOReactor.java:261)\r\n        at org.apache.http.impl.nio.reactor.AbstractIOReactor.timeoutCheck(AbstractIOReactor.java:502)\r\n        at org.apache.http.impl.nio.reactor.BaseIOReactor.validate(BaseIOReactor.java:211)\r\n        at org.apache.http.impl.nio.reactor.AbstractIOReactor.execute(AbstractIOReactor.java:280)\r\n        at org.apache.http.impl.nio.reactor.BaseIOReactor.execute(BaseIOReactor.java:104)\r\n        at org.apache.http.impl.nio.reactor.AbstractMultiworkerIOReactor$Worker.run(AbstractMultiworkerIOReactor.java:591)\r\n        at java.base/java.lang.Thread.run(Thread.java:1589)\r\n\r\n```\r\n\r\nI have tried to tweak this timeout value, but nothing I try seems to work:\r\n\r\nI have built the client like this, tweaking the keepAlive values as per [this Github issue][1], although it has no effect:\r\n\r\n```\r\nRestClient restClient = RestClient\r\n                .builder(new HttpHost(host, port, &quot;https&quot;))\r\n                .setHttpClientConfigCallback(hc -&gt; hc\r\n                        .setSSLContext(sslContext)\r\n                        .setDefaultCredentialsProvider(credsProv)\r\n                        // Avoid timeout problems\r\n                        // https://github.com/elastic/elasticsearch/issues/65213\r\n                        .setKeepAliveStrategy((response, context) -&gt; 300000/* 5 minutes*/)\r\n                        .setDefaultIOReactorConfig(IOReactorConfig.custom().setSoKeepAlive(true).build())\r\n                )\r\n                .build();\r\n\r\n        // Create the transport and the API client\r\n        ElasticsearchTransport transport = new RestClientTransport(restClient, new JacksonJsonpMapper());\r\n```\r\n\r\n\r\nAlso, when searching, I have tried to tweak the search request&#39;s timeout value, but it also has no effect at all:\r\n\r\n```\r\nSearchResponse&lt;EntityDocument&gt; response = connector.getClient().search(s -&gt; s\r\n                            .index(connector.getIndexName())\r\n                            .timeout(&quot;180s&quot;)\r\n                            .query(q -&gt; q\r\n                                    .match(t -&gt; t\r\n                                            ...query stuff\r\n                                    )\r\n                            ),\r\n                    EntityDocument.class\r\n            );\r\n```\r\n\r\nI also reopen a fresh connection to the elastic server when timing out a search for the first time, with, again, no effect at all.\r\n\r\nIs the issue somewhere else? Did I miss a parameter somewhere?\r\n\r\nAnother issue would be the searches themselves, which are suspiciosly slow. When doing bulk indexes of thousands of documents per second on the same connection for ~5 hours, there are no issues at all.\r\n\r\n\r\nEDIT: Solved... the underlying culprit was querying n-gram subfields...now the queries take milliseconds, so it&#39;s not needed anymore\r\n\r\n  [1]: https://github.com/elastic/elasticsearch/issues/65213","title":"Trying to avoid search timeouts with the new Java elastic client","body":"<p>I'm trying to avoid timeouts when running some queries in my local elastic 8.7.0 server. While most of them run without issues, some of them time out for whatever reason, throwing the following exception:</p>\n<pre><code>java.net.SocketTimeoutException: 30.000 milliseconds timeout on connection http-outgoing-3 [ACTIVE]\n        at org.elasticsearch.client.RestClient.extractAndWrapCause(RestClient.java:915)\n        at org.elasticsearch.client.RestClient.performRequest(RestClient.java:300)\n        at org.elasticsearch.client.RestClient.performRequest(RestClient.java:288)\n        at co.elastic.clients.transport.rest_client.RestClientTransport.performRequest(RestClientTransport.java:147)\n        at co.elastic.clients.elasticsearch.ElasticsearchClient.search(ElasticsearchClient.java:1833)\n        at co.elastic.clients.elasticsearch.ElasticsearchClient.search(ElasticsearchClient.java:1850)\n        at sid.EntitySearcher.ElasticEntitySearcher.executeElasticQuery(ElasticEntitySearcher.java:195)\n        at sid.EntitySearcher.ElasticEntitySearcher.getScoredElasticResults(ElasticEntitySearcher.java:242)\n        at sid.EntitySearcher.ElasticEntitySearcher.scoredSearch(ElasticEntitySearcher.java:54)\n        at sid.Evaluation.Evaluator.runQueriesAndSaveAsTRECResultsFile(Evaluator.java:81)\n        at sid.MetricsBulkTesting.testSingleEngine(MetricsBulkTesting.java:308)\n        at sid.MetricsBulkTesting.testSingleEngines(MetricsBulkTesting.java:430)\n        at sid.MetricsBulkTesting.main(MetricsBulkTesting.java:84)\n        at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)\n        at java.base/java.lang.reflect.Method.invoke(Method.java:578)\n        at org.springframework.boot.loader.MainMethodRunner.run(MainMethodRunner.java:49)\n        at org.springframework.boot.loader.Launcher.launch(Launcher.java:95)\n        at org.springframework.boot.loader.Launcher.launch(Launcher.java:58)\n        at org.springframework.boot.loader.JarLauncher.main(JarLauncher.java:65)\nCaused by: java.net.SocketTimeoutException: 30.000 milliseconds timeout on connection http-outgoing-3 [ACTIVE]\n        at org.apache.http.nio.protocol.HttpAsyncRequestExecutor.timeout(HttpAsyncRequestExecutor.java:387)\n        at org.apache.http.impl.nio.client.InternalIODispatch.onTimeout(InternalIODispatch.java:98)\n        at org.apache.http.impl.nio.client.InternalIODispatch.onTimeout(InternalIODispatch.java:40)\n        at org.apache.http.impl.nio.reactor.AbstractIODispatch.timeout(AbstractIODispatch.java:175)\n        at org.apache.http.impl.nio.reactor.BaseIOReactor.sessionTimedOut(BaseIOReactor.java:261)\n        at org.apache.http.impl.nio.reactor.AbstractIOReactor.timeoutCheck(AbstractIOReactor.java:502)\n        at org.apache.http.impl.nio.reactor.BaseIOReactor.validate(BaseIOReactor.java:211)\n        at org.apache.http.impl.nio.reactor.AbstractIOReactor.execute(AbstractIOReactor.java:280)\n        at org.apache.http.impl.nio.reactor.BaseIOReactor.execute(BaseIOReactor.java:104)\n        at org.apache.http.impl.nio.reactor.AbstractMultiworkerIOReactor$Worker.run(AbstractMultiworkerIOReactor.java:591)\n        at java.base/java.lang.Thread.run(Thread.java:1589)\n\n</code></pre>\n<p>I have tried to tweak this timeout value, but nothing I try seems to work:</p>\n<p>I have built the client like this, tweaking the keepAlive values as per <a href=\"https://github.com/elastic/elasticsearch/issues/65213\" rel=\"nofollow noreferrer\">this Github issue</a>, although it has no effect:</p>\n<pre><code>RestClient restClient = RestClient\n                .builder(new HttpHost(host, port, &quot;https&quot;))\n                .setHttpClientConfigCallback(hc -&gt; hc\n                        .setSSLContext(sslContext)\n                        .setDefaultCredentialsProvider(credsProv)\n                        // Avoid timeout problems\n                        // https://github.com/elastic/elasticsearch/issues/65213\n                        .setKeepAliveStrategy((response, context) -&gt; 300000/* 5 minutes*/)\n                        .setDefaultIOReactorConfig(IOReactorConfig.custom().setSoKeepAlive(true).build())\n                )\n                .build();\n\n        // Create the transport and the API client\n        ElasticsearchTransport transport = new RestClientTransport(restClient, new JacksonJsonpMapper());\n</code></pre>\n<p>Also, when searching, I have tried to tweak the search request's timeout value, but it also has no effect at all:</p>\n<pre><code>SearchResponse&lt;EntityDocument&gt; response = connector.getClient().search(s -&gt; s\n                            .index(connector.getIndexName())\n                            .timeout(&quot;180s&quot;)\n                            .query(q -&gt; q\n                                    .match(t -&gt; t\n                                            ...query stuff\n                                    )\n                            ),\n                    EntityDocument.class\n            );\n</code></pre>\n<p>I also reopen a fresh connection to the elastic server when timing out a search for the first time, with, again, no effect at all.</p>\n<p>Is the issue somewhere else? Did I miss a parameter somewhere?</p>\n<p>Another issue would be the searches themselves, which are suspiciosly slow. When doing bulk indexes of thousands of documents per second on the same connection for ~5 hours, there are no issues at all.</p>\n<p>EDIT: Solved... the underlying culprit was querying n-gram subfields...now the queries take milliseconds, so it's not needed anymore</p>\n"},{"tags":["java","arrays","swing"],"comments":[{"owner":{"account_id":969721,"reputation":344508,"user_id":992484,"accept_rate":60,"display_name":"MadProgrammer"},"score":5,"creation_date":1682812085,"post_id":76138924,"comment_id":134274298,"body_markdown":"`frame.setLayout(null);` bad start. `frame.setVisible(true);` make this the last thing you do","body":"<code>frame.setLayout(null);</code> bad start. <code>frame.setVisible(true);</code> make this the last thing you do"},{"owner":{"account_id":969721,"reputation":344508,"user_id":992484,"accept_rate":60,"display_name":"MadProgrammer"},"score":5,"creation_date":1682812141,"post_id":76138924,"comment_id":134274300,"body_markdown":"*&quot; I cannot get it to display on the JFrame&quot;* - move `frame.setVisible(true);` to the end of the constructor","body":"<i>&quot; I cannot get it to display on the JFrame&quot;</i> - move <code>frame.setVisible(true);</code> to the end of the constructor"},{"owner":{"account_id":969721,"reputation":344508,"user_id":992484,"accept_rate":60,"display_name":"MadProgrammer"},"score":5,"creation_date":1682812174,"post_id":76138924,"comment_id":134274303,"body_markdown":"Remove `frame.add(textArea);`, it&#39;s already contained within the scrollpane","body":"Remove <code>frame.add(textArea);</code>, it&#39;s already contained within the scrollpane"}],"answers":[{"tags":[],"owner":{"account_id":28465198,"reputation":57,"user_id":21781374,"display_name":"x444556"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1682887569,"creation_date":1682887569,"answer_id":76143468,"question_id":76138924,"body_markdown":"You should probably change this line\r\n`textArea.append(row + &quot;\\n&quot;);`\r\nto this `textArea.append(String.join(&quot;,&quot;, row) + &quot;\\n&quot;);`\r\nbecause it does not know how to print an array of strings. The String.join combines the Strings in the Array into one string each separated by the first argument (in this case &quot;,&quot;). It&#39;s the same thing you did to print the lines to the console.","title":"Display the contents of a CSV File read by scanner into a JFrame","body":"<p>You should probably change this line\n<code>textArea.append(row + &quot;\\n&quot;);</code>\nto this <code>textArea.append(String.join(&quot;,&quot;, row) + &quot;\\n&quot;);</code>\nbecause it does not know how to print an array of strings. The String.join combines the Strings in the Array into one string each separated by the first argument (in this case &quot;,&quot;). It's the same thing you did to print the lines to the console.</p>\n"}],"owner":{"account_id":28458968,"reputation":3,"user_id":21775931,"display_name":"benandez"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":41,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"accepted_answer_id":76143468,"answer_count":1,"score":-1,"last_activity_date":1682887569,"creation_date":1682811090,"question_id":76138924,"body_markdown":"I have a program that allows users to log in to a system, present them with various options for manipulating data that is held in a CSV file. This file is read by Scanner, split and stored in a variable.\r\n\r\nI want to display the entire file in a JFrame, I have some code below and would appreciate any guidance at all. The console prints the data as expected but I cannot get it to display on the JFrame.\r\n\r\n\r\n```\r\nimport javax.swing.*;\r\nimport java.awt.*;\r\nimport java.awt.event.ActionEvent;\r\nimport java.awt.event.ActionListener;\r\nimport java.io.IOException;\r\nimport java.util.ArrayList;\r\n\r\npublic class AllLoanObjects implements ActionListener {\r\n\r\n    JFrame frame = new JFrame();\r\n    JLabel allLoanObjLabel = new JLabel(&quot;All Loan Objects&quot;);\r\n    JButton exitButton = new JButton(&quot;Close&quot;);\r\n    ArrayList&lt;String[]&gt; listFile = new ArrayList&lt;&gt;();\r\n    JTextArea textArea = new JTextArea();\r\n    JScrollPane scrollPane = new JScrollPane(textArea);\r\n\r\n    AllLoanObjects() throws IOException {\r\n        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\r\n        frame.setSize(1200, 1000);\r\n        frame.setLayout(null);\r\n        frame.setVisible(true);\r\n        frame.setLocationRelativeTo(null);\r\n\r\n        allLoanObjLabel.setBounds(10, 10, 750, 35);\r\n        allLoanObjLabel.setFont(new Font(null, Font.PLAIN, 25));\r\n\r\n        textArea.setEditable(false);\r\n        listFile = new CSVReader().read(&quot;mortgageandloan.csv&quot;);\r\n        for (String[] row : listFile) {\r\n            textArea.append(row + &quot;\\n&quot;);\r\n            System.out.println(String.join(&quot;,&quot;, row));\r\n        }\r\n\r\n        exitButton.setBounds(900, 10, 80, 25);\r\n        exitButton.setFocusable(false);\r\n        exitButton.addActionListener(this);\r\n\r\n        frame.add(allLoanObjLabel);\r\n        frame.add(textArea);\r\n        frame.add(scrollPane);\r\n        frame.add(exitButton);\r\n\r\n        for (String[] row : listFile) {\r\n            System.out.println(String.join(&quot;,&quot;, row));\r\n        }\r\n    }\r\n\r\n    @Override\r\n    public void actionPerformed(ActionEvent e) {\r\n        if (e.getSource() == exitButton) {\r\n            frame.dispose();\r\n        }\r\n    }\r\n}\r\n\r\n```\r\n","title":"Display the contents of a CSV File read by scanner into a JFrame","body":"<p>I have a program that allows users to log in to a system, present them with various options for manipulating data that is held in a CSV file. This file is read by Scanner, split and stored in a variable.</p>\n<p>I want to display the entire file in a JFrame, I have some code below and would appreciate any guidance at all. The console prints the data as expected but I cannot get it to display on the JFrame.</p>\n<pre><code>import javax.swing.*;\nimport java.awt.*;\nimport java.awt.event.ActionEvent;\nimport java.awt.event.ActionListener;\nimport java.io.IOException;\nimport java.util.ArrayList;\n\npublic class AllLoanObjects implements ActionListener {\n\n    JFrame frame = new JFrame();\n    JLabel allLoanObjLabel = new JLabel(&quot;All Loan Objects&quot;);\n    JButton exitButton = new JButton(&quot;Close&quot;);\n    ArrayList&lt;String[]&gt; listFile = new ArrayList&lt;&gt;();\n    JTextArea textArea = new JTextArea();\n    JScrollPane scrollPane = new JScrollPane(textArea);\n\n    AllLoanObjects() throws IOException {\n        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\n        frame.setSize(1200, 1000);\n        frame.setLayout(null);\n        frame.setVisible(true);\n        frame.setLocationRelativeTo(null);\n\n        allLoanObjLabel.setBounds(10, 10, 750, 35);\n        allLoanObjLabel.setFont(new Font(null, Font.PLAIN, 25));\n\n        textArea.setEditable(false);\n        listFile = new CSVReader().read(&quot;mortgageandloan.csv&quot;);\n        for (String[] row : listFile) {\n            textArea.append(row + &quot;\\n&quot;);\n            System.out.println(String.join(&quot;,&quot;, row));\n        }\n\n        exitButton.setBounds(900, 10, 80, 25);\n        exitButton.setFocusable(false);\n        exitButton.addActionListener(this);\n\n        frame.add(allLoanObjLabel);\n        frame.add(textArea);\n        frame.add(scrollPane);\n        frame.add(exitButton);\n\n        for (String[] row : listFile) {\n            System.out.println(String.join(&quot;,&quot;, row));\n        }\n    }\n\n    @Override\n    public void actionPerformed(ActionEvent e) {\n        if (e.getSource() == exitButton) {\n            frame.dispose();\n        }\n    }\n}\n\n</code></pre>\n"},{"tags":["java"],"answers":[{"tags":[],"owner":{"account_id":6440378,"reputation":184,"user_id":4990575,"display_name":"Kurojin"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1682886582,"creation_date":1682886188,"answer_id":76143365,"question_id":76142986,"body_markdown":"    return usersRepository.findAll(spec, pageable).stream()\r\n    //assuming usersRepository.findAll returns Collection&lt;T&gt;\r\n    .map(user -&gt; returnAssembler.fromAccount(user)\r\n    //assuming returnAssembler.fromAccount accepts T as parameter\r\n    .tolist(); //.collect(Collectors.toList()); if java version &lt; 17\r\n\r\nnote that usersRepository.findAll return type and returnAssembler.fromAccount parameter type should be the same for this to work, or else you will need an intermediate map operation to make returned type into something returnAssembler.fromAccount accepts as parameter.","title":"use streaming api to call method","body":"<pre><code>return usersRepository.findAll(spec, pageable).stream()\n//assuming usersRepository.findAll returns Collection&lt;T&gt;\n.map(user -&gt; returnAssembler.fromAccount(user)\n//assuming returnAssembler.fromAccount accepts T as parameter\n.tolist(); //.collect(Collectors.toList()); if java version &lt; 17\n</code></pre>\n<p>note that usersRepository.findAll return type and returnAssembler.fromAccount parameter type should be the same for this to work, or else you will need an intermediate map operation to make returned type into something returnAssembler.fromAccount accepts as parameter.</p>\n"}],"owner":{"account_id":28438015,"reputation":3,"user_id":21757821,"display_name":"Josh Helman"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":36,"favorite_count":0,"down_vote_count":2,"up_vote_count":0,"accepted_answer_id":76143365,"answer_count":1,"score":-2,"last_activity_date":1682886582,"creation_date":1682880716,"question_id":76142986,"body_markdown":"I have a Paged object which I would like to filter using streaming API:\r\n\r\n\r\n    @Component\r\n    public class ReturnAssembler {  // code used to convert full object into return dto\r\n    \r\n        public ReturnResource fromAccount(Return return) {\r\n            ....\r\n            return ...;\r\n        }\r\n    }\r\n\r\n\r\n\r\nI want to use this code:\r\n\r\n    private ReturnAssembler returnAssembler;\r\n    \r\n    return usersRepository.findAll(spec, pageable).map(returnAssembler.fromAccount(??????));\r\n\r\nHow I can map the result from `findAll` using stream by using `returnAssembler.fromAccount`?\r\n\r\n\r\n    @Component\r\n    public class ReturnAssembler {  // code used to convert full object into return dto\r\n    \r\n        public ReturnResource fromAccount(Return return) {\r\n            ....\r\n            return ...;\r\n        }\r\n    }\r\n\r\n\r\n    private ReturnAssembler returnAssembler;\r\n    \r\n    return usersRepository.findAll(spec, pageable).map(returnAssembler.fromAccount(??????));","title":"use streaming api to call method","body":"<p>I have a Paged object which I would like to filter using streaming API:</p>\n<pre><code>@Component\npublic class ReturnAssembler {  // code used to convert full object into return dto\n\n    public ReturnResource fromAccount(Return return) {\n        ....\n        return ...;\n    }\n}\n</code></pre>\n<p>I want to use this code:</p>\n<pre><code>private ReturnAssembler returnAssembler;\n\nreturn usersRepository.findAll(spec, pageable).map(returnAssembler.fromAccount(??????));\n</code></pre>\n<p>How I can map the result from <code>findAll</code> using stream by using <code>returnAssembler.fromAccount</code>?</p>\n<pre><code>@Component\npublic class ReturnAssembler {  // code used to convert full object into return dto\n\n    public ReturnResource fromAccount(Return return) {\n        ....\n        return ...;\n    }\n}\n\n\nprivate ReturnAssembler returnAssembler;\n\nreturn usersRepository.findAll(spec, pageable).map(returnAssembler.fromAccount(??????));\n</code></pre>\n"},{"tags":["java","debezium","cdc"],"answers":[{"tags":[],"owner":{"account_id":5732619,"reputation":1701,"user_id":4527675,"display_name":"ChrisY"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1682885622,"creation_date":1682885622,"answer_id":76143328,"question_id":73059032,"body_markdown":"For me `database.include.list` config resulted in this behavior. \r\n\r\nBut most likely, if you are here, I could be anything else as well.\r\n\r\nI was able to find the problem when I:\r\n\r\n - increased the log level to DEBUG for debezium\r\n - debug the source - in my example `PostgresStreamingChangeEventSource` which was a output due to the debug log level","title":"Debezium notifying method never executes","body":"<p>For me <code>database.include.list</code> config resulted in this behavior.</p>\n<p>But most likely, if you are here, I could be anything else as well.</p>\n<p>I was able to find the problem when I:</p>\n<ul>\n<li>increased the log level to DEBUG for debezium</li>\n<li>debug the source - in my example <code>PostgresStreamingChangeEventSource</code> which was a output due to the debug log level</li>\n</ul>\n"}],"owner":{"account_id":7495940,"reputation":37,"user_id":5696211,"display_name":"Jes&#250;s Alberto Carrillo Garc&#237;a"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":582,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1682885622,"creation_date":1658358687,"question_id":73059032,"body_markdown":"I have a maven project. I want to do a CDC project Debezium + PostgreSQL but this is not working. Im using java 1.8 + maven with this dependences. Its appear there aren&#39;t errors but the notifying method never executes. \r\n\r\nI just create the maven project, config the connection like below and ran the program. Slot replication was created btw by the java program automatically.\r\n  \r\n\r\n    &lt;dependencies&gt;\r\n        &lt;dependency&gt;\r\n          &lt;groupId&gt;junit&lt;/groupId&gt;\r\n          &lt;artifactId&gt;junit&lt;/artifactId&gt;\r\n          &lt;version&gt;3.8.1&lt;/version&gt;\r\n          &lt;scope&gt;test&lt;/scope&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n    \t    &lt;groupId&gt;io.debezium&lt;/groupId&gt;\r\n    \t    &lt;artifactId&gt;debezium-api&lt;/artifactId&gt;\r\n        &lt;version&gt;1.9.4.Final&lt;/version&gt;\r\n    \t&lt;/dependency&gt;\r\n    \t&lt;dependency&gt;\r\n    \t    &lt;groupId&gt;io.debezium&lt;/groupId&gt;\r\n    \t    &lt;artifactId&gt;debezium-embedded&lt;/artifactId&gt;\r\n    \t    &lt;version&gt;1.9.4.Final&lt;/version&gt;\r\n    \t&lt;/dependency&gt;\r\n    \t&lt;dependency&gt;\r\n    \t    &lt;groupId&gt;io.debezium&lt;/groupId&gt;\r\n    \t    &lt;artifactId&gt;debezium-connector-postgres&lt;/artifactId&gt;\r\n    \t    &lt;version&gt;1.9.4.Final&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n    &lt;dependency&gt;\r\n        &lt;groupId&gt;org.slf4j&lt;/groupId&gt;\r\n        &lt;artifactId&gt;slf4j-api&lt;/artifactId&gt;\r\n        &lt;version&gt;2.0.0-alpha7&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n    &lt;dependency&gt;\r\n        &lt;groupId&gt;org.slf4j&lt;/groupId&gt;\r\n        &lt;artifactId&gt;slf4j-simple&lt;/artifactId&gt;\r\n        &lt;version&gt;2.0.0-alpha7&lt;/version&gt;\r\n        &lt;scope&gt;runtime&lt;/scope&gt;\r\n    &lt;/dependency&gt;\r\n\r\nMY APP CODE:\r\n\r\n    public class App \r\n    {\r\n        public static void main( String[] args ) throws IOException, InterruptedException\r\n        {\r\n            /**DatabaseChangeEventListener d = new DatabaseChangeEventListener();\r\n            System.out.println(&quot;Comenzando ejecuci&#243;n&quot;);\r\n            d.startEmbeddedEngine();*/\r\n        \tFile offsetStorageTempFile = File.createTempFile(&quot;offsets_&quot;, &quot;.dat&quot;);\r\n            File dbHistoryTempFile = File.createTempFile(&quot;dbhistory_&quot;, &quot;.dat&quot;);\r\n           Configuration config = Configuration.create()\r\n                .with(&quot;name&quot;, &quot;customer-postgresql-connector&quot;)\r\n                .with(&quot;connector.class&quot;, PostgresConnector.class)\r\n                .with(&quot;offset.storage&quot;, &quot;org.apache.kafka.connect.storage.FileOffsetBackingStore&quot;)\r\n                .with(&quot;offset.storage.file.filename&quot;, offsetStorageTempFile.getAbsolutePath())\r\n                .with(&quot;offset.flush.interval.ms&quot;, &quot;60000&quot;)\r\n                .with(&quot;database.hostname&quot;, &quot;localhost&quot;)\r\n                .with(&quot;database.port&quot;, 5432)\r\n                .with(&quot;database.user&quot;, &quot;postgres&quot;)\r\n                .with(&quot;database.password&quot;, &quot;admin&quot;)\r\n                .with(&quot;database.dbname&quot;, &quot;anotherdb&quot;)\r\n                .with(&quot;database.include.list&quot;, &quot;anotherdb&quot;)\r\n                .with(&quot;include.schema.changes&quot;, &quot;false&quot;)\r\n                .with(&quot;database.allowPublicKeyRetrieval&quot;, &quot;true&quot;)\r\n                .with(&quot;plugin.name&quot;, &quot;wal2json&quot;)\r\n                .with(&quot;schemas.enable&quot;, false)\r\n                .with(&quot;database.server.id&quot;, &quot;10181&quot;)\r\n                .with(&quot;database.server.name&quot;, &quot;localhost-postgresql&quot;)\r\n                .with(&quot;database.history&quot;, &quot;io.debezium.relational.history.FileDatabaseHistory&quot;)\r\n                .with(&quot;database.history.file.filename&quot;, dbHistoryTempFile.getAbsolutePath())\r\n                .build();\r\n           \r\n           try (DebeziumEngine&lt;ChangeEvent&lt;String, String&gt;&gt; engine = DebeziumEngine.create(Json.class)\r\n        \t        .using(config.asProperties())\r\n        \t        .notifying(record -&gt; {\r\n        \t            System.out.println(&quot;Record: &quot;+record);\r\n        \t        })\r\n        \t        .build()) {\r\n        \t   ExecutorService executor = Executors.newSingleThreadExecutor();\r\n        \t   executor.execute(engine);\r\n        \t   engine.close();\r\n        \t   executor.shutdown();\r\n        \t    while (!executor.awaitTermination(10, TimeUnit.SECONDS)) {\r\n        \t        System.out.println(&quot;Waiting another 5 seconds for the embedded engine to shut down&quot;);\r\n        \t    }\r\n        \t}\r\n        }\r\n    }\r\n\r\nY console print this:\r\n\r\n    [main] INFO org.apache.kafka.connect.json.JsonConverterConfig - JsonConverterConfig values: \r\n    \tconverter.type = key\r\n    \tdecimal.format = BASE64\r\n    \tschemas.cache.size = 1000\r\n    \tschemas.enable = true\r\n    \r\n    [main] INFO org.apache.kafka.connect.json.JsonConverterConfig - JsonConverterConfig values: \r\n    \tconverter.type = value\r\n    \tdecimal.format = BASE64\r\n    \tschemas.cache.size = 1000\r\n    \tschemas.enable = false\r\n    \r\n    [main] INFO io.debezium.embedded.EmbeddedEngine$EmbeddedConfig - EmbeddedConfig values: \r\n    \taccess.control.allow.methods = \r\n    \taccess.control.allow.origin = \r\n    \tadmin.listeners = null\r\n    \tbootstrap.servers = [localhost:9092]\r\n    \tclient.dns.lookup = use_all_dns_ips\r\n    \tconfig.providers = []\r\n    \tconnector.client.config.override.policy = All\r\n    \theader.converter = class org.apache.kafka.connect.storage.SimpleHeaderConverter\r\n    \tkey.converter = class org.apache.kafka.connect.json.JsonConverter\r\n    \tlisteners = [http://:8083]\r\n    \tmetric.reporters = []\r\n    \tmetrics.num.samples = 2\r\n    \tmetrics.recording.level = INFO\r\n    \tmetrics.sample.window.ms = 30000\r\n    \toffset.flush.interval.ms = 60000\r\n    \toffset.flush.timeout.ms = 5000\r\n    \toffset.storage.file.filename = C:\\Users\\VASS\\AppData\\Local\\Temp\\offsets_4608803621683662537.dat\r\n    \toffset.storage.partitions = null\r\n    \toffset.storage.replication.factor = null\r\n    \toffset.storage.topic = \r\n    \tplugin.path = null\r\n    \tresponse.http.headers.config = \r\n    \trest.advertised.host.name = null\r\n    \trest.advertised.listener = null\r\n    \trest.advertised.port = null\r\n    \trest.extension.classes = []\r\n    \tssl.cipher.suites = null\r\n    \tssl.client.auth = none\r\n    \tssl.enabled.protocols = [TLSv1.2]\r\n    \tssl.endpoint.identification.algorithm = https\r\n    \tssl.engine.factory.class = null\r\n    \tssl.key.password = null\r\n    \tssl.keymanager.algorithm = SunX509\r\n    \tssl.keystore.certificate.chain = null\r\n    \tssl.keystore.key = null\r\n    \tssl.keystore.location = null\r\n    \tssl.keystore.password = null\r\n    \tssl.keystore.type = JKS\r\n    \tssl.protocol = TLSv1.2\r\n    \tssl.provider = null\r\n    \tssl.secure.random.implementation = null\r\n    \tssl.trustmanager.algorithm = PKIX\r\n    \tssl.truststore.certificates = null\r\n    \tssl.truststore.location = null\r\n    \tssl.truststore.password = null\r\n    \tssl.truststore.type = JKS\r\n    \ttask.shutdown.graceful.timeout.ms = 5000\r\n    \ttopic.creation.enable = true\r\n    \ttopic.tracking.allow.reset = true\r\n    \ttopic.tracking.enable = true\r\n    \tvalue.converter = class org.apache.kafka.connect.json.JsonConverter\r\n    \r\n    [main] WARN org.apache.kafka.connect.runtime.WorkerConfig - The worker has been configured with one or more internal converter properties ([internal.key.converter, internal.value.converter]). Support for these properties was deprecated in version 2.0 and removed in version 3.0, and specifying them will have no effect. Instead, an instance of the JsonConverter with schemas.enable set to false will be used. For more information, please visit http://kafka.apache.org/documentation/#upgrade and consult the upgrade notesfor the 3.0 release.\r\n    [main] WARN org.apache.kafka.connect.runtime.WorkerConfig - Variables cannot be used in the &#39;plugin.path&#39; property, since the property is used by plugin scanning before the config providers that replace the variables are initialized. The raw value &#39;null&#39; was used for plugin scanning, as opposed to the transformed value &#39;null&#39;, and this may cause unexpected results.\r\n    [main] INFO org.apache.kafka.connect.json.JsonConverterConfig - JsonConverterConfig values: \r\n    \tconverter.type = key\r\n    \tdecimal.format = BASE64\r\n    \tschemas.cache.size = 1000\r\n    \tschemas.enable = true\r\n    \r\n    [main] INFO org.apache.kafka.connect.json.JsonConverterConfig - JsonConverterConfig values: \r\n    \tconverter.type = value\r\n    \tdecimal.format = BASE64\r\n    \tschemas.cache.size = 1000\r\n    \tschemas.enable = true\r\n    \r\n    [main] INFO io.debezium.embedded.EmbeddedEngine - Stopping the embedded engine\r\n    [pool-1-thread-1] INFO org.apache.kafka.connect.storage.FileOffsetBackingStore - Starting FileOffsetBackingStore with file C:\\Users\\VASS\\AppData\\Local\\Temp\\offsets_4608803621683662537.dat\r\n    [pool-1-thread-1] WARN io.debezium.connector.postgresql.PostgresConnectorConfig - Logical decoder &#39;wal2json&#39; is deprecated and will be removed in future versions\r\n    [pool-1-thread-1] WARN io.debezium.connector.postgresql.PostgresConnectorConfig - Configuration property &#39;truncate.handling.mode&#39; is deprecated and will be removed in future versions. Please use &#39;skipped.operations&#39; instead.\r\n    [pool-1-thread-1] WARN io.debezium.connector.postgresql.PostgresConnectorConfig - Configuration property &#39;toasted.value.placeholder&#39; is deprecated and will be removed in future versions. Please use &#39;unavailable.value.placeholder&#39; instead.\r\n    [pool-1-thread-1] INFO io.debezium.connector.common.BaseSourceTask - Starting PostgresConnectorTask with configuration:\r\n    [pool-1-thread-1] INFO io.debezium.connector.common.BaseSourceTask -    connector.class = io.debezium.connector.postgresql.PostgresConnector\r\n    [pool-1-thread-1] INFO io.debezium.connector.common.BaseSourceTask -    database.allowPublicKeyRetrieval = true\r\n    [pool-1-thread-1] INFO io.debezium.connector.common.BaseSourceTask -    database.history.file.filename = C:\\Users\\VASS\\AppData\\Local\\Temp\\dbhistory_3035630169534300344.dat\r\n    [pool-1-thread-1] INFO io.debezium.connector.common.BaseSourceTask -    database.user = postgres\r\n    [pool-1-thread-1] INFO io.debezium.connector.common.BaseSourceTask -    database.dbname = anotherdb\r\n    [pool-1-thread-1] INFO io.debezium.connector.common.BaseSourceTask -    offset.storage = org.apache.kafka.connect.storage.FileOffsetBackingStore\r\n    [pool-1-thread-1] INFO io.debezium.connector.common.BaseSourceTask -    database.server.id = 10181\r\n    [pool-1-thread-1] INFO io.debezium.connector.common.BaseSourceTask -    database.server.name = localhost-postgresql\r\n    [pool-1-thread-1] INFO io.debezium.connector.common.BaseSourceTask -    offset.flush.timeout.ms = 5000\r\n    [pool-1-thread-1] INFO io.debezium.connector.common.BaseSourceTask -    include.schema.changes = false\r\n    [pool-1-thread-1] INFO io.debezium.connector.common.BaseSourceTask -    database.port = 5432\r\n    [pool-1-thread-1] INFO io.debezium.connector.common.BaseSourceTask -    plugin.name = wal2json\r\n    [pool-1-thread-1] INFO io.debezium.connector.common.BaseSourceTask -    offset.flush.interval.ms = 60000\r\n    [pool-1-thread-1] INFO io.debezium.connector.common.BaseSourceTask -    internal.key.converter = org.apache.kafka.connect.json.JsonConverter\r\n    [pool-1-thread-1] INFO io.debezium.connector.common.BaseSourceTask -    offset.storage.file.filename = C:\\Users\\VASS\\AppData\\Local\\Temp\\offsets_4608803621683662537.dat\r\n    [pool-1-thread-1] INFO io.debezium.connector.common.BaseSourceTask -    database.hostname = localhost\r\n    [pool-1-thread-1] INFO io.debezium.connector.common.BaseSourceTask -    database.password = ********\r\n    [pool-1-thread-1] INFO io.debezium.connector.common.BaseSourceTask -    name = customer-postgresql-connector\r\n    [pool-1-thread-1] INFO io.debezium.connector.common.BaseSourceTask -    internal.value.converter = org.apache.kafka.connect.json.JsonConverter\r\n    [pool-1-thread-1] INFO io.debezium.connector.common.BaseSourceTask -    value.converter = org.apache.kafka.connect.json.JsonConverter\r\n    [pool-1-thread-1] INFO io.debezium.connector.common.BaseSourceTask -    key.converter = org.apache.kafka.connect.json.JsonConverter\r\n    [pool-1-thread-1] INFO io.debezium.connector.common.BaseSourceTask -    database.include.list = anotherdb\r\n    [pool-1-thread-1] INFO io.debezium.connector.common.BaseSourceTask -    database.history = io.debezium.relational.history.FileDatabaseHistory\r\n    [pool-1-thread-1] INFO io.debezium.connector.common.BaseSourceTask -    schemas.enable = false\r\n    [pool-2-thread-1] INFO io.debezium.jdbc.JdbcConnection - Connection gracefully closed\r\n    [pool-1-thread-1] INFO io.debezium.connector.common.BaseSourceTask - No previous offsets found\r\n    [pool-1-thread-1] INFO io.debezium.connector.postgresql.PostgresConnectorTask - user &#39;postgres&#39; connected to database &#39;anotherdb&#39; on PostgreSQL 11.13, compiled by Visual C++ build 1914, 64-bit with roles:\r\n    \trole &#39;pg_read_all_settings&#39; [superuser: false, replication: false, inherit: true, create role: false, create db: false, can log in: false]\r\n    \trole &#39;pg_stat_scan_tables&#39; [superuser: false, replication: false, inherit: true, create role: false, create db: false, can log in: false]\r\n    \trole &#39;pg_write_server_files&#39; [superuser: false, replication: false, inherit: true, create role: false, create db: false, can log in: false]\r\n    \trole &#39;replicauser2&#39; [superuser: false, replication: false, inherit: true, create role: false, create db: false, can log in: true]\r\n    \trole &#39;replicauser&#39; [superuser: false, replication: true, inherit: true, create role: false, create db: false, can log in: true]\r\n    \trole &#39;usuarioreplica4&#39; [superuser: false, replication: true, inherit: true, create role: false, create db: false, can log in: true]\r\n    \trole &#39;usuarioreplica2&#39; [superuser: false, replication: true, inherit: true, create role: false, create db: false, can log in: true]\r\n    \trole &#39;sysrnt&#39; [superuser: false, replication: true, inherit: true, create role: false, create db: false, can log in: true]\r\n    \trole &#39;pg_monitor&#39; [superuser: false, replication: false, inherit: true, create role: false, create db: false, can log in: false]\r\n    \trole &#39;pg_read_server_files&#39; [superuser: false, replication: false, inherit: true, create role: false, create db: false, can log in: false]\r\n    \trole &#39;pg_execute_server_program&#39; [superuser: false, replication: false, inherit: true, create role: false, create db: false, can log in: false]\r\n    \trole &#39;usuarioreplica&#39; [superuser: false, replication: true, inherit: false, create role: false, create db: false, can log in: true]\r\n    \trole &#39;pg_read_all_stats&#39; [superuser: false, replication: false, inherit: true, create role: false, create db: false, can log in: false]\r\n    \trole &#39;pg_signal_backend&#39; [superuser: false, replication: false, inherit: true, create role: false, create db: false, can log in: false]\r\n    \trole &#39;postgres&#39; [superuser: true, replication: true, inherit: true, create role: true, create db: true, can log in: true]\r\n    [pool-1-thread-1] INFO io.debezium.connector.postgresql.connection.PostgresConnection - Obtained valid replication slot ReplicationSlot [active=false, latestFlushedLsn=LSN{0/9999D438}, catalogXmin=3619]\r\n    [pool-1-thread-1] INFO io.debezium.connector.postgresql.PostgresConnectorTask - No previous offset found\r\n    [pool-1-thread-1] INFO io.debezium.connector.postgresql.snapshot.InitialSnapshotter - Taking initial snapshot for new datasource\r\n    [pool-1-thread-1] INFO io.debezium.util.Threads - Requested thread factory for connector PostgresConnector, id = localhost-postgresql named = change-event-source-coordinator\r\n    [pool-1-thread-1] INFO io.debezium.util.Threads - Creating thread debezium-postgresconnector-localhost-postgresql-change-event-source-coordinator\r\n    [debezium-postgresconnector-localhost-postgresql-change-event-source-coordinator] INFO io.debezium.pipeline.ChangeEventSourceCoordinator - Metrics registered\r\n    [debezium-postgresconnector-localhost-postgresql-change-event-source-coordinator] INFO io.debezium.pipeline.ChangeEventSourceCoordinator - Context created\r\n    [debezium-postgresconnector-localhost-postgresql-change-event-source-coordinator] INFO io.debezium.connector.postgresql.snapshot.InitialSnapshotter - Taking initial snapshot for new datasource\r\n    [debezium-postgresconnector-localhost-postgresql-change-event-source-coordinator] INFO io.debezium.connector.postgresql.PostgresSnapshotChangeEventSource - According to the connector configuration data will be snapshotted\r\n    [debezium-postgresconnector-localhost-postgresql-change-event-source-coordinator] INFO io.debezium.relational.RelationalSnapshotChangeEventSource - Snapshot step 1 - Preparing\r\n    [debezium-postgresconnector-localhost-postgresql-change-event-source-coordinator] INFO io.debezium.relational.RelationalSnapshotChangeEventSource - Snapshot step 2 - Determining captured tables\r\n    [debezium-postgresconnector-localhost-postgresql-change-event-source-coordinator] INFO io.debezium.relational.RelationalSnapshotChangeEventSource - Adding table public.animales to the list of capture schema tables\r\n    [debezium-postgresconnector-localhost-postgresql-change-event-source-coordinator] INFO io.debezium.relational.RelationalSnapshotChangeEventSource - Snapshot step 3 - Locking captured tables []\r\n    [debezium-postgresconnector-localhost-postgresql-change-event-source-coordinator] INFO io.debezium.relational.RelationalSnapshotChangeEventSource - Snapshot step 4 - Determining snapshot offset\r\n    [debezium-postgresconnector-localhost-postgresql-change-event-source-coordinator] INFO io.debezium.connector.postgresql.PostgresSnapshotChangeEventSource - Creating initial offset context\r\n    [debezium-postgresconnector-localhost-postgresql-change-event-source-coordinator] INFO io.debezium.connector.postgresql.PostgresSnapshotChangeEventSource - Read xlogStart at &#39;LSN{0/999A2398}&#39; from transaction &#39;3648&#39;\r\n    [debezium-postgresconnector-localhost-postgresql-change-event-source-coordinator] INFO io.debezium.connector.postgresql.PostgresSnapshotChangeEventSource - Read xlogStart at &#39;LSN{0/999A2398}&#39; from transaction &#39;3648&#39;\r\n    [debezium-postgresconnector-localhost-postgresql-change-event-source-coordinator] INFO io.debezium.relational.RelationalSnapshotChangeEventSource - Snapshot step 5 - Reading structure of captured tables\r\n    [debezium-postgresconnector-localhost-postgresql-change-event-source-coordinator] INFO io.debezium.relational.RelationalSnapshotChangeEventSource - Snapshot step 6 - Persisting schema history\r\n    [debezium-postgresconnector-localhost-postgresql-change-event-source-coordinator] INFO io.debezium.relational.RelationalSnapshotChangeEventSource - Snapshot step 7 - Snapshotting data\r\n    [debezium-postgresconnector-localhost-postgresql-change-event-source-coordinator] INFO io.debezium.relational.RelationalSnapshotChangeEventSource - Snapshotting contents of 0 tables while still in transaction\r\n    [debezium-postgresconnector-localhost-postgresql-change-event-source-coordinator] INFO io.debezium.pipeline.source.AbstractSnapshotChangeEventSource - Snapshot - Final stage\r\n    [debezium-postgresconnector-localhost-postgresql-change-event-source-coordinator] INFO io.debezium.pipeline.ChangeEventSourceCoordinator - Snapshot ended with SnapshotResult [status=COMPLETED, offset=PostgresOffsetContext [sourceInfoSchema=Schema{io.debezium.connector.postgresql.Source:STRUCT}, sourceInfo=source_info[server=&#39;localhost-postgresql&#39;db=&#39;anotherdb&#39;, lsn=LSN{0/999A2398}, txId=3648, timestamp=2022-07-20T22:58:38.570Z, snapshot=FALSE, schema=, table=], lastSnapshotRecord=true, lastCompletelyProcessedLsn=null, lastCommitLsn=null, streamingStoppingLsn=null, transactionContext=TransactionContext [currentTransactionId=null, perTableEventCount={}, totalEventCount=0], incrementalSnapshotContext=IncrementalSnapshotContext [windowOpened=false, chunkEndPosition=null, dataCollectionsToSnapshot=[], lastEventKeySent=null, maximumKey=null]]]\r\n    [debezium-postgresconnector-localhost-postgresql-change-event-source-coordinator] WARN io.debezium.relational.RelationalDatabaseSchema - After applying the include/exclude list filters, no changes will be captured. Please check your configuration!\r\n    [debezium-postgresconnector-localhost-postgresql-change-event-source-coordinator] INFO io.debezium.pipeline.ChangeEventSourceCoordinator - Connected metrics set to &#39;true&#39;\r\n    [debezium-postgresconnector-localhost-postgresql-change-event-source-coordinator] INFO io.debezium.pipeline.ChangeEventSourceCoordinator - Starting streaming\r\n    [debezium-postgresconnector-localhost-postgresql-change-event-source-coordinator] INFO io.debezium.connector.postgresql.PostgresStreamingChangeEventSource - Retrieved latest position from stored offset &#39;LSN{0/999A2398}&#39;\r\n    [debezium-postgresconnector-localhost-postgresql-change-event-source-coordinator] INFO io.debezium.connector.postgresql.connection.WalPositionLocator - Looking for WAL restart position for last commit LSN &#39;null&#39; and last change LSN &#39;LSN{0/999A2398}&#39;\r\n    [debezium-postgresconnector-localhost-postgresql-change-event-source-coordinator] INFO io.debezium.connector.postgresql.connection.PostgresConnection - Obtained valid replication slot ReplicationSlot [active=false, latestFlushedLsn=LSN{0/9999D438}, catalogXmin=3619]\r\n    [pool-3-thread-1] INFO io.debezium.jdbc.JdbcConnection - Connection gracefully closed\r\n    [debezium-postgresconnector-localhost-postgresql-change-event-source-coordinator] INFO io.debezium.util.Threads - Requested thread factory for connector PostgresConnector, id = localhost-postgresql named = keep-alive\r\n    [debezium-postgresconnector-localhost-postgresql-change-event-source-coordinator] INFO io.debezium.util.Threads - Creating thread debezium-postgresconnector-localhost-postgresql-keep-alive\r\n    [debezium-postgresconnector-localhost-postgresql-change-event-source-coordinator] INFO io.debezium.connector.postgresql.PostgresStreamingChangeEventSource - Searching for WAL resume position\r\n    Waiting another 5 seconds for the embedded engine to shut down\r\n    [debezium-postgresconnector-localhost-postgresql-change-event-source-coordinator] INFO io.debezium.connector.postgresql.connection.WalPositionLocator - First LSN &#39;LSN{0/999A23F8}&#39; received\r\n    [debezium-postgresconnector-localhost-postgresql-change-event-source-coordinator] INFO io.debezium.connector.postgresql.PostgresStreamingChangeEventSource - WAL resume position &#39;LSN{0/999A23F8}&#39; discovered\r\n    [pool-4-thread-1] INFO io.debezium.jdbc.JdbcConnection - Connection gracefully closed\r\n    [debezium-postgresconnector-localhost-postgresql-change-event-source-coordinator] INFO io.debezium.util.Threads - Requested thread factory for connector PostgresConnector, id = localhost-postgresql named = keep-alive\r\n    [debezium-postgresconnector-localhost-postgresql-change-event-source-coordinator] INFO io.debezium.util.Threads - Creating thread debezium-postgresconnector-localhost-postgresql-keep-alive\r\n    [debezium-postgresconnector-localhost-postgresql-change-event-source-coordinator] INFO io.debezium.connector.postgresql.PostgresStreamingChangeEventSource - Processing messages\r\n    [debezium-postgresconnector-localhost-postgresql-change-event-source-coordinator] INFO io.debezium.connector.postgresql.connection.WalPositionLocator - Message with LSN &#39;LSN{0/999A23F8}&#39; arrived, switching off the filtering\r\n    Waiting another 5 seconds for the embedded engine to shut down\r\n    Waiting another 5 seconds for the embedded engine to shut down\r\n    Waiting another 5 seconds for the embedded engine to shut down\r\n    Waiting another 5 seconds for the embedded engine to shut down\r\n    ...\r\n\r\n\r\nAs you can see, the print method of Notifying section has been never executed:\r\n\r\n    .notifying(record -&gt; {\r\n                        System.out.println(&quot;Record: &quot;+record);\r\n                    })\r\n    is not executing. Why?\r\n\r\nIm running the app and INSERT data in the table but it is appear nothing append. What is wrong?\r\n\r\n","title":"Debezium notifying method never executes","body":"<p>I have a maven project. I want to do a CDC project Debezium + PostgreSQL but this is not working. Im using java 1.8 + maven with this dependences. Its appear there aren't errors but the notifying method never executes.</p>\n<p>I just create the maven project, config the connection like below and ran the program. Slot replication was created btw by the java program automatically.</p>\n<pre><code>&lt;dependencies&gt;\n    &lt;dependency&gt;\n      &lt;groupId&gt;junit&lt;/groupId&gt;\n      &lt;artifactId&gt;junit&lt;/artifactId&gt;\n      &lt;version&gt;3.8.1&lt;/version&gt;\n      &lt;scope&gt;test&lt;/scope&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;io.debezium&lt;/groupId&gt;\n        &lt;artifactId&gt;debezium-api&lt;/artifactId&gt;\n    &lt;version&gt;1.9.4.Final&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;io.debezium&lt;/groupId&gt;\n        &lt;artifactId&gt;debezium-embedded&lt;/artifactId&gt;\n        &lt;version&gt;1.9.4.Final&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;io.debezium&lt;/groupId&gt;\n        &lt;artifactId&gt;debezium-connector-postgres&lt;/artifactId&gt;\n        &lt;version&gt;1.9.4.Final&lt;/version&gt;\n&lt;/dependency&gt;\n&lt;dependency&gt;\n    &lt;groupId&gt;org.slf4j&lt;/groupId&gt;\n    &lt;artifactId&gt;slf4j-api&lt;/artifactId&gt;\n    &lt;version&gt;2.0.0-alpha7&lt;/version&gt;\n&lt;/dependency&gt;\n&lt;dependency&gt;\n    &lt;groupId&gt;org.slf4j&lt;/groupId&gt;\n    &lt;artifactId&gt;slf4j-simple&lt;/artifactId&gt;\n    &lt;version&gt;2.0.0-alpha7&lt;/version&gt;\n    &lt;scope&gt;runtime&lt;/scope&gt;\n&lt;/dependency&gt;\n</code></pre>\n<p>MY APP CODE:</p>\n<pre><code>public class App \n{\n    public static void main( String[] args ) throws IOException, InterruptedException\n    {\n        /**DatabaseChangeEventListener d = new DatabaseChangeEventListener();\n        System.out.println(&quot;Comenzando ejecuci√≥n&quot;);\n        d.startEmbeddedEngine();*/\n        File offsetStorageTempFile = File.createTempFile(&quot;offsets_&quot;, &quot;.dat&quot;);\n        File dbHistoryTempFile = File.createTempFile(&quot;dbhistory_&quot;, &quot;.dat&quot;);\n       Configuration config = Configuration.create()\n            .with(&quot;name&quot;, &quot;customer-postgresql-connector&quot;)\n            .with(&quot;connector.class&quot;, PostgresConnector.class)\n            .with(&quot;offset.storage&quot;, &quot;org.apache.kafka.connect.storage.FileOffsetBackingStore&quot;)\n            .with(&quot;offset.storage.file.filename&quot;, offsetStorageTempFile.getAbsolutePath())\n            .with(&quot;offset.flush.interval.ms&quot;, &quot;60000&quot;)\n            .with(&quot;database.hostname&quot;, &quot;localhost&quot;)\n            .with(&quot;database.port&quot;, 5432)\n            .with(&quot;database.user&quot;, &quot;postgres&quot;)\n            .with(&quot;database.password&quot;, &quot;admin&quot;)\n            .with(&quot;database.dbname&quot;, &quot;anotherdb&quot;)\n            .with(&quot;database.include.list&quot;, &quot;anotherdb&quot;)\n            .with(&quot;include.schema.changes&quot;, &quot;false&quot;)\n            .with(&quot;database.allowPublicKeyRetrieval&quot;, &quot;true&quot;)\n            .with(&quot;plugin.name&quot;, &quot;wal2json&quot;)\n            .with(&quot;schemas.enable&quot;, false)\n            .with(&quot;database.server.id&quot;, &quot;10181&quot;)\n            .with(&quot;database.server.name&quot;, &quot;localhost-postgresql&quot;)\n            .with(&quot;database.history&quot;, &quot;io.debezium.relational.history.FileDatabaseHistory&quot;)\n            .with(&quot;database.history.file.filename&quot;, dbHistoryTempFile.getAbsolutePath())\n            .build();\n       \n       try (DebeziumEngine&lt;ChangeEvent&lt;String, String&gt;&gt; engine = DebeziumEngine.create(Json.class)\n                .using(config.asProperties())\n                .notifying(record -&gt; {\n                    System.out.println(&quot;Record: &quot;+record);\n                })\n                .build()) {\n           ExecutorService executor = Executors.newSingleThreadExecutor();\n           executor.execute(engine);\n           engine.close();\n           executor.shutdown();\n            while (!executor.awaitTermination(10, TimeUnit.SECONDS)) {\n                System.out.println(&quot;Waiting another 5 seconds for the embedded engine to shut down&quot;);\n            }\n        }\n    }\n}\n</code></pre>\n<p>Y console print this:</p>\n<pre><code>[main] INFO org.apache.kafka.connect.json.JsonConverterConfig - JsonConverterConfig values: \n    converter.type = key\n    decimal.format = BASE64\n    schemas.cache.size = 1000\n    schemas.enable = true\n\n[main] INFO org.apache.kafka.connect.json.JsonConverterConfig - JsonConverterConfig values: \n    converter.type = value\n    decimal.format = BASE64\n    schemas.cache.size = 1000\n    schemas.enable = false\n\n[main] INFO io.debezium.embedded.EmbeddedEngine$EmbeddedConfig - EmbeddedConfig values: \n    access.control.allow.methods = \n    access.control.allow.origin = \n    admin.listeners = null\n    bootstrap.servers = [localhost:9092]\n    client.dns.lookup = use_all_dns_ips\n    config.providers = []\n    connector.client.config.override.policy = All\n    header.converter = class org.apache.kafka.connect.storage.SimpleHeaderConverter\n    key.converter = class org.apache.kafka.connect.json.JsonConverter\n    listeners = [http://:8083]\n    metric.reporters = []\n    metrics.num.samples = 2\n    metrics.recording.level = INFO\n    metrics.sample.window.ms = 30000\n    offset.flush.interval.ms = 60000\n    offset.flush.timeout.ms = 5000\n    offset.storage.file.filename = C:\\Users\\VASS\\AppData\\Local\\Temp\\offsets_4608803621683662537.dat\n    offset.storage.partitions = null\n    offset.storage.replication.factor = null\n    offset.storage.topic = \n    plugin.path = null\n    response.http.headers.config = \n    rest.advertised.host.name = null\n    rest.advertised.listener = null\n    rest.advertised.port = null\n    rest.extension.classes = []\n    ssl.cipher.suites = null\n    ssl.client.auth = none\n    ssl.enabled.protocols = [TLSv1.2]\n    ssl.endpoint.identification.algorithm = https\n    ssl.engine.factory.class = null\n    ssl.key.password = null\n    ssl.keymanager.algorithm = SunX509\n    ssl.keystore.certificate.chain = null\n    ssl.keystore.key = null\n    ssl.keystore.location = null\n    ssl.keystore.password = null\n    ssl.keystore.type = JKS\n    ssl.protocol = TLSv1.2\n    ssl.provider = null\n    ssl.secure.random.implementation = null\n    ssl.trustmanager.algorithm = PKIX\n    ssl.truststore.certificates = null\n    ssl.truststore.location = null\n    ssl.truststore.password = null\n    ssl.truststore.type = JKS\n    task.shutdown.graceful.timeout.ms = 5000\n    topic.creation.enable = true\n    topic.tracking.allow.reset = true\n    topic.tracking.enable = true\n    value.converter = class org.apache.kafka.connect.json.JsonConverter\n\n[main] WARN org.apache.kafka.connect.runtime.WorkerConfig - The worker has been configured with one or more internal converter properties ([internal.key.converter, internal.value.converter]). Support for these properties was deprecated in version 2.0 and removed in version 3.0, and specifying them will have no effect. Instead, an instance of the JsonConverter with schemas.enable set to false will be used. For more information, please visit http://kafka.apache.org/documentation/#upgrade and consult the upgrade notesfor the 3.0 release.\n[main] WARN org.apache.kafka.connect.runtime.WorkerConfig - Variables cannot be used in the 'plugin.path' property, since the property is used by plugin scanning before the config providers that replace the variables are initialized. The raw value 'null' was used for plugin scanning, as opposed to the transformed value 'null', and this may cause unexpected results.\n[main] INFO org.apache.kafka.connect.json.JsonConverterConfig - JsonConverterConfig values: \n    converter.type = key\n    decimal.format = BASE64\n    schemas.cache.size = 1000\n    schemas.enable = true\n\n[main] INFO org.apache.kafka.connect.json.JsonConverterConfig - JsonConverterConfig values: \n    converter.type = value\n    decimal.format = BASE64\n    schemas.cache.size = 1000\n    schemas.enable = true\n\n[main] INFO io.debezium.embedded.EmbeddedEngine - Stopping the embedded engine\n[pool-1-thread-1] INFO org.apache.kafka.connect.storage.FileOffsetBackingStore - Starting FileOffsetBackingStore with file C:\\Users\\VASS\\AppData\\Local\\Temp\\offsets_4608803621683662537.dat\n[pool-1-thread-1] WARN io.debezium.connector.postgresql.PostgresConnectorConfig - Logical decoder 'wal2json' is deprecated and will be removed in future versions\n[pool-1-thread-1] WARN io.debezium.connector.postgresql.PostgresConnectorConfig - Configuration property 'truncate.handling.mode' is deprecated and will be removed in future versions. Please use 'skipped.operations' instead.\n[pool-1-thread-1] WARN io.debezium.connector.postgresql.PostgresConnectorConfig - Configuration property 'toasted.value.placeholder' is deprecated and will be removed in future versions. Please use 'unavailable.value.placeholder' instead.\n[pool-1-thread-1] INFO io.debezium.connector.common.BaseSourceTask - Starting PostgresConnectorTask with configuration:\n[pool-1-thread-1] INFO io.debezium.connector.common.BaseSourceTask -    connector.class = io.debezium.connector.postgresql.PostgresConnector\n[pool-1-thread-1] INFO io.debezium.connector.common.BaseSourceTask -    database.allowPublicKeyRetrieval = true\n[pool-1-thread-1] INFO io.debezium.connector.common.BaseSourceTask -    database.history.file.filename = C:\\Users\\VASS\\AppData\\Local\\Temp\\dbhistory_3035630169534300344.dat\n[pool-1-thread-1] INFO io.debezium.connector.common.BaseSourceTask -    database.user = postgres\n[pool-1-thread-1] INFO io.debezium.connector.common.BaseSourceTask -    database.dbname = anotherdb\n[pool-1-thread-1] INFO io.debezium.connector.common.BaseSourceTask -    offset.storage = org.apache.kafka.connect.storage.FileOffsetBackingStore\n[pool-1-thread-1] INFO io.debezium.connector.common.BaseSourceTask -    database.server.id = 10181\n[pool-1-thread-1] INFO io.debezium.connector.common.BaseSourceTask -    database.server.name = localhost-postgresql\n[pool-1-thread-1] INFO io.debezium.connector.common.BaseSourceTask -    offset.flush.timeout.ms = 5000\n[pool-1-thread-1] INFO io.debezium.connector.common.BaseSourceTask -    include.schema.changes = false\n[pool-1-thread-1] INFO io.debezium.connector.common.BaseSourceTask -    database.port = 5432\n[pool-1-thread-1] INFO io.debezium.connector.common.BaseSourceTask -    plugin.name = wal2json\n[pool-1-thread-1] INFO io.debezium.connector.common.BaseSourceTask -    offset.flush.interval.ms = 60000\n[pool-1-thread-1] INFO io.debezium.connector.common.BaseSourceTask -    internal.key.converter = org.apache.kafka.connect.json.JsonConverter\n[pool-1-thread-1] INFO io.debezium.connector.common.BaseSourceTask -    offset.storage.file.filename = C:\\Users\\VASS\\AppData\\Local\\Temp\\offsets_4608803621683662537.dat\n[pool-1-thread-1] INFO io.debezium.connector.common.BaseSourceTask -    database.hostname = localhost\n[pool-1-thread-1] INFO io.debezium.connector.common.BaseSourceTask -    database.password = ********\n[pool-1-thread-1] INFO io.debezium.connector.common.BaseSourceTask -    name = customer-postgresql-connector\n[pool-1-thread-1] INFO io.debezium.connector.common.BaseSourceTask -    internal.value.converter = org.apache.kafka.connect.json.JsonConverter\n[pool-1-thread-1] INFO io.debezium.connector.common.BaseSourceTask -    value.converter = org.apache.kafka.connect.json.JsonConverter\n[pool-1-thread-1] INFO io.debezium.connector.common.BaseSourceTask -    key.converter = org.apache.kafka.connect.json.JsonConverter\n[pool-1-thread-1] INFO io.debezium.connector.common.BaseSourceTask -    database.include.list = anotherdb\n[pool-1-thread-1] INFO io.debezium.connector.common.BaseSourceTask -    database.history = io.debezium.relational.history.FileDatabaseHistory\n[pool-1-thread-1] INFO io.debezium.connector.common.BaseSourceTask -    schemas.enable = false\n[pool-2-thread-1] INFO io.debezium.jdbc.JdbcConnection - Connection gracefully closed\n[pool-1-thread-1] INFO io.debezium.connector.common.BaseSourceTask - No previous offsets found\n[pool-1-thread-1] INFO io.debezium.connector.postgresql.PostgresConnectorTask - user 'postgres' connected to database 'anotherdb' on PostgreSQL 11.13, compiled by Visual C++ build 1914, 64-bit with roles:\n    role 'pg_read_all_settings' [superuser: false, replication: false, inherit: true, create role: false, create db: false, can log in: false]\n    role 'pg_stat_scan_tables' [superuser: false, replication: false, inherit: true, create role: false, create db: false, can log in: false]\n    role 'pg_write_server_files' [superuser: false, replication: false, inherit: true, create role: false, create db: false, can log in: false]\n    role 'replicauser2' [superuser: false, replication: false, inherit: true, create role: false, create db: false, can log in: true]\n    role 'replicauser' [superuser: false, replication: true, inherit: true, create role: false, create db: false, can log in: true]\n    role 'usuarioreplica4' [superuser: false, replication: true, inherit: true, create role: false, create db: false, can log in: true]\n    role 'usuarioreplica2' [superuser: false, replication: true, inherit: true, create role: false, create db: false, can log in: true]\n    role 'sysrnt' [superuser: false, replication: true, inherit: true, create role: false, create db: false, can log in: true]\n    role 'pg_monitor' [superuser: false, replication: false, inherit: true, create role: false, create db: false, can log in: false]\n    role 'pg_read_server_files' [superuser: false, replication: false, inherit: true, create role: false, create db: false, can log in: false]\n    role 'pg_execute_server_program' [superuser: false, replication: false, inherit: true, create role: false, create db: false, can log in: false]\n    role 'usuarioreplica' [superuser: false, replication: true, inherit: false, create role: false, create db: false, can log in: true]\n    role 'pg_read_all_stats' [superuser: false, replication: false, inherit: true, create role: false, create db: false, can log in: false]\n    role 'pg_signal_backend' [superuser: false, replication: false, inherit: true, create role: false, create db: false, can log in: false]\n    role 'postgres' [superuser: true, replication: true, inherit: true, create role: true, create db: true, can log in: true]\n[pool-1-thread-1] INFO io.debezium.connector.postgresql.connection.PostgresConnection - Obtained valid replication slot ReplicationSlot [active=false, latestFlushedLsn=LSN{0/9999D438}, catalogXmin=3619]\n[pool-1-thread-1] INFO io.debezium.connector.postgresql.PostgresConnectorTask - No previous offset found\n[pool-1-thread-1] INFO io.debezium.connector.postgresql.snapshot.InitialSnapshotter - Taking initial snapshot for new datasource\n[pool-1-thread-1] INFO io.debezium.util.Threads - Requested thread factory for connector PostgresConnector, id = localhost-postgresql named = change-event-source-coordinator\n[pool-1-thread-1] INFO io.debezium.util.Threads - Creating thread debezium-postgresconnector-localhost-postgresql-change-event-source-coordinator\n[debezium-postgresconnector-localhost-postgresql-change-event-source-coordinator] INFO io.debezium.pipeline.ChangeEventSourceCoordinator - Metrics registered\n[debezium-postgresconnector-localhost-postgresql-change-event-source-coordinator] INFO io.debezium.pipeline.ChangeEventSourceCoordinator - Context created\n[debezium-postgresconnector-localhost-postgresql-change-event-source-coordinator] INFO io.debezium.connector.postgresql.snapshot.InitialSnapshotter - Taking initial snapshot for new datasource\n[debezium-postgresconnector-localhost-postgresql-change-event-source-coordinator] INFO io.debezium.connector.postgresql.PostgresSnapshotChangeEventSource - According to the connector configuration data will be snapshotted\n[debezium-postgresconnector-localhost-postgresql-change-event-source-coordinator] INFO io.debezium.relational.RelationalSnapshotChangeEventSource - Snapshot step 1 - Preparing\n[debezium-postgresconnector-localhost-postgresql-change-event-source-coordinator] INFO io.debezium.relational.RelationalSnapshotChangeEventSource - Snapshot step 2 - Determining captured tables\n[debezium-postgresconnector-localhost-postgresql-change-event-source-coordinator] INFO io.debezium.relational.RelationalSnapshotChangeEventSource - Adding table public.animales to the list of capture schema tables\n[debezium-postgresconnector-localhost-postgresql-change-event-source-coordinator] INFO io.debezium.relational.RelationalSnapshotChangeEventSource - Snapshot step 3 - Locking captured tables []\n[debezium-postgresconnector-localhost-postgresql-change-event-source-coordinator] INFO io.debezium.relational.RelationalSnapshotChangeEventSource - Snapshot step 4 - Determining snapshot offset\n[debezium-postgresconnector-localhost-postgresql-change-event-source-coordinator] INFO io.debezium.connector.postgresql.PostgresSnapshotChangeEventSource - Creating initial offset context\n[debezium-postgresconnector-localhost-postgresql-change-event-source-coordinator] INFO io.debezium.connector.postgresql.PostgresSnapshotChangeEventSource - Read xlogStart at 'LSN{0/999A2398}' from transaction '3648'\n[debezium-postgresconnector-localhost-postgresql-change-event-source-coordinator] INFO io.debezium.connector.postgresql.PostgresSnapshotChangeEventSource - Read xlogStart at 'LSN{0/999A2398}' from transaction '3648'\n[debezium-postgresconnector-localhost-postgresql-change-event-source-coordinator] INFO io.debezium.relational.RelationalSnapshotChangeEventSource - Snapshot step 5 - Reading structure of captured tables\n[debezium-postgresconnector-localhost-postgresql-change-event-source-coordinator] INFO io.debezium.relational.RelationalSnapshotChangeEventSource - Snapshot step 6 - Persisting schema history\n[debezium-postgresconnector-localhost-postgresql-change-event-source-coordinator] INFO io.debezium.relational.RelationalSnapshotChangeEventSource - Snapshot step 7 - Snapshotting data\n[debezium-postgresconnector-localhost-postgresql-change-event-source-coordinator] INFO io.debezium.relational.RelationalSnapshotChangeEventSource - Snapshotting contents of 0 tables while still in transaction\n[debezium-postgresconnector-localhost-postgresql-change-event-source-coordinator] INFO io.debezium.pipeline.source.AbstractSnapshotChangeEventSource - Snapshot - Final stage\n[debezium-postgresconnector-localhost-postgresql-change-event-source-coordinator] INFO io.debezium.pipeline.ChangeEventSourceCoordinator - Snapshot ended with SnapshotResult [status=COMPLETED, offset=PostgresOffsetContext [sourceInfoSchema=Schema{io.debezium.connector.postgresql.Source:STRUCT}, sourceInfo=source_info[server='localhost-postgresql'db='anotherdb', lsn=LSN{0/999A2398}, txId=3648, timestamp=2022-07-20T22:58:38.570Z, snapshot=FALSE, schema=, table=], lastSnapshotRecord=true, lastCompletelyProcessedLsn=null, lastCommitLsn=null, streamingStoppingLsn=null, transactionContext=TransactionContext [currentTransactionId=null, perTableEventCount={}, totalEventCount=0], incrementalSnapshotContext=IncrementalSnapshotContext [windowOpened=false, chunkEndPosition=null, dataCollectionsToSnapshot=[], lastEventKeySent=null, maximumKey=null]]]\n[debezium-postgresconnector-localhost-postgresql-change-event-source-coordinator] WARN io.debezium.relational.RelationalDatabaseSchema - After applying the include/exclude list filters, no changes will be captured. Please check your configuration!\n[debezium-postgresconnector-localhost-postgresql-change-event-source-coordinator] INFO io.debezium.pipeline.ChangeEventSourceCoordinator - Connected metrics set to 'true'\n[debezium-postgresconnector-localhost-postgresql-change-event-source-coordinator] INFO io.debezium.pipeline.ChangeEventSourceCoordinator - Starting streaming\n[debezium-postgresconnector-localhost-postgresql-change-event-source-coordinator] INFO io.debezium.connector.postgresql.PostgresStreamingChangeEventSource - Retrieved latest position from stored offset 'LSN{0/999A2398}'\n[debezium-postgresconnector-localhost-postgresql-change-event-source-coordinator] INFO io.debezium.connector.postgresql.connection.WalPositionLocator - Looking for WAL restart position for last commit LSN 'null' and last change LSN 'LSN{0/999A2398}'\n[debezium-postgresconnector-localhost-postgresql-change-event-source-coordinator] INFO io.debezium.connector.postgresql.connection.PostgresConnection - Obtained valid replication slot ReplicationSlot [active=false, latestFlushedLsn=LSN{0/9999D438}, catalogXmin=3619]\n[pool-3-thread-1] INFO io.debezium.jdbc.JdbcConnection - Connection gracefully closed\n[debezium-postgresconnector-localhost-postgresql-change-event-source-coordinator] INFO io.debezium.util.Threads - Requested thread factory for connector PostgresConnector, id = localhost-postgresql named = keep-alive\n[debezium-postgresconnector-localhost-postgresql-change-event-source-coordinator] INFO io.debezium.util.Threads - Creating thread debezium-postgresconnector-localhost-postgresql-keep-alive\n[debezium-postgresconnector-localhost-postgresql-change-event-source-coordinator] INFO io.debezium.connector.postgresql.PostgresStreamingChangeEventSource - Searching for WAL resume position\nWaiting another 5 seconds for the embedded engine to shut down\n[debezium-postgresconnector-localhost-postgresql-change-event-source-coordinator] INFO io.debezium.connector.postgresql.connection.WalPositionLocator - First LSN 'LSN{0/999A23F8}' received\n[debezium-postgresconnector-localhost-postgresql-change-event-source-coordinator] INFO io.debezium.connector.postgresql.PostgresStreamingChangeEventSource - WAL resume position 'LSN{0/999A23F8}' discovered\n[pool-4-thread-1] INFO io.debezium.jdbc.JdbcConnection - Connection gracefully closed\n[debezium-postgresconnector-localhost-postgresql-change-event-source-coordinator] INFO io.debezium.util.Threads - Requested thread factory for connector PostgresConnector, id = localhost-postgresql named = keep-alive\n[debezium-postgresconnector-localhost-postgresql-change-event-source-coordinator] INFO io.debezium.util.Threads - Creating thread debezium-postgresconnector-localhost-postgresql-keep-alive\n[debezium-postgresconnector-localhost-postgresql-change-event-source-coordinator] INFO io.debezium.connector.postgresql.PostgresStreamingChangeEventSource - Processing messages\n[debezium-postgresconnector-localhost-postgresql-change-event-source-coordinator] INFO io.debezium.connector.postgresql.connection.WalPositionLocator - Message with LSN 'LSN{0/999A23F8}' arrived, switching off the filtering\nWaiting another 5 seconds for the embedded engine to shut down\nWaiting another 5 seconds for the embedded engine to shut down\nWaiting another 5 seconds for the embedded engine to shut down\nWaiting another 5 seconds for the embedded engine to shut down\n...\n</code></pre>\n<p>As you can see, the print method of Notifying section has been never executed:</p>\n<pre><code>.notifying(record -&gt; {\n                    System.out.println(&quot;Record: &quot;+record);\n                })\nis not executing. Why?\n</code></pre>\n<p>Im running the app and INSERT data in the table but it is appear nothing append. What is wrong?</p>\n"},{"tags":["java","ssl","keytool","java-16"],"comments":[{"owner":{"account_id":3421244,"reputation":35863,"user_id":2868801,"display_name":"dave_thompson_085"},"score":8,"creation_date":1622429135,"post_id":67766268,"comment_id":119781968,"body_markdown":"It&#39;s a _change_ in keytool exposing a _bug_ (malformed PBKDF2) through 11.0.0 (including all 8) and a _limitation_ in 11.0.1-11. See [the release notes](https://www.oracle.com/java/technologies/javase/16-relnotes.html#JDK-8153005) and either (1) set the security properties as described in the file or (2) create with `-storetype jks` or `jceks` which are deprecated but still supported for compatibility, and alter your code accordingly.","body":"It&#39;s a <i>change</i> in keytool exposing a <i>bug</i> (malformed PBKDF2) through 11.0.0 (including all 8) and a <i>limitation</i> in 11.0.1-11. See <a href=\"https://www.oracle.com/java/technologies/javase/16-relnotes.html#JDK-8153005\" rel=\"nofollow noreferrer\">the release notes</a> and either (1) set the security properties as described in the file or (2) create with <code>-storetype jks</code> or <code>jceks</code> which are deprecated but still supported for compatibility, and alter your code accordingly."},{"owner":{"account_id":3421244,"reputation":35863,"user_id":2868801,"display_name":"dave_thompson_085"},"score":1,"creation_date":1622429528,"post_id":67766268,"comment_id":119782024,"body_markdown":"Or of course use older keytool, or if for some reason you don&#39;t want multiple javas, you _can_ also use `openssl req -new -x509 ...; openssl pkcs12 -export ...` (as described in innumerable other Qs) to create a keypair and selfsigned cert in an old-style PKCS12. PS: the server does not need its own cert in its TrustManager, unless you are _also_ using it as a DIY CA to issue certs to clients.","body":"Or of course use older keytool, or if for some reason you don&#39;t want multiple javas, you <i>can</i> also use <code>openssl req -new -x509 ...; openssl pkcs12 -export ...</code> (as described in innumerable other Qs) to create a keypair and selfsigned cert in an old-style PKCS12. PS: the server does not need its own cert in its TrustManager, unless you are <i>also</i> using it as a DIY CA to issue certs to clients."},{"owner":{"account_id":71739,"reputation":307142,"user_id":207421,"accept_rate":82,"display_name":"user207421"},"score":0,"creation_date":1622434548,"post_id":67766268,"comment_id":119782794,"body_markdown":"How is this ever going to work? Who is ever going to trust your certificate? How?","body":"How is this ever going to work? Who is ever going to trust your certificate? How?"},{"owner":{"account_id":11596040,"reputation":533,"user_id":8494773,"display_name":"Bertrand Martin"},"score":1,"creation_date":1622452145,"post_id":67766268,"comment_id":119788118,"body_markdown":"@dave_thompson_085 Thank you! Here is the [corresponding official issue](https://bugs.openjdk.java.net/browse/JDK-8228481). As this is a self-certificate, I don&#39;t need the extra security so I will use the `-J-Dkeystore.pkcs12.legacy` option with `keytool`.","body":"@dave_thompson_085 Thank you! Here is the <a href=\"https://bugs.openjdk.java.net/browse/JDK-8228481\" rel=\"nofollow noreferrer\">corresponding official issue</a>. As this is a self-certificate, I don&#39;t need the extra security so I will use the <code>-J-Dkeystore.pkcs12.legacy</code> option with <code>keytool</code>."},{"owner":{"account_id":11596040,"reputation":533,"user_id":8494773,"display_name":"Bertrand Martin"},"score":0,"creation_date":1622452235,"post_id":67766268,"comment_id":119788155,"body_markdown":"@dave_thompson_085 Good point about *TrustManager*, thank you again!","body":"@dave_thompson_085 Good point about <i>TrustManager</i>, thank you again!"},{"owner":{"account_id":11596040,"reputation":533,"user_id":8494773,"display_name":"Bertrand Martin"},"score":1,"creation_date":1622587793,"post_id":67766268,"comment_id":119833913,"body_markdown":"@dave_thompson_085 Please add your answer as a &quot;real&quot; answer so I can mark it as correct, thank you! :-) (or I&#39;ll just add the answer myself)","body":"@dave_thompson_085 Please add your answer as a &quot;real&quot; answer so I can mark it as correct, thank you! :-) (or I&#39;ll just add the answer myself)"},{"owner":{"account_id":593875,"reputation":20383,"user_id":276232,"accept_rate":50,"display_name":"Christopher Schultz"},"score":2,"creation_date":1654715373,"post_id":67766268,"comment_id":128160527,"body_markdown":"I think all of this has been fixed in the most recent versions of all supported lines. For example, Java 1.80_333 seems able to read keystores of this type.","body":"I think all of this has been fixed in the most recent versions of all supported lines. For example, Java 1.80_333 seems able to read keystores of this type."},{"owner":{"account_id":1851020,"reputation":4117,"user_id":1677594,"display_name":"Guillaume Husta"},"score":0,"creation_date":1668776459,"post_id":67766268,"comment_id":131494484,"body_markdown":"See also this issue : [JDK-8153005](https://bugs.openjdk.org/browse/JDK-8153005)","body":"See also this issue : <a href=\"https://bugs.openjdk.org/browse/JDK-8153005\" rel=\"nofollow noreferrer\">JDK-8153005</a>"},{"owner":{"account_id":3421244,"reputation":35863,"user_id":2868801,"display_name":"dave_thompson_085"},"score":0,"creation_date":1682889906,"post_id":67766268,"comment_id":134282138,"body_markdown":"Update: my comment about `openssl pkcs12 -export` was true when written, but since then OpenSSL 3.0 (2021-09) and 3.1 (2023-03) have changed it to also be incompatible by default; in those versions you need `openssl pkcs12 -export -legacy` to be compatible with older versions of Java. @ChristopherSchultz: yes 8u301 (2021-07) up also have the fix.","body":"Update: my comment about <code>openssl pkcs12 -export</code> was true when written, but since then OpenSSL 3.0 (2021-09) and 3.1 (2023-03) have changed it to also be incompatible by default; in those versions you need <code>openssl pkcs12 -export -legacy</code> to be compatible with older versions of Java. @ChristopherSchultz: yes 8u301 (2021-07) up also have the fix."}],"answers":[{"tags":[],"owner":{"account_id":11596040,"reputation":533,"user_id":8494773,"display_name":"Bertrand Martin"},"down_vote_count":0,"up_vote_count":14,"is_accepted":true,"score":14,"last_activity_date":1622658696,"creation_date":1622658696,"answer_id":67810654,"question_id":67766268,"body_markdown":"It&#39;s not a bug in `keytool` or *KeyStore*. `keytool` in [OpenJDK 16 has been improved](https://www.oracle.com/java/technologies/javase/16-relnotes.html#JDK-8153005) to use more secure algorithms by default, which are not supported with Java 8 and Java 11 (see [JDK-8228481](https://bugs.openjdk.java.net/browse/JDK-8228481)).\r\n\r\n2 options to solve the problem:\r\n\r\n* Use JKS instead of PKCS12 for the key store\r\n* Use the `-J-Dkeystore.pkcs12.legacy` option with `keytool` to set the `keystore.pkcs12.legacy` system property and force OpenJDK 16&#39;s `keytool` to use the older algorithms (which are supported by Java 8 and 11)\r\n\r\nFor the *keytool-maven-plugin* Maven plugin, use the below configuration:\r\n\r\n```xml\r\n\t\t\t&lt;plugin&gt;\r\n\t\t\t\t&lt;groupId&gt;org.codehaus.mojo&lt;/groupId&gt;\r\n\t\t\t\t&lt;artifactId&gt;keytool-maven-plugin&lt;/artifactId&gt;\r\n\t\t\t\t&lt;version&gt;1.5&lt;/version&gt;\r\n\t\t\t\t&lt;executions&gt;\r\n\t\t\t\t\t&lt;execution&gt;\r\n\t\t\t\t\t\t&lt;id&gt;create-https-certificate&lt;/id&gt;\r\n\t\t\t\t\t\t&lt;phase&gt;generate-resources&lt;/phase&gt;\r\n\t\t\t\t\t\t&lt;goals&gt;\r\n\t\t\t\t\t\t\t&lt;goal&gt;generateKeyPair&lt;/goal&gt;\r\n\t\t\t\t\t\t&lt;/goals&gt;\r\n\t\t\t\t\t\t&lt;configuration&gt;\r\n\t\t\t\t\t\t\t&lt;alias&gt;https&lt;/alias&gt;\r\n\t\t\t\t\t\t\t&lt;dname&gt;CN=localhost, OU=${project.name}, O=Sentry Software, C=FR&lt;/dname&gt;\r\n\t\t\t\t\t\t\t&lt;keyalg&gt;RSA&lt;/keyalg&gt;\r\n\t\t\t\t\t\t\t&lt;keypass&gt;password&lt;/keypass&gt;\r\n\t\t\t\t\t\t\t&lt;keystore&gt;${project.build.outputDirectory}/keystore.p12&lt;/keystore&gt;\r\n\t\t\t\t\t\t\t&lt;sigalg&gt;SHA256withRSA&lt;/sigalg&gt;\r\n\t\t\t\t\t\t\t&lt;skipIfExist&gt;true&lt;/skipIfExist&gt;\r\n\t\t\t\t\t\t\t&lt;storepass&gt;password&lt;/storepass&gt;\r\n\t\t\t\t\t\t\t&lt;storetype&gt;PKCS12&lt;/storetype&gt;\r\n\t\t\t\t\t\t\t&lt;validity&gt;3650&lt;/validity&gt;\r\n\t\t\t\t\t\t\t&lt;workingDirectory&gt;${project.build.directory}&lt;/workingDirectory&gt;\r\n\t\t\t\t\t\t\t&lt;arguments&gt;\r\n\t\t\t\t\t\t\t\t&lt;!-- Important! Use this to make sure the PKCS12 keystore can be used --&gt;\r\n\t\t\t\t\t\t\t\t&lt;!-- with Java 8 and 11 --&gt;\r\n\t\t\t\t\t\t\t\t&lt;!-- See https://bugs.openjdk.java.net/browse/JDK-8228481 --&gt;\r\n\t\t\t\t\t\t\t\t&lt;!-- See https://stackoverflow.com/questions/67766268/ --&gt;\r\n\t\t\t\t\t\t\t\t&lt;argument&gt;-J-Dkeystore.pkcs12.legacy&lt;/argument&gt;\r\n\t\t\t\t\t\t\t&lt;/arguments&gt;\r\n\t\t\t\t\t\t&lt;/configuration&gt;\r\n\t\t\t\t\t&lt;/execution&gt;\r\n\t\t\t\t&lt;/executions&gt;\r\n\t\t\t&lt;/plugin&gt;\r\n```\r\n\r\n*Note: All credits go to @dave_thompson_085*","title":"IOException in Java 8 when reading PKCS12 keystore created with keytool from OpenJDK16","body":"<p>It's not a bug in <code>keytool</code> or <em>KeyStore</em>. <code>keytool</code> in <a href=\"https://www.oracle.com/java/technologies/javase/16-relnotes.html#JDK-8153005\" rel=\"noreferrer\">OpenJDK 16 has been improved</a> to use more secure algorithms by default, which are not supported with Java 8 and Java 11 (see <a href=\"https://bugs.openjdk.java.net/browse/JDK-8228481\" rel=\"noreferrer\">JDK-8228481</a>).</p>\n<p>2 options to solve the problem:</p>\n<ul>\n<li>Use JKS instead of PKCS12 for the key store</li>\n<li>Use the <code>-J-Dkeystore.pkcs12.legacy</code> option with <code>keytool</code> to set the <code>keystore.pkcs12.legacy</code> system property and force OpenJDK 16's <code>keytool</code> to use the older algorithms (which are supported by Java 8 and 11)</li>\n</ul>\n<p>For the <em>keytool-maven-plugin</em> Maven plugin, use the below configuration:</p>\n<pre class=\"lang-xml prettyprint-override\"><code>            &lt;plugin&gt;\n                &lt;groupId&gt;org.codehaus.mojo&lt;/groupId&gt;\n                &lt;artifactId&gt;keytool-maven-plugin&lt;/artifactId&gt;\n                &lt;version&gt;1.5&lt;/version&gt;\n                &lt;executions&gt;\n                    &lt;execution&gt;\n                        &lt;id&gt;create-https-certificate&lt;/id&gt;\n                        &lt;phase&gt;generate-resources&lt;/phase&gt;\n                        &lt;goals&gt;\n                            &lt;goal&gt;generateKeyPair&lt;/goal&gt;\n                        &lt;/goals&gt;\n                        &lt;configuration&gt;\n                            &lt;alias&gt;https&lt;/alias&gt;\n                            &lt;dname&gt;CN=localhost, OU=${project.name}, O=Sentry Software, C=FR&lt;/dname&gt;\n                            &lt;keyalg&gt;RSA&lt;/keyalg&gt;\n                            &lt;keypass&gt;password&lt;/keypass&gt;\n                            &lt;keystore&gt;${project.build.outputDirectory}/keystore.p12&lt;/keystore&gt;\n                            &lt;sigalg&gt;SHA256withRSA&lt;/sigalg&gt;\n                            &lt;skipIfExist&gt;true&lt;/skipIfExist&gt;\n                            &lt;storepass&gt;password&lt;/storepass&gt;\n                            &lt;storetype&gt;PKCS12&lt;/storetype&gt;\n                            &lt;validity&gt;3650&lt;/validity&gt;\n                            &lt;workingDirectory&gt;${project.build.directory}&lt;/workingDirectory&gt;\n                            &lt;arguments&gt;\n                                &lt;!-- Important! Use this to make sure the PKCS12 keystore can be used --&gt;\n                                &lt;!-- with Java 8 and 11 --&gt;\n                                &lt;!-- See https://bugs.openjdk.java.net/browse/JDK-8228481 --&gt;\n                                &lt;!-- See https://stackoverflow.com/questions/67766268/ --&gt;\n                                &lt;argument&gt;-J-Dkeystore.pkcs12.legacy&lt;/argument&gt;\n                            &lt;/arguments&gt;\n                        &lt;/configuration&gt;\n                    &lt;/execution&gt;\n                &lt;/executions&gt;\n            &lt;/plugin&gt;\n</code></pre>\n<p><em>Note: All credits go to @dave_thompson_085</em></p>\n"}],"owner":{"account_id":11596040,"reputation":533,"user_id":8494773,"display_name":"Bertrand Martin"},"comment_count":9,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":20515,"favorite_count":0,"down_vote_count":0,"up_vote_count":15,"accepted_answer_id":67810654,"answer_count":1,"score":15,"last_activity_date":1682885090,"creation_date":1622413500,"question_id":67766268,"body_markdown":"## TL;DR\r\n\r\n`keytool` from OpenJDK16 creates PKCS12 keystore files that cannot be read from Java 8, 9, 10 and 11. Is this a bug? How to create a PKCS12 keystore that works with Java 8?\r\n\r\n## Context\r\n\r\nI build a Maven project which produces an executable JAR file that must run on any JRE from version 8 to version 16. That JAR file spawns an HTTPS server (using *com.sun.net.httpserver.HttpsServer*).\r\n\r\nDuring the build, I use `keytool` to generate a key pair and store it in a PKCS12 keystore that is bundled in the JAR (actually, I&#39;m using [keytool-maven-plugin](https://www.mojohaus.org/keytool/keytool-maven-plugin/usage.html)):\r\n\r\n```bash\r\n$ /path/to/jdk16/bin/keytool -genkeypair -keystore /tmp/keystore.p12 -storepass password -storetype PKCS12 -alias https -dname &quot;CN=localhost, OU=My HTTP Server, O=Sentry Software, C=FR&quot; -keypass password -validity 3650 -keyalg RSA -sigalg SHA256withRSA\r\n```\r\n\r\nThe Java code uses this automatically-generated keystore to start the HTTPS server:\r\n\r\n```java\r\n// initialize the HTTPS server\r\nhttpsServer = HttpsServer.create(socketAddress, 0);\r\n\r\n// initialize the keystore\r\nKeyStore keyStore = KeyStore.getInstance(&quot;PKCS12&quot;);\r\n\r\n// Load the self-certificate that is bundled with the JAR (see pom.xml)\r\nInputStream ksStream = this.getClass().getResourceAsStream(&quot;/keystore.p12&quot;);\r\nkeyStore.load(ksStream, &quot;password&quot;.toCharArray()); // Exception here\r\n\r\n// Rest of the code (only for context purpose)\r\n\r\n// setup the key manager factory\r\nString defaultKeyManagerAlgorithm = KeyManagerFactory.getDefaultAlgorithm();\r\nKeyManagerFactory keyManagerFactory = KeyManagerFactory.getInstance(defaultKeyManagerAlgorithm);\r\nkeyManagerFactory.init(keyStore, &quot;password&quot;.toCharArray());\r\n\r\n// setup the trust manager factory\r\nString defaultTrustManagerAlgorithm = TrustManagerFactory.getDefaultAlgorithm();\r\nTrustManagerFactory trustManagerFactory = TrustManagerFactory.getInstance(defaultTrustManagerAlgorithm);\r\ntrustManagerFactory.init(keyStore);\r\n\r\n// setup the HTTPS context and parameters\r\nSSLContext sslContext = SSLContext.getInstance(&quot;TLS&quot;);\r\nsslContext.init(keyManagerFactory.getKeyManagers(), trustManagerFactory.getTrustManagers(), null);\r\n\r\n// Sets the default SSL configuration (no need for extra code here!)\r\nhttpsServer.setHttpsConfigurator(new HttpsConfigurator(sslContext));\r\n\r\n```\r\n\r\n## Problem\r\n\r\nWhen the JAR is build with a OpenJDK 16 JDK (and `keytool` from OpenJDK 16 is used) and then executed in a Java 8 JRE, we get this exception on `keyStore.load()`:\r\n\r\n```\r\nIOException: parseAlgParameters failed: ObjectIdentifier() -- data isn&#39;t an object ID (tag = 48)\r\n```\r\n\r\nWhen the same JAR is executed in OpenJDK 11.0.7+10, we get this exception:\r\n\r\n```\r\nIOException: Integrity check failed: java.security.NoSuchAlgorithmException: Algorithm HmacPBESHA256 not available\r\n```\r\n\r\nHowever, when the same JAR is executed with OpenJDK 14, 15 or 16, no exception and everything works.\r\n\r\nHere&#39;s a table that summarizes the versions of `keytool`, and whether the PKCS12 key store created with each version of `keytool` can be loaded in various JRE versions:\r\n\r\n| | JRE 8 | JRE 11 | JRE 14 | JRE 16 |\r\n|---|---|---|---|---|\r\n| keytool 8 | ‚úÖ | ‚úÖ | ‚úÖ | ‚úÖ |\r\n| keytool 11 | ‚úÖ | ‚úÖ | ‚úÖ | ‚úÖ |\r\n| keytool 14 | ‚úÖ | ‚úÖ | ‚úÖ | ‚úÖ |\r\n| keytool 15 | ‚úÖ | ‚úÖ | ‚úÖ | ‚úÖ |\r\n| keytool 16 | ‚õî | ‚õî | ‚úÖ | ‚úÖ |\r\n \r\n## Questions\r\n\r\nIs this a bug in `keytool`, or in the *KeyStore* class?\r\n\r\nHow to create a PKCS12 key store using OpenJDK16 that will work when loaded with JRE 8?\r\n\r\nWhat is *HmacPBESHA256*? I haven&#39;t specified this algorithm in my `keytool` command line.\r\n","title":"IOException in Java 8 when reading PKCS12 keystore created with keytool from OpenJDK16","body":"<h2>TL;DR</h2>\n<p><code>keytool</code> from OpenJDK16 creates PKCS12 keystore files that cannot be read from Java 8, 9, 10 and 11. Is this a bug? How to create a PKCS12 keystore that works with Java 8?</p>\n<h2>Context</h2>\n<p>I build a Maven project which produces an executable JAR file that must run on any JRE from version 8 to version 16. That JAR file spawns an HTTPS server (using <em>com.sun.net.httpserver.HttpsServer</em>).</p>\n<p>During the build, I use <code>keytool</code> to generate a key pair and store it in a PKCS12 keystore that is bundled in the JAR (actually, I'm using <a href=\"https://www.mojohaus.org/keytool/keytool-maven-plugin/usage.html\" rel=\"noreferrer\">keytool-maven-plugin</a>):</p>\n<pre class=\"lang-sh prettyprint-override\"><code>$ /path/to/jdk16/bin/keytool -genkeypair -keystore /tmp/keystore.p12 -storepass password -storetype PKCS12 -alias https -dname &quot;CN=localhost, OU=My HTTP Server, O=Sentry Software, C=FR&quot; -keypass password -validity 3650 -keyalg RSA -sigalg SHA256withRSA\n</code></pre>\n<p>The Java code uses this automatically-generated keystore to start the HTTPS server:</p>\n<pre class=\"lang-java prettyprint-override\"><code>// initialize the HTTPS server\nhttpsServer = HttpsServer.create(socketAddress, 0);\n\n// initialize the keystore\nKeyStore keyStore = KeyStore.getInstance(&quot;PKCS12&quot;);\n\n// Load the self-certificate that is bundled with the JAR (see pom.xml)\nInputStream ksStream = this.getClass().getResourceAsStream(&quot;/keystore.p12&quot;);\nkeyStore.load(ksStream, &quot;password&quot;.toCharArray()); // Exception here\n\n// Rest of the code (only for context purpose)\n\n// setup the key manager factory\nString defaultKeyManagerAlgorithm = KeyManagerFactory.getDefaultAlgorithm();\nKeyManagerFactory keyManagerFactory = KeyManagerFactory.getInstance(defaultKeyManagerAlgorithm);\nkeyManagerFactory.init(keyStore, &quot;password&quot;.toCharArray());\n\n// setup the trust manager factory\nString defaultTrustManagerAlgorithm = TrustManagerFactory.getDefaultAlgorithm();\nTrustManagerFactory trustManagerFactory = TrustManagerFactory.getInstance(defaultTrustManagerAlgorithm);\ntrustManagerFactory.init(keyStore);\n\n// setup the HTTPS context and parameters\nSSLContext sslContext = SSLContext.getInstance(&quot;TLS&quot;);\nsslContext.init(keyManagerFactory.getKeyManagers(), trustManagerFactory.getTrustManagers(), null);\n\n// Sets the default SSL configuration (no need for extra code here!)\nhttpsServer.setHttpsConfigurator(new HttpsConfigurator(sslContext));\n\n</code></pre>\n<h2>Problem</h2>\n<p>When the JAR is build with a OpenJDK 16 JDK (and <code>keytool</code> from OpenJDK 16 is used) and then executed in a Java 8 JRE, we get this exception on <code>keyStore.load()</code>:</p>\n<pre><code>IOException: parseAlgParameters failed: ObjectIdentifier() -- data isn't an object ID (tag = 48)\n</code></pre>\n<p>When the same JAR is executed in OpenJDK 11.0.7+10, we get this exception:</p>\n<pre><code>IOException: Integrity check failed: java.security.NoSuchAlgorithmException: Algorithm HmacPBESHA256 not available\n</code></pre>\n<p>However, when the same JAR is executed with OpenJDK 14, 15 or 16, no exception and everything works.</p>\n<p>Here's a table that summarizes the versions of <code>keytool</code>, and whether the PKCS12 key store created with each version of <code>keytool</code> can be loaded in various JRE versions:</p>\n<div class=\"s-table-container\">\n<table class=\"s-table\">\n<thead>\n<tr>\n<th></th>\n<th>JRE 8</th>\n<th>JRE 11</th>\n<th>JRE 14</th>\n<th>JRE 16</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>keytool 8</td>\n<td>‚úÖ</td>\n<td>‚úÖ</td>\n<td>‚úÖ</td>\n<td>‚úÖ</td>\n</tr>\n<tr>\n<td>keytool 11</td>\n<td>‚úÖ</td>\n<td>‚úÖ</td>\n<td>‚úÖ</td>\n<td>‚úÖ</td>\n</tr>\n<tr>\n<td>keytool 14</td>\n<td>‚úÖ</td>\n<td>‚úÖ</td>\n<td>‚úÖ</td>\n<td>‚úÖ</td>\n</tr>\n<tr>\n<td>keytool 15</td>\n<td>‚úÖ</td>\n<td>‚úÖ</td>\n<td>‚úÖ</td>\n<td>‚úÖ</td>\n</tr>\n<tr>\n<td>keytool 16</td>\n<td>‚õî</td>\n<td>‚õî</td>\n<td>‚úÖ</td>\n<td>‚úÖ</td>\n</tr>\n</tbody>\n</table>\n</div><h2>Questions</h2>\n<p>Is this a bug in <code>keytool</code>, or in the <em>KeyStore</em> class?</p>\n<p>How to create a PKCS12 key store using OpenJDK16 that will work when loaded with JRE 8?</p>\n<p>What is <em>HmacPBESHA256</em>? I haven't specified this algorithm in my <code>keytool</code> command line.</p>\n"},{"tags":["java","generics","binary-search-tree"],"comments":[{"owner":{"account_id":401843,"reputation":89768,"user_id":768644,"display_name":"rzwitserloot"},"score":0,"creation_date":1682884194,"post_id":76143191,"comment_id":134281457,"body_markdown":"Your BST consists of nodes, and each node holds a value - that&#39;s what the E is about. In your getup, you have a BST consisting of Node objects, and each Node object holds values, and those values are of type MazeNode. This is confusing - you have 2 __completely different__ concepts both called &#39;nodes&#39;. Step 1 is to rename MazeNode to anything else.","body":"Your BST consists of nodes, and each node holds a value - that&#39;s what the E is about. In your getup, you have a BST consisting of Node objects, and each Node object holds values, and those values are of type MazeNode. This is confusing - you have 2 <b>completely different</b> concepts both called &#39;nodes&#39;. Step 1 is to rename MazeNode to anything else."},{"owner":{"account_id":14357,"reputation":9128,"user_id":29470,"display_name":"Tim Moore"},"score":0,"creation_date":1682895835,"post_id":76143191,"comment_id":134282735,"body_markdown":"It looks like the problem is in `preOrderIterator` which you haven‚Äôt shown. It must return `Iterator&lt;E&gt;` instead of `Iterator&lt;Node&gt;`","body":"It looks like the problem is in <code>preOrderIterator</code> which you haven‚Äôt shown. It must return <code>Iterator&lt;E&gt;</code> instead of <code>Iterator&lt;Node&gt;</code>"},{"owner":{"account_id":26760925,"reputation":9,"user_id":20358895,"display_name":"James Hou"},"score":0,"creation_date":1682923820,"post_id":76143191,"comment_id":134284777,"body_markdown":"@TimMoore project specifications require my Iterator to be generic.","body":"@TimMoore project specifications require my Iterator to be generic."}],"owner":{"account_id":26760925,"reputation":9,"user_id":20358895,"display_name":"James Hou"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":86,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1682883946,"creation_date":1682883575,"question_id":76143191,"body_markdown":"I have implemented a generic Binary Search Tree class that has a nested node class that looks like this:\r\n\r\n    public class BST&lt;E extends Comparable&lt;E&gt;&gt; implements Iterable&lt;E&gt; {\r\n\r\n    protected class Node {\r\n        E data;\r\n        Node leftChild;\r\n        Node rightChild;\r\n        int depth;\r\n\r\n        public Node(E data) {\r\n            this.data = data;\r\n            this.leftChild = null;\r\n            this.rightChild = null;\r\n            this.depth = 0;\r\n        }\r\n\r\n        public int getDepth(){\r\n            return this.depth;\r\n        }\r\n\r\n        public void setDepth(int depth){\r\n            this.depth = depth;\r\n        }\r\n    }\r\n\r\n    protected Node root;\r\n    \r\n    //methods are implemented past this point\r\n\r\nI also have a `MazeNode` object class that stores lifepoints and a label (just a letter):\r\n\r\n    public class MazeNode implements Comparable&lt;MazeNode&gt;{\r\n    private String label; // label of the node\r\n    private int lifePoints; // number of possible life points our hero can collect at this maze node\r\n\r\n    public MazeNode(String label, int lifePoints) {\r\n        this.label = label;\r\n        this.lifePoints = lifePoints;\r\n    }\r\n\r\n    public String getLabel() {\r\n        return label;\r\n    }\r\n\r\n    public int getLifePoints() {\r\n        return lifePoints;\r\n    }\r\n\r\n    @Override\r\n    public int compareTo(MazeNode o) {\r\n       return this.getLabel().compareTo(o.getLabel());\r\n    }\r\n\r\n    @Override\r\n    public String toString(){\r\n        return this.getLabel();\r\n    }\r\n\r\n}\r\n\r\nHere is my `Maze` class that does the iterating and finds a path down to the leaf nodes where my Hero has enough lifepoints to get down to the leaf node:\r\n\r\n    public class Maze extends BST&lt;MazeNode&gt; {\r\n\r\n    private int maxDepth = 0;\r\n\r\n    public void play(Hero hero) {\r\n        Iterator&lt;MazeNode&gt; pre1 = this.preOrderIterator();\r\n        Iterator&lt;MazeNode&gt; pre2 = this.preOrderIterator();\r\n        int maxDepth = 0;\r\n\r\n        while (pre1.hasNext()) {\r\n            MazeNode node = pre1.next();\r\n            if (node.leftChild == null &amp;&amp; node.rightChild == null) {\r\n                int x = node.getDepth();\r\n                if (maxDepth &lt; x) {\r\n                    maxDepth = x;\r\n                }\r\n            }\r\n\r\n            Stack&lt;MazeNode&gt; stack = new Stack&lt;MazeNode&gt;();\r\n            node = pre2.next();\r\n            while (pre2.hasNext()) {\r\n                if (node.leftChild == null &amp;&amp; node.rightChild == null) {\r\n                    int y = node.getDepth();\r\n                    if (y == maxDepth &amp;&amp; hero.getLives() &gt;= 0) {\r\n                        System.out.println(stack.toArray());\r\n                        while (node != stack.peek().leftChild || node != stack.peek().rightChild) {\r\n                            stack.pop();\r\n                            hero.editLife(-(node.getLifePoints()));\r\n                        }\r\n                    } else if (y &lt; maxDepth) {\r\n                        while (node != stack.peek().leftChild || node != stack.peek().rightChild) {\r\n                            stack.pop();\r\n                            hero.editLife(-(node.getLifePoints()));\r\n                        }\r\n                    }\r\n                } else {\r\n                    stack.push(node);\r\n                    hero.editLife(node.getLifePoints());\r\n                }\r\n                node = pre2.next();\r\n            }\r\n\r\n        }\r\n    }\r\n}\r\nThe goal of the project is, given a `BST` with a label and `lifePoints` at each node, find all the paths in which my hero can exit from the highest depth nodes, but my hero can only exit if he has enough life points to get to the bottom.\r\n\r\nThe issue in my `play()` method is that my node variable is of type `MazeNode` and as a result cannot access the `leftChild`, `rightChild`, and depth fields that are in my BST&lt;E&gt; Node class. How can I make it so it can? I wrote the logic out just for context, but obviously it does not work because my node variable cannot access the aforementioned data. **I must keep the BST&lt;E&gt; Node class of type node, I cannot make it generic. I also cannot make a new class to try and put them together.**\r\n\r\n\r\n\r\nI&#39;ve tried type casting, but I&#39;m still new to generics so I haven&#39;t really been able to figure it out. As I mentioned, I&#39;m not allowed to make a new class or change my BST Node to a generic type. ","title":"Accessing a variable in a generic Node class from a specific Node variable...?","body":"<p>I have implemented a generic Binary Search Tree class that has a nested node class that looks like this:</p>\n<pre><code>public class BST&lt;E extends Comparable&lt;E&gt;&gt; implements Iterable&lt;E&gt; {\n\nprotected class Node {\n    E data;\n    Node leftChild;\n    Node rightChild;\n    int depth;\n\n    public Node(E data) {\n        this.data = data;\n        this.leftChild = null;\n        this.rightChild = null;\n        this.depth = 0;\n    }\n\n    public int getDepth(){\n        return this.depth;\n    }\n\n    public void setDepth(int depth){\n        this.depth = depth;\n    }\n}\n\nprotected Node root;\n\n//methods are implemented past this point\n</code></pre>\n<p>I also have a <code>MazeNode</code> object class that stores lifepoints and a label (just a letter):</p>\n<pre><code>public class MazeNode implements Comparable&lt;MazeNode&gt;{\nprivate String label; // label of the node\nprivate int lifePoints; // number of possible life points our hero can collect at this maze node\n\npublic MazeNode(String label, int lifePoints) {\n    this.label = label;\n    this.lifePoints = lifePoints;\n}\n\npublic String getLabel() {\n    return label;\n}\n\npublic int getLifePoints() {\n    return lifePoints;\n}\n\n@Override\npublic int compareTo(MazeNode o) {\n   return this.getLabel().compareTo(o.getLabel());\n}\n\n@Override\npublic String toString(){\n    return this.getLabel();\n}\n</code></pre>\n<p>}</p>\n<p>Here is my <code>Maze</code> class that does the iterating and finds a path down to the leaf nodes where my Hero has enough lifepoints to get down to the leaf node:</p>\n<pre><code>public class Maze extends BST&lt;MazeNode&gt; {\n\nprivate int maxDepth = 0;\n\npublic void play(Hero hero) {\n    Iterator&lt;MazeNode&gt; pre1 = this.preOrderIterator();\n    Iterator&lt;MazeNode&gt; pre2 = this.preOrderIterator();\n    int maxDepth = 0;\n\n    while (pre1.hasNext()) {\n        MazeNode node = pre1.next();\n        if (node.leftChild == null &amp;&amp; node.rightChild == null) {\n            int x = node.getDepth();\n            if (maxDepth &lt; x) {\n                maxDepth = x;\n            }\n        }\n\n        Stack&lt;MazeNode&gt; stack = new Stack&lt;MazeNode&gt;();\n        node = pre2.next();\n        while (pre2.hasNext()) {\n            if (node.leftChild == null &amp;&amp; node.rightChild == null) {\n                int y = node.getDepth();\n                if (y == maxDepth &amp;&amp; hero.getLives() &gt;= 0) {\n                    System.out.println(stack.toArray());\n                    while (node != stack.peek().leftChild || node != stack.peek().rightChild) {\n                        stack.pop();\n                        hero.editLife(-(node.getLifePoints()));\n                    }\n                } else if (y &lt; maxDepth) {\n                    while (node != stack.peek().leftChild || node != stack.peek().rightChild) {\n                        stack.pop();\n                        hero.editLife(-(node.getLifePoints()));\n                    }\n                }\n            } else {\n                stack.push(node);\n                hero.editLife(node.getLifePoints());\n            }\n            node = pre2.next();\n        }\n\n    }\n}\n</code></pre>\n<p>}\nThe goal of the project is, given a <code>BST</code> with a label and <code>lifePoints</code> at each node, find all the paths in which my hero can exit from the highest depth nodes, but my hero can only exit if he has enough life points to get to the bottom.</p>\n<p>The issue in my <code>play()</code> method is that my node variable is of type <code>MazeNode</code> and as a result cannot access the <code>leftChild</code>, <code>rightChild</code>, and depth fields that are in my BST Node class. How can I make it so it can? I wrote the logic out just for context, but obviously it does not work because my node variable cannot access the aforementioned data. <strong>I must keep the BST Node class of type node, I cannot make it generic. I also cannot make a new class to try and put them together.</strong></p>\n<p>I've tried type casting, but I'm still new to generics so I haven't really been able to figure it out. As I mentioned, I'm not allowed to make a new class or change my BST Node to a generic type.</p>\n"},{"tags":["java","apache-kafka"],"comments":[{"owner":{"account_id":199671,"reputation":148444,"user_id":445131,"accept_rate":89,"display_name":"Eric Leschinski"},"score":19,"creation_date":1473282473,"post_id":33537950,"comment_id":66085964,"body_markdown":"Apache Kafka never deletes a topic marked for deletion if that topic has producers still producing to it, or consumers still consuming from it, or messages left hanging out in the queue.  One way to try to try to force it is to restart Kafka.  Or if that doesn&#39;t work, go in under the hood and Delete the directory that is your topic name under /var/local/kafka/data and then restart Kafka then re-issue the delete command.  I wish Apache Kafka had a &quot;nuke the bleeping topic&quot; option so the developer can issue the command: &quot;Really, totes for real this time nuke the bleeping topic no sass please&quot;.","body":"Apache Kafka never deletes a topic marked for deletion if that topic has producers still producing to it, or consumers still consuming from it, or messages left hanging out in the queue.  One way to try to try to force it is to restart Kafka.  Or if that doesn&#39;t work, go in under the hood and Delete the directory that is your topic name under /var/local/kafka/data and then restart Kafka then re-issue the delete command.  I wish Apache Kafka had a &quot;nuke the bleeping topic&quot; option so the developer can issue the command: &quot;Really, totes for real this time nuke the bleeping topic no sass please&quot;."},{"owner":{"account_id":1253382,"reputation":718,"user_id":1213333,"accept_rate":25,"display_name":"Avinav Mishra"},"score":6,"creation_date":1487643386,"post_id":33537950,"comment_id":71865825,"body_markdown":"bin/kafka-topics.sh ‚Äìdelete ‚Äìzookeeper localhost:2181 ‚Äìtopic &lt;topic-name&gt;","body":"bin/kafka-topics.sh ‚Äìdelete ‚Äìzookeeper localhost:2181 ‚Äìtopic &lt;topic-name&gt;"},{"owner":{"account_id":7137920,"reputation":1714,"user_id":5456789,"display_name":"Amir Azizkhani"},"score":0,"creation_date":1657104050,"post_id":33537950,"comment_id":128728504,"body_markdown":"Option zookeeper is deprecated, use --bootstrap-server instead. https://stackoverflow.com/a/53429129/5456789","body":"Option zookeeper is deprecated, use --bootstrap-server instead. <a href=\"https://stackoverflow.com/a/53429129/5456789\">stackoverflow.com/a/53429129/5456789</a>"},{"owner":{"account_id":159637,"reputation":2203,"user_id":379173,"display_name":"Enrico Giurin"},"score":0,"creation_date":1669607194,"post_id":33537950,"comment_id":131672512,"body_markdown":"This worked for me (within docker): bin/kafka-topics --delete --topic DummyTopic   --bootstrap-server localhost:29092","body":"This worked for me (within docker): bin/kafka-topics --delete --topic DummyTopic   --bootstrap-server localhost:29092"}],"answers":[{"tags":[],"owner":{"account_id":6453072,"reputation":37996,"user_id":4999394,"accept_rate":98,"display_name":"Ravindra babu"},"down_vote_count":1,"up_vote_count":140,"is_accepted":true,"score":139,"last_activity_date":1563912823,"creation_date":1446706334,"answer_id":33538299,"question_id":33537950,"body_markdown":"Deletion of a topic has been supported since 0.8.2.x version. You have to enable topic deletion (setting `delete.topic.enable` to true) on all brokers first. \r\n\r\nNote: Ever since 1.0.x, the functionality being stable, `delete.topic.enable` is by default `true`.\r\n\r\n\r\nFollow this step by step process for manual deletion of topics\r\n\r\n1. Stop *Kafka* server\r\n2. Delete the topic directory, on each *broker* (as defined in the `logs.dirs` and `log.dir` properties) with `rm -rf` command\r\n3. Connect to *Zookeeper* instance: `zookeeper-shell.sh host:port`\r\n4. From within the *Zookeeper* instance:\r\n   1. List the topics using: `ls /brokers/topics`\r\n   2. Remove the topic folder from *ZooKeeper* using: `rmr /brokers/topics/yourtopic`\r\n   3. Exit the Zookeeper instance (Ctrl+C)\r\n5. Restart *Kafka* server\r\n6. Confirm if it was deleted or not by using this command\r\n   `kafka-topics.sh --list --zookeeper host:port`","title":"How can I delete a topic in Apache Kafka?","body":"<p>Deletion of a topic has been supported since 0.8.2.x version. You have to enable topic deletion (setting <code>delete.topic.enable</code> to true) on all brokers first. </p>\n\n<p>Note: Ever since 1.0.x, the functionality being stable, <code>delete.topic.enable</code> is by default <code>true</code>.</p>\n\n<p>Follow this step by step process for manual deletion of topics</p>\n\n<ol>\n<li>Stop <em>Kafka</em> server</li>\n<li>Delete the topic directory, on each <em>broker</em> (as defined in the <code>logs.dirs</code> and <code>log.dir</code> properties) with <code>rm -rf</code> command</li>\n<li>Connect to <em>Zookeeper</em> instance: <code>zookeeper-shell.sh host:port</code></li>\n<li>From within the <em>Zookeeper</em> instance:\n\n<ol>\n<li>List the topics using: <code>ls /brokers/topics</code></li>\n<li>Remove the topic folder from <em>ZooKeeper</em> using: <code>rmr /brokers/topics/yourtopic</code></li>\n<li>Exit the Zookeeper instance (Ctrl+C)</li>\n</ol></li>\n<li>Restart <em>Kafka</em> server</li>\n<li>Confirm if it was deleted or not by using this command\n<code>kafka-topics.sh --list --zookeeper host:port</code></li>\n</ol>\n"}],"owner":{"account_id":6139346,"reputation":1723,"user_id":4787205,"accept_rate":44,"display_name":"Rishi Arora"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":274792,"favorite_count":0,"down_vote_count":0,"up_vote_count":119,"closed_date":1487194608,"accepted_answer_id":33538299,"answer_count":1,"score":119,"last_activity_date":1682883023,"creation_date":1446704720,"question_id":33537950,"body_markdown":"I need to delete a topic in Kafka 0.8.2.2.3. I have used the below command for deleting the topic:\r\n\r\n```lang-none\r\nbin/kafka-topics.sh --zookeeper localhost:2181 --delete --topic DummyTopic\r\n```\r\n\r\nThe command executed successfully, but when I run a command to list the topics, I could see that the topic is still there and it shows **marked for deletion**.\r\n\r\n```lang-none\r\nbin/kafka-topics.sh --list --zookeeper localhost:2181\r\nDummyTopic - marked for deletion\r\n```\r\n\r\nAnd when I create the topic DummyTopic, it outputs the exception. The topic already exists, and below is the stack trace:\r\n\r\n```lang-none\r\nError while executing topic command Topic &quot;DummyTopic&quot; already exists.\r\nkafka.common.TopicExistsException: Topic &quot;DummyTopic&quot; already exists.\r\n    at kafka.admin.AdminUtils$.createOrUpdateTopicPartitionAssignmentPathInZK(AdminUtils.scala:248)\r\n    at kafka.admin.AdminUtils$.createTopic(AdminUtils.scala:233)\r\n    at kafka.admin.TopicCommand$.createTopic(TopicCommand.scala:92)\r\n    at kafka.admin.TopicCommand$.main(TopicCommand.scala:54)\r\n    at kafka.admin.TopicCommand.main(TopicCommand.scala)\r\n```\r\n\r\nHow can I delete this topic?\r\n\r\n\r\n\r\n\r\n","title":"How can I delete a topic in Apache Kafka?","body":"<p>I need to delete a topic in Kafka 0.8.2.2.3. I have used the below command for deleting the topic:</p>\n<pre class=\"lang-none prettyprint-override\"><code>bin/kafka-topics.sh --zookeeper localhost:2181 --delete --topic DummyTopic\n</code></pre>\n<p>The command executed successfully, but when I run a command to list the topics, I could see that the topic is still there and it shows <strong>marked for deletion</strong>.</p>\n<pre class=\"lang-none prettyprint-override\"><code>bin/kafka-topics.sh --list --zookeeper localhost:2181\nDummyTopic - marked for deletion\n</code></pre>\n<p>And when I create the topic DummyTopic, it outputs the exception. The topic already exists, and below is the stack trace:</p>\n<pre class=\"lang-none prettyprint-override\"><code>Error while executing topic command Topic &quot;DummyTopic&quot; already exists.\nkafka.common.TopicExistsException: Topic &quot;DummyTopic&quot; already exists.\n    at kafka.admin.AdminUtils$.createOrUpdateTopicPartitionAssignmentPathInZK(AdminUtils.scala:248)\n    at kafka.admin.AdminUtils$.createTopic(AdminUtils.scala:233)\n    at kafka.admin.TopicCommand$.createTopic(TopicCommand.scala:92)\n    at kafka.admin.TopicCommand$.main(TopicCommand.scala:54)\n    at kafka.admin.TopicCommand.main(TopicCommand.scala)\n</code></pre>\n<p>How can I delete this topic?</p>\n"},{"tags":["java","spring-boot","docker","gradle","dockerfile"],"answers":[{"tags":[],"owner":{"account_id":2671330,"reputation":183376,"user_id":2308683,"accept_rate":90,"display_name":"OneCricketeer"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1682882966,"creation_date":1682882966,"answer_id":76143151,"question_id":76105109,"body_markdown":"You have two errors. \r\n\r\n1. `/gradlew` was not found. \r\n2. The JAR file in `/build` was not found; probably because the Gradle command could not be executed. \r\n\r\nRather than write your own Dockerfile and fiddle with running Gradle within it, I would highly recommend you use [jib-gradle-plugin](https://github.com/GoogleContainerTools/jib/tree/master/jib-gradle-plugin)\r\n\r\nOtherwise, Spring Boot already has a gradle action for building a container using BuildPacks, and you don&#39;t need other plugins. \r\n\r\n```\r\n./gradlew bootBuildImage --imageName=media-service\r\n```","title":"Error building Docker image with bootJar task","body":"<p>You have two errors.</p>\n<ol>\n<li><code>/gradlew</code> was not found.</li>\n<li>The JAR file in <code>/build</code> was not found; probably because the Gradle command could not be executed.</li>\n</ol>\n<p>Rather than write your own Dockerfile and fiddle with running Gradle within it, I would highly recommend you use <a href=\"https://github.com/GoogleContainerTools/jib/tree/master/jib-gradle-plugin\" rel=\"nofollow noreferrer\">jib-gradle-plugin</a></p>\n<p>Otherwise, Spring Boot already has a gradle action for building a container using BuildPacks, and you don't need other plugins.</p>\n<pre><code>./gradlew bootBuildImage --imageName=media-service\n</code></pre>\n"}],"owner":{"account_id":16437875,"reputation":209,"user_id":14564074,"display_name":"noob234"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":387,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76143151,"answer_count":1,"score":0,"last_activity_date":1682882966,"creation_date":1682453840,"question_id":76105109,"body_markdown":"I am trying to build a Docker image for my Java Spring Boot application. So I created a Docker file like this:\r\n\r\n```\r\nFROM openjdk:17-jdk-alpine\r\nVOLUME /tmp\r\nARG JAR_FILE\r\nCOPY ${JAR_FILE} media-service.jar\r\nENTRYPOINT [&quot;java&quot;, &quot;-jar&quot;, &quot;/media-service.jar&quot;]\r\nFROM openjdk:17-jdk-alpine\r\nVOLUME /tmp\r\nWORKDIR /media-service\r\nCOPY build/libs/media-service-0.0.1-SNAPSHOT.jar media-service.jar\r\nENTRYPOINT [&quot;java&quot;, &quot;-jar&quot;, &quot;media-service.jar&quot;]\r\n# Run bootJar task to generate executable jar file\r\nRUN ./gradlew bootJar\r\n# Copy the generated jar file into the container\r\nCOPY build/libs/media-service-0.0.1-SNAPSHOT.jar media-service.jar\r\n```\r\nThen I realized when trying to run the image that I have to add the main classpath, so I added this in my build.gradle file:\r\n\r\n```\r\nbootJar {\r\n\tmainClass = &#39;com.emanuel.mediaservice.MediaServiceApplication&#39;\r\n}\r\n```\r\n\r\nTested the generated jar file with the command ```java -jar myJar.jar``` and it works fine.\r\nAfter adding the main classpath, I changed the docker file to run the bootJar task so I can have a functional jar.\r\n\r\nHere is the updated Dockerfile:\r\n```\r\nFROM openjdk:17-jdk-alpine\r\n\r\n# Set working directory to /media-service\r\nWORKDIR /media-service\r\n\r\n# Copy Gradle files\r\nCOPY build.gradle .\r\nCOPY gradlew .\r\nCOPY gradle gradle\r\n\r\n# Download dependencies\r\nRUN ./gradlew dependencies\r\n\r\n# Copy source code\r\nCOPY src/main src/main\r\nCOPY src/test src/test\r\n\r\n# Build executable jar file\r\nRUN ./gradlew bootJar\r\n\r\n# Copy executable jar file into container\r\nCOPY build/libs/media-service-0.0.1-SNAPSHOT.jar media-service.jar\r\n\r\n# Set command to run when the container starts\r\nENTRYPOINT [&quot;java&quot;, &quot;-jar&quot;, &quot;media-service.jar&quot;]\r\n```\r\n\r\nBut now unfortunatley **I get this errors**: https://pastebin.com/WJuBiVhD\r\n\r\nI will also like to mention that I use this plugin https://github.com/palantir/gradle-docker\r\nand I will also like to share how I use it in my build.gradle:\r\n\r\n```\r\nplugins {\r\n//...\r\n\tid &#39;com.palantir.docker&#39; version &#39;0.35.0&#39;\r\n}\r\n\r\ndocker {\r\n\tname &quot;media-service&quot;\r\n\tdockerfile file(&#39;src/main/docker/Dockerfile&#39;)\r\n\tcopySpec.from(jar).rename(&quot;.*&quot;, &quot;media-service.jar&quot;)\r\n\tbuildArgs([&#39;JAR_FILE&#39;: &quot;media-service.jar&quot;])\r\n}\r\n```\r\n\r\n","title":"Error building Docker image with bootJar task","body":"<p>I am trying to build a Docker image for my Java Spring Boot application. So I created a Docker file like this:</p>\n<pre><code>FROM openjdk:17-jdk-alpine\nVOLUME /tmp\nARG JAR_FILE\nCOPY ${JAR_FILE} media-service.jar\nENTRYPOINT [&quot;java&quot;, &quot;-jar&quot;, &quot;/media-service.jar&quot;]\nFROM openjdk:17-jdk-alpine\nVOLUME /tmp\nWORKDIR /media-service\nCOPY build/libs/media-service-0.0.1-SNAPSHOT.jar media-service.jar\nENTRYPOINT [&quot;java&quot;, &quot;-jar&quot;, &quot;media-service.jar&quot;]\n# Run bootJar task to generate executable jar file\nRUN ./gradlew bootJar\n# Copy the generated jar file into the container\nCOPY build/libs/media-service-0.0.1-SNAPSHOT.jar media-service.jar\n</code></pre>\n<p>Then I realized when trying to run the image that I have to add the main classpath, so I added this in my build.gradle file:</p>\n<pre><code>bootJar {\n    mainClass = 'com.emanuel.mediaservice.MediaServiceApplication'\n}\n</code></pre>\n<p>Tested the generated jar file with the command <code>java -jar myJar.jar</code> and it works fine.\nAfter adding the main classpath, I changed the docker file to run the bootJar task so I can have a functional jar.</p>\n<p>Here is the updated Dockerfile:</p>\n<pre><code>FROM openjdk:17-jdk-alpine\n\n# Set working directory to /media-service\nWORKDIR /media-service\n\n# Copy Gradle files\nCOPY build.gradle .\nCOPY gradlew .\nCOPY gradle gradle\n\n# Download dependencies\nRUN ./gradlew dependencies\n\n# Copy source code\nCOPY src/main src/main\nCOPY src/test src/test\n\n# Build executable jar file\nRUN ./gradlew bootJar\n\n# Copy executable jar file into container\nCOPY build/libs/media-service-0.0.1-SNAPSHOT.jar media-service.jar\n\n# Set command to run when the container starts\nENTRYPOINT [&quot;java&quot;, &quot;-jar&quot;, &quot;media-service.jar&quot;]\n</code></pre>\n<p>But now unfortunatley <strong>I get this errors</strong>: <a href=\"https://pastebin.com/WJuBiVhD\" rel=\"nofollow noreferrer\">https://pastebin.com/WJuBiVhD</a></p>\n<p>I will also like to mention that I use this plugin <a href=\"https://github.com/palantir/gradle-docker\" rel=\"nofollow noreferrer\">https://github.com/palantir/gradle-docker</a>\nand I will also like to share how I use it in my build.gradle:</p>\n<pre><code>plugins {\n//...\n    id 'com.palantir.docker' version '0.35.0'\n}\n\ndocker {\n    name &quot;media-service&quot;\n    dockerfile file('src/main/docker/Dockerfile')\n    copySpec.from(jar).rename(&quot;.*&quot;, &quot;media-service.jar&quot;)\n    buildArgs(['JAR_FILE': &quot;media-service.jar&quot;])\n}\n</code></pre>\n"},{"tags":["java","postgresql","spring-boot","docker"],"comments":[{"owner":{"account_id":1674328,"reputation":2652,"user_id":1540177,"display_name":"grekier"},"score":0,"creation_date":1682582402,"post_id":76117853,"comment_id":134239514,"body_markdown":"I think you need to connect through IP (127.0.0.1) instead of localhost or `host.docker.internal`","body":"I think you need to connect through IP (127.0.0.1) instead of localhost or <code>host.docker.internal</code>"},{"owner":{"account_id":16437875,"reputation":209,"user_id":14564074,"display_name":"noob234"},"score":0,"creation_date":1682582741,"post_id":76117853,"comment_id":134239584,"body_markdown":"Do you mean the command ```docker run ..``` is wrong or that I should modify my spring boot config to accept 127.0.0.1 instead of localhost?","body":"Do you mean the command <code>docker run ..</code> is wrong or that I should modify my spring boot config to accept 127.0.0.1 instead of localhost?"},{"owner":{"account_id":1674328,"reputation":2652,"user_id":1540177,"display_name":"grekier"},"score":2,"creation_date":1682583714,"post_id":76117853,"comment_id":134239805,"body_markdown":"I mean the connection string for your DB in spring config","body":"I mean the connection string for your DB in spring config"},{"owner":{"account_id":13863020,"reputation":137023,"user_id":10008173,"display_name":"David Maze"},"score":1,"creation_date":1682589871,"post_id":76117853,"comment_id":134241169,"body_markdown":"Are you using Docker Desktop (on any platform) or some other VM-based Docker implementation?  `--network=host` doesn&#39;t work unless you&#39;re using Docker Engine directly on a native-Linux system.","body":"Are you using Docker Desktop (on any platform) or some other VM-based Docker implementation?  <code>--network=host</code> doesn&#39;t work unless you&#39;re using Docker Engine directly on a native-Linux system."},{"owner":{"account_id":16437875,"reputation":209,"user_id":14564074,"display_name":"noob234"},"score":1,"creation_date":1682593094,"post_id":76117853,"comment_id":134241880,"body_markdown":"I have Docker Desktop, I am using Windows.","body":"I have Docker Desktop, I am using Windows."},{"owner":{"account_id":16437875,"reputation":209,"user_id":14564074,"display_name":"noob234"},"score":0,"creation_date":1682607435,"post_id":76117853,"comment_id":134245588,"body_markdown":"@grekier I tried to replace localhost with 127.0.0.1 in applcation.properties, but unfortunately, it did not work. I get the same behavior.","body":"@grekier I tried to replace localhost with 127.0.0.1 in applcation.properties, but unfortunately, it did not work. I get the same behavior."},{"owner":{"account_id":2671330,"reputation":183376,"user_id":2308683,"accept_rate":90,"display_name":"OneCricketeer"},"score":0,"creation_date":1682882462,"post_id":76117853,"comment_id":134281247,"body_markdown":"`127.0.0.1` and `localhost` are almost always the same thing. Neither are correct here","body":"<code>127.0.0.1</code> and <code>localhost</code> are almost always the same thing. Neither are correct here"}],"answers":[{"tags":[],"owner":{"account_id":2671330,"reputation":183376,"user_id":2308683,"accept_rate":90,"display_name":"OneCricketeer"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1682882748,"creation_date":1682882413,"answer_id":76143106,"question_id":76117853,"body_markdown":"&gt; my container can&#39;t connect to my local Postgres database\r\n\r\nYour container isn&#39;t running Postgres, and `--network=host` doesn&#39;t work in Windows for accessing services running directly in Windows. \r\n\r\nBest option would be to run Postgres as its own container, then connect the two, such as using Docker Compose. \r\n\r\nOtherwise, without seeing your Spring Config, you should reference [Boot Configuration](https://docs.spring.io/spring-boot/docs/current/reference/html/data.html#data.sql.r2dbc) and use the address **other than** localhost, such as `postgresql://docker.host.internal`\r\n\r\nYou shouldn&#39;t need extra `--add-host` flags. ","title":"Docker image can&#39;t connect to localhost ports","body":"<blockquote>\n<p>my container can't connect to my local Postgres database</p>\n</blockquote>\n<p>Your container isn't running Postgres, and <code>--network=host</code> doesn't work in Windows for accessing services running directly in Windows.</p>\n<p>Best option would be to run Postgres as its own container, then connect the two, such as using Docker Compose.</p>\n<p>Otherwise, without seeing your Spring Config, you should reference <a href=\"https://docs.spring.io/spring-boot/docs/current/reference/html/data.html#data.sql.r2dbc\" rel=\"nofollow noreferrer\">Boot Configuration</a> and use the address <strong>other than</strong> localhost, such as <code>postgresql://docker.host.internal</code></p>\n<p>You shouldn't need extra <code>--add-host</code> flags.</p>\n"}],"owner":{"account_id":16437875,"reputation":209,"user_id":14564074,"display_name":"noob234"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":368,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1682882748,"creation_date":1682580938,"question_id":76117853,"body_markdown":"I created a Docker image for my SpringBoot application with the Jib plugin and for some reason, I get errors because my container can&#39;t connect to my local Postgres database and my local Zipkin server.\r\n\r\nI tried to run the app like this:\r\n```\r\ndocker run --network host -p 8080:8080 media-service\r\ndocker run --network=host media-service\r\ndocker run --network=host --add-host host.docker.internal:host-gateway media-service\r\ndocker run --network host --add-host host.docker.internal:host-gateway media-service\r\ndocker run --add-host host.docker.internal:host-gateway media-service\r\n```\r\n\r\nAnd I also added this in my &quot;pg_hba.conf&quot; to allow docker connections:\r\n```\r\n# all connections from the Docker network subnet\r\nhost    all        all      172.16.0.0/12   trust\r\n```\r\n\r\nHere is a snippet of my log:\r\n```\r\norg.springframework.beans.factory.BeanCreationException: Error creating bean with name\r\n&#39;entityManagerFactory&#39; defined in class path resource\r\n[org/springframework/boot/autoconfigure/orm/jpa/HibernateJpaConfiguration.class]: Invocation of init method failed; nested exception is\r\njavax.persistence.PersistenceException: [PersistenceUnit: default] Unable to build \r\nHibernate SessionFactory\r\n...\r\nCaused by: org.hibernate.exception.JDBCConnectionException: \r\nUnable to open JDBC Connection for DDL execution\r\n...\r\nCaused by: org.postgresql.util.PSQLException: Connection to localhost:5432 refused. Check\r\nthat the hostname and port are correct and that the postmaster is accepting TCP/IP\r\nconnections.\r\n...\r\nException in thread &quot;Thread-3&quot; zipkin2.reporter.ClosedSenderException\r\n\r\n```\r\n\r\nHere is the full log: https://pastebin.com/pMjcvyms\r\n","title":"Docker image can&#39;t connect to localhost ports","body":"<p>I created a Docker image for my SpringBoot application with the Jib plugin and for some reason, I get errors because my container can't connect to my local Postgres database and my local Zipkin server.</p>\n<p>I tried to run the app like this:</p>\n<pre><code>docker run --network host -p 8080:8080 media-service\ndocker run --network=host media-service\ndocker run --network=host --add-host host.docker.internal:host-gateway media-service\ndocker run --network host --add-host host.docker.internal:host-gateway media-service\ndocker run --add-host host.docker.internal:host-gateway media-service\n</code></pre>\n<p>And I also added this in my &quot;pg_hba.conf&quot; to allow docker connections:</p>\n<pre><code># all connections from the Docker network subnet\nhost    all        all      172.16.0.0/12   trust\n</code></pre>\n<p>Here is a snippet of my log:</p>\n<pre><code>org.springframework.beans.factory.BeanCreationException: Error creating bean with name\n'entityManagerFactory' defined in class path resource\n[org/springframework/boot/autoconfigure/orm/jpa/HibernateJpaConfiguration.class]: Invocation of init method failed; nested exception is\njavax.persistence.PersistenceException: [PersistenceUnit: default] Unable to build \nHibernate SessionFactory\n...\nCaused by: org.hibernate.exception.JDBCConnectionException: \nUnable to open JDBC Connection for DDL execution\n...\nCaused by: org.postgresql.util.PSQLException: Connection to localhost:5432 refused. Check\nthat the hostname and port are correct and that the postmaster is accepting TCP/IP\nconnections.\n...\nException in thread &quot;Thread-3&quot; zipkin2.reporter.ClosedSenderException\n\n</code></pre>\n<p>Here is the full log: <a href=\"https://pastebin.com/pMjcvyms\" rel=\"nofollow noreferrer\">https://pastebin.com/pMjcvyms</a></p>\n"},{"tags":["java","spring-boot","junit","ignite","java-17"],"comments":[{"owner":{"account_id":9760,"reputation":85859,"user_id":18157,"accept_rate":100,"display_name":"Jim Garrison"},"score":0,"creation_date":1682883352,"post_id":76143035,"comment_id":134281356,"body_markdown":"Did you follow the instructions at [https://ignite.apache.org/docs/latest/quick-start/java](https://ignite.apache.org/docs/latest/quick-start/java)?","body":"Did you follow the instructions at <a href=\"https://ignite.apache.org/docs/latest/quick-start/java\" rel=\"nofollow noreferrer\">https://ignite.apache.org/docs/latest/quick-start/java</a>?"},{"owner":{"account_id":6072540,"reputation":309,"user_id":4740856,"accept_rate":38,"display_name":"Bhavya Sharma"},"score":0,"creation_date":1682912979,"post_id":76143035,"comment_id":134283927,"body_markdown":"@JimGarrison Yes, it was working properly using Java 8 and Java 11","body":"@JimGarrison Yes, it was working properly using Java 8 and Java 11"},{"owner":{"account_id":3690305,"reputation":1896,"user_id":3073027,"accept_rate":25,"display_name":"solveMe"},"score":0,"creation_date":1683710825,"post_id":76143035,"comment_id":134407049,"body_markdown":"I guess that it was some lack of support for java 17, Ignite 2.15 was released recently I guess it should has better java 17 support, give it a try.","body":"I guess that it was some lack of support for java 17, Ignite 2.15 was released recently I guess it should has better java 17 support, give it a try."}],"owner":{"account_id":6072540,"reputation":309,"user_id":4740856,"accept_rate":38,"display_name":"Bhavya Sharma"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":638,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":0,"score":0,"last_activity_date":1682881409,"creation_date":1682881409,"question_id":76143035,"body_markdown":"While running unit tests for my Springboot application, I am getting below error:\r\n```\r\njava.util.ServiceConfigurationError: javax.cache.spi.CachingProvider: Provider org.apache.ignite.cache.CachingProvider could not be instantiated\r\n  at java.base/java.util.ServiceLoader.fail(ServiceLoader.java:586)\r\n  at java.base/java.util.ServiceLoader$ProviderImpl.newInstance(ServiceLoader.java:813)\r\n  at java.base/java.util.ServiceLoader$ProviderImpl.get(ServiceLoader.java:729)\r\n  at java.base/java.util.ServiceLoader$3.next(ServiceLoader.java:1403)\r\n  at javax.cache.Caching$CachingProviderRegistry$1.run(Caching.java:448)\r\n  at javax.cache.Caching$CachingProviderRegistry$1.run(Caching.java:442)\r\n  at java.base/java.security.AccessController.doPrivileged(AccessController.java:318)\r\n  at javax.cache.Caching$CachingProviderRegistry.getCachingProviders(Caching.java:442)\r\n  at javax.cache.Caching$CachingProviderRegistry.getCachingProviders(Caching.java:410)\r\n  at javax.cache.Caching.getCachingProviders(Caching.java:187)\r\n  at org.springframework.boot.autoconfigure.cache.JCacheCacheConfiguration$JCacheProviderAvailableCondition.getMatchOutcome(JCacheCacheConfiguration.java:160)\r\n  at org.springframework.boot.autoconfigure.condition.AbstractNestedCondition$MemberOutcomes.getConditionOutcome(AbstractNestedCondition.java:195)\r\n  at org.springframework.boot.autoconfigure.condition.AbstractNestedCondition$MemberOutcomes.&lt;init&gt;(AbstractNestedCondition.java:189)\r\n  at org.springframework.boot.autoconfigure.condition.AbstractNestedCondition$MemberConditions.lambda$getMatchOutcomes$0(AbstractNestedCondition.java:169)\r\n  at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.invokeTestInstancePostProcessors(ClassBasedTestDescriptor.java:376)\r\n  at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$instantiateAndPostProcessTestInstance$6(ClassBasedTestDescriptor.java:289)\r\n  at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n  at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.instantiateAndPostProcessTestInstance(ClassBasedTestDescriptor.java:288)\r\n  at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$4(ClassBasedTestDescriptor.java:278)\r\n  at java.base/java.util.Optional.orElseGet(Optional.java:364)\r\n  at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$5(ClassBasedTestDescriptor.java:277)\r\n  at org.junit.jupiter.engine.execution.TestInstancesProvider.getTestInstances(TestInstancesProvider.java:31)\r\n  at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$prepare$0(TestMethodTestDescriptor.java:105)\r\n  at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n  at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:104)\r\n  at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:68)\r\n  at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$prepare$2(NodeTestTask.java:123)\r\n  at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n  at org.junit.platform.engine.support.hierarchical.NodeTestTask.prepare(NodeTestTask.java:123)\r\n  at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:90)\r\n  at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)\r\n  at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.processAllTestClasses(JUnitPlatformTestClassProcessor.java:99)\r\nCaused by: java.lang.NoClassDefFoundError: Could not initialize class org.apache.ignite.cache.CachingProvider\r\n  at jdk.internal.reflect.GeneratedConstructorAccessor115.newInstance(Unknown Source)\r\n  at java.base/jdk.internal.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)\r\n  at java.base/java.lang.reflect.Constructor.newInstanceWithCaller(Constructor.java:499)\r\n  at java.base/java.lang.reflect.Constructor.newInstance(Constructor.java:480)\r\n  at java.base/java.util.ServiceLoader$ProviderImpl.newInstance(ServiceLoader.java:789)\r\n  ... 128 more\r\nCaused by: java.lang.ExceptionInInitializerError: Exception java.lang.ExceptionInInitializerError [in thread &quot;Test worker&quot;]\r\n  at org.apache.ignite.internal.util.IgniteUtils.&lt;clinit&gt;(IgniteUtils.java:888)\r\n  at org.apache.ignite.cache.CachingProvider.&lt;clinit&gt;(CachingProvider.java:53)\r\n  at java.base/jdk.internal.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)\r\n  at java.base/jdk.internal.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:77)\r\n  ... 132 more\r\n```\r\n\r\nI am using Java 17, Springboot 3.0.3 and ignite 2.14.0\r\n\r\nTried adding below to build.gradle but still getting same error\r\n\r\n\t// https://mvnrepository.com/artifact/javax.cache/cache-api\r\n\ttestImplementation group: &#39;javax.cache&#39;, name: &#39;cache-api&#39;, version: &#39;1.1.1&#39;\r\n\r\nI would really appreciate any help here. Let me know what I am missing.","title":"Getting error &quot;Caused by: java.lang.NoClassDefFoundError: Could not initialize class org.apache.ignite.cache.CachingProvider&quot;","body":"<p>While running unit tests for my Springboot application, I am getting below error:</p>\n<pre><code>java.util.ServiceConfigurationError: javax.cache.spi.CachingProvider: Provider org.apache.ignite.cache.CachingProvider could not be instantiated\n  at java.base/java.util.ServiceLoader.fail(ServiceLoader.java:586)\n  at java.base/java.util.ServiceLoader$ProviderImpl.newInstance(ServiceLoader.java:813)\n  at java.base/java.util.ServiceLoader$ProviderImpl.get(ServiceLoader.java:729)\n  at java.base/java.util.ServiceLoader$3.next(ServiceLoader.java:1403)\n  at javax.cache.Caching$CachingProviderRegistry$1.run(Caching.java:448)\n  at javax.cache.Caching$CachingProviderRegistry$1.run(Caching.java:442)\n  at java.base/java.security.AccessController.doPrivileged(AccessController.java:318)\n  at javax.cache.Caching$CachingProviderRegistry.getCachingProviders(Caching.java:442)\n  at javax.cache.Caching$CachingProviderRegistry.getCachingProviders(Caching.java:410)\n  at javax.cache.Caching.getCachingProviders(Caching.java:187)\n  at org.springframework.boot.autoconfigure.cache.JCacheCacheConfiguration$JCacheProviderAvailableCondition.getMatchOutcome(JCacheCacheConfiguration.java:160)\n  at org.springframework.boot.autoconfigure.condition.AbstractNestedCondition$MemberOutcomes.getConditionOutcome(AbstractNestedCondition.java:195)\n  at org.springframework.boot.autoconfigure.condition.AbstractNestedCondition$MemberOutcomes.&lt;init&gt;(AbstractNestedCondition.java:189)\n  at org.springframework.boot.autoconfigure.condition.AbstractNestedCondition$MemberConditions.lambda$getMatchOutcomes$0(AbstractNestedCondition.java:169)\n  at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.invokeTestInstancePostProcessors(ClassBasedTestDescriptor.java:376)\n  at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$instantiateAndPostProcessTestInstance$6(ClassBasedTestDescriptor.java:289)\n  at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\n  at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.instantiateAndPostProcessTestInstance(ClassBasedTestDescriptor.java:288)\n  at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$4(ClassBasedTestDescriptor.java:278)\n  at java.base/java.util.Optional.orElseGet(Optional.java:364)\n  at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$5(ClassBasedTestDescriptor.java:277)\n  at org.junit.jupiter.engine.execution.TestInstancesProvider.getTestInstances(TestInstancesProvider.java:31)\n  at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$prepare$0(TestMethodTestDescriptor.java:105)\n  at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\n  at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:104)\n  at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:68)\n  at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$prepare$2(NodeTestTask.java:123)\n  at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\n  at org.junit.platform.engine.support.hierarchical.NodeTestTask.prepare(NodeTestTask.java:123)\n  at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:90)\n  at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)\n  at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.processAllTestClasses(JUnitPlatformTestClassProcessor.java:99)\nCaused by: java.lang.NoClassDefFoundError: Could not initialize class org.apache.ignite.cache.CachingProvider\n  at jdk.internal.reflect.GeneratedConstructorAccessor115.newInstance(Unknown Source)\n  at java.base/jdk.internal.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)\n  at java.base/java.lang.reflect.Constructor.newInstanceWithCaller(Constructor.java:499)\n  at java.base/java.lang.reflect.Constructor.newInstance(Constructor.java:480)\n  at java.base/java.util.ServiceLoader$ProviderImpl.newInstance(ServiceLoader.java:789)\n  ... 128 more\nCaused by: java.lang.ExceptionInInitializerError: Exception java.lang.ExceptionInInitializerError [in thread &quot;Test worker&quot;]\n  at org.apache.ignite.internal.util.IgniteUtils.&lt;clinit&gt;(IgniteUtils.java:888)\n  at org.apache.ignite.cache.CachingProvider.&lt;clinit&gt;(CachingProvider.java:53)\n  at java.base/jdk.internal.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)\n  at java.base/jdk.internal.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:77)\n  ... 132 more\n</code></pre>\n<p>I am using Java 17, Springboot 3.0.3 and ignite 2.14.0</p>\n<p>Tried adding below to build.gradle but still getting same error</p>\n<pre><code>// https://mvnrepository.com/artifact/javax.cache/cache-api\ntestImplementation group: 'javax.cache', name: 'cache-api', version: '1.1.1'\n</code></pre>\n<p>I would really appreciate any help here. Let me know what I am missing.</p>\n"},{"tags":["java","android","listview"],"comments":[{"owner":{"account_id":153997,"reputation":521,"user_id":369649,"accept_rate":75,"display_name":"Brayden"},"score":1,"creation_date":1337638392,"post_id":10693112,"comment_id":13880710,"body_markdown":"See this question: http://stackoverflow.com/questions/3014089/scroll-to-a-position-in-a-listview","body":"See this question: <a href=\"http://stackoverflow.com/questions/3014089/scroll-to-a-position-in-a-listview\" title=\"scroll to a position in a listview\">stackoverflow.com/questions/3014089/&hellip;</a>"},{"owner":{"account_id":478081,"reputation":9703,"user_id":889941,"accept_rate":100,"display_name":"Vladimir"},"score":0,"creation_date":1337680436,"post_id":10693112,"comment_id":13890401,"body_markdown":"Are you sure `btn_NextClick()` gets called? I&#39;ve just tried `int position = _listView.getFirstVisiblePosition();\ntry {\n    _listView.setSelection(position + 1);\n} catch (Exception e) {}` and it works perfectly","body":"Are you sure <code>btn_NextClick()</code> gets called? I&#39;ve just tried <code>int position = _listView.getFirstVisiblePosition(); try {     _listView.setSelection(position + 1); } catch (Exception e) {}</code> and it works perfectly"},{"owner":{"account_id":1335761,"reputation":5531,"user_id":1278561,"accept_rate":77,"display_name":"GPGVM"},"score":0,"creation_date":1337687453,"post_id":10693112,"comment_id":13893055,"body_markdown":"Yeah it does as the breakpoints get hit.","body":"Yeah it does as the breakpoints get hit."}],"answers":[{"tags":[],"owner":{"account_id":1335761,"reputation":5531,"user_id":1278561,"accept_rate":77,"display_name":"GPGVM"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1337866633,"creation_date":1337866633,"answer_id":10738604,"question_id":10693112,"body_markdown":"I figured it out....but I don&#39;t know what to do about it. See not knowing what I am doing I shot myself. I ONLY want to see one item in the list at a time and I don&#39;t want the user to be able to scroll. Well what I did to accomplish that was to override getCount in the DataAdapter and return a 1. This SEEMED to be the answer as only one item displayed cool! But then overriding getCount also means there is only one item to display so we never advance...there&#39;s nothing to advance to.\r\n\r\nSo what I want to know is this. How do I keep the user from being able to scroll and force them to use the navigation button. Do I handle the scroll event and return null?\r\n","title":"Advance ListView next item / setSelectionFromTop not working / Inhibit user scrolling ListView","body":"<p>I figured it out....but I don't know what to do about it. See not knowing what I am doing I shot myself. I ONLY want to see one item in the list at a time and I don't want the user to be able to scroll. Well what I did to accomplish that was to override getCount in the DataAdapter and return a 1. This SEEMED to be the answer as only one item displayed cool! But then overriding getCount also means there is only one item to display so we never advance...there's nothing to advance to.</p>\n\n<p>So what I want to know is this. How do I keep the user from being able to scroll and force them to use the navigation button. Do I handle the scroll event and return null?</p>\n"}],"owner":{"account_id":1335761,"reputation":5531,"user_id":1278561,"accept_rate":77,"display_name":"GPGVM"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1168,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":10738604,"answer_count":1,"score":1,"last_activity_date":1682880981,"creation_date":1337636831,"question_id":10693112,"body_markdown":"I have a list view that show a list of items...well not all of them but they are all there. Rather than let the user scroll up / down the requirement asks for and up / down buttons. I have everything handled quite well EXCEPT how to advance the ListView. Say I&#39;m looking at item 3 in the list. The user hits next... I want to ListView to advance to item 4. I am keeping track internally of which page they are on for incrementing / decrementing. I was expecting to find something like this but no luck.\r\n\r\n    ListView.MoveNext();\r\nor\r\n\r\n    ListView.Move(int);\r\n\r\nPer Brayden&#39;s suggestion I tried the accepted solution here: https://stackoverflow.com/questions/3014089/scroll-to-a-position-in-a-listview and it did not APPEAR to scroll the list....i.e. it stayed on the first list item. I also tried setSelection.\r\n\r\nHere is my code:\r\n\r\n    public void btn_NextClick(View vw_Current) \r\n    {\r\n        //increment page count 1\r\n        i_PageTracker ++;\r\n\t\t\r\n        //advance to next record\r\n        //int x = lstvw_LiftData.getFirstVisiblePosition();\r\n        View v = lstvw_LiftData.getChildAt(0);\r\n        int top = (v == null) ? 0 : v.getTop();\r\n\r\n        lstvw_LiftData.setSelectionFromTop(i_PageTracker, top);\r\n        //lstvw_LiftData.setSelection(i_PageTracker);\r\n     }\r\n\r\nBased upon Vladimir&#39;s success and my lack thereof I wanted to provide some additional info that I thought irrelevant but....\r\n\r\nI&#39;ve extended the SimpleAedapter and override the getView. I also have a DataBinder to populate TextViews with certain data from the data object.\r\n\r\nInterestingly when I set a breakpoint in the getView of the DataAdapter and the setViewValue of the binder at load we hit them as appropriate. However when the next button is clicked we do not hit them which I would expect if the list was advancing to the next position....hmmmm I wonder....I have another Idea....be right back.\r\n\r\nI figured it out....but I don&#39;t know what to do about it. See not knowing what I am doing I shot myself. I ONLY want to see one item in the list at a time and I don&#39;t want the user to be able to scroll. Well what I did to accomplish that was to override getCount in the DataAdapter and return a 1. This SEEMED to be the answer as only one item displayed cool! But then overriding getCount also means there is only one item to display so we never advance...there&#39;s nothing to advance to.\r\n\r\nSo what I want to know is this. How do I keep the user from being able to scroll and force them to use the navigation button. Do I handle the scroll event and return null?","title":"Advance ListView next item / setSelectionFromTop not working / Inhibit user scrolling ListView","body":"<p>I have a list view that show a list of items...well not all of them but they are all there. Rather than let the user scroll up / down the requirement asks for and up / down buttons. I have everything handled quite well EXCEPT how to advance the ListView. Say I'm looking at item 3 in the list. The user hits next... I want to ListView to advance to item 4. I am keeping track internally of which page they are on for incrementing / decrementing. I was expecting to find something like this but no luck.</p>\n<pre><code>ListView.MoveNext();\n</code></pre>\n<p>or</p>\n<pre><code>ListView.Move(int);\n</code></pre>\n<p>Per Brayden's suggestion I tried the accepted solution here: <a href=\"https://stackoverflow.com/questions/3014089/scroll-to-a-position-in-a-listview\">Maintain/Save/Restore scroll position when returning to a ListView</a> and it did not APPEAR to scroll the list....i.e. it stayed on the first list item. I also tried setSelection.</p>\n<p>Here is my code:</p>\n<pre><code>public void btn_NextClick(View vw_Current) \n{\n    //increment page count 1\n    i_PageTracker ++;\n    \n    //advance to next record\n    //int x = lstvw_LiftData.getFirstVisiblePosition();\n    View v = lstvw_LiftData.getChildAt(0);\n    int top = (v == null) ? 0 : v.getTop();\n\n    lstvw_LiftData.setSelectionFromTop(i_PageTracker, top);\n    //lstvw_LiftData.setSelection(i_PageTracker);\n }\n</code></pre>\n<p>Based upon Vladimir's success and my lack thereof I wanted to provide some additional info that I thought irrelevant but....</p>\n<p>I've extended the SimpleAedapter and override the getView. I also have a DataBinder to populate TextViews with certain data from the data object.</p>\n<p>Interestingly when I set a breakpoint in the getView of the DataAdapter and the setViewValue of the binder at load we hit them as appropriate. However when the next button is clicked we do not hit them which I would expect if the list was advancing to the next position....hmmmm I wonder....I have another Idea....be right back.</p>\n<p>I figured it out....but I don't know what to do about it. See not knowing what I am doing I shot myself. I ONLY want to see one item in the list at a time and I don't want the user to be able to scroll. Well what I did to accomplish that was to override getCount in the DataAdapter and return a 1. This SEEMED to be the answer as only one item displayed cool! But then overriding getCount also means there is only one item to display so we never advance...there's nothing to advance to.</p>\n<p>So what I want to know is this. How do I keep the user from being able to scroll and force them to use the navigation button. Do I handle the scroll event and return null?</p>\n"},{"tags":["java","postgresql","spring-boot","hibernate"],"comments":[{"owner":{"account_id":17741504,"reputation":1083,"user_id":12881733,"display_name":"Bill Mair"},"score":0,"creation_date":1682851644,"post_id":76140530,"comment_id":134277311,"body_markdown":"You should never store passwords in plain text. Use a one way hashing function and store that instead.","body":"You should never store passwords in plain text. Use a one way hashing function and store that instead."}],"answers":[{"tags":[],"owner":{"account_id":3449881,"reputation":3520,"user_id":2889760,"display_name":"Gavin King"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1682879752,"creation_date":1682879752,"answer_id":76142926,"question_id":76140530,"body_markdown":"Your schema looks *extremely* weird. That&#39;s not how associations are supposed to be represented in relational databases. Instead, you should have a separate association table holding associations between users and isopods.\r\n\r\nAnyway, JPA mappings can&#39;t handle this sort of (bad) thing. You&#39;ll have to map the `isopods` column as a regular basic type.","title":"Cannot configure @ElementCollection to work as needed","body":"<p>Your schema looks <em>extremely</em> weird. That's not how associations are supposed to be represented in relational databases. Instead, you should have a separate association table holding associations between users and isopods.</p>\n<p>Anyway, JPA mappings can't handle this sort of (bad) thing. You'll have to map the <code>isopods</code> column as a regular basic type.</p>\n"}],"owner":{"account_id":2286889,"reputation":1,"user_id":17151430,"display_name":"user2010686"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":38,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1682879752,"creation_date":1682847325,"question_id":76140530,"body_markdown":"I have the following Postgres DB Tables:\r\n\r\n    isopod=# select * from users;\r\n     id | username | password | registered_at |       isopods        |                badges                \r\n    ----+----------+----------+---------------+----------------------+--------------------------------------\r\n      1 | mike     | mike     | now           | ISO.C.001, ISO.A.001 | badge1, badge2\r\n    (1 row)\r\n    \r\n    isopod=# select * from isopods;\r\n        id      | name  | size  | generation | type  | rarity |  icon  \r\n    ----+-------+-------+------------+-----------------+--------+--------\r\n      ISO.C.001 | AMBER | SMALL | CUBARIS    | type1 | RARE   | icon01\r\n    (1 row)\r\n\r\n\r\nAnd I am trying to connect my Java classes to this DB. Everything works fine for single Strings, but I face problems configuring my `private List&lt;String&gt; isopods`.\r\n\r\nMy Java User class:\r\n\r\n    @Entity\r\n    @Table(name = &quot;users&quot;)\r\n    public class User implements Serializable {\r\n    \r\n        @Id\r\n        private String id;\r\n        private String username;\r\n        private String password;\r\n        private String registeredAt;\r\n        @ElementCollection(fetch = FetchType.EAGER)\r\n        @CollectionTable(name=&quot;isopods&quot;, joinColumns=@JoinColumn(name=&quot;id&quot;))\r\n        private List&lt;String&gt; isopods = new ArrayList&lt;&gt;();\r\n        @ElementCollection\r\n        private List&lt;Badge&gt; badges;\r\n\r\nMy Java Isopod class:\r\n\r\n    @Entity\r\n    @Table(name = &quot;isopods&quot;)\r\n    public class Isopod implements Serializable {\r\n    \r\n        @Id\r\n        private String id; //ISO.C.001\r\n        private String name;\r\n        private String size;\r\n        private String generation;\r\n        private String type;\r\n        private String rarity;\r\n        private String icon;\r\n\r\nMy goal is to connect Isopod ID with User isopods list. Or even better refactor User&#39;s `List&lt;String&gt; isopods to List&lt;Isopod&gt;`\r\nI have tried different combinations for `@CollectionTable` but nothing works.\r\nWith the above setup the error is the following:\r\n\r\n    2023-04-30 12:30:51.284 ERROR 30955 --- [nio-8080-exec-1] o.h.engine.jdbc.spi.SqlExceptionHelper   : ERROR: column isopods0_.isopods does not exist\r\n\r\nCan someone please explain me what I do wrong?\r\n\r\nThank you","title":"Cannot configure @ElementCollection to work as needed","body":"<p>I have the following Postgres DB Tables:</p>\n<pre><code>isopod=# select * from users;\n id | username | password | registered_at |       isopods        |                badges                \n----+----------+----------+---------------+----------------------+--------------------------------------\n  1 | mike     | mike     | now           | ISO.C.001, ISO.A.001 | badge1, badge2\n(1 row)\n\nisopod=# select * from isopods;\n    id      | name  | size  | generation | type  | rarity |  icon  \n----+-------+-------+------------+-----------------+--------+--------\n  ISO.C.001 | AMBER | SMALL | CUBARIS    | type1 | RARE   | icon01\n(1 row)\n</code></pre>\n<p>And I am trying to connect my Java classes to this DB. Everything works fine for single Strings, but I face problems configuring my <code>private List&lt;String&gt; isopods</code>.</p>\n<p>My Java User class:</p>\n<pre><code>@Entity\n@Table(name = &quot;users&quot;)\npublic class User implements Serializable {\n\n    @Id\n    private String id;\n    private String username;\n    private String password;\n    private String registeredAt;\n    @ElementCollection(fetch = FetchType.EAGER)\n    @CollectionTable(name=&quot;isopods&quot;, joinColumns=@JoinColumn(name=&quot;id&quot;))\n    private List&lt;String&gt; isopods = new ArrayList&lt;&gt;();\n    @ElementCollection\n    private List&lt;Badge&gt; badges;\n</code></pre>\n<p>My Java Isopod class:</p>\n<pre><code>@Entity\n@Table(name = &quot;isopods&quot;)\npublic class Isopod implements Serializable {\n\n    @Id\n    private String id; //ISO.C.001\n    private String name;\n    private String size;\n    private String generation;\n    private String type;\n    private String rarity;\n    private String icon;\n</code></pre>\n<p>My goal is to connect Isopod ID with User isopods list. Or even better refactor User's <code>List&lt;String&gt; isopods to List&lt;Isopod&gt;</code>\nI have tried different combinations for <code>@CollectionTable</code> but nothing works.\nWith the above setup the error is the following:</p>\n<pre><code>2023-04-30 12:30:51.284 ERROR 30955 --- [nio-8080-exec-1] o.h.engine.jdbc.spi.SqlExceptionHelper   : ERROR: column isopods0_.isopods does not exist\n</code></pre>\n<p>Can someone please explain me what I do wrong?</p>\n<p>Thank you</p>\n"},{"tags":["java","spring-amqp","spring-rabbit"],"comments":[{"owner":{"account_id":4809624,"reputation":3467,"user_id":3883475,"accept_rate":85,"display_name":"Ironluca"},"score":0,"creation_date":1474697260,"post_id":39672639,"comment_id":66647118,"body_markdown":"Are you trying to parse {inputMap={}, outputMap={activityId=10001002, activityStatus=SUCCESS}} into a JSON by mistake, the error seems to point to that.","body":"Are you trying to parse {inputMap={}, outputMap={activityId=10001002, activityStatus=SUCCESS}} into a JSON by mistake, the error seems to point to that."},{"owner":{"account_id":10491815,"reputation":26310,"user_id":7733418,"display_name":"Yunnosch"},"score":0,"creation_date":1682879382,"post_id":39672639,"comment_id":134280860,"body_markdown":"I protect the question, to stop the inflow of test answers.","body":"I protect the question, to stop the inflow of test answers."}],"answers":[{"tags":[],"owner":{"account_id":1288095,"reputation":169316,"user_id":1240763,"display_name":"Gary Russell"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1474896141,"creation_date":1474721621,"answer_id":39676553,"question_id":39672639,"body_markdown":"What do you mean by &quot;in java code&quot; ? The object mapper is expecting a JSON string. \r\n\r\n    {&quot;ORCH_KEY&quot;:{&quot;inputMap&quot;:{},&quot;outputMap&quot;:{&quot;activityId&quot;:&quot;10001002&quot;,&quot;activityStatus&quot;:&quot;SUCCESS&quot;}}}\r\n\r\nIf you are using the Spring AMQP Json converter, the JSON will already have been converted to a Map of Maps.\r\n\r\n    {inputMap={}, outputMap={activityId=10001002, activityStatus=SUCCESS}}\r\n\r\nlooks like a `toString()` call on the result.\r\n\r\nYou need to customize the `Jackson2JsonMessageConverter` with a custom `ClassMapper` that tells the converter you want an `ExchangeDTO` created.\r\n\r\nYou can use a `DefaultClassMapper`; the default class mapper falls back to its default type if there is no information in the message to determine the type: `myDefaultClassMapper.setDefaultType(MyType.class);`. Then inject the mapper into the message converter.\r\n\r\n__EDIT__\r\n\r\nI just ran a test and it worked just fine for me (notice that no customization of the classmapper is required)...\r\n\r\n\tpublic static class DTO {\r\n\r\n\t\tprivate Map&lt;String, Object&gt; inputMap;\r\n\r\n\t\tprivate Map&lt;String, Object&gt; outputMap;\r\n\r\n\t\tpublic Map&lt;String, Object&gt; getInputMap() {\r\n\t\t\treturn this.inputMap;\r\n\t\t}\r\n\r\n\t\tpublic void setInputMap(Map&lt;String, Object&gt; inputMap) {\r\n\t\t\tthis.inputMap = inputMap;\r\n\t\t}\r\n\r\n\t\tpublic Map&lt;String, Object&gt; getOutputMap() {\r\n\t\t\treturn this.outputMap;\r\n\t\t}\r\n\r\n\t\tpublic void setOutputMap(Map&lt;String, Object&gt; outputMap) {\r\n\t\t\tthis.outputMap = outputMap;\r\n\t\t}\r\n\r\n\t\t@Override\r\n\t\tpublic String toString() {\r\n\t\t\treturn &quot;DTO [inputMap=&quot; + this.inputMap + &quot;, outputMap=&quot; + this.outputMap + &quot;]&quot;;\r\n\t\t}\r\n\t\t\r\n\t}\r\n\r\n\t@RabbitListener(queues = QUEUE, containerFactory = &quot;adapterOPListenerContainerFactory&quot;)\r\n\tpublic void listen(HashMap&lt;String, DTO&gt; message) {\r\n\t\tSystem.out.println(&quot;Result:&quot; + message.getClass() + &quot;:&quot; + message);\r\n\t\tlatch.countDown();\r\n\t}\r\n\r\n\t@Bean\r\n\tpublic SimpleRabbitListenerContainerFactory adapterOPListenerContainerFactory(ConnectionFactory connectionFactory) {\r\n\t\tSimpleRabbitListenerContainerFactory factory = new SimpleRabbitListenerContainerFactory();\r\n\t\tfactory.setConnectionFactory(connectionFactory);\r\n\t\tfactory.setMessageConverter(new Jackson2JsonMessageConverter());\r\n\t\treturn factory;\r\n\t}\r\n\r\nand\r\n\r\n    ... Received message: (Body:&#39;{&quot;MAP&quot;:{&quot;inputMap&quot;:{&quot;foo&quot;:&quot;bar&quot;},&quot;outputMap&quot;:{&quot;baz&quot;:&quot;qux&quot;}}}&#39;\r\n\r\nand\r\n\r\n    Result:class java.util.HashMap:{MAP=DTO [inputMap={foo=bar}, outputMap={baz=qux}]}\r\n\r\n\r\nThis mechanism (conveying the argument type to the JSON converter) requires Spring AMQP 1.6 or later - 1.6.2 is the current version.\r\n\r\n__EDIT2__\r\n\r\nIt works fine for me...\r\n\r\n\t@RabbitListener(queues = QUEUE, containerFactory = &quot;adapterOPListenerContainerFactory&quot;)\r\n\tpublic void listen(HashMap&lt;String, DTO&gt; dtos) {\r\n\t\tSystem.out.println(&quot;Result:&quot; + dtos.getClass() + &quot;:&quot; + dtos);\r\n\t\tDTO dto = dtos.entrySet().iterator().next().getValue();\r\n\t\tSystem.out.println(dto);\r\n\t\tlatch.countDown();\r\n\t}\r\n\r\nand\r\n\r\n    Result:class java.util.HashMap:{MAP=DTO [inputMap={foo=bar}, outputMap={baz=qux}]}\r\n    DTO [inputMap={foo=bar}, outputMap={baz=qux}]\r\n\r\n\r\nIt seems like your map values are not being converted to the DTO, but to the default `LinkedHashMap`. I don&#39;t see how that&#39;s possible if you are using the same configuration as me.\r\n\r\nIf you can post a small test project somewhere that exhibits the problem, I can take a look to see what&#39;s wrong.","title":"How to bind a message directly to my object class","body":"<p>What do you mean by \"in java code\" ? The object mapper is expecting a JSON string. </p>\n\n<pre><code>{\"ORCH_KEY\":{\"inputMap\":{},\"outputMap\":{\"activityId\":\"10001002\",\"activityStatus\":\"SUCCESS\"}}}\n</code></pre>\n\n<p>If you are using the Spring AMQP Json converter, the JSON will already have been converted to a Map of Maps.</p>\n\n<pre><code>{inputMap={}, outputMap={activityId=10001002, activityStatus=SUCCESS}}\n</code></pre>\n\n<p>looks like a <code>toString()</code> call on the result.</p>\n\n<p>You need to customize the <code>Jackson2JsonMessageConverter</code> with a custom <code>ClassMapper</code> that tells the converter you want an <code>ExchangeDTO</code> created.</p>\n\n<p>You can use a <code>DefaultClassMapper</code>; the default class mapper falls back to its default type if there is no information in the message to determine the type: <code>myDefaultClassMapper.setDefaultType(MyType.class);</code>. Then inject the mapper into the message converter.</p>\n\n<p><strong>EDIT</strong></p>\n\n<p>I just ran a test and it worked just fine for me (notice that no customization of the classmapper is required)...</p>\n\n<pre><code>public static class DTO {\n\n    private Map&lt;String, Object&gt; inputMap;\n\n    private Map&lt;String, Object&gt; outputMap;\n\n    public Map&lt;String, Object&gt; getInputMap() {\n        return this.inputMap;\n    }\n\n    public void setInputMap(Map&lt;String, Object&gt; inputMap) {\n        this.inputMap = inputMap;\n    }\n\n    public Map&lt;String, Object&gt; getOutputMap() {\n        return this.outputMap;\n    }\n\n    public void setOutputMap(Map&lt;String, Object&gt; outputMap) {\n        this.outputMap = outputMap;\n    }\n\n    @Override\n    public String toString() {\n        return \"DTO [inputMap=\" + this.inputMap + \", outputMap=\" + this.outputMap + \"]\";\n    }\n\n}\n\n@RabbitListener(queues = QUEUE, containerFactory = \"adapterOPListenerContainerFactory\")\npublic void listen(HashMap&lt;String, DTO&gt; message) {\n    System.out.println(\"Result:\" + message.getClass() + \":\" + message);\n    latch.countDown();\n}\n\n@Bean\npublic SimpleRabbitListenerContainerFactory adapterOPListenerContainerFactory(ConnectionFactory connectionFactory) {\n    SimpleRabbitListenerContainerFactory factory = new SimpleRabbitListenerContainerFactory();\n    factory.setConnectionFactory(connectionFactory);\n    factory.setMessageConverter(new Jackson2JsonMessageConverter());\n    return factory;\n}\n</code></pre>\n\n<p>and</p>\n\n<pre><code>... Received message: (Body:'{\"MAP\":{\"inputMap\":{\"foo\":\"bar\"},\"outputMap\":{\"baz\":\"qux\"}}}'\n</code></pre>\n\n<p>and</p>\n\n<pre><code>Result:class java.util.HashMap:{MAP=DTO [inputMap={foo=bar}, outputMap={baz=qux}]}\n</code></pre>\n\n<p>This mechanism (conveying the argument type to the JSON converter) requires Spring AMQP 1.6 or later - 1.6.2 is the current version.</p>\n\n<p><strong>EDIT2</strong></p>\n\n<p>It works fine for me...</p>\n\n<pre><code>@RabbitListener(queues = QUEUE, containerFactory = \"adapterOPListenerContainerFactory\")\npublic void listen(HashMap&lt;String, DTO&gt; dtos) {\n    System.out.println(\"Result:\" + dtos.getClass() + \":\" + dtos);\n    DTO dto = dtos.entrySet().iterator().next().getValue();\n    System.out.println(dto);\n    latch.countDown();\n}\n</code></pre>\n\n<p>and</p>\n\n<pre><code>Result:class java.util.HashMap:{MAP=DTO [inputMap={foo=bar}, outputMap={baz=qux}]}\nDTO [inputMap={foo=bar}, outputMap={baz=qux}]\n</code></pre>\n\n<p>It seems like your map values are not being converted to the DTO, but to the default <code>LinkedHashMap</code>. I don't see how that's possible if you are using the same configuration as me.</p>\n\n<p>If you can post a small test project somewhere that exhibits the problem, I can take a look to see what's wrong.</p>\n"}],"owner":{"account_id":5236898,"reputation":333,"user_id":4185205,"accept_rate":30,"display_name":"Chandan"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1974,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"accepted_answer_id":39676553,"answer_count":1,"score":0,"last_activity_date":1682879239,"creation_date":1474692628,"question_id":39672639,"body_markdown":"I am getting the message like below which contains 2 HashMap (inputMap and outputMap). Is it the right Approach to use ObjectMapper ?\r\n\r\nSample Message :\r\n\r\nIn RabbitMQ :\r\n\r\n     {&quot;ORCH_KEY&quot;:{&quot;inputMap&quot;:{},&quot;outputMap&quot;:{&quot;activityId&quot;:&quot;10001002&quot;,&quot;activityStatus&quot;:&quot;SUCCESS&quot;}}}\r\n\r\nIn Configuration Code\r\n\r\n    SimpleRabbitListenerContainerFactory factory = new SimpleRabbitListenerContainerFactory();\r\n\t\tfactory.setConnectionFactory(connectionFactory());\r\n\t\t\r\n\t\tJackson2JsonMessageConverter messageConverter=new Jackson2JsonMessageConverter();\r\n\t\tDefaultClassMapper classMapper = new DefaultClassMapper();\r\n\t\tclassMapper.setDefaultType(ExchangeDTO.class);\r\n\t\tmessageConverter.setClassMapper(classMapper);\r\n\t\tfactory.setMessageConverter(messageConverter);\r\n\r\nConsumer Code\r\n\r\n\r\n  \r\n\r\n     @RabbitListener(containerFactory = &quot;adapterOPListenerContainerFactory&quot;, queues = Constants.ADAPTOR_OP_QUEUE)\r\n    \tpublic void handleAdapterQueueMessage(HashMap&lt;String, ExchangeDTO&gt; adapterOutputMap) {\r\n    \t\t\r\n    \t\tlogger.info(&quot;Adapter Handler::::::::::&quot;+this.getClass().getCanonicalName());\r\n    \t\ttry {\r\n    \t\t\t\r\n    \t\t\tlogger.info(&quot;Adapter Output Map:::::::::::&quot; + adapterOutputMap);\r\n    \t\t\t\r\n    \t\t\tif(adapterOutputMap.size()==1){\r\n    \t\t\t\tIterator&lt;Entry&lt;String, ExchangeDTO&gt;&gt; iterator = adapterOutputMap.entrySet().iterator();\r\n    \t\t\t\tEntry&lt;String, ExchangeDTO&gt; next = iterator.next();\r\n    \t\t\t\t\r\n    \t\t\t\tString ORCH_KEY =next.getKey();\r\n    \t\t\t\tlogger.info(&quot;Ochestration Key:::::::::::&quot; + ORCH_KEY);\r\n    \t\t\t\t\r\n    \t\t\t\tExchangeDTO exchangeDTO = next.getValue();\r\n    \t\t\t\tlogger.info(&quot;Size of OutputMap:::::&quot;+exchangeDTO.getOutputMap().size());\r\n\r\nExchangeDTO class\r\n\r\n    public class ExchangeDTO implements Serializable {\r\n\r\n\t/**\r\n\t * \r\n\t */\r\n\tprivate static final long serialVersionUID = 1L;\r\n\tprivate HashMap&lt;String, Object&gt; inputMap = new HashMap&lt;String, Object&gt;();\r\n\tprivate HashMap&lt;String, Object&gt; outputMap = new HashMap&lt;String, Object&gt;();\r\n\r\n\tpublic HashMap&lt;String, Object&gt; getInputMap() {\r\n\t\treturn inputMap;\r\n\t}\r\n\r\n\tpublic void setInputMap(HashMap&lt;String, Object&gt; inputMap) {\r\n\t\tthis.inputMap = inputMap;\r\n\t}\r\n\r\n\tpublic HashMap&lt;String, Object&gt; getOutputMap() {\r\n\t\treturn outputMap;\r\n\t}\r\n\r\n\tpublic void setOutputMap(HashMap&lt;String, Object&gt; outputMap) {\r\n\t\tthis.outputMap = outputMap;\r\n\t}\r\n\r\n}\r\n\r\nI am facing an error like below :\r\n\r\n&gt; java.util.LinkedHashMap cannot be cast to\r\n&gt; com.bosch.bip.dto.ExchangeDTO\r\n\r\n\r\n","title":"How to bind a message directly to my object class","body":"<p>I am getting the message like below which contains 2 HashMap (inputMap and outputMap). Is it the right Approach to use ObjectMapper ?</p>\n\n<p>Sample Message :</p>\n\n<p>In RabbitMQ :</p>\n\n<pre><code> {\"ORCH_KEY\":{\"inputMap\":{},\"outputMap\":{\"activityId\":\"10001002\",\"activityStatus\":\"SUCCESS\"}}}\n</code></pre>\n\n<p>In Configuration Code</p>\n\n<pre><code>SimpleRabbitListenerContainerFactory factory = new SimpleRabbitListenerContainerFactory();\n    factory.setConnectionFactory(connectionFactory());\n\n    Jackson2JsonMessageConverter messageConverter=new Jackson2JsonMessageConverter();\n    DefaultClassMapper classMapper = new DefaultClassMapper();\n    classMapper.setDefaultType(ExchangeDTO.class);\n    messageConverter.setClassMapper(classMapper);\n    factory.setMessageConverter(messageConverter);\n</code></pre>\n\n<p>Consumer Code</p>\n\n<pre><code> @RabbitListener(containerFactory = \"adapterOPListenerContainerFactory\", queues = Constants.ADAPTOR_OP_QUEUE)\n    public void handleAdapterQueueMessage(HashMap&lt;String, ExchangeDTO&gt; adapterOutputMap) {\n\n        logger.info(\"Adapter Handler::::::::::\"+this.getClass().getCanonicalName());\n        try {\n\n            logger.info(\"Adapter Output Map:::::::::::\" + adapterOutputMap);\n\n            if(adapterOutputMap.size()==1){\n                Iterator&lt;Entry&lt;String, ExchangeDTO&gt;&gt; iterator = adapterOutputMap.entrySet().iterator();\n                Entry&lt;String, ExchangeDTO&gt; next = iterator.next();\n\n                String ORCH_KEY =next.getKey();\n                logger.info(\"Ochestration Key:::::::::::\" + ORCH_KEY);\n\n                ExchangeDTO exchangeDTO = next.getValue();\n                logger.info(\"Size of OutputMap:::::\"+exchangeDTO.getOutputMap().size());\n</code></pre>\n\n<p>ExchangeDTO class</p>\n\n<pre><code>public class ExchangeDTO implements Serializable {\n\n/**\n * \n */\nprivate static final long serialVersionUID = 1L;\nprivate HashMap&lt;String, Object&gt; inputMap = new HashMap&lt;String, Object&gt;();\nprivate HashMap&lt;String, Object&gt; outputMap = new HashMap&lt;String, Object&gt;();\n\npublic HashMap&lt;String, Object&gt; getInputMap() {\n    return inputMap;\n}\n\npublic void setInputMap(HashMap&lt;String, Object&gt; inputMap) {\n    this.inputMap = inputMap;\n}\n\npublic HashMap&lt;String, Object&gt; getOutputMap() {\n    return outputMap;\n}\n\npublic void setOutputMap(HashMap&lt;String, Object&gt; outputMap) {\n    this.outputMap = outputMap;\n}\n</code></pre>\n\n<p>}</p>\n\n<p>I am facing an error like below :</p>\n\n<blockquote>\n  <p>java.util.LinkedHashMap cannot be cast to\n  com.bosch.bip.dto.ExchangeDTO</p>\n</blockquote>\n"},{"tags":["java","spring","spring-mvc"],"comments":[{"owner":{"account_id":5650328,"reputation":1113,"user_id":4471199,"display_name":"RoBeaToZ"},"score":0,"creation_date":1581503560,"post_id":35064563,"comment_id":106453594,"body_markdown":"For more dynamic use cases checkout https://stackoverflow.com/questions/46974272/spring-boot-add-new-schedule-job-dynamically","body":"For more dynamic use cases checkout <a href=\"https://stackoverflow.com/questions/46974272/spring-boot-add-new-schedule-job-dynamically\" title=\"spring boot add new schedule job dynamically\">stackoverflow.com/questions/46974272/&hellip;</a>"}],"answers":[{"tags":[],"owner":{"account_id":1125906,"reputation":436,"user_id":1113199,"display_name":"–ê–ª–µ–∫—Å–∞–Ω–¥—Ä –ö–æ—Å–∞—Ä–µ–≤"},"down_vote_count":0,"up_vote_count":25,"is_accepted":false,"score":25,"last_activity_date":1453992754,"creation_date":1453992754,"answer_id":35064695,"question_id":35064563,"body_markdown":"The simplest way to schedule tasks in Spring is to create method annotated by &lt;code&gt;@Scheduled&lt;/code&gt; in spring managed bean. It also required &lt;code&gt;@EnableScheduling&lt;/code&gt; in any &lt;code&gt;@Configuration&lt;/code&gt; classes.\r\n\r\n[Spring tutorial][1]\r\n\r\n\r\n  [1]: https://spring.io/guides/gs/scheduling-tasks/","title":"What is best way to schedule task in spring boot application","body":"<p>The simplest way to schedule tasks in Spring is to create method annotated by <code>@Scheduled</code> in spring managed bean. It also required <code>@EnableScheduling</code> in any <code>@Configuration</code> classes.</p>\n\n<p><a href=\"https://spring.io/guides/gs/scheduling-tasks/\" rel=\"noreferrer\">Spring tutorial</a></p>\n"},{"tags":[],"owner":{"account_id":7636699,"reputation":1025,"user_id":5790054,"display_name":"Pankaj Pandey"},"down_vote_count":0,"up_vote_count":9,"is_accepted":true,"score":9,"last_activity_date":1453992971,"creation_date":1453992971,"answer_id":35064784,"question_id":35064563,"body_markdown":"you should use `quartz-scheduler` and `send mails at different time and send only once.`- put this as a business logic in your code.\r\nPlease see for spring boot -quartz integration \r\nhttps://github.com/davidkiss/spring-boot-quartz-demo","title":"What is best way to schedule task in spring boot application","body":"<p>you should use <code>quartz-scheduler</code> and <code>send mails at different time and send only once.</code>- put this as a business logic in your code.\nPlease see for spring boot -quartz integration \n<a href=\"https://github.com/davidkiss/spring-boot-quartz-demo\" rel=\"noreferrer\">https://github.com/davidkiss/spring-boot-quartz-demo</a></p>\n"},{"tags":[],"owner":{"account_id":9512854,"reputation":590,"user_id":7070261,"display_name":"Satish Kr"},"down_vote_count":0,"up_vote_count":14,"is_accepted":false,"score":14,"last_activity_date":1493878140,"creation_date":1493878140,"answer_id":43775103,"question_id":35064563,"body_markdown":"  You can use crontab inside @Scheduled \r\n\r\n     private AtomicInteger counter = new AtomicInteger(0);\r\n \r\n    @Scheduled(cron = &quot;*/2 * * * * *&quot;)\r\n    public void cronJob() {\r\n        int jobId = counter.incrementAndGet();\r\n        System.out.println(&quot;Job &quot; + new Date() + &quot;, jobId: &quot; + jobId);\r\n    }","title":"What is best way to schedule task in spring boot application","body":"<p>You can use crontab inside @Scheduled </p>\n\n<pre><code> private AtomicInteger counter = new AtomicInteger(0);\n\n@Scheduled(cron = \"*/2 * * * * *\")\npublic void cronJob() {\n    int jobId = counter.incrementAndGet();\n    System.out.println(\"Job \" + new Date() + \", jobId: \" + jobId);\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1056522,"reputation":2832,"user_id":1059099,"accept_rate":29,"display_name":"Ketan"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1597173341,"creation_date":1597173341,"answer_id":63364929,"question_id":35064563,"body_markdown":"Spring @Scheduled annotation will execute multiple times if you have more than one instance of your app where you have @Scheduled annotation.\r\n\r\nIf you are using PCF, you can use PCF scheduler https://docs.pivotal.io/scheduler/1-2/using-jobs.html to avoid this issue. Using Tasks can solve this issue.","title":"What is best way to schedule task in spring boot application","body":"<p>Spring @Scheduled annotation will execute multiple times if you have more than one instance of your app where you have @Scheduled annotation.</p>\n<p>If you are using PCF, you can use PCF scheduler <a href=\"https://docs.pivotal.io/scheduler/1-2/using-jobs.html\" rel=\"nofollow noreferrer\">https://docs.pivotal.io/scheduler/1-2/using-jobs.html</a> to avoid this issue. Using Tasks can solve this issue.</p>\n"},{"tags":[],"owner":{"account_id":22464276,"reputation":1,"user_id":16665686,"display_name":"Ashwath naidu"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1682878966,"creation_date":1682878966,"answer_id":76142863,"question_id":35064563,"body_markdown":"I have implemented a &#39;cron job&#39; system using Quartz Scheduler and Spring Boot Scheduler.\r\n\r\nThe system supports scheduling based on start and end dates.\r\n\r\n 1. It supports scheduling based on daily, weekday, monthly, and weekly frequencies.\r\n 2. It supports running on multiple application instances, but only runs on one \r\n 3. server at a time.\r\n 4. It generates cron expressions dynamically.\r\n 5. It supports scheduling based on time zone.\r\n 6. It is built on Java 8.\r\n 7. And more.\r\n\r\nLet me know if anyone needs it, and I will provide the package format","title":"What is best way to schedule task in spring boot application","body":"<p>I have implemented a 'cron job' system using Quartz Scheduler and Spring Boot Scheduler.</p>\n<p>The system supports scheduling based on start and end dates.</p>\n<ol>\n<li>It supports scheduling based on daily, weekday, monthly, and weekly frequencies.</li>\n<li>It supports running on multiple application instances, but only runs on one</li>\n<li>server at a time.</li>\n<li>It generates cron expressions dynamically.</li>\n<li>It supports scheduling based on time zone.</li>\n<li>It is built on Java 8.</li>\n<li>And more.</li>\n</ol>\n<p>Let me know if anyone needs it, and I will provide the package format</p>\n"}],"owner":{"account_id":1651977,"reputation":2371,"user_id":1522378,"accept_rate":81,"display_name":"Exia"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":44694,"favorite_count":0,"down_vote_count":0,"up_vote_count":20,"accepted_answer_id":35064784,"answer_count":5,"score":20,"last_activity_date":1682878966,"creation_date":1453992385,"question_id":35064563,"body_markdown":"I am current developing an application based on Spring-Boot. \r\n\r\nI know that annotation like @Scheduled can schedule tasks. Since users in my application wanna send mails at different time and send only once.\r\n\r\nI have already read the post [Spring scheduling task - run only once][1],\r\nbut it is weird always &quot;new&quot; an localExecutor in a Spring based application.\r\n\r\nIn that way , once a user schedule sending an email, I have to &quot;new&quot; an localExecutor for his task.\r\n\r\nSo , are there any better ways?\r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/30347233/spring-scheduling-task-run-only-once","title":"What is best way to schedule task in spring boot application","body":"<p>I am current developing an application based on Spring-Boot. </p>\n\n<p>I know that annotation like @Scheduled can schedule tasks. Since users in my application wanna send mails at different time and send only once.</p>\n\n<p>I have already read the post <a href=\"https://stackoverflow.com/questions/30347233/spring-scheduling-task-run-only-once\">Spring scheduling task - run only once</a>,\nbut it is weird always \"new\" an localExecutor in a Spring based application.</p>\n\n<p>In that way , once a user schedule sending an email, I have to \"new\" an localExecutor for his task.</p>\n\n<p>So , are there any better ways?</p>\n"},{"tags":["java","android","cookies","webview","cookiestore"],"comments":[{"owner":{"account_id":10198578,"reputation":475,"user_id":7529668,"display_name":"Rahul Sahni"},"score":0,"creation_date":1489176850,"post_id":8390156,"comment_id":72573499,"body_markdown":"CookieSyncManager is now deprecated, use CookieManager.\nhttp://stackoverflow.com/questions/30502411/cookiesyncmanager-is-now-deprecated-what-can-i-use-instead","body":"CookieSyncManager is now deprecated, use CookieManager. <a href=\"http://stackoverflow.com/questions/30502411/cookiesyncmanager-is-now-deprecated-what-can-i-use-instead\" title=\"cookiesyncmanager is now deprecated what can i use instead\">stackoverflow.com/questions/30502411/&hellip;</a>"},{"owner":{"account_id":1995712,"reputation":2727,"user_id":1788736,"accept_rate":50,"display_name":"user1788736"},"score":0,"creation_date":1513369476,"post_id":8390156,"comment_id":82642685,"body_markdown":"@Rahul Sahni I tried that but if close the app and re open i have to re login and all cookies lost! Could you tell me what might be the problem ?","body":"@Rahul Sahni I tried that but if close the app and re open i have to re login and all cookies lost! Could you tell me what might be the problem ?"}],"answers":[{"tags":[],"owner":{"account_id":72387,"reputation":2999,"user_id":209022,"display_name":"lyricsboy"},"down_vote_count":0,"up_vote_count":45,"is_accepted":true,"score":45,"last_activity_date":1323113403,"creation_date":1323110969,"answer_id":8390280,"question_id":8390156,"body_markdown":"You have to tell the CookieSyncManager to sync *after* it has loaded the page in question. In your sample code, the `onCreate` method executes completely before the `WebView` tries to load the page, so the sync process (which happens asynchronously) will probably complete before the page is loaded.\r\n\r\nInstead, tell the CookieSyncManager to sync onPageFinished in the WebViewClient. That should get you what you want.\r\n\r\nThe [CookieSyncManager Documentation](http://developer.android.com/reference/android/webkit/CookieSyncManager.html) is a good read for how to do this properly.\r\n\r\nHere is how you could set up your WebViewClient implementation to do this for you:\r\n\r\n    webview.setWebViewClient(new WebViewClient() {\r\n        public void onReceivedError(WebView view, int errorCode, String description, String failingUrl) {\r\n            //Users will be notified in case there&#39;s an error (i.e. no internet connection)\r\n            Toast.makeText(activity, &quot;Oh no! &quot; + description, Toast.LENGTH_SHORT).show();\r\n        }\r\n\r\n        public void onPageFinished(WebView view, String url) {\r\n            CookieSyncManager.getInstance().sync();\r\n        }\r\n    );\r\n\r\nYou would not need to tell the CookieSyncManager to sync elsewhere with this in place. I haven&#39;t tested this, so let me know if it works.","title":"How to save a cookie in an Android webview forever?","body":"<p>You have to tell the CookieSyncManager to sync <em>after</em> it has loaded the page in question. In your sample code, the <code>onCreate</code> method executes completely before the <code>WebView</code> tries to load the page, so the sync process (which happens asynchronously) will probably complete before the page is loaded.</p>\n\n<p>Instead, tell the CookieSyncManager to sync onPageFinished in the WebViewClient. That should get you what you want.</p>\n\n<p>The <a href=\"http://developer.android.com/reference/android/webkit/CookieSyncManager.html\" rel=\"noreferrer\">CookieSyncManager Documentation</a> is a good read for how to do this properly.</p>\n\n<p>Here is how you could set up your WebViewClient implementation to do this for you:</p>\n\n<pre><code>webview.setWebViewClient(new WebViewClient() {\n    public void onReceivedError(WebView view, int errorCode, String description, String failingUrl) {\n        //Users will be notified in case there's an error (i.e. no internet connection)\n        Toast.makeText(activity, \"Oh no! \" + description, Toast.LENGTH_SHORT).show();\n    }\n\n    public void onPageFinished(WebView view, String url) {\n        CookieSyncManager.getInstance().sync();\n    }\n);\n</code></pre>\n\n<p>You would not need to tell the CookieSyncManager to sync elsewhere with this in place. I haven't tested this, so let me know if it works.</p>\n"},{"tags":[],"owner":{"account_id":5251659,"reputation":561,"user_id":4195727,"accept_rate":50,"display_name":"CGeorgian"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1460346834,"creation_date":1419218508,"answer_id":27596174,"question_id":8390156,"body_markdown":".sync() is to force a imediate sync  ,and must be called after page load cause it sync RAM with cache , so cookie must be in ram before calling it .\r\n\r\nSystem automatically sync it every 5 mintues if you use this scheme\r\n\r\n    onCreate: \r\n    CookieSyncManager.createInstance(context)\r\n    \r\n    onResume:\r\n    CookieSyncManager.getInstance().startSync()\r\n    \r\n    onPause:\r\n    CookieSyncManager.getInstance().stopSync()\r\n\r\nI think you did not waited 5 mintues so system save cookie.\r\n","title":"How to save a cookie in an Android webview forever?","body":"<p>.sync() is to force a imediate sync  ,and must be called after page load cause it sync RAM with cache , so cookie must be in ram before calling it .</p>\n\n<p>System automatically sync it every 5 mintues if you use this scheme</p>\n\n<pre><code>onCreate: \nCookieSyncManager.createInstance(context)\n\nonResume:\nCookieSyncManager.getInstance().startSync()\n\nonPause:\nCookieSyncManager.getInstance().stopSync()\n</code></pre>\n\n<p>I think you did not waited 5 mintues so system save cookie.</p>\n"},{"tags":[],"owner":{"account_id":10198578,"reputation":475,"user_id":7529668,"display_name":"Rahul Sahni"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1513797643,"creation_date":1513797643,"answer_id":47913011,"question_id":8390156,"body_markdown":"For those who are facing Problems with `CookieManager` class to make cookie persist even after closing the app, they should try the `flush()` function of `CookieManager`. \n\nPlease note that i haven&#39;t tried this, so if it works then please let me know too.\n\nAccording to android documentation\n&gt;[void flush()][1]\n&gt;\n&gt; Ensures all cookies currently accessible through the getCookie API are written to persistent storage. This call will block the caller until it is done and may perform I/O.\n\n\n\nAlso in `CookieSyncManager` documnentation it is written that:\n&gt; This class was deprecated in API level 21. \nThe WebView now automatically syncs cookies as necessary. You no longer need to create or use the CookieSyncManager. To manually force a sync you can use the CookieManager method flush() which is a synchronous replacement for sync(). [CookieSyncManger link][2]\n\n\n  [1]: https://developer.android.com/reference/android/webkit/CookieManager.html#flush()\n  [2]: https://developer.android.com/reference/android/webkit/CookieSyncManager.html","title":"How to save a cookie in an Android webview forever?","body":"<p>For those who are facing Problems with <code>CookieManager</code> class to make cookie persist even after closing the app, they should try the <code>flush()</code> function of <code>CookieManager</code>.</p>\n<p>Please note that i haven't tried this, so if it works then please let me know too.</p>\n<p>According to android documentation</p>\n<blockquote>\n<p><a href=\"https://developer.android.com/reference/android/webkit/CookieManager.html#flush()\" rel=\"noreferrer\">void flush()</a></p>\n<p>Ensures all cookies currently accessible through the getCookie API are written to persistent storage. This call will block the caller until it is done and may perform I/O.</p>\n</blockquote>\n<p>Also in <code>CookieSyncManager</code> documnentation it is written that:</p>\n<blockquote>\n<p>This class was deprecated in API level 21.\nThe WebView now automatically syncs cookies as necessary. You no longer need to create or use the CookieSyncManager. To manually force a sync you can use the CookieManager method flush() which is a synchronous replacement for sync(). <a href=\"https://developer.android.com/reference/android/webkit/CookieSyncManager.html\" rel=\"noreferrer\">CookieSyncManger link</a></p>\n</blockquote>\n"},{"tags":[],"owner":{"account_id":15587857,"reputation":1597,"user_id":11556210,"display_name":"Saki Osive"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1632180870,"creation_date":1632180870,"answer_id":69261876,"question_id":8390156,"body_markdown":"Works perfectly for API 20+\r\n\r\n```\r\n        myWebView.setWebViewClient(new WebViewClient(){\r\n            public void onReceivedError(WebView webView, int errorCode, String description, String failingUrl){\r\n                Toast.makeText(MainActivity.this, &quot;Oh no! &quot; + description, Toast.LENGTH_SHORT).show();\r\n\r\n            }\r\n\r\n            public void onPageFinished(WebView webView, String url){\r\n                CookieManager.getInstance().flush();\r\n            }\r\n\r\n        }\r\n        \r\n        );\r\n\r\n```","title":"How to save a cookie in an Android webview forever?","body":"<p>Works perfectly for API 20+</p>\n<pre><code>        myWebView.setWebViewClient(new WebViewClient(){\n            public void onReceivedError(WebView webView, int errorCode, String description, String failingUrl){\n                Toast.makeText(MainActivity.this, &quot;Oh no! &quot; + description, Toast.LENGTH_SHORT).show();\n\n            }\n\n            public void onPageFinished(WebView webView, String url){\n                CookieManager.getInstance().flush();\n            }\n\n        }\n        \n        );\n\n</code></pre>\n"},{"tags":[],"owner":{"account_id":25445930,"reputation":1,"user_id":19248127,"display_name":"Arpit Patel"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1682877776,"creation_date":1682877776,"answer_id":76142783,"question_id":8390156,"body_markdown":"Works perfectly for API 20+\r\n\r\n```\r\nmyWebView.setWebViewClient(new WebViewClient(){\r\n         ......\r\n            public void onPageFinished(WebView webView, String url){\r\n                CookieManager.getInstance().flush();\r\n            }\r\n         ......\r\n\r\n        }\r\n        \r\n        );\r\n```\r\n","title":"How to save a cookie in an Android webview forever?","body":"<p>Works perfectly for API 20+</p>\n<pre><code>myWebView.setWebViewClient(new WebViewClient(){\n         ......\n            public void onPageFinished(WebView webView, String url){\n                CookieManager.getInstance().flush();\n            }\n         ......\n\n        }\n        \n        );\n</code></pre>\n"}],"owner":{"account_id":1048298,"reputation":1463,"user_id":1052827,"accept_rate":81,"display_name":"Nick Chubb"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":41867,"favorite_count":0,"down_vote_count":0,"up_vote_count":24,"accepted_answer_id":8390280,"answer_count":5,"score":24,"last_activity_date":1682877776,"creation_date":1323110307,"question_id":8390156,"body_markdown":"With my code below, I have been able to save a cookie, but as soon as I close the application the cookie disappears.\r\n\r\nHow is this caused and how can I solve it?\r\n\r\n    package com.jkjljkj\r\n    \r\n    import android.app.Activity;\r\n    import android.os.Bundle;\r\n    import android.view.Window;\r\n    import android.webkit.CookieSyncManager;\r\n    import android.webkit.WebChromeClient;\r\n    import android.webkit.WebView;\r\n    import android.webkit.WebViewClient;\r\n    import android.widget.Toast;\r\n    \r\n    public class Activity extends Activity {\r\n    \r\n    \t/** Called when the activity is first created. */\r\n    \t\r\n        @Override\r\n        public void onCreate(Bundle savedInstanceState) {\r\n            super.onCreate(savedInstanceState);\r\n            \r\n            CookieSyncManager.createInstance(getBaseContext());\r\n            \r\n            // Let&#39;s display the progress in the activity title bar, like the\r\n            // browser app does.\r\n            \r\n            \r\n            getWindow().requestFeature(Window.FEATURE_PROGRESS);\r\n    \r\n            WebView webview = new WebView(this);\r\n            setContentView(webview);\r\n            \r\n            \r\n            webview.getSettings().setJavaScriptEnabled(true);\r\n    \r\n            final Activity activity = this;\r\n            webview.setWebChromeClient(new WebChromeClient() {\r\n            public void onProgressChanged(WebView view, int progress) {\r\n                 // Activities and WebViews measure progress with different scales.\r\n                 // The progress meter will automatically disappear when we reach 100%\r\n                 activity.setProgress(progress * 1000);\r\n            }\r\n          });\r\n          \r\n          webview.setWebViewClient(new WebViewClient() {\r\n            \r\n             public void onReceivedError(WebView view, int errorCode, String description, String failingUrl) {\r\n                  //Users will be notified in case there&#39;s an error (i.e. no internet connection)\r\n                  Toast.makeText(activity, &quot;Oh no! &quot; + description, Toast.LENGTH_SHORT).show();\r\n             }\r\n          });\r\n    \r\n          CookieSyncManager.getInstance().startSync();\r\n          CookieSyncManager.getInstance().sync();\r\n      \r\n         //This will load the webpage that we want to see\r\n          webview.loadUrl(&quot;http://&quot;);\r\n    \r\n       }\r\n    }","title":"How to save a cookie in an Android webview forever?","body":"<p>With my code below, I have been able to save a cookie, but as soon as I close the application the cookie disappears.</p>\n\n<p>How is this caused and how can I solve it?</p>\n\n<pre><code>package com.jkjljkj\n\nimport android.app.Activity;\nimport android.os.Bundle;\nimport android.view.Window;\nimport android.webkit.CookieSyncManager;\nimport android.webkit.WebChromeClient;\nimport android.webkit.WebView;\nimport android.webkit.WebViewClient;\nimport android.widget.Toast;\n\npublic class Activity extends Activity {\n\n    /** Called when the activity is first created. */\n\n    @Override\n    public void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n\n        CookieSyncManager.createInstance(getBaseContext());\n\n        // Let's display the progress in the activity title bar, like the\n        // browser app does.\n\n\n        getWindow().requestFeature(Window.FEATURE_PROGRESS);\n\n        WebView webview = new WebView(this);\n        setContentView(webview);\n\n\n        webview.getSettings().setJavaScriptEnabled(true);\n\n        final Activity activity = this;\n        webview.setWebChromeClient(new WebChromeClient() {\n        public void onProgressChanged(WebView view, int progress) {\n             // Activities and WebViews measure progress with different scales.\n             // The progress meter will automatically disappear when we reach 100%\n             activity.setProgress(progress * 1000);\n        }\n      });\n\n      webview.setWebViewClient(new WebViewClient() {\n\n         public void onReceivedError(WebView view, int errorCode, String description, String failingUrl) {\n              //Users will be notified in case there's an error (i.e. no internet connection)\n              Toast.makeText(activity, \"Oh no! \" + description, Toast.LENGTH_SHORT).show();\n         }\n      });\n\n      CookieSyncManager.getInstance().startSync();\n      CookieSyncManager.getInstance().sync();\n\n     //This will load the webpage that we want to see\n      webview.loadUrl(\"http://\");\n\n   }\n}\n</code></pre>\n"},{"tags":["java","gradle","multi-module","rserve"],"answers":[{"tags":[],"owner":{"account_id":24166429,"reputation":33,"user_id":18129194,"display_name":"Hidden_Bad"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1682877706,"creation_date":1682877706,"answer_id":76142777,"question_id":76142207,"body_markdown":"This is a bit akward, but i forgot to add the java modularity module in the build.gradle.kts of the &quot;rengine-rserve-wrapper&quot; :\r\n\r\n    plugins {\r\n        id(&quot;java-library&quot;)\r\n        id(&quot;org.javamodularity.moduleplugin&quot;) version &quot;1.8.12&quot;\r\n    }","title":"Module not found, trying to use old java library","body":"<p>This is a bit akward, but i forgot to add the java modularity module in the build.gradle.kts of the &quot;rengine-rserve-wrapper&quot; :</p>\n<pre><code>plugins {\n    id(&quot;java-library&quot;)\n    id(&quot;org.javamodularity.moduleplugin&quot;) version &quot;1.8.12&quot;\n}\n</code></pre>\n"}],"owner":{"account_id":24166429,"reputation":33,"user_id":18129194,"display_name":"Hidden_Bad"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":60,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76142777,"answer_count":1,"score":0,"last_activity_date":1682877706,"creation_date":1682870324,"question_id":76142207,"body_markdown":"I have a multi-module java project and I am using Gradle 8.1 and java jdk 17.0.4. But I get an error when running &#39;gradle build&#39; the child module &quot;rengine-rserve-wrapper&quot;: \r\n\r\n    ...\r\n    &gt; Task :rengine-rserve-wrapper:compileJava FAILED\r\n    D:\\JavaProg\\MASI_Projet_Integre\\data-mining-apps\\rengine-rserve-wrapper\\src\\main\\java\\module-info.java:3: error: module not found: REngine\r\n        requires REngine;\r\n                 ^\r\n    D:\\JavaProg\\MASI_Projet_Integre\\data-mining-apps\\rengine-rserve-wrapper\\src\\main\\java\\module-info.java:4: error: module not found: Rserve\r\n        requires Rserve;\r\n\r\nSo the problem seems to come from the module.info. Here it is :\r\n\r\n    module data.mining.apps.rengine.rserve.wrapper.main {\r\n       requires org.mongodb.bson;\r\n       requires REngine;\r\n       requires Rserve;\r\n    }\r\n\r\n\r\nAnd the 2 packages dependencies (in the build.gradle.kts of the child module) :\r\n\r\n    dependencies {\r\n        implementation(&quot;org.rosuda.REngine:REngine:2.1.0&quot;)\r\n        implementation(&quot;org.rosuda.REngine:Rserve:1.8.1&quot;)\r\n        implementation(&quot;org.mongodb:bson:4.8.2&quot;)\r\n        ...\r\n    }\r\nHere I added the &quot;org.mongodb:bson:4.8.2&quot; to check wether the problem comes from any dependecies or wether the problem comes especially from the 2 libraries &quot;REngine&quot; and &quot;Rserve&quot;. Regarding the above error, it seems the problem comes from the 2 libraries.\r\n\r\nBut I don&#39;t know how to solve this problem. At the beginning, I had done this project using Maven and it worked just fine, but now that I&#39;m using Gradle, I have this problem.\r\n\r\nJust in case, here is the hierarchy of the project :\r\n\r\n    data-mining-apps\r\n    |- &quot;rengine-rserve-wrapper&quot;\r\n    |- &quot;Other children module&quot;\r\n    |- settings.gradle.kts\r\n     \\ build.gradle.kts\r\n\r\nAnd here is the parent &quot;settings.gradle.kts&quot; :\r\n\r\n    rootProject.name = &quot;data-mining-apps&quot;\r\n    include(&quot;rengine-rserve-wrapper&quot;)\r\n    ...\r\n\r\nAnd the full build.gradle.kts of the &quot;rengine-rserve-wrapper&quot; child :\r\n\r\n    plugins {\r\n        id(&quot;java-library&quot;)\r\n    }\r\n    \r\n    group = &quot;be.masi.g2&quot;\r\n    version = &quot;0.0.1&quot;\r\n    \r\n    repositories {\r\n        mavenCentral()\r\n    }\r\n    \r\n    java {\r\n        modularity.inferModulePath.set(true)\r\n    }\r\n    \r\n    dependencies {\r\n        implementation(&quot;org.rosuda.REngine:REngine:2.1.0&quot;)\r\n        implementation(&quot;org.rosuda.REngine:Rserve:1.8.1&quot;)\r\n        implementation(&quot;org.mongodb:bson:4.8.2&quot;)\r\n        testImplementation(platform(&quot;org.junit:junit-bom:5.9.1&quot;))\r\n        testImplementation(&quot;org.junit.jupiter:junit-jupiter&quot;)\r\n    }\r\n    \r\n    tasks.test {\r\n        useJUnitPlatform()\r\n    }\r\n\r\n","title":"Module not found, trying to use old java library","body":"<p>I have a multi-module java project and I am using Gradle 8.1 and java jdk 17.0.4. But I get an error when running 'gradle build' the child module &quot;rengine-rserve-wrapper&quot;:</p>\n<pre><code>...\n&gt; Task :rengine-rserve-wrapper:compileJava FAILED\nD:\\JavaProg\\MASI_Projet_Integre\\data-mining-apps\\rengine-rserve-wrapper\\src\\main\\java\\module-info.java:3: error: module not found: REngine\n    requires REngine;\n             ^\nD:\\JavaProg\\MASI_Projet_Integre\\data-mining-apps\\rengine-rserve-wrapper\\src\\main\\java\\module-info.java:4: error: module not found: Rserve\n    requires Rserve;\n</code></pre>\n<p>So the problem seems to come from the module.info. Here it is :</p>\n<pre><code>module data.mining.apps.rengine.rserve.wrapper.main {\n   requires org.mongodb.bson;\n   requires REngine;\n   requires Rserve;\n}\n</code></pre>\n<p>And the 2 packages dependencies (in the build.gradle.kts of the child module) :</p>\n<pre><code>dependencies {\n    implementation(&quot;org.rosuda.REngine:REngine:2.1.0&quot;)\n    implementation(&quot;org.rosuda.REngine:Rserve:1.8.1&quot;)\n    implementation(&quot;org.mongodb:bson:4.8.2&quot;)\n    ...\n}\n</code></pre>\n<p>Here I added the &quot;org.mongodb:bson:4.8.2&quot; to check wether the problem comes from any dependecies or wether the problem comes especially from the 2 libraries &quot;REngine&quot; and &quot;Rserve&quot;. Regarding the above error, it seems the problem comes from the 2 libraries.</p>\n<p>But I don't know how to solve this problem. At the beginning, I had done this project using Maven and it worked just fine, but now that I'm using Gradle, I have this problem.</p>\n<p>Just in case, here is the hierarchy of the project :</p>\n<pre><code>data-mining-apps\n|- &quot;rengine-rserve-wrapper&quot;\n|- &quot;Other children module&quot;\n|- settings.gradle.kts\n \\ build.gradle.kts\n</code></pre>\n<p>And here is the parent &quot;settings.gradle.kts&quot; :</p>\n<pre><code>rootProject.name = &quot;data-mining-apps&quot;\ninclude(&quot;rengine-rserve-wrapper&quot;)\n...\n</code></pre>\n<p>And the full build.gradle.kts of the &quot;rengine-rserve-wrapper&quot; child :</p>\n<pre><code>plugins {\n    id(&quot;java-library&quot;)\n}\n\ngroup = &quot;be.masi.g2&quot;\nversion = &quot;0.0.1&quot;\n\nrepositories {\n    mavenCentral()\n}\n\njava {\n    modularity.inferModulePath.set(true)\n}\n\ndependencies {\n    implementation(&quot;org.rosuda.REngine:REngine:2.1.0&quot;)\n    implementation(&quot;org.rosuda.REngine:Rserve:1.8.1&quot;)\n    implementation(&quot;org.mongodb:bson:4.8.2&quot;)\n    testImplementation(platform(&quot;org.junit:junit-bom:5.9.1&quot;))\n    testImplementation(&quot;org.junit.jupiter:junit-jupiter&quot;)\n}\n\ntasks.test {\n    useJUnitPlatform()\n}\n</code></pre>\n"},{"tags":["java","spring-boot","jco"],"comments":[{"owner":{"account_id":2931887,"reputation":8248,"user_id":2511915,"accept_rate":85,"display_name":"Dark Knight"},"score":0,"creation_date":1543560429,"post_id":53552478,"comment_id":93970710,"body_markdown":"any error you are getting or it&#39;s just that row count is 0? If later is the case, execute RFC on SAP side and check count, and make sure parameters are same","body":"any error you are getting or it&#39;s just that row count is 0? If later is the case, execute RFC on SAP side and check count, and make sure parameters are same"},{"owner":{"account_id":6347644,"reputation":49,"user_id":4927642,"display_name":"cat1197"},"score":0,"creation_date":1543563105,"post_id":53552478,"comment_id":93971746,"body_markdown":"I&#39;m getting partner 100 doesn&#39;t exists message in the export RETTEXT value.","body":"I&#39;m getting partner 100 doesn&#39;t exists message in the export RETTEXT value."}],"answers":[{"tags":[],"owner":{"account_id":9910001,"reputation":1796,"user_id":7337102,"display_name":"Trixx"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1543571199,"creation_date":1543571199,"answer_id":53554969,"question_id":53552478,"body_markdown":"Test your ABAP remote function module with an SAP GUI via transaction code SE37 first.\r\nIf this test is successful and you get a different result if called from JCo with using the same parameter values, then I recommend to study SAP note [206068][1] for possible reasons.\r\n\r\nAlso check your method `configureTableParameters`. I guess, `index` shall be a field index and not a row count. Your implementation will create far too many unnecessary rows. I assume you wanted to call `table.appendRow();` instead of `table.appendRows(index);`. Moreover, you maybe intended to fill the first field in the row with the value `&quot;100&quot;`, for which you would have to pass the index value `0` instead of `1` in this case.\r\n\r\n  [1]: https://launchpad.support.sap.com/#/notes/206068","title":"Getting No data when accessing SAP table with JCo 3.x","body":"<p>Test your ABAP remote function module with an SAP GUI via transaction code SE37 first.\nIf this test is successful and you get a different result if called from JCo with using the same parameter values, then I recommend to study SAP note <a href=\"https://launchpad.support.sap.com/#/notes/206068\" rel=\"nofollow noreferrer\">206068</a> for possible reasons.</p>\n\n<p>Also check your method <code>configureTableParameters</code>. I guess, <code>index</code> shall be a field index and not a row count. Your implementation will create far too many unnecessary rows. I assume you wanted to call <code>table.appendRow();</code> instead of <code>table.appendRows(index);</code>. Moreover, you maybe intended to fill the first field in the row with the value <code>\"100\"</code>, for which you would have to pass the index value <code>0</code> instead of <code>1</code> in this case.</p>\n"},{"tags":[],"owner":{"account_id":3934573,"reputation":377,"user_id":3251472,"display_name":"Krishantha Dinesh"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1543588790,"creation_date":1543588790,"answer_id":53559620,"question_id":53552478,"body_markdown":"multiple problem can cause this. \r\n\r\n1. if you setting &quot;&quot; or &quot; &quot; to  fields. (when you set values better set if those has some values\r\n\r\n2. if it says partner does not exist and if you sure its exist this mean your data does not pass properly. add debug points to where you set the data and make sure you pass correct name and correct values.\r\n\r\n3. also you do not need to add(index) you can just table.appendRow(); // but this will not impact on your case\r\n\r\n4. also when you setValue make sure its int filed. (normally not) in your given example its int\r\n\r\neg: \r\n\r\n    private void configureTableParameters(JCoParameterList tableParameters){\r\n        JCoTable jCoTable=tableParameters.getTable(key);\r\n        jCoTable.appendRow();\r\n        if(value!=null)\r\n        jCoTable.setValue(fieldKey,String.valueOf(value));\r\n    \r\n    }\r\n\r\nthis is just psuda code and will not work\r\n","title":"Getting No data when accessing SAP table with JCo 3.x","body":"<p>multiple problem can cause this. </p>\n\n<ol>\n<li><p>if you setting \"\" or \" \" to  fields. (when you set values better set if those has some values</p></li>\n<li><p>if it says partner does not exist and if you sure its exist this mean your data does not pass properly. add debug points to where you set the data and make sure you pass correct name and correct values.</p></li>\n<li><p>also you do not need to add(index) you can just table.appendRow(); // but this will not impact on your case</p></li>\n<li><p>also when you setValue make sure its int filed. (normally not) in your given example its int</p></li>\n</ol>\n\n<p>eg: </p>\n\n<pre><code>private void configureTableParameters(JCoParameterList tableParameters){\n    JCoTable jCoTable=tableParameters.getTable(key);\n    jCoTable.appendRow();\n    if(value!=null)\n    jCoTable.setValue(fieldKey,String.valueOf(value));\n\n}\n</code></pre>\n\n<p>this is just psuda code and will not work</p>\n"}],"owner":{"account_id":6347644,"reputation":49,"user_id":4927642,"display_name":"cat1197"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1205,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"accepted_answer_id":53559620,"answer_count":2,"score":0,"last_activity_date":1682877192,"creation_date":1543559774,"question_id":53552478,"body_markdown":"Here is my sample code. In this example has only elementary types, no structure types has to set. But in the output no data exists in the table.\r\n\r\nWhen I check the records in SAP table it contains multiple records for this particular id. Can someone explain this to me?\r\n  \r\n    public void invokeRFC(JCoDestination destination) {\r\n\r\n        JCoFunction function=null;\r\n        try\r\n\r\n        {\r\n            JCoFunctionTemplate functionTemplate = destination.getRepository().getFunctionTemplate(&quot;RFC_METHOD&quot;);\r\n\r\n            if (functionTemplate != null) {\r\n                function = functionTemplate.getFunction();\r\n            }\r\n\r\n            if (function == null)\r\n                throw new RuntimeException(&quot;Not found in SAP.&quot;);\r\n\r\n            //to fill elementary types and structures\r\n            configureImportParameters(function,&quot;xxx&quot;,  &quot;abc&quot;);\r\n            //to fill table type parameters\r\n            configureTableParameters(function, &quot;tblName&quot;,1,&quot;100&quot;);\r\n            function.execute(destination);\r\n\r\n\r\n        } catch (JCoException e)\r\n        {\r\n            e.printStackTrace();\r\n        }\r\n\r\n    }\r\n\r\n    public void configureTableParameters(JCoFunction function, String table_name, int index, String id) {\r\n        JCoTable table = function.getTableParameterList().getTable(&quot;table_name&quot;);\r\n\r\n        table.appendRow();\r\n        table.setRow(index);\r\n        table.setValue(&quot;Partner&quot;, &quot;100&quot;);\r\n\r\n    }\r\n\r\n    private void exportTable(JCoFunction jCoFunction, String tblName) {\r\n        JCoTable resultTable = jCoFunction.getTableParameterList().getTable(tblName);\r\n\r\n        int value = resultTable.getNumRows();\r\n        System.out.println(value);\r\n    }\r\n\r\n    private void configureImportParameters(JCoFunction function, String param1, String param2) {\r\n\r\n        JCoParameterList parameterList = \r\n        function.getImportParameterList();\r\n        parameterList.setValue(&quot;field1&quot;, param1);\r\n        parameterList.setValue(&quot;field2&quot;, param2);\r\n\r\n    }\r\n","title":"Getting No data when accessing SAP table with JCo 3.x","body":"<p>Here is my sample code. In this example has only elementary types, no structure types has to set. But in the output no data exists in the table.</p>\n<p>When I check the records in SAP table it contains multiple records for this particular id. Can someone explain this to me?</p>\n<pre><code>public void invokeRFC(JCoDestination destination) {\n\n    JCoFunction function=null;\n    try\n\n    {\n        JCoFunctionTemplate functionTemplate = destination.getRepository().getFunctionTemplate(&quot;RFC_METHOD&quot;);\n\n        if (functionTemplate != null) {\n            function = functionTemplate.getFunction();\n        }\n\n        if (function == null)\n            throw new RuntimeException(&quot;Not found in SAP.&quot;);\n\n        //to fill elementary types and structures\n        configureImportParameters(function,&quot;xxx&quot;,  &quot;abc&quot;);\n        //to fill table type parameters\n        configureTableParameters(function, &quot;tblName&quot;,1,&quot;100&quot;);\n        function.execute(destination);\n\n\n    } catch (JCoException e)\n    {\n        e.printStackTrace();\n    }\n\n}\n\npublic void configureTableParameters(JCoFunction function, String table_name, int index, String id) {\n    JCoTable table = function.getTableParameterList().getTable(&quot;table_name&quot;);\n\n    table.appendRow();\n    table.setRow(index);\n    table.setValue(&quot;Partner&quot;, &quot;100&quot;);\n\n}\n\nprivate void exportTable(JCoFunction jCoFunction, String tblName) {\n    JCoTable resultTable = jCoFunction.getTableParameterList().getTable(tblName);\n\n    int value = resultTable.getNumRows();\n    System.out.println(value);\n}\n\nprivate void configureImportParameters(JCoFunction function, String param1, String param2) {\n\n    JCoParameterList parameterList = \n    function.getImportParameterList();\n    parameterList.setValue(&quot;field1&quot;, param1);\n    parameterList.setValue(&quot;field2&quot;, param2);\n\n}\n</code></pre>\n"},{"tags":["java","jco","sapjco3"],"answers":[{"tags":[],"owner":{"account_id":9910001,"reputation":1796,"user_id":7337102,"display_name":"Trixx"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1545489148,"creation_date":1545489148,"answer_id":53896512,"question_id":53653243,"body_markdown":"It seems that your custom `SessionReferenceProvider` implementation has a bug, namely returning the same session ID in multiple threads simultaneously.\r\nDo you really need an own `SessionReferenceProvider`? Or is the default one from JCo maybe already sufficient? Maybe you can test your scenario without registering your own `SessionReferenceProvider` instance and see if it works.\r\n\r\nAnd if not already using the latest JCo patch level, I would also recommend to update it in order to exclude already fixed bugs in JCo regarding this. SAP has just released JCo 3.0.19. See https://support.sap.com/jco .","title":"Jcoserver status changing to STOPPING (not STOPPED) when stop() is called","body":"<p>It seems that your custom <code>SessionReferenceProvider</code> implementation has a bug, namely returning the same session ID in multiple threads simultaneously.\nDo you really need an own <code>SessionReferenceProvider</code>? Or is the default one from JCo maybe already sufficient? Maybe you can test your scenario without registering your own <code>SessionReferenceProvider</code> instance and see if it works.</p>\n\n<p>And if not already using the latest JCo patch level, I would also recommend to update it in order to exclude already fixed bugs in JCo regarding this. SAP has just released JCo 3.0.19. See <a href=\"https://support.sap.com/jco\" rel=\"nofollow noreferrer\">https://support.sap.com/jco</a> .</p>\n"}],"owner":{"account_id":3438208,"reputation":3985,"user_id":2880781,"accept_rate":75,"display_name":"Srijani Ghosh"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":431,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1682876991,"creation_date":1544105368,"question_id":53653243,"body_markdown":"I am using `SAPJco3.jar` for connecting to SAP using Java. However, when I am trying to stop my bridge, I get some error.\r\n\r\nThe code for disconnection is this :\r\n   ```java\r\n    public void tearDown() {\r\n        log.info(&quot;tearDown() | Starting tear down ...&quot;);\r\n        log.info(&quot;tearDown() | Stopping {} JCO servers ...&quot;, jcoServerList.size());\r\n    \r\n        System.out.printf(&quot;\\ntearDown()| Stopping %s JCO servers ...&quot;, jcoServerList.size());\r\n        System.out.println();\r\n    \r\n        for (JCoServer jcoServer : jcoServerList.values()) {\r\n            try {\r\n                \r\n                jcoServer.stop();\r\n                jcoServer.release();\r\n    \r\n            } catch (Exception e) {\r\n                log.error(&quot;Failed to STOP JCO server {} e={}&quot;, jcoServer.getProgramID(), e.toString());\r\n            }\r\n        }\r\n    \r\n        jcoServerDataManager.clearAllData();\r\n        jcoServerDataManager = null;\r\n    \r\n        log.info(&quot;tearDown() | Done with tear down!&quot;);\r\n    }\r\n   ```\r\nThe error `JCO_ERROR_CONCURRENT_CALL` I get is this :\r\n\r\n&gt;   ```\r\n&gt;    2018-12-06 15:00:15,504|INFO ||||||SapSessionReferenceProvider| getCurrentSessionReference() | Retrieving current session reference ...\r\n&gt;    2018-12-06 15:00:15,504|INFO ||||||SapSessionReferenceProvider| getCurrentSessionReference() | Current session reference retrieved Ok (id: sap-session-Default:Test_Bridge_With_External_Test_SAP_JCO:Y3IV_3)\r\n&gt;    2018-12-06 15:00:15,504|INFO ||||||SapSessionReferenceProvider| getCurrentSessionReference() | Retrieving current session reference ...\r\n&gt;    2018-12-06 15:00:15,504|INFO ||||||SapSessionReferenceProvider| getCurrentSessionReference() | Current session reference retrieved Ok (id: sap-session-Default:Test_Bridge_With_External_Test_SAP_JCO:Y3IV_3)\r\n&gt;    2018-12-06 15:00:15,504|ERROR||||||SapConnectionManagerImpl| clearConnectionContext() | Failed to end SAP context: {}\r\n&gt;    com.sap.conn.jco.JCoException: (132) JCO_ERROR_CONCURRENT_CALL: Concurrent call \r\n&gt;          detected. Connection [13] currently used in another thread:\r\n&gt;          pool-2-thread-1 [100] in execute since 7999 ms. Current thread:\r\n&gt;          22184429@qtp-6003181-5 [67], action: release.\r\n&gt;    \tat com.sap.conn.jco.rt.ClientConnection.acquireBusyState(ClientConnection.java:185)\r\n&gt;    \tat com.sap.conn.jco.rt.PoolingFactory.releaseClient(PoolingFactory.java:655)\r\n&gt;    \tat com.sap.conn.jco.rt.ConnectionManager.releaseClient(ConnectionManager.java:234)\r\n&gt;    \tat com.sap.conn.jco.rt.Context.endSequence(Context.java:497)\r\n&gt;    \tat com.sap.conn.jco.rt.JCoRuntime.endSequence(JCoRuntime.java:805)\r\n&gt;    \tat com.sap.conn.jco.JCoContext.end(JCoContext.java:97)\r\n&gt;    \tat com.zetes.crystal.sap.io.impl.SapConnectionManagerImpl.clearConnectionContext(SapConnectionManagerImpl.java:258)\r\n&gt;    \tat com.zetes.crystal.sap.io.impl.SapConnectionManagerImpl.closeSapConnection(SapConnectionManagerImpl.java:145)\r\n&gt;    \tat com.zetes.crystal.sap.io.impl.SapConnectionManagerImpl.tearDown(SapConnectionManagerImpl.java:76)\r\n&gt;    \tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n&gt;    \tat sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)\r\n&gt;    \tat sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)\r\n&gt;    \tat java.lang.reflect.Method.invoke(Unknown Source)\r\n&gt;    \tat org.springframework.beans.factory.annotation.InitDestroyAnnotationBeanPostProcessor$LifecycleElement.invoke(InitDestroyAnnotationBeanPostProcessor.java:297)\r\n&gt;    \tat org.springframework.beans.factory.annotation.InitDestroyAnnotationBeanPostProcessor$LifecycleMetadata.invokeDestroyMethods(InitDestroyAnnotationBeanPostProcessor.java:270)\r\n&gt;    \tat org.springframework.beans.factory.annotation.InitDestroyAnnotationBeanPostProcessor.postProcessBeforeDestruction(InitDestroyAnnotationBeanPostProcessor.java:162)\r\n&gt;    \tat org.springframework.beans.factory.support.DisposableBeanAdapter.destroy(DisposableBeanAdapter.java:140)\r\n&gt;    \tat org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.destroyBean(DefaultSingletonBeanRegistry.java:487)\r\n&gt;    \tat org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.destroySingleton(DefaultSingletonBeanRegistry.java:462)\r\n&gt;    \tat org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.destroyBean(DefaultSingletonBeanRegistry.java:480)\r\n&gt;    \tat org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.destroySingleton(DefaultSingletonBeanRegistry.java:462)\r\n&gt;    \tat org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.destroySingletons(DefaultSingletonBeanRegistry.java:430)\r\n&gt;    \tat org.springframework.context.support.AbstractApplicationContext.destroyBeans(AbstractApplicationContext.java:853)\r\n&gt;    \tat org.springframework.context.support.AbstractApplicationContext.doClose(AbstractApplicationContext.java:831)\r\n&gt;    \tat org.springframework.context.support.AbstractApplicationContext.close(AbstractApplicationContext.java:794)\r\n&gt;    \tat com.zetes.crystal.setup.server.bridges.impl.BridgeManagementServiceImpl.stopBridge(BridgeManagementServiceImpl.java:614)\r\n&gt;    \tat com.zetes.crystal.setup.server.bridges.impl.BridgeManagementServiceImpl.stopBridge(BridgeManagementServiceImpl.java:340)\r\n&gt;    \tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n&gt;    \tat sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)\r\n&gt;    \tat sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)\r\n&gt;    \tat java.lang.reflect.Method.invoke(Unknown Source)\r\n&gt;    \tat org.gwtwidgets.server.spring.GWTRPCServiceExporter.invokeMethodOnService(GWTRPCServiceExporter.java:148)\r\n&gt;    \tat org.gwtwidgets.server.spring.GWTRPCServiceExporter.processCall(GWTRPCServiceExporter.java:298)\r\n&gt;    \tat com.google.gwt.user.server.rpc.RemoteServiceServlet.processPost(RemoteServiceServlet.java:248)\r\n&gt;    \tat com.google.gwt.user.server.rpc.AbstractRemoteServiceServlet.doPost(AbstractRemoteServiceServlet.java:62)\r\n&gt;    \tat org.gwtwidgets.server.spring.GWTRPCServiceExporter.handleRequest(GWTRPCServiceExporter.java:363)\r\n&gt;    \tat org.springframework.web.servlet.mvc.HttpRequestHandlerAdapter.handle(HttpRequestHandlerAdapter.java:49)\r\n&gt;    \tat org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:875)\r\n&gt;    \tat org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:807)\r\n&gt;    \tat org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:571)\r\n&gt;    \tat org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:511)\r\n&gt;    \tat javax.servlet.http.HttpServlet.service(HttpServlet.java:727)\r\n&gt;    \tat javax.servlet.http.HttpServlet.service(HttpServlet.java:820)\r\n&gt;    \tat org.mortbay.jetty.servlet.ServletHolder.handle(ServletHolder.java:511)\r\n&gt;    \tat org.mortbay.jetty.servlet.ServletHandler.handle(ServletHandler.java:390)\r\n&gt;    \tat org.mortbay.jetty.security.SecurityHandler.handle(SecurityHandler.java:216)\r\n&gt;    \tat org.mortbay.jetty.servlet.SessionHandler.handle(SessionHandler.java:182)\r\n&gt;    \tat org.mortbay.jetty.handler.ContextHandler.handle(ContextHandler.java:765)\r\n&gt;    \tat org.mortbay.jetty.webapp.WebAppContext.handle(WebAppContext.java:418)\r\n&gt;    \tat org.mortbay.jetty.handler.ContextHandlerCollection.handle(ContextHandlerCollection.java:230)\r\n&gt;    \tat org.mortbay.jetty.handler.HandlerCollection.handle(HandlerCollection.java:114)\r\n&gt;    \tat org.mortbay.jetty.handler.HandlerWrapper.handle(HandlerWrapper.java:152)\r\n&gt;    \tat org.mortbay.jetty.Server.handle(Server.java:326)\r\n&gt;    \tat org.mortbay.jetty.HttpConnection.handleRequest(HttpConnection.java:536)\r\n&gt;    \tat org.mortbay.jetty.HttpConnection$RequestHandler.content(HttpConnection.java:930)\r\n&gt;    \tat org.mortbay.jetty.HttpParser.parseNext(HttpParser.java:747)\r\n&gt;    \tat org.mortbay.jetty.HttpParser.parseAvailable(HttpParser.java:218)\r\n&gt;    \tat org.mortbay.jetty.HttpConnection.handle(HttpConnection.java:405)\r\n&gt;    \tat org.mortbay.io.nio.SelectChannelEndPoint.run(SelectChannelEndPoint.java:409)\r\n&gt;    \tat org.mortbay.thread.QueuedThreadPool$PoolThread.run(QueuedThreadPool.java:582)\r\n&gt;    2018-12-06 15:00:15,504|INFO ||||||SapUserManagementServiceImpl| SAP user &lt;Y3IV_3&gt; has been released\r\n&gt;    2018-12-06 15:00:15,504|INFO ||||||SapConnectionManagerImpl| tearDown() | Done with SAP connection manager tear down!\r\n&gt;    2018-12-06 15:00:15,504|INFO ||||||JcoServerConnectionFactory| tearDown() | Starting tear down ...\r\n&gt;    2018-12-06 15:00:15,504|INFO ||||||JcoServerConnectionFactory| tearDown() | Stopping 1 JCO servers ...\r\n&gt;    2018-12-06 15:00:15,504|DEBUG||||||JcoServerConnectionFactory|  &gt;&gt; STATUS = ALIVE\r\n&gt;    2018-12-06 15:00:15,504|DEBUG||||||JcoServerConnectionFactory| &gt;&gt; Stopping JCO Server :: 3IV_ZE9_CLNT_890_001\r\n&gt;    2018-12-06 15:00:15,504|INFO ||||||JcoServerConnectionFactory| JCO Server ProgID: 3IV_ZE9_CLNT_890_001 [10]       ALIVE -&gt;   STOPPING\r\n&gt;    2018-12-06 15:00:15,504|INFO ||||||JcoServerConnectionFactory| tearDown() | Done with tear down!\r\n&gt;    2018-12-06 15:00:15,520|INFO ||||||CockpitServiceImpl| Cockpit harvester of the bridge [Default:Test_Bridge_With_External_Test_SAP_JCO] has been un-registered from Cockpit manager\r\n&gt;    2018-12-06 15:00:15,520|INFO ||||||BridgeManagementServiceImpl| bridge [Test_Bridge_With_External_Test_SAP_JCO] from site [Default] has been stopped OK\r\n&gt;    2018-12-06 15:00:15,520|DEBUG||||||SimpleThreadPool| WorkerThread is shutting down\r\n&gt;    2018-12-06 15:00:15,520|INFO ||||||BridgeConfigurationPersiterImpl| Configuration for the bridge [Test_Bridge_With_External_Test_SAP_JCO] in site [Default] has been persisted OK\r\n&gt;    2018-12-06 15:00:15,520|DEBUG||||||BridgeManagementServiceImpl| onApplicationEvent() | begin\r\n&gt;    2018-12-06 15:00:15,536|DEBUG||||||SimpleThreadPool| WorkerThread is shutting down\r\n&gt;    2018-12-06 15:00:15,567|DEBUG||||||SimpleThreadPool| WorkerThread is shutting down\r\n&gt;    2018-12-06 15:00:15,567|DEBUG||||||SimpleThreadPool| WorkerThread is shutting down\r\n&gt;    2018-12-06 15:00:15,583|DEBUG||||||SimpleThreadPool| WorkerThread is shutting down\r\n&gt;    2018-12-06 15:00:15,676|DEBUG||||||SimpleThreadPool| WorkerThread is shutting down\r\n&gt;    2018-12-06 15:00:15,676|DEBUG||||||SimpleThreadPool| WorkerThread is shutting down\r\n&gt;    2018-12-06 15:00:15,676|DEBUG||||||SimpleThreadPool| WorkerThread is shutting down\r\n&gt;    2018-12-06 15:00:15,692|DEBUG||||||SimpleThreadPool| WorkerThread is shutting down\r\n&gt;    2018-12-06 15:00:15,739|DEBUG||||||SimpleThreadPool| WorkerThread is shutting down\r\n&gt;   ```\r\n\r\nWhen I am trying to stop the bridge, already there are some connections alive for this bridge and the status of the jcoserver changes from ALIVE -&gt; STOPPING and it never goes to STOPPED.\r\nIf there are no connections attached to the server, it goes to the status STOPPED without any problem.\r\n\r\nCould any one please provide any direction for this problem?\r\nIs there any way I can forcefully stop the bridge?\r\n\r\n\r\nThanks!","title":"Jcoserver status changing to STOPPING (not STOPPED) when stop() is called","body":"<p>I am using <code>SAPJco3.jar</code> for connecting to SAP using Java. However, when I am trying to stop my bridge, I get some error.</p>\n<p>The code for disconnection is this :</p>\n<pre class=\"lang-java prettyprint-override\"><code> public void tearDown() {\n     log.info(&quot;tearDown() | Starting tear down ...&quot;);\n     log.info(&quot;tearDown() | Stopping {} JCO servers ...&quot;, jcoServerList.size());\n \n     System.out.printf(&quot;\\ntearDown()| Stopping %s JCO servers ...&quot;, jcoServerList.size());\n     System.out.println();\n \n     for (JCoServer jcoServer : jcoServerList.values()) {\n         try {\n             \n             jcoServer.stop();\n             jcoServer.release();\n \n         } catch (Exception e) {\n             log.error(&quot;Failed to STOP JCO server {} e={}&quot;, jcoServer.getProgramID(), e.toString());\n         }\n     }\n \n     jcoServerDataManager.clearAllData();\n     jcoServerDataManager = null;\n \n     log.info(&quot;tearDown() | Done with tear down!&quot;);\n }\n</code></pre>\n<p>The error <code>JCO_ERROR_CONCURRENT_CALL</code> I get is this :</p>\n<blockquote>\n<pre><code> 2018-12-06 15:00:15,504|INFO ||||||SapSessionReferenceProvider| getCurrentSessionReference() | Retrieving current session reference ...\n 2018-12-06 15:00:15,504|INFO ||||||SapSessionReferenceProvider| getCurrentSessionReference() | Current session reference retrieved Ok (id: sap-session-Default:Test_Bridge_With_External_Test_SAP_JCO:Y3IV_3)\n 2018-12-06 15:00:15,504|INFO ||||||SapSessionReferenceProvider| getCurrentSessionReference() | Retrieving current session reference ...\n 2018-12-06 15:00:15,504|INFO ||||||SapSessionReferenceProvider| getCurrentSessionReference() | Current session reference retrieved Ok (id: sap-session-Default:Test_Bridge_With_External_Test_SAP_JCO:Y3IV_3)\n 2018-12-06 15:00:15,504|ERROR||||||SapConnectionManagerImpl| clearConnectionContext() | Failed to end SAP context: {}\n com.sap.conn.jco.JCoException: (132) JCO_ERROR_CONCURRENT_CALL: Concurrent call \n       detected. Connection [13] currently used in another thread:\n       pool-2-thread-1 [100] in execute since 7999 ms. Current thread:\n       22184429@qtp-6003181-5 [67], action: release.\n    at com.sap.conn.jco.rt.ClientConnection.acquireBusyState(ClientConnection.java:185)\n    at com.sap.conn.jco.rt.PoolingFactory.releaseClient(PoolingFactory.java:655)\n    at com.sap.conn.jco.rt.ConnectionManager.releaseClient(ConnectionManager.java:234)\n    at com.sap.conn.jco.rt.Context.endSequence(Context.java:497)\n    at com.sap.conn.jco.rt.JCoRuntime.endSequence(JCoRuntime.java:805)\n    at com.sap.conn.jco.JCoContext.end(JCoContext.java:97)\n    at com.zetes.crystal.sap.io.impl.SapConnectionManagerImpl.clearConnectionContext(SapConnectionManagerImpl.java:258)\n    at com.zetes.crystal.sap.io.impl.SapConnectionManagerImpl.closeSapConnection(SapConnectionManagerImpl.java:145)\n    at com.zetes.crystal.sap.io.impl.SapConnectionManagerImpl.tearDown(SapConnectionManagerImpl.java:76)\n    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)\n    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)\n    at java.lang.reflect.Method.invoke(Unknown Source)\n    at org.springframework.beans.factory.annotation.InitDestroyAnnotationBeanPostProcessor$LifecycleElement.invoke(InitDestroyAnnotationBeanPostProcessor.java:297)\n    at org.springframework.beans.factory.annotation.InitDestroyAnnotationBeanPostProcessor$LifecycleMetadata.invokeDestroyMethods(InitDestroyAnnotationBeanPostProcessor.java:270)\n    at org.springframework.beans.factory.annotation.InitDestroyAnnotationBeanPostProcessor.postProcessBeforeDestruction(InitDestroyAnnotationBeanPostProcessor.java:162)\n    at org.springframework.beans.factory.support.DisposableBeanAdapter.destroy(DisposableBeanAdapter.java:140)\n    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.destroyBean(DefaultSingletonBeanRegistry.java:487)\n    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.destroySingleton(DefaultSingletonBeanRegistry.java:462)\n    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.destroyBean(DefaultSingletonBeanRegistry.java:480)\n    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.destroySingleton(DefaultSingletonBeanRegistry.java:462)\n    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.destroySingletons(DefaultSingletonBeanRegistry.java:430)\n    at org.springframework.context.support.AbstractApplicationContext.destroyBeans(AbstractApplicationContext.java:853)\n    at org.springframework.context.support.AbstractApplicationContext.doClose(AbstractApplicationContext.java:831)\n    at org.springframework.context.support.AbstractApplicationContext.close(AbstractApplicationContext.java:794)\n    at com.zetes.crystal.setup.server.bridges.impl.BridgeManagementServiceImpl.stopBridge(BridgeManagementServiceImpl.java:614)\n    at com.zetes.crystal.setup.server.bridges.impl.BridgeManagementServiceImpl.stopBridge(BridgeManagementServiceImpl.java:340)\n    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)\n    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)\n    at java.lang.reflect.Method.invoke(Unknown Source)\n    at org.gwtwidgets.server.spring.GWTRPCServiceExporter.invokeMethodOnService(GWTRPCServiceExporter.java:148)\n    at org.gwtwidgets.server.spring.GWTRPCServiceExporter.processCall(GWTRPCServiceExporter.java:298)\n    at com.google.gwt.user.server.rpc.RemoteServiceServlet.processPost(RemoteServiceServlet.java:248)\n    at com.google.gwt.user.server.rpc.AbstractRemoteServiceServlet.doPost(AbstractRemoteServiceServlet.java:62)\n    at org.gwtwidgets.server.spring.GWTRPCServiceExporter.handleRequest(GWTRPCServiceExporter.java:363)\n    at org.springframework.web.servlet.mvc.HttpRequestHandlerAdapter.handle(HttpRequestHandlerAdapter.java:49)\n    at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:875)\n    at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:807)\n    at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:571)\n    at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:511)\n    at javax.servlet.http.HttpServlet.service(HttpServlet.java:727)\n    at javax.servlet.http.HttpServlet.service(HttpServlet.java:820)\n    at org.mortbay.jetty.servlet.ServletHolder.handle(ServletHolder.java:511)\n    at org.mortbay.jetty.servlet.ServletHandler.handle(ServletHandler.java:390)\n    at org.mortbay.jetty.security.SecurityHandler.handle(SecurityHandler.java:216)\n    at org.mortbay.jetty.servlet.SessionHandler.handle(SessionHandler.java:182)\n    at org.mortbay.jetty.handler.ContextHandler.handle(ContextHandler.java:765)\n    at org.mortbay.jetty.webapp.WebAppContext.handle(WebAppContext.java:418)\n    at org.mortbay.jetty.handler.ContextHandlerCollection.handle(ContextHandlerCollection.java:230)\n    at org.mortbay.jetty.handler.HandlerCollection.handle(HandlerCollection.java:114)\n    at org.mortbay.jetty.handler.HandlerWrapper.handle(HandlerWrapper.java:152)\n    at org.mortbay.jetty.Server.handle(Server.java:326)\n    at org.mortbay.jetty.HttpConnection.handleRequest(HttpConnection.java:536)\n    at org.mortbay.jetty.HttpConnection$RequestHandler.content(HttpConnection.java:930)\n    at org.mortbay.jetty.HttpParser.parseNext(HttpParser.java:747)\n    at org.mortbay.jetty.HttpParser.parseAvailable(HttpParser.java:218)\n    at org.mortbay.jetty.HttpConnection.handle(HttpConnection.java:405)\n    at org.mortbay.io.nio.SelectChannelEndPoint.run(SelectChannelEndPoint.java:409)\n    at org.mortbay.thread.QueuedThreadPool$PoolThread.run(QueuedThreadPool.java:582)\n 2018-12-06 15:00:15,504|INFO ||||||SapUserManagementServiceImpl| SAP user &lt;Y3IV_3&gt; has been released\n 2018-12-06 15:00:15,504|INFO ||||||SapConnectionManagerImpl| tearDown() | Done with SAP connection manager tear down!\n 2018-12-06 15:00:15,504|INFO ||||||JcoServerConnectionFactory| tearDown() | Starting tear down ...\n 2018-12-06 15:00:15,504|INFO ||||||JcoServerConnectionFactory| tearDown() | Stopping 1 JCO servers ...\n 2018-12-06 15:00:15,504|DEBUG||||||JcoServerConnectionFactory|  &gt;&gt; STATUS = ALIVE\n 2018-12-06 15:00:15,504|DEBUG||||||JcoServerConnectionFactory| &gt;&gt; Stopping JCO Server :: 3IV_ZE9_CLNT_890_001\n 2018-12-06 15:00:15,504|INFO ||||||JcoServerConnectionFactory| JCO Server ProgID: 3IV_ZE9_CLNT_890_001 [10]       ALIVE -&gt;   STOPPING\n 2018-12-06 15:00:15,504|INFO ||||||JcoServerConnectionFactory| tearDown() | Done with tear down!\n 2018-12-06 15:00:15,520|INFO ||||||CockpitServiceImpl| Cockpit harvester of the bridge [Default:Test_Bridge_With_External_Test_SAP_JCO] has been un-registered from Cockpit manager\n 2018-12-06 15:00:15,520|INFO ||||||BridgeManagementServiceImpl| bridge [Test_Bridge_With_External_Test_SAP_JCO] from site [Default] has been stopped OK\n 2018-12-06 15:00:15,520|DEBUG||||||SimpleThreadPool| WorkerThread is shutting down\n 2018-12-06 15:00:15,520|INFO ||||||BridgeConfigurationPersiterImpl| Configuration for the bridge [Test_Bridge_With_External_Test_SAP_JCO] in site [Default] has been persisted OK\n 2018-12-06 15:00:15,520|DEBUG||||||BridgeManagementServiceImpl| onApplicationEvent() | begin\n 2018-12-06 15:00:15,536|DEBUG||||||SimpleThreadPool| WorkerThread is shutting down\n 2018-12-06 15:00:15,567|DEBUG||||||SimpleThreadPool| WorkerThread is shutting down\n 2018-12-06 15:00:15,567|DEBUG||||||SimpleThreadPool| WorkerThread is shutting down\n 2018-12-06 15:00:15,583|DEBUG||||||SimpleThreadPool| WorkerThread is shutting down\n 2018-12-06 15:00:15,676|DEBUG||||||SimpleThreadPool| WorkerThread is shutting down\n 2018-12-06 15:00:15,676|DEBUG||||||SimpleThreadPool| WorkerThread is shutting down\n 2018-12-06 15:00:15,676|DEBUG||||||SimpleThreadPool| WorkerThread is shutting down\n 2018-12-06 15:00:15,692|DEBUG||||||SimpleThreadPool| WorkerThread is shutting down\n 2018-12-06 15:00:15,739|DEBUG||||||SimpleThreadPool| WorkerThread is shutting down\n</code></pre>\n</blockquote>\n<p>When I am trying to stop the bridge, already there are some connections alive for this bridge and the status of the jcoserver changes from ALIVE -&gt; STOPPING and it never goes to STOPPED.\nIf there are no connections attached to the server, it goes to the status STOPPED without any problem.</p>\n<p>Could any one please provide any direction for this problem?\nIs there any way I can forcefully stop the bridge?</p>\n<p>Thanks!</p>\n"},{"tags":["java","java-20"],"comments":[{"owner":{"account_id":3557625,"reputation":198996,"user_id":2970947,"display_name":"Elliott Frisch"},"score":0,"creation_date":1681051107,"post_id":75971020,"comment_id":133993487,"body_markdown":"I think it&#39;s a compiler bug. By any chance are you using eclipse?","body":"I think it&#39;s a compiler bug. By any chance are you using eclipse?"},{"owner":{"account_id":47283,"reputation":703817,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"score":3,"creation_date":1681051456,"post_id":75971020,"comment_id":133993542,"body_markdown":"Definitely a bug.  Java source code should never compile to bytecodes that give a verify error.  But ... make sure you raise the bug report against the correct compiler ...","body":"Definitely a bug.  Java source code should never compile to bytecodes that give a verify error.  But ... make sure you raise the bug report against the correct compiler ..."},{"owner":{"account_id":26698569,"reputation":875,"user_id":20306007,"display_name":"life888888"},"score":0,"creation_date":1681052184,"post_id":75971020,"comment_id":133993643,"body_markdown":"I test the code, in Ubuntu 20, OpenJDK Runtime Environment Temurin-20+36, Compile Command: `javac -source 20 --enable-preview Main.java`, and run command `java --enable-preview Main`, then get same error message.(java.lang.VerifyError: Bad local variable type\nException Details:\n  Location:\n    Main.testSwitch(Ljava/lang/Object;)V @309: aload)","body":"I test the code, in Ubuntu 20, OpenJDK Runtime Environment Temurin-20+36, Compile Command: <code>javac -source 20 --enable-preview Main.java</code>, and run command <code>java --enable-preview Main</code>, then get same error message.(java.lang.VerifyError: Bad local variable type Exception Details:   Location:     Main.testSwitch(Ljava/lang/Object;)V @309: aload)"},{"owner":{"account_id":26698569,"reputation":875,"user_id":20306007,"display_name":"life888888"},"score":0,"creation_date":1681052360,"post_id":75971020,"comment_id":133993660,"body_markdown":"if add `-Xlint:preview`, `javac -source 20 -Xlint:preview --enable-preview Main.java`, will get more detaile warining: `Main.java:16: warning: [preview] patterns in switch statements are a preview feature and may be removed in a future release.\n            case Point(var x, var y, Color c) when c == Color.RED -&gt; out.printf(&quot;Red point x=%d, y=%d\\n&quot;,x,y);\n                 ^\nMain.java:16: warning: [preview] deconstruction patterns are a preview feature and may be removed in a future release.....`","body":"if add <code>-Xlint:preview</code>, <code>javac -source 20 -Xlint:preview --enable-preview Main.java</code>, will get more detaile warining: <code>Main.java:16: warning: [preview] patterns in switch statements are a preview feature and may be removed in a future release.             case Point(var x, var y, Color c) when c == Color.RED -&gt; out.printf(&quot;Red point x=%d, y=%d\\n&quot;,x,y);                  ^ Main.java:16: warning: [preview] deconstruction patterns are a preview feature and may be removed in a future release.....</code>"},{"owner":{"account_id":4434379,"reputation":1538,"user_id":3610608,"accept_rate":67,"display_name":"Hristo Stoyanov"},"score":1,"creation_date":1681066601,"post_id":75971020,"comment_id":133995523,"body_markdown":"@life888888. I expect the warnings, since I deliberately use preview feature. But it is not OK if the thing compiles and fails at runtime. Here is the JDK printout on my MacBook Air M1 running Ventura 13.3.1 (e.g. latest), but this see like a bug in all JDK 20 distros:\n```\njava -version\njava version &quot;20&quot; 2023-03-21\nJava(TM) SE Runtime Environment (build 20+36-2344)\nJava HotSpot(TM) 64-Bit Server VM (build 20+36-2344, mixed mode, sharing)\n```","body":"@life888888. I expect the warnings, since I deliberately use preview feature. But it is not OK if the thing compiles and fails at runtime. Here is the JDK printout on my MacBook Air M1 running Ventura 13.3.1 (e.g. latest), but this see like a bug in all JDK 20 distros: ``` java -version java version &quot;20&quot; 2023-03-21 Java(TM) SE Runtime Environment (build 20+36-2344) Java HotSpot(TM) 64-Bit Server VM (build 20+36-2344, mixed mode, sharing) ```"},{"owner":{"account_id":26698569,"reputation":875,"user_id":20306007,"display_name":"life888888"},"score":1,"creation_date":1681093778,"post_id":75971020,"comment_id":133998218,"body_markdown":"@Hristo Stoyanov, I also agree that this might be a problem with JDK 20.x, so I tested on my Ubuntu 20.04 + OpenJDK Runtime Environment Temurin-20+36 and got the same error message as you. (Error: Unable to initialize main class Main\nCaused by: java.lang.VerifyError: Bad local variable type)","body":"@Hristo Stoyanov, I also agree that this might be a problem with JDK 20.x, so I tested on my Ubuntu 20.04 + OpenJDK Runtime Environment Temurin-20+36 and got the same error message as you. (Error: Unable to initialize main class Main Caused by: java.lang.VerifyError: Bad local variable type)"},{"owner":{"account_id":1548079,"reputation":128727,"user_id":1441122,"display_name":"Stuart Marks"},"score":5,"creation_date":1681103749,"post_id":75971020,"comment_id":133998966,"body_markdown":"It‚Äôs clearly a bug that javac is producing a class file that doesn‚Äôt verify. There are a couple open bugs that seem related, e.g., [JDK-8302865](https://bugs.openjdk.org/browse/JDK-8302865) and [JDK-8304863](https://bugs.openjdk.org/browse/JDK-8304863). You might try this on a JDK 21 build.","body":"It‚Äôs clearly a bug that javac is producing a class file that doesn‚Äôt verify. There are a couple open bugs that seem related, e.g., <a href=\"https://bugs.openjdk.org/browse/JDK-8302865\" rel=\"nofollow noreferrer\">JDK-8302865</a> and <a href=\"https://bugs.openjdk.org/browse/JDK-8304863\" rel=\"nofollow noreferrer\">JDK-8304863</a>. You might try this on a JDK 21 build."},{"owner":{"account_id":4434379,"reputation":1538,"user_id":3610608,"accept_rate":67,"display_name":"Hristo Stoyanov"},"score":1,"creation_date":1681113025,"post_id":75971020,"comment_id":134000061,"body_markdown":"Thanks @StuartMarks for confirming, I filed a bug (internal review ID : 9075078). Hopefully jdk 20 is fixed soon, so we can taste all these new features!","body":"Thanks @StuartMarks for confirming, I filed a bug (internal review ID : 9075078). Hopefully jdk 20 is fixed soon, so we can taste all these new features!"}],"answers":[{"tags":[],"owner":{"account_id":4434379,"reputation":1538,"user_id":3610608,"accept_rate":67,"display_name":"Hristo Stoyanov"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1681164423,"creation_date":1681164423,"answer_id":75981095,"question_id":75971020,"body_markdown":"As confirmed by @stuartmarks (see comments) this is Java 20 compiler bug.","title":"Bug in java 20 deconstruction feature?","body":"<p>As confirmed by @stuartmarks (see comments) this is Java 20 compiler bug.</p>\n"}],"owner":{"account_id":4434379,"reputation":1538,"user_id":3610608,"accept_rate":67,"display_name":"Hristo Stoyanov"},"comment_count":8,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":208,"favorite_count":0,"down_vote_count":0,"up_vote_count":5,"answer_count":1,"score":5,"last_activity_date":1682876744,"creation_date":1681049426,"question_id":75971020,"body_markdown":"**Is the below a bug** in Java 20 or, am I missing something?\r\nIf you compile/run the below program, you get the expected printouts. But, if you uncomment the single line in the switch:\r\n\r\n```java\r\nimport static java.lang.System.*;\r\npublic class Main {\r\n    record Point(int x, int y, Color color){}\r\n    enum Color {RED, BLUE, YELLOW}\r\n    public static void main(String[] args) {\r\n        testSwitch(new Point(10,20,Color.BLUE));\r\n        testSwitch(new Point(10,20,Color.RED));\r\n        testSwitch(&quot;vbjhjbhbjhbj&quot;);\r\n        testSwitch(1.012);\r\n        testSwitch(Color.YELLOW);\r\n    }\r\n    static void testSwitch(Object o){\r\n        switch(o){\r\n            case null -&gt; out.println(&quot;Null&quot;);\r\n            case Color c -&gt; out.println(&quot;Color: &quot;+c);\r\n            //case Point(var x, var y, Color c) when c == Color.RED -&gt; out.printf(&quot;Red point x=%d, y=%d\\n&quot;,x,y);\r\n            case Point(var x, var y, var color) -&gt; out.printf(&quot;Point x=%d, y=%d, color=%s\\n&quot;,x,y,color);\r\n            case String s when s.length() &gt;=7 -&gt; out.printf(&quot;Big string: &#39;%s&#39;, of size %d\\n&quot;,s,s.length());\r\n            case String s -&gt; out.printf(&quot;Small string: %s, of size %d\\n&quot;,s,s.length());\r\n            default -&gt; out.println(&quot;Unexpected value: &quot; + o);\r\n        }\r\n    }\r\n}\r\n```\r\n\r\nthe code compiles fine, but at runtime I get (on MacOS 13.3.1 ARM64 JDK 20 with preview features enabled) this run-time failure:\r\n\r\n```\r\n/Library/Java/JavaVirtualMachines/jdk-20.jdk/Contents/Home/bin/java --enable-preview -javaagent:/Applications/IntelliJ IDEA.app/Contents/lib/idea_rt.jar=50788:/Applications/IntelliJ IDEA.app/Contents/bin -Dfile.encoding=UTF-8 -Dsun.stdout.encoding=UTF-8 -Dsun.stderr.encoding=UTF-8 -classpath /Users/hristo/projects/java20tests/java20tests/out/production/java20tests Main\r\nError: Unable to initialize main class Main\r\nCaused by: java.lang.VerifyError: Bad local variable type\r\nException Details:\r\n  Location:\r\n    Main.testSwitch(Ljava/lang/Object;)V @309: aload\r\n  Reason:\r\n    Type top (current frame, locals[7]) is not assignable to reference type\r\n  Current Frame:\r\n    bci: @309\r\n    flags: { }\r\n    locals: { &#39;java/lang/Object&#39;, &#39;java/lang/Object&#39;, integer, top, &#39;Main$Point&#39;, integer, integer, top, integer, integer, integer, integer, &#39;Main$Color&#39;, integer }\r\n    stack: { &#39;java/io/PrintStream&#39;, &#39;java/lang/String&#39;, &#39;[Ljava/lang/Object;&#39;, &#39;[Ljava/lang/Object;&#39;, integer }\r\n  Bytecode:\r\n    0000000: 2a4c 033d 2b1c ba00 2800 00aa 0000 019a\r\n    0000010: ffff ffff 0000 0003 0000 0021 0000 002c\r\n    0000020: 0000 0043 0000 013f 0000 0174 b200 2c12\r\n    0000030: 32b6 0034 a701 832b c000 0a4e b200 2c2d\r\n    0000040: b800 3aba 003f 0000 b600 34a7 016c 2bc0\r\n    0000050: 0007 3a04 1904 b600 4336 0803 3609 1508\r\n    0000060: b800 4715 09ba 004c 0000 ab00 0000 00db\r\n    0000070: 0000 0002 ffff ffff 0000 00db 0000 0000\r\n    0000080: 0000 001a 1508 3605 1904 b600 4d36 0a03\r\n    0000090: 360b 150a b800 4715 0bba 004c 0000 ab00\r\n    00000a0: 0000 00a1 0000 0002 ffff ffff 0000 00a1\r\n    00000b0: 0000 0000 0000 001a 150a 3606 1904 b600\r\n    00000c0: 503a 0c03 360d 190c 150d ba00 5400 00ab\r\n    00000d0: 0000 004b 0000 0002 ffff ffff 0000 004b\r\n    00000e0: 0000 0000 0000 0019 190c 3a07 1907 b200\r\n    00000f0: 18a5 0009 0436 0da7 ffcf b200 2c12 5805\r\n    0000100: bd00 0259 0315 05b8 0047 5359 0415 06b8\r\n    0000110: 0047 53b6 005a 57a7 00a0 b200 2c12 5e06\r\n    0000120: bd00 0259 0315 05b8 0047 5359 0415 06b8\r\n    0000130: 0047 5359 0519 0753 b600 5a57 a700 7b04\r\n    0000140: 3609 a7ff 1c05 3da7 febd 2bc0 003b 3a08\r\n    0000150: 1908 b600 6010 07a2 0008 063d a7fe a8b2\r\n    0000160: 002c 1263 05bd 0002 5903 1908 5359 0419\r\n    0000170: 08b6 0060 b800 4753 b600 5a57 a700 3b2b\r\n    0000180: c000 3b3a 09b2 002c 1265 05bd 0002 5903\r\n    0000190: 1909 5359 0419 09b6 0060 b800 4753 b600\r\n    00001a0: 5a57 a700 15b2 002c 2ab8 003a ba00 6700\r\n    00001b0: 00b6 0034 a700 03a7 0011 4cbb 006a 592b\r\n    00001c0: b600 6c2b b700 70bf b1                 \r\n  Exception Handler Table:\r\n    bci [86, 89] =&gt; handler: 442\r\n    bci [138, 141] =&gt; handler: 442\r\n    bci [190, 193] =&gt; handler: 442\r\n  Stackmap Table:\r\n    append_frame(@4,Object[#2],Integer)\r\n    same_frame(@44)\r\n    same_frame(@55)\r\n    same_frame(@78)\r\n    full_frame(@94,{Object[#2],Object[#2],Integer,Top,Object[#7],Top,Top,Top,Integer,Integer},{})\r\n    same_frame(@132)\r\n    full_frame(@146,{Object[#2],Object[#2],Integer,Top,Object[#7],Integer,Top,Top,Integer,Integer,Integer,Integer},{})\r\n    same_frame(@184)\r\n    full_frame(@198,{Object[#2],Object[#2],Integer,Top,Object[#7],Integer,Integer,Top,Integer,Integer,Integer,Integer,Object[#10],Integer},{})\r\n    same_frame(@232)\r\n    full_frame(@250,{Object[#2],Object[#2],Integer,Top,Object[#7],Integer,Integer,Object[#10],Integer,Integer,Integer,Integer,Object[#10],Integer},{})\r\n    full_frame(@282,{Object[#2],Object[#2],Integer,Top,Object[#7],Integer,Integer,Top,Integer,Integer,Integer,Integer,Object[#10],Integer},{})\r\n    full_frame(@319,{Object[#2],Object[#2],Integer,Top,Object[#7],Integer,Top,Top,Integer,Integer,Integer,Integer},{})\r\n    full_frame(@325,{Object[#2],Object[#2],Integer,Top,Object[#7],Top,Top,Top,Integer,Integer},{})\r\n    full_frame(@330,{Object[#2],Object[#2],Integer},{})\r\n    full_frame(@351,{Object[#2],Object[#2],Integer,Top,Top,Top,Top,Top,Object[#59]},{})\r\n    full_frame(@383,{Object[#2],Object[#2],Integer},{})\r\n    same_frame(@421)\r\n    chop_frame(@439,2)\r\n    same_locals_1_stack_item_frame(@442,Object[#104])\r\n    same_frame(@456)\r\n\r\nProcess finished with exit code 1\r\n```","title":"Bug in java 20 deconstruction feature?","body":"<p><strong>Is the below a bug</strong> in Java 20 or, am I missing something?\nIf you compile/run the below program, you get the expected printouts. But, if you uncomment the single line in the switch:</p>\n<pre class=\"lang-java prettyprint-override\"><code>import static java.lang.System.*;\npublic class Main {\n    record Point(int x, int y, Color color){}\n    enum Color {RED, BLUE, YELLOW}\n    public static void main(String[] args) {\n        testSwitch(new Point(10,20,Color.BLUE));\n        testSwitch(new Point(10,20,Color.RED));\n        testSwitch(&quot;vbjhjbhbjhbj&quot;);\n        testSwitch(1.012);\n        testSwitch(Color.YELLOW);\n    }\n    static void testSwitch(Object o){\n        switch(o){\n            case null -&gt; out.println(&quot;Null&quot;);\n            case Color c -&gt; out.println(&quot;Color: &quot;+c);\n            //case Point(var x, var y, Color c) when c == Color.RED -&gt; out.printf(&quot;Red point x=%d, y=%d\\n&quot;,x,y);\n            case Point(var x, var y, var color) -&gt; out.printf(&quot;Point x=%d, y=%d, color=%s\\n&quot;,x,y,color);\n            case String s when s.length() &gt;=7 -&gt; out.printf(&quot;Big string: '%s', of size %d\\n&quot;,s,s.length());\n            case String s -&gt; out.printf(&quot;Small string: %s, of size %d\\n&quot;,s,s.length());\n            default -&gt; out.println(&quot;Unexpected value: &quot; + o);\n        }\n    }\n}\n</code></pre>\n<p>the code compiles fine, but at runtime I get (on MacOS 13.3.1 ARM64 JDK 20 with preview features enabled) this run-time failure:</p>\n<pre><code>/Library/Java/JavaVirtualMachines/jdk-20.jdk/Contents/Home/bin/java --enable-preview -javaagent:/Applications/IntelliJ IDEA.app/Contents/lib/idea_rt.jar=50788:/Applications/IntelliJ IDEA.app/Contents/bin -Dfile.encoding=UTF-8 -Dsun.stdout.encoding=UTF-8 -Dsun.stderr.encoding=UTF-8 -classpath /Users/hristo/projects/java20tests/java20tests/out/production/java20tests Main\nError: Unable to initialize main class Main\nCaused by: java.lang.VerifyError: Bad local variable type\nException Details:\n  Location:\n    Main.testSwitch(Ljava/lang/Object;)V @309: aload\n  Reason:\n    Type top (current frame, locals[7]) is not assignable to reference type\n  Current Frame:\n    bci: @309\n    flags: { }\n    locals: { 'java/lang/Object', 'java/lang/Object', integer, top, 'Main$Point', integer, integer, top, integer, integer, integer, integer, 'Main$Color', integer }\n    stack: { 'java/io/PrintStream', 'java/lang/String', '[Ljava/lang/Object;', '[Ljava/lang/Object;', integer }\n  Bytecode:\n    0000000: 2a4c 033d 2b1c ba00 2800 00aa 0000 019a\n    0000010: ffff ffff 0000 0003 0000 0021 0000 002c\n    0000020: 0000 0043 0000 013f 0000 0174 b200 2c12\n    0000030: 32b6 0034 a701 832b c000 0a4e b200 2c2d\n    0000040: b800 3aba 003f 0000 b600 34a7 016c 2bc0\n    0000050: 0007 3a04 1904 b600 4336 0803 3609 1508\n    0000060: b800 4715 09ba 004c 0000 ab00 0000 00db\n    0000070: 0000 0002 ffff ffff 0000 00db 0000 0000\n    0000080: 0000 001a 1508 3605 1904 b600 4d36 0a03\n    0000090: 360b 150a b800 4715 0bba 004c 0000 ab00\n    00000a0: 0000 00a1 0000 0002 ffff ffff 0000 00a1\n    00000b0: 0000 0000 0000 001a 150a 3606 1904 b600\n    00000c0: 503a 0c03 360d 190c 150d ba00 5400 00ab\n    00000d0: 0000 004b 0000 0002 ffff ffff 0000 004b\n    00000e0: 0000 0000 0000 0019 190c 3a07 1907 b200\n    00000f0: 18a5 0009 0436 0da7 ffcf b200 2c12 5805\n    0000100: bd00 0259 0315 05b8 0047 5359 0415 06b8\n    0000110: 0047 53b6 005a 57a7 00a0 b200 2c12 5e06\n    0000120: bd00 0259 0315 05b8 0047 5359 0415 06b8\n    0000130: 0047 5359 0519 0753 b600 5a57 a700 7b04\n    0000140: 3609 a7ff 1c05 3da7 febd 2bc0 003b 3a08\n    0000150: 1908 b600 6010 07a2 0008 063d a7fe a8b2\n    0000160: 002c 1263 05bd 0002 5903 1908 5359 0419\n    0000170: 08b6 0060 b800 4753 b600 5a57 a700 3b2b\n    0000180: c000 3b3a 09b2 002c 1265 05bd 0002 5903\n    0000190: 1909 5359 0419 09b6 0060 b800 4753 b600\n    00001a0: 5a57 a700 15b2 002c 2ab8 003a ba00 6700\n    00001b0: 00b6 0034 a700 03a7 0011 4cbb 006a 592b\n    00001c0: b600 6c2b b700 70bf b1                 \n  Exception Handler Table:\n    bci [86, 89] =&gt; handler: 442\n    bci [138, 141] =&gt; handler: 442\n    bci [190, 193] =&gt; handler: 442\n  Stackmap Table:\n    append_frame(@4,Object[#2],Integer)\n    same_frame(@44)\n    same_frame(@55)\n    same_frame(@78)\n    full_frame(@94,{Object[#2],Object[#2],Integer,Top,Object[#7],Top,Top,Top,Integer,Integer},{})\n    same_frame(@132)\n    full_frame(@146,{Object[#2],Object[#2],Integer,Top,Object[#7],Integer,Top,Top,Integer,Integer,Integer,Integer},{})\n    same_frame(@184)\n    full_frame(@198,{Object[#2],Object[#2],Integer,Top,Object[#7],Integer,Integer,Top,Integer,Integer,Integer,Integer,Object[#10],Integer},{})\n    same_frame(@232)\n    full_frame(@250,{Object[#2],Object[#2],Integer,Top,Object[#7],Integer,Integer,Object[#10],Integer,Integer,Integer,Integer,Object[#10],Integer},{})\n    full_frame(@282,{Object[#2],Object[#2],Integer,Top,Object[#7],Integer,Integer,Top,Integer,Integer,Integer,Integer,Object[#10],Integer},{})\n    full_frame(@319,{Object[#2],Object[#2],Integer,Top,Object[#7],Integer,Top,Top,Integer,Integer,Integer,Integer},{})\n    full_frame(@325,{Object[#2],Object[#2],Integer,Top,Object[#7],Top,Top,Top,Integer,Integer},{})\n    full_frame(@330,{Object[#2],Object[#2],Integer},{})\n    full_frame(@351,{Object[#2],Object[#2],Integer,Top,Top,Top,Top,Top,Object[#59]},{})\n    full_frame(@383,{Object[#2],Object[#2],Integer},{})\n    same_frame(@421)\n    chop_frame(@439,2)\n    same_locals_1_stack_item_frame(@442,Object[#104])\n    same_frame(@456)\n\nProcess finished with exit code 1\n</code></pre>\n"},{"tags":["java","intellij-idea"],"comments":[{"owner":{"account_id":3017514,"reputation":144,"user_id":2559228,"accept_rate":100,"display_name":"don_Gunner94"},"score":0,"creation_date":1586620243,"post_id":1051640,"comment_id":108195988,"body_markdown":"I am facing the issue while running the program in the terminal in IntelliJ. I have used the import statement to use the classes that I require in the program. While I run it in the IDE, it runs fine. But when I try to compile from the command line % javac MyProgram.java, it says error: cannot find symbol","body":"I am facing the issue while running the program in the terminal in IntelliJ. I have used the import statement to use the classes that I require in the program. While I run it in the IDE, it runs fine. But when I try to compile from the command line % javac MyProgram.java, it says error: cannot find symbol"},{"owner":{"account_id":21994,"reputation":73798,"user_id":53897,"accept_rate":56,"display_name":"Thorbj&#248;rn Ravn Andersen"},"score":0,"creation_date":1636894941,"post_id":1051640,"comment_id":123674143,"body_markdown":"@don_Gunner94 You need to understand how the classpath works and that you may have to provide it more than you expect.","body":"@don_Gunner94 You need to understand how the classpath works and that you may have to provide it more than you expect."},{"owner":{"account_id":3842177,"reputation":847,"user_id":3184937,"accept_rate":71,"display_name":"Anish Panthi"},"score":1,"creation_date":1647582088,"post_id":1051640,"comment_id":126412024,"body_markdown":"I suggest not to use the approach that you are trying to do. Better you upload your JARs to any artifactory platform, like jFrog and get your artifact from such platform like you do from maven or gradle. I suggest you to follow &quot;The 12-Factor Principles&quot; as &quot;Dependencies (Explicitly declare and isolate the dependencies)&quot;","body":"I suggest not to use the approach that you are trying to do. Better you upload your JARs to any artifactory platform, like jFrog and get your artifact from such platform like you do from maven or gradle. I suggest you to follow &quot;The 12-Factor Principles&quot; as &quot;Dependencies (Explicitly declare and isolate the dependencies)&quot;"}],"answers":[{"tags":[],"owner":{"account_id":16878,"reputation":306143,"user_id":37213,"accept_rate":81,"display_name":"duffymo"},"down_vote_count":1,"up_vote_count":25,"is_accepted":false,"score":24,"last_activity_date":1518631851,"creation_date":1246057624,"answer_id":1051662,"question_id":1051640,"body_markdown":"You add them as libraries to your module.  \r\n\r\nI usually have a `/lib` directory in my source.   I put all the JARs I need there, add /lib as a library, and make it part of my module dependencies.\r\n\r\n2018 update: I&#39;m using IntelliJ 2017/2018 now.  \r\n\r\nI&#39;m fully committed to Maven and Nexus for dependency management.\r\n\r\nThis is the way the world has gone.  Every open source Java project that I know of uses Maven or Gradle.  You should, too.  \r\n\r\n  \r\n\r\n","title":"Correct way to add external jars (lib/*.jar) to an IntelliJ IDEA project","body":"<p>You add them as libraries to your module.  </p>\n\n<p>I usually have a <code>/lib</code> directory in my source.   I put all the JARs I need there, add /lib as a library, and make it part of my module dependencies.</p>\n\n<p>2018 update: I'm using IntelliJ 2017/2018 now.  </p>\n\n<p>I'm fully committed to Maven and Nexus for dependency management.</p>\n\n<p>This is the way the world has gone.  Every open source Java project that I know of uses Maven or Gradle.  You should, too.  </p>\n"},{"tags":[],"owner":{"account_id":17269,"reputation":19202,"user_id":38466,"accept_rate":75,"display_name":"Cambium"},"down_vote_count":3,"up_vote_count":1621,"is_accepted":true,"score":1618,"last_activity_date":1610617456,"creation_date":1246058974,"answer_id":1051705,"question_id":1051640,"body_markdown":"[![dialogue in Intellij 20.3][1]][1]\r\n\r\nSteps for adding external jars in **IntelliJ IDEA**:\r\n\r\n1. Click **File** from the toolbar\r\n2. Select **Project Structure** option (&lt;kbd&gt;CTRL&lt;/kbd&gt; + &lt;kbd&gt;SHIFT&lt;/kbd&gt; + &lt;kbd&gt;ALT&lt;/kbd&gt; + &lt;kbd&gt;S&lt;/kbd&gt; on Windows/Linux, &lt;kbd&gt;‚åò&lt;/kbd&gt; + &lt;kbd&gt;;&lt;/kbd&gt; on Mac OS X)\r\n3. Select **Modules** at the left panel\r\n4. Select **Dependencies** tab\r\n5. Select **+** icon\r\n6. Select **1 JARs or directories** option\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/ZlENo.png","title":"Correct way to add external jars (lib/*.jar) to an IntelliJ IDEA project","body":"<p><a href=\"https://i.stack.imgur.com/ZlENo.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/ZlENo.png\" alt=\"dialogue in Intellij 20.3\" /></a></p>\n<p>Steps for adding external jars in <strong>IntelliJ IDEA</strong>:</p>\n<ol>\n<li>Click <strong>File</strong> from the toolbar</li>\n<li>Select <strong>Project Structure</strong> option (<kbd>CTRL</kbd> + <kbd>SHIFT</kbd> + <kbd>ALT</kbd> + <kbd>S</kbd> on Windows/Linux, <kbd>‚åò</kbd> + <kbd>;</kbd> on Mac OS X)</li>\n<li>Select <strong>Modules</strong> at the left panel</li>\n<li>Select <strong>Dependencies</strong> tab</li>\n<li>Select <strong>+</strong> icon</li>\n<li>Select <strong>1 JARs or directories</strong> option</li>\n</ol>\n"},{"tags":[],"owner":{"account_id":266052,"reputation":3467,"user_id":2160546,"accept_rate":53,"display_name":"gurkan"},"down_vote_count":0,"up_vote_count":171,"is_accepted":false,"score":171,"last_activity_date":1559220593,"creation_date":1363856874,"answer_id":15543247,"question_id":1051640,"body_markdown":"Just copy-paste the .jar under the &quot;libs&quot; folder (or whole &quot;libs&quot; folder), right click on it and select &#39;Add as library&#39; option from the list. It will do the rest...\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/BwwlE.png","title":"Correct way to add external jars (lib/*.jar) to an IntelliJ IDEA project","body":"<p>Just copy-paste the .jar under the \"libs\" folder (or whole \"libs\" folder), right click on it and select 'Add as library' option from the list. It will do the rest...</p>\n\n<p><a href=\"https://i.stack.imgur.com/BwwlE.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/BwwlE.png\" alt=\"enter image description here\"></a></p>\n"},{"tags":[],"owner":{"account_id":4812242,"reputation":55062,"user_id":3885376,"accept_rate":64,"display_name":"ROMANIA_engineer"},"down_vote_count":0,"up_vote_count":289,"is_accepted":false,"score":289,"last_activity_date":1481123935,"creation_date":1443558417,"answer_id":32853178,"question_id":1051640,"body_markdown":"### IntelliJ IDEA 15 &amp; 2016\r\n\r\n1. **File** &gt; **Project Structure...** \r\n\r\n ![File &gt; Project Structure][1]\r\n\r\n or press &lt;kbd&gt;Ctrl&lt;/kbd&gt; + &lt;kbd&gt;Alt&lt;/kbd&gt; + &lt;kbd&gt;Shift&lt;/kbd&gt; + &lt;kbd&gt;S&lt;/kbd&gt;\r\n\r\n2. **Project Settings** &gt; **Modules** &gt; **Dependencies** &gt; &quot;**+**&quot; sign &gt; **JARs or directories...**\r\n\r\n ![Modules &gt; Dependencies &gt; JAR or directories][2]\r\n\r\n3. Select the jar file and click on OK, then click on another OK button to confirm\r\n\r\n ![enter image description here][3]\r\n\r\n ![enter image description here][4]\r\n\r\n4. You can view the jar file in the &quot;External Libraries&quot; folder\r\n\r\n ![enter image description here][5]\r\n\r\n\r\n  [1]: http://i.stack.imgur.com/eJqMW.png\r\n  [2]: http://i.stack.imgur.com/Nj5dC.png\r\n  [3]: http://i.stack.imgur.com/hyld1.png\r\n  [4]: http://i.stack.imgur.com/wnEcT.png\r\n  [5]: http://i.stack.imgur.com/2IEoQ.png","title":"Correct way to add external jars (lib/*.jar) to an IntelliJ IDEA project","body":"<h3>IntelliJ IDEA 15 &amp; 2016</h3>\n\n<ol>\n<li><p><strong>File</strong> > <strong>Project Structure...</strong> </p>\n\n<p><img src=\"https://i.stack.imgur.com/eJqMW.png\" alt=\"File &gt; Project Structure\"></p>\n\n<p>or press <kbd>Ctrl</kbd> + <kbd>Alt</kbd> + <kbd>Shift</kbd> + <kbd>S</kbd></p></li>\n<li><p><strong>Project Settings</strong> > <strong>Modules</strong> > <strong>Dependencies</strong> > \"<strong>+</strong>\" sign > <strong>JARs or directories...</strong></p>\n\n<p><img src=\"https://i.stack.imgur.com/Nj5dC.png\" alt=\"Modules &gt; Dependencies &gt; JAR or directories\"></p></li>\n<li><p>Select the jar file and click on OK, then click on another OK button to confirm</p>\n\n<p><img src=\"https://i.stack.imgur.com/hyld1.png\" alt=\"enter image description here\"></p>\n\n<p><img src=\"https://i.stack.imgur.com/wnEcT.png\" alt=\"enter image description here\"></p></li>\n<li><p>You can view the jar file in the \"External Libraries\" folder</p>\n\n<p><img src=\"https://i.stack.imgur.com/2IEoQ.png\" alt=\"enter image description here\"></p></li>\n</ol>\n"},{"tags":[],"owner":{"account_id":5527790,"reputation":11911,"user_id":4388776,"display_name":"Keet Sugathadasa"},"down_vote_count":0,"up_vote_count":7,"is_accepted":false,"score":7,"last_activity_date":1447055826,"creation_date":1447055826,"answer_id":33604674,"question_id":1051640,"body_markdown":"Libraries cannot be directly used in any program if not properly added to the project gradle files.\r\n\r\nThis can easily be done in smart IDEs like inteli J.\r\n\r\n1) First as a convention add a folder names &#39;libs&#39; under your project src file. (this can easily be done using the IDE itself)\r\n\r\n2) then copy or add your library file (eg: .jar file) to the folder named &#39;libs&#39;\r\n\r\n3) now you can see the library file inside the libs folder. Now right click on the file and select &#39;add as library&#39;. And this will fix all the relevant files in your program and library will be directly available for your use.\r\n\r\nPlease note:\r\n\r\nWhenever you are adding libraries to a project, make sure that the project supports the library","title":"Correct way to add external jars (lib/*.jar) to an IntelliJ IDEA project","body":"<p>Libraries cannot be directly used in any program if not properly added to the project gradle files.</p>\n\n<p>This can easily be done in smart IDEs like inteli J.</p>\n\n<p>1) First as a convention add a folder names 'libs' under your project src file. (this can easily be done using the IDE itself)</p>\n\n<p>2) then copy or add your library file (eg: .jar file) to the folder named 'libs'</p>\n\n<p>3) now you can see the library file inside the libs folder. Now right click on the file and select 'add as library'. And this will fix all the relevant files in your program and library will be directly available for your use.</p>\n\n<p>Please note:</p>\n\n<p>Whenever you are adding libraries to a project, make sure that the project supports the library</p>\n"},{"tags":[],"owner":{"account_id":7502704,"reputation":61,"user_id":5700430,"display_name":"Rolland"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1450616633,"creation_date":1450616633,"answer_id":34381260,"question_id":1051640,"body_markdown":"Some great help found here. However, I still could not make it to work despite loading JAR properly. I found out later that I accidentally created module in the file structure instead of regular folder and this very module was pre-selected in the project setting.\r\n\r\nHere is the footprint:\r\n&gt;File -&gt; Project Structure -&gt; Modules -&gt; (select proper module if you have more) -&gt; Dependencies -&gt; + -&gt; JAR or Libraries\r\n\r\n","title":"Correct way to add external jars (lib/*.jar) to an IntelliJ IDEA project","body":"<p>Some great help found here. However, I still could not make it to work despite loading JAR properly. I found out later that I accidentally created module in the file structure instead of regular folder and this very module was pre-selected in the project setting.</p>\n\n<p>Here is the footprint:</p>\n\n<blockquote>\n  <p>File -> Project Structure -> Modules -> (select proper module if you have more) -> Dependencies -> + -> JAR or Libraries</p>\n</blockquote>\n"},{"tags":[],"owner":{"account_id":1353454,"reputation":4045,"user_id":1292323,"accept_rate":91,"display_name":"kgui"},"down_vote_count":1,"up_vote_count":6,"is_accepted":false,"score":5,"last_activity_date":1486420489,"creation_date":1486420489,"answer_id":42078505,"question_id":1051640,"body_markdown":"While I agree with the previous answers, it&#39;s important to note how to access the code of those external libraries. \r\n\r\nFor example to access a class in the external library, you will want to use the ***import*** keyword followed by the external library&#39;s name, continued with dot notation until the desired class is reached. \r\n\r\nLook at the image below to see how I import *CodeGenerationException* class from the quickfixj library. \r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/d9Cfj.png","title":"Correct way to add external jars (lib/*.jar) to an IntelliJ IDEA project","body":"<p>While I agree with the previous answers, it's important to note how to access the code of those external libraries. </p>\n\n<p>For example to access a class in the external library, you will want to use the <strong><em>import</em></strong> keyword followed by the external library's name, continued with dot notation until the desired class is reached. </p>\n\n<p>Look at the image below to see how I import <em>CodeGenerationException</em> class from the quickfixj library. </p>\n\n<p><a href=\"https://i.stack.imgur.com/d9Cfj.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/d9Cfj.png\" alt=\"enter image description here\"></a></p>\n"},{"tags":[],"owner":{"account_id":7509396,"reputation":1881,"user_id":5704891,"accept_rate":93,"display_name":"Ali Hesari"},"down_vote_count":0,"up_vote_count":10,"is_accepted":false,"score":10,"last_activity_date":1493062830,"creation_date":1493062830,"answer_id":43596431,"question_id":1051640,"body_markdown":"I use this method and it works well:\r\n\r\n1- Copy And paste the `.jar` files under the `libs` folder.\r\n\r\n2- Add `compile fileTree(dir: &#39;libs&#39;, include: &#39;*.jar&#39;)` to `dependencies` in `build.gradle` then all the jars in the `libs` folder will be included..\r\n\r\n3- Right click on `libs` folder and select &#39;Add as library&#39; option from the list.","title":"Correct way to add external jars (lib/*.jar) to an IntelliJ IDEA project","body":"<p>I use this method and it works well:</p>\n\n<p>1- Copy And paste the <code>.jar</code> files under the <code>libs</code> folder.</p>\n\n<p>2- Add <code>compile fileTree(dir: 'libs', include: '*.jar')</code> to <code>dependencies</code> in <code>build.gradle</code> then all the jars in the <code>libs</code> folder will be included..</p>\n\n<p>3- Right click on <code>libs</code> folder and select 'Add as library' option from the list.</p>\n"},{"tags":[],"owner":{"account_id":352570,"reputation":16022,"user_id":689723,"accept_rate":71,"display_name":"cesards"},"down_vote_count":0,"up_vote_count":43,"is_accepted":false,"score":43,"last_activity_date":1519311981,"creation_date":1519311981,"answer_id":48930705,"question_id":1051640,"body_markdown":"If you are building your project with gradle, you just need to add one line to the dependencies in the build.gradle:\r\n\r\n    buildscript {\r\n        ...\r\n    }\r\n    ...\r\n    \r\n    dependencies {\r\n        implementation fileTree(dir: &#39;libs&#39;, include: [&#39;*.jar&#39;])\r\n    }\r\n\r\nand then add the folder to your root project or module:\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/zVzAR.png\r\n\r\nThen you drop your jars in there and you are good to go :-)","title":"Correct way to add external jars (lib/*.jar) to an IntelliJ IDEA project","body":"<p>If you are building your project with gradle, you just need to add one line to the dependencies in the build.gradle:</p>\n\n<pre><code>buildscript {\n    ...\n}\n...\n\ndependencies {\n    implementation fileTree(dir: 'libs', include: ['*.jar'])\n}\n</code></pre>\n\n<p>and then add the folder to your root project or module:</p>\n\n<p><a href=\"https://i.stack.imgur.com/zVzAR.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/zVzAR.png\" alt=\"enter image description here\"></a></p>\n\n<p>Then you drop your jars in there and you are good to go :-)</p>\n"},{"tags":[],"owner":{"account_id":9051650,"reputation":91,"user_id":6741503,"display_name":"CuriosCoder"},"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1641694897,"creation_date":1610145700,"answer_id":65637355,"question_id":1051640,"body_markdown":"1. File &gt; Project Structure\r\n2. Project Settings &gt; Modules &gt; Dependencies (Select one of)\r\n   - 1 JARs or Directories...\r\n   - 2 Library...\r\n   - 3 Module Dependency...\r\n[![enter image description here][1]][1]\r\n3. Apply + Ok\r\n\r\n\r\n[![enter image description here][2]][2]\r\n\r\n4. Import into java class\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/o9TQK.png\r\n  [2]: https://i.stack.imgur.com/UPJVk.png","title":"Correct way to add external jars (lib/*.jar) to an IntelliJ IDEA project","body":"<ol>\n<li>File &gt; Project Structure</li>\n<li>Project Settings &gt; Modules &gt; Dependencies (Select one of)\n<ul>\n<li>1 JARs or Directories...</li>\n<li>2 Library...</li>\n<li>3 Module Dependency...\n<a href=\"https://i.stack.imgur.com/o9TQK.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/o9TQK.png\" alt=\"enter image description here\" /></a></li>\n</ul>\n</li>\n<li>Apply + Ok</li>\n</ol>\n<p><a href=\"https://i.stack.imgur.com/UPJVk.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/UPJVk.png\" alt=\"enter image description here\" /></a></p>\n<ol start=\"4\">\n<li>Import into java class</li>\n</ol>\n"},{"tags":[],"owner":{"account_id":3260426,"reputation":11559,"user_id":2746110,"accept_rate":67,"display_name":"Arefe"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1645162136,"creation_date":1645162136,"answer_id":71168751,"question_id":1051640,"body_markdown":"You can put the JAR in the libs folder and add it from there. This can be done in 2 different ways in IntelliJ:\r\n\r\n1. Right-click on the libs folder and add from there:\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n2. Add the JAR from the project structure:\r\n\r\n[![enter image description here][2]][2]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/JnhIj.png\r\n  [2]: https://i.stack.imgur.com/mSQcH.png","title":"Correct way to add external jars (lib/*.jar) to an IntelliJ IDEA project","body":"<p>You can put the JAR in the libs folder and add it from there. This can be done in 2 different ways in IntelliJ:</p>\n<ol>\n<li>Right-click on the libs folder and add from there:</li>\n</ol>\n<p><a href=\"https://i.stack.imgur.com/JnhIj.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/JnhIj.png\" alt=\"enter image description here\" /></a></p>\n<ol start=\"2\">\n<li>Add the JAR from the project structure:</li>\n</ol>\n<p><a href=\"https://i.stack.imgur.com/mSQcH.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/mSQcH.png\" alt=\"enter image description here\" /></a></p>\n"},{"tags":[],"owner":{"account_id":14396250,"reputation":412,"user_id":10399467,"display_name":"qingmu"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1646737875,"creation_date":1646737875,"answer_id":71394046,"question_id":1051640,"body_markdown":"If you are building your project with maven, you just need to add one line to the dependencies in the pom.xml:\r\n\r\n```xml\r\n&lt;dependency&gt;\r\n     &lt;groupId&gt;com.xxx&lt;/groupId&gt;\r\n     &lt;artifactId&gt;xxxx-server&lt;/artifactId&gt;\r\n     &lt;version&gt;1.0.0&lt;/version&gt;\r\n     &lt;scope&gt;system&lt;/scope&gt;\r\n     &lt;systemPath&gt;${pom.basedir}/src/libs/xxx-server-1.0.0.jar&lt;/systemPath&gt;\r\n&lt;/dependency&gt;\r\n```\r\nand then add the folder to your root project or module:\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/jQnyF.png\r\n\r\nthis is my personal experiences. I wish they would help you ","title":"Correct way to add external jars (lib/*.jar) to an IntelliJ IDEA project","body":"<p>If you are building your project with maven, you just need to add one line to the dependencies in the pom.xml:</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;dependency&gt;\n     &lt;groupId&gt;com.xxx&lt;/groupId&gt;\n     &lt;artifactId&gt;xxxx-server&lt;/artifactId&gt;\n     &lt;version&gt;1.0.0&lt;/version&gt;\n     &lt;scope&gt;system&lt;/scope&gt;\n     &lt;systemPath&gt;${pom.basedir}/src/libs/xxx-server-1.0.0.jar&lt;/systemPath&gt;\n&lt;/dependency&gt;\n</code></pre>\n<p>and then add the folder to your root project or module:</p>\n<p><a href=\"https://i.stack.imgur.com/jQnyF.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/jQnyF.png\" alt=\"enter image description here\" /></a></p>\n<p>this is my personal experiences. I wish they would help you</p>\n"},{"tags":[],"owner":{"account_id":19550851,"reputation":45,"user_id":14306500,"display_name":"Beyond Space Time"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1682876433,"creation_date":1682876433,"answer_id":76142670,"question_id":1051640,"body_markdown":"I&#39;m using Intellij IDEA 2022, with Kotlin.\r\n\r\nCreated libs folder in the root of the project, and in build.gradle.kts file within dependencies {}:\r\n\r\nimplementation(fileTree(mapOf(&quot;dir&quot; to &quot;libs&quot;, &quot;include&quot; to listOf(&quot;*.jar&quot;)))) \r\n\r\nHope this helps someone who came to this post struggling to implement external dependencies, like me ;)","title":"Correct way to add external jars (lib/*.jar) to an IntelliJ IDEA project","body":"<p>I'm using Intellij IDEA 2022, with Kotlin.</p>\n<p>Created libs folder in the root of the project, and in build.gradle.kts file within dependencies {}:</p>\n<p>implementation(fileTree(mapOf(&quot;dir&quot; to &quot;libs&quot;, &quot;include&quot; to listOf(&quot;*.jar&quot;))))</p>\n<p>Hope this helps someone who came to this post struggling to implement external dependencies, like me ;)</p>\n"}],"owner":{"account_id":23344,"reputation":49339,"user_id":58394,"accept_rate":99,"display_name":"knorv"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1297250,"favorite_count":0,"down_vote_count":0,"up_vote_count":910,"accepted_answer_id":1051705,"answer_count":13,"score":910,"last_activity_date":1682876433,"creation_date":1246057115,"question_id":1051640,"body_markdown":"When creating a new Java project in IntelliJ IDEA, the following directories and files are created:\r\n\r\n    ./projectname.iml\r\n    ./projectname.ipr\r\n    ./projectname.iws\r\n    ./src/\r\n\r\nI want to configure IntelliJ IDEA to include my dependency JARs in `./lib/*.jar` to the project. What is the correct way to achieve this in IntelliJ IDEA?","title":"Correct way to add external jars (lib/*.jar) to an IntelliJ IDEA project","body":"<p>When creating a new Java project in IntelliJ IDEA, the following directories and files are created:</p>\n\n<pre><code>./projectname.iml\n./projectname.ipr\n./projectname.iws\n./src/\n</code></pre>\n\n<p>I want to configure IntelliJ IDEA to include my dependency JARs in <code>./lib/*.jar</code> to the project. What is the correct way to achieve this in IntelliJ IDEA?</p>\n"},{"tags":["java","jco"],"answers":[{"tags":[],"owner":{"account_id":9910001,"reputation":1796,"user_id":7337102,"display_name":"Trixx"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1552766604,"creation_date":1552766604,"answer_id":55200966,"question_id":55197724,"body_markdown":"Your called RFM ZMARC_AUT10 threw an undeclared system exception CNTL_ERROR.\r\nYou need to analyze the error in the ABAP system. Have a look into the dumps with transaction ST22 and/or debug your ABAP Remote Function Module.\r\nIn general, I furthermore recommend to avoid throwing undeclared exceptions.\r\n","title":"Getting JCO_ERROR_SYSTEM_FAILURE with SAP JCo call","body":"<p>Your called RFM ZMARC_AUT10 threw an undeclared system exception CNTL_ERROR.\nYou need to analyze the error in the ABAP system. Have a look into the dumps with transaction ST22 and/or debug your ABAP Remote Function Module.\nIn general, I furthermore recommend to avoid throwing undeclared exceptions.</p>\n"},{"tags":[],"owner":{"account_id":4690682,"reputation":1676,"user_id":3796873,"display_name":"manuel_b"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1552816660,"creation_date":1552816660,"answer_id":55205851,"question_id":55197724,"body_markdown":"I can&#39;t be sure about the reason of the exception, since it is a custom rfc, but usually the CNTL_ERROR is related to the GUI objects call (ALV for example)\r\n\r\nI believe you are trying to instantiate one of these objects, but via RFC you don&#39;t have a GUI available.\r\n\r\nPlease check the RFC code looking for a custom container or alv or similar","title":"Getting JCO_ERROR_SYSTEM_FAILURE with SAP JCo call","body":"<p>I can't be sure about the reason of the exception, since it is a custom rfc, but usually the CNTL_ERROR is related to the GUI objects call (ALV for example)</p>\n\n<p>I believe you are trying to instantiate one of these objects, but via RFC you don't have a GUI available.</p>\n\n<p>Please check the RFC code looking for a custom container or alv or similar</p>\n"}],"owner":{"account_id":10056831,"reputation":435,"user_id":7434767,"display_name":"Ram"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2569,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"accepted_answer_id":55200966,"answer_count":2,"score":0,"last_activity_date":1682876385,"creation_date":1552745580,"question_id":55197724,"body_markdown":"I am getting below error while invoking customized function through JCo. Please see the image for input parameters and types.\r\n\r\n&gt; com.sap.conn.jco.JCoException: (104) JCO_ERROR_SYSTEM_FAILURE: Exception condition &quot;CNTL_ERROR&quot; triggered\r\n\r\nBelow is the code snippet to assign values to input parameters to function and passing date and time values as string in format **yyyyMMdd**  and **HHmmss**:\r\n\r\n    JCoFunction function = destination.getRepository().getFunction(&quot;ZMARC_AUT10&quot;);\r\n    JCoParameterList params = function.getImportParameterList();\r\n    {\r\n    params.setValue(&quot;I_DATEFROM&quot;,fromDate);\r\n\tparams.setValue(&quot;I_TIMEFROM&quot;,fromTime);\r\n\tparams.setValue(&quot;I_DATETO&quot;,toDate);\r\n\tparams.setValue(&quot;I_TIMETO&quot;,toTime);\r\n\tparams.setValue(&quot;I_USER&quot;, username);\r\n\t}\r\n\r\nHere is the error trace:\r\n\r\n&gt; ```\r\n&gt; Caused by: com.sap.conn.rfc.exceptions.RfcGetException: Exception condition \r\n&gt;    &quot;CNTL_ERROR&quot; triggered\r\n&gt;\tat com.sap.conn.rfc.engine.RfcImp.ab_rfcerror(RfcImp.java:1176)\r\n&gt;\tat com.sap.conn.rfc.engine.RfcGet.ab_rfcget(RfcGet.java:120)\r\n&gt;\tat com.sap.conn.rfc.engine.RfcRcv.ab_rfcreceive(RfcRcv.java:33)\r\n&gt;\tat com.sap.conn.rfc.engine.RfcIoOpenCntl.RfcReceive(RfcIoOpenCntl.java:1982)\r\n&gt;\t... 45 more\r\n&gt; ```\r\n\r\nFunction import parameter list and datatypes:\r\n\r\n[![function import parameter list and datatypes][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/B54PG.png","title":"Getting JCO_ERROR_SYSTEM_FAILURE with SAP JCo call","body":"<p>I am getting below error while invoking customized function through JCo. Please see the image for input parameters and types.</p>\n<blockquote>\n<p>com.sap.conn.jco.JCoException: (104) JCO_ERROR_SYSTEM_FAILURE: Exception condition &quot;CNTL_ERROR&quot; triggered</p>\n</blockquote>\n<p>Below is the code snippet to assign values to input parameters to function and passing date and time values as string in format <strong>yyyyMMdd</strong>  and <strong>HHmmss</strong>:</p>\n<pre><code>JCoFunction function = destination.getRepository().getFunction(&quot;ZMARC_AUT10&quot;);\nJCoParameterList params = function.getImportParameterList();\n{\nparams.setValue(&quot;I_DATEFROM&quot;,fromDate);\nparams.setValue(&quot;I_TIMEFROM&quot;,fromTime);\nparams.setValue(&quot;I_DATETO&quot;,toDate);\nparams.setValue(&quot;I_TIMETO&quot;,toTime);\nparams.setValue(&quot;I_USER&quot;, username);\n}\n</code></pre>\n<p>Here is the error trace:</p>\n<blockquote>\n<pre><code>Caused by: com.sap.conn.rfc.exceptions.RfcGetException: Exception condition \n   &quot;CNTL_ERROR&quot; triggered\n  at com.sap.conn.rfc.engine.RfcImp.ab_rfcerror(RfcImp.java:1176)\n  at com.sap.conn.rfc.engine.RfcGet.ab_rfcget(RfcGet.java:120)\n  at com.sap.conn.rfc.engine.RfcRcv.ab_rfcreceive(RfcRcv.java:33)\n  at com.sap.conn.rfc.engine.RfcIoOpenCntl.RfcReceive(RfcIoOpenCntl.java:1982)\n  ... 45 more\n</code></pre>\n</blockquote>\n<p>Function import parameter list and datatypes:</p>\n<p><a href=\"https://i.stack.imgur.com/B54PG.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/B54PG.png\" alt=\"function import parameter list and datatypes\" /></a></p>\n"},{"tags":["java","maven-2","ant","jar","maven-plugin"],"comments":[{"owner":{"account_id":426689,"reputation":191,"user_id":808032,"accept_rate":40,"display_name":"fjjiaboming"},"score":0,"creation_date":1446435430,"post_id":2188746,"comment_id":54726181,"body_markdown":"http://stackoverflow.com/questions/12809559/remove-jar-created-by-default-in-maven","body":"<a href=\"http://stackoverflow.com/questions/12809559/remove-jar-created-by-default-in-maven\" title=\"remove jar created by default in maven\">stackoverflow.com/questions/12809559/&hellip;</a>"}],"answers":[{"tags":[],"owner":{"account_id":46925,"reputation":8408,"user_id":138837,"accept_rate":60,"display_name":"Drew Wills"},"down_vote_count":3,"up_vote_count":13,"is_accepted":false,"score":10,"last_activity_date":1265156110,"creation_date":1265156110,"answer_id":2188779,"question_id":2188746,"body_markdown":"What happens if you declare this?\r\n\r\n    &lt;packaging&gt;pom&lt;/packaging&gt;\r\n\r\nEven if it does what you&#39;re looking for, be careful.  I&#39;m not sure if there could be negative side effects -- such as other maven projects that depend on your jar not being able to locate it.","title":"What is the best way to avoid maven-jar?","body":"<p>What happens if you declare this?</p>\n\n<pre><code>&lt;packaging&gt;pom&lt;/packaging&gt;\n</code></pre>\n\n<p>Even if it does what you're looking for, be careful.  I'm not sure if there could be negative side effects -- such as other maven projects that depend on your jar not being able to locate it.</p>\n"},{"tags":[],"owner":{"account_id":26957,"reputation":564361,"user_id":70604,"display_name":"Pascal Thivent"},"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1265158743,"creation_date":1265158743,"answer_id":2188988,"question_id":2188746,"body_markdown":"&gt; I am using a different plugin to jar my files. What is the best way to avoid the maven-jar plugin from executing?\r\n\r\nFirst, the `jar:jar` goal is [bound by default][1] on the `package` phase for a project with a packaging of type `jar`. Second, there is no way to unbind a plugin bound to a phase. So, if you are using another plugin(?), either accept to produce 2 JARs or change the packaging (but I don&#39;t think this will work well).\r\n\r\n\r\n  [1]: http://e.org/guides/introduction/introduction-to-the-lifecycle.html#Built-in_Lifecycle_Bindings\r\n  [2]: http://maven.apache.org/guides/introduction/introduction-to-the-lifecycle.html#Lifecycle_Reference","title":"What is the best way to avoid maven-jar?","body":"<blockquote>\n  <p>I am using a different plugin to jar my files. What is the best way to avoid the maven-jar plugin from executing?</p>\n</blockquote>\n\n<p>First, the <code>jar:jar</code> goal is <a href=\"http://e.org/guides/introduction/introduction-to-the-lifecycle.html#Built-in_Lifecycle_Bindings\" rel=\"nofollow noreferrer\">bound by default</a> on the <code>package</code> phase for a project with a packaging of type <code>jar</code>. Second, there is no way to unbind a plugin bound to a phase. So, if you are using another plugin(?), either accept to produce 2 JARs or change the packaging (but I don't think this will work well).</p>\n"},{"tags":[],"owner":{"account_id":44736,"reputation":98412,"user_id":131433,"accept_rate":76,"display_name":"bmargulies"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1265159334,"creation_date":1265159334,"answer_id":2189021,"question_id":2188746,"body_markdown":"Explicitly bind the jar plugin to a phase that doesn&#39;t exist.","title":"What is the best way to avoid maven-jar?","body":"<p>Explicitly bind the jar plugin to a phase that doesn't exist.</p>\n"},{"tags":[],"owner":{"account_id":84984,"reputation":5857,"user_id":237237,"display_name":"Brett Porter"},"down_vote_count":1,"up_vote_count":4,"is_accepted":false,"score":3,"last_activity_date":1265291028,"creation_date":1265291028,"answer_id":2200050,"question_id":2188746,"body_markdown":"As other&#39;s have said, it&#39;s not possible to turn it off, other than using `&lt;packaging&gt;pom&lt;/packaging&gt;`, which turns everything off and is probably not what you want.\r\n\r\nEven though it will generate twice, a working solution is to bind your jar process to the `package` phase, as that is guaranteed to run after the default. By overwriting the same JAR file, you&#39;ll find that yours is used wherever the original would have been.\r\n\r\n","title":"What is the best way to avoid maven-jar?","body":"<p>As other's have said, it's not possible to turn it off, other than using <code>&lt;packaging&gt;pom&lt;/packaging&gt;</code>, which turns everything off and is probably not what you want.</p>\n\n<p>Even though it will generate twice, a working solution is to bind your jar process to the <code>package</code> phase, as that is guaranteed to run after the default. By overwriting the same JAR file, you'll find that yours is used wherever the original would have been.</p>\n"},{"tags":[],"owner":{"account_id":293702,"reputation":720,"user_id":597158,"display_name":"peterj"},"down_vote_count":1,"up_vote_count":62,"is_accepted":false,"score":61,"last_activity_date":1568034314,"creation_date":1296493954,"answer_id":4853816,"question_id":2188746,"body_markdown":"In Maven 3.0.x (I tried 3.0.2) you can disable `maven-jar-plugin` by binding the `default-jar` execution to a nonexistent phase, as [@bmargulies suggested][1].  Unfortunately that doesn&#39;t work in 2.2.1, but you can prevent it from interfering with your own jar by setting an alternative `&lt;finalName&gt;` and `&lt;classifier&gt;` for the `default-jar` execution; it will still create a jar, but it will be set as a secondary artifact for the project and won&#39;t overwrite the one you&#39;ve created.  Here&#39;s an example that should work in both Maven 2 and Maven 3:\r\n\r\n    &lt;project&gt;\r\n      &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n    \r\n      &lt;groupId&gt;test&lt;/groupId&gt;\r\n      &lt;artifactId&gt;test&lt;/artifactId&gt;\r\n      &lt;version&gt;0.1-SNAPSHOT&lt;/version&gt;\r\n    \r\n      &lt;build&gt;\r\n        &lt;plugins&gt;\r\n          &lt;plugin&gt;\r\n            &lt;artifactId&gt;maven-jar-plugin&lt;/artifactId&gt;\r\n            &lt;executions&gt;\r\n              &lt;execution&gt;\r\n                &lt;id&gt;default-jar&lt;/id&gt;\r\n                &lt;phase&gt;none&lt;/phase&gt;\r\n                &lt;configuration&gt;\r\n                  &lt;finalName&gt;unwanted&lt;/finalName&gt;\r\n                  &lt;classifier&gt;unwanted&lt;/classifier&gt;\r\n                &lt;/configuration&gt;\r\n              &lt;/execution&gt;\r\n            &lt;/executions&gt;\r\n          &lt;/plugin&gt;\r\n        &lt;/plugins&gt;\r\n      &lt;/build&gt;\r\n    &lt;/project&gt;\r\n\r\nOnce you&#39;ve disabled `maven-jar-plugin`, `maven-install-plugin` may give you trouble too.  In Maven 3 it can be disabled the same as `maven-jar-plugin`: bind `default-install` to a nonexistent phase.  However, in Maven 2 `maven-install-plugin` requires that the `target/classes` directory exist, and it will install the dummy jar when there isn&#39;t a primary artifact present.\r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/2188746/what-is-the-best-way-to-avoid-maven-jar/2189021#2189021","title":"What is the best way to avoid maven-jar?","body":"<p>In Maven 3.0.x (I tried 3.0.2) you can disable <code>maven-jar-plugin</code> by binding the <code>default-jar</code> execution to a nonexistent phase, as <a href=\"https://stackoverflow.com/questions/2188746/what-is-the-best-way-to-avoid-maven-jar/2189021#2189021\">@bmargulies suggested</a>.  Unfortunately that doesn't work in 2.2.1, but you can prevent it from interfering with your own jar by setting an alternative <code>&lt;finalName&gt;</code> and <code>&lt;classifier&gt;</code> for the <code>default-jar</code> execution; it will still create a jar, but it will be set as a secondary artifact for the project and won't overwrite the one you've created.  Here's an example that should work in both Maven 2 and Maven 3:</p>\n\n<pre><code>&lt;project&gt;\n  &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n\n  &lt;groupId&gt;test&lt;/groupId&gt;\n  &lt;artifactId&gt;test&lt;/artifactId&gt;\n  &lt;version&gt;0.1-SNAPSHOT&lt;/version&gt;\n\n  &lt;build&gt;\n    &lt;plugins&gt;\n      &lt;plugin&gt;\n        &lt;artifactId&gt;maven-jar-plugin&lt;/artifactId&gt;\n        &lt;executions&gt;\n          &lt;execution&gt;\n            &lt;id&gt;default-jar&lt;/id&gt;\n            &lt;phase&gt;none&lt;/phase&gt;\n            &lt;configuration&gt;\n              &lt;finalName&gt;unwanted&lt;/finalName&gt;\n              &lt;classifier&gt;unwanted&lt;/classifier&gt;\n            &lt;/configuration&gt;\n          &lt;/execution&gt;\n        &lt;/executions&gt;\n      &lt;/plugin&gt;\n    &lt;/plugins&gt;\n  &lt;/build&gt;\n&lt;/project&gt;\n</code></pre>\n\n<p>Once you've disabled <code>maven-jar-plugin</code>, <code>maven-install-plugin</code> may give you trouble too.  In Maven 3 it can be disabled the same as <code>maven-jar-plugin</code>: bind <code>default-install</code> to a nonexistent phase.  However, in Maven 2 <code>maven-install-plugin</code> requires that the <code>target/classes</code> directory exist, and it will install the dummy jar when there isn't a primary artifact present.</p>\n"},{"tags":[],"owner":{"account_id":1040199,"reputation":37,"user_id":1046433,"display_name":"Chris"},"down_vote_count":7,"up_vote_count":5,"is_accepted":false,"score":-2,"last_activity_date":1321306902,"creation_date":1321306902,"answer_id":8128574,"question_id":2188746,"body_markdown":"           &lt;plugin&gt;\r\n                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n                &lt;artifactId&gt;maven-jar-plugin&lt;/artifactId&gt;\r\n                &lt;configuration&gt;\r\n                    &lt;skip&gt;true&lt;/skip&gt;\r\n                &lt;/configuration&gt;\r\n            &lt;/plugin&gt;        ","title":"What is the best way to avoid maven-jar?","body":"<pre><code>       &lt;plugin&gt;\n            &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n            &lt;artifactId&gt;maven-jar-plugin&lt;/artifactId&gt;\n            &lt;configuration&gt;\n                &lt;skip&gt;true&lt;/skip&gt;\n            &lt;/configuration&gt;\n        &lt;/plugin&gt;        \n</code></pre>\n"},{"tags":[],"owner":{"account_id":447843,"reputation":450,"user_id":841720,"display_name":"redhot"},"down_vote_count":1,"up_vote_count":42,"is_accepted":false,"score":41,"last_activity_date":1682874570,"creation_date":1378955837,"answer_id":18754749,"question_id":2188746,"body_markdown":"This should do the trick - notice the use of `&lt;id&gt;default-jar&lt;/id&gt;` and `&lt;phase/&gt;`.\r\n\r\n      &lt;build&gt;\r\n        &lt;plugins&gt;\r\n          &lt;plugin&gt;\r\n            &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n            &lt;artifactId&gt;maven-jar-plugin&lt;/artifactId&gt;\r\n            &lt;version&gt;2.4&lt;/version&gt;\r\n            &lt;executions&gt;\r\n              &lt;execution&gt;\r\n                &lt;id&gt;default-jar&lt;/id&gt;\r\n                &lt;phase&gt;none&lt;/phase&gt;\r\n              &lt;/execution&gt;\r\n            &lt;/executions&gt;\r\n          &lt;/plugin&gt;\r\n        &lt;/plugins&gt;\r\n      &lt;/build&gt;\r\n\r\n","title":"What is the best way to avoid maven-jar?","body":"<p>This should do the trick - notice the use of <code>&lt;id&gt;default-jar&lt;/id&gt;</code> and <code>&lt;phase/&gt;</code>.</p>\n<pre><code>  &lt;build&gt;\n    &lt;plugins&gt;\n      &lt;plugin&gt;\n        &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n        &lt;artifactId&gt;maven-jar-plugin&lt;/artifactId&gt;\n        &lt;version&gt;2.4&lt;/version&gt;\n        &lt;executions&gt;\n          &lt;execution&gt;\n            &lt;id&gt;default-jar&lt;/id&gt;\n            &lt;phase&gt;none&lt;/phase&gt;\n          &lt;/execution&gt;\n        &lt;/executions&gt;\n      &lt;/plugin&gt;\n    &lt;/plugins&gt;\n  &lt;/build&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":243320,"reputation":1406,"user_id":515411,"accept_rate":73,"display_name":"bheussler"},"down_vote_count":0,"up_vote_count":16,"is_accepted":false,"score":16,"last_activity_date":1513105735,"creation_date":1513105735,"answer_id":47779886,"question_id":2188746,"body_markdown":"In my case, I only wanted to disable the jar plugin because the jar was empty.  You can use the `skipIfEmpty` option in the plugin configuration\r\n\r\n    &lt;plugin&gt;\r\n        &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n        &lt;artifactId&gt;maven-jar-plugin&lt;/artifactId&gt;\r\n        &lt;version&gt;3.0.2&lt;/version&gt;\r\n        &lt;configuration&gt;\r\n            &lt;skipIfEmpty&gt;true&lt;/skipIfEmpty&gt;\r\n        &lt;/configuration&gt;\r\n    &lt;/plugin&gt;","title":"What is the best way to avoid maven-jar?","body":"<p>In my case, I only wanted to disable the jar plugin because the jar was empty.  You can use the <code>skipIfEmpty</code> option in the plugin configuration</p>\n\n<pre><code>&lt;plugin&gt;\n    &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n    &lt;artifactId&gt;maven-jar-plugin&lt;/artifactId&gt;\n    &lt;version&gt;3.0.2&lt;/version&gt;\n    &lt;configuration&gt;\n        &lt;skipIfEmpty&gt;true&lt;/skipIfEmpty&gt;\n    &lt;/configuration&gt;\n&lt;/plugin&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":5237342,"reputation":402,"user_id":4185533,"display_name":"Erik Nellessen"},"down_vote_count":0,"up_vote_count":8,"is_accepted":false,"score":8,"last_activity_date":1562060591,"creation_date":1562060445,"answer_id":56849536,"question_id":2188746,"body_markdown":"Using maven 3.3.9, the following worked for me:\r\n\r\n    &lt;plugin&gt;\r\n        &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n        &lt;artifactId&gt;maven-jar-plugin&lt;/artifactId&gt;\r\n        &lt;version&gt;3.1.2&lt;/version&gt;\r\n        &lt;executions&gt;\r\n            &lt;execution&gt;\r\n                &lt;id&gt;default-jar&lt;/id&gt;\r\n                &lt;phase&gt;none&lt;/phase&gt;\r\n                &lt;configuration&gt;\r\n                    &lt;finalName&gt;unwanted&lt;/finalName&gt;\r\n                    &lt;classifier&gt;unwanted&lt;/classifier&gt;\r\n                &lt;/configuration&gt;\r\n            &lt;/execution&gt;\r\n        &lt;/executions&gt;\r\n    &lt;/plugin&gt;\r\n    &lt;plugin&gt;\r\n        &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n        &lt;artifactId&gt;maven-install-plugin&lt;/artifactId&gt;\r\n        &lt;version&gt;3.0.0-M1&lt;/version&gt;\r\n        &lt;configuration&gt;\r\n            &lt;skip&gt;true&lt;/skip&gt;\r\n        &lt;/configuration&gt;\r\n    &lt;/plugin&gt;\r\n\r\nSo in case of the maven-jar-plugin, I bound it to a non-existent phase. For the maven-install-plugin, I used the &quot;skip&quot; configuration parameter. The [documentation][1] about it says: &quot;Set this to true to bypass artifact installation. Use this for artifacts that does not need to be installed in the local repository.&quot;\r\n\r\n\r\n  [1]: https://maven.apache.org/plugins/maven-install-plugin/install-mojo.html","title":"What is the best way to avoid maven-jar?","body":"<p>Using maven 3.3.9, the following worked for me:</p>\n\n<pre><code>&lt;plugin&gt;\n    &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n    &lt;artifactId&gt;maven-jar-plugin&lt;/artifactId&gt;\n    &lt;version&gt;3.1.2&lt;/version&gt;\n    &lt;executions&gt;\n        &lt;execution&gt;\n            &lt;id&gt;default-jar&lt;/id&gt;\n            &lt;phase&gt;none&lt;/phase&gt;\n            &lt;configuration&gt;\n                &lt;finalName&gt;unwanted&lt;/finalName&gt;\n                &lt;classifier&gt;unwanted&lt;/classifier&gt;\n            &lt;/configuration&gt;\n        &lt;/execution&gt;\n    &lt;/executions&gt;\n&lt;/plugin&gt;\n&lt;plugin&gt;\n    &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n    &lt;artifactId&gt;maven-install-plugin&lt;/artifactId&gt;\n    &lt;version&gt;3.0.0-M1&lt;/version&gt;\n    &lt;configuration&gt;\n        &lt;skip&gt;true&lt;/skip&gt;\n    &lt;/configuration&gt;\n&lt;/plugin&gt;\n</code></pre>\n\n<p>So in case of the maven-jar-plugin, I bound it to a non-existent phase. For the maven-install-plugin, I used the \"skip\" configuration parameter. The <a href=\"https://maven.apache.org/plugins/maven-install-plugin/install-mojo.html\" rel=\"noreferrer\">documentation</a> about it says: \"Set this to true to bypass artifact installation. Use this for artifacts that does not need to be installed in the local repository.\"</p>\n"}],"owner":{"account_id":30252,"reputation":52431,"user_id":82368,"accept_rate":71,"display_name":"unj2"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":45315,"favorite_count":0,"down_vote_count":0,"up_vote_count":63,"answer_count":9,"score":63,"last_activity_date":1682874570,"creation_date":1265155676,"question_id":2188746,"body_markdown":"I am using a different plugin (ant4eclipse) to jar my files. What is the best way to avoid the maven-jar plugin from executing?\r\n\r\n - I tried to remove the `&lt;plugin&gt;maven-jar-plugin&lt;/plugin&gt;`\r\n - I tried to `&lt;exclude&gt; ** / * &lt; / exclude&gt;`\r\n - I tried to `&lt;skip&gt;true&lt;/skip&gt;`\r\n\r\nNone worked\r\n\r\n","title":"What is the best way to avoid maven-jar?","body":"<p>I am using a different plugin (ant4eclipse) to jar my files. What is the best way to avoid the maven-jar plugin from executing?</p>\n\n<ul>\n<li>I tried to remove the <code>&lt;plugin&gt;maven-jar-plugin&lt;/plugin&gt;</code></li>\n<li>I tried to <code>&lt;exclude&gt; ** / * &lt; / exclude&gt;</code></li>\n<li>I tried to <code>&lt;skip&gt;true&lt;/skip&gt;</code></li>\n</ul>\n\n<p>None worked</p>\n"},{"tags":["java","arrays"],"comments":[{"owner":{"account_id":28104689,"reputation":512,"user_id":21473475,"display_name":"Arfur Narf"},"score":0,"creation_date":1682860899,"post_id":76141449,"comment_id":134278358,"body_markdown":"Copy the array youve got to one that is larger by one element. Then set the new element, which will be the highest-indexed element, to the added value.","body":"Copy the array youve got to one that is larger by one element. Then set the new element, which will be the highest-indexed element, to the added value."},{"owner":{"account_id":24849332,"reputation":3,"user_id":18755984,"display_name":"Ruairi"},"score":0,"creation_date":1682861223,"post_id":76141449,"comment_id":134278405,"body_markdown":"Hi Arfur thanks for the reply! Would something below look ok? \n \n&#39;public void addObject(Object[] array, Object objectToAdd){\n        Object[] result = new Object[array.length + 1];\n        result[array.length - 1] = objectToAdd;\n  }&#39;","body":"Hi Arfur thanks for the reply! Would something below look ok?    &#39;public void addObject(Object[] array, Object objectToAdd){         Object[] result = new Object[array.length + 1];         result[array.length - 1] = objectToAdd;   }&#39;"},{"owner":{"account_id":3557625,"reputation":198996,"user_id":2970947,"display_name":"Elliott Frisch"},"score":0,"creation_date":1682861266,"post_id":76141449,"comment_id":134278411,"body_markdown":"Java arrays have a fixed length. This isn&#39;t great when you want to add or remove objects from an array. And that is precisely why `ArrayList` is provided. Perhaps you should explain why you can&#39;t use `ArrayList` (I&#39;m guessing it&#39;s because this is for school). You don&#39;t tell us very much, you ask for help with adding an element, but then show us code removing an element. Where exactly are you stuck?","body":"Java arrays have a fixed length. This isn&#39;t great when you want to add or remove objects from an array. And that is precisely why <code>ArrayList</code> is provided. Perhaps you should explain why you can&#39;t use <code>ArrayList</code> (I&#39;m guessing it&#39;s because this is for school). You don&#39;t tell us very much, you ask for help with adding an element, but then show us code removing an element. Where exactly are you stuck?"},{"owner":{"account_id":24849332,"reputation":3,"user_id":18755984,"display_name":"Ruairi"},"score":0,"creation_date":1682861365,"post_id":76141449,"comment_id":134278431,"body_markdown":"Hi Elliot thanks for the reply. Yes sorry it is for school hence the lack of Context. I created the code for removing an element and it is successfully working. I was wondering if the same code could just be slightly modified to be able to add rather than remove :)","body":"Hi Elliot thanks for the reply. Yes sorry it is for school hence the lack of Context. I created the code for removing an element and it is successfully working. I was wondering if the same code could just be slightly modified to be able to add rather than remove :)"},{"owner":{"account_id":28104689,"reputation":512,"user_id":21473475,"display_name":"Arfur Narf"},"score":0,"creation_date":1682862742,"post_id":76141449,"comment_id":134278623,"body_markdown":"Your new array (in the comment) does not contain what was in the old array.  Use `Arrays.copy` for the whole old array, as in your remove code. Otherwise, you&#39;ve got the idea.","body":"Your new array (in the comment) does not contain what was in the old array.  Use <code>Arrays.copy</code> for the whole old array, as in your remove code. Otherwise, you&#39;ve got the idea."},{"owner":{"account_id":7612423,"reputation":82486,"user_id":5772882,"display_name":"Anonymous"},"score":0,"creation_date":1682874681,"post_id":76141449,"comment_id":134280262,"body_markdown":"Just keep an array of size 10 always and use as many entries as necessary. Keep track of how many using an `int` variable. When the user removes an element, push the elements to the right of the empty space one step to the left to fill the gap so that the unused entries are always at the end. So you know that if the count i 9, then the first 9 entries are used (from index 0 through 8), etc.","body":"Just keep an array of size 10 always and use as many entries as necessary. Keep track of how many using an <code>int</code> variable. When the user removes an element, push the elements to the right of the empty space one step to the left to fill the gap so that the unused entries are always at the end. So you know that if the count i 9, then the first 9 entries are used (from index 0 through 8), etc."}],"answers":[{"tags":[],"owner":{"account_id":3557625,"reputation":198996,"user_id":2970947,"display_name":"Elliott Frisch"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1682863168,"creation_date":1682863168,"answer_id":76141632,"question_id":76141449,"body_markdown":"The short answer in real code is to use an `ArrayList`. Since this is for learning, you need to understand a few things about Java arrays. They have a fixed length. And you need to know their type to create new ones. When you combine that with generics and subsequent type erasure, you are typically required to pass the type as an argument. Thus you end up with complex looking method signatures. Such as,\r\n\r\n\tpublic static &lt;T&gt; T[] addObject(Class&lt;? extends T&gt; cls, T[] array, T obj) {\r\n\t\tint len = array != null ? array.length : 0; // The array length or 0 if null\r\n\t\t@SuppressWarnings(&quot;unchecked&quot;)\r\n\t\tT[] ret = (T[]) Array.newInstance(cls, len + 1); // at least one\r\n\t\tif (len &gt; 0) { // check if there is something to copy\r\n\t\t\tSystem.arraycopy(array, 0, ret, 0, len); // copy the original array\r\n\t\t}\r\n\t\tret[len] = obj; // append the new element\r\n\t\treturn ret;\r\n\t}\r\n\r\nWhere `&lt;T&gt;` defines some generic type, `Class&lt;? extends T&gt;` defines a class that produces instances of type `T`, and then an `array` of that type and an instance of `T`. Then, you can create a new instance of the array to return with [`java.lang.reflect.Array.newInstance(Class&lt;?&gt;, int)`](https://docs.oracle.com/javase/8/docs/api/java/lang/reflect/Array.html#newInstance-java.lang.Class-int-), then copy the elements from the original array (if there are any) and finally append the new instance at the end before returning the new array. Testing it like,\r\n\r\n\tpublic static void main(String[] args) {\r\n\t\tInteger[] arr = { Integer.valueOf(1), 2, 3 };\r\n\t\tInteger[] arr2 = addObject(Integer.class, arr, Integer.valueOf(4));\r\n\t\tSystem.out.println(Arrays.toString(arr2));\r\n\t}\r\n\r\nOutputs\r\n\r\n    [1, 2, 3, 4]\r\n","title":"Adding an object to an Java array (without the use of ArrayLists)","body":"<p>The short answer in real code is to use an <code>ArrayList</code>. Since this is for learning, you need to understand a few things about Java arrays. They have a fixed length. And you need to know their type to create new ones. When you combine that with generics and subsequent type erasure, you are typically required to pass the type as an argument. Thus you end up with complex looking method signatures. Such as,</p>\n<pre><code>public static &lt;T&gt; T[] addObject(Class&lt;? extends T&gt; cls, T[] array, T obj) {\n    int len = array != null ? array.length : 0; // The array length or 0 if null\n    @SuppressWarnings(&quot;unchecked&quot;)\n    T[] ret = (T[]) Array.newInstance(cls, len + 1); // at least one\n    if (len &gt; 0) { // check if there is something to copy\n        System.arraycopy(array, 0, ret, 0, len); // copy the original array\n    }\n    ret[len] = obj; // append the new element\n    return ret;\n}\n</code></pre>\n<p>Where <code>&lt;T&gt;</code> defines some generic type, <code>Class&lt;? extends T&gt;</code> defines a class that produces instances of type <code>T</code>, and then an <code>array</code> of that type and an instance of <code>T</code>. Then, you can create a new instance of the array to return with <a href=\"https://docs.oracle.com/javase/8/docs/api/java/lang/reflect/Array.html#newInstance-java.lang.Class-int-\" rel=\"nofollow noreferrer\"><code>java.lang.reflect.Array.newInstance(Class&lt;?&gt;, int)</code></a>, then copy the elements from the original array (if there are any) and finally append the new instance at the end before returning the new array. Testing it like,</p>\n<pre><code>public static void main(String[] args) {\n    Integer[] arr = { Integer.valueOf(1), 2, 3 };\n    Integer[] arr2 = addObject(Integer.class, arr, Integer.valueOf(4));\n    System.out.println(Arrays.toString(arr2));\n}\n</code></pre>\n<p>Outputs</p>\n<pre><code>[1, 2, 3, 4]\n</code></pre>\n"}],"owner":{"account_id":24849332,"reputation":3,"user_id":18755984,"display_name":"Ruairi"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":88,"favorite_count":0,"down_vote_count":2,"up_vote_count":0,"closed_date":1682931933,"accepted_answer_id":76141632,"answer_count":1,"score":-2,"last_activity_date":1682874508,"creation_date":1682860406,"question_id":76141449,"body_markdown":"I was wondering if someone could help me with how to add an object to an array. For some context my program prints out 10 objects from an array and allows the user to select one to be removed, then shows the remaining nine and allows them to select another one to be removed (Using switch case statements). The program then compares the objects and if they equal a certain value then they are permanently removed, if not they are added back. I have the method below that I use to remove the object but I was hoping I could get some help with modifying the method but to ADD an object rather than REMOVE it. \r\n\r\n```java\r\npublic void removeObjectFromArray(int index) {\r\n    this.array = removeElement(array, index);\r\n}\r\n\r\npublic static Object[] removeElement(final Object[] array, final int index) {\r\n    Object[] result = new Object[array.length - 1];\r\n    System.arraycopy(array, 0, result, 0, index);\r\n    if (index &lt; array.length - 1) {\r\n        System.arraycopy(array, index + 1, result, index, array.length - index - 1);\r\n    }\r\n    return result;\r\n}\r\n```\r\nAny alternatives are also appreciated. But I am supposed to avoid using `ArrayList`s. \r\n\r\nI tried something as simple as swapping the operator values (from + to - and - to +) but that didn&#39;t work.","title":"Adding an object to an Java array (without the use of ArrayLists)","body":"<p>I was wondering if someone could help me with how to add an object to an array. For some context my program prints out 10 objects from an array and allows the user to select one to be removed, then shows the remaining nine and allows them to select another one to be removed (Using switch case statements). The program then compares the objects and if they equal a certain value then they are permanently removed, if not they are added back. I have the method below that I use to remove the object but I was hoping I could get some help with modifying the method but to ADD an object rather than REMOVE it.</p>\n<pre class=\"lang-java prettyprint-override\"><code>public void removeObjectFromArray(int index) {\n    this.array = removeElement(array, index);\n}\n\npublic static Object[] removeElement(final Object[] array, final int index) {\n    Object[] result = new Object[array.length - 1];\n    System.arraycopy(array, 0, result, 0, index);\n    if (index &lt; array.length - 1) {\n        System.arraycopy(array, index + 1, result, index, array.length - index - 1);\n    }\n    return result;\n}\n</code></pre>\n<p>Any alternatives are also appreciated. But I am supposed to avoid using <code>ArrayList</code>s.</p>\n<p>I tried something as simple as swapping the operator values (from + to - and - to +) but that didn't work.</p>\n"},{"tags":["java","hibernate","jsp","jstl"],"comments":[{"owner":{"account_id":1944253,"reputation":37590,"user_id":1749753,"display_name":"jlordo"},"score":3,"creation_date":1360773719,"post_id":14858435,"comment_id":20827127,"body_markdown":"`Integer.parseInt(request.getParameter(&quot;userid&quot;))` is in your code.","body":"<code>Integer.parseInt(request.getParameter(&quot;userid&quot;))</code> is in your code."},{"owner":{"account_id":1616076,"reputation":673,"user_id":1493723,"accept_rate":52,"display_name":"VBJ"},"score":0,"creation_date":1360773833,"post_id":14858435,"comment_id":20827205,"body_markdown":"but that is not giving me any error..i was able to place it in User object without any error and Hibernate has pulled the record (I checked size of the list). Error is occurring when the request is going into JSP page.","body":"but that is not giving me any error..i was able to place it in User object without any error and Hibernate has pulled the record (I checked size of the list). Error is occurring when the request is going into JSP page."},{"owner":{"account_id":987388,"reputation":2553,"user_id":1005569,"display_name":"orangegoat"},"score":1,"creation_date":1360774212,"post_id":14858435,"comment_id":20827456,"body_markdown":"userRecords is a list of users, you need to iterate through the userRecords to get to each user","body":"userRecords is a list of users, you need to iterate through the userRecords to get to each user"}],"answers":[{"tags":[],"owner":{"account_id":52822,"reputation":1088970,"user_id":157882,"accept_rate":93,"display_name":"BalusC"},"down_vote_count":0,"up_vote_count":19,"is_accepted":true,"score":19,"last_activity_date":1360774741,"creation_date":1360774264,"answer_id":14858674,"question_id":14858435,"body_markdown":"The `${userRecords}` here\r\n\r\n    ${userRecords.user_first_name}\r\n    ${userRecords.user_middle_name}\r\n\r\nis a `List&lt;User&gt;`, however you&#39;re attempting to access it as if it&#39;s a single `User`. This is not valid. In EL, a `List` can only be accessed with an integer index, indicating the position of the list item you&#39;d like to access, like so\r\n\r\n    ${userRecords[0].user_first_name}\r\n    ${userRecords[0].user_middle_name}\r\n\r\nThe exception is also basically telling that it expected an integer value instead of a string value. If you look closer at the stack trace, you&#39;ll see that a `ListELResolver` is involved.\r\n\r\nHowever, your concrete problem is bigger. You should actually be iterating over the list. Use the [JSTL][1] `&lt;c:forEach&gt;` for that. E.g. (simplified from your odd code snippet):\r\n\r\n&lt;!-- language: xhtml --&gt;\r\n\r\n    &lt;table&gt;\r\n        &lt;c:forEach items=&quot;${userRecords}&quot; var=&quot;user&quot;&gt;\r\n            &lt;tr&gt;\r\n                &lt;td&gt;${user.user_first_name}&lt;/td&gt;\r\n                &lt;td&gt;${user.user_middle_name}&lt;/td&gt;\r\n            &lt;/tr&gt;\r\n        &lt;/c:forEach&gt;\r\n    &lt;/table&gt;\r\n\r\n*(note: keep the [XSS attack hole][2] in mind if you really intend to redisplay them as input values)*\r\n\r\nBy the way, I&#39;d work on your [Java code conventions][3]. Those underscores are really not Java-ish.\r\n\r\n\r\n  [1]: https://stackoverflow.com/tags/jstl/info\r\n  [2]: https://stackoverflow.com/questions/2658922/xss-prevention-in-java/2658941#2658941\r\n  [3]: http://www.oracle.com/technetwork/java/javase/documentation/codeconvtoc-136057.html","title":"java.lang.NumberFormatException: For input string in JSP Page","body":"<p>The <code>${userRecords}</code> here</p>\n\n<pre><code>${userRecords.user_first_name}\n${userRecords.user_middle_name}\n</code></pre>\n\n<p>is a <code>List&lt;User&gt;</code>, however you're attempting to access it as if it's a single <code>User</code>. This is not valid. In EL, a <code>List</code> can only be accessed with an integer index, indicating the position of the list item you'd like to access, like so</p>\n\n<pre><code>${userRecords[0].user_first_name}\n${userRecords[0].user_middle_name}\n</code></pre>\n\n<p>The exception is also basically telling that it expected an integer value instead of a string value. If you look closer at the stack trace, you'll see that a <code>ListELResolver</code> is involved.</p>\n\n<p>However, your concrete problem is bigger. You should actually be iterating over the list. Use the <a href=\"https://stackoverflow.com/tags/jstl/info\">JSTL</a> <code>&lt;c:forEach&gt;</code> for that. E.g. (simplified from your odd code snippet):</p>\n\n<pre class=\"lang-html prettyprint-override\"><code>&lt;table&gt;\n    &lt;c:forEach items=\"${userRecords}\" var=\"user\"&gt;\n        &lt;tr&gt;\n            &lt;td&gt;${user.user_first_name}&lt;/td&gt;\n            &lt;td&gt;${user.user_middle_name}&lt;/td&gt;\n        &lt;/tr&gt;\n    &lt;/c:forEach&gt;\n&lt;/table&gt;\n</code></pre>\n\n<p><em>(note: keep the <a href=\"https://stackoverflow.com/questions/2658922/xss-prevention-in-java/2658941#2658941\">XSS attack hole</a> in mind if you really intend to redisplay them as input values)</em></p>\n\n<p>By the way, I'd work on your <a href=\"http://www.oracle.com/technetwork/java/javase/documentation/codeconvtoc-136057.html\" rel=\"nofollow noreferrer\">Java code conventions</a>. Those underscores are really not Java-ish.</p>\n"},{"tags":[],"owner":{"account_id":4492595,"reputation":2210,"user_id":3653335,"accept_rate":36,"display_name":"tom"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1682874128,"creation_date":1682874128,"answer_id":76142499,"question_id":14858435,"body_markdown":"Check what your function/DAO is returning.  In my case, my HQL was returning some default value because I had a query without &quot;select&quot; and with a join as in &quot;from EmailTemplate et join EmailTemplateParts etp&quot;","title":"java.lang.NumberFormatException: For input string in JSP Page","body":"<p>Check what your function/DAO is returning.  In my case, my HQL was returning some default value because I had a query without &quot;select&quot; and with a join as in &quot;from EmailTemplate et join EmailTemplateParts etp&quot;</p>\n"}],"owner":{"account_id":1616076,"reputation":673,"user_id":1493723,"accept_rate":52,"display_name":"VBJ"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":34268,"favorite_count":0,"down_vote_count":0,"up_vote_count":7,"accepted_answer_id":14858674,"answer_count":2,"score":7,"last_activity_date":1682874128,"creation_date":1360773604,"question_id":14858435,"body_markdown":"Hi can someone please help why this is giving an error when trying to display the values in a JSP page. I don&#39;t have any number been converted or String been converted to Number, however I get NumberFormatException\r\n\r\nmy Servlet getting the request to display a user record\r\n\r\n    if(action.equalsIgnoreCase(&quot;update&quot;)){\r\n\t\t\tSystem.out.println(&quot;Came into Update&quot;);\r\n\t\t\tuserId=(int) Integer.parseInt(request.getParameter(&quot;userid&quot;));\r\n\t\t\tnbId=request.getParameter(&quot;nbId&quot;).trim();\r\n\t\t\tSystem.out.println(&quot;User iD and NBid: &quot;+ userId + nbId);\r\n\t\t\t\r\n\t\t\tUser user=new User();\r\n\t\t\tuser.setUser_id(userId);\r\n\t\t\tuser.setUser_nbk(nbId);\r\n\t\t\t\r\n\t\t\t\r\n\t\t\t\r\n\t\t\tList userRecords=UserDAO.getUserRecord(user);\r\n\t\t\trequest.setAttribute(&quot;userRecords&quot;, userRecords);\r\n\t\t\tList owningOrg=Owning_Org_DB.getOwningOrgRecords();\r\n\t\t\trequest.setAttribute(&quot;owningOrg&quot;, owningOrg);\r\n\t\t\trequest.getRequestDispatcher(&quot;WEB-INF/JSP/TableMaintenance/UserNewAdd.jsp&quot;).forward(request, response);\r\n\r\nPOJO:\r\n\r\n     @Entity\r\n     @Cache(usage=CacheConcurrencyStrategy.READ_WRITE)\r\n      public class User {\r\n\t\r\n\t@Id\r\n\tprivate int user_id;\r\n\tprivate String user_first_name;\r\n\tprivate String user_middle_name;\r\n\tprivate String user_last_name;\r\n\r\n           //getters and setters methos\r\n       }\r\n\r\nDAO:\r\n\r\n    public static List getUserRecord(User obj){\r\n\t\t\r\n\t\tLogger lo=LoggerFactory.getLogger(&quot;UserDAO.getUserRecord&quot;);\r\n\t\tSession session= Annotationsessionfactory.getAnnotationSession();\r\n\t\tTransaction tx=session.beginTransaction();\r\n\t\t\r\n\t\tlo.debug(&quot;Request for A user Record&quot;);\r\n\t\t//List&lt;User&gt; recList=new ArrayList&lt;User&gt;();\r\n\t\tList recList=null;\r\n\t\ttry{\r\n\t\t\t\r\n\t\t\t//String userRecord=&quot;from User&quot;;\r\n\t\t\tCriteria userList=session.createCriteria(User.class)\r\n\t\t\t\t\t.add(Restrictions.eq(&quot;user_nbk&quot;, obj.getUser_nbk()))\r\n\t\t\t\t\t.add(Restrictions.eq(&quot;user_id&quot;, obj.getUser_id()));\r\n\t\t\t\t\t\r\n\t\t\t\r\n\t\t\t\r\n\t\t\t recList=userList.list();\r\n\t\t\tSystem.out.println(recList.size());\r\n\t\t\t\r\n\t\t}catch (Exception e){\r\n\t\t\t\r\n\t\t\tlo.info(&quot;Exception Occured in UserDAO.getUserRecord&quot;);\r\n\t\t\tlo.debug(&quot;Exception Occured in UserDAO.getUserRecord:&quot;+e);\r\n\t\t\ttx.rollback();\r\n\t\t\t\r\n\t\t}finally{\r\n\t\t\t\r\n\t\t\tsession.close();\r\n\t\t\t\r\n\t\t\tlo.info(&quot;Session Closed in UserDAO.userRecordslist finally block: &quot;);\r\n\t\t}\r\n\t\t\r\n\t\tlo.debug(&quot;Record was sent to the requesting servlet or method: &quot;+ recList);\r\n\t\treturn recList;\r\n\t\t\r\n\t}\r\n\r\nJSP Page\r\n\r\n    &lt;table&gt;\r\n     &lt;tr&gt;\r\n      &lt;td&gt;First Name&lt;/td&gt;\r\n       &lt;td&gt;&lt;input type=&quot;text&quot; id=&quot;firstname&quot; name=&quot;firstname&quot; maxlength=&quot;80&quot; value=&quot;&quot;&gt;${userRecords.user_first_name}&lt;/td&gt;\r\n    &lt;/tr&gt;\r\n     &lt;tr&gt;\r\n     &lt;td&gt;Middle Name&lt;/td&gt;\r\n     &lt;td&gt;&lt;input type=&quot;text&quot; id=&quot;middlename&quot; name=&quot;middlename&quot; maxlength=&quot;80&quot; value=&quot;${userRecords.user_middle_name}&quot;&gt;&lt;/td&gt;\r\n\r\n    .......\r\n\r\nException I get:\r\n\r\n   \r\n\r\n    SEVERE: Servlet.service() for servlet jsp threw exception\r\n    **java.lang.NumberFormatException: For input string: &quot;user_first_name&quot;**\r\n\tat java.lang.NumberFormatException.forInputString(NumberFormatException.java:48)\r\n\tat java.lang.Integer.parseInt(Integer.java:447)\r\n\tat java.lang.Integer.parseInt(Integer.java:497)\r\n\tat javax.el.ListELResolver.coerce(ListELResolver.java:166)\r\n\tat javax.el.ListELResolver.getValue(ListELResolver.java:51)\r\n\tat javax.el.CompositeELResolver.getValue(CompositeELResolver.java:54)\r\n\tat org.apache.el.parser.AstValue.getValue(AstValue.java:123)\r\n\tat org.apache.el.ValueExpressionImpl.getValue(ValueExpressionImpl.java:186)\r\n\tat org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate(PageContextImpl.java:938)\r\n\tat org.apache.jsp.WEB_002dINF.JSP.TableMaintenance.UserNewAdd_jsp._jspService    (UserNewAdd_jsp.java:77)\r\n\tat org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:70)\r\n\tat javax.servlet.http.HttpServlet.service(HttpServlet.java:717)\r\n\tat org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:388)\r\n\tat org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:313)\r\n\tat org.apache.jasper.servlet.JspServlet.service(JspServlet.java:260)\r\n\tat javax.servlet.http.HttpServlet.service(HttpServlet.java:717)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:290)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)\r\n\tat org.apache.catalina.core.ApplicationDispatcher.invoke(ApplicationDispatcher.java:646)\r\n\tat org.apache.catalina.core.ApplicationDispatcher.processRequest(ApplicationDispatcher.java:436)\r\n\tat org.apache.catalina.core.ApplicationDispatcher.doForward(ApplicationDispatcher.java:374)\r\n\tat org.apache.catalina.core.ApplicationDispatcher.forward(ApplicationDispatcher.java:302)\r\n\tat com.servicedbUpdate.UserUpdateDB_NewAdds.doPost(UserUpdateDB_NewAdds.java:79)\r\n\tat javax.servlet.http.HttpServlet.service(HttpServlet.java:637)\r\n\tat javax.servlet.http.HttpServlet.service(HttpServlet.java:717)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:290)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)\r\n\tat org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:233)\r\n\tat org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:191)\r\n\tat org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:127)\r\n\tat org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:103)\r\n\tat org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109)\r\n\tat org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:293)\r\n\tat org.apache.coyote.http11.Http11AprProcessor.process(Http11AprProcessor.java:879)\r\n\tat org.apache.coyote.http11.Http11AprProtocol$Http11ConnectionHandler.process(Http11AprProtocol.java:600)\r\n\tat org.apache.tomcat.util.net.AprEndpoint$Worker.run(AprEndpoint.java:1703)\r\n\tat java.lang.Thread.run(Thread.java:619)\r\n        Feb 13, 2013 10:30:49 AM org.apache.catalina.core.StandardWrapperValve invoke\r\n        SEVERE: Servlet.service() for servlet UserUpdateDB_NewAdds threw exception\r\n           **java.lang.NumberFormatException: For input string: &quot;user_first_name&quot;**\r\n\tat java.lang.NumberFormatException.forInputString(NumberFormatException.java:48)\r\n\tat java.lang.Integer.parseInt(Integer.java:447)\r\n\tat java.lang.Integer.parseInt(Integer.java:497)\r\n\tat javax.el.ListELResolver.coerce(ListELResolver.java:166)\r\n\tat javax.el.ListELResolver.getValue(ListELResolver.java:51)\r\n\tat javax.el.CompositeELResolver.getValue(CompositeELResolver.java:54)\r\n\tat org.apache.el.parser.AstValue.getValue(AstValue.java:123)\r\n\tat org.apache.el.ValueExpressionImpl.getValue(ValueExpressionImpl.java:186)\r\n\tat org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate(PageContextImpl.java:938)\r\n\tat org.apache.jsp.WEB_002dINF.JSP.TableMaintenance.UserNewAdd_jsp._jspService(UserNewAdd_jsp.java:77)\r\n\tat org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:70)\r\n\tat javax.servlet.http.HttpServlet.service(HttpServlet.java:717)\r\n\tat org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:388)\r\n\tat org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:313)\r\n\tat org.apache.jasper.servlet.JspServlet.service(JspServlet.java:260)\r\n\tat javax.servlet.http.HttpServlet.service(HttpServlet.java:717)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:290)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)\r\n\tat org.apache.catalina.core.ApplicationDispatcher.invoke(ApplicationDispatcher.java:646)\r\n\tat org.apache.catalina.core.ApplicationDispatcher.processRequest(ApplicationDispatcher.java:436)\r\n\tat org.apache.catalina.core.ApplicationDispatcher.doForward(ApplicationDispatcher.java:374)\r\n\tat org.apache.catalina.core.ApplicationDispatcher.forward(ApplicationDispatcher.java:302)\r\n\tat com.servicedbUpdate.UserUpdateDB_NewAdds.doPost(UserUpdateDB_NewAdds.java:79)\r\n\tat javax.servlet.http.HttpServlet.service(HttpServlet.java:637)\r\n\tat javax.servlet.http.HttpServlet.service(HttpServlet.java:717)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:290)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)\r\n\tat org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:233)\r\n\tat org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:191)\r\n\tat org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:127)\r\n\tat org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:103)\r\n\tat org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109)\r\n\tat org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:293)\r\n\tat org.apache.coyote.http11.Http11AprProcessor.process(Http11AprProcessor.java:879)\r\n\tat org.apache.coyote.http11.Http11AprProtocol$Http11ConnectionHandler.process(Http11AprProtocol.java:600)\r\n\tat org.apache.tomcat.util.net.AprEndpoint$Worker.run(AprEndpoint.java:1703)\r\n\tat java.lang.Thread.run(Thread.java:619)","title":"java.lang.NumberFormatException: For input string in JSP Page","body":"<p>Hi can someone please help why this is giving an error when trying to display the values in a JSP page. I don't have any number been converted or String been converted to Number, however I get NumberFormatException</p>\n\n<p>my Servlet getting the request to display a user record</p>\n\n<pre><code>if(action.equalsIgnoreCase(\"update\")){\n        System.out.println(\"Came into Update\");\n        userId=(int) Integer.parseInt(request.getParameter(\"userid\"));\n        nbId=request.getParameter(\"nbId\").trim();\n        System.out.println(\"User iD and NBid: \"+ userId + nbId);\n\n        User user=new User();\n        user.setUser_id(userId);\n        user.setUser_nbk(nbId);\n\n\n\n        List userRecords=UserDAO.getUserRecord(user);\n        request.setAttribute(\"userRecords\", userRecords);\n        List owningOrg=Owning_Org_DB.getOwningOrgRecords();\n        request.setAttribute(\"owningOrg\", owningOrg);\n        request.getRequestDispatcher(\"WEB-INF/JSP/TableMaintenance/UserNewAdd.jsp\").forward(request, response);\n</code></pre>\n\n<p>POJO:</p>\n\n<pre><code> @Entity\n @Cache(usage=CacheConcurrencyStrategy.READ_WRITE)\n  public class User {\n\n@Id\nprivate int user_id;\nprivate String user_first_name;\nprivate String user_middle_name;\nprivate String user_last_name;\n\n       //getters and setters methos\n   }\n</code></pre>\n\n<p>DAO:</p>\n\n<pre><code>public static List getUserRecord(User obj){\n\n    Logger lo=LoggerFactory.getLogger(\"UserDAO.getUserRecord\");\n    Session session= Annotationsessionfactory.getAnnotationSession();\n    Transaction tx=session.beginTransaction();\n\n    lo.debug(\"Request for A user Record\");\n    //List&lt;User&gt; recList=new ArrayList&lt;User&gt;();\n    List recList=null;\n    try{\n\n        //String userRecord=\"from User\";\n        Criteria userList=session.createCriteria(User.class)\n                .add(Restrictions.eq(\"user_nbk\", obj.getUser_nbk()))\n                .add(Restrictions.eq(\"user_id\", obj.getUser_id()));\n\n\n\n         recList=userList.list();\n        System.out.println(recList.size());\n\n    }catch (Exception e){\n\n        lo.info(\"Exception Occured in UserDAO.getUserRecord\");\n        lo.debug(\"Exception Occured in UserDAO.getUserRecord:\"+e);\n        tx.rollback();\n\n    }finally{\n\n        session.close();\n\n        lo.info(\"Session Closed in UserDAO.userRecordslist finally block: \");\n    }\n\n    lo.debug(\"Record was sent to the requesting servlet or method: \"+ recList);\n    return recList;\n\n}\n</code></pre>\n\n<p>JSP Page</p>\n\n<pre><code>&lt;table&gt;\n &lt;tr&gt;\n  &lt;td&gt;First Name&lt;/td&gt;\n   &lt;td&gt;&lt;input type=\"text\" id=\"firstname\" name=\"firstname\" maxlength=\"80\" value=\"\"&gt;${userRecords.user_first_name}&lt;/td&gt;\n&lt;/tr&gt;\n &lt;tr&gt;\n &lt;td&gt;Middle Name&lt;/td&gt;\n &lt;td&gt;&lt;input type=\"text\" id=\"middlename\" name=\"middlename\" maxlength=\"80\" value=\"${userRecords.user_middle_name}\"&gt;&lt;/td&gt;\n\n.......\n</code></pre>\n\n<p>Exception I get:</p>\n\n<pre><code>SEVERE: Servlet.service() for servlet jsp threw exception\n**java.lang.NumberFormatException: For input string: \"user_first_name\"**\nat java.lang.NumberFormatException.forInputString(NumberFormatException.java:48)\nat java.lang.Integer.parseInt(Integer.java:447)\nat java.lang.Integer.parseInt(Integer.java:497)\nat javax.el.ListELResolver.coerce(ListELResolver.java:166)\nat javax.el.ListELResolver.getValue(ListELResolver.java:51)\nat javax.el.CompositeELResolver.getValue(CompositeELResolver.java:54)\nat org.apache.el.parser.AstValue.getValue(AstValue.java:123)\nat org.apache.el.ValueExpressionImpl.getValue(ValueExpressionImpl.java:186)\nat org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate(PageContextImpl.java:938)\nat org.apache.jsp.WEB_002dINF.JSP.TableMaintenance.UserNewAdd_jsp._jspService    (UserNewAdd_jsp.java:77)\nat org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:70)\nat javax.servlet.http.HttpServlet.service(HttpServlet.java:717)\nat org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:388)\nat org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:313)\nat org.apache.jasper.servlet.JspServlet.service(JspServlet.java:260)\nat javax.servlet.http.HttpServlet.service(HttpServlet.java:717)\nat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:290)\nat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)\nat org.apache.catalina.core.ApplicationDispatcher.invoke(ApplicationDispatcher.java:646)\nat org.apache.catalina.core.ApplicationDispatcher.processRequest(ApplicationDispatcher.java:436)\nat org.apache.catalina.core.ApplicationDispatcher.doForward(ApplicationDispatcher.java:374)\nat org.apache.catalina.core.ApplicationDispatcher.forward(ApplicationDispatcher.java:302)\nat com.servicedbUpdate.UserUpdateDB_NewAdds.doPost(UserUpdateDB_NewAdds.java:79)\nat javax.servlet.http.HttpServlet.service(HttpServlet.java:637)\nat javax.servlet.http.HttpServlet.service(HttpServlet.java:717)\nat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:290)\nat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)\nat org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:233)\nat org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:191)\nat org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:127)\nat org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:103)\nat org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109)\nat org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:293)\nat org.apache.coyote.http11.Http11AprProcessor.process(Http11AprProcessor.java:879)\nat org.apache.coyote.http11.Http11AprProtocol$Http11ConnectionHandler.process(Http11AprProtocol.java:600)\nat org.apache.tomcat.util.net.AprEndpoint$Worker.run(AprEndpoint.java:1703)\nat java.lang.Thread.run(Thread.java:619)\n    Feb 13, 2013 10:30:49 AM org.apache.catalina.core.StandardWrapperValve invoke\n    SEVERE: Servlet.service() for servlet UserUpdateDB_NewAdds threw exception\n       **java.lang.NumberFormatException: For input string: \"user_first_name\"**\nat java.lang.NumberFormatException.forInputString(NumberFormatException.java:48)\nat java.lang.Integer.parseInt(Integer.java:447)\nat java.lang.Integer.parseInt(Integer.java:497)\nat javax.el.ListELResolver.coerce(ListELResolver.java:166)\nat javax.el.ListELResolver.getValue(ListELResolver.java:51)\nat javax.el.CompositeELResolver.getValue(CompositeELResolver.java:54)\nat org.apache.el.parser.AstValue.getValue(AstValue.java:123)\nat org.apache.el.ValueExpressionImpl.getValue(ValueExpressionImpl.java:186)\nat org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate(PageContextImpl.java:938)\nat org.apache.jsp.WEB_002dINF.JSP.TableMaintenance.UserNewAdd_jsp._jspService(UserNewAdd_jsp.java:77)\nat org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:70)\nat javax.servlet.http.HttpServlet.service(HttpServlet.java:717)\nat org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:388)\nat org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:313)\nat org.apache.jasper.servlet.JspServlet.service(JspServlet.java:260)\nat javax.servlet.http.HttpServlet.service(HttpServlet.java:717)\nat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:290)\nat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)\nat org.apache.catalina.core.ApplicationDispatcher.invoke(ApplicationDispatcher.java:646)\nat org.apache.catalina.core.ApplicationDispatcher.processRequest(ApplicationDispatcher.java:436)\nat org.apache.catalina.core.ApplicationDispatcher.doForward(ApplicationDispatcher.java:374)\nat org.apache.catalina.core.ApplicationDispatcher.forward(ApplicationDispatcher.java:302)\nat com.servicedbUpdate.UserUpdateDB_NewAdds.doPost(UserUpdateDB_NewAdds.java:79)\nat javax.servlet.http.HttpServlet.service(HttpServlet.java:637)\nat javax.servlet.http.HttpServlet.service(HttpServlet.java:717)\nat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:290)\nat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)\nat org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:233)\nat org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:191)\nat org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:127)\nat org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:103)\nat org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109)\nat org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:293)\nat org.apache.coyote.http11.Http11AprProcessor.process(Http11AprProcessor.java:879)\nat org.apache.coyote.http11.Http11AprProtocol$Http11ConnectionHandler.process(Http11AprProtocol.java:600)\nat org.apache.tomcat.util.net.AprEndpoint$Worker.run(AprEndpoint.java:1703)\nat java.lang.Thread.run(Thread.java:619)\n</code></pre>\n"},{"tags":["java","rest","spring-boot"],"comments":[{"owner":{"account_id":285577,"reputation":531,"user_id":584322,"display_name":"systemfreund"},"score":5,"creation_date":1444291673,"post_id":33009918,"comment_id":53843904,"body_markdown":"You need to provide an `Accept` header with the value `application/xml` or with any of the supported media types.","body":"You need to provide an <code>Accept</code> header with the value <code>application&#47;xml</code> or with any of the supported media types."},{"owner":{"account_id":3533861,"reputation":783,"user_id":2952674,"accept_rate":60,"display_name":"Gunnar Kiesel"},"score":2,"creation_date":1476364838,"post_id":33009918,"comment_id":67321277,"body_markdown":"The &quot;Content-Type&quot; header defines which type of content you&#39;re sending - not which you want to receive (that&#39;s what the &quot;Accept&quot; header is for. So using the &quot;Content-Type&quot; header for a GET request doesn&#39;t make sense, since can&#39;t have any (body) content.\nSo in your case you should use the &quot;Accept&quot; header for your request and in the response the &quot;Content-Type&quot; header to name the type of content that is actually send.","body":"The &quot;Content-Type&quot; header defines which type of content you&#39;re sending - not which you want to receive (that&#39;s what the &quot;Accept&quot; header is for. So using the &quot;Content-Type&quot; header for a GET request doesn&#39;t make sense, since can&#39;t have any (body) content. So in your case you should use the &quot;Accept&quot; header for your request and in the response the &quot;Content-Type&quot; header to name the type of content that is actually send."}],"answers":[{"tags":[],"owner":{"account_id":5806757,"reputation":3715,"user_id":4579155,"accept_rate":73,"display_name":"abarisone"},"down_vote_count":1,"up_vote_count":34,"is_accepted":true,"score":33,"last_activity_date":1682873680,"creation_date":1444291543,"answer_id":33010056,"question_id":33009918,"body_markdown":"You can find some hints in the blog post [@RequestMapping with Produces and Consumes][1] at point 6.\r\n\r\nPay attention to the section about Content-Type and Accept headers:\r\n\r\n&gt; @RequestMapping with Produces and Consumes: We can use header\r\n&gt; Content-Type and Accept to find out request contents and what is the\r\n&gt; mime message it wants in response. For clarity, @RequestMapping\r\n&gt; provides produces and consumes variables where we can specify the\r\n&gt; request content-type for which method will be invoked and the response\r\n&gt; content type. For example:\r\n&gt; \r\n&gt;     @RequestMapping(value=&quot;/method6&quot;, produces={&quot;application/json&quot;,&quot;application/xml&quot;}, consumes=&quot;text/html&quot;)\r\n&gt;     @ResponseBody\r\n&gt;     public String method6(){\r\n&gt;         return &quot;method6&quot;;\r\n&gt;     }\r\n&gt; \r\n&gt; Above method can consume message only with Content-Type as text/html\r\n&gt; and is able to produce messages of type application/json and\r\n&gt; application/xml.\r\n\r\nYou can also try [this][2] different approach (using ResponseEntity object) that allows you to find out the incoming message type and produce the corresponding message (also exploiting the @ResponseBody annotation)\r\n\r\n\r\n  [1]: https://www.dineshonjava.com/using-consumes-and-produces-to/\r\n  [2]: http://www.byteslounge.com/tutorials/spring-mvc-requestmapping-consumes-condition-example","title":"Spring boot controller content negotiation","body":"<p>You can find some hints in the blog post <a href=\"https://www.dineshonjava.com/using-consumes-and-produces-to/\" rel=\"nofollow noreferrer\">@RequestMapping with Produces and Consumes</a> at point 6.</p>\n<p>Pay attention to the section about Content-Type and Accept headers:</p>\n<blockquote>\n<p>@RequestMapping with Produces and Consumes: We can use header\nContent-Type and Accept to find out request contents and what is the\nmime message it wants in response. For clarity, @RequestMapping\nprovides produces and consumes variables where we can specify the\nrequest content-type for which method will be invoked and the response\ncontent type. For example:</p>\n<pre><code>@RequestMapping(value=&quot;/method6&quot;, produces={&quot;application/json&quot;,&quot;application/xml&quot;}, consumes=&quot;text/html&quot;)\n@ResponseBody\npublic String method6(){\n    return &quot;method6&quot;;\n}\n</code></pre>\n<p>Above method can consume message only with Content-Type as text/html\nand is able to produce messages of type application/json and\napplication/xml.</p>\n</blockquote>\n<p>You can also try <a href=\"http://www.byteslounge.com/tutorials/spring-mvc-requestmapping-consumes-condition-example\" rel=\"nofollow noreferrer\">this</a> different approach (using ResponseEntity object) that allows you to find out the incoming message type and produce the corresponding message (also exploiting the @ResponseBody annotation)</p>\n"},{"tags":[],"owner":{"account_id":4547534,"reputation":537,"user_id":3693617,"display_name":"Artur Boru≈Ñski"},"down_vote_count":0,"up_vote_count":41,"is_accepted":false,"score":41,"last_activity_date":1512475980,"creation_date":1444293082,"answer_id":33010537,"question_id":33009918,"body_markdown":"You can use [ContentNegotiationConfigurer][1]\r\n\r\nFirstly, you should override the `configureContentNegotiation` method in your configuration class:\r\n\r\n    @Configuration\r\n    @EnableWebMvc\r\n    public class WebConfig extends WebMvcConfigurerAdapter {\r\n\r\n        @Override\r\n        public void configureContentNegotiation(ContentNegotiationConfigurer configurer) {\r\n        configurer.favorPathExtension(false).\r\n                favorParameter(true).\r\n                defaultContentType(MediaType.APPLICATION_JSON).\r\n                mediaType(&quot;xml&quot;, MediaType.APPLICATION_XML);\r\n        }\r\n    }\r\n\r\n\r\n`favorParameter(true)` - enabling favoring path expressions over parameter or accept headers.\r\n\r\n`defaultContentType(MediaType.APPLICATION_JSON)` - sets the default content type. this means that if you don&#39;t pass a path expression then Spring will generate JSON as response.\r\n\r\n`mediaType(&quot;xml&quot;, MediaType.APPLICATION_XML)` - sets the path expression key for XML.\r\n\r\nNow if you declare your Controller like:\r\n\r\n    @Controller\r\n    class AccountController {\r\n\r\n        @RequestMapping(value=&quot;/accounts&quot;, method=RequestMethod.GET)\r\n        @ResponseStatus(HttpStatus.OK)\r\n        public @ResponseBody List&lt;Account&gt; list(Model model, Principal principal) {\r\n            return accountManager.getAccounts(principal) );\r\n        }\r\n    }\r\n\r\nand call it something like `localhost:8080/app/accounts.json`, then Spring will generate JSON as response. So if you call `localhost:8080/app/accounts.xml` you will receive XML response\r\n\r\nYou can find more info about this [here][2].\r\n\r\n\r\n  [1]: http://docs.spring.io/spring/docs/current/javadoc-api/org/springframework/web/servlet/config/annotation/ContentNegotiationConfigurer.html\r\n  [2]: https://spring.io/blog/2013/05/11/content-negotiation-using-spring-mvc","title":"Spring boot controller content negotiation","body":"<p>You can use <a href=\"http://docs.spring.io/spring/docs/current/javadoc-api/org/springframework/web/servlet/config/annotation/ContentNegotiationConfigurer.html\" rel=\"noreferrer\">ContentNegotiationConfigurer</a></p>\n\n<p>Firstly, you should override the <code>configureContentNegotiation</code> method in your configuration class:</p>\n\n<pre><code>@Configuration\n@EnableWebMvc\npublic class WebConfig extends WebMvcConfigurerAdapter {\n\n    @Override\n    public void configureContentNegotiation(ContentNegotiationConfigurer configurer) {\n    configurer.favorPathExtension(false).\n            favorParameter(true).\n            defaultContentType(MediaType.APPLICATION_JSON).\n            mediaType(\"xml\", MediaType.APPLICATION_XML);\n    }\n}\n</code></pre>\n\n<p><code>favorParameter(true)</code> - enabling favoring path expressions over parameter or accept headers.</p>\n\n<p><code>defaultContentType(MediaType.APPLICATION_JSON)</code> - sets the default content type. this means that if you don't pass a path expression then Spring will generate JSON as response.</p>\n\n<p><code>mediaType(\"xml\", MediaType.APPLICATION_XML)</code> - sets the path expression key for XML.</p>\n\n<p>Now if you declare your Controller like:</p>\n\n<pre><code>@Controller\nclass AccountController {\n\n    @RequestMapping(value=\"/accounts\", method=RequestMethod.GET)\n    @ResponseStatus(HttpStatus.OK)\n    public @ResponseBody List&lt;Account&gt; list(Model model, Principal principal) {\n        return accountManager.getAccounts(principal) );\n    }\n}\n</code></pre>\n\n<p>and call it something like <code>localhost:8080/app/accounts.json</code>, then Spring will generate JSON as response. So if you call <code>localhost:8080/app/accounts.xml</code> you will receive XML response</p>\n\n<p>You can find more info about this <a href=\"https://spring.io/blog/2013/05/11/content-negotiation-using-spring-mvc\" rel=\"noreferrer\">here</a>.</p>\n"},{"tags":[],"owner":{"account_id":1684739,"reputation":640,"user_id":1548249,"display_name":"lars"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1662974377,"creation_date":1662974377,"answer_id":73687023,"question_id":33009918,"body_markdown":"Side note: In Spring Boot 2.6 and later, the path file extension strategy (e.g. `/resource.xml`) for content negotiation is deprecated, and so it might not be future proof to depend on it for new applications. The format parameter strategy (e.g. `/resource?format=xml`) also seems to be disabled by default. To enable the format parameter strategy, add a configuration class:\r\n\r\n```java\r\n@Configuration\r\n@EnableWebMvc\r\npublic class WebConfig\r\n  implements WebMvcConfigurer\r\n{\r\n  @Override\r\n  public void configureContentNegotiation( ContentNegotiationConfigurer configurer )\r\n  {\r\n    configurer\r\n      .favorParameter( true );\r\n  }\r\n}\r\n```\r\n\r\nAlso note that since Java 8, the `WebMvcConfigurer` interface has default methods and configuration classes can implement it directly without subclassing `WebMvcConfigurerAdapter`.","title":"Spring boot controller content negotiation","body":"<p>Side note: In Spring Boot 2.6 and later, the path file extension strategy (e.g. <code>/resource.xml</code>) for content negotiation is deprecated, and so it might not be future proof to depend on it for new applications. The format parameter strategy (e.g. <code>/resource?format=xml</code>) also seems to be disabled by default. To enable the format parameter strategy, add a configuration class:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Configuration\n@EnableWebMvc\npublic class WebConfig\n  implements WebMvcConfigurer\n{\n  @Override\n  public void configureContentNegotiation( ContentNegotiationConfigurer configurer )\n  {\n    configurer\n      .favorParameter( true );\n  }\n}\n</code></pre>\n<p>Also note that since Java 8, the <code>WebMvcConfigurer</code> interface has default methods and configuration classes can implement it directly without subclassing <code>WebMvcConfigurerAdapter</code>.</p>\n"}],"owner":{"account_id":1314915,"reputation":7683,"user_id":1262024,"accept_rate":88,"display_name":"Smajl"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":129343,"favorite_count":0,"down_vote_count":0,"up_vote_count":27,"accepted_answer_id":33010056,"answer_count":3,"score":27,"last_activity_date":1682873680,"creation_date":1444291166,"question_id":33009918,"body_markdown":"I have a simple REST controller written in a Spring-boot application but I am not sure how to implement the content negotiation to make it return JSON or XML based on the Content-Type parameter in the request header. Could someone explain to me, what am I doing wrong?\r\n\r\nController method:\r\n\r\n    @RequestMapping(value = &quot;/message&quot;, method = RequestMethod.GET, produces = { MediaType.APPLICATION_JSON_VALUE, MediaType.APPLICATION_XML_VALUE })\r\n      public Message getMessageXML(@RequestParam(&quot;text&quot;) String text) throws Exception {\r\n        Message message = new Message();\r\n        message.setDate(new Date());\r\n        message.setName(&quot;Test&quot;);\r\n        message.setAge(99);\r\n        message.setMessage(text);\r\n    \r\n        return message;\r\n      }\r\n\r\nI always get JSON when calling this method (even if I specify the `Content-Type` to be `application/xml` or `text/xml`).\r\n\r\nWhen I implement two methods each with different mapping and different content type, I am able to get XML from the xml one but it does not work if I specify two mediaTypes in a single method (like the provided example).\r\n\r\nWhat I would like is to call the `\\message` endpoint and receive\r\n\r\n - XML when the Content-Type of the GET request is set to application/xml\r\n - JSON when the Content-Type is application/json\r\n\r\nAny help is appreciated.\r\n\r\nEDIT:\r\nI updated my controller to accept all media types\r\n\r\n    @RequestMapping(value = &quot;/message&quot;, method = RequestMethod.GET, produces = { MediaType.APPLICATION_JSON_VALUE, MediaType.APPLICATION_XML_VALUE }, consumes = MediaType.ALL_VALUE)\r\n      public Message getMessageXML(@RequestParam(&quot;text&quot;) String text) throws Exception {\r\n        Message message = new Message();\r\n        message.setDate(new Date());\r\n        message.setName(&quot;Vladimir&quot;);\r\n        message.setAge(35);\r\n        message.setMessage(text);\r\n    \r\n        return message;\r\n      }","title":"Spring boot controller content negotiation","body":"<p>I have a simple REST controller written in a Spring-boot application but I am not sure how to implement the content negotiation to make it return JSON or XML based on the Content-Type parameter in the request header. Could someone explain to me, what am I doing wrong?</p>\n\n<p>Controller method:</p>\n\n<pre><code>@RequestMapping(value = \"/message\", method = RequestMethod.GET, produces = { MediaType.APPLICATION_JSON_VALUE, MediaType.APPLICATION_XML_VALUE })\n  public Message getMessageXML(@RequestParam(\"text\") String text) throws Exception {\n    Message message = new Message();\n    message.setDate(new Date());\n    message.setName(\"Test\");\n    message.setAge(99);\n    message.setMessage(text);\n\n    return message;\n  }\n</code></pre>\n\n<p>I always get JSON when calling this method (even if I specify the <code>Content-Type</code> to be <code>application/xml</code> or <code>text/xml</code>).</p>\n\n<p>When I implement two methods each with different mapping and different content type, I am able to get XML from the xml one but it does not work if I specify two mediaTypes in a single method (like the provided example).</p>\n\n<p>What I would like is to call the <code>\\message</code> endpoint and receive</p>\n\n<ul>\n<li>XML when the Content-Type of the GET request is set to application/xml</li>\n<li>JSON when the Content-Type is application/json</li>\n</ul>\n\n<p>Any help is appreciated.</p>\n\n<p>EDIT:\nI updated my controller to accept all media types</p>\n\n<pre><code>@RequestMapping(value = \"/message\", method = RequestMethod.GET, produces = { MediaType.APPLICATION_JSON_VALUE, MediaType.APPLICATION_XML_VALUE }, consumes = MediaType.ALL_VALUE)\n  public Message getMessageXML(@RequestParam(\"text\") String text) throws Exception {\n    Message message = new Message();\n    message.setDate(new Date());\n    message.setName(\"Vladimir\");\n    message.setAge(35);\n    message.setMessage(text);\n\n    return message;\n  }\n</code></pre>\n"},{"tags":["java","rest","performance-testing","load-testing","siege"],"answers":[{"tags":[],"owner":{"account_id":255395,"reputation":414,"user_id":535422,"accept_rate":71,"display_name":"Yugal"},"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1494915336,"creation_date":1494915336,"answer_id":43993747,"question_id":43993422,"body_markdown":"You can use **Jmeter** for testing JWT Secured Rest API.\r\n\r\nYou can include jwt token in &quot;HTTP Header Manager&quot; along with the request.\r\n\r\nRefer:http://jmeter.apache.org/usermanual/build-adv-web-test-plan.html#header_manager\r\n","title":"How to do load testing for JWT Secured Rest API","body":"<p>You can use <strong>Jmeter</strong> for testing JWT Secured Rest API.</p>\n\n<p>You can include jwt token in \"HTTP Header Manager\" along with the request.</p>\n\n<p>Refer:<a href=\"http://jmeter.apache.org/usermanual/build-adv-web-test-plan.html#header_manager\" rel=\"nofollow noreferrer\">http://jmeter.apache.org/usermanual/build-adv-web-test-plan.html#header_manager</a></p>\n"},{"tags":[],"owner":{"account_id":3460456,"reputation":162728,"user_id":2897748,"display_name":"Dmitri T"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1494925661,"creation_date":1494924638,"answer_id":43996652,"question_id":43993422,"body_markdown":"I would suggest the following config:\r\n \r\n 1. Put [jjwt jar][1] along with dependencies ([jackson-databind][2]) under [JMeter Classpath][3] (just drop the jars in &quot;lib&quot; folder of your JMeter installation and restart JMeter to pick them up)\r\n 2. Add [HTTP Request][4] sampler and configure it to send your API request. \r\n 3. Add [HTTP Header Manager][5] as a child of the HTTP Request sampler.\r\n 4. Add [JSR223 PreProcessor][6] as a child of the HTTP Request sampler.\r\n 5. Put the following code into JSR223 PreProcessor &quot;Script&quot; area:\r\n\r\n        import io.jsonwebtoken.Jwts\r\n        import io.jsonwebtoken.SignatureAlgorithm\r\n        import io.jsonwebtoken.impl.crypto.MacProvider\r\n        import org.apache.jmeter.protocol.http.control.Header\r\n        import java.security.Key\r\n\r\n\r\n        def key = MacProvider.generateKey();\r\n\r\n        def compactJws = Jwts.builder()\r\n            .setSubject(&#39;Joe&#39;)\r\n            .signWith(SignatureAlgorithm.HS512, key)\r\n            .compact()\r\n\r\n        sampler.getHeaderManager().add(new Header(&#39;Authorization&#39;, &#39;Bearer &#39; + compactJws)) \r\n\r\n\r\nThe above code will generate a [JSON Web Token][7] that will have the [registered claim][8] sub (subject) set to `Joe` and adding the `Authorization` header with the value of `Bearer %generated token string%` to the HTTP Request. \r\n\r\nYou will need to amend the code according to your needs, but the concept should be the same. Reach out to your application developers for assistance if required. \r\n\r\nReferences:\r\n\r\n - [Java JWT: JSON Web Token for Java and Android][9]\r\n - [Groovy is the New Black][10]\r\n\r\n\r\n  [1]: https://mvnrepository.com/artifact/io.jsonwebtoken/jjwt\r\n  [2]: https://mvnrepository.com/artifact/com.fasterxml.jackson.core/jackson-databind\r\n  [3]: http://jmeter.apache.org/usermanual/get-started.html#classpath\r\n  [4]: http://jmeter.apache.org/usermanual/component_reference.html#HTTP_Request\r\n  [5]: http://jmeter.apache.org/usermanual/component_reference.html#HTTP_Header_Manager\r\n  [6]: http://jmeter.apache.org/usermanual/component_reference.html#JSR223_PreProcessor\r\n  [7]: https://jwt.io/\r\n  [8]: https://www.rfc-editor.org/rfc/rfc7519#section-4.1\r\n  [9]: https://github.com/jwtk/jjwt\r\n  [10]: https://www.blazemeter.com/blog/groovy-new-black","title":"How to do load testing for JWT Secured Rest API","body":"<p>I would suggest the following config:</p>\n<ol>\n<li><p>Put <a href=\"https://mvnrepository.com/artifact/io.jsonwebtoken/jjwt\" rel=\"nofollow noreferrer\">jjwt jar</a> along with dependencies (<a href=\"https://mvnrepository.com/artifact/com.fasterxml.jackson.core/jackson-databind\" rel=\"nofollow noreferrer\">jackson-databind</a>) under <a href=\"http://jmeter.apache.org/usermanual/get-started.html#classpath\" rel=\"nofollow noreferrer\">JMeter Classpath</a> (just drop the jars in &quot;lib&quot; folder of your JMeter installation and restart JMeter to pick them up)</p>\n</li>\n<li><p>Add <a href=\"http://jmeter.apache.org/usermanual/component_reference.html#HTTP_Request\" rel=\"nofollow noreferrer\">HTTP Request</a> sampler and configure it to send your API request.</p>\n</li>\n<li><p>Add <a href=\"http://jmeter.apache.org/usermanual/component_reference.html#HTTP_Header_Manager\" rel=\"nofollow noreferrer\">HTTP Header Manager</a> as a child of the HTTP Request sampler.</p>\n</li>\n<li><p>Add <a href=\"http://jmeter.apache.org/usermanual/component_reference.html#JSR223_PreProcessor\" rel=\"nofollow noreferrer\">JSR223 PreProcessor</a> as a child of the HTTP Request sampler.</p>\n</li>\n<li><p>Put the following code into JSR223 PreProcessor &quot;Script&quot; area:</p>\n<pre><code>import io.jsonwebtoken.Jwts\nimport io.jsonwebtoken.SignatureAlgorithm\nimport io.jsonwebtoken.impl.crypto.MacProvider\nimport org.apache.jmeter.protocol.http.control.Header\nimport java.security.Key\n\n\ndef key = MacProvider.generateKey();\n\ndef compactJws = Jwts.builder()\n    .setSubject('Joe')\n    .signWith(SignatureAlgorithm.HS512, key)\n    .compact()\n\nsampler.getHeaderManager().add(new Header('Authorization', 'Bearer ' + compactJws)) \n</code></pre>\n</li>\n</ol>\n<p>The above code will generate a <a href=\"https://jwt.io/\" rel=\"nofollow noreferrer\">JSON Web Token</a> that will have the <a href=\"https://www.rfc-editor.org/rfc/rfc7519#section-4.1\" rel=\"nofollow noreferrer\">registered claim</a> sub (subject) set to <code>Joe</code> and adding the <code>Authorization</code> header with the value of <code>Bearer %generated token string%</code> to the HTTP Request.</p>\n<p>You will need to amend the code according to your needs, but the concept should be the same. Reach out to your application developers for assistance if required.</p>\n<p>References:</p>\n<ul>\n<li><a href=\"https://github.com/jwtk/jjwt\" rel=\"nofollow noreferrer\">Java JWT: JSON Web Token for Java and Android</a></li>\n<li><a href=\"https://www.blazemeter.com/blog/groovy-new-black\" rel=\"nofollow noreferrer\">Groovy is the New Black</a></li>\n</ul>\n"},{"tags":[],"owner":{"account_id":28438101,"reputation":1,"user_id":21757890,"display_name":"Dom"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1682873654,"creation_date":1682622734,"answer_id":76123889,"question_id":43993422,"body_markdown":"I would suggest [Gopayloader][1]. It&#39;s an HTTP load tester written in Go and can achieve around 50k RPS with JWTS. \r\n\r\nIt generates custom JWTs by providing it a private key to sign the JWT i.e.\r\n\r\n```shell\r\n./gopayloader run http://localhost:8081 -c 150 -r 1000000 --jwt-header &quot;my-jwt&quot; --jwt-key ./private-key.pem --jwt-kid 3434645743124 --jwt-sub &quot;my-subject&quot; --jwt-aud &quot;some-audience&quot; --jwt-iss &quot;some-issuer&quot;\r\n```\r\n\r\nWould generate a JWT body like:\r\n\r\n```json\r\n{\r\n  &quot;aud&quot;: &quot;some-audience&quot;,\r\n  &quot;exp&quot;: 1714130039,\r\n  &quot;iss&quot;: &quot;some-issuer&quot;,\r\n  &quot;jti&quot;: &quot;05181473-bbd6-4d21-8942-d86c2e972b2b&quot;,\r\n  &quot;sub&quot;: &quot;my-subject&quot;\r\n}\r\n```\r\n\r\nWith header:\r\n\r\n```json\r\n{\r\n  &quot;alg&quot;: &quot;ES256&quot;,\r\n  &quot;kid&quot;: &quot;3434645743124&quot;,\r\n  &quot;typ&quot;: &quot;JWT&quot;\r\n}\r\n```\r\n\r\nIt pre-generates the JWTs and saves them to disk before running the test to keep a low in-memory footprint and to achieve a high RPS as CPU cycles are dedicated to sending requests and not generating JWTS. Each JWT is unique as has it&#39;s own `jti` i.e.\r\n\r\n`&quot;jti&quot; : &quot;8f2d1472-084c-4662-ae74-04e0f1de4993&quot;`\r\n\r\nThis can be useful as some JWT authenticated services will not allow the reuse of the same JWT as it should only be used once to prevent replay attacks, see: https://www.rfc-editor.org/rfc/rfc7519#section-4.1.7.\r\n\r\n\r\n  [1]: https://github.com/domsolutions/gopayloader","title":"How to do load testing for JWT Secured Rest API","body":"<p>I would suggest <a href=\"https://github.com/domsolutions/gopayloader\" rel=\"nofollow noreferrer\">Gopayloader</a>. It's an HTTP load tester written in Go and can achieve around 50k RPS with JWTS.</p>\n<p>It generates custom JWTs by providing it a private key to sign the JWT i.e.</p>\n<pre class=\"lang-bash prettyprint-override\"><code>./gopayloader run http://localhost:8081 -c 150 -r 1000000 --jwt-header &quot;my-jwt&quot; --jwt-key ./private-key.pem --jwt-kid 3434645743124 --jwt-sub &quot;my-subject&quot; --jwt-aud &quot;some-audience&quot; --jwt-iss &quot;some-issuer&quot;\n</code></pre>\n<p>Would generate a JWT body like:</p>\n<pre class=\"lang-json prettyprint-override\"><code>{\n  &quot;aud&quot;: &quot;some-audience&quot;,\n  &quot;exp&quot;: 1714130039,\n  &quot;iss&quot;: &quot;some-issuer&quot;,\n  &quot;jti&quot;: &quot;05181473-bbd6-4d21-8942-d86c2e972b2b&quot;,\n  &quot;sub&quot;: &quot;my-subject&quot;\n}\n</code></pre>\n<p>With header:</p>\n<pre class=\"lang-json prettyprint-override\"><code>{\n  &quot;alg&quot;: &quot;ES256&quot;,\n  &quot;kid&quot;: &quot;3434645743124&quot;,\n  &quot;typ&quot;: &quot;JWT&quot;\n}\n</code></pre>\n<p>It pre-generates the JWTs and saves them to disk before running the test to keep a low in-memory footprint and to achieve a high RPS as CPU cycles are dedicated to sending requests and not generating JWTS. Each JWT is unique as has it's own <code>jti</code> i.e.</p>\n<p><code>&quot;jti&quot; : &quot;8f2d1472-084c-4662-ae74-04e0f1de4993&quot;</code></p>\n<p>This can be useful as some JWT authenticated services will not allow the reuse of the same JWT as it should only be used once to prevent replay attacks, see: <a href=\"https://www.rfc-editor.org/rfc/rfc7519#section-4.1.7\" rel=\"nofollow noreferrer\">https://www.rfc-editor.org/rfc/rfc7519#section-4.1.7</a>.</p>\n"}],"owner":{"account_id":10784878,"reputation":2692,"user_id":7934206,"accept_rate":77,"display_name":"Ricky"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":4188,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":43993747,"answer_count":3,"score":2,"last_activity_date":1682873654,"creation_date":1494913883,"question_id":43993422,"body_markdown":"I am developing a REST API (HTTPS) with Spring and now need to load test to 1000 concurrent users.The problem is I used siege to load test but it cannot test over the jwt token header.Which is the best way to perform load test in my scenario?","title":"How to do load testing for JWT Secured Rest API","body":"<p>I am developing a REST API (HTTPS) with Spring and now need to load test to 1000 concurrent users.The problem is I used siege to load test but it cannot test over the jwt token header.Which is the best way to perform load test in my scenario?</p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":17873261,"reputation":81,"user_id":12983985,"display_name":"avihaiB"},"score":1,"creation_date":1682851645,"post_id":76140821,"comment_id":134277312,"body_markdown":"initialize it with : BankaHesap newAcc = null;","body":"initialize it with : BankaHesap newAcc = null;"},{"owner":{"account_id":108033,"reputation":17201,"user_id":286934,"display_name":"Progman"},"score":0,"creation_date":1682858045,"post_id":76140821,"comment_id":134278070,"body_markdown":"Does this answer your question? [Variable might not have been initialized error](https://stackoverflow.com/questions/2448843/variable-might-not-have-been-initialized-error)","body":"Does this answer your question? <a href=\"https://stackoverflow.com/questions/2448843/variable-might-not-have-been-initialized-error\">Variable might not have been initialized error</a>"}],"answers":[{"tags":[],"owner":{"account_id":404649,"reputation":57172,"user_id":773113,"accept_rate":72,"display_name":"Mike Nakis"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1682851707,"creation_date":1682851707,"answer_id":76140837,"question_id":76140821,"body_markdown":"In your ***inner*** `switch` statement you must add a `default` clause which either throws an exception or initializes `newAcc` with some value so that there is no execution path that will lead to `newAcc` being uninitialized at the end of the `switch` statement.\r\n\r\nSo, it could be:\r\n\r\n    default:\r\n        throw new IllegalArgumentException( &quot;hesapTuru was neither &#39;Maa≈ü&#39; nor &#39;Normal&#39;&quot; );\r\n\r\nor:\r\n\r\n    default:\r\n        newAcc = null;\r\n        break;\r\n    }\r\n    if( newAcc != null )\r\n        hesaplar.add(newAcc);\r\n\r\n","title":"The local variable newAcc may not have been initialized","body":"<p>In your <em><strong>inner</strong></em> <code>switch</code> statement you must add a <code>default</code> clause which either throws an exception or initializes <code>newAcc</code> with some value so that there is no execution path that will lead to <code>newAcc</code> being uninitialized at the end of the <code>switch</code> statement.</p>\n<p>So, it could be:</p>\n<pre><code>default:\n    throw new IllegalArgumentException( &quot;hesapTuru was neither 'Maa≈ü' nor 'Normal'&quot; );\n</code></pre>\n<p>or:</p>\n<pre><code>default:\n    newAcc = null;\n    break;\n}\nif( newAcc != null )\n    hesaplar.add(newAcc);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":26306805,"reputation":26,"user_id":19971119,"display_name":"Nurma"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1682852614,"creation_date":1682852614,"answer_id":76140894,"question_id":76140821,"body_markdown":"As Mike Nakis suggested, you can add a statement that initializes newAcc in the default case of the switch statement. Alternatively, you can initialize the newAcc variable with a default value of null when you declare it:\r\n`BankaHesap newAcc = null;`\r\n\r\nHowever, initializing newAcc to null can lead to a null pointer exception (NPE) if you forget to assign a value to it later. By handling the default case explicitly and assigning a value to newAcc, you can better manage the logic of your application and avoid unexpected errors or behavior. Therefore, Mike&#39;s solution of handling the default case explicitly is better because it avoids the possibility of a null pointer exception and gives you more control over your application logic.","title":"The local variable newAcc may not have been initialized","body":"<p>As Mike Nakis suggested, you can add a statement that initializes newAcc in the default case of the switch statement. Alternatively, you can initialize the newAcc variable with a default value of null when you declare it:\n<code>BankaHesap newAcc = null;</code></p>\n<p>However, initializing newAcc to null can lead to a null pointer exception (NPE) if you forget to assign a value to it later. By handling the default case explicitly and assigning a value to newAcc, you can better manage the logic of your application and avoid unexpected errors or behavior. Therefore, Mike's solution of handling the default case explicitly is better because it avoids the possibility of a null pointer exception and gives you more control over your application logic.</p>\n"}],"owner":{"account_id":28462620,"reputation":1,"user_id":21779135,"display_name":"Aytgg"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":50,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":2,"score":-1,"last_activity_date":1682873197,"creation_date":1682851499,"question_id":76140821,"body_markdown":"```java\r\npublic void addAccount(int tcNo, int musteriNo, String name, String surname) {\r\n    System.out.println(&quot;Choose an account type:&quot;);\r\n    System.out.println(&quot;1. Deposit Acc&quot;);\r\n    System.out.println(&quot;2. Normal Acc&quot;);\r\n    System.out.println(&quot;3. Saving Acc&quot;);\r\n\r\n    Scanner getInput = new Scanner(System.in);\r\n\r\n    int accountType = getInput.nextInt();\r\n\r\n    getInput.close();\r\n\r\n    String hesapTuru = hesaplar.get(0).get_hesapTuru();\r\n\r\n    BankaHesap newAcc;\r\n\r\n    switch (accountType) {\r\n        case 1: // Vadeli hesabƒ±nƒ±n a&#231;ƒ±lmasƒ±\r\n            System.out.println(&quot;Vadeli hesap i&#231;in ba≈ülangƒ±&#231; miktarƒ±nƒ± giriniz:&quot;);\r\n            double vadeliBakiye = getInput.nextDouble();    /* Vadeli hesabƒ±n ba≈ülangƒ±&#231; miktarƒ± kullanƒ±cƒ±dan alƒ±nƒ±r. */\r\n\r\n            switch (hesapTuru) {\r\n                case &quot;Maa≈ü&quot;:\r\n                    newAcc = new VadeliHesap(hesapTuru, vadeliBakiye, 0.20f);\r\n                    break;\r\n                case &quot;Normal&quot;:\r\n                    newAcc = new VadeliHesap(hesapTuru, vadeliBakiye, 0.10f);\r\n                    break;\r\n            }\r\n\r\n            hesaplar.add(newAcc);\r\n            break;\r\n        case 2: // Vadesiz hesabƒ±nƒ±n a&#231;ƒ±lmasƒ±\r\n            System.out.println(&quot;Vadesiz hesap i&#231;in ba≈ülangƒ±&#231; miktarƒ±nƒ± giriniz:&quot;);\r\n            double vadesizBakiye = getInput.nextDouble();    /* Vadesiz hesabƒ±n ba≈ülangƒ±&#231; miktarƒ± kullanƒ±cƒ±dan alƒ±nƒ±r. */\r\n\r\n            switch (hesapTuru) {\r\n                case &quot;Maa≈ü&quot;:\r\n                    newAcc = new VadesizHesap(hesapTuru, vadesizBakiye, 0);\r\n                    break;\r\n                case &quot;Normal&quot;:\r\n                    newAcc  = new VadesizHesap(hesapTuru, vadesizBakiye, 8);\r\n                    break;\r\n            }\r\n\r\n            hesaplar.add(newAcc);\r\n            break;\r\n        case 3: // Yatƒ±rƒ±m hesabƒ±nƒ±n a&#231;ƒ±lmasƒ±\r\n            System.out.println(&quot;Yatƒ±rƒ±m hesabƒ± i&#231;in ba≈ülangƒ±&#231; miktarƒ±nƒ± giriniz:&quot;);\r\n            double yatirimBakiye = getInput.nextDouble();    /* Yatƒ±rƒ±m hesabƒ±nƒ±n ba≈ülangƒ±&#231; miktarƒ± kullanƒ±cƒ±dan alƒ±nƒ±r. */\r\n\r\n            System.out.println(&quot;Ni&#231;in yatƒ±rƒ±m yapacaƒüƒ±nƒ±zƒ± giriniz:&quot;);\r\n            String yatirimTuru = getInput.next();   /* Yatƒ±rƒ±m hesabƒ±nƒ±n t&#252;r&#252; kullanƒ±cƒ±dan alƒ±nƒ±r. */\r\n\r\n            newAcc = new YatirimHesabi(hesapTuru, yatirimBakiye, yatirimTuru, 1); /* Yatƒ±rƒ±m hesabƒ± a&#231;ƒ±lƒ±r. */\r\n            hesaplar.add(newAcc);\r\n            break;\r\n        default:\r\n            System.out.println(&quot;Hatalƒ± se&#231;im yaptƒ±nƒ±z.&quot;);\r\n    }\r\n}\r\n```\r\n\r\n\r\nI&#39;m getting &quot;The local variable newAcc may not have been initialized&quot; error. What should I do for it?\r\n\r\nIt&#39;s a banking app (java). This code block is in `Customer` class in `Customer.java` file.","title":"The local variable newAcc may not have been initialized","body":"<pre class=\"lang-java prettyprint-override\"><code>public void addAccount(int tcNo, int musteriNo, String name, String surname) {\n    System.out.println(&quot;Choose an account type:&quot;);\n    System.out.println(&quot;1. Deposit Acc&quot;);\n    System.out.println(&quot;2. Normal Acc&quot;);\n    System.out.println(&quot;3. Saving Acc&quot;);\n\n    Scanner getInput = new Scanner(System.in);\n\n    int accountType = getInput.nextInt();\n\n    getInput.close();\n\n    String hesapTuru = hesaplar.get(0).get_hesapTuru();\n\n    BankaHesap newAcc;\n\n    switch (accountType) {\n        case 1: // Vadeli hesabƒ±nƒ±n a√ßƒ±lmasƒ±\n            System.out.println(&quot;Vadeli hesap i√ßin ba≈ülangƒ±√ß miktarƒ±nƒ± giriniz:&quot;);\n            double vadeliBakiye = getInput.nextDouble();    /* Vadeli hesabƒ±n ba≈ülangƒ±√ß miktarƒ± kullanƒ±cƒ±dan alƒ±nƒ±r. */\n\n            switch (hesapTuru) {\n                case &quot;Maa≈ü&quot;:\n                    newAcc = new VadeliHesap(hesapTuru, vadeliBakiye, 0.20f);\n                    break;\n                case &quot;Normal&quot;:\n                    newAcc = new VadeliHesap(hesapTuru, vadeliBakiye, 0.10f);\n                    break;\n            }\n\n            hesaplar.add(newAcc);\n            break;\n        case 2: // Vadesiz hesabƒ±nƒ±n a√ßƒ±lmasƒ±\n            System.out.println(&quot;Vadesiz hesap i√ßin ba≈ülangƒ±√ß miktarƒ±nƒ± giriniz:&quot;);\n            double vadesizBakiye = getInput.nextDouble();    /* Vadesiz hesabƒ±n ba≈ülangƒ±√ß miktarƒ± kullanƒ±cƒ±dan alƒ±nƒ±r. */\n\n            switch (hesapTuru) {\n                case &quot;Maa≈ü&quot;:\n                    newAcc = new VadesizHesap(hesapTuru, vadesizBakiye, 0);\n                    break;\n                case &quot;Normal&quot;:\n                    newAcc  = new VadesizHesap(hesapTuru, vadesizBakiye, 8);\n                    break;\n            }\n\n            hesaplar.add(newAcc);\n            break;\n        case 3: // Yatƒ±rƒ±m hesabƒ±nƒ±n a√ßƒ±lmasƒ±\n            System.out.println(&quot;Yatƒ±rƒ±m hesabƒ± i√ßin ba≈ülangƒ±√ß miktarƒ±nƒ± giriniz:&quot;);\n            double yatirimBakiye = getInput.nextDouble();    /* Yatƒ±rƒ±m hesabƒ±nƒ±n ba≈ülangƒ±√ß miktarƒ± kullanƒ±cƒ±dan alƒ±nƒ±r. */\n\n            System.out.println(&quot;Ni√ßin yatƒ±rƒ±m yapacaƒüƒ±nƒ±zƒ± giriniz:&quot;);\n            String yatirimTuru = getInput.next();   /* Yatƒ±rƒ±m hesabƒ±nƒ±n t√ºr√º kullanƒ±cƒ±dan alƒ±nƒ±r. */\n\n            newAcc = new YatirimHesabi(hesapTuru, yatirimBakiye, yatirimTuru, 1); /* Yatƒ±rƒ±m hesabƒ± a√ßƒ±lƒ±r. */\n            hesaplar.add(newAcc);\n            break;\n        default:\n            System.out.println(&quot;Hatalƒ± se√ßim yaptƒ±nƒ±z.&quot;);\n    }\n}\n</code></pre>\n<p>I'm getting &quot;The local variable newAcc may not have been initialized&quot; error. What should I do for it?</p>\n<p>It's a banking app (java). This code block is in <code>Customer</code> class in <code>Customer.java</code> file.</p>\n"},{"tags":["java","android","android-studio"],"comments":[{"owner":{"account_id":14106170,"reputation":791,"user_id":10340976,"display_name":"Raza"},"score":0,"creation_date":1594705635,"post_id":62888653,"comment_id":111210649,"body_markdown":"generalize the initialization and loading unified ad. while initialization , you should consider passing the framelayout which is the container of the ad and AD layout. that would help you to call native ad as many time as you want.","body":"generalize the initialization and loading unified ad. while initialization , you should consider passing the framelayout which is the container of the ad and AD layout. that would help you to call native ad as many time as you want."},{"owner":{"account_id":18863964,"reputation":13,"user_id":13760106,"display_name":"jon nester"},"score":0,"creation_date":1594707020,"post_id":62888653,"comment_id":111211101,"body_markdown":"can you show a code example","body":"can you show a code example"},{"owner":{"account_id":10949547,"reputation":489,"user_id":8046317,"accept_rate":83,"display_name":"Fisher"},"score":0,"creation_date":1625667226,"post_id":62888653,"comment_id":120688535,"body_markdown":"Can you still use UnifiedNativeAd?\nIt looks replaced by NativeAd in Mobile Ads SDK (Android) v20 as this link \nhttps://developers.google.com/admob/android/migration","body":"Can you still use UnifiedNativeAd? It looks replaced by NativeAd in Mobile Ads SDK (Android) v20 as this link  <a href=\"https://developers.google.com/admob/android/migration\" rel=\"nofollow noreferrer\">developers.google.com/admob/android/migration</a>"}],"answers":[{"tags":[],"owner":{"account_id":14106170,"reputation":791,"user_id":10340976,"display_name":"Raza"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1594709923,"creation_date":1594709520,"answer_id":62889560,"question_id":62888653,"body_markdown":"Create a Class by Name **AdUtils** which has initialize and load the ad \r\n\r\n    public class AdUtils {\r\n\r\n    private Context context;\r\n    private FrameLayout frameLayout;\r\n    private int nativeAdLayout;\r\n    private String nativeAdsId;\r\n\r\n    private UnifiedNativeAd nativeAd;\r\n    private NativeAdListener nativeAdListener;\r\n\r\n    public void setNativeAdListener(NativeAdListener nativeAdListener){\r\n        this.nativeAdListener= nativeAdListener;\r\n    }\r\n\r\n     public AdUtils(Context context) {\r\n        this.context = context;\r\n    }\r\n\r\n\r\n    public void loadNativeAd(FrameLayout frameLayout, int nativeAdLayout, String nativeAdsId) {\r\n        this.nativeAdLayout = nativeAdLayout;\r\n        this.frameLayout = frameLayout;\r\n        this.nativeAdsId = nativeAdsId;\r\n        this.nativeAd = loadNativeAd();\r\n    }\r\n\r\n    private UnifiedNativeAd loadNativeAd() {\r\n        if ((nativeAdLayout == -1 &amp;&amp; frameLayout == null)) {\r\n            return null;\r\n        }\r\n\r\n        final UnifiedNativeAd[] nativeAd = {null};\r\n        AdLoader.Builder builder;\r\n        builder = new AdLoader.Builder(context, nativeAdsId);\r\n        builder.forUnifiedNativeAd(unifiedNativeAd -&gt; {\r\n\r\n            if (nativeAd[0] != null) {\r\n                nativeAd[0].destroy();\r\n            }\r\n            nativeAd[0] = unifiedNativeAd;\r\n            UnifiedNativeAdView adView = (UnifiedNativeAdView) ((Activity) context).getLayoutInflater()\r\n                    .inflate(nativeAdLayout, null);\r\n            populateNativeAdView(unifiedNativeAd, adView);\r\n            frameLayout.removeAllViews();\r\n            frameLayout.addView(adView);\r\n\r\n            if (nativeAdListener != null) {\r\n                nativeAdListener.onNativeAdLoaded();\r\n            }\r\n        });\r\n\r\n        NativeAdOptions adOptions = new NativeAdOptions.Builder().build();\r\n\r\n        builder.withNativeAdOptions(adOptions);\r\n\r\n        AdLoader adLoader = builder.withAdListener(new AdListener() {\r\n            @Override\r\n            public void onAdFailedToLoad(int errorCode) {\r\n\r\n                if (nativeAdListener != null) {\r\n                    nativeAdListener.onNativeAdError();\r\n                }\r\n            }\r\n\r\n            @Override\r\n            public void onAdOpened() {\r\n                super.onAdOpened();\r\n            }\r\n\r\n            @Override\r\n            public void onAdClicked() {\r\n                super.onAdClicked();\r\n            }\r\n        }).build();\r\n\r\n        adLoader.loadAd(new AdRequest.Builder().build());\r\n\r\n\r\n        return nativeAd[0];\r\n\r\n\r\n    }\r\n\r\n    private void populateNativeAdView(UnifiedNativeAd nativeAd, UnifiedNativeAdView adView) {\r\n\r\n        MediaView mediaView = adView.findViewById(R.id.ad_media_main);\r\n        adView.setMediaView(mediaView);\r\n        adView.setHeadlineView(adView.findViewById(R.id.ad_headline));\r\n        adView.setCallToActionView(adView.findViewById(R.id.ad_call_to_action));\r\n        adView.setIconView(adView.findViewById(R.id.ad_app_icon));\r\n\r\n        ((TextView) adView.getHeadlineView()).setText(nativeAd.getHeadline());\r\n\r\n\r\n        if (nativeAd.getCallToAction() == null) {\r\n            adView.getCallToActionView().setVisibility(View.INVISIBLE);\r\n        } else {\r\n            adView.getCallToActionView().setVisibility(View.VISIBLE);\r\n            ((Button) adView.getCallToActionView()).setText(nativeAd.getCallToAction());\r\n        }\r\n\r\n        if (nativeAd.getIcon() == null) {\r\n            adView.getIconView().setVisibility(View.INVISIBLE);\r\n        } else {\r\n            ((ImageView) adView.getIconView()).setImageDrawable(\r\n                    nativeAd.getIcon().getDrawable());\r\n            adView.getIconView().setVisibility(View.VISIBLE);\r\n        }\r\n\r\n        adView.setNativeAd(nativeAd);\r\n        VideoController vc = nativeAd.getVideoController();\r\n        if (vc.hasVideoContent()) {\r\n\r\n            vc.setVideoLifecycleCallbacks(new VideoController.VideoLifecycleCallbacks() {\r\n                @Override\r\n                public void onVideoEnd() {\r\n                    super.onVideoEnd();\r\n                }\r\n            });\r\n        }\r\n\r\n\r\n    }\r\n    public interface NativeAdListener {\r\n        void onNativeAdLoaded();\r\n\r\n        void onNativeAdError();\r\n    }\r\n     }\r\n\r\nInside your `Acitivity` class layout file , ad two `Framelayouts` \r\n\r\n     &lt;FrameLayout\r\n        android:layout_width=&quot;match_parent&quot;\r\n        android:layout_height=&quot;120dp&quot;\r\n        android:id=&quot;@+id/ad_container_one&quot;\r\n        app:layout_constraintBottom_toBottomOf=&quot;parent&quot;\r\n        app:layout_constraintEnd_toEndOf=&quot;parent&quot;\r\n        app:layout_constraintStart_toStartOf=&quot;parent&quot;\r\n        app:layout_constraintTop_toTopOf=&quot;parent&quot;\r\n        app:layout_constraintVertical_bias=&quot;0.0&quot; /&gt;\r\n\r\n    &lt;FrameLayout\r\n        android:layout_width=&quot;match_parent&quot;\r\n        android:layout_height=&quot;220dp&quot;\r\n        android:id=&quot;@+id/ad_container_two&quot;\r\n        app:layout_constraintBottom_toBottomOf=&quot;parent&quot;\r\n        app:layout_constraintEnd_toEndOf=&quot;parent&quot;\r\n        app:layout_constraintStart_toStartOf=&quot;parent&quot;\r\n        app:layout_constraintTop_toBottomOf=&quot;@+id/ad_container_one&quot;\r\n        app:layout_constraintVertical_bias=&quot;0.47000003&quot; /&gt;\r\n\r\nNow Inside your activity or fragment make Two objects of Adutils class\r\n\r\n       AdUtils adUtilOne;\r\n       AdUtils adUtilTwo;\r\nnow you have to initialize both objects by passing context to the constructor and , framelayout, adlayout and adId to the load method.Create the `initAds` method in activity which calls the initialization.\r\n\r\n        public void initAds(){\r\n        String adIdOne=&quot;Your_ad_id&quot;;\r\n        String adIdTwo=&quot;Your_ad_id&quot;;\r\n\r\n        adUtilOne=  new AdUtils(this).loadNativeAd(frameLayoutAdOne,R.layout.ad_one, adIdOne);\r\n        adUtilTwo= new AdUtils(this).loadNativeAd(frameLayoutAdOne,R.layout.ad_two, adIdTwo);\r\n\r\n        adUtilOne.setNativeAdListener(new AdUtils.NativeAdListener() {\r\n            @Override\r\n            public void onNativeAdLoaded() {\r\n                \r\n            }\r\n\r\n            @Override\r\n            public void onNativeAdError() {\r\n                frameLayoutAdOne.setVisibility(View.GONE);\r\n            }\r\n        });\r\n        \r\n        adUtilTwo.setNativeAdListener(new AdUtils.NativeAdListener() {\r\n            @Override\r\n            public void onNativeAdLoaded() {\r\n                \r\n            }\r\n\r\n            @Override\r\n            public void onNativeAdError() {\r\n                frameLayoutAdOne.setVisibility(View.GONE);\r\n            }\r\n        });\r\n\r\n    }\r\n\r\nand call the method after findviewsby id is done. \r\n\r\n\r\n\r\n\r\n\r\n\r\n","title":"How to Show two Admob Native ads on same activity in android studio","body":"<p>Create a Class by Name <strong>AdUtils</strong> which has initialize and load the ad</p>\n<pre><code>public class AdUtils {\n\nprivate Context context;\nprivate FrameLayout frameLayout;\nprivate int nativeAdLayout;\nprivate String nativeAdsId;\n\nprivate UnifiedNativeAd nativeAd;\nprivate NativeAdListener nativeAdListener;\n\npublic void setNativeAdListener(NativeAdListener nativeAdListener){\n    this.nativeAdListener= nativeAdListener;\n}\n\n public AdUtils(Context context) {\n    this.context = context;\n}\n\n\npublic void loadNativeAd(FrameLayout frameLayout, int nativeAdLayout, String nativeAdsId) {\n    this.nativeAdLayout = nativeAdLayout;\n    this.frameLayout = frameLayout;\n    this.nativeAdsId = nativeAdsId;\n    this.nativeAd = loadNativeAd();\n}\n\nprivate UnifiedNativeAd loadNativeAd() {\n    if ((nativeAdLayout == -1 &amp;&amp; frameLayout == null)) {\n        return null;\n    }\n\n    final UnifiedNativeAd[] nativeAd = {null};\n    AdLoader.Builder builder;\n    builder = new AdLoader.Builder(context, nativeAdsId);\n    builder.forUnifiedNativeAd(unifiedNativeAd -&gt; {\n\n        if (nativeAd[0] != null) {\n            nativeAd[0].destroy();\n        }\n        nativeAd[0] = unifiedNativeAd;\n        UnifiedNativeAdView adView = (UnifiedNativeAdView) ((Activity) context).getLayoutInflater()\n                .inflate(nativeAdLayout, null);\n        populateNativeAdView(unifiedNativeAd, adView);\n        frameLayout.removeAllViews();\n        frameLayout.addView(adView);\n\n        if (nativeAdListener != null) {\n            nativeAdListener.onNativeAdLoaded();\n        }\n    });\n\n    NativeAdOptions adOptions = new NativeAdOptions.Builder().build();\n\n    builder.withNativeAdOptions(adOptions);\n\n    AdLoader adLoader = builder.withAdListener(new AdListener() {\n        @Override\n        public void onAdFailedToLoad(int errorCode) {\n\n            if (nativeAdListener != null) {\n                nativeAdListener.onNativeAdError();\n            }\n        }\n\n        @Override\n        public void onAdOpened() {\n            super.onAdOpened();\n        }\n\n        @Override\n        public void onAdClicked() {\n            super.onAdClicked();\n        }\n    }).build();\n\n    adLoader.loadAd(new AdRequest.Builder().build());\n\n\n    return nativeAd[0];\n\n\n}\n\nprivate void populateNativeAdView(UnifiedNativeAd nativeAd, UnifiedNativeAdView adView) {\n\n    MediaView mediaView = adView.findViewById(R.id.ad_media_main);\n    adView.setMediaView(mediaView);\n    adView.setHeadlineView(adView.findViewById(R.id.ad_headline));\n    adView.setCallToActionView(adView.findViewById(R.id.ad_call_to_action));\n    adView.setIconView(adView.findViewById(R.id.ad_app_icon));\n\n    ((TextView) adView.getHeadlineView()).setText(nativeAd.getHeadline());\n\n\n    if (nativeAd.getCallToAction() == null) {\n        adView.getCallToActionView().setVisibility(View.INVISIBLE);\n    } else {\n        adView.getCallToActionView().setVisibility(View.VISIBLE);\n        ((Button) adView.getCallToActionView()).setText(nativeAd.getCallToAction());\n    }\n\n    if (nativeAd.getIcon() == null) {\n        adView.getIconView().setVisibility(View.INVISIBLE);\n    } else {\n        ((ImageView) adView.getIconView()).setImageDrawable(\n                nativeAd.getIcon().getDrawable());\n        adView.getIconView().setVisibility(View.VISIBLE);\n    }\n\n    adView.setNativeAd(nativeAd);\n    VideoController vc = nativeAd.getVideoController();\n    if (vc.hasVideoContent()) {\n\n        vc.setVideoLifecycleCallbacks(new VideoController.VideoLifecycleCallbacks() {\n            @Override\n            public void onVideoEnd() {\n                super.onVideoEnd();\n            }\n        });\n    }\n\n\n}\npublic interface NativeAdListener {\n    void onNativeAdLoaded();\n\n    void onNativeAdError();\n}\n }\n</code></pre>\n<p>Inside your <code>Acitivity</code> class layout file , ad two <code>Framelayouts</code></p>\n<pre><code> &lt;FrameLayout\n    android:layout_width=&quot;match_parent&quot;\n    android:layout_height=&quot;120dp&quot;\n    android:id=&quot;@+id/ad_container_one&quot;\n    app:layout_constraintBottom_toBottomOf=&quot;parent&quot;\n    app:layout_constraintEnd_toEndOf=&quot;parent&quot;\n    app:layout_constraintStart_toStartOf=&quot;parent&quot;\n    app:layout_constraintTop_toTopOf=&quot;parent&quot;\n    app:layout_constraintVertical_bias=&quot;0.0&quot; /&gt;\n\n&lt;FrameLayout\n    android:layout_width=&quot;match_parent&quot;\n    android:layout_height=&quot;220dp&quot;\n    android:id=&quot;@+id/ad_container_two&quot;\n    app:layout_constraintBottom_toBottomOf=&quot;parent&quot;\n    app:layout_constraintEnd_toEndOf=&quot;parent&quot;\n    app:layout_constraintStart_toStartOf=&quot;parent&quot;\n    app:layout_constraintTop_toBottomOf=&quot;@+id/ad_container_one&quot;\n    app:layout_constraintVertical_bias=&quot;0.47000003&quot; /&gt;\n</code></pre>\n<p>Now Inside your activity or fragment make Two objects of Adutils class</p>\n<pre><code>   AdUtils adUtilOne;\n   AdUtils adUtilTwo;\n</code></pre>\n<p>now you have to initialize both objects by passing context to the constructor and , framelayout, adlayout and adId to the load method.Create the <code>initAds</code> method in activity which calls the initialization.</p>\n<pre><code>    public void initAds(){\n    String adIdOne=&quot;Your_ad_id&quot;;\n    String adIdTwo=&quot;Your_ad_id&quot;;\n\n    adUtilOne=  new AdUtils(this).loadNativeAd(frameLayoutAdOne,R.layout.ad_one, adIdOne);\n    adUtilTwo= new AdUtils(this).loadNativeAd(frameLayoutAdOne,R.layout.ad_two, adIdTwo);\n\n    adUtilOne.setNativeAdListener(new AdUtils.NativeAdListener() {\n        @Override\n        public void onNativeAdLoaded() {\n            \n        }\n\n        @Override\n        public void onNativeAdError() {\n            frameLayoutAdOne.setVisibility(View.GONE);\n        }\n    });\n    \n    adUtilTwo.setNativeAdListener(new AdUtils.NativeAdListener() {\n        @Override\n        public void onNativeAdLoaded() {\n            \n        }\n\n        @Override\n        public void onNativeAdError() {\n            frameLayoutAdOne.setVisibility(View.GONE);\n        }\n    });\n\n}\n</code></pre>\n<p>and call the method after findviewsby id is done.</p>\n"},{"tags":[],"owner":{"account_id":8458665,"reputation":267,"user_id":6345106,"display_name":"Adil Raza Bangash"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1682872729,"creation_date":1682872729,"answer_id":76142374,"question_id":62888653,"body_markdown":"This question is bit old but sharing my solution because some one in future looking for solution will benefit from the answer&lt;br&gt;\r\n&lt;br&gt;**Note**: This solution is not for Recyclerview or Listview.&lt;br&gt;&lt;br&gt;\r\nTo show two native ads in same activity you need two FrameLayouts in your activity xml and two nativead xmls(if you want to show ads in different sizes otherwise one is enough).&lt;br&gt;&lt;br&gt;\r\nAdmob now provide method [loadAds()][1] with the help of which you can request upto 5 ads at once. eg:\r\n\r\n    adLoader.loadAds(new AdRequest.Builder().build(), 5);\r\n    \r\nTo load two Native ads here is code sample\r\n\r\n    int loadingCount = 0;\r\n\r\n    public void loadNativeAd(){\r\n\r\n        AdLoader.Builder builder = new AdLoader.Builder(activity.getApplicationContext(),&quot;YOUR_NATIVEAD_ID&quot;);\r\n\r\n        builder.forNativeAd(\r\n                new NativeAd.OnNativeAdLoadedListener() {\r\n                    @Override\r\n                    public void onNativeAdLoaded(NativeAd unifiedNativeAd) {\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t// To count adload because loadAds() is equal to calling \r\n                        // loadAd() the number of ads you pass to loadAds() method.\r\n                        loadingCount+=1; \r\n\r\n                        Log.d(&quot;NativeAdOnLoad&quot;, &quot;Native Ad loaded &quot;+loadingCount);\r\n\r\n\r\n                        // If this callback occurs after the activity is destroyed\r\n                        // You must call destroy on old ads when you are done with them,\r\n                        // otherwise you will have a memory leak.\r\n                        if (nativeAd != null) {\r\n                            nativeAd.destroy();\r\n                        }\r\n                        nativeAd = unifiedNativeAd;\r\n                        if (loadingCount == 1){\r\n\r\n                            FrameLayout frameLayout = view.findViewById(R.id.fl_adplaceholder);\r\n\r\n                            NativeAdView adView =\r\n                                    (NativeAdView) getLayoutInflater()\r\n                                            .inflate(R.layout.ad_unified, null);\r\n                            populateUnifiedNativeAdView(unifiedNativeAd, adView);\r\n                            frameLayout.removeAllViews();\r\n                            frameLayout.addView(adView);\r\n                        }else if (loadingCount&gt;1){\r\n                            FrameLayout frameLayout = view.findViewById(R.id.fl_adplaceholder1);\r\n                            loadingCount=0;\r\n                           \r\n                            // if you want to show ads in different sizes \r\n                            // pass your second layout here\r\n                            NativeAdView adView =\r\n                                    (NativeAdView) getLayoutInflater()\r\n                                            .inflate(R.layout.ad_unified, null);\r\n                            populateUnifiedNativeAdView(unifiedNativeAd, adView);\r\n                            frameLayout.removeAllViews();\r\n                            frameLayout.addView(adView);\r\n                        }\r\n\r\n                    }\r\n                });\r\n\r\n        VideoOptions videoOptions =\r\n                new VideoOptions.Builder().setStartMuted(true).build();\r\n\r\n        NativeAdOptions adOptions =\r\n                new NativeAdOptions.Builder().setVideoOptions(videoOptions).build();\r\n\r\n        builder.withNativeAdOptions(adOptions);\r\n\r\n        AdLoader adLoader =\r\n                builder\r\n                        .withAdListener(\r\n                                new AdListener() {\r\n                                    @Override\r\n                                    public void onAdFailedToLoad(LoadAdError loadAdError) {\r\n                                        String error =\r\n                                                String.format(\r\n                                                        &quot;domain: %s, code: %d, message: %s&quot;,\r\n                                                        loadAdError.getDomain(),\r\n                                                        loadAdError.getCode(),\r\n                                                        loadAdError.getMessage());\r\n                                        Toast.makeText(\r\n                                                        activity,\r\n                                                        &quot;Failed to load native ad with error &quot; + error,\r\n                                                        Toast.LENGTH_SHORT)\r\n                                                .show();\r\n                                    }\r\n                                })\r\n                        .build();\r\n\r\n        adLoader.loadAds(new AdRequest.Builder().build(),2);\r\n\r\n    }\r\n\r\nAnd here is populateUnifiedNativeAdView function.\r\n\r\n    \r\n    private void populateUnifiedNativeAdView(NativeAd nativeAd, NativeAdView adView) {\r\n        // Set the media view.\r\n        adView.setMediaView((MediaView) adView.findViewById(R.id.ad_media));\r\n\r\n        // Set other ad assets.\r\n        adView.setHeadlineView(adView.findViewById(R.id.ad_headline));\r\n        adView.setBodyView(adView.findViewById(R.id.ad_body));\r\n        adView.setCallToActionView(adView.findViewById(R.id.ad_call_to_action));\r\n        adView.setIconView(adView.findViewById(R.id.ad_app_icon));\r\n        adView.setPriceView(adView.findViewById(R.id.ad_price));\r\n        adView.setStarRatingView(adView.findViewById(R.id.ad_stars));\r\n        adView.setStoreView(adView.findViewById(R.id.ad_store));\r\n        adView.setAdvertiserView(adView.findViewById(R.id.ad_advertiser));\r\n\r\n        // The headline and mediaContent are guaranteed to be in every UnifiedNativeAd.\r\n        ((TextView) adView.getHeadlineView()).setText(nativeAd.getHeadline());\r\n        adView.getMediaView().setMediaContent(nativeAd.getMediaContent());\r\n\r\n        // These assets aren&#39;t guaranteed to be in every UnifiedNativeAd, so it&#39;s important to\r\n        // check before trying to display them.\r\n        if (nativeAd.getBody() == null) {\r\n            adView.getBodyView().setVisibility(View.INVISIBLE);\r\n        } else {\r\n            adView.getBodyView().setVisibility(View.VISIBLE);\r\n            ((TextView) adView.getBodyView()).setText(nativeAd.getBody());\r\n        }\r\n\r\n        if (nativeAd.getCallToAction() == null) {\r\n            adView.getCallToActionView().setVisibility(View.INVISIBLE);\r\n        } else {\r\n            adView.getCallToActionView().setVisibility(View.VISIBLE);\r\n            ((Button) adView.getCallToActionView()).setText(nativeAd.getCallToAction());\r\n        }\r\n\r\n        if (nativeAd.getIcon() == null) {\r\n            adView.getIconView().setVisibility(View.GONE);\r\n        } else {\r\n            ((ImageView) adView.getIconView()).setImageDrawable(\r\n                    nativeAd.getIcon().getDrawable());\r\n            adView.getIconView().setVisibility(View.VISIBLE);\r\n        }\r\n\r\n        if (nativeAd.getPrice() == null) {\r\n            adView.getPriceView().setVisibility(View.INVISIBLE);\r\n        } else {\r\n            adView.getPriceView().setVisibility(View.VISIBLE);\r\n            ((TextView) adView.getPriceView()).setText(nativeAd.getPrice());\r\n        }\r\n\r\n        if (nativeAd.getStore() == null) {\r\n            adView.getStoreView().setVisibility(View.INVISIBLE);\r\n        } else {\r\n            adView.getStoreView().setVisibility(View.VISIBLE);\r\n            ((TextView) adView.getStoreView()).setText(nativeAd.getStore());\r\n        }\r\n\r\n        if (nativeAd.getStarRating() == null) {\r\n            adView.getStarRatingView().setVisibility(View.INVISIBLE);\r\n        } else {\r\n            ((RatingBar) adView.getStarRatingView())\r\n                    .setRating(nativeAd.getStarRating().floatValue());\r\n            adView.getStarRatingView().setVisibility(View.VISIBLE);\r\n        }\r\n\r\n        if (nativeAd.getAdvertiser() == null) {\r\n            adView.getAdvertiserView().setVisibility(View.INVISIBLE);\r\n        } else {\r\n            ((TextView) adView.getAdvertiserView()).setText(nativeAd.getAdvertiser());\r\n            adView.getAdvertiserView().setVisibility(View.VISIBLE);\r\n        }\r\n\r\n        // This method tells the Google Mobile Ads SDK that you have finished populating your\r\n        // native ad view with this native ad.\r\n        adView.setNativeAd(nativeAd);\r\n\r\n        // Get the video controller for the ad. One will always be provided, even if the ad doesn&#39;t\r\n        // have a video asset.\r\n        VideoController vc = nativeAd.getMediaContent().getVideoController();\r\n\r\n        // Updates the UI to say whether or not this ad has a video asset.\r\n        if (vc.hasVideoContent()) {\r\n\r\n            // Create a new VideoLifecycleCallbacks object and pass it to the VideoController. The\r\n            // VideoController will call methods on this object when events occur in the video\r\n            // lifecycle.\r\n            vc.setVideoLifecycleCallbacks(new VideoController.VideoLifecycleCallbacks() {\r\n                @Override\r\n                public void onVideoEnd() {\r\n                    // Publishers should allow native ads to complete video playback before\r\n                    // refreshing or replacing them with another ad in the same UI location.\r\n                    super.onVideoEnd();\r\n                }\r\n            });\r\n        }\r\n    }\r\n\r\nAnd just call the below function where you want to load the NativeAd\r\n\r\n    \r\n        loadNativeAd();\r\n\r\n   \r\n\r\n\r\n  [1]: https://developers.google.com/admob/android/native/start#loadads","title":"How to Show two Admob Native ads on same activity in android studio","body":"<p>This question is bit old but sharing my solution because some one in future looking for solution will benefit from the answer<br>\n<br><strong>Note</strong>: This solution is not for Recyclerview or Listview.<br><br>\nTo show two native ads in same activity you need two FrameLayouts in your activity xml and two nativead xmls(if you want to show ads in different sizes otherwise one is enough).<br><br>\nAdmob now provide method <a href=\"https://developers.google.com/admob/android/native/start#loadads\" rel=\"nofollow noreferrer\">loadAds()</a> with the help of which you can request upto 5 ads at once. eg:</p>\n<pre><code>adLoader.loadAds(new AdRequest.Builder().build(), 5);\n</code></pre>\n<p>To load two Native ads here is code sample</p>\n<pre><code>int loadingCount = 0;\n\npublic void loadNativeAd(){\n\n    AdLoader.Builder builder = new AdLoader.Builder(activity.getApplicationContext(),&quot;YOUR_NATIVEAD_ID&quot;);\n\n    builder.forNativeAd(\n            new NativeAd.OnNativeAdLoadedListener() {\n                @Override\n                public void onNativeAdLoaded(NativeAd unifiedNativeAd) {\n                    \n                    // To count adload because loadAds() is equal to calling \n                    // loadAd() the number of ads you pass to loadAds() method.\n                    loadingCount+=1; \n\n                    Log.d(&quot;NativeAdOnLoad&quot;, &quot;Native Ad loaded &quot;+loadingCount);\n\n\n                    // If this callback occurs after the activity is destroyed\n                    // You must call destroy on old ads when you are done with them,\n                    // otherwise you will have a memory leak.\n                    if (nativeAd != null) {\n                        nativeAd.destroy();\n                    }\n                    nativeAd = unifiedNativeAd;\n                    if (loadingCount == 1){\n\n                        FrameLayout frameLayout = view.findViewById(R.id.fl_adplaceholder);\n\n                        NativeAdView adView =\n                                (NativeAdView) getLayoutInflater()\n                                        .inflate(R.layout.ad_unified, null);\n                        populateUnifiedNativeAdView(unifiedNativeAd, adView);\n                        frameLayout.removeAllViews();\n                        frameLayout.addView(adView);\n                    }else if (loadingCount&gt;1){\n                        FrameLayout frameLayout = view.findViewById(R.id.fl_adplaceholder1);\n                        loadingCount=0;\n                       \n                        // if you want to show ads in different sizes \n                        // pass your second layout here\n                        NativeAdView adView =\n                                (NativeAdView) getLayoutInflater()\n                                        .inflate(R.layout.ad_unified, null);\n                        populateUnifiedNativeAdView(unifiedNativeAd, adView);\n                        frameLayout.removeAllViews();\n                        frameLayout.addView(adView);\n                    }\n\n                }\n            });\n\n    VideoOptions videoOptions =\n            new VideoOptions.Builder().setStartMuted(true).build();\n\n    NativeAdOptions adOptions =\n            new NativeAdOptions.Builder().setVideoOptions(videoOptions).build();\n\n    builder.withNativeAdOptions(adOptions);\n\n    AdLoader adLoader =\n            builder\n                    .withAdListener(\n                            new AdListener() {\n                                @Override\n                                public void onAdFailedToLoad(LoadAdError loadAdError) {\n                                    String error =\n                                            String.format(\n                                                    &quot;domain: %s, code: %d, message: %s&quot;,\n                                                    loadAdError.getDomain(),\n                                                    loadAdError.getCode(),\n                                                    loadAdError.getMessage());\n                                    Toast.makeText(\n                                                    activity,\n                                                    &quot;Failed to load native ad with error &quot; + error,\n                                                    Toast.LENGTH_SHORT)\n                                            .show();\n                                }\n                            })\n                    .build();\n\n    adLoader.loadAds(new AdRequest.Builder().build(),2);\n\n}\n</code></pre>\n<p>And here is populateUnifiedNativeAdView function.</p>\n<pre><code>private void populateUnifiedNativeAdView(NativeAd nativeAd, NativeAdView adView) {\n    // Set the media view.\n    adView.setMediaView((MediaView) adView.findViewById(R.id.ad_media));\n\n    // Set other ad assets.\n    adView.setHeadlineView(adView.findViewById(R.id.ad_headline));\n    adView.setBodyView(adView.findViewById(R.id.ad_body));\n    adView.setCallToActionView(adView.findViewById(R.id.ad_call_to_action));\n    adView.setIconView(adView.findViewById(R.id.ad_app_icon));\n    adView.setPriceView(adView.findViewById(R.id.ad_price));\n    adView.setStarRatingView(adView.findViewById(R.id.ad_stars));\n    adView.setStoreView(adView.findViewById(R.id.ad_store));\n    adView.setAdvertiserView(adView.findViewById(R.id.ad_advertiser));\n\n    // The headline and mediaContent are guaranteed to be in every UnifiedNativeAd.\n    ((TextView) adView.getHeadlineView()).setText(nativeAd.getHeadline());\n    adView.getMediaView().setMediaContent(nativeAd.getMediaContent());\n\n    // These assets aren't guaranteed to be in every UnifiedNativeAd, so it's important to\n    // check before trying to display them.\n    if (nativeAd.getBody() == null) {\n        adView.getBodyView().setVisibility(View.INVISIBLE);\n    } else {\n        adView.getBodyView().setVisibility(View.VISIBLE);\n        ((TextView) adView.getBodyView()).setText(nativeAd.getBody());\n    }\n\n    if (nativeAd.getCallToAction() == null) {\n        adView.getCallToActionView().setVisibility(View.INVISIBLE);\n    } else {\n        adView.getCallToActionView().setVisibility(View.VISIBLE);\n        ((Button) adView.getCallToActionView()).setText(nativeAd.getCallToAction());\n    }\n\n    if (nativeAd.getIcon() == null) {\n        adView.getIconView().setVisibility(View.GONE);\n    } else {\n        ((ImageView) adView.getIconView()).setImageDrawable(\n                nativeAd.getIcon().getDrawable());\n        adView.getIconView().setVisibility(View.VISIBLE);\n    }\n\n    if (nativeAd.getPrice() == null) {\n        adView.getPriceView().setVisibility(View.INVISIBLE);\n    } else {\n        adView.getPriceView().setVisibility(View.VISIBLE);\n        ((TextView) adView.getPriceView()).setText(nativeAd.getPrice());\n    }\n\n    if (nativeAd.getStore() == null) {\n        adView.getStoreView().setVisibility(View.INVISIBLE);\n    } else {\n        adView.getStoreView().setVisibility(View.VISIBLE);\n        ((TextView) adView.getStoreView()).setText(nativeAd.getStore());\n    }\n\n    if (nativeAd.getStarRating() == null) {\n        adView.getStarRatingView().setVisibility(View.INVISIBLE);\n    } else {\n        ((RatingBar) adView.getStarRatingView())\n                .setRating(nativeAd.getStarRating().floatValue());\n        adView.getStarRatingView().setVisibility(View.VISIBLE);\n    }\n\n    if (nativeAd.getAdvertiser() == null) {\n        adView.getAdvertiserView().setVisibility(View.INVISIBLE);\n    } else {\n        ((TextView) adView.getAdvertiserView()).setText(nativeAd.getAdvertiser());\n        adView.getAdvertiserView().setVisibility(View.VISIBLE);\n    }\n\n    // This method tells the Google Mobile Ads SDK that you have finished populating your\n    // native ad view with this native ad.\n    adView.setNativeAd(nativeAd);\n\n    // Get the video controller for the ad. One will always be provided, even if the ad doesn't\n    // have a video asset.\n    VideoController vc = nativeAd.getMediaContent().getVideoController();\n\n    // Updates the UI to say whether or not this ad has a video asset.\n    if (vc.hasVideoContent()) {\n\n        // Create a new VideoLifecycleCallbacks object and pass it to the VideoController. The\n        // VideoController will call methods on this object when events occur in the video\n        // lifecycle.\n        vc.setVideoLifecycleCallbacks(new VideoController.VideoLifecycleCallbacks() {\n            @Override\n            public void onVideoEnd() {\n                // Publishers should allow native ads to complete video playback before\n                // refreshing or replacing them with another ad in the same UI location.\n                super.onVideoEnd();\n            }\n        });\n    }\n}\n</code></pre>\n<p>And just call the below function where you want to load the NativeAd</p>\n<pre><code>    loadNativeAd();\n</code></pre>\n"}],"owner":{"account_id":18863964,"reputation":13,"user_id":13760106,"display_name":"jon nester"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1774,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":2,"score":1,"last_activity_date":1682872729,"creation_date":1594704780,"question_id":62888653,"body_markdown":"I want to use 2 Admob native ads in the same activity but with different sizes... \r\nI already have successfully implemented one ad. now I want to show one more native ad in the same activity. How to do it properly\r\n  \r\nAdmob implementation in the activity\r\n\r\n    private void populateUnifiedNativeAdView(UnifiedNativeAd nativeAd, UnifiedNativeAdView\r\n                adView) {\r\n            // Set the media view. Media content will be automatically populated in the media view once\r\n            MediaView mediaView = adView.findViewById(R.id.ad_media);\r\n            adView.setMediaView(mediaView);\r\n    \r\n            // Set other ad assets.\r\n            adView.setHeadlineView(adView.findViewById(R.id.ad_headline));\r\n            adView.setBodyView(adView.findViewById(R.id.ad_body));\r\n            adView.setCallToActionView(adView.findViewById(R.id.ad_call_to_action));\r\n            adView.setIconView(adView.findViewById(R.id.ad_app_icon));\r\n            adView.setPriceView(adView.findViewById(R.id.ad_price));\r\n            adView.setStarRatingView(adView.findViewById(R.id.ad_stars));\r\n            adView.setStoreView(adView.findViewById(R.id.ad_store));\r\n            adView.setAdvertiserView(adView.findViewById(R.id.ad_advertiser));\r\n    \r\n            // The headline is guaranteed to be in every UnifiedNativeAd.\r\n            ((TextView) adView.getHeadlineView()).setText(nativeAd.getHeadline());\r\n    \r\n            // These assets aren&#39;t guaranteed to be in every UnifiedNativeAd, so it&#39;s important to\r\n            // check before trying to display them.\r\n            if (nativeAd.getBody() == null) {\r\n                adView.getBodyView().setVisibility(View.INVISIBLE);\r\n            } else {\r\n                adView.getBodyView().setVisibility(View.VISIBLE);\r\n                ((TextView) adView.getBodyView()).setText(nativeAd.getBody());\r\n            }\r\n    \r\n            if (nativeAd.getCallToAction() == null) {\r\n                adView.getCallToActionView().setVisibility(View.INVISIBLE);\r\n            } else {\r\n                adView.getCallToActionView().setVisibility(View.VISIBLE);\r\n                ((Button) adView.getCallToActionView()).setText(nativeAd.getCallToAction());\r\n            }\r\n    \r\n            if (nativeAd.getIcon() == null) {\r\n                adView.getIconView().setVisibility(View.GONE);\r\n            } else {\r\n                ((ImageView) adView.getIconView()).setImageDrawable(\r\n                        nativeAd.getIcon().getDrawable());\r\n                adView.getIconView().setVisibility(View.VISIBLE);\r\n            }\r\n    \r\n            if (nativeAd.getPrice() == null) {\r\n                adView.getPriceView().setVisibility(View.INVISIBLE);\r\n            } else {\r\n                adView.getPriceView().setVisibility(View.VISIBLE);\r\n                ((TextView) adView.getPriceView()).setText(nativeAd.getPrice());\r\n            }\r\n    \r\n            if (nativeAd.getStore() == null) {\r\n                adView.getStoreView().setVisibility(View.INVISIBLE);\r\n            } else {\r\n                adView.getStoreView().setVisibility(View.VISIBLE);\r\n                ((TextView) adView.getStoreView()).setText(nativeAd.getStore());\r\n            }\r\n    \r\n            if (nativeAd.getStarRating() == null) {\r\n                adView.getStarRatingView().setVisibility(View.INVISIBLE);\r\n            } else {\r\n                ((RatingBar) adView.getStarRatingView())\r\n                        .setRating(nativeAd.getStarRating().floatValue());\r\n                adView.getStarRatingView().setVisibility(View.VISIBLE);\r\n            }\r\n    \r\n            if (nativeAd.getAdvertiser() == null) {\r\n                adView.getAdvertiserView().setVisibility(View.INVISIBLE);\r\n            } else {\r\n                ((TextView) adView.getAdvertiserView()).setText(nativeAd.getAdvertiser());\r\n                adView.getAdvertiserView().setVisibility(View.VISIBLE);\r\n            }\r\n    \r\n            // This method tells the Google Mobile Ads SDK that you have finished populating your\r\n            // native ad view with this native ad. The SDK will populate the adView&#39;s MediaView\r\n            // with the media content from this native ad.\r\n            adView.setNativeAd(nativeAd);\r\n    \r\n            // Get the video controller for the ad. One will always be provided, even if the ad doesn&#39;t\r\n            // have a video asset.\r\n            VideoController vc = nativeAd.getVideoController();\r\n    \r\n            // Updates the UI to say whether or not this ad has a video asset.\r\n            if (vc.hasVideoContent()) {\r\n    \r\n                // Create a new VideoLifecycleCallbacks object and pass it to the VideoController. The\r\n                // VideoController will call methods on this object when events occur in the video\r\n                // lifecycle.\r\n                vc.setVideoLifecycleCallbacks(new VideoController.VideoLifecycleCallbacks() {\r\n                    @Override\r\n                    public void onVideoEnd() {\r\n                        // Publishers should allow native ads to complete video playback before\r\n                        // refreshing or replacing them with another ad in the same UI location.\r\n    \r\n                        super.onVideoEnd();\r\n                    }\r\n                });\r\n            } else {\r\n            }\r\n        }\r\n    \r\n        /**\r\n         * Creates a request for a new native ad based on the boolean parameters and calls the\r\n         * corresponding &quot;populate&quot; method when one is successfully returned.\r\n         */\r\n        private void refreshAd() {\r\n    \r\n            AdLoader.Builder builder = new AdLoader.Builder(this, getString(R.string.admob_native_advance));\r\n    \r\n            builder.forUnifiedNativeAd(new UnifiedNativeAd.OnUnifiedNativeAdLoadedListener() {\r\n                @Override\r\n                public void onUnifiedNativeAdLoaded(UnifiedNativeAd unifiedNativeAd) {\r\n                    // You must call destroy on old ads when you are done with them,\r\n                    // otherwise you will have a memory leak.\r\n                    if (nativeAd != null) {\r\n                        nativeAd.destroy();\r\n                    }\r\n    //                nativeAd = unifiedNativeAd;\r\n    //\r\n    //\r\n    //                RelativeLayout relativeLayout =\r\n    //                        findViewById(R.id.fl_adplaceholder);\r\n    //                UnifiedNativeAdView adView = (UnifiedNativeAdView) getLayoutInflater()\r\n    //                        .inflate(R.layout.ad_unified, null);\r\n    //                populateUnifiedNativeAdView(unifiedNativeAd, adView);\r\n    //\r\n    //\r\n    //                relativeLayout.removeAllViews();\r\n    //                relativeLayout.addView(adView);\r\n    \r\n                    NativeTemplateStyle styles = new\r\n                            NativeTemplateStyle.Builder().build();\r\n                    TemplateView adView = findViewById(R.id.adview);\r\n                    adView.setVisibility(View.VISIBLE);\r\n                    adView.setStyles(styles);\r\n                    adView.setNativeAd(unifiedNativeAd);\r\n                }\r\n    \r\n            });\r\n    \r\n            VideoOptions videoOptions = new VideoOptions.Builder()\r\n                    .build();\r\n    \r\n            NativeAdOptions adOptions = new NativeAdOptions.Builder()\r\n                    .setVideoOptions(videoOptions)\r\n                    .build();\r\n    \r\n            builder.withNativeAdOptions(adOptions);\r\n    \r\n            AdLoader adLoader = builder.withAdListener(new AdListener() {\r\n                @Override\r\n                public void onAdFailedToLoad(int errorCode) {\r\n                    Log.w(HELPER_TAG, &quot;onAdFailedToLoad: &quot; + errorCode);\r\n                }\r\n            }).build();\r\n    \r\n            adLoader.loadAd(new AdRequest.Builder()\r\n                    .build());\r\n        }\r\n\r\n1st AdMob native ad layout (implemented successfully)\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\r\n    &lt;merge xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\r\n        xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;\r\n        &gt;\r\n        &lt;com.google.android.gms.ads.formats.UnifiedNativeAdView\r\n            android:id=&quot;@+id/native_ad_view&quot;\r\n            android:layout_width=&quot;match_parent&quot;\r\n            android:layout_height=&quot;120dp&quot;\r\n            android:layout_centerInParent=&quot;true&quot;\r\n            android:background=&quot;@color/dark_bg&quot;\r\n            &gt;\r\n            &lt;RelativeLayout\r\n                android:layout_width=&quot;match_parent&quot;\r\n                android:layout_height=&quot;match_parent&quot;\r\n                android:layout_marginBottom=&quot;5dp&quot;\r\n                &gt;\r\n                &lt;ImageView\r\n                    android:id=&quot;@+id/icon&quot;\r\n                    android:layout_width=&quot;60dp&quot;\r\n                    android:layout_height=&quot;60dp&quot;\r\n                    android:layout_marginLeft=&quot;12dp&quot;\r\n                    android:layout_marginTop=&quot;5dp&quot;\r\n                    android:contentDescription=&quot;@null&quot; /&gt;\r\n                &lt;TextView\r\n                    android:id=&quot;@+id/primary&quot;\r\n                    android:layout_width=&quot;match_parent&quot;\r\n                    android:layout_height=&quot;wrap_content&quot;\r\n                    android:layout_alignTop=&quot;@id/icon&quot;\r\n                    android:layout_alignParentRight=&quot;true&quot;\r\n                    android:layout_marginLeft=&quot;14dp&quot;\r\n                    android:layout_marginTop=&quot;8dp&quot;\r\n                    android:layout_marginRight=&quot;10dp&quot;\r\n                    android:layout_toRightOf=&quot;@id/icon&quot;\r\n                    android:lines=&quot;1&quot;\r\n                    android:textColor=&quot;@color/white&quot;\r\n                    android:textSize=&quot;@dimen/gnt_text_size_large&quot;\r\n                    android:textStyle=&quot;bold&quot; /&gt;\r\n                &lt;LinearLayout\r\n                    android:id=&quot;@+id/second_row&quot;\r\n                    android:layout_width=&quot;match_parent&quot;\r\n                    android:layout_height=&quot;wrap_content&quot;\r\n                    android:layout_below=&quot;@id/primary&quot;\r\n                    android:layout_marginLeft=&quot;14dp&quot;\r\n                    android:layout_marginTop=&quot;6dp&quot;\r\n                    android:layout_marginRight=&quot;10dp&quot;\r\n                    android:layout_toRightOf=&quot;@id/icon&quot;\r\n                    android:orientation=&quot;horizontal&quot;&gt;\r\n                    &lt;RatingBar\r\n                        android:id=&quot;@+id/rating_bar&quot;\r\n                        android:layout_width=&quot;wrap_content&quot;\r\n                        android:layout_height=&quot;@dimen/gnt_ad_indicator_height&quot;\r\n                        android:lines=&quot;1&quot;\r\n                        android:numStars=&quot;0&quot;\r\n                        android:textColor=&quot;@color/white&quot;\r\n                        android:textSize=&quot;@dimen/gnt_text_size_small&quot; /&gt;\r\n                    &lt;TextView\r\n                        android:id=&quot;@+id/secondary&quot;\r\n                        android:layout_width=&quot;match_parent&quot;\r\n                        android:layout_height=&quot;match_parent&quot;\r\n                        android:layout_marginStart=&quot;@dimen/gnt_no_margin&quot;\r\n                        android:layout_marginTop=&quot;@dimen/gnt_no_margin&quot;\r\n                        android:layout_marginEnd=&quot;@dimen/gnt_no_margin&quot;\r\n                        android:layout_marginBottom=&quot;@dimen/gnt_no_margin&quot;\r\n                        android:gravity=&quot;top&quot;\r\n                        android:lines=&quot;1&quot;\r\n                        android:textColor=&quot;@color/white&quot;\r\n                        android:textSize=&quot;@dimen/gnt_text_size_small&quot; /&gt;\r\n                &lt;/LinearLayout&gt;\r\n                &lt;Button\r\n                    android:id=&quot;@+id/cta&quot;\r\n                    android:layout_width=&quot;250dp&quot;\r\n                    android:layout_height=&quot;0dp&quot;\r\n                    android:layout_below=&quot;@id/icon&quot;\r\n                    android:layout_marginLeft=&quot;10dp&quot;\r\n                    android:layout_marginTop=&quot;5dp&quot;\r\n                    android:layout_marginRight=&quot;10dp&quot;\r\n                    android:layout_marginBottom=&quot;5dp&quot;\r\n                    android:background=&quot;@drawable/main_ad_button&quot;\r\n                    android:lines=&quot;1&quot;\r\n                    android:layout_alignParentBottom=&quot;true&quot;\r\n                    android:layout_alignParentEnd=&quot;true&quot;\r\n                    android:textColor=&quot;@color/gnt_white&quot;\r\n                    android:layout_alignParentRight=&quot;true&quot; /&gt;\r\n                &lt;RelativeLayout\r\n                    android:layout_width=&quot;wrap_content&quot;\r\n                    android:layout_height=&quot;wrap_content&quot;\r\n                    android:background=&quot;@drawable/ad_text_background&quot;\r\n                    &gt;\r\n                    &lt;TextView\r\n                        android:id=&quot;@+id/ad_notification_view&quot;\r\n                        android:layout_width=&quot;wrap_content&quot;\r\n                        android:layout_height=&quot;wrap_content&quot;\r\n                        android:layout_margin=&quot;5dp&quot;\r\n                        android:text=&quot;Ad&quot;\r\n                        android:textColor=&quot;@color/white_color&quot;\r\n                        android:textSize=&quot;@dimen/gnt_ad_indicator_text_size&quot;\r\n                        android:textStyle=&quot;bold&quot; /&gt;\r\n                &lt;/RelativeLayout&gt;\r\n            &lt;/RelativeLayout&gt;\r\n        &lt;/com.google.android.gms.ads.formats.UnifiedNativeAdView&gt;\r\n    &lt;/merge&gt;\r\n\r\n2nd AdMob layout file (needs to be implemented)\r\n\r\n    &lt;com.google.android.gms.ads.formats.UnifiedNativeAdView xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\r\n        android:layout_width=&quot;match_parent&quot;\r\n        android:layout_height=&quot;wrap_content&quot;&gt;\r\n    \r\n        &lt;LinearLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\r\n            android:layout_width=&quot;match_parent&quot;\r\n            android:layout_height=&quot;wrap_content&quot;\r\n            android:layout_gravity=&quot;center&quot;\r\n            android:background=&quot;@color/dark_bg&quot;\r\n            android:minHeight=&quot;50dp&quot;\r\n            android:orientation=&quot;vertical&quot;&gt;\r\n    \r\n            &lt;TextView style=&quot;@style/AppTheme.AdAttribution&quot;/&gt;\r\n    \r\n            &lt;LinearLayout\r\n                android:layout_width=&quot;match_parent&quot;\r\n                android:layout_height=&quot;wrap_content&quot;\r\n                android:orientation=&quot;vertical&quot;\r\n                android:paddingLeft=&quot;20dp&quot;\r\n                android:paddingRight=&quot;20dp&quot;\r\n                android:paddingTop=&quot;0dp&quot;&gt;\r\n    \r\n                &lt;LinearLayout\r\n                    android:layout_width=&quot;match_parent&quot;\r\n                    android:layout_height=&quot;wrap_content&quot;\r\n                    android:orientation=&quot;horizontal&quot;&gt;\r\n    \r\n                    &lt;ImageView\r\n                        android:id=&quot;@+id/ad_app_icon&quot;\r\n                        android:layout_width=&quot;40dp&quot;\r\n                        android:layout_height=&quot;40dp&quot;\r\n                        android:adjustViewBounds=&quot;true&quot;\r\n                        android:paddingBottom=&quot;5dp&quot;\r\n                        android:paddingEnd=&quot;5dp&quot;\r\n                        android:paddingRight=&quot;5dp&quot;/&gt;\r\n    \r\n                    &lt;LinearLayout\r\n                        android:layout_width=&quot;match_parent&quot;\r\n                        android:layout_height=&quot;wrap_content&quot;\r\n                        android:orientation=&quot;vertical&quot;&gt;\r\n    \r\n                        &lt;TextView\r\n                            android:id=&quot;@+id/ad_headline&quot;\r\n                            android:layout_width=&quot;match_parent&quot;\r\n                            android:layout_height=&quot;wrap_content&quot;\r\n                            android:textColor=&quot;#0000FF&quot;\r\n                            android:textSize=&quot;12sp&quot;\r\n                            android:textStyle=&quot;bold&quot; /&gt;\r\n    \r\n                        &lt;LinearLayout\r\n                            android:layout_width=&quot;match_parent&quot;\r\n                            android:layout_height=&quot;wrap_content&quot;&gt;\r\n    \r\n                            &lt;TextView\r\n                                android:id=&quot;@+id/ad_advertiser&quot;\r\n                                android:layout_width=&quot;wrap_content&quot;\r\n                                android:layout_height=&quot;match_parent&quot;\r\n                                android:gravity=&quot;bottom&quot;\r\n                                android:textSize=&quot;13sp&quot;\r\n                                android:textStyle=&quot;bold&quot;/&gt;\r\n    \r\n                            &lt;RatingBar\r\n                                android:id=&quot;@+id/ad_stars&quot;\r\n                                style=&quot;?android:attr/ratingBarStyleSmall&quot;\r\n                                android:layout_width=&quot;wrap_content&quot;\r\n                                android:layout_height=&quot;wrap_content&quot;\r\n                                android:isIndicator=&quot;true&quot;\r\n                                android:numStars=&quot;5&quot;\r\n                                android:stepSize=&quot;0.5&quot; /&gt;\r\n                        &lt;/LinearLayout&gt;\r\n    \r\n                    &lt;/LinearLayout&gt;\r\n                &lt;/LinearLayout&gt;\r\n    \r\n                &lt;LinearLayout\r\n                    android:layout_width=&quot;match_parent&quot;\r\n                    android:layout_height=&quot;wrap_content&quot;\r\n                    android:orientation=&quot;vertical&quot;&gt;\r\n    \r\n                    &lt;TextView\r\n                        android:id=&quot;@+id/ad_body&quot;\r\n                        android:layout_width=&quot;wrap_content&quot;\r\n                        android:layout_height=&quot;wrap_content&quot;\r\n                        android:layout_marginRight=&quot;20dp&quot;\r\n                        android:layout_marginEnd=&quot;20dp&quot;\r\n                        android:textSize=&quot;11sp&quot; /&gt;\r\n    \r\n                    &lt;com.google.android.gms.ads.formats.MediaView\r\n                        android:id=&quot;@+id/ad_media&quot;\r\n                        android:layout_gravity=&quot;center_horizontal&quot;\r\n                        android:layout_width=&quot;200dp&quot;\r\n                        android:layout_height=&quot;105dp&quot;\r\n                        android:layout_marginTop=&quot;5dp&quot; /&gt;\r\n    \r\n                    &lt;LinearLayout\r\n                        android:layout_width=&quot;match_parent&quot;\r\n                        android:layout_height=&quot;wrap_content&quot;\r\n                        android:layout_gravity=&quot;end&quot;\r\n                        android:orientation=&quot;horizontal&quot;\r\n                        android:paddingBottom=&quot;5dp&quot;\r\n                        android:paddingTop=&quot;5dp&quot;&gt;\r\n    \r\n                        &lt;TextView\r\n                            android:id=&quot;@+id/ad_price&quot;\r\n                            android:layout_width=&quot;wrap_content&quot;\r\n                            android:layout_height=&quot;wrap_content&quot;\r\n                            android:paddingLeft=&quot;5dp&quot;\r\n                            android:paddingStart=&quot;5dp&quot;\r\n                            android:paddingRight=&quot;5dp&quot;\r\n                            android:paddingEnd=&quot;5dp&quot;\r\n                            android:textSize=&quot;12sp&quot; /&gt;\r\n    \r\n                        &lt;TextView\r\n                            android:id=&quot;@+id/ad_store&quot;\r\n                            android:layout_width=&quot;wrap_content&quot;\r\n                            android:layout_height=&quot;wrap_content&quot;\r\n                            android:paddingLeft=&quot;5dp&quot;\r\n                            android:paddingStart=&quot;5dp&quot;\r\n                            android:paddingRight=&quot;5dp&quot;\r\n                            android:paddingEnd=&quot;5dp&quot;\r\n                            android:textSize=&quot;12sp&quot; /&gt;\r\n    \r\n                        &lt;Button\r\n                            android:background=&quot;@drawable/main_ad_button&quot;\r\n                            android:id=&quot;@+id/ad_call_to_action&quot;\r\n                            android:layout_width=&quot;match_parent&quot;\r\n                            android:layout_height=&quot;wrap_content&quot;\r\n                            android:gravity=&quot;center&quot;\r\n                            android:textSize=&quot;12sp&quot; /&gt;\r\n                    &lt;/LinearLayout&gt;\r\n                &lt;/LinearLayout&gt;\r\n            &lt;/LinearLayout&gt;\r\n        &lt;/LinearLayout&gt;\r\n    &lt;/com.google.android.gms.ads.formats.UnifiedNativeAdView&gt;\r\n\r\n","title":"How to Show two Admob Native ads on same activity in android studio","body":"<p>I want to use 2 Admob native ads in the same activity but with different sizes...\nI already have successfully implemented one ad. now I want to show one more native ad in the same activity. How to do it properly</p>\n<p>Admob implementation in the activity</p>\n<pre><code>private void populateUnifiedNativeAdView(UnifiedNativeAd nativeAd, UnifiedNativeAdView\n            adView) {\n        // Set the media view. Media content will be automatically populated in the media view once\n        MediaView mediaView = adView.findViewById(R.id.ad_media);\n        adView.setMediaView(mediaView);\n\n        // Set other ad assets.\n        adView.setHeadlineView(adView.findViewById(R.id.ad_headline));\n        adView.setBodyView(adView.findViewById(R.id.ad_body));\n        adView.setCallToActionView(adView.findViewById(R.id.ad_call_to_action));\n        adView.setIconView(adView.findViewById(R.id.ad_app_icon));\n        adView.setPriceView(adView.findViewById(R.id.ad_price));\n        adView.setStarRatingView(adView.findViewById(R.id.ad_stars));\n        adView.setStoreView(adView.findViewById(R.id.ad_store));\n        adView.setAdvertiserView(adView.findViewById(R.id.ad_advertiser));\n\n        // The headline is guaranteed to be in every UnifiedNativeAd.\n        ((TextView) adView.getHeadlineView()).setText(nativeAd.getHeadline());\n\n        // These assets aren't guaranteed to be in every UnifiedNativeAd, so it's important to\n        // check before trying to display them.\n        if (nativeAd.getBody() == null) {\n            adView.getBodyView().setVisibility(View.INVISIBLE);\n        } else {\n            adView.getBodyView().setVisibility(View.VISIBLE);\n            ((TextView) adView.getBodyView()).setText(nativeAd.getBody());\n        }\n\n        if (nativeAd.getCallToAction() == null) {\n            adView.getCallToActionView().setVisibility(View.INVISIBLE);\n        } else {\n            adView.getCallToActionView().setVisibility(View.VISIBLE);\n            ((Button) adView.getCallToActionView()).setText(nativeAd.getCallToAction());\n        }\n\n        if (nativeAd.getIcon() == null) {\n            adView.getIconView().setVisibility(View.GONE);\n        } else {\n            ((ImageView) adView.getIconView()).setImageDrawable(\n                    nativeAd.getIcon().getDrawable());\n            adView.getIconView().setVisibility(View.VISIBLE);\n        }\n\n        if (nativeAd.getPrice() == null) {\n            adView.getPriceView().setVisibility(View.INVISIBLE);\n        } else {\n            adView.getPriceView().setVisibility(View.VISIBLE);\n            ((TextView) adView.getPriceView()).setText(nativeAd.getPrice());\n        }\n\n        if (nativeAd.getStore() == null) {\n            adView.getStoreView().setVisibility(View.INVISIBLE);\n        } else {\n            adView.getStoreView().setVisibility(View.VISIBLE);\n            ((TextView) adView.getStoreView()).setText(nativeAd.getStore());\n        }\n\n        if (nativeAd.getStarRating() == null) {\n            adView.getStarRatingView().setVisibility(View.INVISIBLE);\n        } else {\n            ((RatingBar) adView.getStarRatingView())\n                    .setRating(nativeAd.getStarRating().floatValue());\n            adView.getStarRatingView().setVisibility(View.VISIBLE);\n        }\n\n        if (nativeAd.getAdvertiser() == null) {\n            adView.getAdvertiserView().setVisibility(View.INVISIBLE);\n        } else {\n            ((TextView) adView.getAdvertiserView()).setText(nativeAd.getAdvertiser());\n            adView.getAdvertiserView().setVisibility(View.VISIBLE);\n        }\n\n        // This method tells the Google Mobile Ads SDK that you have finished populating your\n        // native ad view with this native ad. The SDK will populate the adView's MediaView\n        // with the media content from this native ad.\n        adView.setNativeAd(nativeAd);\n\n        // Get the video controller for the ad. One will always be provided, even if the ad doesn't\n        // have a video asset.\n        VideoController vc = nativeAd.getVideoController();\n\n        // Updates the UI to say whether or not this ad has a video asset.\n        if (vc.hasVideoContent()) {\n\n            // Create a new VideoLifecycleCallbacks object and pass it to the VideoController. The\n            // VideoController will call methods on this object when events occur in the video\n            // lifecycle.\n            vc.setVideoLifecycleCallbacks(new VideoController.VideoLifecycleCallbacks() {\n                @Override\n                public void onVideoEnd() {\n                    // Publishers should allow native ads to complete video playback before\n                    // refreshing or replacing them with another ad in the same UI location.\n\n                    super.onVideoEnd();\n                }\n            });\n        } else {\n        }\n    }\n\n    /**\n     * Creates a request for a new native ad based on the boolean parameters and calls the\n     * corresponding &quot;populate&quot; method when one is successfully returned.\n     */\n    private void refreshAd() {\n\n        AdLoader.Builder builder = new AdLoader.Builder(this, getString(R.string.admob_native_advance));\n\n        builder.forUnifiedNativeAd(new UnifiedNativeAd.OnUnifiedNativeAdLoadedListener() {\n            @Override\n            public void onUnifiedNativeAdLoaded(UnifiedNativeAd unifiedNativeAd) {\n                // You must call destroy on old ads when you are done with them,\n                // otherwise you will have a memory leak.\n                if (nativeAd != null) {\n                    nativeAd.destroy();\n                }\n//                nativeAd = unifiedNativeAd;\n//\n//\n//                RelativeLayout relativeLayout =\n//                        findViewById(R.id.fl_adplaceholder);\n//                UnifiedNativeAdView adView = (UnifiedNativeAdView) getLayoutInflater()\n//                        .inflate(R.layout.ad_unified, null);\n//                populateUnifiedNativeAdView(unifiedNativeAd, adView);\n//\n//\n//                relativeLayout.removeAllViews();\n//                relativeLayout.addView(adView);\n\n                NativeTemplateStyle styles = new\n                        NativeTemplateStyle.Builder().build();\n                TemplateView adView = findViewById(R.id.adview);\n                adView.setVisibility(View.VISIBLE);\n                adView.setStyles(styles);\n                adView.setNativeAd(unifiedNativeAd);\n            }\n\n        });\n\n        VideoOptions videoOptions = new VideoOptions.Builder()\n                .build();\n\n        NativeAdOptions adOptions = new NativeAdOptions.Builder()\n                .setVideoOptions(videoOptions)\n                .build();\n\n        builder.withNativeAdOptions(adOptions);\n\n        AdLoader adLoader = builder.withAdListener(new AdListener() {\n            @Override\n            public void onAdFailedToLoad(int errorCode) {\n                Log.w(HELPER_TAG, &quot;onAdFailedToLoad: &quot; + errorCode);\n            }\n        }).build();\n\n        adLoader.loadAd(new AdRequest.Builder()\n                .build());\n    }\n</code></pre>\n<p>1st AdMob native ad layout (implemented successfully)</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\n&lt;merge xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\n    xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;\n    &gt;\n    &lt;com.google.android.gms.ads.formats.UnifiedNativeAdView\n        android:id=&quot;@+id/native_ad_view&quot;\n        android:layout_width=&quot;match_parent&quot;\n        android:layout_height=&quot;120dp&quot;\n        android:layout_centerInParent=&quot;true&quot;\n        android:background=&quot;@color/dark_bg&quot;\n        &gt;\n        &lt;RelativeLayout\n            android:layout_width=&quot;match_parent&quot;\n            android:layout_height=&quot;match_parent&quot;\n            android:layout_marginBottom=&quot;5dp&quot;\n            &gt;\n            &lt;ImageView\n                android:id=&quot;@+id/icon&quot;\n                android:layout_width=&quot;60dp&quot;\n                android:layout_height=&quot;60dp&quot;\n                android:layout_marginLeft=&quot;12dp&quot;\n                android:layout_marginTop=&quot;5dp&quot;\n                android:contentDescription=&quot;@null&quot; /&gt;\n            &lt;TextView\n                android:id=&quot;@+id/primary&quot;\n                android:layout_width=&quot;match_parent&quot;\n                android:layout_height=&quot;wrap_content&quot;\n                android:layout_alignTop=&quot;@id/icon&quot;\n                android:layout_alignParentRight=&quot;true&quot;\n                android:layout_marginLeft=&quot;14dp&quot;\n                android:layout_marginTop=&quot;8dp&quot;\n                android:layout_marginRight=&quot;10dp&quot;\n                android:layout_toRightOf=&quot;@id/icon&quot;\n                android:lines=&quot;1&quot;\n                android:textColor=&quot;@color/white&quot;\n                android:textSize=&quot;@dimen/gnt_text_size_large&quot;\n                android:textStyle=&quot;bold&quot; /&gt;\n            &lt;LinearLayout\n                android:id=&quot;@+id/second_row&quot;\n                android:layout_width=&quot;match_parent&quot;\n                android:layout_height=&quot;wrap_content&quot;\n                android:layout_below=&quot;@id/primary&quot;\n                android:layout_marginLeft=&quot;14dp&quot;\n                android:layout_marginTop=&quot;6dp&quot;\n                android:layout_marginRight=&quot;10dp&quot;\n                android:layout_toRightOf=&quot;@id/icon&quot;\n                android:orientation=&quot;horizontal&quot;&gt;\n                &lt;RatingBar\n                    android:id=&quot;@+id/rating_bar&quot;\n                    android:layout_width=&quot;wrap_content&quot;\n                    android:layout_height=&quot;@dimen/gnt_ad_indicator_height&quot;\n                    android:lines=&quot;1&quot;\n                    android:numStars=&quot;0&quot;\n                    android:textColor=&quot;@color/white&quot;\n                    android:textSize=&quot;@dimen/gnt_text_size_small&quot; /&gt;\n                &lt;TextView\n                    android:id=&quot;@+id/secondary&quot;\n                    android:layout_width=&quot;match_parent&quot;\n                    android:layout_height=&quot;match_parent&quot;\n                    android:layout_marginStart=&quot;@dimen/gnt_no_margin&quot;\n                    android:layout_marginTop=&quot;@dimen/gnt_no_margin&quot;\n                    android:layout_marginEnd=&quot;@dimen/gnt_no_margin&quot;\n                    android:layout_marginBottom=&quot;@dimen/gnt_no_margin&quot;\n                    android:gravity=&quot;top&quot;\n                    android:lines=&quot;1&quot;\n                    android:textColor=&quot;@color/white&quot;\n                    android:textSize=&quot;@dimen/gnt_text_size_small&quot; /&gt;\n            &lt;/LinearLayout&gt;\n            &lt;Button\n                android:id=&quot;@+id/cta&quot;\n                android:layout_width=&quot;250dp&quot;\n                android:layout_height=&quot;0dp&quot;\n                android:layout_below=&quot;@id/icon&quot;\n                android:layout_marginLeft=&quot;10dp&quot;\n                android:layout_marginTop=&quot;5dp&quot;\n                android:layout_marginRight=&quot;10dp&quot;\n                android:layout_marginBottom=&quot;5dp&quot;\n                android:background=&quot;@drawable/main_ad_button&quot;\n                android:lines=&quot;1&quot;\n                android:layout_alignParentBottom=&quot;true&quot;\n                android:layout_alignParentEnd=&quot;true&quot;\n                android:textColor=&quot;@color/gnt_white&quot;\n                android:layout_alignParentRight=&quot;true&quot; /&gt;\n            &lt;RelativeLayout\n                android:layout_width=&quot;wrap_content&quot;\n                android:layout_height=&quot;wrap_content&quot;\n                android:background=&quot;@drawable/ad_text_background&quot;\n                &gt;\n                &lt;TextView\n                    android:id=&quot;@+id/ad_notification_view&quot;\n                    android:layout_width=&quot;wrap_content&quot;\n                    android:layout_height=&quot;wrap_content&quot;\n                    android:layout_margin=&quot;5dp&quot;\n                    android:text=&quot;Ad&quot;\n                    android:textColor=&quot;@color/white_color&quot;\n                    android:textSize=&quot;@dimen/gnt_ad_indicator_text_size&quot;\n                    android:textStyle=&quot;bold&quot; /&gt;\n            &lt;/RelativeLayout&gt;\n        &lt;/RelativeLayout&gt;\n    &lt;/com.google.android.gms.ads.formats.UnifiedNativeAdView&gt;\n&lt;/merge&gt;\n</code></pre>\n<p>2nd AdMob layout file (needs to be implemented)</p>\n<pre><code>&lt;com.google.android.gms.ads.formats.UnifiedNativeAdView xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\n    android:layout_width=&quot;match_parent&quot;\n    android:layout_height=&quot;wrap_content&quot;&gt;\n\n    &lt;LinearLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\n        android:layout_width=&quot;match_parent&quot;\n        android:layout_height=&quot;wrap_content&quot;\n        android:layout_gravity=&quot;center&quot;\n        android:background=&quot;@color/dark_bg&quot;\n        android:minHeight=&quot;50dp&quot;\n        android:orientation=&quot;vertical&quot;&gt;\n\n        &lt;TextView style=&quot;@style/AppTheme.AdAttribution&quot;/&gt;\n\n        &lt;LinearLayout\n            android:layout_width=&quot;match_parent&quot;\n            android:layout_height=&quot;wrap_content&quot;\n            android:orientation=&quot;vertical&quot;\n            android:paddingLeft=&quot;20dp&quot;\n            android:paddingRight=&quot;20dp&quot;\n            android:paddingTop=&quot;0dp&quot;&gt;\n\n            &lt;LinearLayout\n                android:layout_width=&quot;match_parent&quot;\n                android:layout_height=&quot;wrap_content&quot;\n                android:orientation=&quot;horizontal&quot;&gt;\n\n                &lt;ImageView\n                    android:id=&quot;@+id/ad_app_icon&quot;\n                    android:layout_width=&quot;40dp&quot;\n                    android:layout_height=&quot;40dp&quot;\n                    android:adjustViewBounds=&quot;true&quot;\n                    android:paddingBottom=&quot;5dp&quot;\n                    android:paddingEnd=&quot;5dp&quot;\n                    android:paddingRight=&quot;5dp&quot;/&gt;\n\n                &lt;LinearLayout\n                    android:layout_width=&quot;match_parent&quot;\n                    android:layout_height=&quot;wrap_content&quot;\n                    android:orientation=&quot;vertical&quot;&gt;\n\n                    &lt;TextView\n                        android:id=&quot;@+id/ad_headline&quot;\n                        android:layout_width=&quot;match_parent&quot;\n                        android:layout_height=&quot;wrap_content&quot;\n                        android:textColor=&quot;#0000FF&quot;\n                        android:textSize=&quot;12sp&quot;\n                        android:textStyle=&quot;bold&quot; /&gt;\n\n                    &lt;LinearLayout\n                        android:layout_width=&quot;match_parent&quot;\n                        android:layout_height=&quot;wrap_content&quot;&gt;\n\n                        &lt;TextView\n                            android:id=&quot;@+id/ad_advertiser&quot;\n                            android:layout_width=&quot;wrap_content&quot;\n                            android:layout_height=&quot;match_parent&quot;\n                            android:gravity=&quot;bottom&quot;\n                            android:textSize=&quot;13sp&quot;\n                            android:textStyle=&quot;bold&quot;/&gt;\n\n                        &lt;RatingBar\n                            android:id=&quot;@+id/ad_stars&quot;\n                            style=&quot;?android:attr/ratingBarStyleSmall&quot;\n                            android:layout_width=&quot;wrap_content&quot;\n                            android:layout_height=&quot;wrap_content&quot;\n                            android:isIndicator=&quot;true&quot;\n                            android:numStars=&quot;5&quot;\n                            android:stepSize=&quot;0.5&quot; /&gt;\n                    &lt;/LinearLayout&gt;\n\n                &lt;/LinearLayout&gt;\n            &lt;/LinearLayout&gt;\n\n            &lt;LinearLayout\n                android:layout_width=&quot;match_parent&quot;\n                android:layout_height=&quot;wrap_content&quot;\n                android:orientation=&quot;vertical&quot;&gt;\n\n                &lt;TextView\n                    android:id=&quot;@+id/ad_body&quot;\n                    android:layout_width=&quot;wrap_content&quot;\n                    android:layout_height=&quot;wrap_content&quot;\n                    android:layout_marginRight=&quot;20dp&quot;\n                    android:layout_marginEnd=&quot;20dp&quot;\n                    android:textSize=&quot;11sp&quot; /&gt;\n\n                &lt;com.google.android.gms.ads.formats.MediaView\n                    android:id=&quot;@+id/ad_media&quot;\n                    android:layout_gravity=&quot;center_horizontal&quot;\n                    android:layout_width=&quot;200dp&quot;\n                    android:layout_height=&quot;105dp&quot;\n                    android:layout_marginTop=&quot;5dp&quot; /&gt;\n\n                &lt;LinearLayout\n                    android:layout_width=&quot;match_parent&quot;\n                    android:layout_height=&quot;wrap_content&quot;\n                    android:layout_gravity=&quot;end&quot;\n                    android:orientation=&quot;horizontal&quot;\n                    android:paddingBottom=&quot;5dp&quot;\n                    android:paddingTop=&quot;5dp&quot;&gt;\n\n                    &lt;TextView\n                        android:id=&quot;@+id/ad_price&quot;\n                        android:layout_width=&quot;wrap_content&quot;\n                        android:layout_height=&quot;wrap_content&quot;\n                        android:paddingLeft=&quot;5dp&quot;\n                        android:paddingStart=&quot;5dp&quot;\n                        android:paddingRight=&quot;5dp&quot;\n                        android:paddingEnd=&quot;5dp&quot;\n                        android:textSize=&quot;12sp&quot; /&gt;\n\n                    &lt;TextView\n                        android:id=&quot;@+id/ad_store&quot;\n                        android:layout_width=&quot;wrap_content&quot;\n                        android:layout_height=&quot;wrap_content&quot;\n                        android:paddingLeft=&quot;5dp&quot;\n                        android:paddingStart=&quot;5dp&quot;\n                        android:paddingRight=&quot;5dp&quot;\n                        android:paddingEnd=&quot;5dp&quot;\n                        android:textSize=&quot;12sp&quot; /&gt;\n\n                    &lt;Button\n                        android:background=&quot;@drawable/main_ad_button&quot;\n                        android:id=&quot;@+id/ad_call_to_action&quot;\n                        android:layout_width=&quot;match_parent&quot;\n                        android:layout_height=&quot;wrap_content&quot;\n                        android:gravity=&quot;center&quot;\n                        android:textSize=&quot;12sp&quot; /&gt;\n                &lt;/LinearLayout&gt;\n            &lt;/LinearLayout&gt;\n        &lt;/LinearLayout&gt;\n    &lt;/LinearLayout&gt;\n&lt;/com.google.android.gms.ads.formats.UnifiedNativeAdView&gt;\n</code></pre>\n"},{"tags":["java","fonts","fontmetrics"],"comments":[{"owner":{"account_id":44852,"reputation":322224,"user_id":131872,"accept_rate":100,"display_name":"camickr"},"score":1,"creation_date":1682516359,"post_id":76111180,"comment_id":134228404,"body_markdown":"I also get 606 using JDK11 on windows 11.  I don&#39;t use any scaling. Maybe scaling causes the difference?","body":"I also get 606 using JDK11 on windows 11.  I don&#39;t use any scaling. Maybe scaling causes the difference?"},{"owner":{"account_id":213468,"reputation":103487,"user_id":466862,"display_name":"Mark Rotteveel"},"score":1,"creation_date":1682519053,"post_id":76111180,"comment_id":134229245,"body_markdown":"@camickr I do use scaling, and I get 606 as well (Java 8, 11 and 17, Windows 11). But given there is no displaying involved here, I would be surprised if it considered scaling. More likely the difference is specific to the OS (e.g. slightly different variants or versions of Arial, or different font rendering pipelines, ligatures enabled/disabled, etc).","body":"@camickr I do use scaling, and I get 606 as well (Java 8, 11 and 17, Windows 11). But given there is no displaying involved here, I would be surprised if it considered scaling. More likely the difference is specific to the OS (e.g. slightly different variants or versions of Arial, or different font rendering pipelines, ligatures enabled/disabled, etc)."},{"owner":{"account_id":384206,"reputation":50386,"user_id":740553,"accept_rate":46,"display_name":"Mike &#39;Pomax&#39; Kamermans"},"score":1,"creation_date":1682523847,"post_id":76111180,"comment_id":134230664,"body_markdown":"Note that  you&#39;re not loading the same font on both computers. You&#39;re loading whatever the system has installed with the name `Arial`. Fonts, just like all other software, have versions so if things look different, or behave differently, step 1 is to check the fonts on those machines. On my Windows 10 machine, for example, &quot;Arial&quot; is Monotype&#39;s Arial version 7.00 from 2017. If you to _guarantee_ the same font metrics across devices, you&#39;d have to bundle the actual font file and then load that (but that&#39;s illegal for Arial, so you&#39;d have to find a free to use font instead)","body":"Note that  you&#39;re not loading the same font on both computers. You&#39;re loading whatever the system has installed with the name <code>Arial</code>. Fonts, just like all other software, have versions so if things look different, or behave differently, step 1 is to check the fonts on those machines. On my Windows 10 machine, for example, &quot;Arial&quot; is Monotype&#39;s Arial version 7.00 from 2017. If you to <i>guarantee</i> the same font metrics across devices, you&#39;d have to bundle the actual font file and then load that (but that&#39;s illegal for Arial, so you&#39;d have to find a free to use font instead)"},{"owner":{"account_id":2053598,"reputation":41316,"user_id":1831987,"display_name":"VGR"},"score":1,"creation_date":1682541307,"post_id":76111180,"comment_id":134234330,"body_markdown":"`new Font(&quot;Arial&quot;, Font.BOLD, 10)` loads a **10 point** font.  Not 10 pixels, 10 points.  A point is &#185;‚ÅÑ‚Çá‚ÇÇ of an inch.  The exact number of pixels are needed to comprise 10 points will depend on the monitor in use.  (And yes, the system, and therefore Java, usually has access to that information.)","body":"<code>new Font(&quot;Arial&quot;, Font.BOLD, 10)</code> loads a <b>10 point</b> font.  Not 10 pixels, 10 points.  A point is &#185;‚ÅÑ‚Çá‚ÇÇ of an inch.  The exact number of pixels are needed to comprise 10 points will depend on the monitor in use.  (And yes, the system, and therefore Java, usually has access to that information.)"},{"owner":{"account_id":2714938,"reputation":6041,"user_id":2342529,"accept_rate":98,"display_name":"Alexandru Severin"},"score":0,"creation_date":1682684568,"post_id":76111180,"comment_id":134258373,"body_markdown":"@Mike&#39;Pomax&#39;Kamermans Thank you, this clarifies it. Would you like to post it as an answer so I can accept it?","body":"@Mike&#39;Pomax&#39;Kamermans Thank you, this clarifies it. Would you like to post it as an answer so I can accept it?"}],"answers":[{"tags":[],"owner":{"account_id":384206,"reputation":50386,"user_id":740553,"accept_rate":46,"display_name":"Mike &#39;Pomax&#39; Kamermans"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1682871620,"creation_date":1682696710,"answer_id":76131224,"question_id":76111180,"body_markdown":"Note that you&#39;re not loading the same font on both computers. You&#39;re loading &quot;whatever the system has installed&quot; that resolves through the name Arial. Just like other software, fonts are versioned, so if things look or behave differently between machines you want to check which actual fonts are being used on those machines.\r\n\r\nFor example, on my Windows 10 machine, &quot;Arial&quot; is Monotype&#39;s Arial v7.00 from 2017. On an older version of Windows Arial could be v6.89 (win8) or 5.22 (win7), which may have subtly or radically different text metrics depending on the text you&#39;re typesetting.\r\n\r\nIf you to need to guarantee the same font metrics across devices, you&#39;d have to bundle the actual font file your application and then load your font from that file instead of loading it by name for the OS to handle.\r\n\r\nHowever: remember that fonts at exactly the same as any other software in that they have licenses, and you can&#39;t just distribute them without permission. Arial, for example, may not be freely distributed without a license from Monotype, so you&#39;d have to find a free-to-distribute font to use instead. (And note that for legal purposes, a free font without a license is not free, but &quot;you have no idea what the license is so you might be breaking the law simply by downloading it at all&quot;. Real free fonts come with an open source software license like the SIL font license that explicitly allow you to redistribute them)","title":"What causes FontMetrics stringWidth to return different values on different machines?","body":"<p>Note that you're not loading the same font on both computers. You're loading &quot;whatever the system has installed&quot; that resolves through the name Arial. Just like other software, fonts are versioned, so if things look or behave differently between machines you want to check which actual fonts are being used on those machines.</p>\n<p>For example, on my Windows 10 machine, &quot;Arial&quot; is Monotype's Arial v7.00 from 2017. On an older version of Windows Arial could be v6.89 (win8) or 5.22 (win7), which may have subtly or radically different text metrics depending on the text you're typesetting.</p>\n<p>If you to need to guarantee the same font metrics across devices, you'd have to bundle the actual font file your application and then load your font from that file instead of loading it by name for the OS to handle.</p>\n<p>However: remember that fonts at exactly the same as any other software in that they have licenses, and you can't just distribute them without permission. Arial, for example, may not be freely distributed without a license from Monotype, so you'd have to find a free-to-distribute font to use instead. (And note that for legal purposes, a free font without a license is not free, but &quot;you have no idea what the license is so you might be breaking the law simply by downloading it at all&quot;. Real free fonts come with an open source software license like the SIL font license that explicitly allow you to redistribute them)</p>\n"}],"owner":{"account_id":2714938,"reputation":6041,"user_id":2342529,"accept_rate":98,"display_name":"Alexandru Severin"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":117,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"accepted_answer_id":76131224,"answer_count":1,"score":-1,"last_activity_date":1682871620,"creation_date":1682514813,"question_id":76111180,"body_markdown":"The following code prints different values when ran on different machines:\r\n\r\n```\r\nimport java.awt.*;\r\nimport java.awt.image.BufferedImage;\r\n\r\npublic class Main {\r\n\r\n     public static void main(String []args){\r\n        Graphics g = new BufferedImage(100, 100, BufferedImage.TYPE_BYTE_BINARY).getGraphics();\r\n        g.setFont(new Font(&quot;Arial&quot;, Font.BOLD, 10));\r\n        FontMetrics fontMetrics = g.getFontMetrics();\r\n        \r\n        int width = fontMetrics.stringWidth(&quot;Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.&quot;);\r\n        \r\n        System.out.println(width);\r\n     }\r\n}\r\n```\r\nI was expecting the output of the program to be the same if I run the code on different computers, but I ran it on two machines and one prints `606` while the other prints `699`.\r\n\r\nWhat can cause this behavior? Does string width calculation depend on the environment? (jdk, operating system, etc?)","title":"What causes FontMetrics stringWidth to return different values on different machines?","body":"<p>The following code prints different values when ran on different machines:</p>\n<pre><code>import java.awt.*;\nimport java.awt.image.BufferedImage;\n\npublic class Main {\n\n     public static void main(String []args){\n        Graphics g = new BufferedImage(100, 100, BufferedImage.TYPE_BYTE_BINARY).getGraphics();\n        g.setFont(new Font(&quot;Arial&quot;, Font.BOLD, 10));\n        FontMetrics fontMetrics = g.getFontMetrics();\n        \n        int width = fontMetrics.stringWidth(&quot;Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.&quot;);\n        \n        System.out.println(width);\n     }\n}\n</code></pre>\n<p>I was expecting the output of the program to be the same if I run the code on different computers, but I ran it on two machines and one prints <code>606</code> while the other prints <code>699</code>.</p>\n<p>What can cause this behavior? Does string width calculation depend on the environment? (jdk, operating system, etc?)</p>\n"},{"tags":["java","math","biginteger","collatz"],"comments":[{"owner":{"account_id":22057425,"reputation":135,"user_id":16320675,"display_name":"user16320675"},"score":1,"creation_date":1682834786,"post_id":76139754,"comment_id":134275746,"body_markdown":"&quot;checking to see if it is equal&quot; -&gt; method `equals()` ( `not()` is bitwise complement and does not take any argument)","body":"&quot;checking to see if it is equal&quot; -&gt; method <code>equals()</code> ( <code>not()</code> is bitwise complement and does not take any argument)"},{"owner":{"account_id":1888781,"reputation":2007,"user_id":1707427,"display_name":"S&#246;ren"},"score":1,"creation_date":1682837619,"post_id":76139754,"comment_id":134275964,"body_markdown":"[Please do not upload images of code/data/errors.](//meta.stackoverflow.com/q/285551)","body":"<a href=\"//meta.stackoverflow.com/q/285551\">Please do not upload images of code/data/errors.</a>"},{"owner":{"account_id":71739,"reputation":307142,"user_id":207421,"accept_rate":82,"display_name":"user207421"},"score":1,"creation_date":1682840014,"post_id":76139754,"comment_id":134276195,"body_markdown":"(1) Don&#39;t use two Scanners. You only need one, and two won&#39;t work. (2) You can&#39;t compare `BigIntegers` to primitve types. Use `BigInteger.equals()`, as already mentioned.","body":"(1) Don&#39;t use two Scanners. You only need one, and two won&#39;t work. (2) You can&#39;t compare <code>BigIntegers</code> to primitve types. Use <code>BigInteger.equals()</code>, as already mentioned."},{"owner":{"account_id":47283,"reputation":703817,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"score":1,"creation_date":1682841017,"post_id":76139754,"comment_id":134276304,"body_markdown":"`java.lang.Error: Unresolved compilation problem` -  This implies that you tried to run some code before fixing the compilation errors.  Don&#39;t do that.  Fix the compilation errors first.  If you do it your way, you need to scratch your head to figure out where the compilation errors actually are!!","body":"<code>java.lang.Error: Unresolved compilation problem</code> -  This implies that you tried to run some code before fixing the compilation errors.  Don&#39;t do that.  Fix the compilation errors first.  If you do it your way, you need to scratch your head to figure out where the compilation errors actually are!!"},{"owner":{"account_id":47283,"reputation":703817,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"score":2,"creation_date":1682841514,"post_id":76139754,"comment_id":134276349,"body_markdown":"https://stackoverflow.com/questions/55791203 is related.  The same applies to the relational operators involving primitive operands; i.e. `==`, `!=`, `&lt;`, `&lt;=`, `&gt;` and `&gt;=` the unary operators `+`, `-` and `~` and the bitwise and shift operators.  The only operators that will work are `==` and `!=` for other (compatible) reference types.","body":"<a href=\"https://stackoverflow.com/questions/55791203\">stackoverflow.com/questions/55791203</a> is related.  The same applies to the relational operators involving primitive operands; i.e. <code>==</code>, <code>!=</code>, <code>&lt;</code>, <code>&lt;=</code>, <code>&gt;</code> and <code>&gt;=</code> the unary operators <code>+</code>, <code>-</code> and <code>~</code> and the bitwise and shift operators.  The only operators that will work are <code>==</code> and <code>!=</code> for other (compatible) reference types."},{"owner":{"account_id":71739,"reputation":307142,"user_id":207421,"accept_rate":82,"display_name":"user207421"},"score":0,"creation_date":1682853139,"post_id":76139754,"comment_id":134277456,"body_markdown":"@xerx593 Neither of those is illegal syntax. Neither of those is illegal at all. In the first example, if `someObject` is `Double`, `Float`, `Byte`, `Short`, `Integer`, or `Long`, the expression is legal semantically, and it is always legal syntactically. If you think otherwise please produce where in the Java Language Specification it says so.","body":"@xerx593 Neither of those is illegal syntax. Neither of those is illegal at all. In the first example, if <code>someObject</code> is <code>Double</code>, <code>Float</code>, <code>Byte</code>, <code>Short</code>, <code>Integer</code>, or <code>Long</code>, the expression is legal semantically, and it is always legal syntactically. If you think otherwise please produce where in the Java Language Specification it says so."},{"owner":{"account_id":372682,"reputation":22426,"user_id":721855,"display_name":"aled"},"score":1,"creation_date":1682858158,"post_id":76139754,"comment_id":134278088,"body_markdown":"&quot;In line 21, the error is with the remainder function. (in case you missed the comment)&quot; people should not need to read comments, you should edit your question to add all relevant information and make it as self-contained as possible. Also include the errors in the questions. And note that there are no line numbers so you should also show the specific line with the specific error.","body":"&quot;In line 21, the error is with the remainder function. (in case you missed the comment)&quot; people should not need to read comments, you should edit your question to add all relevant information and make it as self-contained as possible. Also include the errors in the questions. And note that there are no line numbers so you should also show the specific line with the specific error."},{"owner":{"account_id":71739,"reputation":307142,"user_id":207421,"accept_rate":82,"display_name":"user207421"},"score":0,"creation_date":1682898656,"post_id":76139754,"comment_id":134282947,"body_markdown":"@xerx593 Yes, it is legal syntax. That is a *semantic* error. If it had been illegal syntax you would have got the message &#39;syntax error&#39;.","body":"@xerx593 Yes, it is legal syntax. That is a <i>semantic</i> error. If it had been illegal syntax you would have got the message &#39;syntax error&#39;."}],"answers":[{"tags":[],"owner":{"account_id":7423601,"reputation":18712,"user_id":5646962,"display_name":"Thomas Kl&#228;ger"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1682871543,"creation_date":1682871543,"answer_id":76142287,"question_id":76139754,"body_markdown":"The problem is that `num.remainder(new BigInteger(&quot;2&quot;))` returns another `BigInteger` and you try to compare that `BigInteger` with an int value (0).\r\n\r\nThe Java Language Specification [15.21. Equality Operators](https://docs.oracle.com/javase/specs/jls/se17/html/jls-15.html#jls-15.21) states:\r\n\r\n&gt; The equality operators may be used to compare two operands that are convertible ([&#167;5.1.8](https://docs.oracle.com/javase/specs/jls/se17/html/jls-5.html#jls-5.1.8)) to numeric type, or two operands of type boolean or Boolean, or two operands that are each of either reference type or the null type. All other cases result in a compile-time error.\r\n\r\n(There is an additional constraint for equality operators on reference types, see the last block).\r\n\r\nSince `BigInteger` is a reference type that is not convertible to a numeric type ([5.1.8. Unboxing Conversion](https://docs.oracle.com/javase/specs/jls/se17/html/jls-5.html#jls-5.1.8) mentions that only `Byte`, `Short`, `Character`, `Integer`, `Long`, `Float` and `Double` are) the last clause (all other cases result in a compile-time error) applies.\r\n\r\nTo fix it change the comparison to\r\n\r\n    num.remainder(new BigInteger(&quot;2&quot;)).equals(BigInteger.ZERO)\r\n\r\n---\r\nNote that the `BigInteger` class has some helpful constants for your code:\r\n\r\n    BigInteger.ZERO\r\n    BigInteger.ONE\r\n    BigInteger.TWO\r\n\r\nYour loop makes repeated use of these values and therefore will run faster if you use these constants instead of repeatedly creating new `BigInteger` objects for them.\r\n\r\nIMHO you should even consider creating another local constant for the value three:\r\n\r\n    BigInteger THREE = BigInteger.valueOf(3);\r\n\r\nand use it for example in\r\n\r\n    num.multiply(THREE)\r\n\r\n----\r\nOne more note:\r\n\r\n    num.equals(new BigInteger(&quot;1&quot;)) == false\r\n\r\nlooks weird and can be written shorter as\r\n\r\n    !num.equals(BigInteger.ONE)\r\n\r\n---\r\nOne last note (already mentioned in the comments):\r\n\r\nUse only one `Scanner` for all the input. Using two scanners might seem to work in your simple case, but will fail in others (for example when using input redirection).\r\n\r\nUsing only one scanner can lead to other problems as can be seen in https://stackoverflow.com/questions/13102045/scanner-is-skipping-nextline-after-using-next-or-nextfoo, but it is still the correct way to do.\r\n\r\n---\r\nThere is an additional condition for equality comparison of reference types mentioned in [15.21.3. Reference Equality Operators == and !=](https://docs.oracle.com/javase/specs/jls/se17/html/jls-15.html#jls-15.21.3)\r\n\r\n&gt; It is a compile-time error if it is impossible to convert the type of either operand to the type of the other by a casting conversion (&#167;5.5). The run-time values of the two operands would necessarily be unequal (ignoring the case where both values are null).\r\n\r\n","title":"How to fix incompatible operand with BigInteger and int","body":"<p>The problem is that <code>num.remainder(new BigInteger(&quot;2&quot;))</code> returns another <code>BigInteger</code> and you try to compare that <code>BigInteger</code> with an int value (0).</p>\n<p>The Java Language Specification <a href=\"https://docs.oracle.com/javase/specs/jls/se17/html/jls-15.html#jls-15.21\" rel=\"nofollow noreferrer\">15.21. Equality Operators</a> states:</p>\n<blockquote>\n<p>The equality operators may be used to compare two operands that are convertible (<a href=\"https://docs.oracle.com/javase/specs/jls/se17/html/jls-5.html#jls-5.1.8\" rel=\"nofollow noreferrer\">¬ß5.1.8</a>) to numeric type, or two operands of type boolean or Boolean, or two operands that are each of either reference type or the null type. All other cases result in a compile-time error.</p>\n</blockquote>\n<p>(There is an additional constraint for equality operators on reference types, see the last block).</p>\n<p>Since <code>BigInteger</code> is a reference type that is not convertible to a numeric type (<a href=\"https://docs.oracle.com/javase/specs/jls/se17/html/jls-5.html#jls-5.1.8\" rel=\"nofollow noreferrer\">5.1.8. Unboxing Conversion</a> mentions that only <code>Byte</code>, <code>Short</code>, <code>Character</code>, <code>Integer</code>, <code>Long</code>, <code>Float</code> and <code>Double</code> are) the last clause (all other cases result in a compile-time error) applies.</p>\n<p>To fix it change the comparison to</p>\n<pre><code>num.remainder(new BigInteger(&quot;2&quot;)).equals(BigInteger.ZERO)\n</code></pre>\n<hr />\n<p>Note that the <code>BigInteger</code> class has some helpful constants for your code:</p>\n<pre><code>BigInteger.ZERO\nBigInteger.ONE\nBigInteger.TWO\n</code></pre>\n<p>Your loop makes repeated use of these values and therefore will run faster if you use these constants instead of repeatedly creating new <code>BigInteger</code> objects for them.</p>\n<p>IMHO you should even consider creating another local constant for the value three:</p>\n<pre><code>BigInteger THREE = BigInteger.valueOf(3);\n</code></pre>\n<p>and use it for example in</p>\n<pre><code>num.multiply(THREE)\n</code></pre>\n<hr />\n<p>One more note:</p>\n<pre><code>num.equals(new BigInteger(&quot;1&quot;)) == false\n</code></pre>\n<p>looks weird and can be written shorter as</p>\n<pre><code>!num.equals(BigInteger.ONE)\n</code></pre>\n<hr />\n<p>One last note (already mentioned in the comments):</p>\n<p>Use only one <code>Scanner</code> for all the input. Using two scanners might seem to work in your simple case, but will fail in others (for example when using input redirection).</p>\n<p>Using only one scanner can lead to other problems as can be seen in <a href=\"https://stackoverflow.com/questions/13102045/scanner-is-skipping-nextline-after-using-next-or-nextfoo\">Scanner is skipping nextLine() after using next() or nextFoo()?</a>, but it is still the correct way to do.</p>\n<hr />\n<p>There is an additional condition for equality comparison of reference types mentioned in <a href=\"https://docs.oracle.com/javase/specs/jls/se17/html/jls-15.html#jls-15.21.3\" rel=\"nofollow noreferrer\">15.21.3. Reference Equality Operators == and !=</a></p>\n<blockquote>\n<p>It is a compile-time error if it is impossible to convert the type of either operand to the type of the other by a casting conversion (¬ß5.5). The run-time values of the two operands would necessarily be unequal (ignoring the case where both values are null).</p>\n</blockquote>\n"}],"owner":{"account_id":27008433,"reputation":13,"user_id":20568498,"display_name":"bobby"},"comment_count":8,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":287,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"accepted_answer_id":76142287,"answer_count":1,"score":0,"last_activity_date":1682871543,"creation_date":1682834047,"question_id":76139754,"body_markdown":"Im trying to create a program for the collatz conjecture, and I need it to work for bigger numbers. So, i tried to use the BigInteger class, but it seems to run into an error with the two types: bigint and int.\r\n\r\nI&#39;ve looked up the problems for big int, and it seemingly works with the addition and multiplication. However, when trying to get the remainder when dividing by two, it returns an error. (At the start of runtime).\r\n\r\n    import java.math.BigInteger;\r\n\timport java.math.Bigdecimal;\r\n\timport java.util.Objects;\r\n\timport java.util.Scanner;\r\n\tpublic class Main {\r\n\t    /**\r\n\t     * @param args\r\n\t     */\r\n\t    public static void main(String[] args) {\r\n\t        boolean repeat = true;\r\n\t        while (repeat){\r\n\t            int i = 0;\r\n\t            Scanner intIn = new Scanner(System.in);\r\n\t            Scanner strIn = new Scanner(System.in);\r\n\t            System.out.println(&quot;Enter number you want solved, Don&#39;t type 0. Use this program with caution&quot;);\r\n\t            BigInteger num = intIn.nextBigInteger();\r\n\t            while (num.equals(new BigInteger(&quot;1&quot;)) == false){\r\n\t                if (num.equals(new BigInteger(&quot;1&quot;))){\r\n\t                  // The issue currently is that the remainder function returns an error, but im not sure exactly what is wrong with it.\r\n\t                } else if (num.remainder(new BigInteger(&quot;2&quot;)) == 0) {\r\n\t                    num = num.divide(new BigInteger(&quot;2&quot;));\r\n\t                } else {\r\n\t                    num = num.multiply(new BigInteger(&quot;3&quot;));\r\n\t                    num = num.add(new BigInteger(&quot;1&quot;));\r\n\t                }\r\n\t                i += 1;\r\n\t            }\r\n\t            System.out.println(&quot;It took &quot; + i + &quot; steps to reach 1. Would you like to do another number? (yes/no)&quot;);\r\n\t            String yn = strIn.nextLine();\r\n\t            if (Objects.equals(yn, &quot;no&quot;)){\r\n\t                repeat = false;\r\n\t            }\r\n\t        }\r\n\t    }\r\n\t}\r\n\r\n\r\nIn line 21, the error is with the remainder function. (in case you missed the comment)","title":"How to fix incompatible operand with BigInteger and int","body":"<p>Im trying to create a program for the collatz conjecture, and I need it to work for bigger numbers. So, i tried to use the BigInteger class, but it seems to run into an error with the two types: bigint and int.</p>\n<p>I've looked up the problems for big int, and it seemingly works with the addition and multiplication. However, when trying to get the remainder when dividing by two, it returns an error. (At the start of runtime).</p>\n<pre><code>import java.math.BigInteger;\nimport java.math.Bigdecimal;\nimport java.util.Objects;\nimport java.util.Scanner;\npublic class Main {\n    /**\n     * @param args\n     */\n    public static void main(String[] args) {\n        boolean repeat = true;\n        while (repeat){\n            int i = 0;\n            Scanner intIn = new Scanner(System.in);\n            Scanner strIn = new Scanner(System.in);\n            System.out.println(&quot;Enter number you want solved, Don't type 0. Use this program with caution&quot;);\n            BigInteger num = intIn.nextBigInteger();\n            while (num.equals(new BigInteger(&quot;1&quot;)) == false){\n                if (num.equals(new BigInteger(&quot;1&quot;))){\n                  // The issue currently is that the remainder function returns an error, but im not sure exactly what is wrong with it.\n                } else if (num.remainder(new BigInteger(&quot;2&quot;)) == 0) {\n                    num = num.divide(new BigInteger(&quot;2&quot;));\n                } else {\n                    num = num.multiply(new BigInteger(&quot;3&quot;));\n                    num = num.add(new BigInteger(&quot;1&quot;));\n                }\n                i += 1;\n            }\n            System.out.println(&quot;It took &quot; + i + &quot; steps to reach 1. Would you like to do another number? (yes/no)&quot;);\n            String yn = strIn.nextLine();\n            if (Objects.equals(yn, &quot;no&quot;)){\n                repeat = false;\n            }\n        }\n    }\n}\n</code></pre>\n<p>In line 21, the error is with the remainder function. (in case you missed the comment)</p>\n"},{"tags":["java","probability","uuid","birthday-paradox"],"comments":[{"owner":{"account_id":10438857,"reputation":11198,"user_id":7696223,"display_name":"Scotty Jamison"},"score":3,"creation_date":1682365797,"post_id":76095452,"comment_id":134200849,"body_markdown":"...no idea. One fun test to try, would be to through up a quick code sample that uses `UUID.randomUUID()` to generate 50,000 7-digit IDs. Do you see collsions 99% of the time you run this program? Perhaps the pseudo-random-number generator behind `UUID.randomUUID()` is skewing the probability somehow.","body":"...no idea. One fun test to try, would be to through up a quick code sample that uses <code>UUID.randomUUID()</code> to generate 50,000 7-digit IDs. Do you see collsions 99% of the time you run this program? Perhaps the pseudo-random-number generator behind <code>UUID.randomUUID()</code> is skewing the probability somehow."},{"owner":{"account_id":1691630,"reputation":49583,"user_id":1553851,"accept_rate":73,"display_name":"shmosel"},"score":0,"creation_date":1682366363,"post_id":76095452,"comment_id":134200959,"body_markdown":"I did a quick test and got 49993 uniques. Can you share a [mcve]?","body":"I did a quick test and got 49993 uniques. Can you share a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>?"},{"owner":{"account_id":372682,"reputation":22426,"user_id":721855,"display_name":"aled"},"score":0,"creation_date":1682366419,"post_id":76095452,"comment_id":134200972,"body_markdown":"Are you sure you are calculating the formula right, and using the right formula at it? 16^7=268435456, which is way more than 50000. You should not have too much collisions. Unlike the traditional birthday problem where the number of days is just 365 and number of people is usually higher.","body":"Are you sure you are calculating the formula right, and using the right formula at it? 16^7=268435456, which is way more than 50000. You should not have too much collisions. Unlike the traditional birthday problem where the number of days is just 365 and number of people is usually higher."},{"owner":{"account_id":17000499,"reputation":48397,"user_id":12299000,"display_name":"kaya3"},"score":2,"creation_date":1682366445,"post_id":76095452,"comment_id":134200974,"body_markdown":"Given that your arithmetic is correct, there are four plausible explanations: (1) you got lucky, (2) the IDs are not actually truncated to 7 digits, (3) the uniqueness constraint is not being applied properly, (4) the code doing the insertions had some logic to check and retry when it generated a duplicate. There is not really any way for us to know what happened for sure with just the information in your question.","body":"Given that your arithmetic is correct, there are four plausible explanations: (1) you got lucky, (2) the IDs are not actually truncated to 7 digits, (3) the uniqueness constraint is not being applied properly, (4) the code doing the insertions had some logic to check and retry when it generated a duplicate. There is not really any way for us to know what happened for sure with just the information in your question."},{"owner":{"account_id":27657,"reputation":442143,"user_id":73226,"accept_rate":100,"display_name":"Martin Smith"},"score":0,"creation_date":1682368833,"post_id":76095452,"comment_id":134201455,"body_markdown":"This site agrees with your 99.05% calculation https://www.bdayprob.com/ https://i.stack.imgur.com/HvtnG.png","body":"This site agrees with your 99.05% calculation <a href=\"https://www.bdayprob.com/\" rel=\"nofollow noreferrer\">bdayprob.com</a> <a href=\"https://i.stack.imgur.com/HvtnG.png\" rel=\"nofollow noreferrer\">i.stack.imgur.com/HvtnG.png</a>"},{"owner":{"account_id":399622,"reputation":4097,"user_id":765091,"display_name":"slothrop"},"score":0,"creation_date":1682369220,"post_id":76095452,"comment_id":134201518,"body_markdown":"@aled *16^7=268435456, which is way more than 50000.* True, but it&#39;s not way more than 50000 *squared*, which is what matters. The probability of a collision is approximately `1 - exp(-n^2/2d)` - see https://en.wikipedia.org/wiki/Birthday_problem#Approximations","body":"@aled <i>16^7=268435456, which is way more than 50000.</i> True, but it&#39;s not way more than 50000 <i>squared</i>, which is what matters. The probability of a collision is approximately <code>1 - exp(-n^2&#47;2d)</code> - see <a href=\"https://en.wikipedia.org/wiki/Birthday_problem#Approximations\" rel=\"nofollow noreferrer\">en.wikipedia.org/wiki/Birthday_problem#Approximations</a>"},{"owner":{"account_id":372682,"reputation":22426,"user_id":721855,"display_name":"aled"},"score":0,"creation_date":1682369293,"post_id":76095452,"comment_id":134201535,"body_markdown":"that proves that we can not trust common sense related to cryptography","body":"that proves that we can not trust common sense related to cryptography"},{"owner":{"account_id":399622,"reputation":4097,"user_id":765091,"display_name":"slothrop"},"score":1,"creation_date":1682369473,"post_id":76095452,"comment_id":134201572,"body_markdown":"@aled yes indeed, that&#39;s why they call it a paradox :) It makes mathematical sense but it surprises our everyday intuitions","body":"@aled yes indeed, that&#39;s why they call it a paradox :) It makes mathematical sense but it surprises our everyday intuitions"},{"owner":{"account_id":10438857,"reputation":11198,"user_id":7696223,"display_name":"Scotty Jamison"},"score":2,"creation_date":1682369998,"post_id":76095452,"comment_id":134201697,"body_markdown":"99% is a fairly high probability, but a 1-in-100 chance is still fairly plausible. Given that there doesn&#39;t seem to be any alternative explanation (especially since example runs were made that produced similar probabilities), and assuming you&#39;ve read the code right and there&#39;s nothing else funky going on, you may just have to say that this was crazy luck. But, if you don&#39;t fix the issue soon, you&#39;re going to run into a collection fairly quickly - chances of collisions just get higher the more you stick in there!","body":"99% is a fairly high probability, but a 1-in-100 chance is still fairly plausible. Given that there doesn&#39;t seem to be any alternative explanation (especially since example runs were made that produced similar probabilities), and assuming you&#39;ve read the code right and there&#39;s nothing else funky going on, you may just have to say that this was crazy luck. But, if you don&#39;t fix the issue soon, you&#39;re going to run into a collection fairly quickly - chances of collisions just get higher the more you stick in there!"},{"owner":{"account_id":10438857,"reputation":11198,"user_id":7696223,"display_name":"Scotty Jamison"},"score":0,"creation_date":1682370056,"post_id":76095452,"comment_id":134201708,"body_markdown":"(or, maybe collisions have occurred - do you have a way of knowing when a collision has happened and caused an insertion to fail?)","body":"(or, maybe collisions have occurred - do you have a way of knowing when a collision has happened and caused an insertion to fail?)"},{"owner":{"account_id":399622,"reputation":4097,"user_id":765091,"display_name":"slothrop"},"score":0,"creation_date":1682370207,"post_id":76095452,"comment_id":134201741,"body_markdown":"Stepping back a bit, if the requirement is to give each DB row a key which is guaranteed unique but doesn&#39;t need to be meaningful - the DBMS should be able to take care of that for you if you define the column appropriately.","body":"Stepping back a bit, if the requirement is to give each DB row a key which is guaranteed unique but doesn&#39;t need to be meaningful - the DBMS should be able to take care of that for you if you define the column appropriately."},{"owner":{"account_id":886614,"reputation":29561,"user_id":925913,"accept_rate":82,"display_name":"Andrew Cheong"},"score":0,"creation_date":1682370983,"post_id":76095452,"comment_id":134201895,"body_markdown":"Thanks for everyone for thoughts and ideas. I&#39;ve edited in a mini test. I inherited this service recently‚Äîthe successful 50,000-insert happened in 3 months ago‚Äîwe don&#39;t keep GCP logs more than 30 days old unfortunately. This code is used for generating 1-time use promo codes, _e.g._ SUMMER23-65ACFF9, so it needs some randomization, can&#39;t just be an incremented field in the DB. I checked the code in Github history back to January‚ÄîI see nothing that would have aided the success. But of course I agree with everyone that I haven&#39;t given enough info for a definitive answer‚ÄîI was looking for ideas.","body":"Thanks for everyone for thoughts and ideas. I&#39;ve edited in a mini test. I inherited this service recently‚Äîthe successful 50,000-insert happened in 3 months ago‚Äîwe don&#39;t keep GCP logs more than 30 days old unfortunately. This code is used for generating 1-time use promo codes, <i>e.g.</i> SUMMER23-65ACFF9, so it needs some randomization, can&#39;t just be an incremented field in the DB. I checked the code in Github history back to January‚ÄîI see nothing that would have aided the success. But of course I agree with everyone that I haven&#39;t given enough info for a definitive answer‚ÄîI was looking for ideas."},{"owner":{"account_id":91942,"reputation":8072,"user_id":252218,"accept_rate":91,"display_name":"BoppreH"},"score":1,"creation_date":1682371425,"post_id":76095452,"comment_id":134201975,"body_markdown":"Reproduced in Python: `from uuid import uuid4; [len({uuid4().hex[:7] for i in range(50000)}) for i in range(100)]`. I got one collision-free set in 200 trials.","body":"Reproduced in Python: <code>from uuid import uuid4; [len({uuid4().hex[:7] for i in range(50000)}) for i in range(100)]</code>. I got one collision-free set in 200 trials."},{"owner":{"account_id":886614,"reputation":29561,"user_id":925913,"accept_rate":82,"display_name":"Andrew Cheong"},"score":0,"creation_date":1682415464,"post_id":76095452,"comment_id":134207811,"body_markdown":"I finally have an explanation. I&#39;ve self-answered this question. Thank you to everyone who contributed possibilities (some of you _e.g._ @kaya3 hit the nail on the head or were very close).","body":"I finally have an explanation. I&#39;ve self-answered this question. Thank you to everyone who contributed possibilities (some of you <i>e.g.</i> @kaya3 hit the nail on the head or were very close)."},{"owner":{"account_id":5404,"reputation":22089,"user_id":8681,"accept_rate":67,"display_name":"Jorn"},"score":0,"creation_date":1682423701,"post_id":76095452,"comment_id":134209688,"body_markdown":"Your image is black on a dark gray background (in dark mode). It&#39;s nearly impossible to read.","body":"Your image is black on a dark gray background (in dark mode). It&#39;s nearly impossible to read."},{"owner":{"account_id":886614,"reputation":29561,"user_id":925913,"accept_rate":82,"display_name":"Andrew Cheong"},"score":1,"creation_date":1682425453,"post_id":76095452,"comment_id":134210176,"body_markdown":"@Jorn - Oh, thanks for pointing that out. I copied the image directly from Wikipedia. It must have been a transparent PNG. I&#39;ve replaced it with a screenshot.","body":"@Jorn - Oh, thanks for pointing that out. I copied the image directly from Wikipedia. It must have been a transparent PNG. I&#39;ve replaced it with a screenshot."},{"owner":{"account_id":5392262,"reputation":4671,"user_id":4294399,"display_name":"General Grievance"},"score":0,"creation_date":1682542038,"post_id":76095452,"comment_id":134234452,"body_markdown":"@AndrewCheong If you want to get fancy, you can use Google&#39;s allegedly-deprecated Charts API too. Short version of what you used, [here](https://chart.googleapis.com/chart?cht=tx&amp;chl=p%28n%3Bd%29%20%5Capprox%201%20-%20%5C%28%5Cfrac%7Bd-1%7D%7Bd%7D%5C%29%5E%7B%5Cfrac%7Bn%28n-1%29%7D%7B2%7D%7D)","body":"@AndrewCheong If you want to get fancy, you can use Google&#39;s allegedly-deprecated Charts API too. Short version of what you used, <a href=\"https://chart.googleapis.com/chart?cht=tx&amp;chl=p%28n%3Bd%29%20%5Capprox%201%20-%20%5C%28%5Cfrac%7Bd-1%7D%7Bd%7D%5C%29%5E%7B%5Cfrac%7Bn%28n-1%29%7D%7B2%7D%7D\" rel=\"nofollow noreferrer\">here</a>"}],"answers":[{"tags":[],"owner":{"account_id":401843,"reputation":89768,"user_id":768644,"display_name":"rzwitserloot"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1682377796,"creation_date":1682377796,"answer_id":76096696,"question_id":76095452,"body_markdown":"Running the exact code you pasted, I get `false`, 10 times. Which means: Yes, collision occurs, quite reliably. Continuing to run until a &#39;true&#39; is returned, I get:\r\n\r\n```\r\n7685\r\n27479\r\n15262\r\n46177\r\n18297\r\n17230\r\n14050\r\n12091\r\n39249\r\n8921\r\n```\r\n\r\nWhich seems to match the math, that&#39;s about what you expect (these numbers represent: The 39249th id I added collided with an already existing ID).\r\n\r\nI assume that you have asked this question because you didn&#39;t actually run this code on your machine or misinterpreted what &#39;false&#39; means.\r\n\r\nIf truly you run the EXACT code you pasted  and you get anything but 10x `false` (well, 1 in 120 or so would be a true by happenstance), then something very, very bizarre is going wrong, most likely related to exactly how random number generation works on your bizarro JVM. But, that sounds _very_ farfetched indeed.\r\n\r\nHere is the slightly adjusted code to print point-of-duplication:\r\n\r\n```\r\n        final int N = 20000;\r\n        for (int trial = 0; trial &lt; 10; trial++) {\r\n            HashSet&lt;String&gt; strings = new HashSet&lt;&gt;();\r\n            int i = 0;\r\n            while (true) {\r\n                i++;\r\n                String uuid = UUID.randomUUID().toString();\r\n                String id = uuid.substring(uuid.length() - 7);\r\n                if (strings.contains(id)) {\r\n                    success = false;\r\n                    System.out.println(i);\r\n                    break;\r\n                }\r\n                strings.add(id);\r\n            }\r\n//            System.out.println(success);\r\n        }\r\n```\r\n\r\nSome explanations for what your friend has observed. These are wild stabs in the dark:\r\n\r\n* They do have collisions and misconstrued the situation: Whatever checks they did to ensure there are no collisions was done erroneously.\r\n* Their code will pick up on a collision and &#39;reroll the dice&#39;. In which case your application will grind to a halt over time, as you get closer and closer to 16^7 entries in the database, the amount of rerolls on the random UUID until you luck into one that doesn&#39;t collide grows exponentionally near the end. Your friend didn&#39;t tell you this, or forgot that their code does this.\r\n* The query as designed doesn&#39;t _actually_ insert the last 7 characters of the UUID, but instead inserts the whole UUID.\r\n* The query as designed doesn&#39;t _actually_ insert the last 7 characters of the UUID, but instead the db default which is e.g. an auto increment (a db SEQUENCE).\r\n* The UUID generator your friend uses isn&#39;t a &#39;normal&#39; one (that randoms it up) but a modified variant; various such variants exist; they could for example have their own UUID generator that just generates 000001, 000002, and so on. In which case you won&#39;t get a collision until 16^7 records are added.\r\n","title":"How was there no collision among 50,000 random 7-digit hex strings? (The Birthday Problem)","body":"<p>Running the exact code you pasted, I get <code>false</code>, 10 times. Which means: Yes, collision occurs, quite reliably. Continuing to run until a 'true' is returned, I get:</p>\n<pre><code>7685\n27479\n15262\n46177\n18297\n17230\n14050\n12091\n39249\n8921\n</code></pre>\n<p>Which seems to match the math, that's about what you expect (these numbers represent: The 39249th id I added collided with an already existing ID).</p>\n<p>I assume that you have asked this question because you didn't actually run this code on your machine or misinterpreted what 'false' means.</p>\n<p>If truly you run the EXACT code you pasted  and you get anything but 10x <code>false</code> (well, 1 in 120 or so would be a true by happenstance), then something very, very bizarre is going wrong, most likely related to exactly how random number generation works on your bizarro JVM. But, that sounds <em>very</em> farfetched indeed.</p>\n<p>Here is the slightly adjusted code to print point-of-duplication:</p>\n<pre><code>        final int N = 20000;\n        for (int trial = 0; trial &lt; 10; trial++) {\n            HashSet&lt;String&gt; strings = new HashSet&lt;&gt;();\n            int i = 0;\n            while (true) {\n                i++;\n                String uuid = UUID.randomUUID().toString();\n                String id = uuid.substring(uuid.length() - 7);\n                if (strings.contains(id)) {\n                    success = false;\n                    System.out.println(i);\n                    break;\n                }\n                strings.add(id);\n            }\n//            System.out.println(success);\n        }\n</code></pre>\n<p>Some explanations for what your friend has observed. These are wild stabs in the dark:</p>\n<ul>\n<li>They do have collisions and misconstrued the situation: Whatever checks they did to ensure there are no collisions was done erroneously.</li>\n<li>Their code will pick up on a collision and 'reroll the dice'. In which case your application will grind to a halt over time, as you get closer and closer to 16^7 entries in the database, the amount of rerolls on the random UUID until you luck into one that doesn't collide grows exponentionally near the end. Your friend didn't tell you this, or forgot that their code does this.</li>\n<li>The query as designed doesn't <em>actually</em> insert the last 7 characters of the UUID, but instead inserts the whole UUID.</li>\n<li>The query as designed doesn't <em>actually</em> insert the last 7 characters of the UUID, but instead the db default which is e.g. an auto increment (a db SEQUENCE).</li>\n<li>The UUID generator your friend uses isn't a 'normal' one (that randoms it up) but a modified variant; various such variants exist; they could for example have their own UUID generator that just generates 000001, 000002, and so on. In which case you won't get a collision until 16^7 records are added.</li>\n</ul>\n"},{"tags":[],"owner":{"account_id":886614,"reputation":29561,"user_id":925913,"accept_rate":82,"display_name":"Andrew Cheong"},"down_vote_count":0,"up_vote_count":7,"is_accepted":true,"score":7,"last_activity_date":1682870665,"creation_date":1682415376,"answer_id":76099679,"question_id":76095452,"body_markdown":"Finally I have an explanation. Thank you everyone for helpful ideas.\r\n\r\n**tl;dr** - I thought there had _had_ to have been a unique constraint at the time of insert, by the fact that indeed there were 50,000 distinct codes in the database. But it turned out there was _not_ a constraint at that time. There indeed were duplicates among the 50,000 originally, that a month later were found and modified via a one-time SQL statement (modified by appending a &quot;1&quot;).\r\n\r\n**Full explanation:**\r\n\r\nThis code was about generating one-time use promo codes such as SUMMER23-65ACFF9. This is how I reasoned that indeed 50,000 _distinct_ codes had been inserted into the database:\r\n\r\n[![enter image description here][1]][1]\r\n\r\nThis table didn&#39;t have a timestamp field (_e.g._ last_modified) or I might have had a hint sooner. I only knew that the _batch_ of 50,000 promo codes were inserted on January 6th, 2023‚Äî3 months ago.\r\n\r\n[![enter image description here][2]][2]\r\n\r\nI browsed the repo at the last commit before January 6th, 2023 to see if something about the code back then might have allowed 50,000 codes to succeed. The relevant code was this:\r\n\r\n[![enter image description here][3]][3]\r\n\r\nI believed that, because of the calls to .rollback(), the insert of 50,000 rows was being done atomically. In other words, if a single insert failed, all the inserts up until then should have been rolled back.\r\n\r\n(So one possibility was that my colleague(s) just kept retrying and retrying until they hit the 1% jackpot. But when I asked them, that didn&#39;t seem to be the case. They did not recall having to retry at all.)\r\n\r\nI did wonder if the constraint for unique promo_code_id existed at the time of insertion. I checked that it did exist:\r\n\r\n[![enter image description here][4]][4]\r\n\r\nI was hoping to find a timestamp for when this constraint was created but didn&#39;t immediately see one. I should have pursued that a little further, but I didn&#39;t because: I had already queried for a count of _distinct_ promo_code_ids and gotten 50,000 (see first screenshot above). Constraint or no constraint, the probability of ending up with 50,000 distinct codes was still less than 1%. **This is where I made a faulty assumption: that the codes hadn&#39;t been tampered with _since_.**\r\n\r\nToday I came across a Liquibase XML change in February (a month after the &quot;successful&quot; 50,000 inserts) where we apparently added the constraint:\r\n\r\n[![enter image description here][5]][5]\r\n\r\nBut notice the SQL that comes with that change, besides adding the unique constraint. **We essentially ran a script to add a &quot;1&quot; to the end of all duplicate codes.** So _that_ is how the &quot;insert of 50,000 codes without duplicates&quot; succeeded: It didn&#39;t‚Äîit was without constraint in the first place, and corrected afterward.\r\n\r\n  [1]: https://i.stack.imgur.com/6J2Ob.png\r\n  [2]: https://i.stack.imgur.com/5fUoT.png\r\n  [3]: https://i.stack.imgur.com/XNY7Y.png\r\n  [4]: https://i.stack.imgur.com/u9Xlt.png\r\n  [5]: https://i.stack.imgur.com/MEMlr.png","title":"How was there no collision among 50,000 random 7-digit hex strings? (The Birthday Problem)","body":"<p>Finally I have an explanation. Thank you everyone for helpful ideas.</p>\n<p><strong>tl;dr</strong> - I thought there had <em>had</em> to have been a unique constraint at the time of insert, by the fact that indeed there were 50,000 distinct codes in the database. But it turned out there was <em>not</em> a constraint at that time. There indeed were duplicates among the 50,000 originally, that a month later were found and modified via a one-time SQL statement (modified by appending a &quot;1&quot;).</p>\n<p><strong>Full explanation:</strong></p>\n<p>This code was about generating one-time use promo codes such as SUMMER23-65ACFF9. This is how I reasoned that indeed 50,000 <em>distinct</em> codes had been inserted into the database:</p>\n<p><a href=\"https://i.stack.imgur.com/6J2Ob.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/6J2Ob.png\" alt=\"enter image description here\" /></a></p>\n<p>This table didn't have a timestamp field (<em>e.g.</em> last_modified) or I might have had a hint sooner. I only knew that the <em>batch</em> of 50,000 promo codes were inserted on January 6th, 2023‚Äî3 months ago.</p>\n<p><a href=\"https://i.stack.imgur.com/5fUoT.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/5fUoT.png\" alt=\"enter image description here\" /></a></p>\n<p>I browsed the repo at the last commit before January 6th, 2023 to see if something about the code back then might have allowed 50,000 codes to succeed. The relevant code was this:</p>\n<p><a href=\"https://i.stack.imgur.com/XNY7Y.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/XNY7Y.png\" alt=\"enter image description here\" /></a></p>\n<p>I believed that, because of the calls to .rollback(), the insert of 50,000 rows was being done atomically. In other words, if a single insert failed, all the inserts up until then should have been rolled back.</p>\n<p>(So one possibility was that my colleague(s) just kept retrying and retrying until they hit the 1% jackpot. But when I asked them, that didn't seem to be the case. They did not recall having to retry at all.)</p>\n<p>I did wonder if the constraint for unique promo_code_id existed at the time of insertion. I checked that it did exist:</p>\n<p><a href=\"https://i.stack.imgur.com/u9Xlt.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/u9Xlt.png\" alt=\"enter image description here\" /></a></p>\n<p>I was hoping to find a timestamp for when this constraint was created but didn't immediately see one. I should have pursued that a little further, but I didn't because: I had already queried for a count of <em>distinct</em> promo_code_ids and gotten 50,000 (see first screenshot above). Constraint or no constraint, the probability of ending up with 50,000 distinct codes was still less than 1%. <strong>This is where I made a faulty assumption: that the codes hadn't been tampered with <em>since</em>.</strong></p>\n<p>Today I came across a Liquibase XML change in February (a month after the &quot;successful&quot; 50,000 inserts) where we apparently added the constraint:</p>\n<p><a href=\"https://i.stack.imgur.com/MEMlr.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/MEMlr.png\" alt=\"enter image description here\" /></a></p>\n<p>But notice the SQL that comes with that change, besides adding the unique constraint. <strong>We essentially ran a script to add a &quot;1&quot; to the end of all duplicate codes.</strong> So <em>that</em> is how the &quot;insert of 50,000 codes without duplicates&quot; succeeded: It didn't‚Äîit was without constraint in the first place, and corrected afterward.</p>\n"},{"tags":[],"owner":{"account_id":3976045,"reputation":888,"user_id":3279222,"display_name":"OldFrank"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1682462371,"creation_date":1682462371,"answer_id":76105929,"question_id":76095452,"body_markdown":"Interesting statistics - I&#39;m missing the &quot;business-side-view&quot; in this discussion. \r\nAssume that 2% - 5% of targeted customers are effectively using the promo code: What is the chance of a customer getting a message &quot;your promo code already used&quot; AND going to competition? Rate of customer loss is probably not worth the effort of all this complex dual-platform uniqueness-enhancement. \r\nFrom a statistical viewpoint: adding a &quot;1&quot; at DB-level won&#39;t fix a triple occurence, but as stated above: it won&#39;t matter. \r\n","title":"How was there no collision among 50,000 random 7-digit hex strings? (The Birthday Problem)","body":"<p>Interesting statistics - I'm missing the &quot;business-side-view&quot; in this discussion.\nAssume that 2% - 5% of targeted customers are effectively using the promo code: What is the chance of a customer getting a message &quot;your promo code already used&quot; AND going to competition? Rate of customer loss is probably not worth the effort of all this complex dual-platform uniqueness-enhancement.\nFrom a statistical viewpoint: adding a &quot;1&quot; at DB-level won't fix a triple occurence, but as stated above: it won't matter.</p>\n"}],"owner":{"account_id":886614,"reputation":29561,"user_id":925913,"accept_rate":82,"display_name":"Andrew Cheong"},"comment_count":17,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":673,"favorite_count":0,"down_vote_count":1,"up_vote_count":19,"accepted_answer_id":76099679,"answer_count":3,"score":18,"last_activity_date":1682870665,"creation_date":1682364771,"question_id":76095452,"body_markdown":"I&#39;ve encountered some code that generates a number of UUIDs via `UUID.randomUUID()`, takes the last 7 digits of each (recent versions of UUID are uniformly distributed in terms of entropy), and uses that as a key to insert rows into a database.\r\n\r\nI wondered what the probability of collision was. I remembered [the Birthday Problem](https://en.wikipedia.org/wiki/Birthday_problem). This is an instance of that problem, is it not? Instead of 365 days in a year, there are 16^7 possible strings. Then according to that Wikipedia page, the probability of collision given _n_ strings is\r\n\r\n[![enter image description here][1]][1]\r\n\r\nwhere _d_ is 16^7.\r\n\r\nA colleague asserted that they were able to insert 50,000 rows without an issue. I doubted this because the probably of collision with _n=50,000_ and _d=16^7_ is\r\n\r\n```\r\n1-((16^7-1)/16^7)^(50000*(50000-1)/2) = 99.05%\r\n```\r\n\r\nBut then I checked our database. Indeed the 50,000 inserts succeeded.\r\n\r\nHow was that possible? (Besides that they got really lucky.) Am I misapplying the Birthday Problem?\r\n\r\n---\r\n\r\n**Edit**\r\n\r\nHere&#39;s a minimal test that shows there _should_ have been collisions.\r\n\r\n```\r\nimport java.util.UUID;\r\nimport java.util.HashSet;\r\n\r\npublic class MyClass {\r\n    public static void main(String args[]) {\r\n        final int N = 50000;\r\n        for (int trial = 0; trial &lt; 10; trial++) {\r\n            HashSet&lt;String&gt; strings = new HashSet&lt;&gt;();\r\n            Boolean success = true;\r\n            for (int i = 0; i &lt; N; i++) {\r\n                String uuid = UUID.randomUUID().toString();\r\n                String id = uuid.substring(uuid.length() - 7);\r\n                if (strings.contains(id)) {\r\n                    success = false;\r\n                    // System.out.println(id);\r\n                    break;\r\n                }\r\n                strings.add(id);\r\n            }\r\n            System.out.println(success);\r\n        }\r\n    }\r\n}\r\n```\r\n\r\nFor N=50,000, 10 out of 10 attempts had a collision‚Äîwhich would be expected of a 99% collision rate. For N=10,000, I see 0, 1, 2, or 3 out of 10 attempts with collisions, which all fall within expectations for a 17% collision rate.\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/Kc4IF.png","title":"How was there no collision among 50,000 random 7-digit hex strings? (The Birthday Problem)","body":"<p>I've encountered some code that generates a number of UUIDs via <code>UUID.randomUUID()</code>, takes the last 7 digits of each (recent versions of UUID are uniformly distributed in terms of entropy), and uses that as a key to insert rows into a database.</p>\n<p>I wondered what the probability of collision was. I remembered <a href=\"https://en.wikipedia.org/wiki/Birthday_problem\" rel=\"noreferrer\">the Birthday Problem</a>. This is an instance of that problem, is it not? Instead of 365 days in a year, there are 16^7 possible strings. Then according to that Wikipedia page, the probability of collision given <em>n</em> strings is</p>\n<p><a href=\"https://i.stack.imgur.com/Kc4IF.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/Kc4IF.png\" alt=\"enter image description here\" /></a></p>\n<p>where <em>d</em> is 16^7.</p>\n<p>A colleague asserted that they were able to insert 50,000 rows without an issue. I doubted this because the probably of collision with <em>n=50,000</em> and <em>d=16^7</em> is</p>\n<pre><code>1-((16^7-1)/16^7)^(50000*(50000-1)/2) = 99.05%\n</code></pre>\n<p>But then I checked our database. Indeed the 50,000 inserts succeeded.</p>\n<p>How was that possible? (Besides that they got really lucky.) Am I misapplying the Birthday Problem?</p>\n<hr />\n<p><strong>Edit</strong></p>\n<p>Here's a minimal test that shows there <em>should</em> have been collisions.</p>\n<pre><code>import java.util.UUID;\nimport java.util.HashSet;\n\npublic class MyClass {\n    public static void main(String args[]) {\n        final int N = 50000;\n        for (int trial = 0; trial &lt; 10; trial++) {\n            HashSet&lt;String&gt; strings = new HashSet&lt;&gt;();\n            Boolean success = true;\n            for (int i = 0; i &lt; N; i++) {\n                String uuid = UUID.randomUUID().toString();\n                String id = uuid.substring(uuid.length() - 7);\n                if (strings.contains(id)) {\n                    success = false;\n                    // System.out.println(id);\n                    break;\n                }\n                strings.add(id);\n            }\n            System.out.println(success);\n        }\n    }\n}\n</code></pre>\n<p>For N=50,000, 10 out of 10 attempts had a collision‚Äîwhich would be expected of a 99% collision rate. For N=10,000, I see 0, 1, 2, or 3 out of 10 attempts with collisions, which all fall within expectations for a 17% collision rate.</p>\n"},{"tags":["java","jco"],"answers":[{"tags":[],"owner":{"account_id":12979179,"reputation":414,"user_id":9382225,"display_name":"AecorSoft"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1562940070,"creation_date":1562771183,"answer_id":56973656,"question_id":56973060,"body_markdown":"From the naming convention you used, like &quot;`QUERY_TABLE`&quot;, I assume you are using `RFC_READ_TABLE` which is probably implied by &quot;`getRfcName()`&quot;. In this case, there is no `ORDER BY`. If you need `ORDER BY`, you will have to write your own custom RFC function module.\r\n\r\nTo your second question, to get record count of table, use function `EM_GET_NUMBER_OF_ENTRIES`, then:\r\n\r\n`JCoTable inputTable = function.getTableParameterList().getTable(&quot;IT_TABLES&quot;);\r\ninputTable.appendRow();\r\ninputTable.setValue(&quot;TABNAME&quot;, &quot;&lt;table_name&gt;&quot;);`\r\n","title":"How to use orderby with JCo in java","body":"<p>From the naming convention you used, like \"<code>QUERY_TABLE</code>\", I assume you are using <code>RFC_READ_TABLE</code> which is probably implied by \"<code>getRfcName()</code>\". In this case, there is no <code>ORDER BY</code>. If you need <code>ORDER BY</code>, you will have to write your own custom RFC function module.</p>\n\n<p>To your second question, to get record count of table, use function <code>EM_GET_NUMBER_OF_ENTRIES</code>, then:</p>\n\n<p><code>JCoTable inputTable = function.getTableParameterList().getTable(\"IT_TABLES\");\ninputTable.appendRow();\ninputTable.setValue(\"TABNAME\", \"&lt;table_name&gt;\");</code></p>\n"}],"owner":{"account_id":15865616,"reputation":299,"user_id":11447747,"display_name":"Faizan"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":484,"favorite_count":0,"down_vote_count":3,"up_vote_count":1,"accepted_answer_id":56973656,"answer_count":1,"score":-2,"last_activity_date":1682869875,"creation_date":1562769369,"question_id":56973060,"body_markdown":"I am new to SAP software and JCo, so pardon my novice mistakes.\r\n\r\nI want to use orderby clause with JCo java library but did not find any hint about that on internet.\r\n\r\n 1. This code fetches table names, but I want to fetch data by order.\r\n    \r\n 2. Second thing is if just want to get rows count, then how can I get that?\r\n\r\nCode:\r\n```\r\n        JCoDestination client = (JCoDestination) sapconnector.getBaseConnection();\r\n        JCoRepository repo = client.getRepository();\r\n        JCoFunctionTemplate ftemplate = repo.getFunctionTemplate(dataSource.getRfcName());\r\n        JCoFunction function = ftemplate.getFunction();\r\n        JCoParameterList input = function.getImportParameterList();\r\n        input.setValue(QUERY_TABLE, &quot;DD02L&quot;);\r\n        \r\n        JCoParameterList output = function.getExportParameterList();\r\n    \r\n        JCoTable fieldsTable = \r\n        function.getTableParameterList().getTable(&quot;FIELDS&quot;);\r\n        fieldsTable.setRow(0);\r\n        fieldsTable.setValue(&quot;FIELDNAME&quot;, &quot;TABNAME&quot;);\r\n        // ???? sort TABNAME ASC|DESC\r\n        function.execute(client);\r\n    \r\n        System.out.println(&quot;result:&quot; + output.toXML());\r\n```\r\n","title":"How to use orderby with JCo in java","body":"<p>I am new to SAP software and JCo, so pardon my novice mistakes.</p>\n<p>I want to use orderby clause with JCo java library but did not find any hint about that on internet.</p>\n<ol>\n<li><p>This code fetches table names, but I want to fetch data by order.</p>\n</li>\n<li><p>Second thing is if just want to get rows count, then how can I get that?</p>\n</li>\n</ol>\n<p>Code:</p>\n<pre><code>        JCoDestination client = (JCoDestination) sapconnector.getBaseConnection();\n        JCoRepository repo = client.getRepository();\n        JCoFunctionTemplate ftemplate = repo.getFunctionTemplate(dataSource.getRfcName());\n        JCoFunction function = ftemplate.getFunction();\n        JCoParameterList input = function.getImportParameterList();\n        input.setValue(QUERY_TABLE, &quot;DD02L&quot;);\n        \n        JCoParameterList output = function.getExportParameterList();\n    \n        JCoTable fieldsTable = \n        function.getTableParameterList().getTable(&quot;FIELDS&quot;);\n        fieldsTable.setRow(0);\n        fieldsTable.setValue(&quot;FIELDNAME&quot;, &quot;TABNAME&quot;);\n        // ???? sort TABNAME ASC|DESC\n        function.execute(client);\n    \n        System.out.println(&quot;result:&quot; + output.toXML());\n</code></pre>\n"},{"tags":["java","jvm","mulesoft","jco"],"answers":[{"tags":[],"owner":{"account_id":9910001,"reputation":1796,"user_id":7337102,"display_name":"Trixx"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1572418286,"creation_date":1572417868,"answer_id":58619888,"question_id":58612122,"body_markdown":"Property `jco.trace_level` is for the upper JCo API traces. But your example shows the CPIC trace.&lt;br&gt;\r\nThis can be switched on via logon parameter (`jco.client.cpic_trace`) or via global JCo property (`cpic.trace`) or it can be switched on remotely from the communication partner via trace level propagation.\r\n\r\nIf you haven&#39;t switched it on at JCo side, then it was activated remotely from the communication partner (the ABAP system).&lt;br&gt;\r\nRecently, a new JCo property `cpic.trace.accept_remote_activation` has been added for accepting the CPIC remote trace activation with the default being `&#39;0&#39;` (OFF). As far as I know, this remote trace activation could not be suppressed with older JCo patch levels.\r\nIf you update your JCo library to the [latest patch level][1] (currently JCo 3.0.20) these CPIC traces should not be created anymore if the Java application hasn&#39;t actively switched it on.\r\n\r\n\r\n  [1]: https://support.sap.com/jco","title":"Disable sap jco traces from java command line","body":"<p>Property <code>jco.trace_level</code> is for the upper JCo API traces. But your example shows the CPIC trace.<br>\nThis can be switched on via logon parameter (<code>jco.client.cpic_trace</code>) or via global JCo property (<code>cpic.trace</code>) or it can be switched on remotely from the communication partner via trace level propagation.</p>\n\n<p>If you haven't switched it on at JCo side, then it was activated remotely from the communication partner (the ABAP system).<br>\nRecently, a new JCo property <code>cpic.trace.accept_remote_activation</code> has been added for accepting the CPIC remote trace activation with the default being <code>'0'</code> (OFF). As far as I know, this remote trace activation could not be suppressed with older JCo patch levels.\nIf you update your JCo library to the <a href=\"https://support.sap.com/jco\" rel=\"nofollow noreferrer\">latest patch level</a> (currently JCo 3.0.20) these CPIC traces should not be created anymore if the Java application hasn't actively switched it on.</p>\n"}],"owner":{"account_id":5855684,"reputation":85,"user_id":4613009,"accept_rate":100,"display_name":"sandeep kairamkonda"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":503,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":58619888,"answer_count":1,"score":1,"last_activity_date":1682869810,"creation_date":1572368198,"question_id":58612122,"body_markdown":"In our mule server we are bombarded with logs such as below every second, How do I stop it?\r\n    \r\n&gt; ```\r\n&gt;    *************** SAP_CMLISTEN ***************\r\n&gt;    [Thr 133440] SAP_CMLISTEN: timeout = 2000\r\n&gt;    [Thr 133440] SiSelNSelect: start select (timeout=2000)\r\n&gt;    [Thr 133440] Tue Oct 29 16:27:38 2019\r\n&gt;    [Thr 133440] NiSelISelectInt: 0 handles selected (0 buffered)\r\n&gt;    [Thr 133440] SAP_CMLISTEN: STISendNiping returns: 0 \r\n&gt;    [Thr 133440] SAP_CMLISTEN: timeout after 2000 msecs\r\n&gt;    [Thr 133440] *************** SAP_CMLISTEN ***************\r\n&gt; ```\r\nI tried run some java commands with `-Djco.trace_level=0`, but failed.\r\n\r\n    $ java -Djco.trace_level=0\r\n\r\nabove command doesn&#39;t work.\r\n\r\nI expect the SAP JCo trace logs to be disabled.","title":"Disable sap jco traces from java command line","body":"<p>In our mule server we are bombarded with logs such as below every second, How do I stop it?</p>\n<blockquote>\n<pre><code>   *************** SAP_CMLISTEN ***************\n   [Thr 133440] SAP_CMLISTEN: timeout = 2000\n   [Thr 133440] SiSelNSelect: start select (timeout=2000)\n   [Thr 133440] Tue Oct 29 16:27:38 2019\n   [Thr 133440] NiSelISelectInt: 0 handles selected (0 buffered)\n   [Thr 133440] SAP_CMLISTEN: STISendNiping returns: 0 \n   [Thr 133440] SAP_CMLISTEN: timeout after 2000 msecs\n   [Thr 133440] *************** SAP_CMLISTEN ***************\n</code></pre>\n</blockquote>\n<p>I tried run some java commands with <code>-Djco.trace_level=0</code>, but failed.</p>\n<pre><code>$ java -Djco.trace_level=0\n</code></pre>\n<p>above command doesn't work.</p>\n<p>I expect the SAP JCo trace logs to be disabled.</p>\n"},{"tags":["java","spring-mvc","spring-thymeleaf","module-info"],"comments":[{"owner":{"account_id":19535095,"reputation":2864,"user_id":14294053,"display_name":"Mar-Z"},"score":0,"creation_date":1682869137,"post_id":76142035,"comment_id":134279533,"body_markdown":"Where is your module-info.java file and how it looks like?","body":"Where is your module-info.java file and how it looks like?"},{"owner":{"account_id":13222953,"reputation":731,"user_id":9549068,"display_name":"Nor.Z"},"score":0,"creation_date":1682869468,"post_id":76142035,"comment_id":134279584,"body_markdown":"@Mar-Z Added, but I dont think its the root of the problem? idk.","body":"@Mar-Z Added, but I dont think its the root of the problem? idk."}],"owner":{"account_id":13222953,"reputation":731,"user_id":9549068,"display_name":"Nor.Z"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":64,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1682869391,"creation_date":1682867982,"question_id":76142035,"body_markdown":"### problem-situation\r\n\r\n1\\.\r\n\r\nI have a extremely simple Controller\r\n\r\n```java\r\npackage com.redfrog.note;\r\n\r\nimport org.springframework.stereotype.Controller;\r\nimport org.springframework.web.bind.annotation.GetMapping;\r\n\r\n@Controller\r\npublic class BallController {\r\n\r\n  @GetMapping(&quot;/p1&quot;)\r\n  public String p1() { return &quot;main&quot;; }\r\n\r\n}\r\n```\r\n\r\nAnd this is the Folder structure\r\n\r\n```\r\n+---src\r\n|   +---main\r\n|   |   +---java\r\n|   |   |   |\r\n|   |   |   \\---com\r\n|   |   |       \\---redfrog\r\n|   |   |           \\---note\r\n|   |   |                   BallController.java\r\n|   |   |                   TestSpringHibernate1Application.java\r\n|   |   |\r\n|   |   \\---resources\r\n|   |       |   application.properties\r\n|   |       |\r\n|   |       +---static\r\n|   |       |       index.html\r\n|   |       |\r\n|   |       \\---templates\r\n|   |               main.html\r\n```\r\n\r\n\r\nWhen I call `http://127.0.0.1:8080/p1` it displays the content of **`main.html`** \\\r\n-&gt; good.\r\n\r\n2\\.\r\n\r\nNow I add in a **`module-info.java`**, &amp; just do the exact **same** thing \\\r\n-&gt; **error** below is thrown::\r\n\r\n\r\n(in Chrome)\r\n```\r\nWhitelabel Error Page\r\nThis application has no explicit mapping for /error, so you are seeing this as a fallback.\r\n\r\nSun Apr 30 23:10:07 CST 2023\r\nThere was an unexpected error (type=Internal Server Error, status=500).\r\nError resolving template [main], template might not exist or might not be accessible by any of the configured Template Resolvers\r\norg.thymeleaf.exceptions.TemplateInputException: Error resolving template [main], template might not exist or might not be accessible by any of the configured Template Resolvers\r\n\tat thymeleaf@3.0.15.RELEASE/org.thymeleaf.engine.TemplateManager.resolveTemplate(TemplateManager.java:869)\r\n\tat thymeleaf@3.0.15.RELEASE/org.thymeleaf.engine.TemplateManager.parseAndProcess(TemplateManager.java:607)\r\n\tat thymeleaf@3.0.15.RELEASE/org.thymeleaf.TemplateEngine.process(TemplateEngine.java:1098)\r\n\tat thymeleaf@3.0.15.RELEASE/org.thymeleaf.TemplateEngine.process(TemplateEngine.java:1072)\r\n\tat thymeleaf.spring5@3.0.15.RELEASE/org.thymeleaf.spring5.view.ThymeleafView.renderFragment(ThymeleafView.java:366)\r\n\tat thymeleaf.spring5@3.0.15.RELEASE/org.thymeleaf.spring5.view.ThymeleafView.render(ThymeleafView.java:190)\r\n\tat spring.webmvc@5.3.27/org.springframework.web.servlet.DispatcherServlet.render(DispatcherServlet.java:1406)\r\n\tat spring.webmvc@5.3.27/org.springframework.web.servlet.DispatcherServlet.processDispatchResult(DispatcherServlet.java:1150)\r\n\tat spring.webmvc@5.3.27/org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)\r\n\tat spring.webmvc@5.3.27/org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:965)\r\n\tat spring.webmvc@5.3.27/org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006)\r\n\tat spring.webmvc@5.3.27/org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:898)\r\n\tat org.apache.tomcat.embed.core@9.0.74/javax.servlet.http.HttpServlet.service(HttpServlet.java:529)\r\n\tat spring.webmvc@5.3.27/org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883)\r\n\tat org.apache.tomcat.embed.core@9.0.74/javax.servlet.http.HttpServlet.service(HttpServlet.java:623)\r\n\tat org.apache.tomcat.embed.core@9.0.74/org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:209)\r\n\tat org.apache.tomcat.embed.core@9.0.74/org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)\r\n\tat org.apache.tomcat.embed.websocket@9.0.74/org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)\r\n\tat org.apache.tomcat.embed.core@9.0.74/org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)\r\n\tat org.apache.tomcat.embed.core@9.0.74/org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)\r\n\tat spring.web@5.3.27/org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)\r\n\tat spring.web@5.3.27/org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)\r\n\tat org.apache.tomcat.embed.core@9.0.74/org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)\r\n\tat org.apache.tomcat.embed.core@9.0.74/org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)\r\n\tat spring.web@5.3.27/org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)\r\n\tat spring.web@5.3.27/org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)\r\n\tat org.apache.tomcat.embed.core@9.0.74/org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)\r\n\tat org.apache.tomcat.embed.core@9.0.74/org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)\r\n\tat spring.web@5.3.27/org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)\r\n\tat spring.web@5.3.27/org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)\r\n\tat org.apache.tomcat.embed.core@9.0.74/org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)\r\n\tat org.apache.tomcat.embed.core@9.0.74/org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)\r\n\tat org.apache.tomcat.embed.core@9.0.74/org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)\r\n\tat org.apache.tomcat.embed.core@9.0.74/org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)\r\n\tat org.apache.tomcat.embed.core@9.0.74/org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:481)\r\n\tat org.apache.tomcat.embed.core@9.0.74/org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:130)\r\n\tat org.apache.tomcat.embed.core@9.0.74/org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)\r\n\tat org.apache.tomcat.embed.core@9.0.74/org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)\r\n\tat org.apache.tomcat.embed.core@9.0.74/org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:343)\r\n\tat org.apache.tomcat.embed.core@9.0.74/org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:389)\r\n\tat org.apache.tomcat.embed.core@9.0.74/org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)\r\n\tat org.apache.tomcat.embed.core@9.0.74/org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:926)\r\n\tat org.apache.tomcat.embed.core@9.0.74/org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1791)\r\n\tat org.apache.tomcat.embed.core@9.0.74/org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)\r\n\tat org.apache.tomcat.embed.core@9.0.74/org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)\r\n\tat org.apache.tomcat.embed.core@9.0.74/org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)\r\n\tat org.apache.tomcat.embed.core@9.0.74/org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)\r\n\tat java.base/java.lang.Thread.run(Thread.java:833)\r\n```\r\n\r\n(in Postman, omitted some)\r\n```\r\n{\r\n    &quot;timestamp&quot;: &quot;2023-04-30T15:01:24.640+00:00&quot;,\r\n    &quot;status&quot;: 500,\r\n    &quot;error&quot;: &quot;Internal Server Error&quot;,\r\n    &quot;trace&quot;: &quot;org.thymeleaf.exceptions.TemplateInputException: Error resolving template [main], template might not exist or might not be accessible by any of the configured Template Resolvers\\r\\n\\tat thymeleaf@3.0.15.RELEASE/org.thymeleaf.engine.TemplateManager.resolveTemplate(TemplateManager.java:869)\\r\\n\\tat\r\n```\r\n\r\n### problem-question \r\n\r\nHow do I fix this? \r\n\r\nI need to use `module-info.java`.\r\n\r\n---\r\n\r\n### misc\r\n\r\nI tried to look at the source code in debug mode.\r\n\r\nSeems the code goes to `return null; // &lt;&lt; goes to here `. \r\n\r\nBut I have no knowledge to dig deeper. \r\n\r\n```java\r\n\r\npublic abstract class AbstractTemplateResolver implements ITemplateResolver {\r\n\r\n    public final TemplateResolution resolveTemplate(\r\n            final IEngineConfiguration configuration,\r\n            final String ownerTemplate, final String template,\r\n            final Map&lt;String, Object&gt; templateResolutionAttributes) {\r\n\r\n        Validate.notNull(configuration, &quot;Engine Configuration cannot be null&quot;);\r\n        // ownerTemplate CAN be null\r\n        Validate.notNull(template, &quot;Template Name cannot be null&quot;);\r\n        // templateResolutionAttributes CAN be null\r\n\r\n        if (!computeResolvable(configuration, ownerTemplate, template, templateResolutionAttributes)) {\r\n            return null;\r\n        }\r\n\r\n        final ITemplateResource templateResource = computeTemplateResource(configuration, ownerTemplate, template, templateResolutionAttributes);\r\n        if (templateResource == null) {\r\n            return null;\r\n        }\r\n\r\n        if (this.checkExistence &amp;&amp; !templateResource.exists()) { // will only check if flag set to true\r\n            return null; // &lt;&lt; goes to here \r\n        }\r\n\r\n        return new TemplateResolution(\r\n                templateResource,\r\n                this.checkExistence,\r\n                computeTemplateMode(configuration, ownerTemplate, template, templateResolutionAttributes),\r\n                this.useDecoupledLogic,\r\n                computeValidity(configuration, ownerTemplate, template, templateResolutionAttributes));\r\n        \r\n    }\r\n\r\n```\r\n\r\n---\r\n\r\n### more files\r\n\r\nmodule-info.java\r\n\r\n```\r\nmodule sswwy {\r\n  exports com.redfrog.note;\r\n\r\n  opens com.redfrog.note;\r\n\r\n  requires java.base;\r\n  requires java.compiler;\r\n  requires java.datatransfer;\r\n  requires java.desktop;\r\n  requires java.instrument;\r\n  requires java.logging;\r\n  requires java.management;\r\n  requires java.management.rmi;\r\n  requires java.naming;\r\n  requires java.net.http;\r\n  requires java.prefs;\r\n  requires java.rmi;\r\n  requires java.scripting;\r\n  requires java.se;\r\n  requires java.security.jgss;\r\n  requires java.security.sasl;\r\n  requires java.smartcardio;\r\n  requires java.sql;\r\n  requires java.sql.rowset;\r\n  requires java.transaction.xa;\r\n  requires java.xml;\r\n  requires java.xml.crypto;\r\n  requires jdk.accessibility;\r\n  requires jdk.attach;\r\n  requires jdk.charsets;\r\n  requires jdk.compiler;\r\n  requires jdk.crypto.cryptoki;\r\n  requires jdk.crypto.ec;\r\n  requires jdk.crypto.mscapi;\r\n  requires jdk.dynalink;\r\n  requires jdk.editpad;\r\n  requires jdk.hotspot.agent;\r\n  requires jdk.httpserver;\r\n  requires jdk.internal.ed;\r\n  requires jdk.internal.jvmstat;\r\n  requires jdk.internal.le;\r\n  requires jdk.internal.opt;\r\n  requires jdk.internal.vm.ci;\r\n  requires jdk.internal.vm.compiler;\r\n  requires jdk.internal.vm.compiler.management;\r\n  requires jdk.jartool;\r\n  requires jdk.javadoc;\r\n  requires jdk.jcmd;\r\n  requires jdk.jconsole;\r\n  requires jdk.jdeps;\r\n  requires jdk.jdi;\r\n  requires jdk.jdwp.agent;\r\n  requires jdk.jfr;\r\n  requires jdk.jlink;\r\n  requires jdk.jpackage;\r\n  requires jdk.jshell;\r\n  requires jdk.jsobject;\r\n  requires jdk.jstatd;\r\n  requires jdk.localedata;\r\n  requires jdk.management;\r\n  requires jdk.management.agent;\r\n  requires jdk.management.jfr;\r\n  requires jdk.naming.dns;\r\n  requires jdk.naming.rmi;\r\n  requires jdk.net;\r\n  requires jdk.nio.mapmode;\r\n  requires jdk.random;\r\n  requires jdk.sctp;\r\n  requires jdk.security.auth;\r\n  requires jdk.security.jgss;\r\n  requires jdk.unsupported;\r\n  requires jdk.unsupported.desktop;\r\n  requires jdk.xml.dom;\r\n  requires jdk.zipfs;\r\n\r\n  //  requires HikariCP;\r\n  //  requires accessors.smart;\r\n  //  requires android.json;\r\n  //  requires antlr;\r\n  //  requires assertj.core;\r\n  requires attoparser;\r\n  //  requires com.fasterxml.classmate;\r\n  requires com.fasterxml.jackson.annotation;\r\n  //  requires com.sun.istack.runtime;\r\n  //  requires com.sun.xml.txw2;\r\n  //  requires dom4j;\r\n  //  requires jackson.core;\r\n  //  requires jackson.databind;\r\n  //  requires jackson.datatype.jdk8;\r\n  //  requires jackson.datatype.jsr310;\r\n  //  requires jackson.module.parameter.names;\r\n  //  requires jakarta.activation;\r\n  requires java.annotation;\r\n  //  requires java.persistence;\r\n  //  requires java.transaction;\r\n  //  requires java.xml.bind;\r\n  //  requires json.path;\r\n  //  requires json.smart;\r\n  //  requires jsonassert;\r\n  requires jul.to.slf4j;\r\n  //  requires log4j.api;\r\n  requires logback.classic;\r\n  requires logback.core;\r\n  //  requires lombok;\r\n  //  requires mysql.connector.j;\r\n  requires org.apache.logging.slf4j;\r\n  requires org.apache.tomcat.embed.core;\r\n  requires org.apache.tomcat.embed.el;\r\n  requires org.apache.tomcat.embed.websocket;\r\n  //  requires org.apiguardian.api;\r\n  //  requires org.aspectj.weaver;\r\n  //  requires org.glassfish.jaxb.runtime;\r\n  //  requires org.hamcrest;\r\n  //  requires org.hibernate.commons.annotations;\r\n  //  requires org.hibernate.orm.core;\r\n  //  requires org.hibernate.orm.envers;\r\n  //  requires org.jboss.jandex;\r\n  //  requires org.jboss.logging;\r\n  //  requires org.joda.time;\r\n  //  requires org.junit.jupiter;\r\n  //  requires org.junit.jupiter.api;\r\n  //  requires org.junit.jupiter.engine;\r\n  //  requires org.junit.jupiter.params;\r\n  //  requires org.junit.platform.commons;\r\n  //  requires org.junit.platform.engine;\r\n  //  requires org.mockito;\r\n  //  requires org.mockito.junit.jupiter;\r\n  //  requires org.objectweb.asm;\r\n  //  requires org.objenesis;\r\n  //  requires org.opentest4j;\r\n  requires org.slf4j;\r\n  //  requires org.xmlunit;\r\n  requires org.yaml.snakeyaml;\r\n  requires spring.aop;\r\n  //  requires spring.aspects;\r\n  requires spring.beans;\r\n  requires spring.boot;\r\n  requires spring.boot.autoconfigure;\r\n  //  requires spring.boot.devtools;\r\n  requires spring.boot.starter;\r\n  //  requires spring.boot.starter.aop;\r\n  //  requires spring.boot.starter.data.jpa;\r\n  //  requires spring.boot.starter.jdbc;\r\n  requires spring.boot.starter.json;\r\n  requires spring.boot.starter.logging;\r\n  //  requires spring.boot.starter.test;\r\n  requires spring.boot.starter.thymeleaf;\r\n  requires spring.boot.starter.tomcat;\r\n  requires spring.boot.starter.web;\r\n  //  requires spring.boot.test;\r\n  //  requires spring.boot.test.autoconfigure;\r\n  requires spring.context;\r\n  requires spring.core;\r\n  //  requires spring.data.commons;\r\n  //  requires spring.data.envers;\r\n  //  requires spring.data.jpa;\r\n  requires spring.expression;\r\n  requires spring.jcl;\r\n  //  requires spring.jdbc;\r\n  //  requires spring.orm;\r\n  //  requires spring.test;\r\n  //  requires spring.tx;\r\n  requires spring.web;\r\n  requires spring.webmvc;\r\n  //  requires testSpringHibernate;\r\n  requires thymeleaf;\r\n  requires thymeleaf.extras.java8time;\r\n  requires thymeleaf.spring5;\r\n  requires unbescape;\r\n}\r\n```\r\n\r\npom.xml\r\n```\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n\txsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\r\n\t&lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n\t&lt;parent&gt;\r\n\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t&lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\r\n\t\t&lt;version&gt;2.7.11&lt;/version&gt;\r\n\t\t&lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;\r\n\t&lt;/parent&gt;\r\n\t&lt;groupId&gt;com.redfrog&lt;/groupId&gt;\r\n\t&lt;artifactId&gt;Test_SpringHibernate-1&lt;/artifactId&gt;\r\n\t&lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\r\n\t&lt;name&gt;Test_SpringHibernate-1&lt;/name&gt;\r\n\t&lt;description&gt;Demo project for Spring Boot&lt;/description&gt;\r\n\t&lt;properties&gt;\r\n\t\t&lt;java.version&gt;17&lt;/java.version&gt;\r\n\t&lt;/properties&gt;\r\n\t&lt;dependencies&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-devtools&lt;/artifactId&gt;\r\n\t\t\t&lt;scope&gt;runtime&lt;/scope&gt;\r\n\t\t\t&lt;optional&gt;true&lt;/optional&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\r\n\t\t\t&lt;scope&gt;test&lt;/scope&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-thymeleaf&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t&lt;/dependencies&gt;\r\n\r\n\t&lt;build&gt;\r\n\t\t&lt;plugins&gt;\r\n\t\t\t&lt;plugin&gt;\r\n\t\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t\t&lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\r\n\t\t\t&lt;/plugin&gt;\r\n\t\t&lt;/plugins&gt;\r\n\t&lt;/build&gt;\r\n\r\n&lt;/project&gt;\r\n\r\n```\r\n\r\na complete folder structure (after added `module-info.java`)\r\n```\r\n|   .classpath\r\n|   .gitignore\r\n|   .project\r\n|   HELP.md\r\n|   mvnw\r\n|   mvnw.cmd\r\n|   pom.xml\r\n|\r\n+---.mvn\r\n|   \\---wrapper\r\n|           maven-wrapper.jar\r\n|           maven-wrapper.properties\r\n|\r\n+---.settings\r\n|       org.eclipse.core.resources.prefs\r\n|       org.eclipse.jdt.apt.core.prefs\r\n|       org.eclipse.jdt.core.prefs\r\n|       org.eclipse.m2e.core.prefs\r\n|       org.springframework.ide.eclipse.prefs\r\n|\r\n+---src\r\n|   +---main\r\n|   |   +---java\r\n|   |   |   |   module-info.java\r\n|   |   |   |\r\n|   |   |   \\---com\r\n|   |   |       \\---redfrog\r\n|   |   |           \\---note\r\n|   |   |                   BallController.java\r\n|   |   |                   TestSpringHibernate1Application.java\r\n|   |   |\r\n|   |   \\---resources\r\n|   |       |   application.properties\r\n|   |       |\r\n|   |       +---static\r\n|   |       |       index.html\r\n|   |       |\r\n|   |       \\---templates\r\n|   |               main.html\r\n|   |\r\n|   \\---test\r\n|       \\---java\r\n|           \\---com\r\n|               \\---redfrog\r\n|                   \\---note\r\n\\---target\r\n    +---classes\r\n    |   |   application.properties\r\n    |   |   module-info.class\r\n    |   |\r\n    |   +---com\r\n    |   |   \\---redfrog\r\n    |   |       \\---note\r\n    |   |               BallController.class\r\n    |   |               TestSpringHibernate1Application.class\r\n    |   |\r\n    |   +---META-INF\r\n    |   |   |   MANIFEST.MF\r\n    |   |   |\r\n    |   |   \\---maven\r\n    |   |       \\---com.redfrog\r\n    |   |           \\---Test_SpringHibernate-1\r\n    |   |                   pom.properties\r\n    |   |                   pom.xml\r\n    |   |\r\n    |   +---static\r\n    |   |       index.html\r\n    |   |\r\n    |   \\---templates\r\n    |           main.html\r\n    |\r\n    \\---test-classes\r\n        \\---com\r\n            \\---redfrog\r\n                \\---note\r\n```\r\n\r\n- (To avoid Exception throw due to any potential missing thing, I just `requires` nearly everything in `module-info.java`.)","title":"Unable to redirect to the correct html in Spring Controller @GetMapping -- module-info.java is causing Error resolving template","body":"<h3>problem-situation</h3>\n<p>1.</p>\n<p>I have a extremely simple Controller</p>\n<pre class=\"lang-java prettyprint-override\"><code>package com.redfrog.note;\n\nimport org.springframework.stereotype.Controller;\nimport org.springframework.web.bind.annotation.GetMapping;\n\n@Controller\npublic class BallController {\n\n  @GetMapping(&quot;/p1&quot;)\n  public String p1() { return &quot;main&quot;; }\n\n}\n</code></pre>\n<p>And this is the Folder structure</p>\n<pre><code>+---src\n|   +---main\n|   |   +---java\n|   |   |   |\n|   |   |   \\---com\n|   |   |       \\---redfrog\n|   |   |           \\---note\n|   |   |                   BallController.java\n|   |   |                   TestSpringHibernate1Application.java\n|   |   |\n|   |   \\---resources\n|   |       |   application.properties\n|   |       |\n|   |       +---static\n|   |       |       index.html\n|   |       |\n|   |       \\---templates\n|   |               main.html\n</code></pre>\n<p>When I call <code>http://127.0.0.1:8080/p1</code> it displays the content of <strong><code>main.html</code></strong> <br />\n-&gt; good.</p>\n<p>2.</p>\n<p>Now I add in a <strong><code>module-info.java</code></strong>, &amp; just do the exact <strong>same</strong> thing <br />\n-&gt; <strong>error</strong> below is thrown::</p>\n<p>(in Chrome)</p>\n<pre><code>Whitelabel Error Page\nThis application has no explicit mapping for /error, so you are seeing this as a fallback.\n\nSun Apr 30 23:10:07 CST 2023\nThere was an unexpected error (type=Internal Server Error, status=500).\nError resolving template [main], template might not exist or might not be accessible by any of the configured Template Resolvers\norg.thymeleaf.exceptions.TemplateInputException: Error resolving template [main], template might not exist or might not be accessible by any of the configured Template Resolvers\n    at thymeleaf@3.0.15.RELEASE/org.thymeleaf.engine.TemplateManager.resolveTemplate(TemplateManager.java:869)\n    at thymeleaf@3.0.15.RELEASE/org.thymeleaf.engine.TemplateManager.parseAndProcess(TemplateManager.java:607)\n    at thymeleaf@3.0.15.RELEASE/org.thymeleaf.TemplateEngine.process(TemplateEngine.java:1098)\n    at thymeleaf@3.0.15.RELEASE/org.thymeleaf.TemplateEngine.process(TemplateEngine.java:1072)\n    at thymeleaf.spring5@3.0.15.RELEASE/org.thymeleaf.spring5.view.ThymeleafView.renderFragment(ThymeleafView.java:366)\n    at thymeleaf.spring5@3.0.15.RELEASE/org.thymeleaf.spring5.view.ThymeleafView.render(ThymeleafView.java:190)\n    at spring.webmvc@5.3.27/org.springframework.web.servlet.DispatcherServlet.render(DispatcherServlet.java:1406)\n    at spring.webmvc@5.3.27/org.springframework.web.servlet.DispatcherServlet.processDispatchResult(DispatcherServlet.java:1150)\n    at spring.webmvc@5.3.27/org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)\n    at spring.webmvc@5.3.27/org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:965)\n    at spring.webmvc@5.3.27/org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006)\n    at spring.webmvc@5.3.27/org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:898)\n    at org.apache.tomcat.embed.core@9.0.74/javax.servlet.http.HttpServlet.service(HttpServlet.java:529)\n    at spring.webmvc@5.3.27/org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883)\n    at org.apache.tomcat.embed.core@9.0.74/javax.servlet.http.HttpServlet.service(HttpServlet.java:623)\n    at org.apache.tomcat.embed.core@9.0.74/org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:209)\n    at org.apache.tomcat.embed.core@9.0.74/org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)\n    at org.apache.tomcat.embed.websocket@9.0.74/org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)\n    at org.apache.tomcat.embed.core@9.0.74/org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)\n    at org.apache.tomcat.embed.core@9.0.74/org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)\n    at spring.web@5.3.27/org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)\n    at spring.web@5.3.27/org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)\n    at org.apache.tomcat.embed.core@9.0.74/org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)\n    at org.apache.tomcat.embed.core@9.0.74/org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)\n    at spring.web@5.3.27/org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)\n    at spring.web@5.3.27/org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)\n    at org.apache.tomcat.embed.core@9.0.74/org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)\n    at org.apache.tomcat.embed.core@9.0.74/org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)\n    at spring.web@5.3.27/org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)\n    at spring.web@5.3.27/org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)\n    at org.apache.tomcat.embed.core@9.0.74/org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)\n    at org.apache.tomcat.embed.core@9.0.74/org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)\n    at org.apache.tomcat.embed.core@9.0.74/org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)\n    at org.apache.tomcat.embed.core@9.0.74/org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)\n    at org.apache.tomcat.embed.core@9.0.74/org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:481)\n    at org.apache.tomcat.embed.core@9.0.74/org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:130)\n    at org.apache.tomcat.embed.core@9.0.74/org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)\n    at org.apache.tomcat.embed.core@9.0.74/org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)\n    at org.apache.tomcat.embed.core@9.0.74/org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:343)\n    at org.apache.tomcat.embed.core@9.0.74/org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:389)\n    at org.apache.tomcat.embed.core@9.0.74/org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)\n    at org.apache.tomcat.embed.core@9.0.74/org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:926)\n    at org.apache.tomcat.embed.core@9.0.74/org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1791)\n    at org.apache.tomcat.embed.core@9.0.74/org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)\n    at org.apache.tomcat.embed.core@9.0.74/org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)\n    at org.apache.tomcat.embed.core@9.0.74/org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)\n    at org.apache.tomcat.embed.core@9.0.74/org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)\n    at java.base/java.lang.Thread.run(Thread.java:833)\n</code></pre>\n<p>(in Postman, omitted some)</p>\n<pre><code>{\n    &quot;timestamp&quot;: &quot;2023-04-30T15:01:24.640+00:00&quot;,\n    &quot;status&quot;: 500,\n    &quot;error&quot;: &quot;Internal Server Error&quot;,\n    &quot;trace&quot;: &quot;org.thymeleaf.exceptions.TemplateInputException: Error resolving template [main], template might not exist or might not be accessible by any of the configured Template Resolvers\\r\\n\\tat thymeleaf@3.0.15.RELEASE/org.thymeleaf.engine.TemplateManager.resolveTemplate(TemplateManager.java:869)\\r\\n\\tat\n</code></pre>\n<h3>problem-question</h3>\n<p>How do I fix this?</p>\n<p>I need to use <code>module-info.java</code>.</p>\n<hr />\n<h3>misc</h3>\n<p>I tried to look at the source code in debug mode.</p>\n<p>Seems the code goes to <code>return null; // &lt;&lt; goes to here </code>.</p>\n<p>But I have no knowledge to dig deeper.</p>\n<pre class=\"lang-java prettyprint-override\"><code>\npublic abstract class AbstractTemplateResolver implements ITemplateResolver {\n\n    public final TemplateResolution resolveTemplate(\n            final IEngineConfiguration configuration,\n            final String ownerTemplate, final String template,\n            final Map&lt;String, Object&gt; templateResolutionAttributes) {\n\n        Validate.notNull(configuration, &quot;Engine Configuration cannot be null&quot;);\n        // ownerTemplate CAN be null\n        Validate.notNull(template, &quot;Template Name cannot be null&quot;);\n        // templateResolutionAttributes CAN be null\n\n        if (!computeResolvable(configuration, ownerTemplate, template, templateResolutionAttributes)) {\n            return null;\n        }\n\n        final ITemplateResource templateResource = computeTemplateResource(configuration, ownerTemplate, template, templateResolutionAttributes);\n        if (templateResource == null) {\n            return null;\n        }\n\n        if (this.checkExistence &amp;&amp; !templateResource.exists()) { // will only check if flag set to true\n            return null; // &lt;&lt; goes to here \n        }\n\n        return new TemplateResolution(\n                templateResource,\n                this.checkExistence,\n                computeTemplateMode(configuration, ownerTemplate, template, templateResolutionAttributes),\n                this.useDecoupledLogic,\n                computeValidity(configuration, ownerTemplate, template, templateResolutionAttributes));\n        \n    }\n\n</code></pre>\n<hr />\n<h3>more files</h3>\n<p>module-info.java</p>\n<pre><code>module sswwy {\n  exports com.redfrog.note;\n\n  opens com.redfrog.note;\n\n  requires java.base;\n  requires java.compiler;\n  requires java.datatransfer;\n  requires java.desktop;\n  requires java.instrument;\n  requires java.logging;\n  requires java.management;\n  requires java.management.rmi;\n  requires java.naming;\n  requires java.net.http;\n  requires java.prefs;\n  requires java.rmi;\n  requires java.scripting;\n  requires java.se;\n  requires java.security.jgss;\n  requires java.security.sasl;\n  requires java.smartcardio;\n  requires java.sql;\n  requires java.sql.rowset;\n  requires java.transaction.xa;\n  requires java.xml;\n  requires java.xml.crypto;\n  requires jdk.accessibility;\n  requires jdk.attach;\n  requires jdk.charsets;\n  requires jdk.compiler;\n  requires jdk.crypto.cryptoki;\n  requires jdk.crypto.ec;\n  requires jdk.crypto.mscapi;\n  requires jdk.dynalink;\n  requires jdk.editpad;\n  requires jdk.hotspot.agent;\n  requires jdk.httpserver;\n  requires jdk.internal.ed;\n  requires jdk.internal.jvmstat;\n  requires jdk.internal.le;\n  requires jdk.internal.opt;\n  requires jdk.internal.vm.ci;\n  requires jdk.internal.vm.compiler;\n  requires jdk.internal.vm.compiler.management;\n  requires jdk.jartool;\n  requires jdk.javadoc;\n  requires jdk.jcmd;\n  requires jdk.jconsole;\n  requires jdk.jdeps;\n  requires jdk.jdi;\n  requires jdk.jdwp.agent;\n  requires jdk.jfr;\n  requires jdk.jlink;\n  requires jdk.jpackage;\n  requires jdk.jshell;\n  requires jdk.jsobject;\n  requires jdk.jstatd;\n  requires jdk.localedata;\n  requires jdk.management;\n  requires jdk.management.agent;\n  requires jdk.management.jfr;\n  requires jdk.naming.dns;\n  requires jdk.naming.rmi;\n  requires jdk.net;\n  requires jdk.nio.mapmode;\n  requires jdk.random;\n  requires jdk.sctp;\n  requires jdk.security.auth;\n  requires jdk.security.jgss;\n  requires jdk.unsupported;\n  requires jdk.unsupported.desktop;\n  requires jdk.xml.dom;\n  requires jdk.zipfs;\n\n  //  requires HikariCP;\n  //  requires accessors.smart;\n  //  requires android.json;\n  //  requires antlr;\n  //  requires assertj.core;\n  requires attoparser;\n  //  requires com.fasterxml.classmate;\n  requires com.fasterxml.jackson.annotation;\n  //  requires com.sun.istack.runtime;\n  //  requires com.sun.xml.txw2;\n  //  requires dom4j;\n  //  requires jackson.core;\n  //  requires jackson.databind;\n  //  requires jackson.datatype.jdk8;\n  //  requires jackson.datatype.jsr310;\n  //  requires jackson.module.parameter.names;\n  //  requires jakarta.activation;\n  requires java.annotation;\n  //  requires java.persistence;\n  //  requires java.transaction;\n  //  requires java.xml.bind;\n  //  requires json.path;\n  //  requires json.smart;\n  //  requires jsonassert;\n  requires jul.to.slf4j;\n  //  requires log4j.api;\n  requires logback.classic;\n  requires logback.core;\n  //  requires lombok;\n  //  requires mysql.connector.j;\n  requires org.apache.logging.slf4j;\n  requires org.apache.tomcat.embed.core;\n  requires org.apache.tomcat.embed.el;\n  requires org.apache.tomcat.embed.websocket;\n  //  requires org.apiguardian.api;\n  //  requires org.aspectj.weaver;\n  //  requires org.glassfish.jaxb.runtime;\n  //  requires org.hamcrest;\n  //  requires org.hibernate.commons.annotations;\n  //  requires org.hibernate.orm.core;\n  //  requires org.hibernate.orm.envers;\n  //  requires org.jboss.jandex;\n  //  requires org.jboss.logging;\n  //  requires org.joda.time;\n  //  requires org.junit.jupiter;\n  //  requires org.junit.jupiter.api;\n  //  requires org.junit.jupiter.engine;\n  //  requires org.junit.jupiter.params;\n  //  requires org.junit.platform.commons;\n  //  requires org.junit.platform.engine;\n  //  requires org.mockito;\n  //  requires org.mockito.junit.jupiter;\n  //  requires org.objectweb.asm;\n  //  requires org.objenesis;\n  //  requires org.opentest4j;\n  requires org.slf4j;\n  //  requires org.xmlunit;\n  requires org.yaml.snakeyaml;\n  requires spring.aop;\n  //  requires spring.aspects;\n  requires spring.beans;\n  requires spring.boot;\n  requires spring.boot.autoconfigure;\n  //  requires spring.boot.devtools;\n  requires spring.boot.starter;\n  //  requires spring.boot.starter.aop;\n  //  requires spring.boot.starter.data.jpa;\n  //  requires spring.boot.starter.jdbc;\n  requires spring.boot.starter.json;\n  requires spring.boot.starter.logging;\n  //  requires spring.boot.starter.test;\n  requires spring.boot.starter.thymeleaf;\n  requires spring.boot.starter.tomcat;\n  requires spring.boot.starter.web;\n  //  requires spring.boot.test;\n  //  requires spring.boot.test.autoconfigure;\n  requires spring.context;\n  requires spring.core;\n  //  requires spring.data.commons;\n  //  requires spring.data.envers;\n  //  requires spring.data.jpa;\n  requires spring.expression;\n  requires spring.jcl;\n  //  requires spring.jdbc;\n  //  requires spring.orm;\n  //  requires spring.test;\n  //  requires spring.tx;\n  requires spring.web;\n  requires spring.webmvc;\n  //  requires testSpringHibernate;\n  requires thymeleaf;\n  requires thymeleaf.extras.java8time;\n  requires thymeleaf.spring5;\n  requires unbescape;\n}\n</code></pre>\n<p>pom.xml</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n    xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n    &lt;parent&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\n        &lt;version&gt;2.7.11&lt;/version&gt;\n        &lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;\n    &lt;/parent&gt;\n    &lt;groupId&gt;com.redfrog&lt;/groupId&gt;\n    &lt;artifactId&gt;Test_SpringHibernate-1&lt;/artifactId&gt;\n    &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\n    &lt;name&gt;Test_SpringHibernate-1&lt;/name&gt;\n    &lt;description&gt;Demo project for Spring Boot&lt;/description&gt;\n    &lt;properties&gt;\n        &lt;java.version&gt;17&lt;/java.version&gt;\n    &lt;/properties&gt;\n    &lt;dependencies&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-devtools&lt;/artifactId&gt;\n            &lt;scope&gt;runtime&lt;/scope&gt;\n            &lt;optional&gt;true&lt;/optional&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-thymeleaf&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n    &lt;/dependencies&gt;\n\n    &lt;build&gt;\n        &lt;plugins&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n                &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\n            &lt;/plugin&gt;\n        &lt;/plugins&gt;\n    &lt;/build&gt;\n\n&lt;/project&gt;\n\n</code></pre>\n<p>a complete folder structure (after added <code>module-info.java</code>)</p>\n<pre><code>|   .classpath\n|   .gitignore\n|   .project\n|   HELP.md\n|   mvnw\n|   mvnw.cmd\n|   pom.xml\n|\n+---.mvn\n|   \\---wrapper\n|           maven-wrapper.jar\n|           maven-wrapper.properties\n|\n+---.settings\n|       org.eclipse.core.resources.prefs\n|       org.eclipse.jdt.apt.core.prefs\n|       org.eclipse.jdt.core.prefs\n|       org.eclipse.m2e.core.prefs\n|       org.springframework.ide.eclipse.prefs\n|\n+---src\n|   +---main\n|   |   +---java\n|   |   |   |   module-info.java\n|   |   |   |\n|   |   |   \\---com\n|   |   |       \\---redfrog\n|   |   |           \\---note\n|   |   |                   BallController.java\n|   |   |                   TestSpringHibernate1Application.java\n|   |   |\n|   |   \\---resources\n|   |       |   application.properties\n|   |       |\n|   |       +---static\n|   |       |       index.html\n|   |       |\n|   |       \\---templates\n|   |               main.html\n|   |\n|   \\---test\n|       \\---java\n|           \\---com\n|               \\---redfrog\n|                   \\---note\n\\---target\n    +---classes\n    |   |   application.properties\n    |   |   module-info.class\n    |   |\n    |   +---com\n    |   |   \\---redfrog\n    |   |       \\---note\n    |   |               BallController.class\n    |   |               TestSpringHibernate1Application.class\n    |   |\n    |   +---META-INF\n    |   |   |   MANIFEST.MF\n    |   |   |\n    |   |   \\---maven\n    |   |       \\---com.redfrog\n    |   |           \\---Test_SpringHibernate-1\n    |   |                   pom.properties\n    |   |                   pom.xml\n    |   |\n    |   +---static\n    |   |       index.html\n    |   |\n    |   \\---templates\n    |           main.html\n    |\n    \\---test-classes\n        \\---com\n            \\---redfrog\n                \\---note\n</code></pre>\n<ul>\n<li>(To avoid Exception throw due to any potential missing thing, I just <code>requires</code> nearly everything in <code>module-info.java</code>.)</li>\n</ul>\n"},{"tags":["java","serialization","jackson","org.json","jackson-modules"],"comments":[{"owner":{"account_id":306540,"reputation":1801,"user_id":2695990,"display_name":"fascynacja"},"score":0,"creation_date":1682402505,"post_id":76097805,"comment_id":134205097,"body_markdown":"The Expected result which you proposed is not a valid Json. Valid json would be something like this: {&quot;name&quot;:&quot;name&quot;,&quot;json&quot;:{&quot;key&quot;:&quot;value&quot;}}","body":"The Expected result which you proposed is not a valid Json. Valid json would be something like this: {&quot;name&quot;:&quot;name&quot;,&quot;json&quot;:{&quot;key&quot;:&quot;value&quot;}}"}],"answers":[{"tags":[],"owner":{"account_id":306540,"reputation":1801,"user_id":2695990,"display_name":"fascynacja"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1682402783,"creation_date":1682402783,"answer_id":76098052,"question_id":76097805,"body_markdown":"If you are planning to have only a Map with key values in the &quot;json&quot; field you can try this approach: \r\n\r\nInstead of JSONObject keep a Map.\r\n\r\n    record Random (String name, Map json){}\r\n\r\nThe code to serialize will use json.toMap()\r\n\r\n    JSONObject json = new JSONObject();\r\n    json.put(&quot;key&quot;, &quot;value&quot;);\r\n    Random random = new Random(&quot;name&quot;, json.toMap());\r\n    String s = new ObjectMapper().writeValueAsString(random);","title":"JSONObject inside an object is getting serialized to some other form as compared to a map","body":"<p>If you are planning to have only a Map with key values in the &quot;json&quot; field you can try this approach:</p>\n<p>Instead of JSONObject keep a Map.</p>\n<pre><code>record Random (String name, Map json){}\n</code></pre>\n<p>The code to serialize will use json.toMap()</p>\n<pre><code>JSONObject json = new JSONObject();\njson.put(&quot;key&quot;, &quot;value&quot;);\nRandom random = new Random(&quot;name&quot;, json.toMap());\nString s = new ObjectMapper().writeValueAsString(random);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":306540,"reputation":1801,"user_id":2695990,"display_name":"fascynacja"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1682869250,"creation_date":1682869250,"answer_id":76142129,"question_id":76097805,"body_markdown":"You can create your own Serializer: JSONObjectSerializer  and register it in ObjectMapper. Again assumption is that you are planning to have only a Map with key values in the &quot;json&quot; field.\r\n\r\n\r\n    record Random(String name, JSONObject json) {}\r\n    \r\n    public class SerializerExample {\r\n    \r\n    \tpublic static void main(String[] args) throws JsonProcessingException {\r\n    \r\n    \t\tJSONObject json = new JSONObject();\r\n    \t\tjson.put(&quot;key&quot;, &quot;value&quot;);\r\n    \t\tRandom random = new Random(&quot;name&quot;, json);\r\n    \t\t\r\n            ObjectMapper mapper = new ObjectMapper();\r\n    \t\tSimpleModule module = new SimpleModule();\r\n    \t\tmodule.addSerializer(JSONObject.class, new JSONObjectSerializer());\r\n    \t\tmapper.registerModule(module);\r\n    \t\t\r\n            String s = mapper.writeValueAsString(random);\r\n    \t\tSystem.out.println(s);\r\n    \t}\r\n    \r\n    \tpublic static class JSONObjectSerializer extends StdSerializer&lt;JSONObject&gt; {\r\n    \r\n    \t\tpublic JSONObjectSerializer() {\r\n    \t\t\tthis(null);\r\n    \t\t}\r\n    \r\n    \t\tpublic JSONObjectSerializer(Class&lt;JSONObject&gt; t) {\r\n    \t\t\tsuper(t);\r\n    \t\t}\r\n    \r\n    \t\t@Override\r\n    \t\tpublic void serialize(\r\n    \t\t\tJSONObject value, JsonGenerator jgen, SerializerProvider provider) throws IOException {\r\n    \t\t\tjgen.writeObject(value.toMap());\r\n    \t\t}\r\n    \t}\r\n    }\r\n\r\nThis code will produce output:\r\n\r\n&gt; {&quot;name&quot;:&quot;name&quot;,&quot;json&quot;:{&quot;key&quot;:&quot;value&quot;}}\r\n\r\n ","title":"JSONObject inside an object is getting serialized to some other form as compared to a map","body":"<p>You can create your own Serializer: JSONObjectSerializer  and register it in ObjectMapper. Again assumption is that you are planning to have only a Map with key values in the &quot;json&quot; field.</p>\n<pre><code>record Random(String name, JSONObject json) {}\n\npublic class SerializerExample {\n\n    public static void main(String[] args) throws JsonProcessingException {\n\n        JSONObject json = new JSONObject();\n        json.put(&quot;key&quot;, &quot;value&quot;);\n        Random random = new Random(&quot;name&quot;, json);\n        \n        ObjectMapper mapper = new ObjectMapper();\n        SimpleModule module = new SimpleModule();\n        module.addSerializer(JSONObject.class, new JSONObjectSerializer());\n        mapper.registerModule(module);\n        \n        String s = mapper.writeValueAsString(random);\n        System.out.println(s);\n    }\n\n    public static class JSONObjectSerializer extends StdSerializer&lt;JSONObject&gt; {\n\n        public JSONObjectSerializer() {\n            this(null);\n        }\n\n        public JSONObjectSerializer(Class&lt;JSONObject&gt; t) {\n            super(t);\n        }\n\n        @Override\n        public void serialize(\n            JSONObject value, JsonGenerator jgen, SerializerProvider provider) throws IOException {\n            jgen.writeObject(value.toMap());\n        }\n    }\n}\n</code></pre>\n<p>This code will produce output:</p>\n<blockquote>\n<p>{&quot;name&quot;:&quot;name&quot;,&quot;json&quot;:{&quot;key&quot;:&quot;value&quot;}}</p>\n</blockquote>\n"}],"owner":{"account_id":12875245,"reputation":547,"user_id":9312181,"display_name":"tusharRawat"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":360,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1682869250,"creation_date":1682399605,"question_id":76097805,"body_markdown":"**Why serialization is not working as expected for the JSONObject inside an Object ?**\r\n\r\n    class Random {\r\n        String name;\r\n        JSONObject json;\r\n    }\r\n    JSONObject json= new JSONObject();\r\n    json.put(&quot;key&quot;, &quot;value&quot;);\r\n    Random random = new Random(&quot;name&quot;, json);\r\n    new ObjectMapper().writeValueAsString(); -&gt; \r\n\r\n**Result** produces :  `{&quot;name&quot;:&quot;name&quot;, {&quot;empty&quot;:false,&quot;mapType&quot;:&quot;java.util.HashMap&quot;}}`\r\n\r\n**Expected** result :  `{&quot;name&quot;:&quot;name&quot;, &quot;json&quot;: {&quot;key&quot;:&quot;value&quot;}}`\r\n\r\n\r\nHow to resolve this behaviour ?","title":"JSONObject inside an object is getting serialized to some other form as compared to a map","body":"<p><strong>Why serialization is not working as expected for the JSONObject inside an Object ?</strong></p>\n<pre><code>class Random {\n    String name;\n    JSONObject json;\n}\nJSONObject json= new JSONObject();\njson.put(&quot;key&quot;, &quot;value&quot;);\nRandom random = new Random(&quot;name&quot;, json);\nnew ObjectMapper().writeValueAsString(); -&gt; \n</code></pre>\n<p><strong>Result</strong> produces :  <code>{&quot;name&quot;:&quot;name&quot;, {&quot;empty&quot;:false,&quot;mapType&quot;:&quot;java.util.HashMap&quot;}}</code></p>\n<p><strong>Expected</strong> result :  <code>{&quot;name&quot;:&quot;name&quot;, &quot;json&quot;: {&quot;key&quot;:&quot;value&quot;}}</code></p>\n<p>How to resolve this behaviour ?</p>\n"},{"tags":["java","plantuml"],"answers":[{"tags":[],"owner":{"account_id":1176854,"reputation":749,"user_id":1953486,"accept_rate":75,"display_name":"Tomasz Fija≈Çkowski"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1682868819,"creation_date":1682868819,"answer_id":76142096,"question_id":72812306,"body_markdown":"The `com.sun.imageio.plugins.png.PNGMetadata` class exists in Oracle JDK but does not exist on OpenJDK.\r\nUpgrade of the lib should solve the issue, e.g.:\r\n```\r\n&lt;dependency&gt;\r\n    &lt;groupId&gt;net.sourceforge.plantuml&lt;/groupId&gt;\r\n    &lt;artifactId&gt;plantuml&lt;/artifactId&gt;\r\n    &lt;version&gt;1.2023.6&lt;/version&gt;\r\n&lt;/dependency&gt;\r\n```\r\n\r\nReference: https://github.com/plantuml/plantuml/issues/69","title":"PlantUML graph generation in java Illegal acces error","body":"<p>The <code>com.sun.imageio.plugins.png.PNGMetadata</code> class exists in Oracle JDK but does not exist on OpenJDK.\nUpgrade of the lib should solve the issue, e.g.:</p>\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;net.sourceforge.plantuml&lt;/groupId&gt;\n    &lt;artifactId&gt;plantuml&lt;/artifactId&gt;\n    &lt;version&gt;1.2023.6&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n<p>Reference: <a href=\"https://github.com/plantuml/plantuml/issues/69\" rel=\"nofollow noreferrer\">https://github.com/plantuml/plantuml/issues/69</a></p>\n"}],"owner":{"account_id":23563659,"reputation":40,"user_id":17604707,"display_name":"Jatel"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":397,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1682868819,"creation_date":1656576397,"question_id":72812306,"body_markdown":"I&#39;m trying to make a simple graph using java but keep getting error\r\n\r\nCode:\r\n\r\n```\r\npublic class PlantUMLDemoMain {\r\n    public static void main(String[] args) throws Exception {\r\n        generateFromStringSource(new File(&quot;from-string.png&quot;));\r\n        generateFromApi(new File(&quot;from-api.png&quot;));\r\n    }\r\n\r\n    private static void generateFromApi(File file) throws IOException {\r\n        // 1. setup:\r\n        SequenceDiagramFactory f = new SequenceDiagramFactory();\r\n        SequenceDiagram diagram = f.createEmptyDiagram();\r\n\r\n        // 2. Build the diagram:\r\n        // &quot;Bob -&gt; Alice : hello&quot;\r\n        // See net.sourceforge.plantuml.sequencediagram.command.CommandArrow#executeArg\r\n        Display bobD = Display.getWithNewlines(&quot;Bob&quot;);\r\n        Participant bobP = diagram.getOrCreateParticipant(&quot;Bob&quot;, bobD);\r\n        Display aliceD = Display.getWithNewlines(&quot;Alice&quot;);\r\n        Participant aliceP = diagram.getOrCreateParticipant(&quot;Alice&quot;, aliceD);\r\n\r\n        Display label = Display.getWithNewlines(&quot;hello&quot;);\r\n        ArrowConfiguration config = ArrowConfiguration.withDirectionNormal();\r\n\r\n        Message msg = new Message(bobP, aliceP, label, config, diagram.getNextMessageNumber());\r\n\r\n        checkState(null == diagram.addMessage(msg));\r\n\r\n        // 3. Output the diagram\r\n        // See net.sourceforge.plantuml.SourceStringReader#generateImage\r\n        diagram.makeDiagramReady();\r\n        checkState(1 == diagram.getNbImages());\r\n        try (OutputStream os = new FileOutputStream(file)) {\r\n            ImageData imageData = diagram.exportDiagram(os, 0, new FileFormatOption(FileFormat.PNG));\r\n            System.out.println(&quot;generateFromApi: &quot; + diagram.getDescription().getDescription());\r\n        }\r\n    }\r\n\r\n    private static void generateFromStringSource(File file) throws IOException {\r\n        String source = &quot;@startuml\\n&quot;;\r\n        source += &quot;Bob -&gt; Alice : hello\\n&quot;;\r\n        source += &quot;@enduml\\n&quot;;\r\n\r\n        StringBuffer stringBuffer = new StringBuffer();\r\n\r\n        SourceStringReader reader = new SourceStringReader(source);\r\n        // Write the first image to &quot;png&quot;\r\n        String desc = reader.generateImage(file);\r\n        // Return a null string if no generation\r\n        System.out.println(&quot;generateFromStringSource: &quot; + desc);\r\n    }\r\n}\r\n```\r\n\r\n```\r\nError: Exception in thread &quot;main&quot; java.lang.IllegalAccessError: class net.sourceforge.plantuml.png.PngIOMetadata (in unnamed module @0x9597028) cannot access class com.sun.imageio.plugins.png.PNGMetadata (in module java.desktop) because module java.desktop does not export com.sun.imageio.plugins.png to unnamed module @0x9597028\r\n\tat net.sourceforge.plantuml.png.PngIOMetadata.writeWithMetadata(PngIOMetadata.java:60)\r\n\tat net.sourceforge.plantuml.png.PngIO.write(PngIO.java:86)\r\n\tat net.sourceforge.plantuml.png.PngIO.write(PngIO.java:80)\r\n\tat net.sourceforge.plantuml.ugraphic.g2d.UGraphicG2d.writeImageTOBEMOVED(UGraphicG2d.java:219)\r\n\tat net.sourceforge.plantuml.ugraphic.ImageBuilder.writeImageInternal(ImageBuilder.java:249)\r\n\tat net.sourceforge.plantuml.ugraphic.ImageBuilder.writeImageTOBEMOVED(ImageBuilder.java:171)\r\n\tat net.sourceforge.plantuml.sequencediagram.graphic.SequenceDiagramFileMakerPuma2.createOne(SequenceDiagramFileMakerPuma2.java:234)\r\n\tat net.sourceforge.plantuml.sequencediagram.SequenceDiagram.exportDiagramInternal(SequenceDiagram.java:222)\r\n\tat net.sourceforge.plantuml.UmlDiagram.exportDiagramNow(UmlDiagram.java:236)\r\n\tat net.sourceforge.plantuml.AbstractPSystem.exportDiagram(AbstractPSystem.java:127)\r\n\tat net.sourceforge.plantuml.SourceStringReader.generateImage(SourceStringReader.java:124)\r\n\tat net.sourceforge.plantuml.SourceStringReader.generateImage(SourceStringReader.java:111)\r\n\tat net.sourceforge.plantuml.SourceStringReader.generateImage(SourceStringReader.java:101)\r\n\tat scr.graphviz.sk.PlantUMLDemoMain.generateFromStringSource(PlantUMLDemoMain.java:66)\r\n\tat scr.graphviz.sk.PlantUMLDemoMain.main(PlantUMLDemoMain.java:23)\r\n```\r\n\r\nI found someone with similar problem and older version of plantuml worked for him. I have jar file of the older version but I&#39;m not sure how to apply it. I tried inspecting the file and find out versions of libraries used and added maven dependencies for them but it didnt seem to work.\r\n\r\nThis is similar problem i mentioned https://github.com/plantuml/plantuml/issues/69","title":"PlantUML graph generation in java Illegal acces error","body":"<p>I'm trying to make a simple graph using java but keep getting error</p>\n<p>Code:</p>\n<pre><code>public class PlantUMLDemoMain {\n    public static void main(String[] args) throws Exception {\n        generateFromStringSource(new File(&quot;from-string.png&quot;));\n        generateFromApi(new File(&quot;from-api.png&quot;));\n    }\n\n    private static void generateFromApi(File file) throws IOException {\n        // 1. setup:\n        SequenceDiagramFactory f = new SequenceDiagramFactory();\n        SequenceDiagram diagram = f.createEmptyDiagram();\n\n        // 2. Build the diagram:\n        // &quot;Bob -&gt; Alice : hello&quot;\n        // See net.sourceforge.plantuml.sequencediagram.command.CommandArrow#executeArg\n        Display bobD = Display.getWithNewlines(&quot;Bob&quot;);\n        Participant bobP = diagram.getOrCreateParticipant(&quot;Bob&quot;, bobD);\n        Display aliceD = Display.getWithNewlines(&quot;Alice&quot;);\n        Participant aliceP = diagram.getOrCreateParticipant(&quot;Alice&quot;, aliceD);\n\n        Display label = Display.getWithNewlines(&quot;hello&quot;);\n        ArrowConfiguration config = ArrowConfiguration.withDirectionNormal();\n\n        Message msg = new Message(bobP, aliceP, label, config, diagram.getNextMessageNumber());\n\n        checkState(null == diagram.addMessage(msg));\n\n        // 3. Output the diagram\n        // See net.sourceforge.plantuml.SourceStringReader#generateImage\n        diagram.makeDiagramReady();\n        checkState(1 == diagram.getNbImages());\n        try (OutputStream os = new FileOutputStream(file)) {\n            ImageData imageData = diagram.exportDiagram(os, 0, new FileFormatOption(FileFormat.PNG));\n            System.out.println(&quot;generateFromApi: &quot; + diagram.getDescription().getDescription());\n        }\n    }\n\n    private static void generateFromStringSource(File file) throws IOException {\n        String source = &quot;@startuml\\n&quot;;\n        source += &quot;Bob -&gt; Alice : hello\\n&quot;;\n        source += &quot;@enduml\\n&quot;;\n\n        StringBuffer stringBuffer = new StringBuffer();\n\n        SourceStringReader reader = new SourceStringReader(source);\n        // Write the first image to &quot;png&quot;\n        String desc = reader.generateImage(file);\n        // Return a null string if no generation\n        System.out.println(&quot;generateFromStringSource: &quot; + desc);\n    }\n}\n</code></pre>\n<pre><code>Error: Exception in thread &quot;main&quot; java.lang.IllegalAccessError: class net.sourceforge.plantuml.png.PngIOMetadata (in unnamed module @0x9597028) cannot access class com.sun.imageio.plugins.png.PNGMetadata (in module java.desktop) because module java.desktop does not export com.sun.imageio.plugins.png to unnamed module @0x9597028\n    at net.sourceforge.plantuml.png.PngIOMetadata.writeWithMetadata(PngIOMetadata.java:60)\n    at net.sourceforge.plantuml.png.PngIO.write(PngIO.java:86)\n    at net.sourceforge.plantuml.png.PngIO.write(PngIO.java:80)\n    at net.sourceforge.plantuml.ugraphic.g2d.UGraphicG2d.writeImageTOBEMOVED(UGraphicG2d.java:219)\n    at net.sourceforge.plantuml.ugraphic.ImageBuilder.writeImageInternal(ImageBuilder.java:249)\n    at net.sourceforge.plantuml.ugraphic.ImageBuilder.writeImageTOBEMOVED(ImageBuilder.java:171)\n    at net.sourceforge.plantuml.sequencediagram.graphic.SequenceDiagramFileMakerPuma2.createOne(SequenceDiagramFileMakerPuma2.java:234)\n    at net.sourceforge.plantuml.sequencediagram.SequenceDiagram.exportDiagramInternal(SequenceDiagram.java:222)\n    at net.sourceforge.plantuml.UmlDiagram.exportDiagramNow(UmlDiagram.java:236)\n    at net.sourceforge.plantuml.AbstractPSystem.exportDiagram(AbstractPSystem.java:127)\n    at net.sourceforge.plantuml.SourceStringReader.generateImage(SourceStringReader.java:124)\n    at net.sourceforge.plantuml.SourceStringReader.generateImage(SourceStringReader.java:111)\n    at net.sourceforge.plantuml.SourceStringReader.generateImage(SourceStringReader.java:101)\n    at scr.graphviz.sk.PlantUMLDemoMain.generateFromStringSource(PlantUMLDemoMain.java:66)\n    at scr.graphviz.sk.PlantUMLDemoMain.main(PlantUMLDemoMain.java:23)\n</code></pre>\n<p>I found someone with similar problem and older version of plantuml worked for him. I have jar file of the older version but I'm not sure how to apply it. I tried inspecting the file and find out versions of libraries used and added maven dependencies for them but it didnt seem to work.</p>\n<p>This is similar problem i mentioned <a href=\"https://github.com/plantuml/plantuml/issues/69\" rel=\"nofollow noreferrer\">https://github.com/plantuml/plantuml/issues/69</a></p>\n"},{"tags":["java","c++","performance","c++11","g++"],"comments":[{"owner":{"account_id":1475,"reputation":533754,"user_id":1968,"accept_rate":83,"display_name":"Konrad Rudolph"},"score":2,"creation_date":1670407114,"post_id":74714726,"comment_id":131867559,"body_markdown":"The two programs are *not* doing the same thing. If you want them to be closer equivalents, add a call to `System.out.flush();` to the loop in your Java code.","body":"The two programs are <i>not</i> doing the same thing. If you want them to be closer equivalents, add a call to <code>System.out.flush();</code> to the loop in your Java code."},{"owner":{"account_id":15876219,"reputation":6333,"user_id":11455384,"display_name":"Fareanor"},"score":1,"creation_date":1670407267,"post_id":74714726,"comment_id":131867616,"body_markdown":"You may also be interested by [this](https://en.cppreference.com/w/cpp/io/ios_base/sync_with_stdio#:~:text=If%20the%20synchronization%20is%20turned%20off%2C%20the%20C%2B%2B%20standard%20streams%20are%20allowed%20to%20buffer%20their%20I/O%20independently%2C%20which%20may%20be%20considerably%20faster%20in%20some%20cases.) which could significantly increase the speed of IO operations.","body":"You may also be interested by <a href=\"https://en.cppreference.com/w/cpp/io/ios_base/sync_with_stdio#:~:text=If%20the%20synchronization%20is%20turned%20off%2C%20the%20C%2B%2B%20standard%20streams%20are%20allowed%20to%20buffer%20their%20I/O%20independently%2C%20which%20may%20be%20considerably%20faster%20in%20some%20cases.\" rel=\"nofollow noreferrer\">this</a> which could significantly increase the speed of IO operations."},{"owner":{"account_id":5990583,"reputation":35949,"user_id":4706785,"display_name":"Peter"},"score":3,"creation_date":1670407283,"post_id":74714726,"comment_id":131867625,"body_markdown":"@KonradRudolph  IIRC, `System.out` is line-buffered by default, so `System.out.println()` will flush the buffer on every call.","body":"@KonradRudolph  IIRC, <code>System.out</code> is line-buffered by default, so <code>System.out.println()</code> will flush the buffer on every call."},{"owner":{"account_id":16254326,"reputation":19,"user_id":11737336,"display_name":"Atolz"},"score":0,"creation_date":1670407392,"post_id":74714726,"comment_id":131867668,"body_markdown":"@463035818_is_not_a_number please how would I do that, thanks","body":"@463035818_is_not_a_number please how would I do that, thanks"},{"owner":{"account_id":1475,"reputation":533754,"user_id":1968,"accept_rate":83,"display_name":"Konrad Rudolph"},"score":1,"creation_date":1670407479,"post_id":74714726,"comment_id":131867705,"body_markdown":"@Peter Yeah that&#39;s true. Still, there&#39;s an extra function call in the C++ code which is absent in the Java code. Admittedly with IO bound code this should be completely negligible but if OP *does* see a difference it must come from *somewhere* (well, C++ IO also does some additional unnecessary things to sync with C IO).","body":"@Peter Yeah that&#39;s true. Still, there&#39;s an extra function call in the C++ code which is absent in the Java code. Admittedly with IO bound code this should be completely negligible but if OP <i>does</i> see a difference it must come from <i>somewhere</i> (well, C++ IO also does some additional unnecessary things to sync with C IO)."},{"owner":{"account_id":8290555,"reputation":406,"user_id":6232365,"display_name":"Arman Oganesyan"},"score":2,"creation_date":1670407781,"post_id":74714726,"comment_id":131867822,"body_markdown":"Replacing `endl` with `\\n` may increase the performance because `endl` flushes the buffer.","body":"Replacing <code>endl</code> with <code>\\n</code> may increase the performance because <code>endl</code> flushes the buffer."},{"owner":{"account_id":2679531,"reputation":2832,"user_id":2315162,"accept_rate":81,"display_name":"sinclair"},"score":0,"creation_date":1670407783,"post_id":74714726,"comment_id":131867823,"body_markdown":"Does this answer your question? [&#39;printf&#39; vs. &#39;cout&#39; in C++](https://stackoverflow.com/questions/2872543/printf-vs-cout-in-c)","body":"Does this answer your question? <a href=\"https://stackoverflow.com/questions/2872543/printf-vs-cout-in-c\">&#39;printf&#39; vs. &#39;cout&#39; in C++</a>"},{"owner":{"account_id":1475,"reputation":533754,"user_id":1968,"accept_rate":83,"display_name":"Konrad Rudolph"},"score":0,"creation_date":1670407833,"post_id":74714726,"comment_id":131867841,"body_markdown":"@ArmanOganesyan Already discussed in the comments above.","body":"@ArmanOganesyan Already discussed in the comments above."},{"owner":{"account_id":16254326,"reputation":19,"user_id":11737336,"display_name":"Atolz"},"score":0,"creation_date":1670408768,"post_id":74714726,"comment_id":131868127,"body_markdown":"@Fareanor waw, I tried it( std::ios::sync_with_stdio(false) ), and it&#39;s working, thanks; can you explain why it&#39;s improved; from the docs, does the synchronization means that the c++ out stream calls the c out stream? thus bringing an overhead? ...the code now runs in 7 Sec","body":"@Fareanor waw, I tried it( std::ios::sync_with_stdio(false) ), and it&#39;s working, thanks; can you explain why it&#39;s improved; from the docs, does the synchronization means that the c++ out stream calls the c out stream? thus bringing an overhead? ...the code now runs in 7 Sec"},{"owner":{"account_id":16254326,"reputation":19,"user_id":11737336,"display_name":"Atolz"},"score":0,"creation_date":1670408974,"post_id":74714726,"comment_id":131868198,"body_markdown":"@KonradRudolph yeah, it seems there are some syncing causing the slowdown","body":"@KonradRudolph yeah, it seems there are some syncing causing the slowdown"},{"owner":{"account_id":15876219,"reputation":6333,"user_id":11455384,"display_name":"Fareanor"},"score":1,"creation_date":1670409071,"post_id":74714726,"comment_id":131868232,"body_markdown":"@Atolz You should read the [given answer](https://stackoverflow.com/a/74715010/11455384), it&#39;s pretty good and clear :)","body":"@Atolz You should read the <a href=\"https://stackoverflow.com/a/74715010/11455384\">given answer</a>, it&#39;s pretty good and clear :)"},{"owner":{"account_id":16254326,"reputation":19,"user_id":11737336,"display_name":"Atolz"},"score":0,"creation_date":1670409587,"post_id":74714726,"comment_id":131868433,"body_markdown":"@ArmanOganesyan waw, thanks, using ```\\n``` instead of ```endl``` improved it further, now at 1.5 sec.....what an improvement;  turning off synchronization and substituting with ```\\n``` did it, thanks you all","body":"@ArmanOganesyan waw, thanks, using <code>\\n</code> instead of <code>endl</code> improved it further, now at 1.5 sec.....what an improvement;  turning off synchronization and substituting with <code>\\n</code> did it, thanks you all"},{"owner":{"account_id":1742994,"reputation":75290,"user_id":1593860,"display_name":"Pete Becker"},"score":0,"creation_date":1670423206,"post_id":74714726,"comment_id":131873241,"body_markdown":"@Atolz -- it&#39;s unfortunate that `std::endl` has become the default line-ending for many programmers. It&#39;s almost never appropriate. As you&#39;ve seen, `&#39;\\n&#39;` ends a line.","body":"@Atolz -- it&#39;s unfortunate that <code>std::endl</code> has become the default line-ending for many programmers. It&#39;s almost never appropriate. As you&#39;ve seen, <code>&#39;\\n&#39;</code> ends a line."}],"answers":[{"tags":[],"owner":{"account_id":1475,"reputation":533754,"user_id":1968,"accept_rate":83,"display_name":"Konrad Rudolph"},"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1670409041,"creation_date":1670408255,"answer_id":74715010,"question_id":74714726,"body_markdown":"There are several relevant differences between your C++ and Java code:\r\n\r\n1. By default C++ IO streams synchronise their state with the underlying C streams. This takes time. To avoid this (which you can do *only* if you know that your code does not mix C and C++ IO operations!), add the following to the beginning of your `main` code:\r\n\r\n    ```cpp\r\n    std::ios_base::sync_with_stdio(false);\r\n    ```\r\n\r\n2. `cout &lt;&lt; endl;` is equivalent to `cout &lt;&lt; &quot;\\n&quot; &lt;&lt; flush;` (which, in turn, is equivalent to `cout &lt;&lt; &quot;\\n&quot;; cout.flush();`). The `flush` call is absent from your Java code. You could add it to your Java code or, better, remove it from your C++ code: you almost never need to use `endl`/`flush`. Instead, just use\r\n\r\n    ```cpp\r\n    cout &lt;&lt; &quot;Hello World\\n&quot;;\r\n    ```\r\n\r\n    As noted by Peter in the comments, most systems flush the stdout stream on newline anyway (at least when attached to a terminal) so one might expect this not to make a difference. However, it does make a (substantial!) difference e.g. when piping the output to a file.\r\n\r\n3. Your Java benchmark code truncates fractional seconds. To show those fractions of seconds (relevant since the code runs in &lt;1s!), change the relevant line to\r\n\r\n    ```java\r\n    System.out.println(dur / 1000.0);\r\n    ```\r\n\r\n4. Be sure to compile your C++ code with optimisations enabled; with GCC/clang/ICC, you do this by passing `-O2`. MSVC has a similar flag, `/O2` (there are higher optimisation levels but they have particular issues; `-O2` is pretty much the default setting people use).\r\n\r\n5. Conversely, `java first.java` will first *compile* the code *every time* you invoke it. To make the comparison fair, be sure to run `javac first.java` ahead of time, and then execute the code via `java first`.\r\n\r\nMaking these changes causes the C++ code to overtake the Java code on my system. This is most noticeable when increasing the loop size from 100,000 to 1,000,000: the C++ code now runs in milliseconds, while the Java code takes several seconds (be sure to pipe the output to a file! Otherwise you will be purely measuring the latency/rendering speed of your terminal, not the performance of the code).","title":"Why is my Java program running faster than my C++ program , both doing the same thing","body":"<p>There are several relevant differences between your C++ and Java code:</p>\n<ol>\n<li><p>By default C++ IO streams synchronise their state with the underlying C streams. This takes time. To avoid this (which you can do <em>only</em> if you know that your code does not mix C and C++ IO operations!), add the following to the beginning of your <code>main</code> code:</p>\n<pre class=\"lang-cpp prettyprint-override\"><code>std::ios_base::sync_with_stdio(false);\n</code></pre>\n</li>\n<li><p><code>cout &lt;&lt; endl;</code> is equivalent to <code>cout &lt;&lt; &quot;\\n&quot; &lt;&lt; flush;</code> (which, in turn, is equivalent to <code>cout &lt;&lt; &quot;\\n&quot;; cout.flush();</code>). The <code>flush</code> call is absent from your Java code. You could add it to your Java code or, better, remove it from your C++ code: you almost never need to use <code>endl</code>/<code>flush</code>. Instead, just use</p>\n<pre class=\"lang-cpp prettyprint-override\"><code>cout &lt;&lt; &quot;Hello World\\n&quot;;\n</code></pre>\n<p>As noted by Peter in the comments, most systems flush the stdout stream on newline anyway (at least when attached to a terminal) so one might expect this not to make a difference. However, it does make a (substantial!) difference e.g. when piping the output to a file.</p>\n</li>\n<li><p>Your Java benchmark code truncates fractional seconds. To show those fractions of seconds (relevant since the code runs in &lt;1s!), change the relevant line to</p>\n<pre class=\"lang-java prettyprint-override\"><code>System.out.println(dur / 1000.0);\n</code></pre>\n</li>\n<li><p>Be sure to compile your C++ code with optimisations enabled; with GCC/clang/ICC, you do this by passing <code>-O2</code>. MSVC has a similar flag, <code>/O2</code> (there are higher optimisation levels but they have particular issues; <code>-O2</code> is pretty much the default setting people use).</p>\n</li>\n<li><p>Conversely, <code>java first.java</code> will first <em>compile</em> the code <em>every time</em> you invoke it. To make the comparison fair, be sure to run <code>javac first.java</code> ahead of time, and then execute the code via <code>java first</code>.</p>\n</li>\n</ol>\n<p>Making these changes causes the C++ code to overtake the Java code on my system. This is most noticeable when increasing the loop size from 100,000 to 1,000,000: the C++ code now runs in milliseconds, while the Java code takes several seconds (be sure to pipe the output to a file! Otherwise you will be purely measuring the latency/rendering speed of your terminal, not the performance of the code).</p>\n"}],"owner":{"account_id":16254326,"reputation":19,"user_id":11737336,"display_name":"Atolz"},"comment_count":13,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":134,"favorite_count":0,"down_vote_count":1,"up_vote_count":2,"closed_date":1670408645,"answer_count":1,"score":1,"last_activity_date":1682868755,"creation_date":1670406949,"question_id":74714726,"body_markdown":"I wrote a program in both C++ and Java to print &quot;Hello World&quot; 100,000 times, but I noticed that the C++ code takes too long compared to the Java code;\r\nThe Java code takes about 6 seconds averagely and the C++ code takes about 18 seconds averagely, both run from the command line;\r\nCan someone please explain why, thanks.\r\n\r\nThe name of the program is first.java and first.cpp for Java and C++ respectively\r\nI used:  ```java first.java```; and  ```first.exe```; both from the command line\r\n\r\ng++ --version\r\ng++ (Rev6, Built by MSYS2 project) 11.2.0\r\n\r\njava --version\r\njava 13.0.2, 2020-01-14\r\n\r\nJava Code\r\n```\r\nclass first {\r\n    public static void main(String... args) {\r\n        long start = System.currentTimeMillis();\r\n\r\n        for (int i = 0; i &lt; 100000; i++) {\r\n            System.out.println(&quot;Hello World&quot;);\r\n        }\r\n\r\n        long end = System.currentTimeMillis();\r\n\r\n        long dur = end - start;\r\n        System.out.println(dur / 1000);\r\n    }\r\n\r\n}\r\n```\r\n\r\nC++ Code\r\n```\r\n#include &lt;iostream&gt;\r\n#include &lt;string&gt;\r\n#include &lt;chrono&gt;\r\n\r\nusing namespace std;\r\n\r\nint main()\r\n{\r\n    auto start = std::chrono::system_clock::now();\r\n    for (int i = 0; i &lt; 100000; i++)\r\n    {\r\n        cout &lt;&lt; &quot;Hello World&quot; &lt;&lt; endl;\r\n    }\r\n    auto end = std::chrono::system_clock::now();\r\n\r\n    std::chrono::duration&lt;double&gt; elapsed_seconds = end - start;\r\n    cout &lt;&lt; elapsed_seconds.count() &lt;&lt; endl;\r\n}\r\n```\r\n","title":"Why is my Java program running faster than my C++ program , both doing the same thing","body":"<p>I wrote a program in both C++ and Java to print &quot;Hello World&quot; 100,000 times, but I noticed that the C++ code takes too long compared to the Java code;\nThe Java code takes about 6 seconds averagely and the C++ code takes about 18 seconds averagely, both run from the command line;\nCan someone please explain why, thanks.</p>\n<p>The name of the program is first.java and first.cpp for Java and C++ respectively\nI used:  <code>java first.java</code>; and  <code>first.exe</code>; both from the command line</p>\n<p>g++ --version\ng++ (Rev6, Built by MSYS2 project) 11.2.0</p>\n<p>java --version\njava 13.0.2, 2020-01-14</p>\n<p>Java Code</p>\n<pre><code>class first {\n    public static void main(String... args) {\n        long start = System.currentTimeMillis();\n\n        for (int i = 0; i &lt; 100000; i++) {\n            System.out.println(&quot;Hello World&quot;);\n        }\n\n        long end = System.currentTimeMillis();\n\n        long dur = end - start;\n        System.out.println(dur / 1000);\n    }\n\n}\n</code></pre>\n<p>C++ Code</p>\n<pre><code>#include &lt;iostream&gt;\n#include &lt;string&gt;\n#include &lt;chrono&gt;\n\nusing namespace std;\n\nint main()\n{\n    auto start = std::chrono::system_clock::now();\n    for (int i = 0; i &lt; 100000; i++)\n    {\n        cout &lt;&lt; &quot;Hello World&quot; &lt;&lt; endl;\n    }\n    auto end = std::chrono::system_clock::now();\n\n    std::chrono::duration&lt;double&gt; elapsed_seconds = end - start;\n    cout &lt;&lt; elapsed_seconds.count() &lt;&lt; endl;\n}\n</code></pre>\n"},{"tags":["java","spring","spring-boot","port","spring-boot-actuator"],"comments":[{"owner":{"account_id":3671809,"reputation":1284,"user_id":3058832,"display_name":"dgebert"},"score":2,"creation_date":1584116579,"post_id":60673803,"comment_id":107347132,"body_markdown":"Could you please add your full application.properties file or even a github link?","body":"Could you please add your full application.properties file or even a github link?"},{"owner":{"account_id":12863622,"reputation":2586,"user_id":9304616,"display_name":"Lebecca"},"score":3,"creation_date":1584116997,"post_id":60673803,"comment_id":107347295,"body_markdown":"and spring boot version","body":"and spring boot version"},{"owner":{"account_id":13879775,"reputation":5228,"user_id":10020419,"display_name":"Chris"},"score":2,"creation_date":1584118340,"post_id":60673803,"comment_id":107347915,"body_markdown":"And your dependencies from pom.xml/gradle.build file","body":"And your dependencies from pom.xml/gradle.build file"},{"owner":{"account_id":16502910,"reputation":61,"user_id":11923754,"display_name":"Abhishek Mishra"},"score":1,"creation_date":1584129896,"post_id":60673803,"comment_id":107352252,"body_markdown":"@dgebert added the application.properties file","body":"@dgebert added the application.properties file"},{"owner":{"account_id":16502910,"reputation":61,"user_id":11923754,"display_name":"Abhishek Mishra"},"score":0,"creation_date":1584129987,"post_id":60673803,"comment_id":107352282,"body_markdown":"@Lebecca I updated the spring-boot version. For your reference, it is 2.0.6","body":"@Lebecca I updated the spring-boot version. For your reference, it is 2.0.6"},{"owner":{"account_id":16502910,"reputation":61,"user_id":11923754,"display_name":"Abhishek Mishra"},"score":0,"creation_date":1584130044,"post_id":60673803,"comment_id":107352303,"body_markdown":"@theshadog Please check, I have added the dependencies","body":"@theshadog Please check, I have added the dependencies"},{"owner":{"account_id":290683,"reputation":12512,"user_id":592355,"display_name":"xerx593"},"score":1,"creation_date":1584132206,"post_id":60673803,"comment_id":107352961,"body_markdown":"i think the (`8080`) &quot;side effect&quot; might be caused by `camel.component.servlet.mapping.context-path=/*` , have you tried the (simple) workaround, setting : `management.server.port=8080` (resp. `${server.port}`)?","body":"i think the (<code>8080</code>) &quot;side effect&quot; might be caused by <code>camel.component.servlet.mapping.context-path=&#47;*</code> , have you tried the (simple) workaround, setting : <code>management.server.port=8080</code> (resp. <code>${server.port}</code>)?"},{"owner":{"account_id":290683,"reputation":12512,"user_id":592355,"display_name":"xerx593"},"score":0,"creation_date":1584133339,"post_id":60673803,"comment_id":107353381,"body_markdown":"..if that fails, please refer to [current camel-spring-boot-sample](https://github.com/apache/camel-spring-boot/tree/master/examples/camel-example-spring-boot) (without `camel.component.servlet.mapping.context-path=/*`)","body":"..if that fails, please refer to <a href=\"https://github.com/apache/camel-spring-boot/tree/master/examples/camel-example-spring-boot\" rel=\"nofollow noreferrer\">current camel-spring-boot-sample</a> (without <code>camel.component.servlet.mapping.context-path=&#47;*</code>)"}],"answers":[{"tags":[],"owner":{"account_id":12480263,"reputation":10843,"user_id":9085273,"display_name":"rieckpil"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1584126952,"creation_date":1584126952,"answer_id":60676083,"question_id":60673803,"body_markdown":"Regarding the Spring Boot Actuator [documentation][1]\r\n\r\n&gt; Exposing management endpoints by using the default HTTP port is a\r\n&gt; sensible choice for cloud-based deployments. If, however, your\r\n&gt; application runs inside your own data center, you may prefer to expose\r\n&gt; endpoints by using a different HTTP port.\r\n\r\nit serves the Actuator using the default HTTP port (which is 8080). I did a quick check and could confirm this with Spring Boot 2.1.X and 2.2.X.\r\n\r\nTry to remove the `management.port` from your config and if this does not work then the problem might come from an additional (custom) configuration in your application.\r\n\r\n  [1]: https://docs.spring.io/spring-boot/docs/current/reference/html/production-ready-features.html#production-ready-monitoring","title":"Spring actuator endpoints does not work on the application port","body":"<p>Regarding the Spring Boot Actuator <a href=\"https://docs.spring.io/spring-boot/docs/current/reference/html/production-ready-features.html#production-ready-monitoring\" rel=\"nofollow noreferrer\">documentation</a></p>\n\n<blockquote>\n  <p>Exposing management endpoints by using the default HTTP port is a\n  sensible choice for cloud-based deployments. If, however, your\n  application runs inside your own data center, you may prefer to expose\n  endpoints by using a different HTTP port.</p>\n</blockquote>\n\n<p>it serves the Actuator using the default HTTP port (which is 8080). I did a quick check and could confirm this with Spring Boot 2.1.X and 2.2.X.</p>\n\n<p>Try to remove the <code>management.port</code> from your config and if this does not work then the problem might come from an additional (custom) configuration in your application.</p>\n"},{"tags":[],"owner":{"account_id":13862481,"reputation":19,"user_id":10007797,"display_name":"GUTTA K C"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1584215224,"creation_date":1584214724,"answer_id":60686621,"question_id":60673803,"body_markdown":"Please set the below in application.properties file\r\n\r\n    management.endpoints.enabled-by-default=true \r\n    \r\n    management.endpoints.web.exposure.include=*  ","title":"Spring actuator endpoints does not work on the application port","body":"<p>Please set the below in application.properties file</p>\n\n<pre><code>management.endpoints.enabled-by-default=true \n\nmanagement.endpoints.web.exposure.include=*  \n</code></pre>\n"},{"tags":[],"owner":{"account_id":6628166,"reputation":165,"user_id":5117671,"display_name":"Jack"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1627987706,"creation_date":1627987706,"answer_id":68634699,"question_id":60673803,"body_markdown":"Remove `management.server.port=9000`, this property overrides `server.port=8080`.","title":"Spring actuator endpoints does not work on the application port","body":"<p>Remove <code>management.server.port=9000</code>, this property overrides <code>server.port=8080</code>.</p>\n"},{"tags":[],"owner":{"account_id":12395182,"reputation":51,"user_id":9035375,"display_name":"Enzo Lopes"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1637609879,"creation_date":1637609879,"answer_id":70071454,"question_id":60673803,"body_markdown":"I had the same problem, what was causing this for me was a conflict between the context I declared for camel and the one being used for spring actuator.\r\n\r\nSo, at application.yml I had these 3 contexts:\r\n\r\n    server: servlet: context-path: myservercontext/v1\r\n    camel: component: servlet: mapping: contextPath: /*\r\n    management: endpoints: web: base-path: &quot;/&quot;\r\n\r\nI think after the request hits the server it gets lost on this ambiguity so i solved it by changing these contexts to:\r\n\r\n    server: servlet: context-path: myservercontext/v1\r\n    camel: component: servlet: mapping: contextPath: /camel/*\r\n    management: endpoints: web: base-path: &quot;/&quot;\r\n\r\nThis worked out nicely for me since all my resources where grouped under &quot;/camel&quot; anyway but as I tested I found out this also works:\r\n\r\n    server: servlet: context-path: myservercontext\r\n    camel: component: servlet: mapping: contextPath: /v1/*\r\n    management: endpoints: web: base-path: &quot;/&quot;\r\n\r\nJust note that in this last scenario the health route won&#39;t be under &quot;v1&quot;.\r\n\r\nI would never have figured out the cause of this problem if it wasn&#39;t for this question, even if it wasn&#39;t solved yet, so I thank you a lot for posting this and hope my solution will manage to help others ^^","title":"Spring actuator endpoints does not work on the application port","body":"<p>I had the same problem, what was causing this for me was a conflict between the context I declared for camel and the one being used for spring actuator.</p>\n<p>So, at application.yml I had these 3 contexts:</p>\n<pre><code>server: servlet: context-path: myservercontext/v1\ncamel: component: servlet: mapping: contextPath: /*\nmanagement: endpoints: web: base-path: &quot;/&quot;\n</code></pre>\n<p>I think after the request hits the server it gets lost on this ambiguity so i solved it by changing these contexts to:</p>\n<pre><code>server: servlet: context-path: myservercontext/v1\ncamel: component: servlet: mapping: contextPath: /camel/*\nmanagement: endpoints: web: base-path: &quot;/&quot;\n</code></pre>\n<p>This worked out nicely for me since all my resources where grouped under &quot;/camel&quot; anyway but as I tested I found out this also works:</p>\n<pre><code>server: servlet: context-path: myservercontext\ncamel: component: servlet: mapping: contextPath: /v1/*\nmanagement: endpoints: web: base-path: &quot;/&quot;\n</code></pre>\n<p>Just note that in this last scenario the health route won't be under &quot;v1&quot;.</p>\n<p>I would never have figured out the cause of this problem if it wasn't for this question, even if it wasn't solved yet, so I thank you a lot for posting this and hope my solution will manage to help others ^^</p>\n"},{"tags":[],"owner":{"account_id":7822670,"reputation":1609,"user_id":5915318,"display_name":"David Kariuki"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1682868647,"creation_date":1682868647,"answer_id":76142083,"question_id":60673803,"body_markdown":"### Sample server and management configuration\r\n\r\nBelow is a sample configuration.\r\n\r\nYou can have a separate server port and one for management where the actuator will run.\r\nFor example, you may have `port 8001` as your `SERVER` port and maybe have `port 8000` as your `MANAGEMENT` port. \r\n\r\nI will use the `applications.properties` file formatting for my answer. Please update accordingly if using `application.yml`\r\n\r\n\r\n    # SERVER CONFIGURATION\r\n    server.port=8001\r\n    # Server - Compression :\r\n    server.compression.min-response-size=2KB\r\n    server.compression.enabled=true\r\n    server.compression.mime-types=text/html,text/css,text/csv,text/javascript,text/markdown,text/plain\r\n    # Server - Error handling :\r\n    server.error.include-binding-errors=on_param\r\n    server.error.include-exception=true\r\n    server.error.include-message=on_param\r\n    server.error.include-stacktrace=on_param\r\n    server.error.whitelabel.enabled=true\r\n    server.error.path=/error\r\n    # Server - Session :\r\n    server.servlet.encoding.charset=utf-8\r\n    server.servlet.session.tracking-modes=cookie\r\n    server.servlet.session.cookie.max-age=30\r\n    server.servlet.session.cookie.secure=true\r\n    server.servlet.session.cookie.name=cookie_session_duesclerk\r\n    #\r\n    #\r\n    # MANAGEMENT CONFIGURATION\r\n    management.server.port=8000\r\n    springdoc.use-management-port=true\r\n    management.endpoints.enabled-by-default=true\r\n    management.server.base-path=/management\r\n    management.server.ssl.enabled=false\r\n    management.endpoints.web.exposure.include= health, openapi, swaggerui\r\n    #\r\n\r\nPlease note the custom management path `/management`\r\n\r\n    management.server.base-path=/management\r\n\r\nYou can remove/retain this based on what you need ","title":"Spring actuator endpoints does not work on the application port","body":"<h3>Sample server and management configuration</h3>\n<p>Below is a sample configuration.</p>\n<p>You can have a separate server port and one for management where the actuator will run.\nFor example, you may have <code>port 8001</code> as your <code>SERVER</code> port and maybe have <code>port 8000</code> as your <code>MANAGEMENT</code> port.</p>\n<p>I will use the <code>applications.properties</code> file formatting for my answer. Please update accordingly if using <code>application.yml</code></p>\n<pre><code># SERVER CONFIGURATION\nserver.port=8001\n# Server - Compression :\nserver.compression.min-response-size=2KB\nserver.compression.enabled=true\nserver.compression.mime-types=text/html,text/css,text/csv,text/javascript,text/markdown,text/plain\n# Server - Error handling :\nserver.error.include-binding-errors=on_param\nserver.error.include-exception=true\nserver.error.include-message=on_param\nserver.error.include-stacktrace=on_param\nserver.error.whitelabel.enabled=true\nserver.error.path=/error\n# Server - Session :\nserver.servlet.encoding.charset=utf-8\nserver.servlet.session.tracking-modes=cookie\nserver.servlet.session.cookie.max-age=30\nserver.servlet.session.cookie.secure=true\nserver.servlet.session.cookie.name=cookie_session_duesclerk\n#\n#\n# MANAGEMENT CONFIGURATION\nmanagement.server.port=8000\nspringdoc.use-management-port=true\nmanagement.endpoints.enabled-by-default=true\nmanagement.server.base-path=/management\nmanagement.server.ssl.enabled=false\nmanagement.endpoints.web.exposure.include= health, openapi, swaggerui\n#\n</code></pre>\n<p>Please note the custom management path <code>/management</code></p>\n<pre><code>management.server.base-path=/management\n</code></pre>\n<p>You can remove/retain this based on what you need</p>\n"}],"owner":{"account_id":16502910,"reputation":61,"user_id":11923754,"display_name":"Abhishek Mishra"},"comment_count":8,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":5287,"favorite_count":0,"down_vote_count":0,"up_vote_count":5,"answer_count":5,"score":5,"last_activity_date":1682868647,"creation_date":1584115866,"question_id":60673803,"body_markdown":"I am trying to enable the actuator endpoints on the same port as the application port (specified in the application.properties file by the server.port=8080) but for some reason, it does not work. When I run the application, I can get back the response from the application but not from the actuator endpoints. I can see the logs mention the endpoints being exposed beneath base path &#39;/actuator&#39; as shown in the screenshot below. But when I try to hit the actuator URL, it gives a 404.\r\n\r\nURL, **not working**:\r\n\r\n - http://localhost:**8080**/actuator\r\n - http://localhost:**8080**/actuator/health\r\n - http://localhost:**8080**/actuator/info   \r\n\r\nHowever, if I specify a separate port in application.properties for the actuator endpoints with the property (management.server.port=9000) then it works fine.\r\n\r\nURL, that&#39;s **working**:\r\n\r\n - http://localhost:**9000**/actuator\r\n - http://localhost:**9000**/actuator/health\r\n - http://localhost:**9000**/actuator/info  \r\n\r\nThe only difference is about the port number but from what I read in the spring documentation, the actuator endpoints should by default be enabled on the application port if we don&#39;t specify the management.server.port.\r\nCan someone please explain what am I missing here?[![enter image description here][1]][1]\r\n [1]: https://i.stack.imgur.com/F1ZRv.png\r\n\r\nPS: The application run logs are exactly the same with or without specifying the management.server.port, hence, this one screenshot is without specifying the management port. \r\nAlso, I tried giving the same port number for both the property (server.port and management.server.port) but the same problem occurs. The application works on that port but the actuator endpoints do not.\r\nI am using the spring-boot version 2.0.6\r\n\r\nThese are the contents of my application.properties file:\r\n\r\n    camel.springboot.main-run-controller=true\r\n    camel.springboot.name=AppName\r\n    camel.rest.data-format-property.prettyPrint=false\r\n    camel.component.servlet.mapping.context-path=/*\r\n    \r\n    server.port=8080\r\n    management.server.port=9000\r\n\r\n    management.endpoint.health.show-details=always\r\n    management.endpoint.beans.enabled=true\r\n    \r\n    logging.level.org.springframework = INFO\r\n    logging.level.org.apache.camel.spring.boot = INFO\r\n    logging.level.org.apache.camel.impl = DEBUG\r\n\r\nHere are the dependencies in pom.xml:\r\n\r\n    &lt;dependencies&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;org.apache.camel&lt;/groupId&gt;\r\n                &lt;artifactId&gt;camel-spring-boot-starter&lt;/artifactId&gt;\r\n            &lt;/dependency&gt;\r\n    \r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n                &lt;artifactId&gt;spring-boot-starter-actuator&lt;/artifactId&gt;\r\n            &lt;/dependency&gt;\r\n    \r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n                &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\r\n                &lt;exclusions&gt;\r\n                    &lt;exclusion&gt;\r\n                        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n                        &lt;artifactId&gt;spring-boot-starter-tomcat&lt;/artifactId&gt;\r\n                    &lt;/exclusion&gt;\r\n                &lt;/exclusions&gt;\r\n            &lt;/dependency&gt;\r\n    \r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n                &lt;artifactId&gt;spring-boot-starter-undertow&lt;/artifactId&gt;\r\n            &lt;/dependency&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;org.apache.camel&lt;/groupId&gt;\r\n                &lt;artifactId&gt;camel-servlet-starter&lt;/artifactId&gt;\r\n            &lt;/dependency&gt;\r\n    &lt;/dependencies&gt;","title":"Spring actuator endpoints does not work on the application port","body":"<p>I am trying to enable the actuator endpoints on the same port as the application port (specified in the application.properties file by the server.port=8080) but for some reason, it does not work. When I run the application, I can get back the response from the application but not from the actuator endpoints. I can see the logs mention the endpoints being exposed beneath base path '/actuator' as shown in the screenshot below. But when I try to hit the actuator URL, it gives a 404.</p>\n\n<p>URL, <strong>not working</strong>:</p>\n\n<ul>\n<li><a href=\"http://localhost\" rel=\"nofollow noreferrer\">http://localhost</a>:<strong>8080</strong>/actuator</li>\n<li><a href=\"http://localhost\" rel=\"nofollow noreferrer\">http://localhost</a>:<strong>8080</strong>/actuator/health</li>\n<li><a href=\"http://localhost\" rel=\"nofollow noreferrer\">http://localhost</a>:<strong>8080</strong>/actuator/info   </li>\n</ul>\n\n<p>However, if I specify a separate port in application.properties for the actuator endpoints with the property (management.server.port=9000) then it works fine.</p>\n\n<p>URL, that's <strong>working</strong>:</p>\n\n<ul>\n<li><a href=\"http://localhost\" rel=\"nofollow noreferrer\">http://localhost</a>:<strong>9000</strong>/actuator</li>\n<li><a href=\"http://localhost\" rel=\"nofollow noreferrer\">http://localhost</a>:<strong>9000</strong>/actuator/health</li>\n<li><a href=\"http://localhost\" rel=\"nofollow noreferrer\">http://localhost</a>:<strong>9000</strong>/actuator/info  </li>\n</ul>\n\n<p>The only difference is about the port number but from what I read in the spring documentation, the actuator endpoints should by default be enabled on the application port if we don't specify the management.server.port.\nCan someone please explain what am I missing here?<a href=\"https://i.stack.imgur.com/F1ZRv.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/F1ZRv.png\" alt=\"enter image description here\"></a>\nPS: The application run logs are exactly the same with or without specifying the management.server.port, hence, this one screenshot is without specifying the management port. \nAlso, I tried giving the same port number for both the property (server.port and management.server.port) but the same problem occurs. The application works on that port but the actuator endpoints do not.\nI am using the spring-boot version 2.0.6</p>\n\n<p>These are the contents of my application.properties file:</p>\n\n<pre><code>camel.springboot.main-run-controller=true\ncamel.springboot.name=AppName\ncamel.rest.data-format-property.prettyPrint=false\ncamel.component.servlet.mapping.context-path=/*\n\nserver.port=8080\nmanagement.server.port=9000\n\nmanagement.endpoint.health.show-details=always\nmanagement.endpoint.beans.enabled=true\n\nlogging.level.org.springframework = INFO\nlogging.level.org.apache.camel.spring.boot = INFO\nlogging.level.org.apache.camel.impl = DEBUG\n</code></pre>\n\n<p>Here are the dependencies in pom.xml:</p>\n\n<pre><code>&lt;dependencies&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.apache.camel&lt;/groupId&gt;\n            &lt;artifactId&gt;camel-spring-boot-starter&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-actuator&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\n            &lt;exclusions&gt;\n                &lt;exclusion&gt;\n                    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n                    &lt;artifactId&gt;spring-boot-starter-tomcat&lt;/artifactId&gt;\n                &lt;/exclusion&gt;\n            &lt;/exclusions&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-undertow&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.apache.camel&lt;/groupId&gt;\n            &lt;artifactId&gt;camel-servlet-starter&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n&lt;/dependencies&gt;\n</code></pre>\n"},{"tags":["java","spring-boot","circuit-breaker","resilience4j"],"owner":{"account_id":18984426,"reputation":418,"user_id":13855094,"display_name":"Krithick S"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":63,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1682867568,"creation_date":1682867568,"question_id":76141989,"body_markdown":"I noticed that the `registerHealthIndicator` attribute can be set via application properties as mentioned [here][1]\r\n\r\n```\r\nmanagement.health.circuitbreakers.enabled: true\r\nmanagement.health.ratelimiters.enabled: true\r\n\r\nresilience4j.circuitbreaker:\r\n  configs:\r\n    default:\r\n      registerHealthIndicator: true\r\n```\r\nBy setting via properties it can be made `true` or would be `false` by [default][2]. \r\n\r\nI had created the circuit breaker programmatically as a @Bean\r\n```\r\nCircuitBreakerConfig circuitBreakerConfig = CircuitBreakerConfig.custom()\r\n                .slidingWindowType(SlidingWindowType.TIME_BASED)\r\n                .slidingWindowSize(10)\r\n                .minimumNumberOfCalls(6)\r\n                .failureRateThreshold(50)\r\n                .slowCallDurationThreshold(Duration.ofSeconds(10))\r\n                .slowCallRateThreshold(50)\r\n                .build();\r\n```\r\nand wanted to enable `registerHealthIndicator` to `true`. Is there any method in the [CircuitBreakerConfig][3] to enable the HealthIndicator to `true`. Or is there any other workaround?\r\n\r\n\r\n  [1]: https://resilience4j.readme.io/docs/getting-started-3#health-endpoint\r\n  [2]: https://github.com/resilience4j/resilience4j/blob/master/resilience4j-spring-boot2/src/main/java/io/github/resilience4j/circuitbreaker/monitoring/health/CircuitBreakersHealthIndicator.java#L103\r\n  [3]: https://github.com/resilience4j/resilience4j/blob/master/resilience4j-circuitbreaker/src/main/java/io/github/resilience4j/circuitbreaker/CircuitBreakerConfig.java#L100","title":"How to enable registerHealthIndicator programatically via configuration class","body":"<p>I noticed that the <code>registerHealthIndicator</code> attribute can be set via application properties as mentioned <a href=\"https://resilience4j.readme.io/docs/getting-started-3#health-endpoint\" rel=\"nofollow noreferrer\">here</a></p>\n<pre><code>management.health.circuitbreakers.enabled: true\nmanagement.health.ratelimiters.enabled: true\n\nresilience4j.circuitbreaker:\n  configs:\n    default:\n      registerHealthIndicator: true\n</code></pre>\n<p>By setting via properties it can be made <code>true</code> or would be <code>false</code> by <a href=\"https://github.com/resilience4j/resilience4j/blob/master/resilience4j-spring-boot2/src/main/java/io/github/resilience4j/circuitbreaker/monitoring/health/CircuitBreakersHealthIndicator.java#L103\" rel=\"nofollow noreferrer\">default</a>.</p>\n<p>I had created the circuit breaker programmatically as a @Bean</p>\n<pre><code>CircuitBreakerConfig circuitBreakerConfig = CircuitBreakerConfig.custom()\n                .slidingWindowType(SlidingWindowType.TIME_BASED)\n                .slidingWindowSize(10)\n                .minimumNumberOfCalls(6)\n                .failureRateThreshold(50)\n                .slowCallDurationThreshold(Duration.ofSeconds(10))\n                .slowCallRateThreshold(50)\n                .build();\n</code></pre>\n<p>and wanted to enable <code>registerHealthIndicator</code> to <code>true</code>. Is there any method in the <a href=\"https://github.com/resilience4j/resilience4j/blob/master/resilience4j-circuitbreaker/src/main/java/io/github/resilience4j/circuitbreaker/CircuitBreakerConfig.java#L100\" rel=\"nofollow noreferrer\">CircuitBreakerConfig</a> to enable the HealthIndicator to <code>true</code>. Or is there any other workaround?</p>\n"},{"tags":["java","android","service","broadcastreceiver","keyevent"],"owner":{"account_id":15720945,"reputation":83,"user_id":11343852,"display_name":"Yasir"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":29,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1682867235,"creation_date":1682866819,"question_id":76141924,"body_markdown":"Im trying to detect the wired earphone&#39;s mic button press while the app is running in background,\r\n* In the below code, i have AudioService.java running as a long running service with a notification, it also has a MyBroadcastReceiver initilization and in MyBroadcastReceiver the button event is handled.\r\n\r\n* Im able to detect the event if the button is pressed when the app is running, but not when app is closed (in homescreen or on other app) or screen is off.\r\n\r\n\r\nheres my MainActivity,\r\n\r\n    public class MainActivity extends AppCompatActivity {\r\n    \r\n    \r\n      private int FOREGROUND_ID = 159753;\r\n    \r\n      @Override\r\n      protected void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        setContentView(R.layout.activity_main);\r\n    \r\n        if (ContextCompat.checkSelfPermission(this, Manifest.permission.FOREGROUND_SERVICE) != PackageManager.PERMISSION_GRANTED) {\r\n          ActivityCompat.requestPermissions(this,\r\n                  new String[]{Manifest.permission.FOREGROUND_SERVICE},\r\n                  FOREGROUND_ID);\r\n        }\r\n    \r\n        Intent intent = new Intent(this, AudioService.class);\r\n        ContextCompat.startForegroundService(this, intent);\r\n    \r\n      }\r\n    \r\n      @Override\r\n      public void onRequestPermissionsResult(int requestCode, String[] permissions,\r\n                                             int[] grantResults)\r\n      {\r\n        super.onRequestPermissionsResult(requestCode, permissions, grantResults);\r\n        if (requestCode == FOREGROUND_ID) {\r\n          if (grantResults.length &gt; 0\r\n                  &amp;&amp; grantResults[0] == PackageManager.PERMISSION_GRANTED)\r\n          {\r\n            Log.d(&quot;MainActivity&quot;, &quot;permission granted&quot;);\r\n          } else {\r\n    \r\n            Log.d(&quot;MainActivity&quot;, &quot;permission denied&quot;);\r\n          }\r\n    \r\n        }\r\n      }\r\n    \r\n    \r\n      @Override\r\n      public boolean onKeyDown(int keyCode, KeyEvent event) {\r\n        if (keyCode == KeyEvent.KEYCODE_HEADSETHOOK) {\r\n          Toast.makeText(MainActivity.this, &quot;Playing audio&quot;, Toast.LENGTH_SHORT).show();\r\n          Log.d(&quot;MainActivity&quot;, &quot;Pressed!&quot;);\r\n          return true;\r\n        }\r\n        return super.onKeyDown(keyCode, event);\r\n      }\r\n    }\r\n\r\nAudioService.java\r\n\r\n\r\n    \r\n    public class AudioService extends Service {\r\n    \r\n      private static final String TAG = &quot;AudioService&quot;;\r\n      private static final int NOTIFICATION_ID = 1;\r\n      private static final String CHANNEL_ID = &quot;AudioServiceChannel&quot;;\r\n    \r\n    //  private BroadcastReceiver mBroadcastReceiver;\r\n      private MyBroadcastReceiver mBroadcastReceiver;\r\n    \r\n      @Override\r\n      public void onCreate() {\r\n        super.onCreate();\r\n    \r\n        Log.d(TAG, &quot;onCreate&quot;);\r\n    \r\n        // Create the broadcast receiver to listen for ACTION_MEDIA_BUTTON\r\n        mBroadcastReceiver = new MyBroadcastReceiver();\r\n    \r\n        // Register the broadcast receiver with the intent filter for ACTION_MEDIA_BUTTON\r\n        IntentFilter filter = new IntentFilter(Intent.ACTION_MEDIA_BUTTON);\r\n        registerReceiver(mBroadcastReceiver, filter);\r\n      }\r\n    \r\n      @Override\r\n      public int onStartCommand(Intent intent, int flags, int startId) {\r\n        // Create the notification channel and builder\r\n        createNotificationChannel();\r\n        NotificationCompat.Builder builder = new NotificationCompat.Builder(this, CHANNEL_ID)\r\n                .setSmallIcon(R.drawable.ic_launcher_foreground)\r\n                .setContentTitle(&quot;Audio Service&quot;)\r\n                .setContentText(&quot;Listening for mic button presses&quot;)\r\n                .setContentIntent(PendingIntent.getActivity(this, 0, new Intent(this, MainActivity.class), PendingIntent.FLAG_IMMUTABLE))\r\n                .setPriority(NotificationCompat.PRIORITY_DEFAULT)\r\n                .setOngoing(true);\r\n    \r\n        // Start the service as a foreground service with the notification\r\n        startForeground(NOTIFICATION_ID, builder.build());\r\n    \r\n        Log.d(TAG, &quot;onStartCommand&quot;);\r\n    \r\n        // Return START_STICKY so the service will be automatically restarted if it is killed by the system\r\n        return START_STICKY;\r\n      }\r\n    }\r\n\r\nMyBroadcastReceiver.java\r\n\r\n    public class MyBroadcastReceiver extends BroadcastReceiver {\r\n    \r\n      private static final String TAG = &quot;MyBroadcastReceiver&quot;;\r\n    \r\n      @Override\r\n      public void onReceive(Context context, Intent intent) {\r\n        Log.d(TAG, &quot;onReceive&quot;);\r\n        if (Intent.ACTION_MEDIA_BUTTON.equals(intent.getAction())) {\r\n          KeyEvent event = intent.getParcelableExtra(Intent.EXTRA_KEY_EVENT);\r\n          if (event != null &amp;&amp; event.getAction() == KeyEvent.ACTION_DOWN\r\n                  &amp;&amp; event.getKeyCode() == KeyEvent.KEYCODE_HEADSETHOOK) {\r\n            Log.d(TAG, &quot;Mic button pressed&quot;);\r\n          }\r\n        }\r\n      }\r\n    }\r\n\r\nManifest.xml\r\n\r\n\r\n    &lt;manifest xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\r\n        xmlns:tools=&quot;http://schemas.android.com/tools&quot;&gt;\r\n    \r\n        &lt;uses-permission android:name=&quot;android.permission.MODIFY_AUDIO_SETTINGS&quot; /&gt;\r\n        &lt;uses-permission android:name=&quot;android.permission.READ_PHONE_STATE&quot; /&gt;\r\n        &lt;uses-permission android:name=&quot;android.permission.RECEIVE_BOOT_COMPLETED&quot; /&gt;\r\n        &lt;uses-permission android:name=&quot;android.permission.WAKE_LOCK&quot; /&gt;\r\n        &lt;uses-permission android:name=&quot;android.permission.FOREGROUND_SERVICE&quot; /&gt;\r\n    \r\n        &lt;application\r\n            android:allowBackup=&quot;true&quot;\r\n            android:icon=&quot;@mipmap/ic_launcher&quot;\r\n            android:label=&quot;@string/app_name&quot;\r\n            android:roundIcon=&quot;@mipmap/ic_launcher_round&quot;\r\n            android:supportsRtl=&quot;true&quot;\r\n            android:theme=&quot;@style/Theme.Media_control_test1&quot;&gt;\r\n            &lt;activity android:name=&quot;.MainActivity&quot;\r\n                android:exported=&quot;true&quot;&gt;\r\n                &lt;intent-filter&gt;\r\n                    &lt;action android:name=&quot;android.intent.action.MAIN&quot; /&gt;\r\n    \r\n                    &lt;category android:name=&quot;android.intent.category.LAUNCHER&quot; /&gt;\r\n                &lt;/intent-filter&gt;\r\n            &lt;/activity&gt;\r\n            &lt;service android:name=&quot;.AudioService&quot; /&gt;\r\n    \r\n            &lt;!-- Define your receiver element here --&gt;\r\n            &lt;receiver android:name=&quot;.MyBroadcastReceiver&quot;\r\n                android:exported=&quot;true&quot;&gt;\r\n                &lt;intent-filter&gt;\r\n                    &lt;action android:name=&quot;android.intent.action.MEDIA_BUTTON&quot; /&gt;\r\n                &lt;/intent-filter&gt;\r\n            &lt;/receiver&gt;\r\n        &lt;/application&gt;\r\n    \r\n    &lt;/manifest&gt;\r\n\r\n\r\n","title":"BroadcastReceiver onReceive not working in Service","body":"<p>Im trying to detect the wired earphone's mic button press while the app is running in background,</p>\n<ul>\n<li><p>In the below code, i have AudioService.java running as a long running service with a notification, it also has a MyBroadcastReceiver initilization and in MyBroadcastReceiver the button event is handled.</p>\n</li>\n<li><p>Im able to detect the event if the button is pressed when the app is running, but not when app is closed (in homescreen or on other app) or screen is off.</p>\n</li>\n</ul>\n<p>heres my MainActivity,</p>\n<pre><code>public class MainActivity extends AppCompatActivity {\n\n\n  private int FOREGROUND_ID = 159753;\n\n  @Override\n  protected void onCreate(Bundle savedInstanceState) {\n    super.onCreate(savedInstanceState);\n    setContentView(R.layout.activity_main);\n\n    if (ContextCompat.checkSelfPermission(this, Manifest.permission.FOREGROUND_SERVICE) != PackageManager.PERMISSION_GRANTED) {\n      ActivityCompat.requestPermissions(this,\n              new String[]{Manifest.permission.FOREGROUND_SERVICE},\n              FOREGROUND_ID);\n    }\n\n    Intent intent = new Intent(this, AudioService.class);\n    ContextCompat.startForegroundService(this, intent);\n\n  }\n\n  @Override\n  public void onRequestPermissionsResult(int requestCode, String[] permissions,\n                                         int[] grantResults)\n  {\n    super.onRequestPermissionsResult(requestCode, permissions, grantResults);\n    if (requestCode == FOREGROUND_ID) {\n      if (grantResults.length &gt; 0\n              &amp;&amp; grantResults[0] == PackageManager.PERMISSION_GRANTED)\n      {\n        Log.d(&quot;MainActivity&quot;, &quot;permission granted&quot;);\n      } else {\n\n        Log.d(&quot;MainActivity&quot;, &quot;permission denied&quot;);\n      }\n\n    }\n  }\n\n\n  @Override\n  public boolean onKeyDown(int keyCode, KeyEvent event) {\n    if (keyCode == KeyEvent.KEYCODE_HEADSETHOOK) {\n      Toast.makeText(MainActivity.this, &quot;Playing audio&quot;, Toast.LENGTH_SHORT).show();\n      Log.d(&quot;MainActivity&quot;, &quot;Pressed!&quot;);\n      return true;\n    }\n    return super.onKeyDown(keyCode, event);\n  }\n}\n</code></pre>\n<p>AudioService.java</p>\n<pre><code>public class AudioService extends Service {\n\n  private static final String TAG = &quot;AudioService&quot;;\n  private static final int NOTIFICATION_ID = 1;\n  private static final String CHANNEL_ID = &quot;AudioServiceChannel&quot;;\n\n//  private BroadcastReceiver mBroadcastReceiver;\n  private MyBroadcastReceiver mBroadcastReceiver;\n\n  @Override\n  public void onCreate() {\n    super.onCreate();\n\n    Log.d(TAG, &quot;onCreate&quot;);\n\n    // Create the broadcast receiver to listen for ACTION_MEDIA_BUTTON\n    mBroadcastReceiver = new MyBroadcastReceiver();\n\n    // Register the broadcast receiver with the intent filter for ACTION_MEDIA_BUTTON\n    IntentFilter filter = new IntentFilter(Intent.ACTION_MEDIA_BUTTON);\n    registerReceiver(mBroadcastReceiver, filter);\n  }\n\n  @Override\n  public int onStartCommand(Intent intent, int flags, int startId) {\n    // Create the notification channel and builder\n    createNotificationChannel();\n    NotificationCompat.Builder builder = new NotificationCompat.Builder(this, CHANNEL_ID)\n            .setSmallIcon(R.drawable.ic_launcher_foreground)\n            .setContentTitle(&quot;Audio Service&quot;)\n            .setContentText(&quot;Listening for mic button presses&quot;)\n            .setContentIntent(PendingIntent.getActivity(this, 0, new Intent(this, MainActivity.class), PendingIntent.FLAG_IMMUTABLE))\n            .setPriority(NotificationCompat.PRIORITY_DEFAULT)\n            .setOngoing(true);\n\n    // Start the service as a foreground service with the notification\n    startForeground(NOTIFICATION_ID, builder.build());\n\n    Log.d(TAG, &quot;onStartCommand&quot;);\n\n    // Return START_STICKY so the service will be automatically restarted if it is killed by the system\n    return START_STICKY;\n  }\n}\n</code></pre>\n<p>MyBroadcastReceiver.java</p>\n<pre><code>public class MyBroadcastReceiver extends BroadcastReceiver {\n\n  private static final String TAG = &quot;MyBroadcastReceiver&quot;;\n\n  @Override\n  public void onReceive(Context context, Intent intent) {\n    Log.d(TAG, &quot;onReceive&quot;);\n    if (Intent.ACTION_MEDIA_BUTTON.equals(intent.getAction())) {\n      KeyEvent event = intent.getParcelableExtra(Intent.EXTRA_KEY_EVENT);\n      if (event != null &amp;&amp; event.getAction() == KeyEvent.ACTION_DOWN\n              &amp;&amp; event.getKeyCode() == KeyEvent.KEYCODE_HEADSETHOOK) {\n        Log.d(TAG, &quot;Mic button pressed&quot;);\n      }\n    }\n  }\n}\n</code></pre>\n<p>Manifest.xml</p>\n<pre><code>&lt;manifest xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\n    xmlns:tools=&quot;http://schemas.android.com/tools&quot;&gt;\n\n    &lt;uses-permission android:name=&quot;android.permission.MODIFY_AUDIO_SETTINGS&quot; /&gt;\n    &lt;uses-permission android:name=&quot;android.permission.READ_PHONE_STATE&quot; /&gt;\n    &lt;uses-permission android:name=&quot;android.permission.RECEIVE_BOOT_COMPLETED&quot; /&gt;\n    &lt;uses-permission android:name=&quot;android.permission.WAKE_LOCK&quot; /&gt;\n    &lt;uses-permission android:name=&quot;android.permission.FOREGROUND_SERVICE&quot; /&gt;\n\n    &lt;application\n        android:allowBackup=&quot;true&quot;\n        android:icon=&quot;@mipmap/ic_launcher&quot;\n        android:label=&quot;@string/app_name&quot;\n        android:roundIcon=&quot;@mipmap/ic_launcher_round&quot;\n        android:supportsRtl=&quot;true&quot;\n        android:theme=&quot;@style/Theme.Media_control_test1&quot;&gt;\n        &lt;activity android:name=&quot;.MainActivity&quot;\n            android:exported=&quot;true&quot;&gt;\n            &lt;intent-filter&gt;\n                &lt;action android:name=&quot;android.intent.action.MAIN&quot; /&gt;\n\n                &lt;category android:name=&quot;android.intent.category.LAUNCHER&quot; /&gt;\n            &lt;/intent-filter&gt;\n        &lt;/activity&gt;\n        &lt;service android:name=&quot;.AudioService&quot; /&gt;\n\n        &lt;!-- Define your receiver element here --&gt;\n        &lt;receiver android:name=&quot;.MyBroadcastReceiver&quot;\n            android:exported=&quot;true&quot;&gt;\n            &lt;intent-filter&gt;\n                &lt;action android:name=&quot;android.intent.action.MEDIA_BUTTON&quot; /&gt;\n            &lt;/intent-filter&gt;\n        &lt;/receiver&gt;\n    &lt;/application&gt;\n\n&lt;/manifest&gt;\n</code></pre>\n"},{"tags":["java","jmeter"],"answers":[{"tags":[],"owner":{"account_id":3460456,"reputation":162728,"user_id":2897748,"display_name":"Dmitri T"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1682867129,"creation_date":1682867129,"answer_id":76141953,"question_id":76136472,"body_markdown":"Your regular expression seems to be correct:\r\n\r\n[![enter image description here][1]][1]\r\n\r\nhowever the JMeter Variable isn&#39;t getting substituted with the extracted value which means that the Regular Expression Extractor fails to find the match. Double check which JMeter Variables are defined and what values do they have using [Debug Sampler and View Results Tree listener combination][2], it might be the case you have a non-printable character like whitespace somewhere in the JMeter Variable name (like you do it after `edit`)\r\n\r\nIf this is not the case - make sure to choose correct &quot;Field to check&quot; and [scope][3] for the Regular Expression Extractor. \r\n\r\n \r\n\r\n\r\n  [1]: https://i.stack.imgur.com/kqaCj.png\r\n  [2]: https://www.blazemeter.com/blog/debug-jmeter\r\n  [3]: https://jmeter.apache.org/usermanual/test_plan.html#scoping_rules","title":"How to get the 2nd id in a URL in JMeter?","body":"<p>Your regular expression seems to be correct:</p>\n<p><a href=\"https://i.stack.imgur.com/kqaCj.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/kqaCj.png\" alt=\"enter image description here\" /></a></p>\n<p>however the JMeter Variable isn't getting substituted with the extracted value which means that the Regular Expression Extractor fails to find the match. Double check which JMeter Variables are defined and what values do they have using <a href=\"https://www.blazemeter.com/blog/debug-jmeter\" rel=\"nofollow noreferrer\">Debug Sampler and View Results Tree listener combination</a>, it might be the case you have a non-printable character like whitespace somewhere in the JMeter Variable name (like you do it after <code>edit</code>)</p>\n<p>If this is not the case - make sure to choose correct &quot;Field to check&quot; and <a href=\"https://jmeter.apache.org/usermanual/test_plan.html#scoping_rules\" rel=\"nofollow noreferrer\">scope</a> for the Regular Expression Extractor.</p>\n"}],"owner":{"account_id":10028461,"reputation":2371,"user_id":8720421,"display_name":"one-hand-octopus"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":28,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1682867129,"creation_date":1682774761,"question_id":76136472,"body_markdown":"I have this url:\r\nhttp://localhost:8080/owners/2/pets/2/edit\r\n\r\nIt follows this pattern: \r\nhttp://localhost:8080/owners/${ownerId}/pets/${petId}/edit\r\n\r\nI&#39;d like to extract the 2nd id `petId` in JMeter. I&#39;ve already extracted the 1st id `ownerId` by doing this:\r\n[![enter image description here][1]][1]\r\n\r\nI tried this:\r\n\r\n[![enter image description here][2]][2]\r\n\r\nthen \r\n\r\n[![enter image description here][3]][3]\r\n\r\nbut it didn&#39;t work, got this error:\r\n\r\njava.net.URISyntaxException: Illegal character in path at index 38: http://localhost:8080/owners/25/pets/${petId}/edit%20 at java.base/java.net.URI$Parser.fail(URI.java:2974)\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/MW2kM.png\r\n  [2]: https://i.stack.imgur.com/dVkeL.png\r\n  [3]: https://i.stack.imgur.com/oXN6m.png","title":"How to get the 2nd id in a URL in JMeter?","body":"<p>I have this url:\nhttp://localhost:8080/owners/2/pets/2/edit</p>\n<p>It follows this pattern:\nhttp://localhost:8080/owners/${ownerId}/pets/${petId}/edit</p>\n<p>I'd like to extract the 2nd id <code>petId</code> in JMeter. I've already extracted the 1st id <code>ownerId</code> by doing this:\n<a href=\"https://i.stack.imgur.com/MW2kM.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/MW2kM.png\" alt=\"enter image description here\" /></a></p>\n<p>I tried this:</p>\n<p><a href=\"https://i.stack.imgur.com/dVkeL.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/dVkeL.png\" alt=\"enter image description here\" /></a></p>\n<p>then</p>\n<p><a href=\"https://i.stack.imgur.com/oXN6m.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/oXN6m.png\" alt=\"enter image description here\" /></a></p>\n<p>but it didn't work, got this error:</p>\n<p>java.net.URISyntaxException: Illegal character in path at index 38: http://localhost:8080/owners/25/pets/${petId}/edit%20 at java.base/java.net.URI$Parser.fail(URI.java:2974)</p>\n"},{"tags":["java","multithreading"],"comments":[{"owner":{"account_id":11730609,"reputation":36976,"user_id":8586227,"display_name":"Davis Herring"},"score":0,"creation_date":1682865967,"post_id":76141847,"comment_id":134279069,"body_markdown":"You have twice as many `Thread` variables here as you need.  Simplify, and you‚Äôll probably see the problem yourself.","body":"You have twice as many <code>Thread</code> variables here as you need.  Simplify, and you‚Äôll probably see the problem yourself."},{"owner":{"account_id":422870,"reputation":25925,"user_id":801894,"display_name":"Solomon Slow"},"score":0,"creation_date":1682866007,"post_id":76141847,"comment_id":134279075,"body_markdown":"What do you hope to achieve by `join`ing `Thread.currentThread()`?","body":"What do you hope to achieve by <code>join</code>ing <code>Thread.currentThread()</code>?"}],"answers":[{"tags":[],"owner":{"account_id":28043835,"reputation":1,"user_id":21420965,"display_name":"Andrew Alpaugh"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1682866180,"creation_date":1682866180,"answer_id":76141877,"question_id":76141847,"body_markdown":"You&#39;re right this code will go into an infinite loop I see several reasons\r\n\r\n-The main thread creates and starts a Thread1 object, which is a user thread.\r\n- The Thread1 object creates and starts a Thread2 object, which is a daemon thread.\r\n- The Thread2 object creates another Thread1 object, which is also a daemon thread because it inherits the daemon status from its parent.\r\n- The new Thread1 object creates another Thread2 object, and so on. This creates a chain of daemon threads that keep creating new threads.\r\n- The main thread calls join() on itself, which means it waits for itself to finish. This is a deadlock situation, because the main thread can never finish while waiting for itself.\r\n- The JVM does not exit because there is still a user thread (the main thread) alive. The daemon threads do not prevent the JVM from exiting, but they also do not die until the JVM exits.\r\n\r\nIf you want to fix this you could try removing the join() call from the Thread1 class. This way, the main thread will not wait for itself and will finish its execution. The JVM will then exit and terminate all the daemon threads. Another possible solution is to make the Thread1 class a daemon thread as well, so that there are no user threads left when the main method ends. The JVM will then exit and terminate all the daemon threads.","title":"join() in Thread in Java?","body":"<p>You're right this code will go into an infinite loop I see several reasons</p>\n<p>-The main thread creates and starts a Thread1 object, which is a user thread.</p>\n<ul>\n<li>The Thread1 object creates and starts a Thread2 object, which is a daemon thread.</li>\n<li>The Thread2 object creates another Thread1 object, which is also a daemon thread because it inherits the daemon status from its parent.</li>\n<li>The new Thread1 object creates another Thread2 object, and so on. This creates a chain of daemon threads that keep creating new threads.</li>\n<li>The main thread calls join() on itself, which means it waits for itself to finish. This is a deadlock situation, because the main thread can never finish while waiting for itself.</li>\n<li>The JVM does not exit because there is still a user thread (the main thread) alive. The daemon threads do not prevent the JVM from exiting, but they also do not die until the JVM exits.</li>\n</ul>\n<p>If you want to fix this you could try removing the join() call from the Thread1 class. This way, the main thread will not wait for itself and will finish its execution. The JVM will then exit and terminate all the daemon threads. Another possible solution is to make the Thread1 class a daemon thread as well, so that there are no user threads left when the main method ends. The JVM will then exit and terminate all the daemon threads.</p>\n"},{"tags":[],"owner":{"account_id":422870,"reputation":25925,"user_id":801894,"display_name":"Solomon Slow"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1682866627,"creation_date":1682866219,"answer_id":76141880,"question_id":76141847,"body_markdown":"&gt; I am not able to understand how join is working.\r\n\r\nIt&#39;s really simple. `t.join()` does _nothing._ It keeps doing nothing until the thread `t` is finished, and then it returns. That&#39;s all there is to it.\r\n\r\nYou could also think of `t.join()` as being like `Thread.sleep(n)` except that, instead of sleeping until `n` milliseconds have elapsed, it sleeps until thread `t` is finished.\r\n\r\n----------------\r\n\r\nP.S., You wrote this:\r\n\r\n``` lang-java\r\nThread t2 = Thread.currentThread();\r\ntry{\r\n    t2.join();\r\n}\r\ncatch(InterruptedException e){\r\n    System.out.println(e);\r\n}\r\n```\r\n\r\nThat&#39;s going to sleep forever. `Thread.currentThread()` has a misleading name. It should be called something like `Thread.caller()` or `Thread.self()` or `Thread.me()`. It returns the `Thread` instance of the thread that called it.\r\n\r\nWhen you wrote `t2.join()` you are saying, wait until `t2` is finished, but `t2` is the thread that&#39;s calling `t2.join()`. The `join()` call won&#39;t return until the thread is finished, but the thread cannot finish until the `join()` call returns. Some people call that a _self deadlock._","title":"join() in Thread in Java?","body":"<blockquote>\n<p>I am not able to understand how join is working.</p>\n</blockquote>\n<p>It's really simple. <code>t.join()</code> does <em>nothing.</em> It keeps doing nothing until the thread <code>t</code> is finished, and then it returns. That's all there is to it.</p>\n<p>You could also think of <code>t.join()</code> as being like <code>Thread.sleep(n)</code> except that, instead of sleeping until <code>n</code> milliseconds have elapsed, it sleeps until thread <code>t</code> is finished.</p>\n<hr />\n<p>P.S., You wrote this:</p>\n<pre class=\"lang-java prettyprint-override\"><code>Thread t2 = Thread.currentThread();\ntry{\n    t2.join();\n}\ncatch(InterruptedException e){\n    System.out.println(e);\n}\n</code></pre>\n<p>That's going to sleep forever. <code>Thread.currentThread()</code> has a misleading name. It should be called something like <code>Thread.caller()</code> or <code>Thread.self()</code> or <code>Thread.me()</code>. It returns the <code>Thread</code> instance of the thread that called it.</p>\n<p>When you wrote <code>t2.join()</code> you are saying, wait until <code>t2</code> is finished, but <code>t2</code> is the thread that's calling <code>t2.join()</code>. The <code>join()</code> call won't return until the thread is finished, but the thread cannot finish until the <code>join()</code> call returns. Some people call that a <em>self deadlock.</em></p>\n"}],"owner":{"account_id":28276387,"reputation":17,"user_id":21618811,"display_name":"xyz"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":68,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1682866627,"creation_date":1682865771,"question_id":76141847,"body_markdown":"Why this code is printing:\r\nInside Thread1\r\nInside Thread2\r\nAnd goes into something like infinite loop because it is not terminating.\r\n\r\n```\r\nclass Thread2 extends Thread{\r\n    public void run(){\r\n        try {\r\n            Thread1 t = new Thread1();\r\n            Thread.sleep(2000);\r\n            System.out.println(&quot;Inside Thread2&quot;);\r\n        }\r\n        catch(InterruptedException e){\r\n            System.out.println(&quot;Exception occurred inside Thread2&quot;);\r\n        }\r\n    }\r\n}\r\nclass Thread1 extends Thread{\r\n    public void run(){\r\n        Thread2 t = new Thread2();\r\n        t.setDaemon(true);\r\n        t.start();\r\n        try {\r\n            Thread.sleep(1000);\r\n            System.out.println(&quot;Inside Thread1&quot;);\r\n        }\r\n        catch(InterruptedException e){\r\n            System.out.println(&quot;Exception occurred inside Thread1&quot;);\r\n        }\r\n        Thread t2 = Thread.currentThread();\r\n        try{\r\n            t2.join();\r\n        }\r\n        catch(InterruptedException e){\r\n            System.out.println(e);\r\n        }\r\n    }\r\n}\r\npublic class DaemonThread {\r\n    public static void main(String[] args) {\r\n        Thread1 t = new Thread1();\r\n        t.start();\r\n    }\r\n}\r\n```\r\n\r\n\r\n\r\nI am not able to understan how join is working ","title":"join() in Thread in Java?","body":"<p>Why this code is printing:\nInside Thread1\nInside Thread2\nAnd goes into something like infinite loop because it is not terminating.</p>\n<pre><code>class Thread2 extends Thread{\n    public void run(){\n        try {\n            Thread1 t = new Thread1();\n            Thread.sleep(2000);\n            System.out.println(&quot;Inside Thread2&quot;);\n        }\n        catch(InterruptedException e){\n            System.out.println(&quot;Exception occurred inside Thread2&quot;);\n        }\n    }\n}\nclass Thread1 extends Thread{\n    public void run(){\n        Thread2 t = new Thread2();\n        t.setDaemon(true);\n        t.start();\n        try {\n            Thread.sleep(1000);\n            System.out.println(&quot;Inside Thread1&quot;);\n        }\n        catch(InterruptedException e){\n            System.out.println(&quot;Exception occurred inside Thread1&quot;);\n        }\n        Thread t2 = Thread.currentThread();\n        try{\n            t2.join();\n        }\n        catch(InterruptedException e){\n            System.out.println(e);\n        }\n    }\n}\npublic class DaemonThread {\n    public static void main(String[] args) {\n        Thread1 t = new Thread1();\n        t.start();\n    }\n}\n</code></pre>\n<p>I am not able to understan how join is working</p>\n"},{"tags":["java","recursion","binary-tree"],"comments":[{"owner":{"account_id":6136522,"reputation":76953,"user_id":4785185,"display_name":"Prune"},"score":1,"creation_date":1493933236,"post_id":43792841,"comment_id":74626838,"body_markdown":"Can you please clarify that restriction on binary operators?  Are you really supposed to do this without arithmetic, boolean, or construction operators?  It seems weird to attack this without even `&lt;`.","body":"Can you please clarify that restriction on binary operators?  Are you really supposed to do this without arithmetic, boolean, or construction operators?  It seems weird to attack this without even <code>&lt;</code>."},{"owner":{"account_id":10704479,"reputation":1,"user_id":7965092,"display_name":"Harshi"},"score":0,"creation_date":1493933722,"post_id":43792841,"comment_id":74626993,"body_markdown":"I&#39;m not sure, it gives me this error: bad operand types for binary operator &#39;&lt;&#39;","body":"I&#39;m not sure, it gives me this error: bad operand types for binary operator &#39;&lt;&#39;"},{"owner":{"account_id":48192,"reputation":10791,"user_id":143069,"display_name":"ILMTitan"},"score":1,"creation_date":1493935057,"post_id":43792841,"comment_id":74627504,"body_markdown":"What gives you that error? The compiler? That error is not saying you may not use binary operator &#39;&lt;&#39;. It is saying you are using &#39;&lt;&#39; incorrectly, giving it bad parameters. That is probably because root.right and root.left are of type BinNode, rather than the expected type int.","body":"What gives you that error? The compiler? That error is not saying you may not use binary operator &#39;&lt;&#39;. It is saying you are using &#39;&lt;&#39; incorrectly, giving it bad parameters. That is probably because root.right and root.left are of type BinNode, rather than the expected type int."},{"owner":{"account_id":10704479,"reputation":1,"user_id":7965092,"display_name":"Harshi"},"score":0,"creation_date":1493936104,"post_id":43792841,"comment_id":74627936,"body_markdown":"Yeah it&#39;s the compiler on the coding practice website I&#39;m using. I guess my mistake is that I need to access the node&#39;s VALUE, but node.getElement and node.value are not working.","body":"Yeah it&#39;s the compiler on the coding practice website I&#39;m using. I guess my mistake is that I need to access the node&#39;s VALUE, but node.getElement and node.value are not working."}],"answers":[{"tags":[],"owner":{"account_id":8291016,"reputation":2002,"user_id":6232665,"display_name":"zenwraight"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1493934342,"creation_date":1493934342,"answer_id":43793284,"question_id":43792841,"body_markdown":"Ya so you cannot just compare a address with a value, I think this is what you need\r\n\r\n    public int BSTsmallcount(BinNode root, int key)\r\n    {\r\n        if(root == NULL) return 0;\r\n        if (root.left.value &lt; key)\r\n            return 1 + BSTsmallcount(root.left, key);\r\n        else\r\n            return BSTsmallcount(root.left, key);\r\n        if (root.right.value &lt; key)\r\n            return 1 + BSTsmallcount(root.right, key);\r\n        else\r\n            return BSTsmallcount(root.right, key);\r\n    }\r\n\r\nThere must be an attribute in class BinNode that stores the value of that node.","title":"Binary Search Tree Small Count Exercise","body":"<p>Ya so you cannot just compare a address with a value, I think this is what you need</p>\n\n<pre><code>public int BSTsmallcount(BinNode root, int key)\n{\n    if(root == NULL) return 0;\n    if (root.left.value &lt; key)\n        return 1 + BSTsmallcount(root.left, key);\n    else\n        return BSTsmallcount(root.left, key);\n    if (root.right.value &lt; key)\n        return 1 + BSTsmallcount(root.right, key);\n    else\n        return BSTsmallcount(root.right, key);\n}\n</code></pre>\n\n<p>There must be an attribute in class BinNode that stores the value of that node.</p>\n"},{"tags":[],"owner":{"account_id":13388910,"reputation":11,"user_id":9661838,"display_name":"hamstercorgi"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1552869748,"creation_date":1552869748,"answer_id":55213392,"question_id":43792841,"body_markdown":"This should work:\r\n\r\n    public int BSTsmallcount(BinNode root, int key){\r\n    if(root == null) return 0;\r\n    if (root.value() &lt; key)\r\n        return 1 + BSTsmallcount(root.left(), key);\r\n    else\r\n        return BSTsmallcount(root.left(), key);\r\n    }\r\n\r\nCorrections:\r\n1. it should be null instead of NULL\r\n2. A proper recursive method would only check its **own** base case. Therefore, there is no need to check for the child&#39;s value.","title":"Binary Search Tree Small Count Exercise","body":"<p>This should work:</p>\n\n<pre><code>public int BSTsmallcount(BinNode root, int key){\nif(root == null) return 0;\nif (root.value() &lt; key)\n    return 1 + BSTsmallcount(root.left(), key);\nelse\n    return BSTsmallcount(root.left(), key);\n}\n</code></pre>\n\n<p>Corrections:\n1. it should be null instead of NULL\n2. A proper recursive method would only check its <strong>own</strong> base case. Therefore, there is no need to check for the child's value.</p>\n"},{"tags":[],"owner":{"account_id":28464273,"reputation":1,"user_id":21780579,"display_name":"Balu Sai Manohar"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1682866519,"creation_date":1682866186,"answer_id":76141879,"question_id":43792841,"body_markdown":" This should work\r\n\r\n    public int BSTsmallcount(BinNode root, int key)\r\n    {\r\n        if(root == null) return 0;\r\n    \r\n        if (root.value()&lt;key){\r\n            return 1+ BSTsmallcount(root.left(),key)+BSTsmallcount(root.right(),key);\r\n    \t\r\n        }\r\n    \r\n        else{\r\n    \t    return BSTsmallcount(root.left(),key);\r\n        }\r\n\r\n    }","title":"Binary Search Tree Small Count Exercise","body":"<p>This should work</p>\n<pre><code>public int BSTsmallcount(BinNode root, int key)\n{\n    if(root == null) return 0;\n\n    if (root.value()&lt;key){\n        return 1+ BSTsmallcount(root.left(),key)+BSTsmallcount(root.right(),key);\n    \n    }\n\n    else{\n        return BSTsmallcount(root.left(),key);\n    }\n\n}\n</code></pre>\n"}],"owner":{"account_id":10704479,"reputation":1,"user_id":7965092,"display_name":"Harshi"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":3125,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":3,"score":0,"last_activity_date":1682866519,"creation_date":1493932288,"question_id":43792841,"body_markdown":"I&#39;m trying to write a method that does the following:\r\nGiven a BST, write a recursive function BSTsmallcount that, given a key value, returns the number of nodes having values less than the key. Your function should visit as few nodes in the BST as possible.\r\n\r\nThis is what I have:\r\n\r\n    public int BSTsmallcount(BinNode root, int key)\r\n    {\r\n        int count = 0;\r\n        if (root.right &lt; key)\r\n        {\r\n            count += BSTsmallcount(root.left, key);\r\n        }\r\n        if (root.left &lt; key)\r\n        {\r\n            count += BSTsmallcount(root.right, key);\r\n        }\r\n        return count;\r\n    \r\n    }\r\n\r\nHowever this is incorrect because you can&#39;t use binary operators. How would I complete this problem?","title":"Binary Search Tree Small Count Exercise","body":"<p>I'm trying to write a method that does the following:\nGiven a BST, write a recursive function BSTsmallcount that, given a key value, returns the number of nodes having values less than the key. Your function should visit as few nodes in the BST as possible.</p>\n\n<p>This is what I have:</p>\n\n<pre><code>public int BSTsmallcount(BinNode root, int key)\n{\n    int count = 0;\n    if (root.right &lt; key)\n    {\n        count += BSTsmallcount(root.left, key);\n    }\n    if (root.left &lt; key)\n    {\n        count += BSTsmallcount(root.right, key);\n    }\n    return count;\n\n}\n</code></pre>\n\n<p>However this is incorrect because you can't use binary operators. How would I complete this problem?</p>\n"},{"tags":["java","elasticsearch","trace","agent","otel"],"comments":[{"owner":{"account_id":11288679,"reputation":923,"user_id":8278630,"display_name":"Farkhod Abdukodirov"},"score":1,"creation_date":1682815293,"post_id":76136098,"comment_id":134274541,"body_markdown":"Both options collect high-quality data. However, `OpenTelemetry` Java agent might be good choice if you need to collect data from big sources or if you want data in specific format","body":"Both options collect high-quality data. However, <code>OpenTelemetry</code> Java agent might be good choice if you need to collect data from big sources or if you want data in specific format"}],"answers":[{"tags":[],"owner":{"account_id":278525,"reputation":10554,"user_id":573153,"accept_rate":94,"display_name":"xeraa"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1682865716,"creation_date":1682865716,"answer_id":76141840,"question_id":76136098,"body_markdown":"There are a couple of features not available in OpenTelemetry (at least for now) like [profiling](https://www.elastic.co/guide/en/apm/agent/java/1.x/config-profiling.html) that you have in the APM agent. There are also a few things with OTel that aren&#39;t yet supported by the APM server like JSON encoded messages for OTLP/HTTP or some calculations in the UI that depend on specific agent features, see https://www.elastic.co/guide/en/apm/guide/current/open-telemetry-known-limitations.html.\r\n\r\nUnless you need those features, I would go with the OTel agent which is becoming pretty much the standard for tracing.\r\nThe supported features will really depend on the libraries and frameworks you want to use; that&#39;s hard to answer in general.","title":"Elastic APM Java Agent or Opentelemetry java agent?: Goal - Get metric-,trace- and logdata","body":"<p>There are a couple of features not available in OpenTelemetry (at least for now) like <a href=\"https://www.elastic.co/guide/en/apm/agent/java/1.x/config-profiling.html\" rel=\"nofollow noreferrer\">profiling</a> that you have in the APM agent. There are also a few things with OTel that aren't yet supported by the APM server like JSON encoded messages for OTLP/HTTP or some calculations in the UI that depend on specific agent features, see <a href=\"https://www.elastic.co/guide/en/apm/guide/current/open-telemetry-known-limitations.html\" rel=\"nofollow noreferrer\">https://www.elastic.co/guide/en/apm/guide/current/open-telemetry-known-limitations.html</a>.</p>\n<p>Unless you need those features, I would go with the OTel agent which is becoming pretty much the standard for tracing.\nThe supported features will really depend on the libraries and frameworks you want to use; that's hard to answer in general.</p>\n"}],"owner":{"account_id":12501324,"reputation":177,"user_id":9099709,"accept_rate":29,"display_name":"BVB1392"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":423,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":76141840,"answer_count":1,"score":1,"last_activity_date":1682865716,"creation_date":1682769404,"question_id":76136098,"body_markdown":"does anyone have experience with the data ingestion via opentelemetry java agent and the elastic apm jva agent?\r\n\r\nAre there differences in the dataquality of the output? Which is the best agent?\r\n\r\nBest regards","title":"Elastic APM Java Agent or Opentelemetry java agent?: Goal - Get metric-,trace- and logdata","body":"<p>does anyone have experience with the data ingestion via opentelemetry java agent and the elastic apm jva agent?</p>\n<p>Are there differences in the dataquality of the output? Which is the best agent?</p>\n<p>Best regards</p>\n"},{"tags":["java","android","barcode"],"comments":[{"owner":{"account_id":16796825,"reputation":1274,"user_id":12143126,"display_name":"Mikhail Guliaev"},"score":2,"creation_date":1682690840,"post_id":76130228,"comment_id":134259941,"body_markdown":"Which SDK do you use for scanning?","body":"Which SDK do you use for scanning?"},{"owner":{"account_id":10587710,"reputation":2772,"user_id":7799462,"display_name":"Halil Ozel"},"score":0,"creation_date":1682850186,"post_id":76130228,"comment_id":134277166,"body_markdown":"You should add more details.","body":"You should add more details."},{"owner":{"account_id":288238,"reputation":14443,"user_id":588532,"accept_rate":88,"display_name":"Uriel Frankel"},"score":1,"creation_date":1682850642,"post_id":76130228,"comment_id":134277201,"body_markdown":"I think the only way it is possible if the first app that scans make a broadcast signal using sendBroadcast  mechanism.","body":"I think the only way it is possible if the first app that scans make a broadcast signal using sendBroadcast  mechanism."},{"owner":{"account_id":329709,"reputation":3234,"user_id":653379,"accept_rate":90,"display_name":"xralf"},"score":0,"creation_date":1682863685,"post_id":76130228,"comment_id":134278762,"body_markdown":"@HalilOzel I will add more details when I have the device with android for scanning. So far I experiment only on my smartphone with Android 12.","body":"@HalilOzel I will add more details when I have the device with android for scanning. So far I experiment only on my smartphone with Android 12."}],"answers":[{"tags":[],"owner":{"account_id":39846,"reputation":991133,"user_id":115145,"accept_rate":84,"display_name":"CommonsWare"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1682865115,"creation_date":1682865115,"answer_id":76141793,"question_id":76130228,"body_markdown":"&gt; Is it even possible to have a foreground service with a listener which listens to events when other app (warehouse app) scans a barcode?\r\n\r\nGenerally speaking, no. The other app is unlikely to be making that information available to arbitrary apps like yours, for privacy and security reasons.\r\n\r\nIf you know the authors of this &quot;warehouse app&quot; or can otherwise communicate with them, you might ask them if they have any sort of SDK or other way of having your app integrate safely and securely with theirs.","title":"Listener for barcode scanning event","body":"<blockquote>\n<p>Is it even possible to have a foreground service with a listener which listens to events when other app (warehouse app) scans a barcode?</p>\n</blockquote>\n<p>Generally speaking, no. The other app is unlikely to be making that information available to arbitrary apps like yours, for privacy and security reasons.</p>\n<p>If you know the authors of this &quot;warehouse app&quot; or can otherwise communicate with them, you might ask them if they have any sort of SDK or other way of having your app integrate safely and securely with theirs.</p>\n"}],"owner":{"account_id":329709,"reputation":3234,"user_id":653379,"accept_rate":90,"display_name":"xralf"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":80,"favorite_count":0,"down_vote_count":4,"up_vote_count":1,"closed_date":1683234272,"accepted_answer_id":76141793,"answer_count":1,"score":-3,"last_activity_date":1682865115,"creation_date":1682689599,"question_id":76130228,"body_markdown":"How can I implement a listener in Java for my Android foreground service that can detect barcode scanning event and save a resulting barcode to a text file, or display a message when barcode scanned with the barcode.\r\n\r\nI already created a foreground service.\r\nIs it even possible to have a foreground service with a listener which listens to events when other app (warehouse app) scans a barcode?\r\nOur company only needs to additionally to save a barcode with time of scanning to a database.","title":"Listener for barcode scanning event","body":"<p>How can I implement a listener in Java for my Android foreground service that can detect barcode scanning event and save a resulting barcode to a text file, or display a message when barcode scanned with the barcode.</p>\n<p>I already created a foreground service.\nIs it even possible to have a foreground service with a listener which listens to events when other app (warehouse app) scans a barcode?\nOur company only needs to additionally to save a barcode with time of scanning to a database.</p>\n"},{"tags":["java","file-io"],"answers":[{"tags":[],"owner":{"account_id":203953,"reputation":5113,"user_id":451894,"accept_rate":53,"display_name":"upog"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1383133172,"creation_date":1383133172,"answer_id":19681199,"question_id":19681163,"body_markdown":"try\r\n\r\n    new FileWriter(file, true)\r\n\r\nthis will open the file in append mode\r\n","title":"Update an existing file in java","body":"<p>try</p>\n\n<pre><code>new FileWriter(file, true)\n</code></pre>\n\n<p>this will open the file in append mode</p>\n"},{"tags":[],"owner":{"account_id":1861835,"reputation":4286,"user_id":1686291,"accept_rate":73,"display_name":"Not a bug"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1389610294,"creation_date":1383134008,"answer_id":19681519,"question_id":19681163,"body_markdown":"Try this\r\n    \r\n    Writer output = null;\r\n    File file = new File(&quot;C:/HEADER.txt&quot;);\r\n    output = new BufferedWriter(new FileWriter(file, true));\r\n    output.write(&quot;how are you&quot;);\r\n    output.close();\r\n\r\n`FileWriter(File file, boolean append)` constructs a `FileWriter` object given a `File` object. If the second argument is `true`, then bytes will be written to the end of the file rather than the beginning.\r\n\r\nreference : [Java Doc][1]\r\n\r\n\r\n  [1]: http://docs.oracle.com/javase/7/docs/api/java/io/FileWriter.html#FileWriter%28java.io.File,%20boolean%29","title":"Update an existing file in java","body":"<p>Try this</p>\n\n<pre><code>Writer output = null;\nFile file = new File(\"C:/HEADER.txt\");\noutput = new BufferedWriter(new FileWriter(file, true));\noutput.write(\"how are you\");\noutput.close();\n</code></pre>\n\n<p><code>FileWriter(File file, boolean append)</code> constructs a <code>FileWriter</code> object given a <code>File</code> object. If the second argument is <code>true</code>, then bytes will be written to the end of the file rather than the beginning.</p>\n\n<p>reference : <a href=\"http://docs.oracle.com/javase/7/docs/api/java/io/FileWriter.html#FileWriter%28java.io.File,%20boolean%29\" rel=\"nofollow\">Java Doc</a></p>\n"},{"tags":[],"owner":{"account_id":18360026,"reputation":3,"user_id":13372334,"display_name":"Marvelographer"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1682864121,"creation_date":1682864121,"answer_id":76141707,"question_id":19681163,"body_markdown":"You can also write like\r\n\r\n    File f = new File (&quot;C:/HEADER.txt&quot;);\r\n    FileWriter fw = new FileWriter(f, true); \r\n    //mentioning true will open the file in append mode\r\n    fw.write(&quot;How are You&quot;);\r\n    fw.close();\r\n\r\n","title":"Update an existing file in java","body":"<p>You can also write like</p>\n<pre><code>File f = new File (&quot;C:/HEADER.txt&quot;);\nFileWriter fw = new FileWriter(f, true); \n//mentioning true will open the file in append mode\nfw.write(&quot;How are You&quot;);\nfw.close();\n</code></pre>\n"}],"owner":{"account_id":3313435,"reputation":221,"user_id":2786306,"accept_rate":0,"display_name":"user2786306"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":10288,"favorite_count":0,"down_vote_count":0,"up_vote_count":6,"answer_count":3,"score":6,"last_activity_date":1682864121,"creation_date":1383133070,"question_id":19681163,"body_markdown":"I write this code to write data in a text file.\r\n\r\n \r\n\r\n     Writer output = null;\r\n       File file = new File(&quot;C:/HEADER.txt&quot;);\r\n       output = new BufferedWriter(new FileWriter(file));\r\n        output.write(&quot;hello&quot;);\r\n        output.close();\r\n\r\nI write this code to write over the file but what happened is that the data got deleted, and the only the new data appeared.\r\n\r\n   \r\n\r\n    Writer output = null;\r\n       File file = new File(&quot;C:/HEADER.txt&quot;);\r\n       output = new BufferedWriter(new FileWriter(file));\r\n        output.write(&quot;how are you&quot;);\r\n        output.close();\r\n\r\n","title":"Update an existing file in java","body":"<p>I write this code to write data in a text file.</p>\n\n<pre><code> Writer output = null;\n   File file = new File(\"C:/HEADER.txt\");\n   output = new BufferedWriter(new FileWriter(file));\n    output.write(\"hello\");\n    output.close();\n</code></pre>\n\n<p>I write this code to write over the file but what happened is that the data got deleted, and the only the new data appeared.</p>\n\n<pre><code>Writer output = null;\n   File file = new File(\"C:/HEADER.txt\");\n   output = new BufferedWriter(new FileWriter(file));\n    output.write(\"how are you\");\n    output.close();\n</code></pre>\n"},{"tags":["java","maven","junit5","maven-surefire-plugin"],"comments":[{"owner":{"account_id":112317,"reputation":93939,"user_id":296328,"accept_rate":60,"display_name":"khmarbaise"},"score":0,"creation_date":1563826121,"post_id":57153017,"comment_id":100821156,"body_markdown":"That sounds like you have somewhere in your dependencies JUnit 3...without a full pom file and and example of your test code I can&#39;t say for sure ...","body":"That sounds like you have somewhere in your dependencies JUnit 3...without a full pom file and and example of your test code I can&#39;t say for sure ..."},{"owner":{"account_id":15233105,"reputation":731,"user_id":10991651,"display_name":"Julien Berthoud"},"score":0,"creation_date":1563864462,"post_id":57153017,"comment_id":100830900,"body_markdown":"I can&#39;t find JUnit 3 as dependency. The only reference to Junit 3 is in the surfire plugin: surefire-junit3-2.22.0.jar . Is something wrong with the plugin?","body":"I can&#39;t find JUnit 3 as dependency. The only reference to Junit 3 is in the surfire plugin: surefire-junit3-2.22.0.jar . Is something wrong with the plugin?"},{"owner":{"account_id":112317,"reputation":93939,"user_id":296328,"accept_rate":60,"display_name":"khmarbaise"},"score":0,"creation_date":1563879018,"post_id":57153017,"comment_id":100838656,"body_markdown":"Have you defined the dependency in to surefire-junit3 in your pom file? Please show your pom file...","body":"Have you defined the dependency in to surefire-junit3 in your pom file? Please show your pom file..."},{"owner":{"account_id":112317,"reputation":93939,"user_id":296328,"accept_rate":60,"display_name":"khmarbaise"},"score":0,"creation_date":1563879553,"post_id":57153017,"comment_id":100838961,"body_markdown":"Can you explain what this is: com.github.sbrannen:spring-test-junit5? Apart from what is in your dependencies not in your dependencyManagement?","body":"Can you explain what this is: com.github.sbrannen:spring-test-junit5? Apart from what is in your dependencies not in your dependencyManagement?"},{"owner":{"account_id":10559241,"reputation":991,"user_id":7779517,"display_name":"Eduard Dubilyer"},"score":0,"creation_date":1563884628,"post_id":57153017,"comment_id":100841982,"body_markdown":"Stop... 2.22 has several compatibility issues with junit 5. And why your plugin is ..-junit3? The proper plugin is maven-surefire-plugin. Take the whole plugin section from my example. It works fine for me.","body":"Stop... 2.22 has several compatibility issues with junit 5. And why your plugin is ..-junit3? The proper plugin is maven-surefire-plugin. Take the whole plugin section from my example. It works fine for me."}],"answers":[{"tags":[],"owner":{"account_id":10559241,"reputation":991,"user_id":7779517,"display_name":"Eduard Dubilyer"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1563858290,"creation_date":1563858290,"answer_id":57157006,"question_id":57153017,"body_markdown":"Add `include` section to the surefire plugin configuration.\r\nExample: \r\n\r\n                    &lt;plugin&gt;\r\n                        &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n                        &lt;artifactId&gt;maven-surefire-plugin&lt;/artifactId&gt;\r\n                        &lt;version&gt;3.0.0-M3&lt;/version&gt;\r\n                        &lt;configuration&gt;\r\n                            &lt;includes&gt;*&lt;/includes&gt;\r\n                            &lt;properties&gt;\r\n                                &lt;configurationParameters&gt;\r\n                                    junit.jupiter.extensions.autodetection.enabled = true\r\n                                &lt;/configurationParameters&gt;\r\n                            &lt;/properties&gt;\r\n                        &lt;/configuration&gt;\r\n                    &lt;/plugin&gt;","title":"Maven doesn&#39;t run unit tests - method name convention","body":"<p>Add <code>include</code> section to the surefire plugin configuration.\nExample: </p>\n\n<pre><code>                &lt;plugin&gt;\n                    &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n                    &lt;artifactId&gt;maven-surefire-plugin&lt;/artifactId&gt;\n                    &lt;version&gt;3.0.0-M3&lt;/version&gt;\n                    &lt;configuration&gt;\n                        &lt;includes&gt;*&lt;/includes&gt;\n                        &lt;properties&gt;\n                            &lt;configurationParameters&gt;\n                                junit.jupiter.extensions.autodetection.enabled = true\n                            &lt;/configurationParameters&gt;\n                        &lt;/properties&gt;\n                    &lt;/configuration&gt;\n                &lt;/plugin&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":10392503,"reputation":161,"user_id":7663276,"display_name":"rasklaad"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1682863720,"creation_date":1682863720,"answer_id":76141675,"question_id":57153017,"body_markdown":"I had the same issue. I solved it with updating surefire to the newer version (2.22.2 at the moment)\r\n\r\n        &lt;plugin&gt;\r\n            &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n            &lt;artifactId&gt;maven-surefire-plugin&lt;/artifactId&gt;\r\n            &lt;version&gt;2.22.2&lt;/version&gt;\r\n        &lt;/plugin&gt;\r\n","title":"Maven doesn&#39;t run unit tests - method name convention","body":"<p>I had the same issue. I solved it with updating surefire to the newer version (2.22.2 at the moment)</p>\n<pre><code>    &lt;plugin&gt;\n        &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n        &lt;artifactId&gt;maven-surefire-plugin&lt;/artifactId&gt;\n        &lt;version&gt;2.22.2&lt;/version&gt;\n    &lt;/plugin&gt;\n</code></pre>\n"}],"owner":{"account_id":15233105,"reputation":731,"user_id":10991651,"display_name":"Julien Berthoud"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1022,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":2,"score":2,"last_activity_date":1682863720,"creation_date":1563825773,"question_id":57153017,"body_markdown":"I&#39;d like to share with you a weird experience I had today when I was trying to execute with maven unit tests for a multi-modules project. \r\n\r\nWhen I ran the tests directly from the IDE (IntelliJ), everything works perfectly. But with Maven only one test class was being executed. I spend hours trying to figure out the reason for this behaviour. It turns out that **only the methods whose name start with `testxxx ()`** are executed.\r\n\r\n I&#39;m very suprised because I knew about the naming convention at class level, but was not aware about a naming convention at method level. \r\n\r\nCan you understand what happens? \r\n\r\nHere the stack I&#39;m working with: Maven 3.6.0, JUnit 5, maven-surefire-plugin:3.0.0\r\n\r\nEdit: here the dependency section of the POM of the parent level : \r\n```xml\r\n &lt;dependencyManagement&gt;\r\n        &lt;dependencies&gt;\r\n            &lt;!-- ========== Modules ========== --&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;${project.groupId}&lt;/groupId&gt;\r\n                &lt;artifactId&gt;myerp-technical&lt;/artifactId&gt;\r\n                &lt;version&gt;${project.version}&lt;/version&gt;\r\n            &lt;/dependency&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;${project.groupId}&lt;/groupId&gt;\r\n                &lt;artifactId&gt;myerp-model&lt;/artifactId&gt;\r\n                &lt;version&gt;${project.version}&lt;/version&gt;\r\n            &lt;/dependency&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;${project.groupId}&lt;/groupId&gt;\r\n                &lt;artifactId&gt;myerp-consumer&lt;/artifactId&gt;\r\n                &lt;version&gt;${project.version}&lt;/version&gt;\r\n            &lt;/dependency&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;${project.groupId}&lt;/groupId&gt;\r\n                &lt;artifactId&gt;myerp-business&lt;/artifactId&gt;\r\n                &lt;version&gt;${project.version}&lt;/version&gt;\r\n            &lt;/dependency&gt;\r\n\r\n\r\n            &lt;!-- ========== Libraries ========== --&gt;\r\n            &lt;!-- ===== Log4j ===== --&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;org.apache.logging.log4j&lt;/groupId&gt;\r\n                &lt;artifactId&gt;log4j-api&lt;/artifactId&gt;\r\n                &lt;version&gt;${log4j.version}&lt;/version&gt;\r\n            &lt;/dependency&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;org.apache.logging.log4j&lt;/groupId&gt;\r\n                &lt;artifactId&gt;log4j-core&lt;/artifactId&gt;\r\n                &lt;version&gt;${log4j.version}&lt;/version&gt;\r\n            &lt;/dependency&gt;\r\n            &lt;!-- Commons Logging Bridge --&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;org.apache.logging.log4j&lt;/groupId&gt;\r\n                &lt;artifactId&gt;log4j-jcl&lt;/artifactId&gt;\r\n                &lt;version&gt;${log4j.version}&lt;/version&gt;\r\n            &lt;/dependency&gt;\r\n            &lt;!-- Log4j 2 SLF4J Binding --&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;org.apache.logging.log4j&lt;/groupId&gt;\r\n                &lt;artifactId&gt;log4j-slf4j-impl&lt;/artifactId&gt;\r\n                &lt;version&gt;${log4j.version}&lt;/version&gt;\r\n            &lt;/dependency&gt;\r\n\r\n            &lt;!-- ===== JSR 303 - Bean validation ===== --&gt;\r\n            &lt;!-- interface --&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;javax.validation&lt;/groupId&gt;\r\n                &lt;artifactId&gt;validation-api&lt;/artifactId&gt;\r\n                &lt;version&gt;1.1.0.Final&lt;/version&gt;\r\n            &lt;/dependency&gt;\r\n            &lt;!--implementation--&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;org.hibernate&lt;/groupId&gt;\r\n                &lt;artifactId&gt;hibernate-validator&lt;/artifactId&gt;\r\n                &lt;version&gt;4.2.0.Final&lt;/version&gt;\r\n            &lt;/dependency&gt;\r\n\r\n            &lt;!-- ===== Apache Commons ===== --&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;org.apache.commons&lt;/groupId&gt;\r\n                &lt;artifactId&gt;commons-collections4&lt;/artifactId&gt;\r\n                &lt;version&gt;4.1&lt;/version&gt;\r\n            &lt;/dependency&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;org.apache.commons&lt;/groupId&gt;\r\n                &lt;artifactId&gt;commons-lang3&lt;/artifactId&gt;\r\n                &lt;version&gt;3.5&lt;/version&gt;\r\n            &lt;/dependency&gt;\r\n\r\n            &lt;!-- ===== Spring IOC ===== --&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;org.springframework&lt;/groupId&gt;\r\n                &lt;artifactId&gt;spring-core&lt;/artifactId&gt;\r\n                &lt;version&gt;${spring.version}&lt;/version&gt;\r\n                &lt;scope&gt;compile&lt;/scope&gt;\r\n            &lt;/dependency&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;org.springframework&lt;/groupId&gt;\r\n                &lt;artifactId&gt;spring-context&lt;/artifactId&gt;\r\n                &lt;version&gt;${spring.version}&lt;/version&gt;\r\n                &lt;scope&gt;compile&lt;/scope&gt;\r\n            &lt;/dependency&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;org.springframework&lt;/groupId&gt;\r\n                &lt;artifactId&gt;spring-beans&lt;/artifactId&gt;\r\n                &lt;version&gt;${spring.version}&lt;/version&gt;\r\n                &lt;scope&gt;compile&lt;/scope&gt;\r\n            &lt;/dependency&gt;\r\n\r\n            &lt;!-- ===== Spring JDBC/Tx ===== --&gt;\r\n            &lt;!-- spring-tx : transaction, JCA, DAO --&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;org.springframework&lt;/groupId&gt;\r\n                &lt;artifactId&gt;spring-tx&lt;/artifactId&gt;\r\n                &lt;version&gt;${spring.version}&lt;/version&gt;\r\n                &lt;scope&gt;compile&lt;/scope&gt;\r\n            &lt;/dependency&gt;\r\n            &lt;!-- spring-jdbc : commons-exceptions, datasource management --&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;org.springframework&lt;/groupId&gt;\r\n                &lt;artifactId&gt;spring-jdbc&lt;/artifactId&gt;\r\n                &lt;version&gt;${spring.version}&lt;/version&gt;\r\n                &lt;scope&gt;compile&lt;/scope&gt;\r\n            &lt;/dependency&gt;\r\n\r\n            &lt;!-- ===== Database ===== --&gt;\r\n            &lt;!-- DB Connection pool --&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;org.apache.commons&lt;/groupId&gt;\r\n                &lt;artifactId&gt;commons-dbcp2&lt;/artifactId&gt;\r\n                &lt;version&gt;2.1.1&lt;/version&gt;\r\n            &lt;/dependency&gt;\r\n            &lt;!-- JDBC Drivers : PostgreSQL --&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;org.postgresql&lt;/groupId&gt;\r\n                &lt;artifactId&gt;postgresql&lt;/artifactId&gt;\r\n                &lt;version&gt;9.4.1212&lt;/version&gt;\r\n                &lt;scope&gt;runtime&lt;/scope&gt;\r\n            &lt;/dependency&gt;\r\n\r\n            &lt;!-- ===== unit tests===== --&gt;\r\n\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;com.github.sbrannen&lt;/groupId&gt;\r\n                &lt;artifactId&gt;spring-test-junit5&lt;/artifactId&gt;\r\n                &lt;version&gt;1.4.0&lt;/version&gt;\r\n                &lt;scope&gt;test&lt;/scope&gt;\r\n            &lt;/dependency&gt;\r\n\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;org.mockito&lt;/groupId&gt;\r\n                &lt;artifactId&gt;mockito-junit-jupiter&lt;/artifactId&gt;\r\n                &lt;version&gt;3.0.0&lt;/version&gt;\r\n                &lt;scope&gt;test&lt;/scope&gt;\r\n            &lt;/dependency&gt;\r\n\r\n\r\n        &lt;/dependencies&gt;\r\n    &lt;/dependencyManagement&gt;\r\n```\r\n\r\nAnd here an example of a class test, which is being ignored because the test method doesn&#39;t start with testXXXX():\r\n\r\n```java\r\npackage com.dummy.myerp.model.bean.comptabilite;\r\nimport org.junit.jupiter.api.Test;\r\n\r\nimport java.util.ArrayList;\r\nimport java.util.Arrays;\r\nimport java.util.List;\r\n\r\nimport static org.junit.jupiter.api.Assertions.assertEquals;\r\n\r\npublic class TestDummy {\r\n\r\n\r\n    @Test\r\n    public void getByNumeroTest() {\r\n\r\n        Integer numero1 = 1232;\r\n        Integer numero2 = 92837;\r\n        Integer numero3 = null;\r\n\r\n        String libell&#233;1 = &quot;apports en capital&quot;;\r\n        String libell&#233;2 = null;\r\n        String libell&#233;3 = &quot;produits exceptionnels&quot;;\r\n\r\n        CompteComptable compteComptable1 = new CompteComptable(numero1, libell&#233;1);\r\n        CompteComptable compteComptable2 = new CompteComptable(numero2, libell&#233;2);\r\n        CompteComptable compteComptable3 = new CompteComptable(numero3, libell&#233;3);\r\n\r\n        List&lt;CompteComptable&gt; list3elements = new ArrayList&lt;CompteComptable&gt;(\r\n                Arrays.asList(compteComptable1, compteComptable2, compteComptable3));\r\n\r\n\r\n        assertEquals(compteComptable1, CompteComptable.getByNumero(list3elements, numero1), &quot;3 elements, standard&quot;);\r\n        assertEquals(compteComptable2, CompteComptable.getByNumero(list3elements, numero2), &quot;3 elements, name is null&quot;);\r\n\r\n        assertEquals(null, CompteComptable.getByNumero(list3elements, numero3), &quot;3 elements, account is null&quot;);\r\n        assertEquals(null, CompteComptable.getByNumero(list3elements, 5555), &quot;3 elements, account not available&quot;);\r\n\r\n    }\r\n}\r\n```\r\n","title":"Maven doesn&#39;t run unit tests - method name convention","body":"<p>I'd like to share with you a weird experience I had today when I was trying to execute with maven unit tests for a multi-modules project. </p>\n\n<p>When I ran the tests directly from the IDE (IntelliJ), everything works perfectly. But with Maven only one test class was being executed. I spend hours trying to figure out the reason for this behaviour. It turns out that <strong>only the methods whose name start with <code>testxxx ()</code></strong> are executed.</p>\n\n<p>I'm very suprised because I knew about the naming convention at class level, but was not aware about a naming convention at method level. </p>\n\n<p>Can you understand what happens? </p>\n\n<p>Here the stack I'm working with: Maven 3.6.0, JUnit 5, maven-surefire-plugin:3.0.0</p>\n\n<p>Edit: here the dependency section of the POM of the parent level : </p>\n\n<pre class=\"lang-xml prettyprint-override\"><code> &lt;dependencyManagement&gt;\n        &lt;dependencies&gt;\n            &lt;!-- ========== Modules ========== --&gt;\n            &lt;dependency&gt;\n                &lt;groupId&gt;${project.groupId}&lt;/groupId&gt;\n                &lt;artifactId&gt;myerp-technical&lt;/artifactId&gt;\n                &lt;version&gt;${project.version}&lt;/version&gt;\n            &lt;/dependency&gt;\n            &lt;dependency&gt;\n                &lt;groupId&gt;${project.groupId}&lt;/groupId&gt;\n                &lt;artifactId&gt;myerp-model&lt;/artifactId&gt;\n                &lt;version&gt;${project.version}&lt;/version&gt;\n            &lt;/dependency&gt;\n            &lt;dependency&gt;\n                &lt;groupId&gt;${project.groupId}&lt;/groupId&gt;\n                &lt;artifactId&gt;myerp-consumer&lt;/artifactId&gt;\n                &lt;version&gt;${project.version}&lt;/version&gt;\n            &lt;/dependency&gt;\n            &lt;dependency&gt;\n                &lt;groupId&gt;${project.groupId}&lt;/groupId&gt;\n                &lt;artifactId&gt;myerp-business&lt;/artifactId&gt;\n                &lt;version&gt;${project.version}&lt;/version&gt;\n            &lt;/dependency&gt;\n\n\n            &lt;!-- ========== Libraries ========== --&gt;\n            &lt;!-- ===== Log4j ===== --&gt;\n            &lt;dependency&gt;\n                &lt;groupId&gt;org.apache.logging.log4j&lt;/groupId&gt;\n                &lt;artifactId&gt;log4j-api&lt;/artifactId&gt;\n                &lt;version&gt;${log4j.version}&lt;/version&gt;\n            &lt;/dependency&gt;\n            &lt;dependency&gt;\n                &lt;groupId&gt;org.apache.logging.log4j&lt;/groupId&gt;\n                &lt;artifactId&gt;log4j-core&lt;/artifactId&gt;\n                &lt;version&gt;${log4j.version}&lt;/version&gt;\n            &lt;/dependency&gt;\n            &lt;!-- Commons Logging Bridge --&gt;\n            &lt;dependency&gt;\n                &lt;groupId&gt;org.apache.logging.log4j&lt;/groupId&gt;\n                &lt;artifactId&gt;log4j-jcl&lt;/artifactId&gt;\n                &lt;version&gt;${log4j.version}&lt;/version&gt;\n            &lt;/dependency&gt;\n            &lt;!-- Log4j 2 SLF4J Binding --&gt;\n            &lt;dependency&gt;\n                &lt;groupId&gt;org.apache.logging.log4j&lt;/groupId&gt;\n                &lt;artifactId&gt;log4j-slf4j-impl&lt;/artifactId&gt;\n                &lt;version&gt;${log4j.version}&lt;/version&gt;\n            &lt;/dependency&gt;\n\n            &lt;!-- ===== JSR 303 - Bean validation ===== --&gt;\n            &lt;!-- interface --&gt;\n            &lt;dependency&gt;\n                &lt;groupId&gt;javax.validation&lt;/groupId&gt;\n                &lt;artifactId&gt;validation-api&lt;/artifactId&gt;\n                &lt;version&gt;1.1.0.Final&lt;/version&gt;\n            &lt;/dependency&gt;\n            &lt;!--implementation--&gt;\n            &lt;dependency&gt;\n                &lt;groupId&gt;org.hibernate&lt;/groupId&gt;\n                &lt;artifactId&gt;hibernate-validator&lt;/artifactId&gt;\n                &lt;version&gt;4.2.0.Final&lt;/version&gt;\n            &lt;/dependency&gt;\n\n            &lt;!-- ===== Apache Commons ===== --&gt;\n            &lt;dependency&gt;\n                &lt;groupId&gt;org.apache.commons&lt;/groupId&gt;\n                &lt;artifactId&gt;commons-collections4&lt;/artifactId&gt;\n                &lt;version&gt;4.1&lt;/version&gt;\n            &lt;/dependency&gt;\n            &lt;dependency&gt;\n                &lt;groupId&gt;org.apache.commons&lt;/groupId&gt;\n                &lt;artifactId&gt;commons-lang3&lt;/artifactId&gt;\n                &lt;version&gt;3.5&lt;/version&gt;\n            &lt;/dependency&gt;\n\n            &lt;!-- ===== Spring IOC ===== --&gt;\n            &lt;dependency&gt;\n                &lt;groupId&gt;org.springframework&lt;/groupId&gt;\n                &lt;artifactId&gt;spring-core&lt;/artifactId&gt;\n                &lt;version&gt;${spring.version}&lt;/version&gt;\n                &lt;scope&gt;compile&lt;/scope&gt;\n            &lt;/dependency&gt;\n            &lt;dependency&gt;\n                &lt;groupId&gt;org.springframework&lt;/groupId&gt;\n                &lt;artifactId&gt;spring-context&lt;/artifactId&gt;\n                &lt;version&gt;${spring.version}&lt;/version&gt;\n                &lt;scope&gt;compile&lt;/scope&gt;\n            &lt;/dependency&gt;\n            &lt;dependency&gt;\n                &lt;groupId&gt;org.springframework&lt;/groupId&gt;\n                &lt;artifactId&gt;spring-beans&lt;/artifactId&gt;\n                &lt;version&gt;${spring.version}&lt;/version&gt;\n                &lt;scope&gt;compile&lt;/scope&gt;\n            &lt;/dependency&gt;\n\n            &lt;!-- ===== Spring JDBC/Tx ===== --&gt;\n            &lt;!-- spring-tx : transaction, JCA, DAO --&gt;\n            &lt;dependency&gt;\n                &lt;groupId&gt;org.springframework&lt;/groupId&gt;\n                &lt;artifactId&gt;spring-tx&lt;/artifactId&gt;\n                &lt;version&gt;${spring.version}&lt;/version&gt;\n                &lt;scope&gt;compile&lt;/scope&gt;\n            &lt;/dependency&gt;\n            &lt;!-- spring-jdbc : commons-exceptions, datasource management --&gt;\n            &lt;dependency&gt;\n                &lt;groupId&gt;org.springframework&lt;/groupId&gt;\n                &lt;artifactId&gt;spring-jdbc&lt;/artifactId&gt;\n                &lt;version&gt;${spring.version}&lt;/version&gt;\n                &lt;scope&gt;compile&lt;/scope&gt;\n            &lt;/dependency&gt;\n\n            &lt;!-- ===== Database ===== --&gt;\n            &lt;!-- DB Connection pool --&gt;\n            &lt;dependency&gt;\n                &lt;groupId&gt;org.apache.commons&lt;/groupId&gt;\n                &lt;artifactId&gt;commons-dbcp2&lt;/artifactId&gt;\n                &lt;version&gt;2.1.1&lt;/version&gt;\n            &lt;/dependency&gt;\n            &lt;!-- JDBC Drivers : PostgreSQL --&gt;\n            &lt;dependency&gt;\n                &lt;groupId&gt;org.postgresql&lt;/groupId&gt;\n                &lt;artifactId&gt;postgresql&lt;/artifactId&gt;\n                &lt;version&gt;9.4.1212&lt;/version&gt;\n                &lt;scope&gt;runtime&lt;/scope&gt;\n            &lt;/dependency&gt;\n\n            &lt;!-- ===== unit tests===== --&gt;\n\n            &lt;dependency&gt;\n                &lt;groupId&gt;com.github.sbrannen&lt;/groupId&gt;\n                &lt;artifactId&gt;spring-test-junit5&lt;/artifactId&gt;\n                &lt;version&gt;1.4.0&lt;/version&gt;\n                &lt;scope&gt;test&lt;/scope&gt;\n            &lt;/dependency&gt;\n\n            &lt;dependency&gt;\n                &lt;groupId&gt;org.mockito&lt;/groupId&gt;\n                &lt;artifactId&gt;mockito-junit-jupiter&lt;/artifactId&gt;\n                &lt;version&gt;3.0.0&lt;/version&gt;\n                &lt;scope&gt;test&lt;/scope&gt;\n            &lt;/dependency&gt;\n\n\n        &lt;/dependencies&gt;\n    &lt;/dependencyManagement&gt;\n</code></pre>\n\n<p>And here an example of a class test, which is being ignored because the test method doesn't start with testXXXX():</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>package com.dummy.myerp.model.bean.comptabilite;\nimport org.junit.jupiter.api.Test;\n\nimport java.util.ArrayList;\nimport java.util.Arrays;\nimport java.util.List;\n\nimport static org.junit.jupiter.api.Assertions.assertEquals;\n\npublic class TestDummy {\n\n\n    @Test\n    public void getByNumeroTest() {\n\n        Integer numero1 = 1232;\n        Integer numero2 = 92837;\n        Integer numero3 = null;\n\n        String libell√©1 = \"apports en capital\";\n        String libell√©2 = null;\n        String libell√©3 = \"produits exceptionnels\";\n\n        CompteComptable compteComptable1 = new CompteComptable(numero1, libell√©1);\n        CompteComptable compteComptable2 = new CompteComptable(numero2, libell√©2);\n        CompteComptable compteComptable3 = new CompteComptable(numero3, libell√©3);\n\n        List&lt;CompteComptable&gt; list3elements = new ArrayList&lt;CompteComptable&gt;(\n                Arrays.asList(compteComptable1, compteComptable2, compteComptable3));\n\n\n        assertEquals(compteComptable1, CompteComptable.getByNumero(list3elements, numero1), \"3 elements, standard\");\n        assertEquals(compteComptable2, CompteComptable.getByNumero(list3elements, numero2), \"3 elements, name is null\");\n\n        assertEquals(null, CompteComptable.getByNumero(list3elements, numero3), \"3 elements, account is null\");\n        assertEquals(null, CompteComptable.getByNumero(list3elements, 5555), \"3 elements, account not available\");\n\n    }\n}\n</code></pre>\n"},{"tags":["java","java-9","java-module"],"answers":[{"tags":[],"owner":{"account_id":362885,"reputation":37256,"user_id":706317,"accept_rate":70,"display_name":"ZhekaKozlov"},"down_vote_count":0,"up_vote_count":6,"is_accepted":true,"score":6,"last_activity_date":1498490065,"creation_date":1498464755,"answer_id":44755444,"question_id":44754885,"body_markdown":"First of all, in `module-info.java` you mention modules, not packages. E.g. `java.xml` is a module which contains about 25 packages. So, if your module uses 10 packages from the `java.xml` module, you don&#39;t have to repeat that 10 times in `module-info.java`, you write `requires java.xml` just once. So, that huge list of dependencies is not huge actually.\r\n\r\nIf you really want to skip all those declarations, you can just not create `module-info.java` (but I don&#39;t recommend to do that). A module that does not have `module-info.java` is called an automatic module and it implicitly requires all other modules.\r\n\r\n\r\n","title":"java 9: In module-info.java do i have to again mention packages((as requires) that are already being imported in sources","body":"<p>First of all, in <code>module-info.java</code> you mention modules, not packages. E.g. <code>java.xml</code> is a module which contains about 25 packages. So, if your module uses 10 packages from the <code>java.xml</code> module, you don't have to repeat that 10 times in <code>module-info.java</code>, you write <code>requires java.xml</code> just once. So, that huge list of dependencies is not huge actually.</p>\n\n<p>If you really want to skip all those declarations, you can just not create <code>module-info.java</code> (but I don't recommend to do that). A module that does not have <code>module-info.java</code> is called an automatic module and it implicitly requires all other modules.</p>\n"},{"tags":[],"owner":{"account_id":13222953,"reputation":731,"user_id":9549068,"display_name":"Nor.Z"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1682863459,"creation_date":1682863459,"answer_id":76141655,"question_id":44754885,"body_markdown":"### solution (workaround)\r\n\r\n*If you are **bothered** by having to write out each single `requires` again and again  \\\r\n-- there is a faster way to **`requires *all*`** \\\r\n-- if you know Ahk &amp; AhkSpy*\r\n\r\n\r\n1. get [**AhkSpy**](https://raw.githubusercontent.com/serzh82saratov/AhkSpy/master/AhkSpy.ahk\r\n)\r\n1. open the **`module dependency`**\r\n1. capture &amp; copy **all** of them by AhkSpy\r\n1. paste them all in `module-info.java`\r\n\r\n[![enter image description here][1]][1]\r\n\r\n---\r\n\r\n### sample code \r\n\r\n(if you really dont know how to do the above, copy the following **sample** code may help you a bit)\r\n\r\n```\r\n  //  requires HikariCP;\r\n  //  requires accessors.smart;\r\n  //  requires android.json;\r\n  requires antlr;\r\n  //  requires assertj.core;\r\n  requires attoparser;\r\n  requires com.fasterxml.jackson.annotation;\r\n  requires com.sun.istack.runtime;\r\n  requires com.sun.xml.txw2;\r\n  requires dom4j;\r\n  //  requires jackson.core;\r\n  //  requires jackson.databind;\r\n  //  requires jackson.datatype.jdk8;\r\n  //  requires jackson.datatype.jsr310;\r\n  //  requires jackson.module.parameter.names;\r\n  requires jakarta.activation;\r\n  requires java.annotation;\r\n  requires java.base;\r\n  requires java.compiler;\r\n  requires java.datatransfer;\r\n  requires java.desktop;\r\n  requires java.instrument;\r\n  requires java.logging;\r\n  requires java.management;\r\n  requires java.management.rmi;\r\n  requires java.naming;\r\n  requires java.net.http;\r\n  requires java.persistence;\r\n  requires java.prefs;\r\n  requires java.rmi;\r\n  requires java.scripting;\r\n  requires java.se;\r\n  requires java.security.jgss;\r\n  requires java.security.sasl;\r\n  requires java.smartcardio;\r\n  requires java.sql;\r\n  requires java.sql.rowset;\r\n  requires java.transaction;\r\n  requires java.transaction.xa;\r\n  requires java.xml;\r\n  requires java.xml.bind;\r\n  requires java.xml.crypto;\r\n  requires jdk.accessibility;\r\n  requires jdk.attach;\r\n  requires jdk.charsets;\r\n  requires jdk.compiler;\r\n  requires jdk.crypto.cryptoki;\r\n  requires jdk.crypto.ec;\r\n  requires jdk.crypto.mscapi;\r\n  requires jdk.dynalink;\r\n  requires jdk.editpad;\r\n  requires jdk.hotspot.agent;\r\n  requires jdk.httpserver;\r\n  requires jdk.internal.ed;\r\n  requires jdk.internal.jvmstat;\r\n  requires jdk.internal.le;\r\n  requires jdk.internal.opt;\r\n  requires jdk.internal.vm.ci;\r\n  requires jdk.internal.vm.compiler;\r\n  requires jdk.internal.vm.compiler.management;\r\n  requires jdk.jartool;\r\n  requires jdk.javadoc;\r\n  requires jdk.jcmd;\r\n  requires jdk.jconsole;\r\n  requires jdk.jdeps;\r\n  requires jdk.jdi;\r\n  requires jdk.jdwp.agent;\r\n  requires jdk.jfr;\r\n  requires jdk.jlink;\r\n  requires jdk.jpackage;\r\n  requires jdk.jshell;\r\n  requires jdk.jsobject;\r\n  requires jdk.jstatd;\r\n  requires jdk.localedata;\r\n  requires jdk.management;\r\n  requires jdk.management.agent;\r\n  requires jdk.management.jfr;\r\n  requires jdk.naming.dns;\r\n  requires jdk.naming.rmi;\r\n  requires jdk.net;\r\n  requires jdk.nio.mapmode;\r\n  requires jdk.random;\r\n  requires jdk.sctp;\r\n  requires jdk.security.auth;\r\n  requires jdk.security.jgss;\r\n  requires jdk.unsupported;\r\n  requires jdk.unsupported.desktop;\r\n  requires jdk.xml.dom;\r\n  requires jdk.zipfs;\r\n  //  requires json.path;\r\n  //  requires json.smart;\r\n  //  requires jsonassert;\r\n  requires jul.to.slf4j;\r\n  //  requires log4j.api;\r\n  requires logback.classic;\r\n  requires logback.core;\r\n  requires lombok;\r\n  //  requires mysql.connector.j;\r\n  requires org.apache.logging.slf4j;\r\n  requires org.apache.tomcat.embed.core;\r\n  requires org.apache.tomcat.embed.el;\r\n  requires org.apache.tomcat.embed.websocket;\r\n  //  requires org.apiguardian.api;\r\n  requires org.aspectj.weaver;\r\n  requires org.glassfish.jaxb.runtime;\r\n  //  requires org.hamcrest;\r\n  requires org.hibernate.commons.annotations;\r\n  requires org.hibernate.orm.core;\r\n  requires org.hibernate.orm.envers;\r\n  requires org.jboss.jandex;\r\n  requires org.jboss.logging;\r\n  requires org.joda.time;\r\n  //  requires org.junit.jupiter;\r\n  //  requires org.junit.jupiter.api;\r\n  //  requires org.junit.jupiter.engine;\r\n  //  requires org.junit.jupiter.params;\r\n  //  requires org.junit.platform.commons;\r\n  //  requires org.junit.platform.engine;\r\n  //  requires org.mockito;\r\n  //  requires org.mockito.junit.jupiter;\r\n  //  requires org.objectweb.asm;\r\n  //  requires org.objenesis;\r\n  //  requires org.opentest4j;\r\n  requires org.slf4j;\r\n  //  requires org.xmlunit;\r\n  requires org.yaml.snakeyaml;\r\n  requires spring.aop;\r\n  requires spring.aspects;\r\n  requires spring.beans;\r\n  requires spring.boot;\r\n  requires spring.boot.autoconfigure;\r\n  //  requires spring.boot.devtools;\r\n  requires spring.boot.starter;\r\n  requires spring.boot.starter.aop;\r\n  requires spring.boot.starter.data.jpa;\r\n  requires spring.boot.starter.jdbc;\r\n  requires spring.boot.starter.json;\r\n  requires spring.boot.starter.logging;\r\n  //  requires spring.boot.starter.test;\r\n  requires spring.boot.starter.thymeleaf;\r\n  requires spring.boot.starter.tomcat;\r\n  requires spring.boot.starter.web;\r\n  //  requires spring.boot.test;\r\n  //  requires spring.boot.test.autoconfigure;\r\n  requires spring.context;\r\n  requires spring.core;\r\n  requires spring.data.commons;\r\n  requires spring.data.envers;\r\n  requires spring.data.jpa;\r\n  requires spring.expression;\r\n  requires spring.jcl;\r\n  requires spring.jdbc;\r\n  requires spring.orm;\r\n  //  requires spring.test;\r\n  requires spring.tx;\r\n  requires spring.web;\r\n  requires spring.webmvc;\r\n  requires thymeleaf;\r\n  requires thymeleaf.extras.java8time;\r\n  requires thymeleaf.spring5;\r\n  requires unbescape;\r\n```\r\n\r\n&lt;sub&gt;\r\n&lt;sup&gt;\r\n\r\n---\r\n\r\n### misc (-- following not important)\r\n\r\n- idk why Eclipse doesnt support this automatic adding `import` to `module-info.java`. \r\n- `module-info.java` is annoying in many aspects -- requires you do many more work -- idk why (not familiar with)\r\n  - `requires transitive`\r\n  - **missing** `requires` &amp; program throws exception \r\n  - conflict with some program design\r\n- Eclipse can indeed **auto generate** `module-info.java` by: \\\r\n  right click the project &gt; Configure &gt; Create `module-info.java` \\\r\n  but insufficient in some cases\r\n- related: https://stackoverflow.com/questions/45269581/why-is-exporting-the-entire-module-not-allowed\r\n- [[Ahk &amp; AhkSpy (/ AccViewer) is a good tool]]\r\n\r\n&lt;/sup&gt;\r\n&lt;/sub&gt;\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/ZZCWT.png","title":"java 9: In module-info.java do i have to again mention packages((as requires) that are already being imported in sources","body":"<h3>solution (workaround)</h3>\n<p><em>If you are <strong>bothered</strong> by having to write out each single <code>requires</code> again and again  <br />\n-- there is a faster way to <strong><code>requires *all*</code></strong> <br />\n-- if you know Ahk &amp; AhkSpy</em></p>\n<ol>\n<li>get <a href=\"https://raw.githubusercontent.com/serzh82saratov/AhkSpy/master/AhkSpy.ahk\" rel=\"nofollow noreferrer\"><strong>AhkSpy</strong></a></li>\n<li>open the <strong><code>module dependency</code></strong></li>\n<li>capture &amp; copy <strong>all</strong> of them by AhkSpy</li>\n<li>paste them all in <code>module-info.java</code></li>\n</ol>\n<p><a href=\"https://i.stack.imgur.com/ZZCWT.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/ZZCWT.png\" alt=\"enter image description here\" /></a></p>\n<hr />\n<h3>sample code</h3>\n<p>(if you really dont know how to do the above, copy the following <strong>sample</strong> code may help you a bit)</p>\n<pre><code>  //  requires HikariCP;\n  //  requires accessors.smart;\n  //  requires android.json;\n  requires antlr;\n  //  requires assertj.core;\n  requires attoparser;\n  requires com.fasterxml.jackson.annotation;\n  requires com.sun.istack.runtime;\n  requires com.sun.xml.txw2;\n  requires dom4j;\n  //  requires jackson.core;\n  //  requires jackson.databind;\n  //  requires jackson.datatype.jdk8;\n  //  requires jackson.datatype.jsr310;\n  //  requires jackson.module.parameter.names;\n  requires jakarta.activation;\n  requires java.annotation;\n  requires java.base;\n  requires java.compiler;\n  requires java.datatransfer;\n  requires java.desktop;\n  requires java.instrument;\n  requires java.logging;\n  requires java.management;\n  requires java.management.rmi;\n  requires java.naming;\n  requires java.net.http;\n  requires java.persistence;\n  requires java.prefs;\n  requires java.rmi;\n  requires java.scripting;\n  requires java.se;\n  requires java.security.jgss;\n  requires java.security.sasl;\n  requires java.smartcardio;\n  requires java.sql;\n  requires java.sql.rowset;\n  requires java.transaction;\n  requires java.transaction.xa;\n  requires java.xml;\n  requires java.xml.bind;\n  requires java.xml.crypto;\n  requires jdk.accessibility;\n  requires jdk.attach;\n  requires jdk.charsets;\n  requires jdk.compiler;\n  requires jdk.crypto.cryptoki;\n  requires jdk.crypto.ec;\n  requires jdk.crypto.mscapi;\n  requires jdk.dynalink;\n  requires jdk.editpad;\n  requires jdk.hotspot.agent;\n  requires jdk.httpserver;\n  requires jdk.internal.ed;\n  requires jdk.internal.jvmstat;\n  requires jdk.internal.le;\n  requires jdk.internal.opt;\n  requires jdk.internal.vm.ci;\n  requires jdk.internal.vm.compiler;\n  requires jdk.internal.vm.compiler.management;\n  requires jdk.jartool;\n  requires jdk.javadoc;\n  requires jdk.jcmd;\n  requires jdk.jconsole;\n  requires jdk.jdeps;\n  requires jdk.jdi;\n  requires jdk.jdwp.agent;\n  requires jdk.jfr;\n  requires jdk.jlink;\n  requires jdk.jpackage;\n  requires jdk.jshell;\n  requires jdk.jsobject;\n  requires jdk.jstatd;\n  requires jdk.localedata;\n  requires jdk.management;\n  requires jdk.management.agent;\n  requires jdk.management.jfr;\n  requires jdk.naming.dns;\n  requires jdk.naming.rmi;\n  requires jdk.net;\n  requires jdk.nio.mapmode;\n  requires jdk.random;\n  requires jdk.sctp;\n  requires jdk.security.auth;\n  requires jdk.security.jgss;\n  requires jdk.unsupported;\n  requires jdk.unsupported.desktop;\n  requires jdk.xml.dom;\n  requires jdk.zipfs;\n  //  requires json.path;\n  //  requires json.smart;\n  //  requires jsonassert;\n  requires jul.to.slf4j;\n  //  requires log4j.api;\n  requires logback.classic;\n  requires logback.core;\n  requires lombok;\n  //  requires mysql.connector.j;\n  requires org.apache.logging.slf4j;\n  requires org.apache.tomcat.embed.core;\n  requires org.apache.tomcat.embed.el;\n  requires org.apache.tomcat.embed.websocket;\n  //  requires org.apiguardian.api;\n  requires org.aspectj.weaver;\n  requires org.glassfish.jaxb.runtime;\n  //  requires org.hamcrest;\n  requires org.hibernate.commons.annotations;\n  requires org.hibernate.orm.core;\n  requires org.hibernate.orm.envers;\n  requires org.jboss.jandex;\n  requires org.jboss.logging;\n  requires org.joda.time;\n  //  requires org.junit.jupiter;\n  //  requires org.junit.jupiter.api;\n  //  requires org.junit.jupiter.engine;\n  //  requires org.junit.jupiter.params;\n  //  requires org.junit.platform.commons;\n  //  requires org.junit.platform.engine;\n  //  requires org.mockito;\n  //  requires org.mockito.junit.jupiter;\n  //  requires org.objectweb.asm;\n  //  requires org.objenesis;\n  //  requires org.opentest4j;\n  requires org.slf4j;\n  //  requires org.xmlunit;\n  requires org.yaml.snakeyaml;\n  requires spring.aop;\n  requires spring.aspects;\n  requires spring.beans;\n  requires spring.boot;\n  requires spring.boot.autoconfigure;\n  //  requires spring.boot.devtools;\n  requires spring.boot.starter;\n  requires spring.boot.starter.aop;\n  requires spring.boot.starter.data.jpa;\n  requires spring.boot.starter.jdbc;\n  requires spring.boot.starter.json;\n  requires spring.boot.starter.logging;\n  //  requires spring.boot.starter.test;\n  requires spring.boot.starter.thymeleaf;\n  requires spring.boot.starter.tomcat;\n  requires spring.boot.starter.web;\n  //  requires spring.boot.test;\n  //  requires spring.boot.test.autoconfigure;\n  requires spring.context;\n  requires spring.core;\n  requires spring.data.commons;\n  requires spring.data.envers;\n  requires spring.data.jpa;\n  requires spring.expression;\n  requires spring.jcl;\n  requires spring.jdbc;\n  requires spring.orm;\n  //  requires spring.test;\n  requires spring.tx;\n  requires spring.web;\n  requires spring.webmvc;\n  requires thymeleaf;\n  requires thymeleaf.extras.java8time;\n  requires thymeleaf.spring5;\n  requires unbescape;\n</code></pre>\n<sub>\n<sup>\n<hr />\n<h3>misc (-- following not important)</h3>\n<ul>\n<li>idk why Eclipse doesnt support this automatic adding <code>import</code> to <code>module-info.java</code>.</li>\n<li><code>module-info.java</code> is annoying in many aspects -- requires you do many more work -- idk why (not familiar with)\n<ul>\n<li><code>requires transitive</code></li>\n<li><strong>missing</strong> <code>requires</code> &amp; program throws exception</li>\n<li>conflict with some program design</li>\n</ul>\n</li>\n<li>Eclipse can indeed <strong>auto generate</strong> <code>module-info.java</code> by: <br />\nright click the project &gt; Configure &gt; Create <code>module-info.java</code> <br />\nbut insufficient in some cases</li>\n<li>related: <a href=\"https://stackoverflow.com/questions/45269581/why-is-exporting-the-entire-module-not-allowed\">Why is exporting the entire module not allowed?</a></li>\n<li>[[Ahk &amp; AhkSpy (/ AccViewer) is a good tool]]</li>\n</ul>\n</sup>\n</sub>\n"}],"owner":{"display_name":"user8205906"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2051,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"accepted_answer_id":44755444,"answer_count":2,"score":3,"last_activity_date":1682863459,"creation_date":1498462401,"question_id":44754885,"body_markdown":"working with java 9 modules, if i am using java.xml in my code...                        \r\n1) i will import xml package using import statement...                        \r\n2) if i don&#39;t  mention that this package is required in the module declaration of my module...                        \r\n - will the compilation of my module work.. ??                        \r\ni would guess... no... and on mentioning that xml package is required on module-info.java... it might work.                        \r\nso.. what I am wondering is... is that not redundancy... every importing package is implicitly... required. (unless i need to understand module even better)\r\n\r\nIs there a way to mention that all imported packages are required in module declaration, other wise it could be a long list to mention in module-info.java?","title":"java 9: In module-info.java do i have to again mention packages((as requires) that are already being imported in sources","body":"<p>working with java 9 modules, if i am using java.xml in my code...<br>\n1) i will import xml package using import statement...<br>\n2) if i don't  mention that this package is required in the module declaration of my module...<br>\n - will the compilation of my module work.. ??<br>\ni would guess... no... and on mentioning that xml package is required on module-info.java... it might work.<br>\nso.. what I am wondering is... is that not redundancy... every importing package is implicitly... required. (unless i need to understand module even better)</p>\n\n<p>Is there a way to mention that all imported packages are required in module declaration, other wise it could be a long list to mention in module-info.java?</p>\n"},{"tags":["java","json","parsing","gson","moshi"],"answers":[{"tags":[],"owner":{"account_id":17735,"reputation":39493,"user_id":40013,"accept_rate":75,"display_name":"Jesse Wilson"},"down_vote_count":0,"up_vote_count":10,"is_accepted":true,"score":10,"last_activity_date":1682862859,"creation_date":1462500169,"answer_id":37063079,"question_id":37060032,"body_markdown":"Use a Map.\r\n\r\n    @FromJson\r\n    Bar fromJson(Map&lt;String, Baz&gt; json) {\r\n        Log.d(&quot;xxx&quot;, &quot;got &quot; + json.toString());\r\n        return new Bar();\r\n    }\r\n\r\nIf you also don&#39;t know the type of the map‚Äôs values you can use Object.","title":"Moshi - Parse unknown json keys","body":"<p>Use a Map.</p>\n<pre><code>@FromJson\nBar fromJson(Map&lt;String, Baz&gt; json) {\n    Log.d(&quot;xxx&quot;, &quot;got &quot; + json.toString());\n    return new Bar();\n}\n</code></pre>\n<p>If you also don't know the type of the map‚Äôs values you can use Object.</p>\n"}],"owner":{"account_id":180055,"reputation":75792,"user_id":413127,"accept_rate":96,"display_name":"Blundell"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":3490,"favorite_count":0,"down_vote_count":0,"up_vote_count":10,"accepted_answer_id":37063079,"answer_count":1,"score":10,"last_activity_date":1682862859,"creation_date":1462481487,"question_id":37060032,"body_markdown":"How can I parse with moshi a json structure that has keys that are unknown at compile time:\r\n\r\n    &quot;foo&quot;: {\r\n      &quot;name&quot;: &quot;hello&quot;,\r\n      &quot;bar&quot;: {\r\n        &quot;unknownKey1&quot;: {\r\n          &quot;a&quot;: &quot;1&quot;\r\n          }\r\n        },\r\n        &quot;unknownKey2&quot;: {\r\n          &quot;b&quot;: &quot;2&quot;\r\n        },\r\n        &quot;unknownKeyX&quot;: {\r\n          &quot;c&quot;: &quot;X&quot;\r\n        }\r\n      },\r\n      &quot;properties&quot;: {...}\r\n    }\r\n\r\nI tried using a `@FromJson` adapter for `JSONObject` but the logs just say that the json is empty `{}` (where I would expect `{&quot;unknownKey1&quot;: { ... etc ...}`)\r\n\r\n       class Foo {\r\n\r\n            @Json(name = &quot;name&quot;)\r\n            String name;\r\n            @Json(name = &quot;bar&quot;)\r\n            Bar bar;\r\n\r\n            static class Bar {\r\n\r\n            }\r\n        }\r\n\r\n    class BarAdapter {\r\n\r\n        @FromJson\r\n        Bar fromJson(JSONObject json) {\r\n            Log.d(&quot;xxx&quot;, &quot;got &quot; + json.toString());\r\n            return new Bar();\r\n        }\r\n    }\r\n\r\nOnce I can get at the json inside bar, I can manually iterate it to add to a list or something (since I don&#39;t know how many items there will be).\r\n\r\nUsing it like this:\r\n\r\n             Moshi moshi = new Moshi.Builder()\r\n            .add(new BarAdapter())\r\n            .add(new LinkedHashMapConverter())\r\n            .build();\r\n\r\nI also had to add the `LinkedHashMapConverter` to appease the moshi gods, but adding logs to it, its methods are never called (this might be a separate issue with my real json).\r\n\r\nany ideas?","title":"Moshi - Parse unknown json keys","body":"<p>How can I parse with moshi a json structure that has keys that are unknown at compile time:</p>\n\n<pre><code>\"foo\": {\n  \"name\": \"hello\",\n  \"bar\": {\n    \"unknownKey1\": {\n      \"a\": \"1\"\n      }\n    },\n    \"unknownKey2\": {\n      \"b\": \"2\"\n    },\n    \"unknownKeyX\": {\n      \"c\": \"X\"\n    }\n  },\n  \"properties\": {...}\n}\n</code></pre>\n\n<p>I tried using a <code>@FromJson</code> adapter for <code>JSONObject</code> but the logs just say that the json is empty <code>{}</code> (where I would expect <code>{\"unknownKey1\": { ... etc ...}</code>)</p>\n\n<pre><code>   class Foo {\n\n        @Json(name = \"name\")\n        String name;\n        @Json(name = \"bar\")\n        Bar bar;\n\n        static class Bar {\n\n        }\n    }\n\nclass BarAdapter {\n\n    @FromJson\n    Bar fromJson(JSONObject json) {\n        Log.d(\"xxx\", \"got \" + json.toString());\n        return new Bar();\n    }\n}\n</code></pre>\n\n<p>Once I can get at the json inside bar, I can manually iterate it to add to a list or something (since I don't know how many items there will be).</p>\n\n<p>Using it like this:</p>\n\n<pre><code>         Moshi moshi = new Moshi.Builder()\n        .add(new BarAdapter())\n        .add(new LinkedHashMapConverter())\n        .build();\n</code></pre>\n\n<p>I also had to add the <code>LinkedHashMapConverter</code> to appease the moshi gods, but adding logs to it, its methods are never called (this might be a separate issue with my real json).</p>\n\n<p>any ideas?</p>\n"},{"tags":["java","mysql","jdbc","database-connection"],"comments":[{"owner":{"account_id":462886,"reputation":2853,"user_id":865448,"accept_rate":82,"display_name":"tostao"},"score":1,"creation_date":1682340100,"post_id":76091987,"comment_id":134194648,"body_markdown":"Can you connect from `mysql` command line client?","body":"Can you connect from <code>mysql</code> command line client?"},{"owner":{"account_id":17717155,"reputation":527,"user_id":12863192,"display_name":"Ishan"},"score":0,"creation_date":1682340521,"post_id":76091987,"comment_id":134194758,"body_markdown":"Try ```telnet 127.0.0.1 3306``` from the command line to make sure you can connect to port 3306 over TCP.  If this works without an error, that means MySQL is connecting on localhost over that port.  You may need to install ```telnet```, as it is an optional package. A Windows feature or a Linux package - based on your OS.  If this works fine, that means, there is no issue with connectivity to your DB.","body":"Try <code>telnet 127.0.0.1 3306</code> from the command line to make sure you can connect to port 3306 over TCP.  If this works without an error, that means MySQL is connecting on localhost over that port.  You may need to install <code>telnet</code>, as it is an optional package. A Windows feature or a Linux package - based on your OS.  If this works fine, that means, there is no issue with connectivity to your DB."},{"owner":{"account_id":28400150,"reputation":1,"user_id":21725084,"display_name":"Astruin"},"score":0,"creation_date":1682341635,"post_id":76091987,"comment_id":134195015,"body_markdown":"@tostao Yes it works.\n@Ishan With WSL I got `Unable to connect to remote host: Connection refused` and `Got timeout reading communication packets` with Windows cmd, so it looks like it cannot connect through TCP.","body":"@tostao Yes it works. @Ishan With WSL I got <code>Unable to connect to remote host: Connection refused</code> and <code>Got timeout reading communication packets</code> with Windows cmd, so it looks like it cannot connect through TCP."},{"owner":{"account_id":12743722,"reputation":19956,"user_id":12567365,"display_name":"andrewJames"},"score":0,"creation_date":1682341671,"post_id":76091987,"comment_id":134195027,"body_markdown":"Not an answer, just some notes: When you use `e.getMessage()`, you are throwing away most of the stack trace. Use `e.printStackTrace(System.err);` just for now, to get the full stack trace (but it&#39;s better to use a proper logging framework). Add the full stack trace to your question (as formatted text). You can also review the notes in [Connect Java to a MySQL database](https://stackoverflow.com/q/2839321/12567365).","body":"Not an answer, just some notes: When you use <code>e.getMessage()</code>, you are throwing away most of the stack trace. Use <code>e.printStackTrace(System.err);</code> just for now, to get the full stack trace (but it&#39;s better to use a proper logging framework). Add the full stack trace to your question (as formatted text). You can also review the notes in <a href=\"https://stackoverflow.com/q/2839321/12567365\">Connect Java to a MySQL database</a>."},{"owner":{"account_id":28400150,"reputation":1,"user_id":21725084,"display_name":"Astruin"},"score":0,"creation_date":1682342438,"post_id":76091987,"comment_id":134195212,"body_markdown":"@andrewJames MySQL Workbench works fine, I can connect to the db and see the tables. It&#39;s only jdbc. I updated my question with the stack trace. Concerning the link you sent, I already tried everything from it.","body":"@andrewJames MySQL Workbench works fine, I can connect to the db and see the tables. It&#39;s only jdbc. I updated my question with the stack trace. Concerning the link you sent, I already tried everything from it."},{"owner":{"account_id":213468,"reputation":103487,"user_id":466862,"display_name":"Mark Rotteveel"},"score":0,"creation_date":1682862458,"post_id":76091987,"comment_id":134278575,"body_markdown":"_&quot;Caused by: java.net.ConnectException: Connection refused&quot;_. MySQL isn&#39;t running, or the port is wrong, or it is actively blocked by a firewall.","body":"<i>&quot;Caused by: java.net.ConnectException: Connection refused&quot;</i>. MySQL isn&#39;t running, or the port is wrong, or it is actively blocked by a firewall."}],"owner":{"account_id":28400150,"reputation":1,"user_id":21725084,"display_name":"Astruin"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":1436,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"closed_date":1682862401,"answer_count":0,"score":0,"last_activity_date":1682862416,"creation_date":1682339961,"question_id":76091987,"body_markdown":"I&#39;m doing a group project with Java, JavaFX and MySQL, and I have a big problem when trying to connect to my database with JDBC. I have systematically this error thrown by DriverManager.getConnection() method :\r\n\r\n```\r\nCommunications link failure \r\n\r\nThe last packet sent successfully to the server was 0 milliseconds ago. The driver has not received any packets from the server.\r\n```\r\n\r\nEDIT: Here is the whole stack trace :\r\n```\r\ncom.mysql.cj.jdbc.exceptions.CommunicationsException: Communications link failure\r\n\r\nThe last packet sent successfully to the server was 0 milliseconds ago. The driver has not received any packets from the server.\r\n        at com.mysql.cj.jdbc.exceptions.SQLError.createCommunicationsException(SQLError.java:175)\r\n        at com.mysql.cj.jdbc.exceptions.SQLExceptionsMapping.translateException(SQLExceptionsMapping.java:64)\r\n        at com.mysql.cj.jdbc.ConnectionImpl.createNewIO(ConnectionImpl.java:825)\r\n        at com.mysql.cj.jdbc.ConnectionImpl.&lt;init&gt;(ConnectionImpl.java:446)\r\n        at com.mysql.cj.jdbc.ConnectionImpl.getInstance(ConnectionImpl.java:239)\r\n        at com.mysql.cj.jdbc.NonRegisteringDriver.connect(NonRegisteringDriver.java:188)\r\n        at java.sql/java.sql.DriverManager.getConnection(DriverManager.java:681)\r\n        at java.sql/java.sql.DriverManager.getConnection(DriverManager.java:252)\r\n        at controller.Controller.dbconnect(Controller.java:34)\r\n        at controller.Controller.&lt;init&gt;(Controller.java:18)\r\n        at App.start(App.java:15)\r\n        at javafx.graphics/com.sun.javafx.application.LauncherImpl.lambda$launchApplication1$9(LauncherImpl.java:847)\r\n        at javafx.graphics/com.sun.javafx.application.PlatformImpl.lambda$runAndWait$12(PlatformImpl.java:484)\r\n        at javafx.graphics/com.sun.javafx.application.PlatformImpl.lambda$runLater$10(PlatformImpl.java:457)\r\n        at java.base/java.security.AccessController.doPrivileged(AccessController.java:399)\r\n        at javafx.graphics/com.sun.javafx.application.PlatformImpl.lambda$runLater$11(PlatformImpl.java:456)\r\n        at javafx.graphics/com.sun.glass.ui.InvokeLaterDispatcher$Future.run(InvokeLaterDispatcher.java:96)\r\n        at javafx.graphics/com.sun.glass.ui.gtk.GtkApplication._runLoop(Native Method)\r\n        at javafx.graphics/com.sun.glass.ui.gtk.GtkApplication.lambda$runLoop$11(GtkApplication.java:290)\r\n        at java.base/java.lang.Thread.run(Thread.java:833)\r\nCaused by: com.mysql.cj.exceptions.CJCommunicationsException: Communications link failure\r\n\r\nThe last packet sent successfully to the server was 0 milliseconds ago. The driver has not received any packets from the server.\r\n        at java.base/jdk.internal.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)\r\n        at java.base/jdk.internal.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:77)\r\n        at java.base/jdk.internal.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)\r\n        at java.base/java.lang.reflect.Constructor.newInstanceWithCaller(Constructor.java:499)\r\n        at java.base/java.lang.reflect.Constructor.newInstance(Constructor.java:480)\r\n        at com.mysql.cj.exceptions.ExceptionFactory.createException(ExceptionFactory.java:62)\r\n        at com.mysql.cj.exceptions.ExceptionFactory.createException(ExceptionFactory.java:105)\r\n        at com.mysql.cj.exceptions.ExceptionFactory.createException(ExceptionFactory.java:150)\r\n        at com.mysql.cj.exceptions.ExceptionFactory.createCommunicationsException(ExceptionFactory.java:166)\r\n        at com.mysql.cj.protocol.a.NativeSocketConnection.connect(NativeSocketConnection.java:89)\r\n        at com.mysql.cj.NativeSession.connect(NativeSession.java:121)\r\n        at com.mysql.cj.jdbc.ConnectionImpl.connectOneTryOnly(ConnectionImpl.java:945)\r\n        at com.mysql.cj.jdbc.ConnectionImpl.createNewIO(ConnectionImpl.java:815)\r\n        ... 17 more\r\nCaused by: java.net.ConnectException: Connection refused\r\n        at java.base/sun.nio.ch.Net.connect0(Native Method)\r\n        at java.base/sun.nio.ch.Net.connect(Net.java:579)\r\n        at java.base/sun.nio.ch.Net.connect(Net.java:568)\r\n        at java.base/sun.nio.ch.NioSocketImpl.connect(NioSocketImpl.java:588)\r\n        at java.base/java.net.SocksSocketImpl.connect(SocksSocketImpl.java:327)\r\n        at java.base/java.net.Socket.connect(Socket.java:633)\r\n        at com.mysql.cj.protocol.StandardSocketFactory.connect(StandardSocketFactory.java:153)\r\n        at com.mysql.cj.protocol.a.NativeSocketConnection.connect(NativeSocketConnection.java:63)\r\n        ... 20 more\r\n```\r\n\r\nThe code throwing the error is :\r\n\r\n```Java\r\npublic Connection dbconnect() {\r\n    Connection conn = null;\r\n    try {\r\n      conn = DriverManager\r\n          .getConnection(\r\n              &quot;jdbc:mysql://127.0.0.1:3306/cookbook?user=root&amp;password=ABC&amp;useSSL=false&quot;);\r\n    } catch (SQLException e) {\r\n      System.out.println(e.getMessage());\r\n    }\r\n    return conn;\r\n  }\r\n```\r\n\r\n\r\nI&#39;m using VSCode in Windows 10 and a Debian WSL to compile. I installed MySQL Server, Workbench and Connector/J version 8.0.33.\r\n\r\n\r\nI already spent hours trying to fix that. It works perfectly for the other members of the group and I can connect to an online database (using [this](https://www.freemysqlhosting.net/)), so I can be sure that the problem comes from my machine. I found a lot of different possible causes and solutions online, so many that I could not enumerate them all but here are some :\r\n- Disabling firewall\r\n- Modify the jdbc URL in various ways\r\n- Modify the `my.ini` file\r\n- Reinstalling MySQL\r\n- Downgrading MySQL\r\n- Asserting MySQL has good permissions\r\n\r\n(Basically everything that is contained [there](https://stackoverflow.com/questions/6865538/solving-a-communications-link-failure-with-jdbc-and-mysql), and [there](https://stackoverflow.com/questions/2983248/com-mysql-jdbc-exceptions-jdbc4-communicationsexception-communications-link-fai).)\r\n\r\nNothing worked, I&#39;m running out of options and ideas, so maybe you can have a new solution I never tried.","title":"MySQL JDBC Error : Communications link failure","body":"<p>I'm doing a group project with Java, JavaFX and MySQL, and I have a big problem when trying to connect to my database with JDBC. I have systematically this error thrown by DriverManager.getConnection() method :</p>\n<pre><code>Communications link failure \n\nThe last packet sent successfully to the server was 0 milliseconds ago. The driver has not received any packets from the server.\n</code></pre>\n<p>EDIT: Here is the whole stack trace :</p>\n<pre><code>com.mysql.cj.jdbc.exceptions.CommunicationsException: Communications link failure\n\nThe last packet sent successfully to the server was 0 milliseconds ago. The driver has not received any packets from the server.\n        at com.mysql.cj.jdbc.exceptions.SQLError.createCommunicationsException(SQLError.java:175)\n        at com.mysql.cj.jdbc.exceptions.SQLExceptionsMapping.translateException(SQLExceptionsMapping.java:64)\n        at com.mysql.cj.jdbc.ConnectionImpl.createNewIO(ConnectionImpl.java:825)\n        at com.mysql.cj.jdbc.ConnectionImpl.&lt;init&gt;(ConnectionImpl.java:446)\n        at com.mysql.cj.jdbc.ConnectionImpl.getInstance(ConnectionImpl.java:239)\n        at com.mysql.cj.jdbc.NonRegisteringDriver.connect(NonRegisteringDriver.java:188)\n        at java.sql/java.sql.DriverManager.getConnection(DriverManager.java:681)\n        at java.sql/java.sql.DriverManager.getConnection(DriverManager.java:252)\n        at controller.Controller.dbconnect(Controller.java:34)\n        at controller.Controller.&lt;init&gt;(Controller.java:18)\n        at App.start(App.java:15)\n        at javafx.graphics/com.sun.javafx.application.LauncherImpl.lambda$launchApplication1$9(LauncherImpl.java:847)\n        at javafx.graphics/com.sun.javafx.application.PlatformImpl.lambda$runAndWait$12(PlatformImpl.java:484)\n        at javafx.graphics/com.sun.javafx.application.PlatformImpl.lambda$runLater$10(PlatformImpl.java:457)\n        at java.base/java.security.AccessController.doPrivileged(AccessController.java:399)\n        at javafx.graphics/com.sun.javafx.application.PlatformImpl.lambda$runLater$11(PlatformImpl.java:456)\n        at javafx.graphics/com.sun.glass.ui.InvokeLaterDispatcher$Future.run(InvokeLaterDispatcher.java:96)\n        at javafx.graphics/com.sun.glass.ui.gtk.GtkApplication._runLoop(Native Method)\n        at javafx.graphics/com.sun.glass.ui.gtk.GtkApplication.lambda$runLoop$11(GtkApplication.java:290)\n        at java.base/java.lang.Thread.run(Thread.java:833)\nCaused by: com.mysql.cj.exceptions.CJCommunicationsException: Communications link failure\n\nThe last packet sent successfully to the server was 0 milliseconds ago. The driver has not received any packets from the server.\n        at java.base/jdk.internal.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)\n        at java.base/jdk.internal.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:77)\n        at java.base/jdk.internal.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)\n        at java.base/java.lang.reflect.Constructor.newInstanceWithCaller(Constructor.java:499)\n        at java.base/java.lang.reflect.Constructor.newInstance(Constructor.java:480)\n        at com.mysql.cj.exceptions.ExceptionFactory.createException(ExceptionFactory.java:62)\n        at com.mysql.cj.exceptions.ExceptionFactory.createException(ExceptionFactory.java:105)\n        at com.mysql.cj.exceptions.ExceptionFactory.createException(ExceptionFactory.java:150)\n        at com.mysql.cj.exceptions.ExceptionFactory.createCommunicationsException(ExceptionFactory.java:166)\n        at com.mysql.cj.protocol.a.NativeSocketConnection.connect(NativeSocketConnection.java:89)\n        at com.mysql.cj.NativeSession.connect(NativeSession.java:121)\n        at com.mysql.cj.jdbc.ConnectionImpl.connectOneTryOnly(ConnectionImpl.java:945)\n        at com.mysql.cj.jdbc.ConnectionImpl.createNewIO(ConnectionImpl.java:815)\n        ... 17 more\nCaused by: java.net.ConnectException: Connection refused\n        at java.base/sun.nio.ch.Net.connect0(Native Method)\n        at java.base/sun.nio.ch.Net.connect(Net.java:579)\n        at java.base/sun.nio.ch.Net.connect(Net.java:568)\n        at java.base/sun.nio.ch.NioSocketImpl.connect(NioSocketImpl.java:588)\n        at java.base/java.net.SocksSocketImpl.connect(SocksSocketImpl.java:327)\n        at java.base/java.net.Socket.connect(Socket.java:633)\n        at com.mysql.cj.protocol.StandardSocketFactory.connect(StandardSocketFactory.java:153)\n        at com.mysql.cj.protocol.a.NativeSocketConnection.connect(NativeSocketConnection.java:63)\n        ... 20 more\n</code></pre>\n<p>The code throwing the error is :</p>\n<pre><code>public Connection dbconnect() {\n    Connection conn = null;\n    try {\n      conn = DriverManager\n          .getConnection(\n              &quot;jdbc:mysql://127.0.0.1:3306/cookbook?user=root&amp;password=ABC&amp;useSSL=false&quot;);\n    } catch (SQLException e) {\n      System.out.println(e.getMessage());\n    }\n    return conn;\n  }\n</code></pre>\n<p>I'm using VSCode in Windows 10 and a Debian WSL to compile. I installed MySQL Server, Workbench and Connector/J version 8.0.33.</p>\n<p>I already spent hours trying to fix that. It works perfectly for the other members of the group and I can connect to an online database (using <a href=\"https://www.freemysqlhosting.net/\" rel=\"nofollow noreferrer\">this</a>), so I can be sure that the problem comes from my machine. I found a lot of different possible causes and solutions online, so many that I could not enumerate them all but here are some :</p>\n<ul>\n<li>Disabling firewall</li>\n<li>Modify the jdbc URL in various ways</li>\n<li>Modify the <code>my.ini</code> file</li>\n<li>Reinstalling MySQL</li>\n<li>Downgrading MySQL</li>\n<li>Asserting MySQL has good permissions</li>\n</ul>\n<p>(Basically everything that is contained <a href=\"https://stackoverflow.com/questions/6865538/solving-a-communications-link-failure-with-jdbc-and-mysql\">there</a>, and <a href=\"https://stackoverflow.com/questions/2983248/com-mysql-jdbc-exceptions-jdbc4-communicationsexception-communications-link-fai\">there</a>.)</p>\n<p>Nothing worked, I'm running out of options and ideas, so maybe you can have a new solution I never tried.</p>\n"},{"tags":["java","eclipse","configuration"],"comments":[{"owner":{"account_id":3159259,"reputation":109666,"user_id":2670892,"display_name":"greg-449"},"score":1,"creation_date":1682864931,"post_id":76141448,"comment_id":134278931,"body_markdown":"The Shell that you pass to `DebugUITools.openLaunchConfigurationDialogOnGroup` is just the parent shell, it does not change the way the displayed dialog works - it will always be modal regardless of the parent.","body":"The Shell that you pass to <code>DebugUITools.openLaunchConfigurationDialogOnGroup</code> is just the parent shell, it does not change the way the displayed dialog works - it will always be modal regardless of the parent."},{"owner":{"account_id":14521911,"reputation":25,"user_id":10489361,"display_name":"Valentina Nikolenko"},"score":0,"creation_date":1682865745,"post_id":76141448,"comment_id":134279039,"body_markdown":"@greg-449 if so, how am I able to change this functionality and make the shell that is created to be MODELESS? since the DebugUITools.openLaunchConfigurationDialogOnGroup is an Eclipse function which I cannot adjust. I though the shell it gets can affect its behavior.","body":"@greg-449 if so, how am I able to change this functionality and make the shell that is created to be MODELESS? since the DebugUITools.openLaunchConfigurationDialogOnGroup is an Eclipse function which I cannot adjust. I though the shell it gets can affect its behavior."},{"owner":{"account_id":3159259,"reputation":109666,"user_id":2670892,"display_name":"greg-449"},"score":1,"creation_date":1682866099,"post_id":76141448,"comment_id":134279085,"body_markdown":"You can&#39;t change the mode with anything you do on this call. You would have to extend the **internal**  LaunchConfigurationsDialog and change the shell style and the `setBlockOnOpen` settings - but since this is an internal dialog it is against the rules to do that. Since the dialog is not designed to be modeless it might not work properly anyway.","body":"You can&#39;t change the mode with anything you do on this call. You would have to extend the <b>internal</b>  LaunchConfigurationsDialog and change the shell style and the <code>setBlockOnOpen</code> settings - but since this is an internal dialog it is against the rules to do that. Since the dialog is not designed to be modeless it might not work properly anyway."},{"owner":{"account_id":14521911,"reputation":25,"user_id":10489361,"display_name":"Valentina Nikolenko"},"score":0,"creation_date":1682866476,"post_id":76141448,"comment_id":134279144,"body_markdown":"@greg-449 thank you for the explanation. Could you please clarify why it is against the rules? (or refer me to a source explaining that so I could understand it fully).\nAlso, why if it is not designed to be modeless, it wont work? is there any reason why it is designed that way? (again, any refer to a piece of information to deepen my understanding of it would be great!)\nagain, thank you.","body":"@greg-449 thank you for the explanation. Could you please clarify why it is against the rules? (or refer me to a source explaining that so I could understand it fully). Also, why if it is not designed to be modeless, it wont work? is there any reason why it is designed that way? (again, any refer to a piece of information to deepen my understanding of it would be great!) again, thank you."},{"owner":{"account_id":3159259,"reputation":109666,"user_id":2670892,"display_name":"greg-449"},"score":1,"creation_date":1682866687,"post_id":76141448,"comment_id":134279172,"body_markdown":"Any class with **internal** in the package name is off limits. It can be changed or even removed at any time - this has happened in the past and caused a lot of problem for people who ignored the rules  - https://www.eclipse.org/articles/Article-API-Use/index.html LaunchConfigurationDialog is in the org.eclipse.debug.internal.ui.launchConfigurations package","body":"Any class with <b>internal</b> in the package name is off limits. It can be changed or even removed at any time - this has happened in the past and caused a lot of problem for people who ignored the rules  - <a href=\"https://www.eclipse.org/articles/Article-API-Use/index.html\" rel=\"nofollow noreferrer\">eclipse.org/articles/Article-API-Use/index.html</a> LaunchConfigurationDialog is in the org.eclipse.debug.internal.ui.launchConfigurations package"},{"owner":{"account_id":3159259,"reputation":109666,"user_id":2670892,"display_name":"greg-449"},"score":0,"creation_date":1682930242,"post_id":76141448,"comment_id":134285480,"body_markdown":"A modal dialog is the normal default. Modal dialogs can assume that nothing will change while the dialog is displayed. If the dialog is modeless the user can use other menus and dialogs to change things the dialog is relying on. For the launch configuration dialog that might mean the launch config being changed by something else.","body":"A modal dialog is the normal default. Modal dialogs can assume that nothing will change while the dialog is displayed. If the dialog is modeless the user can use other menus and dialogs to change things the dialog is relying on. For the launch configuration dialog that might mean the launch config being changed by something else."}],"owner":{"account_id":14521911,"reputation":25,"user_id":10489361,"display_name":"Valentina Nikolenko"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":25,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1682861969,"creation_date":1682860401,"question_id":76141448,"body_markdown":"I am developing a plugin based on Eclipse, using Java.\r\nI am using there the DebugUITools.openLaunchConfigurationDialogOnGroup and creating a dialog with a shell window, a structureSelection and a groupIdentifier.\r\nfor the shell passed to the function, I used the `new Shell(getActiveShell(), SWT.MODELESS)`\r\nI used the `SWT.MODELESS` to make this shell work in a mode that wont block the other windows\\views.\r\nI want the user to still be able to use the editor while this dialog is open.\r\n\r\nfor some reason, the SWT.MODELESS doesn&#39;t affect in any way and while the dialog is open, all other windows and particularly the editor is disabled for any kind of edit\\interaction.\r\n\r\nI tried to work on a different UI thread (I thought maybe this is blocking the main UI thread, but it didn&#39;t help either)\r\n\r\nAm I using wrongly the SWT.MODELESS? maybe I am missing more configurations to make this dialog not block the other windows?\r\nplease advise, Thank you! ","title":"configuration dialog is blocking access to editor - how to make this dialog MODELESS? (Java, Eclipse plugin)","body":"<p>I am developing a plugin based on Eclipse, using Java.\nI am using there the DebugUITools.openLaunchConfigurationDialogOnGroup and creating a dialog with a shell window, a structureSelection and a groupIdentifier.\nfor the shell passed to the function, I used the <code>new Shell(getActiveShell(), SWT.MODELESS)</code>\nI used the <code>SWT.MODELESS</code> to make this shell work in a mode that wont block the other windows\\views.\nI want the user to still be able to use the editor while this dialog is open.</p>\n<p>for some reason, the SWT.MODELESS doesn't affect in any way and while the dialog is open, all other windows and particularly the editor is disabled for any kind of edit\\interaction.</p>\n<p>I tried to work on a different UI thread (I thought maybe this is blocking the main UI thread, but it didn't help either)</p>\n<p>Am I using wrongly the SWT.MODELESS? maybe I am missing more configurations to make this dialog not block the other windows?\nplease advise, Thank you!</p>\n"},{"tags":["java","javafx","build","icons"],"comments":[{"owner":{"account_id":1180113,"reputation":152325,"user_id":1155209,"display_name":"jewelsea"},"score":1,"creation_date":1682872345,"post_id":76141529,"comment_id":134279976,"body_markdown":"Run `jar tvf` on the jar file.  See what is in it.","body":"Run <code>jar tvf</code> on the jar file.  See what is in it."},{"owner":{"account_id":1180113,"reputation":152325,"user_id":1155209,"display_name":"jewelsea"},"score":1,"creation_date":1682872703,"post_id":76141529,"comment_id":134280012,"body_markdown":"f it is as expected, review the [eden JavaFX resource guide](https://edencoding.com/where-to-put-resource-files-in-javafx/), which provides working examples of lookups for css image resources.  It may not make a difference, but is the app modular?  If so, you could try adjusting the path to something in the module or removing modularity (delete module-info.java).","body":"f it is as expected, review the <a href=\"https://edencoding.com/where-to-put-resource-files-in-javafx/\" rel=\"nofollow noreferrer\">eden JavaFX resource guide</a>, which provides working examples of lookups for css image resources.  It may not make a difference, but is the app modular?  If so, you could try adjusting the path to something in the module or removing modularity (delete module-info.java)."},{"owner":{"account_id":23321320,"reputation":1,"user_id":17399168,"display_name":"N_C_Pub"},"score":0,"creation_date":1682942642,"post_id":76141529,"comment_id":134287239,"body_markdown":"@jewelsea My jar tvf returns over 9000 lines. None of which seems to be an error. Just listing of all possible files in the project I guess. All the files I edited are present including the png files I added. \n\nI&#39;ve read the different ways to include resources from the link you provided, but didn&#39;t find an error. \nThe search-bar in the project root folder didn&#39;t show any files that include a phrase &quot;module&quot; in it.","body":"@jewelsea My jar tvf returns over 9000 lines. None of which seems to be an error. Just listing of all possible files in the project I guess. All the files I edited are present including the png files I added.   I&#39;ve read the different ways to include resources from the link you provided, but didn&#39;t find an error.  The search-bar in the project root folder didn&#39;t show any files that include a phrase &quot;module&quot; in it."},{"owner":{"account_id":1180113,"reputation":152325,"user_id":1155209,"display_name":"jewelsea"},"score":0,"creation_date":1682966541,"post_id":76141529,"comment_id":134292021,"body_markdown":"I have no other suggestions.","body":"I have no other suggestions."},{"owner":{"account_id":2518243,"reputation":203472,"user_id":2189127,"display_name":"James_D"},"score":0,"creation_date":1683061368,"post_id":76141529,"comment_id":134308301,"body_markdown":"Search the results of the `jar tfv ` command to see if the image file is there, and if it is in the expected location. On UNIX-like systems you can do something like `jar tfv jarfile | grep imagefile`, replacing `jarfile` and `imagefile` with the actual file names.","body":"Search the results of the <code>jar tfv </code> command to see if the image file is there, and if it is in the expected location. On UNIX-like systems you can do something like <code>jar tfv jarfile | grep imagefile</code>, replacing <code>jarfile</code> and <code>imagefile</code> with the actual file names."},{"owner":{"account_id":23321320,"reputation":1,"user_id":17399168,"display_name":"N_C_Pub"},"score":0,"creation_date":1683383037,"post_id":76141529,"comment_id":134360048,"body_markdown":"@James_D \nThe images are in expected locations. I&#39;ve seen then in the listings fortunately.","body":"@James_D  The images are in expected locations. I&#39;ve seen then in the listings fortunately."}],"owner":{"account_id":23321320,"reputation":1,"user_id":17399168,"display_name":"N_C_Pub"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":41,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1682861572,"creation_date":1682861572,"question_id":76141529,"body_markdown":"I&#39;m editing a Java GUI program, that manages a group of games and a DIY controller to work in accord. I added a new icon to &quot;GamesScreen.fxml&quot;, added images to appropriate folder and added a few lines to the controller file &quot;GameScreenController.java&quot; as well as write a few lines to &quot;GameScreen.css&quot;\r\n\r\nWhen I run the program using the button inside the IDE (NetBeans 17) it works flawlessly. However when I Build the program and run it from the .jar file the new icon does not show up. (But when I click the place where it should be, the appropriate functionality starts)\r\nImages that other icons use are in the same folder as the new ones. So shouldn&#39;t be any issue with wrong paths. \r\n\r\nI&#39;ve tried to delete the target image folder to see if the rest of the icons will vanish too, but everything stayed the same.  \r\n\r\nWhat might be the problem ? I really don&#39;t have any idea. \r\n\r\n\r\nGameScreenController.java\r\n```\r\n@FXML\r\n    private void NewGameHandling(ActionEvent event) {\r\n        currentInterpreter = new NewGameKeyboardInterpreter();\r\n        showInterpreterDialogBox();\r\n    }\r\n```\r\nGameScreen.css\r\n```\r\n#NewGameButton {\r\n    -fx-background-image: url(&quot;/images/gameIcons/New_Game.png&quot;);\r\n    -fx-background-position: center center;\r\n    -fx-background-radius: 0;\r\n    -fx-background-color: transparent;\r\n    -fx-background-size: cover;\r\n    -fx-border-width: 0;\r\n}\r\n\r\n#NewGameButton:hover {\r\n    -fx-background-image: url(&quot;/images/gameIcons/New_Game_Focused.png&quot;);\r\n }\r\n```\r\nGamesScreen.fxml\r\n```\r\n&lt;HBox id=&quot;gamesHBox&quot; alignment=&quot;CENTER&quot; layoutX=&quot;90.0&quot; layoutY=&quot;422.0&quot; prefHeight=&quot;288.0&quot; prefWidth=&quot;1068.0&quot; spacing=&quot;70.0&quot;&gt;\r\n         &lt;children&gt;\r\n            &lt;Button id=&quot;NewGameButton&quot; mnemonicParsing=&quot;false&quot; onAction=&quot;#NewGameHandling&quot; prefHeight=&quot;152.0&quot; prefWidth=&quot;149.0&quot; stylesheets=&quot;@../styles/gameScreen.css&quot; /&gt;\r\n         &lt;/children&gt;\r\n      &lt;/HBox&gt;\r\n```\r\n\r\n\r\nI shown only the relevant code snippets for reference. Let me know if you need full files. \r\n\r\n\r\n","title":"JavaFX Icon shows itself when I run the program from IDE, but refuses to show up, when I run the program from the target build","body":"<p>I'm editing a Java GUI program, that manages a group of games and a DIY controller to work in accord. I added a new icon to &quot;GamesScreen.fxml&quot;, added images to appropriate folder and added a few lines to the controller file &quot;GameScreenController.java&quot; as well as write a few lines to &quot;GameScreen.css&quot;</p>\n<p>When I run the program using the button inside the IDE (NetBeans 17) it works flawlessly. However when I Build the program and run it from the .jar file the new icon does not show up. (But when I click the place where it should be, the appropriate functionality starts)\nImages that other icons use are in the same folder as the new ones. So shouldn't be any issue with wrong paths.</p>\n<p>I've tried to delete the target image folder to see if the rest of the icons will vanish too, but everything stayed the same.</p>\n<p>What might be the problem ? I really don't have any idea.</p>\n<p>GameScreenController.java</p>\n<pre><code>@FXML\n    private void NewGameHandling(ActionEvent event) {\n        currentInterpreter = new NewGameKeyboardInterpreter();\n        showInterpreterDialogBox();\n    }\n</code></pre>\n<p>GameScreen.css</p>\n<pre><code>#NewGameButton {\n    -fx-background-image: url(&quot;/images/gameIcons/New_Game.png&quot;);\n    -fx-background-position: center center;\n    -fx-background-radius: 0;\n    -fx-background-color: transparent;\n    -fx-background-size: cover;\n    -fx-border-width: 0;\n}\n\n#NewGameButton:hover {\n    -fx-background-image: url(&quot;/images/gameIcons/New_Game_Focused.png&quot;);\n }\n</code></pre>\n<p>GamesScreen.fxml</p>\n<pre><code>&lt;HBox id=&quot;gamesHBox&quot; alignment=&quot;CENTER&quot; layoutX=&quot;90.0&quot; layoutY=&quot;422.0&quot; prefHeight=&quot;288.0&quot; prefWidth=&quot;1068.0&quot; spacing=&quot;70.0&quot;&gt;\n         &lt;children&gt;\n            &lt;Button id=&quot;NewGameButton&quot; mnemonicParsing=&quot;false&quot; onAction=&quot;#NewGameHandling&quot; prefHeight=&quot;152.0&quot; prefWidth=&quot;149.0&quot; stylesheets=&quot;@../styles/gameScreen.css&quot; /&gt;\n         &lt;/children&gt;\n      &lt;/HBox&gt;\n</code></pre>\n<p>I shown only the relevant code snippets for reference. Let me know if you need full files.</p>\n"},{"tags":["java","jco"],"comments":[{"owner":{"account_id":542551,"reputation":10395,"user_id":911419,"accept_rate":79,"display_name":"Suncatcher"},"score":0,"creation_date":1585142561,"post_id":60705985,"comment_id":107658414,"body_markdown":"Share the code how do you call BAPI, and what BAPI","body":"Share the code how do you call BAPI, and what BAPI"}],"answers":[{"tags":[],"owner":{"account_id":4789,"reputation":16106,"user_id":7381,"display_name":"Lanzelot"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1585912131,"creation_date":1585675732,"answer_id":60956487,"question_id":60705985,"body_markdown":"A functionality like this would have to be implemented in the BAPI itself. In fact, some BAPIs have a WHERE clause that allows to limit the result set that the BAPI will return.\r\n\r\nBut &quot;from the outside&quot; (i.e. from the JCo layer) you cannot influence the result that the BAPI will return. At least not on such a fine granular level: there is the feature to &quot;turn off&quot; an entire table, which can be used, if you call a BAPI that returns dozens of tables (and spends lots of time selecting the data for them from the database), but you are interested only in a few of these tables. Then you can set the other tables to &quot;inactive&quot;, and the RFC layer of the backend will only return the data for the active tables. (And if the BAPI is programmed in an intelligent way, it determines beforehand, which tables are active and skips the SELECT statements for the inactive ones.)\r\n\r\nHere is a bit of sample code, that deactivates a BAPI&#39;s table with name &quot;TABLE_NAME&quot;:\r\n\r\n    JCoFunction myBapi = ...;\r\n    JCoParameterList tables = myBapi.getTableParameterList();\r\n    tables.setActive(&quot;TABLE_NAME&quot;, false);\r\n    // Now you can execute myBapi, and the backend system will not return \r\n    // data for the table named TABLE_NAME.\r\n\r\n","title":"Limit number of records to be received from SAP using JCo library","body":"<p>A functionality like this would have to be implemented in the BAPI itself. In fact, some BAPIs have a WHERE clause that allows to limit the result set that the BAPI will return.</p>\n\n<p>But \"from the outside\" (i.e. from the JCo layer) you cannot influence the result that the BAPI will return. At least not on such a fine granular level: there is the feature to \"turn off\" an entire table, which can be used, if you call a BAPI that returns dozens of tables (and spends lots of time selecting the data for them from the database), but you are interested only in a few of these tables. Then you can set the other tables to \"inactive\", and the RFC layer of the backend will only return the data for the active tables. (And if the BAPI is programmed in an intelligent way, it determines beforehand, which tables are active and skips the SELECT statements for the inactive ones.)</p>\n\n<p>Here is a bit of sample code, that deactivates a BAPI's table with name \"TABLE_NAME\":</p>\n\n<pre><code>JCoFunction myBapi = ...;\nJCoParameterList tables = myBapi.getTableParameterList();\ntables.setActive(\"TABLE_NAME\", false);\n// Now you can execute myBapi, and the backend system will not return \n// data for the table named TABLE_NAME.\n</code></pre>\n"}],"owner":{"account_id":7346011,"reputation":9,"user_id":5593674,"display_name":"Rajan"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":241,"favorite_count":0,"down_vote_count":2,"up_vote_count":1,"accepted_answer_id":60956487,"answer_count":1,"score":-1,"last_activity_date":1682860693,"creation_date":1584361472,"question_id":60705985,"body_markdown":"Suppose there are 100 records in one of the SAP tables and I want to access only 5 of them. When I call for BAPI function execution, it brings all 100 records in memory and then only I can iterate on them.\r\n\r\nHow to limit records to 5 before I execute BAPI function?\r\n\r\nI cannot ask client to limit number of records in table itself, so I have code it using JCo library.","title":"Limit number of records to be received from SAP using JCo library","body":"<p>Suppose there are 100 records in one of the SAP tables and I want to access only 5 of them. When I call for BAPI function execution, it brings all 100 records in memory and then only I can iterate on them.</p>\n<p>How to limit records to 5 before I execute BAPI function?</p>\n<p>I cannot ask client to limit number of records in table itself, so I have code it using JCo library.</p>\n"},{"tags":["java","wildfly","jco"],"comments":[{"owner":{"account_id":3129274,"reputation":591,"user_id":2647496,"display_name":"ErinsMatthew"},"score":0,"creation_date":1603990181,"post_id":61498092,"comment_id":114217126,"body_markdown":"Did you ever get this resolved? I am facing a similar issue.","body":"Did you ever get this resolved? I am facing a similar issue."}],"owner":{"account_id":12810677,"reputation":569,"user_id":9269017,"display_name":"kk luo"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":728,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1682860581,"creation_date":1588151319,"question_id":61498092,"body_markdown":"I&#39;m using SAP JCo to connect to SAP system from a WildFly 11 server. First I create a war using it and it work. Then I create another ear and after deployment both not working. The error code is below.\r\n\r\n&gt;    2020-04-29 08:52:46,433 INFO  [org.directwebremoting.log.accessLog] (default task-74) Method \r\n    execution failed: : java.lang.ExceptionInInitializerError: JCo initialization failed with \r\n    java.lang.UnsatisfiedLinkError: Native Library D:\\BPM\\sapjco30\\sapjco3.dll already loaded in another` \r\n    classloader    \r\n\r\nI did some research and found the error may caused by including `sapjco3.jar` in deployment assembly. So I remove the jar from assembly and put it in the `standalone\\deployments` folder.\r\n\r\nThen I create a `Jboss-deployment-structure.xml` as below and put it in the `WebContent\\META-INF` folder for both project.\r\n\r\n    &lt;jboss-deployment-structure xmlns=&quot;urn:jboss:deployment-structure:1.2&quot;&gt;\r\n    \t&lt;!-- Make sub deployments isolated by default, so they cannot see each others classes without a Class-Path entry --&gt;\r\n    \t&lt;ear-subdeployments-isolated&gt;false&lt;/ear-subdeployments-isolated&gt;\r\n    \t&lt;!-- This corresponds to the top level deployment. For a war this is the war&#39;s module, for an ear --&gt;\r\n    \t&lt;!-- This is the top level ear module, which contains all the classes in the EAR&#39;s lib folder     --&gt;\r\n    \t&lt;deployment&gt;\r\n    \t\t&lt;exclusions&gt;\r\n    \t\t\t&lt;module name=&quot;org.apache.log4j&quot; /&gt;\r\n    \t\t&lt;/exclusions&gt;\r\n    \t\t&lt;!-- This allows you to define additional dependencies, it is the same as using the Dependencies: manifest attribute --&gt;\r\n    \t\t&lt;dependencies&gt;\r\n    \t\t\t&lt;module name=&quot;deployment.nana-app.ear&quot; export=&quot;true&quot; /&gt;\r\n    \t\t\t&lt;module name=&quot;deployment.sapjco3.jar&quot; export=&quot;true&quot; /&gt;\r\n    \t\t&lt;/dependencies&gt;\r\n    \t\t&lt;!-- These add additional classes to the module. In this case it is the same as including the jar in the EAR&#39;s lib directory --&gt;\r\n    \t\t&lt;resources&gt;\r\n    \t\t&lt;/resources&gt;\r\n    \t&lt;/deployment&gt;\r\n    &lt;/jboss-deployment-structure&gt;\r\n\r\nThis time another error appeared\r\n\r\n&gt; ```\r\n&gt; 2020-04-29 16:46:03,093 INFO  [org.directwebremoting.log.accessLog] (default task-42) \r\n&gt; Method execution failed: : java.lang.NoClassDefFoundError: Could not initialize\r\n&gt; class com.sap.conn.jco.JCo\r\n&gt;  \tat com.sap.conn.jco.JCoDestinationManager.getDestination(JCoDestinationManager.java:77)\r\n&gt;  \tat com.SCOfetch.JCOtest.step4QueryTable(JCOtest.java:264)\r\n&gt;  \tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n&gt;  \tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\r\n&gt;  \tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n&gt;  \tat java.lang.reflect.Method.invoke(Method.java:498)\r\n&gt;  \tat org.directwebremoting.impl.CreatorModule$1.doFilter(CreatorModule.java:172)\r\n&gt;  \tat org.directwebremoting.impl.CreatorModule.executeMethod(CreatorModule.java:184)\r\n  ```\r\n\r\nLooks like server can&#39;t locate the Jco this time. I guess it&#39;s the issue of my Jboss xml. Then what&#39;s the correct format? Can someone help? Thanks.\r\n","title":"sapjco3.dll already loaded in another classloader error","body":"<p>I'm using SAP JCo to connect to SAP system from a WildFly 11 server. First I create a war using it and it work. Then I create another ear and after deployment both not working. The error code is below.</p>\n<blockquote>\n<p>2020-04-29 08:52:46,433 INFO  [org.directwebremoting.log.accessLog] (default task-74) Method\nexecution failed: : java.lang.ExceptionInInitializerError: JCo initialization failed with\njava.lang.UnsatisfiedLinkError: Native Library D:\\BPM\\sapjco30\\sapjco3.dll already loaded in another`\nclassloader</p>\n</blockquote>\n<p>I did some research and found the error may caused by including <code>sapjco3.jar</code> in deployment assembly. So I remove the jar from assembly and put it in the <code>standalone\\deployments</code> folder.</p>\n<p>Then I create a <code>Jboss-deployment-structure.xml</code> as below and put it in the <code>WebContent\\META-INF</code> folder for both project.</p>\n<pre><code>&lt;jboss-deployment-structure xmlns=&quot;urn:jboss:deployment-structure:1.2&quot;&gt;\n    &lt;!-- Make sub deployments isolated by default, so they cannot see each others classes without a Class-Path entry --&gt;\n    &lt;ear-subdeployments-isolated&gt;false&lt;/ear-subdeployments-isolated&gt;\n    &lt;!-- This corresponds to the top level deployment. For a war this is the war's module, for an ear --&gt;\n    &lt;!-- This is the top level ear module, which contains all the classes in the EAR's lib folder     --&gt;\n    &lt;deployment&gt;\n        &lt;exclusions&gt;\n            &lt;module name=&quot;org.apache.log4j&quot; /&gt;\n        &lt;/exclusions&gt;\n        &lt;!-- This allows you to define additional dependencies, it is the same as using the Dependencies: manifest attribute --&gt;\n        &lt;dependencies&gt;\n            &lt;module name=&quot;deployment.nana-app.ear&quot; export=&quot;true&quot; /&gt;\n            &lt;module name=&quot;deployment.sapjco3.jar&quot; export=&quot;true&quot; /&gt;\n        &lt;/dependencies&gt;\n        &lt;!-- These add additional classes to the module. In this case it is the same as including the jar in the EAR's lib directory --&gt;\n        &lt;resources&gt;\n        &lt;/resources&gt;\n    &lt;/deployment&gt;\n&lt;/jboss-deployment-structure&gt;\n</code></pre>\n<p>This time another error appeared</p>\n<blockquote>\n<pre><code>2020-04-29 16:46:03,093 INFO  [org.directwebremoting.log.accessLog] (default task-42) \nMethod execution failed: : java.lang.NoClassDefFoundError: Could not initialize\nclass com.sap.conn.jco.JCo\n  at com.sap.conn.jco.JCoDestinationManager.getDestination(JCoDestinationManager.java:77)\n  at com.SCOfetch.JCOtest.step4QueryTable(JCOtest.java:264)\n  at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n  at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\n  at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n  at java.lang.reflect.Method.invoke(Method.java:498)\n  at org.directwebremoting.impl.CreatorModule$1.doFilter(CreatorModule.java:172)\n  at org.directwebremoting.impl.CreatorModule.executeMethod(CreatorModule.java:184)\n</code></pre>\n</blockquote>\n<pre><code>\nLooks like server can't locate the Jco this time. I guess it's the issue of my Jboss xml. Then what's the correct format? Can someone help? Thanks.\n</code></pre>\n"},{"tags":["java","jco","sapjco3"],"answers":[{"tags":[],"owner":{"account_id":306692,"reputation":5903,"user_id":617581,"display_name":"Dirk Trilsbeek"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1590141164,"creation_date":1590141164,"answer_id":61952314,"question_id":61952000,"body_markdown":"`JCoParameterList` contains a list of `JCoParameterField` instances. `JCoParameterField` in turn inherits from `JCoField`, which gives you methods to set or get the parameter value. `JCoParameterList` allows you to iterate through the list of parameters, check what kind of parameter they are, get their value etc.\r\n\r\n    JCoParameterList parameters = function.getImportParameterList();\r\n    JCoParameterFieldIterator it = parameters.getParameterFieldIterator();\r\n    while (it.hasNextField()) {\r\n        JCoParameterField field = it.nextParameterField();\r\n        // field.getName() gives you the name\r\n        // field.getString() gives you the parameter value as string\r\n        // field.getExtendedFieldMetaData() gives you the field metadata\r\n\r\n    }","title":"Reflection of FM parameters in JCo","body":"<p><code>JCoParameterList</code> contains a list of <code>JCoParameterField</code> instances. <code>JCoParameterField</code> in turn inherits from <code>JCoField</code>, which gives you methods to set or get the parameter value. <code>JCoParameterList</code> allows you to iterate through the list of parameters, check what kind of parameter they are, get their value etc.</p>\n\n<pre><code>JCoParameterList parameters = function.getImportParameterList();\nJCoParameterFieldIterator it = parameters.getParameterFieldIterator();\nwhile (it.hasNextField()) {\n    JCoParameterField field = it.nextParameterField();\n    // field.getName() gives you the name\n    // field.getString() gives you the parameter value as string\n    // field.getExtendedFieldMetaData() gives you the field metadata\n\n}\n</code></pre>\n"}],"owner":{"account_id":18652244,"reputation":33,"user_id":13595442,"display_name":"Andrew"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":443,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":61952314,"answer_count":1,"score":1,"last_activity_date":1682860235,"creation_date":1590140179,"question_id":61952000,"body_markdown":"I have a problem with the dynamic receipt of the list of parameters and their values when calling the Function Module (with `DESTINATION` parameter as SAP JCo Server) and then processing it using Java (in SAP JCo Server).\r\n\r\nThe point is that I need a dynamic way to get information in JCo Server (using Java) about what SAP RFC function and with what parameters (Importing, Exporting, Changing and Tables) was called in SAP (because my JCo Server server &quot;listens&quot; for SAP RFC calls and I have to store information about these calls from SAP).\r\n\r\nI know that (for example for Importing Parameters) using command: \r\n\r\n    JCoParameterList ParameterList = function.getImportParameterList(); \r\n\r\nin Java I can receive this data, but how to deal with this variable of type `JCoParameterList`? I.e. how can I get information from this variable `ParameterList` on the name of the parameters, their types and the values with which they were called in SAP? \r\n\r\nI will be grateful for any suggestions on how in Java we can retrieve this data from object of type `JCoParameterList`!\r\n\r\nKind regards,\r\nAndrew","title":"Reflection of FM parameters in JCo","body":"<p>I have a problem with the dynamic receipt of the list of parameters and their values when calling the Function Module (with <code>DESTINATION</code> parameter as SAP JCo Server) and then processing it using Java (in SAP JCo Server).</p>\n<p>The point is that I need a dynamic way to get information in JCo Server (using Java) about what SAP RFC function and with what parameters (Importing, Exporting, Changing and Tables) was called in SAP (because my JCo Server server &quot;listens&quot; for SAP RFC calls and I have to store information about these calls from SAP).</p>\n<p>I know that (for example for Importing Parameters) using command:</p>\n<pre><code>JCoParameterList ParameterList = function.getImportParameterList(); \n</code></pre>\n<p>in Java I can receive this data, but how to deal with this variable of type <code>JCoParameterList</code>? I.e. how can I get information from this variable <code>ParameterList</code> on the name of the parameters, their types and the values with which they were called in SAP?</p>\n<p>I will be grateful for any suggestions on how in Java we can retrieve this data from object of type <code>JCoParameterList</code>!</p>\n<p>Kind regards,\nAndrew</p>\n"},{"tags":["java","security","kerberos","ntlm","gssapi"],"answers":[{"tags":[],"owner":{"account_id":356850,"reputation":18179,"user_id":696632,"accept_rate":62,"display_name":"Michael-O"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1366031080,"creation_date":1366031080,"answer_id":16015899,"question_id":15932361,"body_markdown":"NTLM != Kerberos. Java SASL does not support NTLM. Configure Kerberos properly and it&#39;ll work.","title":"GSSException: Message stream modified (41)","body":"<p>NTLM != Kerberos. Java SASL does not support NTLM. Configure Kerberos properly and it'll work.</p>\n"},{"tags":[],"owner":{"account_id":2783061,"reputation":101,"user_id":2395171,"display_name":"Nika Gerson Lohman"},"down_vote_count":0,"up_vote_count":9,"is_accepted":false,"score":9,"last_activity_date":1368817317,"creation_date":1368817317,"answer_id":16616161,"question_id":15932361,"body_markdown":"Thanks for this! Just for reference, uppercase of the realm (ie. the realm should be 100% correct and in uppercase) is very important to avoid &quot;Exception: krb_error 41 Message stream modified (41) &quot;.\r\n\r\nHere&#39;s an example of correct notation:\r\n\r\n\r\n    [libdefaults] \r\n    default_realm = EXAMPLE.COM\r\n    \r\n    [realms] \r\n    EXAMPLE.COM = { \r\n    kdc = domaincontroller.example.com\r\n    admin_server = domaincontroller.example.com\r\n    default_domain = EXAMPLE.COM\r\n    } \r\n    \r\n    [domain_realm] \r\n    .example.com = EXAMPLE.COM\r\n    example.com = EXAMPLE.COM\r\n\r\nRegards,\r\n\r\nNika.\r\n\r\n","title":"GSSException: Message stream modified (41)","body":"<p>Thanks for this! Just for reference, uppercase of the realm (ie. the realm should be 100% correct and in uppercase) is very important to avoid \"Exception: krb_error 41 Message stream modified (41) \".</p>\n\n<p>Here's an example of correct notation:</p>\n\n<pre><code>[libdefaults] \ndefault_realm = EXAMPLE.COM\n\n[realms] \nEXAMPLE.COM = { \nkdc = domaincontroller.example.com\nadmin_server = domaincontroller.example.com\ndefault_domain = EXAMPLE.COM\n} \n\n[domain_realm] \n.example.com = EXAMPLE.COM\nexample.com = EXAMPLE.COM\n</code></pre>\n\n<p>Regards,</p>\n\n<p>Nika.</p>\n"}],"owner":{"account_id":976798,"reputation":690,"user_id":997696,"accept_rate":74,"display_name":"Matan"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":14266,"favorite_count":0,"down_vote_count":0,"up_vote_count":8,"answer_count":2,"score":8,"last_activity_date":1682860185,"creation_date":1365614306,"question_id":15932361,"body_markdown":"I&#39;m working with an LDAP in forest architecture (all servers and my server are windows). I&#39;m binding to the AD using NTLM authentication.\r\n\r\nI have a Java code that perform the operations against the LDAP server.\r\n\r\nThe code is wrapped as a tomcat servlet.\r\n\r\nWhen running the Java code directly (just executing the LDAP authentication code as an application), the bind works both against the local domain (local domain = I logged in to windows, and ran this process with a user of this domain) and foreign domains.\r\n\r\nWhen running the Java code as a servlet, the bind works and authenticates users from one domain but does not work if I&#39;m trying to authenticate users from other domain, it won&#39;t work (it will work only if I&#39;ll restart tomcat).\r\n\r\nI&#39;m getting an exception:\r\n\r\n\tGSS initiate failed [Caused by GSSException: No valid credentials provided (Mechanism level: Message stream modified (41))]]\r\n\r\nI&#39;ll mention that it is the same code, with the same configurations and the same krb5 file.\r\n\r\nMore information:\r\n\r\nThis is my code:\r\n\r\n\tpublic void func(String realm, String kdc) {\r\n\t    try {\r\n\t      URL configURL = getClass().getResource(&quot;jaas_ntlm_configuration.txt&quot;);\r\n\t        System.setProperty(&quot;java.security.auth.login.config&quot;, configURL.toString());\r\n\r\n                System.setProperty(&quot;java.security.krb5.realm&quot;, realm);\r\n                System.setProperty(&quot;java.security.krb5.kdc&quot;,kdc);\r\n\t\r\n\t        // If the application is run on NT rather than Unix, use this name\r\n\t        String loginAppName = &quot;MyConfig&quot;;\r\n\t\r\n\t        // Create login context\r\n\t        LoginContext lc = new LoginContext(loginAppName, new SampleCallbackHandler());\r\n\t\r\n\t        // Retrieve the information on the logged-in user\r\n\t        lc.login();\r\n\t\r\n\t        // Get the authenticated subject\r\n\t        Subject subject = lc.getSubject();\r\n\t\r\n\t        System.out.println(subject.toString());\r\n\t\r\n\t        Subject.doAs(subject, new JndiAction(new String[] { &quot;&quot; }));\r\n\t    }\r\n\t    catch (LoginException e) {\r\n\t      e.printStackTrace();\r\n\t    }\r\n\t}\r\n\t\r\n\tclass JndiAction implements java.security.PrivilegedAction {\r\n\t    private String[] args;\r\n\t\r\n\t    public JndiAction(String[] origArgs) {\r\n\t        this.args = (String[])origArgs.clone();\r\n\t    }\r\n\t\r\n\t    public Object run() {\r\n\t        performJndiOperation(args);\r\n\t        return null;\r\n\t    }\r\n\t\r\n\t    private static void performJndiOperation(String[] args) {\r\n\t\r\n\t        // Set up environment for creating initial context\r\n\t        Hashtable env = new Hashtable(11);\r\n\t\r\n\t        env.put(Context.INITIAL_CONTEXT_FACTORY, &quot;com.sun.jndi.ldap.LdapCtxFactory&quot;);\r\n\t\r\n\t        // Must use fully qualified hostname\r\n\t        env.put(Context.PROVIDER_URL, &quot;ldap://server:389&quot;);\r\n\t\r\n\t        // Request the use of the &quot;GSSAPI&quot; SASL mechanism\r\n\t        // Authenticate by using already established Kerberos credentials\r\n\t        env.put(Context.SECURITY_AUTHENTICATION, &quot;GSSAPI&quot;);\r\n\t\r\n\t        try {\r\n\t            // Create the initial context\r\n\t            DirContext ctx = new InitialLdapContext(env, null);\r\n\t\r\n\t\r\n\t            // Close the context when we&#39;re done\r\n\t            ctx.close();\r\n\t        } catch (NamingException e) {\r\n\t            e.printStackTrace();\r\n\t        }\r\n\t    }\r\n\t}\r\n\r\nAnd my `jaas_ntlm_configuration.txt` file contains:\r\n\r\n\tMyConfig { com.sun.security.auth.module.Krb5LoginModule required\r\n\tuseTicketCache=true\r\n\tdoNotPrompt=false;\r\n\t};\r\n\r\nMy `krb5.conf` file is:\r\n\r\n\t# \r\n\t# All rights reserved.\r\n\t#\r\n\t#pragma ident\t@(#)krb5.conf\t1.1 00/12/08\r\n\t\r\n\t[libdefaults]\r\n\t\tdefault_tkt_enctypes = des3-cbc-sha1 des-cbc-md5 des-cbc-crc\r\n\t\tdefault_tgs_enctypes = des3-cbc-sha1 des-cbc-md5 des-cbc-crc\r\n\t\tforwardable  = true\r\n\t\trenewable  = true\r\n\t\tnoaddresses = true\r\n\t\tclockskew  = 300\r\n\t\r\n\t[realms]\r\n\t        SUB1.EXAMPLE.COM = {\r\n\t                kdc = DDC.SUB1.EXAMPLE.COM\r\n\t\t\tdefault_domain=EXAMPLE.COM\r\n\t        }\r\n\t\tSUB2.EXAMPLE.COM = {\r\n\t                kdc = DDC.SUB.EXAMPLE.COM\r\n\t\t\tdefault_domain=EXAMPLE.COM\r\n\t        }\r\n\t\tSUB3.EXAMPLE.COM = {\r\n\t                kdc = DDC.SUB3.EXAMPLE.COM\r\n\t\t\tdefault_domain=EXAMPLE.COM\r\n\t        }\r\n\t\r\n\t[domain_realm]\r\n\t\t.EXAMPLE.COM = SUB1.EXAMPLE.COM\r\n\t\t.EXAMPLE.COM = SUB2.EXAMPLE.COM\r\n\t\t.EXAMPLE.COM = SUB3.EXAMPLE.COM\r\n\t\r\n\t[logging]\r\n\t        default = FILE:/var/krb5/kdc.log\r\n\t        kdc = FILE:/var/krb5/kdc.log\r\n\t\tkdc_rotate = {\r\n\t\r\n\t# How often to rotate kdc.log. Logs will get rotated no more\r\n\t# often than the period, and less often if the KDC is not used\r\n\t# frequently.\r\n\t\r\n\t\t\tperiod = 1d\r\n\t\r\n\t# how many versions of kdc.log to keep around (kdc.log.0, kdc.log.1, ...)\r\n\t\r\n\t\t\tversions = 10\r\n\t\t}\r\n\t\r\n\t[appdefaults]\t\r\n\t\tkinit = {\r\n\t\t\trenewable = true\r\n\t\t\tforwardable= true\r\n\t\t}\r\n\t\trlogin = {\r\n\t\t\tforwardable= true\r\n\t\t}\r\n\t\trsh = {\r\n\t\t\tforwardable= true\r\n\t\t}\r\n\t\ttelnet = {\r\n\t        \tautologin = true \r\n\t\t\tforwardable= true\r\n\t\t}\r\n\r\nI added the following as Java parameters:\r\n\r\n\t-Djavax.security.auth.useSubjectCredsOnly=false -Djava.security.krb5.conf=&quot;krb5.conf&quot; -Dsun.security.krb5.debug=true\r\n\r\nIf I call func(&quot;SUB*.EXAMPLE.COM&quot;, &quot;DDC.SUB*.EXAMPLE.COM&quot;) always with the same subdomain - it will work, but if I&#39;ll call with one subdomain and then with another, the second will fail.\r\n\r\n**More information:**\r\n\r\nHere is the output with krb5.debug=true:\r\n\r\n\tjava -Xmx100m -cp gssapi_test.jar -Djavax.security.auth.useSubjectCredsOnly=false -Djava.security.krb5.conf=&quot;krb5.conf&quot; -Dsun.security.krb5.debug=true  gssapitest.myTest my_config.txt\r\n\t2 users provided. Performing authentication #1\r\n\tReading configuration file my_config.txt\r\n\tkdc: DDC.SUB1.EXAMPLE.COM, realm: SUB1.EXAMPLE.COM\r\n\t&gt;&gt;&gt;KinitOptions cache name is C:\\Users\\user1\\krb5cc_user1\r\n\t&gt;&gt; Acquire default native Credentials\r\n\t&gt;&gt;&gt; Obtained TGT from LSA: Credentials:\r\n\tclient=user1@SUB1.EXAMPLE.COM\r\n\tserver=krbtgt/SUB1.EXAMPLE.COM@SUB1.EXAMPLE.COM\r\n\tauthTime=20130422075139Z\r\n\tstartTime=20130422075139Z\r\n\tendTime=20130422175139Z\r\n\trenewTill=20130429075139Z\r\n\tflags: FORWARDABLE;RENEWABLE;INITIAL;PRE-AUTHENT\r\n\tEType (int): 23\r\n\tSubject:\r\n\t\tPrincipal: user1@SUB1.EXAMPLE.COM\r\n\t\tPrivate Credential: Ticket (hex) = \r\n\t.....\r\n\r\n\tClient Principal = user1@SUB1.EXAMPLE.COM\r\n\tServer Principal = krbtgt/SUB1.EXAMPLE.COM@SUB1.EXAMPLE.COM\r\n\tSession Key = EncryptionKey: keyType=23 keyBytes (hex dump)=\r\n\t0000: 2B 8C 97 3C 8E 83 66 F1   6D 58 6C 37 20 0E 1F 53  +..&lt;..f.mXl7 ..S\r\n\r\n\tForwardable Ticket true\r\n\tForwarded Ticket false\r\n\tProxiable Ticket false\r\n\tProxy Ticket false\r\n\tPostdated Ticket false\r\n\tRenewable Ticket true\r\n\tInitial Ticket true\r\n\tAuth Time = Mon Apr 22 15:51:39 2013\r\n\tStart Time = Mon Apr 22 15:51:39 2013\r\n\tEnd Time = Tue Apr 23 01:51:39 2013\r\n\tRenew Till = Mon Apr 29 15:51:39 2013\r\n\tClient Addresses  Null \r\n\r\n\tConnecting to LDAP\r\n\tConfig name: krb5.conf\r\n\tFound ticket for user1@SUB1.EXAMPLE.COM to go to krbtgt/SUB1.EXAMPLE.COM@SUB1.EXAMPLE.COM expiring on Tue Apr 23 01:51:39 2013\r\n\tEntered Krb5Context.initSecContext with state=STATE_NEW\r\n\tService ticket not found in the subject\r\n\t&gt;&gt;&gt; Credentials acquireServiceCreds: same realm\r\n\tdefault etypes for default_tgs_enctypes: 16 3 1.\r\n\t&gt;&gt;&gt; CksumType: sun.security.krb5.internal.crypto.RsaMd5CksumType\r\n\t&gt;&gt;&gt; EType: sun.security.krb5.internal.crypto.ArcFourHmacEType\r\n\t&gt;&gt;&gt; KdcAccessibility: reset\r\n\t&gt;&gt;&gt; KrbKdcReq send: kdc=DDC.SUB1.EXAMPLE.COM UDP:88, timeout=30000, number of retries =3, #bytes=1554\r\n\t&gt;&gt;&gt; KDCCommunication: kdc=DDC.SUB1.EXAMPLE.COM UDP:88, timeout=30000,Attempt =1, #bytes=1554\r\n\t&gt;&gt;&gt; KrbKdcReq send: #bytes read=107\r\n\t&gt;&gt;&gt; KrbKdcReq send: kdc=DDC.SUB1.EXAMPLE.COM TCP:88, timeout=30000, number of retries =3, #bytes=1554\r\n\t&gt;&gt;&gt; KDCCommunication: kdc=DDC.SUB1.EXAMPLE.COM TCP:88, timeout=30000,Attempt =1, #bytes=1554\r\n\t&gt;&gt;&gt;DEBUG: TCPClient reading 1497 bytes\r\n\t&gt;&gt;&gt; KrbKdcReq send: #bytes read=1497\r\n\t&gt;&gt;&gt; KdcAccessibility: remove DDC.SUB1.EXAMPLE.COM\r\n\t&gt;&gt;&gt; EType: sun.security.krb5.internal.crypto.ArcFourHmacEType\r\n\t&gt;&gt;&gt; KrbApReq: APOptions are 00000000 00000000 00000000 00000000\r\n\t&gt;&gt;&gt; EType: sun.security.krb5.internal.crypto.DesCbcMd5EType\r\n\tKrb5Context setting mySeqNumber to: 1005735013\r\n\tKrb5Context setting peerSeqNumber to: 0\r\n\tCreated InitSecContextToken:\r\n\t.....\r\n\r\n\tKrb5Context.unwrap: token=[60 33 06 09 2a 86 48 86 f7 12 01 02 02 02 01 00 00 ff ff ff ff 94 52 14 5b f6 02 28 1c a4 3c c5 8f 03 9c a2 d6 e5 f6 f1 18 ed 6f 16 ab 07 a0 00 00 04 04 04 04 ]\r\n\tKrb5Context.unwrap: data=[07 a0 00 00 ]\r\n\tKrb5Context.wrap: data=[01 01 00 00 ]\r\n\tKrb5Context.wrap: token=[60 33 06 09 2a 86 48 86 f7 12 01 02 02 02 01 00 00 ff ff ff ff 2d b6 92 0d d9 51 da aa ef 41 67 33 5c de b3 e6 ce 9a 46 31 a0 a8 0e 27 01 01 00 00 04 04 04 04 ]\r\n\tConnected\r\n\tDisconnected\r\n\t#1: Done\r\n\tPerforming authentication #2\r\n\tReading configuration file my_config.txt\r\n\tkdc: DDC.SUB2.EXAMPLE.COM, realm: SUB2.EXAMPLE.COM\r\n\t&gt;&gt;&gt;KinitOptions cache name is C:\\Users\\user1\\krb5cc_user1\r\n\t&gt;&gt; Acquire default native Credentials\r\n\t&gt;&gt;&gt; Obtained TGT from LSA: Credentials:\r\n\tclient=user1@SUB1.EXAMPLE.COM\r\n\tserver=krbtgt/SUB1.EXAMPLE.COM@SUB1.EXAMPLE.COM\r\n\tauthTime=20130422075139Z\r\n\tstartTime=20130422075139Z\r\n\tendTime=20130422175139Z\r\n\trenewTill=20130429075139Z\r\n\tflags: FORWARDABLE;RENEWABLE;INITIAL;PRE-AUTHENT\r\n\tEType (int): 23\r\n\tSubject:\r\n\t\tPrincipal: user1@SUB1.EXAMPLE.COM\r\n\t\tPrivate Credential: Ticket (hex) = \r\n\t.....\r\n\r\n\tClient Principal = user1@SUB1.EXAMPLE.COM\r\n\tServer Principal = krbtgt/SUB1.EXAMPLE.COM@SUB1.EXAMPLE.COM\r\n\tSession Key = EncryptionKey: keyType=23 keyBytes (hex dump)=\r\n\t0000: 2B 8C 97 3C 8E 83 66 F1   6D 58 6C 37 20 0E 1F 53  +..&lt;..f.mXl7 ..S\r\n\r\n\tForwardable Ticket true\r\n\tForwarded Ticket false\r\n\tProxiable Ticket false\r\n\tProxy Ticket false\r\n\tPostdated Ticket false\r\n\tRenewable Ticket true\r\n\tInitial Ticket true\r\n\tAuth Time = Mon Apr 22 15:51:39 2013\r\n\tStart Time = Mon Apr 22 15:51:39 2013\r\n\tEnd Time = Tue Apr 23 01:51:39 2013\r\n\tRenew Till = Mon Apr 29 15:51:39 2013\r\n\tClient Addresses  Null \r\n\r\n\tConnecting to LDAP\r\n\tFound ticket for user1@SUB1.EXAMPLE.COM to go to krbtgt/SUB1.EXAMPLE.COM@SUB1.EXAMPLE.COM expiring on Tue Apr 23 01:51:39 2013\r\n\tEntered Krb5Context.initSecContext with state=STATE_NEW\r\n\tService ticket not found in the subject\r\n\t&gt;&gt;&gt; Credentials acquireServiceCreds: same realm\r\n\tdefault etypes for default_tgs_enctypes: 16 3 1.\r\n\t&gt;&gt;&gt; CksumType: sun.security.krb5.internal.crypto.RsaMd5CksumType\r\n\t&gt;&gt;&gt; EType: sun.security.krb5.internal.crypto.ArcFourHmacEType\r\n\t&gt;&gt;&gt; KrbKdcReq send: kdc=DDC.SUB1.EXAMPLE.COM UDP:88, timeout=30000, number of retries =3, #bytes=1554\r\n\t&gt;&gt;&gt; KDCCommunication: kdc=DDC.SUB1.EXAMPLE.COM UDP:88, timeout=30000,Attempt =1, #bytes=1554\r\n\t&gt;&gt;&gt; KrbKdcReq send: #bytes read=107\r\n\t&gt;&gt;&gt; KrbKdcReq send: kdc=DDC.SUB1.EXAMPLE.COM TCP:88, timeout=30000, number of retries =3, #bytes=1554\r\n\t&gt;&gt;&gt; KDCCommunication: kdc=DDC.SUB1.EXAMPLE.COM TCP:88, timeout=30000,Attempt =1, #bytes=1554\r\n\t&gt;&gt;&gt;DEBUG: TCPClient reading 1482 bytes\r\n\t&gt;&gt;&gt; KrbKdcReq send: #bytes read=1482\r\n\t&gt;&gt;&gt; KdcAccessibility: remove DDC.SUB1.EXAMPLE.COM\r\n\t&gt;&gt;&gt; EType: sun.security.krb5.internal.crypto.ArcFourHmacEType\r\n\tKrbException: Message stream modified (41)\r\n\t\tat sun.security.krb5.KrbKdcRep.check(Unknown Source)\r\n\t\tat sun.security.krb5.KrbTgsRep.&lt;init&gt;(Unknown Source)\r\n\t\tat sun.security.krb5.KrbTgsReq.getReply(Unknown Source)\r\n\t\tat sun.security.krb5.KrbTgsReq.sendAndGetCreds(Unknown Source)\r\n\t\tat sun.security.krb5.internal.CredentialsUtil.serviceCreds(Unknown Source)\r\n\t\tat sun.security.krb5.internal.CredentialsUtil.acquireServiceCreds(Unknown Source)\r\n\t\tat sun.security.krb5.Credentials.acquireServiceCreds(Unknown Source)\r\n\t\tat sun.security.jgss.krb5.Krb5Context.initSecContext(Unknown Source)\r\n\t\tat sun.security.jgss.GSSContextImpl.initSecContext(Unknown Source)\r\n\t\tat sun.security.jgss.GSSContextImpl.initSecContext(Unknown Source)\r\n\t\tat com.sun.security.sasl.gsskerb.GssKrb5Client.evaluateChallenge(Unknown Source)\r\n\t\tat com.sun.jndi.ldap.sasl.LdapSasl.saslBind(Unknown Source)\r\n\t\tat com.sun.jndi.ldap.LdapClient.authenticate(Unknown Source)\r\n\t\tat com.sun.jndi.ldap.LdapCtx.connect(Unknown Source)\r\n\t\tat com.sun.jndi.ldap.LdapCtx.&lt;init&gt;(Unknown Source)\r\n\t\tat com.sun.jndi.ldap.LdapCtxFactory.getUsingURL(Unknown Source)\r\n\t\tat com.sun.jndi.ldap.LdapCtxFactory.getUsingURLs(Unknown Source)\r\n\t\tat com.sun.jndi.ldap.LdapCtxFactory.getLdapCtxInstance(Unknown Source)\r\n\t\tat com.sun.jndi.ldap.LdapCtxFactory.getInitialContext(Unknown Source)\r\n\t\tat javax.naming.spi.NamingManager.getInitialContext(Unknown Source)\r\n\t\tat javax.naming.InitialContext.getDefaultInitCtx(Unknown Source)\r\n\t\tat javax.naming.InitialContext.init(Unknown Source)\r\n\t\tat javax.naming.ldap.InitialLdapContext.&lt;init&gt;(Unknown Source)\r\n\t\tat gssapitest.JndiAction.performJndiOperation(myTest.java:603)\r\n\t\tat gssapitest.JndiAction.run(myTest.java:577)\r\n\t\tat java.security.AccessController.doPrivileged(Native Method)\r\n\t\tat javax.security.auth.Subject.doAs(Unknown Source)\r\n\t\tat gssapitest.myTest.Do(myTest.java:59)\r\n\t\tat gssapitest.myTest.main(myTest.java:513)\r\n\tjavax.naming.AuthenticationException: GSSAPI [Root exception is javax.security.sasl.SaslException: GSS initiate failed [Caused by GSSException: No valid credentials provided (Mechanism level: Message stream modified (41))]]\r\n\t\tat com.sun.jndi.ldap.sasl.LdapSasl.saslBind(Unknown Source)\r\n\t\tat com.sun.jndi.ldap.LdapClient.authenticate(Unknown Source)\r\n\t\tat com.sun.jndi.ldap.LdapCtx.connect(Unknown Source)\r\n\t\tat com.sun.jndi.ldap.LdapCtx.&lt;init&gt;(Unknown Source)\r\n\t\tat com.sun.jndi.ldap.LdapCtxFactory.getUsingURL(Unknown Source)\r\n\t\tat com.sun.jndi.ldap.LdapCtxFactory.getUsingURLs(Unknown Source)\r\n\t\tat com.sun.jndi.ldap.LdapCtxFactory.getLdapCtxInstance(Unknown Source)\r\n\t\tat com.sun.jndi.ldap.LdapCtxFactory.getInitialContext(Unknown Source)\r\n\t\tat javax.naming.spi.NamingManager.getInitialContext(Unknown Source)\r\n\t\tat javax.naming.InitialContext.getDefaultInitCtx(Unknown Source)\r\n\t\tat javax.naming.InitialContext.init(Unknown Source)\r\n\t\tat javax.naming.ldap.InitialLdapContext.&lt;init&gt;(Unknown Source)\r\n\t\tat gssapitest.JndiAction.performJndiOperation(myTest.java:603)\r\n\t\tat gssapitest.JndiAction.run(myTest.java:577)\r\n\t\tat java.security.AccessController.doPrivileged(Native Method)\r\n\t\tat javax.security.auth.Subject.doAs(Unknown Source)\r\n\t\tat gssapitest.myTest.Do(myTest.java:59)\r\n\t\tat gssapitest.myTest.main(myTest.java:513)\r\n\tCaused by: javax.security.sasl.SaslException: GSS initiate failed [Caused by GSSException: No valid credentials provided (Mechanism level: Message stream modified (41))]\r\n\t\tat com.sun.security.sasl.gsskerb.GssKrb5Client.evaluateChallenge(Unknown Source)\r\n\t\t... 18 more\r\n\tCaused by: GSSException: No valid credentials provided (Mechanism level: Message stream modified (41))\r\n\t\tat sun.security.jgss.krb5.Krb5Context.initSecContext(Unknown Source)\r\n\t\tat sun.security.jgss.GSSContextImpl.initSecContext(Unknown Source)\r\n\t\tat sun.security.jgss.GSSContextImpl.initSecContext(Unknown Source)\r\n\t\t... 19 more\r\n\tCaused by: KrbException: Message stream modified (41)\r\n\t\tat sun.security.krb5.KrbKdcRep.check(Unknown Source)\r\n\t\tat sun.security.krb5.KrbTgsRep.&lt;init&gt;(Unknown Source)\r\n\t\tat sun.security.krb5.KrbTgsReq.getReply(Unknown Source)\r\n\t\tat sun.security.krb5.KrbTgsReq.sendAndGetCreds(Unknown Source)\r\n\t\tat sun.security.krb5.internal.CredentialsUtil.serviceCreds(Unknown Source)\r\n\t\tat sun.security.krb5.internal.CredentialsUtil.acquireServiceCreds(Unknown Source)\r\n\t\tat sun.security.krb5.Credentials.acquireServiceCreds(Unknown Source)\r\n\t\t... 22 more\r\n\tFAILED\r\n\r\nWhat can I do? Am I doings something wrongs?\r\n\r\n","title":"GSSException: Message stream modified (41)","body":"<p>I'm working with an LDAP in forest architecture (all servers and my server are windows). I'm binding to the AD using NTLM authentication.</p>\n<p>I have a Java code that perform the operations against the LDAP server.</p>\n<p>The code is wrapped as a tomcat servlet.</p>\n<p>When running the Java code directly (just executing the LDAP authentication code as an application), the bind works both against the local domain (local domain = I logged in to windows, and ran this process with a user of this domain) and foreign domains.</p>\n<p>When running the Java code as a servlet, the bind works and authenticates users from one domain but does not work if I'm trying to authenticate users from other domain, it won't work (it will work only if I'll restart tomcat).</p>\n<p>I'm getting an exception:</p>\n<pre><code>GSS initiate failed [Caused by GSSException: No valid credentials provided (Mechanism level: Message stream modified (41))]]\n</code></pre>\n<p>I'll mention that it is the same code, with the same configurations and the same krb5 file.</p>\n<p>More information:</p>\n<p>This is my code:</p>\n<pre><code>public void func(String realm, String kdc) {\n    try {\n      URL configURL = getClass().getResource(&quot;jaas_ntlm_configuration.txt&quot;);\n        System.setProperty(&quot;java.security.auth.login.config&quot;, configURL.toString());\n\n            System.setProperty(&quot;java.security.krb5.realm&quot;, realm);\n            System.setProperty(&quot;java.security.krb5.kdc&quot;,kdc);\n\n        // If the application is run on NT rather than Unix, use this name\n        String loginAppName = &quot;MyConfig&quot;;\n\n        // Create login context\n        LoginContext lc = new LoginContext(loginAppName, new SampleCallbackHandler());\n\n        // Retrieve the information on the logged-in user\n        lc.login();\n\n        // Get the authenticated subject\n        Subject subject = lc.getSubject();\n\n        System.out.println(subject.toString());\n\n        Subject.doAs(subject, new JndiAction(new String[] { &quot;&quot; }));\n    }\n    catch (LoginException e) {\n      e.printStackTrace();\n    }\n}\n\nclass JndiAction implements java.security.PrivilegedAction {\n    private String[] args;\n\n    public JndiAction(String[] origArgs) {\n        this.args = (String[])origArgs.clone();\n    }\n\n    public Object run() {\n        performJndiOperation(args);\n        return null;\n    }\n\n    private static void performJndiOperation(String[] args) {\n\n        // Set up environment for creating initial context\n        Hashtable env = new Hashtable(11);\n\n        env.put(Context.INITIAL_CONTEXT_FACTORY, &quot;com.sun.jndi.ldap.LdapCtxFactory&quot;);\n\n        // Must use fully qualified hostname\n        env.put(Context.PROVIDER_URL, &quot;ldap://server:389&quot;);\n\n        // Request the use of the &quot;GSSAPI&quot; SASL mechanism\n        // Authenticate by using already established Kerberos credentials\n        env.put(Context.SECURITY_AUTHENTICATION, &quot;GSSAPI&quot;);\n\n        try {\n            // Create the initial context\n            DirContext ctx = new InitialLdapContext(env, null);\n\n\n            // Close the context when we're done\n            ctx.close();\n        } catch (NamingException e) {\n            e.printStackTrace();\n        }\n    }\n}\n</code></pre>\n<p>And my <code>jaas_ntlm_configuration.txt</code> file contains:</p>\n<pre><code>MyConfig { com.sun.security.auth.module.Krb5LoginModule required\nuseTicketCache=true\ndoNotPrompt=false;\n};\n</code></pre>\n<p>My <code>krb5.conf</code> file is:</p>\n<pre><code># \n# All rights reserved.\n#\n#pragma ident   @(#)krb5.conf   1.1 00/12/08\n\n[libdefaults]\n    default_tkt_enctypes = des3-cbc-sha1 des-cbc-md5 des-cbc-crc\n    default_tgs_enctypes = des3-cbc-sha1 des-cbc-md5 des-cbc-crc\n    forwardable  = true\n    renewable  = true\n    noaddresses = true\n    clockskew  = 300\n\n[realms]\n        SUB1.EXAMPLE.COM = {\n                kdc = DDC.SUB1.EXAMPLE.COM\n        default_domain=EXAMPLE.COM\n        }\n    SUB2.EXAMPLE.COM = {\n                kdc = DDC.SUB.EXAMPLE.COM\n        default_domain=EXAMPLE.COM\n        }\n    SUB3.EXAMPLE.COM = {\n                kdc = DDC.SUB3.EXAMPLE.COM\n        default_domain=EXAMPLE.COM\n        }\n\n[domain_realm]\n    .EXAMPLE.COM = SUB1.EXAMPLE.COM\n    .EXAMPLE.COM = SUB2.EXAMPLE.COM\n    .EXAMPLE.COM = SUB3.EXAMPLE.COM\n\n[logging]\n        default = FILE:/var/krb5/kdc.log\n        kdc = FILE:/var/krb5/kdc.log\n    kdc_rotate = {\n\n# How often to rotate kdc.log. Logs will get rotated no more\n# often than the period, and less often if the KDC is not used\n# frequently.\n\n        period = 1d\n\n# how many versions of kdc.log to keep around (kdc.log.0, kdc.log.1, ...)\n\n        versions = 10\n    }\n\n[appdefaults]   \n    kinit = {\n        renewable = true\n        forwardable= true\n    }\n    rlogin = {\n        forwardable= true\n    }\n    rsh = {\n        forwardable= true\n    }\n    telnet = {\n            autologin = true \n        forwardable= true\n    }\n</code></pre>\n<p>I added the following as Java parameters:</p>\n<pre><code>-Djavax.security.auth.useSubjectCredsOnly=false -Djava.security.krb5.conf=&quot;krb5.conf&quot; -Dsun.security.krb5.debug=true\n</code></pre>\n<p>If I call func(&quot;SUB*.EXAMPLE.COM&quot;, &quot;DDC.SUB*.EXAMPLE.COM&quot;) always with the same subdomain - it will work, but if I'll call with one subdomain and then with another, the second will fail.</p>\n<p><strong>More information:</strong></p>\n<p>Here is the output with krb5.debug=true:</p>\n<pre><code>java -Xmx100m -cp gssapi_test.jar -Djavax.security.auth.useSubjectCredsOnly=false -Djava.security.krb5.conf=&quot;krb5.conf&quot; -Dsun.security.krb5.debug=true  gssapitest.myTest my_config.txt\n2 users provided. Performing authentication #1\nReading configuration file my_config.txt\nkdc: DDC.SUB1.EXAMPLE.COM, realm: SUB1.EXAMPLE.COM\n&gt;&gt;&gt;KinitOptions cache name is C:\\Users\\user1\\krb5cc_user1\n&gt;&gt; Acquire default native Credentials\n&gt;&gt;&gt; Obtained TGT from LSA: Credentials:\nclient=user1@SUB1.EXAMPLE.COM\nserver=krbtgt/SUB1.EXAMPLE.COM@SUB1.EXAMPLE.COM\nauthTime=20130422075139Z\nstartTime=20130422075139Z\nendTime=20130422175139Z\nrenewTill=20130429075139Z\nflags: FORWARDABLE;RENEWABLE;INITIAL;PRE-AUTHENT\nEType (int): 23\nSubject:\n    Principal: user1@SUB1.EXAMPLE.COM\n    Private Credential: Ticket (hex) = \n.....\n\nClient Principal = user1@SUB1.EXAMPLE.COM\nServer Principal = krbtgt/SUB1.EXAMPLE.COM@SUB1.EXAMPLE.COM\nSession Key = EncryptionKey: keyType=23 keyBytes (hex dump)=\n0000: 2B 8C 97 3C 8E 83 66 F1   6D 58 6C 37 20 0E 1F 53  +..&lt;..f.mXl7 ..S\n\nForwardable Ticket true\nForwarded Ticket false\nProxiable Ticket false\nProxy Ticket false\nPostdated Ticket false\nRenewable Ticket true\nInitial Ticket true\nAuth Time = Mon Apr 22 15:51:39 2013\nStart Time = Mon Apr 22 15:51:39 2013\nEnd Time = Tue Apr 23 01:51:39 2013\nRenew Till = Mon Apr 29 15:51:39 2013\nClient Addresses  Null \n\nConnecting to LDAP\nConfig name: krb5.conf\nFound ticket for user1@SUB1.EXAMPLE.COM to go to krbtgt/SUB1.EXAMPLE.COM@SUB1.EXAMPLE.COM expiring on Tue Apr 23 01:51:39 2013\nEntered Krb5Context.initSecContext with state=STATE_NEW\nService ticket not found in the subject\n&gt;&gt;&gt; Credentials acquireServiceCreds: same realm\ndefault etypes for default_tgs_enctypes: 16 3 1.\n&gt;&gt;&gt; CksumType: sun.security.krb5.internal.crypto.RsaMd5CksumType\n&gt;&gt;&gt; EType: sun.security.krb5.internal.crypto.ArcFourHmacEType\n&gt;&gt;&gt; KdcAccessibility: reset\n&gt;&gt;&gt; KrbKdcReq send: kdc=DDC.SUB1.EXAMPLE.COM UDP:88, timeout=30000, number of retries =3, #bytes=1554\n&gt;&gt;&gt; KDCCommunication: kdc=DDC.SUB1.EXAMPLE.COM UDP:88, timeout=30000,Attempt =1, #bytes=1554\n&gt;&gt;&gt; KrbKdcReq send: #bytes read=107\n&gt;&gt;&gt; KrbKdcReq send: kdc=DDC.SUB1.EXAMPLE.COM TCP:88, timeout=30000, number of retries =3, #bytes=1554\n&gt;&gt;&gt; KDCCommunication: kdc=DDC.SUB1.EXAMPLE.COM TCP:88, timeout=30000,Attempt =1, #bytes=1554\n&gt;&gt;&gt;DEBUG: TCPClient reading 1497 bytes\n&gt;&gt;&gt; KrbKdcReq send: #bytes read=1497\n&gt;&gt;&gt; KdcAccessibility: remove DDC.SUB1.EXAMPLE.COM\n&gt;&gt;&gt; EType: sun.security.krb5.internal.crypto.ArcFourHmacEType\n&gt;&gt;&gt; KrbApReq: APOptions are 00000000 00000000 00000000 00000000\n&gt;&gt;&gt; EType: sun.security.krb5.internal.crypto.DesCbcMd5EType\nKrb5Context setting mySeqNumber to: 1005735013\nKrb5Context setting peerSeqNumber to: 0\nCreated InitSecContextToken:\n.....\n\nKrb5Context.unwrap: token=[60 33 06 09 2a 86 48 86 f7 12 01 02 02 02 01 00 00 ff ff ff ff 94 52 14 5b f6 02 28 1c a4 3c c5 8f 03 9c a2 d6 e5 f6 f1 18 ed 6f 16 ab 07 a0 00 00 04 04 04 04 ]\nKrb5Context.unwrap: data=[07 a0 00 00 ]\nKrb5Context.wrap: data=[01 01 00 00 ]\nKrb5Context.wrap: token=[60 33 06 09 2a 86 48 86 f7 12 01 02 02 02 01 00 00 ff ff ff ff 2d b6 92 0d d9 51 da aa ef 41 67 33 5c de b3 e6 ce 9a 46 31 a0 a8 0e 27 01 01 00 00 04 04 04 04 ]\nConnected\nDisconnected\n#1: Done\nPerforming authentication #2\nReading configuration file my_config.txt\nkdc: DDC.SUB2.EXAMPLE.COM, realm: SUB2.EXAMPLE.COM\n&gt;&gt;&gt;KinitOptions cache name is C:\\Users\\user1\\krb5cc_user1\n&gt;&gt; Acquire default native Credentials\n&gt;&gt;&gt; Obtained TGT from LSA: Credentials:\nclient=user1@SUB1.EXAMPLE.COM\nserver=krbtgt/SUB1.EXAMPLE.COM@SUB1.EXAMPLE.COM\nauthTime=20130422075139Z\nstartTime=20130422075139Z\nendTime=20130422175139Z\nrenewTill=20130429075139Z\nflags: FORWARDABLE;RENEWABLE;INITIAL;PRE-AUTHENT\nEType (int): 23\nSubject:\n    Principal: user1@SUB1.EXAMPLE.COM\n    Private Credential: Ticket (hex) = \n.....\n\nClient Principal = user1@SUB1.EXAMPLE.COM\nServer Principal = krbtgt/SUB1.EXAMPLE.COM@SUB1.EXAMPLE.COM\nSession Key = EncryptionKey: keyType=23 keyBytes (hex dump)=\n0000: 2B 8C 97 3C 8E 83 66 F1   6D 58 6C 37 20 0E 1F 53  +..&lt;..f.mXl7 ..S\n\nForwardable Ticket true\nForwarded Ticket false\nProxiable Ticket false\nProxy Ticket false\nPostdated Ticket false\nRenewable Ticket true\nInitial Ticket true\nAuth Time = Mon Apr 22 15:51:39 2013\nStart Time = Mon Apr 22 15:51:39 2013\nEnd Time = Tue Apr 23 01:51:39 2013\nRenew Till = Mon Apr 29 15:51:39 2013\nClient Addresses  Null \n\nConnecting to LDAP\nFound ticket for user1@SUB1.EXAMPLE.COM to go to krbtgt/SUB1.EXAMPLE.COM@SUB1.EXAMPLE.COM expiring on Tue Apr 23 01:51:39 2013\nEntered Krb5Context.initSecContext with state=STATE_NEW\nService ticket not found in the subject\n&gt;&gt;&gt; Credentials acquireServiceCreds: same realm\ndefault etypes for default_tgs_enctypes: 16 3 1.\n&gt;&gt;&gt; CksumType: sun.security.krb5.internal.crypto.RsaMd5CksumType\n&gt;&gt;&gt; EType: sun.security.krb5.internal.crypto.ArcFourHmacEType\n&gt;&gt;&gt; KrbKdcReq send: kdc=DDC.SUB1.EXAMPLE.COM UDP:88, timeout=30000, number of retries =3, #bytes=1554\n&gt;&gt;&gt; KDCCommunication: kdc=DDC.SUB1.EXAMPLE.COM UDP:88, timeout=30000,Attempt =1, #bytes=1554\n&gt;&gt;&gt; KrbKdcReq send: #bytes read=107\n&gt;&gt;&gt; KrbKdcReq send: kdc=DDC.SUB1.EXAMPLE.COM TCP:88, timeout=30000, number of retries =3, #bytes=1554\n&gt;&gt;&gt; KDCCommunication: kdc=DDC.SUB1.EXAMPLE.COM TCP:88, timeout=30000,Attempt =1, #bytes=1554\n&gt;&gt;&gt;DEBUG: TCPClient reading 1482 bytes\n&gt;&gt;&gt; KrbKdcReq send: #bytes read=1482\n&gt;&gt;&gt; KdcAccessibility: remove DDC.SUB1.EXAMPLE.COM\n&gt;&gt;&gt; EType: sun.security.krb5.internal.crypto.ArcFourHmacEType\nKrbException: Message stream modified (41)\n    at sun.security.krb5.KrbKdcRep.check(Unknown Source)\n    at sun.security.krb5.KrbTgsRep.&lt;init&gt;(Unknown Source)\n    at sun.security.krb5.KrbTgsReq.getReply(Unknown Source)\n    at sun.security.krb5.KrbTgsReq.sendAndGetCreds(Unknown Source)\n    at sun.security.krb5.internal.CredentialsUtil.serviceCreds(Unknown Source)\n    at sun.security.krb5.internal.CredentialsUtil.acquireServiceCreds(Unknown Source)\n    at sun.security.krb5.Credentials.acquireServiceCreds(Unknown Source)\n    at sun.security.jgss.krb5.Krb5Context.initSecContext(Unknown Source)\n    at sun.security.jgss.GSSContextImpl.initSecContext(Unknown Source)\n    at sun.security.jgss.GSSContextImpl.initSecContext(Unknown Source)\n    at com.sun.security.sasl.gsskerb.GssKrb5Client.evaluateChallenge(Unknown Source)\n    at com.sun.jndi.ldap.sasl.LdapSasl.saslBind(Unknown Source)\n    at com.sun.jndi.ldap.LdapClient.authenticate(Unknown Source)\n    at com.sun.jndi.ldap.LdapCtx.connect(Unknown Source)\n    at com.sun.jndi.ldap.LdapCtx.&lt;init&gt;(Unknown Source)\n    at com.sun.jndi.ldap.LdapCtxFactory.getUsingURL(Unknown Source)\n    at com.sun.jndi.ldap.LdapCtxFactory.getUsingURLs(Unknown Source)\n    at com.sun.jndi.ldap.LdapCtxFactory.getLdapCtxInstance(Unknown Source)\n    at com.sun.jndi.ldap.LdapCtxFactory.getInitialContext(Unknown Source)\n    at javax.naming.spi.NamingManager.getInitialContext(Unknown Source)\n    at javax.naming.InitialContext.getDefaultInitCtx(Unknown Source)\n    at javax.naming.InitialContext.init(Unknown Source)\n    at javax.naming.ldap.InitialLdapContext.&lt;init&gt;(Unknown Source)\n    at gssapitest.JndiAction.performJndiOperation(myTest.java:603)\n    at gssapitest.JndiAction.run(myTest.java:577)\n    at java.security.AccessController.doPrivileged(Native Method)\n    at javax.security.auth.Subject.doAs(Unknown Source)\n    at gssapitest.myTest.Do(myTest.java:59)\n    at gssapitest.myTest.main(myTest.java:513)\njavax.naming.AuthenticationException: GSSAPI [Root exception is javax.security.sasl.SaslException: GSS initiate failed [Caused by GSSException: No valid credentials provided (Mechanism level: Message stream modified (41))]]\n    at com.sun.jndi.ldap.sasl.LdapSasl.saslBind(Unknown Source)\n    at com.sun.jndi.ldap.LdapClient.authenticate(Unknown Source)\n    at com.sun.jndi.ldap.LdapCtx.connect(Unknown Source)\n    at com.sun.jndi.ldap.LdapCtx.&lt;init&gt;(Unknown Source)\n    at com.sun.jndi.ldap.LdapCtxFactory.getUsingURL(Unknown Source)\n    at com.sun.jndi.ldap.LdapCtxFactory.getUsingURLs(Unknown Source)\n    at com.sun.jndi.ldap.LdapCtxFactory.getLdapCtxInstance(Unknown Source)\n    at com.sun.jndi.ldap.LdapCtxFactory.getInitialContext(Unknown Source)\n    at javax.naming.spi.NamingManager.getInitialContext(Unknown Source)\n    at javax.naming.InitialContext.getDefaultInitCtx(Unknown Source)\n    at javax.naming.InitialContext.init(Unknown Source)\n    at javax.naming.ldap.InitialLdapContext.&lt;init&gt;(Unknown Source)\n    at gssapitest.JndiAction.performJndiOperation(myTest.java:603)\n    at gssapitest.JndiAction.run(myTest.java:577)\n    at java.security.AccessController.doPrivileged(Native Method)\n    at javax.security.auth.Subject.doAs(Unknown Source)\n    at gssapitest.myTest.Do(myTest.java:59)\n    at gssapitest.myTest.main(myTest.java:513)\nCaused by: javax.security.sasl.SaslException: GSS initiate failed [Caused by GSSException: No valid credentials provided (Mechanism level: Message stream modified (41))]\n    at com.sun.security.sasl.gsskerb.GssKrb5Client.evaluateChallenge(Unknown Source)\n    ... 18 more\nCaused by: GSSException: No valid credentials provided (Mechanism level: Message stream modified (41))\n    at sun.security.jgss.krb5.Krb5Context.initSecContext(Unknown Source)\n    at sun.security.jgss.GSSContextImpl.initSecContext(Unknown Source)\n    at sun.security.jgss.GSSContextImpl.initSecContext(Unknown Source)\n    ... 19 more\nCaused by: KrbException: Message stream modified (41)\n    at sun.security.krb5.KrbKdcRep.check(Unknown Source)\n    at sun.security.krb5.KrbTgsRep.&lt;init&gt;(Unknown Source)\n    at sun.security.krb5.KrbTgsReq.getReply(Unknown Source)\n    at sun.security.krb5.KrbTgsReq.sendAndGetCreds(Unknown Source)\n    at sun.security.krb5.internal.CredentialsUtil.serviceCreds(Unknown Source)\n    at sun.security.krb5.internal.CredentialsUtil.acquireServiceCreds(Unknown Source)\n    at sun.security.krb5.Credentials.acquireServiceCreds(Unknown Source)\n    ... 22 more\nFAILED\n</code></pre>\n<p>What can I do? Am I doings something wrongs?</p>\n"},{"tags":["java","saprfc","jco","sapjco3"],"comments":[{"owner":{"account_id":542551,"reputation":10395,"user_id":911419,"accept_rate":79,"display_name":"Suncatcher"},"score":0,"creation_date":1591180104,"post_id":62167677,"comment_id":109954964,"body_markdown":"Does this answer your question? [Implementing different destinations in applications on the Tomcat server](https://stackoverflow.com/questions/46280376/implementing-different-destinations-in-applications-on-the-tomcat-server)","body":"Does this answer your question? <a href=\"https://stackoverflow.com/questions/46280376/implementing-different-destinations-in-applications-on-the-tomcat-server\">Implementing different destinations in applications on the Tomcat server</a>"},{"owner":{"account_id":18652244,"reputation":33,"user_id":13595442,"display_name":"Andrew"},"score":0,"creation_date":1591270634,"post_id":62167677,"comment_id":109995315,"body_markdown":"Unfortunately not.","body":"Unfortunately not."},{"owner":{"account_id":542551,"reputation":10395,"user_id":911419,"accept_rate":79,"display_name":"Suncatcher"},"score":0,"creation_date":1591270972,"post_id":62167677,"comment_id":109995514,"body_markdown":"it is about the same RFC function on all three systems?","body":"it is about the same RFC function on all three systems?"},{"owner":{"account_id":18652244,"reputation":33,"user_id":13595442,"display_name":"Andrew"},"score":0,"creation_date":1591271788,"post_id":62167677,"comment_id":109996006,"body_markdown":"No, we want to call from SYS_A a RFM function, which is physically stored on SYS_B (and is not on SYS_A). And the point is to dynamically change the repository in JCo depending on what system we call the functions from. For example if we call only functions that are on SYS_A, then we can define repository as `jco.server.repository_destination=SYS_A`, but how to define it to have access also to system repositories from SYS_B and SYS_C when we want to call the functions stored on these systems? Should we use `jco.server.repository_map`? Or maybe we can do it in any different way?:)","body":"No, we want to call from SYS_A a RFM function, which is physically stored on SYS_B (and is not on SYS_A). And the point is to dynamically change the repository in JCo depending on what system we call the functions from. For example if we call only functions that are on SYS_A, then we can define repository as <code>jco.server.repository_destination=SYS_A</code>, but how to define it to have access also to system repositories from SYS_B and SYS_C when we want to call the functions stored on these systems? Should we use <code>jco.server.repository_map</code>? Or maybe we can do it in any different way?:)"},{"owner":{"account_id":542551,"reputation":10395,"user_id":911419,"accept_rate":79,"display_name":"Suncatcher"},"score":0,"creation_date":1591337007,"post_id":62167677,"comment_id":110022244,"body_markdown":"Yes, you need map, [JCO IDOC Server for multiple destinations](https://stackoverflow.com/questions/41117962/jco-idoc-server-for-multiple-destinations)","body":"Yes, you need map, <a href=\"https://stackoverflow.com/questions/41117962/jco-idoc-server-for-multiple-destinations\">JCO IDOC Server for multiple destinations</a>"},{"owner":{"account_id":18652244,"reputation":33,"user_id":13595442,"display_name":"Andrew"},"score":0,"creation_date":1591340768,"post_id":62167677,"comment_id":110023694,"body_markdown":"Ok, thanks thank you for confirmation. \nI see documentation of `JCO_REP_MAP` ([link](https://www.int13h.nl:8443/_content/SAPDocuments/JCo_API_3_0/index.html?index-all.html)), but how should I exactly use `jco.server.repository_map`? When I am calling from SYS_A (client 100) a RFM stored on SYS_B (on client 200), than I should use it in such way:  `jco.server.repository_destination=SYS_A\njco.server.repository_map=SYS_A(100)=SYS_A;SYS_B(200)=SYS_B` ? But how to define this additional destination for SYS_B?","body":"Ok, thanks thank you for confirmation.  I see documentation of <code>JCO_REP_MAP</code> (<a href=\"https://www.int13h.nl:8443/_content/SAPDocuments/JCo_API_3_0/index.html?index-all.html\" rel=\"nofollow noreferrer\">link</a>), but how should I exactly use <code>jco.server.repository_map</code>? When I am calling from SYS_A (client 100) a RFM stored on SYS_B (on client 200), than I should use it in such way:  <code>jco.server.repository_destination=SYS_A jco.server.repository_map=SYS_A(100)=SYS_A;SYS_B(200)=SYS_B</code> ? But how to define this additional destination for SYS_B?"}],"owner":{"account_id":18652244,"reputation":33,"user_id":13595442,"display_name":"Andrew"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":329,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1682859976,"creation_date":1591170217,"question_id":62167677,"body_markdown":"We have two SAP systems (**SYS_A** and **SYS_B**). From the **SYS_A** we want to call an RFC FM from the system **SYS_B** (an RFM, which is physically on the **SYS_B** system, so JCo Server repository should also point to **SYS_B** repository) with the destination parameter defined as JCo Server, for example on system **SYS_A** we call using ABAP:\r\n\r\n```abap\r\nCALL FUNCTION &#39;RFC_SYS_B&#39;\r\n  DESTINATION &#39;JCO_SERVER&#39;.\r\n```\r\n\r\nSo how to define the properties of the server and repository in JCo in such way, that we get dynamically metadata about the called function? And how to do it dynamically, so that when call an RFC FM from another system **SYS_C** it will also work, i.e JCo Server will also catch this call along with the call metadata?\r\n\r\nShould we use property `jco.server.repository_map` for this? If so, how do you define it using this parameter? How to define it in JCo, that calls are coming from **SYS_A**, but the repositories are on **SYS_A** and **SYS_B** and maybe on any another system?","title":"SAP JCo Server for multiple (dynamic) SAP systems and repositories","body":"<p>We have two SAP systems (<strong>SYS_A</strong> and <strong>SYS_B</strong>). From the <strong>SYS_A</strong> we want to call an RFC FM from the system <strong>SYS_B</strong> (an RFM, which is physically on the <strong>SYS_B</strong> system, so JCo Server repository should also point to <strong>SYS_B</strong> repository) with the destination parameter defined as JCo Server, for example on system <strong>SYS_A</strong> we call using ABAP:</p>\n\n<pre><code>CALL FUNCTION 'RFC_SYS_B'\n  DESTINATION 'JCO_SERVER'.\n</code></pre>\n\n<p>So how to define the properties of the server and repository in JCo in such way, that we get dynamically metadata about the called function? And how to do it dynamically, so that when call an RFC FM from another system <strong>SYS_C</strong> it will also work, i.e JCo Server will also catch this call along with the call metadata?</p>\n\n<p>Should we use property <code>jco.server.repository_map</code> for this? If so, how do you define it using this parameter? How to define it in JCo, that calls are coming from <strong>SYS_A</strong>, but the repositories are on <strong>SYS_A</strong> and <strong>SYS_B</strong> and maybe on any another system?</p>\n"},{"tags":["java","android","android-recyclerview"],"comments":[{"owner":{"account_id":5849714,"reputation":86,"user_id":5362509,"display_name":"Lakshmi"},"score":0,"creation_date":1682844631,"post_id":76140121,"comment_id":134276640,"body_markdown":"view.setOnClickListener(new View.OnClickListener() {\n                @Override\n                public void onClick(View view) {\n                    // send selected contact in callback\n                    listener.onContactSelected(doctorsListFiltered.get(getAdapterPosition()));\n                }\n            });","body":"view.setOnClickListener(new View.OnClickListener() {                 @Override                 public void onClick(View view) {                     // send selected contact in callback                     listener.onContactSelected(doctorsListFiltered.get(getAdapte&zwnj;&#8203;rPosition()));                 }             });"},{"owner":{"account_id":16796825,"reputation":1274,"user_id":12143126,"display_name":"Mikhail Guliaev"},"score":0,"creation_date":1682849271,"post_id":76140121,"comment_id":134277075,"body_markdown":"@alireza could you provide the code of `listener.onContactSelected()`?","body":"@alireza could you provide the code of <code>listener.onContactSelected()</code>?"}],"answers":[{"tags":[],"owner":{"account_id":5849714,"reputation":86,"user_id":5362509,"display_name":"Lakshmi"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1682845266,"creation_date":1682845266,"answer_id":76140382,"question_id":76140121,"body_markdown":"    view.setOnClickListener(new View.OnClickListener() {\r\n                @Override\r\n                public void onClick(View view) {\r\n                    // send selected contact in callback\r\n                    listener.onContactSelected(doctorsListFiltered.get(getAdapterPosition()));\r\n                }\r\n            }); \r\n\r\nYou have the above method in the constructor of the Viewholder class. May be that is causing  the problem. Instead have the holder.itemView.setOnClickListener() method inside onBindViewHolder() do the above task. That will solve your problem.\r\n                                                                                                                                                                                                               ","title":"how to handle item click on recyclerview for changing an item image?","body":"<pre><code>view.setOnClickListener(new View.OnClickListener() {\n            @Override\n            public void onClick(View view) {\n                // send selected contact in callback\n                listener.onContactSelected(doctorsListFiltered.get(getAdapterPosition()));\n            }\n        }); \n</code></pre>\n<p>You have the above method in the constructor of the Viewholder class. May be that is causing  the problem. Instead have the holder.itemView.setOnClickListener() method inside onBindViewHolder() do the above task. That will solve your problem.</p>\n"},{"tags":[],"owner":{"account_id":12467974,"reputation":26,"user_id":9077161,"display_name":"shimanto ahmed"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1682859795,"creation_date":1682859795,"answer_id":76141406,"question_id":76140121,"body_markdown":"Recycler view creates every item accordingly to its dataset. so when you scroll it gets refreshed by its dataset and your UI changes have no track as you did not change it in your dataset.\r\n\r\nSolution: you need to save a flag when you click on it so that when it gets fresh, the cell knows there is a change and according to this change you triggered what you want to do\r\n\r\nTake a property in your data model like `isSelected` as boolean\r\n\r\n        \r\n\r\n    final RepairItems cat_main = doctorsListFiltered.get(position);\r\n            db = new DatabaseHandler(context);\r\n            holder.cat_name.setText(cat_main.getProducts_title());\r\n            holder.cat_id.setText(cat_main.getProduct_id());\r\n            holder.price.setText(cat_main.getProducts_price());\r\n            \r\n            if(cat_main.isSelected){\r\n                holder.my_checkbox.setImageResource(R.drawable.ic_check_box_checked);\r\n            }else{\r\n                holder.my_checkbox.setImageResource(R.drawable.ic_check_box_empty);\r\n            }\r\n    \r\n    \r\n            holder.linear.setOnClickListener(new View.OnClickListener() {\r\n                @Override\r\n                public void onClick(View view) {\r\n                    if (db.getWishlist(cat_main.getProduct_id()) != null) {\r\n                        db.deleteWishlist(Long.valueOf(cat_main.getProduct_id()));\r\n                        holder.my_checkbox.setImageResource(R.drawable.ic_check_box_empty);\r\n    \r\n                    } else {\r\n                        Wishlist w = new Wishlist(Long.parseLong(cat_main.getProduct_id()), cat_main.getProduct_id(), cat_main.getProducts_title(), Integer.parseInt(cat_main.getProducts_price()));\r\n                        db.saveWishlist(w);\r\n                        holder.my_checkbox.setImageResource(R.drawable.ic_check_box_checked);\r\n                        doctorsListFiltered[position].isSelected=true;\r\n                    }\r\n                }\r\n            });\r\n\r\n   ","title":"how to handle item click on recyclerview for changing an item image?","body":"<p>Recycler view creates every item accordingly to its dataset. so when you scroll it gets refreshed by its dataset and your UI changes have no track as you did not change it in your dataset.</p>\n<p>Solution: you need to save a flag when you click on it so that when it gets fresh, the cell knows there is a change and according to this change you triggered what you want to do</p>\n<p>Take a property in your data model like <code>isSelected</code> as boolean</p>\n<pre><code>final RepairItems cat_main = doctorsListFiltered.get(position);\n        db = new DatabaseHandler(context);\n        holder.cat_name.setText(cat_main.getProducts_title());\n        holder.cat_id.setText(cat_main.getProduct_id());\n        holder.price.setText(cat_main.getProducts_price());\n        \n        if(cat_main.isSelected){\n            holder.my_checkbox.setImageResource(R.drawable.ic_check_box_checked);\n        }else{\n            holder.my_checkbox.setImageResource(R.drawable.ic_check_box_empty);\n        }\n\n\n        holder.linear.setOnClickListener(new View.OnClickListener() {\n            @Override\n            public void onClick(View view) {\n                if (db.getWishlist(cat_main.getProduct_id()) != null) {\n                    db.deleteWishlist(Long.valueOf(cat_main.getProduct_id()));\n                    holder.my_checkbox.setImageResource(R.drawable.ic_check_box_empty);\n\n                } else {\n                    Wishlist w = new Wishlist(Long.parseLong(cat_main.getProduct_id()), cat_main.getProduct_id(), cat_main.getProducts_title(), Integer.parseInt(cat_main.getProducts_price()));\n                    db.saveWishlist(w);\n                    holder.my_checkbox.setImageResource(R.drawable.ic_check_box_checked);\n                    doctorsListFiltered[position].isSelected=true;\n                }\n            }\n        });\n</code></pre>\n"}],"owner":{"account_id":11475583,"reputation":89,"user_id":8411199,"display_name":"alireza"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":42,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76141406,"answer_count":2,"score":0,"last_activity_date":1682859795,"creation_date":1682841313,"question_id":76140121,"body_markdown":"I have a Recyclerview that gets data from server. I want to save every item in database when clicked and also change item image. I have problem in changing image of items. when I click an item multiple items get selected or when scrolling recyclerview item image will change unfortunately.\r\nhere is my adapter code\r\n\r\n\r\n    \r\n    \r\n    public class RepairItemsAdapter extends RecyclerView.Adapter&lt;RepairItemsAdapter.MyViewHolder&gt;\r\n            implements Filterable {\r\n        private Context context;\r\n        private List&lt;RepairItems&gt; doctorsList;\r\n        private List&lt;RepairItems&gt; doctorsListFiltered;\r\n        private List&lt;RepairItems&gt; items = new ArrayList&lt;&gt;();\r\n        private ContactsAdapterListener listener;\r\n        private DatabaseHandler db;\r\n        private boolean flag_wishlist = true;\r\n    \r\n        public class MyViewHolder extends RecyclerView.ViewHolder {\r\n            public TextView cat_name, cat_id, price;\r\n            public ImageView my_checkbox;\r\n            public LinearLayout linear;\r\n    \r\n            public MyViewHolder(View view) {\r\n                super(view);\r\n                cat_name = view.findViewById(R.id.category_name);\r\n                price = view.findViewById(R.id.price);\r\n                cat_id = view.findViewById(R.id.category_id);\r\n                my_checkbox = view.findViewById(R.id.my_checkbox);\r\n                linear = view.findViewById(R.id.linear);\r\n    \r\n                view.setOnClickListener(new View.OnClickListener() {\r\n                    @Override\r\n                    public void onClick(View view) {\r\n                        // send selected contact in callback\r\n                        listener.onContactSelected(doctorsListFiltered.get(getAdapterPosition()));\r\n                    }\r\n                });\r\n            }\r\n        }\r\n    \r\n        public RepairItemsAdapter(Context context, List&lt;RepairItems&gt; doctorsList, ContactsAdapterListener listener) {\r\n            this.context = context;\r\n            this.listener = listener;\r\n            this.doctorsList = doctorsList;\r\n            this.doctorsListFiltered = doctorsList;\r\n        }\r\n    \r\n        @Override\r\n        public MyViewHolder onCreateViewHolder(ViewGroup parent, int viewType) {\r\n            View itemView = LayoutInflater.from(parent.getContext())\r\n                    .inflate(R.layout.checklist_items, parent, false);\r\n    \r\n            return new MyViewHolder(itemView);\r\n        }\r\n    \r\n        @Override\r\n        public void onBindViewHolder(MyViewHolder holder, final int position) {\r\n            final RepairItems cat_main = doctorsListFiltered.get(position);\r\n            db = new DatabaseHandler(context);\r\n            holder.cat_name.setText(cat_main.getProducts_title());\r\n            holder.cat_id.setText(cat_main.getProduct_id());\r\n            holder.price.setText(cat_main.getProducts_price());\r\n    \r\n            holder.linear.setOnClickListener(new View.OnClickListener() {\r\n                @Override\r\n                public void onClick(View view) {\r\n                    if (db.getWishlist(cat_main.getProduct_id()) != null) {\r\n                        db.deleteWishlist(Long.valueOf(cat_main.getProduct_id()));\r\n                        holder.my_checkbox.setImageResource(R.drawable.ic_check_box_empty);\r\n    \r\n                    } else {\r\n                        Wishlist w = new Wishlist(Long.parseLong(cat_main.getProduct_id()), cat_main.getProduct_id(), cat_main.getProducts_title(), Integer.parseInt(cat_main.getProducts_price()));\r\n                        db.saveWishlist(w);\r\n                        holder.my_checkbox.setImageResource(R.drawable.ic_check_box_checked);\r\n                    }\r\n                }\r\n            });\r\n    \r\n        }\r\n    \r\n        @Override\r\n        public int getItemCount() {\r\n            return doctorsListFiltered.size();\r\n        }\r\n    \r\n        @Override\r\n        public Filter getFilter() {\r\n            return new Filter() {\r\n                @Override\r\n                protected FilterResults performFiltering(CharSequence charSequence) {\r\n                    String charString = charSequence.toString();\r\n                    if (charString.isEmpty()) {\r\n                        doctorsListFiltered = doctorsList;\r\n                    } else {\r\n                        List&lt;RepairItems&gt; filteredList = new ArrayList&lt;&gt;();\r\n                        for (RepairItems row : doctorsList) {\r\n    \r\n                            // post_title match condition. this might differ depending on your requirement\r\n                            // here we are looking for post_title or phone number match\r\n                            if (row.getProducts_title().toLowerCase().contains(charString.toLowerCase())) {\r\n                                filteredList.add(row);\r\n                            }\r\n                        }\r\n    \r\n                        doctorsListFiltered = filteredList;\r\n                    }\r\n    \r\n                    FilterResults filterResults = new FilterResults();\r\n                    filterResults.values = doctorsListFiltered;\r\n                    return filterResults;\r\n                }\r\n    \r\n                @Override\r\n                protected void publishResults(CharSequence charSequence, FilterResults filterResults) {\r\n                    doctorsListFiltered = (ArrayList&lt;RepairItems&gt;) filterResults.values;\r\n                    notifyDataSetChanged();\r\n                }\r\n            };\r\n        }\r\n    \r\n        public interface ContactsAdapterListener {\r\n            void onContactSelected(RepairItems doctors);\r\n    \r\n        }\r\n    }\r\n\r\n","title":"how to handle item click on recyclerview for changing an item image?","body":"<p>I have a Recyclerview that gets data from server. I want to save every item in database when clicked and also change item image. I have problem in changing image of items. when I click an item multiple items get selected or when scrolling recyclerview item image will change unfortunately.\nhere is my adapter code</p>\n<pre><code>public class RepairItemsAdapter extends RecyclerView.Adapter&lt;RepairItemsAdapter.MyViewHolder&gt;\n        implements Filterable {\n    private Context context;\n    private List&lt;RepairItems&gt; doctorsList;\n    private List&lt;RepairItems&gt; doctorsListFiltered;\n    private List&lt;RepairItems&gt; items = new ArrayList&lt;&gt;();\n    private ContactsAdapterListener listener;\n    private DatabaseHandler db;\n    private boolean flag_wishlist = true;\n\n    public class MyViewHolder extends RecyclerView.ViewHolder {\n        public TextView cat_name, cat_id, price;\n        public ImageView my_checkbox;\n        public LinearLayout linear;\n\n        public MyViewHolder(View view) {\n            super(view);\n            cat_name = view.findViewById(R.id.category_name);\n            price = view.findViewById(R.id.price);\n            cat_id = view.findViewById(R.id.category_id);\n            my_checkbox = view.findViewById(R.id.my_checkbox);\n            linear = view.findViewById(R.id.linear);\n\n            view.setOnClickListener(new View.OnClickListener() {\n                @Override\n                public void onClick(View view) {\n                    // send selected contact in callback\n                    listener.onContactSelected(doctorsListFiltered.get(getAdapterPosition()));\n                }\n            });\n        }\n    }\n\n    public RepairItemsAdapter(Context context, List&lt;RepairItems&gt; doctorsList, ContactsAdapterListener listener) {\n        this.context = context;\n        this.listener = listener;\n        this.doctorsList = doctorsList;\n        this.doctorsListFiltered = doctorsList;\n    }\n\n    @Override\n    public MyViewHolder onCreateViewHolder(ViewGroup parent, int viewType) {\n        View itemView = LayoutInflater.from(parent.getContext())\n                .inflate(R.layout.checklist_items, parent, false);\n\n        return new MyViewHolder(itemView);\n    }\n\n    @Override\n    public void onBindViewHolder(MyViewHolder holder, final int position) {\n        final RepairItems cat_main = doctorsListFiltered.get(position);\n        db = new DatabaseHandler(context);\n        holder.cat_name.setText(cat_main.getProducts_title());\n        holder.cat_id.setText(cat_main.getProduct_id());\n        holder.price.setText(cat_main.getProducts_price());\n\n        holder.linear.setOnClickListener(new View.OnClickListener() {\n            @Override\n            public void onClick(View view) {\n                if (db.getWishlist(cat_main.getProduct_id()) != null) {\n                    db.deleteWishlist(Long.valueOf(cat_main.getProduct_id()));\n                    holder.my_checkbox.setImageResource(R.drawable.ic_check_box_empty);\n\n                } else {\n                    Wishlist w = new Wishlist(Long.parseLong(cat_main.getProduct_id()), cat_main.getProduct_id(), cat_main.getProducts_title(), Integer.parseInt(cat_main.getProducts_price()));\n                    db.saveWishlist(w);\n                    holder.my_checkbox.setImageResource(R.drawable.ic_check_box_checked);\n                }\n            }\n        });\n\n    }\n\n    @Override\n    public int getItemCount() {\n        return doctorsListFiltered.size();\n    }\n\n    @Override\n    public Filter getFilter() {\n        return new Filter() {\n            @Override\n            protected FilterResults performFiltering(CharSequence charSequence) {\n                String charString = charSequence.toString();\n                if (charString.isEmpty()) {\n                    doctorsListFiltered = doctorsList;\n                } else {\n                    List&lt;RepairItems&gt; filteredList = new ArrayList&lt;&gt;();\n                    for (RepairItems row : doctorsList) {\n\n                        // post_title match condition. this might differ depending on your requirement\n                        // here we are looking for post_title or phone number match\n                        if (row.getProducts_title().toLowerCase().contains(charString.toLowerCase())) {\n                            filteredList.add(row);\n                        }\n                    }\n\n                    doctorsListFiltered = filteredList;\n                }\n\n                FilterResults filterResults = new FilterResults();\n                filterResults.values = doctorsListFiltered;\n                return filterResults;\n            }\n\n            @Override\n            protected void publishResults(CharSequence charSequence, FilterResults filterResults) {\n                doctorsListFiltered = (ArrayList&lt;RepairItems&gt;) filterResults.values;\n                notifyDataSetChanged();\n            }\n        };\n    }\n\n    public interface ContactsAdapterListener {\n        void onContactSelected(RepairItems doctors);\n\n    }\n}\n</code></pre>\n"},{"tags":["java","arrays","multidimensional-array"],"comments":[{"owner":{"account_id":39574,"reputation":24267,"user_id":114226,"accept_rate":79,"display_name":"PeterMmm"},"score":0,"creation_date":1565461645,"post_id":57444382,"comment_id":101365402,"body_markdown":"https://stackoverflow.com/questions/3104504/is-it-possible-to-dynamically-build-a-multi-dimensional-array-in-java, anyway what is wrong with (dynamic) ArrayList ?","body":"<a href=\"https://stackoverflow.com/questions/3104504/is-it-possible-to-dynamically-build-a-multi-dimensional-array-in-java\" title=\"is it possible to dynamically build a multi dimensional array in java\">stackoverflow.com/questions/3104504/&hellip;</a>, anyway what is wrong with (dynamic) ArrayList ?"},{"owner":{"account_id":93689,"reputation":415931,"user_id":256196,"accept_rate":77,"display_name":"Bohemian"},"score":0,"creation_date":1682865663,"post_id":57444382,"comment_id":134279028,"body_markdown":"I think the stream is not where you should solve this. Rather, think about how you could represent this as a class and pass one of those in.","body":"I think the stream is not where you should solve this. Rather, think about how you could represent this as a class and pass one of those in."}],"answers":[{"tags":[],"owner":{"account_id":13964622,"reputation":49,"user_id":10084790,"display_name":"Shmuel Greenberger"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1682859733,"creation_date":1682859397,"answer_id":76141383,"question_id":57444382,"body_markdown":"I think this would do the trick:\r\n\r\n    var arrStr = Arrays.stream(arr);\r\n        \r\n    var counter = 0;\r\n    while(dimensions &gt; counter)\r\n    {\r\n        arrStr = arrStr.flatMap(Arrays.stream);\r\n    }\r\n    return arrStr.flatMapToInt(Arrays::stream).toArray();\r\n\r\nAdmittedly this is rather of an imperative style and may be improved on. ","title":"How to make a method that can accept different multidimensional arrays?","body":"<p>I think this would do the trick:</p>\n<pre><code>var arrStr = Arrays.stream(arr);\n    \nvar counter = 0;\nwhile(dimensions &gt; counter)\n{\n    arrStr = arrStr.flatMap(Arrays.stream);\n}\nreturn arrStr.flatMapToInt(Arrays::stream).toArray();\n</code></pre>\n<p>Admittedly this is rather of an imperative style and may be improved on.</p>\n"}],"owner":{"account_id":16197619,"reputation":31,"user_id":11694815,"display_name":"Minyi Lu"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":97,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"answer_count":1,"score":3,"last_activity_date":1682859733,"creation_date":1565459084,"question_id":57444382,"body_markdown":"I want to make a program that does calculations on different multidimensional arrays, or really just the simple task of printing it.\r\nI am hoping to have the function parameters that sort of look like\r\n\r\n    printArray(Int Array of any dimensions, int dimensions, int... sizes)\r\n\r\nOne goal for calculations is the mode, so I am thinking of flattening out all the arrays to do any calculations or modifications.\r\n\r\nI&#39;ve looked into how arrays and stream can be used to flatten out an array.\r\n\r\n2d:\r\n\r\n    Arrays.stream(arr).flatMap(Arrays::stream).flatMapToInt(Arrays::stream).toArray();\r\n\r\n3d: \r\n\r\n    Arrays.stream(arr).flatMap(Arrays::stream).flatMap(Arrays::stream).flatMapToInt(Arrays::stream).toArray();\r\n\r\nbut it also is not generic since every dimension it requires another &quot;`.flatMap`&quot;. And I still don&#39;t know how to make that kind of parameters that accept any dimensions.\r\n\r\n\r\n","title":"How to make a method that can accept different multidimensional arrays?","body":"<p>I want to make a program that does calculations on different multidimensional arrays, or really just the simple task of printing it.\nI am hoping to have the function parameters that sort of look like</p>\n\n<pre><code>printArray(Int Array of any dimensions, int dimensions, int... sizes)\n</code></pre>\n\n<p>One goal for calculations is the mode, so I am thinking of flattening out all the arrays to do any calculations or modifications.</p>\n\n<p>I've looked into how arrays and stream can be used to flatten out an array.</p>\n\n<p>2d:</p>\n\n<pre><code>Arrays.stream(arr).flatMap(Arrays::stream).flatMapToInt(Arrays::stream).toArray();\n</code></pre>\n\n<p>3d: </p>\n\n<pre><code>Arrays.stream(arr).flatMap(Arrays::stream).flatMap(Arrays::stream).flatMapToInt(Arrays::stream).toArray();\n</code></pre>\n\n<p>but it also is not generic since every dimension it requires another \"<code>.flatMap</code>\". And I still don't know how to make that kind of parameters that accept any dimensions.</p>\n"},{"tags":["java","android","firebase-authentication"],"comments":[{"owner":{"account_id":72426,"reputation":573714,"user_id":209103,"accept_rate":73,"display_name":"Frank van Puffelen"},"score":1,"creation_date":1682701579,"post_id":76131192,"comment_id":134262420,"body_markdown":"It sounds like your app crashes. When an app crashes, it writes an error message and stack trace to its logcat. Please find those, and add them to your question by clicking the `edit` link under it. Also see https://stackoverflow.com/questions/23353173/unfortunately-myapp-has-stopped-how-can-i-solve-this and https://stackoverflow.com/questions/3988788/what-is-a-stack-trace-and-how-can-i-use-it-to-debug-my-application-errors","body":"It sounds like your app crashes. When an app crashes, it writes an error message and stack trace to its logcat. Please find those, and add them to your question by clicking the <code>edit</code> link under it. Also see <a href=\"https://stackoverflow.com/questions/23353173/unfortunately-myapp-has-stopped-how-can-i-solve-this\" title=\"unfortunately myapp has stopped how can i solve this\">stackoverflow.com/questions/23353173/&hellip;</a> and <a href=\"https://stackoverflow.com/questions/3988788/what-is-a-stack-trace-and-how-can-i-use-it-to-debug-my-application-errors\" title=\"what is a stack trace and how can i use it to debug my application errors\">stackoverflow.com/questions/3988788/&hellip;</a>"},{"owner":{"account_id":19615181,"reputation":732,"user_id":15394019,"display_name":"mindoverflow"},"score":0,"creation_date":1682819794,"post_id":76131192,"comment_id":134274832,"body_markdown":"could it be you did not add &quot;Home_Page&quot; as an activity tag in the manifest file?","body":"could it be you did not add &quot;Home_Page&quot; as an activity tag in the manifest file?"},{"owner":{"account_id":21368741,"reputation":11,"user_id":15736580,"display_name":"The Shadow"},"score":0,"creation_date":1682833794,"post_id":76131192,"comment_id":134275695,"body_markdown":"It was working fine not so long ago and I don&#39;t remember doing anything in the manifest file. I&#39;ll try it though.","body":"It was working fine not so long ago and I don&#39;t remember doing anything in the manifest file. I&#39;ll try it though."},{"owner":{"account_id":6819231,"reputation":132841,"user_id":5246885,"accept_rate":78,"display_name":"Alex Mamo"},"score":0,"creation_date":1682942632,"post_id":76131192,"comment_id":134287231,"body_markdown":"What exactly in this code doesn&#39;t work the way you expect?\nTell us what is wrong with shared code. Do you have any errors? Please respond using @AlexMamo","body":"What exactly in this code doesn&#39;t work the way you expect? Tell us what is wrong with shared code. Do you have any errors? Please respond using @AlexMamo"},{"owner":{"account_id":6819231,"reputation":132841,"user_id":5246885,"accept_rate":78,"display_name":"Alex Mamo"},"score":0,"creation_date":1682942725,"post_id":76131192,"comment_id":134287257,"body_markdown":"Besides that, if you understand Kotlin, I think that this [resource](https://medium.com/firebase-developers/how-to-authenticate-to-firebase-using-email-and-password-in-jetpack-compose-bd70ca56ea91) will help. Here is the corresponding [repo](https://github.com/alexmamo/FirebaseSignInWithEmailAndPassword).","body":"Besides that, if you understand Kotlin, I think that this <a href=\"https://medium.com/firebase-developers/how-to-authenticate-to-firebase-using-email-and-password-in-jetpack-compose-bd70ca56ea91\" rel=\"nofollow noreferrer\">resource</a> will help. Here is the corresponding <a href=\"https://github.com/alexmamo/FirebaseSignInWithEmailAndPassword\" rel=\"nofollow noreferrer\">repo</a>."}],"owner":{"account_id":21368741,"reputation":11,"user_id":15736580,"display_name":"The Shadow"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":38,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1682859589,"creation_date":1682696523,"question_id":76131192,"body_markdown":"I&#39;m a beginner with Android Studio so I don&#39;t know much about how stuff works in it. I wrote some code for an app which uses Firebase Authentication for email/password user logging in.\r\n\r\nThis is shown in logcat as I click the &#39;Login&#39; button:\r\nW/System: Ignoring header X-Firebase-Locale because its value was null.\r\n\r\n\r\n\r\n\r\n```\r\n        loginbtn.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View view) {\r\n                String email_id = emailLogin.getText().toString();\r\n                String password_id = passwordLogin.getText().toString();\r\n\r\n                boolean dataIsValidated = validateData(email_id, password_id);\r\n                if (!dataIsValidated) {\r\n                    return;\r\n                } else {\r\n\r\n                    loginAccount(email_id, password_id);\r\n\r\n                }\r\n            }\r\n\r\n            void loginAccount(String email_id,String password_id){\r\n                changeInProgress(true);\r\n                FirebaseAuth firebaseAuth = FirebaseAuth.getInstance();\r\n                firebaseAuth.signInWithEmailAndPassword(email_id,password_id).addOnCompleteListener(task -&gt; {\r\n                    if(task.isSuccessful()){\r\n                        if(firebaseAuth.getCurrentUser().isEmailVerified()){\r\n                            Toast.makeText(Actual_Login.this,&quot;Logged in successfully!&quot;,Toast.LENGTH_SHORT).show();\r\n                            startActivity(intentToHome);\r\n                        }else{\r\n                            Toast.makeText(Actual_Login.this,&quot;This email isn&#39;t verified! Sign up with this email first&quot;,Toast.LENGTH_SHORT).show();\r\n                            changeInProgress(false);\r\n                        }\r\n                    }else{\r\n                        Toast.makeText(Actual_Login.this,&quot;Login failed!&quot;,Toast.LENGTH_SHORT).show();\r\n                        changeInProgress(false);\r\n                    }\r\n                });\r\n            }\r\n\r\n        }\r\n```\r\nBut the app stops after showing the toast message &quot;Logged in successfully!&quot;. The app is logged in as if I open it again, it closes again after the splash screen.\r\nHere&#39;s the full Java file which the code block above attached belongs to:\r\n\r\n\r\n```\r\npackage com.brilliantbrushes.safe;\r\n\r\nimport androidx.annotation.NonNull;\r\nimport androidx.annotation.Nullable;\r\nimport androidx.appcompat.app.AppCompatActivity;\r\n\r\nimport android.content.Intent;\r\nimport android.os.Build;\r\nimport android.os.Bundle;\r\nimport android.util.Log;\r\nimport android.util.Patterns;\r\nimport android.view.View;\r\nimport android.view.WindowManager;\r\nimport android.widget.Button;\r\nimport android.widget.EditText;\r\nimport android.widget.ImageView;\r\nimport android.widget.ProgressBar;\r\nimport android.widget.TextView;\r\nimport android.widget.Toast;\r\n\r\nimport com.google.android.gms.auth.api.signin.GoogleSignIn;\r\nimport com.google.android.gms.auth.api.signin.GoogleSignInAccount;\r\nimport com.google.android.gms.auth.api.signin.GoogleSignInClient;\r\nimport com.google.android.gms.auth.api.signin.GoogleSignInOptions;\r\nimport com.google.android.gms.common.api.ApiException;\r\nimport com.google.android.gms.tasks.OnCompleteListener;\r\nimport com.google.android.gms.tasks.Task;\r\nimport com.google.firebase.auth.AuthResult;\r\nimport com.google.firebase.auth.FirebaseAuth;\r\n\r\npublic class Actual_Login extends AppCompatActivity {\r\n\r\n    TextView movetosignup;\r\n\r\n    EditText emailLogin,passwordLogin;\r\n    Button loginbtn;\r\n    ProgressBar progressLogin;\r\n    private Intent intentToHome;\r\n\r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        setContentView(R.layout.activity_actual_login);\r\n\r\n        Intent intentToHome = new Intent(Actual_Login.this,Home_Page.class);\r\n\r\n        emailLogin=findViewById(R.id.emailLogin);\r\n        passwordLogin=findViewById(R.id.passwordLogin);\r\n        loginbtn=findViewById(R.id.loginbtn);\r\n        progressLogin=findViewById(R.id.progressLogin);\r\n\r\n        movetosignup = findViewById(R.id.movetosignup);\r\n        movetosignup.setOnClickListener(view -&gt; {\r\n            Intent intent = new Intent(Actual_Login.this, Login_Page.class);\r\n            startActivity(intent);\r\n        });\r\n\r\n        loginbtn.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View view) {\r\n                String email_id = emailLogin.getText().toString();\r\n                String password_id = passwordLogin.getText().toString();\r\n\r\n                boolean dataIsValidated = validateData(email_id, password_id);\r\n                if (!dataIsValidated) {\r\n                    return;\r\n                } else {\r\n\r\n                    loginAccount(email_id, password_id);\r\n\r\n                }\r\n            }\r\n\r\n            void loginAccount(String email_id,String password_id){\r\n                changeInProgress(true);\r\n                FirebaseAuth firebaseAuth = FirebaseAuth.getInstance();\r\n                firebaseAuth.signInWithEmailAndPassword(email_id,password_id).addOnCompleteListener(task -&gt; {\r\n                    if(task.isSuccessful()){\r\n                        if(firebaseAuth.getCurrentUser().isEmailVerified()){\r\n                            Toast.makeText(Actual_Login.this,&quot;Logged in successfully!&quot;,Toast.LENGTH_SHORT).show();\r\n                            startActivity(intentToHome);\r\n                        }else{\r\n                            Toast.makeText(Actual_Login.this,&quot;This email isn&#39;t verified! Sign up with this email first&quot;,Toast.LENGTH_SHORT).show();\r\n                            changeInProgress(false);\r\n                        }\r\n                    }else{\r\n                        Toast.makeText(Actual_Login.this,&quot;Login failed!&quot;,Toast.LENGTH_SHORT).show();\r\n                        changeInProgress(false);\r\n                    }\r\n                });\r\n            }\r\n\r\n        });\r\n\r\n    }\r\n\r\n    void changeInProgress(boolean inProgress){\r\n        if(inProgress){\r\n            progressLogin.setVisibility(View.VISIBLE);\r\n            loginbtn.setVisibility(View.GONE);\r\n        }else{\r\n            progressLogin.setVisibility(View.GONE);\r\n            loginbtn.setVisibility(View.VISIBLE);\r\n        }\r\n    }\r\n\r\n    boolean validateData(String email_id,String password_id){\r\n\r\n        if (!Patterns.EMAIL_ADDRESS.matcher(email_id).matches()){\r\n            emailLogin.setError(&quot;The email used is invalid!&quot;);\r\n            return false;\r\n        }\r\n        if(password_id.length()&lt;8){\r\n            passwordLogin.setError(&quot;Password must be at least 8 characters long!&quot;);\r\n            return false;\r\n        }\r\n        return true;\r\n    }\r\n\r\n};\r\n\r\n\r\n```\r\n\r\n\r\nI tried removing the finish() at the end of intentToHome. I tries cleaning and rebuilding the app. Nothing reached anywhere.\r\n\r\n```\r\n\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\r\n&lt;manifest xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\r\n    xmlns:tools=&quot;http://schemas.android.com/tools&quot;&gt;\r\n\r\n    &lt;uses-permission android:name=&quot;android.permission.INTERNET&quot; /&gt;\r\n\r\n    &lt;application\r\n        android:allowBackup=&quot;true&quot;\r\n        android:dataExtractionRules=&quot;@xml/data_extraction_rules&quot;\r\n        android:fullBackupContent=&quot;@xml/backup_rules&quot;\r\n        android:icon=&quot;@mipmap/ic_launcher&quot;\r\n        android:label=&quot;@string/app_name&quot;\r\n        android:supportsRtl=&quot;true&quot;\r\n        android:theme=&quot;@style/Theme.Safe&quot;\r\n        tools:targetApi=&quot;31&quot;&gt;\r\n        &lt;activity\r\n            android:name=&quot;.Add_Note&quot;\r\n            android:exported=&quot;false&quot; /&gt;\r\n        &lt;activity\r\n            android:name=&quot;.Splash_Screen&quot;\r\n            android:exported=&quot;true&quot;&gt;\r\n            &lt;intent-filter&gt;\r\n                &lt;action android:name=&quot;android.intent.action.MAIN&quot; /&gt;\r\n\r\n                &lt;category android:name=&quot;android.intent.category.LAUNCHER&quot; /&gt;\r\n            &lt;/intent-filter&gt;\r\n        &lt;/activity&gt;\r\n        &lt;activity\r\n            android:name=&quot;.Actual_Login&quot;\r\n            android:exported=&quot;false&quot; /&gt;\r\n        &lt;activity\r\n            android:name=&quot;.Home_Page&quot;\r\n            android:exported=&quot;false&quot; /&gt;\r\n        &lt;activity\r\n            android:name=&quot;.Login_Page&quot;\r\n            android:exported=&quot;false&quot;&gt;&lt;/activity&gt;\r\n    &lt;/application&gt;\r\n\r\n&lt;/manifest&gt;\r\n\r\n```","title":"App immediately closes abruptly after logging in","body":"<p>I'm a beginner with Android Studio so I don't know much about how stuff works in it. I wrote some code for an app which uses Firebase Authentication for email/password user logging in.</p>\n<p>This is shown in logcat as I click the 'Login' button:\nW/System: Ignoring header X-Firebase-Locale because its value was null.</p>\n<pre><code>        loginbtn.setOnClickListener(new View.OnClickListener() {\n            @Override\n            public void onClick(View view) {\n                String email_id = emailLogin.getText().toString();\n                String password_id = passwordLogin.getText().toString();\n\n                boolean dataIsValidated = validateData(email_id, password_id);\n                if (!dataIsValidated) {\n                    return;\n                } else {\n\n                    loginAccount(email_id, password_id);\n\n                }\n            }\n\n            void loginAccount(String email_id,String password_id){\n                changeInProgress(true);\n                FirebaseAuth firebaseAuth = FirebaseAuth.getInstance();\n                firebaseAuth.signInWithEmailAndPassword(email_id,password_id).addOnCompleteListener(task -&gt; {\n                    if(task.isSuccessful()){\n                        if(firebaseAuth.getCurrentUser().isEmailVerified()){\n                            Toast.makeText(Actual_Login.this,&quot;Logged in successfully!&quot;,Toast.LENGTH_SHORT).show();\n                            startActivity(intentToHome);\n                        }else{\n                            Toast.makeText(Actual_Login.this,&quot;This email isn't verified! Sign up with this email first&quot;,Toast.LENGTH_SHORT).show();\n                            changeInProgress(false);\n                        }\n                    }else{\n                        Toast.makeText(Actual_Login.this,&quot;Login failed!&quot;,Toast.LENGTH_SHORT).show();\n                        changeInProgress(false);\n                    }\n                });\n            }\n\n        }\n</code></pre>\n<p>But the app stops after showing the toast message &quot;Logged in successfully!&quot;. The app is logged in as if I open it again, it closes again after the splash screen.\nHere's the full Java file which the code block above attached belongs to:</p>\n<pre><code>package com.brilliantbrushes.safe;\n\nimport androidx.annotation.NonNull;\nimport androidx.annotation.Nullable;\nimport androidx.appcompat.app.AppCompatActivity;\n\nimport android.content.Intent;\nimport android.os.Build;\nimport android.os.Bundle;\nimport android.util.Log;\nimport android.util.Patterns;\nimport android.view.View;\nimport android.view.WindowManager;\nimport android.widget.Button;\nimport android.widget.EditText;\nimport android.widget.ImageView;\nimport android.widget.ProgressBar;\nimport android.widget.TextView;\nimport android.widget.Toast;\n\nimport com.google.android.gms.auth.api.signin.GoogleSignIn;\nimport com.google.android.gms.auth.api.signin.GoogleSignInAccount;\nimport com.google.android.gms.auth.api.signin.GoogleSignInClient;\nimport com.google.android.gms.auth.api.signin.GoogleSignInOptions;\nimport com.google.android.gms.common.api.ApiException;\nimport com.google.android.gms.tasks.OnCompleteListener;\nimport com.google.android.gms.tasks.Task;\nimport com.google.firebase.auth.AuthResult;\nimport com.google.firebase.auth.FirebaseAuth;\n\npublic class Actual_Login extends AppCompatActivity {\n\n    TextView movetosignup;\n\n    EditText emailLogin,passwordLogin;\n    Button loginbtn;\n    ProgressBar progressLogin;\n    private Intent intentToHome;\n\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.activity_actual_login);\n\n        Intent intentToHome = new Intent(Actual_Login.this,Home_Page.class);\n\n        emailLogin=findViewById(R.id.emailLogin);\n        passwordLogin=findViewById(R.id.passwordLogin);\n        loginbtn=findViewById(R.id.loginbtn);\n        progressLogin=findViewById(R.id.progressLogin);\n\n        movetosignup = findViewById(R.id.movetosignup);\n        movetosignup.setOnClickListener(view -&gt; {\n            Intent intent = new Intent(Actual_Login.this, Login_Page.class);\n            startActivity(intent);\n        });\n\n        loginbtn.setOnClickListener(new View.OnClickListener() {\n            @Override\n            public void onClick(View view) {\n                String email_id = emailLogin.getText().toString();\n                String password_id = passwordLogin.getText().toString();\n\n                boolean dataIsValidated = validateData(email_id, password_id);\n                if (!dataIsValidated) {\n                    return;\n                } else {\n\n                    loginAccount(email_id, password_id);\n\n                }\n            }\n\n            void loginAccount(String email_id,String password_id){\n                changeInProgress(true);\n                FirebaseAuth firebaseAuth = FirebaseAuth.getInstance();\n                firebaseAuth.signInWithEmailAndPassword(email_id,password_id).addOnCompleteListener(task -&gt; {\n                    if(task.isSuccessful()){\n                        if(firebaseAuth.getCurrentUser().isEmailVerified()){\n                            Toast.makeText(Actual_Login.this,&quot;Logged in successfully!&quot;,Toast.LENGTH_SHORT).show();\n                            startActivity(intentToHome);\n                        }else{\n                            Toast.makeText(Actual_Login.this,&quot;This email isn't verified! Sign up with this email first&quot;,Toast.LENGTH_SHORT).show();\n                            changeInProgress(false);\n                        }\n                    }else{\n                        Toast.makeText(Actual_Login.this,&quot;Login failed!&quot;,Toast.LENGTH_SHORT).show();\n                        changeInProgress(false);\n                    }\n                });\n            }\n\n        });\n\n    }\n\n    void changeInProgress(boolean inProgress){\n        if(inProgress){\n            progressLogin.setVisibility(View.VISIBLE);\n            loginbtn.setVisibility(View.GONE);\n        }else{\n            progressLogin.setVisibility(View.GONE);\n            loginbtn.setVisibility(View.VISIBLE);\n        }\n    }\n\n    boolean validateData(String email_id,String password_id){\n\n        if (!Patterns.EMAIL_ADDRESS.matcher(email_id).matches()){\n            emailLogin.setError(&quot;The email used is invalid!&quot;);\n            return false;\n        }\n        if(password_id.length()&lt;8){\n            passwordLogin.setError(&quot;Password must be at least 8 characters long!&quot;);\n            return false;\n        }\n        return true;\n    }\n\n};\n\n\n</code></pre>\n<p>I tried removing the finish() at the end of intentToHome. I tries cleaning and rebuilding the app. Nothing reached anywhere.</p>\n<pre><code>\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\n&lt;manifest xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\n    xmlns:tools=&quot;http://schemas.android.com/tools&quot;&gt;\n\n    &lt;uses-permission android:name=&quot;android.permission.INTERNET&quot; /&gt;\n\n    &lt;application\n        android:allowBackup=&quot;true&quot;\n        android:dataExtractionRules=&quot;@xml/data_extraction_rules&quot;\n        android:fullBackupContent=&quot;@xml/backup_rules&quot;\n        android:icon=&quot;@mipmap/ic_launcher&quot;\n        android:label=&quot;@string/app_name&quot;\n        android:supportsRtl=&quot;true&quot;\n        android:theme=&quot;@style/Theme.Safe&quot;\n        tools:targetApi=&quot;31&quot;&gt;\n        &lt;activity\n            android:name=&quot;.Add_Note&quot;\n            android:exported=&quot;false&quot; /&gt;\n        &lt;activity\n            android:name=&quot;.Splash_Screen&quot;\n            android:exported=&quot;true&quot;&gt;\n            &lt;intent-filter&gt;\n                &lt;action android:name=&quot;android.intent.action.MAIN&quot; /&gt;\n\n                &lt;category android:name=&quot;android.intent.category.LAUNCHER&quot; /&gt;\n            &lt;/intent-filter&gt;\n        &lt;/activity&gt;\n        &lt;activity\n            android:name=&quot;.Actual_Login&quot;\n            android:exported=&quot;false&quot; /&gt;\n        &lt;activity\n            android:name=&quot;.Home_Page&quot;\n            android:exported=&quot;false&quot; /&gt;\n        &lt;activity\n            android:name=&quot;.Login_Page&quot;\n            android:exported=&quot;false&quot;&gt;&lt;/activity&gt;\n    &lt;/application&gt;\n\n&lt;/manifest&gt;\n\n</code></pre>\n"},{"tags":["java","sql"],"comments":[{"owner":{"account_id":116580,"reputation":118703,"user_id":305644,"accept_rate":75,"display_name":"hvgotcodes"},"score":0,"creation_date":1313597061,"post_id":7095921,"comment_id":8496249,"body_markdown":"what are you using to construct your sql?","body":"what are you using to construct your sql?"}],"answers":[{"tags":[],"owner":{"account_id":37982,"reputation":65378,"user_id":108796,"accept_rate":64,"display_name":"Blindy"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1313597113,"creation_date":1313597113,"answer_id":7095981,"question_id":7095921,"body_markdown":"The SQL syntax is:\r\n\r\n\r\n    select name from tbl where id in (1,2,3)\r\n\r\nAll you have to do is build the comma separated list of items and insert it in the string.\r\n\r\nOh and the obligatory sql string building warning: don&#39;t!","title":"How to pass List in sql query","body":"<p>The SQL syntax is:</p>\n\n<pre><code>select name from tbl where id in (1,2,3)\n</code></pre>\n\n<p>All you have to do is build the comma separated list of items and insert it in the string.</p>\n\n<p>Oh and the obligatory sql string building warning: don't!</p>\n"},{"tags":[],"owner":{"display_name":"user891973"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1313597118,"creation_date":1313597118,"answer_id":7095984,"question_id":7095921,"body_markdown":"Pass the list in as a comma seperated list and use a split function to split it into a temporary table variable.\r\n\r\n    CREATE FUNCTION dbo.Split (@sep char(1), @s varchar(512))\r\n    RETURNS table\r\n    AS\r\n    RETURN (\r\n        WITH Pieces(pn, start, stop) AS (\r\n          SELECT 1, 1, CHARINDEX(@sep, @s)\r\n          UNION ALL\r\n          SELECT pn + 1, stop + 1, CHARINDEX(@sep, @s, stop + 1)\r\n          FROM Pieces\r\n          WHERE stop &gt; 0\r\n        )\r\n        SELECT pn,\r\n          SUBSTRING(@s, start, CASE WHEN stop &gt; 0 THEN stop-start ELSE 512 END) AS s\r\n        FROM Pieces\r\n      )\r\n\r\n","title":"How to pass List in sql query","body":"<p>Pass the list in as a comma seperated list and use a split function to split it into a temporary table variable.</p>\n\n<pre><code>CREATE FUNCTION dbo.Split (@sep char(1), @s varchar(512))\nRETURNS table\nAS\nRETURN (\n    WITH Pieces(pn, start, stop) AS (\n      SELECT 1, 1, CHARINDEX(@sep, @s)\n      UNION ALL\n      SELECT pn + 1, stop + 1, CHARINDEX(@sep, @s, stop + 1)\n      FROM Pieces\n      WHERE stop &gt; 0\n    )\n    SELECT pn,\n      SUBSTRING(@s, start, CASE WHEN stop &gt; 0 THEN stop-start ELSE 512 END) AS s\n    FROM Pieces\n  )\n</code></pre>\n"},{"tags":[],"owner":{"account_id":116580,"reputation":118703,"user_id":305644,"accept_rate":75,"display_name":"hvgotcodes"},"down_vote_count":1,"up_vote_count":2,"is_accepted":false,"score":1,"last_activity_date":1474876702,"creation_date":1313597143,"answer_id":7095989,"question_id":7095921,"body_markdown":"it depends on how you are constructing your sql.  If you are constructing it yourself (bad idea) you need to do make the sql look like - \r\n\r\n`... where id in (1,2,3)...`\r\n\r\nSince in your comment you specify hibernate hql, something like - \r\n\r\n    Query query = session.createSQLQuery(&quot;from User where id in :ids &quot;);\r\n    query.setParameter(&quot;ids&quot;, idsList);\r\n    List list = query.list();\r\n\r\n should get you started.  Note `User` is the name of the Object you mapped to the table you want to query.\r\n\r\n","title":"How to pass List in sql query","body":"<p>it depends on how you are constructing your sql.  If you are constructing it yourself (bad idea) you need to do make the sql look like - </p>\n\n<p><code>... where id in (1,2,3)...</code></p>\n\n<p>Since in your comment you specify hibernate hql, something like - </p>\n\n<pre><code>Query query = session.createSQLQuery(\"from User where id in :ids \");\nquery.setParameter(\"ids\", idsList);\nList list = query.list();\n</code></pre>\n\n<p>should get you started.  Note <code>User</code> is the name of the Object you mapped to the table you want to query.</p>\n"},{"tags":[],"owner":{"account_id":470951,"reputation":658,"user_id":878429,"accept_rate":33,"display_name":"corsair"},"down_vote_count":2,"up_vote_count":14,"is_accepted":false,"score":12,"last_activity_date":1313597459,"creation_date":1313597459,"answer_id":7096065,"question_id":7095921,"body_markdown":"you have to put your list directly to sql statement\r\n\r\nexample:\r\n\r\n    String sql=&quot;select name from tbl where id in (&quot;+StringUtils.join(list, &#39;,&#39;)+&quot;)&quot;;\r\n    Statement st=connection.createStatement();\r\n    st.execute(sql);","title":"How to pass List in sql query","body":"<p>you have to put your list directly to sql statement</p>\n\n<p>example:</p>\n\n<pre><code>String sql=\"select name from tbl where id in (\"+StringUtils.join(list, ',')+\")\";\nStatement st=connection.createStatement();\nst.execute(sql);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":294985,"reputation":1224,"user_id":599154,"display_name":"Rob Marrowstone"},"down_vote_count":0,"up_vote_count":10,"is_accepted":false,"score":10,"last_activity_date":1313597493,"creation_date":1313597493,"answer_id":7096072,"question_id":7095921,"body_markdown":"I see in your reply to a comment that you&#39;re using HQL. If that&#39;s the case, the Hibernate folks make this one easy for you, in the query, just specify:\r\n\r\n    where id in (:ids)\r\n\r\nand then use `setParameterList(&quot;ids&quot;, list)` passing your list. Hibernate will do all the expansion for you!","title":"How to pass List in sql query","body":"<p>I see in your reply to a comment that you're using HQL. If that's the case, the Hibernate folks make this one easy for you, in the query, just specify:</p>\n\n<pre><code>where id in (:ids)\n</code></pre>\n\n<p>and then use <code>setParameterList(\"ids\", list)</code> passing your list. Hibernate will do all the expansion for you!</p>\n"},{"tags":[],"owner":{"account_id":17978108,"reputation":7,"user_id":13065150,"display_name":"Kamal Parvez"},"down_vote_count":2,"up_vote_count":1,"is_accepted":false,"score":-1,"last_activity_date":1584268562,"creation_date":1584268562,"answer_id":60691972,"question_id":7095921,"body_markdown":"\tprivate static String sqlFormatedList(List&lt;String&gt; list){\r\n\t\t StringBuilder sb = new StringBuilder();\r\n\t\t sb.append(&quot;(&#39;&quot;);\r\n\t\t for (String i : list){\r\n\t\t   sb.append(i+&quot;&#39;,&#39;&quot;);\r\n\t\t }\r\n\t\t sb.deleteCharAt(sb.length() -1);\r\n\t\t sb.deleteCharAt(sb.lastIndexOf(&quot;,&quot;));\r\n\t\t sb.append(&quot;)&quot;);\r\n\t\t return sb.toString();\r\n\t\t}","title":"How to pass List in sql query","body":"<pre><code>private static String sqlFormatedList(List&lt;String&gt; list){\n     StringBuilder sb = new StringBuilder();\n     sb.append(\"('\");\n     for (String i : list){\n       sb.append(i+\"','\");\n     }\n     sb.deleteCharAt(sb.length() -1);\n     sb.deleteCharAt(sb.lastIndexOf(\",\"));\n     sb.append(\")\");\n     return sb.toString();\n    }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":27042750,"reputation":1,"user_id":20597374,"display_name":"DYD"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1669820695,"creation_date":1669820695,"answer_id":74629943,"question_id":7095921,"body_markdown":"You can write code like and then pass uuidsWithRequiredPattern to SQL.\r\nHere in below example I had a requirement to have a uuids prefixed with single quote , suffixed with single quote and delimited with comma. \r\n\r\n    List&lt;UUID&gt; uuidList = Arrays.asList(&quot;581394be-6a27-11ea-bc55-0242ac130003&quot;,&quot;681394be-6a27-11ea-bc55-0242ac130003&quot;)\r\n    String uuidsWithRequiredPattern = uuidList.stream()\r\n                    .map(UUID::toString)\r\n                    .collect(Collectors.joining(&quot;,&quot;, &quot;&#39;&quot;, &quot;&#39;&quot;));","title":"How to pass List in sql query","body":"<p>You can write code like and then pass uuidsWithRequiredPattern to SQL.\nHere in below example I had a requirement to have a uuids prefixed with single quote , suffixed with single quote and delimited with comma.</p>\n<pre><code>List&lt;UUID&gt; uuidList = Arrays.asList(&quot;581394be-6a27-11ea-bc55-0242ac130003&quot;,&quot;681394be-6a27-11ea-bc55-0242ac130003&quot;)\nString uuidsWithRequiredPattern = uuidList.stream()\n                .map(UUID::toString)\n                .collect(Collectors.joining(&quot;,&quot;, &quot;'&quot;, &quot;'&quot;));\n</code></pre>\n"},{"tags":[],"owner":{"account_id":8803402,"reputation":31,"user_id":6578837,"display_name":"Paul"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1674659343,"creation_date":1674659343,"answer_id":75235941,"question_id":7095921,"body_markdown":"I know this is a long time past but this was the page that returned when I looked for a solution to exactly this problem. It seems that all answers are not perfect for one reason or another (including the possibility of SQL injection which is a real concern).So, here&#39;s my solution:-\r\n\r\n\r\n    /**\r\n     * Checks if this range exists in the database already.\r\n     * If it does, it will return the original name.\r\n     * @param products the list of product names to check\r\n     * @return  The range&#39;s name in the database\r\n     * @throws SQLException if SQL fails\r\n     *   (or if it exists but with multiple names)\r\n     */\r\n    private String getOriginalName(final List&lt;String&gt; products)throws SQLException {\r\n      if (products.isEmpty()) {\r\n        throw new SQLException(&quot;Cannot check an empty list&quot;);\r\n      }\r\n      try (Connection connection = ConnectionPoolConfigRulesUtils.getConnection();\r\n          PreparedStatement statement = connection.prepareCall(\r\n              &quot;SELECT [rangeName] FROM [dbo].[products] WHERE [productName] IN (&quot;\r\n              + repeatString(&quot;?&quot;, &quot;, &quot;, products.size()) + &quot;) GROUP BY [rangeName]&quot;)) {\r\n        int fieldNo = 1;  //NOPMD DU anomaly\r\n        for (final DbProduct product: products) {\r\n          statement.setInt(fieldNo++, product.getId());\r\n        }\r\n        try (ResultSet rset = statement.executeQuery()) {\r\n          final String rangeName;\r\n          if (rset.next()) {\r\n    \t\t//Get the first range name\r\n    \t    rangeName = Nz.nz(rset.getString(&quot;rangeName&quot;));\r\n    \t  } else {\r\n    \t\t//There isn&#39;t one so return empty string\r\n            rangeName = &quot;&quot;;\r\n    \t  }\r\n          if (rset.next()) {\r\n            //But, if there are multiple ranges, this is an error so treat it as such\r\n            throw new SQLException(&quot;The products you are trying to save exist already in the dabase under more than one range. &quot;\r\n                + &quot;Cannot process the change&quot;);\r\n          }\r\n          return rangeName;\r\n        }\r\n      }\r\n    }\r\n\r\n","title":"How to pass List in sql query","body":"<p>I know this is a long time past but this was the page that returned when I looked for a solution to exactly this problem. It seems that all answers are not perfect for one reason or another (including the possibility of SQL injection which is a real concern).So, here's my solution:-</p>\n<pre><code>/**\n * Checks if this range exists in the database already.\n * If it does, it will return the original name.\n * @param products the list of product names to check\n * @return  The range's name in the database\n * @throws SQLException if SQL fails\n *   (or if it exists but with multiple names)\n */\nprivate String getOriginalName(final List&lt;String&gt; products)throws SQLException {\n  if (products.isEmpty()) {\n    throw new SQLException(&quot;Cannot check an empty list&quot;);\n  }\n  try (Connection connection = ConnectionPoolConfigRulesUtils.getConnection();\n      PreparedStatement statement = connection.prepareCall(\n          &quot;SELECT [rangeName] FROM [dbo].[products] WHERE [productName] IN (&quot;\n          + repeatString(&quot;?&quot;, &quot;, &quot;, products.size()) + &quot;) GROUP BY [rangeName]&quot;)) {\n    int fieldNo = 1;  //NOPMD DU anomaly\n    for (final DbProduct product: products) {\n      statement.setInt(fieldNo++, product.getId());\n    }\n    try (ResultSet rset = statement.executeQuery()) {\n      final String rangeName;\n      if (rset.next()) {\n        //Get the first range name\n        rangeName = Nz.nz(rset.getString(&quot;rangeName&quot;));\n      } else {\n        //There isn't one so return empty string\n        rangeName = &quot;&quot;;\n      }\n      if (rset.next()) {\n        //But, if there are multiple ranges, this is an error so treat it as such\n        throw new SQLException(&quot;The products you are trying to save exist already in the dabase under more than one range. &quot;\n            + &quot;Cannot process the change&quot;);\n      }\n      return rangeName;\n    }\n  }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2917853,"reputation":41,"user_id":2500700,"display_name":"Tatool"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1682859311,"creation_date":1682859311,"answer_id":76141377,"question_id":7095921,"body_markdown":"I&#39;m adding this here in case someone stumbles upon it - like me.\r\nThe easy way to parameterize the list to be used in the &quot;IN&quot; clause is to use the STRING_SPLIT function.\r\n\r\nDeclare @FirstNamesList nvarchar(100) = &#39;Mark,John,Sara&#39;\r\nSelect * from STRING_SPLIT(@FirstNamesList, &#39;,&#39;)\r\n\r\nhttps://www.pragimtech.com/blog/sql-optimization/sql-server-select-where-in-list/","title":"How to pass List in sql query","body":"<p>I'm adding this here in case someone stumbles upon it - like me.\nThe easy way to parameterize the list to be used in the &quot;IN&quot; clause is to use the STRING_SPLIT function.</p>\n<p>Declare @FirstNamesList nvarchar(100) = 'Mark,John,Sara'\nSelect * from STRING_SPLIT(@FirstNamesList, ',')</p>\n<p><a href=\"https://www.pragimtech.com/blog/sql-optimization/sql-server-select-where-in-list/\" rel=\"nofollow noreferrer\">https://www.pragimtech.com/blog/sql-optimization/sql-server-select-where-in-list/</a></p>\n"}],"owner":{"account_id":311718,"reputation":7444,"user_id":625454,"accept_rate":45,"display_name":"n92"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":111578,"favorite_count":0,"down_vote_count":0,"up_vote_count":19,"answer_count":9,"score":19,"last_activity_date":1682859311,"creation_date":1313596899,"question_id":7095921,"body_markdown":"I have of values (`1, 2, 3`, for example), and I want to pass that list to a SQL query:\r\n\r\n    &quot;select name from tbl where id in&quot; + list \r\n\r\nHow might I achieve this?","title":"How to pass List in sql query","body":"<p>I have of values (<code>1, 2, 3</code>, for example), and I want to pass that list to a SQL query:</p>\n\n<pre><code>\"select name from tbl where id in\" + list \n</code></pre>\n\n<p>How might I achieve this?</p>\n"},{"tags":["java","tags","metadata","opus"],"answers":[{"tags":[],"owner":{"account_id":1144664,"reputation":14104,"user_id":1127699,"accept_rate":62,"display_name":"Terence Eden"},"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1548006875,"creation_date":1548006875,"answer_id":54279275,"question_id":49496995,"body_markdown":"If you are encoding an existing audio file to opus, then it is easy to do using [opusenc](https://opus-codec.org/downloads/):\r\n\r\n`opusenc input.wav out.opus --title &quot;This is a title&quot; --artist &quot;The Beatles&quot;`\r\n\r\nThere are several metadata options\r\n\r\n     --title title      Set track title\r\n     --artist artist    Set artist or author, may be used multiple times\r\n     --album album      Set album or collection\r\n     --genre genre      Set genre, may be used multiple times\r\n     --date YYYY-MM-DD  Set date of track (YYYY, YYYY-MM, or YYYY-MM-DD)\r\n     --comment tag=val  Add the given string as an extra comment\r\n                          This may be used multiple times\r\n     --picture file     Attach album art (see --help-picture)","title":"How Can I Add Metadata in opus files?","body":"<p>If you are encoding an existing audio file to opus, then it is easy to do using <a href=\"https://opus-codec.org/downloads/\" rel=\"nofollow noreferrer\">opusenc</a>:</p>\n\n<p><code>opusenc input.wav out.opus --title \"This is a title\" --artist \"The Beatles\"</code></p>\n\n<p>There are several metadata options</p>\n\n<pre><code> --title title      Set track title\n --artist artist    Set artist or author, may be used multiple times\n --album album      Set album or collection\n --genre genre      Set genre, may be used multiple times\n --date YYYY-MM-DD  Set date of track (YYYY, YYYY-MM, or YYYY-MM-DD)\n --comment tag=val  Add the given string as an extra comment\n                      This may be used multiple times\n --picture file     Attach album art (see --help-picture)\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1901829,"reputation":5197,"user_id":1717535,"accept_rate":50,"display_name":"Fabien Snauwaert"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1599475427,"creation_date":1599475427,"answer_id":63776007,"question_id":49496995,"body_markdown":"With FFmpeg:\r\n\r\n```bash\r\nffmpeg -i myfile.opus -metadata FOO=&quot;Bar Baz&quot; -codec copy myfile-withmeta.opus\r\n```\r\n\r\nThen an `ffprobe` on the file will confirm the presence of the new metadata entry.","title":"How Can I Add Metadata in opus files?","body":"<p>With FFmpeg:</p>\n<pre class=\"lang-sh prettyprint-override\"><code>ffmpeg -i myfile.opus -metadata FOO=&quot;Bar Baz&quot; -codec copy myfile-withmeta.opus\n</code></pre>\n<p>Then an <code>ffprobe</code> on the file will confirm the presence of the new metadata entry.</p>\n"},{"tags":[],"owner":{"account_id":24077008,"reputation":1,"user_id":18052193,"display_name":"Richard"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1643319695,"creation_date":1643319695,"answer_id":70886124,"question_id":49496995,"body_markdown":"The &#39;Foobar2000&#39; media player will allow you add metadata (including images) to a .opus audio file. It&#39;s free to download for Windows and IOS.","title":"How Can I Add Metadata in opus files?","body":"<p>The 'Foobar2000' media player will allow you add metadata (including images) to a .opus audio file. It's free to download for Windows and IOS.</p>\n"},{"tags":[],"owner":{"account_id":16886671,"reputation":1,"user_id":12211310,"display_name":"Garrus Archangel"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1682859262,"creation_date":1682859262,"answer_id":76141371,"question_id":49496995,"body_markdown":"If you don&#39;t need to do it in your code or in Bash or something, you can use VLC player to edit metadata. And you don&#39;t need to convert or copy or do anything like that. Just open your file, Go to Tools -&gt; Media Information -&gt; General. Edit and save. That&#39;s it.","title":"How Can I Add Metadata in opus files?","body":"<p>If you don't need to do it in your code or in Bash or something, you can use VLC player to edit metadata. And you don't need to convert or copy or do anything like that. Just open your file, Go to Tools -&gt; Media Information -&gt; General. Edit and save. That's it.</p>\n"}],"owner":{"account_id":2348787,"reputation":10425,"user_id":2058221,"accept_rate":92,"display_name":"Sarah Szabo"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":6154,"favorite_count":0,"down_vote_count":0,"up_vote_count":5,"accepted_answer_id":54279275,"answer_count":4,"score":5,"last_activity_date":1682859262,"creation_date":1522084300,"question_id":49496995,"body_markdown":"I&#39;m interested in writing metadata for `.opus` files, but all of the posts that I&#39;ve seen so far are for more mainstream formats such as .ogg, or .mp3. I&#39;m uncertain as to whether ID3 tags work with .opus files, and I can&#39;t find any resources that say whether they do or not. I&#39;ve seen something similar in (https://stackoverflow.com/questions/3444323/how-to-add-metadata-to-wav-file).\r\n\r\nHow can I write metadata such as title, author, and the like to .opus files?\r\n\r\nI&#39;m thinking that a `libopus` enabled `ffmpeg` would be able to do it, but from the documentation it is not obvious to me how to do it.\r\n\r\nSolutions using just `ffmpeg` are preferred, but any open source Java library should be just fine as well.","title":"How Can I Add Metadata in opus files?","body":"<p>I'm interested in writing metadata for <code>.opus</code> files, but all of the posts that I've seen so far are for more mainstream formats such as .ogg, or .mp3. I'm uncertain as to whether ID3 tags work with .opus files, and I can't find any resources that say whether they do or not. I've seen something similar in (<a href=\"https://stackoverflow.com/questions/3444323/how-to-add-metadata-to-wav-file\">How to add metadata to WAV file?</a>).</p>\n\n<p>How can I write metadata such as title, author, and the like to .opus files?</p>\n\n<p>I'm thinking that a <code>libopus</code> enabled <code>ffmpeg</code> would be able to do it, but from the documentation it is not obvious to me how to do it.</p>\n\n<p>Solutions using just <code>ffmpeg</code> are preferred, but any open source Java library should be just fine as well.</p>\n"},{"tags":["java","spring","spring-boot","jdbc","spring-jdbc"],"answers":[{"tags":[],"owner":{"account_id":19535095,"reputation":2864,"user_id":14294053,"display_name":"Mar-Z"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1682787769,"creation_date":1682787769,"answer_id":76137401,"question_id":76137153,"body_markdown":"You don&#39;t need to worry about transactions and parallel changes to the sequence. With the call of ***currval(&#39;client_id_seq&#39;)*** you will get exactly the value of the sequence which has been obtained with *nextval(&#39;client_id_seq&#39;)* in **YOUR** current session only. Other sessions will use different value. This is garrantied by the database.\r\n\r\nMore details here: [https://www.postgresql.org/docs/current/functions-sequence.html][1]\r\n\r\n\r\n  [1]: https://www.postgresql.org/docs/current/functions-sequence.html","title":"How to run multiple query/update calls as part of the same transaction with Spring&#39;s JdbcTemplate","body":"<p>You don't need to worry about transactions and parallel changes to the sequence. With the call of <em><strong>currval('client_id_seq')</strong></em> you will get exactly the value of the sequence which has been obtained with <em>nextval('client_id_seq')</em> in <strong>YOUR</strong> current session only. Other sessions will use different value. This is garrantied by the database.</p>\n<p>More details here: <a href=\"https://www.postgresql.org/docs/current/functions-sequence.html\" rel=\"nofollow noreferrer\">https://www.postgresql.org/docs/current/functions-sequence.html</a></p>\n"}],"owner":{"account_id":13443994,"reputation":354,"user_id":9700478,"display_name":"GeekOverdose"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":415,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76137401,"answer_count":1,"score":0,"last_activity_date":1682858336,"creation_date":1682784012,"question_id":76137153,"body_markdown":"I&#39;m writing my own `DAO` layer with Spring JDBC.\r\nI have a method called `T insert(T entity);` which inserts an entity and returns the updated version to the user. In my code, the logic is made up of two parts, a call to `NamedParameterJdbcTemplate.update` to save the entity and then `NamedParameterJdbcTemplate.queryForObject` to retrieve the updated entity from the database.\r\n\r\nThe first part executes a query similar to this:\r\n```sql\r\nINSERT INTO client (email_address, company_name)\r\nVALUES (&#39;some@email.com&#39;, &#39;some company name&#39;);\r\n```\r\n\r\nAnd the second part executes one similar to this:\r\n```sql\r\nSELECT * FROM client t\r\nWHERE t.id = currval(&#39;client_id_seq&#39;);\r\n```\r\nI&#39;m using Postgres, where `client` is actually an updatable view, not a table, and `client_id_seq` is a manually defined sequence to make `client` behave like a table.\r\n\r\nAnd it works fine, except for the fact that those two statements aren&#39;t transactional. In theory, between the time of executing the first and second statement, another parallel statement could be executed, which alters `currval(&#39;client_id_seq&#39;)`, making the result of the second part of my method erroneous.\r\n\r\nIs there a way of executing and fetching data all at once with Spring Jdbc? I tried multi-statement queries and the driver complained that there are multiple `ResultSet`s, I also tried writing a transaction query like this:\r\n```sql\r\nBEGIN;\r\n\r\nINSERT INTO client (email_address, company_name)\r\nVALUES (&#39;some@email.com&#39;, &#39;some company name&#39;);\r\n\r\nSELECT * FROM client t\r\nWHERE t.id = currval(&#39;client_id_seq&#39;);\r\n\r\nCOMMIT;\r\n```\r\nAnd the driver complained that the `ResultSet` was null.\r\n\r\nHow do I ensure consistency here between these two fetches?\r\n\r\n### EDIT:\r\nIf I am understanding [@Mar-Z](https://stackoverflow.com/users/14294053/mar-z)&#39;s answer correctly, if the value of `client_id_seq` is 0, and SESSION 1 calls `nextval(&#39;client_id_seq&#39;)`, then SESSION 2 calls `nextval(&#39;client_id_seq&#39;)`, the ACTUAL value of `client_id_seq` is now 2. BUT, if I call `currval(&#39;client_id_seq&#39;)` in SESSION 1, I&#39;ll get back 1, and if I call `currval(&#39;client_id_seq&#39;)` in SESSION 2, I&#39;ll get back a 2. That seems promising.\r\n\r\nThe only other thing I might be worried about is, I know that Spring Boot uses a connection pool (HikariCP by default I think), and 1 authenticated connection = 1 postgres session. Could it be possible that, lets say we have some connection `SESS_1` in the connection pool. The first `update` call to insert the `client` is submitted to the DB via `SESS_1`. INBETWEEN the first and second call of my `insert()` method, another process also submits some query to the DB via `SESS_1`, hence altering the `currval(&#39;client_id_seq&#39;)` for `SESS_1`, and then the second part of my method runs the `SELECT` query, again, on `SESS_1`, so in the end, I have erroneous data. Or even worse, what if the connection pool decides to close `SESS_1` and supply a different connection, say `SESS_2`, to the second part of my `insert()` method?\r\n\r\nDoes Spring JDBC have some things to assure this doesn&#39;t happen? Do I need to configure anything?\r\n\r\n### EDIT 2\r\nWhen marking a method with `@Transactional`, Spring Boot binds the connection to the thread which is running the method, and only releases the connection back to the pool when the transaction completes or is reversed. So in theory, annotating my `insert()` method with `@Transactional` should guarantee data consistency.","title":"How to run multiple query/update calls as part of the same transaction with Spring&#39;s JdbcTemplate","body":"<p>I'm writing my own <code>DAO</code> layer with Spring JDBC.\nI have a method called <code>T insert(T entity);</code> which inserts an entity and returns the updated version to the user. In my code, the logic is made up of two parts, a call to <code>NamedParameterJdbcTemplate.update</code> to save the entity and then <code>NamedParameterJdbcTemplate.queryForObject</code> to retrieve the updated entity from the database.</p>\n<p>The first part executes a query similar to this:</p>\n<pre class=\"lang-sql prettyprint-override\"><code>INSERT INTO client (email_address, company_name)\nVALUES ('some@email.com', 'some company name');\n</code></pre>\n<p>And the second part executes one similar to this:</p>\n<pre class=\"lang-sql prettyprint-override\"><code>SELECT * FROM client t\nWHERE t.id = currval('client_id_seq');\n</code></pre>\n<p>I'm using Postgres, where <code>client</code> is actually an updatable view, not a table, and <code>client_id_seq</code> is a manually defined sequence to make <code>client</code> behave like a table.</p>\n<p>And it works fine, except for the fact that those two statements aren't transactional. In theory, between the time of executing the first and second statement, another parallel statement could be executed, which alters <code>currval('client_id_seq')</code>, making the result of the second part of my method erroneous.</p>\n<p>Is there a way of executing and fetching data all at once with Spring Jdbc? I tried multi-statement queries and the driver complained that there are multiple <code>ResultSet</code>s, I also tried writing a transaction query like this:</p>\n<pre class=\"lang-sql prettyprint-override\"><code>BEGIN;\n\nINSERT INTO client (email_address, company_name)\nVALUES ('some@email.com', 'some company name');\n\nSELECT * FROM client t\nWHERE t.id = currval('client_id_seq');\n\nCOMMIT;\n</code></pre>\n<p>And the driver complained that the <code>ResultSet</code> was null.</p>\n<p>How do I ensure consistency here between these two fetches?</p>\n<h3>EDIT:</h3>\n<p>If I am understanding <a href=\"https://stackoverflow.com/users/14294053/mar-z\">@Mar-Z</a>'s answer correctly, if the value of <code>client_id_seq</code> is 0, and SESSION 1 calls <code>nextval('client_id_seq')</code>, then SESSION 2 calls <code>nextval('client_id_seq')</code>, the ACTUAL value of <code>client_id_seq</code> is now 2. BUT, if I call <code>currval('client_id_seq')</code> in SESSION 1, I'll get back 1, and if I call <code>currval('client_id_seq')</code> in SESSION 2, I'll get back a 2. That seems promising.</p>\n<p>The only other thing I might be worried about is, I know that Spring Boot uses a connection pool (HikariCP by default I think), and 1 authenticated connection = 1 postgres session. Could it be possible that, lets say we have some connection <code>SESS_1</code> in the connection pool. The first <code>update</code> call to insert the <code>client</code> is submitted to the DB via <code>SESS_1</code>. INBETWEEN the first and second call of my <code>insert()</code> method, another process also submits some query to the DB via <code>SESS_1</code>, hence altering the <code>currval('client_id_seq')</code> for <code>SESS_1</code>, and then the second part of my method runs the <code>SELECT</code> query, again, on <code>SESS_1</code>, so in the end, I have erroneous data. Or even worse, what if the connection pool decides to close <code>SESS_1</code> and supply a different connection, say <code>SESS_2</code>, to the second part of my <code>insert()</code> method?</p>\n<p>Does Spring JDBC have some things to assure this doesn't happen? Do I need to configure anything?</p>\n<h3>EDIT 2</h3>\n<p>When marking a method with <code>@Transactional</code>, Spring Boot binds the connection to the thread which is running the method, and only releases the connection back to the pool when the transaction completes or is reversed. So in theory, annotating my <code>insert()</code> method with <code>@Transactional</code> should guarantee data consistency.</p>\n"},{"tags":["java","xml","tomcat","jdbc","tomcat9"],"comments":[{"owner":{"account_id":12743722,"reputation":19956,"user_id":12567365,"display_name":"andrewJames"},"score":1,"creation_date":1682625941,"post_id":76124067,"comment_id":134249757,"body_markdown":"Regarding the class not found problem: If `import org.apache.commons.dbcp2.BasicDataSourceFactory;` throws a compile-time error, then your application needs the DBCP2 library - for example, if you use Maven, see [here](https://mvnrepository.com/artifact/org.apache.commons/commons-dbcp2/2.9.0). But mark is as `&lt;scope&gt;provided&lt;/scope&gt;`, as these classes are part of Tomcat already (when you deploy your app). This assumes you are actually using DBCP2 (the default Tomcat pool solution). It looks as if you are.","body":"Regarding the class not found problem: If <code>import org.apache.commons.dbcp2.BasicDataSourceFactory;</code> throws a compile-time error, then your application needs the DBCP2 library - for example, if you use Maven, see <a href=\"https://mvnrepository.com/artifact/org.apache.commons/commons-dbcp2/2.9.0\" rel=\"nofollow noreferrer\">here</a>. But mark is as <code>&lt;scope&gt;provided&lt;&#47;scope&gt;</code>, as these classes are part of Tomcat already (when you deploy your app). This assumes you are actually using DBCP2 (the default Tomcat pool solution). It looks as if you are."},{"owner":{"account_id":12743722,"reputation":19956,"user_id":12567365,"display_name":"andrewJames"},"score":3,"creation_date":1682626075,"post_id":76124067,"comment_id":134249781,"body_markdown":"The only other thing I would add is: &quot;_encrypted for any audit purposes_&quot; - I think an organization is better off spending its time in securing access to its servers, as this does not really provide much security (it may even give a false sense of security). But I understand this is just an opinion - and you may not have any choice, anyway.","body":"The only other thing I would add is: &quot;<i>encrypted for any audit purposes</i>&quot; - I think an organization is better off spending its time in securing access to its servers, as this does not really provide much security (it may even give a false sense of security). But I understand this is just an opinion - and you may not have any choice, anyway."},{"owner":{"account_id":7701,"reputation":47163,"user_id":13447,"accept_rate":100,"display_name":"Olaf Kock"},"score":1,"creation_date":1682668439,"post_id":76124067,"comment_id":134255038,"body_markdown":"For the record: [Here&#39;s the mentioned FAQ article](https://cwiki.apache.org/confluence/display/TOMCAT/Password). It even links to the Vault implementation, implying you don&#39;t need to implement anything to achieve a higher level of obfuscation.","body":"For the record: <a href=\"https://cwiki.apache.org/confluence/display/TOMCAT/Password\" rel=\"nofollow noreferrer\">Here&#39;s the mentioned FAQ article</a>. It even links to the Vault implementation, implying you don&#39;t need to implement anything to achieve a higher level of obfuscation."}],"owner":{"account_id":9559007,"reputation":403,"user_id":7100546,"accept_rate":100,"display_name":"Rob"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":138,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1682857286,"creation_date":1682624444,"question_id":76124067,"body_markdown":"Like the title says, our application has resources in the context.xml that we need to encrypt for security audit purposes. I know Tomcat&#39;s FAQ mentions security through obscurity, but we need to have it encrypted for any audit purposes.\r\n\r\nCurrently a resource in the context.xml looks like this: \r\n\r\n```xml\r\n&lt;Resource \r\n\t  name=&quot;jdbc/OracleDataSource&quot; \r\n\t  auth=&quot;Container&quot; \r\n\t  type=&quot;javax.sql.DataSource&quot; \r\n\t  driverClassName=&quot;oracle.jdbc.OracleDriver&quot; \r\n\t  url=&quot;jdbc:oracle:thin:@ServerName:PORT/NAME&quot; \r\n\t  username=&quot;APP_USERNAME&quot; \r\n\t  password=&quot;APP_PASSWORD&quot;\r\n      testWhileIdle=&quot;true&quot;\r\n      testOnBorrow=&quot;true&quot;\r\n      testOnReturn=&quot;false&quot;\r\n      validationQuery=&quot;select 1 from dual&quot;\r\n      timeBetweenEvictionRunsMillis=&quot;5000&quot;\r\n      maxTotal=&quot;100&quot;\r\n      maxIdle=&quot;20&quot;\r\n      minIdle=&quot;10&quot;\r\n      maxWaitMillis=&quot;10000&quot;\r\n      initialSize=&quot;10&quot;\r\n      removeAbandonedTimeout=&quot;1800&quot;\r\n      removeAbandonedOnBorrow=&quot;true&quot;\r\n      removeAbandonedOnMaintenance=&quot;true&quot;\r\n      logAbandoned=&quot;true&quot;\r\n      minEvictableIdleTimeMillis=&quot;30000&quot;\r\n/&gt;\r\n```\r\n\r\nIn our app code we make use of RC4 encoding which the files know to decrypt from the @RC4Encode@XXX,XXX,XXX,XXX,XXX,XXX,XXX format into a clear-text password for other credential uses.\r\n\r\nI was hoping to implement this somehow in our context.xml, but I&#39;m unsure how to approach doing that. I saw some previously posts here about BasicDataSourceFactory, but I&#39;m not quite understanding the implementations and when I try to import BasicDataSourceFactory and I get a ClassNotFoundException. I did try to do a variable import in the context.xml however we don&#39;t have access the the catalina.properties on the server that our app sits on and we don&#39;t have access to the folder structure that it resides in either, which from my understanding killed the possibility of using properties replacement or external XML entities.\r\n\r\nIf I could figure out how to resolve the DataSourceFactory not found error, I could try to copy some of the &quot;decode&quot; methods used in decoding our passwords back to clear-text and directly call a decode method against the RC4 encoded password and then pass that to the context.xml.\r\n\r\nRough pseudo-code of that DataSourceFactory method:\r\n```java\r\npublic class APPDataSourceFactory extends BasicDataSourceFactory {\r\n    private String encrypted_pwd = &quot;@RC4Encode@123,456,789,012,345&quot;;\r\n    public void decrypt_pwd(encrypted_pwd,key){\r\n        //Decryption Steps\r\n        return decrypted_pwd;\r\n    }\r\n}\r\n```\r\n","title":"How can I encrypt the passwords of a data source on Tomcat 9 in the context.xml?","body":"<p>Like the title says, our application has resources in the context.xml that we need to encrypt for security audit purposes. I know Tomcat's FAQ mentions security through obscurity, but we need to have it encrypted for any audit purposes.</p>\n<p>Currently a resource in the context.xml looks like this:</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;Resource \n      name=&quot;jdbc/OracleDataSource&quot; \n      auth=&quot;Container&quot; \n      type=&quot;javax.sql.DataSource&quot; \n      driverClassName=&quot;oracle.jdbc.OracleDriver&quot; \n      url=&quot;jdbc:oracle:thin:@ServerName:PORT/NAME&quot; \n      username=&quot;APP_USERNAME&quot; \n      password=&quot;APP_PASSWORD&quot;\n      testWhileIdle=&quot;true&quot;\n      testOnBorrow=&quot;true&quot;\n      testOnReturn=&quot;false&quot;\n      validationQuery=&quot;select 1 from dual&quot;\n      timeBetweenEvictionRunsMillis=&quot;5000&quot;\n      maxTotal=&quot;100&quot;\n      maxIdle=&quot;20&quot;\n      minIdle=&quot;10&quot;\n      maxWaitMillis=&quot;10000&quot;\n      initialSize=&quot;10&quot;\n      removeAbandonedTimeout=&quot;1800&quot;\n      removeAbandonedOnBorrow=&quot;true&quot;\n      removeAbandonedOnMaintenance=&quot;true&quot;\n      logAbandoned=&quot;true&quot;\n      minEvictableIdleTimeMillis=&quot;30000&quot;\n/&gt;\n</code></pre>\n<p>In our app code we make use of RC4 encoding which the files know to decrypt from the @RC4Encode@XXX,XXX,XXX,XXX,XXX,XXX,XXX format into a clear-text password for other credential uses.</p>\n<p>I was hoping to implement this somehow in our context.xml, but I'm unsure how to approach doing that. I saw some previously posts here about BasicDataSourceFactory, but I'm not quite understanding the implementations and when I try to import BasicDataSourceFactory and I get a ClassNotFoundException. I did try to do a variable import in the context.xml however we don't have access the the catalina.properties on the server that our app sits on and we don't have access to the folder structure that it resides in either, which from my understanding killed the possibility of using properties replacement or external XML entities.</p>\n<p>If I could figure out how to resolve the DataSourceFactory not found error, I could try to copy some of the &quot;decode&quot; methods used in decoding our passwords back to clear-text and directly call a decode method against the RC4 encoded password and then pass that to the context.xml.</p>\n<p>Rough pseudo-code of that DataSourceFactory method:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class APPDataSourceFactory extends BasicDataSourceFactory {\n    private String encrypted_pwd = &quot;@RC4Encode@123,456,789,012,345&quot;;\n    public void decrypt_pwd(encrypted_pwd,key){\n        //Decryption Steps\n        return decrypted_pwd;\n    }\n}\n</code></pre>\n"},{"tags":["java","swing","event-handling","jspinner","changelistener"],"answers":[{"tags":[],"owner":{"account_id":81822,"reputation":204250,"user_id":230513,"accept_rate":100,"display_name":"trashgod"},"down_vote_count":0,"up_vote_count":12,"is_accepted":false,"score":12,"last_activity_date":1317242922,"creation_date":1287243292,"answer_id":3949518,"question_id":3949382,"body_markdown":"The code you show appears correct. For reference, here is a working example.\r\n\r\nAddendum: While the `JSpinner` has focus, the left and right arrow keys move the caret. The up arrow increments and the down arrow decrements the field containing the caret. The change is (effectively) simultaneous in both the spinner and the label.\r\n\r\nTo access the `JFormattedTextField` of the [`JSpinner.DateEditor`][1], use the parent&#39;s [`getTextField()`][2] method. A suitable caret listener or text input listener may then be used to update the label as desired.\r\n\r\nAddendum: Update to use [`setCommitsOnValidEdit`][3], as suggested [here][4].\r\n\r\n    import java.awt.EventQueue;\r\n    import java.awt.GridLayout;\r\n    import java.util.Calendar;\r\n    import java.util.Date;\r\n    import javax.swing.JFormattedTextField;\r\n    import javax.swing.JFrame;\r\n    import javax.swing.JLabel;\r\n    import javax.swing.JPanel;\r\n    import javax.swing.JSpinner;\r\n    import javax.swing.JSpinner.DateEditor;\r\n    import javax.swing.SpinnerDateModel;\r\n    import javax.swing.event.ChangeEvent;\r\n    import javax.swing.event.ChangeListener;\r\n    import javax.swing.text.DefaultFormatter;\r\n    \r\n    /**\r\n     * @see https://stackoverflow.com/questions/2010819\r\n     * @see https://stackoverflow.com/questions/3949518\r\n     */\r\n    public class JSpinnerTest extends JPanel {\r\n    \r\n        public static void main(String args[]) {\r\n            EventQueue.invokeLater(new Runnable() {\r\n    \r\n                @Override\r\n                public void run() {\r\n                    JFrame f = new JFrame(&quot;JSpinnerTest&quot;);\r\n                    f.add(new JSpinnerTest());\r\n                    f.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\r\n                    f.pack();\r\n                    f.setVisible(true);\r\n                }\r\n            });\r\n        }\r\n    \r\n        public JSpinnerTest() {\r\n            super(new GridLayout(0, 1));\r\n            final JLabel label = new JLabel();\r\n            final JSpinner spinner = new JSpinner();\r\n            Calendar calendar = Calendar.getInstance();\r\n            Date initDate = calendar.getTime();\r\n            calendar.add(Calendar.YEAR, -5);\r\n            Date earliestDate = calendar.getTime();\r\n            calendar.add(Calendar.YEAR, 10);\r\n            Date latestDate = calendar.getTime();\r\n            spinner.setModel(new SpinnerDateModel(\r\n                initDate, earliestDate, latestDate, Calendar.MONTH));\r\n            DateEditor editor = new JSpinner.DateEditor(spinner, &quot;MMM yyyy&quot;);\r\n            spinner.setEditor(editor);\r\n            JFormattedTextField jtf = editor.getTextField();\r\n            DefaultFormatter formatter = (DefaultFormatter) jtf.getFormatter();\r\n            formatter.setCommitsOnValidEdit(true);\r\n            spinner.addChangeListener(new ChangeListener() {\r\n    \r\n                @Override\r\n                public void stateChanged(ChangeEvent e) {\r\n                    JSpinner s = (JSpinner) e.getSource();\r\n                    label.setText(s.getValue().toString());\r\n                }\r\n            });\r\n            label.setText(initDate.toString());\r\n            this.add(spinner);\r\n            this.add(label);\r\n        }\r\n    }\r\n\r\n\r\n  [1]:http://download.oracle.com/javase/6/docs/api/javax/swing/JSpinner.DateEditor.html\r\n  [2]:http://download.oracle.com/javase/6/docs/api/javax/swing/JSpinner.DefaultEditor.html#getTextField%28%29\r\n  [3]: http://download.oracle.com/javase/7/docs/api/javax/swing/text/DefaultFormatter.html#setCommitsOnValidEdit%28boolean%29\r\n  [4]: https://stackoverflow.com/questions/3949382/jspinner-value-change-events/7587253#7587253","title":"JSpinner Value change Events","body":"<p>The code you show appears correct. For reference, here is a working example.</p>\n\n<p>Addendum: While the <code>JSpinner</code> has focus, the left and right arrow keys move the caret. The up arrow increments and the down arrow decrements the field containing the caret. The change is (effectively) simultaneous in both the spinner and the label.</p>\n\n<p>To access the <code>JFormattedTextField</code> of the <a href=\"http://download.oracle.com/javase/6/docs/api/javax/swing/JSpinner.DateEditor.html\" rel=\"noreferrer\"><code>JSpinner.DateEditor</code></a>, use the parent's <a href=\"http://download.oracle.com/javase/6/docs/api/javax/swing/JSpinner.DefaultEditor.html#getTextField%28%29\" rel=\"noreferrer\"><code>getTextField()</code></a> method. A suitable caret listener or text input listener may then be used to update the label as desired.</p>\n\n<p>Addendum: Update to use <a href=\"http://download.oracle.com/javase/7/docs/api/javax/swing/text/DefaultFormatter.html#setCommitsOnValidEdit%28boolean%29\" rel=\"noreferrer\"><code>setCommitsOnValidEdit</code></a>, as suggested <a href=\"https://stackoverflow.com/questions/3949382/jspinner-value-change-events/7587253#7587253\">here</a>.</p>\n\n<pre><code>import java.awt.EventQueue;\nimport java.awt.GridLayout;\nimport java.util.Calendar;\nimport java.util.Date;\nimport javax.swing.JFormattedTextField;\nimport javax.swing.JFrame;\nimport javax.swing.JLabel;\nimport javax.swing.JPanel;\nimport javax.swing.JSpinner;\nimport javax.swing.JSpinner.DateEditor;\nimport javax.swing.SpinnerDateModel;\nimport javax.swing.event.ChangeEvent;\nimport javax.swing.event.ChangeListener;\nimport javax.swing.text.DefaultFormatter;\n\n/**\n * @see https://stackoverflow.com/questions/2010819\n * @see https://stackoverflow.com/questions/3949518\n */\npublic class JSpinnerTest extends JPanel {\n\n    public static void main(String args[]) {\n        EventQueue.invokeLater(new Runnable() {\n\n            @Override\n            public void run() {\n                JFrame f = new JFrame(\"JSpinnerTest\");\n                f.add(new JSpinnerTest());\n                f.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\n                f.pack();\n                f.setVisible(true);\n            }\n        });\n    }\n\n    public JSpinnerTest() {\n        super(new GridLayout(0, 1));\n        final JLabel label = new JLabel();\n        final JSpinner spinner = new JSpinner();\n        Calendar calendar = Calendar.getInstance();\n        Date initDate = calendar.getTime();\n        calendar.add(Calendar.YEAR, -5);\n        Date earliestDate = calendar.getTime();\n        calendar.add(Calendar.YEAR, 10);\n        Date latestDate = calendar.getTime();\n        spinner.setModel(new SpinnerDateModel(\n            initDate, earliestDate, latestDate, Calendar.MONTH));\n        DateEditor editor = new JSpinner.DateEditor(spinner, \"MMM yyyy\");\n        spinner.setEditor(editor);\n        JFormattedTextField jtf = editor.getTextField();\n        DefaultFormatter formatter = (DefaultFormatter) jtf.getFormatter();\n        formatter.setCommitsOnValidEdit(true);\n        spinner.addChangeListener(new ChangeListener() {\n\n            @Override\n            public void stateChanged(ChangeEvent e) {\n                JSpinner s = (JSpinner) e.getSource();\n                label.setText(s.getValue().toString());\n            }\n        });\n        label.setText(initDate.toString());\n        this.add(spinner);\n        this.add(label);\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":242248,"reputation":1693,"user_id":513637,"accept_rate":79,"display_name":"spuas"},"down_vote_count":1,"up_vote_count":3,"is_accepted":false,"score":2,"last_activity_date":1307524723,"creation_date":1307524723,"answer_id":6276603,"question_id":3949382,"body_markdown":"Problem here is that when you edit the `JSpinner` value manually by typing from the keyboard, the `stateChanged` event is not fired until the focus is lost by the `JSpinner` or until Enter key has been pressed.\r\n\r\nIf you want to upload the value, a `KeyListener` is needed which will perform a `setValue` in the `JSpinner` for each typed key.\r\n\r\nI leave an example here for a `JSpinner` with a `SpinnerNumberModel`:\r\n\r\n    JSpinner spinner= new JSpinner();\r\n    spinner.setModel(new SpinnerNumberModel(0, 0, Integer.MAX_VALUE, 1));\r\n    spinner.addChangeListener(new ChangeListener() {\r\n    \t@Override\r\n        public void stateChanged(ChangeEvent e) {\r\n    \t\tjLabel.setText(spinner.getValue());\r\n        }\r\n    });\r\n    final JTextField jtf = ((JSpinner.DefaultEditor) spinner.getEditor()).getTextField();\r\n    jtf.addKeyListener(new KeyAdapter() {\r\n     \t@Override\r\n    \tpublic void keyReleased(KeyEvent e) {\r\n        \tString text = jtf.getText().replace(&quot;,&quot;, &quot;&quot;);\r\n        \tint oldCaretPos = jtf.getCaretPosition();\r\n        \ttry {\r\n        \t\tInteger newValue = Integer.valueOf(text);\r\n        \t\tspinner.setValue(newValue);\r\n        \t\tjtf.setCaretPosition(oldCaretPos);\r\n        \t} catch(NumberFormatException ex) {\r\n        \t\t//Not a number in text field -&gt; do nothing\r\n        \t}\r\n        }\r\n    });","title":"JSpinner Value change Events","body":"<p>Problem here is that when you edit the <code>JSpinner</code> value manually by typing from the keyboard, the <code>stateChanged</code> event is not fired until the focus is lost by the <code>JSpinner</code> or until Enter key has been pressed.</p>\n\n<p>If you want to upload the value, a <code>KeyListener</code> is needed which will perform a <code>setValue</code> in the <code>JSpinner</code> for each typed key.</p>\n\n<p>I leave an example here for a <code>JSpinner</code> with a <code>SpinnerNumberModel</code>:</p>\n\n<pre><code>JSpinner spinner= new JSpinner();\nspinner.setModel(new SpinnerNumberModel(0, 0, Integer.MAX_VALUE, 1));\nspinner.addChangeListener(new ChangeListener() {\n    @Override\n    public void stateChanged(ChangeEvent e) {\n        jLabel.setText(spinner.getValue());\n    }\n});\nfinal JTextField jtf = ((JSpinner.DefaultEditor) spinner.getEditor()).getTextField();\njtf.addKeyListener(new KeyAdapter() {\n    @Override\n    public void keyReleased(KeyEvent e) {\n        String text = jtf.getText().replace(\",\", \"\");\n        int oldCaretPos = jtf.getCaretPosition();\n        try {\n            Integer newValue = Integer.valueOf(text);\n            spinner.setValue(newValue);\n            jtf.setCaretPosition(oldCaretPos);\n        } catch(NumberFormatException ex) {\n            //Not a number in text field -&gt; do nothing\n        }\n    }\n});\n</code></pre>\n"},{"tags":[],"owner":{"account_id":70123,"reputation":51175,"user_id":203657,"accept_rate":53,"display_name":"kleopatra"},"down_vote_count":0,"up_vote_count":51,"is_accepted":false,"score":51,"last_activity_date":1317231444,"creation_date":1317231444,"answer_id":7587253,"question_id":3949382,"body_markdown":"The answer is to configure the formatter used in the JFormattedTextField which is a child of the spinner&#39;s editor:\r\n\r\n        formatter.setCommitsOnValidEdit(true);\r\n\r\nUnfortunately, getting one&#39;s hand on it is as long and dirty as the introductory sentence: \r\n\r\n        final JSpinner spinner = new JSpinner();\r\n        JComponent comp = spinner.getEditor();\r\n        JFormattedTextField field = (JFormattedTextField) comp.getComponent(0);\r\n        DefaultFormatter formatter = (DefaultFormatter) field.getFormatter();\r\n        formatter.setCommitsOnValidEdit(true);\r\n        spinner.addChangeListener(new ChangeListener() {\r\n\r\n            @Override\r\n            public void stateChanged(ChangeEvent e) {\r\n                LOG.info(&quot;value changed: &quot; + spinner.getValue());\r\n            }\r\n        });\r\n\r\n\r\nA slightly (but not by much) cleaner way might be to subclass NumberEditor and expose a method which allows the config","title":"JSpinner Value change Events","body":"<p>The answer is to configure the formatter used in the JFormattedTextField which is a child of the spinner's editor:</p>\n\n<pre><code>    formatter.setCommitsOnValidEdit(true);\n</code></pre>\n\n<p>Unfortunately, getting one's hand on it is as long and dirty as the introductory sentence: </p>\n\n<pre><code>    final JSpinner spinner = new JSpinner();\n    JComponent comp = spinner.getEditor();\n    JFormattedTextField field = (JFormattedTextField) comp.getComponent(0);\n    DefaultFormatter formatter = (DefaultFormatter) field.getFormatter();\n    formatter.setCommitsOnValidEdit(true);\n    spinner.addChangeListener(new ChangeListener() {\n\n        @Override\n        public void stateChanged(ChangeEvent e) {\n            LOG.info(\"value changed: \" + spinner.getValue());\n        }\n    });\n</code></pre>\n\n<p>A slightly (but not by much) cleaner way might be to subclass NumberEditor and expose a method which allows the config</p>\n"},{"tags":[],"owner":{"account_id":8931127,"reputation":1,"user_id":6663720,"display_name":"Isidore Bennett"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1470060412,"creation_date":1470060412,"answer_id":38700977,"question_id":3949382,"body_markdown":"I&#39;m new so I might be breaking some rules and I might be late. But I found some of the answers a bit confusing so I played around in NetBeans IDE and found that if you right click on the jspinner GUI component placed on your jform and go to events-&gt; change, code will be generated for you. ","title":"JSpinner Value change Events","body":"<p>I'm new so I might be breaking some rules and I might be late. But I found some of the answers a bit confusing so I played around in NetBeans IDE and found that if you right click on the jspinner GUI component placed on your jform and go to events-> change, code will be generated for you. </p>\n"},{"tags":[],"owner":{"account_id":9442932,"reputation":2017,"user_id":7022735,"accept_rate":40,"display_name":"rvit34"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1476552554,"creation_date":1476523575,"answer_id":40057344,"question_id":3949382,"body_markdown":"It might be an late answer but you may use my approach.   \r\nAs *spuas* mentioned above the problem is that `stateChanged` event is fired only when focus is lost or Enter key is pressed.  \r\nUsing KeyListeners is not an good idea as well.  \r\nIt would be better to use `DocumentListener` instead. I modified spuas&#39;s example a bit and that&#39;s what I got:    \r\n\r\n       \r\n    JSpinner spinner= new JSpinner();\r\n    spinner.setModel(new SpinnerNumberModel(0, 0, Integer.MAX_VALUE, 1));\r\n    final JTextField jtf = ((JSpinner.DefaultEditor) spinner.getEditor()).getTextField();\r\n            jtf.getDocument().addDocumentListener(new DocumentListener() {\t\t\t\t\r\n\r\n            private volatile int value = 0;\r\n\r\n        \t@Override\r\n        \tpublic void removeUpdate(DocumentEvent e) {\r\n        \t\tshowChangedValue(e);\t\r\n        \t}\r\n        \t\t\t\t\r\n        \t@Override\r\n        \tpublic void insertUpdate(DocumentEvent e) {\r\n        \t\tshowChangedValue(e);\t\t\t\t\r\n        \t}\r\n        \t\t\t\t\r\n        \t@Override\r\n        \tpublic void changedUpdate(DocumentEvent e) {\r\n        \t\tshowChangedValue(e);\t\r\n        \t}\r\n        \t\t\t\t\r\n        \tprivate void showChangedValue(DocumentEvent e){\r\n        \t\ttry {\r\n        \t\t    String text = e.getDocument().getText(0, e.getDocument().getLength());\r\n        \t\t    if (text==null || text.isEmpty()) return;\r\n        \t\t        int val = Integer.parseInt(text).getValue();\r\n                    if (value!=val){\r\n                       System.out.println(String.format(&quot;changed  value: %d&quot;,val));  \t\t\t\r\n    \t               value = val;\r\n                    }\t\t\r\n        \t\t} catch (BadLocationException | NumberFormatException e1) {\r\n                              //handle if you want\r\n        \t\t}        \r\n           }\r\n    });\r\n    \r\n   \r\n\r\n\r\n\r\n","title":"JSpinner Value change Events","body":"<p>It might be an late answer but you may use my approach.<br>\nAs <em>spuas</em> mentioned above the problem is that <code>stateChanged</code> event is fired only when focus is lost or Enter key is pressed.<br>\nUsing KeyListeners is not an good idea as well.<br>\nIt would be better to use <code>DocumentListener</code> instead. I modified spuas's example a bit and that's what I got:    </p>\n\n<pre><code>JSpinner spinner= new JSpinner();\nspinner.setModel(new SpinnerNumberModel(0, 0, Integer.MAX_VALUE, 1));\nfinal JTextField jtf = ((JSpinner.DefaultEditor) spinner.getEditor()).getTextField();\n        jtf.getDocument().addDocumentListener(new DocumentListener() {              \n\n        private volatile int value = 0;\n\n        @Override\n        public void removeUpdate(DocumentEvent e) {\n            showChangedValue(e);    \n        }\n\n        @Override\n        public void insertUpdate(DocumentEvent e) {\n            showChangedValue(e);                \n        }\n\n        @Override\n        public void changedUpdate(DocumentEvent e) {\n            showChangedValue(e);    \n        }\n\n        private void showChangedValue(DocumentEvent e){\n            try {\n                String text = e.getDocument().getText(0, e.getDocument().getLength());\n                if (text==null || text.isEmpty()) return;\n                    int val = Integer.parseInt(text).getValue();\n                if (value!=val){\n                   System.out.println(String.format(\"changed  value: %d\",val));             \n                   value = val;\n                }       \n            } catch (BadLocationException | NumberFormatException e1) {\n                          //handle if you want\n            }        \n       }\n});\n</code></pre>\n"},{"tags":[],"owner":{"account_id":10159529,"reputation":31,"user_id":7503469,"display_name":"Stephen Cuminger"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1486053715,"creation_date":1485997905,"answer_id":41992704,"question_id":3949382,"body_markdown":"The last answer can be rearranged a little to make it a little more flexible. You can simply use this new MyJSpinner in place of any JSpinner. The biggest change is that you can use this new version with any underlying model of the JSpinner (int, double, byte, etc.)\r\n\r\n        public class MyJSpinner extends JSpinner{\r\n            boolean setvalueinprogress=false;\r\n            public MyJSpinner()\r\n            {\r\n                super();\r\n                final JTextField jtf = ((JSpinner.DefaultEditor) getEditor()).getTextField();\r\n                jtf.getDocument().addDocumentListener(new DocumentListener() {              \r\n\r\n                        @Override\r\n                        public void removeUpdate(DocumentEvent e) {\r\n                            showChangedValue(e);    \r\n                        }\r\n\r\n                        @Override\r\n                        public void insertUpdate(DocumentEvent e) {\r\n                            showChangedValue(e);                \r\n                        }\r\n\r\n                        @Override\r\n                        public void changedUpdate(DocumentEvent e) {\r\n                            showChangedValue(e);    \r\n                        }\r\n\r\n                        private void showChangedValue(DocumentEvent e){\r\n                            try {\r\n                                if (!setvalueinprogress)\r\n                                    MyJSpinner.this.commitEdit();      \r\n                            } catch (NumberFormatException | ParseException ex) {\r\n                                          //handle if you want\r\n                                Exceptions.printStackTrace(ex);\r\n                            }      \r\n                       }\r\n                });\r\n            }\r\n\r\n        @Override\r\n        public void setValue(Object value) {\r\n            setvalueinprogress=true;\r\n            super.setValue(value); \r\n            setvalueinprogress=false;\r\n        }\r\n\r\n     }","title":"JSpinner Value change Events","body":"<p>The last answer can be rearranged a little to make it a little more flexible. You can simply use this new MyJSpinner in place of any JSpinner. The biggest change is that you can use this new version with any underlying model of the JSpinner (int, double, byte, etc.)</p>\n\n<pre><code>    public class MyJSpinner extends JSpinner{\n        boolean setvalueinprogress=false;\n        public MyJSpinner()\n        {\n            super();\n            final JTextField jtf = ((JSpinner.DefaultEditor) getEditor()).getTextField();\n            jtf.getDocument().addDocumentListener(new DocumentListener() {              \n\n                    @Override\n                    public void removeUpdate(DocumentEvent e) {\n                        showChangedValue(e);    \n                    }\n\n                    @Override\n                    public void insertUpdate(DocumentEvent e) {\n                        showChangedValue(e);                \n                    }\n\n                    @Override\n                    public void changedUpdate(DocumentEvent e) {\n                        showChangedValue(e);    \n                    }\n\n                    private void showChangedValue(DocumentEvent e){\n                        try {\n                            if (!setvalueinprogress)\n                                MyJSpinner.this.commitEdit();      \n                        } catch (NumberFormatException | ParseException ex) {\n                                      //handle if you want\n                            Exceptions.printStackTrace(ex);\n                        }      \n                   }\n            });\n        }\n\n    @Override\n    public void setValue(Object value) {\n        setvalueinprogress=true;\n        super.setValue(value); \n        setvalueinprogress=false;\n    }\n\n }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":13814723,"reputation":1,"user_id":9971585,"display_name":"Corrado Di Martino"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1682856536,"creation_date":1682856536,"answer_id":76141198,"question_id":3949382,"body_markdown":"I resolved a similar situation by adding the requestFocus() method after the statement, like this:\r\n\r\n    spinner.addChangeListener(new ChangeListener() {\r\n        @Override\r\n        public void stateChanged(ChangeEvent e) {\r\n            //Do what you need\r\n            spinner.requestFocus();\r\n        }\r\n    }\r\nHoping this would be a good help. Have nice coding.","title":"JSpinner Value change Events","body":"<p>I resolved a similar situation by adding the requestFocus() method after the statement, like this:</p>\n<pre><code>spinner.addChangeListener(new ChangeListener() {\n    @Override\n    public void stateChanged(ChangeEvent e) {\n        //Do what you need\n        spinner.requestFocus();\n    }\n}\n</code></pre>\n<p>Hoping this would be a good help. Have nice coding.</p>\n"}],"owner":{"account_id":84665,"reputation":8558,"user_id":236501,"accept_rate":59,"display_name":"user236501"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":67087,"favorite_count":0,"down_vote_count":0,"up_vote_count":42,"answer_count":7,"score":42,"last_activity_date":1682856536,"creation_date":1287240977,"question_id":3949382,"body_markdown":"How to make the update immediately when the jSpinner value was changed.\r\n\r\n    ChangeListener listener = new ChangeListener() {\r\n      public void stateChanged(ChangeEvent e) {\r\n        jLabel.setText(e.getSource());\r\n      }\r\n    };\r\n\r\n    spinner1.addChangeListener(listener);\r\n\r\nThe code above doesnt change the label text automatically, it required you to click again anyplace to update. \r\n\r\n","title":"JSpinner Value change Events","body":"<p>How to make the update immediately when the jSpinner value was changed.</p>\n\n<pre><code>ChangeListener listener = new ChangeListener() {\n  public void stateChanged(ChangeEvent e) {\n    jLabel.setText(e.getSource());\n  }\n};\n\nspinner1.addChangeListener(listener);\n</code></pre>\n\n<p>The code above doesnt change the label text automatically, it required you to click again anyplace to update. </p>\n"},{"tags":["java","mysql","spring-boot","spring-data-jpa","spring-data"],"comments":[{"owner":{"account_id":19535095,"reputation":2864,"user_id":14294053,"display_name":"Mar-Z"},"score":0,"creation_date":1682841599,"post_id":76140077,"comment_id":134276357,"body_markdown":"Hello, please check and update the text of your question. You are referring to tables blog and blog_seq but it should be posts and posts_seq. According to screenshot and entity code.","body":"Hello, please check and update the text of your question. You are referring to tables blog and blog_seq but it should be posts and posts_seq. According to screenshot and entity code."}],"answers":[{"tags":[],"owner":{"account_id":5247691,"reputation":305,"user_id":4192839,"display_name":"CyberMafia"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1682841687,"creation_date":1682841687,"answer_id":76140144,"question_id":76140077,"body_markdown":"It basically happened due to:\r\n```\r\n@GeneratedValue(strategy=GenerationType.AUTO)\r\n```\r\n\r\n```AUTO``` strategy uses the database sequence to generate the unique value for your id column. If you log SQL queries then you would be able to see an extra query against that ```blog_seq``` to select the next unique value.\r\n\r\nIf that is not what you expect then you can use:\r\n```\r\n@GeneratedValue(strategy=GenerationType.IDENTITY)\r\n```\r\n\r\nIt will use the database ```auto-increment``` id column and let the database generate next value for your id column.\r\n\r\nIt might not matter a lot for your project but do read about the performance implications of these two strategies.\r\n\r\n**&lt;u&gt;Edit:&lt;u/&gt;**&lt;br/&gt;\r\nFound this article which explains these strategies nicely. It will help you.&lt;br/&gt;\r\nhttps://thorben-janssen.com/jpa-generate-primary-keys/","title":"two tables got created in mysql with names blog and blog_seq through spring boot entity annotations","body":"<p>It basically happened due to:</p>\n<pre><code>@GeneratedValue(strategy=GenerationType.AUTO)\n</code></pre>\n<p><code>AUTO</code> strategy uses the database sequence to generate the unique value for your id column. If you log SQL queries then you would be able to see an extra query against that <code>blog_seq</code> to select the next unique value.</p>\n<p>If that is not what you expect then you can use:</p>\n<pre><code>@GeneratedValue(strategy=GenerationType.IDENTITY)\n</code></pre>\n<p>It will use the database <code>auto-increment</code> id column and let the database generate next value for your id column.</p>\n<p>It might not matter a lot for your project but do read about the performance implications of these two strategies.</p>\n<p><strong>Edit:</strong><br/>\nFound this article which explains these strategies nicely. It will help you.<br/>\n<a href=\"https://thorben-janssen.com/jpa-generate-primary-keys/\" rel=\"nofollow noreferrer\">https://thorben-janssen.com/jpa-generate-primary-keys/</a></p>\n"},{"tags":[],"owner":{"account_id":19535095,"reputation":2864,"user_id":14294053,"display_name":"Mar-Z"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1682842629,"creation_date":1682842629,"answer_id":76140210,"question_id":76140077,"body_markdown":"Hibernate needs an unique identifier for each entity. It is the field annotated with `@Id` and corresponding column `id` in the database table `posts`. This field could be provided by the application while creating a new entity (inserting a new row) but it would be hard to maintain. Usually the id will be generated automatically by the database or hibernate. This can be configured with the annotation `@GeneratedValue`.\r\n\r\nIn you case you have defined `GenerationType.AUTO`. This means that Hibernate can decide what kind of id generation to use. Depending on the database. Mostly it will choose a database sequence. But MySQL doesn&#39;t support sequences. That&#39;s why Hibernate will create a separate table to mimic a sequence. This is exactly what you can see as `posts_seq` table. It&#39;s only column `next_val` holds the current value of the `id` for the table `posts`.","title":"two tables got created in mysql with names blog and blog_seq through spring boot entity annotations","body":"<p>Hibernate needs an unique identifier for each entity. It is the field annotated with <code>@Id</code> and corresponding column <code>id</code> in the database table <code>posts</code>. This field could be provided by the application while creating a new entity (inserting a new row) but it would be hard to maintain. Usually the id will be generated automatically by the database or hibernate. This can be configured with the annotation <code>@GeneratedValue</code>.</p>\n<p>In you case you have defined <code>GenerationType.AUTO</code>. This means that Hibernate can decide what kind of id generation to use. Depending on the database. Mostly it will choose a database sequence. But MySQL doesn't support sequences. That's why Hibernate will create a separate table to mimic a sequence. This is exactly what you can see as <code>posts_seq</code> table. It's only column <code>next_val</code> holds the current value of the <code>id</code> for the table <code>posts</code>.</p>\n"},{"tags":[],"owner":{"account_id":1896783,"reputation":398,"user_id":1713555,"display_name":"sajinmp"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1682842828,"creation_date":1682842828,"answer_id":76140222,"question_id":76140077,"body_markdown":"`A sequence is a user-defined schema-bound object that yields a sequence of integers based on a specified specification`\r\n\r\nIn simple words, it generates numbers in a sequence. [This should give a better idea](https://www.geeksforgeeks.org/postgresql-create-sequence/).\r\n\r\nIn your case, `posts_seq` is the sequence generator associated with the `posts` table. It is used to generate `id` here. The value of `next_value` in `posts_seq` will be used to generate the `id` for the next row inserted to `posts` table. [More info](https://jakarta.ee/specifications/persistence/2.2/apidocs/javax/persistence/generatedvalue).","title":"two tables got created in mysql with names blog and blog_seq through spring boot entity annotations","body":"<p><code>A sequence is a user-defined schema-bound object that yields a sequence of integers based on a specified specification</code></p>\n<p>In simple words, it generates numbers in a sequence. <a href=\"https://www.geeksforgeeks.org/postgresql-create-sequence/\" rel=\"nofollow noreferrer\">This should give a better idea</a>.</p>\n<p>In your case, <code>posts_seq</code> is the sequence generator associated with the <code>posts</code> table. It is used to generate <code>id</code> here. The value of <code>next_value</code> in <code>posts_seq</code> will be used to generate the <code>id</code> for the next row inserted to <code>posts</code> table. <a href=\"https://jakarta.ee/specifications/persistence/2.2/apidocs/javax/persistence/generatedvalue\" rel=\"nofollow noreferrer\">More info</a>.</p>\n"}],"owner":{"account_id":27981118,"reputation":15,"user_id":21368845,"display_name":"Prafull Jain"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":566,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":76140144,"answer_count":3,"score":1,"last_activity_date":1682856405,"creation_date":1682840489,"question_id":76140077,"body_markdown":"I am new in `Spring Boot` and such things, this is the first project I was trying to explore and was following a lecture for project creation, I made an entity class with `@Entity` and `@Table` annotations, when I executed the project, two table in `mysql` db got created namely `blog` and `blog_seq`, I want to understand how this `blog_seq` got created and what is the significance to this table.\r\n\r\n`Entity` class:\r\n\r\n    package com.SpringBoot.blog.entity;\r\n\r\n    import jakarta.persistence.Column;\r\n    import jakarta.persistence.Entity;\r\n    import jakarta.persistence.GeneratedValue;\r\n    import jakarta.persistence.GenerationType;\r\n    import jakarta.persistence.Id;\r\n    import jakarta.persistence.Table;\r\n    import jakarta.persistence.UniqueConstraint;\r\n\r\n    @Entity\r\n    @Table(name = &quot;posts&quot;, uniqueConstraints = {@UniqueConstraint(columnNames = {&quot;titles&quot;})})\r\n    public class Posts {\r\n    \t    @Id\r\n\t    @GeneratedValue(strategy=GenerationType.AUTO)\r\n\t    private Long id;\r\n\t    @Column(name = &quot;titles&quot;, nullable = false)\r\n\t    private String title;\r\n\t    @Column(name = &quot;description&quot;, nullable = false)\r\n\t    private String description;\r\n\t    @Column(name = &quot;content&quot;, nullable = false)\r\n\t    private String content;\r\n\t\r\n\t    public Posts() {\r\n\t\t    super();\r\n\t    }\r\n\t\r\n\t    public Posts(long id, String title, String description, String content) {\r\n\t\t    super();\r\n\t\t    this.id = id;\r\n\t\t    this.title = title;\r\n\t\t    this.description = description;\r\n\t\t    this.content = content;\r\n\t    }\r\n\t\r\n\t    public long getId() {\r\n\t\t    return id;\r\n\t    }\r\n\t    public void setId(long id) {\r\n\t\t    this.id = id;\r\n\t    }\r\n\t    public String getTitle() {\r\n\t\t    return title;\r\n\t    }\r\n\t    public void setTitle(String title) {\r\n\t\t    this.title = title;\r\n\t    }\r\n\t    public String getDescription() {\r\n\t\t    return description;\r\n\t    }\r\n\t    public void setDescription(String description) {\r\n\t\t    this.description = description;\r\n\t    }\r\n\t    public String getContent() {\r\n\t\t    return content;\r\n\t    }\r\n\t    public void setContent(String content) {\r\n\t\t    this.content = content;\r\n\t    }\r\n\t \r\n    }\r\n\r\n`application.properties`:\r\n\r\n    spring.datasource.url=jdbc:mysql://${MYSQL_HOST:localhost}:3306/blog\r\n    spring.datasource.userName=root\r\n    spring.datasource.password=123456789\r\n    spring.datasource.driver-class-name=com.mysql.cj.jdbc.Driver\r\n    spring.jpa.hibernate.ddl-auto=update\r\n\r\n`mysql` workbench:\r\n\r\n[![enter image description here][1]][1]\r\n\r\nThanks for the help!!\r\n\r\nTried changing the entity annotations and `application.properties` somewhat, but not working.\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/DhOTq.png","title":"two tables got created in mysql with names blog and blog_seq through spring boot entity annotations","body":"<p>I am new in <code>Spring Boot</code> and such things, this is the first project I was trying to explore and was following a lecture for project creation, I made an entity class with <code>@Entity</code> and <code>@Table</code> annotations, when I executed the project, two table in <code>mysql</code> db got created namely <code>blog</code> and <code>blog_seq</code>, I want to understand how this <code>blog_seq</code> got created and what is the significance to this table.</p>\n<p><code>Entity</code> class:</p>\n<pre><code>package com.SpringBoot.blog.entity;\n\nimport jakarta.persistence.Column;\nimport jakarta.persistence.Entity;\nimport jakarta.persistence.GeneratedValue;\nimport jakarta.persistence.GenerationType;\nimport jakarta.persistence.Id;\nimport jakarta.persistence.Table;\nimport jakarta.persistence.UniqueConstraint;\n\n@Entity\n@Table(name = &quot;posts&quot;, uniqueConstraints = {@UniqueConstraint(columnNames = {&quot;titles&quot;})})\npublic class Posts {\n        @Id\n    @GeneratedValue(strategy=GenerationType.AUTO)\n    private Long id;\n    @Column(name = &quot;titles&quot;, nullable = false)\n    private String title;\n    @Column(name = &quot;description&quot;, nullable = false)\n    private String description;\n    @Column(name = &quot;content&quot;, nullable = false)\n    private String content;\n\n    public Posts() {\n        super();\n    }\n\n    public Posts(long id, String title, String description, String content) {\n        super();\n        this.id = id;\n        this.title = title;\n        this.description = description;\n        this.content = content;\n    }\n\n    public long getId() {\n        return id;\n    }\n    public void setId(long id) {\n        this.id = id;\n    }\n    public String getTitle() {\n        return title;\n    }\n    public void setTitle(String title) {\n        this.title = title;\n    }\n    public String getDescription() {\n        return description;\n    }\n    public void setDescription(String description) {\n        this.description = description;\n    }\n    public String getContent() {\n        return content;\n    }\n    public void setContent(String content) {\n        this.content = content;\n    }\n \n}\n</code></pre>\n<p><code>application.properties</code>:</p>\n<pre><code>spring.datasource.url=jdbc:mysql://${MYSQL_HOST:localhost}:3306/blog\nspring.datasource.userName=root\nspring.datasource.password=123456789\nspring.datasource.driver-class-name=com.mysql.cj.jdbc.Driver\nspring.jpa.hibernate.ddl-auto=update\n</code></pre>\n<p><code>mysql</code> workbench:</p>\n<p><a href=\"https://i.stack.imgur.com/DhOTq.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/DhOTq.png\" alt=\"enter image description here\" /></a></p>\n<p>Thanks for the help!!</p>\n<p>Tried changing the entity annotations and <code>application.properties</code> somewhat, but not working.</p>\n"},{"tags":["java","android","spotify"],"comments":[{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1682855641,"post_id":76141091,"comment_id":134277766,"body_markdown":"Please edit the question to limit it to a specific problem with enough detail to identify an adequate answer.","body":"Please edit the question to limit it to a specific problem with enough detail to identify an adequate answer."}],"answers":[{"tags":[],"owner":{"account_id":28463068,"reputation":19,"user_id":21779533,"display_name":"Sander Thee"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1682855549,"creation_date":1682855549,"answer_id":76141110,"question_id":76141091,"body_markdown":"In your Main activity you must compose a redirect uri like:\r\n\r\n    private Uri getRedirectUri() {\r\n        return new Uri.Builder()\r\n                .scheme(&quot;protocol&quot;)\r\n                .authority(&quot;appname&quot;)\r\n                .build();\r\n    }\r\n\r\nAnd, in the Dashboard user this url like: \r\n\r\n    protocol://appname\r\n\r\n(both can be anything)\r\n","title":"What is the redirect uri for spotify apps on android?","body":"<p>In your Main activity you must compose a redirect uri like:</p>\n<pre><code>private Uri getRedirectUri() {\n    return new Uri.Builder()\n            .scheme(&quot;protocol&quot;)\n            .authority(&quot;appname&quot;)\n            .build();\n}\n</code></pre>\n<p>And, in the Dashboard user this url like:</p>\n<pre><code>protocol://appname\n</code></pre>\n<p>(both can be anything)</p>\n"}],"owner":{"account_id":28463068,"reputation":19,"user_id":21779533,"display_name":"Sander Thee"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":56,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"closed_date":1682860716,"answer_count":1,"score":0,"last_activity_date":1682855549,"creation_date":1682855375,"question_id":76141091,"body_markdown":"I want to make an Android app for Spotify but I need to set a redirect uri?\r\n\r\nWhat Uri should I use?\r\n\r\nI expected the redirect uri to be documented somewhere but didn&#39;t find anything useable on Google.","title":"What is the redirect uri for spotify apps on android?","body":"<p>I want to make an Android app for Spotify but I need to set a redirect uri?</p>\n<p>What Uri should I use?</p>\n<p>I expected the redirect uri to be documented somewhere but didn't find anything useable on Google.</p>\n"},{"tags":["java","android","gson"],"comments":[{"owner":{"account_id":93280,"reputation":9803,"user_id":255293,"accept_rate":91,"display_name":"Patrick Kafka"},"score":0,"creation_date":1363719235,"post_id":15507997,"comment_id":21960396,"body_markdown":"similar question of double to int: http://stackoverflow.com/questions/12067206/gson-force-use-int-instead-of-double","body":"similar question of double to int: <a href=\"http://stackoverflow.com/questions/12067206/gson-force-use-int-instead-of-double\" title=\"gson force use int instead of double\">stackoverflow.com/questions/12067206/&hellip;</a>"},{"owner":{"account_id":941299,"reputation":27984,"user_id":969325,"accept_rate":100,"display_name":"Warpzit"},"score":1,"creation_date":1382623396,"post_id":15507997,"comment_id":29039075,"body_markdown":"@PatrickKafka but the answer here is gold.","body":"@PatrickKafka but the answer here is gold."},{"owner":{"account_id":98471,"reputation":15227,"user_id":266531,"accept_rate":100,"display_name":"Kirby"},"score":1,"creation_date":1481690604,"post_id":15507997,"comment_id":69473608,"body_markdown":"Or, try converting to Jackson","body":"Or, try converting to Jackson"},{"owner":{"account_id":60183,"reputation":4029,"user_id":179864,"accept_rate":67,"display_name":"aditsu quit because SE is EVIL"},"score":0,"creation_date":1491914915,"post_id":15507997,"comment_id":73755817,"body_markdown":"Also see [this answer](http://stackoverflow.com/a/43346123/179864) I wrote for a similar question; the catch is that you would have to parse the data as an `Object` and then cast to whatever you need.","body":"Also see <a href=\"http://stackoverflow.com/a/43346123/179864\">this answer</a> I wrote for a similar question; the catch is that you would have to parse the data as an <code>Object</code> and then cast to whatever you need."},{"owner":{"account_id":290585,"reputation":6089,"user_id":592217,"display_name":"k4dima"},"score":0,"creation_date":1604039928,"post_id":15507997,"comment_id":114230920,"body_markdown":"Use https://github.com/FasterXML/jackson-databind https://stackoverflow.com/a/583634/592217","body":"Use <a href=\"https://github.com/FasterXML/jackson-databind\" rel=\"nofollow noreferrer\">github.com/FasterXML/jackson-databind</a> <a href=\"https://stackoverflow.com/a/583634/592217\">stackoverflow.com/a/583634/592217</a>"}],"answers":[{"tags":[],"owner":{"account_id":39409,"reputation":47624,"user_id":113632,"accept_rate":84,"display_name":"dimo414"},"down_vote_count":2,"up_vote_count":52,"is_accepted":true,"score":50,"last_activity_date":1494619792,"creation_date":1363719895,"answer_id":15508288,"question_id":15507997,"body_markdown":"You&#39;re telling Gson it&#39;s looking for a list of maps of Strings to Objects, which essentially says for it to make a best guess as to the type of the Object. Since [JSON doesn&#39;t distinguish between integer and floating point fields][1] Gson has to default to Float/Double for numeric fields.\r\n\r\nGson is fundamentally built to inspect the type of the object you want to populate in order to determine how to parse the data.  If you don&#39;t give it any hint, it&#39;s not going to work very well.  One option is to define a custom JsonDeserializer, however better would be to not use a HashMap (and definitely don&#39;t use Hashtable!) and instead give Gson more information about the type of data it&#39;s expecting.\r\n\r\n    class Response {\r\n      int id;\r\n      int field_id;\r\n      ArrayList&lt;ArrayList&lt;Integer&gt;&gt; body; // or whatever type is most apropriate\r\n    }\r\n    \r\n    responses = new Gson()\r\n                .fromJson(draft, new TypeToken&lt;ArrayList&lt;Response&gt;&gt;(){}.getType());\r\n\r\nAgain, the whole point of Gson is to seamlessly convert structured data into structured objects.  If you ask it to create a nearly undefined structure like a list of maps of objects, you&#39;re defeating the whole point of Gson, and might as well use some more simplistic JSON parser.\r\n\r\n\r\n  [1]: http://json.org/","title":"How to prevent Gson from expressing integers as floats","body":"<p>You're telling Gson it's looking for a list of maps of Strings to Objects, which essentially says for it to make a best guess as to the type of the Object. Since <a href=\"http://json.org/\" rel=\"noreferrer\">JSON doesn't distinguish between integer and floating point fields</a> Gson has to default to Float/Double for numeric fields.</p>\n\n<p>Gson is fundamentally built to inspect the type of the object you want to populate in order to determine how to parse the data.  If you don't give it any hint, it's not going to work very well.  One option is to define a custom JsonDeserializer, however better would be to not use a HashMap (and definitely don't use Hashtable!) and instead give Gson more information about the type of data it's expecting.</p>\n\n<pre><code>class Response {\n  int id;\n  int field_id;\n  ArrayList&lt;ArrayList&lt;Integer&gt;&gt; body; // or whatever type is most apropriate\n}\n\nresponses = new Gson()\n            .fromJson(draft, new TypeToken&lt;ArrayList&lt;Response&gt;&gt;(){}.getType());\n</code></pre>\n\n<p>Again, the whole point of Gson is to seamlessly convert structured data into structured objects.  If you ask it to create a nearly undefined structure like a list of maps of objects, you're defeating the whole point of Gson, and might as well use some more simplistic JSON parser.</p>\n"},{"tags":[],"owner":{"account_id":2317167,"reputation":3504,"user_id":2033951,"accept_rate":93,"display_name":"Steve Kallestad"},"down_vote_count":0,"up_vote_count":7,"is_accepted":false,"score":7,"last_activity_date":1386778231,"creation_date":1386778231,"answer_id":20524187,"question_id":15507997,"body_markdown":"I&#39;m late to the party, but I just ran into this myself.  In my case, I didn&#39;t want to specify an Integer type in my ArrayList - since it could be a String or an Integer.\r\n\r\nMy solution is as follows:\r\n\r\n\tGsonBuilder gsonBuilder = new GsonBuilder();\r\n\tgsonBuilder.registerTypeAdapter(Double.class,  new JsonSerializer&lt;Double&gt;() {\r\n\r\n\t\tpublic JsonElement serialize(Double src, Type typeOfSrc,\r\n\t\t\t\t\tJsonSerializationContext context) {\r\n\t            Integer value = (int)Math.round(src);\r\n\t            return new JsonPrimitive(value);\r\n\t\t\t}\r\n\t    });\r\n\r\n\tGson gs = gsonBuilder.create();\r\n\r\nRather than using the default Gson definition with `Gson gs = new Gson();`, I have overridden the Double.class serialization to return an integer.\r\n\r\nIn my case, I have Strings and Integers within my JSON, but I do not have any doubles, so this doesn&#39;t pose a problem.\r\n\r\nIf you need a double or a float value, I suppose it would be possible to add some logic that tested the value for attributes specific to each datatype and returned an appropriate value.  Something like\r\n\r\n    if(/*source has a decimal point*/){\r\n      return new JsonPrimitive(src); \r\n    } else if (/* source has some attribute of a Float */){\r\n      Float value = /*convert the src value from double to a Float */;\r\n      return new JsonPrimitive(value);\r\n    } else {\r\n      //it looks like an integer\r\n      Integer value = (int)Math.round(src);\r\n      return new JsonPrimitive(value);\r\n    }\r\n\r\nI don&#39;t know how to test for or convert those datatypes off the top of my head, but this should put you on the right path.","title":"How to prevent Gson from expressing integers as floats","body":"<p>I'm late to the party, but I just ran into this myself.  In my case, I didn't want to specify an Integer type in my ArrayList - since it could be a String or an Integer.</p>\n\n<p>My solution is as follows:</p>\n\n<pre><code>GsonBuilder gsonBuilder = new GsonBuilder();\ngsonBuilder.registerTypeAdapter(Double.class,  new JsonSerializer&lt;Double&gt;() {\n\n    public JsonElement serialize(Double src, Type typeOfSrc,\n                JsonSerializationContext context) {\n            Integer value = (int)Math.round(src);\n            return new JsonPrimitive(value);\n        }\n    });\n\nGson gs = gsonBuilder.create();\n</code></pre>\n\n<p>Rather than using the default Gson definition with <code>Gson gs = new Gson();</code>, I have overridden the Double.class serialization to return an integer.</p>\n\n<p>In my case, I have Strings and Integers within my JSON, but I do not have any doubles, so this doesn't pose a problem.</p>\n\n<p>If you need a double or a float value, I suppose it would be possible to add some logic that tested the value for attributes specific to each datatype and returned an appropriate value.  Something like</p>\n\n<pre><code>if(/*source has a decimal point*/){\n  return new JsonPrimitive(src); \n} else if (/* source has some attribute of a Float */){\n  Float value = /*convert the src value from double to a Float */;\n  return new JsonPrimitive(value);\n} else {\n  //it looks like an integer\n  Integer value = (int)Math.round(src);\n  return new JsonPrimitive(value);\n}\n</code></pre>\n\n<p>I don't know how to test for or convert those datatypes off the top of my head, but this should put you on the right path.</p>\n"},{"tags":[],"owner":{"account_id":21815,"reputation":19742,"user_id":53328,"accept_rate":78,"display_name":"Martin Wickman"},"down_vote_count":1,"up_vote_count":43,"is_accepted":false,"score":42,"last_activity_date":1392016420,"creation_date":1388158830,"answer_id":20803406,"question_id":15507997,"body_markdown":"This works:\r\n\r\n     Gson gson = new GsonBuilder().\r\n            registerTypeAdapter(Double.class,  new JsonSerializer&lt;Double&gt;() {\t\r\n\r\n\t\t@Override\r\n\t\tpublic JsonElement serialize(Double src, Type typeOfSrc, JsonSerializationContext context) {\r\n\t\t\tif(src == src.longValue())\r\n\t\t\t\treturn new JsonPrimitive(src.longValue());\t\t\t\r\n            return new JsonPrimitive(src);\r\n\t\t}\r\n\t }).create();\r\n    \t\r\n","title":"How to prevent Gson from expressing integers as floats","body":"<p>This works:</p>\n\n<pre><code> Gson gson = new GsonBuilder().\n        registerTypeAdapter(Double.class,  new JsonSerializer&lt;Double&gt;() {   \n\n    @Override\n    public JsonElement serialize(Double src, Type typeOfSrc, JsonSerializationContext context) {\n        if(src == src.longValue())\n            return new JsonPrimitive(src.longValue());          \n        return new JsonPrimitive(src);\n    }\n }).create();\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2327485,"reputation":3184,"user_id":4865117,"accept_rate":14,"display_name":"Leon"},"down_vote_count":0,"up_vote_count":13,"is_accepted":false,"score":13,"last_activity_date":1522226424,"creation_date":1522226424,"answer_id":49529831,"question_id":15507997,"body_markdown":"Basically, there is no perfect answer for this issue. All &quot;solutions&quot; work for some cases only. This is an issue reported to gson team, unfortunately seems they insist that &quot;javascript has no integer type&quot; as if they do not realize that gson is for java not javascript. So they refused to fix it until today (2018 now), despite other lib like jackson does not have such issue at all, despite how easy to fix it. So you may have to fix the issue yourself from gson source code and build your own gson.jar. The source file is `gson/src/main/java/com/google/gson/internal/bind/ObjectTypeAdapter.java`\r\n\r\n    case NUMBER:\r\n       return in.nextDouble();\r\n\r\n","title":"How to prevent Gson from expressing integers as floats","body":"<p>Basically, there is no perfect answer for this issue. All \"solutions\" work for some cases only. This is an issue reported to gson team, unfortunately seems they insist that \"javascript has no integer type\" as if they do not realize that gson is for java not javascript. So they refused to fix it until today (2018 now), despite other lib like jackson does not have such issue at all, despite how easy to fix it. So you may have to fix the issue yourself from gson source code and build your own gson.jar. The source file is <code>gson/src/main/java/com/google/gson/internal/bind/ObjectTypeAdapter.java</code></p>\n\n<pre><code>case NUMBER:\n   return in.nextDouble();\n</code></pre>\n"},{"tags":[],"owner":{"account_id":14497490,"reputation":27,"user_id":10471617,"display_name":"XiangYun"},"down_vote_count":2,"up_vote_count":3,"is_accepted":false,"score":1,"last_activity_date":1567995779,"creation_date":1567995779,"answer_id":57847161,"question_id":15507997,"body_markdown":"This work for me.\r\n\r\nStep 1:\r\nCopy the ObjectTypeAdapter in gson into the project, keeping the path the same as in gson\r\nLike this\r\n\r\n    com\r\n      - xxx\r\n        - xxx\r\n    com\r\n      - google\r\n        - gson\r\n          - internal\r\n            - bind\r\n              ObjectTypeAdapter\r\n\r\nStep 2:\r\nModify ObjectTypeAdapter\r\n\r\n    case NUMBER:\r\n      return in.nextDouble();\r\n\r\nModified to\r\n\r\n    case NUMBER:\r\n\t  String number = in.nextString();\r\n\t  try {\r\n\t    return Long.valueOf(number);\r\n\t  } catch (NumberFormatException e) {\r\n\t    return Double.valueOf(number);\r\n\t  }\r\n\r\nOK.\r\n**Gson will prioritizes the ObjectTypeAdapter in the project.**","title":"How to prevent Gson from expressing integers as floats","body":"<p>This work for me.</p>\n\n<p>Step 1:\nCopy the ObjectTypeAdapter in gson into the project, keeping the path the same as in gson\nLike this</p>\n\n<pre><code>com\n  - xxx\n    - xxx\ncom\n  - google\n    - gson\n      - internal\n        - bind\n          ObjectTypeAdapter\n</code></pre>\n\n<p>Step 2:\nModify ObjectTypeAdapter</p>\n\n<pre><code>case NUMBER:\n  return in.nextDouble();\n</code></pre>\n\n<p>Modified to</p>\n\n<pre><code>case NUMBER:\n  String number = in.nextString();\n  try {\n    return Long.valueOf(number);\n  } catch (NumberFormatException e) {\n    return Double.valueOf(number);\n  }\n</code></pre>\n\n<p>OK.\n<strong>Gson will prioritizes the ObjectTypeAdapter in the project.</strong></p>\n"},{"tags":[],"owner":{"account_id":290585,"reputation":6089,"user_id":592217,"display_name":"k4dima"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1594393626,"creation_date":1594393626,"answer_id":62837145,"question_id":15507997,"body_markdown":"        fun jsonToMap(json: JSONObject): Map&lt;String, Any&gt; {\r\n            val doubles = Gson().fromJson&lt;Map&lt;String, Any&gt;&gt;(json.toString(), Map::class.java)\r\n            fun doublesToLong(doubles: Map&lt;String, Any&gt;): Map&lt;String, Any&gt; = doubles\r\n                    .map { entry -&gt;\r\n                        Pair(entry.key, entry.value.let {\r\n                            when (it) {\r\n                                is Map&lt;*, *&gt; -&gt; doublesToLong(it as Map&lt;String, Any&gt;)\r\n                                is Double -&gt; it.toLong()\r\n                                else -&gt; it\r\n                            }\r\n                        })\r\n                    }\r\n                    .toMap()\r\n            return doublesToLong(doubles)\r\n        }","title":"How to prevent Gson from expressing integers as floats","body":"<pre><code>    fun jsonToMap(json: JSONObject): Map&lt;String, Any&gt; {\n        val doubles = Gson().fromJson&lt;Map&lt;String, Any&gt;&gt;(json.toString(), Map::class.java)\n        fun doublesToLong(doubles: Map&lt;String, Any&gt;): Map&lt;String, Any&gt; = doubles\n                .map { entry -&gt;\n                    Pair(entry.key, entry.value.let {\n                        when (it) {\n                            is Map&lt;*, *&gt; -&gt; doublesToLong(it as Map&lt;String, Any&gt;)\n                            is Double -&gt; it.toLong()\n                            else -&gt; it\n                        }\n                    })\n                }\n                .toMap()\n        return doublesToLong(doubles)\n    }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":5306534,"reputation":1353,"user_id":5076051,"display_name":"Trevor"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1638407113,"creation_date":1638407113,"answer_id":70193088,"question_id":15507997,"body_markdown":"Custom serializer solution in Kotlin, it&#39;s a bit tricky because you have to distinguish between java.lang.Double and Double (kotlin.Double).\r\n\r\n```\r\nprivate val Gson: Gson = GsonBuilder().registerTypeAdapter(java.lang.Double::class.java, object : JsonSerializer&lt;Double&gt; {\r\n    override fun serialize(src: Double, typeOfSrc: Type, context: JsonSerializationContext): JsonElement {\r\n        return if (src == src.toLong().toDouble()) JsonPrimitive(src.toLong()) else JsonPrimitive(src)\r\n    }\r\n}).create()\r\n```","title":"How to prevent Gson from expressing integers as floats","body":"<p>Custom serializer solution in Kotlin, it's a bit tricky because you have to distinguish between java.lang.Double and Double (kotlin.Double).</p>\n<pre><code>private val Gson: Gson = GsonBuilder().registerTypeAdapter(java.lang.Double::class.java, object : JsonSerializer&lt;Double&gt; {\n    override fun serialize(src: Double, typeOfSrc: Type, context: JsonSerializationContext): JsonElement {\n        return if (src == src.toLong().toDouble()) JsonPrimitive(src.toLong()) else JsonPrimitive(src)\n    }\n}).create()\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3563471,"reputation":1070,"user_id":2975701,"display_name":"Seeker"},"down_vote_count":0,"up_vote_count":50,"is_accepted":false,"score":50,"last_activity_date":1682854482,"creation_date":1638649775,"answer_id":70229243,"question_id":15507997,"body_markdown":"There is a solution provided by the library from 2.8.9 version. \r\n\r\nWe can set how Object is converted to a number by using the `GsonBuilder.setObjectToNumberStrategy()` method.\r\n\r\nImplementation of `LONG_OR_DOUBLE` will work in this case. Can be used as\r\n\r\n    Gson gson = new GsonBuilder()\r\n        .setObjectToNumberStrategy(ToNumberPolicy.LONG_OR_DOUBLE)\r\n        .create();\r\n    responses = gson.fromJson(draft, ResponseList);\r\n\r\nRefer to the GitHub pull request for details: [Support arbitrary Number implementation for Object and Number deserialization by lyubomyr-shaydariv &#183; Pull Request #1290 &#183; google/gson &#183; GitHub](https://github.com/google/gson/pull/1290).","title":"How to prevent Gson from expressing integers as floats","body":"<p>There is a solution provided by the library from 2.8.9 version.</p>\n<p>We can set how Object is converted to a number by using the <code>GsonBuilder.setObjectToNumberStrategy()</code> method.</p>\n<p>Implementation of <code>LONG_OR_DOUBLE</code> will work in this case. Can be used as</p>\n<pre><code>Gson gson = new GsonBuilder()\n    .setObjectToNumberStrategy(ToNumberPolicy.LONG_OR_DOUBLE)\n    .create();\nresponses = gson.fromJson(draft, ResponseList);\n</code></pre>\n<p>Refer to the GitHub pull request for details: <a href=\"https://github.com/google/gson/pull/1290\" rel=\"noreferrer\">Support arbitrary Number implementation for Object and Number deserialization by lyubomyr-shaydariv ¬∑ Pull Request #1290 ¬∑ google/gson ¬∑ GitHub</a>.</p>\n"},{"tags":[],"owner":{"account_id":16645078,"reputation":221,"user_id":12029555,"display_name":"swarnim gupta"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1639650234,"creation_date":1639650234,"answer_id":70377352,"question_id":15507997,"body_markdown":"Use Jackson\r\n\r\n\r\n        public static Map&lt;String, Object&gt; jsonToMap(final String jsonString) {\r\n        try {\r\n            final ObjectMapper objectMapper = new ObjectMapper();\r\n            return objectMapper.convertValue(objectMapper.readTree(jsonString), new TypeReference&lt;Map&lt;String, Object&gt;&gt;() {\r\n            });\r\n        } catch (final Exception e) {\r\n            throw new InternalServiceException(&quot;lol&quot;);\r\n        }\r\n    }","title":"How to prevent Gson from expressing integers as floats","body":"<p>Use Jackson</p>\n<pre><code>    public static Map&lt;String, Object&gt; jsonToMap(final String jsonString) {\n    try {\n        final ObjectMapper objectMapper = new ObjectMapper();\n        return objectMapper.convertValue(objectMapper.readTree(jsonString), new TypeReference&lt;Map&lt;String, Object&gt;&gt;() {\n        });\n    } catch (final Exception e) {\n        throw new InternalServiceException(&quot;lol&quot;);\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":14853690,"reputation":1,"user_id":10726830,"display_name":"Zarif Ergashev"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1641452993,"creation_date":1641452993,"answer_id":70603622,"question_id":15507997,"body_markdown":"google fixed issue https://github.com/google/gson/commit/fe30b85224316cabf19f5dd3223843437c297802#diff-9bf510cca1fa5b32b008e7daa417abf15602571dbc87f5436d9f3558ded492a5 \r\nplease update gson version to `2.8.9`","title":"How to prevent Gson from expressing integers as floats","body":"<p>google fixed issue <a href=\"https://github.com/google/gson/commit/fe30b85224316cabf19f5dd3223843437c297802#diff-9bf510cca1fa5b32b008e7daa417abf15602571dbc87f5436d9f3558ded492a5\" rel=\"nofollow noreferrer\">https://github.com/google/gson/commit/fe30b85224316cabf19f5dd3223843437c297802#diff-9bf510cca1fa5b32b008e7daa417abf15602571dbc87f5436d9f3558ded492a5</a>\nplease update gson version to <code>2.8.9</code></p>\n"}],"owner":{"account_id":221550,"reputation":1590,"user_id":479608,"accept_rate":71,"display_name":"Mark Murphy"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":72654,"favorite_count":0,"down_vote_count":0,"up_vote_count":97,"accepted_answer_id":15508288,"answer_count":10,"score":97,"last_activity_date":1682854482,"creation_date":1363718869,"question_id":15507997,"body_markdown":"Gson has some odd behavior when I try to convert a string to json. The code below transforms string draft into json responses. Is there a way to prevent gson from adding the &#39;.0 to all integer values?\r\n    \r\n    ArrayList&lt;Hashtable&lt;String, Object&gt;&gt; responses;\r\n    Type ResponseList = new TypeToken&lt;ArrayList&lt;Hashtable&lt;String, Object&gt;&gt;&gt;() {}.getType();\r\n    responses = new Gson().fromJson(draft, ResponseList);\r\n\r\n    draft:\r\n    [ {&quot;id&quot;:4077395,&quot;field_id&quot;:242566,&quot;body&quot;:&quot;&quot;},\r\n      {&quot;id&quot;:4077398,&quot;field_id&quot;:242569,&quot;body&quot;:[[273019,0],[273020,1],[273021,0]]},\r\n      {&quot;id&quot;:4077399,&quot;field_id&quot;:242570,&quot;body&quot;:[[273022,0],[273023,1],[273024,0]]}\r\n    ]\r\n    \r\n    responses:\r\n    [ {id=4077395.0, body=, field_id=242566.0},\r\n      {id=4077398.0, body=[[273019.0, 0.0], [273020.0, 1.0], [273021.0, 0.0]], field_id=242569.0},\r\n      {id=4077399.0, body=[[273022.0, 0.0], [273023.0, 1.0], [273024.0, 0.0]], field_id=242570.0}\r\n    ]","title":"How to prevent Gson from expressing integers as floats","body":"<p>Gson has some odd behavior when I try to convert a string to json. The code below transforms string draft into json responses. Is there a way to prevent gson from adding the '.0 to all integer values?</p>\n\n<pre><code>ArrayList&lt;Hashtable&lt;String, Object&gt;&gt; responses;\nType ResponseList = new TypeToken&lt;ArrayList&lt;Hashtable&lt;String, Object&gt;&gt;&gt;() {}.getType();\nresponses = new Gson().fromJson(draft, ResponseList);\n\ndraft:\n[ {\"id\":4077395,\"field_id\":242566,\"body\":\"\"},\n  {\"id\":4077398,\"field_id\":242569,\"body\":[[273019,0],[273020,1],[273021,0]]},\n  {\"id\":4077399,\"field_id\":242570,\"body\":[[273022,0],[273023,1],[273024,0]]}\n]\n\nresponses:\n[ {id=4077395.0, body=, field_id=242566.0},\n  {id=4077398.0, body=[[273019.0, 0.0], [273020.0, 1.0], [273021.0, 0.0]], field_id=242569.0},\n  {id=4077399.0, body=[[273022.0, 0.0], [273023.0, 1.0], [273024.0, 0.0]], field_id=242570.0}\n]\n</code></pre>\n"},{"tags":["java","spring","spring-boot","spring-mvc"],"owner":{"account_id":887607,"reputation":1395,"user_id":926665,"accept_rate":76,"display_name":"Mekswoll"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":55,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1682854210,"creation_date":1682851921,"question_id":76140857,"body_markdown":"## Strange behaviour in data binding in Spring MVC\r\n\r\nAll code for this example is located here: [https://github.com/maxwellt/binding-failure][1].\r\n\r\nI have setup this project to highlight the differences in how data binding works between different types of backing objects.\r\n\r\nIn `index.html` there are three links:\r\n\r\n* Submit the form that is backed by a Java class and is JavaBean compliant (i.e. getters and setters)\r\n* Submit the form that is backed by a Java class that is not JavaBean compliant (setters have been omitted)\r\n* Submit the form that is backed by a Java record (which is never JavaBean compliant as is it immutable)\r\n\r\n`form.html` is re-used for each of the different form backing objects.\r\n\r\nIn the form the first line will print out the `firstName` value (empty on form load of course).\r\n\r\nYou will see that the form has three fields, `firstName`, `lastName` and `type`. The last field is bound to the enum `Type` and has only two possible correct values, `ACTIVE` and `INACTIVE`. You will see that there is a third item in the dropdownlist, which is invalid (more on that later).\r\n\r\nTo run the project simply `./mvnw spring-boot:run`.\r\n\r\nThe flow I want to run you though is as follows:\r\n\r\n1. Open each of the forms\r\n2. Submit as is\r\n\r\nYou will see that in all three cases the `firstName` and `lastName` field&#39;s background color changed to red, to indicate that the values were invalid. This is because those two fields are annotated with `@NotBlank`.\r\n\r\nIf all has gone well, in each of the three cases those two fields should have been red. The Java class non-JavaBean compliant form will have shown `null` for &#39;Entered firstName&#39;, whereas the Record form will have shown nothing (just like the JavaBean form)\r\n\r\nNow go through the following flow for each of the forms:\r\n\r\n1. Enter a value in the `firstName` field\r\n2. Select the `INVALID_VALUE` in the dropdownlist\r\n3. Submit\r\n\r\nYou should see the following results:\r\n\r\n* JavaBean form does as you would expect: `firstName` and `type` are marked red as they are invalid and you see the entered `firstName`\r\n* Class without setters will mark `firstName` and `lastName` red **and** the value for `type` is reset to `ACTIVE` and you will see `null` for &#39;Entered first name:&#39;\r\n* Record form will have thrown an HTTP 500.\r\n\r\nThe fact that the JavaBean form does exactly what we expect is not wholly unsurprising. In the Spring MVC documentation they explicitly state:\r\n\r\n&gt; Only public properties following the JavaBeans naming conventions are exposed for data binding ‚Äî for example, public String getFirstName() and public void setFirstName(String) methods for a firstName property.\r\n\r\nFor the non-JavaBean compliant form it seems like it is simply reset to an empty form, which is why the `firstName` property is not retained and shown on the page and why the `INVALID_VALUE` is no longer selected.\r\n\r\nIn the case of the Record form, the backing object itself seems to be set to NULL, which is why we see the HTTP 500, the logs print the following stacktrace:\r\n\r\n&gt; org.springframework.expression.spel.SpelEvaluationException: EL1007E: Property or field &#39;firstName&#39; cannot be found on null\r\n\r\nIf you were to re-add the `form` to the `model` manually, everything would work fine, so change the `processRecordForm` from this:\r\n\r\n    @PostMapping(&quot;/formRecord&quot;)\r\n    public String processFormRecord(@Valid @ModelAttribute(&quot;form&quot;) FormRecord form, BindingResult bindingResult, RedirectAttributes redirectAttributes, Model model) {\r\n        if (bindingResult.hasErrors()) {\r\n            model.addAttribute(&quot;types&quot;, Type.values());\r\n            model.addAttribute(&quot;action&quot;, &quot;/formRecord&quot;);\r\n            return &quot;form&quot;;\r\n        }\r\n\r\n        redirectAttributes.addFlashAttribute(&quot;formSubmitted&quot;, &quot;success&quot;);\r\n        return &quot;redirect:/&quot;;\r\n    }\r\n\r\nTo this:\r\n\r\n    @PostMapping(&quot;/formRecord&quot;)\r\n    public String processFormRecord(@Valid @ModelAttribute(&quot;form&quot;) FormRecord form, BindingResult bindingResult, RedirectAttributes redirectAttributes, Model model) {\r\n        if (bindingResult.hasErrors()) {\r\n            model.addAttribute(&quot;types&quot;, Type.values());\r\n            model.addAttribute(&quot;action&quot;, &quot;/formRecord&quot;);\r\n            model.addAttribute(&quot;form&quot;, form);\r\n            return &quot;form&quot;;\r\n        }\r\n\r\n        redirectAttributes.addFlashAttribute(&quot;formSubmitted&quot;, &quot;success&quot;);\r\n        return &quot;redirect:/&quot;;\r\n    }\r\n\r\nAnd it works as you would expect...\r\n\r\nFurthermore, if you were to remove the printing of the `firstName` value, i.e. the following line:\r\n\r\n`&lt;p th:text=&quot;|Entered first name: ${form.firstName}|&quot;&gt;&lt;/p&gt;` in `form.html` and then run through the second scenario again, you&#39;ll get another (unexpected outcome). Namely, there is no longer an HTTP 500, but after the `typeMismatch` due to using an invalid enum value for `type`, the binding seems to have stopped completely, because the `lastName` field will **not** be marked as invalid...\r\n\r\nTo summarize into questions I&#39;m left with: \r\n\r\n1. What&#39;s the difference in data binding between a non-JavaBean compliant Java class and a Java record? There clearly is a difference as I&#39;m getting different behavior.\r\n2. Why is the form not automatically being added again to the `model`, it&#39;s clearly marked as `@ModelAttribute`.\r\n\r\n\r\n  [1]: https://github.com/maxwellt/binding-failure","title":"Spring MVC data binding inconsistencies","body":"<h2>Strange behaviour in data binding in Spring MVC</h2>\n<p>All code for this example is located here: <a href=\"https://github.com/maxwellt/binding-failure\" rel=\"nofollow noreferrer\">https://github.com/maxwellt/binding-failure</a>.</p>\n<p>I have setup this project to highlight the differences in how data binding works between different types of backing objects.</p>\n<p>In <code>index.html</code> there are three links:</p>\n<ul>\n<li>Submit the form that is backed by a Java class and is JavaBean compliant (i.e. getters and setters)</li>\n<li>Submit the form that is backed by a Java class that is not JavaBean compliant (setters have been omitted)</li>\n<li>Submit the form that is backed by a Java record (which is never JavaBean compliant as is it immutable)</li>\n</ul>\n<p><code>form.html</code> is re-used for each of the different form backing objects.</p>\n<p>In the form the first line will print out the <code>firstName</code> value (empty on form load of course).</p>\n<p>You will see that the form has three fields, <code>firstName</code>, <code>lastName</code> and <code>type</code>. The last field is bound to the enum <code>Type</code> and has only two possible correct values, <code>ACTIVE</code> and <code>INACTIVE</code>. You will see that there is a third item in the dropdownlist, which is invalid (more on that later).</p>\n<p>To run the project simply <code>./mvnw spring-boot:run</code>.</p>\n<p>The flow I want to run you though is as follows:</p>\n<ol>\n<li>Open each of the forms</li>\n<li>Submit as is</li>\n</ol>\n<p>You will see that in all three cases the <code>firstName</code> and <code>lastName</code> field's background color changed to red, to indicate that the values were invalid. This is because those two fields are annotated with <code>@NotBlank</code>.</p>\n<p>If all has gone well, in each of the three cases those two fields should have been red. The Java class non-JavaBean compliant form will have shown <code>null</code> for 'Entered firstName', whereas the Record form will have shown nothing (just like the JavaBean form)</p>\n<p>Now go through the following flow for each of the forms:</p>\n<ol>\n<li>Enter a value in the <code>firstName</code> field</li>\n<li>Select the <code>INVALID_VALUE</code> in the dropdownlist</li>\n<li>Submit</li>\n</ol>\n<p>You should see the following results:</p>\n<ul>\n<li>JavaBean form does as you would expect: <code>firstName</code> and <code>type</code> are marked red as they are invalid and you see the entered <code>firstName</code></li>\n<li>Class without setters will mark <code>firstName</code> and <code>lastName</code> red <strong>and</strong> the value for <code>type</code> is reset to <code>ACTIVE</code> and you will see <code>null</code> for 'Entered first name:'</li>\n<li>Record form will have thrown an HTTP 500.</li>\n</ul>\n<p>The fact that the JavaBean form does exactly what we expect is not wholly unsurprising. In the Spring MVC documentation they explicitly state:</p>\n<blockquote>\n<p>Only public properties following the JavaBeans naming conventions are exposed for data binding ‚Äî for example, public String getFirstName() and public void setFirstName(String) methods for a firstName property.</p>\n</blockquote>\n<p>For the non-JavaBean compliant form it seems like it is simply reset to an empty form, which is why the <code>firstName</code> property is not retained and shown on the page and why the <code>INVALID_VALUE</code> is no longer selected.</p>\n<p>In the case of the Record form, the backing object itself seems to be set to NULL, which is why we see the HTTP 500, the logs print the following stacktrace:</p>\n<blockquote>\n<p>org.springframework.expression.spel.SpelEvaluationException: EL1007E: Property or field 'firstName' cannot be found on null</p>\n</blockquote>\n<p>If you were to re-add the <code>form</code> to the <code>model</code> manually, everything would work fine, so change the <code>processRecordForm</code> from this:</p>\n<pre><code>@PostMapping(&quot;/formRecord&quot;)\npublic String processFormRecord(@Valid @ModelAttribute(&quot;form&quot;) FormRecord form, BindingResult bindingResult, RedirectAttributes redirectAttributes, Model model) {\n    if (bindingResult.hasErrors()) {\n        model.addAttribute(&quot;types&quot;, Type.values());\n        model.addAttribute(&quot;action&quot;, &quot;/formRecord&quot;);\n        return &quot;form&quot;;\n    }\n\n    redirectAttributes.addFlashAttribute(&quot;formSubmitted&quot;, &quot;success&quot;);\n    return &quot;redirect:/&quot;;\n}\n</code></pre>\n<p>To this:</p>\n<pre><code>@PostMapping(&quot;/formRecord&quot;)\npublic String processFormRecord(@Valid @ModelAttribute(&quot;form&quot;) FormRecord form, BindingResult bindingResult, RedirectAttributes redirectAttributes, Model model) {\n    if (bindingResult.hasErrors()) {\n        model.addAttribute(&quot;types&quot;, Type.values());\n        model.addAttribute(&quot;action&quot;, &quot;/formRecord&quot;);\n        model.addAttribute(&quot;form&quot;, form);\n        return &quot;form&quot;;\n    }\n\n    redirectAttributes.addFlashAttribute(&quot;formSubmitted&quot;, &quot;success&quot;);\n    return &quot;redirect:/&quot;;\n}\n</code></pre>\n<p>And it works as you would expect...</p>\n<p>Furthermore, if you were to remove the printing of the <code>firstName</code> value, i.e. the following line:</p>\n<p><code>&lt;p th:text=&quot;|Entered first name: ${form.firstName}|&quot;&gt;&lt;/p&gt;</code> in <code>form.html</code> and then run through the second scenario again, you'll get another (unexpected outcome). Namely, there is no longer an HTTP 500, but after the <code>typeMismatch</code> due to using an invalid enum value for <code>type</code>, the binding seems to have stopped completely, because the <code>lastName</code> field will <strong>not</strong> be marked as invalid...</p>\n<p>To summarize into questions I'm left with:</p>\n<ol>\n<li>What's the difference in data binding between a non-JavaBean compliant Java class and a Java record? There clearly is a difference as I'm getting different behavior.</li>\n<li>Why is the form not automatically being added again to the <code>model</code>, it's clearly marked as <code>@ModelAttribute</code>.</li>\n</ol>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":213468,"reputation":103487,"user_id":466862,"display_name":"Mark Rotteveel"},"score":3,"creation_date":1682854510,"post_id":76140991,"comment_id":134277622,"body_markdown":"Putting things in `lib/ext` was (almost) always the wrong solution. In recent Java versions, it isn&#39;t even possible anymore. So, remove the lib from `lib/ext`, and fix the problem with the applications that do need it, or define the dependency to your Spring Boot app as a &quot;provided&quot; dependency, so it isn&#39;t included in the WAR. Both Maven and Gradle provide options for this.","body":"Putting things in <code>lib&#47;ext</code> was (almost) always the wrong solution. In recent Java versions, it isn&#39;t even possible anymore. So, remove the lib from <code>lib&#47;ext</code>, and fix the problem with the applications that do need it, or define the dependency to your Spring Boot app as a &quot;provided&quot; dependency, so it isn&#39;t included in the WAR. Both Maven and Gradle provide options for this."},{"owner":{"account_id":9824751,"reputation":145,"user_id":7278126,"accept_rate":100,"display_name":"AHM200"},"score":0,"creation_date":1682855793,"post_id":76140991,"comment_id":134277780,"body_markdown":"Unfortunately I cannot remove it from ext as I need it for older services, and the version for the lib is older than the one I am using in the new service so, this won&#39;t be working for me","body":"Unfortunately I cannot remove it from ext as I need it for older services, and the version for the lib is older than the one I am using in the new service so, this won&#39;t be working for me"},{"owner":{"account_id":213468,"reputation":103487,"user_id":466862,"display_name":"Mark Rotteveel"},"score":3,"creation_date":1682855957,"post_id":76140991,"comment_id":134277808,"body_markdown":"Then you need to use a separate JRE installations to run the older and the newer applications.","body":"Then you need to use a separate JRE installations to run the older and the newer applications."}],"owner":{"account_id":9824751,"reputation":145,"user_id":7278126,"accept_rate":100,"display_name":"AHM200"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":48,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":0,"score":0,"last_activity_date":1682853889,"creation_date":1682853889,"question_id":76140991,"body_markdown":"I am having an issue with deploying spring boot war due to jar duplicate.\r\nThe root issue is that I had to add a jar manually to java ext folder because I need it in other solutions.\r\nAnd now this jar is also existing in the war I am deploying so is there any way to exclude this jar from being loaded from jre and instead be loaded from my dependencies only ? ","title":"Exclude jar from java jre","body":"<p>I am having an issue with deploying spring boot war due to jar duplicate.\nThe root issue is that I had to add a jar manually to java ext folder because I need it in other solutions.\nAnd now this jar is also existing in the war I am deploying so is there any way to exclude this jar from being loaded from jre and instead be loaded from my dependencies only ?</p>\n"},{"tags":["java","android","android-livedata"],"answers":[{"tags":[],"owner":{"account_id":16796825,"reputation":1274,"user_id":12143126,"display_name":"Mikhail Guliaev"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1682852907,"creation_date":1682852907,"answer_id":76140915,"question_id":76140644,"body_markdown":"Seems like you haven&#39;t provided the full code, so I&#39;ll try to help you using the snippets you provided.\r\n\r\nThis error happens, because `returnCode` which you get in this line `ReturnCode returnCode = returnCodeEvent.getContentIfNotHandled();` is `null`. It means that `returnCodeEvent.getContentIfNotHandled()` returns `null`.\r\n\r\nTherefore, judging by the code of your `Event` class, its `getContentIfNotHandled()` returns value only once. \r\n\r\nSo all above information leads us to the conclusion that some observer gets value from your Event before it comes to the observer from your `Activity`.\r\n\r\nFrom the snippets you provided I see only one thing that can lead your program to this error. It is your class `EventObserver`:\r\n\r\n    public class EventObserver&lt;T&gt; implements Observer&lt;Event&lt;T&gt;&gt; {\r\n        private OnEventChanged onEventChanged;\r\n\r\n        public EventObserver(OnEventChanged onEventChanged) {\r\n            this.onEventChanged = onEventChanged;\r\n        }\r\n\r\n        @Override\r\n        public void onChanged(@Nullable Event&lt;T&gt; tEvent) {\r\n            if (tEvent != null &amp;&amp; tEvent.getContentIfNotHandled() != null &amp;&amp; onEventChanged != null) // Here you call tEvent.getContentIfNotHandled() event FIRST TIME, so the value is picked\r\n            \r\n    onEventChanged.onUnhandledContent(tEvent.getContentIfNotHandled()); // It&#39;s the SECOND TIME when you called tEvent.getContentIfNotHandled(), so it will be null.\r\n\r\n        }\r\n\r\n        interface OnEventChanged&lt;T&gt; {\r\n            void onUnhandledContent(T data);\r\n        }\r\n    }\r\n\r\n**In `onChanged()` method you&#39;re calling `Event.getContentIfNotHandled()` twice, so probably this is the problem part of your code.** I&#39;m almost sure that by fixing this you will fix your problem, so you can debug this place carefully and fix this error.","title":"Event wrapper Android - How to clear the first observer?","body":"<p>Seems like you haven't provided the full code, so I'll try to help you using the snippets you provided.</p>\n<p>This error happens, because <code>returnCode</code> which you get in this line <code>ReturnCode returnCode = returnCodeEvent.getContentIfNotHandled();</code> is <code>null</code>. It means that <code>returnCodeEvent.getContentIfNotHandled()</code> returns <code>null</code>.</p>\n<p>Therefore, judging by the code of your <code>Event</code> class, its <code>getContentIfNotHandled()</code> returns value only once.</p>\n<p>So all above information leads us to the conclusion that some observer gets value from your Event before it comes to the observer from your <code>Activity</code>.</p>\n<p>From the snippets you provided I see only one thing that can lead your program to this error. It is your class <code>EventObserver</code>:</p>\n<pre><code>public class EventObserver&lt;T&gt; implements Observer&lt;Event&lt;T&gt;&gt; {\n    private OnEventChanged onEventChanged;\n\n    public EventObserver(OnEventChanged onEventChanged) {\n        this.onEventChanged = onEventChanged;\n    }\n\n    @Override\n    public void onChanged(@Nullable Event&lt;T&gt; tEvent) {\n        if (tEvent != null &amp;&amp; tEvent.getContentIfNotHandled() != null &amp;&amp; onEventChanged != null) // Here you call tEvent.getContentIfNotHandled() event FIRST TIME, so the value is picked\n        \nonEventChanged.onUnhandledContent(tEvent.getContentIfNotHandled()); // It's the SECOND TIME when you called tEvent.getContentIfNotHandled(), so it will be null.\n\n    }\n\n    interface OnEventChanged&lt;T&gt; {\n        void onUnhandledContent(T data);\n    }\n}\n</code></pre>\n<p><strong>In <code>onChanged()</code> method you're calling <code>Event.getContentIfNotHandled()</code> twice, so probably this is the problem part of your code.</strong> I'm almost sure that by fixing this you will fix your problem, so you can debug this place carefully and fix this error.</p>\n"}],"owner":{"account_id":15560654,"reputation":463,"user_id":11225863,"display_name":"Scripta14"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":61,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1682852907,"creation_date":1682849070,"question_id":76140644,"body_markdown":"I&#39;m reading a lot about that, but I can&#39;t find a solution. I&#39;ve never used before MutableLiveDate and I found out the event wrapper approch, but I&#39;m finding some problem to use it.\r\nThe code below works fine when I click button only one time, but for some reason I have to press button twice I recieve a NullPointerException. \r\nCreating two separate observers works. But on the same, repeated several times it passes me a null value in the getContentIfNotHandled()\r\n\r\n    java.lang.NullPointerException: Attempt to invoke virtual method &#39;int com.example.montaggioapp.montaggio.model.ReturnCode.getReturnCode()&#39; on a null object reference\r\n            at com.example.montaggioapp.montaggio.InCorsoActivity$2.onChanged(InCorsoActivity.java:147)\r\n            at com.example.montaggioapp.montaggio.InCorsoActivity$2.onChanged(InCorsoActivity.java:143)\r\n            at androidx.lifecycle.LiveData.considerNotify(LiveData.java:133)\r\n            at androidx.lifecycle.LiveData.dispatchingValue(LiveData.java:146)\r\n            at androidx.lifecycle.LiveData$ObserverWrapper.activeStateChanged(LiveData.java:468)\r\n            at androidx.lifecycle.LiveData$LifecycleBoundObserver.onStateChanged(LiveData.java:425)\r\n            at androidx.lifecycle.LifecycleRegistry$ObserverWithState.dispatchEvent(LifecycleRegistry.java:360)\r\n            at androidx.lifecycle.LifecycleRegistry.addObserver(LifecycleRegistry.java:202)\r\n            at androidx.lifecycle.LiveData.observe(LiveData.java:205)\r\n            at com.example.montaggioapp.montaggio.InCorsoActivity.lambda$onCreate$0$com-example-montaggioapp-montaggio-InCorsoActivity(InCorsoActivity.java:164)\r\n            at com.example.montaggioapp.montaggio.InCorsoActivity$$ExternalSyntheticLambda1.onChanged(Unknown Source:6)\r\n            at androidx.lifecycle.LiveData.considerNotify(LiveData.java:133)\r\n            at androidx.lifecycle.LiveData.dispatchingValue(LiveData.java:151)\r\n            at androidx.lifecycle.LiveData.setValue(LiveData.java:309)\r\n            at androidx.lifecycle.MutableLiveData.setValue(MutableLiveData.java:50)\r\n            at androidx.lifecycle.LiveData$1.run(LiveData.java:93)\r\n            at android.os.Handler.handleCallback(Handler.java:883)\r\n            at android.os.Handler.dispatchMessage(Handler.java:100)\r\n            at android.os.Looper.loop(Looper.java:214)\r\n            at android.app.ActivityThread.main(ActivityThread.java:7356)\r\n            at java.lang.reflect.Method.invoke(Native Method)\r\n            at com.android.internal.os.RuntimeInit$MethodAndArgsCaller.run(RuntimeInit.java:492)\r\n            at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:930)\r\n\r\nActivity:\r\n\r\n    @AndroidEntryPoint\r\n    public class InCorsoActivity extends AppCompatActivity implements OnClickListener&lt;Causale&gt;{\r\n    \r\n        private static final String MY_PREFS = &quot;SAVE_VALUE&quot;;\r\n        private static final String MY_CONFIG = &quot;VALUE_CONFIG&quot;;\r\n        private SharedPreferences prefs,config;\r\n        private SharedPreferences.Editor editor;\r\n        private AlertDialog.Builder builder;\r\n        private InCorsoViewModel inCorsoViewModel;\r\n        ActivityInCorsoBinding binding;\r\n        Observer&lt;Event&lt;ReturnCode&gt;&gt; eventRC_DatiLav, eventRC_Conferma;\r\n        private SpinnerAdapter adapter;\r\n        private String pin, ordPro;\r\n    \r\n        @RequiresApi(api = Build.VERSION_CODES.N)\r\n        @Override\r\n        protected void onCreate(Bundle savedInstanceState) {\r\n            super.onCreate(savedInstanceState);\r\n            //setContentView(R.layout.activity_in_corso);\r\n    \r\n            prefs = getSharedPreferences(MY_PREFS,MODE_PRIVATE);\r\n            config = getSharedPreferences(MY_CONFIG,MODE_PRIVATE);\r\n            editor = prefs.edit();\r\n            builder = new AlertDialog.Builder(this);\r\n    \r\n            inCorsoViewModel = new ViewModelProvider(this).get(InCorsoViewModel.class);\r\n            binding = DataBindingUtil.setContentView(this,R.layout.activity_in_corso);\r\n            binding.setLifecycleOwner(this);\r\n            binding.setInCorso(inCorsoViewModel);\r\n            binding.qtaProdotte.setShowSoftInputOnFocus(false);\r\n            binding.qtaProdotte.requestFocus();\r\n    \r\n            List&lt;SpinnerViewModel&gt; items = new ArrayList&lt;&gt;();\r\n            items.add(CausaleMapper.map(new Causale(&quot;SEL. CAUSALE&quot;), (OnClickListener&lt;Causale&gt;) this));\r\n            items.add(CausaleMapper.map(new Causale(&quot;FINE LAV&quot;), (OnClickListener&lt;Causale&gt;) this));\r\n            items.add(CausaleMapper.map(new Causale(&quot;PAUSA&quot;), (OnClickListener&lt;Causale&gt;) this));\r\n            items.add(CausaleMapper.map(new Causale(&quot;SOSPESO&quot;), (OnClickListener&lt;Causale&gt;) this));\r\n    \r\n            String serverName = config.getString(&quot;serverName&quot;,&quot;&quot;);\r\n            String port = config.getString(&quot;port&quot;,&quot;&quot;);\r\n            String schemaOrion = config.getString(&quot;schemaOrion&quot;,&quot;&quot;);\r\n            pin= prefs.getString(&quot;pin&quot;,&quot;0&quot;) ;\r\n            ordPro = prefs.getString(&quot;ordPro&quot;,&quot;0&quot;);\r\n            String baseurl = &quot;http://&quot;+serverName+&quot;:&quot;+port+&quot;/ords/&quot;+schemaOrion;\r\n    \r\n            eventRC_DatiLav = new Observer&lt;Event&lt;ReturnCode&gt;&gt;() {\r\n                @Override\r\n                public void onChanged(Event&lt;ReturnCode&gt; returnCodeEvent) {\r\n                    ReturnCode returnCode = returnCodeEvent.getContentIfNotHandled();\r\n                    int rc = returnCode.getReturnCode();\r\n                    if (rc &lt; 0 ){\r\n                        String msg = returnCode.getReturnMessage();\r\n                        message(msg, new Cb() {\r\n                            @Override\r\n                            public void onOkCliked() {\r\n                                Intent intent = new Intent(getApplicationContext(), SelezionaAttActivity.class);\r\n                                intent.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);\r\n                                startActivity(intent);\r\n                            }\r\n                        });\r\n                    }else {\r\n                       String[] strDatiLav = returnCode.getReturnMessage().split(&quot;;&quot;);\r\n                       binding.OrdineInCorso.setText(strDatiLav[0]);\r\n                       binding.codParteInCorso.setText(strDatiLav[1]);\r\n                       binding.desParteInCorso.setText(strDatiLav[2]);\r\n                       binding.PezziOrdInCorso.setText(strDatiLav[3]);\r\n                       binding.PezziProdInCorso.setText(strDatiLav[4]);\r\n                       binding.StatoInCorso.setText(prefs.getString(&quot;stato&quot;,&quot; &quot;));\r\n                       binding.inDateInCorso.setText(getCurrentDate());\r\n                       adapter = new SpinnerAdapter(getApplicationContext(),R.layout.item_view, BR.viewModel,items);\r\n                       binding.spinner.setAdapter(adapter);\r\n    \r\n                    }\r\n                }\r\n            };\r\n            //inCorsoViewModel.makeApiDatiLavCall(ordPro);\r\n            inCorsoViewModel.makeApiDatiLavCall(ordPro,baseurl);\r\n            inCorsoViewModel.getLiveDataApiDatiLav().observe(this,eventRC_DatiLav);\r\n    \r\n    \r\n    \r\n    \r\n            inCorsoViewModel.getDataOra(binding).observe(this, inCorso -&gt; {\r\n                if (TextUtils.isEmpty(Objects.requireNonNull(inCorso).getStrDate())) {\r\n                    binding.inDateInCorso.setError(&quot;Data non selezionata&quot;);\r\n                    binding.inDateInCorso.requestFocus();\r\n                }\r\n                else if (TextUtils.isEmpty(Objects.requireNonNull(inCorso).getStrTime())) {\r\n                    binding.inTimeInCorso.setError(&quot;Orario non selezionato&quot;);\r\n                    binding.inTimeInCorso.requestFocus();\r\n                }\r\n    \r\n                else {\r\n    \r\n    \r\n                    eventRC_Conferma = new Observer&lt;Event&lt;ReturnCode&gt;&gt;() {\r\n                        @Override\r\n                        public void onChanged(Event&lt;ReturnCode&gt; returnCodeEvent) {\r\n                            ReturnCode returnCode = returnCodeEvent.getContentIfNotHandled();\r\n                            int rc = returnCode.getReturnCode();\r\n                            if (rc &lt; 0 ){\r\n                                String msg = returnCode.getReturnMessage();\r\n                                message(msg, () -&gt; {\r\n    \r\n                                });\r\n                            }else {\r\n                                String msg = returnCode.getReturnMessage();\r\n                                messageEseguito(msg, () -&gt; {\r\n                                    Intent intent = new Intent(getApplicationContext(),SelezionaAttActivity.class);\r\n                                    intent.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);\r\n                                    startActivity(intent);\r\n                                });\r\n                            }\r\n                        }\r\n                    };\r\n                    inCorsoViewModel.makeApiCall(pin,ordPro,baseurl);\r\n                    inCorsoViewModel.getLiveData().observe(this,eventRC_Conferma);\r\n    \r\n    \r\n    \r\n                }\r\n            });\r\n    \r\n            binding.btnAnnulaInCorso.setOnClickListener(view -&gt; {\r\n    \r\n            });\r\n    \r\n        }\r\n\r\nViewModel class\r\n \r\n\r\n    private MutableLiveData&lt;Event&lt;ReturnCode&gt;&gt; liveDataApiCall;\r\n\r\n    @Inject\r\n    ApiInterface apiInterface;\r\n\r\n    @Inject\r\n    public InCorsoViewModel(){\r\n        this.liveDataApiCall = new MutableLiveData&lt;&gt;();\r\n        \r\n    }\r\n\r\n\r\n\r\n    @Override\r\n    public MutableLiveData&lt;Event&lt;ReturnCode&gt;&gt; getLiveData() {\r\n        return liveDataApiCall;\r\n    }\r\n\r\n \r\n\r\n    @RequiresApi(api = Build.VERSION_CODES.N)\r\n        @Override\r\n        public void makeApiCall(String pin, String ordPro,String baseurl) {\r\n            String tipoMov = prefs.getString(&quot;tipoMov&quot;,&quot;&quot;);\r\n            String idMac = &quot;&quot;;\r\n            String dataOra = date.getValue()+&quot; &quot;+time.getValue();\r\n            String quant = qta.getValue() != null  ? qta.getValue() : &quot;0&quot;;\r\n            String param = &quot;&quot;;\r\n    \r\n            AggOrdRepo aggOrdRepo = new AggOrdRepo(apiInterface);\r\n            aggOrdRepo.getAggiornaOrdine(baseurl,pin,ordPro,tipoMov,idMac,dataOra,quant,param,liveDataApiCall,toastMessageObserver);\r\n        }\r\n\r\nRepository class\r\n  \r\n\r\n     private Disposable disposable;\r\n        private ApiInterface apiInterface;\r\n        private MutableLiveData&lt;Event&lt;ReturnCode&gt;&gt; liveDataApiDatiLav;\r\n        private MutableLiveData&lt;String&gt; toastMessageObserver;\r\n    \r\n        public DatiLavRepo(ApiInterface apiInterface){\r\n            this.apiInterface = apiInterface;\r\n        }\r\n    \r\n        public void getDatiLav(String baseurl, String ordPro, MutableLiveData&lt;Event&lt;ReturnCode&gt;&gt; liveDataApiDatiLav, MutableLiveData&lt;String&gt; toastMessageObserver){\r\n            String HTTPS_PATH_GETORD = null;\r\n    \r\n            try {\r\n                HTTPS_PATH_GETORD = baseurl+&quot;/gm/montaggio?p_cmd=3&amp;p_p1=&quot;+ URLEncoder.encode(ordPro,&quot;UTF-8&quot;);\r\n            } catch (UnsupportedEncodingException e) {\r\n                e.printStackTrace();\r\n            }\r\n    \r\n    \r\n            this.liveDataApiDatiLav = liveDataApiDatiLav;\r\n            this.toastMessageObserver = toastMessageObserver;\r\n    \r\n    \r\n    \r\n            disposable = apiInterface.getDatiLavorazione(HTTPS_PATH_GETORD)\r\n                    .observeOn(AndroidSchedulers.mainThread())\r\n                    .subscribeOn(Schedulers.io())\r\n                    .subscribe(this::handlerResponse,this::handlerError);\r\n         \r\n        }\r\n    \r\n        private void handlerResponse(ReturnCode rc) {\r\n            liveDataApiDatiLav.postValue(new Event(rc));\r\n        }\r\n    \r\n        private void handlerError(Throwable t) {\r\n            toastMessageObserver.setValue(&quot;Something unexpected happened to our request: &quot;+t.getMessage());\r\n        }\r\n\r\n\r\n    public class EventObserver&lt;T&gt; implements Observer&lt;Event&lt;T&gt;&gt; {\r\n        private OnEventChanged onEventChanged;\r\n    \r\n        public EventObserver(OnEventChanged onEventChanged) {\r\n            this.onEventChanged = onEventChanged;\r\n        }\r\n    \r\n        @Override\r\n        public void onChanged(@Nullable Event&lt;T&gt; tEvent) {\r\n            if (tEvent != null &amp;&amp; tEvent.getContentIfNotHandled() != null &amp;&amp; onEventChanged != null)\r\n                onEventChanged.onUnhandledContent(tEvent.getContentIfNotHandled());\r\n    \r\n        }\r\n    \r\n        interface OnEventChanged&lt;T&gt; {\r\n            void onUnhandledContent(T data);\r\n        }\r\n    }\r\n\r\n    public class Event&lt;T&gt; {\r\n        private boolean hasBeenHandled = false;\r\n        private T content;\r\n    \r\n        public Event(T content) {\r\n            this.content = content;\r\n        }\r\n    \r\n        public T getContentIfNotHandled() {\r\n            if (hasBeenHandled) {\r\n                return null;\r\n            } else {\r\n                hasBeenHandled = true;\r\n                return content;\r\n            }\r\n        }\r\n    \r\n        public boolean isHandled() {\r\n            return hasBeenHandled;\r\n        }\r\n    \r\n    }\r\n\r\n\r\nIf anyone can help me understand how this works","title":"Event wrapper Android - How to clear the first observer?","body":"<p>I'm reading a lot about that, but I can't find a solution. I've never used before MutableLiveDate and I found out the event wrapper approch, but I'm finding some problem to use it.\nThe code below works fine when I click button only one time, but for some reason I have to press button twice I recieve a NullPointerException.\nCreating two separate observers works. But on the same, repeated several times it passes me a null value in the getContentIfNotHandled()</p>\n<pre><code>java.lang.NullPointerException: Attempt to invoke virtual method 'int com.example.montaggioapp.montaggio.model.ReturnCode.getReturnCode()' on a null object reference\n        at com.example.montaggioapp.montaggio.InCorsoActivity$2.onChanged(InCorsoActivity.java:147)\n        at com.example.montaggioapp.montaggio.InCorsoActivity$2.onChanged(InCorsoActivity.java:143)\n        at androidx.lifecycle.LiveData.considerNotify(LiveData.java:133)\n        at androidx.lifecycle.LiveData.dispatchingValue(LiveData.java:146)\n        at androidx.lifecycle.LiveData$ObserverWrapper.activeStateChanged(LiveData.java:468)\n        at androidx.lifecycle.LiveData$LifecycleBoundObserver.onStateChanged(LiveData.java:425)\n        at androidx.lifecycle.LifecycleRegistry$ObserverWithState.dispatchEvent(LifecycleRegistry.java:360)\n        at androidx.lifecycle.LifecycleRegistry.addObserver(LifecycleRegistry.java:202)\n        at androidx.lifecycle.LiveData.observe(LiveData.java:205)\n        at com.example.montaggioapp.montaggio.InCorsoActivity.lambda$onCreate$0$com-example-montaggioapp-montaggio-InCorsoActivity(InCorsoActivity.java:164)\n        at com.example.montaggioapp.montaggio.InCorsoActivity$$ExternalSyntheticLambda1.onChanged(Unknown Source:6)\n        at androidx.lifecycle.LiveData.considerNotify(LiveData.java:133)\n        at androidx.lifecycle.LiveData.dispatchingValue(LiveData.java:151)\n        at androidx.lifecycle.LiveData.setValue(LiveData.java:309)\n        at androidx.lifecycle.MutableLiveData.setValue(MutableLiveData.java:50)\n        at androidx.lifecycle.LiveData$1.run(LiveData.java:93)\n        at android.os.Handler.handleCallback(Handler.java:883)\n        at android.os.Handler.dispatchMessage(Handler.java:100)\n        at android.os.Looper.loop(Looper.java:214)\n        at android.app.ActivityThread.main(ActivityThread.java:7356)\n        at java.lang.reflect.Method.invoke(Native Method)\n        at com.android.internal.os.RuntimeInit$MethodAndArgsCaller.run(RuntimeInit.java:492)\n        at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:930)\n</code></pre>\n<p>Activity:</p>\n<pre><code>@AndroidEntryPoint\npublic class InCorsoActivity extends AppCompatActivity implements OnClickListener&lt;Causale&gt;{\n\n    private static final String MY_PREFS = &quot;SAVE_VALUE&quot;;\n    private static final String MY_CONFIG = &quot;VALUE_CONFIG&quot;;\n    private SharedPreferences prefs,config;\n    private SharedPreferences.Editor editor;\n    private AlertDialog.Builder builder;\n    private InCorsoViewModel inCorsoViewModel;\n    ActivityInCorsoBinding binding;\n    Observer&lt;Event&lt;ReturnCode&gt;&gt; eventRC_DatiLav, eventRC_Conferma;\n    private SpinnerAdapter adapter;\n    private String pin, ordPro;\n\n    @RequiresApi(api = Build.VERSION_CODES.N)\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        //setContentView(R.layout.activity_in_corso);\n\n        prefs = getSharedPreferences(MY_PREFS,MODE_PRIVATE);\n        config = getSharedPreferences(MY_CONFIG,MODE_PRIVATE);\n        editor = prefs.edit();\n        builder = new AlertDialog.Builder(this);\n\n        inCorsoViewModel = new ViewModelProvider(this).get(InCorsoViewModel.class);\n        binding = DataBindingUtil.setContentView(this,R.layout.activity_in_corso);\n        binding.setLifecycleOwner(this);\n        binding.setInCorso(inCorsoViewModel);\n        binding.qtaProdotte.setShowSoftInputOnFocus(false);\n        binding.qtaProdotte.requestFocus();\n\n        List&lt;SpinnerViewModel&gt; items = new ArrayList&lt;&gt;();\n        items.add(CausaleMapper.map(new Causale(&quot;SEL. CAUSALE&quot;), (OnClickListener&lt;Causale&gt;) this));\n        items.add(CausaleMapper.map(new Causale(&quot;FINE LAV&quot;), (OnClickListener&lt;Causale&gt;) this));\n        items.add(CausaleMapper.map(new Causale(&quot;PAUSA&quot;), (OnClickListener&lt;Causale&gt;) this));\n        items.add(CausaleMapper.map(new Causale(&quot;SOSPESO&quot;), (OnClickListener&lt;Causale&gt;) this));\n\n        String serverName = config.getString(&quot;serverName&quot;,&quot;&quot;);\n        String port = config.getString(&quot;port&quot;,&quot;&quot;);\n        String schemaOrion = config.getString(&quot;schemaOrion&quot;,&quot;&quot;);\n        pin= prefs.getString(&quot;pin&quot;,&quot;0&quot;) ;\n        ordPro = prefs.getString(&quot;ordPro&quot;,&quot;0&quot;);\n        String baseurl = &quot;http://&quot;+serverName+&quot;:&quot;+port+&quot;/ords/&quot;+schemaOrion;\n\n        eventRC_DatiLav = new Observer&lt;Event&lt;ReturnCode&gt;&gt;() {\n            @Override\n            public void onChanged(Event&lt;ReturnCode&gt; returnCodeEvent) {\n                ReturnCode returnCode = returnCodeEvent.getContentIfNotHandled();\n                int rc = returnCode.getReturnCode();\n                if (rc &lt; 0 ){\n                    String msg = returnCode.getReturnMessage();\n                    message(msg, new Cb() {\n                        @Override\n                        public void onOkCliked() {\n                            Intent intent = new Intent(getApplicationContext(), SelezionaAttActivity.class);\n                            intent.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);\n                            startActivity(intent);\n                        }\n                    });\n                }else {\n                   String[] strDatiLav = returnCode.getReturnMessage().split(&quot;;&quot;);\n                   binding.OrdineInCorso.setText(strDatiLav[0]);\n                   binding.codParteInCorso.setText(strDatiLav[1]);\n                   binding.desParteInCorso.setText(strDatiLav[2]);\n                   binding.PezziOrdInCorso.setText(strDatiLav[3]);\n                   binding.PezziProdInCorso.setText(strDatiLav[4]);\n                   binding.StatoInCorso.setText(prefs.getString(&quot;stato&quot;,&quot; &quot;));\n                   binding.inDateInCorso.setText(getCurrentDate());\n                   adapter = new SpinnerAdapter(getApplicationContext(),R.layout.item_view, BR.viewModel,items);\n                   binding.spinner.setAdapter(adapter);\n\n                }\n            }\n        };\n        //inCorsoViewModel.makeApiDatiLavCall(ordPro);\n        inCorsoViewModel.makeApiDatiLavCall(ordPro,baseurl);\n        inCorsoViewModel.getLiveDataApiDatiLav().observe(this,eventRC_DatiLav);\n\n\n\n\n        inCorsoViewModel.getDataOra(binding).observe(this, inCorso -&gt; {\n            if (TextUtils.isEmpty(Objects.requireNonNull(inCorso).getStrDate())) {\n                binding.inDateInCorso.setError(&quot;Data non selezionata&quot;);\n                binding.inDateInCorso.requestFocus();\n            }\n            else if (TextUtils.isEmpty(Objects.requireNonNull(inCorso).getStrTime())) {\n                binding.inTimeInCorso.setError(&quot;Orario non selezionato&quot;);\n                binding.inTimeInCorso.requestFocus();\n            }\n\n            else {\n\n\n                eventRC_Conferma = new Observer&lt;Event&lt;ReturnCode&gt;&gt;() {\n                    @Override\n                    public void onChanged(Event&lt;ReturnCode&gt; returnCodeEvent) {\n                        ReturnCode returnCode = returnCodeEvent.getContentIfNotHandled();\n                        int rc = returnCode.getReturnCode();\n                        if (rc &lt; 0 ){\n                            String msg = returnCode.getReturnMessage();\n                            message(msg, () -&gt; {\n\n                            });\n                        }else {\n                            String msg = returnCode.getReturnMessage();\n                            messageEseguito(msg, () -&gt; {\n                                Intent intent = new Intent(getApplicationContext(),SelezionaAttActivity.class);\n                                intent.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);\n                                startActivity(intent);\n                            });\n                        }\n                    }\n                };\n                inCorsoViewModel.makeApiCall(pin,ordPro,baseurl);\n                inCorsoViewModel.getLiveData().observe(this,eventRC_Conferma);\n\n\n\n            }\n        });\n\n        binding.btnAnnulaInCorso.setOnClickListener(view -&gt; {\n\n        });\n\n    }\n</code></pre>\n<p>ViewModel class</p>\n<pre><code>private MutableLiveData&lt;Event&lt;ReturnCode&gt;&gt; liveDataApiCall;\n\n@Inject\nApiInterface apiInterface;\n\n@Inject\npublic InCorsoViewModel(){\n    this.liveDataApiCall = new MutableLiveData&lt;&gt;();\n    \n}\n\n\n\n@Override\npublic MutableLiveData&lt;Event&lt;ReturnCode&gt;&gt; getLiveData() {\n    return liveDataApiCall;\n}\n\n\n\n@RequiresApi(api = Build.VERSION_CODES.N)\n    @Override\n    public void makeApiCall(String pin, String ordPro,String baseurl) {\n        String tipoMov = prefs.getString(&quot;tipoMov&quot;,&quot;&quot;);\n        String idMac = &quot;&quot;;\n        String dataOra = date.getValue()+&quot; &quot;+time.getValue();\n        String quant = qta.getValue() != null  ? qta.getValue() : &quot;0&quot;;\n        String param = &quot;&quot;;\n\n        AggOrdRepo aggOrdRepo = new AggOrdRepo(apiInterface);\n        aggOrdRepo.getAggiornaOrdine(baseurl,pin,ordPro,tipoMov,idMac,dataOra,quant,param,liveDataApiCall,toastMessageObserver);\n    }\n</code></pre>\n<p>Repository class</p>\n<pre><code> private Disposable disposable;\n    private ApiInterface apiInterface;\n    private MutableLiveData&lt;Event&lt;ReturnCode&gt;&gt; liveDataApiDatiLav;\n    private MutableLiveData&lt;String&gt; toastMessageObserver;\n\n    public DatiLavRepo(ApiInterface apiInterface){\n        this.apiInterface = apiInterface;\n    }\n\n    public void getDatiLav(String baseurl, String ordPro, MutableLiveData&lt;Event&lt;ReturnCode&gt;&gt; liveDataApiDatiLav, MutableLiveData&lt;String&gt; toastMessageObserver){\n        String HTTPS_PATH_GETORD = null;\n\n        try {\n            HTTPS_PATH_GETORD = baseurl+&quot;/gm/montaggio?p_cmd=3&amp;p_p1=&quot;+ URLEncoder.encode(ordPro,&quot;UTF-8&quot;);\n        } catch (UnsupportedEncodingException e) {\n            e.printStackTrace();\n        }\n\n\n        this.liveDataApiDatiLav = liveDataApiDatiLav;\n        this.toastMessageObserver = toastMessageObserver;\n\n\n\n        disposable = apiInterface.getDatiLavorazione(HTTPS_PATH_GETORD)\n                .observeOn(AndroidSchedulers.mainThread())\n                .subscribeOn(Schedulers.io())\n                .subscribe(this::handlerResponse,this::handlerError);\n     \n    }\n\n    private void handlerResponse(ReturnCode rc) {\n        liveDataApiDatiLav.postValue(new Event(rc));\n    }\n\n    private void handlerError(Throwable t) {\n        toastMessageObserver.setValue(&quot;Something unexpected happened to our request: &quot;+t.getMessage());\n    }\n\n\npublic class EventObserver&lt;T&gt; implements Observer&lt;Event&lt;T&gt;&gt; {\n    private OnEventChanged onEventChanged;\n\n    public EventObserver(OnEventChanged onEventChanged) {\n        this.onEventChanged = onEventChanged;\n    }\n\n    @Override\n    public void onChanged(@Nullable Event&lt;T&gt; tEvent) {\n        if (tEvent != null &amp;&amp; tEvent.getContentIfNotHandled() != null &amp;&amp; onEventChanged != null)\n            onEventChanged.onUnhandledContent(tEvent.getContentIfNotHandled());\n\n    }\n\n    interface OnEventChanged&lt;T&gt; {\n        void onUnhandledContent(T data);\n    }\n}\n\npublic class Event&lt;T&gt; {\n    private boolean hasBeenHandled = false;\n    private T content;\n\n    public Event(T content) {\n        this.content = content;\n    }\n\n    public T getContentIfNotHandled() {\n        if (hasBeenHandled) {\n            return null;\n        } else {\n            hasBeenHandled = true;\n            return content;\n        }\n    }\n\n    public boolean isHandled() {\n        return hasBeenHandled;\n    }\n\n}\n</code></pre>\n<p>If anyone can help me understand how this works</p>\n"},{"tags":["java","java-stream"],"comments":[{"owner":{"account_id":7612423,"reputation":82486,"user_id":5772882,"display_name":"Anonymous"},"score":0,"creation_date":1682978162,"post_id":76140768,"comment_id":134294088,"body_markdown":"There is,a way, but I can‚Äôt see why you should want to. Your code is just fine as it is.","body":"There is,a way, but I can‚Äôt see why you should want to. Your code is just fine as it is."},{"owner":{"account_id":7612423,"reputation":82486,"user_id":5772882,"display_name":"Anonymous"},"score":0,"creation_date":1683007284,"post_id":76140768,"comment_id":134296854,"body_markdown":"In `Result` I don‚Äôt think you should ever allow `answers` to be `null`. Set it to `Collections.emptyList()` if appropriate. It does not take up more space than `null` and will allow you to stream the collection without a null check first.","body":"In <code>Result</code> I don‚Äôt think you should ever allow <code>answers</code> to be <code>null</code>. Set it to <code>Collections.emptyList()</code> if appropriate. It does not take up more space than <code>null</code> and will allow you to stream the collection without a null check first."},{"owner":{"account_id":3211603,"reputation":289297,"user_id":2711488,"display_name":"Holger"},"score":2,"creation_date":1683030522,"post_id":76140768,"comment_id":134301206,"body_markdown":"You could simply use `return result != null &amp;&amp; result.getAnswers() != null &amp;&amp; result.getAnswers().stream() ‚Ä¶` Instead of `.map(q -&gt; &quot;xy&quot;.equals(q.getValue())) .orElse(false)`, you can use `.filter(q -&gt; &quot;xy&quot;.equals(q.getValue())) .isPresent()` but perhaps, your entire operation is actually meant to be `result.getAnswers().stream() .anyMatch(a -&gt; &quot;a&quot;.equals(a.getId()) &amp;&amp; &quot;xy&quot;.equals(a.getValue()))`","body":"You could simply use <code>return result != null &amp;&amp; result.getAnswers() != null &amp;&amp; result.getAnswers().stream() ‚Ä¶</code> Instead of <code>.map(q -&gt; &quot;xy&quot;.equals(q.getValue())) .orElse(false)</code>, you can use <code>.filter(q -&gt; &quot;xy&quot;.equals(q.getValue())) .isPresent()</code> but perhaps, your entire operation is actually meant to be <code>result.getAnswers().stream() .anyMatch(a -&gt; &quot;a&quot;.equals(a.getId()) &amp;&amp; &quot;xy&quot;.equals(a.getValue()))</code>"}],"answers":[{"tags":[],"owner":{"account_id":404649,"reputation":57172,"user_id":773113,"accept_rate":72,"display_name":"Mike Nakis"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1682850950,"creation_date":1682850950,"answer_id":76140783,"question_id":76140768,"body_markdown":"`Optional&lt;Result&gt; maybeResult = Optional.ofNullable( result )` will give you an optional which is either present or not present depending on whether `result` was `null` or not.\r\n\r\nThen, you can use `maybeResult.map( r -&gt; r.getAnswers().stream()... )` or `maybeResult.ifPresent( r -&gt; r.getAnswers().stream()... )`.\r\n","title":"How to replace if-Statement by using Optional/Stream API","body":"<p><code>Optional&lt;Result&gt; maybeResult = Optional.ofNullable( result )</code> will give you an optional which is either present or not present depending on whether <code>result</code> was <code>null</code> or not.</p>\n<p>Then, you can use <code>maybeResult.map( r -&gt; r.getAnswers().stream()... )</code> or <code>maybeResult.ifPresent( r -&gt; r.getAnswers().stream()... )</code>.</p>\n"},{"tags":[],"owner":{"account_id":17873261,"reputation":81,"user_id":12983985,"display_name":"avihaiB"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1682851371,"creation_date":1682851371,"answer_id":76140812,"question_id":76140768,"body_markdown":"Yes you can.\r\nfor example : \r\n\r\n    String job = ...; // some string value\r\n    String str = Optional.ofNullable(job)\r\n        .map(n -&gt; &quot;Your job is : &quot; + n)\r\n        .orElse(&quot;I dont know what is your job&quot;);\r\n\r\n","title":"How to replace if-Statement by using Optional/Stream API","body":"<p>Yes you can.\nfor example :</p>\n<pre><code>String job = ...; // some string value\nString str = Optional.ofNullable(job)\n    .map(n -&gt; &quot;Your job is : &quot; + n)\n    .orElse(&quot;I dont know what is your job&quot;);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1427796,"reputation":93,"user_id":1350889,"display_name":"user1350889"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1682852683,"creation_date":1682852683,"answer_id":76140897,"question_id":76140768,"body_markdown":"This solution worked:\r\n\r\n    private boolean check(@Nullable Result result) {\r\n        return Optional.ofNullable(result)\r\n                .map(Result::getAnswers)\r\n                .map(l -&gt; l.stream()\r\n                        .filter(a -&gt; &quot;a&quot;.equals(a.getId()))\r\n                        .findFirst()\r\n                        .map(q -&gt; &quot;xy&quot;.equals(q.getValue()))\r\n                        .orElse(false))\r\n                .orElse(false);\r\n    }","title":"How to replace if-Statement by using Optional/Stream API","body":"<p>This solution worked:</p>\n<pre><code>private boolean check(@Nullable Result result) {\n    return Optional.ofNullable(result)\n            .map(Result::getAnswers)\n            .map(l -&gt; l.stream()\n                    .filter(a -&gt; &quot;a&quot;.equals(a.getId()))\n                    .findFirst()\n                    .map(q -&gt; &quot;xy&quot;.equals(q.getValue()))\n                    .orElse(false))\n            .orElse(false);\n}\n</code></pre>\n"}],"owner":{"account_id":1427796,"reputation":93,"user_id":1350889,"display_name":"user1350889"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":92,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":3,"score":0,"last_activity_date":1682852683,"creation_date":1682850735,"question_id":76140768,"body_markdown":"Is there a way to replace the if statement by using Optional or similar lambda construct? \r\nThe idea is to having one statement without if.\r\n\r\n    private boolean check(@Nullable Result result) {\r\n        if (result != null &amp;&amp; result.getAnswers() != null) {\r\n            return result.getAnswers().stream()\r\n                    .filter(a -&gt; &quot;a&quot;.equals(a.getId()))\r\n                    .findFirst()\r\n                    .map(q -&gt; &quot;xy&quot;.equals(q.getValue()))\r\n                    .orElse(false);\r\n        }\r\n        return false;\r\n    }\r\n\r\n    class Result {\r\n      private List&lt;MyAnswer&gt; answers;\r\n    }\r\n\r\n    public class MyAnswer {\r\n      private final String id;\r\n      private final String value;\r\n    }\r\n","title":"How to replace if-Statement by using Optional/Stream API","body":"<p>Is there a way to replace the if statement by using Optional or similar lambda construct?\nThe idea is to having one statement without if.</p>\n<pre><code>private boolean check(@Nullable Result result) {\n    if (result != null &amp;&amp; result.getAnswers() != null) {\n        return result.getAnswers().stream()\n                .filter(a -&gt; &quot;a&quot;.equals(a.getId()))\n                .findFirst()\n                .map(q -&gt; &quot;xy&quot;.equals(q.getValue()))\n                .orElse(false);\n    }\n    return false;\n}\n\nclass Result {\n  private List&lt;MyAnswer&gt; answers;\n}\n\npublic class MyAnswer {\n  private final String id;\n  private final String value;\n}\n</code></pre>\n"},{"tags":["java","servlets","java-ws"],"owner":{"account_id":11567291,"reputation":61,"user_id":15132662,"display_name":"Mohamad J Alanbaki"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":34,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1682851230,"creation_date":1682851230,"question_id":76140799,"body_markdown":"this is the code for java webservices and keep get the same error with soapUI and the same error for the xml, I&#39;m working with jdk 8\r\n\r\nI have issue with the endpoint of the java web services as it&#39;s show in the code but it&#39;s keep giving me this response as bellow:\r\n\r\nError loading[http://localhost:8096/ws/biller_customer_authentication]: org.apache.xmlbeans.XmlException: org.apache.xmlbeans.XmlException: error: Premature end of file.\r\n\r\n\r\n```\r\n@EnableWs\r\n@Configuration\r\npublic class WSConfig extends WsConfigurerAdapter {\r\n\r\n    @Bean\r\n    public ServletRegistrationBean messageDispatcherServlet(ApplicationContext applicationContext) {\r\n        MessageDispatcherServlet servlet = new MessageDispatcherServlet();\r\n        servlet.setApplicationContext(applicationContext);\r\n        servlet.setTransformWsdlLocations(true);\r\n        return new ServletRegistrationBean(servlet, &quot;/ws/*&quot;);\r\n    }\r\n\r\n    @Bean(name = &quot;biller_customer_authentication&quot;)\r\n    public DefaultWsdl11Definition billerCustomerAuthentication(XsdSchema billerCustomerAuthenticationSchema) {\r\n        DefaultWsdl11Definition wsdl11Definition = new DefaultWsdl11Definition();\r\n        wsdl11Definition.setPortTypeName(&quot;BillerCustomerAuthenticationPort&quot;);\r\n        wsdl11Definition.setLocationUri(&quot;/ws&quot;);\r\n        wsdl11Definition.setTargetNamespace(&quot;http://localhost:8096&quot;);\r\n        wsdl11Definition.setSchema(billerCustomerAuthenticationSchema );\r\n        return wsdl11Definition;\r\n    }\r\n\r\n    @Bean\r\n    public XsdSchema billerCustomerAuthenticationSchema() {\r\n        return new SimpleXsdSchema(new ClassPathResource(&quot;xsd/biller.xsd&quot;));\r\n    }\r\n}\r\n```","title":"XML Exception with Java-WS","body":"<p>this is the code for java webservices and keep get the same error with soapUI and the same error for the xml, I'm working with jdk 8</p>\n<p>I have issue with the endpoint of the java web services as it's show in the code but it's keep giving me this response as bellow:</p>\n<p>Error loading[http://localhost:8096/ws/biller_customer_authentication]: org.apache.xmlbeans.XmlException: org.apache.xmlbeans.XmlException: error: Premature end of file.</p>\n<pre><code>@EnableWs\n@Configuration\npublic class WSConfig extends WsConfigurerAdapter {\n\n    @Bean\n    public ServletRegistrationBean messageDispatcherServlet(ApplicationContext applicationContext) {\n        MessageDispatcherServlet servlet = new MessageDispatcherServlet();\n        servlet.setApplicationContext(applicationContext);\n        servlet.setTransformWsdlLocations(true);\n        return new ServletRegistrationBean(servlet, &quot;/ws/*&quot;);\n    }\n\n    @Bean(name = &quot;biller_customer_authentication&quot;)\n    public DefaultWsdl11Definition billerCustomerAuthentication(XsdSchema billerCustomerAuthenticationSchema) {\n        DefaultWsdl11Definition wsdl11Definition = new DefaultWsdl11Definition();\n        wsdl11Definition.setPortTypeName(&quot;BillerCustomerAuthenticationPort&quot;);\n        wsdl11Definition.setLocationUri(&quot;/ws&quot;);\n        wsdl11Definition.setTargetNamespace(&quot;http://localhost:8096&quot;);\n        wsdl11Definition.setSchema(billerCustomerAuthenticationSchema );\n        return wsdl11Definition;\n    }\n\n    @Bean\n    public XsdSchema billerCustomerAuthenticationSchema() {\n        return new SimpleXsdSchema(new ClassPathResource(&quot;xsd/biller.xsd&quot;));\n    }\n}\n</code></pre>\n"},{"tags":["java","spring-mvc","model-view-controller","mvvm","architecture"],"comments":[{"owner":{"account_id":378415,"reputation":1746,"user_id":731115,"accept_rate":75,"display_name":"mikalai"},"score":1,"creation_date":1350310187,"post_id":12883759,"comment_id":17468131,"body_markdown":"Adam is right - good architecture is being built for years, not from scratch. So your data-driven application is actually 2(!)-layer system. You can easily start with 1) UI layer to be any suitable MVC framework (as it handles complexity while UI is growing), and 2) simple data access layer via some generic interface (Repository&lt;T&gt;). Then, after adding mode and more functions you should refactor. You should add abstractions which solve your exact problems instead of planning them initially.","body":"Adam is right - good architecture is being built for years, not from scratch. So your data-driven application is actually 2(!)-layer system. You can easily start with 1) UI layer to be any suitable MVC framework (as it handles complexity while UI is growing), and 2) simple data access layer via some generic interface (Repository&lt;T&gt;). Then, after adding mode and more functions you should refactor. You should add abstractions which solve your exact problems instead of planning them initially."}],"answers":[{"tags":[],"owner":{"account_id":123612,"reputation":48061,"user_id":318174,"accept_rate":71,"display_name":"Adam Gent"},"down_vote_count":1,"up_vote_count":15,"is_accepted":false,"score":14,"last_activity_date":1350275218,"creation_date":1350274642,"answer_id":12889227,"question_id":12883759,"body_markdown":"Whoa that was a lot. And I think you have mostly translated Uncle Bob&#39;s jargon over to your Spring Java app.\r\n\r\nSince architecture is mostly opinion and since your question is sort of asking for one...\r\n\r\nThere are many different styles of architecture and ... most are overrated. Because most are the same thing: **higher cohesion** and **looser coupling** through indirection and abstraction.\r\n\r\nWhat matters MOST (IMHO) are the **dependencies**. Making lots of small projects as opposed to one giant monolithic project is the best way to get &quot;clean&quot; architecture.\r\n\r\nYour most important technology for clean architecture will not be &quot;Spring MVC&quot; technology or &quot;Freemarker&quot; templating language, or another Dr. Dobb&#39;s article with diagrams of boxes, hexagons and various other abstract polygons. \r\n\r\n**Focus on your build and dependency management technology. It is because this technology will enforce your architecture rules.** \r\n\r\nAlso if your code is hard to test.. you probably have bad architecture.\r\n\r\n**Focus on making your code easy to test and write lots of tests.**\r\n\r\nIf you do that it will be easy to change your code with out worry ... so much you could even change your architecture :)\r\n\r\nBeware of focusing too much an bull#%$@# architecture rules. **Seriously**: if your code is easy to test, easy to change, easy to understand and performs wells then you have a good architecture. There is no 6 weeks to 6 pack abs article to do this (sorry Uncle Bob). It takes experience and time... there is no magic bullet plan.\r\n\r\nSo here my own &quot;clean&quot; architecture... I mean guidelines:\r\n\r\n * Make many small projects\r\n * Use dependency management (ie Maven, Gradle)\r\n * Refactor constantly\r\n * Understand and use some sort of dependency injection (Spring)\r\n * Write unit tests\r\n * Understand cross cutting concerns (ie when you need AspectJ, metaprogramming, etc..)","title":"Maintaining Clean Architecture in Spring MVC with a data-centric approach","body":"<p>Whoa that was a lot. And I think you have mostly translated Uncle Bob's jargon over to your Spring Java app.</p>\n\n<p>Since architecture is mostly opinion and since your question is sort of asking for one...</p>\n\n<p>There are many different styles of architecture and ... most are overrated. Because most are the same thing: <strong>higher cohesion</strong> and <strong>looser coupling</strong> through indirection and abstraction.</p>\n\n<p>What matters MOST (IMHO) are the <strong>dependencies</strong>. Making lots of small projects as opposed to one giant monolithic project is the best way to get \"clean\" architecture.</p>\n\n<p>Your most important technology for clean architecture will not be \"Spring MVC\" technology or \"Freemarker\" templating language, or another Dr. Dobb's article with diagrams of boxes, hexagons and various other abstract polygons. </p>\n\n<p><strong>Focus on your build and dependency management technology. It is because this technology will enforce your architecture rules.</strong> </p>\n\n<p>Also if your code is hard to test.. you probably have bad architecture.</p>\n\n<p><strong>Focus on making your code easy to test and write lots of tests.</strong></p>\n\n<p>If you do that it will be easy to change your code with out worry ... so much you could even change your architecture :)</p>\n\n<p>Beware of focusing too much an bull#%$@# architecture rules. <strong>Seriously</strong>: if your code is easy to test, easy to change, easy to understand and performs wells then you have a good architecture. There is no 6 weeks to 6 pack abs article to do this (sorry Uncle Bob). It takes experience and time... there is no magic bullet plan.</p>\n\n<p>So here my own \"clean\" architecture... I mean guidelines:</p>\n\n<ul>\n<li>Make many small projects</li>\n<li>Use dependency management (ie Maven, Gradle)</li>\n<li>Refactor constantly</li>\n<li>Understand and use some sort of dependency injection (Spring)</li>\n<li>Write unit tests</li>\n<li>Understand cross cutting concerns (ie when you need AspectJ, metaprogramming, etc..)</li>\n</ul>\n"},{"tags":[],"owner":{"account_id":130411,"reputation":13858,"user_id":329660,"accept_rate":45,"display_name":"guillaume31"},"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1350317102,"creation_date":1350317102,"answer_id":12899549,"question_id":12883759,"body_markdown":"&gt; Because of this, we do not have &quot;entities&quot; in the traditional sense\r\n&gt; (with Ids), but a data-centric approach making this layer a data\r\n&gt; access layer, presented to the rest of the application by the\r\n&gt; Consumer-module.\r\n\r\nSomething seems odd to me in that part. Why couldn&#39;t your entities have ID&#39;s even if you get them from web services ?\r\n\r\nIn the Clean Architecture approach, the Entities layer is precisely not a data access layer. Data access should be a **detail** in your architecture, not a central concern. As you said yourself, Entities contain domain-specific *business rules*. Business rules, or behavior, is very different from the way you fetch your data. \r\n\r\n*Entities is where all the domain logic happens, not where you get your data from*. According to Clean Architecture, you get your persisted or external data from Gateways.\r\n\r\n&gt; One solution I&#39;ve found to this problem is the use a variant of the\r\n&gt; &quot;MVVM-pattern&quot; that I choose to call MVC-VM. See below for an\r\n&gt; explanation. The &quot;VM&quot;-part of this lives in this Use Case-layer,\r\n&gt; represented by *ViewModel-classes that encapsulate this Use\r\n&gt; Case-specific logic.\r\n\r\n`ViewModel` clearly refers to a View, which is a presentation artifact -another detail. Use cases/Interactors should be devoid of such details. Instead, Interactors should send and receive delivery mechanism-agnostic data structures (RequestModels and ResponseModels) through Boundaries. \r\n\r\nI understand that this is a custom pattern of yours and doesn&#39;t involve a reference to a presentation framework, but the word &quot;View&quot; is just misleading.\r\n\r\n","title":"Maintaining Clean Architecture in Spring MVC with a data-centric approach","body":"<blockquote>\n  <p>Because of this, we do not have \"entities\" in the traditional sense\n  (with Ids), but a data-centric approach making this layer a data\n  access layer, presented to the rest of the application by the\n  Consumer-module.</p>\n</blockquote>\n\n<p>Something seems odd to me in that part. Why couldn't your entities have ID's even if you get them from web services ?</p>\n\n<p>In the Clean Architecture approach, the Entities layer is precisely not a data access layer. Data access should be a <strong>detail</strong> in your architecture, not a central concern. As you said yourself, Entities contain domain-specific <em>business rules</em>. Business rules, or behavior, is very different from the way you fetch your data. </p>\n\n<p><em>Entities is where all the domain logic happens, not where you get your data from</em>. According to Clean Architecture, you get your persisted or external data from Gateways.</p>\n\n<blockquote>\n  <p>One solution I've found to this problem is the use a variant of the\n  \"MVVM-pattern\" that I choose to call MVC-VM. See below for an\n  explanation. The \"VM\"-part of this lives in this Use Case-layer,\n  represented by *ViewModel-classes that encapsulate this Use\n  Case-specific logic.</p>\n</blockquote>\n\n<p><code>ViewModel</code> clearly refers to a View, which is a presentation artifact -another detail. Use cases/Interactors should be devoid of such details. Instead, Interactors should send and receive delivery mechanism-agnostic data structures (RequestModels and ResponseModels) through Boundaries. </p>\n\n<p>I understand that this is a custom pattern of yours and doesn't involve a reference to a presentation framework, but the word \"View\" is just misleading.</p>\n"},{"tags":[],"owner":{"account_id":1809067,"reputation":715,"user_id":1645498,"accept_rate":62,"display_name":"Aksel Gresvig"},"down_vote_count":0,"up_vote_count":10,"is_accepted":true,"score":10,"last_activity_date":1350499870,"creation_date":1350499870,"answer_id":12941244,"question_id":12883759,"body_markdown":"## My solution\r\nSo it turns out that implementing Bob&#39;s &quot;Clean Architecture&quot; in Java/Spring MVC is borderline non-trivial and requires more architectural facets than I originally had included.  \r\nAnd I could actually not find any example of implementations online.\r\n\r\nEvidently my architecture was missing a separate module for the &quot;Use Case&quot;-layer as this logic should not live in the Spring MVC Web module (and not be called &quot;`*ViewModel`&quot;). The Web/MVC module is simply a detail of the application, and the application logic should be completely separated from it, and separately testable.\r\n\r\nThis new &quot;Use Case&quot;-module now contains `*Interactor`-classes which get data from the domain module (entities). Moreover, &quot;*Request/Response Objects*&quot; are needed to facilitate the communication between the MVC/Web-module and the Use Case module.\r\n\r\nMy dependency chain now looks like this:\r\n\r\nSpring MVC module -&gt; Use Case module -&gt; Domain module\r\n\r\nwhere every arrow (dependency) takes form as a *Boundary*, meaning an interface is defined in the module to the right of the arrow that is implemented where required and injected where needed (Inversion of Control).\r\n\r\nHere are the interfaces I ended up with (per Use Case):\r\n\r\n`I&lt;UseCase&gt;Request` - implemented in the MVC module, instantiated in the Controller\r\n`I&lt;UseCase&gt;Response` - implemented in the Use Case module, instantiated in the Interactor\r\n`I&lt;UseCase&gt;Interactor` - implemented in the UseCase module, injected in the Controller\r\n`I&lt;UseCase&gt;Consumer` - implemented in the Domain module, injected in the Interactor\r\n\r\n**How it works?**  \r\nThe `Controller` takes parameters from the HTTP request and packs it in a `RequestModel` which it passes down to the `Interactor`. The `Interactor` fetches the data it needs from the domain module `*Consumer` and imposes it&#39;s application specific logic on it, then puts it in a `ResponseModel` and sends it back up to the `Controller`. The `Controller` then finally simply puts this (now GUI-friendly) simple data in a `Map` object and forwards it to the FreeMarker template which then uses this data directly and renders the HTML.\r\n\r\nA `Presenter` could get involved in that last part there, making this an implementation of the Model-View-Presenter pattern, but I&#39;m leaving that for now.\r\n\r\n## My conclusion\r\nI ended up with more files than what is necessary this early in development, strictly speaking. However as the complexity and size of the application grows, I am confident that this structure keeps it easy for us to maintain low coupling and high cohesion. Also, the Web-module is now easily replaceable - it just delivers requests to the use-case module and receives response-objects. Moreover, each layer of the application (domain logic, application logic, and GUI logic) is separately testable, with only the View-part requiring a webserver in order to be tested.\r\n\r\nThanks for all advice and pointers I received here. And please comment on my solution - I don&#39;t claim that it is perfect. ","title":"Maintaining Clean Architecture in Spring MVC with a data-centric approach","body":"<h2>My solution</h2>\n\n<p>So it turns out that implementing Bob's \"Clean Architecture\" in Java/Spring MVC is borderline non-trivial and requires more architectural facets than I originally had included.<br>\nAnd I could actually not find any example of implementations online.</p>\n\n<p>Evidently my architecture was missing a separate module for the \"Use Case\"-layer as this logic should not live in the Spring MVC Web module (and not be called \"<code>*ViewModel</code>\"). The Web/MVC module is simply a detail of the application, and the application logic should be completely separated from it, and separately testable.</p>\n\n<p>This new \"Use Case\"-module now contains <code>*Interactor</code>-classes which get data from the domain module (entities). Moreover, \"<em>Request/Response Objects</em>\" are needed to facilitate the communication between the MVC/Web-module and the Use Case module.</p>\n\n<p>My dependency chain now looks like this:</p>\n\n<p>Spring MVC module -> Use Case module -> Domain module</p>\n\n<p>where every arrow (dependency) takes form as a <em>Boundary</em>, meaning an interface is defined in the module to the right of the arrow that is implemented where required and injected where needed (Inversion of Control).</p>\n\n<p>Here are the interfaces I ended up with (per Use Case):</p>\n\n<p><code>I&lt;UseCase&gt;Request</code> - implemented in the MVC module, instantiated in the Controller\n<code>I&lt;UseCase&gt;Response</code> - implemented in the Use Case module, instantiated in the Interactor\n<code>I&lt;UseCase&gt;Interactor</code> - implemented in the UseCase module, injected in the Controller\n<code>I&lt;UseCase&gt;Consumer</code> - implemented in the Domain module, injected in the Interactor</p>\n\n<p><strong>How it works?</strong><br>\nThe <code>Controller</code> takes parameters from the HTTP request and packs it in a <code>RequestModel</code> which it passes down to the <code>Interactor</code>. The <code>Interactor</code> fetches the data it needs from the domain module <code>*Consumer</code> and imposes it's application specific logic on it, then puts it in a <code>ResponseModel</code> and sends it back up to the <code>Controller</code>. The <code>Controller</code> then finally simply puts this (now GUI-friendly) simple data in a <code>Map</code> object and forwards it to the FreeMarker template which then uses this data directly and renders the HTML.</p>\n\n<p>A <code>Presenter</code> could get involved in that last part there, making this an implementation of the Model-View-Presenter pattern, but I'm leaving that for now.</p>\n\n<h2>My conclusion</h2>\n\n<p>I ended up with more files than what is necessary this early in development, strictly speaking. However as the complexity and size of the application grows, I am confident that this structure keeps it easy for us to maintain low coupling and high cohesion. Also, the Web-module is now easily replaceable - it just delivers requests to the use-case module and receives response-objects. Moreover, each layer of the application (domain logic, application logic, and GUI logic) is separately testable, with only the View-part requiring a webserver in order to be tested.</p>\n\n<p>Thanks for all advice and pointers I received here. And please comment on my solution - I don't claim that it is perfect. </p>\n"}],"owner":{"account_id":1809067,"reputation":715,"user_id":1645498,"accept_rate":62,"display_name":"Aksel Gresvig"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":9720,"favorite_count":0,"down_vote_count":0,"up_vote_count":16,"accepted_answer_id":12941244,"answer_count":3,"score":16,"last_activity_date":1682850842,"creation_date":1350229254,"question_id":12883759,"body_markdown":"# Maintaining Clean Architecture in Spring MVC with a data-centric approach\r\n\r\nI&#39;m trying to map out the architecture for the front-end of a new Java-based web app (portal type application) we are making at work. I want to get this right from day one, and I would like to kick off a discussion here to help me implement Uncle Bob&#39;s [Clean Architecture] in my architectural design.\r\n\r\nHere&#39;s a quick run-down of our tech stack, top to bottom (the technology isn&#39;t importance, the structure is):\r\n\r\n- Oracle Database\r\n- Oracle Service Bus exposing services using WSDLs\r\n- JAX-WS generated Java-classes from the WSDLs (let&#39;s call this the &quot;generated service layer&quot;)\r\n- A Domain module consisting of POJOs mapped to the generated data objects\r\n- A Consumer-module exposing the &quot;generated service layer&quot; to the front-end application\r\n- A Spring MVC based front-end module using FreeMarker to render the views\r\n\r\nA key point:\r\n&gt; In particular, the name of something declared in an outer circle must not be mentioned by the code in the an inner circle. That includes, functions, classes. variables, or any other named software entity.\r\n\r\nAttempting to adhere to Bob&#39;s Clean Architecture, I&#39;ve gone back and forth a bit with myself regarding where to place the *application logic*, namely the &quot;Use Case&quot;-layer in his architecture.\r\n\r\nHere is the approach I&#39;ve come up with:\r\n\r\n## Layer 1 - Entities\r\n&gt; Entities encapsulate Enterprise wide business rules. \r\n\r\nThis is where our Domain module containing the *domain-objects* lives, these are self-containing objects with minimal dependencies on each other. Only logic pertaining to the objects themselves may live on these domain objects, and no use-case specific logic.\r\n\r\nAccess to our database is exposed via WSDLs using a service bus that transforms the data, as opposed to an ORM like JPA or Hibernate. Because of this, we do not have &quot;entities&quot; in the traditional sense (with Ids), but a *data-centric approach* making this layer a data access layer, presented to the rest of the application by the Consumer-module.\r\n\r\n## Layer 2 - Use Cases\r\n&gt; The software in this layer contains application specific business rules.\r\n\r\nThis is where logic specific to our application&#39;s use cases lives. Changes to this layer should not affect the data access layer (layer 1). Changes to the GUI or framework implementation (Spring MVC) should not affect this layer.\r\n\r\n**This is where it gets a little tricky:**\r\nSince our data access layer (in layer 1) must be kept clean of application logic, we need a layer that facilitates use of that layer in a fashion that suits the use cases. One solution I&#39;ve found to this problem is the use a variant of the &quot;*MVVM-pattern*&quot; that I choose to call *MVC-VM*. See below for an explanation. The &quot;VM&quot;-part of this lives in this Use Case-layer, represented by `*ViewModel`-classes that encapsulate this Use Case-specific logic.\r\n\r\n## Layer 3 - Interface Adapters\r\n&gt; The software in this layer is a set of adapters that convert data from the format most convenient for the use cases and entities, to the format most convenient for some external agency such as the Database or the Web.\r\n\r\nThis is where the MVC-architecture of our GUI lives (the &quot;MVC&quot; in our &quot;MVC-VM&quot;). Essentially this is when the `Controller`-classes get data from the `*ViewModel`-classes and puts it in Spring MVC&#39;s `ModelMap` ojects that are used directly by the FreeMarker-templates in the View.\r\n\r\nThe way I see it, the servicebus would in our case also fall in under this layer.\r\n\r\n## Layer 4 - Frameworks and Drivers\r\n&gt; Generally you don‚Äôt write much code in this layer other than glue code that communicates to the next circle inwards.\r\n\r\nThis layer is really just a configuration-layer in our application, namely the Spring configuration. This would for example be where we specify that FreeMarker is used to render the view.\r\n\r\n********************************\r\n### Model View ViewModel Pattern\r\n&gt; MVVM facilitates a clear separation of the development of the graphical user interface (either as markup language or GUI code) from the development of the business logic or back end logic known as the model (also known as the data model to distinguish it from the view model). The view model of MVVM is a value converter meaning that the view model is responsible for exposing the data objects from the model in such a way that those objects are easily managed and consumed.\r\n\r\nMore on the MVVM-pattern at [Wikipedia](http://en.wikipedia.org/wiki/Model_View_ViewModel).\r\n\r\nThe MVC-VM roles would be fulfilled in our application like so:\r\n\r\n- **Model** - represented simply by the `ModelMap` datastructure in Spring MVC that is used by the view templates.\r\n- **View**  - FreeMarker templates\r\n- **Controller** Spring&#39;s `Controller`-classes that directs *HTTP URL requests* to specific *handlers* (and as such functions as a FrontController). The handlers in these classes are responsible for fetching data from the use case-layer and pushing it out to the view templates when showing data(HTTP `GET`), as well as sending data down for storing (HTTP `POST`). This way it essentially functions as a *binder* between the ViewModel and View, using the Model.\r\n\r\n- **ViewModel** - These classes are responsible for 1) structuring data from the data access layer in a fashion that is usable by the View and 2) treat data-input from the View. &quot;Treat&quot; means to validate and to break down the data so that it can be sent down the stack for storing. This layer would take form as `&lt;UseCase&gt;VM`-classes in a `viewmodel` package in our Spring MVC front-end module.\r\n\r\nA key component here is the implicit binding that happens in Spring MVC between `ModelMap` and the FreeMarker-templates. The templates only use the model (`ModelMap`s), where the controller has put the data in a format it can use. That way we can make templates like so:\r\n\r\n\t&lt;body&gt;\r\n\t  &lt;h1&gt;Welcome ${user}!&lt;/h1&gt;\r\n\t  &lt;p&gt;Our latest product:\r\n\t  &lt;a href=&quot;${latestProduct.url}&quot;&gt;${latestProduct.name}&lt;/a&gt;!\r\n\t&lt;/body&gt;\r\n\t\r\n***************************************\r\n\r\nI apologize for the verbose explanation, but I could not explain this (relatively simple) architecture in fewer words. \r\n\r\nI would greatly appreciate some input on my approach here - am I on the right track? Does the MVC-VM thing make sense? Am I violating any Clean Architecture Principles?\r\n\r\nThere are of course many solutions to this, but I am trying to find a solution that is 1) not over-engineered and 2) adheres to the principles of Bob&#39;s Clean Architecture.\r\n\r\n******************\r\n## Update:\r\nI think the key issue that puts me off here is what form the &quot;Use case&quot; layer takes in this application. Remember we have an MVC front-end that gets data from a data access layer. If the MVC part fits in Bob&#39;s &quot;Interfaces adapters&quot;, and the domain models of the data layer fit in Bob&#39;s &quot;Entities&quot; layer, then what do I call the use case classes that implement application logic? I am tempted to just call them `&lt;UseCase&gt;Model`s and put them in the MVC project, but according to Bob\r\n\r\n&gt; The models are likely just data structures that are passed from the controllers to the use cases, and then back from the use cases to the presenters and views.\r\n\r\nso that means my model objects should be &quot;dumb&quot; (like a simple `Map`. `ModelMap` in Spring) and it is then the responsibility of the controller to put data from the Use Case class into this Map-structure. \r\n\r\nSo again, what form does my Use Case-classes take? How about `&lt;UseCase&gt;Interactor`?\r\n\r\n**But in conclusion** I realize that the MVC-MV-thing is over-engineering (or simply incorrect) - as &quot;mikalai&quot; indicates below this essentially just a two-layer applcation in its current form; a data access layer and a front-end MVC layer. Simple as that.\r\n\r\n[Clean Architecture]: https://blog.cleancoder.com/uncle-bob/2012/08/13/the-clean-architecture.html","title":"Maintaining Clean Architecture in Spring MVC with a data-centric approach","body":"<h1>Maintaining Clean Architecture in Spring MVC with a data-centric approach</h1>\n<p>I'm trying to map out the architecture for the front-end of a new Java-based web app (portal type application) we are making at work. I want to get this right from day one, and I would like to kick off a discussion here to help me implement Uncle Bob's <a href=\"https://blog.cleancoder.com/uncle-bob/2012/08/13/the-clean-architecture.html\" rel=\"nofollow noreferrer\">Clean Architecture</a> in my architectural design.</p>\n<p>Here's a quick run-down of our tech stack, top to bottom (the technology isn't importance, the structure is):</p>\n<ul>\n<li>Oracle Database</li>\n<li>Oracle Service Bus exposing services using WSDLs</li>\n<li>JAX-WS generated Java-classes from the WSDLs (let's call this the &quot;generated service layer&quot;)</li>\n<li>A Domain module consisting of POJOs mapped to the generated data objects</li>\n<li>A Consumer-module exposing the &quot;generated service layer&quot; to the front-end application</li>\n<li>A Spring MVC based front-end module using FreeMarker to render the views</li>\n</ul>\n<p>A key point:</p>\n<blockquote>\n<p>In particular, the name of something declared in an outer circle must not be mentioned by the code in the an inner circle. That includes, functions, classes. variables, or any other named software entity.</p>\n</blockquote>\n<p>Attempting to adhere to Bob's Clean Architecture, I've gone back and forth a bit with myself regarding where to place the <em>application logic</em>, namely the &quot;Use Case&quot;-layer in his architecture.</p>\n<p>Here is the approach I've come up with:</p>\n<h2>Layer 1 - Entities</h2>\n<blockquote>\n<p>Entities encapsulate Enterprise wide business rules.</p>\n</blockquote>\n<p>This is where our Domain module containing the <em>domain-objects</em> lives, these are self-containing objects with minimal dependencies on each other. Only logic pertaining to the objects themselves may live on these domain objects, and no use-case specific logic.</p>\n<p>Access to our database is exposed via WSDLs using a service bus that transforms the data, as opposed to an ORM like JPA or Hibernate. Because of this, we do not have &quot;entities&quot; in the traditional sense (with Ids), but a <em>data-centric approach</em> making this layer a data access layer, presented to the rest of the application by the Consumer-module.</p>\n<h2>Layer 2 - Use Cases</h2>\n<blockquote>\n<p>The software in this layer contains application specific business rules.</p>\n</blockquote>\n<p>This is where logic specific to our application's use cases lives. Changes to this layer should not affect the data access layer (layer 1). Changes to the GUI or framework implementation (Spring MVC) should not affect this layer.</p>\n<p><strong>This is where it gets a little tricky:</strong>\nSince our data access layer (in layer 1) must be kept clean of application logic, we need a layer that facilitates use of that layer in a fashion that suits the use cases. One solution I've found to this problem is the use a variant of the &quot;<em>MVVM-pattern</em>&quot; that I choose to call <em>MVC-VM</em>. See below for an explanation. The &quot;VM&quot;-part of this lives in this Use Case-layer, represented by <code>*ViewModel</code>-classes that encapsulate this Use Case-specific logic.</p>\n<h2>Layer 3 - Interface Adapters</h2>\n<blockquote>\n<p>The software in this layer is a set of adapters that convert data from the format most convenient for the use cases and entities, to the format most convenient for some external agency such as the Database or the Web.</p>\n</blockquote>\n<p>This is where the MVC-architecture of our GUI lives (the &quot;MVC&quot; in our &quot;MVC-VM&quot;). Essentially this is when the <code>Controller</code>-classes get data from the <code>*ViewModel</code>-classes and puts it in Spring MVC's <code>ModelMap</code> ojects that are used directly by the FreeMarker-templates in the View.</p>\n<p>The way I see it, the servicebus would in our case also fall in under this layer.</p>\n<h2>Layer 4 - Frameworks and Drivers</h2>\n<blockquote>\n<p>Generally you don‚Äôt write much code in this layer other than glue code that communicates to the next circle inwards.</p>\n</blockquote>\n<p>This layer is really just a configuration-layer in our application, namely the Spring configuration. This would for example be where we specify that FreeMarker is used to render the view.</p>\n<hr />\n<h3>Model View ViewModel Pattern</h3>\n<blockquote>\n<p>MVVM facilitates a clear separation of the development of the graphical user interface (either as markup language or GUI code) from the development of the business logic or back end logic known as the model (also known as the data model to distinguish it from the view model). The view model of MVVM is a value converter meaning that the view model is responsible for exposing the data objects from the model in such a way that those objects are easily managed and consumed.</p>\n</blockquote>\n<p>More on the MVVM-pattern at <a href=\"http://en.wikipedia.org/wiki/Model_View_ViewModel\" rel=\"nofollow noreferrer\">Wikipedia</a>.</p>\n<p>The MVC-VM roles would be fulfilled in our application like so:</p>\n<ul>\n<li><p><strong>Model</strong> - represented simply by the <code>ModelMap</code> datastructure in Spring MVC that is used by the view templates.</p>\n</li>\n<li><p><strong>View</strong>  - FreeMarker templates</p>\n</li>\n<li><p><strong>Controller</strong> Spring's <code>Controller</code>-classes that directs <em>HTTP URL requests</em> to specific <em>handlers</em> (and as such functions as a FrontController). The handlers in these classes are responsible for fetching data from the use case-layer and pushing it out to the view templates when showing data(HTTP <code>GET</code>), as well as sending data down for storing (HTTP <code>POST</code>). This way it essentially functions as a <em>binder</em> between the ViewModel and View, using the Model.</p>\n</li>\n<li><p><strong>ViewModel</strong> - These classes are responsible for 1) structuring data from the data access layer in a fashion that is usable by the View and 2) treat data-input from the View. &quot;Treat&quot; means to validate and to break down the data so that it can be sent down the stack for storing. This layer would take form as <code>&lt;UseCase&gt;VM</code>-classes in a <code>viewmodel</code> package in our Spring MVC front-end module.</p>\n</li>\n</ul>\n<p>A key component here is the implicit binding that happens in Spring MVC between <code>ModelMap</code> and the FreeMarker-templates. The templates only use the model (<code>ModelMap</code>s), where the controller has put the data in a format it can use. That way we can make templates like so:</p>\n<pre><code>&lt;body&gt;\n  &lt;h1&gt;Welcome ${user}!&lt;/h1&gt;\n  &lt;p&gt;Our latest product:\n  &lt;a href=&quot;${latestProduct.url}&quot;&gt;${latestProduct.name}&lt;/a&gt;!\n&lt;/body&gt;\n</code></pre>\n<hr />\n<p>I apologize for the verbose explanation, but I could not explain this (relatively simple) architecture in fewer words.</p>\n<p>I would greatly appreciate some input on my approach here - am I on the right track? Does the MVC-VM thing make sense? Am I violating any Clean Architecture Principles?</p>\n<p>There are of course many solutions to this, but I am trying to find a solution that is 1) not over-engineered and 2) adheres to the principles of Bob's Clean Architecture.</p>\n<hr />\n<h2>Update:</h2>\n<p>I think the key issue that puts me off here is what form the &quot;Use case&quot; layer takes in this application. Remember we have an MVC front-end that gets data from a data access layer. If the MVC part fits in Bob's &quot;Interfaces adapters&quot;, and the domain models of the data layer fit in Bob's &quot;Entities&quot; layer, then what do I call the use case classes that implement application logic? I am tempted to just call them <code>&lt;UseCase&gt;Model</code>s and put them in the MVC project, but according to Bob</p>\n<blockquote>\n<p>The models are likely just data structures that are passed from the controllers to the use cases, and then back from the use cases to the presenters and views.</p>\n</blockquote>\n<p>so that means my model objects should be &quot;dumb&quot; (like a simple <code>Map</code>. <code>ModelMap</code> in Spring) and it is then the responsibility of the controller to put data from the Use Case class into this Map-structure.</p>\n<p>So again, what form does my Use Case-classes take? How about <code>&lt;UseCase&gt;Interactor</code>?</p>\n<p><strong>But in conclusion</strong> I realize that the MVC-MV-thing is over-engineering (or simply incorrect) - as &quot;mikalai&quot; indicates below this essentially just a two-layer applcation in its current form; a data access layer and a front-end MVC layer. Simple as that.</p>\n"},{"tags":["java","kotlin"],"comments":[{"owner":{"account_id":8532578,"reputation":39898,"user_id":6395627,"display_name":"Slaw"},"score":0,"creation_date":1682805247,"post_id":76138591,"comment_id":134273754,"body_markdown":"Note part of the problem is you didn&#39;t create a 3x3x3 three-dimensional list. You have a 9x3 two-dimensional list.","body":"Note part of the problem is you didn&#39;t create a 3x3x3 three-dimensional list. You have a 9x3 two-dimensional list."}],"answers":[{"tags":[],"owner":{"account_id":22577442,"reputation":758,"user_id":16775102,"display_name":"Feel free"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1682849924,"creation_date":1682805921,"answer_id":76138659,"question_id":76138591,"body_markdown":"You created 9x3 two dimensional list. Use List function instead:\r\n\r\n    fun main() {\r\n        val ans = List(3) { List(3) { MutableList(3) { 0 } } }\r\n        println(ans)\r\n    }\r\n\r\nor Array:\r\n\r\n    fun main() {\r\n        val ans = Array(3) { Array(3) { IntArray(3) { 0 } } }\r\n        println(ans.contentDeepToString())\r\n    }","title":"What can I use instead of joinToString to solve my problem","body":"<p>You created 9x3 two dimensional list. Use List function instead:</p>\n<pre><code>fun main() {\n    val ans = List(3) { List(3) { MutableList(3) { 0 } } }\n    println(ans)\n}\n</code></pre>\n<p>or Array:</p>\n<pre><code>fun main() {\n    val ans = Array(3) { Array(3) { IntArray(3) { 0 } } }\n    println(ans.contentDeepToString())\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":23110408,"reputation":6937,"user_id":17218429,"display_name":"lukas.j"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1682850787,"creation_date":1682850787,"answer_id":76140771,"question_id":76138591,"body_markdown":"@Slaw gave the correct answer in a comment to @FeelFree&#39;s answer:\r\n\r\n    val ans = List(3) { List(3) { List(3) { 0 } } }\r\n\r\nThe mistake with the code in your question is that ‚Äì as @Slaw commented below your question ‚Äì you are not building a 3 x 3 x 3 list, but a 9 x 3 one.\r\n\r\nTo built a 3 x 3 x 3 list &#39;manually&#39; like in your question you would do:\r\n\r\n    val ans = listOf(\r\n      listOf(\r\n        listOf(0, 0, 0),\r\n        listOf(0, 0, 0),\r\n        listOf(0, 0, 0)\r\n      ),\r\n      listOf(\r\n        listOf(0, 0, 0),\r\n        listOf(0, 0, 0),\r\n        listOf(0, 0, 0)\r\n      ),\r\n      listOf(\r\n        listOf(0, 0, 0),\r\n        listOf(0, 0, 0),\r\n        listOf(0, 0, 0)\r\n      )\r\n    )\r\n\r\nPrintout possibilities:\r\n\r\n    // Everything on one line\r\n\r\n    println(ans)\r\n\r\n    [[[0, 0, 0], [0, 0, 0], [0, 0, 0]], [[0, 0, 0], [0, 0, 0], [0, 0, 0]], [[0, 0, 0], [0, 0, 0], [0, 0, 0]]]\r\n\r\n    // Each outer list on its own line\r\n\r\n    input.forEach(::println)  \r\n    \r\n    input.forEach { println(it) }\r\n    \r\n    for(list in input) {\r\n      println(list)\r\n    }\r\n\r\n    [[0, 0, 0], [0, 0, 0], [0, 0, 0]]\r\n    [[0, 0, 0], [0, 0, 0], [0, 0, 0]]\r\n    [[0, 0, 0], [0, 0, 0], [0, 0, 0]]\r\n\r\n    // Each inner list on its own line\r\n\r\n    input.forEachIndexed { index, outerList -&gt;\r\n      println(&quot;[&quot;)\r\n      outerList.forEach { innerList -&gt; println(&quot;  $innerList&quot;) }\r\n      print(&quot;]&quot;)\r\n      if (index == input.size - 1) println() else println(&quot;,&quot;)\r\n    }\r\n\r\n    [\r\n      [0, 0, 0]\r\n      [0, 0, 0]\r\n      [0, 0, 0]\r\n    ],\r\n    [\r\n      [0, 0, 0]\r\n      [0, 0, 0]\r\n      [0, 0, 0]\r\n    ],\r\n    [\r\n      [0, 0, 0]\r\n      [0, 0, 0]\r\n      [0, 0, 0]\r\n    ]\r\n\r\n\r\n","title":"What can I use instead of joinToString to solve my problem","body":"<p>@Slaw gave the correct answer in a comment to @FeelFree's answer:</p>\n<pre><code>val ans = List(3) { List(3) { List(3) { 0 } } }\n</code></pre>\n<p>The mistake with the code in your question is that ‚Äì as @Slaw commented below your question ‚Äì you are not building a 3 x 3 x 3 list, but a 9 x 3 one.</p>\n<p>To built a 3 x 3 x 3 list 'manually' like in your question you would do:</p>\n<pre><code>val ans = listOf(\n  listOf(\n    listOf(0, 0, 0),\n    listOf(0, 0, 0),\n    listOf(0, 0, 0)\n  ),\n  listOf(\n    listOf(0, 0, 0),\n    listOf(0, 0, 0),\n    listOf(0, 0, 0)\n  ),\n  listOf(\n    listOf(0, 0, 0),\n    listOf(0, 0, 0),\n    listOf(0, 0, 0)\n  )\n)\n</code></pre>\n<p>Printout possibilities:</p>\n<pre><code>// Everything on one line\n\nprintln(ans)\n\n[[[0, 0, 0], [0, 0, 0], [0, 0, 0]], [[0, 0, 0], [0, 0, 0], [0, 0, 0]], [[0, 0, 0], [0, 0, 0], [0, 0, 0]]]\n\n// Each outer list on its own line\n\ninput.forEach(::println)  \n\ninput.forEach { println(it) }\n\nfor(list in input) {\n  println(list)\n}\n\n[[0, 0, 0], [0, 0, 0], [0, 0, 0]]\n[[0, 0, 0], [0, 0, 0], [0, 0, 0]]\n[[0, 0, 0], [0, 0, 0], [0, 0, 0]]\n\n// Each inner list on its own line\n\ninput.forEachIndexed { index, outerList -&gt;\n  println(&quot;[&quot;)\n  outerList.forEach { innerList -&gt; println(&quot;  $innerList&quot;) }\n  print(&quot;]&quot;)\n  if (index == input.size - 1) println() else println(&quot;,&quot;)\n}\n\n[\n  [0, 0, 0]\n  [0, 0, 0]\n  [0, 0, 0]\n],\n[\n  [0, 0, 0]\n  [0, 0, 0]\n  [0, 0, 0]\n],\n[\n  [0, 0, 0]\n  [0, 0, 0]\n  [0, 0, 0]\n]\n</code></pre>\n"}],"owner":{"account_id":28327256,"reputation":5,"user_id":21662082,"display_name":"Artem Riabchikov"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":76,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1682850787,"creation_date":1682804858,"question_id":76138591,"body_markdown":"I got a task but I don&#39;t know how to solve it. \r\n\r\nCreate a 3x3x3 three-dimensional list that contains elements of type Int and is filled with zeros (0).\r\n\r\nPrint the list of lists in one string (just use `print()` or `println()` function).\r\n\r\nMy code is:\r\n\r\n```lang-kotlin\r\nfun main() {\r\n    var ans = mutableListOf(\r\n        mutableListOf(0, 0, 0), \r\n        mutableListOf(0, 0, 0), \r\n        mutableListOf(0, 0, 0), \r\n        mutableListOf(0, 0, 0), \r\n        mutableListOf(0, 0, 0), \r\n        mutableListOf(0, 0, 0), \r\n        mutableListOf(0, 0, 0), \r\n        mutableListOf(0, 0, 0), \r\n        mutableListOf(0, 0, 0)\r\n    )\r\n    println(ans.joinToString(&quot;\\n&quot;)) \r\n}\r\n```\r\n\r\nBut it doesn&#39;t work correctly.","title":"What can I use instead of joinToString to solve my problem","body":"<p>I got a task but I don't know how to solve it.</p>\n<p>Create a 3x3x3 three-dimensional list that contains elements of type Int and is filled with zeros (0).</p>\n<p>Print the list of lists in one string (just use <code>print()</code> or <code>println()</code> function).</p>\n<p>My code is:</p>\n<pre class=\"lang-kotlin prettyprint-override\"><code>fun main() {\n    var ans = mutableListOf(\n        mutableListOf(0, 0, 0), \n        mutableListOf(0, 0, 0), \n        mutableListOf(0, 0, 0), \n        mutableListOf(0, 0, 0), \n        mutableListOf(0, 0, 0), \n        mutableListOf(0, 0, 0), \n        mutableListOf(0, 0, 0), \n        mutableListOf(0, 0, 0), \n        mutableListOf(0, 0, 0)\n    )\n    println(ans.joinToString(&quot;\\n&quot;)) \n}\n</code></pre>\n<p>But it doesn't work correctly.</p>\n"},{"tags":["java","awt"],"comments":[{"owner":{"account_id":70123,"reputation":51175,"user_id":203657,"accept_rate":53,"display_name":"kleopatra"},"score":0,"creation_date":1682849527,"post_id":76140586,"comment_id":134277096,"body_markdown":"actually, I don&#39;t quite understand why you are asking: the stacktrace tells you __exactly__ what&#39;s wrong where - the solution is to fix it :)","body":"actually, I don&#39;t quite understand why you are asking: the stacktrace tells you <b>exactly</b> what&#39;s wrong where - the solution is to fix it :)"}],"answers":[{"tags":[],"owner":{"account_id":17911752,"reputation":746,"user_id":13013715,"display_name":"STh"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1682848891,"creation_date":1682848891,"answer_id":76140630,"question_id":76140586,"body_markdown":"The error message indicates that you are trying to parse an empty String (`&quot;&quot;`) as an Integer with the method `Integer.parseInt` at line 282 of your code. You should check that the `val` that you are parsing includes at least one number before parsing it. ","title":"Exception in thread &quot;AWT-EventQueue-0&quot; java.lang.NumberFormatException: For input string: &quot;&quot; while adding two numbers in calculator using awt","body":"<p>The error message indicates that you are trying to parse an empty String (<code>&quot;&quot;</code>) as an Integer with the method <code>Integer.parseInt</code> at line 282 of your code. You should check that the <code>val</code> that you are parsing includes at least one number before parsing it.</p>\n"}],"owner":{"account_id":28462270,"reputation":1,"user_id":21778829,"display_name":"Tenny Xavier"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":71,"favorite_count":0,"down_vote_count":3,"up_vote_count":0,"closed_date":1682932557,"answer_count":1,"score":-3,"last_activity_date":1682850786,"creation_date":1682848208,"question_id":76140586,"body_markdown":"I don&#39;t know why this error is caused here. I have the java code below.\r\n\r\nI was trying to make a calculator and whenever I try to add two numbers it shows this error:\r\n\r\n```none\r\nException in thread &quot;AWT-EventQueue-0&quot; java.lang.NumberFormatException: For input string: &quot;&quot;\r\n\r\n    at java.lang.NumberFormatException.forInputString(NumberFormatException.java:65)\r\n    at java.lang.Integer.parseInt(Integer.java:592)\r\n    at java.lang.Integer.parseInt(Integer.java:615)\r\n    at calculator.actionPerformed(calculator.java:282)\r\n    at java.awt.Button.processActionEvent(Button.java:409)\r\n    at java.awt.Button.processEvent(Button.java:377)\r\n    at java.awt.Component.dispatchEventImpl(Component.java:4889)\r\n    at java.awt.Component.dispatchEvent(Component.java:4711)\r\n    at java.awt.EventQueue.dispatchEventImpl(EventQueue.java:760)\r\n    at java.awt.EventQueue.access$500(EventQueue.java:97)\r\n    at java.awt.EventQueue$3.run(EventQueue.java:709)\r\n    at java.awt.EventQueue$3.run(EventQueue.java:703)\r\n    at java.security.AccessController.doPrivileged(Native Method)\r\n    at java.security.ProtectionDomain$JavaSecurityAccessImpl.doIntersectionPrivilege(ProtectionDomain.java:74)\r\n    at java.security.ProtectionDomain$JavaSecurityAccessImpl.doIntersectionPrivilege(ProtectionDomain.java:84)\r\n    at java.awt.EventQueue$4.run(EventQueue.java:733)\r\n    at java.awt.EventQueue$4.run(EventQueue.java:731)\r\n    at java.security.AccessController.doPrivileged(Native Method)\r\n    at java.security.ProtectionDomain$JavaSecurityAccessImpl.doIntersectionPrivilege(ProtectionDomain.java:74)\r\n    at java.awt.EventQueue.dispatchEvent(EventQueue.java:730)\r\n    at java.awt.EventDispatchThread.pumpOneEventForFilters(EventDispatchThread.java:205)\r\n    at java.awt.EventDispatchThread.pumpEventsForFilter(EventDispatchThread.java:116)\r\n    at java.awt.EventDispatchThread.pumpEventsForHierarchy(EventDispatchThread.java:105)\r\n    at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:101)\r\n    at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:93)\r\n    at java.awt.EventDispatchThread.run(EventDispatchThread.java:82)\r\n```\r\n\r\nThe Java code\r\n```java\r\nimport java.awt.*;\r\nimport java.awt.event.*;\r\nclass calculator extends WindowAdapter implements ActionListener\r\n{\r\n\t//Variables\r\n\tint point=0,res=0,ractive=0,n1active=0,n2active=0,opactive=0,inc=0,lng=0;\r\n\tString val=&quot;&quot;,num1=&quot;&quot;,num2=&quot;&quot;;\r\n\t\r\n\t//Frame object\r\n\tFrame f=new Frame();\r\n\t\r\n\t//Text Box objects\r\n\tTextField t1=new TextField(255);\r\n\t\r\n\t//function Buttons \r\n\tButton bce=new Button(&quot;CE&quot;);\r\n\tButton bc=new Button(&quot;C&quot;);\r\n\tButton bba=new Button(&quot;Del&quot;);\r\n\tButton b1x=new Button(&quot;1/x&quot;);\r\n\tButton bx2=new Button(&quot;x^2&quot;);\r\n\tButton b2x=new Button(&quot;sqrt x&quot;);\r\n\t\r\n\t//Number Buttons\r\n\tButton b0=new Button(&quot;0&quot;);\r\n\tButton b1=new Button(&quot;1&quot;);\r\n\tButton b2=new Button(&quot;2&quot;);\r\n\tButton b3=new Button(&quot;3&quot;);\r\n\tButton b4=new Button(&quot;4&quot;);\r\n\tButton b5=new Button(&quot;5&quot;);\r\n\tButton b6=new Button(&quot;6&quot;);\r\n\tButton b7=new Button(&quot;7&quot;);\r\n\tButton b8=new Button(&quot;8&quot;);\r\n\tButton b9=new Button(&quot;9&quot;);\r\n\tButton bp=new Button(&quot;.&quot;);\r\n\tButton bnp=new Button(&quot;+/-&quot;);\r\n\t\r\n\t//Operator Buttons\r\n\tButton badd=new Button(&quot;+&quot;);\r\n\tButton bsub=new Button(&quot;-&quot;);\r\n\tButton bmul=new Button(&quot;X&quot;);\r\n\tButton bdiv=new Button(&quot;/&quot;);\r\n\tButton bres=new Button(&quot;=&quot;);\r\n\tButton bper=new Button(&quot;%&quot;);\r\n\t\r\n\tvoid Cal_UI()\r\n\t{\r\n\t\t//Text Box edits\r\n\t\tt1.setBounds(25,45,255,44);\r\n\t\t\r\n\t\t//Button Layer 1\r\n\t\tbper.setBounds(25,110,62,40);\r\n\t\t\tbper.addActionListener(this);\r\n\t\tbce.setBounds(87,110,62,40);\r\n\t\t\tbce.addActionListener(this);\r\n\t\tbc.setBounds(149,110,62,40);\r\n\t\t\tbc.addActionListener(this);\r\n\t\tbba.setBounds(211,110,62,40);\r\n\t\t\tbba.addActionListener(this);\r\n\t\t\r\n\t\t//Button Layer 2\r\n\t\tb1x.setBounds(25,150,62,40);\r\n\t\t\tb1x.addActionListener(this);\r\n\t\tbx2.setBounds(87,150,62,40);\r\n\t\t\tbx2.addActionListener(this);\r\n\t\tb2x.setBounds(149,150,62,40);\r\n\t\t\tb2x.addActionListener(this);\r\n\t\tbdiv.setBounds(211,150,62,40);\r\n\t\t\tbdiv.addActionListener(this);\r\n\t\t\r\n\t\t//Button Layer 3\r\n\t\tb7.setBounds(25,190,62,40);\r\n\t\t\tb7.addActionListener(this);\r\n\t\tb8.setBounds(87,190,62,40);\r\n\t\t\tb8.addActionListener(this);\r\n\t\tb9.setBounds(149,190,62,40);\r\n\t\t\tb9.addActionListener(this);\r\n\t\tbmul.setBounds(211,190,62,40);\r\n\t\t\tbmul.addActionListener(this);\r\n\t\t\r\n\t\t//Button Layer 4\r\n\t\tb4.setBounds(25,230,62,40);\r\n\t\t\tb4.addActionListener(this);\r\n\t\tb5.setBounds(87,230,62,40);\r\n\t\t\tb5.addActionListener(this);\r\n\t\tb6.setBounds(149,230,62,40);\r\n\t\t\tb6.addActionListener(this);\r\n\t\tbsub.setBounds(211,230,62,40);\r\n\t\t\tbsub.addActionListener(this);\r\n\t\t\r\n\t\t//Button Layer 5\r\n\t\tb1.setBounds(25,270,62,40);\r\n\t\t\tb1.addActionListener(this);\r\n\t\tb2.setBounds(87,270,62,40);\r\n\t\t\tb2.addActionListener(this);\r\n\t\tb3.setBounds(149,270,62,40);\r\n\t\t\tb3.addActionListener(this);\r\n\t\tbadd.setBounds(211,270,62,40);\r\n\t\t\tbadd.addActionListener(this);\r\n\t\t\r\n\t\t//Button Layer 6\r\n\t\tbnp.setBounds(25,310,62,40);\r\n\t\t\tbnp.addActionListener(this);\r\n\t\tb0.setBounds(87,310,62,40);\r\n\t\t\tb0.addActionListener(this);\r\n\t\tbp.setBounds(149,310,62,40);\r\n\t\t\tbp.addActionListener(this);\r\n\t\tbres.setBounds(211,310,62,40);\r\n\t\t\tbres.addActionListener(this);\r\n\t\t\r\n\t\t//Frame addings\r\n\t\tf.add(t1);\r\n\t\tf.add(bper);\r\n\t\tf.add(bce);\r\n\t\tf.add(bc);\r\n\t\tf.add(bba);\r\n\t\tf.add(b1x);\r\n\t\tf.add(bx2);\r\n\t\tf.add(b2x);\r\n\t\tf.add(bdiv);\r\n\t\tf.add(b7);\r\n\t\tf.add(b8);\r\n\t\tf.add(b9);\r\n\t\tf.add(bmul);\r\n\t\tf.add(b4);\r\n\t\tf.add(b5);\r\n\t\tf.add(b6);\r\n\t\tf.add(bsub);\r\n\t\tf.add(b1);\r\n\t\tf.add(b2);\r\n\t\tf.add(b3);\r\n\t\tf.add(badd);\r\n\t\tf.add(bnp);\r\n\t\tf.add(b0);\r\n\t\tf.add(bp);\r\n\t\tf.add(bres);\r\n\t\t\r\n\t\t//Frame controls\r\n\t\tf.addWindowListener(this);\r\n\t\tf.setLayout(null);\r\n\t\tf.setSize(301,390);\r\n\t\tf.setTitle(&quot;Calculator&quot;);\r\n\t\tf.setVisible(true);\r\n\t}\r\n\t\r\n\tpublic void windowClosing(WindowEvent e)\r\n\t{\r\n\t\tf.dispose();\r\n\t}\r\n\t\r\n\tpublic void actionPerformed(ActionEvent ae)\r\n\t{\r\n\t\tif(ae.getSource()==b0)\r\n\t\t{\r\n\t\t\tval=val+&quot;0&quot;;\r\n\t\t\tt1.setText(val);\r\n\t\t}\r\n\t\t\r\n\t\tif(ae.getSource()==b1)\r\n\t\t{\r\n\t\t\tval=val+&quot;1&quot;;\r\n\t\t\tt1.setText(val);\r\n\t\t}\r\n\t\t\r\n\t\tif(ae.getSource()==b2)\r\n\t\t{\r\n\t\t\tval=val+&quot;2&quot;;\r\n\t\t\tt1.setText(val);\r\n\t\t}\r\n\t\t\r\n\t\tif(ae.getSource()==b3)\r\n\t\t{\r\n\t\t\tval=val+&quot;3&quot;;\r\n\t\t\tt1.setText(val);\r\n\t\t}\r\n\t\t\r\n\t\tif(ae.getSource()==b4)\r\n\t\t{\r\n\t\t\tval=val+&quot;4&quot;;\r\n\t\t\tt1.setText(val);\r\n\t\t}\r\n\t\t\r\n\t\tif(ae.getSource()==b5)\r\n\t\t{\r\n\t\t\tval=val+&quot;5&quot;;\r\n\t\t\tt1.setText(val);\r\n\t\t}\r\n\t\t\r\n\t\tif(ae.getSource()==b6)\r\n\t\t{\r\n\t\t\tval=val+&quot;6&quot;;\r\n\t\t\tt1.setText(val);\r\n\t\t}\r\n\t\t\r\n\t\tif(ae.getSource()==b7)\r\n\t\t{\r\n\t\t\tval=val+&quot;7&quot;;\r\n\t\t\tt1.setText(val);\r\n\t\t}\r\n\t\t\r\n\t\tif(ae.getSource()==b8)\r\n\t\t{\r\n\t\t\tval=val+&quot;8&quot;;\r\n\t\t\tt1.setText(val);\r\n\t\t}\r\n\t\t\r\n\t\tif(ae.getSource()==b9)\r\n\t\t{\r\n\t\t\tval=val+&quot;9&quot;;\r\n\t\t\tt1.setText(val);\r\n\t\t}\r\n\t\t\r\n\t\tif(ae.getSource()==bp)\r\n\t\t{\r\n\t\t\tif(point==0)\r\n\t\t\t{\r\n\t\t\t\tval=val+&quot;.&quot;;\r\n\t\t\t\tt1.setText(val);\r\n\t\t\t\tpoint++;\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\tif(ae.getSource()==badd)\r\n\t\t{\r\n\t\t\tval=val+&quot;+&quot;;\r\n\t\t\tt1.setText(val);\r\n\t\t}\r\n\t\t\r\n\t\tif(ae.getSource()==bsub)\r\n\t\t{\r\n\t\t\tval=val+&quot;-&quot;;\r\n\t\t\tt1.setText(val);\r\n\t\t}\r\n\t\t\r\n\t\tif(ae.getSource()==bmul)\r\n\t\t{\r\n\t\t\tval=val+&quot;*&quot;;\r\n\t\t\tt1.setText(val);\r\n\t\t}\r\n\t\t\r\n\t\tif(ae.getSource()==bdiv)\r\n\t\t{\r\n\t\t\tval=val+&quot;/&quot;;\r\n\t\t\tt1.setText(val);\r\n\t\t}\r\n\t\t\r\n\t\tif(ae.getSource()==bc)\r\n\t\t{\r\n\t\t\tpoint=0;\r\n\t\t}\r\n\t\t\r\n\t\tif(ae.getSource()==bres)\r\n\t\t{\r\n\t\t\tint len=val.length()-1;\r\n\t\t\tint i=0;\r\n\t\t\twhile(i&lt;len)\r\n\t\t\t{\r\n\t\t\t\tif(ractive==0)\r\n\t\t\t\t{\r\n\t\t\t\t\tif(Character.isDigit(val.charAt(i)) &amp;&amp; opactive==0)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tnum1=num1+val.charAt(i);\r\n\t\t\t\t\t\tn1active=1;\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t\t\tif(val.charAt(i-inc)==&#39;+&#39; &amp;&amp; n1active==1)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tif(n1active==1 &amp;&amp; n2active==0)\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tnum2=num2+val.charAt(i);\r\n\t\t\t\t\t\t\tinc++;\r\n\t\t\t\t\t\t\tif(Character.isDigit(val.charAt(i))== false)\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\tn2active=1;\r\n\t\t\t\t\t\t\t\tlng=num2.length()-1;\r\n\t\t\t\t\t\t\t\tnum2=num2.substring(0,lng);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tif(n1active==1 &amp;&amp; n2active==1)\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tres=Integer.parseInt(num1)+Integer.parseInt(num2);\r\n\t\t\t\t\t\t\tractive=1;\r\n\t\t\t\t\t\t\tnum2=&quot;&quot;;\r\n\t\t\t\t\t\t}\t\t\t\t\t\t\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t\t\tif(val.charAt(i-inc)==&#39;-&#39; &amp;&amp; n1active==1)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tif(n1active==1 &amp;&amp; n2active==0)\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tnum2=num2+val.charAt(i);\r\n\t\t\t\t\t\t\tinc++;\r\n\t\t\t\t\t\t\tif(Character.isDigit(val.charAt(i))== false)\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\tn2active=1;\r\n\t\t\t\t\t\t\t\tlng=num2.length()-1;\r\n\t\t\t\t\t\t\t\tnum2=num2.substring(0,lng);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tif(n1active==1 &amp;&amp; n2active==1)\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tres=Integer.parseInt(num1)-Integer.parseInt(num2);\r\n\t\t\t\t\t\t\tractive=1;\r\n\t\t\t\t\t\t\tnum2=&quot;&quot;;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t\t\tif(val.charAt(i-inc)==&#39;*&#39; &amp;&amp; n1active==1)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tif(n1active==1 &amp;&amp; n2active==0)\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tnum2=num2+val.charAt(i);\r\n\t\t\t\t\t\t\tinc++;\r\n\t\t\t\t\t\t\tif(Character.isDigit(val.charAt(i))== false)\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\tn2active=1;\r\n\t\t\t\t\t\t\t\tlng=num2.length()-1;\r\n\t\t\t\t\t\t\t\tnum2=num2.substring(0,lng);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tif(n1active==1 &amp;&amp; n2active==1)\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tres=Integer.parseInt(num1)*Integer.parseInt(num2);\r\n\t\t\t\t\t\t\tractive=1;\r\n\t\t\t\t\t\t\tnum2=&quot;&quot;;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t\t\tif(val.charAt(i-inc)==&#39;/&#39; &amp;&amp; n1active==1)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tif(n1active==1 &amp;&amp; n2active==0)\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tnum2=num2+val.charAt(i);\r\n\t\t\t\t\t\t\tinc++;\r\n\t\t\t\t\t\t\tif(Character.isDigit(val.charAt(i))== false)\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\tn2active=1;\r\n\t\t\t\t\t\t\t\tlng=num2.length()-1;\r\n\t\t\t\t\t\t\t\tnum2=num2.substring(0,lng);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tif(n1active==1 &amp;&amp; n2active==1)\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tres=Integer.parseInt(num1)/Integer.parseInt(num2);\r\n\t\t\t\t\t\t\tractive=1;\r\n\t\t\t\t\t\t\tnum2=&quot;&quot;;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tif(ractive==1)\r\n\t\t\t\t{\r\n\t\t\t\t\tif(Character.isDigit(val.charAt(i)))\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tnum2=num2+val.charAt(i);\r\n\t\t\t\t\t\tn2active=1;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif(val.charAt(i)==&#39;+&#39;)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tres=res+Integer.parseInt(num2);\r\n\t\t\t\t\t\tnum2=&quot;&quot;;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif(val.charAt(i)==&#39;-&#39;)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tres=res-Integer.parseInt(num2);\r\n\t\t\t\t\t\tnum2=&quot;&quot;;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif(val.charAt(i)==&#39;*&#39;)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tres=res*Integer.parseInt(num2);\r\n\t\t\t\t\t\tnum2=&quot;&quot;;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif(val.charAt(i)==&#39;/&#39;)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tres=res/Integer.parseInt(num2);\r\n\t\t\t\t\t\tnum2=&quot;&quot;;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\ti++;\r\n\t\t\t}\r\n\t\t\tt1.setText(String.valueOf(res));\r\n\t\t}\r\n\t}\r\n\t\r\n\tpublic static void main(String args[])\r\n\t{\r\n\t\tcalculator ob=new calculator();\r\n\t\tob.Cal_UI();\r\n\t}\r\n}\r\n```","title":"Exception in thread &quot;AWT-EventQueue-0&quot; java.lang.NumberFormatException: For input string: &quot;&quot; while adding two numbers in calculator using awt","body":"<p>I don't know why this error is caused here. I have the java code below.</p>\n<p>I was trying to make a calculator and whenever I try to add two numbers it shows this error:</p>\n<pre class=\"lang-none prettyprint-override\"><code>Exception in thread &quot;AWT-EventQueue-0&quot; java.lang.NumberFormatException: For input string: &quot;&quot;\n\n    at java.lang.NumberFormatException.forInputString(NumberFormatException.java:65)\n    at java.lang.Integer.parseInt(Integer.java:592)\n    at java.lang.Integer.parseInt(Integer.java:615)\n    at calculator.actionPerformed(calculator.java:282)\n    at java.awt.Button.processActionEvent(Button.java:409)\n    at java.awt.Button.processEvent(Button.java:377)\n    at java.awt.Component.dispatchEventImpl(Component.java:4889)\n    at java.awt.Component.dispatchEvent(Component.java:4711)\n    at java.awt.EventQueue.dispatchEventImpl(EventQueue.java:760)\n    at java.awt.EventQueue.access$500(EventQueue.java:97)\n    at java.awt.EventQueue$3.run(EventQueue.java:709)\n    at java.awt.EventQueue$3.run(EventQueue.java:703)\n    at java.security.AccessController.doPrivileged(Native Method)\n    at java.security.ProtectionDomain$JavaSecurityAccessImpl.doIntersectionPrivilege(ProtectionDomain.java:74)\n    at java.security.ProtectionDomain$JavaSecurityAccessImpl.doIntersectionPrivilege(ProtectionDomain.java:84)\n    at java.awt.EventQueue$4.run(EventQueue.java:733)\n    at java.awt.EventQueue$4.run(EventQueue.java:731)\n    at java.security.AccessController.doPrivileged(Native Method)\n    at java.security.ProtectionDomain$JavaSecurityAccessImpl.doIntersectionPrivilege(ProtectionDomain.java:74)\n    at java.awt.EventQueue.dispatchEvent(EventQueue.java:730)\n    at java.awt.EventDispatchThread.pumpOneEventForFilters(EventDispatchThread.java:205)\n    at java.awt.EventDispatchThread.pumpEventsForFilter(EventDispatchThread.java:116)\n    at java.awt.EventDispatchThread.pumpEventsForHierarchy(EventDispatchThread.java:105)\n    at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:101)\n    at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:93)\n    at java.awt.EventDispatchThread.run(EventDispatchThread.java:82)\n</code></pre>\n<p>The Java code</p>\n<pre class=\"lang-java prettyprint-override\"><code>import java.awt.*;\nimport java.awt.event.*;\nclass calculator extends WindowAdapter implements ActionListener\n{\n    //Variables\n    int point=0,res=0,ractive=0,n1active=0,n2active=0,opactive=0,inc=0,lng=0;\n    String val=&quot;&quot;,num1=&quot;&quot;,num2=&quot;&quot;;\n    \n    //Frame object\n    Frame f=new Frame();\n    \n    //Text Box objects\n    TextField t1=new TextField(255);\n    \n    //function Buttons \n    Button bce=new Button(&quot;CE&quot;);\n    Button bc=new Button(&quot;C&quot;);\n    Button bba=new Button(&quot;Del&quot;);\n    Button b1x=new Button(&quot;1/x&quot;);\n    Button bx2=new Button(&quot;x^2&quot;);\n    Button b2x=new Button(&quot;sqrt x&quot;);\n    \n    //Number Buttons\n    Button b0=new Button(&quot;0&quot;);\n    Button b1=new Button(&quot;1&quot;);\n    Button b2=new Button(&quot;2&quot;);\n    Button b3=new Button(&quot;3&quot;);\n    Button b4=new Button(&quot;4&quot;);\n    Button b5=new Button(&quot;5&quot;);\n    Button b6=new Button(&quot;6&quot;);\n    Button b7=new Button(&quot;7&quot;);\n    Button b8=new Button(&quot;8&quot;);\n    Button b9=new Button(&quot;9&quot;);\n    Button bp=new Button(&quot;.&quot;);\n    Button bnp=new Button(&quot;+/-&quot;);\n    \n    //Operator Buttons\n    Button badd=new Button(&quot;+&quot;);\n    Button bsub=new Button(&quot;-&quot;);\n    Button bmul=new Button(&quot;X&quot;);\n    Button bdiv=new Button(&quot;/&quot;);\n    Button bres=new Button(&quot;=&quot;);\n    Button bper=new Button(&quot;%&quot;);\n    \n    void Cal_UI()\n    {\n        //Text Box edits\n        t1.setBounds(25,45,255,44);\n        \n        //Button Layer 1\n        bper.setBounds(25,110,62,40);\n            bper.addActionListener(this);\n        bce.setBounds(87,110,62,40);\n            bce.addActionListener(this);\n        bc.setBounds(149,110,62,40);\n            bc.addActionListener(this);\n        bba.setBounds(211,110,62,40);\n            bba.addActionListener(this);\n        \n        //Button Layer 2\n        b1x.setBounds(25,150,62,40);\n            b1x.addActionListener(this);\n        bx2.setBounds(87,150,62,40);\n            bx2.addActionListener(this);\n        b2x.setBounds(149,150,62,40);\n            b2x.addActionListener(this);\n        bdiv.setBounds(211,150,62,40);\n            bdiv.addActionListener(this);\n        \n        //Button Layer 3\n        b7.setBounds(25,190,62,40);\n            b7.addActionListener(this);\n        b8.setBounds(87,190,62,40);\n            b8.addActionListener(this);\n        b9.setBounds(149,190,62,40);\n            b9.addActionListener(this);\n        bmul.setBounds(211,190,62,40);\n            bmul.addActionListener(this);\n        \n        //Button Layer 4\n        b4.setBounds(25,230,62,40);\n            b4.addActionListener(this);\n        b5.setBounds(87,230,62,40);\n            b5.addActionListener(this);\n        b6.setBounds(149,230,62,40);\n            b6.addActionListener(this);\n        bsub.setBounds(211,230,62,40);\n            bsub.addActionListener(this);\n        \n        //Button Layer 5\n        b1.setBounds(25,270,62,40);\n            b1.addActionListener(this);\n        b2.setBounds(87,270,62,40);\n            b2.addActionListener(this);\n        b3.setBounds(149,270,62,40);\n            b3.addActionListener(this);\n        badd.setBounds(211,270,62,40);\n            badd.addActionListener(this);\n        \n        //Button Layer 6\n        bnp.setBounds(25,310,62,40);\n            bnp.addActionListener(this);\n        b0.setBounds(87,310,62,40);\n            b0.addActionListener(this);\n        bp.setBounds(149,310,62,40);\n            bp.addActionListener(this);\n        bres.setBounds(211,310,62,40);\n            bres.addActionListener(this);\n        \n        //Frame addings\n        f.add(t1);\n        f.add(bper);\n        f.add(bce);\n        f.add(bc);\n        f.add(bba);\n        f.add(b1x);\n        f.add(bx2);\n        f.add(b2x);\n        f.add(bdiv);\n        f.add(b7);\n        f.add(b8);\n        f.add(b9);\n        f.add(bmul);\n        f.add(b4);\n        f.add(b5);\n        f.add(b6);\n        f.add(bsub);\n        f.add(b1);\n        f.add(b2);\n        f.add(b3);\n        f.add(badd);\n        f.add(bnp);\n        f.add(b0);\n        f.add(bp);\n        f.add(bres);\n        \n        //Frame controls\n        f.addWindowListener(this);\n        f.setLayout(null);\n        f.setSize(301,390);\n        f.setTitle(&quot;Calculator&quot;);\n        f.setVisible(true);\n    }\n    \n    public void windowClosing(WindowEvent e)\n    {\n        f.dispose();\n    }\n    \n    public void actionPerformed(ActionEvent ae)\n    {\n        if(ae.getSource()==b0)\n        {\n            val=val+&quot;0&quot;;\n            t1.setText(val);\n        }\n        \n        if(ae.getSource()==b1)\n        {\n            val=val+&quot;1&quot;;\n            t1.setText(val);\n        }\n        \n        if(ae.getSource()==b2)\n        {\n            val=val+&quot;2&quot;;\n            t1.setText(val);\n        }\n        \n        if(ae.getSource()==b3)\n        {\n            val=val+&quot;3&quot;;\n            t1.setText(val);\n        }\n        \n        if(ae.getSource()==b4)\n        {\n            val=val+&quot;4&quot;;\n            t1.setText(val);\n        }\n        \n        if(ae.getSource()==b5)\n        {\n            val=val+&quot;5&quot;;\n            t1.setText(val);\n        }\n        \n        if(ae.getSource()==b6)\n        {\n            val=val+&quot;6&quot;;\n            t1.setText(val);\n        }\n        \n        if(ae.getSource()==b7)\n        {\n            val=val+&quot;7&quot;;\n            t1.setText(val);\n        }\n        \n        if(ae.getSource()==b8)\n        {\n            val=val+&quot;8&quot;;\n            t1.setText(val);\n        }\n        \n        if(ae.getSource()==b9)\n        {\n            val=val+&quot;9&quot;;\n            t1.setText(val);\n        }\n        \n        if(ae.getSource()==bp)\n        {\n            if(point==0)\n            {\n                val=val+&quot;.&quot;;\n                t1.setText(val);\n                point++;\n            }\n        }\n        \n        if(ae.getSource()==badd)\n        {\n            val=val+&quot;+&quot;;\n            t1.setText(val);\n        }\n        \n        if(ae.getSource()==bsub)\n        {\n            val=val+&quot;-&quot;;\n            t1.setText(val);\n        }\n        \n        if(ae.getSource()==bmul)\n        {\n            val=val+&quot;*&quot;;\n            t1.setText(val);\n        }\n        \n        if(ae.getSource()==bdiv)\n        {\n            val=val+&quot;/&quot;;\n            t1.setText(val);\n        }\n        \n        if(ae.getSource()==bc)\n        {\n            point=0;\n        }\n        \n        if(ae.getSource()==bres)\n        {\n            int len=val.length()-1;\n            int i=0;\n            while(i&lt;len)\n            {\n                if(ractive==0)\n                {\n                    if(Character.isDigit(val.charAt(i)) &amp;&amp; opactive==0)\n                    {\n                        num1=num1+val.charAt(i);\n                        n1active=1;\n                    }\n                    \n                    if(val.charAt(i-inc)=='+' &amp;&amp; n1active==1)\n                    {\n                        if(n1active==1 &amp;&amp; n2active==0)\n                        {\n                            num2=num2+val.charAt(i);\n                            inc++;\n                            if(Character.isDigit(val.charAt(i))== false)\n                            {\n                                n2active=1;\n                                lng=num2.length()-1;\n                                num2=num2.substring(0,lng);\n                            }\n                        }\n                        \n                        if(n1active==1 &amp;&amp; n2active==1)\n                        {\n                            res=Integer.parseInt(num1)+Integer.parseInt(num2);\n                            ractive=1;\n                            num2=&quot;&quot;;\n                        }                       \n                    }\n                    \n                    if(val.charAt(i-inc)=='-' &amp;&amp; n1active==1)\n                    {\n                        if(n1active==1 &amp;&amp; n2active==0)\n                        {\n                            num2=num2+val.charAt(i);\n                            inc++;\n                            if(Character.isDigit(val.charAt(i))== false)\n                            {\n                                n2active=1;\n                                lng=num2.length()-1;\n                                num2=num2.substring(0,lng);\n                            }\n                        }\n                        \n                        if(n1active==1 &amp;&amp; n2active==1)\n                        {\n                            res=Integer.parseInt(num1)-Integer.parseInt(num2);\n                            ractive=1;\n                            num2=&quot;&quot;;\n                        }\n                    }\n                    \n                    if(val.charAt(i-inc)=='*' &amp;&amp; n1active==1)\n                    {\n                        if(n1active==1 &amp;&amp; n2active==0)\n                        {\n                            num2=num2+val.charAt(i);\n                            inc++;\n                            if(Character.isDigit(val.charAt(i))== false)\n                            {\n                                n2active=1;\n                                lng=num2.length()-1;\n                                num2=num2.substring(0,lng);\n                            }\n                        }\n                        \n                        if(n1active==1 &amp;&amp; n2active==1)\n                        {\n                            res=Integer.parseInt(num1)*Integer.parseInt(num2);\n                            ractive=1;\n                            num2=&quot;&quot;;\n                        }\n                    }\n                    \n                    if(val.charAt(i-inc)=='/' &amp;&amp; n1active==1)\n                    {\n                        if(n1active==1 &amp;&amp; n2active==0)\n                        {\n                            num2=num2+val.charAt(i);\n                            inc++;\n                            if(Character.isDigit(val.charAt(i))== false)\n                            {\n                                n2active=1;\n                                lng=num2.length()-1;\n                                num2=num2.substring(0,lng);\n                            }\n                        }\n                        \n                        if(n1active==1 &amp;&amp; n2active==1)\n                        {\n                            res=Integer.parseInt(num1)/Integer.parseInt(num2);\n                            ractive=1;\n                            num2=&quot;&quot;;\n                        }\n                    }\n                }\n                \n                if(ractive==1)\n                {\n                    if(Character.isDigit(val.charAt(i)))\n                    {\n                        num2=num2+val.charAt(i);\n                        n2active=1;\n                    }\n                    if(val.charAt(i)=='+')\n                    {\n                        res=res+Integer.parseInt(num2);\n                        num2=&quot;&quot;;\n                    }\n                    if(val.charAt(i)=='-')\n                    {\n                        res=res-Integer.parseInt(num2);\n                        num2=&quot;&quot;;\n                    }\n                    if(val.charAt(i)=='*')\n                    {\n                        res=res*Integer.parseInt(num2);\n                        num2=&quot;&quot;;\n                    }\n                    if(val.charAt(i)=='/')\n                    {\n                        res=res/Integer.parseInt(num2);\n                        num2=&quot;&quot;;\n                    }\n                }\n                i++;\n            }\n            t1.setText(String.valueOf(res));\n        }\n    }\n    \n    public static void main(String args[])\n    {\n        calculator ob=new calculator();\n        ob.Cal_UI();\n    }\n}\n</code></pre>\n"},{"tags":["java","multithreading","threadpool","executorservice","java.util.concurrent"],"answers":[{"tags":[],"owner":{"account_id":1075870,"reputation":7152,"user_id":1074041,"accept_rate":100,"display_name":"Trevor Freeman"},"down_vote_count":0,"up_vote_count":125,"is_accepted":true,"score":125,"last_activity_date":1631300816,"creation_date":1375221038,"answer_id":17958081,"question_id":17957382,"body_markdown":"A `CachedThreadPool` seems appropriate for your situation as there are no negative consequence to using one for long running threads directly.  The comment in the java doc about CachedThreadPools being suitable for short tasks merely suggest that they are particularly appropriate for such cases, not that they cannot be used for long running tasks.\r\n\r\nThe main concern with a `CachedThreadPool` is that it will create up to `Integer.MAX_VALUE` number of threads as it will always spawn a new thread if an unused one does not exist in the cache.  So if you have long running tasks it is then more likely that you could grow the number of concurrent threads more than you desire since this type of thread pool will not limit how many execute concurrently itself.  This does not seem to be a problem for your use case as described, but it is something to be aware of.\r\n\r\nTo elaborate further on the difference between a `CachedThreadPool` and a `FixedThreadPool`, [Executors.newCachedThreadPool][1] and [Executors.newFixedThreadPool][2] are both backed by the same thread pool implementation (at least in the open JDK) via an instance of `ThreadPoolExecutor`, just with different parameters.  The differences just being their thread minimum, maximum, thread kill time, and queue type.\r\n\r\n    public static ExecutorService newFixedThreadPool(int nThreads) {\r\n         return new ThreadPoolExecutor(nThreads, nThreads,\r\n                                       0L, TimeUnit.MILLISECONDS,\r\n                                       new LinkedBlockingQueue&lt;Runnable&gt;());\r\n     }\r\n\r\n    public static ExecutorService newCachedThreadPool() {\r\n        return new ThreadPoolExecutor(0, Integer.MAX_VALUE,\r\n                                     60L, TimeUnit.SECONDS,\r\n                                     new SynchronousQueue&lt;Runnable&gt;());\r\n    }\r\n\r\nA `FixedThreadPool` does have its advantages when you do in fact want to work with a fixed number of threads, since then you can submit any number of tasks to the executor service while knowing that the number of threads will be maintained at the level you specified.  If you explicitly want to grow the number of threads, then this is not the appropriate choice.\r\n\r\nThis does however mean that the one issue that you may have with the `CachedThreadPool` is in regards to limiting the number of threads that are running concurrently.  The `CachedThreadPool` will not limit them for you, so you may need to write your own code to ensure that you do not run too many threads, which you can do relatively easily by instantiating your own `ThreadPoolExecutor` with your desired behaviour characteristics.  This really depends on the design of your application and how tasks are submitted to the executor service.\r\n\r\n\r\n  [1]: http://docs.oracle.com/javase/8/docs/api/java/util/concurrent/Executors.html#newCachedThreadPool%28%29\r\n  [2]: http://docs.oracle.com/javase/8/docs/api/java/util/concurrent/Executors.html#newFixedThreadPool%28int%29","title":"FixedThreadPool vs CachedThreadPool: the lesser of two evils","body":"<p>A <code>CachedThreadPool</code> seems appropriate for your situation as there are no negative consequence to using one for long running threads directly.  The comment in the java doc about CachedThreadPools being suitable for short tasks merely suggest that they are particularly appropriate for such cases, not that they cannot be used for long running tasks.</p>\n<p>The main concern with a <code>CachedThreadPool</code> is that it will create up to <code>Integer.MAX_VALUE</code> number of threads as it will always spawn a new thread if an unused one does not exist in the cache.  So if you have long running tasks it is then more likely that you could grow the number of concurrent threads more than you desire since this type of thread pool will not limit how many execute concurrently itself.  This does not seem to be a problem for your use case as described, but it is something to be aware of.</p>\n<p>To elaborate further on the difference between a <code>CachedThreadPool</code> and a <code>FixedThreadPool</code>, <a href=\"http://docs.oracle.com/javase/8/docs/api/java/util/concurrent/Executors.html#newCachedThreadPool%28%29\" rel=\"noreferrer\">Executors.newCachedThreadPool</a> and <a href=\"http://docs.oracle.com/javase/8/docs/api/java/util/concurrent/Executors.html#newFixedThreadPool%28int%29\" rel=\"noreferrer\">Executors.newFixedThreadPool</a> are both backed by the same thread pool implementation (at least in the open JDK) via an instance of <code>ThreadPoolExecutor</code>, just with different parameters.  The differences just being their thread minimum, maximum, thread kill time, and queue type.</p>\n<pre><code>public static ExecutorService newFixedThreadPool(int nThreads) {\n     return new ThreadPoolExecutor(nThreads, nThreads,\n                                   0L, TimeUnit.MILLISECONDS,\n                                   new LinkedBlockingQueue&lt;Runnable&gt;());\n }\n\npublic static ExecutorService newCachedThreadPool() {\n    return new ThreadPoolExecutor(0, Integer.MAX_VALUE,\n                                 60L, TimeUnit.SECONDS,\n                                 new SynchronousQueue&lt;Runnable&gt;());\n}\n</code></pre>\n<p>A <code>FixedThreadPool</code> does have its advantages when you do in fact want to work with a fixed number of threads, since then you can submit any number of tasks to the executor service while knowing that the number of threads will be maintained at the level you specified.  If you explicitly want to grow the number of threads, then this is not the appropriate choice.</p>\n<p>This does however mean that the one issue that you may have with the <code>CachedThreadPool</code> is in regards to limiting the number of threads that are running concurrently.  The <code>CachedThreadPool</code> will not limit them for you, so you may need to write your own code to ensure that you do not run too many threads, which you can do relatively easily by instantiating your own <code>ThreadPoolExecutor</code> with your desired behaviour characteristics.  This really depends on the design of your application and how tasks are submitted to the executor service.</p>\n"},{"tags":[],"owner":{"account_id":6453072,"reputation":37996,"user_id":4999394,"accept_rate":98,"display_name":"Ravindra babu"},"down_vote_count":0,"up_vote_count":60,"is_accepted":false,"score":60,"last_activity_date":1682849827,"creation_date":1452784801,"answer_id":34793132,"question_id":17957382,"body_markdown":"Both `FixedThreadPool` and `CachedThreadPool` are evils in highly loaded applications. \r\n\r\n`CachedThreadPool` is more dangerous than `FixedThreadPool`\r\n\r\nIf your application is highly loaded &amp; demands low latency, better to get rid of both options due to below drawbacks\r\n\r\n1. Unbounded nature of task queue : It may cause out of memory or high latency\r\n2. Long running threads will cause `CachedThreadPool` to go out of control on Thread creation\r\n\r\nSince you know that both are evils, lesser evil doesn&#39;t do any good. \r\n\r\n\r\nPrefer [ThreadPoolExecutor][1], which provides granular control on many parameters. ( from docs.oracle.com)\r\n\r\n&gt;1. Set the task queue as bounded queue to have better control\r\n&gt;2. Have right RejectionHandler - Your own RejectionHandler or Default handlers provided by JDK\r\n&gt;3. If you have something to do on before/after completion of task, override `beforeExecute(Thread, Runnable)` and `afterExecute(Runnable, Throwable)`\r\n&gt;4. Override [ThreadFactory][2], if thread customization is required \r\n\r\n\r\n  [1]: https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/ThreadPoolExecutor.html\r\n  [2]: https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/ThreadFactory.html","title":"FixedThreadPool vs CachedThreadPool: the lesser of two evils","body":"<p>Both <code>FixedThreadPool</code> and <code>CachedThreadPool</code> are evils in highly loaded applications.</p>\n<p><code>CachedThreadPool</code> is more dangerous than <code>FixedThreadPool</code></p>\n<p>If your application is highly loaded &amp; demands low latency, better to get rid of both options due to below drawbacks</p>\n<ol>\n<li>Unbounded nature of task queue : It may cause out of memory or high latency</li>\n<li>Long running threads will cause <code>CachedThreadPool</code> to go out of control on Thread creation</li>\n</ol>\n<p>Since you know that both are evils, lesser evil doesn't do any good.</p>\n<p>Prefer <a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/ThreadPoolExecutor.html\" rel=\"nofollow noreferrer\">ThreadPoolExecutor</a>, which provides granular control on many parameters. ( from docs.oracle.com)</p>\n<blockquote>\n<ol>\n<li>Set the task queue as bounded queue to have better control</li>\n<li>Have right RejectionHandler - Your own RejectionHandler or Default handlers provided by JDK</li>\n<li>If you have something to do on before/after completion of task, override <code>beforeExecute(Thread, Runnable)</code> and <code>afterExecute(Runnable, Throwable)</code></li>\n<li>Override <a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/ThreadFactory.html\" rel=\"nofollow noreferrer\">ThreadFactory</a>, if thread customization is required</li>\n</ol>\n</blockquote>\n"},{"tags":[],"owner":{"account_id":2344577,"reputation":3561,"user_id":2055163,"accept_rate":81,"display_name":"Thorsten Sch&#246;ning"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1468146683,"creation_date":1466078566,"answer_id":37858638,"question_id":17957382,"body_markdown":"&gt; So I have a program that spawns threads (~5-150) which perform a bunch of tasks.\r\n\r\nAre you sure you understand how threads are actually processed by your OS and hardware of choice? How Java maps threads to OS threads, how that maps threads to CPU threads etc.? I&#39;m asking because creating 150 threads within in ONE JRE only makes sense if you have massive CPU cores/threads underneath, which most likely is not the case. Depending on the OS and RAM in use, creating more than n threads might even result in your JRE being terminated because of OOM errors.  So you should really distinguish between threads and work to do by those threads, how many work you are even able to process etc.\r\n\r\nAnd that&#39;s the problem with CachedThreadPool: It doesn&#39;t make sense to queue up long running work in threads which actually can&#39;t run because you only have 2 CPU cores able to process those threads. If you end up with 150 scheduled threads you might create a lot of unnecessary overhead for the schedulers used within Java and the OS to concurrently process them. This is simply impossible if you only have 2 CPU cores, unless your threads are waiting for I/O or such all the time. But even in that case a lot of threads would create a lot of I/O...\r\n\r\nAnd that problem doesn&#39;t occur with FixedThreadPool, created with e.g. 2+n threads, where n is reasonable low of course, because with that hardware and OS resources are used with far less overhead for managing threads which can&#39;t run anyway.","title":"FixedThreadPool vs CachedThreadPool: the lesser of two evils","body":"<blockquote>\n  <p>So I have a program that spawns threads (~5-150) which perform a bunch of tasks.</p>\n</blockquote>\n\n<p>Are you sure you understand how threads are actually processed by your OS and hardware of choice? How Java maps threads to OS threads, how that maps threads to CPU threads etc.? I'm asking because creating 150 threads within in ONE JRE only makes sense if you have massive CPU cores/threads underneath, which most likely is not the case. Depending on the OS and RAM in use, creating more than n threads might even result in your JRE being terminated because of OOM errors.  So you should really distinguish between threads and work to do by those threads, how many work you are even able to process etc.</p>\n\n<p>And that's the problem with CachedThreadPool: It doesn't make sense to queue up long running work in threads which actually can't run because you only have 2 CPU cores able to process those threads. If you end up with 150 scheduled threads you might create a lot of unnecessary overhead for the schedulers used within Java and the OS to concurrently process them. This is simply impossible if you only have 2 CPU cores, unless your threads are waiting for I/O or such all the time. But even in that case a lot of threads would create a lot of I/O...</p>\n\n<p>And that problem doesn't occur with FixedThreadPool, created with e.g. 2+n threads, where n is reasonable low of course, because with that hardware and OS resources are used with far less overhead for managing threads which can't run anyway.</p>\n"}],"owner":{"account_id":1529447,"reputation":2425,"user_id":1427033,"accept_rate":82,"display_name":"Daniel"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":88911,"favorite_count":0,"down_vote_count":0,"up_vote_count":110,"accepted_answer_id":17958081,"answer_count":3,"score":110,"last_activity_date":1682849827,"creation_date":1375218309,"question_id":17957382,"body_markdown":"I have a program that spawns threads (~5-150) which perform a bunch of tasks. Originally, I used a `FixedThreadPool` because [this similar question][1] suggested they were better suited for longer lived tasks and with my very limited knowledge of multithreading, I considered the average life of the threads (several minutes) &quot;*long lived*&quot;.\r\n\r\nHowever, I recently added the capability to spawn additional threads and doing so takes me above the thread limit I set. In this case, would it be better to guess and increase the number threads I can allow or to switch to a `CachedThreadPool` so I have no wasted threads?\r\n\r\nTrying them both out preliminarily, there doesn&#39;t *seem* to be a difference so I&#39;m inclined to go with the `CachedThreadPool` just to avoid the waste. However, does the life span of the threads mean I should instead picked a `FixedThreadPool` and just deal with the unused threads? [This question][2] makes it seem like those extra threads aren&#39;t wasted but I would appreciate the clarification.\r\n\r\n  [1]: https://stackoverflow.com/questions/949355/newcachedthreadpool-v-s-newfixedthreadpool\r\n  [2]: https://stackoverflow.com/questions/13110313/java-fixedthreadpool-with-known-pool-size-but-unknown-workers\r\n","title":"FixedThreadPool vs CachedThreadPool: the lesser of two evils","body":"<p>I have a program that spawns threads (~5-150) which perform a bunch of tasks. Originally, I used a <code>FixedThreadPool</code> because <a href=\"https://stackoverflow.com/questions/949355/newcachedthreadpool-v-s-newfixedthreadpool\">this similar question</a> suggested they were better suited for longer lived tasks and with my very limited knowledge of multithreading, I considered the average life of the threads (several minutes) \"<em>long lived</em>\".</p>\n\n<p>However, I recently added the capability to spawn additional threads and doing so takes me above the thread limit I set. In this case, would it be better to guess and increase the number threads I can allow or to switch to a <code>CachedThreadPool</code> so I have no wasted threads?</p>\n\n<p>Trying them both out preliminarily, there doesn't <em>seem</em> to be a difference so I'm inclined to go with the <code>CachedThreadPool</code> just to avoid the waste. However, does the life span of the threads mean I should instead picked a <code>FixedThreadPool</code> and just deal with the unused threads? <a href=\"https://stackoverflow.com/questions/13110313/java-fixedthreadpool-with-known-pool-size-but-unknown-workers\">This question</a> makes it seem like those extra threads aren't wasted but I would appreciate the clarification.</p>\n"},{"tags":["java","intellij-idea","dependencies","sbt","akka"],"comments":[{"owner":{"account_id":9727861,"reputation":2565,"user_id":7214091,"display_name":"Gast&#243;n Schabas"},"score":0,"creation_date":1682891379,"post_id":76136779,"comment_id":134282335,"body_markdown":"I just created a `new sbt project` in my Intellij (latest version), copy pasted your `build.sbt` and copy pasted the `hello world` example from [Introduction to Actors](https://doc.akka.io/docs/akka/current/typed/actors.html). Everything looks fine and I was able to execute it without any issue. Are those libraries listed in the `project explorer` tab in the `External Libraries` section? Maybe you can check the `project structure` menu what libraries are being imported","body":"I just created a <code>new sbt project</code> in my Intellij (latest version), copy pasted your <code>build.sbt</code> and copy pasted the <code>hello world</code> example from <a href=\"https://doc.akka.io/docs/akka/current/typed/actors.html\" rel=\"nofollow noreferrer\">Introduction to Actors</a>. Everything looks fine and I was able to execute it without any issue. Are those libraries listed in the <code>project explorer</code> tab in the <code>External Libraries</code> section? Maybe you can check the <code>project structure</code> menu what libraries are being imported"}],"owner":{"account_id":19485474,"reputation":11,"user_id":14254931,"display_name":"Rah"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":64,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1682849272,"creation_date":1682778984,"question_id":76136779,"body_markdown":"I imported a sbt project into intelliJ (using Java language for the project). I have the associated dependencies in the build.sbt file for akka. For some reason, my Akka library is not being recognized by the IDE. I can compile the example code and run it. Does anyone know how I can trouble shoot or resolve this?\r\n\r\nHere is the code in my build.sbt file-\r\n\r\n\r\n```\r\nval scala3Version = &quot;3.2.2&quot;\r\nlazy val akkaVersion = &quot;2.8.0&quot;\r\nlazy val root = project\r\n  .in(file(&quot;.&quot;))\r\n  .settings(\r\n    name := &quot;akkademo1&quot;,\r\n    version := &quot;0.1.0-SNAPSHOT&quot;,\r\n    fork := true,\r\n    connectInput in run := true, // This is required for console input to work!\r\n\r\n    // This is required as a workaround for https://github.com/lampepfl/dotty/issues/14846\r\n    compileOrder := CompileOrder.JavaThenScala,\r\n    scalaVersion := scala3Version,\r\n    javacOptions ++= Seq(&quot;-source&quot;, &quot;20&quot;, &quot;-target&quot;, &quot;20&quot;, &quot;--enable-preview&quot;),\r\n    javaOptions ++= Seq(&quot;--enable-preview&quot;),\r\n\r\n    libraryDependencies ++= Seq(\r\n      &quot;com.typesafe.akka&quot; %% &quot;akka-actor-typed&quot; % akkaVersion,\r\n      &quot;com.typesafe.akka&quot; %% &quot;akka-actor-testkit-typed&quot; % akkaVersion,\r\n      &quot;ch.qos.logback&quot; % &quot;logback-classic&quot; % &quot;1.4.6&quot;,\r\n      &quot;com.typesafe.akka&quot; %% &quot;akka-actor-testkit-typed&quot; % akkaVersion % Test,\r\n      &quot;org.scalatest&quot; %% &quot;scalatest&quot; % &quot;3.2.12&quot; % Test,\r\n)\r\n  )\r\n\r\n```\r\n\r\n[![enter image description here](https://i.stack.imgur.com/BGtFr.png)](https://i.stack.imgur.com/BGtFr.png)\r\n\r\nI tried to invalidate cache but didnt work. I tried to reimport but that didnt work either. ","title":"Akka library import for sbt project using Java not recognized in IntelliJ I","body":"<p>I imported a sbt project into intelliJ (using Java language for the project). I have the associated dependencies in the build.sbt file for akka. For some reason, my Akka library is not being recognized by the IDE. I can compile the example code and run it. Does anyone know how I can trouble shoot or resolve this?</p>\n<p>Here is the code in my build.sbt file-</p>\n<pre><code>val scala3Version = &quot;3.2.2&quot;\nlazy val akkaVersion = &quot;2.8.0&quot;\nlazy val root = project\n  .in(file(&quot;.&quot;))\n  .settings(\n    name := &quot;akkademo1&quot;,\n    version := &quot;0.1.0-SNAPSHOT&quot;,\n    fork := true,\n    connectInput in run := true, // This is required for console input to work!\n\n    // This is required as a workaround for https://github.com/lampepfl/dotty/issues/14846\n    compileOrder := CompileOrder.JavaThenScala,\n    scalaVersion := scala3Version,\n    javacOptions ++= Seq(&quot;-source&quot;, &quot;20&quot;, &quot;-target&quot;, &quot;20&quot;, &quot;--enable-preview&quot;),\n    javaOptions ++= Seq(&quot;--enable-preview&quot;),\n\n    libraryDependencies ++= Seq(\n      &quot;com.typesafe.akka&quot; %% &quot;akka-actor-typed&quot; % akkaVersion,\n      &quot;com.typesafe.akka&quot; %% &quot;akka-actor-testkit-typed&quot; % akkaVersion,\n      &quot;ch.qos.logback&quot; % &quot;logback-classic&quot; % &quot;1.4.6&quot;,\n      &quot;com.typesafe.akka&quot; %% &quot;akka-actor-testkit-typed&quot; % akkaVersion % Test,\n      &quot;org.scalatest&quot; %% &quot;scalatest&quot; % &quot;3.2.12&quot; % Test,\n)\n  )\n\n</code></pre>\n<p><a href=\"https://i.stack.imgur.com/BGtFr.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/BGtFr.png\" alt=\"enter image description here\" /></a></p>\n<p>I tried to invalidate cache but didnt work. I tried to reimport but that didnt work either.</p>\n"},{"tags":["java","spring-boot","hibernate","liquibase","liquibase-hibernate"],"comments":[{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1682855447,"post_id":76140673,"comment_id":134277736,"body_markdown":"Please clarify your specific problem or provide additional details to highlight exactly what you need. As it&#39;s currently written, it&#39;s hard to tell exactly what you&#39;re asking.","body":"Please clarify your specific problem or provide additional details to highlight exactly what you need. As it&#39;s currently written, it&#39;s hard to tell exactly what you&#39;re asking."}],"owner":{"account_id":28457651,"reputation":11,"user_id":21774805,"display_name":"DarkCoder"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":36,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1682849217,"creation_date":1682849217,"question_id":76140673,"body_markdown":"We are having a multitenant architecture whereby single database is shared by multiple tenant\r\n\r\nWe want to do data migration (Insert,update,delete) operation for each tenant in the same database. Each tenant is partitioned using a discriminatior column. How to run this migration in liquibase?\r\n\r\nI saw uploaddata concept in liquibase and also spring batch.","title":"How to do data migration in liquibase for multinant architecture","body":"<p>We are having a multitenant architecture whereby single database is shared by multiple tenant</p>\n<p>We want to do data migration (Insert,update,delete) operation for each tenant in the same database. Each tenant is partitioned using a discriminatior column. How to run this migration in liquibase?</p>\n<p>I saw uploaddata concept in liquibase and also spring batch.</p>\n"},{"tags":["java","spring","spring-boot","spring-webflux","webfiltering"],"answers":[{"tags":[],"owner":{"account_id":3101358,"reputation":962,"user_id":2625393,"display_name":"Numichi"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1682848741,"creation_date":1682848741,"answer_id":76140619,"question_id":76136498,"body_markdown":"Related to: https://stackoverflow.com/questions/49045670/spring-webflux-redirect-http-to-https\r\n\r\nA better solution than changing the direction of the request internally.\r\n\r\n```\r\n    @Override\r\n    public Mono&lt;Void&gt; filter(ServerWebExchange exchange, WebFilterChain chain) {\r\n        URI uri = exchange.getRequest().getURI();\r\n\r\n        if (uri.getPath().contains(&quot;tenant&quot;)) {\r\n            try {\r\n                URI mutatedUri = new URI(\r\n                    uri.getScheme(),\r\n                    uri.getUserInfo(),\r\n                    uri.getHost(),\r\n                    uri.getPort(),\r\n                    &quot;/&quot;,\r\n                    uri.getQuery(),\r\n                    uri.getFragment()\r\n                );\r\n                ServerHttpResponse response = exchange.getResponse();\r\n                response.setStatusCode(HttpStatus.MOVED_PERMANENTLY);\r\n                response.getHeaders().setLocation(mutatedUri);\r\n                return Mono.empty();\r\n            } catch (URISyntaxException e) {\r\n                return Mono.error(new IllegalStateException(e.getMessage(), e));\r\n            }\r\n        }\r\n\r\n        return chain.filter(exchange);\r\n    }\r\n```","title":"How to map tenant request to the root page of application in spring boot using spring webflux webfilter","body":"<p>Related to: <a href=\"https://stackoverflow.com/questions/49045670/spring-webflux-redirect-http-to-https\">Spring webflux: redirect http to https</a></p>\n<p>A better solution than changing the direction of the request internally.</p>\n<pre><code>    @Override\n    public Mono&lt;Void&gt; filter(ServerWebExchange exchange, WebFilterChain chain) {\n        URI uri = exchange.getRequest().getURI();\n\n        if (uri.getPath().contains(&quot;tenant&quot;)) {\n            try {\n                URI mutatedUri = new URI(\n                    uri.getScheme(),\n                    uri.getUserInfo(),\n                    uri.getHost(),\n                    uri.getPort(),\n                    &quot;/&quot;,\n                    uri.getQuery(),\n                    uri.getFragment()\n                );\n                ServerHttpResponse response = exchange.getResponse();\n                response.setStatusCode(HttpStatus.MOVED_PERMANENTLY);\n                response.getHeaders().setLocation(mutatedUri);\n                return Mono.empty();\n            } catch (URISyntaxException e) {\n                return Mono.error(new IllegalStateException(e.getMessage(), e));\n            }\n        }\n\n        return chain.filter(exchange);\n    }\n</code></pre>\n"}],"owner":{"account_id":27859391,"reputation":11,"user_id":21272257,"display_name":"suhail ahmed"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":93,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1682848741,"creation_date":1682775095,"question_id":76136498,"body_markdown":"I am using spring webflux and webfilter in my spring boot application and i&#39;m bundling angular and spring boot into a single jar file and i am able to access angular at &quot;/&quot;.\r\n\r\nMy use case is i want to support multi-tenant and when i access my application using &quot;localhost:8080/tenant/tenantname/&quot; it is considered as new tenant with name &quot;tenantname&quot; and i need to open the home page of angular which is at &quot;/&quot; by keeping the uri in the search bar as &quot;localhost:8080/tenant/tenantname/&quot;.\r\n\r\nSo to achieve it i have implemented a webfilter and modifying the path to &quot;/&quot; if the uri has &quot;tenant&quot;, but when we send the modified uri to chain.filter(), the uri in the search box is getting to &quot;localhost:8080/&quot; i dont want it happen i want the uri in search box should be same &quot;localhost:8080/tenant/tenantname/&quot;.\r\n\r\n```\r\n@Component\r\npublic class TenantFilter implements WebFilter {\r\n    @Override\r\n    public Mono&lt;Void&gt; filter(ServerWebExchange exchange, WebFilterChain chain) {\r\n        String uri = exchange.getRequest().getURI().getPath();\r\n        ServerWebExchange updatedExchange = exchange;\r\n        if(uri.contains(&quot;tenant&quot;)){\r\n             updatedExchange = exchange.mutate().request(request-&gt;{\r\n                request.path(&quot;/&quot;);\r\n            }).build();\r\n        }\r\n        return chain.filter(updatedExchange);\r\n    }\r\n}\r\n```\r\n\r\nIn my old POC i have use servlet filter it was working fine there.\r\n\r\nServlet filter example:\r\n\r\n```\r\n@Override\r\n    public void doFilter(ServletRequest request, ServletResponse response, FilterChain chain) throws IOException, ServletException {\r\n       \r\n        HttpServletRequest httpRequest = (HttpServletRequest) request;\r\n        String requestURI = httpRequest.getRequestURI();\r\n        if(requestURI.contains(&quot;/tenant&quot;)){\r\n            request.getRequestDispatcher(URLDecoder.decode(uri, &quot;UTF-8&quot;)).forward(request, response);\r\n        }\r\n        chain.doFilter(request, response);\r\n    }\r\n\r\n```\r\n\r\nin servlet filter i have use request.getRequestDispatcher().forward(request,response).\r\nis there anything same in spring webflux webfilter or do i need to change anything in my webFlux WebFilter.","title":"How to map tenant request to the root page of application in spring boot using spring webflux webfilter","body":"<p>I am using spring webflux and webfilter in my spring boot application and i'm bundling angular and spring boot into a single jar file and i am able to access angular at &quot;/&quot;.</p>\n<p>My use case is i want to support multi-tenant and when i access my application using &quot;localhost:8080/tenant/tenantname/&quot; it is considered as new tenant with name &quot;tenantname&quot; and i need to open the home page of angular which is at &quot;/&quot; by keeping the uri in the search bar as &quot;localhost:8080/tenant/tenantname/&quot;.</p>\n<p>So to achieve it i have implemented a webfilter and modifying the path to &quot;/&quot; if the uri has &quot;tenant&quot;, but when we send the modified uri to chain.filter(), the uri in the search box is getting to &quot;localhost:8080/&quot; i dont want it happen i want the uri in search box should be same &quot;localhost:8080/tenant/tenantname/&quot;.</p>\n<pre><code>@Component\npublic class TenantFilter implements WebFilter {\n    @Override\n    public Mono&lt;Void&gt; filter(ServerWebExchange exchange, WebFilterChain chain) {\n        String uri = exchange.getRequest().getURI().getPath();\n        ServerWebExchange updatedExchange = exchange;\n        if(uri.contains(&quot;tenant&quot;)){\n             updatedExchange = exchange.mutate().request(request-&gt;{\n                request.path(&quot;/&quot;);\n            }).build();\n        }\n        return chain.filter(updatedExchange);\n    }\n}\n</code></pre>\n<p>In my old POC i have use servlet filter it was working fine there.</p>\n<p>Servlet filter example:</p>\n<pre><code>@Override\n    public void doFilter(ServletRequest request, ServletResponse response, FilterChain chain) throws IOException, ServletException {\n       \n        HttpServletRequest httpRequest = (HttpServletRequest) request;\n        String requestURI = httpRequest.getRequestURI();\n        if(requestURI.contains(&quot;/tenant&quot;)){\n            request.getRequestDispatcher(URLDecoder.decode(uri, &quot;UTF-8&quot;)).forward(request, response);\n        }\n        chain.doFilter(request, response);\n    }\n\n</code></pre>\n<p>in servlet filter i have use request.getRequestDispatcher().forward(request,response).\nis there anything same in spring webflux webfilter or do i need to change anything in my webFlux WebFilter.</p>\n"},{"tags":["java","spring-boot","swagger","openapi","openapi-generator"],"answers":[{"tags":[],"owner":{"account_id":5636066,"reputation":6620,"user_id":4461537,"accept_rate":89,"display_name":"Ren&#233; Winkler"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1682848264,"creation_date":1682848264,"answer_id":76140592,"question_id":74698141,"body_markdown":"OpenApi generator uses mustache templates to generate code. For Spring you find these templates here:\r\n\r\nhttps://github.com/OpenAPITools/openapi-generator/tree/master/modules/openapi-generator/src/main/resources/JavaSpring\r\n\r\nIn `api.mustache` you find `{{&gt;headerParams}}`. This is a mustache partial that is a way to reuse the same template code in multiple places. Here it means, include the `headerParams.mustache` at this place.\r\n\r\nIn `headerParams.mustache`, you will find that headers are included one by one. \r\n\r\nIn summary, it is not possible to to generate a Map of multiple header parameters (at least not by default configuration mechanism).\r\n\r\n","title":"How to generate multiple headers as a map using OpenAPI Generator?","body":"<p>OpenApi generator uses mustache templates to generate code. For Spring you find these templates here:</p>\n<p><a href=\"https://github.com/OpenAPITools/openapi-generator/tree/master/modules/openapi-generator/src/main/resources/JavaSpring\" rel=\"nofollow noreferrer\">https://github.com/OpenAPITools/openapi-generator/tree/master/modules/openapi-generator/src/main/resources/JavaSpring</a></p>\n<p>In <code>api.mustache</code> you find <code>{{&gt;headerParams}}</code>. This is a mustache partial that is a way to reuse the same template code in multiple places. Here it means, include the <code>headerParams.mustache</code> at this place.</p>\n<p>In <code>headerParams.mustache</code>, you will find that headers are included one by one.</p>\n<p>In summary, it is not possible to to generate a Map of multiple header parameters (at least not by default configuration mechanism).</p>\n"}],"owner":{"account_id":926701,"reputation":1165,"user_id":957359,"accept_rate":47,"display_name":"jcrshankar"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":449,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"answer_count":1,"score":4,"last_activity_date":1682848264,"creation_date":1670307874,"question_id":74698141,"body_markdown":"I have the following two headers in my OpenAPI 2.0 definition:\r\n\r\n&lt;!-- language: lang-json --&gt;\r\n\r\n          {\r\n            &quot;name&quot;: &quot;key&quot;,\r\n            &quot;in&quot;: &quot;header&quot;,\r\n            &quot;description&quot;: &quot;v4 UUID &quot;,\r\n            &quot;required&quot;: true,\r\n            &quot;type&quot;: &quot;string&quot;,\r\n            &quot;format&quot;: &quot;string&quot;,\r\n            &quot;x-example&quot;: &quot;d1257cae-9814-90d0-89e0-abd9ae7b3375&quot;\r\n          },\r\n          {\r\n            &quot;name&quot;: &quot;emp-number&quot;,\r\n            &quot;in&quot;: &quot;header&quot;,\r\n            &quot;description&quot;: &quot;The emp number&quot;,\r\n            &quot;required&quot;: true,\r\n            &quot;type&quot;: &quot;string&quot;,\r\n            &quot;x-example&quot;: &quot;43234&quot;\r\n          },\r\n\r\nThe implementation class generated by the OpenAPI Generator comes with two params for the headers:\r\n\r\n    makeXy(String key, String emp-number)\r\n\r\nIs it possible to combine those two headers and generate them as a map? Like so:\r\n\r\n    makeXy(Map&lt;String, String&gt; headers)","title":"How to generate multiple headers as a map using OpenAPI Generator?","body":"<p>I have the following two headers in my OpenAPI 2.0 definition:</p>\n<pre class=\"lang-json prettyprint-override\"><code>      {\n        &quot;name&quot;: &quot;key&quot;,\n        &quot;in&quot;: &quot;header&quot;,\n        &quot;description&quot;: &quot;v4 UUID &quot;,\n        &quot;required&quot;: true,\n        &quot;type&quot;: &quot;string&quot;,\n        &quot;format&quot;: &quot;string&quot;,\n        &quot;x-example&quot;: &quot;d1257cae-9814-90d0-89e0-abd9ae7b3375&quot;\n      },\n      {\n        &quot;name&quot;: &quot;emp-number&quot;,\n        &quot;in&quot;: &quot;header&quot;,\n        &quot;description&quot;: &quot;The emp number&quot;,\n        &quot;required&quot;: true,\n        &quot;type&quot;: &quot;string&quot;,\n        &quot;x-example&quot;: &quot;43234&quot;\n      },\n</code></pre>\n<p>The implementation class generated by the OpenAPI Generator comes with two params for the headers:</p>\n<pre><code>makeXy(String key, String emp-number)\n</code></pre>\n<p>Is it possible to combine those two headers and generate them as a map? Like so:</p>\n<pre><code>makeXy(Map&lt;String, String&gt; headers)\n</code></pre>\n"},{"tags":["java","kotlin","reflection","type-conversion","jvm"],"answers":[{"tags":[],"owner":{"account_id":6651855,"reputation":224830,"user_id":5133585,"accept_rate":96,"display_name":"Sweeper"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1682847867,"creation_date":1682846673,"answer_id":76140486,"question_id":76140292,"body_markdown":"You can make a Kotlin wrapper of the `KFunction`-accepting function, that takes a function type instead:\r\n\r\n```\r\nfun registerHelper(value: (Value) -&gt; Unit) {\r\n   register(value::invoke)\r\n}\r\n```\r\n\r\nThis can then be called from the Java code:\r\n\r\n```\r\npublic class Test {\r\n    public void launch() {\r\n        registerHelper(Test::test);\r\n    }\r\n    @Subscriber\r\n    public static Unit test(Value data) {\r\n        System.out.println(&quot;Hello world!&quot;);\r\n        return Unit.INSTANCE;\r\n    }\r\n}\r\n```\r\n\r\n&lt;hr&gt;\r\n\r\nHowever, if `registerHelper` needs to access the name of `test`, or the annotations on it, rather than just call it, it is a lot harder.\r\n\r\nOne way I can think of is what you&#39;d do in kotlin, when you want to convert a `java.lang.reflect.Method` into a `KFunction`. You&#39;d use [`kotlinFunction`][1], right?\r\n\r\nThe `kotlinFunction` property corresponds to a static method called `ReflectJvmMapping.getKotlinFunction` in Java.\r\n\r\nYou can get the `test` method as a `java.lang.reflect.Method`, then use that to convert to a `KFunction`:\r\n\r\n```\r\nvar testClass = Test.class;\r\nvar method = testClass.getMethod(&quot;test&quot;, Value.class);\r\n\r\n// note the unchecked cast here, which is safe as long as you got the correct method\r\nEvent.register((KFunction&lt;Unit&gt;) ReflectJvmMapping.getKotlinFunction(method));\r\n```\r\n\r\nSince the implementation of `getKotlinFunction` uses Kotlin reflection to find the function again, it might be better if you convert `Test.class` to a Kotlin class first, and then use Kotlin reflection directly.\r\n\r\n```\r\nvar testClassKotlin = JvmClassMappingKt.getKotlinClass(Test.class);\r\nvar kfunction = KClasses.getFunctions(testClassKotlin).stream()\r\n    // use whatever criteria to find the method you want\r\n    .filter(x -&gt; x.getName().equals(&quot;test&quot;))\r\n    .findFirst().get();\r\n```\r\n\r\n&lt;hr&gt;\r\n\r\nThat said, this is not how the Kotlin compiler internally makes a `KFunction`, when you write a function reference. The kotlin compiler actually creates a subclass of `kotlin.jvm.internal.FunctionReferenceImpl`. If you want to do what the compiler does, which I don&#39;t really recommend:\r\n\r\n```\r\n// yes, implementing the raw type of Function1 is necessary.\r\nclass SomeInnerClass extends FunctionReferenceImpl implements kotlin.jvm.functions.Function1{\r\n\r\n    public SomeInnerClass() {\r\n        // here you need to pass in the arty, declared class, name,\r\n        // JVM signature, and some flags too\r\n        super(1, Test.class, &quot;test&quot;, &quot;test(Lyourpackage/Value;)Lkotlin/Unit;&quot;, 0);\r\n        // For what the flags mean, see \r\n        // https://github.com/JetBrains/kotlin/blob/master/libraries/stdlib/jvm/runtime/kotlin/jvm/internal/FunctionReference.java#L16\r\n    }\r\n\r\n    @Override\r\n    public Unit invoke(Object value) {\r\n        return Test.test((Value)value);\r\n    }\r\n\r\n}\r\n```\r\n\r\nThen an instance of this is passed to `register`.\r\n\r\n\r\n  [1]: https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.reflect.jvm/java.lang.reflect.-method/kotlin-function.html","title":"Passing Java Function to KFunction","body":"<p>You can make a Kotlin wrapper of the <code>KFunction</code>-accepting function, that takes a function type instead:</p>\n<pre><code>fun registerHelper(value: (Value) -&gt; Unit) {\n   register(value::invoke)\n}\n</code></pre>\n<p>This can then be called from the Java code:</p>\n<pre><code>public class Test {\n    public void launch() {\n        registerHelper(Test::test);\n    }\n    @Subscriber\n    public static Unit test(Value data) {\n        System.out.println(&quot;Hello world!&quot;);\n        return Unit.INSTANCE;\n    }\n}\n</code></pre>\n<hr>\n<p>However, if <code>registerHelper</code> needs to access the name of <code>test</code>, or the annotations on it, rather than just call it, it is a lot harder.</p>\n<p>One way I can think of is what you'd do in kotlin, when you want to convert a <code>java.lang.reflect.Method</code> into a <code>KFunction</code>. You'd use <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.reflect.jvm/java.lang.reflect.-method/kotlin-function.html\" rel=\"nofollow noreferrer\"><code>kotlinFunction</code></a>, right?</p>\n<p>The <code>kotlinFunction</code> property corresponds to a static method called <code>ReflectJvmMapping.getKotlinFunction</code> in Java.</p>\n<p>You can get the <code>test</code> method as a <code>java.lang.reflect.Method</code>, then use that to convert to a <code>KFunction</code>:</p>\n<pre><code>var testClass = Test.class;\nvar method = testClass.getMethod(&quot;test&quot;, Value.class);\n\n// note the unchecked cast here, which is safe as long as you got the correct method\nEvent.register((KFunction&lt;Unit&gt;) ReflectJvmMapping.getKotlinFunction(method));\n</code></pre>\n<p>Since the implementation of <code>getKotlinFunction</code> uses Kotlin reflection to find the function again, it might be better if you convert <code>Test.class</code> to a Kotlin class first, and then use Kotlin reflection directly.</p>\n<pre><code>var testClassKotlin = JvmClassMappingKt.getKotlinClass(Test.class);\nvar kfunction = KClasses.getFunctions(testClassKotlin).stream()\n    // use whatever criteria to find the method you want\n    .filter(x -&gt; x.getName().equals(&quot;test&quot;))\n    .findFirst().get();\n</code></pre>\n<hr>\n<p>That said, this is not how the Kotlin compiler internally makes a <code>KFunction</code>, when you write a function reference. The kotlin compiler actually creates a subclass of <code>kotlin.jvm.internal.FunctionReferenceImpl</code>. If you want to do what the compiler does, which I don't really recommend:</p>\n<pre><code>// yes, implementing the raw type of Function1 is necessary.\nclass SomeInnerClass extends FunctionReferenceImpl implements kotlin.jvm.functions.Function1{\n\n    public SomeInnerClass() {\n        // here you need to pass in the arty, declared class, name,\n        // JVM signature, and some flags too\n        super(1, Test.class, &quot;test&quot;, &quot;test(Lyourpackage/Value;)Lkotlin/Unit;&quot;, 0);\n        // For what the flags mean, see \n        // https://github.com/JetBrains/kotlin/blob/master/libraries/stdlib/jvm/runtime/kotlin/jvm/internal/FunctionReference.java#L16\n    }\n\n    @Override\n    public Unit invoke(Object value) {\n        return Test.test((Value)value);\n    }\n\n}\n</code></pre>\n<p>Then an instance of this is passed to <code>register</code>.</p>\n"}],"owner":{"account_id":22445840,"reputation":29,"user_id":16649773,"display_name":"Cherry"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":158,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":76140486,"answer_count":1,"score":2,"last_activity_date":1682847867,"creation_date":1682844098,"question_id":76140292,"body_markdown":"Is there any way way to pass a Function to method with parameters KFunction?\r\nI have library in kotlin which I want to make work in java but I&#39;m unable to convert Function to KFunction (?). \r\nThe function that I want to pass java function\r\n```kotlin\r\n// For example it will be in Event class\r\nfun register(value: KFunction1&lt;Value,Unit&gt;) {\r\n    ...\r\n}\r\n```\r\nMy tries to pass the function to kfunction\r\n```java\r\npublic class Test {\r\n    public void launch() {\r\n        Event.register(Test::test); // Error\r\n    }\r\n    @Subscriber\r\n    public static Unit test(Value data) {\r\n        System.out.println(&quot;Hello world!&quot;);\r\n        return Unit.INSTANCE;\r\n    }\r\n}\r\n```\r\nPS. I need it to be KFunction due to usage of annotation","title":"Passing Java Function to KFunction","body":"<p>Is there any way way to pass a Function to method with parameters KFunction?\nI have library in kotlin which I want to make work in java but I'm unable to convert Function to KFunction (?).\nThe function that I want to pass java function</p>\n<pre class=\"lang-kotlin prettyprint-override\"><code>// For example it will be in Event class\nfun register(value: KFunction1&lt;Value,Unit&gt;) {\n    ...\n}\n</code></pre>\n<p>My tries to pass the function to kfunction</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class Test {\n    public void launch() {\n        Event.register(Test::test); // Error\n    }\n    @Subscriber\n    public static Unit test(Value data) {\n        System.out.println(&quot;Hello world!&quot;);\n        return Unit.INSTANCE;\n    }\n}\n</code></pre>\n<p>PS. I need it to be KFunction due to usage of annotation</p>\n"},{"tags":["python","java","oracle","aws-glue","py4j"],"comments":[{"owner":{"account_id":6156062,"reputation":9559,"user_id":4799035,"display_name":"Christopher Jones"},"score":1,"creation_date":1668633657,"post_id":74464385,"comment_id":131456272,"body_markdown":"Does python-oracledb install cleanly in AWS Glue?  If so, then you could use this API instead of the heavy-weight &#39;call java from python&#39; approach.  With python-oracledb you won&#39;t need Oracle Instant Client but you will need python&#39;s cryptography package. (Technically you need one or the other: either Oracle Client or the cryptography package. The default install just uses the latter.)","body":"Does python-oracledb install cleanly in AWS Glue?  If so, then you could use this API instead of the heavy-weight &#39;call java from python&#39; approach.  With python-oracledb you won&#39;t need Oracle Instant Client but you will need python&#39;s cryptography package. (Technically you need one or the other: either Oracle Client or the cryptography package. The default install just uses the latter.)"},{"owner":{"account_id":17676753,"reputation":31,"user_id":12831563,"display_name":"Marcus Trinder"},"score":0,"creation_date":1668781699,"post_id":74464385,"comment_id":131496357,"body_markdown":"Unfortunately, oracledb is not supported in AWS glue.","body":"Unfortunately, oracledb is not supported in AWS glue."},{"owner":{"account_id":6156062,"reputation":9559,"user_id":4799035,"display_name":"Christopher Jones"},"score":0,"creation_date":1668805265,"post_id":74464385,"comment_id":131503681,"body_markdown":"What definition of &#39;support&#39; is that?  Do you mean not available, or doesn&#39;t run or...?  I know you can run the older version (cx_Oracle), see https://stackoverflow.com/questions/70972408/unable-to-connect-oracle-database-using-cx-oracle-from-aws-glue","body":"What definition of &#39;support&#39; is that?  Do you mean not available, or doesn&#39;t run or...?  I know you can run the older version (cx_Oracle), see <a href=\"https://stackoverflow.com/questions/70972408/unable-to-connect-oracle-database-using-cx-oracle-from-aws-glue\" title=\"unable to connect oracle database using cx oracle from aws glue\">stackoverflow.com/questions/70972408/&hellip;</a>"}],"owner":{"account_id":17676753,"reputation":31,"user_id":12831563,"display_name":"Marcus Trinder"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":350,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1682847661,"creation_date":1668617911,"question_id":74464385,"body_markdown":"I am running a AWS Glue job to execute stored procedures in an Oracle database. I want to be able to catch the sql exception when a stored procedure fails. I am using &#39;from py4j.java_gateway import java_import&#39; to set up the connection and execute SQL commands on the connection. \r\n\r\n    import sys\r\n    from awsglue.transforms import *\r\n    from awsglue.utils import getResolvedOptions\r\n    from pyspark.context import SparkContext\r\n    from awsglue.context import GlueContext\r\n    from awsglue.job import Job\r\n    import boto3\r\n    \r\n    ############################################\r\n    ### UPDATE THE STORE PROCEDURE NAME HERE ###\r\n\r\n    sp_names = [\r\n    &#39;DEV_WF_POC1&#39;,\r\n    &#39;DEV_WF_POC2&#39;\r\n            ]\r\n    ############################################\r\n\r\n    #Set the conection name (Will be replaced for FT and PROD by powershell deployment script)\r\n    glue_connection_name = &#39;dw-dev-connection&#39;\r\n\r\n    #Use systems args to return job name and pass to local variable\r\n    args = getResolvedOptions(sys.argv, [&#39;JOB_NAME&#39;,&#39;WORKFLOW_NAME&#39;, &#39;WORKFLOW_RUN_ID&#39;])\r\n    workflow_name = args[&#39;WORKFLOW_NAME&#39;]\r\n    workflow_run_id = args[&#39;WORKFLOW_RUN_ID&#39;]\r\n    glue_job_name = args[&#39;JOB_NAME&#39;]\r\n\r\n    #Create spark handler and update status of glue job     \r\n    sc = SparkContext()\r\n    glueContext = GlueContext(sc)\r\n    spark = glueContext.spark_session\r\n    job = Job(glueContext)\r\n    job.init(glue_job_name, args)\r\n    job.commit()\r\n    logger = glueContext.get_logger()\r\n    glue_client = boto3.client(&#39;glue&#39;)\r\n\r\n\r\n    #Extract connection details from Data Catelog     \r\n    source_jdbc_conf = glueContext.extract_jdbc_conf(glue_connection_name)\r\n\r\n    #Import Python for Java Java.sql libs    \r\n    from py4j.java_gateway import java_import\r\n    java_import(sc._gateway.jvm,&quot;java.sql.Connection&quot;)\r\n    java_import(sc._gateway.jvm,&quot;java.sql.DatabaseMetaData&quot;)\r\n    java_import(sc._gateway.jvm,&quot;java.sql.DriverManager&quot;)\r\n    java_import(sc._gateway.jvm,&quot;java.sql.SQLException&quot;)\r\n\r\n    #Extract the URL from the JDBC connection \r\n    oracleurl = source_jdbc_conf.get(&#39;url&#39;)\r\n\r\n    # Update connection string to expected Oracle format\r\n    oracleurl = oracleurl.replace(&quot;oracle://&quot;, &quot;oracle:thin:@&quot;)\r\n    oracleurl = oracleurl + &#39;:orcl&#39;\r\n\r\n    #Create the connection to the Oracle database with java.sql\r\n    conn = sc._gateway.jvm.DriverManager.getConnection(oracleurl, source_jdbc_conf.get(&#39;user&#39;),      source_jdbc_conf.get(&#39;password&#39;))\r\n\r\n    #Change autocommit to false to avoid Table lock error \r\n    conn.setAutoCommit(False);\r\n\r\n    # error dict\r\n    errs = {}\r\n    err = &#39;&#39;\r\n    try:\r\n\r\n        for sp_name in sp_names:\r\n    \r\n        #Prepare call stored procedure statement and execute\r\n        cstmt = conn.prepareCall(&quot;{call reporting.&quot; + sp_name + &quot;}&quot;);\r\n        results = cstmt.execute();\r\n        \r\n        conn.commit();\r\n\r\n    # capture error\r\n\r\n    except Exception as e: # work on python 3.x\r\n        ##errs[&#39;msg&#39;] = str(sc._gateway.jvm.SQLException.getMessage())- doesn&#39;t work \r\n        errs[&#39;error&#39;] = str(e)\r\n        errs[&#39;sp_name&#39;] = sp_name\r\n        errs[&#39;error_type&#39;] = str(type(e)).replace(&quot;&lt;class &#39;&quot;,&quot;&quot;).replace(&quot;&#39;&gt;&quot;,&quot;&quot;)\r\n\r\n    if len(errs) != 0:\r\n        stmt = conn.createStatement();\r\n        sql = &quot;insert into dev_workflow_errors (timestamp, workflow_id, workflow_name, job_name,  sp_name, error_type, error) values (current_timestamp, &#39;&quot; + workflow_run_id + &quot;&#39;, &#39;&quot; + workflow_name + &quot;&#39;, &#39;&quot; + glue_job_name + &quot;&#39;, &#39;&quot; + errs[&#39;sp_name&#39;] + &quot;&#39;, &#39;&quot; + errs[&#39;error_type&#39;] + &quot;&#39;, &#39;&quot; + errs[&#39;msg&#39;] + &quot;&#39;)&quot;\r\n        rs = stmt.executeUpdate(sql);\r\n        conn.commit();\r\n        #sys.exit(1)\r\n\r\n    #Close down the connection\r\n    conn.close();\r\n\r\n    #Update Logger\r\n    logger.info(&quot;Finished&quot;)\r\n\r\nI tried the pythonic &#39;Try&#39; and &#39;Except&#39; method but for the base exception I just get the full &#39;py4j.protocol.Py4JJavaError&#39; error message. Inside this message contains the database specific error messages I want to extract.\r\n\r\nCan I use \r\n\r\n    java_import(sc._gateway.jvm,&quot;java.sql.SQLException&quot;)\r\n\r\nin any way to extract database specific errors from the execute function?","title":"Extract java.sql.SQLException from execute call in Python - AWS Glue","body":"<p>I am running a AWS Glue job to execute stored procedures in an Oracle database. I want to be able to catch the sql exception when a stored procedure fails. I am using 'from py4j.java_gateway import java_import' to set up the connection and execute SQL commands on the connection.</p>\n<pre><code>import sys\nfrom awsglue.transforms import *\nfrom awsglue.utils import getResolvedOptions\nfrom pyspark.context import SparkContext\nfrom awsglue.context import GlueContext\nfrom awsglue.job import Job\nimport boto3\n\n############################################\n### UPDATE THE STORE PROCEDURE NAME HERE ###\n\nsp_names = [\n'DEV_WF_POC1',\n'DEV_WF_POC2'\n        ]\n############################################\n\n#Set the conection name (Will be replaced for FT and PROD by powershell deployment script)\nglue_connection_name = 'dw-dev-connection'\n\n#Use systems args to return job name and pass to local variable\nargs = getResolvedOptions(sys.argv, ['JOB_NAME','WORKFLOW_NAME', 'WORKFLOW_RUN_ID'])\nworkflow_name = args['WORKFLOW_NAME']\nworkflow_run_id = args['WORKFLOW_RUN_ID']\nglue_job_name = args['JOB_NAME']\n\n#Create spark handler and update status of glue job     \nsc = SparkContext()\nglueContext = GlueContext(sc)\nspark = glueContext.spark_session\njob = Job(glueContext)\njob.init(glue_job_name, args)\njob.commit()\nlogger = glueContext.get_logger()\nglue_client = boto3.client('glue')\n\n\n#Extract connection details from Data Catelog     \nsource_jdbc_conf = glueContext.extract_jdbc_conf(glue_connection_name)\n\n#Import Python for Java Java.sql libs    \nfrom py4j.java_gateway import java_import\njava_import(sc._gateway.jvm,&quot;java.sql.Connection&quot;)\njava_import(sc._gateway.jvm,&quot;java.sql.DatabaseMetaData&quot;)\njava_import(sc._gateway.jvm,&quot;java.sql.DriverManager&quot;)\njava_import(sc._gateway.jvm,&quot;java.sql.SQLException&quot;)\n\n#Extract the URL from the JDBC connection \noracleurl = source_jdbc_conf.get('url')\n\n# Update connection string to expected Oracle format\noracleurl = oracleurl.replace(&quot;oracle://&quot;, &quot;oracle:thin:@&quot;)\noracleurl = oracleurl + ':orcl'\n\n#Create the connection to the Oracle database with java.sql\nconn = sc._gateway.jvm.DriverManager.getConnection(oracleurl, source_jdbc_conf.get('user'),      source_jdbc_conf.get('password'))\n\n#Change autocommit to false to avoid Table lock error \nconn.setAutoCommit(False);\n\n# error dict\nerrs = {}\nerr = ''\ntry:\n\n    for sp_name in sp_names:\n\n    #Prepare call stored procedure statement and execute\n    cstmt = conn.prepareCall(&quot;{call reporting.&quot; + sp_name + &quot;}&quot;);\n    results = cstmt.execute();\n    \n    conn.commit();\n\n# capture error\n\nexcept Exception as e: # work on python 3.x\n    ##errs['msg'] = str(sc._gateway.jvm.SQLException.getMessage())- doesn't work \n    errs['error'] = str(e)\n    errs['sp_name'] = sp_name\n    errs['error_type'] = str(type(e)).replace(&quot;&lt;class '&quot;,&quot;&quot;).replace(&quot;'&gt;&quot;,&quot;&quot;)\n\nif len(errs) != 0:\n    stmt = conn.createStatement();\n    sql = &quot;insert into dev_workflow_errors (timestamp, workflow_id, workflow_name, job_name,  sp_name, error_type, error) values (current_timestamp, '&quot; + workflow_run_id + &quot;', '&quot; + workflow_name + &quot;', '&quot; + glue_job_name + &quot;', '&quot; + errs['sp_name'] + &quot;', '&quot; + errs['error_type'] + &quot;', '&quot; + errs['msg'] + &quot;')&quot;\n    rs = stmt.executeUpdate(sql);\n    conn.commit();\n    #sys.exit(1)\n\n#Close down the connection\nconn.close();\n\n#Update Logger\nlogger.info(&quot;Finished&quot;)\n</code></pre>\n<p>I tried the pythonic 'Try' and 'Except' method but for the base exception I just get the full 'py4j.protocol.Py4JJavaError' error message. Inside this message contains the database specific error messages I want to extract.</p>\n<p>Can I use</p>\n<pre><code>java_import(sc._gateway.jvm,&quot;java.sql.SQLException&quot;)\n</code></pre>\n<p>in any way to extract database specific errors from the execute function?</p>\n"},{"tags":["java","exception","indexoutofboundsexception"],"comments":[{"owner":{"account_id":5185952,"reputation":17062,"user_id":4150352,"accept_rate":75,"display_name":"Mohammed Aouf Zouag"},"score":0,"creation_date":1450093364,"post_id":34266174,"comment_id":56273392,"body_markdown":"google **&quot;IndexOutOfBoundsException&quot;**","body":"google <b>&quot;IndexOutOfBoundsException&quot;</b>"},{"owner":{"account_id":4728704,"reputation":17022,"user_id":3824919,"display_name":"Tom"},"score":0,"creation_date":1450093504,"post_id":34266174,"comment_id":56273481,"body_markdown":"The difference is that one is used in case of n Array, the other is not.","body":"The difference is that one is used in case of n Array, the other is not."}],"answers":[{"tags":[],"owner":{"account_id":1263831,"reputation":388998,"user_id":1221571,"accept_rate":67,"display_name":"Eran"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1450093500,"creation_date":1450093500,"answer_id":34266241,"question_id":34266174,"body_markdown":"`IndexOutOfBoundsException` is the super class of `ArrayIndexOutOfBoundsException` (thrown when accessing invalid index in a array) and `StringIndexOutOfBoundsException` (thrown when accessing invalid index in a String).\r\n\r\nInstances of the base class `IndexOutOfBoundsException` itself are thrown when accessing invalid indices of Lists.\r\n\r\nThe Javadoc of some methods that throw `IndexOutOfBoundsException` or its sub-classes contains the base class. For example, `String.charAt` is documented to be throwing `IndexOutOfBoundsException` when it actually throws the sub-class `StringIndexOutOfBoundsException`.","title":"Difference between ArrayIndexOutOfBoundsException and IndexOutOfBoundsException?","body":"<p><code>IndexOutOfBoundsException</code> is the super class of <code>ArrayIndexOutOfBoundsException</code> (thrown when accessing invalid index in a array) and <code>StringIndexOutOfBoundsException</code> (thrown when accessing invalid index in a String).</p>\n\n<p>Instances of the base class <code>IndexOutOfBoundsException</code> itself are thrown when accessing invalid indices of Lists.</p>\n\n<p>The Javadoc of some methods that throw <code>IndexOutOfBoundsException</code> or its sub-classes contains the base class. For example, <code>String.charAt</code> is documented to be throwing <code>IndexOutOfBoundsException</code> when it actually throws the sub-class <code>StringIndexOutOfBoundsException</code>.</p>\n"},{"tags":[],"owner":{"display_name":"user1326628"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1450093571,"creation_date":1450093571,"answer_id":34266267,"question_id":34266174,"body_markdown":"ArrayIndexOutOfBoundsException indicates the illegal index in its message.","title":"Difference between ArrayIndexOutOfBoundsException and IndexOutOfBoundsException?","body":"<p>ArrayIndexOutOfBoundsException indicates the illegal index in its message.</p>\n"},{"tags":[],"owner":{"account_id":6453072,"reputation":37996,"user_id":4999394,"accept_rate":98,"display_name":"Ravindra babu"},"down_vote_count":0,"up_vote_count":23,"is_accepted":false,"score":23,"last_activity_date":1682847420,"creation_date":1450094084,"answer_id":34266416,"question_id":34266174,"body_markdown":"From docs.oracle.com documentation pages,\r\n\r\n&gt;[IndexOutOfBoundsException][1] :Thrown to indicate that an index of some sort (such as to an array, to a string, or to a vector) is out of range.\r\n\r\n\r\n `ArrayIndexOutOfBoundsException`, `StringIndexOutOfBoundsException` \r\n  are two classes, which have implemented `IndexOutOfBoundsException`.\r\n\r\n&gt;[ArrayIndexOutOfBoundsException][2]: Thrown to indicate that an array has been accessed with an illegal index. The index is either negative or greater than or equal to the size of the array.\r\n\r\n&gt;[StringIndexOutOfBoundsException][3]:Thrown by String methods to indicate that an index is either negative or greater than the size of the string. For some methods such as the charAt method, this exception also is thrown when the index is equal to the size of the string.\r\n\r\n\r\n\r\n\r\n  [1]: https://docs.oracle.com/javase/8/docs/api/java/lang/IndexOutOfBoundsException.html\r\n  [2]: https://docs.oracle.com/javase/8/docs/api/java/lang/ArrayIndexOutOfBoundsException.html\r\n  [3]: https://docs.oracle.com/javase/8/docs/api/java/lang/StringIndexOutOfBoundsException.html","title":"Difference between ArrayIndexOutOfBoundsException and IndexOutOfBoundsException?","body":"<p>From docs.oracle.com documentation pages,</p>\n<blockquote>\n<p><a href=\"https://docs.oracle.com/javase/8/docs/api/java/lang/IndexOutOfBoundsException.html\" rel=\"nofollow noreferrer\">IndexOutOfBoundsException</a> :Thrown to indicate that an index of some sort (such as to an array, to a string, or to a vector) is out of range.</p>\n</blockquote>\n<p><code>ArrayIndexOutOfBoundsException</code>, <code>StringIndexOutOfBoundsException</code>\nare two classes, which have implemented <code>IndexOutOfBoundsException</code>.</p>\n<blockquote>\n<p><a href=\"https://docs.oracle.com/javase/8/docs/api/java/lang/ArrayIndexOutOfBoundsException.html\" rel=\"nofollow noreferrer\">ArrayIndexOutOfBoundsException</a>: Thrown to indicate that an array has been accessed with an illegal index. The index is either negative or greater than or equal to the size of the array.</p>\n</blockquote>\n<blockquote>\n<p><a href=\"https://docs.oracle.com/javase/8/docs/api/java/lang/StringIndexOutOfBoundsException.html\" rel=\"nofollow noreferrer\">StringIndexOutOfBoundsException</a>:Thrown by String methods to indicate that an index is either negative or greater than the size of the string. For some methods such as the charAt method, this exception also is thrown when the index is equal to the size of the string.</p>\n</blockquote>\n"},{"tags":[],"owner":{"account_id":3806833,"reputation":2145,"user_id":3159020,"accept_rate":44,"display_name":"XcodeNOOB"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1465463018,"creation_date":1465463018,"answer_id":37721408,"question_id":34266174,"body_markdown":"Basically, if you go out of bounds for an array or String, you will get the ArrayIndexOutOfBoundsException or the StringIndexOutOfBoundsException. \r\nFor a LinkedList though or some other Collection, you will get the more general IndexOutOfBoundsException. \r\n","title":"Difference between ArrayIndexOutOfBoundsException and IndexOutOfBoundsException?","body":"<p>Basically, if you go out of bounds for an array or String, you will get the ArrayIndexOutOfBoundsException or the StringIndexOutOfBoundsException. \nFor a LinkedList though or some other Collection, you will get the more general IndexOutOfBoundsException. </p>\n"}],"owner":{"account_id":6137477,"reputation":830,"user_id":4785824,"accept_rate":27,"display_name":"quintin"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":13313,"favorite_count":0,"down_vote_count":1,"up_vote_count":16,"answer_count":4,"score":15,"last_activity_date":1682847420,"creation_date":1450093306,"question_id":34266174,"body_markdown":"What are the use cases in which we should use `ArrayIndexOutOfBoundsException` and `IndexOutOfBoundsException one over another?","title":"Difference between ArrayIndexOutOfBoundsException and IndexOutOfBoundsException?","body":"<p>What are the use cases in which we should use <code>ArrayIndexOutOfBoundsException</code> and `IndexOutOfBoundsException one over another?</p>\n"}],"has_more":true,"quota_max":10000,"quota_remaining":9527,"page":465,"page_size":100}
