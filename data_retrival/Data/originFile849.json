{"items":[{"tags":["java","swagger","config","swagger-codegen"],"answers":[{"tags":[],"owner":{"account_id":2252907,"reputation":2755,"user_id":1984767,"accept_rate":50,"display_name":"Leviand"},"down_vote_count":0,"up_vote_count":11,"is_accepted":true,"score":11,"last_activity_date":1669653922,"creation_date":1530868696,"answer_id":51207021,"question_id":51206837,"body_markdown":"You can find them under its git page, under **General Configuration parameters**.\r\n\r\nThis is the link: https://github.com/swagger-api/swagger-codegen/blob/master/modules/swagger-codegen-maven-plugin/README.md#general-configuration-parameters\r\n\r\nThere are more also here:  https://github.com/swagger-api/swagger-codegen/issues/7795\r\n\r\nLooks like there&#39;s also a specific command to generate documentations. Try these:\r\n\r\n**General:**\r\n\r\n```sh\r\njava -jar modules/swagger-codegen-cli/target/swagger-codegen-cli.jar help generate\r\n```\r\n\r\n**Language-specific:**\r\n\r\n```sh\r\njava -jar modules/openapi-generator-cli/target/openapi-generator-cli.jar config-help -l java\r\n```","title":"SWAGGER swagger-codegen configuration","body":"<p>You can find them under its git page, under <strong>General Configuration parameters</strong>.</p>\n<p>This is the link: <a href=\"https://github.com/swagger-api/swagger-codegen/blob/master/modules/swagger-codegen-maven-plugin/README.md#general-configuration-parameters\" rel=\"nofollow noreferrer\">https://github.com/swagger-api/swagger-codegen/blob/master/modules/swagger-codegen-maven-plugin/README.md#general-configuration-parameters</a></p>\n<p>There are more also here:  <a href=\"https://github.com/swagger-api/swagger-codegen/issues/7795\" rel=\"nofollow noreferrer\">https://github.com/swagger-api/swagger-codegen/issues/7795</a></p>\n<p>Looks like there's also a specific command to generate documentations. Try these:</p>\n<p><strong>General:</strong></p>\n<pre class=\"lang-bash prettyprint-override\"><code>java -jar modules/swagger-codegen-cli/target/swagger-codegen-cli.jar help generate\n</code></pre>\n<p><strong>Language-specific:</strong></p>\n<pre class=\"lang-bash prettyprint-override\"><code>java -jar modules/openapi-generator-cli/target/openapi-generator-cli.jar config-help -l java\n</code></pre>\n"}],"owner":{"account_id":9224501,"reputation":148,"user_id":6852726,"display_name":"AH1N1"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":17627,"favorite_count":0,"down_vote_count":0,"up_vote_count":12,"accepted_answer_id":51207021,"answer_count":1,"score":12,"last_activity_date":1669653922,"creation_date":1530868173,"question_id":51206837,"body_markdown":"I came across a swagger configuration file like this:\r\n\r\n```json\r\n{\r\n\t&quot;modelPackage&quot;: &quot;aa&quot;,\r\n\t&quot;apiPackage&quot;: &quot;aa.model&quot;,\r\n\t&quot;invokerPackage&quot;: &quot;aa.model&quot;,\r\n\t&quot;bigDecimalAsString&quot;: true,\r\n\t&quot;hideGenerationTimestamp&quot;: true,\r\n\t&quot;withXml&quot;: false,\r\n\t&quot;serializableModel&quot;: false,\r\n\t&quot;dateLibrary&quot;: &quot;java8-localdatetime&quot;,\r\n\t&quot;java8&quot;: true,\r\n\t&quot;fullJavaUtil&quot;: false,\r\n\t&quot;useRuntimeException&quot;: false,\r\n\t&quot;library&quot;: &quot;resttemplate&quot;\r\n}\r\n```\r\n\r\nI wonder if there is any complete list of avaible parameters that could be used to configure swagger. I&#39;ve been searching for it on swagger official website but couldn&#39;t find all of the commands listed above. I&#39;ll be very grateful for providing any comprehensive sources or maybe even a mentioned list :)","title":"SWAGGER swagger-codegen configuration","body":"<p>I came across a swagger configuration file like this:</p>\n<pre class=\"lang-json prettyprint-override\"><code>{\n    &quot;modelPackage&quot;: &quot;aa&quot;,\n    &quot;apiPackage&quot;: &quot;aa.model&quot;,\n    &quot;invokerPackage&quot;: &quot;aa.model&quot;,\n    &quot;bigDecimalAsString&quot;: true,\n    &quot;hideGenerationTimestamp&quot;: true,\n    &quot;withXml&quot;: false,\n    &quot;serializableModel&quot;: false,\n    &quot;dateLibrary&quot;: &quot;java8-localdatetime&quot;,\n    &quot;java8&quot;: true,\n    &quot;fullJavaUtil&quot;: false,\n    &quot;useRuntimeException&quot;: false,\n    &quot;library&quot;: &quot;resttemplate&quot;\n}\n</code></pre>\n<p>I wonder if there is any complete list of avaible parameters that could be used to configure swagger. I've been searching for it on swagger official website but couldn't find all of the commands listed above. I'll be very grateful for providing any comprehensive sources or maybe even a mentioned list :)</p>\n"},{"tags":["java","maven","junit","module","log4j2"],"comments":[{"owner":{"account_id":16269349,"reputation":13452,"user_id":11748454,"display_name":"Piotr P. Karwasz"},"score":0,"creation_date":1669571592,"post_id":74592131,"comment_id":131666500,"body_markdown":"Since version 2.x is not fully modularized, can you check with the latest `3.0.0-SNAPSHOT`? It is available from the [Apache Repository](https://repository.apache.org/content/repositories/snapshots/) Maven repo.","body":"Since version 2.x is not fully modularized, can you check with the latest <code>3.0.0-SNAPSHOT</code>? It is available from the <a href=\"https://repository.apache.org/content/repositories/snapshots/\" rel=\"nofollow noreferrer\">Apache Repository</a> Maven repo."},{"owner":{"account_id":1211967,"reputation":7024,"user_id":1180351,"display_name":"Rob Spoor"},"score":0,"creation_date":1669575364,"post_id":74592131,"comment_id":131667395,"body_markdown":"Unfortunately, that gives me compiler errors because of incompatibilities between versions 2.x and 3.x. For instance, https://github.com/apache/logging-log4j2/blob/release-2.x/log4j-core/src/main/java/org/apache/logging/log4j/core/config/plugins/Plugin.java has moved to https://github.com/apache/logging-log4j2/blob/master/log4j-plugins/src/main/java/org/apache/logging/log4j/plugins/Plugin.java","body":"Unfortunately, that gives me compiler errors because of incompatibilities between versions 2.x and 3.x. For instance, <a href=\"https://github.com/apache/logging-log4j2/blob/release-2.x/log4j-core/src/main/java/org/apache/logging/log4j/core/config/plugins/Plugin.java\" rel=\"nofollow noreferrer\">github.com/apache/logging-log4j2/blob/release-2.x/log4j-core&zwnj;&#8203;/&hellip;</a> has moved to <a href=\"https://github.com/apache/logging-log4j2/blob/master/log4j-plugins/src/main/java/org/apache/logging/log4j/plugins/Plugin.java\" rel=\"nofollow noreferrer\">github.com/apache/logging-log4j2/blob/master/log4j-plugins/s&zwnj;&#8203;rc/&hellip;</a>"},{"owner":{"account_id":1891192,"reputation":8826,"user_id":1709216,"display_name":"rgoers"},"score":0,"creation_date":1669588810,"post_id":74592131,"comment_id":131670094,"body_markdown":"We would very much appreciate feedback on 3.0 as it is getting pretty near the point where we want to release it. Since the primary motivation for 3.0 was full JPMS support the earlier we get feedback the better. Plugins should NOT need to be recompiled but if you are recompiling you will have to update your source.","body":"We would very much appreciate feedback on 3.0 as it is getting pretty near the point where we want to release it. Since the primary motivation for 3.0 was full JPMS support the earlier we get feedback the better. Plugins should NOT need to be recompiled but if you are recompiling you will have to update your source."},{"owner":{"account_id":1211967,"reputation":7024,"user_id":1180351,"display_name":"Rob Spoor"},"score":0,"creation_date":1669623318,"post_id":74592131,"comment_id":131675522,"body_markdown":"@rgoers I now see that plugins have been split off to a separate module. However, with the package rename, that means that any existing plugins will (probably) not work. Was this tested?","body":"@rgoers I now see that plugins have been split off to a separate module. However, with the package rename, that means that any existing plugins will (probably) not work. Was this tested?"},{"owner":{"account_id":1211967,"reputation":7024,"user_id":1180351,"display_name":"Rob Spoor"},"score":0,"creation_date":1669654077,"post_id":74592131,"comment_id":131686099,"body_markdown":"I&#39;ve found a solution, see below. No idea why I had to do this for Log4j and logback but not reload4j, SLF4J or `java.logging` though.","body":"I&#39;ve found a solution, see below. No idea why I had to do this for Log4j and logback but not reload4j, SLF4J or <code>java.logging</code> though."},{"owner":{"account_id":1891192,"reputation":8826,"user_id":1709216,"display_name":"rgoers"},"score":0,"creation_date":1669748601,"post_id":74592131,"comment_id":131712132,"body_markdown":"@RobSpoor Yes,  it has been tested but it is certainly possible that with all the changes happening in 3.0 that something isn&#39;t working. If you run into any problems would love it if you could provide the Log4j team with a test that illustrates it.","body":"@RobSpoor Yes,  it has been tested but it is certainly possible that with all the changes happening in 3.0 that something isn&#39;t working. If you run into any problems would love it if you could provide the Log4j team with a test that illustrates it."},{"owner":{"account_id":1211967,"reputation":7024,"user_id":1180351,"display_name":"Rob Spoor"},"score":0,"creation_date":1670075923,"post_id":74592131,"comment_id":131791139,"body_markdown":"@rgoers I have tested this, and created https://issues.apache.org/jira/browse/LOG4J2-3640 with my findings.","body":"@rgoers I have tested this, and created <a href=\"https://issues.apache.org/jira/browse/LOG4J2-3640\" rel=\"nofollow noreferrer\">issues.apache.org/jira/browse/LOG4J2-3640</a> with my findings."}],"answers":[{"tags":[],"owner":{"account_id":1211967,"reputation":7024,"user_id":1180351,"display_name":"Rob Spoor"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1669653917,"creation_date":1669653917,"answer_id":74603859,"question_id":74592131,"body_markdown":"I&#39;ve solved the issue by adding `--add-modules` to the surefire plugin&#39;s `argLine`. I had to add not just Logj4, but also logback, which had the same problem. In addition, because I added some custom test appenders to the logging configuration, I had to open the package to these modules as well.\r\n\r\nThe result:\r\n```xml\r\n          &lt;plugin&gt;\r\n            &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n            &lt;artifactId&gt;maven-surefire-plugin&lt;/artifactId&gt;\r\n            &lt;configuration&gt;\r\n              &lt;argLine&gt;\r\n                --add-modules org.apache.logging.log4j\r\n                --add-modules ch.qos.logback.classic\r\n                --add-modules ch.qos.logback.core\r\n\r\n                --add-opens com.github.robtimus.junit.support/com.github.robtimus.junit.support.extension.testlogger=java.logging\r\n                --add-opens com.github.robtimus.junit.support/com.github.robtimus.junit.support.extension.testlogger=org.apache.logging.log4j.core\r\n                --add-opens com.github.robtimus.junit.support/com.github.robtimus.junit.support.extension.testlogger=ch.qos.logback.core\r\n                --add-opens com.github.robtimus.junit.support/com.github.robtimus.junit.support.extension.testlogger=ch.qos.reload4j\r\n\r\n                &lt;!-- other existing add-opens omitted --&gt;\r\n              &lt;/argLine&gt;\r\n            &lt;/configuration&gt;\r\n          &lt;/plugin&gt;\r\n```","title":"Maven: Log4j class not found","body":"<p>I've solved the issue by adding <code>--add-modules</code> to the surefire plugin's <code>argLine</code>. I had to add not just Logj4, but also logback, which had the same problem. In addition, because I added some custom test appenders to the logging configuration, I had to open the package to these modules as well.</p>\n<p>The result:</p>\n<pre class=\"lang-xml prettyprint-override\"><code>          &lt;plugin&gt;\n            &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n            &lt;artifactId&gt;maven-surefire-plugin&lt;/artifactId&gt;\n            &lt;configuration&gt;\n              &lt;argLine&gt;\n                --add-modules org.apache.logging.log4j\n                --add-modules ch.qos.logback.classic\n                --add-modules ch.qos.logback.core\n\n                --add-opens com.github.robtimus.junit.support/com.github.robtimus.junit.support.extension.testlogger=java.logging\n                --add-opens com.github.robtimus.junit.support/com.github.robtimus.junit.support.extension.testlogger=org.apache.logging.log4j.core\n                --add-opens com.github.robtimus.junit.support/com.github.robtimus.junit.support.extension.testlogger=ch.qos.logback.core\n                --add-opens com.github.robtimus.junit.support/com.github.robtimus.junit.support.extension.testlogger=ch.qos.reload4j\n\n                &lt;!-- other existing add-opens omitted --&gt;\n              &lt;/argLine&gt;\n            &lt;/configuration&gt;\n          &lt;/plugin&gt;\n</code></pre>\n"}],"owner":{"account_id":1211967,"reputation":7024,"user_id":1180351,"display_name":"Rob Spoor"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":478,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":74603859,"answer_count":1,"score":0,"last_activity_date":1669653917,"creation_date":1669569214,"question_id":74592131,"body_markdown":"I have a project for which I&#39;ve added an optional dependency to Log4j:\r\n```xml\r\n    &lt;dependency&gt;\r\n      &lt;groupId&gt;org.apache.logging.log4j&lt;/groupId&gt;\r\n      &lt;artifactId&gt;log4j-core&lt;/artifactId&gt;\r\n      &lt;version&gt;2.19.0&lt;/version&gt;\r\n      &lt;optional&gt;true&lt;/optional&gt;\r\n    &lt;/dependency&gt;\r\n```\r\n\r\nIn my module descriptor, I&#39;ve added requirements for both the implementation and the API:\r\n```java\r\n    requires static org.apache.logging.log4j;\r\n    requires static org.apache.logging.log4j.core;\r\n```\r\n\r\nIf I build the project as a pre-module project, the projects builds successfully. However, when I build  the project as a module, JUnit fails. While initially the error wasn&#39;t clear, adding `-e` to the Maven command shows the following error:\r\n\r\n```\r\nTestEngine with ID &#39;junit-jupiter&#39; failed to discover tests\r\norg.junit.platform.commons.JUnitException: TestEngine with ID &#39;junit-jupiter&#39; failed to discover tests\r\n        at org.junit.platform.launcher.core.EngineDiscoveryOrchestrator.discoverEngineRoot(EngineDiscoveryOrchestrator.java:160)\r\n        at org.junit.platform.launcher.core.EngineDiscoveryOrchestrator.discoverSafely(EngineDiscoveryOrchestrator.java:132)\r\n        at org.junit.platform.launcher.core.EngineDiscoveryOrchestrator.discover(EngineDiscoveryOrchestrator.java:107)\r\n        at org.junit.platform.launcher.core.EngineDiscoveryOrchestrator.discover(EngineDiscoveryOrchestrator.java:78)\r\n        at org.junit.platform.launcher.core.DefaultLauncher.discover(DefaultLauncher.java:110)\r\n        at org.junit.platform.launcher.core.DefaultLauncher.discover(DefaultLauncher.java:78)\r\n        at org.junit.platform.launcher.core.DefaultLauncherSession$DelegatingLauncher.discover(DefaultLauncherSession.java:81)\r\n        at org.apache.maven.surefire.junitplatform.LazyLauncher.discover(LazyLauncher.java:48)\r\n        at org.apache.maven.surefire.junitplatform.TestPlanScannerFilter.accept(TestPlanScannerFilter.java:56)\r\n        at org.apache.maven.surefire.api.util.DefaultScanResult.applyFilter(DefaultScanResult.java:102)\r\n        at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.scanClasspath(JUnitPlatformProvider.java:167)\r\n        at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invoke(JUnitPlatformProvider.java:139)\r\n        at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:456)\r\n        at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:169)\r\n        at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:595)\r\n        at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:581)\r\nCaused by: org.junit.platform.commons.JUnitException: ClassSelector [className = &#39;com.github.robtimus.junit.support.extension.testlogger.Log4jLoggerContextTest&#39;] resolution failed\r\n        at org.junit.platform.launcher.listeners.discovery.AbortOnFailureLauncherDiscoveryListener.selectorProcessed(AbortOnFailureLauncherDiscoveryListener.java:39)\r\n        at org.junit.platform.engine.support.discovery.EngineDiscoveryRequestResolution.resolveCompletely(EngineDiscoveryRequestResolution.java:103)\r\n        at org.junit.platform.engine.support.discovery.EngineDiscoveryRequestResolution.run(EngineDiscoveryRequestResolution.java:83)\r\n        at org.junit.platform.engine.support.discovery.EngineDiscoveryRequestResolver.resolve(EngineDiscoveryRequestResolver.java:113)\r\n        at org.junit.jupiter.engine.discovery.DiscoverySelectorResolver.resolveSelectors(DiscoverySelectorResolver.java:46)\r\n        at org.junit.jupiter.engine.JupiterTestEngine.discover(JupiterTestEngine.java:69)\r\n        at org.junit.platform.launcher.core.EngineDiscoveryOrchestrator.discoverEngineRoot(EngineDiscoveryOrchestrator.java:152)\r\n        ... 15 more\r\nCaused by: java.lang.NoClassDefFoundError: org/apache/logging/log4j/util/Supplier\r\n        at java.base/java.lang.ClassLoader.defineClass1(Native Method)\r\n        at java.base/java.lang.ClassLoader.defineClass(ClassLoader.java:1017)\r\n        at java.base/java.lang.ClassLoader.defineClass(ClassLoader.java:1096)\r\n        at java.base/java.security.SecureClassLoader.defineClass(SecureClassLoader.java:206)\r\n        at java.base/jdk.internal.loader.BuiltinClassLoader.defineClass(BuiltinClassLoader.java:759)\r\n        at java.base/jdk.internal.loader.BuiltinClassLoader.findClassInModuleOrNull(BuiltinClassLoader.java:680)\r\n        at java.base/jdk.internal.loader.BuiltinClassLoader.loadClassOrNull(BuiltinClassLoader.java:605)\r\n        at java.base/jdk.internal.loader.BuiltinClassLoader.loadClass(BuiltinClassLoader.java:579)\r\n        at java.base/jdk.internal.loader.ClassLoaders$AppClassLoader.loadClass(ClassLoaders.java:178)\r\n        at java.base/java.lang.ClassLoader.loadClass(ClassLoader.java:522)\r\n        at java.base/java.lang.Class.getDeclaredMethods0(Native Method)\r\n        at java.base/java.lang.Class.privateGetDeclaredMethods(Class.java:3166)\r\n        at java.base/java.lang.Class.getDeclaredMethods(Class.java:2309)\r\n        at org.junit.platform.commons@1.9.0/org.junit.platform.commons.util.ReflectionUtils.getDeclaredMethods(ReflectionUtils.java:1494)\r\n        at org.junit.platform.commons@1.9.0/org.junit.platform.commons.util.ReflectionUtils.findMethod(ReflectionUtils.java:1343)\r\n        at org.junit.platform.commons@1.9.0/org.junit.platform.commons.util.ReflectionUtils.isMethodPresent(ReflectionUtils.java:1244)\r\n        at org.junit.jupiter.engine.discovery.predicates.IsTestClassWithTests.hasTestOrTestFactoryOrTestTemplateMethods(IsTestClassWithTests.java:50)\r\n        at org.junit.jupiter.engine.discovery.predicates.IsTestClassWithTests.test(IsTestClassWithTests.java:46)\r\n        at org.junit.jupiter.engine.discovery.ClassSelectorResolver.resolve(ClassSelectorResolver.java:67)\r\n        at org.junit.platform.engine.support.discovery.EngineDiscoveryRequestResolution.lambda$resolve$2(EngineDiscoveryRequestResolution.java:135)\r\n        at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:195)\r\n        at java.base/java.util.ArrayList$ArrayListSpliterator.tryAdvance(ArrayList.java:1632)\r\n        at java.base/java.util.stream.ReferencePipeline.forEachWithCancel(ReferencePipeline.java:127)\r\n        at java.base/java.util.stream.AbstractPipeline.copyIntoWithCancel(AbstractPipeline.java:502)\r\n        at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:488)\r\n        at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:474)\r\n        at java.base/java.util.stream.FindOps$FindOp.evaluateSequential(FindOps.java:150)\r\n        at java.base/java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)\r\n        at java.base/java.util.stream.ReferencePipeline.findFirst(ReferencePipeline.java:543)\r\n        at org.junit.platform.engine.support.discovery.EngineDiscoveryRequestResolution.resolve(EngineDiscoveryRequestResolution.java:189)\r\n        at org.junit.platform.engine.support.discovery.EngineDiscoveryRequestResolution.resolve(EngineDiscoveryRequestResolution.java:126)\r\n        at org.junit.platform.engine.support.discovery.EngineDiscoveryRequestResolution.resolveCompletely(EngineDiscoveryRequestResolution.java:92)\r\n        ... 20 more\r\nCaused by: java.lang.ClassNotFoundException: org.apache.logging.log4j.util.Supplier\r\n        at java.base/jdk.internal.loader.BuiltinClassLoader.loadClass(BuiltinClassLoader.java:581)\r\n        at java.base/jdk.internal.loader.ClassLoaders$AppClassLoader.loadClass(ClassLoaders.java:178)\r\n        at java.base/java.lang.ClassLoader.loadClass(ClassLoader.java:522)\r\n        ... 52 more\r\n```\r\nUnfortunately, this is where I get stuck. When I add `-X` I see that both the API and core modules are added to the module path both when compiling and when running the tests. This is from the `surefireargs` file that&#39;s created:\r\n```\r\n--module-path\r\n&quot;D:\\\\Code\\\\Java\\\\github\\\\misc\\\\junit-support\\\\target\\\\classes;D:\\\\Programs\\\\Maven.repository\\\\org\\\\junit\\\\jupiter\\\\junit-jupiter-api\\\\5.9.0\\\\junit-jupiter-api-5.9.0.jar;D:\\\\Programs\\\\Maven.repository\\\\org\\\\junit\\\\platform\\\\junit-platform-commons\\\\1.9.0\\\\junit-platform-commons-1.9.0.jar;D:\\\\Programs\\\\Maven.repository\\\\org\\\\junit\\\\jupiter\\\\junit-jupiter-params\\\\5.9.0\\\\junit-jupiter-params-5.9.0.jar;D:\\\\Programs\\\\Maven.repository\\\\org\\\\hamcrest\\\\hamcrest\\\\2.2\\\\hamcrest-2.2.jar;D:\\\\Programs\\\\Maven.repository\\\\org\\\\mockito\\\\mockito-core\\\\4.8.0\\\\mockito-core-4.8.0.jar;D:\\\\Programs\\\\Maven.repository\\\\com\\\\github\\\\robtimus\\\\io-functions\\\\2.0\\\\io-functions-2.0.jar;D:\\\\Programs\\\\Maven.repository\\\\org\\\\apache\\\\logging\\\\log4j\\\\log4j-api\\\\2.19.0\\\\log4j-api-2.19.0.jar;D:\\\\Programs\\\\Maven.repository\\\\org\\\\apache\\\\logging\\\\log4j\\\\log4j-core\\\\2.19.0\\\\log4j-core-2.19.0.jar;D:\\\\Programs\\\\Maven.repository\\\\ch\\\\qos\\\\logback\\\\logback-classic\\\\1.4.5\\\\logback-classic-1.4.5.jar;D:\\\\Programs\\\\Maven.repository\\\\ch\\\\qos\\\\logback\\\\logback-core\\\\1.4.5\\\\logback-core-1.4.5.jar;D:\\\\Programs\\\\Maven.repository\\\\org\\\\slf4j\\\\slf4j-api\\\\2.0.4\\\\slf4j-api-2.0.4.jar;D:\\\\Programs\\\\Maven.repository\\\\ch\\\\qos\\\\reload4j\\\\reload4j\\\\1.2.23\\\\reload4j-1.2.23.jar;D:\\\\Programs\\\\Maven.repository\\\\org\\\\opentest4j\\\\opentest4j\\\\1.2.0\\\\opentest4j-1.2.0.jar;D:\\\\Programs\\\\Maven.repository\\\\org\\\\apiguardian\\\\apiguardian-api\\\\1.1.2\\\\apiguardian-api-1.1.2.jar&quot;\r\n--class-path\r\n&quot;D:\\\\Programs\\\\Maven.repository\\\\org\\\\apache\\\\maven\\\\surefire\\\\surefire-booter\\\\3.0.0-M7\\\\surefire-booter-3.0.0-M7.jar;D:\\\\Programs\\\\Maven.repository\\\\org\\\\apache\\\\maven\\\\surefire\\\\surefire-api\\\\3.0.0-M7\\\\surefire-api-3.0.0-M7.jar;D:\\\\Programs\\\\Maven.repository\\\\org\\\\apache\\\\maven\\\\surefire\\\\surefire-logger-api\\\\3.0.0-M7\\\\surefire-logger-api-3.0.0-M7.jar;D:\\\\Programs\\\\Maven.repository\\\\org\\\\apache\\\\maven\\\\surefire\\\\surefire-shared-utils\\\\3.0.0-M7\\\\surefire-shared-utils-3.0.0-M7.jar;D:\\\\Programs\\\\Maven.repository\\\\org\\\\apache\\\\maven\\\\surefire\\\\surefire-extensions-spi\\\\3.0.0-M7\\\\surefire-extensions-spi-3.0.0-M7.jar;D:\\\\Code\\\\Java\\\\github\\\\misc\\\\junit-support\\\\target\\\\test-classes;D:\\\\Programs\\\\Maven.repository\\\\org\\\\junit\\\\jupiter\\\\junit-jupiter\\\\5.9.0\\\\junit-jupiter-5.9.0.jar;D:\\\\Programs\\\\Maven.repository\\\\org\\\\junit\\\\jupiter\\\\junit-jupiter-engine\\\\5.9.0\\\\junit-jupiter-engine-5.9.0.jar;D:\\\\Programs\\\\Maven.repository\\\\org\\\\junit\\\\platform\\\\junit-platform-engine\\\\1.9.0\\\\junit-platform-engine-1.9.0.jar;D:\\\\Programs\\\\Maven.repository\\\\net\\\\bytebuddy\\\\byte-buddy\\\\1.12.14\\\\byte-buddy-1.12.14.jar;D:\\\\Programs\\\\Maven.repository\\\\net\\\\bytebuddy\\\\byte-buddy-agent\\\\1.12.14\\\\byte-buddy-agent-1.12.14.jar;D:\\\\Programs\\\\Maven.repository\\\\org\\\\objenesis\\\\objenesis\\\\3.2\\\\objenesis-3.2.jar;D:\\\\Programs\\\\Maven.repository\\\\commons-io\\\\commons-io\\\\2.11.0\\\\commons-io-2.11.0.jar;D:\\\\Programs\\\\Maven.repository\\\\org\\\\junit\\\\platform\\\\junit-platform-testkit\\\\1.9.0\\\\junit-platform-testkit-1.9.0.jar;D:\\\\Programs\\\\Maven.repository\\\\org\\\\assertj\\\\assertj-core\\\\3.23.1\\\\assertj-core-3.23.1.jar;D:\\\\Programs\\\\Maven.repository\\\\org\\\\junit\\\\platform\\\\junit-platform-launcher\\\\1.9.0\\\\junit-platform-launcher-1.9.0.jar;D:\\\\Programs\\\\Maven.repository\\\\org\\\\junit-pioneer\\\\junit-pioneer\\\\1.9.0\\\\junit-pioneer-1.9.0.jar;D:\\\\Programs\\\\Maven.repository\\\\org\\\\apache\\\\maven\\\\surefire\\\\surefire-junit-platform\\\\3.0.0-M7\\\\surefire-junit-platform-3.0.0-M7.jar;D:\\\\Programs\\\\Maven.repository\\\\org\\\\apache\\\\maven\\\\surefire\\\\common-java5\\\\3.0.0-M7\\\\common-java5-3.0.0-M7.jar&quot;\r\n--patch-module\r\ncom.github.robtimus.junit.support=&quot;D:\\\\Code\\\\Java\\\\github\\\\misc\\\\junit-support\\\\target\\\\test-classes&quot;\r\n--add-opens\r\ncom.github.robtimus.junit.support/com.github.robtimus.junit.support=ALL-UNNAMED\r\n--add-opens\r\ncom.github.robtimus.junit.support/com.github.robtimus.junit.support.examples.collections=ALL-UNNAMED\r\n--add-opens\r\ncom.github.robtimus.junit.support/com.github.robtimus.junit.support.examples.covariantreturn=ALL-UNNAMED\r\n--add-opens\r\ncom.github.robtimus.junit.support/com.github.robtimus.junit.support.examples.delegation=ALL-UNNAMED\r\n--add-opens\r\ncom.github.robtimus.junit.support/com.github.robtimus.junit.support.examples.io=ALL-UNNAMED\r\n--add-opens\r\ncom.github.robtimus.junit.support/com.github.robtimus.junit.support.extension=ALL-UNNAMED\r\n--add-opens\r\ncom.github.robtimus.junit.support/com.github.robtimus.junit.support.extension.testlogger=ALL-UNNAMED\r\n--add-opens\r\ncom.github.robtimus.junit.support/com.github.robtimus.junit.support.extension.testresource=ALL-UNNAMED\r\n--add-opens\r\ncom.github.robtimus.junit.support/com.github.robtimus.junit.support.params=ALL-UNNAMED\r\n--add-opens\r\ncom.github.robtimus.junit.support/com.github.robtimus.junit.support.test.collections=ALL-UNNAMED\r\n--add-modules\r\ncom.github.robtimus.junit.support\r\n--add-reads\r\ncom.github.robtimus.junit.support=ALL-UNNAMED\r\norg.apache.maven.surefire.booter.ForkedBooter\r\n```\r\nI&#39;ve also tried opening the package of the class, but then I get the following warning:\r\n```\r\nWARNING: Unknown module: org.apache.logging.log4j specified to --add-opens\r\n```\r\nSo even though both Log4j modules are added to the module path, and the `org.apache.logging.log4j.util.Supplier` is present in the JAR file, it can&#39;t be found when running the tests. This isn&#39;t even localized to my local machine; the GitHub action also fails: https://github.com/robtimus/junit-support/actions/runs/3558874573/jobs/5977845973\r\n\r\nEdit: adding the following plugin doesn&#39;t fix the issue (the plugin already had the source and target set to 11):\r\n```xml\r\n          &lt;plugin&gt;\r\n            &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n            &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\r\n            &lt;configuration&gt;\r\n              &lt;release&gt;11&lt;/release&gt;\r\n            &lt;/configuration&gt;\r\n          &lt;/plugin&gt;\r\n```","title":"Maven: Log4j class not found","body":"<p>I have a project for which I've added an optional dependency to Log4j:</p>\n<pre class=\"lang-xml prettyprint-override\"><code>    &lt;dependency&gt;\n      &lt;groupId&gt;org.apache.logging.log4j&lt;/groupId&gt;\n      &lt;artifactId&gt;log4j-core&lt;/artifactId&gt;\n      &lt;version&gt;2.19.0&lt;/version&gt;\n      &lt;optional&gt;true&lt;/optional&gt;\n    &lt;/dependency&gt;\n</code></pre>\n<p>In my module descriptor, I've added requirements for both the implementation and the API:</p>\n<pre class=\"lang-java prettyprint-override\"><code>    requires static org.apache.logging.log4j;\n    requires static org.apache.logging.log4j.core;\n</code></pre>\n<p>If I build the project as a pre-module project, the projects builds successfully. However, when I build  the project as a module, JUnit fails. While initially the error wasn't clear, adding <code>-e</code> to the Maven command shows the following error:</p>\n<pre><code>TestEngine with ID 'junit-jupiter' failed to discover tests\norg.junit.platform.commons.JUnitException: TestEngine with ID 'junit-jupiter' failed to discover tests\n        at org.junit.platform.launcher.core.EngineDiscoveryOrchestrator.discoverEngineRoot(EngineDiscoveryOrchestrator.java:160)\n        at org.junit.platform.launcher.core.EngineDiscoveryOrchestrator.discoverSafely(EngineDiscoveryOrchestrator.java:132)\n        at org.junit.platform.launcher.core.EngineDiscoveryOrchestrator.discover(EngineDiscoveryOrchestrator.java:107)\n        at org.junit.platform.launcher.core.EngineDiscoveryOrchestrator.discover(EngineDiscoveryOrchestrator.java:78)\n        at org.junit.platform.launcher.core.DefaultLauncher.discover(DefaultLauncher.java:110)\n        at org.junit.platform.launcher.core.DefaultLauncher.discover(DefaultLauncher.java:78)\n        at org.junit.platform.launcher.core.DefaultLauncherSession$DelegatingLauncher.discover(DefaultLauncherSession.java:81)\n        at org.apache.maven.surefire.junitplatform.LazyLauncher.discover(LazyLauncher.java:48)\n        at org.apache.maven.surefire.junitplatform.TestPlanScannerFilter.accept(TestPlanScannerFilter.java:56)\n        at org.apache.maven.surefire.api.util.DefaultScanResult.applyFilter(DefaultScanResult.java:102)\n        at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.scanClasspath(JUnitPlatformProvider.java:167)\n        at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invoke(JUnitPlatformProvider.java:139)\n        at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:456)\n        at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:169)\n        at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:595)\n        at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:581)\nCaused by: org.junit.platform.commons.JUnitException: ClassSelector [className = 'com.github.robtimus.junit.support.extension.testlogger.Log4jLoggerContextTest'] resolution failed\n        at org.junit.platform.launcher.listeners.discovery.AbortOnFailureLauncherDiscoveryListener.selectorProcessed(AbortOnFailureLauncherDiscoveryListener.java:39)\n        at org.junit.platform.engine.support.discovery.EngineDiscoveryRequestResolution.resolveCompletely(EngineDiscoveryRequestResolution.java:103)\n        at org.junit.platform.engine.support.discovery.EngineDiscoveryRequestResolution.run(EngineDiscoveryRequestResolution.java:83)\n        at org.junit.platform.engine.support.discovery.EngineDiscoveryRequestResolver.resolve(EngineDiscoveryRequestResolver.java:113)\n        at org.junit.jupiter.engine.discovery.DiscoverySelectorResolver.resolveSelectors(DiscoverySelectorResolver.java:46)\n        at org.junit.jupiter.engine.JupiterTestEngine.discover(JupiterTestEngine.java:69)\n        at org.junit.platform.launcher.core.EngineDiscoveryOrchestrator.discoverEngineRoot(EngineDiscoveryOrchestrator.java:152)\n        ... 15 more\nCaused by: java.lang.NoClassDefFoundError: org/apache/logging/log4j/util/Supplier\n        at java.base/java.lang.ClassLoader.defineClass1(Native Method)\n        at java.base/java.lang.ClassLoader.defineClass(ClassLoader.java:1017)\n        at java.base/java.lang.ClassLoader.defineClass(ClassLoader.java:1096)\n        at java.base/java.security.SecureClassLoader.defineClass(SecureClassLoader.java:206)\n        at java.base/jdk.internal.loader.BuiltinClassLoader.defineClass(BuiltinClassLoader.java:759)\n        at java.base/jdk.internal.loader.BuiltinClassLoader.findClassInModuleOrNull(BuiltinClassLoader.java:680)\n        at java.base/jdk.internal.loader.BuiltinClassLoader.loadClassOrNull(BuiltinClassLoader.java:605)\n        at java.base/jdk.internal.loader.BuiltinClassLoader.loadClass(BuiltinClassLoader.java:579)\n        at java.base/jdk.internal.loader.ClassLoaders$AppClassLoader.loadClass(ClassLoaders.java:178)\n        at java.base/java.lang.ClassLoader.loadClass(ClassLoader.java:522)\n        at java.base/java.lang.Class.getDeclaredMethods0(Native Method)\n        at java.base/java.lang.Class.privateGetDeclaredMethods(Class.java:3166)\n        at java.base/java.lang.Class.getDeclaredMethods(Class.java:2309)\n        at org.junit.platform.commons@1.9.0/org.junit.platform.commons.util.ReflectionUtils.getDeclaredMethods(ReflectionUtils.java:1494)\n        at org.junit.platform.commons@1.9.0/org.junit.platform.commons.util.ReflectionUtils.findMethod(ReflectionUtils.java:1343)\n        at org.junit.platform.commons@1.9.0/org.junit.platform.commons.util.ReflectionUtils.isMethodPresent(ReflectionUtils.java:1244)\n        at org.junit.jupiter.engine.discovery.predicates.IsTestClassWithTests.hasTestOrTestFactoryOrTestTemplateMethods(IsTestClassWithTests.java:50)\n        at org.junit.jupiter.engine.discovery.predicates.IsTestClassWithTests.test(IsTestClassWithTests.java:46)\n        at org.junit.jupiter.engine.discovery.ClassSelectorResolver.resolve(ClassSelectorResolver.java:67)\n        at org.junit.platform.engine.support.discovery.EngineDiscoveryRequestResolution.lambda$resolve$2(EngineDiscoveryRequestResolution.java:135)\n        at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:195)\n        at java.base/java.util.ArrayList$ArrayListSpliterator.tryAdvance(ArrayList.java:1632)\n        at java.base/java.util.stream.ReferencePipeline.forEachWithCancel(ReferencePipeline.java:127)\n        at java.base/java.util.stream.AbstractPipeline.copyIntoWithCancel(AbstractPipeline.java:502)\n        at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:488)\n        at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:474)\n        at java.base/java.util.stream.FindOps$FindOp.evaluateSequential(FindOps.java:150)\n        at java.base/java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)\n        at java.base/java.util.stream.ReferencePipeline.findFirst(ReferencePipeline.java:543)\n        at org.junit.platform.engine.support.discovery.EngineDiscoveryRequestResolution.resolve(EngineDiscoveryRequestResolution.java:189)\n        at org.junit.platform.engine.support.discovery.EngineDiscoveryRequestResolution.resolve(EngineDiscoveryRequestResolution.java:126)\n        at org.junit.platform.engine.support.discovery.EngineDiscoveryRequestResolution.resolveCompletely(EngineDiscoveryRequestResolution.java:92)\n        ... 20 more\nCaused by: java.lang.ClassNotFoundException: org.apache.logging.log4j.util.Supplier\n        at java.base/jdk.internal.loader.BuiltinClassLoader.loadClass(BuiltinClassLoader.java:581)\n        at java.base/jdk.internal.loader.ClassLoaders$AppClassLoader.loadClass(ClassLoaders.java:178)\n        at java.base/java.lang.ClassLoader.loadClass(ClassLoader.java:522)\n        ... 52 more\n</code></pre>\n<p>Unfortunately, this is where I get stuck. When I add <code>-X</code> I see that both the API and core modules are added to the module path both when compiling and when running the tests. This is from the <code>surefireargs</code> file that's created:</p>\n<pre><code>--module-path\n&quot;D:\\\\Code\\\\Java\\\\github\\\\misc\\\\junit-support\\\\target\\\\classes;D:\\\\Programs\\\\Maven.repository\\\\org\\\\junit\\\\jupiter\\\\junit-jupiter-api\\\\5.9.0\\\\junit-jupiter-api-5.9.0.jar;D:\\\\Programs\\\\Maven.repository\\\\org\\\\junit\\\\platform\\\\junit-platform-commons\\\\1.9.0\\\\junit-platform-commons-1.9.0.jar;D:\\\\Programs\\\\Maven.repository\\\\org\\\\junit\\\\jupiter\\\\junit-jupiter-params\\\\5.9.0\\\\junit-jupiter-params-5.9.0.jar;D:\\\\Programs\\\\Maven.repository\\\\org\\\\hamcrest\\\\hamcrest\\\\2.2\\\\hamcrest-2.2.jar;D:\\\\Programs\\\\Maven.repository\\\\org\\\\mockito\\\\mockito-core\\\\4.8.0\\\\mockito-core-4.8.0.jar;D:\\\\Programs\\\\Maven.repository\\\\com\\\\github\\\\robtimus\\\\io-functions\\\\2.0\\\\io-functions-2.0.jar;D:\\\\Programs\\\\Maven.repository\\\\org\\\\apache\\\\logging\\\\log4j\\\\log4j-api\\\\2.19.0\\\\log4j-api-2.19.0.jar;D:\\\\Programs\\\\Maven.repository\\\\org\\\\apache\\\\logging\\\\log4j\\\\log4j-core\\\\2.19.0\\\\log4j-core-2.19.0.jar;D:\\\\Programs\\\\Maven.repository\\\\ch\\\\qos\\\\logback\\\\logback-classic\\\\1.4.5\\\\logback-classic-1.4.5.jar;D:\\\\Programs\\\\Maven.repository\\\\ch\\\\qos\\\\logback\\\\logback-core\\\\1.4.5\\\\logback-core-1.4.5.jar;D:\\\\Programs\\\\Maven.repository\\\\org\\\\slf4j\\\\slf4j-api\\\\2.0.4\\\\slf4j-api-2.0.4.jar;D:\\\\Programs\\\\Maven.repository\\\\ch\\\\qos\\\\reload4j\\\\reload4j\\\\1.2.23\\\\reload4j-1.2.23.jar;D:\\\\Programs\\\\Maven.repository\\\\org\\\\opentest4j\\\\opentest4j\\\\1.2.0\\\\opentest4j-1.2.0.jar;D:\\\\Programs\\\\Maven.repository\\\\org\\\\apiguardian\\\\apiguardian-api\\\\1.1.2\\\\apiguardian-api-1.1.2.jar&quot;\n--class-path\n&quot;D:\\\\Programs\\\\Maven.repository\\\\org\\\\apache\\\\maven\\\\surefire\\\\surefire-booter\\\\3.0.0-M7\\\\surefire-booter-3.0.0-M7.jar;D:\\\\Programs\\\\Maven.repository\\\\org\\\\apache\\\\maven\\\\surefire\\\\surefire-api\\\\3.0.0-M7\\\\surefire-api-3.0.0-M7.jar;D:\\\\Programs\\\\Maven.repository\\\\org\\\\apache\\\\maven\\\\surefire\\\\surefire-logger-api\\\\3.0.0-M7\\\\surefire-logger-api-3.0.0-M7.jar;D:\\\\Programs\\\\Maven.repository\\\\org\\\\apache\\\\maven\\\\surefire\\\\surefire-shared-utils\\\\3.0.0-M7\\\\surefire-shared-utils-3.0.0-M7.jar;D:\\\\Programs\\\\Maven.repository\\\\org\\\\apache\\\\maven\\\\surefire\\\\surefire-extensions-spi\\\\3.0.0-M7\\\\surefire-extensions-spi-3.0.0-M7.jar;D:\\\\Code\\\\Java\\\\github\\\\misc\\\\junit-support\\\\target\\\\test-classes;D:\\\\Programs\\\\Maven.repository\\\\org\\\\junit\\\\jupiter\\\\junit-jupiter\\\\5.9.0\\\\junit-jupiter-5.9.0.jar;D:\\\\Programs\\\\Maven.repository\\\\org\\\\junit\\\\jupiter\\\\junit-jupiter-engine\\\\5.9.0\\\\junit-jupiter-engine-5.9.0.jar;D:\\\\Programs\\\\Maven.repository\\\\org\\\\junit\\\\platform\\\\junit-platform-engine\\\\1.9.0\\\\junit-platform-engine-1.9.0.jar;D:\\\\Programs\\\\Maven.repository\\\\net\\\\bytebuddy\\\\byte-buddy\\\\1.12.14\\\\byte-buddy-1.12.14.jar;D:\\\\Programs\\\\Maven.repository\\\\net\\\\bytebuddy\\\\byte-buddy-agent\\\\1.12.14\\\\byte-buddy-agent-1.12.14.jar;D:\\\\Programs\\\\Maven.repository\\\\org\\\\objenesis\\\\objenesis\\\\3.2\\\\objenesis-3.2.jar;D:\\\\Programs\\\\Maven.repository\\\\commons-io\\\\commons-io\\\\2.11.0\\\\commons-io-2.11.0.jar;D:\\\\Programs\\\\Maven.repository\\\\org\\\\junit\\\\platform\\\\junit-platform-testkit\\\\1.9.0\\\\junit-platform-testkit-1.9.0.jar;D:\\\\Programs\\\\Maven.repository\\\\org\\\\assertj\\\\assertj-core\\\\3.23.1\\\\assertj-core-3.23.1.jar;D:\\\\Programs\\\\Maven.repository\\\\org\\\\junit\\\\platform\\\\junit-platform-launcher\\\\1.9.0\\\\junit-platform-launcher-1.9.0.jar;D:\\\\Programs\\\\Maven.repository\\\\org\\\\junit-pioneer\\\\junit-pioneer\\\\1.9.0\\\\junit-pioneer-1.9.0.jar;D:\\\\Programs\\\\Maven.repository\\\\org\\\\apache\\\\maven\\\\surefire\\\\surefire-junit-platform\\\\3.0.0-M7\\\\surefire-junit-platform-3.0.0-M7.jar;D:\\\\Programs\\\\Maven.repository\\\\org\\\\apache\\\\maven\\\\surefire\\\\common-java5\\\\3.0.0-M7\\\\common-java5-3.0.0-M7.jar&quot;\n--patch-module\ncom.github.robtimus.junit.support=&quot;D:\\\\Code\\\\Java\\\\github\\\\misc\\\\junit-support\\\\target\\\\test-classes&quot;\n--add-opens\ncom.github.robtimus.junit.support/com.github.robtimus.junit.support=ALL-UNNAMED\n--add-opens\ncom.github.robtimus.junit.support/com.github.robtimus.junit.support.examples.collections=ALL-UNNAMED\n--add-opens\ncom.github.robtimus.junit.support/com.github.robtimus.junit.support.examples.covariantreturn=ALL-UNNAMED\n--add-opens\ncom.github.robtimus.junit.support/com.github.robtimus.junit.support.examples.delegation=ALL-UNNAMED\n--add-opens\ncom.github.robtimus.junit.support/com.github.robtimus.junit.support.examples.io=ALL-UNNAMED\n--add-opens\ncom.github.robtimus.junit.support/com.github.robtimus.junit.support.extension=ALL-UNNAMED\n--add-opens\ncom.github.robtimus.junit.support/com.github.robtimus.junit.support.extension.testlogger=ALL-UNNAMED\n--add-opens\ncom.github.robtimus.junit.support/com.github.robtimus.junit.support.extension.testresource=ALL-UNNAMED\n--add-opens\ncom.github.robtimus.junit.support/com.github.robtimus.junit.support.params=ALL-UNNAMED\n--add-opens\ncom.github.robtimus.junit.support/com.github.robtimus.junit.support.test.collections=ALL-UNNAMED\n--add-modules\ncom.github.robtimus.junit.support\n--add-reads\ncom.github.robtimus.junit.support=ALL-UNNAMED\norg.apache.maven.surefire.booter.ForkedBooter\n</code></pre>\n<p>I've also tried opening the package of the class, but then I get the following warning:</p>\n<pre><code>WARNING: Unknown module: org.apache.logging.log4j specified to --add-opens\n</code></pre>\n<p>So even though both Log4j modules are added to the module path, and the <code>org.apache.logging.log4j.util.Supplier</code> is present in the JAR file, it can't be found when running the tests. This isn't even localized to my local machine; the GitHub action also fails: <a href=\"https://github.com/robtimus/junit-support/actions/runs/3558874573/jobs/5977845973\" rel=\"nofollow noreferrer\">https://github.com/robtimus/junit-support/actions/runs/3558874573/jobs/5977845973</a></p>\n<p>Edit: adding the following plugin doesn't fix the issue (the plugin already had the source and target set to 11):</p>\n<pre class=\"lang-xml prettyprint-override\"><code>          &lt;plugin&gt;\n            &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n            &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\n            &lt;configuration&gt;\n              &lt;release&gt;11&lt;/release&gt;\n            &lt;/configuration&gt;\n          &lt;/plugin&gt;\n</code></pre>\n"},{"tags":["java","security","gradle","artifactory"],"answers":[{"tags":[],"owner":{"account_id":23802628,"reputation":510,"user_id":17812607,"display_name":"Gajapathi Kimidi"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1669545176,"creation_date":1669545176,"answer_id":74589245,"question_id":74589189,"body_markdown":"You can configure JFrog url and credentials from Dashboard &gt; Manage Jenkins &gt; Configure System &gt; Fill the details in the JFrog section. [![enter image description here][1]][1]\r\nLater you can use this configuration as \r\nserver = Artifactory.server &#39;myartifactory&#39;. In this case, credentials will not be visible in the script. \r\n\r\n  [1]: https://i.stack.imgur.com/sxlRe.jpg","title":"How to hide the artifactory_password for developers in a project","body":"<p>You can configure JFrog url and credentials from Dashboard &gt; Manage Jenkins &gt; Configure System &gt; Fill the details in the JFrog section. <a href=\"https://i.stack.imgur.com/sxlRe.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/sxlRe.jpg\" alt=\"enter image description here\" /></a>\nLater you can use this configuration as\nserver = Artifactory.server 'myartifactory'. In this case, credentials will not be visible in the script.</p>\n"}],"owner":{"account_id":143734,"reputation":751,"user_id":352290,"accept_rate":100,"display_name":"user352290"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":257,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1669653833,"creation_date":1669544543,"question_id":74589189,"body_markdown":"We store/retrieve java libraries from JFrog Artifactory server. We add the following lines in ~/.gradle/gradle.properties to pull project specific private java libraries. How to hide the artifactory_password for developers in a project, can this be globally defined\r\n\r\n    # artifactory_user=bar@foo.com\r\n    # artifactory_password=\r\n    # artifactory_url=https://foo.jfrog.io/artifactory","title":"How to hide the artifactory_password for developers in a project","body":"<p>We store/retrieve java libraries from JFrog Artifactory server. We add the following lines in ~/.gradle/gradle.properties to pull project specific private java libraries. How to hide the artifactory_password for developers in a project, can this be globally defined</p>\n<pre><code># artifactory_user=bar@foo.com\n# artifactory_password=\n# artifactory_url=https://foo.jfrog.io/artifactory\n</code></pre>\n"},{"tags":["java","macos","file","io"],"comments":[{"owner":{"account_id":960307,"reputation":107861,"user_id":984823,"display_name":"Joop Eggen"},"score":0,"creation_date":1669653780,"post_id":74603735,"comment_id":131685991,"body_markdown":"Unix style paths ` /user/vinayak/...` and Unix file system `UnixFileSystemProvider` is strange on Windows. WSL?","body":"Unix style paths ` /user/vinayak/...` and Unix file system <code>UnixFileSystemProvider</code> is strange on Windows. WSL?"},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1669656278,"post_id":74603735,"comment_id":131686892,"body_markdown":"I&#39;d rather use [this](https://docs.oracle.com/en/java/javase/18/docs/api/java.base/java/nio/file/Paths.html#get(java.lang.String,java.lang.String...))","body":"I&#39;d rather use <a href=\"https://docs.oracle.com/en/java/javase/18/docs/api/java.base/java/nio/file/Paths.html#get(java.lang.String,java.lang.String...)\" rel=\"nofollow noreferrer\">this</a>"}],"owner":{"account_id":22883760,"reputation":101,"user_id":17024974,"display_name":"Vinayak"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":115,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1669653698,"creation_date":1669653316,"question_id":74603735,"body_markdown":"I am moving a directory from one path to another path. I&#39;m using the following code to do that\r\n\r\n    import java.nio.*;    \r\n    Path temp = Files.move(Paths.get(&quot;/user/vinayak/source&quot;),Paths.get(&quot;/user/vinayak/destination&quot;)\r\n                         , StandardCopyOption.REPLACE_EXISTING);\r\n\r\nDestination directory is creating at runtime. It works fine on a MAC machine but when I tried it on Windows then I&#39;m getting the following error\r\n\r\n    java.nio.file.AccessDeniedException: /user/vinayak/source -&gt; /user/vinayak/destination        at java.base/sun.nio.fs.UnixException.translateToIOException(UnixException.java:90)\r\n            at java.base/sun.nio.fs.UnixException.rethrowAsIOException(UnixException.java:111)\r\n            at java.base/sun.nio.fs.UnixCopyFile.move(UnixCopyFile.java:478)\r\n            at java.base/sun.nio.fs.UnixFileSystemProvider.move(UnixFileSystemProvider.java:267)\r\n            at java.base/java.nio.file.Files.move(Files.java:1422)\r\n            at scripts.DataMigratorScript.performImport(DataMigratorScript.java:234)\r\n            at scripts.DataMigratorScript.main(DataMigratorScript.java:78)\r\n\r\n","title":"Files.move works fine with MAC OS but giving below error in Windows machine","body":"<p>I am moving a directory from one path to another path. I'm using the following code to do that</p>\n<pre><code>import java.nio.*;    \nPath temp = Files.move(Paths.get(&quot;/user/vinayak/source&quot;),Paths.get(&quot;/user/vinayak/destination&quot;)\n                     , StandardCopyOption.REPLACE_EXISTING);\n</code></pre>\n<p>Destination directory is creating at runtime. It works fine on a MAC machine but when I tried it on Windows then I'm getting the following error</p>\n<pre><code>java.nio.file.AccessDeniedException: /user/vinayak/source -&gt; /user/vinayak/destination        at java.base/sun.nio.fs.UnixException.translateToIOException(UnixException.java:90)\n        at java.base/sun.nio.fs.UnixException.rethrowAsIOException(UnixException.java:111)\n        at java.base/sun.nio.fs.UnixCopyFile.move(UnixCopyFile.java:478)\n        at java.base/sun.nio.fs.UnixFileSystemProvider.move(UnixFileSystemProvider.java:267)\n        at java.base/java.nio.file.Files.move(Files.java:1422)\n        at scripts.DataMigratorScript.performImport(DataMigratorScript.java:234)\n        at scripts.DataMigratorScript.main(DataMigratorScript.java:78)\n</code></pre>\n"},{"tags":["java","android","android-volley"],"comments":[{"owner":{"account_id":6137419,"reputation":798,"user_id":4785772,"accept_rate":50,"display_name":"Tausif"},"score":0,"creation_date":1621522598,"post_id":67622711,"comment_id":119526821,"body_markdown":"please show us your onResponse method code.","body":"please show us your onResponse method code."},{"owner":{"account_id":15973632,"reputation":3,"user_id":11527082,"display_name":"Farhad Bhai"},"score":0,"creation_date":1621598968,"post_id":67622711,"comment_id":119550831,"body_markdown":"i posted it, Check it","body":"i posted it, Check it"}],"owner":{"account_id":15973632,"reputation":3,"user_id":11527082,"display_name":"Farhad Bhai"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":120,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1669653476,"creation_date":1621521914,"question_id":67622711,"body_markdown":"I&#39;m getting string values from a web and storing them in a arraylist in onResponse method but when I access that list outside of the onResponse method it shows empty. I know in asyntask we simply get it in main thread like result = ayncClassName.execute(url).get(); So how to get in volley Any suggestions as I&#39;m beginner in android.\r\n  \r\nHere&#39;s the code!\r\n\r\n    stringRequest = new StringRequest(Request.Method.GET, url, new Response.Listener&lt;String&gt;() {\r\n            @Override\r\n            public void onResponse(String response) {\r\n                String[] result = response.split(&quot;&lt;div id=\\&quot;sidebar\\&quot;&gt;&quot;);\r\n                Pattern p = Pattern.compile(&quot;src=\\&quot;(.*?)\\&quot;&quot;);\r\n                Matcher m = p.matcher(result[0]);\r\n                while (m.find())\r\n                {\r\n                    urls.add(m.group(1));\r\n                }\r\n                p = Pattern.compile(&quot;alt=\\&quot;(.*?)\\&quot;&quot;);\r\n                m = p.matcher(result[0]);\r\n                while (m.find())\r\n                {\r\n                    names.add(m.group(1));\r\n                }\r\n\r\n                requestQueue.stop();\r\n            }\r\n        }, new Response.ErrorListener() {\r\n            @Override\r\n            public void onErrorResponse(VolleyError error) {\r\n                textView.setText(&quot;Error&quot;);\r\n                error.printStackTrace();\r\n            }\r\n        });\r\n\r\n        Random random = new Random();\r\n        cs = random.nextInt(urls.size()); //got error here because arraylist is empty! \r\n        imageRequest = new ImageRequest(urls.get(cs), new Response.Listener&lt;Bitmap&gt;() {\r\n            @Override\r\n            public void onResponse(Bitmap response) {\r\n                imageView.setImageBitmap(response);\r\n                requestQueue.stop();\r\n            }\r\n        }, 0, 0, ImageView.ScaleType.CENTER_CROP,null, new Response.ErrorListener() {\r\n            @Override\r\n            public void onErrorResponse(VolleyError error) {\r\n                textView.setText(&quot;Error&quot;);\r\n                error.printStackTrace();\r\n            }\r\n        });\r\n        requestQueue.add(stringRequest);\r\n        requestQueue.add(imageRequest);\r\n    ","title":"How to return or get response value from Volley onResponse method?","body":"<p>I'm getting string values from a web and storing them in a arraylist in onResponse method but when I access that list outside of the onResponse method it shows empty. I know in asyntask we simply get it in main thread like result = ayncClassName.execute(url).get(); So how to get in volley Any suggestions as I'm beginner in android.</p>\n<p>Here's the code!</p>\n<pre><code>stringRequest = new StringRequest(Request.Method.GET, url, new Response.Listener&lt;String&gt;() {\n        @Override\n        public void onResponse(String response) {\n            String[] result = response.split(&quot;&lt;div id=\\&quot;sidebar\\&quot;&gt;&quot;);\n            Pattern p = Pattern.compile(&quot;src=\\&quot;(.*?)\\&quot;&quot;);\n            Matcher m = p.matcher(result[0]);\n            while (m.find())\n            {\n                urls.add(m.group(1));\n            }\n            p = Pattern.compile(&quot;alt=\\&quot;(.*?)\\&quot;&quot;);\n            m = p.matcher(result[0]);\n            while (m.find())\n            {\n                names.add(m.group(1));\n            }\n\n            requestQueue.stop();\n        }\n    }, new Response.ErrorListener() {\n        @Override\n        public void onErrorResponse(VolleyError error) {\n            textView.setText(&quot;Error&quot;);\n            error.printStackTrace();\n        }\n    });\n\n    Random random = new Random();\n    cs = random.nextInt(urls.size()); //got error here because arraylist is empty! \n    imageRequest = new ImageRequest(urls.get(cs), new Response.Listener&lt;Bitmap&gt;() {\n        @Override\n        public void onResponse(Bitmap response) {\n            imageView.setImageBitmap(response);\n            requestQueue.stop();\n        }\n    }, 0, 0, ImageView.ScaleType.CENTER_CROP,null, new Response.ErrorListener() {\n        @Override\n        public void onErrorResponse(VolleyError error) {\n            textView.setText(&quot;Error&quot;);\n            error.printStackTrace();\n        }\n    });\n    requestQueue.add(stringRequest);\n    requestQueue.add(imageRequest);\n</code></pre>\n"},{"tags":["java","json","spring-mvc","servlets","filter"],"comments":[{"owner":{"display_name":"user180100"},"score":0,"creation_date":1507615406,"post_id":46659538,"comment_id":80267745,"body_markdown":"Possible duplicates: https://stackoverflow.com/questions/14736328/looking-for-an-example-for-inserting-content-into-the-response-using-a-servlet-f, https://stackoverflow.com/questions/34439260/replace-response-body-using-filter, https://stackoverflow.com/questions/24452318/how-to-alter-the-body-of-a-http-response-in-a-filter","body":"Possible duplicates: <a href=\"https://stackoverflow.com/questions/14736328/looking-for-an-example-for-inserting-content-into-the-response-using-a-servlet-f\" title=\"looking for an example for inserting content into the response using a servlet f\">stackoverflow.com/questions/14736328/&hellip;</a>, <a href=\"https://stackoverflow.com/questions/34439260/replace-response-body-using-filter\" title=\"replace response body using filter\">stackoverflow.com/questions/34439260/&hellip;</a>, <a href=\"https://stackoverflow.com/questions/24452318/how-to-alter-the-body-of-a-http-response-in-a-filter\" title=\"how to alter the body of a http response in a filter\">stackoverflow.com/questions/24452318/&hellip;</a>"}],"answers":[{"tags":[],"owner":{"account_id":12091473,"reputation":66,"user_id":8837439,"display_name":"Rakshith Shetty"},"down_vote_count":0,"up_vote_count":5,"is_accepted":true,"score":5,"last_activity_date":1509019082,"creation_date":1509019082,"answer_id":46953737,"question_id":46659538,"body_markdown":"I feel below code snippet should work.The problem with above is it is getting appended to the existing data instead of rewriting. We need to create a copy with where the data is stored and copy after manipulating to the original ServletResponse. Hope below code snippet solve your issue.\r\n\r\n\r\nbelow is the main do filter method-\r\n\r\n    \r\n\tpublic void doFilter(ServletRequest request, ServletResponse response, FilterChain chain) throws IOException, ServletException {\r\n\t\t\r\n\t\tServletResponseWrapperCopier capturingResponseWrapper = new ServletResponseWrapperCopier(\r\n\t                (HttpServletResponse) response);\r\n\r\n\t\tchain.doFilter(request, capturingResponseWrapper);\r\n\t\ttry{\r\n\t\t\tString respopn = capturingResponseWrapper.getCaptureAsString();\t\t\r\n\t\t\tJSONObject json=new JSONObject(respopn);\r\n        \tJSONObject dMap=new JSONObject(json.get(&quot;dataMap&quot;));\r\n        \tdMap.put(&quot;new&quot;, &quot;newValue&quot;);\r\n        \tjson.put(&quot;dataMap&quot;, dMap); // Modified the old datamap with new json\r\n        \tJsonMapper jsonMap=new JsonMapper();\r\n        \tjsonMap.setJson(json);\r\n        \tString str=jsonMap.getJson();\r\n\t\t\tresponse.getOutputStream().write(str.getBytes());\r\n\t\t} catch(Exception e){\r\n\t\t\tlog.error(&quot;&quot;);\r\n\t\t}\r\n\t}\r\n\r\n\r\nBelow class is used to copy the ServletResponse in the above code snippet\r\n\r\n    public class ServletResponseWrapperCopier extends HttpServletResponseWrapper{\r\n\r\n\tprivate final ByteArrayOutputStream capture;\r\n\tprivate ServletOutputStream output;\r\n\tprivate PrintWriter writer;\r\n\r\n\tpublic ServletResponseWrapperCopier(HttpServletResponse response) {\r\n\t\tsuper(response);\r\n\t\tcapture = new ByteArrayOutputStream(response.getBufferSize());\r\n\t}\r\n\r\n\t@Override\r\n\tpublic ServletOutputStream getOutputStream() {\r\n\t\tif (writer != null) {\r\n\t\t\tthrow new IllegalStateException(\r\n\t\t\t\t\t&quot;getWriter() has already been called on this response.&quot;);\r\n\t\t}\r\n\r\n\t\tif (output == null) {\r\n\t\t\toutput = new ServletOutputStream() {\r\n\t\t\t\t@Override\r\n\t\t\t\tpublic void write(int b) throws IOException {\r\n\t\t\t\t\tcapture.write(b);\r\n\t\t\t\t}\r\n\r\n\t\t\t\t@Override\r\n\t\t\t\tpublic void flush() throws IOException {\r\n\t\t\t\t\tcapture.flush();\r\n\t\t\t\t}\r\n\r\n\t\t\t\t@Override\r\n\t\t\t\tpublic void close() throws IOException {\r\n\t\t\t\t\tcapture.close();\r\n\t\t\t\t}\r\n\t\t\t};\r\n\t\t}\r\n\r\n\t\treturn output;\r\n\t}\r\n\r\n\t@Override\r\n\tpublic PrintWriter getWriter() throws IOException {\r\n\t\tif (output != null) {\r\n\t\t\tthrow new IllegalStateException(\r\n\t\t\t\t\t&quot;getOutputStream() has already been called on this response.&quot;);\r\n\t\t}\r\n\r\n\t\tif (writer == null) {\r\n\t\t\twriter = new PrintWriter(new OutputStreamWriter(capture,\r\n\t\t\t\t\tgetCharacterEncoding()));\r\n\t\t}\r\n\r\n\t\treturn writer;\r\n\t}\r\n\r\n\tpublic byte[] getCaptureAsBytes() throws IOException {\r\n\t\tif (writer != null) {\r\n\t\t\twriter.close();\r\n\t\t} else if (output != null) {\r\n\t\t\toutput.close();\r\n\t\t}\r\n\r\n\t\treturn capture.toByteArray();\r\n\t}\r\n\r\n\tpublic String getCaptureAsString() throws IOException {\r\n\t\treturn new String(getCaptureAsBytes(), getCharacterEncoding());\r\n\t}\r\n\r\n}\r\n","title":"Replace existing response with new using servlet filter in spring mvc","body":"<p>I feel below code snippet should work.The problem with above is it is getting appended to the existing data instead of rewriting. We need to create a copy with where the data is stored and copy after manipulating to the original ServletResponse. Hope below code snippet solve your issue.</p>\n\n<p>below is the main do filter method-</p>\n\n<pre><code>public void doFilter(ServletRequest request, ServletResponse response, FilterChain chain) throws IOException, ServletException {\n\n    ServletResponseWrapperCopier capturingResponseWrapper = new ServletResponseWrapperCopier(\n                (HttpServletResponse) response);\n\n    chain.doFilter(request, capturingResponseWrapper);\n    try{\n        String respopn = capturingResponseWrapper.getCaptureAsString();     \n        JSONObject json=new JSONObject(respopn);\n        JSONObject dMap=new JSONObject(json.get(\"dataMap\"));\n        dMap.put(\"new\", \"newValue\");\n        json.put(\"dataMap\", dMap); // Modified the old datamap with new json\n        JsonMapper jsonMap=new JsonMapper();\n        jsonMap.setJson(json);\n        String str=jsonMap.getJson();\n        response.getOutputStream().write(str.getBytes());\n    } catch(Exception e){\n        log.error(\"\");\n    }\n}\n</code></pre>\n\n<p>Below class is used to copy the ServletResponse in the above code snippet</p>\n\n<pre><code>public class ServletResponseWrapperCopier extends HttpServletResponseWrapper{\n\nprivate final ByteArrayOutputStream capture;\nprivate ServletOutputStream output;\nprivate PrintWriter writer;\n\npublic ServletResponseWrapperCopier(HttpServletResponse response) {\n    super(response);\n    capture = new ByteArrayOutputStream(response.getBufferSize());\n}\n\n@Override\npublic ServletOutputStream getOutputStream() {\n    if (writer != null) {\n        throw new IllegalStateException(\n                \"getWriter() has already been called on this response.\");\n    }\n\n    if (output == null) {\n        output = new ServletOutputStream() {\n            @Override\n            public void write(int b) throws IOException {\n                capture.write(b);\n            }\n\n            @Override\n            public void flush() throws IOException {\n                capture.flush();\n            }\n\n            @Override\n            public void close() throws IOException {\n                capture.close();\n            }\n        };\n    }\n\n    return output;\n}\n\n@Override\npublic PrintWriter getWriter() throws IOException {\n    if (output != null) {\n        throw new IllegalStateException(\n                \"getOutputStream() has already been called on this response.\");\n    }\n\n    if (writer == null) {\n        writer = new PrintWriter(new OutputStreamWriter(capture,\n                getCharacterEncoding()));\n    }\n\n    return writer;\n}\n\npublic byte[] getCaptureAsBytes() throws IOException {\n    if (writer != null) {\n        writer.close();\n    } else if (output != null) {\n        output.close();\n    }\n\n    return capture.toByteArray();\n}\n\npublic String getCaptureAsString() throws IOException {\n    return new String(getCaptureAsBytes(), getCharacterEncoding());\n}\n</code></pre>\n\n<p>}</p>\n"},{"tags":[],"owner":{"account_id":94689,"reputation":1099,"user_id":258387,"accept_rate":100,"display_name":"vijayakumarpsg587"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1545823295,"creation_date":1545823295,"answer_id":53931388,"question_id":46659538,"body_markdown":"Maybe this could also be considered.\r\nSo first create a response wrapper. (add the content-type if needed or else you could leave as it is. Mine had a xhml content-type and that prompted me to change the content-type)\r\n\r\nNext create wrappers for the printwriter and ServletOutputStream. The wrapper for servlet OutputStream is optional but that depends on you need. Here are the implementations\r\n\r\nByteArrayServletStream.java\r\n\r\n    public class ByteArrayServletStream extends ServletOutputStream {\r\n    \r\n        ByteArrayOutputStream baos;\r\n    \r\n        ByteArrayServletStream(ByteArrayOutputStream baos) {\r\n            this.baos = baos;\r\n        }\r\n    \r\n        @Override\r\n        public void write(int param) throws IOException {\r\n            baos.write(param);\r\n        }\r\n    \r\n        @Override\r\n        public boolean isReady() {\r\n            // TODO Auto-generated method stub\r\n            return false;\r\n        }\r\n    \r\n        @Override\r\n        public void setWriteListener(WriteListener listener) {\r\n            // TODO Auto-generated method stub\r\n    \r\n        }\r\n    \r\n    }\r\n\r\n\r\n\r\nByteArrayPrinter.java\r\n\r\n    /**\r\n     * IMplemented own Printer as the new wrapper\r\n     *\r\n     */\r\n    public class ByteArrayPrinter {\r\n    \r\n        private ByteArrayOutputStream baos = new ByteArrayOutputStream();\r\n    \r\n        private PrintWriter pw = new PrintWriter(baos);\r\n    \r\n        private ServletOutputStream sos = new ByteArrayServletStream(baos);\r\n    \r\n        public PrintWriter getWriter() {\r\n            return pw;\r\n        }\r\n    \r\n        public ServletOutputStream getStream() {\r\n            return sos;\r\n        }\r\n    \r\n        byte[] toByteArray() {\r\n            return baos.toByteArray();\r\n        }\r\n    }\r\n\r\n\r\nSwaggerFilter.java\r\n\r\n    public class SwaggerFilter implements Filter {\r\n    \r\n        final String APPLICATION_XHTML = &quot;application/xhtml&quot;;\r\n        final String XML_ELEMENT_START = &quot;&lt;Json&gt;&quot;;\r\n        final String XML_ELEMENT_END = &quot;&lt;/Json&gt;&quot;;\r\n    \r\n        @Override\r\n        public void init(FilterConfig config) throws ServletException {\r\n        }\r\n    \r\n        /**\r\n         * Filter to remove the extra JSON element and render it\r\n         */\r\n        @Override\r\n        public void doFilter(ServletRequest servletRequest, ServletResponse servletResponse, FilterChain chain)\r\n                throws IOException, ServletException {\r\n            HttpServletRequest httpRequest = (HttpServletRequest) servletRequest;\r\n    \r\n            HttpServletResponse response = (HttpServletResponse) servletResponse;\r\n            ByteArrayPrinter pw = new ByteArrayPrinter();\r\n    \r\n            // Create a wrapper\r\n            HttpServletResponse wrappedResp = new HttpServletResponseWrapper(response) {\r\n    \r\n                @Override\r\n                public void setContentType(final String type) {\r\n                    super.setContentType(MediaType.APPLICATION_JSON_UTF8_VALUE);\r\n                }\r\n    \r\n                @Override\r\n                public PrintWriter getWriter() {\r\n                    return pw.getWriter();\r\n                }\r\n    \r\n                // set the outputstream content type to JSON\r\n                @Override\r\n                public ServletOutputStream getOutputStream() throws IOException {\r\n                    ServletResponse response = this.getResponse();\r\n    \r\n                    String ct = (response != null) ? response.getContentType() : null;\r\n                    if (ct != null &amp;&amp; ct.contains(APPLICATION_XHTML)) {\r\n                        response.setContentType(ct + AppConstants.CONSTANT_COMMA + MediaType.APPLICATION_JSON_UTF8_VALUE);\r\n                    }\r\n                    return pw.getStream();\r\n                }\r\n    \r\n            };\r\n            chain.doFilter(httpRequest, wrappedResp);\r\n    \r\n            byte[] bytes = pw.toByteArray();\r\n            String respBody = new String(bytes);\r\n            if (respBody.startsWith(XML_ELEMENT_START)) {\r\n    \r\n                // Instead of using substring made use of stream to identify any occurence of &lt;Json&gt; xml element\r\n                List&lt;String&gt; xmlStringList = Stream.of(respBody).filter((s1) -&gt; s1.contains(XML_ELEMENT_START))\r\n                        // filter the string. Split it by mapping to new arraylist by space\r\n                        .map((stringBeforeSplit) -&gt; Arrays.asList(stringBeforeSplit.split(AppConstants.CONSTANT_SPACE)))\r\n                        // create a new stream of array list strings\r\n                        .flatMap((stringArrayAfterSplit) -&gt; {\r\n                            StringBuffer concatenateStringStream = new StringBuffer();\r\n                            stringArrayAfterSplit.forEach(item -&gt; {\r\n    \r\n                                concatenateStringStream.append(item);\r\n    \r\n                            });\r\n                            // remove the &lt;JSON&gt; xml element and return the values\r\n                            return Stream\r\n                                    .of(concatenateStringStream.toString().trim()\r\n                                            .replace(XML_ELEMENT_START, AppConstants.CONSTANT_NO_SPACE)\r\n                                            .replace(XML_ELEMENT_END, AppConstants.CONSTANT_NO_SPACE));\r\n                            // collect it as a new list of strings with the xmlelement - &lt;JSON&gt; removed\r\n                        }).collect(Collectors.toList());\r\n    \r\n                // Join the list to make it one\r\n                String finalString = String.join(AppConstants.CONSTANT_NO_SPACE, xmlStringList);\r\n    \r\n                // write to the outputstream with JSON mediatype\r\n                response.getOutputStream().write(finalString.getBytes());\r\n            } else {\r\n                response.getOutputStream().write(bytes);\r\n            }\r\n    \r\n        }\r\n    \r\n        @Override\r\n        public void destroy() {\r\n        }\r\n    \r\n    }","title":"Replace existing response with new using servlet filter in spring mvc","body":"<p>Maybe this could also be considered.\nSo first create a response wrapper. (add the content-type if needed or else you could leave as it is. Mine had a xhml content-type and that prompted me to change the content-type)</p>\n\n<p>Next create wrappers for the printwriter and ServletOutputStream. The wrapper for servlet OutputStream is optional but that depends on you need. Here are the implementations</p>\n\n<p>ByteArrayServletStream.java</p>\n\n<pre><code>public class ByteArrayServletStream extends ServletOutputStream {\n\n    ByteArrayOutputStream baos;\n\n    ByteArrayServletStream(ByteArrayOutputStream baos) {\n        this.baos = baos;\n    }\n\n    @Override\n    public void write(int param) throws IOException {\n        baos.write(param);\n    }\n\n    @Override\n    public boolean isReady() {\n        // TODO Auto-generated method stub\n        return false;\n    }\n\n    @Override\n    public void setWriteListener(WriteListener listener) {\n        // TODO Auto-generated method stub\n\n    }\n\n}\n</code></pre>\n\n<p>ByteArrayPrinter.java</p>\n\n<pre><code>/**\n * IMplemented own Printer as the new wrapper\n *\n */\npublic class ByteArrayPrinter {\n\n    private ByteArrayOutputStream baos = new ByteArrayOutputStream();\n\n    private PrintWriter pw = new PrintWriter(baos);\n\n    private ServletOutputStream sos = new ByteArrayServletStream(baos);\n\n    public PrintWriter getWriter() {\n        return pw;\n    }\n\n    public ServletOutputStream getStream() {\n        return sos;\n    }\n\n    byte[] toByteArray() {\n        return baos.toByteArray();\n    }\n}\n</code></pre>\n\n<p>SwaggerFilter.java</p>\n\n<pre><code>public class SwaggerFilter implements Filter {\n\n    final String APPLICATION_XHTML = \"application/xhtml\";\n    final String XML_ELEMENT_START = \"&lt;Json&gt;\";\n    final String XML_ELEMENT_END = \"&lt;/Json&gt;\";\n\n    @Override\n    public void init(FilterConfig config) throws ServletException {\n    }\n\n    /**\n     * Filter to remove the extra JSON element and render it\n     */\n    @Override\n    public void doFilter(ServletRequest servletRequest, ServletResponse servletResponse, FilterChain chain)\n            throws IOException, ServletException {\n        HttpServletRequest httpRequest = (HttpServletRequest) servletRequest;\n\n        HttpServletResponse response = (HttpServletResponse) servletResponse;\n        ByteArrayPrinter pw = new ByteArrayPrinter();\n\n        // Create a wrapper\n        HttpServletResponse wrappedResp = new HttpServletResponseWrapper(response) {\n\n            @Override\n            public void setContentType(final String type) {\n                super.setContentType(MediaType.APPLICATION_JSON_UTF8_VALUE);\n            }\n\n            @Override\n            public PrintWriter getWriter() {\n                return pw.getWriter();\n            }\n\n            // set the outputstream content type to JSON\n            @Override\n            public ServletOutputStream getOutputStream() throws IOException {\n                ServletResponse response = this.getResponse();\n\n                String ct = (response != null) ? response.getContentType() : null;\n                if (ct != null &amp;&amp; ct.contains(APPLICATION_XHTML)) {\n                    response.setContentType(ct + AppConstants.CONSTANT_COMMA + MediaType.APPLICATION_JSON_UTF8_VALUE);\n                }\n                return pw.getStream();\n            }\n\n        };\n        chain.doFilter(httpRequest, wrappedResp);\n\n        byte[] bytes = pw.toByteArray();\n        String respBody = new String(bytes);\n        if (respBody.startsWith(XML_ELEMENT_START)) {\n\n            // Instead of using substring made use of stream to identify any occurence of &lt;Json&gt; xml element\n            List&lt;String&gt; xmlStringList = Stream.of(respBody).filter((s1) -&gt; s1.contains(XML_ELEMENT_START))\n                    // filter the string. Split it by mapping to new arraylist by space\n                    .map((stringBeforeSplit) -&gt; Arrays.asList(stringBeforeSplit.split(AppConstants.CONSTANT_SPACE)))\n                    // create a new stream of array list strings\n                    .flatMap((stringArrayAfterSplit) -&gt; {\n                        StringBuffer concatenateStringStream = new StringBuffer();\n                        stringArrayAfterSplit.forEach(item -&gt; {\n\n                            concatenateStringStream.append(item);\n\n                        });\n                        // remove the &lt;JSON&gt; xml element and return the values\n                        return Stream\n                                .of(concatenateStringStream.toString().trim()\n                                        .replace(XML_ELEMENT_START, AppConstants.CONSTANT_NO_SPACE)\n                                        .replace(XML_ELEMENT_END, AppConstants.CONSTANT_NO_SPACE));\n                        // collect it as a new list of strings with the xmlelement - &lt;JSON&gt; removed\n                    }).collect(Collectors.toList());\n\n            // Join the list to make it one\n            String finalString = String.join(AppConstants.CONSTANT_NO_SPACE, xmlStringList);\n\n            // write to the outputstream with JSON mediatype\n            response.getOutputStream().write(finalString.getBytes());\n        } else {\n            response.getOutputStream().write(bytes);\n        }\n\n    }\n\n    @Override\n    public void destroy() {\n    }\n\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1998786,"reputation":724,"user_id":1790310,"display_name":"Lam Vinh"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1669653124,"creation_date":1669653124,"answer_id":74603702,"question_id":46659538,"body_markdown":"Just coding as below to return custom response body with error code\r\n\r\n    final ObjectMapper mapper = new ObjectMapper();\r\n    final ObjectNode root = mapper.createObjectNode();\r\n    mapper.setVisibility(PropertyAccessor.FIELD, JsonAutoDetect.Visibility.ANY);\r\n    \r\n    // set return custom response\r\n    ErrorRepsonse error = ErrorRepsonse.builder()\r\n            .status(&quot;400&quot;)\r\n            .results(List.of(\r\n                    ErrorRepsonse.Result.builder()\r\n                            .errorCode(&quot;999&quot;)\r\n                            .build()\r\n            ))\r\n            .build();\r\n    response.setContentType(MediaType.APPLICATION_JSON_VALUE);\r\n    ((HttpServletResponse) response).setStatus(HttpServletResponse.SC_BAD_REQUEST);\r\n    response.getWriter().write(mapper.writeValueAsString(error));\r\n    return; // important!!!","title":"Replace existing response with new using servlet filter in spring mvc","body":"<p>Just coding as below to return custom response body with error code</p>\n<pre><code>final ObjectMapper mapper = new ObjectMapper();\nfinal ObjectNode root = mapper.createObjectNode();\nmapper.setVisibility(PropertyAccessor.FIELD, JsonAutoDetect.Visibility.ANY);\n\n// set return custom response\nErrorRepsonse error = ErrorRepsonse.builder()\n        .status(&quot;400&quot;)\n        .results(List.of(\n                ErrorRepsonse.Result.builder()\n                        .errorCode(&quot;999&quot;)\n                        .build()\n        ))\n        .build();\nresponse.setContentType(MediaType.APPLICATION_JSON_VALUE);\n((HttpServletResponse) response).setStatus(HttpServletResponse.SC_BAD_REQUEST);\nresponse.getWriter().write(mapper.writeValueAsString(error));\nreturn; // important!!!\n</code></pre>\n"}],"owner":{"account_id":1885070,"reputation":3672,"user_id":1704453,"accept_rate":88,"display_name":"Vipin CP"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":4913,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":46953737,"answer_count":3,"score":2,"last_activity_date":1669653124,"creation_date":1507615046,"question_id":46659538,"body_markdown":"I want to replace exisiting `json` response(In some condition) with the new one using filters. What am trying to do is read existing response (`JSON`) from filter. Modify it with new values and write back to response. But the result shows both the response.\r\n\r\nThat is , what i have read from response and what i added newly. But i need to replace the old response with new. Code added below.\r\n\r\n\r\n    public void doFilter(ServletRequest request, ServletResponse response, FilterChain chain) \r\n    {\r\n    \ttry{\r\n    \t ByteArrayOutputStream baos = new ByteArrayOutputStream();\r\n    \t    final PrintStream ps = new PrintStream(baos);\r\n    \r\n    \t    chain.doFilter(request,new HttpServletResponseWrapper((HttpServletResponse)response) {\r\n    \t    \t   @Override\r\n    \t         public ServletOutputStream getOutputStream() throws IOException {\r\n    \t            return new DelegatingServletOutputStream(new TeeOutputStream(super.getOutputStream(), ps)\r\n    \t            );\r\n    \t         }\r\n    \t      @Override\r\n    \t         public  PrintWriter getWriter() throws IOException {\r\n    \t            return new PrintWriter(new DelegatingServletOutputStream (new TeeOutputStream(super.getOutputStream(), ps))\r\n    \t            );\r\n    \t         }\r\n    \t      });\r\n    \t    /* get existing response as string*/\r\n    \t    String respopn=baos.toString(); \r\n    \t    JSONObject json=new JSONObject(respopn);\r\n    \t    JSONObject dMap=new JSONObject(json.get(&quot;dataMap&quot;));\r\n    \t    dMap.put(&quot;new&quot;, &quot;newValue&quot;);\r\n    \t    json.put(&quot;dataMap&quot;, dMap); // Modified the old datamap with new json\r\n    \t    JsonMapper jsonMap=new JsonMapper();\r\n    \t    jsonMap.setJson(json);\r\n    \t    String str=jsonMap.getJson();\r\n    \t    byte[] responseToSend = restResponseBytes(jsonMap);\r\n    \t    response.getOutputStream().write(responseToSend); // write to response only the new one\r\n    \t    \r\n    \t    \r\n    \t    \r\n    \t}\r\n    \tcatch(Exception e)\r\n    \t{\r\n    \t\te.printStackTrace();\r\n    \t}\r\n    \t}\r\n \r\n\r\n       private byte[] restResponseBytes(Object response) throws IOException {\r\n            String serialized = new ObjectMapper().writeValueAsString(response);\r\n            return serialized.getBytes();\r\n        }","title":"Replace existing response with new using servlet filter in spring mvc","body":"<p>I want to replace exisiting <code>json</code> response(In some condition) with the new one using filters. What am trying to do is read existing response (<code>JSON</code>) from filter. Modify it with new values and write back to response. But the result shows both the response.</p>\n\n<p>That is , what i have read from response and what i added newly. But i need to replace the old response with new. Code added below.</p>\n\n<pre><code>public void doFilter(ServletRequest request, ServletResponse response, FilterChain chain) \n{\n    try{\n     ByteArrayOutputStream baos = new ByteArrayOutputStream();\n        final PrintStream ps = new PrintStream(baos);\n\n        chain.doFilter(request,new HttpServletResponseWrapper((HttpServletResponse)response) {\n               @Override\n             public ServletOutputStream getOutputStream() throws IOException {\n                return new DelegatingServletOutputStream(new TeeOutputStream(super.getOutputStream(), ps)\n                );\n             }\n          @Override\n             public  PrintWriter getWriter() throws IOException {\n                return new PrintWriter(new DelegatingServletOutputStream (new TeeOutputStream(super.getOutputStream(), ps))\n                );\n             }\n          });\n        /* get existing response as string*/\n        String respopn=baos.toString(); \n        JSONObject json=new JSONObject(respopn);\n        JSONObject dMap=new JSONObject(json.get(\"dataMap\"));\n        dMap.put(\"new\", \"newValue\");\n        json.put(\"dataMap\", dMap); // Modified the old datamap with new json\n        JsonMapper jsonMap=new JsonMapper();\n        jsonMap.setJson(json);\n        String str=jsonMap.getJson();\n        byte[] responseToSend = restResponseBytes(jsonMap);\n        response.getOutputStream().write(responseToSend); // write to response only the new one\n\n\n\n    }\n    catch(Exception e)\n    {\n        e.printStackTrace();\n    }\n    }\n\n\n   private byte[] restResponseBytes(Object response) throws IOException {\n        String serialized = new ObjectMapper().writeValueAsString(response);\n        return serialized.getBytes();\n    }\n</code></pre>\n"},{"tags":["java","hibernate","jpa-2.1","criteriaquery"],"comments":[{"owner":{"account_id":1038596,"reputation":34548,"user_id":1045142,"accept_rate":67,"display_name":"Simon Martinelli"},"score":1,"creation_date":1669631682,"post_id":74599208,"comment_id":131678200,"body_markdown":"You have to JOIN the UserEntity. Check out https://stackoverflow.com/questions/3424696/jpa-criteria-api-how-to-add-join-clause-as-general-sentence-as-possible","body":"You have to JOIN the UserEntity. Check out <a href=\"https://stackoverflow.com/questions/3424696/jpa-criteria-api-how-to-add-join-clause-as-general-sentence-as-possible\" title=\"jpa criteria api how to add join clause as general sentence as possible\">stackoverflow.com/questions/3424696/&hellip;</a>"},{"owner":{"account_id":26121171,"reputation":49,"user_id":19813440,"display_name":"Just_Do_It_123"},"score":0,"creation_date":1669632021,"post_id":74599208,"comment_id":131678299,"body_markdown":"ohh but my understanding is if we are using any Enitity, so all entity that have manyToMany/ManyToOne relation with it, were also we can access without joining it ? Is my understanding wrong here ?","body":"ohh but my understanding is if we are using any Enitity, so all entity that have manyToMany/ManyToOne relation with it, were also we can access without joining it ? Is my understanding wrong here ?"},{"owner":{"account_id":26121171,"reputation":49,"user_id":19813440,"display_name":"Just_Do_It_123"},"score":0,"creation_date":1669633197,"post_id":74599208,"comment_id":131678673,"body_markdown":"Also, Can u help me to write the above query with join, so that I can ref for other method  ?","body":"Also, Can u help me to write the above query with join, so that I can ref for other method  ?"},{"owner":{"account_id":1038596,"reputation":34548,"user_id":1045142,"accept_rate":67,"display_name":"Simon Martinelli"},"score":0,"creation_date":1669652803,"post_id":74599208,"comment_id":131685605,"body_markdown":"You must join to access the fields in the query","body":"You must join to access the fields in the query"}],"answers":[{"tags":[],"owner":{"account_id":1038596,"reputation":34548,"user_id":1045142,"accept_rate":67,"display_name":"Simon Martinelli"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1669653004,"creation_date":1669653004,"answer_id":74603677,"question_id":74599208,"body_markdown":"You must join the UserEntity to have a reference to build the where clause:\r\n\r\n    Root&lt;GroupEntity&gt; root = cq.from(GroupEntity.class);\r\n    Join&lt;GroupEntity,UserEntity&gt; user = root.join(&quot;userEntity&quot;);\r\n    cq.select(root).where(cb.or(\r\n                  cb.equal(user.get(&quot;userCode&quot;), userCode), \r\n                  cb.equal(root.get(&quot;name&quot;), currentGroupName), \r\n                  cb.equal(root.get(&quot;name&quot;), newGroupName)));\r\n\r\nBtw. you should consider to generate the metamodel for typesafe querying.\r\n\r\nhttps://www.baeldung.com/hibernate-criteria-queries-metamodel","title":"Getting data in Hibernate JPA query with ManyToOne Mapping","body":"<p>You must join the UserEntity to have a reference to build the where clause:</p>\n<pre><code>Root&lt;GroupEntity&gt; root = cq.from(GroupEntity.class);\nJoin&lt;GroupEntity,UserEntity&gt; user = root.join(&quot;userEntity&quot;);\ncq.select(root).where(cb.or(\n              cb.equal(user.get(&quot;userCode&quot;), userCode), \n              cb.equal(root.get(&quot;name&quot;), currentGroupName), \n              cb.equal(root.get(&quot;name&quot;), newGroupName)));\n</code></pre>\n<p>Btw. you should consider to generate the metamodel for typesafe querying.</p>\n<p><a href=\"https://www.baeldung.com/hibernate-criteria-queries-metamodel\" rel=\"nofollow noreferrer\">https://www.baeldung.com/hibernate-criteria-queries-metamodel</a></p>\n"}],"owner":{"account_id":26121171,"reputation":49,"user_id":19813440,"display_name":"Just_Do_It_123"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":238,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1669653004,"creation_date":1669631282,"question_id":74599208,"body_markdown":"Hi I have few table that listed below:\r\n\r\n```\r\npublic class GroupEntity extends BaseEntity {\r\n\r\n    @Id\r\n    @SequenceGenerator(name = &quot;beta_group_seq&quot;, sequenceName = &quot;group_seq&quot;, allocationSize = 1)\r\n    @GeneratedValue(strategy = GenerationType.SEQUENCE, generator = &quot;group_seq&quot;)\r\n    @Column(name = &quot;id&quot;)\r\n    private Long id;\r\n\r\n    @Column(name = &quot;name&quot;, length = 1400)\r\n    private String name;\r\n\r\n    @ManyToOne(fetch = FetchType.LAZY)\r\n    @JoinColumn(name = &quot;user_id&quot;)\r\n    private UserEntity userEntity;\r\n\r\n    @Column(name = &quot;status&quot;)\r\n    private String status;\r\n}\r\n```\r\nthat have ```ManyToOne``` relation with `UserEntity`:\r\n\r\n```\r\npublic class UserEntity extends BaseEntity {\r\n\r\n    @Column(name = &quot;user_code&quot;, nullable = false, unique = true)\r\n    private String userCode;\r\n}\r\n```\r\n\r\nBoth the Entity extends the Basic Entity:\r\n\r\n```\r\n@Getter\r\n@MappedSuperclass\r\npublic abstract class BaseEntity {\r\n\r\n    @Column(name = &quot;CREATED_BY&quot;, length = 8, updatable = false)\r\n    private String createdBy;\r\n\r\n    @Temporal(TemporalType.TIMESTAMP)\r\n    @Column(name = &quot;CREATION_DATE&quot;, updatable = false)\r\n    private Date creationDate;\r\n\r\n    @Column(name = &quot;LAST_UPDATED_BY&quot;, length = 8, updatable = false)\r\n    private String lastUpdatedBy;\r\n\r\n    @Temporal(TemporalType.TIMESTAMP)\r\n    @Column(name = &quot;LAST_UPDATED_DATE&quot;, updatable = false)\r\n    private Date lastUpdatedDate;\r\n}\r\n```\r\n\r\nTo get the userCode that is in UserEntity I wrote the below JPA Criteria Query:\r\n```\r\n public List&lt;GroupEntity&gt; getData(final String userCode,\r\n                                                                       final String currentGroupName, final String newGroupName) {\r\n\r\n        final EntityManager entityManager = entityManagerProvider.get();\r\n        final CriteriaBuilder cb = entityManager.getCriteriaBuilder();\r\n        final CriteriaQuery&lt;GroupEntity&gt; cq = cb.createQuery(GroupEntity.class);\r\n        final Root&lt;GroupEntity&gt; root = cq.from(GroupEntity.class);\r\n        cq.select(root).where(cb.or(cb.equal(root.get(&quot;userCode&quot;), userCode), cb.equal(root.get(&quot;name&quot;),\r\n                currentGroupName), cb.equal(root.get(&quot;name&quot;), newGroupName)));\r\n        return entityManager.createQuery(cq).getResultList();\r\n    }\r\n```\r\n\r\nBut got some internalFailure due to failure in above query:\r\n\r\n```\r\nUnable to locate Attribute  with the the given name [userCode] on this ManagedType [com.&lt;servicename&gt;.entity.BaseEntity]\r\n```\r\n\r\nI am not sure if its due to wrong Query that I have put above or due to some other ?\r\n\r\nThanks!!\r\n","title":"Getting data in Hibernate JPA query with ManyToOne Mapping","body":"<p>Hi I have few table that listed below:</p>\n<pre><code>public class GroupEntity extends BaseEntity {\n\n    @Id\n    @SequenceGenerator(name = &quot;beta_group_seq&quot;, sequenceName = &quot;group_seq&quot;, allocationSize = 1)\n    @GeneratedValue(strategy = GenerationType.SEQUENCE, generator = &quot;group_seq&quot;)\n    @Column(name = &quot;id&quot;)\n    private Long id;\n\n    @Column(name = &quot;name&quot;, length = 1400)\n    private String name;\n\n    @ManyToOne(fetch = FetchType.LAZY)\n    @JoinColumn(name = &quot;user_id&quot;)\n    private UserEntity userEntity;\n\n    @Column(name = &quot;status&quot;)\n    private String status;\n}\n</code></pre>\n<p>that have <code>ManyToOne</code> relation with <code>UserEntity</code>:</p>\n<pre><code>public class UserEntity extends BaseEntity {\n\n    @Column(name = &quot;user_code&quot;, nullable = false, unique = true)\n    private String userCode;\n}\n</code></pre>\n<p>Both the Entity extends the Basic Entity:</p>\n<pre><code>@Getter\n@MappedSuperclass\npublic abstract class BaseEntity {\n\n    @Column(name = &quot;CREATED_BY&quot;, length = 8, updatable = false)\n    private String createdBy;\n\n    @Temporal(TemporalType.TIMESTAMP)\n    @Column(name = &quot;CREATION_DATE&quot;, updatable = false)\n    private Date creationDate;\n\n    @Column(name = &quot;LAST_UPDATED_BY&quot;, length = 8, updatable = false)\n    private String lastUpdatedBy;\n\n    @Temporal(TemporalType.TIMESTAMP)\n    @Column(name = &quot;LAST_UPDATED_DATE&quot;, updatable = false)\n    private Date lastUpdatedDate;\n}\n</code></pre>\n<p>To get the userCode that is in UserEntity I wrote the below JPA Criteria Query:</p>\n<pre><code> public List&lt;GroupEntity&gt; getData(final String userCode,\n                                                                       final String currentGroupName, final String newGroupName) {\n\n        final EntityManager entityManager = entityManagerProvider.get();\n        final CriteriaBuilder cb = entityManager.getCriteriaBuilder();\n        final CriteriaQuery&lt;GroupEntity&gt; cq = cb.createQuery(GroupEntity.class);\n        final Root&lt;GroupEntity&gt; root = cq.from(GroupEntity.class);\n        cq.select(root).where(cb.or(cb.equal(root.get(&quot;userCode&quot;), userCode), cb.equal(root.get(&quot;name&quot;),\n                currentGroupName), cb.equal(root.get(&quot;name&quot;), newGroupName)));\n        return entityManager.createQuery(cq).getResultList();\n    }\n</code></pre>\n<p>But got some internalFailure due to failure in above query:</p>\n<pre><code>Unable to locate Attribute  with the the given name [userCode] on this ManagedType [com.&lt;servicename&gt;.entity.BaseEntity]\n</code></pre>\n<p>I am not sure if its due to wrong Query that I have put above or due to some other ?</p>\n<p>Thanks!!</p>\n"},{"tags":["java","minecraft","bukkit"],"answers":[{"tags":[],"owner":{"account_id":26942439,"reputation":26,"user_id":20512999,"display_name":"Krabumb"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1669456188,"creation_date":1669456188,"answer_id":74581169,"question_id":74580958,"body_markdown":"Currently, it seems that it is **not possible** for bukkit to set a block as a redstone source. \r\nHowever, you can trick the game by temporary replacing the block by a redstone emitter :\r\n\r\n 1. The PlayerInteractEvent is emitted, and the conditions you specified are checked.\r\n 2. You temporary replace the block that you clicked for 2 ticks by a redstone block\r\n 3. After those 2 ticks, you replace the redstone block by the original block\r\n\r\nThis solution might not work for you, but it is the best that i could find.","title":"Emit redstone signal to a block Bukkit 1.12.2","body":"<p>Currently, it seems that it is <strong>not possible</strong> for bukkit to set a block as a redstone source.\nHowever, you can trick the game by temporary replacing the block by a redstone emitter :</p>\n<ol>\n<li>The PlayerInteractEvent is emitted, and the conditions you specified are checked.</li>\n<li>You temporary replace the block that you clicked for 2 ticks by a redstone block</li>\n<li>After those 2 ticks, you replace the redstone block by the original block</li>\n</ol>\n<p>This solution might not work for you, but it is the best that i could find.</p>\n"},{"tags":[],"owner":{"account_id":14107334,"reputation":21,"user_id":10191054,"display_name":"Horizonik"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1669652653,"creation_date":1669652653,"answer_id":74603603,"question_id":74580958,"body_markdown":"**Solution 1:**\r\nYou could try getting the blocks around it, check if they&#39;re of type redstone powder and set them to active. \r\n\r\nSo that in a way it would be emitting power to nearby redstone. Although it won&#39;t act quite as much as a redstone source.\r\n\r\n---\r\n\r\n**Solution 2:**\r\nUse a custom resource pack, add a 2nd variant of the redstone block and set its textures to your block of choice. \r\nWhen placed, it will look like your block but in acutality it&#39;d be a redstone block.\r\n\r\nDoing it this way, you&#39;ll have the most accurate redstone emittion.","title":"Emit redstone signal to a block Bukkit 1.12.2","body":"<p><strong>Solution 1:</strong>\nYou could try getting the blocks around it, check if they're of type redstone powder and set them to active.</p>\n<p>So that in a way it would be emitting power to nearby redstone. Although it won't act quite as much as a redstone source.</p>\n<hr />\n<p><strong>Solution 2:</strong>\nUse a custom resource pack, add a 2nd variant of the redstone block and set its textures to your block of choice.\nWhen placed, it will look like your block but in acutality it'd be a redstone block.</p>\n<p>Doing it this way, you'll have the most accurate redstone emittion.</p>\n"}],"owner":{"account_id":17332065,"reputation":339,"user_id":12554903,"display_name":"Pioupia"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":118,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":74581169,"answer_count":2,"score":1,"last_activity_date":1669652653,"creation_date":1669453948,"question_id":74580958,"body_markdown":"*First of all, this is the first time I create a Bukkit plugin.*\r\n\r\nBasically, when someone does a certain action with a block and checks certain conditions, I would like it to **emit a redstone signal** (the block). The code is executed in the Bukkit **PlayerInteractEvent**.\r\nExcept that after a lot of research, I still haven&#39;t found a single (working) solution, neither on the forums, nor in the documentation.\r\n\r\nI don&#39;t know how to **tell Minecraft that this block can emit redstone** (*if it needs it*). If I don&#39;t say anything stupid, it was created with a **dynamX pack** (the mod that contains the block).\r\n\r\nI already looked at this solution: [https://stackoverflow.com/questions/40376835/bukkit-set-a-block-powered][1], but it doesn&#39;t match my expectations and doesn&#39;t work.\r\n\r\nSo I was wondering if it was possible to **emit a redstone signal on a specific block** with **Bukkit 1.12.2**, or at a **specific coordinate**. This would solve all the problems related to this.\r\n\r\nI thank you in advance.\r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/40376835/bukkit-set-a-block-powered","title":"Emit redstone signal to a block Bukkit 1.12.2","body":"<p><em>First of all, this is the first time I create a Bukkit plugin.</em></p>\n<p>Basically, when someone does a certain action with a block and checks certain conditions, I would like it to <strong>emit a redstone signal</strong> (the block). The code is executed in the Bukkit <strong>PlayerInteractEvent</strong>.\nExcept that after a lot of research, I still haven't found a single (working) solution, neither on the forums, nor in the documentation.</p>\n<p>I don't know how to <strong>tell Minecraft that this block can emit redstone</strong> (<em>if it needs it</em>). If I don't say anything stupid, it was created with a <strong>dynamX pack</strong> (the mod that contains the block).</p>\n<p>I already looked at this solution: <a href=\"https://stackoverflow.com/questions/40376835/bukkit-set-a-block-powered\">Bukkit: Set a block powered</a>, but it doesn't match my expectations and doesn't work.</p>\n<p>So I was wondering if it was possible to <strong>emit a redstone signal on a specific block</strong> with <strong>Bukkit 1.12.2</strong>, or at a <strong>specific coordinate</strong>. This would solve all the problems related to this.</p>\n<p>I thank you in advance.</p>\n"},{"tags":["java","build","package","ant"],"comments":[{"owner":{"account_id":2667845,"reputation":10491,"user_id":2305826,"accept_rate":89,"display_name":"MarsAtomic"},"score":0,"creation_date":1669601129,"post_id":74594887,"comment_id":131671763,"body_markdown":"You might do well to indicate your installed Java version. It&#39;s likely you&#39;ll have to install an earlier version to build without issues.","body":"You might do well to indicate your installed Java version. It&#39;s likely you&#39;ll have to install an earlier version to build without issues."},{"owner":{"account_id":14790514,"reputation":433,"user_id":10681609,"display_name":"yasel"},"score":0,"creation_date":1669652343,"post_id":74594887,"comment_id":131685454,"body_markdown":"I have updated the question with the Java versions","body":"I have updated the question with the Java versions"},{"owner":{"account_id":2667845,"reputation":10491,"user_id":2305826,"accept_rate":89,"display_name":"MarsAtomic"},"score":0,"creation_date":1669660731,"post_id":74594887,"comment_id":131688311,"body_markdown":"Your Java versions don&#39;t seem to align with each other. JDK 19 is installed, yet &quot;java -version&quot; points to Java 8? And you still have a JRE installed? I would start by uninstalling JDK (including removing references to JDK 19 from PATH) and trying. If all else fails, nuke all Java from orbit (delete and reinstall only jJava 8) -- it&#39;s the only way to be sure.","body":"Your Java versions don&#39;t seem to align with each other. JDK 19 is installed, yet &quot;java -version&quot; points to Java 8? And you still have a JRE installed? I would start by uninstalling JDK (including removing references to JDK 19 from PATH) and trying. If all else fails, nuke all Java from orbit (delete and reinstall only jJava 8) -- it&#39;s the only way to be sure."}],"owner":{"account_id":14790514,"reputation":433,"user_id":10681609,"display_name":"yasel"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":22,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1669652321,"creation_date":1669595741,"question_id":74594887,"body_markdown":"I am trying to use the Java software package https://github.com/yoann-dufresne/Smiles2Monomers on a Windows 10 computer. The installation worked fine until running the `ant preCompute` command which returns:\r\n\r\n    C:\\Users\\elabi\\Smiles2Monomers&gt;ant preCompute\r\n    Buildfile: C:\\Users\\elabi\\Smiles2Monomers\\build.xml\r\n    \r\n    preCompute:\r\n         [java] JVM args ignored when same JVM is used.\r\n    \r\n    BUILD FAILED\r\n    C:\\Users\\elabi\\Smiles2Monomers\\build.xml:81: java.lang.UnsupportedOperationException: The Security Manager is deprecated and will be removed in a future release\r\n            at java.base/java.lang.System.setSecurityManager(System.java:425)\r\n            at org.apache.tools.ant.types.Permissions.setSecurityManager(Permissions.java:103)\r\n            at org.apache.tools.ant.taskdefs.ExecuteJava.run(ExecuteJava.java:216)\r\n            at org.apache.tools.ant.taskdefs.ExecuteJava.execute(ExecuteJava.java:155)\r\n            at org.apache.tools.ant.taskdefs.Java.run(Java.java:891)\r\n            at org.apache.tools.ant.taskdefs.Java.executeJava(Java.java:231)\r\n            at org.apache.tools.ant.taskdefs.Java.executeJava(Java.java:135)\r\n            at org.apache.tools.ant.taskdefs.Java.execute(Java.java:108)\r\n            at org.apache.tools.ant.UnknownElement.execute(UnknownElement.java:299)\r\n            at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)\r\n            at java.base/java.lang.reflect.Method.invoke(Method.java:578)\r\n            at org.apache.tools.ant.dispatch.DispatchUtils.execute(DispatchUtils.java:99)\r\n            at org.apache.tools.ant.Task.perform(Task.java:350)\r\n            at org.apache.tools.ant.Target.execute(Target.java:449)\r\n            at org.apache.tools.ant.Target.performTasks(Target.java:470)\r\n            at org.apache.tools.ant.Project.executeSortedTargets(Project.java:1401)\r\n            at org.apache.tools.ant.Project.executeTarget(Project.java:1374)\r\n            at org.apache.tools.ant.helper.DefaultExecutor.executeTargets(DefaultExecutor.java:41)\r\n            at org.apache.tools.ant.Project.executeTargets(Project.java:1264)\r\n            at org.apache.tools.ant.Main.runBuild(Main.java:818)\r\n            at org.apache.tools.ant.Main.startAnt(Main.java:223)\r\n            at org.apache.tools.ant.launch.Launcher.run(Launcher.java:284)\r\n            at org.apache.tools.ant.launch.Launcher.main(Launcher.java:101)\r\n    \r\n    Total time: 0 seconds\r\n\r\n\r\nI posted an issue and their GitHub but doubt there will be a solution since the package has not been updated in 5 years, but if they answer I will post the solution also here. Does anybody know why the build fails and how I could still get it running? \r\n\r\nI have Java version 8 (build 1.8.0_351-b10), jdk-19 and jre1.8.0_351.","title":"Smiles2Monomers build fails","body":"<p>I am trying to use the Java software package <a href=\"https://github.com/yoann-dufresne/Smiles2Monomers\" rel=\"nofollow noreferrer\">https://github.com/yoann-dufresne/Smiles2Monomers</a> on a Windows 10 computer. The installation worked fine until running the <code>ant preCompute</code> command which returns:</p>\n<pre><code>C:\\Users\\elabi\\Smiles2Monomers&gt;ant preCompute\nBuildfile: C:\\Users\\elabi\\Smiles2Monomers\\build.xml\n\npreCompute:\n     [java] JVM args ignored when same JVM is used.\n\nBUILD FAILED\nC:\\Users\\elabi\\Smiles2Monomers\\build.xml:81: java.lang.UnsupportedOperationException: The Security Manager is deprecated and will be removed in a future release\n        at java.base/java.lang.System.setSecurityManager(System.java:425)\n        at org.apache.tools.ant.types.Permissions.setSecurityManager(Permissions.java:103)\n        at org.apache.tools.ant.taskdefs.ExecuteJava.run(ExecuteJava.java:216)\n        at org.apache.tools.ant.taskdefs.ExecuteJava.execute(ExecuteJava.java:155)\n        at org.apache.tools.ant.taskdefs.Java.run(Java.java:891)\n        at org.apache.tools.ant.taskdefs.Java.executeJava(Java.java:231)\n        at org.apache.tools.ant.taskdefs.Java.executeJava(Java.java:135)\n        at org.apache.tools.ant.taskdefs.Java.execute(Java.java:108)\n        at org.apache.tools.ant.UnknownElement.execute(UnknownElement.java:299)\n        at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)\n        at java.base/java.lang.reflect.Method.invoke(Method.java:578)\n        at org.apache.tools.ant.dispatch.DispatchUtils.execute(DispatchUtils.java:99)\n        at org.apache.tools.ant.Task.perform(Task.java:350)\n        at org.apache.tools.ant.Target.execute(Target.java:449)\n        at org.apache.tools.ant.Target.performTasks(Target.java:470)\n        at org.apache.tools.ant.Project.executeSortedTargets(Project.java:1401)\n        at org.apache.tools.ant.Project.executeTarget(Project.java:1374)\n        at org.apache.tools.ant.helper.DefaultExecutor.executeTargets(DefaultExecutor.java:41)\n        at org.apache.tools.ant.Project.executeTargets(Project.java:1264)\n        at org.apache.tools.ant.Main.runBuild(Main.java:818)\n        at org.apache.tools.ant.Main.startAnt(Main.java:223)\n        at org.apache.tools.ant.launch.Launcher.run(Launcher.java:284)\n        at org.apache.tools.ant.launch.Launcher.main(Launcher.java:101)\n\nTotal time: 0 seconds\n</code></pre>\n<p>I posted an issue and their GitHub but doubt there will be a solution since the package has not been updated in 5 years, but if they answer I will post the solution also here. Does anybody know why the build fails and how I could still get it running?</p>\n<p>I have Java version 8 (build 1.8.0_351-b10), jdk-19 and jre1.8.0_351.</p>\n"},{"tags":["java","mocking","mockito","powermock"],"answers":[{"tags":[],"owner":{"account_id":1250747,"reputation":12431,"user_id":1640490,"accept_rate":92,"display_name":"nano_nano"},"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1669652011,"creation_date":1372770128,"answer_id":17426370,"question_id":17426313,"body_markdown":"If I understood correctly, you want something like this:\r\n\r\n    @Test(expected = NullPointerException.class)\r\n    public void testNPENotThrown {\r\n        Calling calling= Mock(Calling .class);\r\n        testClass.setInner(calling);\r\n        testClass.setThrow(true);\r\n\r\n        testClass.testMethod();\r\n\r\n        verify(calling, never()).method();\r\n        Assert.fail(&quot;No NPE&quot;);\r\n    }\r\n\r\nbut by the naming of the test &quot;NPENotThrown&quot; I would expect a test like this:\r\n\r\n    public void testNPENotThrown {\r\n        Calling calling= Mock(Calling .class);\r\n        testClass.setInner(calling);\r\n        testClass.setThrow(true);\r\n\r\n        testClass.testMethod();\r\n        try {\r\n            verify(calling, never()).method();\r\n            Assert.assertTrue(Boolean.TRUE);\r\n        } catch(NullPointerException ex) {\r\n            Assert.fail(ex.getMessage());\r\n        }\r\n    }\r\n","title":"How to verify that an exception was not thrown","body":"<p>If I understood correctly, you want something like this:</p>\n<pre><code>@Test(expected = NullPointerException.class)\npublic void testNPENotThrown {\n    Calling calling= Mock(Calling .class);\n    testClass.setInner(calling);\n    testClass.setThrow(true);\n\n    testClass.testMethod();\n\n    verify(calling, never()).method();\n    Assert.fail(&quot;No NPE&quot;);\n}\n</code></pre>\n<p>but by the naming of the test &quot;NPENotThrown&quot; I would expect a test like this:</p>\n<pre><code>public void testNPENotThrown {\n    Calling calling= Mock(Calling .class);\n    testClass.setInner(calling);\n    testClass.setThrow(true);\n\n    testClass.testMethod();\n    try {\n        verify(calling, never()).method();\n        Assert.assertTrue(Boolean.TRUE);\n    } catch(NullPointerException ex) {\n        Assert.fail(ex.getMessage());\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2678195,"reputation":68091,"user_id":2314073,"accept_rate":56,"display_name":"Juned Ahsan"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1372770378,"creation_date":1372770378,"answer_id":17426450,"question_id":17426313,"body_markdown":"Generally each test case runs with a new instance so setting an instance variable will not help. So make &#39;`throw`&#39; variable static if not.","title":"How to verify that an exception was not thrown","body":"<p>Generally each test case runs with a new instance so setting an instance variable will not help. So make '<code>throw</code>' variable static if not.</p>\n"},{"tags":[],"owner":{"account_id":63708,"reputation":2087,"user_id":188453,"accept_rate":83,"display_name":"Mark Chorley"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1372806977,"creation_date":1372770527,"answer_id":17426506,"question_id":17426313,"body_markdown":"Another approach might be to use try/catch instead. It&#39;s a bit untidy but from what I understand this test is going to be short-lived anyway as it&#39;s for TDD:\r\n\r\n    @Test\r\n    public void testNPENotThrown{\r\n      Calling calling= Mock(Calling.class);\r\n      testClass.setInner(calling);\r\n      testClass.setThrow(true);\r\n        \r\n      try{\r\n        testClass.testMethod();\r\n        fail(&quot;NPE not thrown&quot;);\r\n      }catch (NullPointerException e){\r\n        //expected behaviour\r\n      }\r\n    }\r\n\r\n\r\n\r\nEDIT: I was in a hurry when I wrote this. What I mean by &#39;this test is going to be short-lived anyway as it&#39;s for TDD&#39; is that you say you are going to write some code to fix this test straight away, so it will never throw a NullPointerException in the future. Then you might as well delete the test. Consequently it&#39;s probably not worth spending a lot of time writing a beautiful test (hence my suggestion :-))\r\n\r\nMore generally:\r\n\r\nStarting off with a test to assert that (for example) the return value of a method is not null is an established TDD principle, and checking for a NullPointerException (NPE) is one possible way of going about this. However your production code is presumably not going to have a flow where a NPE  is thrown. You are going to check for null and then do something sensible, I imagine. That would make this particular test redundant at that point as it will be checking an NPE is not thrown, when in fact it can never happen. You might then replace it with a test which verifies what does happen when a null is encountered: returns a NullObject for example, or throws some other type of exception, whatever is appropriate. \r\n\r\nThere is of course no requirement that you delete the redundant test, but if you don&#39;t, it will sit there making each build slightly slower, and causing each developer who reads the test to wonder; &quot;Hmm, an NPE? Surely this code can&#39;t throw an NPE?&quot;. I have seen a lot of TDD code where the test classes have a lot of redundant tests like this. If time permits it pays to review your tests every so often.","title":"How to verify that an exception was not thrown","body":"<p>Another approach might be to use try/catch instead. It's a bit untidy but from what I understand this test is going to be short-lived anyway as it's for TDD:</p>\n\n<pre><code>@Test\npublic void testNPENotThrown{\n  Calling calling= Mock(Calling.class);\n  testClass.setInner(calling);\n  testClass.setThrow(true);\n\n  try{\n    testClass.testMethod();\n    fail(\"NPE not thrown\");\n  }catch (NullPointerException e){\n    //expected behaviour\n  }\n}\n</code></pre>\n\n<p>EDIT: I was in a hurry when I wrote this. What I mean by 'this test is going to be short-lived anyway as it's for TDD' is that you say you are going to write some code to fix this test straight away, so it will never throw a NullPointerException in the future. Then you might as well delete the test. Consequently it's probably not worth spending a lot of time writing a beautiful test (hence my suggestion :-))</p>\n\n<p>More generally:</p>\n\n<p>Starting off with a test to assert that (for example) the return value of a method is not null is an established TDD principle, and checking for a NullPointerException (NPE) is one possible way of going about this. However your production code is presumably not going to have a flow where a NPE  is thrown. You are going to check for null and then do something sensible, I imagine. That would make this particular test redundant at that point as it will be checking an NPE is not thrown, when in fact it can never happen. You might then replace it with a test which verifies what does happen when a null is encountered: returns a NullObject for example, or throws some other type of exception, whatever is appropriate. </p>\n\n<p>There is of course no requirement that you delete the redundant test, but if you don't, it will sit there making each build slightly slower, and causing each developer who reads the test to wonder; \"Hmm, an NPE? Surely this code can't throw an NPE?\". I have seen a lot of TDD code where the test classes have a lot of redundant tests like this. If time permits it pays to review your tests every so often.</p>\n"},{"tags":[],"owner":{"account_id":20228,"reputation":40720,"user_id":48136,"display_name":"bric3"},"down_vote_count":0,"up_vote_count":20,"is_accepted":true,"score":20,"last_activity_date":1585487305,"creation_date":1372775787,"answer_id":17428439,"question_id":17426313,"body_markdown":"**tl;dr**\r\n\r\n* post-JDK8 : Use **AssertJ** or custom lambdas to assert _exceptional_ behaviour.\r\n\r\n* pre-JDK8 : I will recommend the old good `try`-`catch` block. (_Don&#39;t forget to add a `fail()` assertion before the `catch` block_)\r\n\r\n_Regardless of Junit 4 or JUnit 5._\r\n\r\n**the long story**\r\n\r\nIt is possible to write yourself a _do it yourself_ `try`-`catch` block or use the JUnit tools (`@Test(expected = ...)` or the `@Rule ExpectedException` JUnit rule feature).\r\n\r\nBut these ways are not so elegant and don&#39;t mix well _readability wise_ with other tools. Moreover, JUnit tooling does have some pitfalls.\r\n\r\n1. The `try`-`catch` block you have to write the block around the tested behavior and write the assertion in the catch block, that may be fine but many find that this style interrupts the reading flow of a test. Also, you need to write an `Assert.fail` at the end of the `try` block. Otherwise, the test may miss one side of the assertions; _PMD_, _findbugs_ or _Sonar_ will spot such issues.\r\n\r\n2. The `@Test(expected = ...)` feature is interesting as you can write less code and then writing this test is supposedly less prone to coding errors. **But** this approach is lacking in some areas.\r\n    * If the test needs to check additional things on the exception like the cause or the message (good exception messages are really important, having a precise exception type may not be enough). \r\n    * Also as the expectation is placed around in the method, depending on how the tested code is written then the wrong part of the test code can throw the exception, leading to false-positive test and I&#39;m not sure that _PMD_, _findbugs_ or _Sonar_ will give hints on such code.\r\n\r\n            @Test(expected = WantedException.class)\r\n            public void call2_should_throw_a_WantedException__not_call1() {\r\n                // init tested\r\n                tested.call1(); // may throw a WantedException\r\n    \r\n                // call to be actually tested\r\n                tested.call2(); // the call that is supposed to raise an exception\r\n            }\r\n\r\n3. The `ExpectedException` rule is also an attempt to fix the previous caveats, but it feels a bit awkward to use as it uses an expectation style, _EasyMock_ users know very well this style. It might be convenient for some, but if you follow _Behaviour Driven Development_ (BDD) or _Arrange Act Assert_ (AAA) principles the `ExpectedException` rule won&#39;t fit in those writing style. Aside from that it may suffer from the same issue as the `@Test` way, depending on where you place the expectation.\r\n\r\n\r\n        @Rule ExpectedException thrown = ExpectedException.none()\r\n\r\n        @Test\r\n        public void call2_should_throw_a_WantedException__not_call1() {\r\n            // expectations\r\n            thrown.expect(WantedException.class);\r\n            thrown.expectMessage(&quot;boom&quot;);\r\n\r\n            // init tested\r\n            tested.call1(); // may throw a WantedException\r\n    \r\n            // call to be actually tested\r\n            tested.call2(); // the call that is supposed to raise an exception\r\n        }\r\n\r\n    Even the expected exception is placed before the test statement, it breaks your reading flow if the tests follow BDD or AAA.\r\n\r\n    Also, see this [comment][1] issue on JUnit of the author of `ExpectedException`. [JUnit 4.13-beta-2][2] even deprecates this mechanism:\r\n\r\n    &gt; [Pull request #1519][3]: Deprecate ExpectedException\r\n    &gt; \r\n    &gt; The method Assert.assertThrows provides a nicer way for verifying exceptions. In addition, the use of ExpectedException is error-prone when used with other rules like TestWatcher because the order of rules is important in that case.\r\n\r\n\r\nSo these above options have all their load of caveats, and clearly not immune to coder errors.\r\n\r\n4. There&#39;s a project I became aware of after creating this answer that looks promising, it&#39;s [**catch-exception**][4].\r\n\r\n    As the description of the project says, it let a coder write in a fluent line of code catching the exception and offer this exception for the latter assertion. And you can use any assertion library like [Hamcrest][5] or [AssertJ][6].\r\n    \r\n    A rapid example taken from the home page : \r\n    \r\n        // given: an empty list\r\n        List myList = new ArrayList();\r\n        \r\n        // when: we try to get the first element of the list\r\n        when(myList).get(1);\r\n        \r\n        // then: we expect an IndexOutOfBoundsException\r\n        then(caughtException())\r\n                .isInstanceOf(IndexOutOfBoundsException.class)\r\n                .hasMessage(&quot;Index: 1, Size: 0&quot;) \r\n                .hasNoCause();\r\n    \r\n    As you can see the code is really straightforward, you catch the exception on a specific line, the `then` API is an alias that will use AssertJ APIs (similar to using `assertThat(ex).hasNoCause()...`). _At some point the project relied on FEST-Assert the ancestor of AssertJ_. **EDIT:** It seems the project is brewing a Java 8 Lambdas support.\r\n    \r\n    Currently, this library has two shortcomings : \r\n      * At the time of this writing, it is noteworthy to say this library is based on Mockito 1.x as it creates a mock of the tested object behind the scene. As Mockito is still not updated **this library cannot work with final classes or final methods**. And even if it was based on Mockito 2 in the current version, this would require to declare a global mock maker (`inline-mock-maker`), something that may not what you want, as this mock maker has different drawbacks that the regular mock maker.\r\n\r\n      * It requires yet another test dependency.\r\n    \r\n    These issues won&#39;t apply once the library supports lambdas. However, the functionality will be duplicated by the AssertJ toolset.\r\n\r\n    **Taking all into account if you don&#39;t want to use the catch-exception tool, I will recommend the old good way of the `try`-`catch` block, at least up to the JDK7. And for JDK 8 users you might prefer to use AssertJ as it offers may more than just asserting exceptions.**\r\n\r\n5. With the JDK8, lambdas enter the test scene, and they have proved to be an interesting way to assert exceptional behaviour. AssertJ has been updated to provide a nice fluent API to assert exceptional behaviour.\r\n\r\n    And a sample test with [AssertJ][7] :\r\n    \r\n        @Test\r\n        public void test_exception_approach_1() {\r\n            ...\r\n            assertThatExceptionOfType(IOException.class)\r\n                    .isThrownBy(() -&gt; someBadIOOperation())\r\n                    .withMessage(&quot;boom!&quot;); \r\n        }\r\n    \r\n        @Test\r\n        public void test_exception_approach_2() {\r\n            ...\r\n            assertThatThrownBy(() -&gt; someBadIOOperation())\r\n                    .isInstanceOf(Exception.class)\r\n                    .hasMessageContaining(&quot;boom&quot;);\r\n        }\r\n    \r\n        @Test\r\n        public void test_exception_approach_3() {\r\n            ...\r\n            // when\r\n            Throwable thrown = catchThrowable(() -&gt; someBadIOOperation());\r\n    \r\n            // then\r\n            assertThat(thrown).isInstanceOf(Exception.class)\r\n                              .hasMessageContaining(&quot;boom&quot;);\r\n        }\r\n\r\n6. With a near-complete rewrite of JUnit 5, assertions have been [improved][8] a bit, they may prove interesting as an out of the box way to assert properly exception. But really the assertion API is still a bit poor, there&#39;s nothing outside [`assertThrows`][9]. \r\n\r\n        @Test\r\n        @DisplayName(&quot;throws EmptyStackException when peeked&quot;)\r\n        void throwsExceptionWhenPeeked() {\r\n            Throwable t = assertThrows(EmptyStackException.class, () -&gt; stack.peek());\r\n\r\n            Assertions.assertEquals(&quot;...&quot;, t.getMessage());\r\n        }\r\n\r\n    As you noticed `assertEquals` is still returning `void`, and as such doesn&#39;t allow chaining assertions like AssertJ.\r\n\r\n    Also if you remember name clash with `Matcher` or `Assert`, be prepared to meet the same clash with `Assertions`.\r\n\r\nI&#39;d like to conclude that today (2017-03-03) **AssertJ**&#39;s ease of use, discoverable API, the rapid pace of development and as a _de facto_ test dependency is the best solution with JDK8 regardless of the test framework (JUnit or not), prior JDKs should instead rely on **`try`-`catch`** blocks even if they feel clunky.\r\n\r\n\r\n  [1]: https://github.com/junit-team/junit4/issues/706#issuecomment-21385116\r\n  [2]: https://github.com/junit-team/junit4/wiki/4.13-Release-Notes\r\n  [3]: https://github.com/junit-team/junit4/pull/1519\r\n  [4]: https://github.com/Codearte/catch-exception\r\n  [5]: https://github.com/hamcrest/JavaHamcrest\r\n  [6]: https://github.com/joel-costigliola/assertj-core\r\n  [7]: http://joel-costigliola.github.io/assertj/\r\n  [8]: http://junit.org/junit5/docs/current/user-guide/#writing-tests-assertions\r\n  [9]: http://junit.org/junit5/docs/current/api/org/junit/jupiter/api/Assertions.html#assertThrows-java.lang.Class-org.junit.jupiter.api.function.Executable-","title":"How to verify that an exception was not thrown","body":"<p><strong>tl;dr</strong></p>\n\n<ul>\n<li><p>post-JDK8 : Use <strong>AssertJ</strong> or custom lambdas to assert <em>exceptional</em> behaviour.</p></li>\n<li><p>pre-JDK8 : I will recommend the old good <code>try</code>-<code>catch</code> block. (<em>Don't forget to add a <code>fail()</code> assertion before the <code>catch</code> block</em>)</p></li>\n</ul>\n\n<p><em>Regardless of Junit 4 or JUnit 5.</em></p>\n\n<p><strong>the long story</strong></p>\n\n<p>It is possible to write yourself a <em>do it yourself</em> <code>try</code>-<code>catch</code> block or use the JUnit tools (<code>@Test(expected = ...)</code> or the <code>@Rule ExpectedException</code> JUnit rule feature).</p>\n\n<p>But these ways are not so elegant and don't mix well <em>readability wise</em> with other tools. Moreover, JUnit tooling does have some pitfalls.</p>\n\n<ol>\n<li><p>The <code>try</code>-<code>catch</code> block you have to write the block around the tested behavior and write the assertion in the catch block, that may be fine but many find that this style interrupts the reading flow of a test. Also, you need to write an <code>Assert.fail</code> at the end of the <code>try</code> block. Otherwise, the test may miss one side of the assertions; <em>PMD</em>, <em>findbugs</em> or <em>Sonar</em> will spot such issues.</p></li>\n<li><p>The <code>@Test(expected = ...)</code> feature is interesting as you can write less code and then writing this test is supposedly less prone to coding errors. <strong>But</strong> this approach is lacking in some areas.</p>\n\n<ul>\n<li>If the test needs to check additional things on the exception like the cause or the message (good exception messages are really important, having a precise exception type may not be enough). </li>\n<li><p>Also as the expectation is placed around in the method, depending on how the tested code is written then the wrong part of the test code can throw the exception, leading to false-positive test and I'm not sure that <em>PMD</em>, <em>findbugs</em> or <em>Sonar</em> will give hints on such code.</p>\n\n<pre><code>@Test(expected = WantedException.class)\npublic void call2_should_throw_a_WantedException__not_call1() {\n    // init tested\n    tested.call1(); // may throw a WantedException\n\n    // call to be actually tested\n    tested.call2(); // the call that is supposed to raise an exception\n}\n</code></pre></li>\n</ul></li>\n<li><p>The <code>ExpectedException</code> rule is also an attempt to fix the previous caveats, but it feels a bit awkward to use as it uses an expectation style, <em>EasyMock</em> users know very well this style. It might be convenient for some, but if you follow <em>Behaviour Driven Development</em> (BDD) or <em>Arrange Act Assert</em> (AAA) principles the <code>ExpectedException</code> rule won't fit in those writing style. Aside from that it may suffer from the same issue as the <code>@Test</code> way, depending on where you place the expectation.</p>\n\n<pre><code>@Rule ExpectedException thrown = ExpectedException.none()\n\n@Test\npublic void call2_should_throw_a_WantedException__not_call1() {\n    // expectations\n    thrown.expect(WantedException.class);\n    thrown.expectMessage(\"boom\");\n\n    // init tested\n    tested.call1(); // may throw a WantedException\n\n    // call to be actually tested\n    tested.call2(); // the call that is supposed to raise an exception\n}\n</code></pre>\n\n<p>Even the expected exception is placed before the test statement, it breaks your reading flow if the tests follow BDD or AAA.</p>\n\n<p>Also, see this <a href=\"https://github.com/junit-team/junit4/issues/706#issuecomment-21385116\" rel=\"nofollow noreferrer\">comment</a> issue on JUnit of the author of <code>ExpectedException</code>. <a href=\"https://github.com/junit-team/junit4/wiki/4.13-Release-Notes\" rel=\"nofollow noreferrer\">JUnit 4.13-beta-2</a> even deprecates this mechanism:</p>\n\n<blockquote>\n  <p><a href=\"https://github.com/junit-team/junit4/pull/1519\" rel=\"nofollow noreferrer\">Pull request #1519</a>: Deprecate ExpectedException</p>\n  \n  <p>The method Assert.assertThrows provides a nicer way for verifying exceptions. In addition, the use of ExpectedException is error-prone when used with other rules like TestWatcher because the order of rules is important in that case.</p>\n</blockquote></li>\n</ol>\n\n<p>So these above options have all their load of caveats, and clearly not immune to coder errors.</p>\n\n<ol start=\"4\">\n<li><p>There's a project I became aware of after creating this answer that looks promising, it's <a href=\"https://github.com/Codearte/catch-exception\" rel=\"nofollow noreferrer\"><strong>catch-exception</strong></a>.</p>\n\n<p>As the description of the project says, it let a coder write in a fluent line of code catching the exception and offer this exception for the latter assertion. And you can use any assertion library like <a href=\"https://github.com/hamcrest/JavaHamcrest\" rel=\"nofollow noreferrer\">Hamcrest</a> or <a href=\"https://github.com/joel-costigliola/assertj-core\" rel=\"nofollow noreferrer\">AssertJ</a>.</p>\n\n<p>A rapid example taken from the home page : </p>\n\n<pre><code>// given: an empty list\nList myList = new ArrayList();\n\n// when: we try to get the first element of the list\nwhen(myList).get(1);\n\n// then: we expect an IndexOutOfBoundsException\nthen(caughtException())\n        .isInstanceOf(IndexOutOfBoundsException.class)\n        .hasMessage(\"Index: 1, Size: 0\") \n        .hasNoCause();\n</code></pre>\n\n<p>As you can see the code is really straightforward, you catch the exception on a specific line, the <code>then</code> API is an alias that will use AssertJ APIs (similar to using <code>assertThat(ex).hasNoCause()...</code>). <em>At some point the project relied on FEST-Assert the ancestor of AssertJ</em>. <strong>EDIT:</strong> It seems the project is brewing a Java 8 Lambdas support.</p>\n\n<p>Currently, this library has two shortcomings : </p>\n\n<ul>\n<li><p>At the time of this writing, it is noteworthy to say this library is based on Mockito 1.x as it creates a mock of the tested object behind the scene. As Mockito is still not updated <strong>this library cannot work with final classes or final methods</strong>. And even if it was based on Mockito 2 in the current version, this would require to declare a global mock maker (<code>inline-mock-maker</code>), something that may not what you want, as this mock maker has different drawbacks that the regular mock maker.</p></li>\n<li><p>It requires yet another test dependency.</p></li>\n</ul>\n\n<p>These issues won't apply once the library supports lambdas. However, the functionality will be duplicated by the AssertJ toolset.</p>\n\n<p><strong>Taking all into account if you don't want to use the catch-exception tool, I will recommend the old good way of the <code>try</code>-<code>catch</code> block, at least up to the JDK7. And for JDK 8 users you might prefer to use AssertJ as it offers may more than just asserting exceptions.</strong></p></li>\n<li><p>With the JDK8, lambdas enter the test scene, and they have proved to be an interesting way to assert exceptional behaviour. AssertJ has been updated to provide a nice fluent API to assert exceptional behaviour.</p>\n\n<p>And a sample test with <a href=\"http://joel-costigliola.github.io/assertj/\" rel=\"nofollow noreferrer\">AssertJ</a> :</p>\n\n<pre><code>@Test\npublic void test_exception_approach_1() {\n    ...\n    assertThatExceptionOfType(IOException.class)\n            .isThrownBy(() -&gt; someBadIOOperation())\n            .withMessage(\"boom!\"); \n}\n\n@Test\npublic void test_exception_approach_2() {\n    ...\n    assertThatThrownBy(() -&gt; someBadIOOperation())\n            .isInstanceOf(Exception.class)\n            .hasMessageContaining(\"boom\");\n}\n\n@Test\npublic void test_exception_approach_3() {\n    ...\n    // when\n    Throwable thrown = catchThrowable(() -&gt; someBadIOOperation());\n\n    // then\n    assertThat(thrown).isInstanceOf(Exception.class)\n                      .hasMessageContaining(\"boom\");\n}\n</code></pre></li>\n<li><p>With a near-complete rewrite of JUnit 5, assertions have been <a href=\"http://junit.org/junit5/docs/current/user-guide/#writing-tests-assertions\" rel=\"nofollow noreferrer\">improved</a> a bit, they may prove interesting as an out of the box way to assert properly exception. But really the assertion API is still a bit poor, there's nothing outside <a href=\"http://junit.org/junit5/docs/current/api/org/junit/jupiter/api/Assertions.html#assertThrows-java.lang.Class-org.junit.jupiter.api.function.Executable-\" rel=\"nofollow noreferrer\"><code>assertThrows</code></a>. </p>\n\n<pre><code>@Test\n@DisplayName(\"throws EmptyStackException when peeked\")\nvoid throwsExceptionWhenPeeked() {\n    Throwable t = assertThrows(EmptyStackException.class, () -&gt; stack.peek());\n\n    Assertions.assertEquals(\"...\", t.getMessage());\n}\n</code></pre>\n\n<p>As you noticed <code>assertEquals</code> is still returning <code>void</code>, and as such doesn't allow chaining assertions like AssertJ.</p>\n\n<p>Also if you remember name clash with <code>Matcher</code> or <code>Assert</code>, be prepared to meet the same clash with <code>Assertions</code>.</p></li>\n</ol>\n\n<p>I'd like to conclude that today (2017-03-03) <strong>AssertJ</strong>'s ease of use, discoverable API, the rapid pace of development and as a <em>de facto</em> test dependency is the best solution with JDK8 regardless of the test framework (JUnit or not), prior JDKs should instead rely on <strong><code>try</code>-<code>catch</code></strong> blocks even if they feel clunky.</p>\n"}],"owner":{"account_id":2996135,"reputation":369,"user_id":2542652,"accept_rate":60,"display_name":"well_i"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":47017,"favorite_count":0,"down_vote_count":0,"up_vote_count":22,"accepted_answer_id":17428439,"answer_count":4,"score":22,"last_activity_date":1669652011,"creation_date":1372769949,"question_id":17426313,"body_markdown":"In my unit test using Mockito I want to verify that `NullPointerException` was not thrown.\r\n\r\n    public void testNPENotThrown{\r\n        Calling calling= Mock(Calling.class);\r\n        testClass.setInner(calling);\r\n        testClass.setThrow(true);\r\n      \r\n        testClass.testMethod();\r\n\r\n        verify(calling, never()).method();\r\n    }\r\n\r\nMy test set up the `testClass`, setting the `Calling` object and the property so that the method will throw a `NullPointerException`.\r\n\r\nI **verify** that the Calling.method() is never called.\r\n\r\n    public void testMethod(){\r\n        if(throw) {\r\n            throw new NullPointerException();\r\n        }\r\n\r\n        calling.method();\r\n    }\r\n\r\nI want to have a failing test because it throws a `NullPointerException`, and then I want to write some code to fix this.  \r\n\r\nWhat I have noticed is that the test always passes as the exception is never thrown up the the test method.","title":"How to verify that an exception was not thrown","body":"<p>In my unit test using Mockito I want to verify that <code>NullPointerException</code> was not thrown.</p>\n\n<pre><code>public void testNPENotThrown{\n    Calling calling= Mock(Calling.class);\n    testClass.setInner(calling);\n    testClass.setThrow(true);\n\n    testClass.testMethod();\n\n    verify(calling, never()).method();\n}\n</code></pre>\n\n<p>My test set up the <code>testClass</code>, setting the <code>Calling</code> object and the property so that the method will throw a <code>NullPointerException</code>.</p>\n\n<p>I <strong>verify</strong> that the Calling.method() is never called.</p>\n\n<pre><code>public void testMethod(){\n    if(throw) {\n        throw new NullPointerException();\n    }\n\n    calling.method();\n}\n</code></pre>\n\n<p>I want to have a failing test because it throws a <code>NullPointerException</code>, and then I want to write some code to fix this.  </p>\n\n<p>What I have noticed is that the test always passes as the exception is never thrown up the the test method.</p>\n"},{"tags":["java","regex","junit","mocking","wiremock"],"answers":[{"tags":[],"owner":{"account_id":16106441,"reputation":6176,"user_id":11625850,"display_name":"agoff"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1669651952,"creation_date":1669651952,"answer_id":74603457,"question_id":74575355,"body_markdown":"So, assuming you have valid XML (when I try to test your XML in the `XML` query parameter, I get an invalid XML error), [you can use `matchingXPath` in the query parameters][1] to match only when a certain value is met.\r\n\r\n```js\r\n{\r\n  &quot;request&quot;: {\r\n    &quot;urlPath&quot;: &quot;/Test.dll&quot;,\r\n    &quot;queryParameters&quot;: {\r\n      &quot;XML&quot;: {\r\n        &quot;matchesXPath&quot;: {\r\n          &quot;expression&quot;: &quot;/GetDataRequest/Address/Zipcode/text()&quot;,\r\n          &quot;equalTo&quot;: &quot;89898&quot;\r\n        }\r\n      }\r\n    }\r\n  },\r\n  &quot;response&quot;: {\r\n    &quot;status&quot;: 200\r\n  }\r\n}\r\n```\r\n\r\n\r\n  [1]: https://wiremock.org/docs/request-matching/#xpath","title":"Wiremock - How to have a request matching a word in the URL","body":"<p>So, assuming you have valid XML (when I try to test your XML in the <code>XML</code> query parameter, I get an invalid XML error), <a href=\"https://wiremock.org/docs/request-matching/#xpath\" rel=\"nofollow noreferrer\">you can use <code>matchingXPath</code> in the query parameters</a> to match only when a certain value is met.</p>\n<pre class=\"lang-js prettyprint-override\"><code>{\n  &quot;request&quot;: {\n    &quot;urlPath&quot;: &quot;/Test.dll&quot;,\n    &quot;queryParameters&quot;: {\n      &quot;XML&quot;: {\n        &quot;matchesXPath&quot;: {\n          &quot;expression&quot;: &quot;/GetDataRequest/Address/Zipcode/text()&quot;,\n          &quot;equalTo&quot;: &quot;89898&quot;\n        }\n      }\n    }\n  },\n  &quot;response&quot;: {\n    &quot;status&quot;: 200\n  }\n}\n</code></pre>\n"}],"owner":{"account_id":2986062,"reputation":101,"user_id":2534861,"accept_rate":14,"display_name":"Rtn9"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":174,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1669651952,"creation_date":1669392396,"question_id":74575355,"body_markdown":"I have a URL similar to `https://localhost:8080/Test.dll?API=GetData&amp;XML=&lt;GetDataRequest&gt;&lt;USERID=&#39;TEST1&#39;&gt;&lt;Address ID=&#39;0&#39;&gt;&lt;Address1&gt;500&lt;/Address1&gt;&lt;Address2&gt;TestAddress2&lt;/Address2&gt;&lt;City&gt;TestCity&lt;/City&gt;&lt;State&gt;FL&lt;/State&gt;&lt;Zipcode&gt;89898&lt;/Zipcode&gt;&lt;/Address&gt;&lt;/GetDataRequest&gt;`\r\n\r\nHow do I match the url against the string passed in &quot;Zipcode&quot; tags regardless of what is passed for other fields? In the above example, I want to match against &quot;TestAddress2&quot; data.","title":"Wiremock - How to have a request matching a word in the URL","body":"<p>I have a URL similar to <code>https://localhost:8080/Test.dll?API=GetData&amp;XML=&lt;GetDataRequest&gt;&lt;USERID='TEST1'&gt;&lt;Address ID='0'&gt;&lt;Address1&gt;500&lt;/Address1&gt;&lt;Address2&gt;TestAddress2&lt;/Address2&gt;&lt;City&gt;TestCity&lt;/City&gt;&lt;State&gt;FL&lt;/State&gt;&lt;Zipcode&gt;89898&lt;/Zipcode&gt;&lt;/Address&gt;&lt;/GetDataRequest&gt;</code></p>\n<p>How do I match the url against the string passed in &quot;Zipcode&quot; tags regardless of what is passed for other fields? In the above example, I want to match against &quot;TestAddress2&quot; data.</p>\n"},{"tags":["java","design-patterns"],"comments":[{"owner":{"account_id":1454932,"reputation":2504,"user_id":1370785,"accept_rate":59,"display_name":"jiveturkey"},"score":0,"creation_date":1669649127,"post_id":74602779,"comment_id":131684171,"body_markdown":"Not really sure I understand your problem.  Do you not have access to the base class (`AbstractLogger`)?","body":"Not really sure I understand your problem.  Do you not have access to the base class (<code>AbstractLogger</code>)?"},{"owner":{"account_id":5538438,"reputation":31,"user_id":7953882,"display_name":"Asaf"},"score":0,"creation_date":1669649250,"post_id":74602779,"comment_id":131684225,"body_markdown":"I wasn&#39;t clear, I meant without modify any of them","body":"I wasn&#39;t clear, I meant without modify any of them"},{"owner":{"account_id":1454932,"reputation":2504,"user_id":1370785,"accept_rate":59,"display_name":"jiveturkey"},"score":0,"creation_date":1669649310,"post_id":74602779,"comment_id":131684243,"body_markdown":"Well... you do actually have to write code.","body":"Well... you do actually have to write code."},{"owner":{"account_id":5538438,"reputation":31,"user_id":7953882,"display_name":"Asaf"},"score":0,"creation_date":1669649449,"post_id":74602779,"comment_id":131684289,"body_markdown":"I know, But do you have any idea how to add functionality without modifying the main abstract class?","body":"I know, But do you have any idea how to add functionality without modifying the main abstract class?"},{"owner":{"account_id":26247,"reputation":33763,"user_id":68105,"accept_rate":69,"display_name":"MK."},"score":0,"creation_date":1669649532,"post_id":74602779,"comment_id":131684321,"body_markdown":"@Asaf rewrite your question making it clear what is it that you are trying to do.","body":"@Asaf rewrite your question making it clear what is it that you are trying to do."},{"owner":{"account_id":19254723,"reputation":2061,"user_id":14071914,"display_name":"JustAnotherDeveloper"},"score":0,"creation_date":1669649601,"post_id":74602779,"comment_id":131684360,"body_markdown":"@Asaf: If you want to add functionality to class A, why do you not want to modify class A? Are there any existing classes that you&#39;d be willing and able to modify?","body":"@Asaf: If you want to add functionality to class A, why do you not want to modify class A? Are there any existing classes that you&#39;d be willing and able to modify?"}],"answers":[{"tags":[],"owner":{"account_id":401843,"reputation":89788,"user_id":768644,"display_name":"rzwitserloot"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1669649373,"creation_date":1669649203,"answer_id":74602863,"question_id":74602779,"body_markdown":"Simply add it to `AbstractLogger`:\r\n\r\n```\r\npublic abstract class AbstractLogger {\r\n  public enum Levels {\r\n      DEBUG, INFO, WARNING, ERROR, /* added */ FATAL,\r\n  }\r\n\r\n  public void fatal(String message) {\r\n    log(Levels.FATAL, message);\r\n  }\r\n}\r\n```\r\n\r\nGiven that the types that extend `AbstractLogger` all already implement the `log` method, then &#39;things will just work&#39; - possibly some of the implementations cannot deal with the fact that a new log level has now appeared. Assuming they were appropriately programmed, they&#39;ll throw. Your `FileAppenderLogger` class, for example, would just continue to work without requiring any change or even recompilation.\r\n\r\nThe key design pattern to make this work is that all those non-generic methods such as `.error(x)` are light wrappers that all send the data to a single method that does the real work - `log`. But, you already do that.\r\n\r\nNB: Reinventing the wheel is a bad idea. Logging frameworks already exist, use an existing one instead.\r\n\r\nNB2: Idiomatic java dictates you call your enum types the singular - it should be `Level`, not `Levels`. The type name describes, well, a type name. It&#39;s called `String`, not `Strings`, because an instance of `java.lang.String` represents one string. The class itself represents all strings, but that doesn&#39;t mean it should be called `Strings`. Similarly, an instance of the `Levels` enum represents a single level. Hence, it should be named `Level`, not `Levels`.\r\n","title":"Modify functionality of Parent class without rewrite in java","body":"<p>Simply add it to <code>AbstractLogger</code>:</p>\n<pre><code>public abstract class AbstractLogger {\n  public enum Levels {\n      DEBUG, INFO, WARNING, ERROR, /* added */ FATAL,\n  }\n\n  public void fatal(String message) {\n    log(Levels.FATAL, message);\n  }\n}\n</code></pre>\n<p>Given that the types that extend <code>AbstractLogger</code> all already implement the <code>log</code> method, then 'things will just work' - possibly some of the implementations cannot deal with the fact that a new log level has now appeared. Assuming they were appropriately programmed, they'll throw. Your <code>FileAppenderLogger</code> class, for example, would just continue to work without requiring any change or even recompilation.</p>\n<p>The key design pattern to make this work is that all those non-generic methods such as <code>.error(x)</code> are light wrappers that all send the data to a single method that does the real work - <code>log</code>. But, you already do that.</p>\n<p>NB: Reinventing the wheel is a bad idea. Logging frameworks already exist, use an existing one instead.</p>\n<p>NB2: Idiomatic java dictates you call your enum types the singular - it should be <code>Level</code>, not <code>Levels</code>. The type name describes, well, a type name. It's called <code>String</code>, not <code>Strings</code>, because an instance of <code>java.lang.String</code> represents one string. The class itself represents all strings, but that doesn't mean it should be called <code>Strings</code>. Similarly, an instance of the <code>Levels</code> enum represents a single level. Hence, it should be named <code>Level</code>, not <code>Levels</code>.</p>\n"},{"tags":[],"owner":{"account_id":26172849,"reputation":33,"user_id":19857533,"display_name":"TheEntropyShard"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1669650771,"creation_date":1669650771,"answer_id":74603182,"question_id":74602779,"body_markdown":"Instead of using ```enum``` for level, you can make class ```LogLevel``` and make classes that extend it, for example ```LogLevelError, LogLevelFatal```, then in log method: ```this.logLevel.log(message);```. Of course, it look strange, but this is the way I see to add new log levels. Also, as said by @rzwitserloot :&quot;NB: Reinventing the wheel is a bad idea. Logging frameworks already exist, use an existing one instead&quot;. They are much faster, optimized, and &#39;time-tested&#39;.","title":"Modify functionality of Parent class without rewrite in java","body":"<p>Instead of using <code>enum</code> for level, you can make class <code>LogLevel</code> and make classes that extend it, for example <code>LogLevelError, LogLevelFatal</code>, then in log method: <code>this.logLevel.log(message);</code>. Of course, it look strange, but this is the way I see to add new log levels. Also, as said by @rzwitserloot :&quot;NB: Reinventing the wheel is a bad idea. Logging frameworks already exist, use an existing one instead&quot;. They are much faster, optimized, and 'time-tested'.</p>\n"},{"tags":[],"owner":{"account_id":23783500,"reputation":5175,"user_id":17795888,"display_name":"Chaosfire"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1669651347,"creation_date":1669651347,"answer_id":74603325,"question_id":74602779,"body_markdown":"You **can&#39;t** add more values to your enum, that&#39;s not possible in java. I would suggest to either use a `String` for levels, or declare your own `Level` class, so you can add more levels.\r\n```\r\npublic class Level {\r\n\r\n    private final String levelName;\r\n\r\n    //getter, etc.\r\n}\r\n```\r\nTo extend the functionality of your `AbstractLogger`, without modifying it, you can wrap it in another class and declare the additional methods, `fatal()` in this case.\r\n```\r\npublic class ExtendedLogger extends AbstractLogger {\r\n\r\n    private final AbstractLogger abstractLogger;\r\n\r\n    public ExtendedLogger(AbstractLogger abstractLogger) {\r\n        this.abstractLogger = abstractLogger;\r\n    }\r\n\r\n    @Override\r\n    public void debug(String message) {\r\n        abstractLogger.debug(message);\r\n    }\r\n\r\n    //info, warning and rest of methods\r\n\r\n    @Override\r\n    public void log(Levels level, String message) {\r\n        abstractLogger.log(level, message);\r\n    }\r\n\r\n    public void fatal(String message) {\r\n        //implement\r\n    }\r\n}\r\n```","title":"Modify functionality of Parent class without rewrite in java","body":"<p>You <strong>can't</strong> add more values to your enum, that's not possible in java. I would suggest to either use a <code>String</code> for levels, or declare your own <code>Level</code> class, so you can add more levels.</p>\n<pre><code>public class Level {\n\n    private final String levelName;\n\n    //getter, etc.\n}\n</code></pre>\n<p>To extend the functionality of your <code>AbstractLogger</code>, without modifying it, you can wrap it in another class and declare the additional methods, <code>fatal()</code> in this case.</p>\n<pre><code>public class ExtendedLogger extends AbstractLogger {\n\n    private final AbstractLogger abstractLogger;\n\n    public ExtendedLogger(AbstractLogger abstractLogger) {\n        this.abstractLogger = abstractLogger;\n    }\n\n    @Override\n    public void debug(String message) {\n        abstractLogger.debug(message);\n    }\n\n    //info, warning and rest of methods\n\n    @Override\n    public void log(Levels level, String message) {\n        abstractLogger.log(level, message);\n    }\n\n    public void fatal(String message) {\n        //implement\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":960307,"reputation":107861,"user_id":984823,"display_name":"Joop Eggen"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1669651469,"creation_date":1669651469,"answer_id":74603353,"question_id":74602779,"body_markdown":"First: logger libraries are numerous, and the first reform was the introduction of `java.util.Logger` to unify things a bit. Still not the dead of the other logging libraries.\r\n\r\nThen came - especially for libraries - the underestimated **`System.Logger`**: a Logger fa&#231;ade that can be discover logging implementations. This allows publishing a library, use Logging, but leave the actual logging library choice to the library user.\r\n\r\nSo in that context meddling in class hierarchies and enum constants is counter-productive to say the least.\r\n\r\nWhat you can do is a specific configuration, say for some packages, implement a specific file handler (`FileHandler`, `Handler`), and reserve ERROR for your own FATALISH when using `*Exception` classes or such.\r\n\r\nThough seemingly simple, using `FileWriter` in the Logger child was not intended to be done as such. You should leave it to configuring the usage to your own `Handler` class.\r\n\r\nUnfortunately **the** solution does not exist. You&#39;ll better write a prototype to test your specific configuration.","title":"Modify functionality of Parent class without rewrite in java","body":"<p>First: logger libraries are numerous, and the first reform was the introduction of <code>java.util.Logger</code> to unify things a bit. Still not the dead of the other logging libraries.</p>\n<p>Then came - especially for libraries - the underestimated <strong><code>System.Logger</code></strong>: a Logger façade that can be discover logging implementations. This allows publishing a library, use Logging, but leave the actual logging library choice to the library user.</p>\n<p>So in that context meddling in class hierarchies and enum constants is counter-productive to say the least.</p>\n<p>What you can do is a specific configuration, say for some packages, implement a specific file handler (<code>FileHandler</code>, <code>Handler</code>), and reserve ERROR for your own FATALISH when using <code>*Exception</code> classes or such.</p>\n<p>Though seemingly simple, using <code>FileWriter</code> in the Logger child was not intended to be done as such. You should leave it to configuring the usage to your own <code>Handler</code> class.</p>\n<p>Unfortunately <strong>the</strong> solution does not exist. You'll better write a prototype to test your specific configuration.</p>\n"}],"owner":{"account_id":5538438,"reputation":31,"user_id":7953882,"display_name":"Asaf"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":63,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":4,"score":0,"last_activity_date":1669651469,"creation_date":1669648840,"question_id":74602779,"body_markdown":"Let&#39;s say I have an abstract class, called Logger:\r\n\r\n    public abstract class AbstractLogger {\r\n    public enum Levels {\r\n        DEBUG, INFO, WARNING, ERROR\r\n    }\r\n\r\n    public void debug(String message) {\r\n        Levels level = Levels.DEBUG;\r\n        log(level, message);\r\n    }\r\n\r\n    public void info(String message) {\r\n        Levels level = Levels.INFO;\r\n        log(level, message);\r\n    }\r\n\r\n    public void warning(String message) {\r\n        Levels level = Levels.WARNING;\r\n        log(level, message);    }\r\n\r\n    public void error(String message) {\r\n        Levels level = Levels.ERROR;\r\n        log(level, message);    }\r\n\r\n    public void log(Levels level, String message) {}\r\n\r\n}\r\n\r\nAnd I also have classes that inherit this class, such as FileAppenderLogger:\r\n\r\n    public class FileAppenderLogger extends AbstractLogger {\r\n    private final Path logPath;\r\n\r\n    public FileAppender(Path logPath) {\r\n        this.logPath = logPath;\r\n        createLogFile();\r\n    }\r\n\r\n    private void createLogFile() {\r\n        try {\r\n            File logFile = new File(logPath.toString());\r\n            if (logFile.createNewFile()) {\r\n                System.out.println(&quot;File created: &quot; + logFile.getName());\r\n            } else {\r\n                System.out.println(&quot;File already exists.&quot;);\r\n            }\r\n        } catch (IOException e) {\r\n            System.out.println(&quot;An error occurred.&quot;);\r\n            e.printStackTrace();\r\n        }\r\n    }\r\n\r\n    @Override\r\n    public void log(Levels level, String message) {\r\n        try {\r\n            FileWriter myWriter = new FileWriter(this.logPath.toString());\r\n            myWriter.write(message+&quot;\\n&quot;);\r\n            myWriter.close();\r\n            System.out.println(&quot;Successfully wrote to the file.&quot;);\r\n        } catch (IOException e) {\r\n            System.out.println(&quot;An error occurred.&quot;);\r\n            e.printStackTrace();\r\n        }\r\n    }\r\n\r\n    @Override\r\n    public void debug(String message) {\r\n        super.info(message);\r\n    }\r\n\r\n    @Override\r\n    public void info(String message) {\r\n        super.info(message);\r\n    }\r\n\r\n    @Override\r\n    public void warning(String message) {\r\n        super.warning(message);\r\n    }\r\n\r\n    @Override\r\n    public void error(String message) {\r\n        super.error(message);\r\n    }\r\n\r\n\r\n}\r\n\r\nNow, let&#39;s say I need to extend Logger to support new Log level, such as &quot;FATAL&quot;, and also extend its children, such as FileAppenderLogger to support it, without modify any of those classes, only extend them.\r\nwhat could be the best practice for that (if I still want to preserve non generic methods such as &quot;.info(String s)&quot; or &quot;.debug(String s))?\r\nWhat design pattern may I use here?\r\nI&#39;m open for changes regard this problem.\r\nThank you!","title":"Modify functionality of Parent class without rewrite in java","body":"<p>Let's say I have an abstract class, called Logger:</p>\n<pre><code>public abstract class AbstractLogger {\npublic enum Levels {\n    DEBUG, INFO, WARNING, ERROR\n}\n\npublic void debug(String message) {\n    Levels level = Levels.DEBUG;\n    log(level, message);\n}\n\npublic void info(String message) {\n    Levels level = Levels.INFO;\n    log(level, message);\n}\n\npublic void warning(String message) {\n    Levels level = Levels.WARNING;\n    log(level, message);    }\n\npublic void error(String message) {\n    Levels level = Levels.ERROR;\n    log(level, message);    }\n\npublic void log(Levels level, String message) {}\n</code></pre>\n<p>}</p>\n<p>And I also have classes that inherit this class, such as FileAppenderLogger:</p>\n<pre><code>public class FileAppenderLogger extends AbstractLogger {\nprivate final Path logPath;\n\npublic FileAppender(Path logPath) {\n    this.logPath = logPath;\n    createLogFile();\n}\n\nprivate void createLogFile() {\n    try {\n        File logFile = new File(logPath.toString());\n        if (logFile.createNewFile()) {\n            System.out.println(&quot;File created: &quot; + logFile.getName());\n        } else {\n            System.out.println(&quot;File already exists.&quot;);\n        }\n    } catch (IOException e) {\n        System.out.println(&quot;An error occurred.&quot;);\n        e.printStackTrace();\n    }\n}\n\n@Override\npublic void log(Levels level, String message) {\n    try {\n        FileWriter myWriter = new FileWriter(this.logPath.toString());\n        myWriter.write(message+&quot;\\n&quot;);\n        myWriter.close();\n        System.out.println(&quot;Successfully wrote to the file.&quot;);\n    } catch (IOException e) {\n        System.out.println(&quot;An error occurred.&quot;);\n        e.printStackTrace();\n    }\n}\n\n@Override\npublic void debug(String message) {\n    super.info(message);\n}\n\n@Override\npublic void info(String message) {\n    super.info(message);\n}\n\n@Override\npublic void warning(String message) {\n    super.warning(message);\n}\n\n@Override\npublic void error(String message) {\n    super.error(message);\n}\n</code></pre>\n<p>}</p>\n<p>Now, let's say I need to extend Logger to support new Log level, such as &quot;FATAL&quot;, and also extend its children, such as FileAppenderLogger to support it, without modify any of those classes, only extend them.\nwhat could be the best practice for that (if I still want to preserve non generic methods such as &quot;.info(String s)&quot; or &quot;.debug(String s))?\nWhat design pattern may I use here?\nI'm open for changes regard this problem.\nThank you!</p>\n"},{"tags":["java","maven"],"comments":[{"owner":{"account_id":112317,"reputation":93939,"user_id":296328,"accept_rate":60,"display_name":"khmarbaise"},"score":0,"creation_date":1669652049,"post_id":74603249,"comment_id":131685348,"body_markdown":"The issue is that if you define a dependency in child pom as you did...the default type is `jar` and **without** classifier ... as you can see in the error message `:jar` is missing... So you have to give the classifer at the dependency as well...","body":"The issue is that if you define a dependency in child pom as you did...the default type is <code>jar</code> and <b>without</b> classifier ... as you can see in the error message <code>:jar</code> is missing... So you have to give the classifer at the dependency as well..."},{"owner":{"account_id":13378002,"reputation":195,"user_id":9654279,"display_name":"DiegLuthor"},"score":0,"creation_date":1669652722,"post_id":74603249,"comment_id":131685571,"body_markdown":"Hence there is no way to avoid the duplication basically?","body":"Hence there is no way to avoid the duplication basically?"},{"owner":{"account_id":112317,"reputation":93939,"user_id":296328,"accept_rate":60,"display_name":"khmarbaise"},"score":0,"creation_date":1669653079,"post_id":74603249,"comment_id":131685719,"body_markdown":"In that particular case no. Apart from that I would strongly recommend to use more recent tools/dependencies because the jar&#39;s you are referencing is of 2010! There are much more newer versions available ... Having a dependency which is only vaild for JDK1.5 is very out of time...","body":"In that particular case no. Apart from that I would strongly recommend to use more recent tools/dependencies because the jar&#39;s you are referencing is of 2010! There are much more newer versions available ... Having a dependency which is only vaild for JDK1.5 is very out of time..."},{"owner":{"account_id":13378002,"reputation":195,"user_id":9654279,"display_name":"DiegLuthor"},"score":1,"creation_date":1669653536,"post_id":74603249,"comment_id":131685893,"body_markdown":"Thanks a lot for the answers, about the version I know it&#39;s out of time, I am carrying on a really big refactor work on the project, hence I will update it asap! Thanks again :)","body":"Thanks a lot for the answers, about the version I know it&#39;s out of time, I am carrying on a really big refactor work on the project, hence I will update it asap! Thanks again :)"}],"owner":{"account_id":13378002,"reputation":195,"user_id":9654279,"display_name":"DiegLuthor"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":111,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1669651041,"creation_date":1669651041,"question_id":74603249,"body_markdown":"Good morning,\r\n\r\nI am working on a multi-module Maven project in which child modules inherit from a parent  information regarding dependencies, this is done with the `&lt;dependencyManagement&gt;` tag.\r\n\r\nI am now trying to import the following library:\r\n\r\n            &lt;groupId&gt;net.sf.json-lib&lt;/groupId&gt;\r\n            &lt;artifactId&gt;json-lib&lt;/artifactId&gt;\r\n\r\nfollowing this way:\r\n\r\n**Parent pom**\r\n\r\n    \r\n         &lt;dependencyManagement&gt;\r\n             &lt;dependency&gt;\r\n                &lt;groupId&gt;net.sf.json-lib&lt;/groupId&gt;\r\n                &lt;artifactId&gt;json-lib&lt;/artifactId&gt;\r\n                &lt;version&gt;${version.json-lib}&lt;/version&gt;\r\n                &lt;classifier&gt;jdk15&lt;/classifier&gt;\r\n             &lt;/dependency&gt;\r\n         &lt;/dependencyManagement&gt;\r\n**child pom**\r\n\r\n       &lt;dependency&gt;\r\n            &lt;groupId&gt;net.sf.json-lib&lt;/groupId&gt;\r\n            &lt;artifactId&gt;json-lib&lt;/artifactId&gt;\r\n        &lt;/dependency&gt;\r\n\r\nI thought this could be enough as the dependency management section of the parent should take care of making inheritable all necessary information, but this is not the case.\r\n\r\nIn particular I always get \r\n\r\n&gt; &#39;dependencies.dependency.version&#39; for net.sf.json-lib:json-lib:jar is missing.\r\n\r\nwhile using `mvn clean install` command.\r\n\r\nI have tried adding `classifier` tag also on child pom and it seems to work, but it seems to me like a dirty workaround also because I have now classifier information duplicated both in parent and child pom (If I delete the classifier information from parent, Maven cannot find the dependency again).\r\n\r\nI searched the net for a while and found no proper or clear documentation about this, can someone clear this out a bit please?\r\n\r\nThanks in advance.","title":"Use of classifier tag in Maven dependencyManagement","body":"<p>Good morning,</p>\n<p>I am working on a multi-module Maven project in which child modules inherit from a parent  information regarding dependencies, this is done with the <code>&lt;dependencyManagement&gt;</code> tag.</p>\n<p>I am now trying to import the following library:</p>\n<pre><code>        &lt;groupId&gt;net.sf.json-lib&lt;/groupId&gt;\n        &lt;artifactId&gt;json-lib&lt;/artifactId&gt;\n</code></pre>\n<p>following this way:</p>\n<p><strong>Parent pom</strong></p>\n<pre><code>     &lt;dependencyManagement&gt;\n         &lt;dependency&gt;\n            &lt;groupId&gt;net.sf.json-lib&lt;/groupId&gt;\n            &lt;artifactId&gt;json-lib&lt;/artifactId&gt;\n            &lt;version&gt;${version.json-lib}&lt;/version&gt;\n            &lt;classifier&gt;jdk15&lt;/classifier&gt;\n         &lt;/dependency&gt;\n     &lt;/dependencyManagement&gt;\n</code></pre>\n<p><strong>child pom</strong></p>\n<pre><code>   &lt;dependency&gt;\n        &lt;groupId&gt;net.sf.json-lib&lt;/groupId&gt;\n        &lt;artifactId&gt;json-lib&lt;/artifactId&gt;\n    &lt;/dependency&gt;\n</code></pre>\n<p>I thought this could be enough as the dependency management section of the parent should take care of making inheritable all necessary information, but this is not the case.</p>\n<p>In particular I always get</p>\n<blockquote>\n<p>'dependencies.dependency.version' for net.sf.json-lib:json-lib:jar is missing.</p>\n</blockquote>\n<p>while using <code>mvn clean install</code> command.</p>\n<p>I have tried adding <code>classifier</code> tag also on child pom and it seems to work, but it seems to me like a dirty workaround also because I have now classifier information duplicated both in parent and child pom (If I delete the classifier information from parent, Maven cannot find the dependency again).</p>\n<p>I searched the net for a while and found no proper or clear documentation about this, can someone clear this out a bit please?</p>\n<p>Thanks in advance.</p>\n"},{"tags":["javascript","java","spring-boot","encryption","cryptojs"],"answers":[{"tags":[],"owner":{"account_id":12359353,"reputation":42427,"user_id":9014097,"display_name":"Topaco"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1669650910,"creation_date":1669647264,"answer_id":74602441,"question_id":74601513,"body_markdown":"Decryption fails because CryptoJS interprets the key material as password when passed as string (as in the posted code).  \r\nIn this case, the password and a salt are used to derive the key and IV applying the OpenSSL proprietary key derivation function `EVP_BytesToKey()`.  \r\nThe random 8 bytes salt is generated during encryption, which returns as result the Base64 encoding of the concatenation of a prefix, the salt and the actual ciphertext. The prefix consists of the ASCII encoding of `Salted__`.\r\n\r\nTherefore, the following steps are necessary in the decryption process:\r\n- Determining salt and ciphertext from the CryptoJS return value\r\n- Deriving key and IV using password and salt\r\n- Decryption of the ciphertext with the derived key and IV\r\n\r\nThere are several ways to implement the last two steps in Java.  \r\nYou can find various ports of `EVP_BytesToKey()` on the web which can be used in conjunction with the native JCA/JCE for decryption. These `EVP_BytesToKey()` ports are not always reliable, a solid port is [this one][1].  \r\nA convenient (and reliable) alternative is BouncyCastle (with its own `EVP_BytesToKey()` port), described below: \r\n\r\n```java\r\nimport java.nio.ByteBuffer;\r\nimport java.nio.charset.StandardCharsets;\r\nimport java.util.Base64;\r\nimport org.bouncycastle.crypto.digests.MD5Digest;\r\nimport org.bouncycastle.crypto.engines.AESEngine;\r\nimport org.bouncycastle.crypto.generators.OpenSSLPBEParametersGenerator;\r\nimport org.bouncycastle.crypto.modes.CBCBlockCipher;\r\nimport org.bouncycastle.crypto.paddings.PaddedBufferedBlockCipher;\r\nimport org.bouncycastle.crypto.params.ParametersWithIV;\r\n\r\n...\r\n\r\n// Get salt and ciphertext\r\nString saltCiphertextB64 = &quot;U2FsdGVkX1+6YueVRKp6h0dZfk/a8AC9vyFfAjxD4nb7mXsKrM7rI7xZ0OgrF1sShHYNLMJglz4+67n/I7P+fg==&quot;;\r\nbyte[] saltCiphertext = Base64.getDecoder().decode(saltCiphertextB64);\r\nByteBuffer byteBuffer = ByteBuffer.wrap(saltCiphertext);\r\nbyte[] prefix = new byte[8];\r\nbyte[] salt = new byte[8];\r\nbyteBuffer.get(prefix);\r\nbyteBuffer.get(salt);\r\nbyte[] ciphertext = new byte[byteBuffer.remaining()];\r\nbyteBuffer.get(ciphertext);\r\n\r\n// Key derivation via EVP_BytesToKey() (using BouncyCastle)\r\nString passwordStr = &quot;p80a0811-47db-2c39-bcdd-4t3g5h2d5d1a&quot;;\r\nbyte[] password = passwordStr.getBytes(StandardCharsets.UTF_8);\r\nOpenSSLPBEParametersGenerator pbeGenerator = new OpenSSLPBEParametersGenerator(new MD5Digest()); \r\npbeGenerator.init(password, salt);\r\nParametersWithIV parameters = (ParametersWithIV) pbeGenerator.generateDerivedParameters(256, 128); // keySize, ivSize in bits\r\n// FYI: key: ((KeyParameter)parameters.getParameters()).getKey()\r\n//      IV : parameters.getIV()\r\n\r\n// Decryption (using BouncyCastle)\r\nPaddedBufferedBlockCipher cipher = new PaddedBufferedBlockCipher(new CBCBlockCipher(new AESEngine()));\r\ncipher.init(false, parameters);\r\nbyte[] plaintext = new byte[cipher.getOutputSize(ciphertext.length)];\r\nint length = cipher.processBytes(ciphertext, 0, ciphertext.length, plaintext, 0);\r\nlength += cipher.doFinal(plaintext, length);    \t\r\nString plaintextSr = new String(plaintext, 0, length, StandardCharsets.UTF_8);\r\nSystem.out.println(plaintextSr); // {&quot;name&quot;:&quot;Burak&quot;,&quot;surName&quot;:&quot;Bayraktaroglu&quot;}\r\n```\r\n\r\n[1]: https://stackoverflow.com/a/11786924/9014097","title":"CryptoJs decrypt function equivalent in Java","body":"<p>Decryption fails because CryptoJS interprets the key material as password when passed as string (as in the posted code).<br />\nIn this case, the password and a salt are used to derive the key and IV applying the OpenSSL proprietary key derivation function <code>EVP_BytesToKey()</code>.<br />\nThe random 8 bytes salt is generated during encryption, which returns as result the Base64 encoding of the concatenation of a prefix, the salt and the actual ciphertext. The prefix consists of the ASCII encoding of <code>Salted__</code>.</p>\n<p>Therefore, the following steps are necessary in the decryption process:</p>\n<ul>\n<li>Determining salt and ciphertext from the CryptoJS return value</li>\n<li>Deriving key and IV using password and salt</li>\n<li>Decryption of the ciphertext with the derived key and IV</li>\n</ul>\n<p>There are several ways to implement the last two steps in Java.<br />\nYou can find various ports of <code>EVP_BytesToKey()</code> on the web which can be used in conjunction with the native JCA/JCE for decryption. These <code>EVP_BytesToKey()</code> ports are not always reliable, a solid port is <a href=\"https://stackoverflow.com/a/11786924/9014097\">this one</a>.<br />\nA convenient (and reliable) alternative is BouncyCastle (with its own <code>EVP_BytesToKey()</code> port), described below:</p>\n<pre class=\"lang-java prettyprint-override\"><code>import java.nio.ByteBuffer;\nimport java.nio.charset.StandardCharsets;\nimport java.util.Base64;\nimport org.bouncycastle.crypto.digests.MD5Digest;\nimport org.bouncycastle.crypto.engines.AESEngine;\nimport org.bouncycastle.crypto.generators.OpenSSLPBEParametersGenerator;\nimport org.bouncycastle.crypto.modes.CBCBlockCipher;\nimport org.bouncycastle.crypto.paddings.PaddedBufferedBlockCipher;\nimport org.bouncycastle.crypto.params.ParametersWithIV;\n\n...\n\n// Get salt and ciphertext\nString saltCiphertextB64 = &quot;U2FsdGVkX1+6YueVRKp6h0dZfk/a8AC9vyFfAjxD4nb7mXsKrM7rI7xZ0OgrF1sShHYNLMJglz4+67n/I7P+fg==&quot;;\nbyte[] saltCiphertext = Base64.getDecoder().decode(saltCiphertextB64);\nByteBuffer byteBuffer = ByteBuffer.wrap(saltCiphertext);\nbyte[] prefix = new byte[8];\nbyte[] salt = new byte[8];\nbyteBuffer.get(prefix);\nbyteBuffer.get(salt);\nbyte[] ciphertext = new byte[byteBuffer.remaining()];\nbyteBuffer.get(ciphertext);\n\n// Key derivation via EVP_BytesToKey() (using BouncyCastle)\nString passwordStr = &quot;p80a0811-47db-2c39-bcdd-4t3g5h2d5d1a&quot;;\nbyte[] password = passwordStr.getBytes(StandardCharsets.UTF_8);\nOpenSSLPBEParametersGenerator pbeGenerator = new OpenSSLPBEParametersGenerator(new MD5Digest()); \npbeGenerator.init(password, salt);\nParametersWithIV parameters = (ParametersWithIV) pbeGenerator.generateDerivedParameters(256, 128); // keySize, ivSize in bits\n// FYI: key: ((KeyParameter)parameters.getParameters()).getKey()\n//      IV : parameters.getIV()\n\n// Decryption (using BouncyCastle)\nPaddedBufferedBlockCipher cipher = new PaddedBufferedBlockCipher(new CBCBlockCipher(new AESEngine()));\ncipher.init(false, parameters);\nbyte[] plaintext = new byte[cipher.getOutputSize(ciphertext.length)];\nint length = cipher.processBytes(ciphertext, 0, ciphertext.length, plaintext, 0);\nlength += cipher.doFinal(plaintext, length);        \nString plaintextSr = new String(plaintext, 0, length, StandardCharsets.UTF_8);\nSystem.out.println(plaintextSr); // {&quot;name&quot;:&quot;Burak&quot;,&quot;surName&quot;:&quot;Bayraktaroglu&quot;}\n</code></pre>\n"}],"owner":{"account_id":20504373,"reputation":13,"user_id":18131215,"display_name":"Eliana Ch&#225;vez Valencia"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":474,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":74602441,"answer_count":1,"score":1,"last_activity_date":1669650910,"creation_date":1669643072,"question_id":74601513,"body_markdown":"I&#39;m trying to decrypt a token that the server I&#39;m using brings in order to load correctly users access to the page.\r\n\r\nI already achieved the goal using CryptoJs using JavaScript. However now I need to transfer that function to my java backend.\r\n\r\nLook my code using CryptoJs which works correctly\r\n\r\n```lang-js\r\nconst token = &quot;U2FsdGVkX1+6YueVRKp6h0dZfk/a8AC9vyFfAjxD4nb7mXsKrM7rI7xZ0OgrF1sShHYNLMJglz4+67n/I7P+fg==&quot;\r\nconst key = &quot;p80a0811-47db-2c39-bcdd-4t3g5h2d5d1a&quot;\r\n\r\n// Decrypt\r\nconst iv = CryptoJS.enc.Utf8.parse(key);\r\nconst decryptedToken = CryptoJS.AES.decrypt(token, key, {\r\n  keySize: 16,\r\n  iv,\r\n  mode: CryptoJS.mode.CBC,\r\n  padding: CryptoJS.pad.Pkcs7,\r\n});\r\n\r\nconst stringToken = decryptedToken.toString(CryptoJS.enc.Utf8);\r\nconst dataToUse = JSON.parse(stringToken)\r\n\r\nconsole.log(&quot;decryptedToken =&gt; &quot;, stringToken);\r\nconsole.log(&quot;data =&gt; &quot;,dataToUse);\r\n```\r\n\r\nAnd this is my code in Java using javax.crypto\r\n\r\n```lang-java\r\npublic String decrypt() {\r\n  String finalToken = null;\r\n  Cipher cipher;\r\n  try {\r\n    String token = &quot;U2FsdGVkX1+6YueVRKp6h0dZfk/a8AC9vyFfAjxD4nb7mXsKrM7rI7xZ0OgrF1sShHYNLMJglz4+67n/I7P+fg==&quot;;\r\n    String key = &quot;p80a0811-47db-2c39-bcdd-4t3g5h2d5d1a&quot;;\r\n    Key skeySpec = new SecretKeySpec(Arrays.copyOf(key.getBytes(), 16), &quot;AES&quot;);\r\n    byte[] iv = Arrays.copyOf(key.getBytes(StandardCharsets.UTF_8), 16);\r\n    IvParameterSpec ivParameterSpec = new IvParameterSpec(iv);\r\n    byte[] bytesToDecrypt = Base64.decodeBase64(token.getBytes());\r\n    cipher = Cipher.getInstance(&quot;AES/CBC/PKCS7Padding&quot;);\r\n    cipher.init(Cipher.DECRYPT_MODE, skeySpec, ivParameterSpec);\r\n    byte[] decrypted = cipher.doFinal(bytesToDecrypt);\r\n    finalToken = new String(decrypted);\r\n    log.info(&quot;Decrypt token succesfully {}&quot;, finalToken);\r\n  } catch (NoSuchAlgorithmException\r\n      | InvalidAlgorithmParameterException\r\n      | IllegalBlockSizeException\r\n      | NoSuchPaddingException\r\n      | BadPaddingException\r\n      | InvalidKeyException e) {\r\n    e.printStackTrace();\r\n    log.error(&quot;Error decrypting&quot;);\r\n  }\r\n\r\n  return finalToken;\r\n}\r\n```\r\n\r\nI&#39;m not sure I&#39;m setting correctly the key and the iv. With the piece of code above I get this error:\r\n\r\n&gt;javax.crypto.BadPaddingException: pad block corrupted\r\n\r\nIf I don&#39;t &quot;cut&quot; the key and the iv in order to have 16 bytes I get wrong length error.\r\n\r\nCan someone help me to figure out what&#39;s wrong please!\r\n\r\nThe expected result is to get this info in java so then I can manipulate the object:\r\n\r\n```lang-json\r\n{name: &quot;Burak&quot;, surName: &quot;Bayraktaroglu&quot;}\r\n```","title":"CryptoJs decrypt function equivalent in Java","body":"<p>I'm trying to decrypt a token that the server I'm using brings in order to load correctly users access to the page.</p>\n<p>I already achieved the goal using CryptoJs using JavaScript. However now I need to transfer that function to my java backend.</p>\n<p>Look my code using CryptoJs which works correctly</p>\n<pre class=\"lang-js prettyprint-override\"><code>const token = &quot;U2FsdGVkX1+6YueVRKp6h0dZfk/a8AC9vyFfAjxD4nb7mXsKrM7rI7xZ0OgrF1sShHYNLMJglz4+67n/I7P+fg==&quot;\nconst key = &quot;p80a0811-47db-2c39-bcdd-4t3g5h2d5d1a&quot;\n\n// Decrypt\nconst iv = CryptoJS.enc.Utf8.parse(key);\nconst decryptedToken = CryptoJS.AES.decrypt(token, key, {\n  keySize: 16,\n  iv,\n  mode: CryptoJS.mode.CBC,\n  padding: CryptoJS.pad.Pkcs7,\n});\n\nconst stringToken = decryptedToken.toString(CryptoJS.enc.Utf8);\nconst dataToUse = JSON.parse(stringToken)\n\nconsole.log(&quot;decryptedToken =&gt; &quot;, stringToken);\nconsole.log(&quot;data =&gt; &quot;,dataToUse);\n</code></pre>\n<p>And this is my code in Java using javax.crypto</p>\n<pre class=\"lang-java prettyprint-override\"><code>public String decrypt() {\n  String finalToken = null;\n  Cipher cipher;\n  try {\n    String token = &quot;U2FsdGVkX1+6YueVRKp6h0dZfk/a8AC9vyFfAjxD4nb7mXsKrM7rI7xZ0OgrF1sShHYNLMJglz4+67n/I7P+fg==&quot;;\n    String key = &quot;p80a0811-47db-2c39-bcdd-4t3g5h2d5d1a&quot;;\n    Key skeySpec = new SecretKeySpec(Arrays.copyOf(key.getBytes(), 16), &quot;AES&quot;);\n    byte[] iv = Arrays.copyOf(key.getBytes(StandardCharsets.UTF_8), 16);\n    IvParameterSpec ivParameterSpec = new IvParameterSpec(iv);\n    byte[] bytesToDecrypt = Base64.decodeBase64(token.getBytes());\n    cipher = Cipher.getInstance(&quot;AES/CBC/PKCS7Padding&quot;);\n    cipher.init(Cipher.DECRYPT_MODE, skeySpec, ivParameterSpec);\n    byte[] decrypted = cipher.doFinal(bytesToDecrypt);\n    finalToken = new String(decrypted);\n    log.info(&quot;Decrypt token succesfully {}&quot;, finalToken);\n  } catch (NoSuchAlgorithmException\n      | InvalidAlgorithmParameterException\n      | IllegalBlockSizeException\n      | NoSuchPaddingException\n      | BadPaddingException\n      | InvalidKeyException e) {\n    e.printStackTrace();\n    log.error(&quot;Error decrypting&quot;);\n  }\n\n  return finalToken;\n}\n</code></pre>\n<p>I'm not sure I'm setting correctly the key and the iv. With the piece of code above I get this error:</p>\n<blockquote>\n<p>javax.crypto.BadPaddingException: pad block corrupted</p>\n</blockquote>\n<p>If I don't &quot;cut&quot; the key and the iv in order to have 16 bytes I get wrong length error.</p>\n<p>Can someone help me to figure out what's wrong please!</p>\n<p>The expected result is to get this info in java so then I can manipulate the object:</p>\n<pre class=\"lang-json prettyprint-override\"><code>{name: &quot;Burak&quot;, surName: &quot;Bayraktaroglu&quot;}\n</code></pre>\n"},{"tags":["java","android","firebase","firebase-realtime-database"],"comments":[{"owner":{"account_id":6819231,"reputation":132841,"user_id":5246885,"accept_rate":78,"display_name":"Alex Mamo"},"score":0,"creation_date":1669633886,"post_id":74598831,"comment_id":131678875,"body_markdown":"What is the exact error that you get? Can you also show us the content of `Machines` class?","body":"What is the exact error that you get? Can you also show us the content of <code>Machines</code> class?"},{"owner":{"account_id":72426,"reputation":573714,"user_id":209103,"accept_rate":73,"display_name":"Frank van Puffelen"},"score":0,"creation_date":1669646943,"post_id":74598831,"comment_id":131683355,"body_markdown":"&quot;I get that error&quot; What error? Please edit your question to include the exact error message, and the complete stack trace.","body":"&quot;I get that error&quot; What error? Please edit your question to include the exact error message, and the complete stack trace."},{"owner":{"account_id":20886808,"reputation":71,"user_id":15343213,"display_name":"Houmes"},"score":0,"creation_date":1669650160,"post_id":74598831,"comment_id":131684636,"body_markdown":"@FrankvanPuffelen I have edited the blog and added the error, I apologies for my mistake.","body":"@FrankvanPuffelen I have edited the blog and added the error, I apologies for my mistake."},{"owner":{"account_id":20886808,"reputation":71,"user_id":15343213,"display_name":"Houmes"},"score":0,"creation_date":1669650227,"post_id":74598831,"comment_id":131684664,"body_markdown":"@AlexMamo I have included the `Machines.java` class","body":"@AlexMamo I have included the <code>Machines.java</code> class"},{"owner":{"account_id":6819231,"reputation":132841,"user_id":5246885,"accept_rate":78,"display_name":"Alex Mamo"},"score":0,"creation_date":1669650523,"post_id":74598831,"comment_id":131684780,"body_markdown":"Ok, and what&#39;s the error?","body":"Ok, and what&#39;s the error?"},{"owner":{"account_id":20886808,"reputation":71,"user_id":15343213,"display_name":"Houmes"},"score":0,"creation_date":1669650645,"post_id":74598831,"comment_id":131684825,"body_markdown":"I also added it but here it is `at com.example.machinerecycle.MainActivity$1.onDataChange(MainActivity.java:39)`","body":"I also added it but here it is <code>at com.example.machinerecycle.MainActivity$1.onDataChange(MainA&zwnj;&#8203;ctivity.java:39)</code>"},{"owner":{"account_id":20886808,"reputation":71,"user_id":15343213,"display_name":"Houmes"},"score":0,"creation_date":1669929408,"post_id":74598831,"comment_id":131761037,"body_markdown":"Problem solved, all I need to do is build an empty constructer","body":"Problem solved, all I need to do is build an empty constructer"}],"owner":{"account_id":20886808,"reputation":71,"user_id":15343213,"display_name":"Houmes"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":34,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1669650755,"creation_date":1669629359,"question_id":74598831,"body_markdown":"I have been trying to collect data from my firebase in order to view them inside a recyclerview yet i get an error in the\r\n\r\n```\r\nMachines machine = dataSnapshot.getValue(Machines.class)\r\n```\r\nthe error is \r\n`at com.example.machinerecycle.MainActivity$1.onDataChange(MainActivity.java:39)`\r\n\r\nI have tried local data and it worked fine the recyclerview was perfect and so the data but when I change it to be read from firebase either I get that error or I get an empty list.\r\n\r\nHere is myAdapter.java\r\n\r\n```\r\npackage com.example.machinerecycle;\r\n\r\nimport android.view.LayoutInflater;\r\nimport android.view.View;\r\nimport android.view.ViewGroup;\r\nimport android.widget.LinearLayout;\r\nimport android.widget.TextView;\r\n\r\nimport androidx.annotation.NonNull;\r\nimport androidx.recyclerview.widget.RecyclerView;\r\n\r\nimport org.w3c.dom.Text;\r\n\r\nimport java.util.ArrayList;\r\n\r\nimport javax.crypto.Mac;\r\n\r\npublic class myAdapter extends RecyclerView.Adapter&lt;myAdapter.ViewHolder&gt; {\r\n\r\n    ArrayList&lt;Machines&gt;machines;\r\n\r\n    public myAdapter(ArrayList&lt;Machines&gt; machines) {\r\n        this.machines = machines;\r\n    }\r\n\r\n    @NonNull\r\n    @Override\r\n    public myAdapter.ViewHolder onCreateViewHolder(@NonNull ViewGroup parent, int viewType) {\r\n        View view = LayoutInflater.from(parent.getContext()).inflate(R.layout.list_machines,parent,false);\r\n        return new ViewHolder(view);\r\n    }\r\n\r\n    @Override\r\n    public void onBindViewHolder(@NonNull myAdapter.ViewHolder holder, int position) {\r\n        holder.id.setText(machines.get(position).getId());\r\n        holder.cap1.setText(machines.get(position).getCap1());\r\n        holder.cap2.setText(machines.get(position).getCap2());\r\n\r\n    }\r\n\r\n    @Override\r\n    public int getItemCount() {\r\n        return machines.size();\r\n    }\r\n\r\n    public class ViewHolder extends RecyclerView.ViewHolder{\r\n        public TextView id,cap1,cap2;\r\n\r\n        public ViewHolder(@NonNull View itemView) {\r\n            super(itemView);\r\n            id = itemView.findViewById(R.id.idMachine);\r\n            cap1 = itemView.findViewById(R.id.cap1);\r\n            cap2 = itemView.findViewById(R.id.cap2);\r\n\r\n        }\r\n    }\r\n}\r\n```\r\n\r\nand this my mainActivity.java\r\n\r\n```\r\npackage com.example.machinerecycle;\r\n\r\nimport androidx.annotation.NonNull;\r\nimport androidx.appcompat.app.AppCompatActivity;\r\nimport androidx.recyclerview.widget.LinearLayoutManager;\r\nimport androidx.recyclerview.widget.RecyclerView;\r\n\r\nimport android.os.Bundle;\r\n\r\nimport com.google.firebase.database.DataSnapshot;\r\nimport com.google.firebase.database.DatabaseError;\r\nimport com.google.firebase.database.DatabaseReference;\r\nimport com.google.firebase.database.FirebaseDatabase;\r\nimport com.google.firebase.database.ValueEventListener;\r\n\r\nimport java.util.ArrayList;\r\n\r\npublic class MainActivity extends AppCompatActivity {\r\n\r\n    DatabaseReference databaseReference;\r\n    ArrayList&lt;Machines&gt; machines;\r\n    myAdapter adapter;\r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        setContentView(R.layout.activity_main);\r\n        RecyclerView recyclerView = findViewById(R.id.rvMachines);\r\n        recyclerView.setHasFixedSize(false);\r\n        recyclerView.setLayoutManager(new LinearLayoutManager(this));\r\n        databaseReference = FirebaseDatabase.getInstance().getReference(&quot;machines&quot;);\r\n\r\n        databaseReference.addValueEventListener(new ValueEventListener() {\r\n            @Override\r\n            public void onDataChange(@NonNull DataSnapshot snapshot) {\r\n               if (snapshot.exists()){\r\n                   machines = new ArrayList&lt;Machines&gt;();\r\n                   for (DataSnapshot dataSnapshot : snapshot.getChildren())\r\n                   {\r\n                       Machines machine = dataSnapshot.getValue(Machines.class);\r\n                       machines.add(machine);\r\n                   }\r\n                   myAdapter adapter = new myAdapter(machines);\r\n                   recyclerView.setAdapter(adapter);\r\n               }\r\n\r\n            }\r\n\r\n            @Override\r\n            public void onCancelled(@NonNull DatabaseError error) {\r\n\r\n            }\r\n        });\r\n\r\n\r\n\r\n        recyclerView.setAdapter(adapter);\r\n\r\n    }\r\n}\r\n```\r\n\r\nthis is how my firebase looks like\r\n\r\n```\r\n{\r\n  &quot;machines&quot;: {\r\n    &quot;machine1&quot;: {\r\n      &quot;ID&quot;: &quot;M200&quot;,\r\n      &quot;cap1&quot;: 1,\r\n      &quot;cap2&quot;: 1\r\n    },\r\n    &quot;machine10&quot;: {\r\n      &quot;ID&quot;: &quot;M210&quot;,\r\n      &quot;cap1&quot;: 1,\r\n      &quot;cap2&quot;: 1\r\n    },\r\n    &quot;machine2&quot;: {\r\n      &quot;ID&quot;: &quot;M202&quot;,\r\n      &quot;cap1&quot;: 1,\r\n      &quot;cap2&quot;: 1\r\n    },\r\n    &quot;machine3&quot;: {\r\n      &quot;ID&quot;: &quot;M203&quot;,\r\n      &quot;cap1&quot;: 1,\r\n      &quot;cap2&quot;: 1\r\n    },\r\n    &quot;machine4&quot;: {\r\n      &quot;ID&quot;: &quot;M204&quot;,\r\n      &quot;cap1&quot;: 1,\r\n      &quot;cap2&quot;: 1,\r\n    }\r\n   }\r\n}\r\n```\r\n\r\nMachines.java class : \r\n```\r\npackage com.example.machinerecycle;\r\n\r\nimport android.provider.ContactsContract;\r\n\r\nimport com.google.firebase.database.DataSnapshot;\r\n\r\npublic class Machines {\r\n    private String id;\r\n    private Integer cap1,cap2,state;\r\n\r\n    public Machines(String id, Integer cap1, Integer cap2, Integer state) {\r\n        this.id = id;\r\n        this.cap1 = cap1;\r\n        this.cap2 = cap2;\r\n        this.state = state;\r\n    }\r\n\r\n    public String getId() {\r\n        return id;\r\n    }\r\n\r\n    public void setId(String id) {\r\n        this.id = id;\r\n    }\r\n\r\n    public Integer getCap1() {\r\n        return cap1;\r\n    }\r\n\r\n    public void setCap1(Integer cap1) {\r\n        this.cap1 = cap1;\r\n    }\r\n\r\n    public Integer getCap2() {\r\n        return cap2;\r\n    }\r\n\r\n    public void setCap2(Integer cap2) {\r\n        this.cap2 = cap2;\r\n    }\r\n\r\n    public Integer getState() {\r\n        return state;\r\n    }\r\n\r\n    public void setState(Integer state) {\r\n        this.state = state;\r\n    }\r\n}\r\n\r\n```\r\n","title":"How to retrieve full node from Firebase","body":"<p>I have been trying to collect data from my firebase in order to view them inside a recyclerview yet i get an error in the</p>\n<pre><code>Machines machine = dataSnapshot.getValue(Machines.class)\n</code></pre>\n<p>the error is\n<code>at com.example.machinerecycle.MainActivity$1.onDataChange(MainActivity.java:39)</code></p>\n<p>I have tried local data and it worked fine the recyclerview was perfect and so the data but when I change it to be read from firebase either I get that error or I get an empty list.</p>\n<p>Here is myAdapter.java</p>\n<pre><code>package com.example.machinerecycle;\n\nimport android.view.LayoutInflater;\nimport android.view.View;\nimport android.view.ViewGroup;\nimport android.widget.LinearLayout;\nimport android.widget.TextView;\n\nimport androidx.annotation.NonNull;\nimport androidx.recyclerview.widget.RecyclerView;\n\nimport org.w3c.dom.Text;\n\nimport java.util.ArrayList;\n\nimport javax.crypto.Mac;\n\npublic class myAdapter extends RecyclerView.Adapter&lt;myAdapter.ViewHolder&gt; {\n\n    ArrayList&lt;Machines&gt;machines;\n\n    public myAdapter(ArrayList&lt;Machines&gt; machines) {\n        this.machines = machines;\n    }\n\n    @NonNull\n    @Override\n    public myAdapter.ViewHolder onCreateViewHolder(@NonNull ViewGroup parent, int viewType) {\n        View view = LayoutInflater.from(parent.getContext()).inflate(R.layout.list_machines,parent,false);\n        return new ViewHolder(view);\n    }\n\n    @Override\n    public void onBindViewHolder(@NonNull myAdapter.ViewHolder holder, int position) {\n        holder.id.setText(machines.get(position).getId());\n        holder.cap1.setText(machines.get(position).getCap1());\n        holder.cap2.setText(machines.get(position).getCap2());\n\n    }\n\n    @Override\n    public int getItemCount() {\n        return machines.size();\n    }\n\n    public class ViewHolder extends RecyclerView.ViewHolder{\n        public TextView id,cap1,cap2;\n\n        public ViewHolder(@NonNull View itemView) {\n            super(itemView);\n            id = itemView.findViewById(R.id.idMachine);\n            cap1 = itemView.findViewById(R.id.cap1);\n            cap2 = itemView.findViewById(R.id.cap2);\n\n        }\n    }\n}\n</code></pre>\n<p>and this my mainActivity.java</p>\n<pre><code>package com.example.machinerecycle;\n\nimport androidx.annotation.NonNull;\nimport androidx.appcompat.app.AppCompatActivity;\nimport androidx.recyclerview.widget.LinearLayoutManager;\nimport androidx.recyclerview.widget.RecyclerView;\n\nimport android.os.Bundle;\n\nimport com.google.firebase.database.DataSnapshot;\nimport com.google.firebase.database.DatabaseError;\nimport com.google.firebase.database.DatabaseReference;\nimport com.google.firebase.database.FirebaseDatabase;\nimport com.google.firebase.database.ValueEventListener;\n\nimport java.util.ArrayList;\n\npublic class MainActivity extends AppCompatActivity {\n\n    DatabaseReference databaseReference;\n    ArrayList&lt;Machines&gt; machines;\n    myAdapter adapter;\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.activity_main);\n        RecyclerView recyclerView = findViewById(R.id.rvMachines);\n        recyclerView.setHasFixedSize(false);\n        recyclerView.setLayoutManager(new LinearLayoutManager(this));\n        databaseReference = FirebaseDatabase.getInstance().getReference(&quot;machines&quot;);\n\n        databaseReference.addValueEventListener(new ValueEventListener() {\n            @Override\n            public void onDataChange(@NonNull DataSnapshot snapshot) {\n               if (snapshot.exists()){\n                   machines = new ArrayList&lt;Machines&gt;();\n                   for (DataSnapshot dataSnapshot : snapshot.getChildren())\n                   {\n                       Machines machine = dataSnapshot.getValue(Machines.class);\n                       machines.add(machine);\n                   }\n                   myAdapter adapter = new myAdapter(machines);\n                   recyclerView.setAdapter(adapter);\n               }\n\n            }\n\n            @Override\n            public void onCancelled(@NonNull DatabaseError error) {\n\n            }\n        });\n\n\n\n        recyclerView.setAdapter(adapter);\n\n    }\n}\n</code></pre>\n<p>this is how my firebase looks like</p>\n<pre><code>{\n  &quot;machines&quot;: {\n    &quot;machine1&quot;: {\n      &quot;ID&quot;: &quot;M200&quot;,\n      &quot;cap1&quot;: 1,\n      &quot;cap2&quot;: 1\n    },\n    &quot;machine10&quot;: {\n      &quot;ID&quot;: &quot;M210&quot;,\n      &quot;cap1&quot;: 1,\n      &quot;cap2&quot;: 1\n    },\n    &quot;machine2&quot;: {\n      &quot;ID&quot;: &quot;M202&quot;,\n      &quot;cap1&quot;: 1,\n      &quot;cap2&quot;: 1\n    },\n    &quot;machine3&quot;: {\n      &quot;ID&quot;: &quot;M203&quot;,\n      &quot;cap1&quot;: 1,\n      &quot;cap2&quot;: 1\n    },\n    &quot;machine4&quot;: {\n      &quot;ID&quot;: &quot;M204&quot;,\n      &quot;cap1&quot;: 1,\n      &quot;cap2&quot;: 1,\n    }\n   }\n}\n</code></pre>\n<p>Machines.java class :</p>\n<pre><code>package com.example.machinerecycle;\n\nimport android.provider.ContactsContract;\n\nimport com.google.firebase.database.DataSnapshot;\n\npublic class Machines {\n    private String id;\n    private Integer cap1,cap2,state;\n\n    public Machines(String id, Integer cap1, Integer cap2, Integer state) {\n        this.id = id;\n        this.cap1 = cap1;\n        this.cap2 = cap2;\n        this.state = state;\n    }\n\n    public String getId() {\n        return id;\n    }\n\n    public void setId(String id) {\n        this.id = id;\n    }\n\n    public Integer getCap1() {\n        return cap1;\n    }\n\n    public void setCap1(Integer cap1) {\n        this.cap1 = cap1;\n    }\n\n    public Integer getCap2() {\n        return cap2;\n    }\n\n    public void setCap2(Integer cap2) {\n        this.cap2 = cap2;\n    }\n\n    public Integer getState() {\n        return state;\n    }\n\n    public void setState(Integer state) {\n        this.state = state;\n    }\n}\n\n</code></pre>\n"},{"tags":["java","spring","spring-integration","spring-integration-dsl"],"answers":[{"tags":[],"owner":{"account_id":3273937,"reputation":114855,"user_id":2756547,"accept_rate":75,"display_name":"Artem Bilan"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1669650747,"creation_date":1669650747,"answer_id":74603176,"question_id":74499349,"body_markdown":"The `order` is an attribute of the endpoint which is going to subscribe to the channel. In your case we have those two `.handle()` endpoints and here is an option how to configure:\r\n\r\n    .handle( message -&gt; System.out.println(&quot;Enrich Headers based on Payload....&quot;),\r\n               e -&gt; e.order(1))\r\n\r\n     .handle( message -&gt; System.out.println(&quot;Save Payload to Audit Table...&quot;),\r\n               e -&gt; e.order(2))\r\n\r\nSee docs for more info: https://docs.spring.io/spring-integration/docs/current/reference/html/dsl.html#java-dsl-endpoints","title":"Order of &quot;subscribing&quot; Spring Integration Flows when using Java SDL","body":"<p>The <code>order</code> is an attribute of the endpoint which is going to subscribe to the channel. In your case we have those two <code>.handle()</code> endpoints and here is an option how to configure:</p>\n<pre><code>.handle( message -&gt; System.out.println(&quot;Enrich Headers based on Payload....&quot;),\n           e -&gt; e.order(1))\n\n .handle( message -&gt; System.out.println(&quot;Save Payload to Audit Table...&quot;),\n           e -&gt; e.order(2))\n</code></pre>\n<p>See docs for more info: <a href=\"https://docs.spring.io/spring-integration/docs/current/reference/html/dsl.html#java-dsl-endpoints\" rel=\"nofollow noreferrer\">https://docs.spring.io/spring-integration/docs/current/reference/html/dsl.html#java-dsl-endpoints</a></p>\n"}],"owner":{"account_id":26774791,"reputation":826,"user_id":20370596,"display_name":"Christoph Dahlen"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":58,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1669650747,"creation_date":1668854930,"question_id":74499349,"body_markdown":"Referencing rather ancient question https://stackoverflow.com/questions/41658104/spring-integration-publish-subscribe-channel-with-spring-dsl, I need to know wether it is possible to determine / declare the order of which subscribers of a publish/subscriber-channel will be called.\r\n\r\nReason: I am receiving files from a remote directory to transfer them into a database and delete afterwards. Of course, deletion shall only happen, if writing to the database completed successfully. \r\n\r\n\r\nCode from referenced question is: \r\n\r\n```java\r\n@Bean\r\npublic SubscribableChannel  httpInAdapterPubSubChannel()\r\n{\r\n    return MessageChannels.publishSubscribe(&quot;httpInAdapterPubSubChannel&quot;)\r\n    .get();\r\n}\r\n\r\n@Bean\r\npublic IntegrationFlow subscriber1() {\r\n    return IntegrationFlows.from(httpInAdapterPubSubChannel())\r\n            .handle( message -&gt; System.out.println(&quot;Enrich Headers based on Payload....&quot;))\r\n            .get();\r\n}\r\n\r\n@Bean\r\npublic IntegrationFlow subscriber2() {\r\n     return IntegrationFlows.from(httpInAdapterPubSubChannel())\r\n                .handle( message -&gt; System.out.println(&quot;Save Payload to Audit Table...&quot;))\r\n                .get();\r\n}\r\n```","title":"Order of &quot;subscribing&quot; Spring Integration Flows when using Java SDL","body":"<p>Referencing rather ancient question <a href=\"https://stackoverflow.com/questions/41658104/spring-integration-publish-subscribe-channel-with-spring-dsl\">Spring Integration &quot;Publish Subscribe Channel&quot; with Spring DSL</a>, I need to know wether it is possible to determine / declare the order of which subscribers of a publish/subscriber-channel will be called.</p>\n<p>Reason: I am receiving files from a remote directory to transfer them into a database and delete afterwards. Of course, deletion shall only happen, if writing to the database completed successfully.</p>\n<p>Code from referenced question is:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Bean\npublic SubscribableChannel  httpInAdapterPubSubChannel()\n{\n    return MessageChannels.publishSubscribe(&quot;httpInAdapterPubSubChannel&quot;)\n    .get();\n}\n\n@Bean\npublic IntegrationFlow subscriber1() {\n    return IntegrationFlows.from(httpInAdapterPubSubChannel())\n            .handle( message -&gt; System.out.println(&quot;Enrich Headers based on Payload....&quot;))\n            .get();\n}\n\n@Bean\npublic IntegrationFlow subscriber2() {\n     return IntegrationFlows.from(httpInAdapterPubSubChannel())\n                .handle( message -&gt; System.out.println(&quot;Save Payload to Audit Table...&quot;))\n                .get();\n}\n</code></pre>\n"},{"tags":["java","for-loop","while-loop"],"comments":[{"owner":{"account_id":401843,"reputation":89788,"user_id":768644,"display_name":"rzwitserloot"},"score":3,"creation_date":1595272723,"post_id":63002413,"comment_id":111411986,"body_markdown":"Okay, you&#39;ve stated what you expected and you have your code, but, er, you seem to have forgotten an actual question.","body":"Okay, you&#39;ve stated what you expected and you have your code, but, er, you seem to have forgotten an actual question."},{"owner":{"account_id":11824535,"reputation":1335,"user_id":8652760,"display_name":"Jasmeet"},"score":1,"creation_date":1595272843,"post_id":63002413,"comment_id":111412031,"body_markdown":"What happens if the input is greater than 5 ? You need to provide correct input/output scenarios and also what is wrong with your code.","body":"What happens if the input is greater than 5 ? You need to provide correct input/output scenarios and also what is wrong with your code."},{"owner":{"account_id":18583367,"reputation":9,"user_id":13542366,"display_name":"tejas vir"},"score":0,"creation_date":1595273075,"post_id":63002413,"comment_id":111412122,"body_markdown":"Sample Input 1 :\n3\nSample Output 1 :\n135\n351\n513     @Jasmeet","body":"Sample Input 1 : 3 Sample Output 1 : 135 351 513     @Jasmeet"},{"owner":{"account_id":18583367,"reputation":9,"user_id":13542366,"display_name":"tejas vir"},"score":0,"creation_date":1595273141,"post_id":63002413,"comment_id":111412140,"body_markdown":"@Jasmeet i am not able to find an approach","body":"@Jasmeet i am not able to find an approach"},{"owner":{"account_id":11824535,"reputation":1335,"user_id":8652760,"display_name":"Jasmeet"},"score":1,"creation_date":1595273297,"post_id":63002413,"comment_id":111412210,"body_markdown":"@tejasvir what if n is greater than 5 ?","body":"@tejasvir what if n is greater than 5 ?"},{"owner":{"account_id":18583367,"reputation":9,"user_id":13542366,"display_name":"tejas vir"},"score":0,"creation_date":1595273593,"post_id":63002413,"comment_id":111412337,"body_markdown":"@jasmeet that was the only sample input i have what i observed is it would follow for sample input 6  sample output 1,3,5,7,9,11 /n 3 5 7 9 11 1 /n 5 7 9 11 1 3 and so on","body":"@jasmeet that was the only sample input i have what i observed is it would follow for sample input 6  sample output 1,3,5,7,9,11 /n 3 5 7 9 11 1 /n 5 7 9 11 1 3 and so on"}],"answers":[{"tags":[],"owner":{"account_id":15543730,"reputation":1519,"user_id":11213660,"display_name":"cegredev"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1595273668,"creation_date":1595273668,"answer_id":63002630,"question_id":63002413,"body_markdown":"I believe this might be what you&#39;re looking for:\r\n\r\n\tpublic static void main(String[] args) {\r\n\t\t// Open the scanner, set variables\r\n\t\tScanner scanner = new Scanner(System.in);\r\n\t\tint add = 2, iterations = scanner.nextInt();\r\n\r\n\t\t// For the amount of times entered\r\n\t\tfor (int i = 0; i &lt; iterations; i++) {\r\n\t\t\t// Again, for the amount of times entered\r\n\t\t\tfor (int j = 0; j &lt; iterations; j++) {\r\n\t\t\t\t// j * add calculates what digit we are at right now. i *\r\n\t\t\t\t// add calculates the offset, so 1 becomes 3, or 5, or 7...\r\n\t\t\t\tint baseValue = j * add + i * add;\r\n\t\t\t\t// Calculates the max value for the amount of times entered: 5 times -&gt; 10, 6\r\n\t\t\t\t// times -&gt; 12...\r\n\t\t\t\tint max = iterations * add;\r\n\t\t\t\t// Prints the rest of dividing baseValue by max, plus one (to make the number\r\n\t\t\t\t// odd)\r\n\t\t\t\tSystem.out.print(baseValue % max + 1);\r\n\t\t\t}\r\n\r\n\t\t\t// Starts a new line\r\n\t\t\tSystem.out.println();\r\n\t\t}\r\n\r\n\t\t// Closes the scanner, which is good practice\r\n\t\tscanner.close();\r\n\t}","title":"Write a program to print the pattern for the given N number of rows","body":"<p>I believe this might be what you're looking for:</p>\n<pre><code>public static void main(String[] args) {\n    // Open the scanner, set variables\n    Scanner scanner = new Scanner(System.in);\n    int add = 2, iterations = scanner.nextInt();\n\n    // For the amount of times entered\n    for (int i = 0; i &lt; iterations; i++) {\n        // Again, for the amount of times entered\n        for (int j = 0; j &lt; iterations; j++) {\n            // j * add calculates what digit we are at right now. i *\n            // add calculates the offset, so 1 becomes 3, or 5, or 7...\n            int baseValue = j * add + i * add;\n            // Calculates the max value for the amount of times entered: 5 times -&gt; 10, 6\n            // times -&gt; 12...\n            int max = iterations * add;\n            // Prints the rest of dividing baseValue by max, plus one (to make the number\n            // odd)\n            System.out.print(baseValue % max + 1);\n        }\n\n        // Starts a new line\n        System.out.println();\n    }\n\n    // Closes the scanner, which is good practice\n    scanner.close();\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":11824535,"reputation":1335,"user_id":8652760,"display_name":"Jasmeet"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1595274118,"creation_date":1595274118,"answer_id":63002731,"question_id":63002413,"body_markdown":"I just updated your code to correctly print the output you require.\r\n\r\nNote that I have used array to store the odd numbers as per count rather than creating them every time. This will also be useful to keep track of the previous output.\r\n\r\n    import java.util.Scanner;\r\n    \r\n    public class Main {\r\n        public static void main(String[] args) {\r\n            Scanner s = new Scanner(System.in);\r\n            int n = s.nextInt(); // Get input number n\r\n            \r\n            int[] arr = new int[n]; // Array to store odd numbers\r\n            int odd = 1; // Start of odd number\r\n            for(int i=0;i&lt;n;i++)\r\n            { // Store the odd numbers in array\r\n                arr[i] = odd;\r\n                odd += 2;\r\n            }\r\n            \r\n            for(int i=0;i&lt;n;i++)\r\n            {\r\n                PrintArray(arr,n); // Print array\r\n                leftRotatebyOne(arr,n); // Rotate the array to left by one\r\n                System.out.println();\r\n            }\r\n        }\r\n        \r\n        static void leftRotatebyOne(int[] arr, int n) \r\n        { \r\n            int i, temp = arr[0]; \r\n            for (i = 0; i &lt; n - 1; i++) \r\n                arr[i] = arr[i + 1]; \r\n      \r\n            arr[i] = temp; \r\n        }\r\n        \r\n        static void PrintArray(int[] arr, int n)\r\n        {\r\n            for(int i=0;i&lt;n;i++)\r\n            {\r\n                System.out.print(arr[i]);\r\n            }\r\n        }\r\n    }","title":"Write a program to print the pattern for the given N number of rows","body":"<p>I just updated your code to correctly print the output you require.</p>\n<p>Note that I have used array to store the odd numbers as per count rather than creating them every time. This will also be useful to keep track of the previous output.</p>\n<pre><code>import java.util.Scanner;\n\npublic class Main {\n    public static void main(String[] args) {\n        Scanner s = new Scanner(System.in);\n        int n = s.nextInt(); // Get input number n\n        \n        int[] arr = new int[n]; // Array to store odd numbers\n        int odd = 1; // Start of odd number\n        for(int i=0;i&lt;n;i++)\n        { // Store the odd numbers in array\n            arr[i] = odd;\n            odd += 2;\n        }\n        \n        for(int i=0;i&lt;n;i++)\n        {\n            PrintArray(arr,n); // Print array\n            leftRotatebyOne(arr,n); // Rotate the array to left by one\n            System.out.println();\n        }\n    }\n    \n    static void leftRotatebyOne(int[] arr, int n) \n    { \n        int i, temp = arr[0]; \n        for (i = 0; i &lt; n - 1; i++) \n            arr[i] = arr[i + 1]; \n  \n        arr[i] = temp; \n    }\n    \n    static void PrintArray(int[] arr, int n)\n    {\n        for(int i=0;i&lt;n;i++)\n        {\n            System.out.print(arr[i]);\n        }\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":20980407,"reputation":1,"user_id":15415380,"display_name":"Vaibhav Mittal"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1615991475,"creation_date":1615988085,"answer_id":66674207,"question_id":63002413,"body_markdown":"```\r\nimport java.util.Scanner;\r\n\r\npublic class Main {\r\n\tpublic static void main(String[] args) {\r\n\t\tScanner s = new Scanner(System.in);\r\n        int n = s.nextInt();\r\n        int i = 1;\r\n        int maxOdd = 1+(n-1)*2;\r\n        int oddCount =0;\r\n        while(i&lt;=n){\r\n            int j =1;\r\n            int odd=1;\r\n            odd=odd+oddCount;\r\n            while(j&lt;=n){\r\n                \r\n                if(odd&gt;maxOdd){\r\n                     odd=1;\r\n                }\r\n                System.out.print(odd);\r\n                odd=odd+2;\r\n                j=j+1;\r\n               \r\n            }\r\n            System.out.println();\r\n            i=i+1;\r\n            oddCount= oddCount+2;\r\n            \r\n        }\r\n\t\r\n    }\r\n}\r\n```","title":"Write a program to print the pattern for the given N number of rows","body":"<pre><code>import java.util.Scanner;\n\npublic class Main {\n    public static void main(String[] args) {\n        Scanner s = new Scanner(System.in);\n        int n = s.nextInt();\n        int i = 1;\n        int maxOdd = 1+(n-1)*2;\n        int oddCount =0;\n        while(i&lt;=n){\n            int j =1;\n            int odd=1;\n            odd=odd+oddCount;\n            while(j&lt;=n){\n                \n                if(odd&gt;maxOdd){\n                     odd=1;\n                }\n                System.out.print(odd);\n                odd=odd+2;\n                j=j+1;\n               \n            }\n            System.out.println();\n            i=i+1;\n            oddCount= oddCount+2;\n            \n        }\n    \n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":21161775,"reputation":1,"user_id":15559879,"display_name":"SHOBHIT MISHRA"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1617651728,"creation_date":1617648933,"answer_id":66958265,"question_id":63002413,"body_markdown":"    import java.util.Scanner;\r\n    \r\n    public class Test {\r\n    \r\n    \tpublic static void main(String[] args) {\r\n    \t\tScanner s = new Scanner(System.in);\r\n    \t\tint n = s.nextInt();\r\n    \t\tint maxOdd = 1 + (n - 1) * 2;\r\n    \t\tfor (int i = 1; i &lt;= n; i++) {\r\n    \t\t\tint p = 2 * i - 1;\r\n    \t\t\tfor (int j = 1; j &lt;= n; j++) {\r\n    \t\t\t\tif (p &gt; maxOdd) {\r\n    \t\t\t\t\tp = 1;\r\n    \t\t\t\t}\r\n    \t\t\t\tSystem.out.print(p);\r\n    \t\t\t\tp = p + 2;\r\n    \t\t\t}\r\n    \t\tSystem.out.println();\r\n    \t\t}\r\n    \t\ts.close();\r\n    \t}\r\n    }","title":"Write a program to print the pattern for the given N number of rows","body":"<pre><code>import java.util.Scanner;\n\npublic class Test {\n\n    public static void main(String[] args) {\n        Scanner s = new Scanner(System.in);\n        int n = s.nextInt();\n        int maxOdd = 1 + (n - 1) * 2;\n        for (int i = 1; i &lt;= n; i++) {\n            int p = 2 * i - 1;\n            for (int j = 1; j &lt;= n; j++) {\n                if (p &gt; maxOdd) {\n                    p = 1;\n                }\n                System.out.print(p);\n                p = p + 2;\n            }\n        System.out.println();\n        }\n        s.close();\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":22429480,"reputation":1,"user_id":16635567,"display_name":"Baboolal Yadav"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1631407952,"creation_date":1631381053,"answer_id":69145234,"question_id":63002413,"body_markdown":"    import java.util.Scanner;\r\n    public class Main {\r\n    \t\r\n    \tpublic static void main(String[] args) {\r\n    \t\t// `Write your code here\r\n            Scanner s = new Scanner(System.in);\r\n            int n = s.nextInt();\r\n           \r\n            for (int i = 1; i &lt;= n; i++) {\r\n                int p = 2 * i - 1;\r\n                for (int j = 1; j &lt;= n; j++) {\r\n                        System.out.print(p);\r\n                        p = p + 2;\r\n                     int maxOdd =(2*n)-1;\r\n                     if(p&gt;maxOdd){\r\n                        p=1;\r\n                    }\r\n                   \r\n                }\r\n            System.out.println();\r\n            }\r\n        s.close();\r\n            \r\n             \r\n    \r\n    \t}\r\n    }\r\n\r\n","title":"Write a program to print the pattern for the given N number of rows","body":"<pre><code>import java.util.Scanner;\npublic class Main {\n    \n    public static void main(String[] args) {\n        // `Write your code here\n        Scanner s = new Scanner(System.in);\n        int n = s.nextInt();\n       \n        for (int i = 1; i &lt;= n; i++) {\n            int p = 2 * i - 1;\n            for (int j = 1; j &lt;= n; j++) {\n                    System.out.print(p);\n                    p = p + 2;\n                 int maxOdd =(2*n)-1;\n                 if(p&gt;maxOdd){\n                    p=1;\n                }\n               \n            }\n        System.out.println();\n        }\n    s.close();\n        \n         \n\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":19238503,"reputation":49,"user_id":14058987,"display_name":"Harsh Soni"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1640658601,"creation_date":1640658601,"answer_id":70502244,"question_id":63002413,"body_markdown":"    **This is the easiest way that you are looking for**\r\n    import java.util.Scanner;\r\n    public class Main {\r\n        public static void main(String[] args) {\r\n            Scanner sc = new Scanner(System.in);\r\n            System.out.print(&quot;Enter rows : &quot;);\r\n            int n = sc.nextInt();\r\n            int x;\r\n            for (int i = 1; i &lt;= n; i++) {\r\n                for (int j = 1; j &lt;= n; j++) {\r\n                    x = 2 * (i + j);\r\n                    if (i + j &lt;= n + 1) {\r\n                    System.out.print(x - 3 + &quot; &quot;);\r\n                    } else {\r\n                    System.out.print(x - (n * 2 + 3) + &quot; &quot;);\r\n                    }\r\n                }\r\n            System.out.println();\r\n            }\r\n        }\r\n    }","title":"Write a program to print the pattern for the given N number of rows","body":"<pre><code>**This is the easiest way that you are looking for**\nimport java.util.Scanner;\npublic class Main {\n    public static void main(String[] args) {\n        Scanner sc = new Scanner(System.in);\n        System.out.print(&quot;Enter rows : &quot;);\n        int n = sc.nextInt();\n        int x;\n        for (int i = 1; i &lt;= n; i++) {\n            for (int j = 1; j &lt;= n; j++) {\n                x = 2 * (i + j);\n                if (i + j &lt;= n + 1) {\n                System.out.print(x - 3 + &quot; &quot;);\n                } else {\n                System.out.print(x - (n * 2 + 3) + &quot; &quot;);\n                }\n            }\n        System.out.println();\n        }\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":18583367,"reputation":9,"user_id":13542366,"display_name":"tejas vir"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":12723,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":6,"score":-1,"last_activity_date":1669650021,"creation_date":1595272637,"question_id":63002413,"body_markdown":"following pattern:\r\n\r\nSample Input 2 :\r\n\r\n    5\r\n\r\nSample Output 2 :\r\n\r\n    13579\r\n    35791\r\n    57913\r\n    79135\r\n    91357\r\n\r\n\r\nmy java code:\r\n\r\n    import java.util.Scanner;\r\n\r\n    public class Main {\r\n\t    public static void main(String[] args) {\r\n\t\t    Scanner s = new Scanner(System.in);\r\n            int n = s.nextInt();\r\n            int i = 1;\r\n\r\n            while(i&lt;=n) {\r\n                int j = 1;\r\n                int odd = 1;\r\n\r\n                while(j &lt;= n) {\r\n                    System.out.print(odd);\r\n                    odd = odd+2;\r\n                    j++;\r\n                }\r\n\r\n                System.out.println();\r\n                i++;\r\n            }\r\n\t    }\r\n    }\r\n","title":"Write a program to print the pattern for the given N number of rows","body":"<p>following pattern:</p>\n<p>Sample Input 2 :</p>\n<pre><code>5\n</code></pre>\n<p>Sample Output 2 :</p>\n<pre><code>13579\n35791\n57913\n79135\n91357\n</code></pre>\n<p>my java code:</p>\n<pre><code>import java.util.Scanner;\n\npublic class Main {\n    public static void main(String[] args) {\n        Scanner s = new Scanner(System.in);\n        int n = s.nextInt();\n        int i = 1;\n\n        while(i&lt;=n) {\n            int j = 1;\n            int odd = 1;\n\n            while(j &lt;= n) {\n                System.out.print(odd);\n                odd = odd+2;\n                j++;\n            }\n\n            System.out.println();\n            i++;\n        }\n    }\n}\n</code></pre>\n"},{"tags":["java","maven","visual-studio-code","debugging","multi-module"],"comments":[{"owner":{"account_id":25311208,"reputation":7305,"user_id":19133920,"display_name":"JialeDu"},"score":0,"creation_date":1669713436,"post_id":74602996,"comment_id":131699396,"body_markdown":"What options did you modify? Are you having trouble running the code? How do you debug code? See [documentation](https://code.visualstudio.com/docs/java/java-debugging#_run-and-debug) for an introduction to debugging.","body":"What options did you modify? Are you having trouble running the code? How do you debug code? See <a href=\"https://code.visualstudio.com/docs/java/java-debugging#_run-and-debug\" rel=\"nofollow noreferrer\">documentation</a> for an introduction to debugging."},{"owner":{"account_id":4206618,"reputation":808,"user_id":4180447,"accept_rate":47,"display_name":"tarekahf"},"score":0,"creation_date":1669750087,"post_id":74602996,"comment_id":131712554,"body_markdown":"I can run the code and I can start the debugger and all is OK. The only problem is that the debugger will disconnect after a couple of minutes as mentioned in the post above.","body":"I can run the code and I can start the debugger and all is OK. The only problem is that the debugger will disconnect after a couple of minutes as mentioned in the post above."},{"owner":{"account_id":25311208,"reputation":7305,"user_id":19133920,"display_name":"JialeDu"},"score":0,"creation_date":1669884357,"post_id":74602996,"comment_id":131745651,"body_markdown":"I haven&#39;t been able to reproduce your problem here. If you have enough information, you can file a report on GitHub.","body":"I haven&#39;t been able to reproduce your problem here. If you have enough information, you can file a report on GitHub."},{"owner":{"account_id":4206618,"reputation":808,"user_id":4180447,"accept_rate":47,"display_name":"tarekahf"},"score":0,"creation_date":1669909049,"post_id":74602996,"comment_id":131754441,"body_markdown":"It&#39;s already reported on GitHub.","body":"It&#39;s already reported on GitHub."}],"owner":{"account_id":4206618,"reputation":808,"user_id":4180447,"accept_rate":47,"display_name":"tarekahf"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":349,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1669649829,"creation_date":1669649829,"question_id":74602996,"body_markdown":"&lt;!--\r\nPlease fill in the *entire* template below. Screenshots and logs will be very helpful.\r\n--&gt;\r\n\r\n**Environment:**\r\n\r\n- VS Code Version: 1.73.1\r\n- Extension Version: Language Support for Java(TM) by Red Hat v1.13.2022111603\r\n- JDK Type &amp; Version: Oracle jdk1.8.0_351 - 32bit\r\n- OS Type &amp; Version: Windows 10 Enterprise\r\n\r\n**Step to Reproduce:**\r\n- Open an existing multi-module maven project in VS Code and wait until it is fully loaded. This project is relatively huge.\r\n- Setup `launch.json` with `attach` and `launch` for Java Project\r\n- The `launch` config is working fine. Still, after a couple of minutes, I get `ERROR: transport error 202: recv error: Connection reset by peer` in the terminal, and the debugger is disconnected.\r\n- The same happens with the `attach` config.\r\n- I am able to debug successfully as long as the debugger is not disconnected.\r\n- When debugging in the `attach` config, the debugger keeps on listening, and I can attach again, but it will disconnect after a couple of minutes.\r\n- Even after the debugger is disconnected, the application is still active.\r\n- The command used to start the debugger in `attach` mode is:\r\n```\r\nC:\\apps\\jdk1.8.0_351\\bin\\java.exe &quot;-agentlib:jdwp=transport=dt_socket,server=y,suspend=y,address=localhost:60082&quot; &#39;-Xincgc -Xms64m -Xmx950m&#39; &#39;-Dsun.security.ssl.allowUnsafeRenegotiation=&quot;true&quot;&#39; &#39;-Djava.security.policy=&quot;policy.all&quot;&#39; &#39;-Dpython.home=&quot;..&quot;&#39; &#39;-Dcom.ibm.mq.cfg.useIBMCipherMappings=&quot;false&quot;&#39; &#39;-Xbootclasspath/p:class1 class2 ...&#39; &#39;-cp&#39; &#39;.\\classpath.jar&#39; &#39;mainClassName&#39;\r\n```\r\n\r\nNote: The command above to start the debugger is provided by copying parts of the output from the terminal which is based on the actual command used to launch the actual application.\r\n\r\nLaunch Config for the `attach request`:\r\n```\r\n        {\r\n            &quot;type&quot;: &quot;java&quot;,\r\n            &quot;name&quot;: &quot;Attach to java debug port 60082&quot;,\r\n            &quot;projectName&quot;: &quot;sarora&quot;,\r\n            &quot;request&quot;: &quot;attach&quot;,\r\n            &quot;hostName&quot;: &quot;localhost&quot;,\r\n            &quot;port&quot;: &quot;60082&quot;\r\n        }\r\n```\r\n**Expected Behavior:**\r\n- The debugger should remain active and should not disconnect\r\n\r\n**Actual Behavior:**\r\n- The debugger disconnects after a couple of minutes.\r\n\r\n**Related Issues:** &lt;!-- Did you find other bugs that looked similar? --&gt;\r\nI found this report to be similar:\r\nhttps://github.com/microsoft/vscode-java-debug/issues/164\r\nand I followed the instructions to do the needed troubleshooting but it is not working.","title":"&#39;ERROR: transport error 202: recv error: Connection reset by peer&#39; while debugging Maven Project in vscode","body":"\n<p><strong>Environment:</strong></p>\n<ul>\n<li>VS Code Version: 1.73.1</li>\n<li>Extension Version: Language Support for Java(TM) by Red Hat v1.13.2022111603</li>\n<li>JDK Type &amp; Version: Oracle jdk1.8.0_351 - 32bit</li>\n<li>OS Type &amp; Version: Windows 10 Enterprise</li>\n</ul>\n<p><strong>Step to Reproduce:</strong></p>\n<ul>\n<li>Open an existing multi-module maven project in VS Code and wait until it is fully loaded. This project is relatively huge.</li>\n<li>Setup <code>launch.json</code> with <code>attach</code> and <code>launch</code> for Java Project</li>\n<li>The <code>launch</code> config is working fine. Still, after a couple of minutes, I get <code>ERROR: transport error 202: recv error: Connection reset by peer</code> in the terminal, and the debugger is disconnected.</li>\n<li>The same happens with the <code>attach</code> config.</li>\n<li>I am able to debug successfully as long as the debugger is not disconnected.</li>\n<li>When debugging in the <code>attach</code> config, the debugger keeps on listening, and I can attach again, but it will disconnect after a couple of minutes.</li>\n<li>Even after the debugger is disconnected, the application is still active.</li>\n<li>The command used to start the debugger in <code>attach</code> mode is:</li>\n</ul>\n<pre><code>C:\\apps\\jdk1.8.0_351\\bin\\java.exe &quot;-agentlib:jdwp=transport=dt_socket,server=y,suspend=y,address=localhost:60082&quot; '-Xincgc -Xms64m -Xmx950m' '-Dsun.security.ssl.allowUnsafeRenegotiation=&quot;true&quot;' '-Djava.security.policy=&quot;policy.all&quot;' '-Dpython.home=&quot;..&quot;' '-Dcom.ibm.mq.cfg.useIBMCipherMappings=&quot;false&quot;' '-Xbootclasspath/p:class1 class2 ...' '-cp' '.\\classpath.jar' 'mainClassName'\n</code></pre>\n<p>Note: The command above to start the debugger is provided by copying parts of the output from the terminal which is based on the actual command used to launch the actual application.</p>\n<p>Launch Config for the <code>attach request</code>:</p>\n<pre><code>        {\n            &quot;type&quot;: &quot;java&quot;,\n            &quot;name&quot;: &quot;Attach to java debug port 60082&quot;,\n            &quot;projectName&quot;: &quot;sarora&quot;,\n            &quot;request&quot;: &quot;attach&quot;,\n            &quot;hostName&quot;: &quot;localhost&quot;,\n            &quot;port&quot;: &quot;60082&quot;\n        }\n</code></pre>\n<p><strong>Expected Behavior:</strong></p>\n<ul>\n<li>The debugger should remain active and should not disconnect</li>\n</ul>\n<p><strong>Actual Behavior:</strong></p>\n<ul>\n<li>The debugger disconnects after a couple of minutes.</li>\n</ul>\n<p><strong>Related Issues:</strong> \nI found this report to be similar:\n<a href=\"https://github.com/microsoft/vscode-java-debug/issues/164\" rel=\"nofollow noreferrer\">https://github.com/microsoft/vscode-java-debug/issues/164</a>\nand I followed the instructions to do the needed troubleshooting but it is not working.</p>\n"},{"tags":["java","spring","eclipse","tomcat","port"],"comments":[{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1669649580,"post_id":74602857,"comment_id":131684350,"body_markdown":"Kill all java processes and try again?","body":"Kill all java processes and try again?"},{"owner":{"account_id":15064163,"reputation":13519,"user_id":10871900,"display_name":"dan1st is crying"},"score":1,"creation_date":1669650160,"post_id":74602857,"comment_id":131684635,"body_markdown":"Make sure you didn&#39;t start tomcat twice (e.g. by pressing the run button twice). Have you checked for port 8005 as well?","body":"Make sure you didn&#39;t start tomcat twice (e.g. by pressing the run button twice). Have you checked for port 8005 as well?"},{"owner":{"account_id":27074813,"reputation":1,"user_id":20624930,"display_name":"melona96"},"score":0,"creation_date":1669683737,"post_id":74602857,"comment_id":131693720,"body_markdown":"I checked port 8005 also but it didn&#39;t exist","body":"I checked port 8005 also but it didn&#39;t exist"}],"answers":[{"tags":[],"owner":{"account_id":22649232,"reputation":1287,"user_id":16824146,"display_name":"mr.Penguin"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1669649713,"creation_date":1669649713,"answer_id":74602966,"question_id":74602857,"body_markdown":"If you are using spring boot, you could specify the port number of your server in the application.conf or application.yml file, for example if you are using an .yml extension:\r\n[![enter image description here][1]][1] \r\n\r\n\r\n  [1]: https://i.stack.imgur.com/nBhtp.png\r\n\r\n\r\nor if you are using the .conf extension: \r\n\r\n    server.port=8081\r\n\r\nthe file could be found at: /src/main/resources/\r\n\r\nAlso you could list who is using your port by doing on CMD : \r\n\r\n    netstat -ano | findstr :&lt;PORT&gt;\r\n\r\nand then kill the PID that uses your port:\r\n\r\n    taskkill /PID &lt;PID&gt; /F\r\n\r\n \r\n\r\n\r\n","title":"How to fix Tomcat Serveral ports problem?","body":"<p>If you are using spring boot, you could specify the port number of your server in the application.conf or application.yml file, for example if you are using an .yml extension:\n<a href=\"https://i.stack.imgur.com/nBhtp.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/nBhtp.png\" alt=\"enter image description here\" /></a></p>\n<p>or if you are using the .conf extension:</p>\n<pre><code>server.port=8081\n</code></pre>\n<p>the file could be found at: /src/main/resources/</p>\n<p>Also you could list who is using your port by doing on CMD :</p>\n<pre><code>netstat -ano | findstr :&lt;PORT&gt;\n</code></pre>\n<p>and then kill the PID that uses your port:</p>\n<pre><code>taskkill /PID &lt;PID&gt; /F\n</code></pre>\n"}],"owner":{"account_id":27074813,"reputation":1,"user_id":20624930,"display_name":"melona96"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":148,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1669649713,"creation_date":1669649181,"question_id":74602857,"body_markdown":"&gt; Several ports (8005, 8080) required by Tomcat v9.0 Server at localhost\r\n&gt; are already in use. The server may already be running in another\r\n&gt; process, or a system process may be using the port. To start this\r\n&gt; server you will need to stop the other process or change the port\r\n&gt; number(s).\r\n\r\n[enter image description here](https://i.stack.imgur.com/hsplG.png)\r\n\r\nIn this problem, how can I fix this? This error occurred when STS was newly installed separately from the existing Eclipse.\r\n\r\nI tried to this solution.\r\n[enter image description here](https://i.stack.imgur.com/0vLkU.png)\r\n","title":"How to fix Tomcat Serveral ports problem?","body":"<blockquote>\n<p>Several ports (8005, 8080) required by Tomcat v9.0 Server at localhost\nare already in use. The server may already be running in another\nprocess, or a system process may be using the port. To start this\nserver you will need to stop the other process or change the port\nnumber(s).</p>\n</blockquote>\n<p><a href=\"https://i.stack.imgur.com/hsplG.png\" rel=\"nofollow noreferrer\">enter image description here</a></p>\n<p>In this problem, how can I fix this? This error occurred when STS was newly installed separately from the existing Eclipse.</p>\n<p>I tried to this solution.\n<a href=\"https://i.stack.imgur.com/0vLkU.png\" rel=\"nofollow noreferrer\">enter image description here</a></p>\n"},{"tags":["java","math","double","type-conversion"],"answers":[{"tags":[],"owner":{"account_id":3606180,"reputation":163,"user_id":3008304,"accept_rate":86,"display_name":"ARK"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1394261464,"creation_date":1394261464,"answer_id":22266169,"question_id":22266142,"body_markdown":"You can convert like this\r\n1.58e-6=1.58*10^-6=0.00000158","title":"What format is this double in and how can I convert it?","body":"<p>You can convert like this\n1.58e-6=1.58*10^-6=0.00000158</p>\n"},{"tags":[],"owner":{"account_id":950074,"reputation":925,"user_id":976399,"accept_rate":67,"display_name":"Fuzz"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1394262341,"creation_date":1394262341,"answer_id":22266280,"question_id":22266142,"body_markdown":"Ok, it was actually rather simple.\r\n\r\n    double dbl = 1.45e-6;\r\n    DecimalFormat df = new DecimalFormat(&quot;#.########&quot;);\r\n    System.out.println(df.format(dbl));  \r\n\r\noutputs : 0.00000145","title":"What format is this double in and how can I convert it?","body":"<p>Ok, it was actually rather simple.</p>\n\n<pre><code>double dbl = 1.45e-6;\nDecimalFormat df = new DecimalFormat(\"#.########\");\nSystem.out.println(df.format(dbl));  \n</code></pre>\n\n<p>outputs : 0.00000145</p>\n"},{"tags":[],"owner":{"account_id":2052678,"reputation":134073,"user_id":1831293,"accept_rate":91,"display_name":"Evgeniy Dorofeev"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1394262782,"creation_date":1394262782,"answer_id":22266339,"question_id":22266142,"body_markdown":"try this\r\n\r\n    String s = new DecimalFormat(&quot;0.##############&quot;).format(Double.parseDouble(&quot;1.58e-6&quot;));\r\n\r\n","title":"What format is this double in and how can I convert it?","body":"<p>try this</p>\n\n<pre><code>String s = new DecimalFormat(\"0.##############\").format(Double.parseDouble(\"1.58e-6\"));\n</code></pre>\n"},{"tags":[],"owner":{"account_id":71739,"reputation":307142,"user_id":207421,"accept_rate":82,"display_name":"user207421"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1394264378,"creation_date":1394264378,"answer_id":22266556,"question_id":22266142,"body_markdown":"It&#39;s called scientific notation. Double.parseDouble() can handle it. NB they&#39;re not doubles, they are real numbers expressed in text in scientific notation. Double is the target format you want, not this format.","title":"What format is this double in and how can I convert it?","body":"<p>It's called scientific notation. Double.parseDouble() can handle it. NB they're not doubles, they are real numbers expressed in text in scientific notation. Double is the target format you want, not this format.</p>\n"}],"owner":{"account_id":950074,"reputation":925,"user_id":976399,"accept_rate":67,"display_name":"Fuzz"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":699,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":4,"score":2,"last_activity_date":1669649653,"creation_date":1394261261,"question_id":22266142,"body_markdown":"I am reading a legacy webservice that returns doubles in a format I am not familiar with.\r\n\r\nsome examples are  \r\n1.58e-6  \r\n1.56e-6  \r\n1.45e-6  \r\n  \r\nThey should represent doubles like these (for example)\r\n0.000004343    \r\n  \r\nWhat is this format and how it can be converted?  \r\n","title":"What format is this double in and how can I convert it?","body":"<p>I am reading a legacy webservice that returns doubles in a format I am not familiar with.</p>\n<p>some examples are<br />\n1.58e-6<br />\n1.56e-6<br />\n1.45e-6</p>\n<p>They should represent doubles like these (for example)\n0.000004343</p>\n<p>What is this format and how it can be converted?</p>\n"},{"tags":["java","android","android-drawable","colordrawable"],"comments":[{"owner":{"account_id":945334,"reputation":8181,"user_id":972684,"accept_rate":86,"display_name":"HpTerm"},"score":0,"creation_date":1382009413,"post_id":19407672,"comment_id":28798075,"body_markdown":"if one of the answers provided solved your answer, think of validating it as an accepted answer so the other knows your problem is solved.","body":"if one of the answers provided solved your answer, think of validating it as an accepted answer so the other knows your problem is solved."},{"owner":{"account_id":8036609,"reputation":105,"user_id":6059528,"accept_rate":29,"display_name":"Игорь Комаров"},"score":0,"creation_date":1519747273,"post_id":19407672,"comment_id":85030513,"body_markdown":"There is a nice utility class android.graphics.Color that have a method parseColor. Try using it instead and don&#39;t forget to append the sharp (#) prefix to your colors string representation, e.g. #FF6666","body":"There is a nice utility class android.graphics.Color that have a method parseColor. Try using it instead and don&#39;t forget to append the sharp (#) prefix to your colors string representation, e.g. #FF6666"}],"answers":[{"tags":[],"owner":{"account_id":451752,"reputation":11207,"user_id":847818,"accept_rate":76,"display_name":"Enrichman"},"down_vote_count":2,"up_vote_count":195,"is_accepted":true,"score":193,"last_activity_date":1381938593,"creation_date":1381938260,"answer_id":19407855,"question_id":19407672,"body_markdown":"Since you&#39;re talking about hex you have to start with `0x` and don&#39;t forget the opacity.\r\n\r\nSo basically: **0xFFFF6666**\r\n\r\n    ColorDrawable cd = new ColorDrawable(0xFFFF6666);\r\n\r\nYou can also create a new colors.xml file into /res and define the colors like:\r\n\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\r\n    &lt;resources&gt;\r\n        &lt;color name=&quot;mycolor&quot;&gt;#FF6666&lt;/color&gt;\r\n    &lt;/resources&gt;\r\n\r\nand simply get the color defined in R.color.mycolor\r\n\r\n    getResources().getColor(R.color.mycolor)","title":"Create a new color drawable","body":"<p>Since you're talking about hex you have to start with <code>0x</code> and don't forget the opacity.</p>\n\n<p>So basically: <strong>0xFFFF6666</strong></p>\n\n<pre><code>ColorDrawable cd = new ColorDrawable(0xFFFF6666);\n</code></pre>\n\n<p>You can also create a new colors.xml file into /res and define the colors like:</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt;\n&lt;resources&gt;\n    &lt;color name=\"mycolor\"&gt;#FF6666&lt;/color&gt;\n&lt;/resources&gt;\n</code></pre>\n\n<p>and simply get the color defined in R.color.mycolor</p>\n\n<pre><code>getResources().getColor(R.color.mycolor)\n</code></pre>\n"},{"tags":[],"owner":{"account_id":945334,"reputation":8181,"user_id":972684,"accept_rate":86,"display_name":"HpTerm"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1382044767,"creation_date":1381938283,"answer_id":19407861,"question_id":19407672,"body_markdown":"I think you have to use :\r\n\r\n&gt; **public static int parseColor (String colorString)**\r\n&gt; \r\n&gt; Added in API level 1 Parse the color string, and return the\r\n&gt; corresponding color-int. If the string cannot be parsed, throws an\r\n&gt; IllegalArgumentException exception. Supported formats are: #RRGGBB #AARRGGBB red, blue, green, black, white, gray, cyan, magenta, yellow, lightgray, darkgray, grey, lightgrey, darkgrey, aqua, fuschia, lime,\r\n&gt; maroon, navy, olive, purple, silver, teal","title":"Create a new color drawable","body":"<p>I think you have to use :</p>\n\n<blockquote>\n  <p><strong>public static int parseColor (String colorString)</strong></p>\n  \n  <p>Added in API level 1 Parse the color string, and return the\n  corresponding color-int. If the string cannot be parsed, throws an\n  IllegalArgumentException exception. Supported formats are: #RRGGBB #AARRGGBB red, blue, green, black, white, gray, cyan, magenta, yellow, lightgray, darkgray, grey, lightgrey, darkgrey, aqua, fuschia, lime,\n  maroon, navy, olive, purple, silver, teal</p>\n</blockquote>\n"},{"tags":[],"owner":{"account_id":2719286,"reputation":5496,"user_id":2345913,"display_name":"CRUSADER"},"down_vote_count":0,"up_vote_count":10,"is_accepted":false,"score":10,"last_activity_date":1381938363,"creation_date":1381938363,"answer_id":19407894,"question_id":19407672,"body_markdown":"It should be like this...\r\n\r\n    ColorDrawable cd = new ColorDrawable(0xffff6666);\r\n\r\nNote I used 8 hex digits, not 6 hex digit . which [add to transparency][1]\r\n\r\n\r\n  [1]: https://stackoverflow.com/a/17239853/2345913","title":"Create a new color drawable","body":"<p>It should be like this...</p>\n\n<pre><code>ColorDrawable cd = new ColorDrawable(0xffff6666);\n</code></pre>\n\n<p>Note I used 8 hex digits, not 6 hex digit . which <a href=\"https://stackoverflow.com/a/17239853/2345913\">add to transparency</a></p>\n"},{"tags":[],"owner":{"account_id":3109173,"reputation":4921,"user_id":2631328,"accept_rate":88,"display_name":"JpCrow"},"down_vote_count":1,"up_vote_count":31,"is_accepted":false,"score":30,"last_activity_date":1463583291,"creation_date":1463583291,"answer_id":37303240,"question_id":19407672,"body_markdown":"For using with ContextCompat and rehuse the color you can do something like this:\r\n\r\n    ColorDrawable colorDrawable = new ColorDrawable(ContextCompat.getColor(this, R.color.white));\r\n","title":"Create a new color drawable","body":"<p>For using with ContextCompat and rehuse the color you can do something like this:</p>\n\n<pre><code>ColorDrawable colorDrawable = new ColorDrawable(ContextCompat.getColor(this, R.color.white));\n</code></pre>\n"},{"tags":[],"owner":{"account_id":8888700,"reputation":543,"user_id":6636122,"display_name":"BertKing"},"down_vote_count":0,"up_vote_count":9,"is_accepted":false,"score":9,"last_activity_date":1512465115,"creation_date":1512465115,"answer_id":47649818,"question_id":19407672,"body_markdown":"By followingthe above advice,to be a summary of this question:\r\n\r\n 1. ColorDrawable colorDrawable = new ColorDrawable(**Color.parseColor**(&quot;#ce9b2c&quot;));`\r\n \r\n 2. ColorDrawable colorDrawable = new ColorDrawable(**0xFFCE9B2C**); \r\n**Note there is  8 hex digits, not 6 hex digit,which no work. Case all**\r\n\r\n 3.   ColorDrawable colorDrawable = new ColorDrawable(ContextCompat.getColor(mContext,R.color.default_color));\r\n\r\nSelecting up to you!\r\n","title":"Create a new color drawable","body":"<p>By followingthe above advice,to be a summary of this question:</p>\n\n<ol>\n<li><p>ColorDrawable colorDrawable = new ColorDrawable(<strong>Color.parseColor</strong>(\"#ce9b2c\"));`</p></li>\n<li><p>ColorDrawable colorDrawable = new ColorDrawable(<strong>0xFFCE9B2C</strong>); \n<strong>Note there is  8 hex digits, not 6 hex digit,which no work. Case all</strong></p></li>\n<li><p>ColorDrawable colorDrawable = new ColorDrawable(ContextCompat.getColor(mContext,R.color.default_color));</p></li>\n</ol>\n\n<p>Selecting up to you!</p>\n"},{"tags":[],"owner":{"account_id":5981137,"reputation":17317,"user_id":4700156,"accept_rate":64,"display_name":"Rohit Singh"},"down_vote_count":2,"up_vote_count":3,"is_accepted":false,"score":1,"last_activity_date":1541359731,"creation_date":1541359731,"answer_id":53144565,"question_id":19407672,"body_markdown":"&gt; This is how I converted a Hex color to int and applied to a Background\r\n&gt; of a View\r\n\r\nLet&#39;s say that we have a color #8080000.\r\n\r\n### 1) Hex to int conversion\r\n\r\n    int myColor = Color.parseColor(&quot;#808000&quot;);\r\n\r\n###2) Set background            \r\n\r\n    view.setBackgroundColor(context.getColor(myColor));\r\n\r\n\r\n","title":"Create a new color drawable","body":"<blockquote>\n  <p>This is how I converted a Hex color to int and applied to a Background\n  of a View</p>\n</blockquote>\n\n<p>Let's say that we have a color #8080000.</p>\n\n<h3>1) Hex to int conversion</h3>\n\n<pre><code>int myColor = Color.parseColor(\"#808000\");\n</code></pre>\n\n<h3>2) Set background</h3>\n\n<pre><code>view.setBackgroundColor(context.getColor(myColor));\n</code></pre>\n"},{"tags":[],"owner":{"account_id":9631872,"reputation":5616,"user_id":7149454,"display_name":"Nick Kovalsky"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1669649598,"creation_date":1669649598,"answer_id":74602947,"question_id":19407672,"body_markdown":"Xamarin/Maui :\r\n\r\n      protected override void OnCreate(Bundle savedInstanceState)\r\n        {\r\n            base.OnCreate(savedInstanceState);      \r\n    \r\n            Window.SetBackgroundDrawable(new ColorDrawable(ColorExtensions.ToAndroid(Colors.Black)));\r\n        }","title":"Create a new color drawable","body":"<p>Xamarin/Maui :</p>\n<pre><code>  protected override void OnCreate(Bundle savedInstanceState)\n    {\n        base.OnCreate(savedInstanceState);      \n\n        Window.SetBackgroundDrawable(new ColorDrawable(ColorExtensions.ToAndroid(Colors.Black)));\n    }\n</code></pre>\n"}],"owner":{"account_id":1043415,"reputation":1448,"user_id":1048909,"accept_rate":50,"display_name":"c_idle"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":115958,"favorite_count":0,"down_vote_count":1,"up_vote_count":96,"accepted_answer_id":19407855,"answer_count":7,"score":95,"last_activity_date":1669649598,"creation_date":1381937707,"question_id":19407672,"body_markdown":"I am trying to convert a hex value to an int so I can create a new color drawable. I&#39;m not sure if this is possible, but according to the [documentation][1], it should. It plainly asks for\r\n\r\n&gt; **public ColorDrawable (int color)**\r\n&gt; \r\n&gt; Added in API level 1 Creates a new ColorDrawable with the specified\r\n&gt; color.\r\n&gt; \r\n&gt; **Parameters** *color*\tThe color to draw.\r\n\r\n\r\nSo, my code isn&#39;t working because I&#39;m getting an Invalid int: &quot;FF6666&quot; error. Any ideas?\r\n\r\n    int decode = Integer.decode(&quot;FF6666&quot;);\r\n    ColorDrawable colorDrawable = new ColorDrawable(decode);\r\n\r\n\r\n  [1]: https://developer.android.com/reference/android/graphics/drawable/ColorDrawable","title":"Create a new color drawable","body":"<p>I am trying to convert a hex value to an int so I can create a new color drawable. I'm not sure if this is possible, but according to the <a href=\"https://developer.android.com/reference/android/graphics/drawable/ColorDrawable\" rel=\"noreferrer\">documentation</a>, it should. It plainly asks for</p>\n\n<blockquote>\n  <p><strong>public ColorDrawable (int color)</strong></p>\n  \n  <p>Added in API level 1 Creates a new ColorDrawable with the specified\n  color.</p>\n  \n  <p><strong>Parameters</strong> <em>color</em>    The color to draw.</p>\n</blockquote>\n\n<p>So, my code isn't working because I'm getting an Invalid int: \"FF6666\" error. Any ideas?</p>\n\n<pre><code>int decode = Integer.decode(\"FF6666\");\nColorDrawable colorDrawable = new ColorDrawable(decode);\n</code></pre>\n"},{"tags":["java","rabbitmq","spring-rabbit"],"answers":[{"tags":[],"owner":{"account_id":3273937,"reputation":114855,"user_id":2756547,"accept_rate":75,"display_name":"Artem Bilan"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1669649541,"creation_date":1669649541,"answer_id":74602936,"question_id":74549633,"body_markdown":"It looks like your `BatchingRabbitTemplate` is not a bean. And you don&#39;t provide a `ConnectionFactory` for it.\r\n\r\nIt is simply easy to place debug breakpoints into `BatchingRabbitTemplate.send()` and see what is going on when you send those messages.","title":"How to use BatchingRabbitTemplate to increase publishing speed","body":"<p>It looks like your <code>BatchingRabbitTemplate</code> is not a bean. And you don't provide a <code>ConnectionFactory</code> for it.</p>\n<p>It is simply easy to place debug breakpoints into <code>BatchingRabbitTemplate.send()</code> and see what is going on when you send those messages.</p>\n"}],"owner":{"account_id":943688,"reputation":2561,"user_id":971355,"accept_rate":79,"display_name":"ka3ak"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":114,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1669649541,"creation_date":1669218786,"question_id":74549633,"body_markdown":"My goal is to publish 50000 messages to an exchange. I send each message in a loop using `RabbitTemplate.convertAndSend`.\r\n\r\nAs this procedure took significant amount of time I began to look for an approach that would decrease it. I run against `BatchingRabbitTemplate`, created and configured it in the following way:\r\n\r\n        BatchingStrategy strategy = new SimpleBatchingStrategy(1000, 1100, 3_000);\r\n        ThreadPoolTaskScheduler scheduler = new ThreadPoolTaskScheduler();\r\n        scheduler.setPoolSize(30);\r\n        scheduler.initialize();\r\n        rabbitTemplate = new BatchingRabbitTemplate(strategy, scheduler);\r\n\r\nand continued to send each message in the loop:\r\n\r\n        for (int i = 0; i &lt; 50000; i++) {\r\n             ...\r\n            rabbitTemplate.convertAndSend(&quot;my-exchange&quot;, &quot;*.my-key.*&quot;, message);\r\n        }\r\n\r\nBut I didn&#39;t notice any increase of the speed after that.\r\nWhen I used\r\n\r\n            BatchingStrategy strategy = new SimpleBatchingStrategy(1000, Integer.MAX_VALUE, 30_000);\r\n\r\nit was even worse than with a simple `RabbitTemplate`. It seems that I didn&#39;t configured it right. It would be great if anyone explain why it didn&#39;t lead to the expected publishing speed increase and/or suggest a solution?\r\n","title":"How to use BatchingRabbitTemplate to increase publishing speed","body":"<p>My goal is to publish 50000 messages to an exchange. I send each message in a loop using <code>RabbitTemplate.convertAndSend</code>.</p>\n<p>As this procedure took significant amount of time I began to look for an approach that would decrease it. I run against <code>BatchingRabbitTemplate</code>, created and configured it in the following way:</p>\n<pre><code>    BatchingStrategy strategy = new SimpleBatchingStrategy(1000, 1100, 3_000);\n    ThreadPoolTaskScheduler scheduler = new ThreadPoolTaskScheduler();\n    scheduler.setPoolSize(30);\n    scheduler.initialize();\n    rabbitTemplate = new BatchingRabbitTemplate(strategy, scheduler);\n</code></pre>\n<p>and continued to send each message in the loop:</p>\n<pre><code>    for (int i = 0; i &lt; 50000; i++) {\n         ...\n        rabbitTemplate.convertAndSend(&quot;my-exchange&quot;, &quot;*.my-key.*&quot;, message);\n    }\n</code></pre>\n<p>But I didn't notice any increase of the speed after that.\nWhen I used</p>\n<pre><code>        BatchingStrategy strategy = new SimpleBatchingStrategy(1000, Integer.MAX_VALUE, 30_000);\n</code></pre>\n<p>it was even worse than with a simple <code>RabbitTemplate</code>. It seems that I didn't configured it right. It would be great if anyone explain why it didn't lead to the expected publishing speed increase and/or suggest a solution?</p>\n"},{"tags":["java","docker","maven"],"comments":[{"owner":{"account_id":446597,"reputation":22464,"user_id":839733,"accept_rate":69,"display_name":"Abhijit Sarkar"},"score":0,"creation_date":1646076519,"post_id":71300031,"comment_id":126030670,"body_markdown":"What is the Spotify docker client showing in the logs? Are you using some kind of Maven/Gradle plugin? What happens if you build using `docker build` command?","body":"What is the Spotify docker client showing in the logs? Are you using some kind of Maven/Gradle plugin? What happens if you build using <code>docker build</code> command?"},{"owner":{"account_id":2205877,"reputation":601,"user_id":1949114,"accept_rate":75,"display_name":"Diego Nieto"},"score":0,"creation_date":1646077948,"post_id":71300031,"comment_id":126031123,"body_markdown":"I&#39;m using the dockerfile-maven-plugin and including the image build as part of the mvn execution, running the docker build command works.","body":"I&#39;m using the dockerfile-maven-plugin and including the image build as part of the mvn execution, running the docker build command works."}],"answers":[{"tags":[],"owner":{"account_id":12495309,"reputation":11902,"user_id":9095551,"display_name":"Beppe C"},"down_vote_count":0,"up_vote_count":14,"is_accepted":true,"score":14,"last_activity_date":1646085330,"creation_date":1646085330,"answer_id":71301494,"question_id":71300031,"body_markdown":"It looks like the `dockerfile-maven-plugin` uses a runtime based on x86 architecture and won&#39;t run on Apple M1 (Arm).  \r\nThe plugin is now inactive so you should try something else, for example the [fabric8-maven-plugin][1]\r\n\r\n              &lt;plugin&gt;\r\n                &lt;groupId&gt;io.fabric8&lt;/groupId&gt;\r\n                &lt;artifactId&gt;docker-maven-plugin&lt;/artifactId&gt;\r\n                &lt;version&gt;0.38.1&lt;/version&gt;\r\n                &lt;executions&gt;\r\n                    &lt;execution&gt;\r\n                        &lt;id&gt;build&lt;/id&gt;\r\n                        &lt;phase&gt;pre-integration-test&lt;/phase&gt;\r\n                        &lt;goals&gt;\r\n                            &lt;goal&gt;build&lt;/goal&gt;\r\n                        &lt;/goals&gt;\r\n                    &lt;/execution&gt;\r\n                &lt;/executions&gt;\r\n            &lt;/plugin&gt; \r\n\r\n\r\n\r\n  [1]: https://maven.fabric8.io/","title":"Docker image build failed on Mac M1 chip","body":"<p>It looks like the <code>dockerfile-maven-plugin</code> uses a runtime based on x86 architecture and won't run on Apple M1 (Arm).<br />\nThe plugin is now inactive so you should try something else, for example the <a href=\"https://maven.fabric8.io/\" rel=\"noreferrer\">fabric8-maven-plugin</a></p>\n<pre><code>          &lt;plugin&gt;\n            &lt;groupId&gt;io.fabric8&lt;/groupId&gt;\n            &lt;artifactId&gt;docker-maven-plugin&lt;/artifactId&gt;\n            &lt;version&gt;0.38.1&lt;/version&gt;\n            &lt;executions&gt;\n                &lt;execution&gt;\n                    &lt;id&gt;build&lt;/id&gt;\n                    &lt;phase&gt;pre-integration-test&lt;/phase&gt;\n                    &lt;goals&gt;\n                        &lt;goal&gt;build&lt;/goal&gt;\n                    &lt;/goals&gt;\n                &lt;/execution&gt;\n            &lt;/executions&gt;\n        &lt;/plugin&gt; \n</code></pre>\n"},{"tags":[],"owner":{"account_id":26130261,"reputation":41,"user_id":19821094,"display_name":"Yw Zhang"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1662960451,"creation_date":1662960451,"answer_id":73684826,"question_id":71300031,"body_markdown":"I met the same problem.According to the error message, it should be a connection error with the docker daemon.It seems that the plugin won&#39;t support Arm socket and you can do this:\r\n\r\n(1) install socat\r\n\r\n    brew install socat\r\n(2) set port forwarding\r\n\r\n    socat TCP-LISTEN:2375,range=127.0.0.1/32,reuseaddr,fork UNIX-CLIENT:/var/run/docker.sock\r\n\r\n(3) set environment variable\r\n\r\n    export DOCKER_HOST=tcp://127.0.0.1:2375\r\n\r\n","title":"Docker image build failed on Mac M1 chip","body":"<p>I met the same problem.According to the error message, it should be a connection error with the docker daemon.It seems that the plugin won't support Arm socket and you can do this:</p>\n<p>(1) install socat</p>\n<pre><code>brew install socat\n</code></pre>\n<p>(2) set port forwarding</p>\n<pre><code>socat TCP-LISTEN:2375,range=127.0.0.1/32,reuseaddr,fork UNIX-CLIENT:/var/run/docker.sock\n</code></pre>\n<p>(3) set environment variable</p>\n<pre><code>export DOCKER_HOST=tcp://127.0.0.1:2375\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2025979,"reputation":2522,"user_id":1810962,"accept_rate":80,"display_name":"joseph"},"down_vote_count":0,"up_vote_count":7,"is_accepted":false,"score":7,"last_activity_date":1669649456,"creation_date":1669649456,"answer_id":74602916,"question_id":71300031,"body_markdown":"Both of the spotify docker maven plugins are no longer maintained. They need to upgrade their dependency to a version that supports aarch64.\r\n\r\nIn our case there was significant refactoring needed to move to fabric8&#39;s plugin or to use maven exec so we wanted to continue to use spotify plugin.\r\n\r\nFortunately, you can force the plugin to use a particular dependency by adding a `&lt;dependencies&gt;` section to your plugin section. \r\n\r\n```\r\n                &lt;plugin&gt;\r\n                    &lt;groupId&gt;com.spotify&lt;/groupId&gt;\r\n                    &lt;artifactId&gt;dockerfile-maven-plugin&lt;/artifactId&gt;\r\n                    &lt;version&gt;1.4.6&lt;/version&gt;\r\n                    &lt;dependencies&gt;\r\n                        &lt;dependency&gt;\r\n                            &lt;groupId&gt;com.github.jnr&lt;/groupId&gt;\r\n                            &lt;artifactId&gt;jnr-unixsocket&lt;/artifactId&gt;\r\n                            &lt;version&gt;0.38.14&lt;/version&gt;\r\n                        &lt;/dependency&gt;\r\n                    &lt;/dependencies&gt;\r\n                &lt;/plugin&gt;\r\n\r\n```","title":"Docker image build failed on Mac M1 chip","body":"<p>Both of the spotify docker maven plugins are no longer maintained. They need to upgrade their dependency to a version that supports aarch64.</p>\n<p>In our case there was significant refactoring needed to move to fabric8's plugin or to use maven exec so we wanted to continue to use spotify plugin.</p>\n<p>Fortunately, you can force the plugin to use a particular dependency by adding a <code>&lt;dependencies&gt;</code> section to your plugin section.</p>\n<pre><code>                &lt;plugin&gt;\n                    &lt;groupId&gt;com.spotify&lt;/groupId&gt;\n                    &lt;artifactId&gt;dockerfile-maven-plugin&lt;/artifactId&gt;\n                    &lt;version&gt;1.4.6&lt;/version&gt;\n                    &lt;dependencies&gt;\n                        &lt;dependency&gt;\n                            &lt;groupId&gt;com.github.jnr&lt;/groupId&gt;\n                            &lt;artifactId&gt;jnr-unixsocket&lt;/artifactId&gt;\n                            &lt;version&gt;0.38.14&lt;/version&gt;\n                        &lt;/dependency&gt;\n                    &lt;/dependencies&gt;\n                &lt;/plugin&gt;\n\n</code></pre>\n"}],"owner":{"account_id":2205877,"reputation":601,"user_id":1949114,"accept_rate":75,"display_name":"Diego Nieto"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":13113,"favorite_count":0,"down_vote_count":0,"up_vote_count":7,"accepted_answer_id":71301494,"answer_count":3,"score":7,"last_activity_date":1669649456,"creation_date":1646076042,"question_id":71300031,"body_markdown":"I&#39;m trying to build a simple docker image, inside a maven project, adding the image build as part of the maven build process:\r\n\r\n```\r\n&lt;build&gt;\r\n\t\t&lt;finalName&gt;my-api&lt;/finalName&gt;\r\n\t\t&lt;plugins&gt;\r\n\t\t\t&lt;plugin&gt;\r\n\t\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t\t&lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\r\n\t\t\t&lt;/plugin&gt;\r\n\t\t\t&lt;!-- Docker --&gt;\r\n\t\t\t&lt;plugin&gt;\r\n\t\t\t\t&lt;groupId&gt;com.spotify&lt;/groupId&gt;\r\n\t\t\t\t&lt;artifactId&gt;dockerfile-maven-plugin&lt;/artifactId&gt;\r\n\t\t\t\t&lt;version&gt;1.4.6&lt;/version&gt;\r\n\t\t\t\t&lt;executions&gt;\r\n\t\t\t\t\t&lt;execution&gt;\r\n\t\t\t\t\t\t&lt;id&gt;default&lt;/id&gt;\r\n\t\t\t\t\t\t&lt;goals&gt;\r\n\t\t\t\t\t\t\t&lt;goal&gt;build&lt;/goal&gt;\r\n\t\t\t\t\t\t\t&lt;!-- &lt;goal&gt;push&lt;/goal&gt; --&gt;\r\n\t\t\t\t\t\t&lt;/goals&gt;\r\n\t\t\t\t\t&lt;/execution&gt;\r\n\t\t\t\t&lt;/executions&gt;\r\n\t\t\t\t&lt;configuration&gt;\r\n\t\t\t\t\t&lt;repository&gt;reponame/${project.name}&lt;/repository&gt;\r\n\t\t\t\t\t&lt;tag&gt;${project.version}&lt;/tag&gt;\r\n\t\t\t\t\t&lt;skipDockerInfo&gt;true&lt;/skipDockerInfo&gt;\r\n\t\t\t\t&lt;/configuration&gt;\r\n\t\t\t&lt;/plugin&gt;\r\n\r\n\t\t&lt;/plugins&gt;\r\n\r\n\t&lt;/build&gt;\r\n```\r\n\r\n\r\n\r\n```\r\nFROM openjdk:8-jdk-alpine\r\nVOLUME /tmp\r\nEXPOSE 8080\r\nADD target/*.jar app.jar\r\nENTRYPOINT [ &quot;sh&quot;, &quot;-c&quot;, &quot;java -jar /app.jar&quot; ]\r\n```\r\n\r\nBut it fails, always get the same error trace, no matter which image I use, the error persists.\r\n\r\nError: \r\n\r\n&gt; Caused by:\r\n&gt; com.spotify.docker.client.shaded.javax.ws.rs.ProcessingException:\r\n&gt; java.lang.UnsatisfiedLinkError: could not load FFI provider\r\n&gt; jnr.ffi.provider.jffi.Provider\r\n&gt; \r\n&gt; Caused by: java.lang.UnsatisfiedLinkError:\r\n&gt; java.lang.UnsatisfiedLinkError:\r\n&gt; /private/var/folders/hz/rgppp8250rsdp86kf_tfjvqw0000gp/T/jffi8502916075702391528.dylib:\r\n&gt; dlopen(/private/var/folders/hz/rgppp8250rsdp86kf_tfjvqw0000gp/T/jffi8502916075702391528.dylib,\r\n&gt; 0x0001): tried:\r\n&gt; &#39;/private/var/folders/hz/rgppp8250rsdp86kf_tfjvqw0000gp/T/jffi8502916075702391528.dylib&#39;\r\n&gt; (fat file, but missing compatible architecture (have &#39;i386,x86_64&#39;,\r\n&gt; need &#39;arm64e&#39;)), &#39;/usr/lib/jffi8502916075702391528.dylib&#39; (no such\r\n&gt; file)\r\n\r\n\r\nOther images I tried:\r\n- openjdk:13-alpine3.9\r\n- openjdk:8-jre-alpine3.9\r\n- azul/zulu-openjdk-alpine:17.0.2-17.32.13-arm64\r\n\r\n**My java version**: openjdk version &quot;11.0.13&quot; 2021-10-19 LTS\r\n\r\n**My Docker version**: Docker version 20.10.11, build dea9396\r\n\r\nThanks in advance.\r\n\r\n","title":"Docker image build failed on Mac M1 chip","body":"<p>I'm trying to build a simple docker image, inside a maven project, adding the image build as part of the maven build process:</p>\n<pre><code>&lt;build&gt;\n        &lt;finalName&gt;my-api&lt;/finalName&gt;\n        &lt;plugins&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n                &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\n            &lt;/plugin&gt;\n            &lt;!-- Docker --&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;com.spotify&lt;/groupId&gt;\n                &lt;artifactId&gt;dockerfile-maven-plugin&lt;/artifactId&gt;\n                &lt;version&gt;1.4.6&lt;/version&gt;\n                &lt;executions&gt;\n                    &lt;execution&gt;\n                        &lt;id&gt;default&lt;/id&gt;\n                        &lt;goals&gt;\n                            &lt;goal&gt;build&lt;/goal&gt;\n                            &lt;!-- &lt;goal&gt;push&lt;/goal&gt; --&gt;\n                        &lt;/goals&gt;\n                    &lt;/execution&gt;\n                &lt;/executions&gt;\n                &lt;configuration&gt;\n                    &lt;repository&gt;reponame/${project.name}&lt;/repository&gt;\n                    &lt;tag&gt;${project.version}&lt;/tag&gt;\n                    &lt;skipDockerInfo&gt;true&lt;/skipDockerInfo&gt;\n                &lt;/configuration&gt;\n            &lt;/plugin&gt;\n\n        &lt;/plugins&gt;\n\n    &lt;/build&gt;\n</code></pre>\n<pre><code>FROM openjdk:8-jdk-alpine\nVOLUME /tmp\nEXPOSE 8080\nADD target/*.jar app.jar\nENTRYPOINT [ &quot;sh&quot;, &quot;-c&quot;, &quot;java -jar /app.jar&quot; ]\n</code></pre>\n<p>But it fails, always get the same error trace, no matter which image I use, the error persists.</p>\n<p>Error:</p>\n<blockquote>\n<p>Caused by:\ncom.spotify.docker.client.shaded.javax.ws.rs.ProcessingException:\njava.lang.UnsatisfiedLinkError: could not load FFI provider\njnr.ffi.provider.jffi.Provider</p>\n<p>Caused by: java.lang.UnsatisfiedLinkError:\njava.lang.UnsatisfiedLinkError:\n/private/var/folders/hz/rgppp8250rsdp86kf_tfjvqw0000gp/T/jffi8502916075702391528.dylib:\ndlopen(/private/var/folders/hz/rgppp8250rsdp86kf_tfjvqw0000gp/T/jffi8502916075702391528.dylib,\n0x0001): tried:\n'/private/var/folders/hz/rgppp8250rsdp86kf_tfjvqw0000gp/T/jffi8502916075702391528.dylib'\n(fat file, but missing compatible architecture (have 'i386,x86_64',\nneed 'arm64e')), '/usr/lib/jffi8502916075702391528.dylib' (no such\nfile)</p>\n</blockquote>\n<p>Other images I tried:</p>\n<ul>\n<li>openjdk:13-alpine3.9</li>\n<li>openjdk:8-jre-alpine3.9</li>\n<li>azul/zulu-openjdk-alpine:17.0.2-17.32.13-arm64</li>\n</ul>\n<p><strong>My java version</strong>: openjdk version &quot;11.0.13&quot; 2021-10-19 LTS</p>\n<p><strong>My Docker version</strong>: Docker version 20.10.11, build dea9396</p>\n<p>Thanks in advance.</p>\n"},{"tags":["java","java-time","date-parsing","datetime-parsing","offsetdatetime"],"comments":[{"owner":{"account_id":213468,"reputation":103485,"user_id":466862,"display_name":"Mark Rotteveel"},"score":1,"creation_date":1669377770,"post_id":74572398,"comment_id":131633589,"body_markdown":"I cannot reproduce this (Java (Temurin) 11.0.17 Windows 11).","body":"I cannot reproduce this (Java (Temurin) 11.0.17 Windows 11)."},{"owner":{"account_id":213468,"reputation":103485,"user_id":466862,"display_name":"Mark Rotteveel"},"score":2,"creation_date":1669377862,"post_id":74572398,"comment_id":131633626,"body_markdown":"@Fenio The error reports `Text &#39;2021-12-31T23:00:00.000+00:00&#39; could not be parsed`, which means the input was not null. I&#39;d sooner guess there might be some non-printable character in there or something (though if I try that, I get a different error).","body":"@Fenio The error reports <code>Text &#39;2021-12-31T23:00:00.000+00:00&#39; could not be parsed</code>, which means the input was not null. I&#39;d sooner guess there might be some non-printable character in there or something (though if I try that, I get a different error)."},{"owner":{"account_id":74704,"reputation":11534,"user_id":214525,"accept_rate":100,"display_name":"f1sh"},"score":0,"creation_date":1669377918,"post_id":74572398,"comment_id":131633639,"body_markdown":"Does this answer your question? [OffsetDateTime parsing](https://stackoverflow.com/questions/38048032/offsetdatetime-parsing)","body":"Does this answer your question? <a href=\"https://stackoverflow.com/questions/38048032/offsetdatetime-parsing\">OffsetDateTime parsing</a>"},{"owner":{"account_id":213468,"reputation":103485,"user_id":466862,"display_name":"Mark Rotteveel"},"score":2,"creation_date":1669377977,"post_id":74572398,"comment_id":131633654,"body_markdown":"@f1sh How would that answer the question? The code as given in this question is correct and works fine on my machine.","body":"@f1sh How would that answer the question? The code as given in this question is correct and works fine on my machine."},{"owner":{"account_id":213468,"reputation":103485,"user_id":466862,"display_name":"Mark Rotteveel"},"score":1,"creation_date":1669378502,"post_id":74572398,"comment_id":131633818,"body_markdown":"Related: [DateTimeParseException: fails on one host, works on another, same JDK](https://stackoverflow.com/questions/56976974/datetimeparseexception-fails-on-one-host-works-on-another-same-jdk) (no resolution though), I wonder if it is somehow related to https://bugs.openjdk.java.net/browse/JDK-8226704, but that bug is a lot older than Java 11.0.17 and is marked as resolved. However, this might suggest that the problem might be related to Locale settings on your machine.","body":"Related: <a href=\"https://stackoverflow.com/questions/56976974/datetimeparseexception-fails-on-one-host-works-on-another-same-jdk\">DateTimeParseException: fails on one host, works on another, same JDK</a> (no resolution though), I wonder if it is somehow related to <a href=\"https://bugs.openjdk.java.net/browse/JDK-8226704\" rel=\"nofollow noreferrer\">bugs.openjdk.java.net/browse/JDK-8226704</a>, but that bug is a lot older than Java 11.0.17 and is marked as resolved. However, this might suggest that the problem might be related to Locale settings on your machine."},{"owner":{"account_id":213468,"reputation":103485,"user_id":466862,"display_name":"Mark Rotteveel"},"score":1,"creation_date":1669378803,"post_id":74572398,"comment_id":131633922,"body_markdown":"What is the output of `System.out.println(java.util.Locale.getDefault())` on your machine? What is the configured region in your windows region settings, (e.g. the &quot;Regional format&quot;)","body":"What is the output of <code>System.out.println(java.util.Locale.getDefault())</code> on your machine? What is the configured region in your windows region settings, (e.g. the &quot;Regional format&quot;)"},{"owner":{"account_id":7612423,"reputation":82486,"user_id":5772882,"display_name":"Anonymous"},"score":0,"creation_date":1669545543,"post_id":74572398,"comment_id":131661274,"body_markdown":"That’s weird alright. I’d get hold of the source code of the JDK and debug through it. Unfortunately the line numbers of your Java 19 stack trace do not match the Java 18 source code I have at hand.","body":"That’s weird alright. I’d get hold of the source code of the JDK and debug through it. Unfortunately the line numbers of your Java 19 stack trace do not match the Java 18 source code I have at hand."},{"owner":{"account_id":7612423,"reputation":82486,"user_id":5772882,"display_name":"Anonymous"},"score":0,"creation_date":1669617000,"post_id":74572398,"comment_id":131673895,"body_markdown":"Likely diagnosis from looking through the JDK source on GitHub: `java.time.format.Parsed.crossCheck()` line 698: `crossCheck(date.atTime(time));`. `atTme()` returns `null` (one may research why), which causes a `NullPointerException` in `crossCheck(TemporalAccessor)` line 707: `if (target.isSupported(field)) {`. The NPE is caught in `DateTimeFormatter.parse(CharSequence, TemporalQuery)` line 2011: `} catch (RuntimeException ex) {`, from where `createError()` is called. If you can reproduce it in a tiny example with no suspicious circumstances, I think you can report it into the JDK bug system.","body":"Likely diagnosis from looking through the JDK source on GitHub: <code>java.time.format.Parsed.crossCheck()</code> line 698: <code>crossCheck(date.atTime(time));</code>. <code>atTme()</code> returns <code>null</code> (one may research why), which causes a <code>NullPointerException</code> in <code>crossCheck(TemporalAccessor)</code> line 707: <code>if (target.isSupported(field)) {</code>. The NPE is caught in <code>DateTimeFormatter.parse(CharSequence, TemporalQuery)</code> line 2011: <code>} catch (RuntimeException ex) {</code>, from where <code>createError()</code> is called. If you can reproduce it in a tiny example with no suspicious circumstances, I think you can report it into the JDK bug system."},{"owner":{"account_id":13685614,"reputation":23,"user_id":14851551,"display_name":"Lars Wigger"},"score":0,"creation_date":1669647731,"post_id":74572398,"comment_id":131683615,"body_markdown":"@MarkRotteveel the locale is &quot;de_DE&quot;.","body":"@MarkRotteveel the locale is &quot;de_DE&quot;."}],"answers":[{"tags":[],"owner":{"account_id":13685614,"reputation":23,"user_id":14851551,"display_name":"Lars Wigger"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1669649307,"creation_date":1669649307,"answer_id":74602886,"question_id":74572398,"body_markdown":"We found the problem:\r\n\r\nThe call was made inside an integration test where `LocalDateTime::now` was mocked. By default, `MockedStatic` does _not_ keep the other methods, so things like `LocalDateTime::of` just return `null` (very unintuitive design decision imo). Behind the scenes, the parser obviously calls a method by `LocalDateTime`, resulting in this weird error. Changing `Mockito.mockStatic(LocalDateTime.class)` to `Mockito.mockStatic(LocalDateTime.class, Mockito.CALLS_REAL_METHODS)` fixed the problem.","title":"Java OffsetDateTime cannot be parsed","body":"<p>We found the problem:</p>\n<p>The call was made inside an integration test where <code>LocalDateTime::now</code> was mocked. By default, <code>MockedStatic</code> does <em>not</em> keep the other methods, so things like <code>LocalDateTime::of</code> just return <code>null</code> (very unintuitive design decision imo). Behind the scenes, the parser obviously calls a method by <code>LocalDateTime</code>, resulting in this weird error. Changing <code>Mockito.mockStatic(LocalDateTime.class)</code> to <code>Mockito.mockStatic(LocalDateTime.class, Mockito.CALLS_REAL_METHODS)</code> fixed the problem.</p>\n"}],"owner":{"account_id":13685614,"reputation":23,"user_id":14851551,"display_name":"Lars Wigger"},"comment_count":9,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":516,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"closed_date":1670198307,"accepted_answer_id":74602886,"answer_count":1,"score":1,"last_activity_date":1669649307,"creation_date":1669377058,"question_id":74572398,"body_markdown":"I want to parse the following String into an `OffsetDateTime`:\r\n\r\n```java\r\nOffsetDateTime test = OffsetDateTime.parse(&quot;2021-12-31T23:00:00.000+00:00&quot;);\r\n```\r\n\r\nHowever, this results in an exception:\r\n```\r\njava.time.format.DateTimeParseException: Text &#39;2021-12-31T23:00:00.000+00:00&#39; could not be parsed: null\r\n\tat java.base/java.time.format.DateTimeFormatter.createError(DateTimeFormatter.java:2017) ~[na:na]\r\n\tat java.base/java.time.format.DateTimeFormatter.parse(DateTimeFormatter.java:1952) ~[na:na]\r\n\tat java.base/java.time.OffsetDateTime.parse(OffsetDateTime.java:402) ~[na:na]\r\n```\r\n\r\nI have seen answers online where this worked right away and I have tried creating custom formatters, but these return the same error message:\r\n\r\n```java\r\nDateTimeFormatter formatter = DateTimeFormatter.ofPattern(&quot;yyyy-MM-dd&#39;T&#39;HH:mm:ss.SSSZZZZZ&quot;);\r\nOffsetDateTime test = OffsetDateTime.parse(&quot;2021-12-31T23:00:00.000+00:00&quot;, formatter);\r\n```\r\n\r\nI am using Java 11.0.17 on Windows.\r\n\r\nUpdate: It works on colleagues machine, but not mine. It also does not work when I select a different Java version in IntelliJ.\r\n\r\nHere is the complete Stacktrace (I added it somewhere randomly in the existing project as the quickest way to test it). The stack trace is from Java 19 where a bit more information is given.\r\n\r\n```\r\njava.time.format.DateTimeParseException: Text &#39;2021-12-31T23:00:00.000+00:00&#39; could not be parsed: Cannot invoke &quot;java.time.temporal.TemporalAccessor.isSupported(java.time.temporal.TemporalField)&quot; because &quot;target&quot; is null\r\n\tat java.base/java.time.format.DateTimeFormatter.createError(DateTimeFormatter.java:2077) ~[na:na]\r\n\tat java.base/java.time.format.DateTimeFormatter.parse(DateTimeFormatter.java:2012) ~[na:na]\r\n\tat java.base/java.time.OffsetDateTime.parse(OffsetDateTime.java:404) ~[na:na]\r\n\tat java.base/java.time.OffsetDateTime.parse(OffsetDateTime.java:389) ~[na:na]\r\n\tat com.syngenio.fints.FintsServer.process(FintsServer.java:22) ~[main/:na]\r\n\tat com.syngenio.fis.controller.FintsController.fints(FintsController.java:24) ~[main/:na]\r\n\tat java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104) ~[na:na]\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:578) ~[na:na]\r\n\tat org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:205) ~[spring-web-5.3.23.jar:5.3.23]\r\n\tat org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:150) ~[spring-web-5.3.23.jar:5.3.23]\r\n\tat org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117) ~[spring-webmvc-5.3.23.jar:5.3.23]\r\n\tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895) ~[spring-webmvc-5.3.23.jar:5.3.23]\r\n\tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808) ~[spring-webmvc-5.3.23.jar:5.3.23]\r\n\tat org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-5.3.23.jar:5.3.23]\r\n\tat org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1071) ~[spring-webmvc-5.3.23.jar:5.3.23]\r\n\tat org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:964) ~[spring-webmvc-5.3.23.jar:5.3.23]\r\n\tat org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006) ~[spring-webmvc-5.3.23.jar:5.3.23]\r\n\tat org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:909) ~[spring-webmvc-5.3.23.jar:5.3.23]\r\n\tat javax.servlet.http.HttpServlet.service(HttpServlet.java:696) ~[tomcat-embed-core-9.0.68.jar:4.0.FR]\r\n\tat org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883) ~[spring-webmvc-5.3.23.jar:5.3.23]\r\n\tat org.springframework.test.web.servlet.TestDispatcherServlet.service(TestDispatcherServlet.java:72) ~[spring-test-5.3.23.jar:5.3.23]\r\n\tat javax.servlet.http.HttpServlet.service(HttpServlet.java:779) ~[tomcat-embed-core-9.0.68.jar:4.0.FR]\r\n\tat org.springframework.mock.web.MockFilterChain$ServletFilterProxy.doFilter(MockFilterChain.java:167) ~[spring-test-5.3.23.jar:5.3.23]\r\n\tat org.springframework.mock.web.MockFilterChain.doFilter(MockFilterChain.java:134) ~[spring-test-5.3.23.jar:5.3.23]\r\n\tat org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-5.3.23.jar:5.3.23]\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.23.jar:5.3.23]\r\n\tat org.springframework.mock.web.MockFilterChain.doFilter(MockFilterChain.java:134) ~[spring-test-5.3.23.jar:5.3.23]\r\n\tat org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-5.3.23.jar:5.3.23]\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.23.jar:5.3.23]\r\n\tat org.springframework.mock.web.MockFilterChain.doFilter(MockFilterChain.java:134) ~[spring-test-5.3.23.jar:5.3.23]\r\n\tat org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-5.3.23.jar:5.3.23]\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.23.jar:5.3.23]\r\n\tat org.springframework.mock.web.MockFilterChain.doFilter(MockFilterChain.java:134) ~[spring-test-5.3.23.jar:5.3.23]\r\n\tat org.springframework.test.web.servlet.MockMvc.perform(MockMvc.java:201) ~[spring-test-5.3.23.jar:5.3.23]\r\n\tat com.syngenio.fis.integration.tests.ExemptionDateTest.testExemptionDate(ExemptionDateTest.java:53) ~[test/:na]\r\n\tat java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104) ~[na:na]\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:578) ~[na:na]\r\n\tat org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59) ~[junit-4.13.2.jar:4.13.2]\r\n\tat org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12) ~[junit-4.13.2.jar:4.13.2]\r\n\tat org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56) ~[junit-4.13.2.jar:4.13.2]\r\n\tat org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17) ~[junit-4.13.2.jar:4.13.2]\r\n\tat org.springframework.test.context.junit4.statements.RunBeforeTestExecutionCallbacks.evaluate(RunBeforeTestExecutionCallbacks.java:74) ~[spring-test-5.3.23.jar:5.3.23]\r\n\tat org.springframework.test.context.junit4.statements.RunAfterTestExecutionCallbacks.evaluate(RunAfterTestExecutionCallbacks.java:84) ~[spring-test-5.3.23.jar:5.3.23]\r\n\tat org.springframework.test.context.junit4.statements.RunBeforeTestMethodCallbacks.evaluate(RunBeforeTestMethodCallbacks.java:75) ~[spring-test-5.3.23.jar:5.3.23]\r\n\tat org.springframework.test.context.junit4.statements.RunAfterTestMethodCallbacks.evaluate(RunAfterTestMethodCallbacks.java:86) ~[spring-test-5.3.23.jar:5.3.23]\r\n\tat org.springframework.test.context.junit4.statements.SpringRepeat.evaluate(SpringRepeat.java:84) ~[spring-test-5.3.23.jar:5.3.23]\r\n\tat org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:366) ~[junit-4.13.2.jar:4.13.2]\r\n\tat org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:251) ~[spring-test-5.3.23.jar:5.3.23]\r\n\tat org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:97) ~[spring-test-5.3.23.jar:5.3.23]\r\n\tat org.junit.runners.ParentRunner$4.run(ParentRunner.java:331) ~[junit-4.13.2.jar:4.13.2]\r\n\tat org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:79) ~[junit-4.13.2.jar:4.13.2]\r\n\tat org.junit.runners.ParentRunner.runChildren(ParentRunner.java:329) ~[junit-4.13.2.jar:4.13.2]\r\n\tat org.junit.runners.ParentRunner.access$100(ParentRunner.java:66) ~[junit-4.13.2.jar:4.13.2]\r\n\tat org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:293) ~[junit-4.13.2.jar:4.13.2]\r\n\tat org.springframework.test.context.junit4.statements.RunBeforeTestClassCallbacks.evaluate(RunBeforeTestClassCallbacks.java:61) ~[spring-test-5.3.23.jar:5.3.23]\r\n\tat org.springframework.test.context.junit4.statements.RunAfterTestClassCallbacks.evaluate(RunAfterTestClassCallbacks.java:70) ~[spring-test-5.3.23.jar:5.3.23]\r\n\tat org.junit.runners.ParentRunner$3.evaluate(ParentRunner.java:306) ~[junit-4.13.2.jar:4.13.2]\r\n\tat org.junit.runners.ParentRunner.run(ParentRunner.java:413) ~[junit-4.13.2.jar:4.13.2]\r\n\tat org.springframework.test.context.junit4.SpringJUnit4ClassRunner.run(SpringJUnit4ClassRunner.java:190) ~[spring-test-5.3.23.jar:5.3.23]\r\n\tat org.junit.runner.JUnitCore.run(JUnitCore.java:137) ~[junit-4.13.2.jar:4.13.2]\r\n\tat com.intellij.junit4.JUnit4IdeaTestRunner.startRunnerWithArgs(JUnit4IdeaTestRunner.java:69) ~[junit-rt.jar:na]\r\n\tat com.intellij.rt.junit.IdeaTestRunner$Repeater$1.execute(IdeaTestRunner.java:38) ~[junit-rt.jar:na]\r\n\tat com.intellij.rt.execution.junit.TestsRepeater.repeat(TestsRepeater.java:11) ~[idea_rt.jar:na]\r\n\tat com.intellij.rt.junit.IdeaTestRunner$Repeater.startRunnerWithArgs(IdeaTestRunner.java:35) ~[junit-rt.jar:na]\r\n\tat com.intellij.rt.junit.JUnitStarter.prepareStreamsAndStart(JUnitStarter.java:235) ~[junit-rt.jar:na]\r\n\tat com.intellij.rt.junit.JUnitStarter.main(JUnitStarter.java:54) ~[junit-rt.jar:na]\r\nCaused by: java.lang.NullPointerException: Cannot invoke &quot;java.time.temporal.TemporalAccessor.isSupported(java.time.temporal.TemporalField)&quot; because &quot;target&quot; is null\r\n\tat java.base/java.time.format.Parsed.crossCheck(Parsed.java:707) ~[na:na]\r\n\tat java.base/java.time.format.Parsed.crossCheck(Parsed.java:698) ~[na:na]\r\n\tat java.base/java.time.format.Parsed.resolve(Parsed.java:267) ~[na:na]\r\n\tat java.base/java.time.format.DateTimeParseContext.toResolved(DateTimeParseContext.java:331) ~[na:na]\r\n\tat java.base/java.time.format.DateTimeFormatter.parseResolved0(DateTimeFormatter.java:2112) ~[na:na]\r\n\tat java.base/java.time.format.DateTimeFormatter.parse(DateTimeFormatter.java:2008) ~[na:na]\r\n\t... 64 common frames omitted\r\n```","title":"Java OffsetDateTime cannot be parsed","body":"<p>I want to parse the following String into an <code>OffsetDateTime</code>:</p>\n<pre class=\"lang-java prettyprint-override\"><code>OffsetDateTime test = OffsetDateTime.parse(&quot;2021-12-31T23:00:00.000+00:00&quot;);\n</code></pre>\n<p>However, this results in an exception:</p>\n<pre><code>java.time.format.DateTimeParseException: Text '2021-12-31T23:00:00.000+00:00' could not be parsed: null\n    at java.base/java.time.format.DateTimeFormatter.createError(DateTimeFormatter.java:2017) ~[na:na]\n    at java.base/java.time.format.DateTimeFormatter.parse(DateTimeFormatter.java:1952) ~[na:na]\n    at java.base/java.time.OffsetDateTime.parse(OffsetDateTime.java:402) ~[na:na]\n</code></pre>\n<p>I have seen answers online where this worked right away and I have tried creating custom formatters, but these return the same error message:</p>\n<pre class=\"lang-java prettyprint-override\"><code>DateTimeFormatter formatter = DateTimeFormatter.ofPattern(&quot;yyyy-MM-dd'T'HH:mm:ss.SSSZZZZZ&quot;);\nOffsetDateTime test = OffsetDateTime.parse(&quot;2021-12-31T23:00:00.000+00:00&quot;, formatter);\n</code></pre>\n<p>I am using Java 11.0.17 on Windows.</p>\n<p>Update: It works on colleagues machine, but not mine. It also does not work when I select a different Java version in IntelliJ.</p>\n<p>Here is the complete Stacktrace (I added it somewhere randomly in the existing project as the quickest way to test it). The stack trace is from Java 19 where a bit more information is given.</p>\n<pre><code>java.time.format.DateTimeParseException: Text '2021-12-31T23:00:00.000+00:00' could not be parsed: Cannot invoke &quot;java.time.temporal.TemporalAccessor.isSupported(java.time.temporal.TemporalField)&quot; because &quot;target&quot; is null\n    at java.base/java.time.format.DateTimeFormatter.createError(DateTimeFormatter.java:2077) ~[na:na]\n    at java.base/java.time.format.DateTimeFormatter.parse(DateTimeFormatter.java:2012) ~[na:na]\n    at java.base/java.time.OffsetDateTime.parse(OffsetDateTime.java:404) ~[na:na]\n    at java.base/java.time.OffsetDateTime.parse(OffsetDateTime.java:389) ~[na:na]\n    at com.syngenio.fints.FintsServer.process(FintsServer.java:22) ~[main/:na]\n    at com.syngenio.fis.controller.FintsController.fints(FintsController.java:24) ~[main/:na]\n    at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104) ~[na:na]\n    at java.base/java.lang.reflect.Method.invoke(Method.java:578) ~[na:na]\n    at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:205) ~[spring-web-5.3.23.jar:5.3.23]\n    at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:150) ~[spring-web-5.3.23.jar:5.3.23]\n    at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117) ~[spring-webmvc-5.3.23.jar:5.3.23]\n    at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895) ~[spring-webmvc-5.3.23.jar:5.3.23]\n    at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808) ~[spring-webmvc-5.3.23.jar:5.3.23]\n    at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-5.3.23.jar:5.3.23]\n    at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1071) ~[spring-webmvc-5.3.23.jar:5.3.23]\n    at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:964) ~[spring-webmvc-5.3.23.jar:5.3.23]\n    at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006) ~[spring-webmvc-5.3.23.jar:5.3.23]\n    at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:909) ~[spring-webmvc-5.3.23.jar:5.3.23]\n    at javax.servlet.http.HttpServlet.service(HttpServlet.java:696) ~[tomcat-embed-core-9.0.68.jar:4.0.FR]\n    at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883) ~[spring-webmvc-5.3.23.jar:5.3.23]\n    at org.springframework.test.web.servlet.TestDispatcherServlet.service(TestDispatcherServlet.java:72) ~[spring-test-5.3.23.jar:5.3.23]\n    at javax.servlet.http.HttpServlet.service(HttpServlet.java:779) ~[tomcat-embed-core-9.0.68.jar:4.0.FR]\n    at org.springframework.mock.web.MockFilterChain$ServletFilterProxy.doFilter(MockFilterChain.java:167) ~[spring-test-5.3.23.jar:5.3.23]\n    at org.springframework.mock.web.MockFilterChain.doFilter(MockFilterChain.java:134) ~[spring-test-5.3.23.jar:5.3.23]\n    at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-5.3.23.jar:5.3.23]\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.23.jar:5.3.23]\n    at org.springframework.mock.web.MockFilterChain.doFilter(MockFilterChain.java:134) ~[spring-test-5.3.23.jar:5.3.23]\n    at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-5.3.23.jar:5.3.23]\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.23.jar:5.3.23]\n    at org.springframework.mock.web.MockFilterChain.doFilter(MockFilterChain.java:134) ~[spring-test-5.3.23.jar:5.3.23]\n    at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-5.3.23.jar:5.3.23]\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.23.jar:5.3.23]\n    at org.springframework.mock.web.MockFilterChain.doFilter(MockFilterChain.java:134) ~[spring-test-5.3.23.jar:5.3.23]\n    at org.springframework.test.web.servlet.MockMvc.perform(MockMvc.java:201) ~[spring-test-5.3.23.jar:5.3.23]\n    at com.syngenio.fis.integration.tests.ExemptionDateTest.testExemptionDate(ExemptionDateTest.java:53) ~[test/:na]\n    at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104) ~[na:na]\n    at java.base/java.lang.reflect.Method.invoke(Method.java:578) ~[na:na]\n    at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59) ~[junit-4.13.2.jar:4.13.2]\n    at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12) ~[junit-4.13.2.jar:4.13.2]\n    at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56) ~[junit-4.13.2.jar:4.13.2]\n    at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17) ~[junit-4.13.2.jar:4.13.2]\n    at org.springframework.test.context.junit4.statements.RunBeforeTestExecutionCallbacks.evaluate(RunBeforeTestExecutionCallbacks.java:74) ~[spring-test-5.3.23.jar:5.3.23]\n    at org.springframework.test.context.junit4.statements.RunAfterTestExecutionCallbacks.evaluate(RunAfterTestExecutionCallbacks.java:84) ~[spring-test-5.3.23.jar:5.3.23]\n    at org.springframework.test.context.junit4.statements.RunBeforeTestMethodCallbacks.evaluate(RunBeforeTestMethodCallbacks.java:75) ~[spring-test-5.3.23.jar:5.3.23]\n    at org.springframework.test.context.junit4.statements.RunAfterTestMethodCallbacks.evaluate(RunAfterTestMethodCallbacks.java:86) ~[spring-test-5.3.23.jar:5.3.23]\n    at org.springframework.test.context.junit4.statements.SpringRepeat.evaluate(SpringRepeat.java:84) ~[spring-test-5.3.23.jar:5.3.23]\n    at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:366) ~[junit-4.13.2.jar:4.13.2]\n    at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:251) ~[spring-test-5.3.23.jar:5.3.23]\n    at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:97) ~[spring-test-5.3.23.jar:5.3.23]\n    at org.junit.runners.ParentRunner$4.run(ParentRunner.java:331) ~[junit-4.13.2.jar:4.13.2]\n    at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:79) ~[junit-4.13.2.jar:4.13.2]\n    at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:329) ~[junit-4.13.2.jar:4.13.2]\n    at org.junit.runners.ParentRunner.access$100(ParentRunner.java:66) ~[junit-4.13.2.jar:4.13.2]\n    at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:293) ~[junit-4.13.2.jar:4.13.2]\n    at org.springframework.test.context.junit4.statements.RunBeforeTestClassCallbacks.evaluate(RunBeforeTestClassCallbacks.java:61) ~[spring-test-5.3.23.jar:5.3.23]\n    at org.springframework.test.context.junit4.statements.RunAfterTestClassCallbacks.evaluate(RunAfterTestClassCallbacks.java:70) ~[spring-test-5.3.23.jar:5.3.23]\n    at org.junit.runners.ParentRunner$3.evaluate(ParentRunner.java:306) ~[junit-4.13.2.jar:4.13.2]\n    at org.junit.runners.ParentRunner.run(ParentRunner.java:413) ~[junit-4.13.2.jar:4.13.2]\n    at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.run(SpringJUnit4ClassRunner.java:190) ~[spring-test-5.3.23.jar:5.3.23]\n    at org.junit.runner.JUnitCore.run(JUnitCore.java:137) ~[junit-4.13.2.jar:4.13.2]\n    at com.intellij.junit4.JUnit4IdeaTestRunner.startRunnerWithArgs(JUnit4IdeaTestRunner.java:69) ~[junit-rt.jar:na]\n    at com.intellij.rt.junit.IdeaTestRunner$Repeater$1.execute(IdeaTestRunner.java:38) ~[junit-rt.jar:na]\n    at com.intellij.rt.execution.junit.TestsRepeater.repeat(TestsRepeater.java:11) ~[idea_rt.jar:na]\n    at com.intellij.rt.junit.IdeaTestRunner$Repeater.startRunnerWithArgs(IdeaTestRunner.java:35) ~[junit-rt.jar:na]\n    at com.intellij.rt.junit.JUnitStarter.prepareStreamsAndStart(JUnitStarter.java:235) ~[junit-rt.jar:na]\n    at com.intellij.rt.junit.JUnitStarter.main(JUnitStarter.java:54) ~[junit-rt.jar:na]\nCaused by: java.lang.NullPointerException: Cannot invoke &quot;java.time.temporal.TemporalAccessor.isSupported(java.time.temporal.TemporalField)&quot; because &quot;target&quot; is null\n    at java.base/java.time.format.Parsed.crossCheck(Parsed.java:707) ~[na:na]\n    at java.base/java.time.format.Parsed.crossCheck(Parsed.java:698) ~[na:na]\n    at java.base/java.time.format.Parsed.resolve(Parsed.java:267) ~[na:na]\n    at java.base/java.time.format.DateTimeParseContext.toResolved(DateTimeParseContext.java:331) ~[na:na]\n    at java.base/java.time.format.DateTimeFormatter.parseResolved0(DateTimeFormatter.java:2112) ~[na:na]\n    at java.base/java.time.format.DateTimeFormatter.parse(DateTimeFormatter.java:2008) ~[na:na]\n    ... 64 common frames omitted\n</code></pre>\n"},{"tags":["java","kubernetes","heap-memory","heap-size"],"comments":[{"owner":{"account_id":8318014,"reputation":2224,"user_id":6250649,"display_name":"JohannesB"},"score":0,"creation_date":1669663097,"post_id":74602383,"comment_id":131688985,"body_markdown":"Did you read the answer at: https://stackoverflow.com/a/54297753/6250649 ?\nAny reason why you do not want to set -Xmx explicitly? Possibly through JAVA_TOOL_OPTIONS","body":"Did you read the answer at: <a href=\"https://stackoverflow.com/a/54297753/6250649\">stackoverflow.com/a/54297753/6250649</a> ? Any reason why you do not want to set -Xmx explicitly? Possibly through JAVA_TOOL_OPTIONS"},{"owner":{"account_id":23019951,"reputation":11,"user_id":17141136,"display_name":"Thomas Enblom"},"score":0,"creation_date":1669814775,"post_id":74602383,"comment_id":131728185,"body_markdown":"Thanks for answering.Yes, I want to use the percentages instead to align that the heap size will follow the container limit.","body":"Thanks for answering.Yes, I want to use the percentages instead to align that the heap size will follow the container limit."},{"owner":{"account_id":23019951,"reputation":11,"user_id":17141136,"display_name":"Thomas Enblom"},"score":0,"creation_date":1669814849,"post_id":74602383,"comment_id":131728219,"body_markdown":"Thanks for answering. My project wants to use percentages instead in order to follow the changes of the value of the Container Limit.","body":"Thanks for answering. My project wants to use percentages instead in order to follow the changes of the value of the Container Limit."}],"owner":{"account_id":23019951,"reputation":11,"user_id":17141136,"display_name":"Thomas Enblom"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":326,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1669649162,"creation_date":1669647018,"question_id":74602383,"body_markdown":"I have a 1 GB container with Memory Limit = 1 GiB in K8S.\r\n\r\nI am using Java SUSE.\r\n\r\nI am setting the MinRAMPercentage and MaxRAMPercentage values as follows:\r\n\r\n    bash-4.4# java -server -XX:MinRAMPercentage=64 -XX:MaxRAMPercentage=100 -XX:+PrintFlagsFinal -XshowSettings -version 2&gt;&amp;1 | grep &#39; MaxHeapSize&#39;\r\n       size_t MaxHeapSize                              = 687865856                                 {product} {ergonomic}\r\n    bash-4.4# java -server -XX:MinRAMPercentage=65 -XX:MaxRAMPercentage=100 -XX:+PrintFlagsFinal -XshowSettings -version 2&gt;&amp;1 | grep &#39; MaxHeapSize&#39;\r\n       size_t MaxHeapSize                              = 1073741824                                {product} {ergonomic}\r\n\r\n\r\nSince the Container &lt; 1.3 GiB MinRAMPercentage should be used as configuring paramater, MaxRAMPercentage shall be ignored.\r\n\r\nBut when looking at Min = 64, Max = 100 actually the MinRAMPercentage value is used which is correct.\r\n\r\nWhen having Min 64 and Max 100 then the MaxRAMPercentage value is used which is not correct.\r\n\r\nThis behavior happens for different combinations of Min/Max and also is dependent on container Limit, i.e. for a different container Limit these values behaves differently.\r\n\r\nI&#39;ve done a lot of measurement to find out the behavior of the JVM.\r\n\r\nHas anyone experienced this problem?\r\n","title":"Wrong Heap size is obtained when using different values for MinRAMPercentage and MaxRAM Percentage","body":"<p>I have a 1 GB container with Memory Limit = 1 GiB in K8S.</p>\n<p>I am using Java SUSE.</p>\n<p>I am setting the MinRAMPercentage and MaxRAMPercentage values as follows:</p>\n<pre><code>bash-4.4# java -server -XX:MinRAMPercentage=64 -XX:MaxRAMPercentage=100 -XX:+PrintFlagsFinal -XshowSettings -version 2&gt;&amp;1 | grep ' MaxHeapSize'\n   size_t MaxHeapSize                              = 687865856                                 {product} {ergonomic}\nbash-4.4# java -server -XX:MinRAMPercentage=65 -XX:MaxRAMPercentage=100 -XX:+PrintFlagsFinal -XshowSettings -version 2&gt;&amp;1 | grep ' MaxHeapSize'\n   size_t MaxHeapSize                              = 1073741824                                {product} {ergonomic}\n</code></pre>\n<p>Since the Container &lt; 1.3 GiB MinRAMPercentage should be used as configuring paramater, MaxRAMPercentage shall be ignored.</p>\n<p>But when looking at Min = 64, Max = 100 actually the MinRAMPercentage value is used which is correct.</p>\n<p>When having Min 64 and Max 100 then the MaxRAMPercentage value is used which is not correct.</p>\n<p>This behavior happens for different combinations of Min/Max and also is dependent on container Limit, i.e. for a different container Limit these values behaves differently.</p>\n<p>I've done a lot of measurement to find out the behavior of the JVM.</p>\n<p>Has anyone experienced this problem?</p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":260782,"reputation":175,"user_id":544561,"accept_rate":29,"display_name":"Sabyrzhan"},"score":0,"creation_date":1669201886,"post_id":74545782,"comment_id":131589481,"body_markdown":"it sounds like there is communication issue between your api and backend. Did you check the logs is there an issue?","body":"it sounds like there is communication issue between your api and backend. Did you check the logs is there an issue?"},{"owner":{"account_id":17330298,"reputation":127,"user_id":12553583,"display_name":"Jack Boch"},"score":0,"creation_date":1669207705,"post_id":74545782,"comment_id":131591493,"body_markdown":"no errors in the logs","body":"no errors in the logs"},{"owner":{"account_id":20222092,"reputation":109,"user_id":14831240,"display_name":"kiki keke"},"score":0,"creation_date":1669648608,"post_id":74545782,"comment_id":131683987,"body_markdown":"if the error is 0 it is a front error probably CORS policy, change the header return to the other api","body":"if the error is 0 it is a front error probably CORS policy, change the header return to the other api"}],"answers":[{"tags":[],"owner":{"account_id":20222092,"reputation":109,"user_id":14831240,"display_name":"kiki keke"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1669649000,"creation_date":1669649000,"answer_id":74602821,"question_id":74545782,"body_markdown":"with this spring code must add a head that should match your expectations\r\n\r\n```java\r\n@PutMapping(&quot;/{username}/targets/{forward}&quot;)\r\n    public ResponseEntity&lt;Void&gt; addForward(\r\n            @PathVariable(&quot;username&quot;) String username, @PathVariable(&quot;forward&quot;) String forward) {\r\n        return new ResponseEntity&lt;&gt;(api.addForward(username, forward).getStatusCode());\r\n    }\r\n```","title":"How to return an HttpServletResponse from another application?","body":"<p>with this spring code must add a head that should match your expectations</p>\n<pre class=\"lang-java prettyprint-override\"><code>@PutMapping(&quot;/{username}/targets/{forward}&quot;)\n    public ResponseEntity&lt;Void&gt; addForward(\n            @PathVariable(&quot;username&quot;) String username, @PathVariable(&quot;forward&quot;) String forward) {\n        return new ResponseEntity&lt;&gt;(api.addForward(username, forward).getStatusCode());\n    }\n</code></pre>\n"}],"owner":{"account_id":17330298,"reputation":127,"user_id":12553583,"display_name":"Jack Boch"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":37,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1669649000,"creation_date":1669201512,"question_id":74545782,"body_markdown":"I have an Angular front and a java back, plus APIs to consume.\r\n\r\nSo the application works well if I call the api directly on the front but for security reasons I have to go through the back java and the problem is that the responses are not exact complete in the event of an error on the front.\r\n\r\nExample I receive an error &quot;0 Unknown&quot; while in the network I receive &quot;409...&quot;\r\nAnd in direct call I have &quot;409...&quot; in both cases.\r\n\r\n\r\n```java\r\n    public ResponseEntity&lt;Void&gt; addForward(String username, String forward) {\r\n        return localApiClient.put()\r\n                .uri(baseUrl + username + &quot;/targets/&quot; + forward)\r\n                .contentType(MediaType.APPLICATION_JSON)\r\n                .exchangeToMono(ClientResponse::toBodilessEntity)\r\n                .block(REQUEST_TIMEOUT);\r\n    }\r\n\r\n    @PutMapping(&quot;/{username}/targets/{forward}&quot;)\r\n    public ResponseEntity&lt;Void&gt; addForward(\r\n            @PathVariable(&quot;username&quot;) String username, @PathVariable(&quot;forward&quot;) String forward) {\r\n        return api.addForward(username, forward);\r\n    }\r\n\r\n```","title":"How to return an HttpServletResponse from another application?","body":"<p>I have an Angular front and a java back, plus APIs to consume.</p>\n<p>So the application works well if I call the api directly on the front but for security reasons I have to go through the back java and the problem is that the responses are not exact complete in the event of an error on the front.</p>\n<p>Example I receive an error &quot;0 Unknown&quot; while in the network I receive &quot;409...&quot;\nAnd in direct call I have &quot;409...&quot; in both cases.</p>\n<pre class=\"lang-java prettyprint-override\"><code>    public ResponseEntity&lt;Void&gt; addForward(String username, String forward) {\n        return localApiClient.put()\n                .uri(baseUrl + username + &quot;/targets/&quot; + forward)\n                .contentType(MediaType.APPLICATION_JSON)\n                .exchangeToMono(ClientResponse::toBodilessEntity)\n                .block(REQUEST_TIMEOUT);\n    }\n\n    @PutMapping(&quot;/{username}/targets/{forward}&quot;)\n    public ResponseEntity&lt;Void&gt; addForward(\n            @PathVariable(&quot;username&quot;) String username, @PathVariable(&quot;forward&quot;) String forward) {\n        return api.addForward(username, forward);\n    }\n\n</code></pre>\n"},{"tags":["java","multidimensional-array","stringbuilder"],"comments":[{"owner":{"account_id":1352170,"reputation":34246,"user_id":1291492,"accept_rate":100,"display_name":"ControlAltDel"},"score":0,"creation_date":1669649365,"post_id":74602735,"comment_id":131684266,"body_markdown":"The time complexity is already O(n).","body":"The time complexity is already O(n)."},{"owner":{"account_id":1352170,"reputation":34246,"user_id":1291492,"accept_rate":100,"display_name":"ControlAltDel"},"score":0,"creation_date":1669649584,"post_id":74602735,"comment_id":131684355,"body_markdown":"You might be able to achieve a slight performance advantage using multiple StringBuilders and multiple threads to process all rows at the same time; this might make this marginally faster - but much more complicated due to Thread coordination.","body":"You might be able to achieve a slight performance advantage using multiple StringBuilders and multiple threads to process all rows at the same time; this might make this marginally faster - but much more complicated due to Thread coordination."},{"owner":{"display_name":"user18984687"},"score":0,"creation_date":1669649635,"post_id":74602735,"comment_id":131684379,"body_markdown":"@ControlAltDel I have never used that before, could you please show me how to do so?","body":"@ControlAltDel I have never used that before, could you please show me how to do so?"}],"owner":{"display_name":"user18984687"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":35,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1669648682,"creation_date":1669648682,"question_id":74602735,"body_markdown":"I have been given a `String[][]` and I&#39;m trying to add all the elements that are present horizontally from bottom left to top right of my grid into a stringbuilder.\r\n\r\nHere is my code:\r\n\r\n    public class prac5 {\r\n        public static String slanting(String[][] a){\r\n            StringBuilder s = new StringBuilder();\r\n            for (int x = 0; x &lt; a.length; x++){\r\n                for (int y = 0; y &lt; a[0].length; y++){\r\n                    s.append(a[x + 1][y + 1]);\r\n                }\r\n            }\r\n            return String.valueOf(s);\r\n        }\r\n    }\r\n\r\nI was wondering that is there any way to reduce the time complexity in doing this task, while also providing the right output as stated above?\r\n","title":"Is there a faster way to iterate through a grid horizontally (bottom left to top right)?","body":"<p>I have been given a <code>String[][]</code> and I'm trying to add all the elements that are present horizontally from bottom left to top right of my grid into a stringbuilder.</p>\n<p>Here is my code:</p>\n<pre><code>public class prac5 {\n    public static String slanting(String[][] a){\n        StringBuilder s = new StringBuilder();\n        for (int x = 0; x &lt; a.length; x++){\n            for (int y = 0; y &lt; a[0].length; y++){\n                s.append(a[x + 1][y + 1]);\n            }\n        }\n        return String.valueOf(s);\n    }\n}\n</code></pre>\n<p>I was wondering that is there any way to reduce the time complexity in doing this task, while also providing the right output as stated above?</p>\n"},{"tags":["java","spring","backend"],"answers":[{"tags":[],"owner":{"account_id":23828419,"reputation":85,"user_id":20534244,"display_name":"Artem Dubenko"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1669648480,"creation_date":1669648480,"answer_id":74602689,"question_id":74602594,"body_markdown":"Sorry, it was enough just to delete the channel from user and update user.\r\n\r\n    User user = userService.findByEmail(userEmail);\r\n    user.setChannel(null);\r\n    userService.update(user);","title":"Removing the One to One entity","body":"<p>Sorry, it was enough just to delete the channel from user and update user.</p>\n<pre><code>User user = userService.findByEmail(userEmail);\nuser.setChannel(null);\nuserService.update(user);\n</code></pre>\n"}],"owner":{"account_id":23828419,"reputation":85,"user_id":20534244,"display_name":"Artem Dubenko"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":24,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1669648480,"creation_date":1669648038,"question_id":74602594,"body_markdown":"What&#39;s the right way to delete a Channel?\r\nI have a One to One (User to Channel) relationship\r\n\r\n    Channel: \r\n    @OneToOne(mappedBy = &quot;channel&quot;)\r\n        Private User user;\r\n\r\n    User:\r\n    @OneToOne(cascade = CascadeType.ALL, orphanRemoval = true)\r\n        private Channel channel;\r\n\r\nWhen I delete User, channel is safely deleted, but when I delete channel I get the error\r\n\r\n    (deleted object would be re-saved by cascade (remove deleted object from associations): [ua.com.alevel.persistence.entity.channel.Channel#1])\r\n\r\nI understand that I need to remove channel from user and update user first and then remove channel, but it takes me several operations\r\n\r\n    User user = userService.findByEmail(userEmail);\r\n            Channel channel = user.getChannel();\r\n            user.setChannel(null);\r\n            userService.update(user);\r\n            channelService.delete(channel);\r\n\r\nCan this be made to look like?\r\n\r\n    channelService.delete(userService.findByEmail(userEmail).getChannel());\r\n\r\nI&#39;m sorry if I didn&#39;t phrase the question correctly, I&#39;m just not very experienced at it and I tried to describe the problems in as much detail as possible.","title":"Removing the One to One entity","body":"<p>What's the right way to delete a Channel?\nI have a One to One (User to Channel) relationship</p>\n<pre><code>Channel: \n@OneToOne(mappedBy = &quot;channel&quot;)\n    Private User user;\n\nUser:\n@OneToOne(cascade = CascadeType.ALL, orphanRemoval = true)\n    private Channel channel;\n</code></pre>\n<p>When I delete User, channel is safely deleted, but when I delete channel I get the error</p>\n<pre><code>(deleted object would be re-saved by cascade (remove deleted object from associations): [ua.com.alevel.persistence.entity.channel.Channel#1])\n</code></pre>\n<p>I understand that I need to remove channel from user and update user first and then remove channel, but it takes me several operations</p>\n<pre><code>User user = userService.findByEmail(userEmail);\n        Channel channel = user.getChannel();\n        user.setChannel(null);\n        userService.update(user);\n        channelService.delete(channel);\n</code></pre>\n<p>Can this be made to look like?</p>\n<pre><code>channelService.delete(userService.findByEmail(userEmail).getChannel());\n</code></pre>\n<p>I'm sorry if I didn't phrase the question correctly, I'm just not very experienced at it and I tried to describe the problems in as much detail as possible.</p>\n"},{"tags":["java","playwright","playwright-java"],"comments":[{"owner":{"account_id":8945947,"reputation":94,"user_id":6673431,"accept_rate":64,"display_name":"Hamza Amami"},"score":0,"creation_date":1669648361,"post_id":70836891,"comment_id":131683885,"body_markdown":"Have you been able to solve this please ?","body":"Have you been able to solve this please ?"}],"answers":[{"tags":[],"owner":{"account_id":2754837,"reputation":19523,"user_id":2373249,"accept_rate":25,"display_name":"hardkoded"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1643050994,"creation_date":1643050994,"answer_id":70839131,"question_id":70836891,"body_markdown":"You have to pass a string to the `waitForFunction`\r\n\r\n```\r\npage.waitForFunction(&quot;() =&gt; page.evaluate(&#39;document.readyState&#39;).equals(&#39;complete&#39;)&quot;);\r\n```","title":"Java playwright usage of page.waitForFunction()","body":"<p>You have to pass a string to the <code>waitForFunction</code></p>\n<pre><code>page.waitForFunction(&quot;() =&gt; page.evaluate('document.readyState').equals('complete')&quot;);\n</code></pre>\n"}],"owner":{"account_id":2772246,"reputation":1263,"user_id":2386620,"accept_rate":66,"display_name":"adbarads"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":512,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1669648153,"creation_date":1643040617,"question_id":70836891,"body_markdown":"I am trying to figure out how to use the `page.waitForFunction()` in Playwright in Java.\r\n\r\nI would like for a `page.evaluate()` to run first, and for the `page.waitForFunction()` to wait on it, before continuing.\r\n\r\nI have the following:\r\n`page.waitForFunction(() =&gt; page.evaluate(&quot;document.readyState&quot;).equals(&quot;complete&quot;));`\r\n\r\nBut syntactically that is incorrect or maybe I&#39;m doing something wrong.","title":"Java playwright usage of page.waitForFunction()","body":"<p>I am trying to figure out how to use the <code>page.waitForFunction()</code> in Playwright in Java.</p>\n<p>I would like for a <code>page.evaluate()</code> to run first, and for the <code>page.waitForFunction()</code> to wait on it, before continuing.</p>\n<p>I have the following:\n<code>page.waitForFunction(() =&gt; page.evaluate(&quot;document.readyState&quot;).equals(&quot;complete&quot;));</code></p>\n<p>But syntactically that is incorrect or maybe I'm doing something wrong.</p>\n"},{"tags":["java","docker","bluetooth","dbus"],"comments":[{"owner":{"account_id":13863020,"reputation":137023,"user_id":10008173,"display_name":"David Maze"},"score":0,"creation_date":1600947507,"post_id":64043565,"comment_id":113253482,"body_markdown":"Why does this need to run in a container?","body":"Why does this need to run in a container?"},{"owner":{"account_id":4219511,"reputation":338,"user_id":3454621,"accept_rate":81,"display_name":"Yvus"},"score":0,"creation_date":1600948523,"post_id":64043565,"comment_id":113253997,"body_markdown":"We have a software suite that is deployed via containers. Having only one software which does not belong to a container would imply some hacks to have a versioning system, storage management, etc ...","body":"We have a software suite that is deployed via containers. Having only one software which does not belong to a container would imply some hacks to have a versioning system, storage management, etc ..."}],"answers":[{"tags":[],"owner":{"account_id":1117217,"reputation":427,"user_id":1106294,"display_name":"Muzammil"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1669648091,"creation_date":1669648091,"answer_id":74602605,"question_id":64043565,"body_markdown":"Have you tried `-v /run:/run`?\r\n\r\n&gt; -v /run:/run: The -v /run:/run option mounts the /run directory from the host on the /run directory inside the container. This allows processes within the container to talk to the host’s dbus service and talk directly to the systemd service. Processes within the container can even communicate with the docker daemon.\r\n\r\nhttps://access.redhat.com/documentation/en-us/red_hat_enterprise_linux_atomic_host/7/html/managing_containers/running_super_privileged_containers\r\n\r\nYou need to run container in the rootful mode due to mounting of rootfs.\r\n","title":"DBus communication from docker to host and reverse","body":"<p>Have you tried <code>-v /run:/run</code>?</p>\n<blockquote>\n<p>-v /run:/run: The -v /run:/run option mounts the /run directory from the host on the /run directory inside the container. This allows processes within the container to talk to the host’s dbus service and talk directly to the systemd service. Processes within the container can even communicate with the docker daemon.</p>\n</blockquote>\n<p><a href=\"https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux_atomic_host/7/html/managing_containers/running_super_privileged_containers\" rel=\"nofollow noreferrer\">https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux_atomic_host/7/html/managing_containers/running_super_privileged_containers</a></p>\n<p>You need to run container in the rootful mode due to mounting of rootfs.</p>\n"}],"owner":{"account_id":4219511,"reputation":338,"user_id":3454621,"accept_rate":81,"display_name":"Yvus"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":1096,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":1,"score":2,"last_activity_date":1669648091,"creation_date":1600939860,"question_id":64043565,"body_markdown":"I am trying to control the bluetooth interaction from a docker java app. I have used the library `com.github.hypfvieh.bluetooth` which works like a charm. But once I run this app inside a docker I cannot interact with the system DBus. The best state I have reached is to run the container using this command line\r\n```\r\npodman run --rm -it --privileged -v /var/run/dbus/system_bus_socket:/var/run/dbus/system_bus_socket --name NAME  IMAGE\r\n```\r\nIt seems that I am able to contact the DBus, but `authentication` is refused.\r\n```\r\norg.freedesktop.dbus.exceptions.DBusException: Failed to connect to bus: Failed to auth\r\n        at org.freedesktop.dbus.connections.AbstractConnection.&lt;init&gt;(AbstractConnection.java:166) ~[dbus-java-3.2.1.jar:3.2.1]\r\n        at org.freedesktop.dbus.connections.impl.DBusConnection.&lt;init&gt;(DBusConnection.java:334) ~[dbus-java-3.2.1.jar:3.2.1]\r\n        at org.freedesktop.dbus.connections.impl.DBusConnection.getConnection(DBusConnection.java:149) ~[dbus-java-3.2.1.jar:3.2.1]\r\n        at org.freedesktop.dbus.connections.impl.DBusConnection.getConnection(DBusConnection.java:169) ~[dbus-java-3.2.1.jar:3.2.1]\r\n        at org.freedesktop.dbus.connections.impl.DBusConnection.getConnection(DBusConnection.java:219) ~[dbus-java-3.2.1.jar:3.2.1]\r\n        at org.freedesktop.dbus.connections.impl.DBusConnection.getConnection(DBusConnection.java:184) ~[dbus-java-3.2.1.jar:3.2.1]\r\n        at com.github.hypfvieh.bluetooth.DeviceManager.createInstance(DeviceManager.java:74) ~[bluez-dbus-0.1.2.jar:0.1.2]\r\n        at package.dbus.BluetoothDBus.&lt;init&gt;(BluetoothDBus.java:24) ~[run.jar:1.0-SNAPSHOT]\r\n        at package.dbus.BluetoothDBus.createInstance(BluetoothDBus.java:28) ~[run.jar:1.0-SNAPSHOT]\r\n        at package.dbus.DBusInteractionWebSocket.onMessage(DBusInteractionWebSocket.java:46) [run.jar:1.0-SNAPSHOT]\r\n        at jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[?:?]\r\n        at jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:64) ~[?:?]\r\n        at jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[?:?]\r\n        at java.lang.reflect.Method.invoke(Method.java:564) ~[?:?]\r\n        at org.apache.tomcat.websocket.pojo.PojoMessageHandlerWholeBase.onMessage(PojoMessageHandlerWholeBase.java:80) [tomcat-embed-websocket-9.0.38.jar:9.0.38]\r\n        at org.apache.tomcat.websocket.WsFrameBase.sendMessageText(WsFrameBase.java:402) [tomcat-embed-websocket-9.0.38.jar:9.0.38]\r\n        at org.apache.tomcat.websocket.server.WsFrameServer.sendMessageText(WsFrameServer.java:119) [tomcat-embed-websocket-9.0.38.jar:9.0.38]\r\n        at org.apache.tomcat.websocket.WsFrameBase.processDataText(WsFrameBase.java:502) [tomcat-embed-websocket-9.0.38.jar:9.0.38]\r\n        at org.apache.tomcat.websocket.WsFrameBase.processData(WsFrameBase.java:301) [tomcat-embed-websocket-9.0.38.jar:9.0.38]\r\n        at org.apache.tomcat.websocket.WsFrameBase.processInputBuffer(WsFrameBase.java:133) [tomcat-embed-websocket-9.0.38.jar:9.0.38]\r\n        at org.apache.tomcat.websocket.server.WsFrameServer.onDataAvailable(WsFrameServer.java:82) [tomcat-embed-websocket-9.0.38.jar:9.0.38]\r\n        at org.apache.tomcat.websocket.server.WsFrameServer.doOnDataAvailable(WsFrameServer.java:171) [tomcat-embed-websocket-9.0.38.jar:9.0.38]\r\n        at org.apache.tomcat.websocket.server.WsFrameServer.notifyDataAvailable(WsFrameServer.java:151) [tomcat-embed-websocket-9.0.38.jar:9.0.38]\r\n        at org.apache.tomcat.websocket.server.WsHttpUpgradeHandler.upgradeDispatch(WsHttpUpgradeHandler.java:148) [tomcat-embed-websocket-9.0.38.jar:9.0.38]\r\n        at org.apache.coyote.http11.upgrade.UpgradeProcessorInternal.dispatch(UpgradeProcessorInternal.java:54) [tomcat-embed-core-9.0.38.jar:9.0.38]\r\n        at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:59) [tomcat-embed-core-9.0.38.jar:9.0.38]\r\n        at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:868) [tomcat-embed-core-9.0.38.jar:9.0.38]\r\n        at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1590) [tomcat-embed-core-9.0.38.jar:9.0.38]\r\n        at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49) [tomcat-embed-core-9.0.38.jar:9.0.38]\r\n        at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1130) [?:?]\r\n        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:630) [?:?]\r\n        at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61) [tomcat-embed-core-9.0.38.jar:9.0.38]\r\n        at java.lang.Thread.run(Thread.java:832) [?:?]\r\nCaused by: java.io.IOException: Failed to auth\r\n        at org.freedesktop.dbus.connections.transports.AbstractTransport.authenticate(AbstractTransport.java:114) ~[dbus-java-3.2.1.jar:3.2.1]\r\n        at org.freedesktop.dbus.connections.transports.UnixSocketTransport.connect(UnixSocketTransport.java:68) ~[dbus-java-3.2.1.jar:3.2.1]\r\n        at org.freedesktop.dbus.connections.transports.TransportFactory.createTransport(TransportFactory.java:44) ~[dbus-java-3.2.1.jar:3.2.1]\r\n        at org.freedesktop.dbus.connections.AbstractConnection.&lt;init&gt;(AbstractConnection.java:161) ~[dbus-java-3.2.1.jar:3.2.1]\r\n        ... 32 more\r\n```\r\nThe `Dockerfile` looks like this:\r\n```\r\nFROM IMAGE:latest\r\n\r\nCOPY target/dependency-jars/ /app/dependency-jars/\r\nCOPY target/run.jar /app\r\n\r\nWORKDIR /app\r\n\r\nCMD [ &quot;/bin/sh&quot;, &quot;run.sh&quot; ]\r\n```\r\n\r\nI have tried to add a user in the docker file like so\r\n```\r\nRUN groupadd -g 1000 yves\r\nRUN useradd -u 1000 -g 1000 yves -s /sbin/nologin -d /\r\nUSER yves\r\n```\r\nwhich does not help. I also have tried to add the docker command `-u 1000:1000` with the uid and gid of the localhost user. Nothing worked.\r\n\r\nSo I don&#39;t understand why authentication fails, and what are the rules behind it in order to setup the container as needed?","title":"DBus communication from docker to host and reverse","body":"<p>I am trying to control the bluetooth interaction from a docker java app. I have used the library <code>com.github.hypfvieh.bluetooth</code> which works like a charm. But once I run this app inside a docker I cannot interact with the system DBus. The best state I have reached is to run the container using this command line</p>\n<pre><code>podman run --rm -it --privileged -v /var/run/dbus/system_bus_socket:/var/run/dbus/system_bus_socket --name NAME  IMAGE\n</code></pre>\n<p>It seems that I am able to contact the DBus, but <code>authentication</code> is refused.</p>\n<pre><code>org.freedesktop.dbus.exceptions.DBusException: Failed to connect to bus: Failed to auth\n        at org.freedesktop.dbus.connections.AbstractConnection.&lt;init&gt;(AbstractConnection.java:166) ~[dbus-java-3.2.1.jar:3.2.1]\n        at org.freedesktop.dbus.connections.impl.DBusConnection.&lt;init&gt;(DBusConnection.java:334) ~[dbus-java-3.2.1.jar:3.2.1]\n        at org.freedesktop.dbus.connections.impl.DBusConnection.getConnection(DBusConnection.java:149) ~[dbus-java-3.2.1.jar:3.2.1]\n        at org.freedesktop.dbus.connections.impl.DBusConnection.getConnection(DBusConnection.java:169) ~[dbus-java-3.2.1.jar:3.2.1]\n        at org.freedesktop.dbus.connections.impl.DBusConnection.getConnection(DBusConnection.java:219) ~[dbus-java-3.2.1.jar:3.2.1]\n        at org.freedesktop.dbus.connections.impl.DBusConnection.getConnection(DBusConnection.java:184) ~[dbus-java-3.2.1.jar:3.2.1]\n        at com.github.hypfvieh.bluetooth.DeviceManager.createInstance(DeviceManager.java:74) ~[bluez-dbus-0.1.2.jar:0.1.2]\n        at package.dbus.BluetoothDBus.&lt;init&gt;(BluetoothDBus.java:24) ~[run.jar:1.0-SNAPSHOT]\n        at package.dbus.BluetoothDBus.createInstance(BluetoothDBus.java:28) ~[run.jar:1.0-SNAPSHOT]\n        at package.dbus.DBusInteractionWebSocket.onMessage(DBusInteractionWebSocket.java:46) [run.jar:1.0-SNAPSHOT]\n        at jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[?:?]\n        at jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:64) ~[?:?]\n        at jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[?:?]\n        at java.lang.reflect.Method.invoke(Method.java:564) ~[?:?]\n        at org.apache.tomcat.websocket.pojo.PojoMessageHandlerWholeBase.onMessage(PojoMessageHandlerWholeBase.java:80) [tomcat-embed-websocket-9.0.38.jar:9.0.38]\n        at org.apache.tomcat.websocket.WsFrameBase.sendMessageText(WsFrameBase.java:402) [tomcat-embed-websocket-9.0.38.jar:9.0.38]\n        at org.apache.tomcat.websocket.server.WsFrameServer.sendMessageText(WsFrameServer.java:119) [tomcat-embed-websocket-9.0.38.jar:9.0.38]\n        at org.apache.tomcat.websocket.WsFrameBase.processDataText(WsFrameBase.java:502) [tomcat-embed-websocket-9.0.38.jar:9.0.38]\n        at org.apache.tomcat.websocket.WsFrameBase.processData(WsFrameBase.java:301) [tomcat-embed-websocket-9.0.38.jar:9.0.38]\n        at org.apache.tomcat.websocket.WsFrameBase.processInputBuffer(WsFrameBase.java:133) [tomcat-embed-websocket-9.0.38.jar:9.0.38]\n        at org.apache.tomcat.websocket.server.WsFrameServer.onDataAvailable(WsFrameServer.java:82) [tomcat-embed-websocket-9.0.38.jar:9.0.38]\n        at org.apache.tomcat.websocket.server.WsFrameServer.doOnDataAvailable(WsFrameServer.java:171) [tomcat-embed-websocket-9.0.38.jar:9.0.38]\n        at org.apache.tomcat.websocket.server.WsFrameServer.notifyDataAvailable(WsFrameServer.java:151) [tomcat-embed-websocket-9.0.38.jar:9.0.38]\n        at org.apache.tomcat.websocket.server.WsHttpUpgradeHandler.upgradeDispatch(WsHttpUpgradeHandler.java:148) [tomcat-embed-websocket-9.0.38.jar:9.0.38]\n        at org.apache.coyote.http11.upgrade.UpgradeProcessorInternal.dispatch(UpgradeProcessorInternal.java:54) [tomcat-embed-core-9.0.38.jar:9.0.38]\n        at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:59) [tomcat-embed-core-9.0.38.jar:9.0.38]\n        at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:868) [tomcat-embed-core-9.0.38.jar:9.0.38]\n        at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1590) [tomcat-embed-core-9.0.38.jar:9.0.38]\n        at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49) [tomcat-embed-core-9.0.38.jar:9.0.38]\n        at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1130) [?:?]\n        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:630) [?:?]\n        at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61) [tomcat-embed-core-9.0.38.jar:9.0.38]\n        at java.lang.Thread.run(Thread.java:832) [?:?]\nCaused by: java.io.IOException: Failed to auth\n        at org.freedesktop.dbus.connections.transports.AbstractTransport.authenticate(AbstractTransport.java:114) ~[dbus-java-3.2.1.jar:3.2.1]\n        at org.freedesktop.dbus.connections.transports.UnixSocketTransport.connect(UnixSocketTransport.java:68) ~[dbus-java-3.2.1.jar:3.2.1]\n        at org.freedesktop.dbus.connections.transports.TransportFactory.createTransport(TransportFactory.java:44) ~[dbus-java-3.2.1.jar:3.2.1]\n        at org.freedesktop.dbus.connections.AbstractConnection.&lt;init&gt;(AbstractConnection.java:161) ~[dbus-java-3.2.1.jar:3.2.1]\n        ... 32 more\n</code></pre>\n<p>The <code>Dockerfile</code> looks like this:</p>\n<pre><code>FROM IMAGE:latest\n\nCOPY target/dependency-jars/ /app/dependency-jars/\nCOPY target/run.jar /app\n\nWORKDIR /app\n\nCMD [ &quot;/bin/sh&quot;, &quot;run.sh&quot; ]\n</code></pre>\n<p>I have tried to add a user in the docker file like so</p>\n<pre><code>RUN groupadd -g 1000 yves\nRUN useradd -u 1000 -g 1000 yves -s /sbin/nologin -d /\nUSER yves\n</code></pre>\n<p>which does not help. I also have tried to add the docker command <code>-u 1000:1000</code> with the uid and gid of the localhost user. Nothing worked.</p>\n<p>So I don't understand why authentication fails, and what are the rules behind it in order to setup the container as needed?</p>\n"},{"tags":["java","quartz-scheduler","jboss-eap-6"],"comments":[{"owner":{"account_id":44047,"reputation":47366,"user_id":129032,"accept_rate":98,"display_name":"ssube"},"score":4,"creation_date":1411567420,"post_id":26018409,"comment_id":40752029,"body_markdown":"Dumbest implementation: fire the job daily, check if the day is valid at the start of the job. I don&#39;t know how practical that would be in your case (setup costs and the like), but it would allow you to use the date APIs, move the correct-day logic to a method, document and test it, etc.","body":"Dumbest implementation: fire the job daily, check if the day is valid at the start of the job. I don&#39;t know how practical that would be in your case (setup costs and the like), but it would allow you to use the date APIs, move the correct-day logic to a method, document and test it, etc."}],"answers":[{"tags":[],"owner":{"account_id":2545685,"reputation":949,"user_id":2210548,"accept_rate":80,"display_name":"Kraiss"},"down_vote_count":0,"up_vote_count":9,"is_accepted":true,"score":9,"last_activity_date":1411629794,"creation_date":1411567679,"answer_id":26019030,"question_id":26018409,"body_markdown":"You can achieve this in Quartz but you got to twist the normal behaviour by using a `CalendarIntervalTrigger` to trigger a Job that calculate when your &#39;real&#39; Job should be scheduled. \r\n\r\nYou schedule a trigger that fire every 1st of your scheduling months :\r\n\r\n    [...]\r\n    JobDetail jobDetail = newJob(SchedulingCalculationJob.class)\r\n            .withIdentity(&quot;SchedulingCalculation_CalendarIntervaled&quot;, &quot;calendarIntervaled&quot;)\r\n            .build();\r\n\r\n    CalendarIntervalTrigger calendarIntervalTrigger = newTrigger()\r\n            .withIdentity(&quot;calendarIntervalCalculationTrigger&quot;, &quot;calendarIntervaled&quot;)\r\n            .withSchedule(calendarIntervalSchedule()\r\n                    .withIntervalInMonths(2))\r\n            .startAt(decemberFirst.getTime())\r\n            .forJob(jobDetail)\r\n            .build();\r\n\r\n    scheduler.scheduleJob(jobDetail, calendarIntervalTrigger);\r\n\r\nAnd in the `SchedulingCalculationJob` Job, you calculate your &#39;real&#39; Job scheduling day :\r\n\r\n    public class SchedulingCalculationJob implements Job {\r\n\r\n\t\tpublic void execute(JobExecutionContext context)\r\n\t\t\t\tthrows JobExecutionException {\r\n\r\n\t\t\tCalendar calendar = calculateJobFiringDate();\r\n\r\n\t\t\t// Create and schedule a dedicated trigger\r\n\t\t\tTrigger calculateFiring = calculateFiring = newTrigger()\r\n\t\t\t\t   .withSchedule(SimpleSchedulerBuilder.simpleScheduler())\r\n\t\t\t\t   .startAt(calendar.getTime())\r\n\t\t\t\t   .forJob(yourRealJobDetail)\r\n\t\t\t\t   .build();\r\n\r\n\t\t\tscheduler.scheduleJob(yourRealJobDetail, calculateFiring);\r\n\t\t}\r\n\t\t\r\n\t\tpublic static Calendar calculateJobFiringDate() {\r\n\t\t\tCalendar result = Calendar.getInstance();\r\n\r\n            // Set up the scheduling day\r\n\t\t\tif (isThereThirtyDaysInCurrentMonth()) {\r\n\t\t\t\t// the 30th of the current month\r\n\t\t\t\tcalendar.set(Calendar.DAY_OF_MONTH, 30);\r\n\t\t\t} else {\r\n\t\t\t\t// the last day of the current month\r\n\t\t\t\tcalendar.add(Calendar.MONTH, 1);\r\n\t\t\t\tcalendar.add(Calendar.DATE, -1);\r\n\t\t\t}\r\n\r\n            // Set up time of day\r\n\t\t\tcalendar.set(Calendar.HOUR, ...);\r\n\t\t\tcalendar.set(Calendar.MINUTE, ...);\r\n\t\t\tcalendar.set(Calendar.SECOND, ...);\r\n\t\t\t\r\n\t\t\treturn result;\r\n\t\t}\r\n\r\n        public static boolean isThereThirtyDaysInCurrentMonth() {\r\n\t\t    Calendar thirtydaysInCurrentMonthCalendar = Calendar.getInstance();\r\n\r\n\t\t\tInteger currentMonth = thirtydaysInCurrentMonthCalendar.get(Calendar.MONTH);\r\n\t\t\tthirtydaysInCurrentMonthCalendar.add(Calendar.DATE, 29);\r\n\r\n\t\t\treturn (currentMonth == thirtydaysInCurrentMonthCalendar.get(Calendar.MONTH);\r\n        }\r\n\t}\r\n\r\nIt&#39;s a bit sioux but I already use it and i works fine.\r\n","title":"Can I use Quartz Scheduler to fire every other month on the 30th day but if month has no 30th day, fire on the last day?","body":"<p>You can achieve this in Quartz but you got to twist the normal behaviour by using a <code>CalendarIntervalTrigger</code> to trigger a Job that calculate when your 'real' Job should be scheduled. </p>\n\n<p>You schedule a trigger that fire every 1st of your scheduling months :</p>\n\n<pre><code>[...]\nJobDetail jobDetail = newJob(SchedulingCalculationJob.class)\n        .withIdentity(\"SchedulingCalculation_CalendarIntervaled\", \"calendarIntervaled\")\n        .build();\n\nCalendarIntervalTrigger calendarIntervalTrigger = newTrigger()\n        .withIdentity(\"calendarIntervalCalculationTrigger\", \"calendarIntervaled\")\n        .withSchedule(calendarIntervalSchedule()\n                .withIntervalInMonths(2))\n        .startAt(decemberFirst.getTime())\n        .forJob(jobDetail)\n        .build();\n\nscheduler.scheduleJob(jobDetail, calendarIntervalTrigger);\n</code></pre>\n\n<p>And in the <code>SchedulingCalculationJob</code> Job, you calculate your 'real' Job scheduling day :</p>\n\n<pre><code>public class SchedulingCalculationJob implements Job {\n\n    public void execute(JobExecutionContext context)\n            throws JobExecutionException {\n\n        Calendar calendar = calculateJobFiringDate();\n\n        // Create and schedule a dedicated trigger\n        Trigger calculateFiring = calculateFiring = newTrigger()\n               .withSchedule(SimpleSchedulerBuilder.simpleScheduler())\n               .startAt(calendar.getTime())\n               .forJob(yourRealJobDetail)\n               .build();\n\n        scheduler.scheduleJob(yourRealJobDetail, calculateFiring);\n    }\n\n    public static Calendar calculateJobFiringDate() {\n        Calendar result = Calendar.getInstance();\n\n        // Set up the scheduling day\n        if (isThereThirtyDaysInCurrentMonth()) {\n            // the 30th of the current month\n            calendar.set(Calendar.DAY_OF_MONTH, 30);\n        } else {\n            // the last day of the current month\n            calendar.add(Calendar.MONTH, 1);\n            calendar.add(Calendar.DATE, -1);\n        }\n\n        // Set up time of day\n        calendar.set(Calendar.HOUR, ...);\n        calendar.set(Calendar.MINUTE, ...);\n        calendar.set(Calendar.SECOND, ...);\n\n        return result;\n    }\n\n    public static boolean isThereThirtyDaysInCurrentMonth() {\n        Calendar thirtydaysInCurrentMonthCalendar = Calendar.getInstance();\n\n        Integer currentMonth = thirtydaysInCurrentMonthCalendar.get(Calendar.MONTH);\n        thirtydaysInCurrentMonthCalendar.add(Calendar.DATE, 29);\n\n        return (currentMonth == thirtydaysInCurrentMonthCalendar.get(Calendar.MONTH);\n    }\n}\n</code></pre>\n\n<p>It's a bit sioux but I already use it and i works fine.</p>\n"}],"owner":{"account_id":969049,"reputation":2634,"user_id":991954,"display_name":"n1k1ch"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":3439,"favorite_count":0,"down_vote_count":0,"up_vote_count":11,"accepted_answer_id":26019030,"answer_count":1,"score":11,"last_activity_date":1669647998,"creation_date":1411566004,"question_id":26018409,"body_markdown":"Can I use [Quartz Scheduler](http://quartz-scheduler.org/) library to create schedule with following settings?:\r\n\r\n - Starting from **Dec, 30, 2014**\r\n - Execute **each 30th day**\r\n - **Every 2nd month** consequently\r\n - If month doesn&#39;t have 30th day, action should occur on the **last day of month**.\r\n\r\nSo, the resulting schedule will be:\r\n\r\n- Dec 30, 2014\r\n- Feb **28**, 2015\r\n- Apr 30, 2015\r\n- ... and so on\r\n\r\n\r\nFrom what I&#39;ve learned:\r\n\r\n 1. [CronTrigger](http://quartz-scheduler.org/documentation/quartz-2.2.x/tutorials/tutorial-lesson-06) doesn&#39;t allow to do so (it could be set up only to be triggered on specific months and not on *intervals*),\r\n 2. [CalendarIntervalTrigger](http://quartz-scheduler.org/api/2.2.0/org/quartz/CalendarIntervalTrigger.html) will skip months that don&#39;t have 30th day (trigger created by following code)\r\n \r\n        try {\r\n            SchedulerFactory schedulerFactory = new StdSchedulerFactory();\r\n            Scheduler scheduler = schedulerFactory.getScheduler();\r\n            scheduler.start();\r\n\r\n            JobDetail jobDetail = JobBuilder.newJob(HelloJob.class)\r\n                    .withIdentity(&quot;HelloJob_CalendarIntervaled&quot;, &quot;calendarIntervaled&quot;)\r\n                    .build();\r\n\r\n            Calendar decemberThirty = Calendar.getInstance();\r\n            decemberThirty.set(Calendar.YEAR, 2014);\r\n            decemberThirty.set(Calendar.MONTH, Calendar.DECEMBER);\r\n            decemberThirty.set(Calendar.DAY_OF_MONTH, 30);\r\n\r\n            CalendarIntervalTrigger calendarIntervalTrigger = newTrigger()\r\n                    .withIdentity(&quot;calendarIntervalTrigger&quot;, &quot;calendarIntervaled&quot;)\r\n                    .withSchedule(CalendarIntervalScheduleBuilder.calendarIntervalSchedule()\r\n                            .withIntervalInMonths(2))\r\n                    .startAt(decemberThirty.getTime())\r\n                    .forJob(jobDetail)\r\n                    .build();\r\n\r\n            scheduler.scheduleJob(jobDetail, calendarIntervalTrigger);\r\n\r\n            System.out.println(calendarIntervalTrigger.getNextFireTime());\r\n        } catch (SchedulerException e) {\r\n            e.printStackTrace();\r\n        }\r\n\r\nIf no, are there any alternatives (it should work on JBoss eap 6.2.0)?","title":"Can I use Quartz Scheduler to fire every other month on the 30th day but if month has no 30th day, fire on the last day?","body":"<p>Can I use <a href=\"http://quartz-scheduler.org/\" rel=\"noreferrer\">Quartz Scheduler</a> library to create schedule with following settings?:</p>\n\n<ul>\n<li>Starting from <strong>Dec, 30, 2014</strong></li>\n<li>Execute <strong>each 30th day</strong></li>\n<li><strong>Every 2nd month</strong> consequently</li>\n<li>If month doesn't have 30th day, action should occur on the <strong>last day of month</strong>.</li>\n</ul>\n\n<p>So, the resulting schedule will be:</p>\n\n<ul>\n<li>Dec 30, 2014</li>\n<li>Feb <strong>28</strong>, 2015</li>\n<li>Apr 30, 2015</li>\n<li>... and so on</li>\n</ul>\n\n<p>From what I've learned:</p>\n\n<ol>\n<li><a href=\"http://quartz-scheduler.org/documentation/quartz-2.2.x/tutorials/tutorial-lesson-06\" rel=\"noreferrer\">CronTrigger</a> doesn't allow to do so (it could be set up only to be triggered on specific months and not on <em>intervals</em>),</li>\n<li><p><a href=\"http://quartz-scheduler.org/api/2.2.0/org/quartz/CalendarIntervalTrigger.html\" rel=\"noreferrer\">CalendarIntervalTrigger</a> will skip months that don't have 30th day (trigger created by following code)</p>\n\n<pre><code>try {\n    SchedulerFactory schedulerFactory = new StdSchedulerFactory();\n    Scheduler scheduler = schedulerFactory.getScheduler();\n    scheduler.start();\n\n    JobDetail jobDetail = JobBuilder.newJob(HelloJob.class)\n            .withIdentity(\"HelloJob_CalendarIntervaled\", \"calendarIntervaled\")\n            .build();\n\n    Calendar decemberThirty = Calendar.getInstance();\n    decemberThirty.set(Calendar.YEAR, 2014);\n    decemberThirty.set(Calendar.MONTH, Calendar.DECEMBER);\n    decemberThirty.set(Calendar.DAY_OF_MONTH, 30);\n\n    CalendarIntervalTrigger calendarIntervalTrigger = newTrigger()\n            .withIdentity(\"calendarIntervalTrigger\", \"calendarIntervaled\")\n            .withSchedule(CalendarIntervalScheduleBuilder.calendarIntervalSchedule()\n                    .withIntervalInMonths(2))\n            .startAt(decemberThirty.getTime())\n            .forJob(jobDetail)\n            .build();\n\n    scheduler.scheduleJob(jobDetail, calendarIntervalTrigger);\n\n    System.out.println(calendarIntervalTrigger.getNextFireTime());\n} catch (SchedulerException e) {\n    e.printStackTrace();\n}\n</code></pre></li>\n</ol>\n\n<p>If no, are there any alternatives (it should work on JBoss eap 6.2.0)?</p>\n"},{"tags":["java","spring","spring-boot","spring-integration","jakarta-mail"],"answers":[{"tags":[],"owner":{"account_id":3273937,"reputation":114855,"user_id":2756547,"accept_rate":75,"display_name":"Artem Bilan"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1669647957,"creation_date":1669647957,"answer_id":74602569,"question_id":74572959,"body_markdown":"That&#39;s correct. Since Spring Boot is a framework for microservices, it is really expected that sensible default number of tasks in a service is one. Therefore task scheduler in Spring is configured just with one thread in pool. It is indeed better to have that number equal to the number of those concurrent IMAP IDLE tasks you are going to start.\r\n\r\nTo optimize your configuration better see if you can extract that `.handle(messageHandler::process)` to another independent flow and use its input channel as an output from these IMAP flows.\r\n\r\n    @Bean\r\n    public IntegrationFlow processFlow() {\r\n      return f -&gt; f.handle(messageHandler::process);\r\n    }\r\n    \r\n    @Bean\r\n    public IntegrationFlow googleListener() {\r\n      return IntegrationFlows.from(Mail.imapIdleAdapter(configuration.getGoogleUrl()))\r\n          .channel(&quot;processFlow.input&quot;)\r\n          .get();\r\n    }\r\n    \r\n    @Bean\r\n    public IntegrationFlow outlookListener() {\r\n      return IntegrationFlows.from(Mail.imapIdleAdapter(configuration.getOutlookUrl()))\r\n          .channel(&quot;processFlow.input&quot;)\r\n          .get();\r\n    }\r\n    \r\n    @Bean\r\n    public IntegrationFlow yandexListener() {\r\n      return IntegrationFlows.from(Mail.imapIdleAdapter(configuration.getYandexUrl()))\r\n          .channel(&quot;processFlow.input&quot;)\r\n          .get();\r\n    }\r\n\r\nThis way you will have only one handling endpoint. All the IMAP flows are going to send their messages to the same channel. No worries about concurrency: the channel is direct by default with a meaning that `handleMessage()` happens exactly on a thread sending a message.","title":"How to listen to multiple mail aliases of the same mail server using Sping-integration-mail and imapIdleAdapter","body":"<p>That's correct. Since Spring Boot is a framework for microservices, it is really expected that sensible default number of tasks in a service is one. Therefore task scheduler in Spring is configured just with one thread in pool. It is indeed better to have that number equal to the number of those concurrent IMAP IDLE tasks you are going to start.</p>\n<p>To optimize your configuration better see if you can extract that <code>.handle(messageHandler::process)</code> to another independent flow and use its input channel as an output from these IMAP flows.</p>\n<pre><code>@Bean\npublic IntegrationFlow processFlow() {\n  return f -&gt; f.handle(messageHandler::process);\n}\n\n@Bean\npublic IntegrationFlow googleListener() {\n  return IntegrationFlows.from(Mail.imapIdleAdapter(configuration.getGoogleUrl()))\n      .channel(&quot;processFlow.input&quot;)\n      .get();\n}\n\n@Bean\npublic IntegrationFlow outlookListener() {\n  return IntegrationFlows.from(Mail.imapIdleAdapter(configuration.getOutlookUrl()))\n      .channel(&quot;processFlow.input&quot;)\n      .get();\n}\n\n@Bean\npublic IntegrationFlow yandexListener() {\n  return IntegrationFlows.from(Mail.imapIdleAdapter(configuration.getYandexUrl()))\n      .channel(&quot;processFlow.input&quot;)\n      .get();\n}\n</code></pre>\n<p>This way you will have only one handling endpoint. All the IMAP flows are going to send their messages to the same channel. No worries about concurrency: the channel is direct by default with a meaning that <code>handleMessage()</code> happens exactly on a thread sending a message.</p>\n"}],"owner":{"account_id":22770243,"reputation":13,"user_id":16927788,"display_name":"Andrey Kostromin"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":47,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":74602569,"answer_count":1,"score":1,"last_activity_date":1669647957,"creation_date":1669380000,"question_id":74572959,"body_markdown":"I need to receive incoming messages from several mail aliases.\r\n\r\nAt the moment I implemented it in such a way that I created multiple independent IntegrationFlows, where each has the same message handler. Is there any other optimization that can be done?\r\n\r\n```\r\n@Bean\r\npublic IntegrationFlow googleListener() {\r\n  return IntegrationFlows.from(Mail.imapIdleAdapter(configuration.getGoogleUrl()))\r\n      .handle(messageHandler::process)\r\n      .get();\r\n}\r\n\r\n@Bean\r\npublic IntegrationFlow outlookListener() {\r\n  return IntegrationFlows.from(Mail.imapIdleAdapter(configuration.getOutlookUrl()))\r\n      .handle(messageHandler::process)\r\n      .get();\r\n}\r\n\r\n@Bean\r\npublic IntegrationFlow yandexListener() {\r\n  return IntegrationFlows.from(Mail.imapIdleAdapter(configuration.getYandexUrl()))\r\n      .handle(messageHandler::process)\r\n      .get();\r\n}\r\n```\r\n\r\nAlso, when using imapIdleAdapter, it happened that some new emails did not trigger the event and processing. Solved this problem by setting the spring.task.scheduling.pool.size setting to the amount of IntegrationFlow. But I do not quite understand what it is connected with. It turns out that by default in Spring Boot there is only one thread pool, and therefore it was not possible to execute several parallel tasks in one thread?\r\n","title":"How to listen to multiple mail aliases of the same mail server using Sping-integration-mail and imapIdleAdapter","body":"<p>I need to receive incoming messages from several mail aliases.</p>\n<p>At the moment I implemented it in such a way that I created multiple independent IntegrationFlows, where each has the same message handler. Is there any other optimization that can be done?</p>\n<pre><code>@Bean\npublic IntegrationFlow googleListener() {\n  return IntegrationFlows.from(Mail.imapIdleAdapter(configuration.getGoogleUrl()))\n      .handle(messageHandler::process)\n      .get();\n}\n\n@Bean\npublic IntegrationFlow outlookListener() {\n  return IntegrationFlows.from(Mail.imapIdleAdapter(configuration.getOutlookUrl()))\n      .handle(messageHandler::process)\n      .get();\n}\n\n@Bean\npublic IntegrationFlow yandexListener() {\n  return IntegrationFlows.from(Mail.imapIdleAdapter(configuration.getYandexUrl()))\n      .handle(messageHandler::process)\n      .get();\n}\n</code></pre>\n<p>Also, when using imapIdleAdapter, it happened that some new emails did not trigger the event and processing. Solved this problem by setting the spring.task.scheduling.pool.size setting to the amount of IntegrationFlow. But I do not quite understand what it is connected with. It turns out that by default in Spring Boot there is only one thread pool, and therefore it was not possible to execute several parallel tasks in one thread?</p>\n"},{"tags":["java","spring","datastore"],"comments":[{"owner":{"account_id":14706862,"reputation":917,"user_id":10621296,"display_name":"Jetto Mart&#237;nez"},"score":0,"creation_date":1669649642,"post_id":74602568,"comment_id":131684382,"body_markdown":"How are you storing the data? In a separate bean? What&#39;s the scope of the bean where your Atomics or Maps are?","body":"How are you storing the data? In a separate bean? What&#39;s the scope of the bean where your Atomics or Maps are?"},{"owner":{"account_id":4054391,"reputation":929,"user_id":3332879,"accept_rate":38,"display_name":"Cugomastik"},"score":0,"creation_date":1669649983,"post_id":74602568,"comment_id":131684539,"body_markdown":"I am currently storing them as global fields in the serviceImpl class. Should I create a Bean and a configuration for it?","body":"I am currently storing them as global fields in the serviceImpl class. Should I create a Bean and a configuration for it?"},{"owner":{"account_id":14706862,"reputation":917,"user_id":10621296,"display_name":"Jetto Mart&#237;nez"},"score":2,"creation_date":1669650176,"post_id":74602568,"comment_id":131684645,"body_markdown":"I&#39;d suggest only a `@Component @Scope(&quot;singleton&quot;)` bean and autowire it wherever you need it. Formally speaking, you do seem to need a database, an in-memory one like H2 or Redis if you need top speed, but if that&#39;s too complicated for whatever you are using, a singleton should be enough. Give it a go.","body":"I&#39;d suggest only a <code>@Component @Scope(&quot;singleton&quot;)</code> bean and autowire it wherever you need it. Formally speaking, you do seem to need a database, an in-memory one like H2 or Redis if you need top speed, but if that&#39;s too complicated for whatever you are using, a singleton should be enough. Give it a go."},{"owner":{"account_id":4054391,"reputation":929,"user_id":3332879,"accept_rate":38,"display_name":"Cugomastik"},"score":0,"creation_date":1669650363,"post_id":74602568,"comment_id":131684715,"body_markdown":"Thanks a lot, I will try creating a bean first and see what happens.","body":"Thanks a lot, I will try creating a bean first and see what happens."},{"owner":{"account_id":10286378,"reputation":332,"user_id":7589535,"display_name":"oussema"},"score":1,"creation_date":1669675663,"post_id":74602568,"comment_id":131692357,"body_markdown":"It should be possible to declare a HashMap in your controller class (a bean) to achieve the same result. But then depending on your use case, mainly if different requests are expected to manipulate the same data, in that case this solution is not thread safe and you should look into properly scoping this data storing bean `@Scope(&quot;session&quot;)`.","body":"It should be possible to declare a HashMap in your controller class (a bean) to achieve the same result. But then depending on your use case, mainly if different requests are expected to manipulate the same data, in that case this solution is not thread safe and you should look into properly scoping this data storing bean <code>@Scope(&quot;session&quot;)</code>."},{"owner":{"account_id":10286378,"reputation":332,"user_id":7589535,"display_name":"oussema"},"score":1,"creation_date":1669675974,"post_id":74602568,"comment_id":131692406,"body_markdown":"Does this answer your question? [Store temporary data in a Spring Controller](https://stackoverflow.com/questions/51137152/store-temporary-data-in-a-spring-controller)","body":"Does this answer your question? <a href=\"https://stackoverflow.com/questions/51137152/store-temporary-data-in-a-spring-controller\">Store temporary data in a Spring Controller</a>"},{"owner":{"account_id":4054391,"reputation":929,"user_id":3332879,"accept_rate":38,"display_name":"Cugomastik"},"score":0,"creation_date":1669723561,"post_id":74602568,"comment_id":131702943,"body_markdown":"Unfortunately, using a bean with a singleton did not work for me. In my case, &quot;session&quot; would not work as well. I will probably end up using an in-memory.  Thank you all for your support.","body":"Unfortunately, using a bean with a singleton did not work for me. In my case, &quot;session&quot; would not work as well. I will probably end up using an in-memory.  Thank you all for your support."}],"owner":{"account_id":4054391,"reputation":929,"user_id":3332879,"accept_rate":38,"display_name":"Cugomastik"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":69,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1669647951,"creation_date":1669647951,"question_id":74602568,"body_markdown":"I have a spring boot API and I have a case where I need to store some data to be used later in the process. When I use Atomic values or Concurrent Hash maps, the data is eventually overridden by each thread created by each new request. Unfortunately, I can not use the local/session storage in the browser. Is there any other way to store this data? Would it be wise to store that data in the DB for the duration of the session and delete it? ","title":"Store Data in Spring API","body":"<p>I have a spring boot API and I have a case where I need to store some data to be used later in the process. When I use Atomic values or Concurrent Hash maps, the data is eventually overridden by each thread created by each new request. Unfortunately, I can not use the local/session storage in the browser. Is there any other way to store this data? Would it be wise to store that data in the DB for the duration of the session and delete it?</p>\n"},{"tags":["java","testing","junit","parallel-processing","spock"],"answers":[{"tags":[],"owner":{"account_id":4753102,"reputation":3151,"user_id":4886722,"display_name":"Dmitry Khamitov"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1669644454,"creation_date":1669644127,"answer_id":74601737,"question_id":74599354,"body_markdown":"You should use [`@spock.lang.Execution`][1] and `org.spockframework.runtime.model.parallel.ExecutionMode` annotations/classes instead of JUnit 5 ones. As an example, your imports might look like this:\r\n```\r\nimport org.spockframework.runtime.model.parallel.ExecutionMode\r\nimport spock.lang.Execution\r\nimport spock.lang.Specification\r\nimport spock.lang.Unroll\r\n```\r\n\r\nYou should also enable the [&quot;Parallel Execution&quot;][2] feature in Spock, e.g. by adding [SpockConfig.groovy][3] with necessary configs (different options are available, just refer to that page). As an example, your config might look like this:\r\n```\r\nrunner {\r\n  parallel {\r\n    enabled true\r\n  }\r\n}\r\n```\r\nI&#39;ve put this file into the test resources directory (root package). Also, read a note on that page which states:\r\n&gt; JUnit Jupiter also supports parallel execution, both rely on the JUnit Platform implementation, but function independently of each other. If you enable parallel execution in Spock it won’t affect Jupiter and vice versa.\r\n\r\nAn in general, that [&quot;Parallel Execution&quot;][2] article is a good read.\r\n\r\nOnce I&#39;ve done the above I&#39;m able to run the test methods in parallel. Here is my output:\r\n```\r\nFirstParallelUnitTest first() start =&gt; ForkJoinPool-1-worker-1  id: 17\r\nFirstParallelUnitTest first() start =&gt; ForkJoinPool-1-worker-6  id: 22\r\nFirstParallelUnitTest first() start =&gt; ForkJoinPool-1-worker-5  id: 20\r\nFirstParallelUnitTest first() end =&gt; ForkJoinPool-1-worker-6  id: 22\r\nFirstParallelUnitTest first() end =&gt; ForkJoinPool-1-worker-1  id: 17\r\nFirstParallelUnitTest first() end =&gt; ForkJoinPool-1-worker-5  id: 20\r\nFirstParallelUnitTest first() start =&gt; ForkJoinPool-1-worker-4  id: 21\r\nFirstParallelUnitTest first() start =&gt; ForkJoinPool-1-worker-2  id: 18\r\nFirstParallelUnitTest first() end =&gt; ForkJoinPool-1-worker-2  id: 18\r\nFirstParallelUnitTest first() end =&gt; ForkJoinPool-1-worker-4  id: 21\r\nFirstParallelUnitTest first() start =&gt; ForkJoinPool-1-worker-1  id: 17\r\nFirstParallelUnitTest first() start =&gt; ForkJoinPool-1-worker-6  id: 22\r\nFirstParallelUnitTest first() start =&gt; ForkJoinPool-1-worker-2  id: 18\r\nFirstParallelUnitTest first() start =&gt; ForkJoinPool-1-worker-5  id: 20\r\nFirstParallelUnitTest first() start =&gt; ForkJoinPool-1-worker-3  id: 19\r\nFirstParallelUnitTest first() end =&gt; ForkJoinPool-1-worker-6  id: 22\r\nFirstParallelUnitTest first() end =&gt; ForkJoinPool-1-worker-3  id: 19\r\nFirstParallelUnitTest first() end =&gt; ForkJoinPool-1-worker-2  id: 18\r\nFirstParallelUnitTest first() end =&gt; ForkJoinPool-1-worker-5  id: 20\r\nFirstParallelUnitTest first() end =&gt; ForkJoinPool-1-worker-1  id: 17\r\nFirstParallelUnitTest first() start =&gt; ForkJoinPool-1-worker-4  id: 21\r\nFirstParallelUnitTest first() end =&gt; ForkJoinPool-1-worker-4  id: 21\r\nFirstParallelUnitTest first() start =&gt; ForkJoinPool-1-worker-2  id: 18\r\nFirstParallelUnitTest first() end =&gt; ForkJoinPool-1-worker-2  id: 18\r\n```\r\n\r\nWithout those steps my output was sequential as yours.\r\n\r\n  [1]: https://spockframework.org/spock/javadoc/2.0/spock/lang/Execution.html\r\n  [2]: https://spockframework.org/spock/docs/2.3/all_in_one.html#parallel-execution\r\n  [3]: https://spockframework.org/spock/docs/2.3/all_in_one.html#spock-configuration-file","title":"Junit not running tests in parallel","body":"<p>You should use <a href=\"https://spockframework.org/spock/javadoc/2.0/spock/lang/Execution.html\" rel=\"nofollow noreferrer\"><code>@spock.lang.Execution</code></a> and <code>org.spockframework.runtime.model.parallel.ExecutionMode</code> annotations/classes instead of JUnit 5 ones. As an example, your imports might look like this:</p>\n<pre><code>import org.spockframework.runtime.model.parallel.ExecutionMode\nimport spock.lang.Execution\nimport spock.lang.Specification\nimport spock.lang.Unroll\n</code></pre>\n<p>You should also enable the <a href=\"https://spockframework.org/spock/docs/2.3/all_in_one.html#parallel-execution\" rel=\"nofollow noreferrer\">&quot;Parallel Execution&quot;</a> feature in Spock, e.g. by adding <a href=\"https://spockframework.org/spock/docs/2.3/all_in_one.html#spock-configuration-file\" rel=\"nofollow noreferrer\">SpockConfig.groovy</a> with necessary configs (different options are available, just refer to that page). As an example, your config might look like this:</p>\n<pre><code>runner {\n  parallel {\n    enabled true\n  }\n}\n</code></pre>\n<p>I've put this file into the test resources directory (root package). Also, read a note on that page which states:</p>\n<blockquote>\n<p>JUnit Jupiter also supports parallel execution, both rely on the JUnit Platform implementation, but function independently of each other. If you enable parallel execution in Spock it won’t affect Jupiter and vice versa.</p>\n</blockquote>\n<p>An in general, that <a href=\"https://spockframework.org/spock/docs/2.3/all_in_one.html#parallel-execution\" rel=\"nofollow noreferrer\">&quot;Parallel Execution&quot;</a> article is a good read.</p>\n<p>Once I've done the above I'm able to run the test methods in parallel. Here is my output:</p>\n<pre><code>FirstParallelUnitTest first() start =&gt; ForkJoinPool-1-worker-1  id: 17\nFirstParallelUnitTest first() start =&gt; ForkJoinPool-1-worker-6  id: 22\nFirstParallelUnitTest first() start =&gt; ForkJoinPool-1-worker-5  id: 20\nFirstParallelUnitTest first() end =&gt; ForkJoinPool-1-worker-6  id: 22\nFirstParallelUnitTest first() end =&gt; ForkJoinPool-1-worker-1  id: 17\nFirstParallelUnitTest first() end =&gt; ForkJoinPool-1-worker-5  id: 20\nFirstParallelUnitTest first() start =&gt; ForkJoinPool-1-worker-4  id: 21\nFirstParallelUnitTest first() start =&gt; ForkJoinPool-1-worker-2  id: 18\nFirstParallelUnitTest first() end =&gt; ForkJoinPool-1-worker-2  id: 18\nFirstParallelUnitTest first() end =&gt; ForkJoinPool-1-worker-4  id: 21\nFirstParallelUnitTest first() start =&gt; ForkJoinPool-1-worker-1  id: 17\nFirstParallelUnitTest first() start =&gt; ForkJoinPool-1-worker-6  id: 22\nFirstParallelUnitTest first() start =&gt; ForkJoinPool-1-worker-2  id: 18\nFirstParallelUnitTest first() start =&gt; ForkJoinPool-1-worker-5  id: 20\nFirstParallelUnitTest first() start =&gt; ForkJoinPool-1-worker-3  id: 19\nFirstParallelUnitTest first() end =&gt; ForkJoinPool-1-worker-6  id: 22\nFirstParallelUnitTest first() end =&gt; ForkJoinPool-1-worker-3  id: 19\nFirstParallelUnitTest first() end =&gt; ForkJoinPool-1-worker-2  id: 18\nFirstParallelUnitTest first() end =&gt; ForkJoinPool-1-worker-5  id: 20\nFirstParallelUnitTest first() end =&gt; ForkJoinPool-1-worker-1  id: 17\nFirstParallelUnitTest first() start =&gt; ForkJoinPool-1-worker-4  id: 21\nFirstParallelUnitTest first() end =&gt; ForkJoinPool-1-worker-4  id: 21\nFirstParallelUnitTest first() start =&gt; ForkJoinPool-1-worker-2  id: 18\nFirstParallelUnitTest first() end =&gt; ForkJoinPool-1-worker-2  id: 18\n</code></pre>\n<p>Without those steps my output was sequential as yours.</p>\n"}],"owner":{"account_id":6430643,"reputation":1854,"user_id":4983983,"accept_rate":60,"display_name":"tryingHard"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":589,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":74601737,"answer_count":1,"score":1,"last_activity_date":1669647699,"creation_date":1669631992,"question_id":74599354,"body_markdown":"I have test:\r\n\r\n\r\n    import org.junit.jupiter.api.parallel.Execution // version 5.9.0\r\n    import org.junit.jupiter.api.parallel.ExecutionMode\r\n    import spock.lang.Specification\r\n    import spock.lang.Unroll\r\n    \r\n    @Execution(ExecutionMode.CONCURRENT)\r\n    class ExampleTest extends Specification {\r\n    \r\n        @Unroll\r\n        @Execution(ExecutionMode.CONCURRENT)\r\n        def &quot;test1: should get valid #testParam&quot;() {\r\n            System.out.println(&quot;FirstParallelUnitTest first() start =&gt; &quot; + Thread.currentThread().getName() +\r\n                    &quot;  id: &quot; + Thread.currentThread().getId());\r\n            given:\r\n                def test = testParam\r\n            expect:\r\n                test != null\r\n                System.out.println(&quot;FirstParallelUnitTest first() end =&gt; &quot; + Thread.currentThread().getName() +\r\n                        &quot;  id: &quot; + Thread.currentThread().getId());\r\n            where:\r\n                testParam &lt;&lt; [&quot;one&quot;, &quot;two&quot;, &quot;three&quot;, &quot;four&quot;]\r\n        }\r\n    \r\n        @Unroll\r\n        @Execution(ExecutionMode.CONCURRENT)\r\n        def &quot;test2: should get valid #testParam&quot;() {\r\n            System.out.println(&quot;FirstParallelUnitTest first() start =&gt; &quot; + Thread.currentThread().getName() +\r\n                    &quot;  id: &quot; + Thread.currentThread().getId());\r\n            given:\r\n                def test = testParam\r\n            expect:\r\n                test != null\r\n                System.out.println(&quot;FirstParallelUnitTest first() end =&gt; &quot; + Thread.currentThread().getName() +\r\n                        &quot;  id: &quot; + Thread.currentThread().getId());\r\n            where:\r\n                testParam &lt;&lt; [&quot;one&quot;, &quot;two&quot;, &quot;three&quot;, &quot;four&quot;]\r\n        }\r\n    \r\n        @Unroll\r\n        @Execution(ExecutionMode.CONCURRENT)\r\n        def &quot;test3: should get valid #testParam&quot;() {\r\n            System.out.println(&quot;FirstParallelUnitTest first() start =&gt; &quot; + Thread.currentThread().getName() +\r\n                    &quot;  id: &quot; + Thread.currentThread().getId());\r\n            given:\r\n                def test = testParam\r\n            expect:\r\n                test != null\r\n                System.out.println(&quot;FirstParallelUnitTest first() end =&gt; &quot; + Thread.currentThread().getName() +\r\n                        &quot;  id: &quot; + Thread.currentThread().getId());\r\n            where:\r\n                testParam &lt;&lt; [&quot;one&quot;, &quot;two&quot;, &quot;three&quot;, &quot;four&quot;]\r\n        }\r\n    }\r\n\r\nI have created `junit-platform.properties` file in `src/test/resources` that contains:\r\n\r\n    junit.jupiter.execution.parallel.enabled=true\r\n    junit.jupiter.execution.parallel.mode.default = concurrent\r\n    junit.jupiter.execution.parallel.mode.classes.default = concurrent\r\n    junit.jupiter.execution.parallel.config.strategy=fixed\r\n    junit.jupiter.execution.parallel.config.fixed.parallelism=2\r\n\r\n\r\nI have also tried adding `systemProperties` like that in `gradle` file:\r\n\r\n    test {\r\n        testLogging {\r\n            exceptionFormat = &#39;full&#39;\r\n        }\r\n        useJUnitPlatform()\r\n        systemProperties([\r\n                &#39;junit.jupiter.execution.parallel.enabled&#39;: &#39;true&#39;,\r\n                &#39;junit.jupiter.execution.parallel.mode.default&#39;: &#39;concurrent&#39;,\r\n                &#39;junit.jupiter.execution.parallel.mode.classes.default&#39;: &#39;concurrent&#39;,\r\n        ])\r\n    }\r\n\r\nI am using `gradle` version `7.6`.\r\n\r\nI added this `junit` test dependencies:\r\n\r\n    testImplementation(&quot;org.jetbrains.kotlin:kotlin-test-junit5&quot;)\r\n    testImplementation(&quot;org.junit.jupiter:junit-jupiter-params&quot;)\r\n\r\nI have also tried adding to `build.gradle` this:\r\n\r\n    subprojects {\r\n        tasks.withType(Test) {\r\n            maxParallelForks = Runtime.runtime.availableProcessors()\r\n        }\r\n    }\r\n\r\nNot divided cause i wanted to see change on `i7-6600U` processor (2 cores).\r\n\r\n\r\nWhen running the test i see these logs:\r\n\r\n    FirstParallelUnitTest first() start =&gt; Test worker  id: 1\r\n    FirstParallelUnitTest first() end =&gt; Test worker  id: 1\r\n    FirstParallelUnitTest first() start =&gt; Test worker  id: 1\r\n    FirstParallelUnitTest first() end =&gt; Test worker  id: 1\r\n    FirstParallelUnitTest first() start =&gt; Test worker  id: 1\r\n    FirstParallelUnitTest first() end =&gt; Test worker  id: 1\r\n    FirstParallelUnitTest first() start =&gt; Test worker  id: 1\r\n    FirstParallelUnitTest first() end =&gt; Test worker  id: 1\r\n    FirstParallelUnitTest first() start =&gt; Test worker  id: 1\r\n    FirstParallelUnitTest first() end =&gt; Test worker  id: 1\r\n    FirstParallelUnitTest first() start =&gt; Test worker  id: 1\r\n    FirstParallelUnitTest first() end =&gt; Test worker  id: 1\r\n    FirstParallelUnitTest first() start =&gt; Test worker  id: 1\r\n    FirstParallelUnitTest first() end =&gt; Test worker  id: 1\r\n    FirstParallelUnitTest first() start =&gt; Test worker  id: 1\r\n    FirstParallelUnitTest first() end =&gt; Test worker  id: 1\r\n    FirstParallelUnitTest first() start =&gt; Test worker  id: 1\r\n    FirstParallelUnitTest first() end =&gt; Test worker  id: 1\r\n    FirstParallelUnitTest first() start =&gt; Test worker  id: 1\r\n    FirstParallelUnitTest first() end =&gt; Test worker  id: 1\r\n    FirstParallelUnitTest first() start =&gt; Test worker  id: 1\r\n    FirstParallelUnitTest first() end =&gt; Test worker  id: 1\r\n    FirstParallelUnitTest first() start =&gt; Test worker  id: 1\r\n    FirstParallelUnitTest first() end =&gt; Test worker  id: 1\r\n\r\n`thread` `id` does not change, or the order of `start/end` does not change each time.\r\n\r\nHow can I run this test in parallel and each other test in parallel ?","title":"Junit not running tests in parallel","body":"<p>I have test:</p>\n<pre><code>import org.junit.jupiter.api.parallel.Execution // version 5.9.0\nimport org.junit.jupiter.api.parallel.ExecutionMode\nimport spock.lang.Specification\nimport spock.lang.Unroll\n\n@Execution(ExecutionMode.CONCURRENT)\nclass ExampleTest extends Specification {\n\n    @Unroll\n    @Execution(ExecutionMode.CONCURRENT)\n    def &quot;test1: should get valid #testParam&quot;() {\n        System.out.println(&quot;FirstParallelUnitTest first() start =&gt; &quot; + Thread.currentThread().getName() +\n                &quot;  id: &quot; + Thread.currentThread().getId());\n        given:\n            def test = testParam\n        expect:\n            test != null\n            System.out.println(&quot;FirstParallelUnitTest first() end =&gt; &quot; + Thread.currentThread().getName() +\n                    &quot;  id: &quot; + Thread.currentThread().getId());\n        where:\n            testParam &lt;&lt; [&quot;one&quot;, &quot;two&quot;, &quot;three&quot;, &quot;four&quot;]\n    }\n\n    @Unroll\n    @Execution(ExecutionMode.CONCURRENT)\n    def &quot;test2: should get valid #testParam&quot;() {\n        System.out.println(&quot;FirstParallelUnitTest first() start =&gt; &quot; + Thread.currentThread().getName() +\n                &quot;  id: &quot; + Thread.currentThread().getId());\n        given:\n            def test = testParam\n        expect:\n            test != null\n            System.out.println(&quot;FirstParallelUnitTest first() end =&gt; &quot; + Thread.currentThread().getName() +\n                    &quot;  id: &quot; + Thread.currentThread().getId());\n        where:\n            testParam &lt;&lt; [&quot;one&quot;, &quot;two&quot;, &quot;three&quot;, &quot;four&quot;]\n    }\n\n    @Unroll\n    @Execution(ExecutionMode.CONCURRENT)\n    def &quot;test3: should get valid #testParam&quot;() {\n        System.out.println(&quot;FirstParallelUnitTest first() start =&gt; &quot; + Thread.currentThread().getName() +\n                &quot;  id: &quot; + Thread.currentThread().getId());\n        given:\n            def test = testParam\n        expect:\n            test != null\n            System.out.println(&quot;FirstParallelUnitTest first() end =&gt; &quot; + Thread.currentThread().getName() +\n                    &quot;  id: &quot; + Thread.currentThread().getId());\n        where:\n            testParam &lt;&lt; [&quot;one&quot;, &quot;two&quot;, &quot;three&quot;, &quot;four&quot;]\n    }\n}\n</code></pre>\n<p>I have created <code>junit-platform.properties</code> file in <code>src/test/resources</code> that contains:</p>\n<pre><code>junit.jupiter.execution.parallel.enabled=true\njunit.jupiter.execution.parallel.mode.default = concurrent\njunit.jupiter.execution.parallel.mode.classes.default = concurrent\njunit.jupiter.execution.parallel.config.strategy=fixed\njunit.jupiter.execution.parallel.config.fixed.parallelism=2\n</code></pre>\n<p>I have also tried adding <code>systemProperties</code> like that in <code>gradle</code> file:</p>\n<pre><code>test {\n    testLogging {\n        exceptionFormat = 'full'\n    }\n    useJUnitPlatform()\n    systemProperties([\n            'junit.jupiter.execution.parallel.enabled': 'true',\n            'junit.jupiter.execution.parallel.mode.default': 'concurrent',\n            'junit.jupiter.execution.parallel.mode.classes.default': 'concurrent',\n    ])\n}\n</code></pre>\n<p>I am using <code>gradle</code> version <code>7.6</code>.</p>\n<p>I added this <code>junit</code> test dependencies:</p>\n<pre><code>testImplementation(&quot;org.jetbrains.kotlin:kotlin-test-junit5&quot;)\ntestImplementation(&quot;org.junit.jupiter:junit-jupiter-params&quot;)\n</code></pre>\n<p>I have also tried adding to <code>build.gradle</code> this:</p>\n<pre><code>subprojects {\n    tasks.withType(Test) {\n        maxParallelForks = Runtime.runtime.availableProcessors()\n    }\n}\n</code></pre>\n<p>Not divided cause i wanted to see change on <code>i7-6600U</code> processor (2 cores).</p>\n<p>When running the test i see these logs:</p>\n<pre><code>FirstParallelUnitTest first() start =&gt; Test worker  id: 1\nFirstParallelUnitTest first() end =&gt; Test worker  id: 1\nFirstParallelUnitTest first() start =&gt; Test worker  id: 1\nFirstParallelUnitTest first() end =&gt; Test worker  id: 1\nFirstParallelUnitTest first() start =&gt; Test worker  id: 1\nFirstParallelUnitTest first() end =&gt; Test worker  id: 1\nFirstParallelUnitTest first() start =&gt; Test worker  id: 1\nFirstParallelUnitTest first() end =&gt; Test worker  id: 1\nFirstParallelUnitTest first() start =&gt; Test worker  id: 1\nFirstParallelUnitTest first() end =&gt; Test worker  id: 1\nFirstParallelUnitTest first() start =&gt; Test worker  id: 1\nFirstParallelUnitTest first() end =&gt; Test worker  id: 1\nFirstParallelUnitTest first() start =&gt; Test worker  id: 1\nFirstParallelUnitTest first() end =&gt; Test worker  id: 1\nFirstParallelUnitTest first() start =&gt; Test worker  id: 1\nFirstParallelUnitTest first() end =&gt; Test worker  id: 1\nFirstParallelUnitTest first() start =&gt; Test worker  id: 1\nFirstParallelUnitTest first() end =&gt; Test worker  id: 1\nFirstParallelUnitTest first() start =&gt; Test worker  id: 1\nFirstParallelUnitTest first() end =&gt; Test worker  id: 1\nFirstParallelUnitTest first() start =&gt; Test worker  id: 1\nFirstParallelUnitTest first() end =&gt; Test worker  id: 1\nFirstParallelUnitTest first() start =&gt; Test worker  id: 1\nFirstParallelUnitTest first() end =&gt; Test worker  id: 1\n</code></pre>\n<p><code>thread</code> <code>id</code> does not change, or the order of <code>start/end</code> does not change each time.</p>\n<p>How can I run this test in parallel and each other test in parallel ?</p>\n"},{"tags":["java","string","replace","substring"],"comments":[{"owner":{"display_name":"user6073886"},"score":1,"creation_date":1669644458,"post_id":74601694,"comment_id":131682461,"body_markdown":"Well, have you looked at the Documentation of String? You might have spotted that the String class has a method called `replaceFirst`: https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/String.html#replaceFirst(java.lang.String,java.lang.String) - Apart from that the examples you have provided look to me like replacing isn&#39;t even needed at all. Simply using `substring(1)` as long as the String is not empty should siffice. (eG: `&quot;Hello&quot;.subString(1);` will return `&quot;ello&quot;`, `&quot;ello&quot;.substring(1)` will return `&quot;llo&quot;` etc. pp )","body":"Well, have you looked at the Documentation of String? You might have spotted that the String class has a method called <code>replaceFirst</code>: <a href=\"https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/String.html#replaceFirst(java.lang.String,java.lang.String)\" rel=\"nofollow noreferrer\">docs.oracle.com/en/java/javase/11/docs/api/java.base/java/la&zwnj;&#8203;ng/&hellip;</a> - Apart from that the examples you have provided look to me like replacing isn&#39;t even needed at all. Simply using <code>substring(1)</code> as long as the String is not empty should siffice. (eG: <code>&quot;Hello&quot;.subString(1);</code> will return <code>&quot;ello&quot;</code>, <code>&quot;ello&quot;.substring(1)</code> will return <code>&quot;llo&quot;</code> etc. pp )"},{"owner":{"account_id":12221317,"reputation":569,"user_id":8920328,"display_name":"Melron"},"score":1,"creation_date":1669644883,"post_id":74601694,"comment_id":131682615,"body_markdown":"`I already wrote some code that produces the following output` . Where is the code?","body":"<code>I already wrote some code that produces the following output</code> . Where is the code?"},{"owner":{"account_id":9537825,"reputation":1490,"user_id":7275056,"display_name":"vsfDawg"},"score":0,"creation_date":1669646792,"post_id":74601694,"comment_id":131683301,"body_markdown":"Consider using a StringBuilder instead of trying to manipulate the String yourself.","body":"Consider using a StringBuilder instead of trying to manipulate the String yourself."},{"owner":{"account_id":22773857,"reputation":69,"user_id":16930849,"display_name":"Noname"},"score":0,"creation_date":1669647008,"post_id":74601694,"comment_id":131683371,"body_markdown":"@vsfDawg No I am disallowed to use a StringBuilder for that task. But thanks for the advice :)","body":"@vsfDawg No I am disallowed to use a StringBuilder for that task. But thanks for the advice :)"},{"owner":{"account_id":22773857,"reputation":69,"user_id":16930849,"display_name":"Noname"},"score":0,"creation_date":1669647575,"post_id":74601694,"comment_id":131683560,"body_markdown":"@OHGODSPIDERS Well yeah. Using substring(1) works fine for the first three iterations. But then I get an error: String index out of range: 3","body":"@OHGODSPIDERS Well yeah. Using substring(1) works fine for the first three iterations. But then I get an error: String index out of range: 3"},{"owner":{"display_name":"user6073886"},"score":0,"creation_date":1669648011,"post_id":74601694,"comment_id":131683733,"body_markdown":"@Eldinur I just posted an answer that shows how your idea with fixed code would work with using replaceFirst. You basically made it way to complicated by needlessly introducing a second nested loop and also replacing / modifying both Strings instead of just the second one.","body":"@Eldinur I just posted an answer that shows how your idea with fixed code would work with using replaceFirst. You basically made it way to complicated by needlessly introducing a second nested loop and also replacing / modifying both Strings instead of just the second one."}],"answers":[{"tags":[],"owner":{"account_id":27074171,"reputation":36,"user_id":20624395,"display_name":"Nitroxy"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1669645241,"creation_date":1669645241,"answer_id":74601983,"question_id":74601694,"body_markdown":"Simply using `&quot;Hello&quot;.substring(1);` will remove the first letter in a consistent manner","title":"Replace only one specified character from string","body":"<p>Simply using <code>&quot;Hello&quot;.substring(1);</code> will remove the first letter in a consistent manner</p>\n"},{"tags":[],"owner":{"display_name":"user6073886"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1669647692,"creation_date":1669647692,"answer_id":74602524,"question_id":74601694,"body_markdown":"While I do think there are better ways to check if a String is an anagram, I think it might be helpful if you see how your idea implemented correctly would look like.\r\n\r\nYour method was needlessly complicated.\r\nAll you really need to do is:\r\n1. Iterate over the chars of your first String\r\n2. replace the first occurrence of that char in the second string with an empty String.\r\n3. After you are done iterating check if the second String is now empty, which will tell you if all chars from the first String where found:\r\n\r\n--\r\n\r\n    public static boolean isAnagram(String first, String second) {\r\n\r\n\t\tfinal int first_len = first.length();\r\n\t\tfinal int second_len = second.length();\r\n\t\tif (first_len != second_len) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\t\r\n\t\t// If you want your anagram check to be case sensitive, comment out the following 2 lines\r\n\t\tfirst = first.toLowerCase();\r\n\t\tsecond = second.toLowerCase();\r\n\t\t\r\n\t\tfor (int i = 0; i &lt; first_len; i++) {\r\n\t\t\tfinal char ch = first.charAt(i);\r\n\t\t\tsecond = second.replaceFirst(Pattern.quote(String.valueOf(ch)), &quot;&quot;);\r\n\t\t}\r\n\r\n\t\tif (second.trim().isEmpty()) {\r\n\t\t\treturn true;\r\n\t\t}\r\n\t\treturn false;\r\n\t}\r\n\r\nBecause the `replaceFirst` method uses regular expressions as an argument we use the method `Pattern.quote` to make sure the passed character gets interpreted as a literal character and not accidentally as some special regular expression character.  ","title":"Replace only one specified character from string","body":"<p>While I do think there are better ways to check if a String is an anagram, I think it might be helpful if you see how your idea implemented correctly would look like.</p>\n<p>Your method was needlessly complicated.\nAll you really need to do is:</p>\n<ol>\n<li>Iterate over the chars of your first String</li>\n<li>replace the first occurrence of that char in the second string with an empty String.</li>\n<li>After you are done iterating check if the second String is now empty, which will tell you if all chars from the first String where found:</li>\n</ol>\n<p>--</p>\n<pre><code>public static boolean isAnagram(String first, String second) {\n\n    final int first_len = first.length();\n    final int second_len = second.length();\n    if (first_len != second_len) {\n        return false;\n    }\n    \n    // If you want your anagram check to be case sensitive, comment out the following 2 lines\n    first = first.toLowerCase();\n    second = second.toLowerCase();\n    \n    for (int i = 0; i &lt; first_len; i++) {\n        final char ch = first.charAt(i);\n        second = second.replaceFirst(Pattern.quote(String.valueOf(ch)), &quot;&quot;);\n    }\n\n    if (second.trim().isEmpty()) {\n        return true;\n    }\n    return false;\n}\n</code></pre>\n<p>Because the <code>replaceFirst</code> method uses regular expressions as an argument we use the method <code>Pattern.quote</code> to make sure the passed character gets interpreted as a literal character and not accidentally as some special regular expression character.</p>\n"}],"owner":{"account_id":22773857,"reputation":69,"user_id":16930849,"display_name":"Noname"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":427,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":74601983,"answer_count":2,"score":0,"last_activity_date":1669647692,"creation_date":1669643899,"question_id":74601694,"body_markdown":"I want to replace one character at each iteration from a string.\r\nI already wrote some code that produces the following output:\r\n\r\nest\r\n\r\nst\r\n\r\nt\r\n\r\nThis is fine and my expected result.\r\n\r\n----------\r\n\r\n\r\n But when I add the input:\r\n&quot;hello&quot;, my output changes:\r\n\r\n\r\nello\r\n\r\nllo\r\n\r\no\r\n\r\nAs you can see, the two &quot;l&quot;&#39;s get removed at the same time. The reason is the following:\r\n\r\n&quot;replace(CharSequence&#160;target, CharSequence&#160;replacement)\r\nReplaces each substring of this string that matches the literal target sequence with the specified literal replacement sequence&quot;. \r\n\r\nAs you can see from the documentation, each substring gets replaced. Is there an alternative function in the String class? Note that I only want to use String and no other third party library.\r\n\r\n\r\n----------\r\nMaybe the replace-first function does achieve that? But since it requires regex I don&#39;t know how to use it ;(\r\n\r\nThanks for any help in advance!\r\n\r\n \r\nHere is my code:\r\n\r\n    public static boolean isAnagram(String first, String second){\r\n\r\n        final int first_len = first.length();\r\n        final int second_len = second.length();\r\n        if (first_len != second_len){\r\n            return false;\r\n        }\r\n\r\n        //String newWord = oldWord.replace(oldChar,newChar)\r\n\r\n        for (int i = 0; i &lt; first_len; i++) {\r\n            char ch = first.charAt(i);\r\n            first = first.replace(ch, &#39; &#39;);\r\n            System.out.println(first);\r\n            for (int j = 0; j &lt; first_len; j++){\r\n                if (second.charAt(j) == ch) {\r\n                    second = second.replace(second.charAt(j), &#39; &#39;);\r\n                }\r\n            }\r\n        }\r\n\r\n        if (first.trim().isEmpty() &amp;&amp; second.trim().isEmpty()){\r\n            return true;\r\n        }\r\n        return false;\r\n    }\r\n\r\n\r\n\r\n","title":"Replace only one specified character from string","body":"<p>I want to replace one character at each iteration from a string.\nI already wrote some code that produces the following output:</p>\n<p>est</p>\n<p>st</p>\n<p>t</p>\n<p>This is fine and my expected result.</p>\n<hr />\n<p>But when I add the input:\n&quot;hello&quot;, my output changes:</p>\n<p>ello</p>\n<p>llo</p>\n<p>o</p>\n<p>As you can see, the two &quot;l&quot;'s get removed at the same time. The reason is the following:</p>\n<p>&quot;replace(CharSequence target, CharSequence replacement)\nReplaces each substring of this string that matches the literal target sequence with the specified literal replacement sequence&quot;.</p>\n<p>As you can see from the documentation, each substring gets replaced. Is there an alternative function in the String class? Note that I only want to use String and no other third party library.</p>\n<hr />\n<p>Maybe the replace-first function does achieve that? But since it requires regex I don't know how to use it ;(</p>\n<p>Thanks for any help in advance!</p>\n<p>Here is my code:</p>\n<pre><code>public static boolean isAnagram(String first, String second){\n\n    final int first_len = first.length();\n    final int second_len = second.length();\n    if (first_len != second_len){\n        return false;\n    }\n\n    //String newWord = oldWord.replace(oldChar,newChar)\n\n    for (int i = 0; i &lt; first_len; i++) {\n        char ch = first.charAt(i);\n        first = first.replace(ch, ' ');\n        System.out.println(first);\n        for (int j = 0; j &lt; first_len; j++){\n            if (second.charAt(j) == ch) {\n                second = second.replace(second.charAt(j), ' ');\n            }\n        }\n    }\n\n    if (first.trim().isEmpty() &amp;&amp; second.trim().isEmpty()){\n        return true;\n    }\n    return false;\n}\n</code></pre>\n"},{"tags":["java","spring","spring-integration","spring-integration-sftp"],"answers":[{"tags":[],"owner":{"account_id":1288095,"reputation":169316,"user_id":1240763,"display_name":"Gary Russell"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1669647402,"creation_date":1669647402,"answer_id":74602470,"question_id":74560408,"body_markdown":"There are two types of `@ServiceActivator` (and `@Transformer` etc).\r\n\r\nPOJO methods (like your transformer) and beans that define message handlers.\r\n\r\nYour service activators need to be defined as `@Bean` s (like you did with your inbound channel adapter).\r\n\r\nSee https://docs.spring.io/spring-integration/docs/current/reference/html/configuration.html#annotations and https://docs.spring.io/spring-integration/docs/current/reference/html/configuration.html#annotations_on_beans","title":"Spring Integration: delete (sftp) remote file after it has been persisted to database","body":"<p>There are two types of <code>@ServiceActivator</code> (and <code>@Transformer</code> etc).</p>\n<p>POJO methods (like your transformer) and beans that define message handlers.</p>\n<p>Your service activators need to be defined as <code>@Bean</code> s (like you did with your inbound channel adapter).</p>\n<p>See <a href=\"https://docs.spring.io/spring-integration/docs/current/reference/html/configuration.html#annotations\" rel=\"nofollow noreferrer\">https://docs.spring.io/spring-integration/docs/current/reference/html/configuration.html#annotations</a> and <a href=\"https://docs.spring.io/spring-integration/docs/current/reference/html/configuration.html#annotations_on_beans\" rel=\"nofollow noreferrer\">https://docs.spring.io/spring-integration/docs/current/reference/html/configuration.html#annotations_on_beans</a></p>\n"}],"owner":{"account_id":26774791,"reputation":826,"user_id":20370596,"display_name":"Christoph Dahlen"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":307,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1669647402,"creation_date":1669291025,"question_id":74560408,"body_markdown":"(for context, please see my [previous question](https://stackoverflow.com/questions/74529439/spring-integration-define-sequential-handling-of-messages-using-java-dsl/74534375#74534375))\r\n\r\nStill struggling to get a file from an SFTP server, persist it&#39;s content to a database and remove that file afterwards, **if** it was persisted without errors. I just can get the handling of handlers, gateways and flows right.\r\n\r\nI need guidanc, please\r\n\r\nWhat I have:\r\n\r\n```java\r\n\r\n@Configuration\r\n@EnableIntegration\r\nclass Sftp2DB {\r\n\r\n    @Bean\r\n    @InboundChannelAdapter(channel = &quot;transform&quot;)\r\n    public MessageSource&lt;InputStream&gt; source() {\r\n        return Sftp\r\n            .inboundStreamingAdapter(template(this.sessionFactory))\r\n            .remoteDirectory(&quot;inbound&quot;)\r\n            .get();\r\n    }\r\n\r\n    @Transformer(inputChannel=&quot;transform&quot;, outputChannel = &quot;persist&quot;)\r\n    public Message&lt;MyEntity&gt; transform(final Message&lt;InputStream&gt; in) throws IOException {\r\n        var entity = new MyEntity();\r\n        entity.setContent(in.getPayload().readAllBytes());\r\n        entity.setFilename(in.getHeaders().get(FileHeaders.FILENAME, String.class));\r\n        return MessageBuilder.withPayload(entity).build();\r\n    }\r\n\r\n    @ServiceActivator(inputChannel = &quot;persist&quot;, outputChannel = &quot;remove&quot;)\r\n    public JpaOutboundGateway persist() {\r\n        return Jpa\r\n            .updatingGateway(this.entityManager)\r\n            .entityClass(MyEntity.class)\r\n            .persistMode(PersistMode.PERSIST)\r\n            .get();\r\n    }\r\n\r\n    @ServiceActivator(inputChannel = &quot;remove&quot;)\r\n    public AbstractRemoteFileOutboundGateway&lt;LsEntry&gt; remove() {\r\n        return Sftp\r\n            .outboundGateway(\r\n                this.sessionFactory,\r\n                &quot;rm&quot;, \r\n                String.format(&quot;header[&#39;%s&#39;] + &#39;/&#39; + header[&#39;%s&#39;]&quot;, FileHeaders.REMOTE_DIRECTORY, FileHeaders.REMOTE_FILE)\r\n            )\r\n            .get();\r\n            \r\n    }\r\n}\r\n\r\n```\r\n\r\nWhat I get:\r\n\r\n&gt; 2022-11-24 12:50:13.815 ERROR 948 --- [   scheduling-1] o.s.integration.handler.LoggingHandler   : org.springframework.messaging.MessageHandlingException: error occurred in message handler [ServiceActivator for [org.springframework.integration.handler.MethodInvokingMessageProcessor@3be14a03] (Sftp2DB.remove.serviceActivator)]; nested exception is org.springframework.messaging.core.DestinationResolutionException: no output-channel or replyChannel header available, failedMessage=GenericMessage [payload=org.springframework.integration.jpa.outbound.JpaOutboundGateway@6a0e79fb, headers={id=788f63b5-ad62-de6b-bbb1-ecde94d23576, timestamp=1669290613815}]","title":"Spring Integration: delete (sftp) remote file after it has been persisted to database","body":"<p>(for context, please see my <a href=\"https://stackoverflow.com/questions/74529439/spring-integration-define-sequential-handling-of-messages-using-java-dsl/74534375#74534375\">previous question</a>)</p>\n<p>Still struggling to get a file from an SFTP server, persist it's content to a database and remove that file afterwards, <strong>if</strong> it was persisted without errors. I just can get the handling of handlers, gateways and flows right.</p>\n<p>I need guidanc, please</p>\n<p>What I have:</p>\n<pre class=\"lang-java prettyprint-override\"><code>\n@Configuration\n@EnableIntegration\nclass Sftp2DB {\n\n    @Bean\n    @InboundChannelAdapter(channel = &quot;transform&quot;)\n    public MessageSource&lt;InputStream&gt; source() {\n        return Sftp\n            .inboundStreamingAdapter(template(this.sessionFactory))\n            .remoteDirectory(&quot;inbound&quot;)\n            .get();\n    }\n\n    @Transformer(inputChannel=&quot;transform&quot;, outputChannel = &quot;persist&quot;)\n    public Message&lt;MyEntity&gt; transform(final Message&lt;InputStream&gt; in) throws IOException {\n        var entity = new MyEntity();\n        entity.setContent(in.getPayload().readAllBytes());\n        entity.setFilename(in.getHeaders().get(FileHeaders.FILENAME, String.class));\n        return MessageBuilder.withPayload(entity).build();\n    }\n\n    @ServiceActivator(inputChannel = &quot;persist&quot;, outputChannel = &quot;remove&quot;)\n    public JpaOutboundGateway persist() {\n        return Jpa\n            .updatingGateway(this.entityManager)\n            .entityClass(MyEntity.class)\n            .persistMode(PersistMode.PERSIST)\n            .get();\n    }\n\n    @ServiceActivator(inputChannel = &quot;remove&quot;)\n    public AbstractRemoteFileOutboundGateway&lt;LsEntry&gt; remove() {\n        return Sftp\n            .outboundGateway(\n                this.sessionFactory,\n                &quot;rm&quot;, \n                String.format(&quot;header['%s'] + '/' + header['%s']&quot;, FileHeaders.REMOTE_DIRECTORY, FileHeaders.REMOTE_FILE)\n            )\n            .get();\n            \n    }\n}\n\n</code></pre>\n<p>What I get:</p>\n<blockquote>\n<p>2022-11-24 12:50:13.815 ERROR 948 --- [   scheduling-1] o.s.integration.handler.LoggingHandler   : org.springframework.messaging.MessageHandlingException: error occurred in message handler [ServiceActivator for [org.springframework.integration.handler.MethodInvokingMessageProcessor@3be14a03] (Sftp2DB.remove.serviceActivator)]; nested exception is org.springframework.messaging.core.DestinationResolutionException: no output-channel or replyChannel header available, failedMessage=GenericMessage [payload=org.springframework.integration.jpa.outbound.JpaOutboundGateway@6a0e79fb, headers={id=788f63b5-ad62-de6b-bbb1-ecde94d23576, timestamp=1669290613815}]</p>\n</blockquote>\n"},{"tags":["java","elasticsearch"],"answers":[{"tags":[],"owner":{"account_id":24277005,"reputation":31,"user_id":18224175,"display_name":"Basile Jean"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1645019929,"creation_date":1645019929,"answer_id":71143225,"question_id":70856616,"body_markdown":"to create an index with a JSON file I found this way:\r\n\r\n    ElasticsearchClient client = new ElasticsearchClient(\r\n                    new RestClientTransport(\r\n                        RestClient.builder(new HttpHost(&quot;localhost&quot;, 9200, &quot;http&quot;)).build(),\r\n                        new JacksonJsonpMapper()));\r\n\r\n    String mappingPath = &quot;yourPath/yourJsonFile.json&quot;;\r\n     \r\n    JsonpMapper mapper = client._transport().jsonpMapper();\r\n    JsonParser parser = mapper.jsonProvider()\r\n                .createParser(new StringReader(\r\n                    Files.toString(new ClassPathResource(mappingPath).getFile(), Charsets.UTF_8)));\r\n\r\n    client.indices()\r\n        .create(createIndexRequest -&gt; createIndexRequest.index(indexName)\r\n            .mappings(TypeMapping._DESERIALIZER.deserialize(parser, mapper)));\r\n\r\nThen I tried to do same thing for BulkRequest but I didn&#39;t find the good way.","title":"How to create an index using the new Java API Client by providing source","body":"<p>to create an index with a JSON file I found this way:</p>\n<pre><code>ElasticsearchClient client = new ElasticsearchClient(\n                new RestClientTransport(\n                    RestClient.builder(new HttpHost(&quot;localhost&quot;, 9200, &quot;http&quot;)).build(),\n                    new JacksonJsonpMapper()));\n\nString mappingPath = &quot;yourPath/yourJsonFile.json&quot;;\n \nJsonpMapper mapper = client._transport().jsonpMapper();\nJsonParser parser = mapper.jsonProvider()\n            .createParser(new StringReader(\n                Files.toString(new ClassPathResource(mappingPath).getFile(), Charsets.UTF_8)));\n\nclient.indices()\n    .create(createIndexRequest -&gt; createIndexRequest.index(indexName)\n        .mappings(TypeMapping._DESERIALIZER.deserialize(parser, mapper)));\n</code></pre>\n<p>Then I tried to do same thing for BulkRequest but I didn't find the good way.</p>\n"}],"owner":{"account_id":4340864,"reputation":125,"user_id":3544113,"accept_rate":50,"display_name":"Vineeth"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2527,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"answer_count":1,"score":4,"last_activity_date":1669647222,"creation_date":1643150427,"question_id":70856616,"body_markdown":"I&#39;m migrating our code from Java High Level REST Client to Java API Client since the Rest client got deprecated in elasticsearch 7.15. As mentioned in [this official documentation][1], indexes were created by providing the source (settings and mapping) as a json file. The same is supported in the latest elasticsearch via [REST API][2]. But in the new Java API Client, CreateIndexRequest doesn&#39;t have the option to provide the source. How to do it? Migrating the mapping to Java (using IndexSettings and TypeMapping) is not an option.\r\n\r\n\r\n  [1]: https://www.elastic.co/guide/en/elasticsearch/client/java-rest/current/java-rest-high-create-index.html#_providing_the_whole_source\r\n  [2]: https://www.elastic.co/guide/en/elasticsearch/reference/current/indices-create-index.html#mappings","title":"How to create an index using the new Java API Client by providing source","body":"<p>I'm migrating our code from Java High Level REST Client to Java API Client since the Rest client got deprecated in elasticsearch 7.15. As mentioned in <a href=\"https://www.elastic.co/guide/en/elasticsearch/client/java-rest/current/java-rest-high-create-index.html#_providing_the_whole_source\" rel=\"nofollow noreferrer\">this official documentation</a>, indexes were created by providing the source (settings and mapping) as a json file. The same is supported in the latest elasticsearch via <a href=\"https://www.elastic.co/guide/en/elasticsearch/reference/current/indices-create-index.html#mappings\" rel=\"nofollow noreferrer\">REST API</a>. But in the new Java API Client, CreateIndexRequest doesn't have the option to provide the source. How to do it? Migrating the mapping to Java (using IndexSettings and TypeMapping) is not an option.</p>\n"},{"tags":["java","spring-integration","samba","file-locking","cifs"],"comments":[{"owner":{"account_id":20240228,"reputation":496,"user_id":14844306,"display_name":"Ben Anderson"},"score":0,"creation_date":1669476245,"post_id":74583121,"comment_id":131651112,"body_markdown":"From looking at the `NIOFileLocker` [implementation](https://github.com/spring-projects/spring-integration/blob/main/spring-integration-file/src/main/java/org/springframework/integration/file/locking/NioFileLocker.java#L46), it seems that under the hood it eventually uses `FileChannel#tryLock`. [This question](https://stackoverflow.com/questions/416285/java-file-locking-on-a-network) seems to suggest it won&#39;t suit your use case. (that implementation also uses an in-memory cache for locks, which would only help for multi-threaded access on a single machine)","body":"From looking at the <code>NIOFileLocker</code> <a href=\"https://github.com/spring-projects/spring-integration/blob/main/spring-integration-file/src/main/java/org/springframework/integration/file/locking/NioFileLocker.java#L46\" rel=\"nofollow noreferrer\">implementation</a>, it seems that under the hood it eventually uses <code>FileChannel#tryLock</code>. <a href=\"https://stackoverflow.com/questions/416285/java-file-locking-on-a-network\">This question</a> seems to suggest it won&#39;t suit your use case. (that implementation also uses an in-memory cache for locks, which would only help for multi-threaded access on a single machine)"},{"owner":{"account_id":25534785,"reputation":532,"user_id":19322069,"display_name":"access violation"},"score":0,"creation_date":1669477640,"post_id":74583121,"comment_id":131651425,"body_markdown":"SMB has a file-locking primitive. Why wouldn&#39;t the Java implementation use it?","body":"SMB has a file-locking primitive. Why wouldn&#39;t the Java implementation use it?"},{"owner":{"account_id":4884728,"reputation":19,"user_id":3937509,"display_name":"habjo"},"score":0,"creation_date":1669494751,"post_id":74583121,"comment_id":131654816,"body_markdown":"What does SMB having a file-locking primitive mean? @accessviolation","body":"What does SMB having a file-locking primitive mean? @accessviolation"},{"owner":{"account_id":4884728,"reputation":19,"user_id":3937509,"display_name":"habjo"},"score":0,"creation_date":1669494896,"post_id":74583121,"comment_id":131654849,"body_markdown":"And thank you @BenAnderson, I will have a look at it.","body":"And thank you @BenAnderson, I will have a look at it."},{"owner":{"account_id":1887489,"reputation":8619,"user_id":4811873,"accept_rate":6,"display_name":"Mike Robinson"},"score":1,"creation_date":1669495666,"post_id":74583121,"comment_id":131655007,"body_markdown":"I cannot definitively answer your queestion, but: Is it possible to *avoid* this situation?  If there is one area in which &quot;network file systems of all flavors&quot; vary most widely, it would probably be &quot;locking.&quot;","body":"I cannot definitively answer your queestion, but: Is it possible to <i>avoid</i> this situation?  If there is one area in which &quot;network file systems of all flavors&quot; vary most widely, it would probably be &quot;locking.&quot;"},{"owner":{"account_id":4884728,"reputation":19,"user_id":3937509,"display_name":"habjo"},"score":0,"creation_date":1669498739,"post_id":74583121,"comment_id":131655538,"body_markdown":"@MikeRobinson Ok, thanks for the heads up. I&#39;ll have that in mind when we develop this thing. Much appreciated!","body":"@MikeRobinson Ok, thanks for the heads up. I&#39;ll have that in mind when we develop this thing. Much appreciated!"}],"answers":[{"tags":[],"owner":{"account_id":3273937,"reputation":114855,"user_id":2756547,"accept_rate":75,"display_name":"Artem Bilan"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1669647043,"creation_date":1669647043,"answer_id":74602386,"question_id":74583121,"body_markdown":"The `NIOFileLocker` essentially works properly only on Windows. It doesn&#39;t matter how you mount that remote Windows dir, you stil work from Linux. Moreover you said it yourself: you deal with files via SMB protocol - nothing about local filesystem where `NIOFileLocker` would have an effect.\r\n\r\nSee Spring Integration SMB support: https://docs.spring.io/spring-integration/docs/current/reference/html/smb.html#smb and consider to use an `SmbPersistentAcceptOnceFileListFilter` based on some shared persistent DB: https://docs.spring.io/spring-integration/docs/current/reference/html/meta-data-store.html#metadata-store. The filter will look into the store to check if file has been already processed in some other instance. This is essentially a distributed file locking you are looking for.","title":"How does a FileLock work over the network? Will it only lock a local file in the mount, or will the lock &quot;propagate&quot; to the file on another machine?","body":"<p>The <code>NIOFileLocker</code> essentially works properly only on Windows. It doesn't matter how you mount that remote Windows dir, you stil work from Linux. Moreover you said it yourself: you deal with files via SMB protocol - nothing about local filesystem where <code>NIOFileLocker</code> would have an effect.</p>\n<p>See Spring Integration SMB support: <a href=\"https://docs.spring.io/spring-integration/docs/current/reference/html/smb.html#smb\" rel=\"nofollow noreferrer\">https://docs.spring.io/spring-integration/docs/current/reference/html/smb.html#smb</a> and consider to use an <code>SmbPersistentAcceptOnceFileListFilter</code> based on some shared persistent DB: <a href=\"https://docs.spring.io/spring-integration/docs/current/reference/html/meta-data-store.html#metadata-store\" rel=\"nofollow noreferrer\">https://docs.spring.io/spring-integration/docs/current/reference/html/meta-data-store.html#metadata-store</a>. The filter will look into the store to check if file has been already processed in some other instance. This is essentially a distributed file locking you are looking for.</p>\n"}],"owner":{"account_id":4884728,"reputation":19,"user_id":3937509,"display_name":"habjo"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":210,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":74602386,"answer_count":1,"score":0,"last_activity_date":1669647043,"creation_date":1669473972,"question_id":74583121,"body_markdown":"Okay, so I&#39;m unsure how mounts over a network work with file locks.\r\n\r\n**This is the scenario:**\r\n\r\nThere are two JVMs, each running on a machine of its own (both Linux).\r\n\r\nThen there is a file share, on a third machine (Windows).\r\n\r\nBoth the machines running a JVM each have mounted the same windows fileshare using CIFS/SAMBA.\r\n\r\n\r\n\r\nIf JVM-1 takes a lock on a file, using the FileLocker from Spring Integration for example, in its &quot;local network mount&quot; (or however to phrase it), will JVM-2 recognise that lock? \r\n\r\nOr will the lock only be taken on that file local to the Linux machine, even though it is network share mounted and is bound somehow to a file on the Windows machine? ","title":"How does a FileLock work over the network? Will it only lock a local file in the mount, or will the lock &quot;propagate&quot; to the file on another machine?","body":"<p>Okay, so I'm unsure how mounts over a network work with file locks.</p>\n<p><strong>This is the scenario:</strong></p>\n<p>There are two JVMs, each running on a machine of its own (both Linux).</p>\n<p>Then there is a file share, on a third machine (Windows).</p>\n<p>Both the machines running a JVM each have mounted the same windows fileshare using CIFS/SAMBA.</p>\n<p>If JVM-1 takes a lock on a file, using the FileLocker from Spring Integration for example, in its &quot;local network mount&quot; (or however to phrase it), will JVM-2 recognise that lock?</p>\n<p>Or will the lock only be taken on that file local to the Linux machine, even though it is network share mounted and is bound somehow to a file on the Windows machine?</p>\n"},{"tags":["java","recursion"],"comments":[{"owner":{"account_id":1674243,"reputation":10043,"user_id":1553537,"accept_rate":29,"display_name":"Giorgi Tsiklauri"},"score":0,"creation_date":1669639382,"post_id":74600705,"comment_id":131680678,"body_markdown":"First things first: `a.length != b.length` already implies, that it&#39;s either `indexA &gt; a.length || indexB &gt; b.length`.","body":"First things first: <code>a.length != b.length</code> already implies, that it&#39;s either <code>indexA &gt; a.length || indexB &gt; b.length</code>."},{"owner":{"account_id":3391382,"reputation":3687,"user_id":2846138,"display_name":"cyberbrain"},"score":0,"creation_date":1669639735,"post_id":74600705,"comment_id":131680807,"body_markdown":"@GiorgiTsiklauri no that implication doesn&#39;t hold - when you keep `a` and `b` the same arrays in all recursions (of the same length), at one point you will get to the situation where one (or both) of the index counters are out of bounds, if you increment them with each recursive call. The condition is not completely correct, but the three parts are OK.","body":"@GiorgiTsiklauri no that implication doesn&#39;t hold - when you keep <code>a</code> and <code>b</code> the same arrays in all recursions (of the same length), at one point you will get to the situation where one (or both) of the index counters are out of bounds, if you increment them with each recursive call. The condition is not completely correct, but the three parts are OK."},{"owner":{"account_id":1674243,"reputation":10043,"user_id":1553537,"accept_rate":29,"display_name":"Giorgi Tsiklauri"},"score":0,"creation_date":1669639991,"post_id":74600705,"comment_id":131680887,"body_markdown":"@cyberbrain so, how does that make my implication wrong? `ArrayIndexOutOfBoundsException` can happen in many different scenarios, but the `if` expression has a redundant part - you will get an out of bounds in both cases - equality or gt or lt.","body":"@cyberbrain so, how does that make my implication wrong? <code>ArrayIndexOutOfBoundsException</code> can happen in many different scenarios, but the <code>if</code> expression has a redundant part - you will get an out of bounds in both cases - equality or gt or lt."},{"owner":{"account_id":3391382,"reputation":3687,"user_id":2846138,"display_name":"cyberbrain"},"score":0,"creation_date":1669640406,"post_id":74600705,"comment_id":131681022,"body_markdown":"@GiorgiTsiklauri your comment would let me think that one could skip the index to length comparision, if you just compare the two array lengths, but it&#39;s the other way round, you could skip the comparison of the array lengths. Maybe I didn&#39;t express this well enough.","body":"@GiorgiTsiklauri your comment would let me think that one could skip the index to length comparision, if you just compare the two array lengths, but it&#39;s the other way round, you could skip the comparison of the array lengths. Maybe I didn&#39;t express this well enough."}],"answers":[{"tags":[],"owner":{"account_id":401843,"reputation":89788,"user_id":768644,"display_name":"rzwitserloot"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1669639904,"creation_date":1669639904,"answer_id":74600874,"question_id":74600705,"body_markdown":"The problem is that the challenge here is fundamentally not particularly well suited to a recursive solution. If the aim is simply to understand how to write a recursive function, that makes it a particularly bad idea to try to solve this particular problem in a recursive way.\r\n\r\nThe general way recursive functions are designed is as follows. As an example, let&#39;s look at the function &#39;fibbonacci&#39;, where fib(n) is simply fib(n-2) + fib(n-1), with fib(0) and fib(1) defined as 0 and 1 respectively.\r\n\r\n* The algorithm starts by checking if the inputs are a trivial case - a really really simple case that has a trivial answer. For example, for the `fib` functions, we check if `n` is 0 or 1 and just return that straight away if so.\r\n* Then, the algorithm is stated in terms of itself, but simpler versions of itself - it can call its own function as long as the inputs are &#39;simpler&#39; - closer to that corner case covered in the first bullet. For our `fib` example, we can call `fib(n-1)` and `fib(n-2)`, because that&#39;s &quot;closer&quot; to the trivial cases of 0 and 1.\r\n\r\n... and that&#39;s all you have to do. That&#39;s a recursive algorithm:\r\n\r\n```\r\nint fib(int n) {\r\n  if (n == 0 || n == 1) return n;\r\n  return fib(n-1) + fib(n-2);\r\n}\r\n```\r\n\r\nLet&#39;s now look at the algorithm you are trying to implement:\r\n\r\nImagine 4/3/2/1 and 1/3/4/2. A recursive algorithm _could_ exist, but we have to adhere to the notion of &#39;a trivial case&#39; and &#39;state the problem in terms of a simpler version of itself&#39;.\r\n\r\nThe trivial case is easy enough: We can trivially determine that the empty list is a permutation of the empty list without recursion.\r\n\r\nThat means we need to state e.g. 4/3/2/1 and 1/3/4/2 into a simple operation + a simpler version of itself. The only obvious way to do that, is to take an arbitrary number from the first list, lets say 4, and first do the simple operation of checking if &#39;4&#39; is indeed in the second list. If not, we can stop right there and return false. If it is, we need to __remove 4 from both lists first__ and then continue the algorithm by checking if 3/2/1 is a permutation of 1/3/2 - which we can do with recursion.\r\n\r\nThe problem is, recursion cannot use shared state. Thus, we need to _clone_ the lists, which is very painful. It&#39;s a possible way to run the algorithm but it is incredibly inefficient: For each number in the list, you run through the entire second list (so for 2 lists that each have 100 numbers, that&#39;s 100*100 = 10k steps), _and_ we clone the entire list, minus 1 element (so that&#39;s 100 clones, each clone taking about between 1 and 100 steps, so another 5k with memory load to boot): The algorithm grows by the square of the input (if the inputs have 1000 entries each, it&#39;s 1000*1000+1000*500 = over a million steps). This is called an `O(n^2)` algorithm.\r\n\r\nContrast to a vastly simpler algorithm:\r\n\r\n* Only in case we can&#39;t &#39;destroy&#39; the input, make clones ONCE.\r\n* Sort the clones. This is an O(n*log n) algorithm and built into java.\r\n* Now check if the lists are identical, which is `O(n)`.\r\n\r\nFor an algorithm that is `O(n*log n)` in total which is nearly linear. Where a recursive algorithm will eventually start taking days to do the job, this algorithm will do it in seconds.\r\n\r\nAnd it&#39;s not an algorithm that lends itself to breaking it down into &#39;a trivial case&#39; + &#39;a simple operation + an application of a simpler version of itself&#39; which is what a recursive approach would require.\r\n\r\nNB: In theory you can make your recursive algorithm &#39;merely&#39; a basic `O(n^2)` case by not removing anything, but now e.g. list [4/4/3/2/1] and list [1/1/2/3/4] would be considered identical which is not really what &#39;check if A is a permutation of B&#39; would entail, therefore, the step of &#39;once you find a match you have to remove those&#39; can&#39;t really be skipped. However, if you do, it&#39;s still a crappy algorithm whose computation complexity grows faster than the solution of &#39;sort em both, then check if they are identical&#39;.\r\n\r\nThe simple sorting solution:\r\n\r\n```\r\nArrays.sort(a);\r\nArrays.sort(b);\r\nreturn Arrays.equals(a, b);\r\n```\r\n","title":"check if two arrays are permutations of each other recursive","body":"<p>The problem is that the challenge here is fundamentally not particularly well suited to a recursive solution. If the aim is simply to understand how to write a recursive function, that makes it a particularly bad idea to try to solve this particular problem in a recursive way.</p>\n<p>The general way recursive functions are designed is as follows. As an example, let's look at the function 'fibbonacci', where fib(n) is simply fib(n-2) + fib(n-1), with fib(0) and fib(1) defined as 0 and 1 respectively.</p>\n<ul>\n<li>The algorithm starts by checking if the inputs are a trivial case - a really really simple case that has a trivial answer. For example, for the <code>fib</code> functions, we check if <code>n</code> is 0 or 1 and just return that straight away if so.</li>\n<li>Then, the algorithm is stated in terms of itself, but simpler versions of itself - it can call its own function as long as the inputs are 'simpler' - closer to that corner case covered in the first bullet. For our <code>fib</code> example, we can call <code>fib(n-1)</code> and <code>fib(n-2)</code>, because that's &quot;closer&quot; to the trivial cases of 0 and 1.</li>\n</ul>\n<p>... and that's all you have to do. That's a recursive algorithm:</p>\n<pre><code>int fib(int n) {\n  if (n == 0 || n == 1) return n;\n  return fib(n-1) + fib(n-2);\n}\n</code></pre>\n<p>Let's now look at the algorithm you are trying to implement:</p>\n<p>Imagine 4/3/2/1 and 1/3/4/2. A recursive algorithm <em>could</em> exist, but we have to adhere to the notion of 'a trivial case' and 'state the problem in terms of a simpler version of itself'.</p>\n<p>The trivial case is easy enough: We can trivially determine that the empty list is a permutation of the empty list without recursion.</p>\n<p>That means we need to state e.g. 4/3/2/1 and 1/3/4/2 into a simple operation + a simpler version of itself. The only obvious way to do that, is to take an arbitrary number from the first list, lets say 4, and first do the simple operation of checking if '4' is indeed in the second list. If not, we can stop right there and return false. If it is, we need to <strong>remove 4 from both lists first</strong> and then continue the algorithm by checking if 3/2/1 is a permutation of 1/3/2 - which we can do with recursion.</p>\n<p>The problem is, recursion cannot use shared state. Thus, we need to <em>clone</em> the lists, which is very painful. It's a possible way to run the algorithm but it is incredibly inefficient: For each number in the list, you run through the entire second list (so for 2 lists that each have 100 numbers, that's 100<em>100 = 10k steps), <em>and</em> we clone the entire list, minus 1 element (so that's 100 clones, each clone taking about between 1 and 100 steps, so another 5k with memory load to boot): The algorithm grows by the square of the input (if the inputs have 1000 entries each, it's 1000</em>1000+1000*500 = over a million steps). This is called an <code>O(n^2)</code> algorithm.</p>\n<p>Contrast to a vastly simpler algorithm:</p>\n<ul>\n<li>Only in case we can't 'destroy' the input, make clones ONCE.</li>\n<li>Sort the clones. This is an O(n*log n) algorithm and built into java.</li>\n<li>Now check if the lists are identical, which is <code>O(n)</code>.</li>\n</ul>\n<p>For an algorithm that is <code>O(n*log n)</code> in total which is nearly linear. Where a recursive algorithm will eventually start taking days to do the job, this algorithm will do it in seconds.</p>\n<p>And it's not an algorithm that lends itself to breaking it down into 'a trivial case' + 'a simple operation + an application of a simpler version of itself' which is what a recursive approach would require.</p>\n<p>NB: In theory you can make your recursive algorithm 'merely' a basic <code>O(n^2)</code> case by not removing anything, but now e.g. list [4/4/3/2/1] and list [1/1/2/3/4] would be considered identical which is not really what 'check if A is a permutation of B' would entail, therefore, the step of 'once you find a match you have to remove those' can't really be skipped. However, if you do, it's still a crappy algorithm whose computation complexity grows faster than the solution of 'sort em both, then check if they are identical'.</p>\n<p>The simple sorting solution:</p>\n<pre><code>Arrays.sort(a);\nArrays.sort(b);\nreturn Arrays.equals(a, b);\n</code></pre>\n"}],"owner":{"account_id":25967095,"reputation":11,"user_id":19682895,"display_name":"bar toplian"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":83,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1669646804,"creation_date":1669639078,"question_id":74600705,"body_markdown":"I have tried to write this recursive function, i am new to this and it seems to be quite difficult for me, to understand a recursive question and &quot;translate&quot; it into code.\r\n\r\nWe are given two arrays of integer numbers, and want to see if they are permutations of each other.\r\n\r\nex.\r\na = {1,2,3,4} is a permutation of b = {4,3,2,1}\r\n\r\nThis is my try, the problem is whenever the function finds two cell (one each array) that are equals, the function returns true and won&#39;t keep checking the rest\r\n\r\n```\r\npublic static boolean isPermutation(int[] a, int[] b,int indexA, int indexB){\r\n    if(a.length != b.length || indexA &gt; a.length || indexB &gt; b.length)\r\n        return false;\r\n    if(a[indexA] == b[indexB]) {\r\n        return true;\r\n    }\r\n    if(a[indexA] != b[indexB])\r\n        return false;\r\n    return isPermutation(a,b,indexA+1,0) || isPermutation(a,b,indexA,indexB+1);\r\n}\r\n```\r\n\r\n\r\n","title":"check if two arrays are permutations of each other recursive","body":"<p>I have tried to write this recursive function, i am new to this and it seems to be quite difficult for me, to understand a recursive question and &quot;translate&quot; it into code.</p>\n<p>We are given two arrays of integer numbers, and want to see if they are permutations of each other.</p>\n<p>ex.\na = {1,2,3,4} is a permutation of b = {4,3,2,1}</p>\n<p>This is my try, the problem is whenever the function finds two cell (one each array) that are equals, the function returns true and won't keep checking the rest</p>\n<pre><code>public static boolean isPermutation(int[] a, int[] b,int indexA, int indexB){\n    if(a.length != b.length || indexA &gt; a.length || indexB &gt; b.length)\n        return false;\n    if(a[indexA] == b[indexB]) {\n        return true;\n    }\n    if(a[indexA] != b[indexB])\n        return false;\n    return isPermutation(a,b,indexA+1,0) || isPermutation(a,b,indexA,indexB+1);\n}\n</code></pre>\n"},{"tags":["java","spring-boot","rabbitmq","spring-amqp"],"answers":[{"tags":[],"owner":{"account_id":1288095,"reputation":169316,"user_id":1240763,"display_name":"Gary Russell"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1669646784,"creation_date":1669646784,"answer_id":74602333,"question_id":74545385,"body_markdown":"&gt;How can I trust everything under the package com.domain?\r\n\r\nYou cannot.\r\n\r\nThe package must be fully specified `com.domain.service.dto.name`.","title":"Trusting packages in Jackson2JavaTypeMapper","body":"<blockquote>\n<p>How can I trust everything under the package com.domain?</p>\n</blockquote>\n<p>You cannot.</p>\n<p>The package must be fully specified <code>com.domain.service.dto.name</code>.</p>\n"}],"owner":{"account_id":26289969,"reputation":313,"user_id":19957114,"display_name":"dev-rifaii"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":79,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1669646784,"creation_date":1669199595,"question_id":74545385,"body_markdown":"Everything is working fine when I trust all packages using &#39;*&#39; but I&#39;d like to trust only my domain&#39;s package. This is what I tried and its not working\r\n\r\n```java\r\nif (javaTypeMapper instanceof DefaultJackson2JavaTypeMapper) {\r\n            javaTypeMapper.addTrustedPackages(&quot;com.domain&quot;);\r\n```\r\n\r\nException:\r\n\r\n&gt;java.lang.IllegalArgumentException: The class &#39;com.domain.service.dto.name.SomeDto&#39; is \r\nnot in the trusted packages: [java.util, java.lang, com.domain]. If you believe this \r\nclass is safe to deserialize, please provide its name. If the serialization is only done\r\nby a trusted source, you can also enable trust all (*).\r\n\r\nHow can I trust everything under the package com.domain?","title":"Trusting packages in Jackson2JavaTypeMapper","body":"<p>Everything is working fine when I trust all packages using '*' but I'd like to trust only my domain's package. This is what I tried and its not working</p>\n<pre class=\"lang-java prettyprint-override\"><code>if (javaTypeMapper instanceof DefaultJackson2JavaTypeMapper) {\n            javaTypeMapper.addTrustedPackages(&quot;com.domain&quot;);\n</code></pre>\n<p>Exception:</p>\n<blockquote>\n<p>java.lang.IllegalArgumentException: The class 'com.domain.service.dto.name.SomeDto' is\nnot in the trusted packages: [java.util, java.lang, com.domain]. If you believe this\nclass is safe to deserialize, please provide its name. If the serialization is only done\nby a trusted source, you can also enable trust all (*).</p>\n</blockquote>\n<p>How can I trust everything under the package com.domain?</p>\n"},{"tags":["java","arrays","data-structures"],"answers":[{"tags":[],"owner":{"account_id":19254723,"reputation":2061,"user_id":14071914,"display_name":"JustAnotherDeveloper"},"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1669499587,"creation_date":1669499587,"answer_id":74585847,"question_id":74585794,"body_markdown":"```Java\r\nimport java.util.*;\r\npublic class MyClass {\r\n    public static void main(String args[]) {\r\n      int[] oldArray ={1,2,3,4,5};\r\n      int[] newArray = Arrays.copyOfRange(oldArray, 0, 3);\r\n      int sum = 0;\r\n      for (int i: newArray) {\r\n        sum += i;\r\n      }\r\n      System.out.println(&quot;Sum = &quot; + sum);\r\n    }\r\n}\r\n```\r\n**Output:** 6\r\n\r\nAs far as I know Java doesn&#39;t have the slicing notation you know from Python, but this, while more verbose, should do the trick.","title":"Is there a way to use : to add a range of values in an array?","body":"<pre><code>import java.util.*;\npublic class MyClass {\n    public static void main(String args[]) {\n      int[] oldArray ={1,2,3,4,5};\n      int[] newArray = Arrays.copyOfRange(oldArray, 0, 3);\n      int sum = 0;\n      for (int i: newArray) {\n        sum += i;\n      }\n      System.out.println(&quot;Sum = &quot; + sum);\n    }\n}\n</code></pre>\n<p><strong>Output:</strong> 6</p>\n<p>As far as I know Java doesn't have the slicing notation you know from Python, but this, while more verbose, should do the trick.</p>\n"},{"tags":[],"owner":{"account_id":26774791,"reputation":826,"user_id":20370596,"display_name":"Christoph Dahlen"},"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1669499648,"creation_date":1669499648,"answer_id":74585855,"question_id":74585794,"body_markdown":"You could use the appropriate variant of [java.util.Arrays](https://docs.oracle.com/javase/7/docs/api/java/util/Arrays.html#copyOfRange(int%5B%5D,%20int,%20int)).copyOfRange methods to create and operate on a slice. \r\n\r\nOr use a loop:\r\n\r\n    int sum = 0;\r\n    for(var i=0; i &lt; 3; i++) {\r\n      sum = sum + i\r\n    }","title":"Is there a way to use : to add a range of values in an array?","body":"<p>You could use the appropriate variant of <a href=\"https://docs.oracle.com/javase/7/docs/api/java/util/Arrays.html#copyOfRange(int%5B%5D,%20int,%20int)\" rel=\"nofollow noreferrer\">java.util.Arrays</a>.copyOfRange methods to create and operate on a slice.</p>\n<p>Or use a loop:</p>\n<pre><code>int sum = 0;\nfor(var i=0; i &lt; 3; i++) {\n  sum = sum + i\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":6714862,"reputation":16230,"user_id":5176992,"display_name":"Eritrean"},"down_vote_count":2,"up_vote_count":9,"is_accepted":true,"score":7,"last_activity_date":1669646689,"creation_date":1669499716,"answer_id":74585861,"question_id":74585794,"body_markdown":"There is no built-in method to sum up a subarray. The simplest way could be to stream over the sub-array:\r\n\r\n    int[] myArray = {1,2,3,4,5,6};\r\n\r\n    int sum = Arrays.stream(myArray, 0, 3).sum();\r\n\r\nwhere 0 and 3 are the start and end indices (Start inclusive, end exclusive)","title":"Is there a way to use : to add a range of values in an array?","body":"<p>There is no built-in method to sum up a subarray. The simplest way could be to stream over the sub-array:</p>\n<pre><code>int[] myArray = {1,2,3,4,5,6};\n\nint sum = Arrays.stream(myArray, 0, 3).sum();\n</code></pre>\n<p>where 0 and 3 are the start and end indices (Start inclusive, end exclusive)</p>\n"},{"tags":[],"owner":{"account_id":23959668,"reputation":26587,"user_id":17949945,"display_name":"Alexander Ivanchenko"},"down_vote_count":1,"up_vote_count":2,"is_accepted":false,"score":1,"last_activity_date":1669501848,"creation_date":1669501848,"answer_id":74586069,"question_id":74585794,"body_markdown":"Another option would be to use combination [`Arrays.stream()`][arraysStream] + [`IntStream.limit()`][intStreamLimit]:\r\n\r\n```\r\nint[] arr = // initializing the array\r\n\r\nint sum = Arrays.stream(arr).limit(3).sum();\r\n```\r\n\r\n\r\n   [arraysStream]: https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/Arrays.html#stream(int%5B%5D)\r\n\r\n   [intStreamLimit]: https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/stream/IntStream.html#limit(long)","title":"Is there a way to use : to add a range of values in an array?","body":"<p>Another option would be to use combination <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/Arrays.html#stream(int%5B%5D)\" rel=\"nofollow noreferrer\"><code>Arrays.stream()</code></a> + <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/stream/IntStream.html#limit(long)\" rel=\"nofollow noreferrer\"><code>IntStream.limit()</code></a>:</p>\n<pre><code>int[] arr = // initializing the array\n\nint sum = Arrays.stream(arr).limit(3).sum();\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1689973,"reputation":37280,"user_id":1552534,"display_name":"WJS"},"down_vote_count":1,"up_vote_count":6,"is_accepted":false,"score":5,"last_activity_date":1669502994,"creation_date":1669502994,"answer_id":74586184,"question_id":74585794,"body_markdown":"Extending [Eritrean&#39;s](https://stackoverflow.com/a/74585861/1552534) excellent answer you can create an interface with a meaningful name and tuck it away in your library.\r\n```\r\ninterface IntRangeSum {\r\n    static public int apply(int[] a, int start, int end) {\r\n         return Arrays.stream(a, start, end).sum();\r\n    }\r\n}\r\n\r\n\r\nint[] a = {1,2,3,4,5};\r\nint result = IntRangeSum.apply(a, 2, 4);\r\nSystem.out.println(result);\r\n```\r\nprints\r\n```\r\n7    ","title":"Is there a way to use : to add a range of values in an array?","body":"<p>Extending <a href=\"https://stackoverflow.com/a/74585861/1552534\">Eritrean's</a> excellent answer you can create an interface with a meaningful name and tuck it away in your library.</p>\n<pre><code>interface IntRangeSum {\n    static public int apply(int[] a, int start, int end) {\n         return Arrays.stream(a, start, end).sum();\n    }\n}\n\n\nint[] a = {1,2,3,4,5};\nint result = IntRangeSum.apply(a, 2, 4);\nSystem.out.println(result);\n</code></pre>\n<p>prints</p>\n<pre><code>7    \n</code></pre>\n"}],"owner":{"account_id":12290263,"reputation":332,"user_id":8967933,"display_name":"lams"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":152,"favorite_count":0,"down_vote_count":3,"up_vote_count":3,"closed_date":1669566629,"accepted_answer_id":74585861,"answer_count":5,"score":0,"last_activity_date":1669646689,"creation_date":1669498954,"question_id":74585794,"body_markdown":"I have an array and I am trying to sum the values of just a portion of the array.\r\n\r\nFor example my array is [1,2,3,4,5,6], but I want to add the values only to the third element\r\n\r\n[1,2,3]. I thought I used a method involving the semi colon before, but I cant remember for sure.\r\n\r\nsomething like int `sum = Sum (arr[0]:arr[2])` but I am not sure. Does something like this exist? \r\n\r\nI think I used it in Python a few years ago.","title":"Is there a way to use : to add a range of values in an array?","body":"<p>I have an array and I am trying to sum the values of just a portion of the array.</p>\n<p>For example my array is [1,2,3,4,5,6], but I want to add the values only to the third element</p>\n<p>[1,2,3]. I thought I used a method involving the semi colon before, but I cant remember for sure.</p>\n<p>something like int <code>sum = Sum (arr[0]:arr[2])</code> but I am not sure. Does something like this exist?</p>\n<p>I think I used it in Python a few years ago.</p>\n"},{"tags":["java","encryption","cryptojs"],"comments":[{"owner":{"account_id":12359353,"reputation":42427,"user_id":9014097,"display_name":"Topaco"},"score":0,"creation_date":1669651066,"post_id":74602286,"comment_id":131684987,"body_markdown":"Note that `{iv:key}` is ignored since key **and** IV are derived from the password. See for a decryption with Java [here](https://stackoverflow.com/q/74601513/9014097).","body":"Note that <code>{iv:key}</code> is ignored since key <b>and</b> IV are derived from the password. See for a decryption with Java <a href=\"https://stackoverflow.com/q/74601513/9014097\">here</a>."},{"owner":{"account_id":27074142,"reputation":1,"user_id":20624371,"display_name":"S.D."},"score":0,"creation_date":1669817936,"post_id":74602286,"comment_id":131729408,"body_markdown":"Thank you @Topaco! That was the exact solution that I was looking for.","body":"Thank you @Topaco! That was the exact solution that I was looking for."}],"owner":{"account_id":27074142,"reputation":1,"user_id":20624371,"display_name":"S.D."},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":58,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1669646630,"creation_date":1669646630,"question_id":74602286,"body_markdown":"**Context:**\r\nI&#39;m running into an issue of decrypting a value in Java that was encrypted in javascript with crypto-js. \r\nI have two applications on a server talking to each other and some of the requests are secured by sending some encrypted values and decrypting them on the receiving end, to make sure that the requests are not accepted when they are coming from the client, but only from the other server.\r\n\r\n**Code:**\r\nIn javascript I have the following code to encrypt it:\r\n\r\n```\r\nexport const encryptString = (stringToEncrypt: string, saltKey: string) =&gt; {\r\n\tconst key = enc.Utf8.parse(saltKey);\r\n\tconst ciphertext = AES.encrypt(stringToEncrypt, saltKey, { iv: key }).toString();\r\n\treturn ciphertext;\r\n};\r\n```\r\nIn Java I have the following code to decrypt it:\r\n\r\n```\r\nprivate String decryptString(String stringToDecrypt, String saltKey)\r\n{\r\n    IvParameterSpec iv = new IvParameterSpec(saltKey.getBytes(&quot;UTF-8&quot;));\r\n    SecretKeySpec skeySpec = new SecretKeySpec(saltKey.getBytes(&quot;UTF-8&quot;), &quot;AES&quot;);\r\n    Cipher cipher = Cipher.getInstance(&quot;AES/CBC/PKCS5PADDING&quot;);\r\n    cipher.init(Cipher.DECRYPT_MODE, skeySpec, iv);\r\n    byte[] cipherText = cipher.doFinal(Base64.getDecoder().decode(stringToDecrypt));\r\n    return new String(cipherText);\r\n}\r\n\r\n```\r\n\r\n**The problem:** The problem seems to be caused by the fact that I am using the &#39;saltKey&#39; as passphrase in javascript, because if I use the value &#39;key&#39; it works. Unfortunately it is undesirable to change the encryption because of existing logic. \r\n\r\n**Question:** Is it possible to modify the java code in a way that it can decrypt the encrypted value? And if so, how?\r\n","title":"How to decrypt in Java after after encrypting with crypto-js and phrasekey?","body":"<p><strong>Context:</strong>\nI'm running into an issue of decrypting a value in Java that was encrypted in javascript with crypto-js.\nI have two applications on a server talking to each other and some of the requests are secured by sending some encrypted values and decrypting them on the receiving end, to make sure that the requests are not accepted when they are coming from the client, but only from the other server.</p>\n<p><strong>Code:</strong>\nIn javascript I have the following code to encrypt it:</p>\n<pre><code>export const encryptString = (stringToEncrypt: string, saltKey: string) =&gt; {\n    const key = enc.Utf8.parse(saltKey);\n    const ciphertext = AES.encrypt(stringToEncrypt, saltKey, { iv: key }).toString();\n    return ciphertext;\n};\n</code></pre>\n<p>In Java I have the following code to decrypt it:</p>\n<pre><code>private String decryptString(String stringToDecrypt, String saltKey)\n{\n    IvParameterSpec iv = new IvParameterSpec(saltKey.getBytes(&quot;UTF-8&quot;));\n    SecretKeySpec skeySpec = new SecretKeySpec(saltKey.getBytes(&quot;UTF-8&quot;), &quot;AES&quot;);\n    Cipher cipher = Cipher.getInstance(&quot;AES/CBC/PKCS5PADDING&quot;);\n    cipher.init(Cipher.DECRYPT_MODE, skeySpec, iv);\n    byte[] cipherText = cipher.doFinal(Base64.getDecoder().decode(stringToDecrypt));\n    return new String(cipherText);\n}\n\n</code></pre>\n<p><strong>The problem:</strong> The problem seems to be caused by the fact that I am using the 'saltKey' as passphrase in javascript, because if I use the value 'key' it works. Unfortunately it is undesirable to change the encryption because of existing logic.</p>\n<p><strong>Question:</strong> Is it possible to modify the java code in a way that it can decrypt the encrypted value? And if so, how?</p>\n"},{"tags":["java","apache-tomee","openejb","deltaspike"],"answers":[{"tags":[],"owner":{"account_id":3691365,"reputation":183,"user_id":3073875,"accept_rate":50,"display_name":"Clueless"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1669646526,"creation_date":1669646526,"answer_id":74602269,"question_id":74446252,"body_markdown":"One of my colleagues was able to find out the reason.\r\n\r\nThe regex expression seems to be different between Tomee 7.1.4 and Tomee 8.0.13.\r\n\r\nThis regex find the libs and solves the probelem.\r\n\r\n        System.setProperty(&quot;openejb.deployments.classpath.include&quot;,&quot;.*deltaspike.*&quot;);\r\n\r\n\r\n","title":"createEJBContainer throws java.lang.IllegalStateException","body":"<p>One of my colleagues was able to find out the reason.</p>\n<p>The regex expression seems to be different between Tomee 7.1.4 and Tomee 8.0.13.</p>\n<p>This regex find the libs and solves the probelem.</p>\n<pre><code>    System.setProperty(&quot;openejb.deployments.classpath.include&quot;,&quot;.*deltaspike.*&quot;);\n</code></pre>\n"}],"owner":{"account_id":3691365,"reputation":183,"user_id":3073875,"accept_rate":50,"display_name":"Clueless"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":59,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1669646526,"creation_date":1668518000,"question_id":74446252,"body_markdown":"on a Linux machine the container runs inside an exception which I don&#39;t understand.\r\n\r\nWith `ejbContainer = EJBContainer.createEJBContainer();` the embaddable container will be started.\r\n\r\nIn the log file I see an exception:\r\n\r\n    Caused by: org.apache.webbeans.exception.WebBeansException: java.lang.IllegalStateException: Could not find beans for Type=class org.apache.deltaspike.core.impl.scope.window.WindowBeanHolder and qualifiers:[]\r\n    \tat org.apache.webbeans.event.ObserverMethodImpl.notify(ObserverMethodImpl.java:377)\r\n    \tat org.apache.webbeans.event.NotificationManager.invokeObserverMethod(NotificationManager.java:1146)\r\n    \tat org.apache.webbeans.event.NotificationManager.doFireSync(NotificationManager.java:1009)\r\n    \t... 84 common frames omitted\r\n    Caused by: java.lang.IllegalStateException: Could not find beans for Type=class org.apache.deltaspike.core.impl.scope.window.WindowBeanHolder and qualifiers:[]\r\n    \tat org.apache.deltaspike.core.api.provider.BeanProvider.getContextualReference(BeanProvider.java:154)\r\n    \tat org.apache.deltaspike.core.impl.scope.DeltaSpikeContextExtension.initializeDeltaSpikeContexts(DeltaSpikeContextExtension.java:86)\r\n    \tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n    \tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)\r\n    \tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n    \tat java.base/java.lang.reflect.Method.invoke(Method.java:568)\r\n    \tat org.apache.webbeans.event.ObserverMethodImpl.invoke(ObserverMethodImpl.java:410)\r\n    \tat org.apache.webbeans.event.ContainerEventObserverMethodImpl.invoke(ContainerEventObserverMethodImpl.java:86)\r\n    \tat org.apache.webbeans.event.ObserverMethodImpl.notify(ObserverMethodImpl.java:371)\r\n    \t... 86 common frames omitted\r\n    ERROR javax.enterprise.inject.spi.DeploymentException: couldn&#39;t start owb context\r\n\r\nHonestly I have no idea what&#39;s going on.\r\n\r\nBefore I found this line:\r\n    \r\n\r\n    System.setProperty(&quot;openejb.deployments.classpath.include&quot;,\r\n                &quot;.*deltaspike-cdictrl-owb-.*.jar|.*deltaspike-servlet-module-impl-.*.jar|.*deltaspike-servlet-module-api-.*.jar|.*deltaspike-core-api-.*.jar|.*deltaspike-core-impl-.*.jar&quot;);\r\n\r\nDoes anybody have an idea how I can fix this issue?\r\n\r\nThanks,\r\nMarkus\r\n","title":"createEJBContainer throws java.lang.IllegalStateException","body":"<p>on a Linux machine the container runs inside an exception which I don't understand.</p>\n<p>With <code>ejbContainer = EJBContainer.createEJBContainer();</code> the embaddable container will be started.</p>\n<p>In the log file I see an exception:</p>\n<pre><code>Caused by: org.apache.webbeans.exception.WebBeansException: java.lang.IllegalStateException: Could not find beans for Type=class org.apache.deltaspike.core.impl.scope.window.WindowBeanHolder and qualifiers:[]\n    at org.apache.webbeans.event.ObserverMethodImpl.notify(ObserverMethodImpl.java:377)\n    at org.apache.webbeans.event.NotificationManager.invokeObserverMethod(NotificationManager.java:1146)\n    at org.apache.webbeans.event.NotificationManager.doFireSync(NotificationManager.java:1009)\n    ... 84 common frames omitted\nCaused by: java.lang.IllegalStateException: Could not find beans for Type=class org.apache.deltaspike.core.impl.scope.window.WindowBeanHolder and qualifiers:[]\n    at org.apache.deltaspike.core.api.provider.BeanProvider.getContextualReference(BeanProvider.java:154)\n    at org.apache.deltaspike.core.impl.scope.DeltaSpikeContextExtension.initializeDeltaSpikeContexts(DeltaSpikeContextExtension.java:86)\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)\n    at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n    at java.base/java.lang.reflect.Method.invoke(Method.java:568)\n    at org.apache.webbeans.event.ObserverMethodImpl.invoke(ObserverMethodImpl.java:410)\n    at org.apache.webbeans.event.ContainerEventObserverMethodImpl.invoke(ContainerEventObserverMethodImpl.java:86)\n    at org.apache.webbeans.event.ObserverMethodImpl.notify(ObserverMethodImpl.java:371)\n    ... 86 common frames omitted\nERROR javax.enterprise.inject.spi.DeploymentException: couldn't start owb context\n</code></pre>\n<p>Honestly I have no idea what's going on.</p>\n<p>Before I found this line:</p>\n<pre><code>System.setProperty(&quot;openejb.deployments.classpath.include&quot;,\n            &quot;.*deltaspike-cdictrl-owb-.*.jar|.*deltaspike-servlet-module-impl-.*.jar|.*deltaspike-servlet-module-api-.*.jar|.*deltaspike-core-api-.*.jar|.*deltaspike-core-impl-.*.jar&quot;);\n</code></pre>\n<p>Does anybody have an idea how I can fix this issue?</p>\n<p>Thanks,\nMarkus</p>\n"},{"tags":["java","eclipse","command-line-interface","java-11"],"comments":[{"owner":{"account_id":74704,"reputation":11534,"user_id":214525,"accept_rate":100,"display_name":"f1sh"},"score":2,"creation_date":1669638624,"post_id":74600535,"comment_id":131680407,"body_markdown":"`Desktop.isDesktopSupported()` returns `false`. The subsequent conditions do not cover the case of myOS being `&quot;windows 10&quot;`, you need to add code for that.","body":"<code>Desktop.isDesktopSupported()</code> returns <code>false</code>. The subsequent conditions do not cover the case of myOS being <code>&quot;windows 10&quot;</code>, you need to add code for that."},{"owner":{"account_id":25158330,"reputation":1,"user_id":19002855,"display_name":"Oliver Smth"},"score":0,"creation_date":1669638871,"post_id":74600535,"comment_id":131680478,"body_markdown":"can you provide me an example please","body":"can you provide me an example please"},{"owner":{"account_id":25158330,"reputation":1,"user_id":19002855,"display_name":"Oliver Smth"},"score":0,"creation_date":1669638878,"post_id":74600535,"comment_id":131680486,"body_markdown":"I&#39;m new in java","body":"I&#39;m new in java"},{"owner":{"account_id":3211603,"reputation":289297,"user_id":2711488,"display_name":"Holger"},"score":1,"creation_date":1669719239,"post_id":74600535,"comment_id":131701495,"body_markdown":"You probably want to use `myOS.startsWith(&quot;windows&quot;)` instead of the unnecessarily specific condition `myOS.contains(&quot;windows 10&quot;)`.","body":"You probably want to use <code>myOS.startsWith(&quot;windows&quot;)</code> instead of the unnecessarily specific condition <code>myOS.contains(&quot;windows 10&quot;)</code>."}],"answers":[{"tags":[],"owner":{"account_id":2485939,"reputation":19426,"user_id":2164365,"accept_rate":40,"display_name":"Abra"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1669646089,"creation_date":1669646089,"answer_id":74602182,"question_id":74600535,"body_markdown":"Class [java.lang.ProcessBuilder](https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/ProcessBuilder.html) is intended for launching executables.\r\n\r\nI don&#39;t have access neither to MacOS nor linux so I can&#39;t comment on them.\r\n\r\nFor Windows, `start` is not an executable, it is an internal command of [cmd.exe](https://en.wikipedia.org/wiki/Cmd.exe) (just like `dir`). Hence the error message you are getting. Java is looking for an executable named `start` and cannot find one.\r\n\r\nOn Windows, in order to launch the default Internet browser, you can use [rundll32.exe](https://learn.microsoft.com/en-us/windows-server/administration/windows-commands/rundll32).\r\n```java\r\nimport java.io.IOException;\r\n\r\npublic class Browser {\r\n\r\n    public static void main(String[] args) {\r\n        ProcessBuilder pb = new ProcessBuilder(&quot;rundll32.exe&quot;,\r\n                                               &quot;url.dll,OpenURL&quot;,\r\n                                               &quot;https://github.com&quot;);\r\n        try {\r\n            pb.start();\r\n        }\r\n        catch (IOException x) {\r\n            x.printStackTrace();\r\n        }\r\n    }\r\n}\r\n```\r\nWhen I run the above code it launches [Microsoft Edge](https://www.microsoft.com/en-us/edge?form=MA13FJ) on the GitHub home page.\r\n","title":"Facing issues while opening a URL in the default browser using Java on Eclipse","body":"<p>Class <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/ProcessBuilder.html\" rel=\"nofollow noreferrer\">java.lang.ProcessBuilder</a> is intended for launching executables.</p>\n<p>I don't have access neither to MacOS nor linux so I can't comment on them.</p>\n<p>For Windows, <code>start</code> is not an executable, it is an internal command of <a href=\"https://en.wikipedia.org/wiki/Cmd.exe\" rel=\"nofollow noreferrer\">cmd.exe</a> (just like <code>dir</code>). Hence the error message you are getting. Java is looking for an executable named <code>start</code> and cannot find one.</p>\n<p>On Windows, in order to launch the default Internet browser, you can use <a href=\"https://learn.microsoft.com/en-us/windows-server/administration/windows-commands/rundll32\" rel=\"nofollow noreferrer\">rundll32.exe</a>.</p>\n<pre class=\"lang-java prettyprint-override\"><code>import java.io.IOException;\n\npublic class Browser {\n\n    public static void main(String[] args) {\n        ProcessBuilder pb = new ProcessBuilder(&quot;rundll32.exe&quot;,\n                                               &quot;url.dll,OpenURL&quot;,\n                                               &quot;https://github.com&quot;);\n        try {\n            pb.start();\n        }\n        catch (IOException x) {\n            x.printStackTrace();\n        }\n    }\n}\n</code></pre>\n<p>When I run the above code it launches <a href=\"https://www.microsoft.com/en-us/edge?form=MA13FJ\" rel=\"nofollow noreferrer\">Microsoft Edge</a> on the GitHub home page.</p>\n"}],"owner":{"account_id":25158330,"reputation":1,"user_id":19002855,"display_name":"Oliver Smth"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":176,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":1,"score":-1,"last_activity_date":1669646089,"creation_date":1669638259,"question_id":74600535,"body_markdown":"I have a simple **Java program** what I want to do is to open a **URL** for *example &quot;https://github.com&quot;* in the default browser on my Operating System in my case, I use **Windows 10**.\r\n\r\nHere is what I get while I run the program on **eclipse**:\r\n\r\n[Image][1]\r\n\r\nI think there is something wrong with **my code**:\r\n\r\n```\r\npackage com.main;\r\n\r\nimport java.awt.Desktop;\r\nimport java.net.URI;\r\n\r\npublic class Browser {\r\n    public void displayURL() throws Exception {\r\n\r\n        String url = &quot;https://github.com&quot;;\r\n        String myOS = System.getProperty(&quot;os.name&quot;).toLowerCase();\r\n        System.out.println(&quot;(Your operating system is: &quot; + myOS + &quot;)\\n&quot;);\r\n\r\n        try {\r\n            if (Desktop.isDesktopSupported()) {\r\n                System.out.println(&quot; -- Going with Desktop.browse ...&quot;);\r\n                Desktop desktop = Desktop.getDesktop();\r\n                desktop.browse(new URI(url));\r\n            } else {\r\n                ProcessBuilder pb = new ProcessBuilder();\r\n                if (myOS.contains(&quot;windows 10&quot;)) {\r\n                    System.out.println(&quot;Hello Windows 10&quot;);\r\n                    pb.command(&quot;start &quot; + url);\r\n                    pb.start();\r\n                } else if (myOS.contains(&quot;mac&quot;)) {\r\n                    pb.command(&quot;open &quot; + url);\r\n                    pb.start();\r\n                } else if (myOS.contains(&quot;nix&quot;) || myOS.contains(&quot;nux&quot;)) {\r\n                    pb.command(&quot;xdg-open &quot; + url);\r\n                    pb.start();\r\n                } else {\r\n                    System.out.println(&quot;Sorry!! I could not launch the browser on your operating system.&quot;);\r\n                }\r\n            }\r\n        } catch (Exception e) {\r\n            System.out.println(&quot;Oops!! Something is wrong. &quot; + e.getMessage());\r\n        }\r\n    }\r\n}\r\n```\r\n\r\nI hope to find a solution\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/TLh4N.png","title":"Facing issues while opening a URL in the default browser using Java on Eclipse","body":"<p>I have a simple <strong>Java program</strong> what I want to do is to open a <strong>URL</strong> for <em>example &quot;https://github.com&quot;</em> in the default browser on my Operating System in my case, I use <strong>Windows 10</strong>.</p>\n<p>Here is what I get while I run the program on <strong>eclipse</strong>:</p>\n<p><a href=\"https://i.stack.imgur.com/TLh4N.png\" rel=\"nofollow noreferrer\">Image</a></p>\n<p>I think there is something wrong with <strong>my code</strong>:</p>\n<pre><code>package com.main;\n\nimport java.awt.Desktop;\nimport java.net.URI;\n\npublic class Browser {\n    public void displayURL() throws Exception {\n\n        String url = &quot;https://github.com&quot;;\n        String myOS = System.getProperty(&quot;os.name&quot;).toLowerCase();\n        System.out.println(&quot;(Your operating system is: &quot; + myOS + &quot;)\\n&quot;);\n\n        try {\n            if (Desktop.isDesktopSupported()) {\n                System.out.println(&quot; -- Going with Desktop.browse ...&quot;);\n                Desktop desktop = Desktop.getDesktop();\n                desktop.browse(new URI(url));\n            } else {\n                ProcessBuilder pb = new ProcessBuilder();\n                if (myOS.contains(&quot;windows 10&quot;)) {\n                    System.out.println(&quot;Hello Windows 10&quot;);\n                    pb.command(&quot;start &quot; + url);\n                    pb.start();\n                } else if (myOS.contains(&quot;mac&quot;)) {\n                    pb.command(&quot;open &quot; + url);\n                    pb.start();\n                } else if (myOS.contains(&quot;nix&quot;) || myOS.contains(&quot;nux&quot;)) {\n                    pb.command(&quot;xdg-open &quot; + url);\n                    pb.start();\n                } else {\n                    System.out.println(&quot;Sorry!! I could not launch the browser on your operating system.&quot;);\n                }\n            }\n        } catch (Exception e) {\n            System.out.println(&quot;Oops!! Something is wrong. &quot; + e.getMessage());\n        }\n    }\n}\n</code></pre>\n<p>I hope to find a solution</p>\n"},{"tags":["java","oop"],"comments":[{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":2,"creation_date":1669557562,"post_id":74590579,"comment_id":131663409,"body_markdown":"*The random values should only range from 1 to 6* Then the ctor you showed is redundant and it can be a regular die with an empty ctor. You want 12 or 12 *pairs*? Either way you can create them in a loop and add to an array or collections","body":"<i>The random values should only range from 1 to 6</i> Then the ctor you showed is redundant and it can be a regular die with an empty ctor. You want 12 or 12 <i>pairs</i>? Either way you can create them in a loop and add to an array or collections"},{"owner":{"account_id":23388162,"reputation":5,"user_id":17505578,"display_name":"qwertyboi"},"score":0,"creation_date":1669560022,"post_id":74590579,"comment_id":131663876,"body_markdown":"@g00se I actually omitted 2 other parameters for clarity. I need the constructors for this code.","body":"@g00se I actually omitted 2 other parameters for clarity. I need the constructors for this code."},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1669561112,"post_id":74590579,"comment_id":131664094,"body_markdown":"Repetitions or not? i.e. would you be OK with say 2 x four sides *twice over*?","body":"Repetitions or not? i.e. would you be OK with say 2 x four sides <i>twice over</i>?"},{"owner":{"account_id":23388162,"reputation":5,"user_id":17505578,"display_name":"qwertyboi"},"score":0,"creation_date":1669564958,"post_id":74590579,"comment_id":131665014,"body_markdown":"Repetitions, yes. Two for every side. So I would have six pair instances of every side, but each instances should also be unique. I&#39;m thinking of putting it in an ArrayList but I&#39;m still not entirely sure what would work best.","body":"Repetitions, yes. Two for every side. So I would have six pair instances of every side, but each instances should also be unique. I&#39;m thinking of putting it in an ArrayList but I&#39;m still not entirely sure what would work best."},{"owner":{"account_id":322981,"reputation":310745,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"score":1,"creation_date":1669578272,"post_id":74590579,"comment_id":131668058,"body_markdown":"This Question is quite confusing. Rewrite for clarity.","body":"This Question is quite confusing. Rewrite for clarity."}],"answers":[{"tags":[],"owner":{"account_id":2698782,"reputation":38625,"user_id":2330053,"display_name":"Idle_Mind"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1669577218,"creation_date":1669577218,"answer_id":74593140,"question_id":74590579,"body_markdown":"Add the numbers 1 to 6, twice to an ArrayList. Now pick a random index from that last and pass that to your Die constructor. Remove that index from the pool so it doesn&#39;t get used again.\r\n\r\nSomething like:\r\n\r\n      public static void main( String [] args) {   \r\n        List&lt;Die&gt; dice = new ArrayList&lt;Die&gt;();\r\n        List&lt;Integer&gt; pool = new ArrayList&lt;Integer&gt;();\r\n        for(int i=1; i&lt;=2; i++) {\r\n          for(int num=1; num&lt;=6; num++) {\r\n            pool.add(num);\r\n          }\r\n        }\r\n    \r\n        while (pool.size() &gt; 0) {\r\n          int index = (int)(Math.random() * pool.size());\r\n          dice.add(new Die(pool.get(index)));\r\n          pool.remove(index);\r\n        }\r\n    \r\n        for(Die d : dice) {\r\n          System.out.println(d.numside);\r\n        }\r\n      }\r\n\r\nMy output:\r\n\r\n    2\r\n    3\r\n    3\r\n    1\r\n    4\r\n    6\r\n    5\r\n    6\r\n    4\r\n    5\r\n    2\r\n    1\r\n\r\nAn alternative approach would be to add the Die instances directly to the Dice arraylist from the nested for loops, then simply pull a random instance from that list and remove it. Same concept as the pool, just depends on whether you need to use and/or keep that random order of Die instances for something else.\r\n","title":"How to Instantiate Classes while passing randomized values from 1 to 6 but each randomized value is passed exactly twice","body":"<p>Add the numbers 1 to 6, twice to an ArrayList. Now pick a random index from that last and pass that to your Die constructor. Remove that index from the pool so it doesn't get used again.</p>\n<p>Something like:</p>\n<pre><code>  public static void main( String [] args) {   \n    List&lt;Die&gt; dice = new ArrayList&lt;Die&gt;();\n    List&lt;Integer&gt; pool = new ArrayList&lt;Integer&gt;();\n    for(int i=1; i&lt;=2; i++) {\n      for(int num=1; num&lt;=6; num++) {\n        pool.add(num);\n      }\n    }\n\n    while (pool.size() &gt; 0) {\n      int index = (int)(Math.random() * pool.size());\n      dice.add(new Die(pool.get(index)));\n      pool.remove(index);\n    }\n\n    for(Die d : dice) {\n      System.out.println(d.numside);\n    }\n  }\n</code></pre>\n<p>My output:</p>\n<pre><code>2\n3\n3\n1\n4\n6\n5\n6\n4\n5\n2\n1\n</code></pre>\n<p>An alternative approach would be to add the Die instances directly to the Dice arraylist from the nested for loops, then simply pull a random instance from that list and remove it. Same concept as the pool, just depends on whether you need to use and/or keep that random order of Die instances for something else.</p>\n"},{"tags":[],"owner":{"account_id":322981,"reputation":310745,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1669578742,"creation_date":1669578091,"answer_id":74593255,"question_id":74590579,"body_markdown":"Your Question is confused. So I will focus on:\r\n\r\n&gt; pass a random value\r\n&gt; \r\n&gt;…\r\n&gt;\r\n&gt; range from 1 to 6 BUT I need each value from the range to be distributed twice\r\n\r\n# `IntStream`\r\n\r\nYou can use [`IntStream`][1] to generate numbers. \r\n\r\nPut together two streams of 1-6 inclusive. Generate an array from their output. Shuffle that array. Loop that array to get each `int` value. \r\n\r\n```java\r\nint[] oneThruSixTwice = \r\n    IntStream.concat\r\n    (\r\n        IntStream.rangeClosed( 1 , 6 ) ,\r\n        IntStream.rangeClosed( 1 , 6 )\r\n    )\r\n    .toArray() ;\r\nCollections.shuffle( oneThruSixTwice ) ;\r\nfor( int x : oneThruSixTwice )\r\n{\r\n    …\r\n}\r\n```\r\n\r\n\r\n  [1]: https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/stream/IntStream.html\r\n\r\n","title":"How to Instantiate Classes while passing randomized values from 1 to 6 but each randomized value is passed exactly twice","body":"<p>Your Question is confused. So I will focus on:</p>\n<blockquote>\n<p>pass a random value</p>\n<p>…</p>\n<p>range from 1 to 6 BUT I need each value from the range to be distributed twice</p>\n</blockquote>\n<h1><code>IntStream</code></h1>\n<p>You can use <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/stream/IntStream.html\" rel=\"nofollow noreferrer\"><code>IntStream</code></a> to generate numbers.</p>\n<p>Put together two streams of 1-6 inclusive. Generate an array from their output. Shuffle that array. Loop that array to get each <code>int</code> value.</p>\n<pre class=\"lang-java prettyprint-override\"><code>int[] oneThruSixTwice = \n    IntStream.concat\n    (\n        IntStream.rangeClosed( 1 , 6 ) ,\n        IntStream.rangeClosed( 1 , 6 )\n    )\n    .toArray() ;\nCollections.shuffle( oneThruSixTwice ) ;\nfor( int x : oneThruSixTwice )\n{\n    …\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1669646048,"creation_date":1669646048,"answer_id":74602172,"question_id":74590579,"body_markdown":"Building on @Basil Bourque (though note you can&#39;t shuffle an array with `Collections`) you could do:\r\n\r\n        List&lt;Die&gt; dice = IntStream.concat(\r\n                IntStream.rangeClosed(1, 6),\r\n                IntStream.rangeClosed(1, 6))\r\n                    .mapToObj(i -&gt; new Die(i))\r\n                    .collect(Collectors.toList());\r\n        Collections.shuffle(dice);\r\n        dice.stream()\r\n            .forEach(\r\n                die -&gt; System.out.printf(&quot;Die with %d side(s) rolled %d%n&quot;, die.getNumSides(), die.roll()));\r\n\r\n \r\nOn the last run, this gave me:\r\n\r\n    Die with 5 side(s) rolled 4\r\n    Die with 4 side(s) rolled 1\r\n    Die with 6 side(s) rolled 2\r\n    Die with 4 side(s) rolled 3\r\n    Die with 1 side(s) rolled 1\r\n    Die with 3 side(s) rolled 2\r\n    Die with 5 side(s) rolled 5\r\n    Die with 1 side(s) rolled 1\r\n    Die with 3 side(s) rolled 3\r\n    Die with 2 side(s) rolled 2\r\n    Die with 2 side(s) rolled 1\r\n    Die with 6 side(s) rolled 1\r\n\r\n","title":"How to Instantiate Classes while passing randomized values from 1 to 6 but each randomized value is passed exactly twice","body":"<p>Building on @Basil Bourque (though note you can't shuffle an array with <code>Collections</code>) you could do:</p>\n<pre><code>    List&lt;Die&gt; dice = IntStream.concat(\n            IntStream.rangeClosed(1, 6),\n            IntStream.rangeClosed(1, 6))\n                .mapToObj(i -&gt; new Die(i))\n                .collect(Collectors.toList());\n    Collections.shuffle(dice);\n    dice.stream()\n        .forEach(\n            die -&gt; System.out.printf(&quot;Die with %d side(s) rolled %d%n&quot;, die.getNumSides(), die.roll()));\n</code></pre>\n<p>On the last run, this gave me:</p>\n<pre><code>Die with 5 side(s) rolled 4\nDie with 4 side(s) rolled 1\nDie with 6 side(s) rolled 2\nDie with 4 side(s) rolled 3\nDie with 1 side(s) rolled 1\nDie with 3 side(s) rolled 2\nDie with 5 side(s) rolled 5\nDie with 1 side(s) rolled 1\nDie with 3 side(s) rolled 3\nDie with 2 side(s) rolled 2\nDie with 2 side(s) rolled 1\nDie with 6 side(s) rolled 1\n</code></pre>\n"}],"owner":{"account_id":23388162,"reputation":5,"user_id":17505578,"display_name":"qwertyboi"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":42,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"accepted_answer_id":74593140,"answer_count":3,"score":-1,"last_activity_date":1669646048,"creation_date":1669557160,"question_id":74590579,"body_markdown":"I want to create 12 instantiations of a class and pass a random value as its parameter. The random values should only range from 1 to 6 BUT I need each value from the range to be distributed twice among the 12 instances of the class.\r\n\r\n\r\nThe constructor of the Class is as follows:\r\n\r\n``` \r\nDie(int numSide){\r\n    this.numside = numSide;\r\n}\r\n```\r\n\r\nBasically, I want to create 12 instances of dice with 2 of each side, sort of, as a result of a tossing.","title":"How to Instantiate Classes while passing randomized values from 1 to 6 but each randomized value is passed exactly twice","body":"<p>I want to create 12 instantiations of a class and pass a random value as its parameter. The random values should only range from 1 to 6 BUT I need each value from the range to be distributed twice among the 12 instances of the class.</p>\n<p>The constructor of the Class is as follows:</p>\n<pre><code>Die(int numSide){\n    this.numside = numSide;\n}\n</code></pre>\n<p>Basically, I want to create 12 instances of dice with 2 of each side, sort of, as a result of a tossing.</p>\n"},{"tags":["java","string","integer","passwords"],"answers":[{"tags":[],"owner":{"account_id":13015872,"reputation":165,"user_id":9407148,"display_name":"Geoff"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1669393969,"creation_date":1669393969,"answer_id":74575641,"question_id":74575439,"body_markdown":"Assuming the input will always be in the format you provided, you can use [`String.split()`][1] and [`String.substring()`][1] to extract the required information from the input as shown below.\r\n\r\n```\r\nString[] splitName = fullName.split(&quot; &quot;);\r\nString firstName = splitName[0];\r\nString lastName = splitName[1];\r\nString day = bday.split(&quot;-&quot;)[1];\r\n\r\nString username = firstName.substring(0, 2) + lastName.substring(0, 3) + day;\r\n```\r\n\r\n\r\n  [1]: https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html#substring(int,int)","title":"how to input username by getting the half of the first name and half of the last name and the day of the given birthday","body":"<p>Assuming the input will always be in the format you provided, you can use <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html#substring(int,int)\" rel=\"nofollow noreferrer\"><code>String.split()</code></a> and <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html#substring(int,int)\" rel=\"nofollow noreferrer\"><code>String.substring()</code></a> to extract the required information from the input as shown below.</p>\n<pre><code>String[] splitName = fullName.split(&quot; &quot;);\nString firstName = splitName[0];\nString lastName = splitName[1];\nString day = bday.split(&quot;-&quot;)[1];\n\nString username = firstName.substring(0, 2) + lastName.substring(0, 3) + day;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":11122303,"reputation":137,"user_id":9775271,"display_name":"arpitbhatt027"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1669646004,"creation_date":1669396602,"answer_id":74576083,"question_id":74575439,"body_markdown":"You can use this code to achieve the expected result. The name should always be in this format FirstName LastName, otherwise, you may encounter NullPointerException more frequently. There are split and substring methods in the string class. Follow these steps to get started\r\n\r\n1. Full name should be split into two strings, the first is for the first name and another is for the last name, for this we will use the split method which returns String[].\r\n\r\n2. After splitting the full name, the substring method comes into the picture, substring method takes two parameters first and the last index. We can use this method with both strings received by the split method.\r\n\r\n`String[] firstLastName = fullname.split(&quot; &quot;);`\r\n\r\n`System.out.println(&quot;Enter Username: &quot; + firstLastName[0].substring(0, 2) + firstLastName[1].substring(0, 3) + bday.split(&quot;-&quot;)[1]);`\r\n\r\nSyntax\r\n1. `Public String [] split ( String regex, int limit)`\r\n2. `public String substring(int begIndex, int endIndex)`","title":"how to input username by getting the half of the first name and half of the last name and the day of the given birthday","body":"<p>You can use this code to achieve the expected result. The name should always be in this format FirstName LastName, otherwise, you may encounter NullPointerException more frequently. There are split and substring methods in the string class. Follow these steps to get started</p>\n<ol>\n<li><p>Full name should be split into two strings, the first is for the first name and another is for the last name, for this we will use the split method which returns String[].</p>\n</li>\n<li><p>After splitting the full name, the substring method comes into the picture, substring method takes two parameters first and the last index. We can use this method with both strings received by the split method.</p>\n</li>\n</ol>\n<p><code>String[] firstLastName = fullname.split(&quot; &quot;);</code></p>\n<p><code>System.out.println(&quot;Enter Username: &quot; + firstLastName[0].substring(0, 2) + firstLastName[1].substring(0, 3) + bday.split(&quot;-&quot;)[1]);</code></p>\n<p>Syntax</p>\n<ol>\n<li><code>Public String [] split ( String regex, int limit)</code></li>\n<li><code>public String substring(int begIndex, int endIndex)</code></li>\n</ol>\n"}],"owner":{"account_id":26420326,"reputation":1,"user_id":20068089,"display_name":"yui"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":93,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"accepted_answer_id":74575641,"answer_count":2,"score":-1,"last_activity_date":1669646004,"creation_date":1669392789,"question_id":74575439,"body_markdown":"[example of output should be ](https://i.stack.imgur.com/8wLmc.png)\r\n\r\nplease help thank you in advance!!\r\n\r\n\r\nthe output of the code in username should be the 2 letter in firt name and 3 in last name and date number\r\n\r\n\r\n```\r\npublic static void main(String[] args) {\r\n\t\t// TODO Auto-generated method stub\r\n\t\t\r\n\t\tScanner sc = new Scanner(System.in);\r\n\t\r\n\tSystem.out.println(&quot;Enter Fullname:&quot;);\r\n\tString fullname = sc.nextLine();\r\n\tSystem.out.println(&quot;Enter Birthday : &quot;);\r\n\tString bday = sc.nextLine();\r\n\t\r\n\tSystem.out.println(&quot;Your Login Details&quot;);\r\n\tSystem.out.println(&quot;Enter Fullname:&quot; + fullname);\r\n\t\r\n\tSystem.out.println(&quot;Enter Birthday : &quot; + bday);\r\n\tSystem.out.println(&quot;Enter Username: &quot; + );\r\n\t\r\n\t\r\n\r\n\t\r\n\t\r\n\t}\r\n\t}\r\n```\r\n","title":"how to input username by getting the half of the first name and half of the last name and the day of the given birthday","body":"<p><a href=\"https://i.stack.imgur.com/8wLmc.png\" rel=\"nofollow noreferrer\">example of output should be </a></p>\n<p>please help thank you in advance!!</p>\n<p>the output of the code in username should be the 2 letter in firt name and 3 in last name and date number</p>\n<pre><code>public static void main(String[] args) {\n        // TODO Auto-generated method stub\n        \n        Scanner sc = new Scanner(System.in);\n    \n    System.out.println(&quot;Enter Fullname:&quot;);\n    String fullname = sc.nextLine();\n    System.out.println(&quot;Enter Birthday : &quot;);\n    String bday = sc.nextLine();\n    \n    System.out.println(&quot;Your Login Details&quot;);\n    System.out.println(&quot;Enter Fullname:&quot; + fullname);\n    \n    System.out.println(&quot;Enter Birthday : &quot; + bday);\n    System.out.println(&quot;Enter Username: &quot; + );\n    \n    \n\n    \n    \n    }\n    }\n</code></pre>\n"},{"tags":["java","string"],"comments":[{"owner":{"account_id":1924671,"reputation":94541,"user_id":1735406,"accept_rate":95,"display_name":"Maroun"},"score":4,"creation_date":1420660722,"post_id":27827613,"comment_id":44061055,"body_markdown":"[`yourString.split(&quot;\\\\d+&quot;, 1)`](http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#split(java.lang.String,%20int))","body":"<a href=\"http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#split(java.lang.String,%20int)\" rel=\"nofollow noreferrer\"><code>yourString.split(&quot;\\\\d+&quot;, 1)</code></a>"},{"owner":{"account_id":4572577,"reputation":772,"user_id":3711901,"accept_rate":69,"display_name":"Harry"},"score":0,"creation_date":1420660766,"post_id":27827613,"comment_id":44061080,"body_markdown":"That is simply for the integer 1, correct? Is there a way to do it for ANY integer? Or do I need to do that do split() for each 1 through 9?","body":"That is simply for the integer 1, correct? Is there a way to do it for ANY integer? Or do I need to do that do split() for each 1 through 9?"},{"owner":{"account_id":1924671,"reputation":94541,"user_id":1735406,"accept_rate":95,"display_name":"Maroun"},"score":0,"creation_date":1420660787,"post_id":27827613,"comment_id":44061090,"body_markdown":"This is **not** for the integer 1, 1 is the limit. Read the documentation please, this should work for all numbers (`\\d+` regex).","body":"This is <b>not</b> for the integer 1, 1 is the limit. Read the documentation please, this should work for all numbers (<code>\\d+</code> regex)."},{"owner":{"account_id":4728704,"reputation":17022,"user_id":3824919,"display_name":"Tom"},"score":3,"creation_date":1420661248,"post_id":27827613,"comment_id":44061337,"body_markdown":"@MarounMaroun `Read the documentation please` good idea, because it shows, that argument `1` is not a good idea. It should be `2` :P.","body":"@MarounMaroun <code>Read the documentation please</code> good idea, because it shows, that argument <code>1</code> is not a good idea. It should be <code>2</code> :P."},{"owner":{"account_id":1924671,"reputation":94541,"user_id":1735406,"accept_rate":95,"display_name":"Maroun"},"score":1,"creation_date":1420661857,"post_id":27827613,"comment_id":44061645,"body_markdown":"@Tom Indeed. Long time no Java ;)","body":"@Tom Indeed. Long time no Java ;)"}],"answers":[{"tags":[],"owner":{"account_id":3557625,"reputation":198996,"user_id":2970947,"display_name":"Elliott Frisch"},"down_vote_count":0,"up_vote_count":8,"is_accepted":false,"score":8,"last_activity_date":1420660943,"creation_date":1420660943,"answer_id":27827697,"question_id":27827613,"body_markdown":"If I understand your question, you could do it with something like\r\n\r\n\tpublic static void main(String[] args) {\r\n\t\tString line = &quot;Barry&#39;s Restaurant 100 East Main Street&quot;;\r\n\t\tString[] arr = line.split(&quot;\\\\d+&quot;, 2);\r\n\t\tString pt1 = arr[0].trim();\r\n\t\tString pt2 = line.substring(pt1.length() + 1).trim();\r\n\t\tSystem.out.println(pt1);\r\n\t\tSystem.out.println(pt2);\r\n\t}\r\n\r\nOutput is\r\n\r\n    Barry&#39;s Restaurant\r\n    100 East Main Street\r\n","title":"Split string at first occurrence of an integer in a string","body":"<p>If I understand your question, you could do it with something like</p>\n\n<pre><code>public static void main(String[] args) {\n    String line = \"Barry's Restaurant 100 East Main Street\";\n    String[] arr = line.split(\"\\\\d+\", 2);\n    String pt1 = arr[0].trim();\n    String pt2 = line.substring(pt1.length() + 1).trim();\n    System.out.println(pt1);\n    System.out.println(pt2);\n}\n</code></pre>\n\n<p>Output is</p>\n\n<pre><code>Barry's Restaurant\n100 East Main Street\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1077681,"reputation":186,"user_id":1075463,"display_name":"JimW"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1420662561,"creation_date":1420662561,"answer_id":27828086,"question_id":27827613,"body_markdown":"To avoid having to reconstitute the split values you could use an actual regex:\r\n\r\n    String s = &quot;Barry&#39;s Restaurant 100 East Main Street&quot;;\r\n    Matcher matcher = Pattern.compile(&quot;([^\\\\d]+)(.*)&quot;).matcher(s);\r\n    if (matcher.matches()) {\r\n        System.out.println(matcher.group(1).trim());\r\n        System.out.println(matcher.group(2));\r\n    }\r\n\r\n","title":"Split string at first occurrence of an integer in a string","body":"<p>To avoid having to reconstitute the split values you could use an actual regex:</p>\n\n<pre><code>String s = \"Barry's Restaurant 100 East Main Street\";\nMatcher matcher = Pattern.compile(\"([^\\\\d]+)(.*)\").matcher(s);\nif (matcher.matches()) {\n    System.out.println(matcher.group(1).trim());\n    System.out.println(matcher.group(2));\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":12125902,"reputation":29,"user_id":8854768,"display_name":"VAIBHAV SHEERSH"},"down_vote_count":1,"up_vote_count":2,"is_accepted":false,"score":1,"last_activity_date":1519286617,"creation_date":1509346796,"answer_id":47009602,"question_id":27827613,"body_markdown":"    String[] name = &quot;abcd2qwer3yuiop&quot;.split(&quot;\\\\d+&quot;,2);\r\n    System.out.println(name.length); // gives 2\r\n    System.out.println(name[0]);   // gives abcd   -- length=4\r\n    System.out.println(name[1]);   // gives qwer3yuiop  -- length=10","title":"Split string at first occurrence of an integer in a string","body":"<pre><code>String[] name = \"abcd2qwer3yuiop\".split(\"\\\\d+\",2);\nSystem.out.println(name.length); // gives 2\nSystem.out.println(name[0]);   // gives abcd   -- length=4\nSystem.out.println(name[1]);   // gives qwer3yuiop  -- length=10\n</code></pre>\n"},{"tags":[],"owner":{"account_id":60737,"reputation":15904,"user_id":181336,"display_name":"Adriaan Koster"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1669645938,"creation_date":1669645938,"answer_id":74602150,"question_id":27827613,"body_markdown":"A simpler way to split the string without having to re-add the delimiter is to use a regex [look around][1]:\r\n\r\n    String input = &quot;Barry&#39;s Restaurant 100 East Main Street&quot;;\r\n    String[] result = input.split(&quot;(?=\\\\d+)&quot;, 2);\r\n    System.out.println(name[0]);\r\n    System.out.println(name[1]);\r\n\r\nOutput:\r\n\r\n    Barry&#39;s Restaurant \r\n    100 East Main Street\r\n\r\n(there&#39;s still a space at the end of Barry&#39;s Restaurant)\r\n\r\n  [1]: https://www.rexegg.com/regex-lookarounds.html","title":"Split string at first occurrence of an integer in a string","body":"<p>A simpler way to split the string without having to re-add the delimiter is to use a regex <a href=\"https://www.rexegg.com/regex-lookarounds.html\" rel=\"nofollow noreferrer\">look around</a>:</p>\n<pre><code>String input = &quot;Barry's Restaurant 100 East Main Street&quot;;\nString[] result = input.split(&quot;(?=\\\\d+)&quot;, 2);\nSystem.out.println(name[0]);\nSystem.out.println(name[1]);\n</code></pre>\n<p>Output:</p>\n<pre><code>Barry's Restaurant \n100 East Main Street\n</code></pre>\n<p>(there's still a space at the end of Barry's Restaurant)</p>\n"}],"owner":{"account_id":4572577,"reputation":772,"user_id":3711901,"accept_rate":69,"display_name":"Harry"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":5530,"favorite_count":0,"down_vote_count":0,"up_vote_count":5,"answer_count":4,"score":5,"last_activity_date":1669645938,"creation_date":1420660664,"question_id":27827613,"body_markdown":"I have a bunch of Strings in this format:\r\n\r\n    Barry&#39;s Restaurant 100 East Main Street\r\n\r\nAnd I want to split the string into two parts:\r\n\r\n    Barry&#39;s Restaurant \r\n    100 East Main Street\r\n\r\nSo, I need to split the string at the first occurrence of an integer (the street address). Any help is appreciated, thanks","title":"Split string at first occurrence of an integer in a string","body":"<p>I have a bunch of Strings in this format:</p>\n\n<pre><code>Barry's Restaurant 100 East Main Street\n</code></pre>\n\n<p>And I want to split the string into two parts:</p>\n\n<pre><code>Barry's Restaurant \n100 East Main Street\n</code></pre>\n\n<p>So, I need to split the string at the first occurrence of an integer (the street address). Any help is appreciated, thanks</p>\n"},{"tags":["java","selenium","xpath","xpath-2.0","xpath-1.0"],"comments":[{"owner":{"account_id":11380920,"reputation":8254,"user_id":8343843,"display_name":"Alexey R."},"score":0,"creation_date":1669642033,"post_id":74601206,"comment_id":131681558,"body_markdown":"How do you look up them?","body":"How do you look up them?"}],"answers":[{"tags":[],"owner":{"account_id":4261091,"reputation":32684,"user_id":3485434,"accept_rate":97,"display_name":"Prophet"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1669643898,"creation_date":1669642215,"answer_id":74601342,"question_id":74601206,"body_markdown":"The issue is: `starts-with` is available in XPath 1.0 while [`ends-with` was only introduced by XPath 2.0][1] .  \r\nSelenium supports [XPath 1.0 only][2].  \r\nThat&#39;s why `ends-with` will not work with Selenium.  \r\nBut you still can use `contains` with Selenium.  \r\nSo `//div[ends-with(@id,&#39;listbox&#39;)]` can be changed by\r\n```java\r\n&quot;//div[contains(@id,&#39;listbox&#39;)]&quot;\r\n```\r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/22436789/xpath-ends-with-does-not-work\r\n  [2]: https://stackoverflow.com/questions/1936301/can-i-use-xpath-2-0-with-firefox-and-selenium","title":"Xpath ends-with expression does not work while starts-with does","body":"<p>The issue is: <code>starts-with</code> is available in XPath 1.0 while <a href=\"https://stackoverflow.com/questions/22436789/xpath-ends-with-does-not-work\"><code>ends-with</code> was only introduced by XPath 2.0</a> .<br />\nSelenium supports <a href=\"https://stackoverflow.com/questions/1936301/can-i-use-xpath-2-0-with-firefox-and-selenium\">XPath 1.0 only</a>.<br />\nThat's why <code>ends-with</code> will not work with Selenium.<br />\nBut you still can use <code>contains</code> with Selenium.<br />\nSo <code>//div[ends-with(@id,'listbox')]</code> can be changed by</p>\n<pre class=\"lang-java prettyprint-override\"><code>&quot;//div[contains(@id,'listbox')]&quot;\n</code></pre>\n"}],"owner":{"account_id":17191948,"reputation":53,"user_id":12445565,"display_name":"Karol Odwald"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":677,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"closed_date":1669645701,"accepted_answer_id":74601342,"answer_count":1,"score":1,"last_activity_date":1669645901,"creation_date":1669641603,"question_id":74601206,"body_markdown":"I&#39;m looking for some hint how to use xpath &quot;ends-with&quot; expression. I&#39;ve got such element to find:\r\n\r\n    &lt;div class=&quot;osaiowrhg29875n345&quot; id=&quot;react-select-4-listbox&quot;&gt;\r\n\r\nPrevious selector I used was: \r\n\r\n    //div[starts-with(@id,&#39;react-select-4&#39;)]\r\n\r\nand its working properly but there are more of such elements and the number is changing so I wanted to catch only the ending of this ID using\r\n\r\n    //div[ends-with(@id,&#39;listbox&#39;)]\r\n\r\nWhy its not working for me?","title":"Xpath ends-with expression does not work while starts-with does","body":"<p>I'm looking for some hint how to use xpath &quot;ends-with&quot; expression. I've got such element to find:</p>\n<pre><code>&lt;div class=&quot;osaiowrhg29875n345&quot; id=&quot;react-select-4-listbox&quot;&gt;\n</code></pre>\n<p>Previous selector I used was:</p>\n<pre><code>//div[starts-with(@id,'react-select-4')]\n</code></pre>\n<p>and its working properly but there are more of such elements and the number is changing so I wanted to catch only the ending of this ID using</p>\n<pre><code>//div[ends-with(@id,'listbox')]\n</code></pre>\n<p>Why its not working for me?</p>\n"},{"tags":["java","spring","maven","tomcat","jenkins"],"answers":[{"tags":[],"owner":{"account_id":2162777,"reputation":4478,"user_id":4536811,"display_name":"Mickael"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1530869211,"creation_date":1530869211,"answer_id":51207195,"question_id":51207003,"body_markdown":"According to **[Spring Boot documentation][1]** :\r\n\r\n&gt; **Spring Boot uses a very particular PropertySource order that is designed to allow sensible overriding of values. Properties are\r\n&gt; considered in the following order:**\r\n&gt; \r\n&gt;  1. Devtools global settings properties on your home directory (`~/.spring-boot-devtools.properties` when devtools is active).\r\n&gt;  2. `@TestPropertySource` annotations on your tests.\r\n&gt;  3. @`SpringBootTest#properties` annotation attribute on your tests.\r\n&gt;  4. Command line arguments.\r\n&gt;  5. Properties from `SPRING_APPLICATION_JSON` (inline JSON embedded in an environment variable or system property).\r\n&gt;  6. `ServletConfig` init parameters.\r\n&gt;  7. `ServletContext` init parameters.\r\n&gt;  8. JNDI attributes from `java:comp/env`.\r\n&gt;  9. Java System properties (`System.getProperties()`).\r\n&gt;  10. OS environment variables.\r\n&gt;  11. A `RandomValuePropertySource` that has properties only in `random.*`.\r\n&gt;  12. Profile-specific application properties outside of your packaged jar (`application-{profile}.properties` and YAML variants).\r\n&gt;  13. Profile-specific application properties packaged inside your jar (`application-{profile}.properties` and YAML variants).\r\n&gt;  14. Application properties outside of your packaged jar (`application.properties` and YAML variants).\r\n&gt;  15. Application properties packaged inside your jar (`application.properties` and YAML variants).\r\n&gt;  16. `@PropertySource` annotations on your `@Configuration` classes.\r\n&gt;  17. Default properties (specified by setting `SpringApplication.setDefaultProperties`).\r\n\r\n**So your problem is that your command line (4.) can not override the `application.properties` file configuration (13., 14., 15.).**\r\n\r\nIf you want to override the `server.port` property, you need to ensure to respect this order in your configuration.\r\n\r\n  [1]: https://docs.spring.io/spring-boot/docs/current/reference/html/boot-features-external-config.html","title":"maven: can&#39;t override server.port for tomcat server","body":"<p>According to <strong><a href=\"https://docs.spring.io/spring-boot/docs/current/reference/html/boot-features-external-config.html\" rel=\"nofollow noreferrer\">Spring Boot documentation</a></strong> :</p>\n\n<blockquote>\n  <p><strong>Spring Boot uses a very particular PropertySource order that is designed to allow sensible overriding of values. Properties are\n  considered in the following order:</strong></p>\n  \n  <ol>\n  <li>Devtools global settings properties on your home directory (<code>~/.spring-boot-devtools.properties</code> when devtools is active).</li>\n  <li><code>@TestPropertySource</code> annotations on your tests.</li>\n  <li>@<code>SpringBootTest#properties</code> annotation attribute on your tests.</li>\n  <li>Command line arguments.</li>\n  <li>Properties from <code>SPRING_APPLICATION_JSON</code> (inline JSON embedded in an environment variable or system property).</li>\n  <li><code>ServletConfig</code> init parameters.</li>\n  <li><code>ServletContext</code> init parameters.</li>\n  <li>JNDI attributes from <code>java:comp/env</code>.</li>\n  <li>Java System properties (<code>System.getProperties()</code>).</li>\n  <li>OS environment variables.</li>\n  <li>A <code>RandomValuePropertySource</code> that has properties only in <code>random.*</code>.</li>\n  <li>Profile-specific application properties outside of your packaged jar (<code>application-{profile}.properties</code> and YAML variants).</li>\n  <li>Profile-specific application properties packaged inside your jar (<code>application-{profile}.properties</code> and YAML variants).</li>\n  <li>Application properties outside of your packaged jar (<code>application.properties</code> and YAML variants).</li>\n  <li>Application properties packaged inside your jar (<code>application.properties</code> and YAML variants).</li>\n  <li><code>@PropertySource</code> annotations on your <code>@Configuration</code> classes.</li>\n  <li>Default properties (specified by setting <code>SpringApplication.setDefaultProperties</code>).</li>\n  </ol>\n</blockquote>\n\n<p><strong>So your problem is that your command line (4.) can not override the <code>application.properties</code> file configuration (13., 14., 15.).</strong></p>\n\n<p>If you want to override the <code>server.port</code> property, you need to ensure to respect this order in your configuration.</p>\n"}],"owner":{"account_id":10526569,"reputation":1677,"user_id":7757415,"display_name":"Ali Yılmaz"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1519,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"accepted_answer_id":51207195,"answer_count":1,"score":3,"last_activity_date":1669645422,"creation_date":1530868636,"question_id":51207003,"body_markdown":"I am new with Maven/SpringBoot and trying to deploy a repository with different Tomcat Server port.\r\n\r\nBy default, I would be happy to run tomcat on :8080. But today, I wanted to add Jenkins pipelines to my project and I deployed tomcat on :8080 (with jenkins on it) before my spring cloud gateway repository.\r\n\r\nNow, once I try to deploy gateway, compiler obviously says `address :8080 already in use`. \r\n\r\nNow, I want my gateway to deploy Tomcat on another port, (or use already-existing tomcat on :8080 if possible?) so I wanted to deploy it using this command:\r\n\r\n`$ mvn spring-boot:run -Dserver.port=8181`\r\n\r\nHowever, same error based on `:8080` happens to appear:\r\n\r\n&gt; [ERROR] Failed to execute goal\r\n&gt; org.springframework.boot:spring-boot-maven-plugin:1.5.8.RELEASE:run\r\n&gt; (default-cli) on project crw-gateway: An exception occurred while\r\n&gt; running. null: InvocationTargetException: Connector configured to\r\n&gt; listen on port 8080 failed to start.\r\n\r\nI tried putting `server.port=8080` to `application.properties` or `application-dev.properties` files but I cant override it.\r\n\r\nAny ideas? How can I override the port? Is there a possibility that I can use already existing tomcat-server on :8080? \r\n\r\nThank you for your time!\r\n\r\n\r\n\r\nEDIT: I had my configurations under ~/config folder. There, I had `gateway.properties`, which included the line `server.port=8080`. It has overridden the command line interface as the accepted answer asserts. Changing it to 8888 worked.\r\n\r\n","title":"maven: can&#39;t override server.port for tomcat server","body":"<p>I am new with Maven/SpringBoot and trying to deploy a repository with different Tomcat Server port.</p>\n\n<p>By default, I would be happy to run tomcat on :8080. But today, I wanted to add Jenkins pipelines to my project and I deployed tomcat on :8080 (with jenkins on it) before my spring cloud gateway repository.</p>\n\n<p>Now, once I try to deploy gateway, compiler obviously says <code>address :8080 already in use</code>. </p>\n\n<p>Now, I want my gateway to deploy Tomcat on another port, (or use already-existing tomcat on :8080 if possible?) so I wanted to deploy it using this command:</p>\n\n<p><code>$ mvn spring-boot:run -Dserver.port=8181</code></p>\n\n<p>However, same error based on <code>:8080</code> happens to appear:</p>\n\n<blockquote>\n  <p>[ERROR] Failed to execute goal\n  org.springframework.boot:spring-boot-maven-plugin:1.5.8.RELEASE:run\n  (default-cli) on project crw-gateway: An exception occurred while\n  running. null: InvocationTargetException: Connector configured to\n  listen on port 8080 failed to start.</p>\n</blockquote>\n\n<p>I tried putting <code>server.port=8080</code> to <code>application.properties</code> or <code>application-dev.properties</code> files but I cant override it.</p>\n\n<p>Any ideas? How can I override the port? Is there a possibility that I can use already existing tomcat-server on :8080? </p>\n\n<p>Thank you for your time!</p>\n\n<p>EDIT: I had my configurations under ~/config folder. There, I had <code>gateway.properties</code>, which included the line <code>server.port=8080</code>. It has overridden the command line interface as the accepted answer asserts. Changing it to 8888 worked.</p>\n"},{"tags":["java","hibernate","spring-data-jpa","spring-data"],"comments":[{"owner":{"account_id":4688171,"reputation":11056,"user_id":3795036,"accept_rate":88,"display_name":"K.Nicholas"},"score":0,"creation_date":1669660562,"post_id":74602013,"comment_id":131688269,"body_markdown":"Dunno but transactions are not optimizations.","body":"Dunno but transactions are not optimizations."},{"owner":{"account_id":8986732,"reputation":1074,"user_id":6700091,"display_name":"Kamil Bęben"},"score":0,"creation_date":1673462829,"post_id":74602013,"comment_id":132507026,"body_markdown":"Do you have any parent-child relation on the manager? If so, take a look at this (https://docs.jboss.org/hibernate/orm/3.5/reference/en/html/example-parentchild.html)","body":"Do you have any parent-child relation on the manager? If so, take a look at this (<a href=\"https://docs.jboss.org/hibernate/orm/3.5/reference/en/html/example-parentchild.html\" rel=\"nofollow noreferrer\">docs.jboss.org/hibernate/orm/3.5/reference/en/html/&hellip;</a>)"}],"owner":{"account_id":20386730,"reputation":1,"user_id":14955550,"display_name":"enrikko"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":79,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1669645336,"creation_date":1669645336,"question_id":74602013,"body_markdown":"I have an entity, for example Manager and some json field, that contains some list of clients.\r\n\r\n```\r\n@Entity\r\n@TypeDefs({@TypeDef( name = &quot;json&quot;, typeClass = JsonBinaryType.class )})\r\npublic class Manager {\r\n\r\n  @Id\r\n  private String managerId;\r\n\r\n  @Type( type = &quot;json&quot; ) \r\n  @Column( columnDefinition = &quot;jsonb&quot;, name = &quot;json&quot; )\r\n  private SomeJsonDto json;\r\n\r\n  ... \r\n}\r\n\r\n\r\n```\r\nAlso, i have custom class Context, where I got some entities from DB via JpaRepository and map them to the Map.\r\n\r\n```\r\npublic class Context{\r\n  private Map&lt;String, Manager&gt; managersFromDBMap;\r\n}\r\n```\r\nAfter that, I need to create new Manager if not exists and add some client to the list of clients.\r\n\r\nFirst step, I create new Manager, make em.persist(em annotated with PersistanceContext) and put that object in my managersFromDBMap in Context.\r\n\r\nSecond step, I get that manager from managersFromDBMap and add some clients to the list.\r\n\r\n\r\nAll these steps I do in @Transactional method and expect that at the end of transaction I will flush changes and get only 1 insert into DB(new manager with clients). But I see 1 insert(for create manager) and 1 update(for update that manager with clients)\r\n\r\n```\r\nHibernate: insert into manager ...\r\nHibernate: update manager ...\r\n\r\n```\r\nI don&#39;t understand why hibernate makes 2 requests to DB if all my changes were made with 1 entity in 1 transaction. Am I doing something wrong or hibernate will always make 2 requests?\r\n","title":"Unnecessary update by Hibernate","body":"<p>I have an entity, for example Manager and some json field, that contains some list of clients.</p>\n<pre><code>@Entity\n@TypeDefs({@TypeDef( name = &quot;json&quot;, typeClass = JsonBinaryType.class )})\npublic class Manager {\n\n  @Id\n  private String managerId;\n\n  @Type( type = &quot;json&quot; ) \n  @Column( columnDefinition = &quot;jsonb&quot;, name = &quot;json&quot; )\n  private SomeJsonDto json;\n\n  ... \n}\n\n\n</code></pre>\n<p>Also, i have custom class Context, where I got some entities from DB via JpaRepository and map them to the Map.</p>\n<pre><code>public class Context{\n  private Map&lt;String, Manager&gt; managersFromDBMap;\n}\n</code></pre>\n<p>After that, I need to create new Manager if not exists and add some client to the list of clients.</p>\n<p>First step, I create new Manager, make em.persist(em annotated with PersistanceContext) and put that object in my managersFromDBMap in Context.</p>\n<p>Second step, I get that manager from managersFromDBMap and add some clients to the list.</p>\n<p>All these steps I do in @Transactional method and expect that at the end of transaction I will flush changes and get only 1 insert into DB(new manager with clients). But I see 1 insert(for create manager) and 1 update(for update that manager with clients)</p>\n<pre><code>Hibernate: insert into manager ...\nHibernate: update manager ...\n\n</code></pre>\n<p>I don't understand why hibernate makes 2 requests to DB if all my changes were made with 1 entity in 1 transaction. Am I doing something wrong or hibernate will always make 2 requests?</p>\n"},{"tags":["java","oop","polymorphism"],"comments":[{"owner":{"account_id":74704,"reputation":11534,"user_id":214525,"accept_rate":100,"display_name":"f1sh"},"score":1,"creation_date":1669640686,"post_id":74600966,"comment_id":131681109,"body_markdown":"You could make an interface and let the subclasses implement that. Then you only need `if (object instanceof ThatInterface)`. Or you could use reflection to simply call `func`, but that&#39;s just a blunt instrument instead of solving a design issue.","body":"You could make an interface and let the subclasses implement that. Then you only need <code>if (object instanceof ThatInterface)</code>. Or you could use reflection to simply call <code>func</code>, but that&#39;s just a blunt instrument instead of solving a design issue."},{"owner":{"account_id":1984198,"reputation":407,"user_id":1779973,"accept_rate":55,"display_name":"Ido"},"score":0,"creation_date":1669640848,"post_id":74600966,"comment_id":131681179,"body_markdown":"@f1sh Thanks! That will surely help me avoid too many if-statements. Is there also a way to avoid the casting and the `instanceof` keyword?","body":"@f1sh Thanks! That will surely help me avoid too many if-statements. Is there also a way to avoid the casting and the <code>instanceof</code> keyword?"},{"owner":{"account_id":740820,"reputation":47963,"user_id":2353911,"accept_rate":100,"display_name":"Mena"},"score":0,"creation_date":1669643157,"post_id":74600966,"comment_id":131681974,"body_markdown":"Why not just invoke an abstract method of `Root`, whose implementation is (and must be) defined in concrete child classes?","body":"Why not just invoke an abstract method of <code>Root</code>, whose implementation is (and must be) defined in concrete child classes?"},{"owner":{"account_id":1984198,"reputation":407,"user_id":1779973,"accept_rate":55,"display_name":"Ido"},"score":0,"creation_date":1669643318,"post_id":74600966,"comment_id":131682029,"body_markdown":"Because the abstract method does not exist currently in `Root`, and I can&#39;t add it.","body":"Because the abstract method does not exist currently in <code>Root</code>, and I can&#39;t add it."},{"owner":{"account_id":740820,"reputation":47963,"user_id":2353911,"accept_rate":100,"display_name":"Mena"},"score":0,"creation_date":1669643979,"post_id":74600966,"comment_id":131682313,"body_markdown":"My bad, didn&#39;t read the question well enough.","body":"My bad, didn&#39;t read the question well enough."}],"answers":[{"tags":[],"owner":{"account_id":10036927,"reputation":28,"user_id":7421178,"display_name":"Brahim B."},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1669645096,"creation_date":1669645096,"answer_id":74601954,"question_id":74600966,"body_markdown":"You could create your own Root class.\r\n\r\n````\r\npublic class MyRoot extends Root{\r\n     public void func(){}\r\n}\r\n````\r\nAnd make classes A, B and C extends MyRoot instead of Root","title":"Achieve polymorphism without touching the base class","body":"<p>You could create your own Root class.</p>\n<pre><code>public class MyRoot extends Root{\n     public void func(){}\n}\n</code></pre>\n<p>And make classes A, B and C extends MyRoot instead of Root</p>\n"}],"owner":{"account_id":1984198,"reputation":407,"user_id":1779973,"accept_rate":55,"display_name":"Ido"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":39,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":74601954,"answer_count":1,"score":0,"last_activity_date":1669645096,"creation_date":1669640475,"question_id":74600966,"body_markdown":"I have the following class hierarchy:\r\n\r\n\tpublic abstract class Root {\r\n\t\t...\r\n\t}\r\n\r\n\tpublic class A extends Root {\r\n\t\t...\r\n\t}\r\n\r\n\tpublic class B extends Root {\r\n\t\t...\r\n\t}\r\n\r\n\tpublic class C extends Root {\r\n\t\t...\r\n\t}\r\n\r\nI want to apply a function `func` on objects of static-type `Root`, so that the behavior of the function will be dependent on the specific dynamic-type.\r\n\r\nSo obviously I can accomplish it using polymorphism. I could create an abstract function inside `Root` and implement it differently in every class that extends `Root`.\r\n\r\nHowever, what if the code of `Root` is inaccessible and I can&#39;t edit it? The only solution I could think of is to implement `func` inside `A`, `B` and `C` separately, and then do something like this:\r\n\r\n\tpublic static void applyFuncOnRootObject(Root object) {\r\n\t\tif (object instanceof A) {\r\n\t\t\t((A) object).func()\r\n\t\t} else if (object instanceof B) {\r\n\t\t\t...\r\n\t\t}\r\n\t\t...\r\n\t}\r\n\r\nIs there a better solution that avoids the ugly casting and if-statements?\r\n","title":"Achieve polymorphism without touching the base class","body":"<p>I have the following class hierarchy:</p>\n<pre><code>public abstract class Root {\n    ...\n}\n\npublic class A extends Root {\n    ...\n}\n\npublic class B extends Root {\n    ...\n}\n\npublic class C extends Root {\n    ...\n}\n</code></pre>\n<p>I want to apply a function <code>func</code> on objects of static-type <code>Root</code>, so that the behavior of the function will be dependent on the specific dynamic-type.</p>\n<p>So obviously I can accomplish it using polymorphism. I could create an abstract function inside <code>Root</code> and implement it differently in every class that extends <code>Root</code>.</p>\n<p>However, what if the code of <code>Root</code> is inaccessible and I can't edit it? The only solution I could think of is to implement <code>func</code> inside <code>A</code>, <code>B</code> and <code>C</code> separately, and then do something like this:</p>\n<pre><code>public static void applyFuncOnRootObject(Root object) {\n    if (object instanceof A) {\n        ((A) object).func()\n    } else if (object instanceof B) {\n        ...\n    }\n    ...\n}\n</code></pre>\n<p>Is there a better solution that avoids the ugly casting and if-statements?</p>\n"},{"tags":["java","spring-boot","spring-kafka"],"comments":[{"owner":{"account_id":3273937,"reputation":114855,"user_id":2756547,"accept_rate":75,"display_name":"Artem Bilan"},"score":0,"creation_date":1597929935,"post_id":63501628,"comment_id":112297306,"body_markdown":"Probably you use Spring Boot. Please, extend your question with more info. Vanilla Spring Kafka does not create `KafkaTemplate` as a bean automatically. There is just no convention in the framework. That&#39;s already a Spring Boot matter.","body":"Probably you use Spring Boot. Please, extend your question with more info. Vanilla Spring Kafka does not create <code>KafkaTemplate</code> as a bean automatically. There is just no convention in the framework. That&#39;s already a Spring Boot matter."},{"owner":{"account_id":2073172,"reputation":650,"user_id":1847187,"accept_rate":57,"display_name":"Andi"},"score":0,"creation_date":1597939340,"post_id":63501628,"comment_id":112302640,"body_markdown":"@ArtemBilan Yes you&#39;re right, thanks! I edited the question accordingly.","body":"@ArtemBilan Yes you&#39;re right, thanks! I edited the question accordingly."}],"answers":[{"tags":[],"owner":{"account_id":3273937,"reputation":114855,"user_id":2756547,"accept_rate":75,"display_name":"Artem Bilan"},"down_vote_count":0,"up_vote_count":4,"is_accepted":true,"score":4,"last_activity_date":1669645014,"creation_date":1597940093,"answer_id":63509181,"question_id":63501628,"body_markdown":"With Spring Boot you even don&#39;t need to create a `ProducerFactory` bean. The auto-configuration takes care about that for you: https://docs.spring.io/spring-boot/docs/current/reference/html/messaging.html#messaging.kafka\r\n\r\nSee also a `KafkaProperties.Producer` for more info how to provide serializers via configuration properties.\r\n\r\nGenerics are not taken into account when you inject a bean: if its root type match, then you are good to go. There is no any generics at runtime anyway - type erasure in Java.\r\n\r\nYou probably just confused by the IDE representation. And since those beans are not declared in your project, it doesn&#39;t see them from classpath where they are presented by Spring Boot at runtime.","title":"Why explictly define KafkaTemplate beans?","body":"<p>With Spring Boot you even don't need to create a <code>ProducerFactory</code> bean. The auto-configuration takes care about that for you: <a href=\"https://docs.spring.io/spring-boot/docs/current/reference/html/messaging.html#messaging.kafka\" rel=\"nofollow noreferrer\">https://docs.spring.io/spring-boot/docs/current/reference/html/messaging.html#messaging.kafka</a></p>\n<p>See also a <code>KafkaProperties.Producer</code> for more info how to provide serializers via configuration properties.</p>\n<p>Generics are not taken into account when you inject a bean: if its root type match, then you are good to go. There is no any generics at runtime anyway - type erasure in Java.</p>\n<p>You probably just confused by the IDE representation. And since those beans are not declared in your project, it doesn't see them from classpath where they are presented by Spring Boot at runtime.</p>\n"}],"owner":{"account_id":2073172,"reputation":650,"user_id":1847187,"accept_rate":57,"display_name":"Andi"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":3220,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"accepted_answer_id":63509181,"answer_count":1,"score":4,"last_activity_date":1669645014,"creation_date":1597913767,"question_id":63501628,"body_markdown":"The [Spring Kafka reference documentation][1] suggest to create the beans for Kafka templates explicitly. I&#39;m using spring-boot-starter 2.3.3 and spring-kafka 2.5.5 and I noticed that you can just create a producer factory with a wildcard type and the Kafka template beans are created automatically. The downside of this approach is that the IDE can no longer correctly evaluate whether an @Autowired Kafka template bean actually exists. The advantage is less configuration when you use a lot of different value types in Kafka templates.\r\n\r\nAre there any other reasons I should define these beans explicitly?\r\n\r\n\r\n```\r\n    // In a @Configuration class\r\n\r\n    // Variant: Just define a wildcard producer\r\n\t@Bean\r\n\tpublic ProducerFactory&lt;String, ?&gt; wildcardProducerFactory(){\r\n\t\treturn new DefaultKafkaProducerFactory&lt;&gt;(config, new StringSerializer(), new JsonSerializer&lt;&gt;());\r\n\t}\r\n\r\n    // Variant: Define specific producer and template\r\n\t@Bean\r\n\tpublic ProducerFactory&lt;String, Foo&gt; fooProducerFactory(){\r\n\t\treturn new DefaultKafkaProducerFactory(config, new StringSerializer(), new JsonSerializer());\r\n\t}\r\n\r\n\t@Bean\r\n\tpublic KafkaTemplate&lt;String, Foo&gt; fooKafkaTemplate(){\r\n\t\treturn new KafkaTemplate&lt;&gt;(fooProducerFactory());\r\n\t}\r\n```\r\n```\r\n\r\n    // Somewhere in a @Component class \r\n    // Usage here is the same for both variants\r\n\t@Autowired\r\n\tprivate KafkaTemplate&lt;String, Foo&gt; fooKafkaTemplate;\r\n```\r\n\r\n\r\n  [1]: https://docs.spring.io/spring-kafka/docs/2.3.0.RELEASE/reference/html/#sending-messages","title":"Why explictly define KafkaTemplate beans?","body":"<p>The <a href=\"https://docs.spring.io/spring-kafka/docs/2.3.0.RELEASE/reference/html/#sending-messages\" rel=\"nofollow noreferrer\">Spring Kafka reference documentation</a> suggest to create the beans for Kafka templates explicitly. I'm using spring-boot-starter 2.3.3 and spring-kafka 2.5.5 and I noticed that you can just create a producer factory with a wildcard type and the Kafka template beans are created automatically. The downside of this approach is that the IDE can no longer correctly evaluate whether an @Autowired Kafka template bean actually exists. The advantage is less configuration when you use a lot of different value types in Kafka templates.</p>\n<p>Are there any other reasons I should define these beans explicitly?</p>\n<pre><code>    // In a @Configuration class\n\n    // Variant: Just define a wildcard producer\n    @Bean\n    public ProducerFactory&lt;String, ?&gt; wildcardProducerFactory(){\n        return new DefaultKafkaProducerFactory&lt;&gt;(config, new StringSerializer(), new JsonSerializer&lt;&gt;());\n    }\n\n    // Variant: Define specific producer and template\n    @Bean\n    public ProducerFactory&lt;String, Foo&gt; fooProducerFactory(){\n        return new DefaultKafkaProducerFactory(config, new StringSerializer(), new JsonSerializer());\n    }\n\n    @Bean\n    public KafkaTemplate&lt;String, Foo&gt; fooKafkaTemplate(){\n        return new KafkaTemplate&lt;&gt;(fooProducerFactory());\n    }\n</code></pre>\n<pre><code>\n    // Somewhere in a @Component class \n    // Usage here is the same for both variants\n    @Autowired\n    private KafkaTemplate&lt;String, Foo&gt; fooKafkaTemplate;\n</code></pre>\n"},{"tags":["java","android","arduino","bluetooth"],"comments":[{"owner":{"account_id":11125108,"reputation":5965,"user_id":8166854,"display_name":"Michael Fehr"},"score":0,"creation_date":1669620030,"post_id":74596329,"comment_id":131674592,"body_markdown":"When a program crashes there is usually a log that gives you the information where in your code and why it crashes. Talking about Bluetooth crashes on old (GitHub) repositories/examples - in most times the reason is a missing permission handling. On modern Android SDKs we have new permissions AND you need to grant additional runtime permissions, so without code and log from your side it is impossible to help you, sorry.","body":"When a program crashes there is usually a log that gives you the information where in your code and why it crashes. Talking about Bluetooth crashes on old (GitHub) repositories/examples - in most times the reason is a missing permission handling. On modern Android SDKs we have new permissions AND you need to grant additional runtime permissions, so without code and log from your side it is impossible to help you, sorry."},{"owner":{"account_id":25990762,"reputation":1,"user_id":19702977,"display_name":"Winter Phoenix Forest Kirin"},"score":0,"creation_date":1669646028,"post_id":74596329,"comment_id":131683041,"body_markdown":"If you follow the link I provided, the code is there. Except I added the permission check mandated by Android Studio. It is basically just &quot;BLUETOOTH_CONNECT&quot;. This is for my second version. \nIn my first, one method was deprecated and I replaced it with a newer one. And in addition to checking for permissions, I put in something that asked it as well.\nWhere do I get access to this &quot;error log&quot;? Also, do you want me to copy and paste all those lines of code from the project?","body":"If you follow the link I provided, the code is there. Except I added the permission check mandated by Android Studio. It is basically just &quot;BLUETOOTH_CONNECT&quot;. This is for my second version.  In my first, one method was deprecated and I replaced it with a newer one. And in addition to checking for permissions, I put in something that asked it as well. Where do I get access to this &quot;error log&quot;? Also, do you want me to copy and paste all those lines of code from the project?"},{"owner":{"account_id":11125108,"reputation":5965,"user_id":8166854,"display_name":"Michael Fehr"},"score":0,"creation_date":1669682979,"post_id":74596329,"comment_id":131693616,"body_markdown":"Depending on your target/develop SDK you may use some more permissions, I used &quot;BLUETOOTH, BLUETOOTH_ADMIN, BLUETOOTH_SCAN, BLUETOOTH_ADVERTISE, BLUETOOTH_CONNECT and ACCESS_FINE_LOCATION&quot; in my own projects. Please do not forget to grant runtime permissions (programmatically or on in your device&#39;s settings/Apps/&lt;YourApp&gt; &quot;permissions&quot;. And yes, if you want to get help edit your post and provide the log files (in Android Studio there is the &quot;Logcat&quot; tab at the bottom of the window.","body":"Depending on your target/develop SDK you may use some more permissions, I used &quot;BLUETOOTH, BLUETOOTH_ADMIN, BLUETOOTH_SCAN, BLUETOOTH_ADVERTISE, BLUETOOTH_CONNECT and ACCESS_FINE_LOCATION&quot; in my own projects. Please do not forget to grant runtime permissions (programmatically or on in your device&#39;s settings/Apps/&lt;YourApp&gt; &quot;permissions&quot;. And yes, if you want to get help edit your post and provide the log files (in Android Studio there is the &quot;Logcat&quot; tab at the bottom of the window."}],"owner":{"account_id":25990762,"reputation":1,"user_id":19702977,"display_name":"Winter Phoenix Forest Kirin"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":42,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1669644961,"creation_date":1669613152,"question_id":74596329,"body_markdown":"I tried to build a Bluetooth Chat App. It was based on this: https://github.com/qaifikhan/AndroidTutorials/commit/d9f111fb65f41d6a51d9480af3a2c33b8f6b935c#diff-dc0a33f816ee9dce6a6cfa95ff3f940a9ffe3f1972c87c49263f4a62fbbcab2d . However, it crashes every time I try to click to pair it with another device, and it doesn&#39;t register receiving texts, although this (https://www.youtube.com/watch?v=7FKzZjU34hI) seems to show it working ... any ideas as to what is wrong? I have been teaching myself all this, and it is rather difficult.\r\n\r\nI wanted to build a device, with Arduino program, that would transmit a sensor reading to a phone and display that numerical value (ex: 92%) on the screen of an app on Android. A button on the app would trigger the device to start and stop sending the reading incrementally. So, I thought building a Bluetooth Chat app would be the way to go. I tried on version where I made slight alterations to the model, and when that didn&#39;t work, I copy and pasted most of the Activities from the source. But it crashes on both of my phones when I go to actually link and send messages.","title":"Bluetooth Chat App crashes, various issues","body":"<p>I tried to build a Bluetooth Chat App. It was based on this: <a href=\"https://github.com/qaifikhan/AndroidTutorials/commit/d9f111fb65f41d6a51d9480af3a2c33b8f6b935c#diff-dc0a33f816ee9dce6a6cfa95ff3f940a9ffe3f1972c87c49263f4a62fbbcab2d\" rel=\"nofollow noreferrer\">https://github.com/qaifikhan/AndroidTutorials/commit/d9f111fb65f41d6a51d9480af3a2c33b8f6b935c#diff-dc0a33f816ee9dce6a6cfa95ff3f940a9ffe3f1972c87c49263f4a62fbbcab2d</a> . However, it crashes every time I try to click to pair it with another device, and it doesn't register receiving texts, although this (<a href=\"https://www.youtube.com/watch?v=7FKzZjU34hI\" rel=\"nofollow noreferrer\">https://www.youtube.com/watch?v=7FKzZjU34hI</a>) seems to show it working ... any ideas as to what is wrong? I have been teaching myself all this, and it is rather difficult.</p>\n<p>I wanted to build a device, with Arduino program, that would transmit a sensor reading to a phone and display that numerical value (ex: 92%) on the screen of an app on Android. A button on the app would trigger the device to start and stop sending the reading incrementally. So, I thought building a Bluetooth Chat app would be the way to go. I tried on version where I made slight alterations to the model, and when that didn't work, I copy and pasted most of the Activities from the source. But it crashes on both of my phones when I go to actually link and send messages.</p>\n"},{"tags":["java","rtf","apache-tika"],"comments":[{"owner":{"account_id":350017,"reputation":47555,"user_id":685641,"display_name":"Gagravarr"},"score":0,"creation_date":1669657744,"post_id":74601651,"comment_id":131687335,"body_markdown":"Try asking Apache Tika for the XHTML version of the file, instead of the Plain Text version you&#39;re doing now?","body":"Try asking Apache Tika for the XHTML version of the file, instead of the Plain Text version you&#39;re doing now?"},{"owner":{"account_id":24795302,"reputation":1,"user_id":18678067,"display_name":"bricked"},"score":0,"creation_date":1669718683,"post_id":74601651,"comment_id":131701293,"body_markdown":"When I create XHTML from RTF, the list is still defined as an unordered list instead of an ordered one.","body":"When I create XHTML from RTF, the list is still defined as an unordered list instead of an ordered one."},{"owner":{"account_id":350017,"reputation":47555,"user_id":685641,"display_name":"Gagravarr"},"score":0,"creation_date":1669719150,"post_id":74601651,"comment_id":131701470,"body_markdown":"Sounds like a bug - https://issues.apache.org/jira/projects/TIKA/summary is the place to report them","body":"Sounds like a bug - <a href=\"https://issues.apache.org/jira/projects/TIKA/summary\" rel=\"nofollow noreferrer\">issues.apache.org/jira/projects/TIKA/summary</a> is the place to report them"}],"owner":{"account_id":24795302,"reputation":1,"user_id":18678067,"display_name":"bricked"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":135,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1669644649,"creation_date":1669643671,"question_id":74601651,"body_markdown":"I&#39;m trying to parse RTF file to plain text using Tika.\r\n \r\nWhen I&#39;m trying to parse .rtf file with ordered list items, the parser replaces numbers of list items with whitespace.\r\n\r\nDo you have any tips I could use?\r\n\r\nOriginal text:\r\n\r\n[![Original text][1]][1]\r\n\r\nActual output:\r\n\r\n[![Actual output][2]][2]\r\n\r\nI&#39;m using code below.\r\n\r\n```\r\nInputStream is = new FileInputStream(&quot;files/rtf_auto.rtf&quot;);\r\nAutoDetectParser autoDetectParser = new AutoDetectParser();\r\n\r\nBodyContentHandler contentHandler = new BodyContentHandler();\r\nMetadata metadata = new Metadata();\r\nautoDetectParser.parse(is, contentHandler, metadata, new ParseContext());\r\n\r\nSystem.out.println(contentHandler);\r\n\r\n```\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/zo3iW.png\r\n  [2]: https://i.stack.imgur.com/IN1NR.png","title":"Parse RTF file using Tika won&#39;t parse ordered lists","body":"<p>I'm trying to parse RTF file to plain text using Tika.</p>\n<p>When I'm trying to parse .rtf file with ordered list items, the parser replaces numbers of list items with whitespace.</p>\n<p>Do you have any tips I could use?</p>\n<p>Original text:</p>\n<p><a href=\"https://i.stack.imgur.com/zo3iW.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/zo3iW.png\" alt=\"Original text\" /></a></p>\n<p>Actual output:</p>\n<p><a href=\"https://i.stack.imgur.com/IN1NR.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/IN1NR.png\" alt=\"Actual output\" /></a></p>\n<p>I'm using code below.</p>\n<pre><code>InputStream is = new FileInputStream(&quot;files/rtf_auto.rtf&quot;);\nAutoDetectParser autoDetectParser = new AutoDetectParser();\n\nBodyContentHandler contentHandler = new BodyContentHandler();\nMetadata metadata = new Metadata();\nautoDetectParser.parse(is, contentHandler, metadata, new ParseContext());\n\nSystem.out.println(contentHandler);\n\n</code></pre>\n"},{"tags":["java","tomcat","docker"],"comments":[{"owner":{"account_id":9968459,"reputation":713,"user_id":7375412,"display_name":"TonyY"},"score":2,"creation_date":1510648881,"post_id":47280732,"comment_id":81512510,"body_markdown":"https://stackoverflow.com/questions/15555838/how-to-pass-tomcat-port-number-on-command-line","body":"<a href=\"https://stackoverflow.com/questions/15555838/how-to-pass-tomcat-port-number-on-command-line\" title=\"how to pass tomcat port number on command line\">stackoverflow.com/questions/15555838/&hellip;</a>"},{"owner":{"account_id":9968459,"reputation":713,"user_id":7375412,"display_name":"TonyY"},"score":0,"creation_date":1510649018,"post_id":47280732,"comment_id":81512574,"body_markdown":"Does it fulfill your requirement?","body":"Does it fulfill your requirement?"},{"owner":{"account_id":2507423,"reputation":2211,"user_id":2180697,"accept_rate":72,"display_name":"kaizenCoder"},"score":0,"creation_date":1511073434,"post_id":47280732,"comment_id":81701201,"body_markdown":"Hi @TonyY, yes that&#39;s something I can work with.","body":"Hi @TonyY, yes that&#39;s something I can work with."},{"owner":{"account_id":2507423,"reputation":2211,"user_id":2180697,"accept_rate":72,"display_name":"kaizenCoder"},"score":0,"creation_date":1511389126,"post_id":47280732,"comment_id":81844725,"body_markdown":"The following also helped:\nhttps://stackoverflow.com/questions/1045949/change-tomcat-port-on-the-fly","body":"The following also helped: <a href=\"https://stackoverflow.com/questions/1045949/change-tomcat-port-on-the-fly\" title=\"change tomcat port on the fly\">stackoverflow.com/questions/1045949/&hellip;</a>"}],"owner":{"account_id":2507423,"reputation":2211,"user_id":2180697,"accept_rate":72,"display_name":"kaizenCoder"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":927,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1669644391,"creation_date":1510647391,"question_id":47280732,"body_markdown":"I&#39;m interested to know if you can override HTTP connector [properties][1] like `port`, `protocol`, `scheme` etc. typically set in the `server.xml` file by passing in Catalina environment variables to the JVM at runtime? \r\n\r\nThis is so that I can pass in environment variables to a tomcat Docker application container without having to touch the default `server.xml` file.\r\n\r\nFor example is it enough to set the `-DcatalinaConnectorProxyName` in the `JAVA_OPTS` environment variable at JVM runtime to override the default setting in the `server.xml` file? \r\n\r\n\r\n  [1]: http://tomcat.apache.org/tomcat-7.0-doc/config/http.html","title":"Is it possible to override Tomcat HTTP connector properties in server.xml via JAVA_OPTS?","body":"<p>I'm interested to know if you can override HTTP connector <a href=\"http://tomcat.apache.org/tomcat-7.0-doc/config/http.html\" rel=\"nofollow noreferrer\">properties</a> like <code>port</code>, <code>protocol</code>, <code>scheme</code> etc. typically set in the <code>server.xml</code> file by passing in Catalina environment variables to the JVM at runtime? </p>\n\n<p>This is so that I can pass in environment variables to a tomcat Docker application container without having to touch the default <code>server.xml</code> file.</p>\n\n<p>For example is it enough to set the <code>-DcatalinaConnectorProxyName</code> in the <code>JAVA_OPTS</code> environment variable at JVM runtime to override the default setting in the <code>server.xml</code> file? </p>\n"},{"tags":["java","concurrency","future","executorservice","completable-future"],"comments":[{"owner":{"account_id":8326,"reputation":258545,"user_id":14955,"accept_rate":55,"display_name":"Thilo"},"score":1,"creation_date":1477439732,"post_id":40251528,"comment_id":67765503,"body_markdown":"You can also submit Callables (that return results): https://docs.oracle.com/javase/7/docs/api/java/util/concurrent/Callable.html","body":"You can also submit Callables (that return results): <a href=\"https://docs.oracle.com/javase/7/docs/api/java/util/concurrent/Callable.html\" rel=\"nofollow noreferrer\">docs.oracle.com/javase/7/docs/api/java/util/concurrent/&hellip;</a>"},{"owner":{"account_id":111563,"reputation":13269,"user_id":294657,"accept_rate":85,"display_name":"kaqqao"},"score":2,"creation_date":1477439814,"post_id":40251528,"comment_id":67765520,"body_markdown":"@Thilo Only for one-off tasks, not with scheduleWithFixedDelay or \tscheduleAtFixedRate, so polling is out","body":"@Thilo Only for one-off tasks, not with scheduleWithFixedDelay or \tscheduleAtFixedRate, so polling is out"},{"owner":{"account_id":3647119,"reputation":6259,"user_id":3040064,"accept_rate":59,"display_name":"Jason Hu"},"score":0,"creation_date":1477439849,"post_id":40251528,"comment_id":67765534,"body_markdown":"@Thilo i don&#39;t think `scheduleWithFixedDelay` ever receive a `Callable`.","body":"@Thilo i don&#39;t think <code>scheduleWithFixedDelay</code> ever receive a <code>Callable</code>."},{"owner":{"account_id":3647119,"reputation":6259,"user_id":3040064,"accept_rate":59,"display_name":"Jason Hu"},"score":0,"creation_date":1477439986,"post_id":40251528,"comment_id":67765574,"body_markdown":"Op, i think you are doing the right thing. `CompletableFuture` is in fact a promise in an async programming framework. what you should expose, however, a normal future that is not completable. and all your subsequent code should  subscribe to that future. i don&#39;t see any problem. what confuses you?","body":"Op, i think you are doing the right thing. <code>CompletableFuture</code> is in fact a promise in an async programming framework. what you should expose, however, a normal future that is not completable. and all your subsequent code should  subscribe to that future. i don&#39;t see any problem. what confuses you?"},{"owner":{"account_id":111563,"reputation":13269,"user_id":294657,"accept_rate":85,"display_name":"kaqqao"},"score":0,"creation_date":1477440237,"post_id":40251528,"comment_id":67765612,"body_markdown":"@HuStmpHrrr All examples seem to be doing `supplyAsync` instead of explicitly creating a `CompletableFuture`. But more importantly, in my case I need to shutdown the executor when the future is complete. Should I subclass `CompletableFuture` and override `complete`, `completeExceptionally` and `cancel` to do this? Should I worry about canceling the `ScheduledFuture` I got from executor?","body":"@HuStmpHrrr All examples seem to be doing <code>supplyAsync</code> instead of explicitly creating a <code>CompletableFuture</code>. But more importantly, in my case I need to shutdown the executor when the future is complete. Should I subclass <code>CompletableFuture</code> and override <code>complete</code>, <code>completeExceptionally</code> and <code>cancel</code> to do this? Should I worry about canceling the <code>ScheduledFuture</code> I got from executor?"},{"owner":{"account_id":3647119,"reputation":6259,"user_id":3040064,"accept_rate":59,"display_name":"Jason Hu"},"score":0,"creation_date":1477440710,"post_id":40251528,"comment_id":67765715,"body_markdown":"@kaqqao you should cancel the scheduledFuture. let me answer.","body":"@kaqqao you should cancel the scheduledFuture. let me answer."},{"owner":{"account_id":960456,"reputation":949,"user_id":984929,"accept_rate":50,"display_name":"lincolnadym"},"score":0,"creation_date":1477441282,"post_id":40251528,"comment_id":67765849,"body_markdown":"@kaqqao, if you don&#39;t get an answer, you can have a look at JBJF Daemons Framework on SourceForge, part of the JBJF Project.  I wrote the Daemons Framework more as a pure Daemon/Service though.  It doesn’t use ExecutorService, but instead, just straight Runnable/Thread for the Producers and Consumers.  But you may be able to fit it to your needs…A Producer will implement the polling.  But you’ll need to code it a little differently to turn around and fetch your result from the completed task.","body":"@kaqqao, if you don&#39;t get an answer, you can have a look at JBJF Daemons Framework on SourceForge, part of the JBJF Project.  I wrote the Daemons Framework more as a pure Daemon/Service though.  It doesn’t use ExecutorService, but instead, just straight Runnable/Thread for the Producers and Consumers.  But you may be able to fit it to your needs…A Producer will implement the polling.  But you’ll need to code it a little differently to turn around and fetch your result from the completed task."}],"answers":[{"tags":[],"owner":{"account_id":187570,"reputation":4917,"user_id":425722,"accept_rate":83,"display_name":"Andrew Rueckert"},"down_vote_count":1,"up_vote_count":18,"is_accepted":true,"score":17,"last_activity_date":1634603316,"creation_date":1477441418,"answer_id":40251790,"question_id":40251528,"body_markdown":"I think CompletableFutures are a fine way to do this: \r\n\r\n    ScheduledExecutorService executor = Executors.newSingleThreadScheduledExecutor();\r\n\r\n    private void run() {\r\n        final Object jobResult = pollForCompletion(&quot;jobId1&quot;)\r\n                .thenApply(jobId -&gt; remoteServer.getJobResult(jobId))\r\n                .get();\r\n\r\n    }\r\n\r\n    private CompletableFuture&lt;String&gt; pollForCompletion(final String jobId) {\r\n        CompletableFuture&lt;String&gt; completionFuture = new CompletableFuture&lt;&gt;();\r\n        final ScheduledFuture&lt;Void&gt; checkFuture = executor.scheduleAtFixedRate(() -&gt; {\r\n            if (remoteServer.isJobDone(jobId)) {\r\n                completionFuture.complete(jobId);\r\n            }\r\n        }, 0, 10, TimeUnit.SECONDS);\r\n        completionFuture.whenComplete((result, thrown) -&gt; {\r\n            checkFuture.cancel(true);\r\n        });\r\n        return completionFuture;\r\n    }","title":"How to use ExecutorService to poll until a result arrives","body":"<p>I think CompletableFutures are a fine way to do this:</p>\n<pre><code>ScheduledExecutorService executor = Executors.newSingleThreadScheduledExecutor();\n\nprivate void run() {\n    final Object jobResult = pollForCompletion(&quot;jobId1&quot;)\n            .thenApply(jobId -&gt; remoteServer.getJobResult(jobId))\n            .get();\n\n}\n\nprivate CompletableFuture&lt;String&gt; pollForCompletion(final String jobId) {\n    CompletableFuture&lt;String&gt; completionFuture = new CompletableFuture&lt;&gt;();\n    final ScheduledFuture&lt;Void&gt; checkFuture = executor.scheduleAtFixedRate(() -&gt; {\n        if (remoteServer.isJobDone(jobId)) {\n            completionFuture.complete(jobId);\n        }\n    }, 0, 10, TimeUnit.SECONDS);\n    completionFuture.whenComplete((result, thrown) -&gt; {\n        checkFuture.cancel(true);\n    });\n    return completionFuture;\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3647119,"reputation":6259,"user_id":3040064,"accept_rate":59,"display_name":"Jason Hu"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1477441913,"creation_date":1477441479,"answer_id":40251799,"question_id":40251528,"body_markdown":"it seems to me you are more worried by some stylistic problems than any others. in java 8, `CompletableFuture` has 2 roles: one is the traditional future, which gives an asynchronous source for task execution and status query; the other is what we usually call a promise. a promise, if you don&#39;t know yet, can be considered a builder of future and its completion source. so in this case, intuitively a promise is required, which is the exact case you are using here. the examples you are worrying about is something that introduces you the first usage, but not the promise way.\r\n\r\naccepting this, it should be easier for you to start dealing with your actual problem. i think the promise is supposed to have 2 roles, one is to notify your task completion of polling, and the other is to cancel your scheduled task on completion. here should be the final solution:\r\n\r\n    public CompletableFuture&lt;Object&gt; pollTask(int jobId) {\r\n        CompletableFuture&lt;Object&gt; fut = new CompletableFuture&lt;&gt;();\r\n        ScheduledFuture&lt;?&gt; sfuture = executor.scheduleWithFixedDelay(() -&gt; _poll(jobId, fut), 0, 10, TimeUnit.SECONDS);\r\n        fut.thenAccept(ignore -&gt; sfuture.cancel(false));\r\n        return fut;\r\n    }\r\n    \r\n    private void _poll(int jobId, CompletableFuture&lt;Object&gt; fut) {\r\n        // whatever polls\r\n        if (isDone) {\r\n            fut.complete(yourResult);\r\n        }\r\n    }\r\n\r\n","title":"How to use ExecutorService to poll until a result arrives","body":"<p>it seems to me you are more worried by some stylistic problems than any others. in java 8, <code>CompletableFuture</code> has 2 roles: one is the traditional future, which gives an asynchronous source for task execution and status query; the other is what we usually call a promise. a promise, if you don't know yet, can be considered a builder of future and its completion source. so in this case, intuitively a promise is required, which is the exact case you are using here. the examples you are worrying about is something that introduces you the first usage, but not the promise way.</p>\n\n<p>accepting this, it should be easier for you to start dealing with your actual problem. i think the promise is supposed to have 2 roles, one is to notify your task completion of polling, and the other is to cancel your scheduled task on completion. here should be the final solution:</p>\n\n<pre><code>public CompletableFuture&lt;Object&gt; pollTask(int jobId) {\n    CompletableFuture&lt;Object&gt; fut = new CompletableFuture&lt;&gt;();\n    ScheduledFuture&lt;?&gt; sfuture = executor.scheduleWithFixedDelay(() -&gt; _poll(jobId, fut), 0, 10, TimeUnit.SECONDS);\n    fut.thenAccept(ignore -&gt; sfuture.cancel(false));\n    return fut;\n}\n\nprivate void _poll(int jobId, CompletableFuture&lt;Object&gt; fut) {\n    // whatever polls\n    if (isDone) {\n        fut.complete(yourResult);\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1096470,"reputation":26066,"user_id":1089967,"accept_rate":59,"display_name":"lance-java"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1616712622,"creation_date":1616672933,"answer_id":66798885,"question_id":40251528,"body_markdown":"I created a generic utility for this inspired by [this answer](https://stackoverflow.com/a/40251790/1089967) using `Supplier&lt;Optional&lt;T&gt;&gt;` whereby each poll can return `Optional.empty()` until the value is ready. I also implemented a `timeout` so that a `TimeoutException` is thrown if the max time is exceeded.\r\n\r\nUsage:\r\n```java\r\nScheduledExecutorService scheduledExecutor = Executors.newSingleThreadScheduledExecutor();\r\nSupplier&lt;Optional&lt;String&gt;&gt; supplier = () -&gt; remoteServer.isJobDone(jobId) ? Optional.of(jobId) : Optional.empty();\r\nCompletableFuture&lt;String&gt; future = ScheduledCompletableFuture.builder(String.class)\r\n   .supplier(supplier)\r\n   .executorService(scheduledExecutor)\r\n   .timeUnit(TimeUnit.SECONDS)\r\n   .initialDelay(5)\r\n   .period(5)\r\n   .timeout(60 * 5)\r\n   .build();\r\n```\r\n\r\nScheduledCompletableFuture.java\r\n```java\r\npublic class ScheduledCompletableFuture {\r\n    public static class ScheduledCompletableFutureBuilder&lt;T&gt; {\r\n        private Supplier&lt;Optional&lt;T&gt;&gt; supplier;\r\n        private ScheduledExecutorService executorService;\r\n        private Long initialDelay;\r\n        private Long period;\r\n        private Long timeout;\r\n        private TimeUnit timeUnit;\r\n\r\n        public ScheduledCompletableFutureBuilder() {\r\n        }\r\n\r\n        public ScheduledCompletableFutureBuilder&lt;T&gt; supplier(Supplier&lt;Optional&lt;T&gt;&gt; supplier) {\r\n            this.supplier = supplier;\r\n            return this;\r\n        }\r\n\r\n        public ScheduledCompletableFutureBuilder&lt;T&gt; executorService(ScheduledExecutorService executorService) {\r\n            this.executorService = executorService;\r\n            return this;\r\n        }\r\n\r\n        public ScheduledCompletableFutureBuilder&lt;T&gt; initialDelay(long initialDelay) {\r\n            this.initialDelay = initialDelay;\r\n            return this;\r\n        }\r\n\r\n        public ScheduledCompletableFutureBuilder&lt;T&gt; period(long period) {\r\n            this.period = period;\r\n            return this;\r\n        }\r\n\r\n        public ScheduledCompletableFutureBuilder&lt;T&gt; timeout(long timeout) {\r\n            this.timeout = timeout;\r\n            return this;\r\n        }\r\n\r\n        public ScheduledCompletableFutureBuilder&lt;T&gt; timeUnit(TimeUnit timeUnit) {\r\n            this.timeUnit = timeUnit;\r\n            return this;\r\n        }\r\n\r\n        public CompletableFuture&lt;T&gt; build() {\r\n            // take a copy of instance variables so that the Builder can be re-used\r\n            Supplier&lt;Optional&lt;T&gt;&gt; supplier = this.supplier;\r\n            ScheduledExecutorService executorService = this.executorService;\r\n            Long initialDelay = this.initialDelay;\r\n            Long period = this.period;\r\n            Long timeout = this.timeout;\r\n            TimeUnit timeUnit = this.timeUnit;\r\n\r\n            CompletableFuture&lt;T&gt; completableFuture = new CompletableFuture&lt;&gt;();\r\n            long endMillis = System.currentTimeMillis() + timeUnit.toMillis(timeout);\r\n            Runnable command = () -&gt; {\r\n                Optional&lt;T&gt; optional = supplier.get();\r\n                if (optional.isPresent()) {\r\n                    completableFuture.complete(optional.get());\r\n                } else if (System.currentTimeMillis() &gt; endMillis) {\r\n                    String msg = String.format(&quot;Supplier did not return a value within %s %s&quot;, timeout, timeUnit);\r\n                    completableFuture.completeExceptionally(new TimeoutException(msg));\r\n                }\r\n            };\r\n            ScheduledFuture&lt;?&gt; scheduledFuture = executorService.scheduleAtFixedRate(command, initialDelay, period, timeUnit);\r\n            return completableFuture.whenComplete((result, exception) -&gt; scheduledFuture.cancel(true));\r\n        }\r\n    }\r\n\r\n    public static &lt;T&gt; ScheduledCompletableFutureBuilder&lt;T&gt; builder(Class&lt;T&gt; type) {\r\n        return new ScheduledCompletableFutureBuilder&lt;&gt;();\r\n    }\r\n}\r\n```","title":"How to use ExecutorService to poll until a result arrives","body":"<p>I created a generic utility for this inspired by <a href=\"https://stackoverflow.com/a/40251790/1089967\">this answer</a> using <code>Supplier&lt;Optional&lt;T&gt;&gt;</code> whereby each poll can return <code>Optional.empty()</code> until the value is ready. I also implemented a <code>timeout</code> so that a <code>TimeoutException</code> is thrown if the max time is exceeded.</p>\n<p>Usage:</p>\n<pre class=\"lang-java prettyprint-override\"><code>ScheduledExecutorService scheduledExecutor = Executors.newSingleThreadScheduledExecutor();\nSupplier&lt;Optional&lt;String&gt;&gt; supplier = () -&gt; remoteServer.isJobDone(jobId) ? Optional.of(jobId) : Optional.empty();\nCompletableFuture&lt;String&gt; future = ScheduledCompletableFuture.builder(String.class)\n   .supplier(supplier)\n   .executorService(scheduledExecutor)\n   .timeUnit(TimeUnit.SECONDS)\n   .initialDelay(5)\n   .period(5)\n   .timeout(60 * 5)\n   .build();\n</code></pre>\n<p>ScheduledCompletableFuture.java</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class ScheduledCompletableFuture {\n    public static class ScheduledCompletableFutureBuilder&lt;T&gt; {\n        private Supplier&lt;Optional&lt;T&gt;&gt; supplier;\n        private ScheduledExecutorService executorService;\n        private Long initialDelay;\n        private Long period;\n        private Long timeout;\n        private TimeUnit timeUnit;\n\n        public ScheduledCompletableFutureBuilder() {\n        }\n\n        public ScheduledCompletableFutureBuilder&lt;T&gt; supplier(Supplier&lt;Optional&lt;T&gt;&gt; supplier) {\n            this.supplier = supplier;\n            return this;\n        }\n\n        public ScheduledCompletableFutureBuilder&lt;T&gt; executorService(ScheduledExecutorService executorService) {\n            this.executorService = executorService;\n            return this;\n        }\n\n        public ScheduledCompletableFutureBuilder&lt;T&gt; initialDelay(long initialDelay) {\n            this.initialDelay = initialDelay;\n            return this;\n        }\n\n        public ScheduledCompletableFutureBuilder&lt;T&gt; period(long period) {\n            this.period = period;\n            return this;\n        }\n\n        public ScheduledCompletableFutureBuilder&lt;T&gt; timeout(long timeout) {\n            this.timeout = timeout;\n            return this;\n        }\n\n        public ScheduledCompletableFutureBuilder&lt;T&gt; timeUnit(TimeUnit timeUnit) {\n            this.timeUnit = timeUnit;\n            return this;\n        }\n\n        public CompletableFuture&lt;T&gt; build() {\n            // take a copy of instance variables so that the Builder can be re-used\n            Supplier&lt;Optional&lt;T&gt;&gt; supplier = this.supplier;\n            ScheduledExecutorService executorService = this.executorService;\n            Long initialDelay = this.initialDelay;\n            Long period = this.period;\n            Long timeout = this.timeout;\n            TimeUnit timeUnit = this.timeUnit;\n\n            CompletableFuture&lt;T&gt; completableFuture = new CompletableFuture&lt;&gt;();\n            long endMillis = System.currentTimeMillis() + timeUnit.toMillis(timeout);\n            Runnable command = () -&gt; {\n                Optional&lt;T&gt; optional = supplier.get();\n                if (optional.isPresent()) {\n                    completableFuture.complete(optional.get());\n                } else if (System.currentTimeMillis() &gt; endMillis) {\n                    String msg = String.format(&quot;Supplier did not return a value within %s %s&quot;, timeout, timeUnit);\n                    completableFuture.completeExceptionally(new TimeoutException(msg));\n                }\n            };\n            ScheduledFuture&lt;?&gt; scheduledFuture = executorService.scheduleAtFixedRate(command, initialDelay, period, timeUnit);\n            return completableFuture.whenComplete((result, exception) -&gt; scheduledFuture.cancel(true));\n        }\n    }\n\n    public static &lt;T&gt; ScheduledCompletableFutureBuilder&lt;T&gt; builder(Class&lt;T&gt; type) {\n        return new ScheduledCompletableFutureBuilder&lt;&gt;();\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":111563,"reputation":13269,"user_id":294657,"accept_rate":85,"display_name":"kaqqao"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":10462,"favorite_count":0,"down_vote_count":0,"up_vote_count":20,"accepted_answer_id":40251790,"answer_count":3,"score":20,"last_activity_date":1669643677,"creation_date":1477439281,"question_id":40251528,"body_markdown":"I have a scenario where I have to poll a remote server checking if a task has completed. Once it has, I make a different call to retrieve the result.\r\n\r\nI originally figured I should use a `SingleThreadScheduledExecutor` with `scheduleWithFixedDelay` for polling:\r\n\r\n    ScheduledExecutorService executor = Executors.newSingleThreadScheduledExecutor();\r\n    ScheduledFuture future = executor.scheduleWithFixedDelay(() -&gt; poll(jobId), 0, 10, TimeUnit.SECONDS);\r\n\r\n    public void poll(String jobId) {\r\n       boolean jobDone = remoteServer.isJobDone(jobId);\r\n       if (jobDone) {\r\n           retrieveJobResult(jobId);\r\n       }\r\n    }\r\n\r\nBut since I can only provide a `Runnable` to `scheduleWithFixedDelay` which can&#39;t return anything, I don&#39;t understand when the `future` will be complete, if ever. What does calling `future.get()` even mean? What result am I waiting for?\r\n\r\nThe first time I detect the remote task has completed, I want to execute a different remote call and set its result as the value of the `future`. I figured I could use `CompletableFuture` for this, that I would forward to my `poll` method, which would in turn forward it to my `retrieveTask` method that would eventually complete it:\r\n\r\n    CompletableFuture&lt;Object&gt; result = new CompletableFuture&lt;Object&gt;();\r\n    ScheduledFuture future = executor.scheduleWithFixedDelay(() -&gt; poll(jobId, result), 0, 10, TimeUnit.SECONDS);\r\n\r\n    public void poll(String jobId, CompletableFuture&lt;Object&gt; result) {\r\n       boolean jobDone = remoteServer.isJobDone(jobId);\r\n       if (jobDone) {\r\n           retrieveJobResult(jobId, result);\r\n       }\r\n    }\r\n\r\n    public void retrieveJobResult(String jobId, CompletableFuture&lt;Object&gt; result) {\r\n        Object remoteResult = remoteServer.getJobResult(jobId);\r\n        result.complete(remoteResult);\r\n    }\r\n\r\nBut this has a ton of issues. For one, `CompletableFuture` doesn&#39;t even seem to be intended for this kind of use. Instead I should be doing `CompletableFuture.supplyAsync(() -&gt; poll(jobId))` I think, but how would I then properly shutdown the `executor` and cancel the `future` it returned when my `CompletableFuture` is canceled/complete? It feels like polling should be implemented in some completely different way.","title":"How to use ExecutorService to poll until a result arrives","body":"<p>I have a scenario where I have to poll a remote server checking if a task has completed. Once it has, I make a different call to retrieve the result.</p>\n<p>I originally figured I should use a <code>SingleThreadScheduledExecutor</code> with <code>scheduleWithFixedDelay</code> for polling:</p>\n<pre><code>ScheduledExecutorService executor = Executors.newSingleThreadScheduledExecutor();\nScheduledFuture future = executor.scheduleWithFixedDelay(() -&gt; poll(jobId), 0, 10, TimeUnit.SECONDS);\n\npublic void poll(String jobId) {\n   boolean jobDone = remoteServer.isJobDone(jobId);\n   if (jobDone) {\n       retrieveJobResult(jobId);\n   }\n}\n</code></pre>\n<p>But since I can only provide a <code>Runnable</code> to <code>scheduleWithFixedDelay</code> which can't return anything, I don't understand when the <code>future</code> will be complete, if ever. What does calling <code>future.get()</code> even mean? What result am I waiting for?</p>\n<p>The first time I detect the remote task has completed, I want to execute a different remote call and set its result as the value of the <code>future</code>. I figured I could use <code>CompletableFuture</code> for this, that I would forward to my <code>poll</code> method, which would in turn forward it to my <code>retrieveTask</code> method that would eventually complete it:</p>\n<pre><code>CompletableFuture&lt;Object&gt; result = new CompletableFuture&lt;Object&gt;();\nScheduledFuture future = executor.scheduleWithFixedDelay(() -&gt; poll(jobId, result), 0, 10, TimeUnit.SECONDS);\n\npublic void poll(String jobId, CompletableFuture&lt;Object&gt; result) {\n   boolean jobDone = remoteServer.isJobDone(jobId);\n   if (jobDone) {\n       retrieveJobResult(jobId, result);\n   }\n}\n\npublic void retrieveJobResult(String jobId, CompletableFuture&lt;Object&gt; result) {\n    Object remoteResult = remoteServer.getJobResult(jobId);\n    result.complete(remoteResult);\n}\n</code></pre>\n<p>But this has a ton of issues. For one, <code>CompletableFuture</code> doesn't even seem to be intended for this kind of use. Instead I should be doing <code>CompletableFuture.supplyAsync(() -&gt; poll(jobId))</code> I think, but how would I then properly shutdown the <code>executor</code> and cancel the <code>future</code> it returned when my <code>CompletableFuture</code> is canceled/complete? It feels like polling should be implemented in some completely different way.</p>\n"},{"tags":["java","android","json","android-asynctask"],"comments":[{"owner":{"account_id":1238981,"reputation":132436,"user_id":1202025,"accept_rate":80,"display_name":"ρяσѕρєя K"},"score":0,"creation_date":1387355713,"post_id":20653106,"comment_id":30919016,"body_markdown":"given webservice returning `JSONObject` as root element instead of `JSONArray`","body":"given webservice returning <code>JSONObject</code> as root element instead of <code>JSONArray</code>"},{"owner":{"account_id":2057494,"reputation":5154,"user_id":1834828,"accept_rate":75,"display_name":"Runcorn"},"score":0,"creation_date":1387356797,"post_id":20653106,"comment_id":30919503,"body_markdown":"you could use something like `new org.json.simple.parser.JSONParser().parse(&quot;jsonString&quot;);` to get JsonArray.","body":"you could use something like <code>new org.json.simple.parser.JSONParser().parse(&quot;jsonString&quot;);</code> to get JsonArray."}],"answers":[{"tags":[],"owner":{"account_id":2158928,"reputation":2616,"user_id":1913542,"accept_rate":62,"display_name":"stefana"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1387355740,"creation_date":1387355740,"answer_id":20653151,"question_id":20653106,"body_markdown":"Result is not an array, Message is.","title":"JSON type mismatch or org.json.jsonecxeption","body":"<p>Result is not an array, Message is.</p>\n"},{"tags":[],"owner":{"account_id":2036629,"reputation":3421,"user_id":1818847,"accept_rate":72,"display_name":"Mario Stoilov"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1387355793,"creation_date":1387355793,"answer_id":20653166,"question_id":20653106,"body_markdown":"    Value response of type java.lang.String cannot be converted to JSONArray\r\n\r\nYou are trying to convert a single object into an array.","title":"JSON type mismatch or org.json.jsonecxeption","body":"<pre><code>Value response of type java.lang.String cannot be converted to JSONArray\n</code></pre>\n\n<p>You are trying to convert a single object into an array.</p>\n"},{"tags":[],"owner":{"account_id":2358024,"reputation":3373,"user_id":2065418,"display_name":"Damien R."},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1387355992,"creation_date":1387355992,"answer_id":20653225,"question_id":20653106,"body_markdown":"Try this:\r\n\r\n    Log.i(&quot;result&quot;, result);\r\n    try {\r\n        if (result != null) {\r\n            JSONObject jObject = new JSONObject(result);\r\n            JSONArray jsonArray = jObject.getJSONObject(&quot;response&quot;).getJSONArray(&quot;Message&quot;);\r\n            for (int i = 0; i &lt; jsonArray.length(); i++) {\r\n                JSONObject objJson = jsonArray.getJSONObject(i);\r\n    \r\n                TopTenGetterSetter obj = new TopTenGetterSetter();  \r\n                /*\r\n                 * [{&quot;job_id&quot;:&quot;1&quot;,&quot;job_staff_id&quot;:&quot;&quot;,&quot;job_name&quot;:&quot;Account&quot;,\r\n                 * &quot;job_detail&quot;:&quot;test\\r\\ntesds&quot;,&quot;job_start_date&quot;:\r\n                 * &quot;2013-11-08&quot;\r\n                 * ,&quot;job_end_date&quot;:&quot;2013-11-10&quot;,&quot;job_amount&quot;:&quot;500&quot;\r\n                 * ,&quot;job_progress&quot;:&quot;&quot;,&quot;job_complete_status&quot;:&quot;0&quot;}]\r\n                 */\r\n    \r\n                obj.setQ(objJson.getString(&quot;question&quot;));\r\n                obj.setA(objJson.getString(&quot;option1&quot;));\r\n                obj.setB(objJson.getString(&quot;option2&quot;));\r\n                obj.setC(objJson.getString(&quot;option3&quot;));\r\n                obj.setD(objJson.getString(&quot;option4&quot;));\r\n    \r\n                polls.add(obj);\r\n                // am = Customer.info.get(pos).getJamount();\r\n    \r\n                // Toast.makeText(getApplicationContext(), am + result,\r\n                // Toast.LENGTH_LONG).show();\r\n            }\r\n    \r\n        }\r\n    } catch (JSONException e) {\r\n        e.printStackTrace();\r\n        Toast.makeText(getApplicationContext(), &quot;error&quot;,\r\n                Toast.LENGTH_SHORT).show();\r\n    }\r\n\r\nAs mario and nfear said, you are trying to cast a JSONObject into a JSONArray.","title":"JSON type mismatch or org.json.jsonecxeption","body":"<p>Try this:</p>\n\n<pre><code>Log.i(\"result\", result);\ntry {\n    if (result != null) {\n        JSONObject jObject = new JSONObject(result);\n        JSONArray jsonArray = jObject.getJSONObject(\"response\").getJSONArray(\"Message\");\n        for (int i = 0; i &lt; jsonArray.length(); i++) {\n            JSONObject objJson = jsonArray.getJSONObject(i);\n\n            TopTenGetterSetter obj = new TopTenGetterSetter();  \n            /*\n             * [{\"job_id\":\"1\",\"job_staff_id\":\"\",\"job_name\":\"Account\",\n             * \"job_detail\":\"test\\r\\ntesds\",\"job_start_date\":\n             * \"2013-11-08\"\n             * ,\"job_end_date\":\"2013-11-10\",\"job_amount\":\"500\"\n             * ,\"job_progress\":\"\",\"job_complete_status\":\"0\"}]\n             */\n\n            obj.setQ(objJson.getString(\"question\"));\n            obj.setA(objJson.getString(\"option1\"));\n            obj.setB(objJson.getString(\"option2\"));\n            obj.setC(objJson.getString(\"option3\"));\n            obj.setD(objJson.getString(\"option4\"));\n\n            polls.add(obj);\n            // am = Customer.info.get(pos).getJamount();\n\n            // Toast.makeText(getApplicationContext(), am + result,\n            // Toast.LENGTH_LONG).show();\n        }\n\n    }\n} catch (JSONException e) {\n    e.printStackTrace();\n    Toast.makeText(getApplicationContext(), \"error\",\n            Toast.LENGTH_SHORT).show();\n}\n</code></pre>\n\n<p>As mario and nfear said, you are trying to cast a JSONObject into a JSONArray.</p>\n"},{"tags":[],"owner":{"account_id":1238981,"reputation":132436,"user_id":1202025,"accept_rate":80,"display_name":"ρяσѕρєя K"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1387356004,"creation_date":1387356004,"answer_id":20653227,"question_id":20653106,"body_markdown":"String content JSONObject as root element instead of JSONArray.to get `Message` JSONArray from String you should first get `response` JSONObject then get `Message` JSONArray as:\r\n\r\n     JSONObject jsonobj = new JSONObject(result);\r\n     // get response JSONObject\r\n    \r\n     JSONObject jsonobj_response = jsonobj.getJSONObject(&quot;response&quot;);\r\n    \r\n    // get Message JSONArray from jsonobj_response\r\n    \r\n     JSONArray jsonArray = jsonobj_response.getJSONArray(&quot;Message&quot;);\r\n      // your code here.....\r\n\r\n","title":"JSON type mismatch or org.json.jsonecxeption","body":"<p>String content JSONObject as root element instead of JSONArray.to get <code>Message</code> JSONArray from String you should first get <code>response</code> JSONObject then get <code>Message</code> JSONArray as:</p>\n\n<pre><code> JSONObject jsonobj = new JSONObject(result);\n // get response JSONObject\n\n JSONObject jsonobj_response = jsonobj.getJSONObject(\"response\");\n\n// get Message JSONArray from jsonobj_response\n\n JSONArray jsonArray = jsonobj_response.getJSONArray(\"Message\");\n  // your code here.....\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1910620,"reputation":1644,"user_id":1724533,"accept_rate":36,"display_name":"SathishKumar"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1387356008,"creation_date":1387356008,"answer_id":20653228,"question_id":20653106,"body_markdown":"Try this,\r\n\r\n    try {\r\n        if (result != null) {\r\n            JSONArray jsonArray = new JSONObject(result).getJSONObject(&quot;response&quot;).getJSONArray(&quot;Message&quot;);\r\n            for (int i = 0; i &lt; jsonArray.length(); i++) {\r\n                JSONObject objJson = jsonArray.getJSONObject(i);\r\n    \r\n                TopTenGetterSetter obj = new TopTenGetterSetter();  \r\n                /*\r\n                 * [{&quot;job_id&quot;:&quot;1&quot;,&quot;job_staff_id&quot;:&quot;&quot;,&quot;job_name&quot;:&quot;Account&quot;,\r\n                 * &quot;job_detail&quot;:&quot;test\\r\\ntesds&quot;,&quot;job_start_date&quot;:\r\n                 * &quot;2013-11-08&quot;\r\n                 * ,&quot;job_end_date&quot;:&quot;2013-11-10&quot;,&quot;job_amount&quot;:&quot;500&quot;\r\n                 * ,&quot;job_progress&quot;:&quot;&quot;,&quot;job_complete_status&quot;:&quot;0&quot;}]\r\n                 */\r\n    \r\n                obj.setQ(objJson.getString(&quot;question&quot;));\r\n                obj.setA(objJson.getString(&quot;option1&quot;));\r\n                obj.setB(objJson.getString(&quot;option2&quot;));\r\n                obj.setC(objJson.getString(&quot;option3&quot;));\r\n                obj.setD(objJson.getString(&quot;option4&quot;));\r\n    \r\n                polls.add(obj);\r\n                // am = Customer.info.get(pos).getJamount();\r\n    \r\n                // Toast.makeText(getApplicationContext(), am + result,\r\n                // Toast.LENGTH_LONG).show();\r\n            }\r\n    \r\n        }\r\n    } ","title":"JSON type mismatch or org.json.jsonecxeption","body":"<p>Try this,</p>\n\n<pre><code>try {\n    if (result != null) {\n        JSONArray jsonArray = new JSONObject(result).getJSONObject(\"response\").getJSONArray(\"Message\");\n        for (int i = 0; i &lt; jsonArray.length(); i++) {\n            JSONObject objJson = jsonArray.getJSONObject(i);\n\n            TopTenGetterSetter obj = new TopTenGetterSetter();  \n            /*\n             * [{\"job_id\":\"1\",\"job_staff_id\":\"\",\"job_name\":\"Account\",\n             * \"job_detail\":\"test\\r\\ntesds\",\"job_start_date\":\n             * \"2013-11-08\"\n             * ,\"job_end_date\":\"2013-11-10\",\"job_amount\":\"500\"\n             * ,\"job_progress\":\"\",\"job_complete_status\":\"0\"}]\n             */\n\n            obj.setQ(objJson.getString(\"question\"));\n            obj.setA(objJson.getString(\"option1\"));\n            obj.setB(objJson.getString(\"option2\"));\n            obj.setC(objJson.getString(\"option3\"));\n            obj.setD(objJson.getString(\"option4\"));\n\n            polls.add(obj);\n            // am = Customer.info.get(pos).getJamount();\n\n            // Toast.makeText(getApplicationContext(), am + result,\n            // Toast.LENGTH_LONG).show();\n        }\n\n    }\n} \n</code></pre>\n"},{"tags":[],"owner":{"account_id":330005,"reputation":132815,"user_id":653856,"accept_rate":100,"display_name":"Raghunandan"},"down_vote_count":0,"up_vote_count":25,"is_accepted":true,"score":25,"last_activity_date":1387369231,"creation_date":1387356011,"answer_id":20653231,"question_id":20653106,"body_markdown":"    org.json.JSONException: Value response of type java.lang.String cannot be converted to JSONArray\r\n\r\nLooks like response is a string not a json array\r\n\r\n\r\n    {  // json object node \r\n        &quot;response&quot;: { // json object response\r\n            &quot;result&quot;: 1,\r\n            &quot;Message&quot;: [ // json array Message\r\n                {        // json object node \r\n                    &quot;pollid&quot;: &quot;98&quot;,\r\n                     &quot;category&quot;: &quot;Entertainment&quot;,\r\n                     &quot;question&quot;: &quot;what&quot;,  //  string\r\n                     &quot;option1&quot;: &quot;981.mov&quot;,\r\n\r\nThe result is a json object not json array\r\n\r\n    JSONArray jsonArray = new JSONArray(result);\r\n\r\nShould be\r\n\r\n    JSONObject jObj = new JSONObject(result);\r\n    JSONObject response = jObj.getJSONObject(&quot;response&quot;);\r\n    //JSONObject jb = new JSONObject(response);\r\n    JSONArray jr = response.getJSONArray(&quot;Message&quot;);\r\n    for(int i=0;i&lt;jr.length();i++)\r\n    {\r\n    JSONObject jb1 = jr.getJSONObject(i);\r\n    String question = jb1.getString(&quot;question&quot;);\r\n    Log.i(&quot;.......&quot;,question);\r\n    }\r\n       \r\n\r\n ","title":"JSON type mismatch or org.json.jsonecxeption","body":"<pre><code>org.json.JSONException: Value response of type java.lang.String cannot be converted to JSONArray\n</code></pre>\n\n<p>Looks like response is a string not a json array</p>\n\n<pre><code>{  // json object node \n    \"response\": { // json object response\n        \"result\": 1,\n        \"Message\": [ // json array Message\n            {        // json object node \n                \"pollid\": \"98\",\n                 \"category\": \"Entertainment\",\n                 \"question\": \"what\",  //  string\n                 \"option1\": \"981.mov\",\n</code></pre>\n\n<p>The result is a json object not json array</p>\n\n<pre><code>JSONArray jsonArray = new JSONArray(result);\n</code></pre>\n\n<p>Should be</p>\n\n<pre><code>JSONObject jObj = new JSONObject(result);\nJSONObject response = jObj.getJSONObject(\"response\");\n//JSONObject jb = new JSONObject(response);\nJSONArray jr = response.getJSONArray(\"Message\");\nfor(int i=0;i&lt;jr.length();i++)\n{\nJSONObject jb1 = jr.getJSONObject(i);\nString question = jb1.getString(\"question\");\nLog.i(\".......\",question);\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":282675,"reputation":9330,"user_id":579718,"accept_rate":67,"display_name":"Dinesh Prajapati"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1387356138,"creation_date":1387356138,"answer_id":20653280,"question_id":20653106,"body_markdown":"better to use GSON library instead of parsing it manually. GSON you can find it on goggling. and sample examples are given with that.","title":"JSON type mismatch or org.json.jsonecxeption","body":"<p>better to use GSON library instead of parsing it manually. GSON you can find it on goggling. and sample examples are given with that.</p>\n"},{"tags":[],"owner":{"account_id":1313894,"reputation":25682,"user_id":1261266,"accept_rate":53,"display_name":"Piyush Agarwal"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1388257780,"creation_date":1387356585,"answer_id":20653407,"question_id":20653106,"body_markdown":"The JSON you have posted is having  \r\n\r\n    // Key &quot;response&quot; , Value type JsonObject\r\n\r\n     JSONObject jsonObject=jsonObjectOfRsponse.getJsonObject(key);\r\n\r\n    //Key &quot;Message&quot; , Value type Json Array\r\n\r\n     JSONArray jsonArray=jsonObject.getJsonArray(key);\r\n     \r\n\r\nAfter getting the jsonArray, use this in a loop to parse the Json according to the type of value inside it.\r\n\r\nSo check if you are parsing the json according to the type of value it is holding.\r\n\r\n\r\n\r\n","title":"JSON type mismatch or org.json.jsonecxeption","body":"<p>The JSON you have posted is having  </p>\n\n<pre><code>// Key \"response\" , Value type JsonObject\n\n JSONObject jsonObject=jsonObjectOfRsponse.getJsonObject(key);\n\n//Key \"Message\" , Value type Json Array\n\n JSONArray jsonArray=jsonObject.getJsonArray(key);\n</code></pre>\n\n<p>After getting the jsonArray, use this in a loop to parse the Json according to the type of value inside it.</p>\n\n<p>So check if you are parsing the json according to the type of value it is holding.</p>\n"},{"tags":[],"owner":{"account_id":10848000,"reputation":31,"user_id":7976800,"display_name":"Mudimba Moonde"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1669643612,"creation_date":1669643612,"answer_id":74601639,"question_id":20653106,"body_markdown":"For example if you have a json code which is like this below you need to understand that a JSONArray string is enclosed in **[]**, while a JSONObject string is enclosed in **{}**\r\n\r\n    [\r\n    {\r\n    userId: 1,\r\n    id: 1,\r\n    title: &quot;sunt aut facere repellat provident occaecati excepturi optio reprehenderit&quot;,\r\n    body: &quot;quia et suscipit\r\n    suscipit recusandae consequuntur expedita et cum\r\n    reprehenderit molestiae ut ut quas totam\r\n    nostrum rerum est autem sunt rem eveniet architecto&quot;\r\n    }\r\n    ]\r\n\r\nin this case you need to call the **JSONArray** class and leter get the **JSONObject** \r\n \r\n    // Json Array []\r\n    JSONArray data = new JSONArray(jsonData);\r\n\r\n  \r\n\r\n    // JSON Object {}`\r\n      for(int i=0; i&lt;data.length(); i++){\r\n           JSONObject object =  data.getJSONObject(i);\r\n        }\r\n\r\n","title":"JSON type mismatch or org.json.jsonecxeption","body":"<p>For example if you have a json code which is like this below you need to understand that a JSONArray string is enclosed in <strong>[]</strong>, while a JSONObject string is enclosed in <strong>{}</strong></p>\n<pre><code>[\n{\nuserId: 1,\nid: 1,\ntitle: &quot;sunt aut facere repellat provident occaecati excepturi optio reprehenderit&quot;,\nbody: &quot;quia et suscipit\nsuscipit recusandae consequuntur expedita et cum\nreprehenderit molestiae ut ut quas totam\nnostrum rerum est autem sunt rem eveniet architecto&quot;\n}\n]\n</code></pre>\n<p>in this case you need to call the <strong>JSONArray</strong> class and leter get the <strong>JSONObject</strong></p>\n<pre><code>// Json Array []\nJSONArray data = new JSONArray(jsonData);\n\n\n\n// JSON Object {}`\n  for(int i=0; i&lt;data.length(); i++){\n       JSONObject object =  data.getJSONObject(i);\n    }\n</code></pre>\n"}],"owner":{"account_id":3216522,"reputation":1976,"user_id":2715065,"accept_rate":74,"display_name":"Vivek Warde"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":35110,"favorite_count":0,"down_vote_count":1,"up_vote_count":7,"accepted_answer_id":20653231,"answer_count":9,"score":6,"last_activity_date":1669643612,"creation_date":1387355573,"question_id":20653106,"body_markdown":"The link is \r\nhttp://iipacademy.in/askpoll/ten_feed.php\r\n\r\nexception is in onPostExecute() method  (4th line) :\r\n\r\n    Log.i(&quot;result&quot;, result);\r\n\ttry {\r\n\t\tif (result != null) {\r\n\t\t\tJSONArray jsonArray = new JSONArray(result); // erreor\r\n\t\t\tfor (int i = 0; i &lt; jsonArray.length(); i++) {\r\n\t\t\t\tJSONObject objJson = jsonArray.getJSONObject(i);\r\n\r\n\t\t\t\tTopTenGetterSetter obj = new TopTenGetterSetter();\t\r\n\t\t\t\t\r\n\r\n\t\t\t\tobj.setQ(objJson.getString(&quot;question&quot;));\r\n\t\t\t\tobj.setA(objJson.getString(&quot;option1&quot;));\r\n\t\t\t\tobj.setB(objJson.getString(&quot;option2&quot;));\r\n\t\t\t\tobj.setC(objJson.getString(&quot;option3&quot;));\r\n\t\t\t\tobj.setD(objJson.getString(&quot;option4&quot;));\r\n\r\n\t\t\t\tpolls.add(obj);\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t}\r\n\t} catch (JSONException e) {\r\n\t\te.printStackTrace();\r\n\t\tToast.makeText(getApplicationContext(), &quot;error&quot;,\r\n\t\t\t\tToast.LENGTH_SHORT).show();\r\n\t}\r\n\r\n\r\n\r\n\r\nLOGCAT:\r\n\r\n    12-18 03:20:45.447: W/System.err(2790): org.json.JSONException: Value response of type java.lang.String cannot be converted to JSONArray\r\n    12-18 03:20:45.447: W/System.err(2790): \tat org.json.JSON.typeMismatch(JSON.java:111)\r\n    12-18 03:20:45.447: W/System.err(2790): \tat org.json.JSONArray.&lt;init&gt;(JSONArray.java:91)\r\n    12-18 03:20:45.447: W/System.err(2790): \tat org.json.JSONArray.&lt;init&gt;(JSONArray.java:103)\r\n    12-18 03:20:45.447: W/System.err(2790): \tat com.example.askpollie.LatestPollParticipated$FetchingEventsDetails.onPostExecute(LatestPollParticipated.java:188)\r\n    12-18 03:20:45.447: W/System.err(2790): \tat com.example.askpollie.LatestPollParticipated$FetchingEventsDetails.onPostExecute(LatestPollParticipated.java:1)\r\n    12-18 03:20:45.447: W/System.err(2790): \tat android.os.AsyncTask.finish(AsyncTask.java:631)\r\n    12-18 03:20:45.447: W/System.err(2790): \tat android.os.AsyncTask.access$600(AsyncTask.java:177)\r\n    12-18 03:20:45.447: W/System.err(2790): \tat android.os.AsyncTask$InternalHandler.handleMessage(AsyncTask.java:644)\r\n    12-18 03:20:45.447: W/System.err(2790): \tat android.os.Handler.dispatchMessage(Handler.java:99)\r\n    12-18 03:20:45.447: W/System.err(2790): \tat android.os.Looper.loop(Looper.java:137)\r\n    12-18 03:20:45.447: W/System.err(2790): \tat android.app.ActivityThread.main(ActivityThread.java:5103)\r\n    12-18 03:20:45.447: W/System.err(2790): \tat java.lang.reflect.Method.invokeNative(Native Method)\r\n    12-18 03:20:45.447: W/System.err(2790): \tat java.lang.reflect.Method.invoke(Method.java:525)\r\n    12-18 03:20:45.447: W/System.err(2790): \tat com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:737)\r\n    12-18 03:20:45.447: W/System.err(2790): \tat com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)\r\n    12-18 03:20:45.447: W/System.err(2790): \tat dalvik.system.NativeStart.main(Native Method)\r\n    12-18 03:20:45.447: D/dalvikvm(2790): GC_FOR_ALLOC freed 5131K, 55% free 4437K/9672K, paused 2ms, total 2ms\r\n\r\n\r\nMessage is an array so what should be its code or how to can it be solved ?\r\n\r\nThanks\r\nin\r\nadvance . . .","title":"JSON type mismatch or org.json.jsonecxeption","body":"<p>The link is \n<a href=\"http://iipacademy.in/askpoll/ten_feed.php\" rel=\"noreferrer\">http://iipacademy.in/askpoll/ten_feed.php</a></p>\n\n<p>exception is in onPostExecute() method  (4th line) :</p>\n\n<pre><code>Log.i(\"result\", result);\ntry {\n    if (result != null) {\n        JSONArray jsonArray = new JSONArray(result); // erreor\n        for (int i = 0; i &lt; jsonArray.length(); i++) {\n            JSONObject objJson = jsonArray.getJSONObject(i);\n\n            TopTenGetterSetter obj = new TopTenGetterSetter();  \n\n\n            obj.setQ(objJson.getString(\"question\"));\n            obj.setA(objJson.getString(\"option1\"));\n            obj.setB(objJson.getString(\"option2\"));\n            obj.setC(objJson.getString(\"option3\"));\n            obj.setD(objJson.getString(\"option4\"));\n\n            polls.add(obj);\n                        }\n\n    }\n} catch (JSONException e) {\n    e.printStackTrace();\n    Toast.makeText(getApplicationContext(), \"error\",\n            Toast.LENGTH_SHORT).show();\n}\n</code></pre>\n\n<p>LOGCAT:</p>\n\n<pre><code>12-18 03:20:45.447: W/System.err(2790): org.json.JSONException: Value response of type java.lang.String cannot be converted to JSONArray\n12-18 03:20:45.447: W/System.err(2790):     at org.json.JSON.typeMismatch(JSON.java:111)\n12-18 03:20:45.447: W/System.err(2790):     at org.json.JSONArray.&lt;init&gt;(JSONArray.java:91)\n12-18 03:20:45.447: W/System.err(2790):     at org.json.JSONArray.&lt;init&gt;(JSONArray.java:103)\n12-18 03:20:45.447: W/System.err(2790):     at com.example.askpollie.LatestPollParticipated$FetchingEventsDetails.onPostExecute(LatestPollParticipated.java:188)\n12-18 03:20:45.447: W/System.err(2790):     at com.example.askpollie.LatestPollParticipated$FetchingEventsDetails.onPostExecute(LatestPollParticipated.java:1)\n12-18 03:20:45.447: W/System.err(2790):     at android.os.AsyncTask.finish(AsyncTask.java:631)\n12-18 03:20:45.447: W/System.err(2790):     at android.os.AsyncTask.access$600(AsyncTask.java:177)\n12-18 03:20:45.447: W/System.err(2790):     at android.os.AsyncTask$InternalHandler.handleMessage(AsyncTask.java:644)\n12-18 03:20:45.447: W/System.err(2790):     at android.os.Handler.dispatchMessage(Handler.java:99)\n12-18 03:20:45.447: W/System.err(2790):     at android.os.Looper.loop(Looper.java:137)\n12-18 03:20:45.447: W/System.err(2790):     at android.app.ActivityThread.main(ActivityThread.java:5103)\n12-18 03:20:45.447: W/System.err(2790):     at java.lang.reflect.Method.invokeNative(Native Method)\n12-18 03:20:45.447: W/System.err(2790):     at java.lang.reflect.Method.invoke(Method.java:525)\n12-18 03:20:45.447: W/System.err(2790):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:737)\n12-18 03:20:45.447: W/System.err(2790):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)\n12-18 03:20:45.447: W/System.err(2790):     at dalvik.system.NativeStart.main(Native Method)\n12-18 03:20:45.447: D/dalvikvm(2790): GC_FOR_ALLOC freed 5131K, 55% free 4437K/9672K, paused 2ms, total 2ms\n</code></pre>\n\n<p>Message is an array so what should be its code or how to can it be solved ?</p>\n\n<p>Thanks\nin\nadvance . . .</p>\n"},{"tags":["java","performance-testing","gatling"],"answers":[{"tags":[],"owner":{"account_id":3460456,"reputation":162728,"user_id":2897748,"display_name":"Dmitri T"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1669643440,"creation_date":1669643440,"answer_id":74601598,"question_id":74600362,"body_markdown":" 1. When you&#39;re sending cookies they need to go in [`Cookie`][1] header, [`Set-Cookie`][2] is what **server** uses for creating the cookies\r\n 2. I don&#39;t think you really &quot;moving&quot; your login &quot;out of&quot; your performance tests, you&#39;re just using your custom code which will still be present in metrics and impacting response time and throughput (and leaving the connection to the server open by the way), maybe it worth simulating logins somewhere in [before hook][3] and use a [feeder][4] when the real simulation starts\r\n 3. Having load generator and the system under test running on the same machine is not the best idea as they both will be [struggling for the operating system resources][5] and even a comprehensive [APM tool][6] won&#39;t be able to tell you where the bottleneck is \r\n\r\n\r\n  [1]: https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Cookie\r\n  [2]: https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Set-Cookie\r\n  [3]: https://gatling.io/docs/gatling/reference/current/core/simulation/#hooks\r\n  [4]: https://gatling.io/docs/gatling/reference/current/core/session/feeder/\r\n  [5]: https://en.wikipedia.org/wiki/Race_condition\r\n  [6]: https://www.blazemeter.com/blog/apm-tools-comparison","title":"Can&#39;t set correct auth cookie by using addCookie in Gatling","body":"<ol>\n<li>When you're sending cookies they need to go in <a href=\"https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Cookie\" rel=\"nofollow noreferrer\"><code>Cookie</code></a> header, <a href=\"https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Set-Cookie\" rel=\"nofollow noreferrer\"><code>Set-Cookie</code></a> is what <strong>server</strong> uses for creating the cookies</li>\n<li>I don't think you really &quot;moving&quot; your login &quot;out of&quot; your performance tests, you're just using your custom code which will still be present in metrics and impacting response time and throughput (and leaving the connection to the server open by the way), maybe it worth simulating logins somewhere in <a href=\"https://gatling.io/docs/gatling/reference/current/core/simulation/#hooks\" rel=\"nofollow noreferrer\">before hook</a> and use a <a href=\"https://gatling.io/docs/gatling/reference/current/core/session/feeder/\" rel=\"nofollow noreferrer\">feeder</a> when the real simulation starts</li>\n<li>Having load generator and the system under test running on the same machine is not the best idea as they both will be <a href=\"https://en.wikipedia.org/wiki/Race_condition\" rel=\"nofollow noreferrer\">struggling for the operating system resources</a> and even a comprehensive <a href=\"https://www.blazemeter.com/blog/apm-tools-comparison\" rel=\"nofollow noreferrer\">APM tool</a> won't be able to tell you where the bottleneck is</li>\n</ol>\n"}],"owner":{"account_id":27072639,"reputation":1,"user_id":20623064,"display_name":"DaSki"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":152,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1669643440,"creation_date":1669637291,"question_id":74600362,"body_markdown":"I am trying to move my Login to application outside of my performance tests made in Gatling.\r\n\r\nLogin authentication is by stored Cookie, so I want to log in to app and obtain an auth cookie in another Class, and then parse it directly into &quot;addCookie&quot; method in gatling (so i guess it should be stored in session of next gatling performance tests)\r\n\r\nI have method getAuthCookie in class CookieSaver\r\n\r\n\r\n```\r\npublic String getAuthCookie() throws Exception {\r\n\r\n    Properties prop = new Properties();\r\n\r\n    prop.load(new FileInputStream(&quot;data.properties&quot;));\r\n    String user = prop.getProperty(&quot;username&quot;);\r\n    String pass = prop.getProperty(&quot;password&quot;);\r\n    String url = prop.getProperty(&quot;url&quot;);\r\n\r\n    Map&lt;Object, Object&gt; data = new HashMap&lt;&gt;();\r\n    data.put(&quot;username&quot;, user);\r\n    data.put(&quot;password&quot;, pass);\r\n\r\n    HttpRequest request2 = HttpRequest.newBuilder()\r\n            .POST(buildFormDataFromMap(data))\r\n            .uri(URI.create(url))\r\n            .setHeader(&quot;User-Agent&quot;, &quot;Java 11 HttpClient Bot&quot;)\r\n            .header(&quot;Content-Type&quot;, &quot;application/x-www-form-urlencoded&quot;)\r\n            .build();\r\n    HttpResponse&lt;String&gt; response = httpClient.send(request2, HttpResponse.BodyHandlers.ofString());\r\n    String cookie = String.valueOf(response.headers().firstValue(&quot;set-cookie&quot;));\r\n\r\n    System.out.println(response.statusCode());\r\n\r\n    System.out.println(response.body());\r\n    String fixedCookie = cookie.replace(&quot;Optional&quot;, &quot;&quot;);\r\n    return fixedCookie;\r\n}\r\n```\r\n\r\nand I am trying to use it in .exec(addCookie........\r\n\r\n\r\n```\r\nChainBuilder search;\r\n\r\n{\r\n\r\n    try {\r\n        search = exec(flushCookieJar())\r\n                .exec(flushHttpCache())\r\n\r\n                .exec(addCookie(Cookie(&quot;set-cookie&quot;, authCookie.getAuthCookie()).withDomain(&quot;localhost&quot;)))\r\n                \r\n                .pause(1)\r\n\r\n                .exec(\r\n                        http(&quot;Contacts&quot;)\r\n                                .get(&quot;/transactions/contacts&quot;)\r\n                                .check(\r\n                                        status().is(200).saveAs(&quot;Response&quot;)\r\n                                ))\r\n                .exec(session -&gt; {\r\n                    System.out.println(&quot;session1: &quot; +session);\r\n                    return session;\r\n                })\r\n\r\n                .exec(flushSessionCookies())\r\n\r\n\r\n                .pause(1);\r\n    } catch (Exception e) {\r\n        throw new RuntimeException(e);\r\n    }\r\n\r\n}\r\n```\r\n\r\nI obtain the Cookie and set it correctly into session (verified in logs after run), but i obtain 401 when trying to run next step of performance tests, which is simple get\r\n\r\nI&#39;ve tried log in to application inside performance tests and it&#39;s working correctly, but i would need to move log in outside of performance tests\r\n\r\nThis works:\r\n\r\n\r\n```\r\nChainBuilder search;\r\n\r\n{\r\n\r\n    try {\r\n        search = exec(http(&quot;Home&quot;).get(&quot;/&quot;))\r\n\r\n                .exec(\r\n                        http(&quot;Login&quot;)\r\n                                .post(&quot;/login&quot;)\r\n                                .formParam(&quot;username&quot;, &quot;user&quot;)\r\n                                .formParam(&quot;password&quot;, &quot;pw&quot;)\r\n                                .check(\r\n                                        status().is(200)\r\n                                )\r\n                )\r\n                .pause(1)\r\n\r\n                .exec(\r\n                        http(&quot;Contacts&quot;)\r\n                                .get(&quot;/transactions/contacts&quot;)\r\n                                .check(\r\n                                        status().is(200).saveAs(&quot;Response&quot;)\r\n                                ))\r\n                .exec(session -&gt; {\r\n                    System.out.println(&quot;sesja1: &quot; +session);\r\n                    return session;\r\n                })\r\n\r\n                .exec(flushSessionCookies())\r\n\r\n\r\n                .pause(1);\r\n    } catch (Exception e) {\r\n        throw new RuntimeException(e);\r\n    }\r\n\r\n}\r\n```\r\n","title":"Can&#39;t set correct auth cookie by using addCookie in Gatling","body":"<p>I am trying to move my Login to application outside of my performance tests made in Gatling.</p>\n<p>Login authentication is by stored Cookie, so I want to log in to app and obtain an auth cookie in another Class, and then parse it directly into &quot;addCookie&quot; method in gatling (so i guess it should be stored in session of next gatling performance tests)</p>\n<p>I have method getAuthCookie in class CookieSaver</p>\n<pre><code>public String getAuthCookie() throws Exception {\n\n    Properties prop = new Properties();\n\n    prop.load(new FileInputStream(&quot;data.properties&quot;));\n    String user = prop.getProperty(&quot;username&quot;);\n    String pass = prop.getProperty(&quot;password&quot;);\n    String url = prop.getProperty(&quot;url&quot;);\n\n    Map&lt;Object, Object&gt; data = new HashMap&lt;&gt;();\n    data.put(&quot;username&quot;, user);\n    data.put(&quot;password&quot;, pass);\n\n    HttpRequest request2 = HttpRequest.newBuilder()\n            .POST(buildFormDataFromMap(data))\n            .uri(URI.create(url))\n            .setHeader(&quot;User-Agent&quot;, &quot;Java 11 HttpClient Bot&quot;)\n            .header(&quot;Content-Type&quot;, &quot;application/x-www-form-urlencoded&quot;)\n            .build();\n    HttpResponse&lt;String&gt; response = httpClient.send(request2, HttpResponse.BodyHandlers.ofString());\n    String cookie = String.valueOf(response.headers().firstValue(&quot;set-cookie&quot;));\n\n    System.out.println(response.statusCode());\n\n    System.out.println(response.body());\n    String fixedCookie = cookie.replace(&quot;Optional&quot;, &quot;&quot;);\n    return fixedCookie;\n}\n</code></pre>\n<p>and I am trying to use it in .exec(addCookie........</p>\n<pre><code>ChainBuilder search;\n\n{\n\n    try {\n        search = exec(flushCookieJar())\n                .exec(flushHttpCache())\n\n                .exec(addCookie(Cookie(&quot;set-cookie&quot;, authCookie.getAuthCookie()).withDomain(&quot;localhost&quot;)))\n                \n                .pause(1)\n\n                .exec(\n                        http(&quot;Contacts&quot;)\n                                .get(&quot;/transactions/contacts&quot;)\n                                .check(\n                                        status().is(200).saveAs(&quot;Response&quot;)\n                                ))\n                .exec(session -&gt; {\n                    System.out.println(&quot;session1: &quot; +session);\n                    return session;\n                })\n\n                .exec(flushSessionCookies())\n\n\n                .pause(1);\n    } catch (Exception e) {\n        throw new RuntimeException(e);\n    }\n\n}\n</code></pre>\n<p>I obtain the Cookie and set it correctly into session (verified in logs after run), but i obtain 401 when trying to run next step of performance tests, which is simple get</p>\n<p>I've tried log in to application inside performance tests and it's working correctly, but i would need to move log in outside of performance tests</p>\n<p>This works:</p>\n<pre><code>ChainBuilder search;\n\n{\n\n    try {\n        search = exec(http(&quot;Home&quot;).get(&quot;/&quot;))\n\n                .exec(\n                        http(&quot;Login&quot;)\n                                .post(&quot;/login&quot;)\n                                .formParam(&quot;username&quot;, &quot;user&quot;)\n                                .formParam(&quot;password&quot;, &quot;pw&quot;)\n                                .check(\n                                        status().is(200)\n                                )\n                )\n                .pause(1)\n\n                .exec(\n                        http(&quot;Contacts&quot;)\n                                .get(&quot;/transactions/contacts&quot;)\n                                .check(\n                                        status().is(200).saveAs(&quot;Response&quot;)\n                                ))\n                .exec(session -&gt; {\n                    System.out.println(&quot;sesja1: &quot; +session);\n                    return session;\n                })\n\n                .exec(flushSessionCookies())\n\n\n                .pause(1);\n    } catch (Exception e) {\n        throw new RuntimeException(e);\n    }\n\n}\n</code></pre>\n"},{"tags":["java","azure","azure-functions","serverless"],"comments":[{"owner":{"account_id":8708088,"reputation":65,"user_id":6515307,"display_name":"Lesrac"},"score":1,"creation_date":1669715630,"post_id":74601033,"comment_id":131700269,"body_markdown":"There seems to be no simple solution for this. See also: https://stackoverflow.com/questions/54473126/azure-functions-how-to-use-the-multiparthttpservletrequest-class-from-the-de","body":"There seems to be no simple solution for this. See also: <a href=\"https://stackoverflow.com/questions/54473126/azure-functions-how-to-use-the-multiparthttpservletrequest-class-from-the-de\" title=\"azure functions how to use the multiparthttpservletrequest class from the de\">stackoverflow.com/questions/54473126/&hellip;</a>"},{"owner":{"account_id":9610071,"reputation":2910,"user_id":7134737,"accept_rate":45,"display_name":"ng.newbie"},"score":0,"creation_date":1669752797,"post_id":74601033,"comment_id":131713376,"body_markdown":"@Lesrac Wow, that&#39;s tough to do.","body":"@Lesrac Wow, that&#39;s tough to do."}],"owner":{"account_id":9610071,"reputation":2910,"user_id":7134737,"accept_rate":45,"display_name":"ng.newbie"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":171,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1669643429,"creation_date":1669640776,"question_id":74601033,"body_markdown":"Hi how do I get `multipart form data` in case of **Java** `Azure Function Apps` ?\r\n\r\nI have looked at the [this][1] but there is no mention of multipart form data\r\n\r\n    public HttpResponseMessage run(\r\n                @HttpTrigger(\r\n                    name = &quot;req&quot;,\r\n                    methods = {HttpMethod.POST},\r\n                    authLevel = AuthorizationLevel.ANONYMOUS)\r\n                    HttpRequestMessage&lt;Optional&lt;String&gt;&gt; request,\r\n                final ExecutionContext context) {\r\n            context.getLogger().info(&quot;Java HTTP trigger processed a request.&quot;);\r\n    \r\n            // This gives me the whole body\r\n            final String file = request.getBody().get();\r\n    \r\n            System.out.println(file);\r\n    \r\n    }\r\n\r\n\r\nHow can I filter out just my upload ?\r\n\r\nI seem to be having no API for this. I can access the whole body and that&#39;s it.\r\n\r\n**How do I do this in Java ?**\r\n\r\n\r\n  [1]: https://learn.microsoft.com/en-us/azure/azure-functions/functions-bindings-http-webhook-trigger?tabs=in-process%2Cfunctionsv2&amp;pivots=programming-language-java#example","title":"How to get multipart form data with Azure Functions Java?","body":"<p>Hi how do I get <code>multipart form data</code> in case of <strong>Java</strong> <code>Azure Function Apps</code> ?</p>\n<p>I have looked at the <a href=\"https://learn.microsoft.com/en-us/azure/azure-functions/functions-bindings-http-webhook-trigger?tabs=in-process%2Cfunctionsv2&amp;pivots=programming-language-java#example\" rel=\"nofollow noreferrer\">this</a> but there is no mention of multipart form data</p>\n<pre><code>public HttpResponseMessage run(\n            @HttpTrigger(\n                name = &quot;req&quot;,\n                methods = {HttpMethod.POST},\n                authLevel = AuthorizationLevel.ANONYMOUS)\n                HttpRequestMessage&lt;Optional&lt;String&gt;&gt; request,\n            final ExecutionContext context) {\n        context.getLogger().info(&quot;Java HTTP trigger processed a request.&quot;);\n\n        // This gives me the whole body\n        final String file = request.getBody().get();\n\n        System.out.println(file);\n\n}\n</code></pre>\n<p>How can I filter out just my upload ?</p>\n<p>I seem to be having no API for this. I can access the whole body and that's it.</p>\n<p><strong>How do I do this in Java ?</strong></p>\n"},{"tags":["java","enums","annotations"],"answers":[{"tags":[],"owner":{"account_id":2139538,"reputation":42501,"user_id":1898563,"accept_rate":78,"display_name":"Michael"},"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1669643339,"creation_date":1669643339,"answer_id":74601577,"question_id":74601352,"body_markdown":"You can&#39;t use union types in an annotation member, so you&#39;ll have to give up on that idea.\r\n\r\nBut frame challenge: why do you even care that the implementer has to be an enum? \r\n\r\nWhat I assume you care about is that something can give you a finite set of implementations. An enum is one way to achieve that, but why be overly restrictive if someone wants to give you a list of values some other way?\r\n\r\nI&#39;d add a new interface which can provide a collection of values.\r\n\r\n    interface MyInterfaceValueSource {\r\n        List&lt;MyInterface&gt; values();\r\n    }\r\n\r\nThe enum gets a very simple implementation that just calls `MyEnum.values()`.\r\n\r\n    class MyEnumValueSource implements MyInterfaceValueSource {\r\n        @Override\r\n        public List&lt;MyInterface&gt; values() {\r\n            return Arrays.asList(MyEnum.values());\r\n        }\r\n    }\r\n\r\nYour annotation can then be altered to accept one of those\r\n\r\n    @interface MyAnnotation {\r\n        Class&lt;? extends MyInterfaceValueSource&gt; value();\r\n    }\r\n    \r\nand example of its usage would be\r\n\r\n    @MyAnnotation(MyEnumValueSource.class)\r\n\r\nNow if someone wants to provide a list of values but *not* implement it as an enum, they have the flexibility to do that.\r\n\r\n    class ExampleValueSource implements MyInterfaceValueSource {\r\n        @Override\r\n        public List&lt;MyInterface&gt; values() {\r\n            return Arrays.asList(\r\n                new MyInterfaceOne(), new MyInterfaceTwo()\r\n            );\r\n        }\r\n    }","title":"Java enum implementing interface as custom annotation parameter","body":"<p>You can't use union types in an annotation member, so you'll have to give up on that idea.</p>\n<p>But frame challenge: why do you even care that the implementer has to be an enum?</p>\n<p>What I assume you care about is that something can give you a finite set of implementations. An enum is one way to achieve that, but why be overly restrictive if someone wants to give you a list of values some other way?</p>\n<p>I'd add a new interface which can provide a collection of values.</p>\n<pre><code>interface MyInterfaceValueSource {\n    List&lt;MyInterface&gt; values();\n}\n</code></pre>\n<p>The enum gets a very simple implementation that just calls <code>MyEnum.values()</code>.</p>\n<pre><code>class MyEnumValueSource implements MyInterfaceValueSource {\n    @Override\n    public List&lt;MyInterface&gt; values() {\n        return Arrays.asList(MyEnum.values());\n    }\n}\n</code></pre>\n<p>Your annotation can then be altered to accept one of those</p>\n<pre><code>@interface MyAnnotation {\n    Class&lt;? extends MyInterfaceValueSource&gt; value();\n}\n</code></pre>\n<p>and example of its usage would be</p>\n<pre><code>@MyAnnotation(MyEnumValueSource.class)\n</code></pre>\n<p>Now if someone wants to provide a list of values but <em>not</em> implement it as an enum, they have the flexibility to do that.</p>\n<pre><code>class ExampleValueSource implements MyInterfaceValueSource {\n    @Override\n    public List&lt;MyInterface&gt; values() {\n        return Arrays.asList(\n            new MyInterfaceOne(), new MyInterfaceTwo()\n        );\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":1393884,"reputation":79,"user_id":1324074,"accept_rate":80,"display_name":"Mad Max"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":347,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":74601577,"answer_count":1,"score":0,"last_activity_date":1669643339,"creation_date":1669642244,"question_id":74601352,"body_markdown":"I&#39;m creating an custom annotation with parameters. Parameters I want to use are enums that implement an interface. There are few enums that are candidates to b used as this annotation&#39;s parameter. Here are some code examples:\r\n\r\nInterface:\r\n\r\n    public interface MyInterface {\r\n        String getSomething();\r\n        int getMore();\r\n    }\r\nEnum example:\r\n\r\n    public enum MyEnum implements MyInterface {\r\n    \r\n        VAL1(&quot;some1&quot;, 1),\r\n        VAL2(&quot;2val&quot;, 22);\r\n\r\n        private String something;\r\n        private int more;\r\n    \r\n        private MyEnum(String something, int more) {\r\n            this.something = something;\r\n            this.more = more;\r\n        }\r\n    \r\n        public String getSomething() {\r\n            return something;\r\n        }\r\n    \r\n        public int getMore() {\r\n            return more;\r\n        }\r\n    }\r\n\r\nI want to implement an annotation with parameter that can be retrieved as multiple MyInterface values. Let&#39;s say annotation looks like this: \r\n\r\n    @MyAnnotation(MyEnum.class)\r\n\r\nor \r\n\r\n    @MyAnnotation(MyEnum.values())\r\nSo I can further retrieve it and pass it to a method that accepts Collection&lt;MyInterface&gt; parameter.\r\n\r\n \r\nHow do I implement an annotation with a parameter so I can retrieve all values of enum as MyInterface type?\r\n\r\nI was trying to do it like this:\r\n\r\n    public @interface MyAnnotation {\r\n        Class&lt;? extends Enum&lt;?&gt; &amp; MyInterface&gt; myValues();\r\n    }\r\nSo I could do:\r\n\r\n    Collection&lt;MyInterface&gt; desired = Arrays.asList(... .getAnnotation().myValues().enumValues());\r\n\r\nbut this syntax is invalid.\r\n","title":"Java enum implementing interface as custom annotation parameter","body":"<p>I'm creating an custom annotation with parameters. Parameters I want to use are enums that implement an interface. There are few enums that are candidates to b used as this annotation's parameter. Here are some code examples:</p>\n<p>Interface:</p>\n<pre><code>public interface MyInterface {\n    String getSomething();\n    int getMore();\n}\n</code></pre>\n<p>Enum example:</p>\n<pre><code>public enum MyEnum implements MyInterface {\n\n    VAL1(&quot;some1&quot;, 1),\n    VAL2(&quot;2val&quot;, 22);\n\n    private String something;\n    private int more;\n\n    private MyEnum(String something, int more) {\n        this.something = something;\n        this.more = more;\n    }\n\n    public String getSomething() {\n        return something;\n    }\n\n    public int getMore() {\n        return more;\n    }\n}\n</code></pre>\n<p>I want to implement an annotation with parameter that can be retrieved as multiple MyInterface values. Let's say annotation looks like this:</p>\n<pre><code>@MyAnnotation(MyEnum.class)\n</code></pre>\n<p>or</p>\n<pre><code>@MyAnnotation(MyEnum.values())\n</code></pre>\n<p>So I can further retrieve it and pass it to a method that accepts Collection parameter.</p>\n<p>How do I implement an annotation with a parameter so I can retrieve all values of enum as MyInterface type?</p>\n<p>I was trying to do it like this:</p>\n<pre><code>public @interface MyAnnotation {\n    Class&lt;? extends Enum&lt;?&gt; &amp; MyInterface&gt; myValues();\n}\n</code></pre>\n<p>So I could do:</p>\n<pre><code>Collection&lt;MyInterface&gt; desired = Arrays.asList(... .getAnnotation().myValues().enumValues());\n</code></pre>\n<p>but this syntax is invalid.</p>\n"},{"tags":["java","java-stream"],"comments":[{"owner":{"account_id":379763,"reputation":29886,"user_id":733345,"display_name":"Joe"},"score":1,"creation_date":1669635927,"post_id":74600079,"comment_id":131679557,"body_markdown":"Does this answer your question? [trim @domain.xxx from email leaving just username](https://stackoverflow.com/questions/10386025/trim-domain-xxx-from-email-leaving-just-username)","body":"Does this answer your question? <a href=\"https://stackoverflow.com/questions/10386025/trim-domain-xxx-from-email-leaving-just-username\">trim @domain.xxx from email leaving just username</a>"},{"owner":{"account_id":74704,"reputation":11534,"user_id":214525,"accept_rate":100,"display_name":"f1sh"},"score":1,"creation_date":1669636005,"post_id":74600079,"comment_id":131679578,"body_markdown":"&quot;Tried in many ways&quot; - how? Plese include your attempt. A simple `split` should do the trick.","body":"&quot;Tried in many ways&quot; - how? Plese include your attempt. A simple <code>split</code> should do the trick."},{"owner":{"account_id":16340177,"reputation":87,"user_id":11801256,"display_name":"Sonya  gold"},"score":0,"creation_date":1669636238,"post_id":74600079,"comment_id":131679679,"body_markdown":"@joe No because I know how to do it with a regular string, but not with Optional strings and streams, but thanks","body":"@joe No because I know how to do it with a regular string, but not with Optional strings and streams, but thanks"},{"owner":{"account_id":74704,"reputation":11534,"user_id":214525,"accept_rate":100,"display_name":"f1sh"},"score":1,"creation_date":1669636467,"post_id":74600079,"comment_id":131679739,"body_markdown":"@Sonyagold you are overcomplicating things. Just call `.get()` on the Optional, then work on the `String`. Use `split` on the `String`.","body":"@Sonyagold you are overcomplicating things. Just call <code>.get()</code> on the Optional, then work on the <code>String</code>. Use <code>split</code> on the <code>String</code>."},{"owner":{"account_id":16340177,"reputation":87,"user_id":11801256,"display_name":"Sonya  gold"},"score":0,"creation_date":1669636650,"post_id":74600079,"comment_id":131679793,"body_markdown":"@f1sh  Thanks, see edit2. Does it make sense to use Arrays.Stream? It does not compile otherwise","body":"@f1sh  Thanks, see edit2. Does it make sense to use Arrays.Stream? It does not compile otherwise"},{"owner":{"account_id":74704,"reputation":11534,"user_id":214525,"accept_rate":100,"display_name":"f1sh"},"score":0,"creation_date":1669636836,"post_id":74600079,"comment_id":131679862,"body_markdown":"@Sonyagold you could just use `email.get().split(&quot;@&quot;)[0]`, but your approach with `Arrays.stream` and `findFirst` is cleaner because if the input does not contain a `@`, it gives you an empty `Optional` instead of throwing an `Exception`.","body":"@Sonyagold you could just use <code>email.get().split(&quot;@&quot;)[0]</code>, but your approach with <code>Arrays.stream</code> and <code>findFirst</code> is cleaner because if the input does not contain a <code>@</code>, it gives you an empty <code>Optional</code> instead of throwing an <code>Exception</code>."},{"owner":{"account_id":238684,"reputation":22543,"user_id":507738,"accept_rate":71,"display_name":"MC Emperor"},"score":0,"creation_date":1669637812,"post_id":74600079,"comment_id":131680169,"body_markdown":"Since you never have more than one element, using Streams is pointless. Streams are designed to handle *sequences of elements*, not cases where it is guaranteed to have at most a single element.","body":"Since you never have more than one element, using Streams is pointless. Streams are designed to handle <i>sequences of elements</i>, not cases where it is guaranteed to have at most a single element."},{"owner":{"account_id":3211603,"reputation":289297,"user_id":2711488,"display_name":"Holger"},"score":2,"creation_date":1669643089,"post_id":74600079,"comment_id":131681948,"body_markdown":"@f1sh `.split(&quot;@&quot;)[0]` doesn’t throw an exception.","body":"@f1sh <code>.split(&quot;@&quot;)[0]</code> doesn’t throw an exception."}],"answers":[{"tags":[],"owner":{"account_id":23959668,"reputation":26587,"user_id":17949945,"display_name":"Alexander Ivanchenko"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1669643212,"creation_date":1669637132,"answer_id":74600330,"question_id":74600079,"body_markdown":"You don&#39;t need to generate a Stream.\r\n\r\nInstead, you can make use of the [`String.replaceFirst()`][replaceFirst], which expects a regular expression and a replacing String, like that `replaceFirst(&quot;@.*&quot;, &quot;&quot;)`, which will remove everything after an *at sign* `@` (including `@` itself).\r\n\r\n```\r\nemail.ifPresent(\r\n    s -&gt; myBuilder.set(\r\n        UserName,\r\n        s.replaceFirst(&quot;@.*&quot;, &quot;&quot;))\r\n    );\r\n```\r\n\r\nBy the way, since you&#39;ve specified `email` variable with `private` access modifier, obviously it&#39;s a field. Hence, it is worth to point out that having field of `Optional` type isn&#39;t very beneficial. The common practice is to unpack the optional before instantiating the object, rather than storing a potentially empty optional (for instance, in some cases it might make no sense to create a new domain object if the optional doesn&#39;t contain data, e.g. : user without email can not exist).\r\n\r\nYou might be interested in reading these Questions:\r\n\r\n* [*Should Java 8 getters return optional type?*](https://stackoverflow.com/questions/26327957/should-java-8-getters-return-optional-type/26328555#26328555)\r\n\r\n* [Uses for Optional](https://stackoverflow.com/questions/23454952/uses-for-optional/23464794#23464794)\r\n\r\n\r\n\r\n   [replaceFirst]: https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html#replaceFirst(java.lang.String,java.lang.String)\r\n","title":"How to extract only the first word from a Java Optional String using a delimiter","body":"<p>You don't need to generate a Stream.</p>\n<p>Instead, you can make use of the <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html#replaceFirst(java.lang.String,java.lang.String)\" rel=\"nofollow noreferrer\"><code>String.replaceFirst()</code></a>, which expects a regular expression and a replacing String, like that <code>replaceFirst(&quot;@.*&quot;, &quot;&quot;)</code>, which will remove everything after an <em>at sign</em> <code>@</code> (including <code>@</code> itself).</p>\n<pre><code>email.ifPresent(\n    s -&gt; myBuilder.set(\n        UserName,\n        s.replaceFirst(&quot;@.*&quot;, &quot;&quot;))\n    );\n</code></pre>\n<p>By the way, since you've specified <code>email</code> variable with <code>private</code> access modifier, obviously it's a field. Hence, it is worth to point out that having field of <code>Optional</code> type isn't very beneficial. The common practice is to unpack the optional before instantiating the object, rather than storing a potentially empty optional (for instance, in some cases it might make no sense to create a new domain object if the optional doesn't contain data, e.g. : user without email can not exist).</p>\n<p>You might be interested in reading these Questions:</p>\n<ul>\n<li><p><a href=\"https://stackoverflow.com/questions/26327957/should-java-8-getters-return-optional-type/26328555#26328555\"><em>Should Java 8 getters return optional type?</em></a></p>\n</li>\n<li><p><a href=\"https://stackoverflow.com/questions/23454952/uses-for-optional/23464794#23464794\">Uses for Optional</a></p>\n</li>\n</ul>\n"}],"owner":{"account_id":16340177,"reputation":87,"user_id":11801256,"display_name":"Sonya  gold"},"comment_count":8,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":138,"favorite_count":0,"down_vote_count":5,"up_vote_count":2,"answer_count":1,"score":-3,"last_activity_date":1669643212,"creation_date":1669635793,"question_id":74600079,"body_markdown":"I got this Optional String (non-null) for which I want to extract only the first word (in this case – username, out of an email address). What is the best way to do it with Optional, given the fact I can disregard everything after the delimiter (&#39;@&#39;, in this case). I do not want a stream as a result, just a single string.\r\n\r\n```java\r\n@NonNull private final Optional&lt;String&gt; email;\r\n\r\nemail.ifPresent(s -&gt; myBuilder.set(UserName, s));\r\n```\r\n\r\nSo an input for example: hello@domain.com\r\n\r\nDesired results: hello\r\n\r\n\r\nTried in many ways but theres always some sort of limitation with this Optional string &amp; streams. I am new to it so I&#39;m sure there&#39;s something I don&#39;t understand properly.\r\n\r\n```java\r\nOptional&lt;String&gt; userName = Stream.of(email)\r\n    .filter(Optional::isPresent)\r\n    .map(Optional::get)\r\n    .&lt;What&#39;s next?&gt;\r\n```\r\n\r\nOr\r\n\r\n```java\r\nif (email.isPresent()) {\r\n    Optional &lt;String&gt; userName = Pattern.compile(&quot;@&quot;).splitAsStream(email).toString();\r\n}\r\n```\r\n\r\nDoesn&#39;t compile but I know it is wrong.\r\n\r\nedit:\r\n\r\nI looked up https://stackoverflow.com/questions/10386025/trim-domain-xxx-from-email-leaving-just-username but it doesn&#39;t help me because this is not a regular string but Optional &amp; streams. Also, I do not want to get an array of results but a single result\r\n\r\n\r\nedit2:\r\n\r\n```java\r\nif (email.isPresent()) {\r\n    Optional&lt;String&gt; newAccountName = Arrays.stream(email.get().split(&quot;@&quot;)).findFirst();\r\n}\r\n```\r\n\r\nIs this the right way to go? ","title":"How to extract only the first word from a Java Optional String using a delimiter","body":"<p>I got this Optional String (non-null) for which I want to extract only the first word (in this case – username, out of an email address). What is the best way to do it with Optional, given the fact I can disregard everything after the delimiter ('@', in this case). I do not want a stream as a result, just a single string.</p>\n<pre class=\"lang-java prettyprint-override\"><code>@NonNull private final Optional&lt;String&gt; email;\n\nemail.ifPresent(s -&gt; myBuilder.set(UserName, s));\n</code></pre>\n<p>So an input for example: hello@domain.com</p>\n<p>Desired results: hello</p>\n<p>Tried in many ways but theres always some sort of limitation with this Optional string &amp; streams. I am new to it so I'm sure there's something I don't understand properly.</p>\n<pre class=\"lang-java prettyprint-override\"><code>Optional&lt;String&gt; userName = Stream.of(email)\n    .filter(Optional::isPresent)\n    .map(Optional::get)\n    .&lt;What's next?&gt;\n</code></pre>\n<p>Or</p>\n<pre class=\"lang-java prettyprint-override\"><code>if (email.isPresent()) {\n    Optional &lt;String&gt; userName = Pattern.compile(&quot;@&quot;).splitAsStream(email).toString();\n}\n</code></pre>\n<p>Doesn't compile but I know it is wrong.</p>\n<p>edit:</p>\n<p>I looked up <a href=\"https://stackoverflow.com/questions/10386025/trim-domain-xxx-from-email-leaving-just-username\">trim @domain.xxx from email leaving just username</a> but it doesn't help me because this is not a regular string but Optional &amp; streams. Also, I do not want to get an array of results but a single result</p>\n<p>edit2:</p>\n<pre class=\"lang-java prettyprint-override\"><code>if (email.isPresent()) {\n    Optional&lt;String&gt; newAccountName = Arrays.stream(email.get().split(&quot;@&quot;)).findFirst();\n}\n</code></pre>\n<p>Is this the right way to go?</p>\n"},{"tags":["java","memory","java-11","metaspace"],"comments":[{"owner":{"account_id":3211603,"reputation":289297,"user_id":2711488,"display_name":"Holger"},"score":1,"creation_date":1669720113,"post_id":74601458,"comment_id":131701792,"body_markdown":"https://blog.arkey.fr/2020/10/27/maxrampercentage-is-not-what-i-wished-for/","body":"<a href=\"https://blog.arkey.fr/2020/10/27/maxrampercentage-is-not-what-i-wished-for/\" rel=\"nofollow noreferrer\">blog.arkey.fr/2020/10/27/&hellip;</a>"},{"owner":{"account_id":6717152,"reputation":86,"user_id":5178626,"display_name":"Christopher"},"score":0,"creation_date":1669725972,"post_id":74601458,"comment_id":131703778,"body_markdown":"Nice article, thanks! But if I got why this is happening I would still like to know of there&#39;s a solution that doesn&#39;t involve hard coded limits.","body":"Nice article, thanks! But if I got why this is happening I would still like to know of there&#39;s a solution that doesn&#39;t involve hard coded limits."},{"owner":{"account_id":3211603,"reputation":289297,"user_id":2711488,"display_name":"Holger"},"score":1,"creation_date":1669735619,"post_id":74601458,"comment_id":131707478,"body_markdown":"The point is, `MaxRAMPercentage` is supposed to set the heap size and it does what it is supposed to do, as indicated by the `MaxHeapSize = 1048576000`. Which is the same as `-XX:MaxRAM=1G`. So when you say your problem is that you “didn&#39;t find any way to set the heap with percentage”, the problem has been solved.","body":"The point is, <code>MaxRAMPercentage</code> is supposed to set the heap size and it does what it is supposed to do, as indicated by the <code>MaxHeapSize = 1048576000</code>. Which is the same as <code>-XX:MaxRAM=1G</code>. So when you say your problem is that you “didn&#39;t find any way to set the heap with percentage”, the problem has been solved."}],"owner":{"account_id":6717152,"reputation":86,"user_id":5178626,"display_name":"Christopher"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":589,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1669642765,"creation_date":1669642765,"question_id":74601458,"body_markdown":"I&#39;m facing a problem with JDK 11 with a container running Tomcat 9.0.68.\r\n\r\nShort story: the pod get evicted beacuse it exceeds the maximum memory.\r\n\r\nI have the following container set up on helm (I know that limits and requests should be the same, but I noticed this way the restart count is lower):\r\n```\r\n  containers:\r\n    tomcat:\r\n      resources:\r\n        limits:\r\n          cpu: 1000m\r\n          memory: 2000Mi\r\n        requests:\r\n          cpu: 50m\r\n          memory: 2000Mi\r\n```\r\n\r\nAnd I&#39;ve enabled the following memory related JAVA_OPTS:\r\n\r\n`-XX:+UnlockExperimentalVMOptions -XX:+UseContainerSupport -XX:MaxRAMPercentage=50.0`\r\n\r\nThe heap got sized correctly but I guess my problem is related to the non-heap part of the allocation. In fact if I run:\r\n`java -XX:+UnlockExperimentalVMOptions -XX:+UseContainerSupport -XX:MaxRAMPercentage=50.0 -XX:+PrintFlagsFinal -version | grep -Ei &#39;Heap|RAM|version&#39;`\r\n\r\nThis is the result:\r\n```\r\n   bool AggressiveHeap                           = false                                     {product} {default}\r\n    ccstr AllocateHeapAt                           =                                           {product} {default}\r\n   size_t EpsilonMinHeapExpand                     = 134217728                            {experimental} {default}\r\n   size_t EpsilonPrintHeapSteps                    = 20                                   {experimental} {default}\r\n   size_t ErgoHeapSizeLimit                        = 0                                         {product} {default}\r\n   size_t G1HeapRegionSize                         = 0                                         {product} {default}\r\n    uintx G1HeapWastePercent                       = 5                                         {product} {default}\r\n    uintx GCHeapFreeLimit                          = 2                                         {product} {default}\r\n   size_t HeapBaseMinAddress                       = 2147483648                             {pd product} {default}\r\n     bool HeapDumpAfterFullGC                      = false                                  {manageable} {default}\r\n     bool HeapDumpBeforeFullGC                     = false                                  {manageable} {default}\r\n     bool HeapDumpOnOutOfMemoryError               = false                                  {manageable} {default}\r\n    ccstr HeapDumpPath                             =                                        {manageable} {default}\r\n    uintx HeapFirstMaximumCompactionCount          = 3                                         {product} {default}\r\n    uintx HeapMaximumCompactionInterval            = 20                                        {product} {default}\r\n    uintx HeapSearchSteps                          = 3                                         {product} {default}\r\n   size_t HeapSizePerGCThread                      = 43620760                                  {product} {default}\r\n   size_t InitialHeapSize                          = 33554432                                  {product} {ergonomic}\r\n    uintx InitialRAMFraction                       = 64                                        {product} {default}\r\n   double InitialRAMPercentage                     = 1.562500                                  {product} {default}\r\n    uintx InitiatingHeapOccupancyPercent           = 45                                        {product} {default}\r\n   size_t LargePageHeapSizeThreshold               = 134217728                                 {product} {default}\r\n    uintx MaxHeapFreeRatio                         = 70                                     {manageable} {default}\r\n   size_t MaxHeapSize                              = 1048576000                                {product} {ergonomic}\r\n uint64_t MaxRAM                                   = 137438953472                           {pd product} {default}\r\n    uintx MaxRAMFraction                           = 4                                         {product} {default}\r\n   double MaxRAMPercentage                         = 50.000000                                 {product} {command line}\r\n   size_t MinHeapDeltaBytes                        = 196608                                    {product} {ergonomic}\r\n    uintx MinHeapFreeRatio                         = 40                                     {manageable} {default}\r\n    uintx MinRAMFraction                           = 2                                         {product} {default}\r\n   double MinRAMPercentage                         = 50.000000                                 {product} {default}\r\n    uintx NonNMethodCodeHeapSize                   = 5825164                                {pd product} {ergonomic}\r\n    uintx NonProfiledCodeHeapSize                  = 122916538                              {pd product} {ergonomic}\r\n     bool PostLoopMultiversioning                  = false                             {C2 experimental} {default}\r\n     bool PreserveFramePointer                     = false                                  {pd product} {default}\r\n     bool PrintClassHistogram                      = false                                  {manageable} {default}\r\n     bool PrintHeapAtSIGBREAK                      = true                                      {product} {default}\r\n    uintx ProfiledCodeHeapSize                     = 122916538                              {pd product} {ergonomic}\r\n   size_t ShenandoahSoftMaxHeapSize                = 0                                      {manageable} {default}\r\n     bool ShrinkHeapInSteps                        = true                                      {product} {default}\r\nopenjdk version &quot;11.0.16.1&quot; 2022-08-12\r\nOpenJDK Runtime Environment Temurin-11.0.16.1+1 (build 11.0.16.1+1)\r\nOpenJDK 64-Bit Server VM Temurin-11.0.16.1+1 (build 11.0.16.1+1, mixed mode, sharing)\r\n```\r\n\r\n\r\nI think the problem is the JVM is not reading correctly the RAM assigned to the POD, correct me if I&#39;m wrong.\r\n\r\nI found that I can force the MaxRAM with the -XX:MaxRAM flag and I can also force the maximum metaspace size with the -XX:MaxMetaspaceSize parameters.\r\n\r\nThat said I guess that if set something like -XX:MaxRAM=2G and -XX:MaxMetaspaceSize=1G the problem should solve right? (couldn&#39;t try this yet)\r\n\r\nAnyway this solution would require to set options based on the limits assigned and I didn&#39;t find any way to set the heap with percentage and still it would be not applicable as long as the JVM reads 137GB of RAM.\r\n\r\nSo I would like to know if anyone has faced the same problem and how to solve this without hardcoding the memory limits.\r\n\r\n\r\nNote:\r\nI saw also this question:\r\nhttps://stackoverflow.com/questions/57031566/why-is-java-showing-maxram-to-128gb\r\n\r\nBut the only answer doesn&#39;t explain how to avoid this","title":"JDK11: JVM MaxRAM wrong value on Kubernetes","body":"<p>I'm facing a problem with JDK 11 with a container running Tomcat 9.0.68.</p>\n<p>Short story: the pod get evicted beacuse it exceeds the maximum memory.</p>\n<p>I have the following container set up on helm (I know that limits and requests should be the same, but I noticed this way the restart count is lower):</p>\n<pre><code>  containers:\n    tomcat:\n      resources:\n        limits:\n          cpu: 1000m\n          memory: 2000Mi\n        requests:\n          cpu: 50m\n          memory: 2000Mi\n</code></pre>\n<p>And I've enabled the following memory related JAVA_OPTS:</p>\n<p><code>-XX:+UnlockExperimentalVMOptions -XX:+UseContainerSupport -XX:MaxRAMPercentage=50.0</code></p>\n<p>The heap got sized correctly but I guess my problem is related to the non-heap part of the allocation. In fact if I run:\n<code>java -XX:+UnlockExperimentalVMOptions -XX:+UseContainerSupport -XX:MaxRAMPercentage=50.0 -XX:+PrintFlagsFinal -version | grep -Ei 'Heap|RAM|version'</code></p>\n<p>This is the result:</p>\n<pre><code>   bool AggressiveHeap                           = false                                     {product} {default}\n    ccstr AllocateHeapAt                           =                                           {product} {default}\n   size_t EpsilonMinHeapExpand                     = 134217728                            {experimental} {default}\n   size_t EpsilonPrintHeapSteps                    = 20                                   {experimental} {default}\n   size_t ErgoHeapSizeLimit                        = 0                                         {product} {default}\n   size_t G1HeapRegionSize                         = 0                                         {product} {default}\n    uintx G1HeapWastePercent                       = 5                                         {product} {default}\n    uintx GCHeapFreeLimit                          = 2                                         {product} {default}\n   size_t HeapBaseMinAddress                       = 2147483648                             {pd product} {default}\n     bool HeapDumpAfterFullGC                      = false                                  {manageable} {default}\n     bool HeapDumpBeforeFullGC                     = false                                  {manageable} {default}\n     bool HeapDumpOnOutOfMemoryError               = false                                  {manageable} {default}\n    ccstr HeapDumpPath                             =                                        {manageable} {default}\n    uintx HeapFirstMaximumCompactionCount          = 3                                         {product} {default}\n    uintx HeapMaximumCompactionInterval            = 20                                        {product} {default}\n    uintx HeapSearchSteps                          = 3                                         {product} {default}\n   size_t HeapSizePerGCThread                      = 43620760                                  {product} {default}\n   size_t InitialHeapSize                          = 33554432                                  {product} {ergonomic}\n    uintx InitialRAMFraction                       = 64                                        {product} {default}\n   double InitialRAMPercentage                     = 1.562500                                  {product} {default}\n    uintx InitiatingHeapOccupancyPercent           = 45                                        {product} {default}\n   size_t LargePageHeapSizeThreshold               = 134217728                                 {product} {default}\n    uintx MaxHeapFreeRatio                         = 70                                     {manageable} {default}\n   size_t MaxHeapSize                              = 1048576000                                {product} {ergonomic}\n uint64_t MaxRAM                                   = 137438953472                           {pd product} {default}\n    uintx MaxRAMFraction                           = 4                                         {product} {default}\n   double MaxRAMPercentage                         = 50.000000                                 {product} {command line}\n   size_t MinHeapDeltaBytes                        = 196608                                    {product} {ergonomic}\n    uintx MinHeapFreeRatio                         = 40                                     {manageable} {default}\n    uintx MinRAMFraction                           = 2                                         {product} {default}\n   double MinRAMPercentage                         = 50.000000                                 {product} {default}\n    uintx NonNMethodCodeHeapSize                   = 5825164                                {pd product} {ergonomic}\n    uintx NonProfiledCodeHeapSize                  = 122916538                              {pd product} {ergonomic}\n     bool PostLoopMultiversioning                  = false                             {C2 experimental} {default}\n     bool PreserveFramePointer                     = false                                  {pd product} {default}\n     bool PrintClassHistogram                      = false                                  {manageable} {default}\n     bool PrintHeapAtSIGBREAK                      = true                                      {product} {default}\n    uintx ProfiledCodeHeapSize                     = 122916538                              {pd product} {ergonomic}\n   size_t ShenandoahSoftMaxHeapSize                = 0                                      {manageable} {default}\n     bool ShrinkHeapInSteps                        = true                                      {product} {default}\nopenjdk version &quot;11.0.16.1&quot; 2022-08-12\nOpenJDK Runtime Environment Temurin-11.0.16.1+1 (build 11.0.16.1+1)\nOpenJDK 64-Bit Server VM Temurin-11.0.16.1+1 (build 11.0.16.1+1, mixed mode, sharing)\n</code></pre>\n<p>I think the problem is the JVM is not reading correctly the RAM assigned to the POD, correct me if I'm wrong.</p>\n<p>I found that I can force the MaxRAM with the -XX:MaxRAM flag and I can also force the maximum metaspace size with the -XX:MaxMetaspaceSize parameters.</p>\n<p>That said I guess that if set something like -XX:MaxRAM=2G and -XX:MaxMetaspaceSize=1G the problem should solve right? (couldn't try this yet)</p>\n<p>Anyway this solution would require to set options based on the limits assigned and I didn't find any way to set the heap with percentage and still it would be not applicable as long as the JVM reads 137GB of RAM.</p>\n<p>So I would like to know if anyone has faced the same problem and how to solve this without hardcoding the memory limits.</p>\n<p>Note:\nI saw also this question:\n<a href=\"https://stackoverflow.com/questions/57031566/why-is-java-showing-maxram-to-128gb\">why is java showing MAXRAM to 128gb</a></p>\n<p>But the only answer doesn't explain how to avoid this</p>\n"},{"tags":["java","spring-boot","junit","spring-security","spring-cloud"],"comments":[{"owner":{"account_id":2866175,"reputation":1531,"user_id":2460460,"display_name":"Sergio Lema"},"score":0,"creation_date":1669838386,"post_id":74586470,"comment_id":131736816,"body_markdown":"Did you check where your requests reach? Do they reach the order-service? Add a breakpoint in the JWT filter of order-service to be sure","body":"Did you check where your requests reach? Do they reach the order-service? Add a breakpoint in the JWT filter of order-service to be sure"},{"owner":{"account_id":7531034,"reputation":1,"user_id":5719229,"display_name":"S.N"},"score":0,"creation_date":1669849883,"post_id":74586470,"comment_id":131739750,"body_markdown":"@SergioLema I revised my code two days ago. I tried to fix it but I&#39;m not sure if it is right or not.","body":"@SergioLema I revised my code two days ago. I tried to fix it but I&#39;m not sure if it is right or not."},{"owner":{"account_id":7531034,"reputation":1,"user_id":5719229,"display_name":"S.N"},"score":0,"creation_date":1670355884,"post_id":74586470,"comment_id":131856497,"body_markdown":"@SergioLema I updated my repository again but I couldn&#39;t run any test method in OrderServiceTest and OrderControllerTest. I hope you can help me?","body":"@SergioLema I updated my repository again but I couldn&#39;t run any test method in OrderServiceTest and OrderControllerTest. I hope you can help me?"}],"owner":{"account_id":7531034,"reputation":1,"user_id":5719229,"display_name":"S.N"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":566,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1669642741,"creation_date":1669506616,"question_id":74586470,"body_markdown":"I have a communication problem in my spring boot microservices.\r\n\r\nI created some services as well as eureka server, api gateway and config server.\r\n\r\nI defined auth service connecting to api gateway for the process of authentication and authorization. I used this service as creating a user, logining and refreshing token.\r\n\r\nAfter I created a user and login in auth service through the port number of api gateway, I tried to make a request to the order service like `http://localhost:9090/order/placeorder` or `http://localhost:9090/order/{order_id}` but I got 403 forbidden issue.\r\n\r\nI knew there can be spring security problem among api gateway, auth service and order service but I couldn&#39;t find where the issue is.\r\n\r\nExcept for that, I cannot run any test method defined in OrderControllerTest because of this reason.\r\n\r\nHow can I fix these issues?\r\n\r\nI shared some code snippets regarding security config defined in 2 services and api gateway and gateway filter located in api gateway. \r\n\r\nHere is **SecurityConfig** in **auth service**.\r\n\r\n    @Configuration\r\n    @EnableWebSecurity\r\n    @EnableGlobalMethodSecurity(prePostEnabled = true)\r\n    @RequiredArgsConstructor\r\n    public class SecurityConfig {\r\n    \r\n        private final JwtAuthenticationEntryPoint authenticationEntryPoint;\r\n        private final JWTAccessDeniedHandler accessDeniedHandler;\r\n        private final JwtUtils jwtUtils;\r\n        private final CustomUserDetailsService customUserDetailsService;\r\n    \r\n        @Bean\r\n        public AuthenticationManager authenticationManager(final AuthenticationConfiguration authenticationConfiguration) throws Exception {\r\n            return authenticationConfiguration.getAuthenticationManager();\r\n        }\r\n    \r\n        @Bean\r\n        public PasswordEncoder passwordEncoder() {\r\n            return new BCryptPasswordEncoder();\r\n        }\r\n    \r\n    \r\n        @Bean\r\n        public SecurityFilterChain filterChain(HttpSecurity http) throws Exception {\r\n            return http\r\n                    .headers().frameOptions().disable().and()\r\n                    .csrf().disable()\r\n                    .cors().and()\r\n                    .authorizeRequests(auth -&gt; {\r\n                        auth.anyRequest().authenticated();\r\n                    })\r\n                    .formLogin().disable()\r\n                    .httpBasic().disable()\r\n                    .exceptionHandling().accessDeniedHandler(accessDeniedHandler)\r\n                    .authenticationEntryPoint(authenticationEntryPoint)\r\n                    .and()\r\n                    .sessionManagement().sessionCreationPolicy(SessionCreationPolicy.STATELESS)\r\n                    .and()\r\n                    .addFilterBefore(authenticationJwtTokenFilter(jwtUtils,customUserDetailsService), UsernamePasswordAuthenticationFilter.class)\r\n                    .build();\r\n        }\r\n    \r\n        @Bean\r\n        public WebSecurityCustomizer webSecurityCustomizer() {\r\n            return (web) -&gt; web.ignoring().antMatchers(&quot;/authenticate/signup&quot;,&quot;/authenticate/login&quot;, &quot;/authenticate/refreshtoken&quot;);\r\n        }\r\n    \r\n        @Bean\r\n        public AuthTokenFilter authenticationJwtTokenFilter(JwtUtils jwtUtils, CustomUserDetailsService customUserDetailsService) {\r\n            return new AuthTokenFilter(jwtUtils, customUserDetailsService);\r\n        }\r\n    }\r\n\r\nHere is **SecurityConfig** in **api gateway**.\r\n\r\n    @Configuration\r\n    @EnableWebFluxSecurity\r\n    public class SecurityConfig {\r\n    \r\n        @Bean\r\n        public SecurityWebFilterChain springSecurityFilterChain(ServerHttpSecurity serverHttpSecurity){\r\n    \r\n            serverHttpSecurity.cors().and().csrf().disable()\r\n                    .authorizeExchange(exchange -&gt; exchange\r\n                            .anyExchange()\r\n                            .permitAll());\r\n            return serverHttpSecurity.build();\r\n        }\r\n    \r\n    \r\n    }\r\n\r\nHere is the **gatewayconfig** in **api gateway**\r\n\r\n    @Configuration\r\n    @RequiredArgsConstructor\r\n    public class GatewayConfig {\r\n    \r\n        private final JwtAuthenticationFilter filter;\r\n    \r\n        @Bean\r\n        public RouteLocator routes(RouteLocatorBuilder builder) {\r\n            return builder.routes().route(&quot;AUTH-SERVICE&quot;, r -&gt; r.path(&quot;/authenticate/**&quot;).filters(f -&gt; f.filter(filter)).uri(&quot;lb://AUTH-SERVICE&quot;))\r\n                    .route(&quot;PRODUCT-SERVICE&quot;, r -&gt; r.path(&quot;/product/**&quot;).filters(f -&gt; f.filter(filter)).uri(&quot;lb://PRODUCT-SERVICE&quot;))\r\n                    .route(&quot;PAYMENT-SERVICE&quot;, r -&gt; r.path(&quot;/payment/**&quot;).filters(f -&gt; f.filter(filter)).uri(&quot;lb://PAYMENT-SERVICE&quot;))\r\n                    .route(&quot;ORDER-SERVICE&quot;, r -&gt; r.path(&quot;/order/**&quot;).filters(f -&gt; f.filter(filter)).uri(&quot;lb://ORDER-SERVICE&quot;)).build();\r\n        }\r\n    }\r\n\r\nHere is **SecurityConfig** in **order service**.\r\n\r\n\r\n    @Configuration\r\n    @EnableWebSecurity\r\n    @EnableGlobalMethodSecurity(prePostEnabled = true)\r\n    public class WebSecurityConfig {\r\n    \r\n        @Bean\r\n        public SecurityFilterChain securityWebFilterChain(HttpSecurity http) throws Exception {\r\n            http.csrf().disable()\r\n                    .authorizeRequests()\r\n                    .antMatchers(&quot;/order/**&quot;)\r\n                         .access(&quot;hasAnyAuthority(&#39;ROLE_USER&#39;) or hasAnyAuthority(&#39;ROLE_ADMIN&#39;)&quot;);\r\n            return http.build();\r\n        }\r\n    }\r\n\r\nHere is the **OrderControllerTest** shown below.\r\n\r\n    @SpringBootTest({&quot;server.port=0&quot;})\r\n    @EnableConfigurationProperties\r\n    @AutoConfigureMockMvc\r\n    @ContextConfiguration(classes = {OrderServiceConfig.class})\r\n    @ActiveProfiles(&quot;test&quot;)\r\n    public class OrderControllerTest {\r\n    \r\n        @RegisterExtension\r\n        static WireMockExtension wireMockserver\r\n                = WireMockExtension.newInstance()\r\n                .options(WireMockConfiguration\r\n                        .wireMockConfig()\r\n                        .port(8080))\r\n                .build();\r\n    \r\n        @Autowired\r\n        private OrderService orderService;\r\n        @Autowired\r\n        private OrderRepository orderRepository;\r\n    \r\n        @Autowired\r\n        private MockMvc mockMvc;\r\n        private ObjectMapper objectMapper\r\n                = new ObjectMapper()\r\n                .findAndRegisterModules()\r\n                .configure(SerializationFeature.WRITE_DATES_AS_TIMESTAMPS, false)\r\n                .configure(DeserializationFeature.FAIL_ON_UNKNOWN_PROPERTIES, false);\r\n    \r\n        @Autowired\r\n        JwtUtils jwtUtils;\r\n    \r\n        @BeforeEach\r\n        void setup() throws IOException {\r\n            getProductDetailsResponse();\r\n            doPayment();\r\n            getPaymentDetails();\r\n            reduceQuantity();\r\n        }\r\n    \r\n        private void reduceQuantity() {\r\n            wireMockserver.stubFor(put(urlMatching(&quot;/product/reduceQuantity/.*&quot;))\r\n                    .willReturn(aResponse()\r\n                            .withStatus(HttpStatus.OK.value())\r\n                            .withHeader(&quot;Content-Type&quot;, MediaType.APPLICATION_JSON_VALUE)));\r\n        }\r\n    \r\n        private void getPaymentDetails() throws IOException {\r\n            wireMockserver.stubFor(get(&quot;/payment/order/1&quot;)\r\n                    .willReturn(aResponse()\r\n                            .withHeader(&quot;Content-Type&quot;, MediaType.APPLICATION_JSON_VALUE)\r\n                            .withStatus(HttpStatus.OK.value())\r\n                            .withBody(copyToString(OrderControllerTest.class.getClassLoader().getResourceAsStream(&quot;mock/GetPayment.json&quot;), defaultCharset()))));\r\n        }\r\n    \r\n        private void doPayment() {\r\n            wireMockserver.stubFor(post(urlEqualTo(&quot;/payment&quot;))\r\n                    .willReturn(aResponse()\r\n                            .withStatus(HttpStatus.OK.value())\r\n                            .withHeader(&quot;Content-Type&quot;, MediaType.APPLICATION_JSON_VALUE)));\r\n        }\r\n    \r\n        private void getProductDetailsResponse() throws IOException {\r\n    \r\n            wireMockserver.stubFor(get(&quot;/product/1&quot;)\r\n                    .willReturn(aResponse()\r\n                            .withStatus(HttpStatus.OK.value())\r\n                            .withHeader(&quot;Content-Type&quot;, MediaType.APPLICATION_JSON_VALUE)\r\n                            .withBody(copyToString(\r\n                                    OrderControllerTest.class\r\n                                            .getClassLoader()\r\n                                            .getResourceAsStream(&quot;mock/GetProduct.json&quot;),\r\n                                    defaultCharset()))));\r\n        }\r\n    \r\n        private OrderRequest getMockOrderRequest() {\r\n            return OrderRequest.builder()\r\n                    .productId(1)\r\n                    .paymentMode(PaymentMode.CASH)\r\n                    .quantity(1)\r\n                    .totalAmount(100)\r\n                    .build();\r\n        }\r\n    \r\n        @Test\r\n        @DisplayName(&quot;Place Order -- Success Scenario&quot;)\r\n        @WithMockUser(username = &quot;User&quot;, authorities = { &quot;ROLE_USER&quot; })\r\n        void test_When_placeOrder_DoPayment_Success() throws Exception {\r\n    \r\n            OrderRequest orderRequest = getMockOrderRequest();\r\n            String jwt = getJWTTokenForRoleUser();\r\n    \r\n            MvcResult mvcResult\r\n                    = mockMvc.perform(MockMvcRequestBuilders.post(&quot;/order/placeorder&quot;)\r\n                            .contentType(MediaType.APPLICATION_JSON_VALUE)\r\n                            .header(&quot;Authorization&quot;, &quot;Bearer &quot; + jwt)\r\n                            .content(objectMapper.writeValueAsString(orderRequest)))\r\n                    .andExpect(MockMvcResultMatchers.status().isOk())\r\n                    .andReturn();\r\n    \r\n            String orderId = mvcResult.getResponse().getContentAsString();\r\n    \r\n            Optional&lt;Order&gt; order = orderRepository.findById(Long.valueOf(orderId));\r\n            assertTrue(order.isPresent());\r\n    \r\n            Order o = order.get();\r\n            assertEquals(Long.parseLong(orderId), o.getId());\r\n            assertEquals(&quot;PLACED&quot;, o.getOrderStatus());\r\n            assertEquals(orderRequest.getTotalAmount(), o.getAmount());\r\n            assertEquals(orderRequest.getQuantity(), o.getQuantity());\r\n        }\r\n    \r\n        @Test\r\n        @DisplayName(&quot;Place Order -- Failure Scenario&quot;)\r\n        @WithMockUser(username = &quot;Admin&quot;, authorities = { &quot;ROLE_ADMIN&quot; })\r\n        public void test_When_placeOrder_WithWrongAccess_thenThrow_403() throws Exception {\r\n    \r\n    \r\n            OrderRequest orderRequest = getMockOrderRequest();\r\n            String jwt = getJWTTokenForRoleAdmin();\r\n    \r\n            MvcResult mvcResult\r\n                    = mockMvc.perform(MockMvcRequestBuilders.post(&quot;/order/placeorder&quot;)\r\n                            .header(&quot;Authorization&quot;, &quot;Bearer &quot; + jwt)\r\n                            .contentType(MediaType.APPLICATION_JSON_VALUE)\r\n                            .content(objectMapper.writeValueAsString(orderRequest)))\r\n                    .andExpect(MockMvcResultMatchers.status().isForbidden())\r\n                    .andReturn();\r\n    \r\n        }\r\n    \r\n    \r\n        @Test\r\n        //@WithMockUser(username = &quot;Admin&quot;, authorities = { &quot;ROLE_ADMIN&quot; })\r\n        public void test_WhenGetOrder_Success() throws Exception {\r\n    \r\n            String jwt = getJWTTokenForRoleUser();\r\n    \r\n            MvcResult mvcResult\r\n                    = mockMvc.perform(MockMvcRequestBuilders.get(&quot;/order/1&quot;)\r\n                            .header(&quot;Authorization&quot;, &quot;Bearer &quot; + jwt)\r\n                            .contentType(MediaType.APPLICATION_JSON_VALUE))\r\n                    .andExpect(MockMvcResultMatchers.status().isOk())\r\n                    .andReturn();\r\n    \r\n            String actualResponse = mvcResult.getResponse().getContentAsString();\r\n            Order order = orderRepository.findById(1l).get();\r\n            String expectedResponse = getOrderResponse(order);\r\n    \r\n            assertEquals(expectedResponse,actualResponse);\r\n        }\r\n    \r\n        @Test\r\n        //@WithMockUser(username = &quot;Admin&quot;, authorities = { &quot;ROLE_ADMIN&quot; })\r\n        public void testWhen_GetOrder_Order_Not_Found() throws Exception {\r\n    \r\n            String jwt = getJWTTokenForRoleAdmin();\r\n    \r\n            MvcResult mvcResult\r\n                    = mockMvc.perform(MockMvcRequestBuilders.get(&quot;/order/4&quot;)\r\n                            .header(&quot;Authorization&quot;, &quot;Bearer &quot; + jwt)\r\n                            .contentType(MediaType.APPLICATION_JSON_VALUE))\r\n                    .andExpect(MockMvcResultMatchers.status().isNotFound())\r\n                    .andReturn();\r\n        }\r\n    \r\n        private String getOrderResponse(Order order) throws IOException {\r\n            OrderResponse.PaymentDetails paymentDetails\r\n                    = objectMapper.readValue(\r\n                    copyToString(\r\n                            OrderControllerTest.class.getClassLoader()\r\n                                    .getResourceAsStream(&quot;mock/GetPayment.json&quot;\r\n                                    ),\r\n                            defaultCharset()\r\n                    ), OrderResponse.PaymentDetails.class\r\n            );\r\n            paymentDetails.setPaymentStatus(&quot;SUCCESS&quot;);\r\n    \r\n            OrderResponse.ProductDetails productDetails\r\n                    = objectMapper.readValue(\r\n                    copyToString(\r\n                            OrderControllerTest.class.getClassLoader()\r\n                                    .getResourceAsStream(&quot;mock/GetProduct.json&quot;),\r\n                            defaultCharset()\r\n                    ), OrderResponse.ProductDetails.class\r\n            );\r\n    \r\n            OrderResponse orderResponse\r\n                    = OrderResponse.builder()\r\n                    .paymentDetails(paymentDetails)\r\n                    .productDetails(productDetails)\r\n                    .orderStatus(order.getOrderStatus())\r\n                    .orderDate(order.getOrderDate())\r\n                    .amount(order.getAmount())\r\n                    .orderId(order.getId())\r\n                    .build();\r\n            return objectMapper.writeValueAsString(orderResponse);\r\n        }\r\n    \r\n        private String getJWTTokenForRoleUser(){\r\n    \r\n            var loginRequest = new LoginRequest(&quot;User1&quot;,&quot;user1&quot;);\r\n    \r\n            String jwt = jwtUtils.generateJwtToken(loginRequest.getUsername());\r\n    \r\n            return jwt;\r\n        }\r\n    \r\n        private String getJWTTokenForRoleAdmin(){\r\n    \r\n            var loginRequest = new LoginRequest(&quot;Admin&quot;,&quot;admin&quot;);\r\n    \r\n            String jwt = jwtUtils.generateJwtToken(loginRequest.getUsername());\r\n    \r\n            return jwt;\r\n        }\r\n    \r\n        @Data\r\n        @AllArgsConstructor\r\n        @NoArgsConstructor\r\n        public class LoginRequest {\r\n    \r\n            private String username;\r\n            private String password;\r\n    \r\n        }\r\n    \r\n    }\r\n\r\nHere is the repo : [Link][1]\r\n\r\nHere are the screenshots : [Link][2]\r\n\r\n**To run the app,**\r\n\r\n1 ) Run Service Registery (Eureka Server)\r\n\r\n2 ) Run config server\r\n\r\n3 ) Run zipkin and redis through these commands shown below on docker\r\n\r\n      docker run -d -p 9411:9411 openzipkin/zipkin\r\n      docker run -d --name redis -p 6379:6379 redis\r\n\r\n4 ) Run api gateway\r\n\r\n5 ) Run other services\r\n\r\n\r\n  [1]: https://github.com/Rapter1990/microservicecoursedailybuffer\r\n  [2]: https://drive.google.com/drive/folders/1BCMSj9STszd-GaHWJZE4a0IuLpUcXBxj?usp=sharing\r\n","title":"Spring Boot Microservices (Spring Cloud) , 403 Forbidden among services (Controller and ControllerTest)","body":"<p>I have a communication problem in my spring boot microservices.</p>\n<p>I created some services as well as eureka server, api gateway and config server.</p>\n<p>I defined auth service connecting to api gateway for the process of authentication and authorization. I used this service as creating a user, logining and refreshing token.</p>\n<p>After I created a user and login in auth service through the port number of api gateway, I tried to make a request to the order service like <code>http://localhost:9090/order/placeorder</code> or <code>http://localhost:9090/order/{order_id}</code> but I got 403 forbidden issue.</p>\n<p>I knew there can be spring security problem among api gateway, auth service and order service but I couldn't find where the issue is.</p>\n<p>Except for that, I cannot run any test method defined in OrderControllerTest because of this reason.</p>\n<p>How can I fix these issues?</p>\n<p>I shared some code snippets regarding security config defined in 2 services and api gateway and gateway filter located in api gateway.</p>\n<p>Here is <strong>SecurityConfig</strong> in <strong>auth service</strong>.</p>\n<pre><code>@Configuration\n@EnableWebSecurity\n@EnableGlobalMethodSecurity(prePostEnabled = true)\n@RequiredArgsConstructor\npublic class SecurityConfig {\n\n    private final JwtAuthenticationEntryPoint authenticationEntryPoint;\n    private final JWTAccessDeniedHandler accessDeniedHandler;\n    private final JwtUtils jwtUtils;\n    private final CustomUserDetailsService customUserDetailsService;\n\n    @Bean\n    public AuthenticationManager authenticationManager(final AuthenticationConfiguration authenticationConfiguration) throws Exception {\n        return authenticationConfiguration.getAuthenticationManager();\n    }\n\n    @Bean\n    public PasswordEncoder passwordEncoder() {\n        return new BCryptPasswordEncoder();\n    }\n\n\n    @Bean\n    public SecurityFilterChain filterChain(HttpSecurity http) throws Exception {\n        return http\n                .headers().frameOptions().disable().and()\n                .csrf().disable()\n                .cors().and()\n                .authorizeRequests(auth -&gt; {\n                    auth.anyRequest().authenticated();\n                })\n                .formLogin().disable()\n                .httpBasic().disable()\n                .exceptionHandling().accessDeniedHandler(accessDeniedHandler)\n                .authenticationEntryPoint(authenticationEntryPoint)\n                .and()\n                .sessionManagement().sessionCreationPolicy(SessionCreationPolicy.STATELESS)\n                .and()\n                .addFilterBefore(authenticationJwtTokenFilter(jwtUtils,customUserDetailsService), UsernamePasswordAuthenticationFilter.class)\n                .build();\n    }\n\n    @Bean\n    public WebSecurityCustomizer webSecurityCustomizer() {\n        return (web) -&gt; web.ignoring().antMatchers(&quot;/authenticate/signup&quot;,&quot;/authenticate/login&quot;, &quot;/authenticate/refreshtoken&quot;);\n    }\n\n    @Bean\n    public AuthTokenFilter authenticationJwtTokenFilter(JwtUtils jwtUtils, CustomUserDetailsService customUserDetailsService) {\n        return new AuthTokenFilter(jwtUtils, customUserDetailsService);\n    }\n}\n</code></pre>\n<p>Here is <strong>SecurityConfig</strong> in <strong>api gateway</strong>.</p>\n<pre><code>@Configuration\n@EnableWebFluxSecurity\npublic class SecurityConfig {\n\n    @Bean\n    public SecurityWebFilterChain springSecurityFilterChain(ServerHttpSecurity serverHttpSecurity){\n\n        serverHttpSecurity.cors().and().csrf().disable()\n                .authorizeExchange(exchange -&gt; exchange\n                        .anyExchange()\n                        .permitAll());\n        return serverHttpSecurity.build();\n    }\n\n\n}\n</code></pre>\n<p>Here is the <strong>gatewayconfig</strong> in <strong>api gateway</strong></p>\n<pre><code>@Configuration\n@RequiredArgsConstructor\npublic class GatewayConfig {\n\n    private final JwtAuthenticationFilter filter;\n\n    @Bean\n    public RouteLocator routes(RouteLocatorBuilder builder) {\n        return builder.routes().route(&quot;AUTH-SERVICE&quot;, r -&gt; r.path(&quot;/authenticate/**&quot;).filters(f -&gt; f.filter(filter)).uri(&quot;lb://AUTH-SERVICE&quot;))\n                .route(&quot;PRODUCT-SERVICE&quot;, r -&gt; r.path(&quot;/product/**&quot;).filters(f -&gt; f.filter(filter)).uri(&quot;lb://PRODUCT-SERVICE&quot;))\n                .route(&quot;PAYMENT-SERVICE&quot;, r -&gt; r.path(&quot;/payment/**&quot;).filters(f -&gt; f.filter(filter)).uri(&quot;lb://PAYMENT-SERVICE&quot;))\n                .route(&quot;ORDER-SERVICE&quot;, r -&gt; r.path(&quot;/order/**&quot;).filters(f -&gt; f.filter(filter)).uri(&quot;lb://ORDER-SERVICE&quot;)).build();\n    }\n}\n</code></pre>\n<p>Here is <strong>SecurityConfig</strong> in <strong>order service</strong>.</p>\n<pre><code>@Configuration\n@EnableWebSecurity\n@EnableGlobalMethodSecurity(prePostEnabled = true)\npublic class WebSecurityConfig {\n\n    @Bean\n    public SecurityFilterChain securityWebFilterChain(HttpSecurity http) throws Exception {\n        http.csrf().disable()\n                .authorizeRequests()\n                .antMatchers(&quot;/order/**&quot;)\n                     .access(&quot;hasAnyAuthority('ROLE_USER') or hasAnyAuthority('ROLE_ADMIN')&quot;);\n        return http.build();\n    }\n}\n</code></pre>\n<p>Here is the <strong>OrderControllerTest</strong> shown below.</p>\n<pre><code>@SpringBootTest({&quot;server.port=0&quot;})\n@EnableConfigurationProperties\n@AutoConfigureMockMvc\n@ContextConfiguration(classes = {OrderServiceConfig.class})\n@ActiveProfiles(&quot;test&quot;)\npublic class OrderControllerTest {\n\n    @RegisterExtension\n    static WireMockExtension wireMockserver\n            = WireMockExtension.newInstance()\n            .options(WireMockConfiguration\n                    .wireMockConfig()\n                    .port(8080))\n            .build();\n\n    @Autowired\n    private OrderService orderService;\n    @Autowired\n    private OrderRepository orderRepository;\n\n    @Autowired\n    private MockMvc mockMvc;\n    private ObjectMapper objectMapper\n            = new ObjectMapper()\n            .findAndRegisterModules()\n            .configure(SerializationFeature.WRITE_DATES_AS_TIMESTAMPS, false)\n            .configure(DeserializationFeature.FAIL_ON_UNKNOWN_PROPERTIES, false);\n\n    @Autowired\n    JwtUtils jwtUtils;\n\n    @BeforeEach\n    void setup() throws IOException {\n        getProductDetailsResponse();\n        doPayment();\n        getPaymentDetails();\n        reduceQuantity();\n    }\n\n    private void reduceQuantity() {\n        wireMockserver.stubFor(put(urlMatching(&quot;/product/reduceQuantity/.*&quot;))\n                .willReturn(aResponse()\n                        .withStatus(HttpStatus.OK.value())\n                        .withHeader(&quot;Content-Type&quot;, MediaType.APPLICATION_JSON_VALUE)));\n    }\n\n    private void getPaymentDetails() throws IOException {\n        wireMockserver.stubFor(get(&quot;/payment/order/1&quot;)\n                .willReturn(aResponse()\n                        .withHeader(&quot;Content-Type&quot;, MediaType.APPLICATION_JSON_VALUE)\n                        .withStatus(HttpStatus.OK.value())\n                        .withBody(copyToString(OrderControllerTest.class.getClassLoader().getResourceAsStream(&quot;mock/GetPayment.json&quot;), defaultCharset()))));\n    }\n\n    private void doPayment() {\n        wireMockserver.stubFor(post(urlEqualTo(&quot;/payment&quot;))\n                .willReturn(aResponse()\n                        .withStatus(HttpStatus.OK.value())\n                        .withHeader(&quot;Content-Type&quot;, MediaType.APPLICATION_JSON_VALUE)));\n    }\n\n    private void getProductDetailsResponse() throws IOException {\n\n        wireMockserver.stubFor(get(&quot;/product/1&quot;)\n                .willReturn(aResponse()\n                        .withStatus(HttpStatus.OK.value())\n                        .withHeader(&quot;Content-Type&quot;, MediaType.APPLICATION_JSON_VALUE)\n                        .withBody(copyToString(\n                                OrderControllerTest.class\n                                        .getClassLoader()\n                                        .getResourceAsStream(&quot;mock/GetProduct.json&quot;),\n                                defaultCharset()))));\n    }\n\n    private OrderRequest getMockOrderRequest() {\n        return OrderRequest.builder()\n                .productId(1)\n                .paymentMode(PaymentMode.CASH)\n                .quantity(1)\n                .totalAmount(100)\n                .build();\n    }\n\n    @Test\n    @DisplayName(&quot;Place Order -- Success Scenario&quot;)\n    @WithMockUser(username = &quot;User&quot;, authorities = { &quot;ROLE_USER&quot; })\n    void test_When_placeOrder_DoPayment_Success() throws Exception {\n\n        OrderRequest orderRequest = getMockOrderRequest();\n        String jwt = getJWTTokenForRoleUser();\n\n        MvcResult mvcResult\n                = mockMvc.perform(MockMvcRequestBuilders.post(&quot;/order/placeorder&quot;)\n                        .contentType(MediaType.APPLICATION_JSON_VALUE)\n                        .header(&quot;Authorization&quot;, &quot;Bearer &quot; + jwt)\n                        .content(objectMapper.writeValueAsString(orderRequest)))\n                .andExpect(MockMvcResultMatchers.status().isOk())\n                .andReturn();\n\n        String orderId = mvcResult.getResponse().getContentAsString();\n\n        Optional&lt;Order&gt; order = orderRepository.findById(Long.valueOf(orderId));\n        assertTrue(order.isPresent());\n\n        Order o = order.get();\n        assertEquals(Long.parseLong(orderId), o.getId());\n        assertEquals(&quot;PLACED&quot;, o.getOrderStatus());\n        assertEquals(orderRequest.getTotalAmount(), o.getAmount());\n        assertEquals(orderRequest.getQuantity(), o.getQuantity());\n    }\n\n    @Test\n    @DisplayName(&quot;Place Order -- Failure Scenario&quot;)\n    @WithMockUser(username = &quot;Admin&quot;, authorities = { &quot;ROLE_ADMIN&quot; })\n    public void test_When_placeOrder_WithWrongAccess_thenThrow_403() throws Exception {\n\n\n        OrderRequest orderRequest = getMockOrderRequest();\n        String jwt = getJWTTokenForRoleAdmin();\n\n        MvcResult mvcResult\n                = mockMvc.perform(MockMvcRequestBuilders.post(&quot;/order/placeorder&quot;)\n                        .header(&quot;Authorization&quot;, &quot;Bearer &quot; + jwt)\n                        .contentType(MediaType.APPLICATION_JSON_VALUE)\n                        .content(objectMapper.writeValueAsString(orderRequest)))\n                .andExpect(MockMvcResultMatchers.status().isForbidden())\n                .andReturn();\n\n    }\n\n\n    @Test\n    //@WithMockUser(username = &quot;Admin&quot;, authorities = { &quot;ROLE_ADMIN&quot; })\n    public void test_WhenGetOrder_Success() throws Exception {\n\n        String jwt = getJWTTokenForRoleUser();\n\n        MvcResult mvcResult\n                = mockMvc.perform(MockMvcRequestBuilders.get(&quot;/order/1&quot;)\n                        .header(&quot;Authorization&quot;, &quot;Bearer &quot; + jwt)\n                        .contentType(MediaType.APPLICATION_JSON_VALUE))\n                .andExpect(MockMvcResultMatchers.status().isOk())\n                .andReturn();\n\n        String actualResponse = mvcResult.getResponse().getContentAsString();\n        Order order = orderRepository.findById(1l).get();\n        String expectedResponse = getOrderResponse(order);\n\n        assertEquals(expectedResponse,actualResponse);\n    }\n\n    @Test\n    //@WithMockUser(username = &quot;Admin&quot;, authorities = { &quot;ROLE_ADMIN&quot; })\n    public void testWhen_GetOrder_Order_Not_Found() throws Exception {\n\n        String jwt = getJWTTokenForRoleAdmin();\n\n        MvcResult mvcResult\n                = mockMvc.perform(MockMvcRequestBuilders.get(&quot;/order/4&quot;)\n                        .header(&quot;Authorization&quot;, &quot;Bearer &quot; + jwt)\n                        .contentType(MediaType.APPLICATION_JSON_VALUE))\n                .andExpect(MockMvcResultMatchers.status().isNotFound())\n                .andReturn();\n    }\n\n    private String getOrderResponse(Order order) throws IOException {\n        OrderResponse.PaymentDetails paymentDetails\n                = objectMapper.readValue(\n                copyToString(\n                        OrderControllerTest.class.getClassLoader()\n                                .getResourceAsStream(&quot;mock/GetPayment.json&quot;\n                                ),\n                        defaultCharset()\n                ), OrderResponse.PaymentDetails.class\n        );\n        paymentDetails.setPaymentStatus(&quot;SUCCESS&quot;);\n\n        OrderResponse.ProductDetails productDetails\n                = objectMapper.readValue(\n                copyToString(\n                        OrderControllerTest.class.getClassLoader()\n                                .getResourceAsStream(&quot;mock/GetProduct.json&quot;),\n                        defaultCharset()\n                ), OrderResponse.ProductDetails.class\n        );\n\n        OrderResponse orderResponse\n                = OrderResponse.builder()\n                .paymentDetails(paymentDetails)\n                .productDetails(productDetails)\n                .orderStatus(order.getOrderStatus())\n                .orderDate(order.getOrderDate())\n                .amount(order.getAmount())\n                .orderId(order.getId())\n                .build();\n        return objectMapper.writeValueAsString(orderResponse);\n    }\n\n    private String getJWTTokenForRoleUser(){\n\n        var loginRequest = new LoginRequest(&quot;User1&quot;,&quot;user1&quot;);\n\n        String jwt = jwtUtils.generateJwtToken(loginRequest.getUsername());\n\n        return jwt;\n    }\n\n    private String getJWTTokenForRoleAdmin(){\n\n        var loginRequest = new LoginRequest(&quot;Admin&quot;,&quot;admin&quot;);\n\n        String jwt = jwtUtils.generateJwtToken(loginRequest.getUsername());\n\n        return jwt;\n    }\n\n    @Data\n    @AllArgsConstructor\n    @NoArgsConstructor\n    public class LoginRequest {\n\n        private String username;\n        private String password;\n\n    }\n\n}\n</code></pre>\n<p>Here is the repo : <a href=\"https://github.com/Rapter1990/microservicecoursedailybuffer\" rel=\"nofollow noreferrer\">Link</a></p>\n<p>Here are the screenshots : <a href=\"https://drive.google.com/drive/folders/1BCMSj9STszd-GaHWJZE4a0IuLpUcXBxj?usp=sharing\" rel=\"nofollow noreferrer\">Link</a></p>\n<p><strong>To run the app,</strong></p>\n<p>1 ) Run Service Registery (Eureka Server)</p>\n<p>2 ) Run config server</p>\n<p>3 ) Run zipkin and redis through these commands shown below on docker</p>\n<pre><code>  docker run -d -p 9411:9411 openzipkin/zipkin\n  docker run -d --name redis -p 6379:6379 redis\n</code></pre>\n<p>4 ) Run api gateway</p>\n<p>5 ) Run other services</p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":23771513,"reputation":330,"user_id":17785521,"display_name":"Mahadev K"},"score":0,"creation_date":1657087615,"post_id":72878610,"comment_id":128722835,"body_markdown":"You cannot define variable two times. Also you are missing a semicolon I believe.","body":"You cannot define variable two times. Also you are missing a semicolon I believe."}],"answers":[{"tags":[],"owner":{"account_id":13832344,"reputation":1457,"user_id":9984846,"display_name":"Christian"},"down_vote_count":0,"up_vote_count":9,"is_accepted":false,"score":9,"last_activity_date":1657087838,"creation_date":1657087838,"answer_id":72878655,"question_id":72878610,"body_markdown":"https://stackoverflow.com/a/288479\r\n\r\n-&gt; It seems that in some old C-Standards you had to declare all variables in the beginning of a method. So I think they are just adhering to this when teaching it like this, but nowadays there is no real reason for this.","title":"Is there a reason to create the string variable before input?","body":"<p><a href=\"https://stackoverflow.com/a/288479\">https://stackoverflow.com/a/288479</a></p>\n<p>-&gt; It seems that in some old C-Standards you had to declare all variables in the beginning of a method. So I think they are just adhering to this when teaching it like this, but nowadays there is no real reason for this.</p>\n"},{"tags":[],"owner":{"account_id":347665,"reputation":4574,"user_id":681929,"accept_rate":58,"display_name":"nobalG"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1669641837,"creation_date":1657087846,"answer_id":72878657,"question_id":72878610,"body_markdown":"Your correct extended version should be \r\n\r\n    Scanner scan = new Scanner(System.in);\r\n    String name;\r\n    System.out.println(&quot;What is your  name?&quot;);\r\n    name = scan.nextLine(); // no need of String keyword here\r\n    System.out.println(name);\r\n\r\nAnd why someone would prefer it?\r\n\r\nConsider a method definition, May be something like below,\r\n\r\n    public AccountDetails getDetails(Person person){\r\n       Address address;\r\n       AccountInfo accountInfo;\r\n       address = person.getAddresses();\r\n       accountInfo = getDetailsOfAccount();\r\n    \r\n    .......many more lines\r\n       return accountDetails;\r\n    }\r\n\r\nSo from the above code, declaring all the variables at the top of the method with proper naming conventions is just helping you out upfront like a sign barrier on the road ahead, that what the method is dealing with.\r\n\r\nOther than that, you can follow any version of the code, both are equally same.","title":"Is there a reason to create the string variable before input?","body":"<p>Your correct extended version should be</p>\n<pre><code>Scanner scan = new Scanner(System.in);\nString name;\nSystem.out.println(&quot;What is your  name?&quot;);\nname = scan.nextLine(); // no need of String keyword here\nSystem.out.println(name);\n</code></pre>\n<p>And why someone would prefer it?</p>\n<p>Consider a method definition, May be something like below,</p>\n<pre><code>public AccountDetails getDetails(Person person){\n   Address address;\n   AccountInfo accountInfo;\n   address = person.getAddresses();\n   accountInfo = getDetailsOfAccount();\n\n.......many more lines\n   return accountDetails;\n}\n</code></pre>\n<p>So from the above code, declaring all the variables at the top of the method with proper naming conventions is just helping you out upfront like a sign barrier on the road ahead, that what the method is dealing with.</p>\n<p>Other than that, you can follow any version of the code, both are equally same.</p>\n"},{"tags":[],"owner":{"account_id":4264716,"reputation":1243,"user_id":3488090,"accept_rate":75,"display_name":"Lalit Mehra"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1657088704,"creation_date":1657088704,"answer_id":72878772,"question_id":72878610,"body_markdown":"In your case its one and the same thing. It is more useful though when used in the context of variable scoping.\r\n\r\nCreating a reference variable before initializing it with a value is the preferred way while using code blocks, so that the reference can be used outside of the block as well. Check out this example:\r\n\r\n    int sum = 0;\r\n    for(int idx=0; idx&lt;5; idx++) {\r\n       sum+=idx;\r\n    }\r\n    return sum;\r\n\r\n\r\n","title":"Is there a reason to create the string variable before input?","body":"<p>In your case its one and the same thing. It is more useful though when used in the context of variable scoping.</p>\n<p>Creating a reference variable before initializing it with a value is the preferred way while using code blocks, so that the reference can be used outside of the block as well. Check out this example:</p>\n<pre><code>int sum = 0;\nfor(int idx=0; idx&lt;5; idx++) {\n   sum+=idx;\n}\nreturn sum;\n</code></pre>\n"}],"owner":{"account_id":18898378,"reputation":79,"user_id":13786988,"display_name":"pasta"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":203,"favorite_count":0,"down_vote_count":0,"up_vote_count":6,"accepted_answer_id":72878772,"answer_count":3,"score":6,"last_activity_date":1669641837,"creation_date":1657087490,"question_id":72878610,"body_markdown":"Newly learning java and for input, we did\r\n```\r\nScanner scan = new Scanner(System.in);\r\nString name;\r\nSystem.out.println(&quot;What is your  name?&quot;);\r\nname = scan.nextLine();\r\nSystem.out.println(name);\r\n```\r\nHowever, I found that\r\n```\r\nScanner scan = new Scanner(System.in);\r\nString name = scan.nextLine();\r\nSystem.out.println(name);\r\n````\r\nworks the same. Is this being taught to me in the bigger form because it&#39;s more generally used/is clearer or am I just being taught the bigger form since I&#39;m a beginner to avoid too much confusion? (Basically, are there any reasons why people would use the expanded version rather than the condensed version?)","title":"Is there a reason to create the string variable before input?","body":"<p>Newly learning java and for input, we did</p>\n<pre><code>Scanner scan = new Scanner(System.in);\nString name;\nSystem.out.println(&quot;What is your  name?&quot;);\nname = scan.nextLine();\nSystem.out.println(name);\n</code></pre>\n<p>However, I found that</p>\n<pre><code>Scanner scan = new Scanner(System.in);\nString name = scan.nextLine();\nSystem.out.println(name);\n</code></pre>\n<p>works the same. Is this being taught to me in the bigger form because it's more generally used/is clearer or am I just being taught the bigger form since I'm a beginner to avoid too much confusion? (Basically, are there any reasons why people would use the expanded version rather than the condensed version?)</p>\n"},{"tags":["java","return","charat"],"comments":[{"owner":{"account_id":15856821,"reputation":2451,"user_id":11441011,"display_name":"maloomeister"},"score":1,"creation_date":1669641563,"post_id":74601159,"comment_id":131681414,"body_markdown":"[Please do not upload images of code/data/errors.](//meta.stackoverflow.com/q/285551) Instead, post your code here, nicely formatted. Aside from that, `=` is the assignment operator, `==` is used for comparing equality. So either write `if (v1 == true)` or simply `if (v1)`.","body":"<a href=\"//meta.stackoverflow.com/q/285551\">Please do not upload images of code/data/errors.</a> Instead, post your code here, nicely formatted. Aside from that, <code>=</code> is the assignment operator, <code>==</code> is used for comparing equality. So either write <code>if (v1 == true)</code> or simply <code>if (v1)</code>."},{"owner":{"display_name":"user6073886"},"score":1,"creation_date":1669641667,"post_id":74601159,"comment_id":131681448,"body_markdown":"You assign values in your statements via `=` instead of comparing via `==`. But using a comparison operator for booleans ins not needed anyway. You can just do `if(someBoolean)` directly instead of `if(someBoolean == true)`.","body":"You assign values in your statements via <code>=</code> instead of comparing via <code>==</code>. But using a comparison operator for booleans ins not needed anyway. You can just do <code>if(someBoolean)</code> directly instead of <code>if(someBoolean == true)</code>."},{"owner":{"account_id":22057425,"reputation":135,"user_id":16320675,"display_name":"user16320675"},"score":1,"creation_date":1669641944,"post_id":74601159,"comment_id":131681532,"body_markdown":"actually no `if` is needed: `return Character.isDigit(a) &amp;&amp; Character.isDigit(b) &amp;&amp; ...`","body":"actually no <code>if</code> is needed: <code>return Character.isDigit(a) &amp;&amp; Character.isDigit(b) &amp;&amp; ...</code>"}],"answers":[{"tags":[],"owner":{"account_id":2094057,"reputation":506074,"user_id":1863229,"accept_rate":58,"display_name":"Tim Biegeleisen"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1669641582,"creation_date":1669641582,"answer_id":74601198,"question_id":74601159,"body_markdown":"Just use `String#matches()` here with a regular expression:\r\n\r\n&lt;!-- language: java --&gt;\r\n\r\n    public boolean validate(String input) {\r\n        return input.matches(&quot;[0-9]{2}[A-Za-z]&quot;);\r\n    }","title":"Trying to verify that a three character sting is in a specified format","body":"<p>Just use <code>String#matches()</code> here with a regular expression:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public boolean validate(String input) {\n    return input.matches(&quot;[0-9]{2}[A-Za-z]&quot;);\n}\n</code></pre>\n"}],"owner":{"account_id":27073444,"reputation":1,"user_id":20623766,"display_name":"ReaperLPN"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":36,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":1,"score":-1,"last_activity_date":1669641582,"creation_date":1669641399,"question_id":74601159,"body_markdown":"[My result after passing the value &quot;A2A&quot; - which should return false](https://i.stack.imgur.com/UXqIF.png)\r\nI want to check that a three character string matches the format 12A. The first two must be a digit and the 3rd must be a letter. \r\nThe string &quot;A2A&quot; must therefore return false. \r\nWhat is happening here and how stupid am I being?\r\n\r\nI&#39;ve tried various ways of doing this and nothing seems to work. ","title":"Trying to verify that a three character sting is in a specified format","body":"<p><a href=\"https://i.stack.imgur.com/UXqIF.png\" rel=\"nofollow noreferrer\">My result after passing the value &quot;A2A&quot; - which should return false</a>\nI want to check that a three character string matches the format 12A. The first two must be a digit and the 3rd must be a letter.\nThe string &quot;A2A&quot; must therefore return false.\nWhat is happening here and how stupid am I being?</p>\n<p>I've tried various ways of doing this and nothing seems to work.</p>\n"},{"tags":["java","spring","spring-boot","opencsv"],"comments":[{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1669291849,"post_id":74560439,"comment_id":131614270,"body_markdown":"Is  zwnbsp your delimiter? If not, your file is corrupt","body":"Is  zwnbsp your delimiter? If not, your file is corrupt"},{"owner":{"account_id":3687151,"reputation":131,"user_id":3070677,"display_name":"G10"},"score":0,"creation_date":1669298156,"post_id":74560439,"comment_id":131616414,"body_markdown":"No. It is coming in header first header as [ZWNBPS]point. which is creating issue with @CsvBindByName and parse unable to identity that header and setting column value as null for all actual records in file while converting to bean","body":"No. It is coming in header first header as [ZWNBPS]point. which is creating issue with @CsvBindByName and parse unable to identity that header and setting column value as null for all actual records in file while converting to bean"},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1669298233,"post_id":74560439,"comment_id":131616428,"body_markdown":"Yes, that&#39;s corrupt. What *is* your delimiter btw?","body":"Yes, that&#39;s corrupt. What <i>is</i> your delimiter btw?"},{"owner":{"account_id":3687151,"reputation":131,"user_id":3070677,"display_name":"G10"},"score":0,"creation_date":1669298337,"post_id":74560439,"comment_id":131616453,"body_markdown":"default one. Comma","body":"default one. Comma"},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1669305967,"post_id":74560439,"comment_id":131619100,"body_markdown":"I can confirm that prepending zwnbsp to the first column name has no effect on successful parsing. What is your OS?","body":"I can confirm that prepending zwnbsp to the first column name has no effect on successful parsing. What is your OS?"},{"owner":{"account_id":3687151,"reputation":131,"user_id":3070677,"display_name":"G10"},"score":0,"creation_date":1669366226,"post_id":74560439,"comment_id":131629982,"body_markdown":"local setup on Windows and dev setup on Linux","body":"local setup on Windows and dev setup on Linux"},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1669367496,"post_id":74560439,"comment_id":131630371,"body_markdown":"The problem occurs in the dev setup?","body":"The problem occurs in the dev setup?"},{"owner":{"account_id":3687151,"reputation":131,"user_id":3070677,"display_name":"G10"},"score":1,"creation_date":1669383998,"post_id":74560439,"comment_id":131635680,"body_markdown":"Problem is in both environment.\n\nversion I am using : opencsv5.6.\n\n@CsvBindByName is considering as different column.","body":"Problem is in both environment.  version I am using : opencsv5.6.  @CsvBindByName is considering as different column."},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1669384441,"post_id":74560439,"comment_id":131635829,"body_markdown":"I&#39;m using 5.5 and it&#39;s not a problem there","body":"I&#39;m using 5.5 and it&#39;s not a problem there"},{"owner":{"account_id":3687151,"reputation":131,"user_id":3070677,"display_name":"G10"},"score":0,"creation_date":1669396694,"post_id":74560439,"comment_id":131639544,"body_markdown":"can you please share your pseudo code? Pojo(Bean), main method and file you are using","body":"can you please share your pseudo code? Pojo(Bean), main method and file you are using"},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1669399958,"post_id":74560439,"comment_id":131640273,"body_markdown":"Before I do, does the problem occur on the Linux box?","body":"Before I do, does the problem occur on the Linux box?"},{"owner":{"account_id":3687151,"reputation":131,"user_id":3070677,"display_name":"G10"},"score":0,"creation_date":1669439146,"post_id":74560439,"comment_id":131645894,"body_markdown":"problem is on Windows (local machine to debug) and Linux (logs from Splunk) both","body":"problem is on Windows (local machine to debug) and Linux (logs from Splunk) both"},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1669453982,"post_id":74560439,"comment_id":131647449,"body_markdown":"Do you have xxd on the Linux box? `which xxd`","body":"Do you have xxd on the Linux box? <code>which xxd</code>"},{"owner":{"account_id":3395647,"reputation":8918,"user_id":2849346,"accept_rate":50,"display_name":"MWiesner"},"score":0,"creation_date":1669572674,"post_id":74560439,"comment_id":131666733,"body_markdown":"I reproduced the problem with MacOS. Platform/OS seems irrelevant.","body":"I reproduced the problem with MacOS. Platform/OS seems irrelevant."},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1669573101,"post_id":74560439,"comment_id":131666843,"body_markdown":"Sorry folks - I made an error. I had NO-BREAK SPACE as opposed to ZERO WIDTH NO-BREAK SPACE","body":"Sorry folks - I made an error. I had NO-BREAK SPACE as opposed to ZERO WIDTH NO-BREAK SPACE"}],"answers":[{"tags":[],"owner":{"account_id":3395647,"reputation":8918,"user_id":2849346,"accept_rate":50,"display_name":"MWiesner"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1669572587,"creation_date":1669572587,"answer_id":74592552,"question_id":74560439,"body_markdown":"Not a real answer, *yet* a potential workaround for you, in case all CSV files to be processed share the extra [zwnbsp][1] character at the very beginning of the input (file).\r\n\r\nIn `Pojo` switch to:\r\n\r\n    @CsvBindByName(column=&quot;\\uFEFFpoint&quot;)\r\n    Integer point;\r\n\r\nGiven input data\r\n\r\n- `var input = &quot;\\uFEFFpoint,name\\n1,A&quot;;`\r\n\r\nAnd\r\n\r\n    CSVReader csvReader = new CSVReader(new StringReader(input));\r\n    List&lt;Pojo&gt; beans = new CsvToBeanBuilder&lt;Pojo&gt;(csvReader)\r\n            .withType(Pojo.class)\r\n            .withIgnoreLeadingWhiteSpace(true)\r\n            .build()\r\n            .parse();\r\n    System.out.println(beans);\r\n\r\nThis will produce a valid `Pojo[point = 1, name = A]`. \r\nI tested the above scenario with OpenCSV version 5.7.1, with Java 17 under MacOS.\r\n\r\nWithout the above adjustment to the mapping annotation (&quot;point&quot; -&gt;  &quot;\\uFEFFpoint&quot;), `CSVReader` will interpret the extra UTF-8 symbol `\\uFEFF` as an extra character for the mapping to the field `point` which will produce a mismatch finally resulting in a non-populated field value.\r\n\r\nHowever, it seems to be incorrect/invalid CSV input, as others already pointed out in the comments below your question. OpenCSV does not seem to have a flag or switch for [`HeaderColumnNameMappingStrategy`][2] to circumvent such cases as reported by you.\r\n\r\n\r\n  [1]: https://www.fileformat.info/info/unicode/char/feff/index.htm\r\n  [2]: https://opencsv.sourceforge.net/apidocs/com/opencsv/bean/HeaderNameBaseMappingStrategy.html","title":"How to resolve CsvToBean header issue with zero-width no-break space character?","body":"<p>Not a real answer, <em>yet</em> a potential workaround for you, in case all CSV files to be processed share the extra <a href=\"https://www.fileformat.info/info/unicode/char/feff/index.htm\" rel=\"nofollow noreferrer\">zwnbsp</a> character at the very beginning of the input (file).</p>\n<p>In <code>Pojo</code> switch to:</p>\n<pre><code>@CsvBindByName(column=&quot;\\uFEFFpoint&quot;)\nInteger point;\n</code></pre>\n<p>Given input data</p>\n<ul>\n<li><code>var input = &quot;\\uFEFFpoint,name\\n1,A&quot;;</code></li>\n</ul>\n<p>And</p>\n<pre><code>CSVReader csvReader = new CSVReader(new StringReader(input));\nList&lt;Pojo&gt; beans = new CsvToBeanBuilder&lt;Pojo&gt;(csvReader)\n        .withType(Pojo.class)\n        .withIgnoreLeadingWhiteSpace(true)\n        .build()\n        .parse();\nSystem.out.println(beans);\n</code></pre>\n<p>This will produce a valid <code>Pojo[point = 1, name = A]</code>.\nI tested the above scenario with OpenCSV version 5.7.1, with Java 17 under MacOS.</p>\n<p>Without the above adjustment to the mapping annotation (&quot;point&quot; -&gt;  &quot;\\uFEFFpoint&quot;), <code>CSVReader</code> will interpret the extra UTF-8 symbol <code>\\uFEFF</code> as an extra character for the mapping to the field <code>point</code> which will produce a mismatch finally resulting in a non-populated field value.</p>\n<p>However, it seems to be incorrect/invalid CSV input, as others already pointed out in the comments below your question. OpenCSV does not seem to have a flag or switch for <a href=\"https://opencsv.sourceforge.net/apidocs/com/opencsv/bean/HeaderNameBaseMappingStrategy.html\" rel=\"nofollow noreferrer\"><code>HeaderColumnNameMappingStrategy</code></a> to circumvent such cases as reported by you.</p>\n"},{"tags":[],"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1669641287,"creation_date":1669641287,"answer_id":74601141,"question_id":74560439,"body_markdown":"Apologies for misleading you and for some strange reason, missing the BOM problem. This is not extensively tested, but works:\r\n\r\n    package com.technojeeves.opencsvbeans;\r\n    \r\n    import com.opencsv.bean.CsvToBeanBuilder;\r\n    import java.nio.file.Files;\r\n    import java.nio.file.Path;\r\n    import java.util.Objects;\r\n    import java.util.List;\r\n    \r\n    import java.io.IOException;\r\n    import java.io.Reader;\r\n    import java.io.FilterReader;\r\n    \r\n    public class App {\r\n        public static void main(String[] args) {\r\n            try {\r\n                System.out.println(new App().read(Path.of(args[0])));\r\n            } catch (Throwable t) {\r\n                t.printStackTrace();\r\n            }\r\n        }\r\n    \r\n        public List&lt;Pojo&gt; read(Path path) {\r\n            try (Reader reader = new BomFilterReader(Files.newBufferedReader(path))) {\r\n            //try (Reader reader = Files.newBufferedReader(path)) {\r\n                return new CsvToBeanBuilder(reader).withType(Pojo.class).build().parse();\r\n            } catch (IOException e) {\r\n                throw new RuntimeException(&quot;Cannot read file: &quot; + path.toFile().getName() + e);\r\n            }\r\n        }\r\n    \r\n    }\r\n    \r\n    class BomFilterReader extends FilterReader {\r\n        public static final char BOM = &#39;\\uFEFF&#39;;\r\n        private boolean haveReadBOM = false;\r\n        \r\n        public BomFilterReader(Reader in) {\r\n            super(in);\r\n        }\r\n    \r\n        @Override\r\n        public int read() throws IOException {\r\n            int c = super.read();\r\n            if (!haveReadBOM &amp;&amp; ((char)c == BOM)) {\r\n                return super.read();\r\n            }\r\n            \r\n            haveReadBOM = true;\r\n            return c;\r\n        }\r\n    \r\n    \r\n        @Override\r\n        public int read(char[] a) throws IOException {\r\n            return read(a, 0, a.length);\r\n        }\r\n    \r\n        @Override\r\n        public int read(char a[], int off, int len) throws IOException {\r\n            Objects.checkFromIndexSize(off, len, a.length);\r\n            if (len == 0) {\r\n                return 0;\r\n            }\r\n    \r\n            int c = read();\r\n            if (c == -1) {\r\n                return -1;\r\n            }\r\n            a[off] = (char) c;\r\n    \r\n            int i = 1;\r\n            try {\r\n                for (; i &lt; len; i++) {\r\n                    c = read();\r\n                    if (c == -1) {\r\n                        break;\r\n                    }\r\n                    a[off + i] = (char) c;\r\n                }\r\n            } catch (IOException ee) {\r\n            }\r\n            return i;\r\n        }\r\n    \r\n    }\r\n\r\n","title":"How to resolve CsvToBean header issue with zero-width no-break space character?","body":"<p>Apologies for misleading you and for some strange reason, missing the BOM problem. This is not extensively tested, but works:</p>\n<pre><code>package com.technojeeves.opencsvbeans;\n\nimport com.opencsv.bean.CsvToBeanBuilder;\nimport java.nio.file.Files;\nimport java.nio.file.Path;\nimport java.util.Objects;\nimport java.util.List;\n\nimport java.io.IOException;\nimport java.io.Reader;\nimport java.io.FilterReader;\n\npublic class App {\n    public static void main(String[] args) {\n        try {\n            System.out.println(new App().read(Path.of(args[0])));\n        } catch (Throwable t) {\n            t.printStackTrace();\n        }\n    }\n\n    public List&lt;Pojo&gt; read(Path path) {\n        try (Reader reader = new BomFilterReader(Files.newBufferedReader(path))) {\n        //try (Reader reader = Files.newBufferedReader(path)) {\n            return new CsvToBeanBuilder(reader).withType(Pojo.class).build().parse();\n        } catch (IOException e) {\n            throw new RuntimeException(&quot;Cannot read file: &quot; + path.toFile().getName() + e);\n        }\n    }\n\n}\n\nclass BomFilterReader extends FilterReader {\n    public static final char BOM = '\\uFEFF';\n    private boolean haveReadBOM = false;\n    \n    public BomFilterReader(Reader in) {\n        super(in);\n    }\n\n    @Override\n    public int read() throws IOException {\n        int c = super.read();\n        if (!haveReadBOM &amp;&amp; ((char)c == BOM)) {\n            return super.read();\n        }\n        \n        haveReadBOM = true;\n        return c;\n    }\n\n\n    @Override\n    public int read(char[] a) throws IOException {\n        return read(a, 0, a.length);\n    }\n\n    @Override\n    public int read(char a[], int off, int len) throws IOException {\n        Objects.checkFromIndexSize(off, len, a.length);\n        if (len == 0) {\n            return 0;\n        }\n\n        int c = read();\n        if (c == -1) {\n            return -1;\n        }\n        a[off] = (char) c;\n\n        int i = 1;\n        try {\n            for (; i &lt; len; i++) {\n                c = read();\n                if (c == -1) {\n                    break;\n                }\n                a[off + i] = (char) c;\n            }\n        } catch (IOException ee) {\n        }\n        return i;\n    }\n\n}\n</code></pre>\n"}],"owner":{"account_id":3687151,"reputation":131,"user_id":3070677,"display_name":"G10"},"comment_count":15,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":407,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":2,"score":1,"last_activity_date":1669641287,"creation_date":1669291133,"question_id":74560439,"body_markdown":"I have this code snippet that uses OpenCSV:\r\n\r\n    class Pojo {\r\n    \r\n        @CsvBindByName(column=&quot;point&quot;)\r\n        Integer point;\r\n    \r\n        @CsvBindByName(column=&quot;name&quot;)\r\n        String name;\r\n    \r\n    }\r\n    \r\nAnd: \r\n\r\n    class Main {\r\n    \r\n       readFile(){\r\n    \r\n         CsvReader reader = new Csv(.....);\r\n        \r\n         CsvToBean&lt;Pojo&gt; bean = new CsvToBeanBuilder&lt;Pojo&gt;(reader)...;\r\n         \r\n         List&lt;Pojo&gt; list = bean.parse();\r\n         \r\n       }\r\n    \r\n    }\r\n\r\n\r\nWhy is it - while parsing  - not considering header coming with *[zwnbsp][1]* and that column value I am getting as `null`?\r\n\r\nExample input data:\r\n\r\n*ZWNBSPpoint*\r\n\r\n\r\n  [1]: https://www.fileformat.info/info/unicode/char/feff/index.htm","title":"How to resolve CsvToBean header issue with zero-width no-break space character?","body":"<p>I have this code snippet that uses OpenCSV:</p>\n<pre><code>class Pojo {\n\n    @CsvBindByName(column=&quot;point&quot;)\n    Integer point;\n\n    @CsvBindByName(column=&quot;name&quot;)\n    String name;\n\n}\n</code></pre>\n<p>And:</p>\n<pre><code>class Main {\n\n   readFile(){\n\n     CsvReader reader = new Csv(.....);\n    \n     CsvToBean&lt;Pojo&gt; bean = new CsvToBeanBuilder&lt;Pojo&gt;(reader)...;\n     \n     List&lt;Pojo&gt; list = bean.parse();\n     \n   }\n\n}\n</code></pre>\n<p>Why is it - while parsing  - not considering header coming with <em><a href=\"https://www.fileformat.info/info/unicode/char/feff/index.htm\" rel=\"nofollow noreferrer\">zwnbsp</a></em> and that column value I am getting as <code>null</code>?</p>\n<p>Example input data:</p>\n<p><em>ZWNBSPpoint</em></p>\n"},{"tags":["java","file","priority-queue"],"comments":[{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":1,"creation_date":1669557716,"post_id":74590624,"comment_id":131663432,"body_markdown":"*i want to print 5 max values* &quot;Max&quot; by what criteria?","body":"<i>i want to print 5 max values</i> &quot;Max&quot; by what criteria?"},{"owner":{"account_id":2792262,"reputation":163847,"user_id":2402272,"accept_rate":85,"display_name":"John Bollinger"},"score":1,"creation_date":1669557928,"post_id":74590624,"comment_id":131663485,"body_markdown":"You have created a `Queue` of `String`s.  Although I guess you could store full lines from the file in there, a more idiomatic approach would involve defining a class representing the structure of the lines, with three fields of appropriate types.  You would then use a `Queue` of objects of that type.","body":"You have created a <code>Queue</code> of <code>String</code>s.  Although I guess you could store full lines from the file in there, a more idiomatic approach would involve defining a class representing the structure of the lines, with three fields of appropriate types.  You would then use a <code>Queue</code> of objects of that type."},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1669558130,"post_id":74590624,"comment_id":131663523,"body_markdown":"... plus, your objects ought to implement `Comparable`","body":"... plus, your objects ought to implement <code>Comparable</code>"},{"owner":{"account_id":17141277,"reputation":134,"user_id":12405221,"display_name":"cha_lar"},"score":0,"creation_date":1669558188,"post_id":74590624,"comment_id":131663536,"body_markdown":"This post may help you https://stackoverflow.com/a/12917598/12405221","body":"This post may help you <a href=\"https://stackoverflow.com/a/12917598/12405221\">stackoverflow.com/a/12917598/12405221</a>"}],"answers":[{"tags":[],"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1669559997,"creation_date":1669559997,"answer_id":74590918,"question_id":74590624,"body_markdown":"Once you have your data class (let&#39;s call it `Order`) then you can do:\r\n\r\n        Queue&lt;Order&gt; orders = Files.lines(Path.of(args[0]))\r\n            .map(line -&gt; line.split(&quot; +&quot;))\r\n            .map(Order::new)\r\n            .collect(Collectors.toCollection(PriorityQueue::new));\r\n\r\nIf you&#39;ve made your class `Comparable` then all should be well.","title":"adding to priority queue from a text file","body":"<p>Once you have your data class (let's call it <code>Order</code>) then you can do:</p>\n<pre><code>    Queue&lt;Order&gt; orders = Files.lines(Path.of(args[0]))\n        .map(line -&gt; line.split(&quot; +&quot;))\n        .map(Order::new)\n        .collect(Collectors.toCollection(PriorityQueue::new));\n</code></pre>\n<p>If you've made your class <code>Comparable</code> then all should be well.</p>\n"},{"tags":[],"owner":{"account_id":1482070,"reputation":145,"user_id":1391213,"display_name":"Knowledge_seeker"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1669641095,"creation_date":1669563234,"answer_id":74591335,"question_id":74590624,"body_markdown":"Assuming you want compare by &quot;value&quot; i.e last value in input record e.g. 3747 from given input record &quot;tloxJcdiMqMWyDW 1976-11-24 3747&quot;.\r\n\r\n```\r\nQueue&lt;MyData&gt; queue = new PriorityQueue&lt;MyData&gt;(new Comparator&lt;MyData&gt;()\r\n        {\r\n            @Override\r\n            public int compare(MyData o1, MyData o2)\r\n            {\r\n                return o2.getValue() - o1.getValue();\r\n            }\r\n        });\r\n        String file = &quot;file&quot;;\r\n        String line;\r\n        int order = 1;\r\n        DateTimeFormatter formatter = new DateTimeFormatterBuilder()\r\n                .appendOptional(DateTimeFormatter.ofPattern(&quot;yyyy-M-d&quot;))\r\n                .toFormatter();\r\n\r\n        List&lt;String&gt; lines = new ArrayList&lt;&gt;();\r\n        try{\r\n            FileReader fr = new FileReader(file);\r\n            BufferedReader br = new BufferedReader(fr);\r\n            while ((line = br.readLine()) != null)   {\r\n                lines.add(line);\r\n                String data[] = line.split(&quot;\\\\s&quot;);\r\n                MyData myData = new MyData(data[0],LocalDate.parse(data[1],formatter),Integer.parseInt(data[2]));\r\n                queue.offer(myData);\r\n            }\r\n            br.close();\r\n        } catch (IOException e){\r\n            System.out.println(&quot;File not found&quot;);\r\n        }\r\n\r\n        while (!queue.isEmpty()){\r\n           MyData result = queue.poll();\r\n            System.out.println(order + &quot;.Number: &quot; + result.getValue() + &quot; , Name: &quot; + result.getName());\r\n            order++;\r\n        }\r\n```\r\nI created a class with three fields from input file assuming these are separated by space \r\n\r\n```\r\nimport java.time.LocalDate;\r\nimport java.util.Objects;\r\n\r\npublic class MyData\r\n{\r\n    private String name;\r\n    private LocalDate date;\r\n    private int value;\r\n\r\n    public MyData(String name, LocalDate date, int value)\r\n    {\r\n        this.name = name;\r\n        this.date = date;\r\n        this.value = value;\r\n    }\r\n\r\n    public int getValue()\r\n    {\r\n        return value;\r\n    }\r\n   \r\n    public String getName()\r\n    {\r\n        return name;\r\n    }\r\n\r\n    @Override\r\n    public boolean equals(Object o)\r\n    {\r\n        if (this == o) return true;\r\n        if (o == null || getClass() != o.getClass()) return false;\r\n        MyData myData = (MyData) o;\r\n        return value == myData.value &amp;&amp; Objects.equals(name, myData.name) &amp;&amp; Objects.equals(date, myData.date);\r\n    }\r\n\r\n    @Override\r\n    public int hashCode()\r\n    {\r\n        return Objects.hash(name, date, value);\r\n    }\r\n}\r\n```\r\nIf you want only first 5 values then you can add if condition in below while loop and break once order reaches 5.\r\n\r\n```\r\nwhile (!queue.isEmpty()){\r\n            System.out.println(order + &quot;.Number: &quot; + queue.poll().getValue());\r\n            order++;\r\n        }\r\n```","title":"adding to priority queue from a text file","body":"<p>Assuming you want compare by &quot;value&quot; i.e last value in input record e.g. 3747 from given input record &quot;tloxJcdiMqMWyDW 1976-11-24 3747&quot;.</p>\n<pre><code>Queue&lt;MyData&gt; queue = new PriorityQueue&lt;MyData&gt;(new Comparator&lt;MyData&gt;()\n        {\n            @Override\n            public int compare(MyData o1, MyData o2)\n            {\n                return o2.getValue() - o1.getValue();\n            }\n        });\n        String file = &quot;file&quot;;\n        String line;\n        int order = 1;\n        DateTimeFormatter formatter = new DateTimeFormatterBuilder()\n                .appendOptional(DateTimeFormatter.ofPattern(&quot;yyyy-M-d&quot;))\n                .toFormatter();\n\n        List&lt;String&gt; lines = new ArrayList&lt;&gt;();\n        try{\n            FileReader fr = new FileReader(file);\n            BufferedReader br = new BufferedReader(fr);\n            while ((line = br.readLine()) != null)   {\n                lines.add(line);\n                String data[] = line.split(&quot;\\\\s&quot;);\n                MyData myData = new MyData(data[0],LocalDate.parse(data[1],formatter),Integer.parseInt(data[2]));\n                queue.offer(myData);\n            }\n            br.close();\n        } catch (IOException e){\n            System.out.println(&quot;File not found&quot;);\n        }\n\n        while (!queue.isEmpty()){\n           MyData result = queue.poll();\n            System.out.println(order + &quot;.Number: &quot; + result.getValue() + &quot; , Name: &quot; + result.getName());\n            order++;\n        }\n</code></pre>\n<p>I created a class with three fields from input file assuming these are separated by space</p>\n<pre><code>import java.time.LocalDate;\nimport java.util.Objects;\n\npublic class MyData\n{\n    private String name;\n    private LocalDate date;\n    private int value;\n\n    public MyData(String name, LocalDate date, int value)\n    {\n        this.name = name;\n        this.date = date;\n        this.value = value;\n    }\n\n    public int getValue()\n    {\n        return value;\n    }\n   \n    public String getName()\n    {\n        return name;\n    }\n\n    @Override\n    public boolean equals(Object o)\n    {\n        if (this == o) return true;\n        if (o == null || getClass() != o.getClass()) return false;\n        MyData myData = (MyData) o;\n        return value == myData.value &amp;&amp; Objects.equals(name, myData.name) &amp;&amp; Objects.equals(date, myData.date);\n    }\n\n    @Override\n    public int hashCode()\n    {\n        return Objects.hash(name, date, value);\n    }\n}\n</code></pre>\n<p>If you want only first 5 values then you can add if condition in below while loop and break once order reaches 5.</p>\n<pre><code>while (!queue.isEmpty()){\n            System.out.println(order + &quot;.Number: &quot; + queue.poll().getValue());\n            order++;\n        }\n</code></pre>\n"}],"owner":{"account_id":12670153,"reputation":13,"user_id":9207957,"display_name":"TheMurteza"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":123,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1669641095,"creation_date":1669557542,"question_id":74590624,"body_markdown":"i have a text file i want to add its data to priority queue and then print out 5 items with max value\r\neach line first has a name then a date then a value i want to print 5 max values with name and date\r\n\r\n\r\n\r\n\r\n\r\n```\r\nQueue&lt;String&gt; queue = new PriorityQueue&lt;String&gt;();\r\nString file = &quot;file&quot;;\r\nString line;\r\nint order = 1;\r\ntry{\r\n    FileReader fr = new FileReader(file);\r\n    BufferedReader br = new BufferedReader(fr);\r\n    while ((line = br.readLine()) != null)   {\r\n        queue.offer(line);\r\n    }\r\n    br.close();\r\n} catch (IOException e){\r\n    System.out.println(&quot;File not found&quot;);\r\n}\r\nwhile (!queue.isEmpty()){\r\n    System.out.println(order + &quot;.Number: &quot; + queue.poll());\r\n    order++;\r\n}\r\n\r\n```\r\n\r\n\r\ndata.txt :\r\n```\r\ntloxJcdiMqMWyDW 1976-11-24 3747\r\nKWuHczAFXRGCeTZ 2015-12-5 1740\r\nSyAckDyYyZhrsEK 1920-8-3 3164\r\npjKEnTTfcdoJwMy 2016-12-28 1941\r\nZsvJcYbmOFmdXfG 1923-10-10 8314\r\nqkqDyFhObQVpByH 1934-7-21 4907\r\nIRUMpmTSmJDVIJU 2012-12-26 376\r\nnOCCDAmTilqnukW 1968-5-3 5811\r\nuecbYlaCeaTSAsr 1937-4-1 9305\r\nAMdPXptNGayPPAM 1949-2-25 1130\r\nafTQNxogdxpQRpF 1912-11-18 5637\r\nhBUJpjBJgyShNqk 2011-12-9 4075\r\ndMGDWfIrPctuwBs 2005-3-15 8567\r\nUBELfqonZOmmEGf 1954-7-29 7875\r\nEuMbAKoKwYYERxy 1902-3-4 8291\r\nOXvvwLXJjsXrfVI 1927-4-29 4693\r\namHPTQXCqHkYtXW 1991-8-24 8778\r\ngfAcsQpChfukGlK 1971-7-14 4204\r\nWHguJUYeLBYoton 1987-11-24 9664\r\nZvMoXwJqLhBlWiG 2006-6-7 7893\r\n```\r\n\r\n\r\ni have tried some other ways to save data to PQ and still didnt get any result","title":"adding to priority queue from a text file","body":"<p>i have a text file i want to add its data to priority queue and then print out 5 items with max value\neach line first has a name then a date then a value i want to print 5 max values with name and date</p>\n<pre><code>Queue&lt;String&gt; queue = new PriorityQueue&lt;String&gt;();\nString file = &quot;file&quot;;\nString line;\nint order = 1;\ntry{\n    FileReader fr = new FileReader(file);\n    BufferedReader br = new BufferedReader(fr);\n    while ((line = br.readLine()) != null)   {\n        queue.offer(line);\n    }\n    br.close();\n} catch (IOException e){\n    System.out.println(&quot;File not found&quot;);\n}\nwhile (!queue.isEmpty()){\n    System.out.println(order + &quot;.Number: &quot; + queue.poll());\n    order++;\n}\n\n</code></pre>\n<p>data.txt :</p>\n<pre><code>tloxJcdiMqMWyDW 1976-11-24 3747\nKWuHczAFXRGCeTZ 2015-12-5 1740\nSyAckDyYyZhrsEK 1920-8-3 3164\npjKEnTTfcdoJwMy 2016-12-28 1941\nZsvJcYbmOFmdXfG 1923-10-10 8314\nqkqDyFhObQVpByH 1934-7-21 4907\nIRUMpmTSmJDVIJU 2012-12-26 376\nnOCCDAmTilqnukW 1968-5-3 5811\nuecbYlaCeaTSAsr 1937-4-1 9305\nAMdPXptNGayPPAM 1949-2-25 1130\nafTQNxogdxpQRpF 1912-11-18 5637\nhBUJpjBJgyShNqk 2011-12-9 4075\ndMGDWfIrPctuwBs 2005-3-15 8567\nUBELfqonZOmmEGf 1954-7-29 7875\nEuMbAKoKwYYERxy 1902-3-4 8291\nOXvvwLXJjsXrfVI 1927-4-29 4693\namHPTQXCqHkYtXW 1991-8-24 8778\ngfAcsQpChfukGlK 1971-7-14 4204\nWHguJUYeLBYoton 1987-11-24 9664\nZvMoXwJqLhBlWiG 2006-6-7 7893\n</code></pre>\n<p>i have tried some other ways to save data to PQ and still didnt get any result</p>\n"},{"tags":["java","string","function","substring","indexof"],"comments":[{"owner":{"account_id":162699,"reputation":138060,"user_id":3788176,"accept_rate":54,"display_name":"Andy Turner"},"score":1,"creation_date":1669638607,"post_id":74600539,"comment_id":131680399,"body_markdown":"&quot;I need to use only indexOf and substring&quot; why? Is this a homework exercise?","body":"&quot;I need to use only indexOf and substring&quot; why? Is this a homework exercise?"},{"owner":{"account_id":74704,"reputation":11534,"user_id":214525,"accept_rate":100,"display_name":"f1sh"},"score":0,"creation_date":1669638915,"post_id":74600539,"comment_id":131680497,"body_markdown":"This should already work for the URL that you provided. In case there is no more slash after the host name, `endIndex` will be `-1`. Check for that case and adjust the parameters for `substring` accordingly.","body":"This should already work for the URL that you provided. In case there is no more slash after the host name, <code>endIndex</code> will be <code>-1</code>. Check for that case and adjust the parameters for <code>substring</code> accordingly."},{"owner":{"account_id":2803497,"reputation":25202,"user_id":2411243,"display_name":"Zabuzard"},"score":0,"creation_date":1669638927,"post_id":74600539,"comment_id":131680501,"body_markdown":"Why reinvent the wheel? Java has classes for parsing URLs and extracting the components already. Or is this a homework task?","body":"Why reinvent the wheel? Java has classes for parsing URLs and extracting the components already. Or is this a homework task?"},{"owner":{"account_id":27072944,"reputation":11,"user_id":20623335,"display_name":"Digger"},"score":0,"creation_date":1669639253,"post_id":74600539,"comment_id":131680623,"body_markdown":"exactly, this is my homework task","body":"exactly, this is my homework task"},{"owner":{"account_id":27072944,"reputation":11,"user_id":20623335,"display_name":"Digger"},"score":0,"creation_date":1669640343,"post_id":74600539,"comment_id":131681000,"body_markdown":"@f1sh but I don&#39;t know how to check this case, the problem is essentially only this","body":"@f1sh but I don&#39;t know how to check this case, the problem is essentially only this"}],"answers":[{"tags":[],"owner":{"account_id":3542929,"reputation":29,"user_id":2959556,"display_name":"user2959556"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1669640165,"creation_date":1669638896,"answer_id":74600658,"question_id":74600539,"body_markdown":"            // Sample String s.\r\n            String s = &quot;http://SomeServerName/abcd/dfdf.htm?dfdf=dfdf&quot;;\r\n            /*\r\n               get a substring(startIndex, endIndex)\r\n               startIndex : search for index of string &quot;//&quot; and add its length to get to end of it.\r\n               endIndex: input string length.\r\n             */\r\n            String s1 = s.substring(s.indexOf(&quot;//&quot;)+2,s.length());\r\n            /*\r\n               get a substring(startIndex, endIndex)\r\n               startIndex : 0\r\n               endIndex : starting index of &quot;/&quot; if present or length of string s1\r\n            */\r\n            String output = s1.substring(0, s1.indexOf(&quot;/&quot;) &gt; 0 ? s1.indexOf(&quot;/&quot;) : s1.length());\r\n            System.out.println(output);     // output : SomeServerName","title":"How to write a URL function?","body":"<pre><code>        // Sample String s.\n        String s = &quot;http://SomeServerName/abcd/dfdf.htm?dfdf=dfdf&quot;;\n        /*\n           get a substring(startIndex, endIndex)\n           startIndex : search for index of string &quot;//&quot; and add its length to get to end of it.\n           endIndex: input string length.\n         */\n        String s1 = s.substring(s.indexOf(&quot;//&quot;)+2,s.length());\n        /*\n           get a substring(startIndex, endIndex)\n           startIndex : 0\n           endIndex : starting index of &quot;/&quot; if present or length of string s1\n        */\n        String output = s1.substring(0, s1.indexOf(&quot;/&quot;) &gt; 0 ? s1.indexOf(&quot;/&quot;) : s1.length());\n        System.out.println(output);     // output : SomeServerName\n</code></pre>\n"},{"tags":[],"owner":{"account_id":19396151,"reputation":1,"user_id":14183807,"display_name":"vinith vasudevan"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1669640025,"creation_date":1669640025,"answer_id":74600894,"question_id":74600539,"body_markdown":"    String s=&quot;http://SomeServerName&quot;;\r\n    \t\t  String s1=s.substring(s.indexOf(&quot;://&quot;)+3);\r\n    \t\t  if(s1.indexOf(&quot;/&quot;)==-1) {\r\n    \t\t\t  System.out.println(s1);\r\n    \t\t  }else {\r\n    \t\t\t  System.out.println(s1.substring(0,s1.indexOf(&quot;/&quot;)));\r\n    \t\t  }","title":"How to write a URL function?","body":"<pre><code>String s=&quot;http://SomeServerName&quot;;\n          String s1=s.substring(s.indexOf(&quot;://&quot;)+3);\n          if(s1.indexOf(&quot;/&quot;)==-1) {\n              System.out.println(s1);\n          }else {\n              System.out.println(s1.substring(0,s1.indexOf(&quot;/&quot;)));\n          }\n</code></pre>\n"}],"owner":{"account_id":27072944,"reputation":11,"user_id":20623335,"display_name":"Digger"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":166,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1669640962,"creation_date":1669638279,"question_id":74600539,"body_markdown":"i&#39;m new to Java, so i have a little problem here...\r\n\r\ni need to write a function that extracts the server name from the URL\r\nIt means the following:\r\nFor a row of the form http://SomeServerName/abcd/dfdf.htm?dfdf=dfdf\r\ni need to isolate &quot;SomeServerName&quot;\r\n\r\n* The string may not necessarily start with http, but also with https\r\nor something else. But :// there is always\r\n* Consider the case when there is no more slash after :// (for example http://SomeServerName)\r\n* I need to use only indexOf and substring\r\n\r\n```\r\n// This is what i got so far\r\n\r\npublic static String getURL(String string) {\r\n    int startIndex = string.indexOf(&#39;/&#39;) + 2;\r\n\r\n    int endIndex = string.indexOf(&quot;/&quot;, startIndex);\r\n\r\n    return string.substring(startIndex, endIndex);\r\n}\r\n\r\npublic static void main(String[] args) {\r\n        String string = &quot;https://SomeServerName/abcd/dfdf.htm?dfdf=dfdf&quot;;\r\n\r\n        System.out.println(getURL(string));\r\n    }\r\n\r\n```","title":"How to write a URL function?","body":"<p>i'm new to Java, so i have a little problem here...</p>\n<p>i need to write a function that extracts the server name from the URL\nIt means the following:\nFor a row of the form http://SomeServerName/abcd/dfdf.htm?dfdf=dfdf\ni need to isolate &quot;SomeServerName&quot;</p>\n<ul>\n<li>The string may not necessarily start with http, but also with https\nor something else. But :// there is always</li>\n<li>Consider the case when there is no more slash after :// (for example http://SomeServerName)</li>\n<li>I need to use only indexOf and substring</li>\n</ul>\n<pre><code>// This is what i got so far\n\npublic static String getURL(String string) {\n    int startIndex = string.indexOf('/') + 2;\n\n    int endIndex = string.indexOf(&quot;/&quot;, startIndex);\n\n    return string.substring(startIndex, endIndex);\n}\n\npublic static void main(String[] args) {\n        String string = &quot;https://SomeServerName/abcd/dfdf.htm?dfdf=dfdf&quot;;\n\n        System.out.println(getURL(string));\n    }\n\n</code></pre>\n"},{"tags":["java","string"],"answers":[{"tags":[],"owner":{"account_id":322748,"reputation":36417,"user_id":642340,"accept_rate":83,"display_name":"soulcheck"},"down_vote_count":0,"up_vote_count":7,"is_accepted":false,"score":7,"last_activity_date":1326728443,"creation_date":1326728443,"answer_id":8882334,"question_id":8882310,"body_markdown":"You have to escape `\\` as `\\\\` in java Strings.","title":"Find the last index of &quot;\\&quot; in a string in java","body":"<p>You have to escape <code>\\</code> as <code>\\\\</code> in java Strings.</p>\n"},{"tags":[],"owner":{"account_id":9558,"reputation":12465,"user_id":17713,"accept_rate":86,"display_name":"Matthias Meid"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1326728447,"creation_date":1326728447,"answer_id":8882335,"question_id":8882310,"body_markdown":"You need to escape backslashes in `String` or `char` literals:\r\n\r\n    app.lastIndexOf(&#39;\\\\&#39;);","title":"Find the last index of &quot;\\&quot; in a string in java","body":"<p>You need to escape backslashes in <code>String</code> or <code>char</code> literals:</p>\n\n<pre><code>app.lastIndexOf('\\\\');\n</code></pre>\n"},{"tags":[],"owner":{"account_id":360576,"reputation":60355,"user_id":702638,"accept_rate":98,"display_name":"Hunter McMillen"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1326728456,"creation_date":1326728456,"answer_id":8882336,"question_id":8882310,"body_markdown":"Since backslash is used as an escape character, to get a literal backslash you type two.\r\n\r\n    myString.lastIndexOf(&quot;\\\\&quot;);","title":"Find the last index of &quot;\\&quot; in a string in java","body":"<p>Since backslash is used as an escape character, to get a literal backslash you type two.</p>\n\n<pre><code>myString.lastIndexOf(\"\\\\\");\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1049835,"reputation":3025,"user_id":1054036,"display_name":"Viruzzo"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1326728461,"creation_date":1326728461,"answer_id":8882338,"question_id":8882310,"body_markdown":"You have to escape the slash with another slash: `lastIndexOf(&#39;\\\\&#39;)`.","title":"Find the last index of &quot;\\&quot; in a string in java","body":"<p>You have to escape the slash with another slash: <code>lastIndexOf('\\\\')</code>.</p>\n"},{"tags":[],"owner":{"account_id":278210,"reputation":176444,"user_id":572670,"accept_rate":92,"display_name":"amit"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1326728472,"creation_date":1326728472,"answer_id":8882344,"question_id":8882310,"body_markdown":"use `\\\\` instead of `\\`, you need to &quot;escape&quot; the special character \\&#39;s meaning.","title":"Find the last index of &quot;\\&quot; in a string in java","body":"<p>use <code>\\\\</code> instead of <code>\\</code>, you need to \"escape\" the special character \\'s meaning.</p>\n"},{"tags":[],"owner":{"account_id":1102504,"reputation":66096,"user_id":1094597,"accept_rate":94,"display_name":"kosa"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1326728508,"creation_date":1326728508,"answer_id":8882353,"question_id":8882310,"body_markdown":"you need to use `app.lastIndexOf(&quot;\\\\&quot;);`","title":"Find the last index of &quot;\\&quot; in a string in java","body":"<p>you need to use <code>app.lastIndexOf(\"\\\\\");</code></p>\n"},{"tags":[],"owner":{"account_id":427403,"reputation":22575,"user_id":809150,"accept_rate":98,"display_name":"Patrick Perini"},"down_vote_count":0,"up_vote_count":21,"is_accepted":true,"score":21,"last_activity_date":1326728575,"creation_date":1326728575,"answer_id":8882376,"question_id":8882310,"body_markdown":"The `\\` character is used to escape other characters, in order to print special characters.\r\n\r\nFor example, `&#39;\\n&#39;` is the &quot;newline&quot; character, `&#39;\\t&#39;` is the &quot;tab&quot; character, `&#39;\\&#39;&#39;` is the literal `&#39;`, etc.\r\n\r\nIn order to use a `\\` in a string, you have to escape it: `\\\\`.\r\n\r\nUse `app.lastIndexOf(&#39;\\\\&#39;);`","title":"Find the last index of &quot;\\&quot; in a string in java","body":"<p>The <code>\\</code> character is used to escape other characters, in order to print special characters.</p>\n\n<p>For example, <code>'\\n'</code> is the \"newline\" character, <code>'\\t'</code> is the \"tab\" character, <code>'\\''</code> is the literal <code>'</code>, etc.</p>\n\n<p>In order to use a <code>\\</code> in a string, you have to escape it: <code>\\\\</code>.</p>\n\n<p>Use <code>app.lastIndexOf('\\\\');</code></p>\n"},{"tags":[],"owner":{"account_id":1430389,"reputation":3996,"user_id":1352919,"display_name":"Fakhar"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1669640117,"creation_date":1669640117,"answer_id":74600912,"question_id":8882310,"body_markdown":"**Input:** We are speaking here &lt;as /&gt; but we need,&lt;1&gt; &lt;12/&gt; find last closing bracket /&gt; eat /&gt; this not required!!!\r\n\r\n**Output:** We are speaking here &lt;as /&gt; but we need,&lt;1&gt; &lt;12/&gt; find last closing bracket /&gt; eat /&gt;\r\n\r\n    public class Main {\r\n      public static void main(String[] args) {\r\n        String myStr = &quot;We are speaking here &lt;as /&gt; but we need,&lt;1&gt; &lt;12/&gt; find last closing bracket /&gt; eat /&gt; this not required!!!&quot;;\r\n        String myFinalString = myStr.substring(0, myStr.lastIndexOf(&quot;/&gt;&quot;)+2);\r\n        System.out.println(myFinalString);\r\n        \r\n      }\r\n    }\r\n\r\n","title":"Find the last index of &quot;\\&quot; in a string in java","body":"<p><strong>Input:</strong> We are speaking here  but we need,&lt;1&gt; &lt;12/&gt; find last closing bracket /&gt; eat /&gt; this not required!!!</p>\n<p><strong>Output:</strong> We are speaking here  but we need,&lt;1&gt; &lt;12/&gt; find last closing bracket /&gt; eat /&gt;</p>\n<pre><code>public class Main {\n  public static void main(String[] args) {\n    String myStr = &quot;We are speaking here &lt;as /&gt; but we need,&lt;1&gt; &lt;12/&gt; find last closing bracket /&gt; eat /&gt; this not required!!!&quot;;\n    String myFinalString = myStr.substring(0, myStr.lastIndexOf(&quot;/&gt;&quot;)+2);\n    System.out.println(myFinalString);\n    \n  }\n}\n</code></pre>\n"}],"owner":{"account_id":1176157,"reputation":213,"user_id":1152151,"display_name":"Nishant Nair"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":33639,"favorite_count":0,"down_vote_count":0,"up_vote_count":20,"accepted_answer_id":8882376,"answer_count":8,"score":20,"last_activity_date":1669640117,"creation_date":1326728344,"question_id":8882310,"body_markdown":"Can anyone help me find the LastIndexOf  &#39;\\&#39; in a string in java? I wrote the code as:\r\n\r\n    int i = app.lastIndexOf(&#39;\\&#39;);\r\n\r\n`app` is my string, but there is a error as &quot;Invalid character constant&quot;. I tried using double quotes but still no use. Can anyone help me on this?\r\n              ","title":"Find the last index of &quot;\\&quot; in a string in java","body":"<p>Can anyone help me find the LastIndexOf  '\\' in a string in java? I wrote the code as:</p>\n\n<pre><code>int i = app.lastIndexOf('\\');\n</code></pre>\n\n<p><code>app</code> is my string, but there is a error as \"Invalid character constant\". I tried using double quotes but still no use. Can anyone help me on this?</p>\n"},{"tags":["java","android","firebase","android-studio","firebase-realtime-database"],"comments":[{"owner":{"account_id":7045268,"reputation":443,"user_id":5396274,"display_name":"Arun Yogeshwaran"},"score":1,"creation_date":1585240213,"post_id":60871668,"comment_id":107697857,"body_markdown":"Do you mind sharing the logs so that others can get to know what has gone wrong?","body":"Do you mind sharing the logs so that others can get to know what has gone wrong?"}],"answers":[{"tags":[],"owner":{"account_id":15059705,"reputation":597,"user_id":10868923,"display_name":"Shimaa Yasser"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1585240790,"creation_date":1585240790,"answer_id":60871992,"question_id":60871668,"body_markdown":"[![as shown in the picture attached to my answer you need to access 1 first, 2 and then 3 or 4. ][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/vMlod.png\r\n\r\n\r\nSo you need to do that :\r\n\r\n\r\n        DatabaseReference reference = \r\n         FirebaseDatabase.getInstance().getReference(&quot;Contacts&quot;).child(&quot;2&quot;).child(&quot;3&quot;);\r\n\r\n        // of course you are not going to use 2 and 3 as a child but it&#39;s just to illustrate my point\r\n\r\n        reference.addValueEventListener(new ValueEventListener() {\r\n            @Override\r\n            public void onDataChange(@NonNull DataSnapshot dataSnapshot) {\r\n\r\n\r\n\r\n            }\r\n\r\n            @Override\r\n            public void onCancelled(@NonNull DatabaseError databaseError) {\r\n\r\n            }\r\n        });","title":"I am having trouble retrieving data from Firebase real time database into String Variables","body":"<p><a href=\"https://i.stack.imgur.com/vMlod.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/vMlod.png\" alt=\"as shown in the picture attached to my answer you need to access 1 first, 2 and then 3 or 4. \"></a></p>\n\n<p>So you need to do that :</p>\n\n<pre><code>    DatabaseReference reference = \n     FirebaseDatabase.getInstance().getReference(\"Contacts\").child(\"2\").child(\"3\");\n\n    // of course you are not going to use 2 and 3 as a child but it's just to illustrate my point\n\n    reference.addValueEventListener(new ValueEventListener() {\n        @Override\n        public void onDataChange(@NonNull DataSnapshot dataSnapshot) {\n\n\n\n        }\n\n        @Override\n        public void onCancelled(@NonNull DatabaseError databaseError) {\n\n        }\n    });\n</code></pre>\n"},{"tags":[],"owner":{"account_id":18063072,"reputation":532,"user_id":13129731,"display_name":"eNeM"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1669639961,"creation_date":1585247044,"answer_id":60873815,"question_id":60871668,"body_markdown":"after changing the code a little the app ran smoothly\r\n\r\nthe changed code is: \r\n```\r\nfinal String[] retLastMessage = {null};\r\nfinal String[] retLastMessageTime = {null};\r\nfinal String[] retLastMessageDate = {null};\r\n\r\nDatabaseReference reference = FirebaseDatabase.getInstance().getReference(&quot;Contacts&quot;).child(currentUserID).child(usersIDs);\r\n\r\nreference.addValueEventListener(new ValueEventListener() {\r\n    @Override\r\n    public void onDataChange(@NonNull DataSnapshot dataSnapshot) {\r\n        if (dataSnapshot.hasChild(&quot;LastMessage&quot;)) {\r\n            retLastMessage[0] = dataSnapshot.child(&quot;LastMessage&quot;).getValue().toString();\r\n            retLastMessageTime[0] = dataSnapshot.child(&quot;LastMessageTime&quot;).getValue().toString();\r\n            retLastMessageDate[0] = dataSnapshot.child(&quot;LastMessageDate&quot;).getValue().toString();\r\n\r\n            holder.userLastMessage.setVisibility(View.VISIBLE);\r\n            holder.userLastMessage.setText(retLastMessage[0]);\r\n            String retLastMessageTimeDate = retLastMessageTime[0] + &quot; &quot; + retLastMessageDate[0];\r\n\r\n            holder.userLastMsgTime.setVisibility(View.VISIBLE);\r\n            holder.userLastMsgTime.setText(retLastMessageTimeDate);\r\n        }\r\n    }\r\n\r\n    @Override\r\n    public void onCancelled(@NonNull DatabaseError databaseError) {\r\n\r\n    }\r\n});\r\n```\r\nrest of the code remains same. the problem was i was assigning values after the ValueEventListener. i don&#39;t know the proper reason but aster assigning the values inside the ValueEventLister the code seems to run fine.","title":"I am having trouble retrieving data from Firebase real time database into String Variables","body":"<p>after changing the code a little the app ran smoothly</p>\n<p>the changed code is:</p>\n<pre><code>final String[] retLastMessage = {null};\nfinal String[] retLastMessageTime = {null};\nfinal String[] retLastMessageDate = {null};\n\nDatabaseReference reference = FirebaseDatabase.getInstance().getReference(&quot;Contacts&quot;).child(currentUserID).child(usersIDs);\n\nreference.addValueEventListener(new ValueEventListener() {\n    @Override\n    public void onDataChange(@NonNull DataSnapshot dataSnapshot) {\n        if (dataSnapshot.hasChild(&quot;LastMessage&quot;)) {\n            retLastMessage[0] = dataSnapshot.child(&quot;LastMessage&quot;).getValue().toString();\n            retLastMessageTime[0] = dataSnapshot.child(&quot;LastMessageTime&quot;).getValue().toString();\n            retLastMessageDate[0] = dataSnapshot.child(&quot;LastMessageDate&quot;).getValue().toString();\n\n            holder.userLastMessage.setVisibility(View.VISIBLE);\n            holder.userLastMessage.setText(retLastMessage[0]);\n            String retLastMessageTimeDate = retLastMessageTime[0] + &quot; &quot; + retLastMessageDate[0];\n\n            holder.userLastMsgTime.setVisibility(View.VISIBLE);\n            holder.userLastMsgTime.setText(retLastMessageTimeDate);\n        }\n    }\n\n    @Override\n    public void onCancelled(@NonNull DatabaseError databaseError) {\n\n    }\n});\n</code></pre>\n<p>rest of the code remains same. the problem was i was assigning values after the ValueEventListener. i don't know the proper reason but aster assigning the values inside the ValueEventLister the code seems to run fine.</p>\n"}],"owner":{"account_id":18063072,"reputation":532,"user_id":13129731,"display_name":"eNeM"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":63,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":60873815,"answer_count":2,"score":0,"last_activity_date":1669639961,"creation_date":1585239758,"question_id":60871668,"body_markdown":"My code is as below... I am new to this line so any help is appreciated.\r\n\r\n```\r\n@Override\r\n    public void onStart() {\r\n        super.onStart();\r\n\r\n        FirebaseRecyclerOptions&lt;Contacts&gt; options = new FirebaseRecyclerOptions.Builder&lt;Contacts&gt;().setQuery(ChatsRef, Contacts.class).build();\r\n        FirebaseRecyclerAdapter&lt;Contacts, ChatsViewHolder&gt; adapter = new FirebaseRecyclerAdapter&lt;Contacts, ChatsViewHolder&gt;(options) {\r\n            @Override\r\n            protected void onBindViewHolder(@NonNull final ChatsViewHolder holder, int position, @NonNull Contacts model) {\r\n                final String usersIDs = getRef(position).getKey();\r\n                final String[] retImage = {&quot;default_image&quot;};\r\n\r\n                UsersRef.child(usersIDs).addValueEventListener(new ValueEventListener() {\r\n                    @Override\r\n                    public void onDataChange(@NonNull DataSnapshot dataSnapshot) {\r\n                        if (dataSnapshot.exists())  {\r\n                            if (dataSnapshot.hasChild(&quot;image&quot;)) {\r\n                                retImage[0] = dataSnapshot.child(&quot;image&quot;).getValue().toString();\r\n                                Picasso.get().load(retImage[0]).into(holder.profileImage);\r\n                            }\r\n\r\n                            final String retName = dataSnapshot.child(&quot;name&quot;).getValue().toString();\r\n\r\n                            holder.userName.setText(retName);\r\n\r\n                            if (dataSnapshot.child(&quot;userState&quot;).hasChild(&quot;state&quot;)) {\r\n                                String state = dataSnapshot.child(&quot;userState&quot;).child(&quot;state&quot;).getValue().toString();\r\n\r\n                                if (state.equals(&quot;online&quot;)) {\r\n                                    holder.onlineIcon.setVisibility(View.VISIBLE);\r\n                                }\r\n                                else if (state.equals(&quot;offline&quot;)) {\r\n                                    holder.onlineIcon.setVisibility(View.INVISIBLE);\r\n                                }\r\n                            }\r\n\r\n                            else {\r\n                                holder.onlineIcon.setVisibility(View.INVISIBLE);\r\n                            }\r\n\r\n// i am having trouble from this portion onwards\r\n  \r\n                            final String[] retLastMessage = {null};\r\n                            final String[] retLastMessageTime = {null};\r\n                            final String[] retLastMessageDate = {null};\r\n\r\n                            RootRef.child(&quot;Contacts&quot;).child(currentUserID).child(usersIDs).addListenerForSingleValueEvent(new ValueEventListener() {\r\n                                @Override\r\n                                public void onDataChange(@NonNull DataSnapshot dataSnapshot) {\r\n\r\n                                    if (dataSnapshot.hasChild(&quot;LastMessage&quot;)) {\r\n                                        retLastMessage[0] = dataSnapshot.child(&quot;LastMessage&quot;).getValue().toString();\r\n                                        retLastMessageTime[0] = dataSnapshot.child(&quot;LastMessageTime&quot;).getValue().toString();\r\n                                        retLastMessageDate[0] = dataSnapshot.child(&quot;LastMessageDate&quot;).getValue().toString();\r\n                                    }\r\n                                }\r\n\r\n                                @Override\r\n                                public void onCancelled(@NonNull DatabaseError databaseError) {\r\n                                }\r\n                            });\r\n\r\n                            holder.userLastMessage.setText(retLastMessage[0]);\r\n\r\n                            String retLastMessageTimeDate = retLastMessageTime[0] + &quot; &quot; + retLastMessageDate[0];\r\n\r\n                            holder.userLastMsgTime.setVisibility(View.VISIBLE);\r\n                            holder.userLastMsgTime.setText(retLastMessageTimeDate);\r\n//upto this I guess\r\n\r\n\r\n                            holder.itemView.setOnClickListener(new View.OnClickListener() {\r\n                                @Override\r\n                                public void onClick(View view) {\r\n                                    Intent chatIntent = new Intent(getContext(), ChatActivity.class);\r\n                                    chatIntent.putExtra(&quot;visit_user_id&quot;, usersIDs);\r\n                                    chatIntent.putExtra(&quot;visit_user_name&quot;, retName);\r\n                                    chatIntent.putExtra(&quot;visit_image&quot;, retImage[0]);\r\n                                    startActivity(chatIntent);\r\n                                }\r\n                            });\r\n                        }\r\n                    }\r\n\r\n                    @Override\r\n                    public void onCancelled(@NonNull DatabaseError databaseError) {\r\n\r\n                    }\r\n                });\r\n            }\r\n\r\n            @NonNull\r\n            @Override\r\n            public ChatsViewHolder onCreateViewHolder(@NonNull ViewGroup viewGroup, int i) {\r\n                View view = LayoutInflater.from(viewGroup.getContext()).inflate(R.layout.users_display_layout, viewGroup, false);\r\n                return new ChatsViewHolder(view);\r\n            }\r\n        };\r\n        chatsList.setAdapter(adapter);\r\n        adapter.startListening();\r\n    }\r\n```\r\napp is crashing when it tries to retrieve these data from firebase\r\nplease help. I am using the above code to actually get the final message and time of last message to display it in chats fragment of my app. the last message and last message time are saved in contacts node\r\n[this is how the database entry looks like][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/kXUAO.png","title":"I am having trouble retrieving data from Firebase real time database into String Variables","body":"<p>My code is as below... I am new to this line so any help is appreciated.</p>\n\n<pre><code>@Override\n    public void onStart() {\n        super.onStart();\n\n        FirebaseRecyclerOptions&lt;Contacts&gt; options = new FirebaseRecyclerOptions.Builder&lt;Contacts&gt;().setQuery(ChatsRef, Contacts.class).build();\n        FirebaseRecyclerAdapter&lt;Contacts, ChatsViewHolder&gt; adapter = new FirebaseRecyclerAdapter&lt;Contacts, ChatsViewHolder&gt;(options) {\n            @Override\n            protected void onBindViewHolder(@NonNull final ChatsViewHolder holder, int position, @NonNull Contacts model) {\n                final String usersIDs = getRef(position).getKey();\n                final String[] retImage = {\"default_image\"};\n\n                UsersRef.child(usersIDs).addValueEventListener(new ValueEventListener() {\n                    @Override\n                    public void onDataChange(@NonNull DataSnapshot dataSnapshot) {\n                        if (dataSnapshot.exists())  {\n                            if (dataSnapshot.hasChild(\"image\")) {\n                                retImage[0] = dataSnapshot.child(\"image\").getValue().toString();\n                                Picasso.get().load(retImage[0]).into(holder.profileImage);\n                            }\n\n                            final String retName = dataSnapshot.child(\"name\").getValue().toString();\n\n                            holder.userName.setText(retName);\n\n                            if (dataSnapshot.child(\"userState\").hasChild(\"state\")) {\n                                String state = dataSnapshot.child(\"userState\").child(\"state\").getValue().toString();\n\n                                if (state.equals(\"online\")) {\n                                    holder.onlineIcon.setVisibility(View.VISIBLE);\n                                }\n                                else if (state.equals(\"offline\")) {\n                                    holder.onlineIcon.setVisibility(View.INVISIBLE);\n                                }\n                            }\n\n                            else {\n                                holder.onlineIcon.setVisibility(View.INVISIBLE);\n                            }\n\n// i am having trouble from this portion onwards\n\n                            final String[] retLastMessage = {null};\n                            final String[] retLastMessageTime = {null};\n                            final String[] retLastMessageDate = {null};\n\n                            RootRef.child(\"Contacts\").child(currentUserID).child(usersIDs).addListenerForSingleValueEvent(new ValueEventListener() {\n                                @Override\n                                public void onDataChange(@NonNull DataSnapshot dataSnapshot) {\n\n                                    if (dataSnapshot.hasChild(\"LastMessage\")) {\n                                        retLastMessage[0] = dataSnapshot.child(\"LastMessage\").getValue().toString();\n                                        retLastMessageTime[0] = dataSnapshot.child(\"LastMessageTime\").getValue().toString();\n                                        retLastMessageDate[0] = dataSnapshot.child(\"LastMessageDate\").getValue().toString();\n                                    }\n                                }\n\n                                @Override\n                                public void onCancelled(@NonNull DatabaseError databaseError) {\n                                }\n                            });\n\n                            holder.userLastMessage.setText(retLastMessage[0]);\n\n                            String retLastMessageTimeDate = retLastMessageTime[0] + \" \" + retLastMessageDate[0];\n\n                            holder.userLastMsgTime.setVisibility(View.VISIBLE);\n                            holder.userLastMsgTime.setText(retLastMessageTimeDate);\n//upto this I guess\n\n\n                            holder.itemView.setOnClickListener(new View.OnClickListener() {\n                                @Override\n                                public void onClick(View view) {\n                                    Intent chatIntent = new Intent(getContext(), ChatActivity.class);\n                                    chatIntent.putExtra(\"visit_user_id\", usersIDs);\n                                    chatIntent.putExtra(\"visit_user_name\", retName);\n                                    chatIntent.putExtra(\"visit_image\", retImage[0]);\n                                    startActivity(chatIntent);\n                                }\n                            });\n                        }\n                    }\n\n                    @Override\n                    public void onCancelled(@NonNull DatabaseError databaseError) {\n\n                    }\n                });\n            }\n\n            @NonNull\n            @Override\n            public ChatsViewHolder onCreateViewHolder(@NonNull ViewGroup viewGroup, int i) {\n                View view = LayoutInflater.from(viewGroup.getContext()).inflate(R.layout.users_display_layout, viewGroup, false);\n                return new ChatsViewHolder(view);\n            }\n        };\n        chatsList.setAdapter(adapter);\n        adapter.startListening();\n    }\n</code></pre>\n\n<p>app is crashing when it tries to retrieve these data from firebase\nplease help. I am using the above code to actually get the final message and time of last message to display it in chats fragment of my app. the last message and last message time are saved in contacts node\n<a href=\"https://i.stack.imgur.com/kXUAO.png\" rel=\"nofollow noreferrer\">this is how the database entry looks like</a></p>\n"},{"tags":["java","gradle"],"owner":{"account_id":143734,"reputation":751,"user_id":352290,"accept_rate":100,"display_name":"user352290"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":87,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"answer_count":0,"score":3,"last_activity_date":1669639530,"creation_date":1669638496,"question_id":74600575,"body_markdown":"How to exclude a module while defining a library using version-catalog plugin\r\nIn this scenario, I want to exclude org.yaml as defined below. \r\nHow should I do that?\r\n\r\n    &gt; // faker testImplementation(&#39;com.github.javafaker:javafaker:1.0.2&#39;) {\r\n    &gt; exclude module: &#39;org.yaml&#39; }\r\n\r\nMy definition looks like this, should I exclude here or should I exclude where I call this library in build.gradle\r\n\r\n&gt; library(&#39;javafaker&#39;, &#39;com.github.javafaker&#39;,\r\n&gt; &#39;javafaker&#39;).version(faker)\r\n\r\n","title":"How to exclude a module while defining a library in version-catalog","body":"<p>How to exclude a module while defining a library using version-catalog plugin\nIn this scenario, I want to exclude org.yaml as defined below.\nHow should I do that?</p>\n<pre><code>&gt; // faker testImplementation('com.github.javafaker:javafaker:1.0.2') {\n&gt; exclude module: 'org.yaml' }\n</code></pre>\n<p>My definition looks like this, should I exclude here or should I exclude where I call this library in build.gradle</p>\n<blockquote>\n<p>library('javafaker', 'com.github.javafaker',\n'javafaker').version(faker)</p>\n</blockquote>\n"},{"tags":["java","intellij-idea","osgi"],"comments":[{"owner":{"account_id":3538058,"reputation":5428,"user_id":2960034,"display_name":"y.bedrov"},"score":0,"creation_date":1669658521,"post_id":74600743,"comment_id":131687598,"body_markdown":"Is it possible to share sample project example?","body":"Is it possible to share sample project example?"},{"owner":{"account_id":91170,"reputation":6162,"user_id":250517,"accept_rate":75,"display_name":"Grzegorz Grzybek"},"score":0,"creation_date":1669700179,"post_id":74600743,"comment_id":131696057,"body_markdown":"IDEA doesn&#39;t know much (without plugins) about OSGi/SCR (at least that&#39;s how I interpret this annotation). You can always hit alt-enter and chose to ignore such kind of warning.","body":"IDEA doesn&#39;t know much (without plugins) about OSGi/SCR (at least that&#39;s how I interpret this annotation). You can always hit alt-enter and chose to ignore such kind of warning."}],"owner":{"account_id":16877693,"reputation":21,"user_id":12204672,"display_name":"Moribund"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":23,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1669639233,"creation_date":1669639233,"question_id":74600743,"body_markdown":"InelliJ IDEA (2022.2.3) show @References as never assigned. In runtime, correct bean is injected. Is it possible to show Intellij this class to remove false-positive warning about not never assigned field? \r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/13Hgt.png","title":"OSGI @Reference never assigned in Intelij IDEA","body":"<p>InelliJ IDEA (2022.2.3) show @References as never assigned. In runtime, correct bean is injected. Is it possible to show Intellij this class to remove false-positive warning about not never assigned field?</p>\n<p><a href=\"https://i.stack.imgur.com/13Hgt.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/13Hgt.png\" alt=\"enter image description here\" /></a></p>\n"},{"tags":["java","vaadin","vaadin7"],"answers":[{"tags":[],"owner":{"account_id":4430906,"reputation":3990,"user_id":3608089,"display_name":"ollitietavainen"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1669639212,"creation_date":1669639212,"answer_id":74600737,"question_id":74599571,"body_markdown":"Sounds like the manual column resizing is not respecting the maximum width, so it&#39;s a bug in Grid. ","title":"Prevent frozen columns resize from extending out of the grid","body":"<p>Sounds like the manual column resizing is not respecting the maximum width, so it's a bug in Grid.</p>\n"}],"owner":{"account_id":17724887,"reputation":1,"user_id":12868911,"display_name":"notknownman"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":66,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1669639212,"creation_date":1669633107,"question_id":74599571,"body_markdown":"In Grid component when I try to resize frozen column too much it goes out of the grid and there is no way I can resize it back to its initial position[This is an example from Vaadin sampler](https://i.stack.imgur.com/ZVMug.gif).  \r\n\r\nIs there any way I can prevent frozen columns from extending out of the grid?\r\n\r\nI tried to call setMaximumWidth() on frozen columns however this seems to not work on columns that are being resized. ","title":"Prevent frozen columns resize from extending out of the grid","body":"<p>In Grid component when I try to resize frozen column too much it goes out of the grid and there is no way I can resize it back to its initial position<a href=\"https://i.stack.imgur.com/ZVMug.gif\" rel=\"nofollow noreferrer\">This is an example from Vaadin sampler</a>.</p>\n<p>Is there any way I can prevent frozen columns from extending out of the grid?</p>\n<p>I tried to call setMaximumWidth() on frozen columns however this seems to not work on columns that are being resized.</p>\n"},{"tags":["java","encryption","cryptography","shift","caesar-cipher"],"answers":[{"tags":[],"owner":{"account_id":13225721,"reputation":1061,"user_id":9550867,"display_name":"raiyan22"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1669464648,"creation_date":1669464648,"answer_id":74582044,"question_id":74581953,"body_markdown":"    // import required classes and package, if any    \r\n    import java.util.Scanner;   \r\n       \r\n    // create class CaesarCipherExample for encryption and decryption    \r\n    public class CaesarCipherExample   \r\n    {   \r\n        // ALPHABET string denotes alphabet from a-z   \r\n        public static final String ALPHABET = &quot;abcdefghijklmnopqrstuvwxyz&quot;;   \r\n          \r\n        // create encryptData() method for encrypting user input string with given shift key   \r\n        public static String encryptData(String inputStr, int shiftKey)   \r\n        {   \r\n            // convert inputStr into lower case   \r\n            inputStr = inputStr.toLowerCase();   \r\n              \r\n            // encryptStr to store encrypted data   \r\n            String encryptStr = &quot;&quot;;   \r\n              \r\n            // use for loop for traversing each character of the input string   \r\n            for (int i = 0; i &lt; inputStr.length(); i++)   \r\n            {   \r\n                // get position of each character of inputStr in ALPHABET   \r\n                int pos = ALPHABET.indexOf(inputStr.charAt(i));   \r\n                  \r\n                // get encrypted char for each char of inputStr   \r\n                int encryptPos = (shiftKey + pos) % 26;   \r\n                char encryptChar = ALPHABET.charAt(encryptPos);   \r\n                  \r\n                // add encrypted char to encrypted string   \r\n                encryptStr += encryptChar;   \r\n            }   \r\n              \r\n            // return encrypted string   \r\n            return encryptStr;   \r\n        }   \r\n          \r\n        // create decryptData() method for decrypting user input string with given shift key   \r\n        public static String decryptData(String inputStr, int shiftKey)   \r\n        {   \r\n            // convert inputStr into lower case   \r\n            inputStr = inputStr.toLowerCase();   \r\n              \r\n            // decryptStr to store decrypted data   \r\n            String decryptStr = &quot;&quot;;   \r\n              \r\n            // use for loop for traversing each character of the input string   \r\n            for (int i = 0; i &lt; inputStr.length(); i++)   \r\n            {   \r\n                  \r\n                // get position of each character of inputStr in ALPHABET   \r\n                int pos = ALPHABET.indexOf(inputStr.charAt(i));   \r\n                  \r\n                // get decrypted char for each char of inputStr   \r\n                int decryptPos = (pos - shiftKey) % 26;   \r\n                  \r\n                // if decryptPos is negative   \r\n                if (decryptPos &lt; 0){   \r\n                    decryptPos = ALPHABET.length() + decryptPos;   \r\n                }   \r\n                char decryptChar = ALPHABET.charAt(decryptPos);   \r\n                  \r\n                // add decrypted char to decrypted string   \r\n                decryptStr += decryptChar;   \r\n            }   \r\n            // return decrypted string   \r\n            return decryptStr;   \r\n        }   \r\n          \r\n        // main() method start   \r\n        public static void main(String[] args)   \r\n        {   \r\n            // create an instance of Scanner class   \r\n            Scanner sc = new Scanner(System.in);   \r\n              \r\n            // take input from the user   \r\n            System.out.println(&quot;Enter a string for encryption using Caesar Cipher: &quot;);   \r\n            String inputStr = sc.nextLine();   \r\n              \r\n            System.out.println(&quot;Enter the value by which each character in the plaintext message gets shifted: &quot;);   \r\n            int shiftKey = Integer.valueOf(sc.nextLine());   \r\n              \r\n            System.out.println(&quot;Encrypted Data ===&gt; &quot;+encryptData(inputStr, shiftKey));   \r\n            System.out.println(&quot;Decrypted Data ===&gt; &quot;+decryptData(encryptData(inputStr, shiftKey), shiftKey));   \r\n              \r\n            // close Scanner class object   \r\n            sc.close();   \r\n        }   \r\n    }   ","title":"How do i modify my code below using Caesar Cipher - JAVA","body":"<pre><code>// import required classes and package, if any    \nimport java.util.Scanner;   \n   \n// create class CaesarCipherExample for encryption and decryption    \npublic class CaesarCipherExample   \n{   \n    // ALPHABET string denotes alphabet from a-z   \n    public static final String ALPHABET = &quot;abcdefghijklmnopqrstuvwxyz&quot;;   \n      \n    // create encryptData() method for encrypting user input string with given shift key   \n    public static String encryptData(String inputStr, int shiftKey)   \n    {   \n        // convert inputStr into lower case   \n        inputStr = inputStr.toLowerCase();   \n          \n        // encryptStr to store encrypted data   \n        String encryptStr = &quot;&quot;;   \n          \n        // use for loop for traversing each character of the input string   \n        for (int i = 0; i &lt; inputStr.length(); i++)   \n        {   \n            // get position of each character of inputStr in ALPHABET   \n            int pos = ALPHABET.indexOf(inputStr.charAt(i));   \n              \n            // get encrypted char for each char of inputStr   \n            int encryptPos = (shiftKey + pos) % 26;   \n            char encryptChar = ALPHABET.charAt(encryptPos);   \n              \n            // add encrypted char to encrypted string   \n            encryptStr += encryptChar;   \n        }   \n          \n        // return encrypted string   \n        return encryptStr;   \n    }   \n      \n    // create decryptData() method for decrypting user input string with given shift key   \n    public static String decryptData(String inputStr, int shiftKey)   \n    {   \n        // convert inputStr into lower case   \n        inputStr = inputStr.toLowerCase();   \n          \n        // decryptStr to store decrypted data   \n        String decryptStr = &quot;&quot;;   \n          \n        // use for loop for traversing each character of the input string   \n        for (int i = 0; i &lt; inputStr.length(); i++)   \n        {   \n              \n            // get position of each character of inputStr in ALPHABET   \n            int pos = ALPHABET.indexOf(inputStr.charAt(i));   \n              \n            // get decrypted char for each char of inputStr   \n            int decryptPos = (pos - shiftKey) % 26;   \n              \n            // if decryptPos is negative   \n            if (decryptPos &lt; 0){   \n                decryptPos = ALPHABET.length() + decryptPos;   \n            }   \n            char decryptChar = ALPHABET.charAt(decryptPos);   \n              \n            // add decrypted char to decrypted string   \n            decryptStr += decryptChar;   \n        }   \n        // return decrypted string   \n        return decryptStr;   \n    }   \n      \n    // main() method start   \n    public static void main(String[] args)   \n    {   \n        // create an instance of Scanner class   \n        Scanner sc = new Scanner(System.in);   \n          \n        // take input from the user   \n        System.out.println(&quot;Enter a string for encryption using Caesar Cipher: &quot;);   \n        String inputStr = sc.nextLine();   \n          \n        System.out.println(&quot;Enter the value by which each character in the plaintext message gets shifted: &quot;);   \n        int shiftKey = Integer.valueOf(sc.nextLine());   \n          \n        System.out.println(&quot;Encrypted Data ===&gt; &quot;+encryptData(inputStr, shiftKey));   \n        System.out.println(&quot;Decrypted Data ===&gt; &quot;+decryptData(encryptData(inputStr, shiftKey), shiftKey));   \n          \n        // close Scanner class object   \n        sc.close();   \n    }   \n}   \n</code></pre>\n"}],"owner":{"account_id":27012951,"reputation":1,"user_id":20572292,"display_name":"gaming With HENEy"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":191,"favorite_count":0,"down_vote_count":2,"up_vote_count":0,"answer_count":1,"score":-2,"last_activity_date":1669638762,"creation_date":1669463731,"question_id":74581953,"body_markdown":"I want to implement a Caesar Cipher shift to shift each letter to the left in a string by 2 .The code above shift the words right by 2 using Caeser Cipher,How do I modify my code it to make it shift left by 2. For example, “Jgnnq vjgtg!” with a shift of 2 will become “Hello there!&quot;\r\n\r\n```\r\npublic static void main(String[] args) {\r\n\t\tSystem.out.println(caesarEncrypt(&quot;Hello there!&quot;, 2)); \r\n\t}\r\n\r\n\tpublic static String caesarEncrypt(String ss, int shift){\r\n\t    String s = &quot;&quot;;\r\n\t    int len = ss.length();\r\n\t    for(int x = 0; x &lt; len; x++){\r\n\t        char c = (char)(ss.charAt(x) + shift);\r\n\t        if (c &gt; &#39;z&#39;) {\r\n\t            s += (char)(ss.charAt(x) - (26-shift));\r\n            }\r\n\t        else {\r\n\t            s += (char)(ss.charAt(x) + shift);\r\n            }\r\n\t    }\r\n\t    return s;\r\n\t}\r\n}\r\n```","title":"How do i modify my code below using Caesar Cipher - JAVA","body":"<p>I want to implement a Caesar Cipher shift to shift each letter to the left in a string by 2 .The code above shift the words right by 2 using Caeser Cipher,How do I modify my code it to make it shift left by 2. For example, “Jgnnq vjgtg!” with a shift of 2 will become “Hello there!&quot;</p>\n<pre><code>public static void main(String[] args) {\n        System.out.println(caesarEncrypt(&quot;Hello there!&quot;, 2)); \n    }\n\n    public static String caesarEncrypt(String ss, int shift){\n        String s = &quot;&quot;;\n        int len = ss.length();\n        for(int x = 0; x &lt; len; x++){\n            char c = (char)(ss.charAt(x) + shift);\n            if (c &gt; 'z') {\n                s += (char)(ss.charAt(x) - (26-shift));\n            }\n            else {\n                s += (char)(ss.charAt(x) + shift);\n            }\n        }\n        return s;\n    }\n}\n</code></pre>\n"},{"tags":["java","javascript","applet"],"comments":[{"owner":{"account_id":47283,"reputation":703817,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"score":10,"creation_date":1273044363,"post_id":2771167,"comment_id":2804631,"body_markdown":"Yes - it is a technique known as &quot;employing a programmer&quot;.  :-)","body":"Yes - it is a technique known as &quot;employing a programmer&quot;.  :-)"},{"owner":{"account_id":1263944,"reputation":1332,"user_id":1221661,"accept_rate":75,"display_name":"Fritz"},"score":0,"creation_date":1669638872,"post_id":2771167,"comment_id":131680479,"body_markdown":"Does this answer your question? [How to Cross-Compile Java Source Code to JavaScript?](https://stackoverflow.com/questions/440302/how-to-cross-compile-java-source-code-to-javascript)","body":"Does this answer your question? <a href=\"https://stackoverflow.com/questions/440302/how-to-cross-compile-java-source-code-to-javascript\">How to Cross-Compile Java Source Code to JavaScript?</a>"}],"answers":[{"tags":[],"owner":{"account_id":72238,"reputation":2962,"user_id":208660,"display_name":"Ham Vocke"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1273043122,"creation_date":1273043122,"answer_id":2771184,"question_id":2771167,"body_markdown":"I don&#39;t think there is a good way to do so. Please remember: Java and JavaScript are two entirely different technologies. Don&#39;t mix them up.","title":"convert java applet code in to java script","body":"<p>I don't think there is a good way to do so. Please remember: Java and JavaScript are two entirely different technologies. Don't mix them up.</p>\n"},{"tags":[],"owner":{"account_id":62022,"reputation":43632,"user_id":184499,"display_name":"Matt"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1273043220,"creation_date":1273043220,"answer_id":2771191,"question_id":2771167,"body_markdown":"Not really, no. They&#39;re different languages with different libraries.\r\n\r\nIf you want to develop for the client-side Web with Java, have a look at [GWT](http://code.google.com/webtoolkit/)","title":"convert java applet code in to java script","body":"<p>Not really, no. They're different languages with different libraries.</p>\n\n<p>If you want to develop for the client-side Web with Java, have a look at <a href=\"http://code.google.com/webtoolkit/\" rel=\"nofollow noreferrer\">GWT</a></p>\n"},{"tags":[],"owner":{"account_id":85644,"reputation":54700,"user_id":238639,"display_name":"bakkal"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1273043483,"creation_date":1273043483,"answer_id":2771210,"question_id":2771167,"body_markdown":"Not directly and without effort as far as I know. However people have ported many things to HTML/JS, like Quake 2 on GWT. So you could invest some time and step into the code and port it with GWT.\r\nAdvantages of going with GWT arise from the fact that your applet is in Java language, which is the same language you use for GWT. Here is a list of what you can use in your code: [GWT JRE Emulation][1]\r\n\r\n\r\n  [1]: http://code.google.com/webtoolkit/doc/latest/RefJreEmulation.html","title":"convert java applet code in to java script","body":"<p>Not directly and without effort as far as I know. However people have ported many things to HTML/JS, like Quake 2 on GWT. So you could invest some time and step into the code and port it with GWT.\nAdvantages of going with GWT arise from the fact that your applet is in Java language, which is the same language you use for GWT. Here is a list of what you can use in your code: <a href=\"http://code.google.com/webtoolkit/doc/latest/RefJreEmulation.html\" rel=\"nofollow noreferrer\">GWT JRE Emulation</a></p>\n"},{"tags":[],"owner":{"account_id":121177,"reputation":18547,"user_id":314073,"accept_rate":88,"display_name":"Xorty"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1273044845,"creation_date":1273044845,"answer_id":2771309,"question_id":2771167,"body_markdown":"No.\r\nGoogle Web Toolkit (GWT) is what you might need. I recommend book [GWT In Practice 2008][1]\r\n\r\n\r\n  [1]: http://www.manning.com/cooper/","title":"convert java applet code in to java script","body":"<p>No.\nGoogle Web Toolkit (GWT) is what you might need. I recommend book <a href=\"http://www.manning.com/cooper/\" rel=\"nofollow noreferrer\">GWT In Practice 2008</a></p>\n"},{"tags":[],"owner":{"account_id":1263944,"reputation":1332,"user_id":1221661,"accept_rate":75,"display_name":"Fritz"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1669638682,"creation_date":1669638682,"answer_id":74600617,"question_id":2771167,"body_markdown":"12 years later there is now a tool called &quot;JSweet&quot; which claims to do exactly that: converting Java code to JavaScript: https://www.jsweet.org/\r\n\r\nThere is also a blog post from 2019 of someone using JSweet to convert some Java Applets to JavaScript: https://www.lprp.fr/2019/08/jsweet-convert-applets-to-javascript/","title":"convert java applet code in to java script","body":"<p>12 years later there is now a tool called &quot;JSweet&quot; which claims to do exactly that: converting Java code to JavaScript: <a href=\"https://www.jsweet.org/\" rel=\"nofollow noreferrer\">https://www.jsweet.org/</a></p>\n<p>There is also a blog post from 2019 of someone using JSweet to convert some Java Applets to JavaScript: <a href=\"https://www.lprp.fr/2019/08/jsweet-convert-applets-to-javascript/\" rel=\"nofollow noreferrer\">https://www.lprp.fr/2019/08/jsweet-convert-applets-to-javascript/</a></p>\n"}],"owner":{"account_id":132450,"reputation":1259,"user_id":333146,"display_name":"Danny"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":4653,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":2771191,"answer_count":5,"score":2,"last_activity_date":1669638682,"creation_date":1273042804,"question_id":2771167,"body_markdown":"Is any way to convert a java applet code to java script?","title":"convert java applet code in to java script","body":"<p>Is any way to convert a java applet code to java script?</p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":8802865,"reputation":2206,"user_id":6578434,"accept_rate":100,"display_name":"Luk"},"score":0,"creation_date":1550152221,"post_id":54691873,"comment_id":96171332,"body_markdown":"https://stackoverflow.com/questions/477550/is-there-a-way-to-access-an-iteration-counter-in-javas-for-each-loop","body":"<a href=\"https://stackoverflow.com/questions/477550/is-there-a-way-to-access-an-iteration-counter-in-javas-for-each-loop\" title=\"is there a way to access an iteration counter in javas for each loop\">stackoverflow.com/questions/477550/&hellip;</a>"},{"owner":{"account_id":8532578,"reputation":39898,"user_id":6395627,"display_name":"Slaw"},"score":1,"creation_date":1550152230,"post_id":54691873,"comment_id":96171341,"body_markdown":"Changing the value of `m` will not modify the element in the array. See [Is Java “pass-by-reference” or “pass-by-value”?](https://stackoverflow.com/questions/40480/).","body":"Changing the value of <code>m</code> will not modify the element in the array. See <a href=\"https://stackoverflow.com/questions/40480/\">Is Java “pass-by-reference” or “pass-by-value”?</a>."},{"owner":{"account_id":7612423,"reputation":82486,"user_id":5772882,"display_name":"Anonymous"},"score":0,"creation_date":1550153001,"post_id":54691873,"comment_id":96171791,"body_markdown":"The enhanced for loop (what you call *for each*) only takes elements out of the array, collection or iterable that you’re iterating. It cannot put anything back there. So it seems you are asking the impossible.","body":"The enhanced for loop (what you call <i>for each</i>) only takes elements out of the array, collection or iterable that you’re iterating. It cannot put anything back there. So it seems you are asking the impossible."}],"answers":[{"tags":[],"owner":{"account_id":3929075,"reputation":5785,"user_id":3248412,"accept_rate":89,"display_name":"vs97"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1550152058,"creation_date":1550152058,"answer_id":54691938,"question_id":54691873,"body_markdown":"You should use a for-loop with index for that, in order to write into the array:\r\n\r\n        Scanner scanner = new Scanner(System.in);\r\n        int[] arr = new int[3];\r\n        for(int i=0;i&lt;arr.length;i++)\r\n        {\r\n            arr[i]=scanner.nextInt();\r\n        }\r\n\r\nCurrently what you are doing with the for-each is getting the value of `m` from the array, set it to the user input, but you are not adding it back into the array. Therefore your array remains empty.","title":"How to use &quot;for each&quot; in java to get input?","body":"<p>You should use a for-loop with index for that, in order to write into the array:</p>\n\n<pre><code>    Scanner scanner = new Scanner(System.in);\n    int[] arr = new int[3];\n    for(int i=0;i&lt;arr.length;i++)\n    {\n        arr[i]=scanner.nextInt();\n    }\n</code></pre>\n\n<p>Currently what you are doing with the for-each is getting the value of <code>m</code> from the array, set it to the user input, but you are not adding it back into the array. Therefore your array remains empty.</p>\n"},{"tags":[],"owner":{"account_id":9021005,"reputation":4164,"user_id":6722100,"accept_rate":67,"display_name":"achAmh&#225;in"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1550152397,"creation_date":1550152397,"answer_id":54692048,"question_id":54691873,"body_markdown":"`int[] arr = new int[3];` sets up an `array` of 3 `0`s.\r\n\r\nWithin each iteration of your loop, `m = scanner.nextInt();` just sets `m` to whatever the input is, and adds nothing to the `array`.\r\n\r\nDo you specifically need to assign values within a `foreach` loop?\r\n\r\nIf not, then just assign a position in the `array` using a standard `for` loop to do it this way -&gt; `for (int i = 0; i &lt; arr.length; i++) {` and assign with `arr[i]= scanner.nextInt();`.\r\n\r\nIf so, I think you&#39;ll need to set up your own iteration counter, and use that.\r\n","title":"How to use &quot;for each&quot; in java to get input?","body":"<p><code>int[] arr = new int[3];</code> sets up an <code>array</code> of 3 <code>0</code>s.</p>\n\n<p>Within each iteration of your loop, <code>m = scanner.nextInt();</code> just sets <code>m</code> to whatever the input is, and adds nothing to the <code>array</code>.</p>\n\n<p>Do you specifically need to assign values within a <code>foreach</code> loop?</p>\n\n<p>If not, then just assign a position in the <code>array</code> using a standard <code>for</code> loop to do it this way -> <code>for (int i = 0; i &lt; arr.length; i++) {</code> and assign with <code>arr[i]= scanner.nextInt();</code>.</p>\n\n<p>If so, I think you'll need to set up your own iteration counter, and use that.</p>\n"},{"tags":[],"owner":{"account_id":14071686,"reputation":141,"user_id":10165054,"display_name":"M. Goodman"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1550152478,"creation_date":1550152478,"answer_id":54692087,"question_id":54691873,"body_markdown":"m is being declared as a local int and assigned, but the array is not being updated. You need to set arr[x] equal to the next int of the scanner. Right now you&#39;re just reading it, assigning it to m, and doing nothing with it.\r\n\r\n\r\n    \r\n    for(int i=0; i&lt;arr.length; i++){\r\n            arr[i]=scanner.nextInt();\r\n            \r\n    }\r\n\r\n","title":"How to use &quot;for each&quot; in java to get input?","body":"<p>m is being declared as a local int and assigned, but the array is not being updated. You need to set arr[x] equal to the next int of the scanner. Right now you're just reading it, assigning it to m, and doing nothing with it.</p>\n\n<pre><code>for(int i=0; i&lt;arr.length; i++){\n        arr[i]=scanner.nextInt();\n\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":15517942,"reputation":1,"user_id":11194855,"display_name":"Ramesh NR"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1640573485,"creation_date":1640573485,"answer_id":70491306,"question_id":54691873,"body_markdown":"I&#39;m Shouldn&#39;t recommend this solution, you just use for loop to get the input from the user.\r\n\r\n    Scanner scanner = new Scanner(System.in);\r\n    int [] arr = new int[3];\r\n    int k = 0;\r\n    for(int m : arr) {\r\n        arr[k] = scanner.nextInt();\r\n        ++k;\r\n    }\r\n    scanner.close();\r\n\r\nnow, it will work\\\r\n//arr[0] = 1 , arr[1] = 5 , arr[2] = 61","title":"How to use &quot;for each&quot; in java to get input?","body":"<p>I'm Shouldn't recommend this solution, you just use for loop to get the input from the user.</p>\n<pre><code>Scanner scanner = new Scanner(System.in);\nint [] arr = new int[3];\nint k = 0;\nfor(int m : arr) {\n    arr[k] = scanner.nextInt();\n    ++k;\n}\nscanner.close();\n</code></pre>\n<p>now, it will work<br />\n//arr[0] = 1 , arr[1] = 5 , arr[2] = 61</p>\n"},{"tags":[],"owner":{"account_id":18513280,"reputation":1,"user_id":13487971,"display_name":"Hasudungan"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1640852180,"creation_date":1640852180,"answer_id":70529030,"question_id":54691873,"body_markdown":"    static void foreach()\r\n\t{\r\n\t\tint amount;\r\n\t\t\r\n\t\tScanner scanner = new Scanner(System.in);\t\t\r\n\t\t\r\n\t\tSystem.out.print(&quot;amount in arr : &quot;);\r\n\t\tamount = scanner.nextInt();\r\n\t\t\r\n\t\tint arr[] = new int[amount];\r\n\t\t\r\n\t\tfor(int newVar : arr)\r\n\t\t{\r\n\t\t\tSystem.out.print(&quot;[&quot; + (newVar +1) +&quot;] = &quot; );\r\n\t\t\tnewVar = scanner.nextInt();\r\n\t\t}","title":"How to use &quot;for each&quot; in java to get input?","body":"<pre><code>static void foreach()\n{\n    int amount;\n    \n    Scanner scanner = new Scanner(System.in);       \n    \n    System.out.print(&quot;amount in arr : &quot;);\n    amount = scanner.nextInt();\n    \n    int arr[] = new int[amount];\n    \n    for(int newVar : arr)\n    {\n        System.out.print(&quot;[&quot; + (newVar +1) +&quot;] = &quot; );\n        newVar = scanner.nextInt();\n    }\n</code></pre>\n"}],"owner":{"account_id":15022676,"reputation":13,"user_id":10843647,"display_name":"F.Rajabi"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2111,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"accepted_answer_id":54691938,"answer_count":5,"score":0,"last_activity_date":1669638643,"creation_date":1550151853,"question_id":54691873,"body_markdown":"I&#39;m a beginner in java. I have question about for each.\r\ncan I use it in order to get input from user?\r\nIf yes, How? \r\n\r\nI tried this code, but didn&#39;t work:\r\n\r\n    Scanner scanner = new Scanner(System.in);\r\n    int[] arr = new int[3];\r\n    for(int m: arr){\r\n        m = scanner.nextInt();\r\n     }\r\n    //arr[0] = 1 , arr[1] = 5 , arr[2] = 61\r\n\r\nBut when I printed my array:  \r\n0 0 0  \r\nwas shown.\r\n\r\n","title":"How to use &quot;for each&quot; in java to get input?","body":"<p>I'm a beginner in java. I have question about for each.\ncan I use it in order to get input from user?\nIf yes, How? </p>\n\n<p>I tried this code, but didn't work:</p>\n\n<pre><code>Scanner scanner = new Scanner(System.in);\nint[] arr = new int[3];\nfor(int m: arr){\n    m = scanner.nextInt();\n }\n//arr[0] = 1 , arr[1] = 5 , arr[2] = 61\n</code></pre>\n\n<p>But when I printed my array:<br>\n0 0 0<br>\nwas shown.</p>\n"},{"tags":["java"],"answers":[{"tags":[],"owner":{"account_id":213468,"reputation":103485,"user_id":466862,"display_name":"Mark Rotteveel"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1669457943,"creation_date":1669457621,"answer_id":74581287,"question_id":74581025,"body_markdown":"You have `PrimeProducer` extend `Thread`, but you don&#39;t actually use it as a thread, you only use it as a `Runnable`, which is executed on a thread of the thread pool. The cancel has no effect, because it calls the `interrupt()` of a different thread than the one that is actually running. When you then call `exec.shutdown()`, the thread pool will interrupt its threads to signal them they should end, when then means `PrimeProducer.run` will stop.\r\n\r\nInstead, use a volatile boolean to end your run (and implement `Runnable` instead of extending `Thread`):\r\n\r\n```\r\npublic class PrimeProducer implements Runnable {\r\n\r\n    private final BlockingQueue&lt;BigInteger&gt; queue;\r\n    private volatile boolean cancelled;\r\n\r\n    PrimeProducer(BlockingQueue&lt;BigInteger&gt; queue) {\r\n        this.queue = queue;\r\n    }\r\n\r\n    @Override\r\n    public void run() {\r\n        try {\r\n            BigInteger p = BigInteger.ONE;\r\n            while (!cancelled) {\r\n                queue.put(p = p.nextProbablePrime());\r\n            }\r\n        } catch (InterruptedException e) {\r\n\r\n        }\r\n    }\r\n\r\n    public void cancel() {\r\n        cancelled = true;\r\n    }\r\n\r\n    public void get() {\r\n        for (BigInteger i : queue) {\r\n            System.out.println(i.toString());\r\n        }\r\n    }\r\n}\r\n```","title":"Why does the ThreadpoolExecutor code never stop running?","body":"<p>You have <code>PrimeProducer</code> extend <code>Thread</code>, but you don't actually use it as a thread, you only use it as a <code>Runnable</code>, which is executed on a thread of the thread pool. The cancel has no effect, because it calls the <code>interrupt()</code> of a different thread than the one that is actually running. When you then call <code>exec.shutdown()</code>, the thread pool will interrupt its threads to signal them they should end, when then means <code>PrimeProducer.run</code> will stop.</p>\n<p>Instead, use a volatile boolean to end your run (and implement <code>Runnable</code> instead of extending <code>Thread</code>):</p>\n<pre><code>public class PrimeProducer implements Runnable {\n\n    private final BlockingQueue&lt;BigInteger&gt; queue;\n    private volatile boolean cancelled;\n\n    PrimeProducer(BlockingQueue&lt;BigInteger&gt; queue) {\n        this.queue = queue;\n    }\n\n    @Override\n    public void run() {\n        try {\n            BigInteger p = BigInteger.ONE;\n            while (!cancelled) {\n                queue.put(p = p.nextProbablePrime());\n            }\n        } catch (InterruptedException e) {\n\n        }\n    }\n\n    public void cancel() {\n        cancelled = true;\n    }\n\n    public void get() {\n        for (BigInteger i : queue) {\n            System.out.println(i.toString());\n        }\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":23757056,"reputation":97,"user_id":17773053,"display_name":"xiunian"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":97,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":74581287,"answer_count":1,"score":1,"last_activity_date":1669638571,"creation_date":1669454599,"question_id":74581025,"body_markdown":"I run the code in IntelliJ IDEA and it would not stop. I use `exec.shutdownNow()` instead and it stops successfully. So, I think is the problem of `generator`, but I can&#39;t figure out what problem it is.\r\n\r\nThe main method:\r\n```\r\npublic static void main(String[] args) {\r\n    PrimeProducer generator = new PrimeProducer(new ArrayBlockingQueue&lt;&gt;(10));\r\n    ExecutorService exec = Executors.newFixedThreadPool(1);\r\n    exec.execute(generator);\r\n\r\n    try {\r\n        Thread.sleep(1000);\r\n    } catch (InterruptedException e) {\r\n        throw new RuntimeException(e);\r\n    } finally {\r\n        generator.cancel();\r\n    }\r\n\r\n    //generator.get();\r\n    exec.shutdown();\r\n}\r\n```\r\n\r\nAnd the PrimeProducer class:\r\n```\r\npublic class PrimeProducer extends Thread{\r\n    private final BlockingQueue&lt;BigInteger&gt; queue;\r\n\r\n    PrimeProducer(BlockingQueue&lt;BigInteger&gt; queue){\r\n        this.queue = queue;\r\n    }\r\n\r\n    @Override\r\n    public void run() {\r\n        try {\r\n            BigInteger p = BigInteger.ONE;\r\n            while(!Thread.currentThread().isInterrupted()){\r\n                queue.put(p = p.nextProbablePrime());\r\n            }\r\n        } catch (InterruptedException e) {\r\n\r\n        }\r\n    }\r\n\r\n    public void cancel(){interrupt();}\r\n\r\n    public void get(){\r\n        for(BigInteger i : queue){\r\n            System.out.println(i.toString());\r\n        }\r\n    }\r\n}\r\n```\r\n\r\nThe latest version that still can&#39;t work:\r\n```\r\npublic class PrimeProducer implements Runnable {\r\n    private final BlockingQueue&lt;BigInteger&gt; queue;\r\n\r\n    PrimeProducer(BlockingQueue&lt;BigInteger&gt; queue){\r\n        this.queue = queue;\r\n    }\r\n\r\n    @Override\r\n    public void run() {\r\n        try {\r\n            BigInteger p = BigInteger.ONE;\r\n            while(!Thread.currentThread().isInterrupted()){\r\n                queue.put(p = p.nextProbablePrime());\r\n            }\r\n        } catch (InterruptedException e) {\r\n\r\n        }\r\n    }\r\n\r\n    public void cancel(){Thread.currentThread().interrupt();}\r\n\r\n    public synchronized void get(){\r\n        for(BigInteger i : queue){\r\n            System.out.println(i.toString());\r\n        }\r\n    }\r\n}\r\n\r\n```\r\n","title":"Why does the ThreadpoolExecutor code never stop running?","body":"<p>I run the code in IntelliJ IDEA and it would not stop. I use <code>exec.shutdownNow()</code> instead and it stops successfully. So, I think is the problem of <code>generator</code>, but I can't figure out what problem it is.</p>\n<p>The main method:</p>\n<pre><code>public static void main(String[] args) {\n    PrimeProducer generator = new PrimeProducer(new ArrayBlockingQueue&lt;&gt;(10));\n    ExecutorService exec = Executors.newFixedThreadPool(1);\n    exec.execute(generator);\n\n    try {\n        Thread.sleep(1000);\n    } catch (InterruptedException e) {\n        throw new RuntimeException(e);\n    } finally {\n        generator.cancel();\n    }\n\n    //generator.get();\n    exec.shutdown();\n}\n</code></pre>\n<p>And the PrimeProducer class:</p>\n<pre><code>public class PrimeProducer extends Thread{\n    private final BlockingQueue&lt;BigInteger&gt; queue;\n\n    PrimeProducer(BlockingQueue&lt;BigInteger&gt; queue){\n        this.queue = queue;\n    }\n\n    @Override\n    public void run() {\n        try {\n            BigInteger p = BigInteger.ONE;\n            while(!Thread.currentThread().isInterrupted()){\n                queue.put(p = p.nextProbablePrime());\n            }\n        } catch (InterruptedException e) {\n\n        }\n    }\n\n    public void cancel(){interrupt();}\n\n    public void get(){\n        for(BigInteger i : queue){\n            System.out.println(i.toString());\n        }\n    }\n}\n</code></pre>\n<p>The latest version that still can't work:</p>\n<pre><code>public class PrimeProducer implements Runnable {\n    private final BlockingQueue&lt;BigInteger&gt; queue;\n\n    PrimeProducer(BlockingQueue&lt;BigInteger&gt; queue){\n        this.queue = queue;\n    }\n\n    @Override\n    public void run() {\n        try {\n            BigInteger p = BigInteger.ONE;\n            while(!Thread.currentThread().isInterrupted()){\n                queue.put(p = p.nextProbablePrime());\n            }\n        } catch (InterruptedException e) {\n\n        }\n    }\n\n    public void cancel(){Thread.currentThread().interrupt();}\n\n    public synchronized void get(){\n        for(BigInteger i : queue){\n            System.out.println(i.toString());\n        }\n    }\n}\n\n</code></pre>\n"},{"tags":["java","jpa","orm","spring-data"],"owner":{"account_id":27065960,"reputation":21,"user_id":20617319,"display_name":"Viktoria"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":21,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":0,"score":2,"last_activity_date":1669638289,"creation_date":1669638269,"question_id":74600536,"body_markdown":"With in my domain module i have multiple kind of associations between entities as usual, however I would like to have some operations on associated entities with in one entity once the [state](https://support.intershop.com/kb/index.php/Display/253U81) of this entity changed with in ORM.\r\n\r\nA common practice is too use annotation like `@Preupdate` or `@Prepersist`  etc, but how can i access the associated entities and manage(all kind of operations) their state with in ORM as well.\r\n\r\nAn example to demonstrate the question.\r\n\r\n```\r\npublic class EntityOne {\r\n\r\n    @Id\r\n    @SequenceGenerator(name = &quot;generator&quot;)\r\n    @GeneratedValue(strategy = GenerationType.SEQUENCE, generator = &quot;generator&quot;)\r\n    private Long id;\r\n\r\n    @OneToOne(fetch = FetchType.LAZY)\r\n    @JoinColumn(name = &quot;attribute_to_join&quot;)\r\n    private EntityTwo entity;\r\n\r\n\r\n    ....\r\n\r\n    @PrePersist\r\n    @PreUpdate\r\n    void proxyOperation() {\r\n    ...\r\n    }\r\n}\r\n```\r\n\r\nHow can i manage the state of affected entities, i.e `EntityTwo` with in `proxyOperation` method ? which indeed, is going to trigger when ever an instance of EntityOne is persisted or updated.\r\n\r\n","title":"Associated entities on lifecycle of modified within ORM with JPA annotation","body":"<p>With in my domain module i have multiple kind of associations between entities as usual, however I would like to have some operations on associated entities with in one entity once the <a href=\"https://support.intershop.com/kb/index.php/Display/253U81\" rel=\"nofollow noreferrer\">state</a> of this entity changed with in ORM.</p>\n<p>A common practice is too use annotation like <code>@Preupdate</code> or <code>@Prepersist</code>  etc, but how can i access the associated entities and manage(all kind of operations) their state with in ORM as well.</p>\n<p>An example to demonstrate the question.</p>\n<pre><code>public class EntityOne {\n\n    @Id\n    @SequenceGenerator(name = &quot;generator&quot;)\n    @GeneratedValue(strategy = GenerationType.SEQUENCE, generator = &quot;generator&quot;)\n    private Long id;\n\n    @OneToOne(fetch = FetchType.LAZY)\n    @JoinColumn(name = &quot;attribute_to_join&quot;)\n    private EntityTwo entity;\n\n\n    ....\n\n    @PrePersist\n    @PreUpdate\n    void proxyOperation() {\n    ...\n    }\n}\n</code></pre>\n<p>How can i manage the state of affected entities, i.e <code>EntityTwo</code> with in <code>proxyOperation</code> method ? which indeed, is going to trigger when ever an instance of EntityOne is persisted or updated.</p>\n"},{"tags":["java","velocity"],"answers":[{"tags":[],"owner":{"account_id":2818342,"reputation":299858,"user_id":2422776,"display_name":"Mureinik"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1412660398,"creation_date":1412660398,"answer_id":26229207,"question_id":26229139,"body_markdown":"You&#39;re missing the handling of the grouping separator:\r\n\r\n    $numberTool.format(&quot;###,##,###.00&quot;, $credit);","title":"Formatting numbers in Velocity Templates?","body":"<p>You're missing the handling of the grouping separator:</p>\n\n<pre><code>$numberTool.format(\"###,##,###.00\", $credit);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":4456643,"reputation":8628,"user_id":3626698,"accept_rate":78,"display_name":"afzalex"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1412661058,"creation_date":1412661058,"answer_id":26229351,"question_id":26229139,"body_markdown":"Check this : \r\n\r\n    NumberFormat nf = new DecimalFormat(&quot;##,##,###.00&quot;);\r\n    System.out.println(nf.format(1099));\r\n\r\nOutput :\r\n\r\n    1,948.00\r\n\r\nIs it what you are wanting.","title":"Formatting numbers in Velocity Templates?","body":"<p>Check this : </p>\n\n<pre><code>NumberFormat nf = new DecimalFormat(\"##,##,###.00\");\nSystem.out.println(nf.format(1099));\n</code></pre>\n\n<p>Output :</p>\n\n<pre><code>1,948.00\n</code></pre>\n\n<p>Is it what you are wanting.</p>\n"},{"tags":[],"owner":{"account_id":10202127,"reputation":1,"user_id":7532026,"display_name":"Ch&#237;nh Nguyễn C&#244;ng"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1572362862,"creation_date":1572362862,"answer_id":58610551,"question_id":26229139,"body_markdown":"you can solve this problem like this\r\n\r\n    #set ($result = $number.format(&#39;#,##0.00&#39;, &quot;10000.5&quot;))\r\n    $result\r\nThe result will be 10,000.50","title":"Formatting numbers in Velocity Templates?","body":"<p>you can solve this problem like this</p>\n\n<pre><code>#set ($result = $number.format('#,##0.00', \"10000.5\"))\n$result\n</code></pre>\n\n<p>The result will be 10,000.50</p>\n"}],"owner":{"account_id":3288331,"reputation":1507,"user_id":2767195,"accept_rate":39,"display_name":"Nitesh"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":4178,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"answer_count":3,"score":3,"last_activity_date":1669638234,"creation_date":1412660023,"question_id":26229139,"body_markdown":"I need to display the amount in the following formats:\r\n\r\n1099 -&gt; 1,099.00\\\r\n100 -&gt; 100.00\\\r\n100.251 -&gt; 100.25\\\r\n10999 -&gt; 10,999.00\\\r\n1110999 -&gt; 11,10,999.00\r\n\r\nRight now I am using the following code to display the amount:\r\n\r\n    $numberTool.format(&quot;#0.00&quot;, $credit);\r\n\r\nIn this case, if the amount is 1099, then it displays 1099.00\r\nbut I want to display this amount in this format:- 1,099.00\r\n\r\n","title":"Formatting numbers in Velocity Templates?","body":"<p>I need to display the amount in the following formats:</p>\n<p>1099 -&gt; 1,099.00<br />\n100 -&gt; 100.00<br />\n100.251 -&gt; 100.25<br />\n10999 -&gt; 10,999.00<br />\n1110999 -&gt; 11,10,999.00</p>\n<p>Right now I am using the following code to display the amount:</p>\n<pre><code>$numberTool.format(&quot;#0.00&quot;, $credit);\n</code></pre>\n<p>In this case, if the amount is 1099, then it displays 1099.00\nbut I want to display this amount in this format:- 1,099.00</p>\n"},{"tags":["java","eclipse","loops"],"comments":[{"owner":{"account_id":26317294,"reputation":210,"user_id":19979867,"display_name":"Leonardo Emmanuel de Azevedo"},"score":1,"creation_date":1669634501,"post_id":74599812,"comment_id":131679082,"body_markdown":"Check the while condition","body":"Check the while condition"},{"owner":{"account_id":3159259,"reputation":109666,"user_id":2670892,"display_name":"greg-449"},"score":4,"creation_date":1669635094,"post_id":74599812,"comment_id":131679273,"body_markdown":"The input will be `6` followed by the CR and LF characters so you go round the loop 3 times before it reads from the console again.","body":"The input will be <code>6</code> followed by the CR and LF characters so you go round the loop 3 times before it reads from the console again."},{"owner":{"account_id":960307,"reputation":107861,"user_id":984823,"display_name":"Joop Eggen"},"score":3,"creation_date":1669635147,"post_id":74599812,"comment_id":131679288,"body_markdown":"`System.out.printf(&quot;choice = 0x%x.%n&quot;, (int)choice);` and you will find `&quot;\\r\\n&quot;  too.","body":"<code>System.out.printf(&quot;choice = 0x%x.%n&quot;, (int)choice);</code> and you will find `&quot;\\r\\n&quot;  too."},{"owner":{"account_id":12221317,"reputation":569,"user_id":8920328,"display_name":"Melron"},"score":1,"creation_date":1669635376,"post_id":74599812,"comment_id":131679365,"body_markdown":"Consider to use the Scanner class","body":"Consider to use the Scanner class"}],"answers":[{"tags":[],"owner":{"account_id":26879624,"reputation":386,"user_id":20460294,"display_name":"Anon"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1669636831,"creation_date":1669636831,"answer_id":74600289,"question_id":74599812,"body_markdown":"Your while statement is a bit wrong and you are trying to use &gt; and &lt; with char witch doesn&#39;t work well using the Scanner class you can then use it to get the next int and then you can use it in the while statement.\r\n\r\n    Scanner scan = new Scanner(System.in);\r\n    int choice;\r\n    do {\r\n        System.out.println(&quot;Help on:&quot;);\r\n        System.out.println(&quot; 1. if&quot;);\r\n        System.out.println(&quot; 2. while&quot;);\r\n        System.out.println(&quot; 3. do-while&quot;);\r\n        System.out.println(&quot; 4. for&quot;);\r\n        System.out.println(&quot; 5. switch&quot;);\r\n        choice = scan.nextInt();\r\n    } while (choice &gt;= 1 &amp;&amp; choice &lt;= 5);","title":"Why a loop is running three time in eclipse when the condition is false?","body":"<p>Your while statement is a bit wrong and you are trying to use &gt; and &lt; with char witch doesn't work well using the Scanner class you can then use it to get the next int and then you can use it in the while statement.</p>\n<pre><code>Scanner scan = new Scanner(System.in);\nint choice;\ndo {\n    System.out.println(&quot;Help on:&quot;);\n    System.out.println(&quot; 1. if&quot;);\n    System.out.println(&quot; 2. while&quot;);\n    System.out.println(&quot; 3. do-while&quot;);\n    System.out.println(&quot; 4. for&quot;);\n    System.out.println(&quot; 5. switch&quot;);\n    choice = scan.nextInt();\n} while (choice &gt;= 1 &amp;&amp; choice &lt;= 5);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":401843,"reputation":89788,"user_id":768644,"display_name":"rzwitserloot"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1669638203,"creation_date":1669638203,"answer_id":74600522,"question_id":74599812,"body_markdown":"The problem is that you press &#39;enter&#39; after entering &#39;6&#39; which is good, except, this means that there is an &#39;enter character&#39; (which is a &#39;character&#39; just as much as &#39;6&#39; is) in between your first input and your second, and the &#39;char value&#39; is below &#39;1&#39;. On windows, an enter is in fact 2 characters (CR and LF; 13 and 10 respectively, which are far below `&#39;1&#39;`), hence, 3 loops.\r\n\r\nMost likely you want a scanner configured to treat newline symbols as separators:\r\n\r\n```\r\nScanner s = new Scanner(System.in);\r\ns.useDelimiter(&quot;\\\\R&quot;); // Any newline symbol\r\nint c;\r\ndo {\r\n  // show menu here\r\n  c = s.nextInt();\r\n} while (c &gt;= 1 &amp;&amp; c &lt;= 5);\r\n```\r\n\r\nAlternatively, you can ignore newline symbols. These are &#39;\\r&#39; and &#39;\\n&#39; respectively. Replace `c = System.in.read();` with:\r\n\r\n```\r\nreadNextChar();\r\n\r\n.. below your main method:\r\n\r\npublic static char readNextChar() {\r\n  while (true) {\r\n    char c = System.in.read();\r\n    if (c != &#39;\\r&#39; &amp;&amp; c != &#39;\\n&#39;) return c;\r\n  }\r\n}\r\n```\r\n\r\nWhich will read the next char ignoring any newline symbols. (on windows, newline is &#39;\\r\\n&#39; - 2 characters in a row. On any other platform, it&#39;s just one &#39;\\n&#39;).","title":"Why a loop is running three time in eclipse when the condition is false?","body":"<p>The problem is that you press 'enter' after entering '6' which is good, except, this means that there is an 'enter character' (which is a 'character' just as much as '6' is) in between your first input and your second, and the 'char value' is below '1'. On windows, an enter is in fact 2 characters (CR and LF; 13 and 10 respectively, which are far below <code>'1'</code>), hence, 3 loops.</p>\n<p>Most likely you want a scanner configured to treat newline symbols as separators:</p>\n<pre><code>Scanner s = new Scanner(System.in);\ns.useDelimiter(&quot;\\\\R&quot;); // Any newline symbol\nint c;\ndo {\n  // show menu here\n  c = s.nextInt();\n} while (c &gt;= 1 &amp;&amp; c &lt;= 5);\n</code></pre>\n<p>Alternatively, you can ignore newline symbols. These are '\\r' and '\\n' respectively. Replace <code>c = System.in.read();</code> with:</p>\n<pre><code>readNextChar();\n\n.. below your main method:\n\npublic static char readNextChar() {\n  while (true) {\n    char c = System.in.read();\n    if (c != '\\r' &amp;&amp; c != '\\n') return c;\n  }\n}\n</code></pre>\n<p>Which will read the next char ignoring any newline symbols. (on windows, newline is '\\r\\n' - 2 characters in a row. On any other platform, it's just one '\\n').</p>\n"}],"owner":{"account_id":27072346,"reputation":1,"user_id":20622822,"display_name":"Moinuddin"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":44,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":2,"score":-1,"last_activity_date":1669638203,"creation_date":1669634418,"question_id":74599812,"body_markdown":"```\r\npublic class Menu {\r\n\r\n\tpublic static void main(String[] args)\r\n\tthrows java.io.IOException {\r\n\t\tchar choice;\r\n\t\tdo {\r\n\t\t\tSystem.out.println(&quot;Help on:&quot;);\r\n\t\t\tSystem.out.println(&quot; 1. if&quot;);\r\n\t\t\tSystem.out.println(&quot; 2. while&quot;);\r\n\t\t\tSystem.out.println(&quot; 3. do-while&quot;);\r\n\t\t\tSystem.out.println(&quot; 4. for&quot;);\r\n\t\t\tSystem.out.println(&quot; 5. switch&quot;);\r\n\t\t\tchoice = (char) System.in.read();\r\n\t\t} while(choice &lt; &#39;1&#39; || choice &gt; &#39;5&#39;);\r\n\t}\r\n\r\n}\r\n\r\n```\r\n\r\n\r\nwhen i input 0 or greater than 5 it cause the loop to execute three time. like this:\r\n\r\n    Help on:\r\n     1. if\r\n     2. while\r\n     3. do-while\r\n     4. for\r\n     5. switch\r\n    6\r\n    Help on:\r\n     1. if\r\n     2. while\r\n     3. do-while\r\n     4. for\r\n     5. switch\r\n    Help on:\r\n     1. if\r\n     2. while\r\n     3. do-while\r\n     4. for\r\n     5. switch\r\n    Help on:\r\n     1. if\r\n     2. while\r\n     3. do-while\r\n     4. for\r\n     5. switch\r\n\r\nHow can I fix this problem?","title":"Why a loop is running three time in eclipse when the condition is false?","body":"<pre><code>public class Menu {\n\n    public static void main(String[] args)\n    throws java.io.IOException {\n        char choice;\n        do {\n            System.out.println(&quot;Help on:&quot;);\n            System.out.println(&quot; 1. if&quot;);\n            System.out.println(&quot; 2. while&quot;);\n            System.out.println(&quot; 3. do-while&quot;);\n            System.out.println(&quot; 4. for&quot;);\n            System.out.println(&quot; 5. switch&quot;);\n            choice = (char) System.in.read();\n        } while(choice &lt; '1' || choice &gt; '5');\n    }\n\n}\n\n</code></pre>\n<p>when i input 0 or greater than 5 it cause the loop to execute three time. like this:</p>\n<pre><code>Help on:\n 1. if\n 2. while\n 3. do-while\n 4. for\n 5. switch\n6\nHelp on:\n 1. if\n 2. while\n 3. do-while\n 4. for\n 5. switch\nHelp on:\n 1. if\n 2. while\n 3. do-while\n 4. for\n 5. switch\nHelp on:\n 1. if\n 2. while\n 3. do-while\n 4. for\n 5. switch\n</code></pre>\n<p>How can I fix this problem?</p>\n"},{"tags":["java","json","spring","jackson","uuid"],"answers":[{"tags":[],"owner":{"account_id":1956083,"reputation":4432,"user_id":1759063,"accept_rate":53,"display_name":"Eljah"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1669638087,"creation_date":1669638087,"answer_id":74600493,"question_id":74600492,"body_markdown":"The reason was in UUID generator, it was generating\r\n\r\n`a98c543` as the first block having 7 digits instead of 8, like they were missing leading zeroes","title":"not a valid textual representation, problem: UUID has to be represented by the standard","body":"<p>The reason was in UUID generator, it was generating</p>\n<p><code>a98c543</code> as the first block having 7 digits instead of 8, like they were missing leading zeroes</p>\n"}],"owner":{"account_id":1956083,"reputation":4432,"user_id":1759063,"accept_rate":53,"display_name":"Eljah"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":302,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":74600493,"answer_count":1,"score":0,"last_activity_date":1669638087,"creation_date":1669638087,"question_id":74600492,"body_markdown":"What is the reason for not valid UUID not being processed with the exception below?\r\n\r\n    WARN  o.s.w.s.m.s.DefaultHandlerExceptionResolver - Resolved [org.springframework.http.converter.HttpMessageNotReadableException: JSON parse error: Can not construct instance of java.util.UUID from String value &#39;a98c543-22de-4330-2995-ff81889aa412&#39;: not a valid textual representation, problem: UUID has to be represented by the standard 36-char representation; nested exception is com.fasterxml.jackson.databind.exc.InvalidFormatException: Can not construct instance of java.util.UUID from String value &#39;a98c543-22de-4330-2995-ff81889aa412&#39;: not a valid textual representation, problem: UUID has to be represented by the standard","title":"not a valid textual representation, problem: UUID has to be represented by the standard","body":"<p>What is the reason for not valid UUID not being processed with the exception below?</p>\n<pre><code>WARN  o.s.w.s.m.s.DefaultHandlerExceptionResolver - Resolved [org.springframework.http.converter.HttpMessageNotReadableException: JSON parse error: Can not construct instance of java.util.UUID from String value 'a98c543-22de-4330-2995-ff81889aa412': not a valid textual representation, problem: UUID has to be represented by the standard 36-char representation; nested exception is com.fasterxml.jackson.databind.exc.InvalidFormatException: Can not construct instance of java.util.UUID from String value 'a98c543-22de-4330-2995-ff81889aa412': not a valid textual representation, problem: UUID has to be represented by the standard\n</code></pre>\n"},{"tags":["java","android","android-edittext","adjustpan"],"comments":[{"owner":{"account_id":893926,"reputation":1585,"user_id":931639,"accept_rate":77,"display_name":"Boe-Dev"},"score":2,"creation_date":1572090501,"post_id":58570342,"comment_id":103457991,"body_markdown":"Do you have the hole layout in a ScrollView? could you maybe post the Layout?","body":"Do you have the hole layout in a ScrollView? could you maybe post the Layout?"},{"owner":{"account_id":12410013,"reputation":693,"user_id":9042709,"display_name":"Suri"},"score":1,"creation_date":1572090518,"post_id":58570342,"comment_id":103457995,"body_markdown":"Can i see your xml file?","body":"Can i see your xml file?"},{"owner":{"account_id":12410013,"reputation":693,"user_id":9042709,"display_name":"Suri"},"score":0,"creation_date":1572090978,"post_id":58570342,"comment_id":103458082,"body_markdown":"Try to set paddings to your `EditText`, and add `layout_height = &quot;wrap_content&quot;`","body":"Try to set paddings to your <code>EditText</code>, and add <code>layout_height = &quot;wrap_content&quot;</code>"},{"owner":{"account_id":5574637,"reputation":1759,"user_id":4418481,"accept_rate":55,"display_name":"Ben"},"score":1,"creation_date":1572091084,"post_id":58570342,"comment_id":103458103,"body_markdown":"padding works but it make the text inside the EditText shifted towards the bottom which looks unsymmetrical","body":"padding works but it make the text inside the EditText shifted towards the bottom which looks unsymmetrical"},{"owner":{"account_id":12483943,"reputation":879,"user_id":9087754,"display_name":"Abdul"},"score":0,"creation_date":1581594660,"post_id":58570342,"comment_id":106492475,"body_markdown":"what about wrapping the whole layout inside a scroll view","body":"what about wrapping the whole layout inside a scroll view"}],"answers":[{"tags":[],"owner":{"account_id":11910788,"reputation":554,"user_id":9460261,"display_name":"Sagar"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1581492016,"creation_date":1581492016,"answer_id":60183064,"question_id":58570342,"body_markdown":"     &lt;androidx.constraintlayout.widget.ConstraintLayout\r\n            android:id=&quot;@+id/constraint2&quot;\r\n\r\n**Add** padding bottom in ConstraintLayout like android:paddingBottom=&quot;8dp&quot;\r\n\r\n\r\n**Remove** android:layout_marginBottom=&quot;8dp&quot; from **Edittext** and **Imageview**\r\ni.e. android:id=&quot;@+id/et_Message&quot; and  android:id=&quot;@+id/ib_Send&quot;\r\n\r\n\r\n**Then rerun again**\r\n\r\n","title":"Adding Margin between EditText and keyboard","body":"<pre><code> &lt;androidx.constraintlayout.widget.ConstraintLayout\n        android:id=\"@+id/constraint2\"\n</code></pre>\n\n<p><strong>Add</strong> padding bottom in ConstraintLayout like android:paddingBottom=\"8dp\"</p>\n\n<p><strong>Remove</strong> android:layout_marginBottom=\"8dp\" from <strong>Edittext</strong> and <strong>Imageview</strong>\ni.e. android:id=\"@+id/et_Message\" and  android:id=\"@+id/ib_Send\"</p>\n\n<p><strong>Then rerun again</strong></p>\n"},{"tags":[],"owner":{"account_id":438563,"reputation":16902,"user_id":1511776,"accept_rate":92,"display_name":"hardartcore"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1581502405,"creation_date":1581502405,"answer_id":60185890,"question_id":58570342,"body_markdown":"First of all I think your layout should be improved, there is no need to use two `ConstraintLayout` in a single xml file and the second one is a child of the first / main one. The idea behind this view is to flatten your whole layout, so as first step I think you should get rid off the second `ConstraintLayout`.\r\n\r\nI&#39;ve create a simple layout which looks a little like yours in order to test if my implementation will work, so here is the layout file:\r\n\r\n\r\n&lt;layout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\r\n    xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;\r\n    xmlns:tools=&quot;http://schemas.android.com/tools&quot;&gt;\r\n\r\n    &lt;androidx.constraintlayout.widget.ConstraintLayout\r\n        android:layout_width=&quot;match_parent&quot;\r\n        android:layout_height=&quot;match_parent&quot;\r\n        tools:context=&quot;.MainActivity&quot;&gt;\r\n\r\n        &lt;View\r\n            android:layout_width=&quot;0dip&quot;\r\n            android:layout_height=&quot;0dip&quot;\r\n            app:layout_constraintBottom_toTopOf=&quot;@+id/edit_text&quot;\r\n            app:layout_constraintEnd_toEndOf=&quot;parent&quot;\r\n            app:layout_constraintStart_toStartOf=&quot;parent&quot;\r\n            app:layout_constraintTop_toTopOf=&quot;parent&quot; /&gt;\r\n\r\n        &lt;EditText\r\n            android:id=&quot;@+id/edit_text&quot;\r\n            android:layout_width=&quot;0dip&quot;\r\n            android:layout_height=&quot;wrap_content&quot;\r\n            android:layout_marginStart=&quot;12dp&quot;\r\n            android:layout_marginTop=&quot;8dp&quot;\r\n            android:layout_marginBottom=&quot;8dp&quot;\r\n            android:background=&quot;@drawable/rounded&quot;\r\n            android:gravity=&quot;center_vertical&quot;\r\n            android:hint=&quot;Text&quot;\r\n            android:importantForAutofill=&quot;no&quot;\r\n            android:inputType=&quot;textMultiLine|textPersonName&quot;\r\n            android:paddingStart=&quot;32dip&quot;\r\n            android:paddingEnd=&quot;32dip&quot;\r\n            android:textSize=&quot;16sp&quot;\r\n            app:layout_constraintBottom_toTopOf=&quot;@id/bottom_navigation_view&quot;\r\n            app:layout_constraintEnd_toStartOf=&quot;@+id/btn_send&quot;\r\n            app:layout_constraintStart_toStartOf=&quot;parent&quot;\r\n            tools:ignore=&quot;HardcodedText&quot; /&gt;\r\n\r\n        &lt;Button\r\n            android:id=&quot;@+id/btn_send&quot;\r\n            android:layout_width=&quot;0dip&quot;\r\n            android:layout_height=&quot;wrap_content&quot;\r\n            android:layout_marginStart=&quot;12dp&quot;\r\n            android:layout_marginTop=&quot;8dp&quot;\r\n            android:layout_marginBottom=&quot;8dp&quot;\r\n            android:text=&quot;SEND&quot;\r\n            app:layout_constraintBottom_toTopOf=&quot;@id/bottom_navigation_view&quot;\r\n            app:layout_constraintEnd_toEndOf=&quot;parent&quot;\r\n            tools:ignore=&quot;HardcodedText&quot; /&gt;\r\n\r\n        &lt;com.google.android.material.bottomnavigation.BottomNavigationView\r\n            android:id=&quot;@+id/bottom_navigation_view&quot;\r\n            android:layout_width=&quot;0dp&quot;\r\n            android:layout_height=&quot;wrap_content&quot;\r\n            android:background=&quot;#c5c6c7&quot;\r\n            app:layout_constraintBottom_toBottomOf=&quot;parent&quot;\r\n            app:layout_constraintEnd_toEndOf=&quot;parent&quot;\r\n            app:layout_constraintStart_toStartOf=&quot;parent&quot; /&gt;\r\n\r\n\r\n    &lt;/androidx.constraintlayout.widget.ConstraintLayout&gt;\r\n&lt;/layout&gt;\r\n\r\nThe structure looks similar to yours, at least the part with the `BottomNavigatioView`, `EditText` and the `Button`. Adding `android:windowSoftInputMode=&quot;adjustPan&quot;` to the `Activity` which holds this layout will give this result (tested on a few devices) :\r\n\r\n\r\n[![screenshot 01][1]][1]\r\n[![screenshot 02][2]][2]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/bQMPr.png\r\n  [2]: https://i.stack.imgur.com/FMaDv.png","title":"Adding Margin between EditText and keyboard","body":"<p>First of all I think your layout should be improved, there is no need to use two <code>ConstraintLayout</code> in a single xml file and the second one is a child of the first / main one. The idea behind this view is to flatten your whole layout, so as first step I think you should get rid off the second <code>ConstraintLayout</code>.</p>\n\n<p>I've create a simple layout which looks a little like yours in order to test if my implementation will work, so here is the layout file:</p>\n\n<p></p>\n\n<pre><code>&lt;androidx.constraintlayout.widget.ConstraintLayout\n    android:layout_width=\"match_parent\"\n    android:layout_height=\"match_parent\"\n    tools:context=\".MainActivity\"&gt;\n\n    &lt;View\n        android:layout_width=\"0dip\"\n        android:layout_height=\"0dip\"\n        app:layout_constraintBottom_toTopOf=\"@+id/edit_text\"\n        app:layout_constraintEnd_toEndOf=\"parent\"\n        app:layout_constraintStart_toStartOf=\"parent\"\n        app:layout_constraintTop_toTopOf=\"parent\" /&gt;\n\n    &lt;EditText\n        android:id=\"@+id/edit_text\"\n        android:layout_width=\"0dip\"\n        android:layout_height=\"wrap_content\"\n        android:layout_marginStart=\"12dp\"\n        android:layout_marginTop=\"8dp\"\n        android:layout_marginBottom=\"8dp\"\n        android:background=\"@drawable/rounded\"\n        android:gravity=\"center_vertical\"\n        android:hint=\"Text\"\n        android:importantForAutofill=\"no\"\n        android:inputType=\"textMultiLine|textPersonName\"\n        android:paddingStart=\"32dip\"\n        android:paddingEnd=\"32dip\"\n        android:textSize=\"16sp\"\n        app:layout_constraintBottom_toTopOf=\"@id/bottom_navigation_view\"\n        app:layout_constraintEnd_toStartOf=\"@+id/btn_send\"\n        app:layout_constraintStart_toStartOf=\"parent\"\n        tools:ignore=\"HardcodedText\" /&gt;\n\n    &lt;Button\n        android:id=\"@+id/btn_send\"\n        android:layout_width=\"0dip\"\n        android:layout_height=\"wrap_content\"\n        android:layout_marginStart=\"12dp\"\n        android:layout_marginTop=\"8dp\"\n        android:layout_marginBottom=\"8dp\"\n        android:text=\"SEND\"\n        app:layout_constraintBottom_toTopOf=\"@id/bottom_navigation_view\"\n        app:layout_constraintEnd_toEndOf=\"parent\"\n        tools:ignore=\"HardcodedText\" /&gt;\n\n    &lt;com.google.android.material.bottomnavigation.BottomNavigationView\n        android:id=\"@+id/bottom_navigation_view\"\n        android:layout_width=\"0dp\"\n        android:layout_height=\"wrap_content\"\n        android:background=\"#c5c6c7\"\n        app:layout_constraintBottom_toBottomOf=\"parent\"\n        app:layout_constraintEnd_toEndOf=\"parent\"\n        app:layout_constraintStart_toStartOf=\"parent\" /&gt;\n\n\n&lt;/androidx.constraintlayout.widget.ConstraintLayout&gt;\n</code></pre>\n\n<p></p>\n\n<p>The structure looks similar to yours, at least the part with the <code>BottomNavigatioView</code>, <code>EditText</code> and the <code>Button</code>. Adding <code>android:windowSoftInputMode=\"adjustPan\"</code> to the <code>Activity</code> which holds this layout will give this result (tested on a few devices) :</p>\n\n<p><a href=\"https://i.stack.imgur.com/bQMPr.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/bQMPr.png\" alt=\"screenshot 01\"></a>\n<a href=\"https://i.stack.imgur.com/FMaDv.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/FMaDv.png\" alt=\"screenshot 02\"></a></p>\n"},{"tags":[],"owner":{"account_id":15010990,"reputation":1358,"user_id":10835478,"display_name":"niceumang"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1581586123,"creation_date":1581514633,"answer_id":60189637,"question_id":58570342,"body_markdown":"First add **ScrollView** into your XML and add below lines into \r\nAndroidManiFest.xml in your **activity** tag where you use this search **EditText**.\r\n\r\n    android:windowSoftInputMode=&quot;stateAlwaysHidden|adjustResize|adjustPan|adjustResize","title":"Adding Margin between EditText and keyboard","body":"<p>First add <strong>ScrollView</strong> into your XML and add below lines into \nAndroidManiFest.xml in your <strong>activity</strong> tag where you use this search <strong>EditText</strong>.</p>\n\n<pre><code>android:windowSoftInputMode=\"stateAlwaysHidden|adjustResize|adjustPan|adjustResize\n</code></pre>\n"},{"tags":[],"owner":{"account_id":8183818,"reputation":4410,"user_id":6160172,"display_name":"Jamil Hasnine Tamim"},"down_vote_count":1,"up_vote_count":6,"is_accepted":false,"score":5,"last_activity_date":1581576003,"creation_date":1581576003,"answer_id":60201838,"question_id":58570342,"body_markdown":"Try this, add this code in your `AndroidManifest.xml` activity\r\n\r\n\r\n    android:windowSoftInputMode=&quot;adjustPan&quot; \r\n\r\nAdd the following into your root Layout at the `xml` file\r\n\r\n    android:fitsSystemWindows=&quot;true&quot;","title":"Adding Margin between EditText and keyboard","body":"<p>Try this, add this code in your <code>AndroidManifest.xml</code> activity</p>\n\n<pre><code>android:windowSoftInputMode=\"adjustPan\" \n</code></pre>\n\n<p>Add the following into your root Layout at the <code>xml</code> file</p>\n\n<pre><code>android:fitsSystemWindows=\"true\"\n</code></pre>\n"},{"tags":[],"owner":{"account_id":16898195,"reputation":89,"user_id":12220260,"display_name":"ankitsinh corepix"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1581582929,"creation_date":1581581630,"answer_id":60203207,"question_id":58570342,"body_markdown":"In your `Layout` file add the following line in the `Constraint` tag.\r\n\r\n    android:isScrollContainer=&quot;true&quot;\r\n\r\n","title":"Adding Margin between EditText and keyboard","body":"<p>In your <code>Layout</code> file add the following line in the <code>Constraint</code> tag.</p>\n\n<pre><code>android:isScrollContainer=\"true\"\n</code></pre>\n"},{"tags":[],"owner":{"account_id":14613657,"reputation":435,"user_id":10554417,"display_name":"Salar Arabpour"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1581609750,"creation_date":1581609750,"answer_id":60212008,"question_id":58570342,"body_markdown":"i had exact same issue and solved this problem forever with a &#39;easy implementation&#39; and &#39;tested&#39; method..the idea is that when the edit text gains focus scroll view auto scrolls to bottom.let me show you how...\r\n\r\nfirst you should use nested scroll view as parent of main layout\r\n\r\nsecond add a library to find out when keyboard opens\r\n\r\n    implementation &#39;net.yslibrary.keyboardvisibilityevent:keyboardvisibilityevent:2.0.1&#39;\r\n\r\nthird add this class to your project\r\n\r\n    public class KeyboardUtil {\r\n    private View decorView;\r\n    private View contentView;\r\n    //a small helper to allow showing the editText focus\r\n    ViewTreeObserver.OnGlobalLayoutListener onGlobalLayoutListener = new ViewTreeObserver.OnGlobalLayoutListener() {\r\n        @Override\r\n        public void onGlobalLayout() {\r\n            Rect r = new Rect();\r\n            //r will be populated with the coordinates of your view that area still visible.\r\n            decorView.getWindowVisibleDisplayFrame(r);\r\n\r\n            //get screen height and calculate the difference with the useable area from the r\r\n            int height = decorView.getContext().getResources().getDisplayMetrics().heightPixels;\r\n            int diff = height - r.bottom;\r\n\r\n            //if it could be a keyboard add the padding to the view\r\n            if (diff != 0) {\r\n                // if the use-able screen height differs from the total screen height we assume that it shows a keyboard now\r\n                //check if the padding is 0 (if yes set the padding for the keyboard)\r\n                if (contentView.getPaddingBottom() != diff) {\r\n                    //set the padding of the contentView for the keyboard\r\n                    contentView.setPadding(0, 0, 0, diff);\r\n                }\r\n            } else {\r\n                //check if the padding is != 0 (if yes reset the padding)\r\n                if (contentView.getPaddingBottom() != 0) {\r\n                    //reset the padding of the contentView\r\n                    contentView.setPadding(0, 0, 0, 0);\r\n                }\r\n            }\r\n        }\r\n    };\r\n\r\n    public KeyboardUtil(Activity act, View contentView) {\r\n        this.decorView = act.getWindow().getDecorView();\r\n        this.contentView = contentView;\r\n\r\n        //only required on newer android versions. it was working on API level 19\r\n        if (Build.VERSION.SDK_INT &gt;= 19) {\r\n            decorView.getViewTreeObserver().addOnGlobalLayoutListener(onGlobalLayoutListener);\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Helper to hide the keyboard\r\n     *\r\n     * @param act\r\n     */\r\n    public static void hideKeyboard(Activity act) {\r\n        if (act != null &amp;&amp; act.getCurrentFocus() != null) {\r\n            InputMethodManager inputMethodManager = (InputMethodManager) act.getSystemService(Activity.INPUT_METHOD_SERVICE);\r\n            inputMethodManager.hideSoftInputFromWindow(act.getCurrentFocus().getWindowToken(), 0);\r\n        }\r\n    }\r\n\r\n    public void enable() {\r\n        if (Build.VERSION.SDK_INT &gt;= 19) {\r\n            decorView.getViewTreeObserver().addOnGlobalLayoutListener(onGlobalLayoutListener);\r\n        }\r\n    }\r\n\r\n    public void disable() {\r\n        if (Build.VERSION.SDK_INT &gt;= 19) {\r\n            decorView.getViewTreeObserver().removeOnGlobalLayoutListener(onGlobalLayoutListener);\r\n        }\r\n    }\r\n\r\n    public static void adjustResize(Activity activity, final NestedScrollView scrollView) {\r\n        KeyboardVisibilityEvent.setEventListener(\r\n                activity,\r\n                new KeyboardVisibilityEventListener() {\r\n                    @Override\r\n                    public void onVisibilityChanged(boolean isOpen) {\r\n                        // some code depending on keyboard visiblity status\r\n                        if (isOpen) {\r\n\r\n                            //Scroll view scrolls bottom without changing focus\r\n                            View lastChild = scrollView.getChildAt(scrollView.getChildCount() - 1);\r\n                            int bottom = lastChild.getBottom() + scrollView.getPaddingBottom();\r\n                            int sy = scrollView.getScrollY();\r\n                            int sh = scrollView.getHeight();\r\n                            int delta = bottom - (sy + sh);\r\n\r\n                            scrollView.smoothScrollBy(0, delta);\r\n\r\n\r\n                        } else {\r\n                            //Toast.makeText(context, &quot;keyboard is close&quot;, Toast.LENGTH_SHORT).show();\r\n\r\n                        }\r\n                    }\r\n                });} }\r\n   \r\n\r\n\r\nthen use it in your activity like \r\n\r\n    new KeyboardUtil(activity,nestedScrollView);\r\n    KeyboardUtil.adjustResize(activity,nestedScrollView);\r\n\r\nand if you are in fragment you can pass below code as activity:\r\n\r\n    (AppCompatActivity)context\r\n\r\n\r\n","title":"Adding Margin between EditText and keyboard","body":"<p>i had exact same issue and solved this problem forever with a 'easy implementation' and 'tested' method..the idea is that when the edit text gains focus scroll view auto scrolls to bottom.let me show you how...</p>\n\n<p>first you should use nested scroll view as parent of main layout</p>\n\n<p>second add a library to find out when keyboard opens</p>\n\n<pre><code>implementation 'net.yslibrary.keyboardvisibilityevent:keyboardvisibilityevent:2.0.1'\n</code></pre>\n\n<p>third add this class to your project</p>\n\n<pre><code>public class KeyboardUtil {\nprivate View decorView;\nprivate View contentView;\n//a small helper to allow showing the editText focus\nViewTreeObserver.OnGlobalLayoutListener onGlobalLayoutListener = new ViewTreeObserver.OnGlobalLayoutListener() {\n    @Override\n    public void onGlobalLayout() {\n        Rect r = new Rect();\n        //r will be populated with the coordinates of your view that area still visible.\n        decorView.getWindowVisibleDisplayFrame(r);\n\n        //get screen height and calculate the difference with the useable area from the r\n        int height = decorView.getContext().getResources().getDisplayMetrics().heightPixels;\n        int diff = height - r.bottom;\n\n        //if it could be a keyboard add the padding to the view\n        if (diff != 0) {\n            // if the use-able screen height differs from the total screen height we assume that it shows a keyboard now\n            //check if the padding is 0 (if yes set the padding for the keyboard)\n            if (contentView.getPaddingBottom() != diff) {\n                //set the padding of the contentView for the keyboard\n                contentView.setPadding(0, 0, 0, diff);\n            }\n        } else {\n            //check if the padding is != 0 (if yes reset the padding)\n            if (contentView.getPaddingBottom() != 0) {\n                //reset the padding of the contentView\n                contentView.setPadding(0, 0, 0, 0);\n            }\n        }\n    }\n};\n\npublic KeyboardUtil(Activity act, View contentView) {\n    this.decorView = act.getWindow().getDecorView();\n    this.contentView = contentView;\n\n    //only required on newer android versions. it was working on API level 19\n    if (Build.VERSION.SDK_INT &gt;= 19) {\n        decorView.getViewTreeObserver().addOnGlobalLayoutListener(onGlobalLayoutListener);\n    }\n}\n\n/**\n * Helper to hide the keyboard\n *\n * @param act\n */\npublic static void hideKeyboard(Activity act) {\n    if (act != null &amp;&amp; act.getCurrentFocus() != null) {\n        InputMethodManager inputMethodManager = (InputMethodManager) act.getSystemService(Activity.INPUT_METHOD_SERVICE);\n        inputMethodManager.hideSoftInputFromWindow(act.getCurrentFocus().getWindowToken(), 0);\n    }\n}\n\npublic void enable() {\n    if (Build.VERSION.SDK_INT &gt;= 19) {\n        decorView.getViewTreeObserver().addOnGlobalLayoutListener(onGlobalLayoutListener);\n    }\n}\n\npublic void disable() {\n    if (Build.VERSION.SDK_INT &gt;= 19) {\n        decorView.getViewTreeObserver().removeOnGlobalLayoutListener(onGlobalLayoutListener);\n    }\n}\n\npublic static void adjustResize(Activity activity, final NestedScrollView scrollView) {\n    KeyboardVisibilityEvent.setEventListener(\n            activity,\n            new KeyboardVisibilityEventListener() {\n                @Override\n                public void onVisibilityChanged(boolean isOpen) {\n                    // some code depending on keyboard visiblity status\n                    if (isOpen) {\n\n                        //Scroll view scrolls bottom without changing focus\n                        View lastChild = scrollView.getChildAt(scrollView.getChildCount() - 1);\n                        int bottom = lastChild.getBottom() + scrollView.getPaddingBottom();\n                        int sy = scrollView.getScrollY();\n                        int sh = scrollView.getHeight();\n                        int delta = bottom - (sy + sh);\n\n                        scrollView.smoothScrollBy(0, delta);\n\n\n                    } else {\n                        //Toast.makeText(context, \"keyboard is close\", Toast.LENGTH_SHORT).show();\n\n                    }\n                }\n            });} }\n</code></pre>\n\n<p>then use it in your activity like </p>\n\n<pre><code>new KeyboardUtil(activity,nestedScrollView);\nKeyboardUtil.adjustResize(activity,nestedScrollView);\n</code></pre>\n\n<p>and if you are in fragment you can pass below code as activity:</p>\n\n<pre><code>(AppCompatActivity)context\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3288977,"reputation":9634,"user_id":2767703,"accept_rate":94,"display_name":"Kevin van Mierlo"},"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1582104581,"creation_date":1582104581,"answer_id":60296967,"question_id":58570342,"body_markdown":"I had a lot of problems with the keyboard myself, but I prefer using `android:windowSoftInputMode=&quot;adjustResize&quot;` so you can handle the changes yourself. You should add a windowInsetsListener to your root view and if you don&#39;t have a transparent navigation bar the `systemWindowInsetBottom` should only be the keyboard. So you can just add padding to the container you&#39;re interested in. This is an example I use:\r\n\r\n```\r\nrootContainer.setOnApplyWindowInsetsListener { view, windowInsets -&gt;\r\n    var containerPadding = 0\r\n    if (windowInsets.systemWindowInsetBottom &gt; 0) {\r\n        val bottomBarHeight = bottomBar.bottom - bottomBar.top\r\n        containerPadding = windowInsets.systemWindowInsetBottom - bottomBarHeight\r\n    }\r\n\r\n    if (containerPadding &lt; 0) {\r\n        containerPadding = 0\r\n    }\r\n\r\n    contentView.bottomPadding = containerPadding\r\n\r\n    return@setOnApplyWindowInsetsListener windowInsets.replaceSystemWindowInsets(windowInsets.systemWindowInsetLeft, windowInsets.systemWindowInsetTop, windowInsets.systemWindowInsetRight, 0)\r\n}\r\n```\r\n\r\nThis way you can move the container above the bottomBar up (which has your `EditText` in it).\r\n\r\nFor me this was the best option I&#39;ve found so far. Most options rely on GlobalLayoutListeners and see how much it changes, but this is far more reliable. ","title":"Adding Margin between EditText and keyboard","body":"<p>I had a lot of problems with the keyboard myself, but I prefer using <code>android:windowSoftInputMode=\"adjustResize\"</code> so you can handle the changes yourself. You should add a windowInsetsListener to your root view and if you don't have a transparent navigation bar the <code>systemWindowInsetBottom</code> should only be the keyboard. So you can just add padding to the container you're interested in. This is an example I use:</p>\n\n<pre><code>rootContainer.setOnApplyWindowInsetsListener { view, windowInsets -&gt;\n    var containerPadding = 0\n    if (windowInsets.systemWindowInsetBottom &gt; 0) {\n        val bottomBarHeight = bottomBar.bottom - bottomBar.top\n        containerPadding = windowInsets.systemWindowInsetBottom - bottomBarHeight\n    }\n\n    if (containerPadding &lt; 0) {\n        containerPadding = 0\n    }\n\n    contentView.bottomPadding = containerPadding\n\n    return@setOnApplyWindowInsetsListener windowInsets.replaceSystemWindowInsets(windowInsets.systemWindowInsetLeft, windowInsets.systemWindowInsetTop, windowInsets.systemWindowInsetRight, 0)\n}\n</code></pre>\n\n<p>This way you can move the container above the bottomBar up (which has your <code>EditText</code> in it).</p>\n\n<p>For me this was the best option I've found so far. Most options rely on GlobalLayoutListeners and see how much it changes, but this is far more reliable. </p>\n"},{"tags":[],"owner":{"account_id":9945338,"reputation":2500,"user_id":7360275,"display_name":"Osama Remlawi"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1614868668,"creation_date":1614868668,"answer_id":66477225,"question_id":58570342,"body_markdown":"There is one trick to do it:\r\n\r\n1- put the EditText inside a CardView \r\n\r\n2- style the CardView to looks like a TextEdit\r\n\r\n3- add these properties to the  `EditText`\r\n\r\n    android:paddingBottom=&quot;15dp&quot;\r\n    android:paddingTop=&quot;15dp&quot;\r\n    android:background=&quot;@android:color/transparent&quot;","title":"Adding Margin between EditText and keyboard","body":"<p>There is one trick to do it:</p>\n<p>1- put the EditText inside a CardView</p>\n<p>2- style the CardView to looks like a TextEdit</p>\n<p>3- add these properties to the  <code>EditText</code></p>\n<pre><code>android:paddingBottom=&quot;15dp&quot;\nandroid:paddingTop=&quot;15dp&quot;\nandroid:background=&quot;@android:color/transparent&quot;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2042440,"reputation":698,"user_id":1823280,"accept_rate":75,"display_name":"nibbana"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1640604661,"creation_date":1640604661,"answer_id":70494910,"question_id":58570342,"body_markdown":"Replace the `EditText` view with a `TextInputEditText` view and simply add padding to its bottom, like:\r\n\r\n    &lt;com.google.android.material.textfield.TextInputLayout\r\n        ...\r\n        &lt;com.google.android.material.textfield.TextInputEditText\r\n            android:paddingBottom=&quot;30dp&quot;\r\n            ...\r\n            android:textSize=&quot;15sp&quot;\r\n            android:hint=&quot;@string/txt_hint_add_comment&quot;\r\n            android:layout_width=&quot;match_parent&quot;\r\n            android:layout_height=&quot;wrap_content&quot;\r\n        /&gt;\r\n    &lt;/com.google.android.material.textfield.TextInputLayout&gt;\r\n\r\n","title":"Adding Margin between EditText and keyboard","body":"<p>Replace the <code>EditText</code> view with a <code>TextInputEditText</code> view and simply add padding to its bottom, like:</p>\n<pre><code>&lt;com.google.android.material.textfield.TextInputLayout\n    ...\n    &lt;com.google.android.material.textfield.TextInputEditText\n        android:paddingBottom=&quot;30dp&quot;\n        ...\n        android:textSize=&quot;15sp&quot;\n        android:hint=&quot;@string/txt_hint_add_comment&quot;\n        android:layout_width=&quot;match_parent&quot;\n        android:layout_height=&quot;wrap_content&quot;\n    /&gt;\n&lt;/com.google.android.material.textfield.TextInputLayout&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":17039341,"reputation":21,"user_id":12327643,"display_name":"Jimmy Hendrix"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1669637826,"creation_date":1669637826,"answer_id":74600447,"question_id":58570342,"body_markdown":"Add padding bottom to TextInputLayout","title":"Adding Margin between EditText and keyboard","body":"<p>Add padding bottom to TextInputLayout</p>\n"}],"owner":{"account_id":5574637,"reputation":1759,"user_id":4418481,"accept_rate":55,"display_name":"Ben"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":4971,"favorite_count":0,"down_vote_count":0,"up_vote_count":10,"answer_count":10,"score":10,"last_activity_date":1669637826,"creation_date":1572089374,"question_id":58570342,"body_markdown":"So this question has been asked few times already in here in the past years and non of the solutions worked for me.\r\n\r\nThe problem is that when I use `AdjustPan` to move the softkeyboard it hides part of the `EditText` as follows:\r\n\r\n[![enter image description here][1]][1]\r\n\r\nThe solutions I tried are:\r\n\r\n[Solution 1 (2011)][2]\r\n\r\n[Solution 2 (2014)][3]\r\n\r\n[Solution 3 (2013)][4]\r\n\r\n\r\nMost of the answers include using `AdjustPan/AdjustResize` so I will just say that none of them give the desired solution (Showing the whole `EditText` when keyboard is opened).\r\n\r\nI was thinking maybe in 2019 there is a working solution for this problem.\r\n\r\nThe xml for this layout is:\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\r\n    &lt;androidx.constraintlayout.widget.ConstraintLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\r\n        xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;\r\n        xmlns:tools=&quot;http://schemas.android.com/tools&quot;\r\n        android:layout_width=&quot;match_parent&quot;\r\n        android:layout_height=&quot;match_parent&quot;\r\n        android:background=&quot;@color/colorWhite&quot;\r\n        tools:context=&quot;.ChatActivity&quot;&gt;\r\n    \r\n    \r\n        &lt;androidx.appcompat.widget.ActionMenuView\r\n            android:id=&quot;@+id/actionbar&quot;\r\n            android:layout_width=&quot;match_parent&quot;\r\n            android:layout_height=&quot;0dp&quot;\r\n            android:background=&quot;@color/colorGrayBox&quot;\r\n            app:layout_constraintEnd_toEndOf=&quot;parent&quot;\r\n            app:layout_constraintHeight_percent=&quot;0.1&quot;\r\n            app:layout_constraintStart_toStartOf=&quot;parent&quot;\r\n            app:layout_constraintTop_toTopOf=&quot;parent&quot;&gt;\r\n        &lt;/androidx.appcompat.widget.ActionMenuView&gt;\r\n    \r\n        &lt;TextView\r\n            android:id=&quot;@+id/tv_This&quot;\r\n            android:layout_width=&quot;wrap_content&quot;\r\n            android:layout_height=&quot;wrap_content&quot;\r\n            android:layout_marginStart=&quot;24dp&quot;\r\n            android:layout_marginTop=&quot;16dp&quot;\r\n            android:fontFamily=&quot;@font/open_sans&quot;\r\n            android:text=&quot;@string/ActivityChat_This&quot;\r\n            android:textSize=&quot;12sp&quot;\r\n            app:layout_constraintStart_toStartOf=&quot;parent&quot;\r\n            app:layout_constraintTop_toBottomOf=&quot;@+id/actionbar&quot; /&gt;\r\n    \r\n        &lt;View\r\n            android:id=&quot;@+id/v_Line&quot;\r\n            android:layout_width=&quot;match_parent&quot;\r\n            android:layout_height=&quot;1px&quot;\r\n            android:layout_marginLeft=&quot;24dp&quot;\r\n            android:layout_marginTop=&quot;16dp&quot;\r\n            android:layout_marginRight=&quot;24dp&quot;\r\n            android:background=&quot;@color/colorLightGray&quot;\r\n            app:layout_constraintTop_toBottomOf=&quot;@+id/tv_This&quot; /&gt;\r\n    \r\n        &lt;androidx.cardview.widget.CardView\r\n            android:id=&quot;@+id/imagecard&quot;\r\n            android:layout_width=&quot;40dp&quot;\r\n            android:layout_height=&quot;40dp&quot;\r\n            android:layout_marginStart=&quot;16dp&quot;\r\n            app:cardCornerRadius=&quot;20dp&quot;\r\n            app:layout_constraintBottom_toBottomOf=&quot;@+id/actionbar&quot;\r\n            app:layout_constraintStart_toStartOf=&quot;parent&quot;\r\n            app:layout_constraintTop_toTopOf=&quot;parent&quot;&gt;\r\n    \r\n            &lt;ImageButton\r\n                android:id=&quot;@+id/ivPersonPic&quot;\r\n                android:layout_width=&quot;40dp&quot;\r\n                android:layout_height=&quot;40dp&quot;\r\n                android:background=&quot;@null&quot; /&gt;\r\n    \r\n        &lt;/androidx.cardview.widget.CardView&gt;\r\n    \r\n        &lt;TextView\r\n            android:id=&quot;@+id/username&quot;\r\n            android:layout_width=&quot;wrap_content&quot;\r\n            android:layout_height=&quot;wrap_content&quot;\r\n            android:layout_marginStart=&quot;16dp&quot;\r\n            android:fontFamily=&quot;@font/assistant_bold&quot;\r\n            android:textColor=&quot;@color/colorLightPurple&quot;\r\n            android:textSize=&quot;18sp&quot;\r\n            app:layout_constraintBottom_toBottomOf=&quot;@+id/actionbar&quot;\r\n            app:layout_constraintStart_toEndOf=&quot;@+id/imagecard&quot;\r\n            app:layout_constraintTop_toTopOf=&quot;parent&quot; /&gt;\r\n    \r\n        &lt;androidx.recyclerview.widget.RecyclerView\r\n            android:id=&quot;@+id/rv_Messages&quot;\r\n            android:layout_width=&quot;0dp&quot;\r\n            android:layout_height=&quot;0dp&quot;\r\n            android:layout_marginTop=&quot;8dp&quot;\r\n            app:layout_constraintBottom_toTopOf=&quot;@+id/constraint2&quot;\r\n            app:layout_constraintStart_toStartOf=&quot;parent&quot;\r\n            app:layout_constraintEnd_toEndOf=&quot;parent&quot;\r\n            app:layout_constraintTop_toBottomOf=&quot;@+id/v_Line&quot;/&gt;\r\n    \r\n        &lt;androidx.constraintlayout.widget.ConstraintLayout\r\n            android:id=&quot;@+id/constraint2&quot;\r\n            android:layout_width=&quot;match_parent&quot;\r\n            android:layout_height=&quot;0dp&quot;\r\n            app:layout_constraintBottom_toTopOf=&quot;@+id/bottom_navigation&quot;\r\n            app:layout_constraintHeight_percent=&quot;0.1&quot;&gt;\r\n    \r\n            &lt;EditText\r\n                android:id=&quot;@+id/et_Message&quot;\r\n                android:layout_width=&quot;0dp&quot;\r\n                android:layout_height=&quot;match_parent&quot;\r\n                android:layout_marginStart=&quot;12dp&quot;\r\n                android:layout_marginTop=&quot;8dp&quot;\r\n                android:layout_marginBottom=&quot;8dp&quot;\r\n                android:background=&quot;@drawable/et_rounded&quot;\r\n                android:fontFamily=&quot;@font/assistant&quot;\r\n                android:gravity=&quot;center_vertical&quot;\r\n                android:hint=&quot;@string/ActivityChat_Type&quot;\r\n                android:inputType=&quot;textMultiLine|textPersonName&quot;\r\n                android:paddingEnd=&quot;32dp&quot;\r\n                android:paddingStart=&quot;32dp&quot;\r\n                android:textSize=&quot;16sp&quot;\r\n                app:layout_constraintStart_toStartOf=&quot;parent&quot;\r\n                app:layout_constraintWidth_percent=&quot;0.85&quot; /&gt;\r\n    \r\n            &lt;ImageButton\r\n                android:id=&quot;@+id/ib_Send&quot;\r\n                style=&quot;?android:borderlessButtonStyle&quot;\r\n                android:layout_width=&quot;0dp&quot;\r\n                android:layout_height=&quot;match_parent&quot;\r\n                android:layout_marginTop=&quot;8dp&quot;\r\n                android:layout_marginEnd=&quot;8dp&quot;\r\n                android:layout_marginBottom=&quot;8dp&quot;\r\n                android:adjustViewBounds=&quot;true&quot;\r\n                android:src=&quot;@drawable/ic_chats_send&quot;\r\n                app:layout_constraintEnd_toEndOf=&quot;parent&quot;\r\n                app:layout_constraintWidth_percent=&quot;0.1&quot; /&gt;\r\n    \r\n        &lt;/androidx.constraintlayout.widget.ConstraintLayout&gt;\r\n    \r\n        &lt;com.google.android.material.bottomnavigation.BottomNavigationView\r\n            android:id=&quot;@+id/bottom_navigation&quot;\r\n            android:layout_width=&quot;0dp&quot;\r\n            android:layout_height=&quot;0dp&quot;\r\n            app:itemBackground=&quot;@color/colorWhite&quot;\r\n            app:itemIconTint=&quot;@drawable/btm_nav&quot;\r\n            app:itemTextColor=&quot;@drawable/btm_nav&quot;\r\n            app:layout_constraintBottom_toBottomOf=&quot;parent&quot;\r\n            app:layout_constraintEnd_toEndOf=&quot;parent&quot;\r\n            app:layout_constraintHeight_percent=&quot;0.08&quot;\r\n            app:layout_constraintStart_toStartOf=&quot;parent&quot;\r\n            app:menu=&quot;@menu/menu_btm_nav&quot; /&gt;\r\n    \r\n    &lt;/androidx.constraintlayout.widget.ConstraintLayout&gt;\r\n\r\n  [1]: https://i.stack.imgur.com/XxqLw.png\r\n  [2]: https://stackoverflow.com/questions/4558810/adjustpan-not-preventing-keyboard-from-covering-edittext\r\n  [3]: https://stackoverflow.com/questions/21441372/how-to-add-margin-between-edittext-and-soft-keyboard\r\n  [4]: https://stackoverflow.com/questions/18658359/how-to-set-the-distance-from-soft-keyboard-to-edittext","title":"Adding Margin between EditText and keyboard","body":"<p>So this question has been asked few times already in here in the past years and non of the solutions worked for me.</p>\n\n<p>The problem is that when I use <code>AdjustPan</code> to move the softkeyboard it hides part of the <code>EditText</code> as follows:</p>\n\n<p><a href=\"https://i.stack.imgur.com/XxqLw.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/XxqLw.png\" alt=\"enter image description here\"></a></p>\n\n<p>The solutions I tried are:</p>\n\n<p><a href=\"https://stackoverflow.com/questions/4558810/adjustpan-not-preventing-keyboard-from-covering-edittext\">Solution 1 (2011)</a></p>\n\n<p><a href=\"https://stackoverflow.com/questions/21441372/how-to-add-margin-between-edittext-and-soft-keyboard\">Solution 2 (2014)</a></p>\n\n<p><a href=\"https://stackoverflow.com/questions/18658359/how-to-set-the-distance-from-soft-keyboard-to-edittext\">Solution 3 (2013)</a></p>\n\n<p>Most of the answers include using <code>AdjustPan/AdjustResize</code> so I will just say that none of them give the desired solution (Showing the whole <code>EditText</code> when keyboard is opened).</p>\n\n<p>I was thinking maybe in 2019 there is a working solution for this problem.</p>\n\n<p>The xml for this layout is:</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt;\n&lt;androidx.constraintlayout.widget.ConstraintLayout xmlns:android=\"http://schemas.android.com/apk/res/android\"\n    xmlns:app=\"http://schemas.android.com/apk/res-auto\"\n    xmlns:tools=\"http://schemas.android.com/tools\"\n    android:layout_width=\"match_parent\"\n    android:layout_height=\"match_parent\"\n    android:background=\"@color/colorWhite\"\n    tools:context=\".ChatActivity\"&gt;\n\n\n    &lt;androidx.appcompat.widget.ActionMenuView\n        android:id=\"@+id/actionbar\"\n        android:layout_width=\"match_parent\"\n        android:layout_height=\"0dp\"\n        android:background=\"@color/colorGrayBox\"\n        app:layout_constraintEnd_toEndOf=\"parent\"\n        app:layout_constraintHeight_percent=\"0.1\"\n        app:layout_constraintStart_toStartOf=\"parent\"\n        app:layout_constraintTop_toTopOf=\"parent\"&gt;\n    &lt;/androidx.appcompat.widget.ActionMenuView&gt;\n\n    &lt;TextView\n        android:id=\"@+id/tv_This\"\n        android:layout_width=\"wrap_content\"\n        android:layout_height=\"wrap_content\"\n        android:layout_marginStart=\"24dp\"\n        android:layout_marginTop=\"16dp\"\n        android:fontFamily=\"@font/open_sans\"\n        android:text=\"@string/ActivityChat_This\"\n        android:textSize=\"12sp\"\n        app:layout_constraintStart_toStartOf=\"parent\"\n        app:layout_constraintTop_toBottomOf=\"@+id/actionbar\" /&gt;\n\n    &lt;View\n        android:id=\"@+id/v_Line\"\n        android:layout_width=\"match_parent\"\n        android:layout_height=\"1px\"\n        android:layout_marginLeft=\"24dp\"\n        android:layout_marginTop=\"16dp\"\n        android:layout_marginRight=\"24dp\"\n        android:background=\"@color/colorLightGray\"\n        app:layout_constraintTop_toBottomOf=\"@+id/tv_This\" /&gt;\n\n    &lt;androidx.cardview.widget.CardView\n        android:id=\"@+id/imagecard\"\n        android:layout_width=\"40dp\"\n        android:layout_height=\"40dp\"\n        android:layout_marginStart=\"16dp\"\n        app:cardCornerRadius=\"20dp\"\n        app:layout_constraintBottom_toBottomOf=\"@+id/actionbar\"\n        app:layout_constraintStart_toStartOf=\"parent\"\n        app:layout_constraintTop_toTopOf=\"parent\"&gt;\n\n        &lt;ImageButton\n            android:id=\"@+id/ivPersonPic\"\n            android:layout_width=\"40dp\"\n            android:layout_height=\"40dp\"\n            android:background=\"@null\" /&gt;\n\n    &lt;/androidx.cardview.widget.CardView&gt;\n\n    &lt;TextView\n        android:id=\"@+id/username\"\n        android:layout_width=\"wrap_content\"\n        android:layout_height=\"wrap_content\"\n        android:layout_marginStart=\"16dp\"\n        android:fontFamily=\"@font/assistant_bold\"\n        android:textColor=\"@color/colorLightPurple\"\n        android:textSize=\"18sp\"\n        app:layout_constraintBottom_toBottomOf=\"@+id/actionbar\"\n        app:layout_constraintStart_toEndOf=\"@+id/imagecard\"\n        app:layout_constraintTop_toTopOf=\"parent\" /&gt;\n\n    &lt;androidx.recyclerview.widget.RecyclerView\n        android:id=\"@+id/rv_Messages\"\n        android:layout_width=\"0dp\"\n        android:layout_height=\"0dp\"\n        android:layout_marginTop=\"8dp\"\n        app:layout_constraintBottom_toTopOf=\"@+id/constraint2\"\n        app:layout_constraintStart_toStartOf=\"parent\"\n        app:layout_constraintEnd_toEndOf=\"parent\"\n        app:layout_constraintTop_toBottomOf=\"@+id/v_Line\"/&gt;\n\n    &lt;androidx.constraintlayout.widget.ConstraintLayout\n        android:id=\"@+id/constraint2\"\n        android:layout_width=\"match_parent\"\n        android:layout_height=\"0dp\"\n        app:layout_constraintBottom_toTopOf=\"@+id/bottom_navigation\"\n        app:layout_constraintHeight_percent=\"0.1\"&gt;\n\n        &lt;EditText\n            android:id=\"@+id/et_Message\"\n            android:layout_width=\"0dp\"\n            android:layout_height=\"match_parent\"\n            android:layout_marginStart=\"12dp\"\n            android:layout_marginTop=\"8dp\"\n            android:layout_marginBottom=\"8dp\"\n            android:background=\"@drawable/et_rounded\"\n            android:fontFamily=\"@font/assistant\"\n            android:gravity=\"center_vertical\"\n            android:hint=\"@string/ActivityChat_Type\"\n            android:inputType=\"textMultiLine|textPersonName\"\n            android:paddingEnd=\"32dp\"\n            android:paddingStart=\"32dp\"\n            android:textSize=\"16sp\"\n            app:layout_constraintStart_toStartOf=\"parent\"\n            app:layout_constraintWidth_percent=\"0.85\" /&gt;\n\n        &lt;ImageButton\n            android:id=\"@+id/ib_Send\"\n            style=\"?android:borderlessButtonStyle\"\n            android:layout_width=\"0dp\"\n            android:layout_height=\"match_parent\"\n            android:layout_marginTop=\"8dp\"\n            android:layout_marginEnd=\"8dp\"\n            android:layout_marginBottom=\"8dp\"\n            android:adjustViewBounds=\"true\"\n            android:src=\"@drawable/ic_chats_send\"\n            app:layout_constraintEnd_toEndOf=\"parent\"\n            app:layout_constraintWidth_percent=\"0.1\" /&gt;\n\n    &lt;/androidx.constraintlayout.widget.ConstraintLayout&gt;\n\n    &lt;com.google.android.material.bottomnavigation.BottomNavigationView\n        android:id=\"@+id/bottom_navigation\"\n        android:layout_width=\"0dp\"\n        android:layout_height=\"0dp\"\n        app:itemBackground=\"@color/colorWhite\"\n        app:itemIconTint=\"@drawable/btm_nav\"\n        app:itemTextColor=\"@drawable/btm_nav\"\n        app:layout_constraintBottom_toBottomOf=\"parent\"\n        app:layout_constraintEnd_toEndOf=\"parent\"\n        app:layout_constraintHeight_percent=\"0.08\"\n        app:layout_constraintStart_toStartOf=\"parent\"\n        app:menu=\"@menu/menu_btm_nav\" /&gt;\n\n&lt;/androidx.constraintlayout.widget.ConstraintLayout&gt;\n</code></pre>\n"},{"tags":["java","spring","spring-integration"],"answers":[{"tags":[],"owner":{"account_id":7788110,"reputation":1429,"user_id":6306585,"accept_rate":60,"display_name":"Shakirov Ramil"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1669637766,"creation_date":1669637356,"answer_id":74600369,"question_id":74599583,"body_markdown":"@Transformer(inputChannel = &quot;in&quot;, outputChannel = &quot;out.input&quot;)\r\n\r\nor define channel name manualy\r\n\r\n@Bean\r\npublic MessageChannel out() {\r\n    return MessageChannels.direct(&quot;out&quot;).get();\r\n}\r\n\r\n","title":"Spring Integration - replace XML by annotation, how to convert anonymous channels?","body":"<p>@Transformer(inputChannel = &quot;in&quot;, outputChannel = &quot;out.input&quot;)</p>\n<p>or define channel name manualy</p>\n<p>@Bean\npublic MessageChannel out() {\nreturn MessageChannels.direct(&quot;out&quot;).get();\n}</p>\n"}],"owner":{"account_id":27072153,"reputation":3,"user_id":20622661,"display_name":"Hopla"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":52,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":74600369,"answer_count":1,"score":0,"last_activity_date":1669637766,"creation_date":1669633166,"question_id":74599583,"body_markdown":"I am converting Spring Integration beans from XML to annotations. In my XML, I have the following transformer:\r\n\r\n```\r\n&lt;int:transformer ref=&quot;...&quot; input-channel=&quot;in&quot; output-channel=&quot;out&quot;&gt;\r\n    ...\r\n&lt;/int:transformer&gt;\r\n```\r\n\r\nI replaced this with:\r\n\r\n```\r\n@Transformer(inputChannel = &quot;in&quot;, outputChannel = &quot;out&quot;)\r\n```\r\n\r\nHere, the `out` channel is nowhere defined, it is anonymous. This no longer works in annotation, I get:\r\n\r\n```\r\n***************************\r\nAPPLICATION FAILED TO START\r\n***************************\r\n\r\nDescription:\r\n\r\nA component required a bean named &#39;out&#39; that could not be found.\r\n```\r\n\r\nI should manually create such channel. My question is if the following is the correct and equivalent counter part of the implicit channel creation which is happening when using XML notation?\r\n\r\n```\r\n@Bean\r\npublic QueueChannel out() {\r\n    return new QueueChannel();\r\n}\r\n```\r\n\r\nThat is, is `QueueChannel` the correct channel type here?\r\n\r\nIt seems to work, but I am not sure if both solution are fully equal.","title":"Spring Integration - replace XML by annotation, how to convert anonymous channels?","body":"<p>I am converting Spring Integration beans from XML to annotations. In my XML, I have the following transformer:</p>\n<pre><code>&lt;int:transformer ref=&quot;...&quot; input-channel=&quot;in&quot; output-channel=&quot;out&quot;&gt;\n    ...\n&lt;/int:transformer&gt;\n</code></pre>\n<p>I replaced this with:</p>\n<pre><code>@Transformer(inputChannel = &quot;in&quot;, outputChannel = &quot;out&quot;)\n</code></pre>\n<p>Here, the <code>out</code> channel is nowhere defined, it is anonymous. This no longer works in annotation, I get:</p>\n<pre><code>***************************\nAPPLICATION FAILED TO START\n***************************\n\nDescription:\n\nA component required a bean named 'out' that could not be found.\n</code></pre>\n<p>I should manually create such channel. My question is if the following is the correct and equivalent counter part of the implicit channel creation which is happening when using XML notation?</p>\n<pre><code>@Bean\npublic QueueChannel out() {\n    return new QueueChannel();\n}\n</code></pre>\n<p>That is, is <code>QueueChannel</code> the correct channel type here?</p>\n<p>It seems to work, but I am not sure if both solution are fully equal.</p>\n"},{"tags":["java","httprequest"],"answers":[{"tags":[],"owner":{"account_id":1211967,"reputation":7024,"user_id":1180351,"display_name":"Rob Spoor"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1669637686,"creation_date":1669637686,"answer_id":74600420,"question_id":74600346,"body_markdown":"For responses with status codes 400 and higher you need to use `connection.getErrorStream()`. Calling `connection.getOutputStream()` will throw an exception. You can use `connection.getResponseCode()` before calling `connection.getOutputStream()` or `connection.getErrorStream()` to determine the status, and therefore which of the two methods to use.","title":"Http Request using java.net.* package","body":"<p>For responses with status codes 400 and higher you need to use <code>connection.getErrorStream()</code>. Calling <code>connection.getOutputStream()</code> will throw an exception. You can use <code>connection.getResponseCode()</code> before calling <code>connection.getOutputStream()</code> or <code>connection.getErrorStream()</code> to determine the status, and therefore which of the two methods to use.</p>\n"}],"owner":{"account_id":23791468,"reputation":11,"user_id":17802855,"display_name":"Harish Algat"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":53,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1669637686,"creation_date":1669637239,"question_id":74600346,"body_markdown":"I am firing API calls through java package java.net.* \r\nBut, for 400 and above Responses I am not getting the response body. So Not able to figure out why the call is failing.\r\n\r\nBelow snippet fires the call.\r\n\r\n    public static String sendPostRequest(String requestUrl, String payload, Map&lt;String, String&gt; requestProperties) {\r\n            StringBuffer jsonString = new StringBuffer();\r\n            try {\r\n                URL url = new URL(requestUrl);\r\n                HttpURLConnection connection = (HttpURLConnection) url.openConnection();\r\n    \r\n                connection.setDoInput(true);\r\n                connection.setDoOutput(true);\r\n                connection.setRequestMethod(&quot;POST&quot;);\r\n                Set&lt;String&gt; keys = requestProperties.keySet();\r\n                for (String property : keys) {\r\n                    connection.setRequestProperty(property, requestProperties.get(property));\r\n                }\r\n                OutputStreamWriter writer = new OutputStreamWriter(connection.getOutputStream(), StandardCharsets.UTF_8);\r\n                writer.write(payload);\r\n                writer.close();\r\n                BufferedReader br = new BufferedReader(new InputStreamReader(connection.getInputStream()));\r\n                String line;\r\n                while ((line = br.readLine()) != null) {\r\n                    jsonString.append(line);\r\n                }\r\n                br.close();\r\n                connection.disconnect();\r\n                //  System.out.println(&quot;response  &quot; + jsonString.toString());\r\n    \r\n            } catch (Exception e) {\r\n                log.error(&quot;Error for call &quot; + requestUrl);\r\n                log.error(e.getMessage());\r\n            }\r\n            return jsonString.toString();\r\n        }\r\n\r\nIs there any work around?\r\n\r\n","title":"Http Request using java.net.* package","body":"<p>I am firing API calls through java package java.net.*\nBut, for 400 and above Responses I am not getting the response body. So Not able to figure out why the call is failing.</p>\n<p>Below snippet fires the call.</p>\n<pre><code>public static String sendPostRequest(String requestUrl, String payload, Map&lt;String, String&gt; requestProperties) {\n        StringBuffer jsonString = new StringBuffer();\n        try {\n            URL url = new URL(requestUrl);\n            HttpURLConnection connection = (HttpURLConnection) url.openConnection();\n\n            connection.setDoInput(true);\n            connection.setDoOutput(true);\n            connection.setRequestMethod(&quot;POST&quot;);\n            Set&lt;String&gt; keys = requestProperties.keySet();\n            for (String property : keys) {\n                connection.setRequestProperty(property, requestProperties.get(property));\n            }\n            OutputStreamWriter writer = new OutputStreamWriter(connection.getOutputStream(), StandardCharsets.UTF_8);\n            writer.write(payload);\n            writer.close();\n            BufferedReader br = new BufferedReader(new InputStreamReader(connection.getInputStream()));\n            String line;\n            while ((line = br.readLine()) != null) {\n                jsonString.append(line);\n            }\n            br.close();\n            connection.disconnect();\n            //  System.out.println(&quot;response  &quot; + jsonString.toString());\n\n        } catch (Exception e) {\n            log.error(&quot;Error for call &quot; + requestUrl);\n            log.error(e.getMessage());\n        }\n        return jsonString.toString();\n    }\n</code></pre>\n<p>Is there any work around?</p>\n"},{"tags":["java","spring-boot","camunda","dmn"],"comments":[{"owner":{"account_id":1612994,"reputation":7243,"user_id":1491439,"display_name":"rob2universe"},"score":0,"creation_date":1669341088,"post_id":74548020,"comment_id":131625942,"body_markdown":"Can you add a test DMN?","body":"Can you add a test DMN?"},{"owner":{"account_id":1612994,"reputation":7243,"user_id":1491439,"display_name":"rob2universe"},"score":0,"creation_date":1669519016,"post_id":74548020,"comment_id":131657991,"body_markdown":"How are you applying the round function where? On the column header?","body":"How are you applying the round function where? On the column header?"}],"answers":[{"tags":[],"owner":{"account_id":24763818,"reputation":41,"user_id":18647882,"display_name":"Floor is Java"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1669636821,"creation_date":1669636821,"answer_id":74600286,"question_id":74548020,"body_markdown":"I found solution. The problem was exactly with the float-values\r\n\r\n[![Camunda][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/ydXl4.png\r\n\r\nI just added script in the Expression field\r\n","title":"Dmn table variable rounding using Camunda and SpringBoot (double calculation precision problem)","body":"<p>I found solution. The problem was exactly with the float-values</p>\n<p><a href=\"https://i.stack.imgur.com/ydXl4.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/ydXl4.png\" alt=\"Camunda\" /></a></p>\n<p>I just added script in the Expression field</p>\n"}],"owner":{"account_id":24763818,"reputation":41,"user_id":18647882,"display_name":"Floor is Java"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":127,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1669636821,"creation_date":1669212029,"question_id":74548020,"body_markdown":"I use Camunda and Spring Boot.\r\n\r\nI created a dmn-table. But i discoverd a double precision calculation problem.\r\n \r\n[![enter image description here](https://i.stack.imgur.com/eSSNu.png)](https://i.stack.imgur.com/eSSNu.png)\r\n\r\nI need to calculate result with this dmn table.\r\nWe have two variables that come from java: float a, double b.\r\nFor example: a= 0.2, b=0.6\r\nAnd the interval:\r\n[![enter image description here](https://i.stack.imgur.com/SMGZ7.png)](https://i.stack.imgur.com/SMGZ7.png)\r\n\r\nBut the precision problem gives me b=0.600000000001~ insted of 0.6 and table gives me another interval\r\n[![enter image description here](https://i.stack.imgur.com/fAjQp.png)](https://i.stack.imgur.com/fAjQp.png)\r\n\r\nHow can i place rounding inside the dmn table to receive variable result as #.#?\r\n\r\n\r\nI found a way to round variable, but i doesn&#39;t work\r\n[![enter image description here](https://i.stack.imgur.com/4TDjr.png)](https://i.stack.imgur.com/4TDjr.png)","title":"Dmn table variable rounding using Camunda and SpringBoot (double calculation precision problem)","body":"<p>I use Camunda and Spring Boot.</p>\n<p>I created a dmn-table. But i discoverd a double precision calculation problem.</p>\n<p><a href=\"https://i.stack.imgur.com/eSSNu.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/eSSNu.png\" alt=\"enter image description here\" /></a></p>\n<p>I need to calculate result with this dmn table.\nWe have two variables that come from java: float a, double b.\nFor example: a= 0.2, b=0.6\nAnd the interval:\n<a href=\"https://i.stack.imgur.com/SMGZ7.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/SMGZ7.png\" alt=\"enter image description here\" /></a></p>\n<p>But the precision problem gives me b=0.600000000001~ insted of 0.6 and table gives me another interval\n<a href=\"https://i.stack.imgur.com/fAjQp.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/fAjQp.png\" alt=\"enter image description here\" /></a></p>\n<p>How can i place rounding inside the dmn table to receive variable result as #.#?</p>\n<p>I found a way to round variable, but i doesn't work\n<a href=\"https://i.stack.imgur.com/4TDjr.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/4TDjr.png\" alt=\"enter image description here\" /></a></p>\n"},{"tags":["java","spring","spring-boot","heroku","spring-boot-gradle-plugin"],"comments":[{"owner":{"account_id":3192259,"reputation":117599,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1669625000,"post_id":74595549,"comment_id":131675996,"body_markdown":"You are using Java8 **not** Java17 as you can see from the output. Spring Boot 3 has as a minimum requirement Java17, so you must use at least java 17 or higher.","body":"You are using Java8 <b>not</b> Java17 as you can see from the output. Spring Boot 3 has as a minimum requirement Java17, so you must use at least java 17 or higher."},{"owner":{"account_id":446597,"reputation":22464,"user_id":839733,"accept_rate":69,"display_name":"Abhijit Sarkar"},"score":0,"creation_date":1669687036,"post_id":74595549,"comment_id":131694208,"body_markdown":"Why is this that you keep posting the same question under different guises? https://stackoverflow.com/q/74586031/839733","body":"Why is this that you keep posting the same question under different guises? <a href=\"https://stackoverflow.com/q/74586031/839733\">stackoverflow.com/q/74586031/839733</a>"},{"owner":{"account_id":11699911,"reputation":363,"user_id":8565380,"display_name":"Harsh"},"score":0,"creation_date":1670499317,"post_id":74595549,"comment_id":131891714,"body_markdown":"Hi, for me it was spring boot 3 causing the issue, if you are not very keen about it , try using spring 2.7.6 or some older version","body":"Hi, for me it was spring boot 3 causing the issue, if you are not very keen about it , try using spring 2.7.6 or some older version"}],"answers":[{"tags":[],"owner":{"account_id":145051,"reputation":130079,"user_id":354577,"accept_rate":100,"display_name":"Chris"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1669636760,"creation_date":1669636760,"answer_id":74600272,"question_id":74595549,"body_markdown":"You may be using Java 17 locally, but on Heroku you&#39;re using Java 8. [This is the default][1]:\r\n\r\n&gt; Heroku currently uses **OpenJDK 8** to run your application by default. Other OpenJDK versions are also available. Depending on the OpenJDK version you select the latest available version of that JDK will be used each time you deploy your app.\r\n\r\nYou need to [explicitly request the correct version of Java][2]. Add a file called `system.properties` to the root directory of your project that contains\r\n\r\n```none\r\njava.runtime.version=17\r\n```\r\n\r\nthen commit and redeploy.\r\n\r\n[1]: https://devcenter.heroku.com/articles/java-support#supported-java-versions\r\n[2]: https://devcenter.heroku.com/articles/java-support#specifying-a-java-version\r\n","title":"How to fix spring-boot-gradle-plugin:3.0.0 issue?","body":"<p>You may be using Java 17 locally, but on Heroku you're using Java 8. <a href=\"https://devcenter.heroku.com/articles/java-support#supported-java-versions\" rel=\"nofollow noreferrer\">This is the default</a>:</p>\n<blockquote>\n<p>Heroku currently uses <strong>OpenJDK 8</strong> to run your application by default. Other OpenJDK versions are also available. Depending on the OpenJDK version you select the latest available version of that JDK will be used each time you deploy your app.</p>\n</blockquote>\n<p>You need to <a href=\"https://devcenter.heroku.com/articles/java-support#specifying-a-java-version\" rel=\"nofollow noreferrer\">explicitly request the correct version of Java</a>. Add a file called <code>system.properties</code> to the root directory of your project that contains</p>\n<pre class=\"lang-none prettyprint-override\"><code>java.runtime.version=17\n</code></pre>\n<p>then commit and redeploy.</p>\n"}],"owner":{"account_id":18727290,"reputation":137,"user_id":13653602,"display_name":"noBoom"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":9838,"favorite_count":0,"down_vote_count":1,"up_vote_count":3,"closed_date":1669689144,"answer_count":1,"score":2,"last_activity_date":1669636760,"creation_date":1669604422,"question_id":74595549,"body_markdown":"I am deploying `spring boot` app on heroku using gitlab ci/cd\r\n\r\ni am using `spring boot 3.0.0` and `java 17`\r\n\r\nAnyone knows how to fix it?\r\nAlso on line 8 it&#39;s `-----&gt; Installing OpenJDK 1.8... done` i don&#39;t know why and how even i have java 17 in app\r\n\r\n```\r\nDeploying application\r\nuploading application archive\r\ntriggering new deployment\r\n-----&gt; Building on the Heroku-22 stack\r\n-----&gt; Determining which buildpack to use for this app\r\n-----&gt; Gradle app detected\r\n-----&gt; Spring Boot detected\r\n-----&gt; Installing OpenJDK 1.8... done\r\n-----&gt; Building Gradle app...\r\n-----&gt; executing ./gradlew build -x check\r\n       Downloading https://services.gradle.org/distributions/gradle-7.5.1-bin.zip\r\n       ...........10%............20%...........30%............40%...........50%............60%...........70%............80%...........90%............100%\r\n       To honour the JVM settings for this build a single-use Daemon process will be forked. See https://docs.gradle.org/7.5.1/userguide/gradle_daemon.html#sec:disabling_the_daemon.\r\n       Daemon will be stopped at the end of the build \r\n       \r\n       FAILURE: Build failed with an exception.\r\n       \r\n       * What went wrong:\r\n       A problem occurred configuring root project &#39;auth&#39;.\r\n       &gt; Could not resolve all files for configuration &#39;:classpath&#39;.\r\n          &gt; Could not resolve org.springframework.boot:spring-boot-gradle-plugin:3.0.0.\r\n            Required by:\r\n                project : &gt; org.springframework.boot:org.springframework.boot.gradle.plugin:3.0.0\r\n             &gt; No matching variant of org.springframework.boot:spring-boot-gradle-plugin:3.0.0 was found. The consumer was configured to find a runtime of a library compatible with Java 8, packaged as a jar, and its dependencies declared externally, as well as attribute &#39;org.gradle.plugin.api-version&#39; with value &#39;7.5.1&#39; but:\r\n                 - Variant &#39;apiElements&#39; capability org.springframework.boot:spring-boot-gradle-plugin:3.0.0 declares a library, packaged as a jar, and its dependencies declared externally:\r\n                     - Incompatible because this component declares an API of a component compatible with Java 17 and the consumer needed a runtime of a component compatible with Java 8\r\n                     - Other compatible attribute:\r\n                         - Doesn&#39;t say anything about org.gradle.plugin.api-version (required &#39;7.5.1&#39;)\r\n                 - Variant &#39;javadocElements&#39; capability org.springframework.boot:spring-boot-gradle-plugin:3.0.0 declares a runtime of a component, and its dependencies declared externally:\r\n                     - Incompatible because this component declares documentation and the consumer needed a library\r\n                     - Other compatible attributes:\r\n                         - Doesn&#39;t say anything about its target Java version (required compatibility with Java 8)\r\n                         - Doesn&#39;t say anything about its elements (required them packaged as a jar)\r\n                         - Doesn&#39;t say anything about org.gradle.plugin.api-version (required &#39;7.5.1&#39;)\r\n                 - Variant &#39;mavenOptionalApiElements&#39; capability org.springframework.boot:spring-boot-gradle-plugin-maven-optional:3.0.0 declares a library, packaged as a jar, and its dependencies declared externally:\r\n                     - Incompatible because this component declares an API of a component compatible with Java 17 and the consumer needed a runtime of a component compatible with Java 8\r\n                     - Other compatible attribute:\r\n                         - Doesn&#39;t say anything about org.gradle.plugin.api-version (required &#39;7.5.1&#39;)\r\n                 - Variant &#39;mavenOptionalRuntimeElements&#39; capability org.springframework.boot:spring-boot-gradle-plugin-maven-optional:3.0.0 declares a runtime of a library, packaged as a jar, and its dependencies declared externally:\r\n                     - Incompatible because this component declares a component compatible with Java 17 and the consumer needed a component compatible with Java 8\r\n                     - Other compatible attribute:\r\n                         - Doesn&#39;t say anything about org.gradle.plugin.api-version (required &#39;7.5.1&#39;)\r\n                 - Variant &#39;runtimeElements&#39; capability org.springframework.boot:spring-boot-gradle-plugin:3.0.0 declares a runtime of a library, packaged as a jar, and its dependencies declared externally:\r\n                     - Incompatible because this component declares a component compatible with Java 17 and the consumer needed a component compatible with Java 8\r\n                     - Other compatible attribute:\r\n                         - Doesn&#39;t say anything about org.gradle.plugin.api-version (required &#39;7.5.1&#39;)\r\n                 - Variant &#39;sourcesElements&#39; capability org.springframework.boot:spring-boot-gradle-plugin:3.0.0 declares a runtime of a component, and its dependencies declared externally:\r\n                     - Incompatible because this component declares documentation and the consumer needed a library\r\n                     - Other compatible attributes:\r\n                         - Doesn&#39;t say anything about its target Java version (required compatibility with Java 8)\r\n                         - Doesn&#39;t say anything about its elements (required them packaged as a jar)\r\n                         - Doesn&#39;t say anything about org.gradle.plugin.api-version (required &#39;7.5.1&#39;)\r\n       \r\n       * Try:\r\n       &gt; Run with --stacktrace option to get the stack trace.\r\n       &gt; Run with --info or --debug option to get more log output.\r\n       &gt; Run with --scan to get full insights.\r\n       \r\n       * Get more help at https://help.gradle.org\r\n       \r\n       BUILD FAILED in 9s\r\n !     ERROR: Failed to run Gradle!\r\n       We&#39;re sorry this build is failing. If you can&#39;t find the issue in application\r\n       code, please submit a ticket so we can help: https://help.heroku.com\r\n       You can also try reverting to the previous version of the buildpack by running:\r\n       $ heroku buildpacks:set https://github.com/heroku/heroku-buildpack-gradle#previous-version\r\n       \r\n       Thanks,\r\n       Heroku\r\n```","title":"How to fix spring-boot-gradle-plugin:3.0.0 issue?","body":"<p>I am deploying <code>spring boot</code> app on heroku using gitlab ci/cd</p>\n<p>i am using <code>spring boot 3.0.0</code> and <code>java 17</code></p>\n<p>Anyone knows how to fix it?\nAlso on line 8 it's <code>-----&gt; Installing OpenJDK 1.8... done</code> i don't know why and how even i have java 17 in app</p>\n<pre><code>Deploying application\nuploading application archive\ntriggering new deployment\n-----&gt; Building on the Heroku-22 stack\n-----&gt; Determining which buildpack to use for this app\n-----&gt; Gradle app detected\n-----&gt; Spring Boot detected\n-----&gt; Installing OpenJDK 1.8... done\n-----&gt; Building Gradle app...\n-----&gt; executing ./gradlew build -x check\n       Downloading https://services.gradle.org/distributions/gradle-7.5.1-bin.zip\n       ...........10%............20%...........30%............40%...........50%............60%...........70%............80%...........90%............100%\n       To honour the JVM settings for this build a single-use Daemon process will be forked. See https://docs.gradle.org/7.5.1/userguide/gradle_daemon.html#sec:disabling_the_daemon.\n       Daemon will be stopped at the end of the build \n       \n       FAILURE: Build failed with an exception.\n       \n       * What went wrong:\n       A problem occurred configuring root project 'auth'.\n       &gt; Could not resolve all files for configuration ':classpath'.\n          &gt; Could not resolve org.springframework.boot:spring-boot-gradle-plugin:3.0.0.\n            Required by:\n                project : &gt; org.springframework.boot:org.springframework.boot.gradle.plugin:3.0.0\n             &gt; No matching variant of org.springframework.boot:spring-boot-gradle-plugin:3.0.0 was found. The consumer was configured to find a runtime of a library compatible with Java 8, packaged as a jar, and its dependencies declared externally, as well as attribute 'org.gradle.plugin.api-version' with value '7.5.1' but:\n                 - Variant 'apiElements' capability org.springframework.boot:spring-boot-gradle-plugin:3.0.0 declares a library, packaged as a jar, and its dependencies declared externally:\n                     - Incompatible because this component declares an API of a component compatible with Java 17 and the consumer needed a runtime of a component compatible with Java 8\n                     - Other compatible attribute:\n                         - Doesn't say anything about org.gradle.plugin.api-version (required '7.5.1')\n                 - Variant 'javadocElements' capability org.springframework.boot:spring-boot-gradle-plugin:3.0.0 declares a runtime of a component, and its dependencies declared externally:\n                     - Incompatible because this component declares documentation and the consumer needed a library\n                     - Other compatible attributes:\n                         - Doesn't say anything about its target Java version (required compatibility with Java 8)\n                         - Doesn't say anything about its elements (required them packaged as a jar)\n                         - Doesn't say anything about org.gradle.plugin.api-version (required '7.5.1')\n                 - Variant 'mavenOptionalApiElements' capability org.springframework.boot:spring-boot-gradle-plugin-maven-optional:3.0.0 declares a library, packaged as a jar, and its dependencies declared externally:\n                     - Incompatible because this component declares an API of a component compatible with Java 17 and the consumer needed a runtime of a component compatible with Java 8\n                     - Other compatible attribute:\n                         - Doesn't say anything about org.gradle.plugin.api-version (required '7.5.1')\n                 - Variant 'mavenOptionalRuntimeElements' capability org.springframework.boot:spring-boot-gradle-plugin-maven-optional:3.0.0 declares a runtime of a library, packaged as a jar, and its dependencies declared externally:\n                     - Incompatible because this component declares a component compatible with Java 17 and the consumer needed a component compatible with Java 8\n                     - Other compatible attribute:\n                         - Doesn't say anything about org.gradle.plugin.api-version (required '7.5.1')\n                 - Variant 'runtimeElements' capability org.springframework.boot:spring-boot-gradle-plugin:3.0.0 declares a runtime of a library, packaged as a jar, and its dependencies declared externally:\n                     - Incompatible because this component declares a component compatible with Java 17 and the consumer needed a component compatible with Java 8\n                     - Other compatible attribute:\n                         - Doesn't say anything about org.gradle.plugin.api-version (required '7.5.1')\n                 - Variant 'sourcesElements' capability org.springframework.boot:spring-boot-gradle-plugin:3.0.0 declares a runtime of a component, and its dependencies declared externally:\n                     - Incompatible because this component declares documentation and the consumer needed a library\n                     - Other compatible attributes:\n                         - Doesn't say anything about its target Java version (required compatibility with Java 8)\n                         - Doesn't say anything about its elements (required them packaged as a jar)\n                         - Doesn't say anything about org.gradle.plugin.api-version (required '7.5.1')\n       \n       * Try:\n       &gt; Run with --stacktrace option to get the stack trace.\n       &gt; Run with --info or --debug option to get more log output.\n       &gt; Run with --scan to get full insights.\n       \n       * Get more help at https://help.gradle.org\n       \n       BUILD FAILED in 9s\n !     ERROR: Failed to run Gradle!\n       We're sorry this build is failing. If you can't find the issue in application\n       code, please submit a ticket so we can help: https://help.heroku.com\n       You can also try reverting to the previous version of the buildpack by running:\n       $ heroku buildpacks:set https://github.com/heroku/heroku-buildpack-gradle#previous-version\n       \n       Thanks,\n       Heroku\n</code></pre>\n"},{"tags":["java","spring-boot","docker","ssl","apache-kafka"],"answers":[{"tags":[],"owner":{"account_id":987386,"reputation":1567,"user_id":1005567,"display_name":"spekdrum"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1669636704,"creation_date":1669636704,"answer_id":74600263,"question_id":72912839,"body_markdown":"I think you are maybe missing this important parameter in application configuration in order to enable SSL connection:\r\n\r\n    spring:\r\n      kafka:\r\n        security:\r\n          protocol: &quot;SSL&quot;\r\n\r\n","title":"Springboot and Kafka (Docker) communication via SSL results in Cancelled in-flight API_VERSIONS request","body":"<p>I think you are maybe missing this important parameter in application configuration in order to enable SSL connection:</p>\n<pre><code>spring:\n  kafka:\n    security:\n      protocol: &quot;SSL&quot;\n</code></pre>\n"}],"owner":{"account_id":5320288,"reputation":594,"user_id":4243929,"accept_rate":100,"display_name":"Christian Riese"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2265,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":1,"score":2,"last_activity_date":1669636704,"creation_date":1657290115,"question_id":72912839,"body_markdown":"I do have a very simple Springboot App with a even simpler Kafka Producer and Client, that I try to connect to a Docker Kafka Broker via SSL. Unfortunately I am unable to get it to work. First of all my configuration looks like this:\r\n\r\ndocker-compose.yml \r\n\r\n    version: &#39;3.1&#39;\r\n    \r\n    services:\r\n    \r\n      zookeeper:\r\n        image: wurstmeister/zookeeper\r\n        environment:\r\n          ZOOKEEPER_CLIENT_PORT: 2181\r\n    \r\n      broker:\r\n        image: wurstmeister/kafka\r\n        ports:\r\n          - 9092:9092\r\n          - 9093:9093\r\n        volumes:\r\n          - ./security:/etc/kafka/secrets\r\n        environment:\r\n          KAFKA_LISTENERS: PLAINTEXT://broker:29092,PLAINTEXT_HOST://localhost:9092,TLS://broker:29093,TLS_HOST://localhost:9093\r\n          KAFKA_ADVERTISED_LISTENERS: PLAINTEXT://broker:29092,PLAINTEXT_HOST://localhost:9092,TLS://broker:29093,TLS_HOST://localhost:9093\r\n          KAFKA_LISTENER_SECURITY_PROTOCOL_MAP: PLAINTEXT:PLAINTEXT,PLAINTEXT_HOST:PLAINTEXT,TLS:SSL,TLS_HOST:SSL\r\n          KAFKA_INTER_BROKER_LISTENER_NAME: TLS\r\n          KAFKA_OFFSETS_TOPIC_REPLICATION_FACTOR: 1\r\n          KAFKA_TRANSACTION_STATE_LOG_REPLICATION_FACTOR: 1\r\n          KAFKA_AUTO_CREATE_TOPICS_ENABLE: &#39;false&#39;\r\n          KAFKA_ZOOKEEPER_CONNECT: zookeeper:2181\r\n          KAFKA_SSL_KEYSTORE_LOCATION: /etc/kafka/secrets/broker-keypair.pem\r\n          KAFKA_SSL_KEY_PASSWORD: password\r\n          KAFKA_SSL_KEYSTORE_TYPE: PEM\r\n          KAFKA_SSL_TRUSTSTORE_LOCATION: /etc/kafka/secrets/root.crt\r\n          KAFKA_SSL_TRUSTSTORE_TYPE: PEM\r\n          KAFKA_SSL_ENDPOINT_IDENTIFICATION_ALGORITHM: &quot; &quot;\r\n          KAFKA_SSL_CLIENT_AUTH: &quot;required&quot;\r\n          KAFKA_ALLOW_EVERYONE_IF_NO_ACL_FOUND: &#39;true&#39;\r\n\r\nKafkaComsumerConfig.java\r\n  \r\n    @EnableKafka\r\n    @Configuration\r\n    public class KafkaConsumerConfig {\r\n    \r\n    \t@Value(value = &quot;${spring.kafka.properties.bootstrap.servers}&quot;)\r\n    \tprivate String bootstrapAddress;\r\n    \r\n    \t@Bean\r\n    \tpublic ConsumerFactory&lt;String, String&gt; consumerFactory() {\r\n    \t\tfinal Map&lt;String, Object&gt; props = new HashMap&lt;&gt;();\r\n    \t\tprops.put(ConsumerConfig.BOOTSTRAP_SERVERS_CONFIG, bootstrapAddress);\r\n    \t\tprops.put(ConsumerConfig.GROUP_ID_CONFIG, &quot;sales.quotation.quotation.receiver&quot;);\r\n    \t\tprops.put(ConsumerConfig.KEY_DESERIALIZER_CLASS_CONFIG, StringDeserializer.class);\r\n    \t\tprops.put(ConsumerConfig.VALUE_DESERIALIZER_CLASS_CONFIG, StringDeserializer.class);\r\n    \r\n    \t\tprops.put(\r\n    \t\t\t\tSslConfigs.SSL_KEYSTORE_LOCATION_CONFIG,\r\n    \t\t\t\t&quot;path\\\\to\\\\consumer.keystore.jks&quot;);\r\n    \t\tprops.put(SslConfigs.SSL_KEYSTORE_PASSWORD_CONFIG, &quot;password&quot;);\r\n    \t\tprops.put(SslConfigs.SSL_KEY_PASSWORD_CONFIG, &quot;password&quot;);\r\n    \t\tprops.put(\r\n    \t\t\t\tSslConfigs.SSL_TRUSTSTORE_LOCATION_CONFIG,\r\n    \t\t\t\t&quot;path\\\\to\\\\truststore.jks&quot;);\r\n    \t\tprops.put(SslConfigs.SSL_TRUSTSTORE_PASSWORD_CONFIG, &quot;password&quot;);\r\n    \r\n    \t\treturn new DefaultKafkaConsumerFactory&lt;&gt;(props);\r\n    \t}\r\n    \r\n    \t@Bean\r\n    \tpublic ConcurrentKafkaListenerContainerFactory&lt;String, String&gt; kafkaListenerContainerFactory() {\r\n    \t\tfinal ConcurrentKafkaListenerContainerFactory&lt;String, String&gt; factory = new ConcurrentKafkaListenerContainerFactory&lt;&gt;();\r\n    \t\tfactory.setConsumerFactory(consumerFactory());\r\n    \t\treturn factory;\r\n    \t}\r\n    }\r\n\r\nKafkaProucerConfig.java\r\n\r\n    @Configuration\r\n    public class KafkaProducerConfig {\r\n    \r\n    \t@Value(value = &quot;${spring.kafka.properties.bootstrap.servers}&quot;)\r\n    \tprivate String bootstrapAddress;\r\n    \r\n    \t@Bean\r\n    \tpublic ProducerFactory&lt;String, String&gt; producerFactory() {\r\n    \t\tfinal Map&lt;String, Object&gt; configProps = new HashMap&lt;&gt;();\r\n    \t\tconfigProps.put(ProducerConfig.BOOTSTRAP_SERVERS_CONFIG, bootstrapAddress);\r\n    \t\tconfigProps.put(ProducerConfig.KEY_SERIALIZER_CLASS_CONFIG, StringSerializer.class);\r\n    \t\tconfigProps.put(ProducerConfig.VALUE_SERIALIZER_CLASS_CONFIG, StringSerializer.class);\r\n    \r\n    \t\tconfigProps.put(\r\n    \t\t\t\tSslConfigs.SSL_KEYSTORE_LOCATION_CONFIG,\r\n    \t\t\t\t&quot;path\\\\to\\\\producer.keystore.jks&quot;);\r\n    \t\tconfigProps.put(SslConfigs.SSL_KEYSTORE_PASSWORD_CONFIG, &quot;password&quot;);\r\n    \t\tconfigProps.put(SslConfigs.SSL_KEY_PASSWORD_CONFIG, &quot;password&quot;);\r\n    \t\tconfigProps.put(\r\n    \t\t\t\tSslConfigs.SSL_TRUSTSTORE_LOCATION_CONFIG,\r\n    \t\t\t\t&quot;path\\\\to\\\\truststore.jks&quot;);\r\n    \t\tconfigProps.put(SslConfigs.SSL_TRUSTSTORE_PASSWORD_CONFIG, &quot;password&quot;);\r\n    \r\n    \t\treturn new DefaultKafkaProducerFactory&lt;&gt;(configProps);\r\n    \t}\r\n    \r\n    \t@Bean\r\n    \tpublic KafkaTemplate&lt;String, String&gt; kafkaTemplate() {\r\n    \t\treturn new KafkaTemplate&lt;&gt;(producerFactory());\r\n    \t}\r\n    }\r\n\r\nMy application.properties does contain \r\n\r\n    spring.kafka.properties.bootstrap.servers=${KAFKA_BOOTSTRAP_SERVERS}\r\n\r\nwhich is set in a SpringBootTest via \r\n\r\n\tSystem.setProperty(&quot;KAFKA_BOOTSTRAP_SERVERS&quot;, &quot;localhost:9093&quot;);\r\n\r\n\r\nAll certificates are signed with the root CA.\r\nMy docker container starts just fine, but then, when I try to start my Springboot Test, which tries to connect to the broker I get those errors:\r\n\r\n    16:16:48.786 [kafka-admin-client-thread | adminclient-1] INFO  o.apache.kafka.clients.NetworkClient:341 - [AdminClient clientId=adminclient-1] Cancelled in-flight API_VERSIONS request with correlation id 26 due to node -1 being disconnected (elapsed time since creation: 2ms, elapsed time since send: 2ms, request timeout: 3600000ms)\r\n    16:16:48.893 [kafka-admin-client-thread | adminclient-1] INFO  o.apache.kafka.clients.NetworkClient:935 - [AdminClient clientId=adminclient-1] Node -1 disconnected.\r\n\r\n    16:17:42.434 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] INFO  o.apache.kafka.clients.NetworkClient:935 - [Consumer clientId=consumer-sales.quotation.quotation.receiver-1, groupId=sales.quotation.quotation.receiver] Node -1 disconnected.\r\n    16:17:42.434 [kafka-producer-network-thread | producer-1] INFO  o.apache.kafka.clients.NetworkClient:341 - [Producer clientId=producer-1] Cancelled in-flight API_VERSIONS request with correlation id 150 due to node -1 being disconnected (elapsed time since creation: 1ms, elapsed time since send: 1ms, request timeout: 30000ms)\r\n    16:17:42.434 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] INFO  o.apache.kafka.clients.NetworkClient:341 - [Consumer clientId=consumer-sales.quotation.quotation.receiver-1, groupId=sales.quotation.quotation.receiver] Cancelled in-flight API_VERSIONS request with correlation id 153 due to node -1 being disconnected (elapsed time since creation: 2ms, elapsed time since send: 2ms, request timeout: 30000ms)\r\n    16:17:42.434 [kafka-producer-network-thread | producer-1] WARN  o.apache.kafka.clients.NetworkClient:1063 - [Producer clientId=producer-1] Bootstrap broker localhost:9093 (id: -1 rack: null) disconnected\r\n    16:17:42.434 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] WARN  o.apache.kafka.clients.NetworkClient:1063 - [Consumer clientId=consumer-sales.quotation.quotation.receiver-1, groupId=sales.quotation.quotation.receiver] Bootstrap broker localhost:9093 (id: -1 rack: null) disconnected\r\n    16:17:42.542 [kafka-producer-network-thread | producer-1] INFO  o.apache.kafka.clients.NetworkClient:935 - [Producer clientId=producer-1] Node -1 disconnected.\r\n\r\nWhat am I missing here?","title":"Springboot and Kafka (Docker) communication via SSL results in Cancelled in-flight API_VERSIONS request","body":"<p>I do have a very simple Springboot App with a even simpler Kafka Producer and Client, that I try to connect to a Docker Kafka Broker via SSL. Unfortunately I am unable to get it to work. First of all my configuration looks like this:</p>\n<p>docker-compose.yml</p>\n<pre><code>version: '3.1'\n\nservices:\n\n  zookeeper:\n    image: wurstmeister/zookeeper\n    environment:\n      ZOOKEEPER_CLIENT_PORT: 2181\n\n  broker:\n    image: wurstmeister/kafka\n    ports:\n      - 9092:9092\n      - 9093:9093\n    volumes:\n      - ./security:/etc/kafka/secrets\n    environment:\n      KAFKA_LISTENERS: PLAINTEXT://broker:29092,PLAINTEXT_HOST://localhost:9092,TLS://broker:29093,TLS_HOST://localhost:9093\n      KAFKA_ADVERTISED_LISTENERS: PLAINTEXT://broker:29092,PLAINTEXT_HOST://localhost:9092,TLS://broker:29093,TLS_HOST://localhost:9093\n      KAFKA_LISTENER_SECURITY_PROTOCOL_MAP: PLAINTEXT:PLAINTEXT,PLAINTEXT_HOST:PLAINTEXT,TLS:SSL,TLS_HOST:SSL\n      KAFKA_INTER_BROKER_LISTENER_NAME: TLS\n      KAFKA_OFFSETS_TOPIC_REPLICATION_FACTOR: 1\n      KAFKA_TRANSACTION_STATE_LOG_REPLICATION_FACTOR: 1\n      KAFKA_AUTO_CREATE_TOPICS_ENABLE: 'false'\n      KAFKA_ZOOKEEPER_CONNECT: zookeeper:2181\n      KAFKA_SSL_KEYSTORE_LOCATION: /etc/kafka/secrets/broker-keypair.pem\n      KAFKA_SSL_KEY_PASSWORD: password\n      KAFKA_SSL_KEYSTORE_TYPE: PEM\n      KAFKA_SSL_TRUSTSTORE_LOCATION: /etc/kafka/secrets/root.crt\n      KAFKA_SSL_TRUSTSTORE_TYPE: PEM\n      KAFKA_SSL_ENDPOINT_IDENTIFICATION_ALGORITHM: &quot; &quot;\n      KAFKA_SSL_CLIENT_AUTH: &quot;required&quot;\n      KAFKA_ALLOW_EVERYONE_IF_NO_ACL_FOUND: 'true'\n</code></pre>\n<p>KafkaComsumerConfig.java</p>\n<pre><code>@EnableKafka\n@Configuration\npublic class KafkaConsumerConfig {\n\n    @Value(value = &quot;${spring.kafka.properties.bootstrap.servers}&quot;)\n    private String bootstrapAddress;\n\n    @Bean\n    public ConsumerFactory&lt;String, String&gt; consumerFactory() {\n        final Map&lt;String, Object&gt; props = new HashMap&lt;&gt;();\n        props.put(ConsumerConfig.BOOTSTRAP_SERVERS_CONFIG, bootstrapAddress);\n        props.put(ConsumerConfig.GROUP_ID_CONFIG, &quot;sales.quotation.quotation.receiver&quot;);\n        props.put(ConsumerConfig.KEY_DESERIALIZER_CLASS_CONFIG, StringDeserializer.class);\n        props.put(ConsumerConfig.VALUE_DESERIALIZER_CLASS_CONFIG, StringDeserializer.class);\n\n        props.put(\n                SslConfigs.SSL_KEYSTORE_LOCATION_CONFIG,\n                &quot;path\\\\to\\\\consumer.keystore.jks&quot;);\n        props.put(SslConfigs.SSL_KEYSTORE_PASSWORD_CONFIG, &quot;password&quot;);\n        props.put(SslConfigs.SSL_KEY_PASSWORD_CONFIG, &quot;password&quot;);\n        props.put(\n                SslConfigs.SSL_TRUSTSTORE_LOCATION_CONFIG,\n                &quot;path\\\\to\\\\truststore.jks&quot;);\n        props.put(SslConfigs.SSL_TRUSTSTORE_PASSWORD_CONFIG, &quot;password&quot;);\n\n        return new DefaultKafkaConsumerFactory&lt;&gt;(props);\n    }\n\n    @Bean\n    public ConcurrentKafkaListenerContainerFactory&lt;String, String&gt; kafkaListenerContainerFactory() {\n        final ConcurrentKafkaListenerContainerFactory&lt;String, String&gt; factory = new ConcurrentKafkaListenerContainerFactory&lt;&gt;();\n        factory.setConsumerFactory(consumerFactory());\n        return factory;\n    }\n}\n</code></pre>\n<p>KafkaProucerConfig.java</p>\n<pre><code>@Configuration\npublic class KafkaProducerConfig {\n\n    @Value(value = &quot;${spring.kafka.properties.bootstrap.servers}&quot;)\n    private String bootstrapAddress;\n\n    @Bean\n    public ProducerFactory&lt;String, String&gt; producerFactory() {\n        final Map&lt;String, Object&gt; configProps = new HashMap&lt;&gt;();\n        configProps.put(ProducerConfig.BOOTSTRAP_SERVERS_CONFIG, bootstrapAddress);\n        configProps.put(ProducerConfig.KEY_SERIALIZER_CLASS_CONFIG, StringSerializer.class);\n        configProps.put(ProducerConfig.VALUE_SERIALIZER_CLASS_CONFIG, StringSerializer.class);\n\n        configProps.put(\n                SslConfigs.SSL_KEYSTORE_LOCATION_CONFIG,\n                &quot;path\\\\to\\\\producer.keystore.jks&quot;);\n        configProps.put(SslConfigs.SSL_KEYSTORE_PASSWORD_CONFIG, &quot;password&quot;);\n        configProps.put(SslConfigs.SSL_KEY_PASSWORD_CONFIG, &quot;password&quot;);\n        configProps.put(\n                SslConfigs.SSL_TRUSTSTORE_LOCATION_CONFIG,\n                &quot;path\\\\to\\\\truststore.jks&quot;);\n        configProps.put(SslConfigs.SSL_TRUSTSTORE_PASSWORD_CONFIG, &quot;password&quot;);\n\n        return new DefaultKafkaProducerFactory&lt;&gt;(configProps);\n    }\n\n    @Bean\n    public KafkaTemplate&lt;String, String&gt; kafkaTemplate() {\n        return new KafkaTemplate&lt;&gt;(producerFactory());\n    }\n}\n</code></pre>\n<p>My application.properties does contain</p>\n<pre><code>spring.kafka.properties.bootstrap.servers=${KAFKA_BOOTSTRAP_SERVERS}\n</code></pre>\n<p>which is set in a SpringBootTest via</p>\n<pre><code>System.setProperty(&quot;KAFKA_BOOTSTRAP_SERVERS&quot;, &quot;localhost:9093&quot;);\n</code></pre>\n<p>All certificates are signed with the root CA.\nMy docker container starts just fine, but then, when I try to start my Springboot Test, which tries to connect to the broker I get those errors:</p>\n<pre><code>16:16:48.786 [kafka-admin-client-thread | adminclient-1] INFO  o.apache.kafka.clients.NetworkClient:341 - [AdminClient clientId=adminclient-1] Cancelled in-flight API_VERSIONS request with correlation id 26 due to node -1 being disconnected (elapsed time since creation: 2ms, elapsed time since send: 2ms, request timeout: 3600000ms)\n16:16:48.893 [kafka-admin-client-thread | adminclient-1] INFO  o.apache.kafka.clients.NetworkClient:935 - [AdminClient clientId=adminclient-1] Node -1 disconnected.\n\n16:17:42.434 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] INFO  o.apache.kafka.clients.NetworkClient:935 - [Consumer clientId=consumer-sales.quotation.quotation.receiver-1, groupId=sales.quotation.quotation.receiver] Node -1 disconnected.\n16:17:42.434 [kafka-producer-network-thread | producer-1] INFO  o.apache.kafka.clients.NetworkClient:341 - [Producer clientId=producer-1] Cancelled in-flight API_VERSIONS request with correlation id 150 due to node -1 being disconnected (elapsed time since creation: 1ms, elapsed time since send: 1ms, request timeout: 30000ms)\n16:17:42.434 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] INFO  o.apache.kafka.clients.NetworkClient:341 - [Consumer clientId=consumer-sales.quotation.quotation.receiver-1, groupId=sales.quotation.quotation.receiver] Cancelled in-flight API_VERSIONS request with correlation id 153 due to node -1 being disconnected (elapsed time since creation: 2ms, elapsed time since send: 2ms, request timeout: 30000ms)\n16:17:42.434 [kafka-producer-network-thread | producer-1] WARN  o.apache.kafka.clients.NetworkClient:1063 - [Producer clientId=producer-1] Bootstrap broker localhost:9093 (id: -1 rack: null) disconnected\n16:17:42.434 [org.springframework.kafka.KafkaListenerEndpointContainer#0-0-C-1] WARN  o.apache.kafka.clients.NetworkClient:1063 - [Consumer clientId=consumer-sales.quotation.quotation.receiver-1, groupId=sales.quotation.quotation.receiver] Bootstrap broker localhost:9093 (id: -1 rack: null) disconnected\n16:17:42.542 [kafka-producer-network-thread | producer-1] INFO  o.apache.kafka.clients.NetworkClient:935 - [Producer clientId=producer-1] Node -1 disconnected.\n</code></pre>\n<p>What am I missing here?</p>\n"},{"tags":["java","maven","class","intellij-idea","jena"],"comments":[{"owner":{"account_id":11381766,"reputation":452,"user_id":8344485,"display_name":"juwil"},"score":0,"creation_date":1669582076,"post_id":74592347,"comment_id":131668869,"body_markdown":"did you run mvn clean install from the command line directly or via idea?","body":"did you run mvn clean install from the command line directly or via idea?"},{"owner":{"account_id":10904919,"reputation":1,"user_id":8016056,"display_name":"Matt L"},"score":0,"creation_date":1669634414,"post_id":74592347,"comment_id":131679063,"body_markdown":"only in idea. Tried to run it in command line and it shows additional info - class file has wrong version 55.0, should be 52.0 ..so i guess the problem is that this library was compiled in java 11 while i am using java 8. Thank you.","body":"only in idea. Tried to run it in command line and it shows additional info - class file has wrong version 55.0, should be 52.0 ..so i guess the problem is that this library was compiled in java 11 while i am using java 8. Thank you."},{"owner":{"account_id":17835,"reputation":303895,"user_id":40342,"accept_rate":62,"display_name":"Joachim Sauer"},"score":0,"creation_date":1669634671,"post_id":74592347,"comment_id":131679144,"body_markdown":"Note that in IDEA that additional information is almost certainly printed too, but sometimes you have to click on a higher tree element in the &quot;tree of build steps&quot; to the left of the console to see the full output. That nasty detail has hidden many relevant pieces of information from me over the years.","body":"Note that in IDEA that additional information is almost certainly printed too, but sometimes you have to click on a higher tree element in the &quot;tree of build steps&quot; to the left of the console to see the full output. That nasty detail has hidden many relevant pieces of information from me over the years."},{"owner":{"account_id":213468,"reputation":103485,"user_id":466862,"display_name":"Mark Rotteveel"},"score":0,"creation_date":1669636462,"post_id":74592347,"comment_id":131679737,"body_markdown":"If you managed to solve your own question, please don&#39;t add things like _&quot;(resolved)&quot;_ to the question title. Either delete your question (e.g. if it was a typo), or **answer** your own question describing - in detail - how you solved the problem.","body":"If you managed to solve your own question, please don&#39;t add things like <i>&quot;(resolved)&quot;</i> to the question title. Either delete your question (e.g. if it was a typo), or <b>answer</b> your own question describing - in detail - how you solved the problem."},{"owner":{"account_id":394579,"reputation":16420,"user_id":757100,"display_name":"AndyS"},"score":0,"creation_date":1669842007,"post_id":74592347,"comment_id":131737803,"body_markdown":"Apache Jena 4 requires Java11.","body":"Apache Jena 4 requires Java11."}],"owner":{"account_id":10904919,"reputation":1,"user_id":8016056,"display_name":"Matt L"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":195,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1669636398,"creation_date":1669570896,"question_id":74592347,"body_markdown":"Im using apache-jena-libs library version 4.3.2(tried various versions). I&#39;ve imported it as maven pom dependecny\r\n\r\n```\r\n&lt;dependency&gt;\r\n  &lt;groupId&gt;org.apache.jena&lt;/groupId&gt;\r\n  &lt;artifactId&gt;apache-jena-libs&lt;/artifactId&gt;\r\n  &lt;version&gt;4.3.2&lt;/version&gt;\r\n  &lt;type&gt;pom&lt;/type&gt;\r\n&lt;/dependency&gt;\r\n```\r\n\r\nAnd it has successfuly loaded(no errors)\r\n(https://i.stack.imgur.com/h29Gp.png)\r\nimports are fine as well, no errors there\r\n\r\n```\r\nimport org.apache.jena.riot.*;\r\nimport org.apache.jena.graph.*;\r\n```\r\n\r\nbut when I actually use library in code as such:\r\n\r\n```\r\n@Override\r\n    public synchronized void add(Reader reader, String fullFilePath, RDFFormat dataFormat, Resource... contexts) throws IOException, RDFParseException, RepositoryException {\r\n        this.verifyIsOpen();\r\n        this.flushDelayAdd();\r\n//        final boolean useStatementContext = contexts != null &amp;&amp; contexts.length == 0;\r\n        IRI graphIri = (IRI) Arrays.stream(contexts).findFirst().get();\r\n        try {\r\n            Graph gf = Factory.createDefaultGraph();\r\n            org.apache.jena.riot.RDFParser.create()\r\n                    .source(fullFilePath)\r\n                    .forceLang(org.apache.jena.riot.Lang.JSONLD11)\r\n                    .base(graphIri.stringValue())\r\n                    .parse(gf);\r\n            gf.close();\r\n            ...\r\n```\r\n\r\nEverything looks fine but during maven clean-install I get error &quot;cannot access org.apache.jena.graph.Graph&quot;.\r\n\r\n\r\n\r\nThis method is a part of the standart public class(no bean).\r\nIm using Intelij Idea 2022.2.3 (Ultimate Edition) with JDK 1.8 and maven 3.8.1.\r\nThis problem I am encountering is only with this library, tried to search for answers but havent found anything exactly like this. Does anyone have any clue what could be wrong please?","title":"Java - Intelij Idea - Maven build fails on &quot;cannot access *library class* &quot; , but library is imported correctly (org.apache.jen)","body":"<p>Im using apache-jena-libs library version 4.3.2(tried various versions). I've imported it as maven pom dependecny</p>\n<pre><code>&lt;dependency&gt;\n  &lt;groupId&gt;org.apache.jena&lt;/groupId&gt;\n  &lt;artifactId&gt;apache-jena-libs&lt;/artifactId&gt;\n  &lt;version&gt;4.3.2&lt;/version&gt;\n  &lt;type&gt;pom&lt;/type&gt;\n&lt;/dependency&gt;\n</code></pre>\n<p>And it has successfuly loaded(no errors)\n(<a href=\"https://i.stack.imgur.com/h29Gp.png\" rel=\"nofollow noreferrer\">https://i.stack.imgur.com/h29Gp.png</a>)\nimports are fine as well, no errors there</p>\n<pre><code>import org.apache.jena.riot.*;\nimport org.apache.jena.graph.*;\n</code></pre>\n<p>but when I actually use library in code as such:</p>\n<pre><code>@Override\n    public synchronized void add(Reader reader, String fullFilePath, RDFFormat dataFormat, Resource... contexts) throws IOException, RDFParseException, RepositoryException {\n        this.verifyIsOpen();\n        this.flushDelayAdd();\n//        final boolean useStatementContext = contexts != null &amp;&amp; contexts.length == 0;\n        IRI graphIri = (IRI) Arrays.stream(contexts).findFirst().get();\n        try {\n            Graph gf = Factory.createDefaultGraph();\n            org.apache.jena.riot.RDFParser.create()\n                    .source(fullFilePath)\n                    .forceLang(org.apache.jena.riot.Lang.JSONLD11)\n                    .base(graphIri.stringValue())\n                    .parse(gf);\n            gf.close();\n            ...\n</code></pre>\n<p>Everything looks fine but during maven clean-install I get error &quot;cannot access org.apache.jena.graph.Graph&quot;.</p>\n<p>This method is a part of the standart public class(no bean).\nIm using Intelij Idea 2022.2.3 (Ultimate Edition) with JDK 1.8 and maven 3.8.1.\nThis problem I am encountering is only with this library, tried to search for answers but havent found anything exactly like this. Does anyone have any clue what could be wrong please?</p>\n"},{"tags":["java","string","memory-leaks","apache-poi","heap-memory"],"comments":[{"owner":{"account_id":22057425,"reputation":135,"user_id":16320675,"display_name":"user16320675"},"score":2,"creation_date":1669635161,"post_id":74599926,"comment_id":131679293,"body_markdown":"what is the size of `text`?  Actually what is `text`?","body":"what is the size of <code>text</code>?  Actually what is <code>text</code>?"},{"owner":{"account_id":25919934,"reputation":3,"user_id":19642753,"display_name":"Shivansh Nema"},"score":0,"creation_date":1669635515,"post_id":74599926,"comment_id":131679406,"body_markdown":"Consider it a string. Basically calling readAll method of openCSV library which returns String array and I am iterating on each string to convert it into UTF-8 string using new String(text..., StandardCharset(UTF-8), then finally getting a count.","body":"Consider it a string. Basically calling readAll method of openCSV library which returns String array and I am iterating on each string to convert it into UTF-8 string using new String(text..., StandardCharset(UTF-8), then finally getting a count."},{"owner":{"account_id":74704,"reputation":11534,"user_id":214525,"accept_rate":100,"display_name":"f1sh"},"score":0,"creation_date":1669635595,"post_id":74599926,"comment_id":131679437,"body_markdown":"If you just want to count some length, why do you create a new String from a byte[]?","body":"If you just want to count some length, why do you create a new String from a byte[]?"},{"owner":{"account_id":25919934,"reputation":3,"user_id":19642753,"display_name":"Shivansh Nema"},"score":0,"creation_date":1669635777,"post_id":74599926,"comment_id":131679505,"body_markdown":"Actually characters in Strings can be of different languages, so converting to UTF-8 is important, right?","body":"Actually characters in Strings can be of different languages, so converting to UTF-8 is important, right?"}],"answers":[{"tags":[],"owner":{"account_id":17835,"reputation":303895,"user_id":40342,"accept_rate":62,"display_name":"Joachim Sauer"},"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1669635935,"creation_date":1669635935,"answer_id":74600107,"question_id":74599926,"body_markdown":"Assuming `text` is a `String` this code is roughly equivalent to `count +=text.length()`. The difference are mostly:\r\n\r\n- it needlessly requires more memory (and CPU time) by basically encoding the code in the platform default encoding and decoding it again\r\n- if the platform default encoding can&#39;t represent any specific characters in `text`, then those will be replaced with a `?`. If those characters aren&#39;t in the BMP then this can actually result in a decreased length.\r\n\r\nSo it&#39;s arguably strictly worse than just taking the `length()` of text (if the second thing is actually intentional, then there&#39;s more efficient ways to check for that).\r\n\r\nApart from that, the major problem is probably the size of the content of `text`: if it&#39;s a whole file or some other huge junk of data, then keeping it all in memory instead of processing it as a stream will always produce some memory pressure. You &quot;just&quot; increased it with this code, but the fundamental solution is to not keep the whole thing in memory in the first place (which is possible more often than not).","title":"System.String is consuming too much heap memory","body":"<p>Assuming <code>text</code> is a <code>String</code> this code is roughly equivalent to <code>count +=text.length()</code>. The difference are mostly:</p>\n<ul>\n<li>it needlessly requires more memory (and CPU time) by basically encoding the code in the platform default encoding and decoding it again</li>\n<li>if the platform default encoding can't represent any specific characters in <code>text</code>, then those will be replaced with a <code>?</code>. If those characters aren't in the BMP then this can actually result in a decreased length.</li>\n</ul>\n<p>So it's arguably strictly worse than just taking the <code>length()</code> of text (if the second thing is actually intentional, then there's more efficient ways to check for that).</p>\n<p>Apart from that, the major problem is probably the size of the content of <code>text</code>: if it's a whole file or some other huge junk of data, then keeping it all in memory instead of processing it as a stream will always produce some memory pressure. You &quot;just&quot; increased it with this code, but the fundamental solution is to not keep the whole thing in memory in the first place (which is possible more often than not).</p>\n"}],"owner":{"account_id":25919934,"reputation":3,"user_id":19642753,"display_name":"Shivansh Nema"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":177,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"accepted_answer_id":74600107,"answer_count":1,"score":-1,"last_activity_date":1669635935,"creation_date":1669635007,"question_id":74599926,"body_markdown":"Consider the below code in any method. \r\n\r\n`count += new String(text.getBytes()).length()`\r\n\r\nI am facing memory issue. \r\n\r\n\r\nI am using this to count number of characters in file. When I am fetching heap dump I am getting huge amount of memory occupied by String Objects. Is it because of this line of code? I am just looking for suggestions. ","title":"System.String is consuming too much heap memory","body":"<p>Consider the below code in any method.</p>\n<p><code>count += new String(text.getBytes()).length()</code></p>\n<p>I am facing memory issue.</p>\n<p>I am using this to count number of characters in file. When I am fetching heap dump I am getting huge amount of memory occupied by String Objects. Is it because of this line of code? I am just looking for suggestions.</p>\n"},{"tags":["java","parallel-processing","java-stream"],"comments":[{"owner":{"account_id":230291,"reputation":6812,"user_id":493804,"accept_rate":88,"display_name":"Barkermn01"},"score":0,"creation_date":1669521237,"post_id":74587346,"comment_id":131658182,"body_markdown":"This is because of a race condition, you need to actually understand parallel computing, we also have to know this stuff for HPC workloads, you should never rely on data being altered by threads without using locks https://www.baeldung.com/java-concurrent-locks","body":"This is because of a race condition, you need to actually understand parallel computing, we also have to know this stuff for HPC workloads, you should never rely on data being altered by threads without using locks <a href=\"https://www.baeldung.com/java-concurrent-locks\" rel=\"nofollow noreferrer\">baeldung.com/java-concurrent-locks</a>"}],"answers":[{"tags":[],"owner":{"account_id":230291,"reputation":6812,"user_id":493804,"accept_rate":88,"display_name":"Barkermn01"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1669521524,"creation_date":1669521524,"answer_id":74587400,"question_id":74587346,"body_markdown":"So the reason this happens is because of what is called race conditions CPU even many threaded ones are running more processes than just your applications processes so it could parse and instruction evaluate it and then have to jump off to do something for the OS and then come back and another parallel process for your application has managed to get past it because the core / hyper-thread has not been stolen from its job.\r\n\r\nyou can read about race conditions in books like: https://link.springer.com/referenceworkentry/10.1007/978-0-387-09766-4_36\r\n\r\nBut what you&#39;re supposed to do to prevent this is implemented locks on the memory you&#39;re altering, in Java you want to look at `java.util.concurrent.Locks` https://www.baeldung.com/java-concurrent-locks","title":"Why does list.size change when executing java parallel stream?","body":"<p>So the reason this happens is because of what is called race conditions CPU even many threaded ones are running more processes than just your applications processes so it could parse and instruction evaluate it and then have to jump off to do something for the OS and then come back and another parallel process for your application has managed to get past it because the core / hyper-thread has not been stolen from its job.</p>\n<p>you can read about race conditions in books like: <a href=\"https://link.springer.com/referenceworkentry/10.1007/978-0-387-09766-4_36\" rel=\"nofollow noreferrer\">https://link.springer.com/referenceworkentry/10.1007/978-0-387-09766-4_36</a></p>\n<p>But what you're supposed to do to prevent this is implemented locks on the memory you're altering, in Java you want to look at <code>java.util.concurrent.Locks</code> <a href=\"https://www.baeldung.com/java-concurrent-locks\" rel=\"nofollow noreferrer\">https://www.baeldung.com/java-concurrent-locks</a></p>\n"},{"tags":[],"owner":{"account_id":23959668,"reputation":26587,"user_id":17949945,"display_name":"Alexander Ivanchenko"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1669635200,"creation_date":1669558381,"answer_id":74590723,"question_id":74587346,"body_markdown":"***Note** that the problem itself is slightly artificial, because it&#39;s not very likely to get a significant performance gain by parallelizing this task.*\r\n\r\n# Issues Explained\r\n\r\nYour code accumulates the result by operating via side-effects which is **discouraged** by the [*Stream API documentation*][side-effects].\r\n\r\nAnd you&#39;ve stumbled on the very first bullet point from the link above:\r\n\r\n&gt; ... there are **no guarantees** as to:\r\n&gt; \r\n&gt;  * the visibility of those side-effects to other threads;\r\n\r\n`ArrayList` is not a thread-safe Collection, and as a consequence each thread is not guaranteed to observe the same state of the list.\r\n\r\nAlso, note that `map()` operation (*and all it&#39;s flavors*) is not intended to perform side-effects and it&#39;s function according to the [documentation][map] should be **stateless**:\r\n\r\n&gt; `mapper` - a non-interfering, **stateless function** to apply to each element\r\n\r\nIn this case, the correct way to incorporate from processing the previous stream elements would be to define a [`Collector`][collector].\r\n\r\nFor that we would need to define a mutable container which would hold a list \r\n\r\nIn a nut-shell, Collector can be implemented as concurrent (*i.e. optimized for a multithreaded environment, so that all the threads are updating the same mutable container*) or non-concurrent (*each thread creates its own instance of the mutable container and populates it, then results produces by each thread are getting merged*).\r\n\r\nIn order to implement a concurrent Collector, we need to provide a thread-safe mutable container and specify a characteristic `CONCURRENT`. If take a look at the implementations of the `List` interface, you&#39;ll find out that the only options that JDK offers are `CopyOnWriteArrayList` and outdated `Verctor`.\r\n\r\n`CopyOnWriteArrayList` would be a terrible choice since under the hood it would create a new list with every added element, that&#39;s a recipe on how to get an `OutOfMemoryError`. This Collection is not suitable for frequent updates.\r\n\r\nAnd if we would use a synchronized `List` it would buy anything in terms of performance, because threads would **not** be able to operate on this list simultaneously. While one thread is adding an element, the others are blocked. In fact, it would be **slower** than processing the data **sequentially**, because synchronization has a cost.\r\n\r\n*For that reason, Locking suggested in another answer would only allow to get a correct result, but you would not be able to benefit from the parallel execution.*\r\n\r\nWhat we can do is create a non-concurrent Collector (*i.e. a collector that uses a non-thread-safe container*) based on a plain `ArrayList` (*it still would be able to be used with a parallel stream, each thread would act independently on a separate container without locking and running into concurrency-related issues*).\r\n\r\n# Non-concurrent Collector\r\n\r\nFirstly, we need to define a custom accumulation type that encapsulates the `ArrayList` and the `sum` of consumed elements.\r\n\r\nAnd in order to create a Collector, we need to use static method [`Collector.of()`][collectorOf].\r\n\r\n*Collector:*\r\n\r\n    public static Collector&lt;Integer, ?, IntSumContainer&gt; toParallelIntSumContainer(int limit) {\r\n        \r\n        return Collector.of(\r\n            () -&gt; new IntSumContainer(limit),\r\n            IntSumContainer::accept,\r\n            IntSumContainer::merge\r\n        );\r\n    }\r\n\r\n*Custom accumulation type:*\r\n\r\n    public class IntSumContainer implements IntConsumer {\r\n        private int sum;\r\n        private List&lt;Integer&gt; list = new ArrayList&lt;&gt;();\r\n        private final int limit;\r\n    \r\n        public IntSumContainer(int limit) {\r\n            this.limit = limit;\r\n        }\r\n    \r\n        @Override\r\n        public void accept(int value) {\r\n            if (list.size() &lt; limit) {\r\n                list.add(value);\r\n                sum += value;\r\n            }\r\n        }\r\n        \r\n        public IntSumContainer merge(IntSumContainer other) {\r\n            other.list.stream().limit(limit - list.size()).forEach(this::accept); // there couldn&#39;t be issues related to concurrent access in the case, hence performing side-effects via forEach is safe \r\n            return this;\r\n        }\r\n        \r\n        // getters\r\n    }\r\n\r\n*Usage example:*\r\n\r\n```\r\nList&lt;Integer&gt; source = List.of(1, 2, 3, 4, 5, 6);\r\n\r\nIntSumContainer result = s.parallelStream()\r\n    .collect(toIntSumContainer(3));\r\n\r\nList&lt;Integer&gt; list = result.getList();\r\nint sum = result.getSum();\r\n\r\nSystem.out.println(list);\r\nSystem.out.println(sum);\r\n```\r\n\r\n*Output:*\r\n\r\n```\r\n[1, 2, 3]\r\n6\r\n```\r\n\r\n# Concurrent Collector\r\n\r\nSince you&#39;re using as a stream source a `HashSet`, which produces an **unordered** stream, probably it might be not important which elements would be present in the resulting collection and would contribute to the resulting sum. And since you were using a Set, you might be fine with getting a Set as a result as well.\r\n\r\nIn this case we can make use of the concurrent HashSet which is provided by the JDK in the form of a view over the keys of the `ConcurrentHashMap` and can be obtained via static method [`ConcurrentHashMap.newKeySet()`][newKeySet]. The implementation of `ConcurrentHashMap` is **lock-free**.\r\n\r\nTo accumulate the sum concurrently, we can use a [`LongAdder`][longAdder] which is more performant than `AtomicLong` when frequent updates are required because of not being synchronized (which is the case here).\r\n\r\nLike in the previous example, a custom accumulation type would  encapsulate the `Set` and the `sum` of consumed elements.\r\n\r\nWhile defining collector, in order to make it concurrent we need to specify the characteristic `CONCURRENT`, and `UNORDERED` would also be handy since we stated that the ordering is not important.\r\n\r\n*Collector:*\r\n\r\n    public static Collector&lt;Integer, ?, ConcurrentIntSumContainer&gt; toConcurrentIntSumContainer(int limit) {\r\n        \r\n        return Collector.of(\r\n            () -&gt; new ConcurrentIntSumContainer(limit),\r\n            ConcurrentIntSumContainer::accept,\r\n            (left, right) -&gt; { throw new AssertionError(&quot;merge function is not expected be called by the Parallel collector&quot;); },\r\n            Collector.Characteristics.UNORDERED, Collector.Characteristics.CONCURRENT\r\n        );\r\n    }\r\n\r\n*Custom accumulation type:*\r\n\r\n    public class ConcurrentIntSumContainer implements IntConsumer {\r\n        private LongAdder sum = new LongAdder();\r\n        private Set&lt;Integer&gt; set = ConcurrentHashMap.newKeySet();\r\n        private final int limit;\r\n        \r\n        public ConcurrentIntSumContainer(int limit) {\r\n            this.limit = limit;\r\n        }\r\n        \r\n        @Override\r\n        public void accept(int value) {\r\n            if (set.size() &lt; limit &amp;&amp; set.add(value)) {\r\n                sum.add(value);\r\n            }\r\n        }\r\n        \r\n        public Set&lt;Integer&gt; getSet() {\r\n            return new HashSet&lt;&gt;(set); // because a general purpose set is faster than concurrent set\r\n        }\r\n        \r\n        public long getSum() {\r\n            return sum.sum();\r\n        }\r\n    }\r\n\r\n*Usage example:*\r\n\r\n```\r\nList&lt;Integer&gt; source = List.of(1, 2, 3, 4, 5, 6);\r\n\r\nConcurrentIntSumContainer result1 = source.parallelStream()\r\n    .collect(toConcurrentIntSumContainer(3));\r\n    \r\nSet&lt;Integer&gt; set = result1.getSet();\r\nlong sum = result1.getSum();\r\n    \r\nSystem.out.println(set);\r\nSystem.out.println(sum);\r\n```\r\n\r\n*Output:*\r\n\r\n```\r\n[1, 4, 5]\r\n10\r\n```\r\n\r\n\r\n\r\n   [side-effects]: https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/stream/package-summary.html#SideEffects\r\n\r\n   [map]: https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/stream/Stream.html#mapToInt(java.util.function.ToIntFunction)\r\n\r\n   [collector]: https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/stream/Collector.html\r\n\r\n   [collectorOf]: https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/stream/Collector.html#of(java.util.function.Supplier,java.util.function.BiConsumer,java.util.function.BinaryOperator,java.util.stream.Collector.Characteristics...)\r\n\r\n   [newKeySet]: https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/concurrent/ConcurrentHashMap.html#newKeySet(int)\r\n\r\n   [longAdder]: https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/concurrent/atomic/LongAdder.html","title":"Why does list.size change when executing java parallel stream?","body":"<p><em><strong>Note</strong> that the problem itself is slightly artificial, because it's not very likely to get a significant performance gain by parallelizing this task.</em></p>\n<h1>Issues Explained</h1>\n<p>Your code accumulates the result by operating via side-effects which is <strong>discouraged</strong> by the <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/stream/package-summary.html#SideEffects\" rel=\"nofollow noreferrer\"><em>Stream API documentation</em></a>.</p>\n<p>And you've stumbled on the very first bullet point from the link above:</p>\n<blockquote>\n<p>... there are <strong>no guarantees</strong> as to:</p>\n<ul>\n<li>the visibility of those side-effects to other threads;</li>\n</ul>\n</blockquote>\n<p><code>ArrayList</code> is not a thread-safe Collection, and as a consequence each thread is not guaranteed to observe the same state of the list.</p>\n<p>Also, note that <code>map()</code> operation (<em>and all it's flavors</em>) is not intended to perform side-effects and it's function according to the <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/stream/Stream.html#mapToInt(java.util.function.ToIntFunction)\" rel=\"nofollow noreferrer\">documentation</a> should be <strong>stateless</strong>:</p>\n<blockquote>\n<p><code>mapper</code> - a non-interfering, <strong>stateless function</strong> to apply to each element</p>\n</blockquote>\n<p>In this case, the correct way to incorporate from processing the previous stream elements would be to define a <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/stream/Collector.html\" rel=\"nofollow noreferrer\"><code>Collector</code></a>.</p>\n<p>For that we would need to define a mutable container which would hold a list</p>\n<p>In a nut-shell, Collector can be implemented as concurrent (<em>i.e. optimized for a multithreaded environment, so that all the threads are updating the same mutable container</em>) or non-concurrent (<em>each thread creates its own instance of the mutable container and populates it, then results produces by each thread are getting merged</em>).</p>\n<p>In order to implement a concurrent Collector, we need to provide a thread-safe mutable container and specify a characteristic <code>CONCURRENT</code>. If take a look at the implementations of the <code>List</code> interface, you'll find out that the only options that JDK offers are <code>CopyOnWriteArrayList</code> and outdated <code>Verctor</code>.</p>\n<p><code>CopyOnWriteArrayList</code> would be a terrible choice since under the hood it would create a new list with every added element, that's a recipe on how to get an <code>OutOfMemoryError</code>. This Collection is not suitable for frequent updates.</p>\n<p>And if we would use a synchronized <code>List</code> it would buy anything in terms of performance, because threads would <strong>not</strong> be able to operate on this list simultaneously. While one thread is adding an element, the others are blocked. In fact, it would be <strong>slower</strong> than processing the data <strong>sequentially</strong>, because synchronization has a cost.</p>\n<p><em>For that reason, Locking suggested in another answer would only allow to get a correct result, but you would not be able to benefit from the parallel execution.</em></p>\n<p>What we can do is create a non-concurrent Collector (<em>i.e. a collector that uses a non-thread-safe container</em>) based on a plain <code>ArrayList</code> (<em>it still would be able to be used with a parallel stream, each thread would act independently on a separate container without locking and running into concurrency-related issues</em>).</p>\n<h1>Non-concurrent Collector</h1>\n<p>Firstly, we need to define a custom accumulation type that encapsulates the <code>ArrayList</code> and the <code>sum</code> of consumed elements.</p>\n<p>And in order to create a Collector, we need to use static method <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/stream/Collector.html#of(java.util.function.Supplier,java.util.function.BiConsumer,java.util.function.BinaryOperator,java.util.stream.Collector.Characteristics...)\" rel=\"nofollow noreferrer\"><code>Collector.of()</code></a>.</p>\n<p><em>Collector:</em></p>\n<pre><code>public static Collector&lt;Integer, ?, IntSumContainer&gt; toParallelIntSumContainer(int limit) {\n    \n    return Collector.of(\n        () -&gt; new IntSumContainer(limit),\n        IntSumContainer::accept,\n        IntSumContainer::merge\n    );\n}\n</code></pre>\n<p><em>Custom accumulation type:</em></p>\n<pre><code>public class IntSumContainer implements IntConsumer {\n    private int sum;\n    private List&lt;Integer&gt; list = new ArrayList&lt;&gt;();\n    private final int limit;\n\n    public IntSumContainer(int limit) {\n        this.limit = limit;\n    }\n\n    @Override\n    public void accept(int value) {\n        if (list.size() &lt; limit) {\n            list.add(value);\n            sum += value;\n        }\n    }\n    \n    public IntSumContainer merge(IntSumContainer other) {\n        other.list.stream().limit(limit - list.size()).forEach(this::accept); // there couldn't be issues related to concurrent access in the case, hence performing side-effects via forEach is safe \n        return this;\n    }\n    \n    // getters\n}\n</code></pre>\n<p><em>Usage example:</em></p>\n<pre><code>List&lt;Integer&gt; source = List.of(1, 2, 3, 4, 5, 6);\n\nIntSumContainer result = s.parallelStream()\n    .collect(toIntSumContainer(3));\n\nList&lt;Integer&gt; list = result.getList();\nint sum = result.getSum();\n\nSystem.out.println(list);\nSystem.out.println(sum);\n</code></pre>\n<p><em>Output:</em></p>\n<pre><code>[1, 2, 3]\n6\n</code></pre>\n<h1>Concurrent Collector</h1>\n<p>Since you're using as a stream source a <code>HashSet</code>, which produces an <strong>unordered</strong> stream, probably it might be not important which elements would be present in the resulting collection and would contribute to the resulting sum. And since you were using a Set, you might be fine with getting a Set as a result as well.</p>\n<p>In this case we can make use of the concurrent HashSet which is provided by the JDK in the form of a view over the keys of the <code>ConcurrentHashMap</code> and can be obtained via static method <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/concurrent/ConcurrentHashMap.html#newKeySet(int)\" rel=\"nofollow noreferrer\"><code>ConcurrentHashMap.newKeySet()</code></a>. The implementation of <code>ConcurrentHashMap</code> is <strong>lock-free</strong>.</p>\n<p>To accumulate the sum concurrently, we can use a <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/concurrent/atomic/LongAdder.html\" rel=\"nofollow noreferrer\"><code>LongAdder</code></a> which is more performant than <code>AtomicLong</code> when frequent updates are required because of not being synchronized (which is the case here).</p>\n<p>Like in the previous example, a custom accumulation type would  encapsulate the <code>Set</code> and the <code>sum</code> of consumed elements.</p>\n<p>While defining collector, in order to make it concurrent we need to specify the characteristic <code>CONCURRENT</code>, and <code>UNORDERED</code> would also be handy since we stated that the ordering is not important.</p>\n<p><em>Collector:</em></p>\n<pre><code>public static Collector&lt;Integer, ?, ConcurrentIntSumContainer&gt; toConcurrentIntSumContainer(int limit) {\n    \n    return Collector.of(\n        () -&gt; new ConcurrentIntSumContainer(limit),\n        ConcurrentIntSumContainer::accept,\n        (left, right) -&gt; { throw new AssertionError(&quot;merge function is not expected be called by the Parallel collector&quot;); },\n        Collector.Characteristics.UNORDERED, Collector.Characteristics.CONCURRENT\n    );\n}\n</code></pre>\n<p><em>Custom accumulation type:</em></p>\n<pre><code>public class ConcurrentIntSumContainer implements IntConsumer {\n    private LongAdder sum = new LongAdder();\n    private Set&lt;Integer&gt; set = ConcurrentHashMap.newKeySet();\n    private final int limit;\n    \n    public ConcurrentIntSumContainer(int limit) {\n        this.limit = limit;\n    }\n    \n    @Override\n    public void accept(int value) {\n        if (set.size() &lt; limit &amp;&amp; set.add(value)) {\n            sum.add(value);\n        }\n    }\n    \n    public Set&lt;Integer&gt; getSet() {\n        return new HashSet&lt;&gt;(set); // because a general purpose set is faster than concurrent set\n    }\n    \n    public long getSum() {\n        return sum.sum();\n    }\n}\n</code></pre>\n<p><em>Usage example:</em></p>\n<pre><code>List&lt;Integer&gt; source = List.of(1, 2, 3, 4, 5, 6);\n\nConcurrentIntSumContainer result1 = source.parallelStream()\n    .collect(toConcurrentIntSumContainer(3));\n    \nSet&lt;Integer&gt; set = result1.getSet();\nlong sum = result1.getSum();\n    \nSystem.out.println(set);\nSystem.out.println(sum);\n</code></pre>\n<p><em>Output:</em></p>\n<pre><code>[1, 4, 5]\n10\n</code></pre>\n"}],"owner":{"account_id":27058944,"reputation":11,"user_id":20611237,"display_name":"Powerful_Coder"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":235,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":2,"score":1,"last_activity_date":1669635200,"creation_date":1669520727,"question_id":74587346,"body_markdown":"Consider the following code:\r\n\r\n    static void statefullParallelLambdaSet() {\r\n        Set&lt;Integer&gt; s = new HashSet&lt;&gt;(\r\n            Arrays.asList(1, 2, 3, 4, 5, 6)\r\n        );\r\n        \r\n        List&lt;Integer&gt; list = new ArrayList&lt;&gt;();\r\n        int sum = s.parallelStream().mapToInt(e -&gt; {    // pipeline start\r\n            if (list.size() &lt;= 3) {     // list.size() changes while the pipeline operation is executing.\r\n                list.add(e);            // mapToInt&#39;s lambda expression depends on this value, so it&#39;s stateful.\r\n                return e;\r\n            }\r\n            else return 0;\r\n        }).sum();   // terminal operation\r\n\r\n        System.out.println(sum);\r\n    }\r\n\r\nIn the code above, it says that `list.size()` changes while the pipe operation is running, but I don&#39;t understand.\r\n\r\nSince `list.add(e)` is executed at once in multiple threads because it is executed in parallel, is it correct to assume that the value changes each time it is executed?\r\n\r\nThe reason why the value changes even if it is executed as a serial stream is that there is no order because it is a set, so the number drawn is different each time it is executed...\r\n\r\nAm I right?","title":"Why does list.size change when executing java parallel stream?","body":"<p>Consider the following code:</p>\n<pre><code>static void statefullParallelLambdaSet() {\n    Set&lt;Integer&gt; s = new HashSet&lt;&gt;(\n        Arrays.asList(1, 2, 3, 4, 5, 6)\n    );\n    \n    List&lt;Integer&gt; list = new ArrayList&lt;&gt;();\n    int sum = s.parallelStream().mapToInt(e -&gt; {    // pipeline start\n        if (list.size() &lt;= 3) {     // list.size() changes while the pipeline operation is executing.\n            list.add(e);            // mapToInt's lambda expression depends on this value, so it's stateful.\n            return e;\n        }\n        else return 0;\n    }).sum();   // terminal operation\n\n    System.out.println(sum);\n}\n</code></pre>\n<p>In the code above, it says that <code>list.size()</code> changes while the pipe operation is running, but I don't understand.</p>\n<p>Since <code>list.add(e)</code> is executed at once in multiple threads because it is executed in parallel, is it correct to assume that the value changes each time it is executed?</p>\n<p>The reason why the value changes even if it is executed as a serial stream is that there is no order because it is a set, so the number drawn is different each time it is executed...</p>\n<p>Am I right?</p>\n"},{"tags":["java","spring","spring-boot","mapstruct"],"comments":[{"owner":{"account_id":14162458,"reputation":3900,"user_id":10231374,"display_name":"Toni"},"score":0,"creation_date":1669554376,"post_id":74590120,"comment_id":131662845,"body_markdown":"Make sure you added [maven-compiler-plugin](https://www.baeldung.com/mapstruct#Maven) to your `pom.xml`.","body":"Make sure you added <a href=\"https://www.baeldung.com/mapstruct#Maven\" rel=\"nofollow noreferrer\">maven-compiler-plugin</a> to your <code>pom.xml</code>."},{"owner":{"account_id":9763630,"reputation":16595,"user_id":7237884,"display_name":"Panagiotis Bougioukos"},"score":0,"creation_date":1669566206,"post_id":74590120,"comment_id":131665301,"body_markdown":"@Wesquel add your `pom.xml` to inspect for errors there","body":"@Wesquel add your <code>pom.xml</code> to inspect for errors there"},{"owner":{"account_id":17109114,"reputation":33,"user_id":12406838,"display_name":"Wesquel"},"score":0,"creation_date":1669574094,"post_id":74590120,"comment_id":131667106,"body_markdown":"thank you @birca123 my problem was solved with your comment. The problem was that this dependency was missing in my pom.xml.","body":"thank you @birca123 my problem was solved with your comment. The problem was that this dependency was missing in my pom.xml."},{"owner":{"account_id":2486870,"reputation":685,"user_id":2165146,"display_name":"muhammed ozbilici"},"score":0,"creation_date":1669583864,"post_id":74590120,"comment_id":131669190,"body_markdown":"@birca123 how this can be related ? interesting ...","body":"@birca123 how this can be related ? interesting ..."},{"owner":{"account_id":14162458,"reputation":3900,"user_id":10231374,"display_name":"Toni"},"score":0,"creation_date":1669589491,"post_id":74590120,"comment_id":131670217,"body_markdown":"@muhammedozbilici If a mapper bean is not found in this case, probably the mapper wasn&#39;t even generated, which means mapstruct-processor is missing and should be added to maven-compiler-pugin.","body":"@muhammedozbilici If a mapper bean is not found in this case, probably the mapper wasn&#39;t even generated, which means mapstruct-processor is missing and should be added to maven-compiler-pugin."}],"answers":[{"tags":[],"owner":{"account_id":20086792,"reputation":144,"user_id":14728164,"display_name":"Vishwajit Rahatal"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1669554077,"creation_date":1669554077,"answer_id":74590239,"question_id":74590120,"body_markdown":"Try adding @Component annotation to your BetMapper class.","title":"Spring Boot Mapper no accept Autowired","body":"<p>Try adding @Component annotation to your BetMapper class.</p>\n"},{"tags":[],"owner":{"account_id":14801365,"reputation":376,"user_id":15322661,"display_name":"Rustam"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1669574648,"creation_date":1669574648,"answer_id":74592828,"question_id":74590120,"body_markdown":" 1. Looks like Mapper is not working now. I am not sure, but looks like here incorrect usage, there is no param `bet` in ` betResquetToEntity`\r\ninstead of `@Mapping(target = &quot;bet.id&quot;, source = &quot;betId&quot;)` \r\nshould be `@Mapping(target = &quot;id&quot;, source = &quot;betRequest.betId&quot;)`\r\n\r\n 2. Check `mapstruct-processor` is added to your `maven-compiler-plugin`\r\n    in `plugin` section [link][1]\r\n\r\n  [1]: https://mapstruct.org/documentation/installation/","title":"Spring Boot Mapper no accept Autowired","body":"<ol>\n<li><p>Looks like Mapper is not working now. I am not sure, but looks like here incorrect usage, there is no param <code>bet</code> in <code> betResquetToEntity</code>\ninstead of <code>@Mapping(target = &quot;bet.id&quot;, source = &quot;betId&quot;)</code>\nshould be <code>@Mapping(target = &quot;id&quot;, source = &quot;betRequest.betId&quot;)</code></p>\n</li>\n<li><p>Check <code>mapstruct-processor</code> is added to your <code>maven-compiler-plugin</code>\nin <code>plugin</code> section <a href=\"https://mapstruct.org/documentation/installation/\" rel=\"nofollow noreferrer\">link</a></p>\n</li>\n</ol>\n"}],"owner":{"account_id":17109114,"reputation":33,"user_id":12406838,"display_name":"Wesquel"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":577,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":74592828,"answer_count":2,"score":2,"last_activity_date":1669634776,"creation_date":1669553107,"question_id":74590120,"body_markdown":"I&#39;m trying to create a betting API, and I&#39;ve now discovered a way to minimize the code rework with Mapper, but I&#39;m not understanding the problem I&#39;m having in the code.\r\n\r\nERROR:\r\n```\r\n***************************\r\nAPPLICATION FAILED TO START\r\n***************************\r\n\r\nDescription:\r\n\r\nParameter 1 of constructor in api.loteria.loteriaapi.services.Mysql.BetServiceMysql required a bean of type &#39;api.loteria.loteriaapi.dtos.mappers.BetMapper&#39; that could not be found.\r\n\r\nThe injection point has the following annotations:\r\n        - @org.springframework.beans.factory.annotation.Autowired(required=true)\r\n\r\n\r\nAction:\r\n\r\nConsider defining a bean of type &#39;api.loteria.loteriaapi.dtos.mappers.BetMapper&#39; in your configuration.\r\n```\r\nBetMapper.Java\r\n\r\n```java\r\n@Mapper(componentModel = &quot;spring&quot;)\r\npublic interface BetMapper {\r\n    @Mapping(target = &quot;bet.id&quot;, source = &quot;betId&quot;)\r\n    Bet betResquetToEntity(BetRequest betRequest);\r\n\r\n    @Mapping(source = &quot;bet.id&quot;, target = &quot;betId&quot;)\r\n    BetResponse entityToBetResponse(Bet bet);\r\n}\r\n```\r\nBetServiceMysql.java\r\n\r\n\r\n```java\r\n@Service\r\n@AllArgsConstructor(onConstructor = @__(@Autowired))\r\npublic class BetServiceMysql implements BetService {\r\n\r\n    private BetRepository betRepository;\r\n    private BetMapper betMapper;\r\n\r\n    @Override\r\n    public List&lt;BetResponse&gt; list() {\r\n        List&lt;Bet&gt; bets = betRepository.findAll();\r\n        return bets.stream().map(bet -&gt; betMapper.entityToBetResponse(bet)).collect(Collectors.toList());\r\n    }\r\n\r\n    @Override\r\n    public BetResponse save(BetRequest betRequest) {\r\n        Bet bet = betMapper.betResquetToEntity(betRequest);\r\n        try {\r\n            betRepository.save(bet);\r\n        }catch(RuntimeException e){\r\n            throw new DataIntegrityViolationException(e.getMessage());\r\n        }\r\n        return betMapper.entityToBetResponse(bet);\r\n    }\r\n\r\n    @Override\r\n    public BetResponse update(Long id, BetRequest betRequest) {\r\n        Bet bet = verifyIfExist(id);\r\n        updateData(bet, betRequest);\r\n        betRepository.save(bet);\r\n        return betMapper.entityToBetResponse(bet);\r\n    }\r\n\r\n    @Override\r\n    public BetResponse delete(Long id) {\r\n        Bet bet = verifyIfExist(id);\r\n        betRepository.delete(bet);\r\n        return betMapper.entityToBetResponse(bet);\r\n    }\r\n\r\n    @Override\r\n    public BetResponse getBetById(Long id) {\r\n        // TODO Auto-generated method stub\r\n        return null;\r\n    }\r\n\r\n    @Override\r\n    public List&lt;BetResponse&gt; getBets() {\r\n        // TODO Auto-generated method stub\r\n        return null;\r\n    }\r\n\r\n    protected Bet verifyIfExist(Long id){\r\n        return betRepository.findById(id).orElseThrow(() -&gt; new EntityNotFoundException(String.format(&quot;ID: %s || N&#227;o foi encontrado nenhuma entidade para o id fornecido&quot;, id)));\r\n    }\r\n\r\n    protected void updateData(Bet bet, BetRequest betRequest){\r\n        bet.setMaxNumbersByUsers(betRequest.getMaxNumbersByUsers());\r\n    }\r\n\r\n}\r\n```\r\nBetService.java\r\n\r\n\r\n```java\r\npublic interface BetService {\r\n    List&lt;BetResponse&gt; list();\r\n    BetResponse save(BetRequest betRequest);\r\n    BetResponse update(Long id, BetRequest betRequest);\r\n    BetResponse delete(Long id);\r\n    BetResponse getBetById(Long id);\r\n    List&lt;BetResponse&gt; getBets();\r\n}\r\n```\r\n\r\n\r\n\r\n\r\nI tried removing `@Autowired` from Mapper, the code runs, but when a new bet is inserted there is another error from Mapper being `null`.","title":"Spring Boot Mapper no accept Autowired","body":"<p>I'm trying to create a betting API, and I've now discovered a way to minimize the code rework with Mapper, but I'm not understanding the problem I'm having in the code.</p>\n<p>ERROR:</p>\n<pre><code>***************************\nAPPLICATION FAILED TO START\n***************************\n\nDescription:\n\nParameter 1 of constructor in api.loteria.loteriaapi.services.Mysql.BetServiceMysql required a bean of type 'api.loteria.loteriaapi.dtos.mappers.BetMapper' that could not be found.\n\nThe injection point has the following annotations:\n        - @org.springframework.beans.factory.annotation.Autowired(required=true)\n\n\nAction:\n\nConsider defining a bean of type 'api.loteria.loteriaapi.dtos.mappers.BetMapper' in your configuration.\n</code></pre>\n<p>BetMapper.Java</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Mapper(componentModel = &quot;spring&quot;)\npublic interface BetMapper {\n    @Mapping(target = &quot;bet.id&quot;, source = &quot;betId&quot;)\n    Bet betResquetToEntity(BetRequest betRequest);\n\n    @Mapping(source = &quot;bet.id&quot;, target = &quot;betId&quot;)\n    BetResponse entityToBetResponse(Bet bet);\n}\n</code></pre>\n<p>BetServiceMysql.java</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Service\n@AllArgsConstructor(onConstructor = @__(@Autowired))\npublic class BetServiceMysql implements BetService {\n\n    private BetRepository betRepository;\n    private BetMapper betMapper;\n\n    @Override\n    public List&lt;BetResponse&gt; list() {\n        List&lt;Bet&gt; bets = betRepository.findAll();\n        return bets.stream().map(bet -&gt; betMapper.entityToBetResponse(bet)).collect(Collectors.toList());\n    }\n\n    @Override\n    public BetResponse save(BetRequest betRequest) {\n        Bet bet = betMapper.betResquetToEntity(betRequest);\n        try {\n            betRepository.save(bet);\n        }catch(RuntimeException e){\n            throw new DataIntegrityViolationException(e.getMessage());\n        }\n        return betMapper.entityToBetResponse(bet);\n    }\n\n    @Override\n    public BetResponse update(Long id, BetRequest betRequest) {\n        Bet bet = verifyIfExist(id);\n        updateData(bet, betRequest);\n        betRepository.save(bet);\n        return betMapper.entityToBetResponse(bet);\n    }\n\n    @Override\n    public BetResponse delete(Long id) {\n        Bet bet = verifyIfExist(id);\n        betRepository.delete(bet);\n        return betMapper.entityToBetResponse(bet);\n    }\n\n    @Override\n    public BetResponse getBetById(Long id) {\n        // TODO Auto-generated method stub\n        return null;\n    }\n\n    @Override\n    public List&lt;BetResponse&gt; getBets() {\n        // TODO Auto-generated method stub\n        return null;\n    }\n\n    protected Bet verifyIfExist(Long id){\n        return betRepository.findById(id).orElseThrow(() -&gt; new EntityNotFoundException(String.format(&quot;ID: %s || Não foi encontrado nenhuma entidade para o id fornecido&quot;, id)));\n    }\n\n    protected void updateData(Bet bet, BetRequest betRequest){\n        bet.setMaxNumbersByUsers(betRequest.getMaxNumbersByUsers());\n    }\n\n}\n</code></pre>\n<p>BetService.java</p>\n<pre class=\"lang-java prettyprint-override\"><code>public interface BetService {\n    List&lt;BetResponse&gt; list();\n    BetResponse save(BetRequest betRequest);\n    BetResponse update(Long id, BetRequest betRequest);\n    BetResponse delete(Long id);\n    BetResponse getBetById(Long id);\n    List&lt;BetResponse&gt; getBets();\n}\n</code></pre>\n<p>I tried removing <code>@Autowired</code> from Mapper, the code runs, but when a new bet is inserted there is another error from Mapper being <code>null</code>.</p>\n"},{"tags":["java","angularjs","file","spring-mvc","multipartform-data"],"answers":[{"tags":[],"owner":{"account_id":8794729,"reputation":15297,"user_id":6572971,"display_name":"Alien"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1566503905,"creation_date":1566503905,"answer_id":57616300,"question_id":57606993,"body_markdown":"Your server code is expecting a request parameter with name &quot;file&quot; but you are not defining it properly.\r\n\r\n\r\nChange \r\n\r\n    &lt;input file=&quot;file&quot; \r\n\r\nTo \r\n\r\n    &lt;input type=&quot;file&quot; name=&quot;file&quot; ","title":"Angularjs pass null value in file multipart FormData to Spring MVC","body":"<p>Your server code is expecting a request parameter with name \"file\" but you are not defining it properly.</p>\n\n<p>Change </p>\n\n<pre><code>&lt;input file=\"file\" \n</code></pre>\n\n<p>To </p>\n\n<pre><code>&lt;input type=\"file\" name=\"file\" \n</code></pre>\n"},{"tags":[],"owner":{"account_id":15075269,"reputation":11,"user_id":10879577,"display_name":"yassir akhayad"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1669634760,"creation_date":1669312145,"answer_id":74564626,"question_id":57606993,"body_markdown":"When the image is not uploaded, the request is bad because Spring MVC assumes all parameters required unless otherwise defined.\r\nIn your case, you should add `required = false`.\r\n```java\r\n@RequestParam(value = &quot;file&quot;, required = false)\r\n```","title":"Angularjs pass null value in file multipart FormData to Spring MVC","body":"<p>When the image is not uploaded, the request is bad because Spring MVC assumes all parameters required unless otherwise defined.\nIn your case, you should add <code>required = false</code>.</p>\n<pre class=\"lang-java prettyprint-override\"><code>@RequestParam(value = &quot;file&quot;, required = false)\n</code></pre>\n"}],"owner":{"account_id":9904386,"reputation":1316,"user_id":7333386,"accept_rate":51,"display_name":"deadend"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":873,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1669634760,"creation_date":1566468799,"question_id":57606993,"body_markdown":"I am attempting to send form data with Multipart data (Image) to Spring MVC controller. From my form. image field is non mandatory. so when i call spring controller without input image field, i get below error in browser console.\r\n\r\n&gt; Failed to load resource: the server responded with a status of 400\r\n&gt; (Bad Request)\r\n\r\nHtml Code:\r\n\r\n    &lt;input file=&quot;file&quot; type=&quot;file&quot; id =&quot;file2&quot;/&gt;\r\n\r\nAngularjS Code:\r\n\r\n    $scope.saveData = function (formObj) {\r\n\t\t$http({\r\n            url: CONTEXT_PATH+&#39;saveFile&#39;,\r\n            method: &quot;POST&quot;,\r\n            headers: { &#39;Content-Type&#39;: undefined },\r\n            transformRequest: function (data) {\r\n            \talert(data.files);\r\n                var formData = new FormData();\r\n                formData.append(&quot;model&quot;, angular.toJson(data.model));\r\n                formData.append(&quot;file&quot;, data.files);\r\n                return formData;\r\n            },\r\n            data: { model: formObj, files: $scope.file }\r\n        }).then(function (response) {\r\n            //alert(response);\r\n        });\r\n\t};\r\n\r\n\r\n    app.directive(&#39;file&#39;, function () {\r\n        return {\r\n            scope: {\r\n                file: &#39;=&#39;\r\n            },\r\n            link: function (scope, el, attrs) {\r\n                el.bind(&#39;change&#39;, function (event) {\r\n                    var file = event.target.files[0];\r\n                    scope.file = file ? file : undefined;\r\n                    scope.$apply();\r\n                });\r\n            }\r\n        };\r\n    });\r\n\r\nSpring Controller Code:\r\n\r\n    @RequestMapping(value = &quot;/saveFile&quot;)\r\n    public @ResponseBody String storeAd(@RequestParam (&quot;model&quot;) String adString, @RequestParam (&quot;file&quot;) MultipartFile file) throws IOException {\r\n        System.out.println(&quot;adString &gt; &quot;+adString);\r\n        return &quot;OK&quot;;\r\n    }","title":"Angularjs pass null value in file multipart FormData to Spring MVC","body":"<p>I am attempting to send form data with Multipart data (Image) to Spring MVC controller. From my form. image field is non mandatory. so when i call spring controller without input image field, i get below error in browser console.</p>\n\n<blockquote>\n  <p>Failed to load resource: the server responded with a status of 400\n  (Bad Request)</p>\n</blockquote>\n\n<p>Html Code:</p>\n\n<pre><code>&lt;input file=\"file\" type=\"file\" id =\"file2\"/&gt;\n</code></pre>\n\n<p>AngularjS Code:</p>\n\n<pre><code>$scope.saveData = function (formObj) {\n    $http({\n        url: CONTEXT_PATH+'saveFile',\n        method: \"POST\",\n        headers: { 'Content-Type': undefined },\n        transformRequest: function (data) {\n            alert(data.files);\n            var formData = new FormData();\n            formData.append(\"model\", angular.toJson(data.model));\n            formData.append(\"file\", data.files);\n            return formData;\n        },\n        data: { model: formObj, files: $scope.file }\n    }).then(function (response) {\n        //alert(response);\n    });\n};\n\n\napp.directive('file', function () {\n    return {\n        scope: {\n            file: '='\n        },\n        link: function (scope, el, attrs) {\n            el.bind('change', function (event) {\n                var file = event.target.files[0];\n                scope.file = file ? file : undefined;\n                scope.$apply();\n            });\n        }\n    };\n});\n</code></pre>\n\n<p>Spring Controller Code:</p>\n\n<pre><code>@RequestMapping(value = \"/saveFile\")\npublic @ResponseBody String storeAd(@RequestParam (\"model\") String adString, @RequestParam (\"file\") MultipartFile file) throws IOException {\n    System.out.println(\"adString &gt; \"+adString);\n    return \"OK\";\n}\n</code></pre>\n"},{"tags":["java","visual-studio-code","redhat"],"comments":[{"owner":{"account_id":25311208,"reputation":7305,"user_id":19133920,"display_name":"JialeDu"},"score":0,"creation_date":1669627738,"post_id":74581859,"comment_id":131676828,"body_markdown":"What problem are you having now? What effect do you expect to get? Can you describe the problem in more detail so others can help you solve it.","body":"What problem are you having now? What effect do you expect to get? Can you describe the problem in more detail so others can help you solve it."},{"owner":{"account_id":22030824,"reputation":37,"user_id":16298108,"display_name":"RandomGuy"},"score":0,"creation_date":1669716431,"post_id":74581859,"comment_id":131700579,"body_markdown":"I deleted the folder and I dont save any .java file directly on desktop","body":"I deleted the folder and I dont save any .java file directly on desktop"},{"owner":{"account_id":25311208,"reputation":7305,"user_id":19133920,"display_name":"JialeDu"},"score":0,"creation_date":1669771315,"post_id":74581859,"comment_id":131717389,"body_markdown":"So is your problem still there? Please clarify your specific problem or provide additional details to highlight exactly what you need. As it&#39;s currently written, it&#39;s hard to tell exactly what you&#39;re asking.\n\nPlease see [how to ask](https://stackoverflow.com/help/how-to-ask).","body":"So is your problem still there? Please clarify your specific problem or provide additional details to highlight exactly what you need. As it&#39;s currently written, it&#39;s hard to tell exactly what you&#39;re asking.  Please see <a href=\"https://stackoverflow.com/help/how-to-ask\">how to ask</a>."}],"owner":{"account_id":22030824,"reputation":37,"user_id":16298108,"display_name":"RandomGuy"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":202,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":0,"score":2,"last_activity_date":1669634659,"creation_date":1669463008,"question_id":74581859,"body_markdown":"I&#39;m on MacOs Mojave.\r\n\r\nWhen I browse to  `/../Code/User/WorkspaceStorage/../redhat.java`\r\nI noticed that the directory appears to have a copy of my whole desktop folder contained within it.\r\n\r\nI was wondering if it was safe to delete it, what might have caused this, and how/if I can prevent this from happening again.\r\n\r\nThese are the java extensions I have installed: \r\n* Debugger for Java\r\n* Extension Pack for Java\r\n* Project Manager for Java\r\n* Test Runner for Java\r\n* Language Support for Java(TM)by RedHat  \r\n\r\nI also have some C++ extensions.\r\n\r\nI&#39;ve figured out that it might be that Language Support for Java saved my desktop files to see any changes in the workspace since I&#39;ve previously saved some .java files on my desktop.","title":"Why is my Visual Studio Code workspaceStorage directory so large?","body":"<p>I'm on MacOs Mojave.</p>\n<p>When I browse to  <code>/../Code/User/WorkspaceStorage/../redhat.java</code>\nI noticed that the directory appears to have a copy of my whole desktop folder contained within it.</p>\n<p>I was wondering if it was safe to delete it, what might have caused this, and how/if I can prevent this from happening again.</p>\n<p>These are the java extensions I have installed:</p>\n<ul>\n<li>Debugger for Java</li>\n<li>Extension Pack for Java</li>\n<li>Project Manager for Java</li>\n<li>Test Runner for Java</li>\n<li>Language Support for Java(TM)by RedHat</li>\n</ul>\n<p>I also have some C++ extensions.</p>\n<p>I've figured out that it might be that Language Support for Java saved my desktop files to see any changes in the workspace since I've previously saved some .java files on my desktop.</p>\n"},{"tags":["java","json","org.json"],"comments":[{"owner":{"account_id":1232680,"reputation":1203,"user_id":1196928,"display_name":"bharatpatel"},"score":1,"creation_date":1669627117,"post_id":74598349,"comment_id":131676621,"body_markdown":"Have you confirmed that your json is valid? Code to convert string to json is valid but your string is in valid.","body":"Have you confirmed that your json is valid? Code to convert string to json is valid but your string is in valid."},{"owner":{"account_id":26879624,"reputation":386,"user_id":20460294,"display_name":"Anon"},"score":0,"creation_date":1669627172,"post_id":74598349,"comment_id":131676641,"body_markdown":"try this &quot;{name:Alex, sex:male}&quot;","body":"try this &quot;{name:Alex, sex:male}&quot;"},{"owner":{"account_id":47518,"reputation":21228,"user_id":140803,"accept_rate":78,"display_name":"Blessed Geek"},"score":1,"creation_date":1669628098,"post_id":74598349,"comment_id":131676953,"body_markdown":"https://www.json.org/json-en.html","body":"<a href=\"https://www.json.org/json-en.html\" rel=\"nofollow noreferrer\">json.org/json-en.html</a>"}],"answers":[{"tags":[],"owner":{"account_id":14334883,"reputation":888,"user_id":10354667,"display_name":"chamal"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1669627917,"creation_date":1669627917,"answer_id":74598543,"question_id":74598349,"body_markdown":"The string you&#39;re assigning to the variable ```s``` is not valid JSON. Property names and properties should be separated by ```:``` instead of ```=```, and double quotes should be used around strings and property names. \r\n\r\nSo the string in your example should be like this (with ```\\``` being used to escape the quote characters within the string quotes):\r\n```java\r\nString s = &quot;{\\&quot;name\\&quot;:\\&quot;Alex\\&quot;,\\&quot;sex\\&quot;:\\&quot;male\\&quot;}&quot;;\r\n```","title":"Convert string to json object giving error","body":"<p>The string you're assigning to the variable <code>s</code> is not valid JSON. Property names and properties should be separated by <code>:</code> instead of <code>=</code>, and double quotes should be used around strings and property names.</p>\n<p>So the string in your example should be like this (with <code>\\</code> being used to escape the quote characters within the string quotes):</p>\n<pre class=\"lang-java prettyprint-override\"><code>String s = &quot;{\\&quot;name\\&quot;:\\&quot;Alex\\&quot;,\\&quot;sex\\&quot;:\\&quot;male\\&quot;}&quot;;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":23959668,"reputation":26587,"user_id":17949945,"display_name":"Alexander Ivanchenko"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1669633927,"creation_date":1669632350,"answer_id":74599418,"question_id":74598349,"body_markdown":"The JSON you&#39;ve provided is not valid because separator colon `:` should be used a separator between a Key and a Value (*not an equals sign*).\r\n\r\nA quote from the standard [The JavaScript Object Notation (JSON) Data Interchange Format][json]:\r\n\r\n&gt; **4.  Objects**\r\n&gt; \r\n&gt;    An object structure is represented as a pair of curly brackets   \r\n&gt; surrounding zero or more name/value pairs (or members).  A name is a  \r\n&gt; string.  A **single colon comes after each name**, separating the name   \r\n&gt; from the value.  A single comma separates a value from a following   \r\n&gt; name.  The names within an object SHOULD be unique.\r\n\r\nYou can preprocess you JSON before parsing it using [`String.replace()`][stringReplace]\r\n\r\n```\r\nString s =&quot;{name=Alex, sex=male}&quot;;\r\n    \r\nJSONObject obj = new JSONObject(s.replace(&#39;=&#39;, &#39;:&#39;));\r\n    \r\nSystem.out.println(obj.get(&quot;name&quot;));\r\n```\r\n\r\n*Output:*\r\n\r\n```\r\nAlex\r\n```\r\n\r\nAlso, **note** that *Org.json* (as well as some other libraries like Gson) would take care of fixing missing double quotes `&quot;`. But it would not be the case with libraries like Jackson.\r\n\r\n\r\n\r\n   [json]: https://www.rfc-editor.org/rfc/rfc8259.html#section-4\r\n\r\n   [stringReplace]: https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html#replace(char,char)","title":"Convert string to json object giving error","body":"<p>The JSON you've provided is not valid because separator colon <code>:</code> should be used a separator between a Key and a Value (<em>not an equals sign</em>).</p>\n<p>A quote from the standard <a href=\"https://www.rfc-editor.org/rfc/rfc8259.html#section-4\" rel=\"nofollow noreferrer\">The JavaScript Object Notation (JSON) Data Interchange Format</a>:</p>\n<blockquote>\n<p><strong>4.  Objects</strong></p>\n<p>An object structure is represented as a pair of curly brackets<br />\nsurrounding zero or more name/value pairs (or members).  A name is a<br />\nstring.  A <strong>single colon comes after each name</strong>, separating the name<br />\nfrom the value.  A single comma separates a value from a following<br />\nname.  The names within an object SHOULD be unique.</p>\n</blockquote>\n<p>You can preprocess you JSON before parsing it using <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html#replace(char,char)\" rel=\"nofollow noreferrer\"><code>String.replace()</code></a></p>\n<pre><code>String s =&quot;{name=Alex, sex=male}&quot;;\n    \nJSONObject obj = new JSONObject(s.replace('=', ':'));\n    \nSystem.out.println(obj.get(&quot;name&quot;));\n</code></pre>\n<p><em>Output:</em></p>\n<pre><code>Alex\n</code></pre>\n<p>Also, <strong>note</strong> that <em>Org.json</em> (as well as some other libraries like Gson) would take care of fixing missing double quotes <code>&quot;</code>. But it would not be the case with libraries like Jackson.</p>\n"},{"tags":[],"owner":{"account_id":17601943,"reputation":91,"user_id":12771724,"display_name":"Enes Birisik"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1669634095,"creation_date":1669634095,"answer_id":74599745,"question_id":74598349,"body_markdown":"You should use : instead of =\r\n\r\nString s = &quot;&quot;&quot;{&quot;name&quot;:&quot;Alex&quot;,&quot;sex&quot;:&quot;male&quot;}&quot;&quot;&quot;; (Since Java 13 preview feature)\r\n","title":"Convert string to json object giving error","body":"<p>You should use : instead of =</p>\n<p>String s = &quot;&quot;&quot;{&quot;name&quot;:&quot;Alex&quot;,&quot;sex&quot;:&quot;male&quot;}&quot;&quot;&quot;; (Since Java 13 preview feature)</p>\n"}],"owner":{"account_id":27001234,"reputation":17,"user_id":20562483,"display_name":"marshmellow"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1371,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"accepted_answer_id":74599418,"answer_count":3,"score":0,"last_activity_date":1669634120,"creation_date":1669626924,"question_id":74598349,"body_markdown":"I have a string which needs to be converted to `JSONObject`, I added the dependency, but I&#39;m getting error, which I&#39;m not able to figure out. I have the following dependency:\r\n```\r\n&lt;!-- https://mvnrepository.com/artifact/org.json/json --&gt;\r\n\r\n&lt;dependency&gt;\r\n   &lt;groupId&gt;org.json&lt;/groupId&gt;\r\n   &lt;artifactId&gt;json&lt;/artifactId&gt;\r\n   &lt;version&gt;20220924&lt;/version&gt;\r\n&lt;/dependency&gt;\r\n```\r\n```\r\nString s =&quot;{name=Alex, sex=male}&quot;;\r\n    \r\nJSONObject obj = new JSONObject(s);\r\n    \r\nSystem.out.println(obj.get(&quot;name&quot;));\r\n```\r\n\r\nI&#39;m getting an exception: \r\n\r\n```\r\norg.json.JSONException: Expected a &#39;:&#39; after a key at line 5\r\n```\r\n","title":"Convert string to json object giving error","body":"<p>I have a string which needs to be converted to <code>JSONObject</code>, I added the dependency, but I'm getting error, which I'm not able to figure out. I have the following dependency:</p>\n<pre><code>&lt;!-- https://mvnrepository.com/artifact/org.json/json --&gt;\n\n&lt;dependency&gt;\n   &lt;groupId&gt;org.json&lt;/groupId&gt;\n   &lt;artifactId&gt;json&lt;/artifactId&gt;\n   &lt;version&gt;20220924&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n<pre><code>String s =&quot;{name=Alex, sex=male}&quot;;\n    \nJSONObject obj = new JSONObject(s);\n    \nSystem.out.println(obj.get(&quot;name&quot;));\n</code></pre>\n<p>I'm getting an exception:</p>\n<pre><code>org.json.JSONException: Expected a ':' after a key at line 5\n</code></pre>\n"},{"tags":["java","docker","maven","deployment","build"],"comments":[{"owner":{"account_id":3498606,"reputation":5166,"user_id":2925962,"accept_rate":0,"display_name":"akortex"},"score":2,"creation_date":1632334377,"post_id":69289289,"comment_id":122466959,"body_markdown":"Please avoid posting images. Also please go ahead and post your dockerfile in order to troubleshoot.","body":"Please avoid posting images. Also please go ahead and post your dockerfile in order to troubleshoot."},{"owner":{"account_id":13863020,"reputation":137023,"user_id":10008173,"display_name":"David Maze"},"score":0,"creation_date":1632353223,"post_id":69289289,"comment_id":122472132,"body_markdown":"Editing the question to include a [mcve] would also be helpful.  &quot;no match for platform in manifest&quot; could suggest a CPU architecture problem; are you using an M1 Mac, or an ARM system, or something else that&#39;s not x86-based?","body":"Editing the question to include a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> would also be helpful.  &quot;no match for platform in manifest&quot; could suggest a CPU architecture problem; are you using an M1 Mac, or an ARM system, or something else that&#39;s not x86-based?"},{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1632973707,"post_id":69289289,"comment_id":122639038,"body_markdown":"Please edit the question to limit it to a specific problem with enough detail to identify an adequate answer.","body":"Please edit the question to limit it to a specific problem with enough detail to identify an adequate answer."}],"answers":[{"tags":[],"owner":{"account_id":5289146,"reputation":8128,"user_id":4222206,"display_name":"queeg"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1632807876,"creation_date":1632807876,"answer_id":69356376,"question_id":69289289,"body_markdown":"The information you gave leaves room for guessing.\r\n\r\nI believe the important part is `no match for platform in manifest`.\r\nThus I believe in your dockerfile you start `FROM someimage`, and this someimage is not available for the platform you are using (which could mean MacOS).","title":"Issue with Building Java Application in Docker","body":"<p>The information you gave leaves room for guessing.</p>\n<p>I believe the important part is <code>no match for platform in manifest</code>.\nThus I believe in your dockerfile you start <code>FROM someimage</code>, and this someimage is not available for the platform you are using (which could mean MacOS).</p>\n"},{"tags":[],"owner":{"account_id":13902531,"reputation":65,"user_id":10037807,"display_name":"Jamie van Eesteren"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1669633880,"creation_date":1669199259,"answer_id":74545302,"question_id":69289289,"body_markdown":"Try adding the following arg to the command: \r\n\r\n       --platform=linux/amd64\r\n\r\nor alternatively use the following command to set an env var: \r\n\r\n       export DOCKER_DEFAULT_PLATFORM=linux/amd64","title":"Issue with Building Java Application in Docker","body":"<p>Try adding the following arg to the command:</p>\n<pre><code>   --platform=linux/amd64\n</code></pre>\n<p>or alternatively use the following command to set an env var:</p>\n<pre><code>   export DOCKER_DEFAULT_PLATFORM=linux/amd64\n</code></pre>\n"}],"owner":{"account_id":14384356,"reputation":11,"user_id":10390767,"display_name":"Karthik John Babu"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1790,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":2,"score":0,"last_activity_date":1669633880,"creation_date":1632334153,"question_id":69289289,"body_markdown":"I am at the Java Directory. And When I execute the build command:\r\ndocker build -t karthikjohnbabu/hello-world-java:0.0.2.RELEASE .\r\n\r\nI get the below error message. Please help me???\r\n\r\nfailed to solve with frontend dockerfile.v0: failed to create LLB definition: no match for platform in manifest sha256:195e9c227ad891282e80602cac2372a3085ecf4ceefbb395558ffe0f7bb0b9aa: not found.\r\n\r\nComplete details of error below:\r\n\r\n&lt;img src=&quot;https://i.stack.imgur.com/pnX7w.jpg&quot; width=&quot;900&quot; height=&quot;250&quot;&gt;\r\n&lt;!-- ![Error Snapshot][1] --&gt;\r\n\r\n  [1]: https://i.stack.imgur.com/pnX7w.jpg","title":"Issue with Building Java Application in Docker","body":"<p>I am at the Java Directory. And When I execute the build command:\ndocker build -t karthikjohnbabu/hello-world-java:0.0.2.RELEASE .</p>\n<p>I get the below error message. Please help me???</p>\n<p>failed to solve with frontend dockerfile.v0: failed to create LLB definition: no match for platform in manifest sha256:195e9c227ad891282e80602cac2372a3085ecf4ceefbb395558ffe0f7bb0b9aa: not found.</p>\n<p>Complete details of error below:</p>\n<img src=\"https://i.stack.imgur.com/pnX7w.jpg\" width=\"900\" height=\"250\">\n\n"},{"tags":["javascript","java","vue.js","rest","primevue"],"comments":[{"owner":{"account_id":11689602,"reputation":4755,"user_id":9568358,"display_name":"Wimanicesir"},"score":0,"creation_date":1668694148,"post_id":74462797,"comment_id":131472125,"body_markdown":"The example and the desired result you give is not an JSON but a array containing other arrays.","body":"The example and the desired result you give is not an JSON but a array containing other arrays."},{"owner":{"account_id":9101408,"reputation":11,"user_id":14756852,"display_name":"jpvandekerkhove"},"score":0,"creation_date":1668787760,"post_id":74462797,"comment_id":131498650,"body_markdown":"Thank&#39;s. I added the pom of rest project. May be something wrong or forgetted.","body":"Thank&#39;s. I added the pom of rest project. May be something wrong or forgetted."}],"answers":[{"tags":[],"owner":{"account_id":8441268,"reputation":260,"user_id":6346196,"accept_rate":57,"display_name":"Joulin Nicolas"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1668788742,"creation_date":1668788342,"answer_id":74492536,"question_id":74462797,"body_markdown":"The *Json you need* is actually not json. here is what you actually want : \r\n\r\n```json\r\n[\r\n   {\r\n    &quot;id&quot;:32,\r\n    &quot;fullName&quot;:&quot;DE BELLOUET Jag&quot;,\r\n    &quot;acs&quot;:&quot;1.3.13.3.&quot;,\r\n    &quot;nom_service&quot;:&quot;Cid polseruti sau&quot;\r\n   },\r\n   {\r\n    &quot;id&quot;:15,\r\n    &quot;fullName&quot;:&quot;NOURAUD Benjamin&quot;,\r\n    &quot;acs&quot;:&quot;1.3.13.3.&quot;,\r\n    &quot;nom_service&quot;:&quot;Cid polseruti sau&quot;\r\n   }\r\n]\r\n``` \r\n\r\nthe important detail is the `{` and `}` characters that are used to denoted an Object or a map of properties.\r\n\r\nWith that said you should probably create a POJO to store the result of your SQL request. maybe something like :\r\n\r\n```java\r\npublic class Agent {\r\n    private Integer id;\r\n    private String fullName;\r\n    private String acs;\r\n    private String nomService;\r\n\r\n    // add some getters and setter here\r\n\r\n}\r\n```\r\n\r\nMaybe returning a `List&lt;Agent&gt;` from your rest method could be enough. If not you could take a look at the [jackson][1] library to serialize a `List&lt;Agent&gt;` into json.\r\n\r\n\r\n  [1]: https://www.baeldung.com/jackson","title":"How to have keys in my Json, not only values","body":"<p>The <em>Json you need</em> is actually not json. here is what you actually want :</p>\n<pre class=\"lang-json prettyprint-override\"><code>[\n   {\n    &quot;id&quot;:32,\n    &quot;fullName&quot;:&quot;DE BELLOUET Jag&quot;,\n    &quot;acs&quot;:&quot;1.3.13.3.&quot;,\n    &quot;nom_service&quot;:&quot;Cid polseruti sau&quot;\n   },\n   {\n    &quot;id&quot;:15,\n    &quot;fullName&quot;:&quot;NOURAUD Benjamin&quot;,\n    &quot;acs&quot;:&quot;1.3.13.3.&quot;,\n    &quot;nom_service&quot;:&quot;Cid polseruti sau&quot;\n   }\n]\n</code></pre>\n<p>the important detail is the <code>{</code> and <code>}</code> characters that are used to denoted an Object or a map of properties.</p>\n<p>With that said you should probably create a POJO to store the result of your SQL request. maybe something like :</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class Agent {\n    private Integer id;\n    private String fullName;\n    private String acs;\n    private String nomService;\n\n    // add some getters and setter here\n\n}\n</code></pre>\n<p>Maybe returning a <code>List&lt;Agent&gt;</code> from your rest method could be enough. If not you could take a look at the <a href=\"https://www.baeldung.com/jackson\" rel=\"nofollow noreferrer\">jackson</a> library to serialize a <code>List&lt;Agent&gt;</code> into json.</p>\n"},{"tags":[],"owner":{"account_id":9101408,"reputation":11,"user_id":14756852,"display_name":"jpvandekerkhove"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1669633142,"creation_date":1669633142,"answer_id":74599579,"question_id":74462797,"body_markdown":"The first part of the solution actually involves creating a class (AgentServ).\r\n\r\nBut hibernate doesn&#39;t like my request, and it had to have the results in a list of Object[].\r\n\r\nThen we had to cast the previous results, Include the lines in an agent object one step at a time and then add it to the &lt;AgentServ&gt; list.\r\n\r\nThe datatable now returns the requested result.\r\n\r\nBelow is the final code.\r\n\r\n    public List&lt;AgentServ&gt; listAgentService() {\r\n\t\tString buf = null;\r\n\t\tbuf = &quot;SELECT a.id AS id,(btrim(a.nom) || &#39; &#39; || btrim(a.prenom)) AS fullName, s.acs AS acs, s.libelle AS nom_service &quot;;\r\n\t\tbuf += &quot;FROM Agent a INNER JOIN Service s ON a.service = s &quot;;\r\n\t\tbuf += &quot;WHERE ((a.actif = true) OR ((a.actif = false) AND (a.dateSuppression &gt;= CURRENT_DATE)))&quot;;\r\n\r\n\t\tList&lt;Object[]&gt; query = em.createQuery(buf.toString(), Object[].class).getResultList();\r\n\t\tList&lt;AgentServ&gt; agents = new ArrayList&lt;AgentServ&gt;();\r\n\t\t\r\n\t\tfor(Object[] row : query) {\r\n\t\t\tAgentServ agent = new AgentServ();\r\n\t\t\tagent.setId((long) row[0]);\r\n\t\t\tagent.setFullName((String) row[1]);\r\n\t\t\tagent.setAcs((String) row[2]);\r\n\t\t\tagent.setNom_service((String) row[3]);\r\n\t\t\t\r\n\t\t\tagents.add(agent);\r\n\t\t}\r\n\t\t\r\n\t\treturn agents;\t\t\r\n\t}","title":"How to have keys in my Json, not only values","body":"<p>The first part of the solution actually involves creating a class (AgentServ).</p>\n<p>But hibernate doesn't like my request, and it had to have the results in a list of Object[].</p>\n<p>Then we had to cast the previous results, Include the lines in an agent object one step at a time and then add it to the  list.</p>\n<p>The datatable now returns the requested result.</p>\n<p>Below is the final code.</p>\n<pre><code>public List&lt;AgentServ&gt; listAgentService() {\n    String buf = null;\n    buf = &quot;SELECT a.id AS id,(btrim(a.nom) || ' ' || btrim(a.prenom)) AS fullName, s.acs AS acs, s.libelle AS nom_service &quot;;\n    buf += &quot;FROM Agent a INNER JOIN Service s ON a.service = s &quot;;\n    buf += &quot;WHERE ((a.actif = true) OR ((a.actif = false) AND (a.dateSuppression &gt;= CURRENT_DATE)))&quot;;\n\n    List&lt;Object[]&gt; query = em.createQuery(buf.toString(), Object[].class).getResultList();\n    List&lt;AgentServ&gt; agents = new ArrayList&lt;AgentServ&gt;();\n    \n    for(Object[] row : query) {\n        AgentServ agent = new AgentServ();\n        agent.setId((long) row[0]);\n        agent.setFullName((String) row[1]);\n        agent.setAcs((String) row[2]);\n        agent.setNom_service((String) row[3]);\n        \n        agents.add(agent);\n    }\n    \n    return agents;      \n}\n</code></pre>\n"}],"owner":{"account_id":9101408,"reputation":11,"user_id":14756852,"display_name":"jpvandekerkhove"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":113,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1669633142,"creation_date":1668611104,"question_id":74462797,"body_markdown":"I created a datatable from primevue, but I only get empty rows.\r\n\r\nI looked where it could come from and I think it comes from my Json, whose fields have no key. What corrections should be made so that this Json becomes standard again and my data can be displayed? Thanks in advance.\r\n\r\n\r\n**A short exemple of the Json I get:**\r\n```\r\n[\r\n   [\r\n    32,\r\n    &quot;DE BELLOUET Jag&quot;,\r\n    &quot;1.3.13.3.&quot;,\r\n    &quot;Cid polseruti sau&quot;\r\n   ],\r\n   [\r\n    15,\r\n    &quot;NOURAUD Benjamin&quot;,\r\n    &quot;1.3.13.3.&quot;,\r\n    &quot;Cid polseruti sau&quot;\r\n   ]\r\n]\r\n```\r\n\r\n\r\n**A short exemple of the jSon I need:**\r\n```\r\n[\r\n   [\r\n    &quot;id&quot;:32,\r\n    &quot;fullName&quot;:&quot;DE BELLOUET Jag&quot;,\r\n    &quot;acs&quot;:&quot;1.3.13.3.&quot;,\r\n    &quot;nom_service&quot;:&quot;Cid polseruti sau&quot;\r\n   ],\r\n   [\r\n    &quot;id&quot;:15,\r\n    &quot;fullName&quot;:&quot;NOURAUD Benjamin&quot;,\r\n    &quot;acs&quot;:&quot;1.3.13.3.&quot;,\r\n    &quot;nom_service&quot;:&quot;Cid polseruti sau&quot;\r\n   ]\r\n]\r\n```\r\n\r\n\r\n**The main program: gererPersonnes.vue**\r\n\r\n```\r\n&lt;template&gt;\r\n    &lt;div class=&quot;principal_personnes&quot;&gt;\r\n        &lt;div class=&quot;bandeau&quot;&gt;\r\n            &lt;div&gt;{{titre}}&lt;/div&gt;\r\n        &lt;/div&gt;\r\n        &lt;div&gt;\r\n            &lt;h2&gt;Liste des agents actifs&lt;/h2&gt;\r\n            &lt;DataTable :value=&quot;agents&quot; :paginator=&quot;true&quot; :rows=&quot;10&quot; class=&quot;tableau&quot;&gt;\r\n                 &lt;template #empty&gt;\r\n                    Pas d&#39;agent trouv&#233;.\r\n                &lt;/template&gt;\r\n                &lt;Column field=&quot;id&quot; :sortable=&quot;true&quot; header=&quot;Id&quot; headerStyle=&quot;width: 3em&quot; bodyStyle=&quot;text-align: center&quot;&gt;&lt;/Column&gt;\r\n                &lt;Column field=&quot;fullName&quot; :sortable=&quot;true&quot; header=&quot;Nom - Pr&#233;nom&quot; headerStyle=&quot;width: 250px&quot;&gt;&lt;/Column&gt;\r\n                &lt;Column field=&quot;service.acs&quot; :sortable=&quot;true&quot; header=&quot;A.C.S.&quot; headerStyle=&quot;width: 150px&quot;&gt;&lt;/Column&gt;\r\n                &lt;Column field=&quot;service.nom_service&quot; :sortable=&quot;true&quot; header=&quot;Service&quot; headerStyle=&quot;width: 250px; text-aling: left;&quot;&gt;&lt;/Column&gt;\r\n                &lt;Column headerStyle=&quot;width: 8em&quot;&gt;\r\n                    &lt;template #body &gt;\r\n                        &lt;Button type=&quot;button&quot; icon=&quot;pi pi-user&quot; class=&quot;p-button-text&quot; title=&quot;D&#233;tails&quot;&gt;&lt;/Button&gt;\r\n                        &lt;Button type=&quot;button&quot; icon=&quot;pi pi-pencil&quot; class=&quot;p-button-text&quot; title=&quot;Modifier&quot;&gt;&lt;/Button&gt;\r\n                        &lt;Button type=&quot;button&quot; icon=&quot;pi pi-trash&quot; class=&quot;p-button-text&quot; title=&quot;Supprimer&quot;&gt;&lt;/Button&gt;\r\n                    &lt;/template&gt;\r\n                &lt;/Column&gt;\r\n            &lt;/DataTable&gt;\r\n        &lt;/div&gt;\r\n        &lt;div class=&quot;button_gerer&quot;&gt;\r\n            &lt;button type=&quot;submit&quot; class=&quot;boutton coin_vert&quot; @click=&quot;cAjouter()&quot;&gt;Ajouter un agent&lt;/button&gt;\r\n            &lt;button type=&quot;button&quot; class=&quot;boutton coin_rouge&quot; @click=&quot;cQuitter()&quot;&gt;Abandon&lt;/button&gt;\r\n        &lt;/div&gt;\r\n    &lt;/div&gt;\r\n&lt;/template&gt;\r\n\r\n&lt;style&gt;\r\n:root {\r\n    --gaucheP: 660px;\r\n}\r\n\r\n.principal_personnes {\r\n    height: var(--haut);\r\n    width: var(--large);\r\n    background-color:cornsilk;\r\n}\r\n\r\n.tableau {\r\n    width: 1000px;\r\n    margin: 0 auto;\r\n}\r\n\r\n.pi-user {\r\n    color:blue;\r\n    font-size: 1em;\r\n}\r\n\r\n.pi-pencil {\r\n    color:green;\r\n    font-size: 1em;\r\n}\r\n\r\n.pi-trash {\r\n    color:red;\r\n    font-size: 1em;\r\n}\r\n\r\n.p-datatable .p-datatable-tbody &gt; tr &gt; td {\r\n    text-align: left;\r\n    border: 1px solid #e9ecef;\r\n    border-width: 0 0 1px 0;\r\n    padding: 0rem 0rem;\r\n}\r\n\r\nh2 {\r\n    text-align:center;\r\n}\r\n\r\n.button_gerer {\r\n    display: grid;\r\n    grid-template: 30px / 130px 130px;\r\n    column-gap: 220px;  /* Firefox 63+ Chrome 84+ */\r\n    justify-content: stretch;\r\n    align-content: stretch;\r\n    padding-left: var(--gaucheP);\r\n    padding-top: 40px;\r\n}\r\n\r\n&lt;/style&gt;\r\n\r\n&lt;script&gt;\r\nimport DataTable from &#39;primevue/datatable&#39;;\r\nimport Column from &#39;primevue/column&#39;;\r\nimport Button from &#39;primevue/button&#39;;\r\nimport (&#39;primeicons/primeicons.css&#39;);\r\n\r\nimport AgentService from &#39;../../services/AgentService&#39;\r\n\r\nexport default {\r\n    name: &#39;gererPersonnes&#39;,\r\n    beforeCreate() {\r\n        window.self.document.title = &quot;gererPersonnes&quot;; // modification du titre de l&#39;onglet\r\n        document.getElementById(&#39;menuU&#39;).style.setProperty(&#39;display&#39;, &#39;none&#39;); //menu non affich&#233;\r\n    },\r\n    components : {\r\n        DataTable,\r\n        Column,\r\n        Button\r\n    },\r\n    data() {\r\n        return {\r\n            agents : null,\r\n            titre: &#39;G&#233;rer les personnes&#39;,\r\n        }\r\n    },\r\n    methods : {\r\n        cQuitter() {\r\n            let a = confirm(&quot;Voulez quitter la gestion des personnes ?&quot;);\r\n            if (a == true) {\r\n                this.$router.push(&quot;/&quot;);\r\n            }\r\n        },\r\n        cAjouter() {\r\n            let routeUrl = this.$router.resolve({\r\n                path : &quot;/agents/add_agent&quot;,\r\n            });\r\n            window.open(routeUrl.href, &#39;_blank&#39;);\r\n        }\r\n    },\r\n    created() {\r\n        this.AgentService = new AgentService;\r\n    },\r\n    mounted () {\r\n        this.AgentService.getAgentServices().then(data =&gt; this.agents = data);\r\n    },\r\n    AgentService : null\r\n\r\n}\r\n\r\n\r\n//Centrage du formulaire de la page\r\nvar inHeight = window.innerHeight - 140;\r\nvar inWidth = window.innerWidth;\r\n\r\nif (inWidth &gt; 1680) {\r\n    inWidth = 1680;\r\n}\r\n\r\nvar l = Math.floor((inWidth - 460 - 20)/2);\r\nvar padLeft = l + &#39;px&#39;;\r\nvar hauteur = inHeight + &#39;px&#39;;\r\n\r\nvar r = document.querySelector(&#39;:root&#39;);\r\nr.style.setProperty(&#39;--gaucheP&#39;, padLeft);\r\nr.style.setProperty(&#39;--haut&#39;, hauteur);\r\n\r\n&lt;/script&gt;\r\n```\r\n\r\n**The service called by gererPersonnes.vue : AgentService.js**\r\n\r\n```\r\nimport axios from &quot;axios&quot;;\r\n\r\nconst URL = &quot;/cote-s-rest/rest/agent&quot;; \r\nconst URL2 = &quot;/cote-s-rest/rest/password/&quot;; \r\nconst URL3 = &quot;/cote-s-rest/rest/agent/patronyme&quot;; \r\nconst URL4 = &quot;/cote-s-rest/rest/agent/agentServ&quot;;\r\n\r\nexport default class AgentService {\r\n\r\ninsertAgent(agent) {\r\n    return axios.post(URL, agent).then(resp =&gt; {\r\n        return Promise.resolve(resp.data);\r\n    });\r\n}\r\n\r\npassNewAgent(agent) {\r\n    return axios.post(URL2, agent).then(resp =&gt; {\r\n        return Promise.resolve(resp.data);\r\n    });\r\n}\r\n\r\ngetAgents() {\r\n    return axios.get(URL3).then(resp =&gt; {\r\n        return Promise.resolve(resp.data);\r\n    });\r\n}\r\n\r\ngetAgentServices() {\r\n    return axios.get(URL4).then(resp =&gt; {\r\n        return Promise.resolve(resp.data);\r\n    });\r\n}\r\n\r\n}\r\n\r\n```\r\n\r\n**The class AgentServ use in Java**\r\n\r\n```\r\n\t\r\npackage fr.gouv.finances.douane.cotes.dao.agent;\r\n\r\n/**\r\n * Classe de requete pour la liste &quot;AgentServ&quot;\r\n * \r\n * @author Jean Paul Vandekerkhove\r\n * @version 0.0.2.SNAPSHOT\r\n */\r\npublic class AgentServ {\r\n\r\n\t//------------------------\r\n\t// Attributs\r\n\t//------------------------\r\n\tprivate long id;\r\n\tprivate String fullName;\r\n\tprivate String acs;\r\n\tprivate String nom_service;\r\n\t\t\r\n\t//------------------------\r\n\t// Constructeurs\r\n\t//------------------------\r\n\t\r\n\t/**\r\n\t * Constructeur vide\r\n\t */\r\n\tpublic AgentServ() {\r\n\t\tsuper();\r\n\t}\r\n\r\n\t/**\r\n\t * Constructeur complet\r\n\t * \r\n\t * @param id\r\n\t * @param fullName\r\n\t * @param acs\r\n\t * @param nom_service\r\n\t */\r\n\tpublic AgentServ(long id, String fullName, String acs, String nom_service) {\r\n\t\tsuper();\r\n\t\tthis.id = id;\r\n\t\tthis.fullName = fullName;\r\n\t\tthis.acs = acs;\r\n\t\tthis.nom_service = nom_service;\r\n\t}\r\n\r\n\t//------------------------\r\n\t// Getters et Setters\r\n\t//------------------------\r\n\t/**\r\n\t * Retourne l&#39;identifiant de l&#39;Agent\r\n\t * @return id - identifiant de l&#39;Agent\r\n\t */\r\n\tpublic long getId() {\r\n\t\treturn id;\r\n\t}\r\n\t\r\n\t/**\r\n\t * MaJ de l&#39;Identifiant de l&#39;Agent\r\n\t * @param id - Identifiant de l&#39;agent\r\n\t */\r\n\tpublic void setId(long id) {\r\n\t\tthis.id = id;\r\n\t}\r\n\t\r\n\t/**\r\n\t * Retourne l&#39;identit&#233; complete de l&#39;Agent\r\n\t * @return fullName - nom-pr&#233;nom de l&#39;Agent\r\n\t */\r\n\tpublic String getFullName() {\r\n\t\treturn fullName;\r\n\t}\r\n\t\r\n\t/**\r\n\t * MaJ de l&#39;identit&#233; complete de l&#39;Agent\r\n\t * @param fullName - nom-pr&#233;nom de l&#39;Agent\r\n\t */\r\n\tpublic void setFullName(String fullName) {\r\n\t\tthis.fullName = fullName;\r\n\t}\r\n\t\r\n\t/**\r\n\t * Retourne l&#39;acs du service de l&#39;Agent\r\n\t * @return acs - acs du service de l&#39;Agent\r\n\t */\r\n\tpublic String getAcs() {\r\n\t\treturn acs;\r\n\t}\r\n\t\r\n\t/**\r\n\t * MaJ de l&#39;acs du service de l&#39;Agent\r\n\t * @param acs - acs du service de l&#39;Agent\r\n\t */\r\n\tpublic void setAcs(String acs) {\r\n\t\tthis.acs = acs;\r\n\t}\r\n\t\r\n\t/**\r\n\t * Retourne le libell&#233; du service de l&#39;Agent\r\n\t * @return nom_service - libell&#233; du service de l&#39;Agent\r\n\t */\r\n\tpublic String getNom_service() {\r\n\t\treturn nom_service;\r\n\t}\r\n\t\r\n\t/**\r\n\t * MaJ le libell&#233; du service de l&#39;Agent\r\n\t * @param nom_service - libell&#233; du service de l&#39;Agent\r\n\t */\r\n\tpublic void setNom_service(String nom_service) {\r\n\t\tthis.nom_service = nom_service;\r\n\t}\r\n\r\n}\r\n\t\r\n\r\n```\r\n\r\n**The List Method use in AgentDaoImpl.java**\r\n\r\n```\r\n\t\r\n\t@SuppressWarnings(&quot;unchecked&quot;)\r\n\tpublic List&lt;AgentServ&gt; listAgentService() {\r\n\t\tString buf = null;\r\n\t\tbuf = &quot;SELECT a.id AS id,(btrim(a.nom) || &#39; &#39; || btrim(a.prenom)) AS fullName, s.acs AS acs, s.libelle AS nom_service &quot;;\r\n\t\tbuf += &quot;FROM Agent a INNER JOIN Service s ON a.service = s &quot;;\r\n\t\tbuf += &quot;WHERE ((a.actif = true) OR ((a.actif = false) AND (a.dateSuppression &gt;= CURRENT_DATE)))&quot;;\r\n\r\n\t\tList&lt;AgentServ&gt; agents= em.createQuery(buf.toString()).getResultList();\r\n\r\n\t\treturn agents;\r\n\t}\r\n```\r\n\r\n**The REST method**\r\n\r\n```\r\npackage fr.gouv.finances.douane.cotes.rest.agent;\r\n\r\nimport java.util.HashMap;\r\nimport java.util.HashSet;\r\nimport java.util.List;\r\nimport java.util.Map;\r\nimport java.util.Set;\r\nimport java.util.logging.Logger;\r\n\r\nimport javax.enterprise.context.RequestScoped;\r\nimport javax.inject.Inject;\r\nimport javax.persistence.NoResultException;\r\nimport javax.validation.ConstraintViolation;\r\nimport javax.validation.ConstraintViolationException;\r\nimport javax.validation.ValidationException;\r\nimport javax.validation.Validator;\r\nimport javax.ws.rs.Consumes;\r\nimport javax.ws.rs.GET;\r\nimport javax.ws.rs.POST;\r\nimport javax.ws.rs.Path;\r\nimport javax.ws.rs.Produces;\r\nimport javax.ws.rs.core.Response;\r\n\r\nimport fr.gouv.finances.douane.cotes.dao.agent.Agent;\r\nimport fr.gouv.finances.douane.cotes.dao.agent.AgentDAO;\r\nimport fr.gouv.finances.douane.cotes.dao.agent.AgentServ;\r\nimport fr.gouv.finances.douane.cotes.dao.agent.ListAgent;\r\n/**\r\n * Classe de ressources REST de la classe ejb Agent\r\n *\r\n * @author VANDEKERKHOVE\r\n * @version 0.0.1.SNAPSHOT\r\n */\r\n@Path(&quot;/agent&quot;)\r\n@RequestScoped\r\npublic class AgentResourceRESTService {\r\n\r\n\t@Inject\r\n\tprivate Logger log;\r\n\r\n\t@Inject\r\n\tprivate Validator validator;\r\n\r\n\t@Inject\r\n\tprivate AgentDAO repository;\r\n\r\n    @GET\r\n\t@Path(&quot;/agentServ&quot;)\r\n\t@Produces(&quot;application/json; charset=UTF-8&quot;)\r\n\tpublic List&lt;AgentServ&gt; ListAgentService() {\r\n\t\treturn (List&lt;AgentServ&gt;) repository.listAgentService();\r\n\t}\r\n```\r\n\r\n**The pom of the rest project**\r\n\r\n```\r\nproject xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\r\n  &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n  \r\n  &lt;parent&gt;\r\n    &lt;groupId&gt;fr.gouv.finances.douane.cote-s&lt;/groupId&gt;\r\n    &lt;artifactId&gt;cote-s&lt;/artifactId&gt;\r\n    &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\r\n  &lt;/parent&gt;\r\n  \r\n  &lt;artifactId&gt;cote-s-rest&lt;/artifactId&gt;\r\n  &lt;version&gt;${project.parent.version}&lt;/version&gt;\r\n  &lt;packaging&gt;war&lt;/packaging&gt;\r\n  &lt;description&gt;Modules Rest de Cote-S&lt;/description&gt;\r\n  \r\n\t&lt;dependencies&gt;\r\n\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;fr.gouv.finances.douane.cote-s&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;cote-s-ejb&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;${project.parent.version}&lt;/version&gt;\r\n\t\t\t&lt;type&gt;ejb&lt;/type&gt;\r\n\t\t\t&lt;scope&gt;provided&lt;/scope&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n\t     &lt;dependency&gt;\r\n\t     \t&lt;groupId&gt;javax.enterprise&lt;/groupId&gt;\r\n\t     \t&lt;artifactId&gt;cdi-api&lt;/artifactId&gt;\r\n\t     \t&lt;scope&gt;provided&lt;/scope&gt;\r\n\t     &lt;/dependency&gt;\r\n\r\n\t     &lt;dependency&gt;\r\n\t        &lt;groupId&gt;org.hibernate.validator&lt;/groupId&gt;\r\n\t        &lt;artifactId&gt;hibernate-validator&lt;/artifactId&gt;\r\n\t        &lt;scope&gt;provided&lt;/scope&gt;\r\n\t     &lt;/dependency&gt;\r\n\r\n\t \t&lt;dependency&gt;\r\n\t     \t&lt;groupId&gt;javax.persistence&lt;/groupId&gt;\r\n\t     \t&lt;artifactId&gt;javax.persistence-api&lt;/artifactId&gt;\r\n\t        &lt;scope&gt;provided&lt;/scope&gt;\r\n\t     &lt;/dependency&gt;\r\n\t\r\n\t     &lt;dependency&gt;\r\n\t        &lt;groupId&gt;org.jboss.spec.javax.ws.rs&lt;/groupId&gt;\r\n\t        &lt;artifactId&gt;jboss-jaxrs-api_2.1_spec&lt;/artifactId&gt;\r\n\t        &lt;scope&gt;provided&lt;/scope&gt;\r\n\t     &lt;/dependency&gt;\r\n\t\r\n\t     &lt;dependency&gt;\r\n\t        &lt;groupId&gt;org.jboss.spec.javax.servlet&lt;/groupId&gt;\r\n\t        &lt;artifactId&gt;jboss-servlet-api_4.0_spec&lt;/artifactId&gt;\r\n\t        &lt;scope&gt;provided&lt;/scope&gt;\r\n\t     &lt;/dependency&gt;\r\n\r\n\t    &lt;dependency&gt;\r\n\t       &lt;groupId&gt;org.jboss.spec.javax.ejb&lt;/groupId&gt;\r\n\t       &lt;artifactId&gt;jboss-ejb-api_3.2_spec&lt;/artifactId&gt;\r\n\t       &lt;scope&gt;provided&lt;/scope&gt;\r\n\t    &lt;/dependency&gt;\r\n\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.jboss.resteasy&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;resteasy-jackson2-provider&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;3.11.2.Final&lt;/version&gt; &lt;!-- $NO-MVN-MAN-VER$ --&gt;\t\r\n\t\t\t&lt;scope&gt;provided&lt;/scope&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t\t      \r\n     \t &lt;!-- Tests --&gt;\r\n\t   \r\n\t\t &lt;dependency&gt;\r\n\t\t    &lt;groupId&gt;junit&lt;/groupId&gt;\r\n\t\t    &lt;artifactId&gt;junit&lt;/artifactId&gt;\r\n\t\t    &lt;scope&gt;test&lt;/scope&gt;\r\n\t\t &lt;/dependency&gt;\r\n\t   \r\n\t&lt;/dependencies&gt;  \r\n\r\n\t&lt;build&gt;\r\n\t\t&lt;finalName&gt;${project.artifactId}&lt;/finalName&gt;\r\n\t\t&lt;plugins&gt;\r\n\t\t\t&lt;plugin&gt;\r\n\t\t\t\t&lt;artifactId&gt;maven-war-plugin&lt;/artifactId&gt;\r\n\t\t\t\t&lt;version&gt;3.2.3&lt;/version&gt;\r\n\t\t\t\t&lt;configuration&gt;\r\n\t\t\t\t\t&lt;failOnMissingWebXml&gt;false&lt;/failOnMissingWebXml&gt;\r\n\t\t\t\t&lt;/configuration&gt;\r\n\t\t\t&lt;/plugin&gt;\r\n\t\t&lt;/plugins&gt;\r\n\t&lt;/build&gt;\r\n\t  \r\n&lt;/project&gt;\r\n```","title":"How to have keys in my Json, not only values","body":"<p>I created a datatable from primevue, but I only get empty rows.</p>\n<p>I looked where it could come from and I think it comes from my Json, whose fields have no key. What corrections should be made so that this Json becomes standard again and my data can be displayed? Thanks in advance.</p>\n<p><strong>A short exemple of the Json I get:</strong></p>\n<pre><code>[\n   [\n    32,\n    &quot;DE BELLOUET Jag&quot;,\n    &quot;1.3.13.3.&quot;,\n    &quot;Cid polseruti sau&quot;\n   ],\n   [\n    15,\n    &quot;NOURAUD Benjamin&quot;,\n    &quot;1.3.13.3.&quot;,\n    &quot;Cid polseruti sau&quot;\n   ]\n]\n</code></pre>\n<p><strong>A short exemple of the jSon I need:</strong></p>\n<pre><code>[\n   [\n    &quot;id&quot;:32,\n    &quot;fullName&quot;:&quot;DE BELLOUET Jag&quot;,\n    &quot;acs&quot;:&quot;1.3.13.3.&quot;,\n    &quot;nom_service&quot;:&quot;Cid polseruti sau&quot;\n   ],\n   [\n    &quot;id&quot;:15,\n    &quot;fullName&quot;:&quot;NOURAUD Benjamin&quot;,\n    &quot;acs&quot;:&quot;1.3.13.3.&quot;,\n    &quot;nom_service&quot;:&quot;Cid polseruti sau&quot;\n   ]\n]\n</code></pre>\n<p><strong>The main program: gererPersonnes.vue</strong></p>\n<pre><code>&lt;template&gt;\n    &lt;div class=&quot;principal_personnes&quot;&gt;\n        &lt;div class=&quot;bandeau&quot;&gt;\n            &lt;div&gt;{{titre}}&lt;/div&gt;\n        &lt;/div&gt;\n        &lt;div&gt;\n            &lt;h2&gt;Liste des agents actifs&lt;/h2&gt;\n            &lt;DataTable :value=&quot;agents&quot; :paginator=&quot;true&quot; :rows=&quot;10&quot; class=&quot;tableau&quot;&gt;\n                 &lt;template #empty&gt;\n                    Pas d'agent trouvé.\n                &lt;/template&gt;\n                &lt;Column field=&quot;id&quot; :sortable=&quot;true&quot; header=&quot;Id&quot; headerStyle=&quot;width: 3em&quot; bodyStyle=&quot;text-align: center&quot;&gt;&lt;/Column&gt;\n                &lt;Column field=&quot;fullName&quot; :sortable=&quot;true&quot; header=&quot;Nom - Prénom&quot; headerStyle=&quot;width: 250px&quot;&gt;&lt;/Column&gt;\n                &lt;Column field=&quot;service.acs&quot; :sortable=&quot;true&quot; header=&quot;A.C.S.&quot; headerStyle=&quot;width: 150px&quot;&gt;&lt;/Column&gt;\n                &lt;Column field=&quot;service.nom_service&quot; :sortable=&quot;true&quot; header=&quot;Service&quot; headerStyle=&quot;width: 250px; text-aling: left;&quot;&gt;&lt;/Column&gt;\n                &lt;Column headerStyle=&quot;width: 8em&quot;&gt;\n                    &lt;template #body &gt;\n                        &lt;Button type=&quot;button&quot; icon=&quot;pi pi-user&quot; class=&quot;p-button-text&quot; title=&quot;Détails&quot;&gt;&lt;/Button&gt;\n                        &lt;Button type=&quot;button&quot; icon=&quot;pi pi-pencil&quot; class=&quot;p-button-text&quot; title=&quot;Modifier&quot;&gt;&lt;/Button&gt;\n                        &lt;Button type=&quot;button&quot; icon=&quot;pi pi-trash&quot; class=&quot;p-button-text&quot; title=&quot;Supprimer&quot;&gt;&lt;/Button&gt;\n                    &lt;/template&gt;\n                &lt;/Column&gt;\n            &lt;/DataTable&gt;\n        &lt;/div&gt;\n        &lt;div class=&quot;button_gerer&quot;&gt;\n            &lt;button type=&quot;submit&quot; class=&quot;boutton coin_vert&quot; @click=&quot;cAjouter()&quot;&gt;Ajouter un agent&lt;/button&gt;\n            &lt;button type=&quot;button&quot; class=&quot;boutton coin_rouge&quot; @click=&quot;cQuitter()&quot;&gt;Abandon&lt;/button&gt;\n        &lt;/div&gt;\n    &lt;/div&gt;\n&lt;/template&gt;\n\n&lt;style&gt;\n:root {\n    --gaucheP: 660px;\n}\n\n.principal_personnes {\n    height: var(--haut);\n    width: var(--large);\n    background-color:cornsilk;\n}\n\n.tableau {\n    width: 1000px;\n    margin: 0 auto;\n}\n\n.pi-user {\n    color:blue;\n    font-size: 1em;\n}\n\n.pi-pencil {\n    color:green;\n    font-size: 1em;\n}\n\n.pi-trash {\n    color:red;\n    font-size: 1em;\n}\n\n.p-datatable .p-datatable-tbody &gt; tr &gt; td {\n    text-align: left;\n    border: 1px solid #e9ecef;\n    border-width: 0 0 1px 0;\n    padding: 0rem 0rem;\n}\n\nh2 {\n    text-align:center;\n}\n\n.button_gerer {\n    display: grid;\n    grid-template: 30px / 130px 130px;\n    column-gap: 220px;  /* Firefox 63+ Chrome 84+ */\n    justify-content: stretch;\n    align-content: stretch;\n    padding-left: var(--gaucheP);\n    padding-top: 40px;\n}\n\n&lt;/style&gt;\n\n&lt;script&gt;\nimport DataTable from 'primevue/datatable';\nimport Column from 'primevue/column';\nimport Button from 'primevue/button';\nimport ('primeicons/primeicons.css');\n\nimport AgentService from '../../services/AgentService'\n\nexport default {\n    name: 'gererPersonnes',\n    beforeCreate() {\n        window.self.document.title = &quot;gererPersonnes&quot;; // modification du titre de l'onglet\n        document.getElementById('menuU').style.setProperty('display', 'none'); //menu non affiché\n    },\n    components : {\n        DataTable,\n        Column,\n        Button\n    },\n    data() {\n        return {\n            agents : null,\n            titre: 'Gérer les personnes',\n        }\n    },\n    methods : {\n        cQuitter() {\n            let a = confirm(&quot;Voulez quitter la gestion des personnes ?&quot;);\n            if (a == true) {\n                this.$router.push(&quot;/&quot;);\n            }\n        },\n        cAjouter() {\n            let routeUrl = this.$router.resolve({\n                path : &quot;/agents/add_agent&quot;,\n            });\n            window.open(routeUrl.href, '_blank');\n        }\n    },\n    created() {\n        this.AgentService = new AgentService;\n    },\n    mounted () {\n        this.AgentService.getAgentServices().then(data =&gt; this.agents = data);\n    },\n    AgentService : null\n\n}\n\n\n//Centrage du formulaire de la page\nvar inHeight = window.innerHeight - 140;\nvar inWidth = window.innerWidth;\n\nif (inWidth &gt; 1680) {\n    inWidth = 1680;\n}\n\nvar l = Math.floor((inWidth - 460 - 20)/2);\nvar padLeft = l + 'px';\nvar hauteur = inHeight + 'px';\n\nvar r = document.querySelector(':root');\nr.style.setProperty('--gaucheP', padLeft);\nr.style.setProperty('--haut', hauteur);\n\n&lt;/script&gt;\n</code></pre>\n<p><strong>The service called by gererPersonnes.vue : AgentService.js</strong></p>\n<pre><code>import axios from &quot;axios&quot;;\n\nconst URL = &quot;/cote-s-rest/rest/agent&quot;; \nconst URL2 = &quot;/cote-s-rest/rest/password/&quot;; \nconst URL3 = &quot;/cote-s-rest/rest/agent/patronyme&quot;; \nconst URL4 = &quot;/cote-s-rest/rest/agent/agentServ&quot;;\n\nexport default class AgentService {\n\ninsertAgent(agent) {\n    return axios.post(URL, agent).then(resp =&gt; {\n        return Promise.resolve(resp.data);\n    });\n}\n\npassNewAgent(agent) {\n    return axios.post(URL2, agent).then(resp =&gt; {\n        return Promise.resolve(resp.data);\n    });\n}\n\ngetAgents() {\n    return axios.get(URL3).then(resp =&gt; {\n        return Promise.resolve(resp.data);\n    });\n}\n\ngetAgentServices() {\n    return axios.get(URL4).then(resp =&gt; {\n        return Promise.resolve(resp.data);\n    });\n}\n\n}\n\n</code></pre>\n<p><strong>The class AgentServ use in Java</strong></p>\n<pre><code>    \npackage fr.gouv.finances.douane.cotes.dao.agent;\n\n/**\n * Classe de requete pour la liste &quot;AgentServ&quot;\n * \n * @author Jean Paul Vandekerkhove\n * @version 0.0.2.SNAPSHOT\n */\npublic class AgentServ {\n\n    //------------------------\n    // Attributs\n    //------------------------\n    private long id;\n    private String fullName;\n    private String acs;\n    private String nom_service;\n        \n    //------------------------\n    // Constructeurs\n    //------------------------\n    \n    /**\n     * Constructeur vide\n     */\n    public AgentServ() {\n        super();\n    }\n\n    /**\n     * Constructeur complet\n     * \n     * @param id\n     * @param fullName\n     * @param acs\n     * @param nom_service\n     */\n    public AgentServ(long id, String fullName, String acs, String nom_service) {\n        super();\n        this.id = id;\n        this.fullName = fullName;\n        this.acs = acs;\n        this.nom_service = nom_service;\n    }\n\n    //------------------------\n    // Getters et Setters\n    //------------------------\n    /**\n     * Retourne l'identifiant de l'Agent\n     * @return id - identifiant de l'Agent\n     */\n    public long getId() {\n        return id;\n    }\n    \n    /**\n     * MaJ de l'Identifiant de l'Agent\n     * @param id - Identifiant de l'agent\n     */\n    public void setId(long id) {\n        this.id = id;\n    }\n    \n    /**\n     * Retourne l'identité complete de l'Agent\n     * @return fullName - nom-prénom de l'Agent\n     */\n    public String getFullName() {\n        return fullName;\n    }\n    \n    /**\n     * MaJ de l'identité complete de l'Agent\n     * @param fullName - nom-prénom de l'Agent\n     */\n    public void setFullName(String fullName) {\n        this.fullName = fullName;\n    }\n    \n    /**\n     * Retourne l'acs du service de l'Agent\n     * @return acs - acs du service de l'Agent\n     */\n    public String getAcs() {\n        return acs;\n    }\n    \n    /**\n     * MaJ de l'acs du service de l'Agent\n     * @param acs - acs du service de l'Agent\n     */\n    public void setAcs(String acs) {\n        this.acs = acs;\n    }\n    \n    /**\n     * Retourne le libellé du service de l'Agent\n     * @return nom_service - libellé du service de l'Agent\n     */\n    public String getNom_service() {\n        return nom_service;\n    }\n    \n    /**\n     * MaJ le libellé du service de l'Agent\n     * @param nom_service - libellé du service de l'Agent\n     */\n    public void setNom_service(String nom_service) {\n        this.nom_service = nom_service;\n    }\n\n}\n    \n\n</code></pre>\n<p><strong>The List Method use in AgentDaoImpl.java</strong></p>\n<pre><code>    \n    @SuppressWarnings(&quot;unchecked&quot;)\n    public List&lt;AgentServ&gt; listAgentService() {\n        String buf = null;\n        buf = &quot;SELECT a.id AS id,(btrim(a.nom) || ' ' || btrim(a.prenom)) AS fullName, s.acs AS acs, s.libelle AS nom_service &quot;;\n        buf += &quot;FROM Agent a INNER JOIN Service s ON a.service = s &quot;;\n        buf += &quot;WHERE ((a.actif = true) OR ((a.actif = false) AND (a.dateSuppression &gt;= CURRENT_DATE)))&quot;;\n\n        List&lt;AgentServ&gt; agents= em.createQuery(buf.toString()).getResultList();\n\n        return agents;\n    }\n</code></pre>\n<p><strong>The REST method</strong></p>\n<pre><code>package fr.gouv.finances.douane.cotes.rest.agent;\n\nimport java.util.HashMap;\nimport java.util.HashSet;\nimport java.util.List;\nimport java.util.Map;\nimport java.util.Set;\nimport java.util.logging.Logger;\n\nimport javax.enterprise.context.RequestScoped;\nimport javax.inject.Inject;\nimport javax.persistence.NoResultException;\nimport javax.validation.ConstraintViolation;\nimport javax.validation.ConstraintViolationException;\nimport javax.validation.ValidationException;\nimport javax.validation.Validator;\nimport javax.ws.rs.Consumes;\nimport javax.ws.rs.GET;\nimport javax.ws.rs.POST;\nimport javax.ws.rs.Path;\nimport javax.ws.rs.Produces;\nimport javax.ws.rs.core.Response;\n\nimport fr.gouv.finances.douane.cotes.dao.agent.Agent;\nimport fr.gouv.finances.douane.cotes.dao.agent.AgentDAO;\nimport fr.gouv.finances.douane.cotes.dao.agent.AgentServ;\nimport fr.gouv.finances.douane.cotes.dao.agent.ListAgent;\n/**\n * Classe de ressources REST de la classe ejb Agent\n *\n * @author VANDEKERKHOVE\n * @version 0.0.1.SNAPSHOT\n */\n@Path(&quot;/agent&quot;)\n@RequestScoped\npublic class AgentResourceRESTService {\n\n    @Inject\n    private Logger log;\n\n    @Inject\n    private Validator validator;\n\n    @Inject\n    private AgentDAO repository;\n\n    @GET\n    @Path(&quot;/agentServ&quot;)\n    @Produces(&quot;application/json; charset=UTF-8&quot;)\n    public List&lt;AgentServ&gt; ListAgentService() {\n        return (List&lt;AgentServ&gt;) repository.listAgentService();\n    }\n</code></pre>\n<p><strong>The pom of the rest project</strong></p>\n<pre><code>project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\n  &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n  \n  &lt;parent&gt;\n    &lt;groupId&gt;fr.gouv.finances.douane.cote-s&lt;/groupId&gt;\n    &lt;artifactId&gt;cote-s&lt;/artifactId&gt;\n    &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\n  &lt;/parent&gt;\n  \n  &lt;artifactId&gt;cote-s-rest&lt;/artifactId&gt;\n  &lt;version&gt;${project.parent.version}&lt;/version&gt;\n  &lt;packaging&gt;war&lt;/packaging&gt;\n  &lt;description&gt;Modules Rest de Cote-S&lt;/description&gt;\n  \n    &lt;dependencies&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;fr.gouv.finances.douane.cote-s&lt;/groupId&gt;\n            &lt;artifactId&gt;cote-s-ejb&lt;/artifactId&gt;\n            &lt;version&gt;${project.parent.version}&lt;/version&gt;\n            &lt;type&gt;ejb&lt;/type&gt;\n            &lt;scope&gt;provided&lt;/scope&gt;\n        &lt;/dependency&gt;\n\n         &lt;dependency&gt;\n            &lt;groupId&gt;javax.enterprise&lt;/groupId&gt;\n            &lt;artifactId&gt;cdi-api&lt;/artifactId&gt;\n            &lt;scope&gt;provided&lt;/scope&gt;\n         &lt;/dependency&gt;\n\n         &lt;dependency&gt;\n            &lt;groupId&gt;org.hibernate.validator&lt;/groupId&gt;\n            &lt;artifactId&gt;hibernate-validator&lt;/artifactId&gt;\n            &lt;scope&gt;provided&lt;/scope&gt;\n         &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;javax.persistence&lt;/groupId&gt;\n            &lt;artifactId&gt;javax.persistence-api&lt;/artifactId&gt;\n            &lt;scope&gt;provided&lt;/scope&gt;\n         &lt;/dependency&gt;\n    \n         &lt;dependency&gt;\n            &lt;groupId&gt;org.jboss.spec.javax.ws.rs&lt;/groupId&gt;\n            &lt;artifactId&gt;jboss-jaxrs-api_2.1_spec&lt;/artifactId&gt;\n            &lt;scope&gt;provided&lt;/scope&gt;\n         &lt;/dependency&gt;\n    \n         &lt;dependency&gt;\n            &lt;groupId&gt;org.jboss.spec.javax.servlet&lt;/groupId&gt;\n            &lt;artifactId&gt;jboss-servlet-api_4.0_spec&lt;/artifactId&gt;\n            &lt;scope&gt;provided&lt;/scope&gt;\n         &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n           &lt;groupId&gt;org.jboss.spec.javax.ejb&lt;/groupId&gt;\n           &lt;artifactId&gt;jboss-ejb-api_3.2_spec&lt;/artifactId&gt;\n           &lt;scope&gt;provided&lt;/scope&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.jboss.resteasy&lt;/groupId&gt;\n            &lt;artifactId&gt;resteasy-jackson2-provider&lt;/artifactId&gt;\n            &lt;version&gt;3.11.2.Final&lt;/version&gt; &lt;!-- $NO-MVN-MAN-VER$ --&gt;   \n            &lt;scope&gt;provided&lt;/scope&gt;\n        &lt;/dependency&gt;\n                  \n         &lt;!-- Tests --&gt;\n       \n         &lt;dependency&gt;\n            &lt;groupId&gt;junit&lt;/groupId&gt;\n            &lt;artifactId&gt;junit&lt;/artifactId&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n         &lt;/dependency&gt;\n       \n    &lt;/dependencies&gt;  \n\n    &lt;build&gt;\n        &lt;finalName&gt;${project.artifactId}&lt;/finalName&gt;\n        &lt;plugins&gt;\n            &lt;plugin&gt;\n                &lt;artifactId&gt;maven-war-plugin&lt;/artifactId&gt;\n                &lt;version&gt;3.2.3&lt;/version&gt;\n                &lt;configuration&gt;\n                    &lt;failOnMissingWebXml&gt;false&lt;/failOnMissingWebXml&gt;\n                &lt;/configuration&gt;\n            &lt;/plugin&gt;\n        &lt;/plugins&gt;\n    &lt;/build&gt;\n      \n&lt;/project&gt;\n</code></pre>\n"},{"tags":["java","ibm-mq"],"comments":[{"owner":{"account_id":16673497,"reputation":2011,"user_id":12050506,"display_name":"possum"},"score":0,"creation_date":1669373777,"post_id":74571128,"comment_id":131632420,"body_markdown":"Why can&#39;t you mock them?","body":"Why can&#39;t you mock them?"},{"owner":{"account_id":27043667,"reputation":3,"user_id":20598157,"display_name":"TwiKKz"},"score":0,"creation_date":1676501140,"post_id":74571128,"comment_id":133152043,"body_markdown":"Thank you all! I successfully wrote the tests. But one important information for yall. The MQEnviroment Attributes are static fields. Use a property Mapping when the application should be used by multiple users at the same time. Writing data to static fields could causw problems :)","body":"Thank you all! I successfully wrote the tests. But one important information for yall. The MQEnviroment Attributes are static fields. Use a property Mapping when the application should be used by multiple users at the same time. Writing data to static fields could causw problems :)"}],"answers":[{"tags":[],"owner":{"account_id":2099531,"reputation":6497,"user_id":1867549,"accept_rate":80,"display_name":"&#201;tienne Miret"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1669391736,"creation_date":1669391736,"answer_id":74575223,"question_id":74571128,"body_markdown":"In order to do **unit tests**, you will need to mock the IBM MQ classes, using a framework like [Mockito].\r\n\r\nOne issue you&#39;ll encounter is that you cannot mock the call to the `MQQueueManager` constructor, as the `new` operator cannot be mocked. I would recommend creating a `MqQueueManagerFactory` service, autowire this service into your `QueueConnectionService` and mock it in the test.\r\n\r\nYour unit test will end up looking like this:\r\n\r\n```java\r\n@ExtendWith(MockitoExtension.class)\r\nclass QueueConnectionServiceTest {\r\n\r\n  private static final String TITLE = &quot;Some random string&quot;;\r\n  private static final String QUEUE_MANAGER = &quot;Actual value does not matter&quot;;\r\n  private static final String NAME = &quot;Really. Those constants are magic strings.&quot;;\r\n  private static final int OPTIONS = 42;\r\n\r\n  @InjectMock\r\n  private QueueConnectionService service;\r\n\r\n  @Mock(answer = RETURNS_DEEP_STUBS)\r\n  private MQConfigMapping configMapping;\r\n\r\n  @Mock\r\n  private MqConnectionManagerFactory connectionManagerFactory;\r\n\r\n  @Mock\r\n  private MQConnectionManager connectionManager;\r\n\r\n  @Mock\r\n  private MQQueue queue;\r\n\r\n  @Test\r\n  void should_provide_queue() {\r\n    when(configMapping.getNamed().get(TITLE).getQueueManager()).thenReturn(QUEUE_MANAGER);\r\n    // repeat above line for each configuration parameter.\r\n    // Alternatively, create a config object and:\r\n    when(configMapping.getNamed().get(TITLE)).thenReturn(config);\r\n\r\n    when(connectionManagerFactory.create(QUEUE_MANAGER)).thenReturn(connectionManager);\r\n    when(connectionManager.accessQueue(NAME, OPTIONS)).thenReturn(queue);\r\n\r\n    var actual = service.connect(TITLE, OPTIONS, NAME);\r\n\r\n    assertSame(actual, queue);\r\n  }\r\n\r\n}\r\n```\r\n\r\n(This is with [JUnit 5] and [Mockito]. You would have something slightly different with another testing framework or another mocking framework.)\r\n\r\n[Mockito]: https://site.mockito.org/\r\n[JUnit 5]: https://junit.org/junit5/\r\n\r\nAs a side note, creating a queue manager at each connection smells bad. You probably want to create it once in an `@PostConstruct` method.\r\n","title":"Unit Test IBM MQ","body":"<p>In order to do <strong>unit tests</strong>, you will need to mock the IBM MQ classes, using a framework like <a href=\"https://site.mockito.org/\" rel=\"nofollow noreferrer\">Mockito</a>.</p>\n<p>One issue you'll encounter is that you cannot mock the call to the <code>MQQueueManager</code> constructor, as the <code>new</code> operator cannot be mocked. I would recommend creating a <code>MqQueueManagerFactory</code> service, autowire this service into your <code>QueueConnectionService</code> and mock it in the test.</p>\n<p>Your unit test will end up looking like this:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@ExtendWith(MockitoExtension.class)\nclass QueueConnectionServiceTest {\n\n  private static final String TITLE = &quot;Some random string&quot;;\n  private static final String QUEUE_MANAGER = &quot;Actual value does not matter&quot;;\n  private static final String NAME = &quot;Really. Those constants are magic strings.&quot;;\n  private static final int OPTIONS = 42;\n\n  @InjectMock\n  private QueueConnectionService service;\n\n  @Mock(answer = RETURNS_DEEP_STUBS)\n  private MQConfigMapping configMapping;\n\n  @Mock\n  private MqConnectionManagerFactory connectionManagerFactory;\n\n  @Mock\n  private MQConnectionManager connectionManager;\n\n  @Mock\n  private MQQueue queue;\n\n  @Test\n  void should_provide_queue() {\n    when(configMapping.getNamed().get(TITLE).getQueueManager()).thenReturn(QUEUE_MANAGER);\n    // repeat above line for each configuration parameter.\n    // Alternatively, create a config object and:\n    when(configMapping.getNamed().get(TITLE)).thenReturn(config);\n\n    when(connectionManagerFactory.create(QUEUE_MANAGER)).thenReturn(connectionManager);\n    when(connectionManager.accessQueue(NAME, OPTIONS)).thenReturn(queue);\n\n    var actual = service.connect(TITLE, OPTIONS, NAME);\n\n    assertSame(actual, queue);\n  }\n\n}\n</code></pre>\n<p>(This is with <a href=\"https://junit.org/junit5/\" rel=\"nofollow noreferrer\">JUnit 5</a> and <a href=\"https://site.mockito.org/\" rel=\"nofollow noreferrer\">Mockito</a>. You would have something slightly different with another testing framework or another mocking framework.)</p>\n<p>As a side note, creating a queue manager at each connection smells bad. You probably want to create it once in an <code>@PostConstruct</code> method.</p>\n"},{"tags":[],"owner":{"account_id":7206986,"reputation":4285,"user_id":5502306,"display_name":"chughts"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1669632968,"creation_date":1669632968,"answer_id":74599537,"question_id":74571128,"body_markdown":"You could set up a development queue manager to run unit tests against. See https://developer.ibm.com/learningpaths/ibm-mq-badge/\r\n","title":"Unit Test IBM MQ","body":"<p>You could set up a development queue manager to run unit tests against. See <a href=\"https://developer.ibm.com/learningpaths/ibm-mq-badge/\" rel=\"nofollow noreferrer\">https://developer.ibm.com/learningpaths/ibm-mq-badge/</a></p>\n"}],"owner":{"account_id":27043667,"reputation":3,"user_id":20598157,"display_name":"TwiKKz"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":903,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":74575223,"answer_count":2,"score":0,"last_activity_date":1669632968,"creation_date":1669370840,"question_id":74571128,"body_markdown":"I&#39;m new at the MQ topic.\r\n\r\nHow do I Test/Unit-Test my Java Services, which do actions against a real Queue.\r\nMy classes do connections, deletes etc.\r\n\r\nIs there any way to test these services without performing actions against the productive Queues?\r\n\r\n```\r\n@Service\r\npublic class QueueConnectionService {\r\n\r\n    private final MQConfigMapping configMapping;\r\n\r\n    private MQQueueManager queueManager;\r\n\r\n    @Autowired\r\n    public QueueConnectionService(MQConfigMapping configMapping) {\r\n        this.configMapping = configMapping;\r\n    }\r\n\r\n\r\n    MQQueue connect(String queuePropertyTitle, int openOptions, String queueName) throws MQException {\r\n        MQEnvironment.hostname = configMapping.getNamed().get(queuePropertyTitle).getHostname();\r\n        MQEnvironment.channel = configMapping.getNamed().get(queuePropertyTitle).getChannel();\r\n        MQEnvironment.port = configMapping.getNamed().get(queuePropertyTitle).getPort();\r\n        MQEnvironment.userID = configMapping.getNamed().get(queuePropertyTitle).getUser();\r\n        MQEnvironment.password = configMapping.getNamed().get(queuePropertyTitle).getPassword();\r\n        queueManager = new MQQueueManager(configMapping.getNamed().get(queuePropertyTitle).getQueueManager());\r\n        return queueManager.accessQueue(queueName, openOptions);\r\n    }\r\n}\r\n```\r\n\r\nThis is my QueueConnectionService, but I have no clue how to use this one at local tests.","title":"Unit Test IBM MQ","body":"<p>I'm new at the MQ topic.</p>\n<p>How do I Test/Unit-Test my Java Services, which do actions against a real Queue.\nMy classes do connections, deletes etc.</p>\n<p>Is there any way to test these services without performing actions against the productive Queues?</p>\n<pre><code>@Service\npublic class QueueConnectionService {\n\n    private final MQConfigMapping configMapping;\n\n    private MQQueueManager queueManager;\n\n    @Autowired\n    public QueueConnectionService(MQConfigMapping configMapping) {\n        this.configMapping = configMapping;\n    }\n\n\n    MQQueue connect(String queuePropertyTitle, int openOptions, String queueName) throws MQException {\n        MQEnvironment.hostname = configMapping.getNamed().get(queuePropertyTitle).getHostname();\n        MQEnvironment.channel = configMapping.getNamed().get(queuePropertyTitle).getChannel();\n        MQEnvironment.port = configMapping.getNamed().get(queuePropertyTitle).getPort();\n        MQEnvironment.userID = configMapping.getNamed().get(queuePropertyTitle).getUser();\n        MQEnvironment.password = configMapping.getNamed().get(queuePropertyTitle).getPassword();\n        queueManager = new MQQueueManager(configMapping.getNamed().get(queuePropertyTitle).getQueueManager());\n        return queueManager.accessQueue(queueName, openOptions);\n    }\n}\n</code></pre>\n<p>This is my QueueConnectionService, but I have no clue how to use this one at local tests.</p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":2803497,"reputation":25202,"user_id":2411243,"display_name":"Zabuzard"},"score":6,"creation_date":1614086731,"post_id":66333986,"comment_id":117272493,"body_markdown":"`next` only reads a token (up until a space, a _word_), use `nextLine` instead. And then be prepared for this https://stackoverflow.com/questions/13102045/scanner-is-skipping-nextline-after-using-next-or-nextfoo","body":"<code>next</code> only reads a token (up until a space, a <i>word</i>), use <code>nextLine</code> instead. And then be prepared for this <a href=\"https://stackoverflow.com/questions/13102045/scanner-is-skipping-nextline-after-using-next-or-nextfoo\" title=\"scanner is skipping nextline after using next or nextfoo\">stackoverflow.com/questions/13102045/&hellip;</a>"},{"owner":{"account_id":401843,"reputation":89788,"user_id":768644,"display_name":"rzwitserloot"},"score":0,"creation_date":1614087486,"post_id":66333986,"comment_id":117272869,"body_markdown":"Do not use nextLine - it is common, but very bad advice (it breaks, see the first comment with &#39;but be prepared for&#39;). No, the right fix is to set up your delimiter properly: call `scanner.useDelimiter(&quot;\\r?\\n&quot;)` on your scanner right after making it, forget about nextLine, and use next() to grab strings.","body":"Do not use nextLine - it is common, but very bad advice (it breaks, see the first comment with &#39;but be prepared for&#39;). No, the right fix is to set up your delimiter properly: call <code>scanner.useDelimiter(&quot;\\r?\\n&quot;)</code> on your scanner right after making it, forget about nextLine, and use next() to grab strings."}],"answers":[{"tags":[],"owner":{"account_id":10433138,"reputation":984,"user_id":7692352,"display_name":"Aris"},"down_vote_count":1,"up_vote_count":0,"is_accepted":true,"score":-1,"last_activity_date":1614089703,"creation_date":1614086763,"answer_id":66334040,"question_id":66333986,"body_markdown":"Yes because `sc.next()` goes till the end of the word (eg. space). \r\n\r\nUse instead `sc.nextLine()`\r\n\r\nRead the util.Scanner [documentation](https://docs.oracle.com/javase/7/docs/api/java/util/Scanner.html)\r\n\r\nBut best practice would be to set a **delimiter** and keep using `sc.next()`. \r\n```\r\nString delimiter = &quot; some_delimiter_here &quot;; \\\\e.g. &quot;\\n&quot;\r\nScanner sc = new Scanner(System.in);\r\nsc.useDelimiter(delimiter);\r\n```","title":"How to take input int, double and String consecutive in Java language?","body":"<p>Yes because <code>sc.next()</code> goes till the end of the word (eg. space).</p>\n<p>Use instead <code>sc.nextLine()</code></p>\n<p>Read the util.Scanner <a href=\"https://docs.oracle.com/javase/7/docs/api/java/util/Scanner.html\" rel=\"nofollow noreferrer\">documentation</a></p>\n<p>But best practice would be to set a <strong>delimiter</strong> and keep using <code>sc.next()</code>.</p>\n<pre><code>String delimiter = &quot; some_delimiter_here &quot;; \\\\e.g. &quot;\\n&quot;\nScanner sc = new Scanner(System.in);\nsc.useDelimiter(delimiter);\n</code></pre>\n"}],"owner":{"account_id":19407406,"reputation":7,"user_id":14192572,"display_name":"mdshohed"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1208,"favorite_count":0,"down_vote_count":2,"up_vote_count":0,"closed_date":1614087514,"accepted_answer_id":66334040,"answer_count":1,"score":-2,"last_activity_date":1669632462,"creation_date":1614086574,"question_id":66333986,"body_markdown":"I want to solve this java problem. but i did not proper answer form my code. Below here is my code:\r\n\r\n    public static void main(String[] args) {\r\n        Scanner sc = new Scanner(System.in);\r\n\r\n        int x = sc.nextInt();\r\n        double y = sc.nextDouble();\r\n        String s = sc.nextLine();\r\n\r\n        System.out.println(&quot;Int: &quot; + x);\r\n        System.out.println(&quot;Double: &quot; + y);\r\n        System.out.println(&quot;String: &quot; + s);\r\n    }\r\n\r\nWhen I take input int, double and string variable, I can&#39;t proper answer. below this code&#39;s is input and output:\r\n\r\n    input: \r\n    23\r\n    4434.2323\r\n    \r\n    Give output: \r\n    Int: 23\r\n    Double: 4434.2323\r\n    String: \r\n\r\nAt the input time, i can take int, double variable but i can&#39;t take string input. my code return int and double variable.\r\nIf can anybody help me, I will be benefited.","title":"How to take input int, double and String consecutive in Java language?","body":"<p>I want to solve this java problem. but i did not proper answer form my code. Below here is my code:</p>\n<pre><code>public static void main(String[] args) {\n    Scanner sc = new Scanner(System.in);\n\n    int x = sc.nextInt();\n    double y = sc.nextDouble();\n    String s = sc.nextLine();\n\n    System.out.println(&quot;Int: &quot; + x);\n    System.out.println(&quot;Double: &quot; + y);\n    System.out.println(&quot;String: &quot; + s);\n}\n</code></pre>\n<p>When I take input int, double and string variable, I can't proper answer. below this code's is input and output:</p>\n<pre><code>input: \n23\n4434.2323\n\nGive output: \nInt: 23\nDouble: 4434.2323\nString: \n</code></pre>\n<p>At the input time, i can take int, double variable but i can't take string input. my code return int and double variable.\nIf can anybody help me, I will be benefited.</p>\n"},{"tags":["java","list"],"comments":[{"owner":{"account_id":3116234,"reputation":9296,"user_id":2636929,"display_name":"Stultuske"},"score":0,"creation_date":1669621255,"post_id":74597399,"comment_id":131674919,"body_markdown":"OK ... And what is your actual question/problem?","body":"OK ... And what is your actual question/problem?"},{"owner":{"account_id":15102352,"reputation":49,"user_id":10898983,"display_name":"kamrul Islam Tushar"},"score":0,"creation_date":1669622052,"post_id":74597399,"comment_id":131675158,"body_markdown":"@Stultuske I want to remove items from retailerConversionDtoList which doesn&#39;t exist in retailerDtoList how can I do that in optimized way?","body":"@Stultuske I want to remove items from retailerConversionDtoList which doesn&#39;t exist in retailerDtoList how can I do that in optimized way?"},{"owner":{"account_id":9571720,"reputation":6305,"user_id":7109162,"accept_rate":84,"display_name":"XtremeBaumer"},"score":1,"creation_date":1669622332,"post_id":74597399,"comment_id":131675237,"body_markdown":"Extract ids into a separate list and then use `contains()` function to remove items which IDs are not found `List&lt;String&gt; ids = retailerDtoList.stream().map(e -&gt; e.getCode()).collect(Collectors.toList()); retailerConversionDtoList.removeIf(e -&gt; !ids.contains(e.getRetailerCode()));`","body":"Extract ids into a separate list and then use <code>contains()</code> function to remove items which IDs are not found <code>List&lt;String&gt; ids = retailerDtoList.stream().map(e -&gt; e.getCode()).collect(Collectors.toList()); retailerConversionDtoList.removeIf(e -&gt; !ids.contains(e.getRetailerCode()));</code>"},{"owner":{"account_id":1211967,"reputation":7024,"user_id":1180351,"display_name":"Rob Spoor"},"score":1,"creation_date":1669631923,"post_id":74597399,"comment_id":131678268,"body_markdown":"@XtremeBaumer I&#39;d use a `Set&lt;String&gt;` instead of a `List&lt;String&gt;`, that (usually) makes the `contains` check faster.","body":"@XtremeBaumer I&#39;d use a <code>Set&lt;String&gt;</code> instead of a <code>List&lt;String&gt;</code>, that (usually) makes the <code>contains</code> check faster."}],"answers":[{"tags":[],"owner":{"account_id":16001900,"reputation":328,"user_id":11548316,"display_name":"Preston"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1669631861,"creation_date":1669622425,"answer_id":74597601,"question_id":74597399,"body_markdown":"In 8 or newer Java versions, you can simply use stream API to do it:  \r\n```java\r\nSet&lt;String&gt; retailerCodes = retailerDtoList.stream().map(t -&gt; t.code).collect(Collectors.toSet());\r\nretailerConversionDtoList = retailerConversionDtoList.stream()\r\n    .filter(t -&gt; retailerCodes.contains(t.retailerCode))\r\n    .collect(Collectors.toList());\r\n```\r\nBefore Java 8, then you need to do some hard work by looping:\r\n```java\r\nSet&lt;String&gt; retailerCodes = new HashSet&lt;&gt;();\r\nfor(RetailerDto retailer: retailerDtoList){\r\n    retailerCodes.add(retailer.code);\r\n}\r\n\r\nList&lt;RetailerExcelConversionDto&gt; newRetailerConversionDtoList = new ArrayList&lt;&gt;();\r\nfor(int i = 0; i &lt; retailerConversionDtoList.size(); i++){\r\n    if(retailerCodes.contains(retailerConversionDtoList.get(i).retailerCode))\r\n         newRetailerConversionDtoList.add(retailerConversionDtoList.get(i));\r\n}\r\n```\r\nor\r\n```java\r\nSet&lt;String&gt; retailerCodes = new HashSet&lt;&gt;();\r\nfor(RetailerDto retailer: retailerDtoList){\r\n    retailerCodes.add(retailer.code);\r\n}\r\n\r\nfor(Iterator&lt;RetailerExcelConversionDto&gt; it = retailerConversionDtoList.iterator(); it.hasNext();){\r\n    RetailerExcelConversionDto next = it.next();\r\n    if(!retailerCodes.contains(next.retailerCode))\r\n         it.remove();\r\n}\r\n\r\n```","title":"Remove items from a list of objects which key value doesn&#39;t exist in another one","body":"<p>In 8 or newer Java versions, you can simply use stream API to do it:</p>\n<pre class=\"lang-java prettyprint-override\"><code>Set&lt;String&gt; retailerCodes = retailerDtoList.stream().map(t -&gt; t.code).collect(Collectors.toSet());\nretailerConversionDtoList = retailerConversionDtoList.stream()\n    .filter(t -&gt; retailerCodes.contains(t.retailerCode))\n    .collect(Collectors.toList());\n</code></pre>\n<p>Before Java 8, then you need to do some hard work by looping:</p>\n<pre class=\"lang-java prettyprint-override\"><code>Set&lt;String&gt; retailerCodes = new HashSet&lt;&gt;();\nfor(RetailerDto retailer: retailerDtoList){\n    retailerCodes.add(retailer.code);\n}\n\nList&lt;RetailerExcelConversionDto&gt; newRetailerConversionDtoList = new ArrayList&lt;&gt;();\nfor(int i = 0; i &lt; retailerConversionDtoList.size(); i++){\n    if(retailerCodes.contains(retailerConversionDtoList.get(i).retailerCode))\n         newRetailerConversionDtoList.add(retailerConversionDtoList.get(i));\n}\n</code></pre>\n<p>or</p>\n<pre class=\"lang-java prettyprint-override\"><code>Set&lt;String&gt; retailerCodes = new HashSet&lt;&gt;();\nfor(RetailerDto retailer: retailerDtoList){\n    retailerCodes.add(retailer.code);\n}\n\nfor(Iterator&lt;RetailerExcelConversionDto&gt; it = retailerConversionDtoList.iterator(); it.hasNext();){\n    RetailerExcelConversionDto next = it.next();\n    if(!retailerCodes.contains(next.retailerCode))\n         it.remove();\n}\n\n</code></pre>\n"}],"owner":{"account_id":15102352,"reputation":49,"user_id":10898983,"display_name":"kamrul Islam Tushar"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":306,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1669631861,"creation_date":1669621168,"question_id":74597399,"body_markdown":"I have two following classes. \r\n\r\n```java\r\n    public class RetailerExcelConversionDto {\r\n    \tprivate String retailerCode;\r\n    \tprivate Integer isActive;\r\n    }\r\n    \r\n        public class RetailerDto {\r\n        \tprivate String code;\r\n        \tprivate Integer age;\r\n            private String name;\r\n        \r\n        }\r\n```\r\n\r\nAnd I have these following list \r\n\r\n```java\r\n    List&lt;RetailerExcelConversionDto&gt; retailerConversionDtoList = getAllRetailerConversionDtoList();\r\n    List&lt;RetailerDto&gt; retailerDtoList = getAllRetailer();\r\n```\r\n\r\nWhat I want to achieve is remove item from retailerConversionDtoList which key value (retailerCode) doesn&#39;t exist in retailerDtoList key value (code); In short I want to remove items from retailerConversionDtoList which doesn&#39;t exist in retailerDtoList how can I do that in optimized way?\r\n\r\n","title":"Remove items from a list of objects which key value doesn&#39;t exist in another one","body":"<p>I have two following classes.</p>\n<pre class=\"lang-java prettyprint-override\"><code>    public class RetailerExcelConversionDto {\n        private String retailerCode;\n        private Integer isActive;\n    }\n    \n        public class RetailerDto {\n            private String code;\n            private Integer age;\n            private String name;\n        \n        }\n</code></pre>\n<p>And I have these following list</p>\n<pre class=\"lang-java prettyprint-override\"><code>    List&lt;RetailerExcelConversionDto&gt; retailerConversionDtoList = getAllRetailerConversionDtoList();\n    List&lt;RetailerDto&gt; retailerDtoList = getAllRetailer();\n</code></pre>\n<p>What I want to achieve is remove item from retailerConversionDtoList which key value (retailerCode) doesn't exist in retailerDtoList key value (code); In short I want to remove items from retailerConversionDtoList which doesn't exist in retailerDtoList how can I do that in optimized way?</p>\n"},{"tags":["java","spring","junit","mockito"],"comments":[{"owner":{"account_id":3192259,"reputation":117599,"user_id":2696260,"display_name":"M. Deinum"},"score":1,"creation_date":1669628195,"post_id":74598387,"comment_id":131676992,"body_markdown":"Your code doesn&#39;t comply with your description or code. This doesn&#39;t even compile. Also your mocking is wrong as `new RequestModel()` isn&#39;t the same as the second `new RequestModel()`, Mockito will use the equals method (which I assume you haven&#39;t implemented) to check for equality, those aren&#39;t. Hence it feilas. Also don&#39;t use an `@SpringBootTest` for this, write a simple unit test and make sure you can inject everything through the constructor, instead of fields. Makes your testing way easier.","body":"Your code doesn&#39;t comply with your description or code. This doesn&#39;t even compile. Also your mocking is wrong as <code>new RequestModel()</code> isn&#39;t the same as the second <code>new RequestModel()</code>, Mockito will use the equals method (which I assume you haven&#39;t implemented) to check for equality, those aren&#39;t. Hence it feilas. Also don&#39;t use an <code>@SpringBootTest</code> for this, write a simple unit test and make sure you can inject everything through the constructor, instead of fields. Makes your testing way easier."},{"owner":{"account_id":20525751,"reputation":949,"user_id":15064224,"display_name":"Issa Khodadadi"},"score":0,"creation_date":1669628539,"post_id":74598387,"comment_id":131677104,"body_markdown":"add `@ExtendWith(MockitoExtension.class)` on top of your test class and try again.","body":"add <code>@ExtendWith(MockitoExtension.class)</code> on top of your test class and try again."}],"answers":[{"tags":[],"owner":{"account_id":17653774,"reputation":55,"user_id":12813770,"display_name":"D_J"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1669630915,"creation_date":1669630915,"answer_id":74599143,"question_id":74598387,"body_markdown":"You can find demo application in this blog \r\n\r\n[https://blog.joshsoftware.com/2020/05/27/introduction-to-mockito-unit-testing-framework/][1]","title":"How to mock service in service test?","body":"<p>You can find demo application in this blog</p>\n<p>[https://blog.joshsoftware.com/2020/05/27/introduction-to-mockito-unit-testing-framework/][1]</p>\n"}],"owner":{"account_id":27042476,"reputation":13,"user_id":20597130,"display_name":"Jupiter"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":373,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1669630915,"creation_date":1669627137,"question_id":74598387,"body_markdown":"I try write service test, for example, I have this ExamServiceImpl:\r\n\r\n\r\n```\r\n@Service\r\npublic class ExamServiceImpl implements ExamService {\r\n\r\n@Autowired\r\nprivate final SubjectService subjectService;\r\nprivate final ScoreDAO scoreDAO;\r\n\r\n@Autowired\r\npublic ExamServiceImpl(ScoreDAO scoreDAO) {\r\n    this.scoreDAO = scoreDAO;\r\n}\r\n\r\n@Override\r\npublic ResponseModel insertScore(RequestModel request) throws IOException {\r\n    List&lt;TeacherModel&gt; teacher = teacherDAO.getNameList(request);\r\n    List&lt;StudentModel&gt; student = studentDAO.findStudentList(teacher.get(0).getName, request.getStudentScore);\r\n\r\n    String nameStudent = student.get(0).getFirstName() + student.get(0).getLastName();\r\n    SubjectModel subject = subjectService.getNameSubject(request, nameStudent);\r\n\r\n    ScoreModel score = new ScoreModel();\r\n    score.setStudentName(request.getStudentName);\r\n    score.setScore(request.getStudentScore);\r\n    score.setSubject(subject.getName);\r\n\r\n    int result = scoreDAO.insert(score);\r\n\r\n    return result;\r\n    }\r\n}\r\n```\r\n\r\n\r\nSample my test:\r\n\r\n\r\n```\r\n@SpringBootTest\r\npublic class ExamServiceImplTest {\r\n\r\n@MockBean\r\nprivate ScoreDAO scoreDAO;\r\n\r\n@Autowired\r\nprivate SubjectService subjectService;\r\n\r\n@Autowired\r\nprivate ExamService examService;\r\n\r\n\r\n@Test\r\nvoid insertScoreTest() {\r\n    SubjectModel resFromSubject = new SubjectModel();\r\n    resFromSubject.setSubject(&quot;Math&quot;);\r\n\r\n    TeacherModel resTeacher = new Teacher()\r\n    resTeacher.setName(&quot;test Teacher&quot;);\r\n\r\n    StudentModel studentData = new Student();\r\n    student.setFirstName(&quot;firstname&quot;);\r\n    studebt.setLastName(&quot;lastname&quot;);\r\n\r\n    Mockito.when(teacherDAO.getNameList(new RequestModel())).thenReturn(resTeacher);\r\n    Mockito.when(studentDAO.findStudentList(anyString(), anyString())).thenReturn(studentData);\r\n    Mockito.when(subjectService.getNameSubject(Mokito.any(RequestModel.class), anyString())).thenReturn(resFromSubject);\r\n    Mockito.when(scoreDAO.insert(Mokito.any(ScoreModel.class)).thenReturn(1);\r\n\r\n    int resultTest = examService.insertScore(new RequestModel());\r\n    assertSame(ex, 1);\r\n\r\n}\r\n```\r\n\r\nBut output resultTest is error. I try debugger, I found \r\n  1. Mock studentDAO.findStudentList() return null &gt;&gt; mock is not working. \r\n  2. When I close code + test teacherDAO and studentDAO for test mock subjectService &gt;&gt; mock subjectService is not working too. (I not sure mock service should be use @Autowired or @MorkBean)\r\n\r\nPlease, could you help write me test methods? I covered with tests more simple other services.\r\n\r\nThank you!","title":"How to mock service in service test?","body":"<p>I try write service test, for example, I have this ExamServiceImpl:</p>\n<pre><code>@Service\npublic class ExamServiceImpl implements ExamService {\n\n@Autowired\nprivate final SubjectService subjectService;\nprivate final ScoreDAO scoreDAO;\n\n@Autowired\npublic ExamServiceImpl(ScoreDAO scoreDAO) {\n    this.scoreDAO = scoreDAO;\n}\n\n@Override\npublic ResponseModel insertScore(RequestModel request) throws IOException {\n    List&lt;TeacherModel&gt; teacher = teacherDAO.getNameList(request);\n    List&lt;StudentModel&gt; student = studentDAO.findStudentList(teacher.get(0).getName, request.getStudentScore);\n\n    String nameStudent = student.get(0).getFirstName() + student.get(0).getLastName();\n    SubjectModel subject = subjectService.getNameSubject(request, nameStudent);\n\n    ScoreModel score = new ScoreModel();\n    score.setStudentName(request.getStudentName);\n    score.setScore(request.getStudentScore);\n    score.setSubject(subject.getName);\n\n    int result = scoreDAO.insert(score);\n\n    return result;\n    }\n}\n</code></pre>\n<p>Sample my test:</p>\n<pre><code>@SpringBootTest\npublic class ExamServiceImplTest {\n\n@MockBean\nprivate ScoreDAO scoreDAO;\n\n@Autowired\nprivate SubjectService subjectService;\n\n@Autowired\nprivate ExamService examService;\n\n\n@Test\nvoid insertScoreTest() {\n    SubjectModel resFromSubject = new SubjectModel();\n    resFromSubject.setSubject(&quot;Math&quot;);\n\n    TeacherModel resTeacher = new Teacher()\n    resTeacher.setName(&quot;test Teacher&quot;);\n\n    StudentModel studentData = new Student();\n    student.setFirstName(&quot;firstname&quot;);\n    studebt.setLastName(&quot;lastname&quot;);\n\n    Mockito.when(teacherDAO.getNameList(new RequestModel())).thenReturn(resTeacher);\n    Mockito.when(studentDAO.findStudentList(anyString(), anyString())).thenReturn(studentData);\n    Mockito.when(subjectService.getNameSubject(Mokito.any(RequestModel.class), anyString())).thenReturn(resFromSubject);\n    Mockito.when(scoreDAO.insert(Mokito.any(ScoreModel.class)).thenReturn(1);\n\n    int resultTest = examService.insertScore(new RequestModel());\n    assertSame(ex, 1);\n\n}\n</code></pre>\n<p>But output resultTest is error. I try debugger, I found</p>\n<ol>\n<li>Mock studentDAO.findStudentList() return null &gt;&gt; mock is not working.</li>\n<li>When I close code + test teacherDAO and studentDAO for test mock subjectService &gt;&gt; mock subjectService is not working too. (I not sure mock service should be use @Autowired or @MorkBean)</li>\n</ol>\n<p>Please, could you help write me test methods? I covered with tests more simple other services.</p>\n<p>Thank you!</p>\n"}],"has_more":true,"quota_max":10000,"quota_remaining":9143,"page":849,"page_size":100}
