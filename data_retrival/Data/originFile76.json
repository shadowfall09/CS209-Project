{"items":[{"tags":["java","pdf","casting","camunda","camunda-modeler"],"comments":[{"owner":{"account_id":1888781,"reputation":2007,"user_id":1707427,"display_name":"S&#246;ren"},"score":0,"creation_date":1699214113,"post_id":77427429,"comment_id":136500361,"body_markdown":"You cannot cast an Object to a completely unrelated class. What makes you think you can do this?","body":"You cannot cast an Object to a completely unrelated class. What makes you think you can do this?"}],"answers":[{"tags":[],"owner":{"account_id":24247260,"reputation":21,"user_id":18198798,"display_name":"Jan Rohwer"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1699355842,"creation_date":1699355842,"answer_id":77437758,"question_id":77427429,"body_markdown":"Use the method getVariableTyped of the DelegateExecution instead. You then get a typed version of the variable, where you can explore the type and access the correct value.\r\nIt also supports a second parameter to deserialize the value (I&#39;m not sure if that&#39;s the default for the method with just one parameter).\r\nIn your third attempt the type of the variable is String, so you have to access it as a string and decode that.","title":"Casting problems when attempting to access pdf from Camunda cockpit variables to be sent as email in Java class","body":"<p>Use the method getVariableTyped of the DelegateExecution instead. You then get a typed version of the variable, where you can explore the type and access the correct value.\nIt also supports a second parameter to deserialize the value (I'm not sure if that's the default for the method with just one parameter).\nIn your third attempt the type of the variable is String, so you have to access it as a string and decode that.</p>\n"}],"owner":{"account_id":26473042,"reputation":9,"user_id":20113376,"display_name":"b_a9f"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":37,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1699355842,"creation_date":1699213788,"question_id":77427429,"body_markdown":"My goal here is to access an execution variable of type pdf that i uploaded earlier, then to send this pdf as an attachment in an email using a Java class referenced in a service task.\r\n\r\n[Cockpit Variables][1]\r\n\r\n^the pdf I&#39;m targeting is the &quot;proofOfRequestFile&quot;. It&#39;s binary data is in &quot;pdf&quot;\r\n\r\n**Attempt 1:**\r\n```\r\n        FileValue pdfVariable = (FileValue) delegateExecution.getVariable(&quot;proofOfRequestFile&quot;);\r\n```\r\nReturns error:\r\n\r\n*class java.io.ByteArrayInputStream cannot be cast to class org.camunda.bpm.engine.variable.value.FileValue (java.io.ByteArrayInputStream is in module java.base of loader &#39;bootstrap&#39;; org.camunda.bpm.engine.variable.value.FileValue is in unnamed module of loader org.springframework.boot.loader.LaunchedURLClassLoader @4f7d0008)*\r\n\r\n*PS: Using (File) instead of (FileValue) returns the same error*\r\n\r\n**Attempt 2:**\r\n\r\n```\r\nbyte[] pdfBytes = (byte[]) delegateExecution.getVariable(&quot;proofOfRequestFile&quot;);\r\n\r\n```\r\n\r\nReturns error:\r\n\r\n*class java.io.ByteArrayInputStream cannot be cast to class [B (java.io.ByteArrayInputStream and [B are in module java.base of loader &#39;bootstrap&#39;)*\r\n\r\n\r\n**Attempt 3:**\r\n\r\nI tried using the binary variable containing the pdf (shown in picture above)\r\n\r\n```\r\n        byte[] pdfBytes = (byte[]) execution.getVariable(&quot;pdf&quot;);\r\n```\r\n\r\nReturns error:\r\n*class java.lang.String cannot be cast to class [B (java.lang.String and [B are in module java.base of loader &#39;bootstrap&#39;)*\r\n\r\n  [1]: https://i.stack.imgur.com/VvM3h.png","title":"Casting problems when attempting to access pdf from Camunda cockpit variables to be sent as email in Java class","body":"<p>My goal here is to access an execution variable of type pdf that i uploaded earlier, then to send this pdf as an attachment in an email using a Java class referenced in a service task.</p>\n<p><a href=\"https://i.stack.imgur.com/VvM3h.png\" rel=\"nofollow noreferrer\">Cockpit Variables</a></p>\n<p>^the pdf I'm targeting is the &quot;proofOfRequestFile&quot;. It's binary data is in &quot;pdf&quot;</p>\n<p><strong>Attempt 1:</strong></p>\n<pre><code>        FileValue pdfVariable = (FileValue) delegateExecution.getVariable(&quot;proofOfRequestFile&quot;);\n</code></pre>\n<p>Returns error:</p>\n<p><em>class java.io.ByteArrayInputStream cannot be cast to class org.camunda.bpm.engine.variable.value.FileValue (java.io.ByteArrayInputStream is in module java.base of loader 'bootstrap'; org.camunda.bpm.engine.variable.value.FileValue is in unnamed module of loader org.springframework.boot.loader.LaunchedURLClassLoader @4f7d0008)</em></p>\n<p><em>PS: Using (File) instead of (FileValue) returns the same error</em></p>\n<p><strong>Attempt 2:</strong></p>\n<pre><code>byte[] pdfBytes = (byte[]) delegateExecution.getVariable(&quot;proofOfRequestFile&quot;);\n\n</code></pre>\n<p>Returns error:</p>\n<p><em>class java.io.ByteArrayInputStream cannot be cast to class [B (java.io.ByteArrayInputStream and [B are in module java.base of loader 'bootstrap')</em></p>\n<p><strong>Attempt 3:</strong></p>\n<p>I tried using the binary variable containing the pdf (shown in picture above)</p>\n<pre><code>        byte[] pdfBytes = (byte[]) execution.getVariable(&quot;pdf&quot;);\n</code></pre>\n<p>Returns error:\n<em>class java.lang.String cannot be cast to class [B (java.lang.String and [B are in module java.base of loader 'bootstrap')</em></p>\n"},{"tags":["java","android","flutter","notifications","notificationlistenerservice"],"comments":[{"owner":{"account_id":7669922,"reputation":3251,"user_id":5812524,"display_name":"Ozan Taskiran"},"score":0,"creation_date":1699356440,"post_id":77437750,"comment_id":136518728,"body_markdown":"Did you add the permission in the correct AndroidManifest?","body":"Did you add the permission in the correct AndroidManifest?"},{"owner":{"account_id":18234918,"reputation":69,"user_id":13273146,"display_name":"Stel K9"},"score":0,"creation_date":1699363332,"post_id":77437750,"comment_id":136519999,"body_markdown":"@OzanTaskiran Yes I did, in the /android/app/src/main/AndroidManifest.xml","body":"@OzanTaskiran Yes I did, in the /android/app/src/main/AndroidManifest.xml"}],"owner":{"account_id":18234918,"reputation":69,"user_id":13273146,"display_name":"Stel K9"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":34,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1699355774,"creation_date":1699355774,"question_id":77437750,"body_markdown":"I&#39;m using this package `notification_listener_service` on flutter for reading the notifications on android device.\r\n\r\nIt works in debug, but when I make the release with `flutter build apk --release` it doesn&#39;t listen to the notifications, neither if I build it with `flutter build apk --debug`\r\n\r\nI gave permission in the AndroidManifest:\r\n\r\n    &lt;service\r\n            android:label=&quot;notifications&quot;\r\n            android:name=&quot;notification.listener.service.NotificationListener&quot;\r\n            android:permission=&quot;android.permission.BIND_NOTIFICATION_LISTENER_SERVICE&quot;\r\n            android:exported=&quot;true&quot;&gt;\r\n            &lt;intent-filter&gt;\r\n                &lt;action android:name=&quot;android.service.notification.NotificationListenerService&quot; /&gt;\r\n            &lt;/intent-filter&gt;\r\n        &lt;/service&gt;\r\n\r\n\r\nAnd the code is this:\r\n```\r\nimport &#39;dart:math&#39;;\r\n\r\nimport &#39;package:flutter/material.dart&#39;;\r\nimport &#39;package:notification_listener_service/notification_event.dart&#39;;\r\nimport &#39;package:notification_listener_service/notification_listener_service.dart&#39;;\r\n\r\nvoid main() {\r\n  runApp(MaterialApp(\r\n    home: HomePage(),\r\n    debugShowCheckedModeBanner: false,\r\n    debugShowMaterialGrid: false,\r\n  ));\r\n}\r\n\r\nclass HomePage extends StatefulWidget {\r\n  const HomePage({super.key});\r\n\r\n  @override\r\n  State&lt;HomePage&gt; createState() =&gt; _HomePageState();\r\n}\r\n\r\nclass _HomePageState extends State&lt;HomePage&gt; {\r\n  bool havePermission = false;\r\n  String errorMessage = &quot;&quot;;\r\n  final List&lt;ServiceNotificationEvent&gt; events = [];\r\n\r\n  @override\r\n  void initState() {\r\n    super.initState();\r\n    print(&quot;INIT STATE&quot;);\r\n    checkPermission();\r\n  }\r\n\r\n  Future&lt;void&gt; checkPermission() async {\r\n    /// check if notification permession is enebaled\r\n    bool status = await NotificationListenerService.isPermissionGranted();\r\n\r\n    /// if permission listen notifications\r\n    if (status) listen();\r\n\r\n    havePermission = status;\r\n    setState(() {});\r\n  }\r\n\r\n  Future&lt;void&gt; listen() async {\r\n    try {\r\n      print(&quot;LISTEN&quot;);\r\n      NotificationListenerService.notificationsStream.listen((event) {\r\n        print(&quot;NEW EVENT: &quot;);\r\n        print(event);\r\n\r\n        events.add(event);\r\n        setState(() {});\r\n      });\r\n    } catch (e) {\r\n      await Future.delayed(Duration(milliseconds: 100));\r\n      errorMessage = e.toString();\r\n      setState(() {});\r\n    }\r\n  }\r\n\r\n  Future&lt;void&gt; sendReply(ServiceNotificationEvent event) async {\r\n    await Future.delayed(Duration(seconds: 2));\r\n\r\n    print(event.packageName?.contains(&quot;telegram&quot;));\r\n\r\n    if (event.packageName?.contains(&quot;telegram&quot;) ?? false) {\r\n      final msg = [&quot;ciaooo&quot;, &quot;Come va?&quot;, &quot;Sono una AI replier&quot;];\r\n      event.sendReply(msg[Random().nextInt(3)]);\r\n    }\r\n  }\r\n\r\n  @override\r\n  Widget build(BuildContext context) {\r\n    return MaterialApp(\r\n      home: Scaffold(\r\n        appBar: AppBar(\r\n          title: Text(&#39;Escort Reply Messages&#39;),\r\n        ),\r\n        body: SingleChildScrollView(\r\n          padding: EdgeInsets.all(32),\r\n          child: Column(\r\n            mainAxisAlignment: MainAxisAlignment.center,\r\n            crossAxisAlignment: CrossAxisAlignment.center,\r\n            children: [\r\n              Text(&quot;Permission added: ${havePermission ? &quot;Yes&quot; : &quot;No&quot;}&quot;),\r\n              SizedBox(height: 32),\r\n              Text(&quot;Error: ${errorMessage.isNotEmpty}&quot;),\r\n              Text(\r\n                errorMessage,\r\n                style: TextStyle(color: Colors.red),\r\n              ),\r\n              SizedBox(height: 32),\r\n              Text(&quot;Your notification&quot;),\r\n              ListView.separated(\r\n                itemCount: events.length,\r\n                padding: EdgeInsets.symmetric(vertical: 32),\r\n                shrinkWrap: true,\r\n                separatorBuilder: (_, i) =&gt; Divider(color: Colors.black),\r\n                itemBuilder: (_, i) =&gt; Row(\r\n                  children: [\r\n                    Expanded(\r\n                      child: Text(\r\n                        &quot;packageName: ${events[i].packageName}\\ntitle: ${events[i].title}\\ncontent: ${events[i].content}\\ncanReply: ${events[i].canReply}&quot;,\r\n                      ),\r\n                    ),\r\n                  ],\r\n                ),\r\n              ),\r\n            ],\r\n          ),\r\n        ),\r\n      ),\r\n    );\r\n  }\r\n}\r\n```\r\n\r\nWhen I&#39;m running it in debug it works, I gave permission to read notifications on my android device, the listener start, when I receive a notification is successfully added to the list of notifications and showed in the list.\r\n\r\nBut in release the listener doesn&#39;t start, and I don&#39;t have any error, every time I receive a notification it doesn&#39;t added to the list of notifications.\r\n\r\nSomebody can help me?","title":"Flutter package notification_listener_service works only in debug mode","body":"<p>I'm using this package <code>notification_listener_service</code> on flutter for reading the notifications on android device.</p>\n<p>It works in debug, but when I make the release with <code>flutter build apk --release</code> it doesn't listen to the notifications, neither if I build it with <code>flutter build apk --debug</code></p>\n<p>I gave permission in the AndroidManifest:</p>\n<pre><code>&lt;service\n        android:label=&quot;notifications&quot;\n        android:name=&quot;notification.listener.service.NotificationListener&quot;\n        android:permission=&quot;android.permission.BIND_NOTIFICATION_LISTENER_SERVICE&quot;\n        android:exported=&quot;true&quot;&gt;\n        &lt;intent-filter&gt;\n            &lt;action android:name=&quot;android.service.notification.NotificationListenerService&quot; /&gt;\n        &lt;/intent-filter&gt;\n    &lt;/service&gt;\n</code></pre>\n<p>And the code is this:</p>\n<pre><code>import 'dart:math';\n\nimport 'package:flutter/material.dart';\nimport 'package:notification_listener_service/notification_event.dart';\nimport 'package:notification_listener_service/notification_listener_service.dart';\n\nvoid main() {\n  runApp(MaterialApp(\n    home: HomePage(),\n    debugShowCheckedModeBanner: false,\n    debugShowMaterialGrid: false,\n  ));\n}\n\nclass HomePage extends StatefulWidget {\n  const HomePage({super.key});\n\n  @override\n  State&lt;HomePage&gt; createState() =&gt; _HomePageState();\n}\n\nclass _HomePageState extends State&lt;HomePage&gt; {\n  bool havePermission = false;\n  String errorMessage = &quot;&quot;;\n  final List&lt;ServiceNotificationEvent&gt; events = [];\n\n  @override\n  void initState() {\n    super.initState();\n    print(&quot;INIT STATE&quot;);\n    checkPermission();\n  }\n\n  Future&lt;void&gt; checkPermission() async {\n    /// check if notification permession is enebaled\n    bool status = await NotificationListenerService.isPermissionGranted();\n\n    /// if permission listen notifications\n    if (status) listen();\n\n    havePermission = status;\n    setState(() {});\n  }\n\n  Future&lt;void&gt; listen() async {\n    try {\n      print(&quot;LISTEN&quot;);\n      NotificationListenerService.notificationsStream.listen((event) {\n        print(&quot;NEW EVENT: &quot;);\n        print(event);\n\n        events.add(event);\n        setState(() {});\n      });\n    } catch (e) {\n      await Future.delayed(Duration(milliseconds: 100));\n      errorMessage = e.toString();\n      setState(() {});\n    }\n  }\n\n  Future&lt;void&gt; sendReply(ServiceNotificationEvent event) async {\n    await Future.delayed(Duration(seconds: 2));\n\n    print(event.packageName?.contains(&quot;telegram&quot;));\n\n    if (event.packageName?.contains(&quot;telegram&quot;) ?? false) {\n      final msg = [&quot;ciaooo&quot;, &quot;Come va?&quot;, &quot;Sono una AI replier&quot;];\n      event.sendReply(msg[Random().nextInt(3)]);\n    }\n  }\n\n  @override\n  Widget build(BuildContext context) {\n    return MaterialApp(\n      home: Scaffold(\n        appBar: AppBar(\n          title: Text('Escort Reply Messages'),\n        ),\n        body: SingleChildScrollView(\n          padding: EdgeInsets.all(32),\n          child: Column(\n            mainAxisAlignment: MainAxisAlignment.center,\n            crossAxisAlignment: CrossAxisAlignment.center,\n            children: [\n              Text(&quot;Permission added: ${havePermission ? &quot;Yes&quot; : &quot;No&quot;}&quot;),\n              SizedBox(height: 32),\n              Text(&quot;Error: ${errorMessage.isNotEmpty}&quot;),\n              Text(\n                errorMessage,\n                style: TextStyle(color: Colors.red),\n              ),\n              SizedBox(height: 32),\n              Text(&quot;Your notification&quot;),\n              ListView.separated(\n                itemCount: events.length,\n                padding: EdgeInsets.symmetric(vertical: 32),\n                shrinkWrap: true,\n                separatorBuilder: (_, i) =&gt; Divider(color: Colors.black),\n                itemBuilder: (_, i) =&gt; Row(\n                  children: [\n                    Expanded(\n                      child: Text(\n                        &quot;packageName: ${events[i].packageName}\\ntitle: ${events[i].title}\\ncontent: ${events[i].content}\\ncanReply: ${events[i].canReply}&quot;,\n                      ),\n                    ),\n                  ],\n                ),\n              ),\n            ],\n          ),\n        ),\n      ),\n    );\n  }\n}\n</code></pre>\n<p>When I'm running it in debug it works, I gave permission to read notifications on my android device, the listener start, when I receive a notification is successfully added to the list of notifications and showed in the list.</p>\n<p>But in release the listener doesn't start, and I don't have any error, every time I receive a notification it doesn't added to the list of notifications.</p>\n<p>Somebody can help me?</p>\n"},{"tags":["java","sql","postgresql","jpa"],"answers":[{"tags":[],"owner":{"account_id":8884226,"reputation":514,"user_id":6633045,"display_name":"phuongnq1995"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1699355046,"creation_date":1699355046,"answer_id":77437683,"question_id":77332763,"body_markdown":"The problem is that the columns used in the ORDER BY aren&#39;t specified in the DISTINCT refer to this [post](https://blog.jooq.org/how-sql-distinct-and-order-by-are-related/). If you try to run this, it will raise the same error.\r\n```\r\nselect distinct e \r\nfrom employee e\r\nwhere data-&gt;&#39;loan&#39;-&gt;&gt;&#39;type&#39; LIKE &#39;%Car%&#39;\r\norder by data-&gt;&#39;loan&#39;-&gt;&gt;&#39;type&#39; asc\r\n```\r\nTo tackle this you can remove `distinct QueryHint` in query.\r\n\r\nIf you still need to order let&#39;s add it into your select\r\n```\r\nselect distinct e, data-&gt;&#39;loan&#39;-&gt;&gt;&#39;type&#39; as loan_type\r\nfrom employee e\r\nwhere data-&gt;&#39;loan&#39;-&gt;&gt;&#39;type&#39; LIKE &#39;%Car%&#39;\r\norder by data-&gt;&#39;loan&#39;-&gt;&gt;&#39;type&#39; asc\r\n```\r\n","title":"How can I modify the below code in order to by a specific field name from a JsonBMap type in JPA?","body":"<p>The problem is that the columns used in the ORDER BY aren't specified in the DISTINCT refer to this <a href=\"https://blog.jooq.org/how-sql-distinct-and-order-by-are-related/\" rel=\"nofollow noreferrer\">post</a>. If you try to run this, it will raise the same error.</p>\n<pre><code>select distinct e \nfrom employee e\nwhere data-&gt;'loan'-&gt;&gt;'type' LIKE '%Car%'\norder by data-&gt;'loan'-&gt;&gt;'type' asc\n</code></pre>\n<p>To tackle this you can remove <code>distinct QueryHint</code> in query.</p>\n<p>If you still need to order let's add it into your select</p>\n<pre><code>select distinct e, data-&gt;'loan'-&gt;&gt;'type' as loan_type\nfrom employee e\nwhere data-&gt;'loan'-&gt;&gt;'type' LIKE '%Car%'\norder by data-&gt;'loan'-&gt;&gt;'type' asc\n</code></pre>\n"}],"owner":{"account_id":20013102,"reputation":641,"user_id":14669745,"display_name":"Pawan.Java"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":83,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":1,"score":2,"last_activity_date":1699355046,"creation_date":1697822608,"question_id":77332763,"body_markdown":"so i am trying to sort asc/desc from a JsonBMap in JPA, which i can easily do in my Postgres console:\r\n\r\n````\r\nselect e from employee e\r\n         where data-&gt;&#39;loan&#39;-&gt;&gt;&#39;type&#39; LIKE &#39;%Car%&#39;\r\norder by data-&gt;&#39;loan&#39;-&gt;&gt;&#39;type&#39; asc\r\n\r\n````\r\n\r\nPlease note that data is my JsonB map name and here&#39;s the code I am using to do the ordering:\r\n\r\n````\r\nprivate static void setOrderBy(Collection&lt;String&gt; orderBys, CriteriaBuilder criteriaBuilder, CriteriaQuery criteriaQuery, From root, Map&lt;String, Map&lt;String, String&gt;&gt; jsonBMap) {\r\n        final List&lt;Order&gt; orders = new ArrayList&lt;&gt;();\r\n        criteriaQuery.distinct(true);\r\n        var mapName = jsonBMap.keySet().stream().findFirst().orElse(null);\r\n        var map = jsonBMap.get(mapName);\r\n\r\n        orderBys.stream()\r\n                .map(field -&gt; {\r\n                    var isFieldDesc = field.startsWith(&quot;-&quot;);\r\n                    var fieldWithoutSign = isFieldDesc ? field.substring(1) : field;\r\n\r\n                    if (map.get(fieldWithoutSign) != null) {\r\n                        var value = map.get(fieldWithoutSign);\r\n                        Expression&lt;?&gt;[] expressions = Stream.of(List.of(root.get(mapName)), getExpressions(value, criteriaBuilder))\r\n                                .flatMap(List::stream)\r\n                                .toArray(Expression&lt;?&gt;[]::new);\r\n                        Expression&lt;String&gt; expression = criteriaBuilder.function(&quot;jsonb_extract_path_text&quot;, String.class, expressions);\r\n                        return isFieldDesc ? criteriaBuilder.desc(expression) : criteriaBuilder.asc(expression);\r\n                    } else {\r\n                        String[] explodedPath = fieldWithoutSign.split(&quot;\\\\.&quot;);\r\n                        Path&lt;?&gt; selection = explodedPathAsPath(root, explodedPath);\r\n                        return isFieldDesc ? criteriaBuilder.desc(selection) : criteriaBuilder.asc(selection);\r\n                    }\r\n                }).forEach(orders::add);\r\n\r\n        criteriaQuery.orderBy(orders);\r\n    }\r\n````\r\n\r\nKindly note that I have even added the configuration to register the function below in my Postgres Config\r\n````\r\n registerFunction(&quot;jsonb_extract_path_text&quot;, new SQLFunctionTemplate(StringType.INSTANCE, &quot;jsonb_extract_path_text(?1, ?2, ?3)&quot;));\r\n````\r\n\r\nAfter executing:\r\n\r\n````\r\ncriteriaQuery.multiselect(List.of(mainObject,order.getExpression));\r\nTypedQuery&lt;Object[]&gt; query = entityManager.createQuery(criteriaQuery);\r\nreturn query.getResultStream();\r\n````\r\n\r\nThe **query.getResultStream()** is throwing the error below:\r\n\r\n````\r\nCaused by: org.postgresql.util.PSQLException: ERROR: for SELECT DISTINCT, ORDER BY expressions must appear in select list\r\n  Position: 739\r\n\tat org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2505)\r\n\tat org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:2241)\r\n\tat org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:310)\r\n\tat org.postgresql.jdbc.PgStatement.executeInternal(PgStatement.java:447)\r\n\tat org.postgresql.jdbc.PgStatement.execute(PgStatement.java:368)\r\n\tat org.postgresql.jdbc.PgPreparedStatement.executeWithFlags(PgPreparedStatement.java:158)\r\n\tat org.postgresql.jdbc.PgPreparedStatement.executeQuery(PgPreparedStatement.java:108)\r\n\tat io.agroal.pool.wrapper.PreparedStatementWrapper.executeQuery(PreparedStatementWrapper.java:76)\r\n\tat org.hibernate.engine.jdbc.internal.ResultSetReturnImpl.extract(ResultSetReturnImpl.java:57)\r\n````\r\n\r\nCan you please advise?","title":"How can I modify the below code in order to by a specific field name from a JsonBMap type in JPA?","body":"<p>so i am trying to sort asc/desc from a JsonBMap in JPA, which i can easily do in my Postgres console:</p>\n<pre><code>select e from employee e\n         where data-&gt;'loan'-&gt;&gt;'type' LIKE '%Car%'\norder by data-&gt;'loan'-&gt;&gt;'type' asc\n\n</code></pre>\n<p>Please note that data is my JsonB map name and here's the code I am using to do the ordering:</p>\n<pre><code>private static void setOrderBy(Collection&lt;String&gt; orderBys, CriteriaBuilder criteriaBuilder, CriteriaQuery criteriaQuery, From root, Map&lt;String, Map&lt;String, String&gt;&gt; jsonBMap) {\n        final List&lt;Order&gt; orders = new ArrayList&lt;&gt;();\n        criteriaQuery.distinct(true);\n        var mapName = jsonBMap.keySet().stream().findFirst().orElse(null);\n        var map = jsonBMap.get(mapName);\n\n        orderBys.stream()\n                .map(field -&gt; {\n                    var isFieldDesc = field.startsWith(&quot;-&quot;);\n                    var fieldWithoutSign = isFieldDesc ? field.substring(1) : field;\n\n                    if (map.get(fieldWithoutSign) != null) {\n                        var value = map.get(fieldWithoutSign);\n                        Expression&lt;?&gt;[] expressions = Stream.of(List.of(root.get(mapName)), getExpressions(value, criteriaBuilder))\n                                .flatMap(List::stream)\n                                .toArray(Expression&lt;?&gt;[]::new);\n                        Expression&lt;String&gt; expression = criteriaBuilder.function(&quot;jsonb_extract_path_text&quot;, String.class, expressions);\n                        return isFieldDesc ? criteriaBuilder.desc(expression) : criteriaBuilder.asc(expression);\n                    } else {\n                        String[] explodedPath = fieldWithoutSign.split(&quot;\\\\.&quot;);\n                        Path&lt;?&gt; selection = explodedPathAsPath(root, explodedPath);\n                        return isFieldDesc ? criteriaBuilder.desc(selection) : criteriaBuilder.asc(selection);\n                    }\n                }).forEach(orders::add);\n\n        criteriaQuery.orderBy(orders);\n    }\n</code></pre>\n<p>Kindly note that I have even added the configuration to register the function below in my Postgres Config</p>\n<pre><code> registerFunction(&quot;jsonb_extract_path_text&quot;, new SQLFunctionTemplate(StringType.INSTANCE, &quot;jsonb_extract_path_text(?1, ?2, ?3)&quot;));\n</code></pre>\n<p>After executing:</p>\n<pre><code>criteriaQuery.multiselect(List.of(mainObject,order.getExpression));\nTypedQuery&lt;Object[]&gt; query = entityManager.createQuery(criteriaQuery);\nreturn query.getResultStream();\n</code></pre>\n<p>The <strong>query.getResultStream()</strong> is throwing the error below:</p>\n<pre><code>Caused by: org.postgresql.util.PSQLException: ERROR: for SELECT DISTINCT, ORDER BY expressions must appear in select list\n  Position: 739\n    at org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2505)\n    at org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:2241)\n    at org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:310)\n    at org.postgresql.jdbc.PgStatement.executeInternal(PgStatement.java:447)\n    at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:368)\n    at org.postgresql.jdbc.PgPreparedStatement.executeWithFlags(PgPreparedStatement.java:158)\n    at org.postgresql.jdbc.PgPreparedStatement.executeQuery(PgPreparedStatement.java:108)\n    at io.agroal.pool.wrapper.PreparedStatementWrapper.executeQuery(PreparedStatementWrapper.java:76)\n    at org.hibernate.engine.jdbc.internal.ResultSetReturnImpl.extract(ResultSetReturnImpl.java:57)\n</code></pre>\n<p>Can you please advise?</p>\n"},{"tags":["java","liquibase"],"answers":[{"tags":[],"owner":{"account_id":6996101,"reputation":603,"user_id":5596281,"display_name":"EM90"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1699354898,"creation_date":1699354898,"answer_id":77437670,"question_id":77436796,"body_markdown":"I found a solution [here](https://github.com/micronaut-projects/micronaut-liquibase/issues/4). As suggested [in this post](https://github.com/micronaut-projects/micronaut-liquibase/issues/4#issuecomment-489592968), we can use the dependency (Gradle):\r\n```\r\ncompile (&quot;org.liquibase:liquibase-core:3.6.3&quot;) {\r\n    exclude group: &#39;org.springframework&#39;\r\n}\r\n```\r\nwhich in my case translates to (Maven):\r\n```\r\n&lt;dependency&gt;\r\n    &lt;groupId&gt;org.liquibase&lt;/groupId&gt;\r\n\t&lt;artifactId&gt;liquibase-core&lt;/artifactId&gt;\r\n\t&lt;version&gt;3.6.3&lt;/version&gt;\r\n&lt;/dependency&gt;\r\n```\r\nThis solves the problem.","title":"Liquibase throws Java `IllegalArgumentException` with message `URI is not hierarchical`","body":"<p>I found a solution <a href=\"https://github.com/micronaut-projects/micronaut-liquibase/issues/4\" rel=\"nofollow noreferrer\">here</a>. As suggested <a href=\"https://github.com/micronaut-projects/micronaut-liquibase/issues/4#issuecomment-489592968\" rel=\"nofollow noreferrer\">in this post</a>, we can use the dependency (Gradle):</p>\n<pre><code>compile (&quot;org.liquibase:liquibase-core:3.6.3&quot;) {\n    exclude group: 'org.springframework'\n}\n</code></pre>\n<p>which in my case translates to (Maven):</p>\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;org.liquibase&lt;/groupId&gt;\n    &lt;artifactId&gt;liquibase-core&lt;/artifactId&gt;\n    &lt;version&gt;3.6.3&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n<p>This solves the problem.</p>\n"}],"owner":{"account_id":6996101,"reputation":603,"user_id":5596281,"display_name":"EM90"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":40,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":77437670,"answer_count":1,"score":0,"last_activity_date":1699354898,"creation_date":1699347632,"question_id":77436796,"body_markdown":"I am trying to use [Liquibase](https://www.liquibase.org/) in a simple project.\r\n\r\nIn order to familiarize with the solution, I set up a simple Spring Boot project with database (PostgreSQL) connection and added the Liquibase dependency.\r\n\r\nThe dependencies in the `pom.xml` file are:\r\n```xml\r\n    [OMISSIS]\r\n\r\n\t&lt;dependencies&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.postgresql&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;postgresql&lt;/artifactId&gt;\r\n\t\t\t&lt;scope&gt;runtime&lt;/scope&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;lombok&lt;/artifactId&gt;\r\n\t\t\t&lt;optional&gt;true&lt;/optional&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\r\n\t\t\t&lt;scope&gt;test&lt;/scope&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n\t\t&lt;!-- Liquibase --&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.liquibase&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;liquibase-core&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;3.6.2&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t&lt;/dependencies&gt;\r\n\r\n    [OMISSIS]\r\n```\r\n\r\nI create a `User.java` entity class as follows:\r\n```java\r\npackage [OMISSIS].liquidemo.entity;\r\n\r\nimport jakarta.persistence.*;\r\nimport lombok.Data;\r\n\r\n@Data\r\n@Entity\r\n@Table(name = &quot;user&quot;)\r\npublic class User {\r\n\r\n    @Id\r\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\r\n    @Column(name = &quot;id&quot;, nullable = false)\r\n    private Long id;\r\n\r\n    @Column(name = &quot;first_name&quot;)\r\n    private String firstName;\r\n\r\n    @Column(name = &quot;last_name&quot;)\r\n    private String lastName;\r\n}\r\n```\r\n\r\nMoreover, I create the `db.changelog-master.xml` file as indicated (directory `src/main/resources/db/changelog/db.changelog-master.xml`) and I generate the baseline changelog for the project. Up to this point there were no problems.\r\n\r\nWhen I try to trigger Liquibase Update, I get the following error:\r\n```\r\n[OMISSIS]/java liquibase.integration.commandline.Main --driver org.postgresql.Driver --changeLogFile db/changelog/db.changelog-master.xml --url jdbc:postgresql://[DATABASE_URL]:[DATABASE_PORT]/[DATABASE_NAME] --username [USERNAME] --password [PASSWORD] update\r\nStarting Liquibase at [OMISSIS] CET (version 3.6.2 built at 2018-07-03 11:28:09)\r\nUnexpected error running Liquibase: URI is not hierarchical\r\njava.lang.IllegalArgumentException: URI is not hierarchical\r\n\tat java.base/java.io.File.&lt;init&gt;(File.java:420)\r\n\tat liquibase.resource.FileSystemResourceAccessor.addRootPath(FileSystemResourceAccessor.java:51)\r\n\tat liquibase.resource.AbstractResourceAccessor.init(AbstractResourceAccessor.java:39)\r\n\tat liquibase.resource.FileSystemResourceAccessor.init(FileSystemResourceAccessor.java:44)\r\n\tat liquibase.resource.FileSystemResourceAccessor.&lt;init&gt;(FileSystemResourceAccessor.java:26)\r\n\tat liquibase.integration.commandline.Main.doMigration(Main.java:949)\r\n\tat liquibase.integration.commandline.Main.run(Main.java:191)\r\n\tat liquibase.integration.commandline.Main.main(Main.java:129)\r\n\r\nFor more information, please use the --logLevel flag\r\n```\r\n\r\nWhy is that?","title":"Liquibase throws Java `IllegalArgumentException` with message `URI is not hierarchical`","body":"<p>I am trying to use <a href=\"https://www.liquibase.org/\" rel=\"nofollow noreferrer\">Liquibase</a> in a simple project.</p>\n<p>In order to familiarize with the solution, I set up a simple Spring Boot project with database (PostgreSQL) connection and added the Liquibase dependency.</p>\n<p>The dependencies in the <code>pom.xml</code> file are:</p>\n<pre class=\"lang-xml prettyprint-override\"><code>    [OMISSIS]\n\n    &lt;dependencies&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.postgresql&lt;/groupId&gt;\n            &lt;artifactId&gt;postgresql&lt;/artifactId&gt;\n            &lt;scope&gt;runtime&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\n            &lt;artifactId&gt;lombok&lt;/artifactId&gt;\n            &lt;optional&gt;true&lt;/optional&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;\n\n        &lt;!-- Liquibase --&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.liquibase&lt;/groupId&gt;\n            &lt;artifactId&gt;liquibase-core&lt;/artifactId&gt;\n            &lt;version&gt;3.6.2&lt;/version&gt;\n        &lt;/dependency&gt;\n    &lt;/dependencies&gt;\n\n    [OMISSIS]\n</code></pre>\n<p>I create a <code>User.java</code> entity class as follows:</p>\n<pre class=\"lang-java prettyprint-override\"><code>package [OMISSIS].liquidemo.entity;\n\nimport jakarta.persistence.*;\nimport lombok.Data;\n\n@Data\n@Entity\n@Table(name = &quot;user&quot;)\npublic class User {\n\n    @Id\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\n    @Column(name = &quot;id&quot;, nullable = false)\n    private Long id;\n\n    @Column(name = &quot;first_name&quot;)\n    private String firstName;\n\n    @Column(name = &quot;last_name&quot;)\n    private String lastName;\n}\n</code></pre>\n<p>Moreover, I create the <code>db.changelog-master.xml</code> file as indicated (directory <code>src/main/resources/db/changelog/db.changelog-master.xml</code>) and I generate the baseline changelog for the project. Up to this point there were no problems.</p>\n<p>When I try to trigger Liquibase Update, I get the following error:</p>\n<pre><code>[OMISSIS]/java liquibase.integration.commandline.Main --driver org.postgresql.Driver --changeLogFile db/changelog/db.changelog-master.xml --url jdbc:postgresql://[DATABASE_URL]:[DATABASE_PORT]/[DATABASE_NAME] --username [USERNAME] --password [PASSWORD] update\nStarting Liquibase at [OMISSIS] CET (version 3.6.2 built at 2018-07-03 11:28:09)\nUnexpected error running Liquibase: URI is not hierarchical\njava.lang.IllegalArgumentException: URI is not hierarchical\n    at java.base/java.io.File.&lt;init&gt;(File.java:420)\n    at liquibase.resource.FileSystemResourceAccessor.addRootPath(FileSystemResourceAccessor.java:51)\n    at liquibase.resource.AbstractResourceAccessor.init(AbstractResourceAccessor.java:39)\n    at liquibase.resource.FileSystemResourceAccessor.init(FileSystemResourceAccessor.java:44)\n    at liquibase.resource.FileSystemResourceAccessor.&lt;init&gt;(FileSystemResourceAccessor.java:26)\n    at liquibase.integration.commandline.Main.doMigration(Main.java:949)\n    at liquibase.integration.commandline.Main.run(Main.java:191)\n    at liquibase.integration.commandline.Main.main(Main.java:129)\n\nFor more information, please use the --logLevel flag\n</code></pre>\n<p>Why is that?</p>\n"},{"tags":["java","css","svg","batik"],"owner":{"account_id":3239634,"reputation":20214,"user_id":2732991,"accept_rate":80,"display_name":"Halvor Holsten Strand"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":24,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1699354617,"creation_date":1699354617,"question_id":77437633,"body_markdown":"I&#39;m using Batik in Java to display and dynamically alter SVG. Say I have the following SVG:\r\n\r\n```\r\n&lt;svg width=&quot;200&quot; height=&quot;200&quot; xmlns=&quot;http://www.w3.org/2000/svg&quot;&gt;\r\n    &lt;rect id=&quot;item&quot; width=&quot;100&quot; height=&quot;100&quot; x=&quot;50&quot; y=&quot;50&quot; /&gt;\r\n&lt;/svg&gt;\r\n```\r\n\r\nI would like to be able to add an external stylesheet reference, either in the file or programatically in Java, so I can apply a fill as follows:\r\n\r\n```\r\nSVGDocument document = ... // load it\r\nElement element = document.getRootElement().getElementById(&quot;item&quot;);\r\nelement.setAttribute(&quot;class&quot;, &quot;blue&quot;);\r\n```\r\n\r\nI&#39;ve done it using SVG attributes (e.g. `fill=&quot;#FFFFFF&quot;`) and in-file CSS (e.g. `&lt;style type=&quot;text/css&quot;&gt;...`), but I am looking to make it work with external CSS.\r\n\r\nI&#39;ve tried adding this to the start of the SVG file:\r\n\r\n```\r\n&lt;?xml version=&quot;1.0&quot; standalone=&quot;no&quot;?&gt;\r\n&lt;!DOCTYPE svg PUBLIC &quot;-//W3C//DTD SVG 1.0//EN&quot; &quot;http://www.w3.org/TR/2001/REC-SVG-20010904/DTD/svg10.dtd&quot;&gt;\r\n&lt;?xml-stylesheet type=&quot;text/css&quot; href=&quot;styles.css&quot; ?&gt;\r\n```\r\n\r\nBut it appears to not register the file, or not find the file. Both the SVG and the CSS file are located in a resources package in my Java project. How can I make this work?\r\n\r\nI&#39;m open to moving the CSS-reference to the Java code instead of it being in the SVG, but ideally they should remain as resource files.","title":"Use external stylesheet from resource with Batik in Java","body":"<p>I'm using Batik in Java to display and dynamically alter SVG. Say I have the following SVG:</p>\n<pre><code>&lt;svg width=&quot;200&quot; height=&quot;200&quot; xmlns=&quot;http://www.w3.org/2000/svg&quot;&gt;\n    &lt;rect id=&quot;item&quot; width=&quot;100&quot; height=&quot;100&quot; x=&quot;50&quot; y=&quot;50&quot; /&gt;\n&lt;/svg&gt;\n</code></pre>\n<p>I would like to be able to add an external stylesheet reference, either in the file or programatically in Java, so I can apply a fill as follows:</p>\n<pre><code>SVGDocument document = ... // load it\nElement element = document.getRootElement().getElementById(&quot;item&quot;);\nelement.setAttribute(&quot;class&quot;, &quot;blue&quot;);\n</code></pre>\n<p>I've done it using SVG attributes (e.g. <code>fill=&quot;#FFFFFF&quot;</code>) and in-file CSS (e.g. <code>&lt;style type=&quot;text/css&quot;&gt;...</code>), but I am looking to make it work with external CSS.</p>\n<p>I've tried adding this to the start of the SVG file:</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; standalone=&quot;no&quot;?&gt;\n&lt;!DOCTYPE svg PUBLIC &quot;-//W3C//DTD SVG 1.0//EN&quot; &quot;http://www.w3.org/TR/2001/REC-SVG-20010904/DTD/svg10.dtd&quot;&gt;\n&lt;?xml-stylesheet type=&quot;text/css&quot; href=&quot;styles.css&quot; ?&gt;\n</code></pre>\n<p>But it appears to not register the file, or not find the file. Both the SVG and the CSS file are located in a resources package in my Java project. How can I make this work?</p>\n<p>I'm open to moving the CSS-reference to the Java code instead of it being in the SVG, but ideally they should remain as resource files.</p>\n"},{"tags":["java","json","serialization","reflection","jackson"],"comments":[{"owner":{"account_id":1087271,"reputation":64101,"user_id":1082681,"accept_rate":90,"display_name":"kriegaex"},"score":0,"creation_date":1699091161,"post_id":77421244,"comment_id":136489648,"body_markdown":"Where is your complete, minimal reproducer?","body":"Where is your complete, minimal reproducer?"},{"owner":{"account_id":1133060,"reputation":243,"user_id":1118679,"display_name":"Eugene_Z"},"score":0,"creation_date":1699098692,"post_id":77421244,"comment_id":136490299,"body_markdown":"kriegaex, sorry, reproducer of what?","body":"kriegaex, sorry, reproducer of what?"},{"owner":{"account_id":16744354,"reputation":504,"user_id":12103109,"display_name":"CaptainAye"},"score":0,"creation_date":1699104961,"post_id":77421244,"comment_id":136490843,"body_markdown":"does that help? https://stackoverflow.com/questions/65568597/jackson-objectmapper-how-to-omit-ignore-fields-of-certain-type-from-serializa","body":"does that help? <a href=\"https://stackoverflow.com/questions/65568597/jackson-objectmapper-how-to-omit-ignore-fields-of-certain-type-from-serializa\" title=\"jackson objectmapper how to omit ignore fields of certain type from serializa\">stackoverflow.com/questions/65568597/&hellip;</a>"},{"owner":{"account_id":1087271,"reputation":64101,"user_id":1082681,"accept_rate":90,"display_name":"kriegaex"},"score":0,"creation_date":1699145286,"post_id":77421244,"comment_id":136494675,"body_markdown":"@Eugene_Z, of your situation, of course. Nobody can debug and correct invisible code.Please learn [how to ask a question on SO](https://stackoverflow.com/help/how-to-ask) and provide a [minimal, complete, and verifiable example](https://stackoverflow.com/help/mcve). Thank you.","body":"@Eugene_Z, of your situation, of course. Nobody can debug and correct invisible code.Please learn <a href=\"https://stackoverflow.com/help/how-to-ask\">how to ask a question on SO</a> and provide a <a href=\"https://stackoverflow.com/help/mcve\">minimal, complete, and verifiable example</a>. Thank you."},{"owner":{"account_id":111563,"reputation":13269,"user_id":294657,"accept_rate":85,"display_name":"kaqqao"},"score":0,"creation_date":1699278044,"post_id":77421244,"comment_id":136507533,"body_markdown":"@kriegaex The question is how to configure Jackson. There&#39;s nothing to debug.","body":"@kriegaex The question is how to configure Jackson. There&#39;s nothing to debug."},{"owner":{"account_id":1087271,"reputation":64101,"user_id":1082681,"accept_rate":90,"display_name":"kriegaex"},"score":0,"creation_date":1699286154,"post_id":77421244,"comment_id":136509412,"body_markdown":"@kaqqao, the OP did not post any code, as is customary here. That code is helpful or even necessary to understand a question or its answer, is proven by your own example code. Basically, you were friendly enough to do the OP&#39;s job to provide sample code. Lucky for him, that you understood or at least were able to make an educated guess about what he was asking. Your guess is that the only problem is Jackson config, which might be right or wrong. BTW, the OP did not even mention Jackson in his question. It even was you who added the tag on his behalf.","body":"@kaqqao, the OP did not post any code, as is customary here. That code is helpful or even necessary to understand a question or its answer, is proven by your own example code. Basically, you were friendly enough to do the OP&#39;s job to provide sample code. Lucky for him, that you understood or at least were able to make an educated guess about what he was asking. Your guess is that the only problem is Jackson config, which might be right or wrong. BTW, the OP did not even mention Jackson in his question. It even was you who added the tag on his behalf."},{"owner":{"account_id":1087271,"reputation":64101,"user_id":1082681,"accept_rate":90,"display_name":"kriegaex"},"score":0,"creation_date":1699317169,"post_id":77421244,"comment_id":136514152,"body_markdown":"@kaqqao, do you see now what I mean? Your educated guess was good, your effort laudable. But finally, your guess was not entirely correct, so the OP wrote and accepted his own answer. Suddenly, he came up with sample code and added more details about his situations. If he had let his code speak by providing a reproducer for his situation and current implementation, explaining what was wrong with it and how he expected it to function instead, you probably could have answered it in no time, reaping the fruits of your work by means of an accepted answer without much guessing or debate (with me).","body":"@kaqqao, do you see now what I mean? Your educated guess was good, your effort laudable. But finally, your guess was not entirely correct, so the OP wrote and accepted his own answer. Suddenly, he came up with sample code and added more details about his situations. If he had let his code speak by providing a reproducer for his situation and current implementation, explaining what was wrong with it and how he expected it to function instead, you probably could have answered it in no time, reaping the fruits of your work by means of an accepted answer without much guessing or debate (with me)."},{"owner":{"account_id":1087271,"reputation":64101,"user_id":1082681,"accept_rate":90,"display_name":"kriegaex"},"score":0,"creation_date":1699317277,"post_id":77421244,"comment_id":136514164,"body_markdown":"Hence my meta comment about the [MCVE](https://stackoverflow.com/help/mcve). An MCVE is the cornerstone of a good question and dramatically improves the probability of getting a spot-on answer quickly. My corresponding comments are meant to educate and guide users to ask better questions in the future for their own benefit and everyone else&#39;s.","body":"Hence my meta comment about the <a href=\"https://stackoverflow.com/help/mcve\">MCVE</a>. An MCVE is the cornerstone of a good question and dramatically improves the probability of getting a spot-on answer quickly. My corresponding comments are meant to educate and guide users to ask better questions in the future for their own benefit and everyone else&#39;s."}],"answers":[{"tags":[],"owner":{"account_id":111563,"reputation":13269,"user_id":294657,"accept_rate":85,"display_name":"kaqqao"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1699354244,"creation_date":1699277860,"answer_id":77431500,"question_id":77421244,"body_markdown":"Always remember that Jackson is literal magic and is endlessly customizable :)\r\n\r\nThere are many ways to achieve what you want.\r\n\r\nLet&#39;s suppose you have the following DTO class and want to exclude `File`:\r\n\r\n```java\r\npublic class SimpleDTO {\r\n\r\n    private final File file;\r\n    private final String name;\r\n\r\n    @JsonCreator\r\n    public SimpleDTO(@JsonProperty(&quot;file&quot;) File file, @JsonProperty(&quot;name&quot;) String name) {\r\n        this.file = file;\r\n        this.name = name;\r\n    }\r\n\r\n    public File getFile() {\r\n        return file;\r\n    }\r\n\r\n    public String getName() {\r\n        return name;\r\n    }\r\n}\r\n```\r\n\r\n##### Mix-ins\r\n\r\nYou can create a mix-in such as:\r\n\r\n```java\r\n@JsonIgnoreType\r\npublic interface IgnoreTypeMixin {}\r\n```\r\n\r\nAnd then use it when serializing:\r\n\r\n```java\r\n//Pretend the File class was annotated by @JsonIgnoreType\r\nObjectMapper mapper = new ObjectMapper().addMixIn(File.class, IgnoreTypeMixin.class);\r\n\r\nString serialized = mapper.writeValueAsString(new SimpleDTO(new File(&quot;/tmp/simple.txt&quot;), &quot;A kewl name&quot;));\r\nSystem.out.println(serialized); //Prints {&quot;name&quot;:&quot;A kewl name&quot;}\r\n```\r\n\r\nInstead of `@JsonIgnoreType`, you could have also mixed-in `@JsonIgnore` to the `file` field in `SimpleDTO` or `@JsonIgnoreProperties(value = { &quot;file&quot; })` or any other Jackson annotation. Here&#39;s an [overview of annotations used to ignore fields](https://www.baeldung.com/jackson-ignore-properties-on-serialization).\r\n\r\nNote: Do not create a new `ObjectMapper` each time. Configure one instance for serialization and share it forever.\r\n\r\n##### Programmatic configuration\r\n\r\nMix-ins let you add annotations from the outside, but annotations are still static configuration. If you have to dynamically choose fields (not only by type) to ignore, annotations, mixed-in or not, won&#39;t suffice. Jackson, being magic and all, lets you achieve programmatically anything that can be done via annotations:\r\n\r\n\r\n```java\r\npublic class FieldFilteringIntrospector extends NopAnnotationIntrospector {\r\n\r\n    private final Set&lt;Class&lt;?&gt;&gt; ignoredTypes;\r\n\r\n    public FieldFilteringIntrospector(Set&lt;Class&lt;?&gt;&gt; ignoredTypes) {\r\n        this.ignoredTypes = Collections.unmodifiableSet(ignoredTypes);\r\n    }\r\n\r\n    public FieldFilteringIntrospector(Class&lt;?&gt;... ignoredTypes) {\r\n        this.ignoredTypes = Arrays.stream(ignoredTypes).collect(Collectors.toUnmodifiableSet());\r\n    }\r\n\r\n    @Override\r\n    public Boolean isIgnorableType(AnnotatedClass ac) {\r\n        return ignoredTypes.contains(ac.getRawType());\r\n    }\r\n}\r\n```\r\n\r\nAnd then use it when serializing:\r\n\r\n```java\r\nSimpleModule module = new SimpleModule(&quot;type-filter-module&quot;) {\r\n    @Override\r\n    public void setupModule(SetupContext context) {\r\n        super.setupModule(context);\r\n        context.insertAnnotationIntrospector(new FieldFilteringIntrospector(File.class));\r\n    }\r\n};\r\nObjectMapper mapper = new ObjectMapper().registerModule(module);\r\n\r\nString serialized = mapper.writeValueAsString(new SimpleDTO(new File(&quot;/tmp/simple.txt&quot;), &quot;A kewl name&quot;));\r\nSystem.out.println(serialized); //Prints {&quot;name&quot;:&quot;A kewl name&quot;}\r\n```\r\n\r\nBy overriding other methods from `NopAnnotationIntrospector`, you can emulate other annotations, `@JsonIgnore` and others.\r\n\r\nNote: Again, create an `ObjectMapper` only once.","title":"How can I skip fields of certain types during serialization?","body":"<p>Always remember that Jackson is literal magic and is endlessly customizable :)</p>\n<p>There are many ways to achieve what you want.</p>\n<p>Let's suppose you have the following DTO class and want to exclude <code>File</code>:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class SimpleDTO {\n\n    private final File file;\n    private final String name;\n\n    @JsonCreator\n    public SimpleDTO(@JsonProperty(&quot;file&quot;) File file, @JsonProperty(&quot;name&quot;) String name) {\n        this.file = file;\n        this.name = name;\n    }\n\n    public File getFile() {\n        return file;\n    }\n\n    public String getName() {\n        return name;\n    }\n}\n</code></pre>\n<h5>Mix-ins</h5>\n<p>You can create a mix-in such as:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@JsonIgnoreType\npublic interface IgnoreTypeMixin {}\n</code></pre>\n<p>And then use it when serializing:</p>\n<pre class=\"lang-java prettyprint-override\"><code>//Pretend the File class was annotated by @JsonIgnoreType\nObjectMapper mapper = new ObjectMapper().addMixIn(File.class, IgnoreTypeMixin.class);\n\nString serialized = mapper.writeValueAsString(new SimpleDTO(new File(&quot;/tmp/simple.txt&quot;), &quot;A kewl name&quot;));\nSystem.out.println(serialized); //Prints {&quot;name&quot;:&quot;A kewl name&quot;}\n</code></pre>\n<p>Instead of <code>@JsonIgnoreType</code>, you could have also mixed-in <code>@JsonIgnore</code> to the <code>file</code> field in <code>SimpleDTO</code> or <code>@JsonIgnoreProperties(value = { &quot;file&quot; })</code> or any other Jackson annotation. Here's an <a href=\"https://www.baeldung.com/jackson-ignore-properties-on-serialization\" rel=\"nofollow noreferrer\">overview of annotations used to ignore fields</a>.</p>\n<p>Note: Do not create a new <code>ObjectMapper</code> each time. Configure one instance for serialization and share it forever.</p>\n<h5>Programmatic configuration</h5>\n<p>Mix-ins let you add annotations from the outside, but annotations are still static configuration. If you have to dynamically choose fields (not only by type) to ignore, annotations, mixed-in or not, won't suffice. Jackson, being magic and all, lets you achieve programmatically anything that can be done via annotations:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class FieldFilteringIntrospector extends NopAnnotationIntrospector {\n\n    private final Set&lt;Class&lt;?&gt;&gt; ignoredTypes;\n\n    public FieldFilteringIntrospector(Set&lt;Class&lt;?&gt;&gt; ignoredTypes) {\n        this.ignoredTypes = Collections.unmodifiableSet(ignoredTypes);\n    }\n\n    public FieldFilteringIntrospector(Class&lt;?&gt;... ignoredTypes) {\n        this.ignoredTypes = Arrays.stream(ignoredTypes).collect(Collectors.toUnmodifiableSet());\n    }\n\n    @Override\n    public Boolean isIgnorableType(AnnotatedClass ac) {\n        return ignoredTypes.contains(ac.getRawType());\n    }\n}\n</code></pre>\n<p>And then use it when serializing:</p>\n<pre class=\"lang-java prettyprint-override\"><code>SimpleModule module = new SimpleModule(&quot;type-filter-module&quot;) {\n    @Override\n    public void setupModule(SetupContext context) {\n        super.setupModule(context);\n        context.insertAnnotationIntrospector(new FieldFilteringIntrospector(File.class));\n    }\n};\nObjectMapper mapper = new ObjectMapper().registerModule(module);\n\nString serialized = mapper.writeValueAsString(new SimpleDTO(new File(&quot;/tmp/simple.txt&quot;), &quot;A kewl name&quot;));\nSystem.out.println(serialized); //Prints {&quot;name&quot;:&quot;A kewl name&quot;}\n</code></pre>\n<p>By overriding other methods from <code>NopAnnotationIntrospector</code>, you can emulate other annotations, <code>@JsonIgnore</code> and others.</p>\n<p>Note: Again, create an <code>ObjectMapper</code> only once.</p>\n"},{"tags":[],"owner":{"account_id":1133060,"reputation":243,"user_id":1118679,"display_name":"Eugene_Z"},"down_vote_count":1,"up_vote_count":0,"is_accepted":true,"score":-1,"last_activity_date":1699291134,"creation_date":1699291134,"answer_id":77433024,"question_id":77421244,"body_markdown":"I have changeable list of prohibited classes in YAML properties file, so I can&#39;t use mixins. The task was solved in this way:\r\n\r\n    @Value(&quot;${classes-to-remove}&quot;)\r\n    private String classesToRemove;\r\n    \r\n    public String getClearedJson(MyDTO myDTO) {\r\n        List&lt;String&gt; fieldNamesToRemove = new ArrayList&lt;&gt;();\r\n\r\n        for (Field field: myDTO.getClass().getDeclaredFields()) {\r\n            if (classesToRemove.contains(field.getType().getSimpleName())) {\r\n                fieldNamesToRemove.add(field.getName());\r\n                continue;\r\n            }\r\n\r\n            if (field.getGenericType() instanceof ParameterizedType) {\r\n                ParameterizedType listType = (ParameterizedType) field.getGenericType();\r\n                Class&lt;?&gt; listClass = (Class&lt;?&gt;) listType.getActualTypeArguments()[0];\r\n                if (classesToRemove.contains(listClass.getSimpleName())) {\r\n                    fieldNamesToRemove.add(field.getName());\r\n                }\r\n            }\r\n        }\r\n\r\n        String json = objectMapper.writeValueAsString(myDTO);\r\n        JsonNode jsonNode = objectMapper.readTree(json);\r\n        ObjectNode object = (ObjectNode) jsonNode;\r\n        fieldNamesToRemove.forEach(object::remove);\r\n        String updatedJson = objectMapper.writeValueAsString(object);\r\n        \r\n        return updatedJson;\r\n    }","title":"How can I skip fields of certain types during serialization?","body":"<p>I have changeable list of prohibited classes in YAML properties file, so I can't use mixins. The task was solved in this way:</p>\n<pre><code>@Value(&quot;${classes-to-remove}&quot;)\nprivate String classesToRemove;\n\npublic String getClearedJson(MyDTO myDTO) {\n    List&lt;String&gt; fieldNamesToRemove = new ArrayList&lt;&gt;();\n\n    for (Field field: myDTO.getClass().getDeclaredFields()) {\n        if (classesToRemove.contains(field.getType().getSimpleName())) {\n            fieldNamesToRemove.add(field.getName());\n            continue;\n        }\n\n        if (field.getGenericType() instanceof ParameterizedType) {\n            ParameterizedType listType = (ParameterizedType) field.getGenericType();\n            Class&lt;?&gt; listClass = (Class&lt;?&gt;) listType.getActualTypeArguments()[0];\n            if (classesToRemove.contains(listClass.getSimpleName())) {\n                fieldNamesToRemove.add(field.getName());\n            }\n        }\n    }\n\n    String json = objectMapper.writeValueAsString(myDTO);\n    JsonNode jsonNode = objectMapper.readTree(json);\n    ObjectNode object = (ObjectNode) jsonNode;\n    fieldNamesToRemove.forEach(object::remove);\n    String updatedJson = objectMapper.writeValueAsString(object);\n    \n    return updatedJson;\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":19868781,"reputation":24,"user_id":14555439,"display_name":"Sachin De Silva"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1699293000,"creation_date":1699292661,"answer_id":77433178,"question_id":77421244,"body_markdown":"you can use an object mapper to overcome this or can be used getDeclaredFields method to build a logic to remove unwanted attributes and return","title":"How can I skip fields of certain types during serialization?","body":"<p>you can use an object mapper to overcome this or can be used getDeclaredFields method to build a logic to remove unwanted attributes and return</p>\n"}],"owner":{"account_id":1133060,"reputation":243,"user_id":1118679,"display_name":"Eugene_Z"},"comment_count":8,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":72,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":77433024,"answer_count":3,"score":0,"last_activity_date":1699354244,"creation_date":1699085700,"question_id":77421244,"body_markdown":"I have a Spring AOP service which intercepts a lot of different third-party controllers endpoints. My service runs an endpoint, gets the result DTO, serialize DTO to json with ObjectMapper, sends json to Kafka and return the DTO outside. The problem is: the service shouldn&#39;t serialise fields of particular types (e.g MultipartFile). I can&#39;t use @JsonIgnore annotation, because DTO should be returned outside without changes. \r\nCan I make ObjectMapper skip fields of certain types? Or, maybe, copy the DTO and set this fields to null with reflection?","title":"How can I skip fields of certain types during serialization?","body":"<p>I have a Spring AOP service which intercepts a lot of different third-party controllers endpoints. My service runs an endpoint, gets the result DTO, serialize DTO to json with ObjectMapper, sends json to Kafka and return the DTO outside. The problem is: the service shouldn't serialise fields of particular types (e.g MultipartFile). I can't use @JsonIgnore annotation, because DTO should be returned outside without changes.\nCan I make ObjectMapper skip fields of certain types? Or, maybe, copy the DTO and set this fields to null with reflection?</p>\n"},{"tags":["java","spring-webflux","project-reactor"],"answers":[{"tags":[],"owner":{"account_id":5361793,"reputation":1612,"user_id":4272814,"display_name":"Kevin Hussey"},"down_vote_count":1,"up_vote_count":10,"is_accepted":false,"score":9,"last_activity_date":1533809856,"creation_date":1533711913,"answer_id":51740469,"question_id":51738140,"body_markdown":"You can do something similar to below, You can set the `context` with any class you like, for this example I just used headers - but a custom class will do just fine. \r\nIf you set it here, then any logging with handlers etc will also have access to the `context`.  \r\nThe `logWithContext` below, sets the MDC and clears it after. Obviously this can be replaced with anything you like. \r\n\r\n    public class RequestIdFilter  implements WebFilter {\r\n    \r\n        private Logger LOG = LoggerFactory.getLogger(RequestIdFilter.class);\r\n    \r\n        @Override\r\n        public Mono&lt;Void&gt; filter(ServerWebExchange exchange, WebFilterChain chain) {\r\n            HttpHeaders headers = exchange.getRequest().getHeaders();\r\n            return chain.filter(exchange)\r\n                    .doAfterSuccessOrError((r, t) -&gt; logWithContext(headers, httpHeaders -&gt; LOG.info(&quot;Some message with MDC set&quot;)))\r\n                    .subscriberContext(Context.of(HttpHeaders.class, headers));\r\n        }\r\n    \r\n        static void logWithContext(HttpHeaders headers, Consumer&lt;HttpHeaders&gt; logAction) {\r\n            try {\r\n                headers.forEach((name, values) -&gt; MDC.put(name, values.get(0)));\r\n                logAction.accept(headers);\r\n            } finally {\r\n                headers.keySet().forEach(MDC::remove);\r\n            }\r\n    \r\n        }\r\n    \r\n    }","title":"How to correctly use slf4j MDC in spring-webflux WebFilter","body":"<p>You can do something similar to below, You can set the <code>context</code> with any class you like, for this example I just used headers - but a custom class will do just fine. \nIf you set it here, then any logging with handlers etc will also have access to the <code>context</code>.<br>\nThe <code>logWithContext</code> below, sets the MDC and clears it after. Obviously this can be replaced with anything you like. </p>\n\n<pre><code>public class RequestIdFilter  implements WebFilter {\n\n    private Logger LOG = LoggerFactory.getLogger(RequestIdFilter.class);\n\n    @Override\n    public Mono&lt;Void&gt; filter(ServerWebExchange exchange, WebFilterChain chain) {\n        HttpHeaders headers = exchange.getRequest().getHeaders();\n        return chain.filter(exchange)\n                .doAfterSuccessOrError((r, t) -&gt; logWithContext(headers, httpHeaders -&gt; LOG.info(\"Some message with MDC set\")))\n                .subscriberContext(Context.of(HttpHeaders.class, headers));\n    }\n\n    static void logWithContext(HttpHeaders headers, Consumer&lt;HttpHeaders&gt; logAction) {\n        try {\n            headers.forEach((name, values) -&gt; MDC.put(name, values.get(0)));\n            logAction.accept(headers);\n        } finally {\n            headers.keySet().forEach(MDC::remove);\n        }\n\n    }\n\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":133310,"reputation":6106,"user_id":334569,"accept_rate":73,"display_name":"Marco Lackovic"},"down_vote_count":0,"up_vote_count":16,"is_accepted":true,"score":16,"last_activity_date":1620823613,"creation_date":1620315100,"answer_id":67421363,"question_id":51738140,"body_markdown":"Here&#39;s one solution based on the latest approach, as of *May 2021*, taken from the [official documentation][1]:\r\n\r\n```java\r\nimport java.util.List;\r\nimport java.util.Optional;\r\nimport java.util.UUID;\r\nimport java.util.function.Consumer;\r\nimport lombok.extern.slf4j.Slf4j;\r\nimport org.slf4j.MDC;\r\nimport org.springframework.context.annotation.Configuration;\r\nimport org.springframework.http.HttpHeaders;\r\nimport org.springframework.http.server.reactive.ServerHttpRequest;\r\nimport org.springframework.web.server.ServerWebExchange;\r\nimport org.springframework.web.server.WebFilter;\r\nimport org.springframework.web.server.WebFilterChain;\r\nimport reactor.core.publisher.Mono;\r\nimport reactor.core.publisher.Signal;\r\nimport reactor.util.context.Context;\r\n\r\n@Slf4j\r\n@Configuration\r\npublic class RequestIdFilter implements WebFilter {\r\n\r\n  @Override\r\n  public Mono&lt;Void&gt; filter(ServerWebExchange exchange, WebFilterChain chain) {\r\n    ServerHttpRequest request = exchange.getRequest();\r\n    String requestId = getRequestId(request.getHeaders());\r\n    return chain\r\n        .filter(exchange)\r\n        .doOnEach(logOnEach(r -&gt; log.info(&quot;{} {}&quot;, request.getMethod(), request.getURI())))\r\n        .contextWrite(Context.of(&quot;CONTEXT_KEY&quot;, requestId));\r\n  }\r\n\r\n  private String getRequestId(HttpHeaders headers) {\r\n    List&lt;String&gt; requestIdHeaders = headers.get(&quot;X-Request-ID&quot;);\r\n    return requestIdHeaders == null || requestIdHeaders.isEmpty()\r\n        ? UUID.randomUUID().toString()\r\n        : requestIdHeaders.get(0);\r\n  }\r\n\r\n  public static &lt;T&gt; Consumer&lt;Signal&lt;T&gt;&gt; logOnEach(Consumer&lt;T&gt; logStatement) {\r\n    return signal -&gt; {\r\n      String contextValue = signal.getContextView().get(&quot;CONTEXT_KEY&quot;);\r\n      try (MDC.MDCCloseable cMdc = MDC.putCloseable(&quot;MDC_KEY&quot;, contextValue)) {\r\n        logStatement.accept(signal.get());\r\n      }\r\n    };\r\n  }\r\n\r\n  public static &lt;T&gt; Consumer&lt;Signal&lt;T&gt;&gt; logOnNext(Consumer&lt;T&gt; logStatement) {\r\n    return signal -&gt; {\r\n      if (!signal.isOnNext()) return;\r\n      String contextValue = signal.getContextView().get(&quot;CONTEXT_KEY&quot;);\r\n      try (MDC.MDCCloseable cMdc = MDC.putCloseable(&quot;MDC_KEY&quot;, contextValue)) {\r\n        logStatement.accept(signal.get());\r\n      }\r\n    };\r\n  }\r\n}\r\n```\r\n\r\nGiven you have the following line in your `application.properties`:\r\n\r\n```\r\nlogging.pattern.level=[%X{MDC_KEY}] %5p\r\n```\r\n\r\nthen every time an endpoint is called your server logs will contain a log like this:\r\n\r\n```\r\n2021-05-06 17:07:41.852 [60b38305-7005-4a05-bac7-ab2636e74d94]  INFO 20158 --- [or-http-epoll-6] my.package.RequestIdFilter    : GET http://localhost:12345/my-endpoint/444444/\r\n```\r\n\r\nEvery time you want to log manually something within a reactive context you will have add the following to your reactive chain:\r\n\r\n```\r\n.doOnEach(logOnNext(r -&gt; log.info(&quot;Something&quot;)))\r\n```\r\n\r\nIf you want the `X-Request-ID` to be propagated to other services for distributed tracing, you need to read it from the reactive context (not from MDC) and wrap your `WebClient` code with the following:\r\n\r\n```\r\nMono.deferContextual(\r\n    ctx -&gt; {\r\n      RequestHeadersSpec&lt;?&gt; request = webClient.get().uri(uri);\r\n      request = request.header(&quot;X-Request-ID&quot;, ctx.get(&quot;CONTEXT_KEY&quot;));\r\n      // The rest of your request logic...\r\n    });\r\n```\r\n\r\n  [1]: https://github.com/reactor/reactor-core/blob/main/docs/asciidoc/faq.adoc#what-is-a-good-pattern-for-contextual-logging-mdc","title":"How to correctly use slf4j MDC in spring-webflux WebFilter","body":"<p>Here's one solution based on the latest approach, as of <em>May 2021</em>, taken from the <a href=\"https://github.com/reactor/reactor-core/blob/main/docs/asciidoc/faq.adoc#what-is-a-good-pattern-for-contextual-logging-mdc\" rel=\"noreferrer\">official documentation</a>:</p>\n<pre class=\"lang-java prettyprint-override\"><code>import java.util.List;\nimport java.util.Optional;\nimport java.util.UUID;\nimport java.util.function.Consumer;\nimport lombok.extern.slf4j.Slf4j;\nimport org.slf4j.MDC;\nimport org.springframework.context.annotation.Configuration;\nimport org.springframework.http.HttpHeaders;\nimport org.springframework.http.server.reactive.ServerHttpRequest;\nimport org.springframework.web.server.ServerWebExchange;\nimport org.springframework.web.server.WebFilter;\nimport org.springframework.web.server.WebFilterChain;\nimport reactor.core.publisher.Mono;\nimport reactor.core.publisher.Signal;\nimport reactor.util.context.Context;\n\n@Slf4j\n@Configuration\npublic class RequestIdFilter implements WebFilter {\n\n  @Override\n  public Mono&lt;Void&gt; filter(ServerWebExchange exchange, WebFilterChain chain) {\n    ServerHttpRequest request = exchange.getRequest();\n    String requestId = getRequestId(request.getHeaders());\n    return chain\n        .filter(exchange)\n        .doOnEach(logOnEach(r -&gt; log.info(&quot;{} {}&quot;, request.getMethod(), request.getURI())))\n        .contextWrite(Context.of(&quot;CONTEXT_KEY&quot;, requestId));\n  }\n\n  private String getRequestId(HttpHeaders headers) {\n    List&lt;String&gt; requestIdHeaders = headers.get(&quot;X-Request-ID&quot;);\n    return requestIdHeaders == null || requestIdHeaders.isEmpty()\n        ? UUID.randomUUID().toString()\n        : requestIdHeaders.get(0);\n  }\n\n  public static &lt;T&gt; Consumer&lt;Signal&lt;T&gt;&gt; logOnEach(Consumer&lt;T&gt; logStatement) {\n    return signal -&gt; {\n      String contextValue = signal.getContextView().get(&quot;CONTEXT_KEY&quot;);\n      try (MDC.MDCCloseable cMdc = MDC.putCloseable(&quot;MDC_KEY&quot;, contextValue)) {\n        logStatement.accept(signal.get());\n      }\n    };\n  }\n\n  public static &lt;T&gt; Consumer&lt;Signal&lt;T&gt;&gt; logOnNext(Consumer&lt;T&gt; logStatement) {\n    return signal -&gt; {\n      if (!signal.isOnNext()) return;\n      String contextValue = signal.getContextView().get(&quot;CONTEXT_KEY&quot;);\n      try (MDC.MDCCloseable cMdc = MDC.putCloseable(&quot;MDC_KEY&quot;, contextValue)) {\n        logStatement.accept(signal.get());\n      }\n    };\n  }\n}\n</code></pre>\n<p>Given you have the following line in your <code>application.properties</code>:</p>\n<pre><code>logging.pattern.level=[%X{MDC_KEY}] %5p\n</code></pre>\n<p>then every time an endpoint is called your server logs will contain a log like this:</p>\n<pre><code>2021-05-06 17:07:41.852 [60b38305-7005-4a05-bac7-ab2636e74d94]  INFO 20158 --- [or-http-epoll-6] my.package.RequestIdFilter    : GET http://localhost:12345/my-endpoint/444444/\n</code></pre>\n<p>Every time you want to log manually something within a reactive context you will have add the following to your reactive chain:</p>\n<pre><code>.doOnEach(logOnNext(r -&gt; log.info(&quot;Something&quot;)))\n</code></pre>\n<p>If you want the <code>X-Request-ID</code> to be propagated to other services for distributed tracing, you need to read it from the reactive context (not from MDC) and wrap your <code>WebClient</code> code with the following:</p>\n<pre><code>Mono.deferContextual(\n    ctx -&gt; {\n      RequestHeadersSpec&lt;?&gt; request = webClient.get().uri(uri);\n      request = request.header(&quot;X-Request-ID&quot;, ctx.get(&quot;CONTEXT_KEY&quot;));\n      // The rest of your request logic...\n    });\n</code></pre>\n"},{"tags":[],"owner":{"account_id":446833,"reputation":2694,"user_id":840129,"accept_rate":89,"display_name":"jreznot"},"down_vote_count":0,"up_vote_count":10,"is_accepted":false,"score":10,"last_activity_date":1631476730,"creation_date":1630939467,"answer_id":69076401,"question_id":51738140,"body_markdown":"As of Spring Boot 2.2 there is Schedulers.onScheduleHook that enables you to handle MDC:\r\n\r\n    Schedulers.onScheduleHook(&quot;mdc&quot;, runnable -&gt; {\r\n        Map&lt;String, String&gt; map = MDC.getCopyOfContextMap();\r\n        return () -&gt; {\r\n            if (map != null) {\r\n                MDC.setContextMap(map);\r\n            }\r\n            try {\r\n                runnable.run();\r\n            } finally {\r\n                MDC.clear();\r\n            }\r\n        };\r\n    });\r\n\r\nAlternatively, Hooks.onEachOperator can be used to pass around the MDC values via subscriber context. \r\n\r\nhttp://ttddyy.github.io/mdc-with-webclient-in-webmvc/\r\n\r\nThis is not full MDC solution, e.g. in my case I cannot cleanup MDC values in R2DBC threads.\r\n\r\nUPDATE: this article really solves my MDC problem: https://www.novatec-gmbh.de/en/blog/how-can-the-mdc-context-be-used-in-the-reactive-spring-applications/\r\n\r\nIt provides correct way of updating MDC based on subscriber context.\r\n\r\nCombine it with `SecurityContext::class.java` key populated by `AuthenticationWebFilter` and you will be able to put user login to your logs.","title":"How to correctly use slf4j MDC in spring-webflux WebFilter","body":"<p>As of Spring Boot 2.2 there is Schedulers.onScheduleHook that enables you to handle MDC:</p>\n<pre><code>Schedulers.onScheduleHook(&quot;mdc&quot;, runnable -&gt; {\n    Map&lt;String, String&gt; map = MDC.getCopyOfContextMap();\n    return () -&gt; {\n        if (map != null) {\n            MDC.setContextMap(map);\n        }\n        try {\n            runnable.run();\n        } finally {\n            MDC.clear();\n        }\n    };\n});\n</code></pre>\n<p>Alternatively, Hooks.onEachOperator can be used to pass around the MDC values via subscriber context.</p>\n<p><a href=\"http://ttddyy.github.io/mdc-with-webclient-in-webmvc/\" rel=\"noreferrer\">http://ttddyy.github.io/mdc-with-webclient-in-webmvc/</a></p>\n<p>This is not full MDC solution, e.g. in my case I cannot cleanup MDC values in R2DBC threads.</p>\n<p>UPDATE: this article really solves my MDC problem: <a href=\"https://www.novatec-gmbh.de/en/blog/how-can-the-mdc-context-be-used-in-the-reactive-spring-applications/\" rel=\"noreferrer\">https://www.novatec-gmbh.de/en/blog/how-can-the-mdc-context-be-used-in-the-reactive-spring-applications/</a></p>\n<p>It provides correct way of updating MDC based on subscriber context.</p>\n<p>Combine it with <code>SecurityContext::class.java</code> key populated by <code>AuthenticationWebFilter</code> and you will be able to put user login to your logs.</p>\n"},{"tags":[],"owner":{"account_id":16806686,"reputation":296,"user_id":12150693,"display_name":"N K Shukla"},"down_vote_count":3,"up_vote_count":0,"is_accepted":false,"score":-3,"last_activity_date":1634107373,"creation_date":1634107373,"answer_id":69550837,"question_id":51738140,"body_markdown":"I achieved this with :-\r\n\r\n    package com.nks.app.filter;\r\n    \r\n    import lombok.extern.slf4j.Slf4j;\r\n    import org.slf4j.MDC;\r\n    import org.springframework.stereotype.Component;\r\n    import org.springframework.web.server.ServerWebExchange;\r\n    import org.springframework.web.server.WebFilter;\r\n    import org.springframework.web.server.WebFilterChain;\r\n    import reactor.core.publisher.Mono;\r\n    \r\n    /**\r\n     * @author nks\r\n     */\r\n    @Component\r\n    @Slf4j\r\n    public class SessionIDFilter implements WebFilter {\r\n    \t\r\n    \tprivate static final String APP_SESSION_ID = &quot;app-session-id&quot;;\r\n    \t\r\n        /**\r\n         * Process the Web request and (optionally) delegate to the next\r\n         * {@code WebFilter} through the given {@link WebFilterChain}.\r\n         *\r\n         * @param serverWebExchange the current server exchange\r\n         * @param webFilterChain    provides a way to delegate to the next filter\r\n         * @return {@code Mono&lt;Void&gt;} to indicate when request processing is complete\r\n         */\r\n        @Override\r\n        public Mono&lt;Void&gt; filter(ServerWebExchange serverWebExchange, WebFilterChain webFilterChain) {\r\n            serverWebExchange.getResponse()\r\n                    .getHeaders().add(APP_SESSION_ID, serverWebExchange.getRequest().getHeaders().getFirst(APP_SESSION_ID));\r\n            MDC.put(APP_SESSION_ID, serverWebExchange.getRequest().getHeaders().getFirst(APP_SESSION_ID));\r\n            log.info(&quot;[{}] : Inside filter of SessionIDFilter, ADDED app-session-id in MDC Logs&quot;, MDC.get(APP_SESSION_ID));\r\n            return webFilterChain.filter(serverWebExchange);\r\n        }\r\n    }\r\n\r\nand, values associated with `app-session-id` for the thread can be logged. ","title":"How to correctly use slf4j MDC in spring-webflux WebFilter","body":"<p>I achieved this with :-</p>\n<pre><code>package com.nks.app.filter;\n\nimport lombok.extern.slf4j.Slf4j;\nimport org.slf4j.MDC;\nimport org.springframework.stereotype.Component;\nimport org.springframework.web.server.ServerWebExchange;\nimport org.springframework.web.server.WebFilter;\nimport org.springframework.web.server.WebFilterChain;\nimport reactor.core.publisher.Mono;\n\n/**\n * @author nks\n */\n@Component\n@Slf4j\npublic class SessionIDFilter implements WebFilter {\n    \n    private static final String APP_SESSION_ID = &quot;app-session-id&quot;;\n    \n    /**\n     * Process the Web request and (optionally) delegate to the next\n     * {@code WebFilter} through the given {@link WebFilterChain}.\n     *\n     * @param serverWebExchange the current server exchange\n     * @param webFilterChain    provides a way to delegate to the next filter\n     * @return {@code Mono&lt;Void&gt;} to indicate when request processing is complete\n     */\n    @Override\n    public Mono&lt;Void&gt; filter(ServerWebExchange serverWebExchange, WebFilterChain webFilterChain) {\n        serverWebExchange.getResponse()\n                .getHeaders().add(APP_SESSION_ID, serverWebExchange.getRequest().getHeaders().getFirst(APP_SESSION_ID));\n        MDC.put(APP_SESSION_ID, serverWebExchange.getRequest().getHeaders().getFirst(APP_SESSION_ID));\n        log.info(&quot;[{}] : Inside filter of SessionIDFilter, ADDED app-session-id in MDC Logs&quot;, MDC.get(APP_SESSION_ID));\n        return webFilterChain.filter(serverWebExchange);\n    }\n}\n</code></pre>\n<p>and, values associated with <code>app-session-id</code> for the thread can be logged.</p>\n"},{"tags":[],"owner":{"account_id":14860080,"reputation":934,"user_id":10731216,"display_name":"HereAndBeyond"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1669301098,"creation_date":1669211243,"answer_id":74547841,"question_id":51738140,"body_markdown":"#### My solution based on [Reactor 3 Reference Guide approach][1] but using doOnSuccess instead of doOnEach.\r\n\r\n**The main idea** is to use [Context][2] for MDC propagation in the next way: \r\n1. Fill a downstream Context (which will be used by derived threads) with the MDC state from an upstream flow (can be done by `.contextWrite(context -&gt; Context.of(MDC.getCopyOfContextMap()))`)\r\n2. Access the downstream Context in derived threads and fill MDC in derived thread with values from the downstream Context (_the main challenge_)\r\n3. Clear the MDC in the downstream Context (can be done by `.doFinally(signalType -&gt; MDC.clear())`) \r\n\r\nThe main problem is to access a downstream Context in derived threads. And you can implement step 2 with the most convenient for you approach). But here is my solution:\r\n```java\r\nwebclient.post()\r\n   .bodyValue(someRequestData)\r\n   .retrieve()\r\n   .bodyToMono(String.class)\r\n// By this action we wrap our response with a new Mono and also \r\n// in parallel fill MDC with values from a downstream Context because\r\n// we have an access to it\r\n   .flatMap(wrapWithFilledMDC())\r\n   .doOnSuccess(response -&gt; someActionWhichRequiresFilledMdc(response)))\r\n// Fill a downstream context with the current MDC state\r\n   .contextWrite(context -&gt; Context.of(MDC.getCopyOfContextMap())) \r\n// Allows us to clear MDC from derived threads\r\n   .doFinally(signalType -&gt; MDC.clear())\r\n   .block();\r\n```\r\n\r\n```java\r\n// Function which implements second step from the above main idea\r\npublic static &lt;T&gt; Function&lt;T, Mono&lt;T&gt;&gt; wrapWithFilledMDC() {\r\n// Using deferContextual we have an access to downstream Context, so\r\n// we can just fill MDC in derived threads with \r\n// values from the downstream Context\r\n   return item -&gt; Mono.deferContextual(contextView -&gt; {\r\n// Function for filling MDC with Context values \r\n// (you can apply your action)\r\n      fillMdcWithContextView(contextView);\r\n      return Mono.just(item);\r\n   });\r\n}\r\n```\r\n\r\n```java\r\npublic static void fillMdcWithContextValues(ContextView contextView) {\r\n   contextView.forEach(\r\n      (key, value) -&gt; {\r\n          if (key instanceof String keyStr &amp;&amp; value instanceof String valueStr) {\r\n             MDC.put(keyStr, valueStr);\r\n          }\r\n   });\r\n}\r\n```\r\n\r\nThis approach is also can be applied to doOnError and onErrorResume methods since the main idea is the same.\r\n\r\nUsed versions:\r\n - spring-boot: 2.7.3\r\n - spring-webflux: 5.3.22 (from spring-boot)\r\n - reactor-core: 3.4.22 (from spring-webflux)\r\n - reactor-netty: 1.0.22 (from spring-webflux)\r\n\r\n\r\n  [1]: https://projectreactor.io/docs/core/release/reference/#faq.mdc\r\n  [2]: https://projectreactor.io/docs/core/release/api/reactor/util/context/Context.html","title":"How to correctly use slf4j MDC in spring-webflux WebFilter","body":"<h4>My solution based on <a href=\"https://projectreactor.io/docs/core/release/reference/#faq.mdc\" rel=\"nofollow noreferrer\">Reactor 3 Reference Guide approach</a> but using doOnSuccess instead of doOnEach.</h4>\n<p><strong>The main idea</strong> is to use <a href=\"https://projectreactor.io/docs/core/release/api/reactor/util/context/Context.html\" rel=\"nofollow noreferrer\">Context</a> for MDC propagation in the next way:</p>\n<ol>\n<li>Fill a downstream Context (which will be used by derived threads) with the MDC state from an upstream flow (can be done by <code>.contextWrite(context -&gt; Context.of(MDC.getCopyOfContextMap()))</code>)</li>\n<li>Access the downstream Context in derived threads and fill MDC in derived thread with values from the downstream Context (<em>the main challenge</em>)</li>\n<li>Clear the MDC in the downstream Context (can be done by <code>.doFinally(signalType -&gt; MDC.clear())</code>)</li>\n</ol>\n<p>The main problem is to access a downstream Context in derived threads. And you can implement step 2 with the most convenient for you approach). But here is my solution:</p>\n<pre class=\"lang-java prettyprint-override\"><code>webclient.post()\n   .bodyValue(someRequestData)\n   .retrieve()\n   .bodyToMono(String.class)\n// By this action we wrap our response with a new Mono and also \n// in parallel fill MDC with values from a downstream Context because\n// we have an access to it\n   .flatMap(wrapWithFilledMDC())\n   .doOnSuccess(response -&gt; someActionWhichRequiresFilledMdc(response)))\n// Fill a downstream context with the current MDC state\n   .contextWrite(context -&gt; Context.of(MDC.getCopyOfContextMap())) \n// Allows us to clear MDC from derived threads\n   .doFinally(signalType -&gt; MDC.clear())\n   .block();\n</code></pre>\n<pre class=\"lang-java prettyprint-override\"><code>// Function which implements second step from the above main idea\npublic static &lt;T&gt; Function&lt;T, Mono&lt;T&gt;&gt; wrapWithFilledMDC() {\n// Using deferContextual we have an access to downstream Context, so\n// we can just fill MDC in derived threads with \n// values from the downstream Context\n   return item -&gt; Mono.deferContextual(contextView -&gt; {\n// Function for filling MDC with Context values \n// (you can apply your action)\n      fillMdcWithContextView(contextView);\n      return Mono.just(item);\n   });\n}\n</code></pre>\n<pre class=\"lang-java prettyprint-override\"><code>public static void fillMdcWithContextValues(ContextView contextView) {\n   contextView.forEach(\n      (key, value) -&gt; {\n          if (key instanceof String keyStr &amp;&amp; value instanceof String valueStr) {\n             MDC.put(keyStr, valueStr);\n          }\n   });\n}\n</code></pre>\n<p>This approach is also can be applied to doOnError and onErrorResume methods since the main idea is the same.</p>\n<p>Used versions:</p>\n<ul>\n<li>spring-boot: 2.7.3</li>\n<li>spring-webflux: 5.3.22 (from spring-boot)</li>\n<li>reactor-core: 3.4.22 (from spring-webflux)</li>\n<li>reactor-netty: 1.0.22 (from spring-webflux)</li>\n</ul>\n"},{"tags":[],"owner":{"account_id":3400101,"reputation":3482,"user_id":2852528,"display_name":"Serhii Pov&#237;senko"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1699353991,"creation_date":1699032198,"answer_id":77418615,"question_id":51738140,"body_markdown":"# 2023: Forget `logOnNext` wrapper. Use Context Propagation\r\n\r\nI started working with Reactor back in 2018, and thus far, there hasn&#39;t been a truly good alternative to the wrapper method inside `doOnNext` where you manually copy your trace fields from Reactor&#39;s Context into MDC, making your own ad-hoc bridge between reactive and imperative worlds, and voil&#224;, your logs now could make sense. But things changed, and finally, a new solution is here  [Context propagation][1]. Let&#39;s take a look at it.\r\n\r\nImagine that you have your Spring service, and you have a set of fields that define your diagnostic context, the fields you use for tracing the service&#39;s activities. Let&#39;s assume that you store that set as the following property: `management.tracing.baggage.correlation.fields: trace, session`.\r\n\r\nNow, to have these fields automatically populated into the MDC of the thread that executes the call of your reactive chain, taking these fields for the reactive context, you just need to add [context-propagation][2] library to your project and after do the following service-wide configuration:\r\n\r\n```java\r\n/**\r\n * 1. Will register ThreadLocalAccessors into ContextRegistry for fields listed in application.yml as property value\r\n * &lt;b&gt;management.tracing.baggage.correlation.fields&lt;/b&gt;\r\n * 2. Enables Automatic Context Propagation for all reactive methods\r\n *\r\n * @see &lt;a href=&quot;https://github.com/micrometer-metrics/context-propagation&quot;&gt;context-propagation&lt;/a&gt;\r\n */\r\n@Configuration\r\n@ConditionalOnClass({ContextRegistry.class, ContextSnapshotFactory.class})\r\n@ConditionalOnProperty(value = &quot;management.tracing.baggage.correlation.fields&quot;, matchIfMissing = true)\r\npublic class MdcContextPropagationConfiguration {\r\n\r\n    public MdcContextPropagationConfiguration(@Value(&quot;${management.tracing.baggage.correlation.fields}&quot;)\r\n                                              List&lt;String&gt; fields) {\r\n        if (!isEmpty(fields)) {\r\n            fields.forEach(claim -&gt; ContextRegistry.getInstance()\r\n                                                   .registerThreadLocalAccessor(claim,\r\n                                                                                () -&gt; MDC.get(claim),\r\n                                                                                value -&gt; MDC.put(claim, value),\r\n                                                                                () -&gt; MDC.remove(claim)));\r\n            return;\r\n        }\r\n\r\n        Hooks.enableAutomaticContextPropagation();\r\n    }\r\n}\r\n```\r\n\r\nThe trick here is to use `Hooks.enableAutomaticContextPropagation()`. As soon as we register a set of ThreadLocalsAccessors for propagation that maps out tracing fields, the hook will ensure the passing on of the values under the keys of the registered fields from the reactive context into MDC *on each call of your chain*.\r\n\r\nThat&#39;s it.\r\n\r\n\r\n  [1]: https://spring.io/blog/2023/03/30/context-propagation-with-project-reactor-3-unified-bridging-between-reactive\r\n  [2]: https://github.com/micrometer-metrics/context-propagation#artifacts","title":"How to correctly use slf4j MDC in spring-webflux WebFilter","body":"<h1>2023: Forget <code>logOnNext</code> wrapper. Use Context Propagation</h1>\n<p>I started working with Reactor back in 2018, and thus far, there hasn't been a truly good alternative to the wrapper method inside <code>doOnNext</code> where you manually copy your trace fields from Reactor's Context into MDC, making your own ad-hoc bridge between reactive and imperative worlds, and voil, your logs now could make sense. But things changed, and finally, a new solution is here  <a href=\"https://spring.io/blog/2023/03/30/context-propagation-with-project-reactor-3-unified-bridging-between-reactive\" rel=\"nofollow noreferrer\">Context propagation</a>. Let's take a look at it.</p>\n<p>Imagine that you have your Spring service, and you have a set of fields that define your diagnostic context, the fields you use for tracing the service's activities. Let's assume that you store that set as the following property: <code>management.tracing.baggage.correlation.fields: trace, session</code>.</p>\n<p>Now, to have these fields automatically populated into the MDC of the thread that executes the call of your reactive chain, taking these fields for the reactive context, you just need to add <a href=\"https://github.com/micrometer-metrics/context-propagation#artifacts\" rel=\"nofollow noreferrer\">context-propagation</a> library to your project and after do the following service-wide configuration:</p>\n<pre class=\"lang-java prettyprint-override\"><code>/**\n * 1. Will register ThreadLocalAccessors into ContextRegistry for fields listed in application.yml as property value\n * &lt;b&gt;management.tracing.baggage.correlation.fields&lt;/b&gt;\n * 2. Enables Automatic Context Propagation for all reactive methods\n *\n * @see &lt;a href=&quot;https://github.com/micrometer-metrics/context-propagation&quot;&gt;context-propagation&lt;/a&gt;\n */\n@Configuration\n@ConditionalOnClass({ContextRegistry.class, ContextSnapshotFactory.class})\n@ConditionalOnProperty(value = &quot;management.tracing.baggage.correlation.fields&quot;, matchIfMissing = true)\npublic class MdcContextPropagationConfiguration {\n\n    public MdcContextPropagationConfiguration(@Value(&quot;${management.tracing.baggage.correlation.fields}&quot;)\n                                              List&lt;String&gt; fields) {\n        if (!isEmpty(fields)) {\n            fields.forEach(claim -&gt; ContextRegistry.getInstance()\n                                                   .registerThreadLocalAccessor(claim,\n                                                                                () -&gt; MDC.get(claim),\n                                                                                value -&gt; MDC.put(claim, value),\n                                                                                () -&gt; MDC.remove(claim)));\n            return;\n        }\n\n        Hooks.enableAutomaticContextPropagation();\n    }\n}\n</code></pre>\n<p>The trick here is to use <code>Hooks.enableAutomaticContextPropagation()</code>. As soon as we register a set of ThreadLocalsAccessors for propagation that maps out tracing fields, the hook will ensure the passing on of the values under the keys of the registered fields from the reactive context into MDC <em>on each call of your chain</em>.</p>\n<p>That's it.</p>\n"}],"owner":{"account_id":3149253,"reputation":1255,"user_id":2663029,"accept_rate":29,"display_name":"bitdancer"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":33719,"favorite_count":0,"down_vote_count":0,"up_vote_count":27,"accepted_answer_id":67421363,"answer_count":6,"score":27,"last_activity_date":1699353991,"creation_date":1533698070,"question_id":51738140,"body_markdown":"I referenced with the blog post [Contextual Logging with Reactor Context and MDC](https://simonbasle.github.io/2018/02/contextual-logging-with-reactor-context-and-mdc/) but I don&#39;t know how to access reactor context in WebFilter.\r\n\r\n    @Component\r\n    public class RequestIdFilter implements WebFilter {\r\n\r\n        @Override\r\n        public Mono&lt;Void&gt; filter(ServerWebExchange exchange, WebFilterChain chain) {\r\n            List&lt;String&gt; myHeader =  exchange.getRequest().getHeaders().get(&quot;X-My-Header&quot;);\r\n\r\n            if (myHeader != null &amp;&amp; !myHeader.isEmpty()) {\r\n                MDC.put(&quot;myHeader&quot;, myHeader.get(0));\r\n            }\r\n\r\n            return chain.filter(exchange);\r\n        }\r\n    }\r\n\r\n\r\n","title":"How to correctly use slf4j MDC in spring-webflux WebFilter","body":"<p>I referenced with the blog post <a href=\"https://simonbasle.github.io/2018/02/contextual-logging-with-reactor-context-and-mdc/\" rel=\"noreferrer\">Contextual Logging with Reactor Context and MDC</a> but I don't know how to access reactor context in WebFilter.</p>\n\n<pre><code>@Component\npublic class RequestIdFilter implements WebFilter {\n\n    @Override\n    public Mono&lt;Void&gt; filter(ServerWebExchange exchange, WebFilterChain chain) {\n        List&lt;String&gt; myHeader =  exchange.getRequest().getHeaders().get(\"X-My-Header\");\n\n        if (myHeader != null &amp;&amp; !myHeader.isEmpty()) {\n            MDC.put(\"myHeader\", myHeader.get(0));\n        }\n\n        return chain.filter(exchange);\n    }\n}\n</code></pre>\n"},{"tags":["java","android","date","time"],"comments":[{"owner":{"account_id":4425499,"reputation":6084,"user_id":3604083,"display_name":"Yazan"},"score":0,"creation_date":1419167764,"post_id":27589701,"comment_id":43603371,"body_markdown":"@Devrath off-topic note, should&#39;nt it be AND &amp;&amp; , you are using OR || which will result all cases (hours &gt;= 1) fall in Good Morning case?","body":"@Devrath off-topic note, should&#39;nt it be AND &amp;&amp; , you are using OR || which will result all cases (hours &gt;= 1) fall in Good Morning case?"},{"owner":{"account_id":4728704,"reputation":17022,"user_id":3824919,"display_name":"Tom"},"score":1,"creation_date":1419170079,"post_id":27589701,"comment_id":43603904,"body_markdown":"You should know, that the hours are in range between `0` and `23`: [`getHours()`](http://docs.oracle.com/javase/6/docs/api/java/util/Date.html#getHours%28%29).","body":"You should know, that the hours are in range between <code>0</code> and <code>23</code>: <a href=\"http://docs.oracle.com/javase/6/docs/api/java/util/Date.html#getHours%28%29\" rel=\"nofollow noreferrer\"><code>getHours()</code></a>."},{"owner":{"account_id":963492,"reputation":10559,"user_id":987339,"display_name":"user987339"},"score":0,"creation_date":1419170854,"post_id":27589701,"comment_id":43604092,"body_markdown":"@Devrath I&#39;ve updated the answer to take into account 12:59.","body":"@Devrath I&#39;ve updated the answer to take into account 12:59."},{"owner":{"account_id":322981,"reputation":310744,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"score":1,"creation_date":1560311856,"post_id":27589701,"comment_id":99689951,"body_markdown":"FYI, the troublesome date-time classes such as `java.util.Date`, `java.util.Calendar`, and `java.text.SimpleDateFormat` are now legacy, supplanted by the [*java.time*](https://docs.oracle.com/javase/10/docs/api/java/time/package-summary.html) classes. Most of the *java.time*&#160;functionality is back-ported to Java 6 &amp; Java 7 in the [***ThreeTen-Backport***](http://www.threeten.org/threetenbp/) project. Further adapted for earlier Android (&lt;26) in [***ThreeTenABP***](https://github.com/JakeWharton/ThreeTenABP). See [*How to use ThreeTenABP*](http://stackoverflow.com/q/38922754/642706).","body":"FYI, the troublesome date-time classes such as <code>java.util.Date</code>, <code>java.util.Calendar</code>, and <code>java.text.SimpleDateFormat</code> are now legacy, supplanted by the <a href=\"https://docs.oracle.com/javase/10/docs/api/java/time/package-summary.html\" rel=\"nofollow noreferrer\"><i>java.time</i></a> classes. Most of the <i>java.time</i> functionality is back-ported to Java 6 &amp; Java 7 in the <a href=\"http://www.threeten.org/threetenbp/\" rel=\"nofollow noreferrer\"><b><i>ThreeTen-Backport</i></b></a> project. Further adapted for earlier Android (&lt;26) in <a href=\"https://github.com/JakeWharton/ThreeTenABP\" rel=\"nofollow noreferrer\"><b><i>ThreeTenABP</i></b></a>. See <a href=\"http://stackoverflow.com/q/38922754/642706\"><i>How to use ThreeTenABP</i></a>."}],"answers":[{"tags":[],"owner":{"account_id":121840,"reputation":36551,"user_id":315228,"accept_rate":100,"display_name":"SMA"},"down_vote_count":0,"up_vote_count":105,"is_accepted":true,"score":105,"last_activity_date":1426706109,"creation_date":1419168241,"answer_id":27589769,"question_id":27589701,"body_markdown":"You should be doing something like:\r\n\r\n    Calendar c = Calendar.getInstance();\r\n    int timeOfDay = c.get(Calendar.HOUR_OF_DAY);\r\n\r\n    if(timeOfDay &gt;= 0 &amp;&amp; timeOfDay &lt; 12){\r\n        Toast.makeText(this, &quot;Good Morning&quot;, Toast.LENGTH_SHORT).show();        \r\n    }else if(timeOfDay &gt;= 12 &amp;&amp; timeOfDay &lt; 16){\r\n        Toast.makeText(this, &quot;Good Afternoon&quot;, Toast.LENGTH_SHORT).show();\r\n    }else if(timeOfDay &gt;= 16 &amp;&amp; timeOfDay &lt; 21){\r\n        Toast.makeText(this, &quot;Good Evening&quot;, Toast.LENGTH_SHORT).show();\r\n    }else if(timeOfDay &gt;= 21 &amp;&amp; timeOfDay &lt; 24){\r\n        Toast.makeText(this, &quot;Good Night&quot;, Toast.LENGTH_SHORT).show();\r\n    }","title":"Showing Morning, afternoon, evening, night message based on Time in java","body":"<p>You should be doing something like:</p>\n\n<pre><code>Calendar c = Calendar.getInstance();\nint timeOfDay = c.get(Calendar.HOUR_OF_DAY);\n\nif(timeOfDay &gt;= 0 &amp;&amp; timeOfDay &lt; 12){\n    Toast.makeText(this, \"Good Morning\", Toast.LENGTH_SHORT).show();        \n}else if(timeOfDay &gt;= 12 &amp;&amp; timeOfDay &lt; 16){\n    Toast.makeText(this, \"Good Afternoon\", Toast.LENGTH_SHORT).show();\n}else if(timeOfDay &gt;= 16 &amp;&amp; timeOfDay &lt; 21){\n    Toast.makeText(this, \"Good Evening\", Toast.LENGTH_SHORT).show();\n}else if(timeOfDay &gt;= 21 &amp;&amp; timeOfDay &lt; 24){\n    Toast.makeText(this, \"Good Night\", Toast.LENGTH_SHORT).show();\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":984212,"reputation":62352,"user_id":1003142,"display_name":"Konstantin Yovkov"},"down_vote_count":0,"up_vote_count":7,"is_accepted":false,"score":7,"last_activity_date":1419169970,"creation_date":1419168351,"answer_id":27589786,"question_id":27589701,"body_markdown":"I would shorten your `if/elseif` statement to:\r\n\r\n    String greeting = null;\r\n    if(hours&gt;=1 &amp;&amp; hours&lt;=12){\r\n        greeting = &quot;Good Morning&quot;;\r\n    } else if(hours&gt;=12 &amp;&amp; hours&lt;=16){\r\n        greeting = &quot;Good Afternoon&quot;;\r\n    } else if(hours&gt;=16 &amp;&amp; hours&lt;=21){\r\n        greeting = &quot;Good Evening&quot;;\r\n    } else if(hours&gt;=21 &amp;&amp; hours&lt;=24){\r\n        greeting = &quot;Good Night&quot;;\r\n    }\r\n    Toast.makeText(this, greeting, Toast.LENGTH_SHORT).show();","title":"Showing Morning, afternoon, evening, night message based on Time in java","body":"<p>I would shorten your <code>if/elseif</code> statement to:</p>\n\n<pre><code>String greeting = null;\nif(hours&gt;=1 &amp;&amp; hours&lt;=12){\n    greeting = \"Good Morning\";\n} else if(hours&gt;=12 &amp;&amp; hours&lt;=16){\n    greeting = \"Good Afternoon\";\n} else if(hours&gt;=16 &amp;&amp; hours&lt;=21){\n    greeting = \"Good Evening\";\n} else if(hours&gt;=21 &amp;&amp; hours&lt;=24){\n    greeting = \"Good Night\";\n}\nToast.makeText(this, greeting, Toast.LENGTH_SHORT).show();\n</code></pre>\n"},{"tags":[],"owner":{"account_id":963492,"reputation":10559,"user_id":987339,"display_name":"user987339"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1419171301,"creation_date":1419168747,"answer_id":27589838,"question_id":27589701,"body_markdown":"You determine if it is in the first interval, and then all other intervals depends on the upper limit. So you can make it even shorter:\r\n\r\n    String greeting = null;\r\n    if(hours&gt;=1 &amp;&amp; hours&lt;=11){\r\n        greeting = &quot;Good Morning&quot;;\r\n    } else if(hours&lt;=15){\r\n        greeting = &quot;Good Afternoon&quot;;\r\n    } else if(hours&lt;=20){\r\n        greeting = &quot;Good Evening&quot;;\r\n    } else if(hours&lt;=24){\r\n        greeting = &quot;Good Night&quot;;\r\n    }\r\n    Toast.makeText(this, greeting, Toast.LENGTH_SHORT).show();","title":"Showing Morning, afternoon, evening, night message based on Time in java","body":"<p>You determine if it is in the first interval, and then all other intervals depends on the upper limit. So you can make it even shorter:</p>\n\n<pre><code>String greeting = null;\nif(hours&gt;=1 &amp;&amp; hours&lt;=11){\n    greeting = \"Good Morning\";\n} else if(hours&lt;=15){\n    greeting = \"Good Afternoon\";\n} else if(hours&lt;=20){\n    greeting = \"Good Evening\";\n} else if(hours&lt;=24){\n    greeting = \"Good Night\";\n}\nToast.makeText(this, greeting, Toast.LENGTH_SHORT).show();\n</code></pre>\n"},{"tags":[],"owner":{"account_id":5504918,"reputation":61,"user_id":4373024,"display_name":"m2k_72"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1448027655,"creation_date":1419169205,"answer_id":27589893,"question_id":27589701,"body_markdown":"try this code(get hours and get minute methods in Date class are deprecated.)\r\n\r\n     private void getTimeFromAndroid() {\r\n        Date dt = new Date();\r\n        Calendar c = Calendar.getInstance();\r\n        c.setTime(dt);\r\n        int hours = c.get(Calendar.HOUR_OF_DAY);\r\n        int min = c.get(Calendar.MINUTE);\r\n        \r\n        if(hours&gt;=1 &amp;&amp; hours&lt;=12){\r\n            Toast.makeText(this, &quot;Good Morning&quot;, Toast.LENGTH_SHORT).show();\r\n        }else if(hours&gt;=12 &amp;&amp; hours&lt;=16){\r\n            Toast.makeText(this, &quot;Good Afternoon&quot;, Toast.LENGTH_SHORT).show();\r\n        }else if(hours&gt;=16 &amp;&amp; hours&lt;=21){\r\n            Toast.makeText(this, &quot;Good Evening&quot;, Toast.LENGTH_SHORT).show();\r\n        }else if(hours&gt;=21 &amp;&amp; hours&lt;=24){\r\n            Toast.makeText(this, &quot;Good Night&quot;, Toast.LENGTH_SHORT).show();\r\n        }\r\n    }","title":"Showing Morning, afternoon, evening, night message based on Time in java","body":"<p>try this code(get hours and get minute methods in Date class are deprecated.)</p>\n\n<pre><code> private void getTimeFromAndroid() {\n    Date dt = new Date();\n    Calendar c = Calendar.getInstance();\n    c.setTime(dt);\n    int hours = c.get(Calendar.HOUR_OF_DAY);\n    int min = c.get(Calendar.MINUTE);\n\n    if(hours&gt;=1 &amp;&amp; hours&lt;=12){\n        Toast.makeText(this, \"Good Morning\", Toast.LENGTH_SHORT).show();\n    }else if(hours&gt;=12 &amp;&amp; hours&lt;=16){\n        Toast.makeText(this, \"Good Afternoon\", Toast.LENGTH_SHORT).show();\n    }else if(hours&gt;=16 &amp;&amp; hours&lt;=21){\n        Toast.makeText(this, \"Good Evening\", Toast.LENGTH_SHORT).show();\n    }else if(hours&gt;=21 &amp;&amp; hours&lt;=24){\n        Toast.makeText(this, \"Good Night\", Toast.LENGTH_SHORT).show();\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":5658867,"reputation":464,"user_id":4477069,"accept_rate":83,"display_name":"SREE"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1461058002,"creation_date":1461058002,"answer_id":36714195,"question_id":27589701,"body_markdown":"When I write \r\n    \r\n    Calendar c = Calendar.getInstance();\r\n    int timeOfDay = c.get(Calendar.HOUR_OF_DAY);\r\nI didn&#39;t get output and it doesn&#39;t show any error. Just the `timeOfDay` won&#39;t get assigned any value in the code. I felt it was because of some threading while `Calendar.getInstance()` is executed. But when I collapsed the lines it worked for me. See the following code:\r\n\r\n    int timeOfDay = Calendar.getInstance().get(Calendar.HOUR_OF_DAY);\r\n\r\n    if(timeOfDay &gt;= 0 &amp;&amp; timeOfDay &lt; 12){\r\n            greeting.setText(&quot;Good Morning&quot;);\r\n    }else if(timeOfDay &gt;= 12 &amp;&amp; timeOfDay &lt; 16){\r\n            greeting.setText(&quot;Good Afternoon&quot;);\r\n    }else if(timeOfDay &gt;= 16 &amp;&amp; timeOfDay &lt; 21){\r\n            greeting.setText(&quot;Good Evening&quot;);\r\n    }else if(timeOfDay &gt;= 21 &amp;&amp; timeOfDay &lt; 24){\r\n            greeting.setText(&quot;Good Morning&quot;);\r\n    }","title":"Showing Morning, afternoon, evening, night message based on Time in java","body":"<p>When I write </p>\n\n<pre><code>Calendar c = Calendar.getInstance();\nint timeOfDay = c.get(Calendar.HOUR_OF_DAY);\n</code></pre>\n\n<p>I didn't get output and it doesn't show any error. Just the <code>timeOfDay</code> won't get assigned any value in the code. I felt it was because of some threading while <code>Calendar.getInstance()</code> is executed. But when I collapsed the lines it worked for me. See the following code:</p>\n\n<pre><code>int timeOfDay = Calendar.getInstance().get(Calendar.HOUR_OF_DAY);\n\nif(timeOfDay &gt;= 0 &amp;&amp; timeOfDay &lt; 12){\n        greeting.setText(\"Good Morning\");\n}else if(timeOfDay &gt;= 12 &amp;&amp; timeOfDay &lt; 16){\n        greeting.setText(\"Good Afternoon\");\n}else if(timeOfDay &gt;= 16 &amp;&amp; timeOfDay &lt; 21){\n        greeting.setText(\"Good Evening\");\n}else if(timeOfDay &gt;= 21 &amp;&amp; timeOfDay &lt; 24){\n        greeting.setText(\"Good Morning\");\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":7102719,"reputation":1304,"user_id":5473627,"accept_rate":91,"display_name":"Yoshua Nahar"},"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1576078748,"creation_date":1506168631,"answer_id":46379428,"question_id":27589701,"body_markdown":"# java.time\r\n\r\nI would advise to use Java 8 LocalTime.\r\n\r\nMaybe create a class like this to handle your time of day problem.\r\n\r\n    public class GreetingMaker { // think of a better name then this.\r\n    \r\n      private static final LocalTime MORNING = LocalTime.of(0, 0, 0);\r\n      private static final LocalTime AFTER_NOON = LocalTime.of(12, 0, 0);\r\n      private static final LocalTime EVENING = LocalTime.of(16, 0, 0);\r\n      private static final LocalTime NIGHT = LocalTime.of(21, 0, 0);\r\n    \r\n      private LocalTime now;\r\n    \r\n      public GreetingMaker(LocalTime now) {\r\n        this.now = now;\r\n      }\r\n    \r\n      public void printTimeOfDay() { // or return String in your case\r\n        if (between(MORNING, AFTER_NOON)) {\r\n          System.out.println(&quot;Good Morning&quot;);\r\n        } else if (between(AFTER_NOON, EVENING)) {\r\n          System.out.println(&quot;Good Afternoon&quot;);\r\n        } else if (between(EVENING, NIGHT)) {\r\n          System.out.println(&quot;Good Evening&quot;);\r\n        } else {\r\n          System.out.println(&quot;Good Night&quot;);\r\n        }\r\n      }\r\n    \r\n      private boolean between(LocalTime start, LocalTime end) {\r\n        return (!now.isBefore(start)) &amp;&amp; now.isBefore(end);\r\n      }\r\n    \r\n    }\r\n\r\n","title":"Showing Morning, afternoon, evening, night message based on Time in java","body":"<h1>java.time</h1>\n\n<p>I would advise to use Java 8 LocalTime.</p>\n\n<p>Maybe create a class like this to handle your time of day problem.</p>\n\n<pre><code>public class GreetingMaker { // think of a better name then this.\n\n  private static final LocalTime MORNING = LocalTime.of(0, 0, 0);\n  private static final LocalTime AFTER_NOON = LocalTime.of(12, 0, 0);\n  private static final LocalTime EVENING = LocalTime.of(16, 0, 0);\n  private static final LocalTime NIGHT = LocalTime.of(21, 0, 0);\n\n  private LocalTime now;\n\n  public GreetingMaker(LocalTime now) {\n    this.now = now;\n  }\n\n  public void printTimeOfDay() { // or return String in your case\n    if (between(MORNING, AFTER_NOON)) {\n      System.out.println(\"Good Morning\");\n    } else if (between(AFTER_NOON, EVENING)) {\n      System.out.println(\"Good Afternoon\");\n    } else if (between(EVENING, NIGHT)) {\n      System.out.println(\"Good Evening\");\n    } else {\n      System.out.println(\"Good Night\");\n    }\n  }\n\n  private boolean between(LocalTime start, LocalTime end) {\n    return (!now.isBefore(start)) &amp;&amp; now.isBefore(end);\n  }\n\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2906108,"reputation":42988,"user_id":2491410,"accept_rate":100,"display_name":"Meno Hochschild"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1506172619,"creation_date":1506172619,"answer_id":46379998,"question_id":27589701,"body_markdown":"Using [Time4J][1] (or Time4A on Android) enables following solutions which do not need any if-else-statements:\r\n\r\n    ChronoFormatter&lt;PlainTime&gt; parser =\r\n        ChronoFormatter.ofTimePattern(&quot;hh:mm a&quot;, PatternType.CLDR, Locale.ENGLISH);\r\n    PlainTime time = parser.parse(&quot;10:05 AM&quot;);\r\n\r\n    Map&lt;PlainTime, String&gt; table = new HashMap&lt;&gt;();\r\n    table.put(PlainTime.of(1), &quot;Good Morning&quot;);\r\n    table.put(PlainTime.of(12), &quot;Good Afternoon&quot;);\r\n    table.put(PlainTime.of(16), &quot;Good Evening&quot;);\r\n    table.put(PlainTime.of(21), &quot;Good Night&quot;);\r\n    ChronoFormatter&lt;PlainTime&gt; customPrinter=\r\n        ChronoFormatter\r\n          .setUp(PlainTime.axis(), Locale.ENGLISH)\r\n          .addDayPeriod(table)\r\n          .build();\r\n    System.out.println(customPrinter.format(time)); // Good Morning\r\n\r\nThere is also another pattern-based way to let the locale decide in a standard way based on CLDR-data how to format the clock time:\r\n\r\n    ChronoFormatter&lt;PlainTime&gt; parser =\r\n        ChronoFormatter.ofTimePattern(&quot;hh:mm a&quot;, PatternType.CLDR, Locale.ENGLISH);\r\n    PlainTime time = parser.parse(&quot;10:05 AM&quot;);\r\n\r\n    ChronoFormatter&lt;PlainTime&gt; printer1 =\r\n        ChronoFormatter.ofTimePattern(&quot;hh:mm B&quot;, PatternType.CLDR, Locale.ENGLISH);\r\n    System.out.println(printer1.format(time)); // 10:05 in the morning\r\n\r\n    ChronoFormatter&lt;PlainTime&gt; printer2 =\r\n        ChronoFormatter.ofTimePattern(&quot;B&quot;, PatternType.CLDR, Locale.ENGLISH)\r\n            .with(Attributes.OUTPUT_CONTEXT, OutputContext.STANDALONE);\r\n    System.out.println(printer2.format(time)); // morning\r\n\r\nThe only other library known to me which can also do this (but in an awkward way) is ICU4J.\r\n\r\n  [1]: https://github.com/MenoData/Time4J","title":"Showing Morning, afternoon, evening, night message based on Time in java","body":"<p>Using <a href=\"https://github.com/MenoData/Time4J\" rel=\"nofollow noreferrer\">Time4J</a> (or Time4A on Android) enables following solutions which do not need any if-else-statements:</p>\n\n<pre><code>ChronoFormatter&lt;PlainTime&gt; parser =\n    ChronoFormatter.ofTimePattern(\"hh:mm a\", PatternType.CLDR, Locale.ENGLISH);\nPlainTime time = parser.parse(\"10:05 AM\");\n\nMap&lt;PlainTime, String&gt; table = new HashMap&lt;&gt;();\ntable.put(PlainTime.of(1), \"Good Morning\");\ntable.put(PlainTime.of(12), \"Good Afternoon\");\ntable.put(PlainTime.of(16), \"Good Evening\");\ntable.put(PlainTime.of(21), \"Good Night\");\nChronoFormatter&lt;PlainTime&gt; customPrinter=\n    ChronoFormatter\n      .setUp(PlainTime.axis(), Locale.ENGLISH)\n      .addDayPeriod(table)\n      .build();\nSystem.out.println(customPrinter.format(time)); // Good Morning\n</code></pre>\n\n<p>There is also another pattern-based way to let the locale decide in a standard way based on CLDR-data how to format the clock time:</p>\n\n<pre><code>ChronoFormatter&lt;PlainTime&gt; parser =\n    ChronoFormatter.ofTimePattern(\"hh:mm a\", PatternType.CLDR, Locale.ENGLISH);\nPlainTime time = parser.parse(\"10:05 AM\");\n\nChronoFormatter&lt;PlainTime&gt; printer1 =\n    ChronoFormatter.ofTimePattern(\"hh:mm B\", PatternType.CLDR, Locale.ENGLISH);\nSystem.out.println(printer1.format(time)); // 10:05 in the morning\n\nChronoFormatter&lt;PlainTime&gt; printer2 =\n    ChronoFormatter.ofTimePattern(\"B\", PatternType.CLDR, Locale.ENGLISH)\n        .with(Attributes.OUTPUT_CONTEXT, OutputContext.STANDALONE);\nSystem.out.println(printer2.format(time)); // morning\n</code></pre>\n\n<p>The only other library known to me which can also do this (but in an awkward way) is ICU4J.</p>\n"},{"tags":[],"owner":{"account_id":10398563,"reputation":864,"user_id":7667623,"display_name":"Sanjay Hadiya"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1527675187,"creation_date":1527675187,"answer_id":50602058,"question_id":27589701,"body_markdown":"     private String getStringFromMilli(long millis) {\r\n\r\n        Calendar c = Calendar.getInstance();\r\n        c.setTimeInMillis(millis);\r\n        int hours = c.get(Calendar.HOUR_OF_DAY);\r\n\r\n        if(hours &gt;= 1 &amp;&amp; hours &lt;= 12){\r\n            return &quot;MORNING&quot;;\r\n        }else if(hours &gt;= 12 &amp;&amp; hours &lt;= 16){\r\n            return &quot;AFTERNOON&quot;;\r\n        }else if(hours &gt;= 16 &amp;&amp; hours &lt;= 21){\r\n            return &quot;EVENING&quot;;\r\n        }else if(hours &gt;= 21 &amp;&amp; hours &lt;= 24){\r\n            return &quot;NIGHT&quot;;\r\n        }\r\n        return null;\r\n    }","title":"Showing Morning, afternoon, evening, night message based on Time in java","body":"<pre><code> private String getStringFromMilli(long millis) {\n\n    Calendar c = Calendar.getInstance();\n    c.setTimeInMillis(millis);\n    int hours = c.get(Calendar.HOUR_OF_DAY);\n\n    if(hours &gt;= 1 &amp;&amp; hours &lt;= 12){\n        return \"MORNING\";\n    }else if(hours &gt;= 12 &amp;&amp; hours &lt;= 16){\n        return \"AFTERNOON\";\n    }else if(hours &gt;= 16 &amp;&amp; hours &lt;= 21){\n        return \"EVENING\";\n    }else if(hours &gt;= 21 &amp;&amp; hours &lt;= 24){\n        return \"NIGHT\";\n    }\n    return null;\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":5525867,"reputation":2675,"user_id":4387347,"display_name":"Vishal Sonawane"},"down_vote_count":0,"up_vote_count":31,"is_accepted":false,"score":31,"last_activity_date":1588960134,"creation_date":1536658424,"answer_id":52272932,"question_id":27589701,"body_markdown":"For anyone who is looking for the latest **Kotlin** syntax for @SMA&#39;s answer, here is the helper function :\r\n\r\n \r\n\r\n    fun getGreetingMessage():String{\r\n        val c = Calendar.getInstance()\r\n        val timeOfDay = c.get(Calendar.HOUR_OF_DAY)\r\n    \r\n        return when (timeOfDay) {\r\n               in 0..11 -&gt; &quot;Good Morning&quot;\r\n               in 12..15 -&gt; &quot;Good Afternoon&quot;\r\n               in 16..20 -&gt; &quot;Good Evening&quot;\r\n               in 21..23 -&gt; &quot;Good Night&quot;\r\n               else -&gt; &quot;Hello&quot;\r\n          }\r\n        }","title":"Showing Morning, afternoon, evening, night message based on Time in java","body":"<p>For anyone who is looking for the latest <strong>Kotlin</strong> syntax for @SMA's answer, here is the helper function :</p>\n\n<pre><code>fun getGreetingMessage():String{\n    val c = Calendar.getInstance()\n    val timeOfDay = c.get(Calendar.HOUR_OF_DAY)\n\n    return when (timeOfDay) {\n           in 0..11 -&gt; \"Good Morning\"\n           in 12..15 -&gt; \"Good Afternoon\"\n           in 16..20 -&gt; \"Good Evening\"\n           in 21..23 -&gt; \"Good Night\"\n           else -&gt; \"Hello\"\n      }\n    }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":9704030,"reputation":10613,"user_id":7198006,"display_name":"awaik"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1560250180,"creation_date":1560250180,"answer_id":56542042,"question_id":27589701,"body_markdown":"If somebody looking the same for Dart and Flutter: the code without if statements - easy to read and edit.\r\n\r\n    main() {\r\n      int hourValue = DateTime.now().hour;\r\n      print(checkDayPeriod(hourValue));\r\n    }\r\n    \r\n    String checkDayPeriod(int hour) {\r\n      int _res = 21;\r\n      Map&lt;int, String&gt; dayPeriods = {\r\n        0: &#39;Good night&#39;,\r\n        12: &#39;Good morning&#39;,\r\n        16: &#39;Good afternoon&#39;,\r\n        21: &#39;Good evening&#39;,\r\n      };\r\n    \r\n      dayPeriods.forEach(\r\n        (key, value) {\r\n          if (hour &lt; key &amp;&amp; key &lt;= _res) _res = key;\r\n        },\r\n      );\r\n    \r\n      return dayPeriods[_res];\r\n    }\r\n","title":"Showing Morning, afternoon, evening, night message based on Time in java","body":"<p>If somebody looking the same for Dart and Flutter: the code without if statements - easy to read and edit.</p>\n\n<pre><code>main() {\n  int hourValue = DateTime.now().hour;\n  print(checkDayPeriod(hourValue));\n}\n\nString checkDayPeriod(int hour) {\n  int _res = 21;\n  Map&lt;int, String&gt; dayPeriods = {\n    0: 'Good night',\n    12: 'Good morning',\n    16: 'Good afternoon',\n    21: 'Good evening',\n  };\n\n  dayPeriods.forEach(\n    (key, value) {\n      if (hour &lt; key &amp;&amp; key &lt;= _res) _res = key;\n    },\n  );\n\n  return dayPeriods[_res];\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":15884434,"reputation":1,"user_id":11461251,"display_name":"Syed Taha"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1570273963,"creation_date":1570265925,"answer_id":58246805,"question_id":27589701,"body_markdown":"    using System;\r\n    \r\n    namespace PF_Claas_Assign1\r\n    {\r\n        class Program\r\n        {\r\n            static void Main(string[] args)\r\n            {\r\n                DateTime Greeting = DateTime.Now;\r\n    \r\n                if (Greeting.Hour &gt;= 5 &amp;&amp; Greeting.Hour &lt; 12)\r\n                {\r\n                    Console.WriteLine(&quot;Good morning....!&quot;);\r\n                }\r\n                else if (Greeting.Hour &gt;= 12 &amp;&amp; Greeting.Hour &lt; 16)\r\n                {\r\n                    Console.WriteLine(&quot;Good afternoon...!&quot;);\r\n                }\r\n                else if (Greeting.Hour &gt;= 16 &amp;&amp; Greeting.Hour &lt; 20)\r\n                {\r\n                    Console.WriteLine(&quot;Good evening...!&quot;);\r\n                }\r\n                else\r\n                {\r\n                    Console.WriteLine(&quot;Good night...!&quot;);\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n","title":"Showing Morning, afternoon, evening, night message based on Time in java","body":"<pre><code>using System;\n\nnamespace PF_Claas_Assign1\n{\n    class Program\n    {\n        static void Main(string[] args)\n        {\n            DateTime Greeting = DateTime.Now;\n\n            if (Greeting.Hour &gt;= 5 &amp;&amp; Greeting.Hour &lt; 12)\n            {\n                Console.WriteLine(\"Good morning....!\");\n            }\n            else if (Greeting.Hour &gt;= 12 &amp;&amp; Greeting.Hour &lt; 16)\n            {\n                Console.WriteLine(\"Good afternoon...!\");\n            }\n            else if (Greeting.Hour &gt;= 16 &amp;&amp; Greeting.Hour &lt; 20)\n            {\n                Console.WriteLine(\"Good evening...!\");\n            }\n            else\n            {\n                Console.WriteLine(\"Good night...!\");\n            }\n        }\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":8842942,"reputation":66,"user_id":6604798,"display_name":"Roshan Kumar"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1579848042,"creation_date":1579848042,"answer_id":59891528,"question_id":27589701,"body_markdown":"In kotlin use the following\r\n\r\n    fun getCurrentTime(dateFormatInPut:String,myDate:String): Time {\r\n            val sdf = SimpleDateFormat(dateFormatInPut, Locale.ENGLISH)\r\n            val date = sdf.parse(myDate)\r\n            val millis = date!!.time\r\n            val calendar=Calendar.getInstance()\r\n            calendar.timeInMillis=millis\r\n            return when (calendar.get(Calendar.HOUR_OF_DAY)) {\r\n                in 0..11 -&gt; Time.Morning\r\n                in 12..15 -&gt; Time.AfterNoon\r\n                else -&gt; Time.Evening\r\n            }\r\n\r\n        }\r\nHere Time is enum class \r\n\r\n    enum class Time {\r\n    Morning,\r\n    AfterNoon,\r\n    Evening\r\n}\r\n","title":"Showing Morning, afternoon, evening, night message based on Time in java","body":"<p>In kotlin use the following</p>\n\n<pre><code>fun getCurrentTime(dateFormatInPut:String,myDate:String): Time {\n        val sdf = SimpleDateFormat(dateFormatInPut, Locale.ENGLISH)\n        val date = sdf.parse(myDate)\n        val millis = date!!.time\n        val calendar=Calendar.getInstance()\n        calendar.timeInMillis=millis\n        return when (calendar.get(Calendar.HOUR_OF_DAY)) {\n            in 0..11 -&gt; Time.Morning\n            in 12..15 -&gt; Time.AfterNoon\n            else -&gt; Time.Evening\n        }\n\n    }\n</code></pre>\n\n<p>Here Time is enum class </p>\n\n<pre><code>enum class Time {\nMorning,\nAfterNoon,\nEvening\n</code></pre>\n\n<p>}</p>\n"},{"tags":[],"owner":{"account_id":17777821,"reputation":21,"user_id":12909694,"display_name":"Jianqing GAO"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1581901407,"creation_date":1581901407,"answer_id":60254750,"question_id":27589701,"body_markdown":"A cleaner method for detecting date would be.\r\n\r\n    //the time cannot go below zero, so if this case is true, it must be between 0 and 12\r\n       if(time &lt;= 12)\r\n       {\r\n           return &quot;Good Morning&quot;;\r\n           //it will only fall into this case if the time is greater than 12.\r\n       }else if(time &lt; 16)\r\n       {\r\n           return &quot;Good Afternoon&quot;;\r\n       }else if(time &lt; 21)\r\n       {\r\n           return &quot;Good Evening&quot;;\r\n       }else //it is guaranteed that the time will not exceed 24\r\n           //, and if the previous case are all false, it must be within 21 and 24\r\n       {\r\n           return &quot;Good Night&quot;;\r\n       }\r\n\r\n","title":"Showing Morning, afternoon, evening, night message based on Time in java","body":"<p>A cleaner method for detecting date would be.</p>\n\n<pre><code>//the time cannot go below zero, so if this case is true, it must be between 0 and 12\n   if(time &lt;= 12)\n   {\n       return \"Good Morning\";\n       //it will only fall into this case if the time is greater than 12.\n   }else if(time &lt; 16)\n   {\n       return \"Good Afternoon\";\n   }else if(time &lt; 21)\n   {\n       return \"Good Evening\";\n   }else //it is guaranteed that the time will not exceed 24\n       //, and if the previous case are all false, it must be within 21 and 24\n   {\n       return \"Good Night\";\n   }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":8183666,"reputation":176,"user_id":6160058,"display_name":"Donnicias"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1585857060,"creation_date":1585857060,"answer_id":60999949,"question_id":27589701,"body_markdown":"You can equally have a class that returns the greetings.\r\n\r\n    import java.util.Calendar;\r\n\r\n    public class Greetings {\r\n        public static String getGreetings()\r\n        {\r\n            Calendar c = Calendar.getInstance();\r\n            int timeOfDay = c.get(Calendar.HOUR_OF_DAY);\r\n\r\n            if(timeOfDay &lt; 12){\r\n                return &quot;Good morning&quot;;\r\n            }else if(timeOfDay &lt; 16){\r\n                return &quot;Good afternoon&quot;;\r\n            }else if(timeOfDay &lt; 21){\r\n                return &quot;Good evening&quot;;\r\n            }else {\r\n                return &quot;Good night&quot;;\r\n            }\r\n        }\r\n    }","title":"Showing Morning, afternoon, evening, night message based on Time in java","body":"<p>You can equally have a class that returns the greetings.</p>\n\n<pre><code>import java.util.Calendar;\n\npublic class Greetings {\n    public static String getGreetings()\n    {\n        Calendar c = Calendar.getInstance();\n        int timeOfDay = c.get(Calendar.HOUR_OF_DAY);\n\n        if(timeOfDay &lt; 12){\n            return \"Good morning\";\n        }else if(timeOfDay &lt; 16){\n            return \"Good afternoon\";\n        }else if(timeOfDay &lt; 21){\n            return \"Good evening\";\n        }else {\n            return \"Good night\";\n        }\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":4500973,"reputation":395,"user_id":3659492,"accept_rate":78,"display_name":"Mahbubur Rahman Khan"},"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1605475462,"creation_date":1605475462,"answer_id":64849946,"question_id":27589701,"body_markdown":"More specific\r\n\r\n    public static String getDayMessage() {\r\n        Calendar c = Calendar.getInstance();\r\n        int timeOfDay = c.get(Calendar.HOUR_OF_DAY);\r\n\r\n        if (timeOfDay &lt; 5) {\r\n            return &quot;Hi, Good Mid Night&quot;;\r\n        }else if (timeOfDay &lt; 6) {\r\n            return &quot;Hi, Good Late Night&quot;;\r\n        } else if (timeOfDay &lt; 12) {\r\n            return &quot;Hi, Good Morning&quot;;\r\n        } else if (timeOfDay &lt; 14) {\r\n            return &quot;Hi, Good Noon&quot;;\r\n        } else if (timeOfDay &lt; 16) {\r\n            return &quot;Hi, Good Afternoon&quot;;\r\n        } else if (timeOfDay &lt; 21) {\r\n            return &quot;Hi, Good Evening&quot;;\r\n        } else {\r\n            return &quot;Hi, Good Night&quot;;\r\n        }\r\n    }","title":"Showing Morning, afternoon, evening, night message based on Time in java","body":"<p>More specific</p>\n<pre><code>public static String getDayMessage() {\n    Calendar c = Calendar.getInstance();\n    int timeOfDay = c.get(Calendar.HOUR_OF_DAY);\n\n    if (timeOfDay &lt; 5) {\n        return &quot;Hi, Good Mid Night&quot;;\n    }else if (timeOfDay &lt; 6) {\n        return &quot;Hi, Good Late Night&quot;;\n    } else if (timeOfDay &lt; 12) {\n        return &quot;Hi, Good Morning&quot;;\n    } else if (timeOfDay &lt; 14) {\n        return &quot;Hi, Good Noon&quot;;\n    } else if (timeOfDay &lt; 16) {\n        return &quot;Hi, Good Afternoon&quot;;\n    } else if (timeOfDay &lt; 21) {\n        return &quot;Hi, Good Evening&quot;;\n    } else {\n        return &quot;Hi, Good Night&quot;;\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":9683593,"reputation":1042,"user_id":7610258,"display_name":"Nadeem Bhat"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1608012985,"creation_date":1608012985,"answer_id":65300906,"question_id":27589701,"body_markdown":"For Kotlin Users They can use it like this :\r\n\r\n    private fun showDayMessage():String {\r\n        val c: Calendar = Calendar.getInstance()\r\n        var message:String ?=null\r\n        val timeOfDay: Int = c.get(Calendar.HOUR_OF_DAY)\r\n        if (timeOfDay &gt;= 0 &amp;&amp; timeOfDay &lt; 12) {\r\n            message =  &quot;Good Morning&quot;\r\n        } else if (timeOfDay &gt;= 12 &amp;&amp; timeOfDay &lt; 16) {\r\n            message =  &quot;Good Afternoon&quot;\r\n        } else if (timeOfDay &gt;= 16 &amp;&amp; timeOfDay &lt; 21) {\r\n            message =  &quot;Good Evening&quot;\r\n        } else if (timeOfDay &gt;= 21 &amp;&amp; timeOfDay &lt; 24) {\r\n            message =  &quot;Good Night&quot;\r\n        }\r\n        return  message!!\r\n    }\r\n","title":"Showing Morning, afternoon, evening, night message based on Time in java","body":"<p>For Kotlin Users They can use it like this :</p>\n<pre><code>private fun showDayMessage():String {\n    val c: Calendar = Calendar.getInstance()\n    var message:String ?=null\n    val timeOfDay: Int = c.get(Calendar.HOUR_OF_DAY)\n    if (timeOfDay &gt;= 0 &amp;&amp; timeOfDay &lt; 12) {\n        message =  &quot;Good Morning&quot;\n    } else if (timeOfDay &gt;= 12 &amp;&amp; timeOfDay &lt; 16) {\n        message =  &quot;Good Afternoon&quot;\n    } else if (timeOfDay &gt;= 16 &amp;&amp; timeOfDay &lt; 21) {\n        message =  &quot;Good Evening&quot;\n    } else if (timeOfDay &gt;= 21 &amp;&amp; timeOfDay &lt; 24) {\n        message =  &quot;Good Night&quot;\n    }\n    return  message!!\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2682672,"reputation":470,"user_id":2317688,"display_name":"Mahmudul"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1649528839,"creation_date":1649528839,"answer_id":71810802,"question_id":27589701,"body_markdown":"As Simple as possible\r\n\r\n     private String getTimeFromAndroid() {\r\n                Date dt = new Date();\r\n                Calendar c = Calendar.getInstance();\r\n                c.setTime(dt);\r\n                int hours = c.get(Calendar.HOUR_OF_DAY);\r\n                int min = c.get(Calendar.MINUTE);\r\n        \r\n                if(hours&lt;=12){       \r\n                    return &quot;Good Morning&quot;;\r\n                }else if(hours&lt;=16){        \r\n                    return &quot;Good Afternoon&quot;;        \r\n                }else if(hours&lt;=21){         \r\n                    return &quot;Good Evening&quot;;        \r\n                }else {\r\n                    return &quot;Good Night&quot;;\r\n                }              \r\n            }","title":"Showing Morning, afternoon, evening, night message based on Time in java","body":"<p>As Simple as possible</p>\n<pre><code> private String getTimeFromAndroid() {\n            Date dt = new Date();\n            Calendar c = Calendar.getInstance();\n            c.setTime(dt);\n            int hours = c.get(Calendar.HOUR_OF_DAY);\n            int min = c.get(Calendar.MINUTE);\n    \n            if(hours&lt;=12){       \n                return &quot;Good Morning&quot;;\n            }else if(hours&lt;=16){        \n                return &quot;Good Afternoon&quot;;        \n            }else if(hours&lt;=21){         \n                return &quot;Good Evening&quot;;        \n            }else {\n                return &quot;Good Night&quot;;\n            }              \n        }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":9686627,"reputation":6334,"user_id":7200133,"display_name":"Gk Mohammad Emon"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1669576576,"creation_date":1669576576,"answer_id":74593068,"question_id":27589701,"body_markdown":"This solution seems perfect for the **tropics** area countries&#39; users. Suppose my country is Bangladesh and this greeting is appropriate for our users most of the time. \r\n \r\n\r\n     public static String getTimeToHumanGenericTerm(boolean isBangla, Calendar c) {\r\n            int timeOfDay = c.get(Calendar.HOUR_OF_DAY);\r\n            if (timeOfDay &lt; 5) {\r\n                return isBangla ? &quot;  &quot; : &quot; Mid Night&quot;;\r\n            } else if (timeOfDay &lt; 6) {\r\n                return isBangla ? &quot;  &quot; : &quot; Late Night&quot;;\r\n            } else if (timeOfDay &lt; 12) {\r\n                return isBangla ? &quot;   &quot; : &quot; Late Night&quot;;\r\n            } else if (timeOfDay &lt; 14) {\r\n                return isBangla ? &quot; &quot; : &quot; Noon&quot;;\r\n            } else if (timeOfDay &lt; 16) {\r\n                return isBangla ? &quot; &quot; : &quot; Afternoon&quot;;\r\n            } else if (timeOfDay &lt; 21) {\r\n                return isBangla ? &quot; &quot; : &quot; Evening&quot;;\r\n            } else {\r\n                return isBangla ? &quot;  &quot; : &quot; Night&quot;;\r\n            }\r\n        }\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/7Dn8x.jpg","title":"Showing Morning, afternoon, evening, night message based on Time in java","body":"<p>This solution seems perfect for the <strong>tropics</strong> area countries' users. Suppose my country is Bangladesh and this greeting is appropriate for our users most of the time.</p>\n<pre><code> public static String getTimeToHumanGenericTerm(boolean isBangla, Calendar c) {\n        int timeOfDay = c.get(Calendar.HOUR_OF_DAY);\n        if (timeOfDay &lt; 5) {\n            return isBangla ? &quot;  &quot; : &quot; Mid Night&quot;;\n        } else if (timeOfDay &lt; 6) {\n            return isBangla ? &quot;  &quot; : &quot; Late Night&quot;;\n        } else if (timeOfDay &lt; 12) {\n            return isBangla ? &quot;   &quot; : &quot; Late Night&quot;;\n        } else if (timeOfDay &lt; 14) {\n            return isBangla ? &quot; &quot; : &quot; Noon&quot;;\n        } else if (timeOfDay &lt; 16) {\n            return isBangla ? &quot; &quot; : &quot; Afternoon&quot;;\n        } else if (timeOfDay &lt; 21) {\n            return isBangla ? &quot; &quot; : &quot; Evening&quot;;\n        } else {\n            return isBangla ? &quot;  &quot; : &quot; Night&quot;;\n        }\n    }\n</code></pre>\n<p><a href=\"https://i.stack.imgur.com/7Dn8x.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/7Dn8x.jpg\" alt=\"enter image description here\" /></a></p>\n"},{"tags":[],"owner":{"account_id":25881739,"reputation":112,"user_id":19610655,"display_name":"AR Sharif Uddin JUMMAN"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1699353768,"creation_date":1699113671,"answer_id":77422795,"question_id":27589701,"body_markdown":"I am developing an app in Bengali language for the people of my country, there I have written the code to detect morning, noon, afternoon, evening and night.\r\n\r\n**My code in Kotlin:** \r\n\r\n    val c = Calendar.getInstance()\r\n    val time = c.get(Calendar.HOUR_OF_DAY)\r\n                \r\n                timeState = if (time &lt; 13) &quot;&quot; // Morning\r\n                else if (time &lt; 15) &quot;&quot; // noon\r\n                else if (time &lt; 18) &quot;&quot; // afternoon\r\n                else if (time &lt; 20) &quot;&quot; // evening\r\n                else &quot;&quot; // night\r\n\r\n**My code in Java:** \r\n\r\n    Calendar c = Calendar.getInstance();\r\n            int time = c.get(Calendar.HOUR_OF_DAY);\r\n    \r\n            // Set the time state\r\n            String timeState;\r\n            if (time &lt; 13) timeState = &quot;&quot;; // Morning\r\n            else if (time &lt; 15) timeState = &quot;&quot;; // noon\r\n            else if (time &lt; 18) timeState = &quot;&quot;; // afternoon\r\n            else if (time &lt; 20) timeState = &quot;&quot;; // evening\r\n            else timeState = &quot;&quot;; // night","title":"Showing Morning, afternoon, evening, night message based on Time in java","body":"<p>I am developing an app in Bengali language for the people of my country, there I have written the code to detect morning, noon, afternoon, evening and night.</p>\n<p><strong>My code in Kotlin:</strong></p>\n<pre><code>val c = Calendar.getInstance()\nval time = c.get(Calendar.HOUR_OF_DAY)\n            \n            timeState = if (time &lt; 13) &quot;&quot; // Morning\n            else if (time &lt; 15) &quot;&quot; // noon\n            else if (time &lt; 18) &quot;&quot; // afternoon\n            else if (time &lt; 20) &quot;&quot; // evening\n            else &quot;&quot; // night\n</code></pre>\n<p><strong>My code in Java:</strong></p>\n<pre><code>Calendar c = Calendar.getInstance();\n        int time = c.get(Calendar.HOUR_OF_DAY);\n\n        // Set the time state\n        String timeState;\n        if (time &lt; 13) timeState = &quot;&quot;; // Morning\n        else if (time &lt; 15) timeState = &quot;&quot;; // noon\n        else if (time &lt; 18) timeState = &quot;&quot;; // afternoon\n        else if (time &lt; 20) timeState = &quot;&quot;; // evening\n        else timeState = &quot;&quot;; // night\n</code></pre>\n"}],"owner":{"account_id":1087775,"reputation":42376,"user_id":1083093,"accept_rate":67,"display_name":"Devrath"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":82850,"favorite_count":0,"down_vote_count":0,"up_vote_count":56,"accepted_answer_id":27589769,"answer_count":19,"score":56,"last_activity_date":1699353768,"creation_date":1419167619,"question_id":27589701,"body_markdown":"What i am trying to do::\r\n------------------------\r\n\r\n**Show message based on**\r\n\r\n - Good morning  (12am-12pm)\r\n - Good after noon (12pm -4pm)\r\n - Good evening (4pm to 9pm)\r\n - Good night ( 9pm to 6am)\r\n\r\n\r\n----------\r\n\r\nCODE::\r\n------\r\nI used 24-hr format to get this logic\r\n\r\n    private void getTimeFromAndroid() {\r\n    \t\tDate dt = new Date();\r\n            int hours = dt.getHours();\r\n            int min = dt.getMinutes();\r\n    \r\n            if(hours&gt;=1 || hours&lt;=12){\r\n            \tToast.makeText(this, &quot;Good Morning&quot;, Toast.LENGTH_SHORT).show();\r\n            }else if(hours&gt;=12 || hours&lt;=16){\r\n            \tToast.makeText(this, &quot;Good Afternoon&quot;, Toast.LENGTH_SHORT).show();\r\n            }else if(hours&gt;=16 || hours&lt;=21){\r\n            \tToast.makeText(this, &quot;Good Evening&quot;, Toast.LENGTH_SHORT).show();\r\n            }else if(hours&gt;=21 || hours&lt;=24){\r\n            \tToast.makeText(this, &quot;Good Night&quot;, Toast.LENGTH_SHORT).show();\r\n            }\r\n    \t}\r\n\r\n\r\n----------\r\n\r\nQuestion:\r\n---------\r\n\r\n - Is this this best way of doing it, If no which is the best way\r\n\r\n","title":"Showing Morning, afternoon, evening, night message based on Time in java","body":"<h2>What i am trying to do::</h2>\n\n<p><strong>Show message based on</strong></p>\n\n<ul>\n<li>Good morning  (12am-12pm)</li>\n<li>Good after noon (12pm -4pm)</li>\n<li>Good evening (4pm to 9pm)</li>\n<li>Good night ( 9pm to 6am)</li>\n</ul>\n\n<hr>\n\n<h2>CODE::</h2>\n\n<p>I used 24-hr format to get this logic</p>\n\n<pre><code>private void getTimeFromAndroid() {\n        Date dt = new Date();\n        int hours = dt.getHours();\n        int min = dt.getMinutes();\n\n        if(hours&gt;=1 || hours&lt;=12){\n            Toast.makeText(this, \"Good Morning\", Toast.LENGTH_SHORT).show();\n        }else if(hours&gt;=12 || hours&lt;=16){\n            Toast.makeText(this, \"Good Afternoon\", Toast.LENGTH_SHORT).show();\n        }else if(hours&gt;=16 || hours&lt;=21){\n            Toast.makeText(this, \"Good Evening\", Toast.LENGTH_SHORT).show();\n        }else if(hours&gt;=21 || hours&lt;=24){\n            Toast.makeText(this, \"Good Night\", Toast.LENGTH_SHORT).show();\n        }\n    }\n</code></pre>\n\n<hr>\n\n<h2>Question:</h2>\n\n<ul>\n<li>Is this this best way of doing it, If no which is the best way</li>\n</ul>\n"},{"tags":["java","spring-boot","maven","swagger","springfox"],"comments":[{"owner":{"account_id":3607248,"reputation":71,"user_id":3009150,"display_name":"Arun Duraisamy"},"score":1,"creation_date":1699303282,"post_id":77433706,"comment_id":136512450,"body_markdown":"@ankitRego 1. check your application.properties | yaml file for any **context-Path** .  2. springfox-swagger-ui can be replace with springdoc-openapi-starter-webmvc-ui refer this [Migrating from SpringFox](https://springdoc.org/migrating-from-springfox.html)","body":"@ankitRego 1. check your application.properties | yaml file for any <b>context-Path</b> .  2. springfox-swagger-ui can be replace with springdoc-openapi-starter-webmvc-ui refer this <a href=\"https://springdoc.org/migrating-from-springfox.html\" rel=\"nofollow noreferrer\">Migrating from SpringFox</a>"},{"owner":{"account_id":21505740,"reputation":41,"user_id":15849157,"display_name":"Ankit Rege"},"score":1,"creation_date":1699322360,"post_id":77433706,"comment_id":136514529,"body_markdown":"thank you @arun Duraisamy , after replacing the \n\n &lt;artifactId&gt;springfox-swagger-ui&lt;/artifactId&gt;\n                       new dependency\n&lt;artifactId&gt;springdoc-openapi-starter-webmvc-ui&lt;/artifactId&gt;\n      I am able to do the GET call.","body":"thank you @arun Duraisamy , after replacing the    &lt;artifactId&gt;springfox-swagger-ui&lt;/artifactId&gt;                        new dependency &lt;artifactId&gt;springdoc-openapi-starter-webmvc-ui&lt;/artifactId&gt;       I am able to do the GET call."}],"answers":[{"tags":[],"owner":{"account_id":3607248,"reputation":71,"user_id":3009150,"display_name":"Arun Duraisamy"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1699353470,"creation_date":1699353470,"answer_id":77437513,"question_id":77433706,"body_markdown":"Ankit Rege Please check the below\r\n\r\n1. check your application.properties | yaml file for any *context-Path* .\r\n \r\n2. springfox-swagger-ui can be replace with springdoc-openapi-starter-webmvc-ui refer this [Migrating from SpringFox](https://springdoc.org/migrating-from-springfox.html)","title":"No mapping for GET /v3/api-docs | not able to use swagger in spring boot app","body":"<p>Ankit Rege Please check the below</p>\n<ol>\n<li><p>check your application.properties | yaml file for any <em>context-Path</em> .</p>\n</li>\n<li><p>springfox-swagger-ui can be replace with springdoc-openapi-starter-webmvc-ui refer this <a href=\"https://springdoc.org/migrating-from-springfox.html\" rel=\"nofollow noreferrer\">Migrating from SpringFox</a></p>\n</li>\n</ol>\n"}],"owner":{"account_id":21505740,"reputation":41,"user_id":15849157,"display_name":"Ankit Rege"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":114,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":77437513,"answer_count":1,"score":0,"last_activity_date":1699353470,"creation_date":1699298390,"question_id":77433706,"body_markdown":"I have created a spring-boot application, for blogging application. while I try to use swagger in spring-boot app to create a document for all the APIs I have created.\r\n\r\nThe **GET http://localhost:8080/v3/api-docs** is giving me a unauthorized error. even though I am using the correct token.\r\n\r\n\r\n[![unauthorized error](https://i.stack.imgur.com/gn63d.png)](https://i.stack.imgur.com/gn63d.png)\r\n\r\n[![springfox dependencies in maven dependencies](https://i.stack.imgur.com/VUgag.png)](https://i.stack.imgur.com/VUgag.png)\r\n\r\n\r\nhere is the classes I have created \r\n\r\n\r\n```\r\npackage com.codewithdurgesh.blog.configs;\r\n\r\nimport org.springframework.beans.factory.annotation.Autowired;\r\nimport org.springframework.context.annotation.Bean;\r\nimport org.springframework.context.annotation.Configuration;\r\nimport org.springframework.context.annotation.Lazy;\r\nimport org.springframework.security.config.annotation.authentication.builders.AuthenticationManagerBuilder;\r\nimport org.springframework.security.config.annotation.authentication.configuration.AuthenticationConfiguration;\r\nimport org.springframework.security.config.annotation.method.configuration.EnableGlobalMethodSecurity;\r\nimport org.springframework.security.config.annotation.method.configuration.EnableMethodSecurity;\r\nimport org.springframework.security.config.annotation.web.builders.HttpSecurity;\r\nimport org.springframework.security.config.annotation.web.configuration.EnableWebSecurity;\r\nimport org.springframework.security.config.http.SessionCreationPolicy;\r\nimport org.springframework.security.core.userdetails.User;\r\nimport org.springframework.security.core.userdetails.UserDetails;\r\nimport org.springframework.security.core.userdetails.UserDetailsService;\r\nimport org.springframework.security.crypto.bcrypt.BCryptPasswordEncoder;\r\nimport org.springframework.security.crypto.password.PasswordEncoder;\r\nimport org.springframework.security.provisioning.InMemoryUserDetailsManager;\r\nimport org.springframework.security.web.DefaultSecurityFilterChain;\r\nimport org.springframework.security.web.SecurityFilterChain;\r\nimport org.springframework.security.web.authentication.UsernamePasswordAuthenticationFilter;\r\nimport org.springframework.web.servlet.config.annotation.EnableWebMvc;\r\nimport org.springframework.security.authentication.AuthenticationManager;\r\nimport org.springframework.security.authentication.UsernamePasswordAuthenticationToken;\r\nimport org.springframework.security.authentication.dao.DaoAuthenticationProvider;\r\n\r\nimport com.codewithdurgesh.blog.sequrity.CustomUserDetailService;\r\nimport com.codewithdurgesh.blog.sequrity.JWTAuthenticationEntryPoint;\r\nimport com.codewithdurgesh.blog.sequrity.JwtAuthenticationFilter;\r\n\r\nimport jakarta.servlet.Filter;\r\n\r\n@Configuration\r\n@EnableMethodSecurity\r\n@EnableWebMvc\r\n@EnableWebSecurity\r\npublic class SecurityConfigs {\r\n\r\n\tpublic static final String[] PUBLIC_URLS = {\r\n\t\t\t&quot;/v3/api-docs&quot;,\r\n\t\t\t&quot;/api/v1/auth/**&quot;,\r\n\t\t\t&quot;/v2/api-docs&quot;,\r\n\t\t\t&quot;/v3/api-docs&quot;,\r\n\t\t\t&quot;/swagger-resources/**&quot;,\r\n\t\t\t&quot;/swagger-ui/**&quot;,\r\n\t\t\t&quot;/webjars/**&quot;\r\n\t};\r\n\t\r\n\t@Autowired\r\n\tprivate CustomUserDetailService customUserDetailService;\r\n\r\n\t@Autowired\r\n\tprivate JWTAuthenticationEntryPoint jwtAuthenticationEntryPoint;\r\n\r\n\t@Autowired\r\n\tprivate JwtAuthenticationFilter jwtAutheticationFilter;\r\n\r\n\t@Bean\r\n\tpublic PasswordEncoder passwordEncoder() {\r\n\t\treturn new BCryptPasswordEncoder();\r\n\t}\r\n\r\n\t@SuppressWarnings(&quot;removal&quot;)\r\n\t@Bean\r\n\tpublic SecurityFilterChain securityFilterChain(HttpSecurity httpSecurity) throws Exception {\r\n\r\n\t\thttpSecurity.csrf().disable().authorizeHttpRequests().requestMatchers(&quot;/api/v1/auth/**&quot;).permitAll()\r\n\t\t\t\t.requestMatchers(&quot;/v3/api-docs&quot;).permitAll().anyRequest().authenticated().and().exceptionHandling()\r\n\t\t\t\t.authenticationEntryPoint(jwtAuthenticationEntryPoint).and().sessionManagement()\r\n\t\t\t\t.sessionCreationPolicy(SessionCreationPolicy.STATELESS);\r\n//\t\t.formLogin();\r\n\r\n\t\thttpSecurity.addFilterBefore(this.jwtAutheticationFilter, UsernamePasswordAuthenticationFilter.class);\r\n\r\n\t\thttpSecurity.authenticationProvider(daoAuthenticationProvider());\r\n\r\n\t\tDefaultSecurityFilterChain defaultSecurityFilterChain = httpSecurity.build();\r\n\r\n\t\treturn defaultSecurityFilterChain;\r\n\t}\r\n\r\n\r\n\t@Bean\r\n\tpublic DaoAuthenticationProvider daoAuthenticationProvider() {\r\n\t\tDaoAuthenticationProvider provider = new DaoAuthenticationProvider();\r\n\t\tprovider.setUserDetailsService(customUserDetailService);\r\n\t\tprovider.setPasswordEncoder(passwordEncoder());\r\n\r\n\t\treturn provider;\r\n\t}\r\n\r\n\t@Bean\r\n\tpublic AuthenticationManager authenticationManagerBean(AuthenticationConfiguration config) throws Exception {\r\n\t\treturn config.getAuthenticationManager();\r\n\r\n\t}\r\n\r\n}\r\n\r\n```\r\nbelow is the Pom.xml\r\n\r\n\r\n```\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot;\r\n\txmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n\txsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\r\n\t&lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n\t&lt;parent&gt;\r\n\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t&lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\r\n\t\t&lt;version&gt;3.1.5&lt;/version&gt;\r\n\t\t&lt;relativePath /&gt; &lt;!-- lookup parent from repository --&gt;\r\n\t&lt;/parent&gt;\r\n\t&lt;groupId&gt;com.codewithdurgesh.blog&lt;/groupId&gt;\r\n\t&lt;artifactId&gt;blog-app-api&lt;/artifactId&gt;\r\n\t&lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\r\n\t&lt;name&gt;blog-app-api&lt;/name&gt;\r\n\t&lt;description&gt;this is a backend APIs project for blogging&lt;/description&gt;\r\n\t&lt;properties&gt;\r\n\t\t&lt;java.version&gt;17&lt;/java.version&gt;\r\n\t&lt;/properties&gt;\r\n\t&lt;dependencies&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;jakarta.validation&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;jakarta.validation-api&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-security&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n\t\t&lt;!-- https://docs.groupdocs.com/viewer/java/noclassdeffounderror-javaxxmlbind/ \r\n\t\t\tas we were gettingjava.lang.NoClassDefFoundError: javax/xml/bind/DatatypeConverter] \r\n\t\t\twith root cause java.lang.ClassNotFoundException: javax.xml.bind.DatatypeConverter \r\n\t\t\texception --&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;javax.xml.bind&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;jaxb-api&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;2.3.0&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n\t\t&lt;!-- https://mvnrepository.com/artifact/org.springframework.boot/spring-boot-starter-validation --&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-validation&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-devtools&lt;/artifactId&gt;\r\n\t\t\t&lt;scope&gt;runtime&lt;/scope&gt;\r\n\t\t\t&lt;optional&gt;true&lt;/optional&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;com.mysql&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;mysql-connector-j&lt;/artifactId&gt;\r\n\t\t\t&lt;scope&gt;runtime&lt;/scope&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;!-- https://mvnrepository.com/artifact/io.jsonwebtoken/jjwt --&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;io.jsonwebtoken&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;jjwt&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;0.9.1&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n\t\t**&lt;!-- https://mvnrepository.com/artifact/io.springfox/springfox-swagger-ui --&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;io.springfox&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;springfox-swagger-ui&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;3.0.0&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;**\r\n\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;lombok&lt;/artifactId&gt;\r\n\t\t\t&lt;optional&gt;true&lt;/optional&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\r\n\t\t\t&lt;scope&gt;test&lt;/scope&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;!-- https://mvnrepository.com/artifact/org.modelmapper/modelmapper --&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.modelmapper&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;modelmapper&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;3.2.0&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n\r\n\t&lt;/dependencies&gt;\r\n\r\n\t&lt;build&gt;\r\n\t\t&lt;plugins&gt;\r\n\t\t\t&lt;plugin&gt;\r\n\t\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t\t&lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\r\n\t\t\t\t&lt;configuration&gt;\r\n\t\t\t\t\t&lt;excludes&gt;\r\n\t\t\t\t\t\t&lt;exclude&gt;\r\n\t\t\t\t\t\t\t&lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\r\n\t\t\t\t\t\t\t&lt;artifactId&gt;lombok&lt;/artifactId&gt;\r\n\t\t\t\t\t\t&lt;/exclude&gt;\r\n\t\t\t\t\t&lt;/excludes&gt;\r\n\t\t\t\t&lt;/configuration&gt;\r\n\t\t\t&lt;/plugin&gt;\r\n\t\t&lt;/plugins&gt;\r\n\t&lt;/build&gt;\r\n\r\n&lt;/project&gt;\r\n\r\n```\r\nbelowis the stack trace\r\n\r\n\r\n```\r\n2023-11-07T00:29:18.915+05:30 DEBUG 10440 --- [nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /v3/api-docs\r\nrequest token is Bearer eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhbmtpdFhZWkB4eXouY29tIiwiZXhwIjoxNjk5MzE1MDQ0LCJpYXQiOjE2OTkyOTcwNDR9.-BvOmOxiFSdhLIoyppvs9xGkwQsDtleDFPhhRB9_SXdcyDThXRw9sKlQcFWyQ6vRfZpirpv7lQ4rwAei6CeyGA\r\nHibernate: \r\n    select\r\n        u1_0.id,\r\n        u1_0.about,\r\n        u1_0.email,\r\n        u1_0.user_name,\r\n        u1_0.password \r\n    from\r\n        users u1_0 \r\n    where\r\n        u1_0.email=?\r\nHibernate: \r\n    select\r\n        r1_0.user,\r\n        r1_1.id,\r\n        r1_1.role_name \r\n    from\r\n        user_roles r1_0 \r\n    join\r\n        role r1_1 \r\n            on r1_1.id=r1_0.role \r\n    where\r\n        r1_0.user=?\r\n2023-11-07T00:29:18.938+05:30 DEBUG 10440 --- [nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /v3/api-docs\r\n2023-11-07T00:29:18.939+05:30  WARN 10440 --- [nio-8080-exec-6] o.s.web.servlet.PageNotFound             : No mapping for GET /v3/api-docs\r\n2023-11-07T00:29:18.940+05:30 DEBUG 10440 --- [nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /error\r\n2023-11-07T00:29:18.942+05:30 DEBUG 10440 --- [nio-8080-exec-6] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext\r\n\r\n```\r\nI am not seeing any error logs for these, so it is a little confusing for me.\r\n\r\n\r\n\r\nI tried to look for answers in stackOverFlows. I did get some questions, However I was not able to solve the issue I am facing \r\n\r\nany help would be appreciated\r\n\r\nthank you in advance","title":"No mapping for GET /v3/api-docs | not able to use swagger in spring boot app","body":"<p>I have created a spring-boot application, for blogging application. while I try to use swagger in spring-boot app to create a document for all the APIs I have created.</p>\n<p>The <strong>GET http://localhost:8080/v3/api-docs</strong> is giving me a unauthorized error. even though I am using the correct token.</p>\n<p><a href=\"https://i.stack.imgur.com/gn63d.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/gn63d.png\" alt=\"unauthorized error\" /></a></p>\n<p><a href=\"https://i.stack.imgur.com/VUgag.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/VUgag.png\" alt=\"springfox dependencies in maven dependencies\" /></a></p>\n<p>here is the classes I have created</p>\n<pre><code>package com.codewithdurgesh.blog.configs;\n\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.context.annotation.Bean;\nimport org.springframework.context.annotation.Configuration;\nimport org.springframework.context.annotation.Lazy;\nimport org.springframework.security.config.annotation.authentication.builders.AuthenticationManagerBuilder;\nimport org.springframework.security.config.annotation.authentication.configuration.AuthenticationConfiguration;\nimport org.springframework.security.config.annotation.method.configuration.EnableGlobalMethodSecurity;\nimport org.springframework.security.config.annotation.method.configuration.EnableMethodSecurity;\nimport org.springframework.security.config.annotation.web.builders.HttpSecurity;\nimport org.springframework.security.config.annotation.web.configuration.EnableWebSecurity;\nimport org.springframework.security.config.http.SessionCreationPolicy;\nimport org.springframework.security.core.userdetails.User;\nimport org.springframework.security.core.userdetails.UserDetails;\nimport org.springframework.security.core.userdetails.UserDetailsService;\nimport org.springframework.security.crypto.bcrypt.BCryptPasswordEncoder;\nimport org.springframework.security.crypto.password.PasswordEncoder;\nimport org.springframework.security.provisioning.InMemoryUserDetailsManager;\nimport org.springframework.security.web.DefaultSecurityFilterChain;\nimport org.springframework.security.web.SecurityFilterChain;\nimport org.springframework.security.web.authentication.UsernamePasswordAuthenticationFilter;\nimport org.springframework.web.servlet.config.annotation.EnableWebMvc;\nimport org.springframework.security.authentication.AuthenticationManager;\nimport org.springframework.security.authentication.UsernamePasswordAuthenticationToken;\nimport org.springframework.security.authentication.dao.DaoAuthenticationProvider;\n\nimport com.codewithdurgesh.blog.sequrity.CustomUserDetailService;\nimport com.codewithdurgesh.blog.sequrity.JWTAuthenticationEntryPoint;\nimport com.codewithdurgesh.blog.sequrity.JwtAuthenticationFilter;\n\nimport jakarta.servlet.Filter;\n\n@Configuration\n@EnableMethodSecurity\n@EnableWebMvc\n@EnableWebSecurity\npublic class SecurityConfigs {\n\n    public static final String[] PUBLIC_URLS = {\n            &quot;/v3/api-docs&quot;,\n            &quot;/api/v1/auth/**&quot;,\n            &quot;/v2/api-docs&quot;,\n            &quot;/v3/api-docs&quot;,\n            &quot;/swagger-resources/**&quot;,\n            &quot;/swagger-ui/**&quot;,\n            &quot;/webjars/**&quot;\n    };\n    \n    @Autowired\n    private CustomUserDetailService customUserDetailService;\n\n    @Autowired\n    private JWTAuthenticationEntryPoint jwtAuthenticationEntryPoint;\n\n    @Autowired\n    private JwtAuthenticationFilter jwtAutheticationFilter;\n\n    @Bean\n    public PasswordEncoder passwordEncoder() {\n        return new BCryptPasswordEncoder();\n    }\n\n    @SuppressWarnings(&quot;removal&quot;)\n    @Bean\n    public SecurityFilterChain securityFilterChain(HttpSecurity httpSecurity) throws Exception {\n\n        httpSecurity.csrf().disable().authorizeHttpRequests().requestMatchers(&quot;/api/v1/auth/**&quot;).permitAll()\n                .requestMatchers(&quot;/v3/api-docs&quot;).permitAll().anyRequest().authenticated().and().exceptionHandling()\n                .authenticationEntryPoint(jwtAuthenticationEntryPoint).and().sessionManagement()\n                .sessionCreationPolicy(SessionCreationPolicy.STATELESS);\n//      .formLogin();\n\n        httpSecurity.addFilterBefore(this.jwtAutheticationFilter, UsernamePasswordAuthenticationFilter.class);\n\n        httpSecurity.authenticationProvider(daoAuthenticationProvider());\n\n        DefaultSecurityFilterChain defaultSecurityFilterChain = httpSecurity.build();\n\n        return defaultSecurityFilterChain;\n    }\n\n\n    @Bean\n    public DaoAuthenticationProvider daoAuthenticationProvider() {\n        DaoAuthenticationProvider provider = new DaoAuthenticationProvider();\n        provider.setUserDetailsService(customUserDetailService);\n        provider.setPasswordEncoder(passwordEncoder());\n\n        return provider;\n    }\n\n    @Bean\n    public AuthenticationManager authenticationManagerBean(AuthenticationConfiguration config) throws Exception {\n        return config.getAuthenticationManager();\n\n    }\n\n}\n\n</code></pre>\n<p>below is the Pom.xml</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot;\n    xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n    xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n    &lt;parent&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\n        &lt;version&gt;3.1.5&lt;/version&gt;\n        &lt;relativePath /&gt; &lt;!-- lookup parent from repository --&gt;\n    &lt;/parent&gt;\n    &lt;groupId&gt;com.codewithdurgesh.blog&lt;/groupId&gt;\n    &lt;artifactId&gt;blog-app-api&lt;/artifactId&gt;\n    &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\n    &lt;name&gt;blog-app-api&lt;/name&gt;\n    &lt;description&gt;this is a backend APIs project for blogging&lt;/description&gt;\n    &lt;properties&gt;\n        &lt;java.version&gt;17&lt;/java.version&gt;\n    &lt;/properties&gt;\n    &lt;dependencies&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;jakarta.validation&lt;/groupId&gt;\n            &lt;artifactId&gt;jakarta.validation-api&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-security&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n\n        &lt;!-- https://docs.groupdocs.com/viewer/java/noclassdeffounderror-javaxxmlbind/ \n            as we were gettingjava.lang.NoClassDefFoundError: javax/xml/bind/DatatypeConverter] \n            with root cause java.lang.ClassNotFoundException: javax.xml.bind.DatatypeConverter \n            exception --&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;javax.xml.bind&lt;/groupId&gt;\n            &lt;artifactId&gt;jaxb-api&lt;/artifactId&gt;\n            &lt;version&gt;2.3.0&lt;/version&gt;\n        &lt;/dependency&gt;\n\n        &lt;!-- https://mvnrepository.com/artifact/org.springframework.boot/spring-boot-starter-validation --&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-validation&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-devtools&lt;/artifactId&gt;\n            &lt;scope&gt;runtime&lt;/scope&gt;\n            &lt;optional&gt;true&lt;/optional&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.mysql&lt;/groupId&gt;\n            &lt;artifactId&gt;mysql-connector-j&lt;/artifactId&gt;\n            &lt;scope&gt;runtime&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;!-- https://mvnrepository.com/artifact/io.jsonwebtoken/jjwt --&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;io.jsonwebtoken&lt;/groupId&gt;\n            &lt;artifactId&gt;jjwt&lt;/artifactId&gt;\n            &lt;version&gt;0.9.1&lt;/version&gt;\n        &lt;/dependency&gt;\n\n        **&lt;!-- https://mvnrepository.com/artifact/io.springfox/springfox-swagger-ui --&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;io.springfox&lt;/groupId&gt;\n            &lt;artifactId&gt;springfox-swagger-ui&lt;/artifactId&gt;\n            &lt;version&gt;3.0.0&lt;/version&gt;\n        &lt;/dependency&gt;**\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\n            &lt;artifactId&gt;lombok&lt;/artifactId&gt;\n            &lt;optional&gt;true&lt;/optional&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;!-- https://mvnrepository.com/artifact/org.modelmapper/modelmapper --&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.modelmapper&lt;/groupId&gt;\n            &lt;artifactId&gt;modelmapper&lt;/artifactId&gt;\n            &lt;version&gt;3.2.0&lt;/version&gt;\n        &lt;/dependency&gt;\n\n\n    &lt;/dependencies&gt;\n\n    &lt;build&gt;\n        &lt;plugins&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n                &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\n                &lt;configuration&gt;\n                    &lt;excludes&gt;\n                        &lt;exclude&gt;\n                            &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\n                            &lt;artifactId&gt;lombok&lt;/artifactId&gt;\n                        &lt;/exclude&gt;\n                    &lt;/excludes&gt;\n                &lt;/configuration&gt;\n            &lt;/plugin&gt;\n        &lt;/plugins&gt;\n    &lt;/build&gt;\n\n&lt;/project&gt;\n\n</code></pre>\n<p>belowis the stack trace</p>\n<pre><code>2023-11-07T00:29:18.915+05:30 DEBUG 10440 --- [nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /v3/api-docs\nrequest token is Bearer eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhbmtpdFhZWkB4eXouY29tIiwiZXhwIjoxNjk5MzE1MDQ0LCJpYXQiOjE2OTkyOTcwNDR9.-BvOmOxiFSdhLIoyppvs9xGkwQsDtleDFPhhRB9_SXdcyDThXRw9sKlQcFWyQ6vRfZpirpv7lQ4rwAei6CeyGA\nHibernate: \n    select\n        u1_0.id,\n        u1_0.about,\n        u1_0.email,\n        u1_0.user_name,\n        u1_0.password \n    from\n        users u1_0 \n    where\n        u1_0.email=?\nHibernate: \n    select\n        r1_0.user,\n        r1_1.id,\n        r1_1.role_name \n    from\n        user_roles r1_0 \n    join\n        role r1_1 \n            on r1_1.id=r1_0.role \n    where\n        r1_0.user=?\n2023-11-07T00:29:18.938+05:30 DEBUG 10440 --- [nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /v3/api-docs\n2023-11-07T00:29:18.939+05:30  WARN 10440 --- [nio-8080-exec-6] o.s.web.servlet.PageNotFound             : No mapping for GET /v3/api-docs\n2023-11-07T00:29:18.940+05:30 DEBUG 10440 --- [nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /error\n2023-11-07T00:29:18.942+05:30 DEBUG 10440 --- [nio-8080-exec-6] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext\n\n</code></pre>\n<p>I am not seeing any error logs for these, so it is a little confusing for me.</p>\n<p>I tried to look for answers in stackOverFlows. I did get some questions, However I was not able to solve the issue I am facing</p>\n<p>any help would be appreciated</p>\n<p>thank you in advance</p>\n"},{"tags":["java","date"],"comments":[{"owner":{"account_id":362885,"reputation":37256,"user_id":706317,"accept_rate":70,"display_name":"ZhekaKozlov"},"score":1,"creation_date":1580530250,"post_id":2689379,"comment_id":106137492,"body_markdown":"[LocalDate.datesUntil()](https://docs.oracle.com/en/java/javase/13/docs/api/java.base/java/time/LocalDate.html#datesUntil(java.time.LocalDate))","body":"<a href=\"https://docs.oracle.com/en/java/javase/13/docs/api/java.base/java/time/LocalDate.html#datesUntil(java.time.LocalDate)\" rel=\"nofollow noreferrer\">LocalDate.datesUntil()</a>"},{"owner":{"account_id":67096,"reputation":24787,"user_id":196507,"accept_rate":90,"display_name":"lepe"},"score":1,"creation_date":1633253527,"post_id":2689379,"comment_id":122706012,"body_markdown":"For those using groovy (using LocalDate): `(fromDate..toDate).each { println it }`","body":"For those using groovy (using LocalDate): <code>(fromDate..toDate).each { println it }</code>"}],"answers":[{"tags":[],"owner":{"account_id":54608,"reputation":8378,"user_id":163423,"accept_rate":95,"display_name":"George"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1271927377,"creation_date":1271926738,"answer_id":2689414,"question_id":2689379,"body_markdown":"One solution would be to create a `Calendar` instance, and start a cycle, increasing it&#39;s `Calendar.DATE` field until it reaches the desired date. Also, on each step you should create a `Date` instance (with corresponding parameters), and put it to your list.\r\n\r\nSome dirty code:\r\n\r\n        public List&lt;Date&gt; getDatesBetween(final Date date1, final Date date2) {\r\n\t\tList&lt;Date&gt; dates = new ArrayList&lt;Date&gt;();\r\n\t\t\r\n\t\tCalendar calendar = new GregorianCalendar() {{\r\n\t\t\tset(Calendar.YEAR, date1.getYear());\r\n\t\t\tset(Calendar.MONTH, date1.getMonth());\r\n\t\t\tset(Calendar.DATE, date1.getDate());\r\n\t\t}};\r\n\t\t\r\n\t\twhile (calendar.get(Calendar.YEAR) != date2.getYear() &amp;&amp; calendar.get(Calendar.MONTH) != date2.getMonth() &amp;&amp; calendar.get(Calendar.DATE) != date2.getDate()) {\r\n\t\t\tcalendar.add(Calendar.DATE, 1);\r\n\t\t\tdates.add(new Date(calendar.get(Calendar.YEAR), calendar.get(Calendar.MONTH), calendar.get(Calendar.DATE)));\r\n\t\t}\r\n\t\t\r\n\t\treturn dates;\r\n    }","title":"how to get a list of dates between two dates in java","body":"<p>One solution would be to create a <code>Calendar</code> instance, and start a cycle, increasing it's <code>Calendar.DATE</code> field until it reaches the desired date. Also, on each step you should create a <code>Date</code> instance (with corresponding parameters), and put it to your list.</p>\n\n<p>Some dirty code:</p>\n\n<pre><code>    public List&lt;Date&gt; getDatesBetween(final Date date1, final Date date2) {\n    List&lt;Date&gt; dates = new ArrayList&lt;Date&gt;();\n\n    Calendar calendar = new GregorianCalendar() {{\n        set(Calendar.YEAR, date1.getYear());\n        set(Calendar.MONTH, date1.getMonth());\n        set(Calendar.DATE, date1.getDate());\n    }};\n\n    while (calendar.get(Calendar.YEAR) != date2.getYear() &amp;&amp; calendar.get(Calendar.MONTH) != date2.getMonth() &amp;&amp; calendar.get(Calendar.DATE) != date2.getDate()) {\n        calendar.add(Calendar.DATE, 1);\n        dates.add(new Date(calendar.get(Calendar.YEAR), calendar.get(Calendar.MONTH), calendar.get(Calendar.DATE)));\n    }\n\n    return dates;\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":12478,"reputation":23673,"user_id":24582,"display_name":"extraneon"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1271927364,"creation_date":1271927364,"answer_id":2689479,"question_id":2689379,"body_markdown":"You can also look at the [Date.getTime()][1] API. That gives a long to which you can add your increment. Then create a new Date.\r\n\r\n    List&lt;Date&gt; dates = new ArrayList&lt;Date&gt;();\r\n    long interval = 1000 * 60 * 60; // 1 hour in millis\r\n    long endtime = ; // create your endtime here, possibly using Calendar or Date\r\n    long curTime = startDate.getTime();\r\n    while (curTime &lt;= endTime) {\r\n      dates.add(new Date(curTime));\r\n      curTime += interval;\r\n    }\r\n    \r\nand maybe apache commons has something like this in DateUtils, or perhaps they have a CalendarUtils too :)\r\n\r\n**EDIT**\r\n\r\nincluding the start _and_ enddate may not be possible if your interval is not perfect :)\r\n\r\n  [1]: http://java.sun.com/j2se/1.5.0/docs/api/java/util/Date.html#getTime()","title":"how to get a list of dates between two dates in java","body":"<p>You can also look at the <a href=\"http://java.sun.com/j2se/1.5.0/docs/api/java/util/Date.html#getTime()\" rel=\"nofollow noreferrer\">Date.getTime()</a> API. That gives a long to which you can add your increment. Then create a new Date.</p>\n\n<pre><code>List&lt;Date&gt; dates = new ArrayList&lt;Date&gt;();\nlong interval = 1000 * 60 * 60; // 1 hour in millis\nlong endtime = ; // create your endtime here, possibly using Calendar or Date\nlong curTime = startDate.getTime();\nwhile (curTime &lt;= endTime) {\n  dates.add(new Date(curTime));\n  curTime += interval;\n}\n</code></pre>\n\n<p>and maybe apache commons has something like this in DateUtils, or perhaps they have a CalendarUtils too :)</p>\n\n<p><strong>EDIT</strong></p>\n\n<p>including the start <em>and</em> enddate may not be possible if your interval is not perfect :)</p>\n"},{"tags":[],"owner":{"account_id":99290,"reputation":2115,"user_id":268278,"accept_rate":100,"display_name":"Albert"},"down_vote_count":0,"up_vote_count":54,"is_accepted":false,"score":54,"last_activity_date":1547116242,"creation_date":1271927435,"answer_id":2689485,"question_id":2689379,"body_markdown":"&gt;Back in 2010, I suggested to use [Joda-Time][1] for that.\n&gt;\n&gt; Note that Joda-Time is now in maintenance mode. Since 1.8 (2014), you should use `java.time`.\n\nAdd one day at a time until reaching the end date:\n\n    int days = Days.daysBetween(startDate, endDate).getDays();\n    List&lt;LocalDate&gt; dates = new ArrayList&lt;LocalDate&gt;(days);  // Set initial capacity to `days`.\n    for (int i=0; i &lt; days; i++) {\n        LocalDate d = startDate.withFieldAdded(DurationFieldType.days(), i);\n        dates.add(d);\n    }\n\nIt wouldn&#39;t be too hard to implement your own iterator to do this as well, that would be even nicer.\n\n\n  [1]: http://www.joda.org/joda-time/","title":"how to get a list of dates between two dates in java","body":"<blockquote>\n<p>Back in 2010, I suggested to use <a href=\"http://www.joda.org/joda-time/\" rel=\"noreferrer\">Joda-Time</a> for that.</p>\n<p>Note that Joda-Time is now in maintenance mode. Since 1.8 (2014), you should use <code>java.time</code>.</p>\n</blockquote>\n<p>Add one day at a time until reaching the end date:</p>\n<pre><code>int days = Days.daysBetween(startDate, endDate).getDays();\nList&lt;LocalDate&gt; dates = new ArrayList&lt;LocalDate&gt;(days);  // Set initial capacity to `days`.\nfor (int i=0; i &lt; days; i++) {\n    LocalDate d = startDate.withFieldAdded(DurationFieldType.days(), i);\n    dates.add(d);\n}\n</code></pre>\n<p>It wouldn't be too hard to implement your own iterator to do this as well, that would be even nicer.</p>\n"},{"tags":[],"owner":{"account_id":615831,"reputation":461,"user_id":348532,"display_name":"Jules Rogerson"},"down_vote_count":0,"up_vote_count":46,"is_accepted":false,"score":46,"last_activity_date":1414994012,"creation_date":1274654466,"answer_id":2893790,"question_id":2689379,"body_markdown":"Get the number of days between dates, inclusive.\r\n\r\n\tpublic static List&lt;Date&gt; getDaysBetweenDates(Date startdate, Date enddate)\r\n\t{\r\n\t    List&lt;Date&gt; dates = new ArrayList&lt;Date&gt;();\r\n\t    Calendar calendar = new GregorianCalendar();\r\n\t    calendar.setTime(startdate);\r\n\r\n\t    while (calendar.getTime().before(enddate))\r\n\t    {\r\n\t        Date result = calendar.getTime();\r\n\t        dates.add(result);\r\n\t        calendar.add(Calendar.DATE, 1);\r\n\t    }\r\n\t    return dates;\r\n\t}\r\n","title":"how to get a list of dates between two dates in java","body":"<p>Get the number of days between dates, inclusive.</p>\n\n<pre><code>public static List&lt;Date&gt; getDaysBetweenDates(Date startdate, Date enddate)\n{\n    List&lt;Date&gt; dates = new ArrayList&lt;Date&gt;();\n    Calendar calendar = new GregorianCalendar();\n    calendar.setTime(startdate);\n\n    while (calendar.getTime().before(enddate))\n    {\n        Date result = calendar.getTime();\n        dates.add(result);\n        calendar.add(Calendar.DATE, 1);\n    }\n    return dates;\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":645075,"reputation":171,"user_id":432197,"display_name":"bidyot"},"down_vote_count":0,"up_vote_count":17,"is_accepted":false,"score":17,"last_activity_date":1326452596,"creation_date":1282846842,"answer_id":3578208,"question_id":2689379,"body_markdown":"please find the below code.\r\n\r\n    List&lt;Date&gt; dates = new ArrayList&lt;Date&gt;();\r\n\t\t\t\r\n    String str_date =&quot;27/08/2010&quot;;\r\n    String end_date =&quot;02/09/2010&quot;;\r\n\t\t\r\n    DateFormat formatter ; \r\n\t\t     \r\n    formatter = new SimpleDateFormat(&quot;dd/MM/yyyy&quot;);\r\n    Date  startDate = (Date)formatter.parse(str_date); \r\n    Date  endDate = (Date)formatter.parse(end_date);\r\n    long interval = 24*1000 * 60 * 60; // 1 hour in millis\r\n    long endTime =endDate.getTime() ; // create your endtime here, possibly using Calendar or Date\r\n    long curTime = startDate.getTime();\r\n    while (curTime &lt;= endTime) {\r\n        dates.add(new Date(curTime));\r\n        curTime += interval;\r\n    }\r\n    for(int i=0;i&lt;dates.size();i++){\r\n        Date lDate =(Date)dates.get(i);\r\n        String ds = formatter.format(lDate);\t\r\n        System.out.println(&quot; Date is ...&quot; + ds);\r\n    }\r\n\r\n\r\noutput:  \r\n&gt; Date is ...27/08/2010  \r\n Date is ...28/08/2010  \r\n Date is ...29/08/2010  \r\n Date is ...30/08/2010  \r\n Date is ...31/08/2010  \r\n Date is ...01/09/2010  \r\n Date is ...02/09/2010  ","title":"how to get a list of dates between two dates in java","body":"<p>please find the below code.</p>\n\n<pre><code>List&lt;Date&gt; dates = new ArrayList&lt;Date&gt;();\n\nString str_date =\"27/08/2010\";\nString end_date =\"02/09/2010\";\n\nDateFormat formatter ; \n\nformatter = new SimpleDateFormat(\"dd/MM/yyyy\");\nDate  startDate = (Date)formatter.parse(str_date); \nDate  endDate = (Date)formatter.parse(end_date);\nlong interval = 24*1000 * 60 * 60; // 1 hour in millis\nlong endTime =endDate.getTime() ; // create your endtime here, possibly using Calendar or Date\nlong curTime = startDate.getTime();\nwhile (curTime &lt;= endTime) {\n    dates.add(new Date(curTime));\n    curTime += interval;\n}\nfor(int i=0;i&lt;dates.size();i++){\n    Date lDate =(Date)dates.get(i);\n    String ds = formatter.format(lDate);    \n    System.out.println(\" Date is ...\" + ds);\n}\n</code></pre>\n\n<p>output:  </p>\n\n<blockquote>\n  <p>Date is ...27/08/2010<br>\n   Date is ...28/08/2010<br>\n   Date is ...29/08/2010<br>\n   Date is ...30/08/2010<br>\n   Date is ...31/08/2010<br>\n   Date is ...01/09/2010<br>\n   Date is ...02/09/2010  </p>\n</blockquote>\n"},{"tags":[],"owner":{"account_id":1466997,"reputation":770,"user_id":1379571,"display_name":"mfruizs"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1404200075,"creation_date":1366283170,"answer_id":16081225,"question_id":2689379,"body_markdown":"With [Joda-Time][1] , maybe it&#39;s better:\r\n\r\n    LocalDate dateStart = new LocalDate(&quot;2012-01-15&quot;);\r\n    LocalDate dateEnd = new LocalDate(&quot;2012-05-23&quot;);\r\n    // day by day:\r\n    while(dateStart.isBefore(dateEnd)){\r\n    \tSystem.out.println(dateStart);\r\n    \tdateStart = dateStart.plusDays(1);\r\n    }\r\n\r\nIt&#39;s my solution.... very easy :)\r\n\r\n\r\n  [1]: http://joda-time.sourceforge.net/","title":"how to get a list of dates between two dates in java","body":"<p>With <a href=\"http://joda-time.sourceforge.net/\" rel=\"nofollow\">Joda-Time</a> , maybe it's better:</p>\n\n<pre><code>LocalDate dateStart = new LocalDate(\"2012-01-15\");\nLocalDate dateEnd = new LocalDate(\"2012-05-23\");\n// day by day:\nwhile(dateStart.isBefore(dateEnd)){\n    System.out.println(dateStart);\n    dateStart = dateStart.plusDays(1);\n}\n</code></pre>\n\n<p>It's my solution.... very easy :)</p>\n"},{"tags":[],"owner":{"account_id":2790887,"reputation":693,"user_id":2401144,"accept_rate":90,"display_name":"Upendra"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1369043760,"creation_date":1369042566,"answer_id":16646552,"question_id":2689379,"body_markdown":"    List&lt;Date&gt; dates = new ArrayList&lt;Date&gt;();\r\n    String str_date = &quot;DD/MM/YYYY&quot;;\r\n    String end_date = &quot;DD/MM/YYYY&quot;;\r\n    DateFormat formatter = new SimpleDateFormat(&quot;dd/MM/yyyy&quot;);\r\n    Date startDate = (Date)formatter.parse(str_date); \r\n    Date endDate = (Date)formatter.parse(end_date);\r\n    long interval = 1000 * 60 * 60; // 1 hour in milliseconds\r\n    long endTime = endDate.getTime() ; // create your endtime here, possibly using Calendar or Date\r\n    long curTime = startDate.getTime();\r\n\r\n    while (curTime &lt;= endTime) {\r\n        dates.add(new Date(curTime));\r\n        curTime += interval;\r\n    }\r\n    for (int i = 0; i &lt; dates.size(); i++){\r\n        Date lDate = (Date)dates.get(i);\r\n        String ds = formatter.format(lDate);    \r\n        System.out.println(&quot;Date is ...&quot; + ds);\r\n        //Write your code for storing dates to list\r\n    }\r\n","title":"how to get a list of dates between two dates in java","body":"<pre><code>List&lt;Date&gt; dates = new ArrayList&lt;Date&gt;();\nString str_date = \"DD/MM/YYYY\";\nString end_date = \"DD/MM/YYYY\";\nDateFormat formatter = new SimpleDateFormat(\"dd/MM/yyyy\");\nDate startDate = (Date)formatter.parse(str_date); \nDate endDate = (Date)formatter.parse(end_date);\nlong interval = 1000 * 60 * 60; // 1 hour in milliseconds\nlong endTime = endDate.getTime() ; // create your endtime here, possibly using Calendar or Date\nlong curTime = startDate.getTime();\n\nwhile (curTime &lt;= endTime) {\n    dates.add(new Date(curTime));\n    curTime += interval;\n}\nfor (int i = 0; i &lt; dates.size(); i++){\n    Date lDate = (Date)dates.get(i);\n    String ds = formatter.format(lDate);    \n    System.out.println(\"Date is ...\" + ds);\n    //Write your code for storing dates to list\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2396003,"reputation":1750,"user_id":2094783,"accept_rate":75,"display_name":"Krzysztof Szewczyk"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1373372557,"creation_date":1373372557,"answer_id":17548042,"question_id":2689379,"body_markdown":"Like as @folone, but correct\r\n\r\n    private static List&lt;Date&gt; getDatesBetween(final Date date1, final Date date2) {\r\n        List&lt;Date&gt; dates = new ArrayList&lt;&gt;();\r\n        Calendar c1 = new GregorianCalendar();\r\n        c1.setTime(date1);\r\n        Calendar c2 = new GregorianCalendar();\r\n        c2.setTime(date2);\r\n        int a = c1.get(Calendar.DATE);\r\n        int b = c2.get(Calendar.DATE);\r\n        while ((c1.get(Calendar.YEAR) != c2.get(Calendar.YEAR)) || (c1.get(Calendar.MONTH) != c2.get(Calendar.MONTH)) || (c1.get(Calendar.DATE) != c2.get(Calendar.DATE))) {\r\n            c1.add(Calendar.DATE, 1);\r\n            dates.add(new Date(c1.getTimeInMillis()));\r\n        }\r\n        return dates;\r\n    }","title":"how to get a list of dates between two dates in java","body":"<p>Like as @folone, but correct</p>\n\n<pre><code>private static List&lt;Date&gt; getDatesBetween(final Date date1, final Date date2) {\n    List&lt;Date&gt; dates = new ArrayList&lt;&gt;();\n    Calendar c1 = new GregorianCalendar();\n    c1.setTime(date1);\n    Calendar c2 = new GregorianCalendar();\n    c2.setTime(date2);\n    int a = c1.get(Calendar.DATE);\n    int b = c2.get(Calendar.DATE);\n    while ((c1.get(Calendar.YEAR) != c2.get(Calendar.YEAR)) || (c1.get(Calendar.MONTH) != c2.get(Calendar.MONTH)) || (c1.get(Calendar.DATE) != c2.get(Calendar.DATE))) {\n        c1.add(Calendar.DATE, 1);\n        dates.add(new Date(c1.getTimeInMillis()));\n    }\n    return dates;\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":483424,"reputation":1865,"user_id":898457,"accept_rate":100,"display_name":"Alex Semeniuk"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1374754347,"creation_date":1374754347,"answer_id":17857698,"question_id":2689379,"body_markdown":"Something like this should definitely work:\r\n\r\n    private List&lt;Date&gt; getListOfDaysBetweenTwoDates(Date startDate, Date endDate) {\r\n        List&lt;Date&gt; result = new ArrayList&lt;Date&gt;();\r\n        Calendar start = Calendar.getInstance();\r\n        start.setTime(startDate);\r\n        Calendar end = Calendar.getInstance();\r\n        end.setTime(endDate);\r\n        end.add(Calendar.DAY_OF_YEAR, 1); //Add 1 day to endDate to make sure endDate is included into the final list\r\n        while (start.before(end)) {\r\n            result.add(start.getTime());\r\n            start.add(Calendar.DAY_OF_YEAR, 1);\r\n        }\r\n        return result;\r\n    }","title":"how to get a list of dates between two dates in java","body":"<p>Something like this should definitely work:</p>\n\n<pre><code>private List&lt;Date&gt; getListOfDaysBetweenTwoDates(Date startDate, Date endDate) {\n    List&lt;Date&gt; result = new ArrayList&lt;Date&gt;();\n    Calendar start = Calendar.getInstance();\n    start.setTime(startDate);\n    Calendar end = Calendar.getInstance();\n    end.setTime(endDate);\n    end.add(Calendar.DAY_OF_YEAR, 1); //Add 1 day to endDate to make sure endDate is included into the final list\n    while (start.before(end)) {\n        result.add(start.getTime());\n        start.add(Calendar.DAY_OF_YEAR, 1);\n    }\n    return result;\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":875673,"reputation":3492,"user_id":925369,"accept_rate":62,"display_name":"Yadu Krishnan"},"down_vote_count":0,"up_vote_count":58,"is_accepted":false,"score":58,"last_activity_date":1440674227,"creation_date":1401365223,"answer_id":23932946,"question_id":2689379,"body_markdown":"# java.time Package\r\n\r\nIf you are using [Java 8](http://en.wikipedia.org/wiki/Java_version_history#Java_SE_8_.28March_18.2C_2014.29), there is a much cleaner approach. The new [java.time package](http://docs.oracle.com/javase/8/docs/api/java/time/package-summary.html) in Java 8 incorporates the features of the [Joda-Time](http://www.joda.org/joda-time/) API.\r\n\r\nYour requirement can be solved using the below code:\r\n\r\n    String s = &quot;2014-05-01&quot;;\r\n    String e = &quot;2014-05-10&quot;;\r\n    LocalDate start = LocalDate.parse(s);\r\n    LocalDate end = LocalDate.parse(e);\r\n    List&lt;LocalDate&gt; totalDates = new ArrayList&lt;&gt;();\r\n    while (!start.isAfter(end)) {\r\n    \ttotalDates.add(start);\r\n    \tstart = start.plusDays(1);\r\n    }\r\n","title":"how to get a list of dates between two dates in java","body":"<h1>java.time Package</h1>\n\n<p>If you are using <a href=\"http://en.wikipedia.org/wiki/Java_version_history#Java_SE_8_.28March_18.2C_2014.29\">Java 8</a>, there is a much cleaner approach. The new <a href=\"http://docs.oracle.com/javase/8/docs/api/java/time/package-summary.html\">java.time package</a> in Java 8 incorporates the features of the <a href=\"http://www.joda.org/joda-time/\">Joda-Time</a> API.</p>\n\n<p>Your requirement can be solved using the below code:</p>\n\n<pre><code>String s = \"2014-05-01\";\nString e = \"2014-05-10\";\nLocalDate start = LocalDate.parse(s);\nLocalDate end = LocalDate.parse(e);\nList&lt;LocalDate&gt; totalDates = new ArrayList&lt;&gt;();\nwhile (!start.isAfter(end)) {\n    totalDates.add(start);\n    start = start.plusDays(1);\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2810135,"reputation":2075,"user_id":2416526,"display_name":"Max"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1403560935,"creation_date":1402437968,"answer_id":24151643,"question_id":2689379,"body_markdown":"With [Lamma](http://lamma.io) it looks like this in Java:\r\n\r\n        for (Date d: Dates.from(2014, 6, 29).to(2014, 7, 1).build()) {\r\n            System.out.println(d);\r\n        }\r\n\r\nand the output is:\r\n\r\n        Date(2014,6,29)\r\n        Date(2014,6,30)\r\n        Date(2014,7,1)\r\n","title":"how to get a list of dates between two dates in java","body":"<p>With <a href=\"http://lamma.io\" rel=\"nofollow\">Lamma</a> it looks like this in Java:</p>\n\n<pre><code>    for (Date d: Dates.from(2014, 6, 29).to(2014, 7, 1).build()) {\n        System.out.println(d);\n    }\n</code></pre>\n\n<p>and the output is:</p>\n\n<pre><code>    Date(2014,6,29)\n    Date(2014,6,30)\n    Date(2014,7,1)\n</code></pre>\n"},{"tags":[],"owner":{"account_id":34247,"reputation":1973,"user_id":96617,"accept_rate":78,"display_name":"Lluis Martinez"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1414159800,"creation_date":1414159800,"answer_id":26549627,"question_id":2689379,"body_markdown":"A tail-recursive version:\r\n\r\n\tpublic static void datesBetweenRecursive(Date startDate, Date endDate, List&lt;Date&gt; dates) {\r\n\t\tif (startDate.before(endDate)) {\r\n\t\t\tdates.add(startDate);\r\n\t\t\tCalendar calendar = Calendar.getInstance();\r\n\t\t\tcalendar.setTime(startDate);\r\n\t\t\tcalendar.add(Calendar.DATE, 1);\r\n\t\t\tdatesBetweenRecursive(calendar.getTime(), endDate, dates);\r\n\t\t}\r\n\t}","title":"how to get a list of dates between two dates in java","body":"<p>A tail-recursive version:</p>\n\n<pre><code>public static void datesBetweenRecursive(Date startDate, Date endDate, List&lt;Date&gt; dates) {\n    if (startDate.before(endDate)) {\n        dates.add(startDate);\n        Calendar calendar = Calendar.getInstance();\n        calendar.setTime(startDate);\n        calendar.add(Calendar.DATE, 1);\n        datesBetweenRecursive(calendar.getTime(), endDate, dates);\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2515875,"reputation":1551,"user_id":2187335,"display_name":"Saurabh Mishra"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1422959050,"creation_date":1422959050,"answer_id":28296545,"question_id":2689379,"body_markdown":"Enhancing one of the above solutions. As adding 1 day to end date sometimes adds an extra day beyond the end date.\r\n\r\n\r\n&lt;pre&gt;\r\n\r\n    public static List&lt;Date&gt; getDaysBetweenDates(Date startdate, Date enddate)\r\n    {\r\n        List&lt;Date&gt; dates = new ArrayList&lt;Date&gt;();\r\n        Calendar startDay = new GregorianCalendar();\r\n        calendar.setTime(startdate);\r\n        Calendar endDay = new GregorianCalendar();\r\n        endDay.setTime(enddate);\r\n        endDay.add(Calendar.DAY_OF_YEAR, 1);\r\n        endDay.set(Calendar.HOUR_OF_DAY, 0);\r\n    \tendDay.set(Calendar.MINUTE, 0);\r\n    \tendDay.set(Calendar.SECOND, 0);\r\n    \tendDay.set(Calendar.MILLISECOND, 0);\r\n    \r\n        while (calendar.getTime().before(endDay.getTime())) {\r\n            Date result = startDay.getTime();\r\n            dates.add(result);\r\n            startDay.add(Calendar.DATE, 1);\r\n        }\r\n        return dates;\r\n    }\r\n\r\n&lt;/pre&gt;","title":"how to get a list of dates between two dates in java","body":"<p>Enhancing one of the above solutions. As adding 1 day to end date sometimes adds an extra day beyond the end date.</p>\n\n<pre>\n\n    public static List getDaysBetweenDates(Date startdate, Date enddate)\n    {\n        List dates = new ArrayList();\n        Calendar startDay = new GregorianCalendar();\n        calendar.setTime(startdate);\n        Calendar endDay = new GregorianCalendar();\n        endDay.setTime(enddate);\n        endDay.add(Calendar.DAY_OF_YEAR, 1);\n        endDay.set(Calendar.HOUR_OF_DAY, 0);\n        endDay.set(Calendar.MINUTE, 0);\n        endDay.set(Calendar.SECOND, 0);\n        endDay.set(Calendar.MILLISECOND, 0);\n\n        while (calendar.getTime().before(endDay.getTime())) {\n            Date result = startDay.getTime();\n            dates.add(result);\n            startDay.add(Calendar.DATE, 1);\n        }\n        return dates;\n    }\n\n</pre>\n"},{"tags":[],"owner":{"account_id":1702196,"reputation":601,"user_id":1561948,"display_name":"ThmHarsh"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1436852993,"creation_date":1436852993,"answer_id":31398582,"question_id":2689379,"body_markdown":"Here is my method for getting dates between two dates, including / w.o. including business days. It also takes source and desired date format as parameter.\r\n\r\n    public static List&lt;String&gt; getAllDatesBetweenTwoDates(String stdate,String enddate,String givenformat,String resultformat,boolean onlybunessdays) throws ParseException{\r\n\t\t\tDateFormat sdf;\r\n\t\t\tDateFormat sdf1;\r\n\t\t\tList&lt;Date&gt; dates = new ArrayList&lt;Date&gt;();\r\n\t\t\tList&lt;String&gt; dateList = new ArrayList&lt;String&gt;();\r\n\t\t\t  SimpleDateFormat checkformat = new SimpleDateFormat(resultformat); \r\n\t\t\t  checkformat.applyPattern(&quot;EEE&quot;);  // to get Day of week\r\n\t\t\ttry{\r\n\t\t\t\tsdf = new SimpleDateFormat(givenformat);\r\n\t\t\t\tsdf1 = new SimpleDateFormat(resultformat);\r\n\t\t\t\tstdate=sdf1.format(sdf.parse(stdate));\r\n\t\t\t\tenddate=sdf1.format(sdf.parse(enddate));\r\n\t\t\t\t\r\n\t\t\t\tDate  startDate = (Date)sdf1.parse( stdate); \r\n\t\t\t\tDate  endDate = (Date)sdf1.parse( enddate);\r\n\t\t\t\tlong interval = 24*1000 * 60 * 60; // 1 hour in millis\r\n\t\t\t\tlong endTime =endDate.getTime() ; // create your endtime here, possibly using Calendar or Date\r\n\t\t\t\tlong curTime = startDate.getTime();\r\n\t\t\t\twhile (curTime &lt;= endTime) {\r\n\t\t\t\t    dates.add(new Date(curTime));\r\n\t\t\t\t    curTime += interval;\r\n\t\t\t\t}\r\n\t\t\t\tfor(int i=0;i&lt;dates.size();i++){\r\n\t\t\t\t    Date lDate =(Date)dates.get(i);\r\n\t\t\t\t    String ds = sdf1.format(lDate);   \r\n\t\t\t\t    if(onlybunessdays){\r\n\t\t\t\t    \tString day= checkformat.format(lDate); \r\n\t\t\t\t    \tif(!day.equalsIgnoreCase(&quot;Sat&quot;) &amp;&amp; !day.equalsIgnoreCase(&quot;Sun&quot;)){\r\n\t\t\t\t    \t\t  dateList.add(ds);\r\n\t\t\t\t    \t}\r\n\t\t\t\t    }else{\r\n\t\t\t\t    \t  dateList.add(ds);\r\n\t\t\t\t    }\r\n\t\t\t\t  \r\n\t\t\t\t    //System.out.println(&quot; Date is ...&quot; + ds);\r\n\t\t\t\t  \r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\t\r\n\t\t\t}catch(ParseException e){\r\n\t\t\t\te.printStackTrace();\r\n\t\t\t\tthrow e;\r\n\t\t\t}finally{\r\n\t\t\t\tsdf=null;\r\n\t\t\t\tsdf1=null;\r\n\t\t\t}\r\n\t\t\treturn dateList;\r\n\t\t}\r\n\r\nAnd the method call would be like :\r\n\r\n    public static void main(String aregs[]) throws Exception {\r\n\t\t\tSystem.out.println(getAllDatesBetweenTwoDates(&quot;2015/09/27&quot;,&quot;2015/10/05&quot;,&quot;yyyy/MM/dd&quot;,&quot;dd-MM-yyyy&quot;,false));\r\n\t\t}\r\n\r\nYou can find the demo code : [Click Here][1]\r\n\r\n\r\n  [1]: http://goo.gl/aTYL8M","title":"how to get a list of dates between two dates in java","body":"<p>Here is my method for getting dates between two dates, including / w.o. including business days. It also takes source and desired date format as parameter.</p>\n\n<pre><code>public static List&lt;String&gt; getAllDatesBetweenTwoDates(String stdate,String enddate,String givenformat,String resultformat,boolean onlybunessdays) throws ParseException{\n        DateFormat sdf;\n        DateFormat sdf1;\n        List&lt;Date&gt; dates = new ArrayList&lt;Date&gt;();\n        List&lt;String&gt; dateList = new ArrayList&lt;String&gt;();\n          SimpleDateFormat checkformat = new SimpleDateFormat(resultformat); \n          checkformat.applyPattern(\"EEE\");  // to get Day of week\n        try{\n            sdf = new SimpleDateFormat(givenformat);\n            sdf1 = new SimpleDateFormat(resultformat);\n            stdate=sdf1.format(sdf.parse(stdate));\n            enddate=sdf1.format(sdf.parse(enddate));\n\n            Date  startDate = (Date)sdf1.parse( stdate); \n            Date  endDate = (Date)sdf1.parse( enddate);\n            long interval = 24*1000 * 60 * 60; // 1 hour in millis\n            long endTime =endDate.getTime() ; // create your endtime here, possibly using Calendar or Date\n            long curTime = startDate.getTime();\n            while (curTime &lt;= endTime) {\n                dates.add(new Date(curTime));\n                curTime += interval;\n            }\n            for(int i=0;i&lt;dates.size();i++){\n                Date lDate =(Date)dates.get(i);\n                String ds = sdf1.format(lDate);   \n                if(onlybunessdays){\n                    String day= checkformat.format(lDate); \n                    if(!day.equalsIgnoreCase(\"Sat\") &amp;&amp; !day.equalsIgnoreCase(\"Sun\")){\n                          dateList.add(ds);\n                    }\n                }else{\n                      dateList.add(ds);\n                }\n\n                //System.out.println(\" Date is ...\" + ds);\n\n            }\n\n\n        }catch(ParseException e){\n            e.printStackTrace();\n            throw e;\n        }finally{\n            sdf=null;\n            sdf1=null;\n        }\n        return dateList;\n    }\n</code></pre>\n\n<p>And the method call would be like :</p>\n\n<pre><code>public static void main(String aregs[]) throws Exception {\n        System.out.println(getAllDatesBetweenTwoDates(\"2015/09/27\",\"2015/10/05\",\"yyyy/MM/dd\",\"dd-MM-yyyy\",false));\n    }\n</code></pre>\n\n<p>You can find the demo code : <a href=\"http://goo.gl/aTYL8M\" rel=\"nofollow\">Click Here</a></p>\n"},{"tags":[],"owner":{"account_id":5041765,"reputation":837,"user_id":4048904,"display_name":"Amit Goldstein"},"down_vote_count":0,"up_vote_count":35,"is_accepted":false,"score":35,"last_activity_date":1556425311,"creation_date":1457529848,"answer_id":35892853,"question_id":2689379,"body_markdown":"# Streams \r\n\r\n*Edit: Joda-Time is now deprecated, changed the answer to use Java 8 instead.*\r\n\r\nHere is the Java 8 way, using streams.\r\n\r\n```\r\nList&lt;LocalDate&gt; daysRange = Stream.iterate(startDate, date -&gt; date.plusDays(1)).limit(numOfDays).collect(Collectors.toList());\r\n```","title":"how to get a list of dates between two dates in java","body":"<h1>Streams</h1>\n\n<p><em>Edit: Joda-Time is now deprecated, changed the answer to use Java 8 instead.</em></p>\n\n<p>Here is the Java 8 way, using streams.</p>\n\n<pre><code>List&lt;LocalDate&gt; daysRange = Stream.iterate(startDate, date -&gt; date.plusDays(1)).limit(numOfDays).collect(Collectors.toList());\n</code></pre>\n"},{"tags":[],"owner":{"account_id":7022638,"reputation":58830,"user_id":5381331,"accept_rate":60,"display_name":"Linh"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1480053508,"creation_date":1480053508,"answer_id":40798605,"question_id":2689379,"body_markdown":"     public static List&lt;Date&gt; getDaysBetweenDates(Date startDate, Date endDate){\r\n            ArrayList&lt;Date&gt; dates = new ArrayList&lt;Date&gt;();\r\n            Calendar cal1 = Calendar.getInstance();\r\n            cal1.setTime(startDate);\r\n    \r\n            Calendar cal2 = Calendar.getInstance();\r\n            cal2.setTime(endDate);\r\n    \r\n            while(cal1.before(cal2) || cal1.equals(cal2))\r\n            {\r\n                dates.add(cal1.getTime());\r\n                cal1.add(Calendar.DATE, 1);\r\n            }\r\n            return dates;\r\n        }","title":"how to get a list of dates between two dates in java","body":"<pre><code> public static List&lt;Date&gt; getDaysBetweenDates(Date startDate, Date endDate){\n        ArrayList&lt;Date&gt; dates = new ArrayList&lt;Date&gt;();\n        Calendar cal1 = Calendar.getInstance();\n        cal1.setTime(startDate);\n\n        Calendar cal2 = Calendar.getInstance();\n        cal2.setTime(endDate);\n\n        while(cal1.before(cal2) || cal1.equals(cal2))\n        {\n            dates.add(cal1.getTime());\n            cal1.add(Calendar.DATE, 1);\n        }\n        return dates;\n    }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2070924,"reputation":4391,"user_id":1845432,"accept_rate":65,"display_name":"Thermech"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1481057773,"creation_date":1481057773,"answer_id":41004733,"question_id":2689379,"body_markdown":"**With java 8**\r\n\r\n    public Stream&lt;LocalDate&gt; getDaysBetween(LocalDate startDate, LocalDate endDate) {\r\n        return IntStream.range(0, (int) DAYS.between(startDate, endDate)).mapToObj(startDate::plusDays);\r\n    }","title":"how to get a list of dates between two dates in java","body":"<p><strong>With java 8</strong></p>\n\n<pre><code>public Stream&lt;LocalDate&gt; getDaysBetween(LocalDate startDate, LocalDate endDate) {\n    return IntStream.range(0, (int) DAYS.between(startDate, endDate)).mapToObj(startDate::plusDays);\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2906108,"reputation":42988,"user_id":2491410,"accept_rate":100,"display_name":"Meno Hochschild"},"down_vote_count":0,"up_vote_count":12,"is_accepted":false,"score":12,"last_activity_date":1525123592,"creation_date":1487592534,"answer_id":42344215,"question_id":2689379,"body_markdown":"Recommending date streams\r\n-------------------------\r\n\r\nIn [Java 9][1], you can use following new method, [`LocalDate::datesUntil`](https://docs.oracle.com/javase/9/docs/api/java/time/LocalDate.html#datesUntil-java.time.LocalDate-):\r\n\r\n    LocalDate start = LocalDate.of(2017, 2, 1);\r\n    LocalDate end = LocalDate.of(2017, 2, 28);\r\n    \r\n    Stream&lt;LocalDate&gt; dates = start.datesUntil(end.plusDays(1));\r\n    List&lt;LocalDate&gt; list = dates.collect(Collectors.toList());\r\n\r\nThe new method `datesUntil(...)` works with an exclusive end date, hence the shown hack to add a day.\r\n\r\nOnce you have obtained a stream you can exploit all the features offered by `java.util.stream`- or `java.util.function`-packages. **Working with streams has become so simple compared with earlier approaches based on customized for- or while-loops.**\r\n\r\n\r\n----------\r\n\r\n\r\nOr if you look for a stream-based solution which operates on inclusive dates by default but can also be configured otherwise then you might find the class [DateInterval][2] in my library [Time4J][3] interesting because it offers a lot of special features around date streams including a performant spliterator which is faster than in Java-9:\r\n\r\n\tPlainDate start = PlainDate.of(2017,  2, 1);\r\n\tPlainDate end = start.with(PlainDate.DAY_OF_MONTH.maximized());\r\n\tStream&lt;PlainDate&gt; stream = DateInterval.streamDaily(start, end);\r\n\r\nOr even simpler in case of full months:\r\n\r\n\tStream&lt;PlainDate&gt; februaryDates = CalendarMonth.of(2017, 2).streamDaily();\r\n\tList&lt;LocalDate&gt; list = \r\n\t    februaryDates.map(PlainDate::toTemporalAccessor).collect(Collectors.toList());\r\n\r\n\r\n  [1]: https://bugs.openjdk.java.net/browse/JDK-8146218\r\n  [2]: http://time4j.net/javadoc-en/net/time4j/range/DateInterval.html\r\n  [3]: https://github.com/MenoData/Time4J","title":"how to get a list of dates between two dates in java","body":"<h2>Recommending date streams</h2>\n\n<p>In <a href=\"https://bugs.openjdk.java.net/browse/JDK-8146218\" rel=\"noreferrer\">Java 9</a>, you can use following new method, <a href=\"https://docs.oracle.com/javase/9/docs/api/java/time/LocalDate.html#datesUntil-java.time.LocalDate-\" rel=\"noreferrer\"><code>LocalDate::datesUntil</code></a>:</p>\n\n<pre><code>LocalDate start = LocalDate.of(2017, 2, 1);\nLocalDate end = LocalDate.of(2017, 2, 28);\n\nStream&lt;LocalDate&gt; dates = start.datesUntil(end.plusDays(1));\nList&lt;LocalDate&gt; list = dates.collect(Collectors.toList());\n</code></pre>\n\n<p>The new method <code>datesUntil(...)</code> works with an exclusive end date, hence the shown hack to add a day.</p>\n\n<p>Once you have obtained a stream you can exploit all the features offered by <code>java.util.stream</code>- or <code>java.util.function</code>-packages. <strong>Working with streams has become so simple compared with earlier approaches based on customized for- or while-loops.</strong></p>\n\n<hr>\n\n<p>Or if you look for a stream-based solution which operates on inclusive dates by default but can also be configured otherwise then you might find the class <a href=\"http://time4j.net/javadoc-en/net/time4j/range/DateInterval.html\" rel=\"noreferrer\">DateInterval</a> in my library <a href=\"https://github.com/MenoData/Time4J\" rel=\"noreferrer\">Time4J</a> interesting because it offers a lot of special features around date streams including a performant spliterator which is faster than in Java-9:</p>\n\n<pre><code>PlainDate start = PlainDate.of(2017,  2, 1);\nPlainDate end = start.with(PlainDate.DAY_OF_MONTH.maximized());\nStream&lt;PlainDate&gt; stream = DateInterval.streamDaily(start, end);\n</code></pre>\n\n<p>Or even simpler in case of full months:</p>\n\n<pre><code>Stream&lt;PlainDate&gt; februaryDates = CalendarMonth.of(2017, 2).streamDaily();\nList&lt;LocalDate&gt; list = \n    februaryDates.map(PlainDate::toTemporalAccessor).collect(Collectors.toList());\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1420256,"reputation":301,"user_id":3196216,"accept_rate":25,"display_name":"Gleidosn"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1487848812,"creation_date":1487848812,"answer_id":42414312,"question_id":2689379,"body_markdown":"    List&lt;LocalDate&gt; totalDates = new ArrayList&lt;&gt;();\r\n\tpopularDatas(startDate, endDate, totalDates);\r\n\tSystem.out.println(totalDates);\r\n\t\r\n\tprivate void popularDatas(LocalDate startDate, LocalDate endDate, List&lt;LocalDate&gt; datas) {\r\n\t\tif (!startDate.plusDays(1).isAfter(endDate)) {\r\n\t\t\tpopularDatas(startDate.plusDays(1), endDate, datas);\r\n\t\t} \r\n\t\tdatas.add(startDate);\r\n\t}\r\n\r\nRecursive solution","title":"how to get a list of dates between two dates in java","body":"<pre><code>List&lt;LocalDate&gt; totalDates = new ArrayList&lt;&gt;();\npopularDatas(startDate, endDate, totalDates);\nSystem.out.println(totalDates);\n\nprivate void popularDatas(LocalDate startDate, LocalDate endDate, List&lt;LocalDate&gt; datas) {\n    if (!startDate.plusDays(1).isAfter(endDate)) {\n        popularDatas(startDate.plusDays(1), endDate, datas);\n    } \n    datas.add(startDate);\n}\n</code></pre>\n\n<p>Recursive solution</p>\n"},{"tags":[],"owner":{"account_id":9225634,"reputation":249,"user_id":6853538,"display_name":"Hardik Dudhaiya"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1500223855,"creation_date":1500223855,"answer_id":45131087,"question_id":2689379,"body_markdown":"This is simple solution for get a list of dates \r\n\r\n    import java.io.*;\r\n    import java.util.*;\r\n    import java.text.SimpleDateFormat;  \r\n    public class DateList\r\n    {\r\n  \r\n  \tpublic static SimpleDateFormat dateFormat = new SimpleDateFormat(&quot;yyyy-MM-dd&quot;);\r\n\t\r\n  \t public static void main (String[] args) throws java.lang.Exception\r\n\t {\r\n\t\t\r\n\t\tDate dt = new Date();\r\n\t\tSystem.out.println(dt);\r\n\t\t\r\n\t\t  \tList&lt;Date&gt; dates = getDates(&quot;2017-01-01&quot;,dateFormat.format(new Date()));\r\n      \t\t//IF you don&#39;t want to reverse then remove Collections.reverse(dates);\r\n      \t\t Collections.reverse(dates);\r\n\t\t  \tSystem.out.println(dates.size());\r\n        for(Date date:dates)\r\n        {\r\n            System.out.println(date);\r\n        }\r\n\t }\r\n\t public static List&lt;Date&gt; getDates(String fromDate, String toDate)\r\n     {\r\n        ArrayList&lt;Date&gt; dates = new ArrayList&lt;Date&gt;();\r\n        \r\n        try {\r\n        \r\n          \tCalendar fromCal = Calendar.getInstance();\r\n        \tfromCal.setTime(dateFormat .parse(fromDate));\r\n    \r\n        \tCalendar toCal = Calendar.getInstance();\r\n        \ttoCal.setTime(dateFormat .parse(toDate));\r\n    \r\n        \twhile(!fromCal.after(toCal))\r\n        \t{\r\n            \tdates.add(fromCal.getTime());\r\n            \tfromCal.add(Calendar.DATE, 1);\r\n        \t}\r\n\r\n        \r\n        } catch (Exception e) {\r\n            System.out.println(e);\r\n        }\r\n        return dates;\r\n     }\r\n    }\r\n","title":"how to get a list of dates between two dates in java","body":"<p>This is simple solution for get a list of dates </p>\n\n<pre><code>import java.io.*;\nimport java.util.*;\nimport java.text.SimpleDateFormat;  \npublic class DateList\n{\n\npublic static SimpleDateFormat dateFormat = new SimpleDateFormat(\"yyyy-MM-dd\");\n\n public static void main (String[] args) throws java.lang.Exception\n {\n\n    Date dt = new Date();\n    System.out.println(dt);\n\n        List&lt;Date&gt; dates = getDates(\"2017-01-01\",dateFormat.format(new Date()));\n        //IF you don't want to reverse then remove Collections.reverse(dates);\n         Collections.reverse(dates);\n        System.out.println(dates.size());\n    for(Date date:dates)\n    {\n        System.out.println(date);\n    }\n }\n public static List&lt;Date&gt; getDates(String fromDate, String toDate)\n {\n    ArrayList&lt;Date&gt; dates = new ArrayList&lt;Date&gt;();\n\n    try {\n\n        Calendar fromCal = Calendar.getInstance();\n        fromCal.setTime(dateFormat .parse(fromDate));\n\n        Calendar toCal = Calendar.getInstance();\n        toCal.setTime(dateFormat .parse(toDate));\n\n        while(!fromCal.after(toCal))\n        {\n            dates.add(fromCal.getTime());\n            fromCal.add(Calendar.DATE, 1);\n        }\n\n\n    } catch (Exception e) {\n        System.out.println(e);\n    }\n    return dates;\n }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2495043,"reputation":260,"user_id":2171724,"display_name":"ankurdayalsingh"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1511268304,"creation_date":1511268304,"answer_id":47413441,"question_id":2689379,"body_markdown":"This will add all dates between two dates and It will add current dates and then new dates will be added based on loop condition.      \r\n   \r\n\r\n    private void onDateSet(){\r\n        Calendar endDate = Calendar.getInstance(),startDate = Calendar.getInstance();\r\n        startDate.set(currentYear,currentMonthOfYear,currentDayOfMonth);\r\n        endDate.set(inputYear,inputMonthOfYear,inputDayOfMonth);\r\n        datesToAdd(startDate,endDate);\r\n        }\r\n        \r\n        //call for get dates list\r\n        private List&lt;Date&gt; datesToAdd(Calendar startDate,Calendar endDate){\r\n                        List&lt;Dates&gt; datesLists = new List&lt;&gt;();\r\n                        while (startDate.get(Calendar.YEAR) != endDate.get(Calendar.YEAR) ||   \r\n                               startDate.get(Calendar.MONTH) != endDate.get(Calendar.MONTH) ||\r\n                               startDate.get(Calendar.DAY_OF_MONTH) != endDate.get(Calendar.DAY_OF_MONTH)) {\r\n                       \r\n                                 datesList.add(new Date(startDate.get(Calendar.YEAR), startDate.get(Calendar.MONTH), startDate.get(Calendar.DATE));\r\n        \r\n                                 startDate.add(Calendar.DATE, 1);//increas dates\r\n                    \r\n                             }\r\n                             return datesList;\r\n                    }","title":"how to get a list of dates between two dates in java","body":"<p>This will add all dates between two dates and It will add current dates and then new dates will be added based on loop condition.      </p>\n\n<pre><code>private void onDateSet(){\n    Calendar endDate = Calendar.getInstance(),startDate = Calendar.getInstance();\n    startDate.set(currentYear,currentMonthOfYear,currentDayOfMonth);\n    endDate.set(inputYear,inputMonthOfYear,inputDayOfMonth);\n    datesToAdd(startDate,endDate);\n    }\n\n    //call for get dates list\n    private List&lt;Date&gt; datesToAdd(Calendar startDate,Calendar endDate){\n                    List&lt;Dates&gt; datesLists = new List&lt;&gt;();\n                    while (startDate.get(Calendar.YEAR) != endDate.get(Calendar.YEAR) ||   \n                           startDate.get(Calendar.MONTH) != endDate.get(Calendar.MONTH) ||\n                           startDate.get(Calendar.DAY_OF_MONTH) != endDate.get(Calendar.DAY_OF_MONTH)) {\n\n                             datesList.add(new Date(startDate.get(Calendar.YEAR), startDate.get(Calendar.MONTH), startDate.get(Calendar.DATE));\n\n                             startDate.add(Calendar.DATE, 1);//increas dates\n\n                         }\n                         return datesList;\n                }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":15215281,"reputation":113,"user_id":10978818,"display_name":"prachi"},"down_vote_count":1,"up_vote_count":3,"is_accepted":false,"score":2,"last_activity_date":1668445722,"creation_date":1568973062,"answer_id":58025958,"question_id":2689379,"body_markdown":"As of Java 9, you can use the [`datesUntil`](https://docs.oracle.com/javase/9/docs/api/java/time/LocalDate.html#datesUntil-java.time.LocalDate-) method on `LocalDate`:\r\n\r\n```lang-java\r\npublic List&lt;LocalDate&gt; getDatesBetween(\r\n  LocalDate startDate, LocalDate endDate) {\r\n  \r\n    return startDate.datesUntil(endDate)\r\n      .collect(Collectors.toList());\r\n}\r\n```\r\n","title":"how to get a list of dates between two dates in java","body":"<p>As of Java 9, you can use the <a href=\"https://docs.oracle.com/javase/9/docs/api/java/time/LocalDate.html#datesUntil-java.time.LocalDate-\" rel=\"nofollow noreferrer\"><code>datesUntil</code></a> method on <code>LocalDate</code>:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public List&lt;LocalDate&gt; getDatesBetween(\n  LocalDate startDate, LocalDate endDate) {\n  \n    return startDate.datesUntil(endDate)\n      .collect(Collectors.toList());\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1119690,"reputation":15788,"user_id":1108305,"accept_rate":47,"display_name":"M. Justin"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1668446374,"creation_date":1668446374,"answer_id":74435505,"question_id":2689379,"body_markdown":"The [`LocalDateRange`](https://www.threeten.org/threeten-extra/apidocs/org.threeten.extra/org/threeten/extra/LocalDateRange.html) class in the [ThreeTen-Extra](https://www.threeten.org/threeten-extra/) library represents a range of dates, and can be used for this purpose:\r\n\r\n```\r\nLocalDateRange.ofClosed(startDate, endDate).stream().toList();\r\n```","title":"how to get a list of dates between two dates in java","body":"<p>The <a href=\"https://www.threeten.org/threeten-extra/apidocs/org.threeten.extra/org/threeten/extra/LocalDateRange.html\" rel=\"nofollow noreferrer\"><code>LocalDateRange</code></a> class in the <a href=\"https://www.threeten.org/threeten-extra/\" rel=\"nofollow noreferrer\">ThreeTen-Extra</a> library represents a range of dates, and can be used for this purpose:</p>\n<pre><code>LocalDateRange.ofClosed(startDate, endDate).stream().toList();\n</code></pre>\n"},{"tags":[],"owner":{"account_id":6965528,"reputation":635,"user_id":5343692,"display_name":"JovanToroman"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1699353465,"creation_date":1699353465,"answer_id":77437511,"question_id":2689379,"body_markdown":"Here&#39;s how to get a list of dates between two dates in **Clojure**:\r\n\r\n    (loop [current-date from-date\r\n                    end-date to-date\r\n                    days []]\r\n               (if (time/before? current-date end-date)\r\n                 (recur (time/plus current-date (time/days 1)) end-date\r\n                   (conj days current-date))\r\n                 days))\r\n","title":"how to get a list of dates between two dates in java","body":"<p>Here's how to get a list of dates between two dates in <strong>Clojure</strong>:</p>\n<pre><code>(loop [current-date from-date\n                end-date to-date\n                days []]\n           (if (time/before? current-date end-date)\n             (recur (time/plus current-date (time/days 1)) end-date\n               (conj days current-date))\n             days))\n</code></pre>\n"}],"owner":{"account_id":108350,"reputation":2495,"user_id":287643,"accept_rate":38,"display_name":"Arivu2020"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":167724,"favorite_count":0,"down_vote_count":0,"up_vote_count":88,"answer_count":24,"score":88,"last_activity_date":1699353465,"creation_date":1271926414,"question_id":2689379,"body_markdown":"I want a list of dates between start date and end date.  \r\n\r\nThe result should be a list of all dates including the start and end date.  ","title":"how to get a list of dates between two dates in java","body":"<p>I want a list of dates between start date and end date.  </p>\n\n<p>The result should be a list of all dates including the start and end date.  </p>\n"},{"tags":["java","spring-boot","resttemplate"],"answers":[{"tags":[],"owner":{"account_id":3776730,"reputation":829,"user_id":3137368,"accept_rate":83,"display_name":"Martijn Jan Jaap de Bruin"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1699353162,"creation_date":1699353162,"answer_id":77437476,"question_id":77417881,"body_markdown":"I don&#39;t know why but removing .setBufferRequestBody(false) fixes the issue.","title":"RestTemplate Bean gives OkHttp3ClientHttpRequestFactory does not support request body buffering in spring boot 3","body":"<p>I don't know why but removing .setBufferRequestBody(false) fixes the issue.</p>\n"}],"owner":{"account_id":3776730,"reputation":829,"user_id":3137368,"accept_rate":83,"display_name":"Martijn Jan Jaap de Bruin"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":30,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":77437476,"answer_count":1,"score":1,"last_activity_date":1699353162,"creation_date":1699025152,"question_id":77417881,"body_markdown":"I am creating this bean:\r\n\r\n    @Bean(&quot;MyRestTemplate&quot;)\r\n    public RestTemplate myRestTemplate(final RestTemplateBuilder restTemplateBuilder) {\r\n        return restTemplateBuilder.setBufferRequestBody(false).build();\r\n    }\r\n\r\nAnd i am getting the error:\r\n\r\n    Error creating bean with name &#39;KSHSignRestTemplate&#39; defined in bla.bla.bla.MyProperties: Failed to instantiate [org.springframework.web.client.RestTemplate]: Factory method &#39;myRestTemplate&#39; threw exception with message: OkHttp3ClientHttpRequestFactory does not support request body buffering\r\n\r\nThis is happening since I migrated spring boot from spring 2.x to 3.1.2. I have done hours of research but I could not find any documentation around this issue. \r\n\r\nI slightly changed the name of the methods and classes so it&#39;s more suitable for the web. ","title":"RestTemplate Bean gives OkHttp3ClientHttpRequestFactory does not support request body buffering in spring boot 3","body":"<p>I am creating this bean:</p>\n<pre><code>@Bean(&quot;MyRestTemplate&quot;)\npublic RestTemplate myRestTemplate(final RestTemplateBuilder restTemplateBuilder) {\n    return restTemplateBuilder.setBufferRequestBody(false).build();\n}\n</code></pre>\n<p>And i am getting the error:</p>\n<pre><code>Error creating bean with name 'KSHSignRestTemplate' defined in bla.bla.bla.MyProperties: Failed to instantiate [org.springframework.web.client.RestTemplate]: Factory method 'myRestTemplate' threw exception with message: OkHttp3ClientHttpRequestFactory does not support request body buffering\n</code></pre>\n<p>This is happening since I migrated spring boot from spring 2.x to 3.1.2. I have done hours of research but I could not find any documentation around this issue.</p>\n<p>I slightly changed the name of the methods and classes so it's more suitable for the web.</p>\n"},{"tags":["java","selenium","selenium-chromedriver","webdriver"],"comments":[{"owner":{"account_id":6077817,"reputation":1213,"user_id":4744568,"display_name":"pcalkins"},"score":1,"creation_date":1670974811,"post_id":74791588,"comment_id":131996191,"body_markdown":"be sure to add all of Selenium&#39;s dependencies.  Sounds like you&#39;re missing those.","body":"be sure to add all of Selenium&#39;s dependencies.  Sounds like you&#39;re missing those."},{"owner":{"account_id":6428583,"reputation":6399,"user_id":4982691,"display_name":"jumping_monkey"},"score":0,"creation_date":1670975760,"post_id":74791588,"comment_id":131996368,"body_markdown":"How are you managing your dependencies?","body":"How are you managing your dependencies?"},{"owner":{"account_id":27245123,"reputation":41,"user_id":20770551,"display_name":"n3cw4rr10r"},"score":0,"creation_date":1670977567,"post_id":74791588,"comment_id":131996643,"body_markdown":"I downloaded the latest from selenium.dev. The version was 4.7.2 I believe. I imported all the files from the folder and the files from the &quot;lib&quot; folder into the modulepath for the package. Is that what you guys mean?","body":"I downloaded the latest from selenium.dev. The version was 4.7.2 I believe. I imported all the files from the folder and the files from the &quot;lib&quot; folder into the modulepath for the package. Is that what you guys mean?"}],"answers":[{"tags":[],"owner":{"account_id":27245123,"reputation":41,"user_id":20770551,"display_name":"n3cw4rr10r"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1670982172,"creation_date":1670981895,"answer_id":74792729,"question_id":74791588,"body_markdown":"I was able to fix the issue by deleting all the selenium jar files from the modulepath and adding them all to the classpath instead. ","title":"Error occurred during initialization of boot layer java.lang.module.FindException: Module processed.commons.exec not found,","body":"<p>I was able to fix the issue by deleting all the selenium jar files from the modulepath and adding them all to the classpath instead.</p>\n"},{"tags":[],"owner":{"account_id":21148318,"reputation":3,"user_id":15549169,"display_name":"Bossman Flag"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1671307093,"creation_date":1671019524,"answer_id":74798043,"question_id":74791588,"body_markdown":"The error for me was with the Java version. While making the project make sure you choose Java 1.8 (or maybe an even lower version). \r\n\r\n\r\nAnd if you are using the selenium zip file to add to the build path,\r\nmake sure you add the lib folder separately. ","title":"Error occurred during initialization of boot layer java.lang.module.FindException: Module processed.commons.exec not found,","body":"<p>The error for me was with the Java version. While making the project make sure you choose Java 1.8 (or maybe an even lower version).</p>\n<p>And if you are using the selenium zip file to add to the build path,\nmake sure you add the lib folder separately.</p>\n"},{"tags":[],"owner":{"account_id":28653666,"reputation":1,"user_id":21940166,"display_name":"Amol AD K"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1684753630,"creation_date":1684753630,"answer_id":76305534,"question_id":74791588,"body_markdown":"I faced such type of issue earlier when i configure selenium webdriver first time with eclipse, that time i update my java version to 17 so because of this such issue comes so, to overcome this i just simply change java version to 8 from project ....its working propely now","title":"Error occurred during initialization of boot layer java.lang.module.FindException: Module processed.commons.exec not found,","body":"<p>I faced such type of issue earlier when i configure selenium webdriver first time with eclipse, that time i update my java version to 17 so because of this such issue comes so, to overcome this i just simply change java version to 8 from project ....its working propely now</p>\n"},{"tags":[],"owner":{"account_id":19465970,"reputation":1,"user_id":14239231,"display_name":"kommuri krishna"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1687937653,"creation_date":1687937653,"answer_id":76570975,"question_id":74791588,"body_markdown":"Just right click on project name, go to build path&gt;configure build path&gt; libraries, remove method libraries and select add and select JRE System libraries.","title":"Error occurred during initialization of boot layer java.lang.module.FindException: Module processed.commons.exec not found,","body":"<p>Just right click on project name, go to build path&gt;configure build path&gt; libraries, remove method libraries and select add and select JRE System libraries.</p>\n"},{"tags":[],"owner":{"account_id":25404557,"reputation":1,"user_id":19213477,"display_name":"dinesh bawane"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1699353042,"creation_date":1699353042,"answer_id":77437462,"question_id":74791588,"body_markdown":"We can fix this by adding jar files under classpath , remove jar files from module path","title":"Error occurred during initialization of boot layer java.lang.module.FindException: Module processed.commons.exec not found,","body":"<p>We can fix this by adding jar files under classpath , remove jar files from module path</p>\n"}],"owner":{"account_id":27245123,"reputation":41,"user_id":20770551,"display_name":"n3cw4rr10r"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":8180,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":5,"score":2,"last_activity_date":1699353042,"creation_date":1670970724,"question_id":74791588,"body_markdown":"```\r\npackage selenium;\r\n\r\nimport org.openqa.selenium.WebDriver;\r\nimport org.openqa.selenium.chrome.ChromeDriver;\r\n\r\npublic class FirstSeleniumProject {\r\n\r\n\tpublic static void main(String[] args) {\r\n\t\t// TODO Auto-generated method stub\r\n\t\t\r\n\t\tSystem.setProperty(&quot;webdriver.chrome.driver&quot;, &quot;C:\\\\Users\\\\amar\\\\Documents\\\\chromedriver\\\\chromedriver.exe&quot;);\r\n\t\tWebDriver chrome = new ChromeDriver();\r\n\t\t\r\n\t\tchrome.get(&quot;https://www.google.com&quot;);\r\n\r\n\t}\r\n\r\n}\r\n```\r\nVery first program and I am getting this error. \r\n\r\nI installed TestNG per some recommendations. When that did not work, I removed the https:// from the link and it gave me the following error:\r\n\r\nError occurred during initialization of boot layer\r\njava.lang.module.FindException: Module processed.async.http.client not found, required by org.seleniumhq.selenium.remote_driver\r\n","title":"Error occurred during initialization of boot layer java.lang.module.FindException: Module processed.commons.exec not found,","body":"<pre><code>package selenium;\n\nimport org.openqa.selenium.WebDriver;\nimport org.openqa.selenium.chrome.ChromeDriver;\n\npublic class FirstSeleniumProject {\n\n    public static void main(String[] args) {\n        // TODO Auto-generated method stub\n        \n        System.setProperty(&quot;webdriver.chrome.driver&quot;, &quot;C:\\\\Users\\\\amar\\\\Documents\\\\chromedriver\\\\chromedriver.exe&quot;);\n        WebDriver chrome = new ChromeDriver();\n        \n        chrome.get(&quot;https://www.google.com&quot;);\n\n    }\n\n}\n</code></pre>\n<p>Very first program and I am getting this error.</p>\n<p>I installed TestNG per some recommendations. When that did not work, I removed the https:// from the link and it gave me the following error:</p>\n<p>Error occurred during initialization of boot layer\njava.lang.module.FindException: Module processed.async.http.client not found, required by org.seleniumhq.selenium.remote_driver</p>\n"},{"tags":["python","java","python-3.x","byte"],"comments":[{"owner":{"account_id":4362282,"reputation":92954,"user_id":3558960,"accept_rate":60,"display_name":"Robby Cornelissen"},"score":4,"creation_date":1699351116,"post_id":77437185,"comment_id":136517700,"body_markdown":"That Java code makes very little sense. It relies on a narrowing primitive conversion to convert ints to bytes. Your actual byte values are 57, 77 and 97.","body":"That Java code makes very little sense. It relies on a narrowing primitive conversion to convert ints to bytes. Your actual byte values are 57, 77 and 97."}],"answers":[{"tags":[],"owner":{"account_id":27793354,"reputation":65,"user_id":21219394,"display_name":"ProgramExpert"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1699351098,"creation_date":1699351098,"answer_id":77437227,"question_id":77437185,"body_markdown":"Because a Byte is 8 bit long, which adds up to a maximum of 256 in decimal. In Java it will take the first Byte of your number and convert it to ascii.","title":"What is the best way to convert an array of bytes Java code to python?","body":"<p>Because a Byte is 8 bit long, which adds up to a maximum of 256 in decimal. In Java it will take the first Byte of your number and convert it to ascii.</p>\n"},{"tags":[],"owner":{"account_id":3741438,"reputation":12025,"user_id":3111149,"accept_rate":87,"display_name":"Matteo NNZ"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1699352969,"creation_date":1699351282,"answer_id":77437246,"question_id":77437185,"body_markdown":"As the error says, you can&#39;t pass values larger than `255` to the `bytes()` function.\r\nHowever, you can pass the `%256` value:\r\n\r\n    byte_values = [23353, 333, 614537057]\r\n    x = &quot;&quot;.join(chr(value % 256) for value in byte_values)\r\n    print(x)\r\n\r\nThe above code prints `9Ma` on my side.\r\n\r\nHowever, I&#39;d suggest you to functionally verify the sense of what your Java code is doing because it is shortcutting the above conversion from `int` to `byte` instead of directly producing the correct bytes.","title":"What is the best way to convert an array of bytes Java code to python?","body":"<p>As the error says, you can't pass values larger than <code>255</code> to the <code>bytes()</code> function.\nHowever, you can pass the <code>%256</code> value:</p>\n<pre><code>byte_values = [23353, 333, 614537057]\nx = &quot;&quot;.join(chr(value % 256) for value in byte_values)\nprint(x)\n</code></pre>\n<p>The above code prints <code>9Ma</code> on my side.</p>\n<p>However, I'd suggest you to functionally verify the sense of what your Java code is doing because it is shortcutting the above conversion from <code>int</code> to <code>byte</code> instead of directly producing the correct bytes.</p>\n"}],"owner":{"account_id":20390295,"reputation":13,"user_id":14958361,"display_name":"john098"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":79,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"accepted_answer_id":77437246,"answer_count":2,"score":-1,"last_activity_date":1699352969,"creation_date":1699350704,"question_id":77437185,"body_markdown":"I have tried several ways to convert this Java instruction to python, but I always get some error or wrong outputs. What is the correct way to do it?\r\n\r\n`String x = new String(new byte[]{(byte) 23353, (byte) 333, (byte) 614537057});`\r\n(x is equal to string &quot;9Ma&quot;)\r\n\r\n\r\n\r\n\r\nI tried `x = bytes([23353, 5682, 10310]).decode(&#39;utf-8&#39;)`\r\nBut the result is: ValueError: byte must be in range(0, 256)\r\n\r\n","title":"What is the best way to convert an array of bytes Java code to python?","body":"<p>I have tried several ways to convert this Java instruction to python, but I always get some error or wrong outputs. What is the correct way to do it?</p>\n<p><code>String x = new String(new byte[]{(byte) 23353, (byte) 333, (byte) 614537057});</code>\n(x is equal to string &quot;9Ma&quot;)</p>\n<p>I tried <code>x = bytes([23353, 5682, 10310]).decode('utf-8')</code>\nBut the result is: ValueError: byte must be in range(0, 256)</p>\n"},{"tags":["java","spring-boot","system-properties"],"answers":[{"tags":[],"owner":{"account_id":1170155,"reputation":20313,"user_id":1433665,"accept_rate":69,"display_name":"TheKojuEffect"},"down_vote_count":0,"up_vote_count":21,"is_accepted":false,"score":21,"last_activity_date":1579281231,"creation_date":1461775116,"answer_id":36895827,"question_id":36895711,"body_markdown":"You may try.\r\n\r\n    @Profile(&quot;production&quot;)\r\n    @Component\r\n    public class ProductionPropertySetter {\r\n    \r\n       @PostConstruct\r\n       public void setProperty() {\r\n          System.setProperty(&quot;http.maxConnections&quot;, &quot;15&quot;);\r\n       }\r\n    \r\n    }","title":"Can I define System Properties within Spring Boot configuration files?","body":"<p>You may try.</p>\n\n<pre><code>@Profile(\"production\")\n@Component\npublic class ProductionPropertySetter {\n\n   @PostConstruct\n   public void setProperty() {\n      System.setProperty(\"http.maxConnections\", \"15\");\n   }\n\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1473276,"reputation":110989,"user_id":1384297,"accept_rate":100,"display_name":"Andy Wilkinson"},"down_vote_count":0,"up_vote_count":15,"is_accepted":true,"score":15,"last_activity_date":1461776784,"creation_date":1461776784,"answer_id":36896400,"question_id":36895711,"body_markdown":"&gt; I suppose I could create a bean that&#39;s @Conditional on the &quot;production&quot; profile that programmatically callsSystem.setProperty based on my application.yml-defined property, but is there a simpler way through configuration files alone?\r\n\r\nI think that&#39;s your best bet here. Spring Boot does that itself in its `LoggingSystem` where various `logging.*` properties are mapped to System properties.\r\n\r\nNote that you&#39;ll probably want to set the system properties as early as possible, probably as soon as the `Environment` is prepared. To do so, you can use an `ApplicationListener` that listens for the `ApplicationEnvironmentPreparedEvent`. Your `ApplicationListener` implementation should be registered via an entry in `spring.factories`.","title":"Can I define System Properties within Spring Boot configuration files?","body":"<blockquote>\n  <p>I suppose I could create a bean that's @Conditional on the \"production\" profile that programmatically callsSystem.setProperty based on my application.yml-defined property, but is there a simpler way through configuration files alone?</p>\n</blockquote>\n\n<p>I think that's your best bet here. Spring Boot does that itself in its <code>LoggingSystem</code> where various <code>logging.*</code> properties are mapped to System properties.</p>\n\n<p>Note that you'll probably want to set the system properties as early as possible, probably as soon as the <code>Environment</code> is prepared. To do so, you can use an <code>ApplicationListener</code> that listens for the <code>ApplicationEnvironmentPreparedEvent</code>. Your <code>ApplicationListener</code> implementation should be registered via an entry in <code>spring.factories</code>.</p>\n"},{"tags":[],"owner":{"account_id":1942318,"reputation":661,"user_id":1898348,"display_name":"jjoller"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1499247412,"creation_date":1499247412,"answer_id":44922427,"question_id":36895711,"body_markdown":"You can inject the environment into the constructor of the class that specifies the beans. This allows you to write application properties to the system properties before the beans are being created.\r\n\r\n   \r\n\r\n    @Configuration\r\n    public class ApplicationBeans {\r\n\r\n       @Autowired\r\n       public ApplicationBeans(Environment environment) {\r\n          // set system properties before the beans are being created.\r\n          String property = &quot;com.application.property&quot;;\r\n          System.getProperties().setProperty(property, environment.getProperty(property));\r\n       }\r\n\r\n       /**\r\n        * Bean that depends on the system properties\r\n        */\r\n       @Bean\r\n       public SomeBean someBean() {\r\n          return new SomeBean();\r\n       }\r\n    }","title":"Can I define System Properties within Spring Boot configuration files?","body":"<p>You can inject the environment into the constructor of the class that specifies the beans. This allows you to write application properties to the system properties before the beans are being created.</p>\n\n<pre><code>@Configuration\npublic class ApplicationBeans {\n\n   @Autowired\n   public ApplicationBeans(Environment environment) {\n      // set system properties before the beans are being created.\n      String property = \"com.application.property\";\n      System.getProperties().setProperty(property, environment.getProperty(property));\n   }\n\n   /**\n    * Bean that depends on the system properties\n    */\n   @Bean\n   public SomeBean someBean() {\n      return new SomeBean();\n   }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":8124818,"reputation":1,"user_id":6120150,"display_name":"RamBharath"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1531222488,"creation_date":1531222488,"answer_id":51264153,"question_id":36895711,"body_markdown":"You can also use PropertyPlaceholderConfigurer from org.springframework.beans.factory.config  to get handle over your properties file","title":"Can I define System Properties within Spring Boot configuration files?","body":"<p>You can also use PropertyPlaceholderConfigurer from org.springframework.beans.factory.config  to get handle over your properties file</p>\n"},{"tags":[],"owner":{"account_id":3755747,"reputation":11,"user_id":3122149,"display_name":"Yash Kolte"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1699352757,"creation_date":1699352757,"answer_id":77437416,"question_id":36895711,"body_markdown":"I encountered a similar challenge and struggled to find a dependable method for externalizing System properties using Spring configuration files. While command-line arguments are an option, I&#39;d prefer to avoid that approach in order to consolidate all configuration settings in one place.\r\n\r\nYou can use the following class in your project:\r\n\r\n    import java.util.Map;\r\n    import java.util.Map.Entry;\r\n    import javax.annotation.PostConstruct;\r\n    import org.slf4j.Logger;\r\n    import org.slf4j.LoggerFactory;\r\n    import org.springframework.boot.context.properties.ConfigurationProperties;\r\n    import org.springframework.context.annotation.Lazy;\r\n    import org.springframework.stereotype.Component;\r\n    \r\n    @Component\r\n    @ConfigurationProperties(\r\n            prefix = &quot;system&quot;)\r\n    @Lazy(\r\n            value = false)\r\n    public class SystemPropertiesInjector {\r\n    \r\n        private static final Logger LOGGER = LoggerFactory.getLogger(SystemPropertiesInjector.class);\r\n    \r\n        Map&lt;String, String&gt; properties;\r\n    \r\n        @PostConstruct\r\n        void init() {\r\n            if (properties != null) {\r\n    \r\n                for (Entry&lt;String, String&gt; property : properties.entrySet()) {\r\n                    LOGGER.info(&quot;Injecting Property with Name: {} and Value: {} into System Properties&quot;,\r\n                            property.getKey(),\r\n                            property.getValue());\r\n                    System.setProperty(property.getKey(), property.getValue());\r\n                }\r\n            }\r\n        }\r\n    \r\n        public Map&lt;String, String&gt; getProperties() {\r\n            return properties;\r\n        }\r\n    \r\n        public void setProperties(Map&lt;String, String&gt; properties) {\r\n            this.properties = properties;\r\n        }\r\n    \r\n    }\r\n\r\n\r\nand in the application.properties:\r\n\r\n    system.properties.propertyName=propertyValue\r\n\r\nThe component reads all properties from the Spring Context with prefix &quot;system.properties&quot; and puts them into the System#setProperty. You could of-course change the prefix as required.","title":"Can I define System Properties within Spring Boot configuration files?","body":"<p>I encountered a similar challenge and struggled to find a dependable method for externalizing System properties using Spring configuration files. While command-line arguments are an option, I'd prefer to avoid that approach in order to consolidate all configuration settings in one place.</p>\n<p>You can use the following class in your project:</p>\n<pre><code>import java.util.Map;\nimport java.util.Map.Entry;\nimport javax.annotation.PostConstruct;\nimport org.slf4j.Logger;\nimport org.slf4j.LoggerFactory;\nimport org.springframework.boot.context.properties.ConfigurationProperties;\nimport org.springframework.context.annotation.Lazy;\nimport org.springframework.stereotype.Component;\n\n@Component\n@ConfigurationProperties(\n        prefix = &quot;system&quot;)\n@Lazy(\n        value = false)\npublic class SystemPropertiesInjector {\n\n    private static final Logger LOGGER = LoggerFactory.getLogger(SystemPropertiesInjector.class);\n\n    Map&lt;String, String&gt; properties;\n\n    @PostConstruct\n    void init() {\n        if (properties != null) {\n\n            for (Entry&lt;String, String&gt; property : properties.entrySet()) {\n                LOGGER.info(&quot;Injecting Property with Name: {} and Value: {} into System Properties&quot;,\n                        property.getKey(),\n                        property.getValue());\n                System.setProperty(property.getKey(), property.getValue());\n            }\n        }\n    }\n\n    public Map&lt;String, String&gt; getProperties() {\n        return properties;\n    }\n\n    public void setProperties(Map&lt;String, String&gt; properties) {\n        this.properties = properties;\n    }\n\n}\n</code></pre>\n<p>and in the application.properties:</p>\n<pre><code>system.properties.propertyName=propertyValue\n</code></pre>\n<p>The component reads all properties from the Spring Context with prefix &quot;system.properties&quot; and puts them into the System#setProperty. You could of-course change the prefix as required.</p>\n"}],"owner":{"account_id":182534,"reputation":5773,"user_id":417302,"accept_rate":64,"display_name":"bdkosher"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":82419,"favorite_count":0,"down_vote_count":0,"up_vote_count":48,"accepted_answer_id":36896400,"answer_count":5,"score":48,"last_activity_date":1699352757,"creation_date":1461774659,"question_id":36895711,"body_markdown":"I have a single `application.yml` configuration file for my Spring Boot app that defines two profiles (as described in the [documentation][1]). \r\n\r\nWhen the production profile is enabled, I would like to set the [`http.maxConnections`][2] system property to a custom value, e.g.\r\n\r\n    spring:\r\n        profiles:\r\n            active: dev\r\n    ---\r\n    spring:\r\n        profiles: dev\r\n    ---\r\n    spring:\r\n        profiles: production\r\n    http:\r\n        maxConnections: 15\r\n\r\nBut this doesn&#39;t actually set the system level property; it appears to just create an application-level property. I&#39;ve verified this through both http://locahost:8080/env and a JMX Console when comparing launching by \r\n\r\n    java -jar -Dspring.profiles.active=production myapp.jar\r\n\r\nversus \r\n\r\n    java -Dhttp.maxConnections=15 myapp.jar\r\n\r\nI suppose I could create a bean that&#39;s `@Conditional` on the &quot;production&quot; profile that programmatically calls`System.setProperty` based on my `application.yml`-defined property, but is there a simpler way through configuration files alone?\r\n\r\n\r\n  [1]: https://docs.spring.io/spring-boot/docs/current/reference/html/howto-properties-and-configuration.html#howto-change-configuration-depending-on-the-environment\r\n  [2]: http://docs.oracle.com/javase/8/docs/api/java/net/doc-files/net-properties.html#MiscHTTP","title":"Can I define System Properties within Spring Boot configuration files?","body":"<p>I have a single <code>application.yml</code> configuration file for my Spring Boot app that defines two profiles (as described in the <a href=\"https://docs.spring.io/spring-boot/docs/current/reference/html/howto-properties-and-configuration.html#howto-change-configuration-depending-on-the-environment\" rel=\"noreferrer\">documentation</a>). </p>\n\n<p>When the production profile is enabled, I would like to set the <a href=\"http://docs.oracle.com/javase/8/docs/api/java/net/doc-files/net-properties.html#MiscHTTP\" rel=\"noreferrer\"><code>http.maxConnections</code></a> system property to a custom value, e.g.</p>\n\n<pre><code>spring:\n    profiles:\n        active: dev\n---\nspring:\n    profiles: dev\n---\nspring:\n    profiles: production\nhttp:\n    maxConnections: 15\n</code></pre>\n\n<p>But this doesn't actually set the system level property; it appears to just create an application-level property. I've verified this through both <a href=\"http://locahost:8080/env\" rel=\"noreferrer\">http://locahost:8080/env</a> and a JMX Console when comparing launching by </p>\n\n<pre><code>java -jar -Dspring.profiles.active=production myapp.jar\n</code></pre>\n\n<p>versus </p>\n\n<pre><code>java -Dhttp.maxConnections=15 myapp.jar\n</code></pre>\n\n<p>I suppose I could create a bean that's <code>@Conditional</code> on the \"production\" profile that programmatically calls<code>System.setProperty</code> based on my <code>application.yml</code>-defined property, but is there a simpler way through configuration files alone?</p>\n"},{"tags":["java","maven","jar","io"],"comments":[{"owner":{"account_id":5998820,"reputation":12631,"user_id":4712734,"display_name":"DuncG"},"score":2,"creation_date":1699356776,"post_id":77437380,"comment_id":136518785,"body_markdown":"That&#39;s a very clear exception - you don&#39;t have a file called `HashSetFile.txt` in the current working directory of your application. You need to work out where it really is, and adjust the current working directory or change the path you read accordingly, or if the file is not changing you could load it from inside the jar with it&#39;s resource path.","body":"That&#39;s a very clear exception - you don&#39;t have a file called <code>HashSetFile.txt</code> in the current working directory of your application. You need to work out where it really is, and adjust the current working directory or change the path you read accordingly, or if the file is not changing you could load it from inside the jar with it&#39;s resource path."}],"owner":{"account_id":29440200,"reputation":21,"user_id":22558406,"display_name":"ZabbixJs"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":29,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1699352614,"creation_date":1699352404,"question_id":77437380,"body_markdown":"I need to create a jar file based on my project which has files to read. But when I run such jar by double click nothing works, but if I run it through command line in java -jar.jar format the following error occurs:\r\n\r\n```\r\njava.nio.file.NoSuchFileException: HashSetFile.txt\r\n        at sun.nio.fs.WindowsException.translateToIOException(Unknown Source)\r\n        at sun.nio.fs.WindowsException.rethrowAsIOException(Unknown Source)\r\n        at sun.nio.fs.WindowsException.rethrowAsIOException(Unknown Source)\r\n        at sun.nio.fs.WindowsFileSystemProvider.newByteChannel(Unknown Source)\r\n        at java.nio.file.Files.newByteChannel(Unknown Source)\r\n        at java.nio.file.Files.newByteChannel(Unknown Source)\r\n        at java.nio.file.spi.FileSystemProvider.newInputStream(Unknown Source)\r\n        at java.nio.file.Files.newInputStream(Unknown Source)\r\n        at myproject.JavaFXBuild.getListFile(JavaFXBuild.java:378)\r\n        at myproject.JavaFXController.initialize(JavaFXController.java:364)\r\n        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n        at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)\r\n        at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)\r\n        at java.lang.reflect.Method.invoke(Unknown Source)\r\n        at sun.reflect.misc.Trampoline.invoke(Unknown Source)\r\n        at sun.reflect.GeneratedMethodAccessor1.invoke(Unknown Source)\r\n        at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)\r\n        at java.lang.reflect.Method.invoke(Unknown Source)\r\n        at sun.reflect.misc.MethodUtil.invoke(Unknown Source)\r\n        at javafx.fxml.FXMLLoader.loadImpl(FXMLLoader.java:2571)\r\n        at javafx.fxml.FXMLLoader.loadImpl(FXMLLoader.java:2446)\r\n        at javafx.fxml.FXMLLoader.load(FXMLLoader.java:2414)\r\n        at com.sun.javafx.application.LauncherImpl.lambda$launchApplication1$8(LauncherImpl.java:863)\r\n        at com.sun.javafx.application.PlatformImpl.lambda$runAndWait$7(PlatformImpl.java:326)\r\n        at com.sun.javafx.application.PlatformImpl.lambda$null$5(PlatformImpl.java:295)\r\n        at java.security.AccessController.doPrivileged(Native Method)\r\n        at com.sun.javafx.application.PlatformImpl.lambda$runLater$6(PlatformImpl.java:294)\r\n        at com.sun.glass.ui.InvokeLaterDispatcher$Future.run(InvokeLaterDispatcher.java:95)\r\n        at com.sun.glass.ui.win.WinApplication._runLoop(Native Method)\r\n        at com.sun.glass.ui.win.WinApplication.lambda$null$4(WinApplication.java:185)\r\n        at java.lang.Thread.run(Unknown Source)\r\n\r\n```\r\n\r\nHere is the build file:\r\n\r\n\r\n```\r\n&lt;build&gt;\r\n &lt;plugins&gt;\r\n  &lt;plugin&gt;\r\n   &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n   &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\r\n   &lt;executions&gt;\r\n     &lt;execution&gt;\r\n      &lt;goals&gt;\r\n       &lt;goal&gt;repackage&lt;/goal&gt;\r\n      &lt;/goals&gt;\r\n      &lt;configuration&gt;\r\n    &lt;classifier&gt;spring-boot&lt;/classifier&gt;\r\n    &lt;mainClass&gt;\r\n     uip.gui.JavaFxRun\r\n    &lt;/mainClass&gt;\r\n      &lt;/configuration&gt;\r\n     &lt;/execution&gt;\r\n   &lt;/executions&gt;\r\n  &lt;/plugin&gt;\r\n &lt;/plugins&gt;\r\n&lt;/build&gt;\r\n```\r\nHere is the code that is complaining about:\r\n\r\n```\r\npublic static void getListFile(String fileName, Set&lt;String&gt; stringSet) {\r\n        try {\r\n            **InputStream inputStream = Files.newInputStream(Paths.get(fileName));**\r\n            BufferedReader bufferedReader = new BufferedReader(new InputStreamReader(inputStream));\r\n            String line = bufferedReader.readLine();\r\n            while (line != null) {\r\n                stringSet.add(line);\r\n                line = bufferedReader.readLine();\r\n            }\r\n        } catch (IOException e) {\r\n            LOGGER.log(Level.WARNING, &quot;ERROR &quot;, e);\r\n        }\r\n    }\r\n```\r\nI need to read data from a file line by line and put it into a HashSet. But when I try to run the JAR file, the following error occurs. In this case, the application starts itself, but the data is not loaded\r\n\r\n","title":"Error running jar file using file with JavaFX","body":"<p>I need to create a jar file based on my project which has files to read. But when I run such jar by double click nothing works, but if I run it through command line in java -jar.jar format the following error occurs:</p>\n<pre><code>java.nio.file.NoSuchFileException: HashSetFile.txt\n        at sun.nio.fs.WindowsException.translateToIOException(Unknown Source)\n        at sun.nio.fs.WindowsException.rethrowAsIOException(Unknown Source)\n        at sun.nio.fs.WindowsException.rethrowAsIOException(Unknown Source)\n        at sun.nio.fs.WindowsFileSystemProvider.newByteChannel(Unknown Source)\n        at java.nio.file.Files.newByteChannel(Unknown Source)\n        at java.nio.file.Files.newByteChannel(Unknown Source)\n        at java.nio.file.spi.FileSystemProvider.newInputStream(Unknown Source)\n        at java.nio.file.Files.newInputStream(Unknown Source)\n        at myproject.JavaFXBuild.getListFile(JavaFXBuild.java:378)\n        at myproject.JavaFXController.initialize(JavaFXController.java:364)\n        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n        at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)\n        at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)\n        at java.lang.reflect.Method.invoke(Unknown Source)\n        at sun.reflect.misc.Trampoline.invoke(Unknown Source)\n        at sun.reflect.GeneratedMethodAccessor1.invoke(Unknown Source)\n        at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)\n        at java.lang.reflect.Method.invoke(Unknown Source)\n        at sun.reflect.misc.MethodUtil.invoke(Unknown Source)\n        at javafx.fxml.FXMLLoader.loadImpl(FXMLLoader.java:2571)\n        at javafx.fxml.FXMLLoader.loadImpl(FXMLLoader.java:2446)\n        at javafx.fxml.FXMLLoader.load(FXMLLoader.java:2414)\n        at com.sun.javafx.application.LauncherImpl.lambda$launchApplication1$8(LauncherImpl.java:863)\n        at com.sun.javafx.application.PlatformImpl.lambda$runAndWait$7(PlatformImpl.java:326)\n        at com.sun.javafx.application.PlatformImpl.lambda$null$5(PlatformImpl.java:295)\n        at java.security.AccessController.doPrivileged(Native Method)\n        at com.sun.javafx.application.PlatformImpl.lambda$runLater$6(PlatformImpl.java:294)\n        at com.sun.glass.ui.InvokeLaterDispatcher$Future.run(InvokeLaterDispatcher.java:95)\n        at com.sun.glass.ui.win.WinApplication._runLoop(Native Method)\n        at com.sun.glass.ui.win.WinApplication.lambda$null$4(WinApplication.java:185)\n        at java.lang.Thread.run(Unknown Source)\n\n</code></pre>\n<p>Here is the build file:</p>\n<pre><code>&lt;build&gt;\n &lt;plugins&gt;\n  &lt;plugin&gt;\n   &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n   &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\n   &lt;executions&gt;\n     &lt;execution&gt;\n      &lt;goals&gt;\n       &lt;goal&gt;repackage&lt;/goal&gt;\n      &lt;/goals&gt;\n      &lt;configuration&gt;\n    &lt;classifier&gt;spring-boot&lt;/classifier&gt;\n    &lt;mainClass&gt;\n     uip.gui.JavaFxRun\n    &lt;/mainClass&gt;\n      &lt;/configuration&gt;\n     &lt;/execution&gt;\n   &lt;/executions&gt;\n  &lt;/plugin&gt;\n &lt;/plugins&gt;\n&lt;/build&gt;\n</code></pre>\n<p>Here is the code that is complaining about:</p>\n<pre><code>public static void getListFile(String fileName, Set&lt;String&gt; stringSet) {\n        try {\n            **InputStream inputStream = Files.newInputStream(Paths.get(fileName));**\n            BufferedReader bufferedReader = new BufferedReader(new InputStreamReader(inputStream));\n            String line = bufferedReader.readLine();\n            while (line != null) {\n                stringSet.add(line);\n                line = bufferedReader.readLine();\n            }\n        } catch (IOException e) {\n            LOGGER.log(Level.WARNING, &quot;ERROR &quot;, e);\n        }\n    }\n</code></pre>\n<p>I need to read data from a file line by line and put it into a HashSet. But when I try to run the JAR file, the following error occurs. In this case, the application starts itself, but the data is not loaded</p>\n"},{"tags":["java","arrays","random","shuffle"],"comments":[{"owner":{"account_id":2398069,"reputation":1051,"user_id":2096485,"accept_rate":71,"display_name":"Louis Hong"},"score":9,"creation_date":1383611316,"post_id":1519736,"comment_id":29400683,"body_markdown":"This is the SDK method you are looking for Collections.shuffle(Arrays.asList(array));","body":"This is the SDK method you are looking for Collections.shuffle(Arrays.asList(array));"},{"owner":{"account_id":218057,"reputation":67728,"user_id":474189,"accept_rate":72,"display_name":"Duncan Jones"},"score":4,"creation_date":1391079145,"post_id":1519736,"comment_id":32375078,"body_markdown":"@Louie No, that doesn&#39;t work. That would create a `List&lt;int[]&gt;` containing one entry. See [my answer](http://stackoverflow.com/a/21454317/474189) for the way to achieve this using `Collections.shuffle()`.","body":"@Louie No, that doesn&#39;t work. That would create a <code>List&lt;int[]&gt;</code> containing one entry. See <a href=\"http://stackoverflow.com/a/21454317/474189\">my answer</a> for the way to achieve this using <code>Collections.shuffle()</code>."},{"owner":{"account_id":113493,"reputation":1363,"user_id":298885,"accept_rate":40,"display_name":"sandris"},"score":2,"creation_date":1414574668,"post_id":1519736,"comment_id":41862530,"body_markdown":"Not really an answer to the original question, but MathArrays.shuffle from the commons-math3 library does the job.","body":"Not really an answer to the original question, but MathArrays.shuffle from the commons-math3 library does the job."},{"owner":{"account_id":678346,"reputation":9220,"user_id":1035897,"accept_rate":65,"display_name":"Mr. Developerdude"},"score":3,"creation_date":1447623306,"post_id":1519736,"comment_id":55220014,"body_markdown":"This is not on-topic enough to warrant an answer, but I remember a really cool article from &quot;Graphics Gems&quot; book that talked about traversing an array in pseudo random order. In my mind that beats having to actually shuffle the data in the first place. The C-implementation is found here https://github.com/erich666/GraphicsGems/blob/master/gems/Dissolve.c","body":"This is not on-topic enough to warrant an answer, but I remember a really cool article from &quot;Graphics Gems&quot; book that talked about traversing an array in pseudo random order. In my mind that beats having to actually shuffle the data in the first place. The C-implementation is found here <a href=\"https://github.com/erich666/GraphicsGems/blob/master/gems/Dissolve.c\" rel=\"nofollow noreferrer\">github.com/erich666/GraphicsGems/blob/master/gems/Dissolve.c</a>"},{"owner":{"account_id":194449,"reputation":7262,"user_id":436794,"display_name":"Pierz"},"score":0,"creation_date":1480668769,"post_id":1519736,"comment_id":69067268,"body_markdown":"Also see this closely related question: http://stackoverflow.com/questions/2450954/how-to-randomize-shuffle-a-javascript-array","body":"Also see this closely related question: <a href=\"http://stackoverflow.com/questions/2450954/how-to-randomize-shuffle-a-javascript-array\" title=\"how to randomize shuffle a javascript array\">stackoverflow.com/questions/2450954/&hellip;</a>"},{"owner":{"account_id":19118721,"reputation":6319,"user_id":13963086,"display_name":"k314159"},"score":0,"creation_date":1655998837,"post_id":1519736,"comment_id":128470279,"body_markdown":"In case anyone who uses Kotlin comes across this question, the Kotlin standard library has `shuffle` methods for all kinds of primitive arrays.","body":"In case anyone who uses Kotlin comes across this question, the Kotlin standard library has <code>shuffle</code> methods for all kinds of primitive arrays."}],"answers":[{"tags":[],"owner":{"account_id":51055,"reputation":6074,"user_id":152449,"accept_rate":67,"display_name":"Dave"},"down_vote_count":2,"up_vote_count":16,"is_accepted":false,"score":14,"last_activity_date":1483578821,"creation_date":1254745107,"answer_id":1519753,"question_id":1519736,"body_markdown":"Look at the [`Collections`][1] class, specifically `shuffle(...)`.\r\n\r\n\r\n  [1]: http://developer.android.com/reference/java/util/Collections.html","title":"Random shuffling of an array","body":"<p>Look at the <a href=\"http://developer.android.com/reference/java/util/Collections.html\" rel=\"nofollow noreferrer\"><code>Collections</code></a> class, specifically <code>shuffle(...)</code>.</p>\n"},{"tags":[],"owner":{"account_id":8537,"reputation":40691,"user_id":15459,"accept_rate":70,"display_name":"PhiLho"},"down_vote_count":12,"up_vote_count":307,"is_accepted":true,"score":295,"last_activity_date":1443771010,"creation_date":1254750827,"answer_id":1520212,"question_id":1519736,"body_markdown":"Using Collections to shuffle an array of primitive types is a bit of an overkill...\r\n\r\nIt is simple enough to implement the function yourself, using for example the [FisherYates shuffle](http://en.wikipedia.org/wiki/Fisher-Yates_shuffle):\r\n\r\n    import java.util.*;\r\n    import java.util.concurrent.ThreadLocalRandom;\r\n    \r\n    class Test\r\n    {\r\n      public static void main(String args[])\r\n      {\r\n        int[] solutionArray = { 1, 2, 3, 4, 5, 6, 16, 15, 14, 13, 12, 11 };\r\n    \r\n        shuffleArray(solutionArray);\r\n        for (int i = 0; i &lt; solutionArray.length; i++)\r\n        {\r\n          System.out.print(solutionArray[i] + &quot; &quot;);\r\n        }\r\n        System.out.println();\r\n      }\r\n    \r\n      // Implementing FisherYates shuffle\r\n      static void shuffleArray(int[] ar)\r\n      {\r\n        // If running on Java 6 or older, use `new Random()` on RHS here\r\n        Random rnd = ThreadLocalRandom.current();\r\n        for (int i = ar.length - 1; i &gt; 0; i--)\r\n        {\r\n          int index = rnd.nextInt(i + 1);\r\n          // Simple swap\r\n          int a = ar[index];\r\n          ar[index] = ar[i];\r\n          ar[i] = a;\r\n        }\r\n      }\r\n    }\r\n\r\n","title":"Random shuffling of an array","body":"<p>Using Collections to shuffle an array of primitive types is a bit of an overkill...</p>\n\n<p>It is simple enough to implement the function yourself, using for example the <a href=\"http://en.wikipedia.org/wiki/Fisher-Yates_shuffle\" rel=\"noreferrer\">FisherYates shuffle</a>:</p>\n\n<pre><code>import java.util.*;\nimport java.util.concurrent.ThreadLocalRandom;\n\nclass Test\n{\n  public static void main(String args[])\n  {\n    int[] solutionArray = { 1, 2, 3, 4, 5, 6, 16, 15, 14, 13, 12, 11 };\n\n    shuffleArray(solutionArray);\n    for (int i = 0; i &lt; solutionArray.length; i++)\n    {\n      System.out.print(solutionArray[i] + \" \");\n    }\n    System.out.println();\n  }\n\n  // Implementing FisherYates shuffle\n  static void shuffleArray(int[] ar)\n  {\n    // If running on Java 6 or older, use `new Random()` on RHS here\n    Random rnd = ThreadLocalRandom.current();\n    for (int i = ar.length - 1; i &gt; 0; i--)\n    {\n      int index = rnd.nextInt(i + 1);\n      // Simple swap\n      int a = ar[index];\n      ar[index] = ar[i];\n      ar[i] = a;\n    }\n  }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":194845,"reputation":6727,"user_id":437414,"accept_rate":71,"display_name":"methodin"},"down_vote_count":8,"up_vote_count":197,"is_accepted":false,"score":189,"last_activity_date":1483578790,"creation_date":1284686598,"answer_id":3732080,"question_id":1519736,"body_markdown":"Here is a simple way using an `ArrayList`:\r\n\r\n    List&lt;Integer&gt; solution = new ArrayList&lt;&gt;();\r\n    for (int i = 1; i &lt;= 6; i++) {\r\n    \tsolution.add(i);\r\n    }\r\n    Collections.shuffle(solution);","title":"Random shuffling of an array","body":"<p>Here is a simple way using an <code>ArrayList</code>:</p>\n\n<pre><code>List&lt;Integer&gt; solution = new ArrayList&lt;&gt;();\nfor (int i = 1; i &lt;= 6; i++) {\n    solution.add(i);\n}\nCollections.shuffle(solution);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2856521,"reputation":7352,"user_id":2452680,"accept_rate":68,"display_name":"Dan Bray"},"down_vote_count":4,"up_vote_count":114,"is_accepted":false,"score":110,"last_activity_date":1478776276,"creation_date":1377578059,"answer_id":18456998,"question_id":1519736,"body_markdown":"Here is a working and efficient FisherYates shuffle array function:\r\n\r\n\r\n    private static void shuffleArray(int[] array)\r\n    {\r\n    \tint index;\r\n    \tRandom random = new Random();\r\n    \tfor (int i = array.length - 1; i &gt; 0; i--)\r\n    \t{\r\n    \t\tindex = random.nextInt(i + 1);\r\n            if (index != i)\r\n            {\r\n    \t\t    array[index] ^= array[i];\r\n    \t\t    array[i] ^= array[index];\r\n    \t\t    array[index] ^= array[i];\r\n            }\r\n    \t}\r\n    }\r\n\r\nor\r\n\r\n    private static void shuffleArray(int[] array)\r\n    {\r\n    \tint index, temp;\r\n    \tRandom random = new Random();\r\n    \tfor (int i = array.length - 1; i &gt; 0; i--)\r\n    \t{\r\n    \t\tindex = random.nextInt(i + 1);\r\n            temp = array[index];\r\n    \t    array[index] = array[i];\r\n    \t    array[i] = temp;\r\n    \t}\r\n    }","title":"Random shuffling of an array","body":"<p>Here is a working and efficient FisherYates shuffle array function:</p>\n\n<pre><code>private static void shuffleArray(int[] array)\n{\n    int index;\n    Random random = new Random();\n    for (int i = array.length - 1; i &gt; 0; i--)\n    {\n        index = random.nextInt(i + 1);\n        if (index != i)\n        {\n            array[index] ^= array[i];\n            array[i] ^= array[index];\n            array[index] ^= array[i];\n        }\n    }\n}\n</code></pre>\n\n<p>or</p>\n\n<pre><code>private static void shuffleArray(int[] array)\n{\n    int index, temp;\n    Random random = new Random();\n    for (int i = array.length - 1; i &gt; 0; i--)\n    {\n        index = random.nextInt(i + 1);\n        temp = array[index];\n        array[index] = array[i];\n        array[i] = temp;\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3102310,"reputation":1505,"user_id":2626112,"display_name":"KitKat"},"down_vote_count":0,"up_vote_count":30,"is_accepted":false,"score":30,"last_activity_date":1528562813,"creation_date":1381574006,"answer_id":19333201,"question_id":1519736,"body_markdown":"[Collections][1] class has an efficient method for shuffling, that can be copied, so as not to depend on it:\r\n\r\n    /**\r\n     * Usage:\r\n     *    int[] array = {1, 2, 3};\r\n     *    Util.shuffle(array);\r\n     */\r\n    public class Util {\r\n\r\n        private static Random random;\r\n        \r\n        /**\r\n         * Code from method java.util.Collections.shuffle();\r\n         */\r\n        public static void shuffle(int[] array) {\r\n            if (random == null) random = new Random();\r\n            int count = array.length;\r\n            for (int i = count; i &gt; 1; i--) {\r\n                swap(array, i - 1, random.nextInt(i));\r\n            }\r\n        }\r\n        \r\n        private static void swap(int[] array, int i, int j) {\r\n            int temp = array[i];\r\n            array[i] = array[j];\r\n            array[j] = temp;\r\n        }\r\n    }\r\n\r\n\r\n  [1]: https://docs.oracle.com/javase/6/docs/api/java/util/Collections.html#shuffle(java.util.List)","title":"Random shuffling of an array","body":"<p><a href=\"https://docs.oracle.com/javase/6/docs/api/java/util/Collections.html#shuffle(java.util.List)\" rel=\"noreferrer\">Collections</a> class has an efficient method for shuffling, that can be copied, so as not to depend on it:</p>\n\n<pre><code>/**\n * Usage:\n *    int[] array = {1, 2, 3};\n *    Util.shuffle(array);\n */\npublic class Util {\n\n    private static Random random;\n\n    /**\n     * Code from method java.util.Collections.shuffle();\n     */\n    public static void shuffle(int[] array) {\n        if (random == null) random = new Random();\n        int count = array.length;\n        for (int i = count; i &gt; 1; i--) {\n            swap(array, i - 1, random.nextInt(i));\n        }\n    }\n\n    private static void swap(int[] array, int i, int j) {\n        int temp = array[i];\n        array[i] = array[j];\n        array[j] = temp;\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3610580,"reputation":811,"user_id":3011623,"display_name":"SalmaanKhan"},"down_vote_count":0,"up_vote_count":9,"is_accepted":false,"score":9,"last_activity_date":1416834764,"creation_date":1384923203,"answer_id":20087644,"question_id":1519736,"body_markdown":"Using `ArrayList&lt;Integer&gt;` can help you solving the problem of shuffling without applying much of logic and consuming less time. Here is what I suggest:\r\n\r\n    ArrayList&lt;Integer&gt; x = new ArrayList&lt;Integer&gt;();\r\n    for(int i=1; i&lt;=add.length(); i++)\r\n    {\r\n        x.add(i);\r\n    }\r\n    Collections.shuffle(x);","title":"Random shuffling of an array","body":"<p>Using <code>ArrayList&lt;Integer&gt;</code> can help you solving the problem of shuffling without applying much of logic and consuming less time. Here is what I suggest:</p>\n\n<pre><code>ArrayList&lt;Integer&gt; x = new ArrayList&lt;Integer&gt;();\nfor(int i=1; i&lt;=add.length(); i++)\n{\n    x.add(i);\n}\nCollections.shuffle(x);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":218057,"reputation":67728,"user_id":474189,"accept_rate":72,"display_name":"Duncan Jones"},"down_vote_count":0,"up_vote_count":11,"is_accepted":false,"score":11,"last_activity_date":1391079006,"creation_date":1391079006,"answer_id":21454317,"question_id":1519736,"body_markdown":"Here is a complete solution using the `Collections.shuffle` approach:\r\n\r\n    public static void shuffleArray(int[] array) {\r\n      List&lt;Integer&gt; list = new ArrayList&lt;&gt;();\r\n      for (int i : array) {\r\n        list.add(i);\r\n      }\r\n      \r\n      Collections.shuffle(list);\r\n      \r\n      for (int i = 0; i &lt; list.size(); i++) {\r\n        array[i] = list.get(i);\r\n      }    \r\n    }\r\n\r\nNote that it suffers due to Java&#39;s inability to smoothly translate between `int[]` and `Integer[]` (and thus `int[]` and `List&lt;Integer&gt;`).","title":"Random shuffling of an array","body":"<p>Here is a complete solution using the <code>Collections.shuffle</code> approach:</p>\n\n<pre><code>public static void shuffleArray(int[] array) {\n  List&lt;Integer&gt; list = new ArrayList&lt;&gt;();\n  for (int i : array) {\n    list.add(i);\n  }\n\n  Collections.shuffle(list);\n\n  for (int i = 0; i &lt; list.size(); i++) {\n    array[i] = list.get(i);\n  }    \n}\n</code></pre>\n\n<p>Note that it suffers due to Java's inability to smoothly translate between <code>int[]</code> and <code>Integer[]</code> (and thus <code>int[]</code> and <code>List&lt;Integer&gt;</code>).</p>\n"},{"tags":[],"owner":{"account_id":1045732,"reputation":11348,"user_id":1050755,"accept_rate":51,"display_name":"user1050755"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1415088336,"creation_date":1415088336,"answer_id":26730292,"question_id":1519736,"body_markdown":"Here is a Generics version for arrays:\r\n\r\n    import java.util.Random;\r\n    \r\n    public class Shuffle&lt;T&gt; {\r\n    \r\n        private final Random rnd;\r\n    \r\n        public Shuffle() {\r\n            rnd = new Random();\r\n        }\r\n    \r\n        /**\r\n         * FisherYates shuffle.\r\n         */\r\n        public void shuffle(T[] ar) {\r\n            for (int i = ar.length - 1; i &gt; 0; i--) {\r\n                int index = rnd.nextInt(i + 1);\r\n                T a = ar[index];\r\n                ar[index] = ar[i];\r\n                ar[i] = a;\r\n            }\r\n        }\r\n    }\r\n\r\nConsidering that ArrayList&lt;T&gt; is basically just an array, it may be advisable to work with an ArrayList instead of the explicit array and use Collections.shuffle(). Performance tests however, do not show any significant difference between the above and Collections.sort():\r\n\r\n    Shuffe&lt;Integer&gt;.shuffle(...) performance: 576084 shuffles per second\r\n    Collections.shuffle(ArrayList&lt;Integer&gt;) performance: 629400 shuffles per second\r\n    MathArrays.shuffle(int[]) performance: 53062 shuffles per second\r\n\r\nThe Apache Commons implementation MathArrays.shuffle is limited to int[] and the performance penalty is likely due to the random number generator being used.","title":"Random shuffling of an array","body":"<p>Here is a Generics version for arrays:</p>\n\n<pre><code>import java.util.Random;\n\npublic class Shuffle&lt;T&gt; {\n\n    private final Random rnd;\n\n    public Shuffle() {\n        rnd = new Random();\n    }\n\n    /**\n     * FisherYates shuffle.\n     */\n    public void shuffle(T[] ar) {\n        for (int i = ar.length - 1; i &gt; 0; i--) {\n            int index = rnd.nextInt(i + 1);\n            T a = ar[index];\n            ar[index] = ar[i];\n            ar[i] = a;\n        }\n    }\n}\n</code></pre>\n\n<p>Considering that ArrayList is basically just an array, it may be advisable to work with an ArrayList instead of the explicit array and use Collections.shuffle(). Performance tests however, do not show any significant difference between the above and Collections.sort():</p>\n\n<pre><code>Shuffe&lt;Integer&gt;.shuffle(...) performance: 576084 shuffles per second\nCollections.shuffle(ArrayList&lt;Integer&gt;) performance: 629400 shuffles per second\nMathArrays.shuffle(int[]) performance: 53062 shuffles per second\n</code></pre>\n\n<p>The Apache Commons implementation MathArrays.shuffle is limited to int[] and the performance penalty is likely due to the random number generator being used.</p>\n"},{"tags":[],"owner":{"account_id":5337534,"reputation":141,"user_id":4255960,"display_name":"Cristiane Dos Santos Costa"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1416070410,"creation_date":1416065721,"answer_id":26947457,"question_id":1519736,"body_markdown":"    Random rnd = new Random();\r\n    for (int i = ar.length - 1; i &gt; 0; i--)\r\n    {\r\n      int index = rnd.nextInt(i + 1);\r\n      // Simple swap\r\n      int a = ar[index];\r\n      ar[index] = ar[i];\r\n      ar[i] = a;\r\n    }\r\n\r\n\r\nBy the way, I&#39;ve noticed that this code returns a `ar.length - 1` number of elements, so if your array has 5 elements, the new shuffled array will have 4 elements. This happens because the for loop says `i&gt;0`. If you change to `i&gt;=0`, you get all elements shuffled.\r\n\r\n","title":"Random shuffling of an array","body":"<pre><code>Random rnd = new Random();\nfor (int i = ar.length - 1; i &gt; 0; i--)\n{\n  int index = rnd.nextInt(i + 1);\n  // Simple swap\n  int a = ar[index];\n  ar[index] = ar[i];\n  ar[i] = a;\n}\n</code></pre>\n\n<p>By the way, I've noticed that this code returns a <code>ar.length - 1</code> number of elements, so if your array has 5 elements, the new shuffled array will have 4 elements. This happens because the for loop says <code>i&gt;0</code>. If you change to <code>i&gt;=0</code>, you get all elements shuffled.</p>\n"},{"tags":[],"owner":{"account_id":1960454,"reputation":44539,"user_id":1762224,"accept_rate":61,"display_name":"Mr. Polywhirl"},"down_vote_count":1,"up_vote_count":13,"is_accepted":false,"score":12,"last_activity_date":1448915985,"creation_date":1448915985,"answer_id":34007580,"question_id":1519736,"body_markdown":"You have a couple options here. A list is a bit different than an array when it comes to shuffling.\r\n\r\nAs you can see below, an array is faster than a list, and a primitive array is faster than an object array.\r\n\r\n### Sample Durations\r\n\r\n    List&lt;Integer&gt; Shuffle: 43133ns\r\n        Integer[] Shuffle: 31884ns\r\n            int[] Shuffle: 25377ns\r\n\r\n---\r\n\r\nBelow, are three different implementations of a shuffle. You should only use Collections.shuffle if you are dealing with a collection. There is no need to wrap your array into a collection just to sort it. The methods below are very simple to implement.\r\n\r\n## ShuffleUtil Class\r\n\r\n    import java.lang.reflect.Array;\r\n    import java.util.*;\r\n    \r\n    public class ShuffleUtil&lt;T&gt; {\r\n    \tprivate static final int[] EMPTY_INT_ARRAY = new int[0];\r\n    \tprivate static final int SHUFFLE_THRESHOLD = 5;\r\n    \r\n    \tprivate static Random rand;\r\n\r\n## Main Method\r\n\r\n    \tpublic static void main(String[] args) {\r\n    \t\tList&lt;Integer&gt; list = null;\r\n    \t\tInteger[] arr = null;\r\n    \t\tint[] iarr = null;\r\n    \r\n    \t\tlong start = 0;\r\n    \t\tint cycles = 1000;\r\n    \t\tint n = 1000;\r\n    \r\n    \t\t// Shuffle List&lt;Integer&gt;\r\n    \t\tstart = System.nanoTime();\r\n    \t\tlist = range(n);\r\n    \t\tfor (int i = 0; i &lt; cycles; i++) {\r\n    \t\t\tShuffleUtil.shuffle(list);\r\n    \t\t}\r\n    \t\tSystem.out.printf(&quot;%22s: %dns%n&quot;, &quot;List&lt;Integer&gt; Shuffle&quot;, (System.nanoTime() - start) / cycles);\r\n    \r\n    \t\t// Shuffle Integer[]\r\n    \t\tstart = System.nanoTime();\r\n    \t\tarr = toArray(list);\r\n    \t\tfor (int i = 0; i &lt; cycles; i++) {\r\n    \t\t\tShuffleUtil.shuffle(arr);\r\n    \t\t}\r\n    \t\tSystem.out.printf(&quot;%22s: %dns%n&quot;, &quot;Integer[] Shuffle&quot;, (System.nanoTime() - start) / cycles);\r\n    \r\n    \t\t// Shuffle int[]\r\n    \t\tstart = System.nanoTime();\r\n    \t\tiarr = toPrimitive(arr);\r\n    \t\tfor (int i = 0; i &lt; cycles; i++) {\r\n    \t\t\tShuffleUtil.shuffle(iarr);\r\n    \t\t}\r\n    \t\tSystem.out.printf(&quot;%22s: %dns%n&quot;, &quot;int[] Shuffle&quot;, (System.nanoTime() - start) / cycles);\r\n    \t}\r\n\r\n## Shuffling a Generic List\r\n\r\n    \t// ================================================================\r\n    \t// Shuffle List&lt;T&gt; (java.lang.Collections)\r\n    \t// ================================================================\r\n    \t@SuppressWarnings(&quot;unchecked&quot;)\r\n    \tpublic static &lt;T&gt; void shuffle(List&lt;T&gt; list) {\r\n    \t\tif (rand == null) {\r\n    \t\t\trand = new Random();\r\n    \t\t}\r\n    \t\tint size = list.size();\r\n    \t\tif (size &lt; SHUFFLE_THRESHOLD || list instanceof RandomAccess) {\r\n    \t\t\tfor (int i = size; i &gt; 1; i--) {\r\n    \t\t\t\tswap(list, i - 1, rand.nextInt(i));\r\n    \t\t\t}\r\n    \t\t} else {\r\n    \t\t\tObject arr[] = list.toArray();\r\n    \r\n    \t\t\tfor (int i = size; i &gt; 1; i--) {\r\n    \t\t\t\tswap(arr, i - 1, rand.nextInt(i));\r\n    \t\t\t}\r\n    \r\n    \t\t\tListIterator&lt;T&gt; it = list.listIterator();\r\n    \t\t\tint i = 0;\r\n    \r\n    \t\t\twhile (it.hasNext()) {\r\n    \t\t\t\tit.next();\r\n    \t\t\t\tit.set((T) arr[i++]);\r\n    \t\t\t}\r\n    \t\t}\r\n    \t}\r\n    \r\n    \tpublic static &lt;T&gt; void swap(List&lt;T&gt; list, int i, int j) {\r\n    \t\tfinal List&lt;T&gt; l = list;\r\n    \t\tl.set(i, l.set(j, l.get(i)));\r\n    \t}\r\n    \r\n    \tpublic static &lt;T&gt; List&lt;T&gt; shuffled(List&lt;T&gt; list) {\r\n    \t\tList&lt;T&gt; copy = copyList(list);\r\n    \t\tshuffle(copy);\r\n    \t\treturn copy;\r\n    \t}\r\n\r\n## Shuffling a Generic Array\r\n\r\n    \t// ================================================================\r\n    \t// Shuffle T[]\r\n    \t// ================================================================\r\n    \tpublic static &lt;T&gt; void shuffle(T[] arr) {\r\n    \t\tif (rand == null) {\r\n    \t\t\trand = new Random();\r\n    \t\t}\r\n    \r\n    \t\tfor (int i = arr.length - 1; i &gt; 0; i--) {\r\n    \t\t\tswap(arr, i, rand.nextInt(i + 1));\r\n    \t\t}\r\n    \t}\r\n    \r\n    \tpublic static &lt;T&gt; void swap(T[] arr, int i, int j) {\r\n    \t\tT tmp = arr[i];\r\n    \t\tarr[i] = arr[j];\r\n    \t\tarr[j] = tmp;\r\n    \t}\r\n    \r\n    \tpublic static &lt;T&gt; T[] shuffled(T[] arr) {\r\n    \t\tT[] copy = Arrays.copyOf(arr, arr.length);\r\n    \t\tshuffle(copy);\r\n    \t\treturn copy;\r\n    \t}\r\n    \r\n## Shuffling a Primitive Array\r\n\r\n    \t// ================================================================\r\n    \t// Shuffle int[]\r\n    \t// ================================================================\r\n    \tpublic static &lt;T&gt; void shuffle(int[] arr) {\r\n    \t\tif (rand == null) {\r\n    \t\t\trand = new Random();\r\n    \t\t}\r\n    \r\n    \t\tfor (int i = arr.length - 1; i &gt; 0; i--) {\r\n    \t\t\tswap(arr, i, rand.nextInt(i + 1));\r\n    \t\t}\r\n    \t}\r\n    \r\n    \tpublic static &lt;T&gt; void swap(int[] arr, int i, int j) {\r\n    \t\tint tmp = arr[i];\r\n    \t\tarr[i] = arr[j];\r\n    \t\tarr[j] = tmp;\r\n    \t}\r\n    \r\n    \tpublic static int[] shuffled(int[] arr) {\r\n    \t\tint[] copy = Arrays.copyOf(arr, arr.length);\r\n    \t\tshuffle(copy);\r\n    \t\treturn copy;\r\n    \t}\r\n\r\n## Utility Methods\r\n\r\nSimple utility methods to copy and convert arrays to lists and vice-versa.\r\n\r\n    \t// ================================================================\r\n    \t// Utility methods\r\n    \t// ================================================================\r\n    \tprotected static &lt;T&gt; List&lt;T&gt; copyList(List&lt;T&gt; list) {\r\n    \t\tList&lt;T&gt; copy = new ArrayList&lt;T&gt;(list.size());\r\n    \t\tfor (T item : list) {\r\n    \t\t\tcopy.add(item);\r\n    \t\t}\r\n    \t\treturn copy;\r\n    \t}\r\n    \r\n    \tprotected static int[] toPrimitive(Integer[] array) {\r\n    \t\tif (array == null) {\r\n    \t\t\treturn null;\r\n    \t\t} else if (array.length == 0) {\r\n    \t\t\treturn EMPTY_INT_ARRAY;\r\n    \t\t}\r\n    \t\tfinal int[] result = new int[array.length];\r\n    \t\tfor (int i = 0; i &lt; array.length; i++) {\r\n    \t\t\tresult[i] = array[i].intValue();\r\n    \t\t}\r\n    \t\treturn result;\r\n    \t}\r\n    \r\n    \tprotected static Integer[] toArray(List&lt;Integer&gt; list) {\r\n    \t\treturn toArray(list, Integer.class);\r\n    \t}\r\n    \r\n    \tprotected static &lt;T&gt; T[] toArray(List&lt;T&gt; list, Class&lt;T&gt; clazz) {\r\n    \t\t@SuppressWarnings(&quot;unchecked&quot;)\r\n    \t\tfinal T[] arr = list.toArray((T[]) Array.newInstance(clazz, list.size()));\r\n    \t\treturn arr;\r\n    \t}\r\n\r\n## Range Class\r\n\r\nGenerates a range of values, similar to Python&#39;s `range` function.\r\n\r\n    \t// ================================================================\r\n    \t// Range class for generating a range of values.\r\n    \t// ================================================================\r\n    \tprotected static List&lt;Integer&gt; range(int n) {\r\n    \t\treturn toList(new Range(n), new ArrayList&lt;Integer&gt;());\r\n    \t}\r\n    \r\n    \tprotected static &lt;T&gt; List&lt;T&gt; toList(Iterable&lt;T&gt; iterable) {\r\n    \t\treturn toList(iterable, new ArrayList&lt;T&gt;());\r\n    \t}\r\n    \r\n    \tprotected static &lt;T&gt; List&lt;T&gt; toList(Iterable&lt;T&gt; iterable, List&lt;T&gt; destination) {\r\n    \t\taddAll(destination, iterable.iterator());\r\n    \r\n    \t\treturn destination;\r\n    \t}\r\n    \r\n    \tprotected static &lt;T&gt; void addAll(Collection&lt;T&gt; collection, Iterator&lt;T&gt; iterator) {\r\n    \t\twhile (iterator.hasNext()) {\r\n    \t\t\tcollection.add(iterator.next());\r\n    \t\t}\r\n    \t}\r\n    \r\n    \tprivate static class Range implements Iterable&lt;Integer&gt; {\r\n    \t\tprivate int start;\r\n    \t\tprivate int stop;\r\n    \t\tprivate int step;\r\n    \r\n    \t\tprivate Range(int n) {\r\n    \t\t\tthis(0, n, 1);\r\n    \t\t}\r\n    \r\n    \t\tprivate Range(int start, int stop) {\r\n    \t\t\tthis(start, stop, 1);\r\n    \t\t}\r\n    \r\n    \t\tprivate Range(int start, int stop, int step) {\r\n    \t\t\tthis.start = start;\r\n    \t\t\tthis.stop = stop;\r\n    \t\t\tthis.step = step;\r\n    \t\t}\r\n    \r\n    \t\t@Override\r\n    \t\tpublic Iterator&lt;Integer&gt; iterator() {\r\n    \t\t\tfinal int min = start;\r\n    \t\t\tfinal int max = stop / step;\r\n    \r\n    \t\t\treturn new Iterator&lt;Integer&gt;() {\r\n    \t\t\t\tprivate int current = min;\r\n    \r\n    \t\t\t\t@Override\r\n    \t\t\t\tpublic boolean hasNext() {\r\n    \t\t\t\t\treturn current &lt; max;\r\n    \t\t\t\t}\r\n    \r\n    \t\t\t\t@Override\r\n    \t\t\t\tpublic Integer next() {\r\n    \t\t\t\t\tif (hasNext()) {\r\n    \t\t\t\t\t\treturn current++ * step;\r\n    \t\t\t\t\t} else {\r\n    \t\t\t\t\t\tthrow new NoSuchElementException(&quot;Range reached the end&quot;);\r\n    \t\t\t\t\t}\r\n    \t\t\t\t}\r\n    \r\n    \t\t\t\t@Override\r\n    \t\t\t\tpublic void remove() {\r\n    \t\t\t\t\tthrow new UnsupportedOperationException(&quot;Can&#39;t remove values from a Range&quot;);\r\n    \t\t\t\t}\r\n    \t\t\t};\r\n    \t\t}\r\n    \t}\r\n    }","title":"Random shuffling of an array","body":"<p>You have a couple options here. A list is a bit different than an array when it comes to shuffling.</p>\n\n<p>As you can see below, an array is faster than a list, and a primitive array is faster than an object array.</p>\n\n<h3>Sample Durations</h3>\n\n<pre><code>List&lt;Integer&gt; Shuffle: 43133ns\n    Integer[] Shuffle: 31884ns\n        int[] Shuffle: 25377ns\n</code></pre>\n\n<hr>\n\n<p>Below, are three different implementations of a shuffle. You should only use Collections.shuffle if you are dealing with a collection. There is no need to wrap your array into a collection just to sort it. The methods below are very simple to implement.</p>\n\n<h2>ShuffleUtil Class</h2>\n\n<pre><code>import java.lang.reflect.Array;\nimport java.util.*;\n\npublic class ShuffleUtil&lt;T&gt; {\n    private static final int[] EMPTY_INT_ARRAY = new int[0];\n    private static final int SHUFFLE_THRESHOLD = 5;\n\n    private static Random rand;\n</code></pre>\n\n<h2>Main Method</h2>\n\n<pre><code>    public static void main(String[] args) {\n        List&lt;Integer&gt; list = null;\n        Integer[] arr = null;\n        int[] iarr = null;\n\n        long start = 0;\n        int cycles = 1000;\n        int n = 1000;\n\n        // Shuffle List&lt;Integer&gt;\n        start = System.nanoTime();\n        list = range(n);\n        for (int i = 0; i &lt; cycles; i++) {\n            ShuffleUtil.shuffle(list);\n        }\n        System.out.printf(\"%22s: %dns%n\", \"List&lt;Integer&gt; Shuffle\", (System.nanoTime() - start) / cycles);\n\n        // Shuffle Integer[]\n        start = System.nanoTime();\n        arr = toArray(list);\n        for (int i = 0; i &lt; cycles; i++) {\n            ShuffleUtil.shuffle(arr);\n        }\n        System.out.printf(\"%22s: %dns%n\", \"Integer[] Shuffle\", (System.nanoTime() - start) / cycles);\n\n        // Shuffle int[]\n        start = System.nanoTime();\n        iarr = toPrimitive(arr);\n        for (int i = 0; i &lt; cycles; i++) {\n            ShuffleUtil.shuffle(iarr);\n        }\n        System.out.printf(\"%22s: %dns%n\", \"int[] Shuffle\", (System.nanoTime() - start) / cycles);\n    }\n</code></pre>\n\n<h2>Shuffling a Generic List</h2>\n\n<pre><code>    // ================================================================\n    // Shuffle List&lt;T&gt; (java.lang.Collections)\n    // ================================================================\n    @SuppressWarnings(\"unchecked\")\n    public static &lt;T&gt; void shuffle(List&lt;T&gt; list) {\n        if (rand == null) {\n            rand = new Random();\n        }\n        int size = list.size();\n        if (size &lt; SHUFFLE_THRESHOLD || list instanceof RandomAccess) {\n            for (int i = size; i &gt; 1; i--) {\n                swap(list, i - 1, rand.nextInt(i));\n            }\n        } else {\n            Object arr[] = list.toArray();\n\n            for (int i = size; i &gt; 1; i--) {\n                swap(arr, i - 1, rand.nextInt(i));\n            }\n\n            ListIterator&lt;T&gt; it = list.listIterator();\n            int i = 0;\n\n            while (it.hasNext()) {\n                it.next();\n                it.set((T) arr[i++]);\n            }\n        }\n    }\n\n    public static &lt;T&gt; void swap(List&lt;T&gt; list, int i, int j) {\n        final List&lt;T&gt; l = list;\n        l.set(i, l.set(j, l.get(i)));\n    }\n\n    public static &lt;T&gt; List&lt;T&gt; shuffled(List&lt;T&gt; list) {\n        List&lt;T&gt; copy = copyList(list);\n        shuffle(copy);\n        return copy;\n    }\n</code></pre>\n\n<h2>Shuffling a Generic Array</h2>\n\n<pre><code>    // ================================================================\n    // Shuffle T[]\n    // ================================================================\n    public static &lt;T&gt; void shuffle(T[] arr) {\n        if (rand == null) {\n            rand = new Random();\n        }\n\n        for (int i = arr.length - 1; i &gt; 0; i--) {\n            swap(arr, i, rand.nextInt(i + 1));\n        }\n    }\n\n    public static &lt;T&gt; void swap(T[] arr, int i, int j) {\n        T tmp = arr[i];\n        arr[i] = arr[j];\n        arr[j] = tmp;\n    }\n\n    public static &lt;T&gt; T[] shuffled(T[] arr) {\n        T[] copy = Arrays.copyOf(arr, arr.length);\n        shuffle(copy);\n        return copy;\n    }\n</code></pre>\n\n<h2>Shuffling a Primitive Array</h2>\n\n<pre><code>    // ================================================================\n    // Shuffle int[]\n    // ================================================================\n    public static &lt;T&gt; void shuffle(int[] arr) {\n        if (rand == null) {\n            rand = new Random();\n        }\n\n        for (int i = arr.length - 1; i &gt; 0; i--) {\n            swap(arr, i, rand.nextInt(i + 1));\n        }\n    }\n\n    public static &lt;T&gt; void swap(int[] arr, int i, int j) {\n        int tmp = arr[i];\n        arr[i] = arr[j];\n        arr[j] = tmp;\n    }\n\n    public static int[] shuffled(int[] arr) {\n        int[] copy = Arrays.copyOf(arr, arr.length);\n        shuffle(copy);\n        return copy;\n    }\n</code></pre>\n\n<h2>Utility Methods</h2>\n\n<p>Simple utility methods to copy and convert arrays to lists and vice-versa.</p>\n\n<pre><code>    // ================================================================\n    // Utility methods\n    // ================================================================\n    protected static &lt;T&gt; List&lt;T&gt; copyList(List&lt;T&gt; list) {\n        List&lt;T&gt; copy = new ArrayList&lt;T&gt;(list.size());\n        for (T item : list) {\n            copy.add(item);\n        }\n        return copy;\n    }\n\n    protected static int[] toPrimitive(Integer[] array) {\n        if (array == null) {\n            return null;\n        } else if (array.length == 0) {\n            return EMPTY_INT_ARRAY;\n        }\n        final int[] result = new int[array.length];\n        for (int i = 0; i &lt; array.length; i++) {\n            result[i] = array[i].intValue();\n        }\n        return result;\n    }\n\n    protected static Integer[] toArray(List&lt;Integer&gt; list) {\n        return toArray(list, Integer.class);\n    }\n\n    protected static &lt;T&gt; T[] toArray(List&lt;T&gt; list, Class&lt;T&gt; clazz) {\n        @SuppressWarnings(\"unchecked\")\n        final T[] arr = list.toArray((T[]) Array.newInstance(clazz, list.size()));\n        return arr;\n    }\n</code></pre>\n\n<h2>Range Class</h2>\n\n<p>Generates a range of values, similar to Python's <code>range</code> function.</p>\n\n<pre><code>    // ================================================================\n    // Range class for generating a range of values.\n    // ================================================================\n    protected static List&lt;Integer&gt; range(int n) {\n        return toList(new Range(n), new ArrayList&lt;Integer&gt;());\n    }\n\n    protected static &lt;T&gt; List&lt;T&gt; toList(Iterable&lt;T&gt; iterable) {\n        return toList(iterable, new ArrayList&lt;T&gt;());\n    }\n\n    protected static &lt;T&gt; List&lt;T&gt; toList(Iterable&lt;T&gt; iterable, List&lt;T&gt; destination) {\n        addAll(destination, iterable.iterator());\n\n        return destination;\n    }\n\n    protected static &lt;T&gt; void addAll(Collection&lt;T&gt; collection, Iterator&lt;T&gt; iterator) {\n        while (iterator.hasNext()) {\n            collection.add(iterator.next());\n        }\n    }\n\n    private static class Range implements Iterable&lt;Integer&gt; {\n        private int start;\n        private int stop;\n        private int step;\n\n        private Range(int n) {\n            this(0, n, 1);\n        }\n\n        private Range(int start, int stop) {\n            this(start, stop, 1);\n        }\n\n        private Range(int start, int stop, int step) {\n            this.start = start;\n            this.stop = stop;\n            this.step = step;\n        }\n\n        @Override\n        public Iterator&lt;Integer&gt; iterator() {\n            final int min = start;\n            final int max = stop / step;\n\n            return new Iterator&lt;Integer&gt;() {\n                private int current = min;\n\n                @Override\n                public boolean hasNext() {\n                    return current &lt; max;\n                }\n\n                @Override\n                public Integer next() {\n                    if (hasNext()) {\n                        return current++ * step;\n                    } else {\n                        throw new NoSuchElementException(\"Range reached the end\");\n                    }\n                }\n\n                @Override\n                public void remove() {\n                    throw new UnsupportedOperationException(\"Can't remove values from a Range\");\n                }\n            };\n        }\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":8205386,"reputation":181,"user_id":6175285,"accept_rate":71,"display_name":" "},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1461496346,"creation_date":1461486134,"answer_id":36820835,"question_id":1519736,"body_markdown":"You can use java 8 now:\r\n\r\n    Collections.addAll(list, arr);\r\n    Collections.shuffle(list);\r\n    cardsList.toArray(arr);\r\n  ","title":"Random shuffling of an array","body":"<p>You can use java 8 now:</p>\n\n<pre><code>Collections.addAll(list, arr);\nCollections.shuffle(list);\ncardsList.toArray(arr);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1267837,"reputation":9823,"user_id":1224741,"accept_rate":91,"display_name":"QED"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1464730019,"creation_date":1464729082,"answer_id":37555684,"question_id":1519736,"body_markdown":"I&#39;m weighing in on this very popular question because nobody has written a shuffle-copy version. Style is borrowed heavily from `Arrays.java`, because who *isn&#39;t* pillaging Java technology these days? Generic and `int` implementations included.\r\n\r\n\r\n       /**\r\n        * Shuffles elements from {@code original} into a newly created array.\r\n        *\r\n        * @param original the original array\r\n        * @return the new, shuffled array\r\n        * @throws NullPointerException if {@code original == null}\r\n        */\r\n       @SuppressWarnings(&quot;unchecked&quot;)\r\n       public static &lt;T&gt; T[] shuffledCopy(T[] original) {\r\n          int originalLength = original.length; // For exception priority compatibility.\r\n          Random random = new Random();\r\n          T[] result = (T[]) Array.newInstance(original.getClass().getComponentType(), originalLength);\r\n    \r\n          for (int i = 0; i &lt; originalLength; i++) {\r\n             int j = random.nextInt(i+1);\r\n             result[i] = result[j];\r\n             result[j] = original[i];\r\n          }\r\n    \r\n          return result;\r\n       }\r\n\r\n\r\n       /**\r\n        * Shuffles elements from {@code original} into a newly created array.\r\n        *\r\n        * @param original the original array\r\n        * @return the new, shuffled array\r\n        * @throws NullPointerException if {@code original == null}\r\n        */\r\n       public static int[] shuffledCopy(int[] original) {\r\n          int originalLength = original.length;\r\n          Random random = new Random();\r\n          int[] result = new int[originalLength];\r\n    \r\n          for (int i = 0; i &lt; originalLength; i++) {\r\n             int j = random.nextInt(i+1);\r\n             result[i] = result[j];\r\n             result[j] = original[i];\r\n          }\r\n    \r\n          return result;\r\n       }\r\n\r\n","title":"Random shuffling of an array","body":"<p>I'm weighing in on this very popular question because nobody has written a shuffle-copy version. Style is borrowed heavily from <code>Arrays.java</code>, because who <em>isn't</em> pillaging Java technology these days? Generic and <code>int</code> implementations included.</p>\n\n<pre><code>   /**\n    * Shuffles elements from {@code original} into a newly created array.\n    *\n    * @param original the original array\n    * @return the new, shuffled array\n    * @throws NullPointerException if {@code original == null}\n    */\n   @SuppressWarnings(\"unchecked\")\n   public static &lt;T&gt; T[] shuffledCopy(T[] original) {\n      int originalLength = original.length; // For exception priority compatibility.\n      Random random = new Random();\n      T[] result = (T[]) Array.newInstance(original.getClass().getComponentType(), originalLength);\n\n      for (int i = 0; i &lt; originalLength; i++) {\n         int j = random.nextInt(i+1);\n         result[i] = result[j];\n         result[j] = original[i];\n      }\n\n      return result;\n   }\n\n\n   /**\n    * Shuffles elements from {@code original} into a newly created array.\n    *\n    * @param original the original array\n    * @return the new, shuffled array\n    * @throws NullPointerException if {@code original == null}\n    */\n   public static int[] shuffledCopy(int[] original) {\n      int originalLength = original.length;\n      Random random = new Random();\n      int[] result = new int[originalLength];\n\n      for (int i = 0; i &lt; originalLength; i++) {\n         int j = random.nextInt(i+1);\n         result[i] = result[j];\n         result[j] = original[i];\n      }\n\n      return result;\n   }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":7049432,"reputation":145,"user_id":5399102,"display_name":"Rajib Biswas"},"down_vote_count":1,"up_vote_count":10,"is_accepted":false,"score":9,"last_activity_date":1470118599,"creation_date":1470118326,"answer_id":38712950,"question_id":1519736,"body_markdown":"The following code will achieve a random ordering on the array. \r\n\r\n    // Shuffle the elements in the array\r\n    Collections.shuffle(Arrays.asList(array));\r\n\r\n\r\nfrom: [http://www.programcreek.com/2012/02/java-method-to-shuffle-an-int-array-with-random-order/][1]\r\n\r\n\r\n  [1]: http://www.programcreek.com/2012/02/java-method-to-shuffle-an-int-array-with-random-order/","title":"Random shuffling of an array","body":"<p>The following code will achieve a random ordering on the array. </p>\n\n<pre><code>// Shuffle the elements in the array\nCollections.shuffle(Arrays.asList(array));\n</code></pre>\n\n<p>from: <a href=\"http://www.programcreek.com/2012/02/java-method-to-shuffle-an-int-array-with-random-order/\" rel=\"noreferrer\">http://www.programcreek.com/2012/02/java-method-to-shuffle-an-int-array-with-random-order/</a></p>\n"},{"tags":[],"owner":{"account_id":2887305,"reputation":8065,"user_id":2495795,"accept_rate":87,"display_name":"BufBills"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1471273029,"creation_date":1471273029,"answer_id":38957563,"question_id":1519736,"body_markdown":"This is knuth shuffle algorithm.\r\n\r\n\r\n\r\n    public class Knuth { \r\n    \r\n        // this class should not be instantiated\r\n        private Knuth() { }\r\n    \r\n        /**\r\n         * Rearranges an array of objects in uniformly random order\r\n         * (under the assumption that &lt;tt&gt;Math.random()&lt;/tt&gt; generates independent\r\n         * and uniformly distributed numbers between 0 and 1).\r\n         * @param a the array to be shuffled\r\n         */\r\n        public static void shuffle(Object[] a) {\r\n            int n = a.length;\r\n            for (int i = 0; i &lt; n; i++) {\r\n                // choose index uniformly in [i, n-1]\r\n                int r = i + (int) (Math.random() * (n - i));\r\n                Object swap = a[r];\r\n                a[r] = a[i];\r\n                a[i] = swap;\r\n            }\r\n        }\r\n    \r\n        /**\r\n         * Reads in a sequence of strings from standard input, shuffles\r\n         * them, and prints out the results.\r\n         */\r\n        public static void main(String[] args) {\r\n    \r\n            // read in the data\r\n            String[] a = StdIn.readAllStrings();\r\n    \r\n            // shuffle the array\r\n            Knuth.shuffle(a);\r\n    \r\n            // print results.\r\n            for (int i = 0; i &lt; a.length; i++)\r\n                StdOut.println(a[i]);\r\n        }\r\n    }\r\n\r\n","title":"Random shuffling of an array","body":"<p>This is knuth shuffle algorithm.</p>\n\n<pre><code>public class Knuth { \n\n    // this class should not be instantiated\n    private Knuth() { }\n\n    /**\n     * Rearranges an array of objects in uniformly random order\n     * (under the assumption that &lt;tt&gt;Math.random()&lt;/tt&gt; generates independent\n     * and uniformly distributed numbers between 0 and 1).\n     * @param a the array to be shuffled\n     */\n    public static void shuffle(Object[] a) {\n        int n = a.length;\n        for (int i = 0; i &lt; n; i++) {\n            // choose index uniformly in [i, n-1]\n            int r = i + (int) (Math.random() * (n - i));\n            Object swap = a[r];\n            a[r] = a[i];\n            a[i] = swap;\n        }\n    }\n\n    /**\n     * Reads in a sequence of strings from standard input, shuffles\n     * them, and prints out the results.\n     */\n    public static void main(String[] args) {\n\n        // read in the data\n        String[] a = StdIn.readAllStrings();\n\n        // shuffle the array\n        Knuth.shuffle(a);\n\n        // print results.\n        for (int i = 0; i &lt; a.length; i++)\n            StdOut.println(a[i]);\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":249565,"reputation":9766,"user_id":525725,"accept_rate":67,"display_name":"Emmanuel Bourg"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1500494333,"creation_date":1475009483,"answer_id":39734101,"question_id":1519736,"body_markdown":"Here is a solution using Apache Commons Math 3.x (for int[] arrays only):\r\n\r\n    MathArrays.shuffle(array);\r\n\r\nhttp://commons.apache.org/proper/commons-math/javadocs/api-3.6.1/org/apache/commons/math3/util/MathArrays.html#shuffle(int[])\r\n\r\nAlternatively, Apache Commons Lang 3.6 introduced new shuffle methods to the `ArrayUtils` class (for objects and any primitive type).\r\n\r\n    ArrayUtils.shuffle(array);\r\n\r\nhttp://commons.apache.org/proper/commons-lang/javadocs/api-release/org/apache/commons/lang3/ArrayUtils.html#shuffle-int:A-","title":"Random shuffling of an array","body":"<p>Here is a solution using Apache Commons Math 3.x (for int[] arrays only):</p>\n\n<pre><code>MathArrays.shuffle(array);\n</code></pre>\n\n<p><a href=\"http://commons.apache.org/proper/commons-math/javadocs/api-3.6.1/org/apache/commons/math3/util/MathArrays.html#shuffle(int[])\" rel=\"nofollow noreferrer\">http://commons.apache.org/proper/commons-math/javadocs/api-3.6.1/org/apache/commons/math3/util/MathArrays.html#shuffle(int[])</a></p>\n\n<p>Alternatively, Apache Commons Lang 3.6 introduced new shuffle methods to the <code>ArrayUtils</code> class (for objects and any primitive type).</p>\n\n<pre><code>ArrayUtils.shuffle(array);\n</code></pre>\n\n<p><a href=\"http://commons.apache.org/proper/commons-lang/javadocs/api-release/org/apache/commons/lang3/ArrayUtils.html#shuffle-int:A-\" rel=\"nofollow noreferrer\">http://commons.apache.org/proper/commons-lang/javadocs/api-release/org/apache/commons/lang3/ArrayUtils.html#shuffle-int:A-</a></p>\n"},{"tags":[],"owner":{"account_id":5744984,"reputation":426,"user_id":4536455,"accept_rate":29,"display_name":"Marcelo Ferreira"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1477590176,"creation_date":1477590176,"answer_id":40291055,"question_id":1519736,"body_markdown":"There is another way also, not post yet\r\n\t\r\n\t//that way, send many object types diferentes\r\n\tpublic anotherWayToReciveParameter(Object... objects)\r\n\t{\r\n\t\t//ready with array\r\n\t\tfinal int length =objects.length;\r\n\t\tSystem.out.println(length);\r\n\t\t//for ready same list\r\n\t\tArrays.asList(objects);\r\n\t}\r\n\r\nthat way more easy, depended of the context","title":"Random shuffling of an array","body":"<p>There is another way also, not post yet</p>\n\n<pre><code>//that way, send many object types diferentes\npublic anotherWayToReciveParameter(Object... objects)\n{\n    //ready with array\n    final int length =objects.length;\n    System.out.println(length);\n    //for ready same list\n    Arrays.asList(objects);\n}\n</code></pre>\n\n<p>that way more easy, depended of the context</p>\n"},{"tags":[],"owner":{"account_id":8681911,"reputation":85,"user_id":6497487,"display_name":"Archit Goel"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1499243630,"creation_date":1499242215,"answer_id":44920481,"question_id":1519736,"body_markdown":"The most simple solution for this Random Shuffling in an Array.\r\n    \r\n    String location[] = {&quot;delhi&quot;,&quot;banglore&quot;,&quot;mathura&quot;,&quot;lucknow&quot;,&quot;chandigarh&quot;,&quot;mumbai&quot;};\r\n    int index;\r\n    String temp;\r\n    Random random = new Random();\r\n    for(int i=1;i&lt;location.length;i++)\r\n    {\r\n        index = random.nextInt(i+1);\r\n        temp = location[index];\r\n        location[index] = location[i];\r\n        location[i] = temp;\r\n        System.out.println(&quot;Location Based On Random Values :&quot;+location[i]);\r\n    }\r\n","title":"Random shuffling of an array","body":"<p>The most simple solution for this Random Shuffling in an Array.</p>\n\n<pre><code>String location[] = {\"delhi\",\"banglore\",\"mathura\",\"lucknow\",\"chandigarh\",\"mumbai\"};\nint index;\nString temp;\nRandom random = new Random();\nfor(int i=1;i&lt;location.length;i++)\n{\n    index = random.nextInt(i+1);\n    temp = location[index];\n    location[index] = location[i];\n    location[i] = temp;\n    System.out.println(\"Location Based On Random Values :\"+location[i]);\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":4409801,"reputation":4386,"user_id":3593084,"accept_rate":40,"display_name":"Mr.Q"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1501066762,"creation_date":1501066762,"answer_id":45324981,"question_id":1519736,"body_markdown":"I saw some miss information in some answers so i decided to add a new one.\r\n \r\nJava collections Arrays.asList takes var-arg of type T `(T ...)`. If you pass a primitive array (int array), asList method will infer and generate a `List&lt;int[]&gt;`, which is a one element list (the one element is the primitive array). if you shuffle this one element list, it won`t change any thing.\r\n\r\nSo, first you have to convert you primitive array to Wrapper object array. for this you can use `ArrayUtils.toObject` method from apache.commons.lang. then pass the generated array to a List&lt;Integer&gt; and finaly shuffle that.\r\n\r\n      int[] intArr = {1,2,3};\r\n      List&lt;Integer&gt; integerList = Arrays.asList(ArrayUtils.toObject(array));\r\n      Collections.shuffle(integerList);\r\n      //now! elements in integerList are shuffled!\r\n\r\n","title":"Random shuffling of an array","body":"<p>I saw some miss information in some answers so i decided to add a new one.</p>\n\n<p>Java collections Arrays.asList takes var-arg of type T <code>(T ...)</code>. If you pass a primitive array (int array), asList method will infer and generate a <code>List&lt;int[]&gt;</code>, which is a one element list (the one element is the primitive array). if you shuffle this one element list, it won`t change any thing.</p>\n\n<p>So, first you have to convert you primitive array to Wrapper object array. for this you can use <code>ArrayUtils.toObject</code> method from apache.commons.lang. then pass the generated array to a List and finaly shuffle that.</p>\n\n<pre><code>  int[] intArr = {1,2,3};\n  List&lt;Integer&gt; integerList = Arrays.asList(ArrayUtils.toObject(array));\n  Collections.shuffle(integerList);\n  //now! elements in integerList are shuffled!\n</code></pre>\n"},{"tags":[],"owner":{"account_id":8379435,"reputation":31,"user_id":6291929,"display_name":"nikhil gupta"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1506430602,"creation_date":1506429275,"answer_id":46426737,"question_id":1519736,"body_markdown":"\tpublic class ShuffleArray {\r\n\tpublic static void shuffleArray(int[] a) {\r\n\t\tint n = a.length;\r\n\t\tRandom random = new Random();\r\n\t\trandom.nextInt();\r\n\t\tfor (int i = 0; i &lt; n; i++) {\r\n\t\t\tint change = i + random.nextInt(n - i);\r\n\t\t\tswap(a, i, change);\r\n\t\t}\r\n\t}\r\n\r\n\tprivate static void swap(int[] a, int i, int change) {\r\n\t\tint helper = a[i];\r\n\t\ta[i] = a[change];\r\n\t\ta[change] = helper;\r\n\t}\r\n\r\n\tpublic static void main(String[] args) {\r\n\t\tint[] a = new int[] { 1, 2, 3, 4, 5, 6, 6, 5, 4, 3, 2, 1 };\r\n\t\tshuffleArray(a);\r\n\t\tfor (int i : a) {\r\n\t\t\tSystem.out.println(i);\r\n\t\t}\r\n\t}\r\n\t}","title":"Random shuffling of an array","body":"<pre><code>public class ShuffleArray {\npublic static void shuffleArray(int[] a) {\n    int n = a.length;\n    Random random = new Random();\n    random.nextInt();\n    for (int i = 0; i &lt; n; i++) {\n        int change = i + random.nextInt(n - i);\n        swap(a, i, change);\n    }\n}\n\nprivate static void swap(int[] a, int i, int change) {\n    int helper = a[i];\n    a[i] = a[change];\n    a[change] = helper;\n}\n\npublic static void main(String[] args) {\n    int[] a = new int[] { 1, 2, 3, 4, 5, 6, 6, 5, 4, 3, 2, 1 };\n    shuffleArray(a);\n    for (int i : a) {\n        System.out.println(i);\n    }\n}\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2769650,"reputation":1786,"user_id":2384509,"display_name":"Hans Kristian"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1512632969,"creation_date":1512632969,"answer_id":47690082,"question_id":1519736,"body_markdown":"A simple solution for Groovy:\r\n\r\n    solutionArray.sort{ new Random().nextInt() }\r\n\r\nThis will sort all elements of the array list randomly which archives the desired result of shuffling all elements.","title":"Random shuffling of an array","body":"<p>A simple solution for Groovy:</p>\n\n<pre><code>solutionArray.sort{ new Random().nextInt() }\n</code></pre>\n\n<p>This will sort all elements of the array list randomly which archives the desired result of shuffling all elements.</p>\n"},{"tags":[],"owner":{"account_id":2182945,"reputation":1298,"user_id":1932017,"display_name":"YujiSoftware"},"down_vote_count":1,"up_vote_count":2,"is_accepted":false,"score":1,"last_activity_date":1615632540,"creation_date":1518862921,"answer_id":48840285,"question_id":1519736,"body_markdown":"1. **Box** from `int[]` to `List&lt;Integer&gt;`\r\n2. Shuffle with `Collections.shuffle` method\r\n\r\n```java\r\nint[] solutionArray = { 1, 2, 3, 4, 5, 6, 6, 5, 4, 3, 2, 1 };\r\n\r\nList&lt;Integer&gt; list = Arrays.stream(solutionArray).boxed().collect(Collectors.toList());\r\nCollections.shuffle(list);\r\n\r\nSystem.out.println(list.toString());\r\n// [1, 5, 5, 4, 2, 6, 1, 3, 3, 4, 2, 6]\r\n```","title":"Random shuffling of an array","body":"<ol>\n<li><strong>Box</strong> from <code>int[]</code> to <code>List&lt;Integer&gt;</code></li>\n<li>Shuffle with <code>Collections.shuffle</code> method</li>\n</ol>\n<pre class=\"lang-java prettyprint-override\"><code>int[] solutionArray = { 1, 2, 3, 4, 5, 6, 6, 5, 4, 3, 2, 1 };\n\nList&lt;Integer&gt; list = Arrays.stream(solutionArray).boxed().collect(Collectors.toList());\nCollections.shuffle(list);\n\nSystem.out.println(list.toString());\n// [1, 5, 5, 4, 2, 6, 1, 3, 3, 4, 2, 6]\n</code></pre>\n"},{"tags":[],"owner":{"account_id":12943368,"reputation":41,"user_id":9358434,"display_name":"PS5"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1641707546,"creation_date":1520593835,"answer_id":49192443,"question_id":1519736,"body_markdown":"Here&#39;s another way to shuffle a list\r\n\r\n    public List&lt;Integer&gt; shuffleArray(List&lt;Integer&gt; a) {\r\n        List&lt;Integer&gt; b = new ArrayList&lt;Integer&gt;();\r\n        while (a.size() != 0) {\r\n            int arrayIndex = (int) (Math.random() * (a.size()));\r\n            b.add(a.get(arrayIndex));\r\n            a.remove(a.get(arrayIndex));\r\n        }\r\n        return b;\r\n    }\r\n\r\nPick a random number from the original list and save it in another list.Then remove the number from the original list.The size of the original list will keep decreasing by one until all elements are moved to the new list. ","title":"Random shuffling of an array","body":"<p>Here's another way to shuffle a list</p>\n<pre><code>public List&lt;Integer&gt; shuffleArray(List&lt;Integer&gt; a) {\n    List&lt;Integer&gt; b = new ArrayList&lt;Integer&gt;();\n    while (a.size() != 0) {\n        int arrayIndex = (int) (Math.random() * (a.size()));\n        b.add(a.get(arrayIndex));\n        a.remove(a.get(arrayIndex));\n    }\n    return b;\n}\n</code></pre>\n<p>Pick a random number from the original list and save it in another list.Then remove the number from the original list.The size of the original list will keep decreasing by one until all elements are moved to the new list.</p>\n"},{"tags":[],"owner":{"account_id":13307449,"reputation":11,"user_id":9606779,"display_name":"suraj"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1523010219,"creation_date":1523009050,"answer_id":49690282,"question_id":1519736,"body_markdown":"Simplest code to shuffle:\r\n\r\n    import java.util.*;\r\n    public class ch {\r\n    \tpublic static void main(String args[])\r\n    \t{\r\n    \t\tScanner sc=new Scanner(System.in);\r\n    \t\tArrayList&lt;Integer&gt; l=new ArrayList&lt;Integer&gt;(10);\r\n    \t\tfor(int i=0;i&lt;10;i++)\r\n    \t\t\tl.add(sc.nextInt());\r\n    \t\tCollections.shuffle(l);\r\n    \t\tfor(int j=0;j&lt;10;j++)\r\n    \t\t\tSystem.out.println(l.get(j));\t\t\r\n    \t}\r\n    }\r\n\r\n","title":"Random shuffling of an array","body":"<p>Simplest code to shuffle:</p>\n\n<pre><code>import java.util.*;\npublic class ch {\n    public static void main(String args[])\n    {\n        Scanner sc=new Scanner(System.in);\n        ArrayList&lt;Integer&gt; l=new ArrayList&lt;Integer&gt;(10);\n        for(int i=0;i&lt;10;i++)\n            l.add(sc.nextInt());\n        Collections.shuffle(l);\n        for(int j=0;j&lt;10;j++)\n            System.out.println(l.get(j));       \n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":11685174,"reputation":1,"user_id":9804200,"display_name":"aurobind singh"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1530163663,"creation_date":1530163663,"answer_id":51075263,"question_id":1519736,"body_markdown":"    import java.util.ArrayList;\r\n    import java.util.Random;\r\n    public class shuffle {\r\n        public static void main(String[] args) {\r\n            int a[] =  {1,2,3,4,5,6,7,8,9};\r\n             ArrayList b = new ArrayList();\r\n           int i=0,q=0;\r\n           Random rand = new Random();\r\n           \r\n           while(a.length!=b.size())\r\n           {\r\n               int l = rand.nextInt(a.length);\r\n    //this is one option to that but has a flaw on 0\r\n    //           if(a[l] !=0)\r\n    //           {\r\n    //                b.add(a[l]);\r\n    //               a[l]=0;\r\n    //               \r\n    //           }\r\n    //           \r\n    // this works for every no. \r\n                    if(!(b.contains(a[l])))\r\n                    {\r\n                        b.add(a[l]);\r\n                    }\r\n    \r\n               \r\n               \r\n           }\r\n          \r\n    //        for (int j = 0; j &lt;b.size(); j++) {\r\n    //            System.out.println(b.get(j));\r\n    //            \r\n    //        }\r\n    System.out.println(b);\r\n        }\r\n        \r\n    }","title":"Random shuffling of an array","body":"<pre><code>import java.util.ArrayList;\nimport java.util.Random;\npublic class shuffle {\n    public static void main(String[] args) {\n        int a[] =  {1,2,3,4,5,6,7,8,9};\n         ArrayList b = new ArrayList();\n       int i=0,q=0;\n       Random rand = new Random();\n\n       while(a.length!=b.size())\n       {\n           int l = rand.nextInt(a.length);\n//this is one option to that but has a flaw on 0\n//           if(a[l] !=0)\n//           {\n//                b.add(a[l]);\n//               a[l]=0;\n//               \n//           }\n//           \n// this works for every no. \n                if(!(b.contains(a[l])))\n                {\n                    b.add(a[l]);\n                }\n\n\n\n       }\n\n//        for (int j = 0; j &lt;b.size(); j++) {\n//            System.out.println(b.get(j));\n//            \n//        }\nSystem.out.println(b);\n    }\n\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1090269,"reputation":842,"user_id":1085048,"display_name":"digitebs"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1641832595,"creation_date":1549010967,"answer_id":54475899,"question_id":1519736,"body_markdown":"            \r\n\r\nsimilar without using swap b\r\n\r\n        Random r = new Random();\r\n        int n = solutionArray.length;\r\n        List&lt;Integer&gt; arr =  Arrays.stream(solutionArray)\r\n                                   .boxed()\r\n                                   .collect(Collectors.toList());\r\n        for (int i = 0; i &lt; n-1; i++) {\r\n            solutionArray[i] = arr.remove(r.nextInt(arr.size())); // randomize based on size\r\n        }\r\n        solutionArray[n-1] = arr.get(0);","title":"Random shuffling of an array","body":"<p>similar without using swap b</p>\n<pre><code>    Random r = new Random();\n    int n = solutionArray.length;\n    List&lt;Integer&gt; arr =  Arrays.stream(solutionArray)\n                               .boxed()\n                               .collect(Collectors.toList());\n    for (int i = 0; i &lt; n-1; i++) {\n        solutionArray[i] = arr.remove(r.nextInt(arr.size())); // randomize based on size\n    }\n    solutionArray[n-1] = arr.get(0);\n</code></pre>\n"},{"tags":[],"owner":{"display_name":"user3133925"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1551244532,"creation_date":1551244532,"answer_id":54898459,"question_id":1519736,"body_markdown":"One of the solution is using the permutation to pre-compute all the permutations and stored in the ArrayList\r\n\r\nJava 8 introduced a new method, ints(), in the java.util.Random class. The ints() method returns an unlimited stream of pseudorandom int values. You can limit the random numbers between a specified range by providing the minimum and the maximum values.\r\n\r\n    Random genRandom = new Random();\r\n    int num = genRandom.nextInt(arr.length);\r\n\r\nWith the help of generating the random number, You can iterate through the loop and swap with the current index with the random number..\r\nThat&#39;s how you can generate a random number with O(1) space complexity.\r\n\r\n","title":"Random shuffling of an array","body":"<p>One of the solution is using the permutation to pre-compute all the permutations and stored in the ArrayList</p>\n\n<p>Java 8 introduced a new method, ints(), in the java.util.Random class. The ints() method returns an unlimited stream of pseudorandom int values. You can limit the random numbers between a specified range by providing the minimum and the maximum values.</p>\n\n<pre><code>Random genRandom = new Random();\nint num = genRandom.nextInt(arr.length);\n</code></pre>\n\n<p>With the help of generating the random number, You can iterate through the loop and swap with the current index with the random number..\nThat's how you can generate a random number with O(1) space complexity.</p>\n"},{"tags":[],"owner":{"account_id":50030,"reputation":61435,"user_id":149138,"accept_rate":56,"display_name":"BeeOnRope"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1559859412,"creation_date":1559859412,"answer_id":56485741,"question_id":1519736,"body_markdown":"Using Guava&#39;s [`Ints.asList()`](https://google.github.io/guava/releases/19.0/api/docs/com/google/common/primitives/Ints.html#asList(int...)) it is as simple as:\r\n\r\n    Collections.shuffle(Ints.asList(array));","title":"Random shuffling of an array","body":"<p>Using Guava's <a href=\"https://google.github.io/guava/releases/19.0/api/docs/com/google/common/primitives/Ints.html#asList(int...)\" rel=\"nofollow noreferrer\"><code>Ints.asList()</code></a> it is as simple as:</p>\n\n<pre><code>Collections.shuffle(Ints.asList(array));\n</code></pre>\n"},{"tags":[],"owner":{"account_id":16714003,"reputation":25,"user_id":12080584,"display_name":"izum286"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1584959587,"creation_date":1584959587,"answer_id":60811828,"question_id":1519736,"body_markdown":"Without Random solution:\r\n\r\n       static void randomArrTimest(int[] some){\r\n            long startTime = System.currentTimeMillis();\r\n            for (int i = 0; i &lt; some.length; i++) {\r\n                long indexToSwap = startTime%(i+1);\r\n                long tmp = some[(int) indexToSwap];\r\n                some[(int) indexToSwap] = some[i];\r\n                some[i] = (int) tmp;\r\n            }\r\n            System.out.println(Arrays.toString(some));\r\n        }","title":"Random shuffling of an array","body":"<p>Without Random solution:</p>\n\n<pre><code>   static void randomArrTimest(int[] some){\n        long startTime = System.currentTimeMillis();\n        for (int i = 0; i &lt; some.length; i++) {\n            long indexToSwap = startTime%(i+1);\n            long tmp = some[(int) indexToSwap];\n            some[(int) indexToSwap] = some[i];\n            some[i] = (int) tmp;\n        }\n        System.out.println(Arrays.toString(some));\n    }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":17006632,"reputation":21,"user_id":12302695,"display_name":"Fiel Muhongo"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1589477441,"creation_date":1589476998,"answer_id":61803550,"question_id":1519736,"body_markdown":" **Using the Random Class**\r\n\t  \r\n\t  public static void randomizeArray(int[] arr) {\r\n\t\t  \r\n\t\t  Random rGenerator = new Random(); // Create an instance of the random class \r\n\t\t  for (int i =0; i&lt; arr.length;i++ ) {\r\n\t\t\t  //Swap the positions...\r\n\r\n\t\t\t  int rPosition = rGenerator.nextInt(arr.length); // Generates an integer within the range (Any number from 0 - arr.length)\r\n\t\t\t  int temp = arr[i]; // variable temp saves the value of the current array index;\r\n\t\t\t  arr[i] = arr[rPosition];  // array at the current position (i) get the value of the random generated \r\n\t\t\t  arr[rPosition] = temp; // the array at the position of random generated gets the value of temp\r\n\t\t\t  \r\n\t\t  }\r\n\t\t  \r\n\t\t  for(int i = 0; i&lt;arr.length; i++) {\r\n\t\t\t  System.out.print(arr[i]); //Prints out the array\r\n\t\t  } \r\n\t\t  \r\n\t  }\r\n","title":"Random shuffling of an array","body":"<p><strong>Using the Random Class</strong></p>\n\n<pre><code>  public static void randomizeArray(int[] arr) {\n\n      Random rGenerator = new Random(); // Create an instance of the random class \n      for (int i =0; i&lt; arr.length;i++ ) {\n          //Swap the positions...\n\n          int rPosition = rGenerator.nextInt(arr.length); // Generates an integer within the range (Any number from 0 - arr.length)\n          int temp = arr[i]; // variable temp saves the value of the current array index;\n          arr[i] = arr[rPosition];  // array at the current position (i) get the value of the random generated \n          arr[rPosition] = temp; // the array at the position of random generated gets the value of temp\n\n      }\n\n      for(int i = 0; i&lt;arr.length; i++) {\n          System.out.print(arr[i]); //Prints out the array\n      } \n\n  }\n</code></pre>\n"},{"tags":[],"owner":{"display_name":"user4910279"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1622127927,"creation_date":1616882438,"answer_id":66836533,"question_id":1519736,"body_markdown":"You should use `Collections.shuffle()`. However, you can&#39;t directly manipulate an array of primitive types, so you need to create a wrapper class.\r\n\r\nTry this.\r\n\r\n    public static void shuffle(int[] array) {\r\n        Collections.shuffle(new AbstractList&lt;Integer&gt;() {\r\n            @Override public Integer get(int index) { return array[index]; }\r\n            @Override public int size() { return array.length; }\r\n            @Override public Integer set(int index, Integer element) {\r\n                int result = array[index];\r\n                array[index] = element;\r\n                return result;\r\n            }\r\n        });\r\n    }\r\n\r\nAnd\r\n\r\n    int[] solutionArray = {1, 2, 3, 4, 5, 6, 6, 5, 4, 3, 2, 1};\r\n    shuffle(solutionArray);\r\n    System.out.println(Arrays.toString(solutionArray));\r\n\r\noutput:\r\n\r\n    [3, 3, 4, 1, 6, 2, 2, 1, 5, 6, 5, 4]\r\n\r\n","title":"Random shuffling of an array","body":"<p>You should use <code>Collections.shuffle()</code>. However, you can't directly manipulate an array of primitive types, so you need to create a wrapper class.</p>\n<p>Try this.</p>\n<pre><code>public static void shuffle(int[] array) {\n    Collections.shuffle(new AbstractList&lt;Integer&gt;() {\n        @Override public Integer get(int index) { return array[index]; }\n        @Override public int size() { return array.length; }\n        @Override public Integer set(int index, Integer element) {\n            int result = array[index];\n            array[index] = element;\n            return result;\n        }\n    });\n}\n</code></pre>\n<p>And</p>\n<pre><code>int[] solutionArray = {1, 2, 3, 4, 5, 6, 6, 5, 4, 3, 2, 1};\nshuffle(solutionArray);\nSystem.out.println(Arrays.toString(solutionArray));\n</code></pre>\n<p>output:</p>\n<pre><code>[3, 3, 4, 1, 6, 2, 2, 1, 5, 6, 5, 4]\n</code></pre>\n"},{"tags":[],"owner":{"account_id":506650,"reputation":544,"user_id":2260568,"accept_rate":73,"display_name":"demon101"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1619512077,"creation_date":1619512077,"answer_id":67279493,"question_id":1519736,"body_markdown":"In Java we can use Collections.shuffle method to randomly reorder items in a list. \r\n\r\nGroovy 3.0.0 adds the [shuffle and shuffled methods][1] to a List or array directly. \r\n\r\n\r\n  [1]: https://blog.mrhaki.com/2020/02/groovy-goodness-shuffle-list-or-array.html","title":"Random shuffling of an array","body":"<p>In Java we can use Collections.shuffle method to randomly reorder items in a list.</p>\n<p>Groovy 3.0.0 adds the <a href=\"https://blog.mrhaki.com/2020/02/groovy-goodness-shuffle-list-or-array.html\" rel=\"nofollow noreferrer\">shuffle and shuffled methods</a> to a List or array directly.</p>\n"},{"tags":[],"owner":{"account_id":1126061,"reputation":2343,"user_id":2123050,"accept_rate":73,"display_name":"FuryFart"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1699352145,"creation_date":1699352145,"answer_id":77437351,"question_id":1519736,"body_markdown":"You can shuffle by randomizing the sort algorithm. Here is a python example.\r\n\r\n    # Shuffle by random sort\r\n    import random\r\n    nums = [0,1,2,3,4,5,6,7,8,9]\r\n    nums.sort(key=lambda e : random.randint(1,10))\r\n    print(nums)\r\n","title":"Random shuffling of an array","body":"<p>You can shuffle by randomizing the sort algorithm. Here is a python example.</p>\n<pre><code># Shuffle by random sort\nimport random\nnums = [0,1,2,3,4,5,6,7,8,9]\nnums.sort(key=lambda e : random.randint(1,10))\nprint(nums)\n</code></pre>\n"}],"owner":{"account_id":40237,"reputation":16072,"user_id":116573,"accept_rate":76,"display_name":"Hubert"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":543244,"favorite_count":0,"down_vote_count":1,"up_vote_count":284,"accepted_answer_id":1520212,"answer_count":32,"score":283,"last_activity_date":1699352145,"creation_date":1254744959,"question_id":1519736,"body_markdown":"I need to randomly shuffle the following Array:\r\n\r\n    int[] solutionArray = {1, 2, 3, 4, 5, 6, 6, 5, 4, 3, 2, 1};\r\n\r\nIs there any function to do that?","title":"Random shuffling of an array","body":"<p>I need to randomly shuffle the following Array:</p>\n\n<pre><code>int[] solutionArray = {1, 2, 3, 4, 5, 6, 6, 5, 4, 3, 2, 1};\n</code></pre>\n\n<p>Is there any function to do that?</p>\n"},{"tags":["java","text","rotation","swt","draw2d"],"answers":[{"tags":[],"owner":{"account_id":1558798,"reputation":36540,"user_id":1449199,"accept_rate":95,"display_name":"Baz"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1348737699,"creation_date":1348737699,"answer_id":12618093,"question_id":12618023,"body_markdown":"This should do it:\r\n\r\n    Transform tr = new Transform(display);\r\n    tr.rotate(-90);\r\n    gc.setTransform(tr);\r\n\r\n    gc.drawText(&quot;Text&quot;, x, y);","title":"How to draw rotated text inside of a GC","body":"<p>This should do it:</p>\n\n<pre><code>Transform tr = new Transform(display);\ntr.rotate(-90);\ngc.setTransform(tr);\n\ngc.drawText(\"Text\", x, y);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":29845211,"reputation":1,"user_id":22872434,"display_name":"Axel"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1699352010,"creation_date":1699351875,"answer_id":77437316,"question_id":12618023,"body_markdown":"Baz&#39;s answer will move the text outside of the window.\r\nThis is caused by rotating the complete coordiate system of the window.\r\nThe follwoing solution rotate the text and position it to the coordiates x, y:\r\n\r\n    Transform tr = new Transform(display);\r\n    tr.translate(x,y);\r\n    tr.rotate(-90);\r\n    gc.setTransform(tr);\r\n    gc.drawText(&quot;Text&quot;, 0, 0);","title":"How to draw rotated text inside of a GC","body":"<p>Baz's answer will move the text outside of the window.\nThis is caused by rotating the complete coordiate system of the window.\nThe follwoing solution rotate the text and position it to the coordiates x, y:</p>\n<pre><code>Transform tr = new Transform(display);\ntr.translate(x,y);\ntr.rotate(-90);\ngc.setTransform(tr);\ngc.drawText(&quot;Text&quot;, 0, 0);\n</code></pre>\n"}],"owner":{"account_id":242097,"reputation":6263,"user_id":513393,"accept_rate":81,"display_name":"Skip"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1615,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":12618093,"answer_count":2,"score":0,"last_activity_date":1699352010,"creation_date":1348737499,"question_id":12618023,"body_markdown":"I doing some 2D drawing in a SWT GUI.\r\nFor that I have a [GC Object.][1]\r\n\r\nHow can I draw rotatet text inside of an [SWT Canvas][2]?\r\n\r\n\r\n  [1]: http://help.eclipse.org/helios/index.jsp?topic=/org.eclipse.platform.doc.isv/reference/api/org/eclipse/swt/graphics/class-use/GC.html\r\n  [2]: http://help.eclipse.org/indigo/index.jsp?topic=/org.eclipse.platform.doc.isv/reference/api/org/eclipse/swt/widgets/class-use/Canvas.html","title":"How to draw rotated text inside of a GC","body":"<p>I doing some 2D drawing in a SWT GUI.\nFor that I have a <a href=\"http://help.eclipse.org/helios/index.jsp?topic=/org.eclipse.platform.doc.isv/reference/api/org/eclipse/swt/graphics/class-use/GC.html\" rel=\"nofollow\">GC Object.</a></p>\n\n<p>How can I draw rotatet text inside of an <a href=\"http://help.eclipse.org/indigo/index.jsp?topic=/org.eclipse.platform.doc.isv/reference/api/org/eclipse/swt/widgets/class-use/Canvas.html\" rel=\"nofollow\">SWT Canvas</a>?</p>\n"},{"tags":["java","database","jdbc"],"comments":[{"owner":{"account_id":265376,"reputation":9477,"user_id":552301,"accept_rate":88,"display_name":"dlock"},"score":1,"creation_date":1362831571,"post_id":15310549,"comment_id":21612662,"body_markdown":"doesn&#39;t `getXXX().toString()` work?","body":"doesn&#39;t <code>getXXX().toString()</code> work?"},{"owner":{"account_id":347037,"reputation":79648,"user_id":680925,"display_name":"Perception"},"score":1,"creation_date":1362831744,"post_id":15310549,"comment_id":21612693,"body_markdown":"@deadlock - `getXXX` is a synonym for the cluster of methods (getDate, getBytes, getFloat etc). It&#39;s not a real method and the OP is asking about alternatives to using specific get methods when he doesn&#39;t know the underlying type.","body":"@deadlock - <code>getXXX</code> is a synonym for the cluster of methods (getDate, getBytes, getFloat etc). It&#39;s not a real method and the OP is asking about alternatives to using specific get methods when he doesn&#39;t know the underlying type."},{"owner":{"account_id":2407925,"reputation":119,"user_id":2103825,"accept_rate":25,"display_name":"Vini"},"score":0,"creation_date":1362831983,"post_id":15310549,"comment_id":21612763,"body_markdown":"yes it could but then I hava to know xxx beforehand...want to save that effort.","body":"yes it could but then I hava to know xxx beforehand...want to save that effort."}],"answers":[{"tags":[],"owner":{"account_id":97082,"reputation":374996,"user_id":263525,"accept_rate":85,"display_name":"Denys S&#233;guret"},"down_vote_count":0,"up_vote_count":12,"is_accepted":false,"score":12,"last_activity_date":1362831568,"creation_date":1362831568,"answer_id":15310579,"question_id":15310549,"body_markdown":"You can use the generic [getObject][1] method :\r\n\r\n&gt; Gets the value of the designated column in the current row of this\r\n&gt; ResultSet object as an Object in the Java programming language.\r\n&gt; \r\n&gt; This method will return the value of the given column as a Java\r\n&gt; object. The type of the Java object will be the default Java object\r\n&gt; type corresponding to the column&#39;s SQL type, following the mapping for\r\n&gt; built-in types specified in the JDBC specification. If the value is an\r\n&gt; SQL NULL, the driver returns a Java null.\r\n\r\n\r\n  [1]: http://docs.oracle.com/javase/6/docs/api/java/sql/ResultSet.html#getObject%28int%29","title":"How to get values of a column without knowing the column type","body":"<p>You can use the generic <a href=\"http://docs.oracle.com/javase/6/docs/api/java/sql/ResultSet.html#getObject%28int%29\">getObject</a> method :</p>\n\n<blockquote>\n  <p>Gets the value of the designated column in the current row of this\n  ResultSet object as an Object in the Java programming language.</p>\n  \n  <p>This method will return the value of the given column as a Java\n  object. The type of the Java object will be the default Java object\n  type corresponding to the column's SQL type, following the mapping for\n  built-in types specified in the JDBC specification. If the value is an\n  SQL NULL, the driver returns a Java null.</p>\n</blockquote>\n"},{"tags":[],"owner":{"account_id":121881,"reputation":20677,"user_id":315306,"accept_rate":90,"display_name":"Raffaele"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1362835287,"creation_date":1362832322,"answer_id":15310693,"question_id":15310549,"body_markdown":"As far as I know, you can simply use `getString()` if you want the result in a Java String object. I think the MySQL driver takes care of deserializing the byte stream in whatever Java object you specify via `getXXX()`. Given the following init script:\r\n\r\n&lt;!-- language:lang-sql --&gt;\r\n\r\n    DROP TABLE IF EXISTS thing;\r\n    \r\n    CREATE TABLE thing (\r\n      a_int int,\r\n      a_string text,\r\n      a_date date\r\n    );\r\n    \r\n    INSERT INTO thing (a_int, a_string, a_date)\r\n       VALUES (&#39;1234&#39;, &#39;Hello world&#39;, CURRENT_DATE() );\r\n\r\nand the code:\r\n\r\n&lt;!-- language: lang-java --&gt;\r\n\r\n\tpublic static void main(String[] args) throws Exception {\r\n\t\tMysqlDataSource db = new MysqlDataSource();\r\n\t\tdb.setDatabaseName(&quot;test&quot;);\r\n\t\tConnection conn = db.getConnection(&quot;test&quot;, &quot;test&quot;);\r\n\t\t\r\n\t\tResultSet res = conn.prepareStatement(&quot;SELECT * FROM thing&quot;).executeQuery();\r\n\t\tres.next();\r\n\t\tSystem.out.println(&quot;Get a int as a string: &quot; + res.getString(&quot;a_int&quot;));\r\n\t\t\r\n\t}\r\n\r\nIt simply prints `Get a int as a string: 1234`. You can even get the `a_date` column as a Java `int`, and it&#39;s converted to `2013` on my machine. So it appears that the binding happens **after** the driver has retrieved an untyped stream of bytes from the server. Sometimes the conversion fails, for example if you try `getInt()` on the `TEXT` column.","title":"How to get values of a column without knowing the column type","body":"<p>As far as I know, you can simply use <code>getString()</code> if you want the result in a Java String object. I think the MySQL driver takes care of deserializing the byte stream in whatever Java object you specify via <code>getXXX()</code>. Given the following init script:</p>\n\n\n\n<pre><code>DROP TABLE IF EXISTS thing;\n\nCREATE TABLE thing (\n  a_int int,\n  a_string text,\n  a_date date\n);\n\nINSERT INTO thing (a_int, a_string, a_date)\n   VALUES ('1234', 'Hello world', CURRENT_DATE() );\n</code></pre>\n\n<p>and the code:</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>public static void main(String[] args) throws Exception {\n    MysqlDataSource db = new MysqlDataSource();\n    db.setDatabaseName(\"test\");\n    Connection conn = db.getConnection(\"test\", \"test\");\n\n    ResultSet res = conn.prepareStatement(\"SELECT * FROM thing\").executeQuery();\n    res.next();\n    System.out.println(\"Get a int as a string: \" + res.getString(\"a_int\"));\n\n}\n</code></pre>\n\n<p>It simply prints <code>Get a int as a string: 1234</code>. You can even get the <code>a_date</code> column as a Java <code>int</code>, and it's converted to <code>2013</code> on my machine. So it appears that the binding happens <strong>after</strong> the driver has retrieved an untyped stream of bytes from the server. Sometimes the conversion fails, for example if you try <code>getInt()</code> on the <code>TEXT</code> column.</p>\n"},{"tags":[],"owner":{"account_id":29387559,"reputation":11,"user_id":22516697,"display_name":"Nisarg Pipaliya"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1699329109,"creation_date":1699329109,"answer_id":77435457,"question_id":15310549,"body_markdown":"First, Get `ResultRetMetadata then`, use it&#39;s method named as `getColumnTypeName(int indexOfCol)` to get it&#39;s type, then compare it to the datatypes using if else and use appropriate method `getxxx()`.\r\n```java\r\n    import java.sql.Types;\r\n        // your code....\r\n          ResultSetMetaData rsmd = resultset.getMetaData();\r\n          int n = rsmd.getColumnCount();\r\n          for(int i = 1; i &lt;=n; i++){\r\n              if(rsmd.getColumnTypeName(i) == Types.INTEGER){\r\n                    System.out.println(resultset.getInt(i));\r\n               }\r\n              else if(rsmd.getColumnTypeName(i) == Types.VARCHAR){\r\n                    System.out.println(resultset.getString(i));\r\n               }\r\n              // and so on ...\r\n          }\r\n        }\r\n```\r\n\r\n\r\n\r\nhttp://www.java2s.com/example/java-api/java/sql/types/other-0.html\r\nCan Checkout this page for further reference :)","title":"How to get values of a column without knowing the column type","body":"<p>First, Get <code>ResultRetMetadata then</code>, use it's method named as <code>getColumnTypeName(int indexOfCol)</code> to get it's type, then compare it to the datatypes using if else and use appropriate method <code>getxxx()</code>.</p>\n<pre class=\"lang-java prettyprint-override\"><code>    import java.sql.Types;\n        // your code....\n          ResultSetMetaData rsmd = resultset.getMetaData();\n          int n = rsmd.getColumnCount();\n          for(int i = 1; i &lt;=n; i++){\n              if(rsmd.getColumnTypeName(i) == Types.INTEGER){\n                    System.out.println(resultset.getInt(i));\n               }\n              else if(rsmd.getColumnTypeName(i) == Types.VARCHAR){\n                    System.out.println(resultset.getString(i));\n               }\n              // and so on ...\n          }\n        }\n</code></pre>\n<p><a href=\"http://www.java2s.com/example/java-api/java/sql/types/other-0.html\" rel=\"nofollow noreferrer\">http://www.java2s.com/example/java-api/java/sql/types/other-0.html</a>\nCan Checkout this page for further reference :)</p>\n"}],"owner":{"account_id":2407925,"reputation":119,"user_id":2103825,"accept_rate":25,"display_name":"Vini"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":3772,"favorite_count":0,"down_vote_count":0,"up_vote_count":8,"answer_count":3,"score":8,"last_activity_date":1699351835,"creation_date":1362831395,"question_id":15310549,"body_markdown":"I am creating a query dynamically based on a user choosing fields to be displayed in the result. The problem is that when data is to be retrieved from the database I normally use `getXXX()` methods to retrieve the appropriate type. But in this case I do not know what the appropriate type is since the columns are randomly chosen.\r\n\r\nIs there any way that I can get data in string format without specifying the data type XXX? I am using MySQL and Servlets.","title":"How to get values of a column without knowing the column type","body":"<p>I am creating a query dynamically based on a user choosing fields to be displayed in the result. The problem is that when data is to be retrieved from the database I normally use <code>getXXX()</code> methods to retrieve the appropriate type. But in this case I do not know what the appropriate type is since the columns are randomly chosen.</p>\n\n<p>Is there any way that I can get data in string format without specifying the data type XXX? I am using MySQL and Servlets.</p>\n"},{"tags":["java","android","geolocation","location","android-permissions"],"answers":[{"tags":[],"owner":{"account_id":8294,"reputation":6919,"user_id":14870,"accept_rate":92,"display_name":"weiyin"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1565727313,"creation_date":1565727313,"answer_id":57484743,"question_id":53090545,"body_markdown":"This looks like a bug in Android Webview. The endless loop happens if `callback.invoke` is called asynchronously with granted=false, but does not occur if it is called synchronously inside `onGeolocationPermissionsShowPrompt`.\r\n\r\nMy workaround is to save the time when the user denies the geolocation permission. If `onGeolocationPermissionsShowPrompt` is called again within a small amount of time and `checkSelfPermission` does not return PERMISSION_GRANTED, run `callback.invoke(origin, false, false)` and do not re-prompt the user.","title":"Why is onGeolocationPermissionsShowPrompt being called continuously?","body":"<p>This looks like a bug in Android Webview. The endless loop happens if <code>callback.invoke</code> is called asynchronously with granted=false, but does not occur if it is called synchronously inside <code>onGeolocationPermissionsShowPrompt</code>.</p>\n\n<p>My workaround is to save the time when the user denies the geolocation permission. If <code>onGeolocationPermissionsShowPrompt</code> is called again within a small amount of time and <code>checkSelfPermission</code> does not return PERMISSION_GRANTED, run <code>callback.invoke(origin, false, false)</code> and do not re-prompt the user.</p>\n"},{"tags":[],"owner":{"account_id":10289566,"reputation":51,"user_id":7591700,"display_name":"Junhua Zhu"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1699351440,"creation_date":1699351440,"answer_id":77437267,"question_id":53090545,"body_markdown":"we can fix it like below:\r\n```\r\n// set param &#39;retain&#39; true, to prevent permission request continuously\r\ncallback?.invoke(origin, isGranted, true)\r\nif (!isGranted) {\r\n    // clear permission state, so the user can request permission again\r\n    Handler().postDelayed({ GeolocationPermissions.getInstance().clear(origin) }, 500)\r\n}\r\n```","title":"Why is onGeolocationPermissionsShowPrompt being called continuously?","body":"<p>we can fix it like below:</p>\n<pre><code>// set param 'retain' true, to prevent permission request continuously\ncallback?.invoke(origin, isGranted, true)\nif (!isGranted) {\n    // clear permission state, so the user can request permission again\n    Handler().postDelayed({ GeolocationPermissions.getInstance().clear(origin) }, 500)\n}\n</code></pre>\n"}],"owner":{"account_id":6529144,"reputation":2051,"user_id":5050863,"accept_rate":50,"display_name":"sschilli"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1606,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":2,"score":1,"last_activity_date":1699351440,"creation_date":1541013504,"question_id":53090545,"body_markdown":"I have an app that uses a WebView where sites may request to use the device&#39;s geolocation. I have the following in my main activity:\r\n\r\n    public void onGeolocationPermissionsShowPrompt(final String origin, final GeolocationPermissions.Callback callback) {\r\n        m_geolocationCallback = null;\r\n        m_geolocationOrigin = null;\r\n\r\n        // If we don&#39;t have location permissions, we must request them first\r\n        if (ContextCompat.checkSelfPermission(MainActivity.this, Manifest.permission.ACCESS_FINE_LOCATION) != PackageManager.PERMISSION_GRANTED) {\r\n            // Show rationale if necessary\r\n            if (ActivityCompat.shouldShowRequestPermissionRationale(MainActivity.this, Manifest.permission.ACCESS_FINE_LOCATION)) {\r\n\r\n                new AlertDialog.Builder(MainActivity.this)\r\n                        .setMessage(getString(R.string.permission_location_rationale, origin))\r\n                        .setNeutralButton(android.R.string.ok, new DialogInterface.OnClickListener() {\r\n                            @Override\r\n                            public void onClick(DialogInterface dialogInterface, int i) {\r\n                                m_geolocationOrigin = origin;\r\n                                m_geolocationCallback = callback;\r\n                                ActivityCompat.requestPermissions(MainActivity.this, new String[]{Manifest.permission.ACCESS_FINE_LOCATION}, PERMISSIONS_REQUEST_ACCESS_FINE_LOCATION);\r\n                            }\r\n                        })\r\n                        .show();\r\n            }\r\n            else {\r\n                m_geolocationOrigin = origin;\r\n                m_geolocationCallback = callback;\r\n                ActivityCompat.requestPermissions(MainActivity.this, new String[]{Manifest.permission.ACCESS_FINE_LOCATION}, PERMISSIONS_REQUEST_ACCESS_FINE_LOCATION);\r\n            }\r\n        }\r\n        // Otherwise just tell webview that permission has been granted\r\n        else {\r\n            callback.invoke(origin, true, false);\r\n        }\r\n    }\r\n\r\nTo handle the permission request result, `MainActivity` also has the following:\r\n\r\n    @Override\r\n    public void onRequestPermissionsResult(int requestCode, String permissions[], int[] grantResults) {\r\n        switch (requestCode) {\r\n            case PERMISSIONS_REQUEST_ACCESS_FINE_LOCATION:\r\n                // Permission granted\r\n                if (grantResults.length &gt; 0 &amp;&amp; grantResults[0] == PackageManager.PERMISSION_GRANTED) {\r\n                    if (m_geolocationCallback != null) {\r\n                        m_geolocationCallback.invoke(m_geolocationOrigin, true, false);\r\n                    }\r\n                }\r\n                // Permission denied\r\n                else {\r\n                    // In this case, the user checked &quot;Don&#39;t ask again&quot; and denied permission\r\n                    if (Build.VERSION.SDK_INT &gt;= 23 &amp;&amp; !shouldShowRequestPermissionRationale(permissions[0])) {\r\n                        Toast.makeText(this, R.string.permission_location_denied, Toast.LENGTH_LONG).show();\r\n                    }\r\n\r\n                    if (m_geolocationCallback != null) {\r\n                        m_geolocationCallback.invoke(m_geolocationOrigin, false, false);\r\n                    }\r\n                }\r\n                return;\r\n        }\r\n    }\r\n\r\nThe issue I&#39;m running into is that whenever a site requests to use geolocation and I deny it (resulting in `invoke(origin, false false)` being called), the `onGeolocationPermissionsShowPrompt` method is called immediately and I am stuck in a loop of endlessly denying permission to the app.\r\n\r\nIf I check &quot;don&#39;t ask again&quot; in the permission request, it works fine, but  I want to be able to ask the user for permission again at a later point in time.\r\n\r\nI&#39;ve tried fixing this by changing my rejection callback invocation to\r\n`m_geolocationCallback.invoke(m_geolocationOrigin, false, true)`, but this does not produce the desired effect. This will prevent stop the continuous calls to `onGeolocationPermissionsShowPrompt`, but it also means that the given origin can no longer use geolocation even if permissions are later enabled, and I found no way to undo this (even by uninstalling/reinstalling the app).\r\n\r\nAny ideas on how to get around this issue?","title":"Why is onGeolocationPermissionsShowPrompt being called continuously?","body":"<p>I have an app that uses a WebView where sites may request to use the device's geolocation. I have the following in my main activity:</p>\n\n<pre><code>public void onGeolocationPermissionsShowPrompt(final String origin, final GeolocationPermissions.Callback callback) {\n    m_geolocationCallback = null;\n    m_geolocationOrigin = null;\n\n    // If we don't have location permissions, we must request them first\n    if (ContextCompat.checkSelfPermission(MainActivity.this, Manifest.permission.ACCESS_FINE_LOCATION) != PackageManager.PERMISSION_GRANTED) {\n        // Show rationale if necessary\n        if (ActivityCompat.shouldShowRequestPermissionRationale(MainActivity.this, Manifest.permission.ACCESS_FINE_LOCATION)) {\n\n            new AlertDialog.Builder(MainActivity.this)\n                    .setMessage(getString(R.string.permission_location_rationale, origin))\n                    .setNeutralButton(android.R.string.ok, new DialogInterface.OnClickListener() {\n                        @Override\n                        public void onClick(DialogInterface dialogInterface, int i) {\n                            m_geolocationOrigin = origin;\n                            m_geolocationCallback = callback;\n                            ActivityCompat.requestPermissions(MainActivity.this, new String[]{Manifest.permission.ACCESS_FINE_LOCATION}, PERMISSIONS_REQUEST_ACCESS_FINE_LOCATION);\n                        }\n                    })\n                    .show();\n        }\n        else {\n            m_geolocationOrigin = origin;\n            m_geolocationCallback = callback;\n            ActivityCompat.requestPermissions(MainActivity.this, new String[]{Manifest.permission.ACCESS_FINE_LOCATION}, PERMISSIONS_REQUEST_ACCESS_FINE_LOCATION);\n        }\n    }\n    // Otherwise just tell webview that permission has been granted\n    else {\n        callback.invoke(origin, true, false);\n    }\n}\n</code></pre>\n\n<p>To handle the permission request result, <code>MainActivity</code> also has the following:</p>\n\n<pre><code>@Override\npublic void onRequestPermissionsResult(int requestCode, String permissions[], int[] grantResults) {\n    switch (requestCode) {\n        case PERMISSIONS_REQUEST_ACCESS_FINE_LOCATION:\n            // Permission granted\n            if (grantResults.length &gt; 0 &amp;&amp; grantResults[0] == PackageManager.PERMISSION_GRANTED) {\n                if (m_geolocationCallback != null) {\n                    m_geolocationCallback.invoke(m_geolocationOrigin, true, false);\n                }\n            }\n            // Permission denied\n            else {\n                // In this case, the user checked \"Don't ask again\" and denied permission\n                if (Build.VERSION.SDK_INT &gt;= 23 &amp;&amp; !shouldShowRequestPermissionRationale(permissions[0])) {\n                    Toast.makeText(this, R.string.permission_location_denied, Toast.LENGTH_LONG).show();\n                }\n\n                if (m_geolocationCallback != null) {\n                    m_geolocationCallback.invoke(m_geolocationOrigin, false, false);\n                }\n            }\n            return;\n    }\n}\n</code></pre>\n\n<p>The issue I'm running into is that whenever a site requests to use geolocation and I deny it (resulting in <code>invoke(origin, false false)</code> being called), the <code>onGeolocationPermissionsShowPrompt</code> method is called immediately and I am stuck in a loop of endlessly denying permission to the app.</p>\n\n<p>If I check \"don't ask again\" in the permission request, it works fine, but  I want to be able to ask the user for permission again at a later point in time.</p>\n\n<p>I've tried fixing this by changing my rejection callback invocation to\n<code>m_geolocationCallback.invoke(m_geolocationOrigin, false, true)</code>, but this does not produce the desired effect. This will prevent stop the continuous calls to <code>onGeolocationPermissionsShowPrompt</code>, but it also means that the given origin can no longer use geolocation even if permissions are later enabled, and I found no way to undo this (even by uninstalling/reinstalling the app).</p>\n\n<p>Any ideas on how to get around this issue?</p>\n"},{"tags":["java","collections"],"comments":[{"owner":{"account_id":1114067,"reputation":196771,"user_id":1103872,"accept_rate":82,"display_name":"Marko Topolnik"},"score":0,"creation_date":1395057762,"post_id":22453755,"comment_id":34150872,"body_markdown":"Downcast to your specific `Queue` implementation, if it supports that operation.","body":"Downcast to your specific <code>Queue</code> implementation, if it supports that operation."},{"owner":{"account_id":2784842,"reputation":67271,"user_id":2396539,"accept_rate":78,"display_name":"Aniket Thakur"},"score":2,"creation_date":1395057763,"post_id":22453755,"comment_id":34150873,"body_markdown":"Queue is FIFO. Why would you have `get(int index)` method? Change your data structure to appropriate one.","body":"Queue is FIFO. Why would you have <code>get(int index)</code> method? Change your data structure to appropriate one."},{"owner":{"account_id":187056,"reputation":4353,"user_id":424830,"accept_rate":16,"display_name":"Shriram"},"score":0,"creation_date":1395057884,"post_id":22453755,"comment_id":34150936,"body_markdown":"Queue is FIFO . you cannot acheive this in a queue. It will break the functionality of a queue.","body":"Queue is FIFO . you cannot acheive this in a queue. It will break the functionality of a queue."},{"owner":{"account_id":153021,"reputation":8348,"user_id":367988,"accept_rate":71,"display_name":"Basil Musa"},"score":0,"creation_date":1510223778,"post_id":22453755,"comment_id":81347673,"body_markdown":"Use LinkedList. It&#39;s a perfect queue that can be accessed from the middle.","body":"Use LinkedList. It&#39;s a perfect queue that can be accessed from the middle."}],"answers":[{"tags":[],"owner":{"account_id":3377640,"reputation":1844,"user_id":2835475,"display_name":"RKC"},"down_vote_count":0,"up_vote_count":9,"is_accepted":false,"score":9,"last_activity_date":1395057834,"creation_date":1395057834,"answer_id":22453799,"question_id":22453755,"body_markdown":"Accessing elements by index is not part of the concept of a queue.\r\n\r\nIf you need to access elements by index, you want a list, not a queue.","title":"How to get a particular element from Queue?","body":"<p>Accessing elements by index is not part of the concept of a queue.</p>\n\n<p>If you need to access elements by index, you want a list, not a queue.</p>\n"},{"tags":[],"owner":{"account_id":441424,"reputation":10612,"user_id":831507,"accept_rate":100,"display_name":"Vlad"},"down_vote_count":0,"up_vote_count":6,"is_accepted":true,"score":6,"last_activity_date":1395059199,"creation_date":1395059199,"answer_id":22454237,"question_id":22453755,"body_markdown":"You can remove elements from the Queue until you reach the needed one. You can re-add the removed elements at the end of the queue or put them in a different queue (and add the rest after you reached the needed element).\r\n\r\nYou really shouldn&#39;t be using a Queue like that, though!\r\n\r\n\tpublic static &lt;T&gt; T get(Queue&lt;T&gt; queue, int index) {\r\n\t\tsynchronized (queue) {\r\n\t\t\tif (queue == null) {\r\n\t\t\t\treturn null;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tint size = queue.size();\r\n\t\t\tif (index &lt; 0 || size &lt; index + 1) {\r\n\t\t\t\treturn null;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tT element = null;\r\n\t\t\tfor (int i = 0; i &lt; size; i++) {\r\n\t\t\t\tif (i == index) {\r\n\t\t\t\t\telement = queue.remove();\r\n\t\t\t\t} else {\r\n\t\t\t\t\tqueue.add(queue.remove());\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\treturn element;\t\t\r\n\t\t}\r\n\t}\r\n","title":"How to get a particular element from Queue?","body":"<p>You can remove elements from the Queue until you reach the needed one. You can re-add the removed elements at the end of the queue or put them in a different queue (and add the rest after you reached the needed element).</p>\n\n<p>You really shouldn't be using a Queue like that, though!</p>\n\n<pre><code>public static &lt;T&gt; T get(Queue&lt;T&gt; queue, int index) {\n    synchronized (queue) {\n        if (queue == null) {\n            return null;\n        }\n\n        int size = queue.size();\n        if (index &lt; 0 || size &lt; index + 1) {\n            return null;\n        }\n\n        T element = null;\n        for (int i = 0; i &lt; size; i++) {\n            if (i == index) {\n                element = queue.remove();\n            } else {\n                queue.add(queue.remove());\n            }\n        }\n\n        return element;     \n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2820145,"reputation":1610,"user_id":2424073,"accept_rate":80,"display_name":"MyPasswordIsLasercats"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1395059472,"creation_date":1395059472,"answer_id":22454325,"question_id":22453755,"body_markdown":"    public static &lt;T&gt; T getFromQueue(Queue&lt;T&gt; queue, int index){\r\n        if(index&gt;=queue.size()){\r\n            throw new IndexOutOfBoundsException(&quot;index=&quot;+index+&quot;,size=&quot;+queue.size());\r\n        }\r\n        Queue&lt;T&gt; queueCopy = new LinkedList&lt;T&gt;(queue);\r\n        for(int i=0; i&lt;index; i++){\r\n            queueCopy.remove();\r\n        }\r\n        return queueCopy.peek();\r\n    }","title":"How to get a particular element from Queue?","body":"<pre><code>public static &lt;T&gt; T getFromQueue(Queue&lt;T&gt; queue, int index){\n    if(index&gt;=queue.size()){\n        throw new IndexOutOfBoundsException(\"index=\"+index+\",size=\"+queue.size());\n    }\n    Queue&lt;T&gt; queueCopy = new LinkedList&lt;T&gt;(queue);\n    for(int i=0; i&lt;index; i++){\n        queueCopy.remove();\n    }\n    return queueCopy.peek();\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3005685,"reputation":1397,"user_id":2550273,"accept_rate":50,"display_name":"Rustam"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1395059987,"creation_date":1395059987,"answer_id":22454530,"question_id":22453755,"body_markdown":"\tpublic static Object retrieveElement(int index, Queue q) {\r\n\t\tIterator it = q.iterator();\r\n\t\tint count = 0;\r\n\t\twhile (it.hasNext()) {\r\n\t\t\tObject e = it.next();\r\n\t\t\tif (count == index) {\r\n\t\t\t\tit.remove();\r\n\t\t\t\treturn e;\r\n\t\t\t}\r\n\t\t\tcount++;\r\n\t\t}\r\n\t\treturn null;\r\n\t}\r\n","title":"How to get a particular element from Queue?","body":"<pre><code>public static Object retrieveElement(int index, Queue q) {\n    Iterator it = q.iterator();\n    int count = 0;\n    while (it.hasNext()) {\n        Object e = it.next();\n        if (count == index) {\n            it.remove();\n            return e;\n        }\n        count++;\n    }\n    return null;\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":6172101,"reputation":1231,"user_id":4810113,"accept_rate":29,"display_name":"staticx"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1445398248,"creation_date":1445398248,"answer_id":33250442,"question_id":22453755,"body_markdown":"    private static  List&lt;Individual&gt; queueToList(Queue&lt;Individual&gt; archive) {\r\n    \t  List&lt;Individual&gt; list = new LinkedList&lt;Individual&gt;();\r\n          Iterator&lt;Individual&gt; it = archive.iterator();\r\n          while(it.hasNext()){\r\n             list.add(it.next());\r\n          }\r\n        return list;\r\n    }","title":"How to get a particular element from Queue?","body":"<pre><code>private static  List&lt;Individual&gt; queueToList(Queue&lt;Individual&gt; archive) {\n      List&lt;Individual&gt; list = new LinkedList&lt;Individual&gt;();\n      Iterator&lt;Individual&gt; it = archive.iterator();\n      while(it.hasNext()){\n         list.add(it.next());\n      }\n    return list;\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":11026677,"reputation":19,"user_id":8099365,"display_name":"Zachary Galica"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1496340330,"creation_date":1496340330,"answer_id":44314308,"question_id":22453755,"body_markdown":"Queues operate in a first in first out (FIFO) manner therefore in order to access a particular element the elements must be removed and stored in a secondary queue until the element being searched for is identified \r\n","title":"How to get a particular element from Queue?","body":"<p>Queues operate in a first in first out (FIFO) manner therefore in order to access a particular element the elements must be removed and stored in a secondary queue until the element being searched for is identified </p>\n"},{"tags":[],"owner":{"account_id":15901808,"reputation":51,"user_id":11473991,"display_name":"Nirmal Lamrin"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1557918770,"creation_date":1557918770,"answer_id":56148004,"question_id":22453755,"body_markdown":"Basically the concept of Queue is FIFO(First In First Out).So accessing the particular index or the element in the queue is not possible. The other way is to get a particular element you need to delete it unless and until you get it.  ","title":"How to get a particular element from Queue?","body":"<p>Basically the concept of Queue is FIFO(First In First Out).So accessing the particular index or the element in the queue is not possible. The other way is to get a particular element you need to delete it unless and until you get it.  </p>\n"},{"tags":[],"owner":{"account_id":173074,"reputation":419,"user_id":401529,"accept_rate":80,"display_name":"Lyoneel"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1686257114,"creation_date":1686256648,"answer_id":76435528,"question_id":22453755,"body_markdown":"As many others said, if you are writing something from scratch you may have a wrong approach.\r\n\r\nI had to refactor a legacy application and for different reasons that I&#39;m not willing to share I&#39;ve got the same problem.\r\n\r\nI solved using the following:\r\n\r\n    Queue&lt;String&gt; queue = new LinkedList&lt;&gt;();\r\n    String element = new ArrayList&lt;String&gt;(queue).get(desiredIndex);\r\n    \r\n    // if you are sure there is no null elements you can do the following\r\n    String[] element = queue.toArray()[desiredIndex]\r\n\r\nAnd I know is not a cheap operation, In my case I&#39;m restricting the size of the queue a &lt; 3 to avoid huge performance hits.\r\n\r\nThe idea of removing and re-adding to queue like others suggested is okay if the order does not matter, but in my specific problem it does.\r\n","title":"How to get a particular element from Queue?","body":"<p>As many others said, if you are writing something from scratch you may have a wrong approach.</p>\n<p>I had to refactor a legacy application and for different reasons that I'm not willing to share I've got the same problem.</p>\n<p>I solved using the following:</p>\n<pre><code>Queue&lt;String&gt; queue = new LinkedList&lt;&gt;();\nString element = new ArrayList&lt;String&gt;(queue).get(desiredIndex);\n\n// if you are sure there is no null elements you can do the following\nString[] element = queue.toArray()[desiredIndex]\n</code></pre>\n<p>And I know is not a cheap operation, In my case I'm restricting the size of the queue a &lt; 3 to avoid huge performance hits.</p>\n<p>The idea of removing and re-adding to queue like others suggested is okay if the order does not matter, but in my specific problem it does.</p>\n"},{"tags":[],"owner":{"account_id":29842646,"reputation":1,"user_id":22870440,"display_name":"Felix"},"down_vote_count":2,"up_vote_count":0,"is_accepted":false,"score":-2,"last_activity_date":1699350679,"creation_date":1699326028,"answer_id":77435319,"question_id":22453755,"body_markdown":"10 years late, but I was just looking for the same thing. It looks like since the underlying implementation of a regular queue in java is a linked list you can get a specific indexed element by doing something like:\r\n```java\r\nqueue.peek()[index]\r\n```","title":"How to get a particular element from Queue?","body":"<p>10 years late, but I was just looking for the same thing. It looks like since the underlying implementation of a regular queue in java is a linked list you can get a specific indexed element by doing something like:</p>\n<pre class=\"lang-java prettyprint-override\"><code>queue.peek()[index]\n</code></pre>\n"}],"owner":{"account_id":1766264,"reputation":555,"user_id":1612078,"accept_rate":56,"display_name":"user1612078"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":59082,"favorite_count":0,"down_vote_count":0,"up_vote_count":7,"accepted_answer_id":22454237,"answer_count":9,"score":7,"last_activity_date":1699350679,"creation_date":1395057685,"question_id":22453755,"body_markdown":"Unlike `ArrayList`, there is no `get(int index)` method in `Queue` to retrieve the element at specified position.\r\n\r\nAnybody please tell me how to achieve this in `Queue`?\r\n\r\nThanks.","title":"How to get a particular element from Queue?","body":"<p>Unlike <code>ArrayList</code>, there is no <code>get(int index)</code> method in <code>Queue</code> to retrieve the element at specified position.</p>\n\n<p>Anybody please tell me how to achieve this in <code>Queue</code>?</p>\n\n<p>Thanks.</p>\n"},{"tags":["java","sql-server","spring","hibernate"],"comments":[{"owner":{"account_id":166167,"reputation":8075,"user_id":390122,"accept_rate":75,"display_name":"AlwaysLearning"},"score":0,"creation_date":1585711322,"post_id":60961725,"comment_id":107855654,"body_markdown":"Isn&#39;t this sort of thing a presentation concern? i.e.: wouldn&#39;t the data grid in your GUI have sort ordering on its column headers or some other UI gadget?","body":"Isn&#39;t this sort of thing a presentation concern? i.e.: wouldn&#39;t the data grid in your GUI have sort ordering on its column headers or some other UI gadget?"},{"owner":{"account_id":18852673,"reputation":632,"user_id":13751442,"display_name":"Peter Bergman"},"score":0,"creation_date":1697409871,"post_id":60961725,"comment_id":136272866,"body_markdown":"@AlwaysLearning If the application is using pagination, sorting is not just a presentation concern. Sorting by a given column in the UI vs in the database/back-end could give different results.","body":"@AlwaysLearning If the application is using pagination, sorting is not just a presentation concern. Sorting by a given column in the UI vs in the database/back-end could give different results."},{"owner":{"account_id":166167,"reputation":8075,"user_id":390122,"accept_rate":75,"display_name":"AlwaysLearning"},"score":1,"creation_date":1697424551,"post_id":60961725,"comment_id":136273801,"body_markdown":"@PeterBergman and yet there are no `OFFSET` and `FETCH NEXT` keywords in the `ORDER BY` clause so pagination doesn&#39;t apply. Ref: [Specifying integer constants for OFFSET and FETCH values](https://learn.microsoft.com/en-us/sql/t-sql/queries/select-order-by-clause-transact-sql#a-specifying-integer-constants-for-offset-and-fetch-values)","body":"@PeterBergman and yet there are no <code>OFFSET</code> and <code>FETCH NEXT</code> keywords in the <code>ORDER BY</code> clause so pagination doesn&#39;t apply. Ref: <a href=\"https://learn.microsoft.com/en-us/sql/t-sql/queries/select-order-by-clause-transact-sql#a-specifying-integer-constants-for-offset-and-fetch-values\" rel=\"nofollow noreferrer\">Specifying integer constants for OFFSET and FETCH values</a>"}],"answers":[{"tags":[],"owner":{"account_id":26514262,"reputation":1,"user_id":20149031,"display_name":"Leo"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1699350586,"creation_date":1697006035,"answer_id":77270672,"question_id":60961725,"body_markdown":"I don&#39;t think it&#39;s possible for native query, you can use JPA anyway but if you really wanna use native query?\r\nUse different methoads one for ASC and one for DESC and hardcode the sortOrder","title":"Asc/Desc sort order as parameter in native query in Spring boot and Hibernate application with SQL Server","body":"<p>I don't think it's possible for native query, you can use JPA anyway but if you really wanna use native query?\nUse different methoads one for ASC and one for DESC and hardcode the sortOrder</p>\n"}],"owner":{"account_id":402403,"reputation":185,"user_id":769552,"accept_rate":0,"display_name":"user769552"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":345,"favorite_count":0,"down_vote_count":1,"up_vote_count":2,"answer_count":1,"score":1,"last_activity_date":1699350586,"creation_date":1585699400,"question_id":60961725,"body_markdown":"I have Spring boot, Hibernate, and SQL Server.\r\n\r\nWe use Native queries and they are very big, so I can&#39;t rewrite them in JPQL or HQL.\r\nI need a way to make the sort order dynamic, I have a query similar to this:\r\n\r\n    select * from (select 1 as id, &#39;Max&#39; as name\r\n\tunion \r\n\tselect 2 as id, &#39;Mike&#39; as name) as a\r\n\torder by a.id :sortOrder\r\n\r\n:sortOrder hibernate changes to `?` so I&#39;m getting `order by a.id ?`&lt;br&gt;\r\n:sortOrder should be `asc` or `desc`, but I&#39;m getting an error:\r\n\r\n&gt; com.microsoft.sqlserver.jdbc.SQLServerException: Incorrect syntax near &#39;@P1&#39;\r\n\r\nHow can I make sort order dynamic?\r\n","title":"Asc/Desc sort order as parameter in native query in Spring boot and Hibernate application with SQL Server","body":"<p>I have Spring boot, Hibernate, and SQL Server.</p>\n<p>We use Native queries and they are very big, so I can't rewrite them in JPQL or HQL.\nI need a way to make the sort order dynamic, I have a query similar to this:</p>\n<pre><code>select * from (select 1 as id, 'Max' as name\nunion \nselect 2 as id, 'Mike' as name) as a\norder by a.id :sortOrder\n</code></pre>\n<p>:sortOrder hibernate changes to <code>?</code> so I'm getting <code>order by a.id ?</code><br>\n:sortOrder should be <code>asc</code> or <code>desc</code>, but I'm getting an error:</p>\n<blockquote>\n<p>com.microsoft.sqlserver.jdbc.SQLServerException: Incorrect syntax near '@P1'</p>\n</blockquote>\n<p>How can I make sort order dynamic?</p>\n"},{"tags":["java","hibernate","hibernate-mapping","hbmxml","mappingexception"],"owner":{"account_id":29839787,"reputation":3,"user_id":22868324,"display_name":"paula"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":1,"is_answered":false,"view_count":37,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1699350518,"creation_date":1699349046,"question_id":77436977,"body_markdown":"I try to put some Objects in my MySql Database but I am stuck with the\r\n\r\n    org.hibernate.MappingException: Could not resolve named type : String \r\n\r\nI tried to isolate the code which throws the exception and it seems there is a problem with my hbm.xml files.\r\n- It throws the exception when I comment out the actual transaction which means data should not be the problem.\r\n- If I comment out all mapping sources and transactions there is no exception. \r\n- Comment out all but one mapping source it throws the exception (tried it with all sourcess).\r\n- I checked, all files are UTF-8 encoding.\r\n\r\n---\r\n\r\n\r\nOf course I will provide more code if you need it. Those are xml files I use:\r\n```\r\n*hibernate log *\r\nException in thread &quot;main&quot; org.hibernate.MappingException: Could not resolve named type : String\r\n\tat org.hibernate.mapping.BasicValue.interpretExplicitlyNamedType(BasicValue.java:709)\r\n\tat org.hibernate.mapping.BasicValue.buildResolution(BasicValue.java:402)\r\n\tat org.hibernate.mapping.BasicValue.resolve(BasicValue.java:314)\r\n\tat org.hibernate.mapping.BasicValue.resolve(BasicValue.java:304)\r\n\tat org.hibernate.boot.internal.InFlightMetadataCollectorImpl.lambda$processValueResolvers$4(InFlightMetadataCollectorImpl.java:1800)\r\n\tat java.base/java.util.ArrayList.removeIf(ArrayList.java:1682)\r\n\tat java.base/java.util.ArrayList.removeIf(ArrayList.java:1660)\r\n\tat org.hibernate.boot.internal.InFlightMetadataCollectorImpl.processValueResolvers(InFlightMetadataCollectorImpl.java:1799)\r\n\tat org.hibernate.boot.internal.InFlightMetadataCollectorImpl.processSecondPasses(InFlightMetadataCollectorImpl.java:1785)\r\n\tat org.hibernate.boot.model.process.spi.MetadataBuildingProcess.complete(MetadataBuildingProcess.java:331)\r\n\tat org.hibernate.boot.model.process.spi.MetadataBuildingProcess.build(MetadataBuildingProcess.java:128)\r\n\tat org.hibernate.boot.internal.MetadataBuilderImpl.build(MetadataBuilderImpl.java:451)\r\n\tat org.hibernate.boot.internal.MetadataBuilderImpl.build(MetadataBuilderImpl.java:102)\r\n\tat org.hibernate.cfg.Configuration.buildSessionFactory(Configuration.java:910)\r\n\tat org.hibernate.cfg.Configuration.buildSessionFactory(Configuration.java:960)\r\n\tat problem.Insert.main(Insert.java:39)\r\n```\r\n\r\n\r\nhibernate.cfg.xml\r\n```\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n&lt;!DOCTYPE hibernate-configuration PUBLIC\r\n\t\t&quot;-//Hibernate/Hibernate Configuration DTD 3.0//EN&quot;\r\n\t\t&quot;http://www.hibernate.org/dtd/hibernate-configuration-3.0.dtd&quot;&gt;\r\n&lt;hibernate-configuration&gt;\r\n    &lt;session-factory&gt;\r\n        &lt;property name=&quot;hibernate.connection.driver_class&quot;&gt;XXX&lt;/property&gt;\r\n        &lt;property name=&quot;hibernate.connection.password&quot;&gt;XXX&lt;/property&gt;\r\n        &lt;property name=&quot;hibernate.connection.url&quot;&gt;XXX&lt;/property&gt;\r\n        &lt;property name=&quot;hibernate.connection.username&quot;&gt;XXX&lt;/property&gt;\r\n        &lt;property name=&quot;hibernate.dialect&quot;&gt;org.hibernate.dialect.MySQLDialect&lt;/property&gt;\r\n   \r\n        &lt;property name=&quot;hbm2ddl.auto&quot;&gt;update&lt;/property&gt;\r\n        \r\n        &lt;property name=&quot;show_sql&quot;&gt;true&lt;/property&gt;\r\n        \r\n        &lt;mapping resource = &quot;Alien.hbm.xml&quot; /&gt;\r\n        &lt;mapping resource = &quot;AlienFood.hbm.xml&quot; /&gt; \r\n        &lt;mapping resource = &quot;AlienSpaceship.hbm.xml&quot; /&gt;\r\n        \r\n        \r\n    &lt;/session-factory&gt;\r\n&lt;/hibernate-configuration&gt;\r\n```\r\n\r\nAlien.hbm.xml\r\n```\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n&lt;!DOCTYPE hibernate-mapping PUBLIC &quot;-//Hibernate/Hibernate Mapping DTD 3.0//EN&quot; &quot;http://hibernate.sourceforge.net/hibernate-mapping-3.0.dtd&quot; &gt;\r\n&lt;hibernate-mapping&gt;\r\n\t&lt;class name=&quot;problem.Alien&quot; table=&quot;alien&quot;&gt;\r\n\t\t&lt;meta attribute=&quot;class description&quot;&gt;\r\n\t\t&lt;/meta&gt;\r\n\t\t&lt;id name=&quot;aid&quot; type=&quot;int&quot; column=&quot;aid&quot;&gt;\r\n\t\t\t&lt;generator class=&quot;native&quot; /&gt;\r\n\t\t&lt;/id&gt;\r\n\r\n\t\t&lt;property name=&quot;acolour&quot; column=&quot;acolour&quot; type=&quot;String&quot; /&gt;\r\n\t\t\r\n\t\t&lt;many-to-one name=&quot;spaceships&quot; column=&quot;spaceship_sID&quot;\r\n\t\t\tclass=&quot;problem.AlienSpaceship&quot; /&gt;\r\n\r\n\t&lt;/class&gt;\r\n&lt;/hibernate-mapping&gt;\r\n```\r\n\r\nAlienFood.hbm.xml\r\n\r\n```\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n&lt;!DOCTYPE hibernate-mapping PUBLIC &quot;-//Hibernate/Hibernate Mapping DTD 3.0//EN&quot; &quot;http://hibernate.sourceforge.net/hibernate-mapping-3.0.dtd&quot; &gt;\r\n&lt;hibernate-mapping&gt;\r\n\r\n\t&lt;class name=&quot;problem.AlienFood&quot; table=&quot;alienfood&quot;&gt;\r\n\t\t&lt;meta attribute=&quot;class description&quot;&gt;\r\n\t\t&lt;/meta&gt;\r\n\t\t\r\n\t\t&lt;id name=&quot;fid&quot; type=&quot;int&quot; column=&quot;fid&quot;&gt;\r\n\t\t\t&lt;generator class=&quot;native&quot; /&gt;\r\n\t\t&lt;/id&gt;\r\n\r\n\t\t&lt;property name=&quot;fname&quot; column=&quot;fname&quot; type=&quot;String&quot; /&gt;\r\n\r\n\t\t&lt;set name=&quot;aliens&quot; cascade=&quot;save-update&quot;\r\n\t\t\ttable=&quot;alien_alienfood&quot;&gt;\r\n\t\t\t&lt;key column=&quot;aid&quot; /&gt;\r\n\t\t\t&lt;many-to-many column=&quot;aid&quot; class=&quot;problem.Alien&quot; /&gt;\r\n\t\t&lt;/set&gt;\r\n\r\n\t&lt;/class&gt;\r\n\r\n&lt;/hibernate-mapping&gt;\r\n```\r\n\r\nAlienSpaceship.hbm.xml\r\n\r\n```\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n&lt;!DOCTYPE hibernate-mapping PUBLIC &quot;-//Hibernate/Hibernate Mapping DTD 3.0//EN&quot; &quot;http://hibernate.sourceforge.net/hibernate-mapping-3.0.dtd&quot; &gt;\r\n&lt;hibernate-mapping&gt;\r\n\r\n&lt;class name=&quot;problem.AlienSpaceship&quot; table=&quot;alienspaceship&quot;&gt;\r\n\t\t&lt;meta attribute=&quot;class description&quot;&gt;\r\n\t\t&lt;/meta&gt;\r\n\t\t\r\n\t\t&lt;id name=&quot;sID&quot; type=&quot;int&quot; column=&quot;sID&quot;&gt;\r\n\t\t\t&lt;generator class=&quot;native&quot; /&gt;\r\n\t\t&lt;/id&gt;\r\n\r\n\t\t&lt;property name=&quot;sName&quot; column=&quot;sName&quot; type=&quot;String&quot; /&gt;\r\n\t\t&lt;property name =&quot;sCooless&quot; column=&quot;sCoolness&quot; type=&quot;String&quot; /&gt;\r\n\r\n\t&lt;/class&gt;\r\n&lt;/hibernate-mapping&gt;\r\n```\r\n\r\n","title":"org.hibernate.MappingException: Could not resolve named type : String","body":"<p>I try to put some Objects in my MySql Database but I am stuck with the</p>\n<pre><code>org.hibernate.MappingException: Could not resolve named type : String \n</code></pre>\n<p>I tried to isolate the code which throws the exception and it seems there is a problem with my hbm.xml files.</p>\n<ul>\n<li>It throws the exception when I comment out the actual transaction which means data should not be the problem.</li>\n<li>If I comment out all mapping sources and transactions there is no exception.</li>\n<li>Comment out all but one mapping source it throws the exception (tried it with all sourcess).</li>\n<li>I checked, all files are UTF-8 encoding.</li>\n</ul>\n<hr />\n<p>Of course I will provide more code if you need it. Those are xml files I use:</p>\n<pre><code>*hibernate log *\nException in thread &quot;main&quot; org.hibernate.MappingException: Could not resolve named type : String\n    at org.hibernate.mapping.BasicValue.interpretExplicitlyNamedType(BasicValue.java:709)\n    at org.hibernate.mapping.BasicValue.buildResolution(BasicValue.java:402)\n    at org.hibernate.mapping.BasicValue.resolve(BasicValue.java:314)\n    at org.hibernate.mapping.BasicValue.resolve(BasicValue.java:304)\n    at org.hibernate.boot.internal.InFlightMetadataCollectorImpl.lambda$processValueResolvers$4(InFlightMetadataCollectorImpl.java:1800)\n    at java.base/java.util.ArrayList.removeIf(ArrayList.java:1682)\n    at java.base/java.util.ArrayList.removeIf(ArrayList.java:1660)\n    at org.hibernate.boot.internal.InFlightMetadataCollectorImpl.processValueResolvers(InFlightMetadataCollectorImpl.java:1799)\n    at org.hibernate.boot.internal.InFlightMetadataCollectorImpl.processSecondPasses(InFlightMetadataCollectorImpl.java:1785)\n    at org.hibernate.boot.model.process.spi.MetadataBuildingProcess.complete(MetadataBuildingProcess.java:331)\n    at org.hibernate.boot.model.process.spi.MetadataBuildingProcess.build(MetadataBuildingProcess.java:128)\n    at org.hibernate.boot.internal.MetadataBuilderImpl.build(MetadataBuilderImpl.java:451)\n    at org.hibernate.boot.internal.MetadataBuilderImpl.build(MetadataBuilderImpl.java:102)\n    at org.hibernate.cfg.Configuration.buildSessionFactory(Configuration.java:910)\n    at org.hibernate.cfg.Configuration.buildSessionFactory(Configuration.java:960)\n    at problem.Insert.main(Insert.java:39)\n</code></pre>\n<p>hibernate.cfg.xml</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;!DOCTYPE hibernate-configuration PUBLIC\n        &quot;-//Hibernate/Hibernate Configuration DTD 3.0//EN&quot;\n        &quot;http://www.hibernate.org/dtd/hibernate-configuration-3.0.dtd&quot;&gt;\n&lt;hibernate-configuration&gt;\n    &lt;session-factory&gt;\n        &lt;property name=&quot;hibernate.connection.driver_class&quot;&gt;XXX&lt;/property&gt;\n        &lt;property name=&quot;hibernate.connection.password&quot;&gt;XXX&lt;/property&gt;\n        &lt;property name=&quot;hibernate.connection.url&quot;&gt;XXX&lt;/property&gt;\n        &lt;property name=&quot;hibernate.connection.username&quot;&gt;XXX&lt;/property&gt;\n        &lt;property name=&quot;hibernate.dialect&quot;&gt;org.hibernate.dialect.MySQLDialect&lt;/property&gt;\n   \n        &lt;property name=&quot;hbm2ddl.auto&quot;&gt;update&lt;/property&gt;\n        \n        &lt;property name=&quot;show_sql&quot;&gt;true&lt;/property&gt;\n        \n        &lt;mapping resource = &quot;Alien.hbm.xml&quot; /&gt;\n        &lt;mapping resource = &quot;AlienFood.hbm.xml&quot; /&gt; \n        &lt;mapping resource = &quot;AlienSpaceship.hbm.xml&quot; /&gt;\n        \n        \n    &lt;/session-factory&gt;\n&lt;/hibernate-configuration&gt;\n</code></pre>\n<p>Alien.hbm.xml</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;!DOCTYPE hibernate-mapping PUBLIC &quot;-//Hibernate/Hibernate Mapping DTD 3.0//EN&quot; &quot;http://hibernate.sourceforge.net/hibernate-mapping-3.0.dtd&quot; &gt;\n&lt;hibernate-mapping&gt;\n    &lt;class name=&quot;problem.Alien&quot; table=&quot;alien&quot;&gt;\n        &lt;meta attribute=&quot;class description&quot;&gt;\n        &lt;/meta&gt;\n        &lt;id name=&quot;aid&quot; type=&quot;int&quot; column=&quot;aid&quot;&gt;\n            &lt;generator class=&quot;native&quot; /&gt;\n        &lt;/id&gt;\n\n        &lt;property name=&quot;acolour&quot; column=&quot;acolour&quot; type=&quot;String&quot; /&gt;\n        \n        &lt;many-to-one name=&quot;spaceships&quot; column=&quot;spaceship_sID&quot;\n            class=&quot;problem.AlienSpaceship&quot; /&gt;\n\n    &lt;/class&gt;\n&lt;/hibernate-mapping&gt;\n</code></pre>\n<p>AlienFood.hbm.xml</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;!DOCTYPE hibernate-mapping PUBLIC &quot;-//Hibernate/Hibernate Mapping DTD 3.0//EN&quot; &quot;http://hibernate.sourceforge.net/hibernate-mapping-3.0.dtd&quot; &gt;\n&lt;hibernate-mapping&gt;\n\n    &lt;class name=&quot;problem.AlienFood&quot; table=&quot;alienfood&quot;&gt;\n        &lt;meta attribute=&quot;class description&quot;&gt;\n        &lt;/meta&gt;\n        \n        &lt;id name=&quot;fid&quot; type=&quot;int&quot; column=&quot;fid&quot;&gt;\n            &lt;generator class=&quot;native&quot; /&gt;\n        &lt;/id&gt;\n\n        &lt;property name=&quot;fname&quot; column=&quot;fname&quot; type=&quot;String&quot; /&gt;\n\n        &lt;set name=&quot;aliens&quot; cascade=&quot;save-update&quot;\n            table=&quot;alien_alienfood&quot;&gt;\n            &lt;key column=&quot;aid&quot; /&gt;\n            &lt;many-to-many column=&quot;aid&quot; class=&quot;problem.Alien&quot; /&gt;\n        &lt;/set&gt;\n\n    &lt;/class&gt;\n\n&lt;/hibernate-mapping&gt;\n</code></pre>\n<p>AlienSpaceship.hbm.xml</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;!DOCTYPE hibernate-mapping PUBLIC &quot;-//Hibernate/Hibernate Mapping DTD 3.0//EN&quot; &quot;http://hibernate.sourceforge.net/hibernate-mapping-3.0.dtd&quot; &gt;\n&lt;hibernate-mapping&gt;\n\n&lt;class name=&quot;problem.AlienSpaceship&quot; table=&quot;alienspaceship&quot;&gt;\n        &lt;meta attribute=&quot;class description&quot;&gt;\n        &lt;/meta&gt;\n        \n        &lt;id name=&quot;sID&quot; type=&quot;int&quot; column=&quot;sID&quot;&gt;\n            &lt;generator class=&quot;native&quot; /&gt;\n        &lt;/id&gt;\n\n        &lt;property name=&quot;sName&quot; column=&quot;sName&quot; type=&quot;String&quot; /&gt;\n        &lt;property name =&quot;sCooless&quot; column=&quot;sCoolness&quot; type=&quot;String&quot; /&gt;\n\n    &lt;/class&gt;\n&lt;/hibernate-mapping&gt;\n</code></pre>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":96837,"reputation":94466,"user_id":263004,"accept_rate":96,"display_name":"Vivin Paliath"},"score":10,"creation_date":1386179207,"post_id":20382286,"comment_id":30432281,"body_markdown":"Try it and see what happens.","body":"Try it and see what happens."},{"owner":{"account_id":1781636,"reputation":7670,"user_id":1624202,"accept_rate":61,"display_name":"Cruncher"},"score":3,"creation_date":1386179316,"post_id":20382286,"comment_id":30432352,"body_markdown":"I had similar questions about a week ago, of whether or not the class loader would load this class and run the static block. Do you know what I did? Exactly what @VivinPaliath suggests.","body":"I had similar questions about a week ago, of whether or not the class loader would load this class and run the static block. Do you know what I did? Exactly what @VivinPaliath suggests."}],"answers":[{"tags":[],"owner":{"account_id":296495,"reputation":17580,"user_id":601493,"accept_rate":73,"display_name":"Jan Zyka"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1386179221,"creation_date":1386179221,"answer_id":20382312,"question_id":20382286,"body_markdown":"This will be printed when the class will be loaded by the classloader.\r\n\r\n__More info:__\r\n\r\nThe class as it is has no sense as it will not run anything. But given the static blocks are called on loading the class by classloader there might still exist another class which references this class - this will happen `demo` will be loaded by classloader and the static block executed.\r\n\r\n","title":"Java class without main method will run?","body":"<p>This will be printed when the class will be loaded by the classloader.</p>\n\n<p><strong>More info:</strong></p>\n\n<p>The class as it is has no sense as it will not run anything. But given the static blocks are called on loading the class by classloader there might still exist another class which references this class - this will happen <code>demo</code> will be loaded by classloader and the static block executed.</p>\n"},{"tags":[],"owner":{"account_id":2177190,"reputation":1488,"user_id":1927577,"accept_rate":38,"display_name":"A.M.N.Bandara"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1386179336,"creation_date":1386179336,"answer_id":20382352,"question_id":20382286,"body_markdown":"This will complile since there are no sytax errors. However, the execution of a java program starts with the main method. Since you have no main method, you have no way to run System.out.println method.","title":"Java class without main method will run?","body":"<p>This will complile since there are no sytax errors. However, the execution of a java program starts with the main method. Since you have no main method, you have no way to run System.out.println method.</p>\n"},{"tags":[],"owner":{"account_id":422964,"reputation":33654,"user_id":802050,"accept_rate":89,"display_name":"M Sach"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1386179376,"creation_date":1386179376,"answer_id":20382366,"question_id":20382286,"body_markdown":"&gt; Can we compile this java class?\r\n\r\n \r\n\r\nYes\r\n\r\n&gt; Note we don&#39;t have a main method in this class.\r\n\r\n \r\nMain is the starting point for any programme and required to actually run it\r\n\r\n    Is there any way we can print the message &quot;Hello&quot; which is there in the class?\r\n\r\nAs you used static block,this will be printed when the class loading. So your programme is sufficient for this but will do it class loading","title":"Java class without main method will run?","body":"<blockquote>\n  <p>Can we compile this java class?</p>\n</blockquote>\n\n<p>Yes</p>\n\n<blockquote>\n  <p>Note we don't have a main method in this class.</p>\n</blockquote>\n\n<p>Main is the starting point for any programme and required to actually run it</p>\n\n<pre><code>Is there any way we can print the message \"Hello\" which is there in the class?\n</code></pre>\n\n<p>As you used static block,this will be printed when the class loading. So your programme is sufficient for this but will do it class loading</p>\n"},{"tags":[],"owner":{"account_id":970,"reputation":399857,"user_id":1288,"accept_rate":93,"display_name":"Bill the Lizard"},"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1386179383,"creation_date":1386179383,"answer_id":20382371,"question_id":20382286,"body_markdown":"&gt; Q1. can we compile this java class? Note we don&#39;t have a main method in this class.\r\n\r\nYes, that class should compile. There&#39;s no requirement that says you need a `main` method in every class for it to compile. (Most of your classes won&#39;t have their own `main` method.)\r\n\r\n&gt; Q2. Is there any way we can print the message &quot;Hello&quot; which is there in the class?\r\n\r\nYes, you can load the class in another class that does have a `main` method.  When your class loads the [static initializer block][1] will be executed, and the message will be printed.\r\n\r\n\r\n  [1]: http://docs.oracle.com/javase/specs/jls/se7/html/jls-8.html#jls-8.7","title":"Java class without main method will run?","body":"<blockquote>\n  <p>Q1. can we compile this java class? Note we don't have a main method in this class.</p>\n</blockquote>\n\n<p>Yes, that class should compile. There's no requirement that says you need a <code>main</code> method in every class for it to compile. (Most of your classes won't have their own <code>main</code> method.)</p>\n\n<blockquote>\n  <p>Q2. Is there any way we can print the message \"Hello\" which is there in the class?</p>\n</blockquote>\n\n<p>Yes, you can load the class in another class that does have a <code>main</code> method.  When your class loads the <a href=\"http://docs.oracle.com/javase/specs/jls/se7/html/jls-8.html#jls-8.7\" rel=\"nofollow\">static initializer block</a> will be executed, and the message will be printed.</p>\n"},{"tags":[],"owner":{"account_id":23121,"reputation":527336,"user_id":57695,"accept_rate":75,"display_name":"Peter Lawrey"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1386181229,"creation_date":1386181229,"answer_id":20382905,"question_id":20382286,"body_markdown":"This code will not run on Java 7.  Java 7 checks for the presence of a main method before initialising the class.  It works on Java 6.\r\n\r\nBTW Try this on a Windows machine\r\n\r\ncreate a file called A.java\r\n\r\n    class Con {\r\n        static String hi = &quot;\\n\\nHello World!\\n\\n&quot;;\r\n    }\r\n\r\nand just compile it\r\n\r\n    javac A.java\r\n\r\nand see what happens !! ;)","title":"Java class without main method will run?","body":"<p>This code will not run on Java 7.  Java 7 checks for the presence of a main method before initialising the class.  It works on Java 6.</p>\n\n<p>BTW Try this on a Windows machine</p>\n\n<p>create a file called A.java</p>\n\n<pre><code>class Con {\n    static String hi = \"\\n\\nHello World!\\n\\n\";\n}\n</code></pre>\n\n<p>and just compile it</p>\n\n<pre><code>javac A.java\n</code></pre>\n\n<p>and see what happens !! ;)</p>\n"},{"tags":[],"owner":{"account_id":26382179,"reputation":7,"user_id":20035256,"display_name":"Abhishek Rajpoot"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1699350470,"creation_date":1699291651,"answer_id":77433082,"question_id":20382286,"body_markdown":"Open command prompt and go to the location where the file is present.\r\n```\r\njavac YourClassName.java\r\n```\r\nIt will compile the program. Make the function and class as public. You can call it from any other function of another class.","title":"Java class without main method will run?","body":"<p>Open command prompt and go to the location where the file is present.</p>\n<pre><code>javac YourClassName.java\n</code></pre>\n<p>It will compile the program. Make the function and class as public. You can call it from any other function of another class.</p>\n"}],"owner":{"account_id":3361684,"reputation":855,"user_id":2823355,"accept_rate":46,"display_name":"786543214"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":5049,"favorite_count":0,"down_vote_count":7,"up_vote_count":1,"accepted_answer_id":20382371,"answer_count":6,"score":-6,"last_activity_date":1699350470,"creation_date":1386179139,"question_id":20382286,"body_markdown":"    class Demo{\r\n    \r\n        static {\r\n            System.out.print(&quot;Hello&quot;);\r\n        }\r\n    }\r\n    public class A{\r\n    \r\n        public static void main(String[] argc){\r\n            Demo demo = new Demo();\r\n        }\r\n    }\r\n\r\nQ1. can we compile this java class?\r\nNote we don&#39;t have a main method in this class.\r\nQ2. Is there any way we can print the message &quot;Hello&quot; which is there in the class?","title":"Java class without main method will run?","body":"<pre><code>class Demo{\n\n    static {\n        System.out.print(\"Hello\");\n    }\n}\npublic class A{\n\n    public static void main(String[] argc){\n        Demo demo = new Demo();\n    }\n}\n</code></pre>\n\n<p>Q1. can we compile this java class?\nNote we don't have a main method in this class.\nQ2. Is there any way we can print the message \"Hello\" which is there in the class?</p>\n"},{"tags":["java","multithreading","memory-leaks","jvm","metaspace"],"comments":[{"owner":{"account_id":372682,"reputation":22426,"user_id":721855,"display_name":"aled"},"score":0,"creation_date":1695219911,"post_id":77143364,"comment_id":135995548,"body_markdown":"Where is the custom annotation `@Script`?","body":"Where is the custom annotation <code>@Script</code>?"},{"owner":{"account_id":3211603,"reputation":289287,"user_id":2711488,"display_name":"Holger"},"score":1,"creation_date":1695317095,"post_id":77143364,"comment_id":136011654,"body_markdown":"Heres a similar acknowledged problem: https://bugs.openjdk.org/browse/JDK-8058296  The good news is, this security manager related stuff is going to vanish in a future release anyway.","body":"Heres a similar acknowledged problem: <a href=\"https://bugs.openjdk.org/browse/JDK-8058296\" rel=\"nofollow noreferrer\">bugs.openjdk.org/browse/JDK-8058296</a>  The good news is, this security manager related stuff is going to vanish in a future release anyway."}],"owner":{"account_id":15968441,"reputation":373,"user_id":11523294,"display_name":"Criwran"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":135,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1699350355,"creation_date":1695219469,"question_id":77143364,"body_markdown":"The application is written in java 8 and the app is run on `1.8.0_362`,`1.8.0_371`.\r\n\r\nI use custom classloader to hot load classes(let&#39;s call `script classes`), which are under the package `com.xxx.project1.script`\r\n\r\nMy custom classloader is:\r\n```\r\npublic class ScriptClassLoader extends URLClassLoader {\r\n    private String classPackage;\r\n    private ClassLoader defaultClassLoader;\r\n    private boolean dev;\r\n\r\n    public static ScriptClassLoader newInstance(URL[] urls, String classPackage, boolean dev) {\r\n        if (dev) {\r\n            urls = ((URLClassLoader)ScriptClassLoader.class.getClassLoader()).getURLs();\r\n        }\r\n\r\n        return new ScriptClassLoader(urls, classPackage, dev);\r\n    }\r\n\r\n    protected ScriptClassLoader(URL[] urls, String classPackage, boolean dev) {\r\n        super(urls);\r\n        this.classPackage = classPackage;\r\n        this.dev = dev;\r\n        this.defaultClassLoader = ScriptClassLoader.class.getClassLoader();\r\n    }\r\n\r\n    protected Class&lt;?&gt; loadClass(String name, boolean resolve) throws ClassNotFoundException {\r\n        if (!this.dev &amp;&amp; name.startsWith(this.classPackage)) {\r\n            Class&lt;?&gt; c = this.findLoadedClass(name);\r\n            if (c == null) {\r\n                c = this.findClass(name);\r\n            } \r\n\r\n            if (resolve) {\r\n                this.resolveClass(c);\r\n            }\r\n\r\n            return c;\r\n        } else {\r\n            return super.loadClass(name, resolve);\r\n        }\r\n    }\r\n}\r\n\r\n```\r\nRecently I found after reload `script classes`, the original `script classes` didn&#39;t get unloaded. The reason is when creating a new thread, it will hold a new context object(see `java.lang.Thread`):\r\n```\r\nthis.inheritedAccessControlContext =\r\n                acc != null ? acc : AccessController.getContext();\r\n```\r\nSo If a `script class` is created by such a thread, the object will hold the `ScriptClassLoader` object used to load the `script class`, causing this `ScriptClassLoader ` to be unable to be GC and thus unable to unload useless `script classes`.\r\n\r\nThe gc root strace:\r\n```\r\ncom.xxx.engine.script.ScriptClassLoader\r\n-classloader java.security.ProtectionDomain\r\n--[4] java.security.ProtectionDomain[7]\r\n---context java.security.AccessControlContext\r\n----inheritedAccessControlContext java.lang.Thread\r\n```\r\n\r\n```\r\nclass com.xxx.project1.script.impl.AdvanceXXXScript\r\n-java.lang.Object[160]\r\n--elementData java.util.Vector\r\n---classes com.xxx.engine.script.ScriptClassLoader\r\n----classloader java.security.ProtectionDomain\r\n-----[4]java.security.ProtectionDomain[7]\r\n------context java.security.AccessControlContext\r\n-------inheritedAccessControlContext java.lang.Thread\r\n```\r\n\r\nSince I&#39;m not clear about the use of `inheritedAccessControlContext` and it cannot be accessed from external class, the current solution is to initialize all core threads when creating the thread pool, avoiding thread creation triggered by `script classes`:\r\n```\r\npublic static ScheduledExecutorService newScheduledThreadPool(int coreSize, String namePrefix) {\r\n        ScheduledExecutorService service = Executors.newScheduledThreadPool(coreSize, new ThreadFactory() {\r\n            final AtomicInteger n = new AtomicInteger();\r\n            @Override\r\n            public Thread newThread(Runnable r) {\r\n                String name = namePrefix + &quot;-&quot; + n.incrementAndGet());\r\n                return new Thread(r, name);\r\n            }\r\n        });\r\n        ((ScheduledThreadPoolExecutor) service).prestartAllCoreThreads(); // initialize all core threads\r\n\r\n        return service;\r\n    }\r\n```\r\n\r\n\r\nBut there are still some hidden dangers. Because Java only loads classes when they are in use. Therefore, in some places, even if static constants are written, it is still possible for `script classes` to trigger creation, such as:\r\n```\r\nabstract public class Http {\r\n    private static final ScheduledExecutorService EXECUTOR = Executors.newScheduledThreadPool(16,\r\n            new ThreadFactory() {\r\n                private final AtomicInteger counter = new AtomicInteger(0);\r\n\r\n                @Override\r\n                public Thread newThread(Runnable r) {\r\n                    return new Thread(r, &quot;http-request-&quot; + counter.incrementAndGet());\r\n                }\r\n            }\r\n    );\r\n```\r\nIf it is the first time using this class in a `script class`, then it will undoubtedly return to the above problem. The current solution is to proactively call these class/methods outside of the script during program startup to trigger their initialization, for example:\r\n```\r\nprivate static void envirInit() {\r\n    Http.init();\r\n    DBUpdateUtil.init();\r\n}\r\n```\r\nIt seems stupid. Is there a better solution? Thanks in advance for any help.\r\n\r\n---\r\nUPDATE:\r\n\r\nI found setting `classloader` in `ProtectionDomain` in `inheritedAccessControlContext` to `null` works, but get no idea if it will cause any problem.\r\n\r\n        ClassLoader classLoader = RoleScript.getClass().getClassLoader(); // RoleScript is under the package:com.xxx.project1.script\r\n        try {\r\n            Vector&lt;Class&lt;?&gt;&gt; classes = (Vector&lt;Class&lt;?&gt;&gt;) org.apache.commons.lang3.reflect.FieldUtils.readDeclaredField(classLoader, &quot;classes&quot;, true);\r\n            for (Class&lt;?&gt; aClass : classes) {\r\n                FieldUtils.writeDeclaredField(aClass.getProtectionDomain(), &quot;classloader&quot;, null, true);\r\n            }\r\n        } catch (IllegalAccessException e) {\r\n            throw new RuntimeException(e);\r\n        }\r\n---\r\nThe subsequent post:\r\n[Does metaspace gc has some relevance with different MaxMetaspaceSize value?][1]\r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/77436545/does-metaspace-gc-has-some-relevance-with-different-maxmetaspacesize-value","title":"Metaspace memory leak caused by hot loading","body":"<p>The application is written in java 8 and the app is run on <code>1.8.0_362</code>,<code>1.8.0_371</code>.</p>\n<p>I use custom classloader to hot load classes(let's call <code>script classes</code>), which are under the package <code>com.xxx.project1.script</code></p>\n<p>My custom classloader is:</p>\n<pre><code>public class ScriptClassLoader extends URLClassLoader {\n    private String classPackage;\n    private ClassLoader defaultClassLoader;\n    private boolean dev;\n\n    public static ScriptClassLoader newInstance(URL[] urls, String classPackage, boolean dev) {\n        if (dev) {\n            urls = ((URLClassLoader)ScriptClassLoader.class.getClassLoader()).getURLs();\n        }\n\n        return new ScriptClassLoader(urls, classPackage, dev);\n    }\n\n    protected ScriptClassLoader(URL[] urls, String classPackage, boolean dev) {\n        super(urls);\n        this.classPackage = classPackage;\n        this.dev = dev;\n        this.defaultClassLoader = ScriptClassLoader.class.getClassLoader();\n    }\n\n    protected Class&lt;?&gt; loadClass(String name, boolean resolve) throws ClassNotFoundException {\n        if (!this.dev &amp;&amp; name.startsWith(this.classPackage)) {\n            Class&lt;?&gt; c = this.findLoadedClass(name);\n            if (c == null) {\n                c = this.findClass(name);\n            } \n\n            if (resolve) {\n                this.resolveClass(c);\n            }\n\n            return c;\n        } else {\n            return super.loadClass(name, resolve);\n        }\n    }\n}\n\n</code></pre>\n<p>Recently I found after reload <code>script classes</code>, the original <code>script classes</code> didn't get unloaded. The reason is when creating a new thread, it will hold a new context object(see <code>java.lang.Thread</code>):</p>\n<pre><code>this.inheritedAccessControlContext =\n                acc != null ? acc : AccessController.getContext();\n</code></pre>\n<p>So If a <code>script class</code> is created by such a thread, the object will hold the <code>ScriptClassLoader</code> object used to load the <code>script class</code>, causing this <code>ScriptClassLoader </code> to be unable to be GC and thus unable to unload useless <code>script classes</code>.</p>\n<p>The gc root strace:</p>\n<pre><code>com.xxx.engine.script.ScriptClassLoader\n-classloader java.security.ProtectionDomain\n--[4] java.security.ProtectionDomain[7]\n---context java.security.AccessControlContext\n----inheritedAccessControlContext java.lang.Thread\n</code></pre>\n<pre><code>class com.xxx.project1.script.impl.AdvanceXXXScript\n-java.lang.Object[160]\n--elementData java.util.Vector\n---classes com.xxx.engine.script.ScriptClassLoader\n----classloader java.security.ProtectionDomain\n-----[4]java.security.ProtectionDomain[7]\n------context java.security.AccessControlContext\n-------inheritedAccessControlContext java.lang.Thread\n</code></pre>\n<p>Since I'm not clear about the use of <code>inheritedAccessControlContext</code> and it cannot be accessed from external class, the current solution is to initialize all core threads when creating the thread pool, avoiding thread creation triggered by <code>script classes</code>:</p>\n<pre><code>public static ScheduledExecutorService newScheduledThreadPool(int coreSize, String namePrefix) {\n        ScheduledExecutorService service = Executors.newScheduledThreadPool(coreSize, new ThreadFactory() {\n            final AtomicInteger n = new AtomicInteger();\n            @Override\n            public Thread newThread(Runnable r) {\n                String name = namePrefix + &quot;-&quot; + n.incrementAndGet());\n                return new Thread(r, name);\n            }\n        });\n        ((ScheduledThreadPoolExecutor) service).prestartAllCoreThreads(); // initialize all core threads\n\n        return service;\n    }\n</code></pre>\n<p>But there are still some hidden dangers. Because Java only loads classes when they are in use. Therefore, in some places, even if static constants are written, it is still possible for <code>script classes</code> to trigger creation, such as:</p>\n<pre><code>abstract public class Http {\n    private static final ScheduledExecutorService EXECUTOR = Executors.newScheduledThreadPool(16,\n            new ThreadFactory() {\n                private final AtomicInteger counter = new AtomicInteger(0);\n\n                @Override\n                public Thread newThread(Runnable r) {\n                    return new Thread(r, &quot;http-request-&quot; + counter.incrementAndGet());\n                }\n            }\n    );\n</code></pre>\n<p>If it is the first time using this class in a <code>script class</code>, then it will undoubtedly return to the above problem. The current solution is to proactively call these class/methods outside of the script during program startup to trigger their initialization, for example:</p>\n<pre><code>private static void envirInit() {\n    Http.init();\n    DBUpdateUtil.init();\n}\n</code></pre>\n<p>It seems stupid. Is there a better solution? Thanks in advance for any help.</p>\n<hr />\n<p>UPDATE:</p>\n<p>I found setting <code>classloader</code> in <code>ProtectionDomain</code> in <code>inheritedAccessControlContext</code> to <code>null</code> works, but get no idea if it will cause any problem.</p>\n<pre><code>    ClassLoader classLoader = RoleScript.getClass().getClassLoader(); // RoleScript is under the package:com.xxx.project1.script\n    try {\n        Vector&lt;Class&lt;?&gt;&gt; classes = (Vector&lt;Class&lt;?&gt;&gt;) org.apache.commons.lang3.reflect.FieldUtils.readDeclaredField(classLoader, &quot;classes&quot;, true);\n        for (Class&lt;?&gt; aClass : classes) {\n            FieldUtils.writeDeclaredField(aClass.getProtectionDomain(), &quot;classloader&quot;, null, true);\n        }\n    } catch (IllegalAccessException e) {\n        throw new RuntimeException(e);\n    }\n</code></pre>\n<hr />\n<p>The subsequent post:\n<a href=\"https://stackoverflow.com/questions/77436545/does-metaspace-gc-has-some-relevance-with-different-maxmetaspacesize-value\">Does metaspace gc has some relevance with different MaxMetaspaceSize value?</a></p>\n"},{"tags":["java","apache-camel","bouncycastle","pgp"],"owner":{"account_id":166413,"reputation":29,"user_id":14241735,"display_name":"dim5b"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":18,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1699350128,"creation_date":1699350128,"question_id":77437117,"body_markdown":"I have created a simple demo using Camel in order to encrypt/decrypt a PGP encrytion based file. The code is shown below.\r\n\r\n```\r\npackage com.example.demo;\r\n\r\nimport org.apache.camel.CamelContext;\r\nimport org.apache.camel.builder.RouteBuilder;\r\nimport org.apache.camel.converter.crypto.PGPDataFormat;\r\nimport org.apache.camel.impl.DefaultCamelContext;\r\nimport org.slf4j.Logger;\r\nimport org.slf4j.LoggerFactory;\r\n\r\npublic class PGPEncryptor {\r\n    static final Logger LOG = LoggerFactory.getLogger(PGPEncryptor.class);\r\n    final String originalPath = &quot;pgp/original&quot;;\r\n    final String encryptedPath = &quot;pgp/encrypted&quot;;\r\n    final String decryptedPath = &quot;pgp/decrypted&quot;;\r\n\r\n    public static void main(String[] args) {\r\n        try {\r\n            PGPEncryptor pgp = new PGPEncryptor();\r\n            pgp.runEncryption();\r\n            pgp.runDecryption();\r\n        } catch (Exception e) {\r\n            LOG.error(e.getMessage(), e);\r\n        }\r\n    }\r\n\r\n    private void runEncryption() throws Exception {\r\n\r\n        CamelContext ctx = new DefaultCamelContext();\r\n\r\n        ctx.addRoutes(new RouteBuilder() {\r\n\r\n            @Override\r\n            public void configure() throws Exception {\r\n\r\n                PGPDataFormat encryptFormat = new PGPDataFormat();\r\n\r\n                encryptFormat.setKeyFileName(&quot;file:keys/pubring.gpg&quot;);\r\n                encryptFormat.setKeyUserid(&quot;XXXXX&quot;);\r\n                encryptFormat.setArmored(true);\r\n                // TODO setting armored to false (which is default) fails?\r\n\r\n                from(&quot;file:&quot; + originalPath + &quot;?noop=true&amp;charset=utf-8&quot;)\r\n                        .marshal(encryptFormat)\r\n                        .to(&quot;file:&quot; + encryptedPath + &quot;?charset=utf-8&quot;);\r\n            }\r\n        });\r\n\r\n        ctx.start();\r\n\r\n        // Maybe sleep a little here\r\n        Thread.sleep(4000);\r\n        ctx.stop();\r\n\r\n        try {\r\n            ctx.close();\r\n        } catch (Exception e) {\r\n            // do nothing\r\n        }\r\n    }\r\n\r\n    private void runDecryption() throws Exception {\r\n\r\n        CamelContext camelContext = new DefaultCamelContext();\r\n\r\n        camelContext.addRoutes(new RouteBuilder() {\r\n\r\n            public void configure() throws Exception {\r\n\r\n                PGPDataFormat decryptFormat = new PGPDataFormat();\r\n\r\n                decryptFormat.setKeyFileName(&quot;file:keys/secring.gpg&quot;);\r\n                decryptFormat.setKeyUserid(&quot;XXXXX&quot;);\r\n                decryptFormat.setPassword(&quot;XXXX&quot;);\r\n                decryptFormat.setArmored(false);\r\n\r\n                from(&quot;file:&quot; + encryptedPath + &quot;?noop=true&amp;charset=utf-8&quot;)\r\n                        .log(&quot;message  ${headers}&quot;)\r\n                        .unmarshal(decryptFormat)\r\n                        .to(&quot;file:&quot; + decryptedPath + &quot;?charset=utf-8&quot;);\r\n            }\r\n        });\r\n\r\n        camelContext.start();\r\n        // Maybe sleep a little here\r\n        Thread.sleep(4000);\r\n        camelContext.stop();\r\n\r\n        try {\r\n            camelContext.close();\r\n        } catch (Exception e) {\r\n            // do nothing\r\n        }\r\n    }\r\n}\r\n\r\n```\r\n\r\nIf `encryptFormat.setArmored(true);` is set to true the files from original folder are encrypted decrypted.\r\nIf armored is set to false or not set since it is **default** the \r\ndecryption fails with :\r\n\r\n\r\n**If the file is signed by someone else with my public key (i.e read directly from my encrypted folder)**\r\n```\r\njava.io.EOFException: premature end of stream in PartialInputStream\r\n\tat org.bouncycastle.bcpg.BCPGInputStream$PartialInputStream.read(Unknown Source)\r\n\tat java.base/java.io.BufferedInputStream.fill(BufferedInputStream.java:244)\r\n\tat java.base/java.io.BufferedInputStream.read1(BufferedInputStream.java:284)\r\n\tat java.base/java.io.BufferedInputStream.read(BufferedInputStream.java:343)\r\n\r\n```\r\nor if the file is encrytpted by the demo code using armor false\r\n\r\n```\r\njava.lang.IllegalArgumentException: The input message body has an invalid format. The PGP decryption/verification processor expects a sequence of PGP packets of the form (entries in brackets are optional and ellipses indicate repetition, comma represents  sequential composition, and vertical bar separates alternatives): Public Key Encrypted Session Key ..., Symmetrically Encrypted Data | Sym. Encrypted and Integrity Protected Data, (Compressed Data,) (One Pass Signature ...,) Literal Data, (Signature ...,)\r\n\tat org.apache.camel.converter.crypto.PGPKeyAccessDataFormat.getFormatException(PGPKeyAccessDataFormat.java:491)\r\n\tat org.apache.camel.converter.crypto.PGPKeyAccessDataFormat.getDecryptedData(PGPKeyAccessDataFormat.java:437)\r\n\tat org.apache.camel.converter.crypto.PGPKeyAccessDataFormat.unmarshal(PGPKeyAccessDataFormat.java:372)\r\n\tat org.apache.camel.support.processor.UnmarshalProcessor.process(UnmarshalProcessor.java:76)\r\n```\r\n\r\nI have exported the keys to the older format since my keybox file named pubring.kbx using \r\n\r\n```\r\ngpg --export &gt; pubring.gpg\r\ngpg --export-secret-keys &gt; secring.gpg \r\n```\r\n\r\nIs there some other configuration i am missing? Since my requirement is armored to by false. I am using latest camel with BC 1.76.","title":"Camel PGP Decryption fails when armored is false","body":"<p>I have created a simple demo using Camel in order to encrypt/decrypt a PGP encrytion based file. The code is shown below.</p>\n<pre><code>package com.example.demo;\n\nimport org.apache.camel.CamelContext;\nimport org.apache.camel.builder.RouteBuilder;\nimport org.apache.camel.converter.crypto.PGPDataFormat;\nimport org.apache.camel.impl.DefaultCamelContext;\nimport org.slf4j.Logger;\nimport org.slf4j.LoggerFactory;\n\npublic class PGPEncryptor {\n    static final Logger LOG = LoggerFactory.getLogger(PGPEncryptor.class);\n    final String originalPath = &quot;pgp/original&quot;;\n    final String encryptedPath = &quot;pgp/encrypted&quot;;\n    final String decryptedPath = &quot;pgp/decrypted&quot;;\n\n    public static void main(String[] args) {\n        try {\n            PGPEncryptor pgp = new PGPEncryptor();\n            pgp.runEncryption();\n            pgp.runDecryption();\n        } catch (Exception e) {\n            LOG.error(e.getMessage(), e);\n        }\n    }\n\n    private void runEncryption() throws Exception {\n\n        CamelContext ctx = new DefaultCamelContext();\n\n        ctx.addRoutes(new RouteBuilder() {\n\n            @Override\n            public void configure() throws Exception {\n\n                PGPDataFormat encryptFormat = new PGPDataFormat();\n\n                encryptFormat.setKeyFileName(&quot;file:keys/pubring.gpg&quot;);\n                encryptFormat.setKeyUserid(&quot;XXXXX&quot;);\n                encryptFormat.setArmored(true);\n                // TODO setting armored to false (which is default) fails?\n\n                from(&quot;file:&quot; + originalPath + &quot;?noop=true&amp;charset=utf-8&quot;)\n                        .marshal(encryptFormat)\n                        .to(&quot;file:&quot; + encryptedPath + &quot;?charset=utf-8&quot;);\n            }\n        });\n\n        ctx.start();\n\n        // Maybe sleep a little here\n        Thread.sleep(4000);\n        ctx.stop();\n\n        try {\n            ctx.close();\n        } catch (Exception e) {\n            // do nothing\n        }\n    }\n\n    private void runDecryption() throws Exception {\n\n        CamelContext camelContext = new DefaultCamelContext();\n\n        camelContext.addRoutes(new RouteBuilder() {\n\n            public void configure() throws Exception {\n\n                PGPDataFormat decryptFormat = new PGPDataFormat();\n\n                decryptFormat.setKeyFileName(&quot;file:keys/secring.gpg&quot;);\n                decryptFormat.setKeyUserid(&quot;XXXXX&quot;);\n                decryptFormat.setPassword(&quot;XXXX&quot;);\n                decryptFormat.setArmored(false);\n\n                from(&quot;file:&quot; + encryptedPath + &quot;?noop=true&amp;charset=utf-8&quot;)\n                        .log(&quot;message  ${headers}&quot;)\n                        .unmarshal(decryptFormat)\n                        .to(&quot;file:&quot; + decryptedPath + &quot;?charset=utf-8&quot;);\n            }\n        });\n\n        camelContext.start();\n        // Maybe sleep a little here\n        Thread.sleep(4000);\n        camelContext.stop();\n\n        try {\n            camelContext.close();\n        } catch (Exception e) {\n            // do nothing\n        }\n    }\n}\n\n</code></pre>\n<p>If <code>encryptFormat.setArmored(true);</code> is set to true the files from original folder are encrypted decrypted.\nIf armored is set to false or not set since it is <strong>default</strong> the\ndecryption fails with :</p>\n<p><strong>If the file is signed by someone else with my public key (i.e read directly from my encrypted folder)</strong></p>\n<pre><code>java.io.EOFException: premature end of stream in PartialInputStream\n    at org.bouncycastle.bcpg.BCPGInputStream$PartialInputStream.read(Unknown Source)\n    at java.base/java.io.BufferedInputStream.fill(BufferedInputStream.java:244)\n    at java.base/java.io.BufferedInputStream.read1(BufferedInputStream.java:284)\n    at java.base/java.io.BufferedInputStream.read(BufferedInputStream.java:343)\n\n</code></pre>\n<p>or if the file is encrytpted by the demo code using armor false</p>\n<pre><code>java.lang.IllegalArgumentException: The input message body has an invalid format. The PGP decryption/verification processor expects a sequence of PGP packets of the form (entries in brackets are optional and ellipses indicate repetition, comma represents  sequential composition, and vertical bar separates alternatives): Public Key Encrypted Session Key ..., Symmetrically Encrypted Data | Sym. Encrypted and Integrity Protected Data, (Compressed Data,) (One Pass Signature ...,) Literal Data, (Signature ...,)\n    at org.apache.camel.converter.crypto.PGPKeyAccessDataFormat.getFormatException(PGPKeyAccessDataFormat.java:491)\n    at org.apache.camel.converter.crypto.PGPKeyAccessDataFormat.getDecryptedData(PGPKeyAccessDataFormat.java:437)\n    at org.apache.camel.converter.crypto.PGPKeyAccessDataFormat.unmarshal(PGPKeyAccessDataFormat.java:372)\n    at org.apache.camel.support.processor.UnmarshalProcessor.process(UnmarshalProcessor.java:76)\n</code></pre>\n<p>I have exported the keys to the older format since my keybox file named pubring.kbx using</p>\n<pre><code>gpg --export &gt; pubring.gpg\ngpg --export-secret-keys &gt; secring.gpg \n</code></pre>\n<p>Is there some other configuration i am missing? Since my requirement is armored to by false. I am using latest camel with BC 1.76.</p>\n"},{"tags":["java","selenium-webdriver"],"answers":[{"tags":[],"owner":{"account_id":1958137,"reputation":5497,"user_id":1760609,"display_name":"Aurand"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1362523076,"creation_date":1362523076,"answer_id":15235521,"question_id":15235406,"body_markdown":"Well, for starters, ChromeDriver (and FireFox driver) are both RemoteWebDrivers, not WebDrivers.  Those types are not compatible.  As for why you&#39;re getting a firefox driver instead of a chrome one, I&#39;m guessing that your either your buildCapabilities() function or your remote grid is returning a firefox driver.","title":"Run a test using selenium webdriver","body":"<p>Well, for starters, ChromeDriver (and FireFox driver) are both RemoteWebDrivers, not WebDrivers.  Those types are not compatible.  As for why you're getting a firefox driver instead of a chrome one, I'm guessing that your either your buildCapabilities() function or your remote grid is returning a firefox driver.</p>\n"},{"tags":[],"owner":{"account_id":1341662,"reputation":6557,"user_id":1283215,"accept_rate":63,"display_name":"Hussain Akhtar Wahid &#39;Ghouri&#39;"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1362523600,"creation_date":1362523600,"answer_id":15235631,"question_id":15235406,"body_markdown":"to use chrome driver you need to download chrome driver from [here][1]\r\n\r\nand then use the chrome driver by\r\n\r\n    System.setProperty(&quot;webdriver.chrome.driver&quot;, &quot;C:/Users/Hussain/Desktop/selenium-2.30.0/chromedriver.exe&quot;);\r\n        \tWebDriver driver = new ChromeDriver();\r\n\r\n\r\n  [1]: https://code.google.com/p/chromedriver/downloads/list","title":"Run a test using selenium webdriver","body":"<p>to use chrome driver you need to download chrome driver from <a href=\"https://code.google.com/p/chromedriver/downloads/list\" rel=\"nofollow\">here</a></p>\n\n<p>and then use the chrome driver by</p>\n\n<pre><code>System.setProperty(\"webdriver.chrome.driver\", \"C:/Users/Hussain/Desktop/selenium-2.30.0/chromedriver.exe\");\n        WebDriver driver = new ChromeDriver();\n</code></pre>\n"},{"tags":[],"owner":{"account_id":561923,"reputation":7488,"user_id":1118559,"accept_rate":38,"display_name":"MindBrain"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1362546993,"creation_date":1362546993,"answer_id":15239510,"question_id":15235406,"body_markdown":"Very simple change. Reimporting my project into the IntelliJ evironment fixed the problem.\r\n![Reimport symbol in Intellij][1] \r\n\r\n\r\n  [1]: http://i.stack.imgur.com/jFsdw.png","title":"Run a test using selenium webdriver","body":"<p>Very simple change. Reimporting my project into the IntelliJ evironment fixed the problem.\n<img src=\"https://i.stack.imgur.com/jFsdw.png\" alt=\"Reimport symbol in Intellij\"> </p>\n"},{"tags":[],"owner":{"account_id":29807889,"reputation":1,"user_id":22844006,"display_name":"Gulzhas Mailybayeva"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1699349678,"creation_date":1699349678,"answer_id":77437067,"question_id":15235406,"body_markdown":"you may also try using  bonigarcia\r\n\r\n```\r\n   &lt;dependency&gt;\r\n            &lt;groupId&gt;io.github.bonigarcia&lt;/groupId&gt;\r\n            &lt;artifactId&gt;webdrivermanager&lt;/artifactId&gt;\r\n            &lt;version&gt;5.3.2&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n```\r\n\r\n\r\n```\r\n  private WebDriver webDriver;\r\n\r\n     public WebDriver getDriver(){\r\n        ChromeOptions options = new ChromeOptions();\r\n        WebDriverManager.chromedriver().setup();\r\n        options.addArguments(&quot;--remote-allow-origins=*&quot;, &quot;ignore-certificate-errors&quot;);\r\n        webDriver = new ChromeDriver(options);\r\n        return webDriver;\r\n    }\r\n```","title":"Run a test using selenium webdriver","body":"<p>you may also try using  bonigarcia</p>\n<pre><code>   &lt;dependency&gt;\n            &lt;groupId&gt;io.github.bonigarcia&lt;/groupId&gt;\n            &lt;artifactId&gt;webdrivermanager&lt;/artifactId&gt;\n            &lt;version&gt;5.3.2&lt;/version&gt;\n        &lt;/dependency&gt;\n</code></pre>\n<pre><code>  private WebDriver webDriver;\n\n     public WebDriver getDriver(){\n        ChromeOptions options = new ChromeOptions();\n        WebDriverManager.chromedriver().setup();\n        options.addArguments(&quot;--remote-allow-origins=*&quot;, &quot;ignore-certificate-errors&quot;);\n        webDriver = new ChromeDriver(options);\n        return webDriver;\n    }\n</code></pre>\n"}],"owner":{"account_id":561923,"reputation":7488,"user_id":1118559,"accept_rate":38,"display_name":"MindBrain"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":350,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":4,"score":0,"last_activity_date":1699349678,"creation_date":1362522628,"question_id":15235406,"body_markdown":"I am a newbie to selenium web driver.I have a test written in java which is to be tested using Selenium web driver. I ran the test class as a java application.I wrote the following snippet of code to obtain the instance of the ChromeDriver. I get the following message for the following code snippet.  \r\n\r\n        @Override\r\n        public WebDriver get() {\r\n            log.info(&quot;Creating Chrome driver&quot;);\r\n            try {\r\n                return new ChromeDriver(buildCapabilities());\r\n            } catch (IOException e) {\r\n                throw new ExceptionInInitializerError(e);\r\n            }\r\n        }\r\nAlso have the path to the ChromeDriver set\r\n\r\n&gt;  private static final String CHROME_DRIVER = &quot;chromedriver.exe&quot;;\r\n&gt;  URL chromeDriverUrl = getClass().getResource(&quot;/&quot; + CHROME_DRIVER);\r\n&gt;  String pathToChromeDriver = chromeDriverUrl.getPath();\r\n&gt;  System.setProperty(&quot;webdriver.chrome.driver&quot;, pathToChromeDriver);\r\n\r\nIMAGE:\r\n![enter image description here][1]\r\n\r\nDo not understand as to why the following message is displayed on the return new ChromeDriver(buildCapabilities()) line of code.\r\n\r\n\r\n  [1]: http://i.stack.imgur.com/KoJeP.png\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n","title":"Run a test using selenium webdriver","body":"<p>I am a newbie to selenium web driver.I have a test written in java which is to be tested using Selenium web driver. I ran the test class as a java application.I wrote the following snippet of code to obtain the instance of the ChromeDriver. I get the following message for the following code snippet.  </p>\n\n<pre><code>    @Override\n    public WebDriver get() {\n        log.info(\"Creating Chrome driver\");\n        try {\n            return new ChromeDriver(buildCapabilities());\n        } catch (IOException e) {\n            throw new ExceptionInInitializerError(e);\n        }\n    }\n</code></pre>\n\n<p>Also have the path to the ChromeDriver set</p>\n\n<blockquote>\n  <p>private static final String CHROME_DRIVER = \"chromedriver.exe\";\n   URL chromeDriverUrl = getClass().getResource(\"/\" + CHROME_DRIVER);\n   String pathToChromeDriver = chromeDriverUrl.getPath();\n   System.setProperty(\"webdriver.chrome.driver\", pathToChromeDriver);</p>\n</blockquote>\n\n<p>IMAGE:\n<img src=\"https://i.stack.imgur.com/KoJeP.png\" alt=\"enter image description here\"></p>\n\n<p>Do not understand as to why the following message is displayed on the return new ChromeDriver(buildCapabilities()) line of code.</p>\n"},{"tags":["java","spring","hibernate","jpa"],"answers":[{"tags":[],"owner":{"account_id":2734210,"reputation":6420,"user_id":2357233,"accept_rate":100,"display_name":"JamesENL"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1400043038,"creation_date":1400043038,"answer_id":23645829,"question_id":23645091,"body_markdown":"I have a feeling that your annotations are slightly incorrect. Not by much though, have a look at [Example 7.24 here][1] and see if it matches your annotations. Ignore the `Collection` datatype though, as you shouldn&#39;t have any problems using a `Set`. I notice that you are missing a `cascade=CascadeType.ALL` on your `Product` collection, but I can&#39;t work out if that is the problem or not.\r\n\r\nWhat the actual exception is saying is that your `Product` object(s) haven&#39;t actually been saved when its trying to save the collection of `Product`&#39;s. That&#39;s why I think its a problem with your annotations.\r\n\r\nTry it out and let me know if you get anywhere.\r\n\r\n  [1]: https://docs.jboss.org/hibernate/orm/4.1/manual/en-US/html/ch07.html#collections-bidirectional","title":"Spring data JPA and hibernate detached entity passed to persist on ManyToMany relationship","body":"<p>I have a feeling that your annotations are slightly incorrect. Not by much though, have a look at <a href=\"https://docs.jboss.org/hibernate/orm/4.1/manual/en-US/html/ch07.html#collections-bidirectional\" rel=\"nofollow\">Example 7.24 here</a> and see if it matches your annotations. Ignore the <code>Collection</code> datatype though, as you shouldn't have any problems using a <code>Set</code>. I notice that you are missing a <code>cascade=CascadeType.ALL</code> on your <code>Product</code> collection, but I can't work out if that is the problem or not.</p>\n\n<p>What the actual exception is saying is that your <code>Product</code> object(s) haven't actually been saved when its trying to save the collection of <code>Product</code>'s. That's why I think its a problem with your annotations.</p>\n\n<p>Try it out and let me know if you get anywhere.</p>\n"},{"tags":[],"owner":{"account_id":1434762,"reputation":22772,"user_id":1356423,"accept_rate":65,"display_name":"Alan Hay"},"down_vote_count":0,"up_vote_count":13,"is_accepted":false,"score":13,"last_activity_date":1635344952,"creation_date":1400054783,"answer_id":23648953,"question_id":23645091,"body_markdown":"You need to ensure both side of the relationship are properly maintained in your code.\r\n   \r\nUpdate Reservation as below and then add the corresponding methods to Product.\r\n\r\n\r\n    @Entity\r\n    @Table(name = &quot;RESERVATION&quot;)\r\n    public class Reservation {\r\n    \r\n        private int reservationId;\r\n    \r\n        private Set&lt;Product&gt; products = new HashSet&lt;Product&gt;(0);\r\n    \r\n        @Id\r\n        @GeneratedValue(strategy = GenerationType.AUTO)\r\n        public int getReservationId() {\r\n            return reservationId;\r\n        }\r\n    \r\n        public void setReservationId(int reservationId) {\r\n            this.reservationId = reservationId;\r\n        }\r\n    \r\n        @ManyToMany(fetch = FetchType.LAZY, cascade = CascadeType.ALL)\r\n        @JoinTable(name = &quot;product_reservation&quot;, joinColumns = { @JoinColumn(name = &quot;reservationId&quot;, nullable = false, updatable = false) }, inverseJoinColumns = { @JoinColumn(name = &quot;productId&quot;, \r\n                nullable = false, updatable = false) })\r\n        public Set&lt;Product&gt; getProducts() {\r\n    \t\t\r\n    \t\t//force clients through our add and remove methods\r\n            return Collections.unmodifiableSet(products);\r\n        }\r\n    \t\r\n    \tpublic void addProduct(Product product){\r\n    \t\r\n    \t\t//avoid circular calls : assumes equals and hashcode implemented\r\n    \t\tif(! products.contains(product){\r\n    \t\t\tproducts.add(product);\r\n    \t\t\t\r\n    \t\t\t//add method to Product : sets &#39;other side&#39; of association\r\n    \t\t\tproduct.addReservation(this);\r\n    \t\t}\r\n    \t}\r\n    \t\r\n    \tpublic void removeProduct(Product product){\r\n    \t\t\r\n    \t\t//avoid circular calls: assumes equals and hashcode implemented: \r\n    \t\tif(product.contains(product){\r\n    \t\t\tproducts.remove(product);\r\n    \t\t\t\r\n    \t\t\t//add method to Product: set &#39;other side&#39; of association: \r\n    \t\t\tproduct.removeReservation(this);\r\n    \t\t}\r\n    \t}\r\n    }\r\n\r\n\r\nAnd in Products:\r\n\r\n    public void addReservation(Reservation reservation){\r\n    \r\n        //assumes equals and hashcode implemented: avoid circular calls\r\n        if(! reservations.contains(reservation){\r\n            reservations.add(reservation);\r\n    \r\n            //add method to Product : sets &#39;other side&#39; of association\r\n            reservation.addProduct(this);\r\n        }\r\n    }\r\n    \r\n    public void removeReservation(Reservation reservation){\r\n    \r\n        //assumes equals and hashcode implemented: avoid circular calls\r\n        if(reservations.contains(reservation){\r\n            reservations.remove(reservation);\r\n    \r\n            //add method to Product : sets &#39;other side&#39; of association\r\n            reservation.reomveProduct(this);\r\n        }\r\n    }\r\n\r\n\r\nNow you should be able to call save on either Product or Reservation and everything should work as expected, so you would by happy.","title":"Spring data JPA and hibernate detached entity passed to persist on ManyToMany relationship","body":"<p>You need to ensure both side of the relationship are properly maintained in your code.</p>\n<p>Update Reservation as below and then add the corresponding methods to Product.</p>\n<pre><code>@Entity\n@Table(name = &quot;RESERVATION&quot;)\npublic class Reservation {\n\n    private int reservationId;\n\n    private Set&lt;Product&gt; products = new HashSet&lt;Product&gt;(0);\n\n    @Id\n    @GeneratedValue(strategy = GenerationType.AUTO)\n    public int getReservationId() {\n        return reservationId;\n    }\n\n    public void setReservationId(int reservationId) {\n        this.reservationId = reservationId;\n    }\n\n    @ManyToMany(fetch = FetchType.LAZY, cascade = CascadeType.ALL)\n    @JoinTable(name = &quot;product_reservation&quot;, joinColumns = { @JoinColumn(name = &quot;reservationId&quot;, nullable = false, updatable = false) }, inverseJoinColumns = { @JoinColumn(name = &quot;productId&quot;, \n            nullable = false, updatable = false) })\n    public Set&lt;Product&gt; getProducts() {\n        \n        //force clients through our add and remove methods\n        return Collections.unmodifiableSet(products);\n    }\n    \n    public void addProduct(Product product){\n    \n        //avoid circular calls : assumes equals and hashcode implemented\n        if(! products.contains(product){\n            products.add(product);\n            \n            //add method to Product : sets 'other side' of association\n            product.addReservation(this);\n        }\n    }\n    \n    public void removeProduct(Product product){\n        \n        //avoid circular calls: assumes equals and hashcode implemented: \n        if(product.contains(product){\n            products.remove(product);\n            \n            //add method to Product: set 'other side' of association: \n            product.removeReservation(this);\n        }\n    }\n}\n</code></pre>\n<p>And in Products:</p>\n<pre><code>public void addReservation(Reservation reservation){\n\n    //assumes equals and hashcode implemented: avoid circular calls\n    if(! reservations.contains(reservation){\n        reservations.add(reservation);\n\n        //add method to Product : sets 'other side' of association\n        reservation.addProduct(this);\n    }\n}\n\npublic void removeReservation(Reservation reservation){\n\n    //assumes equals and hashcode implemented: avoid circular calls\n    if(reservations.contains(reservation){\n        reservations.remove(reservation);\n\n        //add method to Product : sets 'other side' of association\n        reservation.reomveProduct(this);\n    }\n}\n</code></pre>\n<p>Now you should be able to call save on either Product or Reservation and everything should work as expected, so you would by happy.</p>\n"},{"tags":[],"owner":{"account_id":2627458,"reputation":1043,"user_id":2274188,"display_name":"Renato Borges"},"down_vote_count":0,"up_vote_count":83,"is_accepted":false,"score":83,"last_activity_date":1674410432,"creation_date":1440196456,"answer_id":32150208,"question_id":23645091,"body_markdown":"I had the same problem and solved it by removing the `cascade = CascadeType.PERSIST`.\r\n\r\nIn your case you use `CascadeType.ALL`, which is equivalent to also using the PERSIST, according to the [documentation][1]:\r\n\r\n&gt; Defines the set of cascadable operations that are propagated to the associated entity. The value cascade=ALL is equivalent to cascade={PERSIST, MERGE, REMOVE, REFRESH, DETACH}.\r\n\r\nIt means when you try to save the reservation on `reservationDAO.save(reservation)` it will also try to persist the associated Product object. But this object is not attached to this session. So the error occur.\r\n\r\n\r\n  [1]: https://javadoc.io/static/javax.persistence/persistence-api/1.0-rev-1/javax/persistence/CascadeType.html","title":"Spring data JPA and hibernate detached entity passed to persist on ManyToMany relationship","body":"<p>I had the same problem and solved it by removing the <code>cascade = CascadeType.PERSIST</code>.</p>\n<p>In your case you use <code>CascadeType.ALL</code>, which is equivalent to also using the PERSIST, according to the <a href=\"https://javadoc.io/static/javax.persistence/persistence-api/1.0-rev-1/javax/persistence/CascadeType.html\" rel=\"nofollow noreferrer\">documentation</a>:</p>\n<blockquote>\n<p>Defines the set of cascadable operations that are propagated to the associated entity. The value cascade=ALL is equivalent to cascade={PERSIST, MERGE, REMOVE, REFRESH, DETACH}.</p>\n</blockquote>\n<p>It means when you try to save the reservation on <code>reservationDAO.save(reservation)</code> it will also try to persist the associated Product object. But this object is not attached to this session. So the error occur.</p>\n"},{"tags":[],"owner":{"account_id":10323366,"reputation":11,"user_id":7615529,"display_name":"Pragyan Chand"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1487925626,"creation_date":1487921108,"answer_id":42432971,"question_id":23645091,"body_markdown":"`entityManager.merge()` is a good option. It will merge the detached objects in the session. No need to change any cascadeType.\r\n","title":"Spring data JPA and hibernate detached entity passed to persist on ManyToMany relationship","body":"<p><code>entityManager.merge()</code> is a good option. It will merge the detached objects in the session. No need to change any cascadeType.</p>\n"},{"tags":[],"owner":{"account_id":6469904,"reputation":689,"user_id":5010392,"display_name":"My Pham"},"down_vote_count":1,"up_vote_count":59,"is_accepted":false,"score":58,"last_activity_date":1674379556,"creation_date":1503227681,"answer_id":45781533,"question_id":23645091,"body_markdown":"The exception comes as Hibernate is trying to persist associated products when you save your reservation. Persisting the products is only successful if they have no id because the id of Product is annotated \r\n\r\n    @GeneratedValue(strategy=GenerationType.AUTO)\r\n\r\nBut you got products from the repository and their ids are not null.\r\n\r\nThere are 2 options to resolve your issue:\r\n\r\n 1. remove `(cascade = CascadeType.ALL)` on products of Reservation\r\n 2. or remove `@GeneratedValue(strategy=GenerationType.AUTO)` on id of Product\r\n\r\n\r\n\r\n","title":"Spring data JPA and hibernate detached entity passed to persist on ManyToMany relationship","body":"<p>The exception comes as Hibernate is trying to persist associated products when you save your reservation. Persisting the products is only successful if they have no id because the id of Product is annotated</p>\n<pre><code>@GeneratedValue(strategy=GenerationType.AUTO)\n</code></pre>\n<p>But you got products from the repository and their ids are not null.</p>\n<p>There are 2 options to resolve your issue:</p>\n<ol>\n<li>remove <code>(cascade = CascadeType.ALL)</code> on products of Reservation</li>\n<li>or remove <code>@GeneratedValue(strategy=GenerationType.AUTO)</code> on id of Product</li>\n</ol>\n"},{"tags":[],"owner":{"account_id":15675606,"reputation":177,"user_id":11310931,"display_name":"Karthik C Yadav"},"down_vote_count":1,"up_vote_count":5,"is_accepted":false,"score":4,"last_activity_date":1554373711,"creation_date":1554373711,"answer_id":55513656,"question_id":23645091,"body_markdown":"Remove @ CascadeType.ALL in the @ManytoMany relation, this worked for me.\r\n","title":"Spring data JPA and hibernate detached entity passed to persist on ManyToMany relationship","body":"<p>Remove @ CascadeType.ALL in the @ManytoMany relation, this worked for me.</p>\n"},{"tags":[],"owner":{"account_id":16351408,"reputation":123,"user_id":11813982,"display_name":"Shrip"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1670857906,"creation_date":1670857906,"answer_id":74773232,"question_id":23645091,"body_markdown":"I had similar issue. \r\nI replaced `CascadeType.ALL` with `CascadeType.MERGE` and it worked for me. \r\n\r\nMapping can be `ManyToMany` or `OneToOne`.","title":"Spring data JPA and hibernate detached entity passed to persist on ManyToMany relationship","body":"<p>I had similar issue.\nI replaced <code>CascadeType.ALL</code> with <code>CascadeType.MERGE</code> and it worked for me.</p>\n<p>Mapping can be <code>ManyToMany</code> or <code>OneToOne</code>.</p>\n"},{"tags":[],"owner":{"account_id":4421014,"reputation":115,"user_id":3600973,"display_name":"Pedro &#193;vila"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1675882199,"creation_date":1675882199,"answer_id":75390431,"question_id":23645091,"body_markdown":"you have to use persist to save and merge to update but first validate if the id comes null\r\n\r\n    @Override\r\n\tpublic Registration save(Registration registration) {\r\n\t\tif(registration.getId() == null) {\r\n\t\t\t_entityManager.persist(registration);\r\n\t\t}else {\r\n\t\t\t_entityManager.merge(registration);\r\n\t\t}\r\n\t\treturn registration;\r\n\t}","title":"Spring data JPA and hibernate detached entity passed to persist on ManyToMany relationship","body":"<p>you have to use persist to save and merge to update but first validate if the id comes null</p>\n<pre><code>@Override\npublic Registration save(Registration registration) {\n    if(registration.getId() == null) {\n        _entityManager.persist(registration);\n    }else {\n        _entityManager.merge(registration);\n    }\n    return registration;\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":27467013,"reputation":1,"user_id":20956548,"display_name":"Deidine"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1694890580,"creation_date":1694890580,"answer_id":77119177,"question_id":23645091,"body_markdown":"i add CascadeType.MERGE insted of CascadeType.All \r\nand it worked for me after alot of pain in this problem\r\nExceptionHandlerExceptionResolver : Resolved [org.springframework.dao.InvalidDataAccessApiUsageException: detached entity passed to persist: deidine.model.Fonction; nested exception is org.hibernate.PersistentObjectException: detached entity passed to persist: deidine.model.Fonction]\r\n","title":"Spring data JPA and hibernate detached entity passed to persist on ManyToMany relationship","body":"<p>i add CascadeType.MERGE insted of CascadeType.All\nand it worked for me after alot of pain in this problem\nExceptionHandlerExceptionResolver : Resolved [org.springframework.dao.InvalidDataAccessApiUsageException: detached entity passed to persist: deidine.model.Fonction; nested exception is org.hibernate.PersistentObjectException: detached entity passed to persist: deidine.model.Fonction]</p>\n"}],"owner":{"account_id":3888700,"reputation":765,"user_id":3219470,"accept_rate":29,"display_name":"nspessot"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":145503,"favorite_count":0,"down_vote_count":0,"up_vote_count":47,"answer_count":9,"score":47,"last_activity_date":1699349665,"creation_date":1400037705,"question_id":23645091,"body_markdown":"I am trying to persist an object that has a many-to-many relationship with other objects already persisted.\r\n\r\nHere is my persisted object (they are already persisted in the db, which is a MySql):-\r\n\r\n**Product**\r\n\r\n    @Entity\r\n    @Table(name=&quot;PRODUCT&quot;)\r\n    public class Product {\r\n        private int productId;\r\n        private String productName;\r\n        private Set&lt;Reservation&gt; reservations = new HashSet&lt;Reservation&gt;(0);\r\n        \r\n        @Id @GeneratedValue(strategy=GenerationType.AUTO)\r\n        public int getProductId() {\r\n            return productId;\r\n        }\r\n    \r\n        public void setProductId(int productId) {\r\n            this.productId = productId;\r\n        }\r\n    \r\n    @Column(nullable = false)\r\n        public String getProduct() {\r\n            return product;\r\n        }\r\n        public void setProduct(String product) {\r\n            this.product = product;\r\n        }\r\n    \r\n        @ManyToMany(fetch = FetchType.LAZY, mappedBy = &quot;products&quot;)\r\n        public Set&lt;Reservation&gt; getReservations() {\r\n            return reservations;\r\n        }\r\n        public void setReservations(Set&lt;Reservation&gt; reservations) {\r\n            this.reservations = reservations;\r\n        }\r\n    }\r\n\r\nHere is my no persisted object, which I am trying to create\r\n\r\n    @Entity\r\n    @Table(name = &quot;RESERVATION&quot;)\r\n    public class Reservation {\r\n    \r\n        private int reservationId;\r\n    \r\n        private Set&lt;Product&gt; products = new HashSet&lt;Product&gt;(0);\r\n    \r\n        @Id\r\n        @GeneratedValue(strategy = GenerationType.AUTO)\r\n        public int getReservationId() {\r\n            return reservationId;\r\n        }\r\n    \r\n        public void setReservationId(int reservationId) {\r\n            this.reservationId = reservationId;\r\n        }\r\n    \r\n        @ManyToMany(fetch = FetchType.LAZY, cascade = CascadeType.ALL)\r\n        @JoinTable(name = &quot;product_reservation&quot;, joinColumns = { @JoinColumn(name = &quot;reservationId&quot;, nullable = false, updatable = false) }, inverseJoinColumns = { @JoinColumn(name = &quot;productId&quot;, \r\n                nullable = false, updatable = false) })\r\n        public Set&lt;Product&gt; getProducts() {\r\n            return products;\r\n        }\r\n    \r\n        public void setProducts(Set&lt;Product&gt; products) {\r\n            this.products = products;\r\n        }\r\n    }\r\n\r\n\r\nThis is my `ReservationService` class, which receives an array of products names, look the products using the name and put them into the reservation object.\r\n\r\n    @Service\r\n    public class ReservationServiceImpl implements ReservationService {\r\n    \r\n        @Autowired\r\n        private ProductDAO productDAO;\r\n        @Autowired\r\n        private ReservationDAO reservationDAO;\r\n        \r\n        @Transactional\r\n        public void createReservation(String[] productNames) {\r\n            \r\n                Set&lt;Product&gt; products = new HashSet&lt;Product&gt;();\r\n                for (String productName : productNames) {\r\n                    Product pi = productDAO.findByProductName(productName);\r\n                    products.add(pi);\r\n                }\r\n                Reservation reservation = new Reservation();\r\n                reservation.setProducts(products);\r\n                reservationDAO.save(reservation);   ---&gt; Here I am getting detached entity passed to persist\r\n        }\r\n    }\r\n\r\n\r\nHere is my `ProductDAO` interface:\r\n\r\n    public interface ProductDAO extends JpaRepository&lt;Product, Integer&gt; {\r\n    \r\n        public Product findByProductName(String productName);\r\n    }\r\n\r\nThis is my spring config file:\r\n\r\n    @Configuration\r\n    @PropertySource(value = { &quot;classpath:base.properties&quot; })\r\n    @EnableTransactionManagement\r\n    @EnableJpaRepositories(basePackages = &quot;com.reservation.dao&quot;)\r\n    public class RepositoryConfig {\r\n    \r\n    \t@Autowired\r\n    \tprivate Environment env;\r\n    \t\r\n    \t@Bean\r\n    \tpublic static PropertySourcesPlaceholderConfigurer placeHolderConfigurer() {\r\n    \t\treturn new PropertySourcesPlaceholderConfigurer();\r\n    \t}\r\n    \t\r\n    \t@Bean\r\n    \tpublic PlatformTransactionManager transactionManager() {\r\n    \t\tEntityManagerFactory factory = entityManagerFactory().getObject();\r\n    \t\treturn new JpaTransactionManager(factory);\r\n    \t}\r\n    \r\n    \t@Bean\r\n    \tpublic LocalContainerEntityManagerFactoryBean entityManagerFactory() {\r\n    \t\tHibernateJpaVendorAdapter vendorAdapter = new HibernateJpaVendorAdapter();\r\n    \t\tvendorAdapter.setGenerateDdl(Boolean.valueOf(env\r\n    \t\t\t\t.getProperty(&quot;hibernate.generate.ddl&quot;)));\r\n    \t\tvendorAdapter.setShowSql(Boolean.valueOf(env\r\n    \t\t\t\t.getProperty(&quot;hibernate.show_sql&quot;)));\r\n    \r\n    \t\tProperties jpaProperties = new Properties();\r\n    \t\tjpaProperties.put(&quot;hibernate.hbm2ddl.auto&quot;,\r\n    \t\t\t\tenv.getProperty(&quot;hibernate.hbm2ddl.auto&quot;));\r\n    \t\tjpaProperties.put(&quot;hibernate.dialect&quot;, env.getProperty(&quot;hibernate.dialect&quot;));\r\n    \r\n    \t\tLocalContainerEntityManagerFactoryBean factory = new LocalContainerEntityManagerFactoryBean();\r\n    \t\tfactory.setDataSource(dataSource());\r\n    \t\tfactory.setJpaVendorAdapter(vendorAdapter);\r\n    \t\tfactory.setPackagesToScan(&quot;com.reservation.service.domain&quot;);\r\n    \t\tfactory.setJpaProperties(jpaProperties);\r\n    \t\tfactory.afterPropertiesSet();\r\n    \t\tfactory.setLoadTimeWeaver(new InstrumentationLoadTimeWeaver());\r\n    \t\treturn factory;\r\n    \t}\r\n    \r\n    \t@Bean\r\n    \tpublic HibernateExceptionTranslator hibernateExceptionTranslator() {\r\n    \t\treturn new HibernateExceptionTranslator();\r\n    \t}\r\n    \r\n    \t@Bean\r\n    \tpublic DataSource dataSource() {\r\n    \t\tBasicDataSource dataSource = new BasicDataSource();\r\n    \t\tdataSource.setDriverClassName(env.getProperty(&quot;jdbc.driverClassName&quot;));\r\n    \t\tdataSource.setUrl(env.getProperty(&quot;jdbc.url&quot;));\r\n    \t\tdataSource.setUsername(env.getProperty(&quot;jdbc.username&quot;));\r\n    \t\tdataSource.setPassword(env.getProperty(&quot;jdbc.password&quot;));\r\n    \t\treturn dataSource;\r\n    \t}\r\n    }\r\n\r\nHere is the full stack trace:\r\n\r\n&gt;SEVERE: Servlet.service() for servlet [dispatcher] in context with path [/web] threw exception [Request processing failed; \r\n    nested exception is org.springframework.dao.InvalidDataAccessApiUsageException: detached entity passed to persist: com.reservation.service.domain.Product; \r\n    nested exception is org.hibernate.PersistentObjectException: detached entity passed to persist: com.reservation.service.domain.Product] with root cause\r\n    org.hibernate.PersistentObjectException: detached entity passed to persist: com.reservation.service.domain.Product\r\n        at org.hibernate.event.internal.DefaultPersistEventListener.onPersist(DefaultPersistEventListener.java:141)","title":"Spring data JPA and hibernate detached entity passed to persist on ManyToMany relationship","body":"<p>I am trying to persist an object that has a many-to-many relationship with other objects already persisted.</p>\n\n<p>Here is my persisted object (they are already persisted in the db, which is a MySql):-</p>\n\n<p><strong>Product</strong></p>\n\n<pre><code>@Entity\n@Table(name=\"PRODUCT\")\npublic class Product {\n    private int productId;\n    private String productName;\n    private Set&lt;Reservation&gt; reservations = new HashSet&lt;Reservation&gt;(0);\n\n    @Id @GeneratedValue(strategy=GenerationType.AUTO)\n    public int getProductId() {\n        return productId;\n    }\n\n    public void setProductId(int productId) {\n        this.productId = productId;\n    }\n\n@Column(nullable = false)\n    public String getProduct() {\n        return product;\n    }\n    public void setProduct(String product) {\n        this.product = product;\n    }\n\n    @ManyToMany(fetch = FetchType.LAZY, mappedBy = \"products\")\n    public Set&lt;Reservation&gt; getReservations() {\n        return reservations;\n    }\n    public void setReservations(Set&lt;Reservation&gt; reservations) {\n        this.reservations = reservations;\n    }\n}\n</code></pre>\n\n<p>Here is my no persisted object, which I am trying to create</p>\n\n<pre><code>@Entity\n@Table(name = \"RESERVATION\")\npublic class Reservation {\n\n    private int reservationId;\n\n    private Set&lt;Product&gt; products = new HashSet&lt;Product&gt;(0);\n\n    @Id\n    @GeneratedValue(strategy = GenerationType.AUTO)\n    public int getReservationId() {\n        return reservationId;\n    }\n\n    public void setReservationId(int reservationId) {\n        this.reservationId = reservationId;\n    }\n\n    @ManyToMany(fetch = FetchType.LAZY, cascade = CascadeType.ALL)\n    @JoinTable(name = \"product_reservation\", joinColumns = { @JoinColumn(name = \"reservationId\", nullable = false, updatable = false) }, inverseJoinColumns = { @JoinColumn(name = \"productId\", \n            nullable = false, updatable = false) })\n    public Set&lt;Product&gt; getProducts() {\n        return products;\n    }\n\n    public void setProducts(Set&lt;Product&gt; products) {\n        this.products = products;\n    }\n}\n</code></pre>\n\n<p>This is my <code>ReservationService</code> class, which receives an array of products names, look the products using the name and put them into the reservation object.</p>\n\n<pre><code>@Service\npublic class ReservationServiceImpl implements ReservationService {\n\n    @Autowired\n    private ProductDAO productDAO;\n    @Autowired\n    private ReservationDAO reservationDAO;\n\n    @Transactional\n    public void createReservation(String[] productNames) {\n\n            Set&lt;Product&gt; products = new HashSet&lt;Product&gt;();\n            for (String productName : productNames) {\n                Product pi = productDAO.findByProductName(productName);\n                products.add(pi);\n            }\n            Reservation reservation = new Reservation();\n            reservation.setProducts(products);\n            reservationDAO.save(reservation);   ---&gt; Here I am getting detached entity passed to persist\n    }\n}\n</code></pre>\n\n<p>Here is my <code>ProductDAO</code> interface:</p>\n\n<pre><code>public interface ProductDAO extends JpaRepository&lt;Product, Integer&gt; {\n\n    public Product findByProductName(String productName);\n}\n</code></pre>\n\n<p>This is my spring config file:</p>\n\n<pre><code>@Configuration\n@PropertySource(value = { \"classpath:base.properties\" })\n@EnableTransactionManagement\n@EnableJpaRepositories(basePackages = \"com.reservation.dao\")\npublic class RepositoryConfig {\n\n    @Autowired\n    private Environment env;\n\n    @Bean\n    public static PropertySourcesPlaceholderConfigurer placeHolderConfigurer() {\n        return new PropertySourcesPlaceholderConfigurer();\n    }\n\n    @Bean\n    public PlatformTransactionManager transactionManager() {\n        EntityManagerFactory factory = entityManagerFactory().getObject();\n        return new JpaTransactionManager(factory);\n    }\n\n    @Bean\n    public LocalContainerEntityManagerFactoryBean entityManagerFactory() {\n        HibernateJpaVendorAdapter vendorAdapter = new HibernateJpaVendorAdapter();\n        vendorAdapter.setGenerateDdl(Boolean.valueOf(env\n                .getProperty(\"hibernate.generate.ddl\")));\n        vendorAdapter.setShowSql(Boolean.valueOf(env\n                .getProperty(\"hibernate.show_sql\")));\n\n        Properties jpaProperties = new Properties();\n        jpaProperties.put(\"hibernate.hbm2ddl.auto\",\n                env.getProperty(\"hibernate.hbm2ddl.auto\"));\n        jpaProperties.put(\"hibernate.dialect\", env.getProperty(\"hibernate.dialect\"));\n\n        LocalContainerEntityManagerFactoryBean factory = new LocalContainerEntityManagerFactoryBean();\n        factory.setDataSource(dataSource());\n        factory.setJpaVendorAdapter(vendorAdapter);\n        factory.setPackagesToScan(\"com.reservation.service.domain\");\n        factory.setJpaProperties(jpaProperties);\n        factory.afterPropertiesSet();\n        factory.setLoadTimeWeaver(new InstrumentationLoadTimeWeaver());\n        return factory;\n    }\n\n    @Bean\n    public HibernateExceptionTranslator hibernateExceptionTranslator() {\n        return new HibernateExceptionTranslator();\n    }\n\n    @Bean\n    public DataSource dataSource() {\n        BasicDataSource dataSource = new BasicDataSource();\n        dataSource.setDriverClassName(env.getProperty(\"jdbc.driverClassName\"));\n        dataSource.setUrl(env.getProperty(\"jdbc.url\"));\n        dataSource.setUsername(env.getProperty(\"jdbc.username\"));\n        dataSource.setPassword(env.getProperty(\"jdbc.password\"));\n        return dataSource;\n    }\n}\n</code></pre>\n\n<p>Here is the full stack trace:</p>\n\n<blockquote>\n  <p>SEVERE: Servlet.service() for servlet [dispatcher] in context with path [/web] threw exception [Request processing failed; \n      nested exception is org.springframework.dao.InvalidDataAccessApiUsageException: detached entity passed to persist: com.reservation.service.domain.Product; \n      nested exception is org.hibernate.PersistentObjectException: detached entity passed to persist: com.reservation.service.domain.Product] with root cause\n      org.hibernate.PersistentObjectException: detached entity passed to persist: com.reservation.service.domain.Product\n          at org.hibernate.event.internal.DefaultPersistEventListener.onPersist(DefaultPersistEventListener.java:141)</p>\n</blockquote>\n"},{"tags":["java","apache-poi","xwpf","apache-poi-4","xslf"],"comments":[{"owner":{"account_id":4853829,"reputation":57305,"user_id":3915431,"display_name":"Axel Richter"},"score":1,"creation_date":1699354671,"post_id":77437064,"comment_id":136518400,"body_markdown":"https://stackoverflow.com/questions/73537742/is-there-any-way-to-add-images-into-ppt-table-cell-using-apache-poi/73543221#73543221","body":"<a href=\"https://stackoverflow.com/questions/73537742/is-there-any-way-to-add-images-into-ppt-table-cell-using-apache-poi/73543221#73543221\" title=\"is there any way to add images into ppt table cell using apache poi\">stackoverflow.com/questions/73537742/&hellip;</a>"}],"owner":{"account_id":29808352,"reputation":1,"user_id":22844375,"display_name":"Furqan Ahmed"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":26,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1699349646,"creation_date":1699349646,"question_id":77437064,"body_markdown":"I am using Apache POI to add an XSLFTable dynamically to a slide, the XSLFTable can contains text and images. In docx file extension I can successfully add images to XWPFRun using following code.\r\n\r\n\r\n```\r\n\tpublic void replaceXWPFRunImagePlaceholder(XWPFRun run, FormLetterImageField image) {\r\n\t\tString path = image.getFile().getAbsolutePath();\r\n\t\tString[] imagePathArray = path.split(IMAGE_PATH_DELIMITER);\r\n\t\tString imageExtension = imagePathArray[imagePathArray.length-1];\r\n\t\t\r\n\t\t//Adding picture to the paragraph&#39;s run.\r\n\t\ttry {\t\t\t\r\n\t\t\timageInputStream = new FileInputStream(image.getFile().getAbsolutePath());\r\n\t\t\trun.addPicture(imageInputStream, getPictureType(imageExtension), path, Units.toEMU(image.getWidth()), Units.toEMU(image.getHeight()));\r\n\t\t} catch (Exception e) {\r\n\t\t\tlog.error(e.getMessage(), e);\r\n\t\t}\r\n\t}\r\n```\r\n \r\n\r\n\r\nI am trying to achieve the same functionality using XSLFTextRun but it doesn&#39;t contains an addPicture() function to add an image to XSLFTextRun. Can anyone please guide me how can I add an image dynamically to an XSLFTable cell using XSLFTextRun or by using any other approach? Thanks.","title":"Adding and image to XSLFTextRun using Apache POI","body":"<p>I am using Apache POI to add an XSLFTable dynamically to a slide, the XSLFTable can contains text and images. In docx file extension I can successfully add images to XWPFRun using following code.</p>\n<pre><code>    public void replaceXWPFRunImagePlaceholder(XWPFRun run, FormLetterImageField image) {\n        String path = image.getFile().getAbsolutePath();\n        String[] imagePathArray = path.split(IMAGE_PATH_DELIMITER);\n        String imageExtension = imagePathArray[imagePathArray.length-1];\n        \n        //Adding picture to the paragraph's run.\n        try {           \n            imageInputStream = new FileInputStream(image.getFile().getAbsolutePath());\n            run.addPicture(imageInputStream, getPictureType(imageExtension), path, Units.toEMU(image.getWidth()), Units.toEMU(image.getHeight()));\n        } catch (Exception e) {\n            log.error(e.getMessage(), e);\n        }\n    }\n</code></pre>\n<p>I am trying to achieve the same functionality using XSLFTextRun but it doesn't contains an addPicture() function to add an image to XSLFTextRun. Can anyone please guide me how can I add an image dynamically to an XSLFTable cell using XSLFTextRun or by using any other approach? Thanks.</p>\n"},{"tags":["java","google-cloud-platform","intellij-idea","environment-variables"],"comments":[{"owner":{"account_id":114128,"reputation":50422,"user_id":300257,"accept_rate":89,"display_name":"Gilbert Le Blanc"},"score":4,"creation_date":1699030686,"post_id":77418436,"comment_id":136484298,"body_markdown":"When your list gets rather large, create a file that you read.  Files aren&#39;t character limited.","body":"When your list gets rather large, create a file that you read.  Files aren&#39;t character limited."},{"owner":{"account_id":6401062,"reputation":180,"user_id":4963694,"display_name":"Captain Chaos"},"score":0,"creation_date":1699030900,"post_id":77418436,"comment_id":136484336,"body_markdown":"@GilbertLeBlanc that is an excellent idea, and it will work. I&#39;ll go that route if I need to do so. \n\nMy concern for the moment is that using a file would require deployment of new file when we update the list so it would be a slower change than modifying the env vars and bouncing the app.","body":"@GilbertLeBlanc that is an excellent idea, and it will work. I&#39;ll go that route if I need to do so.   My concern for the moment is that using a file would require deployment of new file when we update the list so it would be a slower change than modifying the env vars and bouncing the app."},{"owner":{"account_id":114128,"reputation":50422,"user_id":300257,"accept_rate":89,"display_name":"Gilbert Le Blanc"},"score":2,"creation_date":1699031104,"post_id":77418436,"comment_id":136484382,"body_markdown":"You can pass the file path and name to the app, so you can keep historical versions of the list.  You have to restart (bounce) the app anyway.","body":"You can pass the file path and name to the app, so you can keep historical versions of the list.  You have to restart (bounce) the app anyway."},{"owner":{"account_id":19435569,"reputation":1567,"user_id":21105992,"display_name":"teapot418"},"score":0,"creation_date":1699031511,"post_id":77418436,"comment_id":136484461,"body_markdown":"You could always make a [mre] and test it for yourself. The relevant limit is probably the operating system&#39;s limit on environment variable size.","body":"You could always make a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> and test it for yourself. The relevant limit is probably the operating system&#39;s limit on environment variable size."},{"owner":{"account_id":10905924,"reputation":76272,"user_id":8016720,"display_name":"John Hanley"},"score":1,"creation_date":1699032728,"post_id":77418436,"comment_id":136484678,"body_markdown":"Your question cannot be easily answered. There are many layers that affect environment variable size. 1) Some systems limit the maximum of all environment variables. For example, AWS EB limits the total to 4 KB IIRC. 2) Java is affected by the heap size setting. 3) Each OS has its own limitations. My advice: do not use environment variables to pass data. There is no point in designing future bugs.","body":"Your question cannot be easily answered. There are many layers that affect environment variable size. 1) Some systems limit the maximum of all environment variables. For example, AWS EB limits the total to 4 KB IIRC. 2) Java is affected by the heap size setting. 3) Each OS has its own limitations. My advice: do not use environment variables to pass data. There is no point in designing future bugs."}],"answers":[{"tags":[],"owner":{"account_id":47283,"reputation":703807,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"down_vote_count":0,"up_vote_count":5,"is_accepted":true,"score":5,"last_activity_date":1699033745,"creation_date":1699032496,"answer_id":77418639,"question_id":77418436,"body_markdown":"\r\nThe size of an environment variable is not limited by Java. If it is limited, the limits are imposed by the operating system or the command shell:\r\n\r\n  - https://stackoverflow.com/questions/1078031\r\n  - [What the technical reasons for the 1024 character limit on Windows Environment variables?](https://superuser.com/questions/1070272)\r\n\r\n------------------\r\n\r\nGiven that the limits are platform specific, and on some platforms they rather small, it is inadvisable to use environment variables (*or command line arguments!*) to pass significant amounts of data to an application.  There are better ways to do it; e.g. via a file, via a pipe from another program, via a [&quot;here&quot; document](https://en.wikipedia.org/wiki/Here_document) in a shell script.\r\n","title":"What is the max size of an environment variable in Java?","body":"<p>The size of an environment variable is not limited by Java. If it is limited, the limits are imposed by the operating system or the command shell:</p>\n<ul>\n<li><a href=\"https://stackoverflow.com/questions/1078031\">What is the maximum size of a Linux environment variable value?</a></li>\n<li><a href=\"https://superuser.com/questions/1070272\">What the technical reasons for the 1024 character limit on Windows Environment variables?</a></li>\n</ul>\n<hr />\n<p>Given that the limits are platform specific, and on some platforms they rather small, it is inadvisable to use environment variables (<em>or command line arguments!</em>) to pass significant amounts of data to an application.  There are better ways to do it; e.g. via a file, via a pipe from another program, via a <a href=\"https://en.wikipedia.org/wiki/Here_document\" rel=\"nofollow noreferrer\">&quot;here&quot; document</a> in a shell script.</p>\n"}],"owner":{"account_id":6401062,"reputation":180,"user_id":4963694,"display_name":"Captain Chaos"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":102,"favorite_count":0,"down_vote_count":5,"up_vote_count":0,"closed_date":1699046314,"accepted_answer_id":77418639,"answer_count":1,"score":-5,"last_activity_date":1699349318,"creation_date":1699030305,"question_id":77418436,"body_markdown":"I have an environment variable that turns a string of comma-separated variables into a List&lt;String&gt; for use in my Java app. \r\n\r\nIt currently holds a dozen entries and it looks like this:\r\n\r\n    1234,5678,9012\r\n\r\nIt works just fine now, and I&#39;ve tested with with 100 items, so the list is just shy of 500 characters, and it works, but what if we need to go to 1000 items? \r\n\r\nIs there a max size for Java ENV vars? \r\n\r\nI did a fairly thorough search through the google and didn&#39;t find anything. \r\n","title":"What is the max size of an environment variable in Java?","body":"<p>I have an environment variable that turns a string of comma-separated variables into a List for use in my Java app.</p>\n<p>It currently holds a dozen entries and it looks like this:</p>\n<pre><code>1234,5678,9012\n</code></pre>\n<p>It works just fine now, and I've tested with with 100 items, so the list is just shy of 500 characters, and it works, but what if we need to go to 1000 items?</p>\n<p>Is there a max size for Java ENV vars?</p>\n<p>I did a fairly thorough search through the google and didn't find anything.</p>\n"},{"tags":["java","oracle","spring-boot","h2","property-files"],"comments":[{"owner":{"account_id":2161358,"reputation":42668,"user_id":1915448,"accept_rate":96,"display_name":"g00glen00b"},"score":1,"creation_date":1549873076,"post_id":54625541,"comment_id":96044938,"body_markdown":"If I&#39;m not mistaken, Spring boot will use H2 by default if it can&#39;t find any configuration for the other datasource. Are you sure that your `application-oracle.properties` contains the properties necessary to configure your datasource?","body":"If I&#39;m not mistaken, Spring boot will use H2 by default if it can&#39;t find any configuration for the other datasource. Are you sure that your <code>application-oracle.properties</code> contains the properties necessary to configure your datasource?"},{"owner":{"account_id":2918489,"reputation":689,"user_id":2501230,"accept_rate":82,"display_name":"Aryan Venkat"},"score":0,"creation_date":1549879172,"post_id":54625541,"comment_id":96048082,"body_markdown":"@g00glen00b Yes it does. Edited my question with the contents of the properties file.","body":"@g00glen00b Yes it does. Edited my question with the contents of the properties file."},{"owner":{"account_id":2492135,"reputation":146,"user_id":2169393,"display_name":"jan.zanda"},"score":0,"creation_date":1549881258,"post_id":54625541,"comment_id":96049405,"body_markdown":"this does not seems to me like a problem with the property file itself. I would look into the loading @Configuration class, if given profile loads given file, etc... There may be a copypaste error or typo of some sort.","body":"this does not seems to me like a problem with the property file itself. I would look into the loading @Configuration class, if given profile loads given file, etc... There may be a copypaste error or typo of some sort."},{"owner":{"account_id":2918489,"reputation":689,"user_id":2501230,"accept_rate":82,"display_name":"Aryan Venkat"},"score":0,"creation_date":1549883132,"post_id":54625541,"comment_id":96050546,"body_markdown":"@jan.zanda I use `@SpringBootApplication` annotation on my start up class which uses `@EnableAutoConfiguration` under the hood. I have no special config class for oracle or h2.","body":"@jan.zanda I use <code>@SpringBootApplication</code> annotation on my start up class which uses <code>@EnableAutoConfiguration</code> under the hood. I have no special config class for oracle or h2."},{"owner":{"account_id":9505849,"reputation":481,"user_id":7065399,"accept_rate":75,"display_name":"agata"},"score":0,"creation_date":1549889001,"post_id":54625541,"comment_id":96053881,"body_markdown":"If I am not wrong, is because of the dependency I had the same problem, use testCompile for the h2 dependecy (if you are using gradle, I think it should work). Check this http://www.springboottutorial.com/spring-boot-and-h2-in-memory-database","body":"If I am not wrong, is because of the dependency I had the same problem, use testCompile for the h2 dependecy (if you are using gradle, I think it should work). Check this <a href=\"http://www.springboottutorial.com/spring-boot-and-h2-in-memory-database\" rel=\"nofollow noreferrer\">springboottutorial.com/spring-boot-and-h2-in-memory-database</a>"},{"owner":{"account_id":9505849,"reputation":481,"user_id":7065399,"accept_rate":75,"display_name":"agata"},"score":0,"creation_date":1549889176,"post_id":54625541,"comment_id":96053984,"body_markdown":"Please add the dependency as well. (the needed part, gradle or maven)","body":"Please add the dependency as well. (the needed part, gradle or maven)"},{"owner":{"account_id":2918489,"reputation":689,"user_id":2501230,"accept_rate":82,"display_name":"Aryan Venkat"},"score":0,"creation_date":1549889548,"post_id":54625541,"comment_id":96054189,"body_markdown":"@agata I&#39;ve been using the same: `testCompile group: &#39;com.h2database&#39;, name: &#39;h2&#39;, version: &#39;1.3.148&#39;`","body":"@agata I&#39;ve been using the same: <code>testCompile group: &#39;com.h2database&#39;, name: &#39;h2&#39;, version: &#39;1.3.148&#39;</code>"},{"owner":{"account_id":9505849,"reputation":481,"user_id":7065399,"accept_rate":75,"display_name":"agata"},"score":0,"creation_date":1549890071,"post_id":54625541,"comment_id":96054482,"body_markdown":"Hmm..then maybe one way to get rid of this is: use only one application.properties for db. (E.g. in my project I have oracle and mysql db config in application.properties and then for the test, the same application.properties is overwritten with h2 config)","body":"Hmm..then maybe one way to get rid of this is: use only one application.properties for db. (E.g. in my project I have oracle and mysql db config in application.properties and then for the test, the same application.properties is overwritten with h2 config)"}],"answers":[{"tags":[],"owner":{"account_id":7012570,"reputation":179,"user_id":13193049,"display_name":"Tamilvanan T"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1699349302,"creation_date":1699349302,"answer_id":77437017,"question_id":54625541,"body_markdown":"Did you try changing the h2 dependency scope?\r\nChanging the scope to test worked for me.\r\n\r\n\r\n    &lt;dependency&gt;\r\n         &lt;groupId&gt;com.h2database&lt;/groupId&gt;\r\n         &lt;artifactId&gt;h2&lt;/artifactId&gt;\r\n         &lt;scope&gt;test&lt;/scope&gt;\r\n    &lt;/dependency&gt;\r\n\r\n","title":"H2 database gets activated by default, although I have enabled oracle from Spring boot property files","body":"<p>Did you try changing the h2 dependency scope?\nChanging the scope to test worked for me.</p>\n<pre><code>&lt;dependency&gt;\n     &lt;groupId&gt;com.h2database&lt;/groupId&gt;\n     &lt;artifactId&gt;h2&lt;/artifactId&gt;\n     &lt;scope&gt;test&lt;/scope&gt;\n&lt;/dependency&gt;\n</code></pre>\n"}],"owner":{"account_id":2918489,"reputation":689,"user_id":2501230,"accept_rate":82,"display_name":"Aryan Venkat"},"comment_count":8,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":1335,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"answer_count":1,"score":3,"last_activity_date":1699349302,"creation_date":1549869264,"question_id":54625541,"body_markdown":"We use hierarchically organised Spring boot property files in our application.\r\nFor example,\r\n\r\nOur application.properties will just contain a single line.\r\n\r\n    spring.profiles.include = logging, kafka, oracle, misc\r\n\r\nWhere all the values separated by comma here are other property files (namely `application-logging.properties` and so on) that it&#39;s referring to (We chose this for reusability in different environments)\r\n\r\nAnd I have another properties file `application-h2.properties` that can be included while testing. So while I test, my application.properties will look like this.\r\n\r\n    spring.profiles.include = logging, kafka, h2, misc\r\n\r\nThe problem that&#39;s been bugging me here is that **my application is always considering h2 database** when it starts up, **although I include oracle**.\r\n\r\nHere&#39;s how my `application-oracle.properties` file looks.\r\n\r\n\r\n    spring.datasource.url=${ORACLE_URL}\r\n    spring.datasource.username=${ORACLE_USERNAME}\r\n    spring.datasource.password=${ORACLE_PASSWORD}\r\n    spring.jpa.show-sql=true\r\n    spring.datasource.driver-class-name=oracle.jdbc.driver.OracleDriver\r\n    spring.jpa.database-platform=org.hibernate.dialect.Oracle10gDialect\r\n    spring.jpa.properties.hibernate.jdbc.time_zone = UTC\r\n\r\nThe only way I have to get Oracle enabled is that I have remove the h2 properties file, and also remove the h2 dependency from the gradle build file.\r\n\r\nAppreciate your help!\r\n","title":"H2 database gets activated by default, although I have enabled oracle from Spring boot property files","body":"<p>We use hierarchically organised Spring boot property files in our application.\nFor example,</p>\n\n<p>Our application.properties will just contain a single line.</p>\n\n<pre><code>spring.profiles.include = logging, kafka, oracle, misc\n</code></pre>\n\n<p>Where all the values separated by comma here are other property files (namely <code>application-logging.properties</code> and so on) that it's referring to (We chose this for reusability in different environments)</p>\n\n<p>And I have another properties file <code>application-h2.properties</code> that can be included while testing. So while I test, my application.properties will look like this.</p>\n\n<pre><code>spring.profiles.include = logging, kafka, h2, misc\n</code></pre>\n\n<p>The problem that's been bugging me here is that <strong>my application is always considering h2 database</strong> when it starts up, <strong>although I include oracle</strong>.</p>\n\n<p>Here's how my <code>application-oracle.properties</code> file looks.</p>\n\n<pre><code>spring.datasource.url=${ORACLE_URL}\nspring.datasource.username=${ORACLE_USERNAME}\nspring.datasource.password=${ORACLE_PASSWORD}\nspring.jpa.show-sql=true\nspring.datasource.driver-class-name=oracle.jdbc.driver.OracleDriver\nspring.jpa.database-platform=org.hibernate.dialect.Oracle10gDialect\nspring.jpa.properties.hibernate.jdbc.time_zone = UTC\n</code></pre>\n\n<p>The only way I have to get Oracle enabled is that I have remove the h2 properties file, and also remove the h2 dependency from the gradle build file.</p>\n\n<p>Appreciate your help!</p>\n"},{"tags":["java","swing","jtable","swingx","jtableheader"],"comments":[{"owner":{"account_id":44852,"reputation":322224,"user_id":131872,"accept_rate":100,"display_name":"camickr"},"score":0,"creation_date":1510066763,"post_id":47158447,"comment_id":81271474,"body_markdown":"`Please suggest me what should i do.` - You are using custom code you fount on the internet. There YOU need to debug the code you found to figure out why the columns sizes don&#39;t match.","body":"<code>Please suggest me what should i do.</code> - You are using custom code you fount on the internet. There YOU need to debug the code you found to figure out why the columns sizes don&#39;t match."},{"owner":{"account_id":969721,"reputation":344508,"user_id":992484,"accept_rate":60,"display_name":"MadProgrammer"},"score":1,"creation_date":1510085794,"post_id":47158447,"comment_id":81283222,"body_markdown":"While not a direct answer to you question - I find the solution you&#39;ve followed to be limited; instead, I [wrote a different version](https://stackoverflow.com/questions/20206578/show-column-header-on-dragging-column/20208995#20208995) which supports many of the features that are now available which weren&#39;t when the original version was written (sorting, dragging, etc) - I also agree with Camickr, this is not something we can overly help you with","body":"While not a direct answer to you question - I find the solution you&#39;ve followed to be limited; instead, I <a href=\"https://stackoverflow.com/questions/20206578/show-column-header-on-dragging-column/20208995#20208995\">wrote a different version</a> which supports many of the features that are now available which weren&#39;t when the original version was written (sorting, dragging, etc) - I also agree with Camickr, this is not something we can overly help you with"}],"answers":[{"tags":[],"owner":{"account_id":9736706,"reputation":1807,"user_id":7219733,"display_name":"Peter Hassaballah"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1510060303,"creation_date":1510060303,"answer_id":47158861,"question_id":47158447,"body_markdown":"*BorderLayout.CENTER* is the simple answer, but notice if you want to add more than one item (which is typically the case) then you must understand that when using BORDERLAYOUT.NORTH for example there must exist an object that has a layout of BORDERLAYOUT.SOUTH in that case JAVA understands that these object are on top of each other , same applies to EAST and WEST\r\n","title":"How to align border of jtable columns with groupable header","body":"<p><em>BorderLayout.CENTER</em> is the simple answer, but notice if you want to add more than one item (which is typically the case) then you must understand that when using BORDERLAYOUT.NORTH for example there must exist an object that has a layout of BORDERLAYOUT.SOUTH in that case JAVA understands that these object are on top of each other , same applies to EAST and WEST</p>\n"},{"tags":[],"owner":{"account_id":19808077,"reputation":1,"user_id":14507604,"display_name":"Akilesh Balireddi"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1699348782,"creation_date":1699348782,"answer_id":77436941,"question_id":47158447,"body_markdown":"I did the code change which helped me to resolve the issue . Hope its helps you\r\n\r\nIn class : GroupableTableHeaderUI \r\n\r\ncellRect.width = aColumn.getWidth() + columnMargin; // Remove the column margin which is adding 1px to the width of the header column\r\n\r\nNew line will have : cellRect.width = aColumn.getWidth()\r\n\r\nIn class : ColumnGroup \r\n\r\ncomment line :  // width += margin;\r\n\r\nThis has helped me to align the table columns and the header column . Please find below image \r\n\r\n[enter image description here][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/uzOQY.png","title":"How to align border of jtable columns with groupable header","body":"<p>I did the code change which helped me to resolve the issue . Hope its helps you</p>\n<p>In class : GroupableTableHeaderUI</p>\n<p>cellRect.width = aColumn.getWidth() + columnMargin; // Remove the column margin which is adding 1px to the width of the header column</p>\n<p>New line will have : cellRect.width = aColumn.getWidth()</p>\n<p>In class : ColumnGroup</p>\n<p>comment line :  // width += margin;</p>\n<p>This has helped me to align the table columns and the header column . Please find below image</p>\n<p><a href=\"https://i.stack.imgur.com/uzOQY.png\" rel=\"nofollow noreferrer\">enter image description here</a></p>\n"}],"owner":{"account_id":6394478,"reputation":23,"user_id":4959363,"accept_rate":50,"display_name":"AspOpener"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":235,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1699348782,"creation_date":1510058943,"question_id":47158447,"body_markdown":"i am working on groupable Header in `JTable`. I followed the previous ways mentioned in StackOverFlow and have been able to add groupable header in `JTable` looking at:\r\n\r\nhttp://www.java2s.com/Code/Java/Swing-Components/GroupableGroupHeaderExample.htm\r\n\r\nMy problem is that there is an alignment issue between header and column. I want to make both the header and column border in same alignment. As this image shows difference in border of both the header and column:\r\n\r\n[![enter image description here][1]][1]\r\n\r\nPlease suggest me what should i do.\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/ZsmuQ.png","title":"How to align border of jtable columns with groupable header","body":"<p>i am working on groupable Header in <code>JTable</code>. I followed the previous ways mentioned in StackOverFlow and have been able to add groupable header in <code>JTable</code> looking at:</p>\n\n<p><a href=\"http://www.java2s.com/Code/Java/Swing-Components/GroupableGroupHeaderExample.htm\" rel=\"nofollow noreferrer\">http://www.java2s.com/Code/Java/Swing-Components/GroupableGroupHeaderExample.htm</a></p>\n\n<p>My problem is that there is an alignment issue between header and column. I want to make both the header and column border in same alignment. As this image shows difference in border of both the header and column:</p>\n\n<p><a href=\"https://i.stack.imgur.com/ZsmuQ.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/ZsmuQ.png\" alt=\"enter image description here\"></a></p>\n\n<p>Please suggest me what should i do.</p>\n"},{"tags":["java","maven","jersey","jax-rs","tomcat10"],"comments":[{"owner":{"account_id":3013228,"reputation":205797,"user_id":2587435,"accept_rate":88,"display_name":"Paul Samsotha"},"score":0,"creation_date":1673815890,"post_id":75122190,"comment_id":132576721,"body_markdown":"Can you post the results of `mvn dependency:tree`","body":"Can you post the results of <code>mvn dependency:tree</code>"},{"owner":{"account_id":135551,"reputation":10091,"user_id":338479,"accept_rate":80,"display_name":"Edward Falk"},"score":0,"creation_date":1694131930,"post_id":75122190,"comment_id":135854653,"body_markdown":"Double-checking: is the spelling of `jakarta.jakartaee-api` correct?","body":"Double-checking: is the spelling of <code>jakarta.jakartaee-api</code> correct?"}],"answers":[{"tags":[],"owner":{"account_id":2887623,"reputation":3310,"user_id":2477084,"display_name":"Tomas Bjerre"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1699348389,"creation_date":1684229879,"answer_id":76261517,"question_id":75122190,"body_markdown":"Just to clarify. The problem here is that `SystemPropertiesConfigurationModel` extends `jakarta.ws.rs.core.Configuration` and `Configuration` is expected to have `hasProperty` implemented. \r\n\r\n`hasProperty` is implemented in JavaEE10 and the fix here is to have that API on classpath:\r\n\r\n```xml\r\n&lt;dependency&gt;\r\n  &lt;groupId&gt;jakarta.platform&lt;/groupId&gt;\r\n  &lt;artifactId&gt;jakarta.jakartaee-api&lt;/artifactId&gt;\r\n  &lt;version&gt;10.0.0&lt;/version&gt;\r\n&lt;/dependency&gt;\r\n```\r\n\r\nOr just the artifact causing the problem:\r\n\r\n```xml\r\n&lt;dependency&gt;\r\n  &lt;groupId&gt;jakarta.ws.rs&lt;/groupId&gt;\r\n  &lt;artifactId&gt;jakarta.ws.rs-api&lt;/artifactId&gt;\r\n  &lt;version&gt;10.0.0&lt;/version&gt;\r\n&lt;/dependency&gt;\r\n```","title":"java.lang.NoSuchMethodError: &#39;boolean org.glassfish.jersey.internal.config.SystemPropertiesConfigurationModel.hasProperty","body":"<p>Just to clarify. The problem here is that <code>SystemPropertiesConfigurationModel</code> extends <code>jakarta.ws.rs.core.Configuration</code> and <code>Configuration</code> is expected to have <code>hasProperty</code> implemented.</p>\n<p><code>hasProperty</code> is implemented in JavaEE10 and the fix here is to have that API on classpath:</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;dependency&gt;\n  &lt;groupId&gt;jakarta.platform&lt;/groupId&gt;\n  &lt;artifactId&gt;jakarta.jakartaee-api&lt;/artifactId&gt;\n  &lt;version&gt;10.0.0&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n<p>Or just the artifact causing the problem:</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;dependency&gt;\n  &lt;groupId&gt;jakarta.ws.rs&lt;/groupId&gt;\n  &lt;artifactId&gt;jakarta.ws.rs-api&lt;/artifactId&gt;\n  &lt;version&gt;10.0.0&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n"}],"owner":{"account_id":17836197,"reputation":75,"user_id":12955152,"display_name":"Muhammadoufi"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":824,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1699348389,"creation_date":1673742218,"question_id":75122190,"body_markdown":"I am trying to build api using `jersey ``jax-rs `, `maven` and i run it on `tomcat-v10`\r\nThose are my files:\r\n\r\n\r\n**Ressource.java**\r\n\r\n    package com.api;\r\n    \r\n    import jakarta.ws.rs.GET;\r\n    import jakarta.ws.rs.Path;\r\n    import jakarta.ws.rs.Produces;\r\n    import jakarta.ws.rs.core.MediaType;\r\n    \r\n    @Path(&quot;myresource&quot;)\r\n    public class Ressources {\r\n    \t\r\n    \t\r\n    \t    @GET\r\n    \t    @Produces(MediaType.TEXT_PLAIN)\r\n    \t    public String sayHello(){\r\n    \t        return  &quot;say Hello&quot;;\r\n    \t    }\r\n    \t\r\n    \r\n    }\r\n**web.xml**\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n    &lt;!-- This web.xml file is not required when using Servlet 3.0 container,\r\n         see implementation details http://jersey.java.net/nonav/documentation/latest/jax-rs.html --&gt;\r\n    &lt;web-app version=&quot;2.5&quot; xmlns=&quot;http://java.sun.com/xml/ns/javaee&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xsi:schemaLocation=&quot;http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd&quot;&gt;\r\n        &lt;servlet&gt;\r\n            &lt;servlet-name&gt;Jersey Web Application&lt;/servlet-name&gt;\r\n            &lt;servlet-class&gt;org.glassfish.jersey.servlet.ServletContainer&lt;/servlet-class&gt;\r\n            &lt;init-param&gt;\r\n                &lt;param-name&gt;jersey.config.server.provider.packages&lt;/param-name&gt;\r\n                &lt;param-value&gt;com.api&lt;/param-value&gt;\r\n            &lt;/init-param&gt;\r\n            &lt;load-on-startup&gt;1&lt;/load-on-startup&gt;\r\n        &lt;/servlet&gt;\r\n        &lt;servlet-mapping&gt;\r\n            &lt;servlet-name&gt;Jersey Web Application&lt;/servlet-name&gt;\r\n            &lt;url-pattern&gt;/rest/*&lt;/url-pattern&gt;\r\n        &lt;/servlet-mapping&gt;\r\n    &lt;/web-app&gt;\r\n\r\n\r\n\r\n**pom.xml**\r\n\r\n    &lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\r\n      &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n      &lt;groupId&gt;api_java&lt;/groupId&gt;\r\n      &lt;artifactId&gt;api_java&lt;/artifactId&gt;\r\n      &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\r\n      &lt;packaging&gt;war&lt;/packaging&gt;\r\n      &lt;name&gt;api_java&lt;/name&gt;\r\n      &lt;description&gt;api java rest&lt;/description&gt;\r\n      &lt;dependencyManagement&gt;\r\n      \t&lt;dependencies&gt;\r\n      \t\t&lt;dependency&gt;\r\n      \t\t\t&lt;groupId&gt;org.glassfish.jersey&lt;/groupId&gt;\r\n      \t\t\t&lt;artifactId&gt;jersey-bom&lt;/artifactId&gt;\r\n      \t\t\t&lt;version&gt;${jersey.version}&lt;/version&gt;\r\n      \t\t\t&lt;type&gt;pom&lt;/type&gt;\r\n      \t\t\t&lt;scope&gt;import&lt;/scope&gt;\r\n      \t\t&lt;/dependency&gt;\r\n      \t&lt;/dependencies&gt;\r\n      &lt;/dependencyManagement&gt;\r\n       &lt;dependencies&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;jakarta.platform&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;jakarta.jakartaee-api&lt;/artifactId&gt;\r\n    \t\t\t&lt;version&gt;9.1.0&lt;/version&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;org.glassfish.jersey.core&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;jersey-server&lt;/artifactId&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t\r\n    \t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;org.glassfish.jersey.containers&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;jersey-container-servlet-core&lt;/artifactId&gt;\r\n    \t\t\t&lt;!-- use the following artifactId if you don&#39;t need servlet 2.x compatibility --&gt;\r\n    \t\t\t&lt;!-- artifactId&gt;jersey-container-servlet&lt;/artifactId --&gt;\r\n    \t\t\t\r\n    \t\t&lt;/dependency&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;org.glassfish.jersey.inject&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;jersey-hk2&lt;/artifactId&gt;\r\n    \t\t\t&lt;/dependency&gt;\r\n    \t\t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;com.github.javafaker&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;javafaker&lt;/artifactId&gt;\r\n    \t\t\t&lt;version&gt;1.0.2&lt;/version&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t&lt;/dependencies&gt;\r\n    \t&lt;properties&gt;\r\n    \t\t&lt;jersey.version&gt;3.1.0&lt;/jersey.version&gt;\r\n    \t\t&lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\r\n    \t&lt;/properties&gt;\r\n      &lt;build&gt;\r\n        &lt;plugins&gt;\r\n          &lt;plugin&gt;\r\n            &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\r\n            &lt;version&gt;3.8.1&lt;/version&gt;\r\n            &lt;configuration&gt;\r\n              &lt;source&gt;1.8&lt;/source&gt;\r\n              &lt;target&gt;1.8&lt;/target&gt;\r\n            &lt;/configuration&gt;\r\n          &lt;/plugin&gt;\r\n          &lt;plugin&gt;\r\n            &lt;artifactId&gt;maven-war-plugin&lt;/artifactId&gt;\r\n            &lt;version&gt;3.2.3&lt;/version&gt;\r\n          &lt;/plugin&gt;\r\n        &lt;/plugins&gt;\r\n      &lt;/build&gt;\r\n    &lt;/project&gt;\r\n**This is the Error showed by tomcat**\r\n\r\n\r\n[![This is the Error showed by tomcat ][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/UnTpd.png\r\n\r\n**Update: Solved**\r\n\r\nI don&#39;t need the dependency. jakarta-plateform\r\n\r\n    &lt;dependency&gt;\r\n            &lt;groupId&gt;jakarta.platform&lt;/groupId&gt;\r\n            &lt;artifactId&gt;jakarta.jakartaee-api&lt;/artifactId&gt;\r\n            &lt;version&gt;9.1.0&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n\r\nOr if I add the attribute. `&lt;scope&gt;provided&lt;/scope&gt;` \r\nto this `dependency` the problem will be solved, also!\r\n\r\n\r\n \r\n","title":"java.lang.NoSuchMethodError: &#39;boolean org.glassfish.jersey.internal.config.SystemPropertiesConfigurationModel.hasProperty","body":"<p>I am trying to build api using <code>jersey ``jax-rs </code>, <code>maven</code> and i run it on <code>tomcat-v10</code>\nThose are my files:</p>\n<p><strong>Ressource.java</strong></p>\n<pre><code>package com.api;\n\nimport jakarta.ws.rs.GET;\nimport jakarta.ws.rs.Path;\nimport jakarta.ws.rs.Produces;\nimport jakarta.ws.rs.core.MediaType;\n\n@Path(&quot;myresource&quot;)\npublic class Ressources {\n    \n    \n        @GET\n        @Produces(MediaType.TEXT_PLAIN)\n        public String sayHello(){\n            return  &quot;say Hello&quot;;\n        }\n    \n\n}\n</code></pre>\n<p><strong>web.xml</strong></p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;!-- This web.xml file is not required when using Servlet 3.0 container,\n     see implementation details http://jersey.java.net/nonav/documentation/latest/jax-rs.html --&gt;\n&lt;web-app version=&quot;2.5&quot; xmlns=&quot;http://java.sun.com/xml/ns/javaee&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xsi:schemaLocation=&quot;http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd&quot;&gt;\n    &lt;servlet&gt;\n        &lt;servlet-name&gt;Jersey Web Application&lt;/servlet-name&gt;\n        &lt;servlet-class&gt;org.glassfish.jersey.servlet.ServletContainer&lt;/servlet-class&gt;\n        &lt;init-param&gt;\n            &lt;param-name&gt;jersey.config.server.provider.packages&lt;/param-name&gt;\n            &lt;param-value&gt;com.api&lt;/param-value&gt;\n        &lt;/init-param&gt;\n        &lt;load-on-startup&gt;1&lt;/load-on-startup&gt;\n    &lt;/servlet&gt;\n    &lt;servlet-mapping&gt;\n        &lt;servlet-name&gt;Jersey Web Application&lt;/servlet-name&gt;\n        &lt;url-pattern&gt;/rest/*&lt;/url-pattern&gt;\n    &lt;/servlet-mapping&gt;\n&lt;/web-app&gt;\n</code></pre>\n<p><strong>pom.xml</strong></p>\n<pre><code>&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\n  &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n  &lt;groupId&gt;api_java&lt;/groupId&gt;\n  &lt;artifactId&gt;api_java&lt;/artifactId&gt;\n  &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\n  &lt;packaging&gt;war&lt;/packaging&gt;\n  &lt;name&gt;api_java&lt;/name&gt;\n  &lt;description&gt;api java rest&lt;/description&gt;\n  &lt;dependencyManagement&gt;\n    &lt;dependencies&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.glassfish.jersey&lt;/groupId&gt;\n            &lt;artifactId&gt;jersey-bom&lt;/artifactId&gt;\n            &lt;version&gt;${jersey.version}&lt;/version&gt;\n            &lt;type&gt;pom&lt;/type&gt;\n            &lt;scope&gt;import&lt;/scope&gt;\n        &lt;/dependency&gt;\n    &lt;/dependencies&gt;\n  &lt;/dependencyManagement&gt;\n   &lt;dependencies&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;jakarta.platform&lt;/groupId&gt;\n            &lt;artifactId&gt;jakarta.jakartaee-api&lt;/artifactId&gt;\n            &lt;version&gt;9.1.0&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.glassfish.jersey.core&lt;/groupId&gt;\n            &lt;artifactId&gt;jersey-server&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n    \n    &lt;dependency&gt;\n            &lt;groupId&gt;org.glassfish.jersey.containers&lt;/groupId&gt;\n            &lt;artifactId&gt;jersey-container-servlet-core&lt;/artifactId&gt;\n            &lt;!-- use the following artifactId if you don't need servlet 2.x compatibility --&gt;\n            &lt;!-- artifactId&gt;jersey-container-servlet&lt;/artifactId --&gt;\n            \n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.glassfish.jersey.inject&lt;/groupId&gt;\n            &lt;artifactId&gt;jersey-hk2&lt;/artifactId&gt;\n            &lt;/dependency&gt;\n            &lt;dependency&gt;\n            &lt;groupId&gt;com.github.javafaker&lt;/groupId&gt;\n            &lt;artifactId&gt;javafaker&lt;/artifactId&gt;\n            &lt;version&gt;1.0.2&lt;/version&gt;\n        &lt;/dependency&gt;\n    &lt;/dependencies&gt;\n    &lt;properties&gt;\n        &lt;jersey.version&gt;3.1.0&lt;/jersey.version&gt;\n        &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\n    &lt;/properties&gt;\n  &lt;build&gt;\n    &lt;plugins&gt;\n      &lt;plugin&gt;\n        &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\n        &lt;version&gt;3.8.1&lt;/version&gt;\n        &lt;configuration&gt;\n          &lt;source&gt;1.8&lt;/source&gt;\n          &lt;target&gt;1.8&lt;/target&gt;\n        &lt;/configuration&gt;\n      &lt;/plugin&gt;\n      &lt;plugin&gt;\n        &lt;artifactId&gt;maven-war-plugin&lt;/artifactId&gt;\n        &lt;version&gt;3.2.3&lt;/version&gt;\n      &lt;/plugin&gt;\n    &lt;/plugins&gt;\n  &lt;/build&gt;\n&lt;/project&gt;\n</code></pre>\n<p><strong>This is the Error showed by tomcat</strong></p>\n<p><a href=\"https://i.stack.imgur.com/UnTpd.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/UnTpd.png\" alt=\"This is the Error showed by tomcat \" /></a></p>\n<p><strong>Update: Solved</strong></p>\n<p>I don't need the dependency. jakarta-plateform</p>\n<pre><code>&lt;dependency&gt;\n        &lt;groupId&gt;jakarta.platform&lt;/groupId&gt;\n        &lt;artifactId&gt;jakarta.jakartaee-api&lt;/artifactId&gt;\n        &lt;version&gt;9.1.0&lt;/version&gt;\n    &lt;/dependency&gt;\n</code></pre>\n<p>Or if I add the attribute. <code>&lt;scope&gt;provided&lt;/scope&gt;</code>\nto this <code>dependency</code> the problem will be solved, also!</p>\n"},{"tags":["java","android","kotlin","android-handler"],"comments":[{"owner":{"account_id":21865216,"reputation":186,"user_id":16155502,"display_name":"ali"},"score":0,"creation_date":1702033502,"post_id":61023968,"comment_id":136850871,"body_markdown":"Just use new before the code.  new Handler().postDelayed({\n    context?.let {\n        //code\n    }\n}, 3000)","body":"Just use new before the code.  new Handler().postDelayed({     context?.let {         //code     } }, 3000)"}],"answers":[{"tags":[],"owner":{"account_id":9449142,"reputation":199,"user_id":7026713,"display_name":"ajithvgiri"},"down_vote_count":1,"up_vote_count":10,"is_accepted":false,"score":9,"last_activity_date":1600755738,"creation_date":1585976601,"answer_id":61023996,"question_id":61023968,"body_markdown":"Use Executor instead of handler for more info [Executor][1].&lt;br/&gt;\r\nTo achieve post delay use `ScheduledExecutorService`:\r\n\r\n    ScheduledExecutorService worker = Executors.newSingleThreadScheduledExecutor();\r\n    Runnable runnable = () -&gt; {\r\n        public void run() {\r\n            // Do something\r\n        }\r\n    };\r\n    worker.schedule(runnable, 2000, TimeUnit.MILLISECONDS);\r\n\r\n  [1]: https://developer.android.com/reference/java/util/concurrent/Executor","title":"What do I use now that Handler() is deprecated?","body":"<p>Use Executor instead of handler for more info <a href=\"https://developer.android.com/reference/java/util/concurrent/Executor\" rel=\"noreferrer\">Executor</a>.<br/>\nTo achieve post delay use <code>ScheduledExecutorService</code>:</p>\n<pre><code>ScheduledExecutorService worker = Executors.newSingleThreadScheduledExecutor();\nRunnable runnable = () -&gt; {\n    public void run() {\n        // Do something\n    }\n};\nworker.schedule(runnable, 2000, TimeUnit.MILLISECONDS);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3250978,"reputation":25982,"user_id":2741273,"accept_rate":71,"display_name":"Francesc"},"down_vote_count":0,"up_vote_count":24,"is_accepted":false,"score":24,"last_activity_date":1585980331,"creation_date":1585980331,"answer_id":61024388,"question_id":61023968,"body_markdown":"Consider using coroutines\r\n\r\n    scope.launch {\r\n        delay(3000L)\r\n        // do stuff\r\n    }\r\n","title":"What do I use now that Handler() is deprecated?","body":"<p>Consider using coroutines</p>\n\n<pre><code>scope.launch {\n    delay(3000L)\n    // do stuff\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1790714,"reputation":91128,"user_id":1631193,"accept_rate":71,"display_name":"Gabe Sechan"},"down_vote_count":0,"up_vote_count":29,"is_accepted":false,"score":29,"last_activity_date":1585987020,"creation_date":1585987020,"answer_id":61025248,"question_id":61023968,"body_markdown":"The deprecated function is that constructor for Handler.  Use `Handler(Looper.myLooper()) .postDelayed(runnable, delay)` instead","title":"What do I use now that Handler() is deprecated?","body":"<p>The deprecated function is that constructor for Handler.  Use <code>Handler(Looper.myLooper()) .postDelayed(runnable, delay)</code> instead</p>\n"},{"tags":[],"owner":{"account_id":3670692,"reputation":323,"user_id":3057984,"accept_rate":75,"display_name":"KNOX.C"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1636598927,"creation_date":1589383189,"answer_id":61778377,"question_id":61023968,"body_markdown":"According to the document (https://developer.android.com/reference/android/os/Handler#Handler()):\r\n\r\n&gt; Implicitly choosing a Looper during Handler construction can lead to bugs where operations are silently lost (if the Handler is not expecting new tasks and quits), crashes (if a handler is sometimes created on a thread without a Looper active), or race conditions, where the thread a handler is associated with is not what the author anticipated. Instead, use an Executor or specify the Looper explicitly, using Looper#getMainLooper, {link android.view.View#getHandler}, or similar. If the implicit thread local behavior is required for compatibility, use new Handler(Looper.myLooper()) to make it clear to readers.\r\n\r\nWe should stop using the constructor without a Looper, and specify a Looper instead.","title":"What do I use now that Handler() is deprecated?","body":"<p>According to the document (<a href=\"https://developer.android.com/reference/android/os/Handler#Handler()\" rel=\"nofollow noreferrer\">https://developer.android.com/reference/android/os/Handler#Handler()</a>):</p>\n<blockquote>\n<p>Implicitly choosing a Looper during Handler construction can lead to bugs where operations are silently lost (if the Handler is not expecting new tasks and quits), crashes (if a handler is sometimes created on a thread without a Looper active), or race conditions, where the thread a handler is associated with is not what the author anticipated. Instead, use an Executor or specify the Looper explicitly, using Looper#getMainLooper, {link android.view.View#getHandler}, or similar. If the implicit thread local behavior is required for compatibility, use new Handler(Looper.myLooper()) to make it clear to readers.</p>\n</blockquote>\n<p>We should stop using the constructor without a Looper, and specify a Looper instead.</p>\n"},{"tags":[],"owner":{"account_id":347847,"reputation":2671,"user_id":682216,"accept_rate":30,"display_name":"Nicolas Jafelle"},"down_vote_count":0,"up_vote_count":79,"is_accepted":false,"score":79,"last_activity_date":1601607739,"creation_date":1592596609,"answer_id":62477706,"question_id":61023968,"body_markdown":"If you want to avoid the null check thing in Kotlin (`?` or `!!`) you can use `Looper.getMainLooper()` if your `Handler` is working with some UI related thing, like this:\r\n\r\n```\r\nHandler(Looper.getMainLooper()).postDelayed({\r\n   Toast.makeText(this@MainActivity, &quot;LOOPER&quot;, Toast.LENGTH_SHORT).show()\r\n}, 3000)\r\n```\r\n\r\nNote: use `requireContext()` instead of `this@MainActivity` if you are using fragment.","title":"What do I use now that Handler() is deprecated?","body":"<p>If you want to avoid the null check thing in Kotlin (<code>?</code> or <code>!!</code>) you can use <code>Looper.getMainLooper()</code> if your <code>Handler</code> is working with some UI related thing, like this:</p>\n<pre><code>Handler(Looper.getMainLooper()).postDelayed({\n   Toast.makeText(this@MainActivity, &quot;LOOPER&quot;, Toast.LENGTH_SHORT).show()\n}, 3000)\n</code></pre>\n<p>Note: use <code>requireContext()</code> instead of <code>this@MainActivity</code> if you are using fragment.</p>\n"},{"tags":[],"owner":{"account_id":19126615,"reputation":111,"user_id":13969466,"display_name":"Muhammad Nasir Aziz"},"down_vote_count":0,"up_vote_count":10,"is_accepted":false,"score":10,"last_activity_date":1597334214,"creation_date":1597325764,"answer_id":63396407,"question_id":61023968,"body_markdown":"use this\r\n\r\n```kotlin\r\nLooper.myLooper()?.let {\r\n    Handler(it).postDelayed({\r\n        //Your Code\r\n    },2500)\r\n}\r\n```","title":"What do I use now that Handler() is deprecated?","body":"<p>use this</p>\n<pre class=\"lang-kotlin prettyprint-override\"><code>Looper.myLooper()?.let {\n    Handler(it).postDelayed({\n        //Your Code\n    },2500)\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":7516047,"reputation":31,"user_id":6122172,"display_name":"matrixmike"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1598242914,"creation_date":1598242914,"answer_id":63554686,"question_id":61023968,"body_markdown":"The handler() etc code is generated by the Android Studio 4.0.1 when a Fullscreen Activity, for example, is created from scratch. I know that we are being encouraged to use Kotlin, which I do, but from time to time I use sample projects to get an idea going. \r\nIt seems strange that we are chastised by AS when AS actually generates the code. It might be a useful academic activity to go through the errors and fix them but maybe AS could generate new clean code for us enthusiasts...  ","title":"What do I use now that Handler() is deprecated?","body":"<p>The handler() etc code is generated by the Android Studio 4.0.1 when a Fullscreen Activity, for example, is created from scratch. I know that we are being encouraged to use Kotlin, which I do, but from time to time I use sample projects to get an idea going.\nIt seems strange that we are chastised by AS when AS actually generates the code. It might be a useful academic activity to go through the errors and fix them but maybe AS could generate new clean code for us enthusiasts...</p>\n"},{"tags":[],"owner":{"account_id":7612618,"reputation":15612,"user_id":5773037,"display_name":"Nikunj Paradva"},"down_vote_count":0,"up_vote_count":691,"is_accepted":true,"score":691,"last_activity_date":1699348339,"creation_date":1599846018,"answer_id":63851895,"question_id":61023968,"body_markdown":"Only the parameterless constructor is deprecated, it is now preferred that you specify the `Looper` in the constructor via the `Looper.getMainLooper()` method.\r\n\r\n## Use it for Java\r\n    new Handler(Looper.getMainLooper()).postDelayed(new Runnable() {\r\n        @Override\r\n        public void run() {\r\n            // Your Code\r\n        }\r\n    }, 3000);\r\n\r\n## Use it for Kotlin\r\n    Handler(Looper.getMainLooper()).postDelayed({\r\n        // Your Code\r\n    }, 3000)\r\n\r\nSource : [developer.android.com][1]\r\n\r\n\r\n  [1]: https://developer.android.com/reference/android/os/Handler#Handler()","title":"What do I use now that Handler() is deprecated?","body":"<p>Only the parameterless constructor is deprecated, it is now preferred that you specify the <code>Looper</code> in the constructor via the <code>Looper.getMainLooper()</code> method.</p>\n<h2>Use it for Java</h2>\n<pre><code>new Handler(Looper.getMainLooper()).postDelayed(new Runnable() {\n    @Override\n    public void run() {\n        // Your Code\n    }\n}, 3000);\n</code></pre>\n<h2>Use it for Kotlin</h2>\n<pre><code>Handler(Looper.getMainLooper()).postDelayed({\n    // Your Code\n}, 3000)\n</code></pre>\n<p>Source : <a href=\"https://developer.android.com/reference/android/os/Handler#Handler()\" rel=\"noreferrer\">developer.android.com</a></p>\n"},{"tags":[],"owner":{"account_id":13384002,"reputation":711,"user_id":9658449,"display_name":"Jeremiah Polo"},"down_vote_count":0,"up_vote_count":7,"is_accepted":false,"score":7,"last_activity_date":1601559597,"creation_date":1601559597,"answer_id":64156622,"question_id":61023968,"body_markdown":"Provide a looper in the Handler Constructor \r\n\r\n    Handler(Looper.getMainLooper())","title":"What do I use now that Handler() is deprecated?","body":"<p>Provide a looper in the Handler Constructor</p>\n<pre><code>Handler(Looper.getMainLooper())\n</code></pre>\n"},{"tags":[],"owner":{"account_id":6947828,"reputation":2546,"user_id":5331566,"accept_rate":88,"display_name":"Shaon"},"down_vote_count":0,"up_vote_count":22,"is_accepted":false,"score":22,"last_activity_date":1620534831,"creation_date":1602597142,"answer_id":64336552,"question_id":61023968,"body_markdown":"Using lifecycle scope this is more easy. Inside activity or fragment. \r\n\r\n     lifecycleScope.launch {\r\n         delay(2000)\r\n         // Do your stuff\r\n     }\r\n\r\nor use handler\r\n\r\n            Handler(Looper.myLooper()!!)\r\n","title":"What do I use now that Handler() is deprecated?","body":"<p>Using lifecycle scope this is more easy. Inside activity or fragment.</p>\n<pre><code> lifecycleScope.launch {\n     delay(2000)\n     // Do your stuff\n }\n</code></pre>\n<p>or use handler</p>\n<pre><code>        Handler(Looper.myLooper()!!)\n</code></pre>\n"},{"tags":[],"owner":{"account_id":11562480,"reputation":6622,"user_id":8471798,"display_name":"canerkaseler"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1621619702,"creation_date":1603099089,"answer_id":64424433,"question_id":61023968,"body_markdown":"**Java Answer**\r\n\r\nI wrote a method to use easily. You can use this method directly in your project. *delayTimeMillis* can be 2000, it means that this code will run ***after*** 2 seconds.\r\n\r\n    private void runJobWithDelay(int delayTimeMillis){\r\n        new Handler(Looper.getMainLooper()).postDelayed(new Runnable() {\r\n            @Override\r\n            public void run() {\r\n                //todo: you can call your method what you want.\r\n            }\r\n        }, delayTimeMillis);\r\n    }\r\n\r\n","title":"What do I use now that Handler() is deprecated?","body":"<p><strong>Java Answer</strong></p>\n<p>I wrote a method to use easily. You can use this method directly in your project. <em>delayTimeMillis</em> can be 2000, it means that this code will run <em><strong>after</strong></em> 2 seconds.</p>\n<pre><code>private void runJobWithDelay(int delayTimeMillis){\n    new Handler(Looper.getMainLooper()).postDelayed(new Runnable() {\n        @Override\n        public void run() {\n            //todo: you can call your method what you want.\n        }\n    }, delayTimeMillis);\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":13381081,"reputation":13847,"user_id":9656320,"display_name":"Son Truong"},"down_vote_count":1,"up_vote_count":96,"is_accepted":false,"score":95,"last_activity_date":1688718027,"creation_date":1606782096,"answer_id":65083041,"question_id":61023968,"body_markdown":"From API level 30, there are 2 constructors that are deprecated.\r\n\r\n- [Handler()][1]\r\n\r\n- [Handler(Handler.Callback)][2]\r\n\r\nGoogle explains the reason below.\r\n\r\n&gt; Implicitly choosing a Looper during\r\n&gt; Handler construction can lead to bugs where operations are silently\r\n&gt; lost (if the Handler is not expecting new tasks and quits), crashes\r\n&gt; (if a handler is sometimes created on a thread without a Looper\r\n&gt; active), or race conditions, where the thread a handler is associated\r\n&gt; with is not what the author anticipated. Instead, use an Executor or\r\n&gt; specify the Looper explicitly, using Looper#getMainLooper, {link\r\n&gt; android.view.View#getHandler}, or similar. If the implicit thread\r\n&gt; local behavior is required for compatibility, use new\r\n&gt; Handler(Looper.myLooper(), callback) to make it clear to readers.\r\n\r\n**Solution 1:** Use an [Executor][3]\r\n\r\n**1.** Execute code in the main thread.\r\n\r\n**Java**\r\n\r\n    // Create an executor that executes tasks in the main thread. \r\n    Executor mainExecutor = ContextCompat.getMainExecutor(this);\r\n    \r\n    // Execute a task in the main thread\r\n    mainExecutor.execute(new Runnable() {\r\n        @Override\r\n        public void run() {\r\n            // You code logic goes here.\r\n        }\r\n    });\r\n\r\n**Kotlin**\r\n\r\n    // Create an executor that executes tasks in the main thread.\r\n    val mainExecutor = ContextCompat.getMainExecutor(this)\r\n    \r\n    // Execute a task in the main thread\r\n    mainExecutor.execute {\r\n        // You code logic goes here.\r\n    }\r\n\r\n**2.** Execute code in a background thread\r\n\r\n**Java**\r\n\r\n    // Create an executor that executes tasks in a background thread.\r\n    ScheduledExecutorService backgroundExecutor = Executors.newSingleThreadScheduledExecutor();\r\n    \r\n    // Execute a task in the background thread.\r\n    backgroundExecutor.execute(new Runnable() {\r\n        @Override\r\n        public void run() {\r\n            // Your code logic goes here.\r\n        }\r\n    });\r\n    \r\n    // Execute a task in the background thread after 3 seconds.\r\n    backgroundExecutor.schedule(new Runnable() {\r\n        @Override\r\n        public void run() {\r\n            // Your code logic goes here\r\n        }\r\n    }, 3, TimeUnit.SECONDS);\r\n\r\n**Kotlin**\r\n\r\n    // Create an executor that executes tasks in a background thread.\r\n    val backgroundExecutor: ScheduledExecutorService = Executors.newSingleThreadScheduledExecutor()\r\n    \r\n    // Execute a task in the background thread.\r\n    backgroundExecutor.execute {\r\n        // Your code logic goes here.\r\n    }\r\n    \r\n    // Execute a task in the background thread after 3 seconds.\r\n    backgroundExecutor.schedule({\r\n        // Your code logic goes here\r\n    }, 3, TimeUnit.SECONDS)\r\n\r\n**Note:** Remember to shut down the executor after using.\r\n\r\n    backgroundExecutor.shutdown(); // or backgroundExecutor.shutdownNow();\r\n\r\n**3.** Execute code in a background thread and update UI on the main thread.\r\n\r\n**Java**\r\n\r\n    // Create an executor that executes tasks in the main thread. \r\n    Executor mainExecutor = ContextCompat.getMainExecutor(this);\r\n    \r\n    // Create an executor that executes tasks in a background thread.\r\n    ScheduledExecutorService backgroundExecutor = Executors.newSingleThreadScheduledExecutor();\r\n    \r\n    // Execute a task in the background thread.\r\n    backgroundExecutor.execute(new Runnable() {\r\n        @Override\r\n        public void run() {\r\n            // Your code logic goes here.\r\n            \r\n            // Update UI on the main thread\r\n            mainExecutor.execute(new Runnable() {\r\n                @Override\r\n                public void run() {\r\n                    // You code logic goes here.\r\n                }\r\n            });\r\n        }\r\n    });\r\n\r\n**Kotlin**\r\n\r\n    // Create an executor that executes tasks in the main thread. \r\n    val mainExecutor: Executor = ContextCompat.getMainExecutor(this)\r\n    \r\n    // Create an executor that executes tasks in a background thread.\r\n    val backgroundExecutor = Executors.newSingleThreadScheduledExecutor()\r\n    \r\n    // Execute a task in the background thread.\r\n    backgroundExecutor.execute {\r\n        // Your code logic goes here.\r\n    \r\n        // Update UI on the main thread\r\n        mainExecutor.execute {\r\n            // You code logic goes here.\r\n        }\r\n    }\r\n\r\n**Solution 2:** Specify a Looper explicitly by using one of the following constructors.\r\n\r\n- [Handler(Looper)][4]\r\n\r\n- [Handler(Looper, Handler.Callback)][5]\r\n\r\n\r\n**1.** Execute code in the main thread\r\n\r\n**1.1.** Handler with a Looper\r\n\r\n**Java**\r\n\r\n    Handler mainHandler = new Handler(Looper.getMainLooper());\r\n\r\n**Kotlin**\r\n\r\n    val mainHandler = Handler(Looper.getMainLooper())\r\n\r\n**1.2** Handler with a Looper and a Handler.Callback\r\n\r\n**Java**\r\n\r\n    Handler mainHandler = new Handler(Looper.getMainLooper(), new Handler.Callback() {\r\n        @Override\r\n        public boolean handleMessage(@NonNull Message message) {\r\n            // Your code logic goes here.\r\n            return true;\r\n        }\r\n    });\r\n\r\n**Kotlin**\r\n\r\n    val mainHandler = Handler(Looper.getMainLooper(), Handler.Callback {\r\n        // Your code logic goes here.\r\n        true\r\n    })\r\n\r\n**2.** Execute code in a background thread\r\n\r\n**2.1.** Handler with a Looper\r\n\r\n**Java**\r\n\r\n    // Create a background thread that has a Looper\r\n    HandlerThread handlerThread = new HandlerThread(&quot;HandlerThread&quot;);\r\n    handlerThread.start();\r\n    \r\n    // Create a handler to execute tasks in the background thread.\r\n    Handler backgroundHandler = new Handler(handlerThread.getLooper()); \r\n\r\n**Kotlin**\r\n\r\n    // Create a background thread that has a Looper\r\n    val handlerThread = HandlerThread(&quot;HandlerThread&quot;)\r\n    handlerThread.start()\r\n    \r\n    \r\n    // Create a handler to execute tasks in the background thread.\r\n    val backgroundHandler = Handler(handlerThread.looper)\r\n\r\n**2.2.** Handler with a Looper and a Handler.Callback\r\n\r\n**Java**\r\n\r\n    // Create a background thread that has a Looper\r\n    HandlerThread handlerThread = new HandlerThread(&quot;HandlerThread&quot;);\r\n    handlerThread.start();\r\n\r\n    // Create a handler to execute taks in the background thread.\r\n    Handler backgroundHandler = new Handler(handlerThread.getLooper(), new Handler.Callback() {\r\n        @Override\r\n        public boolean handleMessage(@NonNull Message message) {\r\n            // Your code logic goes here.\r\n            return true;\r\n        }\r\n    });\r\n\r\n**Kotlin**\r\n\r\n    // Create a background thread that has a Looper\r\n    val handlerThread = HandlerThread(&quot;HandlerThread&quot;)\r\n    handlerThread.start()\r\n    \r\n    \r\n    // Create a handler to execute taks in the background thread.\r\n    val backgroundHandler = Handler(handlerThread.looper, Handler.Callback {\r\n        // Your code logic goes here.\r\n        true\r\n    })\r\n\r\n**Note:** Remember to release the thread after using.\r\n\r\n    handlerThread.quit(); // or handlerThread.quitSafely();\r\n\r\n**3.** Execute code in a background thread and update UI on the main thread.\r\n\r\n**Java**\r\n\r\n    // Create a handler to execute code in the main thread\r\n    Handler mainHandler = new Handler(Looper.getMainLooper());\r\n    \r\n    // Create a background thread that has a Looper\r\n    HandlerThread handlerThread = new HandlerThread(&quot;HandlerThread&quot;);\r\n    handlerThread.start();\r\n    \r\n    // Create a handler to execute in the background thread\r\n    Handler backgroundHandler = new Handler(handlerThread.getLooper(), new Handler.Callback() {\r\n        @Override\r\n        public boolean handleMessage(@NonNull Message message) {\r\n            // Your code logic goes here.\r\n            \r\n            // Update UI on the main thread.\r\n            mainHandler.post(new Runnable() {\r\n                @Override\r\n                public void run() {\r\n                    \r\n                }\r\n            });\r\n            \r\n            return true;\r\n        }\r\n    });\r\n\r\n**Kotlin**\r\n\r\n    // Create a handler to execute code in the main thread\r\n    val mainHandler = Handler(Looper.getMainLooper())\r\n    \r\n    // Create a background thread that has a Looper\r\n    val handlerThread = HandlerThread(&quot;HandlerThread&quot;)\r\n    handlerThread.start()\r\n    \r\n    // Create a handler to execute in the background thread\r\n    val backgroundHandler = Handler(handlerThread.looper, Handler.Callback {\r\n        // Your code logic goes here.\r\n    \r\n        // Update UI on the main thread.\r\n        mainHandler.post {\r\n            \r\n        }\r\n        true\r\n    })\r\n\r\n  [1]: https://developer.android.com/reference/android/os/Handler#Handler()\r\n  [2]: https://developer.android.com/reference/android/os/Handler#Handler(android.os.Handler.Callback)\r\n  [3]: https://developer.android.com/reference/java/util/concurrent/Executor\r\n  [4]: https://developer.android.com/reference/android/os/Handler#Handler(android.os.Looper)\r\n  [5]: https://developer.android.com/reference/android/os/Handler#Handler(android.os.Looper,%20android.os.Handler.Callback)\r\n  [6]: https://developer.android.com/reference/android/os/Handler?authuser=1#Handler(android.os.Looper,%20android.os.Handler.Callback)","title":"What do I use now that Handler() is deprecated?","body":"<p>From API level 30, there are 2 constructors that are deprecated.</p>\n<ul>\n<li><p><a href=\"https://developer.android.com/reference/android/os/Handler#Handler()\" rel=\"noreferrer\">Handler()</a></p>\n</li>\n<li><p><a href=\"https://developer.android.com/reference/android/os/Handler#Handler(android.os.Handler.Callback)\" rel=\"noreferrer\">Handler(Handler.Callback)</a></p>\n</li>\n</ul>\n<p>Google explains the reason below.</p>\n<blockquote>\n<p>Implicitly choosing a Looper during\nHandler construction can lead to bugs where operations are silently\nlost (if the Handler is not expecting new tasks and quits), crashes\n(if a handler is sometimes created on a thread without a Looper\nactive), or race conditions, where the thread a handler is associated\nwith is not what the author anticipated. Instead, use an Executor or\nspecify the Looper explicitly, using Looper#getMainLooper, {link\nandroid.view.View#getHandler}, or similar. If the implicit thread\nlocal behavior is required for compatibility, use new\nHandler(Looper.myLooper(), callback) to make it clear to readers.</p>\n</blockquote>\n<p><strong>Solution 1:</strong> Use an <a href=\"https://developer.android.com/reference/java/util/concurrent/Executor\" rel=\"noreferrer\">Executor</a></p>\n<p><strong>1.</strong> Execute code in the main thread.</p>\n<p><strong>Java</strong></p>\n<pre><code>// Create an executor that executes tasks in the main thread. \nExecutor mainExecutor = ContextCompat.getMainExecutor(this);\n\n// Execute a task in the main thread\nmainExecutor.execute(new Runnable() {\n    @Override\n    public void run() {\n        // You code logic goes here.\n    }\n});\n</code></pre>\n<p><strong>Kotlin</strong></p>\n<pre><code>// Create an executor that executes tasks in the main thread.\nval mainExecutor = ContextCompat.getMainExecutor(this)\n\n// Execute a task in the main thread\nmainExecutor.execute {\n    // You code logic goes here.\n}\n</code></pre>\n<p><strong>2.</strong> Execute code in a background thread</p>\n<p><strong>Java</strong></p>\n<pre><code>// Create an executor that executes tasks in a background thread.\nScheduledExecutorService backgroundExecutor = Executors.newSingleThreadScheduledExecutor();\n\n// Execute a task in the background thread.\nbackgroundExecutor.execute(new Runnable() {\n    @Override\n    public void run() {\n        // Your code logic goes here.\n    }\n});\n\n// Execute a task in the background thread after 3 seconds.\nbackgroundExecutor.schedule(new Runnable() {\n    @Override\n    public void run() {\n        // Your code logic goes here\n    }\n}, 3, TimeUnit.SECONDS);\n</code></pre>\n<p><strong>Kotlin</strong></p>\n<pre><code>// Create an executor that executes tasks in a background thread.\nval backgroundExecutor: ScheduledExecutorService = Executors.newSingleThreadScheduledExecutor()\n\n// Execute a task in the background thread.\nbackgroundExecutor.execute {\n    // Your code logic goes here.\n}\n\n// Execute a task in the background thread after 3 seconds.\nbackgroundExecutor.schedule({\n    // Your code logic goes here\n}, 3, TimeUnit.SECONDS)\n</code></pre>\n<p><strong>Note:</strong> Remember to shut down the executor after using.</p>\n<pre><code>backgroundExecutor.shutdown(); // or backgroundExecutor.shutdownNow();\n</code></pre>\n<p><strong>3.</strong> Execute code in a background thread and update UI on the main thread.</p>\n<p><strong>Java</strong></p>\n<pre><code>// Create an executor that executes tasks in the main thread. \nExecutor mainExecutor = ContextCompat.getMainExecutor(this);\n\n// Create an executor that executes tasks in a background thread.\nScheduledExecutorService backgroundExecutor = Executors.newSingleThreadScheduledExecutor();\n\n// Execute a task in the background thread.\nbackgroundExecutor.execute(new Runnable() {\n    @Override\n    public void run() {\n        // Your code logic goes here.\n        \n        // Update UI on the main thread\n        mainExecutor.execute(new Runnable() {\n            @Override\n            public void run() {\n                // You code logic goes here.\n            }\n        });\n    }\n});\n</code></pre>\n<p><strong>Kotlin</strong></p>\n<pre><code>// Create an executor that executes tasks in the main thread. \nval mainExecutor: Executor = ContextCompat.getMainExecutor(this)\n\n// Create an executor that executes tasks in a background thread.\nval backgroundExecutor = Executors.newSingleThreadScheduledExecutor()\n\n// Execute a task in the background thread.\nbackgroundExecutor.execute {\n    // Your code logic goes here.\n\n    // Update UI on the main thread\n    mainExecutor.execute {\n        // You code logic goes here.\n    }\n}\n</code></pre>\n<p><strong>Solution 2:</strong> Specify a Looper explicitly by using one of the following constructors.</p>\n<ul>\n<li><p><a href=\"https://developer.android.com/reference/android/os/Handler#Handler(android.os.Looper)\" rel=\"noreferrer\">Handler(Looper)</a></p>\n</li>\n<li><p><a href=\"https://developer.android.com/reference/android/os/Handler#Handler(android.os.Looper,%20android.os.Handler.Callback)\" rel=\"noreferrer\">Handler(Looper, Handler.Callback)</a></p>\n</li>\n</ul>\n<p><strong>1.</strong> Execute code in the main thread</p>\n<p><strong>1.1.</strong> Handler with a Looper</p>\n<p><strong>Java</strong></p>\n<pre><code>Handler mainHandler = new Handler(Looper.getMainLooper());\n</code></pre>\n<p><strong>Kotlin</strong></p>\n<pre><code>val mainHandler = Handler(Looper.getMainLooper())\n</code></pre>\n<p><strong>1.2</strong> Handler with a Looper and a Handler.Callback</p>\n<p><strong>Java</strong></p>\n<pre><code>Handler mainHandler = new Handler(Looper.getMainLooper(), new Handler.Callback() {\n    @Override\n    public boolean handleMessage(@NonNull Message message) {\n        // Your code logic goes here.\n        return true;\n    }\n});\n</code></pre>\n<p><strong>Kotlin</strong></p>\n<pre><code>val mainHandler = Handler(Looper.getMainLooper(), Handler.Callback {\n    // Your code logic goes here.\n    true\n})\n</code></pre>\n<p><strong>2.</strong> Execute code in a background thread</p>\n<p><strong>2.1.</strong> Handler with a Looper</p>\n<p><strong>Java</strong></p>\n<pre><code>// Create a background thread that has a Looper\nHandlerThread handlerThread = new HandlerThread(&quot;HandlerThread&quot;);\nhandlerThread.start();\n\n// Create a handler to execute tasks in the background thread.\nHandler backgroundHandler = new Handler(handlerThread.getLooper()); \n</code></pre>\n<p><strong>Kotlin</strong></p>\n<pre><code>// Create a background thread that has a Looper\nval handlerThread = HandlerThread(&quot;HandlerThread&quot;)\nhandlerThread.start()\n\n\n// Create a handler to execute tasks in the background thread.\nval backgroundHandler = Handler(handlerThread.looper)\n</code></pre>\n<p><strong>2.2.</strong> Handler with a Looper and a Handler.Callback</p>\n<p><strong>Java</strong></p>\n<pre><code>// Create a background thread that has a Looper\nHandlerThread handlerThread = new HandlerThread(&quot;HandlerThread&quot;);\nhandlerThread.start();\n\n// Create a handler to execute taks in the background thread.\nHandler backgroundHandler = new Handler(handlerThread.getLooper(), new Handler.Callback() {\n    @Override\n    public boolean handleMessage(@NonNull Message message) {\n        // Your code logic goes here.\n        return true;\n    }\n});\n</code></pre>\n<p><strong>Kotlin</strong></p>\n<pre><code>// Create a background thread that has a Looper\nval handlerThread = HandlerThread(&quot;HandlerThread&quot;)\nhandlerThread.start()\n\n\n// Create a handler to execute taks in the background thread.\nval backgroundHandler = Handler(handlerThread.looper, Handler.Callback {\n    // Your code logic goes here.\n    true\n})\n</code></pre>\n<p><strong>Note:</strong> Remember to release the thread after using.</p>\n<pre><code>handlerThread.quit(); // or handlerThread.quitSafely();\n</code></pre>\n<p><strong>3.</strong> Execute code in a background thread and update UI on the main thread.</p>\n<p><strong>Java</strong></p>\n<pre><code>// Create a handler to execute code in the main thread\nHandler mainHandler = new Handler(Looper.getMainLooper());\n\n// Create a background thread that has a Looper\nHandlerThread handlerThread = new HandlerThread(&quot;HandlerThread&quot;);\nhandlerThread.start();\n\n// Create a handler to execute in the background thread\nHandler backgroundHandler = new Handler(handlerThread.getLooper(), new Handler.Callback() {\n    @Override\n    public boolean handleMessage(@NonNull Message message) {\n        // Your code logic goes here.\n        \n        // Update UI on the main thread.\n        mainHandler.post(new Runnable() {\n            @Override\n            public void run() {\n                \n            }\n        });\n        \n        return true;\n    }\n});\n</code></pre>\n<p><strong>Kotlin</strong></p>\n<pre><code>// Create a handler to execute code in the main thread\nval mainHandler = Handler(Looper.getMainLooper())\n\n// Create a background thread that has a Looper\nval handlerThread = HandlerThread(&quot;HandlerThread&quot;)\nhandlerThread.start()\n\n// Create a handler to execute in the background thread\nval backgroundHandler = Handler(handlerThread.looper, Handler.Callback {\n    // Your code logic goes here.\n\n    // Update UI on the main thread.\n    mainHandler.post {\n        \n    }\n    true\n})\n</code></pre>\n"},{"tags":[],"owner":{"account_id":18146172,"reputation":79,"user_id":13199482,"display_name":"Abdhi P"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1609262095,"creation_date":1609262095,"answer_id":65496036,"question_id":61023968,"body_markdown":"I usually use this one \r\n\r\nCode:\r\n\r\n    Handler(Looper.myLooper() ?: return).postDelayed({\r\n               // Code what do you want\r\n            }, 3000)\r\n\r\nScreenshot:\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/GNCkB.png","title":"What do I use now that Handler() is deprecated?","body":"<p>I usually use this one</p>\n<p>Code:</p>\n<pre><code>Handler(Looper.myLooper() ?: return).postDelayed({\n           // Code what do you want\n        }, 3000)\n</code></pre>\n<p>Screenshot:</p>\n<p><a href=\"https://i.stack.imgur.com/GNCkB.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/GNCkB.png\" alt=\"enter image description here\" /></a></p>\n"},{"tags":[],"owner":{"account_id":11170080,"reputation":1139,"user_id":8663316,"display_name":"Faizan Haidar Khan"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1610974926,"creation_date":1610974926,"answer_id":65775031,"question_id":61023968,"body_markdown":"If you are using Variable for Handler and Runnable then use it like this.\r\n\r\n    private Handler handler;\r\n    private Runnable runnable;\r\n\r\n    handler = new Handler(Looper.getMainLooper());\r\n        handler.postDelayed(runnable = () -&gt; {\r\n            // Do delayed stuff here\r\n             handler.postDelayed(runnable, 1000);\r\n        }, delay);\r\nAlso You need to remove callbacks in onDestroy()\r\n\r\n    @Override\r\n    public void onDestroy() {\r\n        super.onDestroy();\r\n        if (handler != null) {\r\n            handler.removeCallbacks(runnable);\r\n        }\r\n    }\r\n\r\n","title":"What do I use now that Handler() is deprecated?","body":"<p>If you are using Variable for Handler and Runnable then use it like this.</p>\n<pre><code>private Handler handler;\nprivate Runnable runnable;\n\nhandler = new Handler(Looper.getMainLooper());\n    handler.postDelayed(runnable = () -&gt; {\n        // Do delayed stuff here\n         handler.postDelayed(runnable, 1000);\n    }, delay);\n</code></pre>\n<p>Also You need to remove callbacks in onDestroy()</p>\n<pre><code>@Override\npublic void onDestroy() {\n    super.onDestroy();\n    if (handler != null) {\n        handler.removeCallbacks(runnable);\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":11516344,"reputation":1697,"user_id":8439604,"display_name":"Abdul Mateen"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1617459132,"creation_date":1617459132,"answer_id":66932122,"question_id":61023968,"body_markdown":"**Coroutines Kotlin**\r\n\r\n    private val SPLASH_SCREEN_TIME_OUT_CONST: Long = 3000\r\n\r\n    override fun onCreate(savedInstanceState: Bundle?) {\r\n        super.onCreate(savedInstanceState)\r\n        setContentView(R.layout.activity_splash)\r\n        window.setFlags(\r\n            WindowManager.LayoutParams.FLAG_FULLSCREEN,\r\n            WindowManager.LayoutParams.FLAG_FULLSCREEN\r\n        )\r\n        GlobalScope.launch {\r\n            delay(SPLASH_SCREEN_TIME_OUT_CONST)\r\n            goToIntro()\r\n        }\r\n\r\n    }\r\n\r\n    private fun goToIntro(){\r\n        startActivity(Intent(this, IntroActivity::class.java))\r\n        finish()\r\n    }\r\n\r\n    \r\n","title":"What do I use now that Handler() is deprecated?","body":"<p><strong>Coroutines Kotlin</strong></p>\n<pre><code>private val SPLASH_SCREEN_TIME_OUT_CONST: Long = 3000\n\noverride fun onCreate(savedInstanceState: Bundle?) {\n    super.onCreate(savedInstanceState)\n    setContentView(R.layout.activity_splash)\n    window.setFlags(\n        WindowManager.LayoutParams.FLAG_FULLSCREEN,\n        WindowManager.LayoutParams.FLAG_FULLSCREEN\n    )\n    GlobalScope.launch {\n        delay(SPLASH_SCREEN_TIME_OUT_CONST)\n        goToIntro()\n    }\n\n}\n\nprivate fun goToIntro(){\n    startActivity(Intent(this, IntroActivity::class.java))\n    finish()\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":20426340,"reputation":91,"user_id":14986261,"display_name":"nmahnic"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1619575916,"creation_date":1619575916,"answer_id":67292874,"question_id":61023968,"body_markdown":"It&#39;s a good idea use this structure in Kotlin\r\n\r\n    companion object Run {\r\n       fun after(delay: Long, process: () -&gt; Unit) {\r\n          Handler(Looper.getMainLooper()).postDelayed({\r\n              process()\r\n          }, delay)\r\n       }\r\n    }\r\n\r\nLater call as\r\n\r\n    Run.after(SPLASH_TIME_OUT) {\r\n       val action = SplashFragmentDirections.actionSplashFragmentToLogin()\r\n       v.findNavController().navigate(action)\r\n    }","title":"What do I use now that Handler() is deprecated?","body":"<p>It's a good idea use this structure in Kotlin</p>\n<pre><code>companion object Run {\n   fun after(delay: Long, process: () -&gt; Unit) {\n      Handler(Looper.getMainLooper()).postDelayed({\n          process()\n      }, delay)\n   }\n}\n</code></pre>\n<p>Later call as</p>\n<pre><code>Run.after(SPLASH_TIME_OUT) {\n   val action = SplashFragmentDirections.actionSplashFragmentToLogin()\n   v.findNavController().navigate(action)\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":9423002,"reputation":648,"user_id":7008898,"display_name":"Dinith Rukshan Kumara"},"down_vote_count":0,"up_vote_count":13,"is_accepted":false,"score":13,"last_activity_date":1627007448,"creation_date":1627007448,"answer_id":68493365,"question_id":61023968,"body_markdown":"`Handler()` and `Handler(Handler.Callback callback)` constructors are deprecated. Because those can leads to bugs &amp; crashes. Use Executor or Looper explicitly.\r\n\r\n**For Java**\r\n\r\n    Handler handler = new Handler(Looper.getMainLooper());\r\n    handler.postDelayed(new Runnable() {\r\n      @Override\r\n      public void run() {\r\n        //do your work here\r\n       }\r\n    }, 1000);","title":"What do I use now that Handler() is deprecated?","body":"<p><code>Handler()</code> and <code>Handler(Handler.Callback callback)</code> constructors are deprecated. Because those can leads to bugs &amp; crashes. Use Executor or Looper explicitly.</p>\n<p><strong>For Java</strong></p>\n<pre><code>Handler handler = new Handler(Looper.getMainLooper());\nhandler.postDelayed(new Runnable() {\n  @Override\n  public void run() {\n    //do your work here\n   }\n}, 1000);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":22939960,"reputation":681,"user_id":17072891,"display_name":"Nguyen Thanh Son"},"down_vote_count":0,"up_vote_count":18,"is_accepted":false,"score":18,"last_activity_date":1648736539,"creation_date":1636815939,"answer_id":69955501,"question_id":61023968,"body_markdown":"I have **3 solutions**:\r\n\r\n1. Specify the Looper explicitly:\r\n    ```\r\n    Handler(Looper.getMainLooper()).postDelayed({\r\n        // code\r\n    }, duration)\r\n    ```\r\n2. Specify the implicit thread local behavior:\r\n    ```\r\n    Handler(Looper.myLooper()!!).postDelayed({\r\n        // code\r\n    }, duration)\r\n    ```\r\n3. using `Thread`:\r\n    ```\r\n    Thread({\r\n        try{\r\n            Thread.sleep(3000)\r\n        } catch (e : Exception) {\r\n            throw e\r\n        }\r\n         // code\r\n    }).start()\r\n    ```","title":"What do I use now that Handler() is deprecated?","body":"<p>I have <strong>3 solutions</strong>:</p>\n<ol>\n<li>Specify the Looper explicitly:\n<pre><code>Handler(Looper.getMainLooper()).postDelayed({\n    // code\n}, duration)\n</code></pre>\n</li>\n<li>Specify the implicit thread local behavior:\n<pre><code>Handler(Looper.myLooper()!!).postDelayed({\n    // code\n}, duration)\n</code></pre>\n</li>\n<li>using <code>Thread</code>:\n<pre><code>Thread({\n    try{\n        Thread.sleep(3000)\n    } catch (e : Exception) {\n        throw e\n    }\n     // code\n}).start()\n</code></pre>\n</li>\n</ol>\n"},{"tags":[],"owner":{"account_id":2491354,"reputation":425,"user_id":2168735,"accept_rate":100,"display_name":"user2168735"},"down_vote_count":0,"up_vote_count":8,"is_accepted":false,"score":8,"last_activity_date":1642833384,"creation_date":1642833384,"answer_id":70810564,"question_id":61023968,"body_markdown":"    import android.os.Looper\r\n    import android.os.Handler\r\n    \r\n    inline fun delay(delay: Long, crossinline completion: () -&gt; Unit) {\r\n        Handler(Looper.getMainLooper()).postDelayed({\r\n            completion()\r\n        }, delay)\r\n    }\r\n\r\nExample:\r\n\r\n    delay(1000) {\r\n        view.refreshButton.visibility = View.GONE\r\n    }","title":"What do I use now that Handler() is deprecated?","body":"<pre><code>import android.os.Looper\nimport android.os.Handler\n\ninline fun delay(delay: Long, crossinline completion: () -&gt; Unit) {\n    Handler(Looper.getMainLooper()).postDelayed({\n        completion()\n    }, delay)\n}\n</code></pre>\n<p>Example:</p>\n<pre><code>delay(1000) {\n    view.refreshButton.visibility = View.GONE\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":142790,"reputation":179,"user_id":3199329,"display_name":"stonito"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1654548797,"creation_date":1654548797,"answer_id":72523352,"question_id":61023968,"body_markdown":"For Xamarin Android, instead of\r\n\r\n    Handler handler;\r\n    handler = new Handler();\r\n\r\njust write\r\n\r\n    Handler handler;\r\n    handler = new Handler(Looper.MyLooper());\r\n\r\nthe rest of the code is fine.\r\n\r\n","title":"What do I use now that Handler() is deprecated?","body":"<p>For Xamarin Android, instead of</p>\n<pre><code>Handler handler;\nhandler = new Handler();\n</code></pre>\n<p>just write</p>\n<pre><code>Handler handler;\nhandler = new Handler(Looper.MyLooper());\n</code></pre>\n<p>the rest of the code is fine.</p>\n"}],"owner":{"account_id":10279781,"reputation":6290,"user_id":7585388,"display_name":"Bolt UIX"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":173341,"favorite_count":0,"down_vote_count":0,"up_vote_count":361,"accepted_answer_id":63851895,"answer_count":20,"score":361,"last_activity_date":1699348339,"creation_date":1585976329,"question_id":61023968,"body_markdown":"How do I fix the deprecation warning in this code? Alternatively, are there any other options for doing this?\r\n\r\n    Handler().postDelayed({\r\n        context?.let {\r\n            //code\r\n        }\r\n    }, 3000)","title":"What do I use now that Handler() is deprecated?","body":"<p>How do I fix the deprecation warning in this code? Alternatively, are there any other options for doing this?</p>\n<pre><code>Handler().postDelayed({\n    context?.let {\n        //code\n    }\n}, 3000)\n</code></pre>\n"},{"tags":["java","xml","bash","oracle","ant"],"comments":[{"owner":{"account_id":2186012,"reputation":20371,"user_id":1934428,"accept_rate":86,"display_name":"user1934428"},"score":1,"creation_date":1699347083,"post_id":77436276,"comment_id":136516889,"body_markdown":"(1) What is on `$*`? (2) Did you post your complete relevant code here? My times of using `ant` are long gone and I&#39;m for sure no expert in this matter, but I&#39;m pretty sure that `oracle_sql` is not a builtin task name, so you need to define it somewhere. I bet that `ant` hasn&#39;t seen a definition of this task type.","body":"(1) What is on <code>$*</code>? (2) Did you post your complete relevant code here? My times of using <code>ant</code> are long gone and I&#39;m for sure no expert in this matter, but I&#39;m pretty sure that <code>oracle_sql</code> is not a builtin task name, so you need to define it somewhere. I bet that <code>ant</code> hasn&#39;t seen a definition of this task type."},{"owner":{"account_id":4076597,"reputation":4537,"user_id":3348112,"accept_rate":75,"display_name":"CAustin"},"score":1,"creation_date":1699486130,"post_id":77436276,"comment_id":136539529,"body_markdown":"Yeah, there&#39;s no task in Ant named `oracle_sql`. Maybe you were thinking of the `sql` task? https://ant.apache.org/manual/Tasks/sql.html","body":"Yeah, there&#39;s no task in Ant named <code>oracle_sql</code>. Maybe you were thinking of the <code>sql</code> task? <a href=\"https://ant.apache.org/manual/Tasks/sql.html\" rel=\"nofollow noreferrer\">ant.apache.org/manual/Tasks/sql.html</a>"}],"owner":{"account_id":3563018,"reputation":303,"user_id":2975389,"accept_rate":7,"display_name":"Lakshitha Gihan"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":26,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1699348213,"creation_date":1699342228,"question_id":77436276,"body_markdown":"I created a xml file with some sql file execution in my local machine. All the files are in local file path. Then created a bash script with define the execution of xml file.\r\n\r\nAnt version\r\n\r\n    Apache Ant(TM) version 1.10.14 compiled on August 16 2023\r\n\r\nBelow mentioned the XML script.\r\n\r\n        &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n    &lt;project name=&quot;test&quot; default=&quot;build&quot; basedir=&quot;.&quot;&gt;\r\n               \r\n       &lt;target name=&quot;test&quot;&gt;\r\n          \r\n          &lt;!-- Load the data content --&gt;\r\n          &lt;echo message=&quot;Start.....&quot; /&gt;\r\n          &lt;oracle_sql\r\n             username=&quot;username&quot;\r\n             password=&quot;password&quot;\r\n             connect=&quot;&lt;ip:port&gt;/service&quot;&gt;\r\n             &lt;fileset dir=&quot;C:/Work/Test&quot; includes=&quot;test.sql&quot; /&gt;\r\n          &lt;/oracle_sql&gt;\r\n          &lt;echo message=&quot;End.....&quot; /&gt;\r\n          \r\n       &lt;/target&gt;\r\n    \r\n    &lt;/project&gt;\r\n\r\nBelow mentioned the bash command which is used to execute the xml file.\r\n\r\n    $ANT_HOME/bin/ant $* -buildfile test.xml test\r\n\r\nBoth xml file and bash script are in same location.\r\nAfter execute the bash script, below mentioned error is appeared.\r\n\r\n    BUILD FAILED\r\n    C:\\Work\\Test\\test.xml:12: Problem: failed to create task or type oracle_sql\r\n    Cause: The name is undefined.\r\n    Action: Check the spelling.\r\n    Action: Check that any custom tasks/types have been declared.\r\n\r\nDownloaded and copy `ant-contrib-1.0.jar` to `apache-ant-1.10.14\\lib`, but same issue is appeared. Any help for this issue is really appreciated.","title":"Failed to create task or type oracle_sql when execute xml using ant from bash script","body":"<p>I created a xml file with some sql file execution in my local machine. All the files are in local file path. Then created a bash script with define the execution of xml file.</p>\n<p>Ant version</p>\n<pre><code>Apache Ant(TM) version 1.10.14 compiled on August 16 2023\n</code></pre>\n<p>Below mentioned the XML script.</p>\n<pre><code>    &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;project name=&quot;test&quot; default=&quot;build&quot; basedir=&quot;.&quot;&gt;\n           \n   &lt;target name=&quot;test&quot;&gt;\n      \n      &lt;!-- Load the data content --&gt;\n      &lt;echo message=&quot;Start.....&quot; /&gt;\n      &lt;oracle_sql\n         username=&quot;username&quot;\n         password=&quot;password&quot;\n         connect=&quot;&lt;ip:port&gt;/service&quot;&gt;\n         &lt;fileset dir=&quot;C:/Work/Test&quot; includes=&quot;test.sql&quot; /&gt;\n      &lt;/oracle_sql&gt;\n      &lt;echo message=&quot;End.....&quot; /&gt;\n      \n   &lt;/target&gt;\n\n&lt;/project&gt;\n</code></pre>\n<p>Below mentioned the bash command which is used to execute the xml file.</p>\n<pre><code>$ANT_HOME/bin/ant $* -buildfile test.xml test\n</code></pre>\n<p>Both xml file and bash script are in same location.\nAfter execute the bash script, below mentioned error is appeared.</p>\n<pre><code>BUILD FAILED\nC:\\Work\\Test\\test.xml:12: Problem: failed to create task or type oracle_sql\nCause: The name is undefined.\nAction: Check the spelling.\nAction: Check that any custom tasks/types have been declared.\n</code></pre>\n<p>Downloaded and copy <code>ant-contrib-1.0.jar</code> to <code>apache-ant-1.10.14\\lib</code>, but same issue is appeared. Any help for this issue is really appreciated.</p>\n"},{"tags":["java","eclipse"],"comments":[{"owner":{"account_id":114128,"reputation":50422,"user_id":300257,"accept_rate":89,"display_name":"Gilbert Le Blanc"},"score":0,"creation_date":1588528003,"post_id":61577326,"comment_id":108926402,"body_markdown":"Try creating a new project, and copying each file over to the new project, one at a time.  Check to make sure that all your imports point to the new project and not the old project.","body":"Try creating a new project, and copying each file over to the new project, one at a time.  Check to make sure that all your imports point to the new project and not the old project."}],"answers":[{"tags":[],"owner":{"account_id":8692823,"reputation":31810,"user_id":6505250,"display_name":"howlger"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1588543638,"creation_date":1588543638,"answer_id":61582283,"question_id":61577326,"body_markdown":"To clone a workspace:\r\n\r\n 1. Create a new workspace via ***File &gt; Switch Workspace &gt; Other...*** (this dialog offers also the option to copy your settings)\r\n 2. In the new workspace import the projects via ***File &gt; Import...: General &gt; Import Existing Projects into Workspace*** and make sure the checkbox ***Copy projects into workspace*** is checked\r\n\r\nWhen the projects are located at different places or for transfer, you can also do ***File &gt; Export...: General &gt; Archive File*** first and then import the projects from that archive file.\r\n\r\nPlease note, the `.metadata` folder is not intended to be edited, moved or deleted.","title":"Copied project still uses wrong folder","body":"<p>To clone a workspace:</p>\n\n<ol>\n<li>Create a new workspace via <strong><em>File > Switch Workspace > Other...</em></strong> (this dialog offers also the option to copy your settings)</li>\n<li>In the new workspace import the projects via <strong><em>File > Import...: General > Import Existing Projects into Workspace</em></strong> and make sure the checkbox <strong><em>Copy projects into workspace</em></strong> is checked</li>\n</ol>\n\n<p>When the projects are located at different places or for transfer, you can also do <strong><em>File > Export...: General > Archive File</em></strong> first and then import the projects from that archive file.</p>\n\n<p>Please note, the <code>.metadata</code> folder is not intended to be edited, moved or deleted.</p>\n"},{"tags":[],"owner":{"account_id":23723518,"reputation":1,"user_id":17743767,"display_name":"vanrenter"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1699348209,"creation_date":1699348209,"answer_id":77436874,"question_id":61577326,"body_markdown":"Another simple way to solve this is as follows:\r\n- delete the project(s), but **don&#39;t check** &quot;[ ] delete project content on disk&quot;\r\n- then simply import the project(s) back (use &quot;import existing maven project&quot; if appropriate)\r\n\r\nThe project path is now updated.\r\n\r\nIf you are afraid of losing your files, just make a safe copy of your workspace before in some other directory. ","title":"Copied project still uses wrong folder","body":"<p>Another simple way to solve this is as follows:</p>\n<ul>\n<li>delete the project(s), but <strong>don't check</strong> &quot;[ ] delete project content on disk&quot;</li>\n<li>then simply import the project(s) back (use &quot;import existing maven project&quot; if appropriate)</li>\n</ul>\n<p>The project path is now updated.</p>\n<p>If you are afraid of losing your files, just make a safe copy of your workspace before in some other directory.</p>\n"}],"owner":{"account_id":8667570,"reputation":1,"user_id":6487471,"display_name":"Roadhog360 Gaming"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":103,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":2,"score":-1,"last_activity_date":1699348209,"creation_date":1588520989,"question_id":61577326,"body_markdown":"How do I clone a workspace? I&#39;ve tried copying its files from one folder to another  but when using this Eclipse just opens the old folders. For easier understanding, I&#39;ll refer to the old folders as folder1 and the new one as folder2. I copy my workspace from folder1 to folder2. Using Eclipse, I select folder2 but all of the files are still grabbed from folder1.\r\n\r\nIf I try copying it, making a new folder and opening the project and refactoring it to the new folder, it just fails with the very undescriptive error that there was a problem moving the files. Without actually telling me what the problem is. The solution was to copy the workspace folder, and import the project using general&gt;existing projects into workspace, but this failed too. I tried doing the same to an empty folder but this just linked the old folder to the new one instead of cloning them.\r\n\r\nTried looking in the Eclipse .metadata folder with no luck, even after changing the files I found that had the old directory it bizarrely doesn&#39;t open the new folders! I renamed the parts that point to /folder1 to point to /folder2, but somehow it still opens folder1 for everything when I select folder2. I&#39;ve wasted nearly two hours stumped, digging into it with no dice and I&#39;m turning to this community hoping to get some help.\r\n\r\n**Yes, I&#39;ve Googled it**, very few results actually helped, with the only one fitting my situation not working. I NEED to clone this, starting from scratch is simply not an option.","title":"Copied project still uses wrong folder","body":"<p>How do I clone a workspace? I've tried copying its files from one folder to another  but when using this Eclipse just opens the old folders. For easier understanding, I'll refer to the old folders as folder1 and the new one as folder2. I copy my workspace from folder1 to folder2. Using Eclipse, I select folder2 but all of the files are still grabbed from folder1.</p>\n\n<p>If I try copying it, making a new folder and opening the project and refactoring it to the new folder, it just fails with the very undescriptive error that there was a problem moving the files. Without actually telling me what the problem is. The solution was to copy the workspace folder, and import the project using general>existing projects into workspace, but this failed too. I tried doing the same to an empty folder but this just linked the old folder to the new one instead of cloning them.</p>\n\n<p>Tried looking in the Eclipse .metadata folder with no luck, even after changing the files I found that had the old directory it bizarrely doesn't open the new folders! I renamed the parts that point to /folder1 to point to /folder2, but somehow it still opens folder1 for everything when I select folder2. I've wasted nearly two hours stumped, digging into it with no dice and I'm turning to this community hoping to get some help.</p>\n\n<p><strong>Yes, I've Googled it</strong>, very few results actually helped, with the only one fitting my situation not working. I NEED to clone this, starting from scratch is simply not an option.</p>\n"},{"tags":["java","spring","ssl","spring-webflux"],"answers":[{"tags":[],"owner":{"account_id":2064278,"reputation":13118,"user_id":1840146,"accept_rate":86,"display_name":"Toerktumlare"},"down_vote_count":2,"up_vote_count":6,"is_accepted":false,"score":4,"last_activity_date":1570059442,"creation_date":1570059442,"answer_id":58210607,"question_id":58193135,"body_markdown":"taken from the documentation [Spring Webclient - Reactor Netty][1]\r\n\r\nTo access the ssl configurations you need to supply a custom netty HttpClient with a custom sslContext.\r\n    \r\n    SslContext sslContext = SslContextBuilder\r\n            .forClient()\r\n            // build your ssl context here\r\n            .build();\r\n    \r\n    HttpClient httpClient = HttpClient.create().secure(sslSpec -&gt; sslSpec.sslContext(sslContext));\r\n\r\n    WebClient webClient = WebClient.builder()\r\n        .clientConnector(new ReactorClientHttpConnector(httpClient))\r\n        .build();\r\n\r\n\r\n  [1]: https://docs.spring.io/spring/docs/current/spring-framework-reference/web-reactive.html#webflux-client-builder-reactor","title":"How to add client certificates to the Spring WebClient?","body":"<p>taken from the documentation <a href=\"https://docs.spring.io/spring/docs/current/spring-framework-reference/web-reactive.html#webflux-client-builder-reactor\" rel=\"nofollow noreferrer\">Spring Webclient - Reactor Netty</a></p>\n\n<p>To access the ssl configurations you need to supply a custom netty HttpClient with a custom sslContext.</p>\n\n<pre><code>SslContext sslContext = SslContextBuilder\n        .forClient()\n        // build your ssl context here\n        .build();\n\nHttpClient httpClient = HttpClient.create().secure(sslSpec -&gt; sslSpec.sslContext(sslContext));\n\nWebClient webClient = WebClient.builder()\n    .clientConnector(new ReactorClientHttpConnector(httpClient))\n    .build();\n</code></pre>\n"},{"tags":[],"owner":{"account_id":6428583,"reputation":6399,"user_id":4982691,"display_name":"jumping_monkey"},"down_vote_count":0,"up_vote_count":14,"is_accepted":false,"score":14,"last_activity_date":1598512078,"creation_date":1598512078,"answer_id":63610853,"question_id":58193135,"body_markdown":"It took me some time to find the _missing_ piece in Thomas&#39; answer.\r\n\r\nHere it is:\r\n\r\n    public static SslContext getTwoWaySslContext() {\r\n    \t\t\r\n    \ttry(FileInputStream keyStoreFileInputStream = new FileInputStream(ResourceUtils.getFile(clientSslKeyStoreClassPath));\r\n    \t\tFileInputStream trustStoreFileInputStream = new FileInputStream(ResourceUtils.getFile(clientSslTrustStoreClassPath));\t\r\n    \t\t) {\r\n    \t\tKeyStore keyStore = KeyStore.getInstance(&quot;jks&quot;);\r\n    \t\tkeyStore.load(keyStoreFileInputStream, clientSslKeyStorePassword.toCharArray());\r\n    \t\tKeyManagerFactory keyManagerFactory = KeyManagerFactory.getInstance(&quot;SunX509&quot;);\r\n    \t\tkeyManagerFactory.init(keyStore, clientSslKeyStorePassword.toCharArray());\r\n    \t\t\t\r\n    \t\tKeyStore trustStore = KeyStore.getInstance(&quot;jks&quot;);\r\n    \t\ttrustStore.load(trustStoreFileInputStream, clientSslTrustStorePassword.toCharArray());\r\n    \t\tTrustManagerFactory trustManagerFactory = TrustManagerFactory.getInstance(&quot;SunX509&quot;);\r\n    \t\ttrustManagerFactory.init(trustStore);\r\n    \t\t\t\r\n    \t\treturn SslContextBuilder.forClient()\r\n    \t\t\t.keyManager(keyManagerFactory)\r\n    \t\t\t.trustManager(trustManagerFactory)\r\n    \t\t\t.build();\r\n    \t\t\t\r\n    \t} catch (Exception e) {\r\n    \t\tlog.error(&quot;An error has occurred: &quot;, e);\r\n    \t}\r\n    \t\t\r\n    \treturn null;\r\n    }\r\n\r\n\r\n    HttpClient httpClient = HttpClient.create().secure(sslSpec -&gt; sslSpec.sslContext(SslUtil.getTwoWaySslContext()));\r\n    ClientHttpConnector clientHttpConnector = new ReactorClientHttpConnector(httpClient);\r\n    WebClient webClient = webClientBuilder\r\n    \t.clientConnector(clientHttpConnector)\r\n    \t.baseUrl(baseUrl)\r\n    \t.build();\r\n\r\nEnjoy!","title":"How to add client certificates to the Spring WebClient?","body":"<p>It took me some time to find the <em>missing</em> piece in Thomas' answer.</p>\n<p>Here it is:</p>\n<pre><code>public static SslContext getTwoWaySslContext() {\n        \n    try(FileInputStream keyStoreFileInputStream = new FileInputStream(ResourceUtils.getFile(clientSslKeyStoreClassPath));\n        FileInputStream trustStoreFileInputStream = new FileInputStream(ResourceUtils.getFile(clientSslTrustStoreClassPath));   \n        ) {\n        KeyStore keyStore = KeyStore.getInstance(&quot;jks&quot;);\n        keyStore.load(keyStoreFileInputStream, clientSslKeyStorePassword.toCharArray());\n        KeyManagerFactory keyManagerFactory = KeyManagerFactory.getInstance(&quot;SunX509&quot;);\n        keyManagerFactory.init(keyStore, clientSslKeyStorePassword.toCharArray());\n            \n        KeyStore trustStore = KeyStore.getInstance(&quot;jks&quot;);\n        trustStore.load(trustStoreFileInputStream, clientSslTrustStorePassword.toCharArray());\n        TrustManagerFactory trustManagerFactory = TrustManagerFactory.getInstance(&quot;SunX509&quot;);\n        trustManagerFactory.init(trustStore);\n            \n        return SslContextBuilder.forClient()\n            .keyManager(keyManagerFactory)\n            .trustManager(trustManagerFactory)\n            .build();\n            \n    } catch (Exception e) {\n        log.error(&quot;An error has occurred: &quot;, e);\n    }\n        \n    return null;\n}\n\n\nHttpClient httpClient = HttpClient.create().secure(sslSpec -&gt; sslSpec.sslContext(SslUtil.getTwoWaySslContext()));\nClientHttpConnector clientHttpConnector = new ReactorClientHttpConnector(httpClient);\nWebClient webClient = webClientBuilder\n    .clientConnector(clientHttpConnector)\n    .baseUrl(baseUrl)\n    .build();\n</code></pre>\n<p>Enjoy!</p>\n"},{"tags":[],"owner":{"account_id":13003455,"reputation":556,"user_id":9398808,"display_name":"Kwiatko"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1699313042,"creation_date":1699312661,"answer_id":77434732,"question_id":58193135,"body_markdown":"**1. Firstly you need to create keystore with the required keys** \r\n\r\nYou can use Java [keytool](https://docs.oracle.com/en/java/javase/11/tools/keytool.html#GUID-5990A2E4-78E3-47B7-AE75-6D1826259549) or more user-friendly [keystore-explorer](https://keystore-explorer.org/)\r\n\r\n**2. Next you just need load it into `HttpClient`** \r\n\r\n[Apache HttpComponents](https://hc.apache.org/index.html) offers more convenient way of creating `SSLContext` and configuring mTLS:\r\n\r\nWith - [Apache HttpClient &#187; 5.2.1](https://mvnrepository.com/artifact/org.apache.httpcomponents.client5/httpclient5/5.2.1)\r\n ```java\r\n@Configuration\r\npublic class WebClientConfigConfiguration {\r\n\r\n  @Value(&quot;${keystore.uri}&quot;)\r\n  private Resource keystore;\r\n\r\n  @Value(&quot;${keystore.password:}&quot;)\r\n  private String password;\r\n\r\n  @Bean\r\n  public WebClient webClient() throws GeneralSecurityException, IOException {\r\n    SSLContext sslContext = new SSLContextBuilder()\r\n        .loadKeyMaterial(keystore.getURL(), password.toCharArray(), password.toCharArray())\r\n        .build();\r\n\r\n    Registry&lt;TlsStrategy&gt; registry = RegistryBuilder.&lt;TlsStrategy&gt;create()\r\n        .register(URIScheme.HTTPS.getId(), new BasicClientTlsStrategy(sslContext))\r\n        .build();\r\n\r\n    CloseableHttpAsyncClient httpClient = HttpAsyncClients.custom()\r\n        .setConnectionManager(new PoolingAsyncClientConnectionManager(registry))\r\n        .build();\r\n\r\n    return WebClient.builder()\r\n        .clientConnector(new HttpComponentsClientHttpConnector(httpClient))\r\n        .build();\r\n  }\r\n}\r\n\r\n```\r\nyou can go even further and replace `HttpClient` with the one provided with Java:\r\n\r\nUsing - [Spring Web &#187; 6.0.13](https://mvnrepository.com/artifact/org.springframework/spring-web/6.0.13)\r\n\r\n```java\r\n...\r\n  @Bean\r\n  public WebClient webClient() throws GeneralSecurityException, IOException {\r\n    SSLContext sslContext = new SSLContextBuilder()\r\n        .loadKeyMaterial(keystore.getURL(), password.toCharArray(), password.toCharArray())\r\n        .build();\r\n\r\n    HttpClient httpClient = HttpClient.newBuilder()\r\n        .sslContext(sslContext)\r\n        .build();\r\n\r\n    return WebClient.builder()\r\n        .clientConnector(new JdkClientHttpConnector(httpClient))\r\n        .build();\r\n  }\r\n...\r\n```\r\nThis page may come in handy when comparing these two options: \r\nhttps://www.wiremock.io/post/java-http-client-comparison","title":"How to add client certificates to the Spring WebClient?","body":"<p><strong>1. Firstly you need to create keystore with the required keys</strong></p>\n<p>You can use Java <a href=\"https://docs.oracle.com/en/java/javase/11/tools/keytool.html#GUID-5990A2E4-78E3-47B7-AE75-6D1826259549\" rel=\"nofollow noreferrer\">keytool</a> or more user-friendly <a href=\"https://keystore-explorer.org/\" rel=\"nofollow noreferrer\">keystore-explorer</a></p>\n<p><strong>2. Next you just need load it into <code>HttpClient</code></strong></p>\n<p><a href=\"https://hc.apache.org/index.html\" rel=\"nofollow noreferrer\">Apache HttpComponents</a> offers more convenient way of creating <code>SSLContext</code> and configuring mTLS:</p>\n<p>With - <a href=\"https://mvnrepository.com/artifact/org.apache.httpcomponents.client5/httpclient5/5.2.1\" rel=\"nofollow noreferrer\">Apache HttpClient  5.2.1</a></p>\n<pre class=\"lang-java prettyprint-override\"><code>@Configuration\npublic class WebClientConfigConfiguration {\n\n @Value(&quot;${keystore.uri}&quot;)\n private Resource keystore;\n\n @Value(&quot;${keystore.password:}&quot;)\n private String password;\n\n @Bean\n public WebClient webClient() throws GeneralSecurityException, IOException {\n   SSLContext sslContext = new SSLContextBuilder()\n       .loadKeyMaterial(keystore.getURL(), password.toCharArray(), password.toCharArray())\n       .build();\n\n   Registry&lt;TlsStrategy&gt; registry = RegistryBuilder.&lt;TlsStrategy&gt;create()\n       .register(URIScheme.HTTPS.getId(), new BasicClientTlsStrategy(sslContext))\n       .build();\n\n   CloseableHttpAsyncClient httpClient = HttpAsyncClients.custom()\n       .setConnectionManager(new PoolingAsyncClientConnectionManager(registry))\n       .build();\n\n   return WebClient.builder()\n       .clientConnector(new HttpComponentsClientHttpConnector(httpClient))\n       .build();\n }\n}\n\n</code></pre>\n<p>you can go even further and replace <code>HttpClient</code> with the one provided with Java:</p>\n<p>Using - <a href=\"https://mvnrepository.com/artifact/org.springframework/spring-web/6.0.13\" rel=\"nofollow noreferrer\">Spring Web  6.0.13</a></p>\n<pre class=\"lang-java prettyprint-override\"><code>...\n  @Bean\n  public WebClient webClient() throws GeneralSecurityException, IOException {\n    SSLContext sslContext = new SSLContextBuilder()\n        .loadKeyMaterial(keystore.getURL(), password.toCharArray(), password.toCharArray())\n        .build();\n\n    HttpClient httpClient = HttpClient.newBuilder()\n        .sslContext(sslContext)\n        .build();\n\n    return WebClient.builder()\n        .clientConnector(new JdkClientHttpConnector(httpClient))\n        .build();\n  }\n...\n</code></pre>\n<p>This page may come in handy when comparing these two options:\n<a href=\"https://www.wiremock.io/post/java-http-client-comparison\" rel=\"nofollow noreferrer\">https://www.wiremock.io/post/java-http-client-comparison</a></p>\n"}],"owner":{"account_id":4240624,"reputation":521,"user_id":3470629,"accept_rate":22,"display_name":"user3470629"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":21442,"favorite_count":0,"down_vote_count":0,"up_vote_count":15,"answer_count":3,"score":15,"last_activity_date":1699347908,"creation_date":1569969497,"question_id":58193135,"body_markdown":"I&#39;m building a Spring WebClient which internally calls to REST API&#39;s which are hosted in different server. To do that I need to send public key (.cert) and private key (.key) to every request for the handshake.\r\nI&#39;m not sure how to do that with Spring WebClient. \r\n\r\nI tried setting up WebClient, but struck at adding this peace of code\r\n\r\nWebClient Builder\r\n```\r\nthis.webCLient = WebClient.builder()\r\n                .baseUrl(&quot;https://some-rest-api.com&quot;)\r\n                .defaultHeader(HttpHeaders.CONTENT_TYPE, MediaType.APPLICATION_JSON.toString())\r\n                .build();\r\n```\r\n\r\nActual Call\r\n\r\n```\r\nthis.webClient.get()\r\n                .uri(&quot;/getData&quot;)\r\n                .exchange()\r\n                .flatMap(clientResponse -&gt; {\r\n                    System.out.println(clientResponse);\r\n                    return clientResponse.bodyToMono(MyClass.class);\r\n                });\r\n\r\n```\r\n\r\nSince there were no certificates added to the request, I&#39;m getting the handshake error on the log\r\n\r\n```\r\njavax.net.ssl.SSLException: Received fatal alert: handshake_failure\r\n```\r\n\r\nHow to add those certificates to the WebClient requests, so I don&#39;t get this error ? I have the certificates, but not sure how to add it.","title":"How to add client certificates to the Spring WebClient?","body":"<p>I'm building a Spring WebClient which internally calls to REST API's which are hosted in different server. To do that I need to send public key (.cert) and private key (.key) to every request for the handshake.\nI'm not sure how to do that with Spring WebClient. </p>\n\n<p>I tried setting up WebClient, but struck at adding this peace of code</p>\n\n<p>WebClient Builder</p>\n\n<pre><code>this.webCLient = WebClient.builder()\n                .baseUrl(\"https://some-rest-api.com\")\n                .defaultHeader(HttpHeaders.CONTENT_TYPE, MediaType.APPLICATION_JSON.toString())\n                .build();\n</code></pre>\n\n<p>Actual Call</p>\n\n<pre><code>this.webClient.get()\n                .uri(\"/getData\")\n                .exchange()\n                .flatMap(clientResponse -&gt; {\n                    System.out.println(clientResponse);\n                    return clientResponse.bodyToMono(MyClass.class);\n                });\n\n</code></pre>\n\n<p>Since there were no certificates added to the request, I'm getting the handshake error on the log</p>\n\n<pre><code>javax.net.ssl.SSLException: Received fatal alert: handshake_failure\n</code></pre>\n\n<p>How to add those certificates to the WebClient requests, so I don't get this error ? I have the certificates, but not sure how to add it.</p>\n"},{"tags":["java","json","rest-assured"],"comments":[{"owner":{"account_id":15371775,"reputation":514,"user_id":11089623,"display_name":"cheparsky"},"score":0,"creation_date":1658778463,"post_id":55631016,"comment_id":129131846,"body_markdown":"Why don&#39;t you want to put your XML to file, and then only read this file to `JSONObject` and then pass it to the body using `.toJSONString()` ?","body":"Why don&#39;t you want to put your XML to file, and then only read this file to <code>JSONObject</code> and then pass it to the body using <code>.toJSONString()</code> ?"}],"answers":[{"tags":[],"owner":{"account_id":5436326,"reputation":167,"user_id":4325716,"accept_rate":43,"display_name":"Emotional_Goose"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1554984324,"creation_date":1554984324,"answer_id":55632099,"question_id":55631016,"body_markdown":"    ArrayList&lt;JSONObject&gt; array= new ArrayList&lt;JSONObject&gt;();\r\n        JSONObject json= new JSONObject();\r\n    \r\n        try {\r\n            json.put(&quot;key&quot;, &quot;value&quot;);// your json\r\n        } catch (JSONException e) {\r\n            e.printStackTrace();\r\n        }\r\n        array.add(json);\r\n        String printjsonarray= array.toString();// pass this into the request ","title":"How to pass json array under request body using simply json","body":"<pre><code>ArrayList&lt;JSONObject&gt; array= new ArrayList&lt;JSONObject&gt;();\n    JSONObject json= new JSONObject();\n\n    try {\n        json.put(\"key\", \"value\");// your json\n    } catch (JSONException e) {\n        e.printStackTrace();\n    }\n    array.add(json);\n    String printjsonarray= array.toString();// pass this into the request \n</code></pre>\n"},{"tags":[],"owner":{"account_id":16787881,"reputation":1,"user_id":12136355,"display_name":"Nikhil Pandey"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1569704104,"creation_date":1569704104,"answer_id":58150237,"question_id":55631016,"body_markdown":"\r\n\t\tObjectMapper mapper = new ObjectMapper();\r\n\r\n//Create a Java Class for the variables inside array.\r\n\t\t\t\t\r\n\tJsonArrayData tag4paramVal1 = new JsonArrayData(&quot;ABC&quot;,&quot;123ABC123&quot;,&quot;TestMyDomain&quot;);\r\n\tJsonArrayData tag4paramVal2 = new JsonArrayData(&quot;XYZ&quot;,&quot;123XYZ123&quot;,&quot;TestMyDomain&quot;);\r\n\t\t\r\n\t\tObject[] tag4ValArray = {tag4paramVal1,tag4paramVal2};\r\n\t\t\r\n\t\tString reqJson = null;\r\n\t\tList&lt;String&gt; tag4Data = new ArrayList&lt;String&gt;();\r\n\t\t\r\n\t\tfor(Object obj:tag4ValArray){\r\n\t\t\t\r\n\t\t\treqJson = mapper.writeValueAsString(obj);\r\n\t\t\tSystem.out.println(reqJson);\r\n\t\t\ttag4Data.add(reqJson);\r\n\t\t\t\r\n\t\t}\r\n\t\t\r\n\t\tSystem.out.println(tag4Data);\r\n\t\t\r\n\t\tHashMap&lt;String,List&lt;String&gt;&gt; finalReq = new HashMap&lt;String,List&lt;String&gt;&gt;();\r\n\t\tfinalReq.put(&quot;\\&quot;tag4\\&quot;:&quot;,tag4Data);\r\n\t\t\r\n\t\r\n\t\tString finalreqString = finalReq.toString();\r\n\t\tSystem.out.println(finalreqString);\r\n\t\t\r\n\t\tfinalreqString = finalreqString.replace(&#39;=&#39;, &#39; &#39;);\r\n\t\tSystem.out.println(finalreqString);\r\n\t\t\r\n//Use the above String as a parameter to POST request. You will get your desired JSON array .\r\n\r\n//JsonArrayData class code\r\n\r\npublic class JsonArrayData {\r\n\t\r\n\tString domainName;\r\n\tString domainId;\r\n\tString domainGUID;\r\n\t\r\n\tpublic JsonArrayData(String domainName,String domainId,String domainGUID){\r\n\t\t\r\n\t\tthis.domainName = domainName;\r\n\t\tthis.domainId = domainId;\r\n\t\tthis.domainGUID = domainGUID;\r\n\t\t\r\n\t}\r\n\t\r\n\tpublic String getDomainName() {\r\n\t\treturn domainName;\r\n\t}\r\n\r\n\tpublic void setDomainName(String domainName) {\r\n\t\tthis.domainName = domainName;\r\n\t}\r\n\r\n\tpublic String getDomainId() {\r\n\t\treturn domainId;\r\n\t}\r\n\r\n\tpublic void setDomainId(String domainId) {\r\n\t\tthis.domainId = domainId;\r\n\t}\r\n\r\n\tpublic String getDomainGUID() {\r\n\t\treturn domainGUID;\r\n\t}\r\n\r\n\tpublic void setDomainGUID(String domainGUID) {\r\n\t\tthis.domainGUID = domainGUID;\r\n\t}\r\n\r\n}","title":"How to pass json array under request body using simply json","body":"<pre><code>    ObjectMapper mapper = new ObjectMapper();\n</code></pre>\n\n<p>//Create a Java Class for the variables inside array.</p>\n\n<pre><code>JsonArrayData tag4paramVal1 = new JsonArrayData(\"ABC\",\"123ABC123\",\"TestMyDomain\");\nJsonArrayData tag4paramVal2 = new JsonArrayData(\"XYZ\",\"123XYZ123\",\"TestMyDomain\");\n\n    Object[] tag4ValArray = {tag4paramVal1,tag4paramVal2};\n\n    String reqJson = null;\n    List&lt;String&gt; tag4Data = new ArrayList&lt;String&gt;();\n\n    for(Object obj:tag4ValArray){\n\n        reqJson = mapper.writeValueAsString(obj);\n        System.out.println(reqJson);\n        tag4Data.add(reqJson);\n\n    }\n\n    System.out.println(tag4Data);\n\n    HashMap&lt;String,List&lt;String&gt;&gt; finalReq = new HashMap&lt;String,List&lt;String&gt;&gt;();\n    finalReq.put(\"\\\"tag4\\\":\",tag4Data);\n\n\n    String finalreqString = finalReq.toString();\n    System.out.println(finalreqString);\n\n    finalreqString = finalreqString.replace('=', ' ');\n    System.out.println(finalreqString);\n</code></pre>\n\n<p>//Use the above String as a parameter to POST request. You will get your desired JSON array .</p>\n\n<p>//JsonArrayData class code</p>\n\n<p>public class JsonArrayData {</p>\n\n<pre><code>String domainName;\nString domainId;\nString domainGUID;\n\npublic JsonArrayData(String domainName,String domainId,String domainGUID){\n\n    this.domainName = domainName;\n    this.domainId = domainId;\n    this.domainGUID = domainGUID;\n\n}\n\npublic String getDomainName() {\n    return domainName;\n}\n\npublic void setDomainName(String domainName) {\n    this.domainName = domainName;\n}\n\npublic String getDomainId() {\n    return domainId;\n}\n\npublic void setDomainId(String domainId) {\n    this.domainId = domainId;\n}\n\npublic String getDomainGUID() {\n    return domainGUID;\n}\n\npublic void setDomainGUID(String domainGUID) {\n    this.domainGUID = domainGUID;\n}\n</code></pre>\n\n<p>}</p>\n"}],"owner":{"account_id":12214820,"reputation":11,"user_id":8915590,"display_name":"user8915590"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":13482,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":2,"score":1,"last_activity_date":1699347830,"creation_date":1554980731,"question_id":55631016,"body_markdown":"I am using below code to automate REST API.\r\nPlease help me to understand how can I put whole json data for sample data mentioned below as the input has arrays whereas till now I used flat jsons without arrays\t\r\n\r\n&lt;!-- language: lang-java --&gt;\r\n\r\n    Method Dummy()\r\n    {\r\n\t    RestAssured.baseURI =&quot;http://mydummyURL&quot;;\r\n\t    RequestSpecification request = RestAssured.given();\r\n\t    JSONObject requestParams = new JSONObject();\r\n\t    requestParams.put(&quot;id&quot;, &quot;THAILAND&quot;); //Issue is with this code \r\n\t    request.header(&quot;Content-Type&quot;, &quot;application/json&quot;);\r\n\t    request.body(requestParams.toJSONString());\r\n\t    Response response = request.post(&quot;/EndPoint&quot;);\r\n    }\r\n\r\n\r\nwhere the json body looks like this\r\n```js\r\n{\r\n\t&quot;tag1&quot;: &quot;value1&quot;,\r\n\t&quot;tag2&quot;: &quot;value2&quot;,\r\n\t&quot;tag3&quot;: {\r\n\t\t&quot;tag31&quot;: &quot;value31&quot;,\r\n\t\t&quot;tag32&quot;: &quot;value32&quot;\r\n\t},\r\n\t&quot;tag4&quot;: [{\r\n\t\t\t&quot;domainName&quot;: &quot;ABC&quot;,\r\n\t\t\t&quot;domainId&quot;: &quot;123ABC123&quot;,\r\n\t\t\t&quot;domainGUID&quot;: &quot;TestMyDomain&quot;\r\n\t\t},\r\n\t\t{\r\n\t\t\t&quot;domainName&quot;: &quot;XYZ&quot;,\r\n\t\t\t&quot;domainId&quot;: &quot;123XYZ123&quot;,\r\n\t\t\t&quot;domainGUID&quot;: &quot;TestMyDomain&quot;\r\n\t\t}\r\n\t]\r\n}\r\n```","title":"How to pass json array under request body using simply json","body":"<p>I am using below code to automate REST API.\nPlease help me to understand how can I put whole json data for sample data mentioned below as the input has arrays whereas till now I used flat jsons without arrays    </p>\n\n<pre class=\"lang-java prettyprint-override\"><code>Method Dummy()\n{\n    RestAssured.baseURI =\"http://mydummyURL\";\n    RequestSpecification request = RestAssured.given();\n    JSONObject requestParams = new JSONObject();\n    requestParams.put(\"id\", \"THAILAND\"); //Issue is with this code \n    request.header(\"Content-Type\", \"application/json\");\n    request.body(requestParams.toJSONString());\n    Response response = request.post(\"/EndPoint\");\n}\n</code></pre>\n\n<p>where the json body looks like this</p>\n\n<pre class=\"lang-js prettyprint-override\"><code>{\n    \"tag1\": \"value1\",\n    \"tag2\": \"value2\",\n    \"tag3\": {\n        \"tag31\": \"value31\",\n        \"tag32\": \"value32\"\n    },\n    \"tag4\": [{\n            \"domainName\": \"ABC\",\n            \"domainId\": \"123ABC123\",\n            \"domainGUID\": \"TestMyDomain\"\n        },\n        {\n            \"domainName\": \"XYZ\",\n            \"domainId\": \"123XYZ123\",\n            \"domainGUID\": \"TestMyDomain\"\n        }\n    ]\n}\n</code></pre>\n"},{"tags":["java","vaadin","vaadin-flow","vaadin24"],"comments":[{"owner":{"account_id":3837378,"reputation":35463,"user_id":3181392,"display_name":"cfrick"},"score":0,"creation_date":1699349487,"post_id":77436786,"comment_id":136517332,"body_markdown":"Have you done a full clean (depending on your build-tool)? The one, that removes all generated files and node and what-not.","body":"Have you done a full clean (depending on your build-tool)? The one, that removes all generated files and node and what-not."},{"owner":{"account_id":15405462,"reputation":33,"user_id":11113722,"display_name":"Yberamos"},"score":0,"creation_date":1699350691,"post_id":77436786,"comment_id":136517578,"body_markdown":"Just to be sure, I&#39;ve tried cleaning the whole project once again but I still get the same error.","body":"Just to be sure, I&#39;ve tried cleaning the whole project once again but I still get the same error."},{"owner":{"account_id":15405462,"reputation":33,"user_id":11113722,"display_name":"Yberamos"},"score":0,"creation_date":1699351752,"post_id":77436786,"comment_id":136517817,"body_markdown":"I&#39;ve re-run the build-front end goal that was causing an error without changing anything and this time it worked... I tried once again to clean and rebuild and it worked without any issues... Time to work on the next migration issue.","body":"I&#39;ve re-run the build-front end goal that was causing an error without changing anything and this time it worked... I tried once again to clean and rebuild and it worked without any issues... Time to work on the next migration issue."}],"owner":{"account_id":15405462,"reputation":33,"user_id":11113722,"display_name":"Yberamos"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":45,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1699347531,"creation_date":1699347531,"question_id":77436786,"body_markdown":"I&#39;ve tried migrating an old application from vaadin 14 to 24 using \r\nhttps://vaadin.com/docs/v23/upgrading/essential-steps\r\nfollowed by \r\nhttps://vaadin.com/docs/latest/upgrading\r\n\r\nI&#39;ve manage to resolved most of the issues but I&#39;ve encountered one that I don&#39;t understand. When I launch the application, it fails on startup with the following stacktrace\r\n```\r\n07-Nov-2023 09:36:14.446 SEVERE [RMI TCP Connection(2)-127.0.0.1] org.apache.tomcat.util.modeler.BaseModelMBean.invoke Erreur lors de l&#39;invocation de la m&#195;&#169;thode [manageApp]\r\n\tjava.lang.IllegalStateException: Erreur lors du d&#195;&#169;marrage du conteneur fils\r\n\t\tat org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:686)\r\n\t\tat org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:658)\r\n\t\tat org.apache.catalina.core.StandardHost.addChild(StandardHost.java:713)\r\n\t\tat org.apache.catalina.startup.HostConfig.manageApp(HostConfig.java:1821)\r\n\t\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n\t\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)\r\n\t\tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n\t\tat java.base/java.lang.reflect.Method.invoke(Method.java:568)\r\n\t\tat org.apache.tomcat.util.modeler.BaseModelMBean.invoke(BaseModelMBean.java:294)\r\n\t\tat java.management/com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.invoke(DefaultMBeanServerInterceptor.java:814)\r\n\t\tat java.management/com.sun.jmx.mbeanserver.JmxMBeanServer.invoke(JmxMBeanServer.java:802)\r\n\t\tat org.apache.catalina.mbeans.MBeanFactory.createStandardContext(MBeanFactory.java:428)\r\n\t\tat org.apache.catalina.mbeans.MBeanFactory.createStandardContext(MBeanFactory.java:376)\r\n\t\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n\t\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)\r\n\t\tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n\t\tat java.base/java.lang.reflect.Method.invoke(Method.java:568)\r\n\t\tat org.apache.tomcat.util.modeler.BaseModelMBean.invoke(BaseModelMBean.java:294)\r\n\t\tat java.management/com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.invoke(DefaultMBeanServerInterceptor.java:814)\r\n\t\tat java.management/com.sun.jmx.mbeanserver.JmxMBeanServer.invoke(JmxMBeanServer.java:802)\r\n\t\tat java.management/com.sun.jmx.remote.security.MBeanServerAccessController.invoke(MBeanServerAccessController.java:472)\r\n\t\tat java.management.rmi/javax.management.remote.rmi.RMIConnectionImpl.doOperation(RMIConnectionImpl.java:1472)\r\n\t\tat java.management.rmi/javax.management.remote.rmi.RMIConnectionImpl$PrivilegedOperation.run(RMIConnectionImpl.java:1310)\r\n\t\tat java.base/java.security.AccessController.doPrivileged(AccessController.java:712)\r\n\t\tat java.management.rmi/javax.management.remote.rmi.RMIConnectionImpl.doPrivilegedOperation(RMIConnectionImpl.java:1412)\r\n\t\tat java.management.rmi/javax.management.remote.rmi.RMIConnectionImpl.invoke(RMIConnectionImpl.java:829)\r\n\t\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n\t\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)\r\n\t\tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n\t\tat java.base/java.lang.reflect.Method.invoke(Method.java:568)\r\n\t\tat java.rmi/sun.rmi.server.UnicastServerRef.dispatch(UnicastServerRef.java:360)\r\n\t\tat java.rmi/sun.rmi.transport.Transport$1.run(Transport.java:200)\r\n\t\tat java.rmi/sun.rmi.transport.Transport$1.run(Transport.java:197)\r\n\t\tat java.base/java.security.AccessController.doPrivileged(AccessController.java:712)\r\n\t\tat java.rmi/sun.rmi.transport.Transport.serviceCall(Transport.java:196)\r\n\t\tat java.rmi/sun.rmi.transport.tcp.TCPTransport.handleMessages(TCPTransport.java:587)\r\n\t\tat java.rmi/sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run0(TCPTransport.java:828)\r\n\t\tat java.rmi/sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.lambda$run$0(TCPTransport.java:705)\r\n\t\tat java.base/java.security.AccessController.doPrivileged(AccessController.java:399)\r\n\t\tat java.rmi/sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run(TCPTransport.java:704)\r\n\t\tat java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)\r\n\t\tat java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)\r\n\t\tat java.base/java.lang.Thread.run(Thread.java:833)\r\n\tCaused by: org.apache.catalina.LifecycleException: Echec de d&#195;&#169;marrage du composant [StandardEngine[Catalina].StandardHost[localhost].StandardContext[/myApp]]\r\n\t\tat org.apache.catalina.util.LifecycleBase.handleSubClassException(LifecycleBase.java:440)\r\n\t\tat org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:198)\r\n\t\tat org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:683)\r\n\t\t... 42 more\r\n\tCaused by: java.util.concurrent.CompletionException: com.vaadin.flow.server.ExecutionFailedException: Vite build exited with a non zero status\r\n\t\tat com.vaadin.base.devserver.startup.DevModeInitializer.runNodeTasks(DevModeInitializer.java:357)\r\n\t\tat com.vaadin.base.devserver.startup.DevModeInitializer.lambda$initDevModeHandler$0(DevModeInitializer.java:293)\r\n\t\tat java.base/java.util.concurrent.CompletableFuture$AsyncRun.run$$$capture(CompletableFuture.java:1804)\r\n\t\tat java.base/java.util.concurrent.CompletableFuture$AsyncRun.run(CompletableFuture.java)\r\n\t\tat java.base/java.util.concurrent.CompletableFuture$AsyncRun.exec(CompletableFuture.java:1796)\r\n\t\tat java.base/java.util.concurrent.ForkJoinTask.doExec$$$capture(ForkJoinTask.java:373)\r\n\t\tat java.base/java.util.concurrent.ForkJoinTask.doExec(ForkJoinTask.java)\r\n\t\tat java.base/java.util.concurrent.ForkJoinPool$WorkQueue.topLevelExec(ForkJoinPool.java:1182)\r\n\t\tat java.base/java.util.concurrent.ForkJoinPool.scan(ForkJoinPool.java:1655)\r\n\t\tat java.base/java.util.concurrent.ForkJoinPool.runWorker(ForkJoinPool.java:1622)\r\n\t\tat java.base/java.util.concurrent.ForkJoinWorkerThread.run(ForkJoinWorkerThread.java:165)\r\n\tCaused by: com.vaadin.flow.server.ExecutionFailedException: Vite build exited with a non zero status\r\n\t\tat com.vaadin.flow.server.frontend.TaskRunDevBundleBuild.runFrontendBuildTool(TaskRunDevBundleBuild.java:187)\r\n\t\tat com.vaadin.flow.server.frontend.TaskRunDevBundleBuild.execute(TaskRunDevBundleBuild.java:99)\r\n\t\tat com.vaadin.flow.server.frontend.NodeTasks.execute(NodeTasks.java:312)\r\n\t\tat com.vaadin.base.devserver.startup.DevModeInitializer.runNodeTasks(DevModeInitializer.java:352)\r\n\t\t... 10 more\r\n07-Nov-2023 09:36:14.449 SEVERE [RMI TCP Connection(2)-127.0.0.1] org.apache.tomcat.util.modeler.BaseModelMBean.invoke Erreur lors de l&#39;invocation de la m&#195;&#169;thode [createStandardContext]\r\n\tjavax.management.RuntimeOperationsException: Erreur lors de l&#39;invocation de la m&#195;&#169;thode [manageApp]\r\n\t\tat org.apache.tomcat.util.modeler.BaseModelMBean.invoke(BaseModelMBean.java:304)\r\n\t\tat java.management/com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.invoke(DefaultMBeanServerInterceptor.java:814)\r\n\t\tat java.management/com.sun.jmx.mbeanserver.JmxMBeanServer.invoke(JmxMBeanServer.java:802)\r\n\t\tat org.apache.catalina.mbeans.MBeanFactory.createStandardContext(MBeanFactory.java:428)\r\n\t\tat org.apache.catalina.mbeans.MBeanFactory.createStandardContext(MBeanFactory.java:376)\r\n\t\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n\t\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)\r\n\t\tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n\t\tat java.base/java.lang.reflect.Method.invoke(Method.java:568)\r\n\t\tat org.apache.tomcat.util.modeler.BaseModelMBean.invoke(BaseModelMBean.java:294)\r\n\t\tat java.management/com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.invoke(DefaultMBeanServerInterceptor.java:814)\r\n\t\tat java.management/com.sun.jmx.mbeanserver.JmxMBeanServer.invoke(JmxMBeanServer.java:802)\r\n\t\tat java.management/com.sun.jmx.remote.security.MBeanServerAccessController.invoke(MBeanServerAccessController.java:472)\r\n\t\tat java.management.rmi/javax.management.remote.rmi.RMIConnectionImpl.doOperation(RMIConnectionImpl.java:1472)\r\n\t\tat java.management.rmi/javax.management.remote.rmi.RMIConnectionImpl$PrivilegedOperation.run(RMIConnectionImpl.java:1310)\r\n\t\tat java.base/java.security.AccessController.doPrivileged(AccessController.java:712)\r\n\t\tat java.management.rmi/javax.management.remote.rmi.RMIConnectionImpl.doPrivilegedOperation(RMIConnectionImpl.java:1412)\r\n\t\tat java.management.rmi/javax.management.remote.rmi.RMIConnectionImpl.invoke(RMIConnectionImpl.java:829)\r\n\t\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n\t\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)\r\n\t\tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n\t\tat java.base/java.lang.reflect.Method.invoke(Method.java:568)\r\n\t\tat java.rmi/sun.rmi.server.UnicastServerRef.dispatch(UnicastServerRef.java:360)\r\n\t\tat java.rmi/sun.rmi.transport.Transport$1.run(Transport.java:200)\r\n\t\tat java.rmi/sun.rmi.transport.Transport$1.run(Transport.java:197)\r\n\t\tat java.base/java.security.AccessController.doPrivileged(AccessController.java:712)\r\n\t\tat java.rmi/sun.rmi.transport.Transport.serviceCall(Transport.java:196)\r\n\t\tat java.rmi/sun.rmi.transport.tcp.TCPTransport.handleMessages(TCPTransport.java:587)\r\n\t\tat java.rmi/sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run0(TCPTransport.java:828)\r\n\t\tat java.rmi/sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.lambda$run$0(TCPTransport.java:705)\r\n\t\tat java.base/java.security.AccessController.doPrivileged(AccessController.java:399)\r\n\t\tat java.rmi/sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run(TCPTransport.java:704)\r\n\t\tat java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)\r\n\t\tat java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)\r\n\t\tat java.base/java.lang.Thread.run(Thread.java:833)\r\n\tCaused by: java.lang.IllegalStateException: Erreur lors du d&#195;&#169;marrage du conteneur fils\r\n\t\tat org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:686)\r\n\t\tat org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:658)\r\n\t\tat org.apache.catalina.core.StandardHost.addChild(StandardHost.java:713)\r\n\t\tat org.apache.catalina.startup.HostConfig.manageApp(HostConfig.java:1821)\r\n\t\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n\t\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)\r\n\t\tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n\t\tat java.base/java.lang.reflect.Method.invoke(Method.java:568)\r\n\t\tat org.apache.tomcat.util.modeler.BaseModelMBean.invoke(BaseModelMBean.java:294)\r\n\t\t... 34 more\r\n\tCaused by: org.apache.catalina.LifecycleException: Echec de d&#195;&#169;marrage du composant [StandardEngine[Catalina].StandardHost[localhost].StandardContext[/myApp]]\r\n\t\tat org.apache.catalina.util.LifecycleBase.handleSubClassException(LifecycleBase.java:440)\r\n\t\tat org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:198)\r\n\t\tat org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:683)\r\n\t\t... 42 more\r\n\tCaused by: java.util.concurrent.CompletionException: com.vaadin.flow.server.ExecutionFailedException: Vite build exited with a non zero status\r\n\t\tat com.vaadin.base.devserver.startup.DevModeInitializer.runNodeTasks(DevModeInitializer.java:357)\r\n\t\tat com.vaadin.base.devserver.startup.DevModeInitializer.lambda$initDevModeHandler$0(DevModeInitializer.java:293)\r\n\t\tat java.base/java.util.concurrent.CompletableFuture$AsyncRun.run$$$capture(CompletableFuture.java:1804)\r\n\t\tat java.base/java.util.concurrent.CompletableFuture$AsyncRun.run(CompletableFuture.java)\r\n\t\tat java.base/java.util.concurrent.CompletableFuture$AsyncRun.exec(CompletableFuture.java:1796)\r\n\t\tat java.base/java.util.concurrent.ForkJoinTask.doExec$$$capture(ForkJoinTask.java:373)\r\n\t\tat java.base/java.util.concurrent.ForkJoinTask.doExec(ForkJoinTask.java)\r\n\t\tat java.base/java.util.concurrent.ForkJoinPool$WorkQueue.topLevelExec(ForkJoinPool.java:1182)\r\n\t\tat java.base/java.util.concurrent.ForkJoinPool.scan(ForkJoinPool.java:1655)\r\n\t\tat java.base/java.util.concurrent.ForkJoinPool.runWorker(ForkJoinPool.java:1622)\r\n\t\tat java.base/java.util.concurrent.ForkJoinWorkerThread.run(ForkJoinWorkerThread.java:165)\r\n\tCaused by: com.vaadin.flow.server.ExecutionFailedException: Vite build exited with a non zero status\r\n\t\tat com.vaadin.flow.server.frontend.TaskRunDevBundleBuild.runFrontendBuildTool(TaskRunDevBundleBuild.java:187)\r\n\t\tat com.vaadin.flow.server.frontend.TaskRunDevBundleBuild.execute(TaskRunDevBundleBuild.java:99)\r\n\t\tat com.vaadin.flow.server.frontend.NodeTasks.execute(NodeTasks.java:312)\r\n\t\tat com.vaadin.base.devserver.startup.DevModeInitializer.runNodeTasks(DevModeInitializer.java:352)\r\n\t\t... 10 more\r\n```\r\n\r\nBy putting a breakpoint on that exeption I&#39;ve managed to get this error that was not in my logs\r\n```\r\nvite v4.4.11 building for production...\r\ntransforming...\r\n\r\nimages/home.jpg referenced in [Path to my app]/frontend/styles/styles.css?used&amp;inline didn&#39;t resolve at build time, it will remain unchanged to be resolved at runtime\r\n 203 modules transformed.\r\n built in 2.07s\r\n[commonjs--resolver] Missing &quot;./directives/class-map&quot; specifier in &quot;lit-html&quot; package\r\nerror during build:\r\nError: Missing &quot;./directives/class-map&quot; specifier in &quot;lit-html&quot; package\r\n    at e (file:///[Path to my app]/node_modules/vite/dist/node/chunks/dep-2b82a1ce.js:21445:25)\r\n    at n (file:///[Path to my app]/node_modules/vite/dist/node/chunks/dep-2b82a1ce.js:21445:627)\r\n    at o (file:///[Path to my app]/node_modules/vite/dist/node/chunks/dep-2b82a1ce.js:21445:1297)\r\n    at resolveExportsOrImports (file:///[Path to my app]/node_modules/vite/dist/node/chunks/dep-2b82a1ce.js:28741:20)\r\n    at resolveDeepImport (file:///[Path to my app]/node_modules/vite/dist/node/chunks/dep-2b82a1ce.js:28760:31)\r\n    at tryNodeResolve (file:///[Path to my app]/node_modules/vite/dist/node/chunks/dep-2b82a1ce.js:28448:20)\r\n    at Object.resolveId (file:///[Path to my app]/node_modules/vite/dist/node/chunks/dep-2b82a1ce.js:28207:28)\r\n    at file:///[Path to my app]/node_modules/rollup/dist/es/shared/node-entry.js:25544:40\r\n    at async PluginDriver.hookFirstAndGetPlugin (file:///[Path to my app]/node_modules/rollup/dist/es/shared/node-entry.js:25444:28)\r\n    at async resolveId (file:///[Path to my app]/node_modules/rollup/dist/es/shared/node-entry.js:24117:26)\r\n```\r\n\r\nWhat I don&#39;t understand is that if I check in &#39;node_modules\\lit-html\\directives\\&#39; I find:\r\n\r\n - class-map.d.ts \r\n - class-map.d.ts.map\r\n - class-map.js\r\n\r\nWhat am I missing?","title":"Error launching application after migration from Vaadin 14 to Vaadin 24","body":"<p>I've tried migrating an old application from vaadin 14 to 24 using\n<a href=\"https://vaadin.com/docs/v23/upgrading/essential-steps\" rel=\"nofollow noreferrer\">https://vaadin.com/docs/v23/upgrading/essential-steps</a>\nfollowed by\n<a href=\"https://vaadin.com/docs/latest/upgrading\" rel=\"nofollow noreferrer\">https://vaadin.com/docs/latest/upgrading</a></p>\n<p>I've manage to resolved most of the issues but I've encountered one that I don't understand. When I launch the application, it fails on startup with the following stacktrace</p>\n<pre><code>07-Nov-2023 09:36:14.446 SEVERE [RMI TCP Connection(2)-127.0.0.1] org.apache.tomcat.util.modeler.BaseModelMBean.invoke Erreur lors de l'invocation de la mthode [manageApp]\n    java.lang.IllegalStateException: Erreur lors du dmarrage du conteneur fils\n        at org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:686)\n        at org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:658)\n        at org.apache.catalina.core.StandardHost.addChild(StandardHost.java:713)\n        at org.apache.catalina.startup.HostConfig.manageApp(HostConfig.java:1821)\n        at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n        at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)\n        at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n        at java.base/java.lang.reflect.Method.invoke(Method.java:568)\n        at org.apache.tomcat.util.modeler.BaseModelMBean.invoke(BaseModelMBean.java:294)\n        at java.management/com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.invoke(DefaultMBeanServerInterceptor.java:814)\n        at java.management/com.sun.jmx.mbeanserver.JmxMBeanServer.invoke(JmxMBeanServer.java:802)\n        at org.apache.catalina.mbeans.MBeanFactory.createStandardContext(MBeanFactory.java:428)\n        at org.apache.catalina.mbeans.MBeanFactory.createStandardContext(MBeanFactory.java:376)\n        at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n        at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)\n        at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n        at java.base/java.lang.reflect.Method.invoke(Method.java:568)\n        at org.apache.tomcat.util.modeler.BaseModelMBean.invoke(BaseModelMBean.java:294)\n        at java.management/com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.invoke(DefaultMBeanServerInterceptor.java:814)\n        at java.management/com.sun.jmx.mbeanserver.JmxMBeanServer.invoke(JmxMBeanServer.java:802)\n        at java.management/com.sun.jmx.remote.security.MBeanServerAccessController.invoke(MBeanServerAccessController.java:472)\n        at java.management.rmi/javax.management.remote.rmi.RMIConnectionImpl.doOperation(RMIConnectionImpl.java:1472)\n        at java.management.rmi/javax.management.remote.rmi.RMIConnectionImpl$PrivilegedOperation.run(RMIConnectionImpl.java:1310)\n        at java.base/java.security.AccessController.doPrivileged(AccessController.java:712)\n        at java.management.rmi/javax.management.remote.rmi.RMIConnectionImpl.doPrivilegedOperation(RMIConnectionImpl.java:1412)\n        at java.management.rmi/javax.management.remote.rmi.RMIConnectionImpl.invoke(RMIConnectionImpl.java:829)\n        at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n        at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)\n        at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n        at java.base/java.lang.reflect.Method.invoke(Method.java:568)\n        at java.rmi/sun.rmi.server.UnicastServerRef.dispatch(UnicastServerRef.java:360)\n        at java.rmi/sun.rmi.transport.Transport$1.run(Transport.java:200)\n        at java.rmi/sun.rmi.transport.Transport$1.run(Transport.java:197)\n        at java.base/java.security.AccessController.doPrivileged(AccessController.java:712)\n        at java.rmi/sun.rmi.transport.Transport.serviceCall(Transport.java:196)\n        at java.rmi/sun.rmi.transport.tcp.TCPTransport.handleMessages(TCPTransport.java:587)\n        at java.rmi/sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run0(TCPTransport.java:828)\n        at java.rmi/sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.lambda$run$0(TCPTransport.java:705)\n        at java.base/java.security.AccessController.doPrivileged(AccessController.java:399)\n        at java.rmi/sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run(TCPTransport.java:704)\n        at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)\n        at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)\n        at java.base/java.lang.Thread.run(Thread.java:833)\n    Caused by: org.apache.catalina.LifecycleException: Echec de dmarrage du composant [StandardEngine[Catalina].StandardHost[localhost].StandardContext[/myApp]]\n        at org.apache.catalina.util.LifecycleBase.handleSubClassException(LifecycleBase.java:440)\n        at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:198)\n        at org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:683)\n        ... 42 more\n    Caused by: java.util.concurrent.CompletionException: com.vaadin.flow.server.ExecutionFailedException: Vite build exited with a non zero status\n        at com.vaadin.base.devserver.startup.DevModeInitializer.runNodeTasks(DevModeInitializer.java:357)\n        at com.vaadin.base.devserver.startup.DevModeInitializer.lambda$initDevModeHandler$0(DevModeInitializer.java:293)\n        at java.base/java.util.concurrent.CompletableFuture$AsyncRun.run$$$capture(CompletableFuture.java:1804)\n        at java.base/java.util.concurrent.CompletableFuture$AsyncRun.run(CompletableFuture.java)\n        at java.base/java.util.concurrent.CompletableFuture$AsyncRun.exec(CompletableFuture.java:1796)\n        at java.base/java.util.concurrent.ForkJoinTask.doExec$$$capture(ForkJoinTask.java:373)\n        at java.base/java.util.concurrent.ForkJoinTask.doExec(ForkJoinTask.java)\n        at java.base/java.util.concurrent.ForkJoinPool$WorkQueue.topLevelExec(ForkJoinPool.java:1182)\n        at java.base/java.util.concurrent.ForkJoinPool.scan(ForkJoinPool.java:1655)\n        at java.base/java.util.concurrent.ForkJoinPool.runWorker(ForkJoinPool.java:1622)\n        at java.base/java.util.concurrent.ForkJoinWorkerThread.run(ForkJoinWorkerThread.java:165)\n    Caused by: com.vaadin.flow.server.ExecutionFailedException: Vite build exited with a non zero status\n        at com.vaadin.flow.server.frontend.TaskRunDevBundleBuild.runFrontendBuildTool(TaskRunDevBundleBuild.java:187)\n        at com.vaadin.flow.server.frontend.TaskRunDevBundleBuild.execute(TaskRunDevBundleBuild.java:99)\n        at com.vaadin.flow.server.frontend.NodeTasks.execute(NodeTasks.java:312)\n        at com.vaadin.base.devserver.startup.DevModeInitializer.runNodeTasks(DevModeInitializer.java:352)\n        ... 10 more\n07-Nov-2023 09:36:14.449 SEVERE [RMI TCP Connection(2)-127.0.0.1] org.apache.tomcat.util.modeler.BaseModelMBean.invoke Erreur lors de l'invocation de la mthode [createStandardContext]\n    javax.management.RuntimeOperationsException: Erreur lors de l'invocation de la mthode [manageApp]\n        at org.apache.tomcat.util.modeler.BaseModelMBean.invoke(BaseModelMBean.java:304)\n        at java.management/com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.invoke(DefaultMBeanServerInterceptor.java:814)\n        at java.management/com.sun.jmx.mbeanserver.JmxMBeanServer.invoke(JmxMBeanServer.java:802)\n        at org.apache.catalina.mbeans.MBeanFactory.createStandardContext(MBeanFactory.java:428)\n        at org.apache.catalina.mbeans.MBeanFactory.createStandardContext(MBeanFactory.java:376)\n        at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n        at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)\n        at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n        at java.base/java.lang.reflect.Method.invoke(Method.java:568)\n        at org.apache.tomcat.util.modeler.BaseModelMBean.invoke(BaseModelMBean.java:294)\n        at java.management/com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.invoke(DefaultMBeanServerInterceptor.java:814)\n        at java.management/com.sun.jmx.mbeanserver.JmxMBeanServer.invoke(JmxMBeanServer.java:802)\n        at java.management/com.sun.jmx.remote.security.MBeanServerAccessController.invoke(MBeanServerAccessController.java:472)\n        at java.management.rmi/javax.management.remote.rmi.RMIConnectionImpl.doOperation(RMIConnectionImpl.java:1472)\n        at java.management.rmi/javax.management.remote.rmi.RMIConnectionImpl$PrivilegedOperation.run(RMIConnectionImpl.java:1310)\n        at java.base/java.security.AccessController.doPrivileged(AccessController.java:712)\n        at java.management.rmi/javax.management.remote.rmi.RMIConnectionImpl.doPrivilegedOperation(RMIConnectionImpl.java:1412)\n        at java.management.rmi/javax.management.remote.rmi.RMIConnectionImpl.invoke(RMIConnectionImpl.java:829)\n        at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n        at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)\n        at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n        at java.base/java.lang.reflect.Method.invoke(Method.java:568)\n        at java.rmi/sun.rmi.server.UnicastServerRef.dispatch(UnicastServerRef.java:360)\n        at java.rmi/sun.rmi.transport.Transport$1.run(Transport.java:200)\n        at java.rmi/sun.rmi.transport.Transport$1.run(Transport.java:197)\n        at java.base/java.security.AccessController.doPrivileged(AccessController.java:712)\n        at java.rmi/sun.rmi.transport.Transport.serviceCall(Transport.java:196)\n        at java.rmi/sun.rmi.transport.tcp.TCPTransport.handleMessages(TCPTransport.java:587)\n        at java.rmi/sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run0(TCPTransport.java:828)\n        at java.rmi/sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.lambda$run$0(TCPTransport.java:705)\n        at java.base/java.security.AccessController.doPrivileged(AccessController.java:399)\n        at java.rmi/sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run(TCPTransport.java:704)\n        at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)\n        at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)\n        at java.base/java.lang.Thread.run(Thread.java:833)\n    Caused by: java.lang.IllegalStateException: Erreur lors du dmarrage du conteneur fils\n        at org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:686)\n        at org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:658)\n        at org.apache.catalina.core.StandardHost.addChild(StandardHost.java:713)\n        at org.apache.catalina.startup.HostConfig.manageApp(HostConfig.java:1821)\n        at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n        at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)\n        at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n        at java.base/java.lang.reflect.Method.invoke(Method.java:568)\n        at org.apache.tomcat.util.modeler.BaseModelMBean.invoke(BaseModelMBean.java:294)\n        ... 34 more\n    Caused by: org.apache.catalina.LifecycleException: Echec de dmarrage du composant [StandardEngine[Catalina].StandardHost[localhost].StandardContext[/myApp]]\n        at org.apache.catalina.util.LifecycleBase.handleSubClassException(LifecycleBase.java:440)\n        at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:198)\n        at org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:683)\n        ... 42 more\n    Caused by: java.util.concurrent.CompletionException: com.vaadin.flow.server.ExecutionFailedException: Vite build exited with a non zero status\n        at com.vaadin.base.devserver.startup.DevModeInitializer.runNodeTasks(DevModeInitializer.java:357)\n        at com.vaadin.base.devserver.startup.DevModeInitializer.lambda$initDevModeHandler$0(DevModeInitializer.java:293)\n        at java.base/java.util.concurrent.CompletableFuture$AsyncRun.run$$$capture(CompletableFuture.java:1804)\n        at java.base/java.util.concurrent.CompletableFuture$AsyncRun.run(CompletableFuture.java)\n        at java.base/java.util.concurrent.CompletableFuture$AsyncRun.exec(CompletableFuture.java:1796)\n        at java.base/java.util.concurrent.ForkJoinTask.doExec$$$capture(ForkJoinTask.java:373)\n        at java.base/java.util.concurrent.ForkJoinTask.doExec(ForkJoinTask.java)\n        at java.base/java.util.concurrent.ForkJoinPool$WorkQueue.topLevelExec(ForkJoinPool.java:1182)\n        at java.base/java.util.concurrent.ForkJoinPool.scan(ForkJoinPool.java:1655)\n        at java.base/java.util.concurrent.ForkJoinPool.runWorker(ForkJoinPool.java:1622)\n        at java.base/java.util.concurrent.ForkJoinWorkerThread.run(ForkJoinWorkerThread.java:165)\n    Caused by: com.vaadin.flow.server.ExecutionFailedException: Vite build exited with a non zero status\n        at com.vaadin.flow.server.frontend.TaskRunDevBundleBuild.runFrontendBuildTool(TaskRunDevBundleBuild.java:187)\n        at com.vaadin.flow.server.frontend.TaskRunDevBundleBuild.execute(TaskRunDevBundleBuild.java:99)\n        at com.vaadin.flow.server.frontend.NodeTasks.execute(NodeTasks.java:312)\n        at com.vaadin.base.devserver.startup.DevModeInitializer.runNodeTasks(DevModeInitializer.java:352)\n        ... 10 more\n</code></pre>\n<p>By putting a breakpoint on that exeption I've managed to get this error that was not in my logs</p>\n<pre><code>vite v4.4.11 building for production...\ntransforming...\n\nimages/home.jpg referenced in [Path to my app]/frontend/styles/styles.css?used&amp;inline didn't resolve at build time, it will remain unchanged to be resolved at runtime\n 203 modules transformed.\n built in 2.07s\n[commonjs--resolver] Missing &quot;./directives/class-map&quot; specifier in &quot;lit-html&quot; package\nerror during build:\nError: Missing &quot;./directives/class-map&quot; specifier in &quot;lit-html&quot; package\n    at e (file:///[Path to my app]/node_modules/vite/dist/node/chunks/dep-2b82a1ce.js:21445:25)\n    at n (file:///[Path to my app]/node_modules/vite/dist/node/chunks/dep-2b82a1ce.js:21445:627)\n    at o (file:///[Path to my app]/node_modules/vite/dist/node/chunks/dep-2b82a1ce.js:21445:1297)\n    at resolveExportsOrImports (file:///[Path to my app]/node_modules/vite/dist/node/chunks/dep-2b82a1ce.js:28741:20)\n    at resolveDeepImport (file:///[Path to my app]/node_modules/vite/dist/node/chunks/dep-2b82a1ce.js:28760:31)\n    at tryNodeResolve (file:///[Path to my app]/node_modules/vite/dist/node/chunks/dep-2b82a1ce.js:28448:20)\n    at Object.resolveId (file:///[Path to my app]/node_modules/vite/dist/node/chunks/dep-2b82a1ce.js:28207:28)\n    at file:///[Path to my app]/node_modules/rollup/dist/es/shared/node-entry.js:25544:40\n    at async PluginDriver.hookFirstAndGetPlugin (file:///[Path to my app]/node_modules/rollup/dist/es/shared/node-entry.js:25444:28)\n    at async resolveId (file:///[Path to my app]/node_modules/rollup/dist/es/shared/node-entry.js:24117:26)\n</code></pre>\n<p>What I don't understand is that if I check in 'node_modules\\lit-html\\directives' I find:</p>\n<ul>\n<li>class-map.d.ts</li>\n<li>class-map.d.ts.map</li>\n<li>class-map.js</li>\n</ul>\n<p>What am I missing?</p>\n"},{"tags":["java","lombok"],"comments":[{"owner":{"account_id":17065598,"reputation":183,"user_id":12347865,"display_name":"Max"},"score":0,"creation_date":1584286779,"post_id":60694561,"comment_id":107384090,"body_markdown":"Did you install the Lombok plugin in IntelliJ itself?","body":"Did you install the Lombok plugin in IntelliJ itself?"},{"owner":{"account_id":7894840,"reputation":479,"user_id":5963886,"accept_rate":0,"display_name":"chiefpika"},"score":0,"creation_date":1584286855,"post_id":60694561,"comment_id":107384108,"body_markdown":"yes, i did. will attach the screenshot","body":"yes, i did. will attach the screenshot"},{"owner":{"account_id":1574647,"reputation":4107,"user_id":1472828,"accept_rate":94,"display_name":"HoKy22"},"score":0,"creation_date":1594346690,"post_id":60694561,"comment_id":111100872,"body_markdown":"Just checking the annotation processor box worked for me","body":"Just checking the annotation processor box worked for me"}],"answers":[{"tags":[],"owner":{"account_id":7894840,"reputation":479,"user_id":5963886,"accept_rate":0,"display_name":"chiefpika"},"down_vote_count":0,"up_vote_count":21,"is_accepted":false,"score":21,"last_activity_date":1584287741,"creation_date":1584287741,"answer_id":60694745,"question_id":60694561,"body_markdown":"I didn&#39;t put \r\n\r\n    annotationProcessor &#39;org.projectlombok:lombok:1.18.12&#39;\r\n\r\nin my build.gradle\r\n\r\nproblem solved.\r\n","title":"Lombok getter setter cannot find symbol","body":"<p>I didn't put </p>\n\n<pre><code>annotationProcessor 'org.projectlombok:lombok:1.18.12'\n</code></pre>\n\n<p>in my build.gradle</p>\n\n<p>problem solved.</p>\n"},{"tags":[],"owner":{"account_id":25301414,"reputation":1,"user_id":19125598,"display_name":"Andrii Brazhnyk"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1653305164,"creation_date":1653305164,"answer_id":72347741,"question_id":60694561,"body_markdown":"For some reason the Maven repository only provides you with the &#39;compileOnly&#39; dependency for the Gradle builder.\r\nHowever, if you look in the Lombok documentation you will find that you also need to use the &#39;annotationProcessor&#39;.\r\n\r\nhttps://projectlombok.org/setup/gradle\r\n\r\n","title":"Lombok getter setter cannot find symbol","body":"<p>For some reason the Maven repository only provides you with the 'compileOnly' dependency for the Gradle builder.\nHowever, if you look in the Lombok documentation you will find that you also need to use the 'annotationProcessor'.</p>\n<p><a href=\"https://projectlombok.org/setup/gradle\" rel=\"nofollow noreferrer\">https://projectlombok.org/setup/gradle</a></p>\n"},{"tags":[],"owner":{"account_id":16319704,"reputation":1245,"user_id":11785852,"display_name":"Ruchira Nawarathna"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1669981074,"creation_date":1669981074,"answer_id":74655199,"question_id":60694561,"body_markdown":"I had the same issue. But my solution was bit different. \r\n\r\nMy project is on java 8 but IDEA SDK was set to java 17. Once I changed it to java 8 issue was solved. \r\n\r\n1. Go to File &gt; Project Structure &gt; Project\r\n2. Change SDK\r\n[![enter image description here][1]][1]\r\n3. Apply &gt; OK\r\n4. File &gt; Invalidate and Restart\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/7Mcqc.png","title":"Lombok getter setter cannot find symbol","body":"<p>I had the same issue. But my solution was bit different.</p>\n<p>My project is on java 8 but IDEA SDK was set to java 17. Once I changed it to java 8 issue was solved.</p>\n<ol>\n<li>Go to File &gt; Project Structure &gt; Project</li>\n<li>Change SDK\n<a href=\"https://i.stack.imgur.com/7Mcqc.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/7Mcqc.png\" alt=\"enter image description here\" /></a></li>\n<li>Apply &gt; OK</li>\n<li>File &gt; Invalidate and Restart</li>\n</ol>\n"},{"tags":[],"owner":{"account_id":10509983,"reputation":1,"user_id":7746005,"display_name":"Venya  Bohdan"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1676881227,"creation_date":1676881227,"answer_id":75506790,"question_id":60694561,"body_markdown":"I faced the same error when tried to build my project (gradle). I used jdk-15 on my project, but then installed jdk-17 on my computer (even without changing sdk in the project) and the problem happened.\r\nTo fix the issue I uninstalled jdk-17 from the computer (deleting sdk on project is not enough)","title":"Lombok getter setter cannot find symbol","body":"<p>I faced the same error when tried to build my project (gradle). I used jdk-15 on my project, but then installed jdk-17 on my computer (even without changing sdk in the project) and the problem happened.\nTo fix the issue I uninstalled jdk-17 from the computer (deleting sdk on project is not enough)</p>\n"},{"tags":[],"owner":{"account_id":3650693,"reputation":19,"user_id":3042956,"display_name":"Sabeer"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1685187708,"creation_date":1685187708,"answer_id":76346740,"question_id":60694561,"body_markdown":"Added both compile only and annotationProcessor\r\n[enter image description here][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/h1L04.png","title":"Lombok getter setter cannot find symbol","body":"<p>Added both compile only and annotationProcessor\n<a href=\"https://i.stack.imgur.com/h1L04.png\" rel=\"nofollow noreferrer\">enter image description here</a></p>\n"},{"tags":[],"owner":{"account_id":9551616,"reputation":103,"user_id":7095581,"display_name":"Mr. BoFrost"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1694610002,"creation_date":1694610002,"answer_id":77097305,"question_id":60694561,"body_markdown":"For me I had to use the Lombok Gradle plugin as stated in the [Lombok installation guide for Gradle][1]:\r\n\r\n    plugins {\r\n      id &#39;java&#39;\r\n      id &#39;io.freefair.lombok&#39; version &#39;8.3&#39;\r\n    }\r\n\r\n\r\n  [1]: https://projectlombok.org/setup/gradle","title":"Lombok getter setter cannot find symbol","body":"<p>For me I had to use the Lombok Gradle plugin as stated in the <a href=\"https://projectlombok.org/setup/gradle\" rel=\"nofollow noreferrer\">Lombok installation guide for Gradle</a>:</p>\n<pre><code>plugins {\n  id 'java'\n  id 'io.freefair.lombok' version '8.3'\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2824730,"reputation":77,"user_id":2427605,"display_name":"Ravi Thapa"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1699347156,"creation_date":1699347156,"answer_id":77436734,"question_id":60694561,"body_markdown":"If you did the correct configuration and IDE setting is correct(Enable annotation procession)\r\n[![][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/9a1u3.png\r\n\r\nand Other settings are correct then you can add following in to the pom.\r\n\r\n     &lt;dependency&gt;\r\n                &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\r\n                &lt;artifactId&gt;lombok&lt;/artifactId&gt;\r\n                &lt;version&gt;${lombok.version}&lt;/version&gt;\r\n                &lt;scope&gt;provided&lt;/scope&gt;\r\n            &lt;/dependency&gt;\r\n    \t\t\r\n    \t\t\r\n    \t\t\r\n    \t\t  &lt;plugins&gt;\r\n                    &lt;plugin&gt;\r\n                        &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n                        &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\r\n                        &lt;version&gt;3.8.1&lt;/version&gt;\r\n                        &lt;configuration&gt;\r\n                           ..........................\r\n                            &lt;annotationProcessorPaths&gt;\r\n                                &lt;path&gt;\r\n                                    &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\r\n                                    &lt;artifactId&gt;lombok&lt;/artifactId&gt;\r\n                                    &lt;version&gt;${lombok.version}&lt;/version&gt;\r\n                                &lt;/path&gt;\r\n                            &lt;/annotationProcessorPaths&gt;\r\n                        &lt;/configuration&gt;\r\n                    &lt;/plugin&gt;\r\n    \t\t\t\t\r\n    \t\t  &lt;/plugins&gt;","title":"Lombok getter setter cannot find symbol","body":"<p>If you did the correct configuration and IDE setting is correct(Enable annotation procession)\n<a href=\"https://i.stack.imgur.com/9a1u3.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/9a1u3.png\" alt=\"\" /></a></p>\n<p>and Other settings are correct then you can add following in to the pom.</p>\n<pre><code> &lt;dependency&gt;\n            &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\n            &lt;artifactId&gt;lombok&lt;/artifactId&gt;\n            &lt;version&gt;${lombok.version}&lt;/version&gt;\n            &lt;scope&gt;provided&lt;/scope&gt;\n        &lt;/dependency&gt;\n        \n        \n        \n          &lt;plugins&gt;\n                &lt;plugin&gt;\n                    &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n                    &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\n                    &lt;version&gt;3.8.1&lt;/version&gt;\n                    &lt;configuration&gt;\n                       ..........................\n                        &lt;annotationProcessorPaths&gt;\n                            &lt;path&gt;\n                                &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\n                                &lt;artifactId&gt;lombok&lt;/artifactId&gt;\n                                &lt;version&gt;${lombok.version}&lt;/version&gt;\n                            &lt;/path&gt;\n                        &lt;/annotationProcessorPaths&gt;\n                    &lt;/configuration&gt;\n                &lt;/plugin&gt;\n                \n          &lt;/plugins&gt;\n</code></pre>\n"}],"owner":{"account_id":7894840,"reputation":479,"user_id":5963886,"accept_rate":0,"display_name":"chiefpika"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":13075,"favorite_count":0,"down_vote_count":0,"up_vote_count":15,"answer_count":7,"score":15,"last_activity_date":1699347156,"creation_date":1584286640,"question_id":60694561,"body_markdown":"I&#39;m using Intellij and trying to apply lombok to the project.\r\nBut it keeps saying &quot;cannot find symbol&quot;.\r\nHere&#39;s a quick sample of my code.\r\n\r\n\r\nClass \r\n\r\n    import lombok.*;\r\n    \r\n    @Data\r\n    public class Product {\r\n    \r\n        private String name;\r\n        private Integer price;\r\n    \r\n        public Product(String name, Integer price){\r\n            this.name = name;\r\n            this.price = price;\r\n        }\r\n    }\r\n\r\nMain\r\n\r\n    import java.util.ArrayList;\r\n    import java.util.Collection;\r\n    import java.util.Iterator;\r\n    \r\n    public class CollectionMain {\r\n        public static void main(String[] args) {\r\n    \r\n            Collection&lt;Product&gt; products = new ArrayList&lt;&gt;();\r\n            Product door = new Product(&quot;DOOR&quot;,90);\r\n            Product bed = new Product(&quot;BED&quot;,60);\r\n            Product ipad = new Product(&quot;iPad&quot;,15);\r\n    \r\n            products.add(door);\r\n            products.add(bed);\r\n            products.add(ipad);\r\n    \r\n            final Iterator&lt;Product&gt; productIterator = products.iterator();\r\n    \r\n            while(productIterator.hasNext()){\r\n                Product product = productIterator.next();\r\n                System.out.println(product.getPrice());\r\n            }\r\n    \r\n        }\r\n    }\r\n\r\n\r\nand the error says\r\n\r\nCollectionMain.java:23: error: cannot find symbol\r\n            System.out.println(product.getPrice());\r\n                                      ^\r\n  symbol:   method getPrice()\r\n  location: variable product of type Product\r\n\r\nI have enabled the annotation processor\r\n[![enter image description here][1]][1]\r\n\r\n\r\nplugin \r\n\r\n[![enter image description here][2]][2]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/dR0ib.png\r\n  [2]: https://i.stack.imgur.com/KDi9f.png","title":"Lombok getter setter cannot find symbol","body":"<p>I'm using Intellij and trying to apply lombok to the project.\nBut it keeps saying \"cannot find symbol\".\nHere's a quick sample of my code.</p>\n\n<p>Class </p>\n\n<pre><code>import lombok.*;\n\n@Data\npublic class Product {\n\n    private String name;\n    private Integer price;\n\n    public Product(String name, Integer price){\n        this.name = name;\n        this.price = price;\n    }\n}\n</code></pre>\n\n<p>Main</p>\n\n<pre><code>import java.util.ArrayList;\nimport java.util.Collection;\nimport java.util.Iterator;\n\npublic class CollectionMain {\n    public static void main(String[] args) {\n\n        Collection&lt;Product&gt; products = new ArrayList&lt;&gt;();\n        Product door = new Product(\"DOOR\",90);\n        Product bed = new Product(\"BED\",60);\n        Product ipad = new Product(\"iPad\",15);\n\n        products.add(door);\n        products.add(bed);\n        products.add(ipad);\n\n        final Iterator&lt;Product&gt; productIterator = products.iterator();\n\n        while(productIterator.hasNext()){\n            Product product = productIterator.next();\n            System.out.println(product.getPrice());\n        }\n\n    }\n}\n</code></pre>\n\n<p>and the error says</p>\n\n<p>CollectionMain.java:23: error: cannot find symbol\n            System.out.println(product.getPrice());\n                                      ^\n  symbol:   method getPrice()\n  location: variable product of type Product</p>\n\n<p>I have enabled the annotation processor\n<a href=\"https://i.stack.imgur.com/dR0ib.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/dR0ib.png\" alt=\"enter image description here\"></a></p>\n\n<p>plugin </p>\n\n<p><a href=\"https://i.stack.imgur.com/KDi9f.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/KDi9f.png\" alt=\"enter image description here\"></a></p>\n"},{"tags":["java","csv","jackson","jackson-dataformat-csv"],"answers":[{"tags":[],"owner":{"account_id":29765714,"reputation":66,"user_id":22812102,"display_name":"Vinith_jk_bro"},"down_vote_count":2,"up_vote_count":0,"is_accepted":false,"score":-2,"last_activity_date":1699346848,"creation_date":1699346848,"answer_id":77436700,"question_id":77403297,"body_markdown":"Yes, you should be able to do this by defining a custom csvSchema for your CSV mapping","title":"Parsing CSV with Jackson to POJO with nested POJO fields","body":"<p>Yes, you should be able to do this by defining a custom csvSchema for your CSV mapping</p>\n"}],"owner":{"account_id":9051618,"reputation":3658,"user_id":6741482,"accept_rate":95,"display_name":"pstatix"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":46,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1699346848,"creation_date":1698848254,"question_id":77403297,"body_markdown":"**Not A Duplicate:** https://stackoverflow.com/questions/49452434/how-to-serialize-nested-collection-of-objects-with-jackson\r\n\r\nMy question was immediately closed after somebody left a comment within 49 seconds, so please don&#39;t continuously bot-close questions that are not duplicates. The above is for serialization, not deserialization, which to my knowledge Jackson handles differently.\r\n\r\n**Content**:\r\n\r\nI have POJO(s) with the following definition(s):\r\n\r\n    public class SomePojo {\r\n      public String name;\r\n      public int type;\r\n      public OtherPojo ref;\r\n    }\r\n    \r\n    \r\n    public class OtherPojo {\r\n      public int x, y, z;\r\n    }\r\n\r\nAnd a CSV containing data in the form:\r\n\r\n    name,type, x, y, z\r\n    foo,1,0.3,1.1,-0.5\r\n    bar,5,7.3,-0.1,1.5\r\n\r\nTypically with Jackson I&#39;ve only mapped a 1:1 (meaning each field went to a single column), but is it possible to tell the `CsvSchema` or the `CsvMapper` to treat a range of fields as a nested POJO for the type being read?","title":"Parsing CSV with Jackson to POJO with nested POJO fields","body":"<p><strong>Not A Duplicate:</strong> <a href=\"https://stackoverflow.com/questions/49452434/how-to-serialize-nested-collection-of-objects-with-jackson\">How to serialize nested collection of objects with Jackson</a></p>\n<p>My question was immediately closed after somebody left a comment within 49 seconds, so please don't continuously bot-close questions that are not duplicates. The above is for serialization, not deserialization, which to my knowledge Jackson handles differently.</p>\n<p><strong>Content</strong>:</p>\n<p>I have POJO(s) with the following definition(s):</p>\n<pre><code>public class SomePojo {\n  public String name;\n  public int type;\n  public OtherPojo ref;\n}\n\n\npublic class OtherPojo {\n  public int x, y, z;\n}\n</code></pre>\n<p>And a CSV containing data in the form:</p>\n<pre><code>name,type, x, y, z\nfoo,1,0.3,1.1,-0.5\nbar,5,7.3,-0.1,1.5\n</code></pre>\n<p>Typically with Jackson I've only mapped a 1:1 (meaning each field went to a single column), but is it possible to tell the <code>CsvSchema</code> or the <code>CsvMapper</code> to treat a range of fields as a nested POJO for the type being read?</p>\n"},{"tags":["java","gradle","build","artifactory","gradlew"],"comments":[{"owner":{"account_id":238478,"reputation":902,"user_id":1336408,"display_name":"jorisw"},"score":10,"creation_date":1563274876,"post_id":44976794,"comment_id":100637241,"body_markdown":"To others having this problem: The `DefaultFileLockManager` related messages are not indicative of whatever the problem is. They are part of a normal repeated health check.","body":"To others having this problem: The <code>DefaultFileLockManager</code> related messages are not indicative of whatever the problem is. They are part of a normal repeated health check."}],"answers":[{"tags":[],"owner":{"account_id":10170813,"reputation":21,"user_id":7511171,"display_name":"nico"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1499757681,"creation_date":1499757681,"answer_id":45027923,"question_id":44976794,"body_markdown":"I had the same issue.\r\nIn my case setting proxy in **~/gradle/gradle.properties** helped:\r\n\r\n    systemProp.http.proxyHost=hostname\r\n    systemProp.http.proxyPort=8080\r\n    systemProp.http.proxyUser=user\r\n    systemProp.http.proxyPassword=password\r\n\r\n","title":"Gradle build is hanging without failure, DefaultFileLockManager acquiring and releasing lock on daemon addresses registry","body":"<p>I had the same issue.\nIn my case setting proxy in <strong>~/gradle/gradle.properties</strong> helped:</p>\n\n<pre><code>systemProp.http.proxyHost=hostname\nsystemProp.http.proxyPort=8080\nsystemProp.http.proxyUser=user\nsystemProp.http.proxyPassword=password\n</code></pre>\n"},{"tags":[],"owner":{"account_id":10932052,"reputation":12327,"user_id":8034839,"display_name":"shizhen"},"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1530502676,"creation_date":1530502676,"answer_id":51128852,"question_id":44976794,"body_markdown":"In order for gradle work properly, you need to configure at least 3 kind of proxies on Linux/macOS which are \r\n\r\n - gradle proxies - inside gradle.properties\r\n - maven proxies - inside ~/.m2/settings.xml\r\n - bash proxies - inside ~/.bashrc or ~/.bash_profile\r\n\r\nApart from these proxy settings, you also need to double check your proxy settings of your OS, e.g. on mac, check &quot;System Preferences&quot; -&gt; &quot;Network&quot; -&gt; &quot;Advanced...&quot; -&gt; &quot;Proxies&quot;. You may need try to turn on/off this system proxies. \r\n\r\nHowever, sometimes, like your case, it may not because of connectivity problems, but due to permission issues. If you ever ran your gradle commands using &quot;sudo&quot; then some of the directories generated during executing the gradle commands may become owned by &quot;root&quot;. Hence, when you try to run gralde commands using normal user, these directories are not accessible. The bad thing is that gradle does not give you any information or even hints to &quot;permission&quot;. \r\n\r\nThe solution to this is as below.\r\n\r\n - To find all the files and directories that are owned by root or belong to root group:\r\n\r\n    $ls -alR | grep -w root &gt; list.txt\r\n\r\nThe result of this command will be output to file list.txt, open it to check all the files and directories. For example you may see the output something as below:\r\n\r\n    drwxrwxr-x+ 86 root  admin   2.9K Jun 29 20:30 Applications/\r\n    drwxr-xr-x+ 65 root  wheel   2.2K May 19 00:19 ***/.gradle\r\n    drwxr-xr-x@  2 root  wheel    68B Nov 20  2016 ***/build\r\n    drwxr-xr-x@  4 root  wheel   136B Jun 29 20:31 .gradle\r\n    drwxr-xr-x    3 employee  staff   102B Nov 10  2015 Samsung/\r\n    drwxr-xr-x    7 employee  staff   238B Jul  6  2016 VirtualBox VMs/\r\n    drwxr-xr-x    3 employee  staff   102B Nov  4  2016 android-ndk/\r\n    drwxr-xr-x    3 employee  staff   102B Aug 31  2016 bin/\r\n\r\n - To find the exact location of those files or directories\r\n\r\n    $find &quot;$PWD&quot; | grep your-file-name\r\n\r\n - Delete those files or directories.\r\n\r\n    $ sudo rm -rf your-file-name\r\n\r\nUsually, you need change your directory to below locations to perform above actions to delete all the files with root user.\r\n\r\n - ~/.gradle  The .gradle cache under your users Home directory\r\n - &lt;project-root&gt;/.gradle  The .gradle cache under your project root\r\n   directory \r\n - [project-root]/[module]/build  The .gradle cache under\r\n   your gradle module directory. \r\n - ~/.m2  The Maven cache directory under\r\n   your users Home directory \r\n\r\nThen start over a gradle sync, the problem should be resolved.\r\n\r\n\r\n--------------------------------------------------------------\r\n\r\nYou can find more detailed descriptions from below blogs:\r\n\r\n 1. [gradle-sync-issue-on-debian-os-due-to-user-does-not-have-permission][1]\r\n 2. [android-gradle-plugin-3-0-sync-issue][2]\r\n 3. [gradle-proxy-configuration][3]\r\n\r\n  [1]: https://arophix.com/2018/07/01/gradle-sync-issue-on-debian-os-due-to-user-does-not-have-permission/\r\n  [2]: https://arophix.com/2018/07/01/android-gradle-plugin-3-0-sync-issue/\r\n  [3]: https://arophix.com/2018/04/17/gradle-proxy-configuration/","title":"Gradle build is hanging without failure, DefaultFileLockManager acquiring and releasing lock on daemon addresses registry","body":"<p>In order for gradle work properly, you need to configure at least 3 kind of proxies on Linux/macOS which are </p>\n\n<ul>\n<li>gradle proxies - inside gradle.properties</li>\n<li>maven proxies - inside ~/.m2/settings.xml</li>\n<li>bash proxies - inside ~/.bashrc or ~/.bash_profile</li>\n</ul>\n\n<p>Apart from these proxy settings, you also need to double check your proxy settings of your OS, e.g. on mac, check \"System Preferences\" -> \"Network\" -> \"Advanced...\" -> \"Proxies\". You may need try to turn on/off this system proxies. </p>\n\n<p>However, sometimes, like your case, it may not because of connectivity problems, but due to permission issues. If you ever ran your gradle commands using \"sudo\" then some of the directories generated during executing the gradle commands may become owned by \"root\". Hence, when you try to run gralde commands using normal user, these directories are not accessible. The bad thing is that gradle does not give you any information or even hints to \"permission\". </p>\n\n<p>The solution to this is as below.</p>\n\n<ul>\n<li><p>To find all the files and directories that are owned by root or belong to root group:</p>\n\n<p>$ls -alR | grep -w root > list.txt</p></li>\n</ul>\n\n<p>The result of this command will be output to file list.txt, open it to check all the files and directories. For example you may see the output something as below:</p>\n\n<pre><code>drwxrwxr-x+ 86 root  admin   2.9K Jun 29 20:30 Applications/\ndrwxr-xr-x+ 65 root  wheel   2.2K May 19 00:19 ***/.gradle\ndrwxr-xr-x@  2 root  wheel    68B Nov 20  2016 ***/build\ndrwxr-xr-x@  4 root  wheel   136B Jun 29 20:31 .gradle\ndrwxr-xr-x    3 employee  staff   102B Nov 10  2015 Samsung/\ndrwxr-xr-x    7 employee  staff   238B Jul  6  2016 VirtualBox VMs/\ndrwxr-xr-x    3 employee  staff   102B Nov  4  2016 android-ndk/\ndrwxr-xr-x    3 employee  staff   102B Aug 31  2016 bin/\n</code></pre>\n\n<ul>\n<li><p>To find the exact location of those files or directories</p>\n\n<p>$find \"$PWD\" | grep your-file-name</p></li>\n<li><p>Delete those files or directories.</p>\n\n<p>$ sudo rm -rf your-file-name</p></li>\n</ul>\n\n<p>Usually, you need change your directory to below locations to perform above actions to delete all the files with root user.</p>\n\n<ul>\n<li>~/.gradle  The .gradle cache under your users Home directory</li>\n<li>/.gradle  The .gradle cache under your project root\ndirectory </li>\n<li>[project-root]/[module]/build  The .gradle cache under\nyour gradle module directory. </li>\n<li>~/.m2  The Maven cache directory under\nyour users Home directory </li>\n</ul>\n\n<p>Then start over a gradle sync, the problem should be resolved.</p>\n\n<hr>\n\n<p>You can find more detailed descriptions from below blogs:</p>\n\n<ol>\n<li><a href=\"https://arophix.com/2018/07/01/gradle-sync-issue-on-debian-os-due-to-user-does-not-have-permission/\" rel=\"nofollow noreferrer\">gradle-sync-issue-on-debian-os-due-to-user-does-not-have-permission</a></li>\n<li><a href=\"https://arophix.com/2018/07/01/android-gradle-plugin-3-0-sync-issue/\" rel=\"nofollow noreferrer\">android-gradle-plugin-3-0-sync-issue</a></li>\n<li><a href=\"https://arophix.com/2018/04/17/gradle-proxy-configuration/\" rel=\"nofollow noreferrer\">gradle-proxy-configuration</a></li>\n</ol>\n"},{"tags":[],"owner":{"account_id":3093195,"reputation":519,"user_id":2618930,"display_name":"Cecilya"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1640169293,"creation_date":1640169293,"answer_id":70447665,"question_id":44976794,"body_markdown":"I am not sure what exactly caused this issue in my case, but the problem was a version of the Gradle wrapper that was too low. The version causing this issue was `4.0`, it was fixed by using `4.9`. \r\n\r\nYou can change the version of the wrapper by first setting it in your `build.gradle` file:\r\n\r\n```\r\nwrapper {\r\n    gradleVersion &#39;4.9&#39;\r\n}\r\n```\r\n\r\nTo install the correct wrapper jar in your project, go to your project root directory and run\r\n\r\n```\r\ngradle wrapper\r\n```\r\n\r\nThis will download the appropriate jar file into your `gradle/wrapper` folder and update the `gradle-wrapper.properties`. Then you can run `./gradlew build` as usual.","title":"Gradle build is hanging without failure, DefaultFileLockManager acquiring and releasing lock on daemon addresses registry","body":"<p>I am not sure what exactly caused this issue in my case, but the problem was a version of the Gradle wrapper that was too low. The version causing this issue was <code>4.0</code>, it was fixed by using <code>4.9</code>.</p>\n<p>You can change the version of the wrapper by first setting it in your <code>build.gradle</code> file:</p>\n<pre><code>wrapper {\n    gradleVersion '4.9'\n}\n</code></pre>\n<p>To install the correct wrapper jar in your project, go to your project root directory and run</p>\n<pre><code>gradle wrapper\n</code></pre>\n<p>This will download the appropriate jar file into your <code>gradle/wrapper</code> folder and update the <code>gradle-wrapper.properties</code>. Then you can run <code>./gradlew build</code> as usual.</p>\n"}],"owner":{"account_id":8813828,"reputation":365,"user_id":6585993,"display_name":"Arthur"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":21409,"favorite_count":0,"down_vote_count":0,"up_vote_count":21,"accepted_answer_id":51128852,"answer_count":3,"score":21,"last_activity_date":1699346600,"creation_date":1499449374,"question_id":44976794,"body_markdown":"I have several gradle-based projects and on all of them recently I&#39;ve become unable to execute a ./gradlew clean build. Upon running this, the  When I run with the --debug flag, I get stuck on `&gt; Building 7% &gt; :compileJava &gt; Resolving dependencies &#39;:compileClasspath&#39;` and it never moves forward. \r\n\r\nWhen I ran with the `--debug` flag, I got this output regarding the `DefaultFileLockManager` acquiring and releasing a daemon lock, but this has been unhelpful. Here is the last bit of the Gradle debug log that I see.\r\n\r\n\r\n    11:22:57.079 [DEBUG] [org.apache.http.impl.conn.PoolingHttpClientConnectionManager] Connection request: [route: {s}-&gt;https://maven.vaadin.com:443][total kept alive: 0; route allocated: 1 of 2; total allocated: 1 of 20]\r\n    11:22:57.080 [DEBUG] [org.apache.http.impl.conn.PoolingHttpClientConnectionManager] Connection leased: [id: 203][route: {s}-&gt;https://maven.vaadin.com:443][total kept alive: 0; route allocated: 2 of 2; total allocated: 2 of 20]\r\n    11:22:57.080 [DEBUG] [org.apache.http.impl.execchain.MainClientExec] Opening connection {s}-&gt;https://maven.vaadin.com:443\r\n    11:22:57.080 [DEBUG] [org.apache.http.impl.conn.DefaultHttpClientConnectionOperator] Connecting to maven.vaadin.com/54.86.23.48:443\r\n    11:22:57.080 [DEBUG] [org.apache.http.conn.ssl.SSLConnectionSocketFactory] Connecting socket to maven.vaadin.com/54.86.23.48:443 with timeout 0\r\n    11:22:57.098 [DEBUG] [org.apache.http.conn.ssl.SSLConnectionSocketFactory] Enabled protocols: [TLSv1, TLSv1.1, TLSv1.2]\r\n    11:22:57.098 [DEBUG] [org.apache.http.conn.ssl.SSLConnectionSocketFactory] Enabled cipher suites:[TLS_ECDHE_ECDSA_WITH_AES_128_CBC_SHA256, TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256, TLS_RSA_WITH_AES_128_CBC_SHA256, TLS_ECDH_ECDSA_WITH_AES_128_CBC_SHA256, TLS_ECDH_RSA_WITH_AES_128_CBC_SHA256, TLS_DHE_RSA_WITH_AES_128_CBC_SHA256, TLS_DHE_DSS_WITH_AES_128_CBC_SHA256, TLS_ECDHE_ECDSA_WITH_AES_128_CBC_SHA, TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA, TLS_RSA_WITH_AES_128_CBC_SHA, TLS_ECDH_ECDSA_WITH_AES_128_CBC_SHA, TLS_ECDH_RSA_WITH_AES_128_CBC_SHA, TLS_DHE_RSA_WITH_AES_128_CBC_SHA, TLS_DHE_DSS_WITH_AES_128_CBC_SHA, TLS_ECDHE_ECDSA_WITH_AES_128_GCM_SHA256, TLS_ECDHE_RSA_WITH_AES_128_GCM_SHA256, TLS_RSA_WITH_AES_128_GCM_SHA256, TLS_ECDH_ECDSA_WITH_AES_128_GCM_SHA256, TLS_ECDH_RSA_WITH_AES_128_GCM_SHA256, TLS_DHE_RSA_WITH_AES_128_GCM_SHA256, TLS_DHE_DSS_WITH_AES_128_GCM_SHA256, TLS_ECDHE_ECDSA_WITH_3DES_EDE_CBC_SHA, TLS_ECDHE_RSA_WITH_3DES_EDE_CBC_SHA, SSL_RSA_WITH_3DES_EDE_CBC_SHA, TLS_ECDH_ECDSA_WITH_3DES_EDE_CBC_SHA, TLS_ECDH_RSA_WITH_3DES_EDE_CBC_SHA, SSL_DHE_RSA_WITH_3DES_EDE_CBC_SHA, SSL_DHE_DSS_WITH_3DES_EDE_CBC_SHA, TLS_EMPTY_RENEGOTIATION_INFO_SCSV]\r\n    11:22:57.098 [DEBUG] [org.apache.http.conn.ssl.SSLConnectionSocketFactory] Starting handshake\r\n    11:22:57.141 [DEBUG] [org.apache.http.conn.ssl.SSLConnectionSocketFactory] Secure session established\r\n    11:22:57.141 [DEBUG] [org.apache.http.conn.ssl.SSLConnectionSocketFactory]  negotiated protocol: TLSv1.2\r\n    11:22:57.142 [DEBUG] [org.apache.http.conn.ssl.SSLConnectionSocketFactory]  negotiated cipher suite: TLS_ECDHE_RSA_WITH_AES_128_GCM_SHA256\r\n    11:22:57.142 [DEBUG] [org.apache.http.conn.ssl.SSLConnectionSocketFactory]  peer principal: CN=*.vaadin.com, O=Vaadin Ltd, L=Turku, ST=Western Finland, C=FI\r\n    11:22:57.142 [DEBUG] [org.apache.http.conn.ssl.SSLConnectionSocketFactory]  peer alternative names: [*.vaadin.com, vaadin.com]\r\n    11:22:57.142 [DEBUG] [org.apache.http.conn.ssl.SSLConnectionSocketFactory]  issuer principal: CN=DigiCert SHA2 Secure Server CA, O=DigiCert Inc, C=US\r\n    11:22:57.142 [DEBUG] [org.apache.http.impl.conn.DefaultHttpClientConnectionOperator] Connection established 10.10.2.46:54773&lt;-&gt;54.86.23.48:443\r\n    11:22:57.142 [DEBUG] [org.apache.http.impl.execchain.MainClientExec] Executing request HEAD /vaadin-addons/info/magnolia/magnolia-module-content-dependencies/1.6.1/magnolia-module-content-dependencies-1.6.1.pom HTTP/1.1\r\n    11:22:57.142 [DEBUG] [org.apache.http.impl.execchain.MainClientExec] Target auth state: UNCHALLENGED\r\n    11:22:57.142 [DEBUG] [org.apache.http.impl.execchain.MainClientExec] Proxy auth state: UNCHALLENGED\r\n    11:22:57.163 [DEBUG] [org.apache.http.impl.conn.DefaultManagedHttpClientConnection] http-outgoing-203: Close connection\r\n    11:22:57.166 [DEBUG] [org.apache.http.impl.execchain.MainClientExec] Connection discarded\r\n    11:22:57.166 [DEBUG] [org.apache.http.impl.conn.DefaultManagedHttpClientConnection] http-outgoing-203: Close connection\r\n    11:22:57.166 [DEBUG] [org.apache.http.impl.conn.PoolingHttpClientConnectionManager] Connection released: [id: 203][route: {s}-&gt;https://maven.vaadin.com:443][total kept alive: 0; route allocated: 1 of 2; total allocated: 1 of 20]\r\n    11:22:57.166 [INFO] [org.gradle.internal.resource.transport.http.HttpClientHelper] Resource missing. [HTTP HEAD: https://maven.vaadin.com/vaadin-addons/info/magnolia/magnolia-module-content-dependencies/1.6.1/magnolia-module-content-dependencies-1.6.1.pom]\r\n    11:22:57.167 [DEBUG] [org.gradle.api.internal.artifacts.repositories.resolver.DefaultExternalResourceArtifactResolver] Loading https://maven.vaadin.com/vaadin-addons/info/magnolia/magnolia-module-content-dependencies/1.6.1/magnolia-module-content-dependencies-1.6.1.jar\r\n    11:22:57.167 [DEBUG] [org.gradle.internal.resource.transport.http.HttpResourceAccessor] Constructing external resource metadata: https://maven.vaadin.com/vaadin-addons/info/magnolia/magnolia-module-content-dependencies/1.6.1/magnolia-module-content-dependencies-1.6.1.jar\r\n    11:22:57.167 [DEBUG] [org.gradle.internal.resource.transport.http.HttpClientHelper] Performing HTTP HEAD: https://maven.vaadin.com/vaadin-addons/info/magnolia/magnolia-module-content-dependencies/1.6.1/magnolia-module-content-dependencies-1.6.1.jar\r\n    11:22:57.167 [DEBUG] [org.apache.http.client.protocol.RequestAddCookies] CookieSpec selected: default\r\n    11:22:57.167 [DEBUG] [org.apache.http.client.protocol.RequestAuthCache] Auth cache not set in the context\r\n    11:22:57.167 [DEBUG] [org.apache.http.impl.conn.PoolingHttpClientConnectionManager] Connection request: [route: {s}-&gt;https://maven.vaadin.com:443][total kept alive: 0; route allocated: 1 of 2; total allocated: 1 of 20]\r\n    11:22:57.167 [DEBUG] [org.apache.http.impl.conn.PoolingHttpClientConnectionManager] Connection leased: [id: 204][route: {s}-&gt;https://maven.vaadin.com:443][total kept alive: 0; route allocated: 2 of 2; total allocated: 2 of 20]\r\n    11:22:57.167 [DEBUG] [org.apache.http.impl.execchain.MainClientExec] Opening connection {s}-&gt;https://maven.vaadin.com:443\r\n    11:22:57.167 [DEBUG] [org.apache.http.impl.conn.DefaultHttpClientConnectionOperator] Connecting to maven.vaadin.com/54.86.23.48:443\r\n    11:22:57.167 [DEBUG] [org.apache.http.conn.ssl.SSLConnectionSocketFactory] Connecting socket to maven.vaadin.com/54.86.23.48:443 with timeout 0\r\n    11:22:57.186 [DEBUG] [org.apache.http.conn.ssl.SSLConnectionSocketFactory] Enabled protocols: [TLSv1, TLSv1.1, TLSv1.2]\r\n    11:22:57.186 [DEBUG] [org.apache.http.conn.ssl.SSLConnectionSocketFactory] Enabled cipher suites:[TLS_ECDHE_ECDSA_WITH_AES_128_CBC_SHA256, TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256, TLS_RSA_WITH_AES_128_CBC_SHA256, TLS_ECDH_ECDSA_WITH_AES_128_CBC_SHA256, TLS_ECDH_RSA_WITH_AES_128_CBC_SHA256, TLS_DHE_RSA_WITH_AES_128_CBC_SHA256, TLS_DHE_DSS_WITH_AES_128_CBC_SHA256, TLS_ECDHE_ECDSA_WITH_AES_128_CBC_SHA, TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA, TLS_RSA_WITH_AES_128_CBC_SHA, TLS_ECDH_ECDSA_WITH_AES_128_CBC_SHA, TLS_ECDH_RSA_WITH_AES_128_CBC_SHA, TLS_DHE_RSA_WITH_AES_128_CBC_SHA, TLS_DHE_DSS_WITH_AES_128_CBC_SHA, TLS_ECDHE_ECDSA_WITH_AES_128_GCM_SHA256, TLS_ECDHE_RSA_WITH_AES_128_GCM_SHA256, TLS_RSA_WITH_AES_128_GCM_SHA256, TLS_ECDH_ECDSA_WITH_AES_128_GCM_SHA256, TLS_ECDH_RSA_WITH_AES_128_GCM_SHA256, TLS_DHE_RSA_WITH_AES_128_GCM_SHA256, TLS_DHE_DSS_WITH_AES_128_GCM_SHA256, TLS_ECDHE_ECDSA_WITH_3DES_EDE_CBC_SHA, TLS_ECDHE_RSA_WITH_3DES_EDE_CBC_SHA, SSL_RSA_WITH_3DES_EDE_CBC_SHA, TLS_ECDH_ECDSA_WITH_3DES_EDE_CBC_SHA, TLS_ECDH_RSA_WITH_3DES_EDE_CBC_SHA, SSL_DHE_RSA_WITH_3DES_EDE_CBC_SHA, SSL_DHE_DSS_WITH_3DES_EDE_CBC_SHA, TLS_EMPTY_RENEGOTIATION_INFO_SCSV]\r\n    11:22:57.186 [DEBUG] [org.apache.http.conn.ssl.SSLConnectionSocketFactory] Starting handshake\r\n    11:22:57.207 [DEBUG] [org.apache.http.conn.ssl.SSLConnectionSocketFactory] Secure session established\r\n    11:22:57.207 [DEBUG] [org.apache.http.conn.ssl.SSLConnectionSocketFactory]  negotiated protocol: TLSv1.2\r\n    11:22:57.207 [DEBUG] [org.apache.http.conn.ssl.SSLConnectionSocketFactory]  negotiated cipher suite: TLS_ECDHE_RSA_WITH_AES_128_GCM_SHA256\r\n    11:22:57.207 [DEBUG] [org.apache.http.conn.ssl.SSLConnectionSocketFactory]  peer principal: CN=*.vaadin.com, O=Vaadin Ltd, L=Turku, ST=Western Finland, C=FI\r\n    11:22:57.207 [DEBUG] [org.apache.http.conn.ssl.SSLConnectionSocketFactory]  peer alternative names: [*.vaadin.com, vaadin.com]\r\n    11:22:57.207 [DEBUG] [org.apache.http.conn.ssl.SSLConnectionSocketFactory]  issuer principal: CN=DigiCert SHA2 Secure Server CA, O=DigiCert Inc, C=US\r\n    11:22:57.207 [DEBUG] [org.apache.http.impl.conn.DefaultHttpClientConnectionOperator] Connection established 10.10.2.46:54774&lt;-&gt;54.86.23.48:443\r\n    11:22:57.207 [DEBUG] [org.apache.http.impl.execchain.MainClientExec] Executing request HEAD /vaadin-addons/info/magnolia/magnolia-module-content-dependencies/1.6.1/magnolia-module-content-dependencies-1.6.1.jar HTTP/1.1\r\n    11:22:57.207 [DEBUG] [org.apache.http.impl.execchain.MainClientExec] Target auth state: UNCHALLENGED\r\n    11:22:57.207 [DEBUG] [org.apache.http.impl.execchain.MainClientExec] Proxy auth state: UNCHALLENGED\r\n    11:22:57.230 [DEBUG] [org.apache.http.impl.conn.DefaultManagedHttpClientConnection] http-outgoing-204: Close connection\r\n    11:22:57.234 [DEBUG] [org.apache.http.impl.execchain.MainClientExec] Connection discarded\r\n    11:22:57.234 [DEBUG] [org.apache.http.impl.conn.DefaultManagedHttpClientConnection] http-outgoing-204: Close connection\r\n    11:22:57.234 [DEBUG] [org.apache.http.impl.conn.PoolingHttpClientConnectionManager] Connection released: [id: 204][route: {s}-&gt;https://maven.vaadin.com:443][total kept alive: 0; route allocated: 1 of 2; total allocated: 1 of 20]\r\n    11:22:57.234 [INFO] [org.gradle.internal.resource.transport.http.HttpClientHelper] Resource missing. [HTTP HEAD: https://maven.vaadin.com/vaadin-addons/info/magnolia/magnolia-module-content-dependencies/1.6.1/magnolia-module-content-dependencies-1.6.1.jar]\r\n    11:22:57.234 [DEBUG] [org.gradle.api.internal.artifacts.repositories.resolver.ExternalResourceResolver] No meta-data file or artifact found for module &#39;info.magnolia:magnolia-module-content-dependencies:1.6.1&#39; in repository &#39;vaadin-addons&#39;.\r\n    11:22:57.234 [DEBUG] [org.gradle.api.internal.artifacts.ivyservice.modulecache.DefaultModuleMetaDataCache] Recording absence of module descriptor in cache: info.magnolia:magnolia-module-content-dependencies:1.6.1 [changing = false]\r\n    11:22:57.235 [DEBUG] [org.gradle.api.internal.artifacts.repositories.resolver.DefaultExternalResourceArtifactResolver] Loading https://nexus.magnolia-cms.com/content/groups/enterprise/info/magnolia/magnolia-module-content-dependencies/1.6.1/magnolia-module-content-dependencies-1.6.1.pom\r\n    11:22:57.235 [DEBUG] [org.gradle.internal.resource.transfer.DefaultCacheAwareExternalResourceAccessor] Constructing external resource: https://nexus.magnolia-cms.com/content/groups/enterprise/info/magnolia/magnolia-module-content-dependencies/1.6.1/magnolia-module-content-dependencies-1.6.1.pom\r\n    11:22:57.235 [DEBUG] [org.gradle.internal.resource.transport.http.HttpResourceAccessor] Constructing external resource metadata: https://nexus.magnolia-cms.com/content/groups/enterprise/info/magnolia/magnolia-module-content-dependencies/1.6.1/magnolia-module-content-dependencies-1.6.1.pom\r\n    11:22:57.235 [DEBUG] [org.gradle.internal.resource.transport.http.HttpClientHelper] Performing HTTP HEAD: https://nexus.magnolia-cms.com/content/groups/enterprise/info/magnolia/magnolia-module-content-dependencies/1.6.1/magnolia-module-content-dependencies-1.6.1.pom\r\n    11:22:57.236 [DEBUG] [org.apache.http.client.protocol.RequestAddCookies] CookieSpec selected: default\r\n    11:22:57.236 [DEBUG] [org.apache.http.client.protocol.RequestAuthCache] Auth cache not set in the context\r\n    11:22:57.236 [DEBUG] [org.apache.http.impl.conn.PoolingHttpClientConnectionManager] Connection request: [route: {s}-&gt;https://nexus.magnolia-cms.com:443][total kept alive: 0; route allocated: 2 of 2; total allocated: 2 of 20]\r\n    11:23:06.177 [DEBUG] [org.gradle.launcher.daemon.server.Daemon] DaemonExpirationPeriodicCheck running\r\n    11:23:06.177 [DEBUG] [org.gradle.cache.internal.DefaultFileLockManager] Waiting to acquire shared lock on daemon addresses registry.\r\n    11:23:06.177 [DEBUG] [org.gradle.cache.internal.DefaultFileLockManager] Lock acquired.\r\n    11:23:06.178 [DEBUG] [org.gradle.cache.internal.DefaultFileLockManager] Releasing lock on daemon addresses registry.\r\n    11:23:06.178 [DEBUG] [org.gradle.cache.internal.DefaultFileLockManager] Waiting to acquire shared lock on daemon addresses registry.\r\n    11:23:06.178 [DEBUG] [org.gradle.cache.internal.DefaultFileLockManager] Lock acquired.\r\n    11:23:06.178 [DEBUG] [org.gradle.cache.internal.DefaultFileLockManager] Releasing lock on daemon addresses registry.\r\n    11:23:16.177 [DEBUG] [org.gradle.launcher.daemon.server.Daemon] DaemonExpirationPeriodicCheck running\r\n    11:23:16.177 [DEBUG] [org.gradle.cache.internal.DefaultFileLockManager] Waiting to acquire shared lock on daemon addresses registry.\r\n    11:23:16.177 [DEBUG] [org.gradle.cache.internal.DefaultFileLockManager] Lock acquired.\r\n    11:23:16.177 [DEBUG] [org.gradle.cache.internal.DefaultFileLockManager] Releasing lock on daemon addresses registry.\r\n    11:23:16.178 [DEBUG] [org.gradle.cache.internal.DefaultFileLockManager] Waiting to acquire shared lock on daemon addresses registry.\r\n    11:23:16.178 [DEBUG] [org.gradle.cache.internal.DefaultFileLockManager] Lock acquired.\r\n    11:23:16.178 [DEBUG] [org.gradle.cache.internal.DefaultFileLockManager] Releasing lock on daemon addresses registry.\r\n    11:23:26.179 [DEBUG] [org.gradle.launcher.daemon.server.Daemon] DaemonExpirationPeriodicCheck running\r\n    11:23:26.179 [DEBUG] [org.gradle.cache.internal.DefaultFileLockManager] Waiting to acquire shared lock on daemon addresses registry.\r\n    11:23:26.179 [DEBUG] [org.gradle.cache.internal.DefaultFileLockManager] Lock acquired.\r\n    11:23:26.179 [DEBUG] [org.gradle.cache.internal.DefaultFileLockManager] Releasing lock on daemon addresses registry.\r\n    11:23:26.179 [DEBUG] [org.gradle.cache.internal.DefaultFileLockManager] Waiting to acquire shared lock on daemon addresses registry.\r\n    11:23:26.179 [DEBUG] [org.gradle.cache.internal.DefaultFileLockManager] Lock acquired.\r\n    11:23:26.180 [DEBUG] [org.gradle.cache.internal.DefaultFileLockManager] Releasing lock on daemon addresses registry.\r\n    11:23:36.180 [DEBUG] [org.gradle.launcher.daemon.server.Daemon] DaemonExpirationPeriodicCheck running\r\n    11:23:36.180 [DEBUG] [org.gradle.cache.internal.DefaultFileLockManager] Waiting to acquire shared lock on daemon addresses registry.\r\n    11:23:36.180 [DEBUG] [org.gradle.cache.internal.DefaultFileLockManager] Lock acquired.\r\n    11:23:36.180 [DEBUG] [org.gradle.cache.internal.DefaultFileLockManager] Releasing lock on daemon addresses registry.\r\n    11:23:36.180 [DEBUG] [org.gradle.cache.internal.DefaultFileLockManager] Waiting to acquire shared lock on daemon addresses registry.\r\n    11:23:36.181 [DEBUG] [org.gradle.cache.internal.DefaultFileLockManager] Lock acquired.\r\n    11:23:36.181 [DEBUG] [org.gradle.cache.internal.DefaultFileLockManager] Releasing lock on daemon addresses registry.\r\n    11:23:46.176 [DEBUG] [org.gradle.launcher.daemon.server.Daemon] DaemonExpirationPeriodicCheck running\r\n    11:23:46.176 [DEBUG] [org.gradle.cache.internal.DefaultFileLockManager] Waiting to acquire shared lock on daemon addresses registry.\r\n    11:23:46.176 [DEBUG] [org.gradle.cache.internal.DefaultFileLockManager] Lock acquired.\r\n    11:23:46.176 [DEBUG] [org.gradle.cache.internal.DefaultFileLockManager] Releasing lock on daemon addresses registry.\r\n    11:23:46.177 [DEBUG] [org.gradle.cache.internal.DefaultFileLockManager] Waiting to acquire shared lock on daemon addresses registry.\r\n    11:23:46.177 [DEBUG] [org.gradle.cache.internal.DefaultFileLockManager] Lock acquired.\r\n    11:23:46.177 [DEBUG] [org.gradle.cache.internal.DefaultFileLockManager] Releasing lock on daemon addresses registry.\r\n    11:23:56.179 [DEBUG] [org.gradle.launcher.daemon.server.Daemon] DaemonExpirationPeriodicCheck running\r\n    11:23:56.180 [DEBUG] [org.gradle.cache.internal.DefaultFileLockManager] Waiting to acquire shared lock on daemon addresses registry.\r\n    11:23:56.180 [DEBUG] [org.gradle.cache.internal.DefaultFileLockManager] Lock acquired.\r\n    11:23:56.180 [DEBUG] [org.gradle.cache.internal.DefaultFileLockManager] Releasing lock on daemon addresses registry.\r\n    11:23:56.181 [DEBUG] [org.gradle.cache.internal.DefaultFileLockManager] Waiting to acquire shared lock on daemon addresses registry.\r\n    11:23:56.181 [DEBUG] [org.gradle.cache.internal.DefaultFileLockManager] Lock acquired.\r\n    11:23:56.181 [DEBUG] [org.gradle.cache.internal.DefaultFileLockManager] Releasing lock on daemon addresses registry.\r\n    11:24:06.177 [DEBUG] [org.gradle.launcher.daemon.server.Daemon] DaemonExpirationPeriodicCheck running\r\n    11:24:06.178 [DEBUG] [org.gradle.cache.internal.DefaultFileLockManager] Waiting to acquire shared lock on daemon addresses registry.\r\n    11:24:06.178 [DEBUG] [org.gradle.cache.internal.DefaultFileLockManager] Lock acquired.\r\n    11:24:06.178 [DEBUG] [org.gradle.cache.internal.DefaultFileLockManager] Releasing lock on daemon addresses registry.\r\n    11:24:06.178 [DEBUG] [org.gradle.cache.internal.DefaultFileLockManager] Waiting to acquire shared lock on daemon addresses registry.\r\n    11:24:06.179 [DEBUG] [org.gradle.cache.internal.DefaultFileLockManager] Lock acquired.\r\n    11:24:06.179 [DEBUG] [org.gradle.cache.internal.DefaultFileLockManager] Releasing lock on daemon addresses registry.\r\n    11:24:16.176 [DEBUG] [org.gradle.launcher.daemon.server.Daemon] DaemonExpirationPeriodicCheck running\r\n    11:24:16.176 [DEBUG] [org.gradle.cache.internal.DefaultFileLockManager] Waiting to acquire shared lock on daemon addresses registry.\r\n    11:24:16.176 [DEBUG] [org.gradle.cache.internal.DefaultFileLockManager] Lock acquired.\r\n    11:24:16.176 [DEBUG] [org.gradle.cache.internal.DefaultFileLockManager] Releasing lock on daemon addresses registry.\r\n    11:24:16.177 [DEBUG] [org.gradle.cache.internal.DefaultFileLockManager] Waiting to acquire shared lock on daemon addresses registry.\r\n    11:24:16.177 [DEBUG] [org.gradle.cache.internal.DefaultFileLockManager] Lock acquired.\r\n    11:24:16.177 [DEBUG] [org.gradle.cache.internal.DefaultFileLockManager] Releasing lock on daemon addresses registry.\r\n    11:24:26.176 [DEBUG] [org.gradle.launcher.daemon.server.Daemon] DaemonExpirationPeriodicCheck running\r\n    11:24:26.177 [DEBUG] [org.gradle.cache.internal.DefaultFileLockManager] Waiting to acquire shared lock on daemon addresses registry.\r\n    11:24:26.177 [DEBUG] [org.gradle.cache.internal.DefaultFileLockManager] Lock acquired.\r\n    11:24:26.177 [DEBUG] [org.gradle.cache.internal.DefaultFileLockManager] Releasing lock on daemon addresses registry.\r\n    11:24:26.177 [DEBUG] [org.gradle.cache.internal.DefaultFileLockManager] Waiting to acquire shared lock on daemon addresses registry.\r\n    11:24:26.177 [DEBUG] [org.gradle.cache.internal.DefaultFileLockManager] Lock acquired.\r\n    11:24:26.177 [DEBUG] [org.gradle.cache.internal.DefaultFileLockManager] Releasing lock on daemon addresses registry.\r\n    11:24:36.175 [DEBUG] [org.gradle.launcher.daemon.server.Daemon] DaemonExpirationPeriodicCheck running\r\n    11:24:36.175 [DEBUG] [org.gradle.cache.internal.DefaultFileLockManager] Waiting to acquire shared lock on daemon addresses registry.\r\n    11:24:36.176 [DEBUG] [org.gradle.cache.internal.DefaultFileLockManager] Lock acquired.\r\n    11:24:36.176 [DEBUG] [org.gradle.cache.internal.DefaultFileLockManager] Releasing lock on daemon addresses registry.\r\n    11:24:36.176 [DEBUG] [org.gradle.cache.internal.DefaultFileLockManager] Waiting to acquire shared lock on daemon addresses registry.\r\n    11:24:36.176 [DEBUG] [org.gradle.cache.internal.DefaultFileLockManager] Lock acquired.\r\n    11:24:36.176 [DEBUG] [org.gradle.cache.internal.DefaultFileLockManager] Releasing lock on daemon addresses registry.\r\n    11:24:46.173 [DEBUG] [org.gradle.launcher.daemon.server.Daemon] DaemonExpirationPeriodicCheck running\r\n    11:24:46.174 [DEBUG] [org.gradle.cache.internal.DefaultFileLockManager] Waiting to acquire shared lock on daemon addresses registry.\r\n    11:24:46.174 [DEBUG] [org.gradle.cache.internal.DefaultFileLockManager] Lock acquired.\r\n    11:24:46.174 [DEBUG] [org.gradle.cache.internal.DefaultFileLockManager] Releasing lock on daemon addresses registry.\r\n    11:24:46.175 [DEBUG] [org.gradle.cache.internal.DefaultFileLockManager] Waiting to acquire shared lock on daemon addresses registry.\r\n    11:24:46.175 [DEBUG] [org.gradle.cache.internal.DefaultFileLockManager] Lock acquired.\r\n    11:24:46.175 [DEBUG] [org.gradle.cache.internal.DefaultFileLockManager] Releasing lock on daemon addresses registry.\r\n    11:24:56.172 [DEBUG] [org.gradle.launcher.daemon.server.Daemon] DaemonExpirationPeriodicCheck running\r\n    11:24:56.173 [DEBUG] [org.gradle.cache.internal.DefaultFileLockManager] Waiting to acquire shared lock on daemon addresses registry.\r\n    11:24:56.173 [DEBUG] [org.gradle.cache.internal.DefaultFileLockManager] Lock acquired.\r\n    11:24:56.173 [DEBUG] [org.gradle.cache.internal.DefaultFileLockManager] Releasing lock on daemon addresses registry.\r\n    11:24:56.173 [DEBUG] [org.gradle.cache.internal.DefaultFileLockManager] Waiting to acquire shared lock on daemon addresses registry.\r\n    11:24:56.174 [DEBUG] [org.gradle.cache.internal.DefaultFileLockManager] Lock acquired.\r\n    11:24:56.174 [DEBUG] [org.gradle.cache.internal.DefaultFileLockManager] Releasing lock on daemon addresses registry.\r\n    11:25:06.175 [DEBUG] [org.gradle.launcher.daemon.server.Daemon] DaemonExpirationPeriodicCheck running\r\n    11:25:06.175 [DEBUG] [org.gradle.cache.internal.DefaultFileLockManager] Waiting to acquire shared lock on daemon addresses registry.\r\n ","title":"Gradle build is hanging without failure, DefaultFileLockManager acquiring and releasing lock on daemon addresses registry","body":"<p>I have several gradle-based projects and on all of them recently I've become unable to execute a ./gradlew clean build. Upon running this, the  When I run with the --debug flag, I get stuck on <code>&gt; Building 7% &gt; :compileJava &gt; Resolving dependencies ':compileClasspath'</code> and it never moves forward.</p>\n<p>When I ran with the <code>--debug</code> flag, I got this output regarding the <code>DefaultFileLockManager</code> acquiring and releasing a daemon lock, but this has been unhelpful. Here is the last bit of the Gradle debug log that I see.</p>\n<pre><code>11:22:57.079 [DEBUG] [org.apache.http.impl.conn.PoolingHttpClientConnectionManager] Connection request: [route: {s}-&gt;https://maven.vaadin.com:443][total kept alive: 0; route allocated: 1 of 2; total allocated: 1 of 20]\n11:22:57.080 [DEBUG] [org.apache.http.impl.conn.PoolingHttpClientConnectionManager] Connection leased: [id: 203][route: {s}-&gt;https://maven.vaadin.com:443][total kept alive: 0; route allocated: 2 of 2; total allocated: 2 of 20]\n11:22:57.080 [DEBUG] [org.apache.http.impl.execchain.MainClientExec] Opening connection {s}-&gt;https://maven.vaadin.com:443\n11:22:57.080 [DEBUG] [org.apache.http.impl.conn.DefaultHttpClientConnectionOperator] Connecting to maven.vaadin.com/54.86.23.48:443\n11:22:57.080 [DEBUG] [org.apache.http.conn.ssl.SSLConnectionSocketFactory] Connecting socket to maven.vaadin.com/54.86.23.48:443 with timeout 0\n11:22:57.098 [DEBUG] [org.apache.http.conn.ssl.SSLConnectionSocketFactory] Enabled protocols: [TLSv1, TLSv1.1, TLSv1.2]\n11:22:57.098 [DEBUG] [org.apache.http.conn.ssl.SSLConnectionSocketFactory] Enabled cipher suites:[TLS_ECDHE_ECDSA_WITH_AES_128_CBC_SHA256, TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256, TLS_RSA_WITH_AES_128_CBC_SHA256, TLS_ECDH_ECDSA_WITH_AES_128_CBC_SHA256, TLS_ECDH_RSA_WITH_AES_128_CBC_SHA256, TLS_DHE_RSA_WITH_AES_128_CBC_SHA256, TLS_DHE_DSS_WITH_AES_128_CBC_SHA256, TLS_ECDHE_ECDSA_WITH_AES_128_CBC_SHA, TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA, TLS_RSA_WITH_AES_128_CBC_SHA, TLS_ECDH_ECDSA_WITH_AES_128_CBC_SHA, TLS_ECDH_RSA_WITH_AES_128_CBC_SHA, TLS_DHE_RSA_WITH_AES_128_CBC_SHA, TLS_DHE_DSS_WITH_AES_128_CBC_SHA, TLS_ECDHE_ECDSA_WITH_AES_128_GCM_SHA256, TLS_ECDHE_RSA_WITH_AES_128_GCM_SHA256, TLS_RSA_WITH_AES_128_GCM_SHA256, TLS_ECDH_ECDSA_WITH_AES_128_GCM_SHA256, TLS_ECDH_RSA_WITH_AES_128_GCM_SHA256, TLS_DHE_RSA_WITH_AES_128_GCM_SHA256, TLS_DHE_DSS_WITH_AES_128_GCM_SHA256, TLS_ECDHE_ECDSA_WITH_3DES_EDE_CBC_SHA, TLS_ECDHE_RSA_WITH_3DES_EDE_CBC_SHA, SSL_RSA_WITH_3DES_EDE_CBC_SHA, TLS_ECDH_ECDSA_WITH_3DES_EDE_CBC_SHA, TLS_ECDH_RSA_WITH_3DES_EDE_CBC_SHA, SSL_DHE_RSA_WITH_3DES_EDE_CBC_SHA, SSL_DHE_DSS_WITH_3DES_EDE_CBC_SHA, TLS_EMPTY_RENEGOTIATION_INFO_SCSV]\n11:22:57.098 [DEBUG] [org.apache.http.conn.ssl.SSLConnectionSocketFactory] Starting handshake\n11:22:57.141 [DEBUG] [org.apache.http.conn.ssl.SSLConnectionSocketFactory] Secure session established\n11:22:57.141 [DEBUG] [org.apache.http.conn.ssl.SSLConnectionSocketFactory]  negotiated protocol: TLSv1.2\n11:22:57.142 [DEBUG] [org.apache.http.conn.ssl.SSLConnectionSocketFactory]  negotiated cipher suite: TLS_ECDHE_RSA_WITH_AES_128_GCM_SHA256\n11:22:57.142 [DEBUG] [org.apache.http.conn.ssl.SSLConnectionSocketFactory]  peer principal: CN=*.vaadin.com, O=Vaadin Ltd, L=Turku, ST=Western Finland, C=FI\n11:22:57.142 [DEBUG] [org.apache.http.conn.ssl.SSLConnectionSocketFactory]  peer alternative names: [*.vaadin.com, vaadin.com]\n11:22:57.142 [DEBUG] [org.apache.http.conn.ssl.SSLConnectionSocketFactory]  issuer principal: CN=DigiCert SHA2 Secure Server CA, O=DigiCert Inc, C=US\n11:22:57.142 [DEBUG] [org.apache.http.impl.conn.DefaultHttpClientConnectionOperator] Connection established 10.10.2.46:54773&lt;-&gt;54.86.23.48:443\n11:22:57.142 [DEBUG] [org.apache.http.impl.execchain.MainClientExec] Executing request HEAD /vaadin-addons/info/magnolia/magnolia-module-content-dependencies/1.6.1/magnolia-module-content-dependencies-1.6.1.pom HTTP/1.1\n11:22:57.142 [DEBUG] [org.apache.http.impl.execchain.MainClientExec] Target auth state: UNCHALLENGED\n11:22:57.142 [DEBUG] [org.apache.http.impl.execchain.MainClientExec] Proxy auth state: UNCHALLENGED\n11:22:57.163 [DEBUG] [org.apache.http.impl.conn.DefaultManagedHttpClientConnection] http-outgoing-203: Close connection\n11:22:57.166 [DEBUG] [org.apache.http.impl.execchain.MainClientExec] Connection discarded\n11:22:57.166 [DEBUG] [org.apache.http.impl.conn.DefaultManagedHttpClientConnection] http-outgoing-203: Close connection\n11:22:57.166 [DEBUG] [org.apache.http.impl.conn.PoolingHttpClientConnectionManager] Connection released: [id: 203][route: {s}-&gt;https://maven.vaadin.com:443][total kept alive: 0; route allocated: 1 of 2; total allocated: 1 of 20]\n11:22:57.166 [INFO] [org.gradle.internal.resource.transport.http.HttpClientHelper] Resource missing. [HTTP HEAD: https://maven.vaadin.com/vaadin-addons/info/magnolia/magnolia-module-content-dependencies/1.6.1/magnolia-module-content-dependencies-1.6.1.pom]\n11:22:57.167 [DEBUG] [org.gradle.api.internal.artifacts.repositories.resolver.DefaultExternalResourceArtifactResolver] Loading https://maven.vaadin.com/vaadin-addons/info/magnolia/magnolia-module-content-dependencies/1.6.1/magnolia-module-content-dependencies-1.6.1.jar\n11:22:57.167 [DEBUG] [org.gradle.internal.resource.transport.http.HttpResourceAccessor] Constructing external resource metadata: https://maven.vaadin.com/vaadin-addons/info/magnolia/magnolia-module-content-dependencies/1.6.1/magnolia-module-content-dependencies-1.6.1.jar\n11:22:57.167 [DEBUG] [org.gradle.internal.resource.transport.http.HttpClientHelper] Performing HTTP HEAD: https://maven.vaadin.com/vaadin-addons/info/magnolia/magnolia-module-content-dependencies/1.6.1/magnolia-module-content-dependencies-1.6.1.jar\n11:22:57.167 [DEBUG] [org.apache.http.client.protocol.RequestAddCookies] CookieSpec selected: default\n11:22:57.167 [DEBUG] [org.apache.http.client.protocol.RequestAuthCache] Auth cache not set in the context\n11:22:57.167 [DEBUG] [org.apache.http.impl.conn.PoolingHttpClientConnectionManager] Connection request: [route: {s}-&gt;https://maven.vaadin.com:443][total kept alive: 0; route allocated: 1 of 2; total allocated: 1 of 20]\n11:22:57.167 [DEBUG] [org.apache.http.impl.conn.PoolingHttpClientConnectionManager] Connection leased: [id: 204][route: {s}-&gt;https://maven.vaadin.com:443][total kept alive: 0; route allocated: 2 of 2; total allocated: 2 of 20]\n11:22:57.167 [DEBUG] [org.apache.http.impl.execchain.MainClientExec] Opening connection {s}-&gt;https://maven.vaadin.com:443\n11:22:57.167 [DEBUG] [org.apache.http.impl.conn.DefaultHttpClientConnectionOperator] Connecting to maven.vaadin.com/54.86.23.48:443\n11:22:57.167 [DEBUG] [org.apache.http.conn.ssl.SSLConnectionSocketFactory] Connecting socket to maven.vaadin.com/54.86.23.48:443 with timeout 0\n11:22:57.186 [DEBUG] [org.apache.http.conn.ssl.SSLConnectionSocketFactory] Enabled protocols: [TLSv1, TLSv1.1, TLSv1.2]\n11:22:57.186 [DEBUG] [org.apache.http.conn.ssl.SSLConnectionSocketFactory] Enabled cipher suites:[TLS_ECDHE_ECDSA_WITH_AES_128_CBC_SHA256, TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256, TLS_RSA_WITH_AES_128_CBC_SHA256, TLS_ECDH_ECDSA_WITH_AES_128_CBC_SHA256, TLS_ECDH_RSA_WITH_AES_128_CBC_SHA256, TLS_DHE_RSA_WITH_AES_128_CBC_SHA256, TLS_DHE_DSS_WITH_AES_128_CBC_SHA256, TLS_ECDHE_ECDSA_WITH_AES_128_CBC_SHA, TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA, TLS_RSA_WITH_AES_128_CBC_SHA, TLS_ECDH_ECDSA_WITH_AES_128_CBC_SHA, TLS_ECDH_RSA_WITH_AES_128_CBC_SHA, TLS_DHE_RSA_WITH_AES_128_CBC_SHA, TLS_DHE_DSS_WITH_AES_128_CBC_SHA, TLS_ECDHE_ECDSA_WITH_AES_128_GCM_SHA256, TLS_ECDHE_RSA_WITH_AES_128_GCM_SHA256, TLS_RSA_WITH_AES_128_GCM_SHA256, TLS_ECDH_ECDSA_WITH_AES_128_GCM_SHA256, TLS_ECDH_RSA_WITH_AES_128_GCM_SHA256, TLS_DHE_RSA_WITH_AES_128_GCM_SHA256, TLS_DHE_DSS_WITH_AES_128_GCM_SHA256, TLS_ECDHE_ECDSA_WITH_3DES_EDE_CBC_SHA, TLS_ECDHE_RSA_WITH_3DES_EDE_CBC_SHA, SSL_RSA_WITH_3DES_EDE_CBC_SHA, TLS_ECDH_ECDSA_WITH_3DES_EDE_CBC_SHA, TLS_ECDH_RSA_WITH_3DES_EDE_CBC_SHA, SSL_DHE_RSA_WITH_3DES_EDE_CBC_SHA, SSL_DHE_DSS_WITH_3DES_EDE_CBC_SHA, TLS_EMPTY_RENEGOTIATION_INFO_SCSV]\n11:22:57.186 [DEBUG] [org.apache.http.conn.ssl.SSLConnectionSocketFactory] Starting handshake\n11:22:57.207 [DEBUG] [org.apache.http.conn.ssl.SSLConnectionSocketFactory] Secure session established\n11:22:57.207 [DEBUG] [org.apache.http.conn.ssl.SSLConnectionSocketFactory]  negotiated protocol: TLSv1.2\n11:22:57.207 [DEBUG] [org.apache.http.conn.ssl.SSLConnectionSocketFactory]  negotiated cipher suite: TLS_ECDHE_RSA_WITH_AES_128_GCM_SHA256\n11:22:57.207 [DEBUG] [org.apache.http.conn.ssl.SSLConnectionSocketFactory]  peer principal: CN=*.vaadin.com, O=Vaadin Ltd, L=Turku, ST=Western Finland, C=FI\n11:22:57.207 [DEBUG] [org.apache.http.conn.ssl.SSLConnectionSocketFactory]  peer alternative names: [*.vaadin.com, vaadin.com]\n11:22:57.207 [DEBUG] [org.apache.http.conn.ssl.SSLConnectionSocketFactory]  issuer principal: CN=DigiCert SHA2 Secure Server CA, O=DigiCert Inc, C=US\n11:22:57.207 [DEBUG] [org.apache.http.impl.conn.DefaultHttpClientConnectionOperator] Connection established 10.10.2.46:54774&lt;-&gt;54.86.23.48:443\n11:22:57.207 [DEBUG] [org.apache.http.impl.execchain.MainClientExec] Executing request HEAD /vaadin-addons/info/magnolia/magnolia-module-content-dependencies/1.6.1/magnolia-module-content-dependencies-1.6.1.jar HTTP/1.1\n11:22:57.207 [DEBUG] [org.apache.http.impl.execchain.MainClientExec] Target auth state: UNCHALLENGED\n11:22:57.207 [DEBUG] [org.apache.http.impl.execchain.MainClientExec] Proxy auth state: UNCHALLENGED\n11:22:57.230 [DEBUG] [org.apache.http.impl.conn.DefaultManagedHttpClientConnection] http-outgoing-204: Close connection\n11:22:57.234 [DEBUG] [org.apache.http.impl.execchain.MainClientExec] Connection discarded\n11:22:57.234 [DEBUG] [org.apache.http.impl.conn.DefaultManagedHttpClientConnection] http-outgoing-204: Close connection\n11:22:57.234 [DEBUG] [org.apache.http.impl.conn.PoolingHttpClientConnectionManager] Connection released: [id: 204][route: {s}-&gt;https://maven.vaadin.com:443][total kept alive: 0; route allocated: 1 of 2; total allocated: 1 of 20]\n11:22:57.234 [INFO] [org.gradle.internal.resource.transport.http.HttpClientHelper] Resource missing. [HTTP HEAD: https://maven.vaadin.com/vaadin-addons/info/magnolia/magnolia-module-content-dependencies/1.6.1/magnolia-module-content-dependencies-1.6.1.jar]\n11:22:57.234 [DEBUG] [org.gradle.api.internal.artifacts.repositories.resolver.ExternalResourceResolver] No meta-data file or artifact found for module 'info.magnolia:magnolia-module-content-dependencies:1.6.1' in repository 'vaadin-addons'.\n11:22:57.234 [DEBUG] [org.gradle.api.internal.artifacts.ivyservice.modulecache.DefaultModuleMetaDataCache] Recording absence of module descriptor in cache: info.magnolia:magnolia-module-content-dependencies:1.6.1 [changing = false]\n11:22:57.235 [DEBUG] [org.gradle.api.internal.artifacts.repositories.resolver.DefaultExternalResourceArtifactResolver] Loading https://nexus.magnolia-cms.com/content/groups/enterprise/info/magnolia/magnolia-module-content-dependencies/1.6.1/magnolia-module-content-dependencies-1.6.1.pom\n11:22:57.235 [DEBUG] [org.gradle.internal.resource.transfer.DefaultCacheAwareExternalResourceAccessor] Constructing external resource: https://nexus.magnolia-cms.com/content/groups/enterprise/info/magnolia/magnolia-module-content-dependencies/1.6.1/magnolia-module-content-dependencies-1.6.1.pom\n11:22:57.235 [DEBUG] [org.gradle.internal.resource.transport.http.HttpResourceAccessor] Constructing external resource metadata: https://nexus.magnolia-cms.com/content/groups/enterprise/info/magnolia/magnolia-module-content-dependencies/1.6.1/magnolia-module-content-dependencies-1.6.1.pom\n11:22:57.235 [DEBUG] [org.gradle.internal.resource.transport.http.HttpClientHelper] Performing HTTP HEAD: https://nexus.magnolia-cms.com/content/groups/enterprise/info/magnolia/magnolia-module-content-dependencies/1.6.1/magnolia-module-content-dependencies-1.6.1.pom\n11:22:57.236 [DEBUG] [org.apache.http.client.protocol.RequestAddCookies] CookieSpec selected: default\n11:22:57.236 [DEBUG] [org.apache.http.client.protocol.RequestAuthCache] Auth cache not set in the context\n11:22:57.236 [DEBUG] [org.apache.http.impl.conn.PoolingHttpClientConnectionManager] Connection request: [route: {s}-&gt;https://nexus.magnolia-cms.com:443][total kept alive: 0; route allocated: 2 of 2; total allocated: 2 of 20]\n11:23:06.177 [DEBUG] [org.gradle.launcher.daemon.server.Daemon] DaemonExpirationPeriodicCheck running\n11:23:06.177 [DEBUG] [org.gradle.cache.internal.DefaultFileLockManager] Waiting to acquire shared lock on daemon addresses registry.\n11:23:06.177 [DEBUG] [org.gradle.cache.internal.DefaultFileLockManager] Lock acquired.\n11:23:06.178 [DEBUG] [org.gradle.cache.internal.DefaultFileLockManager] Releasing lock on daemon addresses registry.\n11:23:06.178 [DEBUG] [org.gradle.cache.internal.DefaultFileLockManager] Waiting to acquire shared lock on daemon addresses registry.\n11:23:06.178 [DEBUG] [org.gradle.cache.internal.DefaultFileLockManager] Lock acquired.\n11:23:06.178 [DEBUG] [org.gradle.cache.internal.DefaultFileLockManager] Releasing lock on daemon addresses registry.\n11:23:16.177 [DEBUG] [org.gradle.launcher.daemon.server.Daemon] DaemonExpirationPeriodicCheck running\n11:23:16.177 [DEBUG] [org.gradle.cache.internal.DefaultFileLockManager] Waiting to acquire shared lock on daemon addresses registry.\n11:23:16.177 [DEBUG] [org.gradle.cache.internal.DefaultFileLockManager] Lock acquired.\n11:23:16.177 [DEBUG] [org.gradle.cache.internal.DefaultFileLockManager] Releasing lock on daemon addresses registry.\n11:23:16.178 [DEBUG] [org.gradle.cache.internal.DefaultFileLockManager] Waiting to acquire shared lock on daemon addresses registry.\n11:23:16.178 [DEBUG] [org.gradle.cache.internal.DefaultFileLockManager] Lock acquired.\n11:23:16.178 [DEBUG] [org.gradle.cache.internal.DefaultFileLockManager] Releasing lock on daemon addresses registry.\n11:23:26.179 [DEBUG] [org.gradle.launcher.daemon.server.Daemon] DaemonExpirationPeriodicCheck running\n11:23:26.179 [DEBUG] [org.gradle.cache.internal.DefaultFileLockManager] Waiting to acquire shared lock on daemon addresses registry.\n11:23:26.179 [DEBUG] [org.gradle.cache.internal.DefaultFileLockManager] Lock acquired.\n11:23:26.179 [DEBUG] [org.gradle.cache.internal.DefaultFileLockManager] Releasing lock on daemon addresses registry.\n11:23:26.179 [DEBUG] [org.gradle.cache.internal.DefaultFileLockManager] Waiting to acquire shared lock on daemon addresses registry.\n11:23:26.179 [DEBUG] [org.gradle.cache.internal.DefaultFileLockManager] Lock acquired.\n11:23:26.180 [DEBUG] [org.gradle.cache.internal.DefaultFileLockManager] Releasing lock on daemon addresses registry.\n11:23:36.180 [DEBUG] [org.gradle.launcher.daemon.server.Daemon] DaemonExpirationPeriodicCheck running\n11:23:36.180 [DEBUG] [org.gradle.cache.internal.DefaultFileLockManager] Waiting to acquire shared lock on daemon addresses registry.\n11:23:36.180 [DEBUG] [org.gradle.cache.internal.DefaultFileLockManager] Lock acquired.\n11:23:36.180 [DEBUG] [org.gradle.cache.internal.DefaultFileLockManager] Releasing lock on daemon addresses registry.\n11:23:36.180 [DEBUG] [org.gradle.cache.internal.DefaultFileLockManager] Waiting to acquire shared lock on daemon addresses registry.\n11:23:36.181 [DEBUG] [org.gradle.cache.internal.DefaultFileLockManager] Lock acquired.\n11:23:36.181 [DEBUG] [org.gradle.cache.internal.DefaultFileLockManager] Releasing lock on daemon addresses registry.\n11:23:46.176 [DEBUG] [org.gradle.launcher.daemon.server.Daemon] DaemonExpirationPeriodicCheck running\n11:23:46.176 [DEBUG] [org.gradle.cache.internal.DefaultFileLockManager] Waiting to acquire shared lock on daemon addresses registry.\n11:23:46.176 [DEBUG] [org.gradle.cache.internal.DefaultFileLockManager] Lock acquired.\n11:23:46.176 [DEBUG] [org.gradle.cache.internal.DefaultFileLockManager] Releasing lock on daemon addresses registry.\n11:23:46.177 [DEBUG] [org.gradle.cache.internal.DefaultFileLockManager] Waiting to acquire shared lock on daemon addresses registry.\n11:23:46.177 [DEBUG] [org.gradle.cache.internal.DefaultFileLockManager] Lock acquired.\n11:23:46.177 [DEBUG] [org.gradle.cache.internal.DefaultFileLockManager] Releasing lock on daemon addresses registry.\n11:23:56.179 [DEBUG] [org.gradle.launcher.daemon.server.Daemon] DaemonExpirationPeriodicCheck running\n11:23:56.180 [DEBUG] [org.gradle.cache.internal.DefaultFileLockManager] Waiting to acquire shared lock on daemon addresses registry.\n11:23:56.180 [DEBUG] [org.gradle.cache.internal.DefaultFileLockManager] Lock acquired.\n11:23:56.180 [DEBUG] [org.gradle.cache.internal.DefaultFileLockManager] Releasing lock on daemon addresses registry.\n11:23:56.181 [DEBUG] [org.gradle.cache.internal.DefaultFileLockManager] Waiting to acquire shared lock on daemon addresses registry.\n11:23:56.181 [DEBUG] [org.gradle.cache.internal.DefaultFileLockManager] Lock acquired.\n11:23:56.181 [DEBUG] [org.gradle.cache.internal.DefaultFileLockManager] Releasing lock on daemon addresses registry.\n11:24:06.177 [DEBUG] [org.gradle.launcher.daemon.server.Daemon] DaemonExpirationPeriodicCheck running\n11:24:06.178 [DEBUG] [org.gradle.cache.internal.DefaultFileLockManager] Waiting to acquire shared lock on daemon addresses registry.\n11:24:06.178 [DEBUG] [org.gradle.cache.internal.DefaultFileLockManager] Lock acquired.\n11:24:06.178 [DEBUG] [org.gradle.cache.internal.DefaultFileLockManager] Releasing lock on daemon addresses registry.\n11:24:06.178 [DEBUG] [org.gradle.cache.internal.DefaultFileLockManager] Waiting to acquire shared lock on daemon addresses registry.\n11:24:06.179 [DEBUG] [org.gradle.cache.internal.DefaultFileLockManager] Lock acquired.\n11:24:06.179 [DEBUG] [org.gradle.cache.internal.DefaultFileLockManager] Releasing lock on daemon addresses registry.\n11:24:16.176 [DEBUG] [org.gradle.launcher.daemon.server.Daemon] DaemonExpirationPeriodicCheck running\n11:24:16.176 [DEBUG] [org.gradle.cache.internal.DefaultFileLockManager] Waiting to acquire shared lock on daemon addresses registry.\n11:24:16.176 [DEBUG] [org.gradle.cache.internal.DefaultFileLockManager] Lock acquired.\n11:24:16.176 [DEBUG] [org.gradle.cache.internal.DefaultFileLockManager] Releasing lock on daemon addresses registry.\n11:24:16.177 [DEBUG] [org.gradle.cache.internal.DefaultFileLockManager] Waiting to acquire shared lock on daemon addresses registry.\n11:24:16.177 [DEBUG] [org.gradle.cache.internal.DefaultFileLockManager] Lock acquired.\n11:24:16.177 [DEBUG] [org.gradle.cache.internal.DefaultFileLockManager] Releasing lock on daemon addresses registry.\n11:24:26.176 [DEBUG] [org.gradle.launcher.daemon.server.Daemon] DaemonExpirationPeriodicCheck running\n11:24:26.177 [DEBUG] [org.gradle.cache.internal.DefaultFileLockManager] Waiting to acquire shared lock on daemon addresses registry.\n11:24:26.177 [DEBUG] [org.gradle.cache.internal.DefaultFileLockManager] Lock acquired.\n11:24:26.177 [DEBUG] [org.gradle.cache.internal.DefaultFileLockManager] Releasing lock on daemon addresses registry.\n11:24:26.177 [DEBUG] [org.gradle.cache.internal.DefaultFileLockManager] Waiting to acquire shared lock on daemon addresses registry.\n11:24:26.177 [DEBUG] [org.gradle.cache.internal.DefaultFileLockManager] Lock acquired.\n11:24:26.177 [DEBUG] [org.gradle.cache.internal.DefaultFileLockManager] Releasing lock on daemon addresses registry.\n11:24:36.175 [DEBUG] [org.gradle.launcher.daemon.server.Daemon] DaemonExpirationPeriodicCheck running\n11:24:36.175 [DEBUG] [org.gradle.cache.internal.DefaultFileLockManager] Waiting to acquire shared lock on daemon addresses registry.\n11:24:36.176 [DEBUG] [org.gradle.cache.internal.DefaultFileLockManager] Lock acquired.\n11:24:36.176 [DEBUG] [org.gradle.cache.internal.DefaultFileLockManager] Releasing lock on daemon addresses registry.\n11:24:36.176 [DEBUG] [org.gradle.cache.internal.DefaultFileLockManager] Waiting to acquire shared lock on daemon addresses registry.\n11:24:36.176 [DEBUG] [org.gradle.cache.internal.DefaultFileLockManager] Lock acquired.\n11:24:36.176 [DEBUG] [org.gradle.cache.internal.DefaultFileLockManager] Releasing lock on daemon addresses registry.\n11:24:46.173 [DEBUG] [org.gradle.launcher.daemon.server.Daemon] DaemonExpirationPeriodicCheck running\n11:24:46.174 [DEBUG] [org.gradle.cache.internal.DefaultFileLockManager] Waiting to acquire shared lock on daemon addresses registry.\n11:24:46.174 [DEBUG] [org.gradle.cache.internal.DefaultFileLockManager] Lock acquired.\n11:24:46.174 [DEBUG] [org.gradle.cache.internal.DefaultFileLockManager] Releasing lock on daemon addresses registry.\n11:24:46.175 [DEBUG] [org.gradle.cache.internal.DefaultFileLockManager] Waiting to acquire shared lock on daemon addresses registry.\n11:24:46.175 [DEBUG] [org.gradle.cache.internal.DefaultFileLockManager] Lock acquired.\n11:24:46.175 [DEBUG] [org.gradle.cache.internal.DefaultFileLockManager] Releasing lock on daemon addresses registry.\n11:24:56.172 [DEBUG] [org.gradle.launcher.daemon.server.Daemon] DaemonExpirationPeriodicCheck running\n11:24:56.173 [DEBUG] [org.gradle.cache.internal.DefaultFileLockManager] Waiting to acquire shared lock on daemon addresses registry.\n11:24:56.173 [DEBUG] [org.gradle.cache.internal.DefaultFileLockManager] Lock acquired.\n11:24:56.173 [DEBUG] [org.gradle.cache.internal.DefaultFileLockManager] Releasing lock on daemon addresses registry.\n11:24:56.173 [DEBUG] [org.gradle.cache.internal.DefaultFileLockManager] Waiting to acquire shared lock on daemon addresses registry.\n11:24:56.174 [DEBUG] [org.gradle.cache.internal.DefaultFileLockManager] Lock acquired.\n11:24:56.174 [DEBUG] [org.gradle.cache.internal.DefaultFileLockManager] Releasing lock on daemon addresses registry.\n11:25:06.175 [DEBUG] [org.gradle.launcher.daemon.server.Daemon] DaemonExpirationPeriodicCheck running\n11:25:06.175 [DEBUG] [org.gradle.cache.internal.DefaultFileLockManager] Waiting to acquire shared lock on daemon addresses registry.\n</code></pre>\n"},{"tags":["java","hibernate","jpa","orm"],"comments":[{"owner":{"account_id":4250366,"reputation":463,"user_id":3554119,"display_name":"dirkt"},"score":3,"creation_date":1542283067,"post_id":11938253,"comment_id":93517857,"body_markdown":"Also see [What is the owning side in an ORM mapping](https://stackoverflow.com/questions/2749689/what-is-the-owning-side-in-an-orm-mapping) question for a really good explanation of the issues involved.","body":"Also see <a href=\"https://stackoverflow.com/questions/2749689/what-is-the-owning-side-in-an-orm-mapping\">What is the owning side in an ORM mapping</a> question for a really good explanation of the issues involved."}],"answers":[{"tags":[],"owner":{"account_id":69149,"reputation":233552,"user_id":201359,"accept_rate":100,"display_name":"&#211;scar L&#243;pez"},"down_vote_count":4,"up_vote_count":643,"is_accepted":false,"score":639,"last_activity_date":1601848736,"creation_date":1344874809,"answer_id":11938290,"question_id":11938253,"body_markdown":"The annotation `@JoinColumn` indicates that this entity is the _owner_ of the relationship (that is: the corresponding table has a column with a foreign key to the referenced table), whereas the attribute `mappedBy` indicates that the entity in this side is the inverse of the relationship, and the owner resides in the &quot;other&quot; entity. This also means that you can access the other table from the class which you&#39;ve annotated with &quot;mappedBy&quot; (fully bidirectional relationship).\r\n\r\nIn particular, for the code in the question the correct annotations would look like this:\r\n\r\n    @Entity\r\n    public class Company {\r\n        @OneToMany(mappedBy = &quot;company&quot;,\r\n                   orphanRemoval = true,\r\n                   fetch = FetchType.LAZY,\r\n                   cascade = CascadeType.ALL)\r\n        private List&lt;Branch&gt; branches;\r\n    }\r\n    \r\n    @Entity\r\n    public class Branch {\r\n    \t@ManyToOne(fetch = FetchType.LAZY)\r\n        @JoinColumn(name = &quot;companyId&quot;)\r\n        private Company company;\r\n    }","title":"JPA JoinColumn vs mappedBy","body":"<p>The annotation <code>@JoinColumn</code> indicates that this entity is the <em>owner</em> of the relationship (that is: the corresponding table has a column with a foreign key to the referenced table), whereas the attribute <code>mappedBy</code> indicates that the entity in this side is the inverse of the relationship, and the owner resides in the &quot;other&quot; entity. This also means that you can access the other table from the class which you've annotated with &quot;mappedBy&quot; (fully bidirectional relationship).</p>\n<p>In particular, for the code in the question the correct annotations would look like this:</p>\n<pre><code>@Entity\npublic class Company {\n    @OneToMany(mappedBy = &quot;company&quot;,\n               orphanRemoval = true,\n               fetch = FetchType.LAZY,\n               cascade = CascadeType.ALL)\n    private List&lt;Branch&gt; branches;\n}\n\n@Entity\npublic class Branch {\n    @ManyToOne(fetch = FetchType.LAZY)\n    @JoinColumn(name = &quot;companyId&quot;)\n    private Company company;\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":201558,"reputation":20189,"user_id":448078,"accept_rate":61,"display_name":"Mike"},"down_vote_count":5,"up_vote_count":271,"is_accepted":true,"score":266,"last_activity_date":1699346277,"creation_date":1344877855,"answer_id":11939045,"question_id":11938253,"body_markdown":"**`@JoinColumn` could be used on both sides of the relationship.** The question was about using `@JoinColumn` on the `@OneToMany` side (rare case). And the point here is in _physical information duplication_ along with _not optimized SQL query that will produce some additional `UPDATE` statements_.\r\n\r\nAccording to [documentation](http://docs.jboss.org/hibernate/annotations/3.5/reference/en/html_single/):\r\n\r\nSince **many to one are** (almost) always the **owner side** of a bidirectional relationship in the JPA spec, the one to many association is annotated by `@OneToMany(mappedBy=...)`\r\n\r\n\t@Entity\r\n\tpublic class Troop {\r\n\t\t@OneToMany(mappedBy=&quot;troop&quot;)\r\n\t\tpublic Set&lt;Soldier&gt; getSoldiers() {\r\n\t\t...\r\n\t}\r\n\r\n\t@Entity\r\n\tpublic class Soldier {\r\n\t\t@ManyToOne\r\n\t\t@JoinColumn(name=&quot;troop_fk&quot;)\r\n\t\tpublic Troop getTroop() {\r\n\t\t...\r\n\t} \r\n`Troop` has a bidirectional one to many relationship with `Soldier` through the troop property. You don&#39;t have to (must not) define any physical mapping in the `mappedBy` side.\r\n\r\nTo map a bidirectional one to many, with the **one-to-many side as the owning side**, you have to remove the `mappedBy` element and set the many to one `@JoinColumn` as `insertable` and `updatable` to false. This solution is not optimized and will produce some additional `UPDATE` statements.\r\n\r\n\t@Entity\r\n\tpublic class Troop {\r\n\t\t@OneToMany\r\n\t\t@JoinColumn(name=&quot;troop_fk&quot;) //we need to duplicate the physical information\r\n\t\tpublic Set&lt;Soldier&gt; getSoldiers() {\r\n\t\t...\r\n\t}\r\n\r\n\t@Entity\r\n\tpublic class Soldier {\r\n\t\t@ManyToOne\r\n\t\t@JoinColumn(name=&quot;troop_fk&quot;, insertable=false, updatable=false)\r\n\t\tpublic Troop getTroop() {\r\n\t\t...\r\n\t}\r\n","title":"JPA JoinColumn vs mappedBy","body":"<p><strong><code>@JoinColumn</code> could be used on both sides of the relationship.</strong> The question was about using <code>@JoinColumn</code> on the <code>@OneToMany</code> side (rare case). And the point here is in <em>physical information duplication</em> along with <em>not optimized SQL query that will produce some additional <code>UPDATE</code> statements</em>.</p>\n<p>According to <a href=\"http://docs.jboss.org/hibernate/annotations/3.5/reference/en/html_single/\" rel=\"nofollow noreferrer\">documentation</a>:</p>\n<p>Since <strong>many to one are</strong> (almost) always the <strong>owner side</strong> of a bidirectional relationship in the JPA spec, the one to many association is annotated by <code>@OneToMany(mappedBy=...)</code></p>\n<pre><code>@Entity\npublic class Troop {\n    @OneToMany(mappedBy=&quot;troop&quot;)\n    public Set&lt;Soldier&gt; getSoldiers() {\n    ...\n}\n\n@Entity\npublic class Soldier {\n    @ManyToOne\n    @JoinColumn(name=&quot;troop_fk&quot;)\n    public Troop getTroop() {\n    ...\n} \n</code></pre>\n<p><code>Troop</code> has a bidirectional one to many relationship with <code>Soldier</code> through the troop property. You don't have to (must not) define any physical mapping in the <code>mappedBy</code> side.</p>\n<p>To map a bidirectional one to many, with the <strong>one-to-many side as the owning side</strong>, you have to remove the <code>mappedBy</code> element and set the many to one <code>@JoinColumn</code> as <code>insertable</code> and <code>updatable</code> to false. This solution is not optimized and will produce some additional <code>UPDATE</code> statements.</p>\n<pre><code>@Entity\npublic class Troop {\n    @OneToMany\n    @JoinColumn(name=&quot;troop_fk&quot;) //we need to duplicate the physical information\n    public Set&lt;Soldier&gt; getSoldiers() {\n    ...\n}\n\n@Entity\npublic class Soldier {\n    @ManyToOne\n    @JoinColumn(name=&quot;troop_fk&quot;, insertable=false, updatable=false)\n    public Troop getTroop() {\n    ...\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1003640,"reputation":8720,"user_id":1017917,"accept_rate":26,"display_name":"Soumyaansh"},"down_vote_count":0,"up_vote_count":38,"is_accepted":false,"score":38,"last_activity_date":1415182981,"creation_date":1415181700,"answer_id":26754244,"question_id":11938253,"body_markdown":"The annotation **mappedBy** ideally should always be used in the Parent side (Company class) of the bi directional relationship, in this case it should be in Company class pointing to the member variable &#39;company&#39; of the Child class (Branch class) \r\n\r\nThe annotation **@JoinColumn** is used to specify a mapped column for joining an entity association, this annotation can be used in any class (Parent or Child) but it should ideally be used only in one side (either in parent class or in Child class not in both) here in this case i used it in the Child side (Branch class) of the bi directional relationship indicating the foreign key in the Branch class.\r\n\r\nbelow is the working example :\r\n\r\n**parent class , Company**\r\n\r\n    @Entity\r\n    public class Company {\r\n    \t\r\n    \t\r\n    \tprivate int companyId;\r\n    \tprivate String companyName;\r\n    \tprivate List&lt;Branch&gt; branches;\r\n    \t\r\n    \t@Id\r\n    \t@GeneratedValue\r\n    \t@Column(name=&quot;COMPANY_ID&quot;)\r\n    \tpublic int getCompanyId() {\r\n    \t\treturn companyId;\r\n    \t}\r\n    \t\r\n    \tpublic void setCompanyId(int companyId) {\r\n    \t\tthis.companyId = companyId;\r\n    \t}\r\n    \t\r\n    \t@Column(name=&quot;COMPANY_NAME&quot;)\r\n    \tpublic String getCompanyName() {\r\n    \t\treturn companyName;\r\n    \t}\r\n    \t\r\n    \tpublic void setCompanyName(String companyName) {\r\n    \t\tthis.companyName = companyName;\r\n    \t}\r\n    \t\r\n    \t@OneToMany(fetch=FetchType.LAZY,cascade=CascadeType.ALL,mappedBy=&quot;company&quot;)\r\n    \tpublic List&lt;Branch&gt; getBranches() {\r\n    \t\treturn branches;\r\n    \t}\r\n    \t\r\n    \tpublic void setBranches(List&lt;Branch&gt; branches) {\r\n    \t\tthis.branches = branches;\r\n    \t}\r\n    \t\r\n    \r\n    }\r\n    \r\n**child class, Branch**\r\n\r\n    @Entity\r\n    public class Branch {\r\n    \r\n    \tprivate int branchId;\r\n    \tprivate String branchName;\r\n    \tprivate Company company;\r\n    \t\r\n    \t@Id\r\n    \t@GeneratedValue\r\n    \t@Column(name=&quot;BRANCH_ID&quot;)\r\n    \tpublic int getBranchId() {\r\n    \t\treturn branchId;\r\n    \t}\r\n    \t\r\n    \tpublic void setBranchId(int branchId) {\r\n    \t\tthis.branchId = branchId;\r\n    \t}\r\n    \t\r\n    \t@Column(name=&quot;BRANCH_NAME&quot;)\r\n    \tpublic String getBranchName() {\r\n    \t\treturn branchName;\r\n    \t}\r\n    \t\r\n    \tpublic void setBranchName(String branchName) {\r\n    \t\tthis.branchName = branchName;\r\n    \t}\r\n    \t\r\n    \t@ManyToOne(fetch=FetchType.LAZY)\r\n    \t@JoinColumn(name=&quot;COMPANY_ID&quot;)\r\n    \tpublic Company getCompany() {\r\n    \t\treturn company;\r\n    \t}\r\n    \t\r\n    \tpublic void setCompany(Company company) {\r\n    \t\tthis.company = company;\r\n    \t}\r\n    \t\r\n    \t\r\n    }","title":"JPA JoinColumn vs mappedBy","body":"<p>The annotation <strong>mappedBy</strong> ideally should always be used in the Parent side (Company class) of the bi directional relationship, in this case it should be in Company class pointing to the member variable 'company' of the Child class (Branch class) </p>\n\n<p>The annotation <strong>@JoinColumn</strong> is used to specify a mapped column for joining an entity association, this annotation can be used in any class (Parent or Child) but it should ideally be used only in one side (either in parent class or in Child class not in both) here in this case i used it in the Child side (Branch class) of the bi directional relationship indicating the foreign key in the Branch class.</p>\n\n<p>below is the working example :</p>\n\n<p><strong>parent class , Company</strong></p>\n\n<pre><code>@Entity\npublic class Company {\n\n\n    private int companyId;\n    private String companyName;\n    private List&lt;Branch&gt; branches;\n\n    @Id\n    @GeneratedValue\n    @Column(name=\"COMPANY_ID\")\n    public int getCompanyId() {\n        return companyId;\n    }\n\n    public void setCompanyId(int companyId) {\n        this.companyId = companyId;\n    }\n\n    @Column(name=\"COMPANY_NAME\")\n    public String getCompanyName() {\n        return companyName;\n    }\n\n    public void setCompanyName(String companyName) {\n        this.companyName = companyName;\n    }\n\n    @OneToMany(fetch=FetchType.LAZY,cascade=CascadeType.ALL,mappedBy=\"company\")\n    public List&lt;Branch&gt; getBranches() {\n        return branches;\n    }\n\n    public void setBranches(List&lt;Branch&gt; branches) {\n        this.branches = branches;\n    }\n\n\n}\n</code></pre>\n\n<p><strong>child class, Branch</strong></p>\n\n<pre><code>@Entity\npublic class Branch {\n\n    private int branchId;\n    private String branchName;\n    private Company company;\n\n    @Id\n    @GeneratedValue\n    @Column(name=\"BRANCH_ID\")\n    public int getBranchId() {\n        return branchId;\n    }\n\n    public void setBranchId(int branchId) {\n        this.branchId = branchId;\n    }\n\n    @Column(name=\"BRANCH_NAME\")\n    public String getBranchName() {\n        return branchName;\n    }\n\n    public void setBranchName(String branchName) {\n        this.branchName = branchName;\n    }\n\n    @ManyToOne(fetch=FetchType.LAZY)\n    @JoinColumn(name=\"COMPANY_ID\")\n    public Company getCompany() {\n        return company;\n    }\n\n    public void setCompany(Company company) {\n        this.company = company;\n    }\n\n\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":159083,"reputation":15549,"user_id":378151,"accept_rate":74,"display_name":"Snekse"},"down_vote_count":0,"up_vote_count":21,"is_accepted":false,"score":21,"last_activity_date":1441984363,"creation_date":1441984363,"answer_id":32526725,"question_id":11938253,"body_markdown":"I&#39;d just like to add that `@JoinColumn` does not always have to be related to the *physical information location* as [this][1] answer suggests.  You can combine `@JoinColumn` with `@OneToMany` even if the parent table has no table data pointing to the child table.\r\n\r\n**[How to define unidirectional OneToMany relationship in JPA][2]**\r\n\r\n**[Unidirectional OneToMany, No Inverse ManyToOne, No Join Table][3]**\r\n\r\nIt seems to only be available in `JPA 2.x+` though.  It&#39;s useful for situations where you want the child class to just contain the ID of the parent, not a full on reference.\r\n\r\n  [1]: https://stackoverflow.com/a/11939045/378151\r\n  [2]: https://stackoverflow.com/a/12041879/378151\r\n  [3]: https://en.wikibooks.org/wiki/Java_Persistence/OneToMany#Unidirectional_OneToMany.2C_No_Inverse_ManyToOne.2C_No_Join_Table_.28JPA_2.0_ONLY.29","title":"JPA JoinColumn vs mappedBy","body":"<p>I'd just like to add that <code>@JoinColumn</code> does not always have to be related to the <em>physical information location</em> as <a href=\"https://stackoverflow.com/a/11939045/378151\">this</a> answer suggests.  You can combine <code>@JoinColumn</code> with <code>@OneToMany</code> even if the parent table has no table data pointing to the child table.</p>\n\n<p><strong><a href=\"https://stackoverflow.com/a/12041879/378151\">How to define unidirectional OneToMany relationship in JPA</a></strong></p>\n\n<p><strong><a href=\"https://en.wikibooks.org/wiki/Java_Persistence/OneToMany#Unidirectional_OneToMany.2C_No_Inverse_ManyToOne.2C_No_Join_Table_.28JPA_2.0_ONLY.29\" rel=\"noreferrer\">Unidirectional OneToMany, No Inverse ManyToOne, No Join Table</a></strong></p>\n\n<p>It seems to only be available in <code>JPA 2.x+</code> though.  It's useful for situations where you want the child class to just contain the ID of the parent, not a full on reference.</p>\n"},{"tags":[],"owner":{"account_id":1012936,"reputation":145158,"user_id":1025118,"accept_rate":100,"display_name":"Vlad Mihalcea"},"down_vote_count":0,"up_vote_count":147,"is_accepted":false,"score":147,"last_activity_date":1610139753,"creation_date":1530078903,"answer_id":51055434,"question_id":11938253,"body_markdown":"Unidirectional one-to-many association\r\n--------------------------------------\r\n\r\nIf you use the `@OneToMany` annotation with `@JoinColumn`, then you have a unidirectional association, like the one between the parent `Post` entity and the child `PostComment` in the following diagram:\r\n\r\n[![Unidirectional one-to-many association][2]][2]\r\n\r\nWhen using a unidirectional one-to-many association, only the parent side maps the association.\r\n\r\nIn this example, only the `Post` entity will define a `@OneToMany` association to the child `PostComment` entity:\r\n\r\n    @OneToMany(cascade = CascadeType.ALL, orphanRemoval = true)\r\n    @JoinColumn(name = &quot;post_id&quot;)\r\n    private List&lt;PostComment&gt; comments = new ArrayList&lt;&gt;();\r\n\r\nBidirectional one-to-many association\r\n-------------------------------------\r\n\r\nIf you use the `@OneToMany` with the `mappedBy` attribute set, you have a bidirectional association. In our case, both the `Post` entity has a collection of `PostComment` child entities, and the child `PostComment` entity has a reference back to the parent `Post` entity, as illustrated by the following diagram:\r\n\r\n[![Bidirectional one-to-many association][3]][3]\r\n\r\nIn the `PostComment` entity, the `post` entity property is mapped as follows:\r\n\r\n    @ManyToOne(fetch = FetchType.LAZY)\r\n    private Post post;\r\n\r\n&gt; The reason we explicitly set the `fetch` attribute to `FetchType.LAZY` is because, by default, all `@ManyToOne` and `@OneToOne` associations are fetched eagerly, which can cause N+1 query issues.\r\n\r\nIn the `Post` entity, the `comments` association is mapped as follows:\r\n\r\n    @OneToMany(\r\n        mappedBy = &quot;post&quot;,\r\n        cascade = CascadeType.ALL,\r\n        orphanRemoval = true\r\n    )\r\n    private List&lt;PostComment&gt; comments = new ArrayList&lt;&gt;();\r\n \r\nThe `mappedBy` attribute of the `@OneToMany` annotation references the `post` property in the child `PostComment` entity, and, this way, Hibernate knows that the bidirectional association is controlled by the `@ManyToOne` side, which is in charge of managing the Foreign Key column value this table relationship is based on.\r\n\r\nFor a bidirectional association, you also need to have two utility methods, like `addChild` and `removeChild`:\r\n\r\n    public void addComment(PostComment comment) {\r\n        comments.add(comment);\r\n        comment.setPost(this);\r\n    }\r\n \r\n    public void removeComment(PostComment comment) {\r\n        comments.remove(comment);\r\n        comment.setPost(null);\r\n    }\r\n\r\nThese two methods ensure that both sides of the bidirectional association are in sync. Without synchronizing both ends, Hibernate does not guarantee that association state changes will propagate to the database.\r\n\r\nWhich one to choose?\r\n--------------------\r\n\r\nThe unidirectional `@OneToMany` association does not perform very well, so you should avoid it.\r\n\r\nYou are better off using the bidirectional `@OneToMany` which is more efficient.\r\n\r\n  [2]: https://i.stack.imgur.com/ljaHg.png\r\n  [3]: https://i.stack.imgur.com/i5YWM.png","title":"JPA JoinColumn vs mappedBy","body":"<h2>Unidirectional one-to-many association</h2>\n<p>If you use the <code>@OneToMany</code> annotation with <code>@JoinColumn</code>, then you have a unidirectional association, like the one between the parent <code>Post</code> entity and the child <code>PostComment</code> in the following diagram:</p>\n<p><a href=\"https://i.stack.imgur.com/ljaHg.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/ljaHg.png\" alt=\"Unidirectional one-to-many association\" /></a></p>\n<p>When using a unidirectional one-to-many association, only the parent side maps the association.</p>\n<p>In this example, only the <code>Post</code> entity will define a <code>@OneToMany</code> association to the child <code>PostComment</code> entity:</p>\n<pre><code>@OneToMany(cascade = CascadeType.ALL, orphanRemoval = true)\n@JoinColumn(name = &quot;post_id&quot;)\nprivate List&lt;PostComment&gt; comments = new ArrayList&lt;&gt;();\n</code></pre>\n<h2>Bidirectional one-to-many association</h2>\n<p>If you use the <code>@OneToMany</code> with the <code>mappedBy</code> attribute set, you have a bidirectional association. In our case, both the <code>Post</code> entity has a collection of <code>PostComment</code> child entities, and the child <code>PostComment</code> entity has a reference back to the parent <code>Post</code> entity, as illustrated by the following diagram:</p>\n<p><a href=\"https://i.stack.imgur.com/i5YWM.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/i5YWM.png\" alt=\"Bidirectional one-to-many association\" /></a></p>\n<p>In the <code>PostComment</code> entity, the <code>post</code> entity property is mapped as follows:</p>\n<pre><code>@ManyToOne(fetch = FetchType.LAZY)\nprivate Post post;\n</code></pre>\n<blockquote>\n<p>The reason we explicitly set the <code>fetch</code> attribute to <code>FetchType.LAZY</code> is because, by default, all <code>@ManyToOne</code> and <code>@OneToOne</code> associations are fetched eagerly, which can cause N+1 query issues.</p>\n</blockquote>\n<p>In the <code>Post</code> entity, the <code>comments</code> association is mapped as follows:</p>\n<pre><code>@OneToMany(\n    mappedBy = &quot;post&quot;,\n    cascade = CascadeType.ALL,\n    orphanRemoval = true\n)\nprivate List&lt;PostComment&gt; comments = new ArrayList&lt;&gt;();\n</code></pre>\n<p>The <code>mappedBy</code> attribute of the <code>@OneToMany</code> annotation references the <code>post</code> property in the child <code>PostComment</code> entity, and, this way, Hibernate knows that the bidirectional association is controlled by the <code>@ManyToOne</code> side, which is in charge of managing the Foreign Key column value this table relationship is based on.</p>\n<p>For a bidirectional association, you also need to have two utility methods, like <code>addChild</code> and <code>removeChild</code>:</p>\n<pre><code>public void addComment(PostComment comment) {\n    comments.add(comment);\n    comment.setPost(this);\n}\n\npublic void removeComment(PostComment comment) {\n    comments.remove(comment);\n    comment.setPost(null);\n}\n</code></pre>\n<p>These two methods ensure that both sides of the bidirectional association are in sync. Without synchronizing both ends, Hibernate does not guarantee that association state changes will propagate to the database.</p>\n<h2>Which one to choose?</h2>\n<p>The unidirectional <code>@OneToMany</code> association does not perform very well, so you should avoid it.</p>\n<p>You are better off using the bidirectional <code>@OneToMany</code> which is more efficient.</p>\n"},{"tags":[],"owner":{"account_id":2986790,"reputation":2364,"user_id":5618307,"display_name":"IqbalHamid"},"down_vote_count":0,"up_vote_count":46,"is_accepted":false,"score":46,"last_activity_date":1546307802,"creation_date":1546239802,"answer_id":53984572,"question_id":11938253,"body_markdown":"I disagree with the accepted answer here by &#211;scar L&#243;pez. That answer is inaccurate!  \r\n\r\nIt is NOT `@JoinColumn` which indicates that this entity is the owner of the relationship.  Instead, it is the `@ManyToOne` annotation which does this (in his example).\r\n\r\nThe relationship annotations such as `@ManyToOne`, `@OneToMany` and `@ManyToMany` tell JPA/Hibernate to **create a mapping.**  By default, this is done through a seperate Join Table.\r\n\r\n&lt;br&gt;\r\n**@JoinColumn**\r\n&lt;br&gt;\r\n\r\n&gt; The purpose of `@JoinColumn` is to create a *join column* if one does\r\n&gt; not already exist.  If it does, then this annotation can be used to\r\n&gt; *name* the join column.\r\n\r\n \r\n&lt;br&gt;\r\n**MappedBy**\r\n&lt;br&gt;\r\n\r\n&gt; The purpose of the `MappedBy` parameter is to instruct JPA: Do NOT\r\n&gt; create another join table as the relationship is already being mapped\r\n&gt; by the *opposite* entity of this relationship.  \r\n\r\n&lt;br&gt;\r\n&lt;br&gt;\r\nRemember:  `MappedBy` is a property of the relationship annotations whose purpose is to generate a mechanism to relate two entities which by default they do by creating a join table.  `MappedBy` halts that process in one direction.\r\n\r\nThe entity not using `MappedBy` is said to be the *owner* of the relationship because the mechanics of the mapping are dictated within its class through the use of one of the three mapping annotations against the foreign key field.  This not only specifies the nature of the mapping but also instructs the creation of a join table.  Furthermore, the option to suppress the join table also exists by applying @JoinColumn annotation over the foreign key which keeps it inside the table of the owner entity instead.\r\n\r\nSo in summary: `@JoinColumn` either creates a new join column or renames an existing one; whilst the `MappedBy` parameter works collaboratively with the relationship annotations of the other (child) class in order to create a mapping either through a join table or by creating a foreign key column in the associated table of the owner entity.\r\n\r\n\r\nTo illustrate how `MapppedBy` works, consider the code below.  If `MappedBy` parameter were to be deleted, then Hibernate would actually create TWO join tables!  Why?  Because there is a symmetry in many-to-many relationships and Hibernate has no rationale for selecting one direction over the other.\r\n\r\nWe therefore use `MappedBy` to tell Hibernate, we have chosen ***the other*** entity to dictate the mapping of the relationship between the two entities.\r\n\r\n\r\n    @Entity\r\n    public class Driver {\r\n        @ManyToMany(mappedBy = &quot;drivers&quot;)\r\n        private List&lt;Cars&gt; cars;\r\n    }\r\n    \r\n    @Entity\r\n    public class Cars {\r\n        @ManyToMany\r\n        private List&lt;Drivers&gt; drivers;\r\n    }\r\n\r\n\r\nAdding @JoinColumn(name = &quot;driverID&quot;) in the owner class (see below), will prevent the creation of a join table and instead, create a driverID foreign key column in the Cars table to construct a mapping:\r\n\r\n\r\n    @Entity\r\n    public class Driver {\r\n        @ManyToMany(mappedBy = &quot;drivers&quot;)\r\n        private List&lt;Cars&gt; cars;\r\n    }\r\n    \r\n    @Entity\r\n    public class Cars {\r\n        @ManyToMany\r\n        @JoinColumn(name = &quot;driverID&quot;)\r\n        private List&lt;Drivers&gt; drivers;\r\n    }\r\n\r\n","title":"JPA JoinColumn vs mappedBy","body":"<p>I disagree with the accepted answer here by scar Lpez. That answer is inaccurate!  </p>\n\n<p>It is NOT <code>@JoinColumn</code> which indicates that this entity is the owner of the relationship.  Instead, it is the <code>@ManyToOne</code> annotation which does this (in his example).</p>\n\n<p>The relationship annotations such as <code>@ManyToOne</code>, <code>@OneToMany</code> and <code>@ManyToMany</code> tell JPA/Hibernate to <strong>create a mapping.</strong>  By default, this is done through a seperate Join Table.</p>\n\n<p><br>\n<strong>@JoinColumn</strong>\n<br></p>\n\n<blockquote>\n  <p>The purpose of <code>@JoinColumn</code> is to create a <em>join column</em> if one does\n  not already exist.  If it does, then this annotation can be used to\n  <em>name</em> the join column.</p>\n</blockquote>\n\n<p><br>\n<strong>MappedBy</strong>\n<br></p>\n\n<blockquote>\n  <p>The purpose of the <code>MappedBy</code> parameter is to instruct JPA: Do NOT\n  create another join table as the relationship is already being mapped\n  by the <em>opposite</em> entity of this relationship.  </p>\n</blockquote>\n\n<p><br>\n<br>\nRemember:  <code>MappedBy</code> is a property of the relationship annotations whose purpose is to generate a mechanism to relate two entities which by default they do by creating a join table.  <code>MappedBy</code> halts that process in one direction.</p>\n\n<p>The entity not using <code>MappedBy</code> is said to be the <em>owner</em> of the relationship because the mechanics of the mapping are dictated within its class through the use of one of the three mapping annotations against the foreign key field.  This not only specifies the nature of the mapping but also instructs the creation of a join table.  Furthermore, the option to suppress the join table also exists by applying @JoinColumn annotation over the foreign key which keeps it inside the table of the owner entity instead.</p>\n\n<p>So in summary: <code>@JoinColumn</code> either creates a new join column or renames an existing one; whilst the <code>MappedBy</code> parameter works collaboratively with the relationship annotations of the other (child) class in order to create a mapping either through a join table or by creating a foreign key column in the associated table of the owner entity.</p>\n\n<p>To illustrate how <code>MapppedBy</code> works, consider the code below.  If <code>MappedBy</code> parameter were to be deleted, then Hibernate would actually create TWO join tables!  Why?  Because there is a symmetry in many-to-many relationships and Hibernate has no rationale for selecting one direction over the other.</p>\n\n<p>We therefore use <code>MappedBy</code> to tell Hibernate, we have chosen <strong><em>the other</em></strong> entity to dictate the mapping of the relationship between the two entities.</p>\n\n<pre><code>@Entity\npublic class Driver {\n    @ManyToMany(mappedBy = \"drivers\")\n    private List&lt;Cars&gt; cars;\n}\n\n@Entity\npublic class Cars {\n    @ManyToMany\n    private List&lt;Drivers&gt; drivers;\n}\n</code></pre>\n\n<p>Adding @JoinColumn(name = \"driverID\") in the owner class (see below), will prevent the creation of a join table and instead, create a driverID foreign key column in the Cars table to construct a mapping:</p>\n\n<pre><code>@Entity\npublic class Driver {\n    @ManyToMany(mappedBy = \"drivers\")\n    private List&lt;Cars&gt; cars;\n}\n\n@Entity\npublic class Cars {\n    @ManyToMany\n    @JoinColumn(name = \"driverID\")\n    private List&lt;Drivers&gt; drivers;\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3396,"reputation":7487,"user_id":4900,"accept_rate":83,"display_name":"Bruno Ranschaert"},"down_vote_count":1,"up_vote_count":2,"is_accepted":false,"score":1,"last_activity_date":1582706964,"creation_date":1558353490,"answer_id":56220578,"question_id":11938253,"body_markdown":"JPA is a layered API, the different levels have their own annotations. The highest level is the (1) Entity level which describes persistent classes then you have the (2) relational database level which assume the entities are mapped to a relational database and (3) the java model.\r\n\r\nLevel 1 annotations: `@Entity`, `@Id`, `@OneToOne`, `@OneToMany`, `@ManyToOne`, `@ManyToMany`.\r\nYou can introduce persistency in your application using these high level annotations alone. But then you have to create your database according to the assumptions JPA makes. These annotations specify the entity/relationship model.\r\n\r\nLevel 2 annotations: `@Table`, `@Column`, `@JoinColumn`, ...\r\nInfluence the mapping from entities/properties to the relational database tables/columns if you are not satisfied with JPA&#39;s defaults or if you need to map to an existing database. These annotations can be seen as implementation annotations, they specify how the mapping should be done.\r\n\r\nIn my opinion it is best to stick as much as possible to the high level annotations and then introduce the lower level annotations as needed.\r\n\r\nTo answer the questions: the `@OneToMany`/`mappedBy` is nicest because it only uses the annotations from the entity domain. The `@oneToMany`/`@JoinColumn` is also fine but it uses an implementation annotation where this is not strictly necessary.","title":"JPA JoinColumn vs mappedBy","body":"<p>JPA is a layered API, the different levels have their own annotations. The highest level is the (1) Entity level which describes persistent classes then you have the (2) relational database level which assume the entities are mapped to a relational database and (3) the java model.</p>\n\n<p>Level 1 annotations: <code>@Entity</code>, <code>@Id</code>, <code>@OneToOne</code>, <code>@OneToMany</code>, <code>@ManyToOne</code>, <code>@ManyToMany</code>.\nYou can introduce persistency in your application using these high level annotations alone. But then you have to create your database according to the assumptions JPA makes. These annotations specify the entity/relationship model.</p>\n\n<p>Level 2 annotations: <code>@Table</code>, <code>@Column</code>, <code>@JoinColumn</code>, ...\nInfluence the mapping from entities/properties to the relational database tables/columns if you are not satisfied with JPA's defaults or if you need to map to an existing database. These annotations can be seen as implementation annotations, they specify how the mapping should be done.</p>\n\n<p>In my opinion it is best to stick as much as possible to the high level annotations and then introduce the lower level annotations as needed.</p>\n\n<p>To answer the questions: the <code>@OneToMany</code>/<code>mappedBy</code> is nicest because it only uses the annotations from the entity domain. The <code>@oneToMany</code>/<code>@JoinColumn</code> is also fine but it uses an implementation annotation where this is not strictly necessary.</p>\n"},{"tags":[],"owner":{"account_id":10460334,"reputation":89,"user_id":7711299,"display_name":"Vinjamuri Satya Krishna"},"down_vote_count":1,"up_vote_count":6,"is_accepted":false,"score":5,"last_activity_date":1688179497,"creation_date":1589702025,"answer_id":61848608,"question_id":11938253,"body_markdown":"Let me make it simple. &lt;br/&gt;\r\nYou can use **@JoinColumn** on either sides irrespective of mapping. &lt;br/&gt;\r\n\r\nLet&#39;s divide this into three cases.&lt;br/&gt;\r\n1. Uni-directional mapping from Branch to Company.&lt;br/&gt;\r\n2. Bi-direction mapping from Company to Branch.&lt;br/&gt;\r\n3. Only Uni-directional mapping from Company to Branch.&lt;br/&gt;\r\n\r\nSo any use-case will fall under this three categories. So let me explain how to use **@JoinColumn** and **mappedBy**.&lt;br/&gt;\r\n1. Uni-directional mapping from Branch to Company.&lt;br/&gt;\r\nUse **JoinColumn** in Branch table.&lt;br/&gt;\r\n2. Bi-direction mapping from Company to Branch.&lt;br/&gt;\r\nUse **mappedBy** in Company table as describe by @Mykhaylo Adamovych&#39;s answer.&lt;br/&gt;\r\n3. Uni-directional mapping from Company to Branch.&lt;br/&gt;\r\nJust use **@JoinColumn** in Company table.\r\n\r\n       @Entity\r\n       public class Company {\r\n\r\n       @OneToMany(cascade = CascadeType.ALL , fetch = FetchType.LAZY)\r\n       @JoinColumn(name=&quot;courseId&quot;)\r\n       private List&lt;Branch&gt; branches;\r\n       ...\r\n       }\r\n\r\nThis says that in based on the foreign key &quot;courseId&quot; mapping in branches table, get me list of all branches. NOTE: you can&#39;t fetch company from branch in this case, only uni-directional mapping exist from company to branch.","title":"JPA JoinColumn vs mappedBy","body":"<p>Let me make it simple. <br/>\nYou can use <strong>@JoinColumn</strong> on either sides irrespective of mapping. <br/></p>\n<p>Let's divide this into three cases.<br/></p>\n<ol>\n<li>Uni-directional mapping from Branch to Company.<br/></li>\n<li>Bi-direction mapping from Company to Branch.<br/></li>\n<li>Only Uni-directional mapping from Company to Branch.<br/></li>\n</ol>\n<p>So any use-case will fall under this three categories. So let me explain how to use <strong>@JoinColumn</strong> and <strong>mappedBy</strong>.<br/></p>\n<ol>\n<li><p>Uni-directional mapping from Branch to Company.<br/>\nUse <strong>JoinColumn</strong> in Branch table.<br/></p>\n</li>\n<li><p>Bi-direction mapping from Company to Branch.<br/>\nUse <strong>mappedBy</strong> in Company table as describe by @Mykhaylo Adamovych's answer.<br/></p>\n</li>\n<li><p>Uni-directional mapping from Company to Branch.<br/>\nJust use <strong>@JoinColumn</strong> in Company table.</p>\n<pre><code>@Entity\npublic class Company {\n\n@OneToMany(cascade = CascadeType.ALL , fetch = FetchType.LAZY)\n@JoinColumn(name=&quot;courseId&quot;)\nprivate List&lt;Branch&gt; branches;\n...\n}\n</code></pre>\n</li>\n</ol>\n<p>This says that in based on the foreign key &quot;courseId&quot; mapping in branches table, get me list of all branches. NOTE: you can't fetch company from branch in this case, only uni-directional mapping exist from company to branch.</p>\n"},{"tags":[],"owner":{"account_id":8396193,"reputation":71,"user_id":13547476,"display_name":"Chaman Jain"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1663085799,"creation_date":1663085799,"answer_id":73706266,"question_id":11938253,"body_markdown":"    @Entity\r\n    public class Company {\r\n      \r\n     @OneToMany(cascade = CascadeType.ALL, fetch = FetchType.LAZY)\r\n\t @JoinColumn(name = &quot;company_id_ref&quot;, referencedColumnName = &quot;company_id&quot;)\r\n\t private List&lt;Branch&gt; branches;\r\n      ...\r\n    }\r\n\r\nThat Will give below Hibernate logs\r\n\r\n    Hibernate: select nextval (&#39;hibernate_sequence&#39;)\r\n    Hibernate: select nextval (&#39;hibernate_sequence&#39;)\r\n    Hibernate: insert into company (name, company_id) values (?, ?)\r\n    Hibernate: insert into branch (company_id_ref, name, id) values (?, ?, ?)\r\n    Hibernate: update branch set company_id_ref=? where id=?\r\n\r\nAnd\r\n\r\n    @Entity\r\n    public class Company {\r\n      \r\n \t @OneToMany(cascade = CascadeType.ALL , fetch = FetchType.LAZY, \r\n\t\t\t    mappedBy = &quot;company&quot;)\r\n\t private List&lt;Branch&gt; branches;\r\n      ...\r\n    }\r\n\r\n\r\nThat will give below Hibernate logs\r\n\r\n    Hibernate: select nextval (&#39;hibernate_sequence&#39;)\r\n    Hibernate: select nextval (&#39;hibernate_sequence&#39;)\r\n    Hibernate: insert into company (name, company_id) values (?, ?)\r\n    Hibernate: insert into branch (company_id_ref, name, id) values (?, ?, ?)\r\n\r\nWe can clearly see that `@joinColumn` will cause additional update queries.\r\nso you do not need to set parent entity explicitly to child entity,\r\nThat we have to do while using `mappedBy`\r\nto save children with a parent \r\n\r\n\r\n","title":"JPA JoinColumn vs mappedBy","body":"<pre><code>@Entity\npublic class Company {\n  \n @OneToMany(cascade = CascadeType.ALL, fetch = FetchType.LAZY)\n @JoinColumn(name = &quot;company_id_ref&quot;, referencedColumnName = &quot;company_id&quot;)\n private List&lt;Branch&gt; branches;\n  ...\n}\n</code></pre>\n<p>That Will give below Hibernate logs</p>\n<pre><code>Hibernate: select nextval ('hibernate_sequence')\nHibernate: select nextval ('hibernate_sequence')\nHibernate: insert into company (name, company_id) values (?, ?)\nHibernate: insert into branch (company_id_ref, name, id) values (?, ?, ?)\nHibernate: update branch set company_id_ref=? where id=?\n</code></pre>\n<p>And</p>\n<pre><code>@Entity\npublic class Company {\n  \n @OneToMany(cascade = CascadeType.ALL , fetch = FetchType.LAZY, \n            mappedBy = &quot;company&quot;)\n private List&lt;Branch&gt; branches;\n  ...\n}\n</code></pre>\n<p>That will give below Hibernate logs</p>\n<pre><code>Hibernate: select nextval ('hibernate_sequence')\nHibernate: select nextval ('hibernate_sequence')\nHibernate: insert into company (name, company_id) values (?, ?)\nHibernate: insert into branch (company_id_ref, name, id) values (?, ?, ?)\n</code></pre>\n<p>We can clearly see that <code>@joinColumn</code> will cause additional update queries.\nso you do not need to set parent entity explicitly to child entity,\nThat we have to do while using <code>mappedBy</code>\nto save children with a parent</p>\n"}],"owner":{"account_id":201558,"reputation":20189,"user_id":448078,"accept_rate":61,"display_name":"Mike"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":610626,"favorite_count":0,"down_vote_count":1,"up_vote_count":631,"accepted_answer_id":11939045,"answer_count":9,"score":630,"last_activity_date":1699346277,"creation_date":1344874649,"question_id":11938253,"body_markdown":"What is the difference between:\r\n\r\n\t@Entity\r\n\tpublic class Company {\r\n\r\n\t\t@OneToMany(cascade = CascadeType.ALL , fetch = FetchType.LAZY)\r\n\t\t@JoinColumn(name = &quot;companyIdRef&quot;, referencedColumnName = &quot;companyId&quot;)\r\n\t\tprivate List&lt;Branch&gt; branches;\r\n\t\t...\r\n\t}\r\n\r\nand \r\n\t\r\n\t\r\n\r\n    @Entity\r\n    public class Company {\r\n    \r\n    \t@OneToMany(cascade = CascadeType.ALL , fetch = FetchType.LAZY, \r\n        mappedBy = &quot;companyIdRef&quot;)\r\n    \tprivate List&lt;Branch&gt; branches;\r\n    \t...\r\n    }","title":"JPA JoinColumn vs mappedBy","body":"<p>What is the difference between:</p>\n<pre><code>@Entity\npublic class Company {\n\n    @OneToMany(cascade = CascadeType.ALL , fetch = FetchType.LAZY)\n    @JoinColumn(name = &quot;companyIdRef&quot;, referencedColumnName = &quot;companyId&quot;)\n    private List&lt;Branch&gt; branches;\n    ...\n}\n</code></pre>\n<p>and</p>\n<pre><code>@Entity\npublic class Company {\n\n    @OneToMany(cascade = CascadeType.ALL , fetch = FetchType.LAZY, \n    mappedBy = &quot;companyIdRef&quot;)\n    private List&lt;Branch&gt; branches;\n    ...\n}\n</code></pre>\n"},{"tags":["java","android","kotlin","google-play"],"owner":{"account_id":7740347,"reputation":452,"user_id":5860352,"display_name":"Doron Ben-Ari"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":16,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1699345982,"creation_date":1699345982,"question_id":77436617,"body_markdown":"Google&#39;s guide explains how to apply [Google Play In-App Reviews API][1]. &lt;br&gt;\r\nIt mentions that\r\n\r\n&gt; calling the launchReviewFlow method more than once during a short period of time (for example, less than a month) might not always display a dialog.\r\n\r\nBut I did not find in the guide nor in the [ReviewManager][2] class documentation anything about what happens if a user has already rated the app.&lt;br&gt;\r\nI would not like to bother the users with asking to rate after they already did. Moreover, doing so might make them change a positive review to negative.&lt;br&gt;\r\nIt makes sense that the API would not display the dialog to users that already rated the app. Moreover, I do not know of any way for the app to check if it was already rated. &lt;br&gt;\r\nBut I have not found anywhere where this is said.\r\n\r\n  [1]: https://developer.android.com/guide/playcore/in-app-review\r\n  [2]: https://developer.android.com/reference/com/google/android/play/core/review/ReviewManager","title":"Does ReviewManager&#39;s launchReviewFlow() display the dialog for users that already rated the app?","body":"<p>Google's guide explains how to apply <a href=\"https://developer.android.com/guide/playcore/in-app-review\" rel=\"nofollow noreferrer\">Google Play In-App Reviews API</a>. <br>\nIt mentions that</p>\n<blockquote>\n<p>calling the launchReviewFlow method more than once during a short period of time (for example, less than a month) might not always display a dialog.</p>\n</blockquote>\n<p>But I did not find in the guide nor in the <a href=\"https://developer.android.com/reference/com/google/android/play/core/review/ReviewManager\" rel=\"nofollow noreferrer\">ReviewManager</a> class documentation anything about what happens if a user has already rated the app.<br>\nI would not like to bother the users with asking to rate after they already did. Moreover, doing so might make them change a positive review to negative.<br>\nIt makes sense that the API would not display the dialog to users that already rated the app. Moreover, I do not know of any way for the app to check if it was already rated. <br>\nBut I have not found anywhere where this is said.</p>\n"},{"tags":["java","openapi","openapi-generator","swagger-codegen"],"answers":[{"tags":[],"owner":{"account_id":12687121,"reputation":1,"user_id":9218515,"display_name":"Akash K"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1699345589,"creation_date":1699345589,"answer_id":77436576,"question_id":76683046,"body_markdown":"I was able to solve the similar issue with the below steps - \r\n\r\n 1. Add adapter in the template file - [JSON.mustache](https://github.com/OpenAPITools/openapi-generator/blob/master/modules/openapi-generator/src/main/resources/Java/JSON.mustache)\r\n\r\n 2. Define JSON.mustache template directory path in the Open API maven plugin.\r\n\r\n ```\r\n...\r\n&lt;typeMappings&gt;\r\n    &lt;typeMapping&gt;OffsetDateTime=java.time.LocalDateTime&lt;/typeMapping&gt;\r\n&lt;/typeMappings&gt;\r\n&lt;importMappings&gt;\r\n    &lt;importMapping&gt;java.time.OffsetDateTime=java.time.LocalDateTime&lt;/importMapping&gt;\r\n &lt;/importMappings&gt;\r\n &lt;templateDirectory&gt;${project.basedir}/src/main/resources/templates&lt;/templateDirectory&gt;\r\n&lt;/configuration&gt;\r\n ```\r\n\r\n","title":"How to include self-defined adapters in JSON class when using OpenAPI","body":"<p>I was able to solve the similar issue with the below steps -</p>\n<ol>\n<li><p>Add adapter in the template file - <a href=\"https://github.com/OpenAPITools/openapi-generator/blob/master/modules/openapi-generator/src/main/resources/Java/JSON.mustache\" rel=\"nofollow noreferrer\">JSON.mustache</a></p>\n</li>\n<li><p>Define JSON.mustache template directory path in the Open API maven plugin.</p>\n</li>\n</ol>\n<pre><code>...\n&lt;typeMappings&gt;\n   &lt;typeMapping&gt;OffsetDateTime=java.time.LocalDateTime&lt;/typeMapping&gt;\n&lt;/typeMappings&gt;\n&lt;importMappings&gt;\n   &lt;importMapping&gt;java.time.OffsetDateTime=java.time.LocalDateTime&lt;/importMapping&gt;\n&lt;/importMappings&gt;\n&lt;templateDirectory&gt;${project.basedir}/src/main/resources/templates&lt;/templateDirectory&gt;\n&lt;/configuration&gt;\n</code></pre>\n"}],"owner":{"account_id":13636761,"reputation":149,"user_id":9837596,"display_name":"Fan Zhang"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":119,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1699345589,"creation_date":1689280286,"question_id":76683046,"body_markdown":"I am using OpenAPI to generate clients. I defined my own type adapters to do customized serialization/deserialization and imported/registered them in JSON.java class. But every time I run the generation, the lines of importing and registering self-defined type adapters get removed from JSON.java. I am wondering why and how I can avoid this. Thanks!\r\n\r\nHere is the diff:\r\n```\r\n import com.google.gson.stream.JsonReader;\r\n import com.google.gson.stream.JsonWriter;\r\n import com.google.gson.JsonElement;\r\n-import com.salesforce.sds.kms.client.Serialization.EkmAdapter; // DO NOT REMOVE\r\n-import com.salesforce.sds.kms.client.Serialization.EkmSpecAdapter; // DO NOT REMOVE\r\n import io.gsonfire.GsonFireBuilder;\r\n import io.gsonfire.TypeSelector;\r\n \r\n@@ -51,8 +49,6 @@ public class JSON {\r\n     private OffsetDateTimeTypeAdapter offsetDateTimeTypeAdapter = new OffsetDateTimeTypeAdapter();\r\n     private LocalDateTypeAdapter localDateTypeAdapter = new LocalDateTypeAdapter();\r\n     private ByteArrayAdapter byteArrayAdapter = new ByteArrayAdapter();\r\n-    private EkmSpecAdapter ekmSpecAdapter = new EkmSpecAdapter(); //DO NOT REMOVE\r\n-    private EkmAdapter ekmAdapter = new EkmAdapter(); //DO NOT REMOVE\r\n \r\n     public static GsonBuilder createGson() {\r\n         GsonFireBuilder fireBuilder = new GsonFireBuilder()\r\n@@ -104,8 +100,6 @@ public class JSON {\r\n             .registerTypeAdapter(OffsetDateTime.class, offsetDateTimeTypeAdapter)\r\n             .registerTypeAdapter(LocalDate.class, localDateTypeAdapter)\r\n             .registerTypeAdapter(byte[].class, byteArrayAdapter)\r\n-            .registerTypeAdapter(EkmSpec.class,ekmSpecAdapter) //DO NOT REMOVE. This is custom serialization\r\n-            .registerTypeAdapter(Ekm.class,ekmAdapter) //DO NOT REMOVE. This is custom serialization\r\n             .create();\r\n     }\r\n```","title":"How to include self-defined adapters in JSON class when using OpenAPI","body":"<p>I am using OpenAPI to generate clients. I defined my own type adapters to do customized serialization/deserialization and imported/registered them in JSON.java class. But every time I run the generation, the lines of importing and registering self-defined type adapters get removed from JSON.java. I am wondering why and how I can avoid this. Thanks!</p>\n<p>Here is the diff:</p>\n<pre><code> import com.google.gson.stream.JsonReader;\n import com.google.gson.stream.JsonWriter;\n import com.google.gson.JsonElement;\n-import com.salesforce.sds.kms.client.Serialization.EkmAdapter; // DO NOT REMOVE\n-import com.salesforce.sds.kms.client.Serialization.EkmSpecAdapter; // DO NOT REMOVE\n import io.gsonfire.GsonFireBuilder;\n import io.gsonfire.TypeSelector;\n \n@@ -51,8 +49,6 @@ public class JSON {\n     private OffsetDateTimeTypeAdapter offsetDateTimeTypeAdapter = new OffsetDateTimeTypeAdapter();\n     private LocalDateTypeAdapter localDateTypeAdapter = new LocalDateTypeAdapter();\n     private ByteArrayAdapter byteArrayAdapter = new ByteArrayAdapter();\n-    private EkmSpecAdapter ekmSpecAdapter = new EkmSpecAdapter(); //DO NOT REMOVE\n-    private EkmAdapter ekmAdapter = new EkmAdapter(); //DO NOT REMOVE\n \n     public static GsonBuilder createGson() {\n         GsonFireBuilder fireBuilder = new GsonFireBuilder()\n@@ -104,8 +100,6 @@ public class JSON {\n             .registerTypeAdapter(OffsetDateTime.class, offsetDateTimeTypeAdapter)\n             .registerTypeAdapter(LocalDate.class, localDateTypeAdapter)\n             .registerTypeAdapter(byte[].class, byteArrayAdapter)\n-            .registerTypeAdapter(EkmSpec.class,ekmSpecAdapter) //DO NOT REMOVE. This is custom serialization\n-            .registerTypeAdapter(Ekm.class,ekmAdapter) //DO NOT REMOVE. This is custom serialization\n             .create();\n     }\n</code></pre>\n"},{"tags":["java","methods","reference"],"owner":{"account_id":997969,"reputation":145,"user_id":1013464,"display_name":"Nemo"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":18,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"closed_date":1699345739,"answer_count":0,"score":0,"last_activity_date":1699345358,"creation_date":1699345358,"question_id":77436555,"body_markdown":"I have a method in my Java application and I need to get all ways this method invoked from root of the first call inside of my application. In Eclipse I can find a nearest caller to the method but I need to find also a caller to this caller and so one till the root of each call. Is there any tool which can do it or approach which can help?","title":"Find all references to method and references to references in Java","body":"<p>I have a method in my Java application and I need to get all ways this method invoked from root of the first call inside of my application. In Eclipse I can find a nearest caller to the method but I need to find also a caller to this caller and so one till the root of each call. Is there any tool which can do it or approach which can help?</p>\n"},{"tags":["java","rest","authentication","hcl","wcs"],"owner":{"account_id":17651185,"reputation":13,"user_id":12811623,"display_name":"Puneet Gahlot "},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":79,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1699344906,"creation_date":1699344906,"question_id":77436520,"body_markdown":"In my project I need to migrate the login token of login user at the time of dev and uat environment cut over while we are upgrading the project into newer version.\r\nSo simply I have a separate project to migrate login token, we run the jar file of that project to migrate the login token. In that project we have simply 2 classes out of which 1 is for multithreading parallel processing and calling the another class in which we are hitting the token generate API and migrating the login token.\r\n\r\nWhile I am running this jar file I am getting the &quot;javax.net.ssl.SSLException: Tag mismatch! Caused by: javax.crypto.AEADBadTagException: Tag mismatch!&quot; for any random user not for all users. \r\n\r\nThis is my class to get the connection and to hit the token generate API \r\n```\r\nprivate void callGenerateTokenAPI(String memberId, String hostName) {\r\n\t\tfinal String methodName = &quot;callGenerateTokenAPI&quot;;\t\t\r\n\t\tString storeId = getUserContextStoreId(Long.valueOf(memberId)); // getting store id here\r\n\t\tString generateTokenURL = &quot;https://&quot;+hostName+&quot;/wcs/resources/store/&quot;+storeId+&quot;/person/internal/tokens/byMember/&quot; + memberId;\r\n\t\tLOGGER.logp(Level.INFO, CLASS_NAME, methodName, &quot; URL: &quot;+generateTokenURL+&quot; with timeout :: &quot;+this.timeOutInMs);\r\n\t\tMap&lt;String,String&gt; headers = new HashMap&lt;String,String&gt;();\r\n\t\theaders.put(&quot;Content-Type&quot;, &quot;application/json&quot;);\r\n\t\tpostSSLMethodCall(generateTokenURL , &quot;POST&quot; , this.timeOutInMs , headers);\r\n\t\tSystem.out.println( &quot; completed for url : &quot; + generateTokenURL);\r\n\t}\r\n\t\r\n\tprivate HttpURLConnection getSSLConnection(String generateTokenURL, String method, int timeOutInMs,Map&lt;String, String&gt; headers) throws KeyManagementException, NoSuchAlgorithmException, IOException {\t\t\r\n\t\tURL url = new URL(generateTokenURL);\r\n\t\tHttpURLConnection connection = (HttpURLConnection) url.openConnection();\r\n\t\tconnection.setConnectTimeout(timeOutInMs);\r\n\t\tconnection.setReadTimeout(timeOutInMs);\r\n\t\tconnection.setDoOutput(true);\r\n\t\tconnection.setUseCaches(false);\r\n\t\tconnection.setRequestMethod(method);\r\n\t\tfor (Map.Entry&lt;String, String&gt; entrySet : headers.entrySet()){\r\n\t\t\tconnection.setRequestProperty(entrySet.getKey(), entrySet.getValue());\r\n\t\t}\r\n\t\treturn connection;\r\n\t}\r\n\r\n\tpublic String postSSLMethodCall(String apiURL , String method , int timeout ,Map&lt;String,String&gt; headers)\r\n\t{\r\n\t\tfinal String methodName = &quot;postSSLMethodCall&quot;;\t\t\t\t\r\n\t\tString response = null;\r\n\t\tHttpURLConnection connection = null;\t\r\n\t\t try {\r\n\t\t\t connection = getSSLConnection(apiURL,method,timeout,headers);\r\n\t\t\tif(null!= connection){\r\n\t\t\t\tSystem.out.println(&quot; Got connection , doing execution&quot;);\r\n\t\t\t\tStringBuilder sb = new StringBuilder();\r\n\t            String line = null;\r\n\t\t\t\tBufferedReader bufferedReader = null;\r\n\t\t\t\ttry{\r\n\t\t\t\t\tbufferedReader = new BufferedReader(new InputStreamReader(connection.getInputStream()));\r\n\t\t            while ((line = bufferedReader.readLine()) != null) {\r\n\t\t                sb.append(line);\r\n\t\t            }\r\n\t\t\t\t}finally {\r\n\t                if (bufferedReader != null) {\r\n\t                    bufferedReader.close();\r\n\t                }\r\n\t            }           \r\n\t            response = sb.toString();\r\n\t            LOGGER.logp(Level.INFO, CLASS_NAME, methodName, &quot; response ==&gt; &quot; + response + &quot; responseCode : &quot; + connection.getResponseCode());\r\n\t\t\t}\r\n\t\t  } catch (Exception e) {\r\n\t\t\t  e.printStackTrace();\r\n\t\t\t  LOGGER.logp(Level.SEVERE, CLASS_NAME, methodName, &quot;Connection establishing Error for &quot; + apiURL + &quot; : is : &quot;+e.getMessage());\r\n\t\t  }finally{\r\n\t\t\t  if(connection != null) {\r\n\t\t\t\tconnection.disconnect();\r\n\t\t\t  }\r\n\t\t  }\r\n\t\treturn response;\t\r\n\t}\r\n```\r\n","title":"javax.net.ssl.SSLException: Tag mismatch Caused by: javax.crypto.AEADBadTagException: Tag mismatch","body":"<p>In my project I need to migrate the login token of login user at the time of dev and uat environment cut over while we are upgrading the project into newer version.\nSo simply I have a separate project to migrate login token, we run the jar file of that project to migrate the login token. In that project we have simply 2 classes out of which 1 is for multithreading parallel processing and calling the another class in which we are hitting the token generate API and migrating the login token.</p>\n<p>While I am running this jar file I am getting the &quot;javax.net.ssl.SSLException: Tag mismatch! Caused by: javax.crypto.AEADBadTagException: Tag mismatch!&quot; for any random user not for all users.</p>\n<p>This is my class to get the connection and to hit the token generate API</p>\n<pre><code>private void callGenerateTokenAPI(String memberId, String hostName) {\n        final String methodName = &quot;callGenerateTokenAPI&quot;;       \n        String storeId = getUserContextStoreId(Long.valueOf(memberId)); // getting store id here\n        String generateTokenURL = &quot;https://&quot;+hostName+&quot;/wcs/resources/store/&quot;+storeId+&quot;/person/internal/tokens/byMember/&quot; + memberId;\n        LOGGER.logp(Level.INFO, CLASS_NAME, methodName, &quot; URL: &quot;+generateTokenURL+&quot; with timeout :: &quot;+this.timeOutInMs);\n        Map&lt;String,String&gt; headers = new HashMap&lt;String,String&gt;();\n        headers.put(&quot;Content-Type&quot;, &quot;application/json&quot;);\n        postSSLMethodCall(generateTokenURL , &quot;POST&quot; , this.timeOutInMs , headers);\n        System.out.println( &quot; completed for url : &quot; + generateTokenURL);\n    }\n    \n    private HttpURLConnection getSSLConnection(String generateTokenURL, String method, int timeOutInMs,Map&lt;String, String&gt; headers) throws KeyManagementException, NoSuchAlgorithmException, IOException {      \n        URL url = new URL(generateTokenURL);\n        HttpURLConnection connection = (HttpURLConnection) url.openConnection();\n        connection.setConnectTimeout(timeOutInMs);\n        connection.setReadTimeout(timeOutInMs);\n        connection.setDoOutput(true);\n        connection.setUseCaches(false);\n        connection.setRequestMethod(method);\n        for (Map.Entry&lt;String, String&gt; entrySet : headers.entrySet()){\n            connection.setRequestProperty(entrySet.getKey(), entrySet.getValue());\n        }\n        return connection;\n    }\n\n    public String postSSLMethodCall(String apiURL , String method , int timeout ,Map&lt;String,String&gt; headers)\n    {\n        final String methodName = &quot;postSSLMethodCall&quot;;              \n        String response = null;\n        HttpURLConnection connection = null;    \n         try {\n             connection = getSSLConnection(apiURL,method,timeout,headers);\n            if(null!= connection){\n                System.out.println(&quot; Got connection , doing execution&quot;);\n                StringBuilder sb = new StringBuilder();\n                String line = null;\n                BufferedReader bufferedReader = null;\n                try{\n                    bufferedReader = new BufferedReader(new InputStreamReader(connection.getInputStream()));\n                    while ((line = bufferedReader.readLine()) != null) {\n                        sb.append(line);\n                    }\n                }finally {\n                    if (bufferedReader != null) {\n                        bufferedReader.close();\n                    }\n                }           \n                response = sb.toString();\n                LOGGER.logp(Level.INFO, CLASS_NAME, methodName, &quot; response ==&gt; &quot; + response + &quot; responseCode : &quot; + connection.getResponseCode());\n            }\n          } catch (Exception e) {\n              e.printStackTrace();\n              LOGGER.logp(Level.SEVERE, CLASS_NAME, methodName, &quot;Connection establishing Error for &quot; + apiURL + &quot; : is : &quot;+e.getMessage());\n          }finally{\n              if(connection != null) {\n                connection.disconnect();\n              }\n          }\n        return response;    \n    }\n</code></pre>\n"},{"tags":["java","ssh","jsch"],"answers":[{"tags":[],"owner":{"account_id":7400422,"reputation":135,"user_id":5631057,"display_name":"C.Gibby"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1699344855,"creation_date":1473943830,"answer_id":39511487,"question_id":39396209,"body_markdown":"I worked this out eventually, you have to implement `UserInfo` and `UIKeyboardInteractive`. Use the `promptKeyboardInteractive` method, to make it return the authentication key, shown in the following code which works for me:\r\n\r\n    import java.security.InvalidKeyException;\r\n\r\n    import com.jcraft.jsch.Channel;\r\n    import com.jcraft.jsch.ChannelExec;\r\n    import com.jcraft.jsch.JSch;\r\n    import com.jcraft.jsch.Session;\r\n    import com.jcraft.jsch.UIKeyboardInteractive;\r\n    import com.jcraft.jsch.UserInfo;\r\n\r\n    public class UserAuthKI{\r\n      public static void main(String[] arg){\r\n\r\n        try{\r\n          JSch jsch=new JSch();\r\n\r\n          String host=&quot;&quot;;\r\n          String user=&quot;&quot;;\r\n\r\n          Session session=jsch.getSession(user, host, 22);\r\n\r\n          // username and passphrase will be given via UserInfo interface.\r\n          UserInfo ui=new MyUserInfo();\r\n          session.setUserInfo(ui);\r\n          session.connect();\r\n\r\n          Channel channel =session.openChannel(&quot;exec&quot;);\r\n          ((ChannelExec)channel).setCommand(&quot;echo &#39;hello&#39;&quot;);\r\n          \r\n          channel.setInputStream(System.in);\r\n          channel.setOutputStream(System.out);\r\n\r\n          channel.connect();\r\n          \r\n        }\r\n        catch(Exception e){\r\n          System.out.println(e);\r\n        }\r\n      }\r\n\r\n      public static class MyUserInfo implements UserInfo, UIKeyboardInteractive{\r\n        public String getPassword(){ return &quot;passwordHere&quot;; }\r\n        public boolean promptYesNo(String str){\r\n          return true;\r\n        }\r\n\r\n        public String getPassphrase(){return null;}\r\n        public boolean promptPassphrase(String message){ return false; }\r\n        public boolean promptPassword(String message){\r\n          return true;\r\n        }\r\n        public void showMessage(String message){\r\n          System.out.println(message);\r\n        }\r\n\r\n        public String[] promptKeyboardInteractive(String destination,\r\n                                                  String name,\r\n                                                  String instruction,\r\n                                                  String[] prompt,\r\n                                                  boolean[] echo){\r\n        \r\n          System.out.println(&quot;destination: &quot;+destination);\r\n          System.out.println(&quot;name: &quot;+name);\r\n          System.out.println(&quot;instruction: &quot;+instruction);\r\n          System.out.println(&quot;prompt.length: &quot;+prompt.length); \r\n        \r\n          String[] str = new String[1];\r\n        \r\n          if(prompt[0].contains(&quot;Password:&quot;)){\r\n            str[0] = getPassword();\r\n          }\r\n          else if(prompt[0].contains(&quot;Verification code: &quot;)){\r\n            try {\r\n              str[0] = PasswordUtils.verify_code(&quot;CODEHERE&quot;);\r\n            } catch (InvalidKeyException e) {\r\n              // TODO Auto-generated catch block\r\n              e.printStackTrace();\r\n            }\r\n          }\r\n          else{\r\n            str = null;\r\n          }\r\n        \r\n          return str;\r\n        }\r\n      }\r\n    }\r\n\r\n(`PasswordUtils.verif_code()` is the static method which generates the key)","title":"Two-step verification using JSch library","body":"<p>I worked this out eventually, you have to implement <code>UserInfo</code> and <code>UIKeyboardInteractive</code>. Use the <code>promptKeyboardInteractive</code> method, to make it return the authentication key, shown in the following code which works for me:</p>\n<pre><code>import java.security.InvalidKeyException;\n\nimport com.jcraft.jsch.Channel;\nimport com.jcraft.jsch.ChannelExec;\nimport com.jcraft.jsch.JSch;\nimport com.jcraft.jsch.Session;\nimport com.jcraft.jsch.UIKeyboardInteractive;\nimport com.jcraft.jsch.UserInfo;\n\npublic class UserAuthKI{\n  public static void main(String[] arg){\n\n    try{\n      JSch jsch=new JSch();\n\n      String host=&quot;&quot;;\n      String user=&quot;&quot;;\n\n      Session session=jsch.getSession(user, host, 22);\n\n      // username and passphrase will be given via UserInfo interface.\n      UserInfo ui=new MyUserInfo();\n      session.setUserInfo(ui);\n      session.connect();\n\n      Channel channel =session.openChannel(&quot;exec&quot;);\n      ((ChannelExec)channel).setCommand(&quot;echo 'hello'&quot;);\n      \n      channel.setInputStream(System.in);\n      channel.setOutputStream(System.out);\n\n      channel.connect();\n      \n    }\n    catch(Exception e){\n      System.out.println(e);\n    }\n  }\n\n  public static class MyUserInfo implements UserInfo, UIKeyboardInteractive{\n    public String getPassword(){ return &quot;passwordHere&quot;; }\n    public boolean promptYesNo(String str){\n      return true;\n    }\n\n    public String getPassphrase(){return null;}\n    public boolean promptPassphrase(String message){ return false; }\n    public boolean promptPassword(String message){\n      return true;\n    }\n    public void showMessage(String message){\n      System.out.println(message);\n    }\n\n    public String[] promptKeyboardInteractive(String destination,\n                                              String name,\n                                              String instruction,\n                                              String[] prompt,\n                                              boolean[] echo){\n    \n      System.out.println(&quot;destination: &quot;+destination);\n      System.out.println(&quot;name: &quot;+name);\n      System.out.println(&quot;instruction: &quot;+instruction);\n      System.out.println(&quot;prompt.length: &quot;+prompt.length); \n    \n      String[] str = new String[1];\n    \n      if(prompt[0].contains(&quot;Password:&quot;)){\n        str[0] = getPassword();\n      }\n      else if(prompt[0].contains(&quot;Verification code: &quot;)){\n        try {\n          str[0] = PasswordUtils.verify_code(&quot;CODEHERE&quot;);\n        } catch (InvalidKeyException e) {\n          // TODO Auto-generated catch block\n          e.printStackTrace();\n        }\n      }\n      else{\n        str = null;\n      }\n    \n      return str;\n    }\n  }\n}\n</code></pre>\n<p>(<code>PasswordUtils.verif_code()</code> is the static method which generates the key)</p>\n"}],"owner":{"account_id":7400422,"reputation":135,"user_id":5631057,"display_name":"C.Gibby"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1784,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":39511487,"answer_count":1,"score":1,"last_activity_date":1699344855,"creation_date":1473352678,"question_id":39396209,"body_markdown":"I am trying to use Java to connect to a Linux server which has a two-step verification login. I&#39;m using the JSch library, this is the code I&#39;ve got so far:\r\n\t\t\t\r\n    session = jsch.getSession(username, ip);\r\n\tProperties config = new java.util.Properties(); \r\n\tconfig.put(&quot;StrictHostKeyChecking&quot;, &quot;no&quot;);\r\n\tsession.setConfig(config);\r\n\t\t\t\r\n\tsession.setPassword(password);\r\n\tsession.connect();\r\n\tSystem.out.println(&quot;Connected to &quot; + ip);\r\n\r\nObviously when I run this script I get an *&quot;Auth failed&quot;* error as I haven&#39;t enter the authentication key. So how do I login using the verification key. If this isn&#39;t possible could someone suggest a library that has this functionality. \r\n\r\nThis is logging into the server using putty. So you enter the username, then the time based generated code, then the password.\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: http://i.stack.imgur.com/1wTcB.png","title":"Two-step verification using JSch library","body":"<p>I am trying to use Java to connect to a Linux server which has a two-step verification login. I'm using the JSch library, this is the code I've got so far:</p>\n<pre><code>session = jsch.getSession(username, ip);\nProperties config = new java.util.Properties(); \nconfig.put(&quot;StrictHostKeyChecking&quot;, &quot;no&quot;);\nsession.setConfig(config);\n        \nsession.setPassword(password);\nsession.connect();\nSystem.out.println(&quot;Connected to &quot; + ip);\n</code></pre>\n<p>Obviously when I run this script I get an <em>&quot;Auth failed&quot;</em> error as I haven't enter the authentication key. So how do I login using the verification key. If this isn't possible could someone suggest a library that has this functionality.</p>\n<p>This is logging into the server using putty. So you enter the username, then the time based generated code, then the password.\n<a href=\"https://i.stack.imgur.com/1wTcB.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/1wTcB.png\" alt=\"enter image description here\" /></a></p>\n"},{"tags":["java","multidimensional-array","methods"],"comments":[{"owner":{"account_id":6790343,"reputation":1483,"user_id":5227721,"display_name":"Berk Kurkcuoglu"},"score":0,"creation_date":1697822001,"post_id":77332660,"comment_id":136332425,"body_markdown":"What are your expected inputs and otputs?","body":"What are your expected inputs and otputs?"}],"answers":[{"tags":[],"owner":{"account_id":2698782,"reputation":38625,"user_id":2330053,"display_name":"Idle_Mind"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1697822358,"creation_date":1697822358,"answer_id":77332742,"question_id":77332660,"body_markdown":"Your current code is checking the sum of a ROW, not a column. Additionally, you need to check if the sum is 1, AFTER exiting the nested for loop; otherwise you&#39;ll determine that it is &quot;not&quot; a valid matrix before you&#39;ve had a chance to add up all the numbers.\r\n\r\nSo you need to swap the order of your rows/columns in the for loops, and move the check for a sum of 1 to after the nested for loop.\r\n\r\nThat&#39;d look something more like:\r\n\r\n      public static boolean isMarkovMatrix(double[][] m){\r\n        double sum;\r\n    \r\n        for(int column = 0; column &lt; m.length; column++){\r\n          sum = 0;        \r\n          for(int row = 0; row &lt; m.length; row++){          \r\n              sum += m[row][column];\r\n              if (m[row][column] &lt; 0){\r\n                  return false;\r\n              }\r\n          }\r\n          if (sum != 1.0) {\r\n            return false;\r\n          }\r\n        }\r\n        return true;\r\n      }\r\n\r\n","title":"Java coding Markov Matrix","body":"<p>Your current code is checking the sum of a ROW, not a column. Additionally, you need to check if the sum is 1, AFTER exiting the nested for loop; otherwise you'll determine that it is &quot;not&quot; a valid matrix before you've had a chance to add up all the numbers.</p>\n<p>So you need to swap the order of your rows/columns in the for loops, and move the check for a sum of 1 to after the nested for loop.</p>\n<p>That'd look something more like:</p>\n<pre><code>  public static boolean isMarkovMatrix(double[][] m){\n    double sum;\n\n    for(int column = 0; column &lt; m.length; column++){\n      sum = 0;        \n      for(int row = 0; row &lt; m.length; row++){          \n          sum += m[row][column];\n          if (m[row][column] &lt; 0){\n              return false;\n          }\n      }\n      if (sum != 1.0) {\n        return false;\n      }\n    }\n    return true;\n  }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":23740623,"reputation":1,"user_id":17758716,"display_name":"Reilas"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1697835576,"creation_date":1697835576,"answer_id":77333743,"question_id":77332660,"body_markdown":"&gt; _&quot;... it continues to tell me that it&#39;s NOT a positive M.M ...&quot;_\r\n\r\nI cannot decipher the logic for the _isMarkovMatrix_ method.\r\n\r\nHere is a reference; not the solution.\r\n\r\n```java\r\ndouble e = 0;\r\nfor (int c = 0, m = a[0].length; c &lt; m; c++, e = 0) {\r\n    for (double[] r : a) e += r[c];\r\n    if (e != 1) return false;\r\n}\r\nreturn true;\r\n```\r\n\r\nThe problem here is you&#39;ll encounter precision errors when adding the _floating-point_ values.\r\n\r\nUse the _[BigDecimal](https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/math/BigDecimal.html)_ class instead.\r\n\r\n```java\r\nBigDecimal e = BigDecimal.ZERO;\r\nfor (int c = 0, n = m[0].length; c &lt; n; c++, e = BigDecimal.ZERO) {\r\n    for (double[] r : m)\r\n        e = e.add(new BigDecimal(String.valueOf(r[c])));\r\n    if (e.compareTo(BigDecimal.ONE) != 0) return false;\r\n}\r\nreturn true;\r\n```\r\n\r\nOutput\r\n\r\n```none\r\nEnter a 3-by-3 matrix row by row: \r\n.1 .2 .3\r\n.4 .5 .6\r\n.5 .3 .1\r\nIt is a Markov Matrix.\r\n```","title":"Java coding Markov Matrix","body":"<blockquote>\n<p><em>&quot;... it continues to tell me that it's NOT a positive M.M ...&quot;</em></p>\n</blockquote>\n<p>I cannot decipher the logic for the <em>isMarkovMatrix</em> method.</p>\n<p>Here is a reference; not the solution.</p>\n<pre class=\"lang-java prettyprint-override\"><code>double e = 0;\nfor (int c = 0, m = a[0].length; c &lt; m; c++, e = 0) {\n    for (double[] r : a) e += r[c];\n    if (e != 1) return false;\n}\nreturn true;\n</code></pre>\n<p>The problem here is you'll encounter precision errors when adding the <em>floating-point</em> values.</p>\n<p>Use the <em><a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/math/BigDecimal.html\" rel=\"nofollow noreferrer\">BigDecimal</a></em> class instead.</p>\n<pre class=\"lang-java prettyprint-override\"><code>BigDecimal e = BigDecimal.ZERO;\nfor (int c = 0, n = m[0].length; c &lt; n; c++, e = BigDecimal.ZERO) {\n    for (double[] r : m)\n        e = e.add(new BigDecimal(String.valueOf(r[c])));\n    if (e.compareTo(BigDecimal.ONE) != 0) return false;\n}\nreturn true;\n</code></pre>\n<p>Output</p>\n<pre class=\"lang-none prettyprint-override\"><code>Enter a 3-by-3 matrix row by row: \n.1 .2 .3\n.4 .5 .6\n.5 .3 .1\nIt is a Markov Matrix.\n</code></pre>\n"},{"tags":[],"owner":{"account_id":29844301,"reputation":1,"user_id":22871728,"display_name":"school GAS"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1699344643,"creation_date":1699344643,"answer_id":77436500,"question_id":77332660,"body_markdown":"    import java.util.*;\r\n    public class Markov\r\n    {\r\n      Scanner sc=new Scanner(System.in);\r\n        double m[][];\r\n        void main()\r\n        {\r\n        System.out.println(&quot;Enter order of matrix&quot;);\r\n        int n=sc.nextInt();\r\n        int b=0;\r\n        while(!(n&gt;=3&amp;&amp;n&lt;=9))\r\n        {\r\n            System.out.println(&quot;ERROR the value is out of bound&quot;);\r\n            System.out.println(&quot;Re-enter&quot;);\r\n            int x=sc.nextInt();\r\n            n=x;\r\n        }\r\n        m=new double[n][n];\r\n        for(int i=0;i&lt;m.length;i++)\r\n        {\r\n            for(int j=0;j&lt;m.length;j++)\r\n           {\r\n               m[i][j]=sc.nextDouble();\r\n               while(m[i][j]&lt;0)\r\n               {\r\n                   System.out.println(&quot;ERROR negative value entered&quot;);\r\n                   System.out.println(&quot;Re-enter&quot;);\r\n                   int x=sc.nextInt();\r\n                   m[i][j]=x;\r\n               }\r\n            }\r\n        }\r\n        int a=0;\r\n        for(int i=0;i&lt;m.length;i++)\r\n        {\r\n            for(int j=0;j&lt;m.length;j++)\r\n            {\r\n               System.out.print(m[i][j]+&quot; &quot;);\r\n            }\r\n            System.out.println();\r\n        }\r\n        for(int r=0;r&lt;n;r++)\r\n        {   double s1=0.0;double s2=0.0;\r\n            for(int c=0;c&lt;n;c++)\r\n            {\r\n                s1+=m[r][c];\r\n                s2+=m[c][r];\r\n            }\r\n            if(s1!=1||s2!=1)\r\n            a++;\r\n        }\r\n        if(a&gt;0)\r\n        System.out.println(&quot;It is not a doubly markov matrix&quot;);\r\n        else\r\n        System.out.println(&quot;It is a doubly markov number&quot;);\r\n        }\r\n    }\r\n\r\n","title":"Java coding Markov Matrix","body":"<pre><code>import java.util.*;\npublic class Markov\n{\n  Scanner sc=new Scanner(System.in);\n    double m[][];\n    void main()\n    {\n    System.out.println(&quot;Enter order of matrix&quot;);\n    int n=sc.nextInt();\n    int b=0;\n    while(!(n&gt;=3&amp;&amp;n&lt;=9))\n    {\n        System.out.println(&quot;ERROR the value is out of bound&quot;);\n        System.out.println(&quot;Re-enter&quot;);\n        int x=sc.nextInt();\n        n=x;\n    }\n    m=new double[n][n];\n    for(int i=0;i&lt;m.length;i++)\n    {\n        for(int j=0;j&lt;m.length;j++)\n       {\n           m[i][j]=sc.nextDouble();\n           while(m[i][j]&lt;0)\n           {\n               System.out.println(&quot;ERROR negative value entered&quot;);\n               System.out.println(&quot;Re-enter&quot;);\n               int x=sc.nextInt();\n               m[i][j]=x;\n           }\n        }\n    }\n    int a=0;\n    for(int i=0;i&lt;m.length;i++)\n    {\n        for(int j=0;j&lt;m.length;j++)\n        {\n           System.out.print(m[i][j]+&quot; &quot;);\n        }\n        System.out.println();\n    }\n    for(int r=0;r&lt;n;r++)\n    {   double s1=0.0;double s2=0.0;\n        for(int c=0;c&lt;n;c++)\n        {\n            s1+=m[r][c];\n            s2+=m[c][r];\n        }\n        if(s1!=1||s2!=1)\n        a++;\n    }\n    if(a&gt;0)\n    System.out.println(&quot;It is not a doubly markov matrix&quot;);\n    else\n    System.out.println(&quot;It is a doubly markov number&quot;);\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":27844570,"reputation":1,"user_id":21260336,"display_name":"Comp.Sci.Anon"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":82,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":3,"score":-1,"last_activity_date":1699344643,"creation_date":1697821380,"question_id":77332660,"body_markdown":"Good Day!\r\n\r\nI&#39;m having issues with my current code. I&#39;m trying to write a method with the header\r\npublic static boolean isMarkovMatrix(double[][] m)\r\nthat&#39;s supposed to check whether a matrix is a positive markov matrix.\r\nThen in the main method I&#39;m trying to prompt the user to enter a 3-by-3 matrix of double values, then test whether the inputted matrix is in fact a positive markov matrix.\r\nto be more clear -a positive Markov matrix is a matrix where each element is positive and the sum of the elements in each column is 1. \r\n\r\nHere&#39;s my current code, no matter what I input it continues to tell me that it&#39;s NOT a positive M.M when I know it is,\r\nI&#39;m still pretty new to coding, only taken two courses so far so I don&#39;t know anything too advanced fyi, thanks! hope someone can help...\r\n\r\n\r\n    public static void main(String[] args) {\r\n        Scanner kbd = new Scanner (System.in);\r\n        double[][] matrix = new double [3][3];\r\n        \r\n        System.out.println(&quot;Enter a 3-by-3 matrix row by row: &quot;);\r\n        for(int row = 0; row &lt; 3; row++){\r\n            for(int column = 0; column &lt; 3; column++){\r\n               matrix[row][column] = kbd.nextDouble();\r\n            }\r\n            kbd.nextLine();\r\n        }\r\n       //output \r\n       if(isMarkovMatrix(matrix)){\r\n            System.out.println(&quot;It is a Markov Matrix.&quot;);\r\n        } else if (!isMarkovMatrix(matrix)){\r\n            System.out.println(&quot;It is not a Markov Matrix&quot;);\r\n        }\r\n    }\r\n    \r\n    \r\n    public static boolean isMarkovMatrix(double[][] m){\r\n        double sum;\r\n        boolean answer = true;\r\n        \r\n        for(int row = 0; row &lt; m.length; row++){\r\n            sum = 0;\r\n            for(int column = 0; column &lt; m.length; column++){\r\n                sum += m[row][column];\r\n                if (sum != 1 || m[row][column] &lt; 0){\r\n                    answer = false;\r\n                }\r\n            }\r\n        }\r\n        return answer;\r\n    }\r\n","title":"Java coding Markov Matrix","body":"<p>Good Day!</p>\n<p>I'm having issues with my current code. I'm trying to write a method with the header\npublic static boolean isMarkovMatrix(double[][] m)\nthat's supposed to check whether a matrix is a positive markov matrix.\nThen in the main method I'm trying to prompt the user to enter a 3-by-3 matrix of double values, then test whether the inputted matrix is in fact a positive markov matrix.\nto be more clear -a positive Markov matrix is a matrix where each element is positive and the sum of the elements in each column is 1.</p>\n<p>Here's my current code, no matter what I input it continues to tell me that it's NOT a positive M.M when I know it is,\nI'm still pretty new to coding, only taken two courses so far so I don't know anything too advanced fyi, thanks! hope someone can help...</p>\n<pre><code>public static void main(String[] args) {\n    Scanner kbd = new Scanner (System.in);\n    double[][] matrix = new double [3][3];\n    \n    System.out.println(&quot;Enter a 3-by-3 matrix row by row: &quot;);\n    for(int row = 0; row &lt; 3; row++){\n        for(int column = 0; column &lt; 3; column++){\n           matrix[row][column] = kbd.nextDouble();\n        }\n        kbd.nextLine();\n    }\n   //output \n   if(isMarkovMatrix(matrix)){\n        System.out.println(&quot;It is a Markov Matrix.&quot;);\n    } else if (!isMarkovMatrix(matrix)){\n        System.out.println(&quot;It is not a Markov Matrix&quot;);\n    }\n}\n\n\npublic static boolean isMarkovMatrix(double[][] m){\n    double sum;\n    boolean answer = true;\n    \n    for(int row = 0; row &lt; m.length; row++){\n        sum = 0;\n        for(int column = 0; column &lt; m.length; column++){\n            sum += m[row][column];\n            if (sum != 1 || m[row][column] &lt; 0){\n                answer = false;\n            }\n        }\n    }\n    return answer;\n}\n</code></pre>\n"},{"tags":["java","spring-boot","graalvm-native-image"],"comments":[{"owner":{"account_id":23020603,"reputation":341,"user_id":17141716,"display_name":"peterz"},"score":0,"creation_date":1699355468,"post_id":77436394,"comment_id":136518561,"body_markdown":"To build native images you need not a JDK but a GraalVM distribution (which is basically JDK + compiler + `native-image` tool + other stuff which might not be relevant here). Now GraalVM is obviously a GraalVM distro, as well as Liberica (NIK), but I don&#39;t think `adoptium` is.","body":"To build native images you need not a JDK but a GraalVM distribution (which is basically JDK + compiler + <code>native-image</code> tool + other stuff which might not be relevant here). Now GraalVM is obviously a GraalVM distro, as well as Liberica (NIK), but I don&#39;t think <code>adoptium</code> is."},{"owner":{"account_id":2058273,"reputation":830,"user_id":1835477,"accept_rate":59,"display_name":"DJViking"},"score":0,"creation_date":1699361881,"post_id":77436394,"comment_id":136519674,"body_markdown":"That might be the case. Default for native it might use Liberica NIK. Although it output that is is using `Paketo Buildpack for BellSoft Liberica 10.4.2`.\nUsing GraalVM makes a much bigger docker image. I wonder why.","body":"That might be the case. Default for native it might use Liberica NIK. Although it output that is is using <code>Paketo Buildpack for BellSoft Liberica 10.4.2</code>. Using GraalVM makes a much bigger docker image. I wonder why."}],"owner":{"account_id":2058273,"reputation":830,"user_id":1835477,"accept_rate":59,"display_name":"DJViking"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":63,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1699344590,"creation_date":1699343521,"question_id":77436394,"body_markdown":"I want to configure building a Native image with GraalVM and Spring Boot buildpacks\r\n\r\nSpring-Boot 3.1.5\\\r\nJava 21\r\n\r\nI have configured the spring-boot-maven-plugin, and added the BP_NATIVE_IMAG environment variable to enable native image.\r\n\r\nIn order for it to use Adoptium (Eclipse Temurin) OpenJDK instead of BellSoft Liberica, I have to configure all the needed buildpacks my self in the plugin configuration.\r\n\r\n```\r\n    &lt;build&gt;\r\n        &lt;finalName&gt;app&lt;/finalName&gt;\r\n        &lt;plugins&gt;\r\n            &lt;plugin&gt;\r\n                &lt;groupId&gt;org.graalvm.buildtools&lt;/groupId&gt;\r\n                &lt;artifactId&gt;native-maven-plugin&lt;/artifactId&gt;\r\n            &lt;/plugin&gt;\r\n            &lt;plugin&gt;\r\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n                &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\r\n                &lt;configuration&gt;\r\n                    &lt;excludes&gt;\r\n                        &lt;exclude&gt;\r\n                            &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\r\n                            &lt;artifactId&gt;lombok&lt;/artifactId&gt;\r\n                        &lt;/exclude&gt;\r\n                    &lt;/excludes&gt;\r\n                    &lt;image&gt;\r\n                        &lt;builder&gt;paketobuildpacks/builder-jammy-tiny&lt;/builder&gt;\r\n                        &lt;createdDate&gt;${createdDate}&lt;/createdDate&gt;\r\n                        &lt;env&gt;\r\n                            &lt;BP_NATIVE_IMAGE&gt;true&lt;/BP_NATIVE_IMAGE&gt;\r\n                        &lt;/env&gt;\r\n                        &lt;buildpacks&gt;\r\n                            &lt;buildpack&gt;gcr.io/paketo-buildpacks/ca-certificates:latest&lt;/buildpack&gt;\r\n                            &lt;buildpack&gt;gcr.io/paketo-buildpacks/adoptium:latest&lt;/buildpack&gt;\r\n                            &lt;buildpack&gt;gcr.io/paketo-buildpacks/syft:latest&lt;/buildpack&gt;\r\n                            &lt;buildpack&gt;gcr.io/paketo-buildpacks/executable-jar:latest&lt;/buildpack&gt;\r\n                            &lt;buildpack&gt;gcr.io/paketo-buildpacks/dist-zip:latest&lt;/buildpack&gt;\r\n                            &lt;buildpack&gt;gcr.io/paketo-buildpacks/spring-boot:latest&lt;/buildpack&gt;\r\n                        &lt;/buildpacks&gt;\r\n                    &lt;/image&gt;\r\n                &lt;/configuration&gt;\r\n            &lt;/plugin&gt;\r\n        &lt;/plugins&gt;\r\n    &lt;/build&gt;\r\n```\r\n\r\nIf I remove the list of buildpacks, then it will build a native image with GraalVM.\r\n```\r\n[INFO]     [creator]     6 of 15 buildpacks participating\r\n[INFO]     [creator]     paketo-buildpacks/ca-certificates   3.6.6\r\n[INFO]     [creator]     paketo-buildpacks/bellsoft-liberica 10.4.2\r\n[INFO]     [creator]     paketo-buildpacks/syft              1.39.0\r\n[INFO]     [creator]     paketo-buildpacks/executable-jar    6.8.2\r\n[INFO]     [creator]     paketo-buildpacks/spring-boot       5.27.5\r\n[INFO]     [creator]     paketo-buildpacks/native-image      5.12.6\r\n```\r\n\r\nHowever I want to use a different OpenJDK. So I need to list all the buildpacks.\r\nI tried to add the native-image buildpack to the list of buildpacks, but it does not work.\r\nWhat buildpack am I missing here?\r\n\r\n```\r\n[INFO]     [creator]       no valid dependencies for native-image-svm, 21, and io.buildpacks.stacks.jammy.tiny in [(jdk, 8.0.392, [*]) (jre, 8.0.392, [*]) (jdk, 11.0.21, [*]) (jre, 11.0.21, [*]) (jdk, 17.0.9, [*]) (jre, 17.0.9, [*]) (jdk, 21.0.1, [*]) (jre, 21.0.1, [*])]\r\n```\r\n\r\nIf I change adoptium:latest to bellsoft-liberica:latest, then it will work.\r\n\r\nIf I change the `adoptium:latest` buildpack to `graalvm:latest` buildpack then it is working.\r\n\r\nWhen it is using BellSoft Liberica and building a native image, does it not use the BellSoft Liberica OpenJDK in the build process?\r\n\r\nIf I use GraalVM as OpenJDK distribution the docker images get a whopping 650MB, while building a native image with BellSoft Liberica the docker images is only 85MB.","title":"Spring Boot: Native image witrh override OpenJDK distribution","body":"<p>I want to configure building a Native image with GraalVM and Spring Boot buildpacks</p>\n<p>Spring-Boot 3.1.5<br />\nJava 21</p>\n<p>I have configured the spring-boot-maven-plugin, and added the BP_NATIVE_IMAG environment variable to enable native image.</p>\n<p>In order for it to use Adoptium (Eclipse Temurin) OpenJDK instead of BellSoft Liberica, I have to configure all the needed buildpacks my self in the plugin configuration.</p>\n<pre><code>    &lt;build&gt;\n        &lt;finalName&gt;app&lt;/finalName&gt;\n        &lt;plugins&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.graalvm.buildtools&lt;/groupId&gt;\n                &lt;artifactId&gt;native-maven-plugin&lt;/artifactId&gt;\n            &lt;/plugin&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n                &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\n                &lt;configuration&gt;\n                    &lt;excludes&gt;\n                        &lt;exclude&gt;\n                            &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\n                            &lt;artifactId&gt;lombok&lt;/artifactId&gt;\n                        &lt;/exclude&gt;\n                    &lt;/excludes&gt;\n                    &lt;image&gt;\n                        &lt;builder&gt;paketobuildpacks/builder-jammy-tiny&lt;/builder&gt;\n                        &lt;createdDate&gt;${createdDate}&lt;/createdDate&gt;\n                        &lt;env&gt;\n                            &lt;BP_NATIVE_IMAGE&gt;true&lt;/BP_NATIVE_IMAGE&gt;\n                        &lt;/env&gt;\n                        &lt;buildpacks&gt;\n                            &lt;buildpack&gt;gcr.io/paketo-buildpacks/ca-certificates:latest&lt;/buildpack&gt;\n                            &lt;buildpack&gt;gcr.io/paketo-buildpacks/adoptium:latest&lt;/buildpack&gt;\n                            &lt;buildpack&gt;gcr.io/paketo-buildpacks/syft:latest&lt;/buildpack&gt;\n                            &lt;buildpack&gt;gcr.io/paketo-buildpacks/executable-jar:latest&lt;/buildpack&gt;\n                            &lt;buildpack&gt;gcr.io/paketo-buildpacks/dist-zip:latest&lt;/buildpack&gt;\n                            &lt;buildpack&gt;gcr.io/paketo-buildpacks/spring-boot:latest&lt;/buildpack&gt;\n                        &lt;/buildpacks&gt;\n                    &lt;/image&gt;\n                &lt;/configuration&gt;\n            &lt;/plugin&gt;\n        &lt;/plugins&gt;\n    &lt;/build&gt;\n</code></pre>\n<p>If I remove the list of buildpacks, then it will build a native image with GraalVM.</p>\n<pre><code>[INFO]     [creator]     6 of 15 buildpacks participating\n[INFO]     [creator]     paketo-buildpacks/ca-certificates   3.6.6\n[INFO]     [creator]     paketo-buildpacks/bellsoft-liberica 10.4.2\n[INFO]     [creator]     paketo-buildpacks/syft              1.39.0\n[INFO]     [creator]     paketo-buildpacks/executable-jar    6.8.2\n[INFO]     [creator]     paketo-buildpacks/spring-boot       5.27.5\n[INFO]     [creator]     paketo-buildpacks/native-image      5.12.6\n</code></pre>\n<p>However I want to use a different OpenJDK. So I need to list all the buildpacks.\nI tried to add the native-image buildpack to the list of buildpacks, but it does not work.\nWhat buildpack am I missing here?</p>\n<pre><code>[INFO]     [creator]       no valid dependencies for native-image-svm, 21, and io.buildpacks.stacks.jammy.tiny in [(jdk, 8.0.392, [*]) (jre, 8.0.392, [*]) (jdk, 11.0.21, [*]) (jre, 11.0.21, [*]) (jdk, 17.0.9, [*]) (jre, 17.0.9, [*]) (jdk, 21.0.1, [*]) (jre, 21.0.1, [*])]\n</code></pre>\n<p>If I change adoptium:latest to bellsoft-liberica:latest, then it will work.</p>\n<p>If I change the <code>adoptium:latest</code> buildpack to <code>graalvm:latest</code> buildpack then it is working.</p>\n<p>When it is using BellSoft Liberica and building a native image, does it not use the BellSoft Liberica OpenJDK in the build process?</p>\n<p>If I use GraalVM as OpenJDK distribution the docker images get a whopping 650MB, while building a native image with BellSoft Liberica the docker images is only 85MB.</p>\n"},{"tags":["java","intellij-idea","maven-3","weblogic12c"],"answers":[{"tags":[],"owner":{"account_id":337459,"reputation":917,"user_id":665744,"accept_rate":100,"display_name":"8bitme"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1430983295,"creation_date":1430949311,"answer_id":30088312,"question_id":30088083,"body_markdown":"To setup WebLogic debugging on IntelliJ:\r\n\r\n 1. **Find the WebLogic Debug Port:** this is the port on WebLogic exposed for debugging. The default debug port is 8453 but if it was changed you can find it in the config.xml (under the config folder in your domain home) or the setDomainEnv.sh look for DEBUG_PORT (I assume it is .sh and not .bat as you appear to be using Mac OS X). \r\n \r\n 3. **Remote Debugger Configuration:** go to the configuration and choose new, then select &quot;Remote&quot; ,type in any name that is sensible and under the port (orange block in image) type in the value you found in 1. For host (the green block) type localhost [a side note: you can connect to a remote server by typing that servers host name or IP if the debug port is exposed].\r\n 4. **Start debugger:** Start the debug configuration you just setup, the debug window will pop up and if the port is correct it will say it has connected to remote host and you are good to go debugging.\r\n\r\n![IntelliJ remote Debugger][1]\r\n\r\n--Edit 1--\r\n\r\nRead your question again missed the part about you already having setup the remote config. \r\n\r\nIt may be missing the breakpoint if your program is multi-threaded the breakpoint may not be hit on the current thread you are on.\r\n\r\nThere is a drop down in the debugger when you have the remote configuration working where you should be able to select the thread to debug on.\r\n\r\n-- Edit 2 --\r\n\r\nAdded the image for the remote debugger settings\r\n\r\n  [1]: http://i.stack.imgur.com/OMWhz.png","title":"Intellij debugger does not stop at breakpoints","body":"<p>To setup WebLogic debugging on IntelliJ:</p>\n\n<ol>\n<li><p><strong>Find the WebLogic Debug Port:</strong> this is the port on WebLogic exposed for debugging. The default debug port is 8453 but if it was changed you can find it in the config.xml (under the config folder in your domain home) or the setDomainEnv.sh look for DEBUG_PORT (I assume it is .sh and not .bat as you appear to be using Mac OS X). </p></li>\n<li><p><strong>Remote Debugger Configuration:</strong> go to the configuration and choose new, then select \"Remote\" ,type in any name that is sensible and under the port (orange block in image) type in the value you found in 1. For host (the green block) type localhost [a side note: you can connect to a remote server by typing that servers host name or IP if the debug port is exposed].</p></li>\n<li><strong>Start debugger:</strong> Start the debug configuration you just setup, the debug window will pop up and if the port is correct it will say it has connected to remote host and you are good to go debugging.</li>\n</ol>\n\n<p><img src=\"https://i.stack.imgur.com/OMWhz.png\" alt=\"IntelliJ remote Debugger\"></p>\n\n<p>--Edit 1--</p>\n\n<p>Read your question again missed the part about you already having setup the remote config. </p>\n\n<p>It may be missing the breakpoint if your program is multi-threaded the breakpoint may not be hit on the current thread you are on.</p>\n\n<p>There is a drop down in the debugger when you have the remote configuration working where you should be able to select the thread to debug on.</p>\n\n<p>-- Edit 2 --</p>\n\n<p>Added the image for the remote debugger settings</p>\n"},{"tags":[],"owner":{"account_id":1439626,"reputation":521,"user_id":1360143,"accept_rate":100,"display_name":"datta"},"down_vote_count":0,"up_vote_count":10,"is_accepted":true,"score":10,"last_activity_date":1431004603,"creation_date":1430980622,"answer_id":30093622,"question_id":30088083,"body_markdown":"I figured out what my issue was and I think the problem is specific to me and the nature of my application. Actually I should call it a self induced issue. Let me explain the nature of events.\r\n\r\n1. I have been using eclipse to develop and have a local install of weblogic instance. My application needs coherence cache server and I have few other JVM parameters that I pass when starting the domain. Therefore I had added a line at the start of the `$DOMAIN_HOME/bin/setDomainEnv.sh `  file like so\r\n\r\n    `JAVA_OPTIONS=&quot;-\t      Dtangosol.coherence.distributed.localstorage=false -Dtangosol.coherence.wka=devmachine and blah blah blah`\r\n    \r\n2. I switched to intellij and started working on this project and then configured the weblogic plugin and run configuration etc.\r\n3. I noticed that intellij adds a JAVA_OPTIONS in the **startup/connection** tab in **Run/Debug Configurations** like so\r\n\r\n\r\n![enter image description here][1]\r\n\r\n\r\n  [1]: http://i.stack.imgur.com/1xnur.png\r\n\r\n4. However the JAVA_OPTIONS that was being passed by intellij was not being used by weblogic. I believe it was overridden with what was in the setDomainEnv.sh which is why I saw the following logs.\r\n\r\n**`java version &quot;1.6.0_65&quot;\r\nJava(TM) SE Runtime Environment (build 1.6.0_65-b14-466.1-11M4716)\r\nJava HotSpot(TM) 64-Bit Server VM (build 20.65-b04-466.1, mixed mode)\r\nStarting WLS with line:\r\n/System/Library/Java/JavaVirtualMachines/1.6.0.jdk/Contents/Home/bin/java -client   -Xms512m -Xmx512m -XX:MaxPermSize=256m -Dweblogic.Name=AdminServer -Djava.security.policy=/Users/dparupud/omw/oracle/middleware/weblogic_10.3.6/wlserver_10.3/server/lib/weblogic.policy -Dtangosol.coherence.distributed.localstorage=false -Dtangosol.coherence.wka=devmachine blah blah blah......`**\r\n\r\n5. When I went and removed the JAVA_OPTIONS from setDomainEnv.sh and restarted the server from intellij I saw the following log\r\n\r\n\r\n`starting weblogic with Java version:\r\njava version &quot;1.6.0_65&quot;\r\nJava(TM) SE Runtime Environment (build 1.6.0_65-b14-466.1-11M4716)\r\nJava HotSpot(TM) 64-Bit Server VM (build 20.65-b04-466.1, mixed mode)\r\nStarting WLS with line:\r\n/System/Library/Java/JavaVirtualMachines/1.6.0.jdk/Contents/Home/bin/java -client   -Xms512m -Xmx512m -XX:MaxPermSize=256m -Dweblogic.Name=AdminServer -Djava.security.policy=/Users/dparupud/omw/oracle/middleware/weblogic_10.3.6/wlserver_10.3/server/lib/weblogic.policy -` ***`agentlib:jdwp=transport=dt_socket,address=127.0.0.1:65501,suspend=y,server=n`***\r\n\r\nNow the log showed that the jdwp agent was in action. I did notice that I did not see that particular log before I asked the Question on SO but I thought maybe IntelliJ was doing something inside the covers because JAVA_OPTIONS was being passed and intellij does not allow you to mess with that ( it is readonly).\r\n\r\nI guess I can either pass all my jvm parameters either from intellij or add the jdwp agent info in the setDomainEnv.sh.\r\n\r\nNow I am able to debug.\r\n","title":"Intellij debugger does not stop at breakpoints","body":"<p>I figured out what my issue was and I think the problem is specific to me and the nature of my application. Actually I should call it a self induced issue. Let me explain the nature of events.</p>\n\n<ol>\n<li><p>I have been using eclipse to develop and have a local install of weblogic instance. My application needs coherence cache server and I have few other JVM parameters that I pass when starting the domain. Therefore I had added a line at the start of the <code>$DOMAIN_HOME/bin/setDomainEnv.sh</code>  file like so</p>\n\n<p><code>JAVA_OPTIONS=\"-          Dtangosol.coherence.distributed.localstorage=false -Dtangosol.coherence.wka=devmachine and blah blah blah</code></p></li>\n<li><p>I switched to intellij and started working on this project and then configured the weblogic plugin and run configuration etc.</p></li>\n<li>I noticed that intellij adds a JAVA_OPTIONS in the <strong>startup/connection</strong> tab in <strong>Run/Debug Configurations</strong> like so</li>\n</ol>\n\n<p><img src=\"https://i.stack.imgur.com/1xnur.png\" alt=\"enter image description here\"></p>\n\n<ol start=\"4\">\n<li>However the JAVA_OPTIONS that was being passed by intellij was not being used by weblogic. I believe it was overridden with what was in the setDomainEnv.sh which is why I saw the following logs.</li>\n</ol>\n\n<p><strong><code>java version \"1.6.0_65\"\nJava(TM) SE Runtime Environment (build 1.6.0_65-b14-466.1-11M4716)\nJava HotSpot(TM) 64-Bit Server VM (build 20.65-b04-466.1, mixed mode)\nStarting WLS with line:\n/System/Library/Java/JavaVirtualMachines/1.6.0.jdk/Contents/Home/bin/java -client   -Xms512m -Xmx512m -XX:MaxPermSize=256m -Dweblogic.Name=AdminServer -Djava.security.policy=/Users/dparupud/omw/oracle/middleware/weblogic_10.3.6/wlserver_10.3/server/lib/weblogic.policy -Dtangosol.coherence.distributed.localstorage=false -Dtangosol.coherence.wka=devmachine blah blah blah......</code></strong></p>\n\n<ol start=\"5\">\n<li>When I went and removed the JAVA_OPTIONS from setDomainEnv.sh and restarted the server from intellij I saw the following log</li>\n</ol>\n\n<p><code>starting weblogic with Java version:\njava version \"1.6.0_65\"\nJava(TM) SE Runtime Environment (build 1.6.0_65-b14-466.1-11M4716)\nJava HotSpot(TM) 64-Bit Server VM (build 20.65-b04-466.1, mixed mode)\nStarting WLS with line:\n/System/Library/Java/JavaVirtualMachines/1.6.0.jdk/Contents/Home/bin/java -client   -Xms512m -Xmx512m -XX:MaxPermSize=256m -Dweblogic.Name=AdminServer -Djava.security.policy=/Users/dparupud/omw/oracle/middleware/weblogic_10.3.6/wlserver_10.3/server/lib/weblogic.policy -</code> <strong><em><code>agentlib:jdwp=transport=dt_socket,address=127.0.0.1:65501,suspend=y,server=n</code></em></strong></p>\n\n<p>Now the log showed that the jdwp agent was in action. I did notice that I did not see that particular log before I asked the Question on SO but I thought maybe IntelliJ was doing something inside the covers because JAVA_OPTIONS was being passed and intellij does not allow you to mess with that ( it is readonly).</p>\n\n<p>I guess I can either pass all my jvm parameters either from intellij or add the jdwp agent info in the setDomainEnv.sh.</p>\n\n<p>Now I am able to debug.</p>\n"},{"tags":[],"owner":{"account_id":9094789,"reputation":3313,"user_id":6769119,"display_name":"Mukundhan"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1561296517,"creation_date":1561296517,"answer_id":56724351,"question_id":30088083,"body_markdown":"Deleting the configuration and creating a new one solved it for me.","title":"Intellij debugger does not stop at breakpoints","body":"<p>Deleting the configuration and creating a new one solved it for me.</p>\n"},{"tags":[],"owner":{"account_id":10109755,"reputation":590,"user_id":7471133,"accept_rate":67,"display_name":"Ajay"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1699344283,"creation_date":1699344283,"answer_id":77436466,"question_id":30088083,"body_markdown":"This worked for me\r\n\r\nUnder Intellij Idea\r\n\r\nclick on Edit Configuration\r\nGo to Run and add below command\r\nspring-boot:run -Dspring-boot.run.fork=false\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/khVL7.png","title":"Intellij debugger does not stop at breakpoints","body":"<p>This worked for me</p>\n<p>Under Intellij Idea</p>\n<p>click on Edit Configuration\nGo to Run and add below command\nspring-boot:run -Dspring-boot.run.fork=false</p>\n<p><a href=\"https://i.stack.imgur.com/khVL7.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/khVL7.png\" alt=\"enter image description here\" /></a></p>\n"}],"owner":{"account_id":1439626,"reputation":521,"user_id":1360143,"accept_rate":100,"display_name":"datta"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":31345,"favorite_count":0,"down_vote_count":0,"up_vote_count":14,"accepted_answer_id":30093622,"answer_count":4,"score":14,"last_activity_date":1699344283,"creation_date":1430948377,"question_id":30088083,"body_markdown":"I must be doing something wrong here. I am new to intellij. Making switch from eclipse. I have a JAX WS application that runs on weblogic. The artifact to deploy is an ear file. I have been struggling to get debugger on intellij working. I have the ultimate edition. I did create a run debug configuration but it just passes through the code and does not stop at my desired location. The debugger shows a red dot without a check or a cross.\r\n\r\n**Edit** - I am running a &quot;local&quot; run/debug configuration.\r\n\r\n\r\nHere is a screen shot of my run/debug configuration.\r\n\r\n![enter image description here][1]\r\n\r\n\r\nHere is the screen shot of startup/Connection\r\n\r\n![enter image description here][2]\r\n\r\n\r\n  [1]: http://i.stack.imgur.com/OXshJ.png\r\n  [2]: http://i.stack.imgur.com/0F24t.png","title":"Intellij debugger does not stop at breakpoints","body":"<p>I must be doing something wrong here. I am new to intellij. Making switch from eclipse. I have a JAX WS application that runs on weblogic. The artifact to deploy is an ear file. I have been struggling to get debugger on intellij working. I have the ultimate edition. I did create a run debug configuration but it just passes through the code and does not stop at my desired location. The debugger shows a red dot without a check or a cross.</p>\n\n<p><strong>Edit</strong> - I am running a \"local\" run/debug configuration.</p>\n\n<p>Here is a screen shot of my run/debug configuration.</p>\n\n<p><img src=\"https://i.stack.imgur.com/OXshJ.png\" alt=\"enter image description here\"></p>\n\n<p>Here is the screen shot of startup/Connection</p>\n\n<p><img src=\"https://i.stack.imgur.com/0F24t.png\" alt=\"enter image description here\"></p>\n"},{"tags":["java","spring","rest","maven"],"answers":[{"tags":[],"owner":{"account_id":2274124,"reputation":400,"user_id":2000845,"accept_rate":50,"display_name":"R. S."},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1510912303,"creation_date":1510912303,"answer_id":47347711,"question_id":47345435,"body_markdown":"    public class MyHandlerInterceptorAdapter extends HandlerInterceptorAdapter {\r\n    \r\n        @Override\r\n        public boolean preHandle(HttpServletRequest request, HttpServletResponse response, Object handler) throws Exception {\r\n          response.setHeader(&quot;Authorization&quot;, &quot;token&quot;);\r\n    \r\n           return true;\r\n        }","title":"How to set Authorization header in Rest API Basic Authentication","body":"<pre><code>public class MyHandlerInterceptorAdapter extends HandlerInterceptorAdapter {\n\n    @Override\n    public boolean preHandle(HttpServletRequest request, HttpServletResponse response, Object handler) throws Exception {\n      response.setHeader(\"Authorization\", \"token\");\n\n       return true;\n    }\n</code></pre>\n"}],"owner":{"account_id":10092377,"reputation":109,"user_id":7458937,"accept_rate":54,"display_name":"Meg"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":10487,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1699344265,"creation_date":1510903881,"question_id":47345435,"body_markdown":"Currently I am working in REST API in Java. My RestAPI is in separate maven project, And web application is in separate maven project. I have handled Basic Authentication in RestAPI. I want to set **Authorization in response header and also need to get it from HttpRequest in each request(Is this best practice?)**\r\n\r\nOnce I login into the application, login Username and password will forward to API, If once login credentials are valid, need to set Authorization header in Response. Each and every time I want to check the header whether the credentials are valid.\r\n\r\nMy Question is, \r\n\r\n1. How to set Authorization Header, and where to set?\r\n2. Either I want to set header in every response or only once?\r\n\r\nMy Web.xml(RestAPI)\r\n\r\n    &lt;http realm=&quot;MY APP REALM&quot;&gt;\r\n\t\t&lt;csrf disabled=&quot;true&quot; /&gt;\r\n\t\t&lt;intercept-url pattern=&quot;/rest/**&quot;\r\n\t\t\taccess=&quot;hasAnyRole(&#39;ROLE_ADMIN&#39;,&#39;ROLE_USER&#39;)&quot; /&gt;\r\n\t\t&lt;http-basic entry-point-ref=&quot;basicAuthenticationEntryPoint&quot; /&gt;\r\n\r\n\t&lt;/http&gt;\r\n\t&lt;beans:bean name=&quot;bcryptEncoder&quot;\r\n\t\tclass=&quot;org.springframework.security.crypto.bcrypt.BCryptPasswordEncoder&quot; /&gt;\r\n\t&lt;beans:bean name=&quot;ser&quot;\r\n\t\tclass=&quot;com.test.api.config.SampleUserDetailsService&quot; /&gt;\r\n\t&lt;beans:bean name=&quot;userService&quot; class=&quot;com.test.api.service.impl.UserServiceImpl&quot; /&gt;\r\n\r\n\t&lt;beans:bean name=&quot;basicAuthenticationEntryPoint&quot;\r\n\t\tclass=&quot;com.test.api.config.MyAppBasicAuthenticationEntryPoint&quot; /&gt;\r\n\r\n\r\n\t&lt;authentication-manager&gt;\r\n\t\t&lt;authentication-provider user-service-ref=&quot;ser&quot;&gt;\r\n\t\t\t&lt;password-encoder ref=&quot;bcryptEncoder&quot; /&gt;\r\n\t\t&lt;/authentication-provider&gt;\r\n\t&lt;/authentication-manager&gt;\r\n\r\n&lt;global-method-security secured-annotations=&quot;enabled&quot; /&gt;\r\n\r\n**REST API CONTROLLER**\r\n\r\n    @RestController\r\n    @RequestMapping(&quot;/rest&quot;)\r\n    public class RestServiceController {\r\n\r\n\t@Autowired\r\n\tIUserService userService;\r\n\r\n\r\n\t@RequestMapping(value = &quot;/user&quot;, method = RequestMethod.GET)\r\n\tpublic ResponseEntity&lt;List&lt;Users&gt;&gt; listAllUsers() {\r\n\t\tList&lt;Users&gt; users = userService.findAllUsers();\r\n\t\tif (users.isEmpty()) {\r\n\t\t\treturn new ResponseEntity&lt;List&lt;Users&gt;&gt;(HttpStatus.NO_CONTENT);// You many decide to return\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t// HttpStatus.NOT_FOUND\r\n\t\t}\r\n\t\treturn new ResponseEntity&lt;List&lt;Users&gt;&gt;(users, HttpStatus.OK);\r\n\t}\r\n\r\n    }\r\n\r\nHelp me to resolve this?\r\n\r\n","title":"How to set Authorization header in Rest API Basic Authentication","body":"<p>Currently I am working in REST API in Java. My RestAPI is in separate maven project, And web application is in separate maven project. I have handled Basic Authentication in RestAPI. I want to set <strong>Authorization in response header and also need to get it from HttpRequest in each request(Is this best practice?)</strong></p>\n\n<p>Once I login into the application, login Username and password will forward to API, If once login credentials are valid, need to set Authorization header in Response. Each and every time I want to check the header whether the credentials are valid.</p>\n\n<p>My Question is, </p>\n\n<ol>\n<li>How to set Authorization Header, and where to set?</li>\n<li>Either I want to set header in every response or only once?</li>\n</ol>\n\n<p>My Web.xml(RestAPI)</p>\n\n<pre><code>&lt;http realm=\"MY APP REALM\"&gt;\n    &lt;csrf disabled=\"true\" /&gt;\n    &lt;intercept-url pattern=\"/rest/**\"\n        access=\"hasAnyRole('ROLE_ADMIN','ROLE_USER')\" /&gt;\n    &lt;http-basic entry-point-ref=\"basicAuthenticationEntryPoint\" /&gt;\n\n&lt;/http&gt;\n&lt;beans:bean name=\"bcryptEncoder\"\n    class=\"org.springframework.security.crypto.bcrypt.BCryptPasswordEncoder\" /&gt;\n&lt;beans:bean name=\"ser\"\n    class=\"com.test.api.config.SampleUserDetailsService\" /&gt;\n&lt;beans:bean name=\"userService\" class=\"com.test.api.service.impl.UserServiceImpl\" /&gt;\n\n&lt;beans:bean name=\"basicAuthenticationEntryPoint\"\n    class=\"com.test.api.config.MyAppBasicAuthenticationEntryPoint\" /&gt;\n\n\n&lt;authentication-manager&gt;\n    &lt;authentication-provider user-service-ref=\"ser\"&gt;\n        &lt;password-encoder ref=\"bcryptEncoder\" /&gt;\n    &lt;/authentication-provider&gt;\n&lt;/authentication-manager&gt;\n</code></pre>\n\n<p></p>\n\n<p><strong>REST API CONTROLLER</strong></p>\n\n<pre><code>@RestController\n@RequestMapping(\"/rest\")\npublic class RestServiceController {\n\n@Autowired\nIUserService userService;\n\n\n@RequestMapping(value = \"/user\", method = RequestMethod.GET)\npublic ResponseEntity&lt;List&lt;Users&gt;&gt; listAllUsers() {\n    List&lt;Users&gt; users = userService.findAllUsers();\n    if (users.isEmpty()) {\n        return new ResponseEntity&lt;List&lt;Users&gt;&gt;(HttpStatus.NO_CONTENT);// You many decide to return\n                                                                        // HttpStatus.NOT_FOUND\n    }\n    return new ResponseEntity&lt;List&lt;Users&gt;&gt;(users, HttpStatus.OK);\n}\n\n}\n</code></pre>\n\n<p>Help me to resolve this?</p>\n"},{"tags":["java","multithreading","thread-safety","threadpoolexecutor"],"comments":[{"owner":{"account_id":11872577,"reputation":321,"user_id":8688388,"display_name":"M. Pour"},"score":0,"creation_date":1699344685,"post_id":77436418,"comment_id":136516525,"body_markdown":"Welcome to StackOverflow! \nIn your case I would recommend using &quot;Futures&quot; to Wait for Completion. Your CountDownLatch prevents re-entrance of the displaySale method. This is a good strategy to prevent A from being called again before E has been processed, but you need to reset the latch after E has been called, not before waiting for it.","body":"Welcome to StackOverflow!  In your case I would recommend using &quot;Futures&quot; to Wait for Completion. Your CountDownLatch prevents re-entrance of the displaySale method. This is a good strategy to prevent A from being called again before E has been processed, but you need to reset the latch after E has been called, not before waiting for it."},{"owner":{"account_id":2053598,"reputation":41316,"user_id":1831987,"display_name":"VGR"},"score":1,"creation_date":1699377251,"post_id":77436418,"comment_id":136522946,"body_markdown":"If A, B, etc. dont give you some way to know when theyre complete, there is nothing you can do, unless they produce some result you can monitor.  Im not clear on why the CountDownLatch is needed, since youre already executing these tasks on a single threaded executor, which guarantees they will never run concurrently.  Also, `if(latch!=null || latch.getCount()&gt;0)` does not do what you think it does;  if for some reason latch is null, that line will throw a NullPointerException.  You probably meant to use `&amp;&amp;` instead of `||`.","body":"If A, B, etc. dont give you some way to know when theyre complete, there is nothing you can do, unless they produce some result you can monitor.  Im not clear on why the CountDownLatch is needed, since youre already executing these tasks on a single threaded executor, which guarantees they will never run concurrently.  Also, <code>if(latch!=null || latch.getCount()&gt;0)</code> does not do what you think it does;  if for some reason latch is null, that line will throw a NullPointerException.  You probably meant to use <code>&amp;&amp;</code> instead of <code>||</code>."}],"owner":{"account_id":24144903,"reputation":21,"user_id":18110663,"display_name":"Ufuk Mirza Y&#252;ksel"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":43,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":0,"score":2,"last_activity_date":1699343806,"creation_date":1699343806,"question_id":77436418,"body_markdown":"I&#39;m struggling with how to summarize my problem since there may be questions that need to be asked before proposing a solution. I&#39;ll do my best to answer any queries.\r\n\r\nI have a series of functions: `A(), B(), C(), D().` These are called within a try block like this:\r\n\r\n```\r\nvoid CalculateX() {\r\n    try {\r\n        A();\r\n        B();\r\n        C();\r\n        D();\r\n    } catch (...) {\r\n        // handle exceptions\r\n    } finally {\r\n        E();\r\n    }\r\n}\r\n```\r\n\r\n\r\nThe functions inside this try block are processed on a different hardware thread. I&#39;m invoking the CalculateX function from React Native. To avoid locking the UI or causing delays, CalculateX needs to be executed on a separate thread. Each time a button is clicked in the React interface, the CalculateX function is called. Here&#39;s a solution I&#39;ve come up with (the code isn&#39;t &quot;clean,&quot; but my priority is resolving the issue):\r\n\r\n\r\n    \r\n```\r\nclass TaskExecutor {\r\n    static ExecutorService singleTaskExecutor = Executors.newSingleThreadExecutor();\r\n    \r\n    static CountDownLatch latch;\r\n    \r\n    @ReactMethod\r\n    static void displaySale(String msg_1, String msg_2, Context reactContext, QuarkCallback callback, FiscalPrinterExecuter fiscalPrinterExecuter, LogModule log) throws InterruptedException {\r\n        singleTaskExecutor.submit(() -&gt; {\r\n            try {\r\n                if(latch!=null || latch.getCount()&gt;0)\r\n                     latch.await();\r\n                latch = new CountDownLatch(1);\r\n                A();\r\n                B();\r\n                C();\r\n                // ... other calls\r\n            } catch (FiscalException | InterruptedException e) {\r\n                // log.addRecordToLogJ(&quot;Fiscal Error or Interruption&quot;);\r\n            } finally {\r\n                E();\r\n            }\r\n        });\r\n    }\r\n}    \r\n```\r\n\r\n\r\nAs expected, when the latch&#39;s count reaches 1 and latch.wait is called, it stops the single thread that is performing the display action, thus preventing any further processing on this thread.\r\n\r\nNow, my question:\r\nThe functions A, B, C, D... E are being processed internally on a different thread (although A, B, C, D, and E are processed within the same thread, they&#39;re part of a library function which, in turn, manages a new thread on its side). Since they are processed on a different thread, calling A, B, C, D functions doesn&#39;t wait for their completion (the process might take 3 seconds, but it proceeds immediately without waiting). How can I manage this within a thread queue?\r\n\r\nNote: The E function deals with hardware, akin to an `End()` operation, which shuts down the hardware.\r\nNote 2: If the A function is called twice in succession (without the E function being processed in between, like -&gt; A B C D A), the hardware crashes.\r\n\r\nI expect this thread structure works as I expected.\r\n\r\n\r\n\r\n","title":"Thread and MultiThread structure issue","body":"<p>I'm struggling with how to summarize my problem since there may be questions that need to be asked before proposing a solution. I'll do my best to answer any queries.</p>\n<p>I have a series of functions: <code>A(), B(), C(), D().</code> These are called within a try block like this:</p>\n<pre><code>void CalculateX() {\n    try {\n        A();\n        B();\n        C();\n        D();\n    } catch (...) {\n        // handle exceptions\n    } finally {\n        E();\n    }\n}\n</code></pre>\n<p>The functions inside this try block are processed on a different hardware thread. I'm invoking the CalculateX function from React Native. To avoid locking the UI or causing delays, CalculateX needs to be executed on a separate thread. Each time a button is clicked in the React interface, the CalculateX function is called. Here's a solution I've come up with (the code isn't &quot;clean,&quot; but my priority is resolving the issue):</p>\n<pre><code>class TaskExecutor {\n    static ExecutorService singleTaskExecutor = Executors.newSingleThreadExecutor();\n    \n    static CountDownLatch latch;\n    \n    @ReactMethod\n    static void displaySale(String msg_1, String msg_2, Context reactContext, QuarkCallback callback, FiscalPrinterExecuter fiscalPrinterExecuter, LogModule log) throws InterruptedException {\n        singleTaskExecutor.submit(() -&gt; {\n            try {\n                if(latch!=null || latch.getCount()&gt;0)\n                     latch.await();\n                latch = new CountDownLatch(1);\n                A();\n                B();\n                C();\n                // ... other calls\n            } catch (FiscalException | InterruptedException e) {\n                // log.addRecordToLogJ(&quot;Fiscal Error or Interruption&quot;);\n            } finally {\n                E();\n            }\n        });\n    }\n}    \n</code></pre>\n<p>As expected, when the latch's count reaches 1 and latch.wait is called, it stops the single thread that is performing the display action, thus preventing any further processing on this thread.</p>\n<p>Now, my question:\nThe functions A, B, C, D... E are being processed internally on a different thread (although A, B, C, D, and E are processed within the same thread, they're part of a library function which, in turn, manages a new thread on its side). Since they are processed on a different thread, calling A, B, C, D functions doesn't wait for their completion (the process might take 3 seconds, but it proceeds immediately without waiting). How can I manage this within a thread queue?</p>\n<p>Note: The E function deals with hardware, akin to an <code>End()</code> operation, which shuts down the hardware.\nNote 2: If the A function is called twice in succession (without the E function being processed in between, like -&gt; A B C D A), the hardware crashes.</p>\n<p>I expect this thread structure works as I expected.</p>\n"},{"tags":["java","maven","hadoop"],"answers":[{"tags":[],"owner":{"account_id":2671330,"reputation":183376,"user_id":2308683,"accept_rate":90,"display_name":"OneCricketeer"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1680547223,"creation_date":1680547223,"answer_id":75922760,"question_id":75916651,"body_markdown":"You need to download a winutils + hadoop.dll file that are compiled for Hadoop 3.3.4 (and/or 3.3.5, if you want to upgrade to that). Versions are not cross-compatible. Even 2.7.2 should not have worked for 2.10.1","title":"Upgrading hadoop from 2.10.2 to 3.3.4 - got &quot;java.lang.UnsatisfiedLinkError&quot;","body":"<p>You need to download a winutils + hadoop.dll file that are compiled for Hadoop 3.3.4 (and/or 3.3.5, if you want to upgrade to that). Versions are not cross-compatible. Even 2.7.2 should not have worked for 2.10.1</p>\n"}],"owner":{"account_id":3557875,"reputation":1330,"user_id":2971117,"accept_rate":90,"display_name":"Amita Patil"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":214,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1699343571,"creation_date":1680504254,"question_id":75916651,"body_markdown":"I was updating hadoop version from 2.10.1 to 3.3.4 in my maven pom file and got this error message-\r\n\r\n    java.lang.UnsatisfiedLinkError: org.apache.hadoop.io.nativeio.NativeIO$Windows.access0(Ljava/lang/String;I)Z\r\n\r\nI referred previous question on stack-overflow and added hadoop.dll to hadoop environment variable&#39;s path still got same error message, then I add it to System32 directory, and it starts working. I just wanted to know if someone know why we need to do this ?\r\nfor 2.10.1 I haven&#39;t added hadoop.dll, I just had winutils.exe (2.7.2) in my HDOOP_HOME/bin path","title":"Upgrading hadoop from 2.10.2 to 3.3.4 - got &quot;java.lang.UnsatisfiedLinkError&quot;","body":"<p>I was updating hadoop version from 2.10.1 to 3.3.4 in my maven pom file and got this error message-</p>\n<pre><code>java.lang.UnsatisfiedLinkError: org.apache.hadoop.io.nativeio.NativeIO$Windows.access0(Ljava/lang/String;I)Z\n</code></pre>\n<p>I referred previous question on stack-overflow and added hadoop.dll to hadoop environment variable's path still got same error message, then I add it to System32 directory, and it starts working. I just wanted to know if someone know why we need to do this ?\nfor 2.10.1 I haven't added hadoop.dll, I just had winutils.exe (2.7.2) in my HDOOP_HOME/bin path</p>\n"},{"tags":["java","hadoop"],"comments":[{"owner":{"account_id":5100890,"reputation":2796,"user_id":4090550,"display_name":"Anil Agrawal"},"score":0,"creation_date":1485347532,"post_id":41851066,"comment_id":70887091,"body_markdown":"It seems that java unable to find any native library. May be any dll file is corrupted or not accessible by java program.","body":"It seems that java unable to find any native library. May be any dll file is corrupted or not accessible by java program."},{"owner":{"account_id":5100890,"reputation":2796,"user_id":4090550,"display_name":"Anil Agrawal"},"score":0,"creation_date":1485347560,"post_id":41851066,"comment_id":70887105,"body_markdown":"There is a similar issue , you can check here http://stackoverflow.com/questions/18630019/running-apache-hadoop-2-1-0-on-windows","body":"There is a similar issue , you can check here <a href=\"http://stackoverflow.com/questions/18630019/running-apache-hadoop-2-1-0-on-windows\" title=\"running apache hadoop 2 1 0 on windows\">stackoverflow.com/questions/18630019/&hellip;</a>"},{"owner":{"account_id":9720588,"reputation":609,"user_id":7209455,"display_name":"sukumar konduru"},"score":0,"creation_date":1485349506,"post_id":41851066,"comment_id":70888306,"body_markdown":"in that case while starting daemons this problem occurring .but in my case no issues while starting but while executing map reduce program that exception occurring","body":"in that case while starting daemons this problem occurring .but in my case no issues while starting but while executing map reduce program that exception occurring"},{"owner":{"account_id":5100890,"reputation":2796,"user_id":4090550,"display_name":"Anil Agrawal"},"score":0,"creation_date":1485372139,"post_id":41851066,"comment_id":70903648,"body_markdown":"It seems any native library that is required for map reduce program is not accessible. Please share stack trace for more information.","body":"It seems any native library that is required for map reduce program is not accessible. Please share stack trace for more information."}],"answers":[{"tags":[],"owner":{"account_id":4105919,"reputation":1011,"user_id":3369952,"accept_rate":100,"display_name":"Julius Delfino"},"down_vote_count":0,"up_vote_count":27,"is_accepted":false,"score":27,"last_activity_date":1492570783,"creation_date":1492563143,"answer_id":43484457,"question_id":41851066,"body_markdown":"This issue occurred to me and the cause was I forgot to append `%HADOOP_HOME%/bin` to `PATH` in my environment variables.","title":"Exception in thread &quot;main&quot; java.lang.UnsatisfiedLinkError: org.apache.hadoop.io.nativeio.NativeIO$Windows.access0(Ljava/lang/String;I)Z","body":"<p>This issue occurred to me and the cause was I forgot to append <code>%HADOOP_HOME%/bin</code> to <code>PATH</code> in my environment variables.</p>\n"},{"tags":[],"owner":{"account_id":377596,"reputation":5231,"user_id":729819,"accept_rate":83,"display_name":"Ben Watson"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1523022870,"creation_date":1523022870,"answer_id":49694445,"question_id":41851066,"body_markdown":"I already had `%HADOOP_HOME%/bin` in my `PATH` and my code had previously run without errors. Restarting my machine made it work again.","title":"Exception in thread &quot;main&quot; java.lang.UnsatisfiedLinkError: org.apache.hadoop.io.nativeio.NativeIO$Windows.access0(Ljava/lang/String;I)Z","body":"<p>I already had <code>%HADOOP_HOME%/bin</code> in my <code>PATH</code> and my code had previously run without errors. Restarting my machine made it work again.</p>\n"},{"tags":[],"owner":{"account_id":2589717,"reputation":1,"user_id":2244682,"display_name":"hemanth"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1530789531,"creation_date":1530789531,"answer_id":51190016,"question_id":41851066,"body_markdown":"In Intellij under Run/Debug Configurations, open the application you are trying to run, Under configurations tab, specify the exact working Directory.having the variable to represent the working directory also creates this problem. When I changed the Working Directory under configurations, it started working again.","title":"Exception in thread &quot;main&quot; java.lang.UnsatisfiedLinkError: org.apache.hadoop.io.nativeio.NativeIO$Windows.access0(Ljava/lang/String;I)Z","body":"<p>In Intellij under Run/Debug Configurations, open the application you are trying to run, Under configurations tab, specify the exact working Directory.having the variable to represent the working directory also creates this problem. When I changed the Working Directory under configurations, it started working again.</p>\n"},{"tags":[],"owner":{"account_id":10258703,"reputation":1721,"user_id":8235911,"display_name":"Thirupathi Chavati"},"down_vote_count":0,"up_vote_count":61,"is_accepted":false,"score":61,"last_activity_date":1534162643,"creation_date":1534161325,"answer_id":51821790,"question_id":41851066,"body_markdown":"In addition to other solutions, Please download **winutil.exe** and **hadoop.dll** and add to $HADOOP_HOME/bin. It works for me.\r\n\r\nhttps://github.com/steveloughran/winutils/tree/master/hadoop-2.7.1/bin\r\n\r\n**Note: I&#39;m using hadoop-2.7.3 version**\r\n[![enter image description here][1]][1]\r\n\r\n[![enter image description here][2]][2]\r\n[![enter image description here][3]][3]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/lKZ5E.jpg\r\n  [2]: https://i.stack.imgur.com/t340I.jpg\r\n  [3]: https://i.stack.imgur.com/q1dCz.jpg","title":"Exception in thread &quot;main&quot; java.lang.UnsatisfiedLinkError: org.apache.hadoop.io.nativeio.NativeIO$Windows.access0(Ljava/lang/String;I)Z","body":"<p>In addition to other solutions, Please download <strong>winutil.exe</strong> and <strong>hadoop.dll</strong> and add to $HADOOP_HOME/bin. It works for me.</p>\n\n<p><a href=\"https://github.com/steveloughran/winutils/tree/master/hadoop-2.7.1/bin\" rel=\"noreferrer\">https://github.com/steveloughran/winutils/tree/master/hadoop-2.7.1/bin</a></p>\n\n<p><strong>Note: I'm using hadoop-2.7.3 version</strong>\n<a href=\"https://i.stack.imgur.com/lKZ5E.jpg\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/lKZ5E.jpg\" alt=\"enter image description here\"></a></p>\n\n<p><a href=\"https://i.stack.imgur.com/t340I.jpg\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/t340I.jpg\" alt=\"enter image description here\"></a>\n<a href=\"https://i.stack.imgur.com/q1dCz.jpg\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/q1dCz.jpg\" alt=\"enter image description here\"></a></p>\n"},{"tags":[],"owner":{"account_id":5410847,"reputation":1419,"user_id":5050002,"accept_rate":43,"display_name":"Aman Tandon"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1536688244,"creation_date":1536688244,"answer_id":52281574,"question_id":41851066,"body_markdown":"For me this issue was resolved by downloading the winutils.exe &amp; hadoop.dll from https://github.com/steveloughran/winutils/tree/master/hadoop-2.7.1/bin  and putting those in hadoop/bin folder","title":"Exception in thread &quot;main&quot; java.lang.UnsatisfiedLinkError: org.apache.hadoop.io.nativeio.NativeIO$Windows.access0(Ljava/lang/String;I)Z","body":"<p>For me this issue was resolved by downloading the winutils.exe &amp; hadoop.dll from <a href=\"https://github.com/steveloughran/winutils/tree/master/hadoop-2.7.1/bin\" rel=\"nofollow noreferrer\">https://github.com/steveloughran/winutils/tree/master/hadoop-2.7.1/bin</a>  and putting those in hadoop/bin folder</p>\n"},{"tags":[],"owner":{"account_id":2186293,"reputation":15,"user_id":1934649,"display_name":"ravi"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1552316259,"creation_date":1552314419,"answer_id":55104089,"question_id":41851066,"body_markdown":"Yes this issues arose when I was using the `PIGUNITS` for automation of `PIGSCRIPTS`.  Two things in sequence need to be done:\r\n\r\n 1. Copy both the files as mentioned about in a location and add it to the environment variables under PATH.\r\n\r\n 2. To reflect the change what you have just done, you have to restart your machine to load the file.\r\n\r\nUnder JUNIT I was getting this error which would help others as well:\r\n\r\n&gt;org.apache.pig.impl.logicalLayer.FrontendException: ERROR 1066: Unable to open iterator for alias XXXXX. Backend error : java.lang.IllegalStateException: Job in state DEFINE instead of RUNNING\r\n\tat org.apache.pig.PigServer.openIterator(PigServer.java:925)\r\n\t","title":"Exception in thread &quot;main&quot; java.lang.UnsatisfiedLinkError: org.apache.hadoop.io.nativeio.NativeIO$Windows.access0(Ljava/lang/String;I)Z","body":"<p>Yes this issues arose when I was using the <code>PIGUNITS</code> for automation of <code>PIGSCRIPTS</code>.  Two things in sequence need to be done:</p>\n\n<ol>\n<li><p>Copy both the files as mentioned about in a location and add it to the environment variables under PATH.</p></li>\n<li><p>To reflect the change what you have just done, you have to restart your machine to load the file.</p></li>\n</ol>\n\n<p>Under JUNIT I was getting this error which would help others as well:</p>\n\n<blockquote>\n  <p>org.apache.pig.impl.logicalLayer.FrontendException: ERROR 1066: Unable to open iterator for alias XXXXX. Backend error : java.lang.IllegalStateException: Job in state DEFINE instead of RUNNING\n      at org.apache.pig.PigServer.openIterator(PigServer.java:925)</p>\n</blockquote>\n"},{"tags":[],"owner":{"account_id":2667614,"reputation":1734,"user_id":2305655,"display_name":"JasonWayne"},"down_vote_count":0,"up_vote_count":54,"is_accepted":false,"score":54,"last_activity_date":1680100416,"creation_date":1552986573,"answer_id":55237159,"question_id":41851066,"body_markdown":"After putting `hadoop.dll` and `winutils` in `hadoop/bin` folder and adding the folder of hadoop to `PATH`, we also need to put `hadoop.dll` into the `C:\\Windows\\System32` folder","title":"Exception in thread &quot;main&quot; java.lang.UnsatisfiedLinkError: org.apache.hadoop.io.nativeio.NativeIO$Windows.access0(Ljava/lang/String;I)Z","body":"<p>After putting <code>hadoop.dll</code> and <code>winutils</code> in <code>hadoop/bin</code> folder and adding the folder of hadoop to <code>PATH</code>, we also need to put <code>hadoop.dll</code> into the <code>C:\\Windows\\System32</code> folder</p>\n"},{"tags":[],"owner":{"account_id":1994057,"reputation":61,"user_id":1787370,"display_name":"Vik_Technologist"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1602701349,"creation_date":1602701349,"answer_id":64359727,"question_id":41851066,"body_markdown":"The version mismacth is main cause for this issue. Follow complete hadoop version with java library will solve the issue and if you still face issue and working on hadoop 3.1.x version use this library to download bin\r\n\r\n```https://github.com/s911415/apache-hadoop-3.1.0-winutils/tree/master/bin```","title":"Exception in thread &quot;main&quot; java.lang.UnsatisfiedLinkError: org.apache.hadoop.io.nativeio.NativeIO$Windows.access0(Ljava/lang/String;I)Z","body":"<p>The version mismacth is main cause for this issue. Follow complete hadoop version with java library will solve the issue and if you still face issue and working on hadoop 3.1.x version use this library to download bin</p>\n<p><code>https://github.com/s911415/apache-hadoop-3.1.0-winutils/tree/master/bin</code></p>\n"},{"tags":[],"owner":{"account_id":7165973,"reputation":81,"user_id":5475072,"display_name":"mohit bhindwal"},"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1626589342,"creation_date":1626589342,"answer_id":68426577,"question_id":41851066,"body_markdown":"After trying all the above, things worked after putting hadoop.dll to windows/System32","title":"Exception in thread &quot;main&quot; java.lang.UnsatisfiedLinkError: org.apache.hadoop.io.nativeio.NativeIO$Windows.access0(Ljava/lang/String;I)Z","body":"<p>After trying all the above, things worked after putting hadoop.dll to windows/System32</p>\n"},{"tags":[],"owner":{"account_id":22401593,"reputation":111,"user_id":16611931,"display_name":"OsvaldoP"},"down_vote_count":0,"up_vote_count":11,"is_accepted":false,"score":11,"last_activity_date":1680100374,"creation_date":1628322344,"answer_id":68690357,"question_id":41851066,"body_markdown":"In my case I was having this issue when running unit tests on local machine after upgrading dependencies to `CDH6`. I already had `HADOOP_HOME` and `PATH` variables configured properly but I had to copy the `hadoop.dll` to `C:\\Windows\\System32` as suggested in the other answer.","title":"Exception in thread &quot;main&quot; java.lang.UnsatisfiedLinkError: org.apache.hadoop.io.nativeio.NativeIO$Windows.access0(Ljava/lang/String;I)Z","body":"<p>In my case I was having this issue when running unit tests on local machine after upgrading dependencies to <code>CDH6</code>. I already had <code>HADOOP_HOME</code> and <code>PATH</code> variables configured properly but I had to copy the <code>hadoop.dll</code> to <code>C:\\Windows\\System32</code> as suggested in the other answer.</p>\n"},{"tags":[],"owner":{"account_id":9001959,"reputation":47,"user_id":6710245,"display_name":"Shubham Chourasia"},"down_vote_count":2,"up_vote_count":1,"is_accepted":false,"score":-1,"last_activity_date":1629366656,"creation_date":1629366656,"answer_id":68845649,"question_id":41851066,"body_markdown":"This might be old but if its still not working for someone, Step 1- Double click on winutils.exe. If it shows some dll file is missing, download that .dll file and place that at appropriate place.\r\n\r\nIn my case, msvcr100.dll wasmissing and I had to install Microsoft Visual C++ 2010 Service Pack 1 Redistributable Package to make it work.\r\nAll the best ","title":"Exception in thread &quot;main&quot; java.lang.UnsatisfiedLinkError: org.apache.hadoop.io.nativeio.NativeIO$Windows.access0(Ljava/lang/String;I)Z","body":"<p>This might be old but if its still not working for someone, Step 1- Double click on winutils.exe. If it shows some dll file is missing, download that .dll file and place that at appropriate place.</p>\n<p>In my case, msvcr100.dll wasmissing and I had to install Microsoft Visual C++ 2010 Service Pack 1 Redistributable Package to make it work.\nAll the best</p>\n"},{"tags":[],"owner":{"account_id":23996770,"reputation":41,"user_id":17982199,"display_name":"MansourAlawi"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1642666912,"creation_date":1642666912,"answer_id":70782826,"question_id":41851066,"body_markdown":"Adding hadoop.dll and WinUntils.exe fixed the error, support for latest versions can be found [here][1] \r\n\r\n\r\n  [1]: https://github.com/cdarlint/winutils","title":"Exception in thread &quot;main&quot; java.lang.UnsatisfiedLinkError: org.apache.hadoop.io.nativeio.NativeIO$Windows.access0(Ljava/lang/String;I)Z","body":"<p>Adding hadoop.dll and WinUntils.exe fixed the error, support for latest versions can be found <a href=\"https://github.com/cdarlint/winutils\" rel=\"nofollow noreferrer\">here</a></p>\n"},{"tags":[],"owner":{"account_id":15393432,"reputation":1051,"user_id":11105356,"display_name":"ahmedshahriar"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1645991516,"creation_date":1645991516,"answer_id":71288001,"question_id":41851066,"body_markdown":"I already had `%HADOOP_HOME%/bin` in my PATH. Adding [hadoop.dll](https://github.com/cdarlint/winutils/blob/master/hadoop-3.2.2/bin/hadoop.dll) in `Hadoop/bin directory` made it work again.","title":"Exception in thread &quot;main&quot; java.lang.UnsatisfiedLinkError: org.apache.hadoop.io.nativeio.NativeIO$Windows.access0(Ljava/lang/String;I)Z","body":"<p>I already had <code>%HADOOP_HOME%/bin</code> in my PATH. Adding <a href=\"https://github.com/cdarlint/winutils/blob/master/hadoop-3.2.2/bin/hadoop.dll\" rel=\"nofollow noreferrer\">hadoop.dll</a> in <code>Hadoop/bin directory</code> made it work again.</p>\n"},{"tags":[],"owner":{"account_id":23765145,"reputation":21,"user_id":17779998,"display_name":"Ardan"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1651314455,"creation_date":1651314455,"answer_id":72067692,"question_id":41851066,"body_markdown":"\r\n\r\nThis is what worked for me: Download the latest winutils https://github.com/kontext-tech/winutils Or check your spark Release text, it shows the cer of Hadoop it is using\r\n\r\nSteps\r\n\r\n1. Dowload repo\r\n2. Create a folder named hadoop anywhere (e.g. desktop/hadoop)\r\n3. Paste the bin into that folder (you will then have hadoop/bin)\r\n4. copy hadoop.dll to windows/system32\r\n5. Set system environment: \r\n\r\n       set HADOOP_HOME=c:/desktop/hadoop \r\n       set PATH=%PATH%;%HADOOP_HOME%/bin;\r\n\r\n","title":"Exception in thread &quot;main&quot; java.lang.UnsatisfiedLinkError: org.apache.hadoop.io.nativeio.NativeIO$Windows.access0(Ljava/lang/String;I)Z","body":"<p>This is what worked for me: Download the latest winutils <a href=\"https://github.com/kontext-tech/winutils\" rel=\"nofollow noreferrer\">https://github.com/kontext-tech/winutils</a> Or check your spark Release text, it shows the cer of Hadoop it is using</p>\n<p>Steps</p>\n<ol>\n<li><p>Dowload repo</p>\n</li>\n<li><p>Create a folder named hadoop anywhere (e.g. desktop/hadoop)</p>\n</li>\n<li><p>Paste the bin into that folder (you will then have hadoop/bin)</p>\n</li>\n<li><p>copy hadoop.dll to windows/system32</p>\n</li>\n<li><p>Set system environment:</p>\n<pre><code>set HADOOP_HOME=c:/desktop/hadoop \nset PATH=%PATH%;%HADOOP_HOME%/bin;\n</code></pre>\n</li>\n</ol>\n"},{"tags":[],"owner":{"account_id":1084957,"reputation":1067,"user_id":1080874,"display_name":"maoyang"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1680100268,"creation_date":1664243535,"answer_id":73861589,"question_id":41851066,"body_markdown":"For me, I have to download the winutils from https://github.com/kontext-tech/winutils as it has the latest version 3.3. \r\n\r\nIt is important to make sure the version matches to the Hadoop version you downloaded (with or without Spark) otherwise, you can find some weird error messages. \r\n\r\nBoth hadoop.dll and winutils.exe are fine to be at the same folder C:/hadoop/bin. I didn&#39;t copy either to system folder and it works.\r\n\r\nNote: I followed [this][1] except the download pages of winutils tool.\r\n\r\n\r\n  [1]: https://phoenixnap.com/kb/install-spark-on-windows-10","title":"Exception in thread &quot;main&quot; java.lang.UnsatisfiedLinkError: org.apache.hadoop.io.nativeio.NativeIO$Windows.access0(Ljava/lang/String;I)Z","body":"<p>For me, I have to download the winutils from <a href=\"https://github.com/kontext-tech/winutils\" rel=\"nofollow noreferrer\">https://github.com/kontext-tech/winutils</a> as it has the latest version 3.3.</p>\n<p>It is important to make sure the version matches to the Hadoop version you downloaded (with or without Spark) otherwise, you can find some weird error messages.</p>\n<p>Both hadoop.dll and winutils.exe are fine to be at the same folder C:/hadoop/bin. I didn't copy either to system folder and it works.</p>\n<p>Note: I followed <a href=\"https://phoenixnap.com/kb/install-spark-on-windows-10\" rel=\"nofollow noreferrer\">this</a> except the download pages of winutils tool.</p>\n"},{"tags":[],"owner":{"account_id":24078435,"reputation":13,"user_id":18053396,"display_name":"Bao Nguyen"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1664312611,"creation_date":1664312611,"answer_id":73873794,"question_id":41851066,"body_markdown":"After downloading and configuring hadoop.dll and wintuils.exe as previous answer, you need to &quot;restart the windows&quot; to make it works.","title":"Exception in thread &quot;main&quot; java.lang.UnsatisfiedLinkError: org.apache.hadoop.io.nativeio.NativeIO$Windows.access0(Ljava/lang/String;I)Z","body":"<p>After downloading and configuring hadoop.dll and wintuils.exe as previous answer, you need to &quot;restart the windows&quot; to make it works.</p>\n"},{"tags":[],"owner":{"account_id":18710977,"reputation":1,"user_id":13641063,"display_name":"Yegor"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1674896450,"creation_date":1674896450,"answer_id":75266505,"question_id":41851066,"body_markdown":"In my case (**pyspark = 3.3.1, Spark version = 3.3.1, Hadoop version = 3.3.2**)\r\nI set env vars by python code\r\n\r\n    os.environ[&#39;PYSPARK_PYTHON&#39;] = sys.executable\r\n    os.environ[&#39;HADOOP_HOME&#39;] = &quot;C:\\\\Program Files\\\\Hadoop\\\\&quot;\r\n\r\nadded from [https://github.com/kontext-tech/winutils][1] to bin folder last version of hadoop files **hadoop-3.4.0-win10-x64** and added **hadoop.dll** to **C:\\Windows\\System32** \r\n\r\n\r\n  [1]: https://github.com/kontext-tech/winutils","title":"Exception in thread &quot;main&quot; java.lang.UnsatisfiedLinkError: org.apache.hadoop.io.nativeio.NativeIO$Windows.access0(Ljava/lang/String;I)Z","body":"<p>In my case (<strong>pyspark = 3.3.1, Spark version = 3.3.1, Hadoop version = 3.3.2</strong>)\nI set env vars by python code</p>\n<pre><code>os.environ['PYSPARK_PYTHON'] = sys.executable\nos.environ['HADOOP_HOME'] = &quot;C:\\\\Program Files\\\\Hadoop\\\\&quot;\n</code></pre>\n<p>added from <a href=\"https://github.com/kontext-tech/winutils\" rel=\"nofollow noreferrer\">https://github.com/kontext-tech/winutils</a> to bin folder last version of hadoop files <strong>hadoop-3.4.0-win10-x64</strong> and added <strong>hadoop.dll</strong> to <strong>C:\\Windows\\System32</strong></p>\n"},{"tags":[],"owner":{"account_id":27777536,"reputation":1,"user_id":21206582,"display_name":"Victor Hugo"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1680100093,"creation_date":1676319378,"answer_id":75440762,"question_id":41851066,"body_markdown":"I&#39;m using Spark version 3.1.2 and hadoop 3.2 (spark-3.1.2-bin-hadoop3.2).\r\n\r\n I solved this by just downloading the hadoop.dll file from a Github page = https://github.com/cdarlint/winutils\r\nand saving it to the bin folder within my spark folder. Then  spark-submit went smooth.\r\n","title":"Exception in thread &quot;main&quot; java.lang.UnsatisfiedLinkError: org.apache.hadoop.io.nativeio.NativeIO$Windows.access0(Ljava/lang/String;I)Z","body":"<p>I'm using Spark version 3.1.2 and hadoop 3.2 (spark-3.1.2-bin-hadoop3.2).</p>\n<p>I solved this by just downloading the hadoop.dll file from a Github page = <a href=\"https://github.com/cdarlint/winutils\" rel=\"nofollow noreferrer\">https://github.com/cdarlint/winutils</a>\nand saving it to the bin folder within my spark folder. Then  spark-submit went smooth.</p>\n"},{"tags":[],"owner":{"account_id":28760646,"reputation":1,"user_id":22026620,"display_name":"Steve Hawkins"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1686006601,"creation_date":1686006601,"answer_id":76410515,"question_id":41851066,"body_markdown":"Whereas all the above recommendations failed to resolve this error for me. Setting the environment variable HADOOP_BIN_PATH resolved the error for me. Also another related error where the word access0 in the error string is replaced with [createDirectoryWithMode0][1].\r\n\r\nIf you look in the hadoop/bin folder and inspect hdfs.cmd and mapred.cmd it is clear that the HADOOP_BIN_PATH environment variable is expected. For example this code:\r\n\r\n    if not defined HADOOP_BIN_PATH ( \r\n      set HADOOP_BIN_PATH=%~dp0\r\n    )\r\n\r\n%~dp0 should expand to the folder containing the cmd file. However, you could imagine other components of hadoop such as the daemons that do not start from the command line which may also expect this environment variable to be set.\r\n\r\nSet HADOOP_BIN_PATH to the bin folder under your hadoop directory.\r\n\r\nIf you set a user environment variable you will need to restart the process running your application. If you set a system environment variable you will need to restart Windows to see the effect.\r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/51282184/java-lang-unsatisfiedlinkerror-org-apache-hadoop-io-nativeio-nativeiowindows-c","title":"Exception in thread &quot;main&quot; java.lang.UnsatisfiedLinkError: org.apache.hadoop.io.nativeio.NativeIO$Windows.access0(Ljava/lang/String;I)Z","body":"<p>Whereas all the above recommendations failed to resolve this error for me. Setting the environment variable HADOOP_BIN_PATH resolved the error for me. Also another related error where the word access0 in the error string is replaced with <a href=\"https://stackoverflow.com/questions/51282184/java-lang-unsatisfiedlinkerror-org-apache-hadoop-io-nativeio-nativeiowindows-c\">createDirectoryWithMode0</a>.</p>\n<p>If you look in the hadoop/bin folder and inspect hdfs.cmd and mapred.cmd it is clear that the HADOOP_BIN_PATH environment variable is expected. For example this code:</p>\n<pre><code>if not defined HADOOP_BIN_PATH ( \n  set HADOOP_BIN_PATH=%~dp0\n)\n</code></pre>\n<p>%~dp0 should expand to the folder containing the cmd file. However, you could imagine other components of hadoop such as the daemons that do not start from the command line which may also expect this environment variable to be set.</p>\n<p>Set HADOOP_BIN_PATH to the bin folder under your hadoop directory.</p>\n<p>If you set a user environment variable you will need to restart the process running your application. If you set a system environment variable you will need to restart Windows to see the effect.</p>\n"},{"tags":[],"owner":{"account_id":19994439,"reputation":1,"user_id":14654816,"display_name":"asachal"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1699343502,"creation_date":1699343502,"answer_id":77436393,"question_id":41851066,"body_markdown":"If the issue still persists after adding the correct version of hadoop winutils + hadoop.dll, check if you have installed JRE or JDK. \r\n\r\nHadoop is written in Java. So it would require JRE (Java Runtime Environment) at the very least with the supported version. But JRE (Java Runtime Environment) is insufficient. \r\nFor running Map-Reduce jobs, Hadoop essentially requires JDK (Java Development Kit). This is why after installation (with JRE), when you run the command `pyspark` in the terminal, you get this `Unable to load native-hadoop library for your platform` warning.\r\nFor me, switching to JDK resolved these issues.\r\n\r\nHere&#39;s a thread on JDK requirement for Hadoop: https://www.quora.com/Why-we-need-JDK-for-Hadoop-installation","title":"Exception in thread &quot;main&quot; java.lang.UnsatisfiedLinkError: org.apache.hadoop.io.nativeio.NativeIO$Windows.access0(Ljava/lang/String;I)Z","body":"<p>If the issue still persists after adding the correct version of hadoop winutils + hadoop.dll, check if you have installed JRE or JDK.</p>\n<p>Hadoop is written in Java. So it would require JRE (Java Runtime Environment) at the very least with the supported version. But JRE (Java Runtime Environment) is insufficient.\nFor running Map-Reduce jobs, Hadoop essentially requires JDK (Java Development Kit). This is why after installation (with JRE), when you run the command <code>pyspark</code> in the terminal, you get this <code>Unable to load native-hadoop library for your platform</code> warning.\nFor me, switching to JDK resolved these issues.</p>\n<p>Here's a thread on JDK requirement for Hadoop: <a href=\"https://www.quora.com/Why-we-need-JDK-for-Hadoop-installation\" rel=\"nofollow noreferrer\">https://www.quora.com/Why-we-need-JDK-for-Hadoop-installation</a></p>\n"}],"owner":{"account_id":9720588,"reputation":609,"user_id":7209455,"display_name":"sukumar konduru"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":87104,"favorite_count":0,"down_vote_count":0,"up_vote_count":61,"answer_count":20,"score":61,"last_activity_date":1699343502,"creation_date":1485345493,"question_id":41851066,"body_markdown":"trying to run MR program version(2.7) in windows 7 64 bit in eclipse while running the above exception occurring .\r\n  I verified that using 64 bit 1.8 java version and observed that all the hadoop daemons are running.\r\n\r\nAny suggestions highly appreciated\r\n","title":"Exception in thread &quot;main&quot; java.lang.UnsatisfiedLinkError: org.apache.hadoop.io.nativeio.NativeIO$Windows.access0(Ljava/lang/String;I)Z","body":"<p>trying to run MR program version(2.7) in windows 7 64 bit in eclipse while running the above exception occurring .\n  I verified that using 64 bit 1.8 java version and observed that all the hadoop daemons are running.</p>\n\n<p>Any suggestions highly appreciated</p>\n"},{"tags":["java","maven","debugging","intellij-idea"],"comments":[{"owner":{"account_id":6715571,"reputation":4013,"user_id":5177506,"display_name":"hunter"},"score":0,"creation_date":1559920866,"post_id":56496517,"comment_id":99583132,"body_markdown":"close IDEA. build maven project using (mvn clean install). then open IDEA and the project and re-import it. then in run/debug configuration set the right module to  pick the class path.","body":"close IDEA. build maven project using (mvn clean install). then open IDEA and the project and re-import it. then in run/debug configuration set the right module to  pick the class path."}],"answers":[{"tags":[],"owner":{"account_id":14821,"reputation":4241,"user_id":30807,"accept_rate":79,"display_name":"branchgabriel"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1559918910,"creation_date":1559918910,"answer_id":56496581,"question_id":56496517,"body_markdown":"This is typically caused because there is a process running that it is connected to but you have no way to find it. \r\n\r\nThe only way to resolve it is to reboot your machine.","title":"Intellij - Debugger Breakpoints not working anymore","body":"<p>This is typically caused because there is a process running that it is connected to but you have no way to find it. </p>\n\n<p>The only way to resolve it is to reboot your machine.</p>\n"},{"tags":[],"owner":{"account_id":463465,"reputation":4099,"user_id":866390,"accept_rate":51,"display_name":"Joe Almore"},"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1559925022,"creation_date":1559925022,"answer_id":56498162,"question_id":56496517,"body_markdown":"Solved the issue. It ended up being that I am using another application (`NetLimiter`) to limit the traffic in the network and I limited few days ago `IntelliJ` to consume only 5 kbps at any time and this was the problem. I simply removed the limitation and the debugger starting working again normally at its usual speed.","title":"Intellij - Debugger Breakpoints not working anymore","body":"<p>Solved the issue. It ended up being that I am using another application (<code>NetLimiter</code>) to limit the traffic in the network and I limited few days ago <code>IntelliJ</code> to consume only 5 kbps at any time and this was the problem. I simply removed the limitation and the debugger starting working again normally at its usual speed.</p>\n"},{"tags":[],"owner":{"account_id":11653603,"reputation":2210,"user_id":8534088,"display_name":"Dmitriy Popov"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1560440033,"creation_date":1560440033,"answer_id":56583989,"question_id":56496517,"body_markdown":"&gt; Now, the application takes about +10+20 seconds to start and when the\r\n&gt; breakpoints are hit, it simply hangs and do nothing else.\r\n\r\nBy this syptom I can suggest that you have accidentally added some field or method breakpoint. Please check that there are no field or method breakpoints present in Breakpoints window (`Ctrl + Shift + F8`). If they exist - remove them.","title":"Intellij - Debugger Breakpoints not working anymore","body":"<blockquote>\n  <p>Now, the application takes about +10+20 seconds to start and when the\n  breakpoints are hit, it simply hangs and do nothing else.</p>\n</blockquote>\n\n<p>By this syptom I can suggest that you have accidentally added some field or method breakpoint. Please check that there are no field or method breakpoints present in Breakpoints window (<code>Ctrl + Shift + F8</code>). If they exist - remove them.</p>\n"},{"tags":[],"owner":{"account_id":10109755,"reputation":590,"user_id":7471133,"accept_rate":67,"display_name":"Ajay"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1699343271,"creation_date":1699343271,"answer_id":77436374,"question_id":56496517,"body_markdown":"This worked for me\r\n\r\nUnder Intellij Idea \r\n 1. click on Edit Configuration\r\n 2. Go to Run and add below command\r\n 3. spring-boot:run -Dspring-boot.run.fork=false\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/dWuzg.png","title":"Intellij - Debugger Breakpoints not working anymore","body":"<p>This worked for me</p>\n<p>Under Intellij Idea</p>\n<ol>\n<li>click on Edit Configuration</li>\n<li>Go to Run and add below command</li>\n<li>spring-boot:run -Dspring-boot.run.fork=false</li>\n</ol>\n<p><a href=\"https://i.stack.imgur.com/dWuzg.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/dWuzg.png\" alt=\"enter image description here\" /></a></p>\n"}],"owner":{"account_id":463465,"reputation":4099,"user_id":866390,"accept_rate":51,"display_name":"Joe Almore"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":9343,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"accepted_answer_id":56498162,"answer_count":4,"score":3,"last_activity_date":1699343271,"creation_date":1559918652,"question_id":56496517,"body_markdown":"I was working/debugging normally on my `Java-Maven` project with `IntelliJ 2018.2.1`, I then click on Intellij to Stop the app to make some modifications to the code and when I start the application again in debug mode, it (the debugger) simply stopped working.\r\n\r\nNow, the application takes about +10+20 seconds to start and when the breakpoints are hit, it simply hangs and do nothing else.\r\n\r\nI have tried many of the suggestions posted on Internet, but none of those seems to work. I also tried to `Invalidate/Restart the IDE`, but nothing.\r\n\r\nNow, the breakpoints aren&#39;t even marked as valid any more, it only shows the red circle without the tick verification check. And it also extended to all projects, so now none of the projects the debugger works and the same symptoms are in all projects.\r\n\r\nIf anyone have any suggestion on this, would really appreciate it.","title":"Intellij - Debugger Breakpoints not working anymore","body":"<p>I was working/debugging normally on my <code>Java-Maven</code> project with <code>IntelliJ 2018.2.1</code>, I then click on Intellij to Stop the app to make some modifications to the code and when I start the application again in debug mode, it (the debugger) simply stopped working.</p>\n\n<p>Now, the application takes about +10+20 seconds to start and when the breakpoints are hit, it simply hangs and do nothing else.</p>\n\n<p>I have tried many of the suggestions posted on Internet, but none of those seems to work. I also tried to <code>Invalidate/Restart the IDE</code>, but nothing.</p>\n\n<p>Now, the breakpoints aren't even marked as valid any more, it only shows the red circle without the tick verification check. And it also extended to all projects, so now none of the projects the debugger works and the same symptoms are in all projects.</p>\n\n<p>If anyone have any suggestion on this, would really appreciate it.</p>\n"},{"tags":["java","playwright","playwright-java"],"comments":[{"owner":{"account_id":8306545,"reputation":47686,"user_id":6243352,"display_name":"ggorlen"},"score":1,"creation_date":1699327619,"post_id":77435348,"comment_id":136514893,"body_markdown":"Please share the page and a [mcve]. A number of things could be preventing the code from working, like the site blocking you as a bot.","body":"Please share the page and a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>. A number of things could be preventing the code from working, like the site blocking you as a bot."}],"answers":[{"tags":[],"owner":{"account_id":28576273,"reputation":45,"user_id":21877834,"display_name":"Muhammad Saad"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1699343114,"creation_date":1699343114,"answer_id":77436354,"question_id":77435348,"body_markdown":"You can do something like this \r\n\r\n     textIframe = await page.waitForSelector(&#39;iframe&#39;) // here you are finding iframe (you can also use iframe id to get iframe)\r\n     textframe = await textIframe.contentFrame(); // here you are getting all the content inside that frame\r\n     await textframe?.locator(&quot;//input[@name=&#39;full_name&#39;]&quot;).fill(fullname)\r\ntextframe?.locator(&quot;//input[@name=&#39;email&#39;]&quot;).fill(email)\r\n\r\n**Note** I noticed that you are missing the `await` keyword that may also be the issue.\r\n","title":"Locating web elements in iFrame in Playwright","body":"<p>You can do something like this</p>\n<pre><code> textIframe = await page.waitForSelector('iframe') // here you are finding iframe (you can also use iframe id to get iframe)\n textframe = await textIframe.contentFrame(); // here you are getting all the content inside that frame\n await textframe?.locator(&quot;//input[@name='full_name']&quot;).fill(fullname)\n</code></pre>\n<p>textframe?.locator(&quot;//input[@name='email']&quot;).fill(email)</p>\n<p><strong>Note</strong> I noticed that you are missing the <code>await</code> keyword that may also be the issue.</p>\n"}],"owner":{"account_id":1842614,"reputation":1815,"user_id":1671718,"accept_rate":49,"display_name":"mungaih pk"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":84,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1699343114,"creation_date":1699326598,"question_id":77435348,"body_markdown":"I am working on a test automation framework using Playwright with Java.\r\nI am trying to locate elements inside an iFrame but unsuccessfully. I have tried all techniques I have seen online, including from the official documentation here [Playwright - FrameLocator][1]\r\n\r\nHere is how the page lookslike:\r\n[![enter image description here][2]][2]\r\n\r\nAnd below is my code to get the elements inside the iframe. \r\n\r\n    textbox_fullname = page.frameLocator(&quot;#hs-form-iframe-1&quot;).locator(&quot;//input[@name=&#39;full_name&#39;]&quot;);\r\n    textbox_email = page.frameLocator(&quot;#hs-form-iframe-1&quot;).locator(&quot;//input[@name=&#39;email&#39;]&quot;);\r\n    textbox_company = page.frameLocator(&quot;#hs-form-iframe-1&quot;).locator(&quot;//input[@name=&#39;company&#39;]&quot;);\r\n\r\nWhen I run the code, I get below error when trying to fill the textboxes:\r\n\r\n    com.microsoft.playwright.TimeoutError: Error {\r\n      message=&#39;Timeout 30000ms exceeded.\r\n    =========================== logs ===========================\r\n    waiting for frameLocator(&quot;#hs-form-iframe-0&quot;).locator(&quot;xpath=//input[@name=&#39;full_name&#39;]&quot;)\r\n    ============================================================\r\n      name=&#39;TimeoutError\r\n      stack=&#39;TimeoutError: Timeout 30000ms exceeded.\r\n    =========================== logs ===========================\r\n    waiting for frameLocator(&quot;#hs-form-iframe-0&quot;).locator(&quot;xpath=//input[@name=&#39;full_name&#39;]&quot;)\r\n    ============================================================\r\n        at ProgressController.run (/private/var/folders/73/5k8n8v652z74r4lbcfj6qx4r0000gn/T/playwright-java-5227362604092639653/package/lib/server/progress.js:88:26)\r\n        at Frame.fill (/private/var/folders/73/5k8n8v652z74r4lbcfj6qx4r0000gn/T/playwright-java-5227362604092639653/package/lib/server/frames.js:1039:23)\r\n        at FrameDispatcher.fill (/private/var/folders/73/5k8n8v652z74r4lbcfj6qx4r0000gn/T/playwright-java-5227362604092639653/package/lib/server/dispatchers/frameDispatcher.js:166:30)\r\n        at DispatcherConnection.dispatch (/private/var/folders/73/5k8n8v652z74r4lbcfj6qx4r0000gn/T/playwright-java-5227362604092639653/package/lib/server/dispatchers/dispatcher.js:346:46)\r\n    }\r\n\r\nWhat am I doing wrong? Thanks for your assistance.\r\n\r\n  [1]: https://playwright.dev/java/docs/api/class-framelocator\r\n  [2]: https://i.stack.imgur.com/ZWTrU.png","title":"Locating web elements in iFrame in Playwright","body":"<p>I am working on a test automation framework using Playwright with Java.\nI am trying to locate elements inside an iFrame but unsuccessfully. I have tried all techniques I have seen online, including from the official documentation here <a href=\"https://playwright.dev/java/docs/api/class-framelocator\" rel=\"nofollow noreferrer\">Playwright - FrameLocator</a></p>\n<p>Here is how the page lookslike:\n<a href=\"https://i.stack.imgur.com/ZWTrU.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/ZWTrU.png\" alt=\"enter image description here\" /></a></p>\n<p>And below is my code to get the elements inside the iframe.</p>\n<pre><code>textbox_fullname = page.frameLocator(&quot;#hs-form-iframe-1&quot;).locator(&quot;//input[@name='full_name']&quot;);\ntextbox_email = page.frameLocator(&quot;#hs-form-iframe-1&quot;).locator(&quot;//input[@name='email']&quot;);\ntextbox_company = page.frameLocator(&quot;#hs-form-iframe-1&quot;).locator(&quot;//input[@name='company']&quot;);\n</code></pre>\n<p>When I run the code, I get below error when trying to fill the textboxes:</p>\n<pre><code>com.microsoft.playwright.TimeoutError: Error {\n  message='Timeout 30000ms exceeded.\n=========================== logs ===========================\nwaiting for frameLocator(&quot;#hs-form-iframe-0&quot;).locator(&quot;xpath=//input[@name='full_name']&quot;)\n============================================================\n  name='TimeoutError\n  stack='TimeoutError: Timeout 30000ms exceeded.\n=========================== logs ===========================\nwaiting for frameLocator(&quot;#hs-form-iframe-0&quot;).locator(&quot;xpath=//input[@name='full_name']&quot;)\n============================================================\n    at ProgressController.run (/private/var/folders/73/5k8n8v652z74r4lbcfj6qx4r0000gn/T/playwright-java-5227362604092639653/package/lib/server/progress.js:88:26)\n    at Frame.fill (/private/var/folders/73/5k8n8v652z74r4lbcfj6qx4r0000gn/T/playwright-java-5227362604092639653/package/lib/server/frames.js:1039:23)\n    at FrameDispatcher.fill (/private/var/folders/73/5k8n8v652z74r4lbcfj6qx4r0000gn/T/playwright-java-5227362604092639653/package/lib/server/dispatchers/frameDispatcher.js:166:30)\n    at DispatcherConnection.dispatch (/private/var/folders/73/5k8n8v652z74r4lbcfj6qx4r0000gn/T/playwright-java-5227362604092639653/package/lib/server/dispatchers/dispatcher.js:346:46)\n}\n</code></pre>\n<p>What am I doing wrong? Thanks for your assistance.</p>\n"},{"tags":["java","pdfbox"],"comments":[{"owner":{"account_id":255529,"reputation":17950,"user_id":535646,"accept_rate":40,"display_name":"Tilman Hausherr"},"score":1,"creation_date":1699347400,"post_id":77436348,"comment_id":136516944,"body_markdown":"Yes, render to a BufferedImage (300 dpi) https://stackoverflow.com/questions/23326562/convert-pdf-files-to-images-with-pdfbox  and then use ZXIng https://stackoverflow.com/questions/18863466/reading-qrcode-with-zxing-in-java to read. Try these and if it doesn&#39;t work then improve your question with the code you used.","body":"Yes, render to a BufferedImage (300 dpi) <a href=\"https://stackoverflow.com/questions/23326562/convert-pdf-files-to-images-with-pdfbox\" title=\"convert pdf files to images with pdfbox\">stackoverflow.com/questions/23326562/&hellip;</a>  and then use ZXIng <a href=\"https://stackoverflow.com/questions/18863466/reading-qrcode-with-zxing-in-java\" title=\"reading qrcode with zxing in java\">stackoverflow.com/questions/18863466/&hellip;</a> to read. Try these and if it doesn&#39;t work then improve your question with the code you used."},{"owner":{"account_id":1916831,"reputation":91501,"user_id":1729265,"display_name":"mkl"},"score":0,"creation_date":1699348505,"post_id":77436348,"comment_id":136517149,"body_markdown":"Alternatively - as you know your PDFs contains the QR codes as part of scanned page bitmap images - you can extract these images directly and apply zxing to them.","body":"Alternatively - as you know your PDFs contains the QR codes as part of scanned page bitmap images - you can extract these images directly and apply zxing to them."},{"owner":{"account_id":29421874,"reputation":1,"user_id":22543454,"display_name":"ema"},"score":0,"creation_date":1699350838,"post_id":77436348,"comment_id":136517623,"body_markdown":"@mkl so you&#39;re saying I should only apply zxing on the image inside the pdf instead of converting the whole pdf to an image, then scanning the new image? How would I go on about doing that?","body":"@mkl so you&#39;re saying I should only apply zxing on the image inside the pdf instead of converting the whole pdf to an image, then scanning the new image? How would I go on about doing that?"},{"owner":{"account_id":1916831,"reputation":91501,"user_id":1729265,"display_name":"mkl"},"score":1,"creation_date":1699358086,"post_id":77436348,"comment_id":136519018,"body_markdown":"Well, *if* the scanner simply scanned to a simple bitmap image and embedded that into the result PDF, its quality would be better than that of a re-rendered image, so one should apply zxing to that image. *If* on the other hand you have an &quot;intelligent&quot; scanner, it might try and split the page image into separate portions for better compressibility. In that case you had better re-render the PDF page into a new, single bitmap. The how-to-extract-images is illustrated in the `ExtractImages` tool in PDFBox.","body":"Well, <i>if</i> the scanner simply scanned to a simple bitmap image and embedded that into the result PDF, its quality would be better than that of a re-rendered image, so one should apply zxing to that image. <i>If</i> on the other hand you have an &quot;intelligent&quot; scanner, it might try and split the page image into separate portions for better compressibility. In that case you had better re-render the PDF page into a new, single bitmap. The how-to-extract-images is illustrated in the <code>ExtractImages</code> tool in PDFBox."}],"owner":{"account_id":29421874,"reputation":1,"user_id":22543454,"display_name":"ema"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":59,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1699343068,"creation_date":1699343068,"question_id":77436348,"body_markdown":"I have a single page PDF file containing a QR code. It&#39;s an image, I&#39;m assuming its a .png file..\r\n\r\n\r\nWithin the QR code is text which i will need to process after scanning.\r\n\r\nI&#39;ve been using PDFBox to extract text from the file and it&#39;s been going well, is there any way to use PDFBox to do this or do I have to import something else as well? \r\n\r\nI checked the [Examples](https://svn.apache.org/viewvc/pdfbox/trunk/examples/src/main/java/org/apache/pdfbox/examples/) on the PDFBox website, however i don&#39;t think any of these are what im looking for. Does this mean it&#39;s not possible? I&#39;ve seen people saying they use the zxing library.","title":"Reading a QR code within a PDF using Java","body":"<p>I have a single page PDF file containing a QR code. It's an image, I'm assuming its a .png file..</p>\n<p>Within the QR code is text which i will need to process after scanning.</p>\n<p>I've been using PDFBox to extract text from the file and it's been going well, is there any way to use PDFBox to do this or do I have to import something else as well?</p>\n<p>I checked the <a href=\"https://svn.apache.org/viewvc/pdfbox/trunk/examples/src/main/java/org/apache/pdfbox/examples/\" rel=\"nofollow noreferrer\">Examples</a> on the PDFBox website, however i don't think any of these are what im looking for. Does this mean it's not possible? I've seen people saying they use the zxing library.</p>\n"},{"tags":["java","android","xml","kotlin","android-studio"],"answers":[{"tags":[],"owner":{"account_id":6586557,"reputation":511,"user_id":5089159,"accept_rate":71,"display_name":"Abdul Ahad"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1699334217,"creation_date":1699334217,"answer_id":77435716,"question_id":77435673,"body_markdown":"This can only be achieved using a recyclerview. This gives the User Experience  of a bottom bar but it is not actually a bottombar (technically).","title":"Is this a TabLayout or BottomNav or something else?","body":"<p>This can only be achieved using a recyclerview. This gives the User Experience  of a bottom bar but it is not actually a bottombar (technically).</p>\n"},{"tags":[],"owner":{"account_id":13575915,"reputation":69,"user_id":9793289,"display_name":"TNT"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1699342833,"creation_date":1699342833,"answer_id":77436330,"question_id":77435673,"body_markdown":"If you are looking for scrollable bottom Navigation view in that case, please check this library\r\n\r\n[https://github.com/DaouMobile/ScrollBottomNavigationView?ref=androidexample365.com][1]\r\n\r\n\r\n  [1]: https://github.com/DaouMobile/ScrollBottomNavigationView?ref=androidexample365.com","title":"Is this a TabLayout or BottomNav or something else?","body":"<p>If you are looking for scrollable bottom Navigation view in that case, please check this library</p>\n<p><a href=\"https://github.com/DaouMobile/ScrollBottomNavigationView?ref=androidexample365.com\" rel=\"nofollow noreferrer\">https://github.com/DaouMobile/ScrollBottomNavigationView?ref=androidexample365.com</a></p>\n"}],"owner":{"account_id":29784448,"reputation":1,"user_id":22826124,"display_name":"Sumit Singh"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":42,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1699342833,"creation_date":1699333476,"question_id":77435673,"body_markdown":"I was trying to add [this](https://i.stack.imgur.com/ppzBi.jpg) view in my app but I do not have any idea what it is.It has more than 10 tabs in it.\r\nIs it a BottomNav or Tablayout? Any help would be appreciated.\r\n\r\nI tried using recycleview but I was not satisfied with my implementation. ","title":"Is this a TabLayout or BottomNav or something else?","body":"<p>I was trying to add <a href=\"https://i.stack.imgur.com/ppzBi.jpg\" rel=\"nofollow noreferrer\">this</a> view in my app but I do not have any idea what it is.It has more than 10 tabs in it.\nIs it a BottomNav or Tablayout? Any help would be appreciated.</p>\n<p>I tried using recycleview but I was not satisfied with my implementation.</p>\n"},{"tags":["java","htmlunit"],"comments":[{"owner":{"account_id":5404,"reputation":22089,"user_id":8681,"accept_rate":67,"display_name":"Jorn"},"score":0,"creation_date":1699283974,"post_id":77432207,"comment_id":136508925,"body_markdown":"&quot;Maybe it has something to do with the fact that the span is in a div with scrollable overflow and the span is pretty much at the end&quot;: That&#39;s probably it. You should tell htmlunit to scroll to the element first.","body":"&quot;Maybe it has something to do with the fact that the span is in a div with scrollable overflow and the span is pretty much at the end&quot;: That&#39;s probably it. You should tell htmlunit to scroll to the element first."}],"answers":[{"tags":[],"owner":{"account_id":6163228,"reputation":2754,"user_id":4804091,"display_name":"RBRi"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1699341972,"creation_date":1699341972,"answer_id":77436249,"question_id":77432207,"body_markdown":"Doing the layout and style calculation is sometimes difficult for a headless browser...\r\nIf your page is public available, please open an issue and i will try to find the reason and fix it if possible.\r\n\r\nBut there is a workaround - please have a look at this https://www.htmlunit.org/faq.html#clickNotWorking FAQ entry.\r\n\r\nHope that helps, if not please open an issue and i will have a look.","title":"HTMLUnit with Java: Calling click() ignored because the target element is not displayed","body":"<p>Doing the layout and style calculation is sometimes difficult for a headless browser...\nIf your page is public available, please open an issue and i will try to find the reason and fix it if possible.</p>\n<p>But there is a workaround - please have a look at this <a href=\"https://www.htmlunit.org/faq.html#clickNotWorking\" rel=\"nofollow noreferrer\">https://www.htmlunit.org/faq.html#clickNotWorking</a> FAQ entry.</p>\n<p>Hope that helps, if not please open an issue and i will have a look.</p>\n"}],"owner":{"account_id":21017586,"reputation":13,"user_id":15444695,"display_name":"Jonas Krug"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":29,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":77436249,"answer_count":1,"score":0,"last_activity_date":1699341972,"creation_date":1699283864,"question_id":77432207,"body_markdown":"I&#39;m using **htmlunit** with **Java,** and I&#39;m trying to click a span on a website that should increase a counter and unlock another button, but unfortunately, it is not working.\r\nThe warning states, that the element is not displayed, but when I open the website in my browser the element is there and can be clicked.\r\n\r\n```java\r\n// Find all services to select &quot;Sonstiges&quot; service\r\nList&lt;DomElement&gt; services = secondPage.getElementsByName(&quot;services&quot;);\r\n\r\nfor (DomElement service : services) {\r\n    // Get correct service\r\n    if (service.getNextElementSibling().getTextContent().equals(&quot;Sonstiges&quot;)) {\r\n        service.getNextElementSibling().getNextElementSibling().getNextElementSibling()\r\n                .getNextElementSibling().getChildElements().forEach(domElement -&gt; {\r\n            if (domElement.getTextContent().equals(&quot;+&quot;)) {\r\n                // Press add service button\r\n                try {\r\n                    domElement.click();\r\n                } catch (IOException e) {\r\n                    logger.log(Level.WARNING, &quot;Could not add service:\\n&quot; + Util.exceptionToString(e));\r\n                }\r\n            }\r\n        });\r\n        break;\r\n    }\r\n}\r\n\r\n// Click submit\r\nDomElement secondSubmitButton = secondPage.getElementById(&quot;forward-service&quot;);\r\nHtmlPage thirdPage = secondSubmitButton.click();\r\n```\r\n\r\nWhen I run this code, I get a lot of warnings regarding cookies and CSS, but I am not sure if they are responsible for the last warning, which states that the `span` with the &#39;+&#39; as text was not clicked, so the `secondSubmitButton` is not present.\r\n\r\n```\r\nNov. 06, 2023 3:56:17 PM org.apache.http.client.protocol.ResponseProcessCookies processCookies\r\nWARNUNG: Cookie rejected [rc_sid99f7e7c958a84cb084fd362b95200aaa=&quot;48f8b876f10b4be18c670eb8fb37998d7b3898197b76443bab04b27a7fae1e9f&quot;, version:0, domain:.callup.kaiserslautern.de, path:/m/Fuehrerscheinstelle, expiry:Mon Nov 06 16:16:13 CET 2023] Illegal &#39;domain&#39; attribute &quot;.callup.kaiserslautern.de&quot;. Domain of origin: &quot;onlinetermine.kaiserslautern.de&quot;\r\nNov. 06, 2023 3:56:17 PM org.apache.http.client.protocol.ResponseProcessCookies processCookies\r\nWARNUNG: Cookie rejected [rc_sid99f7e7c958a84cb084fd362b95200aaa=&quot;48f8b876f10b4be18c670eb8fb37998d7b3898197b76443bab04b27a7fae1e9f&quot;, version:0, domain:.callup.kaiserslautern.de, path:/m/Fuehrerscheinstelle, expiry:Mon Nov 06 16:16:13 CET 2023] Illegal &#39;domain&#39; attribute &quot;.callup.kaiserslautern.de&quot;. Domain of origin: &quot;onlinetermine.kaiserslautern.de&quot;\r\nNov. 06, 2023 3:56:17 PM org.htmlunit.DefaultCssErrorHandler error\r\nWARNUNG: CSS error: &#39;https://onlinetermine.kaiserslautern.de/libs/semantic-ui-2.4.1/semantic.min.css&#39; [59:8762] Error in class selector. (Invalid token &quot;and&quot;. Was expecting one of: &quot;only&quot;, &quot;inherit&quot;, &lt;IDENT&gt;.)\r\nNov. 06, 2023 3:56:17 PM org.htmlunit.DefaultCssErrorHandler warning\r\nWARNUNG: CSS warning: &#39;https://onlinetermine.kaiserslautern.de/libs/semantic-ui-2.4.1/semantic.min.css&#39; [59:8762] Ignoring the whole rule.\r\nNov. 06, 2023 3:56:17 PM org.htmlunit.DefaultCssErrorHandler error\r\nWARNUNG: CSS error: &#39;https://onlinetermine.kaiserslautern.de/libs/semantic-ui-2.4.1/semantic.min.css&#39; [59:17897] Error in class selector. (Invalid token &quot;and&quot;. Was expecting one of: &quot;only&quot;, &quot;inherit&quot;, &lt;IDENT&gt;.)\r\nNov. 06, 2023 3:56:17 PM org.htmlunit.DefaultCssErrorHandler warning\r\nWARNUNG: CSS warning: &#39;https://onlinetermine.kaiserslautern.de/libs/semantic-ui-2.4.1/semantic.min.css&#39; [59:17897] Ignoring the whole rule.\r\nNov. 06, 2023 3:56:17 PM org.htmlunit.DefaultCssErrorHandler error\r\nWARNUNG: CSS error: &#39;https://onlinetermine.kaiserslautern.de/libs/semantic-ui-2.4.1/semantic.min.css&#39; [75:15911] Error in class selector. (Invalid token &quot;and&quot;. Was expecting one of: &quot;only&quot;, &quot;inherit&quot;, &lt;IDENT&gt;.)\r\nNov. 06, 2023 3:56:17 PM org.htmlunit.DefaultCssErrorHandler warning\r\nWARNUNG: CSS warning: &#39;https://onlinetermine.kaiserslautern.de/libs/semantic-ui-2.4.1/semantic.min.css&#39; [75:15911] Ignoring the whole rule.\r\nNov. 06, 2023 3:56:17 PM org.htmlunit.DefaultCssErrorHandler error\r\nWARNUNG: CSS error: &#39;https://onlinetermine.kaiserslautern.de/libs/semantic-ui-2.4.1/semantic.min.css&#39; [75:62364] Error in class selector. (Invalid token &quot;and&quot;. Was expecting one of: &quot;only&quot;, &quot;inherit&quot;, &lt;IDENT&gt;.)\r\nNov. 06, 2023 3:56:17 PM org.htmlunit.DefaultCssErrorHandler warning\r\nWARNUNG: CSS warning: &#39;https://onlinetermine.kaiserslautern.de/libs/semantic-ui-2.4.1/semantic.min.css&#39; [75:62364] Ignoring the whole rule.\r\nNov. 06, 2023 3:56:18 PM org.htmlunit.WebConsole info\r\nINFORMATION: [2023-11-06T14:56:18.683Z] WRN: module: clu.core is obselete use now rc.core, will removed in version 1.2.58\r\nNov. 06, 2023 3:56:19 PM org.apache.http.client.protocol.ResponseProcessCookies processCookies\r\nWARNUNG: Cookie rejected [rc_sid99f7e7c958a84cb084fd362b95200aaa=&quot;48f8b876f10b4be18c670eb8fb37998d7b3898197b76443bab04b27a7fae1e9f&quot;, version:0, domain:.callup.kaiserslautern.de, path:/m/Fuehrerscheinstelle, expiry:Mon Nov 06 16:16:15 CET 2023] Illegal &#39;domain&#39; attribute &quot;.callup.kaiserslautern.de&quot;. Domain of origin: &quot;onlinetermine.kaiserslautern.de&quot;\r\nNov. 06, 2023 3:56:19 PM org.htmlunit.WebConsole info\r\nINFORMATION: [2023-11-06T14:56:19.143Z] WRN: module: clu.core is obselete use now rc.core, will removed in version 1.2.58\r\nNov. 06, 2023 3:56:24 PM org.htmlunit.html.DomElement click\r\nWARNUNG: Calling click() ignored because the target element &#39;HtmlSpan[&lt;span class=&quot;counterButton&quot; onclick=&quot;changecap(1,2,&#39;bd59a4e2-288d-4117-b6df-45c694d076fd&#39;)&quot;&gt;]&#39; is not displayed.\r\n```\r\n\r\nHow do I make sure the `span` gets displayed, or rather clicked (also when not displayed)? I tried waiting for 5 seconds, but it changed nothing.  \r\nMaybe it has something to do with the fact that the `span` is in a `div` with scrollable overflow and the `span` is pretty much at the end.","title":"HTMLUnit with Java: Calling click() ignored because the target element is not displayed","body":"<p>I'm using <strong>htmlunit</strong> with <strong>Java,</strong> and I'm trying to click a span on a website that should increase a counter and unlock another button, but unfortunately, it is not working.\nThe warning states, that the element is not displayed, but when I open the website in my browser the element is there and can be clicked.</p>\n<pre class=\"lang-java prettyprint-override\"><code>// Find all services to select &quot;Sonstiges&quot; service\nList&lt;DomElement&gt; services = secondPage.getElementsByName(&quot;services&quot;);\n\nfor (DomElement service : services) {\n    // Get correct service\n    if (service.getNextElementSibling().getTextContent().equals(&quot;Sonstiges&quot;)) {\n        service.getNextElementSibling().getNextElementSibling().getNextElementSibling()\n                .getNextElementSibling().getChildElements().forEach(domElement -&gt; {\n            if (domElement.getTextContent().equals(&quot;+&quot;)) {\n                // Press add service button\n                try {\n                    domElement.click();\n                } catch (IOException e) {\n                    logger.log(Level.WARNING, &quot;Could not add service:\\n&quot; + Util.exceptionToString(e));\n                }\n            }\n        });\n        break;\n    }\n}\n\n// Click submit\nDomElement secondSubmitButton = secondPage.getElementById(&quot;forward-service&quot;);\nHtmlPage thirdPage = secondSubmitButton.click();\n</code></pre>\n<p>When I run this code, I get a lot of warnings regarding cookies and CSS, but I am not sure if they are responsible for the last warning, which states that the <code>span</code> with the '+' as text was not clicked, so the <code>secondSubmitButton</code> is not present.</p>\n<pre><code>Nov. 06, 2023 3:56:17 PM org.apache.http.client.protocol.ResponseProcessCookies processCookies\nWARNUNG: Cookie rejected [rc_sid99f7e7c958a84cb084fd362b95200aaa=&quot;48f8b876f10b4be18c670eb8fb37998d7b3898197b76443bab04b27a7fae1e9f&quot;, version:0, domain:.callup.kaiserslautern.de, path:/m/Fuehrerscheinstelle, expiry:Mon Nov 06 16:16:13 CET 2023] Illegal 'domain' attribute &quot;.callup.kaiserslautern.de&quot;. Domain of origin: &quot;onlinetermine.kaiserslautern.de&quot;\nNov. 06, 2023 3:56:17 PM org.apache.http.client.protocol.ResponseProcessCookies processCookies\nWARNUNG: Cookie rejected [rc_sid99f7e7c958a84cb084fd362b95200aaa=&quot;48f8b876f10b4be18c670eb8fb37998d7b3898197b76443bab04b27a7fae1e9f&quot;, version:0, domain:.callup.kaiserslautern.de, path:/m/Fuehrerscheinstelle, expiry:Mon Nov 06 16:16:13 CET 2023] Illegal 'domain' attribute &quot;.callup.kaiserslautern.de&quot;. Domain of origin: &quot;onlinetermine.kaiserslautern.de&quot;\nNov. 06, 2023 3:56:17 PM org.htmlunit.DefaultCssErrorHandler error\nWARNUNG: CSS error: 'https://onlinetermine.kaiserslautern.de/libs/semantic-ui-2.4.1/semantic.min.css' [59:8762] Error in class selector. (Invalid token &quot;and&quot;. Was expecting one of: &quot;only&quot;, &quot;inherit&quot;, &lt;IDENT&gt;.)\nNov. 06, 2023 3:56:17 PM org.htmlunit.DefaultCssErrorHandler warning\nWARNUNG: CSS warning: 'https://onlinetermine.kaiserslautern.de/libs/semantic-ui-2.4.1/semantic.min.css' [59:8762] Ignoring the whole rule.\nNov. 06, 2023 3:56:17 PM org.htmlunit.DefaultCssErrorHandler error\nWARNUNG: CSS error: 'https://onlinetermine.kaiserslautern.de/libs/semantic-ui-2.4.1/semantic.min.css' [59:17897] Error in class selector. (Invalid token &quot;and&quot;. Was expecting one of: &quot;only&quot;, &quot;inherit&quot;, &lt;IDENT&gt;.)\nNov. 06, 2023 3:56:17 PM org.htmlunit.DefaultCssErrorHandler warning\nWARNUNG: CSS warning: 'https://onlinetermine.kaiserslautern.de/libs/semantic-ui-2.4.1/semantic.min.css' [59:17897] Ignoring the whole rule.\nNov. 06, 2023 3:56:17 PM org.htmlunit.DefaultCssErrorHandler error\nWARNUNG: CSS error: 'https://onlinetermine.kaiserslautern.de/libs/semantic-ui-2.4.1/semantic.min.css' [75:15911] Error in class selector. (Invalid token &quot;and&quot;. Was expecting one of: &quot;only&quot;, &quot;inherit&quot;, &lt;IDENT&gt;.)\nNov. 06, 2023 3:56:17 PM org.htmlunit.DefaultCssErrorHandler warning\nWARNUNG: CSS warning: 'https://onlinetermine.kaiserslautern.de/libs/semantic-ui-2.4.1/semantic.min.css' [75:15911] Ignoring the whole rule.\nNov. 06, 2023 3:56:17 PM org.htmlunit.DefaultCssErrorHandler error\nWARNUNG: CSS error: 'https://onlinetermine.kaiserslautern.de/libs/semantic-ui-2.4.1/semantic.min.css' [75:62364] Error in class selector. (Invalid token &quot;and&quot;. Was expecting one of: &quot;only&quot;, &quot;inherit&quot;, &lt;IDENT&gt;.)\nNov. 06, 2023 3:56:17 PM org.htmlunit.DefaultCssErrorHandler warning\nWARNUNG: CSS warning: 'https://onlinetermine.kaiserslautern.de/libs/semantic-ui-2.4.1/semantic.min.css' [75:62364] Ignoring the whole rule.\nNov. 06, 2023 3:56:18 PM org.htmlunit.WebConsole info\nINFORMATION: [2023-11-06T14:56:18.683Z] WRN: module: clu.core is obselete use now rc.core, will removed in version 1.2.58\nNov. 06, 2023 3:56:19 PM org.apache.http.client.protocol.ResponseProcessCookies processCookies\nWARNUNG: Cookie rejected [rc_sid99f7e7c958a84cb084fd362b95200aaa=&quot;48f8b876f10b4be18c670eb8fb37998d7b3898197b76443bab04b27a7fae1e9f&quot;, version:0, domain:.callup.kaiserslautern.de, path:/m/Fuehrerscheinstelle, expiry:Mon Nov 06 16:16:15 CET 2023] Illegal 'domain' attribute &quot;.callup.kaiserslautern.de&quot;. Domain of origin: &quot;onlinetermine.kaiserslautern.de&quot;\nNov. 06, 2023 3:56:19 PM org.htmlunit.WebConsole info\nINFORMATION: [2023-11-06T14:56:19.143Z] WRN: module: clu.core is obselete use now rc.core, will removed in version 1.2.58\nNov. 06, 2023 3:56:24 PM org.htmlunit.html.DomElement click\nWARNUNG: Calling click() ignored because the target element 'HtmlSpan[&lt;span class=&quot;counterButton&quot; onclick=&quot;changecap(1,2,'bd59a4e2-288d-4117-b6df-45c694d076fd')&quot;&gt;]' is not displayed.\n</code></pre>\n<p>How do I make sure the <code>span</code> gets displayed, or rather clicked (also when not displayed)? I tried waiting for 5 seconds, but it changed nothing.<br />\nMaybe it has something to do with the fact that the <code>span</code> is in a <code>div</code> with scrollable overflow and the <code>span</code> is pretty much at the end.</p>\n"},{"tags":["java","spring","hibernate","postgresql","jpa"],"answers":[{"tags":[],"owner":{"account_id":5318431,"reputation":81,"user_id":4242522,"display_name":"Fazia"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1415783548,"creation_date":1415783548,"answer_id":26883122,"question_id":26880633,"body_markdown":"After many head banging efforts, I found a solution from https://stackoverflow.com/questions/3493495/getting-database-connection-in-pure-jpa-setup\r\n.I am not sure whether it is the exact solution. I modified my code to: \r\n\r\n      public String findDiary(String fun, java.sql.Date attributeValue) {\r\n\t\tString diaryNo =&quot;&quot;;\r\n\t\tSession session = (Session) entityManager.getDelegate();\r\n\t\tSessionFactoryImplementor sfi = (SessionFactoryImplementor) session.getSessionFactory();\r\n\t\tConnectionProvider cp = sfi.getConnectionProvider();\r\n\t\t\r\n\t\t\r\n\t\ttry {\r\n\t\tConnection conn = cp.getConnection();\r\n\t\tCallableStatement cstmt = conn.prepareCall(&quot;{? = CALL &quot;+fun+&quot;(?)}&quot;);\r\n\t\tcstmt.registerOutParameter(1, Types.VARCHAR);\r\n\t\tcstmt.setDate(2, attributeValue);\r\n\t\tcstmt.executeUpdate();\r\n\t\t\r\n\t\t\tdiaryNo = cstmt.getString(1);\r\n\t\t\tSystem.out.println(&quot;Result --&gt; &quot;+diaryNo);\r\n\t\t} catch (SQLException e) {\r\n\t\t\t// TODO Auto-generated catch block\r\n\t\t\te.printStackTrace();\r\n\t\t}\r\n\t\t\r\n\t\treturn diaryNo; \r\n\t}","title":"Hibernate ERROR: unexpected end of subtree when calling custom functions","body":"<p>After many head banging efforts, I found a solution from <a href=\"https://stackoverflow.com/questions/3493495/getting-database-connection-in-pure-jpa-setup\">Getting Database connection in pure JPA setup</a>\n.I am not sure whether it is the exact solution. I modified my code to: </p>\n\n<pre><code>  public String findDiary(String fun, java.sql.Date attributeValue) {\n    String diaryNo =\"\";\n    Session session = (Session) entityManager.getDelegate();\n    SessionFactoryImplementor sfi = (SessionFactoryImplementor) session.getSessionFactory();\n    ConnectionProvider cp = sfi.getConnectionProvider();\n\n\n    try {\n    Connection conn = cp.getConnection();\n    CallableStatement cstmt = conn.prepareCall(\"{? = CALL \"+fun+\"(?)}\");\n    cstmt.registerOutParameter(1, Types.VARCHAR);\n    cstmt.setDate(2, attributeValue);\n    cstmt.executeUpdate();\n\n        diaryNo = cstmt.getString(1);\n        System.out.println(\"Result --&gt; \"+diaryNo);\n    } catch (SQLException e) {\n        // TODO Auto-generated catch block\n        e.printStackTrace();\n    }\n\n    return diaryNo; \n}\n</code></pre>\n"}],"owner":{"account_id":5318431,"reputation":81,"user_id":4242522,"display_name":"Fazia"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":8125,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1699340610,"creation_date":1415773633,"question_id":26880633,"body_markdown":"I have crated a function in my PostgreSql database to generate a random diary number based on the financial year named &#39;gen_dairyno()&#39;.\r\nI have also registered this function in hibernate dialect \r\n\r\n    registerFunction(&quot;gen_dairyno&quot;, new StandardSQLFunction(&quot;gen_dairyno&quot;));\r\n\r\nand configured in hibernate.cfg.xml too.\r\n\r\nThe code where I am accessing the function is as below:\r\n\r\n    public String generateDiaryNo() {\r\n    \r\n    \t\treturn entityManager\r\n    \t\t\t\t.createQuery(\r\n    \t\t\t\t\t\t&quot;select gen_dairyno() &quot;).getSingleResult().toString();\r\n    \t}\r\n\r\nThe problem is that when I am trying to access it from the application it is throwing error. Can someone please help me to get this through.\r\n\r\n\r\n\r\nThe error encountered was:\r\n\r\n    Nov 12, 2014 11:37:07 AM org.hibernate.hql.internal.ast.ErrorCounter reportError\r\n    ERROR: &lt;AST&gt;:0:0: unexpected end of subtree\r\n    Nov 12, 2014 11:37:07 AM org.hibernate.hql.internal.ast.ErrorCounter reportError\r\n    ERROR: &lt;AST&gt;:0:0: unexpected end of subtree\r\n    &lt;AST&gt;:0:0: unexpected end of subtree\r\n    \tat org.hibernate.hql.internal.antlr.HqlSqlBaseWalker.fromElementList(HqlSqlBaseWalker.java:3314)\r\n    \tat org.hibernate.hql.internal.antlr.HqlSqlBaseWalker.fromClause(HqlSqlBaseWalker.java:706)\r\n    \tat org.hibernate.hql.internal.antlr.HqlSqlBaseWalker.query(HqlSqlBaseWalker.java:562)\r\n    \tat org.hibernate.hql.internal.antlr.HqlSqlBaseWalker.selectStatement(HqlSqlBaseWalker.java:299)\r\n    \tat org.hibernate.hql.internal.antlr.HqlSqlBaseWalker.statement(HqlSqlBaseWalker.java:247)\r\n    \tat org.hibernate.hql.internal.ast.QueryTranslatorImpl.analyze(QueryTranslatorImpl.java:248)\r\n    \tat org.hibernate.hql.internal.ast.QueryTranslatorImpl.doCompile(QueryTranslatorImpl.java:183)\r\n    \tat org.hibernate.hql.internal.ast.QueryTranslatorImpl.compile(QueryTranslatorImpl.java:136)\r\n    \tat org.hibernate.engine.query.spi.HQLQueryPlan.&lt;init&gt;(HQLQueryPlan.java:105)\r\n    \tat org.hibernate.engine.query.spi.HQLQueryPlan.&lt;init&gt;(HQLQueryPlan.java:80)\r\n    \tat org.hibernate.engine.query.spi.QueryPlanCache.getHQLQueryPlan(QueryPlanCache.java:168)\r\n    \tat org.hibernate.internal.AbstractSessionImpl.getHQLQueryPlan(AbstractSessionImpl.java:221)\r\n    \tat org.hibernate.internal.AbstractSessionImpl.createQuery(AbstractSessionImpl.java:199)\r\n    \tat org.hibernate.internal.SessionImpl.createQuery(SessionImpl.java:1777)\r\n    \tat org.hibernate.ejb.AbstractEntityManagerImpl.createQuery(AbstractEntityManagerImpl.java:291)\r\n    \tat sun.reflect.GeneratedMethodAccessor28.invoke(Unknown Source)\r\n    \tat sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)\r\n    \tat java.lang.reflect.Method.invoke(Unknown Source)\r\n    \tat org.springframework.orm.jpa.SharedEntityManagerCreator$SharedEntityManagerInvocationHandler.invoke(SharedEntityManagerCreator.java:240)\r\n    \tat com.sun.proxy.$Proxy32.createQuery(Unknown Source)\r\n    \tat in.cdacnoida.serb.gl.dao.DaoHelper.findByFunWithoutAttribute(DaoHelper.java:236)\r\n    \tat in.cdacnoida.serb.gl.dao.ReleaseDao.generateDiaryNo(ReleaseDao.java:594)\r\n    \tat in.cdacnoida.serb.gl.dao.ReleaseDao$$FastClassByCGLIB$$d5ba7f79.invoke(&lt;generated&gt;)\r\n    \tat net.sf.cglib.proxy.MethodProxy.invoke(MethodProxy.java:204)\r\n    \tat org.springframework.aop.framework.Cglib2AopProxy$CglibMethodInvocation.invokeJoinpoint(Cglib2AopProxy.java:689)\r\n    \tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:150)\r\n    \tat org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:155)\r\n    \tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:172)\r\n    \tat org.springframework.aop.framework.Cglib2AopProxy$DynamicAdvisedInterceptor.intercept(Cglib2AopProxy.java:622)\r\n    \tat in.cdacnoida.serb.gl.dao.ReleaseDao$$EnhancerByCGLIB$$90a05589.generateDiaryNo(&lt;generated&gt;)\r\n    \tat in.cdacnoida.serb.gl.service.ReleaseServiceImpl.generateDiaryNo(ReleaseServiceImpl.java:877)\r\n    \tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n    \tat sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)\r\n    \tat sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)\r\n    \tat java.lang.reflect.Method.invoke(Unknown Source)\r\n    \tat org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:319)\r\n    \tat org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:183)\r\n    \tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:150)\r\n    \tat org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:110)\r\n    \tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:172)\r\n    \tat org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:202)\r\n    \tat com.sun.proxy.$Proxy77.generateDiaryNo(Unknown Source)\r\n    \tat in.cdacnoida.serb.gl.controller.ReleaseAction.SendForReleaseApproval(ReleaseAction.java:866)\r\n    \tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n    \tat sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)\r\n    \tat sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)\r\n    \tat java.lang.reflect.Method.invoke(Unknown Source)\r\n    \tat org.springframework.web.method.support.InvocableHandlerMethod.invoke(InvocableHandlerMethod.java:213)\r\n    \tat org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:126)\r\n    \tat org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:96)\r\n    \tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:617)\r\n    \tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:578)\r\n    \tat org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:80)\r\n    \tat org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:923)\r\n    \tat org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:852)\r\n    \tat org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:882)\r\n    \tat org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:789)\r\n    \tat javax.servlet.http.HttpServlet.service(HttpServlet.java:647)\r\n    \tat javax.servlet.http.HttpServlet.service(HttpServlet.java:728)\r\n    \tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305)\r\n    \tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)\r\n    \tat org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:52)\r\n    \tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)\r\n    \tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)\r\n    \tat org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:88)\r\n    \tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:76)\r\n    \tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)\r\n    \tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)\r\n    \tat in.cdacnoida.serb.gl.misc.AntiSamyFilter.doFilter(AntiSamyFilter.java:51)\r\n    \tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)\r\n    \tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)\r\n    \tat org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:222)\r\n    \tat org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:123)\r\n    \tat org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:502)\r\n    \tat org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:171)\r\n    \tat org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:100)\r\n    \tat org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:953)\r\n    \tat org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)\r\n    \tat org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:409)\r\n    \tat org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1044)\r\n    \tat org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:607)\r\n    \tat org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:315)\r\n    \tat java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source)\r\n    \tat java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)\r\n    \tat java.lang.Thread.run(Unknown Source)\r\n\r\n\r\nALSO\r\n\r\n    Nov 12, 2014 11:37:07 AM org.apache.catalina.core.StandardWrapperValve invoke\r\n    SEVERE: Servlet.service() for servlet [mvc-dispatcher] in context with path [/SERB] threw exception [Request processing failed; nested exception is org.springframework.dao.InvalidDataAccessApiUsageException: No data type for node: org.hibernate.hql.internal.ast.tree.MethodNode \r\n     \\-[METHOD_CALL] MethodNode: &#39;(&#39;\r\n        +-[METHOD_NAME] IdentNode: &#39;gen_dairyno&#39; {originalText=gen_dairyno}\r\n        \\-[EXPR_LIST] SqlNode: &#39;exprList&#39;\r\n    ; nested exception is java.lang.IllegalStateException: No data type for node: org.hibernate.hql.internal.ast.tree.MethodNode \r\n     \\-[METHOD_CALL] MethodNode: &#39;(&#39;\r\n        +-[METHOD_NAME] IdentNode: &#39;gen_dairyno&#39; {originalText=gen_dairyno}\r\n        \\-[EXPR_LIST] SqlNode: &#39;exprList&#39;\r\n    ] with root cause\r\n    java.lang.IllegalStateException: No data type for node: org.hibernate.hql.internal.ast.tree.MethodNode \r\n     \\-[METHOD_CALL] MethodNode: &#39;(&#39;\r\n        +-[METHOD_NAME] IdentNode: &#39;gen_dairyno&#39; {originalText=gen_dairyno}\r\n        \\-[EXPR_LIST] SqlNode: &#39;exprList&#39;\r\n    \r\n    \tat org.hibernate.hql.internal.ast.tree.SelectClause.initializeExplicitSelectClause(SelectClause.java:154)\r\n    \tat org.hibernate.hql.internal.ast.HqlSqlWalker.useSelectClause(HqlSqlWalker.java:859)\r\n    \tat org.hibernate.hql.internal.ast.HqlSqlWalker.processQuery(HqlSqlWalker.java:649)\r\n    \tat org.hibernate.hql.internal.antlr.HqlSqlBaseWalker.query(HqlSqlBaseWalker.java:663)\r\n    \tat org.hibernate.hql.internal.antlr.HqlSqlBaseWalker.selectStatement(HqlSqlBaseWalker.java:299)\r\n    \tat org.hibernate.hql.internal.antlr.HqlSqlBaseWalker.statement(HqlSqlBaseWalker.java:247)\r\n    \tat org.hibernate.hql.internal.ast.QueryTranslatorImpl.analyze(QueryTranslatorImpl.java:248)\r\n    \tat org.hibernate.hql.internal.ast.QueryTranslatorImpl.doCompile(QueryTranslatorImpl.java:183)\r\n    \tat org.hibernate.hql.internal.ast.QueryTranslatorImpl.compile(QueryTranslatorImpl.java:136)\r\n    \tat org.hibernate.engine.query.spi.HQLQueryPlan.&lt;init&gt;(HQLQueryPlan.java:105)\r\n    \tat org.hibernate.engine.query.spi.HQLQueryPlan.&lt;init&gt;(HQLQueryPlan.java:80)\r\n    \tat org.hibernate.engine.query.spi.QueryPlanCache.getHQLQueryPlan(QueryPlanCache.java:168)\r\n    \tat org.hibernate.internal.AbstractSessionImpl.getHQLQueryPlan(AbstractSessionImpl.java:221)\r\n    \tat org.hibernate.internal.AbstractSessionImpl.createQuery(AbstractSessionImpl.java:199)\r\n    \tat org.hibernate.internal.SessionImpl.createQuery(SessionImpl.java:1777)\r\n    \tat org.hibernate.ejb.AbstractEntityManagerImpl.createQuery(AbstractEntityManagerImpl.java:291)\r\n    \tat sun.reflect.GeneratedMethodAccessor28.invoke(Unknown Source)\r\n    \tat sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)\r\n    \tat java.lang.reflect.Method.invoke(Unknown Source)\r\n    \tat org.springframework.orm.jpa.SharedEntityManagerCreator$SharedEntityManagerInvocationHandler.invoke(SharedEntityManagerCreator.java:240)\r\n    \tat com.sun.proxy.$Proxy32.createQuery(Unknown Source)\r\n    \tat in.cdacnoida.serb.gl.dao.DaoHelper.findByFunWithoutAttribute(DaoHelper.java:236)\r\n    \tat in.cdacnoida.serb.gl.dao.ReleaseDao.generateDiaryNo(ReleaseDao.java:594)\r\n    \tat in.cdacnoida.serb.gl.dao.ReleaseDao$$FastClassByCGLIB$$d5ba7f79.invoke(&lt;generated&gt;)\r\n    \tat net.sf.cglib.proxy.MethodProxy.invoke(MethodProxy.java:204)\r\n    \tat org.springframework.aop.framework.Cglib2AopProxy$CglibMethodInvocation.invokeJoinpoint(Cglib2AopProxy.java:689)\r\n    \tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:150)\r\n    \tat org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:155)\r\n    \tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:172)\r\n    \tat org.springframework.aop.framework.Cglib2AopProxy$DynamicAdvisedInterceptor.intercept(Cglib2AopProxy.java:622)\r\n    \tat in.cdacnoida.serb.gl.dao.ReleaseDao$$EnhancerByCGLIB$$90a05589.generateDiaryNo(&lt;generated&gt;)\r\n    \tat in.cdacnoida.serb.gl.service.ReleaseServiceImpl.generateDiaryNo(ReleaseServiceImpl.java:877)\r\n    \tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n    \tat sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)\r\n    \tat sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)\r\n    \tat java.lang.reflect.Method.invoke(Unknown Source)\r\n    \tat org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:319)\r\n    \tat org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:183)\r\n    \tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:150)\r\n    \tat org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:110)\r\n    \tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:172)\r\n    \tat org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:202)\r\n    \tat com.sun.proxy.$Proxy77.generateDiaryNo(Unknown Source)\r\n    \tat in.cdacnoida.serb.gl.controller.ReleaseAction.SendForReleaseApproval(ReleaseAction.java:866)\r\n    \tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n    \tat sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)\r\n    \tat sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)\r\n    \tat java.lang.reflect.Method.invoke(Unknown Source)\r\n    \tat org.springframework.web.method.support.InvocableHandlerMethod.invoke(InvocableHandlerMethod.java:213)\r\n    \tat org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:126)\r\n    \tat org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:96)\r\n    \tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:617)\r\n    \tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:578)\r\n    \tat org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:80)\r\n    \tat org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:923)\r\n    \tat org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:852)\r\n    \tat org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:882)\r\n    \tat org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:789)\r\n    \tat javax.servlet.http.HttpServlet.service(HttpServlet.java:647)\r\n    \tat javax.servlet.http.HttpServlet.service(HttpServlet.java:728)\r\n    \tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305)\r\n    \tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)\r\n    \tat org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:52)\r\n    \tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)\r\n    \tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)\r\n    \tat org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:88)\r\n    \tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:76)\r\n    \tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)\r\n    \tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)\r\n    \tat in.cdacnoida.serb.gl.misc.AntiSamyFilter.doFilter(AntiSamyFilter.java:51)\r\n    \tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)\r\n    \tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)\r\n    \tat org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:222)\r\n    \tat org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:123)\r\n    \tat org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:502)\r\n    \tat org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:171)\r\n    \tat org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:100)\r\n    \tat org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:953)\r\n    \tat org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)\r\n    \tat org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:409)\r\n    \tat org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1044)\r\n    \tat org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:607)\r\n    \tat org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:315)\r\n    \tat java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source)\r\n    \tat java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)\r\n    \tat java.lang.Thread.run(Unknown Source)\r\n\r\n\r\n\r\n\r\n","title":"Hibernate ERROR: unexpected end of subtree when calling custom functions","body":"<p>I have crated a function in my PostgreSql database to generate a random diary number based on the financial year named 'gen_dairyno()'.\nI have also registered this function in hibernate dialect </p>\n\n<pre><code>registerFunction(\"gen_dairyno\", new StandardSQLFunction(\"gen_dairyno\"));\n</code></pre>\n\n<p>and configured in hibernate.cfg.xml too.</p>\n\n<p>The code where I am accessing the function is as below:</p>\n\n<pre><code>public String generateDiaryNo() {\n\n        return entityManager\n                .createQuery(\n                        \"select gen_dairyno() \").getSingleResult().toString();\n    }\n</code></pre>\n\n<p>The problem is that when I am trying to access it from the application it is throwing error. Can someone please help me to get this through.</p>\n\n<p>The error encountered was:</p>\n\n<pre><code>Nov 12, 2014 11:37:07 AM org.hibernate.hql.internal.ast.ErrorCounter reportError\nERROR: &lt;AST&gt;:0:0: unexpected end of subtree\nNov 12, 2014 11:37:07 AM org.hibernate.hql.internal.ast.ErrorCounter reportError\nERROR: &lt;AST&gt;:0:0: unexpected end of subtree\n&lt;AST&gt;:0:0: unexpected end of subtree\n    at org.hibernate.hql.internal.antlr.HqlSqlBaseWalker.fromElementList(HqlSqlBaseWalker.java:3314)\n    at org.hibernate.hql.internal.antlr.HqlSqlBaseWalker.fromClause(HqlSqlBaseWalker.java:706)\n    at org.hibernate.hql.internal.antlr.HqlSqlBaseWalker.query(HqlSqlBaseWalker.java:562)\n    at org.hibernate.hql.internal.antlr.HqlSqlBaseWalker.selectStatement(HqlSqlBaseWalker.java:299)\n    at org.hibernate.hql.internal.antlr.HqlSqlBaseWalker.statement(HqlSqlBaseWalker.java:247)\n    at org.hibernate.hql.internal.ast.QueryTranslatorImpl.analyze(QueryTranslatorImpl.java:248)\n    at org.hibernate.hql.internal.ast.QueryTranslatorImpl.doCompile(QueryTranslatorImpl.java:183)\n    at org.hibernate.hql.internal.ast.QueryTranslatorImpl.compile(QueryTranslatorImpl.java:136)\n    at org.hibernate.engine.query.spi.HQLQueryPlan.&lt;init&gt;(HQLQueryPlan.java:105)\n    at org.hibernate.engine.query.spi.HQLQueryPlan.&lt;init&gt;(HQLQueryPlan.java:80)\n    at org.hibernate.engine.query.spi.QueryPlanCache.getHQLQueryPlan(QueryPlanCache.java:168)\n    at org.hibernate.internal.AbstractSessionImpl.getHQLQueryPlan(AbstractSessionImpl.java:221)\n    at org.hibernate.internal.AbstractSessionImpl.createQuery(AbstractSessionImpl.java:199)\n    at org.hibernate.internal.SessionImpl.createQuery(SessionImpl.java:1777)\n    at org.hibernate.ejb.AbstractEntityManagerImpl.createQuery(AbstractEntityManagerImpl.java:291)\n    at sun.reflect.GeneratedMethodAccessor28.invoke(Unknown Source)\n    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)\n    at java.lang.reflect.Method.invoke(Unknown Source)\n    at org.springframework.orm.jpa.SharedEntityManagerCreator$SharedEntityManagerInvocationHandler.invoke(SharedEntityManagerCreator.java:240)\n    at com.sun.proxy.$Proxy32.createQuery(Unknown Source)\n    at in.cdacnoida.serb.gl.dao.DaoHelper.findByFunWithoutAttribute(DaoHelper.java:236)\n    at in.cdacnoida.serb.gl.dao.ReleaseDao.generateDiaryNo(ReleaseDao.java:594)\n    at in.cdacnoida.serb.gl.dao.ReleaseDao$$FastClassByCGLIB$$d5ba7f79.invoke(&lt;generated&gt;)\n    at net.sf.cglib.proxy.MethodProxy.invoke(MethodProxy.java:204)\n    at org.springframework.aop.framework.Cglib2AopProxy$CglibMethodInvocation.invokeJoinpoint(Cglib2AopProxy.java:689)\n    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:150)\n    at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:155)\n    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:172)\n    at org.springframework.aop.framework.Cglib2AopProxy$DynamicAdvisedInterceptor.intercept(Cglib2AopProxy.java:622)\n    at in.cdacnoida.serb.gl.dao.ReleaseDao$$EnhancerByCGLIB$$90a05589.generateDiaryNo(&lt;generated&gt;)\n    at in.cdacnoida.serb.gl.service.ReleaseServiceImpl.generateDiaryNo(ReleaseServiceImpl.java:877)\n    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)\n    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)\n    at java.lang.reflect.Method.invoke(Unknown Source)\n    at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:319)\n    at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:183)\n    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:150)\n    at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:110)\n    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:172)\n    at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:202)\n    at com.sun.proxy.$Proxy77.generateDiaryNo(Unknown Source)\n    at in.cdacnoida.serb.gl.controller.ReleaseAction.SendForReleaseApproval(ReleaseAction.java:866)\n    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)\n    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)\n    at java.lang.reflect.Method.invoke(Unknown Source)\n    at org.springframework.web.method.support.InvocableHandlerMethod.invoke(InvocableHandlerMethod.java:213)\n    at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:126)\n    at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:96)\n    at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:617)\n    at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:578)\n    at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:80)\n    at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:923)\n    at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:852)\n    at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:882)\n    at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:789)\n    at javax.servlet.http.HttpServlet.service(HttpServlet.java:647)\n    at javax.servlet.http.HttpServlet.service(HttpServlet.java:728)\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305)\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)\n    at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:52)\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)\n    at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:88)\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:76)\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)\n    at in.cdacnoida.serb.gl.misc.AntiSamyFilter.doFilter(AntiSamyFilter.java:51)\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)\n    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:222)\n    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:123)\n    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:502)\n    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:171)\n    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:100)\n    at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:953)\n    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)\n    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:409)\n    at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1044)\n    at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:607)\n    at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:315)\n    at java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source)\n    at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)\n    at java.lang.Thread.run(Unknown Source)\n</code></pre>\n\n<p>ALSO</p>\n\n<pre><code>Nov 12, 2014 11:37:07 AM org.apache.catalina.core.StandardWrapperValve invoke\nSEVERE: Servlet.service() for servlet [mvc-dispatcher] in context with path [/SERB] threw exception [Request processing failed; nested exception is org.springframework.dao.InvalidDataAccessApiUsageException: No data type for node: org.hibernate.hql.internal.ast.tree.MethodNode \n \\-[METHOD_CALL] MethodNode: '('\n    +-[METHOD_NAME] IdentNode: 'gen_dairyno' {originalText=gen_dairyno}\n    \\-[EXPR_LIST] SqlNode: 'exprList'\n; nested exception is java.lang.IllegalStateException: No data type for node: org.hibernate.hql.internal.ast.tree.MethodNode \n \\-[METHOD_CALL] MethodNode: '('\n    +-[METHOD_NAME] IdentNode: 'gen_dairyno' {originalText=gen_dairyno}\n    \\-[EXPR_LIST] SqlNode: 'exprList'\n] with root cause\njava.lang.IllegalStateException: No data type for node: org.hibernate.hql.internal.ast.tree.MethodNode \n \\-[METHOD_CALL] MethodNode: '('\n    +-[METHOD_NAME] IdentNode: 'gen_dairyno' {originalText=gen_dairyno}\n    \\-[EXPR_LIST] SqlNode: 'exprList'\n\n    at org.hibernate.hql.internal.ast.tree.SelectClause.initializeExplicitSelectClause(SelectClause.java:154)\n    at org.hibernate.hql.internal.ast.HqlSqlWalker.useSelectClause(HqlSqlWalker.java:859)\n    at org.hibernate.hql.internal.ast.HqlSqlWalker.processQuery(HqlSqlWalker.java:649)\n    at org.hibernate.hql.internal.antlr.HqlSqlBaseWalker.query(HqlSqlBaseWalker.java:663)\n    at org.hibernate.hql.internal.antlr.HqlSqlBaseWalker.selectStatement(HqlSqlBaseWalker.java:299)\n    at org.hibernate.hql.internal.antlr.HqlSqlBaseWalker.statement(HqlSqlBaseWalker.java:247)\n    at org.hibernate.hql.internal.ast.QueryTranslatorImpl.analyze(QueryTranslatorImpl.java:248)\n    at org.hibernate.hql.internal.ast.QueryTranslatorImpl.doCompile(QueryTranslatorImpl.java:183)\n    at org.hibernate.hql.internal.ast.QueryTranslatorImpl.compile(QueryTranslatorImpl.java:136)\n    at org.hibernate.engine.query.spi.HQLQueryPlan.&lt;init&gt;(HQLQueryPlan.java:105)\n    at org.hibernate.engine.query.spi.HQLQueryPlan.&lt;init&gt;(HQLQueryPlan.java:80)\n    at org.hibernate.engine.query.spi.QueryPlanCache.getHQLQueryPlan(QueryPlanCache.java:168)\n    at org.hibernate.internal.AbstractSessionImpl.getHQLQueryPlan(AbstractSessionImpl.java:221)\n    at org.hibernate.internal.AbstractSessionImpl.createQuery(AbstractSessionImpl.java:199)\n    at org.hibernate.internal.SessionImpl.createQuery(SessionImpl.java:1777)\n    at org.hibernate.ejb.AbstractEntityManagerImpl.createQuery(AbstractEntityManagerImpl.java:291)\n    at sun.reflect.GeneratedMethodAccessor28.invoke(Unknown Source)\n    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)\n    at java.lang.reflect.Method.invoke(Unknown Source)\n    at org.springframework.orm.jpa.SharedEntityManagerCreator$SharedEntityManagerInvocationHandler.invoke(SharedEntityManagerCreator.java:240)\n    at com.sun.proxy.$Proxy32.createQuery(Unknown Source)\n    at in.cdacnoida.serb.gl.dao.DaoHelper.findByFunWithoutAttribute(DaoHelper.java:236)\n    at in.cdacnoida.serb.gl.dao.ReleaseDao.generateDiaryNo(ReleaseDao.java:594)\n    at in.cdacnoida.serb.gl.dao.ReleaseDao$$FastClassByCGLIB$$d5ba7f79.invoke(&lt;generated&gt;)\n    at net.sf.cglib.proxy.MethodProxy.invoke(MethodProxy.java:204)\n    at org.springframework.aop.framework.Cglib2AopProxy$CglibMethodInvocation.invokeJoinpoint(Cglib2AopProxy.java:689)\n    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:150)\n    at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:155)\n    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:172)\n    at org.springframework.aop.framework.Cglib2AopProxy$DynamicAdvisedInterceptor.intercept(Cglib2AopProxy.java:622)\n    at in.cdacnoida.serb.gl.dao.ReleaseDao$$EnhancerByCGLIB$$90a05589.generateDiaryNo(&lt;generated&gt;)\n    at in.cdacnoida.serb.gl.service.ReleaseServiceImpl.generateDiaryNo(ReleaseServiceImpl.java:877)\n    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)\n    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)\n    at java.lang.reflect.Method.invoke(Unknown Source)\n    at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:319)\n    at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:183)\n    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:150)\n    at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:110)\n    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:172)\n    at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:202)\n    at com.sun.proxy.$Proxy77.generateDiaryNo(Unknown Source)\n    at in.cdacnoida.serb.gl.controller.ReleaseAction.SendForReleaseApproval(ReleaseAction.java:866)\n    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)\n    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)\n    at java.lang.reflect.Method.invoke(Unknown Source)\n    at org.springframework.web.method.support.InvocableHandlerMethod.invoke(InvocableHandlerMethod.java:213)\n    at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:126)\n    at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:96)\n    at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:617)\n    at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:578)\n    at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:80)\n    at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:923)\n    at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:852)\n    at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:882)\n    at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:789)\n    at javax.servlet.http.HttpServlet.service(HttpServlet.java:647)\n    at javax.servlet.http.HttpServlet.service(HttpServlet.java:728)\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305)\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)\n    at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:52)\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)\n    at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:88)\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:76)\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)\n    at in.cdacnoida.serb.gl.misc.AntiSamyFilter.doFilter(AntiSamyFilter.java:51)\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)\n    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:222)\n    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:123)\n    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:502)\n    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:171)\n    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:100)\n    at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:953)\n    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)\n    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:409)\n    at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1044)\n    at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:607)\n    at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:315)\n    at java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source)\n    at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)\n    at java.lang.Thread.run(Unknown Source)\n</code></pre>\n"},{"tags":["java","jsp","spring-mvc","annotations","spring-data-mongodb"],"comments":[{"owner":{"account_id":1223835,"reputation":75848,"user_id":1189885,"accept_rate":43,"display_name":"chrylis -cautiouslyoptimistic-"},"score":0,"creation_date":1384058925,"post_id":19886373,"comment_id":29582680,"body_markdown":"It&#39;s pretty self-explanatory: One of the fields on the `Agent` class requires an `int`, but you&#39;re sending either nothing or the empty string as a parameter.","body":"It&#39;s pretty self-explanatory: One of the fields on the <code>Agent</code> class requires an <code>int</code>, but you&#39;re sending either nothing or the empty string as a parameter."},{"owner":{"account_id":1078378,"reputation":103,"user_id":1076035,"display_name":"MattG"},"score":0,"creation_date":1384059124,"post_id":19886373,"comment_id":29582702,"body_markdown":"I thought that, but the Agent class has nothing that requires and int, they are all strings. Or lists of strings.","body":"I thought that, but the Agent class has nothing that requires and int, they are all strings. Or lists of strings."},{"owner":{"account_id":1527222,"reputation":2599,"user_id":1425331,"accept_rate":83,"display_name":"Jimmy"},"score":0,"creation_date":1384059570,"post_id":19886373,"comment_id":29582776,"body_markdown":"is id: null or empty based on your chrome dev response data? if yes, it may have to do something. But cant see where .","body":"is id: null or empty based on your chrome dev response data? if yes, it may have to do something. But cant see where ."},{"owner":{"account_id":1078378,"reputation":103,"user_id":1076035,"display_name":"MattG"},"score":0,"creation_date":1384059710,"post_id":19886373,"comment_id":29582801,"body_markdown":"I&#39;m not sure.  I&#39;m thinking empty.  Here is the ID form input field. &lt;input type=&quot;hidden&quot; name=&quot;id&quot;&gt; before adding the multi select boxes, I could save an agent.","body":"I&#39;m not sure.  I&#39;m thinking empty.  Here is the ID form input field. &lt;input type=&quot;hidden&quot; name=&quot;id&quot;&gt; before adding the multi select boxes, I could save an agent."},{"owner":{"account_id":1527222,"reputation":2599,"user_id":1425331,"accept_rate":83,"display_name":"Jimmy"},"score":0,"creation_date":1384059983,"post_id":19886373,"comment_id":29582836,"body_markdown":"follow this link, and dont forget to read the comments, those comments have useful information. hope it guides you http://stackoverflow.com/questions/18121163/how-to-debug-numberformatexception-somewhere-in-basecommandcontroller-bindandval","body":"follow this link, and dont forget to read the comments, those comments have useful information. hope it guides you <a href=\"http://stackoverflow.com/questions/18121163/how-to-debug-numberformatexception-somewhere-in-basecommandcontroller-bindandval\" title=\"how to debug numberformatexception somewhere in basecommandcontroller bindandval\">stackoverflow.com/questions/18121163/&hellip;</a>"},{"owner":{"account_id":1223835,"reputation":75848,"user_id":1189885,"accept_rate":43,"display_name":"chrylis -cautiouslyoptimistic-"},"score":0,"creation_date":1384060853,"post_id":19886373,"comment_id":29582944,"body_markdown":"Heh, I forgot about that one; I&#39;ll try to remember for the future. That&#39;s a tricky bug, but a failure mode that should be easy enough to document.","body":"Heh, I forgot about that one; I&#39;ll try to remember for the future. That&#39;s a tricky bug, but a failure mode that should be easy enough to document."},{"owner":{"account_id":274077,"reputation":13556,"user_id":566092,"accept_rate":72,"display_name":"coding_idiot"},"score":0,"creation_date":1384066004,"post_id":19886373,"comment_id":29583737,"body_markdown":"`name=&quot;attributeList[${attribute.id}]&quot;`  - how does the generated html look like ? Secondly, what&#39;s the request being sent ?","body":"<code>name=&quot;attributeList[${attribute.id}]&quot;</code>  - how does the generated html look like ? Secondly, what&#39;s the request being sent ?"},{"owner":{"account_id":1078378,"reputation":103,"user_id":1076035,"display_name":"MattG"},"score":0,"creation_date":1384069039,"post_id":19886373,"comment_id":29584313,"body_markdown":"Thanks guys, that was it.  I have two multi select boxes, the first has a list of values, the second is empty and I move items between them.  The second has the name=&quot;attributeList[${attribute.id}]&quot; which translates to attributeList[] in the html when rendered.  Thanks both Jimmy and coding_idiot.  I can make a more detailed answer or if someone wants to I&#39;ll tag it as the answer. I didn&#39;t realize that the empty multiselect was going to have issues populating a list of items to send in the request after it had values.","body":"Thanks guys, that was it.  I have two multi select boxes, the first has a list of values, the second is empty and I move items between them.  The second has the name=&quot;attributeList[${attribute.id}]&quot; which translates to attributeList[] in the html when rendered.  Thanks both Jimmy and coding_idiot.  I can make a more detailed answer or if someone wants to I&#39;ll tag it as the answer. I didn&#39;t realize that the empty multiselect was going to have issues populating a list of items to send in the request after it had values."}],"answers":[{"tags":[],"owner":{"account_id":143673,"reputation":1695,"user_id":352173,"accept_rate":25,"display_name":"Remy Mellet"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1386856743,"creation_date":1386856743,"answer_id":20545531,"question_id":19886373,"body_markdown":"Spring doesn&#39;t handle empty square bracket. To summarize you can use\r\n\r\n- ?myarray[0]=aa&amp;myarray[1]=bb\r\n- ?myarray=aa&amp;myarray=bb\r\n\r\nbut not \r\n\r\n- ?myarray[]=aa&amp;myarray[]=bb\r\n\r\nI created the ticket https://jira.springsource.org/browse/SPR-11214","title":"Request processing failed; nested exception is java.lang.NumberFormatException: For input string: &quot;&quot;","body":"<p>Spring doesn't handle empty square bracket. To summarize you can use</p>\n\n<ul>\n<li>?myarray[0]=aa&amp;myarray[1]=bb</li>\n<li>?myarray=aa&amp;myarray=bb</li>\n</ul>\n\n<p>but not </p>\n\n<ul>\n<li>?myarray[]=aa&amp;myarray[]=bb</li>\n</ul>\n\n<p>I created the ticket <a href=\"https://jira.springsource.org/browse/SPR-11214\" rel=\"nofollow\">https://jira.springsource.org/browse/SPR-11214</a></p>\n"}],"owner":{"account_id":1078378,"reputation":103,"user_id":1076035,"display_name":"MattG"},"comment_count":8,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":8377,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1699340610,"creation_date":1384058628,"question_id":19886373,"body_markdown":"org.springframework.web.util.NestedServletException: Request processing failed; nested exception is java.lang.NumberFormatException: For input string: &quot;&quot;\r\n\r\nI&#39;m trying to build a web app using only annotations, java, JSPs, spring data, spring mvc, and mongo db.\r\n\r\nI&#39;ve got things mostly working, however when I tried to create a JSP form with multi select lists, I&#39;m getting the title error.\r\n\r\nI&#39;m trying to create an agent object and save it to the mongodb database.  The multi select boxes are passing back string IDs for the objects that were selected.  The agent object has lists that need to be populated with the multi select lists.\r\n\r\nHere is the response data from chrome dev tools:\r\n\r\n    id: name:Test1 type:MOB\r\n    attributeList[]:687a1964-4179-4631-832b-e23b34300840\r\n    personalityTraitList[]:8b321f3c-6398-4bc4-afc6-e6c7e4a6a3e3\r\n    skillList[]:53090226-0f54-4121-90c0-4d3a188aa5f8\r\n    triggerList[]:923048ef-7a4d-42e3-8691-2d2e9603e79b\r\n    behaviorTreeList[]:84966b7a-fb53-4f64-be2a-203ae3743250\r\n\r\nHere is the html for the first multi select box. They are all the same.\r\n\r\n    &lt;td align=&quot;left&quot;&gt;\r\n\t    &lt;select size=&quot;10&quot; id=&quot;selectedAttributes&quot; multiple=&quot;multiple&quot; name=&quot;attributeList[${attribute.id}]&quot; style=&quot;width: 130px;&quot;&gt;&lt;/select&gt;\r\n    &lt;/td&gt;\r\n\r\nHere is the controller save request mapping:\r\n\r\n    @RequestMapping(value = &quot;/AgentManager/save&quot;, method = RequestMethod.POST)  \r\n    public View createAgent(@ModelAttribute Agent agent, ModelMap model) \r\n    {\r\n        if(StringUtils.hasText(agent.getId())) \r\n        {\r\n        \tagentService.updateAgent(agent);\r\n        } else \r\n        {\r\n        \tagentService.addAgent(agent);\r\n        }\r\n        \r\n        return new RedirectView(&quot;/MotherNatureEmulator/AgentManager&quot;);  \r\n    }\r\n\r\nThe agent service will create a random UUID if the ID field is empty when going to save the agent.\r\n\r\nHere is the stack trace:\r\n\r\n&gt; java.lang.NumberFormatException: For input string: &quot;&quot;\r\n\tjava.lang.NumberFormatException.forInputString(NumberFormatException.java:65)\r\n\tjava.lang.Integer.parseInt(Integer.java:504)\r\n\tjava.lang.Integer.parseInt(Integer.java:527)\r\n\torg.springframework.beans.BeanWrapperImpl.setPropertyValue(BeanWrapperImpl.java:969)\r\n\torg.springframework.beans.BeanWrapperImpl.setPropertyValue(BeanWrapperImpl.java:902)\r\n\torg.springframework.beans.AbstractPropertyAccessor.setPropertyValues(AbstractPropertyAccessor.java:75)\r\n\torg.springframework.validation.DataBinder.applyPropertyValues(DataBinder.java:740)\r\n\torg.springframework.validation.DataBinder.doBind(DataBinder.java:636)\r\n\torg.springframework.web.bind.WebDataBinder.doBind(WebDataBinder.java:191)\r\n\torg.springframework.web.bind.ServletRequestDataBinder.bind(ServletRequestDataBinder.java:112)\r\n\torg.springframework.web.servlet.mvc.method.annotation.ServletModelAttributeMethodProcessor.bindRequestParameters(ServletModelAttributeMethodProcessor.java:153)\r\n\torg.springframework.web.method.annotation.ModelAttributeMethodProcessor.resolveArgument(ModelAttributeMethodProcessor.java:106)\r\n\torg.springframework.web.method.support.HandlerMethodArgumentResolverComposite.resolveArgument(HandlerMethodArgumentResolverComposite.java:77)\r\n\torg.springframework.web.method.support.InvocableHandlerMethod.getMethodArgumentValues(InvocableHandlerMethod.java:162)\r\n\torg.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:123)\r\n\torg.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:104)\r\n\torg.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandleMethod(RequestMappingHandlerAdapter.java:745)\r\n\torg.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:686)\r\n\torg.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:80)\r\n\torg.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:925)\r\n\torg.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:856)\r\n\torg.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:936)\r\n\torg.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:838)\r\n\tjavax.servlet.http.HttpServlet.service(HttpServlet.java:647)\r\n\torg.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:812)\r\n\tjavax.servlet.http.HttpServlet.service(HttpServlet.java:728)\r\n\r\nI tried creating a custom data binder, but that didn&#39;t help.\r\n\r\nCould anyone direct me to the right way to do these things?  This is the first time I&#39;m trying to make a web app by myself.\r\n\r\nHere is the Agent class:\r\n\r\n    @Document(collection = &quot;AgentCollection&quot;)\r\n    public class Agent \r\n    {\r\n\t@Id\r\n\tprivate String _id;\r\n\t\r\n\tprivate String _name;\r\n\tprivate String _type;\r\n\tprivate ArrayList&lt;String&gt; _actionList;\r\n\tprivate ArrayList&lt;String&gt; _attributeList;\r\n\tprivate ArrayList&lt;String&gt; _behaviorTreeList;\r\n\tprivate ArrayList&lt;String&gt; _itemList;\r\n\tprivate ArrayList&lt;String&gt; _personalityTraitList;\r\n\tprivate ArrayList&lt;String&gt; _skillList;\r\n\tprivate ArrayList&lt;String&gt; _triggerList;\r\n\t\r\n\t\r\n\tpublic String getId() \r\n\t{\r\n        return _id;\r\n    }\r\n\t\t\r\n\t\r\n    public void setId(String id) \r\n    {\r\n        _id = id;\r\n    }\r\n\t\t\t\r\n\t\r\n\tpublic String getName() \r\n\t{\r\n\t\treturn _name;\r\n\t}\r\n\t\r\n\t\r\n\tpublic void setName(String name)\r\n\t{\r\n\t\t_name = name;\r\n\t}\r\n\t\r\n\t\r\n\tpublic String getType() \r\n\t{\r\n\t\treturn _type;\r\n\t}\r\n\t\r\n\t\r\n\tpublic void setType(String type)\r\n\t{\r\n\t\t_type = type;\r\n\t}\r\n\t\r\n\t\r\n\tpublic ArrayList&lt;String&gt; getAttributeList()\r\n\t{\r\n\t\treturn _attributeList;\r\n\t}\r\n\t\r\n\t\r\n\tpublic void setAttributeList(final ArrayList&lt;String&gt; attributeList)\r\n\t{\r\n\t\t_attributeList = attributeList;\r\n\t}\r\n\t\r\n\t\r\n\tpublic ArrayList&lt;String&gt; getPresonalityTraitList()\r\n\t{\r\n\t\treturn _personalityTraitList;\r\n\t}\r\n\t\r\n\t\r\n\tpublic void setPersonalityTraitList(final ArrayList&lt;String&gt; personalityTraitList)\r\n\t{\r\n\t\t_personalityTraitList = personalityTraitList;\r\n\t}\r\n\t\r\n\t\r\n\tpublic ArrayList&lt;String&gt; getSkillList()\r\n\t{\r\n\t\treturn _skillList;\r\n\t}\r\n\t\r\n\t\r\n\tpublic void setSkillList(final ArrayList&lt;String&gt; skillList)\r\n\t{\r\n\t\t_skillList = skillList;\r\n\t}\r\n\t\r\n\t\r\n\tpublic ArrayList&lt;String&gt; getActionList()\r\n\t{\r\n\t\treturn _actionList;\r\n\t}\r\n\t\r\n\t\r\n\tpublic void setActionList(final ArrayList&lt;String&gt; actionList)\r\n\t{\r\n\t\t_actionList = actionList;\r\n\t}\r\n\t\r\n\t\r\n\tpublic ArrayList&lt;String&gt; getTriggerList()\r\n\t{\r\n\t\treturn _triggerList;\r\n\t}\r\n\t\r\n\t\r\n\tpublic void setTriggerList(final ArrayList&lt;String&gt; triggerList)\r\n\t{\r\n\t\t_triggerList = triggerList;\r\n\t}\r\n\t\r\n\t\r\n\tpublic ArrayList&lt;String&gt; getItemList()\r\n\t{\r\n\t\treturn _itemList;\r\n\t}\r\n\t\r\n\t\r\n\tpublic void setItemList(final ArrayList&lt;String&gt; itemList)\r\n\t{\r\n\t\t_itemList = itemList;\r\n\t}\r\n\t\r\n\t\r\n\tpublic ArrayList&lt;String&gt; getBehaviorTreeList()\r\n\t{\r\n\t\treturn _behaviorTreeList;\r\n\t}\r\n\t\r\n\t\r\n\tpublic void setBehaviorTreeList(final ArrayList&lt;String&gt; behaviorTreeList)\r\n\t{\r\n\t\t_behaviorTreeList = behaviorTreeList;\r\n\t}\r\n    }\r\n\r\n\r\nThanks,\r\nMatt","title":"Request processing failed; nested exception is java.lang.NumberFormatException: For input string: &quot;&quot;","body":"<p>org.springframework.web.util.NestedServletException: Request processing failed; nested exception is java.lang.NumberFormatException: For input string: \"\"</p>\n\n<p>I'm trying to build a web app using only annotations, java, JSPs, spring data, spring mvc, and mongo db.</p>\n\n<p>I've got things mostly working, however when I tried to create a JSP form with multi select lists, I'm getting the title error.</p>\n\n<p>I'm trying to create an agent object and save it to the mongodb database.  The multi select boxes are passing back string IDs for the objects that were selected.  The agent object has lists that need to be populated with the multi select lists.</p>\n\n<p>Here is the response data from chrome dev tools:</p>\n\n<pre><code>id: name:Test1 type:MOB\nattributeList[]:687a1964-4179-4631-832b-e23b34300840\npersonalityTraitList[]:8b321f3c-6398-4bc4-afc6-e6c7e4a6a3e3\nskillList[]:53090226-0f54-4121-90c0-4d3a188aa5f8\ntriggerList[]:923048ef-7a4d-42e3-8691-2d2e9603e79b\nbehaviorTreeList[]:84966b7a-fb53-4f64-be2a-203ae3743250\n</code></pre>\n\n<p>Here is the html for the first multi select box. They are all the same.</p>\n\n<pre><code>&lt;td align=\"left\"&gt;\n    &lt;select size=\"10\" id=\"selectedAttributes\" multiple=\"multiple\" name=\"attributeList[${attribute.id}]\" style=\"width: 130px;\"&gt;&lt;/select&gt;\n&lt;/td&gt;\n</code></pre>\n\n<p>Here is the controller save request mapping:</p>\n\n<pre><code>@RequestMapping(value = \"/AgentManager/save\", method = RequestMethod.POST)  \npublic View createAgent(@ModelAttribute Agent agent, ModelMap model) \n{\n    if(StringUtils.hasText(agent.getId())) \n    {\n        agentService.updateAgent(agent);\n    } else \n    {\n        agentService.addAgent(agent);\n    }\n\n    return new RedirectView(\"/MotherNatureEmulator/AgentManager\");  \n}\n</code></pre>\n\n<p>The agent service will create a random UUID if the ID field is empty when going to save the agent.</p>\n\n<p>Here is the stack trace:</p>\n\n<blockquote>\n  <p>java.lang.NumberFormatException: For input string: \"\"\n      java.lang.NumberFormatException.forInputString(NumberFormatException.java:65)\n      java.lang.Integer.parseInt(Integer.java:504)\n      java.lang.Integer.parseInt(Integer.java:527)\n      org.springframework.beans.BeanWrapperImpl.setPropertyValue(BeanWrapperImpl.java:969)\n      org.springframework.beans.BeanWrapperImpl.setPropertyValue(BeanWrapperImpl.java:902)\n      org.springframework.beans.AbstractPropertyAccessor.setPropertyValues(AbstractPropertyAccessor.java:75)\n      org.springframework.validation.DataBinder.applyPropertyValues(DataBinder.java:740)\n      org.springframework.validation.DataBinder.doBind(DataBinder.java:636)\n      org.springframework.web.bind.WebDataBinder.doBind(WebDataBinder.java:191)\n      org.springframework.web.bind.ServletRequestDataBinder.bind(ServletRequestDataBinder.java:112)\n      org.springframework.web.servlet.mvc.method.annotation.ServletModelAttributeMethodProcessor.bindRequestParameters(ServletModelAttributeMethodProcessor.java:153)\n      org.springframework.web.method.annotation.ModelAttributeMethodProcessor.resolveArgument(ModelAttributeMethodProcessor.java:106)\n      org.springframework.web.method.support.HandlerMethodArgumentResolverComposite.resolveArgument(HandlerMethodArgumentResolverComposite.java:77)\n      org.springframework.web.method.support.InvocableHandlerMethod.getMethodArgumentValues(InvocableHandlerMethod.java:162)\n      org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:123)\n      org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:104)\n      org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandleMethod(RequestMappingHandlerAdapter.java:745)\n      org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:686)\n      org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:80)\n      org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:925)\n      org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:856)\n      org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:936)\n      org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:838)\n      javax.servlet.http.HttpServlet.service(HttpServlet.java:647)\n      org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:812)\n      javax.servlet.http.HttpServlet.service(HttpServlet.java:728)</p>\n</blockquote>\n\n<p>I tried creating a custom data binder, but that didn't help.</p>\n\n<p>Could anyone direct me to the right way to do these things?  This is the first time I'm trying to make a web app by myself.</p>\n\n<p>Here is the Agent class:</p>\n\n<pre><code>@Document(collection = \"AgentCollection\")\npublic class Agent \n{\n@Id\nprivate String _id;\n\nprivate String _name;\nprivate String _type;\nprivate ArrayList&lt;String&gt; _actionList;\nprivate ArrayList&lt;String&gt; _attributeList;\nprivate ArrayList&lt;String&gt; _behaviorTreeList;\nprivate ArrayList&lt;String&gt; _itemList;\nprivate ArrayList&lt;String&gt; _personalityTraitList;\nprivate ArrayList&lt;String&gt; _skillList;\nprivate ArrayList&lt;String&gt; _triggerList;\n\n\npublic String getId() \n{\n    return _id;\n}\n\n\npublic void setId(String id) \n{\n    _id = id;\n}\n\n\npublic String getName() \n{\n    return _name;\n}\n\n\npublic void setName(String name)\n{\n    _name = name;\n}\n\n\npublic String getType() \n{\n    return _type;\n}\n\n\npublic void setType(String type)\n{\n    _type = type;\n}\n\n\npublic ArrayList&lt;String&gt; getAttributeList()\n{\n    return _attributeList;\n}\n\n\npublic void setAttributeList(final ArrayList&lt;String&gt; attributeList)\n{\n    _attributeList = attributeList;\n}\n\n\npublic ArrayList&lt;String&gt; getPresonalityTraitList()\n{\n    return _personalityTraitList;\n}\n\n\npublic void setPersonalityTraitList(final ArrayList&lt;String&gt; personalityTraitList)\n{\n    _personalityTraitList = personalityTraitList;\n}\n\n\npublic ArrayList&lt;String&gt; getSkillList()\n{\n    return _skillList;\n}\n\n\npublic void setSkillList(final ArrayList&lt;String&gt; skillList)\n{\n    _skillList = skillList;\n}\n\n\npublic ArrayList&lt;String&gt; getActionList()\n{\n    return _actionList;\n}\n\n\npublic void setActionList(final ArrayList&lt;String&gt; actionList)\n{\n    _actionList = actionList;\n}\n\n\npublic ArrayList&lt;String&gt; getTriggerList()\n{\n    return _triggerList;\n}\n\n\npublic void setTriggerList(final ArrayList&lt;String&gt; triggerList)\n{\n    _triggerList = triggerList;\n}\n\n\npublic ArrayList&lt;String&gt; getItemList()\n{\n    return _itemList;\n}\n\n\npublic void setItemList(final ArrayList&lt;String&gt; itemList)\n{\n    _itemList = itemList;\n}\n\n\npublic ArrayList&lt;String&gt; getBehaviorTreeList()\n{\n    return _behaviorTreeList;\n}\n\n\npublic void setBehaviorTreeList(final ArrayList&lt;String&gt; behaviorTreeList)\n{\n    _behaviorTreeList = behaviorTreeList;\n}\n}\n</code></pre>\n\n<p>Thanks,\nMatt</p>\n"},{"tags":["java","android","android-studio","snapchat"],"comments":[{"owner":{"account_id":1438731,"reputation":494,"user_id":1359514,"accept_rate":61,"display_name":"HiDd3N"},"score":0,"creation_date":1612796726,"post_id":65662777,"comment_id":116871483,"body_markdown":"any luck with this?","body":"any luck with this?"},{"owner":{"account_id":8464711,"reputation":840,"user_id":6349183,"display_name":"RaJ"},"score":0,"creation_date":1615629703,"post_id":65662777,"comment_id":117754004,"body_markdown":"You got any solution for this?","body":"You got any solution for this?"}],"owner":{"account_id":10254135,"reputation":317,"user_id":7567437,"display_name":"Krishna"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":358,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1699340523,"creation_date":1610349899,"question_id":65662777,"body_markdown":"Is anybody know how to implement cameraX beauty effects like what google showed in there event. Like face mask, ar face filters etc. I am unable to find any documentation on Google. Just like snapchat face filters.\r\nOr any other library which I can use for video recording and for face filters both.","title":"CameraX face filters in android java","body":"<p>Is anybody know how to implement cameraX beauty effects like what google showed in there event. Like face mask, ar face filters etc. I am unable to find any documentation on Google. Just like snapchat face filters.\nOr any other library which I can use for video recording and for face filters both.</p>\n"},{"tags":["java","arrays","foreach","catch-exception"],"comments":[{"owner":{"account_id":4362282,"reputation":92954,"user_id":3558960,"accept_rate":60,"display_name":"Robby Cornelissen"},"score":7,"creation_date":1699332190,"post_id":77435581,"comment_id":136515186,"body_markdown":"There is never a reason to catch an `ArrayIndexOutOfBoundsException`. You can test the array index beforehand, and your enhanced for loop will never go out of bounds. Don&#39;t use exceptions to control your program&#39;s flow.","body":"There is never a reason to catch an <code>ArrayIndexOutOfBoundsException</code>. You can test the array index beforehand, and your enhanced for loop will never go out of bounds. Don&#39;t use exceptions to control your program&#39;s flow."},{"owner":{"account_id":8354342,"reputation":76,"user_id":6275236,"display_name":"Roland J."},"score":0,"creation_date":1699337556,"post_id":77435581,"comment_id":136515648,"body_markdown":"Another problem: Why would you catch an ArrayIndexOutOfBoundsException in the showText method? This method doesn&#39;t perform any array operations.","body":"Another problem: Why would you catch an ArrayIndexOutOfBoundsException in the showText method? This method doesn&#39;t perform any array operations."}],"answers":[{"tags":[],"owner":{"account_id":47283,"reputation":703807,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1699340317,"creation_date":1699339892,"answer_id":77436083,"question_id":77435581,"body_markdown":"You cannot catch an exception if it isn&#39;t thrown. The try / catch statements *would* catch `ArrayIndexOutOfBoundsException` if it was thrown ... but it isn&#39;t thrown.\r\n\r\n    try {\r\n        System.out.printf(&quot;The employee &quot; + name + \r\n             &quot;, who earns $%.2f per hour, worked for &quot; +\r\n             hoursworked + \r\n             &quot; hours last week and took home $%.2f after taxes.\\n&quot;, \r\n             wage, getTotalPay() * hoursworked);\r\n    } catch (ArrayIndexOutOfBoundsException oob) {\r\n        System.out.println(&quot;Error&quot;);\r\n    }\r\n\r\nThe code inside the code block is not operating on an array at all, so the exception cannot be thrown.\r\n\r\n&lt;sup&gt;(Aside: the `printf` is misguided too.  You are using *both* string concatenation *and* formatting.  You can do it all with just formatting, and the code will be a lot more readable.)&lt;/sup&gt;\r\n\r\n    try {\r\n        for (Employee e : employee)     \r\n            e.showText(hour);       \r\n    } catch (ArrayIndexOutOfBoundsException oob) {\r\n        System.out.println(&quot;NO&quot;);\r\n    }\r\n\r\nThis is operating on the array, but it is doing it in a way that is guaranteed to not go beyond the bounds of the array.  \r\n\r\nIf you wanted the above *cause* that exception (so that you can catch it) you could rewrite the loop like this:\r\n\r\n    try {\r\n        for (int i = 0; i &lt; 9999; i++) // this loop is deliberately wrong    \r\n            employee[i].showText(hour);       \r\n    } catch (ArrayIndexOutOfBoundsException oob) {\r\n        System.out.println(&quot;NO&quot;);\r\n    }\r\n\r\nNow you will get an exception when `i` is `4`.  But you wouldn&#39;t / shouldn&#39;t do that in a real program.  You should avoid using exception handling to implement &quot;normal&quot; control flow.  (Though what &quot;normal&quot; control flow means is open to interpretation!)\r\n\r\n---------------------\r\n\r\n&gt; Is the code correct? \r\n\r\nYes and no; see above.\r\n\r\n  - Yes because you *would* catch the exception if it was thrown.  And this code *does* compile.\r\n  - No because the exception *won&#39;t* be thrown.  Guaranteed.  Code that tries to catch an (unchecked) exception that cannot be thrown is redundant and misleading ... and therefore wrong.","title":"Need Help Catching An ArrayIndexOutOfBoundsException On A For Each Loop (Java)","body":"<p>You cannot catch an exception if it isn't thrown. The try / catch statements <em>would</em> catch <code>ArrayIndexOutOfBoundsException</code> if it was thrown ... but it isn't thrown.</p>\n<pre><code>try {\n    System.out.printf(&quot;The employee &quot; + name + \n         &quot;, who earns $%.2f per hour, worked for &quot; +\n         hoursworked + \n         &quot; hours last week and took home $%.2f after taxes.\\n&quot;, \n         wage, getTotalPay() * hoursworked);\n} catch (ArrayIndexOutOfBoundsException oob) {\n    System.out.println(&quot;Error&quot;);\n}\n</code></pre>\n<p>The code inside the code block is not operating on an array at all, so the exception cannot be thrown.</p>\n<p><sup>(Aside: the <code>printf</code> is misguided too.  You are using <em>both</em> string concatenation <em>and</em> formatting.  You can do it all with just formatting, and the code will be a lot more readable.)</sup></p>\n<pre><code>try {\n    for (Employee e : employee)     \n        e.showText(hour);       \n} catch (ArrayIndexOutOfBoundsException oob) {\n    System.out.println(&quot;NO&quot;);\n}\n</code></pre>\n<p>This is operating on the array, but it is doing it in a way that is guaranteed to not go beyond the bounds of the array.</p>\n<p>If you wanted the above <em>cause</em> that exception (so that you can catch it) you could rewrite the loop like this:</p>\n<pre><code>try {\n    for (int i = 0; i &lt; 9999; i++) // this loop is deliberately wrong    \n        employee[i].showText(hour);       \n} catch (ArrayIndexOutOfBoundsException oob) {\n    System.out.println(&quot;NO&quot;);\n}\n</code></pre>\n<p>Now you will get an exception when <code>i</code> is <code>4</code>.  But you wouldn't / shouldn't do that in a real program.  You should avoid using exception handling to implement &quot;normal&quot; control flow.  (Though what &quot;normal&quot; control flow means is open to interpretation!)</p>\n<hr />\n<blockquote>\n<p>Is the code correct?</p>\n</blockquote>\n<p>Yes and no; see above.</p>\n<ul>\n<li>Yes because you <em>would</em> catch the exception if it was thrown.  And this code <em>does</em> compile.</li>\n<li>No because the exception <em>won't</em> be thrown.  Guaranteed.  Code that tries to catch an (unchecked) exception that cannot be thrown is redundant and misleading ... and therefore wrong.</li>\n</ul>\n"}],"owner":{"account_id":29842787,"reputation":13,"user_id":22870549,"display_name":"Erik Sulin"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":63,"favorite_count":0,"down_vote_count":2,"up_vote_count":1,"closed_date":1700535273,"answer_count":1,"score":-1,"last_activity_date":1699340317,"creation_date":1699331740,"question_id":77435581,"body_markdown":"# **HW3.java**\r\nimport java.util.Scanner;\r\n\r\npublic class HW3 {\r\n\t\r\n\t//Method Establishes Scanner For Inputing Hour\r\n\tpublic static int Scanner() {\r\n\t\tScanner x = new Scanner(System.in);\r\n\t\tint pay = x.nextInt();\r\n\t\treturn pay;\r\n\t}\r\n\t\t\t\r\n\tpublic static void main(String args[]) {\r\n\t\t//Asks For Hour Input, Input Hours Into Variable\r\n\t\tSystem.out.println(&quot;Input Hours&quot;);\r\n\t\tint hour = Scanner();\r\n\t\r\n\t\t//Establish Array Of Employees With Name And Wage Categories\r\n\t\tEmployee [] employee = new Employee[4];\r\n\t\temployee [0] = new Employee(&quot;Shinji Ikari&quot;, 15.50);\t\t\r\n\t\temployee [1] = new Employee(&quot;Rei Ayanami&quot;, 21.35);\t\r\n\t\temployee [2] = new Employee(&quot;Asuka Langley Soryu&quot;, 2.12);\r\n\t\temployee [3] = new Employee(&quot;Kaworu Nagisa&quot;, 20.01);\r\n\t\t\r\n\t\t//For Loop Running The showText Method From Employee.java For Each Employee In Array \r\n\t\ttry {\r\n\t\t\tfor (Employee e : employee) \t\r\n\t\t\t\te.showText(hour);\t\t\r\n\t\t} catch(ArrayIndexOutOfBoundsException oob) {\r\n\t\t\tSystem.out.println(&quot;NO&quot;);\r\n\t\t}\t\r\n\t}\t\r\n}\r\n\r\n# **Employee.java**\r\npublic class Employee {\r\n\t\t\r\n\t//Sets Private Variables That Defines &quot;Employee&quot;\r\n\tprivate String name;\r\n\tprivate double wage;\r\n\tprivate double totalpay;\r\n\t\r\n\t\t//Employee Constructors For Name And Wage\r\n\t\tpublic Employee(String employeename, double hourlypay) {\r\n\t\t\tname = employeename;\r\n\t\t\twage = hourlypay;\r\n\t\t}\t\r\n\t\t\r\n\t\t//Returns The Name Value\t\t\r\n\t\tpublic String getName() {\t\t\t\r\n\t\t\treturn name;\t\t\r\n\t\t}\r\n\t\t\r\n\t\t//Sets ASnd Updates Name\r\n\t\tpublic void setName(String ename) {\t\t\t\r\n\t\t\tname = ename;\t\r\n\t\t}\t\t\r\n\t\t\r\n\t\t//Returns The Wage Value\r\n\t\tpublic double getWage() {\r\n\t\t\treturn wage;\r\n\t\t}\r\n\t\t\r\n\t\t//Sets And Updates Wage\r\n\t\tpublic void setWage(double hourlypay) {\r\n\t\t\twage = hourlypay;\r\n\t\t}\r\n\t\t\r\n\t\t//Method That Subtracts A 30% Tax From Base Hourly Pay \t\r\n\t\tpublic double getTotalPay() {\t\t\r\n\t\t\ttotalpay = wage - (wage*0.3);\r\n\t\t\treturn totalpay;\r\n\t\t\t\t}\r\n\r\n\t\t//Method Takes Name, Wage, and Totalpay From Employee.java Alongside Hour From HW3.java To Place Them In The Printed Statement\r\n\t\tpublic void showText(int hoursworked) {\r\n\t\t\ttry {System.out.printf(&quot;The employee &quot; +name+ &quot;, who earns $%.2f per hour, worked for &quot; +hoursworked+ &quot; hours last week and took home $%.2f after taxes.\\n&quot;, wage, getTotalPay()*hoursworked);\r\n\t\t\t} catch(ArrayIndexOutOfBoundsException oob) {\r\n\t\t\t\tSystem.out.println(&quot;Error&quot;);\r\n\t\t\t}\r\n\t\t}\r\n}\r\n\r\n\r\nIn this weekly paycheck estimator program I need to catch a possible ArrayIndexOutOfBoundsException when extracting an employee from my employee array. I have no idea how to test if my current placement of the exception program is correct because I don&#39;t know how to format an each loop to attempt to loop beyond the four employees I currently have in my main method. Is my current exception program placed correctly in the loop or do I need to place it somewhere else?","title":"Need Help Catching An ArrayIndexOutOfBoundsException On A For Each Loop (Java)","body":"<h1><strong>HW3.java</strong></h1>\n<p>import java.util.Scanner;</p>\n<p>public class HW3 {</p>\n<pre><code>//Method Establishes Scanner For Inputing Hour\npublic static int Scanner() {\n    Scanner x = new Scanner(System.in);\n    int pay = x.nextInt();\n    return pay;\n}\n        \npublic static void main(String args[]) {\n    //Asks For Hour Input, Input Hours Into Variable\n    System.out.println(&quot;Input Hours&quot;);\n    int hour = Scanner();\n\n    //Establish Array Of Employees With Name And Wage Categories\n    Employee [] employee = new Employee[4];\n    employee [0] = new Employee(&quot;Shinji Ikari&quot;, 15.50);     \n    employee [1] = new Employee(&quot;Rei Ayanami&quot;, 21.35);  \n    employee [2] = new Employee(&quot;Asuka Langley Soryu&quot;, 2.12);\n    employee [3] = new Employee(&quot;Kaworu Nagisa&quot;, 20.01);\n    \n    //For Loop Running The showText Method From Employee.java For Each Employee In Array \n    try {\n        for (Employee e : employee)     \n            e.showText(hour);       \n    } catch(ArrayIndexOutOfBoundsException oob) {\n        System.out.println(&quot;NO&quot;);\n    }   \n}   \n</code></pre>\n<p>}</p>\n<h1><strong>Employee.java</strong></h1>\n<p>public class Employee {</p>\n<pre><code>//Sets Private Variables That Defines &quot;Employee&quot;\nprivate String name;\nprivate double wage;\nprivate double totalpay;\n\n    //Employee Constructors For Name And Wage\n    public Employee(String employeename, double hourlypay) {\n        name = employeename;\n        wage = hourlypay;\n    }   \n    \n    //Returns The Name Value        \n    public String getName() {           \n        return name;        \n    }\n    \n    //Sets ASnd Updates Name\n    public void setName(String ename) {         \n        name = ename;   \n    }       \n    \n    //Returns The Wage Value\n    public double getWage() {\n        return wage;\n    }\n    \n    //Sets And Updates Wage\n    public void setWage(double hourlypay) {\n        wage = hourlypay;\n    }\n    \n    //Method That Subtracts A 30% Tax From Base Hourly Pay  \n    public double getTotalPay() {       \n        totalpay = wage - (wage*0.3);\n        return totalpay;\n            }\n\n    //Method Takes Name, Wage, and Totalpay From Employee.java Alongside Hour From HW3.java To Place Them In The Printed Statement\n    public void showText(int hoursworked) {\n        try {System.out.printf(&quot;The employee &quot; +name+ &quot;, who earns $%.2f per hour, worked for &quot; +hoursworked+ &quot; hours last week and took home $%.2f after taxes.\\n&quot;, wage, getTotalPay()*hoursworked);\n        } catch(ArrayIndexOutOfBoundsException oob) {\n            System.out.println(&quot;Error&quot;);\n        }\n    }\n</code></pre>\n<p>}</p>\n<p>In this weekly paycheck estimator program I need to catch a possible ArrayIndexOutOfBoundsException when extracting an employee from my employee array. I have no idea how to test if my current placement of the exception program is correct because I don't know how to format an each loop to attempt to loop beyond the four employees I currently have in my main method. Is my current exception program placed correctly in the loop or do I need to place it somewhere else?</p>\n"},{"tags":["java","spring","spring-mvc","mybatis"],"comments":[{"owner":{"account_id":21994,"reputation":73798,"user_id":53897,"accept_rate":56,"display_name":"Thorbj&#248;rn Ravn Andersen"},"score":0,"creation_date":1627990675,"post_id":68635268,"comment_id":121297495,"body_markdown":"Do you compile with debug info turned on?","body":"Do you compile with debug info turned on?"},{"owner":{"account_id":2973925,"reputation":1763,"user_id":2525402,"accept_rate":65,"display_name":"luongkhanh"},"score":0,"creation_date":1627990775,"post_id":68635268,"comment_id":121297544,"body_markdown":"yes, i have debuged and turned on it","body":"yes, i have debuged and turned on it"},{"owner":{"account_id":1851074,"reputation":690,"user_id":1677638,"display_name":"planben"},"score":0,"creation_date":1627990924,"post_id":68635268,"comment_id":121297592,"body_markdown":"According to - https://mybatis.org/mybatis-3/sqlmap-xml.html#insert_update_and_delete\nMaybe you should try wrapping status and smsId with a class and change the parameterType in the query xml to that class canonical name","body":"According to - <a href=\"https://mybatis.org/mybatis-3/sqlmap-xml.html#insert_update_and_delete\" rel=\"nofollow noreferrer\">mybatis.org/mybatis-3/sqlmap-xml.html#insert_update_and_dele&zwnj;&#8203;te</a> Maybe you should try wrapping status and smsId with a class and change the parameterType in the query xml to that class canonical name"},{"owner":{"account_id":2973925,"reputation":1763,"user_id":2525402,"accept_rate":65,"display_name":"luongkhanh"},"score":0,"creation_date":1627990939,"post_id":68635268,"comment_id":121297602,"body_markdown":"@Thorbj&#248;rnRavnAndersen: I have updated more log console","body":"@Thorbj&#248;rnRavnAndersen: I have updated more log console"}],"answers":[{"tags":[],"owner":{"account_id":21071232,"reputation":394,"user_id":15487427,"display_name":"coding monster"},"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1627991744,"creation_date":1627991222,"answer_id":68635456,"question_id":68635268,"body_markdown":"You used `parameterType` of sqlmap as `Map`, so you have to pass parameter of mapper&#39;s method with `Map`.\r\nBut you didn&#39;t.\r\n\r\nAs @planben commented, without passing map as mapper&#39;s parameter, you should define `&lt;sql /&gt;`, but it&#39;s too complicated.\r\n\r\n\r\nPlease try code below.\r\n```java\r\n@Override\r\n public void insertOrUpdateStatusOfSendSMS(BigDecimal smsId, String status) {\r\n\r\n     Map&lt;String, Object&gt; mp = Maps.newHashMap();\r\n\r\n     mp.put(&quot;smsId&quot;, smsId);\r\n     mp.put(&quot;status&quot;, status);\r\n\r\n     smsBrandingListMapper.insertOrUpdateStatusOfSendSMS(mp);\r\n }\r\n```\r\n","title":"Parameter &#39;status&#39; not found. Available parameters are [0, 1, param1, param2] in Mybatis and Spring","body":"<p>You used <code>parameterType</code> of sqlmap as <code>Map</code>, so you have to pass parameter of mapper's method with <code>Map</code>.\nBut you didn't.</p>\n<p>As @planben commented, without passing map as mapper's parameter, you should define <code>&lt;sql /&gt;</code>, but it's too complicated.</p>\n<p>Please try code below.</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Override\n public void insertOrUpdateStatusOfSendSMS(BigDecimal smsId, String status) {\n\n     Map&lt;String, Object&gt; mp = Maps.newHashMap();\n\n     mp.put(&quot;smsId&quot;, smsId);\n     mp.put(&quot;status&quot;, status);\n\n     smsBrandingListMapper.insertOrUpdateStatusOfSendSMS(mp);\n }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":29785545,"reputation":1,"user_id":22826983,"display_name":"jianhua zhuo"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1699339650,"creation_date":1699339650,"answer_id":77436063,"question_id":68635268,"body_markdown":"i melt the problem and my final solution is that rename the method name which is the same with baseMapper&#39;s","title":"Parameter &#39;status&#39; not found. Available parameters are [0, 1, param1, param2] in Mybatis and Spring","body":"<p>i melt the problem and my final solution is that rename the method name which is the same with baseMapper's</p>\n"}],"owner":{"account_id":2973925,"reputation":1763,"user_id":2525402,"accept_rate":65,"display_name":"luongkhanh"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2574,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":68635456,"answer_count":2,"score":0,"last_activity_date":1699339650,"creation_date":1627990345,"question_id":68635268,"body_markdown":"I&#39;m using mybatis and spring, i want to compare 2 date time and then update data into database\r\n\r\nmy service and mapper:\r\n    \r\n     @Override\r\n\t public void insertOrUpdateStatusOfSendSMS(BigDecimal smsId, String status) {\r\n\t\t smsBrandingListMapper.insertOrUpdateStatusOfSendSMS(smsId, status);\r\n\t }\r\n\r\nthis is my code (controller class):\r\n\r\n    smsBrandingList = smsService.selectListSMSBranding(params);\r\n\tDateTimeFormatter dtFormatter = DateTimeFormatter.ofPattern(&quot;dd-MM-yyyy HH:mm&quot;);\r\n\r\n\t\tfor(int i=0 ; i&lt; smsBrandingList.size() ; i++) {\r\n\r\n\t\t\tSystem.out.println(smsBrandingList.get(i).get(&quot;scheduled&quot;));\r\n\t\t\tSystem.out.println(smsBrandingList.get(i).get(&quot;smsId&quot;));\r\n\r\n\t\t\tBigDecimal smsId = (BigDecimal) smsBrandingList.get(i).get(&quot;smsId&quot;);\r\n\t\t\tSystem.out.println(smsId);\r\n\r\n\t\t\tString smsSendStatusScheduled = (String) smsBrandingList.get(i).get(&quot;scheduled&quot;);\r\n\t\t\tLocalDateTime localDateTime = LocalDateTime.parse(smsSendStatusScheduled , dtFormatter) ;\r\n\r\n\t\t\t// get current time now\r\n\t\t\tLocalDateTime currentTimeNow = LocalDateTime.now();\r\n\r\n\t\t\tSystem.out.println(localDateTime);\r\n\t\t\tSystem.out.println(currentTimeNow);\r\n\r\n\r\n\t\t\tif (currentTimeNow.isEqual(localDateTime) ) {\r\n\r\n\t\t\t\tString status = &quot;Sent&quot;;\r\n\t\t\t\tsmsService.insertOrUpdateStatusOfSendSMS(smsId, status);\r\n\t\t\t\tlogger.info(&quot;CompareTo data and Date -&gt; {}&quot; + SMSConstant.STATUS_SENT);\r\n\t\t\t}\r\n\r\n\t\t\telse if (currentTimeNow.isAfter(localDateTime) ) {\r\n\r\n\t\t\t\tString status = &quot;Sent&quot;;\r\n\r\n\t\t\t\tsmsService.insertOrUpdateStatusOfSendSMS(smsId, status);\r\n\t\t\t\tlogger.info(&quot;CompareTo data and Date -&gt; {}&quot; + SMSConstant.STATUS_SENT);\r\n\t\t\t}\r\n\r\n\t\t\telse if (currentTimeNow.isBefore(localDateTime) ) {\r\n\r\n\t\t\t\tString status = &quot;Waiting&quot;;\r\n\r\n\t\t\t\tsmsService.insertOrUpdateStatusOfSendSMS(smsId, status);\r\n\t\t\t\tlogger.info(&quot;CompareTo data and Date -&gt; {}&quot; + SMSConstant.STATUS_WAITING);\r\n\t\t\t}\r\n\r\n\t\t\telse {\r\n\t\t\t\tString status = &quot;Unknown&quot;;\r\n\t\t\t\tlogger.error(&quot;CompareTo data and Date -&gt; {3}&quot; + status);\r\n\t\t\t    throw new IllegalStateException(&quot;CompareTo data and Date -&gt; {3}&quot; + SMSConstant.STATUS_UNKNOWN);\r\n\t\t\t}\r\n\r\nthis is my query:\r\n\r\n    &lt;update id=&quot;insertOrUpdateStatusOfSendSMS&quot; parameterType=&quot;Map&quot;&gt;\r\n     UPDATE MSC0053M\r\n        SET STATUS = #{status}\r\n        WHERE SMS_ID = #{smsId}\r\n    &lt;/update&gt;\r\n\r\nWhen i compare date time, base on condition of if, it will update ```status``` by ```smsId```, but i run and debug it happens an exception following as:\r\n\r\n    2021-08-03 18:09:37,707 ERROR [com.coway.trust.config.handler.GlobalExceptionHandler] [defaultException]ex : {}\r\n    org.mybatis.spring.MyBatisSystemException: nested exception is org.apache.ibatis.binding.BindingException: Parameter &#39;status&#39; not found. Available parameters are [0, 1, param1, param2]\r\n      at org.mybatis.spring.MyBatisExceptionTranslator.translateExceptionIfPossible(MyBatisExceptionTranslator.java:76) ~[mybatis-spring-1.2.3.jar:1.2.3]\r\n      at org.mybatis.spring.SqlSessionTemplate$SqlSessionInterceptor.invoke(SqlSessionTemplate.java:399) ~[mybatis-spring-1.2.3.jar:1.2.3]\r\n      at com.myservice.SMSBrandingListServiceImpl.insertOrUpdateStatusOfSendSMS(SMSBrandingListServiceImpl.java:90) ~[classes/:?]\r\n      at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[?:1.8.0_144]\r\n      at com.myservice.SMSBrandingListServiceImpl.insertOrUpdateStatusOfSendSMS(SMSBrandingListServiceImpl.java:90) ~[classes/:?]\r\n      at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[?:1.8.0_144]\r\n\r\n How I can fix the problem ?","title":"Parameter &#39;status&#39; not found. Available parameters are [0, 1, param1, param2] in Mybatis and Spring","body":"<p>I'm using mybatis and spring, i want to compare 2 date time and then update data into database</p>\n<p>my service and mapper:</p>\n<pre><code> @Override\n public void insertOrUpdateStatusOfSendSMS(BigDecimal smsId, String status) {\n     smsBrandingListMapper.insertOrUpdateStatusOfSendSMS(smsId, status);\n }\n</code></pre>\n<p>this is my code (controller class):</p>\n<pre><code>smsBrandingList = smsService.selectListSMSBranding(params);\nDateTimeFormatter dtFormatter = DateTimeFormatter.ofPattern(&quot;dd-MM-yyyy HH:mm&quot;);\n\n    for(int i=0 ; i&lt; smsBrandingList.size() ; i++) {\n\n        System.out.println(smsBrandingList.get(i).get(&quot;scheduled&quot;));\n        System.out.println(smsBrandingList.get(i).get(&quot;smsId&quot;));\n\n        BigDecimal smsId = (BigDecimal) smsBrandingList.get(i).get(&quot;smsId&quot;);\n        System.out.println(smsId);\n\n        String smsSendStatusScheduled = (String) smsBrandingList.get(i).get(&quot;scheduled&quot;);\n        LocalDateTime localDateTime = LocalDateTime.parse(smsSendStatusScheduled , dtFormatter) ;\n\n        // get current time now\n        LocalDateTime currentTimeNow = LocalDateTime.now();\n\n        System.out.println(localDateTime);\n        System.out.println(currentTimeNow);\n\n\n        if (currentTimeNow.isEqual(localDateTime) ) {\n\n            String status = &quot;Sent&quot;;\n            smsService.insertOrUpdateStatusOfSendSMS(smsId, status);\n            logger.info(&quot;CompareTo data and Date -&gt; {}&quot; + SMSConstant.STATUS_SENT);\n        }\n\n        else if (currentTimeNow.isAfter(localDateTime) ) {\n\n            String status = &quot;Sent&quot;;\n\n            smsService.insertOrUpdateStatusOfSendSMS(smsId, status);\n            logger.info(&quot;CompareTo data and Date -&gt; {}&quot; + SMSConstant.STATUS_SENT);\n        }\n\n        else if (currentTimeNow.isBefore(localDateTime) ) {\n\n            String status = &quot;Waiting&quot;;\n\n            smsService.insertOrUpdateStatusOfSendSMS(smsId, status);\n            logger.info(&quot;CompareTo data and Date -&gt; {}&quot; + SMSConstant.STATUS_WAITING);\n        }\n\n        else {\n            String status = &quot;Unknown&quot;;\n            logger.error(&quot;CompareTo data and Date -&gt; {3}&quot; + status);\n            throw new IllegalStateException(&quot;CompareTo data and Date -&gt; {3}&quot; + SMSConstant.STATUS_UNKNOWN);\n        }\n</code></pre>\n<p>this is my query:</p>\n<pre><code>&lt;update id=&quot;insertOrUpdateStatusOfSendSMS&quot; parameterType=&quot;Map&quot;&gt;\n UPDATE MSC0053M\n    SET STATUS = #{status}\n    WHERE SMS_ID = #{smsId}\n&lt;/update&gt;\n</code></pre>\n<p>When i compare date time, base on condition of if, it will update <code>status</code> by <code>smsId</code>, but i run and debug it happens an exception following as:</p>\n<pre><code>2021-08-03 18:09:37,707 ERROR [com.coway.trust.config.handler.GlobalExceptionHandler] [defaultException]ex : {}\norg.mybatis.spring.MyBatisSystemException: nested exception is org.apache.ibatis.binding.BindingException: Parameter 'status' not found. Available parameters are [0, 1, param1, param2]\n  at org.mybatis.spring.MyBatisExceptionTranslator.translateExceptionIfPossible(MyBatisExceptionTranslator.java:76) ~[mybatis-spring-1.2.3.jar:1.2.3]\n  at org.mybatis.spring.SqlSessionTemplate$SqlSessionInterceptor.invoke(SqlSessionTemplate.java:399) ~[mybatis-spring-1.2.3.jar:1.2.3]\n  at com.myservice.SMSBrandingListServiceImpl.insertOrUpdateStatusOfSendSMS(SMSBrandingListServiceImpl.java:90) ~[classes/:?]\n  at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[?:1.8.0_144]\n  at com.myservice.SMSBrandingListServiceImpl.insertOrUpdateStatusOfSendSMS(SMSBrandingListServiceImpl.java:90) ~[classes/:?]\n  at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[?:1.8.0_144]\n</code></pre>\n<p>How I can fix the problem ?</p>\n"},{"tags":["java","spring-boot"],"comments":[{"owner":{"account_id":3023214,"reputation":20362,"user_id":2563754,"display_name":"Seelenvirtuose"},"score":0,"creation_date":1699341660,"post_id":77436047,"comment_id":136516116,"body_markdown":"Well ... the error message seems to be clear. You do not have the [`@NamedStoredProcedureQuery `](https://docs.oracle.com/javaee%2F7%2Fapi%2F%2F/javax/persistence/NamedStoredProcedureQuery.html) declaration.","body":"Well ... the error message seems to be clear. You do not have the <a href=\"https://docs.oracle.com/javaee%2F7%2Fapi%2F%2F/javax/persistence/NamedStoredProcedureQuery.html\" rel=\"nofollow noreferrer\"><code>@NamedStoredProcedureQuery </code></a> declaration."}],"owner":{"account_id":1464588,"reputation":1889,"user_id":1377850,"accept_rate":31,"display_name":"franco"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":37,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":0,"score":0,"last_activity_date":1699339502,"creation_date":1699339502,"question_id":77436047,"body_markdown":"\r\nI have stored function and it returns a value into **json_out**\r\n\r\nthis is the definition :\r\n\r\n\r\n    declare\r\n        request_detail clob := &#39;{ &quot;p_principal&quot;:\r\n                                    [\r\n                                        {\r\n                                        &quot;p_emp&quot;: 200,\r\n                                        &quot;p_request&quot;: 23,\r\n    \t\t\t\t\t\t\t\t\t&quot;p_date&quot;: &quot;23-10-2024&quot;,\r\n                                        &quot;p_info&quot;: &quot;test&quot;\r\n                                        }\r\n                                    ]\r\n                                    ,&quot;p_detail&quot;:\r\n                                    [\r\n                                        {\r\n                                        &quot;p_emp&quot;: 200,\r\n                                        &quot;p_date&quot;: &quot;23-10-2024&quot;,\r\n                                        &quot;p_info&quot;: &quot;test&quot;\r\n                                        }\r\n                                    ]\r\n                            }&#39;;\r\n        json_out                    clob;\r\n    begin\r\n    \r\n    json_out := insert_order(request_detail);\r\n    dbms_output.put_line(json_out);\r\n    end;\r\n           \r\n\r\n  this is the output :\r\n\r\n    {&quot;p_principal&quot;:[{&quot;p_num_generate&quot;:15,&quot;p_error&quot;:null}]\r\n    ,&quot;p_detail&quot;:[{&quot;p_emp&quot;:200,&quot;p_error&quot;:null}]}\r\n\r\nI want to call this function with java spring boot \r\n\r\nI try with this code :\r\n\r\n\r\n\r\n    JSONObject jsonInput = new JSONObject(\r\n        \t\t\t\r\n        \t\t\t\r\n      \t\t\t  &quot;{ \\&quot;p_principal\\&quot;:\\r\\n&quot; + \r\n      \t\t\t  &quot;                                [\\r\\n&quot; + \r\n      \t\t\t  &quot;                                    {\\r\\n&quot; + \r\n      \t\t\t  &quot;                                    \\&quot;p_emp\\&quot;: 200,\\r\\n&quot; + \r\n      \t\t\t  &quot;                                    \\&quot;p_request\\&quot;: 23,\\r\\n&quot; + \r\n      \t\t\t  &quot;\t\t\t\t\t\t\t\t\t\\&quot;p_date\\&quot;: \\&quot;23-10-2024\\&quot;,\\r\\n&quot; + \r\n      \t\t\t  &quot;                                    \\&quot;p_info\\&quot;: \\&quot;test\\&quot;\\r\\n&quot; + \r\n      \t\t\t  &quot;                                    }\\r\\n&quot; + \r\n      \t\t\t  &quot;                                ]\\r\\n&quot; + \r\n      \t\t\t  &quot;                                ,\\&quot;p_detail\\&quot;:\\r\\n&quot; + \r\n      \t\t\t  &quot;                                [\\r\\n&quot; + \r\n      \t\t\t  &quot;                                    {\\r\\n&quot; + \r\n      \t\t\t  &quot;                                    \\&quot;p_emp\\&quot;: 200,\\r\\n&quot; + \r\n      \t\t\t  &quot;                                    \\&quot;p_date\\&quot;: \\&quot;23-10-2024\\&quot;,\\r\\n&quot; + \r\n      \t\t\t  &quot;                                    \\&quot;p_info\\&quot;: \\&quot;test\\&quot;\\r\\n&quot; + \r\n      \t\t\t  &quot;                                    }\\r\\n&quot; + \r\n      \t\t\t  &quot;                                ]\\r\\n&quot; + \r\n      \t\t\t  &quot;                        }&quot;\r\n    \r\n    \r\n        \t\t\t);\r\n        \t\r\n        \tStoredProcedureQuery storedProcedureQuery = em.createNamedStoredProcedureQuery(&quot;insert_order&quot;);\r\n    \r\n        \tstoredProcedureQuery.registerStoredProcedureParameter(&quot;output&quot;, JSONObject.class  , ParameterMode.OUT);\r\n    \r\n        \tstoredProcedureQuery.registerStoredProcedureParameter(&quot;input&quot;, JSONObject.class  , ParameterMode.IN);\r\n        \tstoredProcedureQuery.setParameter(&quot;input&quot;, jsonInput);\r\n    \r\n        \tstoredProcedureQuery.execute();\r\n\t\t\r\n\r\nbut I have this error\r\n\t\r\n\t\tCaused by: java.lang.IllegalArgumentException: No @NamedStoredProcedureQuery was found with that name : insert_order\r\n\r\n\r\ncan someone help me to solve this problem\r\n\t\t\r\n\t\t\r\n","title":"java spring boot call function with json output parameter","body":"<p>I have stored function and it returns a value into <strong>json_out</strong></p>\n<p>this is the definition :</p>\n<pre><code>declare\n    request_detail clob := '{ &quot;p_principal&quot;:\n                                [\n                                    {\n                                    &quot;p_emp&quot;: 200,\n                                    &quot;p_request&quot;: 23,\n                                    &quot;p_date&quot;: &quot;23-10-2024&quot;,\n                                    &quot;p_info&quot;: &quot;test&quot;\n                                    }\n                                ]\n                                ,&quot;p_detail&quot;:\n                                [\n                                    {\n                                    &quot;p_emp&quot;: 200,\n                                    &quot;p_date&quot;: &quot;23-10-2024&quot;,\n                                    &quot;p_info&quot;: &quot;test&quot;\n                                    }\n                                ]\n                        }';\n    json_out                    clob;\nbegin\n\njson_out := insert_order(request_detail);\ndbms_output.put_line(json_out);\nend;\n       \n</code></pre>\n<p>this is the output :</p>\n<pre><code>{&quot;p_principal&quot;:[{&quot;p_num_generate&quot;:15,&quot;p_error&quot;:null}]\n,&quot;p_detail&quot;:[{&quot;p_emp&quot;:200,&quot;p_error&quot;:null}]}\n</code></pre>\n<p>I want to call this function with java spring boot</p>\n<p>I try with this code :</p>\n<pre><code>JSONObject jsonInput = new JSONObject(\n                \n                \n              &quot;{ \\&quot;p_principal\\&quot;:\\r\\n&quot; + \n              &quot;                                [\\r\\n&quot; + \n              &quot;                                    {\\r\\n&quot; + \n              &quot;                                    \\&quot;p_emp\\&quot;: 200,\\r\\n&quot; + \n              &quot;                                    \\&quot;p_request\\&quot;: 23,\\r\\n&quot; + \n              &quot;                                 \\&quot;p_date\\&quot;: \\&quot;23-10-2024\\&quot;,\\r\\n&quot; + \n              &quot;                                    \\&quot;p_info\\&quot;: \\&quot;test\\&quot;\\r\\n&quot; + \n              &quot;                                    }\\r\\n&quot; + \n              &quot;                                ]\\r\\n&quot; + \n              &quot;                                ,\\&quot;p_detail\\&quot;:\\r\\n&quot; + \n              &quot;                                [\\r\\n&quot; + \n              &quot;                                    {\\r\\n&quot; + \n              &quot;                                    \\&quot;p_emp\\&quot;: 200,\\r\\n&quot; + \n              &quot;                                    \\&quot;p_date\\&quot;: \\&quot;23-10-2024\\&quot;,\\r\\n&quot; + \n              &quot;                                    \\&quot;p_info\\&quot;: \\&quot;test\\&quot;\\r\\n&quot; + \n              &quot;                                    }\\r\\n&quot; + \n              &quot;                                ]\\r\\n&quot; + \n              &quot;                        }&quot;\n\n\n                );\n        \n        StoredProcedureQuery storedProcedureQuery = em.createNamedStoredProcedureQuery(&quot;insert_order&quot;);\n\n        storedProcedureQuery.registerStoredProcedureParameter(&quot;output&quot;, JSONObject.class  , ParameterMode.OUT);\n\n        storedProcedureQuery.registerStoredProcedureParameter(&quot;input&quot;, JSONObject.class  , ParameterMode.IN);\n        storedProcedureQuery.setParameter(&quot;input&quot;, jsonInput);\n\n        storedProcedureQuery.execute();\n    \n</code></pre>\n<p>but I have this error</p>\n<pre><code>    Caused by: java.lang.IllegalArgumentException: No @NamedStoredProcedureQuery was found with that name : insert_order\n</code></pre>\n<p>can someone help me to solve this problem</p>\n"},{"tags":["java","collections","java-8","java-stream","collectors"],"comments":[{"owner":{"account_id":162699,"reputation":138050,"user_id":3788176,"accept_rate":54,"display_name":"Andy Turner"},"score":0,"creation_date":1686300637,"post_id":76438674,"comment_id":134782964,"body_markdown":"&quot;So I have a List of Lists of different data types&quot; lists are a data structure for storing homogeneous data (at least with respect to how you need to process it). If you have different data types in sublists, write a class to hold the various fields.","body":"&quot;So I have a List of Lists of different data types&quot; lists are a data structure for storing homogeneous data (at least with respect to how you need to process it). If you have different data types in sublists, write a class to hold the various fields."},{"owner":{"account_id":28786201,"reputation":1,"user_id":22046607,"display_name":"Trideep Biswas"},"score":0,"creation_date":1686300746,"post_id":76438674,"comment_id":134782985,"body_markdown":"working on a legacy code cannot change the structure now, will keep that in mind though","body":"working on a legacy code cannot change the structure now, will keep that in mind though"},{"owner":{"account_id":13993199,"reputation":129,"user_id":10362945,"display_name":"Sagar"},"score":0,"creation_date":1699336114,"post_id":76438674,"comment_id":136515515,"body_markdown":"`List&lt;List&lt;?&gt;&gt; a ` declaration does not compile","body":"<code>List&lt;List&lt;?&gt;&gt; a </code> declaration does not compile"}],"answers":[{"tags":[],"owner":{"account_id":5404,"reputation":22089,"user_id":8681,"accept_rate":67,"display_name":"Jorn"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1686303297,"creation_date":1686300839,"answer_id":76438706,"question_id":76438674,"body_markdown":"As always with this type of question, the imperative approach is much easier to read and reason about:\r\n\r\n```\r\n// LinkedHashMap to preserve insertion order\r\nMap&lt;String, Integer&gt; results = new LinkedHashMap&lt;&gt;(); \r\nfor (List&lt;Object&gt; list : lists) {\r\n  String id = (String) list.get(0);\r\n  int value = (Integer) list.get(1);\r\n  if (results.containsKey(id)) {\r\n    results.put(id, results.get(id) - value);\r\n  } else {\r\n    results.put(id, value);\r\n  }\r\n} \r\n```\r\n\r\nI don&#39;t have a compiler handy so I can&#39;t test, but this should get you started.\r\n\r\nAfter completing and understanding this example, you may even be able to turn it into a functional pipeline. But if you want this code to be maintainable, you probably shouldn&#39;t.","title":"Java 8 Stream - operations on List&lt;List&lt;?&gt;&gt; operations on duplicate ids of a list","body":"<p>As always with this type of question, the imperative approach is much easier to read and reason about:</p>\n<pre><code>// LinkedHashMap to preserve insertion order\nMap&lt;String, Integer&gt; results = new LinkedHashMap&lt;&gt;(); \nfor (List&lt;Object&gt; list : lists) {\n  String id = (String) list.get(0);\n  int value = (Integer) list.get(1);\n  if (results.containsKey(id)) {\n    results.put(id, results.get(id) - value);\n  } else {\n    results.put(id, value);\n  }\n} \n</code></pre>\n<p>I don't have a compiler handy so I can't test, but this should get you started.</p>\n<p>After completing and understanding this example, you may even be able to turn it into a functional pipeline. But if you want this code to be maintainable, you probably shouldn't.</p>\n"},{"tags":[],"owner":{"account_id":162699,"reputation":138050,"user_id":3788176,"accept_rate":54,"display_name":"Andy Turner"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1686301111,"creation_date":1686301111,"answer_id":76438738,"question_id":76438674,"body_markdown":"The first thing you need to do is to group the list elements by key (the first element of your sublist):\r\n\r\n```\r\na.stream().collect(Collectors.groupingBy(e -&gt; e.get(0)));\r\n```\r\n\r\nThis will give you a `Map&lt;Object, List&lt;Object&gt;&gt;`, like:\r\n\r\n```\r\n{&quot;1&quot;: [[&quot;1&quot;,100],[&quot;1&quot;,10]], &quot;2&quot;: [[&quot;2&quot;,200],[&quot;2&quot;,20]], &quot;5&quot;: [[&quot;5&quot;,300][&quot;5&quot;,40]]}\r\n```\r\n\r\nNow, you need to apply a reduction to the values in the map to drop the keys from the sublists in the value. You can do this explicitly on the `Map`; or you can apply a downstream collector:\r\n\r\n```\r\na.stream().collect(\r\n    Collectors.groupingBy(\r\n        e -&gt; e.get(0),\r\n        e -&gt; e.stream().map(ee -&gt; ee.get(1)).collect(toList())))\r\n```\r\n\r\nThis will give you a `Map&lt;Object, List&lt;Object&gt;&gt;`, like:\r\n\r\n```\r\n{&quot;1&quot;: [100, 10], &quot;2&quot;: [200, 20], &quot;5&quot;: [300, 40]}\r\n```\r\n\r\nNow you need to apply a further reduction to the map values in order to do the &quot;subtraction&quot;.\r\n\r\nI&#39;m not going to provide code for that, because it&#39;s not clear exactly how you&#39;d handle the case where that list has anything other than 2 values. But, it goes where I indicate:\r\n\r\n```\r\na.stream().collect(\r\n    Collectors.groupingBy(\r\n        e -&gt; e.get(0),\r\n        e -&gt; e.stream().map(ee -&gt; ee.get(1)).reduce(....)))\r\n```\r\n\r\n---\r\n\r\nOr, do it without streams. It&#39;s likely going to be more readable.","title":"Java 8 Stream - operations on List&lt;List&lt;?&gt;&gt; operations on duplicate ids of a list","body":"<p>The first thing you need to do is to group the list elements by key (the first element of your sublist):</p>\n<pre><code>a.stream().collect(Collectors.groupingBy(e -&gt; e.get(0)));\n</code></pre>\n<p>This will give you a <code>Map&lt;Object, List&lt;Object&gt;&gt;</code>, like:</p>\n<pre><code>{&quot;1&quot;: [[&quot;1&quot;,100],[&quot;1&quot;,10]], &quot;2&quot;: [[&quot;2&quot;,200],[&quot;2&quot;,20]], &quot;5&quot;: [[&quot;5&quot;,300][&quot;5&quot;,40]]}\n</code></pre>\n<p>Now, you need to apply a reduction to the values in the map to drop the keys from the sublists in the value. You can do this explicitly on the <code>Map</code>; or you can apply a downstream collector:</p>\n<pre><code>a.stream().collect(\n    Collectors.groupingBy(\n        e -&gt; e.get(0),\n        e -&gt; e.stream().map(ee -&gt; ee.get(1)).collect(toList())))\n</code></pre>\n<p>This will give you a <code>Map&lt;Object, List&lt;Object&gt;&gt;</code>, like:</p>\n<pre><code>{&quot;1&quot;: [100, 10], &quot;2&quot;: [200, 20], &quot;5&quot;: [300, 40]}\n</code></pre>\n<p>Now you need to apply a further reduction to the map values in order to do the &quot;subtraction&quot;.</p>\n<p>I'm not going to provide code for that, because it's not clear exactly how you'd handle the case where that list has anything other than 2 values. But, it goes where I indicate:</p>\n<pre><code>a.stream().collect(\n    Collectors.groupingBy(\n        e -&gt; e.get(0),\n        e -&gt; e.stream().map(ee -&gt; ee.get(1)).reduce(....)))\n</code></pre>\n<hr />\n<p>Or, do it without streams. It's likely going to be more readable.</p>\n"},{"tags":[],"owner":{"account_id":22195690,"reputation":51,"user_id":16437129,"display_name":"Azaan Wani"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1686304637,"creation_date":1686304567,"answer_id":76439153,"question_id":76438674,"body_markdown":"```java\r\nList&lt;List&lt;?&gt;&gt; result = a.stream()\r\n                        .collect(Collectors.toMap(list -&gt; list.get(0),\r\n                                                  list -&gt; (int) list.get(1),\r\n                                                  Integer::subtractExact))\r\n                        .entrySet()\r\n                        .stream()\r\n                        .map(entry -&gt; Arrays.asList(entry.getKey(),\r\n                                                    entry.getValue()))\r\n                        .collect(Collectors.toList());\r\nSystem.out.print(result);\r\n```","title":"Java 8 Stream - operations on List&lt;List&lt;?&gt;&gt; operations on duplicate ids of a list","body":"<pre class=\"lang-java prettyprint-override\"><code>List&lt;List&lt;?&gt;&gt; result = a.stream()\n                        .collect(Collectors.toMap(list -&gt; list.get(0),\n                                                  list -&gt; (int) list.get(1),\n                                                  Integer::subtractExact))\n                        .entrySet()\n                        .stream()\n                        .map(entry -&gt; Arrays.asList(entry.getKey(),\n                                                    entry.getValue()))\n                        .collect(Collectors.toList());\nSystem.out.print(result);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":13993199,"reputation":129,"user_id":10362945,"display_name":"Sagar"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1699338509,"creation_date":1699338509,"answer_id":77435969,"question_id":76438674,"body_markdown":"You could delay collecting/reducing object and get the result\r\n```\r\nimport static java.util.stream.Collectors.*;\r\nclass Scratch {\r\n    public static void main(String[] args) {\r\n        List&lt;List&lt;?&gt;&gt; a = null;//[[&quot;1&quot;,100],[&quot;2&quot;,200],[&quot;5&quot;,300],[&quot;1&quot;,10],[&quot;2&quot;,20],[&quot;5&quot;,40]]\r\n        Map&lt;?, Optional&lt;Integer&gt;&gt; map = a.stream().collect(groupingBy(e -&gt; e.get(0),\r\n                                                            mapping(e -&gt; (Integer) e.get(1)\r\n                                                                    , reducing((e1, e2) -&gt; e1 - e2))));\r\n    }\r\n}\r\n```","title":"Java 8 Stream - operations on List&lt;List&lt;?&gt;&gt; operations on duplicate ids of a list","body":"<p>You could delay collecting/reducing object and get the result</p>\n<pre><code>import static java.util.stream.Collectors.*;\nclass Scratch {\n    public static void main(String[] args) {\n        List&lt;List&lt;?&gt;&gt; a = null;//[[&quot;1&quot;,100],[&quot;2&quot;,200],[&quot;5&quot;,300],[&quot;1&quot;,10],[&quot;2&quot;,20],[&quot;5&quot;,40]]\n        Map&lt;?, Optional&lt;Integer&gt;&gt; map = a.stream().collect(groupingBy(e -&gt; e.get(0),\n                                                            mapping(e -&gt; (Integer) e.get(1)\n                                                                    , reducing((e1, e2) -&gt; e1 - e2))));\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":28786201,"reputation":1,"user_id":22046607,"display_name":"Trideep Biswas"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":73,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":4,"score":0,"last_activity_date":1699338509,"creation_date":1686300549,"question_id":76438674,"body_markdown":"I have been trying to figure out a way to do this Hopefuly you&#39;ll understand my problem.\r\n\r\nSo I have a List of Lists of different data types\r\n\r\n    List&lt;List&lt;?&gt;&gt; a = [[&quot;1&quot;,100],[&quot;2&quot;,200],[&quot;5&quot;,300],[&quot;1&quot;,10],[&quot;2&quot;,20],[&quot;5&quot;,40]]\r\n\r\nI need a list out of this list by substracting the integer values of same ID(the first element of every list) for example the result of stream should be \r\n\r\n    [[&quot;1&quot;,90],[&quot;2&quot;,80],[&quot;5&quot;,240]]\r\n\r\nfew things to be notes here\r\n1.there will always be only 2 occurrence of every ID(index 0 (string part)). \r\n2.the order should be maintained the id(index 0) found second should be substracted from the first.\r\n\r\nis there any way to achieve this using stream kindly let me know\r\n\r\n\r\n\r\n\r\nI tried this but it is not working \r\n\r\n    List&lt;List&lt;?&gt;&gt; b = a.parallelStream().map(each1 -&gt; a.parallelStream().forEach(each2-&gt;{each1.got(0).equals(each2.get(0))? true:false;})? Arrays.asList(each2.get(0),each1.get(1)-each1.get(1)):null).collect(Collectors.toList())\r\n\r\n\r\n","title":"Java 8 Stream - operations on List&lt;List&lt;?&gt;&gt; operations on duplicate ids of a list","body":"<p>I have been trying to figure out a way to do this Hopefuly you'll understand my problem.</p>\n<p>So I have a List of Lists of different data types</p>\n<pre><code>List&lt;List&lt;?&gt;&gt; a = [[&quot;1&quot;,100],[&quot;2&quot;,200],[&quot;5&quot;,300],[&quot;1&quot;,10],[&quot;2&quot;,20],[&quot;5&quot;,40]]\n</code></pre>\n<p>I need a list out of this list by substracting the integer values of same ID(the first element of every list) for example the result of stream should be</p>\n<pre><code>[[&quot;1&quot;,90],[&quot;2&quot;,80],[&quot;5&quot;,240]]\n</code></pre>\n<p>few things to be notes here\n1.there will always be only 2 occurrence of every ID(index 0 (string part)).\n2.the order should be maintained the id(index 0) found second should be substracted from the first.</p>\n<p>is there any way to achieve this using stream kindly let me know</p>\n<p>I tried this but it is not working</p>\n<pre><code>List&lt;List&lt;?&gt;&gt; b = a.parallelStream().map(each1 -&gt; a.parallelStream().forEach(each2-&gt;{each1.got(0).equals(each2.get(0))? true:false;})? Arrays.asList(each2.get(0),each1.get(1)-each1.get(1)):null).collect(Collectors.toList())\n</code></pre>\n"},{"tags":["java","java-native-interface","graalvm","java-native-library"],"comments":[{"owner":{"account_id":71739,"reputation":307143,"user_id":207421,"accept_rate":82,"display_name":"user207421"},"score":0,"creation_date":1699306612,"post_id":77430647,"comment_id":136512973,"body_markdown":"Your final sentence is a contradiction in terms.","body":"Your final sentence is a contradiction in terms."}],"answers":[{"tags":[],"owner":{"account_id":23020603,"reputation":341,"user_id":17141716,"display_name":"peterz"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1699338191,"creation_date":1699338191,"answer_id":77435951,"question_id":77430647,"body_markdown":"Try running `native-image` in any English (UK, US) locale, that should fix the error.\r\n\r\nNext, you might want to [file a bug](https://github.com/oracle/graal/issues) against GraalVM not working properly in Turkish locale. It seems an error on their side: [they are calling](https://github.com/oracle/graal/blob/ebc75fa3f205ee2d37b9fcc6a466687dcf307b58/substratevm/src/com.oracle.svm.hosted/src/com/oracle/svm/hosted/methodhandles/MethodHandleFeature.java#L315) `toUpperCase` with no locale argument, which uses system locate by default. This works in most cases, but produces surprising results in Turkish locale (and [javadoc](https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html#toUpperCase()) for this method even discusses this very case)","title":"GrallVM native-image build error &quot;java.lang.NoSuchMethodException: sun.invoke.util.ValueConversions.booleanTont(boolean)&quot;","body":"<p>Try running <code>native-image</code> in any English (UK, US) locale, that should fix the error.</p>\n<p>Next, you might want to <a href=\"https://github.com/oracle/graal/issues\" rel=\"nofollow noreferrer\">file a bug</a> against GraalVM not working properly in Turkish locale. It seems an error on their side: <a href=\"https://github.com/oracle/graal/blob/ebc75fa3f205ee2d37b9fcc6a466687dcf307b58/substratevm/src/com.oracle.svm.hosted/src/com/oracle/svm/hosted/methodhandles/MethodHandleFeature.java#L315\" rel=\"nofollow noreferrer\">they are calling</a> <code>toUpperCase</code> with no locale argument, which uses system locate by default. This works in most cases, but produces surprising results in Turkish locale (and <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html#toUpperCase()\" rel=\"nofollow noreferrer\">javadoc</a> for this method even discusses this very case)</p>\n"}],"owner":{"account_id":24192133,"reputation":13,"user_id":18151209,"display_name":"burhan-taskesen"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":54,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"accepted_answer_id":77435951,"answer_count":1,"score":-1,"last_activity_date":1699338191,"creation_date":1699269181,"question_id":77430647,"body_markdown":"I have a java application. This application calls the &quot;square&quot; method of the library shared with JNA and prints the result to the console. Things work fine when running the jar file, but when trying to compile the jar file with the &quot;native-image&quot; command, &quot;Fatal error: org.graalvm.compiler.debug.GraalError: com.oracle.svm.util.ReflectionUtil$ReflectionUtilError: java.lang.NoSuchMethodException&quot; I get an error like &quot;: sun.invoke.util.ValueConversions.booleanToInt(boolean)&quot;. When I first look, I see the letter &quot;I&quot; in the method name. I think the error might be here but I don&#39;t know how to fix it.\r\n\r\nNote: jdk version: graalvm-jdk-17.0.9\r\n\r\nhere are some images:\r\n\r\n\r\n[![folder structure](https://i.stack.imgur.com/q9Dew.png)](https://i.stack.imgur.com/q9Dew.png)\r\n\r\n[![pom.xml](https://i.stack.imgur.com/owNHo.png)](https://i.stack.imgur.com/owNHo.png)\r\n\r\n[![console output](https://i.stack.imgur.com/TnMKv.png)](https://i.stack.imgur.com/TnMKv.png)\r\n\r\n\r\nHow can I deal with this?\r\n\r\nsuccessful native image build but get an error","title":"GrallVM native-image build error &quot;java.lang.NoSuchMethodException: sun.invoke.util.ValueConversions.booleanTont(boolean)&quot;","body":"<p>I have a java application. This application calls the &quot;square&quot; method of the library shared with JNA and prints the result to the console. Things work fine when running the jar file, but when trying to compile the jar file with the &quot;native-image&quot; command, &quot;Fatal error: org.graalvm.compiler.debug.GraalError: com.oracle.svm.util.ReflectionUtil$ReflectionUtilError: java.lang.NoSuchMethodException&quot; I get an error like &quot;: sun.invoke.util.ValueConversions.booleanToInt(boolean)&quot;. When I first look, I see the letter &quot;I&quot; in the method name. I think the error might be here but I don't know how to fix it.</p>\n<p>Note: jdk version: graalvm-jdk-17.0.9</p>\n<p>here are some images:</p>\n<p><a href=\"https://i.stack.imgur.com/q9Dew.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/q9Dew.png\" alt=\"folder structure\" /></a></p>\n<p><a href=\"https://i.stack.imgur.com/owNHo.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/owNHo.png\" alt=\"pom.xml\" /></a></p>\n<p><a href=\"https://i.stack.imgur.com/TnMKv.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/TnMKv.png\" alt=\"console output\" /></a></p>\n<p>How can I deal with this?</p>\n<p>successful native image build but get an error</p>\n"},{"tags":["java","flutter","android-studio","dart","flutter-doctor"],"answers":[{"tags":[],"owner":{"account_id":3057491,"reputation":7841,"user_id":2590824,"accept_rate":80,"display_name":"sariDon"},"down_vote_count":0,"up_vote_count":720,"is_accepted":false,"score":720,"last_activity_date":1632832280,"creation_date":1601584274,"answer_id":64162776,"question_id":61993738,"body_markdown":"Installing **Android SDK Command-line tools** from **Android SDK Manager** did the job for me.\r\n\r\n1. Open **Tools** &gt; **SDK Manager**\r\n2. From the left choose, **Appearance &amp; Behavior** &gt; **System Settings** &gt; **Android SDK**\r\n3. Select **SDK Tools** from the top menu\r\n3. Check **Android SDK Command-line tools** and click &#39;apply&#39;.\r\n\r\nAlternative to step #1: WINDOWS: **File** &gt; **Settings** (Ctrl+Alt+S) / MAC : **Android Studio** &gt; **Preferences**\r\n\r\nThis fix works for *Windows*, *Linux* and *Mac OS X*.\r\n\r\n----------\r\n\r\n\r\n[![enter image description here][1]][1]\r\n\r\nIf you are facing a problem in spite of the above steps, you can try upgrading your system to JDK 8. Official documentation of upgrading to JDK 8 is available [here][2].\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/sGu63.jpg\r\n  [2]: https://docs.oracle.com/javase/8/docs/technotes/guides/install/install_overview.html#A1096936","title":"flutter doctor --android-licenses gives a java error","body":"<p>Installing <strong>Android SDK Command-line tools</strong> from <strong>Android SDK Manager</strong> did the job for me.</p>\n<ol>\n<li>Open <strong>Tools</strong> &gt; <strong>SDK Manager</strong></li>\n<li>From the left choose, <strong>Appearance &amp; Behavior</strong> &gt; <strong>System Settings</strong> &gt; <strong>Android SDK</strong></li>\n<li>Select <strong>SDK Tools</strong> from the top menu</li>\n<li>Check <strong>Android SDK Command-line tools</strong> and click 'apply'.</li>\n</ol>\n<p>Alternative to step #1: WINDOWS: <strong>File</strong> &gt; <strong>Settings</strong> (Ctrl+Alt+S) / MAC : <strong>Android Studio</strong> &gt; <strong>Preferences</strong></p>\n<p>This fix works for <em>Windows</em>, <em>Linux</em> and <em>Mac OS X</em>.</p>\n<hr />\n<p><a href=\"https://i.stack.imgur.com/sGu63.jpg\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/sGu63.jpg\" alt=\"enter image description here\" /></a></p>\n<p>If you are facing a problem in spite of the above steps, you can try upgrading your system to JDK 8. Official documentation of upgrading to JDK 8 is available <a href=\"https://docs.oracle.com/javase/8/docs/technotes/guides/install/install_overview.html#A1096936\" rel=\"noreferrer\">here</a>.</p>\n"},{"tags":[],"owner":{"display_name":"user12166478"},"down_vote_count":1,"up_vote_count":23,"is_accepted":false,"score":22,"last_activity_date":1601586097,"creation_date":1601585619,"answer_id":64163047,"question_id":61993738,"body_markdown":"It seems you are getting a JDK exception, it happens when you does not have *JAVA_HOME* setted on your system variables **OR** you have almost setted the JDK but in the wrong folder **OR** you are trying to run the SDK Manager (which allows you to accept the Android Licenses) with the wrong JDK.\r\n\r\n**In case of JDK 9 or higher:**\r\n\r\nActually, Android SDK Manager works only with Gradle compiled on version of JDK 8 **for Android development**, so, if you have a most-recent JDK version already setted on system variables, consider to downgrade it to the JDK version 8.\r\n\r\nThis version works fine for me: https://www.oracle.com/java/technologies/javase/javase-jdk8-downloads.html\r\n\r\n**In case of JDK 8 already installed**\r\n\r\nIf you manually extracted the JDK folder to a directory, maybe you have setted it &quot;wrong&quot;. I mean: You pointed the wrong way to the *bin* Java folder, but it still works.\r\nYou have to set *JAVA_HOME* as the root of JDK, example: \r\nIn the JDK zipped folder, you have to extract it and point the system variable in the unzipped folder, no directly in the bin directory, you have to point JAVA_HOME as a system variable and declare the bin folder as an executable.\r\n\r\nExamples: \r\n\r\n**Linux**\r\n\r\nIn your shell configuration file: \r\n\r\n    export JAVA_HOME=&quot;/home/user/jdk1.8.0_261&quot;\r\n    export PATH=&quot;$PATH:$JAVA_HOME/bin&quot;\r\n\r\n**Windows**\r\n\r\nIn your environment variables manager: \r\n\r\nSet a new SYSTEM VARIABLE named JAVA_HOME\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/rLoP4.png\r\n\r\nThen, edit the PATH variable and add a new register to it:\r\n\r\n    %JAVA_HOME%\\bin\r\n\r\nActually, I don&#39;t know really how to manage JDKs in MacOS, if that is you OS, sorry :(\r\n\r\nHope it helps!","title":"flutter doctor --android-licenses gives a java error","body":"<p>It seems you are getting a JDK exception, it happens when you does not have <em>JAVA_HOME</em> setted on your system variables <strong>OR</strong> you have almost setted the JDK but in the wrong folder <strong>OR</strong> you are trying to run the SDK Manager (which allows you to accept the Android Licenses) with the wrong JDK.</p>\n<p><strong>In case of JDK 9 or higher:</strong></p>\n<p>Actually, Android SDK Manager works only with Gradle compiled on version of JDK 8 <strong>for Android development</strong>, so, if you have a most-recent JDK version already setted on system variables, consider to downgrade it to the JDK version 8.</p>\n<p>This version works fine for me: <a href=\"https://www.oracle.com/java/technologies/javase/javase-jdk8-downloads.html\" rel=\"noreferrer\">https://www.oracle.com/java/technologies/javase/javase-jdk8-downloads.html</a></p>\n<p><strong>In case of JDK 8 already installed</strong></p>\n<p>If you manually extracted the JDK folder to a directory, maybe you have setted it &quot;wrong&quot;. I mean: You pointed the wrong way to the <em>bin</em> Java folder, but it still works.\nYou have to set <em>JAVA_HOME</em> as the root of JDK, example:\nIn the JDK zipped folder, you have to extract it and point the system variable in the unzipped folder, no directly in the bin directory, you have to point JAVA_HOME as a system variable and declare the bin folder as an executable.</p>\n<p>Examples:</p>\n<p><strong>Linux</strong></p>\n<p>In your shell configuration file:</p>\n<pre><code>export JAVA_HOME=&quot;/home/user/jdk1.8.0_261&quot;\nexport PATH=&quot;$PATH:$JAVA_HOME/bin&quot;\n</code></pre>\n<p><strong>Windows</strong></p>\n<p>In your environment variables manager:</p>\n<p>Set a new SYSTEM VARIABLE named JAVA_HOME</p>\n<p><a href=\"https://i.stack.imgur.com/rLoP4.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/rLoP4.png\" alt=\"enter image description here\" /></a></p>\n<p>Then, edit the PATH variable and add a new register to it:</p>\n<pre><code>%JAVA_HOME%\\bin\n</code></pre>\n<p>Actually, I don't know really how to manage JDKs in MacOS, if that is you OS, sorry :(</p>\n<p>Hope it helps!</p>\n"},{"tags":[],"owner":{"account_id":14178334,"reputation":3581,"user_id":10242854,"display_name":"Guy Luz"},"down_vote_count":1,"up_vote_count":6,"is_accepted":false,"score":5,"last_activity_date":1605377535,"creation_date":1605377535,"answer_id":64837083,"question_id":61993738,"body_markdown":"**On Linux**\r\n\r\n`Android SDK` only works with `JDK 8` so uninstall your current `JDK` version.\r\n\r\nPast the command and **press tab** for autocomplete, remove all the things that it shows you that starts with `openjdk-`\r\n\r\n    sudo apt remove openjdk-\r\n\r\nand now install `JDK 8`\r\n\r\n    sudo apt install openjdk-8-jdk\r\n\r\n","title":"flutter doctor --android-licenses gives a java error","body":"<p><strong>On Linux</strong></p>\n<p><code>Android SDK</code> only works with <code>JDK 8</code> so uninstall your current <code>JDK</code> version.</p>\n<p>Past the command and <strong>press tab</strong> for autocomplete, remove all the things that it shows you that starts with <code>openjdk-</code></p>\n<pre><code>sudo apt remove openjdk-\n</code></pre>\n<p>and now install <code>JDK 8</code></p>\n<pre><code>sudo apt install openjdk-8-jdk\n</code></pre>\n"},{"tags":[],"owner":{"account_id":17900011,"reputation":29,"user_id":13004459,"display_name":"Blaaablaaaaaaify"},"down_vote_count":1,"up_vote_count":3,"is_accepted":false,"score":2,"last_activity_date":1608479756,"creation_date":1608475813,"answer_id":65381157,"question_id":61993738,"body_markdown":"\r\n\r\nMy solution was:\r\nI had Android SDK Build-Tools, Android Emulator and Android SDK Platform-Tools installed. Also I had `JAVA_HOME` variable in environments variables.\r\n\r\nSo I decided to uninstall Android SDK Build-Tools, Android Emulator and Android SDK Platform-Tools and install them again. Moreover, I deleted `JAVA_HOME`  variable. And after these operations I run `flutter doctor --android-licenses` in terminal. And somehow it worked out. \r\n\r\n","title":"flutter doctor --android-licenses gives a java error","body":"<p>My solution was:\nI had Android SDK Build-Tools, Android Emulator and Android SDK Platform-Tools installed. Also I had <code>JAVA_HOME</code> variable in environments variables.</p>\n<p>So I decided to uninstall Android SDK Build-Tools, Android Emulator and Android SDK Platform-Tools and install them again. Moreover, I deleted <code>JAVA_HOME</code>  variable. And after these operations I run <code>flutter doctor --android-licenses</code> in terminal. And somehow it worked out.</p>\n"},{"tags":[],"owner":{"account_id":16433747,"reputation":604,"user_id":11871867,"display_name":"Abdulbasit"},"down_vote_count":1,"up_vote_count":4,"is_accepted":false,"score":3,"last_activity_date":1614231847,"creation_date":1614231847,"answer_id":66363044,"question_id":61993738,"body_markdown":"first of all you need to know that flutter works on jdk 8, so if you have other versions installed you need to purge them so as to completely remove other versions\r\n\r\n**NOTE: this is according to my case Ubuntu 20.04, THIS IS ACCORDING TO MY SITUATION IT IS NOT GUARANTEED TO WORK FOR YOU**\r\n\r\nif you have jdk 11, to uninstall use one of the two commands depending on the one that you had installed or you can run both of them if you do not know which one of them is installed on your machine. \r\n\r\n    sudo apt purge openjdk-11-jre-headless\r\n\r\n    sudo apt purge openjdk-11-jre\r\n\r\nif it is any other version replace 11 with that number.\r\nif you use the default jdk then to uninstall use the following command\r\n\r\n    sudo apt purge default-jre\r\n\r\nto make sure we remove everything related with java run this command\r\n\r\n    sudo apt auto remove\r\n\r\n**NOTE: you can run all the above commands just to be more sure you fully remove everything related with java**\r\n\r\nto verify that we have removed everything run \r\n\r\n    java -v\r\nif you see the error below or java version then java has not been uninstalled\r\n\r\n    Unrecognized option: --version\r\n    Error: Could not create the Java Virtual Machine. \r\n    Error: A fatal exception has occurred. Program will exit.\r\nbut if you get response that java was not found and there are java installation suggestion it means java has been uninstalled\r\n\r\nnow we need to install jdk 8 run this command\r\n\r\n    sudo apt install openjdk-8-jre\r\n\r\nif everything goes well reboot your machine and run `flutter doctor` and follow the instructions to accept the licenses \r\n\r\nRegards, hope this post becomes helpful to you","title":"flutter doctor --android-licenses gives a java error","body":"<p>first of all you need to know that flutter works on jdk 8, so if you have other versions installed you need to purge them so as to completely remove other versions</p>\n<p><strong>NOTE: this is according to my case Ubuntu 20.04, THIS IS ACCORDING TO MY SITUATION IT IS NOT GUARANTEED TO WORK FOR YOU</strong></p>\n<p>if you have jdk 11, to uninstall use one of the two commands depending on the one that you had installed or you can run both of them if you do not know which one of them is installed on your machine.</p>\n<pre><code>sudo apt purge openjdk-11-jre-headless\n\nsudo apt purge openjdk-11-jre\n</code></pre>\n<p>if it is any other version replace 11 with that number.\nif you use the default jdk then to uninstall use the following command</p>\n<pre><code>sudo apt purge default-jre\n</code></pre>\n<p>to make sure we remove everything related with java run this command</p>\n<pre><code>sudo apt auto remove\n</code></pre>\n<p><strong>NOTE: you can run all the above commands just to be more sure you fully remove everything related with java</strong></p>\n<p>to verify that we have removed everything run</p>\n<pre><code>java -v\n</code></pre>\n<p>if you see the error below or java version then java has not been uninstalled</p>\n<pre><code>Unrecognized option: --version\nError: Could not create the Java Virtual Machine. \nError: A fatal exception has occurred. Program will exit.\n</code></pre>\n<p>but if you get response that java was not found and there are java installation suggestion it means java has been uninstalled</p>\n<p>now we need to install jdk 8 run this command</p>\n<pre><code>sudo apt install openjdk-8-jre\n</code></pre>\n<p>if everything goes well reboot your machine and run <code>flutter doctor</code> and follow the instructions to accept the licenses</p>\n<p>Regards, hope this post becomes helpful to you</p>\n"},{"tags":[],"owner":{"account_id":2012488,"reputation":581,"user_id":1800622,"display_name":"Gon&#231;alo"},"down_vote_count":2,"up_vote_count":3,"is_accepted":false,"score":1,"last_activity_date":1615159507,"creation_date":1615159507,"answer_id":66522570,"question_id":61993738,"body_markdown":"The above solutions totally work, but there&#39;s a solution that I see fewer times than I would expect: \r\nsdkman =&gt; https://sdkman.io/\r\n\r\nwith such a tool installed, changing java version is quick as ( Adopt java 8 as example):\r\n\r\n     sdk install java 8.0.282.hs-adpt\r\n     sdk use java 8.0.282.hs-adpt\r\n\r\n","title":"flutter doctor --android-licenses gives a java error","body":"<p>The above solutions totally work, but there's a solution that I see fewer times than I would expect:\nsdkman =&gt; <a href=\"https://sdkman.io/\" rel=\"nofollow noreferrer\">https://sdkman.io/</a></p>\n<p>with such a tool installed, changing java version is quick as ( Adopt java 8 as example):</p>\n<pre><code> sdk install java 8.0.282.hs-adpt\n sdk use java 8.0.282.hs-adpt\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3138467,"reputation":1037,"user_id":2654459,"display_name":"ggariepy"},"down_vote_count":1,"up_vote_count":4,"is_accepted":false,"score":3,"last_activity_date":1616443678,"creation_date":1616443678,"answer_id":66753162,"question_id":61993738,"body_markdown":"For me, on Windows 10, the answer was simply to remove the JAVA_HOME environment variable.\r\n\r\nThis probably isn&#39;t a good idea if you&#39;re a Java developer, or you rely on some Java software to do your work, but if you&#39;re a dev that doesn&#39;t work in the Java space and you&#39;re just getting started with Flutter like I am, then go into the system environment variables and kill that one.  `flutter doctor --android-licenses` worked like it is supposed to after I did that.","title":"flutter doctor --android-licenses gives a java error","body":"<p>For me, on Windows 10, the answer was simply to remove the JAVA_HOME environment variable.</p>\n<p>This probably isn't a good idea if you're a Java developer, or you rely on some Java software to do your work, but if you're a dev that doesn't work in the Java space and you're just getting started with Flutter like I am, then go into the system environment variables and kill that one.  <code>flutter doctor --android-licenses</code> worked like it is supposed to after I did that.</p>\n"},{"tags":[],"owner":{"account_id":18297255,"reputation":719,"user_id":13322920,"display_name":"Belema"},"down_vote_count":1,"up_vote_count":64,"is_accepted":false,"score":63,"last_activity_date":1620790927,"creation_date":1620790927,"answer_id":67497057,"question_id":61993738,"body_markdown":"i had the same problem, solved it by installing the coomand-line tools from android studio\r\n\r\nclick on file, settings then on the search bar type sdk and click in android sdk\r\n[![Android Sdk][1]][1]\r\n\r\nThen **click on** sdk tools, check the android command-line tools box, the click on apply allow to download. then try running `flutter doctor --android-licenses` again on your cmd you will be prompted to accept licenses\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/Bdmw7.png","title":"flutter doctor --android-licenses gives a java error","body":"<p>i had the same problem, solved it by installing the coomand-line tools from android studio</p>\n<p>click on file, settings then on the search bar type sdk and click in android sdk\n<a href=\"https://i.stack.imgur.com/Bdmw7.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/Bdmw7.png\" alt=\"Android Sdk\" /></a></p>\n<p>Then <strong>click on</strong> sdk tools, check the android command-line tools box, the click on apply allow to download. then try running <code>flutter doctor --android-licenses</code> again on your cmd you will be prompted to accept licenses</p>\n"},{"tags":[],"owner":{"account_id":14877095,"reputation":3715,"user_id":10756025,"display_name":"Milo Chen"},"down_vote_count":0,"up_vote_count":165,"is_accepted":false,"score":165,"last_activity_date":1633099765,"creation_date":1623219494,"answer_id":67898576,"question_id":61993738,"body_markdown":"I&#39;m a Mac user and I solve this issue.   \r\n\r\nThis answer also helps Windows users and Linux users solve the issue from the user&#39;s feedback.  \r\n\r\nAt the first, this is what I met for the issue   \r\n**$ flutter doctor -v** \r\n[![enter image description here][1]][1]\r\n\r\nAnd the following command is not work for my situation.  \r\n**$ flutter doctor --android-licenses** \r\n[![enter image description here][2]][2]\r\n\r\nThe way to solve this is to install   \r\n**Android SDK Command-line Tools**. And how?  \r\nYou just need to do it by the following two steps. \r\n\r\n# Install: Android SDK Command-line Tools \r\n\r\n**Step 1. Open SDK Manager**   \r\nTop Menu -&gt; Tools -&gt; SDK Manager \r\n[![enter image description here][3]][3]\r\n\r\n**Step 2. Install command-line tools**  \r\n1. Unfold **Appearance &amp; Behavior**   \r\n2. Unfold **System Settings**   \r\n3. Click **Android SDK**   \r\n4. Click tab of **SDK Tools**  \r\n5. Check **Android SDK Command-line Tools (latest)**  \r\n6. Click **Apply** button.\r\n[![enter image description here][4]][4]\r\nThen click OK button to finish installation.  \r\n\r\n## Keep going to sign android licenses. \r\nAfter Android Studio finishing install, you can do the following.    \r\n**$ flutter doctor --android-licenses**  \r\n[![enter image description here][6]][6]\r\nAfter saying yes many times, all android licenses have been signed.   \r\n \r\nCheck by flutter doctor again.  \r\n  \r\n**$ flutter doctor -v**  \r\n[![enter image description here][7]][7]\r\n\r\nYou can see that \r\n**All Android licenses accepted.**  \r\n\r\nCongratulations, you have completed this task! \r\n\r\n\r\n  [1]: https://i.stack.imgur.com/gS3v8.png\r\n  [2]: https://i.stack.imgur.com/CbsxA.png\r\n  [3]: https://i.stack.imgur.com/aGOnd.png\r\n  [4]: https://i.stack.imgur.com/6Q0Bn.png\r\n  [5]: https://i.stack.imgur.com/MceVE.png\r\n  [6]: https://i.stack.imgur.com/PkcG4.png\r\n  [7]: https://i.stack.imgur.com/lnJAE.png","title":"flutter doctor --android-licenses gives a java error","body":"<p>I'm a Mac user and I solve this issue.</p>\n<p>This answer also helps Windows users and Linux users solve the issue from the user's feedback.</p>\n<p>At the first, this is what I met for the issue<br />\n<strong>$ flutter doctor -v</strong>\n<a href=\"https://i.stack.imgur.com/gS3v8.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/gS3v8.png\" alt=\"enter image description here\" /></a></p>\n<p>And the following command is not work for my situation.<br />\n<strong>$ flutter doctor --android-licenses</strong>\n<a href=\"https://i.stack.imgur.com/CbsxA.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/CbsxA.png\" alt=\"enter image description here\" /></a></p>\n<p>The way to solve this is to install<br />\n<strong>Android SDK Command-line Tools</strong>. And how?<br />\nYou just need to do it by the following two steps.</p>\n<h1>Install: Android SDK Command-line Tools</h1>\n<p><strong>Step 1. Open SDK Manager</strong><br />\nTop Menu -&gt; Tools -&gt; SDK Manager\n<a href=\"https://i.stack.imgur.com/aGOnd.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/aGOnd.png\" alt=\"enter image description here\" /></a></p>\n<p><strong>Step 2. Install command-line tools</strong></p>\n<ol>\n<li>Unfold <strong>Appearance &amp; Behavior</strong></li>\n<li>Unfold <strong>System Settings</strong></li>\n<li>Click <strong>Android SDK</strong></li>\n<li>Click tab of <strong>SDK Tools</strong></li>\n<li>Check <strong>Android SDK Command-line Tools (latest)</strong></li>\n<li>Click <strong>Apply</strong> button.\n<a href=\"https://i.stack.imgur.com/6Q0Bn.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/6Q0Bn.png\" alt=\"enter image description here\" /></a>\nThen click OK button to finish installation.</li>\n</ol>\n<h2>Keep going to sign android licenses.</h2>\n<p>After Android Studio finishing install, you can do the following.<br />\n<strong>$ flutter doctor --android-licenses</strong><br />\n<a href=\"https://i.stack.imgur.com/PkcG4.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/PkcG4.png\" alt=\"enter image description here\" /></a>\nAfter saying yes many times, all android licenses have been signed.</p>\n<p>Check by flutter doctor again.</p>\n<p><strong>$ flutter doctor -v</strong><br />\n<a href=\"https://i.stack.imgur.com/lnJAE.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/lnJAE.png\" alt=\"enter image description here\" /></a></p>\n<p>You can see that\n<strong>All Android licenses accepted.</strong></p>\n<p>Congratulations, you have completed this task!</p>\n"},{"tags":[],"owner":{"account_id":5514720,"reputation":927,"user_id":7240577,"display_name":"Neil.Ling"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1676516539,"creation_date":1676516539,"answer_id":75467427,"question_id":61993738,"body_markdown":"Just in case you have multiple versions of Java installed on your OS, and the active Java version is higher than the expected one, you may end up with `UnsupportedClassVersionError` exception.\r\n\r\nIn my MacOS case, the active Java version is Java 17.\r\n\r\n```\r\n~ java -version\r\nopenjdk version &quot;17.0.5&quot; 2022-10-18 LTS\r\nOpenJDK Runtime Environment Zulu17.38+21-CA (build 17.0.5+8-LTS)\r\nOpenJDK 64-Bit Server VM Zulu17.38+21-CA (build 17.0.5+8-LTS, mixed mode, sharing)\r\n```\r\n\r\nand the [expected Java version](https://docs.flutter.dev/get-started/install/macos#agree-to-android-licenses) is Java 11 as of now.\r\n\r\nso my `flutter doctor --android-licenses` command ended up with following error:\r\n\r\n```\r\nflutter doctor --android-licenses\r\nError: A JNI error has occurred, please check your installation and try again\r\n\r\nException in thread &quot;main&quot; java.lang.UnsupportedClassVersionError: \r\ncom/android/prefs/AndroidLocationsProvider has been compiled by a \r\nmore recent version of the Java Runtime (class file version 55.0), \r\nthis version of the Java Runtime only recognizes class file \r\nversions up to 52.0\r\n\tat java.lang.ClassLoader.defineClass1(Native Method)\r\n\tat java.lang.ClassLoader.defineClass(ClassLoader.java:757)\r\n\tat java.security.SecureClassLoader.defineClass(SecureClassLoader.java:142)\r\n\tat java.net.URLClassLoader.defineClass(URLClassLoader.java:468)\r\n\tat java.net.URLClassLoader.access$100(URLClassLoader.java:74)\r\n\tat java.net.URLClassLoader$1.run(URLClassLoader.java:369)\r\n\tat java.net.URLClassLoader$1.run(URLClassLoader.java:363)\r\n\tat java.security.AccessController.doPrivileged(Native Method)\r\n\tat java.net.URLClassLoader.findClass(URLClassLoader.java:362)\r\n\tat java.lang.ClassLoader.loadClass(ClassLoader.java:419)\r\n\tat sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:352)\r\n\tat java.lang.ClassLoader.loadClass(ClassLoader.java:352)\r\n\tat java.lang.Class.getDeclaredMethods0(Native Method)\r\n\tat java.lang.Class.privateGetDeclaredMethods(Class.java:2701)\r\n\tat java.lang.Class.privateGetMethodRecursive(Class.java:3048)\r\n\tat java.lang.Class.getMethod0(Class.java:3018)\r\n\tat java.lang.Class.getMethod(Class.java:1784)\r\n\tat sun.launcher.LauncherHelper.validateMainClass(LauncherHelper.java:544)\r\n\tat sun.launcher.LauncherHelper.checkAndLoadMain(LauncherHelper.java:526)\r\n```\r\nObviously, Java 11 (class file version 52.0) rather than Java 17(class file version 55.0) is required.\r\n\r\nSolution is exporting `JAVA_HOME` (preferred in a command line windown) and run `flutter doctor --android-licenses` again, then it should work.\r\n\r\n```\r\nexport JAVA_HOME=/Library/Java/JavaVirtualMachines/zulu-11.jdk/Contents/Home/\r\nflutter doctor --android-licenses\r\n```\r\n\r\nBy the way, installed Javas can be detected by Android Studio.\r\n[![enter image description here][1]][1] \r\n\r\n\r\n  [1]: https://i.stack.imgur.com/6EkA7.png\r\n\r\n(Pasted my previous comment) Again, I don&#39;t think it&#39;s a good idea to remove and then re-install a new specific Java version just for the purpose of having flutter doctor --android-licenses work. Actually, it&#39;s more appropriate to switch to another Java version if you have multiple versions of Java installed, by exporting the desired one. for example:export JAVA_HOME=/Library/Java/JavaVirtualMachines/zulu-11.jdk/Contents/Home/. Internally, flutter doctor will check JAVA_HOME for the target Java version. The benefit is obvious, the one-time export command in a command line window won&#39;t affect anything else at all.","title":"flutter doctor --android-licenses gives a java error","body":"<p>Just in case you have multiple versions of Java installed on your OS, and the active Java version is higher than the expected one, you may end up with <code>UnsupportedClassVersionError</code> exception.</p>\n<p>In my MacOS case, the active Java version is Java 17.</p>\n<pre><code>~ java -version\nopenjdk version &quot;17.0.5&quot; 2022-10-18 LTS\nOpenJDK Runtime Environment Zulu17.38+21-CA (build 17.0.5+8-LTS)\nOpenJDK 64-Bit Server VM Zulu17.38+21-CA (build 17.0.5+8-LTS, mixed mode, sharing)\n</code></pre>\n<p>and the <a href=\"https://docs.flutter.dev/get-started/install/macos#agree-to-android-licenses\" rel=\"nofollow noreferrer\">expected Java version</a> is Java 11 as of now.</p>\n<p>so my <code>flutter doctor --android-licenses</code> command ended up with following error:</p>\n<pre><code>flutter doctor --android-licenses\nError: A JNI error has occurred, please check your installation and try again\n\nException in thread &quot;main&quot; java.lang.UnsupportedClassVersionError: \ncom/android/prefs/AndroidLocationsProvider has been compiled by a \nmore recent version of the Java Runtime (class file version 55.0), \nthis version of the Java Runtime only recognizes class file \nversions up to 52.0\n    at java.lang.ClassLoader.defineClass1(Native Method)\n    at java.lang.ClassLoader.defineClass(ClassLoader.java:757)\n    at java.security.SecureClassLoader.defineClass(SecureClassLoader.java:142)\n    at java.net.URLClassLoader.defineClass(URLClassLoader.java:468)\n    at java.net.URLClassLoader.access$100(URLClassLoader.java:74)\n    at java.net.URLClassLoader$1.run(URLClassLoader.java:369)\n    at java.net.URLClassLoader$1.run(URLClassLoader.java:363)\n    at java.security.AccessController.doPrivileged(Native Method)\n    at java.net.URLClassLoader.findClass(URLClassLoader.java:362)\n    at java.lang.ClassLoader.loadClass(ClassLoader.java:419)\n    at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:352)\n    at java.lang.ClassLoader.loadClass(ClassLoader.java:352)\n    at java.lang.Class.getDeclaredMethods0(Native Method)\n    at java.lang.Class.privateGetDeclaredMethods(Class.java:2701)\n    at java.lang.Class.privateGetMethodRecursive(Class.java:3048)\n    at java.lang.Class.getMethod0(Class.java:3018)\n    at java.lang.Class.getMethod(Class.java:1784)\n    at sun.launcher.LauncherHelper.validateMainClass(LauncherHelper.java:544)\n    at sun.launcher.LauncherHelper.checkAndLoadMain(LauncherHelper.java:526)\n</code></pre>\n<p>Obviously, Java 11 (class file version 52.0) rather than Java 17(class file version 55.0) is required.</p>\n<p>Solution is exporting <code>JAVA_HOME</code> (preferred in a command line windown) and run <code>flutter doctor --android-licenses</code> again, then it should work.</p>\n<pre><code>export JAVA_HOME=/Library/Java/JavaVirtualMachines/zulu-11.jdk/Contents/Home/\nflutter doctor --android-licenses\n</code></pre>\n<p>By the way, installed Javas can be detected by Android Studio.\n<a href=\"https://i.stack.imgur.com/6EkA7.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/6EkA7.png\" alt=\"enter image description here\" /></a></p>\n<p>(Pasted my previous comment) Again, I don't think it's a good idea to remove and then re-install a new specific Java version just for the purpose of having flutter doctor --android-licenses work. Actually, it's more appropriate to switch to another Java version if you have multiple versions of Java installed, by exporting the desired one. for example:export JAVA_HOME=/Library/Java/JavaVirtualMachines/zulu-11.jdk/Contents/Home/. Internally, flutter doctor will check JAVA_HOME for the target Java version. The benefit is obvious, the one-time export command in a command line window won't affect anything else at all.</p>\n"},{"tags":[],"owner":{"account_id":8527393,"reputation":369,"user_id":6392398,"display_name":"Ioannis Brant-Ioannidis"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1676745852,"creation_date":1676717961,"answer_id":75492862,"question_id":61993738,"body_markdown":"**Android Studio Electric Eel and Flutter 3.7.1**  \r\nIf you&#39;re facing issues after upgrading to `Android Studio Electric Eel` then these additional steps might help you. Usual errors after upgrading to the aforementioned Android Studio version are:\r\n\r\n - `unable to locate android sdk`\r\n - `AndroidLocationsProvider has been compiled by a more recent version of the Java Runtime (class file version 55.0), this version of the Java Runtime only recognizes class file versions up to 52.0`\r\n\r\n - Follow the procedure described [here][1] for installing *Android SDK Command-line tools* and *Android SDK Manager*.\r\n - Download Java JDK 19 or JDK 17 from [here][2].\r\n - Based on the error you&#39;re getting e.g. `file versions up to XY.0` you might need to install a different Java version. You can find more details on which Java version to install on [Oracle - Class file format major versions][3] and a related discussion on [StackOverflow - List of Java class file format major versions][4].\r\n - Install the JDK on `C:\\Program Files\\Java\\java-sdk-[version]`.\r\n - Update your `JAVA_HOME` to point to the JDK. This can be achieved though the `Edit System Environment Variables` -&gt; `Environment Variables`. You can find more on how to set the `JAVA_HOME` variable on [Oracle - How to set the JAVA_HOME variable][5].\r\n\r\nAfter these steps are followed, open a fresh command line and run `flutter doctor --android-licenses`. The error should be now resolved.\r\n\r\n \r\n\r\n\r\n  [1]: https://stackoverflow.com/a/64162776/6392398\r\n  [2]: https://www.oracle.com/ae/java/technologies/downloads/\r\n  [3]: https://docs.oracle.com/javase/specs/jvms/se19/html/jvms-4.html#jvms-4.1-200-B.2\r\n  [4]: https://stackoverflow.com/questions/9170832/list-of-java-class-file-format-major-version-numbers\r\n  [5]: https://docs.oracle.com/cd/E19182-01/821-0917/inst_jdk_javahome_t/index.html","title":"flutter doctor --android-licenses gives a java error","body":"<p><strong>Android Studio Electric Eel and Flutter 3.7.1</strong><br />\nIf you're facing issues after upgrading to <code>Android Studio Electric Eel</code> then these additional steps might help you. Usual errors after upgrading to the aforementioned Android Studio version are:</p>\n<ul>\n<li><p><code>unable to locate android sdk</code></p>\n</li>\n<li><p><code>AndroidLocationsProvider has been compiled by a more recent version of the Java Runtime (class file version 55.0), this version of the Java Runtime only recognizes class file versions up to 52.0</code></p>\n</li>\n<li><p>Follow the procedure described <a href=\"https://stackoverflow.com/a/64162776/6392398\">here</a> for installing <em>Android SDK Command-line tools</em> and <em>Android SDK Manager</em>.</p>\n</li>\n<li><p>Download Java JDK 19 or JDK 17 from <a href=\"https://www.oracle.com/ae/java/technologies/downloads/\" rel=\"nofollow noreferrer\">here</a>.</p>\n</li>\n<li><p>Based on the error you're getting e.g. <code>file versions up to XY.0</code> you might need to install a different Java version. You can find more details on which Java version to install on <a href=\"https://docs.oracle.com/javase/specs/jvms/se19/html/jvms-4.html#jvms-4.1-200-B.2\" rel=\"nofollow noreferrer\">Oracle - Class file format major versions</a> and a related discussion on <a href=\"https://stackoverflow.com/questions/9170832/list-of-java-class-file-format-major-version-numbers\">StackOverflow - List of Java class file format major versions</a>.</p>\n</li>\n<li><p>Install the JDK on <code>C:\\Program Files\\Java\\java-sdk-[version]</code>.</p>\n</li>\n<li><p>Update your <code>JAVA_HOME</code> to point to the JDK. This can be achieved though the <code>Edit System Environment Variables</code> -&gt; <code>Environment Variables</code>. You can find more on how to set the <code>JAVA_HOME</code> variable on <a href=\"https://docs.oracle.com/cd/E19182-01/821-0917/inst_jdk_javahome_t/index.html\" rel=\"nofollow noreferrer\">Oracle - How to set the JAVA_HOME variable</a>.</p>\n</li>\n</ul>\n<p>After these steps are followed, open a fresh command line and run <code>flutter doctor --android-licenses</code>. The error should be now resolved.</p>\n"},{"tags":[],"owner":{"account_id":9250310,"reputation":171,"user_id":6871028,"display_name":"Albert Gevorgyan"},"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1691361466,"creation_date":1691361466,"answer_id":76848006,"question_id":61993738,"body_markdown":"All I had to do was to unset JAVA_HOME. Then it worked.","title":"flutter doctor --android-licenses gives a java error","body":"<p>All I had to do was to unset JAVA_HOME. Then it worked.</p>\n"},{"tags":[],"owner":{"account_id":2830633,"reputation":395,"user_id":2432289,"display_name":"mirsahib"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1694438789,"creation_date":1694438789,"answer_id":77082036,"question_id":61993738,"body_markdown":"I have followed everything that is mentioned in @Milo Chen answer but could make it work for my linux system (Ubuntu-22.0 lts,java 17 openjdk,javac 11) so here is my workaround to solve the issue \r\n\r\n - I download the `Android Sdk Command-line tools version 8` (you need to check `Show Package Details ` checkbox to get that version in Android studio)\r\n - go to your the folder where android studio store its sdk file, for me it&#39;s `/home/mirsahib/Android/Sdk/cmdline-tools`\r\n - rename the folder `8.0` to `latest`","title":"flutter doctor --android-licenses gives a java error","body":"<p>I have followed everything that is mentioned in @Milo Chen answer but could make it work for my linux system (Ubuntu-22.0 lts,java 17 openjdk,javac 11) so here is my workaround to solve the issue</p>\n<ul>\n<li>I download the <code>Android Sdk Command-line tools version 8</code> (you need to check <code>Show Package Details </code> checkbox to get that version in Android studio)</li>\n<li>go to your the folder where android studio store its sdk file, for me it's <code>/home/mirsahib/Android/Sdk/cmdline-tools</code></li>\n<li>rename the folder <code>8.0</code> to <code>latest</code></li>\n</ul>\n"},{"tags":[],"owner":{"account_id":23316766,"reputation":394,"user_id":17395277,"display_name":"Karma"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695407320,"creation_date":1695407320,"answer_id":77159943,"question_id":61993738,"body_markdown":" - Uncheck Android SDK command-line Tools (latest)\r\n - Check Android SDK command-line Tools 8.0\r\n - Click Apply\r\n - In Windows, go to\r\n   C:\\Users\\USERNAME\\AppData\\Local\\Android\\Sdk\\cmdline-tools and\r\n   rename the 8.0 folder to latest\r\n\r\nRun `Flutter doctor` again.","title":"flutter doctor --android-licenses gives a java error","body":"<ul>\n<li>Uncheck Android SDK command-line Tools (latest)</li>\n<li>Check Android SDK command-line Tools 8.0</li>\n<li>Click Apply</li>\n<li>In Windows, go to\nC:\\Users\\USERNAME\\AppData\\Local\\Android\\Sdk\\cmdline-tools and\nrename the 8.0 folder to latest</li>\n</ul>\n<p>Run <code>Flutter doctor</code> again.</p>\n"},{"tags":[],"owner":{"account_id":1351186,"reputation":12038,"user_id":1290746,"accept_rate":69,"display_name":"kris"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1699338044,"creation_date":1699338044,"answer_id":77435945,"question_id":61993738,"body_markdown":"I found I needed to **downgrade** my Android SDK Command Line Tools\r\n\r\nWhen I was on the latest then `flutter doctor --android-licenses` gave the following: \r\n\r\n```\r\n$ flutter doctor --android-licenses\r\nError: LinkageError occurred while loading main class com.android.sdklib.tool.sdkmanager.SdkManagerCli\r\n\tjava.lang.UnsupportedClassVersionError: com/android/sdklib/tool/sdkmanager/SdkManagerCli has been compiled by a more recent version of the Java Runtime (class file version 61.0), this version of the Java Runtime only recognizes class file versions up to 55.0\r\nAndroid sdkmanager tool was found, but failed to run (/Users/user/Library/Android/sdk/cmdline-tools/latest/bin/sdkmanager): &quot;exited code 1&quot;.\r\nTry re-installing or updating your Android SDK,\r\nvisit https://flutter.dev/docs/get-started/install/macos#android-setup for detailed instructions.\r\n```\r\n\r\nThen I removed **Android SDK Comand-lin Tools (latest)** (11) and added version  10.\r\n\r\n[![enter image description here][1]][1]\r\n\r\nOnly then could I accept the licenses:\r\n\r\n```\r\n$ flutter doctor --android-licenses\r\nWarning: Observed package id &#39;ndk-bundle&#39; in inconsistent location &#39;/Users/user/Library/Android/sdk/ndk-bundle.backup.version_17c&#39; (Expected &#39;/Users/user/Library/Android/sdk/ndk-bundle&#39;)\r\nWarning: Observed package id &#39;ndk-bundle&#39; in inconsistent location &#39;/Users/user/Library/Android/sdk/ndk-bundle.backup.version_17c&#39; (Expected &#39;/Users/user/Library/Android/sdk/ndk-bundle&#39;)\r\n[=======================================] 100% Computing updates...             \r\nAll SDK package licenses accepted.\r\n``` \r\n\r\n\r\n  [1]: https://i.stack.imgur.com/4QoRO.png","title":"flutter doctor --android-licenses gives a java error","body":"<p>I found I needed to <strong>downgrade</strong> my Android SDK Command Line Tools</p>\n<p>When I was on the latest then <code>flutter doctor --android-licenses</code> gave the following:</p>\n<pre><code>$ flutter doctor --android-licenses\nError: LinkageError occurred while loading main class com.android.sdklib.tool.sdkmanager.SdkManagerCli\n    java.lang.UnsupportedClassVersionError: com/android/sdklib/tool/sdkmanager/SdkManagerCli has been compiled by a more recent version of the Java Runtime (class file version 61.0), this version of the Java Runtime only recognizes class file versions up to 55.0\nAndroid sdkmanager tool was found, but failed to run (/Users/user/Library/Android/sdk/cmdline-tools/latest/bin/sdkmanager): &quot;exited code 1&quot;.\nTry re-installing or updating your Android SDK,\nvisit https://flutter.dev/docs/get-started/install/macos#android-setup for detailed instructions.\n</code></pre>\n<p>Then I removed <strong>Android SDK Comand-lin Tools (latest)</strong> (11) and added version  10.</p>\n<p><a href=\"https://i.stack.imgur.com/4QoRO.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/4QoRO.png\" alt=\"enter image description here\" /></a></p>\n<p>Only then could I accept the licenses:</p>\n<pre><code>$ flutter doctor --android-licenses\nWarning: Observed package id 'ndk-bundle' in inconsistent location '/Users/user/Library/Android/sdk/ndk-bundle.backup.version_17c' (Expected '/Users/user/Library/Android/sdk/ndk-bundle')\nWarning: Observed package id 'ndk-bundle' in inconsistent location '/Users/user/Library/Android/sdk/ndk-bundle.backup.version_17c' (Expected '/Users/user/Library/Android/sdk/ndk-bundle')\n[=======================================] 100% Computing updates...             \nAll SDK package licenses accepted.\n</code></pre>\n"}],"owner":{"account_id":17517635,"reputation":3391,"user_id":12704353,"display_name":"Vivek Kogilathota"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":124496,"favorite_count":0,"down_vote_count":2,"up_vote_count":339,"answer_count":15,"score":337,"last_activity_date":1699338044,"creation_date":1590363659,"question_id":61993738,"body_markdown":"    Exception in thread &quot;main&quot; java.lang.NoClassDefFoundError: javax/xml/bind/annotation/XmlSchema\r\n        at com.android.repository.api.SchemaModule$SchemaModuleVersion.&lt;init&gt;(SchemaModule.java:156)\r\n        at com.android.repository.api.SchemaModule.&lt;init&gt;(SchemaModule.java:75)\r\n        at com.android.sdklib.repository.AndroidSdkHandler.&lt;clinit&gt;(AndroidSdkHandler.java:81)\r\n        at com.android.sdklib.tool.sdkmanager.SdkManagerCli.main(SdkManagerCli.java:73)\r\n        at com.android.sdklib.tool.sdkmanager.SdkManagerCli.main(SdkManagerCli.java:48)\r\n    Caused by: java.lang.ClassNotFoundException: javax.xml.bind.annotation.XmlSchema\r\n        at java.base/jdk.internal.loader.BuiltinClassLoader.loadClass(BuiltinClassLoader.java:581)\r\n        at java.base/jdk.internal.loader.ClassLoaders$AppClassLoader.loadClass(ClassLoaders.java:178)\r\n        at java.base/java.lang.ClassLoader.loadClass(ClassLoader.java:521)\r\n        ... 5 more\r\n\r\nI get this error above when running flutter doctor --android-licenses. Does anyone know why this is happening and how I can fix it? I&#39;m already running it on the flutter console.","title":"flutter doctor --android-licenses gives a java error","body":"<pre><code>Exception in thread \"main\" java.lang.NoClassDefFoundError: javax/xml/bind/annotation/XmlSchema\n    at com.android.repository.api.SchemaModule$SchemaModuleVersion.&lt;init&gt;(SchemaModule.java:156)\n    at com.android.repository.api.SchemaModule.&lt;init&gt;(SchemaModule.java:75)\n    at com.android.sdklib.repository.AndroidSdkHandler.&lt;clinit&gt;(AndroidSdkHandler.java:81)\n    at com.android.sdklib.tool.sdkmanager.SdkManagerCli.main(SdkManagerCli.java:73)\n    at com.android.sdklib.tool.sdkmanager.SdkManagerCli.main(SdkManagerCli.java:48)\nCaused by: java.lang.ClassNotFoundException: javax.xml.bind.annotation.XmlSchema\n    at java.base/jdk.internal.loader.BuiltinClassLoader.loadClass(BuiltinClassLoader.java:581)\n    at java.base/jdk.internal.loader.ClassLoaders$AppClassLoader.loadClass(ClassLoaders.java:178)\n    at java.base/java.lang.ClassLoader.loadClass(ClassLoader.java:521)\n    ... 5 more\n</code></pre>\n\n<p>I get this error above when running flutter doctor --android-licenses. Does anyone know why this is happening and how I can fix it? I'm already running it on the flutter console.</p>\n"},{"tags":["java","selenium","automation","appium","selenium-grid"],"answers":[{"tags":[],"owner":{"account_id":17137217,"reputation":217,"user_id":12401971,"display_name":"Kundan"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1629133184,"creation_date":1629133184,"answer_id":68806624,"question_id":68805116,"body_markdown":"1. For the setup function instead of @BeforeSuite use @BeforeTest, this will ensure that the function is executed before each test\r\n\r\n2. In the &quot;getAndroidDriver&quot; function you are setting capabilities of only one mobile device. Instead here is how you can frame the solution:\r\n\r\n\ta. Use &quot;parameters&quot; tag under your test tags of testng xml file\r\n\tb. Set the capabilities value in the parameters e.g. to set device name &lt;parameter name=&quot;deviceName&quot; value=&quot;Pixel 4a&quot; /&gt;\r\n\tc. Do it under the other test tag as well for Galaxy A20s\r\n\t\r\n3. Use @Parameters annotation for the setup function to receive the passed values e.g. @Parameters({&quot;udid&quot;, &quot;deviceName&quot;})\r\n\r\n4. Change the setup function definition to accept the parameter values e.g. setUp(String udid, String deviceName)\r\n\r\n5. Send the parameter values received in setup function to getAndroidDriver function.\r\n\t\r\n6. With above done, your setup and then getAndroidDriver functions will be executed in parallel with two different set of parameter values\r\n\r\nMake sure that you also pass the appium port number via parameters tag.","title":"How execute appium tests parallel on different devices using appium grid","body":"<ol>\n<li><p>For the setup function instead of @BeforeSuite use @BeforeTest, this will ensure that the function is executed before each test</p>\n</li>\n<li><p>In the &quot;getAndroidDriver&quot; function you are setting capabilities of only one mobile device. Instead here is how you can frame the solution:</p>\n<p>a. Use &quot;parameters&quot; tag under your test tags of testng xml file\nb. Set the capabilities value in the parameters e.g. to set device name \nc. Do it under the other test tag as well for Galaxy A20s</p>\n</li>\n<li><p>Use @Parameters annotation for the setup function to receive the passed values e.g. @Parameters({&quot;udid&quot;, &quot;deviceName&quot;})</p>\n</li>\n<li><p>Change the setup function definition to accept the parameter values e.g. setUp(String udid, String deviceName)</p>\n</li>\n<li><p>Send the parameter values received in setup function to getAndroidDriver function.</p>\n</li>\n<li><p>With above done, your setup and then getAndroidDriver functions will be executed in parallel with two different set of parameter values</p>\n</li>\n</ol>\n<p>Make sure that you also pass the appium port number via parameters tag.</p>\n"}],"owner":{"account_id":22481140,"reputation":9,"user_id":16680203,"display_name":"Muhammad Ehtsham"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":515,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":1,"score":0,"last_activity_date":1699337935,"creation_date":1629126207,"question_id":68805116,"body_markdown":"**GOAL:** As I&#39;m new to Appium. I&#39;m trying to automate Appium test parallel on multiple android devices using Appium grid on Ubuntu.\\\r\nI&#39;ve successfully started a Grid hub server and 2 nodes with different ports.\\\r\n**ISSUE:** Unable to run test cases on both devices at the same time (I&#39;m sure the issue is with how I&#39;m designing my Framework). I don&#39;t know how to pass the capabilities of both devices and start the devices at the same time (MAJOR PROBLEM). Do I have to use multi-threading for this, if yes then how?\\\r\n**ACTUAL:** When I run multiple test classes on the same device, it works but as I have only a single instance of Android Driver in my BaseTest class, I&#39;m unable to run parallel.\\\r\n**WHAT I TRIED:** I went through so many threads on google but was unable to find the exact solution.\\\r\nThis is my *testng.xml* code\r\n\r\n    &lt;suite name=&quot;Functional&quot; parallel=&quot;tests&quot; thread-count=&quot;2&quot;&gt;\r\n\t&lt;test verbose=&quot;2&quot; name=&quot;Pixel 4a&quot;&gt;\r\n\t\t&lt;classes&gt;\r\n\t\t\t&lt;class name=&quot;tests.PersonalRegistrationTests&quot; /&gt;\r\n\t\t\t&lt;class name=&quot;tests.LoginTests&quot;&gt;&lt;/class&gt;\r\n\t\t&lt;/classes&gt;\r\n\t&lt;/test&gt; &lt;!-- Test --&gt;\r\n\t&lt;test verbose=&quot;2&quot; name=&quot;Galaxy A20s&quot;&gt;\r\n\t\t&lt;classes&gt;\r\n\t\t\t&lt;class name=&quot;tests.PersonalRegistrationTests&quot; /&gt;\r\n\t\t\t&lt;class name=&quot;tests.LoginTests&quot;&gt;&lt;/class&gt;\r\n\t\t&lt;/classes&gt;\r\n\t&lt;/test&gt; &lt;!-- Test --&gt;\r\n&lt;/suite&gt; &lt;!-- Suite --&gt;\r\n\r\nThis is my *TestBase.java* code\r\n\r\n    public class TestBase {\r\n\r\n\tstatic AppiumDriver androidDriver;\r\n\t\r\n\t@BeforeSuite\r\n\tpublic void setup() {\r\n\t\ttry {\r\n\t\t\tandroidDriver = DeviceUtility.getAndroidDriver();\r\n\t\t} catch (Exception exp) {\r\n\t\t\tSystem.out.println(&quot;Message is : &quot; + exp.getMessage());\r\n\t\t\tandroidDriver.quit();\r\n\t\t}\r\n\t}\r\n\r\nThis is my *DeviceUtility.java* code\r\n\r\n    public static AppiumDriver getAndroidDriver() throws Exception {\r\n\t\t\r\n\t\tDesiredCapabilities capability = new DesiredCapabilities();\r\n\t\tAppiumDriver androidDriver;\r\n\t\t\r\n\t\ttry {\r\n\t\t\tcapability.setCapability(MobileCapabilityType.PLATFORM_NAME, &quot;Android&quot;);\r\n\t\t\tcapability.setCapability(MobileCapabilityType.PLATFORM_VERSION, &quot;11.0&quot;);\r\n\t\t\tcapability.setCapability(MobileCapabilityType.DEVICE_NAME, &quot;Pixel 4a&quot;);\r\n\t\t\tcapability.setCapability(MobileCapabilityType.UDID, &quot;09091JEC214196&quot;);\r\n\t\t\tcapability.setCapability(MobileCapabilityType.APP, System.getProperty(&quot;user.dir&quot;) + getApkRelativePATH());\r\n\t\t\t\r\n\t\t\tandroidDriver = new AndroidDriver&lt;MobileElement&gt;(new URL(&quot;http://192.168.88.60:4444/wd/hub&quot;), capability);\r\n\t\t\tandroidDriver.manage().timeouts().implicitlyWait(30, TimeUnit.SECONDS);\r\n\t\t\treturn androidDriver;\r\n\t\t\r\n\t\t} catch (Exception ex) {\r\n\t\t\tthrow new Exception(&quot;Error : &quot; + ex.getMessage());\r\n\t\t}\r\n\t}\r\n\r\nAnd this is a test sample.\r\n\r\n    public class PersonalRegistrationTests extends TestBase{\r\n\t\r\n\t@Test(priority = 1)\r\n\tpublic void verifyRegistrationWithSupportedCountry() throws Exception { \r\n\t\t\r\n\t\tRegistrationScreens registrationScreens = new RegistrationScreens(androidDriver);\r\n\t\t\r\n\t\ttry {\r\n\t\t\tregistrationScreens.allowLocationPermission();\r\n\t\t\tregistrationScreens.allowContactsPermission();\r\n\t\t\tregistrationScreens.visitOnboardingScreens();\r\n\t\t\tregistrationScreens.selectCountry(&quot;United States&quot;);\r\n\t\t\tregistrationScreens.enterPhoneNumber(&quot;5678911111&quot;);\r\n\t\t\tregistrationScreens.sendCode();\r\n\t\t\t\r\n\t\t\tAssert.assertTrue(registrationScreens.checkOTPScreenVisibility());\r\n\t\t\t\r\n        }catch(Exception ex){\r\n        \tthrow new SkipException(ex.getMessage());\r\n        }\r\n\t\t\r\n\t}\r\n\r\nWhere am I doing wrong in my Framework? Thanks in advance :)","title":"How execute appium tests parallel on different devices using appium grid","body":"<p><strong>GOAL:</strong> As I'm new to Appium. I'm trying to automate Appium test parallel on multiple android devices using Appium grid on Ubuntu.<br />\nI've successfully started a Grid hub server and 2 nodes with different ports.<br />\n<strong>ISSUE:</strong> Unable to run test cases on both devices at the same time (I'm sure the issue is with how I'm designing my Framework). I don't know how to pass the capabilities of both devices and start the devices at the same time (MAJOR PROBLEM). Do I have to use multi-threading for this, if yes then how?<br />\n<strong>ACTUAL:</strong> When I run multiple test classes on the same device, it works but as I have only a single instance of Android Driver in my BaseTest class, I'm unable to run parallel.<br />\n<strong>WHAT I TRIED:</strong> I went through so many threads on google but was unable to find the exact solution.<br />\nThis is my <em>testng.xml</em> code</p>\n<pre><code>&lt;suite name=&quot;Functional&quot; parallel=&quot;tests&quot; thread-count=&quot;2&quot;&gt;\n&lt;test verbose=&quot;2&quot; name=&quot;Pixel 4a&quot;&gt;\n    &lt;classes&gt;\n        &lt;class name=&quot;tests.PersonalRegistrationTests&quot; /&gt;\n        &lt;class name=&quot;tests.LoginTests&quot;&gt;&lt;/class&gt;\n    &lt;/classes&gt;\n&lt;/test&gt; &lt;!-- Test --&gt;\n&lt;test verbose=&quot;2&quot; name=&quot;Galaxy A20s&quot;&gt;\n    &lt;classes&gt;\n        &lt;class name=&quot;tests.PersonalRegistrationTests&quot; /&gt;\n        &lt;class name=&quot;tests.LoginTests&quot;&gt;&lt;/class&gt;\n    &lt;/classes&gt;\n&lt;/test&gt; &lt;!-- Test --&gt;\n</code></pre>\n<p> </p>\n<p>This is my <em>TestBase.java</em> code</p>\n<pre><code>public class TestBase {\n\nstatic AppiumDriver androidDriver;\n\n@BeforeSuite\npublic void setup() {\n    try {\n        androidDriver = DeviceUtility.getAndroidDriver();\n    } catch (Exception exp) {\n        System.out.println(&quot;Message is : &quot; + exp.getMessage());\n        androidDriver.quit();\n    }\n}\n</code></pre>\n<p>This is my <em>DeviceUtility.java</em> code</p>\n<pre><code>public static AppiumDriver getAndroidDriver() throws Exception {\n    \n    DesiredCapabilities capability = new DesiredCapabilities();\n    AppiumDriver androidDriver;\n    \n    try {\n        capability.setCapability(MobileCapabilityType.PLATFORM_NAME, &quot;Android&quot;);\n        capability.setCapability(MobileCapabilityType.PLATFORM_VERSION, &quot;11.0&quot;);\n        capability.setCapability(MobileCapabilityType.DEVICE_NAME, &quot;Pixel 4a&quot;);\n        capability.setCapability(MobileCapabilityType.UDID, &quot;09091JEC214196&quot;);\n        capability.setCapability(MobileCapabilityType.APP, System.getProperty(&quot;user.dir&quot;) + getApkRelativePATH());\n        \n        androidDriver = new AndroidDriver&lt;MobileElement&gt;(new URL(&quot;http://192.168.88.60:4444/wd/hub&quot;), capability);\n        androidDriver.manage().timeouts().implicitlyWait(30, TimeUnit.SECONDS);\n        return androidDriver;\n    \n    } catch (Exception ex) {\n        throw new Exception(&quot;Error : &quot; + ex.getMessage());\n    }\n}\n</code></pre>\n<p>And this is a test sample.</p>\n<pre><code>public class PersonalRegistrationTests extends TestBase{\n\n@Test(priority = 1)\npublic void verifyRegistrationWithSupportedCountry() throws Exception { \n    \n    RegistrationScreens registrationScreens = new RegistrationScreens(androidDriver);\n    \n    try {\n        registrationScreens.allowLocationPermission();\n        registrationScreens.allowContactsPermission();\n        registrationScreens.visitOnboardingScreens();\n        registrationScreens.selectCountry(&quot;United States&quot;);\n        registrationScreens.enterPhoneNumber(&quot;5678911111&quot;);\n        registrationScreens.sendCode();\n        \n        Assert.assertTrue(registrationScreens.checkOTPScreenVisibility());\n        \n    }catch(Exception ex){\n        throw new SkipException(ex.getMessage());\n    }\n    \n}\n</code></pre>\n<p>Where am I doing wrong in my Framework? Thanks in advance :)</p>\n"},{"tags":["java","logging","logback","logstash-logback-encoder"],"answers":[{"tags":[],"owner":{"account_id":22868461,"reputation":177,"user_id":17011860,"display_name":"Asif A Fasih"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1634615962,"creation_date":1634600000,"answer_id":69623609,"question_id":69623161,"body_markdown":"I was able to mask sensitive data by writing a custom implementation of ValueMasker\r\n\r\nTwo components are required:\r\n\r\n 1. A class that implements `ValueMasker`\r\n 2. Declaring the `jsonGeneratorDecorator` in your `logback.xml`\r\n\r\n```\r\npackage com.mask;\r\n\r\nimport com.fasterxml.jackson.core.JsonStreamContext;\r\nimport net.logstash.logback.mask.ValueMasker;\r\n\r\nimport java.util.ArrayList;\r\nimport java.util.List;\r\nimport java.util.regex.Matcher;\r\nimport java.util.regex.Pattern;\r\nimport java.util.stream.IntStream;\r\n\r\npublic class SensitiveMaskingPatternLayout implements ValueMasker {\r\n    private Pattern multilinePattern = Pattern.compile(&quot;\\\\\\&quot;msg\\\\\\&quot;\\\\s*:\\\\s*\\\\\\&quot;(.*?)\\\\\\&quot;&quot;, Pattern.MULTILINE);;\r\n    private List&lt;String&gt; maskPatterns = new ArrayList&lt;&gt;();\r\n\r\n    private String maskMessage(String message) {\r\n\r\n        StringBuilder sb = new StringBuilder(message);\r\n        Matcher matcher = multilinePattern.matcher(sb);\r\n        while (matcher.find()) {\r\n            IntStream.rangeClosed(1, matcher.groupCount()).forEach(group -&gt; {\r\n                if (matcher.group(group) != null) {\r\n                    IntStream.range(matcher.start(group), matcher.end(group)).forEach(i -&gt; sb.setCharAt(i, &#39;x&#39;));\r\n                }\r\n            });\r\n        }\r\n        return sb.toString();\r\n    }\r\n\r\n    @Override\r\n    public Object mask(JsonStreamContext context, Object value) {\r\n        if (value instanceof CharSequence) {\r\n            return maskMessage((String) value);\r\n        }\r\n        return value;\r\n    }\r\n}\r\n\r\n```\r\n\r\n```\r\n&lt;configuration&gt;\r\n\r\n    &lt;appender name=&quot;mask&quot; class=&quot;ch.qos.logback.core.ConsoleAppender&quot;&gt;\r\n        &lt;encoder class=&quot;net.logstash.logback.encoder.LoggingEventCompositeJsonEncoder&quot;&gt;\r\n            &lt;providers&gt;\r\n                &lt;pattern&gt;\r\n                    &lt;pattern&gt;\r\n                        {\r\n                            &quot;msg&quot;: &quot;%msg&quot;,\r\n                            &quot;log_type&quot;: &quot;%level&quot;\r\n                        }\r\n                    &lt;/pattern&gt;\r\n                    &lt;omitEmptyFields&gt;true&lt;/omitEmptyFields&gt;\r\n                &lt;/pattern&gt;\r\n            &lt;/providers&gt;\r\n            &lt;logLevel&gt;\r\n                INFO\r\n            &lt;/logLevel&gt;\r\n            &lt;jsonGeneratorDecorator class=&quot;net.logstash.logback.mask.MaskingJsonGeneratorDecorator&quot;&gt;\r\n                &lt;valueMasker class=&quot;com.mask.SensitiveMaskingPatternLayout&quot;/&gt;\r\n            &lt;/jsonGeneratorDecorator&gt;\r\n        &lt;/encoder&gt;\r\n    &lt;/appender&gt;\r\n\r\n    &lt;root level=&quot;INFO&quot;&gt;\r\n        &lt;appender-ref ref=&quot;mask&quot; /&gt;\r\n    &lt;/root&gt;\r\n\r\n&lt;/configuration&gt;\r\n```\r\n\r\nExample:\r\n```\r\npackage com.example;\r\n\r\nimport java.util.HashMap;\r\nimport java.util.Map;\r\nimport org.json.JSONObject;\r\n\r\nimport org.slf4j.Logger;\r\nimport org.slf4j.LoggerFactory;\r\n\r\npublic class App {\r\n\r\n       private static final Logger logger = LoggerFactory.getLogger(App.class);\r\n\r\n    public static void main(String[] args) {\r\n        Map&lt;String, String&gt; user = new HashMap&lt;&gt;();\r\n        user.put(&quot;user_id&quot;, &quot;97588&quot;);\r\n        user.put(&quot;email_id&quot;, &quot;random@email.com&quot;);\r\n        user.put(&quot;msg&quot;, &quot;hello world&quot;);\r\n        JSONObject userDetails = new JSONObject(user);\r\n\r\n        logger.info(&quot;MaskingPatternExample log from {}&quot; + userDetails);\r\n    }\r\n\r\n}\r\n\r\n```\r\n\r\n```\r\n{&quot;msg&quot;:&quot;MaskingPatternExample log from {}{\\&quot;email_id\\&quot;:\\&quot;random@email.com\\&quot;,\\&quot;msg\\&quot;:\\&quot;xxxxxxxxxxx\\&quot;,\\&quot;user_id\\&quot;:\\&quot;97588\\&quot;}&quot;,&quot;log_type&quot;:&quot;INFO&quot;}\r\n\r\n```\r\n\r\nFurther [documentation][1].\r\n\r\n\r\n  [1]: https://github.com/logstash/logstash-logback-encoder#masking","title":"Mask json values using logback","body":"<p>I was able to mask sensitive data by writing a custom implementation of ValueMasker</p>\n<p>Two components are required:</p>\n<ol>\n<li>A class that implements <code>ValueMasker</code></li>\n<li>Declaring the <code>jsonGeneratorDecorator</code> in your <code>logback.xml</code></li>\n</ol>\n<pre><code>package com.mask;\n\nimport com.fasterxml.jackson.core.JsonStreamContext;\nimport net.logstash.logback.mask.ValueMasker;\n\nimport java.util.ArrayList;\nimport java.util.List;\nimport java.util.regex.Matcher;\nimport java.util.regex.Pattern;\nimport java.util.stream.IntStream;\n\npublic class SensitiveMaskingPatternLayout implements ValueMasker {\n    private Pattern multilinePattern = Pattern.compile(&quot;\\\\\\&quot;msg\\\\\\&quot;\\\\s*:\\\\s*\\\\\\&quot;(.*?)\\\\\\&quot;&quot;, Pattern.MULTILINE);;\n    private List&lt;String&gt; maskPatterns = new ArrayList&lt;&gt;();\n\n    private String maskMessage(String message) {\n\n        StringBuilder sb = new StringBuilder(message);\n        Matcher matcher = multilinePattern.matcher(sb);\n        while (matcher.find()) {\n            IntStream.rangeClosed(1, matcher.groupCount()).forEach(group -&gt; {\n                if (matcher.group(group) != null) {\n                    IntStream.range(matcher.start(group), matcher.end(group)).forEach(i -&gt; sb.setCharAt(i, 'x'));\n                }\n            });\n        }\n        return sb.toString();\n    }\n\n    @Override\n    public Object mask(JsonStreamContext context, Object value) {\n        if (value instanceof CharSequence) {\n            return maskMessage((String) value);\n        }\n        return value;\n    }\n}\n\n</code></pre>\n<pre><code>&lt;configuration&gt;\n\n    &lt;appender name=&quot;mask&quot; class=&quot;ch.qos.logback.core.ConsoleAppender&quot;&gt;\n        &lt;encoder class=&quot;net.logstash.logback.encoder.LoggingEventCompositeJsonEncoder&quot;&gt;\n            &lt;providers&gt;\n                &lt;pattern&gt;\n                    &lt;pattern&gt;\n                        {\n                            &quot;msg&quot;: &quot;%msg&quot;,\n                            &quot;log_type&quot;: &quot;%level&quot;\n                        }\n                    &lt;/pattern&gt;\n                    &lt;omitEmptyFields&gt;true&lt;/omitEmptyFields&gt;\n                &lt;/pattern&gt;\n            &lt;/providers&gt;\n            &lt;logLevel&gt;\n                INFO\n            &lt;/logLevel&gt;\n            &lt;jsonGeneratorDecorator class=&quot;net.logstash.logback.mask.MaskingJsonGeneratorDecorator&quot;&gt;\n                &lt;valueMasker class=&quot;com.mask.SensitiveMaskingPatternLayout&quot;/&gt;\n            &lt;/jsonGeneratorDecorator&gt;\n        &lt;/encoder&gt;\n    &lt;/appender&gt;\n\n    &lt;root level=&quot;INFO&quot;&gt;\n        &lt;appender-ref ref=&quot;mask&quot; /&gt;\n    &lt;/root&gt;\n\n&lt;/configuration&gt;\n</code></pre>\n<p>Example:</p>\n<pre><code>package com.example;\n\nimport java.util.HashMap;\nimport java.util.Map;\nimport org.json.JSONObject;\n\nimport org.slf4j.Logger;\nimport org.slf4j.LoggerFactory;\n\npublic class App {\n\n       private static final Logger logger = LoggerFactory.getLogger(App.class);\n\n    public static void main(String[] args) {\n        Map&lt;String, String&gt; user = new HashMap&lt;&gt;();\n        user.put(&quot;user_id&quot;, &quot;97588&quot;);\n        user.put(&quot;email_id&quot;, &quot;random@email.com&quot;);\n        user.put(&quot;msg&quot;, &quot;hello world&quot;);\n        JSONObject userDetails = new JSONObject(user);\n\n        logger.info(&quot;MaskingPatternExample log from {}&quot; + userDetails);\n    }\n\n}\n\n</code></pre>\n<pre><code>{&quot;msg&quot;:&quot;MaskingPatternExample log from {}{\\&quot;email_id\\&quot;:\\&quot;random@email.com\\&quot;,\\&quot;msg\\&quot;:\\&quot;xxxxxxxxxxx\\&quot;,\\&quot;user_id\\&quot;:\\&quot;97588\\&quot;}&quot;,&quot;log_type&quot;:&quot;INFO&quot;}\n\n</code></pre>\n<p>Further <a href=\"https://github.com/logstash/logstash-logback-encoder#masking\" rel=\"nofollow noreferrer\">documentation</a>.</p>\n"},{"tags":[],"owner":{"account_id":18602903,"reputation":1,"user_id":13557304,"display_name":"Ishan Prakash"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1696349549,"creation_date":1696349549,"answer_id":77223903,"question_id":69623161,"body_markdown":"The `ValueMasker` approach didn&#39;t work for me. If you faced the same issue, here&#39;s what did work : \r\n\r\n 1. If you notice the `LoggingEventCompositeJsonEncoder` in the `logback.xml`,  it has these fields called `&lt;providers&gt;`.\r\n 2. On further examination, you will find that these are `LoggingEventJsonProviders` that are basically setting all the json fields in our encoder. \r\n 3. Therefore, if you have a field called `&lt;message&gt;`, it is a provider and you can modify the content of this field by extending the `AbstractFieldJsonProvider` class like so : \r\n \r\n\r\n        public class ModifyingProvider extends AbstractFieldJsonProvider &lt; ILoggingEvent &gt; {\r\n        private final Pattern[] maskPatterns;\r\n        public ModifyingProvider() {\r\n          maskPatterns = new Pattern[] {\r\n            Pattern.compile(&quot;\\\\b[0-9]{2}-[0-9]{2}-[0-9]{4}\\\\b&quot;), // DOB pattern (DD-MM-YYYY)\r\n              // Add more patterns as needed\r\n          };\r\n        }\r\n        private String maskData(String message) {\r\n          StringBuilder maskedMessage = new StringBuilder(message);\r\n\r\n          for (Pattern pattern: maskPatterns) {\r\n            Matcher matcher = pattern.matcher(maskedMessage);\r\n\r\n            while (matcher.find()) {\r\n              String match = matcher.group();\r\n              String maskedValue = mask(match);\r\n              maskedMessage.replace(matcher.start(), matcher.end(), maskedValue);\r\n            }\r\n          }\r\n\r\n          return maskedMessage.toString();\r\n        }\r\n        private String mask(String originalValue) {\r\n          // Masking Logic\r\n        }\r\n\r\n        @Override\r\n        public void writeTo(JsonGenerator generator, ILoggingEvent event) throws IOException {\r\n          // Modify the log message or provide an alternative message here\r\n\r\n          String modifiedMessage = modifyMessage(originalMessage);\r\n\r\n          // Write the modified message to the JSON output\r\n          generator.writeStringField(&quot;message&quot;, modifiedMessage);\r\n        }\r\n\r\n        private String modifyMessage(String originalMessage) {\r\n          return maskData(originalMessage);\r\n        }\r\n4. Then inside your `logback.xml`, just replace the desired `&lt;provider&gt;` tag or, in this case, `&lt;message&gt;` tag with `&lt;provider class=&quot;path.to.your.class.ModifyingProvider&quot;/&gt;`.","title":"Mask json values using logback","body":"<p>The <code>ValueMasker</code> approach didn't work for me. If you faced the same issue, here's what did work :</p>\n<ol>\n<li><p>If you notice the <code>LoggingEventCompositeJsonEncoder</code> in the <code>logback.xml</code>,  it has these fields called <code>&lt;providers&gt;</code>.</p>\n</li>\n<li><p>On further examination, you will find that these are <code>LoggingEventJsonProviders</code> that are basically setting all the json fields in our encoder.</p>\n</li>\n<li><p>Therefore, if you have a field called <code>&lt;message&gt;</code>, it is a provider and you can modify the content of this field by extending the <code>AbstractFieldJsonProvider</code> class like so :</p>\n<pre><code>public class ModifyingProvider extends AbstractFieldJsonProvider &lt; ILoggingEvent &gt; {\nprivate final Pattern[] maskPatterns;\npublic ModifyingProvider() {\n  maskPatterns = new Pattern[] {\n    Pattern.compile(&quot;\\\\b[0-9]{2}-[0-9]{2}-[0-9]{4}\\\\b&quot;), // DOB pattern (DD-MM-YYYY)\n      // Add more patterns as needed\n  };\n}\nprivate String maskData(String message) {\n  StringBuilder maskedMessage = new StringBuilder(message);\n\n  for (Pattern pattern: maskPatterns) {\n    Matcher matcher = pattern.matcher(maskedMessage);\n\n    while (matcher.find()) {\n      String match = matcher.group();\n      String maskedValue = mask(match);\n      maskedMessage.replace(matcher.start(), matcher.end(), maskedValue);\n    }\n  }\n\n  return maskedMessage.toString();\n}\nprivate String mask(String originalValue) {\n  // Masking Logic\n}\n\n@Override\npublic void writeTo(JsonGenerator generator, ILoggingEvent event) throws IOException {\n  // Modify the log message or provide an alternative message here\n\n  String modifiedMessage = modifyMessage(originalMessage);\n\n  // Write the modified message to the JSON output\n  generator.writeStringField(&quot;message&quot;, modifiedMessage);\n}\n\nprivate String modifyMessage(String originalMessage) {\n  return maskData(originalMessage);\n}\n</code></pre>\n</li>\n<li><p>Then inside your <code>logback.xml</code>, just replace the desired <code>&lt;provider&gt;</code> tag or, in this case, <code>&lt;message&gt;</code> tag with <code>&lt;provider class=&quot;path.to.your.class.ModifyingProvider&quot;/&gt;</code>.</p>\n</li>\n</ol>\n"},{"tags":[],"owner":{"account_id":29768710,"reputation":21,"user_id":22814503,"display_name":"Vamsi Krishna Gadamsetty"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1698422668,"creation_date":1698422668,"answer_id":77375598,"question_id":69623161,"body_markdown":"There is a more easy way of doing it without writing any custom code.\r\nMasking has been introduced into logstash logback in 7.0 version.\r\nHere is the PR for it.\r\nhttps://github.com/logfellow/logstash-logback-encoder/pull/378/files\r\n\r\nYou just have to add jsonGeneratorDecorator and specify the field name to mask.\r\n\r\nHere is the example.\r\n\r\n    &lt;appender name=&quot;JSON&quot; class=&quot;ch.qos.logback.core.ConsoleAppender&quot;&gt;\r\n        &lt;encoder class=&quot;net.logstash.logback.encoder.LoggingEventCompositeJsonEncoder&quot;&gt;\r\n            &lt;providers&gt;\r\n                &lt;timestamp/&gt;\r\n                &lt;arguments/&gt;\r\n                &lt;logstashMarkers/&gt;\r\n            &lt;/providers&gt;\r\n            &lt;jsonGeneratorDecorator class=&quot;net.logstash.logback.mask.MaskingJsonGeneratorDecorator&quot;&gt;\r\n                &lt;path&gt;name of the field 1&lt;/path&gt;\r\n                &lt;path&gt;name of the field 2&lt;/path&gt;\r\n            &lt;/jsonGeneratorDecorator&gt;\r\n        &lt;/encoder&gt;\r\n    &lt;/appender&gt;","title":"Mask json values using logback","body":"<p>There is a more easy way of doing it without writing any custom code.\nMasking has been introduced into logstash logback in 7.0 version.\nHere is the PR for it.\n<a href=\"https://github.com/logfellow/logstash-logback-encoder/pull/378/files\" rel=\"nofollow noreferrer\">https://github.com/logfellow/logstash-logback-encoder/pull/378/files</a></p>\n<p>You just have to add jsonGeneratorDecorator and specify the field name to mask.</p>\n<p>Here is the example.</p>\n<pre><code>&lt;appender name=&quot;JSON&quot; class=&quot;ch.qos.logback.core.ConsoleAppender&quot;&gt;\n    &lt;encoder class=&quot;net.logstash.logback.encoder.LoggingEventCompositeJsonEncoder&quot;&gt;\n        &lt;providers&gt;\n            &lt;timestamp/&gt;\n            &lt;arguments/&gt;\n            &lt;logstashMarkers/&gt;\n        &lt;/providers&gt;\n        &lt;jsonGeneratorDecorator class=&quot;net.logstash.logback.mask.MaskingJsonGeneratorDecorator&quot;&gt;\n            &lt;path&gt;name of the field 1&lt;/path&gt;\n            &lt;path&gt;name of the field 2&lt;/path&gt;\n        &lt;/jsonGeneratorDecorator&gt;\n    &lt;/encoder&gt;\n&lt;/appender&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":11728787,"reputation":95,"user_id":8585072,"display_name":"Muhammad Ali"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1699336771,"creation_date":1699336771,"answer_id":77435854,"question_id":69623161,"body_markdown":"I&#39;d like to add the following to vamsi&#39;s [answer][1], as it&#39;s the most efficient.\r\n\r\n\r\n  [1]: https://stackoverflow.com/a/77375598/8585072\r\nSometimes you will need to apply masking patterns along with json patterns\r\n\r\n 1. json patterns: ones used to format the output.\r\n 2. mask patterns: ones used to mask certain parts of the output.  \r\n\r\nAnd this happens specially when you&#39;re writing logs to files for splunk, along with having PCI/PII information within those logs. in order to achieve that , you&#39;ll have to do the following:\r\n\r\n```xml\r\n&lt;appender name=&quot;APP&quot; class=&quot;ch.qos.logback.core.rolling.RollingFileAppender&quot;&gt;\r\n\r\n      &lt;file&gt;${LOG_PATH}/${springAppName}-app.log&lt;/file&gt;\r\n\r\n      &lt;rollingPolicy class=&quot;ch.qos.logback.core.rolling.SizeAndTimeBasedRollingPolicy&quot;&gt;\r\n            &lt;fileNamePattern&gt;${LOG_PATH}/${springAppName}-app_%d{dd-MM-yyyy}.%i.log.zip&lt;/fileNamePattern&gt;\r\n            &lt;maxFileSize&gt;10MB&lt;/maxFileSize&gt;\r\n            &lt;maxHistory&gt;30&lt;/maxHistory&gt;\r\n            &lt;totalSizeCap&gt;5GB&lt;/totalSizeCap&gt;\r\n      &lt;/rollingPolicy&gt;\r\n\r\n      &lt;encoder class=&quot;net.logstash.logback.encoder.LoggingEventCompositeJsonEncoder&quot;&gt;\r\n            &lt;providers&gt;\r\n                &lt;timestamp&gt;&lt;/timestamp&gt;\r\n                &lt;pattern&gt;\r\n                    &lt;pattern&gt;\r\n                        {\r\n                        &quot;severity&quot;: &quot;%level&quot;,\r\n                        &quot;service&quot;: &quot;${springAppName:-}&quot;,\r\n                        &quot;traceId&quot;: &quot;%X{traceId:-}&quot;,\r\n                        &quot;spanId&quot;: &quot;%X{spanId:-}&quot;,\r\n                        &quot;parentSpanId&quot;: &quot;%X{parentSpanId:-}&quot;,\r\n                        &quot;pid&quot;: &quot;${PID:-}&quot;,\r\n                        &quot;thread&quot;: &quot;%thread&quot;,\r\n                        &quot;class&quot;: &quot;%logger{40}&quot;,\r\n                        &quot;message&quot;: &quot;#tryJson{%message %exception{5,20,1024,rootFirst}}&quot;\r\n                        }\r\n                    &lt;/pattern&gt;\r\n                    &lt;omitEmptyFields&gt;true&lt;/omitEmptyFields&gt;\r\n                &lt;/pattern&gt;\r\n            &lt;/providers&gt;\r\n            &lt;jsonGeneratorDecorator class=&quot;net.logstash.logback.mask.MaskingJsonGeneratorDecorator&quot;&gt;\r\n                &lt;value&gt;\\&quot;(\\w*(?i)card\\w*)\\&quot;\\s*:\\s*\\&quot;([^\\&quot;]*)\\&quot;&lt;/value&gt;&lt;!-- Any property with the word card --&gt;\r\n                &lt;value&gt;\\&quot;(\\w*(?i)address\\w*)\\&quot;\\s*:\\s*\\&quot;([^\\&quot;]*)\\&quot;&lt;/value&gt;\r\n                &lt;value&gt;\\&quot;(\\w*(?i)email\\w*)\\&quot;\\s*:\\s*\\&quot;([^\\&quot;]*)\\&quot;&lt;/value&gt;\r\n                &lt;value&gt;\\&quot;(\\w*(?i)password\\w*)\\&quot;\\s*:\\s*\\&quot;([^\\&quot;]*)\\&quot;&lt;/value&gt;\r\n                &lt;value&gt;\\&quot;(\\w*(?i)token\\w*)\\&quot;\\s*:\\s*\\&quot;([^\\&quot;]*)\\&quot;&lt;/value&gt;\r\n                &lt;value&gt;\\&quot;(\\w*(?i)phone\\w*)\\&quot;\\s*:\\s*\\&quot;([^\\&quot;]*)\\&quot;&lt;/value&gt;\r\n                &lt;value&gt;\\&quot;(\\w*(?i)passport\\w*)\\&quot;\\s*:\\s*\\&quot;([^\\&quot;]*)\\&quot;&lt;/value&gt;\r\n                &lt;value&gt;\\&quot;(\\w*(?i)expiryDate\\w*)\\&quot;\\s*:\\s*\\&quot;([^\\&quot;]*)\\&quot;&lt;/value&gt;\r\n                &lt;value&gt;\\&quot;(\\w*(?i)cvv\\w*)\\&quot;\\s*:\\s*\\&quot;([^\\&quot;]*)\\&quot;&lt;/value&gt;\r\n                &lt;value&gt;\\&quot;(\\w*(?i)security\\w*)\\&quot;\\s*:\\s*\\&quot;([^\\&quot;]*)\\&quot;&lt;/value&gt;\r\n                &lt;value&gt;\\&quot;(\\w*(?i)txnFlow\\w*)\\&quot;\\s*:\\s*\\&quot;([^\\&quot;]*)\\&quot;&lt;/value&gt;\r\n                &lt;value&gt;\\&quot;(\\w*(?i)cvc\\w*)\\&quot;\\s*:\\s*\\&quot;([^\\&quot;]*)\\&quot;&lt;/value&gt;\r\n                &lt;value&gt;\\&quot;(\\w*(?i)cvv\\w*)\\&quot;\\s*:\\s*\\&quot;([^\\&quot;]*)\\&quot;&lt;/value&gt;\r\n                &lt;value&gt;\\&quot;(\\w*(?i)firstName\\w*)\\&quot;\\s*:\\s*\\&quot;([^\\&quot;]*)\\&quot;&lt;/value&gt;\r\n                &lt;value&gt;\\&quot;(\\w*(?i)lastName\\w*)\\&quot;\\s*:\\s*\\&quot;([^\\&quot;]*)\\&quot;&lt;/value&gt;\r\n                &lt;value&gt;(\\d+\\.\\d+\\.\\d+\\.\\d+)&lt;/value&gt; &lt;!-- Ip address IPv4--&gt;\r\n                &lt;value&gt;(\\w+@\\w+\\.\\w+)&lt;/value&gt; &lt;!-- Email pattern --&gt;\r\n            &lt;/jsonGeneratorDecorator&gt;\r\n      &lt;/encoder&gt;\r\n```\r\n\r\n","title":"Mask json values using logback","body":"<p>I'd like to add the following to vamsi's <a href=\"https://stackoverflow.com/a/77375598/8585072\">answer</a>, as it's the most efficient.</p>\n<p>Sometimes you will need to apply masking patterns along with json patterns</p>\n<ol>\n<li>json patterns: ones used to format the output.</li>\n<li>mask patterns: ones used to mask certain parts of the output.</li>\n</ol>\n<p>And this happens specially when you're writing logs to files for splunk, along with having PCI/PII information within those logs. in order to achieve that , you'll have to do the following:</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;appender name=&quot;APP&quot; class=&quot;ch.qos.logback.core.rolling.RollingFileAppender&quot;&gt;\n\n      &lt;file&gt;${LOG_PATH}/${springAppName}-app.log&lt;/file&gt;\n\n      &lt;rollingPolicy class=&quot;ch.qos.logback.core.rolling.SizeAndTimeBasedRollingPolicy&quot;&gt;\n            &lt;fileNamePattern&gt;${LOG_PATH}/${springAppName}-app_%d{dd-MM-yyyy}.%i.log.zip&lt;/fileNamePattern&gt;\n            &lt;maxFileSize&gt;10MB&lt;/maxFileSize&gt;\n            &lt;maxHistory&gt;30&lt;/maxHistory&gt;\n            &lt;totalSizeCap&gt;5GB&lt;/totalSizeCap&gt;\n      &lt;/rollingPolicy&gt;\n\n      &lt;encoder class=&quot;net.logstash.logback.encoder.LoggingEventCompositeJsonEncoder&quot;&gt;\n            &lt;providers&gt;\n                &lt;timestamp&gt;&lt;/timestamp&gt;\n                &lt;pattern&gt;\n                    &lt;pattern&gt;\n                        {\n                        &quot;severity&quot;: &quot;%level&quot;,\n                        &quot;service&quot;: &quot;${springAppName:-}&quot;,\n                        &quot;traceId&quot;: &quot;%X{traceId:-}&quot;,\n                        &quot;spanId&quot;: &quot;%X{spanId:-}&quot;,\n                        &quot;parentSpanId&quot;: &quot;%X{parentSpanId:-}&quot;,\n                        &quot;pid&quot;: &quot;${PID:-}&quot;,\n                        &quot;thread&quot;: &quot;%thread&quot;,\n                        &quot;class&quot;: &quot;%logger{40}&quot;,\n                        &quot;message&quot;: &quot;#tryJson{%message %exception{5,20,1024,rootFirst}}&quot;\n                        }\n                    &lt;/pattern&gt;\n                    &lt;omitEmptyFields&gt;true&lt;/omitEmptyFields&gt;\n                &lt;/pattern&gt;\n            &lt;/providers&gt;\n            &lt;jsonGeneratorDecorator class=&quot;net.logstash.logback.mask.MaskingJsonGeneratorDecorator&quot;&gt;\n                &lt;value&gt;\\&quot;(\\w*(?i)card\\w*)\\&quot;\\s*:\\s*\\&quot;([^\\&quot;]*)\\&quot;&lt;/value&gt;&lt;!-- Any property with the word card --&gt;\n                &lt;value&gt;\\&quot;(\\w*(?i)address\\w*)\\&quot;\\s*:\\s*\\&quot;([^\\&quot;]*)\\&quot;&lt;/value&gt;\n                &lt;value&gt;\\&quot;(\\w*(?i)email\\w*)\\&quot;\\s*:\\s*\\&quot;([^\\&quot;]*)\\&quot;&lt;/value&gt;\n                &lt;value&gt;\\&quot;(\\w*(?i)password\\w*)\\&quot;\\s*:\\s*\\&quot;([^\\&quot;]*)\\&quot;&lt;/value&gt;\n                &lt;value&gt;\\&quot;(\\w*(?i)token\\w*)\\&quot;\\s*:\\s*\\&quot;([^\\&quot;]*)\\&quot;&lt;/value&gt;\n                &lt;value&gt;\\&quot;(\\w*(?i)phone\\w*)\\&quot;\\s*:\\s*\\&quot;([^\\&quot;]*)\\&quot;&lt;/value&gt;\n                &lt;value&gt;\\&quot;(\\w*(?i)passport\\w*)\\&quot;\\s*:\\s*\\&quot;([^\\&quot;]*)\\&quot;&lt;/value&gt;\n                &lt;value&gt;\\&quot;(\\w*(?i)expiryDate\\w*)\\&quot;\\s*:\\s*\\&quot;([^\\&quot;]*)\\&quot;&lt;/value&gt;\n                &lt;value&gt;\\&quot;(\\w*(?i)cvv\\w*)\\&quot;\\s*:\\s*\\&quot;([^\\&quot;]*)\\&quot;&lt;/value&gt;\n                &lt;value&gt;\\&quot;(\\w*(?i)security\\w*)\\&quot;\\s*:\\s*\\&quot;([^\\&quot;]*)\\&quot;&lt;/value&gt;\n                &lt;value&gt;\\&quot;(\\w*(?i)txnFlow\\w*)\\&quot;\\s*:\\s*\\&quot;([^\\&quot;]*)\\&quot;&lt;/value&gt;\n                &lt;value&gt;\\&quot;(\\w*(?i)cvc\\w*)\\&quot;\\s*:\\s*\\&quot;([^\\&quot;]*)\\&quot;&lt;/value&gt;\n                &lt;value&gt;\\&quot;(\\w*(?i)cvv\\w*)\\&quot;\\s*:\\s*\\&quot;([^\\&quot;]*)\\&quot;&lt;/value&gt;\n                &lt;value&gt;\\&quot;(\\w*(?i)firstName\\w*)\\&quot;\\s*:\\s*\\&quot;([^\\&quot;]*)\\&quot;&lt;/value&gt;\n                &lt;value&gt;\\&quot;(\\w*(?i)lastName\\w*)\\&quot;\\s*:\\s*\\&quot;([^\\&quot;]*)\\&quot;&lt;/value&gt;\n                &lt;value&gt;(\\d+\\.\\d+\\.\\d+\\.\\d+)&lt;/value&gt; &lt;!-- Ip address IPv4--&gt;\n                &lt;value&gt;(\\w+@\\w+\\.\\w+)&lt;/value&gt; &lt;!-- Email pattern --&gt;\n            &lt;/jsonGeneratorDecorator&gt;\n      &lt;/encoder&gt;\n</code></pre>\n"}],"owner":{"account_id":13604041,"reputation":177,"user_id":9813861,"display_name":"DxG"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":5897,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":69623609,"answer_count":4,"score":1,"last_activity_date":1699336771,"creation_date":1634595614,"question_id":69623161,"body_markdown":"I&#39;m using below logstash encoder in logback config of my spring boot project.\r\n\r\n    &lt;encoder class=&quot;net.logstash.logback.encoder.LoggingEventCompositeJsonEncoder&quot;&gt;\r\n            &lt;providers&gt;\r\n                &lt;pattern&gt;\r\n                    &lt;pattern&gt;\r\n                        {\r\n                            &quot;creation_timestamp&quot;: &quot;%d{yyyy-MM-dd&#39;T&#39;HH:mm:ss, UTC}&quot;,\r\n                            &quot;msg&quot;: &quot;%msg&quot;,\r\n                            &quot;log_type&quot;: &quot;%level&quot;,\r\n                         }   \r\n                    &lt;/pattern&gt;\r\n                    &lt;omitEmptyFields&gt;true&lt;/omitEmptyFields&gt;\r\n                &lt;/pattern&gt;\r\n            &lt;/providers&gt;\r\n        &lt;/encoder&gt;\r\n\r\nI want to mask sensitive data in the json log message. I tried the below to mask the value of key &quot;Code&quot;. But it doesn&#39;t work. \r\n\r\n    &quot;msg&quot;: &quot;%replace(%msg){&#39;\\&quot;Code\\&quot;:&#39;.*&#39;&#39;, &#39;\\&quot;Code\\&quot;:&#39;xxx&#39;&#39;}&quot;,\r\n\r\nHow can I mask json value within the logstash appender ?","title":"Mask json values using logback","body":"<p>I'm using below logstash encoder in logback config of my spring boot project.</p>\n<pre><code>&lt;encoder class=&quot;net.logstash.logback.encoder.LoggingEventCompositeJsonEncoder&quot;&gt;\n        &lt;providers&gt;\n            &lt;pattern&gt;\n                &lt;pattern&gt;\n                    {\n                        &quot;creation_timestamp&quot;: &quot;%d{yyyy-MM-dd'T'HH:mm:ss, UTC}&quot;,\n                        &quot;msg&quot;: &quot;%msg&quot;,\n                        &quot;log_type&quot;: &quot;%level&quot;,\n                     }   \n                &lt;/pattern&gt;\n                &lt;omitEmptyFields&gt;true&lt;/omitEmptyFields&gt;\n            &lt;/pattern&gt;\n        &lt;/providers&gt;\n    &lt;/encoder&gt;\n</code></pre>\n<p>I want to mask sensitive data in the json log message. I tried the below to mask the value of key &quot;Code&quot;. But it doesn't work.</p>\n<pre><code>&quot;msg&quot;: &quot;%replace(%msg){'\\&quot;Code\\&quot;:'.*'', '\\&quot;Code\\&quot;:'xxx''}&quot;,\n</code></pre>\n<p>How can I mask json value within the logstash appender ?</p>\n"},{"tags":["java","spring","spring-boot","prometheus","metrics"],"answers":[{"tags":[],"owner":{"account_id":944144,"reputation":5331,"user_id":971735,"display_name":"Jonatan Ivanov"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1699045358,"creation_date":1699045358,"answer_id":77419696,"question_id":77367839,"body_markdown":"You should not customize the WebClient using a `BeanDefinitionRegistryPostProcessor`, instead you can do this:\r\n```java\r\n@Bean\r\nWebClient accountWebClient(WebClient.Builder builder) {\r\n\treturn builder.baseUrl(&quot;https://httpbin.org/get&quot;).build();\r\n}\r\n```","title":"BeanDefinitionRegistryPostProcessor implementation hides prometheus system and jvm metrics","body":"<p>You should not customize the WebClient using a <code>BeanDefinitionRegistryPostProcessor</code>, instead you can do this:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Bean\nWebClient accountWebClient(WebClient.Builder builder) {\n    return builder.baseUrl(&quot;https://httpbin.org/get&quot;).build();\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":24203989,"reputation":21,"user_id":18161446,"display_name":"Patrick Baie"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1699335926,"creation_date":1699335926,"answer_id":77435800,"question_id":77367839,"body_markdown":"Another question is : the external library uses the implementation of BeanDefinitionRegistryPostProcessor because I think that it can override the method postProcessBeanDefinitionRegistry(BeanDefinitionRegistry registry) and so uses the registry in order to store the beans.\r\n\r\nIs there another way to get the registry without the implementation of BeanDefinitionRegistryPostProcessor ?","title":"BeanDefinitionRegistryPostProcessor implementation hides prometheus system and jvm metrics","body":"<p>Another question is : the external library uses the implementation of BeanDefinitionRegistryPostProcessor because I think that it can override the method postProcessBeanDefinitionRegistry(BeanDefinitionRegistry registry) and so uses the registry in order to store the beans.</p>\n<p>Is there another way to get the registry without the implementation of BeanDefinitionRegistryPostProcessor ?</p>\n"}],"owner":{"account_id":24203989,"reputation":21,"user_id":18161446,"display_name":"Patrick Baie"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":41,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1699335926,"creation_date":1698330179,"question_id":77367839,"body_markdown":"I&#39;m using a class that implements BeanDefinitionRegistryPostProcessor so that I can use the postProcessBeanDefinitionRegistry method to instantiate WebClient type beans, add them to the registry and then use them via Autowired and Qualifier(nameBean) in other Class.\r\n\r\nEverything&#39;s OK except that in the prometheus metrics I don&#39;t see any jvm or system type metrics.\r\n\r\nI have this class which is called from META-INF/spring via re.test.pos.api.consumer.WebClientInstanceBuilderAutoConfiguration.\r\nThis class call the WebClientInstanceBuilder class :\r\n\r\n```\r\n@Configuration\r\n@EnableConfigurationProperties({ ConsumerProperties.class })\r\n@ConditionalOnClass(WebClient.class)\r\n@ConditionalOnBean(WebClient.Builder.class)\r\npublic class WebClientInstanceBuilderAutoConfiguration {\r\n\r\n\t@Bean\r\n\t@ConditionalOnMissingBean\r\n\tpublic WebClientInstanceBuilder webClientInstanceBuilder(Environment environment,\r\n\t\t\tWebClient.Builder webClientBuilder) {\r\n\r\n        WebClientInstanceBuilder webClientInstanceBuilder = new WebClientInstanceBuilder(webClientBuilder);\r\n\r\n        return webClientInstanceBuilder;\r\n\t}\r\n}\r\n```\r\n\r\n\r\nI have this class WebClientInstanceBuilder which implements BeanDefinitionRegistryPostProcessor and its goal is to instantiate the bean in the method postProcessBeanDefinitionRegistry\r\n```\r\npublic class WebClientInstanceBuilder implements BeanDefinitionRegistryPostProcessor {\r\n\r\n\tConsumerProperties consumerProperties;\r\n\tWebClient.Builder webClientBuilder;\r\n\r\n    public WebClientInstanceBuilder(WebClient.Builder webClientBuilder) {\r\n\t\tthis.webClientBuilder   = webClientBuilder;\r\n\t}\r\n\r\n    @Override\r\n    public void postProcessBeanDefinitionRegistry(BeanDefinitionRegistry registry) throws BeansException {\r\n\r\n            String beanKey = &quot;accountManagementWebClient&quot;;\r\n\r\n            WebClient client = webClientBuilder.clone().baseUrl(&quot;https://test.api:8443/test&quot;)\r\n                    .codecs( codecs -&gt; {codecs.defaultCodecs();})\r\n                    .build();\r\n\r\n            GenericBeanDefinition definition = new GenericBeanDefinition();\r\n            definition.setBeanClass(WebClient.class);\r\n            definition.setInstanceSupplier(() -&gt; client);\r\n            registry.registerBeanDefinition(beanKey, definition);\r\n    }\r\n\r\n    @Override\r\n\tpublic void postProcessBeanFactory(ConfigurableListableBeanFactory beanFactory) throws BeansException {\r\n\t}\r\n\r\n}\r\n```\r\n\r\n\r\nAnd I have this class which use the bean accountManagementWebClient\r\n\r\n```\r\n@Component\r\npublic class AccountManager {\r\n    @Autowired\r\n    @Qualifier(&quot;accountManagementWebClient&quot;)\r\n    private WebClient accountWebClient;\r\n\r\n    public String getAccountByBillingAccountId(String billingAccountId, String tumUserId) {\r\n\r\n        WebClient theAccountWebClient = accountWebClient;\r\n\r\n        try {\r\n            return null;\r\n        } catch (Exception ex) {\r\n            throw ex;\r\n        }\r\n\r\n    }\r\n}\r\n\r\n```\r\n\r\nEverything is OK except the prometheus metrics.\r\nWhen I look at the metrics prometheus I don&#39;t see the JMV metrics.\r\nI application.properties I have :\r\n\r\n\r\n```\r\nmanagement.server.port=4242\r\nmanagement.endpoints.web.exposure.include=*\r\nmanagement.metrics.enable.all=true\r\n\r\n```\r\n\r\nIf I delete the implementation of BeanDefinitionRegistryPostProcessor and I continue to create the WebClient Bean with another solution I can see all the metrics prometheus also the jvm and system metrics.\r\nBut in this case I&#39;m having problems with the @Autowired to retrieve the Bean because unfortunately as soon as I delete the implementation of BeanDefinitionRegistryPostProcessor  the Autowired are executed before the instantiation of my beans.\r\n\r\nI tried a lot of things but without success.\r\n\r\nThanks a lot\r\n","title":"BeanDefinitionRegistryPostProcessor implementation hides prometheus system and jvm metrics","body":"<p>I'm using a class that implements BeanDefinitionRegistryPostProcessor so that I can use the postProcessBeanDefinitionRegistry method to instantiate WebClient type beans, add them to the registry and then use them via Autowired and Qualifier(nameBean) in other Class.</p>\n<p>Everything's OK except that in the prometheus metrics I don't see any jvm or system type metrics.</p>\n<p>I have this class which is called from META-INF/spring via re.test.pos.api.consumer.WebClientInstanceBuilderAutoConfiguration.\nThis class call the WebClientInstanceBuilder class :</p>\n<pre><code>@Configuration\n@EnableConfigurationProperties({ ConsumerProperties.class })\n@ConditionalOnClass(WebClient.class)\n@ConditionalOnBean(WebClient.Builder.class)\npublic class WebClientInstanceBuilderAutoConfiguration {\n\n    @Bean\n    @ConditionalOnMissingBean\n    public WebClientInstanceBuilder webClientInstanceBuilder(Environment environment,\n            WebClient.Builder webClientBuilder) {\n\n        WebClientInstanceBuilder webClientInstanceBuilder = new WebClientInstanceBuilder(webClientBuilder);\n\n        return webClientInstanceBuilder;\n    }\n}\n</code></pre>\n<p>I have this class WebClientInstanceBuilder which implements BeanDefinitionRegistryPostProcessor and its goal is to instantiate the bean in the method postProcessBeanDefinitionRegistry</p>\n<pre><code>public class WebClientInstanceBuilder implements BeanDefinitionRegistryPostProcessor {\n\n    ConsumerProperties consumerProperties;\n    WebClient.Builder webClientBuilder;\n\n    public WebClientInstanceBuilder(WebClient.Builder webClientBuilder) {\n        this.webClientBuilder   = webClientBuilder;\n    }\n\n    @Override\n    public void postProcessBeanDefinitionRegistry(BeanDefinitionRegistry registry) throws BeansException {\n\n            String beanKey = &quot;accountManagementWebClient&quot;;\n\n            WebClient client = webClientBuilder.clone().baseUrl(&quot;https://test.api:8443/test&quot;)\n                    .codecs( codecs -&gt; {codecs.defaultCodecs();})\n                    .build();\n\n            GenericBeanDefinition definition = new GenericBeanDefinition();\n            definition.setBeanClass(WebClient.class);\n            definition.setInstanceSupplier(() -&gt; client);\n            registry.registerBeanDefinition(beanKey, definition);\n    }\n\n    @Override\n    public void postProcessBeanFactory(ConfigurableListableBeanFactory beanFactory) throws BeansException {\n    }\n\n}\n</code></pre>\n<p>And I have this class which use the bean accountManagementWebClient</p>\n<pre><code>@Component\npublic class AccountManager {\n    @Autowired\n    @Qualifier(&quot;accountManagementWebClient&quot;)\n    private WebClient accountWebClient;\n\n    public String getAccountByBillingAccountId(String billingAccountId, String tumUserId) {\n\n        WebClient theAccountWebClient = accountWebClient;\n\n        try {\n            return null;\n        } catch (Exception ex) {\n            throw ex;\n        }\n\n    }\n}\n\n</code></pre>\n<p>Everything is OK except the prometheus metrics.\nWhen I look at the metrics prometheus I don't see the JMV metrics.\nI application.properties I have :</p>\n<pre><code>management.server.port=4242\nmanagement.endpoints.web.exposure.include=*\nmanagement.metrics.enable.all=true\n\n</code></pre>\n<p>If I delete the implementation of BeanDefinitionRegistryPostProcessor and I continue to create the WebClient Bean with another solution I can see all the metrics prometheus also the jvm and system metrics.\nBut in this case I'm having problems with the @Autowired to retrieve the Bean because unfortunately as soon as I delete the implementation of BeanDefinitionRegistryPostProcessor  the Autowired are executed before the instantiation of my beans.</p>\n<p>I tried a lot of things but without success.</p>\n<p>Thanks a lot</p>\n"},{"tags":["java","syntax"],"comments":[{"owner":{"account_id":28104689,"reputation":512,"user_id":21473475,"display_name":"Arfur Narf"},"score":0,"creation_date":1699331202,"post_id":77435508,"comment_id":136515118,"body_markdown":"Your i-loop never terminates, so code after the i-loop is unreachable. The index out of bounds is because (1) you have no limit on your i-loop, and (2) 2147483647 + 1 is negative.","body":"Your i-loop never terminates, so code after the i-loop is unreachable. The index out of bounds is because (1) you have no limit on your i-loop, and (2) 2147483647 + 1 is negative."}],"owner":{"account_id":5019394,"reputation":1,"user_id":4393386,"display_name":"wushuzh"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":37,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"closed_date":1699331125,"answer_count":0,"score":0,"last_activity_date":1699335080,"creation_date":1699330013,"question_id":77435508,"body_markdown":"This is a dup question, already answered in [Why do I not need to provide a return value after an endless loop? [duplicate]](https://stackoverflow.com/questions/19952598/why-do-i-not-need-to-provide-a-return-value-after-an-endless-loop)\r\n\r\nI wonder why the following codes are OK. (From Leetcode #1 two sum).\r\n\r\nI think java must report missing return statement error, but it&#39;s not in this case ?\r\n\r\nAlthough code description makes sure there will be a valid answer, but why writing the code in the following way make sure compiler won&#39;t report the missing return statement error ?\r\n\r\n```\r\npublic int[] twoSum1(int[] nums, int target) {\r\n    for (int i = 0; ; i++) \r\n        for (int j = i + 1; j &lt; nums.length; j++) \r\n            if (nums[i] + nums[j] == target) \r\n                return new int[]{i, j};\r\n\r\n    // Why we can miss the following return statement here ?\r\n    // return new int[0];\r\n}\r\n```\r\n\r\n\r\n```\r\npublic int[] twoSum2(int[] nums, int target) {\r\n    Map&lt;Integer, Integer&gt; idx = new HashMap&lt;&gt;(); \r\n    for (int j = 0; ; j++) { \r\n        int x = nums[j];\r\n        \r\n        if (idx.containsKey(target - x)) \r\n            return new int[]{idx.get(target - x), j}; \r\n        idx.put(x, j); \r\n    }\r\n\r\n    // Why we can miss the following return statement here ?\r\n    // return new int[0];}\r\n\r\n```\r\n\r\nAlso if I setup a case without correct ans, the JVM will report the error during execution:\r\n\r\n```\r\nException in thread &quot;main&quot; java.lang.ArrayIndexOutOfBoundsException: Index 2147483647 out of bounds for length 2\r\n        at Solution.twoSum1(Solution.java:5)\r\n        at Solution.main(Solution.java:19)\r\n```","title":"why java does not report missing return error when return is only available in if-block?","body":"<p>This is a dup question, already answered in <a href=\"https://stackoverflow.com/questions/19952598/why-do-i-not-need-to-provide-a-return-value-after-an-endless-loop\">Why do I not need to provide a return value after an endless loop? [duplicate]</a></p>\n<p>I wonder why the following codes are OK. (From Leetcode #1 two sum).</p>\n<p>I think java must report missing return statement error, but it's not in this case ?</p>\n<p>Although code description makes sure there will be a valid answer, but why writing the code in the following way make sure compiler won't report the missing return statement error ?</p>\n<pre><code>public int[] twoSum1(int[] nums, int target) {\n    for (int i = 0; ; i++) \n        for (int j = i + 1; j &lt; nums.length; j++) \n            if (nums[i] + nums[j] == target) \n                return new int[]{i, j};\n\n    // Why we can miss the following return statement here ?\n    // return new int[0];\n}\n</code></pre>\n<pre><code>public int[] twoSum2(int[] nums, int target) {\n    Map&lt;Integer, Integer&gt; idx = new HashMap&lt;&gt;(); \n    for (int j = 0; ; j++) { \n        int x = nums[j];\n        \n        if (idx.containsKey(target - x)) \n            return new int[]{idx.get(target - x), j}; \n        idx.put(x, j); \n    }\n\n    // Why we can miss the following return statement here ?\n    // return new int[0];}\n\n</code></pre>\n<p>Also if I setup a case without correct ans, the JVM will report the error during execution:</p>\n<pre><code>Exception in thread &quot;main&quot; java.lang.ArrayIndexOutOfBoundsException: Index 2147483647 out of bounds for length 2\n        at Solution.twoSum1(Solution.java:5)\n        at Solution.main(Solution.java:19)\n</code></pre>\n"},{"tags":["java","methods","bufferedimage"],"comments":[{"owner":{"account_id":15064163,"reputation":13519,"user_id":10871900,"display_name":"dan1st is crying"},"score":1,"creation_date":1699308946,"post_id":77434496,"comment_id":136513246,"body_markdown":"What&#39;s the problem with your current code?","body":"What&#39;s the problem with your current code?"},{"owner":{"account_id":31180,"reputation":29173,"user_id":85421,"display_name":"user85421"},"score":0,"creation_date":1699309117,"post_id":77434496,"comment_id":136513271,"body_markdown":"Hints: 1) `BufferedImage` has a [`setRGB()`](https://docs.oracle.com/en/java/javase/21/docs/api/java.desktop/java/awt/image/BufferedImage.html#setRGB(int,int,int)) method, no need to get the pixels; 2) it also has a [`getGraphics()`](https://docs.oracle.com/en/java/javase/21/docs/api/java.desktop/java/awt/image/BufferedImage.html#getGraphics()) which returns a `Graphics` used to *paint* onto the image, the preferred way to *edit* an image","body":"Hints: 1) <code>BufferedImage</code> has a <a href=\"https://docs.oracle.com/en/java/javase/21/docs/api/java.desktop/java/awt/image/BufferedImage.html#setRGB(int,int,int)\" rel=\"nofollow noreferrer\"><code>setRGB()</code></a> method, no need to get the pixels; 2) it also has a <a href=\"https://docs.oracle.com/en/java/javase/21/docs/api/java.desktop/java/awt/image/BufferedImage.html#getGraphics()\" rel=\"nofollow noreferrer\"><code>getGraphics()</code></a> which returns a <code>Graphics</code> used to <i>paint</i> onto the image, the preferred way to <i>edit</i> an image"},{"owner":{"account_id":29806391,"reputation":5,"user_id":22842900,"display_name":"KajSech"},"score":0,"creation_date":1699309138,"post_id":77434496,"comment_id":136513276,"body_markdown":"@dan1st Technically nothing. I just don&#39;t know what to do next as far as the editing of the pixels goes","body":"@dan1st Technically nothing. I just don&#39;t know what to do next as far as the editing of the pixels goes"},{"owner":{"account_id":247613,"reputation":284087,"user_id":522444,"accept_rate":100,"display_name":"Hovercraft Full Of Eels"},"score":2,"creation_date":1699309166,"post_id":77434496,"comment_id":136513279,"body_markdown":"You can more simply just use the Graphics object from a BufferedImage  to draw the border","body":"You can more simply just use the Graphics object from a BufferedImage  to draw the border"},{"owner":{"account_id":31180,"reputation":29173,"user_id":85421,"display_name":"user85421"},"score":0,"creation_date":1699315323,"post_id":77434496,"comment_id":136513977,"body_markdown":"I wonder what the last nested `for` loops are intended for? The sample images included in this question show the border just draw over the image, not around it (image size not changed)","body":"I wonder what the last nested <code>for</code> loops are intended for? The sample images included in this question show the border just draw over the image, not around it (image size not changed)"}],"answers":[{"tags":[],"owner":{"account_id":247613,"reputation":284087,"user_id":522444,"accept_rate":100,"display_name":"Hovercraft Full Of Eels"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1699310260,"creation_date":1699309696,"answer_id":77434562,"question_id":77434496,"body_markdown":"You can simply create a border around an image using the `Graphics`/`Graphics2D` object from a `BufferedImage`. For example:\r\n\r\n```\r\npublic BufferedImage addBorder(BufferedImage img, int borderThickness, Color borderColor) {\r\n    if (img == null) {\r\n        throw new IllegalArgumentException(&quot;img cannot be null&quot;);\r\n    }\r\n    int width = img.getWidth();\r\n    int height = img.getHeight();\r\n\r\n    // create a new image, the same size as the old\r\n    BufferedImage newImg = new BufferedImage(width, height, img.getType());\r\n\r\n    // extract the Graphics2D object\r\n    Graphics2D g = newImg.createGraphics();\r\n\r\n    // draw the original image with it\r\n    g.drawImage(img, 0, 0, null);\r\n\r\n    // then draw the border \r\n    g.setColor(borderColor);\r\n    g.setStroke(new BasicStroke(borderThickness));\r\n    g.drawRect(0, 0, width, height);\r\n\r\n    // conserve resources\r\n    g.dispose();\r\n\r\n    return newImg;\r\n}\r\n```\r\n\r\nOr using an int array:\r\n\r\n```\r\npublic BufferedImage addBorder(BufferedImage img, int borderThickness, int[] borderColor) {\r\n    if (img == null) {\r\n        throw new IllegalArgumentException(&quot;img cannot be null&quot;);\r\n    }\r\n    int width = img.getWidth();\r\n    int height = img.getHeight();\r\n\r\n    // create a new image, the same size as the old\r\n    BufferedImage newImg = new BufferedImage(width, height, img.getType());\r\n\r\n    // extract the Graphics2D object\r\n    Graphics2D g = newImg.createGraphics();\r\n\r\n    // draw the original image with it\r\n    g.drawImage(img, 0, 0, null);\r\n\r\n    // then draw the border\r\n    g.setColor(new Color(borderColor[0], borderColor[1], borderColor[2]));\r\n    g.setStroke(new BasicStroke(borderThickness));\r\n    g.drawRect(0, 0, width, height);\r\n\r\n    // conserve resources\r\n    g.dispose();\r\n\r\n    return newImg;\r\n}\r\n```\r\n\r\nAnd the code can be tested as so:\r\n```\r\npublic static void main(String[] args) {\r\n    String urlPath = &quot;https://i.stack.imgur.com/kdvs7.png&quot;;\r\n    URL url = null;\r\n    BufferedImage img = null;\r\n    try {\r\n        url = new URL(urlPath);\r\n        img = ImageIO.read(url);\r\n    } catch (IOException e) {\r\n        e.printStackTrace();\r\n        System.exit(-1);\r\n    }\r\n\r\n    AddBorder addBorder = new AddBorder();\r\n    BufferedImage newImg = addBorder.addBorder(img, 20, Color.BLUE);\r\n\r\n    // display original image\r\n    ImageIcon icon1 = new ImageIcon(img);\r\n    JOptionPane.showMessageDialog(null, icon1);\r\n\r\n    // display the image\r\n    ImageIcon icon2 = new ImageIcon(newImg);\r\n    JOptionPane.showMessageDialog(null, icon2);\r\n}\r\n```","title":"Editing the Border of a BufferedImage in Java","body":"<p>You can simply create a border around an image using the <code>Graphics</code>/<code>Graphics2D</code> object from a <code>BufferedImage</code>. For example:</p>\n<pre><code>public BufferedImage addBorder(BufferedImage img, int borderThickness, Color borderColor) {\n    if (img == null) {\n        throw new IllegalArgumentException(&quot;img cannot be null&quot;);\n    }\n    int width = img.getWidth();\n    int height = img.getHeight();\n\n    // create a new image, the same size as the old\n    BufferedImage newImg = new BufferedImage(width, height, img.getType());\n\n    // extract the Graphics2D object\n    Graphics2D g = newImg.createGraphics();\n\n    // draw the original image with it\n    g.drawImage(img, 0, 0, null);\n\n    // then draw the border \n    g.setColor(borderColor);\n    g.setStroke(new BasicStroke(borderThickness));\n    g.drawRect(0, 0, width, height);\n\n    // conserve resources\n    g.dispose();\n\n    return newImg;\n}\n</code></pre>\n<p>Or using an int array:</p>\n<pre><code>public BufferedImage addBorder(BufferedImage img, int borderThickness, int[] borderColor) {\n    if (img == null) {\n        throw new IllegalArgumentException(&quot;img cannot be null&quot;);\n    }\n    int width = img.getWidth();\n    int height = img.getHeight();\n\n    // create a new image, the same size as the old\n    BufferedImage newImg = new BufferedImage(width, height, img.getType());\n\n    // extract the Graphics2D object\n    Graphics2D g = newImg.createGraphics();\n\n    // draw the original image with it\n    g.drawImage(img, 0, 0, null);\n\n    // then draw the border\n    g.setColor(new Color(borderColor[0], borderColor[1], borderColor[2]));\n    g.setStroke(new BasicStroke(borderThickness));\n    g.drawRect(0, 0, width, height);\n\n    // conserve resources\n    g.dispose();\n\n    return newImg;\n}\n</code></pre>\n<p>And the code can be tested as so:</p>\n<pre><code>public static void main(String[] args) {\n    String urlPath = &quot;https://i.stack.imgur.com/kdvs7.png&quot;;\n    URL url = null;\n    BufferedImage img = null;\n    try {\n        url = new URL(urlPath);\n        img = ImageIO.read(url);\n    } catch (IOException e) {\n        e.printStackTrace();\n        System.exit(-1);\n    }\n\n    AddBorder addBorder = new AddBorder();\n    BufferedImage newImg = addBorder.addBorder(img, 20, Color.BLUE);\n\n    // display original image\n    ImageIcon icon1 = new ImageIcon(img);\n    JOptionPane.showMessageDialog(null, icon1);\n\n    // display the image\n    ImageIcon icon2 = new ImageIcon(newImg);\n    JOptionPane.showMessageDialog(null, icon2);\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":969721,"reputation":344508,"user_id":992484,"accept_rate":60,"display_name":"MadProgrammer"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1699334023,"creation_date":1699310789,"answer_id":77434628,"question_id":77434496,"body_markdown":"There&#39;s a few ways you might do this, personally I might consider making use of `Area`, as it allows you to `subtract` (or `add`) shapes together, for example...\r\n\r\n[![enter image description here][1]][1]\r\n\r\n    import java.awt.Color;\r\n    import java.awt.EventQueue;\r\n    import java.awt.Graphics2D;\r\n    import java.awt.GridLayout;\r\n    import java.awt.Rectangle;\r\n    import java.awt.geom.Area;\r\n    import java.awt.image.BufferedImage;\r\n    import java.io.IOException;\r\n    import java.util.logging.Level;\r\n    import java.util.logging.Logger;\r\n    import javax.imageio.ImageIO;\r\n    import javax.swing.ImageIcon;\r\n    import javax.swing.JFrame;\r\n    import javax.swing.JLabel;\r\n    import javax.swing.JPanel;\r\n\r\n    public class Main {\r\n        public static void main(String[] args) {\r\n            new Main();\r\n        }\r\n\r\n        public Main() {\r\n            EventQueue.invokeLater(new Runnable() {\r\n                @Override\r\n                public void run() {\r\n                    try {\r\n                        JFrame frame = new JFrame();\r\n                        frame.add(new TestPane());\r\n                        frame.pack();\r\n                        frame.setLocationRelativeTo(null);\r\n                        frame.setVisible(true);\r\n                    } catch (IOException ex) {\r\n                        Logger.getLogger(Main.class.getName()).log(Level.SEVERE, null, ex);\r\n                    }\r\n                }\r\n            });\r\n        }\r\n\r\n        public static BufferedImage applyBorder(BufferedImage img, int borderThickness, Color borderColor) {\r\n            if (borderThickness * 2 &gt; img.getWidth() || borderThickness * 2 &gt; img.getHeight()) {\r\n                return null;\r\n            }\r\n            Area border = new Area(new Rectangle(0, 0, img.getWidth(), img.getHeight()));\r\n            border.subtract(new Area(new Rectangle(\r\n                    borderThickness, \r\n                    borderThickness, \r\n                    img.getWidth() - (borderThickness * 2), \r\n                    img.getHeight() - (borderThickness * 2)\r\n            )));\r\n            BufferedImage targetImg = new BufferedImage(img.getWidth(), img.getHeight(), img.getType());\r\n            Graphics2D g2d = targetImg.createGraphics();\r\n            g2d.drawImage(img, 0, 0, null);\r\n            g2d.setColor(borderColor);\r\n            g2d.fill(border);\r\n            g2d.dispose();\r\n            return targetImg;\r\n        }\r\n\r\n        public class TestPane extends JPanel {\r\n\r\n            public TestPane() throws IOException {\r\n                BufferedImage master = ImageIO.read(getClass().getResource(&quot;/images/MegaTokyo.png&quot;));\r\n                BufferedImage bordered = applyBorder(master, 10, Color.RED);\r\n                setLayout(new GridLayout(0, 2));\r\n\r\n                add(new JLabel(new ImageIcon(master)));\r\n                add(new JLabel(new ImageIcon(bordered)));\r\n            }\r\n        }\r\n    }\r\n\r\n\r\nYou&#39;re probably scratching your head trying to figure out why this would be of benefit.\r\n\r\nConsider for a second, what if you wanted the border to have a rounded inner edge!\r\n\r\nWell, that&#39;s pretty easy to achieve, simply modify the `applyBorder` method to subtract a different shape, for example...\r\n\r\n    border.subtract(new Area(new RoundRectangle2D.Double(\r\n            borderThickness, \r\n            borderThickness, \r\n            img.getWidth() - (borderThickness * 2), \r\n            img.getHeight() - (borderThickness * 2),\r\n            32,\r\n            32\r\n    )));\r\n\r\nwhich generates...\r\n\r\n[![enter image description here][2]][2]\r\n\r\nYou could also make use of the existing `Border` API if you really wanted to.\r\n\r\n# The &quot;problem&quot;...\r\n\r\nThe reason you&#39;re getting a `java.lang.ArrayIndexOutOfBoundsException` is because the code which, I think, for some reason I don&#39;t understand, fills the image with the  pixels of the image...I&#39;m assuming you&#39;re trying to &quot;insert&quot; the image into the border, rather then having the border drawn on top of the image???\r\n\r\nAnyway, your problem is here...\r\n\r\n        for (int x = 0; x &lt; width; x++) {\r\n            for (int y = 0; y &lt; height; y++) {\r\n                targetImg.setRGB(x + borderThickness, y + borderThickness, img.getRGB(x, y));\r\n            }\r\n        }\r\n\r\nWhen `x` is `width - 1`, you&#39;re then adding `borderThickness` to it, which attempts to place a pixel outside of the image range.  Same thing goes for `y` position.\r\n\r\nAssuming you want to add the border around the image, as apposed to adding the border over the image, you need to modify your code to create a new image which is large enough to contain the original image and the border, for example...\r\n\r\n[![enter image description here][3]][3]\r\n\r\n    public static BufferedImage applySlowBorder(BufferedImage img, int borderThickness, Color borderColor) {\r\n        int width = img.getWidth();\r\n        int height = img.getHeight();\r\n        int borderRgb = borderColor.getRGB();//(borderColor[0] &lt;&lt; 16) | (borderColor[1] &lt;&lt; 8) | borderColor[2];\r\n        \r\n        BufferedImage targetImg = new BufferedImage(\r\n                img.getWidth() + (borderThickness * 2), \r\n                img.getHeight() + (borderThickness * 2), \r\n                img.getType()\r\n        );\r\n\r\n        for (int x = 0; x &lt; targetImg.getWidth(); x++) {\r\n            for (int y = 0; y &lt; borderThickness; y++) {\r\n                targetImg.setRGB(x, y, borderRgb); // Top border\r\n                targetImg.setRGB(x, targetImg.getHeight() - 1 - y, borderRgb); // Bottom border\r\n            }\r\n        }\r\n\r\n        for (int y = borderThickness; y &lt; targetImg.getHeight() - borderThickness; y++) {\r\n            for (int x = 0; x &lt; borderThickness; x++) {\r\n                targetImg.setRGB(x, y, borderRgb); // Left border\r\n                targetImg.setRGB(targetImg.getWidth() - 1 - x, y, borderRgb); // Right border\r\n            }\r\n        }\r\n\r\n        for (int x = 0; x &lt; width; x++) {\r\n            for (int y = 0; y &lt; height; y++) {\r\n                targetImg.setRGB(x + borderThickness, y + borderThickness, img.getRGB(x, y));\r\n            }\r\n        }\r\n        return targetImg;\r\n    }\r\n\r\nIf, however, you want to have the border painted over the image, then you need to paint the original image first, for example...\r\n\r\n[![enter image description here][4]][4]\r\n\r\n    public static BufferedImage applySlowBorder(BufferedImage img, int borderThickness, Color borderColor) {\r\n        int width = img.getWidth();\r\n        int height = img.getHeight();\r\n        int borderRgb = borderColor.getRGB();//(borderColor[0] &lt;&lt; 16) | (borderColor[1] &lt;&lt; 8) | borderColor[2];\r\n        \r\n        BufferedImage targetImg = new BufferedImage(\r\n                img.getWidth(),\r\n                img.getHeight(),\r\n                img.getType()\r\n        );\r\n\r\n        for (int x = 0; x &lt; width; x++) {\r\n            for (int y = 0; y &lt; height; y++) {\r\n                targetImg.setRGB(x, y, img.getRGB(x, y));\r\n            }\r\n        }\r\n\r\n        for (int x = 0; x &lt; targetImg.getWidth(); x++) {\r\n            for (int y = 0; y &lt; borderThickness; y++) {\r\n                targetImg.setRGB(x, y, borderRgb); // Top border\r\n                targetImg.setRGB(x, targetImg.getHeight() - 1 - y, borderRgb); // Bottom border\r\n            }\r\n        }\r\n\r\n        for (int y = borderThickness; y &lt; targetImg.getHeight() - borderThickness; y++) {\r\n            for (int x = 0; x &lt; borderThickness; x++) {\r\n                targetImg.setRGB(x, y, borderRgb); // Left border\r\n                targetImg.setRGB(targetImg.getWidth() - 1 - x, y, borderRgb); // Right border\r\n            }\r\n        }\r\n        return targetImg;\r\n    }\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/c6vqV.png\r\n  [2]: https://i.stack.imgur.com/Pk0Jc.png\r\n  [3]: https://i.stack.imgur.com/xFKy2.png\r\n  [4]: https://i.stack.imgur.com/RpUeu.png\r\n\r\n*fyi: Using my super accurate, scientific measurement tools (insert sarcasm &#129315;), the `Graphics2D` approach is about 10 milliseconds faster then the `get/setRGB` approach - while not a massive difference, the size of the image will have an increasingly large impact on these results - for example, using a 1920x1080 source image, the `Graphics2D` approach took about 9 milliseconds, where as your code took about 203 milliseconds - again, these are &quot;observational&quot; differences, but `get/setRGB` is known for been slow*","title":"Editing the Border of a BufferedImage in Java","body":"<p>There's a few ways you might do this, personally I might consider making use of <code>Area</code>, as it allows you to <code>subtract</code> (or <code>add</code>) shapes together, for example...</p>\n<p><a href=\"https://i.stack.imgur.com/c6vqV.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/c6vqV.png\" alt=\"enter image description here\" /></a></p>\n<pre><code>import java.awt.Color;\nimport java.awt.EventQueue;\nimport java.awt.Graphics2D;\nimport java.awt.GridLayout;\nimport java.awt.Rectangle;\nimport java.awt.geom.Area;\nimport java.awt.image.BufferedImage;\nimport java.io.IOException;\nimport java.util.logging.Level;\nimport java.util.logging.Logger;\nimport javax.imageio.ImageIO;\nimport javax.swing.ImageIcon;\nimport javax.swing.JFrame;\nimport javax.swing.JLabel;\nimport javax.swing.JPanel;\n\npublic class Main {\n    public static void main(String[] args) {\n        new Main();\n    }\n\n    public Main() {\n        EventQueue.invokeLater(new Runnable() {\n            @Override\n            public void run() {\n                try {\n                    JFrame frame = new JFrame();\n                    frame.add(new TestPane());\n                    frame.pack();\n                    frame.setLocationRelativeTo(null);\n                    frame.setVisible(true);\n                } catch (IOException ex) {\n                    Logger.getLogger(Main.class.getName()).log(Level.SEVERE, null, ex);\n                }\n            }\n        });\n    }\n\n    public static BufferedImage applyBorder(BufferedImage img, int borderThickness, Color borderColor) {\n        if (borderThickness * 2 &gt; img.getWidth() || borderThickness * 2 &gt; img.getHeight()) {\n            return null;\n        }\n        Area border = new Area(new Rectangle(0, 0, img.getWidth(), img.getHeight()));\n        border.subtract(new Area(new Rectangle(\n                borderThickness, \n                borderThickness, \n                img.getWidth() - (borderThickness * 2), \n                img.getHeight() - (borderThickness * 2)\n        )));\n        BufferedImage targetImg = new BufferedImage(img.getWidth(), img.getHeight(), img.getType());\n        Graphics2D g2d = targetImg.createGraphics();\n        g2d.drawImage(img, 0, 0, null);\n        g2d.setColor(borderColor);\n        g2d.fill(border);\n        g2d.dispose();\n        return targetImg;\n    }\n\n    public class TestPane extends JPanel {\n\n        public TestPane() throws IOException {\n            BufferedImage master = ImageIO.read(getClass().getResource(&quot;/images/MegaTokyo.png&quot;));\n            BufferedImage bordered = applyBorder(master, 10, Color.RED);\n            setLayout(new GridLayout(0, 2));\n\n            add(new JLabel(new ImageIcon(master)));\n            add(new JLabel(new ImageIcon(bordered)));\n        }\n    }\n}\n</code></pre>\n<p>You're probably scratching your head trying to figure out why this would be of benefit.</p>\n<p>Consider for a second, what if you wanted the border to have a rounded inner edge!</p>\n<p>Well, that's pretty easy to achieve, simply modify the <code>applyBorder</code> method to subtract a different shape, for example...</p>\n<pre><code>border.subtract(new Area(new RoundRectangle2D.Double(\n        borderThickness, \n        borderThickness, \n        img.getWidth() - (borderThickness * 2), \n        img.getHeight() - (borderThickness * 2),\n        32,\n        32\n)));\n</code></pre>\n<p>which generates...</p>\n<p><a href=\"https://i.stack.imgur.com/Pk0Jc.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Pk0Jc.png\" alt=\"enter image description here\" /></a></p>\n<p>You could also make use of the existing <code>Border</code> API if you really wanted to.</p>\n<h1>The &quot;problem&quot;...</h1>\n<p>The reason you're getting a <code>java.lang.ArrayIndexOutOfBoundsException</code> is because the code which, I think, for some reason I don't understand, fills the image with the  pixels of the image...I'm assuming you're trying to &quot;insert&quot; the image into the border, rather then having the border drawn on top of the image???</p>\n<p>Anyway, your problem is here...</p>\n<pre><code>    for (int x = 0; x &lt; width; x++) {\n        for (int y = 0; y &lt; height; y++) {\n            targetImg.setRGB(x + borderThickness, y + borderThickness, img.getRGB(x, y));\n        }\n    }\n</code></pre>\n<p>When <code>x</code> is <code>width - 1</code>, you're then adding <code>borderThickness</code> to it, which attempts to place a pixel outside of the image range.  Same thing goes for <code>y</code> position.</p>\n<p>Assuming you want to add the border around the image, as apposed to adding the border over the image, you need to modify your code to create a new image which is large enough to contain the original image and the border, for example...</p>\n<p><a href=\"https://i.stack.imgur.com/xFKy2.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/xFKy2.png\" alt=\"enter image description here\" /></a></p>\n<pre><code>public static BufferedImage applySlowBorder(BufferedImage img, int borderThickness, Color borderColor) {\n    int width = img.getWidth();\n    int height = img.getHeight();\n    int borderRgb = borderColor.getRGB();//(borderColor[0] &lt;&lt; 16) | (borderColor[1] &lt;&lt; 8) | borderColor[2];\n    \n    BufferedImage targetImg = new BufferedImage(\n            img.getWidth() + (borderThickness * 2), \n            img.getHeight() + (borderThickness * 2), \n            img.getType()\n    );\n\n    for (int x = 0; x &lt; targetImg.getWidth(); x++) {\n        for (int y = 0; y &lt; borderThickness; y++) {\n            targetImg.setRGB(x, y, borderRgb); // Top border\n            targetImg.setRGB(x, targetImg.getHeight() - 1 - y, borderRgb); // Bottom border\n        }\n    }\n\n    for (int y = borderThickness; y &lt; targetImg.getHeight() - borderThickness; y++) {\n        for (int x = 0; x &lt; borderThickness; x++) {\n            targetImg.setRGB(x, y, borderRgb); // Left border\n            targetImg.setRGB(targetImg.getWidth() - 1 - x, y, borderRgb); // Right border\n        }\n    }\n\n    for (int x = 0; x &lt; width; x++) {\n        for (int y = 0; y &lt; height; y++) {\n            targetImg.setRGB(x + borderThickness, y + borderThickness, img.getRGB(x, y));\n        }\n    }\n    return targetImg;\n}\n</code></pre>\n<p>If, however, you want to have the border painted over the image, then you need to paint the original image first, for example...</p>\n<p><a href=\"https://i.stack.imgur.com/RpUeu.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/RpUeu.png\" alt=\"enter image description here\" /></a></p>\n<pre><code>public static BufferedImage applySlowBorder(BufferedImage img, int borderThickness, Color borderColor) {\n    int width = img.getWidth();\n    int height = img.getHeight();\n    int borderRgb = borderColor.getRGB();//(borderColor[0] &lt;&lt; 16) | (borderColor[1] &lt;&lt; 8) | borderColor[2];\n    \n    BufferedImage targetImg = new BufferedImage(\n            img.getWidth(),\n            img.getHeight(),\n            img.getType()\n    );\n\n    for (int x = 0; x &lt; width; x++) {\n        for (int y = 0; y &lt; height; y++) {\n            targetImg.setRGB(x, y, img.getRGB(x, y));\n        }\n    }\n\n    for (int x = 0; x &lt; targetImg.getWidth(); x++) {\n        for (int y = 0; y &lt; borderThickness; y++) {\n            targetImg.setRGB(x, y, borderRgb); // Top border\n            targetImg.setRGB(x, targetImg.getHeight() - 1 - y, borderRgb); // Bottom border\n        }\n    }\n\n    for (int y = borderThickness; y &lt; targetImg.getHeight() - borderThickness; y++) {\n        for (int x = 0; x &lt; borderThickness; x++) {\n            targetImg.setRGB(x, y, borderRgb); // Left border\n            targetImg.setRGB(targetImg.getWidth() - 1 - x, y, borderRgb); // Right border\n        }\n    }\n    return targetImg;\n}\n</code></pre>\n<p><em>fyi: Using my super accurate, scientific measurement tools (insert sarcasm ), the <code>Graphics2D</code> approach is about 10 milliseconds faster then the <code>get/setRGB</code> approach - while not a massive difference, the size of the image will have an increasingly large impact on these results - for example, using a 1920x1080 source image, the <code>Graphics2D</code> approach took about 9 milliseconds, where as your code took about 203 milliseconds - again, these are &quot;observational&quot; differences, but <code>get/setRGB</code> is known for been slow</em></p>\n"}],"owner":{"account_id":29806391,"reputation":5,"user_id":22842900,"display_name":"KajSech"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":100,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":77434628,"answer_count":2,"score":0,"last_activity_date":1699334023,"creation_date":1699308524,"question_id":77434496,"body_markdown":"I am trying to create a method that will add a border to a BufferedImage where both border thickness and border color can be configurable by the parameters of the method.\r\n\r\nBorder thickness will be a non-negative integer (0, 1, 2, etc.) and corresponds to how many pixels thick the border should be on all four sides inside the perimeter of the image.\r\n\r\nBorder color is a length 3 integer array, corresponding to the RGB color value that the border should be.\r\n\r\nThis is the original image: [original image][1]\r\n\r\nThis is what the image should look like with a border of thickness 10 and RGB values 235, 64, 52: [resulting image][2]\r\n\r\nThis is the code I have but I keep running into an out-of-bounds error. [error][3]\r\n\r\nI would greatly appreciate any help. I also realize I can use Java&#39;s graphics tools to edit on top of the image but I&#39;m trying to edit the image itself and not create any kind of overlays.\r\n\r\n```\r\npublic static void applyBorder(BufferedImage img, int borderThickness, int[] borderColor) {\r\n    int width = img.getWidth();\r\n    int height = img.getHeight();\r\n    int borderRgb = (borderColor[0] &lt;&lt; 16) | (borderColor[1] &lt;&lt; 8) | borderColor[2];\r\n\r\n    for (int x = 0; x &lt; img.getWidth(); x++) {\r\n      for (int y = 0; y &lt; borderThickness; y++) {\r\n        img.setRGB(x, y, borderRgb); // Top border\r\n        img.setRGB(x, img.getHeight() - 1 - y, borderRgb); // Bottom border\r\n      }\r\n    }\r\n\r\n    for (int y = borderThickness; y &lt; img.getHeight() - borderThickness; y++) {\r\n      for (int x = 0; x &lt; borderThickness; x++) {\r\n        img.setRGB(x, y, borderRgb); // Left border\r\n        img.setRGB(img.getWidth() - 1 - x, y, borderRgb); // Right border\r\n      }\r\n    }\r\n\r\n    for (int x = 0; x &lt; width; x++) {\r\n      for (int y = 0; y &lt; height; y++) {\r\n        img.setRGB(x + borderThickness, y + borderThickness, img.getRGB(x, y));\r\n      }\r\n    }\r\n  }\r\n```\r\nThis is how I am calling the method in the main class:\r\n\r\n    int borderThickness = 10;\r\n    int[] borderColor = {255, 0, 0};\r\n    applyBorder(img, borderThickness, borderColor);\r\n    File fileBorder = new File(&quot;dog_border.png&quot;);\r\n    ImageIO.write(img, &quot;png&quot;, fileBorder);\r\n\r\n  [1]: https://i.stack.imgur.com/kdvs7.png\r\n  [2]: https://i.stack.imgur.com/JV8kh.png\r\n  [3]: https://i.stack.imgur.com/VthKA.png","title":"Editing the Border of a BufferedImage in Java","body":"<p>I am trying to create a method that will add a border to a BufferedImage where both border thickness and border color can be configurable by the parameters of the method.</p>\n<p>Border thickness will be a non-negative integer (0, 1, 2, etc.) and corresponds to how many pixels thick the border should be on all four sides inside the perimeter of the image.</p>\n<p>Border color is a length 3 integer array, corresponding to the RGB color value that the border should be.</p>\n<p>This is the original image: <a href=\"https://i.stack.imgur.com/kdvs7.png\" rel=\"nofollow noreferrer\">original image</a></p>\n<p>This is what the image should look like with a border of thickness 10 and RGB values 235, 64, 52: <a href=\"https://i.stack.imgur.com/JV8kh.png\" rel=\"nofollow noreferrer\">resulting image</a></p>\n<p>This is the code I have but I keep running into an out-of-bounds error. <a href=\"https://i.stack.imgur.com/VthKA.png\" rel=\"nofollow noreferrer\">error</a></p>\n<p>I would greatly appreciate any help. I also realize I can use Java's graphics tools to edit on top of the image but I'm trying to edit the image itself and not create any kind of overlays.</p>\n<pre><code>public static void applyBorder(BufferedImage img, int borderThickness, int[] borderColor) {\n    int width = img.getWidth();\n    int height = img.getHeight();\n    int borderRgb = (borderColor[0] &lt;&lt; 16) | (borderColor[1] &lt;&lt; 8) | borderColor[2];\n\n    for (int x = 0; x &lt; img.getWidth(); x++) {\n      for (int y = 0; y &lt; borderThickness; y++) {\n        img.setRGB(x, y, borderRgb); // Top border\n        img.setRGB(x, img.getHeight() - 1 - y, borderRgb); // Bottom border\n      }\n    }\n\n    for (int y = borderThickness; y &lt; img.getHeight() - borderThickness; y++) {\n      for (int x = 0; x &lt; borderThickness; x++) {\n        img.setRGB(x, y, borderRgb); // Left border\n        img.setRGB(img.getWidth() - 1 - x, y, borderRgb); // Right border\n      }\n    }\n\n    for (int x = 0; x &lt; width; x++) {\n      for (int y = 0; y &lt; height; y++) {\n        img.setRGB(x + borderThickness, y + borderThickness, img.getRGB(x, y));\n      }\n    }\n  }\n</code></pre>\n<p>This is how I am calling the method in the main class:</p>\n<pre><code>int borderThickness = 10;\nint[] borderColor = {255, 0, 0};\napplyBorder(img, borderThickness, borderColor);\nFile fileBorder = new File(&quot;dog_border.png&quot;);\nImageIO.write(img, &quot;png&quot;, fileBorder);\n</code></pre>\n"},{"tags":["java","multithreading","file","swing","sockets"],"comments":[{"owner":{"account_id":969721,"reputation":344508,"user_id":992484,"accept_rate":60,"display_name":"MadProgrammer"},"score":0,"creation_date":1699315024,"post_id":77434710,"comment_id":136513953,"body_markdown":"While you&#39;re making use of `SwingWorker`, you&#39;re still violating the threading rules of the Swing API.  Swing is NOT thread safe, you should not be modifying the UI or any state the UI relies on, from outside the context of the Event Dispatching Thread.  You should be making use of the `SwingWorker`&#39;s API support to either `publish`/`process` information of the running thread or returning a value from the `SwingWorker` which can be later retrieved, possibly through the use of a `PropertyChangeListener` and monitoring for the `DONE` state of the `SwingWorker`","body":"While you&#39;re making use of <code>SwingWorker</code>, you&#39;re still violating the threading rules of the Swing API.  Swing is NOT thread safe, you should not be modifying the UI or any state the UI relies on, from outside the context of the Event Dispatching Thread.  You should be making use of the <code>SwingWorker</code>&#39;s API support to either <code>publish</code>/<code>process</code> information of the running thread or returning a value from the <code>SwingWorker</code> which can be later retrieved, possibly through the use of a <code>PropertyChangeListener</code> and monitoring for the <code>DONE</code> state of the <code>SwingWorker</code>"},{"owner":{"account_id":969721,"reputation":344508,"user_id":992484,"accept_rate":60,"display_name":"MadProgrammer"},"score":1,"creation_date":1699315201,"post_id":77434710,"comment_id":136513967,"body_markdown":"As a example, your `listFiles` workflow shouldn&#39;t modifying the `listModel`.  This is a candidate for the `publish`/`process` workflow.  Your download and upload workflows should not be presenting file dialogs, these should be done either before or after the tasks have completed (ie download the file to a temp location and then prompt to the user where they&#39;d like to save it - or prompt before hand)","body":"As a example, your <code>listFiles</code> workflow shouldn&#39;t modifying the <code>listModel</code>.  This is a candidate for the <code>publish</code>/<code>process</code> workflow.  Your download and upload workflows should not be presenting file dialogs, these should be done either before or after the tasks have completed (ie download the file to a temp location and then prompt to the user where they&#39;d like to save it - or prompt before hand)"},{"owner":{"account_id":969721,"reputation":344508,"user_id":992484,"accept_rate":60,"display_name":"MadProgrammer"},"score":0,"creation_date":1699315264,"post_id":77434710,"comment_id":136513971,"body_markdown":"Personally, I would encapsulate the socket handling on the client its own class, but that&#39;s me","body":"Personally, I would encapsulate the socket handling on the client its own class, but that&#39;s me"},{"owner":{"account_id":969721,"reputation":344508,"user_id":992484,"accept_rate":60,"display_name":"MadProgrammer"},"score":2,"creation_date":1699316477,"post_id":77434710,"comment_id":136514075,"body_markdown":"The issue is, `DataInputStream#read` will never return `-1`, writing `-1` from the client will just result in the server receiving the value via the buffer - I would consider changing your approach slightly and instead first send the file size (in bytes) and then have the loop exit once it&#39;s successfully read that number of bytes, [for example](https://stackoverflow.com/questions/29047793/java-socket-file-transfer-files-dont-transfer-completely)","body":"The issue is, <code>DataInputStream#read</code> will never return <code>-1</code>, writing <code>-1</code> from the client will just result in the server receiving the value via the buffer - I would consider changing your approach slightly and instead first send the file size (in bytes) and then have the loop exit once it&#39;s successfully read that number of bytes, <a href=\"https://stackoverflow.com/questions/29047793/java-socket-file-transfer-files-dont-transfer-completely\">for example</a>"}],"answers":[{"tags":[],"owner":{"account_id":969721,"reputation":344508,"user_id":992484,"accept_rate":60,"display_name":"MadProgrammer"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1699333719,"creation_date":1699333719,"answer_id":77435684,"question_id":77434710,"body_markdown":"So, your primary issue is here...\r\n\r\n\t} else if (command.equals(&quot;upload&quot;)) {\r\n\t    String fileName = in.readUTF();\r\n\t    try (OutputStream fileOut = new FileOutputStream(FILE_DIRECTORY + fileName)) {\r\n\t        byte[] buffer = new byte[1024];\r\n\t        int bytesRead;\r\n\t        while ((bytesRead = in.read(buffer)) != -1) {\r\n\t            fileOut.write(buffer, 0, bytesRead);\r\n\t        }\r\n\t    }\r\n\t}\r\n\r\nSpecifically, `while ((bytesRead = in.read(buffer)) != -1) {`.  Unless you&#39;re going to close the stream at the other end, it&#39;s not possible to have `read` return `-1` - and writing `-1` at the other end just means that the server will return `-1` into the buffer.\r\n\r\nWhile there are a number of possible solutions, simplest is probably to send the file size as well and then ONLY read that number of bytes, for example...\r\n\r\n    } else if (command.equals(&quot;upload&quot;)) {\r\n        String fileName = in.readUTF();\r\n        long totalBytes = in.readLong();\r\n        try (OutputStream fileOut = new FileOutputStream(FILE_DIRECTORY + &quot;/&quot; + fileName)) {\r\n            byte[] buffer = new byte[1024];\r\n            long totalBytesRead = 0;\r\n            while (totalBytesRead &lt; totalBytes) {\r\n                int bytesRead = in.read(buffer, 0, (int)Math.min(1024, totalBytes - totalBytesRead));\r\n                totalBytesRead += bytesRead;\r\n                fileOut.write(buffer, 0, bytesRead);\r\n            }\r\n        }\r\n    }\r\n\r\nThis `int bytesRead = in.read(buffer, 0, (int)Math.min(1024, totalBytes - totalBytesRead));` is really important.  You don&#39;t want to read any more bytes then you&#39;re expecting, otherwise you will consume more data, like the next command.\r\n\r\n# All the &quot;other&quot; issues\r\n\r\nSwing is not thread safe, this means that you shouldn&#39;t be updating the UI or any state the UI relies on from outside the context of the Event Dispatching Thread.\r\n\r\nWhile testing your code, I run into a number of issue when listing the files because, while you execute the request in a `SwingWorker`, you continue to update the `ListModel` from the same background thread.\r\n\r\nInstead, you should be making use of the `publish`/`process` support to sync updates back to the EDT.\r\n\r\nThe following is a reimplementation focusing on fixing the threading issues.  It makes use delegation, observer pattern and single responsibility concepts, as such it makes use of the `Action` API and attempts to decouple the `SwingWorker` workflow into stand alone concepts.\r\n\r\nIt also encapsulates much of the client socket workflow into a self contained workflow, further decoupling the code.\r\n\r\n    import java.awt.BorderLayout;\r\n    import java.awt.Component;\r\n    import java.awt.event.ActionEvent;\r\n    import java.beans.PropertyChangeEvent;\r\n    import java.beans.PropertyChangeListener;\r\n    import java.io.File;\r\n    import java.io.IOException;\r\n    import java.net.Socket;\r\n    import java.util.ArrayList;\r\n    import java.util.List;\r\n    import javax.swing.AbstractAction;\r\n    import javax.swing.DefaultListModel;\r\n    import javax.swing.JButton;\r\n    import javax.swing.JFileChooser;\r\n    import javax.swing.JFrame;\r\n    import javax.swing.JList;\r\n    import javax.swing.JOptionPane;\r\n    import javax.swing.JPanel;\r\n    import javax.swing.JScrollPane;\r\n    import javax.swing.ListSelectionModel;\r\n    import javax.swing.SwingUtilities;\r\n    import javax.swing.SwingWorker;\r\n\r\n    public class FileClient extends JPanel {\r\n        private static final String SERVER_HOST = &quot;localhost&quot;;\r\n        private static final int SERVER_PORT = 12345;\r\n\r\n        private ClientSocketManager socketManager;\r\n\r\n        private JList&lt;String&gt; fileList;\r\n        private DefaultListModel&lt;String&gt; listModel;\r\n\r\n        public static void main(String[] args) {\r\n            try {\r\n                Socket socket = new Socket(SERVER_HOST, SERVER_PORT);\r\n                ClientSocketManager socketManager = new ClientSocketManager(socket);\r\n                SwingUtilities.invokeLater(new Runnable() {\r\n                    @Override\r\n                    public void run() {\r\n                        JFrame frame = new JFrame(&quot;File Client&quot;);\r\n                        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\r\n                        frame.add(new FileClient(socketManager));\r\n                        frame.pack();\r\n                        frame.setLocationRelativeTo(null);\r\n                        frame.setVisible(true);\r\n                    }\r\n                });\r\n            } catch (IOException e) {\r\n                e.printStackTrace();\r\n            }\r\n        }\r\n\r\n        public FileClient(ClientSocketManager socketManager) {\r\n            this.socketManager = socketManager;\r\n            setLayout(new BorderLayout());\r\n\r\n            listModel = new DefaultListModel&lt;&gt;();\r\n            fileList = new JList&lt;&gt;(listModel);\r\n            fileList.setSelectionMode(ListSelectionModel.SINGLE_SELECTION);\r\n            JScrollPane scrollPane = new JScrollPane(fileList);\r\n\r\n            JPanel panel = new JPanel();\r\n            JButton listButton = new JButton(new ListFilesAction(socketManager, listModel));\r\n            JButton downloadButton = new JButton(&quot;Download File&quot;);\r\n            JButton uploadButton = new JButton(new UploadFileAction(socketManager, listModel));\r\n\r\n            panel.add(listButton);\r\n            panel.add(downloadButton);\r\n            panel.add(uploadButton);\r\n\r\n            add(panel, BorderLayout.NORTH);\r\n            add(scrollPane, BorderLayout.CENTER);\r\n        }\r\n\r\n        protected class ListFilesAction extends AbstractAction {\r\n            private DefaultListModel&lt;String&gt; listModel;\r\n            private ClientSocketManager socketManager;\r\n\r\n            public ListFilesAction(ClientSocketManager socketManager, DefaultListModel&lt;String&gt; listModel) {\r\n                putValue(NAME, &quot;List Files&quot;);\r\n                this.listModel = listModel;\r\n                this.socketManager = socketManager;\r\n            }\r\n\r\n            @Override\r\n            public void actionPerformed(ActionEvent e) {\r\n                ListFilesWorker worker = new ListFilesWorker(socketManager, listModel);\r\n                worker.addObserver(new AbstractObservableSwingWorker.DefaultObserver&lt;&gt;() {\r\n                    @Override\r\n                    public void didStart(AbstractObservableSwingWorker&lt;Void, String&gt; source) {\r\n                        listModel.clear();\r\n                        setEnabled(false);\r\n                    }\r\n\r\n                    @Override\r\n                    public void didComplete(AbstractObservableSwingWorker&lt;Void, String&gt; source) {\r\n                        setEnabled(true);\r\n                        try {\r\n                            source.get();\r\n                        } catch (Exception exp) {\r\n                            exp.printStackTrace();\r\n                            if (!(e.getSource() instanceof Component)) {\r\n                                return;\r\n                            }\r\n                            JOptionPane.showMessageDialog((Component) e.getSource(), &quot;Failed to list files from server due to an error&quot;, &quot;Error&quot;, JOptionPane.ERROR_MESSAGE);\r\n                        }\r\n                    }\r\n                });\r\n                worker.execute();\r\n            }\r\n        }\r\n\r\n        protected class UploadFileAction extends AbstractAction {\r\n            private ClientSocketManager socketManager;\r\n            private DefaultListModel&lt;String&gt; listModel;\r\n\r\n            public UploadFileAction(ClientSocketManager socketManager, DefaultListModel&lt;String&gt; listModel) {\r\n                putValue(NAME, &quot;Upload File&quot;);\r\n                this.socketManager = socketManager;\r\n                this.listModel = listModel;\r\n            }\r\n\r\n            @Override\r\n            public void actionPerformed(ActionEvent e) {\r\n                JFileChooser fileChooser = new JFileChooser();\r\n                Component parent = null;\r\n                if (e.getSource() instanceof Component) {\r\n                    parent = (Component) e.getSource();\r\n                }\r\n\r\n                if (fileChooser.showOpenDialog(parent) == JFileChooser.CANCEL_OPTION) {\r\n                    return;\r\n                }\r\n                File selectedFile = fileChooser.getSelectedFile();\r\n                if (selectedFile == null) {\r\n                    return;\r\n                }\r\n                UploadFileWorker worker = new UploadFileWorker(socketManager, selectedFile, listModel);\r\n                worker.addObserver(new AbstractObservableSwingWorker.DefaultObserver&lt;Void, String&gt;() {\r\n                    @Override\r\n                    public void didStart(AbstractObservableSwingWorker&lt;Void, String&gt; source) {\r\n                        setEnabled(false);\r\n                    }\r\n\r\n                    @Override\r\n                    public void didComplete(AbstractObservableSwingWorker&lt;Void, String&gt; source) {\r\n                        setEnabled(true);\r\n                        Component parent = null;\r\n                        if (e.getSource() instanceof Component) {\r\n                            parent = (Component) e.getSource();\r\n                        }\r\n                        try {\r\n                            source.get();\r\n                            JOptionPane.showMessageDialog(parent, &quot;File uploaded successfully&quot;, &quot;Success&quot;, JOptionPane.INFORMATION_MESSAGE);\r\n                        } catch (Exception exp) {\r\n                            exp.printStackTrace();\r\n                            JOptionPane.showMessageDialog(parent, &quot;File uploaded failed&quot;, &quot;Error&quot;, JOptionPane.ERROR_MESSAGE);\r\n                        }\r\n                    }\r\n                });\r\n                worker.execute();\r\n            }\r\n        }\r\n\r\n        protected class ListFilesWorker extends AbstractObservableSwingWorker&lt;Void, String&gt; {\r\n            private ClientSocketManager socketManager;\r\n            private DefaultListModel&lt;String&gt; listModel;\r\n\r\n            public ListFilesWorker(ClientSocketManager socketManager, DefaultListModel&lt;String&gt; listModel) {\r\n                this.socketManager = socketManager;\r\n                this.listModel = listModel;\r\n            }\r\n\r\n            @Override\r\n            protected Void doInBackground() throws Exception {\r\n                socketManager.listFiles(new ClientSocketManager.FileListObserver() {\r\n                    @Override\r\n                    public void didRecieveFileName(String name) {\r\n                        publish(name);\r\n                    }\r\n                });\r\n                return null;\r\n            }\r\n\r\n            @Override\r\n            protected void process(List&lt;String&gt; chunks) {\r\n                listModel.addAll(chunks);\r\n            }\r\n\r\n            public ClientSocketManager getSocketManager() {\r\n                return socketManager;\r\n            }\r\n\r\n            public DefaultListModel&lt;String&gt; getListModel() {\r\n                return listModel;\r\n            }\r\n        }\r\n\r\n        protected class UploadFileWorker extends ListFilesWorker {\r\n            private File file;\r\n\r\n            public UploadFileWorker(ClientSocketManager socketManager, File file, DefaultListModel&lt;String&gt; listModel) {\r\n                super(socketManager, listModel);\r\n                this.file = file;\r\n            }\r\n\r\n            @Override\r\n            protected Void doInBackground() throws Exception {\r\n                getSocketManager().uploadFile(file);\r\n                return super.doInBackground();\r\n            }\r\n        }\r\n\r\n        public abstract class AbstractObservableSwingWorker&lt;T, V&gt; extends SwingWorker&lt;T, V&gt; {\r\n            public interface Observer&lt;T, V&gt; {\r\n                public void didStart(AbstractObservableSwingWorker&lt;T, V&gt; source);\r\n\r\n                public void didComplete(AbstractObservableSwingWorker&lt;T, V&gt; source);\r\n\r\n                public void progressDidChange(AbstractObservableSwingWorker&lt;T, V&gt; source, int progress);\r\n            }\r\n\r\n            public static class DefaultObserver&lt;T, V&gt; implements Observer&lt;T, V&gt; {\r\n                @Override\r\n                public void didStart(AbstractObservableSwingWorker&lt;T, V&gt; source) {\r\n                }\r\n\r\n                @Override\r\n                public void didComplete(AbstractObservableSwingWorker&lt;T, V&gt; source) {\r\n                }\r\n\r\n                @Override\r\n                public void progressDidChange(AbstractObservableSwingWorker&lt;T, V&gt; source, int progress) {\r\n                }\r\n            }\r\n\r\n            private List&lt;Observer&lt;T, V&gt;&gt; listeners;\r\n\r\n            public AbstractObservableSwingWorker() {\r\n                this.listeners = new ArrayList&lt;&gt;();\r\n\r\n                addPropertyChangeListener(new PropertyChangeListener() {\r\n                    @Override\r\n                    public void propertyChange(PropertyChangeEvent evt) {\r\n                        Object value = evt.getNewValue();\r\n                        String propertyName = evt.getPropertyName();\r\n                        if (&quot;state&quot;.equals(propertyName) &amp;&amp; value instanceof SwingWorker.StateValue) {\r\n                            SwingWorker.StateValue state = (SwingWorker.StateValue) value;\r\n                            if (state == SwingWorker.StateValue.DONE) {\r\n                                fireDidComplete();\r\n                            } else if (state == SwingWorker.StateValue.STARTED) {\r\n                                fireDidStart();\r\n                            }\r\n                        } else if (&quot;progress&quot;.equals(propertyName) &amp;&amp; value instanceof Integer) {\r\n                            int progress = (int) value;\r\n                            fireProgressDidChange(progress);\r\n                        }\r\n                    }\r\n                });\r\n            }\r\n\r\n            public void addObserver(Observer&lt;T, V&gt; observer) {\r\n                listeners.add(observer);\r\n            }\r\n\r\n            public void removeObserver(Observer&lt;T, V&gt; observer) {\r\n                listeners.add(observer);\r\n            }\r\n\r\n            protected void fireDidComplete() {\r\n                if (listeners.isEmpty()) {\r\n                    return;\r\n                }\r\n                for (Observer observer : listeners) {\r\n                    observer.didComplete(this);\r\n                }\r\n            }\r\n\r\n            protected void fireDidStart() {\r\n                if (listeners.isEmpty()) {\r\n                    return;\r\n                }\r\n                for (Observer observer : listeners) {\r\n                    observer.didStart(this);\r\n                }\r\n            }\r\n\r\n            protected void fireProgressDidChange(int progress) {\r\n                if (listeners.isEmpty()) {\r\n                    return;\r\n                }\r\n                for (Observer observer : listeners) {\r\n                    observer.progressDidChange(this, progress);\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n## `ClientSocketManager`\r\n\r\n\r\nimport java.io.BufferedInputStream;\r\nimport java.io.Closeable;\r\nimport java.io.DataInputStream;\r\nimport java.io.DataOutputStream;\r\nimport java.io.File;\r\nimport java.io.FileInputStream;\r\nimport java.io.IOException;\r\nimport java.net.Socket;\r\nimport java.util.ArrayList;\r\nimport java.util.List;\r\n\r\npublic class ClientSocketManager implements Closeable {\r\n    private Socket socket;\r\n    private DataInputStream dis;\r\n    private DataOutputStream dos;\r\n    \r\n    public interface FileListObserver {\r\n        public void didRecieveFileName(String name);\r\n    }\r\n\r\n    public ClientSocketManager(Socket socket) throws IOException {\r\n        this.socket = socket;\r\n        dis = new DataInputStream(socket.getInputStream());\r\n        dos = new DataOutputStream(socket.getOutputStream());\r\n    }\r\n\r\n    @Override\r\n    public void close() throws IOException {\r\n        try {\r\n            dis.close();\r\n        } catch (IOException exp) {\r\n        }\r\n        try {\r\n            dos.close();\r\n        } catch (IOException exp) {\r\n        }\r\n        socket.close();\r\n    }\r\n\r\n    public List&lt;String&gt; listFiles(FileListObserver observer) throws IOException {\r\n        dos.writeUTF(&quot;list&quot;);\r\n        int numFiles = dis.readInt();\r\n        List&lt;String&gt; files = new ArrayList&lt;&gt;(numFiles);\r\n        for (int i = 0; i &lt; numFiles; i++) {\r\n            String fileName = dis.readUTF();\r\n            files.add(fileName);\r\n            if (observer != null) {\r\n                observer.didRecieveFileName(fileName);\r\n            }\r\n        }\r\n        return files;\r\n    }\r\n    \r\n    public void uploadFile(File file) throws IOException {\r\n        dos.writeUTF(&quot;upload&quot;);\r\n        dos.writeUTF(file.getName());\r\n        dos.writeLong(file.length());\r\n\r\n        try (BufferedInputStream fileIn = new BufferedInputStream(new FileInputStream(file))) {\r\n            byte[] buffer = new byte[1024];\r\n            int bytesRead;\r\n            while ((bytesRead = fileIn.read(buffer)) != -1) {\r\n                dos.write(buffer, 0, bytesRead);\r\n            }\r\n        }\r\n        dos.flush();\r\n    }\r\n}\r\n\r\nHave a look at [Worker Threads and SwingWorker](https://docs.oracle.com/javase/tutorial/uiswing/concurrency/worker.html) and [How to Use Actions](https://docs.oracle.com/javase/tutorial/uiswing/misc/action.html) for some more details","title":"Java Socket Multithread File Transfer getting stuck after upload","body":"<p>So, your primary issue is here...</p>\n<pre><code>} else if (command.equals(&quot;upload&quot;)) {\n    String fileName = in.readUTF();\n    try (OutputStream fileOut = new FileOutputStream(FILE_DIRECTORY + fileName)) {\n        byte[] buffer = new byte[1024];\n        int bytesRead;\n        while ((bytesRead = in.read(buffer)) != -1) {\n            fileOut.write(buffer, 0, bytesRead);\n        }\n    }\n}\n</code></pre>\n<p>Specifically, <code>while ((bytesRead = in.read(buffer)) != -1) {</code>.  Unless you're going to close the stream at the other end, it's not possible to have <code>read</code> return <code>-1</code> - and writing <code>-1</code> at the other end just means that the server will return <code>-1</code> into the buffer.</p>\n<p>While there are a number of possible solutions, simplest is probably to send the file size as well and then ONLY read that number of bytes, for example...</p>\n<pre><code>} else if (command.equals(&quot;upload&quot;)) {\n    String fileName = in.readUTF();\n    long totalBytes = in.readLong();\n    try (OutputStream fileOut = new FileOutputStream(FILE_DIRECTORY + &quot;/&quot; + fileName)) {\n        byte[] buffer = new byte[1024];\n        long totalBytesRead = 0;\n        while (totalBytesRead &lt; totalBytes) {\n            int bytesRead = in.read(buffer, 0, (int)Math.min(1024, totalBytes - totalBytesRead));\n            totalBytesRead += bytesRead;\n            fileOut.write(buffer, 0, bytesRead);\n        }\n    }\n}\n</code></pre>\n<p>This <code>int bytesRead = in.read(buffer, 0, (int)Math.min(1024, totalBytes - totalBytesRead));</code> is really important.  You don't want to read any more bytes then you're expecting, otherwise you will consume more data, like the next command.</p>\n<h1>All the &quot;other&quot; issues</h1>\n<p>Swing is not thread safe, this means that you shouldn't be updating the UI or any state the UI relies on from outside the context of the Event Dispatching Thread.</p>\n<p>While testing your code, I run into a number of issue when listing the files because, while you execute the request in a <code>SwingWorker</code>, you continue to update the <code>ListModel</code> from the same background thread.</p>\n<p>Instead, you should be making use of the <code>publish</code>/<code>process</code> support to sync updates back to the EDT.</p>\n<p>The following is a reimplementation focusing on fixing the threading issues.  It makes use delegation, observer pattern and single responsibility concepts, as such it makes use of the <code>Action</code> API and attempts to decouple the <code>SwingWorker</code> workflow into stand alone concepts.</p>\n<p>It also encapsulates much of the client socket workflow into a self contained workflow, further decoupling the code.</p>\n<pre><code>import java.awt.BorderLayout;\nimport java.awt.Component;\nimport java.awt.event.ActionEvent;\nimport java.beans.PropertyChangeEvent;\nimport java.beans.PropertyChangeListener;\nimport java.io.File;\nimport java.io.IOException;\nimport java.net.Socket;\nimport java.util.ArrayList;\nimport java.util.List;\nimport javax.swing.AbstractAction;\nimport javax.swing.DefaultListModel;\nimport javax.swing.JButton;\nimport javax.swing.JFileChooser;\nimport javax.swing.JFrame;\nimport javax.swing.JList;\nimport javax.swing.JOptionPane;\nimport javax.swing.JPanel;\nimport javax.swing.JScrollPane;\nimport javax.swing.ListSelectionModel;\nimport javax.swing.SwingUtilities;\nimport javax.swing.SwingWorker;\n\npublic class FileClient extends JPanel {\n    private static final String SERVER_HOST = &quot;localhost&quot;;\n    private static final int SERVER_PORT = 12345;\n\n    private ClientSocketManager socketManager;\n\n    private JList&lt;String&gt; fileList;\n    private DefaultListModel&lt;String&gt; listModel;\n\n    public static void main(String[] args) {\n        try {\n            Socket socket = new Socket(SERVER_HOST, SERVER_PORT);\n            ClientSocketManager socketManager = new ClientSocketManager(socket);\n            SwingUtilities.invokeLater(new Runnable() {\n                @Override\n                public void run() {\n                    JFrame frame = new JFrame(&quot;File Client&quot;);\n                    frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\n                    frame.add(new FileClient(socketManager));\n                    frame.pack();\n                    frame.setLocationRelativeTo(null);\n                    frame.setVisible(true);\n                }\n            });\n        } catch (IOException e) {\n            e.printStackTrace();\n        }\n    }\n\n    public FileClient(ClientSocketManager socketManager) {\n        this.socketManager = socketManager;\n        setLayout(new BorderLayout());\n\n        listModel = new DefaultListModel&lt;&gt;();\n        fileList = new JList&lt;&gt;(listModel);\n        fileList.setSelectionMode(ListSelectionModel.SINGLE_SELECTION);\n        JScrollPane scrollPane = new JScrollPane(fileList);\n\n        JPanel panel = new JPanel();\n        JButton listButton = new JButton(new ListFilesAction(socketManager, listModel));\n        JButton downloadButton = new JButton(&quot;Download File&quot;);\n        JButton uploadButton = new JButton(new UploadFileAction(socketManager, listModel));\n\n        panel.add(listButton);\n        panel.add(downloadButton);\n        panel.add(uploadButton);\n\n        add(panel, BorderLayout.NORTH);\n        add(scrollPane, BorderLayout.CENTER);\n    }\n\n    protected class ListFilesAction extends AbstractAction {\n        private DefaultListModel&lt;String&gt; listModel;\n        private ClientSocketManager socketManager;\n\n        public ListFilesAction(ClientSocketManager socketManager, DefaultListModel&lt;String&gt; listModel) {\n            putValue(NAME, &quot;List Files&quot;);\n            this.listModel = listModel;\n            this.socketManager = socketManager;\n        }\n\n        @Override\n        public void actionPerformed(ActionEvent e) {\n            ListFilesWorker worker = new ListFilesWorker(socketManager, listModel);\n            worker.addObserver(new AbstractObservableSwingWorker.DefaultObserver&lt;&gt;() {\n                @Override\n                public void didStart(AbstractObservableSwingWorker&lt;Void, String&gt; source) {\n                    listModel.clear();\n                    setEnabled(false);\n                }\n\n                @Override\n                public void didComplete(AbstractObservableSwingWorker&lt;Void, String&gt; source) {\n                    setEnabled(true);\n                    try {\n                        source.get();\n                    } catch (Exception exp) {\n                        exp.printStackTrace();\n                        if (!(e.getSource() instanceof Component)) {\n                            return;\n                        }\n                        JOptionPane.showMessageDialog((Component) e.getSource(), &quot;Failed to list files from server due to an error&quot;, &quot;Error&quot;, JOptionPane.ERROR_MESSAGE);\n                    }\n                }\n            });\n            worker.execute();\n        }\n    }\n\n    protected class UploadFileAction extends AbstractAction {\n        private ClientSocketManager socketManager;\n        private DefaultListModel&lt;String&gt; listModel;\n\n        public UploadFileAction(ClientSocketManager socketManager, DefaultListModel&lt;String&gt; listModel) {\n            putValue(NAME, &quot;Upload File&quot;);\n            this.socketManager = socketManager;\n            this.listModel = listModel;\n        }\n\n        @Override\n        public void actionPerformed(ActionEvent e) {\n            JFileChooser fileChooser = new JFileChooser();\n            Component parent = null;\n            if (e.getSource() instanceof Component) {\n                parent = (Component) e.getSource();\n            }\n\n            if (fileChooser.showOpenDialog(parent) == JFileChooser.CANCEL_OPTION) {\n                return;\n            }\n            File selectedFile = fileChooser.getSelectedFile();\n            if (selectedFile == null) {\n                return;\n            }\n            UploadFileWorker worker = new UploadFileWorker(socketManager, selectedFile, listModel);\n            worker.addObserver(new AbstractObservableSwingWorker.DefaultObserver&lt;Void, String&gt;() {\n                @Override\n                public void didStart(AbstractObservableSwingWorker&lt;Void, String&gt; source) {\n                    setEnabled(false);\n                }\n\n                @Override\n                public void didComplete(AbstractObservableSwingWorker&lt;Void, String&gt; source) {\n                    setEnabled(true);\n                    Component parent = null;\n                    if (e.getSource() instanceof Component) {\n                        parent = (Component) e.getSource();\n                    }\n                    try {\n                        source.get();\n                        JOptionPane.showMessageDialog(parent, &quot;File uploaded successfully&quot;, &quot;Success&quot;, JOptionPane.INFORMATION_MESSAGE);\n                    } catch (Exception exp) {\n                        exp.printStackTrace();\n                        JOptionPane.showMessageDialog(parent, &quot;File uploaded failed&quot;, &quot;Error&quot;, JOptionPane.ERROR_MESSAGE);\n                    }\n                }\n            });\n            worker.execute();\n        }\n    }\n\n    protected class ListFilesWorker extends AbstractObservableSwingWorker&lt;Void, String&gt; {\n        private ClientSocketManager socketManager;\n        private DefaultListModel&lt;String&gt; listModel;\n\n        public ListFilesWorker(ClientSocketManager socketManager, DefaultListModel&lt;String&gt; listModel) {\n            this.socketManager = socketManager;\n            this.listModel = listModel;\n        }\n\n        @Override\n        protected Void doInBackground() throws Exception {\n            socketManager.listFiles(new ClientSocketManager.FileListObserver() {\n                @Override\n                public void didRecieveFileName(String name) {\n                    publish(name);\n                }\n            });\n            return null;\n        }\n\n        @Override\n        protected void process(List&lt;String&gt; chunks) {\n            listModel.addAll(chunks);\n        }\n\n        public ClientSocketManager getSocketManager() {\n            return socketManager;\n        }\n\n        public DefaultListModel&lt;String&gt; getListModel() {\n            return listModel;\n        }\n    }\n\n    protected class UploadFileWorker extends ListFilesWorker {\n        private File file;\n\n        public UploadFileWorker(ClientSocketManager socketManager, File file, DefaultListModel&lt;String&gt; listModel) {\n            super(socketManager, listModel);\n            this.file = file;\n        }\n\n        @Override\n        protected Void doInBackground() throws Exception {\n            getSocketManager().uploadFile(file);\n            return super.doInBackground();\n        }\n    }\n\n    public abstract class AbstractObservableSwingWorker&lt;T, V&gt; extends SwingWorker&lt;T, V&gt; {\n        public interface Observer&lt;T, V&gt; {\n            public void didStart(AbstractObservableSwingWorker&lt;T, V&gt; source);\n\n            public void didComplete(AbstractObservableSwingWorker&lt;T, V&gt; source);\n\n            public void progressDidChange(AbstractObservableSwingWorker&lt;T, V&gt; source, int progress);\n        }\n\n        public static class DefaultObserver&lt;T, V&gt; implements Observer&lt;T, V&gt; {\n            @Override\n            public void didStart(AbstractObservableSwingWorker&lt;T, V&gt; source) {\n            }\n\n            @Override\n            public void didComplete(AbstractObservableSwingWorker&lt;T, V&gt; source) {\n            }\n\n            @Override\n            public void progressDidChange(AbstractObservableSwingWorker&lt;T, V&gt; source, int progress) {\n            }\n        }\n\n        private List&lt;Observer&lt;T, V&gt;&gt; listeners;\n\n        public AbstractObservableSwingWorker() {\n            this.listeners = new ArrayList&lt;&gt;();\n\n            addPropertyChangeListener(new PropertyChangeListener() {\n                @Override\n                public void propertyChange(PropertyChangeEvent evt) {\n                    Object value = evt.getNewValue();\n                    String propertyName = evt.getPropertyName();\n                    if (&quot;state&quot;.equals(propertyName) &amp;&amp; value instanceof SwingWorker.StateValue) {\n                        SwingWorker.StateValue state = (SwingWorker.StateValue) value;\n                        if (state == SwingWorker.StateValue.DONE) {\n                            fireDidComplete();\n                        } else if (state == SwingWorker.StateValue.STARTED) {\n                            fireDidStart();\n                        }\n                    } else if (&quot;progress&quot;.equals(propertyName) &amp;&amp; value instanceof Integer) {\n                        int progress = (int) value;\n                        fireProgressDidChange(progress);\n                    }\n                }\n            });\n        }\n\n        public void addObserver(Observer&lt;T, V&gt; observer) {\n            listeners.add(observer);\n        }\n\n        public void removeObserver(Observer&lt;T, V&gt; observer) {\n            listeners.add(observer);\n        }\n\n        protected void fireDidComplete() {\n            if (listeners.isEmpty()) {\n                return;\n            }\n            for (Observer observer : listeners) {\n                observer.didComplete(this);\n            }\n        }\n\n        protected void fireDidStart() {\n            if (listeners.isEmpty()) {\n                return;\n            }\n            for (Observer observer : listeners) {\n                observer.didStart(this);\n            }\n        }\n\n        protected void fireProgressDidChange(int progress) {\n            if (listeners.isEmpty()) {\n                return;\n            }\n            for (Observer observer : listeners) {\n                observer.progressDidChange(this, progress);\n            }\n        }\n    }\n}\n</code></pre>\n<h2><code>ClientSocketManager</code></h2>\n<p>import java.io.BufferedInputStream;\nimport java.io.Closeable;\nimport java.io.DataInputStream;\nimport java.io.DataOutputStream;\nimport java.io.File;\nimport java.io.FileInputStream;\nimport java.io.IOException;\nimport java.net.Socket;\nimport java.util.ArrayList;\nimport java.util.List;</p>\n<p>public class ClientSocketManager implements Closeable {\nprivate Socket socket;\nprivate DataInputStream dis;\nprivate DataOutputStream dos;</p>\n<pre><code>public interface FileListObserver {\n    public void didRecieveFileName(String name);\n}\n\npublic ClientSocketManager(Socket socket) throws IOException {\n    this.socket = socket;\n    dis = new DataInputStream(socket.getInputStream());\n    dos = new DataOutputStream(socket.getOutputStream());\n}\n\n@Override\npublic void close() throws IOException {\n    try {\n        dis.close();\n    } catch (IOException exp) {\n    }\n    try {\n        dos.close();\n    } catch (IOException exp) {\n    }\n    socket.close();\n}\n\npublic List&lt;String&gt; listFiles(FileListObserver observer) throws IOException {\n    dos.writeUTF(&quot;list&quot;);\n    int numFiles = dis.readInt();\n    List&lt;String&gt; files = new ArrayList&lt;&gt;(numFiles);\n    for (int i = 0; i &lt; numFiles; i++) {\n        String fileName = dis.readUTF();\n        files.add(fileName);\n        if (observer != null) {\n            observer.didRecieveFileName(fileName);\n        }\n    }\n    return files;\n}\n\npublic void uploadFile(File file) throws IOException {\n    dos.writeUTF(&quot;upload&quot;);\n    dos.writeUTF(file.getName());\n    dos.writeLong(file.length());\n\n    try (BufferedInputStream fileIn = new BufferedInputStream(new FileInputStream(file))) {\n        byte[] buffer = new byte[1024];\n        int bytesRead;\n        while ((bytesRead = fileIn.read(buffer)) != -1) {\n            dos.write(buffer, 0, bytesRead);\n        }\n    }\n    dos.flush();\n}\n</code></pre>\n<p>}</p>\n<p>Have a look at <a href=\"https://docs.oracle.com/javase/tutorial/uiswing/concurrency/worker.html\" rel=\"nofollow noreferrer\">Worker Threads and SwingWorker</a> and <a href=\"https://docs.oracle.com/javase/tutorial/uiswing/misc/action.html\" rel=\"nofollow noreferrer\">How to Use Actions</a> for some more details</p>\n"}],"owner":{"account_id":23960555,"reputation":71,"user_id":19655391,"display_name":"Carlos Curcino"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":43,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":77435684,"answer_count":1,"score":0,"last_activity_date":1699333719,"creation_date":1699312250,"question_id":77434710,"body_markdown":"I&#39;ve had implemented a server-client program using Java Socket and multithreading. The programm allow the clients to send files to server, list files and download that files. But I&#39;m having an issue, when my client upload a file the programm/gui get stuck and the client can&#39;t do none of the operations. Can&#39;t lis, download or upload. But the file is sendend correctly to the server. Anyone know what&#39;s happening??\r\n\r\n\r\nMy Client\r\n```\r\nimport javax.swing.*;\r\nimport java.awt.*;\r\nimport java.awt.event.ActionEvent;\r\nimport java.awt.event.ActionListener;\r\nimport java.io.*;\r\nimport java.net.Socket;\r\nimport java.util.ArrayList;\r\nimport java.util.List;\r\n\r\npublic class FileClient {\r\n    private static final String SERVER_HOST = &quot;localhost&quot;;\r\n    private static final int SERVER_PORT = 12345;\r\n\r\n    private static Socket socket;\r\n    private static DataInputStream in;\r\n    private static DataOutputStream out;\r\n\r\n    private static JList&lt;String&gt; fileList;\r\n    private static DefaultListModel&lt;String&gt; listModel;\r\n\r\n    public static void main(String[] args) {\r\n        try {\r\n            socket = new Socket(SERVER_HOST, SERVER_PORT);\r\n            out = new DataOutputStream(socket.getOutputStream());\r\n            in = new DataInputStream(socket.getInputStream());\r\n\r\n            JFrame frame = new JFrame(&quot;File Client&quot;);\r\n            frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\r\n            frame.setSize(400, 400);\r\n\r\n            JPanel panel = new JPanel();\r\n            JButton listButton = new JButton(&quot;List Files&quot;);\r\n            JButton downloadButton = new JButton(&quot;Download File&quot;);\r\n            JButton uploadButton = new JButton(&quot;Upload File&quot;);\r\n\r\n            listModel = new DefaultListModel&lt;&gt;();\r\n            fileList = new JList&lt;&gt;(listModel);\r\n            fileList.setSelectionMode(ListSelectionModel.SINGLE_SELECTION);\r\n            JScrollPane scrollPane = new JScrollPane(fileList);\r\n\r\n            listButton.addActionListener(new ActionListener() {\r\n                @Override\r\n                public void actionPerformed(ActionEvent e) {\r\n                    // Execute a opera&#231;&#227;o de listagem em uma thread separada\r\n                    SwingWorker&lt;Void, Void&gt; listWorker = new SwingWorker&lt;Void, Void&gt;() {\r\n                        @Override\r\n                        protected Void doInBackground() throws Exception {\r\n                            listFiles();\r\n                            return null;\r\n                        }\r\n                    };\r\n                    listWorker.execute();\r\n                }\r\n            });\r\n\r\n            downloadButton.addActionListener(new ActionListener() {\r\n                @Override\r\n                public void actionPerformed(ActionEvent e) {\r\n                    // Execute a opera&#231;&#227;o de download em uma thread separada\r\n                    SwingWorker&lt;Void, Void&gt; downloadWorker = new SwingWorker&lt;Void, Void&gt;() {\r\n                        @Override\r\n                        protected Void doInBackground() throws Exception {\r\n                            downloadFile();\r\n                            return null;\r\n                        }\r\n                    };\r\n                    downloadWorker.execute();\r\n                }\r\n            });\r\n\r\n            uploadButton.addActionListener(new ActionListener() {\r\n                @Override\r\n                public void actionPerformed(ActionEvent e) {\r\n                    // Execute a opera&#231;&#227;o de upload em uma thread separada\r\n                    SwingWorker&lt;Void, Void&gt; uploadWorker = new SwingWorker&lt;Void, Void&gt;() {\r\n                        @Override\r\n                        protected Void doInBackground() throws Exception {\r\n                            uploadFile();\r\n                            return null;\r\n                        }\r\n                    };\r\n                    uploadWorker.execute();\r\n                }\r\n            });\r\n\r\n            panel.add(listButton);\r\n            panel.add(downloadButton);\r\n            panel.add(uploadButton);\r\n\r\n            frame.add(panel, BorderLayout.NORTH);\r\n            frame.add(scrollPane, BorderLayout.CENTER);\r\n            frame.setVisible(true);\r\n        } catch (IOException e) {\r\n            e.printStackTrace();\r\n        }\r\n    }\r\n\r\n    private static void listFiles() {\r\n        try {\r\n            out.writeUTF(&quot;list&quot;);\r\n            int numFiles = in.readInt();\r\n            List&lt;String&gt; files = new ArrayList&lt;&gt;();\r\n            for (int i = 0; i &lt; numFiles; i++) {\r\n                String fileName = in.readUTF();\r\n                files.add(fileName);\r\n            }\r\n            listModel.clear();\r\n            for (String file : files) {\r\n                listModel.addElement(file);\r\n            }\r\n        } catch (IOException e) {\r\n            e.printStackTrace();\r\n        }\r\n    }\r\n\r\n    private static void downloadFile() {\r\n        String selectedFile = fileList.getSelectedValue();\r\n        if (selectedFile != null) {\r\n            try {\r\n                out.writeUTF(&quot;download&quot;);\r\n                out.writeUTF(selectedFile);\r\n\r\n                String response = in.readUTF();\r\n                if (response.equals(&quot;exists&quot;)) {\r\n                    JFileChooser fileChooser = new JFileChooser();\r\n                    fileChooser.setSelectedFile(new File(selectedFile));\r\n                    int returnVal = fileChooser.showSaveDialog(null);\r\n\r\n                    if (returnVal == JFileChooser.APPROVE_OPTION) {\r\n                        File savedFile = fileChooser.getSelectedFile();\r\n                        try (OutputStream fileOut = new FileOutputStream(savedFile)) {\r\n                            long fileSize = in.readLong();\r\n                            byte[] buffer = new byte[1024];\r\n                            int bytesRead;\r\n                            long totalBytesRead = 0;\r\n                            while (totalBytesRead &lt; fileSize) {\r\n                                bytesRead = in.read(buffer, 0, (int) Math.min(1024, fileSize - totalBytesRead));\r\n                                if (bytesRead == -1) {\r\n                                    break;\r\n                                }\r\n                                fileOut.write(buffer, 0, bytesRead);\r\n                                totalBytesRead += bytesRead;\r\n                            }\r\n                        }\r\n                        JOptionPane.showMessageDialog(null, &quot;File downloaded successfully.&quot;);\r\n                    }\r\n                } else if (response.equals(&quot;not_found&quot;)) {\r\n                    JOptionPane.showMessageDialog(null, &quot;File not found on the server.&quot;);\r\n                }\r\n            } catch (IOException e) {\r\n                e.printStackTrace();\r\n            }\r\n        }\r\n    }\r\n\r\n    private static void uploadFile() {\r\n        JFileChooser fileChooser = new JFileChooser();\r\n        int returnVal = fileChooser.showOpenDialog(null);\r\n        if (returnVal == JFileChooser.APPROVE_OPTION) {\r\n            File selectedFile = fileChooser.getSelectedFile();\r\n            try {\r\n                out.writeUTF(&quot;upload&quot;);\r\n                out.writeUTF(selectedFile.getName());\r\n\r\n                try (BufferedInputStream fileIn = new BufferedInputStream(new FileInputStream(selectedFile))) {\r\n                    byte[] buffer = new byte[1024];\r\n                    int bytesRead;\r\n                    while ((bytesRead = fileIn.read(buffer)) != -1) {\r\n                        out.write(buffer, 0, bytesRead);\r\n                    }\r\n                }\r\n                // Indique o t&#233;rmino do envio de arquivo\r\n                out.writeLong(-1); // -1 para indicar o fim do arquivo\r\n                JOptionPane.showMessageDialog(null, &quot;File uploaded successfully.&quot;);\r\n\r\n                // Ap&#243;s o upload bem-sucedido, atualize a lista de arquivos\r\n                listFiles();\r\n            } catch (IOException e) {\r\n                e.printStackTrace();\r\n            }\r\n        }\r\n    }\r\n\r\n}\r\n```\r\n\r\nMy Server:\r\n```\r\nimport java.io.*;\r\nimport java.net.*;\r\nimport java.util.concurrent.ExecutorService;\r\nimport java.util.concurrent.Executors;\r\n\r\npublic class FileServer {\r\n    private static final int PORT = 12345;\r\n    private static final String FILE_DIRECTORY = &quot;C:\\\\Users\\\\carlosdaniel\\\\Desktop\\\\Code\\\\Facul\\\\Redes\\\\FileTransfer\\\\Server\\\\src\\\\arquivos_servidor\\\\&quot;;\r\n\r\n    public static void main(String[] args) {\r\n        ExecutorService executorService = Executors.newFixedThreadPool(10);\r\n        try (ServerSocket serverSocket = new ServerSocket(PORT)) {\r\n            System.out.println(&quot;Server is running and listening on port &quot; + PORT);\r\n            while (true) {\r\n                Socket clientSocket = serverSocket.accept();\r\n                Runnable clientHandler = new ClientHandler(clientSocket);\r\n                executorService.submit(clientHandler);\r\n            }\r\n        } catch (IOException e) {\r\n            e.printStackTrace();\r\n        }\r\n    }\r\n\r\n    static class ClientHandler implements Runnable {\r\n        private Socket clientSocket;\r\n\r\n        public ClientHandler(Socket clientSocket) {\r\n            this.clientSocket = clientSocket;\r\n        }\r\n\r\n        @Override\r\n        public void run() {\r\n            try (DataInputStream in = new DataInputStream(clientSocket.getInputStream());\r\n                    DataOutputStream out = new DataOutputStream(clientSocket.getOutputStream())) {\r\n                while (true) {\r\n                    String command = in.readUTF();\r\n                    if (command.equals(&quot;list&quot;)) {\r\n                        File dir = new File(FILE_DIRECTORY);\r\n                        String[] files = dir.list();\r\n                        out.writeInt(files.length);\r\n                        for (String fileName : files) {\r\n                            out.writeUTF(fileName);\r\n                        }\r\n                    } else if (command.equals(&quot;download&quot;)) {\r\n                        String fileName = in.readUTF();\r\n                        File file = new File(FILE_DIRECTORY + fileName);\r\n                        if (file.exists()) {\r\n                            out.writeUTF(&quot;exists&quot;);\r\n                            try (InputStream fileIn = new FileInputStream(file)) {\r\n                                long fileSize = file.length();\r\n                                out.writeLong(fileSize);\r\n                                byte[] buffer = new byte[1024];\r\n                                int bytesRead;\r\n                                while ((bytesRead = fileIn.read(buffer)) != -1) {\r\n                                    out.write(buffer, 0, bytesRead);\r\n                                }\r\n                            }\r\n                        } else {\r\n                            out.writeUTF(&quot;not_found&quot;);\r\n                        }\r\n                    } else if (command.equals(&quot;upload&quot;)) {\r\n                        String fileName = in.readUTF();\r\n                        try (OutputStream fileOut = new FileOutputStream(FILE_DIRECTORY + fileName)) {\r\n                            byte[] buffer = new byte[1024];\r\n                            int bytesRead;\r\n                            while ((bytesRead = in.read(buffer)) != -1) {\r\n                                fileOut.write(buffer, 0, bytesRead);\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n            } catch (IOException e) {\r\n                e.printStackTrace();\r\n            }\r\n        }\r\n    }\r\n}\r\n```\r\n\r\nAnd my File Model:\r\n```\r\npublic class MyFile {\r\n\r\n    private int id;\r\n    private String name;\r\n    private byte[] data;\r\n    private String fileExtension;\r\n\r\n    public MyFile(int id, String name, byte[] data, String fileExtension) {\r\n        this.id = id;\r\n        this.name = name;\r\n        this.data = data;\r\n        this.fileExtension = fileExtension;\r\n    }\r\n\r\n    public void setId(int id) {\r\n        this.id = id;\r\n    }\r\n\r\n    public void setName(String name) {\r\n        this.name = name;\r\n    }\r\n\r\n    public void setData(byte[] data) {\r\n        this.data = data;\r\n    }\r\n\r\n    public void setFileExtension(String fileExtension) {\r\n        this.fileExtension = fileExtension;\r\n    }\r\n\r\n    public int getId() {\r\n        return id;\r\n    }\r\n\r\n    public String getName() {\r\n        return name;\r\n    }\r\n\r\n    public byte[] getData() {\r\n        return data;\r\n    }\r\n\r\n    public String getFileExtension() {\r\n        return fileExtension;\r\n    }\r\n}\r\n```","title":"Java Socket Multithread File Transfer getting stuck after upload","body":"<p>I've had implemented a server-client program using Java Socket and multithreading. The programm allow the clients to send files to server, list files and download that files. But I'm having an issue, when my client upload a file the programm/gui get stuck and the client can't do none of the operations. Can't lis, download or upload. But the file is sendend correctly to the server. Anyone know what's happening??</p>\n<p>My Client</p>\n<pre><code>import javax.swing.*;\nimport java.awt.*;\nimport java.awt.event.ActionEvent;\nimport java.awt.event.ActionListener;\nimport java.io.*;\nimport java.net.Socket;\nimport java.util.ArrayList;\nimport java.util.List;\n\npublic class FileClient {\n    private static final String SERVER_HOST = &quot;localhost&quot;;\n    private static final int SERVER_PORT = 12345;\n\n    private static Socket socket;\n    private static DataInputStream in;\n    private static DataOutputStream out;\n\n    private static JList&lt;String&gt; fileList;\n    private static DefaultListModel&lt;String&gt; listModel;\n\n    public static void main(String[] args) {\n        try {\n            socket = new Socket(SERVER_HOST, SERVER_PORT);\n            out = new DataOutputStream(socket.getOutputStream());\n            in = new DataInputStream(socket.getInputStream());\n\n            JFrame frame = new JFrame(&quot;File Client&quot;);\n            frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\n            frame.setSize(400, 400);\n\n            JPanel panel = new JPanel();\n            JButton listButton = new JButton(&quot;List Files&quot;);\n            JButton downloadButton = new JButton(&quot;Download File&quot;);\n            JButton uploadButton = new JButton(&quot;Upload File&quot;);\n\n            listModel = new DefaultListModel&lt;&gt;();\n            fileList = new JList&lt;&gt;(listModel);\n            fileList.setSelectionMode(ListSelectionModel.SINGLE_SELECTION);\n            JScrollPane scrollPane = new JScrollPane(fileList);\n\n            listButton.addActionListener(new ActionListener() {\n                @Override\n                public void actionPerformed(ActionEvent e) {\n                    // Execute a operao de listagem em uma thread separada\n                    SwingWorker&lt;Void, Void&gt; listWorker = new SwingWorker&lt;Void, Void&gt;() {\n                        @Override\n                        protected Void doInBackground() throws Exception {\n                            listFiles();\n                            return null;\n                        }\n                    };\n                    listWorker.execute();\n                }\n            });\n\n            downloadButton.addActionListener(new ActionListener() {\n                @Override\n                public void actionPerformed(ActionEvent e) {\n                    // Execute a operao de download em uma thread separada\n                    SwingWorker&lt;Void, Void&gt; downloadWorker = new SwingWorker&lt;Void, Void&gt;() {\n                        @Override\n                        protected Void doInBackground() throws Exception {\n                            downloadFile();\n                            return null;\n                        }\n                    };\n                    downloadWorker.execute();\n                }\n            });\n\n            uploadButton.addActionListener(new ActionListener() {\n                @Override\n                public void actionPerformed(ActionEvent e) {\n                    // Execute a operao de upload em uma thread separada\n                    SwingWorker&lt;Void, Void&gt; uploadWorker = new SwingWorker&lt;Void, Void&gt;() {\n                        @Override\n                        protected Void doInBackground() throws Exception {\n                            uploadFile();\n                            return null;\n                        }\n                    };\n                    uploadWorker.execute();\n                }\n            });\n\n            panel.add(listButton);\n            panel.add(downloadButton);\n            panel.add(uploadButton);\n\n            frame.add(panel, BorderLayout.NORTH);\n            frame.add(scrollPane, BorderLayout.CENTER);\n            frame.setVisible(true);\n        } catch (IOException e) {\n            e.printStackTrace();\n        }\n    }\n\n    private static void listFiles() {\n        try {\n            out.writeUTF(&quot;list&quot;);\n            int numFiles = in.readInt();\n            List&lt;String&gt; files = new ArrayList&lt;&gt;();\n            for (int i = 0; i &lt; numFiles; i++) {\n                String fileName = in.readUTF();\n                files.add(fileName);\n            }\n            listModel.clear();\n            for (String file : files) {\n                listModel.addElement(file);\n            }\n        } catch (IOException e) {\n            e.printStackTrace();\n        }\n    }\n\n    private static void downloadFile() {\n        String selectedFile = fileList.getSelectedValue();\n        if (selectedFile != null) {\n            try {\n                out.writeUTF(&quot;download&quot;);\n                out.writeUTF(selectedFile);\n\n                String response = in.readUTF();\n                if (response.equals(&quot;exists&quot;)) {\n                    JFileChooser fileChooser = new JFileChooser();\n                    fileChooser.setSelectedFile(new File(selectedFile));\n                    int returnVal = fileChooser.showSaveDialog(null);\n\n                    if (returnVal == JFileChooser.APPROVE_OPTION) {\n                        File savedFile = fileChooser.getSelectedFile();\n                        try (OutputStream fileOut = new FileOutputStream(savedFile)) {\n                            long fileSize = in.readLong();\n                            byte[] buffer = new byte[1024];\n                            int bytesRead;\n                            long totalBytesRead = 0;\n                            while (totalBytesRead &lt; fileSize) {\n                                bytesRead = in.read(buffer, 0, (int) Math.min(1024, fileSize - totalBytesRead));\n                                if (bytesRead == -1) {\n                                    break;\n                                }\n                                fileOut.write(buffer, 0, bytesRead);\n                                totalBytesRead += bytesRead;\n                            }\n                        }\n                        JOptionPane.showMessageDialog(null, &quot;File downloaded successfully.&quot;);\n                    }\n                } else if (response.equals(&quot;not_found&quot;)) {\n                    JOptionPane.showMessageDialog(null, &quot;File not found on the server.&quot;);\n                }\n            } catch (IOException e) {\n                e.printStackTrace();\n            }\n        }\n    }\n\n    private static void uploadFile() {\n        JFileChooser fileChooser = new JFileChooser();\n        int returnVal = fileChooser.showOpenDialog(null);\n        if (returnVal == JFileChooser.APPROVE_OPTION) {\n            File selectedFile = fileChooser.getSelectedFile();\n            try {\n                out.writeUTF(&quot;upload&quot;);\n                out.writeUTF(selectedFile.getName());\n\n                try (BufferedInputStream fileIn = new BufferedInputStream(new FileInputStream(selectedFile))) {\n                    byte[] buffer = new byte[1024];\n                    int bytesRead;\n                    while ((bytesRead = fileIn.read(buffer)) != -1) {\n                        out.write(buffer, 0, bytesRead);\n                    }\n                }\n                // Indique o trmino do envio de arquivo\n                out.writeLong(-1); // -1 para indicar o fim do arquivo\n                JOptionPane.showMessageDialog(null, &quot;File uploaded successfully.&quot;);\n\n                // Aps o upload bem-sucedido, atualize a lista de arquivos\n                listFiles();\n            } catch (IOException e) {\n                e.printStackTrace();\n            }\n        }\n    }\n\n}\n</code></pre>\n<p>My Server:</p>\n<pre><code>import java.io.*;\nimport java.net.*;\nimport java.util.concurrent.ExecutorService;\nimport java.util.concurrent.Executors;\n\npublic class FileServer {\n    private static final int PORT = 12345;\n    private static final String FILE_DIRECTORY = &quot;C:\\\\Users\\\\carlosdaniel\\\\Desktop\\\\Code\\\\Facul\\\\Redes\\\\FileTransfer\\\\Server\\\\src\\\\arquivos_servidor\\\\&quot;;\n\n    public static void main(String[] args) {\n        ExecutorService executorService = Executors.newFixedThreadPool(10);\n        try (ServerSocket serverSocket = new ServerSocket(PORT)) {\n            System.out.println(&quot;Server is running and listening on port &quot; + PORT);\n            while (true) {\n                Socket clientSocket = serverSocket.accept();\n                Runnable clientHandler = new ClientHandler(clientSocket);\n                executorService.submit(clientHandler);\n            }\n        } catch (IOException e) {\n            e.printStackTrace();\n        }\n    }\n\n    static class ClientHandler implements Runnable {\n        private Socket clientSocket;\n\n        public ClientHandler(Socket clientSocket) {\n            this.clientSocket = clientSocket;\n        }\n\n        @Override\n        public void run() {\n            try (DataInputStream in = new DataInputStream(clientSocket.getInputStream());\n                    DataOutputStream out = new DataOutputStream(clientSocket.getOutputStream())) {\n                while (true) {\n                    String command = in.readUTF();\n                    if (command.equals(&quot;list&quot;)) {\n                        File dir = new File(FILE_DIRECTORY);\n                        String[] files = dir.list();\n                        out.writeInt(files.length);\n                        for (String fileName : files) {\n                            out.writeUTF(fileName);\n                        }\n                    } else if (command.equals(&quot;download&quot;)) {\n                        String fileName = in.readUTF();\n                        File file = new File(FILE_DIRECTORY + fileName);\n                        if (file.exists()) {\n                            out.writeUTF(&quot;exists&quot;);\n                            try (InputStream fileIn = new FileInputStream(file)) {\n                                long fileSize = file.length();\n                                out.writeLong(fileSize);\n                                byte[] buffer = new byte[1024];\n                                int bytesRead;\n                                while ((bytesRead = fileIn.read(buffer)) != -1) {\n                                    out.write(buffer, 0, bytesRead);\n                                }\n                            }\n                        } else {\n                            out.writeUTF(&quot;not_found&quot;);\n                        }\n                    } else if (command.equals(&quot;upload&quot;)) {\n                        String fileName = in.readUTF();\n                        try (OutputStream fileOut = new FileOutputStream(FILE_DIRECTORY + fileName)) {\n                            byte[] buffer = new byte[1024];\n                            int bytesRead;\n                            while ((bytesRead = in.read(buffer)) != -1) {\n                                fileOut.write(buffer, 0, bytesRead);\n                            }\n                        }\n                    }\n                }\n            } catch (IOException e) {\n                e.printStackTrace();\n            }\n        }\n    }\n}\n</code></pre>\n<p>And my File Model:</p>\n<pre><code>public class MyFile {\n\n    private int id;\n    private String name;\n    private byte[] data;\n    private String fileExtension;\n\n    public MyFile(int id, String name, byte[] data, String fileExtension) {\n        this.id = id;\n        this.name = name;\n        this.data = data;\n        this.fileExtension = fileExtension;\n    }\n\n    public void setId(int id) {\n        this.id = id;\n    }\n\n    public void setName(String name) {\n        this.name = name;\n    }\n\n    public void setData(byte[] data) {\n        this.data = data;\n    }\n\n    public void setFileExtension(String fileExtension) {\n        this.fileExtension = fileExtension;\n    }\n\n    public int getId() {\n        return id;\n    }\n\n    public String getName() {\n        return name;\n    }\n\n    public byte[] getData() {\n        return data;\n    }\n\n    public String getFileExtension() {\n        return fileExtension;\n    }\n}\n</code></pre>\n"},{"tags":["java","soap","wsdl","cxf"],"answers":[{"tags":[],"owner":{"account_id":9747335,"reputation":1345,"user_id":7226842,"accept_rate":73,"display_name":"Emmanuel Guiton"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1526306042,"creation_date":1526306042,"answer_id":50332075,"question_id":16700900,"body_markdown":"An explanation may be found here https://issues.apache.org/jira/browse/CXF-1460 though it is a long closed bug.\r\n\r\nI am struggling with the same issue with CXF and ServiceNow when the WSDL that ServiceNow exposes has `elementFormDefault=&quot;unqualified&quot;`. I noticed that the generated `package-info.java` does not have the the correct `@javax.xml.bind.annotation.XmlSchema` annotation since it misses `elementFormDefault=XmlNsForm.UNQUALIFIED` I am using CXF 3.2.4 with Glassfish Java XML Binding 2.3.0\r\n\r\nA workaround to make the client work is to set the `glide.wsdl.schema.UnqualifiedElementFormDefault` parameter in ServiceNow to `false` .","title":"Unexpected wrapper element when using CXF generated client","body":"<p>An explanation may be found here <a href=\"https://issues.apache.org/jira/browse/CXF-1460\" rel=\"nofollow noreferrer\">https://issues.apache.org/jira/browse/CXF-1460</a> though it is a long closed bug.</p>\n\n<p>I am struggling with the same issue with CXF and ServiceNow when the WSDL that ServiceNow exposes has <code>elementFormDefault=\"unqualified\"</code>. I noticed that the generated <code>package-info.java</code> does not have the the correct <code>@javax.xml.bind.annotation.XmlSchema</code> annotation since it misses <code>elementFormDefault=XmlNsForm.UNQUALIFIED</code> I am using CXF 3.2.4 with Glassfish Java XML Binding 2.3.0</p>\n\n<p>A workaround to make the client work is to set the <code>glide.wsdl.schema.UnqualifiedElementFormDefault</code> parameter in ServiceNow to <code>false</code> .</p>\n"}],"owner":{"account_id":1270657,"reputation":1118,"user_id":1227012,"accept_rate":66,"display_name":"David Nedrow"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":9774,"favorite_count":0,"down_vote_count":0,"up_vote_count":9,"answer_count":1,"score":9,"last_activity_date":1699333570,"creation_date":1369254029,"question_id":16700900,"body_markdown":"I&#39;ve generated a client for a webservice using CXF&#39;s wsdl2java.\r\n\r\nTHe client connects OK, but throws an expection complaining that the response found doesn&#39;t match the expected response.\r\n\r\n    May 22, 2013 3:44:46 PM org.apache.cxf.service.factory.ReflectionServiceFactoryBean buildServiceFromWSDL\r\n    INFO: Creating Service {http://www.service-now.com/cmdb_ci_comm}ServiceNow_cmdb_ci_comm from WSDL: file:/C:/Dev/Workspaces/Eclipse/clim20130508/ServiceNowCXFClient/bin/service-now.wsdl\r\n    Invoking getRecords...\r\n    May 22, 2013 3:44:51 PM org.apache.cxf.phase.PhaseInterceptorChain doDefaultLogging\r\n    WARNING: Interceptor for {http://www.service-now.com/foo}ServiceNow_foo#{http://www.service-now.com/foo}getRecords has thrown exception, unwinding now\r\n    org.apache.cxf.interceptor.Fault: Unexpected wrapper element getRecordsResponse found.   Expected {http://www.service-now.com/foo}getRecordsResponse.\r\n\tat org.apache.cxf.interceptor.DocLiteralInInterceptor.handleMessage(DocLiteralInInterceptor.java:100)\r\n\tat org.apache.cxf.phase.PhaseInterceptorChain.doIntercept(PhaseInterceptorChain.java:271)\r\n\tat org.apache.cxf.endpoint.ClientImpl.onMessage(ClientImpl.java:800)\r\n\tat org.apache.cxf.transport.http.HTTPConduit$WrappedOutputStream.handleResponseInternal(HTTPConduit.java:1592)\r\n\tat org.apache.cxf.transport.http.HTTPConduit$WrappedOutputStream.handleResponse(HTTPConduit.java:1490)\r\n\tat org.apache.cxf.transport.http.HTTPConduit$WrappedOutputStream.close(HTTPConduit.java:1309)\r\n\tat org.apache.cxf.transport.AbstractConduit.close(AbstractConduit.java:56)\r\n\tat org.apache.cxf.transport.http.HTTPConduit.close(HTTPConduit.java:622)\r\n\tat org.apache.cxf.interceptor.MessageSenderInterceptor$MessageSenderEndingInterceptor.handleMessage(MessageSenderInterceptor.java:62)\r\n\tat org.apache.cxf.phase.PhaseInterceptorChain.doIntercept(PhaseInterceptorChain.java:271)\r\n\tat org.apache.cxf.endpoint.ClientImpl.doInvoke(ClientImpl.java:530)\r\n\tat org.apache.cxf.endpoint.ClientImpl.invoke(ClientImpl.java:463)\r\n\tat org.apache.cxf.endpoint.ClientImpl.invoke(ClientImpl.java:366)\r\n\tat org.apache.cxf.endpoint.ClientImpl.invoke(ClientImpl.java:319)\r\n\tat org.apache.cxf.frontend.ClientProxy.invokeSync(ClientProxy.java:96)\r\n\tat org.apache.cxf.jaxws.JaxWsClientProxy.invoke(JaxWsClientProxy.java:133)\r\n\tat com.sun.proxy.$Proxy29.getRecords(Unknown Source)\r\n\tat com.service_now.cmdb_ci_comm.ServiceNowSoap_ServiceNowSoap_Client.main(ServiceNowSoap_ServiceNowSoap_Client.java:178)\r\n\r\n\r\nClearly, the received response differs from the expected response in that the latter includes a namespace.\r\n\r\n    getRecordsResponse found.   Expected {http://www.service-now.com/foo}getRecordsResponse\r\n\r\nMy service client opens as follows...\r\n\r\n    @WebServiceClient(name = &quot;ServiceNow_foo&quot;, \r\n                  wsdlLocation = &quot;service-now.wsdl&quot;,\r\n                  targetNamespace = &quot;http://www.service-now.com/foo&quot;) \r\n    public class ServiceNowFoo extends Service {\r\n\r\n        public final static URL WSDL_LOCATION;\r\n\r\n        public final static QName SERVICE = new QName(&quot;http://www.service-now.com/foo&quot;, &quot;ServiceNow_foo&quot;);\r\n        public final static QName ServiceNowSoap = new QName(&quot;http://www.service-now.com/foom&quot;, &quot;ServiceNowSoap&quot;);\r\n\r\nYou can see the client code in the question https://stackoverflow.com/questions/16698404/how-does-one-configure-cxf-generated-client-for-preemptive-http-auth\r\n\r\nAny ideas as to what the misconfiguration is?","title":"Unexpected wrapper element when using CXF generated client","body":"<p>I've generated a client for a webservice using CXF's wsdl2java.</p>\n\n<p>THe client connects OK, but throws an expection complaining that the response found doesn't match the expected response.</p>\n\n<pre><code>May 22, 2013 3:44:46 PM org.apache.cxf.service.factory.ReflectionServiceFactoryBean buildServiceFromWSDL\nINFO: Creating Service {http://www.service-now.com/cmdb_ci_comm}ServiceNow_cmdb_ci_comm from WSDL: file:/C:/Dev/Workspaces/Eclipse/clim20130508/ServiceNowCXFClient/bin/service-now.wsdl\nInvoking getRecords...\nMay 22, 2013 3:44:51 PM org.apache.cxf.phase.PhaseInterceptorChain doDefaultLogging\nWARNING: Interceptor for {http://www.service-now.com/foo}ServiceNow_foo#{http://www.service-now.com/foo}getRecords has thrown exception, unwinding now\norg.apache.cxf.interceptor.Fault: Unexpected wrapper element getRecordsResponse found.   Expected {http://www.service-now.com/foo}getRecordsResponse.\nat org.apache.cxf.interceptor.DocLiteralInInterceptor.handleMessage(DocLiteralInInterceptor.java:100)\nat org.apache.cxf.phase.PhaseInterceptorChain.doIntercept(PhaseInterceptorChain.java:271)\nat org.apache.cxf.endpoint.ClientImpl.onMessage(ClientImpl.java:800)\nat org.apache.cxf.transport.http.HTTPConduit$WrappedOutputStream.handleResponseInternal(HTTPConduit.java:1592)\nat org.apache.cxf.transport.http.HTTPConduit$WrappedOutputStream.handleResponse(HTTPConduit.java:1490)\nat org.apache.cxf.transport.http.HTTPConduit$WrappedOutputStream.close(HTTPConduit.java:1309)\nat org.apache.cxf.transport.AbstractConduit.close(AbstractConduit.java:56)\nat org.apache.cxf.transport.http.HTTPConduit.close(HTTPConduit.java:622)\nat org.apache.cxf.interceptor.MessageSenderInterceptor$MessageSenderEndingInterceptor.handleMessage(MessageSenderInterceptor.java:62)\nat org.apache.cxf.phase.PhaseInterceptorChain.doIntercept(PhaseInterceptorChain.java:271)\nat org.apache.cxf.endpoint.ClientImpl.doInvoke(ClientImpl.java:530)\nat org.apache.cxf.endpoint.ClientImpl.invoke(ClientImpl.java:463)\nat org.apache.cxf.endpoint.ClientImpl.invoke(ClientImpl.java:366)\nat org.apache.cxf.endpoint.ClientImpl.invoke(ClientImpl.java:319)\nat org.apache.cxf.frontend.ClientProxy.invokeSync(ClientProxy.java:96)\nat org.apache.cxf.jaxws.JaxWsClientProxy.invoke(JaxWsClientProxy.java:133)\nat com.sun.proxy.$Proxy29.getRecords(Unknown Source)\nat com.service_now.cmdb_ci_comm.ServiceNowSoap_ServiceNowSoap_Client.main(ServiceNowSoap_ServiceNowSoap_Client.java:178)\n</code></pre>\n\n<p>Clearly, the received response differs from the expected response in that the latter includes a namespace.</p>\n\n<pre><code>getRecordsResponse found.   Expected {http://www.service-now.com/foo}getRecordsResponse\n</code></pre>\n\n<p>My service client opens as follows...</p>\n\n<pre><code>@WebServiceClient(name = \"ServiceNow_foo\", \n              wsdlLocation = \"service-now.wsdl\",\n              targetNamespace = \"http://www.service-now.com/foo\") \npublic class ServiceNowFoo extends Service {\n\n    public final static URL WSDL_LOCATION;\n\n    public final static QName SERVICE = new QName(\"http://www.service-now.com/foo\", \"ServiceNow_foo\");\n    public final static QName ServiceNowSoap = new QName(\"http://www.service-now.com/foom\", \"ServiceNowSoap\");\n</code></pre>\n\n<p>You can see the client code in the question <a href=\"https://stackoverflow.com/questions/16698404/how-does-one-configure-cxf-generated-client-for-preemptive-http-auth\">How does one configure CXF generated client for preemptive HTTP auth?</a></p>\n\n<p>Any ideas as to what the misconfiguration is?</p>\n"},{"tags":["java","amazon-web-services","spring-boot","kubernetes"],"answers":[{"tags":[],"owner":{"account_id":11293040,"reputation":24,"user_id":8281384,"display_name":"Shyamjeet Sharma"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1699333303,"creation_date":1699333303,"answer_id":77435656,"question_id":77435626,"body_markdown":"Please check below observation from my side\r\n\r\nCheck Database Availability: Ensure that the MySQL database is up and running and that it&#39;s accessible from your Kubernetes cluster. You can test the database connection using command-line tools or other clients.\r\n\r\nVerify Connection Details: Double-check the spring.datasource.url, DB_HOST, and other connection properties in your application.properties or application.yml configuration. Make sure the host name, port, and other connection details are correct.\r\n\r\nUse Environment Variables: In your Kubernetes environment, make sure that the environment variables (DB_HOST, DB_NAME, DB_USERNAME, DB_PASSWORD) are correctly defined in your ConfigMap and Secret.\r\n\r\nNetworking Configuration: Ensure that your Kubernetes cluster&#39;s networking configuration allows communication between your Spring Boot application and the MySQL database. Check security groups, network policies, and firewall rules.\r\n\r\nDNS Resolution: Confirm that the DNS resolution in your Kubernetes cluster is working correctly. It should be able to resolve the host name (DB_HOST) to the correct IP address.\r\n\r\nDatabase Driver: Verify that you have the correct MySQL database driver version (mysql-connector-java) in your application&#39;s dependencies.\r\n\r\nHikariCP Configuration: Review the HikariCP configuration in your application.properties or application.yml to make sure it&#39;s properly configured.\r\n\r\nDatabase Health: Consider implementing a health check endpoint in your Spring Boot application to check the data","title":"Having issue connecting MySQL to Spring Boot Application in EKS Cluster in AWS","body":"<p>Please check below observation from my side</p>\n<p>Check Database Availability: Ensure that the MySQL database is up and running and that it's accessible from your Kubernetes cluster. You can test the database connection using command-line tools or other clients.</p>\n<p>Verify Connection Details: Double-check the spring.datasource.url, DB_HOST, and other connection properties in your application.properties or application.yml configuration. Make sure the host name, port, and other connection details are correct.</p>\n<p>Use Environment Variables: In your Kubernetes environment, make sure that the environment variables (DB_HOST, DB_NAME, DB_USERNAME, DB_PASSWORD) are correctly defined in your ConfigMap and Secret.</p>\n<p>Networking Configuration: Ensure that your Kubernetes cluster's networking configuration allows communication between your Spring Boot application and the MySQL database. Check security groups, network policies, and firewall rules.</p>\n<p>DNS Resolution: Confirm that the DNS resolution in your Kubernetes cluster is working correctly. It should be able to resolve the host name (DB_HOST) to the correct IP address.</p>\n<p>Database Driver: Verify that you have the correct MySQL database driver version (mysql-connector-java) in your application's dependencies.</p>\n<p>HikariCP Configuration: Review the HikariCP configuration in your application.properties or application.yml to make sure it's properly configured.</p>\n<p>Database Health: Consider implementing a health check endpoint in your Spring Boot application to check the data</p>\n"}],"owner":{"account_id":4673848,"reputation":87,"user_id":3784911,"accept_rate":0,"display_name":"user3784911"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":42,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":1,"score":-1,"last_activity_date":1699333303,"creation_date":1699332673,"question_id":77435626,"body_markdown":"I tried almost every resource I could to try to fix the issue of trying to connect a mysql database to my spring boot application and I had no such luck. Here is the complete code at the bottom. Any idea from the code that could be causing the issue?\r\n \r\n   apiVersion: v1\r\n    kind: Secret\r\n    metadata:\r\n      name: mysql-credentials\r\n    data:\r\n      username: bXlzcWw=\r\n      password: bXlzcWw=\r\n    ---\r\n    apiVersion: v1\r\n    kind: ConfigMap\r\n    metadata:\r\n      name: mysql-conf\r\n    data:\r\n      host: mysql\r\n      dbName: engineersdb\r\n    --- \r\n    apiVersion: v1\r\n    kind: PersistentVolume\r\n    metadata:\r\n      name: mysql-pv-volume\r\n      labels:\r\n        type: local\r\n    spec:\r\n      storageClassName: manual\r\n      capacity:\r\n        storage: 2Gi\r\n      accessModes:\r\n        - ReadWriteOnce\r\n      hostPath:\r\n        path: &quot;/mnt/data&quot;\r\n    ---\r\n    apiVersion: v1\r\n    kind: PersistentVolumeClaim\r\n    metadata:\r\n      name: mysql-pv-claim\r\n    spec:\r\n      storageClassName: manual\r\n      accessModes:\r\n        - ReadWriteOnce\r\n      resources:\r\n        requests:\r\n          storage: 2Gi\r\n    --- \r\n    apiVersion: apps/v1\r\n    kind: Deployment\r\n    metadata:\r\n      name: mysql\r\n    spec:\r\n      selector:\r\n        matchLabels:\r\n          app: mysql\r\n      strategy:\r\n        type: Recreate\r\n      template:\r\n        metadata:\r\n          labels:\r\n            app: mysql\r\n        spec:\r\n          containers:\r\n          - image: mysql:5.7\r\n            name: mysql\r\n            env:\r\n                - name: MYSQL_ROOT_PASSWORD\r\n                  valueFrom :\r\n                    secretKeyRef :\r\n                      name : mysql-credentials\r\n                      key :  password\r\n    \r\n                - name: MYSQL_DATABASE # Setting Database Name from a &#39;ConfigMap&#39;\r\n                  valueFrom :\r\n                    configMapKeyRef :\r\n                      name : mysql-conf\r\n                      key :  dbName\r\n    \r\n            ports:\r\n            - containerPort: 3306\r\n              name: mysql\r\n            volumeMounts:\r\n            - name: mysql-persistent-storage\r\n              mountPath: /var/lib/mysql\r\n          volumes:\r\n          - name: mysql-persistent-storage\r\n            persistentVolumeClaim:\r\n              claimName: mysql-pv-claim\r\n    ---\r\n    apiVersion: v1\r\n    kind: Service\r\n    metadata:\r\n      name: mysql\r\n    spec:\r\n      ports:\r\n      - port: 3306\r\n      selector:\r\n        app: mysql\r\n\r\n    org.springframework.beans.factory.BeanCreationException: Error creating bean with name &#39;entityManagerFactory&#39; defined in class path resource [org/springframework/boot/autoconfigure/orm/jpa/HibernateJpaConfiguration.class]: [PersistenceUnit: default] Unable to build Hibernate SessionFactory; nested exception is org.hibernate.exception.JDBCConnectionException: Unable to open JDBC Connection for DDL execution [HikariPool-1 - Connection is not available, request timed out after 30007ms.] [n/a]\r\n    \tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1770) ~[spring-beans-6.0.10.jar:6.0.10]\r\n    \tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:598) ~[spring-beans-6.0.10.jar:6.0.10]\r\n    \tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:520) ~[spring-beans-6.0.10.jar:6.0.10]\r\n    \tat org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:326) ~[spring-beans-6.0.10.jar:6.0.10]\r\n    \tat org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234) ~[spring-beans-6.0.10.jar:6.0.10]\r\n    \tat org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:324) ~[spring-beans-6.0.10.jar:6.0.10]\r\n    \tat org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200) ~[spring-beans-6.0.10.jar:6.0.10]\r\n    \tat org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1154) ~[spring-context-6.0.10.jar:6.0.10]\r\n    \tat org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:931) ~[spring-context-6.0.10.jar:6.0.10]\r\n    \tat org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:608) ~[spring-context-6.0.10.jar:6.0.10]\r\n    \tat org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146) ~[spring-boot-3.1.1.jar:3.1.1]\r\n    \tat org.springframework.boot.SpringApplication.refresh(SpringApplication.java:734) ~[spring-boot-3.1.1.jar:3.1.1]\r\n    \tat org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:436) ~[spring-boot-3.1.1.jar:3.1.1]\r\n    \tat org.springframework.boot.SpringApplication.run(SpringApplication.java:312) ~[spring-boot-3.1.1.jar:3.1.1]\r\n    \tat org.springframework.boot.SpringApplication.run(SpringApplication.java:1306) ~[spring-boot-3.1.1.jar:3.1.1]\r\n    \tat org.springframework.boot.SpringApplication.run(SpringApplication.java:1295) ~[spring-boot-3.1.1.jar:3.1.1]\r\n    \tat com.engineers.core.engineersuserservice.EngineersProjectApplication.main(EngineersProjectApplication.java:10) ~[classes/:na]\r\n    \tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]\r\n    \tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77) ~[na:na]\r\n    \tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]\r\n    \tat java.base/java.lang.reflect.Method.invoke(Method.java:568) ~[na:na]\r\n    \tat org.springframework.boot.devtools.restart.RestartLauncher.run(RestartLauncher.java:50) ~[spring-boot-devtools-3.1.1.jar:3.1.1]\r\n    Caused by: jakarta.persistence.PersistenceException: [PersistenceUnit: default] Unable to build Hibernate SessionFactory; nested exception is org.hibernate.exception.JDBCConnectionException: Unable to open JDBC Connection for DDL execution [HikariPool-1 - Connection is not available, request timed out after 30007ms.] [n/a]\r\n    \tat org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.buildNativeEntityManagerFactory(AbstractEntityManagerFactoryBean.java:421) ~[spring-orm-6.0.10.jar:6.0.10]\r\n    \tat org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.afterPropertiesSet(AbstractEntityManagerFactoryBean.java:396) ~[spring-orm-6.0.10.jar:6.0.10]\r\n    \tat org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.afterPropertiesSet(LocalContainerEntityManagerFactoryBean.java:352) ~[spring-orm-6.0.10.jar:6.0.10]\r\n    \tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1816) ~[spring-beans-6.0.10.jar:6.0.10]\r\n    \tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1766) ~[spring-beans-6.0.10.jar:6.0.10]\r\n    \t... 21 common frames omitted\r\n    Caused by: org.hibernate.exception.JDBCConnectionException: Unable to open JDBC Connection for DDL execution [HikariPool-1 - Connection is not available, request timed out after 30007ms.] [n/a]\r\n    \tat org.hibernate.exception.internal.SQLExceptionTypeDelegate.convert(SQLExceptionTypeDelegate.java:49) ~[hibernate-core-6.2.5.Final.jar:6.2.5.Final]\r\n    \tat org.hibernate.exception.internal.StandardSQLExceptionConverter.convert(StandardSQLExceptionConverter.java:56) ~[hibernate-core-6.2.5.Final.jar:6.2.5.Final]\r\n    \tat org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:108) ~[hibernate-core-6.2.5.Final.jar:6.2.5.Final]\r\n    \tat org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:94) ~[hibernate-core-6.2.5.Final.jar:6.2.5.Final]\r\n    \tat org.hibernate.resource.transaction.backend.jdbc.internal.DdlTransactionIsolatorNonJtaImpl.getIsolatedConnection(DdlTransactionIsolatorNonJtaImpl.java:74) ~[hibernate-core-6.2.5.Final.jar:6.2.5.Final]\r\n    \tat org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.getIsolatedConnection(GenerationTargetToDatabase.java:60) ~[hibernate-core-6.2.5.Final.jar:6.2.5.Final]\r\n    \tat org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.jdbcStatement(GenerationTargetToDatabase.java:110) ~[hibernate-core-6.2.5.Final.jar:6.2.5.Final]\r\n    \tat org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:77) ~[hibernate-core-6.2.5.Final.jar:6.2.5.Final]\r\n    \tat org.hibernate.tool.schema.internal.Helper.applySqlString(Helper.java:235) ~[hibernate-core-6.2.5.Final.jar:6.2.5.Final]\r\n    \tat org.hibernate.tool.schema.internal.Helper.applySqlStrings(Helper.java:219) ~[hibernate-core-6.2.5.Final.jar:6.2.5.Final]\r\n    \tat org.hibernate.tool.schema.internal.SchemaDropperImpl.dropTables(SchemaDropperImpl.java:362) ~[hibernate-core-6.2.5.Final.jar:6.2.5.Final]\r\n    \tat org.hibernate.tool.schema.internal.SchemaDropperImpl.dropConstraintsTablesSequences(SchemaDropperImpl.java:253) ~[hibernate-core-6.2.5.Final.jar:6.2.5.Final]\r\n    \tat org.hibernate.tool.schema.internal.SchemaDropperImpl.dropFromMetadata(SchemaDropperImpl.java:215) ~[hibernate-core-6.2.5.Final.jar:6.2.5.Final]\r\n    \tat org.hibernate.tool.schema.internal.SchemaDropperImpl.performDrop(SchemaDropperImpl.java:185) ~[hibernate-core-6.2.5.Final.jar:6.2.5.Final]\r\n    \tat org.hibernate.tool.schema.internal.SchemaDropperImpl.doDrop(SchemaDropperImpl.java:155) ~[hibernate-core-6.2.5.Final.jar:6.2.5.Final]\r\n    \tat org.hibernate.tool.schema.internal.SchemaDropperImpl.doDrop(SchemaDropperImpl.java:115) ~[hibernate-core-6.2.5.Final.jar:6.2.5.Final]\r\n    \tat org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.performDatabaseAction(SchemaManagementToolCoordinator.java:242) ~[hibernate-core-6.2.5.Final.jar:6.2.5.Final]\r\n    \tat org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.lambda$process$5(SchemaManagementToolCoordinator.java:143) ~[hibernate-core-6.2.5.Final.jar:6.2.5.Final]\r\n    \tat java.base/java.util.HashMap.forEach(HashMap.java:1421) ~[na:na]\r\n    \tat org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.process(SchemaManagementToolCoordinator.java:140) ~[hibernate-core-6.2.5.Final.jar:6.2.5.Final]\r\n    \tat org.hibernate.boot.internal.SessionFactoryObserverForSchemaExport.sessionFactoryCreated(SessionFactoryObserverForSchemaExport.java:37) ~[hibernate-core-6.2.5.Final.jar:6.2.5.Final]\r\n    \tat org.hibernate.internal.SessionFactoryObserverChain.sessionFactoryCreated(SessionFactoryObserverChain.java:35) ~[hibernate-core-6.2.5.Final.jar:6.2.5.Final]\r\n    \tat org.hibernate.internal.SessionFactoryImpl.&lt;init&gt;(SessionFactoryImpl.java:292) ~[hibernate-core-6.2.5.Final.jar:6.2.5.Final]\r\n    \tat org.hibernate.boot.internal.SessionFactoryBuilderImpl.build(SessionFactoryBuilderImpl.java:431) ~[hibernate-core-6.2.5.Final.jar:6.2.5.Final]\r\n    \tat org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.build(EntityManagerFactoryBuilderImpl.java:1455) ~[hibernate-core-6.2.5.Final.jar:6.2.5.Final]\r\n    \tat org.springframework.orm.jpa.vendor.SpringHibernateJpaPersistenceProvider.createContainerEntityManagerFactory(SpringHibernateJpaPersistenceProvider.java:75) ~[spring-orm-6.0.10.jar:6.0.10]\r\n    \tat org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.createNativeEntityManagerFactory(LocalContainerEntityManagerFactoryBean.java:376) ~[spring-orm-6.0.10.jar:6.0.10]\r\n    \tat org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.buildNativeEntityManagerFactory(AbstractEntityManagerFactoryBean.java:409) ~[spring-orm-6.0.10.jar:6.0.10]\r\n    \t... 25 common frames omitted\r\n    Caused by: java.sql.SQLTransientConnectionException: HikariPool-1 - Connection is not available, request timed out after 30007ms.\r\n    \tat com.zaxxer.hikari.pool.HikariPool.createTimeoutException(HikariPool.java:696) ~[HikariCP-5.0.1.jar:na]\r\n    \tat com.zaxxer.hikari.pool.HikariPool.getConnection(HikariPool.java:181) ~[HikariCP-5.0.1.jar:na]\r\n    \tat com.zaxxer.hikari.pool.HikariPool.getConnection(HikariPool.java:146) ~[HikariCP-5.0.1.jar:na]\r\n    \tat com.zaxxer.hikari.HikariDataSource.getConnection(HikariDataSource.java:128) ~[HikariCP-5.0.1.jar:na]\r\n    \tat org.hibernate.engine.jdbc.connections.internal.DatasourceConnectionProviderImpl.getConnection(DatasourceConnectionProviderImpl.java:122) ~[hibernate-core-6.2.5.Final.jar:6.2.5.Final]\r\n    \tat org.hibernate.engine.jdbc.env.internal.JdbcEnvironmentInitiator$ConnectionProviderJdbcConnectionAccess.obtainConnection(JdbcEnvironmentInitiator.java:316) ~[hibernate-core-6.2.5.Final.jar:6.2.5.Final]\r\n    \tat org.hibernate.resource.transaction.backend.jdbc.internal.DdlTransactionIsolatorNonJtaImpl.getIsolatedConnection(DdlTransactionIsolatorNonJtaImpl.java:46) ~[hibernate-core-6.2.5.Final.jar:6.2.5.Final]\r\n    \t... 48 common frames omitted\r\n    Caused by: com.mysql.cj.jdbc.exceptions.CommunicationsException: Communications link failure\r\n    \r\n    The last packet sent successfully to the server was 0 milliseconds ago. The driver has not received any packets from the server.\r\n    \tat com.mysql.cj.jdbc.exceptions.SQLError.createCommunicationsException(SQLError.java:174) ~[mysql-connector-java-8.0.24.jar:8.0.24]\r\n    \tat com.mysql.cj.jdbc.exceptions.SQLExceptionsMapping.translateException(SQLExceptionsMapping.java:64) ~[mysql-connector-java-8.0.24.jar:8.0.24]\r\n    \tat com.mysql.cj.jdbc.ConnectionImpl.createNewIO(ConnectionImpl.java:833) ~[mysql-connector-java-8.0.24.jar:8.0.24]\r\n    \tat com.mysql.cj.jdbc.ConnectionImpl.&lt;init&gt;(ConnectionImpl.java:453) ~[mysql-connector-java-8.0.24.jar:8.0.24]\r\n    \tat com.mysql.cj.jdbc.ConnectionImpl.getInstance(ConnectionImpl.java:246) ~[mysql-connector-java-8.0.24.jar:8.0.24]\r\n    \tat com.mysql.cj.jdbc.NonRegisteringDriver.connect(NonRegisteringDriver.java:198) ~[mysql-connector-java-8.0.24.jar:8.0.24]\r\n    \tat com.zaxxer.hikari.util.DriverDataSource.getConnection(DriverDataSource.java:138) ~[HikariCP-5.0.1.jar:na]\r\n    \tat com.zaxxer.hikari.pool.PoolBase.newConnection(PoolBase.java:359) ~[HikariCP-5.0.1.jar:na]\r\n    \tat com.zaxxer.hikari.pool.PoolBase.newPoolEntry(PoolBase.java:201) ~[HikariCP-5.0.1.jar:na]\r\n    \tat com.zaxxer.hikari.pool.HikariPool.createPoolEntry(HikariPool.java:470) ~[HikariCP-5.0.1.jar:na]\r\n    \tat com.zaxxer.hikari.pool.HikariPool$PoolEntryCreator.call(HikariPool.java:733) ~[HikariCP-5.0.1.jar:na]\r\n    \tat com.zaxxer.hikari.pool.HikariPool$PoolEntryCreator.call(HikariPool.java:712) ~[HikariCP-5.0.1.jar:na]\r\n    \tat java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264) ~[na:na]\r\n    \tat java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136) ~[na:na]\r\n    \tat java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635) ~[na:na]\r\n    \tat java.base/java.lang.Thread.run(Thread.java:833) ~[na:na]\r\n    Caused by: com.mysql.cj.exceptions.CJCommunicationsException: Communications link failure\r\n    \r\n    The last packet sent successfully to the server was 0 milliseconds ago. The driver has not received any packets from the server.\r\n    \tat jdk.internal.reflect.GeneratedConstructorAccessor30.newInstance(Unknown Source) ~[na:na]\r\n    \tat java.base/jdk.internal.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45) ~[na:na]\r\n    \tat java.base/java.lang.reflect.Constructor.newInstanceWithCaller(Constructor.java:499) ~[na:na]\r\n    \tat java.base/java.lang.reflect.Constructor.newInstance(Constructor.java:480) ~[na:na]\r\n    \tat com.mysql.cj.exceptions.ExceptionFactory.createException(ExceptionFactory.java:61) ~[mysql-connector-java-8.0.24.jar:8.0.24]\r\n    \tat com.mysql.cj.exceptions.ExceptionFactory.createException(ExceptionFactory.java:105) ~[mysql-connector-java-8.0.24.jar:8.0.24]\r\n    \tat com.mysql.cj.exceptions.ExceptionFactory.createException(ExceptionFactory.java:151) ~[mysql-connector-java-8.0.24.jar:8.0.24]\r\n    \tat com.mysql.cj.exceptions.ExceptionFactory.createCommunicationsException(ExceptionFactory.java:167) ~[mysql-connector-java-8.0.24.jar:8.0.24]\r\n    \tat com.mysql.cj.protocol.a.NativeSocketConnection.connect(NativeSocketConnection.java:89) ~[mysql-connector-java-8.0.24.jar:8.0.24]\r\n    \tat com.mysql.cj.NativeSession.connect(NativeSession.java:144) ~[mysql-connector-java-8.0.24.jar:8.0.24]\r\n    \tat com.mysql.cj.jdbc.ConnectionImpl.connectOneTryOnly(ConnectionImpl.java:953) ~[mysql-connector-java-8.0.24.jar:8.0.24]\r\n    \tat com.mysql.cj.jdbc.ConnectionImpl.createNewIO(ConnectionImpl.java:823) ~[mysql-connector-java-8.0.24.jar:8.0.24]\r\n    \t... 13 common frames omitted\r\n    Caused by: java.net.UnknownHostException: ${DB_HOST}3306: nodename nor servname provided, or not known\r\n    \tat java.base/java.net.Inet6AddressImpl.lookupAllHostAddr(Native Method) ~[na:na]\r\n    \tat java.base/java.net.InetAddress$PlatformNameService.lookupAllHostAddr(InetAddress.java:934) ~[na:na]\r\n    \tat java.base/java.net.InetAddress.getAddressesFromNameService(InetAddress.java:1543) ~[na:na]\r\n    \tat java.base/java.net.InetAddress$NameServiceAddresses.get(InetAddress.java:852) ~[na:na]\r\n    \tat java.base/java.net.InetAddress.getAllByName0(InetAddress.java:1533) ~[na:na]\r\n    \tat java.base/java.net.InetAddress.getAllByName(InetAddress.java:1385) ~[na:na]\r\n    \tat java.base/java.net.InetAddress.getAllByName(InetAddress.java:1306) ~[na:na]\r\n    \tat com.mysql.cj.protocol.StandardSocketFactory.connect(StandardSocketFactory.java:132) ~[mysql-connector-java-8.0.24.jar:8.0.24]\r\n    \tat com.mysql.cj.protocol.a.NativeSocketConnection.connect(NativeSocketConnection.java:63) ~[mysql-connector-java-8.0.24.jar:8.0.24]\r\n    \t... 16 common frames omitted\r\n    \r\n    \r\n    Process finished with exit code 0\r\n\r\n    spring:\r\n      datasource:\r\n        url: jdbc:mysql://${DB_HOST}:3306/${DB_NAME}?useSSL=false\r\n        username: ${DB_USERNAME}\r\n        password: ${DB_PASSWORD}\r\n        hikari:\r\n          initialization-fail-timeout: 0\r\n          driver-class-name: com.mysql.cj.jdbc.Driver\r\n      jpa:\r\n        database-platform: org.hibernate.dialect.MySQLDialect\r\n        properties:\r\n          hibernate:\r\n            dialect: org.hibernate.dialect.MySQLDialect\r\n        generate-ddl: true\r\n        show-sql: true\r\n        hibernate:\r\n          ddl-auto: create\r\n\r\n    apiVersion: apps/v1\r\n    kind: Deployment\r\n    metadata:\r\n      name: engineers-user-service\r\n    spec:\r\n      replicas: 1\r\n      selector:\r\n        matchLabels:\r\n          app:  engineers-user-service\r\n      template:\r\n        metadata:\r\n          labels:\r\n            app:  engineers-user-service\r\n        spec:\r\n          containers:\r\n            - name:  engineers-user-service\r\n              image: steven8519/engineers-user-service\r\n              imagePullPolicy: Always\r\n              ports:\r\n                - containerPort: 8080\r\n              env: # Setting Enviornmental Variables\r\n                - name: DB_HOST   # Setting Database host address from configMap\r\n                  valueFrom:\r\n                    configMapKeyRef:\r\n                      name: mysql-conf\r\n                      key: host\r\n    \r\n                - name: DB_NAME  # Setting Database name from configMap\r\n                  valueFrom:\r\n                    configMapKeyRef:\r\n                      name: mysql-conf\r\n                      key: dbName\r\n    \r\n                - name: DB_USERNAME  # Setting Database username from Secret\r\n                  valueFrom:\r\n                    secretKeyRef:\r\n                      name: mysql-credentials\r\n                      key: username\r\n    \r\n                - name: DB_PASSWORD # Setting Database password from Secret\r\n                  valueFrom:\r\n                    secretKeyRef:\r\n                      name: mysql-credentials\r\n                      key: password\r\n      strategy:\r\n        type: RollingUpdate\r\n        rollingUpdate:\r\n          maxUnavailable: 25%  # Maximum unavailable pods during update\r\n          maxSurge: 25%  # Maximum additional pods to create during update\r\n    ---\r\n    apiVersion: v1\r\n    kind: Service\r\n    metadata:\r\n      name:  engineers-user-service\r\n    spec:\r\n      type: NodePort\r\n      selector:\r\n        app: engineers-user-service\r\n      ports:\r\n        - nodePort: 30082\r\n          port: 8080\r\n          targetPort: 8080\r\n\r\n \r\n\r\n    &lt;dependencies&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n                &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\r\n            &lt;/dependency&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;mysql&lt;/groupId&gt;\r\n                &lt;artifactId&gt;mysql-connector-java&lt;/artifactId&gt;\r\n                &lt;version&gt;8.0.24&lt;/version&gt;\r\n                &lt;scope&gt;runtime&lt;/scope&gt;\r\n            &lt;/dependency&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n                &lt;artifactId&gt;spring-boot-devtools&lt;/artifactId&gt;\r\n                &lt;scope&gt;runtime&lt;/scope&gt;\r\n                &lt;optional&gt;true&lt;/optional&gt;\r\n            &lt;/dependency&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\r\n                &lt;artifactId&gt;lombok&lt;/artifactId&gt;\r\n                &lt;optional&gt;true&lt;/optional&gt;\r\n            &lt;/dependency&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n                &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\r\n                &lt;scope&gt;test&lt;/scope&gt;\r\n            &lt;/dependency&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n                &lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;\r\n            &lt;/dependency&gt;\r\n        &lt;/dependencies&gt;","title":"Having issue connecting MySQL to Spring Boot Application in EKS Cluster in AWS","body":"<p>I tried almost every resource I could to try to fix the issue of trying to connect a mysql database to my spring boot application and I had no such luck. Here is the complete code at the bottom. Any idea from the code that could be causing the issue?</p>\n<p>apiVersion: v1\nkind: Secret\nmetadata:\nname: mysql-credentials\ndata:\nusername: bXlzcWw=\npassword: bXlzcWw=\n---\napiVersion: v1\nkind: ConfigMap\nmetadata:\nname: mysql-conf\ndata:\nhost: mysql\ndbName: engineersdb\n---\napiVersion: v1\nkind: PersistentVolume\nmetadata:\nname: mysql-pv-volume\nlabels:\ntype: local\nspec:\nstorageClassName: manual\ncapacity:\nstorage: 2Gi\naccessModes:\n- ReadWriteOnce\nhostPath:\npath: &quot;/mnt/data&quot;\n---\napiVersion: v1\nkind: PersistentVolumeClaim\nmetadata:\nname: mysql-pv-claim\nspec:\nstorageClassName: manual\naccessModes:\n- ReadWriteOnce\nresources:\nrequests:\nstorage: 2Gi\n---\napiVersion: apps/v1\nkind: Deployment\nmetadata:\nname: mysql\nspec:\nselector:\nmatchLabels:\napp: mysql\nstrategy:\ntype: Recreate\ntemplate:\nmetadata:\nlabels:\napp: mysql\nspec:\ncontainers:\n- image: mysql:5.7\nname: mysql\nenv:\n- name: MYSQL_ROOT_PASSWORD\nvalueFrom :\nsecretKeyRef :\nname : mysql-credentials\nkey :  password</p>\n<pre><code>            - name: MYSQL_DATABASE # Setting Database Name from a 'ConfigMap'\n              valueFrom :\n                configMapKeyRef :\n                  name : mysql-conf\n                  key :  dbName\n\n        ports:\n        - containerPort: 3306\n          name: mysql\n        volumeMounts:\n        - name: mysql-persistent-storage\n          mountPath: /var/lib/mysql\n      volumes:\n      - name: mysql-persistent-storage\n        persistentVolumeClaim:\n          claimName: mysql-pv-claim\n---\napiVersion: v1\nkind: Service\nmetadata:\n  name: mysql\nspec:\n  ports:\n  - port: 3306\n  selector:\n    app: mysql\n\norg.springframework.beans.factory.BeanCreationException: Error creating bean with name 'entityManagerFactory' defined in class path resource [org/springframework/boot/autoconfigure/orm/jpa/HibernateJpaConfiguration.class]: [PersistenceUnit: default] Unable to build Hibernate SessionFactory; nested exception is org.hibernate.exception.JDBCConnectionException: Unable to open JDBC Connection for DDL execution [HikariPool-1 - Connection is not available, request timed out after 30007ms.] [n/a]\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1770) ~[spring-beans-6.0.10.jar:6.0.10]\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:598) ~[spring-beans-6.0.10.jar:6.0.10]\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:520) ~[spring-beans-6.0.10.jar:6.0.10]\n    at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:326) ~[spring-beans-6.0.10.jar:6.0.10]\n    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234) ~[spring-beans-6.0.10.jar:6.0.10]\n    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:324) ~[spring-beans-6.0.10.jar:6.0.10]\n    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200) ~[spring-beans-6.0.10.jar:6.0.10]\n    at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1154) ~[spring-context-6.0.10.jar:6.0.10]\n    at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:931) ~[spring-context-6.0.10.jar:6.0.10]\n    at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:608) ~[spring-context-6.0.10.jar:6.0.10]\n    at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146) ~[spring-boot-3.1.1.jar:3.1.1]\n    at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:734) ~[spring-boot-3.1.1.jar:3.1.1]\n    at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:436) ~[spring-boot-3.1.1.jar:3.1.1]\n    at org.springframework.boot.SpringApplication.run(SpringApplication.java:312) ~[spring-boot-3.1.1.jar:3.1.1]\n    at org.springframework.boot.SpringApplication.run(SpringApplication.java:1306) ~[spring-boot-3.1.1.jar:3.1.1]\n    at org.springframework.boot.SpringApplication.run(SpringApplication.java:1295) ~[spring-boot-3.1.1.jar:3.1.1]\n    at com.engineers.core.engineersuserservice.EngineersProjectApplication.main(EngineersProjectApplication.java:10) ~[classes/:na]\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77) ~[na:na]\n    at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]\n    at java.base/java.lang.reflect.Method.invoke(Method.java:568) ~[na:na]\n    at org.springframework.boot.devtools.restart.RestartLauncher.run(RestartLauncher.java:50) ~[spring-boot-devtools-3.1.1.jar:3.1.1]\nCaused by: jakarta.persistence.PersistenceException: [PersistenceUnit: default] Unable to build Hibernate SessionFactory; nested exception is org.hibernate.exception.JDBCConnectionException: Unable to open JDBC Connection for DDL execution [HikariPool-1 - Connection is not available, request timed out after 30007ms.] [n/a]\n    at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.buildNativeEntityManagerFactory(AbstractEntityManagerFactoryBean.java:421) ~[spring-orm-6.0.10.jar:6.0.10]\n    at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.afterPropertiesSet(AbstractEntityManagerFactoryBean.java:396) ~[spring-orm-6.0.10.jar:6.0.10]\n    at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.afterPropertiesSet(LocalContainerEntityManagerFactoryBean.java:352) ~[spring-orm-6.0.10.jar:6.0.10]\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1816) ~[spring-beans-6.0.10.jar:6.0.10]\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1766) ~[spring-beans-6.0.10.jar:6.0.10]\n    ... 21 common frames omitted\nCaused by: org.hibernate.exception.JDBCConnectionException: Unable to open JDBC Connection for DDL execution [HikariPool-1 - Connection is not available, request timed out after 30007ms.] [n/a]\n    at org.hibernate.exception.internal.SQLExceptionTypeDelegate.convert(SQLExceptionTypeDelegate.java:49) ~[hibernate-core-6.2.5.Final.jar:6.2.5.Final]\n    at org.hibernate.exception.internal.StandardSQLExceptionConverter.convert(StandardSQLExceptionConverter.java:56) ~[hibernate-core-6.2.5.Final.jar:6.2.5.Final]\n    at org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:108) ~[hibernate-core-6.2.5.Final.jar:6.2.5.Final]\n    at org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:94) ~[hibernate-core-6.2.5.Final.jar:6.2.5.Final]\n    at org.hibernate.resource.transaction.backend.jdbc.internal.DdlTransactionIsolatorNonJtaImpl.getIsolatedConnection(DdlTransactionIsolatorNonJtaImpl.java:74) ~[hibernate-core-6.2.5.Final.jar:6.2.5.Final]\n    at org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.getIsolatedConnection(GenerationTargetToDatabase.java:60) ~[hibernate-core-6.2.5.Final.jar:6.2.5.Final]\n    at org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.jdbcStatement(GenerationTargetToDatabase.java:110) ~[hibernate-core-6.2.5.Final.jar:6.2.5.Final]\n    at org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:77) ~[hibernate-core-6.2.5.Final.jar:6.2.5.Final]\n    at org.hibernate.tool.schema.internal.Helper.applySqlString(Helper.java:235) ~[hibernate-core-6.2.5.Final.jar:6.2.5.Final]\n    at org.hibernate.tool.schema.internal.Helper.applySqlStrings(Helper.java:219) ~[hibernate-core-6.2.5.Final.jar:6.2.5.Final]\n    at org.hibernate.tool.schema.internal.SchemaDropperImpl.dropTables(SchemaDropperImpl.java:362) ~[hibernate-core-6.2.5.Final.jar:6.2.5.Final]\n    at org.hibernate.tool.schema.internal.SchemaDropperImpl.dropConstraintsTablesSequences(SchemaDropperImpl.java:253) ~[hibernate-core-6.2.5.Final.jar:6.2.5.Final]\n    at org.hibernate.tool.schema.internal.SchemaDropperImpl.dropFromMetadata(SchemaDropperImpl.java:215) ~[hibernate-core-6.2.5.Final.jar:6.2.5.Final]\n    at org.hibernate.tool.schema.internal.SchemaDropperImpl.performDrop(SchemaDropperImpl.java:185) ~[hibernate-core-6.2.5.Final.jar:6.2.5.Final]\n    at org.hibernate.tool.schema.internal.SchemaDropperImpl.doDrop(SchemaDropperImpl.java:155) ~[hibernate-core-6.2.5.Final.jar:6.2.5.Final]\n    at org.hibernate.tool.schema.internal.SchemaDropperImpl.doDrop(SchemaDropperImpl.java:115) ~[hibernate-core-6.2.5.Final.jar:6.2.5.Final]\n    at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.performDatabaseAction(SchemaManagementToolCoordinator.java:242) ~[hibernate-core-6.2.5.Final.jar:6.2.5.Final]\n    at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.lambda$process$5(SchemaManagementToolCoordinator.java:143) ~[hibernate-core-6.2.5.Final.jar:6.2.5.Final]\n    at java.base/java.util.HashMap.forEach(HashMap.java:1421) ~[na:na]\n    at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.process(SchemaManagementToolCoordinator.java:140) ~[hibernate-core-6.2.5.Final.jar:6.2.5.Final]\n    at org.hibernate.boot.internal.SessionFactoryObserverForSchemaExport.sessionFactoryCreated(SessionFactoryObserverForSchemaExport.java:37) ~[hibernate-core-6.2.5.Final.jar:6.2.5.Final]\n    at org.hibernate.internal.SessionFactoryObserverChain.sessionFactoryCreated(SessionFactoryObserverChain.java:35) ~[hibernate-core-6.2.5.Final.jar:6.2.5.Final]\n    at org.hibernate.internal.SessionFactoryImpl.&lt;init&gt;(SessionFactoryImpl.java:292) ~[hibernate-core-6.2.5.Final.jar:6.2.5.Final]\n    at org.hibernate.boot.internal.SessionFactoryBuilderImpl.build(SessionFactoryBuilderImpl.java:431) ~[hibernate-core-6.2.5.Final.jar:6.2.5.Final]\n    at org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.build(EntityManagerFactoryBuilderImpl.java:1455) ~[hibernate-core-6.2.5.Final.jar:6.2.5.Final]\n    at org.springframework.orm.jpa.vendor.SpringHibernateJpaPersistenceProvider.createContainerEntityManagerFactory(SpringHibernateJpaPersistenceProvider.java:75) ~[spring-orm-6.0.10.jar:6.0.10]\n    at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.createNativeEntityManagerFactory(LocalContainerEntityManagerFactoryBean.java:376) ~[spring-orm-6.0.10.jar:6.0.10]\n    at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.buildNativeEntityManagerFactory(AbstractEntityManagerFactoryBean.java:409) ~[spring-orm-6.0.10.jar:6.0.10]\n    ... 25 common frames omitted\nCaused by: java.sql.SQLTransientConnectionException: HikariPool-1 - Connection is not available, request timed out after 30007ms.\n    at com.zaxxer.hikari.pool.HikariPool.createTimeoutException(HikariPool.java:696) ~[HikariCP-5.0.1.jar:na]\n    at com.zaxxer.hikari.pool.HikariPool.getConnection(HikariPool.java:181) ~[HikariCP-5.0.1.jar:na]\n    at com.zaxxer.hikari.pool.HikariPool.getConnection(HikariPool.java:146) ~[HikariCP-5.0.1.jar:na]\n    at com.zaxxer.hikari.HikariDataSource.getConnection(HikariDataSource.java:128) ~[HikariCP-5.0.1.jar:na]\n    at org.hibernate.engine.jdbc.connections.internal.DatasourceConnectionProviderImpl.getConnection(DatasourceConnectionProviderImpl.java:122) ~[hibernate-core-6.2.5.Final.jar:6.2.5.Final]\n    at org.hibernate.engine.jdbc.env.internal.JdbcEnvironmentInitiator$ConnectionProviderJdbcConnectionAccess.obtainConnection(JdbcEnvironmentInitiator.java:316) ~[hibernate-core-6.2.5.Final.jar:6.2.5.Final]\n    at org.hibernate.resource.transaction.backend.jdbc.internal.DdlTransactionIsolatorNonJtaImpl.getIsolatedConnection(DdlTransactionIsolatorNonJtaImpl.java:46) ~[hibernate-core-6.2.5.Final.jar:6.2.5.Final]\n    ... 48 common frames omitted\nCaused by: com.mysql.cj.jdbc.exceptions.CommunicationsException: Communications link failure\n\nThe last packet sent successfully to the server was 0 milliseconds ago. The driver has not received any packets from the server.\n    at com.mysql.cj.jdbc.exceptions.SQLError.createCommunicationsException(SQLError.java:174) ~[mysql-connector-java-8.0.24.jar:8.0.24]\n    at com.mysql.cj.jdbc.exceptions.SQLExceptionsMapping.translateException(SQLExceptionsMapping.java:64) ~[mysql-connector-java-8.0.24.jar:8.0.24]\n    at com.mysql.cj.jdbc.ConnectionImpl.createNewIO(ConnectionImpl.java:833) ~[mysql-connector-java-8.0.24.jar:8.0.24]\n    at com.mysql.cj.jdbc.ConnectionImpl.&lt;init&gt;(ConnectionImpl.java:453) ~[mysql-connector-java-8.0.24.jar:8.0.24]\n    at com.mysql.cj.jdbc.ConnectionImpl.getInstance(ConnectionImpl.java:246) ~[mysql-connector-java-8.0.24.jar:8.0.24]\n    at com.mysql.cj.jdbc.NonRegisteringDriver.connect(NonRegisteringDriver.java:198) ~[mysql-connector-java-8.0.24.jar:8.0.24]\n    at com.zaxxer.hikari.util.DriverDataSource.getConnection(DriverDataSource.java:138) ~[HikariCP-5.0.1.jar:na]\n    at com.zaxxer.hikari.pool.PoolBase.newConnection(PoolBase.java:359) ~[HikariCP-5.0.1.jar:na]\n    at com.zaxxer.hikari.pool.PoolBase.newPoolEntry(PoolBase.java:201) ~[HikariCP-5.0.1.jar:na]\n    at com.zaxxer.hikari.pool.HikariPool.createPoolEntry(HikariPool.java:470) ~[HikariCP-5.0.1.jar:na]\n    at com.zaxxer.hikari.pool.HikariPool$PoolEntryCreator.call(HikariPool.java:733) ~[HikariCP-5.0.1.jar:na]\n    at com.zaxxer.hikari.pool.HikariPool$PoolEntryCreator.call(HikariPool.java:712) ~[HikariCP-5.0.1.jar:na]\n    at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264) ~[na:na]\n    at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136) ~[na:na]\n    at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635) ~[na:na]\n    at java.base/java.lang.Thread.run(Thread.java:833) ~[na:na]\nCaused by: com.mysql.cj.exceptions.CJCommunicationsException: Communications link failure\n\nThe last packet sent successfully to the server was 0 milliseconds ago. The driver has not received any packets from the server.\n    at jdk.internal.reflect.GeneratedConstructorAccessor30.newInstance(Unknown Source) ~[na:na]\n    at java.base/jdk.internal.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45) ~[na:na]\n    at java.base/java.lang.reflect.Constructor.newInstanceWithCaller(Constructor.java:499) ~[na:na]\n    at java.base/java.lang.reflect.Constructor.newInstance(Constructor.java:480) ~[na:na]\n    at com.mysql.cj.exceptions.ExceptionFactory.createException(ExceptionFactory.java:61) ~[mysql-connector-java-8.0.24.jar:8.0.24]\n    at com.mysql.cj.exceptions.ExceptionFactory.createException(ExceptionFactory.java:105) ~[mysql-connector-java-8.0.24.jar:8.0.24]\n    at com.mysql.cj.exceptions.ExceptionFactory.createException(ExceptionFactory.java:151) ~[mysql-connector-java-8.0.24.jar:8.0.24]\n    at com.mysql.cj.exceptions.ExceptionFactory.createCommunicationsException(ExceptionFactory.java:167) ~[mysql-connector-java-8.0.24.jar:8.0.24]\n    at com.mysql.cj.protocol.a.NativeSocketConnection.connect(NativeSocketConnection.java:89) ~[mysql-connector-java-8.0.24.jar:8.0.24]\n    at com.mysql.cj.NativeSession.connect(NativeSession.java:144) ~[mysql-connector-java-8.0.24.jar:8.0.24]\n    at com.mysql.cj.jdbc.ConnectionImpl.connectOneTryOnly(ConnectionImpl.java:953) ~[mysql-connector-java-8.0.24.jar:8.0.24]\n    at com.mysql.cj.jdbc.ConnectionImpl.createNewIO(ConnectionImpl.java:823) ~[mysql-connector-java-8.0.24.jar:8.0.24]\n    ... 13 common frames omitted\nCaused by: java.net.UnknownHostException: ${DB_HOST}3306: nodename nor servname provided, or not known\n    at java.base/java.net.Inet6AddressImpl.lookupAllHostAddr(Native Method) ~[na:na]\n    at java.base/java.net.InetAddress$PlatformNameService.lookupAllHostAddr(InetAddress.java:934) ~[na:na]\n    at java.base/java.net.InetAddress.getAddressesFromNameService(InetAddress.java:1543) ~[na:na]\n    at java.base/java.net.InetAddress$NameServiceAddresses.get(InetAddress.java:852) ~[na:na]\n    at java.base/java.net.InetAddress.getAllByName0(InetAddress.java:1533) ~[na:na]\n    at java.base/java.net.InetAddress.getAllByName(InetAddress.java:1385) ~[na:na]\n    at java.base/java.net.InetAddress.getAllByName(InetAddress.java:1306) ~[na:na]\n    at com.mysql.cj.protocol.StandardSocketFactory.connect(StandardSocketFactory.java:132) ~[mysql-connector-java-8.0.24.jar:8.0.24]\n    at com.mysql.cj.protocol.a.NativeSocketConnection.connect(NativeSocketConnection.java:63) ~[mysql-connector-java-8.0.24.jar:8.0.24]\n    ... 16 common frames omitted\n\n\nProcess finished with exit code 0\n\nspring:\n  datasource:\n    url: jdbc:mysql://${DB_HOST}:3306/${DB_NAME}?useSSL=false\n    username: ${DB_USERNAME}\n    password: ${DB_PASSWORD}\n    hikari:\n      initialization-fail-timeout: 0\n      driver-class-name: com.mysql.cj.jdbc.Driver\n  jpa:\n    database-platform: org.hibernate.dialect.MySQLDialect\n    properties:\n      hibernate:\n        dialect: org.hibernate.dialect.MySQLDialect\n    generate-ddl: true\n    show-sql: true\n    hibernate:\n      ddl-auto: create\n\napiVersion: apps/v1\nkind: Deployment\nmetadata:\n  name: engineers-user-service\nspec:\n  replicas: 1\n  selector:\n    matchLabels:\n      app:  engineers-user-service\n  template:\n    metadata:\n      labels:\n        app:  engineers-user-service\n    spec:\n      containers:\n        - name:  engineers-user-service\n          image: steven8519/engineers-user-service\n          imagePullPolicy: Always\n          ports:\n            - containerPort: 8080\n          env: # Setting Enviornmental Variables\n            - name: DB_HOST   # Setting Database host address from configMap\n              valueFrom:\n                configMapKeyRef:\n                  name: mysql-conf\n                  key: host\n\n            - name: DB_NAME  # Setting Database name from configMap\n              valueFrom:\n                configMapKeyRef:\n                  name: mysql-conf\n                  key: dbName\n\n            - name: DB_USERNAME  # Setting Database username from Secret\n              valueFrom:\n                secretKeyRef:\n                  name: mysql-credentials\n                  key: username\n\n            - name: DB_PASSWORD # Setting Database password from Secret\n              valueFrom:\n                secretKeyRef:\n                  name: mysql-credentials\n                  key: password\n  strategy:\n    type: RollingUpdate\n    rollingUpdate:\n      maxUnavailable: 25%  # Maximum unavailable pods during update\n      maxSurge: 25%  # Maximum additional pods to create during update\n---\napiVersion: v1\nkind: Service\nmetadata:\n  name:  engineers-user-service\nspec:\n  type: NodePort\n  selector:\n    app: engineers-user-service\n  ports:\n    - nodePort: 30082\n      port: 8080\n      targetPort: 8080\n\n\n\n&lt;dependencies&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;mysql&lt;/groupId&gt;\n            &lt;artifactId&gt;mysql-connector-java&lt;/artifactId&gt;\n            &lt;version&gt;8.0.24&lt;/version&gt;\n            &lt;scope&gt;runtime&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-devtools&lt;/artifactId&gt;\n            &lt;scope&gt;runtime&lt;/scope&gt;\n            &lt;optional&gt;true&lt;/optional&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\n            &lt;artifactId&gt;lombok&lt;/artifactId&gt;\n            &lt;optional&gt;true&lt;/optional&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n    &lt;/dependencies&gt;\n</code></pre>\n"},{"tags":["java","visual-studio-code","vscode-extensions","bazel","bazel-java"],"comments":[{"owner":{"account_id":6605,"reputation":61212,"user_id":11182,"display_name":"Lex Li"},"score":0,"creation_date":1645997426,"post_id":71288496,"comment_id":126010068,"body_markdown":"If you really want a working Java language server running, use Red Hat extension, https://marketplace.visualstudio.com/items?itemName=redhat.java All others can be risky as they have significantly less users and the developers might not be able test in all possible setup (like yours, Windows 11 with WSL).","body":"If you really want a working Java language server running, use Red Hat extension, <a href=\"https://marketplace.visualstudio.com/items?itemName=redhat.java\" rel=\"nofollow noreferrer\">marketplace.visualstudio.com/items?itemName=redhat.java</a> All others can be risky as they have significantly less users and the developers might not be able test in all possible setup (like yours, Windows 11 with WSL)."},{"owner":{"account_id":19275718,"reputation":284,"user_id":14088796,"display_name":"tim117"},"score":0,"creation_date":1646001280,"post_id":71288496,"comment_id":126010757,"body_markdown":"I tried that pulgin, but it still doesn&#39;t seem to have bazel support https://github.com/redhat-developer/vscode-java/issues/909.","body":"I tried that pulgin, but it still doesn&#39;t seem to have bazel support <a href=\"https://github.com/redhat-developer/vscode-java/issues/909\" rel=\"nofollow noreferrer\">github.com/redhat-developer/vscode-java/issues/909</a>."},{"owner":{"account_id":17942799,"reputation":7768,"user_id":13037676,"display_name":"Steven-MSFT"},"score":0,"creation_date":1648105115,"post_id":71288496,"comment_id":126540871,"body_markdown":"@Timothy Altemus Bazel is not supported well in the VSCode for now. But Maven and Gradle work well in the VSCode. Bazel is perfect, but you can also take into account maven or Gradle.","body":"@Timothy Altemus Bazel is not supported well in the VSCode for now. But Maven and Gradle work well in the VSCode. Bazel is perfect, but you can also take into account maven or Gradle."}],"answers":[{"tags":[],"owner":{"account_id":27164888,"reputation":1,"user_id":20702545,"display_name":"Flarebear2"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1670330142,"creation_date":1670330142,"answer_id":74702631,"question_id":71288496,"body_markdown":"I had the same problem. You&#39;re probably trying this as a Windows Standard User. This worked for me...Log out of your Standard User Windows session and log into Windows as an Admin user and then run &#39;VS Code&#39; (make sure the Java extensions are present within this Admin instance of &#39;VS Code&#39;). You should then be able to debug Java code avoiding the error (although the JDK will request access through Windows firewall if not already granted). Once granted, quit &#39;VS Code&#39; and the Admin Windows session. Log back into Windows as Standard User, Right-click &#39;VS Code&#39; and Run As Administrator and use your Admin account to run &#39;VS Code&#39; It should function normally after that, just keep in mind that VS Code is running under your Windows Admin account.","title":"java-language-server vscode extension - Starting client failed","body":"<p>I had the same problem. You're probably trying this as a Windows Standard User. This worked for me...Log out of your Standard User Windows session and log into Windows as an Admin user and then run 'VS Code' (make sure the Java extensions are present within this Admin instance of 'VS Code'). You should then be able to debug Java code avoiding the error (although the JDK will request access through Windows firewall if not already granted). Once granted, quit 'VS Code' and the Admin Windows session. Log back into Windows as Standard User, Right-click 'VS Code' and Run As Administrator and use your Admin account to run 'VS Code' It should function normally after that, just keep in mind that VS Code is running under your Windows Admin account.</p>\n"},{"tags":[],"owner":{"account_id":7154761,"reputation":1,"user_id":5467621,"display_name":"Rahul"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1699333166,"creation_date":1699333166,"answer_id":77435648,"question_id":71288496,"body_markdown":"If it&#39;s for java 17 and above, adding this to your settings.json will solve the issue:\r\n    `&quot;java.jdt.ls.java.home&quot;: &quot;C:\\\\dev\\\\jdk\\\\jdk17.0.6&quot;`\r\n\r\nThis specifies the folder path to the JDK (17 or more recent) used to launch the Java Language Server. This setting will replace the Java extension&#39;s embedded JRE to start the Java Language Server.\r\n\r\n","title":"java-language-server vscode extension - Starting client failed","body":"<p>If it's for java 17 and above, adding this to your settings.json will solve the issue:\n<code>&quot;java.jdt.ls.java.home&quot;: &quot;C:\\\\dev\\\\jdk\\\\jdk17.0.6&quot;</code></p>\n<p>This specifies the folder path to the JDK (17 or more recent) used to launch the Java Language Server. This setting will replace the Java extension's embedded JRE to start the Java Language Server.</p>\n"}],"owner":{"account_id":19275718,"reputation":284,"user_id":14088796,"display_name":"tim117"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":3347,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":2,"score":1,"last_activity_date":1699333166,"creation_date":1645996338,"question_id":71288496,"body_markdown":"I&#39;m trying to use the [java-language-server](https://github.com/georgewfraser/java-language-server) vscode extension, but I am getting an error that the extension is not starting up:\r\n\r\n```\r\n[Error - 11:07:14 AM] Starting client failed\r\nError: spawn UNKNOWN\r\n    at ChildProcess.spawn (internal/child_process.js:403:11)\r\n    at Object.spawn (child_process.js:570:9)\r\n    at c:\\Users\\tdalt\\.vscode-insiders\\extensions\\georgewfraser.vscode-javac-0.2.39\\node_modules\\vscode-languageclient\\lib\\main.js:357:40\r\n```\r\n\r\nLooks like that line is trying to run this script: [`dist\\lang_server_windows.sh`](https://github.com/georgewfraser/java-language-server/blob/master/dist/lang_server_windows.sh). When I manually run that script, I get this error:\r\n\r\n```\r\n/mnt/c/Users/tdalt/.vscode-insiders/extensions/georgewfraser.vscode-javac-0.2.39/dist/launch_windows.sh: 13: /mnt/c/Users/tdalt/.vscode-insiders/extensions/georgewfraser.vscode-javac-0.2.39/dist/windows/bin/java: not found\r\n```\r\n\r\nwhich makes me think that something needs to run before that script runs.\r\n\r\nHaven&#39;t looked much more into it than that. I have heard good things about this extension, but just haven&#39;t been able to get it working. Has anyone run into this issue before or is able to help me resolve it?\r\n\r\nMy `java -version` results in\r\n\r\n```\r\nopenjdk version &quot;11.0.9.1&quot; 2020-11-04 LTS\r\nOpenJDK Runtime Environment Zulu11.43+55-CA (build 11.0.9.1+1-LTS)\r\nOpenJDK 64-Bit Server VM Zulu11.43+55-CA (build 11.0.9.1+1-LTS, mixed mode)\r\n```\r\n\r\nOperating System: Windows 11 Home v22000.493&lt;br/&gt;\r\nVS Code: VSCode-Insiders (Latest version)\r\n\r\nAs a side note, if anyone has a good vscode bazel setup for Java, I would love to hear any tips on setup.","title":"java-language-server vscode extension - Starting client failed","body":"<p>I'm trying to use the <a href=\"https://github.com/georgewfraser/java-language-server\" rel=\"nofollow noreferrer\">java-language-server</a> vscode extension, but I am getting an error that the extension is not starting up:</p>\n<pre><code>[Error - 11:07:14 AM] Starting client failed\nError: spawn UNKNOWN\n    at ChildProcess.spawn (internal/child_process.js:403:11)\n    at Object.spawn (child_process.js:570:9)\n    at c:\\Users\\tdalt\\.vscode-insiders\\extensions\\georgewfraser.vscode-javac-0.2.39\\node_modules\\vscode-languageclient\\lib\\main.js:357:40\n</code></pre>\n<p>Looks like that line is trying to run this script: <a href=\"https://github.com/georgewfraser/java-language-server/blob/master/dist/lang_server_windows.sh\" rel=\"nofollow noreferrer\"><code>dist\\lang_server_windows.sh</code></a>. When I manually run that script, I get this error:</p>\n<pre><code>/mnt/c/Users/tdalt/.vscode-insiders/extensions/georgewfraser.vscode-javac-0.2.39/dist/launch_windows.sh: 13: /mnt/c/Users/tdalt/.vscode-insiders/extensions/georgewfraser.vscode-javac-0.2.39/dist/windows/bin/java: not found\n</code></pre>\n<p>which makes me think that something needs to run before that script runs.</p>\n<p>Haven't looked much more into it than that. I have heard good things about this extension, but just haven't been able to get it working. Has anyone run into this issue before or is able to help me resolve it?</p>\n<p>My <code>java -version</code> results in</p>\n<pre><code>openjdk version &quot;11.0.9.1&quot; 2020-11-04 LTS\nOpenJDK Runtime Environment Zulu11.43+55-CA (build 11.0.9.1+1-LTS)\nOpenJDK 64-Bit Server VM Zulu11.43+55-CA (build 11.0.9.1+1-LTS, mixed mode)\n</code></pre>\n<p>Operating System: Windows 11 Home v22000.493<br/>\nVS Code: VSCode-Insiders (Latest version)</p>\n<p>As a side note, if anyone has a good vscode bazel setup for Java, I would love to hear any tips on setup.</p>\n"},{"tags":["java","arrays","arraylist"],"comments":[{"owner":{"account_id":3701688,"reputation":3358,"user_id":3081206,"display_name":"takendarkk"},"score":4,"creation_date":1536251766,"post_id":52208624,"comment_id":91366540,"body_markdown":"&quot;_What&#39;s the meaning of .boxed() and .collect(Collectors.toList())?_&quot; Did you read the documentation for those methods? Which part of that documentation was not clear?","body":"&quot;<i>What&#39;s the meaning of .boxed() and .collect(Collectors.toList())?</i>&quot; Did you read the documentation for those methods? Which part of that documentation was not clear?"},{"owner":{"account_id":11847741,"reputation":1026,"user_id":8669863,"display_name":"Vivek Pakmode"},"score":0,"creation_date":1536252218,"post_id":52208624,"comment_id":91366778,"body_markdown":"Possible duplicate of [Why doesn&#39;t Collectors.toList() work on primitive collections?](https://stackoverflow.com/questions/38964268/why-doesnt-collectors-tolist-work-on-primitive-collections)","body":"Possible duplicate of <a href=\"https://stackoverflow.com/questions/38964268/why-doesnt-collectors-tolist-work-on-primitive-collections\">Why doesn&#39;t Collectors.toList() work on primitive collections?</a>"},{"owner":{"account_id":11564221,"reputation":5963,"user_id":8473028,"accept_rate":94,"display_name":"DodgyCodeException"},"score":0,"creation_date":1536252703,"post_id":52208624,"comment_id":91367014,"body_markdown":"Note that `.collect(Collectors.toList())` does not necessarily return an `ArrayList`; it could be some other kind of list. I presume you specifically want an ArrayList because you create one in your first code snippet.","body":"Note that <code>.collect(Collectors.toList())</code> does not necessarily return an <code>ArrayList</code>; it could be some other kind of list. I presume you specifically want an ArrayList because you create one in your first code snippet."}],"answers":[{"tags":[],"owner":{"account_id":458224,"reputation":37507,"user_id":857994,"accept_rate":97,"display_name":"John Humphreys"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1536252093,"creation_date":1536252093,"answer_id":52208740,"question_id":52208624,"body_markdown":"https://howtodoinjava.com/java8/java8-boxed-intstream/\r\n\r\n&gt; To convert a stream of primitives, you must first box the elements in their wrapper class and then collect them. This type of stream in called boxed stream.\r\n\r\nSo, `int` is a primitive version of `Integer` (i.e. its not an object reference).  So, you have to convert the primitive data type to the Integer object reference.\r\n\r\nThe primitive is not an acceptable parameter to `Arrays.asList()`.\r\n\r\nAs for collect() - That is just the standard method to convert a stream of elements back into a result collection.  You could make it int a list, a set, a map (if you had a value you&#39;d like to put next to it), or whatever.","title":"Converting Arrays to List","body":"<p><a href=\"https://howtodoinjava.com/java8/java8-boxed-intstream/\" rel=\"nofollow noreferrer\">https://howtodoinjava.com/java8/java8-boxed-intstream/</a></p>\n\n<blockquote>\n  <p>To convert a stream of primitives, you must first box the elements in their wrapper class and then collect them. This type of stream in called boxed stream.</p>\n</blockquote>\n\n<p>So, <code>int</code> is a primitive version of <code>Integer</code> (i.e. its not an object reference).  So, you have to convert the primitive data type to the Integer object reference.</p>\n\n<p>The primitive is not an acceptable parameter to <code>Arrays.asList()</code>.</p>\n\n<p>As for collect() - That is just the standard method to convert a stream of elements back into a result collection.  You could make it int a list, a set, a map (if you had a value you'd like to put next to it), or whatever.</p>\n"},{"tags":[],"owner":{"account_id":367127,"reputation":15366,"user_id":713106,"accept_rate":100,"display_name":"Brad"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1536264807,"creation_date":1536252208,"answer_id":52208761,"question_id":52208624,"body_markdown":"It&#39;s when a primitive `int` when converted to it&#39;s *boxed* equivalent `Integer` class. All Java primitives have a boxed equivalent class (boolean -&gt; Boolean, long -&gt; Long, etc).\r\n\r\nSo in your example you are converting a `Stream` of primitive `int` into a `Stream&lt;Integer&gt;` when you call `.boxed()`","title":"Converting Arrays to List","body":"<p>It's when a primitive <code>int</code> when converted to it's <em>boxed</em> equivalent <code>Integer</code> class. All Java primitives have a boxed equivalent class (boolean -> Boolean, long -> Long, etc).</p>\n\n<p>So in your example you are converting a <code>Stream</code> of primitive <code>int</code> into a <code>Stream&lt;Integer&gt;</code> when you call <code>.boxed()</code></p>\n"},{"tags":[],"owner":{"account_id":8598286,"reputation":11087,"user_id":6440704,"display_name":"Anton Balaniuc"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1536253803,"creation_date":1536253803,"answer_id":52209118,"question_id":52208624,"body_markdown":"`Arrays.stream(intArray)` returns an `IntStream` -  a sequence of primitive int-valued elements. Now if we check [javadocs][1] for `IntStream` we can see that there isn&#39;t method `collect` which accepts an instance of `Collector`. On the contrary there is the following [method][2]:\r\n \r\n\r\n    IntStream#collect(Supplier,ObjIntConsumer,BiConsumer)\r\n\r\n&gt; Performs a mutable reduction operation on the elements of this stream.\r\n\r\nYou still can transform your `IntStream` into a `List` without using `boxed`. \r\n\r\n    List&lt;Integer&gt; list = Arrays.stream(intArray)\r\n                 .collect(ArrayList::new, ArrayList::add, ArrayList::addAll);\r\n\r\nIt works in the following way:\r\n\r\n - `ArrayList::new` is a Supplier - a function that creates a new result container, in our case a new ArrayList.\r\n - `ArrayList::add` is a ObjIntConsumer - a function which adds an additional element into a result container. \r\n - `ArrayList::addAll` is a BiConsumer - a function for combining two values. It is used when stream is executed in parallel to combine two partial results. In this case if stream produces 2 `ArrayList` we need to combine them into one and proceed to the next stage. \r\n\r\nAll these 3 elements could be abstracted into one single call using `collect(Collectors.toList())`. But in order to use a `Collector` an primitive stream `IntStream` must be converted to more general `Stream&lt;Integer&gt;`. This could be done using `boxed()` method which just performs this conversion. \r\n\r\nI hope this helps.\r\n\r\n  [1]: https://docs.oracle.com/javase/8/docs/api/java/util/stream/IntStream.html\r\n  [2]: https://docs.oracle.com/javase/8/docs/api/java/util/stream/IntStream.html#collect-java.util.function.Supplier-java.util.function.ObjIntConsumer-java.util.function.BiConsumer-","title":"Converting Arrays to List","body":"<p><code>Arrays.stream(intArray)</code> returns an <code>IntStream</code> -  a sequence of primitive int-valued elements. Now if we check <a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/stream/IntStream.html\" rel=\"nofollow noreferrer\">javadocs</a> for <code>IntStream</code> we can see that there isn't method <code>collect</code> which accepts an instance of <code>Collector</code>. On the contrary there is the following <a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/stream/IntStream.html#collect-java.util.function.Supplier-java.util.function.ObjIntConsumer-java.util.function.BiConsumer-\" rel=\"nofollow noreferrer\">method</a>:</p>\n\n<pre><code>IntStream#collect(Supplier,ObjIntConsumer,BiConsumer)\n</code></pre>\n\n<blockquote>\n  <p>Performs a mutable reduction operation on the elements of this stream.</p>\n</blockquote>\n\n<p>You still can transform your <code>IntStream</code> into a <code>List</code> without using <code>boxed</code>. </p>\n\n<pre><code>List&lt;Integer&gt; list = Arrays.stream(intArray)\n             .collect(ArrayList::new, ArrayList::add, ArrayList::addAll);\n</code></pre>\n\n<p>It works in the following way:</p>\n\n<ul>\n<li><code>ArrayList::new</code> is a Supplier - a function that creates a new result container, in our case a new ArrayList.</li>\n<li><code>ArrayList::add</code> is a ObjIntConsumer - a function which adds an additional element into a result container. </li>\n<li><code>ArrayList::addAll</code> is a BiConsumer - a function for combining two values. It is used when stream is executed in parallel to combine two partial results. In this case if stream produces 2 <code>ArrayList</code> we need to combine them into one and proceed to the next stage. </li>\n</ul>\n\n<p>All these 3 elements could be abstracted into one single call using <code>collect(Collectors.toList())</code>. But in order to use a <code>Collector</code> an primitive stream <code>IntStream</code> must be converted to more general <code>Stream&lt;Integer&gt;</code>. This could be done using <code>boxed()</code> method which just performs this conversion. </p>\n\n<p>I hope this helps.</p>\n"},{"tags":[],"owner":{"account_id":12285714,"reputation":983,"user_id":8965245,"display_name":"Nawnit Sen"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1536254369,"creation_date":1536254369,"answer_id":52209244,"question_id":52208624,"body_markdown":"*First of all why you need the second way is because you can&#39;t have List of primitive data type ,as the String is an object in java thats why you were able to convert array of string to list of string using 1st technique, but since int is primit*ive data type thats&#39;y you need to convert it to Integer first then create a list.\r\n\r\n***Let me split this whole line in three part***\r\n\r\n    List&lt;Integer&gt; list=Arrays.stream(intArray).boxed().collect(Collectors.toList());\r\n\r\n \r\n1.`Arrays.stream(intArray)`: \r\n\r\n&gt; This will take input as an arrays (here intArray) and return a stream\r\n&gt; of elements present in array.\r\n\r\n2.`.boxed()` : \r\n\r\n&gt; Boxing and unboxing in java is conversion of primitive data type to\r\n&gt; Wrapper(reference data type) and vice-versa. now this methos `boxed()`\r\n&gt; works on stream of input data and return an stream of Integer after\r\n&gt; boxing each element in the stream to Integer.\r\n\r\n3.`collect(Collectors.toList()):`\r\n\r\n&gt;  now that you have got stream of Integer from `boxed()`  you need to\r\n&gt; store it to some collection. `collect()` works on stream of data and \r\n&gt; the paramter passed to it tells the type collections to which  data of\r\n&gt; the stream should  be mapped to. in your case it is list so\r\n&gt; `Collector.toList()` is used. .","title":"Converting Arrays to List","body":"<p><em>First of all why you need the second way is because you can't have List of primitive data type ,as the String is an object in java thats why you were able to convert array of string to list of string using 1st technique, but since int is primit</em>ive data type thats'y you need to convert it to Integer first then create a list.</p>\n\n<p><strong><em>Let me split this whole line in three part</em></strong></p>\n\n<pre><code>List&lt;Integer&gt; list=Arrays.stream(intArray).boxed().collect(Collectors.toList());\n</code></pre>\n\n<p>1.<code>Arrays.stream(intArray)</code>: </p>\n\n<blockquote>\n  <p>This will take input as an arrays (here intArray) and return a stream\n  of elements present in array.</p>\n</blockquote>\n\n<p>2.<code>.boxed()</code> : </p>\n\n<blockquote>\n  <p>Boxing and unboxing in java is conversion of primitive data type to\n  Wrapper(reference data type) and vice-versa. now this methos <code>boxed()</code>\n  works on stream of input data and return an stream of Integer after\n  boxing each element in the stream to Integer.</p>\n</blockquote>\n\n<p>3.<code>collect(Collectors.toList()):</code></p>\n\n<blockquote>\n  <p>now that you have got stream of Integer from <code>boxed()</code>  you need to\n  store it to some collection. <code>collect()</code> works on stream of data and \n  the paramter passed to it tells the type collections to which  data of\n  the stream should  be mapped to. in your case it is list so\n  <code>Collector.toList()</code> is used. .</p>\n</blockquote>\n"}],"owner":{"account_id":13756332,"reputation":142,"user_id":9927181,"display_name":"uiguyf ufdiutd"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1116,"favorite_count":0,"down_vote_count":1,"up_vote_count":2,"answer_count":4,"score":1,"last_activity_date":1699333137,"creation_date":1536251601,"question_id":52208624,"body_markdown":"I&#39;ve got small question about converting an array to a list. Let&#39;s say I&#39;ve got an array of Strings. If I&#39;d like to have it as a list I code sth like this:\r\n\r\n    List&lt;String&gt; list = new ArrayList&lt;&gt;(Arrays.asList(stringArray)); \r\n\r\nBut If I got the same situation but my array was an array of ints I&#39;d had to do converting this way:\r\n\r\n    List&lt;Integer&gt; list = Arrays.stream(intArray).boxed().collect(Collectors.toList());\r\n\r\nWhy? What&#39;s the meaning of .boxed() and .collect(Collectors.toList())?","title":"Converting Arrays to List","body":"<p>I've got small question about converting an array to a list. Let's say I've got an array of Strings. If I'd like to have it as a list I code sth like this:</p>\n\n<pre><code>List&lt;String&gt; list = new ArrayList&lt;&gt;(Arrays.asList(stringArray)); \n</code></pre>\n\n<p>But If I got the same situation but my array was an array of ints I'd had to do converting this way:</p>\n\n<pre><code>List&lt;Integer&gt; list = Arrays.stream(intArray).boxed().collect(Collectors.toList());\n</code></pre>\n\n<p>Why? What's the meaning of .boxed() and .collect(Collectors.toList())?</p>\n"},{"tags":["java","image","velocity"],"owner":{"account_id":9307404,"reputation":1,"user_id":6910545,"display_name":"walla"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":24,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1699332147,"creation_date":1699330677,"question_id":77435536,"body_markdown":"Cannot embed static image link(AWS link to my-logo.png) in java VelocityEngine.\r\n\r\n\r\n\r\nIn java code:\r\n\r\n```\r\nvelocityContext.put(&quot;esc&quot;, new EscapeTool());\r\n```\r\n\r\nAnd in .vm file:\r\n\r\n```\r\n&lt;img src=&quot;$esc.url(&#39;https://s3.amazonaws.com/static.myproject.com/project-static/logos/my-logo.png&#39;)&quot; alt=&quot;PR logo&quot;&gt;\r\n```\r\nI&#39;m getting a rendering error. I am able to see the link if I wrap it with some other html tag like `&lt;p&gt; or &lt;h2&gt;`, but when I put it inside `&lt;img src=&quot;...&quot;&gt;` in order to see the logo itself and not the url to it, then the page cannot be rendered and I see the following standard error: This site cant be reachedThe webpage at http://localhost:8080/... might be temporarily down or it may have moved permanently to a new web address. ERR_INVALID_RESPONSE&quot;).\r\nPlease assist. ","title":"Cannot make logo to show up on html page(&lt;img&gt; tag) using VelocityEngine","body":"<p>Cannot embed static image link(AWS link to my-logo.png) in java VelocityEngine.</p>\n<p>In java code:</p>\n<pre><code>velocityContext.put(&quot;esc&quot;, new EscapeTool());\n</code></pre>\n<p>And in .vm file:</p>\n<pre><code>&lt;img src=&quot;$esc.url('https://s3.amazonaws.com/static.myproject.com/project-static/logos/my-logo.png')&quot; alt=&quot;PR logo&quot;&gt;\n</code></pre>\n<p>I'm getting a rendering error. I am able to see the link if I wrap it with some other html tag like <code>&lt;p&gt; or &lt;h2&gt;</code>, but when I put it inside <code>&lt;img src=&quot;...&quot;&gt;</code> in order to see the logo itself and not the url to it, then the page cannot be rendered and I see the following standard error: This site cant be reachedThe webpage at http://localhost:8080/... might be temporarily down or it may have moved permanently to a new web address. ERR_INVALID_RESPONSE&quot;).\nPlease assist.</p>\n"},{"tags":["java","spring-boot","mockito","junit5","junit-jupiter"],"comments":[{"owner":{"account_id":6520,"reputation":10523,"user_id":11002,"accept_rate":75,"display_name":"tgdavies"},"score":0,"creation_date":1689039974,"post_id":76656660,"comment_id":135153675,"body_markdown":"It&#39;s not clear why you are making this a `@SpringBootTest` instead of just a normal junit test. Please edit your question to show your `UserService` class.","body":"It&#39;s not clear why you are making this a <code>@SpringBootTest</code> instead of just a normal junit test. Please edit your question to show your <code>UserService</code> class."},{"owner":{"account_id":4912982,"reputation":14853,"user_id":3957754,"accept_rate":50,"display_name":"JRichardsz"},"score":0,"creation_date":1689045536,"post_id":76656660,"comment_id":135154028,"body_markdown":"Share us a reproducible sample","body":"Share us a reproducible sample"},{"owner":{"account_id":8411689,"reputation":21,"user_id":6313370,"accept_rate":0,"display_name":"User23"},"score":0,"creation_date":1689046520,"post_id":76656660,"comment_id":135154091,"body_markdown":"after removing the @SpringBootTest getting same result","body":"after removing the @SpringBootTest getting same result"},{"owner":{"account_id":6520,"reputation":10523,"user_id":11002,"accept_rate":75,"display_name":"tgdavies"},"score":0,"creation_date":1689046609,"post_id":76656660,"comment_id":135154096,"body_markdown":"If you remove @SpringBootTest you&#39;ll need to make other changes to turn it into a normal Mockito based unit test.","body":"If you remove @SpringBootTest you&#39;ll need to make other changes to turn it into a normal Mockito based unit test."},{"owner":{"account_id":39208,"reputation":251210,"user_id":112968,"accept_rate":68,"display_name":"knittl"},"score":0,"creation_date":1689143730,"post_id":76656660,"comment_id":135169596,"body_markdown":"You must not run this test with `@MockitoExtension`, only with `@SpringBootTest` (you are using `@MockBean` from Spring Boot, not `@Mock` from Mockito)","body":"You must not run this test with <code>@MockitoExtension</code>, only with <code>@SpringBootTest</code> (you are using <code>@MockBean</code> from Spring Boot, not <code>@Mock</code> from Mockito)"}],"answers":[{"tags":[],"owner":{"account_id":6520,"reputation":10523,"user_id":11002,"accept_rate":75,"display_name":"tgdavies"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1689051133,"creation_date":1689051133,"answer_id":76658797,"question_id":76656660,"body_markdown":"This test does not need to start the whole Spring context. It should be a simple, straightforward Mockito test:\r\n\r\n```\r\n@ExtendWith(MockitoExtension.class)\r\npublic class UserServiceTest {\r\n\r\n    @InjectMocks\r\n    UserService service;\r\n\r\n    @Mock\r\n    private ReadDao readDao;\r\n\r\n    @Test\r\n    public void getDataTest() {\r\n\r\n        Map&lt;String, User&gt; userMap = new HashMap&lt;&gt;();\r\n        userMap.put(&quot;Admin&quot;, new User(1,&quot;john&quot;));\r\n        when(readDao.getData(any())).thenReturn(userMap);\r\n\r\n       User user = service.getUserData();\r\n    }\r\n}\r\n```","title":"Unable to mock dao in service class","body":"<p>This test does not need to start the whole Spring context. It should be a simple, straightforward Mockito test:</p>\n<pre><code>@ExtendWith(MockitoExtension.class)\npublic class UserServiceTest {\n\n    @InjectMocks\n    UserService service;\n\n    @Mock\n    private ReadDao readDao;\n\n    @Test\n    public void getDataTest() {\n\n        Map&lt;String, User&gt; userMap = new HashMap&lt;&gt;();\n        userMap.put(&quot;Admin&quot;, new User(1,&quot;john&quot;));\n        when(readDao.getData(any())).thenReturn(userMap);\n\n       User user = service.getUserData();\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":8091247,"reputation":51,"user_id":6097107,"display_name":"jayesh saini"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1699332104,"creation_date":1699332104,"answer_id":77435595,"question_id":76656660,"body_markdown":"Try to inject the dependencies through constructor instead of Autowire in your UserService, then you can write a simple junit test without loading the whole spring context\r\n\r\n    @Component\r\n    @RequiredArgsConstructor\r\n    public class UserService {\r\n    \r\n        private ReadDao readDao;\r\n    \r\n        @Value(&quot;${app.user.role}&quot;)\r\n        private String role;\r\n    \r\n        public User getUserData() {\r\n            User user = null;\r\n            try {\r\n                user = readDao.getData(&quot;name&quot;);\r\n            } catch (DataNotFoundException e) {\r\n                //do nothing. return empty \r\n            }\r\n            return user;\r\n        }\r\n    }\r\n\r\nNow your test class will look like this\r\n\r\n\r\n    @ExtendWith({MockitoExtension.class})\r\n    public class UserServiceTest {\r\n        @InjectMocks\r\n        UserService service;\r\n    \r\n        @Mock\r\n        private ReadDao readDao;\r\n    \r\n        @Test\r\n        public void getDataTest() {\r\n    \r\n            Map&lt;String, User&gt; userMap = new HashMap&lt;&gt;();\r\n            userMap.put(&quot;Admin&quot;, new User(1,&quot;john&quot;));\r\n            when(readDao.getData(any())).thenReturn(userMap);\r\n    \r\n           User user = service.getUserData();\r\n        }\r\n    }\r\n","title":"Unable to mock dao in service class","body":"<p>Try to inject the dependencies through constructor instead of Autowire in your UserService, then you can write a simple junit test without loading the whole spring context</p>\n<pre><code>@Component\n@RequiredArgsConstructor\npublic class UserService {\n\n    private ReadDao readDao;\n\n    @Value(&quot;${app.user.role}&quot;)\n    private String role;\n\n    public User getUserData() {\n        User user = null;\n        try {\n            user = readDao.getData(&quot;name&quot;);\n        } catch (DataNotFoundException e) {\n            //do nothing. return empty \n        }\n        return user;\n    }\n}\n</code></pre>\n<p>Now your test class will look like this</p>\n<pre><code>@ExtendWith({MockitoExtension.class})\npublic class UserServiceTest {\n    @InjectMocks\n    UserService service;\n\n    @Mock\n    private ReadDao readDao;\n\n    @Test\n    public void getDataTest() {\n\n        Map&lt;String, User&gt; userMap = new HashMap&lt;&gt;();\n        userMap.put(&quot;Admin&quot;, new User(1,&quot;john&quot;));\n        when(readDao.getData(any())).thenReturn(userMap);\n\n       User user = service.getUserData();\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":8411689,"reputation":21,"user_id":6313370,"accept_rate":0,"display_name":"User23"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":109,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1699332104,"creation_date":1689016300,"question_id":76656660,"body_markdown":"I have written junit 5 for service and controller but I am not able to mock service and dao. Its calling actual method of service and dao class.\r\n\r\n```\r\n@SpringBootTest(classes = {UserService.class})\r\n@ExtendWith(MockitoExtension.class)\r\n@ImportAutoConfiguration(RefreshAutoConfiguration.class)\r\npublic class UserServiceTest {\r\n\r\n    @Autowired\r\n    UserService service;\r\n\r\n    @MockBean\r\n    private ReadDao readDao;\r\n\r\n    @Test\r\n    public void getDataTest() {\r\n\r\n        Map&lt;String, User&gt; userMap = new HashMap&lt;&gt;();\r\n\t\tuserMap.put(&quot;Admin&quot;, new User(1,&quot;john&quot;));\r\n        when(readDao.getData(any())).thenReturn(userMap);\r\n\r\n       User user = service.getUserData();\r\n    }\r\n}\r\n```\r\nUserService\r\n\r\n    @Component\r\n    public class UserService {\r\n    \r\n        @Autowired\r\n        private ReadDao readDao;\r\n    \r\n    \t@Value(&quot;${app.user.role}&quot;)\r\n        private String role;\r\n    \r\n        public User getUserData() {\r\n            User user = null;\r\n            try {\r\n                user = readDao.getData(&quot;name&quot;);\r\n            } catch (DataNotFoundException e) {\r\n                //do nothing. return empty \r\n            }\r\n            return user;\r\n        }\r\n    }\r\n\r\n@MockBean is not create mock object, its creating actual object so call goes to dao layer.\r\nAm I missing anything? Same happened with controller, when I tried to mock service its calling actual method of service class.","title":"Unable to mock dao in service class","body":"<p>I have written junit 5 for service and controller but I am not able to mock service and dao. Its calling actual method of service and dao class.</p>\n<pre><code>@SpringBootTest(classes = {UserService.class})\n@ExtendWith(MockitoExtension.class)\n@ImportAutoConfiguration(RefreshAutoConfiguration.class)\npublic class UserServiceTest {\n\n    @Autowired\n    UserService service;\n\n    @MockBean\n    private ReadDao readDao;\n\n    @Test\n    public void getDataTest() {\n\n        Map&lt;String, User&gt; userMap = new HashMap&lt;&gt;();\n        userMap.put(&quot;Admin&quot;, new User(1,&quot;john&quot;));\n        when(readDao.getData(any())).thenReturn(userMap);\n\n       User user = service.getUserData();\n    }\n}\n</code></pre>\n<p>UserService</p>\n<pre><code>@Component\npublic class UserService {\n\n    @Autowired\n    private ReadDao readDao;\n\n    @Value(&quot;${app.user.role}&quot;)\n    private String role;\n\n    public User getUserData() {\n        User user = null;\n        try {\n            user = readDao.getData(&quot;name&quot;);\n        } catch (DataNotFoundException e) {\n            //do nothing. return empty \n        }\n        return user;\n    }\n}\n</code></pre>\n<p>@MockBean is not create mock object, its creating actual object so call goes to dao layer.\nAm I missing anything? Same happened with controller, when I tried to mock service its calling actual method of service class.</p>\n"},{"tags":["java","format","rounding"],"answers":[{"tags":[],"owner":{"account_id":4819600,"reputation":56500,"user_id":3890632,"display_name":"khelwood"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1572947910,"creation_date":1572947910,"answer_id":58708816,"question_id":58708706,"body_markdown":"If you&#39;re trying for insert multiple doubles into a string, you mean something like this:\r\n\r\n    System.out.format(&quot;      %.2f        %.2f     %.2f     \\n&quot;, b, a, c);\r\n\r\nWhat you had is passing strings as the arguments to format, and you can&#39;t use `%f` to insert a string argument.\r\n\r\n    System.out.format(&quot;      &quot; + &quot;%.2f&quot;, b + &quot;        &quot; + &quot;%.2f&quot;, a + &quot;     &quot; + &quot;%.2f&quot;, c + &quot;     \\n&quot;);\r\n                      ^^^^^^^^^^^^^^^^^  ^^^^^^^^^^^^^^^^^^^^^^^  ^^^^^^^^^^^^^^^^^^^^  ^^^^^^^^^^^^^\r\n                       format string          string arg 1           string arg 2       string arg 3","title":"Rounding numbers with 2 decimals","body":"<p>If you're trying for insert multiple doubles into a string, you mean something like this:</p>\n\n<pre><code>System.out.format(\"      %.2f        %.2f     %.2f     \\n\", b, a, c);\n</code></pre>\n\n<p>What you had is passing strings as the arguments to format, and you can't use <code>%f</code> to insert a string argument.</p>\n\n<pre><code>System.out.format(\"      \" + \"%.2f\", b + \"        \" + \"%.2f\", a + \"     \" + \"%.2f\", c + \"     \\n\");\n                  ^^^^^^^^^^^^^^^^^  ^^^^^^^^^^^^^^^^^^^^^^^  ^^^^^^^^^^^^^^^^^^^^  ^^^^^^^^^^^^^\n                   format string          string arg 1           string arg 2       string arg 3\n</code></pre>\n"},{"tags":[],"owner":{"account_id":16453416,"reputation":118,"user_id":11886265,"display_name":"Bwalya "},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1699332027,"creation_date":1572948088,"answer_id":58708880,"question_id":58708706,"body_markdown":"Use this\r\n          \r\n          double num = 1.34567;\r\n          DecimalFormat df = new DecimalFormat(&quot;#.##&quot;);\r\n         df.format(num);","title":"Rounding numbers with 2 decimals","body":"<p>Use this</p>\n<pre><code>      double num = 1.34567;\n      DecimalFormat df = new DecimalFormat(&quot;#.##&quot;);\n     df.format(num);\n</code></pre>\n"}],"owner":{"account_id":17036239,"reputation":25,"user_id":12325218,"display_name":"Twannemannn"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":44,"favorite_count":0,"down_vote_count":3,"up_vote_count":0,"closed_date":1572994213,"answer_count":2,"score":-3,"last_activity_date":1699332027,"creation_date":1572947620,"question_id":58708706,"body_markdown":"Please don&#39;t report this question as &#39;already posted or reported&#39; which is NOT the case, it might/should be but it&#39;s NOT. This is a extremely strange performance of JAVA. I also wonder a bit if the one who was responsible for digit-handling is still working for JAVA, cause he/she made a Mess of it!! A jungle of codes and formatting.\r\nAnyway here my ghostly problem. (it&#39;s a part of the code but only the relevant part)\r\nAs you can see all variables (a,b,c and d) are `double`. But it systematically results in `Exception in thread &quot;main&quot; java.util.IllegalFormatConversionException: f != java.lang.String`\r\nWhatever I changed, tried and look about on the internet it keeps on refusing to work. But down below, an example found on Internet does work. But it&#39;s exactly the same!! Both variables are declared as `double`and both converted via the same method!!  \r\n\r\n```java\r\ncase 2:\r\n\t\t\t \r\n\t\t Hypotheek hypspa = new HypSpaar(UitvoerHypotheek.hs,UitvoerHypotheek.lt,UitvoerHypotheek.perc);\r\n\t\t double a =  hypspa.aflossing();\r\n\t\t double b =  hypspa.aflossing();\r\n\t\t double c =  hypspa.rente();\r\n\t\t double d =  (1+((float)UitvoerHypotheek.perc/100));\r\n\t\t \r\n\t\t System.out.println(&quot;jaar&quot; +   &quot;    inleg &quot; + &quot;           gespaard &quot; + &quot;       rente &quot; );\r\n\t\t \r\n\t\t for (int t=1; t&lt;=UitvoerHypotheek.lt; t++)\r\n\t\t {\r\n\t  \t    \r\n\t\t System.out.format(  &quot;      &quot;     +  &quot;%.2f&quot;, b  + &quot;        &quot; + &quot;%.2f&quot;, a  + &quot;     &quot; + &quot;%.2f&quot;, c + &quot;     \\n&quot;);\r\n\t\t \r\n\t\t a =  d*(a) + b;\r\n\t\t \r\n\t\t}\r\n   \r\n```\r\n```\r\njava\r\n\r\npublic class test8 {\r\n    public static void main(String[] args) {\r\n        double num = 1.34567;\r\n        System.out.format(&quot;%.4f&quot;, num);\r\n    }\r\n}\r\n```","title":"Rounding numbers with 2 decimals","body":"<p>Please don't report this question as 'already posted or reported' which is NOT the case, it might/should be but it's NOT. This is a extremely strange performance of JAVA. I also wonder a bit if the one who was responsible for digit-handling is still working for JAVA, cause he/she made a Mess of it!! A jungle of codes and formatting.\nAnyway here my ghostly problem. (it's a part of the code but only the relevant part)\nAs you can see all variables (a,b,c and d) are <code>double</code>. But it systematically results in <code>Exception in thread \"main\" java.util.IllegalFormatConversionException: f != java.lang.String</code>\nWhatever I changed, tried and look about on the internet it keeps on refusing to work. But down below, an example found on Internet does work. But it's exactly the same!! Both variables are declared as <code>double</code>and both converted via the same method!!  </p>\n\n<pre class=\"lang-java prettyprint-override\"><code>case 2:\n\n         Hypotheek hypspa = new HypSpaar(UitvoerHypotheek.hs,UitvoerHypotheek.lt,UitvoerHypotheek.perc);\n         double a =  hypspa.aflossing();\n         double b =  hypspa.aflossing();\n         double c =  hypspa.rente();\n         double d =  (1+((float)UitvoerHypotheek.perc/100));\n\n         System.out.println(\"jaar\" +   \"    inleg \" + \"           gespaard \" + \"       rente \" );\n\n         for (int t=1; t&lt;=UitvoerHypotheek.lt; t++)\n         {\n\n         System.out.format(  \"      \"     +  \"%.2f\", b  + \"        \" + \"%.2f\", a  + \"     \" + \"%.2f\", c + \"     \\n\");\n\n         a =  d*(a) + b;\n\n        }\n\n</code></pre>\n\n<pre><code>java\n\npublic class test8 {\n    public static void main(String[] args) {\n        double num = 1.34567;\n        System.out.format(\"%.4f\", num);\n    }\n}\n</code></pre>\n"},{"tags":["java","spring-boot","resttemplate","okta","okta-api"],"comments":[{"owner":{"account_id":4912982,"reputation":14853,"user_id":3957754,"accept_rate":50,"display_name":"JRichardsz"},"score":0,"creation_date":1698977153,"post_id":77413784,"comment_id":136476089,"body_markdown":"Is this what you need? https://github.com/oktadev/okta-private-key-jwt-python-example/blob/master/get_access_token.py  get_token() Share us at least the hello world starter :)","body":"Is this what you need? <a href=\"https://github.com/oktadev/okta-private-key-jwt-python-example/blob/master/get_access_token.py\" rel=\"nofollow noreferrer\">github.com/oktadev/okta-private-key-jwt-python-example/blob/&zwnj;&#8203;&hellip;</a>  get_token() Share us at least the hello world starter :)"},{"owner":{"account_id":29815032,"reputation":1,"user_id":22849512,"display_name":"Ashok Kumar"},"score":0,"creation_date":1699231113,"post_id":77413784,"comment_id":136501752,"body_markdown":"Yes, do we need to pass private key in payload and OKTA uses pub key to validate and send access token in response?","body":"Yes, do we need to pass private key in payload and OKTA uses pub key to validate and send access token in response?"}],"answers":[{"tags":[],"owner":{"account_id":29815032,"reputation":1,"user_id":22849512,"display_name":"Ashok Kumar"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1699246841,"creation_date":1699246841,"answer_id":77428826,"question_id":77413784,"body_markdown":"For client credentials, basic auth, I am using this code:\r\nHttpHeaders httpHeaders = new HttpHeaders();\r\n\r\n        httpHeaders.setContentType(MediaType.APPLICATION_JSON);\r\n        String auth = &quot;user name&quot;+&quot;:&quot;+&quot;password&quot;;\r\n        byte[] encodedAuth = java.util.Base64.getEncoder().encode(auth.getBytes());\r\n        httpHeaders.set(&quot;Authorization&quot;, &quot;Basic &quot; + new String(encodedAuth));\r\n        httpHeaders.setContentType(MediaType.APPLICATION_FORM_URLENCODED);\r\n        httpHeaders.setAccept(List.of(MediaType.APPLICATION_JSON));\r\n        MultiValueMap&lt;String, String&gt; reqBodyData = new LinkedMultiValueMap&lt;&gt;();\r\n        reqBodyData.add(&quot;grant_type&quot;,&quot;client_credentials&quot;);\r\n        HttpEntity&lt;MultiValueMap&lt;String, String&gt;&gt; requestEntity = new HttpEntity&lt;&gt;(reqBodyData, httpHeaders);\r\n        LinkedHashMap&lt;String, String&gt; result = (LinkedHashMap&lt;String, String&gt;) restTemplate.postForEntity(&quot;&lt;&lt;auth token end point&gt;&gt;&quot;,\r\n                requestEntity, Object.class).getBody();\r\n        String accessToken = result.get(&quot;access_token&quot;);\r\n\r\nWill need to find a way for pub-private key insteasd of basic auth.","title":"Okta Client Credentails - API access","body":"<p>For client credentials, basic auth, I am using this code:\nHttpHeaders httpHeaders = new HttpHeaders();</p>\n<pre><code>    httpHeaders.setContentType(MediaType.APPLICATION_JSON);\n    String auth = &quot;user name&quot;+&quot;:&quot;+&quot;password&quot;;\n    byte[] encodedAuth = java.util.Base64.getEncoder().encode(auth.getBytes());\n    httpHeaders.set(&quot;Authorization&quot;, &quot;Basic &quot; + new String(encodedAuth));\n    httpHeaders.setContentType(MediaType.APPLICATION_FORM_URLENCODED);\n    httpHeaders.setAccept(List.of(MediaType.APPLICATION_JSON));\n    MultiValueMap&lt;String, String&gt; reqBodyData = new LinkedMultiValueMap&lt;&gt;();\n    reqBodyData.add(&quot;grant_type&quot;,&quot;client_credentials&quot;);\n    HttpEntity&lt;MultiValueMap&lt;String, String&gt;&gt; requestEntity = new HttpEntity&lt;&gt;(reqBodyData, httpHeaders);\n    LinkedHashMap&lt;String, String&gt; result = (LinkedHashMap&lt;String, String&gt;) restTemplate.postForEntity(&quot;&lt;&lt;auth token end point&gt;&gt;&quot;,\n            requestEntity, Object.class).getBody();\n    String accessToken = result.get(&quot;access_token&quot;);\n</code></pre>\n<p>Will need to find a way for pub-private key insteasd of basic auth.</p>\n"}],"owner":{"account_id":29815032,"reputation":1,"user_id":22849512,"display_name":"Ashok Kumar"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":53,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1699331904,"creation_date":1698976692,"question_id":77413784,"body_markdown":"I created Oka application (API Services) for machine to machine Auth. I set client authentication as &quot;Public key / Private key&quot;.\r\n\r\nCan someone help with Spring boot application that connects to this API via public/private key method and gets access token.\r\n\r\nI implemented Client Secret authentication by passing credentials in header.\r\n\r\nI am new to public/private key method. Appreciate the help.\r\n\r\nI am trying to implement public/private key auth method to get access token from OKTA.","title":"Okta Client Credentails - API access","body":"<p>I created Oka application (API Services) for machine to machine Auth. I set client authentication as &quot;Public key / Private key&quot;.</p>\n<p>Can someone help with Spring boot application that connects to this API via public/private key method and gets access token.</p>\n<p>I implemented Client Secret authentication by passing credentials in header.</p>\n<p>I am new to public/private key method. Appreciate the help.</p>\n<p>I am trying to implement public/private key auth method to get access token from OKTA.</p>\n"},{"tags":["java","arrays"],"comments":[{"owner":{"account_id":6520,"reputation":10523,"user_id":11002,"accept_rate":75,"display_name":"tgdavies"},"score":3,"creation_date":1698978163,"post_id":77413828,"comment_id":136476161,"body_markdown":"You&#39;ll need to create a new array, shorter than the old one, and copy the numbers you want to keep. Or use a `List`. On your error, what value does `return result` have if the array is empty?","body":"You&#39;ll need to create a new array, shorter than the old one, and copy the numbers you want to keep. Or use a <code>List</code>. On your error, what value does <code>return result</code> have if the array is empty?"},{"owner":{"account_id":6520,"reputation":10523,"user_id":11002,"accept_rate":75,"display_name":"tgdavies"},"score":1,"creation_date":1698978197,"post_id":77413828,"comment_id":136476164,"body_markdown":"But you should work through some Java tutorials.","body":"But you should work through some Java tutorials."},{"owner":{"account_id":6606677,"reputation":1024,"user_id":5103317,"display_name":"Old Dog Programmer"},"score":1,"creation_date":1698982092,"post_id":77413828,"comment_id":136476447,"body_markdown":"Debugging is a useful skill. If you want to become a software developer, or regularly develop software, it will be a necessary skill. Running the code in a debugger will allow you to set a breakpoint, and then run the code one-line-at-a-time while monitoring variables. For more tips, see [How to Debug Small Programs](https://ericlippert.com/2014/03/05/how-to-debug-small-programs/) Hint: Pay attention to `new array` and the inner `for` loop. And try to avoid altering the conents of `myArray`.","body":"Debugging is a useful skill. If you want to become a software developer, or regularly develop software, it will be a necessary skill. Running the code in a debugger will allow you to set a breakpoint, and then run the code one-line-at-a-time while monitoring variables. For more tips, see <a href=\"https://ericlippert.com/2014/03/05/how-to-debug-small-programs/\" rel=\"nofollow noreferrer\">How to Debug Small Programs</a> Hint: Pay attention to <code>new array</code> and the inner <code>for</code> loop. And try to avoid altering the conents of <code>myArray</code>."},{"owner":{"account_id":322981,"reputation":310744,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"score":2,"creation_date":1698995048,"post_id":77413828,"comment_id":136477495,"body_markdown":"By the way, in more advanced Java: `int[] sans42 = Arrays.stream ( new int[] { 7 , 42 , 99 } ).filter ( ( int i ) -&gt; i != 42 ).toArray ( );`","body":"By the way, in more advanced Java: <code>int[] sans42 = Arrays.stream ( new int[] { 7 , 42 , 99 } ).filter ( ( int i ) -&gt; i != 42 ).toArray ( );</code>"}],"answers":[{"tags":[],"owner":{"account_id":29814676,"reputation":390,"user_id":22849234,"display_name":"J.Porter"},"down_vote_count":2,"up_vote_count":0,"is_accepted":false,"score":-2,"last_activity_date":1698981873,"creation_date":1698981589,"answer_id":77414009,"question_id":77413828,"body_markdown":"I hope my answer will help you.\r\n\r\n    public static int[] deleteSingleValue(int[] myArray, Scanner kb){\r\n        if(kb == null || myArray == null || myArray.length &lt; 1)\r\n           throw new IllegalArgumentException(&quot;Error&quot;);\r\n       \r\n         \r\n       System.out.print(&quot;Enter the number you want to remove: &quot;);\r\n       int num = kb.nextInt();\r\n          \r\n       int[] result = new int[myArray.length - 1];\r\n       for(int i = 0, int j = 0; i &lt; myArray.length; i++){\r\n          result[j]=myArray[i];\r\n          if(myArray[i] != num) j++;\r\n       }\r\n       if(result.length != myArray.length) return result;\r\n       return myArray;\r\n    }\r\n","title":"Is there a way to delete a number from an array?","body":"<p>I hope my answer will help you.</p>\n<pre><code>public static int[] deleteSingleValue(int[] myArray, Scanner kb){\n    if(kb == null || myArray == null || myArray.length &lt; 1)\n       throw new IllegalArgumentException(&quot;Error&quot;);\n   \n     \n   System.out.print(&quot;Enter the number you want to remove: &quot;);\n   int num = kb.nextInt();\n      \n   int[] result = new int[myArray.length - 1];\n   for(int i = 0, int j = 0; i &lt; myArray.length; i++){\n      result[j]=myArray[i];\n      if(myArray[i] != num) j++;\n   }\n   if(result.length != myArray.length) return result;\n   return myArray;\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":29814765,"reputation":363,"user_id":22849301,"display_name":"Bob Martin"},"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1699011871,"creation_date":1699011564,"answer_id":77416386,"question_id":77413828,"body_markdown":"In my opinion, your method could waste the source and decrease the speed of performance. I&#39;d recommend like as:\r\n\r\n    int [] result;\r\n    myArray.forEach(i =&gt; typeof i != &quot;number&quot; ? result.push(i) : &quot;&quot;)\r\n    // if the type of the item of myArray is number skip , else push it to result array. Then return result //\r\n    return result;\r\n\r\nGood luck. \r\n  ","title":"Is there a way to delete a number from an array?","body":"<p>In my opinion, your method could waste the source and decrease the speed of performance. I'd recommend like as:</p>\n<pre><code>int [] result;\nmyArray.forEach(i =&gt; typeof i != &quot;number&quot; ? result.push(i) : &quot;&quot;)\n// if the type of the item of myArray is number skip , else push it to result array. Then return result //\nreturn result;\n</code></pre>\n<p>Good luck.</p>\n"},{"tags":[],"owner":{"account_id":23740623,"reputation":1,"user_id":17758716,"display_name":"Reilas"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1699236424,"creation_date":1699072196,"answer_id":77420748,"question_id":77413828,"body_markdown":"&gt; _&quot;... when I turn the code I get an error saying that I didn&#39;t initiate the result. What did I do wrong? ...&quot;_\r\n\r\nA _null_ value will not be inferred here, you&#39;ll need to initialize _result_.\\\r\nIn other words, the _[interpreter](https://en.wikipedia.org/wiki/Interpreter_(computing))_ has no way of knowing whether _result_ is ever assigned a value.\r\n\r\n&gt; _&quot;... I checked if the number is there but I don&#39;t know how to not include the unwanted number. ...&quot;_\r\n\r\nOne approach is to trim _result_ with the _[Arrays#copyOfRange](https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/Arrays.html#copyOfRange(int[],int,int))_ method.\r\n\r\n```java\r\nSystem.out.print(&quot;Enter the number you want to remove: &quot;);\r\nint i, j, num = kb.nextInt();\r\n\r\nint[] result = new int[myArray.length];\r\n\r\nfor(i = 0, j = 0; i &lt; myArray.length; i++)\r\n    if(myArray[i] != num) result[j++] = myArray[i];\r\nresult = Arrays.copyOfRange(result, 0, j);\r\nreturn result;\r\n```\r\n\r\nOr, count the number of values not equal to _num_ first.\r\n\r\n```java\r\nSystem.out.print(&quot;Enter the number you want to remove: &quot;);\r\nint num = kb.nextInt(), x = 0;\r\nfor (int v : myArray) if (v != num) x++;\r\n\r\nint[] result = new int[x];\r\n\r\nfor(int i = 0, j = 0, n = myArray.length; i &lt; n; i++)\r\n    if(myArray[i] != num) result[j++] = myArray[i];\r\nreturn result;\r\n```\r\n\r\nAlternately, utilize the _[Arrays#copyOfRange](https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/Arrays.html#copyOfRange(int[],int,int))_, _[copyOf](https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/Arrays.html#copyOf(int[],int))_, and _[System#arraycopy](https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/System.html#arraycopy(java.lang.Object,int,java.lang.Object,int,int))_ methods.\\\r\nIn this example I&#39;m using _&quot;a&quot;_, instead of _&quot;myArray&quot;_, for readability.\r\n\r\n```java\r\nSystem.out.print(&quot;Enter the number you want to remove: &quot;);\r\nint num = kb.nextInt();\r\n\r\nint[] b;\r\nfor (int i = 0; i &lt; a.length; i++)\r\n    if (a[i] == num) {\r\n        b = Arrays.copyOfRange(a, i + 1, a.length);\r\n        a = Arrays.copyOfRange(a, 0, i--);\r\n        a = Arrays.copyOf(a, a.length + b.length);\r\n        System.arraycopy(b, 0, a, a.length - b.length, b.length);\r\n    }\r\nreturn a;\r\n```\r\n\r\nOr finally, use a _[stream](https://docs.oracle.com/javase/tutorial/collections/streams/index.html)_.\r\n\r\n```java\r\nSystem.out.print(&quot;Enter the number you want to remove: &quot;);\r\nint num = kb.nextInt();\r\n\r\nreturn IntStream.of(myArray)\r\n                .filter(x -&gt; x != num)\r\n                .toArray();\r\n```","title":"Is there a way to delete a number from an array?","body":"<blockquote>\n<p><em>&quot;... when I turn the code I get an error saying that I didn't initiate the result. What did I do wrong? ...&quot;</em></p>\n</blockquote>\n<p>A <em>null</em> value will not be inferred here, you'll need to initialize <em>result</em>.<br />\nIn other words, the <em><a href=\"https://en.wikipedia.org/wiki/Interpreter_(computing)\" rel=\"nofollow noreferrer\">interpreter</a></em> has no way of knowing whether <em>result</em> is ever assigned a value.</p>\n<blockquote>\n<p><em>&quot;... I checked if the number is there but I don't know how to not include the unwanted number. ...&quot;</em></p>\n</blockquote>\n<p>One approach is to trim <em>result</em> with the <em><a href=\"https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/Arrays.html#copyOfRange(int%5B%5D,int,int)\" rel=\"nofollow noreferrer\">Arrays#copyOfRange</a></em> method.</p>\n<pre class=\"lang-java prettyprint-override\"><code>System.out.print(&quot;Enter the number you want to remove: &quot;);\nint i, j, num = kb.nextInt();\n\nint[] result = new int[myArray.length];\n\nfor(i = 0, j = 0; i &lt; myArray.length; i++)\n    if(myArray[i] != num) result[j++] = myArray[i];\nresult = Arrays.copyOfRange(result, 0, j);\nreturn result;\n</code></pre>\n<p>Or, count the number of values not equal to <em>num</em> first.</p>\n<pre class=\"lang-java prettyprint-override\"><code>System.out.print(&quot;Enter the number you want to remove: &quot;);\nint num = kb.nextInt(), x = 0;\nfor (int v : myArray) if (v != num) x++;\n\nint[] result = new int[x];\n\nfor(int i = 0, j = 0, n = myArray.length; i &lt; n; i++)\n    if(myArray[i] != num) result[j++] = myArray[i];\nreturn result;\n</code></pre>\n<p>Alternately, utilize the <em><a href=\"https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/Arrays.html#copyOfRange(int%5B%5D,int,int)\" rel=\"nofollow noreferrer\">Arrays#copyOfRange</a></em>, <em><a href=\"https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/Arrays.html#copyOf(int%5B%5D,int)\" rel=\"nofollow noreferrer\">copyOf</a></em>, and <em><a href=\"https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/System.html#arraycopy(java.lang.Object,int,java.lang.Object,int,int)\" rel=\"nofollow noreferrer\">System#arraycopy</a></em> methods.<br />\nIn this example I'm using <em>&quot;a&quot;</em>, instead of <em>&quot;myArray&quot;</em>, for readability.</p>\n<pre class=\"lang-java prettyprint-override\"><code>System.out.print(&quot;Enter the number you want to remove: &quot;);\nint num = kb.nextInt();\n\nint[] b;\nfor (int i = 0; i &lt; a.length; i++)\n    if (a[i] == num) {\n        b = Arrays.copyOfRange(a, i + 1, a.length);\n        a = Arrays.copyOfRange(a, 0, i--);\n        a = Arrays.copyOf(a, a.length + b.length);\n        System.arraycopy(b, 0, a, a.length - b.length, b.length);\n    }\nreturn a;\n</code></pre>\n<p>Or finally, use a <em><a href=\"https://docs.oracle.com/javase/tutorial/collections/streams/index.html\" rel=\"nofollow noreferrer\">stream</a></em>.</p>\n<pre class=\"lang-java prettyprint-override\"><code>System.out.print(&quot;Enter the number you want to remove: &quot;);\nint num = kb.nextInt();\n\nreturn IntStream.of(myArray)\n                .filter(x -&gt; x != num)\n                .toArray();\n</code></pre>\n"}],"owner":{"account_id":29814906,"reputation":11,"user_id":22849405,"display_name":"Ainsley"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":129,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":3,"score":1,"last_activity_date":1699331745,"creation_date":1698977796,"question_id":77413828,"body_markdown":"I&#39;m trying to create a method that takes an already existing array and takes away a value (given by the user) from the array. I checked if the number is there but I don&#39;t know how to not include the unwanted number.\r\n\r\nAlso when I turn the code I get an error saying that I didn&#39;t initiate the result. What did I do wrong?\r\n\r\n```\r\npublic static int[] deleteSingleValue(int[] myArray, Scanner kb){\r\nif(kb == null || myArray == null || myArray.length &lt; 1){\r\n   throw new IllegalArgumentException(&quot;kb/myArray is null or myArray &lt; 1&quot;);\r\n   }\r\n     \r\n   System.out.print(&quot;Enter the number you want to remove: &quot;);\r\n   int num = kb.nextInt();\r\n      \r\n   int[] result;\r\n      \r\n   for(int i = 0; i &lt; myArray.length; i++){\r\n      if(myArray[i] == num){\r\n      int[] newArray = new int[myArray.length - 1];\r\n         for(i = 0; i &lt; newArray.length; i++){\r\n         myArray[i] = newArray[i];\r\n         }\r\n      result = newArray;\r\n      }\r\n      else{\r\n      System.out.println(&quot;Value NOT found&quot;);\r\n      result = myArray;\r\n      }\r\n   }\r\n   return result;\r\n}\r\n```\r\n\r\nEdit* From the answers I&#39;ve gotten it looks like I needed more than one variable to represent the index so it would skip over the unwanted number but not leave an index blank. \r\n\r\nRather than using &#39;i&#39; for both myArray and new Array, I needed &#39;i&#39; and another variable that increased if `num` was not equal to `myArray[i]`.\r\n\r\nThank you everyone for your help, I&#39;ll work on asking better questions.","title":"Is there a way to delete a number from an array?","body":"<p>I'm trying to create a method that takes an already existing array and takes away a value (given by the user) from the array. I checked if the number is there but I don't know how to not include the unwanted number.</p>\n<p>Also when I turn the code I get an error saying that I didn't initiate the result. What did I do wrong?</p>\n<pre><code>public static int[] deleteSingleValue(int[] myArray, Scanner kb){\nif(kb == null || myArray == null || myArray.length &lt; 1){\n   throw new IllegalArgumentException(&quot;kb/myArray is null or myArray &lt; 1&quot;);\n   }\n     \n   System.out.print(&quot;Enter the number you want to remove: &quot;);\n   int num = kb.nextInt();\n      \n   int[] result;\n      \n   for(int i = 0; i &lt; myArray.length; i++){\n      if(myArray[i] == num){\n      int[] newArray = new int[myArray.length - 1];\n         for(i = 0; i &lt; newArray.length; i++){\n         myArray[i] = newArray[i];\n         }\n      result = newArray;\n      }\n      else{\n      System.out.println(&quot;Value NOT found&quot;);\n      result = myArray;\n      }\n   }\n   return result;\n}\n</code></pre>\n<p>Edit* From the answers I've gotten it looks like I needed more than one variable to represent the index so it would skip over the unwanted number but not leave an index blank.</p>\n<p>Rather than using 'i' for both myArray and new Array, I needed 'i' and another variable that increased if <code>num</code> was not equal to <code>myArray[i]</code>.</p>\n<p>Thank you everyone for your help, I'll work on asking better questions.</p>\n"},{"tags":["java","ldap","ldap-query"],"comments":[{"owner":{"account_id":2979716,"reputation":12923,"user_id":2529954,"display_name":"EricLavault"},"score":0,"creation_date":1573672318,"post_id":58837460,"comment_id":103961772,"body_markdown":"It depends on the server and which backend is being used, it could help to provide these details in the first place.. as @jwilleke mentioned some backend won&#39;t let you move an entry with children.","body":"It depends on the server and which backend is being used, it could help to provide these details in the first place.. as @jwilleke mentioned some backend won&#39;t let you move an entry with children."}],"answers":[{"tags":[],"owner":{"account_id":31959,"reputation":10608,"user_id":88122,"accept_rate":0,"display_name":"jwilleke"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1699331578,"creation_date":1573665576,"answer_id":58842396,"question_id":58837460,"body_markdown":"Using the LDAP protocol this requires a [ModRDN][1] that would &quot;move&quot; the LDAP Entry. (See link for some examples)\r\n\r\nOracle also shows some simple JNDI examples using [Context.rename()][2] \r\n\r\nMost LDAP Server Implementations do NOT support the ModifyDNRequest on an LDAP Entry which contain subordinate entries.\r\n\r\nSome LDAP Server Implementation include a method to move containers. I am aware the these support moving containers, perhaps with some limitations:\r\n\r\n - Microsoft Active Directory\r\n - eDirectory\r\n\r\n\r\n\r\n  [1]: https://ldapwiki.com/wiki/Modrdn\r\n  [2]: https://docs.oracle.com/javase/tutorial/jndi/ldap/rename.html","title":"Is it possible to change the base dn of a user in ldap using java?","body":"<p>Using the LDAP protocol this requires a <a href=\"https://ldapwiki.com/wiki/Modrdn\" rel=\"nofollow noreferrer\">ModRDN</a> that would &quot;move&quot; the LDAP Entry. (See link for some examples)</p>\n<p>Oracle also shows some simple JNDI examples using <a href=\"https://docs.oracle.com/javase/tutorial/jndi/ldap/rename.html\" rel=\"nofollow noreferrer\">Context.rename()</a></p>\n<p>Most LDAP Server Implementations do NOT support the ModifyDNRequest on an LDAP Entry which contain subordinate entries.</p>\n<p>Some LDAP Server Implementation include a method to move containers. I am aware the these support moving containers, perhaps with some limitations:</p>\n<ul>\n<li>Microsoft Active Directory</li>\n<li>eDirectory</li>\n</ul>\n"}],"owner":{"account_id":13431722,"reputation":5,"user_id":9691375,"display_name":"sarath sasidharan"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":629,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1699331578,"creation_date":1573649134,"question_id":58837460,"body_markdown":"My requirement is to migrate the users from ou=people,dc=agroup,dc=com\r\nto dc=1a_archive,dc=com using java\r\ni just want to know if this is possible? if possible please tell me the solution\r\n","title":"Is it possible to change the base dn of a user in ldap using java?","body":"<p>My requirement is to migrate the users from ou=people,dc=agroup,dc=com\nto dc=1a_archive,dc=com using java\ni just want to know if this is possible? if possible please tell me the solution</p>\n"},{"tags":["java","macos","homebrew"],"comments":[{"owner":{"account_id":1352612,"reputation":4119,"user_id":1357094,"accept_rate":85,"display_name":"cellepo"},"score":0,"creation_date":1676172860,"post_id":65601196,"comment_id":133083412,"body_markdown":"If you want openjdk: `brew install openjdk` [https://formulae.brew.sh/formula/openjdk](https://formulae.brew.sh/formula/openjdk)","body":"If you want openjdk: <code>brew install openjdk</code> <a href=\"https://formulae.brew.sh/formula/openjdk\" rel=\"nofollow noreferrer\">https://formulae.brew.sh/formula/openjdk</a>"}],"answers":[{"tags":[],"owner":{"account_id":391815,"reputation":15910,"user_id":752693,"accept_rate":100,"display_name":"Tim Fulmer"},"down_vote_count":0,"up_vote_count":460,"is_accepted":true,"score":460,"last_activity_date":1679420824,"creation_date":1609956927,"answer_id":65601197,"question_id":65601196,"body_markdown":"Turns out `java` has been moved into brew core recently, so the correct command as of August 2022 is:\r\n\r\n```sh\r\nbrew install java\r\n```\r\n\r\nThen check your installation by running \r\n```sh\r\njava -version\r\n```\r\n\r\nIf the result does _not_ looks like this:\r\n\r\n```txt\r\nopenjdk 18.0.2 2022-07-19\r\nOpenJDK Runtime Environment Homebrew (build 18.0.2+0)\r\nOpenJDK 64-Bit Server VM Homebrew (build 18.0.2+0, mixed mode, sharing)\r\n```\r\n\r\nbut like this:\r\n\r\n```txt\r\nThe operation couldnt be completed. Unable to locate a Java Runtime.\r\nPlease visit http://www.java.com for information on installing Java.\r\n```\r\n\r\nThen you also need to create a symlink for the system Java wrappers to find this JDK:\r\n```sh\r\nsudo ln -sfn /opt/homebrew/opt/openjdk/libexec/openjdk.jdk \\\r\n     /Library/Java/JavaVirtualMachines/openjdk.jdk\r\n```\r\n\r\n\r\n\r\n\r\n","title":"How to brew install java?","body":"<p>Turns out <code>java</code> has been moved into brew core recently, so the correct command as of August 2022 is:</p>\n<pre class=\"lang-bash prettyprint-override\"><code>brew install java\n</code></pre>\n<p>Then check your installation by running</p>\n<pre class=\"lang-bash prettyprint-override\"><code>java -version\n</code></pre>\n<p>If the result does <em>not</em> looks like this:</p>\n<pre><code>openjdk 18.0.2 2022-07-19\nOpenJDK Runtime Environment Homebrew (build 18.0.2+0)\nOpenJDK 64-Bit Server VM Homebrew (build 18.0.2+0, mixed mode, sharing)\n</code></pre>\n<p>but like this:</p>\n<pre><code>The operation couldnt be completed. Unable to locate a Java Runtime.\nPlease visit http://www.java.com for information on installing Java.\n</code></pre>\n<p>Then you also need to create a symlink for the system Java wrappers to find this JDK:</p>\n<pre class=\"lang-bash prettyprint-override\"><code>sudo ln -sfn /opt/homebrew/opt/openjdk/libexec/openjdk.jdk \\\n     /Library/Java/JavaVirtualMachines/openjdk.jdk\n</code></pre>\n"},{"tags":[],"owner":{"account_id":5133425,"reputation":1741,"user_id":4112892,"display_name":"bathyscapher"},"down_vote_count":0,"up_vote_count":89,"is_accepted":false,"score":89,"last_activity_date":1660333397,"creation_date":1642681947,"answer_id":70786302,"question_id":65601196,"body_markdown":"As an add-on to the accepted answer: to install a certain version of Java, e.g. version 11, run:\r\n```\r\nbrew install openjdk@11\r\n```\r\nAnd symlink it:\r\n```\r\nsudo ln -sfn /opt/homebrew/opt/openjdk@11/libexec/openjdk.jdk \\\r\n     /Library/Java/JavaVirtualMachines/openjdk-11.jdk\r\n```","title":"How to brew install java?","body":"<p>As an add-on to the accepted answer: to install a certain version of Java, e.g. version 11, run:</p>\n<pre><code>brew install openjdk@11\n</code></pre>\n<p>And symlink it:</p>\n<pre><code>sudo ln -sfn /opt/homebrew/opt/openjdk@11/libexec/openjdk.jdk \\\n     /Library/Java/JavaVirtualMachines/openjdk-11.jdk\n</code></pre>\n"},{"tags":[],"owner":{"account_id":951749,"reputation":642,"user_id":977741,"accept_rate":29,"display_name":"Mark Simon"},"down_vote_count":0,"up_vote_count":18,"is_accepted":false,"score":18,"last_activity_date":1661913296,"creation_date":1661913296,"answer_id":73550317,"question_id":65601196,"body_markdown":"I had to `sudo ln -sfn /usr/local/opt/openjdk/libexec/openjdk.jdk /Library/Java/JavaVirtualMachines/openjdk.jdk`","title":"How to brew install java?","body":"<p>I had to <code>sudo ln -sfn /usr/local/opt/openjdk/libexec/openjdk.jdk /Library/Java/JavaVirtualMachines/openjdk.jdk</code></p>\n"},{"tags":[],"owner":{"account_id":3156172,"reputation":15735,"user_id":2668545,"accept_rate":74,"display_name":"ThinkBonobo"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1670278051,"creation_date":1670278051,"answer_id":74694935,"question_id":65601196,"body_markdown":"If you want to install the Oracle version of java&#39;s SDK with homebrew, use the following command:\r\n\r\n```\r\nbrew install --cask oracle-jdk\r\n```\r\n\r\nIf you don&#39;t care, then use the accepted answer by @Tim Fulmer to get the OpenJDK version\r\n\r\n`brew install java`","title":"How to brew install java?","body":"<p>If you want to install the Oracle version of java's SDK with homebrew, use the following command:</p>\n<pre><code>brew install --cask oracle-jdk\n</code></pre>\n<p>If you don't care, then use the accepted answer by @Tim Fulmer to get the OpenJDK version</p>\n<p><code>brew install java</code></p>\n"},{"tags":[],"owner":{"account_id":4422817,"reputation":527,"user_id":3602205,"display_name":"lionHeart"},"down_vote_count":0,"up_vote_count":7,"is_accepted":false,"score":7,"last_activity_date":1673516351,"creation_date":1673515406,"answer_id":75094034,"question_id":65601196,"body_markdown":"Assembled from the answers here and https://stackoverflow.com/questions/21964709/how-to-set-or-change-the-default-java-jdk-version-on-macos:\r\n\r\nYou can use brew to install multiple java versions and run a command to switch between the versions as required. \r\n\r\n**Example**\r\n\r\nInstall two java versions (change java versions as pleased):&lt;br&gt;\r\n\r\n    brew install openjdk@19\r\n    brew install openjdk@8\r\n\r\nUse the following command to see the installed versions:&lt;br&gt;\r\n\r\n     /usr/libexec/java_home -V\r\n\r\nyou should see the two versions specified in the response (if not, read further to create a symlink). Now you can select the java version using:&lt;br&gt;\r\n\r\n    export JAVA_HOME=`/usr/libexec/java_home -v 8`\r\n    \r\nverify selected version:&lt;br&gt; \r\n\r\n    java -version\r\nyou can further export the JAVA_HOME variable in your shell init file as speciifed in the attached SOF thread.\r\n\r\nNow, in case you do not see the java version in `/usr/libexec/java_home` as expected and the version selection of that missing version is not working, **you might need to add a symlink**:\r\n\r\nExecuting `brew info openjdk@the-missing-java-version`should return the location of the installed version and will specify a symlink command that you should run for the system to find the SDK. The response text look something similar to:\r\n\r\n    ...For the system Java wrappers to find this JDK, symlink it with\r\n      sudo ln -sfn /opt/homebrew/opt/openjdk@17/libexec/openjdk.jdk /Library/Java/JavaVirtualMachines/openjdk-17.jdk...","title":"How to brew install java?","body":"<p>Assembled from the answers here and <a href=\"https://stackoverflow.com/questions/21964709/how-to-set-or-change-the-default-java-jdk-version-on-macos\">How to set or change the default Java (JDK) version on macOS?</a>:</p>\n<p>You can use brew to install multiple java versions and run a command to switch between the versions as required.</p>\n<p><strong>Example</strong></p>\n<p>Install two java versions (change java versions as pleased):<br></p>\n<pre><code>brew install openjdk@19\nbrew install openjdk@8\n</code></pre>\n<p>Use the following command to see the installed versions:<br></p>\n<pre><code> /usr/libexec/java_home -V\n</code></pre>\n<p>you should see the two versions specified in the response (if not, read further to create a symlink). Now you can select the java version using:<br></p>\n<pre><code>export JAVA_HOME=`/usr/libexec/java_home -v 8`\n</code></pre>\n<p>verify selected version:<br></p>\n<pre><code>java -version\n</code></pre>\n<p>you can further export the JAVA_HOME variable in your shell init file as speciifed in the attached SOF thread.</p>\n<p>Now, in case you do not see the java version in <code>/usr/libexec/java_home</code> as expected and the version selection of that missing version is not working, <strong>you might need to add a symlink</strong>:</p>\n<p>Executing <code>brew info openjdk@the-missing-java-version</code>should return the location of the installed version and will specify a symlink command that you should run for the system to find the SDK. The response text look something similar to:</p>\n<pre><code>...For the system Java wrappers to find this JDK, symlink it with\n  sudo ln -sfn /opt/homebrew/opt/openjdk@17/libexec/openjdk.jdk /Library/Java/JavaVirtualMachines/openjdk-17.jdk...\n</code></pre>\n"},{"tags":[],"owner":{"account_id":9183606,"reputation":125,"user_id":6826659,"display_name":"Gerard"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1673889670,"creation_date":1673889670,"answer_id":75137601,"question_id":65601196,"body_markdown":" run \r\n\r\n    brew reinstall openjdk\r\n\r\nand it will display the following which shows your file path:\r\n\r\n        For the system Java wrappers to find this JDK, symlink it with\r\n      sudo ln -sfn /usr/local/opt/openjdk/libexec/openjdk.jdk /Library/Java/JavaVirtualMachines/openjdk.jdk\r\n    \r\n    openjdk is keg-only, which means it was not symlinked into /usr/local,\r\n    because macOS provides similar software and installing this software in\r\n    parallel can cause all kinds of trouble.\r\n    \r\n    If you need to have openjdk first in your PATH, run:\r\n      echo &#39;export PATH=&quot;/usr/local/opt/openjdk/bin:$PATH&quot;&#39; &gt;&gt; /Users/gerarddonnelly/.bash_profile\r\n    \r\n    For compilers to find openjdk you may need to set:\r\n      export CPPFLAGS=&quot;-I/usr/local/opt/openjdk/include&quot;\r\n\r\nI then ran the code below, which I took from the output above:\r\n\r\n    sudo ln -sfn /usr/local/opt/openjdk/libexec/openjdk.jdk /Library/Java/JavaVirtualMachines/openjdk.jdk\r\n\r\n\r\nThe other issue I had was that Elasticsearch was not recognising my JAVA version. To fix that I added the following line to my .bash_profile\r\n\r\n    EXPORT JAVA_HOME=$(/usr/libexec/java_home) \r\n\r\nthen I ran \r\n\r\n    source ~/.bash_profile \r\nto refresh my profile. \r\n\r\nAfter that it worked. \r\n\r\nHope this helps. \r\n\r\n \r\n\r\n","title":"How to brew install java?","body":"<p>run</p>\n<pre><code>brew reinstall openjdk\n</code></pre>\n<p>and it will display the following which shows your file path:</p>\n<pre><code>    For the system Java wrappers to find this JDK, symlink it with\n  sudo ln -sfn /usr/local/opt/openjdk/libexec/openjdk.jdk /Library/Java/JavaVirtualMachines/openjdk.jdk\n\nopenjdk is keg-only, which means it was not symlinked into /usr/local,\nbecause macOS provides similar software and installing this software in\nparallel can cause all kinds of trouble.\n\nIf you need to have openjdk first in your PATH, run:\n  echo 'export PATH=&quot;/usr/local/opt/openjdk/bin:$PATH&quot;' &gt;&gt; /Users/gerarddonnelly/.bash_profile\n\nFor compilers to find openjdk you may need to set:\n  export CPPFLAGS=&quot;-I/usr/local/opt/openjdk/include&quot;\n</code></pre>\n<p>I then ran the code below, which I took from the output above:</p>\n<pre><code>sudo ln -sfn /usr/local/opt/openjdk/libexec/openjdk.jdk /Library/Java/JavaVirtualMachines/openjdk.jdk\n</code></pre>\n<p>The other issue I had was that Elasticsearch was not recognising my JAVA version. To fix that I added the following line to my .bash_profile</p>\n<pre><code>EXPORT JAVA_HOME=$(/usr/libexec/java_home) \n</code></pre>\n<p>then I ran</p>\n<pre><code>source ~/.bash_profile \n</code></pre>\n<p>to refresh my profile.</p>\n<p>After that it worked.</p>\n<p>Hope this helps.</p>\n"},{"tags":[],"owner":{"account_id":3281033,"reputation":14027,"user_id":2761641,"accept_rate":58,"display_name":"Akshay Vijay Jain"},"down_vote_count":2,"up_vote_count":0,"is_accepted":false,"score":-2,"last_activity_date":1677735035,"creation_date":1677735035,"answer_id":75611614,"question_id":65601196,"body_markdown":"```\r\nbrew tap homebrew/cask-versions\r\nbrew update\r\nbrew install openjdk@19\r\n\r\n\r\nsudo ln -sfn /usr/local/opt/openjdk/libexec/openjdk.jdk /Library/Java/JavaVirtualMachines/openjdk.jdk\r\necho &#39;export PATH=&quot;/usr/local/opt/openjdk/bin:$PATH&quot;&#39; &gt;&gt; ~/.zshrc","title":"How to brew install java?","body":"<pre><code>brew tap homebrew/cask-versions\nbrew update\nbrew install openjdk@19\n\n\nsudo ln -sfn /usr/local/opt/openjdk/libexec/openjdk.jdk /Library/Java/JavaVirtualMachines/openjdk.jdk\necho 'export PATH=&quot;/usr/local/opt/openjdk/bin:$PATH&quot;' &gt;&gt; ~/.zshrc\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2377833,"reputation":511,"user_id":2976541,"display_name":"John Tran"},"down_vote_count":0,"up_vote_count":10,"is_accepted":false,"score":10,"last_activity_date":1681096686,"creation_date":1681096686,"answer_id":75974077,"question_id":65601196,"body_markdown":"After multiple tries, here is a recipe that allows for me to switch between the different versions of OpenJDK and this approach appears to work on Ventura.\r\n\r\nFirst, install all the necessary OpenJDK versions (for me I needed 8, 11, 17, and 20)\r\n\r\n```\r\nbrew install openjdk@8\r\nbrew install openjdk@11\r\nbrew install openjdk@17\r\nbrew install openjdk@20\r\n```\r\n\r\nUpdate the wrapper, as recommended in the multiple postings: `sudo rm -f /Library/Java/JavaVirtualMachines/openjdk.jdk` and `sudo ln -sfn /usr/local/opt/openjdk/libexec/openjdk.jdk /Library/Java/JavaVirtualMachines/openjdk.jdk`.\r\n\r\nUpdate your `.zshrc` as follows\r\n\r\n```\r\nalias j8=&quot;export JAVA_HOME=/usr/local/opt/openjdk@8 ; java -version&quot;\r\nalias j11=&quot;export JAVA_HOME=/usr/local/opt/openjdk@11 ; java -version&quot;\r\nalias j17=&quot;export JAVA_HOME=/usr/local/opt/openjdk@17 ; java -version&quot;\r\nalias j20=&quot;export JAVA_HOME=/usr/local/opt/openjdk@20 ; java -version&quot;\r\n```\r\n\r\nTo switch your version, run the alias `j8`, `j11`, etc.\r\n\r\nDon&#39;t forget to prepend the `$PATH` in your `~/.zshrc` with `export PATH=&quot;/usr/local/bin:/usr/local/sbin:$PATH&quot;` otherwise the system java will have precedent.\r\n\r\nNote that this approach is particularly useful because I rely on `brew` as my primary (and arguably most consistent) package manager.","title":"How to brew install java?","body":"<p>After multiple tries, here is a recipe that allows for me to switch between the different versions of OpenJDK and this approach appears to work on Ventura.</p>\n<p>First, install all the necessary OpenJDK versions (for me I needed 8, 11, 17, and 20)</p>\n<pre><code>brew install openjdk@8\nbrew install openjdk@11\nbrew install openjdk@17\nbrew install openjdk@20\n</code></pre>\n<p>Update the wrapper, as recommended in the multiple postings: <code>sudo rm -f /Library/Java/JavaVirtualMachines/openjdk.jdk</code> and <code>sudo ln -sfn /usr/local/opt/openjdk/libexec/openjdk.jdk /Library/Java/JavaVirtualMachines/openjdk.jdk</code>.</p>\n<p>Update your <code>.zshrc</code> as follows</p>\n<pre><code>alias j8=&quot;export JAVA_HOME=/usr/local/opt/openjdk@8 ; java -version&quot;\nalias j11=&quot;export JAVA_HOME=/usr/local/opt/openjdk@11 ; java -version&quot;\nalias j17=&quot;export JAVA_HOME=/usr/local/opt/openjdk@17 ; java -version&quot;\nalias j20=&quot;export JAVA_HOME=/usr/local/opt/openjdk@20 ; java -version&quot;\n</code></pre>\n<p>To switch your version, run the alias <code>j8</code>, <code>j11</code>, etc.</p>\n<p>Don't forget to prepend the <code>$PATH</code> in your <code>~/.zshrc</code> with <code>export PATH=&quot;/usr/local/bin:/usr/local/sbin:$PATH&quot;</code> otherwise the system java will have precedent.</p>\n<p>Note that this approach is particularly useful because I rely on <code>brew</code> as my primary (and arguably most consistent) package manager.</p>\n"},{"tags":[],"owner":{"account_id":8049325,"reputation":1,"user_id":6068449,"display_name":"Hunter Smith"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1699331397,"creation_date":1699331291,"answer_id":77435560,"question_id":65601196,"body_markdown":"If anyone is stuck on Mac OS Monterey, installing Java 11 using the brew command is what worked for me. It might be similar for previous version (not too sure though).\r\n\r\n    brew tap AdoptOpenJDK/openjdk\r\n    brew cask install adoptopenjdk11\r\n\r\n","title":"How to brew install java?","body":"<p>If anyone is stuck on Mac OS Monterey, installing Java 11 using the brew command is what worked for me. It might be similar for previous version (not too sure though).</p>\n<pre><code>brew tap AdoptOpenJDK/openjdk\nbrew cask install adoptopenjdk11\n</code></pre>\n"}],"owner":{"account_id":391815,"reputation":15910,"user_id":752693,"accept_rate":100,"display_name":"Tim Fulmer"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":246145,"favorite_count":0,"down_vote_count":1,"up_vote_count":181,"accepted_answer_id":65601197,"answer_count":9,"score":180,"last_activity_date":1699331397,"creation_date":1609956927,"question_id":65601196,"body_markdown":"I&#39;d like to setup java on a new OS X machine, and prefer to use brew for OS X package management. How can I install latest java using brew?","title":"How to brew install java?","body":"<p>I'd like to setup java on a new OS X machine, and prefer to use brew for OS X package management. How can I install latest java using brew?</p>\n"},{"tags":["java","collections","java-stream","flatten"],"comments":[{"owner":{"account_id":6651855,"reputation":224820,"user_id":5133585,"accept_rate":96,"display_name":"Sweeper"},"score":3,"creation_date":1574529626,"post_id":59010201,"comment_id":104268416,"body_markdown":"What do you want as output? It seems like you want `flatMap`...","body":"What do you want as output? It seems like you want <code>flatMap</code>..."},{"owner":{"account_id":277416,"reputation":681828,"user_id":571407,"accept_rate":100,"display_name":"JB Nizet"},"score":2,"creation_date":1574529631,"post_id":59010201,"comment_id":104268419,"body_markdown":"You&#39;re *probably* looking for flatMap: https://docs.oracle.com/javase/8/docs/api/java/util/stream/Stream.html#flatMap-java.util.function.Function-","body":"You&#39;re <i>probably</i> looking for flatMap: <a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/stream/Stream.html#flatMap-java.util.function.Function-\" rel=\"nofollow noreferrer\">docs.oracle.com/javase/8/docs/api/java/util/stream/&hellip;</a>"},{"owner":{"account_id":7291967,"reputation":57515,"user_id":5558072,"accept_rate":100,"display_name":"Youcef LAIDANI"},"score":0,"creation_date":1574529890,"post_id":59010201,"comment_id":104268506,"body_markdown":"can you please show us the short of your models, like this we can&#39;t understand what you want to achieve","body":"can you please show us the short of your models, like this we can&#39;t understand what you want to achieve"},{"owner":{"account_id":1939636,"reputation":28457,"user_id":1746118,"accept_rate":95,"display_name":"Naman"},"score":0,"creation_date":1574530332,"post_id":59010201,"comment_id":104268636,"body_markdown":"`forEach` is a *`void` terminal operation*. it won&#39;t return a result as required.","body":"<code>forEach</code> is a <i><code>void</code> terminal operation</i>. it won&#39;t return a result as required."},{"owner":{"account_id":11078779,"reputation":447,"user_id":8134589,"display_name":"Guy Sadoun"},"score":0,"creation_date":1574530350,"post_id":59010201,"comment_id":104268643,"body_markdown":"@YCF_L I don&#39;t know what is &quot;short of my models&quot;","body":"@YCF_L I don&#39;t know what is &quot;short of my models&quot;"},{"owner":{"account_id":7291967,"reputation":57515,"user_id":5558072,"accept_rate":100,"display_name":"Youcef LAIDANI"},"score":0,"creation_date":1574530389,"post_id":59010201,"comment_id":104268653,"body_markdown":"I mean, at least show us the necessary classes","body":"I mean, at least show us the necessary classes"},{"owner":{"account_id":15536363,"reputation":209,"user_id":11208460,"display_name":"Alex Faster"},"score":1,"creation_date":1574530646,"post_id":59010201,"comment_id":104268741,"body_markdown":"pay attention on flatMap functionality, here is a good example\nhttps://www.mkyong.com/java8/java-8-flatmap-example/","body":"pay attention on flatMap functionality, here is a good example <a href=\"https://www.mkyong.com/java8/java-8-flatmap-example/\" rel=\"nofollow noreferrer\">mkyong.com/java8/java-8-flatmap-example</a>"}],"answers":[{"tags":[],"owner":{"account_id":9725613,"reputation":53334,"user_id":7212686,"accept_rate":100,"display_name":"azro"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1574587886,"creation_date":1574587886,"answer_id":59016308,"question_id":59010201,"body_markdown":"You want a `a collection of all CasaDeBurrito favorites by friends sorted by name` so I&#39;d say a `Map&lt;String, List&lt;CasaDeBurrito&gt;&gt;` would be what you need, each key i a friend name, and the value is the list of `CasaDeBurrito` he likes using your `favoritesByRating` method, all sorted by name (use of `TreeMap`)\r\n\r\n\r\n    public Map&lt;String, List&lt;CasaDeBurrito&gt;&gt; favoritesByRating(Profesor p) {\r\n        return p.getFriends().stream()\r\n                .collect(toMap(Profesor::getName, prof -&gt; prof.favoritesByRating(0), (i, j) -&gt; i, TreeMap::new));\r\n    }\r\n\r\n\r\nIf you just want a list of the `CasaDeBurrito` liked by the friends use `flatMap`\r\n\r\n    public List&lt;CasaDeBurrito&gt; favoritesByRating(Profesor p) {\r\n        return p.getFriends().stream()\r\n                .flatMap(prof -&gt; prof.favoritesByRating(0).stream())\r\n                .collect(toList());\r\n    }\r\n","title":"how to unify object&#39;s collections from stream of objects","body":"<p>You want a <code>a collection of all CasaDeBurrito favorites by friends sorted by name</code> so I'd say a <code>Map&lt;String, List&lt;CasaDeBurrito&gt;&gt;</code> would be what you need, each key i a friend name, and the value is the list of <code>CasaDeBurrito</code> he likes using your <code>favoritesByRating</code> method, all sorted by name (use of <code>TreeMap</code>)</p>\n\n<pre><code>public Map&lt;String, List&lt;CasaDeBurrito&gt;&gt; favoritesByRating(Profesor p) {\n    return p.getFriends().stream()\n            .collect(toMap(Profesor::getName, prof -&gt; prof.favoritesByRating(0), (i, j) -&gt; i, TreeMap::new));\n}\n</code></pre>\n\n<p>If you just want a list of the <code>CasaDeBurrito</code> liked by the friends use <code>flatMap</code></p>\n\n<pre><code>public List&lt;CasaDeBurrito&gt; favoritesByRating(Profesor p) {\n    return p.getFriends().stream()\n            .flatMap(prof -&gt; prof.favoritesByRating(0).stream())\n            .collect(toList());\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":11078779,"reputation":447,"user_id":8134589,"display_name":"Guy Sadoun"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1699331062,"creation_date":1574680897,"answer_id":59030629,"question_id":59010201,"body_markdown":"I manage to connect the comments and answers to what I needed.\r\nI sort the friends by ID and created a stream of collection&lt;CasaDeBurrito&gt; as @Alex Faster share in his comment [here][1] and flatten the stream as suggested above.\r\n\r\n    return p.getFriends().stream()  //Stream&lt;Profesor&gt;\r\n                    .sorted(Comparator.comparingInt(Profesor::getId)) //Stream&lt;Profesor&gt;\r\n                    .map(P-&gt;P.favoritesByDist(0)) //Stream&lt;Collection&lt;CasaDeBurrito&gt;&gt;\r\n                    .flatMap(Collection::stream) //Stream&lt;CasaDeBurrito&gt;\r\n                    .distinct()\r\n                    .collect(Collectors.toList()); //List&lt;CasaDeBurrito&gt;\r\n\r\n\r\n\r\n  [1]: http://mkyong.com/java8/java-8-flatmap-example","title":"how to unify object&#39;s collections from stream of objects","body":"<p>I manage to connect the comments and answers to what I needed.\nI sort the friends by ID and created a stream of collection as @Alex Faster share in his comment <a href=\"http://mkyong.com/java8/java-8-flatmap-example\" rel=\"nofollow noreferrer\">here</a> and flatten the stream as suggested above.</p>\n<pre><code>return p.getFriends().stream()  //Stream&lt;Profesor&gt;\n                .sorted(Comparator.comparingInt(Profesor::getId)) //Stream&lt;Profesor&gt;\n                .map(P-&gt;P.favoritesByDist(0)) //Stream&lt;Collection&lt;CasaDeBurrito&gt;&gt;\n                .flatMap(Collection::stream) //Stream&lt;CasaDeBurrito&gt;\n                .distinct()\n                .collect(Collectors.toList()); //List&lt;CasaDeBurrito&gt;\n</code></pre>\n"}],"owner":{"account_id":11078779,"reputation":447,"user_id":8134589,"display_name":"Guy Sadoun"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":142,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":2,"score":-1,"last_activity_date":1699331062,"creation_date":1574529396,"question_id":59010201,"body_markdown":"I have this CasaDeBurrito class:\r\n\r\n    public class CasaDeBurritoImpl implements OOP.Provided.CasaDeBurrito {\r\n    \r\n        private Integer id;\r\n        private String name;\r\n        private Integer dist;\r\n        private Set&lt;String&gt; menu;\r\n        private Map&lt;Integer, Integer&gt; ratings;\r\n    ...\r\n    }\r\nand this profesor class: (it should be with one s)\r\n\r\n    public class ProfessorImpl implements OOP.Provided.Profesor {\r\n    \r\n        private Integer id;\r\n        private String name;\r\n        private List&lt;CasaDeBurrito&gt; favorites;\r\n        private Set&lt;Profesor&gt; friends;\r\n\r\n        private Comparator&lt;CasaDeBurrito&gt; ratingComparator = (CasaDeBurrito c1, CasaDeBurrito c2) -&gt;\r\n        {\r\n            if (c1.averageRating() == c2.averageRating()) {\r\n                if (c1.distance() == c2.distance()) {\r\n                    return Integer.compare(c1.getId(), c2.getId());\r\n                }\r\n                return Integer.compare(c1.distance(), c2.distance());\r\n            }\r\n            return Double.compare(c2.averageRating(), c1.averageRating());\r\n        };\r\n\r\n        private Predicate&lt;CasaDeBurrito&gt; isAvgRatingAbove(int rLimit) {\r\n            return c -&gt; c.averageRating() &gt;= rLimit;\r\n        };\r\n\r\n        public Collection&lt;CasaDeBurrito&gt; \r\n        filterAndSortFavorites(Comparator&lt;CasaDeBurrito&gt; comp, Predicate&lt;CasaDeBurrito&gt; p) {\r\n                return favorites.stream().filter(p).sorted(comp).collect(Collectors.toList());\r\n        }\r\n        \r\n        public Collection&lt;CasaDeBurrito&gt; favoritesByRating(int rLimit) {\r\n                return filterAndSortFavorites(ratingComparator, isAvgRatingAbove(rLimit));\r\n        }\r\n    }\r\n    \r\n\r\nI want to implement a function which gets a `Profesor prof`, and unifies all the sets of `favorites` of all `prof`&#39;s  friends, sorted by ID, with stream.\r\nas a result I want a collection of all favorite `CasaDeBurrito` restaurants by rating (with favoritesByRating).\r\n\r\nfor example:\r\n\r\n    public Collection&lt;CasaDeBurrito&gt; favoritesByRating(Profesor p) {\r\n        \r\n        Stream ret = p.getFriends().stream()\r\n                   .&lt;*some Intermediate Operations*&gt;.\r\n                   .forEach(y-&gt;y.concat(y.favoritesByRating(0))\r\n                   .&lt;*some Intermediate Operations*&gt;.\r\n                   .collect(toList());\r\n        return ret;\r\n    }","title":"how to unify object&#39;s collections from stream of objects","body":"<p>I have this CasaDeBurrito class:</p>\n\n<pre><code>public class CasaDeBurritoImpl implements OOP.Provided.CasaDeBurrito {\n\n    private Integer id;\n    private String name;\n    private Integer dist;\n    private Set&lt;String&gt; menu;\n    private Map&lt;Integer, Integer&gt; ratings;\n...\n}\n</code></pre>\n\n<p>and this profesor class: (it should be with one s)</p>\n\n<pre><code>public class ProfessorImpl implements OOP.Provided.Profesor {\n\n    private Integer id;\n    private String name;\n    private List&lt;CasaDeBurrito&gt; favorites;\n    private Set&lt;Profesor&gt; friends;\n\n    private Comparator&lt;CasaDeBurrito&gt; ratingComparator = (CasaDeBurrito c1, CasaDeBurrito c2) -&gt;\n    {\n        if (c1.averageRating() == c2.averageRating()) {\n            if (c1.distance() == c2.distance()) {\n                return Integer.compare(c1.getId(), c2.getId());\n            }\n            return Integer.compare(c1.distance(), c2.distance());\n        }\n        return Double.compare(c2.averageRating(), c1.averageRating());\n    };\n\n    private Predicate&lt;CasaDeBurrito&gt; isAvgRatingAbove(int rLimit) {\n        return c -&gt; c.averageRating() &gt;= rLimit;\n    };\n\n    public Collection&lt;CasaDeBurrito&gt; \n    filterAndSortFavorites(Comparator&lt;CasaDeBurrito&gt; comp, Predicate&lt;CasaDeBurrito&gt; p) {\n            return favorites.stream().filter(p).sorted(comp).collect(Collectors.toList());\n    }\n\n    public Collection&lt;CasaDeBurrito&gt; favoritesByRating(int rLimit) {\n            return filterAndSortFavorites(ratingComparator, isAvgRatingAbove(rLimit));\n    }\n}\n</code></pre>\n\n<p>I want to implement a function which gets a <code>Profesor prof</code>, and unifies all the sets of <code>favorites</code> of all <code>prof</code>'s  friends, sorted by ID, with stream.\nas a result I want a collection of all favorite <code>CasaDeBurrito</code> restaurants by rating (with favoritesByRating).</p>\n\n<p>for example:</p>\n\n<pre><code>public Collection&lt;CasaDeBurrito&gt; favoritesByRating(Profesor p) {\n\n    Stream ret = p.getFriends().stream()\n               .&lt;*some Intermediate Operations*&gt;.\n               .forEach(y-&gt;y.concat(y.favoritesByRating(0))\n               .&lt;*some Intermediate Operations*&gt;.\n               .collect(toList());\n    return ret;\n}\n</code></pre>\n"},{"tags":["java","eclipse","windows-10","virtual-machine"],"comments":[{"owner":{"account_id":13796,"reputation":19353,"user_id":27905,"display_name":"nitind"},"score":2,"creation_date":1553546172,"post_id":55345565,"comment_id":97416860,"body_markdown":"How about telling us the current error message?","body":"How about telling us the current error message?"}],"answers":[{"tags":[],"owner":{"account_id":15603598,"reputation":21,"user_id":11257031,"display_name":"Tarek Rahman"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1553545724,"creation_date":1553545724,"answer_id":55345918,"question_id":55345565,"body_markdown":"if possible remove -vm P:\\Programs\\jdk1.6\\bin line\r\nmore details in here https://stackoverflow.com/questions/7302604/eclipse-error-failed-to-create-the-java-virtual-machine ","title":"Java could not create virtual machine and other errors","body":"<p>if possible remove -vm P:\\Programs\\jdk1.6\\bin line\nmore details in here <a href=\"https://stackoverflow.com/questions/7302604/eclipse-error-failed-to-create-the-java-virtual-machine\">Eclipse error: &#39;Failed to create the Java Virtual Machine&#39;</a> </p>\n"},{"tags":[],"owner":{"account_id":15603598,"reputation":21,"user_id":11257031,"display_name":"Tarek Rahman"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1553545907,"creation_date":1553545907,"answer_id":55345967,"question_id":55345565,"body_markdown":"Open the Control Panel\r\n Go to System\r\n Go to Advanced Systems Properties\r\n Then Environment Variables\r\n In System Variables, click Add\r\n New Variable Name: _JAVA_OPTIONS\r\n New Variable Value: -Xmx512M\r\n Click OK\r\nThat&#39;s it, your Java program should now be able to execute properly.\r\nFor those interested, Java -Xmx/s is the configuration parameter that control the amount of memory Java uses.\r\n\r\n Xmx sets the maximum heap memory size\r\n Xms sets the minimum heap memory size\r\nSee http://www.jafaloo.com/2011/10/30/java-xmx-memory-settings/ for more details on Java Heap memory size and parameters.","title":"Java could not create virtual machine and other errors","body":"<p>Open the Control Panel\n Go to System\n Go to Advanced Systems Properties\n Then Environment Variables\n In System Variables, click Add\n New Variable Name: _JAVA_OPTIONS\n New Variable Value: -Xmx512M\n Click OK\nThat's it, your Java program should now be able to execute properly.\nFor those interested, Java -Xmx/s is the configuration parameter that control the amount of memory Java uses.</p>\n\n<p> Xmx sets the maximum heap memory size\n Xms sets the minimum heap memory size\nSee <a href=\"http://www.jafaloo.com/2011/10/30/java-xmx-memory-settings/\" rel=\"nofollow noreferrer\">http://www.jafaloo.com/2011/10/30/java-xmx-memory-settings/</a> for more details on Java Heap memory size and parameters.</p>\n"},{"tags":[],"owner":{"account_id":9953843,"reputation":19,"user_id":11256767,"display_name":"Broken Dust"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1553708773,"creation_date":1553708773,"answer_id":55383557,"question_id":55345565,"body_markdown":"I&#39;ve done it.\r\n\r\nThe temporary newest Version of eclipse (2019-03) does NOT match with the newest Versions of JDK or JRE, as one of my lecturer told me.\r\n\r\nSo I head back to my favourite Version of eclipse; Luna. And I&#39;ve got to delete all Java Version on my PC.\r\n\r\nI have now Java 8 Update 202 on my PC. You can find it at [this link](https://www.oracle.com/technetwork/java/javase/downloads/jdk8-downloads-2133151.html), it is the ```jdk-8u201-windows-x64``` (for Win10 64-bit) file.\r\n\r\nJRE is included in this Version of Java.\r\n\r\nAnother zip`s of eclipse can be found at [this link](https://www.eclipse.org/downloads/packages/).\r\n\r\nIn my case, I had to configure the eclipse.ini file again:\r\n```-vm\r\nC:\\Program Files\\Java\\jdk1.8.0_201\\jre\\bin\\server\\jvm.dll\r\n-vmargs\r\n-Dosgi.requiredJavaVersion=1.8\r\n--add-modules=ALL-SYSTEM  \r\n```\r\nI had to correct the ```-Dosgi.requiredJavaVersion=```-Line and had to add the absolute path to my ```jvm.dll```, as I had add the ```--add-modules=ALL-SYSTEM ```-line. I can&#39;t tell you if this is necessary.  \r\nYou can check your Java Version via CMD-&gt; ```java -version```\r\n\r\nNow I had to get to the system environment variables and had to change:  \r\n```JAVA_OPTIONS``` to Value ```-Xms256m -Xms512m```  \r\n```JAVA_HOME``` to ```C:\\Program Files\\Java\\jre1.8.0_202\\bin```  \r\nand had to add to the ```Path```: ```C:\\Program Files\\Java\\jdk1.8.0_201\\bin``` and ```C:\\Program Files\\Java\\jre1.8.0_202\\bin```\r\n\r\nI could&#39;ve set all ```[...]\\jre1.8.0_202\\bin[...]``` to ```[...]Java\\jdk1.8.0_201\\jre\\bin```, but I don&#39;t wanted anymore, I&#39;m just happy to fixed it finally.","title":"Java could not create virtual machine and other errors","body":"<p>I've done it.</p>\n\n<p>The temporary newest Version of eclipse (2019-03) does NOT match with the newest Versions of JDK or JRE, as one of my lecturer told me.</p>\n\n<p>So I head back to my favourite Version of eclipse; Luna. And I've got to delete all Java Version on my PC.</p>\n\n<p>I have now Java 8 Update 202 on my PC. You can find it at <a href=\"https://www.oracle.com/technetwork/java/javase/downloads/jdk8-downloads-2133151.html\" rel=\"nofollow noreferrer\">this link</a>, it is the <code>jdk-8u201-windows-x64</code> (for Win10 64-bit) file.</p>\n\n<p>JRE is included in this Version of Java.</p>\n\n<p>Another zip`s of eclipse can be found at <a href=\"https://www.eclipse.org/downloads/packages/\" rel=\"nofollow noreferrer\">this link</a>.</p>\n\n<p>In my case, I had to configure the eclipse.ini file again:</p>\n\n<pre><code>C:\\Program Files\\Java\\jdk1.8.0_201\\jre\\bin\\server\\jvm.dll\n-vmargs\n-Dosgi.requiredJavaVersion=1.8\n--add-modules=ALL-SYSTEM  \n</code></pre>\n\n<p>I had to correct the <code>-Dosgi.requiredJavaVersion=</code>-Line and had to add the absolute path to my <code>jvm.dll</code>, as I had add the <code>--add-modules=ALL-SYSTEM</code>-line. I can't tell you if this is necessary.<br>\nYou can check your Java Version via CMD-> <code>java -version</code></p>\n\n<p>Now I had to get to the system environment variables and had to change:<br>\n<code>JAVA_OPTIONS</code> to Value <code>-Xms256m -Xms512m</code><br>\n<code>JAVA_HOME</code> to <code>C:\\Program Files\\Java\\jre1.8.0_202\\bin</code><br>\nand had to add to the <code>Path</code>: <code>C:\\Program Files\\Java\\jdk1.8.0_201\\bin</code> and <code>C:\\Program Files\\Java\\jre1.8.0_202\\bin</code></p>\n\n<p>I could've set all <code>[...]\\jre1.8.0_202\\bin[...]</code> to <code>[...]Java\\jdk1.8.0_201\\jre\\bin</code>, but I don't wanted anymore, I'm just happy to fixed it finally.</p>\n"},{"tags":[],"owner":{"account_id":4909419,"reputation":4737,"user_id":3955129,"display_name":"Abdollah"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1560249681,"creation_date":1560249681,"answer_id":56541897,"question_id":55345565,"body_markdown":"I had a similar problem on Windows 10. I upgraded my JDK to version 8 update 211 and added the following line to eclipse.ini **just before** the line containing `-vmargs`:\r\n\r\n    -vm\r\n    C:/Program Files/Java/jdk1.8.0_211/bin/javaw.exe\r\n\r\nIt resolved the problem. Please consider using **forward slash** i.e. `/` instead of backslash.","title":"Java could not create virtual machine and other errors","body":"<p>I had a similar problem on Windows 10. I upgraded my JDK to version 8 update 211 and added the following line to eclipse.ini <strong>just before</strong> the line containing <code>-vmargs</code>:</p>\n\n<pre><code>-vm\nC:/Program Files/Java/jdk1.8.0_211/bin/javaw.exe\n</code></pre>\n\n<p>It resolved the problem. Please consider using <strong>forward slash</strong> i.e. <code>/</code> instead of backslash.</p>\n"}],"owner":{"account_id":9953843,"reputation":19,"user_id":11256767,"display_name":"Broken Dust"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":9263,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":4,"score":0,"last_activity_date":1699329985,"creation_date":1553544100,"question_id":55345565,"body_markdown":"My eclipse won&#39;t start since a few days. If I manage to get one error message at start to go away, it will be another new one, or another that I thought I&#39;d already fixed. I do not know what exactly I&#39;ve done so far, but I&#39;ll summarize as far as I remember. One thing you should know: it was very much.\r\n\r\nI tried to:  \r\n1. Setting the -Xms[WXYZ] variable to another values, like 256M, 512M, 1024M and 2048M in the  \r\n    - eclipse.ini  \r\n    - environment variables  \r\n2. Added in eclipse.ini before -vmargs  \r\n    - -vm [absolute path to my jdk\\bin\\javaw.exe]   \r\n    - -vm [absolute path to my jre\\bin\\server\\jvm.dll]   \r\n3. Changed environment variables  \r\n    - I don&#39;t know anymore what I&#39;ve done there  \r\n4. At some point I tried something with the JAVA_HOME environment variable, but it does not helped at all.\r\n\r\nI think that I&#39;ve done so far all of these imaginable combinations.  \r\nI&#39;ve deleted eclipse and reinstalled JRE and JDK, I think I&#39;ve got nothing left.\r\n\r\nHere are all of this pictures on [imgur](https://imgur.com/a/vwxA6OH?) itself (because I can&#39;t post images).\r\n\r\nIt were a great help if anyone could help me with that problem.\r\n\r\nEdit: The current error message is:  \r\nFailed to create the Java Virtual Machine.\r\n\r\nEdit 02: Changed system variable _JAVA_OPTIONS from value in picture to -Xms512M\r\n\r\nEdit 03: If i start eclipse with ```\r\n[path to eclipse]\\eclipse -vm C:\\Program Files\\Java\\jre1.8.0_202\\bin\\javaw.exe``` it stated that a runtime environment or development kit has to be available in order to run eclipse. It give me just C:\\Program as location. However, if I take the absolute path and write it into the eclipse.ini, i get the same error message (Failed to create the Java Virtual Machine.)","title":"Java could not create virtual machine and other errors","body":"<p>My eclipse won't start since a few days. If I manage to get one error message at start to go away, it will be another new one, or another that I thought I'd already fixed. I do not know what exactly I've done so far, but I'll summarize as far as I remember. One thing you should know: it was very much.</p>\n\n<p>I tried to:<br>\n1. Setting the -Xms[WXYZ] variable to another values, like 256M, 512M, 1024M and 2048M in the<br>\n    - eclipse.ini<br>\n    - environment variables<br>\n2. Added in eclipse.ini before -vmargs<br>\n    - -vm [absolute path to my jdk\\bin\\javaw.exe]<br>\n    - -vm [absolute path to my jre\\bin\\server\\jvm.dll]<br>\n3. Changed environment variables<br>\n    - I don't know anymore what I've done there<br>\n4. At some point I tried something with the JAVA_HOME environment variable, but it does not helped at all.</p>\n\n<p>I think that I've done so far all of these imaginable combinations.<br>\nI've deleted eclipse and reinstalled JRE and JDK, I think I've got nothing left.</p>\n\n<p>Here are all of this pictures on <a href=\"https://imgur.com/a/vwxA6OH?\" rel=\"nofollow noreferrer\">imgur</a> itself (because I can't post images).</p>\n\n<p>It were a great help if anyone could help me with that problem.</p>\n\n<p>Edit: The current error message is:<br>\nFailed to create the Java Virtual Machine.</p>\n\n<p>Edit 02: Changed system variable _JAVA_OPTIONS from value in picture to -Xms512M</p>\n\n<p>Edit 03: If i start eclipse with <code>\n[path to eclipse]\\eclipse -vm C:\\Program Files\\Java\\jre1.8.0_202\\bin\\javaw.exe</code> it stated that a runtime environment or development kit has to be available in order to run eclipse. It give me just C:\\Program as location. However, if I take the absolute path and write it into the eclipse.ini, i get the same error message (Failed to create the Java Virtual Machine.)</p>\n"},{"tags":["java","swing","jframe","paintcomponent"],"comments":[{"owner":{"account_id":23740623,"reputation":1,"user_id":17758716,"display_name":"Reilas"},"score":1,"creation_date":1699149992,"post_id":77424423,"comment_id":136494931,"body_markdown":"The _getWidth_ and _getHeight_ methods return _int_ values, so any of those operations will return non-fractional values.","body":"The <i>getWidth</i> and <i>getHeight</i> methods return <i>int</i> values, so any of those operations will return non-fractional values."},{"owner":{"account_id":2053598,"reputation":41316,"user_id":1831987,"display_name":"VGR"},"score":0,"creation_date":1699151982,"post_id":77424423,"comment_id":136495028,"body_markdown":"What is changing the scale supposed to do?  Is the coordinate origin always supposed to be in the center of the component?","body":"What is changing the scale supposed to do?  Is the coordinate origin always supposed to be in the center of the component?"},{"owner":{"account_id":29826208,"reputation":1,"user_id":22858091,"display_name":"AXX3"},"score":0,"creation_date":1699198378,"post_id":77424423,"comment_id":136498625,"body_markdown":"Yes it should always be in the centre of the screen.","body":"Yes it should always be in the centre of the screen."}],"answers":[{"tags":[],"owner":{"account_id":44852,"reputation":322224,"user_id":131872,"accept_rate":100,"display_name":"camickr"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1699327956,"creation_date":1699152793,"answer_id":77424557,"question_id":77424423,"body_markdown":"Your scale value is NOT what you expect since the MouseWheelListener doesn&#39;t work the way you expect.\r\n\r\nTry the code below:\r\n\r\n    public void mouseWheelMoved(MouseWheelEvent e) {\r\n\r\n\t\tSystem.out.println( e.getWheelRotation() );\r\n\r\n\t\tif (e.getWheelRotation() == 0) return;\r\n\r\n        if (e.getWheelRotation() &lt; 0) {\r\n            scale *= 1.1;\r\n        } else {\r\n            scale /= 1.1;\r\n        }\r\n\r\n        repaint();\r\n    }\r\n\r\nAnd you will see that the rotation is 0 multiple time before it is 1 or -1 so your else condition is executed multiple times causing the scale factor to decrease.\r\n\r\nEdit:\r\n\r\nBased on your image it appears you want to be able to control the &quot;width&quot; needed to display a complete sine wave.\r\n\r\nYour current code is essentially painting a single sine wave in the panel. You can&#39;t just &quot;scale&quot; the image to create more (or less) sine waves in the space available. Instead you need to actually paint more sine waves. \r\n\r\nSo how do you do this?\r\n\r\nBased on trial and error I realized it is the parameter you pass to the sine(...) method that controls the width. \r\n\r\nThe code below uses the mouse wheel to adjust this value to control the width of the sine wave:\r\n\r\n    import java.awt.*;\r\n    import java.awt.event.*;\r\n    import java.awt.geom.Line2D;\r\n    import javax.swing.*;\r\n    \r\n    public class SineWave extends JPanel implements MouseWheelListener\r\n    {\r\n    \tprivate int scale = 100;\r\n    \r\n    \tpublic SineWave()\r\n    \t{\r\n    \t\taddMouseWheelListener(this);\r\n    \t}\r\n    \r\n    \tpublic void paintComponent(Graphics g)\r\n    \t{\r\n    \t\tsuper.paintComponent(g);\r\n    \t\tGraphics2D g2 = (Graphics2D) g;\r\n    \t\tg2.setRenderingHint(RenderingHints.KEY_ANTIALIASING, RenderingHints.VALUE_ANTIALIAS_ON);\r\n    \r\n    \t\tdouble midX = getWidth() / 2;\r\n    \t\tdouble midY = getHeight() / 2;\r\n    \r\n    \t\tg2.setColor(Color.BLACK);\r\n    \t\tg2.draw(new Line2D.Double(0, midY, getWidth(), midY));\r\n    \t\tg2.draw(new Line2D.Double(midX, 0, midX, getHeight()));\r\n    \r\n    \t\tg2.setColor(Color.BLUE);\r\n    \t\tdouble x, y, oldx = 0, oldy = midY;\r\n    \r\n    \t\tfor (x = 0; x &lt;= getWidth(); x += 1)\r\n    \t\t{\r\n    \t\t\ty = midY - Math.sin(x / scale) * 100;\r\n    \t\t\tSystem.out.println(x + &quot; : &quot; + y);\r\n    \t\t\tg2.draw(new Line2D.Double(oldx, oldy, x, y));\r\n    \t\t\toldx = x;\r\n    \t\t\toldy = y;\r\n    \t\t}\r\n    \t}\r\n    \r\n    \t@Override\r\n    \tpublic Dimension getPreferredSize()\r\n    \t{\r\n    \t\treturn new Dimension(628, 300);\r\n    \t}\r\n    \r\n    \tpublic void mouseWheelMoved(MouseWheelEvent e)\r\n    \t{\r\n    \t\tif (e.getWheelRotation() == 0) return;\r\n    \r\n    \t\tif (e.getWheelRotation() &lt; 0) {\r\n    \t\t\tscale += 5;\r\n    \t\t} else {\r\n    \t\t\tscale -= 5;\r\n    \t\t}\r\n    \r\n    \t\tif (scale &lt; 5)\r\n    \t\t\tscale = 5;\r\n    \r\n    \t\trepaint();\r\n    \t}\r\n    \r\n    \tpublic static void main(String[] args) throws Exception\r\n    \t{\r\n    \t\tJFrame frame = new JFrame();\r\n    //\t\tframe.setSize(d500, 500);\r\n    \t\tSineWave wave = new SineWave();\r\n    \t\tframe.add(wave);\r\n    \t\tframe.pack();\r\n    \t\tframe.setVisible(true);\r\n    \t}\r\n    }\r\n\r\nNote: I made the preferred width of the panel 628 because that is the number of iterations needed to complete the sine wave when using the scaling factor of 100 as you can see by the output generated when the sine wave is painted.\r\n","title":"My Sine Graph doesn&#39;t carry on when zooming out but carrys on when making the app window longer not sure where its wro","body":"<p>Your scale value is NOT what you expect since the MouseWheelListener doesn't work the way you expect.</p>\n<p>Try the code below:</p>\n<pre><code>public void mouseWheelMoved(MouseWheelEvent e) {\n\n    System.out.println( e.getWheelRotation() );\n\n    if (e.getWheelRotation() == 0) return;\n\n    if (e.getWheelRotation() &lt; 0) {\n        scale *= 1.1;\n    } else {\n        scale /= 1.1;\n    }\n\n    repaint();\n}\n</code></pre>\n<p>And you will see that the rotation is 0 multiple time before it is 1 or -1 so your else condition is executed multiple times causing the scale factor to decrease.</p>\n<p>Edit:</p>\n<p>Based on your image it appears you want to be able to control the &quot;width&quot; needed to display a complete sine wave.</p>\n<p>Your current code is essentially painting a single sine wave in the panel. You can't just &quot;scale&quot; the image to create more (or less) sine waves in the space available. Instead you need to actually paint more sine waves.</p>\n<p>So how do you do this?</p>\n<p>Based on trial and error I realized it is the parameter you pass to the sine(...) method that controls the width.</p>\n<p>The code below uses the mouse wheel to adjust this value to control the width of the sine wave:</p>\n<pre><code>import java.awt.*;\nimport java.awt.event.*;\nimport java.awt.geom.Line2D;\nimport javax.swing.*;\n\npublic class SineWave extends JPanel implements MouseWheelListener\n{\n    private int scale = 100;\n\n    public SineWave()\n    {\n        addMouseWheelListener(this);\n    }\n\n    public void paintComponent(Graphics g)\n    {\n        super.paintComponent(g);\n        Graphics2D g2 = (Graphics2D) g;\n        g2.setRenderingHint(RenderingHints.KEY_ANTIALIASING, RenderingHints.VALUE_ANTIALIAS_ON);\n\n        double midX = getWidth() / 2;\n        double midY = getHeight() / 2;\n\n        g2.setColor(Color.BLACK);\n        g2.draw(new Line2D.Double(0, midY, getWidth(), midY));\n        g2.draw(new Line2D.Double(midX, 0, midX, getHeight()));\n\n        g2.setColor(Color.BLUE);\n        double x, y, oldx = 0, oldy = midY;\n\n        for (x = 0; x &lt;= getWidth(); x += 1)\n        {\n            y = midY - Math.sin(x / scale) * 100;\n            System.out.println(x + &quot; : &quot; + y);\n            g2.draw(new Line2D.Double(oldx, oldy, x, y));\n            oldx = x;\n            oldy = y;\n        }\n    }\n\n    @Override\n    public Dimension getPreferredSize()\n    {\n        return new Dimension(628, 300);\n    }\n\n    public void mouseWheelMoved(MouseWheelEvent e)\n    {\n        if (e.getWheelRotation() == 0) return;\n\n        if (e.getWheelRotation() &lt; 0) {\n            scale += 5;\n        } else {\n            scale -= 5;\n        }\n\n        if (scale &lt; 5)\n            scale = 5;\n\n        repaint();\n    }\n\n    public static void main(String[] args) throws Exception\n    {\n        JFrame frame = new JFrame();\n//      frame.setSize(d500, 500);\n        SineWave wave = new SineWave();\n        frame.add(wave);\n        frame.pack();\n        frame.setVisible(true);\n    }\n}\n</code></pre>\n<p>Note: I made the preferred width of the panel 628 because that is the number of iterations needed to complete the sine wave when using the scaling factor of 100 as you can see by the output generated when the sine wave is painted.</p>\n"}],"owner":{"account_id":29826208,"reputation":1,"user_id":22858091,"display_name":"AXX3"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":69,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1699327956,"creation_date":1699147837,"question_id":77424423,"body_markdown":"[Before Zooming Out](https://i.stack.imgur.com/MvARS.png)\r\n[After Zooming Out](https://i.stack.imgur.com/kLo2w.png)\r\n[When making the window longer it carries on on the left](https://i.stack.imgur.com/4fIPp.png)\r\n\r\nThis is the JPanel of my project.\r\n```\r\npackage SineWave;\r\n\r\nimport java.awt.Color;\r\nimport java.awt.Graphics;\r\nimport java.awt.Graphics2D;\r\nimport java.awt.event.MouseWheelEvent;\r\nimport java.awt.event.MouseWheelListener;\r\nimport java.awt.geom.Line2D;\r\n\r\nimport javax.swing.JOptionPane;\r\nimport javax.swing.JPanel;\r\n\r\npublic class SineWave extends JPanel implements MouseWheelListener {\r\n    private double scale = 1.0;\r\n\r\n    public SineWave() {\r\n        addMouseWheelListener(this);\r\n        \r\n    }\r\n\r\n    public void paintComponent(Graphics g) {\r\n        super.paintComponent(g);\r\n        Graphics2D g2 = (Graphics2D) g;\r\n        g2.setColor(Color.BLACK);\r\n        double xScale = getWidth() / 2 * scale;\r\n        double yScale = getHeight() / 2 * scale;\r\n        g2.draw(new Line2D.Double(0, getHeight() / 2 * scale, getWidth(), getHeight() / 2 * scale));\r\n        g2.draw(new Line2D.Double(getWidth() / 2 * scale, 0, getWidth() / 2 * scale, getHeight()));\r\n        g2.setColor(Color.BLUE);\r\n        double x, y, oldx = 0, oldy = getHeight() / 2;\r\n        for (x = 0; x &lt;= getWidth(); x += 0.1) {\r\n            y = getHeight() / 2 - Math.sin((x - getWidth() / 2) / 100) * 100;\r\n            g2.draw(new Line2D.Double(oldx * scale, oldy * scale, x * scale, y * scale));\r\n            oldx = x;\r\n            oldy = y;\r\n        }\r\n    }\r\n\r\n    public void mouseWheelMoved(MouseWheelEvent e) {\r\n    \t\r\n    \t\r\n    \t\r\n        if (e.getWheelRotation() &lt; 0) {\r\n        \t\r\n            scale *= 1.1;\r\n        } else {\r\n            scale /= 1.1;\r\n        }\r\n        repaint();\r\n    }\r\n}\r\n\r\n```\r\n\r\n\r\nThis is my JFrame of my project.\r\n```\r\npackage SineWave;\r\n\r\nimport javax.swing.JFrame;\r\n\r\npublic class MyFrame extends JFrame{\r\n\tMyFrame(){\r\n\t\tthis.setSize(500, 500);\r\n\t\tSineWave wave = new SineWave();\r\n\t\tthis.add(wave);\r\n\t\tthis.setVisible(true);\r\n\t}\r\n\r\n}\r\n\r\n```\r\n\r\n\r\n\r\nI have tried looking at the paint component but not sure where it is going wrong and what the solution is, the axis also aren&#39;t centred. I tried making an edit but it just made the cuvre weird and stopped drawing.\r\n\r\n\r\nI have also tried asking AI to find the issue could be but couldn&#39;t come up with an answer which was helpful except for ask on stackoverflow. \r\n\r\nSomething like this: \r\n\r\n[![i.stack.imgur.com/sPVC9.png][1]][1] \r\n\r\n\r\n  [1]: https://i.stack.imgur.com/sPVC9.png","title":"My Sine Graph doesn&#39;t carry on when zooming out but carrys on when making the app window longer not sure where its wro","body":"<p><a href=\"https://i.stack.imgur.com/MvARS.png\" rel=\"nofollow noreferrer\">Before Zooming Out</a>\n<a href=\"https://i.stack.imgur.com/kLo2w.png\" rel=\"nofollow noreferrer\">After Zooming Out</a>\n<a href=\"https://i.stack.imgur.com/4fIPp.png\" rel=\"nofollow noreferrer\">When making the window longer it carries on on the left</a></p>\n<p>This is the JPanel of my project.</p>\n<pre><code>package SineWave;\n\nimport java.awt.Color;\nimport java.awt.Graphics;\nimport java.awt.Graphics2D;\nimport java.awt.event.MouseWheelEvent;\nimport java.awt.event.MouseWheelListener;\nimport java.awt.geom.Line2D;\n\nimport javax.swing.JOptionPane;\nimport javax.swing.JPanel;\n\npublic class SineWave extends JPanel implements MouseWheelListener {\n    private double scale = 1.0;\n\n    public SineWave() {\n        addMouseWheelListener(this);\n        \n    }\n\n    public void paintComponent(Graphics g) {\n        super.paintComponent(g);\n        Graphics2D g2 = (Graphics2D) g;\n        g2.setColor(Color.BLACK);\n        double xScale = getWidth() / 2 * scale;\n        double yScale = getHeight() / 2 * scale;\n        g2.draw(new Line2D.Double(0, getHeight() / 2 * scale, getWidth(), getHeight() / 2 * scale));\n        g2.draw(new Line2D.Double(getWidth() / 2 * scale, 0, getWidth() / 2 * scale, getHeight()));\n        g2.setColor(Color.BLUE);\n        double x, y, oldx = 0, oldy = getHeight() / 2;\n        for (x = 0; x &lt;= getWidth(); x += 0.1) {\n            y = getHeight() / 2 - Math.sin((x - getWidth() / 2) / 100) * 100;\n            g2.draw(new Line2D.Double(oldx * scale, oldy * scale, x * scale, y * scale));\n            oldx = x;\n            oldy = y;\n        }\n    }\n\n    public void mouseWheelMoved(MouseWheelEvent e) {\n        \n        \n        \n        if (e.getWheelRotation() &lt; 0) {\n            \n            scale *= 1.1;\n        } else {\n            scale /= 1.1;\n        }\n        repaint();\n    }\n}\n\n</code></pre>\n<p>This is my JFrame of my project.</p>\n<pre><code>package SineWave;\n\nimport javax.swing.JFrame;\n\npublic class MyFrame extends JFrame{\n    MyFrame(){\n        this.setSize(500, 500);\n        SineWave wave = new SineWave();\n        this.add(wave);\n        this.setVisible(true);\n    }\n\n}\n\n</code></pre>\n<p>I have tried looking at the paint component but not sure where it is going wrong and what the solution is, the axis also aren't centred. I tried making an edit but it just made the cuvre weird and stopped drawing.</p>\n<p>I have also tried asking AI to find the issue could be but couldn't come up with an answer which was helpful except for ask on stackoverflow.</p>\n<p>Something like this:</p>\n<p><a href=\"https://i.stack.imgur.com/sPVC9.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/sPVC9.png\" alt=\"i.stack.imgur.com/sPVC9.png\" /></a></p>\n"},{"tags":["java","android","onclick","illegalstateexception","java.lang.class"],"comments":[{"owner":{"account_id":2667845,"reputation":10491,"user_id":2305826,"accept_rate":89,"display_name":"MarsAtomic"},"score":0,"creation_date":1699318819,"post_id":77434860,"comment_id":136514297,"body_markdown":"Post the LogCat output, especially the line that starts &quot;Caused by...&quot;","body":"Post the LogCat output, especially the line that starts &quot;Caused by...&quot;"}],"owner":{"account_id":29841917,"reputation":1,"user_id":22869884,"display_name":"Rodrigo Coninck"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":16,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1699327771,"creation_date":1699315379,"question_id":77434860,"body_markdown":"FATAL EXCEPTION: \r\n\r\nMain\r\nProcess: com.example.joquempo, PID: 4111\r\njava.lang.IllegalStateException: \r\n\r\nCould not execute method for android:onClick\r\n\r\nI don&#39;t know what is the problem here, images are well-linked. I am basically trying to create a jokempo game, supposed to be quite easy but now I am receiving the error above which stuck me on this.\r\n\r\n```\r\npackage com.example.joquempo;\r\n\r\nimport androidx.appcompat.app.AppCompatActivity;\r\n\r\nimport android.os.Bundle;\r\nimport android.view.View;\r\nimport android.widget.ImageView;\r\nimport android.widget.TextView;\r\n\r\nimport java.util.Random;\r\n\r\npublic class MainActivity extends AppCompatActivity {\r\n\r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        setContentView(R.layout.activity_main);\r\n    }\r\n\r\n    public void selecionadoPedra(View view) {\r\n        this.opcaoSelecionada(&quot;pedra&quot;);\r\n    }\r\n\r\n    public void selecionadoPapel(View view) {\r\n        this.opcaoSelecionada(&quot;papel&quot;);\r\n    }\r\n\r\n    public void selecionadoTesoura(View view) {\r\n\r\n        this.opcaoSelecionada(&quot;tesoura&quot;);\r\n    }\r\n\r\n    public void opcaoSelecionada(String opcaoSelecionada) {\r\n        ImageView imageResultado = findViewById(R.id.imageResultado);\r\n        TextView textResultado = findViewById(R.id.textResultado);\r\n\r\n        int numero = new Random().nextInt(3);\r\n        String[] opcoes = {&quot;pedra&quot;, &quot;papel&quot;, &quot;tesoura&quot;};\r\n        String opcaoApp = opcoes[numero];\r\n\r\n        switch (opcaoApp) {\r\n            case &quot;pedra&quot;:\r\n                imageResultado.setImageResource(R.drawable.pedra);\r\n                break;\r\n\r\n            case &quot;papel&quot;:\r\n                imageResultado.setImageResource(R.drawable.papel);\r\n                break;\r\n\r\n            case &quot;tesoura&quot;:\r\n                imageResultado.setImageResource(R.drawable.tesoura);\r\n                break;\r\n        }\r\n        if ((opcaoApp.equals(&quot;tesoura&quot;) &amp;&amp; opcaoSelecionada.equals(&quot;papel&quot;)) ||\r\n                (opcaoApp.equals(&quot;papel&quot;) &amp;&amp; opcaoSelecionada.equals(&quot;pedra&quot;)) ||\r\n                (opcaoApp.equals(&quot;pedra&quot;) &amp;&amp; opcaoSelecionada.equals(&quot;tesoura&quot;))) {\r\n            textResultado.setText(&quot;Voc&#234; Perdeu :( &quot;);\r\n        } else if ((opcaoSelecionada.equals(&quot;tesoura&quot;) &amp;&amp; opcaoApp.equals(&quot;papel&quot;)) ||\r\n                (opcaoSelecionada.equals(&quot;papel&quot;) &amp;&amp; opcaoApp.equals(&quot;pedra&quot;)) ||\r\n\r\n\r\n                (opcaoSelecionada.equals(&quot;pedra&quot;) &amp;&amp; opcaoApp.equals(&quot;tesoura&quot;))) {\r\n            textResultado.setText(&quot;Voc&#234; ganhou! :D &quot;);\r\n        } else {\r\n            textResultado.setText(&quot;Empatamos ;) &quot;);\r\n        }\r\n    }\r\n```","title":"App is closing - java.lang.IllegalStateException: Could not execute method for android:onClick","body":"<p>FATAL EXCEPTION:</p>\n<p>Main\nProcess: com.example.joquempo, PID: 4111\njava.lang.IllegalStateException:</p>\n<p>Could not execute method for android:onClick</p>\n<p>I don't know what is the problem here, images are well-linked. I am basically trying to create a jokempo game, supposed to be quite easy but now I am receiving the error above which stuck me on this.</p>\n<pre><code>package com.example.joquempo;\n\nimport androidx.appcompat.app.AppCompatActivity;\n\nimport android.os.Bundle;\nimport android.view.View;\nimport android.widget.ImageView;\nimport android.widget.TextView;\n\nimport java.util.Random;\n\npublic class MainActivity extends AppCompatActivity {\n\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.activity_main);\n    }\n\n    public void selecionadoPedra(View view) {\n        this.opcaoSelecionada(&quot;pedra&quot;);\n    }\n\n    public void selecionadoPapel(View view) {\n        this.opcaoSelecionada(&quot;papel&quot;);\n    }\n\n    public void selecionadoTesoura(View view) {\n\n        this.opcaoSelecionada(&quot;tesoura&quot;);\n    }\n\n    public void opcaoSelecionada(String opcaoSelecionada) {\n        ImageView imageResultado = findViewById(R.id.imageResultado);\n        TextView textResultado = findViewById(R.id.textResultado);\n\n        int numero = new Random().nextInt(3);\n        String[] opcoes = {&quot;pedra&quot;, &quot;papel&quot;, &quot;tesoura&quot;};\n        String opcaoApp = opcoes[numero];\n\n        switch (opcaoApp) {\n            case &quot;pedra&quot;:\n                imageResultado.setImageResource(R.drawable.pedra);\n                break;\n\n            case &quot;papel&quot;:\n                imageResultado.setImageResource(R.drawable.papel);\n                break;\n\n            case &quot;tesoura&quot;:\n                imageResultado.setImageResource(R.drawable.tesoura);\n                break;\n        }\n        if ((opcaoApp.equals(&quot;tesoura&quot;) &amp;&amp; opcaoSelecionada.equals(&quot;papel&quot;)) ||\n                (opcaoApp.equals(&quot;papel&quot;) &amp;&amp; opcaoSelecionada.equals(&quot;pedra&quot;)) ||\n                (opcaoApp.equals(&quot;pedra&quot;) &amp;&amp; opcaoSelecionada.equals(&quot;tesoura&quot;))) {\n            textResultado.setText(&quot;Voc Perdeu :( &quot;);\n        } else if ((opcaoSelecionada.equals(&quot;tesoura&quot;) &amp;&amp; opcaoApp.equals(&quot;papel&quot;)) ||\n                (opcaoSelecionada.equals(&quot;papel&quot;) &amp;&amp; opcaoApp.equals(&quot;pedra&quot;)) ||\n\n\n                (opcaoSelecionada.equals(&quot;pedra&quot;) &amp;&amp; opcaoApp.equals(&quot;tesoura&quot;))) {\n            textResultado.setText(&quot;Voc ganhou! :D &quot;);\n        } else {\n            textResultado.setText(&quot;Empatamos ;) &quot;);\n        }\n    }\n</code></pre>\n"},{"tags":["java","javascript","jquery","jsp"],"comments":[{"owner":{"account_id":440855,"reputation":6392,"user_id":830663,"display_name":"Tap"},"score":0,"creation_date":1413153554,"post_id":26330195,"comment_id":41325339,"body_markdown":"Note that in your code above, you&#39;re trying to select `result` elements rather than the element with id=&quot;result&quot;.  Is there any reason why you couldn&#39;t just use server side includes?","body":"Note that in your code above, you&#39;re trying to select <code>result</code> elements rather than the element with id=&quot;result&quot;.  Is there any reason why you couldn&#39;t just use server side includes?"}],"answers":[{"tags":[],"owner":{"account_id":4362238,"reputation":24233,"user_id":3558931,"accept_rate":85,"display_name":"PeterKA"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1413159429,"creation_date":1413158093,"answer_id":26331236,"question_id":26330195,"body_markdown":"You have to wait for `DOM ready` event:\r\n\r\n    $(document).ready(function() {\r\n        $(&#39;#button&#39;).on(&quot;click&quot;, function() {\r\n            $(&#39;#dialog&#39;).load(&#39;/.projectcontext/jsp/viewfolder/helloworldedit.jsp&#39;).dialog();\r\n        });\r\n    });","title":"load a jsp in a dialog and div","body":"<p>You have to wait for <code>DOM ready</code> event:</p>\n\n<pre><code>$(document).ready(function() {\n    $('#button').on(\"click\", function() {\n        $('#dialog').load('/.projectcontext/jsp/viewfolder/helloworldedit.jsp').dialog();\n    });\n});\n</code></pre>\n"},{"tags":[],"owner":{"account_id":4335413,"reputation":2785,"user_id":3540002,"accept_rate":100,"display_name":"OO7"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1413229860,"creation_date":1413229860,"answer_id":26347833,"question_id":26330195,"body_markdown":"*Try below code :-*\r\n\r\nSuppose you have a `div` in `newworld.jsp` which contains all data which you want to load in another `div` which is present in `helloworld.jsp`\r\n\r\n**newworld.jsp**\r\n\r\n    &lt;!doctype html&gt;\r\n    &lt;html&gt;\r\n        &lt;body&gt;\r\n            &lt;div id=&quot;target&quot;&gt;\r\n                &lt;!-- other HTML controls --&gt;\r\n            &lt;/div&gt;\r\n        &lt;/body&gt;\r\n    &lt;/html&gt;\r\n\r\n**helloworld.jsp**\r\n\r\n    &lt;a href=&quot;#&quot; onclick=&quot;loadPage();&quot;&gt;Click Me&lt;/a&gt;\r\n    &lt;div id=&quot;page&quot;&gt;&lt;/div&gt;\r\n\r\n    &lt;script&gt;\r\n        function loadPage(){\r\n            $(&#39;#page&#39;).load(&#39;newworld.jsp #target&#39;);\r\n            \r\n            or\r\n            // If you choose this method then give path of JSP to be loaded in\r\n            // anchor tag\r\n            $(&#39;#page&#39;).load($(this).attr(&#39;href&#39;));\r\n            return false;\r\n        }\r\n    &lt;/script&gt;\r\n\r\n**OR**\r\n\r\nYou can use **JSP include tag** like this \r\n\r\n    &lt;div id=&quot;page&quot; style=&quot;width:300px; height:300px;&quot;&gt;  \r\n        &lt;jsp:include page=&quot;path of the page to be loaded&quot;&gt;&lt;/jsp:include&gt;  \r\n    &lt;/div&gt; ","title":"load a jsp in a dialog and div","body":"<p><em>Try below code :-</em></p>\n\n<p>Suppose you have a <code>div</code> in <code>newworld.jsp</code> which contains all data which you want to load in another <code>div</code> which is present in <code>helloworld.jsp</code></p>\n\n<p><strong>newworld.jsp</strong></p>\n\n<pre><code>&lt;!doctype html&gt;\n&lt;html&gt;\n    &lt;body&gt;\n        &lt;div id=\"target\"&gt;\n            &lt;!-- other HTML controls --&gt;\n        &lt;/div&gt;\n    &lt;/body&gt;\n&lt;/html&gt;\n</code></pre>\n\n<p><strong>helloworld.jsp</strong></p>\n\n<pre><code>&lt;a href=\"#\" onclick=\"loadPage();\"&gt;Click Me&lt;/a&gt;\n&lt;div id=\"page\"&gt;&lt;/div&gt;\n\n&lt;script&gt;\n    function loadPage(){\n        $('#page').load('newworld.jsp #target');\n\n        or\n        // If you choose this method then give path of JSP to be loaded in\n        // anchor tag\n        $('#page').load($(this).attr('href'));\n        return false;\n    }\n&lt;/script&gt;\n</code></pre>\n\n<p><strong>OR</strong></p>\n\n<p>You can use <strong>JSP include tag</strong> like this </p>\n\n<pre><code>&lt;div id=\"page\" style=\"width:300px; height:300px;\"&gt;  \n    &lt;jsp:include page=\"path of the page to be loaded\"&gt;&lt;/jsp:include&gt;  \n&lt;/div&gt; \n</code></pre>\n"}],"owner":{"account_id":249229,"reputation":3938,"user_id":525146,"accept_rate":53,"display_name":"user525146"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":8335,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1699326245,"creation_date":1413149441,"question_id":26330195,"body_markdown":"I know this might be a duplication question, but I couldn&#39;t find the answer for this simple question. I want to load a new jsp file in a dialog and a div.\r\n\r\n    Structure:\r\n     -WebContent\r\n       -jsp\r\n         -viewfolder\r\n           -helloworld.jsp\r\n           -helloworldedit.jsp\r\n           -newworld.jsp\r\n\r\nlet&#39;s say I have `helloworld.jsp` which is loaded from request dispatcher. I want to load `newworld.jsp` in a div tag in `helloworld.jsp`.\r\n\r\n    &lt;div id=&quot;result&quot;&gt;&lt;/div&gt;\r\n    \r\n    $(&#39;#result&#39;).load(&#39;/jsp/viewfolder/newworld.jsp&#39;);\r\n\r\nTried the above code, didn&#39;t work.\r\n\r\nI have also tried to load a jsp page into a dialog and this one has failed too.\r\n    \r\n    &lt;button id=&quot;button&quot;&gt;button&lt;/button&gt;\r\n    &lt;div id=&quot;dialog&quot;&gt;&lt;/div&gt;\r\n    \r\n    $(&#39;#button&#39;).on(&quot;click&quot;, function() {\r\n    \t\t$(&#39;#dialog&#39;).load(&#39;/jsp/viewfolder/helloworldedit.jsp&#39;).dialog();\r\n    \t});\r\n\r\nThe question I have is, this is the right way to call the jsp page or do I have to load the page from request dispatcher using ajax. \r\n\r\nTo test if the path is correct, I tried to put a `calendar.gif` in the same folder and I was able to reach it from the context.\r\n\r\n    http://localhost:port/.projectcontext/jsp/viewfolder/calendar.gif.","title":"load a jsp in a dialog and div","body":"<p>I know this might be a duplication question, but I couldn't find the answer for this simple question. I want to load a new jsp file in a dialog and a div.</p>\n\n<pre><code>Structure:\n -WebContent\n   -jsp\n     -viewfolder\n       -helloworld.jsp\n       -helloworldedit.jsp\n       -newworld.jsp\n</code></pre>\n\n<p>let's say I have <code>helloworld.jsp</code> which is loaded from request dispatcher. I want to load <code>newworld.jsp</code> in a div tag in <code>helloworld.jsp</code>.</p>\n\n<pre><code>&lt;div id=\"result\"&gt;&lt;/div&gt;\n\n$('#result').load('/jsp/viewfolder/newworld.jsp');\n</code></pre>\n\n<p>Tried the above code, didn't work.</p>\n\n<p>I have also tried to load a jsp page into a dialog and this one has failed too.</p>\n\n<pre><code>&lt;button id=\"button\"&gt;button&lt;/button&gt;\n&lt;div id=\"dialog\"&gt;&lt;/div&gt;\n\n$('#button').on(\"click\", function() {\n        $('#dialog').load('/jsp/viewfolder/helloworldedit.jsp').dialog();\n    });\n</code></pre>\n\n<p>The question I have is, this is the right way to call the jsp page or do I have to load the page from request dispatcher using ajax. </p>\n\n<p>To test if the path is correct, I tried to put a <code>calendar.gif</code> in the same folder and I was able to reach it from the context.</p>\n\n<pre><code>http://localhost:port/.projectcontext/jsp/viewfolder/calendar.gif.\n</code></pre>\n"},{"tags":["java","ldap","jndi","spring-ldap","spring-security-ldap"],"comments":[{"owner":{"account_id":71739,"reputation":307143,"user_id":207421,"accept_rate":82,"display_name":"user207421"},"score":2,"creation_date":1578286150,"post_id":59606804,"comment_id":105377420,"body_markdown":"It is the DN of the user. Typically you have to bind as an admin user to do the search for the user, then attempt to rebind as that user when found.","body":"It is the DN of the user. Typically you have to bind as an admin user to do the search for the user, then attempt to rebind as that user when found."},{"owner":{"account_id":7750531,"reputation":119,"user_id":5866599,"display_name":"Sajith Wijerathne"},"score":0,"creation_date":1578286990,"post_id":59606804,"comment_id":105377565,"body_markdown":"@user207421, Can you give me an example?","body":"@user207421, Can you give me an example?"},{"owner":{"account_id":71739,"reputation":307143,"user_id":207421,"accept_rate":82,"display_name":"user207421"},"score":0,"creation_date":1578287112,"post_id":59606804,"comment_id":105377587,"body_markdown":"An example, of what? Binding as your admin user, which I don&#39;t know? Searching for the user on some attribute that I don&#39;t know? Trying to log in as the user, which you already have above except for not using the DN?","body":"An example, of what? Binding as your admin user, which I don&#39;t know? Searching for the user on some attribute that I don&#39;t know? Trying to log in as the user, which you already have above except for not using the DN?"},{"owner":{"account_id":7750531,"reputation":119,"user_id":5866599,"display_name":"Sajith Wijerathne"},"score":0,"creation_date":1578287667,"post_id":59606804,"comment_id":105377685,"body_markdown":"There is no admin user in this AD as it is not containing LDAP groups.","body":"There is no admin user in this AD as it is not containing LDAP groups."},{"owner":{"account_id":7750531,"reputation":119,"user_id":5866599,"display_name":"Sajith Wijerathne"},"score":0,"creation_date":1578291308,"post_id":59606804,"comment_id":105378543,"body_markdown":"A few weeks back I got a solution like SECURITY_PRINCIPAL=&quot;domain\\username&quot;, but not sure whether the syntax is the same.","body":"A few weeks back I got a solution like SECURITY_PRINCIPAL=&quot;domain\\username&quot;, but not sure whether the syntax is the same."},{"owner":{"account_id":2979716,"reputation":12923,"user_id":2529954,"display_name":"EricLavault"},"score":0,"creation_date":1578294704,"post_id":59606804,"comment_id":105379585,"body_markdown":"It&#39;s the bind dn, it should be either in this format `domain.com\\username` either in this one `cn=username,dc=domain,dc=com`","body":"It&#39;s the bind dn, it should be either in this format <code>domain.com\\username</code> either in this one <code>cn=username,dc=domain,dc=com</code>"},{"owner":{"account_id":7750531,"reputation":119,"user_id":5866599,"display_name":"Sajith Wijerathne"},"score":0,"creation_date":1578296576,"post_id":59606804,"comment_id":105380151,"body_markdown":"I have used them both by, passing SECURITY_PRINCIPAL value from application.properties file, but I am getting &quot;LDAP error code 49 AcceptSecurityContext error data 52e v2580&quot; for both types even credentials are correct.","body":"I have used them both by, passing SECURITY_PRINCIPAL value from application.properties file, but I am getting &quot;LDAP error code 49 AcceptSecurityContext error data 52e v2580&quot; for both types even credentials are correct."}],"answers":[{"tags":[],"owner":{"account_id":31959,"reputation":10608,"user_id":88122,"accept_rate":0,"display_name":"jwilleke"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1699323829,"creation_date":1578317542,"answer_id":59613041,"question_id":59606804,"body_markdown":"The LDAP error code 49 AcceptSecurityContext error data 52e Returns when username is valid but password/credential is invalid.\r\n\r\nWe have several examples for [JNDI Against Microsoft Active Directory][1].\r\n\r\n\r\n\r\n  [1]: https://bitbucket.org/jwilleke/examples/src/master/Examples-JNDI/src/com/willeke/samples/ldap/jndi/ADConnection.java","title":"What is the correct format for SECURITY_PRINCIPAL in LDAP authentication using &quot;com.sun.jndi.ldap.LdapCtxFactory&quot;","body":"<p>The LDAP error code 49 AcceptSecurityContext error data 52e Returns when username is valid but password/credential is invalid.</p>\n<p>We have several examples for <a href=\"https://bitbucket.org/jwilleke/examples/src/master/Examples-JNDI/src/com/willeke/samples/ldap/jndi/ADConnection.java\" rel=\"nofollow noreferrer\">JNDI Against Microsoft Active Directory</a>.</p>\n"}],"owner":{"account_id":7750531,"reputation":119,"user_id":5866599,"display_name":"Sajith Wijerathne"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":855,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1699323843,"creation_date":1578285974,"question_id":59606804,"body_markdown":"    env.put(Context.INITIAL_CONTEXT_FACTORY, &quot;com.sun.jndi.ldap.LdapCtxFactory&quot;);\r\n    env.put(Context.PROVIDER_URL, &quot;ldap://xxx.xxx.xxx.xx:xxx&quot;);\r\n    env.put(Context.SECURITY_AUTHENTICATION, &quot;simple&quot;);\r\n    env.put(Context.SECURITY_PRINCIPAL, &quot;CN=username&quot;);\r\n    env.put(Context.SECURITY_CREDENTIALS, pwd);\r\n    env.put(Context.REFERRAL,&quot;follow&quot;); \r\n\r\nI need to search only the &quot;CN&quot; in the particular domain. Tried with above way and many formats, but end up with the error &quot;LDAP error code 49 AcceptSecurityContext error data 52e v2580&quot;.","title":"What is the correct format for SECURITY_PRINCIPAL in LDAP authentication using &quot;com.sun.jndi.ldap.LdapCtxFactory&quot;","body":"<pre><code>env.put(Context.INITIAL_CONTEXT_FACTORY, &quot;com.sun.jndi.ldap.LdapCtxFactory&quot;);\nenv.put(Context.PROVIDER_URL, &quot;ldap://xxx.xxx.xxx.xx:xxx&quot;);\nenv.put(Context.SECURITY_AUTHENTICATION, &quot;simple&quot;);\nenv.put(Context.SECURITY_PRINCIPAL, &quot;CN=username&quot;);\nenv.put(Context.SECURITY_CREDENTIALS, pwd);\nenv.put(Context.REFERRAL,&quot;follow&quot;); \n</code></pre>\n<p>I need to search only the &quot;CN&quot; in the particular domain. Tried with above way and many formats, but end up with the error &quot;LDAP error code 49 AcceptSecurityContext error data 52e v2580&quot;.</p>\n"},{"tags":["java","ssl","apache-httpcomponents"],"answers":[{"tags":[],"owner":{"account_id":32287,"reputation":8083,"user_id":89435,"accept_rate":71,"display_name":"mavroprovato"},"down_vote_count":2,"up_vote_count":159,"is_accepted":true,"score":157,"last_activity_date":1558733393,"creation_date":1382446245,"answer_id":19518383,"question_id":19517538,"body_markdown":"The code below works for trusting self-signed certificates. You have to use the [TrustSelfSignedStrategy][1] when creating your client:\r\n\r\n    SSLContextBuilder builder = new SSLContextBuilder();\r\n    builder.loadTrustMaterial(null, new TrustSelfSignedStrategy());\r\n    SSLConnectionSocketFactory sslsf = new SSLConnectionSocketFactory(\r\n            builder.build());\r\n    CloseableHttpClient httpclient = HttpClients.custom().setSSLSocketFactory(\r\n            sslsf).build();\r\n\r\n    HttpGet httpGet = new HttpGet(&quot;https://some-server&quot;);\r\n    CloseableHttpResponse response = httpclient.execute(httpGet);\r\n    try {\r\n        System.out.println(response.getStatusLine());\r\n        HttpEntity entity = response.getEntity();\r\n        EntityUtils.consume(entity);\r\n    } finally {\r\n        response.close();\r\n    }\r\n\r\nI did not include the `SSLConnectionSocketFactory.ALLOW_ALL_HOSTNAME_VERIFIER` on purpose: The point was to allow testing with self signed certificates so you don&#39;t have to acquire a proper certificate from a certification authority. You can easily create a self-signed certificate with the correct host name, so do that instead of adding the `SSLConnectionSocketFactory.ALLOW_ALL_HOSTNAME_VERIFIER` flag.\r\n\r\n  [1]: http://hc.apache.org/httpcomponents-client-ga/httpclient/apidocs/org/apache/http/conn/ssl/TrustSelfSignedStrategy.html","title":"Ignoring SSL certificate in Apache HttpClient 4.3","body":"<p>The code below works for trusting self-signed certificates. You have to use the <a href=\"http://hc.apache.org/httpcomponents-client-ga/httpclient/apidocs/org/apache/http/conn/ssl/TrustSelfSignedStrategy.html\" rel=\"noreferrer\">TrustSelfSignedStrategy</a> when creating your client:</p>\n\n<pre><code>SSLContextBuilder builder = new SSLContextBuilder();\nbuilder.loadTrustMaterial(null, new TrustSelfSignedStrategy());\nSSLConnectionSocketFactory sslsf = new SSLConnectionSocketFactory(\n        builder.build());\nCloseableHttpClient httpclient = HttpClients.custom().setSSLSocketFactory(\n        sslsf).build();\n\nHttpGet httpGet = new HttpGet(\"https://some-server\");\nCloseableHttpResponse response = httpclient.execute(httpGet);\ntry {\n    System.out.println(response.getStatusLine());\n    HttpEntity entity = response.getEntity();\n    EntityUtils.consume(entity);\n} finally {\n    response.close();\n}\n</code></pre>\n\n<p>I did not include the <code>SSLConnectionSocketFactory.ALLOW_ALL_HOSTNAME_VERIFIER</code> on purpose: The point was to allow testing with self signed certificates so you don't have to acquire a proper certificate from a certification authority. You can easily create a self-signed certificate with the correct host name, so do that instead of adding the <code>SSLConnectionSocketFactory.ALLOW_ALL_HOSTNAME_VERIFIER</code> flag.</p>\n"},{"tags":[],"owner":{"account_id":151394,"reputation":52351,"user_id":365237,"accept_rate":96,"display_name":"eis"},"down_vote_count":1,"up_vote_count":43,"is_accepted":false,"score":42,"last_activity_date":1504071164,"creation_date":1382449193,"answer_id":19519566,"question_id":19517538,"body_markdown":"As an addition to the answer of @mavroprovato, if you want to trust all certificates instead of just self-signed, you&#39;d do (in the style of your code)\r\n\r\n    builder.loadTrustMaterial(null, new TrustStrategy(){\r\n        public boolean isTrusted(X509Certificate[] chain, String authType)\r\n            throws CertificateException {\r\n            return true;\r\n        }\r\n    });\r\n\r\nor (direct copy-paste from my own code):\r\n\r\n    import javax.net.ssl.SSLContext;\r\n    import org.apache.http.ssl.TrustStrategy;\r\n    import org.apache.http.ssl.SSLContexts;\r\n\r\n    // ...\r\n\r\n            SSLContext sslContext = SSLContexts\r\n                    .custom()\r\n                    //FIXME to contain real trust store\r\n                    .loadTrustMaterial(new TrustStrategy() {\r\n                        @Override\r\n                        public boolean isTrusted(X509Certificate[] chain,\r\n                            String authType) throws CertificateException {\r\n                            return true;\r\n                        }\r\n                    })\r\n                    .build();\r\n\r\nAnd if you want to skip hostname verification as well, you need to set \r\n\r\n        CloseableHttpClient httpclient = HttpClients.custom().setSSLSocketFactory(\r\n                sslsf).setSSLHostnameVerifier( NoopHostnameVerifier.INSTANCE).build();\r\n\r\nas well. (ALLOW_ALL_HOSTNAME_VERIFIER is deprecated).\r\n\r\nObligatory warning: you shouldn&#39;t really do this, accepting all certificates is a bad thing. However there are some rare use cases where you want to do this.\r\n\r\nAs a note to code previously given, you&#39;ll want to close response even if httpclient.execute() throws an exception\r\n\r\n    CloseableHttpResponse response = null;\r\n    try {\r\n        response = httpclient.execute(httpGet);\r\n        System.out.println(response.getStatusLine());\r\n        HttpEntity entity = response.getEntity();\r\n        EntityUtils.consume(entity);\r\n    }\r\n    finally {\r\n        if (response != null) {\r\n            response.close();\r\n        }\r\n    }\r\n\r\nCode above was tested using\r\n\r\n    &lt;dependency&gt;\r\n        &lt;groupId&gt;org.apache.httpcomponents&lt;/groupId&gt;\r\n        &lt;artifactId&gt;httpclient&lt;/artifactId&gt;\r\n        &lt;version&gt;4.5.3&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n\r\nAnd for the interested, here&#39;s my full test set:\r\n\r\n    import org.apache.http.HttpEntity;\r\n    import org.apache.http.client.methods.CloseableHttpResponse;\r\n    import org.apache.http.client.methods.HttpGet;\r\n    import org.apache.http.conn.ssl.NoopHostnameVerifier;\r\n    import org.apache.http.conn.ssl.SSLConnectionSocketFactory;\r\n    import org.apache.http.conn.ssl.TrustSelfSignedStrategy;\r\n    import org.apache.http.impl.client.CloseableHttpClient;\r\n    import org.apache.http.impl.client.HttpClients;\r\n    import org.apache.http.ssl.SSLContextBuilder;\r\n    import org.apache.http.ssl.TrustStrategy;\r\n    import org.apache.http.util.EntityUtils;\r\n    import org.junit.Test;\r\n    \r\n    import javax.net.ssl.HostnameVerifier;\r\n    import javax.net.ssl.SSLHandshakeException;\r\n    import javax.net.ssl.SSLPeerUnverifiedException;\r\n    import java.security.cert.CertificateException;\r\n    import java.security.cert.X509Certificate;\r\n    \r\n    public class TrustAllCertificatesTest {\r\n        final String expiredCertSite = &quot;https://expired.badssl.com/&quot;;\r\n        final String selfSignedCertSite = &quot;https://self-signed.badssl.com/&quot;;\r\n        final String wrongHostCertSite = &quot;https://wrong.host.badssl.com/&quot;;\r\n    \r\n        static final TrustStrategy trustSelfSignedStrategy = new TrustSelfSignedStrategy();\r\n        static final TrustStrategy trustAllStrategy = new TrustStrategy(){\r\n            public boolean isTrusted(X509Certificate[] chain, String authType)\r\n                    throws CertificateException {\r\n                return true;\r\n            }\r\n        };\r\n    \r\n        @Test\r\n        public void testSelfSignedOnSelfSignedUsingCode() throws Exception {\r\n            doGet(selfSignedCertSite, trustSelfSignedStrategy);\r\n        }\r\n        @Test(expected = SSLHandshakeException.class)\r\n        public void testExpiredOnSelfSignedUsingCode() throws Exception {\r\n            doGet(expiredCertSite, trustSelfSignedStrategy);\r\n        }\r\n        @Test(expected = SSLPeerUnverifiedException.class)\r\n        public void testWrongHostOnSelfSignedUsingCode() throws Exception {\r\n            doGet(wrongHostCertSite, trustSelfSignedStrategy);\r\n        }\r\n    \r\n        @Test\r\n        public void testSelfSignedOnTrustAllUsingCode() throws Exception {\r\n            doGet(selfSignedCertSite, trustAllStrategy);\r\n        }\r\n        @Test\r\n        public void testExpiredOnTrustAllUsingCode() throws Exception {\r\n            doGet(expiredCertSite, trustAllStrategy);\r\n        }\r\n        @Test(expected = SSLPeerUnverifiedException.class)\r\n        public void testWrongHostOnTrustAllUsingCode() throws Exception {\r\n            doGet(wrongHostCertSite, trustAllStrategy);\r\n        }\r\n    \r\n        @Test\r\n        public void testSelfSignedOnAllowAllUsingCode() throws Exception {\r\n            doGet(selfSignedCertSite, trustAllStrategy, NoopHostnameVerifier.INSTANCE);\r\n        }\r\n        @Test\r\n        public void testExpiredOnAllowAllUsingCode() throws Exception {\r\n            doGet(expiredCertSite, trustAllStrategy, NoopHostnameVerifier.INSTANCE);\r\n        }\r\n        @Test\r\n        public void testWrongHostOnAllowAllUsingCode() throws Exception {\r\n            doGet(expiredCertSite, trustAllStrategy, NoopHostnameVerifier.INSTANCE);\r\n        }\r\n    \r\n        public void doGet(String url, TrustStrategy trustStrategy, HostnameVerifier hostnameVerifier) throws Exception {\r\n            SSLContextBuilder builder = new SSLContextBuilder();\r\n            builder.loadTrustMaterial(trustStrategy);\r\n            SSLConnectionSocketFactory sslsf = new SSLConnectionSocketFactory(\r\n                    builder.build());\r\n            CloseableHttpClient httpclient = HttpClients.custom().setSSLSocketFactory(\r\n                    sslsf).setSSLHostnameVerifier(hostnameVerifier).build();\r\n    \r\n            HttpGet httpGet = new HttpGet(url);\r\n            CloseableHttpResponse response = httpclient.execute(httpGet);\r\n            try {\r\n                System.out.println(response.getStatusLine());\r\n                HttpEntity entity = response.getEntity();\r\n                EntityUtils.consume(entity);\r\n            } finally {\r\n                response.close();\r\n            }\r\n        }\r\n        public void doGet(String url, TrustStrategy trustStrategy) throws Exception {\r\n    \r\n            SSLContextBuilder builder = new SSLContextBuilder();\r\n            builder.loadTrustMaterial(trustStrategy);\r\n            SSLConnectionSocketFactory sslsf = new SSLConnectionSocketFactory(\r\n                    builder.build());\r\n            CloseableHttpClient httpclient = HttpClients.custom().setSSLSocketFactory(\r\n                    sslsf).build();\r\n    \r\n            HttpGet httpGet = new HttpGet(url);\r\n            CloseableHttpResponse response = httpclient.execute(httpGet);\r\n            try {\r\n                System.out.println(response.getStatusLine());\r\n                HttpEntity entity = response.getEntity();\r\n                EntityUtils.consume(entity);\r\n            } finally {\r\n                response.close();\r\n            }\r\n        }\r\n    }\r\n\r\n(working test project [in github](https://github.com/eis/httpclienttests/blob/master/src/test/java/fi/eis/httptests/truststore/TrustAllCertificatesTest.java))","title":"Ignoring SSL certificate in Apache HttpClient 4.3","body":"<p>As an addition to the answer of @mavroprovato, if you want to trust all certificates instead of just self-signed, you'd do (in the style of your code)</p>\n\n<pre><code>builder.loadTrustMaterial(null, new TrustStrategy(){\n    public boolean isTrusted(X509Certificate[] chain, String authType)\n        throws CertificateException {\n        return true;\n    }\n});\n</code></pre>\n\n<p>or (direct copy-paste from my own code):</p>\n\n<pre><code>import javax.net.ssl.SSLContext;\nimport org.apache.http.ssl.TrustStrategy;\nimport org.apache.http.ssl.SSLContexts;\n\n// ...\n\n        SSLContext sslContext = SSLContexts\n                .custom()\n                //FIXME to contain real trust store\n                .loadTrustMaterial(new TrustStrategy() {\n                    @Override\n                    public boolean isTrusted(X509Certificate[] chain,\n                        String authType) throws CertificateException {\n                        return true;\n                    }\n                })\n                .build();\n</code></pre>\n\n<p>And if you want to skip hostname verification as well, you need to set </p>\n\n<pre><code>    CloseableHttpClient httpclient = HttpClients.custom().setSSLSocketFactory(\n            sslsf).setSSLHostnameVerifier( NoopHostnameVerifier.INSTANCE).build();\n</code></pre>\n\n<p>as well. (ALLOW_ALL_HOSTNAME_VERIFIER is deprecated).</p>\n\n<p>Obligatory warning: you shouldn't really do this, accepting all certificates is a bad thing. However there are some rare use cases where you want to do this.</p>\n\n<p>As a note to code previously given, you'll want to close response even if httpclient.execute() throws an exception</p>\n\n<pre><code>CloseableHttpResponse response = null;\ntry {\n    response = httpclient.execute(httpGet);\n    System.out.println(response.getStatusLine());\n    HttpEntity entity = response.getEntity();\n    EntityUtils.consume(entity);\n}\nfinally {\n    if (response != null) {\n        response.close();\n    }\n}\n</code></pre>\n\n<p>Code above was tested using</p>\n\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;org.apache.httpcomponents&lt;/groupId&gt;\n    &lt;artifactId&gt;httpclient&lt;/artifactId&gt;\n    &lt;version&gt;4.5.3&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n\n<p>And for the interested, here's my full test set:</p>\n\n<pre><code>import org.apache.http.HttpEntity;\nimport org.apache.http.client.methods.CloseableHttpResponse;\nimport org.apache.http.client.methods.HttpGet;\nimport org.apache.http.conn.ssl.NoopHostnameVerifier;\nimport org.apache.http.conn.ssl.SSLConnectionSocketFactory;\nimport org.apache.http.conn.ssl.TrustSelfSignedStrategy;\nimport org.apache.http.impl.client.CloseableHttpClient;\nimport org.apache.http.impl.client.HttpClients;\nimport org.apache.http.ssl.SSLContextBuilder;\nimport org.apache.http.ssl.TrustStrategy;\nimport org.apache.http.util.EntityUtils;\nimport org.junit.Test;\n\nimport javax.net.ssl.HostnameVerifier;\nimport javax.net.ssl.SSLHandshakeException;\nimport javax.net.ssl.SSLPeerUnverifiedException;\nimport java.security.cert.CertificateException;\nimport java.security.cert.X509Certificate;\n\npublic class TrustAllCertificatesTest {\n    final String expiredCertSite = \"https://expired.badssl.com/\";\n    final String selfSignedCertSite = \"https://self-signed.badssl.com/\";\n    final String wrongHostCertSite = \"https://wrong.host.badssl.com/\";\n\n    static final TrustStrategy trustSelfSignedStrategy = new TrustSelfSignedStrategy();\n    static final TrustStrategy trustAllStrategy = new TrustStrategy(){\n        public boolean isTrusted(X509Certificate[] chain, String authType)\n                throws CertificateException {\n            return true;\n        }\n    };\n\n    @Test\n    public void testSelfSignedOnSelfSignedUsingCode() throws Exception {\n        doGet(selfSignedCertSite, trustSelfSignedStrategy);\n    }\n    @Test(expected = SSLHandshakeException.class)\n    public void testExpiredOnSelfSignedUsingCode() throws Exception {\n        doGet(expiredCertSite, trustSelfSignedStrategy);\n    }\n    @Test(expected = SSLPeerUnverifiedException.class)\n    public void testWrongHostOnSelfSignedUsingCode() throws Exception {\n        doGet(wrongHostCertSite, trustSelfSignedStrategy);\n    }\n\n    @Test\n    public void testSelfSignedOnTrustAllUsingCode() throws Exception {\n        doGet(selfSignedCertSite, trustAllStrategy);\n    }\n    @Test\n    public void testExpiredOnTrustAllUsingCode() throws Exception {\n        doGet(expiredCertSite, trustAllStrategy);\n    }\n    @Test(expected = SSLPeerUnverifiedException.class)\n    public void testWrongHostOnTrustAllUsingCode() throws Exception {\n        doGet(wrongHostCertSite, trustAllStrategy);\n    }\n\n    @Test\n    public void testSelfSignedOnAllowAllUsingCode() throws Exception {\n        doGet(selfSignedCertSite, trustAllStrategy, NoopHostnameVerifier.INSTANCE);\n    }\n    @Test\n    public void testExpiredOnAllowAllUsingCode() throws Exception {\n        doGet(expiredCertSite, trustAllStrategy, NoopHostnameVerifier.INSTANCE);\n    }\n    @Test\n    public void testWrongHostOnAllowAllUsingCode() throws Exception {\n        doGet(expiredCertSite, trustAllStrategy, NoopHostnameVerifier.INSTANCE);\n    }\n\n    public void doGet(String url, TrustStrategy trustStrategy, HostnameVerifier hostnameVerifier) throws Exception {\n        SSLContextBuilder builder = new SSLContextBuilder();\n        builder.loadTrustMaterial(trustStrategy);\n        SSLConnectionSocketFactory sslsf = new SSLConnectionSocketFactory(\n                builder.build());\n        CloseableHttpClient httpclient = HttpClients.custom().setSSLSocketFactory(\n                sslsf).setSSLHostnameVerifier(hostnameVerifier).build();\n\n        HttpGet httpGet = new HttpGet(url);\n        CloseableHttpResponse response = httpclient.execute(httpGet);\n        try {\n            System.out.println(response.getStatusLine());\n            HttpEntity entity = response.getEntity();\n            EntityUtils.consume(entity);\n        } finally {\n            response.close();\n        }\n    }\n    public void doGet(String url, TrustStrategy trustStrategy) throws Exception {\n\n        SSLContextBuilder builder = new SSLContextBuilder();\n        builder.loadTrustMaterial(trustStrategy);\n        SSLConnectionSocketFactory sslsf = new SSLConnectionSocketFactory(\n                builder.build());\n        CloseableHttpClient httpclient = HttpClients.custom().setSSLSocketFactory(\n                sslsf).build();\n\n        HttpGet httpGet = new HttpGet(url);\n        CloseableHttpResponse response = httpclient.execute(httpGet);\n        try {\n            System.out.println(response.getStatusLine());\n            HttpEntity entity = response.getEntity();\n            EntityUtils.consume(entity);\n        } finally {\n            response.close();\n        }\n    }\n}\n</code></pre>\n\n<p>(working test project <a href=\"https://github.com/eis/httpclienttests/blob/master/src/test/java/fi/eis/httptests/truststore/TrustAllCertificatesTest.java\" rel=\"noreferrer\">in github</a>)</p>\n"},{"tags":[],"owner":{"account_id":2970858,"reputation":2055,"user_id":2522929,"display_name":"vasekt"},"down_vote_count":0,"up_vote_count":100,"is_accepted":false,"score":100,"last_activity_date":1385112995,"creation_date":1384337471,"answer_id":19950935,"question_id":19517538,"body_markdown":"If you are using PoolingHttpClientConnectionManager procedure above doesn&#39;t work, custom SSLContext is ignored. You have to pass socketFactoryRegistry in contructor when creating PoolingHttpClientConnectionManager.\r\n\r\n\r\n   \r\n\r\n    SSLContextBuilder builder = SSLContexts.custom();\r\n    builder.loadTrustMaterial(null, new TrustStrategy() {\r\n        @Override\r\n        public boolean isTrusted(X509Certificate[] chain, String authType)\r\n                throws CertificateException {\r\n            return true;\r\n        }\r\n    });\r\n    SSLContext sslContext = builder.build();\r\n    SSLConnectionSocketFactory sslsf = new SSLConnectionSocketFactory(\r\n            sslContext, new X509HostnameVerifier() {\r\n                @Override\r\n                public void verify(String host, SSLSocket ssl)\r\n                        throws IOException {\r\n                }\r\n    \r\n                @Override\r\n                public void verify(String host, X509Certificate cert)\r\n                        throws SSLException {\r\n                }\r\n    \r\n                @Override\r\n                public void verify(String host, String[] cns,\r\n                        String[] subjectAlts) throws SSLException {\r\n                }\r\n    \r\n                @Override\r\n                public boolean verify(String s, SSLSession sslSession) {\r\n                    return true;\r\n                }\r\n            });\r\n    \r\n    Registry&lt;ConnectionSocketFactory&gt; socketFactoryRegistry = RegistryBuilder\r\n            .&lt;ConnectionSocketFactory&gt; create().register(&quot;https&quot;, sslsf)\r\n            .build();\r\n    \r\n    PoolingHttpClientConnectionManager cm = new PoolingHttpClientConnectionManager(\r\n            socketFactoryRegistry);\r\n    CloseableHttpClient httpclient = HttpClients.custom()\r\n            .setConnectionManager(cm).build();\r\n\r\n","title":"Ignoring SSL certificate in Apache HttpClient 4.3","body":"<p>If you are using PoolingHttpClientConnectionManager procedure above doesn't work, custom SSLContext is ignored. You have to pass socketFactoryRegistry in contructor when creating PoolingHttpClientConnectionManager.</p>\n\n<pre><code>SSLContextBuilder builder = SSLContexts.custom();\nbuilder.loadTrustMaterial(null, new TrustStrategy() {\n    @Override\n    public boolean isTrusted(X509Certificate[] chain, String authType)\n            throws CertificateException {\n        return true;\n    }\n});\nSSLContext sslContext = builder.build();\nSSLConnectionSocketFactory sslsf = new SSLConnectionSocketFactory(\n        sslContext, new X509HostnameVerifier() {\n            @Override\n            public void verify(String host, SSLSocket ssl)\n                    throws IOException {\n            }\n\n            @Override\n            public void verify(String host, X509Certificate cert)\n                    throws SSLException {\n            }\n\n            @Override\n            public void verify(String host, String[] cns,\n                    String[] subjectAlts) throws SSLException {\n            }\n\n            @Override\n            public boolean verify(String s, SSLSession sslSession) {\n                return true;\n            }\n        });\n\nRegistry&lt;ConnectionSocketFactory&gt; socketFactoryRegistry = RegistryBuilder\n        .&lt;ConnectionSocketFactory&gt; create().register(\"https\", sslsf)\n        .build();\n\nPoolingHttpClientConnectionManager cm = new PoolingHttpClientConnectionManager(\n        socketFactoryRegistry);\nCloseableHttpClient httpclient = HttpClients.custom()\n        .setConnectionManager(cm).build();\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3708385,"reputation":241,"user_id":3086318,"display_name":"migo"},"down_vote_count":0,"up_vote_count":24,"is_accepted":false,"score":24,"last_activity_date":1386670324,"creation_date":1386670324,"answer_id":20491564,"question_id":19517538,"body_markdown":"One small addition to the answer by vasekt:\r\n\r\nThe provided solution with the SocketFactoryRegistry works when using PoolingHttpClientConnectionManager.\r\n\r\nHowever, connections via plain http don&#39;t work any longer then. You have to add a PlainConnectionSocketFactory for the http protocol additionally to make them work again: \r\n\r\n\r\n    Registry&lt;ConnectionSocketFactory&gt; socketFactoryRegistry = \r\n      RegistryBuilder.&lt;ConnectionSocketFactory&gt; create()\r\n      .register(&quot;https&quot;, sslsf)\r\n      .register(&quot;http&quot;, new PlainConnectionSocketFactory()).build();","title":"Ignoring SSL certificate in Apache HttpClient 4.3","body":"<p>One small addition to the answer by vasekt:</p>\n\n<p>The provided solution with the SocketFactoryRegistry works when using PoolingHttpClientConnectionManager.</p>\n\n<p>However, connections via plain http don't work any longer then. You have to add a PlainConnectionSocketFactory for the http protocol additionally to make them work again: </p>\n\n<pre><code>Registry&lt;ConnectionSocketFactory&gt; socketFactoryRegistry = \n  RegistryBuilder.&lt;ConnectionSocketFactory&gt; create()\n  .register(\"https\", sslsf)\n  .register(\"http\", new PlainConnectionSocketFactory()).build();\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3536342,"reputation":31,"user_id":2954548,"display_name":"rich95"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1386792760,"creation_date":1386792760,"answer_id":20529007,"question_id":19517538,"body_markdown":"(I would have added a comment directly to vasekt&#39;s answer but I don&#39;t have enough reputation points (not sure the logic there)\r\n\r\nAnyway... what I wanted to say is that even if you aren&#39;t explicitly creating/asking for a PoolingConnection, doesn&#39;t mean you aren&#39;t getting one.\r\n\r\nI was going crazy trying to figure out why the original solution didn&#39;t work for me, but I ignored vasekt&#39;s answer as it &quot;didn&#39;t apply to my case&quot; - wrong! \r\n\r\nI was staring at my stack-trace when low and behold I saw a PoolingConnection in the middle of it.  Bang - I tired his addition and success!!  (our demo is tomorrow and I was getting desperate) :-)  ","title":"Ignoring SSL certificate in Apache HttpClient 4.3","body":"<p>(I would have added a comment directly to vasekt's answer but I don't have enough reputation points (not sure the logic there)</p>\n\n<p>Anyway... what I wanted to say is that even if you aren't explicitly creating/asking for a PoolingConnection, doesn't mean you aren't getting one.</p>\n\n<p>I was going crazy trying to figure out why the original solution didn't work for me, but I ignored vasekt's answer as it \"didn't apply to my case\" - wrong! </p>\n\n<p>I was staring at my stack-trace when low and behold I saw a PoolingConnection in the middle of it.  Bang - I tired his addition and success!!  (our demo is tomorrow and I was getting desperate) :-)  </p>\n"},{"tags":[],"owner":{"account_id":71312,"reputation":2469,"user_id":206351,"display_name":"Ben W"},"down_vote_count":1,"up_vote_count":19,"is_accepted":false,"score":18,"last_activity_date":1599170024,"creation_date":1407427610,"answer_id":25187223,"question_id":19517538,"body_markdown":"After trying various options, following configuration worked for both http and https:\r\n\r\n    SSLContextBuilder builder = new SSLContextBuilder();\r\n    builder.loadTrustMaterial(null, new TrustSelfSignedStrategy());\r\n    SSLConnectionSocketFactory sslsf = new SSLConnectionSocketFactory(\r\n                    builder.build(), SSLConnectionSocketFactory.ALLOW_ALL_HOSTNAME_VERIFIER);\r\n\r\n    Registry&lt;ConnectionSocketFactory&gt; registry = RegistryBuilder. \r\n                     &lt;ConnectionSocketFactory&gt; create()\r\n                    .register(&quot;http&quot;, new PlainConnectionSocketFactory())\r\n                    .register(&quot;https&quot;, sslsf)\r\n                    .build();\r\n    \r\n    PoolingHttpClientConnectionManager cm = new PoolingHttpClientConnectionManager(registry);\r\n    cm.setMaxTotal(2000);\r\n    \r\n    CloseableHttpClient httpClient = HttpClients.custom()\r\n                    .setSSLSocketFactory(sslsf)\r\n                    .setConnectionManager(cm)\r\n                    .build();\r\nI am using http-client 4.3.3 : `compile &#39;org.apache.httpcomponents:httpclient:4.3.3&#39;`\r\n","title":"Ignoring SSL certificate in Apache HttpClient 4.3","body":"<p>After trying various options, following configuration worked for both http and https:</p>\n<pre><code>SSLContextBuilder builder = new SSLContextBuilder();\nbuilder.loadTrustMaterial(null, new TrustSelfSignedStrategy());\nSSLConnectionSocketFactory sslsf = new SSLConnectionSocketFactory(\n                builder.build(), SSLConnectionSocketFactory.ALLOW_ALL_HOSTNAME_VERIFIER);\n\nRegistry&lt;ConnectionSocketFactory&gt; registry = RegistryBuilder. \n                 &lt;ConnectionSocketFactory&gt; create()\n                .register(&quot;http&quot;, new PlainConnectionSocketFactory())\n                .register(&quot;https&quot;, sslsf)\n                .build();\n\nPoolingHttpClientConnectionManager cm = new PoolingHttpClientConnectionManager(registry);\ncm.setMaxTotal(2000);\n\nCloseableHttpClient httpClient = HttpClients.custom()\n                .setSSLSocketFactory(sslsf)\n                .setConnectionManager(cm)\n                .build();\n</code></pre>\n<p>I am using http-client 4.3.3 : <code>compile 'org.apache.httpcomponents:httpclient:4.3.3'</code></p>\n"},{"tags":[],"owner":{"account_id":5371161,"reputation":91,"user_id":4279653,"display_name":"Dahai Li"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1417737001,"creation_date":1417735886,"answer_id":27306167,"question_id":19517538,"body_markdown":"    class ApacheHttpClient {\r\n    \r\n        /***\r\n         * This is a https get request that bypasses certificate checking and hostname verifier.\r\n         * It uses basis authentication method.\r\n         * It is tested with Apache httpclient-4.4.\r\n         * It dumps the contents of a https page on the console output.\r\n         * It is very similar to http get request, but with the additional customization of\r\n         *   - credential provider, and\r\n         *   - SSLConnectionSocketFactory to bypass certification checking and hostname verifier.\r\n         * @param path String\r\n         * @param username String\r\n         * @param password String\r\n         * @throws IOException\r\n         */\r\n        public void get(String path, String username, String password) throws IOException {\r\n            final CloseableHttpClient httpClient = HttpClients.custom()\r\n                    .setDefaultCredentialsProvider(createCredsProvider(username, password))\r\n                    .setSSLSocketFactory(createGenerousSSLSocketFactory())\r\n                    .build();\r\n    \r\n            final CloseableHttpResponse response = httpClient.execute(new HttpGet(path));\r\n            try {\r\n                HttpEntity entity = response.getEntity();\r\n                if (entity == null)\r\n                    return;\r\n                System.out.println(EntityUtils.toString(entity));\r\n            } finally {\r\n                response.close();\r\n                httpClient.close();\r\n            }\r\n        }\r\n    \r\n        private CredentialsProvider createCredsProvider(String username, String password) {\r\n            CredentialsProvider credsProvider = new BasicCredentialsProvider();\r\n            credsProvider.setCredentials(\r\n                    AuthScope.ANY,\r\n                    new UsernamePasswordCredentials(username, password));\r\n            return credsProvider;\r\n        }\r\n    \r\n        /***\r\n         * \r\n         * @return SSLConnectionSocketFactory that bypass certificate check and bypass HostnameVerifier\r\n         */\r\n        private SSLConnectionSocketFactory createGenerousSSLSocketFactory() {\r\n            SSLContext sslContext;\r\n            try {\r\n                sslContext = SSLContext.getInstance(&quot;SSL&quot;);\r\n                sslContext.init(null, new TrustManager[]{createGenerousTrustManager()}, new SecureRandom());\r\n            } catch (KeyManagementException | NoSuchAlgorithmException e) {\r\n                e.printStackTrace();\r\n                return null;\r\n            }\r\n            return new SSLConnectionSocketFactory(sslContext, NoopHostnameVerifier.INSTANCE);\r\n        }\r\n    \r\n        private X509TrustManager createGenerousTrustManager() {\r\n            return new X509TrustManager() {\r\n                @Override\r\n                public void checkClientTrusted(X509Certificate[] cert, String s) throws CertificateException {\r\n                }\r\n    \r\n                @Override\r\n                public void checkServerTrusted(X509Certificate[] cert, String s) throws CertificateException {\r\n                }\r\n    \r\n                @Override\r\n                public X509Certificate[] getAcceptedIssuers() {\r\n                    return null;\r\n                }\r\n            };\r\n        }\r\n    }\r\n\r\n","title":"Ignoring SSL certificate in Apache HttpClient 4.3","body":"<pre><code>class ApacheHttpClient {\n\n    /***\n     * This is a https get request that bypasses certificate checking and hostname verifier.\n     * It uses basis authentication method.\n     * It is tested with Apache httpclient-4.4.\n     * It dumps the contents of a https page on the console output.\n     * It is very similar to http get request, but with the additional customization of\n     *   - credential provider, and\n     *   - SSLConnectionSocketFactory to bypass certification checking and hostname verifier.\n     * @param path String\n     * @param username String\n     * @param password String\n     * @throws IOException\n     */\n    public void get(String path, String username, String password) throws IOException {\n        final CloseableHttpClient httpClient = HttpClients.custom()\n                .setDefaultCredentialsProvider(createCredsProvider(username, password))\n                .setSSLSocketFactory(createGenerousSSLSocketFactory())\n                .build();\n\n        final CloseableHttpResponse response = httpClient.execute(new HttpGet(path));\n        try {\n            HttpEntity entity = response.getEntity();\n            if (entity == null)\n                return;\n            System.out.println(EntityUtils.toString(entity));\n        } finally {\n            response.close();\n            httpClient.close();\n        }\n    }\n\n    private CredentialsProvider createCredsProvider(String username, String password) {\n        CredentialsProvider credsProvider = new BasicCredentialsProvider();\n        credsProvider.setCredentials(\n                AuthScope.ANY,\n                new UsernamePasswordCredentials(username, password));\n        return credsProvider;\n    }\n\n    /***\n     * \n     * @return SSLConnectionSocketFactory that bypass certificate check and bypass HostnameVerifier\n     */\n    private SSLConnectionSocketFactory createGenerousSSLSocketFactory() {\n        SSLContext sslContext;\n        try {\n            sslContext = SSLContext.getInstance(\"SSL\");\n            sslContext.init(null, new TrustManager[]{createGenerousTrustManager()}, new SecureRandom());\n        } catch (KeyManagementException | NoSuchAlgorithmException e) {\n            e.printStackTrace();\n            return null;\n        }\n        return new SSLConnectionSocketFactory(sslContext, NoopHostnameVerifier.INSTANCE);\n    }\n\n    private X509TrustManager createGenerousTrustManager() {\n        return new X509TrustManager() {\n            @Override\n            public void checkClientTrusted(X509Certificate[] cert, String s) throws CertificateException {\n            }\n\n            @Override\n            public void checkServerTrusted(X509Certificate[] cert, String s) throws CertificateException {\n            }\n\n            @Override\n            public X509Certificate[] getAcceptedIssuers() {\n                return null;\n            }\n        };\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2238040,"reputation":5463,"user_id":1973820,"accept_rate":36,"display_name":"Hamed MP"},"down_vote_count":0,"up_vote_count":9,"is_accepted":false,"score":9,"last_activity_date":1428075362,"creation_date":1428075362,"answer_id":29435217,"question_id":19517538,"body_markdown":"\r\nSimpler and shorter working code:\r\n&gt;We are using HTTPClient 4.3.5 and we tried almost all solutions exist on the stackoverflow but nothing,\r\nAfter thinking and figuring out the problem, we come to the following code which works perfectly,\r\njust add it before creating HttpClient instance.\r\n\r\n&gt;some method which you use to make post request...\r\n\r\n    SSLContextBuilder builder = new SSLContextBuilder();\r\n        builder.loadTrustMaterial(null, new TrustStrategy() {\r\n            @Override\r\n            public boolean isTrusted(X509Certificate[] chain, String authType) throws CertificateException {\r\n                return true;\r\n            }\r\n        });\r\n\r\n        SSLConnectionSocketFactory sslSF = new SSLConnectionSocketFactory(builder.build(),\r\n                SSLConnectionSocketFactory.ALLOW_ALL_HOSTNAME_VERIFIER);\r\n\r\n        HttpClient httpClient = HttpClients.custom().setSSLSocketFactory(sslSF).build();\r\n        HttpPost postRequest = new HttpPost(url);\r\n\r\n&gt;continue calling and using HttpPost instance in the normal form","title":"Ignoring SSL certificate in Apache HttpClient 4.3","body":"<p>Simpler and shorter working code:</p>\n\n<blockquote>\n  <p>We are using HTTPClient 4.3.5 and we tried almost all solutions exist on the stackoverflow but nothing,\n  After thinking and figuring out the problem, we come to the following code which works perfectly,\n  just add it before creating HttpClient instance.</p>\n  \n  <p>some method which you use to make post request...</p>\n</blockquote>\n\n<pre><code>SSLContextBuilder builder = new SSLContextBuilder();\n    builder.loadTrustMaterial(null, new TrustStrategy() {\n        @Override\n        public boolean isTrusted(X509Certificate[] chain, String authType) throws CertificateException {\n            return true;\n        }\n    });\n\n    SSLConnectionSocketFactory sslSF = new SSLConnectionSocketFactory(builder.build(),\n            SSLConnectionSocketFactory.ALLOW_ALL_HOSTNAME_VERIFIER);\n\n    HttpClient httpClient = HttpClients.custom().setSSLSocketFactory(sslSF).build();\n    HttpPost postRequest = new HttpPost(url);\n</code></pre>\n\n<blockquote>\n  <p>continue calling and using HttpPost instance in the normal form</p>\n</blockquote>\n"},{"tags":[],"owner":{"account_id":1149755,"reputation":363,"user_id":1131714,"accept_rate":60,"display_name":"Kurt"},"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1453722075,"creation_date":1453722075,"answer_id":34991729,"question_id":19517538,"body_markdown":"When using http client 4.5 I had to use the javasx.net.ssl.HostnameVerifier to allow any hostname (for testing purposes). Here is what I ended up doing:\r\n\r\n    CloseableHttpClient httpClient = null;\r\n\t\ttry {\r\n\t\t\tSSLContextBuilder sslContextBuilder = new SSLContextBuilder();\r\n\t\t\tsslContextBuilder.loadTrustMaterial(null, new TrustSelfSignedStrategy());\r\n\r\n\t\t\tHostnameVerifier hostnameVerifierAllowAll = new HostnameVerifier() \r\n\t\t\t\t{\r\n\t\t\t\t\tpublic boolean verify(String hostname, SSLSession session) {\r\n\t\t\t\t\t\treturn true;\r\n\t\t\t\t\t}\r\n\t\t\t\t};\r\n\t\t\t\r\n\t\t\tSSLConnectionSocketFactory sslSocketFactory = new SSLConnectionSocketFactory(sslContextBuilder.build(), hostnameVerifierAllowAll);\r\n\t\t\t\t\r\n\t\t\tCredentialsProvider credsProvider = new BasicCredentialsProvider();\r\n\t\t\tcredsProvider.setCredentials(\r\n\t\t\t\tnew AuthScope(&quot;192.168.30.34&quot;, 8443),\r\n\t\t\t\tnew UsernamePasswordCredentials(&quot;root&quot;, &quot;password&quot;));\r\n        \r\n\t\t\thttpClient = HttpClients.custom()\r\n\t\t\t\t.setSSLSocketFactory(sslSocketFactory)\r\n\t\t\t\t.setDefaultCredentialsProvider(credsProvider)\r\n\t\t\t\t.build();\r\n\r\n\t\t\tHttpGet httpGet = new HttpGet(&quot;https://192.168.30.34:8443/axis/services/getStuff?firstResult=0&amp;maxResults=1000&quot;);\r\n\r\n\t\t\tCloseableHttpResponse response = httpClient.execute(httpGet);\r\n\r\n\t\t\tint httpStatus = response.getStatusLine().getStatusCode();\r\n\t\t\tif (httpStatus &gt;= 200 &amp;&amp; httpStatus &lt; 300) { [...]\r\n            } else {\r\n            \tthrow new ClientProtocolException(&quot;Unexpected response status: &quot; + httpStatus);\r\n            }\r\n            \r\n\t\t} catch (Exception ex) {\r\n\t\t\tex.printStackTrace();\r\n\t\t}\r\n\t\tfinally {\r\n\t\t\ttry {\r\n\t\t\t\thttpClient.close();\r\n\t\t\t} catch (IOException ex) {\r\n\t\t\t\tlogger.error(&quot;Error while closing the HTTP client: &quot;, ex);\r\n\t\t\t}\r\n\t\t}\r\n    ","title":"Ignoring SSL certificate in Apache HttpClient 4.3","body":"<p>When using http client 4.5 I had to use the javasx.net.ssl.HostnameVerifier to allow any hostname (for testing purposes). Here is what I ended up doing:</p>\n\n<pre><code>CloseableHttpClient httpClient = null;\n    try {\n        SSLContextBuilder sslContextBuilder = new SSLContextBuilder();\n        sslContextBuilder.loadTrustMaterial(null, new TrustSelfSignedStrategy());\n\n        HostnameVerifier hostnameVerifierAllowAll = new HostnameVerifier() \n            {\n                public boolean verify(String hostname, SSLSession session) {\n                    return true;\n                }\n            };\n\n        SSLConnectionSocketFactory sslSocketFactory = new SSLConnectionSocketFactory(sslContextBuilder.build(), hostnameVerifierAllowAll);\n\n        CredentialsProvider credsProvider = new BasicCredentialsProvider();\n        credsProvider.setCredentials(\n            new AuthScope(\"192.168.30.34\", 8443),\n            new UsernamePasswordCredentials(\"root\", \"password\"));\n\n        httpClient = HttpClients.custom()\n            .setSSLSocketFactory(sslSocketFactory)\n            .setDefaultCredentialsProvider(credsProvider)\n            .build();\n\n        HttpGet httpGet = new HttpGet(\"https://192.168.30.34:8443/axis/services/getStuff?firstResult=0&amp;maxResults=1000\");\n\n        CloseableHttpResponse response = httpClient.execute(httpGet);\n\n        int httpStatus = response.getStatusLine().getStatusCode();\n        if (httpStatus &gt;= 200 &amp;&amp; httpStatus &lt; 300) { [...]\n        } else {\n            throw new ClientProtocolException(\"Unexpected response status: \" + httpStatus);\n        }\n\n    } catch (Exception ex) {\n        ex.printStackTrace();\n    }\n    finally {\n        try {\n            httpClient.close();\n        } catch (IOException ex) {\n            logger.error(\"Error while closing the HTTP client: \", ex);\n        }\n    }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":7785811,"reputation":21,"user_id":5890728,"display_name":"Jeff Z"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1455667130,"creation_date":1455667130,"answer_id":35445369,"question_id":19517538,"body_markdown":"Trust All Certs in Apache HTTP Client\r\n\r\n \r\n\r\n    TrustManager[] trustAllCerts = new TrustManager[]{\r\n    \t\t\t\t    new X509TrustManager() {\r\n    \t\t\t\t        public java.security.cert.X509Certificate[] getAcceptedIssuers() {\r\n    \t\t\t\t            return null;\r\n    \t\t\t\t        }\r\n    \t\t\t\t        public void checkClientTrusted(\r\n    \t\t\t\t            java.security.cert.X509Certificate[] certs, String authType) {\r\n    \t\t\t\t        }\r\n    \t\t\t\t        public void checkServerTrusted(\r\n    \t\t\t\t            java.security.cert.X509Certificate[] certs, String authType) {\r\n    \t\t\t\t        }\r\n    \t\t\t\t    }\r\n    \t\t\t\t};\r\n    \t\t  \r\n    \t\t  try {\r\n    \t\t\t    SSLContext sc = SSLContext.getInstance(&quot;SSL&quot;);\r\n    \t\t\t    sc.init(null, trustAllCerts, new java.security.SecureRandom());\r\n    \t\t\t    SSLConnectionSocketFactory sslsf = new SSLConnectionSocketFactory(\r\n    \t\t\t            sc);\r\n    \t\t\t    httpclient = HttpClients.custom().setSSLSocketFactory(\r\n    \t\t\t            sslsf).build();\r\n    \t\t\t    HttpsURLConnection.setDefaultSSLSocketFactory(sc.getSocketFactory());\r\n\r\n","title":"Ignoring SSL certificate in Apache HttpClient 4.3","body":"<p>Trust All Certs in Apache HTTP Client</p>\n\n<pre><code>TrustManager[] trustAllCerts = new TrustManager[]{\n                    new X509TrustManager() {\n                        public java.security.cert.X509Certificate[] getAcceptedIssuers() {\n                            return null;\n                        }\n                        public void checkClientTrusted(\n                            java.security.cert.X509Certificate[] certs, String authType) {\n                        }\n                        public void checkServerTrusted(\n                            java.security.cert.X509Certificate[] certs, String authType) {\n                        }\n                    }\n                };\n\n          try {\n                SSLContext sc = SSLContext.getInstance(\"SSL\");\n                sc.init(null, trustAllCerts, new java.security.SecureRandom());\n                SSLConnectionSocketFactory sslsf = new SSLConnectionSocketFactory(\n                        sc);\n                httpclient = HttpClients.custom().setSSLSocketFactory(\n                        sslsf).build();\n                HttpsURLConnection.setDefaultSSLSocketFactory(sc.getSocketFactory());\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3220317,"reputation":564,"user_id":2717941,"display_name":"Anant Laxmikant Bobde"},"down_vote_count":1,"up_vote_count":4,"is_accepted":false,"score":3,"last_activity_date":1455873558,"creation_date":1455873558,"answer_id":35501585,"question_id":19517538,"body_markdown":"On top of `PoolingHttpClientConnectionManager` along with `Registry&lt;ConnectionSocketFactory&gt; socketFactoryRegistry = RegistryBuilder.&lt;ConnectionSocketFactory&gt; create().register(&quot;https&quot;, sslFactory).build();`\r\nIf you want an asynchronous httpclient using `PoolingNHttpClientConnectionManager` the code shoudl be similar to following\r\n\r\n\r\n    SSLContextBuilder builder = SSLContexts.custom();\r\n    builder.loadTrustMaterial(null, new TrustStrategy() {\r\n        @Override\r\n        public boolean isTrusted(X509Certificate[] chain, String authType)\r\n                throws CertificateException {\r\n            return true;\r\n        }\r\n    });\r\n    SSLContext sslContext = builder.build();\r\n    SchemeIOSessionStrategy sslioSessionStrategy = new SSLIOSessionStrategy(sslContext, \r\n    \t\t\t\tnew HostnameVerifier(){\r\n    \t\t\t@Override\r\n    \t\t\tpublic boolean verify(String hostname, SSLSession session) {\r\n    \t\t\t\treturn true;// TODO as of now allow all hostnames\r\n    \t\t\t}\r\n    \t\t});\r\n    Registry&lt;SchemeIOSessionStrategy&gt; sslioSessionRegistry = RegistryBuilder.&lt;SchemeIOSessionStrategy&gt;create().register(&quot;https&quot;, sslioSessionStrategy).build();\r\n    PoolingNHttpClientConnectionManager ncm  = new PoolingNHttpClientConnectionManager(new DefaultConnectingIOReactor(),sslioSessionRegistry);\r\n    CloseableHttpAsyncClient asyncHttpClient = HttpAsyncClients.custom().setConnectionManager(ncm).build();\r\n    asyncHttpClient.start();\t\t","title":"Ignoring SSL certificate in Apache HttpClient 4.3","body":"<p>On top of <code>PoolingHttpClientConnectionManager</code> along with <code>Registry&lt;ConnectionSocketFactory&gt; socketFactoryRegistry = RegistryBuilder.&lt;ConnectionSocketFactory&gt; create().register(\"https\", sslFactory).build();</code>\nIf you want an asynchronous httpclient using <code>PoolingNHttpClientConnectionManager</code> the code shoudl be similar to following</p>\n\n<pre><code>SSLContextBuilder builder = SSLContexts.custom();\nbuilder.loadTrustMaterial(null, new TrustStrategy() {\n    @Override\n    public boolean isTrusted(X509Certificate[] chain, String authType)\n            throws CertificateException {\n        return true;\n    }\n});\nSSLContext sslContext = builder.build();\nSchemeIOSessionStrategy sslioSessionStrategy = new SSLIOSessionStrategy(sslContext, \n                new HostnameVerifier(){\n            @Override\n            public boolean verify(String hostname, SSLSession session) {\n                return true;// TODO as of now allow all hostnames\n            }\n        });\nRegistry&lt;SchemeIOSessionStrategy&gt; sslioSessionRegistry = RegistryBuilder.&lt;SchemeIOSessionStrategy&gt;create().register(\"https\", sslioSessionStrategy).build();\nPoolingNHttpClientConnectionManager ncm  = new PoolingNHttpClientConnectionManager(new DefaultConnectingIOReactor(),sslioSessionRegistry);\nCloseableHttpAsyncClient asyncHttpClient = HttpAsyncClients.custom().setConnectionManager(ncm).build();\nasyncHttpClient.start();        \n</code></pre>\n"},{"tags":[],"owner":{"account_id":9788330,"reputation":71,"user_id":7253903,"display_name":"divbyzero"},"down_vote_count":0,"up_vote_count":7,"is_accepted":false,"score":7,"last_activity_date":1480968139,"creation_date":1480968139,"answer_id":40982370,"question_id":19517538,"body_markdown":"Here&#39;s a working distillation of the above techniques, equivalent to &quot;curl --insecure&quot;:\r\n\r\n    HttpClient getInsecureHttpClient() throws GeneralSecurityException {\r\n        TrustStrategy trustStrategy = new TrustStrategy() {\r\n            @Override\r\n            public boolean isTrusted(X509Certificate[] chain, String authType) {\r\n                return true;\r\n            }\r\n        };\r\n\r\n        HostnameVerifier hostnameVerifier = new HostnameVerifier() {\r\n            @Override\r\n            public boolean verify(String hostname, SSLSession session) {\r\n                return true;\r\n            }\r\n        };\r\n\r\n        return HttpClients.custom()\r\n                .setSSLSocketFactory(new SSLConnectionSocketFactory(\r\n                        new SSLContextBuilder().loadTrustMaterial(trustStrategy).build(),\r\n                        hostnameVerifier))\r\n                .build();\r\n    }\r\n","title":"Ignoring SSL certificate in Apache HttpClient 4.3","body":"<p>Here's a working distillation of the above techniques, equivalent to \"curl --insecure\":</p>\n\n<pre><code>HttpClient getInsecureHttpClient() throws GeneralSecurityException {\n    TrustStrategy trustStrategy = new TrustStrategy() {\n        @Override\n        public boolean isTrusted(X509Certificate[] chain, String authType) {\n            return true;\n        }\n    };\n\n    HostnameVerifier hostnameVerifier = new HostnameVerifier() {\n        @Override\n        public boolean verify(String hostname, SSLSession session) {\n            return true;\n        }\n    };\n\n    return HttpClients.custom()\n            .setSSLSocketFactory(new SSLConnectionSocketFactory(\n                    new SSLContextBuilder().loadTrustMaterial(trustStrategy).build(),\n                    hostnameVerifier))\n            .build();\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3720377,"reputation":1016,"user_id":3095589,"display_name":"Radadiya Nikunj"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1520961567,"creation_date":1520961567,"answer_id":49262175,"question_id":19517538,"body_markdown":"You can use following code snippet for get the HttpClient instance without ssl certification checking.\r\n\r\n    private HttpClient getSSLHttpClient() throws KeyStoreException, NoSuchAlgorithmException, KeyManagementException {\r\n    \r\n    \t\tLogLoader.serverLog.trace(&quot;In getSSLHttpClient()&quot;);\r\n    \r\n    \t\tSSLContext context = SSLContext.getInstance(&quot;SSL&quot;);\r\n    \r\n    \t\tTrustManager tm = new X509TrustManager() {\r\n    \t\t\tpublic void checkClientTrusted(X509Certificate[] chain, String authType) throws CertificateException {\r\n    \t\t\t}\r\n    \r\n    \t\t\tpublic void checkServerTrusted(X509Certificate[] chain, String authType) throws CertificateException {\r\n    \t\t\t}\r\n    \r\n    \t\t\tpublic X509Certificate[] getAcceptedIssuers() {\r\n    \t\t\t\treturn null;\r\n    \t\t\t}\r\n    \t\t};\r\n    \r\n    \t\tcontext.init(null, new TrustManager[] { tm }, null);\r\n    \r\n    \t\tHttpClientBuilder builder = HttpClientBuilder.create();\r\n    \t\tSSLConnectionSocketFactory sslConnectionFactory = new SSLConnectionSocketFactory(context);\r\n    \t\tbuilder.setSSLSocketFactory(sslConnectionFactory);\r\n    \r\n    \t\tPlainConnectionSocketFactory plainConnectionSocketFactory = new PlainConnectionSocketFactory();\r\n    \t\tRegistry&lt;ConnectionSocketFactory&gt; registry = RegistryBuilder.&lt;ConnectionSocketFactory&gt;create()\r\n    \t\t\t\t.register(&quot;https&quot;, sslConnectionFactory).register(&quot;http&quot;, plainConnectionSocketFactory).build();\r\n    \r\n    \t\tPoolingHttpClientConnectionManager ccm = new PoolingHttpClientConnectionManager(registry);\r\n    \t\tccm.setMaxTotal(BaseConstant.CONNECTION_POOL_SIZE);\r\n    \t\tccm.setDefaultMaxPerRoute(BaseConstant.CONNECTION_POOL_SIZE);\r\n    \t\tbuilder.setConnectionManager((HttpClientConnectionManager) ccm);\r\n    \r\n    \t\tbuilder.disableRedirectHandling();\r\n    \r\n    \t\tLogLoader.serverLog.trace(&quot;Out getSSLHttpClient()&quot;);\r\n    \r\n    \t\treturn builder.build();\r\n    \t}","title":"Ignoring SSL certificate in Apache HttpClient 4.3","body":"<p>You can use following code snippet for get the HttpClient instance without ssl certification checking.</p>\n\n<pre><code>private HttpClient getSSLHttpClient() throws KeyStoreException, NoSuchAlgorithmException, KeyManagementException {\n\n        LogLoader.serverLog.trace(\"In getSSLHttpClient()\");\n\n        SSLContext context = SSLContext.getInstance(\"SSL\");\n\n        TrustManager tm = new X509TrustManager() {\n            public void checkClientTrusted(X509Certificate[] chain, String authType) throws CertificateException {\n            }\n\n            public void checkServerTrusted(X509Certificate[] chain, String authType) throws CertificateException {\n            }\n\n            public X509Certificate[] getAcceptedIssuers() {\n                return null;\n            }\n        };\n\n        context.init(null, new TrustManager[] { tm }, null);\n\n        HttpClientBuilder builder = HttpClientBuilder.create();\n        SSLConnectionSocketFactory sslConnectionFactory = new SSLConnectionSocketFactory(context);\n        builder.setSSLSocketFactory(sslConnectionFactory);\n\n        PlainConnectionSocketFactory plainConnectionSocketFactory = new PlainConnectionSocketFactory();\n        Registry&lt;ConnectionSocketFactory&gt; registry = RegistryBuilder.&lt;ConnectionSocketFactory&gt;create()\n                .register(\"https\", sslConnectionFactory).register(\"http\", plainConnectionSocketFactory).build();\n\n        PoolingHttpClientConnectionManager ccm = new PoolingHttpClientConnectionManager(registry);\n        ccm.setMaxTotal(BaseConstant.CONNECTION_POOL_SIZE);\n        ccm.setDefaultMaxPerRoute(BaseConstant.CONNECTION_POOL_SIZE);\n        builder.setConnectionManager((HttpClientConnectionManager) ccm);\n\n        builder.disableRedirectHandling();\n\n        LogLoader.serverLog.trace(\"Out getSSLHttpClient()\");\n\n        return builder.build();\n    }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":465863,"reputation":41382,"user_id":870248,"accept_rate":100,"display_name":"Paul Vargas"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1521758536,"creation_date":1521758536,"answer_id":49439605,"question_id":19517538,"body_markdown":"If you are using **`HttpClient 4.5.x`**, your code can be similar to the following:\r\n\r\n    SSLContext sslContext = new SSLContextBuilder().loadTrustMaterial(null,\r\n            TrustSelfSignedStrategy.INSTANCE).build();\r\n    SSLConnectionSocketFactory sslSocketFactory = new SSLConnectionSocketFactory(\r\n            sslContext, NoopHostnameVerifier.INSTANCE);\r\n\r\n    HttpClient httpClient = HttpClients.custom()\r\n                                       .setDefaultCookieStore(new BasicCookieStore())\r\n                                       .setSSLSocketFactory(sslSocketFactory)\r\n                                       .build();","title":"Ignoring SSL certificate in Apache HttpClient 4.3","body":"<p>If you are using <strong><code>HttpClient 4.5.x</code></strong>, your code can be similar to the following:</p>\n\n<pre><code>SSLContext sslContext = new SSLContextBuilder().loadTrustMaterial(null,\n        TrustSelfSignedStrategy.INSTANCE).build();\nSSLConnectionSocketFactory sslSocketFactory = new SSLConnectionSocketFactory(\n        sslContext, NoopHostnameVerifier.INSTANCE);\n\nHttpClient httpClient = HttpClients.custom()\n                                   .setDefaultCookieStore(new BasicCookieStore())\n                                   .setSSLSocketFactory(sslSocketFactory)\n                                   .build();\n</code></pre>\n"},{"tags":[],"owner":{"account_id":409576,"reputation":76,"user_id":780904,"display_name":"andyd"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1580384787,"creation_date":1580384787,"answer_id":59985362,"question_id":19517538,"body_markdown":"Slight tweak to answer from @divbyzero above to fix sonar security warnings\r\n\r\n    CloseableHttpClient getInsecureHttpClient() throws GeneralSecurityException {\r\n                TrustStrategy trustStrategy = (chain, authType) -&gt; true;\r\n        \r\n                HostnameVerifier hostnameVerifier = (hostname, session) -&gt; hostname.equalsIgnoreCase(session.getPeerHost());\r\n        \r\n                return HttpClients.custom()\r\n                        .setSSLSocketFactory(new SSLConnectionSocketFactory(new SSLContextBuilder().loadTrustMaterial(trustStrategy).build(), hostnameVerifier))\r\n                        .build();\r\n            }","title":"Ignoring SSL certificate in Apache HttpClient 4.3","body":"<p>Slight tweak to answer from @divbyzero above to fix sonar security warnings</p>\n\n<pre><code>CloseableHttpClient getInsecureHttpClient() throws GeneralSecurityException {\n            TrustStrategy trustStrategy = (chain, authType) -&gt; true;\n\n            HostnameVerifier hostnameVerifier = (hostname, session) -&gt; hostname.equalsIgnoreCase(session.getPeerHost());\n\n            return HttpClients.custom()\n                    .setSSLSocketFactory(new SSLConnectionSocketFactory(new SSLContextBuilder().loadTrustMaterial(trustStrategy).build(), hostnameVerifier))\n                    .build();\n        }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":8625831,"reputation":720,"user_id":6459098,"display_name":"U_R_Naveen UR_Naveen"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1588578085,"creation_date":1588578085,"answer_id":61587314,"question_id":19517538,"body_markdown":"Initially, i was able to disable for localhost using trust strategy, later i added NoopHostnameVerifier. Now it will work for both localhost and any machine name\r\n\r\n    SSLContext sslContext = SSLContextBuilder.create().loadTrustMaterial(null, new TrustStrategy() {\r\n    \r\n    \t\t\t@Override\r\n    \t\t\tpublic boolean isTrusted(X509Certificate[] chain, String authType) throws CertificateException {\r\n    \t\t\t\treturn true;\r\n    \t\t\t}\r\n    \r\n    \t\t}).build();\r\n    \t\tSSLConnectionSocketFactory sslsf = new SSLConnectionSocketFactory(\r\n    \t\t        sslContext, NoopHostnameVerifier.INSTANCE);\r\n    \t\tCloseableHttpClient httpclient = HttpClients.custom().setSSLSocketFactory(sslsf).build();","title":"Ignoring SSL certificate in Apache HttpClient 4.3","body":"<p>Initially, i was able to disable for localhost using trust strategy, later i added NoopHostnameVerifier. Now it will work for both localhost and any machine name</p>\n\n<pre><code>SSLContext sslContext = SSLContextBuilder.create().loadTrustMaterial(null, new TrustStrategy() {\n\n            @Override\n            public boolean isTrusted(X509Certificate[] chain, String authType) throws CertificateException {\n                return true;\n            }\n\n        }).build();\n        SSLConnectionSocketFactory sslsf = new SSLConnectionSocketFactory(\n                sslContext, NoopHostnameVerifier.INSTANCE);\n        CloseableHttpClient httpclient = HttpClients.custom().setSSLSocketFactory(sslsf).build();\n</code></pre>\n"},{"tags":[],"owner":{"account_id":14285405,"reputation":140,"user_id":10318865,"display_name":"Muhammad Haseeb"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1675078254,"creation_date":1675078254,"answer_id":75283800,"question_id":19517538,"body_markdown":"In java 11 or later if you want to skip certificate validation just try the following its working.\r\n\r\nFor HttpClient am using java&#39;s default client with this `import java.net.http.HttpClient;`\r\n\r\n        static SSLContext insecureContext() {\r\n        TrustManager[] noopTrustManager = new TrustManager[]{\r\n                new X509TrustManager() {\r\n                    public void checkClientTrusted(X509Certificate[] xcs, String string) {}\r\n                    public void checkServerTrusted(X509Certificate[] xcs, String string) {}\r\n                    public X509Certificate[] getAcceptedIssuers() {\r\n                        return null;\r\n                    }\r\n                }\r\n        };\r\n        try {\r\n            SSLContext sc = SSLContext.getInstance(&quot;ssl&quot;);\r\n            sc.init(null, noopTrustManager, null);\r\n            return sc;\r\n        } catch (KeyManagementException | NoSuchAlgorithmException ex) {\r\n            return null;\r\n        }\r\n    }\r\n\r\n&gt; and then make you HttpClient like this\r\n\r\n    HttpClient client = HttpClient.newBuilder()\r\n                .sslContext(insecureContext())\r\n                .build();","title":"Ignoring SSL certificate in Apache HttpClient 4.3","body":"<p>In java 11 or later if you want to skip certificate validation just try the following its working.</p>\n<p>For HttpClient am using java's default client with this <code>import java.net.http.HttpClient;</code></p>\n<pre><code>    static SSLContext insecureContext() {\n    TrustManager[] noopTrustManager = new TrustManager[]{\n            new X509TrustManager() {\n                public void checkClientTrusted(X509Certificate[] xcs, String string) {}\n                public void checkServerTrusted(X509Certificate[] xcs, String string) {}\n                public X509Certificate[] getAcceptedIssuers() {\n                    return null;\n                }\n            }\n    };\n    try {\n        SSLContext sc = SSLContext.getInstance(&quot;ssl&quot;);\n        sc.init(null, noopTrustManager, null);\n        return sc;\n    } catch (KeyManagementException | NoSuchAlgorithmException ex) {\n        return null;\n    }\n}\n</code></pre>\n<blockquote>\n<p>and then make you HttpClient like this</p>\n</blockquote>\n<pre><code>HttpClient client = HttpClient.newBuilder()\n            .sslContext(insecureContext())\n            .build();\n</code></pre>\n"},{"tags":[],"owner":{"account_id":29807889,"reputation":1,"user_id":22844006,"display_name":"Gulzhas Mailybayeva"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1699323080,"creation_date":1699323080,"answer_id":77435181,"question_id":19517538,"body_markdown":"\r\n\r\nI am using HttpClient 4.5.x, and the following code snippet worked for me:\r\n\r\n```\r\npublic CloseableHttpClient client = HttpClientBuilder.create().disableRedirectHandling().build();\r\n```\r\n\r\n ```  \r\npublic CloseableHttpClient sslAcceptCerts() {\r\n        TrustStrategy acceptingTrustStrategy = (cert, authType) -&gt; true;\r\n        SSLContext sslContext;\r\n        try {\r\n            sslContext = SSLContexts.custom().loadTrustMaterial(null, acceptingTrustStrategy).build();\r\n        } catch (NoSuchAlgorithmException | KeyManagementException | KeyStoreException e) {\r\n            throw new RuntimeException(e);\r\n        }\r\n        SSLConnectionSocketFactory sslsf = new SSLConnectionSocketFactory(sslContext,\r\n                NoopHostnameVerifier.INSTANCE);\r\n\r\n        Registry&lt;ConnectionSocketFactory&gt; socketFactoryRegistry =\r\n                RegistryBuilder.&lt;ConnectionSocketFactory&gt;create()\r\n                        .register(&quot;https&quot;, sslsf)\r\n                        .register(&quot;http&quot;, new PlainConnectionSocketFactory())\r\n                        .build();\r\n\r\n        BasicHttpClientConnectionManager connectionManager =\r\n                new BasicHttpClientConnectionManager(socketFactoryRegistry);\r\n        return client = HttpClients.custom().setSSLSocketFactory(sslsf)\r\n                .setConnectionManager(connectionManager).build();\r\n    }\r\n```","title":"Ignoring SSL certificate in Apache HttpClient 4.3","body":"<p>I am using HttpClient 4.5.x, and the following code snippet worked for me:</p>\n<pre><code>public CloseableHttpClient client = HttpClientBuilder.create().disableRedirectHandling().build();\n</code></pre>\n<pre><code>public CloseableHttpClient sslAcceptCerts() {\n       TrustStrategy acceptingTrustStrategy = (cert, authType) -&gt; true;\n       SSLContext sslContext;\n       try {\n           sslContext = SSLContexts.custom().loadTrustMaterial(null, acceptingTrustStrategy).build();\n       } catch (NoSuchAlgorithmException | KeyManagementException | KeyStoreException e) {\n           throw new RuntimeException(e);\n       }\n       SSLConnectionSocketFactory sslsf = new SSLConnectionSocketFactory(sslContext,\n               NoopHostnameVerifier.INSTANCE);\n\n       Registry&lt;ConnectionSocketFactory&gt; socketFactoryRegistry =\n               RegistryBuilder.&lt;ConnectionSocketFactory&gt;create()\n                       .register(&quot;https&quot;, sslsf)\n                       .register(&quot;http&quot;, new PlainConnectionSocketFactory())\n                       .build();\n\n       BasicHttpClientConnectionManager connectionManager =\n               new BasicHttpClientConnectionManager(socketFactoryRegistry);\n       return client = HttpClients.custom().setSSLSocketFactory(sslsf)\n               .setConnectionManager(connectionManager).build();\n   }\n</code></pre>\n"}],"owner":{"account_id":232399,"reputation":32821,"user_id":497208,"accept_rate":76,"display_name":"Jakub M."},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":227050,"favorite_count":0,"down_vote_count":0,"up_vote_count":114,"accepted_answer_id":19518383,"answer_count":18,"score":114,"last_activity_date":1699323080,"creation_date":1382443921,"question_id":19517538,"body_markdown":"How to ignore SSL certificate (trust all) for [Apache HttpClient 4.3][1]?\r\n\r\n[1]:http://hc.apache.org/httpcomponents-client-4.3.x/index.html\r\n\r\nAll the answers that I have found on SO treat previous versions, and the API changed.\r\n\r\nRelated:\r\n\r\n- https://stackoverflow.com/questions/2703161/how-to-ignore-ssl-certificate-errors-in-apache-httpclient-4-0\r\n- https://stackoverflow.com/questions/1828775/how-to-handle-invalid-ssl-certificates-with-apache-httpclient\r\n- https://stackoverflow.com/questions/6789597/need-to-trust-all-the-certificates-during-the-development-using-spring\r\n- https://stackoverflow.com/questions/12060250/ignore-ssl-certificate-errors-with-java\r\n\r\nEdit:\r\n\r\n- It is only for test purposes. Kids, don&#39;t try it at home (or in production)","title":"Ignoring SSL certificate in Apache HttpClient 4.3","body":"<p>How to ignore SSL certificate (trust all) for <a href=\"http://hc.apache.org/httpcomponents-client-4.3.x/index.html\" rel=\"noreferrer\">Apache HttpClient 4.3</a>?</p>\n\n<p>All the answers that I have found on SO treat previous versions, and the API changed.</p>\n\n<p>Related:</p>\n\n<ul>\n<li><a href=\"https://stackoverflow.com/questions/2703161/how-to-ignore-ssl-certificate-errors-in-apache-httpclient-4-0\">How to ignore SSL certificate errors in Apache HttpClient 4.0</a></li>\n<li><a href=\"https://stackoverflow.com/questions/1828775/how-to-handle-invalid-ssl-certificates-with-apache-httpclient\">How to handle invalid SSL certificates with Apache HttpClient?</a></li>\n<li><a href=\"https://stackoverflow.com/questions/6789597/need-to-trust-all-the-certificates-during-the-development-using-spring\">Need to trust all the certificates during the development using Spring</a></li>\n<li><a href=\"https://stackoverflow.com/questions/12060250/ignore-ssl-certificate-errors-with-java\">Ignore SSL Certificate Errors with Java</a></li>\n</ul>\n\n<p>Edit:</p>\n\n<ul>\n<li>It is only for test purposes. Kids, don't try it at home (or in production)</li>\n</ul>\n"},{"tags":["java",".net","authentication","active-directory","ldap"],"answers":[{"tags":[],"owner":{"account_id":31959,"reputation":10608,"user_id":88122,"accept_rate":0,"display_name":"jwilleke"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1699322895,"creation_date":1576229103,"answer_id":59319532,"question_id":59301408,"body_markdown":"Maybe this will help.\r\n\r\n[Java][1]\r\n\r\n    String username = System.getProperty(&quot;user.name&quot;);\r\n\r\n[.NET (C#)][2]\r\n\r\n    Console.WriteLine(&quot;UserName: {0}&quot;, Environment.UserName);\r\n\r\n\r\nNot sure what a &quot;AD user correctly logged in&quot; and &quot;if the user is logged in correctly&quot; means.\r\n\r\nIMHO, you are not performing any Authentication and only reading an environment variable that MAY NOT be set by the &quot;system&quot;\r\n\r\nYou should extract the authentication to an OpenID Connect product or library to frontend this type of Authentication and let that service perform &quot;real&quot; Authentication check.\r\n\r\n\r\n\r\n  [1]: https://stackoverflow.com/a/19990060/88122\r\n  [2]: https://learn.microsoft.com/en-us/dotnet/api/system.environment.username?view=netframework-4.8","title":"Automatically authenticating a user in Java or .net app using active directory","body":"<p>Maybe this will help.</p>\n<p><a href=\"https://stackoverflow.com/a/19990060/88122\">Java</a></p>\n<pre><code>String username = System.getProperty(&quot;user.name&quot;);\n</code></pre>\n<p><a href=\"https://learn.microsoft.com/en-us/dotnet/api/system.environment.username?view=netframework-4.8\" rel=\"nofollow noreferrer\">.NET (C#)</a></p>\n<pre><code>Console.WriteLine(&quot;UserName: {0}&quot;, Environment.UserName);\n</code></pre>\n<p>Not sure what a &quot;AD user correctly logged in&quot; and &quot;if the user is logged in correctly&quot; means.</p>\n<p>IMHO, you are not performing any Authentication and only reading an environment variable that MAY NOT be set by the &quot;system&quot;</p>\n<p>You should extract the authentication to an OpenID Connect product or library to frontend this type of Authentication and let that service perform &quot;real&quot; Authentication check.</p>\n"}],"owner":{"account_id":65910,"reputation":15004,"user_id":193655,"accept_rate":78,"display_name":"UnDiUdin"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":142,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"answer_count":1,"score":3,"last_activity_date":1699322967,"creation_date":1576142892,"question_id":59301408,"body_markdown":"In a .net and Java application (I mean I have 2 twin apps written in both technologies) I would like to perform autologin using AD/LDAP. The flow is:\r\n\r\n0) User `MyDomain\\john` logged in in an Windows machine in the MyDomain domain\r\n\r\n1) App URL is browsed\r\n\r\n2) The app checks whether `MyDomain\\john`  is an AD user correctly logged in\r\n\r\n3) If the user is logged in correctly I check in the App DB to see if the `MyDomain\\john`  is mapped in the users table\r\n\r\n4) If match is found login is possible, login screen is bypassed and user is authenticated in the app\r\n\r\nIn principle all I need is to know which is the currently correctly loged in AD user, could you please suggest which .net and Java function is needed to perform such check?","title":"Automatically authenticating a user in Java or .net app using active directory","body":"<p>In a .net and Java application (I mean I have 2 twin apps written in both technologies) I would like to perform autologin using AD/LDAP. The flow is:</p>\n<ol start=\"0\">\n<li><p>User <code>MyDomain\\john</code> logged in in an Windows machine in the MyDomain domain</p>\n</li>\n<li><p>App URL is browsed</p>\n</li>\n<li><p>The app checks whether <code>MyDomain\\john</code>  is an AD user correctly logged in</p>\n</li>\n<li><p>If the user is logged in correctly I check in the App DB to see if the <code>MyDomain\\john</code>  is mapped in the users table</p>\n</li>\n<li><p>If match is found login is possible, login screen is bypassed and user is authenticated in the app</p>\n</li>\n</ol>\n<p>In principle all I need is to know which is the currently correctly loged in AD user, could you please suggest which .net and Java function is needed to perform such check?</p>\n"},{"tags":["java","package"],"comments":[{"owner":{"account_id":11683,"reputation":1438111,"user_id":22656,"accept_rate":86,"display_name":"Jon Skeet"},"score":4,"creation_date":1412952530,"post_id":26302066,"comment_id":41272831,"body_markdown":"There&#39;s no such concept as an &quot;inner package&quot; in Java. Packages are not hierarchical as far as the compiler is concerned - the &quot;hierarchy&quot; is just human pattern matching for organization, effectively.","body":"There&#39;s no such concept as an &quot;inner package&quot; in Java. Packages are not hierarchical as far as the compiler is concerned - the &quot;hierarchy&quot; is just human pattern matching for organization, effectively."}],"answers":[{"tags":[],"owner":{"account_id":1090437,"reputation":6796,"user_id":1085186,"accept_rate":100,"display_name":"StackFlowed"},"down_vote_count":1,"up_vote_count":5,"is_accepted":true,"score":4,"last_activity_date":1412953706,"creation_date":1412952604,"answer_id":26302175,"question_id":26302066,"body_markdown":"Yes you can do it till some extent by using internal keyword in package name.&lt;br&gt;\r\nExample you have a package \r\n\r\n    com.myPackage.component\r\n\r\nyou can have another package as \r\n\r\n    com.myPackage.component.internal.blahblah\r\n\r\nWhen you use the keyword internal it is not exposed to other jars and not available for usage outside the jar but can be used inside the jar by another package. Here the internal package is extending `com.myPackage.component` further down the hierarchy. As quote by [Jon Skeet](https://stackoverflow.com/users/22656/jon-skeet) `Packages are not hierarchical as far as the compiler is concerned - the &quot;hierarchy&quot; is just human pattern matching for organization, effectively.` That is what I mean by extending the package further.\r\n\r\n--------\r\n&lt;h1&gt; EDIT &lt;/h1&gt;\r\n\r\nYou can define a class package private by not giving any access modifier to the class \r\nExample : \r\n\r\n    class PackagePrivateClass{\r\n    \r\n    }\r\n\r\nYou can import this class in the same package but outside the package it doesn&#39;t allow you to use it.","title":"Java nested package visibility","body":"<p>Yes you can do it till some extent by using internal keyword in package name.<br>\nExample you have a package </p>\n\n<pre><code>com.myPackage.component\n</code></pre>\n\n<p>you can have another package as </p>\n\n<pre><code>com.myPackage.component.internal.blahblah\n</code></pre>\n\n<p>When you use the keyword internal it is not exposed to other jars and not available for usage outside the jar but can be used inside the jar by another package. Here the internal package is extending <code>com.myPackage.component</code> further down the hierarchy. As quote by <a href=\"https://stackoverflow.com/users/22656/jon-skeet\">Jon Skeet</a> <code>Packages are not hierarchical as far as the compiler is concerned - the \"hierarchy\" is just human pattern matching for organization, effectively.</code> That is what I mean by extending the package further.</p>\n\n<hr>\n\n<h1> EDIT </h1>\n\n<p>You can define a class package private by not giving any access modifier to the class \nExample : </p>\n\n<pre><code>class PackagePrivateClass{\n\n}\n</code></pre>\n\n<p>You can import this class in the same package but outside the package it doesn't allow you to use it.</p>\n"}],"owner":{"account_id":330599,"reputation":10771,"user_id":654799,"accept_rate":84,"display_name":"vach"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2742,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"accepted_answer_id":26302175,"answer_count":1,"score":3,"last_activity_date":1699322753,"creation_date":1412952251,"question_id":26302066,"body_markdown":"Often when I&#39;m designing some new component of the project I&#39;m having a limitation that I can&#39;t right away work out...\r\n\r\nImagine a package &quot;component&quot; and in this component package you have some public classes/interfaces which are naturally designed to be shared publicly and some classes/interfaces (ComponentSpecificStuff) that are needed in inner packages but those should not be visible from outside of package...\r\n\r\nNow with current java possibilities the only way I achieve this is by violating the (not expose Stuff outside &quot;component&quot; package) moment...\r\n\r\nHow do you workaround this? ","title":"Java nested package visibility","body":"<p>Often when I'm designing some new component of the project I'm having a limitation that I can't right away work out...</p>\n<p>Imagine a package &quot;component&quot; and in this component package you have some public classes/interfaces which are naturally designed to be shared publicly and some classes/interfaces (ComponentSpecificStuff) that are needed in inner packages but those should not be visible from outside of package...</p>\n<p>Now with current java possibilities the only way I achieve this is by violating the (not expose Stuff outside &quot;component&quot; package) moment...</p>\n<p>How do you workaround this?</p>\n"},{"tags":["java","gson"],"comments":[{"owner":{"account_id":151394,"reputation":52351,"user_id":365237,"accept_rate":96,"display_name":"eis"},"score":0,"creation_date":1575870383,"post_id":59239590,"comment_id":104696959,"body_markdown":"your problem is not related to json. you never set those fields to anything else than null, so why would they be something else?","body":"your problem is not related to json. you never set those fields to anything else than null, so why would they be something else?"}],"answers":[{"tags":[],"owner":{"account_id":1535561,"reputation":7664,"user_id":1431720,"accept_rate":89,"display_name":"Robert"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1699322605,"creation_date":1575850279,"answer_id":59241077,"question_id":59239590,"body_markdown":"The whole network access is not needed here, you could just pass the JSON in a String. A constructor that does network I/O is also a really bad idea anyway, as it&#39;s slow and a pain in unit tests.\r\n\r\nThat said, `gson.fromJson` returns a `User` object, but you never do anything with it; it just goes out of scope.\r\n\r\nI&#39;d change the code to something like this:\r\n\r\n\r\n    public class User {\r\n        public String username;\r\n        public int id;\r\n        public String email;\r\n        public String role;\r\n        public String plan;\r\n        public String planEndDate;\r\n    \r\n        public static User findByName(String username) throws IOException {\r\n             String json = downloadUserData(username);\r\n             return new Gson().fromJson(json, User.class);\r\n        }\r\n    \r\n        public static String downloadUserData(String username) throws IOException {\r\n            URL url = new URL(urlhere);\r\n            HttpURLConnection connection = (HttpURLConnection) url.openConnection();\r\n            connection.setRequestMethod(&quot;GET&quot;);\r\n            connection.addRequestProperty(&quot;User-Agent&quot;, &quot;Mozilla/4.0 (compatible; MSIE 7.0; Windows NT 5.1; .NET CLR 1.1.4322; .NET CLR 1.0.3705)&quot;);\r\n            String response = ApiRequest.getResponse(connection);\r\n            connection.disconnect();\r\n            return response;\r\n        }\r\n    }\r\n\r\nThat way you can still build users manually, or download their data from somewhere if you must.\r\n\r\n    User downloaded = User.findByName(&quot;me&quot;);\r\n\r\n    User json = new Gson().fromJson(&quot;{\\&quot;id\\&quot;: 1, \\&quot;username\\&quot;: \\&quot;me\\&quot;, ... \\&quot;}&quot;, User.class);\r\n\r\n    User manually = new User();\r\n    manually.username = &quot;me&quot;;\r\n    manually.email = &quot;me@example.org&quot;;\r\n    // ...","title":"Gson returning null","body":"<p>The whole network access is not needed here, you could just pass the JSON in a String. A constructor that does network I/O is also a really bad idea anyway, as it's slow and a pain in unit tests.</p>\n<p>That said, <code>gson.fromJson</code> returns a <code>User</code> object, but you never do anything with it; it just goes out of scope.</p>\n<p>I'd change the code to something like this:</p>\n<pre><code>public class User {\n    public String username;\n    public int id;\n    public String email;\n    public String role;\n    public String plan;\n    public String planEndDate;\n\n    public static User findByName(String username) throws IOException {\n         String json = downloadUserData(username);\n         return new Gson().fromJson(json, User.class);\n    }\n\n    public static String downloadUserData(String username) throws IOException {\n        URL url = new URL(urlhere);\n        HttpURLConnection connection = (HttpURLConnection) url.openConnection();\n        connection.setRequestMethod(&quot;GET&quot;);\n        connection.addRequestProperty(&quot;User-Agent&quot;, &quot;Mozilla/4.0 (compatible; MSIE 7.0; Windows NT 5.1; .NET CLR 1.1.4322; .NET CLR 1.0.3705)&quot;);\n        String response = ApiRequest.getResponse(connection);\n        connection.disconnect();\n        return response;\n    }\n}\n</code></pre>\n<p>That way you can still build users manually, or download their data from somewhere if you must.</p>\n<pre><code>User downloaded = User.findByName(&quot;me&quot;);\n\nUser json = new Gson().fromJson(&quot;{\\&quot;id\\&quot;: 1, \\&quot;username\\&quot;: \\&quot;me\\&quot;, ... \\&quot;}&quot;, User.class);\n\nUser manually = new User();\nmanually.username = &quot;me&quot;;\nmanually.email = &quot;me@example.org&quot;;\n// ...\n</code></pre>\n"}],"owner":{"account_id":17262673,"reputation":49,"user_id":12500196,"display_name":"MakeN"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":151,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"accepted_answer_id":59241077,"answer_count":1,"score":-1,"last_activity_date":1699322605,"creation_date":1575836717,"question_id":59239590,"body_markdown":"I am having trouble with JSON, I currently have this class to convert a json response from my api to a object but its returning all the values null -\r\n```java\r\npublic class User {\r\n\r\n    public String username;\r\n\r\n    public User(String username) throws IOException {\r\n        this.username = username;\r\n        URL url = new URL(urlhere);\r\n        HttpURLConnection connection = (HttpURLConnection) url.openConnection();\r\n        connection.setRequestMethod(&quot;GET&quot;);\r\n        connection.addRequestProperty(&quot;User-Agent&quot;, &quot;Mozilla/4.0 (compatible; MSIE 7.0; Windows NT 5.1; .NET CLR 1.1.4322; .NET CLR 1.0.3705)&quot;);\r\n        String response = ApiRequest.getResponse(connection);\r\n        connection.disconnect();\r\n        Gson gson = new Gson();\r\n        gson.fromJson(response, this.getClass());\r\n    }\r\n\r\n    public int id;\r\n    public String email;\r\n    public String role;\r\n    public String plan;\r\n    public String planEndDate;\r\n\r\n}\r\n```\r\nI am very new to json, please keep this in mind, I may have missed something.\r\n\r\nJSON RESPONSE EXAMPLE:\r\n```\r\n{&quot;id&quot;:7,&quot;username&quot;:&quot;xx&quot;,&quot;email&quot;:&quot;xx&quot;,&quot;role&quot;:&quot;administrator&quot;,&quot;plan&quot;:&quot;xx&quot;,&quot;planEndDate&quot;:&quot;xx&quot;}\r\n```","title":"Gson returning null","body":"<p>I am having trouble with JSON, I currently have this class to convert a json response from my api to a object but its returning all the values null -</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>public class User {\n\n    public String username;\n\n    public User(String username) throws IOException {\n        this.username = username;\n        URL url = new URL(urlhere);\n        HttpURLConnection connection = (HttpURLConnection) url.openConnection();\n        connection.setRequestMethod(\"GET\");\n        connection.addRequestProperty(\"User-Agent\", \"Mozilla/4.0 (compatible; MSIE 7.0; Windows NT 5.1; .NET CLR 1.1.4322; .NET CLR 1.0.3705)\");\n        String response = ApiRequest.getResponse(connection);\n        connection.disconnect();\n        Gson gson = new Gson();\n        gson.fromJson(response, this.getClass());\n    }\n\n    public int id;\n    public String email;\n    public String role;\n    public String plan;\n    public String planEndDate;\n\n}\n</code></pre>\n\n<p>I am very new to json, please keep this in mind, I may have missed something.</p>\n\n<p>JSON RESPONSE EXAMPLE:</p>\n\n<pre><code>{\"id\":7,\"username\":\"xx\",\"email\":\"xx\",\"role\":\"administrator\",\"plan\":\"xx\",\"planEndDate\":\"xx\"}\n</code></pre>\n"},{"tags":["java","stack"],"comments":[{"owner":{"account_id":1957068,"reputation":22025,"user_id":1759845,"accept_rate":65,"display_name":"BackSlash"},"score":0,"creation_date":1386005085,"post_id":20334158,"comment_id":30349194,"body_markdown":"You should indent your code properly, it&#39;s really hard to read it","body":"You should indent your code properly, it&#39;s really hard to read it"},{"owner":{"account_id":3137519,"reputation":2673,"user_id":2653729,"accept_rate":89,"display_name":"Clad Clad"},"score":2,"creation_date":1386005155,"post_id":20334158,"comment_id":30349230,"body_markdown":"At first you miss return keyword.\nreturn stack.isEmpty(); \nreturn stack.isFull();","body":"At first you miss return keyword. return stack.isEmpty();  return stack.isFull();"},{"owner":{"account_id":1883267,"reputation":7504,"user_id":1702990,"display_name":"Sinkingpoint"},"score":2,"creation_date":1386005313,"post_id":20334158,"comment_id":30349303,"body_markdown":"If this is a Stack, why do you have to supply a position when pushing?","body":"If this is a Stack, why do you have to supply a position when pushing?"},{"owner":{"account_id":404325,"reputation":3300,"user_id":772590,"accept_rate":69,"display_name":"Santosh Joshi"},"score":1,"creation_date":1386005416,"post_id":20334158,"comment_id":30349355,"body_markdown":"you can also consult `the java.util.Stack` class for more help.","body":"you can also consult <code>the java.util.Stack</code> class for more help."}],"answers":[{"tags":[],"owner":{"account_id":2801241,"reputation":546,"user_id":2409450,"accept_rate":100,"display_name":"Paul Gray"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1386005879,"creation_date":1386005574,"answer_id":20334344,"question_id":20334158,"body_markdown":"1.\r\nAs Clad mentioned in the comments, it looks like you are just missing the `return` keyword on the isEmpty() function:\r\n\r\n    /* determine if the stack is empty */\r\n    public boolean isEmpty() {\r\n        return stack.isEmpty();\r\n    }\r\n\r\nHowever, for the `isFull()` function, there is no `isFull()` function on the `List` class, you will have to implement that yourself. You&#39;ll have to keep track of the integer that is passed in through your constructor so that you can compare it to the size of the list that is stored in your object\r\n\r\n2.\r\nAre you supposed to allow the user of this object to specify any `SIZE` they want, or are you supposed to always have a 5 integer limit?\r\n\r\n3.\r\nYou might want to read this section of the Java documentation on [How to Throw Exceptions][1]\r\n\r\n\r\n  [1]: http://docs.oracle.com/javase/tutorial/essential/exceptions/throwing.html","title":"How to implement a bounded stack in Java","body":"<p>1.\nAs Clad mentioned in the comments, it looks like you are just missing the <code>return</code> keyword on the isEmpty() function:</p>\n\n<pre><code>/* determine if the stack is empty */\npublic boolean isEmpty() {\n    return stack.isEmpty();\n}\n</code></pre>\n\n<p>However, for the <code>isFull()</code> function, there is no <code>isFull()</code> function on the <code>List</code> class, you will have to implement that yourself. You'll have to keep track of the integer that is passed in through your constructor so that you can compare it to the size of the list that is stored in your object</p>\n\n<p>2.\nAre you supposed to allow the user of this object to specify any <code>SIZE</code> they want, or are you supposed to always have a 5 integer limit?</p>\n\n<p>3.\nYou might want to read this section of the Java documentation on <a href=\"http://docs.oracle.com/javase/tutorial/essential/exceptions/throwing.html\" rel=\"nofollow\">How to Throw Exceptions</a></p>\n"},{"tags":[],"owner":{"account_id":3137519,"reputation":2673,"user_id":2653729,"accept_rate":89,"display_name":"Clad Clad"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1386006360,"creation_date":1386005665,"answer_id":20334367,"question_id":20334158,"body_markdown":"Did you really look a bit on how to do before asking ? seems like you just copy paste a code you don&#39;t get.\r\n\r\n    import java.util.ArrayList;\r\n    import java.util.List;\r\n\r\n    public class IntegerStack {\r\n\r\n    private int max_size;\r\n    private List&lt;Integer&gt; stack;\r\n\r\n    public IntegerStack(int size) {\r\n        max_size = size;\r\n        stack = new ArrayList&lt;Integer&gt;(size);\r\n    }\r\n\r\n    /* method to push the stack */\r\n    public void push(int i) {\r\n            stack.add(0, i);\r\n    }\r\n\r\n    /* method to pop the stack */\r\n    public int pop() {\r\n        if (!stack.isEmpty()) {\r\n            int i = stack.get(0);\r\n            stack.remove(0);\r\n            return i;\r\n        } else {\r\n            return -1;// Or any invalid value\r\n        }\r\n    }\r\n\r\n    /* method to peek at the stack */\r\n    public int peek() {\r\n        if (!stack.isEmpty()) {\r\n            return stack.get(0);\r\n        } else {\r\n            return -1;// Or any invalid value\r\n        }\r\n    }\r\n\r\n    /* determine if the stack is empty */\r\n    public boolean isEmpty() {\r\n        return stack.isEmpty();\r\n    }\r\n\r\n    /* determine if the stack is full */\r\n    public boolean isFull() {\r\n        //go through all your stack and see if there are things not set to get if it&#39;s full.\r\n    }\r\n\r\n    /* determine the size of the stack */\r\n    public int size() {\r\n        if (stack.isEmpty())\r\n            return 0;\r\n        else\r\n            return stack.size();\r\n    }\r\n    }\r\n\r\nwhen you create your objet you put 5 as the parameter. You may need other change in code ;)\r\n\r\nTry by yourself you will improve more :D","title":"How to implement a bounded stack in Java","body":"<p>Did you really look a bit on how to do before asking ? seems like you just copy paste a code you don't get.</p>\n\n<pre><code>import java.util.ArrayList;\nimport java.util.List;\n\npublic class IntegerStack {\n\nprivate int max_size;\nprivate List&lt;Integer&gt; stack;\n\npublic IntegerStack(int size) {\n    max_size = size;\n    stack = new ArrayList&lt;Integer&gt;(size);\n}\n\n/* method to push the stack */\npublic void push(int i) {\n        stack.add(0, i);\n}\n\n/* method to pop the stack */\npublic int pop() {\n    if (!stack.isEmpty()) {\n        int i = stack.get(0);\n        stack.remove(0);\n        return i;\n    } else {\n        return -1;// Or any invalid value\n    }\n}\n\n/* method to peek at the stack */\npublic int peek() {\n    if (!stack.isEmpty()) {\n        return stack.get(0);\n    } else {\n        return -1;// Or any invalid value\n    }\n}\n\n/* determine if the stack is empty */\npublic boolean isEmpty() {\n    return stack.isEmpty();\n}\n\n/* determine if the stack is full */\npublic boolean isFull() {\n    //go through all your stack and see if there are things not set to get if it's full.\n}\n\n/* determine the size of the stack */\npublic int size() {\n    if (stack.isEmpty())\n        return 0;\n    else\n        return stack.size();\n}\n}\n</code></pre>\n\n<p>when you create your objet you put 5 as the parameter. You may need other change in code ;)</p>\n\n<p>Try by yourself you will improve more :D</p>\n"}],"owner":{"account_id":3671161,"reputation":21,"user_id":3058359,"display_name":"user3058359"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":9503,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":2,"score":2,"last_activity_date":1699322550,"creation_date":1386004977,"question_id":20334158,"body_markdown":"The things I need help with are: \r\n\r\n1. What is the correct code to make the isEmpty() and isFull() methods return an answer to tell me if the stack is empty or if the stack is full \r\n\r\n2. I need to make my stack I am using be a set size of five(5)(stack can hold 5 ints) \r\n\r\n3. I need to add exceptions in to the push() and pop() methods, that does not let the push be used when the stack is full, or the pop be used when the stack is empty\r\n\r\n\r\n----------\r\n\r\n\r\n    import java.util.ArrayList;\r\n    import java.util.List;\r\n    \r\n    public class IntegerStack {\r\n    \r\n    \tprivate List&lt;Integer&gt; stack;\r\n    \r\n    \tpublic IntegerStack(int SIZE) {\r\n    \t\tstack = new ArrayList&lt;Integer&gt;(SIZE);\r\n    \t}\r\n    \r\n    \t/* method to push the stack */\r\n    \tpublic void push(int i) {\r\n    \r\n    \t\tstack.add(0, i);\r\n    \t}\r\n    \r\n    \t/* method to pop the stack */\r\n    \tpublic int pop() {\r\n    \t\tif (!stack.isEmpty()) {\r\n    \t\t\tint i = stack.get(0);\r\n    \t\t\tstack.remove(0);\r\n    \t\t\treturn i;\r\n    \t\t} else {\r\n    \t\t\treturn -1;// Or any invalid value\r\n    \t\t}\r\n    \t}\r\n    \r\n    \t/* method to peek at the stack */\r\n    \tpublic int peek() {\r\n    \t\tif (!stack.isEmpty()) {\r\n    \t\t\treturn stack.get(0);\r\n    \t\t} else {\r\n    \t\t\treturn -1;// Or any invalid value\r\n    \t\t}\r\n    \t}\r\n    \r\n    \t/* determine if the stack is empty */\r\n    \tpublic boolean isEmpty() {\r\n    \t\tstack.isEmpty();\r\n    \t}\r\n    \r\n    \t/* determine if the stack is full */\r\n    \tpublic boolean isFull() {\r\n    \t\tstack.isFull();\r\n    \t}\r\n    \r\n    \t/* determine the size of the stack */\r\n    \tpublic int size() {\r\n    \t\tif (stack.isEmpty())\r\n    \t\t\treturn 0;\r\n    \t\telse\r\n    \t\t\treturn stack.size();\r\n    \t}\r\n    \r\n    }\r\n\r\n","title":"How to implement a bounded stack in Java","body":"<p>The things I need help with are: </p>\n\n<ol>\n<li><p>What is the correct code to make the isEmpty() and isFull() methods return an answer to tell me if the stack is empty or if the stack is full </p></li>\n<li><p>I need to make my stack I am using be a set size of five(5)(stack can hold 5 ints) </p></li>\n<li><p>I need to add exceptions in to the push() and pop() methods, that does not let the push be used when the stack is full, or the pop be used when the stack is empty</p></li>\n</ol>\n\n<hr>\n\n<pre><code>import java.util.ArrayList;\nimport java.util.List;\n\npublic class IntegerStack {\n\n    private List&lt;Integer&gt; stack;\n\n    public IntegerStack(int SIZE) {\n        stack = new ArrayList&lt;Integer&gt;(SIZE);\n    }\n\n    /* method to push the stack */\n    public void push(int i) {\n\n        stack.add(0, i);\n    }\n\n    /* method to pop the stack */\n    public int pop() {\n        if (!stack.isEmpty()) {\n            int i = stack.get(0);\n            stack.remove(0);\n            return i;\n        } else {\n            return -1;// Or any invalid value\n        }\n    }\n\n    /* method to peek at the stack */\n    public int peek() {\n        if (!stack.isEmpty()) {\n            return stack.get(0);\n        } else {\n            return -1;// Or any invalid value\n        }\n    }\n\n    /* determine if the stack is empty */\n    public boolean isEmpty() {\n        stack.isEmpty();\n    }\n\n    /* determine if the stack is full */\n    public boolean isFull() {\n        stack.isFull();\n    }\n\n    /* determine the size of the stack */\n    public int size() {\n        if (stack.isEmpty())\n            return 0;\n        else\n            return stack.size();\n    }\n\n}\n</code></pre>\n"},{"tags":["java","spring-boot","systemd"],"owner":{"account_id":49543,"reputation":19032,"user_id":147530,"accept_rate":63,"display_name":"morpheus"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":37,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1699319820,"creation_date":1699318768,"question_id":77435009,"body_markdown":"I would like to daemonize a Spring Boot Application. I read several articles and questions on how to do this. See [this][1], [this](http://www.jcgonzalez.com/ubuntu-16-java-service-wrapper-example) and [this](https://stackoverflow.com/questions/7814222/how-to-write-a-java-daemon) for example but I can&#39;t get it to work.\r\n\r\nHere is my step by step process:\r\n\r\n1. First, I have created a sample Spring demo application that can be found [here](https://github.com/siddhsql/spring-demo-app) if needed. All it does is expose an endpoint that returns `Hello World`\r\n\r\n```\r\n$ curl -X GET http://localhost.com:8080\r\nHello World\r\n```\r\n\r\n2. I created this `launcher.sh` bash script to launch the spring app according to the articles above:\r\n\r\n```\r\n#!/bin/bash\r\n# https://stackoverflow.com/a/246128/147530\r\nSCRIPT_DIR=$( cd -- &quot;$( dirname -- &quot;${BASH_SOURCE[0]}&quot; )&quot; &amp;&gt; /dev/null &amp;&amp; pwd )\r\n# Specify the path to your Java application JAR file\r\nAPP_DIR=&quot;$SCRIPT_DIR/..&quot;\r\necho &quot;$APP_DIR&quot;\r\n\r\nstart() {    \r\n  # TODO: need to ensure that application is not already running\r\n    cd $APP_DIR \r\n    # https://stackoverflow.com/a/7814594/147530\r\n    # redirect both input and output to the null device\r\n    echo &quot;starting spring boot application...&quot;\r\n  nohup mvn spring-boot:run &lt; /dev/null &gt; /dev/null 2&gt;&amp;1 &amp;\r\n  echo $! &gt; demo-app.pid\r\n}\r\n\r\nstop() {\r\n  cd $APP_DIR \r\n  PID=$(cat demo-app.pid)\r\n  echo &quot;stopping spring boot application PID: $PID&quot;\r\n  kill $PID\r\n}\r\n\r\ncase $1 in\r\n  start)\r\n    start\r\n    ;;\r\n  stop)\r\n    stop\r\n    ;;\r\n  restart)\r\n    stop\r\n    start\r\n    ;;\r\n  *)\r\n    echo &quot;Usage: $0 {start|stop|restart}&quot;\r\n    exit 1\r\n    ;;\r\nesac\r\n```\r\n\r\n3. Then I created following file in `/etc/systemd/system`:\r\n\r\n```\r\n[Unit]\r\nDescription=Spring Demo App\r\nAfter=syslog.target\r\n\r\n[Service]\r\nExecStart=/app/spring-demo-app/daemon/launcher.sh start\r\nExecStop=/app/spring-demo-app/daemon/launcher.sh stop\r\nExecReload=/app/spring-demo-app/daemon/launcher.sh restart\r\nUser=xxx\r\nRestart=on-failure\r\n\r\n[Install]\r\nWantedBy=multi-user.target\r\n```\r\n\r\n4. After that I performed the following steps:\r\n\r\n```\r\nsudo systemctl daemon-reload\r\nsudo systemctl enable spring-demo.service\r\nsudo systemctl start spring-demo\r\nsudo systemctl status spring-demo\r\n```\r\n\r\n## Expected\r\n\r\nservice should start\r\n\r\n## Observed\r\n\r\nservice does start but `systemd` immediately stops the service and puts it in failed state after repeating the cycle couple of times. here are the details:\r\n\r\n1. see the [log](https://gist.github.com/siddhsql/61b7332649bcc2810be9129a9565875b) in `/var/log/syslog`. in the log observe:\r\n\r\n```\r\n2023-11-07T00:34:46.568688+00:00 instance-1 systemd[1]: Started spring-demo.service - Spring Demo App.\r\n2023-11-07T00:34:46.575478+00:00 instance-1 launcher.sh[66104]: /app/spring-demo-app/daemon/..\r\n2023-11-07T00:34:46.575982+00:00 instance-1 launcher.sh[66104]: starting spring boot application...\r\n2023-11-07T00:34:46.586625+00:00 instance-1 launcher.sh[66108]: /app/spring-demo-app/daemon/..\r\n2023-11-07T00:34:46.587937+00:00 instance-1 launcher.sh[66108]: stopping spring boot application PID: 66107\r\n```\r\n\r\nI have verified if I try to start the application using the command in `ExecStart` it works:\r\n\r\n```\r\n/app/spring-demo-app/daemon/launcher.sh start\r\n```\r\n\r\nthe application starts although `echo $!` gave me empty output (this is not the main problem in this question)\r\n\r\nWhat am I doing wrong here and how can I fix it? Been on this for a full day now.\r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/40918629/cannot-start-systemd-service","title":"Problem daemonizing Spring boot Java application with systemd","body":"<p>I would like to daemonize a Spring Boot Application. I read several articles and questions on how to do this. See <a href=\"https://stackoverflow.com/questions/40918629/cannot-start-systemd-service\">this</a>, <a href=\"http://www.jcgonzalez.com/ubuntu-16-java-service-wrapper-example\" rel=\"nofollow noreferrer\">this</a> and <a href=\"https://stackoverflow.com/questions/7814222/how-to-write-a-java-daemon\">this</a> for example but I can't get it to work.</p>\n<p>Here is my step by step process:</p>\n<ol>\n<li>First, I have created a sample Spring demo application that can be found <a href=\"https://github.com/siddhsql/spring-demo-app\" rel=\"nofollow noreferrer\">here</a> if needed. All it does is expose an endpoint that returns <code>Hello World</code></li>\n</ol>\n<pre><code>$ curl -X GET http://localhost.com:8080\nHello World\n</code></pre>\n<ol start=\"2\">\n<li>I created this <code>launcher.sh</code> bash script to launch the spring app according to the articles above:</li>\n</ol>\n<pre><code>#!/bin/bash\n# https://stackoverflow.com/a/246128/147530\nSCRIPT_DIR=$( cd -- &quot;$( dirname -- &quot;${BASH_SOURCE[0]}&quot; )&quot; &amp;&gt; /dev/null &amp;&amp; pwd )\n# Specify the path to your Java application JAR file\nAPP_DIR=&quot;$SCRIPT_DIR/..&quot;\necho &quot;$APP_DIR&quot;\n\nstart() {    \n  # TODO: need to ensure that application is not already running\n    cd $APP_DIR \n    # https://stackoverflow.com/a/7814594/147530\n    # redirect both input and output to the null device\n    echo &quot;starting spring boot application...&quot;\n  nohup mvn spring-boot:run &lt; /dev/null &gt; /dev/null 2&gt;&amp;1 &amp;\n  echo $! &gt; demo-app.pid\n}\n\nstop() {\n  cd $APP_DIR \n  PID=$(cat demo-app.pid)\n  echo &quot;stopping spring boot application PID: $PID&quot;\n  kill $PID\n}\n\ncase $1 in\n  start)\n    start\n    ;;\n  stop)\n    stop\n    ;;\n  restart)\n    stop\n    start\n    ;;\n  *)\n    echo &quot;Usage: $0 {start|stop|restart}&quot;\n    exit 1\n    ;;\nesac\n</code></pre>\n<ol start=\"3\">\n<li>Then I created following file in <code>/etc/systemd/system</code>:</li>\n</ol>\n<pre><code>[Unit]\nDescription=Spring Demo App\nAfter=syslog.target\n\n[Service]\nExecStart=/app/spring-demo-app/daemon/launcher.sh start\nExecStop=/app/spring-demo-app/daemon/launcher.sh stop\nExecReload=/app/spring-demo-app/daemon/launcher.sh restart\nUser=xxx\nRestart=on-failure\n\n[Install]\nWantedBy=multi-user.target\n</code></pre>\n<ol start=\"4\">\n<li>After that I performed the following steps:</li>\n</ol>\n<pre><code>sudo systemctl daemon-reload\nsudo systemctl enable spring-demo.service\nsudo systemctl start spring-demo\nsudo systemctl status spring-demo\n</code></pre>\n<h2>Expected</h2>\n<p>service should start</p>\n<h2>Observed</h2>\n<p>service does start but <code>systemd</code> immediately stops the service and puts it in failed state after repeating the cycle couple of times. here are the details:</p>\n<ol>\n<li>see the <a href=\"https://gist.github.com/siddhsql/61b7332649bcc2810be9129a9565875b\" rel=\"nofollow noreferrer\">log</a> in <code>/var/log/syslog</code>. in the log observe:</li>\n</ol>\n<pre><code>2023-11-07T00:34:46.568688+00:00 instance-1 systemd[1]: Started spring-demo.service - Spring Demo App.\n2023-11-07T00:34:46.575478+00:00 instance-1 launcher.sh[66104]: /app/spring-demo-app/daemon/..\n2023-11-07T00:34:46.575982+00:00 instance-1 launcher.sh[66104]: starting spring boot application...\n2023-11-07T00:34:46.586625+00:00 instance-1 launcher.sh[66108]: /app/spring-demo-app/daemon/..\n2023-11-07T00:34:46.587937+00:00 instance-1 launcher.sh[66108]: stopping spring boot application PID: 66107\n</code></pre>\n<p>I have verified if I try to start the application using the command in <code>ExecStart</code> it works:</p>\n<pre><code>/app/spring-demo-app/daemon/launcher.sh start\n</code></pre>\n<p>the application starts although <code>echo $!</code> gave me empty output (this is not the main problem in this question)</p>\n<p>What am I doing wrong here and how can I fix it? Been on this for a full day now.</p>\n"},{"tags":["java","gradle","youtube-api"],"comments":[{"owner":{"account_id":29771632,"reputation":13,"user_id":22816697,"display_name":"avDev"},"score":0,"creation_date":1700104496,"post_id":77435010,"comment_id":136614760,"body_markdown":"Although this is not a fix to my problem, I circumvented it by switching to Python rather than Java.","body":"Although this is not a fix to my problem, I circumvented it by switching to Python rather than Java."}],"owner":{"account_id":29771632,"reputation":13,"user_id":22816697,"display_name":"avDev"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":66,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1699318770,"creation_date":1699318770,"question_id":77435010,"body_markdown":"Using VS Code and the Gradle for Java extension, I made a new Gradle project. I needed to use the YouTube API for a project, so I followed [their tutorial](https://developers.google.com/explorer-help/code-samples#java), but I got an error saying that the &quot;compile&quot; method did not exist (or something along those lines), so I changed the compiles to &quot;implementation&quot;. I then copy-and-pasted [their code sample for listing search results](https://developers.google.com/youtube/v3/docs/search/list?apix_params=%7B%22part%22%3A%5B%22snippet%22%5D%2C%22q%22%3A%22insertQuery%22%2C%22type%22%3A%5B%22videos%22%5D%7D&amp;apix=true), and I got no compile errors (other than the JacksonFactory import. I had to change that to GsonFactory because JacksonFactory was deprecated).\r\n\r\nHowever, when I used `gradle -q run`, I got an error saying the following:\r\n\r\n```\r\nExecution failed for task &#39;:app:compileJava&#39;.\r\n&gt; Could not resolve all files for configuration &#39;:app:compileClasspath&#39;.\r\n   &gt; Could not resolve org.checkerframework:checker-qual:3.12.0.\r\n     Required by:\r\n         project :app\r\n         project :app &gt; com.google.api-client:google-api-client:2.2.0 &gt; com.google.guava:guava:31.1-jre\r\n      &gt; No matching variant of org.checkerframework:checker-qual:3.12.0 was found. The consumer was configured to find a library for use during \r\ncompile-time, compatible with Java 7, preferably in the form of class files, preferably optimized for standard JVMs, and its dependencies declared externally but:\r\n          - Variant &#39;apiElements&#39; capability org.checkerframework:checker-qual:3.12.0 declares a library for use during compile-time, packaged as a jar, and its dependencies declared externally:\r\n              - Incompatible because this component declares a component, compatible with Java 8 and the consumer needed a component, compatible with Java 7\r\n              - Other compatible attribute:\r\n                  - Doesn&#39;t say anything about its target Java environment (preferred optimized for standard JVMs)\r\n          - Variant &#39;javadocElements&#39; capability org.checkerframework:checker-qual:3.12.0 declares a component for use during runtime, and its dependencies declared externally:\r\n              - Incompatible because this component declares documentation and the consumer needed a library\r\n              - Other compatible attributes:\r\n                  - Doesn&#39;t say anything about its target Java environment (preferred optimized for standard JVMs)\r\n                  - Doesn&#39;t say anything about its target Java version (required compatibility with Java 7)\r\n                  - Doesn&#39;t say anything about its elements (required them preferably in the form of class files)\r\n          - Variant &#39;runtimeElements&#39; capability org.checkerframework:checker-qual:3.12.0 declares a library for use during runtime, packaged as a jar, and its dependencies declared externally:\r\n              - Incompatible because this component declares a component, compatible with Java 8 and the consumer needed a component, compatible with Java 7\r\n              - Other compatible attribute:\r\n                  - Doesn&#39;t say anything about its target Java environment (preferred optimized for standard JVMs)\r\n          - Variant &#39;sourcesElements&#39; capability org.checkerframework:checker-qual:3.12.0 declares a component for use during runtime, and its dependencies declared externally:\r\n              - Incompatible because this component declares documentation and the consumer needed a library\r\n              - Other compatible attributes:\r\n                  - Doesn&#39;t say anything about its target Java environment (preferred optimized for standard JVMs)\r\n                  - Doesn&#39;t say anything about its target Java version (required compatibility with Java 7)\r\n                  - Doesn&#39;t say anything about its elements (required them preferably in the form of class files)\r\n```\r\nFrom what I could understand, `org.checkerframework:checker-qual:3.12.0` was a required dependency that did not exist.\r\n\r\n\r\nSo, I tried adding `implementation &#39;org.checkerframework:checker-qual:3.12.0&#39;` to the build.gradle dependencies, but I still got the same error. I then tried searching up `org.checkerframework:checker-qual:3.12.0` and found the [maven repository website](https://mvnrepository.com/artifact/org.checkerframework/checker-qual/3.12.0) and copy-and-pasted the import for gradle, but I still got the same error.\r\n\r\nHere is what my build.gradle file looks like currently:\r\n\r\n```\r\napply plugin: &#39;java&#39;\r\napply plugin: &#39;application&#39;\r\n\r\nmainClassName = &#39;App&#39;\r\nsourceCompatibility = 1.7\r\ntargetCompatibility = 1.7\r\nversion = &#39;1.0&#39;\r\n\r\nrepositories {\r\n    mavenCentral()\r\n}\r\n\r\ndependencies {\r\n    // https://mvnrepository.com/artifact/org.checkerframework/checker-qual\r\n    implementation group: &#39;org.checkerframework&#39;, name: &#39;checker-qual&#39;, version: &#39;3.12.0&#39;\r\n    implementation &#39;com.google.api-client:google-api-client:1.23.0&#39;\r\n    implementation &#39;com.google.oauth-client:google-oauth-client-jetty:1.23.0&#39;\r\n    implementation &#39;com.google.apis:google-api-services-youtube:v3-rev20231011-2.0.0&#39;\r\n}\r\n```\r\nAnd my App class:\r\n\r\n```\r\npackage com.avinash.youtube_data_collection;\r\n\r\nimport com.google.api.client.auth.oauth2.Credential;\r\nimport com.google.api.client.extensions.java6.auth.oauth2.AuthorizationCodeInstalledApp;\r\nimport com.google.api.client.extensions.jetty.auth.oauth2.LocalServerReceiver;\r\nimport com.google.api.client.googleapis.auth.oauth2.GoogleAuthorizationCodeFlow;\r\nimport com.google.api.client.googleapis.auth.oauth2.GoogleClientSecrets;\r\nimport com.google.api.client.googleapis.javanet.GoogleNetHttpTransport;\r\nimport com.google.api.client.googleapis.json.GoogleJsonResponseException;\r\nimport com.google.api.client.http.javanet.NetHttpTransport;\r\nimport com.google.api.client.json.JsonFactory;\r\nimport com.google.api.client.json.gson.GsonFactory;\r\n\r\nimport com.google.api.services.youtube.YouTube;\r\nimport com.google.api.services.youtube.model.SearchListResponse;\r\n\r\nimport java.io.IOException;\r\nimport java.io.InputStream;\r\nimport java.io.InputStreamReader;\r\nimport java.security.GeneralSecurityException;\r\nimport java.util.Arrays;\r\nimport java.util.Collection;\r\n\r\npublic class App {\r\n    private static final String CLIENT_SECRETS= &quot;client_secret.json&quot;;\r\n    private static final Collection&lt;String&gt; SCOPES =\r\n        Arrays.asList(&quot;https://www.googleapis.com/auth/youtube.force-ssl&quot;);\r\n\r\n    private static final String APPLICATION_NAME = &quot;API code samples&quot;;\r\n    private static final JsonFactory JSON_FACTORY = GsonFactory.getDefaultInstance();\r\n\r\n    /**\r\n     * Create an authorized Credential object.\r\n     *\r\n     * @return an authorized Credential object.\r\n     * @throws IOException\r\n     */\r\n    public static Credential authorize(final NetHttpTransport httpTransport) throws IOException {\r\n        // Load client secrets.\r\n        InputStream in = App.class.getResourceAsStream(CLIENT_SECRETS);\r\n        GoogleClientSecrets clientSecrets =\r\n          GoogleClientSecrets.load(JSON_FACTORY, new InputStreamReader(in));\r\n        // Build flow and trigger user authorization request.\r\n        GoogleAuthorizationCodeFlow flow =\r\n            new GoogleAuthorizationCodeFlow.Builder(httpTransport, JSON_FACTORY, clientSecrets, SCOPES)\r\n            .build();\r\n        Credential credential =\r\n            new AuthorizationCodeInstalledApp(flow, new LocalServerReceiver()).authorize(&quot;user&quot;);\r\n        return credential;\r\n    }\r\n\r\n    /**\r\n     * Build and return an authorized API client service.\r\n     *\r\n     * @return an authorized API client service\r\n     * @throws GeneralSecurityException, IOException\r\n     */\r\n    public static YouTube getService() throws GeneralSecurityException, IOException {\r\n        final NetHttpTransport httpTransport = GoogleNetHttpTransport.newTrustedTransport();\r\n        Credential credential = authorize(httpTransport);\r\n        return new YouTube.Builder(httpTransport, JSON_FACTORY, credential)\r\n            .setApplicationName(APPLICATION_NAME)\r\n            .build();\r\n    }\r\n\r\n    /**\r\n     * Call function to create API service object. Define and\r\n     * execute API request. Print API response.\r\n     *\r\n     * @throws GeneralSecurityException, IOException, GoogleJsonResponseException\r\n     */\r\n    public static void main(String[] args)\r\n        throws GeneralSecurityException, IOException, GoogleJsonResponseException {\r\n        YouTube youtubeService = getService();\r\n        // Define and execute the API request\r\n        YouTube.Search.List request = youtubeService.search()\r\n            .list(Arrays.asList(&quot;snippet&quot;));\r\n        SearchListResponse response = request.setQ(&quot;dogs&quot;)\r\n            .setType(Arrays.asList(&quot;videos&quot;))\r\n            .execute();\r\n        System.out.println(response);\r\n    }\r\n}\r\n```\r\n","title":"&quot;Could not resolve org.checkerframework:checker-qual:3.12.0&quot; When Using YouTube API in Gradle Project","body":"<p>Using VS Code and the Gradle for Java extension, I made a new Gradle project. I needed to use the YouTube API for a project, so I followed <a href=\"https://developers.google.com/explorer-help/code-samples#java\" rel=\"nofollow noreferrer\">their tutorial</a>, but I got an error saying that the &quot;compile&quot; method did not exist (or something along those lines), so I changed the compiles to &quot;implementation&quot;. I then copy-and-pasted <a href=\"https://developers.google.com/youtube/v3/docs/search/list?apix_params=%7B%22part%22%3A%5B%22snippet%22%5D%2C%22q%22%3A%22insertQuery%22%2C%22type%22%3A%5B%22videos%22%5D%7D&amp;apix=true\" rel=\"nofollow noreferrer\">their code sample for listing search results</a>, and I got no compile errors (other than the JacksonFactory import. I had to change that to GsonFactory because JacksonFactory was deprecated).</p>\n<p>However, when I used <code>gradle -q run</code>, I got an error saying the following:</p>\n<pre><code>Execution failed for task ':app:compileJava'.\n&gt; Could not resolve all files for configuration ':app:compileClasspath'.\n   &gt; Could not resolve org.checkerframework:checker-qual:3.12.0.\n     Required by:\n         project :app\n         project :app &gt; com.google.api-client:google-api-client:2.2.0 &gt; com.google.guava:guava:31.1-jre\n      &gt; No matching variant of org.checkerframework:checker-qual:3.12.0 was found. The consumer was configured to find a library for use during \ncompile-time, compatible with Java 7, preferably in the form of class files, preferably optimized for standard JVMs, and its dependencies declared externally but:\n          - Variant 'apiElements' capability org.checkerframework:checker-qual:3.12.0 declares a library for use during compile-time, packaged as a jar, and its dependencies declared externally:\n              - Incompatible because this component declares a component, compatible with Java 8 and the consumer needed a component, compatible with Java 7\n              - Other compatible attribute:\n                  - Doesn't say anything about its target Java environment (preferred optimized for standard JVMs)\n          - Variant 'javadocElements' capability org.checkerframework:checker-qual:3.12.0 declares a component for use during runtime, and its dependencies declared externally:\n              - Incompatible because this component declares documentation and the consumer needed a library\n              - Other compatible attributes:\n                  - Doesn't say anything about its target Java environment (preferred optimized for standard JVMs)\n                  - Doesn't say anything about its target Java version (required compatibility with Java 7)\n                  - Doesn't say anything about its elements (required them preferably in the form of class files)\n          - Variant 'runtimeElements' capability org.checkerframework:checker-qual:3.12.0 declares a library for use during runtime, packaged as a jar, and its dependencies declared externally:\n              - Incompatible because this component declares a component, compatible with Java 8 and the consumer needed a component, compatible with Java 7\n              - Other compatible attribute:\n                  - Doesn't say anything about its target Java environment (preferred optimized for standard JVMs)\n          - Variant 'sourcesElements' capability org.checkerframework:checker-qual:3.12.0 declares a component for use during runtime, and its dependencies declared externally:\n              - Incompatible because this component declares documentation and the consumer needed a library\n              - Other compatible attributes:\n                  - Doesn't say anything about its target Java environment (preferred optimized for standard JVMs)\n                  - Doesn't say anything about its target Java version (required compatibility with Java 7)\n                  - Doesn't say anything about its elements (required them preferably in the form of class files)\n</code></pre>\n<p>From what I could understand, <code>org.checkerframework:checker-qual:3.12.0</code> was a required dependency that did not exist.</p>\n<p>So, I tried adding <code>implementation 'org.checkerframework:checker-qual:3.12.0'</code> to the build.gradle dependencies, but I still got the same error. I then tried searching up <code>org.checkerframework:checker-qual:3.12.0</code> and found the <a href=\"https://mvnrepository.com/artifact/org.checkerframework/checker-qual/3.12.0\" rel=\"nofollow noreferrer\">maven repository website</a> and copy-and-pasted the import for gradle, but I still got the same error.</p>\n<p>Here is what my build.gradle file looks like currently:</p>\n<pre><code>apply plugin: 'java'\napply plugin: 'application'\n\nmainClassName = 'App'\nsourceCompatibility = 1.7\ntargetCompatibility = 1.7\nversion = '1.0'\n\nrepositories {\n    mavenCentral()\n}\n\ndependencies {\n    // https://mvnrepository.com/artifact/org.checkerframework/checker-qual\n    implementation group: 'org.checkerframework', name: 'checker-qual', version: '3.12.0'\n    implementation 'com.google.api-client:google-api-client:1.23.0'\n    implementation 'com.google.oauth-client:google-oauth-client-jetty:1.23.0'\n    implementation 'com.google.apis:google-api-services-youtube:v3-rev20231011-2.0.0'\n}\n</code></pre>\n<p>And my App class:</p>\n<pre><code>package com.avinash.youtube_data_collection;\n\nimport com.google.api.client.auth.oauth2.Credential;\nimport com.google.api.client.extensions.java6.auth.oauth2.AuthorizationCodeInstalledApp;\nimport com.google.api.client.extensions.jetty.auth.oauth2.LocalServerReceiver;\nimport com.google.api.client.googleapis.auth.oauth2.GoogleAuthorizationCodeFlow;\nimport com.google.api.client.googleapis.auth.oauth2.GoogleClientSecrets;\nimport com.google.api.client.googleapis.javanet.GoogleNetHttpTransport;\nimport com.google.api.client.googleapis.json.GoogleJsonResponseException;\nimport com.google.api.client.http.javanet.NetHttpTransport;\nimport com.google.api.client.json.JsonFactory;\nimport com.google.api.client.json.gson.GsonFactory;\n\nimport com.google.api.services.youtube.YouTube;\nimport com.google.api.services.youtube.model.SearchListResponse;\n\nimport java.io.IOException;\nimport java.io.InputStream;\nimport java.io.InputStreamReader;\nimport java.security.GeneralSecurityException;\nimport java.util.Arrays;\nimport java.util.Collection;\n\npublic class App {\n    private static final String CLIENT_SECRETS= &quot;client_secret.json&quot;;\n    private static final Collection&lt;String&gt; SCOPES =\n        Arrays.asList(&quot;https://www.googleapis.com/auth/youtube.force-ssl&quot;);\n\n    private static final String APPLICATION_NAME = &quot;API code samples&quot;;\n    private static final JsonFactory JSON_FACTORY = GsonFactory.getDefaultInstance();\n\n    /**\n     * Create an authorized Credential object.\n     *\n     * @return an authorized Credential object.\n     * @throws IOException\n     */\n    public static Credential authorize(final NetHttpTransport httpTransport) throws IOException {\n        // Load client secrets.\n        InputStream in = App.class.getResourceAsStream(CLIENT_SECRETS);\n        GoogleClientSecrets clientSecrets =\n          GoogleClientSecrets.load(JSON_FACTORY, new InputStreamReader(in));\n        // Build flow and trigger user authorization request.\n        GoogleAuthorizationCodeFlow flow =\n            new GoogleAuthorizationCodeFlow.Builder(httpTransport, JSON_FACTORY, clientSecrets, SCOPES)\n            .build();\n        Credential credential =\n            new AuthorizationCodeInstalledApp(flow, new LocalServerReceiver()).authorize(&quot;user&quot;);\n        return credential;\n    }\n\n    /**\n     * Build and return an authorized API client service.\n     *\n     * @return an authorized API client service\n     * @throws GeneralSecurityException, IOException\n     */\n    public static YouTube getService() throws GeneralSecurityException, IOException {\n        final NetHttpTransport httpTransport = GoogleNetHttpTransport.newTrustedTransport();\n        Credential credential = authorize(httpTransport);\n        return new YouTube.Builder(httpTransport, JSON_FACTORY, credential)\n            .setApplicationName(APPLICATION_NAME)\n            .build();\n    }\n\n    /**\n     * Call function to create API service object. Define and\n     * execute API request. Print API response.\n     *\n     * @throws GeneralSecurityException, IOException, GoogleJsonResponseException\n     */\n    public static void main(String[] args)\n        throws GeneralSecurityException, IOException, GoogleJsonResponseException {\n        YouTube youtubeService = getService();\n        // Define and execute the API request\n        YouTube.Search.List request = youtubeService.search()\n            .list(Arrays.asList(&quot;snippet&quot;));\n        SearchListResponse response = request.setQ(&quot;dogs&quot;)\n            .setType(Arrays.asList(&quot;videos&quot;))\n            .execute();\n        System.out.println(response);\n    }\n}\n</code></pre>\n"},{"tags":["java","junit","jacoco","jacoco-maven-plugin"],"owner":{"account_id":26677223,"reputation":21,"user_id":20287710,"display_name":"jJavier52"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":13,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1699318294,"creation_date":1699318294,"question_id":77434979,"body_markdown":"I have a lot of autogenerated and a few handwritten classes in same package. I want to exclude all of the autogenerated classes without adding each of the exclusions. Is there a way to exclude the package and then just include the few handwritten classes in JaCoCo report?\r\n\r\nI tried something like this: \r\n\r\n```\r\n&lt;plugin&gt;\r\n        &lt;groupId&gt;org.jacoco&lt;/groupId&gt;\r\n        &lt;artifactId&gt;jacoco-maven-plugin&lt;/artifactId&gt;\r\n        &lt;version&gt;0.8.8&lt;/version&gt;\r\n        &lt;configuration&gt;\r\n          &lt;outputDirectory&gt;${project.build.directory}/jacoco-reports&lt;/outputDirectory&gt;\r\n          &lt;excludes&gt;\r\n            &lt;!--\r\n              Exclusions for code coverage\r\n              Excluding auto-generated source, main classes, configs and constants.\r\n              For more details, please see https://www.eclemma.org/jacoco/trunk/doc/report-mojo.html#excludes\r\n            --&gt;\r\n            &lt;exclude&gt;com/company/xxx/aaa/model/*&lt;/exclude&gt;\r\n          &lt;/excludes&gt;\r\n          &lt;includes&gt;\r\n            &lt;include&gt;com/company/xxx/aaa/model/MyClass.class&lt;/include&gt;\r\n          &lt;/includes&gt;\r\n        &lt;/configuration&gt;\r\n        &lt;executions&gt;\r\n          &lt;execution&gt;\r\n            &lt;id&gt;report&lt;/id&gt;\r\n            &lt;phase&gt;test&lt;/phase&gt;\r\n            &lt;goals&gt;\r\n              &lt;goal&gt;report&lt;/goal&gt;\r\n            &lt;/goals&gt;\r\n          &lt;/execution&gt;\r\n        &lt;/executions&gt;\r\n&lt;/plugin&gt;\r\n```\r\n\r\nBut the report is empty with message: No class files specified.\r\n\r\nIs it possible to exclude package and then include a class from this package? If it is possible how can I achive this?","title":"Exclude package but include one class in JaCoCo report","body":"<p>I have a lot of autogenerated and a few handwritten classes in same package. I want to exclude all of the autogenerated classes without adding each of the exclusions. Is there a way to exclude the package and then just include the few handwritten classes in JaCoCo report?</p>\n<p>I tried something like this:</p>\n<pre><code>&lt;plugin&gt;\n        &lt;groupId&gt;org.jacoco&lt;/groupId&gt;\n        &lt;artifactId&gt;jacoco-maven-plugin&lt;/artifactId&gt;\n        &lt;version&gt;0.8.8&lt;/version&gt;\n        &lt;configuration&gt;\n          &lt;outputDirectory&gt;${project.build.directory}/jacoco-reports&lt;/outputDirectory&gt;\n          &lt;excludes&gt;\n            &lt;!--\n              Exclusions for code coverage\n              Excluding auto-generated source, main classes, configs and constants.\n              For more details, please see https://www.eclemma.org/jacoco/trunk/doc/report-mojo.html#excludes\n            --&gt;\n            &lt;exclude&gt;com/company/xxx/aaa/model/*&lt;/exclude&gt;\n          &lt;/excludes&gt;\n          &lt;includes&gt;\n            &lt;include&gt;com/company/xxx/aaa/model/MyClass.class&lt;/include&gt;\n          &lt;/includes&gt;\n        &lt;/configuration&gt;\n        &lt;executions&gt;\n          &lt;execution&gt;\n            &lt;id&gt;report&lt;/id&gt;\n            &lt;phase&gt;test&lt;/phase&gt;\n            &lt;goals&gt;\n              &lt;goal&gt;report&lt;/goal&gt;\n            &lt;/goals&gt;\n          &lt;/execution&gt;\n        &lt;/executions&gt;\n&lt;/plugin&gt;\n</code></pre>\n<p>But the report is empty with message: No class files specified.</p>\n<p>Is it possible to exclude package and then include a class from this package? If it is possible how can I achive this?</p>\n"},{"tags":["java","jackson"],"answers":[{"tags":[],"owner":{"account_id":1023013,"reputation":16655,"user_id":1032890,"accept_rate":100,"display_name":"GeertPt"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1626361014,"creation_date":1626361014,"answer_id":68396169,"question_id":68394911,"body_markdown":"It&#39;s not the serialization that&#39;s the problem, it&#39;s the deserialization, if I understand correctly. For deserialization, Jackson needs to read the names of each parameter in the constructor to map the fields correctly from JSON to Java.\r\n\r\nOne way to do this automatically (without @JsonProperty annotations) is to add the ParameterNamesModule from the jackson-module-parameter-names jar: \r\n\r\n    mapper.registerModule(new ParameterNamesModule());\r\n\r\nThis also requires that the classes are compiled with the **-parameters** compile flag (at least for java 8 - 11). In maven, you do this via:\r\n  \r\n\r\n    &lt;build&gt;\r\n        &lt;plugins&gt;\r\n          &lt;plugin&gt;\r\n            &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n            &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\r\n            &lt;configuration&gt;\r\n              &lt;compilerArgs&gt;\r\n                &lt;arg&gt;-parameters&lt;/arg&gt;\r\n              &lt;/compilerArgs&gt;\r\n            &lt;/configuration&gt;\r\n          &lt;/plugin&gt;\r\n        &lt;/plugins&gt;\r\n      &lt;/build&gt;\r\n\r\nI never tested this with Java 16 however, so let me know if it works there, too.","title":"Why record class can&#39;t be properly deserialized with Jackson?","body":"<p>It's not the serialization that's the problem, it's the deserialization, if I understand correctly. For deserialization, Jackson needs to read the names of each parameter in the constructor to map the fields correctly from JSON to Java.</p>\n<p>One way to do this automatically (without @JsonProperty annotations) is to add the ParameterNamesModule from the jackson-module-parameter-names jar:</p>\n<pre><code>mapper.registerModule(new ParameterNamesModule());\n</code></pre>\n<p>This also requires that the classes are compiled with the <strong>-parameters</strong> compile flag (at least for java 8 - 11). In maven, you do this via:</p>\n<pre><code>&lt;build&gt;\n    &lt;plugins&gt;\n      &lt;plugin&gt;\n        &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n        &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\n        &lt;configuration&gt;\n          &lt;compilerArgs&gt;\n            &lt;arg&gt;-parameters&lt;/arg&gt;\n          &lt;/compilerArgs&gt;\n        &lt;/configuration&gt;\n      &lt;/plugin&gt;\n    &lt;/plugins&gt;\n  &lt;/build&gt;\n</code></pre>\n<p>I never tested this with Java 16 however, so let me know if it works there, too.</p>\n"},{"tags":[],"owner":{"account_id":5898802,"reputation":3203,"user_id":4643073,"accept_rate":100,"display_name":"Tuby"},"down_vote_count":0,"up_vote_count":8,"is_accepted":true,"score":8,"last_activity_date":1630413867,"creation_date":1630413867,"answer_id":68998917,"question_id":68394911,"body_markdown":"There are 2 solutions:\r\n1. Wait until Jackson fixes this issue, as of 2.13.0-rc02 [this issue][1] is still not resolved.\r\n2. Use solution proposed by GitHub user mentioned in the comments of the above issue.\r\n```\r\npublic class RecordNamingStrategyPatchModule extends SimpleModule {\r\n\r\n    @Override\r\n    public void setupModule(SetupContext context) {\r\n        context.addValueInstantiators(new ValueInstantiatorsModifier());\r\n        super.setupModule(context);\r\n    }\r\n\r\n    /**\r\n     * Remove when the following issue is resolved: \r\n     * &lt;a href=&quot;https://github.com/FasterXML/jackson-databind/issues/2992&quot;&gt;Properties naming strategy do not work with Record #2992&lt;/a&gt;\r\n     */\r\n    private static class ValueInstantiatorsModifier extends ValueInstantiators.Base {\r\n        @Override\r\n        public ValueInstantiator findValueInstantiator(\r\n                DeserializationConfig config, BeanDescription beanDesc, ValueInstantiator defaultInstantiator\r\n        ) {\r\n            if (!beanDesc.getBeanClass().isRecord() || !(defaultInstantiator instanceof StdValueInstantiator) || !defaultInstantiator.canCreateFromObjectWith()) {\r\n                return defaultInstantiator;\r\n            }\r\n            Map&lt;String, BeanPropertyDefinition&gt; map = beanDesc.findProperties().stream().collect(Collectors.toMap(p -&gt; p.getInternalName(), Function.identity()));\r\n            SettableBeanProperty[] renamedConstructorArgs = Arrays.stream(defaultInstantiator.getFromObjectArguments(config))\r\n                    .map(p -&gt; {\r\n                        BeanPropertyDefinition prop = map.get(p.getName());\r\n                        return prop != null ? p.withName(prop.getFullName()) : p;\r\n                    })\r\n                    .toArray(SettableBeanProperty[]::new);\r\n\r\n            return new PatchedValueInstantiator((StdValueInstantiator) defaultInstantiator, renamedConstructorArgs);\r\n        }\r\n    }\r\n\r\n    private static class PatchedValueInstantiator extends StdValueInstantiator {\r\n\r\n        protected PatchedValueInstantiator(StdValueInstantiator src, SettableBeanProperty[] constructorArguments) {\r\n            super(src);\r\n            _constructorArguments = constructorArguments;\r\n        }\r\n    }\r\n}\r\n```\r\nYou can add the Module to ObjectMapper using\r\n\r\n    objectMapper.registerModule(new RecordNamingStrategyPatchModule());\r\n\r\n\r\n  [1]: https://github.com/FasterXML/jackson-databind/issues/2992","title":"Why record class can&#39;t be properly deserialized with Jackson?","body":"<p>There are 2 solutions:</p>\n<ol>\n<li>Wait until Jackson fixes this issue, as of 2.13.0-rc02 <a href=\"https://github.com/FasterXML/jackson-databind/issues/2992\" rel=\"noreferrer\">this issue</a> is still not resolved.</li>\n<li>Use solution proposed by GitHub user mentioned in the comments of the above issue.</li>\n</ol>\n<pre><code>public class RecordNamingStrategyPatchModule extends SimpleModule {\n\n    @Override\n    public void setupModule(SetupContext context) {\n        context.addValueInstantiators(new ValueInstantiatorsModifier());\n        super.setupModule(context);\n    }\n\n    /**\n     * Remove when the following issue is resolved: \n     * &lt;a href=&quot;https://github.com/FasterXML/jackson-databind/issues/2992&quot;&gt;Properties naming strategy do not work with Record #2992&lt;/a&gt;\n     */\n    private static class ValueInstantiatorsModifier extends ValueInstantiators.Base {\n        @Override\n        public ValueInstantiator findValueInstantiator(\n                DeserializationConfig config, BeanDescription beanDesc, ValueInstantiator defaultInstantiator\n        ) {\n            if (!beanDesc.getBeanClass().isRecord() || !(defaultInstantiator instanceof StdValueInstantiator) || !defaultInstantiator.canCreateFromObjectWith()) {\n                return defaultInstantiator;\n            }\n            Map&lt;String, BeanPropertyDefinition&gt; map = beanDesc.findProperties().stream().collect(Collectors.toMap(p -&gt; p.getInternalName(), Function.identity()));\n            SettableBeanProperty[] renamedConstructorArgs = Arrays.stream(defaultInstantiator.getFromObjectArguments(config))\n                    .map(p -&gt; {\n                        BeanPropertyDefinition prop = map.get(p.getName());\n                        return prop != null ? p.withName(prop.getFullName()) : p;\n                    })\n                    .toArray(SettableBeanProperty[]::new);\n\n            return new PatchedValueInstantiator((StdValueInstantiator) defaultInstantiator, renamedConstructorArgs);\n        }\n    }\n\n    private static class PatchedValueInstantiator extends StdValueInstantiator {\n\n        protected PatchedValueInstantiator(StdValueInstantiator src, SettableBeanProperty[] constructorArguments) {\n            super(src);\n            _constructorArguments = constructorArguments;\n        }\n    }\n}\n</code></pre>\n<p>You can add the Module to ObjectMapper using</p>\n<pre><code>objectMapper.registerModule(new RecordNamingStrategyPatchModule());\n</code></pre>\n"},{"tags":[],"owner":{"account_id":367578,"reputation":3080,"user_id":713861,"accept_rate":72,"display_name":"GreenSaguaro"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1699315082,"creation_date":1699315082,"answer_id":77434836,"question_id":68394911,"body_markdown":"The solution that worked for me (Jackson 2.13.x) was to add a canonical constructor to the record class and use `@JsonCreator`:\r\n\r\n```java\r\nrecord Thing(\r\n    String one,\r\n    String two,\r\n    Boolean someFlag\r\n) {\r\n    public Thing(String one, String two) {\r\n        this(one, two, null);\r\n    }\r\n\r\n    @JsonCreator\r\n    public Thing(\r\n        String one,\r\n        String two,\r\n        @JsonProperty(&quot;some_flag&quot;) Boolean someFlag\r\n    ) {\r\n        this.one = one;\r\n        this.two = two;\r\n        this.someFlag = Objects.requireNonNullElse(someFlag, true);\r\n    }\r\n}\r\n\r\n```","title":"Why record class can&#39;t be properly deserialized with Jackson?","body":"<p>The solution that worked for me (Jackson 2.13.x) was to add a canonical constructor to the record class and use <code>@JsonCreator</code>:</p>\n<pre class=\"lang-java prettyprint-override\"><code>record Thing(\n    String one,\n    String two,\n    Boolean someFlag\n) {\n    public Thing(String one, String two) {\n        this(one, two, null);\n    }\n\n    @JsonCreator\n    public Thing(\n        String one,\n        String two,\n        @JsonProperty(&quot;some_flag&quot;) Boolean someFlag\n    ) {\n        this.one = one;\n        this.two = two;\n        this.someFlag = Objects.requireNonNullElse(someFlag, true);\n    }\n}\n\n</code></pre>\n"}],"owner":{"account_id":6402126,"reputation":1833,"user_id":4978865,"accept_rate":87,"display_name":"Praytic"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":10304,"favorite_count":0,"down_vote_count":0,"up_vote_count":14,"accepted_answer_id":68998917,"answer_count":3,"score":14,"last_activity_date":1699315082,"creation_date":1626356251,"question_id":68394911,"body_markdown":"I&#39;m developing simple bot for my telegram channel and I&#39;m using Java 16 features, like record classes. The issue is that I can&#39;t deserialize incoming requests into record classes. I&#39;m using Jackson with Micronaut to setup a client. Here are my classes:\r\n\r\n**User record**\r\n\r\n    public record User(\r\n            long id,\r\n            boolean isBot,\r\n            String firstName,\r\n            String userName,\r\n            boolean canJoinGroups,\r\n            boolean canReadAllGroupMessages,\r\n            boolean supportsInlineQueries) {\r\n    }\r\n\r\n**TelegramResponse record**\r\n\r\n    public record TelegramResponse&lt;T&gt;(T result, boolean ok) {\r\n    }\r\n   \r\n**TelegramApiClient class**\r\n\r\n    @Client(&quot;https://api.telegram.org/bot${bot.id}&quot;)\r\n    public interface TelegramApiClient {\r\n    \r\n        @Get(&quot;/getMe&quot;)\r\n        TelegramResponse&lt;User&gt; getSelf();\r\n    }\r\n\r\nWhen I call this method, I&#39;m getting this error:\r\n\r\n    16:22:52.916 [default-nioEventLoopGroup-1-2] ERROR i.m.h.s.netty.RoutingInBoundHandler - Unexpected error occurred: Error decoding HTTP response body: Error decoding stream for type [class com.praytic.TelegramResponse]: Can not set final java.lang.Boolean field com.praytic.User.supportsInlineQueries to java.lang.Boolean (through reference chain: com.praytic.TelegramResponse[&quot;result&quot;])\r\n    io.micronaut.http.client.exceptions.HttpClientResponseException: Error decoding HTTP response body: Error decoding stream for type [class com.praytic.TelegramResponse]: Can not set final java.lang.Boolean field com.praytic.User.supportsInlineQueries to java.lang.Boolean (through reference chain: com.praytic.TelegramResponse[&quot;result&quot;])\r\n    \tat io.micronaut.http.client.netty.DefaultHttpClient$11.channelReadInstrumented(DefaultHttpClient.java:2191)\r\n    \tat io.micronaut.http.client.netty.DefaultHttpClient$11.channelReadInstrumented(DefaultHttpClient.java:2061)\r\n    \tat io.micronaut.http.client.netty.DefaultHttpClient$SimpleChannelInboundHandlerInstrumented.channelRead0(DefaultHttpClient.java:2765)\r\n    \tat io.netty.channel.SimpleChannelInboundHandler.channelRead(SimpleChannelInboundHandler.java:99)\r\n    \tat io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:379)\r\n    \tat io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:365)\r\n    \tat io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:357)\r\n    \tat io.micronaut.http.netty.stream.HttpStreamsHandler.channelRead(HttpStreamsHandler.java:194)\r\n    \tat io.micronaut.http.netty.stream.HttpStreamsClientHandler.channelRead(HttpStreamsClientHandler.java:183)\r\n    \tat io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:379)\r\n    \tat io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:365)\r\n    \tat io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:357)\r\n    \tat io.netty.handler.codec.MessageToMessageDecoder.channelRead(MessageToMessageDecoder.java:103)\r\n    \tat io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:379)\r\n    \tat io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:365)\r\n    \tat io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:357)\r\n    \tat io.netty.handler.codec.MessageToMessageDecoder.channelRead(MessageToMessageDecoder.java:103)\r\n    \tat io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:379)\r\n    \tat io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:365)\r\n    \tat io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:357)\r\n    \tat io.netty.channel.CombinedChannelDuplexHandler$DelegatingChannelHandlerContext.fireChannelRead(CombinedChannelDuplexHandler.java:436)\r\n    \tat io.netty.handler.codec.ByteToMessageDecoder.fireChannelRead(ByteToMessageDecoder.java:324)\r\n    \tat io.netty.handler.codec.ByteToMessageDecoder.channelRead(ByteToMessageDecoder.java:296)\r\n    \tat io.netty.channel.CombinedChannelDuplexHandler.channelRead(CombinedChannelDuplexHandler.java:251)\r\n    \tat io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:379)\r\n    \tat io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:365)\r\n    \tat io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:357)\r\n    \tat io.netty.handler.timeout.IdleStateHandler.channelRead(IdleStateHandler.java:286)\r\n    \tat io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:379)\r\n    \tat io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:365)\r\n    \tat io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:357)\r\n    \tat io.netty.handler.ssl.SslHandler.unwrap(SslHandler.java:1368)\r\n    \tat io.netty.handler.ssl.SslHandler.decodeJdkCompatible(SslHandler.java:1234)\r\n    \tat io.netty.handler.ssl.SslHandler.decode(SslHandler.java:1280)\r\n    \tat io.netty.handler.codec.ByteToMessageDecoder.decodeRemovalReentryProtection(ByteToMessageDecoder.java:507)\r\n    \tat io.netty.handler.codec.ByteToMessageDecoder.callDecode(ByteToMessageDecoder.java:446)\r\n    \tat io.netty.handler.codec.ByteToMessageDecoder.channelRead(ByteToMessageDecoder.java:276)\r\n    \tat io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:379)\r\n    \tat io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:365)\r\n    \tat io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:357)\r\n    \tat io.netty.channel.DefaultChannelPipeline$HeadContext.channelRead(DefaultChannelPipeline.java:1410)\r\n    \tat io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:379)\r\n    \tat io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:365)\r\n    \tat io.netty.channel.DefaultChannelPipeline.fireChannelRead(DefaultChannelPipeline.java:919)\r\n    \tat io.netty.channel.nio.AbstractNioByteChannel$NioByteUnsafe.read(AbstractNioByteChannel.java:166)\r\n    \tat io.netty.channel.nio.NioEventLoop.processSelectedKey(NioEventLoop.java:719)\r\n    \tat io.netty.channel.nio.NioEventLoop.processSelectedKeysOptimized(NioEventLoop.java:655)\r\n    \tat io.netty.channel.nio.NioEventLoop.processSelectedKeys(NioEventLoop.java:581)\r\n    \tat io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:493)\r\n    \tat io.netty.util.concurrent.SingleThreadEventExecutor$4.run(SingleThreadEventExecutor.java:989)\r\n    \tat io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74)\r\n    \tat io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)\r\n    \tat java.base/java.lang.Thread.run(Thread.java:831)\r\n    Caused by: io.micronaut.http.codec.CodecException: Error decoding stream for type [class com.praytic.TelegramResponse]: Can not set final java.lang.Boolean field com.praytic.User.supportsInlineQueries to java.lang.Boolean (through reference chain: com.praytic.TelegramResponse[&quot;result&quot;])\r\n    \tat io.micronaut.jackson.codec.JacksonMediaTypeCodec.decode(JacksonMediaTypeCodec.java:209)\r\n    \tat io.micronaut.http.client.netty.FullNettyClientHttpResponse.convertByteBuf(FullNettyClientHttpResponse.java:280)\r\n    \tat io.micronaut.http.client.netty.FullNettyClientHttpResponse.lambda$getBody$1(FullNettyClientHttpResponse.java:218)\r\n    \tat java.base/java.util.HashMap.computeIfAbsent(HashMap.java:1224)\r\n    \tat io.micronaut.http.client.netty.FullNettyClientHttpResponse.getBody(FullNettyClientHttpResponse.java:192)\r\n    \tat io.micronaut.http.client.netty.FullNettyClientHttpResponse.&lt;init&gt;(FullNettyClientHttpResponse.java:111)\r\n    \tat io.micronaut.http.client.netty.DefaultHttpClient$11.channelReadInstrumented(DefaultHttpClient.java:2121)\r\n    \t... 52 common frames omitted\r\n    Caused by: com.fasterxml.jackson.databind.JsonMappingException: Can not set final java.lang.Boolean field com.praytic.User.supportsInlineQueries to java.lang.Boolean (through reference chain: com.praytic.TelegramResponse[&quot;result&quot;])\r\n    \tat com.fasterxml.jackson.databind.JsonMappingException.from(JsonMappingException.java:274)\r\n    \tat com.fasterxml.jackson.databind.deser.SettableBeanProperty._throwAsIOE(SettableBeanProperty.java:623)\r\n    \tat com.fasterxml.jackson.databind.deser.SettableBeanProperty._throwAsIOE(SettableBeanProperty.java:611)\r\n    \tat com.fasterxml.jackson.databind.deser.SettableBeanProperty._throwAsIOE(SettableBeanProperty.java:634)\r\n    \tat com.fasterxml.jackson.databind.deser.impl.FieldProperty.set(FieldProperty.java:193)\r\n    \tat com.fasterxml.jackson.databind.deser.impl.PropertyValue$Regular.assign(PropertyValue.java:62)\r\n    \tat com.fasterxml.jackson.databind.deser.impl.PropertyBasedCreator.build(PropertyBasedCreator.java:211)\r\n    \tat com.fasterxml.jackson.databind.deser.BeanDeserializer._deserializeUsingPropertyBased(BeanDeserializer.java:520)\r\n    \tat com.fasterxml.jackson.databind.deser.BeanDeserializerBase.deserializeFromObjectUsingNonDefault(BeanDeserializerBase.java:1405)\r\n    \tat com.fasterxml.jackson.databind.deser.BeanDeserializer.deserializeFromObject(BeanDeserializer.java:362)\r\n    \tat com.fasterxml.jackson.databind.deser.BeanDeserializer.deserialize(BeanDeserializer.java:195)\r\n    \tat com.fasterxml.jackson.databind.deser.SettableBeanProperty.deserialize(SettableBeanProperty.java:542)\r\n    \tat com.fasterxml.jackson.databind.deser.BeanDeserializer._deserializeWithErrorWrapping(BeanDeserializer.java:565)\r\n    \tat com.fasterxml.jackson.databind.deser.BeanDeserializer._deserializeUsingPropertyBased(BeanDeserializer.java:449)\r\n    \tat com.fasterxml.jackson.databind.deser.BeanDeserializerBase.deserializeFromObjectUsingNonDefault(BeanDeserializerBase.java:1405)\r\n    \tat com.fasterxml.jackson.databind.deser.BeanDeserializer.deserializeFromObject(BeanDeserializer.java:362)\r\n    \tat com.fasterxml.jackson.databind.deser.BeanDeserializer.deserialize(BeanDeserializer.java:195)\r\n    \tat com.fasterxml.jackson.databind.deser.DefaultDeserializationContext.readRootValue(DefaultDeserializationContext.java:322)\r\n    \tat com.fasterxml.jackson.databind.ObjectMapper._readMapAndClose(ObjectMapper.java:4593)\r\n    \tat com.fasterxml.jackson.databind.ObjectMapper.readValue(ObjectMapper.java:3643)\r\n    \tat io.micronaut.jackson.codec.JacksonMediaTypeCodec.decode(JacksonMediaTypeCodec.java:204)\r\n    \t... 58 common frames omitted\r\n    Caused by: java.lang.IllegalAccessException: Can not set final java.lang.Boolean field com.praytic.User.supportsInlineQueries to java.lang.Boolean\r\n    \tat java.base/jdk.internal.reflect.UnsafeFieldAccessorImpl.throwFinalFieldIllegalAccessException(UnsafeFieldAccessorImpl.java:76)\r\n    \tat java.base/jdk.internal.reflect.UnsafeFieldAccessorImpl.throwFinalFieldIllegalAccessException(UnsafeFieldAccessorImpl.java:80)\r\n    \tat java.base/jdk.internal.reflect.UnsafeQualifiedObjectFieldAccessorImpl.set(UnsafeQualifiedObjectFieldAccessorImpl.java:79)\r\n    \tat java.base/java.lang.reflect.Field.set(Field.java:793)\r\n    \tat com.fasterxml.jackson.databind.deser.impl.FieldProperty.set(FieldProperty.java:190)\r\n    \t... 74 common frames omitted\r\n\r\nI have read from [this][1] article that Jackson 2.12 already supports `java.lang.Record` type. My Jackson configuration for Micronaut:\r\n\r\n    jackson:\r\n      property-naming-strategy: SNAKE_CASE\r\n      serialization-inclusion: always\r\n\r\n**EDIT:**\r\n\r\nAs I guessed, putting `@JsonProperty` annotation on each field in record header worked. Exception is gone and all values are populared.\r\n\r\n    public record User(\r\n            long id,\r\n            @JsonProperty(&quot;is_bot&quot;) boolean isBot,\r\n            @JsonProperty(&quot;first_name&quot;) String firstName,\r\n            @JsonProperty(&quot;user_name&quot;) String userName,\r\n            @JsonProperty(&quot;can_join_groups&quot;) boolean canJoinGroups,\r\n            @JsonProperty(&quot;can_read_all_group_messages&quot;) boolean canReadAllGroupMessages,\r\n            @JsonProperty(&quot;supports_inline_queries&quot;) boolean supportsInlineQueries) {\r\n    }\r\n\r\nHowever, I don&#39;t want to do it for each of my DTO records. How to make `jackson.property-naming-strategy: SNAKE_CASE` property work?\r\n\r\n  [1]: https://cowtowncoder.medium.com/jackson-2-12-most-wanted-5-5-a32c28c345b5","title":"Why record class can&#39;t be properly deserialized with Jackson?","body":"<p>I'm developing simple bot for my telegram channel and I'm using Java 16 features, like record classes. The issue is that I can't deserialize incoming requests into record classes. I'm using Jackson with Micronaut to setup a client. Here are my classes:</p>\n<p><strong>User record</strong></p>\n<pre><code>public record User(\n        long id,\n        boolean isBot,\n        String firstName,\n        String userName,\n        boolean canJoinGroups,\n        boolean canReadAllGroupMessages,\n        boolean supportsInlineQueries) {\n}\n</code></pre>\n<p><strong>TelegramResponse record</strong></p>\n<pre><code>public record TelegramResponse&lt;T&gt;(T result, boolean ok) {\n}\n</code></pre>\n<p><strong>TelegramApiClient class</strong></p>\n<pre><code>@Client(&quot;https://api.telegram.org/bot${bot.id}&quot;)\npublic interface TelegramApiClient {\n\n    @Get(&quot;/getMe&quot;)\n    TelegramResponse&lt;User&gt; getSelf();\n}\n</code></pre>\n<p>When I call this method, I'm getting this error:</p>\n<pre><code>16:22:52.916 [default-nioEventLoopGroup-1-2] ERROR i.m.h.s.netty.RoutingInBoundHandler - Unexpected error occurred: Error decoding HTTP response body: Error decoding stream for type [class com.praytic.TelegramResponse]: Can not set final java.lang.Boolean field com.praytic.User.supportsInlineQueries to java.lang.Boolean (through reference chain: com.praytic.TelegramResponse[&quot;result&quot;])\nio.micronaut.http.client.exceptions.HttpClientResponseException: Error decoding HTTP response body: Error decoding stream for type [class com.praytic.TelegramResponse]: Can not set final java.lang.Boolean field com.praytic.User.supportsInlineQueries to java.lang.Boolean (through reference chain: com.praytic.TelegramResponse[&quot;result&quot;])\n    at io.micronaut.http.client.netty.DefaultHttpClient$11.channelReadInstrumented(DefaultHttpClient.java:2191)\n    at io.micronaut.http.client.netty.DefaultHttpClient$11.channelReadInstrumented(DefaultHttpClient.java:2061)\n    at io.micronaut.http.client.netty.DefaultHttpClient$SimpleChannelInboundHandlerInstrumented.channelRead0(DefaultHttpClient.java:2765)\n    at io.netty.channel.SimpleChannelInboundHandler.channelRead(SimpleChannelInboundHandler.java:99)\n    at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:379)\n    at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:365)\n    at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:357)\n    at io.micronaut.http.netty.stream.HttpStreamsHandler.channelRead(HttpStreamsHandler.java:194)\n    at io.micronaut.http.netty.stream.HttpStreamsClientHandler.channelRead(HttpStreamsClientHandler.java:183)\n    at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:379)\n    at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:365)\n    at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:357)\n    at io.netty.handler.codec.MessageToMessageDecoder.channelRead(MessageToMessageDecoder.java:103)\n    at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:379)\n    at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:365)\n    at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:357)\n    at io.netty.handler.codec.MessageToMessageDecoder.channelRead(MessageToMessageDecoder.java:103)\n    at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:379)\n    at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:365)\n    at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:357)\n    at io.netty.channel.CombinedChannelDuplexHandler$DelegatingChannelHandlerContext.fireChannelRead(CombinedChannelDuplexHandler.java:436)\n    at io.netty.handler.codec.ByteToMessageDecoder.fireChannelRead(ByteToMessageDecoder.java:324)\n    at io.netty.handler.codec.ByteToMessageDecoder.channelRead(ByteToMessageDecoder.java:296)\n    at io.netty.channel.CombinedChannelDuplexHandler.channelRead(CombinedChannelDuplexHandler.java:251)\n    at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:379)\n    at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:365)\n    at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:357)\n    at io.netty.handler.timeout.IdleStateHandler.channelRead(IdleStateHandler.java:286)\n    at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:379)\n    at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:365)\n    at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:357)\n    at io.netty.handler.ssl.SslHandler.unwrap(SslHandler.java:1368)\n    at io.netty.handler.ssl.SslHandler.decodeJdkCompatible(SslHandler.java:1234)\n    at io.netty.handler.ssl.SslHandler.decode(SslHandler.java:1280)\n    at io.netty.handler.codec.ByteToMessageDecoder.decodeRemovalReentryProtection(ByteToMessageDecoder.java:507)\n    at io.netty.handler.codec.ByteToMessageDecoder.callDecode(ByteToMessageDecoder.java:446)\n    at io.netty.handler.codec.ByteToMessageDecoder.channelRead(ByteToMessageDecoder.java:276)\n    at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:379)\n    at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:365)\n    at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:357)\n    at io.netty.channel.DefaultChannelPipeline$HeadContext.channelRead(DefaultChannelPipeline.java:1410)\n    at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:379)\n    at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:365)\n    at io.netty.channel.DefaultChannelPipeline.fireChannelRead(DefaultChannelPipeline.java:919)\n    at io.netty.channel.nio.AbstractNioByteChannel$NioByteUnsafe.read(AbstractNioByteChannel.java:166)\n    at io.netty.channel.nio.NioEventLoop.processSelectedKey(NioEventLoop.java:719)\n    at io.netty.channel.nio.NioEventLoop.processSelectedKeysOptimized(NioEventLoop.java:655)\n    at io.netty.channel.nio.NioEventLoop.processSelectedKeys(NioEventLoop.java:581)\n    at io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:493)\n    at io.netty.util.concurrent.SingleThreadEventExecutor$4.run(SingleThreadEventExecutor.java:989)\n    at io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74)\n    at io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)\n    at java.base/java.lang.Thread.run(Thread.java:831)\nCaused by: io.micronaut.http.codec.CodecException: Error decoding stream for type [class com.praytic.TelegramResponse]: Can not set final java.lang.Boolean field com.praytic.User.supportsInlineQueries to java.lang.Boolean (through reference chain: com.praytic.TelegramResponse[&quot;result&quot;])\n    at io.micronaut.jackson.codec.JacksonMediaTypeCodec.decode(JacksonMediaTypeCodec.java:209)\n    at io.micronaut.http.client.netty.FullNettyClientHttpResponse.convertByteBuf(FullNettyClientHttpResponse.java:280)\n    at io.micronaut.http.client.netty.FullNettyClientHttpResponse.lambda$getBody$1(FullNettyClientHttpResponse.java:218)\n    at java.base/java.util.HashMap.computeIfAbsent(HashMap.java:1224)\n    at io.micronaut.http.client.netty.FullNettyClientHttpResponse.getBody(FullNettyClientHttpResponse.java:192)\n    at io.micronaut.http.client.netty.FullNettyClientHttpResponse.&lt;init&gt;(FullNettyClientHttpResponse.java:111)\n    at io.micronaut.http.client.netty.DefaultHttpClient$11.channelReadInstrumented(DefaultHttpClient.java:2121)\n    ... 52 common frames omitted\nCaused by: com.fasterxml.jackson.databind.JsonMappingException: Can not set final java.lang.Boolean field com.praytic.User.supportsInlineQueries to java.lang.Boolean (through reference chain: com.praytic.TelegramResponse[&quot;result&quot;])\n    at com.fasterxml.jackson.databind.JsonMappingException.from(JsonMappingException.java:274)\n    at com.fasterxml.jackson.databind.deser.SettableBeanProperty._throwAsIOE(SettableBeanProperty.java:623)\n    at com.fasterxml.jackson.databind.deser.SettableBeanProperty._throwAsIOE(SettableBeanProperty.java:611)\n    at com.fasterxml.jackson.databind.deser.SettableBeanProperty._throwAsIOE(SettableBeanProperty.java:634)\n    at com.fasterxml.jackson.databind.deser.impl.FieldProperty.set(FieldProperty.java:193)\n    at com.fasterxml.jackson.databind.deser.impl.PropertyValue$Regular.assign(PropertyValue.java:62)\n    at com.fasterxml.jackson.databind.deser.impl.PropertyBasedCreator.build(PropertyBasedCreator.java:211)\n    at com.fasterxml.jackson.databind.deser.BeanDeserializer._deserializeUsingPropertyBased(BeanDeserializer.java:520)\n    at com.fasterxml.jackson.databind.deser.BeanDeserializerBase.deserializeFromObjectUsingNonDefault(BeanDeserializerBase.java:1405)\n    at com.fasterxml.jackson.databind.deser.BeanDeserializer.deserializeFromObject(BeanDeserializer.java:362)\n    at com.fasterxml.jackson.databind.deser.BeanDeserializer.deserialize(BeanDeserializer.java:195)\n    at com.fasterxml.jackson.databind.deser.SettableBeanProperty.deserialize(SettableBeanProperty.java:542)\n    at com.fasterxml.jackson.databind.deser.BeanDeserializer._deserializeWithErrorWrapping(BeanDeserializer.java:565)\n    at com.fasterxml.jackson.databind.deser.BeanDeserializer._deserializeUsingPropertyBased(BeanDeserializer.java:449)\n    at com.fasterxml.jackson.databind.deser.BeanDeserializerBase.deserializeFromObjectUsingNonDefault(BeanDeserializerBase.java:1405)\n    at com.fasterxml.jackson.databind.deser.BeanDeserializer.deserializeFromObject(BeanDeserializer.java:362)\n    at com.fasterxml.jackson.databind.deser.BeanDeserializer.deserialize(BeanDeserializer.java:195)\n    at com.fasterxml.jackson.databind.deser.DefaultDeserializationContext.readRootValue(DefaultDeserializationContext.java:322)\n    at com.fasterxml.jackson.databind.ObjectMapper._readMapAndClose(ObjectMapper.java:4593)\n    at com.fasterxml.jackson.databind.ObjectMapper.readValue(ObjectMapper.java:3643)\n    at io.micronaut.jackson.codec.JacksonMediaTypeCodec.decode(JacksonMediaTypeCodec.java:204)\n    ... 58 common frames omitted\nCaused by: java.lang.IllegalAccessException: Can not set final java.lang.Boolean field com.praytic.User.supportsInlineQueries to java.lang.Boolean\n    at java.base/jdk.internal.reflect.UnsafeFieldAccessorImpl.throwFinalFieldIllegalAccessException(UnsafeFieldAccessorImpl.java:76)\n    at java.base/jdk.internal.reflect.UnsafeFieldAccessorImpl.throwFinalFieldIllegalAccessException(UnsafeFieldAccessorImpl.java:80)\n    at java.base/jdk.internal.reflect.UnsafeQualifiedObjectFieldAccessorImpl.set(UnsafeQualifiedObjectFieldAccessorImpl.java:79)\n    at java.base/java.lang.reflect.Field.set(Field.java:793)\n    at com.fasterxml.jackson.databind.deser.impl.FieldProperty.set(FieldProperty.java:190)\n    ... 74 common frames omitted\n</code></pre>\n<p>I have read from <a href=\"https://cowtowncoder.medium.com/jackson-2-12-most-wanted-5-5-a32c28c345b5\" rel=\"noreferrer\">this</a> article that Jackson 2.12 already supports <code>java.lang.Record</code> type. My Jackson configuration for Micronaut:</p>\n<pre><code>jackson:\n  property-naming-strategy: SNAKE_CASE\n  serialization-inclusion: always\n</code></pre>\n<p><strong>EDIT:</strong></p>\n<p>As I guessed, putting <code>@JsonProperty</code> annotation on each field in record header worked. Exception is gone and all values are populared.</p>\n<pre><code>public record User(\n        long id,\n        @JsonProperty(&quot;is_bot&quot;) boolean isBot,\n        @JsonProperty(&quot;first_name&quot;) String firstName,\n        @JsonProperty(&quot;user_name&quot;) String userName,\n        @JsonProperty(&quot;can_join_groups&quot;) boolean canJoinGroups,\n        @JsonProperty(&quot;can_read_all_group_messages&quot;) boolean canReadAllGroupMessages,\n        @JsonProperty(&quot;supports_inline_queries&quot;) boolean supportsInlineQueries) {\n}\n</code></pre>\n<p>However, I don't want to do it for each of my DTO records. How to make <code>jackson.property-naming-strategy: SNAKE_CASE</code> property work?</p>\n"}],"has_more":true,"quota_max":10000,"quota_remaining":9781,"page":76,"page_size":100}
